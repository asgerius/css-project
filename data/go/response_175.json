[{"tags": ["amazon-web-services", "go", "aws-sdk", "aws-sdk-go"], "answers": [{"comments": [{"owner": {"reputation": 1324, "user_id": 331655, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb01f5e25a224fe693ae29399911caf9?s=128&d=identicon&r=PG", "display_name": "Amrit Bera", "link": "https://stackoverflow.com/users/331655/amrit-bera"}, "edited": false, "score": 0, "creation_date": 1526548747, "post_id": 50378260, "comment_id": 87791044, "body": "Thanks! But this doesn&#39;t work and PutItemRequest is not satisfying the interface (should return dynamodb.PutItemRequest). The examples in &lt;anything&gt;iface is out-dated (copied from old version) and actually there&#39;s more to it: <a href=\"https://github.com/aws/aws-sdk-go-v2/issues/70\" rel=\"nofollow noreferrer\">github.com/aws/aws-sdk-go-v2/issues/70</a>"}], "tags": [], "owner": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "is_accepted": false, "score": 2, "last_activity_date": 1526553138, "last_edit_date": 1526553138, "creation_date": 1526497376, "answer_id": 50378260, "question_id": 50377674, "link": "https://stackoverflow.com/questions/50377674/how-do-i-write-unit-test-aws-sdk-go-v2-dynamodb-implementation/50378260#50378260", "title": "How do I write unit test aws-sdk-go-v2 dynamodb implementation", "body": "<p>Taking your example, you could do your assertions directly in the mock</p>\n\n<pre><code>type mockDynamoDBClient struct {\n    t *testing.T\n    expected *dynamodb.PutItemInput\n    response *dynamodb.PutItemOutput\n    dynamodbiface.DynamoDBAPI\n}\n\nfunc (m *mockDynamoDBClient) PutItemRequest(input *dynamodb.PutItemInput) dynamodb.PutItemOutput {\n    // some kind of equality check\n    if !reflect.DeepEqual(m.expected, input) {\n        t.Errorf(...// some error message)\n    }\n    return m.response\n}\n</code></pre>\n\n<p>The main problems with this example are:</p>\n\n<p><code>t *testing.T</code>, <code>expected *dynamodb.PutItemInput</code> and response <code>response *dynamodb.PutItemOutput</code> all need to be inside the struct which feels messy.</p>\n\n<p>Instead you could use an anonymous function to do this:</p>\n\n<pre><code>type mockDynamoDBClient struct {\n    f func(input *dynmaodb.PutItemInput) *dynamodb.PutItemOutput\n    dynamodbiface.DynamoDBAPI\n}\n\nfunc (m *mockDynamoDBClient) PutItemRequest(input *dynamodb.PutItemInput) dynamodb.PutItemOutput {\n    return m.f(input)\n}\n</code></pre>\n\n<p>Now in the test code you can make slightly better use of the mock struct:</p>\n\n<pre><code>m := &amp;mockDynamoDBClient{\n    f: func(input *dynamodb.PutItemInput) *dynamodb.PutItemOutput {\n        // assertions on input\n        // return mock responses\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong> based on comment:</p>\n\n<p>You should also consider making your <code>MyPutItem</code> function dependent on the smallest interface possible. If you only need access to the <code>PutItemRequest</code> method then you can create your own interface for that method and use that in <code>MyPutItem</code></p>\n\n<pre><code>type MyDynamoPutter interface {\n    func (c *DynamoDB) PutItemRequest(input *PutItemInput) PutItemRequest\n}\n</code></pre>\n\n<p>Then in <code>MyPutItem</code> you can use your own interface:</p>\n\n<pre><code>func MyPutItem(d mydata, client MyDynamoPutter) error {\n    input := &amp;dynamodb.PutItemInput{\n        ....\n    }\n    req := client.PutItemRequest(input)\n    result, err := req.Send()\n    log.Println(result)\n    return err\n}\n</code></pre>\n\n<p>This reduces the surface area that you need to mock!</p>\n"}, {"tags": [], "owner": {"reputation": 1324, "user_id": 331655, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb01f5e25a224fe693ae29399911caf9?s=128&d=identicon&r=PG", "display_name": "Amrit Bera", "link": "https://stackoverflow.com/users/331655/amrit-bera"}, "is_accepted": true, "score": 1, "last_activity_date": 1527599292, "creation_date": 1527599292, "answer_id": 50585238, "question_id": 50377674, "link": "https://stackoverflow.com/questions/50377674/how-do-i-write-unit-test-aws-sdk-go-v2-dynamodb-implementation/50585238#50585238", "title": "How do I write unit test aws-sdk-go-v2 dynamodb implementation", "body": "<p>Faking the SDK like this works:</p>\n\n<p>main_test.go</p>\n\n<pre><code>type fakeDynamoDBClient struct {\n    dynamodbiface.DynamoDBAPI\n}\n\nfunc (m *fakeDynamoDBClient) GetItemRequest(input *dynamodb.GetItemInput) dynamodb.GetItemRequest {\n    return dynamodb.GetItemRequest{\n        Request: &amp;aws.Request{\n            Data: &amp;dynamodb.GetItemOutput{\n                Item: map[string]dynamodb.AttributeValue{\n                    \"count\": dynamodb.AttributeValue{\n                        N: aws.String(\"10\"),\n                    },\n                },\n            },\n        },\n    }\n}\n\nfunc (m *fakeDynamoDBClient) PutItemRequest(input *dynamodb.PutItemInput) dynamodb.PutItemRequest {\n    return dynamodb.PutItemRequest{\n        Request: &amp;aws.Request{\n            Data: &amp;dynamodb.PutItemOutput{},\n        },\n    }\n}\n\nfunc TestUpdateCount(t *testing.T) {\n    err := UpdateCount(10, &amp;fakeDynamoDBClient{})\n    if err != nil {\n        t.Error(\"Failed to update badge count on dynamodb\", err)\n    }\n}\n</code></pre>\n\n<p>main.go</p>\n\n<pre><code>func UpdateCount(count int, client dynamodbiface.DynamoDBAPI) error {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1324, "user_id": 331655, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/eb01f5e25a224fe693ae29399911caf9?s=128&d=identicon&r=PG", "display_name": "Amrit Bera", "link": "https://stackoverflow.com/users/331655/amrit-bera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3140, "favorite_count": 1, "accepted_answer_id": 50585238, "answer_count": 2, "score": 1, "last_activity_date": 1615058712, "creation_date": 1526494895, "last_edit_date": 1615058712, "question_id": 50377674, "link": "https://stackoverflow.com/questions/50377674/how-do-i-write-unit-test-aws-sdk-go-v2-dynamodb-implementation", "title": "How do I write unit test aws-sdk-go-v2 dynamodb implementation", "body": "<p>I am still grasping go-interfaces and I can mock the <a href=\"https://godoc.org/github.com/aws/aws-sdk-go-v2/service/dynamodb#DynamoDB.WaitUntilTableExists\" rel=\"nofollow noreferrer\">WaitUntilTableExists</a> func. But unable to mock <a href=\"https://godoc.org/github.com/aws/aws-sdk-go-v2/service/dynamodb#PutItemRequest\" rel=\"nofollow noreferrer\">PutItemRequest</a>.</p>\n\n<p>Here's my <strong>main.go</strong> snippet</p>\n\n<pre><code>func MyPutItem(d mydata, client dynamodbiface.DynamoDBAPI) error {\n    input := &amp;dynamodb.PutItemInput{\n        ....\n    }\n    req := client.PutItemRequest(input)\n    result, err := req.Send()\n    log.Println(result)\n    return err\n}\n</code></pre>\n\n<p><strong>main_test.go</strong> snippet</p>\n\n<pre><code>type mockDynamoDBClient struct {\n    dynamodbiface.DynamoDBAPI\n}\n\nfunc (m *mockDynamoDBClient) PutItemRequest(input *dynamodb.PutItemInput) dynamodb.PutItemRequest {\n    // Most probably this is where I need your help\n}\n\nfunc TestStoreInDynamoDB(t *testing.T) {\n    var mockClient = new(mockDynamoDBClient)\n    d := mydata{}\n    result := DynampDBPutItem(d, mockClient)\n    t.Log(result)\n}\n</code></pre>\n"}, {"tags": ["go", "lang"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 2, "creation_date": 1526495158, "post_id": 50377630, "comment_id": 87771596, "body": "The error explains it all: The application is attempting to a append a value with type <code>[]c</code> to a slice with elements of type <code>[]string</code>.  A <code>[]c</code> is not a <code>[]string</code>. It&#39;s difficult for me to help further because I cannot determine the intent of the code.  There are too many variables with placeholder names (ii, xx, ...)"}], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 5705686, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYuOhkTQVgQ/AAAAAAAAAAI/AAAAAAAAA1A/v5x1CDU6W4s/photo.jpg?sz=128", "display_name": "dolan", "link": "https://stackoverflow.com/users/5705686/dolan"}, "is_accepted": false, "score": 2, "last_activity_date": 1526495200, "creation_date": 1526495200, "answer_id": 50377746, "question_id": 50377630, "link": "https://stackoverflow.com/questions/50377630/cannot-use-type-string-as-type-string-in-go-lang/50377746#50377746", "title": "cannot use type [] string as type string in go lang", "body": "<p>You are trying to append <code>Title1</code> (type <code>[]c</code>) to <code>Article</code> (type <code>[][]string</code>).</p>\n\n<p>You can only append items of type <code>[]string</code> to <code>Article</code>. So you would either need to change the type of <code>Article</code> or create a new variable (like <code>TitleStr</code>) which is of type <code>[]string</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 2092430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bcd3c2835e6a2b9a39f60c2700859e9?s=128&d=identicon&r=PG", "display_name": "Alexander mit", "link": "https://stackoverflow.com/users/2092430/alexander-mit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9518, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1526495200, "creation_date": 1526494789, "question_id": 50377630, "link": "https://stackoverflow.com/questions/50377630/cannot-use-type-string-as-type-string-in-go-lang", "title": "cannot use type [] string as type string in go lang", "body": "<p>Please help how can i solve this issue, Im getting this error </p>\n\n<p>cannot use Title1 (type []c) as type []string in append. </p>\n\n<p>Once i append on this line</p>\n\n<p>Article=append(Article,Title1)<br>\n Thanks </p>\n\n<pre><code>            type a struct {\n                Title   []b\n                Title1  []c\n                Article [][]string\n            }\n            type b struct{\n                DD   string\n                FF int\n            }\n            type c struct{\n                CC string\n                EE string\n            }\n            type d struct{\n                DD string\n            }\n            func main() {\n                xx:=b{}\n                Title:=[]b{}\n                yy:=c{}\n                Title1:=[]c{}\n                Article:=[][]string{}\n                for i:=0; i&lt;=2; i++{\n                    xx.DD=strconv.Itoa(i)+\"a\"\n                    xx.FF=i\n                    Title=append(Title,xx)\n                    Title1=nil\n                    for ii:=0; ii&lt;=2; ii++{\n                        yy.CC=strconv.Itoa(ii)+\"b\"\n                        yy.EE=strconv.Itoa(ii)+\"c\"\n                        Title1=append(Title1,yy)\n                    }\n                    fmt.Println(Title1)\n                    Article=append(Article,Title1)  \n                }\n            var data = &amp;a{\n                    Title: Title,\n                    Article: Article,\n                }\n                fmt.Println(data)\n                tmpl := template.Must(template.New(\"test\").Parse(tmplSrc))\n                tmpl.Execute(os.Stdout, data)\n            }\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["go", "go-templates"], "answers": [{"comments": [{"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526505125, "post_id": 50379136, "comment_id": 87776156, "body": "finally I could reproduce the OP problem, please see; <a href=\"https://play.golang.org/p/DOBzNqEdBjc\" rel=\"nofollow noreferrer\">play.golang.org/p/DOBzNqEdBjc</a>"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526505403, "post_id": 50379136, "comment_id": 87776253, "body": "my example &quot;doesn&#39;t work&quot;, it shows that when you use the path as the name and then call ParseFiles you&#39;ll get an inconsistency between the name of the template <code>t</code> and the name of the actual parsed template. <code>path+ParseFiles =&gt; name is: &#47;tmp&#47;054003078 ; defined templates are: &quot;054003078&quot;</code> this is not an ok output."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526505450, "post_id": 50379136, "comment_id": 87776274, "body": "your example was incomplete... i just complete it in order to get the OP error... thanks ;)"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526505641, "post_id": 50379136, "comment_id": 87776350, "body": "consider adding the example that actually PRINTS an error, just a suggestion.. it helps me."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526505787, "post_id": 50379136, "comment_id": 87776401, "body": "If all you want is to reproduce that specific error you can do this: <code>template.New(&quot;whatever&quot;).Execute(os.Stdout, nil)</code>."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526507635, "post_id": 50379136, "comment_id": 87777075, "body": "not that @mkproiva i guess you are not getting into what i&#39;m trying to find is the <i>root</i> of the problem. If you refer to the file using a path that includes &quot;/&quot; for the name of the template you get the problem. Instead if you only use the base name you won&#39;t, because there is no &quot;/&quot; in the path."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526507801, "post_id": 50379136, "comment_id": 87777128, "body": "what happens if the use employs pageFile := &quot;testpage.html&quot;, that would work? (assuming that the file is at that location at runtime)"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526507910, "post_id": 50379136, "comment_id": 87777164, "body": "That would work because the filepath and base name are the same. But passing &quot;tmp/testpage.html&quot; (without the leading &quot;/&quot;) is not the base name of the file and therefore <b>may</b> fail."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526507987, "post_id": 50379136, "comment_id": 87777192, "body": "so please, try to bear with me and don&#39;t deny that &quot;/&quot; is part of the problem."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508132, "post_id": 50379136, "comment_id": 87777253, "body": "you have said that... if you employ an &quot;/&quot; you get the problem, if you don&#39;t employ you don&#39;t... so.. i&#39;m not saying THAT is the problem... i&#39;m saying that is important part of the problem."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508138, "post_id": 50379136, "comment_id": 87777256, "body": "How is it part of the problem? If &quot;tmp/testpage.html&quot; and &quot;/tmp/testpage.thml&quot; both fail equally, how is &quot;/&quot; the problem here? Please elaborate @VIctor."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508201, "post_id": 50379136, "comment_id": 87777274, "body": "our discussion would be nice to have with a coffe dear mkpriva. I have plenty of stuff to learn for today. LEt&#39;s continue this another day, shall we?"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508356, "post_id": 50379136, "comment_id": 87777327, "body": "To be clear &quot;/&quot; is not important, it is actually irrelevant, and you should not focus on that. You should think about the cause of the problem in terms of filepaths and base names."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508507, "post_id": 50379136, "comment_id": 87777371, "body": "well for a start i would argue that using template.NEw() followed by template.ParseFiles() does have any meaning? why not use directly template.ParseFiles()? I guess that open the way to discussion like the one we are having. See the snippet <a href=\"https://play.golang.org/p/408hyExUQ9k\" rel=\"nofollow noreferrer\">play.golang.org/p/408hyExUQ9k</a>"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508561, "post_id": 50379136, "comment_id": 87777384, "body": "and yes mkvpriva, by using &quot;/&quot; you are introducing an error to the ill way of using template. Ill way = <code>Template.NEw(&quot;blabla&quot;).ParseFiles(files)</code>"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526508626, "post_id": 50379136, "comment_id": 87777407, "body": "coffe with sugar?"}], "tags": [], "owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "is_accepted": true, "score": 3, "last_activity_date": 1526505406, "last_edit_date": 1526505406, "creation_date": 1526501246, "answer_id": 50379136, "question_id": 50376252, "link": "https://stackoverflow.com/questions/50376252/golang-template-function-returns-blank-page/50379136#50379136", "title": "Golang template function returns blank page", "body": "<p>Since <code>html/template</code> uses <code>text/template</code> underneath, you can often find additional information regarding how templates work in the <code>text/template</code> package.</p>\n\n<p>From the docs of <a href=\"https://golang.org/pkg/text/template/#Template.ParseFiles\" rel=\"nofollow noreferrer\">ParseFiles</a>:</p>\n\n<blockquote>\n  <p>Since the templates created by ParseFiles are named by the <strong>base names</strong>\n  of the argument files, t should <em>usually have the name</em> of one of the\n  (base) names of the files. If it does not, depending on t's contents\n  before calling ParseFiles, t.Execute <strong>may fail</strong>. In that case use\n  t.ExecuteTemplate to execute a valid template.</p>\n</blockquote>\n\n<p>(emphasis mine)</p>\n\n<hr>\n\n<p>The problem is caused by the fact that you are passing the template file's path as the name of the template and then calling the <code>ParseFiles</code> method.</p>\n\n<p>Because of how <a href=\"https://golang.org/pkg/html/template/#Template.ParseFiles\" rel=\"nofollow noreferrer\"><code>ParseFiles</code></a>, and <a href=\"https://golang.org/pkg/html/template/#Template.ParseGlob\" rel=\"nofollow noreferrer\"><code>ParseGlob</code></a> for that matter, are implemented, this causes an inconsistency between the name you explicitly passed to <code>New</code> and the names these two methods assign to the parsed templates.</p>\n\n<p>You can test this by calling the <a href=\"https://golang.org/pkg/html/template/#Template.DefinedTemplates\" rel=\"nofollow noreferrer\"><code>DefinedTemplates</code></a> method.</p>\n\n<p><a href=\"https://play.golang.org/p/LEi-xSn4LOF\" rel=\"nofollow noreferrer\">https://play.golang.org/p/LEi-xSn4LOF</a></p>\n\n<hr>\n\n<p>Also please take a look at @icza's <a href=\"https://stackoverflow.com/questions/41176355/go-template-name/41187671#41187671\">Go template name answer</a> to get a better understanding of templates.</p>\n"}, {"tags": [], "owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "is_accepted": false, "score": 2, "last_activity_date": 1526655876, "creation_date": 1526655876, "answer_id": 50414256, "question_id": 50376252, "link": "https://stackoverflow.com/questions/50376252/golang-template-function-returns-blank-page/50414256#50414256", "title": "Golang template function returns blank page", "body": "<p>After some research and discussions i guess this line is ill formed:</p>\n\n<pre><code>tmpl, err := template.New(pageFile).ParseFiles(pageFile)\n</code></pre>\n\n<p>You don't need to do a <code>New(pageFile)</code>. You only need to use the <code>ParseFiles</code> method directly and bear in mind that the name of the templaes will be equals to the base names of the passed files.</p>\n\n<p>So, touch a little bit yhe code and use:</p>\n\n<pre><code>tmpl, err := template.ParseFiles(pageFile)\n</code></pre>\n\n<p>See <a href=\"https://play.golang.org/p/408hyExUQ9k\" rel=\"nofollow noreferrer\">this example</a> for more </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11840164, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JeHQso4XHsI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfelPjfyyIBGrzjrv9zY9_8Vs9Y0g/photo.jpg?sz=128", "display_name": "SHURONG XU", "link": "https://stackoverflow.com/users/11840164/shurong-xu"}, "is_accepted": false, "score": 0, "last_activity_date": 1564125986, "creation_date": 1564125986, "answer_id": 57215089, "question_id": 50376252, "link": "https://stackoverflow.com/questions/50376252/golang-template-function-returns-blank-page/57215089#57215089", "title": "Golang template function returns blank page", "body": "<pre><code>func indexHandler(w http.ResponseWriter, r *http.Request) {\n  pageFile := \"html/testpage.html\"\n  name := \"testpage\"\n  tmpl, err := template.New(name).Delims(\"[[\", \"]]\").ParseFiles(pageFile)  //only translate a \"name\" to New()\n  //tmpl := template.Must(template.ParseFiles(pageFile))\n  if (err!=nil){\n    fmt.Println(\"Error\")\n    fmt.Println(err)\n  }\n\n  tmpl.Execute(w, nil)\n  //tmpl.ExecuteTemplate(w, name, nil)\n}\n</code></pre>\n"}], "owner": {"reputation": 398, "user_id": 229486, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/242167296556151cf6216a3adde1e0cb?s=128&d=identicon&r=PG", "display_name": "Devasia Joseph", "link": "https://stackoverflow.com/users/229486/devasia-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "accepted_answer_id": 50379136, "answer_count": 3, "score": 2, "last_activity_date": 1564125986, "creation_date": 1526489540, "last_edit_date": 1526492621, "question_id": 50376252, "link": "https://stackoverflow.com/questions/50376252/golang-template-function-returns-blank-page", "title": "Golang template function returns blank page", "body": "<p>I am trying to change the default delimiters for Golang hml templates and here is the code I am using now:</p>\n\n<pre><code>func indexHandler(w http.ResponseWriter, r *http.Request) {\n  pageFile := \"html/testpage.html\"\n  tmpl, err := template.New(pageFile).Delims(\"[[\", \"]]\").ParseFiles(pageFile)\n  //tmpl := template.Must(template.ParseFiles(pageFile))\n  if (err!=nil){\n    fmt.Println(\"Error\")\n    fmt.Println(err)\n  }\n\n  tmpl.Execute(w, nil)\n}\n</code></pre>\n\n<p>The above code renders a blank page in the browser. It will render properly if I use the commented out code instead of the second line.</p>\n\n<p>Here is the template page source:</p>\n\n<pre><code>&lt;!doctype html&gt;\n\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n\n  &lt;title&gt;The HTML5 &lt;/title&gt;\n  &lt;meta name=\"description\" content=\"HTML5\"&gt;\n  &lt;meta name=\"author\" content=\"Test\"&gt;   \n&lt;/head&gt;    \n&lt;body&gt;\n  This is html page\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My go version is: <code>go version go1.10.2 linux/amd64</code></p>\n\n<p>I run it by <code>go run test.go</code> test.go being in the main package</p>\n\n<p>There is no error message being printed in the browser or the terminal.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["go", "gob"], "comments": [{"owner": {"reputation": 394, "user_id": 9289181, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kEJV4.jpg?s=128&g=1", "display_name": "fl9", "link": "https://stackoverflow.com/users/9289181/fl9"}, "edited": false, "score": 2, "creation_date": 1526487721, "post_id": 50375556, "comment_id": 87767742, "body": "fyi: there is an open issue for this in the Go repository <a href=\"https://github.com/golang/go/issues/5819\" rel=\"nofollow noreferrer\">github.com/golang/go/issues/5819</a>"}, {"owner": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526490086, "post_id": 50375556, "comment_id": 87768972, "body": "@ThunderCat Funnily enough I was experimenting with your second solution exactly at the time you wrote your comment. And believe it or not, I find it less ugly (because it\u2019s limited to the code and does not pollute the stream with dummy data)"}, {"owner": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526490375, "post_id": 50375556, "comment_id": 87769123, "body": "@ThunderCat too much boiler plate for the first one, second one is the least ugly one (is the nil array really safe or should it be an empty array?)"}], "answers": [{"comments": [{"owner": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "edited": false, "score": 0, "creation_date": 1526490552, "post_id": 50376500, "comment_id": 87769221, "body": "First solution is not practical, Something could have dozens of methods."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "edited": false, "score": 0, "creation_date": 1526534168, "post_id": 50376500, "comment_id": 87783091, "body": "@FranckJeannin Why would the first solution be not practical? Even if something worth serializing would ever have dozens of methods:  Just forward them. This is the exact opposite of rocket-science."}, {"owner": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526540334, "post_id": 50376500, "comment_id": 87785971, "body": "@Volker it\u2019s just that solution 1 will add exponentially more code, each time you add a method to Something you need to forward it for all the structs that embed Something. If you find solution 2 too rocket-science, I would suggest solution 0 : add a Dummy (exported) member to Something. It\u2019s exactly one line of code regardless of own many times you embed Something."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 4, "last_activity_date": 1526490391, "creation_date": 1526490391, "answer_id": 50376500, "question_id": 50375556, "link": "https://stackoverflow.com/questions/50375556/how-to-tell-golang-gob-encoding-that-it-s-ok-to-serialize-a-struct-that-contains/50376500#50376500", "title": "How to tell Golang Gob encoding that it\u2019s ok to serialize a struct that contains a struct with no exported fields", "body": "<p>Here are some different workarounds from that proposed in the question. </p>\n\n<p>Don't use embedding.</p>\n\n<pre><code>type Composed struct {\n    something       Something\n    DataToSerialize int\n}\n\nfunc (c *Composed) DoSomething() { c.something.DoSomething() }\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/ELLxsvhN40h\" rel=\"nofollow noreferrer\">playground example</a></p>\n\n<p>Implement <a href=\"https://godoc.org/encoding/gob#GobDecoder.GobDecode\" rel=\"nofollow noreferrer\">GobDecoder</a> and <a href=\"https://godoc.org/encoding/gob#GobEncoder\" rel=\"nofollow noreferrer\">GobEncoder</a></p>\n\n<pre><code>func (*Something) GobDecode([]byte) error     { return nil }\nfunc (Something) GobEncode() ([]byte, error) { return nil, nil }\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/gqp5TPJ3dkB\" rel=\"nofollow noreferrer\">playground example</a></p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 5071744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xVSBcRSqnWs/AAAAAAAAAAI/AAAAAAAAABI/tfIFf0JPFgM/photo.jpg?sz=128", "display_name": "Jon Mandrell", "link": "https://stackoverflow.com/users/5071744/jon-mandrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1600384079, "creation_date": 1600384079, "answer_id": 63947209, "question_id": 50375556, "link": "https://stackoverflow.com/questions/50375556/how-to-tell-golang-gob-encoding-that-it-s-ok-to-serialize-a-struct-that-contains/63947209#63947209", "title": "How to tell Golang Gob encoding that it\u2019s ok to serialize a struct that contains a struct with no exported fields", "body": "<p>As far as I can tell the addition of the functions GobDecode and GobEncode only allow the encoder to avoid the error, but don't allow it to work correctly.\nIf I add a Decode operation it doesn't seem to get the DataToSerialize item back with the value I encoded into it.</p>\n<p><a href=\"https://play.golang.org/p/W30LHf1hHdt\" rel=\"nofollow noreferrer\">Playground example</a></p>\n"}], "owner": {"reputation": 3843, "user_id": 2843030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6c54e4c03b5028d13921bcbad5111bf?s=128&d=identicon&r=PG", "display_name": "Franck Jeannin", "link": "https://stackoverflow.com/users/2843030/franck-jeannin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 0, "accepted_answer_id": 50376500, "answer_count": 2, "score": 4, "last_activity_date": 1600384079, "creation_date": 1526487040, "last_edit_date": 1526488312, "question_id": 50375556, "link": "https://stackoverflow.com/questions/50375556/how-to-tell-golang-gob-encoding-that-it-s-ok-to-serialize-a-struct-that-contains", "title": "How to tell Golang Gob encoding that it\u2019s ok to serialize a struct that contains a struct with no exported fields", "body": "<p>I believe this is a legitimate use case for Gob serialization. Yet <code>enc.Encode</code> returns an error because <code>Something</code> has no exported field. Note that I\u2019m not serializing <code>Something</code> directly but only <code>Composed</code> that contains exported fields.</p>\n\n<p>The only workaround I\u2019ve found was to add a <code>Dummy</code> (exported) value to <code>Something</code>. This is ugly. Is there a more elegant solution?</p>\n\n<p><a href=\"https://play.golang.org/p/0pL6BfBb78m\" rel=\"nofollow noreferrer\">https://play.golang.org/p/0pL6BfBb78m</a></p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/gob\"\n)\n\ntype Something struct {\n    temp int\n}\n\nfunc (*Something) DoSomething() {}\n\ntype Composed struct {\n    Something\n    DataToSerialize int\n}\n\nfunc main() {\n    enc := gob.NewEncoder(&amp;bytes.Buffer{})\n    err := enc.Encode(Composed{})\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "beego"], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 6087555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/J0jbA.jpg?s=128&g=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/6087555/karthik"}, "edited": false, "score": 0, "creation_date": 1526527807, "post_id": 50374328, "comment_id": 87781459, "body": "So filter are parameters which are passed through the url,  like /cm/profile?customergroupid=14?"}, {"owner": {"reputation": 2272, "user_id": 3960316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3SJ9s.jpg?s=128&g=1", "display_name": "Marc Harry", "link": "https://stackoverflow.com/users/3960316/marc-harry"}, "reply_to_user": {"reputation": 752, "user_id": 6087555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/J0jbA.jpg?s=128&g=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/6087555/karthik"}, "edited": false, "score": 0, "creation_date": 1526975461, "post_id": 50374328, "comment_id": 87937896, "body": "No a filter is like middleware in other web frameworks. Something that can execute before the main body of the api call is made, so &quot;customergroupid&quot; might be looked up in a filter added to <code>ctx.Input</code> using the SetData method. And then retrieved in the api call by <code>ctx.Input.GetData</code>. Filters docs: <a href=\"https://beego.me/docs/mvc/controller/filter.md\" rel=\"nofollow noreferrer\">beego.me/docs/mvc/controller/filter.md</a>"}], "tags": [], "owner": {"reputation": 2272, "user_id": 3960316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3SJ9s.jpg?s=128&g=1", "display_name": "Marc Harry", "link": "https://stackoverflow.com/users/3960316/marc-harry"}, "is_accepted": true, "score": 0, "last_activity_date": 1526483060, "creation_date": 1526483060, "answer_id": 50374328, "question_id": 50373654, "link": "https://stackoverflow.com/questions/50373654/functionality-of-beego-syntax-ctx-input-getdatavariable-name/50374328#50374328", "title": "Functionality of Beego syntax &#39;Ctx.Input.GetData(&#39;&lt;variable-name&gt;&#39;)&#39;", "body": "<p>GetData is used to get data from filters in your controllers. It allows you to pass values other than just strings.</p>\n\n<p>From the Beego documentation:\nGetData\nGet value of Data in Input</p>\n\n<p>SetData\nSet value of Data in Input. GetData and SetData is used to pass data from Filter to Controller\n<a href=\"https://beego.me/docs/module/context.md\" rel=\"nofollow noreferrer\">https://beego.me/docs/module/context.md</a></p>\n"}], "owner": {"reputation": 752, "user_id": 6087555, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/J0jbA.jpg?s=128&g=1", "display_name": "Karthik", "link": "https://stackoverflow.com/users/6087555/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 50374328, "answer_count": 1, "score": 0, "last_activity_date": 1529253562, "creation_date": 1526481127, "last_edit_date": 1529253562, "question_id": 50373654, "link": "https://stackoverflow.com/questions/50373654/functionality-of-beego-syntax-ctx-input-getdatavariable-name", "title": "Functionality of Beego syntax &#39;Ctx.Input.GetData(&#39;&lt;variable-name&gt;&#39;)&#39;", "body": "<p>I am new to beego and goLang. I came across a code. If someone could explain the flow it would be very helpful. It is a GET API. I think <code>Prepare()</code> is like a filter. What I don't understand is <code>c.Ctx.Input.GetData(\"customerid\")</code> and <code>c.Ctx.Input.GetData(\"customergroupid\")</code> functions. Can someone explain me what <code>GetData</code> is doing and how we can pass values to them?</p>\n\n<pre><code>// URLMapping ...\nfunc (c *CampusHomeController) URLMapping() {\n    c.Mapping(\"GetOne\", c.GetOne)\n}\nfunc (c *CampusHomeController) Prepare() {\n    if c.Ctx.Input.GetData(\"customerid\") == \"\" {\n        returnJSON := postCampusHomeJSON{}\n        returnJSON.Code = 403\n        returnJSON.Msg = \"Invalid Session\"\n        c.Data[\"json\"] = &amp;returnJSON\n        c.ServeJSON()\n        c.StopRun()\n    }\n\n    if c.Ctx.Input.GetData(\"customergroupid\") == \"\" ||             \n        c.Ctx.Input.GetData(\"customergroupid\") == nil {\n\n        returnJSON := postCampusHomeJSON{}\n        returnJSON.Code = 404\n        returnJSON.Msg = \"User not a campus manager\"\n        c.Data[\"json\"] = &amp;returnJSON\n        c.ServeJSON()\n        c.StopRun()\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "concurrency"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 3, "creation_date": 1526477025, "post_id": 50372151, "comment_id": 87760128, "body": "Use a <a href=\"https://golang.org/pkg/sync/#RWMutex\" rel=\"nofollow noreferrer\"><code>sync.RWMutex</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 2222, "user_id": 1640308, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0BoKw.png?s=128&g=1", "display_name": "arash kordi", "link": "https://stackoverflow.com/users/1640308/arash-kordi"}, "edited": false, "score": 0, "creation_date": 1526478460, "post_id": 50372208, "comment_id": 87761198, "body": "exactly what i needed, thanx for quick answer"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 4, "last_activity_date": 1526480499, "last_edit_date": 1526480499, "creation_date": 1526477169, "answer_id": 50372208, "question_id": 50372151, "link": "https://stackoverflow.com/questions/50372151/golang-block-readers-only-when-writer-is-making-a-change/50372208#50372208", "title": "golang block readers only when writer is making a change", "body": "<p>This is what <a href=\"https://golang.org/pkg/sync/#RWMutex\" rel=\"nofollow noreferrer\"><code>sync.RWMutex</code></a> is for.</p>\n\n<p>It has 2 different lock methods: <a href=\"https://golang.org/pkg/sync/#RWMutex.Lock\" rel=\"nofollow noreferrer\"><code>RWMutex.Lock()</code></a> for writers, and <a href=\"https://golang.org/pkg/sync/#RWMutex.RLock\" rel=\"nofollow noreferrer\"><code>RWMutex.RLock()</code></a> for readers. (And there are 2 different unlock methods, matching the different lock methods: <a href=\"https://golang.org/pkg/sync/#RWMutex.Unlock\" rel=\"nofollow noreferrer\"><code>RWMutex.Unlock()</code></a> and <a href=\"https://golang.org/pkg/sync/#RWMutex.RUnlock\" rel=\"nofollow noreferrer\"><code>RWMutex.RUnlock()</code></a>.)</p>\n\n<p><code>RWMutex</code> allows multiple readers, or 1 writer. If a writer obtained the lock, no readers are allowed until the writer unlocks (also, no other writers allowed). If a reader obtains the read-lock, any other readers are allowed (but not a writer, not until all readers unlock).</p>\n\n<pre><code>m := sync.RWMutex{}\n\nfor i := 0; i &lt; 10; i++ {\n    go func() { // reader\n        for {\n            m.RLock()\n            myData := data\n            m.RUnlock()\n            read_from_data(myData)\n        }\n    }()\n}\n\ngo func() { // writer\n    for {\n        newData := new_data()\n        m.Lock()\n        data = newData\n        m.Unlock()\n        time.Sleep(1 * time.Seconds)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2222, "user_id": 1640308, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0BoKw.png?s=128&g=1", "display_name": "arash kordi", "link": "https://stackoverflow.com/users/1640308/arash-kordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "accepted_answer_id": 50372208, "answer_count": 1, "score": 1, "last_activity_date": 1526505857, "creation_date": 1526476979, "last_edit_date": 1526505857, "question_id": 50372151, "link": "https://stackoverflow.com/questions/50372151/golang-block-readers-only-when-writer-is-making-a-change", "title": "golang block readers only when writer is making a change", "body": "<p>I have one writer goroutine and multiple reader goroutines. I want to block readers when writer is changing data.</p>\n\n<pre><code>package main\n\ndata []int\n\nfunc main() {\n    m := sync.Mutex{}\n\n    for i := 0; i&lt; 10; i++ {\n        go func reader() {\n            for {\n                m.Lock()\n                myData := data\n                m.Unlock()\n                read_from_data(myData)\n            }\n        }()\n    }\n\n    go func writer() {\n        for {\n            newData := new_data()\n            m.Lock()\n            data = newData\n            m.Unlock()\n            time.Sleep(1 * time.Seconds)\n        }\n    }\n}\n</code></pre>\n\n<p>How can i do this without readers blocking each other?</p>\n"}, {"tags": ["docker", "go"], "comments": [{"owner": {"reputation": 31, "user_id": 8477120, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R-QDKkXsZCc/AAAAAAAAAAI/AAAAAAAAAZ4/HtTbTs-9YDQ/photo.jpg?sz=128", "display_name": "PRATIK NAIK", "link": "https://stackoverflow.com/users/8477120/pratik-naik"}, "edited": false, "score": 0, "creation_date": 1526475270, "post_id": 50371508, "comment_id": 87758794, "body": "Unable to build image     The command &#39;/bin/sh -c go-wrapper download   # &quot;go get -d -v ./...&quot;&#39;     returned a non-zero code: 1"}, {"owner": {"reputation": 86, "user_id": 1847699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e9a54fea312b4b80b9fc9e0de647a0?s=128&d=identicon&r=PG", "display_name": "Albin", "link": "https://stackoverflow.com/users/1847699/albin"}, "edited": false, "score": 0, "creation_date": 1526477419, "post_id": 50371508, "comment_id": 87760429, "body": "looks like github.com/tidwall/tile38/client should be github.com/tidwall/tile38/pkg/client"}, {"owner": {"reputation": 31, "user_id": 8477120, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R-QDKkXsZCc/AAAAAAAAAAI/AAAAAAAAAZ4/HtTbTs-9YDQ/photo.jpg?sz=128", "display_name": "PRATIK NAIK", "link": "https://stackoverflow.com/users/8477120/pratik-naik"}, "reply_to_user": {"reputation": 86, "user_id": 1847699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e9a54fea312b4b80b9fc9e0de647a0?s=128&d=identicon&r=PG", "display_name": "Albin", "link": "https://stackoverflow.com/users/1847699/albin"}, "edited": false, "score": 0, "creation_date": 1526479651, "post_id": 50371508, "comment_id": 87762214, "body": "@Albin thanks you are right its working now."}, {"owner": {"reputation": 9932, "user_id": 1839777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a382084bb1495af216e9a847c727d92e?s=128&d=identicon&r=PG", "display_name": "vonbrand", "link": "https://stackoverflow.com/users/1839777/vonbrand"}, "edited": false, "score": 0, "creation_date": 1526483947, "post_id": 50371508, "comment_id": 87765436, "body": "If you got it working, answer your own question to close the matter."}], "answers": [{"comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 1, "creation_date": 1526484572, "post_id": 50373634, "comment_id": 87765860, "body": "Won&#39;t that print out the same error message as above?"}], "tags": [], "owner": {"reputation": 23608, "user_id": 2915097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91318014af3b3d389901d50d5f9276d5?s=128&d=identicon&r=PG&f=1", "display_name": "user2915097", "link": "https://stackoverflow.com/users/2915097/user2915097"}, "is_accepted": false, "score": 5, "last_activity_date": 1526481055, "creation_date": 1526481055, "answer_id": 50373634, "question_id": 50371508, "link": "https://stackoverflow.com/questions/50371508/docker-go-build-returned-a-non-zero-code-1/50373634#50373634", "title": "Docker GO build returned a non-zero code: 1", "body": "<p>As an error code of 1 or 127 or any is not very self explanatory, the usual way of dealing with this type of problem is to notice the last layer successfully built</p>\n\n<p><code>Step 5/10 : RUN go get github.com/codegangsta/gin\n     ---&gt; Running in aae1a6e5d8bc\n     ---&gt; e808aee68694\n    Removing intermediate container aae1a6e5d8bc\n    Step 6/10</code></p>\n\n<p>here it is </p>\n\n<p>e808aee68694</p>\n\n<p>so you launch </p>\n\n<p><code>docker run -it e808aee68694 bash</code></p>\n\n<p>and now you launch the last failing command, and it should be more clear why it fails</p>\n\n<p><code>go-wrapper download   # \"go get -d -v ./...\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8477120, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R-QDKkXsZCc/AAAAAAAAAAI/AAAAAAAAAZ4/HtTbTs-9YDQ/photo.jpg?sz=128", "display_name": "PRATIK NAIK", "link": "https://stackoverflow.com/users/8477120/pratik-naik"}, "is_accepted": true, "score": 1, "last_activity_date": 1526548766, "creation_date": 1526548766, "answer_id": 50387761, "question_id": 50371508, "link": "https://stackoverflow.com/questions/50371508/docker-go-build-returned-a-non-zero-code-1/50387761#50387761", "title": "Docker GO build returned a non-zero code: 1", "body": "<p>Issue was github.com/tidwall/tile38/client should be github.com/tidwall/tile38/pkg/client</p>\n\n<p>Now its resolved </p>\n\n<p>@Albin thanks for point it out.</p>\n"}], "owner": {"reputation": 31, "user_id": 8477120, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R-QDKkXsZCc/AAAAAAAAAAI/AAAAAAAAAZ4/HtTbTs-9YDQ/photo.jpg?sz=128", "display_name": "PRATIK NAIK", "link": "https://stackoverflow.com/users/8477120/pratik-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3226, "favorite_count": 1, "accepted_answer_id": 50387761, "answer_count": 2, "score": 1, "last_activity_date": 1526548766, "creation_date": 1526475210, "last_edit_date": 1526519822, "question_id": 50371508, "link": "https://stackoverflow.com/questions/50371508/docker-go-build-returned-a-non-zero-code-1", "title": "Docker GO build returned a non-zero code: 1", "body": "<p>Docker command to build</p>\n\n<p><code>sudo docker build -t gpst .</code></p>\n\n<pre>\n\n    ubuntu@ip-172-31-9-252:~/goyo/GO/goyo.in/gpstracker$ sudo docker build -t gpst .\n    Sending build context to Docker daemon  1.819MB\n    Step 1/10 : FROM golang:1.8\n     ---> a8ef0d2260ca\n    Step 2/10 : RUN mkdir -p /go/src/goyo.in/gpstracker\n     ---> Using cache\n     ---> 70f242e31c63\n    Step 3/10 : WORKDIR /go/src/goyo.in/gpstracker\n     ---> Using cache\n     ---> a1609e2d1463\n    Step 4/10 : COPY . /go/src/goyo.in/gpstracker\n     ---> 2c90614f0f5b\n    Step 5/10 : RUN go get github.com/codegangsta/gin\n     ---> Running in aae1a6e5d8bc\n     ---> e808aee68694\n    Removing intermediate container aae1a6e5d8bc\n    Step 6/10 : RUN go-wrapper download   # \"go get -d -v ./...\"\n     ---> Running in 427b2c574de7\n    + exec go get -v -d\n    github.com/go-playground/log (download)\n    github.com/go-playground/errors (download)\n    github.com/tidwall/tile38 (download)\n    package github.com/tidwall/tile38/client: cannot find package \"github.com/tidwall/tile38/client\" in any of:\n            /usr/local/go/src/github.com/tidwall/tile38/client (from $GOROOT)\n            /go/src/github.com/tidwall/tile38/client (from $GOPATH)\n    github.com/garyburd/redigo (download)\n    github.com/googollee/go-socket.io (download)\n    github.com/googollee/go-engine.io (download)\n    github.com/gorilla/websocket (download)\n    github.com/rs/cors (download)\n    github.com/jasonlvhit/gocron (download)\n    github.com/NaySoftware/go-fcm (download)\n    Fetching https://golang.org/x/net/context?go-get=1\n    Parsing meta tags from https://golang.org/x/net/context?go-get=1 (status code 200)\n    get \"golang.org/x/net/context\": found meta tag main.metaImport{Prefix:\"golang.org/x/net\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/net\"} at https://golang.org/x/net/context?go-get=1\n    get \"golang.org/x/net/context\": verifying non-authoritative meta tag\n    Fetching https://golang.org/x/net?go-get=1\n    Parsing meta tags from https://golang.org/x/net?go-get=1 (status code 200)\n    golang.org/x/net (download)\n    Fetching https://google.golang.org/grpc?go-get=1\n    Parsing meta tags from https://google.golang.org/grpc?go-get=1 (status code 200)\n    get \"google.golang.org/grpc\": found meta tag main.metaImport{Prefix:\"google.golang.org/grpc\", VCS:\"git\", RepoRoot:\"https://github.com/grpc/grpc-go\"} at https://google.golang.org/grpc?go-get=1\n    google.golang.org/grpc (download)\n    Fetching https://golang.org/x/text/secure/bidirule?go-get=1\n    Parsing meta tags from https://golang.org/x/text/secure/bidirule?go-get=1 (status code 200)\n    get \"golang.org/x/text/secure/bidirule\": found meta tag main.metaImport{Prefix:\"golang.org/x/text\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/text\"} at https://golang.org/x/text/secure/bidirule?go-get=1\n    get \"golang.org/x/text/secure/bidirule\": verifying non-authoritative meta tag\n    Fetching https://golang.org/x/text?go-get=1\n    Parsing meta tags from https://golang.org/x/text?go-get=1 (status code 200)\n    golang.org/x/text (download)\n    Fetching https://golang.org/x/text/unicode/bidi?go-get=1\n    Parsing meta tags from https://golang.org/x/text/unicode/bidi?go-get=1 (status code 200)\n    get \"golang.org/x/text/unicode/bidi\": found meta tag main.metaImport{Prefix:\"golang.org/x/text\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/text\"} at https://golang.org/x/text/unicode/bidi?go-get=1\n    get \"golang.org/x/text/unicode/bidi\": verifying non-authoritative meta tag\n    Fetching https://golang.org/x/text/unicode/norm?go-get=1\n    Parsing meta tags from https://golang.org/x/text/unicode/norm?go-get=1 (status code 200)\n    get \"golang.org/x/text/unicode/norm\": found meta tag main.metaImport{Prefix:\"golang.org/x/text\", VCS:\"git\", RepoRoot:\"https://go.googlesource.com/text\"} at https://golang.org/x/text/unicode/norm?go-get=1\n    get \"golang.org/x/text/unicode/norm\": verifying non-authoritative meta tag\n    github.com/golang/protobuf (download)\n    Fetching https://google.golang.org/genproto/googleapis/rpc/status?go-get=1\n    Parsing meta tags from https://google.golang.org/genproto/googleapis/rpc/status?go-get=1 (status code 200)\n    get \"google.golang.org/genproto/googleapis/rpc/status\": found meta tag main.metaImport{Prefix:\"google.golang.org/genproto\", VCS:\"git\", RepoRoot:\"https://github.com/google/go-genproto\"} at https://google.golang.org/genproto/googleapis/rpc/status?go-get=1\n    get \"google.golang.org/genproto/googleapis/rpc/status\": verifying non-authoritative meta tag\n    Fetching https://google.golang.org/genproto?go-get=1\n    Parsing meta tags from https://google.golang.org/genproto?go-get=1 (status code 200)\n    google.golang.org/genproto (download)\n    The command '/bin/sh -c go-wrapper download   # \"go get -d -v ./...\"'     returned a non-zero code: 1\n\n</pre>\n"}, {"tags": ["date", "go"], "comments": [{"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526475868, "post_id": 50371350, "comment_id": 87759268, "body": "so basically you want to print the day names (you will need location for this) between two timestamps? sorry i don&#39;t get quite well the problem...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526476161, "post_id": 50371350, "comment_id": 87759487, "body": "@victor Actually in this there is a start_date and end_date and i have to print the day data according to the condititon see in my code condition is  on Monday soo i want to see the record between start_date and end_date of only  for monday if i select tuesday then the record is for tuesday only. Understand?"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526477580, "post_id": 50371350, "comment_id": 87760543, "body": "so you have three parameters: start, end, and a day of week. So you process for each week day that is in between the begins and ends? You are asking how you could get &quot;those&quot; days?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526477721, "post_id": 50371350, "comment_id": 87760655, "body": "I just want to print thay days with there dates which is in conditions @victor see in condition i types there monday then i Want to retrieve the data of monday only if tuesday then retrieve the data of tuesday"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526478156, "post_id": 50371350, "comment_id": 87760958, "body": "ok... now we are getting to something concrete... you want to print days of the week between two dates that satisfies a given predicadate? For example if the predicate is &quot;monday&quot; you inly print mondays.. if the predicate is &quot;friday&quot; then print only fridays?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526478567, "post_id": 50371350, "comment_id": 87761285, "body": "Yeah @victor nbw you got what i want can you help me?"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526478982, "post_id": 50371350, "comment_id": 87761644, "body": "Sure thing stack... that is the purpose of this place.. to help others and by the way improve yourself by helping others..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "reply_to_user": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526479172, "post_id": 50371350, "comment_id": 87761825, "body": "@victor can you write something for me that can help me to solve this problem i stucked here from three days but there is no success :("}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "edited": false, "score": 0, "creation_date": 1526479858, "post_id": 50373091, "comment_id": 87762388, "body": "I appriciate your answer but now I fedup to do this again again and agian from three days."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526480005, "post_id": 50373091, "comment_id": 87762522, "body": "sorry, i will try to improve a little bit the comments... meanwhile try to bear with me..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "edited": false, "score": 1, "creation_date": 1526480073, "post_id": 50373091, "comment_id": 87762582, "body": "Its okay I think i need rest"}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "edited": false, "score": 0, "creation_date": 1526565675, "post_id": 50373091, "comment_id": 87802541, "body": "@stack i&#39;m glad for you then! don&#39;t forget to mark this as correct answer if you think that resolves your question"}], "tags": [], "owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "is_accepted": false, "score": 1, "last_activity_date": 1526485122, "last_edit_date": 1526485122, "creation_date": 1526479530, "answer_id": 50373091, "question_id": 50371350, "link": "https://stackoverflow.com/questions/50371350/how-to-print-the-specific-date-between-two-dates-using-golang/50373091#50373091", "title": "How to print the specific date between two dates using golang?", "body": "<p>I can leave you some hints about how you can archieve the goal of : </p>\n\n<blockquote>\n  <p>get the days of the week between two dates that satisfies a given\n  predicadate?</p>\n</blockquote>\n\n<p>Follow this code snippet, hope it can give some clues about how to archieve the desired goal.</p>\n\n<p>This is more straight ahead:\n<a href=\"https://play.golang.org/p/-zQYNWtgHZ2\" rel=\"nofollow noreferrer\">https://play.golang.org/p/-zQYNWtgHZ2</a></p>\n\n<p>This has a little more design decisions:\n<a href=\"https://play.golang.org/p/qHlsCoQkSiQ\" rel=\"nofollow noreferrer\">https://play.golang.org/p/qHlsCoQkSiQ</a></p>\n\n<ul>\n<li>Please do notice that you should implement you day of week\nfiltering/selection like the <strong>func</strong> <code>admitAllWeekDays</code>. </li>\n<li>Also notice that the day of week has its implementation based on as an integer.</li>\n</ul>\n\n<p>Leaving the answer aside, Slack, what you need is to organize a little bit your code.. i see that you are struggling a little more that the problem itself that you present as the question.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9684058"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526485122, "creation_date": 1526474752, "question_id": 50371350, "link": "https://stackoverflow.com/questions/50371350/how-to-print-the-specific-date-between-two-dates-using-golang", "title": "How to print the specific date between two dates using golang?", "body": "<p>I'm retrieving the <code>start_date</code> and <code>end_date</code>  from the db. Through <code>for</code> loop I will print the dates between like (Monday, Tuesday,... Soo on). I have also a same situation I print the dates between two dates but I want if I'm retrieving the data of Monday then it will show me the coming Mondays not all days. If I'm retrieving the data of the Tuesday then it only show me the Tuesday dates I have tried a code but it will print all days how will I get the expected output</p>\n\n<p>code:-</p>\n\n<pre><code>func GetSchedule(c *gin.Context) {\nresponse := ResponseControllerList{}\nselected_day:= \"Monday\"\nconditions := bson.M{\"day\":selected_day}\ndata, err := models.GetSchedulingListing(conditions) \nfor i := range data {\n    start_date := data[i].StartDate\n    end_date := data[i].EndDate\n    start_time := data[i].StartTime\n    end_time := data[i].EndTime\n    start_working_hours := time.Unix(start_time,0).Format(\"3:04PM\")\n    end_working_hours := time.Unix(end_time,0).Format(\"3:04PM\")\n    days := time.Unix(end_date,0).Sub(time.Unix(start_date,0)).Hours() / 24\n    for i := 1; i &lt;= int(days+1); i++ {\n        // fmt.Println(i)\n        // fmt.Println(start_date)\n        fmt.Println(time.Unix(start_date,0).Format(\"Monday, 01-02-2006\")+\" \"+ start_working_hours+\" \"+ end_working_hours)\n        start_date = start_date + 86400\n    }\n}\ndataCount, err := models.GetRecordsCount(config.ScheduleCollection, conditions)\nif err != nil {\n    response = ResponseControllerList{\n        config.FailureCode,\n        config.FailureFlag,\n        config.FailureMsg,\n        nil,\n        nil,\n    }\n} else {\n    response = ResponseControllerList{\n        config.SuccessFlag,\n        config.SuccessFlag,\n        config.SuccessMsg,\n        data[0],\n        dataCount,\n    }\n}\nGetResponseList(c, response)\n}\n</code></pre>\n\n<p>See in condition I pass Monday but it return all days in output:-</p>\n\n<p>Output-</p>\n\n<pre><code>Tuesday, 05-01-2018 8:00AM 10:00AM\nWednesday, 05-02-2018 8:00AM 10:00AM\nThursday, 05-03-2018 8:00AM 10:00AM\nFriday, 05-04-2018 8:00AM 10:00AM\nSaturday, 05-05-2018 8:00AM 10:00AM\nSunday, 05-06-2018 8:00AM 10:00AM\n..Soo on up to end date \n</code></pre>\n\n<p>Expected output If I give condition That only Monday then:-</p>\n\n<pre><code>Monday, 05-07-2018 8:00AM 10:00AM\n...Next Monday date\n</code></pre>\n\n<p>If I give in condition Tuesday then</p>\n\n<pre><code>Tuesday, 05-01-2018 8:00AM 10:00AM\n... next Tuesday date\n</code></pre>\n\n<p>Database </p>\n\n<pre><code>{\n\"_id\" : 1,\n\"day\" : \"Monday\",\n\"start_date\" : NumberLong(1525132800),\n\"end_date\" : NumberLong(1527638400),\n\"start_time\" : NumberLong(9000),\n\"end_time\" : NumberLong(16200),\n\"added_on\" : NumberLong(1526442426),\n\"occurence\" : \"repeat\",\n\"updated_on\" : NumberLong(0)\n}\n{\n\"_id\" : 2,\n\"day\" : \"Monday\",\n\"start_date\" : NumberLong(1525132800),\n\"end_date\" : NumberLong(1527638400),\n\"start_time\" : NumberLong(27000),\n\"end_time\" : NumberLong(34200),\n\"added_on\" : NumberLong(1526442426),\n\"occurence\" : \"repeat\",\n\"updated_on\" : NumberLong(0)\n}\n{\n \"_id\" : 3,\n \"day\" : \"Tuesday\",\n \"start_date\" : NumberLong(1525132800),\n \"end_date\" : NumberLong(1527638400),\n \"start_time\" : NumberLong(27000),\n \"end_time\" : NumberLong(34200),\n \"added_on\" : NumberLong(1526442426),\n \"occurence\" : \"repeat\",\n \"updated_on\" : NumberLong(0)\n}\n</code></pre>\n"}, {"tags": ["sql", "rest", "go"], "comments": [{"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 3, "creation_date": 1526474587, "post_id": 50371235, "comment_id": 87758311, "body": "<a href=\"https://golang.org/pkg/net/http/#Request.Form\" rel=\"nofollow noreferrer\">golang.org/pkg/net/http/#Request.Form</a> specifically this part <i>&quot;This field is only available after ParseForm is called.&quot;</i> and btw <code>FormValue</code> should call <code>ParseForm</code> if it hasn&#39;t yet been."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 2, "creation_date": 1526474703, "post_id": 50371235, "comment_id": 87758394, "body": "Secondly, and more importantly Form does not contain json data. Form, after parsing, will hold data sent as <code>application&#47;x-www-form-urlencoded</code> + data sent as query parameters, if no such data was sent then Form will be empty even after parse."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 2, "creation_date": 1526474769, "post_id": 50371235, "comment_id": 87758433, "body": "See here on how to get the json from a request <a href=\"https://stackoverflow.com/a/15685432/965900\">stackoverflow.com/a/15685432/965900</a>"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 5, "creation_date": 1526475012, "post_id": 50371235, "comment_id": 87758602, "body": "Not related to your question, but you&#39;re opening yourself up to a huge SQL injection attack this way. PLEASE use placeholders in your SQL queries instead of building a query with string concatenation."}, {"owner": {"reputation": 3344, "user_id": 903998, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pZCd4.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/903998/victor"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526475024, "post_id": 50371235, "comment_id": 87758609, "body": "As @mkopriva states you require a call to <code>r.ParseForm ()</code> in order to populate data structures with actual values. From other side it would be good to see the client code in order to verify that your are sending properly the url params or body content"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1526475525, "post_id": 50371235, "comment_id": 87758997, "body": "Posting a JSON document is not how HTML forms work."}], "answers": [{"comments": [{"owner": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526476163, "post_id": 50371474, "comment_id": 87759489, "body": "thank you for the fast answer, I understand what you are trying to tell me but how can I access the body?"}, {"owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "reply_to_user": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526476729, "post_id": 50371474, "comment_id": 87759899, "body": "@JohannesGnadlinger You can use <code>req.Body</code> where <code>req is req *http.Request</code>."}, {"owner": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526476901, "post_id": 50371474, "comment_id": 87760023, "body": "yeah I already thought this would be the solution but I need a byte[] to unmarhal and not an io.ReadCloser"}, {"owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "reply_to_user": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526476941, "post_id": 50371474, "comment_id": 87760059, "body": "@JohannesGnadlinger Also you have to do: <code>body, err := ioutil.ReadAll(req.Body)</code>"}, {"owner": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526477296, "post_id": 50371474, "comment_id": 87760332, "body": "awesome thank you for your help now it finally works i am new to this language and you really helped me here :)"}, {"owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "reply_to_user": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526477668, "post_id": 50371474, "comment_id": 87760622, "body": "@JohannesGnadlinger Happy to help!)"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "reply_to_user": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "edited": false, "score": 0, "creation_date": 1526478154, "post_id": 50371474, "comment_id": 87760954, "body": "@JohannesGnadlinger just FYI you don&#39;t need <code>[]byte</code> to unmarshal the request&#39;s body, you can use a <code>json.Decoder</code>, passing the body to its constructor func and then calling <code>Decode</code>. This is, AFAICT, the preferred method to unmarshal json requests."}, {"owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526478610, "post_id": 50371474, "comment_id": 87761330, "body": "Yes, as another option it&#39;s possible to use: <code>json.NewDecoder(req.Body).Decode(&amp;rb)</code>. Thank you @mkopriva !"}], "tags": [], "owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "is_accepted": true, "score": 3, "last_activity_date": 1526477051, "last_edit_date": 1526477051, "creation_date": 1526475114, "answer_id": 50371474, "question_id": 50371235, "link": "https://stackoverflow.com/questions/50371235/formvalue-is-always-an-empty-map/50371474#50371474", "title": "FormValue is always an empty map", "body": "<p>In case of JSON request you have to <code>unmarshal</code> request body before using \nany parameter. <br>For example:</p>\n\n<pre><code>type ReqBody struct {\n  CustomerDateTime string `json:\"CustomerDateTime\"`\n  CustomerDateTime string `json:\"CustomerDateTime\"`\n  UserId           int    `json:\"UserId\"`\n}\n\nbody, err := ioutil.ReadAll(req.Body)\nif err != nil {\n    // Error handler...\n}\nrb := ReqBody{}\njson.Unmarshal(body, &amp;rb)\n// Now you can perform something like this:\nprintln(rb.UserId)\n</code></pre>\n"}], "owner": {"reputation": 951, "user_id": 6504152, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-QGM0TRKgJxg/AAAAAAAAAAI/AAAAAAAAABw/-jeI8itRwUY/photo.jpg?sz=128", "display_name": "Johannes Gnadlinger", "link": "https://stackoverflow.com/users/6504152/johannes-gnadlinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 50371474, "answer_count": 1, "score": -2, "last_activity_date": 1526477051, "creation_date": 1526474400, "question_id": 50371235, "link": "https://stackoverflow.com/questions/50371235/formvalue-is-always-an-empty-map", "title": "FormValue is always an empty map", "body": "<p>I programmed multiple methods for my handler which look like this for example:</p>\n\n<pre><code>func DeleteProduct(w http.ResponseWriter, r *http.Request){\n    log.Println(r.Form)\n    db.Exec(\"Delete from  products where Id = \"+r.FormValue(\"Id\"))\n}\n</code></pre>\n\n<p>The problem is that r.Form is always an empty map, in my delete request I send the Id in a JSON which looks like this:</p>\n\n<pre><code>    {\n        \"CustomerDate\": \"13.03.2018\",\n        \"CustomerDateTime\": \"13:30\",\n        \"UserId\": 4\n    }\n</code></pre>\n\n<p>in the main method I register the handler methods like this:</p>\n\n<pre><code>        router.HandleFunc(\"/delete\",handler.DeleteProduct).Methods(\"DELETE\")\n</code></pre>\n\n<p>Why is the r.Form and the r.PostForm always an empty map?</p>\n"}, {"tags": ["pdf", "go"], "comments": [{"owner": {"reputation": 70840, "user_id": 1622493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7S0d.jpg?s=128&g=1", "display_name": "Bruno Lowagie", "link": "https://stackoverflow.com/users/1622493/bruno-lowagie"}, "edited": false, "score": 1, "creation_date": 1526472720, "post_id": 50370309, "comment_id": 87757075, "body": "Why is this tagged as an iText question? I don&#39;t see any mention of iText. Note that there was a flaw in ISO 32000-1: it wasn&#39;t possible to define an encoding when posting content through an AcroForm field. As a member of the ISO committee for PDF, I fixed this in ISO 32000-2 (aka PDF 2.0), but there are very few tools that already support PDF 2.0. This question is probably a duplicate of <a href=\"https://stackoverflow.com/questions/12604171\">stackoverflow.com/questions/12604171</a>"}, {"owner": {"reputation": 1, "user_id": 9781236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc48887975f61579f33347ae5f4ed04a?s=128&d=identicon&r=PG&f=1", "display_name": "Avadhut pisal", "link": "https://stackoverflow.com/users/9781236/avadhut-pisal"}, "reply_to_user": {"reputation": 70840, "user_id": 1622493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7S0d.jpg?s=128&g=1", "display_name": "Bruno Lowagie", "link": "https://stackoverflow.com/users/1622493/bruno-lowagie"}, "edited": false, "score": 0, "creation_date": 1526548915, "post_id": 50370309, "comment_id": 87791181, "body": "which version of adobe acrobat pro supports PDF 2.0 ?"}, {"owner": {"reputation": 70840, "user_id": 1622493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7S0d.jpg?s=128&g=1", "display_name": "Bruno Lowagie", "link": "https://stackoverflow.com/users/1622493/bruno-lowagie"}, "edited": false, "score": 0, "creation_date": 1526550490, "post_id": 50370309, "comment_id": 87792249, "body": "That&#39;s a question for Adobe."}], "owner": {"reputation": 1, "user_id": 9781236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc48887975f61579f33347ae5f4ed04a?s=128&d=identicon&r=PG&f=1", "display_name": "Avadhut pisal", "link": "https://stackoverflow.com/users/9781236/avadhut-pisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526530501, "creation_date": 1526471795, "last_edit_date": 1526530501, "question_id": 50370309, "link": "https://stackoverflow.com/questions/50370309/pdf-does-not-post-marathi-data-properly-to-server", "title": "PDF does not post Marathi data properly to server", "body": "<p>I have writable PDF file. There is submit button on PDF. But after submitting data marathi language data is not getting sent properly to  the server. I'm using golang server. Some dot dot characters are getting posted on server. I'm recieving this data in form-value format on server. Please help me out to get the solution.</p>\n\n<pre><code>txtRequesterName := c.FormValue(\"txtRequesterName\")\n</code></pre>\n\n<p>output=> </p>\n\n<pre><code>// .... indicates marathi text which is not rendered\nRequester Name:  ... .... .......... Important .....\n</code></pre>\n"}, {"tags": ["arrays", "go", "arguments", "slice", "gob"], "answers": [{"comments": [{"owner": {"reputation": 2382, "user_id": 1052899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8orf.jpg?s=128&g=1", "display_name": "Fabiano Tarlao", "link": "https://stackoverflow.com/users/1052899/fabiano-tarlao"}, "edited": false, "score": 0, "creation_date": 1526471987, "post_id": 50370340, "comment_id": 87756514, "body": "thank you, I am already using slices with success.. I was looking for another way to make the job done. It looks there is not.. I wait for other responses and in case I&#39;ll light up yours. Regards"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 2382, "user_id": 1052899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8orf.jpg?s=128&g=1", "display_name": "Fabiano Tarlao", "link": "https://stackoverflow.com/users/1052899/fabiano-tarlao"}, "edited": false, "score": 1, "creation_date": 1526472094, "post_id": 50370340, "comment_id": 87756596, "body": "@FabianoTarlao Note that you may continue to use arrays, and only slice them when you need to pass them to this function. See edited answer."}, {"owner": {"reputation": 2382, "user_id": 1052899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8orf.jpg?s=128&g=1", "display_name": "Fabiano Tarlao", "link": "https://stackoverflow.com/users/1052899/fabiano-tarlao"}, "edited": false, "score": 0, "creation_date": 1526472268, "post_id": 50370340, "comment_id": 87756737, "body": "this may be an interesting perspective, I&#39;l think about it ... thank you again, for your time"}, {"owner": {"reputation": 2354, "user_id": 4956586, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/00cd663b9a24e12ea7a95d6d7eeb8989?s=128&d=identicon&r=PG&f=1", "display_name": "JakeTheSnake", "link": "https://stackoverflow.com/users/4956586/jakethesnake"}, "edited": false, "score": 0, "creation_date": 1537724256, "post_id": 50370340, "comment_id": 91879111, "body": "Hoped this would be possible.. Slices are passed by reference, and I want pass by value like with arrays. Now it feels like Java where it is a hassle to clone or getting rid of references."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 10, "last_activity_date": 1526472054, "last_edit_date": 1526472054, "creation_date": 1526471898, "answer_id": 50370340, "question_id": 50370292, "link": "https://stackoverflow.com/questions/50370292/function-which-accepts-array-of-arbitrary-size-as-argument-is-it-possible-in-go/50370340#50370340", "title": "Function which accepts array of arbitrary size as argument (is it possible in Golang?)", "body": "<p>There is not. Go does not support generics.</p>\n\n<p>The only way would be to use <code>interface{}</code>, but that would allow to pass a value of any type, not just arrays of your desired type.</p>\n\n<p>Arrays in Go are \"secondary\". The solution is to use slices for your requirement.</p>\n\n<p>One thing to note here is that you may continue to use arrays, and only slice them when you want to pass them to this function, e.g.:</p>\n\n<pre><code>func main() {\n    a1 := [1]int{1}\n    demo(a1[:])\n\n    a2 := [2]int{1, 2}\n    demo(a2[:])\n}\n\nfunc demo(s []int) {\n    fmt.Println(\"Passed:\", s)\n}\n</code></pre>\n\n<p>Output of the above (try it on the <a href=\"https://play.golang.org/p/lpm2V2WLYcz\" rel=\"noreferrer\">Go Playground</a>):</p>\n\n<pre><code>Passed: [1]\nPassed: [1 2]\n</code></pre>\n"}], "owner": {"reputation": 2382, "user_id": 1052899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8orf.jpg?s=128&g=1", "display_name": "Fabiano Tarlao", "link": "https://stackoverflow.com/users/1052899/fabiano-tarlao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 1, "accepted_answer_id": 50370340, "answer_count": 1, "score": 6, "last_activity_date": 1535356179, "creation_date": 1526471742, "last_edit_date": 1535356179, "question_id": 50370292, "link": "https://stackoverflow.com/questions/50370292/function-which-accepts-array-of-arbitrary-size-as-argument-is-it-possible-in-go", "title": "Function which accepts array of arbitrary size as argument (is it possible in Golang?)", "body": "<p><strong>Q: Is there a way, in golang, to define a function which accepts an array of arbitrary length as argument?</strong></p>\n\n<p>e.g., </p>\n\n<pre><code>function demoArrayMagic(arr [magic]int){\n....\n}\n</code></pre>\n\n<p>I have understood that in golang, array length is part of the variable type, for this reason the following function is not going to accept one arbitrary array as input</p>\n\n<pre><code>function demoArray(arr [2]int){\n....\n}\n</code></pre>\n\n<p>This function is not going to compile with <code>arrInput [6]int</code> as input--i.e., <code>demoArray(arrInput)</code> will fail to compile. </p>\n\n<p>Also the following function, which accepts a slice argument, does not accept arrays as arguments (different types, as expected):</p>\n\n<pre><code>function demoSlice(arr []int){\n....\n}\n</code></pre>\n\n<p>i.e., <code>demoSlice(arrInput)</code> does not compile, expects a slice not an array.</p>\n\n<p>The question is, is there a way to define a function that takes arrays of arbitrary length (arrays, NOT slice)? It looks quite strange and limiting for a language to impose this constraint.</p>\n\n<p>The question makes sense independently from the motivation, but, in my case, the reason behind is the following. I have a set of functions which takes as arguments data structures of type <code>[][]int</code>. \nI noticed that GOB serialization for them is 10x slower (MB/s) than other data structures I have. I suppose that may be related to the chain of derefencing operations in slices. Moving from slices to array--i.e.,defining objects of type <code>[10000][128]int</code>--may improve situation (I hope). </p>\n\n<p>Regards</p>\n\n<p><strong>P.s:</strong> I remind now that Go, passes/uses things 'by value', using arrays may be overkill cause golang is going to copy them lot of times. I think <strong>I'll stay with slices</strong> and I'll try to understand GOB internals a bit.</p>\n"}, {"tags": ["select", "go", "time"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 2, "creation_date": 1526476400, "post_id": 50369971, "comment_id": 87759659, "body": "What would you expect to happen when you try to receive from something that isn&#39;t a channel?"}], "answers": [{"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": true, "score": 2, "last_activity_date": 1526472792, "last_edit_date": 1526472792, "creation_date": 1526471642, "answer_id": 50370253, "question_id": 50369971, "link": "https://stackoverflow.com/questions/50369971/receive-from-non-chan-type-time-duration/50370253#50370253", "title": "receive from non-chan type time.Duration", "body": "<p><code>&lt;-</code> is for receiving from a Channel, for this neither <code>time.Until</code> or <code>Truncate</code> returns a channel.</p>\n\n<p>In this case the error message is identifying the issue, but doesn't really tell what actually to do differently.</p>\n\n<p>go DOES provide some time methods that do return channels. One of which is <a href=\"https://golang.org/pkg/time/#After\" rel=\"nofollow noreferrer\"><code>time.After</code></a></p>\n\n<pre><code>select {\ncase m := &lt;-c:\n        handle(m)\ncase &lt;-time.After(5 * time.Minute):\n        fmt.Println(\"timed out\")\n}\n</code></pre>\n\n<hr>\n\n<p>I would highly recommend go by example and a tour of go.  They do an amazing job introducing channels and <code>for/select</code></p>\n\n<ul>\n<li><a href=\"https://gobyexample.com/channels\" rel=\"nofollow noreferrer\">https://gobyexample.com/channels</a></li>\n<li><a href=\"https://tour.golang.org/concurrency/2\" rel=\"nofollow noreferrer\">https://tour.golang.org/concurrency/2</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": false, "score": 1, "last_activity_date": 1526471857, "creation_date": 1526471857, "answer_id": 50370333, "question_id": 50369971, "link": "https://stackoverflow.com/questions/50369971/receive-from-non-chan-type-time-duration/50370333#50370333", "title": "receive from non-chan type time.Duration", "body": "<p>Use <a href=\"https://golang.org/pkg/time/#After\" rel=\"nofollow noreferrer\"><code>time.After</code></a></p>\n\n<pre><code>func LongRunningHandler(ctx context.Context) string {\n        deadline, _ := ctx.Deadline()\n        for {\n                select {\n                case &lt;- time.After(time.Until(deadline).Truncate(100 * time.Millisecond)):\n                        return \"Finished before timing out.\"\n                default:\n                        log.Print(\"hello!\")\n                        time.Sleep(50 * time.Millisecond)\n                }\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 50370253, "answer_count": 2, "score": -3, "last_activity_date": 1526472792, "creation_date": 1526470786, "question_id": 50369971, "link": "https://stackoverflow.com/questions/50369971/receive-from-non-chan-type-time-duration", "title": "receive from non-chan type time.Duration", "body": "<p>In <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/go-programming-model-context.html\" rel=\"nofollow noreferrer\">this tutorial</a> is following example provided:</p>\n\n<pre><code>func LongRunningHandler(ctx context.Context) string {\n        deadline, _ := ctx.Deadline()\n        for {\n                select {\n                case &lt;- time.Until(deadline).Truncate(100 * time.Millisecond):\n                        return \"Finished before timing out.\"\n                default:\n                        log.Print(\"hello!\")\n                        time.Sleep(50 * time.Millisecond)\n                }\n        }\n}\n</code></pre>\n\n<p>When I compile this code I get following error: <code>invalid operation: &lt;-time.Until(deadline).Truncate(100 * time.Millisecond) (receive from non-chan type time.Duration)</code> </p>\n\n<p>What is wrong with the code from the example?</p>\n"}, {"tags": ["docker", "go", "dockerfile"], "comments": [{"owner": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "edited": false, "score": 0, "creation_date": 1526483923, "post_id": 50369198, "comment_id": 87765409, "body": "What do you mean by &quot;dependencies&quot;? I don&#39;t see why you&#39;d want to add code dependencies if your bin is already compiled, so what else?"}, {"owner": {"reputation": 117, "user_id": 8995950, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KYGl85KDGgo/AAAAAAAAAAI/AAAAAAAAAdM/Ah8TrIWtMhg/photo.jpg?sz=128", "display_name": "Daniel Alderman", "link": "https://stackoverflow.com/users/8995950/daniel-alderman"}, "reply_to_user": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "edited": false, "score": 0, "creation_date": 1526551701, "post_id": 50369198, "comment_id": 87793049, "body": "The compiled binary is dependent on code from the backend directory, see the edit above"}, {"owner": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "edited": false, "score": 0, "creation_date": 1526552831, "post_id": 50369198, "comment_id": 87793716, "body": "the errors in main, do they appear at compile or runtime?"}, {"owner": {"reputation": 117, "user_id": 8995950, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KYGl85KDGgo/AAAAAAAAAAI/AAAAAAAAAdM/Ah8TrIWtMhg/photo.jpg?sz=128", "display_name": "Daniel Alderman", "link": "https://stackoverflow.com/users/8995950/daniel-alderman"}, "reply_to_user": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "edited": false, "score": 0, "creation_date": 1526552980, "post_id": 50369198, "comment_id": 87793819, "body": "These errors appear when the code is compiled within the container. No errors when compiled or at runtime locally."}, {"owner": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "edited": false, "score": 0, "creation_date": 1526553798, "post_id": 50369198, "comment_id": 87794316, "body": "Looks like the binary is not being statically linked properly... try adding <code>-ldflags &quot;-linkmode external -extldflags -static&quot;</code>"}, {"owner": {"reputation": 410, "user_id": 3507595, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fb72c78c89a75492d8ecd1c8cc46cb13?s=128&d=identicon&r=PG&f=1", "display_name": "Yoker", "link": "https://stackoverflow.com/users/3507595/yoker"}, "edited": false, "score": 0, "creation_date": 1564084023, "post_id": 50369198, "comment_id": 100924806, "body": "Does the build environment get trashed?"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 9803273, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nikita Sokolov", "link": "https://stackoverflow.com/users/9803273/nikita-sokolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1526563434, "last_edit_date": 1526563434, "creation_date": 1526525663, "answer_id": 50382687, "question_id": 50369198, "link": "https://stackoverflow.com/questions/50369198/how-to-add-local-dependencies-in-go-docker-multi-stage-build/50382687#50382687", "title": "How to add local dependencies in Go Docker multi-stage build?", "body": "<p>In Dockerfile this command is used to compile your code:</p>\n\n<p><code>RUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .</code></p>\n\n<p>This will make your binary <a href=\"https://en.wikipedia.org/wiki/Static_library\" rel=\"nofollow noreferrer\">static</a>, allowing you to perform second step of your build, since you can now start with tiny image (alpine in your case, but you can even try using <a href=\"https://hub.docker.com/_/scratch/\" rel=\"nofollow noreferrer\">empty image</a>) without relying on any dependency inside your container.</p>\n\n<p>In your example, you're adding ca-certificates to the final image:</p>\n\n<p><code>RUN apk --no-cache add ca-certificates</code></p>\n\n<p>You may need this in case you're making HTTPS requests in your application, since alpine container doesn't have any certificates inside its file system. In general, any static assets required for your application (e.g. images, html/email templates, scripts etc.) must be added to resulting image via COPY or ADD command.</p>\n\n<p>Also please have a look at <a href=\"https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/\" rel=\"nofollow noreferrer\">this outstanding guide</a> on how to build minimal docker containers.</p>\n\n<p><strong>Edit:</strong> Your problem with the build happens because <code>cron_job</code> can't locate packages from <code>backend</code>, since you don't copy <code>backend</code> to the container in the correct $GOPATH folder. To solve this problem, you need to vendor your dependencies using dependency manager tool. The current official one is <a href=\"https://github.com/golang/dep\" rel=\"nofollow noreferrer\">dep</a>.</p>\n\n<p>Restoring dependencies for <code>cron_job</code> (locally on your machine, <em>NOT</em> inside your container) will create <code>vendor</code> subfolder, where every needed dependency for your project will be stored. Now when you copy <code>cron_job</code> to the container, build will also look at <code>vendor</code> folder to check for missing dependencies.</p>\n"}], "owner": {"reputation": 117, "user_id": 8995950, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KYGl85KDGgo/AAAAAAAAAAI/AAAAAAAAAdM/Ah8TrIWtMhg/photo.jpg?sz=128", "display_name": "Daniel Alderman", "link": "https://stackoverflow.com/users/8995950/daniel-alderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1041, "favorite_count": 0, "accepted_answer_id": 50382687, "answer_count": 1, "score": 0, "last_activity_date": 1526563434, "creation_date": 1526468629, "last_edit_date": 1526551643, "question_id": 50369198, "link": "https://stackoverflow.com/questions/50369198/how-to-add-local-dependencies-in-go-docker-multi-stage-build", "title": "How to add local dependencies in Go Docker multi-stage build?", "body": "<p>How can I add local dependencies from a folder within the same Go project?</p>\n\n<p>I have the following directory structure:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 backend\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dockerfile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 conduit\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 get_data.go\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 main.go\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 main_test.go\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 storage\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 create_client.go\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 read_data.go\n\u251c\u2500\u2500 cron_job\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Dockerfile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 main.go\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 main_test.go\n</code></pre>\n\n<p>And Dockerfile:</p>\n\n<pre><code>FROM golang:1.10.1 as builder\nADD . github.com/dalderman77/phacts/backend/conduit\nADD . github.com/dalderman77/phacts/backend/storage\nWORKDIR /go/src/github.com/dalderman77/phacts/cron_job\n# Get dependencies\nRUN go get -d -v cloud.google.com/go/datastore golang.org/x/net/context\nCOPY . .\n# Compile Go binary\nRUN CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .\n\n# Create smaller lightweight container\nFROM alpine:latest  \nRUN apk --no-cache add ca-certificates\nWORKDIR /root/\n# Copy binary from previous stage\nCOPY --from=builder /go/src/github.com/dalderman77/phacts/cron_job/main .\nCMD [\"./main\"]  \n</code></pre>\n\n<p>What I have so far is based on <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds\" rel=\"nofollow noreferrer\">Use multi-stage builds</a></p>\n\n<p>The issue is that compiled binary is dependent on code from the backend directory. It compiles fine locally but I am unsure how to correctly add these dependencies so they can be compiled within the container:</p>\n\n<pre><code>main.go:9:2: cannot find package \"github.com/dalderman77/phacts/backend/conduit\" in any of:\n        /usr/local/go/src/github.com/dalderman77/phacts/backend/conduit (from $GOROOT)\n        /go/src/github.com/dalderman77/phacts/backend/conduit (from $GOPATH)\nmain.go:10:2: cannot find package \"github.com/dalderman77/phacts/backend/storage\" in any of:\n        /usr/local/go/src/github.com/dalderman77/phacts/backend/storage \n</code></pre>\n"}, {"tags": ["mongodb", "go", "mongodb-query", "mgo"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1526468295, "post_id": 50368827, "comment_id": 87754058, "body": "Getting help means being a bit more descriptive than <i>&quot;but is not working.&quot;</i>. Tell us exactly what is not working and what you expect. What you expect is not expressed as &quot;what this SQL does&quot;, but rather by showing results you expect to return from the data you actually have."}, {"owner": {"reputation": 55, "user_id": 9720571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8325675328aec44b7097ce088b0e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/9720571/medo"}, "reply_to_user": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1526468662, "post_id": 50368827, "comment_id": 87754300, "body": "@NeilLunn what the <code>query made in mongodb</code> is giving me all the results i have for all the requests , what i excpect is what i have written as <code>SQL query</code> which i am familiar <code>with so adding the condition of request_id  to be matched with the value </code>"}, {"owner": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 0, "creation_date": 1526470001, "post_id": 50368827, "comment_id": 87755128, "body": "I think all you want to do is add a second stage after the <code>$lookup</code> stage like this: <code>{$match: { &quot;id_request&quot;: ObjectId(&quot;5afc034f53c9a77a598c8345&quot;) }}</code>"}, {"owner": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 0, "creation_date": 1526470155, "post_id": 50368827, "comment_id": 87755224, "body": "...or you might want to flip the <code>$lookup</code> direction like so: <code>db.requests.aggregate([{     $lookup: {         from:&#39;results&#39;,          localField:&quot;_id&quot;,         foreignField:&quot;id_request&quot;,         as:&quot;results&quot;      } }]);</code>"}, {"owner": {"reputation": 55, "user_id": 9720571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8325675328aec44b7097ce088b0e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/9720571/medo"}, "reply_to_user": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 0, "creation_date": 1526470836, "post_id": 50368827, "comment_id": 87755709, "body": "@dnickless i did what you suggested but it is getting me the error i edited the question , may you check please , moreover i added more details , thanks for your time"}, {"owner": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 0, "creation_date": 1526471117, "post_id": 50368827, "comment_id": 87755896, "body": "Why do you use <code>$lookup</code> if all the data you need is in the <code>results</code> collection anyway? You could do a straight <code>db.results.find(&quot;id_request&quot;: ObjectId(&quot;5afc034f53c9a77a598c8345&quot;))</code>"}, {"owner": {"reputation": 55, "user_id": 9720571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8325675328aec44b7097ce088b0e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/9720571/medo"}, "reply_to_user": {"reputation": 9279, "user_id": 6440033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f070f5eb58ce80fa0b975a805e712362?s=128&d=identicon&r=PG&f=1", "display_name": "dnickless", "link": "https://stackoverflow.com/users/6440033/dnickless"}, "edited": false, "score": 0, "creation_date": 1526473616, "post_id": 50368827, "comment_id": 87757701, "body": "@dnickless  i see what you mean but the purpose was to select the fields wanted  between the two collections"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 2464267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e88ff9acd7ef1f0370463a5dba50d19?s=128&d=identicon&r=PG", "display_name": "guillaume26", "link": "https://stackoverflow.com/users/2464267/guillaume26"}, "is_accepted": false, "score": 0, "last_activity_date": 1526476948, "last_edit_date": 1526476948, "creation_date": 1526476635, "answer_id": 50372036, "question_id": 50368827, "link": "https://stackoverflow.com/questions/50368827/making-a-lookup-query-between-two-collection-on-the-objectid-field/50372036#50372036", "title": "Making a $lookup query between two collection on the ObjectId field", "body": "<p>The query in your question has multiple issues which may cause parsing errors. The <code>from</code> property in the lookup stage must be a string. Also, the quote character that you used for the <code>as</code> property (<code>\u201d</code>) is not a valid string delimiter.</p>\n\n<p>Try to replace the <code>from: requests</code> with <code>from: \"requests\"</code> and the <code>\u201d</code> character with a single or double quote.</p>\n\n<pre><code>db.results.aggregate([\n   { $lookup: { from: \"requests\", localField: \"id_request\", foreignField: \"_id\", as: \"results\" } },\n   { $match: { \"id_request\": ObjectId(\"5afc034f53c9a77a598c8345\") } } \n]);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 9720571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8325675328aec44b7097ce088b0e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/9720571/medo"}, "edited": false, "score": 0, "creation_date": 1526484090, "post_id": 50373060, "comment_id": 87765529, "body": "here i have the <code>request_id</code> from the result collection`  and the <code>_id</code> from <code>the request collection </code>, for the iteration <code>theCollection</code> should be the request or the result , i tried both but i just get a blank result ,"}], "tags": [], "owner": {"reputation": 75, "user_id": 1638680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3daa6d9e1fd176087a06f2bac4475895?s=128&d=identicon&r=PG", "display_name": "dgm", "link": "https://stackoverflow.com/users/1638680/dgm"}, "is_accepted": false, "score": 0, "last_activity_date": 1526479461, "creation_date": 1526479461, "answer_id": 50373060, "question_id": 50368827, "link": "https://stackoverflow.com/questions/50368827/making-a-lookup-query-between-two-collection-on-the-objectid-field/50373060#50373060", "title": "Making a $lookup query between two collection on the ObjectId field", "body": "<p>If you add two extra steps to your pipeline, $unwind and $project, you should get the results you want. I would also do the $match before the $lookup, you might as well only lookup the data you need.</p>\n\n<p>I am also a fan of making your pipeline query easy to read by defining separate queries and combining them in the pipeline call. You asked this question as a Go question, so a Go way of doing it is:</p>\n\n<pre><code>match := bson.M{\"$match\": bson.M{\"id_request\": bson.ObjectIdHex(\"5afc034f53c9a77a598c8345\")}}\nlookup := bson.M{\"$lookup\": bson.M{\"from\": \"requests\", \"localField\": \"id_request\", \"foreignField\": \"_id\", \"as\": \"results\"}}\nunwind := bson.M{\"$unwind\": \"$results\"}\nproject := bson.M{\"$project\": bson.M{\"_id\": 0, \"name\": 1, \"job\": 1, \"age\": 1, \"city\": 1}}\n\niter := theCollection.Pipe([]bson.M{match, lookup, unwind, project}).Iter()\nanswer := bson.M{}\nfor iter.Next(&amp;answer) {\n    fmt.Println(answer)\n}\niter.Close()\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9720571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8325675328aec44b7097ce088b0e5e?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/9720571/medo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526479461, "creation_date": 1526467534, "last_edit_date": 1526470483, "question_id": 50368827, "link": "https://stackoverflow.com/questions/50368827/making-a-lookup-query-between-two-collection-on-the-objectid-field", "title": "Making a $lookup query between two collection on the ObjectId field", "body": "<p>I'am working on an api in <code>Go 1.9.2</code> with <code>mongoDB 3.4</code> I am using <code>mgo</code> as a driver.</p>\n\n<p>I have to do an endpoint for getting the results of the requests, after inserting the request and its results in the same database with two collections.</p>\n\n<p>Having two collections:</p>\n\n<p>First  Collection  : <code>requests</code></p>\n\n<p>Second Collection  : <code>results</code></p>\n\n<p>The <code>requests</code> collection has the format </p>\n\n<pre><code>{ \"_id\":ObjectId(\"5afc034f53c9a77a598c8345\")\n  \"  time \":\"2018-05-16 10:08:35.024352907 +0000 UTC m=+23.407317980\"\n  \"param_request\":[name:\"mike\",age:\"30\",job:\"Doctor\"]\n}\n</code></pre>\n\n<p>The <code>results</code> collection has the format the <code>id_request</code> field is the <code>_id</code> field for the request document (as the foreign key philosophy in SQL)</p>\n\n<pre><code>{\"_id\":ObjectId(\"5afc035b53c9a77a598c8346\")\n \"id_request\":ObjectId(\"5afc034f53c9a77a598c8345\")\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"Tokyo\"} \n\n{\"_id\":ObjectId(\"5afc035b53c9a77a598c8347\")\n \"id_request\":ObjectId(\"5afc034f53c9a77a598c8345\")\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"London\"}\n\n\n {\"_id\":ObjectId(\"5afc035b53c9a77a598c8349\")\n \"id_request\":ObjectId(\"5afc034f53c9a77a598c8345\")\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"Berlin\"\n } \n</code></pre>\n\n<p>I tried to query and I found the lookup from the documentation <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/#pipe._S_lookup\" rel=\"nofollow noreferrer\">$lookup Documentation</a></p>\n\n<p>the result wanted :</p>\n\n<pre><code> {\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"Berlin\"\n\n }\n\n {\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"London\"\n\n }\n\n {\n \"name\":\"Mike\"\n \"age\":\"30\"\n \"job\":\"Doctor\"\n \"city\":\"Tokyo\"\n\n}\n</code></pre>\n\n<p>Here is what I did:</p>\n\n<pre><code> db.results.aggregate([\n\n  {$lookup: {from:requests, localField: \"id_request\",foreignField:\"_id\",as:\u201dresults\u201d}},\n  {$match:\n         { \n      \"id_request\": ObjectId(\"5afc034f53c9a77a598c8345\") }}]);\n</code></pre>\n\n<p>here is the error getting :</p>\n\n<p><code>2018-05-16T11:31:51.261+0000 E QUERY    [thread1] SyntaxError: missing } after property list @(shell):1:131</code></p>\n\n<p>Here is what I have to get with the SQL philosophy as a query:</p>\n\n<pre><code>  select results .* from results join requests on \n\n  (results.request_id=requests._id \n\n               and \n\n    request_id='ObjectId(\"5afc034f53c9a77a598c8345\")');\n</code></pre>\n"}, {"tags": ["go", "geospatial", "beego"], "comments": [{"owner": {"reputation": 1293, "user_id": 6041157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hedjS.jpg?s=128&g=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/6041157/pramod"}, "edited": false, "score": 0, "creation_date": 1526464924, "post_id": 50366891, "comment_id": 87751844, "body": "which database you&#39;re using for making geospatial queries?"}, {"owner": {"reputation": 233, "user_id": 4742792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b37e500b42cd1f3455ae18c574fe9b7?s=128&d=identicon&r=PG&f=1", "display_name": "hxdef", "link": "https://stackoverflow.com/users/4742792/hxdef"}, "reply_to_user": {"reputation": 1293, "user_id": 6041157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hedjS.jpg?s=128&g=1", "display_name": "pramod", "link": "https://stackoverflow.com/users/6041157/pramod"}, "edited": false, "score": 0, "creation_date": 1526465749, "post_id": 50366891, "comment_id": 87752375, "body": "@pramod I&#39;m using MySQL, and rewriting existing app using go"}], "owner": {"reputation": 233, "user_id": 4742792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b37e500b42cd1f3455ae18c574fe9b7?s=128&d=identicon&r=PG&f=1", "display_name": "hxdef", "link": "https://stackoverflow.com/users/4742792/hxdef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526463020, "creation_date": 1526462350, "last_edit_date": 1526463020, "question_id": 50366891, "link": "https://stackoverflow.com/questions/50366891/beego-orm-geospatial-support", "title": "beego orm geospatial support", "body": "<p>Does the Beego ORM support geospatial functions? I want to implement database queries with <code>\"locations near me\"</code> functionality. </p>\n\n<p>If yes, I would like some guidance and if possible an example.</p>\n"}, {"tags": ["json", "go", "struct", "unmarshalling"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 6, "last_activity_date": 1526474811, "last_edit_date": 1526474811, "creation_date": 1526462548, "answer_id": 50366962, "question_id": 50366846, "link": "https://stackoverflow.com/questions/50366846/empty-fields-while-doing-json-unmarshal/50366962#50366962", "title": "Empty fields while doing json unmarshal", "body": "<p>Your JSON to Go mapping is incorrect. To have automatic matching between struct fields and the JSON properties during the unmarshaling process, the field <em>names</em> (and not the name of their types) must match the properties in JSON (in a case in-sensitive manner):</p>\n\n<pre><code>type FirstName struct {\n    FirstName string\n}\ntype SecondName struct {\n    SurName string\n}\ntype Person struct {\n    Details     FirstName\n    MoreDetails SecondName\n}\n</code></pre>\n\n<p>With this, the output is (try it on the <a href=\"https://play.golang.org/p/tf5qU3mT8Jx\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>{{alan} {Turing}}\n</code></pre>\n\n<p>If you want to keep those names in Go, another option is to provide a <em>mapping</em> between Go struct fields and JSON property names. For this you may use <a href=\"https://golang.org/ref/spec#Struct_types\" rel=\"nofollow noreferrer\">struct tags</a>:</p>\n\n<pre><code>type FirstName struct {\n    Name1 string `json:\"firstName\"`\n}\ntype SecondName struct {\n    Name2 string `json:\"surName\"`\n}\n</code></pre>\n\n<p>Output will be the same. Try this one on the <a href=\"https://play.golang.org/p/nCZ7rBjpBjy\" rel=\"nofollow noreferrer\">Go Playground</a>.</p>\n\n<p>For an introduction and more details about struct tags, see <a href=\"https://stackoverflow.com/questions/10858787/what-are-the-uses-for-tags-in-go/30889373#30889373\">What are the use(s) for tags in Go?</a></p>\n"}], "owner": {"reputation": 847, "user_id": 3172290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MIH9i.jpg?s=128&g=1", "display_name": "aniztar", "link": "https://stackoverflow.com/users/3172290/aniztar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 50366962, "answer_count": 1, "score": 2, "last_activity_date": 1574546491, "creation_date": 1526462199, "last_edit_date": 1574546491, "question_id": 50366846, "link": "https://stackoverflow.com/questions/50366846/empty-fields-while-doing-json-unmarshal", "title": "Empty fields while doing json unmarshal", "body": "<p>I have written this piece of code. I can't figure out why it is giving empty fields when i run it. I have tried Uppercase variables. Still doesn't work. </p>\n\n<pre><code>package main\n\nimport (\n        \"encoding/json\"\n        \"fmt\"\n)\n\ntype FirstName struct {\n        Name1 string\n}\ntype SecondName struct {\n        Name2 string\n}\ntype Person struct {\n        Details     FirstName\n        MoreDetails SecondName\n}\n\nfunc main() {\n        var someGuy Person\n        var data = []byte(`{\"details\": {\"firstName\": \"alan\"}, \"moreDetails\": {\"surName\": \"Turing\"}}`)\n        json.Unmarshal(data, &amp;someGuy)\n        fmt.Println(someGuy)\n}\n</code></pre>\n"}, {"tags": ["arrays", "string", "go", "char", "cgo"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526485429, "post_id": 50366243, "comment_id": 87766407, "body": "It looks correct at first glance, are you having a problem with this code?"}, {"owner": {"reputation": 1, "user_id": 9798842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1e981b1afbeef75c2d3ade3ce2d35f?s=128&d=identicon&r=PG&f=1", "display_name": "LJC", "link": "https://stackoverflow.com/users/9798842/ljc"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526615783, "post_id": 50366243, "comment_id": 87822546, "body": "it works good, but I&#39;m not sure if it&#39;s the right way"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526669359, "post_id": 50366243, "comment_id": 87850759, "body": "It looks OK, but we don&#39;t know what <code>sign</code> is or what it does. There&#39;s no error checking here, and how you do that depends on the api of <code>sign</code>."}, {"owner": {"reputation": 1, "user_id": 9798842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1e981b1afbeef75c2d3ade3ce2d35f?s=128&d=identicon&r=PG&f=1", "display_name": "LJC", "link": "https://stackoverflow.com/users/9798842/ljc"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526781514, "post_id": 50366243, "comment_id": 87876513, "body": "ok Thanks a lot"}], "owner": {"reputation": 1, "user_id": 9798842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d1e981b1afbeef75c2d3ade3ce2d35f?s=128&d=identicon&r=PG&f=1", "display_name": "LJC", "link": "https://stackoverflow.com/users/9798842/ljc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526460785, "creation_date": 1526460381, "last_edit_date": 1526460785, "question_id": 50366243, "link": "https://stackoverflow.com/questions/50366243/how-to-get-the-out-parameter-from-c-function-in-go", "title": "How to get the out parameter from C function in go?", "body": "<p><strong>I have a C function as below:</strong></p>\n\n<p><code>void sign(const char *in, int in_size, char *out, int *out_size);</code></p>\n\n<p><strong>How do I use it in Go?</strong></p>\n\n<p><strong>Am I correct?</strong></p>\n\n<pre><code>data:=\"123456\"\ncData := C.CString(data)\ndefer C.free(unsafe.Pointer(cData))\n\nvar _skcy [30]C.char\nvar outLen C.int\nC.sign(cData, C.int(len(data)), &amp;_skcy[0], &amp;outLen)\n\nskcy := C.GoStringN(&amp;_skcy[0], outLen-1)\n</code></pre>\n"}, {"tags": ["go", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 1309, "user_id": 5055251, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f45f990533303b61a6b335198be63a1b?s=128&d=identicon&r=PG&f=1", "display_name": "kingluo", "link": "https://stackoverflow.com/users/5055251/kingluo"}, "edited": false, "score": 2, "creation_date": 1526880066, "post_id": 50377023, "comment_id": 87898762, "body": "<a href=\"https://github.com/grpc/grpc-go/blob/091a800143380a06a4721749da705ccbf4ae5e7a/server.go#L678\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-go/blob/&hellip;</a>"}, {"owner": {"reputation": 540, "user_id": 979673, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/TYDUf.png?s=128&g=1", "display_name": "Viraths", "link": "https://stackoverflow.com/users/979673/viraths"}, "edited": false, "score": 0, "creation_date": 1562280553, "post_id": 50377023, "comment_id": 100335896, "body": "You are legend. Thanks."}], "tags": [], "owner": {"reputation": 576, "user_id": 7371810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53dfe10f0150e2213e244ef1b93ccde?s=128&d=identicon&r=PG&f=1", "display_name": "menghanl", "link": "https://stackoverflow.com/users/7371810/menghanl"}, "is_accepted": true, "score": 11, "last_activity_date": 1526492355, "creation_date": 1526492355, "answer_id": 50377023, "question_id": 50365652, "link": "https://stackoverflow.com/questions/50365652/does-the-grpc-server-use-one-new-goroutine-to-process-one-method-call/50377023#50377023", "title": "Does the grpc server use one new goroutine to process one method call?", "body": "<p>One goroutine per method call. There's current no goroutine pool for service handlers.</p>\n\n<p>It doesn't depend on net/http2 concurrency model.</p>\n\n<p><a href=\"https://github.com/grpc/grpc-go/blob/master/Documentation/concurrency.md#servers\" rel=\"noreferrer\">https://github.com/grpc/grpc-go/blob/master/Documentation/concurrency.md#servers</a></p>\n"}], "owner": {"reputation": 1309, "user_id": 5055251, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f45f990533303b61a6b335198be63a1b?s=128&d=identicon&r=PG&f=1", "display_name": "kingluo", "link": "https://stackoverflow.com/users/5055251/kingluo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2904, "favorite_count": 1, "accepted_answer_id": 50377023, "answer_count": 1, "score": 11, "last_activity_date": 1526492355, "creation_date": 1526458596, "last_edit_date": 1526459303, "question_id": 50365652, "link": "https://stackoverflow.com/questions/50365652/does-the-grpc-server-use-one-new-goroutine-to-process-one-method-call", "title": "Does the grpc server use one new goroutine to process one method call?", "body": "<p>How does golang grpc implementation handle the server concurrency?</p>\n\n<p>One goroutine per method call? Or sort of goroutine pool?</p>\n\n<p>Does it depend on the concurrency model of net/http2?</p>\n"}, {"tags": ["go", "byte", "marshalling", "unmarshalling"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 3, "creation_date": 1526457054, "post_id": 50365115, "comment_id": 87746505, "body": "The large amount of <code>32</code> in the first output suggests to me that the first array is indented with spaces. The second one isn&#39;t. Why not print as strings instead so that things are a bit more clear?"}, {"owner": {"reputation": 336, "user_id": 8689468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZXP3.jpg?s=128&g=1", "display_name": "Mzia", "link": "https://stackoverflow.com/users/8689468/mzia"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1526457331, "post_id": 50365115, "comment_id": 87746689, "body": "Thanks! I printed both cases and see that the difference is really in spaces and line breaks"}], "answers": [{"tags": [], "owner": {"reputation": 72, "user_id": 8850201, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Ga_nFEa-Yg/AAAAAAAAAAI/AAAAAAAAAAw/QnpLp8KGylQ/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/8850201/florian"}, "is_accepted": true, "score": 1, "last_activity_date": 1526470453, "creation_date": 1526470453, "answer_id": 50369854, "question_id": 50365115, "link": "https://stackoverflow.com/questions/50365115/why-after-unmarshalling-i-got-different-num-of-bytes-but-the-same-result-after-m/50369854#50369854", "title": "Why after Unmarshalling I got different num of bytes but the same result after Marshalling?", "body": "<p>The original file contains many spaces and new-lines, you can see them in your output (<code>32</code> = Space). <code>json.Unmarshal()</code> will remove all those spaces and <code>json.Marshal()</code> won't add them again. If you want to pretty format your second output you can use <code>json.MarshalIndent()</code>.</p>\n"}], "owner": {"reputation": 336, "user_id": 8689468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZXP3.jpg?s=128&g=1", "display_name": "Mzia", "link": "https://stackoverflow.com/users/8689468/mzia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50369854, "answer_count": 1, "score": -2, "last_activity_date": 1526470453, "creation_date": 1526456845, "question_id": 50365115, "link": "https://stackoverflow.com/questions/50365115/why-after-unmarshalling-i-got-different-num-of-bytes-but-the-same-result-after-m", "title": "Why after Unmarshalling I got different num of bytes but the same result after Marshalling?", "body": "<p>I read geojson with</p>\n\n<pre><code>  json, err := ioutil.ReadFile(file)\n</code></pre>\n\n<p>Then I Print result and see this </p>\n\n<blockquote>\n  <p>[123 32 34 116 121 112 101 34 58 32 34 70 101 97 116 117 114 101 67\n  111 108 108 101 99 116 105 111 110 34 44 10 32 32 32 32 34 102 101 97\n  116 117 114 101 115 34 58 32 91 10 32 32 32 32 32 32 123 32 34 116 121\n  112 101 34 58 32 34 70 101 97 116 117 114 101 34 44 10 32 32 32 32 32\n  32 32 32 34 103 101 111 109 101 116 114 121 34 58 32 123 34 116 121\n  112 101 34 58 32 34 80 111 105 110 116 34 44 32 34 99 111 111 114 100\n  105 110 97 116 101 115 34 58 32 91 49 48 50 46 48 44 32 48 46 53 93\n  125 44 10 32 32 32 32 32 32 32 32 34 112 114 111 112 101 114 116 105\n  101 115 34 58 32 123 34 112 114 111 112 48 34 58 32 34 118 97 108 117\n  101 48 34 125 10 32 32 32 32 32 32 32 32 125 44 10 32 32 32 32 32 32\n  123 32 34 116 121 112 101 34 58 32 34 70 101 97 116 117 114 101 34 44\n  10 32 32 32 32 32 32 32 32 34 103 101 111 109 101 116 114 121 34 58 32\n  123 10 32 32 32 32 32 32 32 32 32 32 34 116 121 112 101 34 58 32 34 76\n  105 110 101 83 116 114 105 110 103 34 44 10 32 32 32 32 32 32 32 32 32\n  32 34 99 111 111 114 100 105 110 97 116 101 115 34 58 32 91 10 32 32\n  32 32 32 32 32 32 32 32 32 32 91 49 48 50 46 48 44 32 48 46 48 93 44\n  32 91 49 48 51 46 48 44 32 49 46 48 93 44 32 91 49 48 52 46 48 44 32\n  48 46 48 93 44 32 91 49 48 53 46 48 44 32 49 46 48 93 10 32 32 32 32\n  32 32 32 32 32 32 32 32 93 10 32 32 32 32 32 32 32 32 32 32 125 44 10\n  32 32 32 32 32 32 32 32 34 112 114 111 112 101 114 116 105 101 115 34\n  58 32 123 10 32 32 32 32 32 32 32 32 32 32 34 112 114 111 112 48 34 58\n  32 34 118 97 108 117 101 48 34 44 10 32 32 32 32 32 32 32 32 32 32 34\n  112 114 111 112 49 34 58 32 48 46 48 10 32 32 32 32 32 32 32 32 32 32\n  125 10 32 32 32 32 32 32 32 32 125 44 10 32 32 32 32 32 32 123 32 34\n  116 121 112 101 34 58 32 34 70 101 97 116 117 114 101 34 44 10 32 32\n  32 32 32 32 32 32 32 34 103 101 111 109 101 116 114 121 34 58 32 123\n  10 32 32 32 32 32 32 32 32 32 32 32 34 116 121 112 101 34 58 32 34 80\n  111 108 121 103 111 110 34 44 10 32 32 32 32 32 32 32 32 32 32 32 34\n  99 111 111 114 100 105 110 97 116 101 115 34 58 32 91 10 32 32 32 32\n  32 32 32 32 32 32 32 32 32 91 32 91 49 48 48 46 48 44 32 48 46 48 93\n  44 32 91 49 48 49 46 48 44 32 48 46 48 93 44 32 91 49 48 49 46 48 44\n  32 49 46 48 93 44 10 32 32 32 32 32 32 32 32 32 32 32 32 32 32 32 91\n  49 48 48 46 48 44 32 49 46 48 93 44 32 91 49 48 48 46 48 44 32 48 46\n  48 93 32 93 10 32 32 32 32 32 32 32 32 32 32 32 32 32 93 10 32 32 32\n  32 32 32 32 32 32 125 44 10 32 32 32 32 32 32 32 32 32 34 112 114 111\n  112 101 114 116 105 101 115 34 58 32 123 10 32 32 32 32 32 32 32 32 32\n  32 32 34 112 114 111 112 48 34 58 32 34 118 97 108 117 101 48 34 44 10\n  32 32 32 32 32 32 32 32 32 32 32 34 112 114 111 112 49 34 58 32 123 34\n  116 104 105 115 34 58 32 34 116 104 97 116 34 125 10 32 32 32 32 32 32\n  32 32 32 32 32 125 10 32 32 32 32 32 32 32 32 32 125 10 32 32 32 32 32\n  32 32 93 10 32 32 32 32 32 125]</p>\n</blockquote>\n\n<p>After than I Unmarshal it and print again and I got this</p>\n\n<blockquote>\n  <p>{FeatureCollection [{Feature map[prop0:value0] {Point [102\n  0.5]}} {Feature map[prop0:value0 prop1:0] {LineString [[102 0] [103 1] [104 0] [105 1]]}} {Feature map[prop0:value0 prop1:map[this:that]]\n  {Polygon [[[100 0] [101 0] [101 1] [100 1] [100 0]]]}}]}</p>\n</blockquote>\n\n<p>Than I Marshal it and got this</p>\n\n<blockquote>\n  <p>[123 34 116 121 112 101 34 58 34 70 101 97 116 117 114 101 67 111 108\n  108 101 99 116 105 111 110 34 44 34 102 101 97 116 117 114 101 115 34\n  58 91 123 34 116 121 112 101 34 58 34 70 101 97 116 117 114 101 34 44\n  34 112 114 111 112 101 114 116 105 101 115 34 58 123 34 112 114 111\n  112 48 34 58 34 118 97 108 117 101 48 34 125 44 34 103 101 111 109 101\n  116 114 121 34 58 123 34 116 121 112 101 34 58 34 80 111 105 110 116\n  34 44 34 99 111 111 114 100 105 110 97 116 101 115 34 58 91 49 48 50\n  44 48 46 53 93 125 125 44 123 34 116 121 112 101 34 58 34 70 101 97\n  116 117 114 101 34 44 34 112 114 111 112 101 114 116 105 101 115 34 58\n  123 34 112 114 111 112 48 34 58 34 118 97 108 117 101 48 34 44 34 112\n  114 111 112 49 34 58 48 125 44 34 103 101 111 109 101 116 114 121 34\n  58 123 34 116 121 112 101 34 58 34 76 105 110 101 83 116 114 105 110\n  103 34 44 34 99 111 111 114 100 105 110 97 116 101 115 34 58 91 91 49\n  48 50 44 48 93 44 91 49 48 51 44 49 93 44 91 49 48 52 44 48 93 44 91\n  49 48 53 44 49 93 93 125 125 44 123 34 116 121 112 101 34 58 34 70 101\n  97 116 117 114 101 34 44 34 112 114 111 112 101 114 116 105 101 115 34\n  58 123 34 112 114 111 112 48 34 58 34 118 97 108 117 101 48 34 44 34\n  112 114 111 112 49 34 58 123 34 116 104 105 115 34 58 34 116 104 97\n  116 34 125 125 44 34 103 101 111 109 101 116 114 121 34 58 123 34 116\n  121 112 101 34 58 34 80 111 108 121 103 111 110 34 44 34 99 111 111\n  114 100 105 110 97 116 101 115 34 58 91 91 91 49 48 48 44 48 93 44 91\n  49 48 49 44 48 93 44 91 49 48 49 44 49 93 44 91 49 48 48 44 49 93 44\n  91 49 48 48 44 48 93 93 93 125 125 93 125]</p>\n</blockquote>\n\n<p>After Unmarshalling I got the same</p>\n\n<blockquote>\n  <p>{FeatureCollection [{Feature map[prop0:value0] {Point [102 0.5]}}\n  {Feature map[prop0:value0 prop1:0] {LineString [[102 0] [103 1] [104\n  0] [105 1]]}} {Feature map[prop0:value0 prop1:map[this:that]] {Polygon\n  [[[100 0] [101 0] [101 1] [100 1] [100 0]]]}}]}</p>\n</blockquote>\n\n<p>Why is that so? Why do I have different number of bytes and why after Unmarshalling these different bytes I got the same result? </p>\n"}, {"tags": ["go", "casting", "modbus"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 4, "last_activity_date": 1526457773, "last_edit_date": 1526457773, "creation_date": 1526457383, "answer_id": 50365271, "question_id": 50365071, "link": "https://stackoverflow.com/questions/50365071/how-to-convert-a-sequence-of-uint16-to-float32/50365271#50365271", "title": "How to convert a sequence of uint16 to float32?", "body": "<h2>Using <code>math.Float32fromBits()</code></h2>\n\n<p>We may use <a href=\"https://golang.org/pkg/math/#Float32frombits\" rel=\"nofollow noreferrer\"><code>math.Float32fromBits()</code></a> to obtain a <code>float32</code> value from its \"binary\" representation. But in order to use it, we need the 4 bytes data packed into a <code>uint32</code> value. For that, we may use <a href=\"https://golang.org/pkg/encoding/binary/#ByteOrder\" rel=\"nofollow noreferrer\"><code>binary.ByteOrder.Uint32()</code></a>:</p>\n\n<pre><code>data := []byte{66, 106, 179, 86}\n\nbits := binary.BigEndian.Uint32(data)\nf := math.Float32frombits(bits)\nfmt.Println(f)\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/BIH41d8EAc-\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>58.675133\n</code></pre>\n\n<p>This solution is faster if we just want to read a single <code>float32</code> value.</p>\n\n<h2>Using <code>binary.Read()</code></h2>\n\n<p>Another option would be to use <a href=\"https://golang.org/pkg/encoding/binary/#Read\" rel=\"nofollow noreferrer\"><code>binary.Read()</code></a> to fill fixed-size values from an <a href=\"https://golang.org/pkg/io/#Reader\" rel=\"nofollow noreferrer\"><code>io.Reader</code></a>. If we have our data as a byte slice, we can use <a href=\"https://golang.org/pkg/bytes/#NewBuffer\" rel=\"nofollow noreferrer\"><code>bytes.NewBuffer()</code></a> to obtain an <code>io.Reader</code> from it:</p>\n\n<pre><code>data := []byte{66, 106, 179, 86}\nvar f float32\nerr := binary.Read(bytes.NewBuffer(data), binary.BigEndian, &amp;f)\nfmt.Println(f, err)\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/riBObEhdWaN\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>58.675133 &lt;nil&gt;\n</code></pre>\n\n<p>This solution is preferred if we have to read a series of <code>float32</code> values from the input.</p>\n"}], "owner": {"reputation": 3261, "user_id": 220853, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Cz1KK.png?s=128&g=1", "display_name": "byterussian", "link": "https://stackoverflow.com/users/220853/byterussian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 887, "favorite_count": 0, "accepted_answer_id": 50365271, "answer_count": 1, "score": 2, "last_activity_date": 1526457773, "creation_date": 1526456689, "question_id": 50365071, "link": "https://stackoverflow.com/questions/50365071/how-to-convert-a-sequence-of-uint16-to-float32", "title": "How to convert a sequence of uint16 to float32?", "body": "<p>I've a sequence <code>[66 106 179 86]</code>(those numbers are two 16bit register in modbus) generated by modbus library(<a href=\"https://github.com/goburrow/modbus/blob/master/client.go#L468\" rel=\"nofollow noreferrer\">conversion code</a>), now how can I convert this sequence in a 32 float number?</p>\n\n<p>I've tried <code>[]uint32{66,106, 179, 86}</code> as argument for <code>Float32frombits</code> but doesn't accept uint32 lists.</p>\n"}, {"tags": ["dictionary", "go", "indexing"], "comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1526456754, "post_id": 50365002, "comment_id": 87746322, "body": "Eh. That&#39;s such a standard construct that it&#39;s hard to know what you&#39;re asking. Do you not understand <code>:=</code>? Or the two value return map lookup? Both are covered adequately in the Go tour or pretty much any tutorial or book worth their name or the language specification if you want to read that."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526457096, "post_id": 50365002, "comment_id": 87746531, "body": "<a href=\"https://golang.org/ref/spec#Short_variable_declarations\" rel=\"nofollow noreferrer\">golang.org/ref/spec#Short_variable_declarations</a> and <a href=\"https://www.google.com/search?q=golang+comma+ok+idiom&amp;ie=utf-8&amp;oe=utf-8&amp;client=firefox-b-ab\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3664, "user_id": 529273, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eee8cb7f7c81fca931c599266aa3536a?s=128&d=identicon&r=PG", "display_name": "P Hemans", "link": "https://stackoverflow.com/users/529273/p-hemans"}, "edited": false, "score": 1, "creation_date": 1526459517, "post_id": 50365127, "comment_id": 87748062, "body": "Thanks for being so helpful. After reading your explanation, it should have been obvious but I am new around here."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 5, "last_activity_date": 1526456870, "last_edit_date": 1592644375, "creation_date": 1526456870, "answer_id": 50365127, "question_id": 50365002, "link": "https://stackoverflow.com/questions/50365002/this-code-uses-the-variable-ok-but-it-is-not-defined/50365127#50365127", "title": "This code uses the variable &quot;ok&quot; but it is not defined", "body": "<p>This is covered in <a href=\"https://golang.org/ref/spec#Index_expressions\" rel=\"noreferrer\">Spec: Index expressions:</a></p>\n<blockquote>\n<p>An index expression on a map a of type <code>map[K]V</code> used in an <a href=\"https://golang.org/ref/spec#Assignments\" rel=\"noreferrer\">assignment</a> or initialization of the special form</p>\n<pre><code>v, ok = a[x]\nv, ok := a[x]\nvar v, ok = a[x]\nvar v, ok T = a[x]\n</code></pre>\n<p>yields an additional untyped boolean value. The value of <code>ok</code> is <code>true</code> if the key <code>x</code> is present in the map, and <code>false</code> otherwise.</p>\n</blockquote>\n<p>So for example this code:</p>\n<pre><code>if fn, ok := hostProxy[host]; ok {\n    fn.ServeHTTP(w, r)\n    return\n}\n</code></pre>\n<p>Means to get the value associated with <code>host</code> key from the <code>hostProxy</code> map, create and store the value in the <code>fn</code> variable, and the result (whether the key was found in the map) in the <code>ok</code> variable. And this <code>ok</code> variable (which will be of type <code>bool</code>) is used as the condition of the <code>if</code> statement. So if the <code>host</code> key is in the <code>hostProxy</code> map, it goes ahead and uses it.</p>\n"}, {"tags": [], "owner": {"reputation": 14361, "user_id": 3612353, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/94f2502e42d2e474bfd81dba411fe66f?s=128&d=identicon&r=PG", "display_name": "cn007b", "link": "https://stackoverflow.com/users/3612353/cn007b"}, "is_accepted": false, "score": 1, "last_activity_date": 1526457400, "creation_date": 1526457400, "answer_id": 50365279, "question_id": 50365002, "link": "https://stackoverflow.com/questions/50365002/this-code-uses-the-variable-ok-but-it-is-not-defined/50365279#50365279", "title": "This code uses the variable &quot;ok&quot; but it is not defined", "body": "<p>Yes <code>ok</code> isn't defined before, but in your example you have <code>:=</code> which will define variables for you under the hood and will assign values obtained from <code>map lookup</code>.</p>\n"}], "owner": {"reputation": 3664, "user_id": 529273, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eee8cb7f7c81fca931c599266aa3536a?s=128&d=identicon&r=PG", "display_name": "P Hemans", "link": "https://stackoverflow.com/users/529273/p-hemans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50365127, "answer_count": 2, "score": 1, "last_activity_date": 1526459346, "creation_date": 1526456486, "last_edit_date": 1526459346, "question_id": 50365002, "link": "https://stackoverflow.com/questions/50365002/this-code-uses-the-variable-ok-but-it-is-not-defined", "title": "This code uses the variable &quot;ok&quot; but it is not defined", "body": "<p>This code is functioning but I don't understand how.</p>\n\n<p>In the code below hostProxy[host] may or may not contain a function. I don't understand how the variable \"ok\" is defined or how it gets its value. It is not defined before this line.</p>\n\n<pre><code>if fn, ok := hostProxy[host]; ok {\n    fn.ServeHTTP(w, r)\n    return\n}\n\nif target, ok := hostTarget[host]; ok {\n    ....\n}\n</code></pre>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1526458354, "post_id": 50364487, "comment_id": 87747330, "body": "Please post the code you have tried for reading the file"}, {"owner": {"reputation": 29, "user_id": 8757991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f6725d189c34e6d9aeb558e5572d17?s=128&d=identicon&r=PG&f=1", "display_name": "Supriya Singh", "link": "https://stackoverflow.com/users/8757991/supriya-singh"}, "reply_to_user": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1526459322, "post_id": 50364487, "comment_id": 87747951, "body": "@Himanshu  raw, err := ioutil.ReadFile(*testFile) \tif err != nil { \t\treturn \t} This is what I used for reading the file.where testFile is the json file taken as an input."}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526460877, "post_id": 50364487, "comment_id": 87748942, "body": "The error suggests that the file doesn&#39;t contain a JSON object but some kind of JSON array. Double check the file contents."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8757991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f6725d189c34e6d9aeb558e5572d17?s=128&d=identicon&r=PG&f=1", "display_name": "Supriya Singh", "link": "https://stackoverflow.com/users/8757991/supriya-singh"}, "edited": false, "score": 0, "creation_date": 1526455348, "post_id": 50364586, "comment_id": 87745494, "body": "I am already doing this  // Parse the provided test template file where testFile is json file. \traw, err := ioutil.ReadFile(*testFile) \tif err != nil { \t\treturn \t}"}, {"owner": {"reputation": 29, "user_id": 8757991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f6725d189c34e6d9aeb558e5572d17?s=128&d=identicon&r=PG&f=1", "display_name": "Supriya Singh", "link": "https://stackoverflow.com/users/8757991/supriya-singh"}, "edited": false, "score": 0, "creation_date": 1526455551, "post_id": 50364586, "comment_id": 87745601, "body": "Can you please try it like this?"}], "tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1526455057, "creation_date": 1526455057, "answer_id": 50364586, "question_id": 50364487, "link": "https://stackoverflow.com/questions/50364487/json-cannot-unmarshal-array-into-go-value-of-type-main-data/50364586#50364586", "title": "json: cannot unmarshal array into Go value of type main.Data", "body": "<p>Made a few modification and Unmarshaling worked just fine.</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n)\n\nvar raw = `   {\n\"apiAddr\":\"abc\",\n\"data\":\n    [\n        {\n        \"key\":\"uid1\",\n        \"name\":\"test\",\n        \"commandList\":[\"dummy cmd\"],\n        \"frequency\":\"1\",\n        \"deviceList\":[\"dev1\"],\n        \"lastUpdatedBy\": \"user\",\n        \"status\":\"Do something\"\n        }\n]\n}`\n\nfunc main() {\n    var testTemplates Data\n    err := json.Unmarshal([]byte(raw), &amp;testTemplates)\n    if err != nil {\n        return\n    }\n    fmt.Println(\"Hello, playground\", testTemplates)\n}\n\ntype Data struct {\n    APIAddr string     `json:\"apiAddr\"`\n    Data    []Template `json:\"data\"`\n}\n\ntype Template struct {\n    Key           string   `json:\"key\"`\n    Name          string   `json:\"name\"`\n    CommandList   []string `json:\"commandList\"`\n    Frequency     string   `json:\"frequency\"`\n    DeviceList    []string `json:\"deviceList\"`\n    LastUpdatedBy string   `json:\"lastUpdatedBy\"`\n    Status        string   `json:\"status\"`\n}\n</code></pre>\n\n<p>You can run it in Playground as well: <a href=\"https://play.golang.org/p/TSmUnFYO97-\" rel=\"nofollow noreferrer\">https://play.golang.org/p/TSmUnFYO97-</a></p>\n"}], "owner": {"reputation": 29, "user_id": 8757991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34f6725d189c34e6d9aeb558e5572d17?s=128&d=identicon&r=PG&f=1", "display_name": "Supriya Singh", "link": "https://stackoverflow.com/users/8757991/supriya-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2043, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526459431, "creation_date": 1526454680, "last_edit_date": 1526459431, "question_id": 50364487, "link": "https://stackoverflow.com/questions/50364487/json-cannot-unmarshal-array-into-go-value-of-type-main-data", "title": "json: cannot unmarshal array into Go value of type main.Data", "body": "<p>Json is -</p>\n\n<pre><code>    {\n\"apiAddr\":\"abc\",\n\"data\":\n    [\n        {\n        \"key\":\"uid1\",\n        \"name\":\"test\",\n        \"commandList\":[\"dummy cmd\"],\n        \"frequency\":\"1\",\n        \"deviceList\":[\"dev1\"],\n        \"lastUpdatedBy\": \"user\",\n        \"status\":\"Do something\"\n        }\n]\n</code></pre>\n\n<p>}</p>\n\n<p>And the code to unmarshall is -</p>\n\n<pre><code>   type Data struct {\n    APIAddr string             `json:\"apiAddr\"`\n    Data    []Template         `json:\"data\"`\n   }\n\n    type Template struct {\n   Key           string   `json:\"key\"`\n   Name          string   `json:\"name\"`\n   CommandList   []string `json:\"commandList\"`\n   Frequency     string   `json:\"frequency\"`\n   DeviceList    []string `json:\"deviceList\"`\n   LastUpdatedBy string   `json:\"lastUpdatedBy\"`\n   Status        string   `json:\"status\"`\n}\n   raw, err := ioutil.ReadFile(*testFile)\n      if err != nil {\n        return\n    }\n    var testTemplates Data\n    err = json.Unmarshal(raw, &amp;testTemplates)\n    if err != nil {\n        return\n    }\n</code></pre>\n\n<p>where testFile is the json file.\nI am getting this error </p>\n\n<blockquote>\n  <p>json: cannot unmarshal array into Go value of type main.Data.</p>\n</blockquote>\n\n<p>Looking at the existing questions in stackoverflow, looks like I am doing all right.Anyone?</p>\n"}, {"tags": ["node.js", "go", "aws-lambda"], "answers": [{"comments": [{"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1526464597, "post_id": 50364330, "comment_id": 87751625, "body": "As long as the specific <i>container</i> (not the <i>function</i>) is handling requests. Each invocation runs alone in its own separate container, which the service tends to reuse as often as possible, since that should be faster than constantly creating new ones -- but two concurrent invocations will never share a single container.  In Node.JS, setting this flag is used to allow reuse of things like database connections.  The open connection keeps the event loop from being empty, requiring you to tell the system not to wait for that, but to go ahead and freeze once the callback is called."}, {"owner": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 1, "creation_date": 1526464801, "post_id": 50364330, "comment_id": 87751769, "body": "For cases where you need to send a response first, and then do more work, the approach is for the first function to invoke a second function asynchrously -- what Lambda calls an &quot;Event&quot; invocation --  which returns immediately, only throwing errors for things like access denied or no such function.  Lambda discards its eventual output but retries it twice if errors occur at runtime."}, {"owner": {"reputation": 1729, "user_id": 280300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07ad85c8ef61b863f207955c88c5025?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/280300/jan"}, "reply_to_user": {"reputation": 138098, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1526466096, "post_id": 50364330, "comment_id": 87752610, "body": "Thanks Michael! I&#39;ve updated my answer to say &#39;container&#39; instead of &#39;function&#39;."}, {"owner": {"reputation": 129, "user_id": 6511808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e23ccdcc37a09a6eef18fb44050010b?s=128&d=identicon&r=PG&f=1", "display_name": "Etienne", "link": "https://stackoverflow.com/users/6511808/etienne"}, "edited": false, "score": 0, "creation_date": 1588586441, "post_id": 50364330, "comment_id": 108944895, "body": "A bit late to the party here, but if you&#39;re looking for similar functionality (sending a response immediatly and keep processing in the backgorund), you can trigger your lambda from SQS, you get the immediate response from SQS while your lambda works in the background. Bonus you can extend lambda lifetime to 15 min this way"}], "tags": [], "owner": {"reputation": 1729, "user_id": 280300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07ad85c8ef61b863f207955c88c5025?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/280300/jan"}, "is_accepted": true, "score": 5, "last_activity_date": 1526570868, "last_edit_date": 1526570868, "creation_date": 1526454112, "answer_id": 50364330, "question_id": 50364329, "link": "https://stackoverflow.com/questions/50364329/what-happens-with-goroutines-in-aws-lambda-when-your-handler-function-exits/50364330#50364330", "title": "What happens with goroutines in aws-lambda when your handler function exits?", "body": "<p>It turns out we can't assume the code will run.</p>\n\n<p>Example implementation:</p>\n\n<pre><code>var alreadyLogging bool\n\nfunc RecordQuery(name MyEvent) {\n    if alreadyLogging {\n        return\n    }\n    alreadyLogging = true\n    for i := 0; ; i++ {\n        time.Sleep(time.Second)\n        log.Print(\"Still here \", i)\n    }\n}\n</code></pre>\n\n<p>Behaviour: as long as the container where the lambda is running is receiving requests, the goroutine will be executed. But all code will stop when the container is no longer receiving requests.</p>\n\n<p>Possible output (in cloudwatch):</p>\n\n<pre><code>2018/05/16 08:50:46 Still here 70\n2018/05/16 08:50:47 Still here 71\n2018/05/16 08:50:48 Still here 72\n2018/05/16 08:50:49 Still here 73\n2018/05/16 08:51:36 Still here 74\n2018/05/16 08:51:37 Still here 75\n2018/05/16 08:51:38 Still here 76\n</code></pre>\n\n<p>Note that in the Node.js Programming Model, you can request AWS Lambda to freeze the process soon after the callback is called, even if there are events in the event loop: <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/nodejs-prog-model-context.html#nodejs-prog-model-context-properties%20The%20Context%20Object%20Properties\" rel=\"nofollow noreferrer\">The Context Object Properties</a>.</p>\n\n<p>It would be interesting to see some use cases for this API.</p>\n\n<p>Update: in Node.js, as soon as you connect to databases, you'll have a non-empty event queue. That's why this setting is available.</p>\n"}], "owner": {"reputation": 1729, "user_id": 280300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07ad85c8ef61b863f207955c88c5025?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/280300/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2693, "favorite_count": 0, "accepted_answer_id": 50364330, "answer_count": 1, "score": 8, "last_activity_date": 1526570868, "creation_date": 1526454112, "question_id": 50364329, "link": "https://stackoverflow.com/questions/50364329/what-happens-with-goroutines-in-aws-lambda-when-your-handler-function-exits", "title": "What happens with goroutines in aws-lambda when your handler function exits?", "body": "<p>The question originates in: how much work can I do in the background, when the response has already been sent. For instance: I just want to receive data, tell the client 'ok', and proceed with some database operations that may take some time.</p>\n\n<pre><code>package main\n\nimport (\n        \"fmt\"\n        \"context\"\n        \"github.com/aws/aws-lambda-go/lambda\"\n)\n\ntype MyEvent struct {\n        Name string `json:\"name\"`\n}\n\nfunc HandleRequest(ctx context.Context, name MyEvent) (string, error) {\n        go RecordQuery(name)\n        return fmt.Sprintf(\"Hello %s!\", name.Name ), nil\n}\n\nfunc RecordQuery(name MyEvent) {\n        // insert stuff in the database, mark user active,\n        // log activity, etc..\n}\n\nfunc main() {\n        lambda.Start(HandleRequest)\n}\n</code></pre>\n\n<p>Can we count on the goroutine to be able to do its work?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "edited": false, "score": 2, "creation_date": 1526451461, "post_id": 50363561, "comment_id": 87743468, "body": "No, it will not free the memory of any block of memory reachable from any goroutine."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 4, "creation_date": 1526452008, "post_id": 50363561, "comment_id": 87743677, "body": "It would be a pretty awful garbage collector if it collected memory that&#39;s still in use."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1526453493, "post_id": 50363561, "comment_id": 87744455, "body": "Why do you ask? What on earth makes you think the garbage collector is buggy?"}, {"owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "edited": false, "score": 0, "creation_date": 1526486036, "post_id": 50363561, "comment_id": 87766793, "body": "I think he may have been concerned about the &quot;obj&quot; stored in the map, and when exactly the argument to the goroutine start function is evaluated, m[&quot;a&quot;].  If that expression were not evaluated right away then it would be possible that obj was deleted from the map and that it was potentially even gc&#39;ed before being passed to the anonymous function in the new goroutine."}], "answers": [{"tags": [], "owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "is_accepted": true, "score": 2, "last_activity_date": 1526452001, "creation_date": 1526452001, "answer_id": 50363785, "question_id": 50363561, "link": "https://stackoverflow.com/questions/50363561/will-golangs-gc-free-memory-of-object-which-only-be-referenced-by-a-goroutine/50363785#50363785", "title": "Will golang&#39;s GC free memory of object which only be referenced by a goroutine?", "body": "<p>The code will evaluate </p>\n\n<pre><code>m[\"a\"]\n</code></pre>\n\n<p>which will give the pointer obj, then obj will be placed on a new stack for the goroutine, and then the goroutine will be started with that stack, and then obj will be removed from the map in the original goroutine.  At that point the new goroutine stack will have a pointer to obj, and so obj will not be gc'ed for that reason until the 2nd goroutine completes execution.</p>\n"}], "owner": {"reputation": 325, "user_id": 7861216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b000d27aef138af2dba2dcbc888de12?s=128&d=identicon&r=PG&f=1", "display_name": "wangjun", "link": "https://stackoverflow.com/users/7861216/wangjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 50363785, "answer_count": 1, "score": -3, "last_activity_date": 1526452001, "creation_date": 1526451076, "last_edit_date": 1526451380, "question_id": 50363561, "link": "https://stackoverflow.com/questions/50363561/will-golangs-gc-free-memory-of-object-which-only-be-referenced-by-a-goroutine", "title": "Will golang&#39;s GC free memory of object which only be referenced by a goroutine?", "body": "<pre><code>m := map[string]*Object {\n    \"a\": obj\n}\ngo func(obj *Object) {\n    obj.Do()\n}(m[\"a\"])\n\ndelete(m, \"a\")\n</code></pre>\n\n<p>will GC free memory of <code>obj</code> when <code>obj.Do()</code> has not finished?</p>\n"}, {"tags": ["arrays", "go", "struct"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526449384, "post_id": 50363151, "comment_id": 87742633, "body": "Users ist nested. Use <a href=\"https://mholt.github.io/json-to-go/\" rel=\"nofollow noreferrer\">mholt.github.io/json-to-go</a> to generate a suitable Go struct."}, {"owner": {"reputation": 524, "user_id": 3767643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cc0a74b12a5aee091191468790d9c8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3767643", "link": "https://stackoverflow.com/users/3767643/user3767643"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526449539, "post_id": 50363151, "comment_id": 87742692, "body": "So, is the <code>Root</code> struct too, <code>Users</code> is of <code>Users struct</code>"}, {"owner": {"reputation": 524, "user_id": 3767643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cc0a74b12a5aee091191468790d9c8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3767643", "link": "https://stackoverflow.com/users/3767643/user3767643"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526449689, "post_id": 50363151, "comment_id": 87742760, "body": "@Volker, but it needs to <code>Users</code> to be <code>array</code> and not <code>Users</code> struct. I have no Idea, how to provide <code>multi dimensional array</code> inside <code>struct</code>"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526450192, "post_id": 50363151, "comment_id": 87742958, "body": "Do <code>Myuser []Users</code>, and maybe choose better names."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526450447, "post_id": 50363151, "comment_id": 87743059, "body": "<a href=\"https://play.golang.org/p/azE7kPFs02V\" rel=\"nofollow noreferrer\">play.golang.org/p/azE7kPFs02V</a>"}, {"owner": {"reputation": 524, "user_id": 3767643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cc0a74b12a5aee091191468790d9c8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3767643", "link": "https://stackoverflow.com/users/3767643/user3767643"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526450448, "post_id": 50363151, "comment_id": 87743060, "body": "@mkopriva - better names?"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526450536, "post_id": 50363151, "comment_id": 87743093, "body": "Well in the json the key is Users but you call it Myuser and then you have a type Users that respresents a single user... that is confusing."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 1, "creation_date": 1526450637, "post_id": 50363151, "comment_id": 87743135, "body": "@user3767643 see the example in my second comment, it works and makes objectively more sense."}, {"owner": {"reputation": 524, "user_id": 3767643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cc0a74b12a5aee091191468790d9c8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3767643", "link": "https://stackoverflow.com/users/3767643/user3767643"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526450736, "post_id": 50363151, "comment_id": 87743167, "body": "@mkopriva can you post that as answer, I will mark it as solved."}], "answers": [{"tags": [], "owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "is_accepted": true, "score": 1, "last_activity_date": 1526450946, "creation_date": 1526450946, "answer_id": 50363533, "question_id": 50363151, "link": "https://stackoverflow.com/questions/50363151/how-to-unmarshal-multi-dimensional-array-inside-struct/50363533#50363533", "title": "How to unmarshal multi dimensional array inside struct", "body": "<p>In the json the <code>Users</code> key is an array and so the corresponding Go field should be a slice.</p>\n\n<pre><code>type Root struct {\n    ID    string `json:\"id,omitempty\"`\n    Title string `json:\"Title,omitempty\"`\n    Users []User `json:\"Users,omitempty\"`\n    Tag   string `json:\"Tag,omitempty\"`\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/azE7kPFs02V\" rel=\"nofollow noreferrer\">https://play.golang.org/p/azE7kPFs02V</a></p>\n"}], "owner": {"reputation": 524, "user_id": 3767643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cc0a74b12a5aee091191468790d9c8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3767643", "link": "https://stackoverflow.com/users/3767643/user3767643"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 50363533, "answer_count": 1, "score": 0, "last_activity_date": 1526450946, "creation_date": 1526449132, "last_edit_date": 1526449619, "question_id": 50363151, "link": "https://stackoverflow.com/questions/50363151/how-to-unmarshal-multi-dimensional-array-inside-struct", "title": "How to unmarshal multi dimensional array inside struct", "body": "<p>I have following data:-</p>\n\n<pre><code>{\"me\":[{\"id\": \"0xcfd\",\"Title\":\"Story of Stackoverflow\",\"Users\":[{\"id\":\"1\",\"Name\":\"MetaBoss\"},{\"id\":\"2\",\"Name\":\"Owner\"}],\"Tag\":\"golang,programming\"}]}\n</code></pre>\n\n<p>and I have the following struct:-</p>\n\n<pre><code>type Root struct {\n    ID string `json:\"id,omitempty\"`\n    Title string `json:\"Title,omitempty\"`\n    Myuser Users `json:\"Users,omitempty\"` // Users is struct\n    Tag string `json:\"Tag,omitempty\"`\n}\n\ntype Users struct {\n    ID string `json:\"id,omitempty\"`\n    Name string `json:\"Name,omitempty\"`\n}\n</code></pre>\n\n<p>To unmarshal the data, I am trying to do following things - </p>\n\n<pre><code>type Unmarh struct {\n    Me []Root `json:\"me\"`\n}\n\nvar r Unmarh\nerr = json.Unmarshal(response, &amp;r)\n</code></pre>\n\n<p>while printing <code>r.Me[0].Myuser</code>, I am not able to get data.</p>\n\n<p>I am getting below error - </p>\n\n<p><code>json: cannot unmarshal array into go struct field Root.Myuser of type User struct {....Users struct data}</code></p>\n\n<p>It needs <code>Myuser</code> to be multidimensional <code>array</code> type and not <code>Users</code> struct. I have no Idea, how to represent <code>Users</code> <code>multidimensional array</code> inside <code>struct</code></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 21, "user_id": 3782968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgEig.png?s=128&g=1", "display_name": "Moutain", "link": "https://stackoverflow.com/users/3782968/moutain"}, "edited": false, "score": 1, "creation_date": 1526451528, "post_id": 50362439, "comment_id": 87743492, "body": "I know that the question have something same with: <a href=\"https://stackoverflow.com/questions/17996771/why-does-a-method-with-a-pointer-receiver-still-work-when-it-receives-a-value\" title=\"why does a method with a pointer receiver still work when it receives a value\">stackoverflow.com/questions/17996771/&hellip;</a> But they&#39;re different"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1526451871, "post_id": 50362439, "comment_id": 87743618, "body": "the name has not changed because the receiver is not a pointer."}, {"owner": {"reputation": 21, "user_id": 3782968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgEig.png?s=128&g=1", "display_name": "Moutain", "link": "https://stackoverflow.com/users/3782968/moutain"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1526452715, "post_id": 50362439, "comment_id": 87744008, "body": "@zerkms As i understand, with value receiver, the &quot;caller&quot; will be cloned and all modification will not effect to &quot;real caller&quot;. So how do Go handle the case (&amp;e).changeName(&quot;Hallo&quot;) ?"}, {"owner": {"reputation": 21, "user_id": 3782968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgEig.png?s=128&g=1", "display_name": "Moutain", "link": "https://stackoverflow.com/users/3782968/moutain"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1526453132, "post_id": 50362439, "comment_id": 87744256, "body": "If the &quot;caller&quot; is cloned same with e.changeName(&quot;Michael Andrew&quot;), so is (&amp;e) meaningless?"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1526454950, "post_id": 50362439, "comment_id": 87745262, "body": "It&#39;s handled the same way - the value a pointer points to is copied and then used as a receiver. See &quot;Such a function indirects through the receiver to create a value to pass as the receiver to the underlying method; the method does not overwrite the value whose address is passed in the function call.&quot; at <a href=\"https://golang.org/ref/spec#Method_expressions\" rel=\"nofollow noreferrer\">golang.org/ref/spec#Method_expressions</a>"}, {"owner": {"reputation": 21, "user_id": 3782968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgEig.png?s=128&g=1", "display_name": "Moutain", "link": "https://stackoverflow.com/users/3782968/moutain"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1526456636, "post_id": 50362439, "comment_id": 87746261, "body": "Thanks, I&#39;ve got it"}], "owner": {"reputation": 21, "user_id": 3782968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgEig.png?s=128&g=1", "display_name": "Moutain", "link": "https://stackoverflow.com/users/3782968/moutain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1526449422, "answer_count": 0, "score": 1, "last_activity_date": 1526451426, "creation_date": 1526444658, "last_edit_date": 1526451426, "question_id": 50362439, "link": "https://stackoverflow.com/questions/50362439/why-method-with-value-receiver-work-with-pointer-caller", "closed_reason": "Duplicate", "title": "Why method with &quot;value receiver&quot; work with &quot;pointer caller&quot;?", "body": "<p>I'm new in <strong>Go</strong>. I'm reading about method receiver.</p>\n\n<p>And have a little confuse why value receiver accept pointer type, and in the example below, the name wasn't changed even with pointer type.</p>\n\n<p>I've got this result:</p>\n\n<pre><code>Employee name: Mark Andrew\nEmployee name: Mark Andrew\nEmployee name: Mark Andrew\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package main\r\n\r\nimport (\r\n\t\"fmt\"\r\n)\r\n\r\ntype Employee struct {\r\n\tname string\r\n\tage  int\r\n}\r\n\r\n/*\r\nMethod with value receiver\r\n*/\r\nfunc (e Employee) changeName(newName string) {\r\n\te.name = newName\r\n}\r\n\r\n/*\r\nMethod with pointer receiver\r\n*/\r\nfunc (e *Employee) changeAge(newAge int) {\r\n\te.age = newAge\r\n}\r\n\r\nfunc main() {\r\n\te := Employee{\r\n\t\tname: \"Mark Andrew\",\r\n\t\tage:  50,\r\n\t}\r\n\t\r\n\t// this work perfectly\r\n\tfmt.Printf(\"Employee name: %s\", e.name)\r\n\te.changeName(\"Michael Andrew\")\r\n\t\r\n\t// ofcourse, the name isn't changed =&gt; good\r\n\tfmt.Printf(\"\\nEmployee name: %s\", e.name)\r\n\t\r\n\t// but why this work too?\r\n\t// and why the name wasn't changed? =&gt; confused ...\r\n\t(&amp;e).changeName(\"Hallo\")\r\n\tfmt.Printf(\"\\nEmployee name: %s\", e.name)\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["testing", "go"], "answers": [{"tags": [], "owner": {"reputation": 665, "user_id": 3334022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c419addb081144f40ce707cab85fbf2?s=128&d=identicon&r=PG&f=1", "display_name": "crunch", "link": "https://stackoverflow.com/users/3334022/crunch"}, "is_accepted": false, "score": -1, "last_activity_date": 1526442530, "creation_date": 1526442530, "answer_id": 50362205, "question_id": 50362114, "link": "https://stackoverflow.com/questions/50362114/golang-test-coverage-with-black-box-test-coverage/50362205#50362205", "title": "Golang test coverage with black box _test coverage", "body": "<p>After much keyboard mashing, I discovered it has to do with the fact that I was simlinking my project directory to <code>$GOPATH/src/</code>.</p>\n\n<p>Copying the project into <code>$GOPATH/src/mypackage</code> and running <code>go test -cover</code> correctly returns 100% coverage.</p>\n"}], "owner": {"reputation": 665, "user_id": 3334022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c419addb081144f40ce707cab85fbf2?s=128&d=identicon&r=PG&f=1", "display_name": "crunch", "link": "https://stackoverflow.com/users/3334022/crunch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1526442530, "creation_date": 1526441776, "question_id": 50362114, "link": "https://stackoverflow.com/questions/50362114/golang-test-coverage-with-black-box-test-coverage", "title": "Golang test coverage with black box _test coverage", "body": "<p>My problem is simple, but the answer remains elusive. Suppose I have a package</p>\n\n<pre><code>package mypackage\n\nfunc DoTheThing() int {\n  return 5\n}\n</code></pre>\n\n<p>Now suppose I have a test using in the <code>mypackage_test</code> package</p>\n\n<pre><code>package mypackage_test\n\nimport \"testing\"\nimport . \"mypackage\"\n\nfunc TestDoTheThing(t *testing.T) {\n    if DoTheThing() != 5 {\n        t.Error(\"there was a problem\")\n    }\n}\n</code></pre>\n\n<p>Now I want to know the code coverage of the package <code>mypackage</code>.</p>\n\n<pre><code>$ go test -cover\nPASS\ncoverage: 0.0% of statements\nok      /my/path/mypackage 0.002s\n</code></pre>\n\n<p>It should be 100%. I have tried also</p>\n\n<pre><code>$ go test -v -cover -coverpkg ./... ./...\n=== RUN   TestDoTheThing\n--- PASS: TestDoTheThing (0.00s)\nPASS\ncoverage: 0.0% of statements in ./...\nok      /my/path/mypackage 0.002s  coverage: 0.0% of statements in ./...\n</code></pre>\n\n<p>It is not a possibility for me to include the test in <code>mypackage</code>, so I need to know the code coverage of <code>mypackage</code> in this setup.</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["ubuntu", "go"], "answers": [{"tags": [], "owner": {"reputation": 1522, "user_id": 9760446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799ec2569f8425b7463cba54f91bf9bb?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Dent", "link": "https://stackoverflow.com/users/9760446/arthur-dent"}, "is_accepted": true, "score": 2, "last_activity_date": 1526436511, "last_edit_date": 1526436511, "creation_date": 1526436199, "answer_id": 50361455, "question_id": 50361397, "link": "https://stackoverflow.com/questions/50361397/how-to-give-ubuntu-terminal-commands-from-a-program-in-go-language/50361455#50361455", "title": "How to give ubuntu terminal commands from a program in GO language?", "body": "<p>Yes. You use <a href=\"https://golang.org/pkg/os/exec/\" rel=\"nofollow noreferrer\">the exec package</a>. Check out the following examples:</p>\n\n<ul>\n<li><a href=\"https://gobyexample.com/spawning-processes\" rel=\"nofollow noreferrer\">Spawning Processes</a></li>\n<li><a href=\"https://gobyexample.com/execing-processes\" rel=\"nofollow noreferrer\">Exec'ing Processes</a></li>\n</ul>\n\n<p>I'd include an example in my answer, but you've provided no information whatsoever on what it is you're trying to do, so instead I've linked to some helpful examples.</p>\n"}], "owner": {"reputation": 457, "user_id": 6733980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KbcHG.png?s=128&g=1", "display_name": "Coding4Life", "link": "https://stackoverflow.com/users/6733980/coding4life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 50361455, "answer_count": 1, "score": -3, "last_activity_date": 1526436511, "creation_date": 1526435689, "question_id": 50361397, "link": "https://stackoverflow.com/questions/50361397/how-to-give-ubuntu-terminal-commands-from-a-program-in-go-language", "title": "How to give ubuntu terminal commands from a program in GO language?", "body": "<p>Is there any possibility to give ubuntu terminal commands,from a GO language program. \n(GO is installed in ubuntu)</p>\n"}, {"tags": ["go", "logging"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1526436389, "post_id": 50361298, "comment_id": 87739421, "body": "What have you tried so far?"}, {"owner": {"reputation": 13087, "user_id": 2062973, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/GD1pm.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2062973/james"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526440321, "post_id": 50361298, "comment_id": 87740207, "body": "I tried using beego logs for multiple file, <a href=\"https://beego.me/docs/module/logs.md\" rel=\"nofollow noreferrer\">beego.me/docs/module/logs.md</a>"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526442734, "post_id": 50361298, "comment_id": 87740791, "body": "Did you create a logger for each destination file and use that logger in the corresponding .go file?"}, {"owner": {"reputation": 13087, "user_id": 2062973, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/GD1pm.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2062973/james"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526457285, "post_id": 50361298, "comment_id": 87746661, "body": "I am trying to use logs as global var, so not sure how to do that for every file separately."}], "answers": [{"comments": [{"owner": {"reputation": 1522, "user_id": 9760446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799ec2569f8425b7463cba54f91bf9bb?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Dent", "link": "https://stackoverflow.com/users/9760446/arthur-dent"}, "reply_to_user": {"reputation": 13087, "user_id": 2062973, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/GD1pm.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2062973/james"}, "edited": false, "score": 0, "creation_date": 1526495699, "post_id": 50361546, "comment_id": 87771849, "body": "@JamesSapam see <a href=\"https://play.golang.org/p/GPsTXW9ZctJ\" rel=\"nofollow noreferrer\">my experiment I link to at the end of the post</a> and see if a different caller parameter value works. You can also do negative numbers (<code>-1</code> might work)."}], "tags": [], "owner": {"reputation": 1522, "user_id": 9760446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799ec2569f8425b7463cba54f91bf9bb?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Dent", "link": "https://stackoverflow.com/users/9760446/arthur-dent"}, "is_accepted": false, "score": 0, "last_activity_date": 1526437854, "last_edit_date": 1526437854, "creation_date": 1526436930, "answer_id": 50361546, "question_id": 50361298, "link": "https://stackoverflow.com/questions/50361298/how-to-write-logs-from-separate-package-to-separate-file/50361546#50361546", "title": "How to write logs from separate package to separate file", "body": "<p><a href=\"https://golang.org/pkg/runtime/#Caller\" rel=\"nofollow noreferrer\"><code>runtime.Caller(0)</code></a> should get you this information. For example:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"runtime\"\n    \"path\"\n    \"path/filepath\"\n)\n\nfunc main() {\n    _, filename, _, ok := runtime.Caller(0)\n    if !ok {\n        panic(\"No caller!\")\n    }\n    fmt.Printf(\"Calling file: %s\\n\", path.Base(filename))\n\n    // Without extension\n    fname := fmt.Sprintf(\"%s.log\", path.Base(filename[0:len(filename)-len(filepath.Ext(filename))]))\n    fmt.Printf(\"Desired log file name: %s\\n\", fname)\n\n    // you can now use fname to form desired log path\n    logPath := path.Join(\"/var/log\", fname)\n    fmt.Printf(\"Desired log path: %s\\n\", logPath)\n}\n</code></pre>\n\n<p>This example will output:</p>\n\n<pre><code>Calling file: main.go\nDesired log file name: main.log\nDesired log path: /var/log/main.log\n</code></pre>\n\n<p>This is just an example. <a href=\"https://play.golang.org/p/GPsTXW9ZctJ\" rel=\"nofollow noreferrer\">Try experimenting with a different integer parameter to <code>runtime.Caller()</code></a> if this doesn't work.</p>\n"}, {"comments": [{"owner": {"reputation": 13087, "user_id": 2062973, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/GD1pm.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2062973/james"}, "edited": false, "score": 0, "creation_date": 1526510786, "post_id": 50370425, "comment_id": 87778053, "body": "Let me try that."}], "tags": [], "owner": {"reputation": 231, "user_id": 6777826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpGOd.jpg?s=128&g=1", "display_name": "NameError", "link": "https://stackoverflow.com/users/6777826/nameerror"}, "is_accepted": false, "score": 1, "last_activity_date": 1526472172, "creation_date": 1526472172, "answer_id": 50370425, "question_id": 50361298, "link": "https://stackoverflow.com/questions/50361298/how-to-write-logs-from-separate-package-to-separate-file/50370425#50370425", "title": "How to write logs from separate package to separate file", "body": "<p>If you use <a href=\"https://github.com/sirupsen/logrus\" rel=\"nofollow noreferrer\"><code>logrus</code></a> it might be useful <a href=\"https://github.com/rifflock/lfshook\" rel=\"nofollow noreferrer\">https://github.com/rifflock/lfshook</a></p>\n"}], "owner": {"reputation": 13087, "user_id": 2062973, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/GD1pm.png?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/2062973/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526472172, "creation_date": 1526434896, "question_id": 50361298, "link": "https://stackoverflow.com/questions/50361298/how-to-write-logs-from-separate-package-to-separate-file", "title": "How to write logs from separate package to separate file", "body": "<p>Here, I have an app which has multiple packages underneath and I don't want to write the logs into one file. Say for eg:</p>\n\n<pre><code>   src/packageA/snmp.go\n   src/packageA/http.go\n</code></pre>\n\n<p>I want to write the logs from snmp.go to <code>/var/log/snmp.log</code> and <code>http.go</code> to <code>/var/log/http.log</code></p>\n\n<p>James</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 3101618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVzQf.jpg?s=128&g=1", "display_name": "alqz", "link": "https://stackoverflow.com/users/3101618/alqz"}, "is_accepted": false, "score": 2, "last_activity_date": 1526422436, "creation_date": 1526422436, "answer_id": 50359879, "question_id": 50359680, "link": "https://stackoverflow.com/questions/50359680/using-provided-cli-for-a-go-library/50359879#50359879", "title": "Using provided CLI for a Go library", "body": "<p>I figured it out.</p>\n\n<p>For arbitrary Go source code, one can just do <code>go build</code> in the directory.</p>\n\n<p>For this case, there was a sub-directory called <code>cmd</code>, and after running <code>go build</code> there, one gets a <code>siva</code> executable.</p>\n"}], "owner": {"reputation": 49, "user_id": 3101618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVzQf.jpg?s=128&g=1", "display_name": "alqz", "link": "https://stackoverflow.com/users/3101618/alqz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526422436, "creation_date": 1526421231, "question_id": 50359680, "link": "https://stackoverflow.com/questions/50359680/using-provided-cli-for-a-go-library", "title": "Using provided CLI for a Go library", "body": "<p>I would like to extract files compressed using the \"siva\" file format. Their library is written in Go and can be obtained using</p>\n\n<pre><code>go get -u gopkg.in/src-d/go-siva.v1/...\n</code></pre>\n\n<p>Apparently, they have also provided a command line interface. Given some Go package obtained using <code>go get</code>, how does one use the CLI? What am I missing here?</p>\n\n<p>Here is the Github repo: <a href=\"https://github.com/src-d/go-siva#cli\" rel=\"nofollow noreferrer\">https://github.com/src-d/go-siva#cli</a>.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["image", "go", "jpeg"], "comments": [{"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 1, "creation_date": 1526417877, "post_id": 50358935, "comment_id": 87734785, "body": "I&#39;m not familiar with Go, so does it need a base-64 decode in there for the base-64-encoded image?"}, {"owner": {"reputation": 139, "user_id": 7903682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2bb447d483be033ad6bf17197bd6c7ae?s=128&d=identicon&r=PG&f=1", "display_name": "user7903682", "link": "https://stackoverflow.com/users/7903682/user7903682"}, "edited": false, "score": 0, "creation_date": 1526418394, "post_id": 50358935, "comment_id": 87735011, "body": "it does. Under <code>xml_parser.go</code>, it returns a <code>[]byte</code>."}, {"owner": {"reputation": 139, "user_id": 7903682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2bb447d483be033ad6bf17197bd6c7ae?s=128&d=identicon&r=PG&f=1", "display_name": "user7903682", "link": "https://stackoverflow.com/users/7903682/user7903682"}, "reply_to_user": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 0, "creation_date": 1526418420, "post_id": 50358935, "comment_id": 87735022, "body": "@AndrewMorton you might be right! How do you know it&#39;s base64 encoded?"}, {"owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "edited": false, "score": 0, "creation_date": 1526418584, "post_id": 50358935, "comment_id": 87735082, "body": "@user7903682 I decoded &quot;&quot;/9j/4AAQSkZJRg==&quot; and got &quot;???? JFIF&quot; and the &quot;JFIF&quot; gave it away."}, {"owner": {"reputation": 139, "user_id": 7903682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2bb447d483be033ad6bf17197bd6c7ae?s=128&d=identicon&r=PG&f=1", "display_name": "user7903682", "link": "https://stackoverflow.com/users/7903682/user7903682"}, "edited": false, "score": 0, "creation_date": 1526418872, "post_id": 50358935, "comment_id": 87735198, "body": "that was it! thanks"}], "answers": [{"tags": [], "owner": {"reputation": 20736, "user_id": 1115360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMQGl.png?s=128&g=1", "display_name": "Andrew Morton", "link": "https://stackoverflow.com/users/1115360/andrew-morton"}, "is_accepted": true, "score": 0, "last_activity_date": 1526424076, "creation_date": 1526424076, "answer_id": 50360112, "question_id": 50358935, "link": "https://stackoverflow.com/questions/50358935/invalid-jpeg-format-missing-soi-marker/50360112#50360112", "title": "invalid JPEG format: missing SOI marker", "body": "<p>The data for the image that you show appears to be base-64 encoded.</p>\n\n<p>Base-64 decoding \"/9j/4AAQSkZJRg==\" (the \"==\" pads it to a correct length) gives \"???? JFIF\". The important hint is the \"JFIF\", which shows that the image data is indeed base-64 encoded.</p>\n\n<p>To get the image, you need to base-64 decode the string that represents the image data.</p>\n"}, {"tags": [], "owner": {"reputation": 19087, "user_id": 900130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/m5mjk.jpg?s=128&g=1", "display_name": "Zolt&#225;n", "link": "https://stackoverflow.com/users/900130/zolt%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1595067205, "creation_date": 1595067205, "answer_id": 62967303, "question_id": 50358935, "link": "https://stackoverflow.com/questions/50358935/invalid-jpeg-format-missing-soi-marker/62967303#62967303", "title": "invalid JPEG format: missing SOI marker", "body": "<p>I encountered this issue because I was using an Imgur link to the image <strong>page</strong> (e.g. <a href=\"https://imgur.com/VXM2I36\" rel=\"nofollow noreferrer\">https://imgur.com/VXM2I36</a>), instead of the actual URL of the image (like <a href=\"https://i.imgur.com/VXM2I36.jpg\" rel=\"nofollow noreferrer\">https://i.imgur.com/VXM2I36.jpg</a>).</p>\n<p>Part of the problem is that the &quot;Copy link&quot; button on Imgur does not actually give a direct link to the image, as noted in <a href=\"https://webapps.stackexchange.com/a/95898/48535\">this answer</a>.</p>\n"}], "owner": {"reputation": 139, "user_id": 7903682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2bb447d483be033ad6bf17197bd6c7ae?s=128&d=identicon&r=PG&f=1", "display_name": "user7903682", "link": "https://stackoverflow.com/users/7903682/user7903682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5451, "favorite_count": 0, "accepted_answer_id": 50360112, "answer_count": 2, "score": 1, "last_activity_date": 1595067205, "creation_date": 1526417213, "question_id": 50358935, "link": "https://stackoverflow.com/questions/50358935/invalid-jpeg-format-missing-soi-marker", "title": "invalid JPEG format: missing SOI marker", "body": "<p>Trying to decode an image and write to a file.</p>\n\n<p>This is my code:</p>\n\n<pre><code>package main\n\nimport (\n        \"bytes\"\n        \"fmt\"\n        \"github.com/reteps/gopowerschool\"\n        \"image/jpeg\"\n)\n\nfunc main() {\n        client := gopowerschool.Client(\"https://example.com\")\n        session, userID, err := client.CreateUserSessionAndStudent(\"username\", \"password\")\n        if err != nil {\n                panic(err)\n        }   \n        response, err := client.GetStudentPhoto(&amp;gopowerschool.GetStudentPhoto{UserSessionVO: session, StudentID: userID})\n        if err != nil {\n                panic(err)\n        }   \n        fmt.Println(string(response.Return_))\n        image, err := jpeg.Decode(bytes.NewReader(response.Return_))\n        if err != nil {\n                panic(err)\n        }   \n        fmt.Println(image)\n\n}\n</code></pre>\n\n<p>The image is:</p>\n\n<pre><code>/9j/4AAQSkZJRg....VNpSP8f6VmE4oopks//Z\n</code></pre>\n\n<p>It is giving me an error when I try to decode the []byte of the image. </p>\n\n<pre><code>panic: invalid JPEG format: missing SOI marker\n</code></pre>\n"}, {"tags": ["go", "prometheus"], "answers": [{"tags": [], "owner": {"reputation": 24634, "user_id": 83591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuiTl.jpg?s=128&g=1", "display_name": "brian-brazil", "link": "https://stackoverflow.com/users/83591/brian-brazil"}, "is_accepted": false, "score": 1, "last_activity_date": 1526416450, "creation_date": 1526416450, "answer_id": 50358762, "question_id": 50358723, "link": "https://stackoverflow.com/questions/50358723/prometheus-timestamp-with-too-many-characters/50358762#50358762", "title": "Prometheus TimeStamp with too many characters", "body": "<p>Prometheus timestamps are in milliseconds.</p>\n"}, {"tags": [], "owner": {"reputation": 4567, "user_id": 1318734, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/S3JJ2.gif?s=128&g=1", "display_name": "rofls", "link": "https://stackoverflow.com/users/1318734/rofls"}, "is_accepted": false, "score": 0, "last_activity_date": 1526417737, "creation_date": 1526417737, "answer_id": 50359042, "question_id": 50358723, "link": "https://stackoverflow.com/questions/50358723/prometheus-timestamp-with-too-many-characters/50359042#50359042", "title": "Prometheus TimeStamp with too many characters", "body": "<p>You can use <code>time.Second/time.Millisecond</code> to convert from <code>Milliseconds</code> to <code>Seconds</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    fmt.Println(time.Unix(1526415583412/int64(time.Second/time.Millisecond),0))\n}\n</code></pre>\n\n<p>Prints <code>2018-05-15 20:19:43 +0000 UTC</code></p>\n\n<p>Or, just divide by 1000.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    fmt.Println(time.Unix(1526415583412/1000,0))\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3347598, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/69b06eca0a0dc2b73aaf222bfe019b08?s=128&d=identicon&r=PG&f=1", "display_name": "user3347598", "link": "https://stackoverflow.com/users/3347598/user3347598"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1615847020, "creation_date": 1526416244, "last_edit_date": 1615847020, "question_id": 50358723, "link": "https://stackoverflow.com/questions/50358723/prometheus-timestamp-with-too-many-characters", "title": "Prometheus TimeStamp with too many characters", "body": "<p>I am using the go remote writer here: <a href=\"https://github.com/prometheus/prometheus/blob/master/documentation/examples/remote_storage/example_write_adapter/server.go\" rel=\"nofollow noreferrer\">https://github.com/prometheus/prometheus/blob/master/documentation/examples/remote_storage/example_write_adapter/server.go</a></p>\n<p>This line</p>\n<pre><code>fmt.Printf(&quot;  %f %d\\n&quot;, s.Value, s.Timestamp)\n</code></pre>\n<p>Prints this timestamp 1526415583412 and it's date is 9/3/50340\nWhich is impossible.\nBut if a remove three characters it works\n1526415583</p>\n"}, {"tags": ["pointers", "winapi", "go"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1526425757, "post_id": 50358533, "comment_id": 87737249, "body": "@BenVoigt you are right, I meant 1 MB (1024 KB), not 1 KB"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9795788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106c5014c62e9d6f058c337c9da0e04e?s=128&d=identicon&r=PG&f=1", "display_name": "vlasta", "link": "https://stackoverflow.com/users/9795788/vlasta"}, "edited": false, "score": 0, "creation_date": 1526458370, "post_id": 50360183, "comment_id": 87747343, "body": "Ok, so the point is, that you cast pointer to static array and then create slice of it. However the slice in the example has the same, big length, as array, so the underlying code has to know how to find the real length, in this case <code>syscall.UTF16ToString</code> searches for the zero and then re-slices slice to correct length. Right?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 23, "user_id": 9795788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106c5014c62e9d6f058c337c9da0e04e?s=128&d=identicon&r=PG&f=1", "display_name": "vlasta", "link": "https://stackoverflow.com/users/9795788/vlasta"}, "edited": false, "score": 0, "creation_date": 1526484999, "post_id": 50360183, "comment_id": 87766130, "body": "@vlasta: yes, when you use his pattern you have to treat the slice like you would an array in C and not count on the length. If the length is known at the time, you&#39;ll often see it the length and capacity set immediately so that it can be safely used as a regular slice."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 2, "last_activity_date": 1526424613, "creation_date": 1526424613, "answer_id": 50360183, "question_id": 50358533, "link": "https://stackoverflow.com/questions/50358533/why-is-a-buffer-used-in-win32-api-syscall-cast-to-120type-array/50360183#50360183", "title": "Why is a buffer used in Win32 API syscall cast to [1&lt;&lt;20]&lt;type&gt; array?", "body": "<p>You need to choose a static size for the array type, so <code>1&lt;&lt;20</code> is chosen to be large enough to allow for any reasonable buffer returned by the call.</p>\n\n<p>There is nothing special about this size, sometimes you'll see <code>1&lt;&lt;31-1</code> since it's the largest array for 32bit platforms, or <code>1&lt;&lt;30</code> since it looks nicer. It really doesn't matter as long as the type can contain the returned data.</p>\n"}], "owner": {"reputation": 23, "user_id": 9795788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106c5014c62e9d6f058c337c9da0e04e?s=128&d=identicon&r=PG&f=1", "display_name": "vlasta", "link": "https://stackoverflow.com/users/9795788/vlasta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 1, "accepted_answer_id": 50360183, "answer_count": 1, "score": 2, "last_activity_date": 1526424613, "creation_date": 1526415359, "last_edit_date": 1526416253, "question_id": 50358533, "link": "https://stackoverflow.com/questions/50358533/why-is-a-buffer-used-in-win32-api-syscall-cast-to-120type-array", "title": "Why is a buffer used in Win32 API syscall cast to [1&lt;&lt;20]&lt;type&gt; array?", "body": "<p>I'm writing a golang application which interacts with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms685141(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows Services</a>  using the <a href=\"https://godoc.org/golang.org/x/sys/windows/svc\" rel=\"nofollow noreferrer\">windows/svc</a> package.</p>\n\n<p>When I'm looking at the package source code how syscalls are being done I see interesting cast construct:</p>\n\n<pre><code>name := syscall.UTF16ToString((*[1 &lt;&lt; 20]uint16)(unsafe.Pointer(s.ServiceName))[:]\n</code></pre>\n\n<p>Extracted from <a href=\"https://github.com/golang/sys/blob/master/windows/svc/mgr/mgr.go\" rel=\"nofollow noreferrer\">mgr.go</a></p>\n\n<p>This is a common patttern when dealing with Win32 API when one needs to pass a pre-allocated buffer to receive a value from Win32 API function, usually an array or a structure.</p>\n\n<p>I understand that Win API returns a unicode string represented by its pointer and it is passed to the <code>syscall.UTF16ToString(s []uint16)</code> function to convert it to the go string in this case.</p>\n\n<p>I'm confused from the part when an unsafe pointer is cast to the pointer to 1M array, <code>*[1&lt;&lt;20]uint16</code>. </p>\n\n<p>Why the size if 1M [1&lt;&lt;20]? </p>\n\n<p>Buffer for a value is allocated dynamically, not with fixed size of 1M. </p>\n"}, {"tags": ["go", "filepath"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1526413603, "post_id": 50357839, "comment_id": 87732751, "body": "Is the secret always going to start with <code>allusers&#47;user&#47;home&#47;...</code>? Is this a URL or a file path?"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1526413605, "post_id": 50357839, "comment_id": 87732753, "body": "What exactly are you asking? What do you expect as an answer besides &quot;yes&quot; or &quot;no&quot;?"}, {"owner": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "edited": false, "score": 0, "creation_date": 1526413914, "post_id": 50357839, "comment_id": 87732916, "body": "Technically, it is a key in AWS S3 bucket. So, it is a file path and sometimes considered urls too for this sake. I was more looking for something that utilized &quot;path/filepath&quot; package but could not find any."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1781434"}, "edited": false, "score": 0, "creation_date": 1526415100, "post_id": 50357839, "comment_id": 87733473, "body": "May be more suited for the codereview forum?"}], "answers": [{"comments": [{"owner": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "edited": false, "score": 0, "creation_date": 1526499481, "post_id": 50358846, "comment_id": 87773646, "body": "Nice answer too about not using strings. This answer would be great if the prefix was always fixed. Unfortunately, it is not always fixed and a folder is the only thing known in advance. It is great for known file paths."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "edited": false, "score": 0, "creation_date": 1526500267, "post_id": 50358846, "comment_id": 87773995, "body": "@Godfrey You can adapt it to find the index of the base directory in <code>secret_paths</code> and return a slice of <code>secret_paths</code> from that point onward. It&#39;s generally easier to work with paths as arrays."}, {"owner": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "edited": false, "score": 0, "creation_date": 1526501026, "post_id": 50358846, "comment_id": 87774339, "body": "Good idea. Either way, your answer is still insightful whether I accept it or not in the end. My strings failed miserably when the complexity increased."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1526416760, "creation_date": 1526416760, "answer_id": 50358846, "question_id": 50357839, "link": "https://stackoverflow.com/questions/50357839/change-filename-path-directory/50358846#50358846", "title": "Change filename path directory", "body": "<p>The rule of thumb is <strong><em>do not manipulate file paths as strings</em></strong>. There's too many edge cases. Go has the <a href=\"https://golang.org/pkg/path/\" rel=\"nofollow noreferrer\">path</a> and <a href=\"https://golang.org/pkg/path/filepath/\" rel=\"nofollow noreferrer\">filepath</a> libraries to manipulate paths.</p>\n\n<p>But there are exceptions. Go's <code>path</code> and <code>filepath</code> libraries are limited in their functionality, like it lacks a way to split a path into an array or check if one file path is a child of another. Sometimes it's far more efficient to use string functions. You can avoid a lot of problems by first calling <a href=\"https://golang.org/pkg/path/filepath/#Clean\" rel=\"nofollow noreferrer\"><code>filepath.Clean</code></a> on them to normalize them.</p>\n\n<p>If the prefix is always <code>allusers/user/home</code> then you can split the paths into slices, after cleaning them, and compare them as arrays.</p>\n\n<pre><code>// Clean will take care of // and trailing /\nsecret := filepath.Clean(\"allusers//user/home//path/to/file\")\nbase   := filepath.Clean(\"allusers/user/home/\")\n\n// Clean has made splitting on / safe.\nsecret_parts := strings.Split(secret, \"/\")\nbase_parts   := strings.Split(base, \"/\")\n</code></pre>\n\n<p>Now we have two arrays of all the pieces to compare. First, check to make sure that <code>base_parts</code> is really the prefix of <code>secret_parts</code> with <a href=\"https://golang.org/pkg/reflect/#DeepEqual\" rel=\"nofollow noreferrer\"><code>reflect.DeepEqual</code></a> on just the first few elements of <code>secret_parts</code>. The same number as in <code>base_parts</code>.</p>\n\n<pre><code>func sliceHasPrefix( s, prefix []string  ) bool {\n    if len(s) &lt; len(prefix) {\n        return false\n    }\n\n    return reflect.DeepEqual(prefix, s[0:len(prefix)])\n}\n</code></pre>\n\n<p>Then we can use <a href=\"https://golang.org/pkg/path/filepath/#Join\" rel=\"nofollow noreferrer\"><code>filepath.Join</code></a> to put the remaining parts back together.</p>\n\n<pre><code>if sliceHasPrefix( secret_parts, base_parts ) {\n    fmt.Println( filepath.Join(secret_parts[len(base_parts):]...) )\n} else {\n    panic(\"secret is not inside base\")\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "edited": false, "score": 0, "creation_date": 1526498984, "post_id": 50359223, "comment_id": 87773410, "body": "Great answer! please update your answer to match the first instance of homeDir i.e &quot;allusers/user/home/path/home2/home/to/file&quot;."}], "tags": [], "owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "is_accepted": true, "score": 2, "last_activity_date": 1526503629, "last_edit_date": 1526503629, "creation_date": 1526418673, "answer_id": 50359223, "question_id": 50357839, "link": "https://stackoverflow.com/questions/50357839/change-filename-path-directory/50359223#50359223", "title": "Change filename path directory", "body": "<p>I think a nice platform-independent solution is to use the golang path/filepath Split function.  Does not make assumptions about what path separators look like, handles volumes, etc...</p>\n\n<pre><code>import (\n    \"path/filepath\"\n)\n\nfunc subpath(homeDir, prevDir string) string {\n    subFiles := \"\"\n    for {\n        dir, file := filepath.Split(prevDir)\n        if len(subFiles) &gt; 0 {\n            subFiles = file + string(filepath.Separator) + subFiles\n        } else {\n            subFiles = file\n        }\n        if file == homeDir {\n            break\n        }\n        if len(dir) == 0 || dir == prevDir {\n            break\n        }\n        prevDir = dir[:len(dir) - 1]\n    }\n    return subFiles\n}\n</code></pre>\n\n<p>Call with</p>\n\n<pre><code>subpath(\"home\", \"allusers/user/home/path/to/file\")\n</code></pre>\n\n<p>To handle cases where \"home\" may appear more than once and you wish to match the first:</p>\n\n<pre><code>func subpath(homeDir, prevDir string) (subFiles string, found bool) {\n    for {\n        dir, file := filepath.Split(prevDir)\n        if len(subFiles) &gt; 0 {\n            subFiles = file + string(filepath.Separator) + subFiles\n        } else {\n            subFiles = file\n        }\n        if len(dir) == 0 || dir == prevDir {\n            return\n        }\n        prevDir = dir[:len(dir) - 1]\n        if file == homeDir {\n            found = true\n            // look for it lower down\n            lower, foundAgain := subpath(homeDir, prevDir)\n            if foundAgain {\n                subFiles = lower + string(filepath.Separator) + subFiles\n            }\n            return\n        }\n    }\n}\n</code></pre>\n\n<p>Call with</p>\n\n<pre><code>path, found = subpath(\"home\", \"allusers/user/home/path/home2/home/to/file\")\nif found {\n    fmt.Printf(\"%q\\n\", path)\n} else {\n    fmt.Printf(\"not found\\n\")\n}\n</code></pre>\n"}], "owner": {"reputation": 1704, "user_id": 2912740, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4730dc939ce11655d239d1f54a9cd399?s=128&d=identicon&r=PG&f=1", "display_name": "Edwinner", "link": "https://stackoverflow.com/users/2912740/edwinner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "accepted_answer_id": 50359223, "answer_count": 2, "score": 0, "last_activity_date": 1526503629, "creation_date": 1526412450, "last_edit_date": 1526414964, "question_id": 50357839, "link": "https://stackoverflow.com/questions/50357839/change-filename-path-directory", "title": "Change filename path directory", "body": "<p>I need to change filename paths relative to a given folder.<br>\nI am dealing with multi-user shared buckets and it would be nice for the user not to know the complete file path.</p>\n\n<p>I have an example below but it seems a bit dirty. </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    secretUrl := \"allusers/user/home/path/to/file\"\n    separator := \"home/\"\n\n    newUrl := strings.Split(secretUrl, separator)\n\n    newUserUrl := separator + newUrl[len(newUrl)-1]\n    fmt.Printf(\"%q\\n\", newUserUrl)\n\n}\n</code></pre>\n\n<p>Also, the new path needs to start from the separating point.</p>\n\n<p><strong>Is there another way to do this more elegantly? Examples would be appreciated.</strong></p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 54647, "user_id": 45786, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a7207f83a52e35e43e886c49f6a893a2?s=128&d=identicon&r=PG", "display_name": "TheHippo", "link": "https://stackoverflow.com/users/45786/thehippo"}, "edited": false, "score": 6, "creation_date": 1526390484, "post_id": 50351263, "comment_id": 87718525, "body": "You are using the same variable for all the request. You need a new <code>Out</code> every time <code>YourHandler</code> is called."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1526398102, "post_id": 50351263, "comment_id": 87724200, "body": "This is why global variables are considered evil."}, {"owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "edited": false, "score": 0, "creation_date": 1526488247, "post_id": 50351263, "comment_id": 87768015, "body": "Yes Flimzy, but I thought that once in a separate package, the global variable would be shared as global only in the package which was call, not to all source, so if I have a global variable A in package A and I import this package inside package B and C, I would have an instance of A variable as global inside package B, and another instance of A variable as global for package C."}, {"owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "edited": false, "score": 0, "creation_date": 1526489151, "post_id": 50351263, "comment_id": 87768448, "body": "It&#39;s funny how someone are so good that can downgrade a question and don&#39;t have time to answer it."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "edited": false, "score": 0, "creation_date": 1526392784, "post_id": 50351373, "comment_id": 87720294, "body": "The option to put Out inside as local variable works in this example, but is not an option for my system, because of the complexity of it, there are more than 300 packages and a lot of functions in each one, all of then calling a package to hold the data (like the Out structure) and another one rendering with use this package that hold the structure (to do it as json,xml and so on, as header request), the refactoring will be the last option.  The sync.Mutex worked, but not as concurrent connections, it&#39;s processing one connection per time, with 300 connections per second, it will crash."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "reply_to_user": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "edited": false, "score": 3, "creation_date": 1526417700, "post_id": 50351373, "comment_id": 87734698, "body": "@Sirius It&#39;s time to refactor, then."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 3, "last_activity_date": 1526401654, "last_edit_date": 1526401654, "creation_date": 1526390567, "answer_id": 50351373, "question_id": 50351263, "link": "https://stackoverflow.com/questions/50351263/how-to-make-stateless-connections-with-gorilla-mux/50351373#50351373", "title": "How to make stateless connections with gorilla mux?", "body": "<p>Handlers are called concurrently by the <a href=\"https://godoc.org/net/http#Serve\" rel=\"nofollow noreferrer\">net/http</a> server.  The server creates a goroutine for each client connection and calls handlers on those goroutines.  </p>\n\n<p>The Gorilla Mux is passive with respect to concurrency. The mux calls through to the registered application handler on whatever goroutine the mux is called on.</p>\n\n<p>Use a <a href=\"https://godoc.org/sync#Mutex\" rel=\"nofollow noreferrer\">sync.Mutex</a> to limit execution to one goroutine at a time:</p>\n\n<pre><code>var mu sync.Mutex\n\nfunc YourHandler(w http.ResponseWriter, r *http.Request) {\n    mu.Lock()\n    defer mu.Unlock()\n\n    Clear(&amp;Out.Message)\n    Out.Code = 0\n    ...\n</code></pre>\n\n<p>This is not a good solution given the <code>time.Sleep</code> calls in the handler. The server will process at most one request every 10 seconds. </p>\n\n<p>A better solution is to declare <code>Out</code> as a local variable inside the handler function. With this change, here's no need for the mutex or to clear Out:</p>\n\n<pre><code>func YourHandler(w http.ResponseWriter, r *http.Request) {\n\n    var Out struct {\n        Code     int             `json:\"status\"`\n        Message  []interface{}   `json:\"message\"`\n    }\n\n\n    // w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n    w.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n    ...\n</code></pre>\n\n<p>If it's not possible to move the declaration of <code>Out</code>, then copy the value to a local variable:</p>\n\n<pre><code>func YourHandler(w http.ResponseWriter, r *http.Request) {\n    Out := Out // local Out is copy of package-level Out\n    Clear(&amp;Out.Message)\n    Out.Code = 0\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "edited": false, "score": 0, "creation_date": 1526470752, "post_id": 50360808, "comment_id": 87755664, "body": "I&#39;m familiar with C++ threads, but I understood your point, I don&#39;t want the requests to be synchronize, this will make it run as FIFO and I need to be as threads, as you mentioned, like any other web server do (nginx, apache etc). You gave me the idea to combine both answers, making threads to isolate each call, so my global structure will be for each thread."}], "tags": [], "owner": {"reputation": 61, "user_id": 4564727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c45f88d5fa2da325b3774f84f5ef74e?s=128&d=identicon&r=PG&f=1", "display_name": "Ramil", "link": "https://stackoverflow.com/users/4564727/ramil"}, "is_accepted": false, "score": 0, "last_activity_date": 1526429897, "creation_date": 1526429897, "answer_id": 50360808, "question_id": 50351263, "link": "https://stackoverflow.com/questions/50351263/how-to-make-stateless-connections-with-gorilla-mux/50360808#50360808", "title": "How to make stateless connections with gorilla mux?", "body": "<p>Gorilla Mix uses Go's net/http server to process your http requests. Go creates a Go routine to service each of these incoming requests. If I understand your question correctly, you expect that the Go responses will have your custom status codes in order from 1 to 10 since you were expecting each request coming in synchronously in that order. Go routine's parallelism doesn't guarantee order of execution just like Java threads are if you're familiar with Java. So if Go routines were spawned for each of the requests created in the for 1-to-10 loop then, the routines will execute on its own without regard for order who goes and complete first. Each of these Go routines will serve your requests as it finishes. If you want to control the order of these requests processed in parallel but in order then you can use channels. Look at this link to control synchonization between your 10 Go routines for each of those http requests. <a href=\"https://gobyexample.com/channel-synchronization\" rel=\"nofollow noreferrer\">https://gobyexample.com/channel-synchronization</a> </p>\n"}, {"comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1527793216, "post_id": 50376245, "comment_id": 88272134, "body": "How is this different than what I suggested?"}], "tags": [], "owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "is_accepted": true, "score": 0, "last_activity_date": 1526489517, "creation_date": 1526489517, "answer_id": 50376245, "question_id": 50351263, "link": "https://stackoverflow.com/questions/50351263/how-to-make-stateless-connections-with-gorilla-mux/50376245#50376245", "title": "How to make stateless connections with gorilla mux?", "body": "<p>First I would like to thanks ThunderCat and Ramil for the help, yours answers gave me a north to find the correctly answer.</p>\n\n<p>A short answer is: Go don't have stateless connections, so I can't do what I was looking for.</p>\n\n<p>Once that said, the reason why I think (based on RFC 7230) it doesn't have is because:</p>\n\n<ul>\n<li>In a traditional web server application we have a program that handle the connections (Apache, nginx etc) and open a thread to the routed application, while in Go we have both in same application, so anything global are always shared between connections.</li>\n<li>In languages that may work like Go (the application that opens a port and stay listen it), like C++, they are Object Oriented, so even public variables are inside a class, so you won't share it, since you have to create an instance of the class each time.</li>\n</ul>\n\n<p>Create a thread would resolve the problem, but Go don't have it, instead it have Goroutines, more detail about it in:</p>\n\n<p><a href=\"https://translate.google.com/translate?sl=ko&amp;tl=en&amp;u=https%3A%2F%2Ftech.ssut.me%2F2017%2F08%2F20%2Fgoroutine-vs-threads%2F\" rel=\"nofollow noreferrer\">https://translate.google.com/translate?sl=ko&amp;tl=en&amp;u=https%3A%2F%2Ftech.ssut.me%2F2017%2F08%2F20%2Fgoroutine-vs-threads%2F</a></p>\n\n<p>After days on that and the help here, I'll fix it changing my struct to type and put it local, like that:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"github.com/gorilla/mux\"\n    \"github.com/rs/cors\"\n    \"net/http\"\n    \"reflect\"\n    \"time\"\n)\n\ntype Out struct {\n    Code     int             `json:\"status\"`\n    Message  []interface{}   `json:\"message\"`\n}\n\nfunc Clear(v interface{}) {\n    p := reflect.ValueOf(v).Elem()\n    p.Set(reflect.Zero(p.Type()))\n}\n\nfunc YourHandler(w http.ResponseWriter, r *http.Request) {\n    localOut := Out{0,nil}\n\n    // w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n    w.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n    w.Header().Set(\"Access-Control-Allow-Headers\",\"Content-Type,access-control-allow-origin, access-control-allow-headers\")\n    w.WriteHeader(http.StatusOK)\n\n    for i:=0; i&lt;10; i++ {\n        localOut.Code = localOut.Code + 1\n        localOut.Message = append(localOut.Message, \"Running...\")\n        time.Sleep(1000 * time.Millisecond)\n\n        if err := json.NewEncoder(w).Encode(localOut)\n        err != nil {\n            http.Error(w, err.Error(), http.StatusInternalServerError)\n        }\n    }\n}\n\nfunc main() {\n    r := mux.NewRouter()\n    r.StrictSlash(true);\n\n    r.HandleFunc(\"/\", YourHandler)\n\n    handler := cors.New(cors.Options{\n        AllowedOrigins: []string{\"*\"},\n        AllowCredentials: true,\n        Debug: true,\n        AllowedHeaders: []string{\"X-Session-Token\",\"Content-Type\"},\n        AllowedMethods: []string{\"GET\",\"POST\",\"PUT\",\"DELETE\"},\n    }).Handler(r)\n\n    fmt.Println(\"Working in localhost:5000\")\n    http.ListenAndServe(\":5000\", handler)\n}\n</code></pre>\n\n<p>Of course that will take some weeks, so for now I put my application behind nginx and now it works as expected.</p>\n"}], "owner": {"reputation": 345, "user_id": 5794664, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c95b96e32d07551da1356a7b7fc9762?s=128&d=identicon&r=PG&f=1", "display_name": "Sirius", "link": "https://stackoverflow.com/users/5794664/sirius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 1, "accepted_answer_id": 50376245, "answer_count": 3, "score": -1, "last_activity_date": 1526489517, "creation_date": 1526390204, "last_edit_date": 1526390523, "question_id": 50351263, "link": "https://stackoverflow.com/questions/50351263/how-to-make-stateless-connections-with-gorilla-mux", "title": "How to make stateless connections with gorilla mux?", "body": "<p>My program are running fine with one connection per time, but not with concurrent connections.</p>\n\n<p>I need all connections being rendered by one function, which will have all data I need in my service, and that is not working fine, so I ilustrated with the simple code below:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"github.com/gorilla/mux\"\n    \"github.com/rs/cors\"\n    \"net/http\"\n    \"reflect\"\n    \"time\"\n)\n\nvar Out struct {\n        Code     int             `json:\"status\"`\n        Message  []interface{}   `json:\"message\"`\n}\n\nfunc Clear(v interface{}) {\n    p := reflect.ValueOf(v).Elem()\n    p.Set(reflect.Zero(p.Type()))\n}\n\nfunc YourHandler(w http.ResponseWriter, r *http.Request) {\n    Clear(&amp;Out.Message)\n    Out.Code = 0\n\n    // w.Header().Set(\"Content-Type\", \"application/json; charset=UTF-8\")\n    w.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n    w.Header().Set(\"Access-Control-Allow-Headers\",\"Content-Type,access-control-allow-origin, access-control-allow-headers\")\n    w.WriteHeader(http.StatusOK)\n\n    for i:=0; i&lt;10; i++ {\n        Out.Code = Out.Code + 1\n        Out.Message = append(Out.Message, \"Running...\")\n        time.Sleep(1000 * time.Millisecond)\n\n        if err := json.NewEncoder(w).Encode(Out)\n        err != nil {\n            http.Error(w, err.Error(), http.StatusInternalServerError)\n        }\n    }\n}\n\nfunc main() {\n    r := mux.NewRouter()\n    r.StrictSlash(true);\n\n    r.HandleFunc(\"/\", YourHandler)\n\n    handler := cors.New(cors.Options{\n        AllowedOrigins: []string{\"*\"},\n        AllowCredentials: true,\n        Debug: true,\n        AllowedHeaders: []string{\"Content-Type\"},\n        AllowedMethods: []string{\"GET\"},\n    }).Handler(r)\n\n    fmt.Println(\"Working in localhost:5000\")\n    http.ListenAndServe(\":5000\", handler)\n}\n</code></pre>\n\n<p>If you run this code, you won't see anything wrong in one connection per time, but if you run it in another tab/browser/etc, at same time, because of the delay, the status code will not be from 1 to 10, but it will be shuffled with all calls.</p>\n\n<p>So I guess that means it's not stateless, and I need it to be, so even with 300 connections at same time, it will always return status code from 1 to 10 in each one.</p>\n\n<p>How can I do it? (As I said, it's a simple code, the structure and the render functions are in separeted packages from each other and of all data collection and)</p>\n"}, {"tags": ["go", "websocket"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9051383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NIDE.jpg?s=128&g=1", "display_name": "Holdno", "link": "https://stackoverflow.com/users/9051383/holdno"}, "edited": false, "score": 0, "creation_date": 1526393947, "post_id": 50351090, "comment_id": 87721103, "body": "so, I shuold use error(err := ws.ReadJSON(&amp;msg)) to handle abnormal closing\uff1f"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 11, "user_id": 9051383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NIDE.jpg?s=128&g=1", "display_name": "Holdno", "link": "https://stackoverflow.com/users/9051383/holdno"}, "edited": false, "score": 0, "creation_date": 1526394059, "post_id": 50351090, "comment_id": 87721177, "body": "Given the code that you posted, your application should use the error returned from the read methods to handle <b>all</b> errors.  Delete the close handler."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 3, "last_activity_date": 1526394172, "last_edit_date": 1526394172, "creation_date": 1526389761, "answer_id": 50351090, "question_id": 50350833, "link": "https://stackoverflow.com/questions/50350833/why-it-closed-the-connection-directly-when-time-out-rather-than-call-the-closeha/50351090#50351090", "title": "Why it closed the connection directly when time out rather than call the closeHandler method?", "body": "<p>The <a href=\"https://tools.ietf.org/html/rfc6455\" rel=\"nofollow noreferrer\">websocket RFC</a> says this about status 1006:</p>\n\n<blockquote>\n  <p>1006 is a reserved value and MUST NOT be set as a status code in a\n        Close control frame by an endpoint.  It is designated for use in\n        applications expecting a status code to indicate that the\n        connection was closed abnormally, e.g., without sending or\n        receiving a Close control frame.</p>\n</blockquote>\n\n<p>The <a href=\"https://godoc.org/github.com/gorilla/websocket#Conn.SetCloseHandler\" rel=\"nofollow noreferrer\">websocket package documention</a> says:</p>\n\n<blockquote>\n  <p>SetCloseHandler sets the handler for close messages received from the peer</p>\n</blockquote>\n\n<p>The close handler was not called because a close message was not received. The peer closed the connection without sending a close message.</p>\n\n<p>The package documentation also says:</p>\n\n<blockquote>\n  <p>The connection read methods return a CloseError when a close message is received. Most applications should handle close messages as part of their normal error handling. Applications should only set a close handler when the application must perform some action before sending a close message back to the peer.</p>\n</blockquote>\n\n<p>Because the handler in the question does not send a close message or take any other action, the close handler in the question is not needed.  The handler is harmful because it does not echo the close message. </p>\n\n<p>Delete the close handler and handle close messages as part of the application's normal error handling.</p>\n"}], "owner": {"reputation": 11, "user_id": 9051383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NIDE.jpg?s=128&g=1", "display_name": "Holdno", "link": "https://stackoverflow.com/users/9051383/holdno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50351090, "answer_count": 1, "score": 0, "last_activity_date": 1526394172, "creation_date": 1526389038, "last_edit_date": 1526389113, "question_id": 50350833, "link": "https://stackoverflow.com/questions/50350833/why-it-closed-the-connection-directly-when-time-out-rather-than-call-the-closeha", "title": "Why it closed the connection directly when time out rather than call the closeHandler method?", "body": "<p>Why it closed the connection directly when time out rather than call the closeHandler method?</p>\n\n<pre><code>ws.SetCloseHandler(func(code int, text string) error {\n    fmt.Println(\"socket close\")\n}\n// can not get \"socket close\"\nstdout: \"websocket: close 1006 (abnormal closure): unexpected EOF\"\n</code></pre>\n\n<p>package: \"github.com/gorilla/websocket\" </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "edited": false, "score": 0, "creation_date": 1526388582, "post_id": 50350433, "comment_id": 87717114, "body": "is it related to <a href=\"https://blog.golang.org/slices#TOC_4\" rel=\"nofollow noreferrer\">blog.golang.org/slices#TOC_4</a>. ?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1526396874, "post_id": 50350433, "comment_id": 87723326, "body": "Please forget the whole notion of &quot;pass by reference&quot; when thinking about Go: It is not helpful and never correct. Everything is always passed by value in Go. Some values like slices do not &quot;own&quot; all data accessible through it. Slice values are such values: A slice does not own its elements. The slice is passed by value, the elements are not passed at all. See: No pass by reference anywhere."}], "answers": [{"tags": [], "owner": {"reputation": 2462, "user_id": 5006325, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TpZdZ.jpg?s=128&g=1", "display_name": "Viktor Simk&#243;", "link": "https://stackoverflow.com/users/5006325/viktor-simk%c3%b3"}, "is_accepted": true, "score": 6, "last_activity_date": 1526396360, "last_edit_date": 1526396360, "creation_date": 1526388592, "answer_id": 50350675, "question_id": 50350433, "link": "https://stackoverflow.com/questions/50350433/passing-arrays-as-function-arguments/50350675#50350675", "title": "Passing arrays as function arguments", "body": "<p>In Go <code>[]byte</code> is not an array, it's a byte slice.</p>\n\n<p>What happened is that the size of <code>a</code> was 2, and because of that, after its first element was changed to 3, <code>append</code> allocated a new bigger slice - and <code>t</code> was set to the address of the new slice that was allocated, but that doesn't affect the <code>a</code> in <code>main</code>.</p>\n\n<p>From <a href=\"https://tour.golang.org/moretypes/15\" rel=\"nofollow noreferrer\">A Tour of Go</a> about <code>append</code>: </p>\n\n<blockquote>\n  <p>If the backing array of s is too small to fit all the given values a bigger array will be allocated. The returned slice will point to the newly allocated array.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8303, "user_id": 3165602, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8b194cca5dcf6906c0911564bfb4166c?s=128&d=identicon&r=PG", "display_name": "Oleg Sklyar", "link": "https://stackoverflow.com/users/3165602/oleg-sklyar"}, "is_accepted": false, "score": 1, "last_activity_date": 1526395547, "last_edit_date": 1526395547, "creation_date": 1526388831, "answer_id": 50350762, "question_id": 50350433, "link": "https://stackoverflow.com/questions/50350433/passing-arrays-as-function-arguments/50350762#50350762", "title": "Passing arrays as function arguments", "body": "<p>The slice header is passed by value, but it references the same backing array. So when you change the first value it is changed in the original array as well. When you call <code>append</code> a new slice header is generated and written to the space occupied by the original argument value thus staying local to the method.</p>\n"}], "owner": {"reputation": 355, "user_id": 1283658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bc0d9019c71a5620e823caaee1edbb0?s=128&d=identicon&r=PG", "display_name": "P.An", "link": "https://stackoverflow.com/users/1283658/p-an"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 50350675, "answer_count": 2, "score": 3, "last_activity_date": 1526396360, "creation_date": 1526387931, "last_edit_date": 1526388479, "question_id": 50350433, "link": "https://stackoverflow.com/questions/50350433/passing-arrays-as-function-arguments", "title": "Passing arrays as function arguments", "body": "<p>I expected the following code snippet either to produce <code>a</code> as <code>{0x01, 0x02}</code> (pass by value) or as <code>{0x03, 0x02, 0x01}</code> (pass by reference). Strangely, it produces the output as <code>{0x03, 0x02}</code>. Could you please help me understand why is that?</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc test1(t []byte) {\n    t[0] = 0x03\n    t = append(t, 0x01 )\n}\n\nfunc main() {\n    a := []byte{0x01, 0x02 }\n    test1(a)\n    _ = a\n    fmt.Printf(\"%v\", a)\n}\n</code></pre>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 1, "creation_date": 1526386961, "post_id": 50350010, "comment_id": 87715895, "body": "It is not a valid json that&#39;s the reason first convert it into valid json and then parse it."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526388838, "post_id": 50350010, "comment_id": 87717294, "body": "That JSON cannot be parsed at all, let alone easily, because it&#39;s invalid."}, {"owner": {"reputation": 75, "user_id": 9546749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ea767689874e11b4703b8ed4c6126e?s=128&d=identicon&r=PG&f=1", "display_name": "Ice3man", "link": "https://stackoverflow.com/users/9546749/ice3man"}, "edited": false, "score": 0, "creation_date": 1526396265, "post_id": 50350010, "comment_id": 87722893, "body": "Json is not invalid. Each line contains a separate Json object actually."}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 1, "creation_date": 1526401493, "post_id": 50350010, "comment_id": 87726325, "body": "Note that the document at the URL in the question contains a text file with <a href=\"https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON\" rel=\"nofollow noreferrer\">line-delimited JSON</a> (i.e. one JSON document per line)."}, {"owner": {"reputation": 75, "user_id": 9546749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ea767689874e11b4703b8ed4c6126e?s=128&d=identicon&r=PG&f=1", "display_name": "Ice3man", "link": "https://stackoverflow.com/users/9546749/ice3man"}, "edited": false, "score": 0, "creation_date": 1526437587, "post_id": 50350010, "comment_id": 87739672, "body": "Sorry, by mistake i posted wrong json"}], "answers": [{"tags": [], "owner": {"reputation": 2610, "user_id": 563158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4b4b8b7fa59c8b18038b56613e342a82?s=128&d=identicon&r=PG", "display_name": "Nebril", "link": "https://stackoverflow.com/users/563158/nebril"}, "is_accepted": false, "score": 2, "last_activity_date": 1526387187, "creation_date": 1526387187, "answer_id": 50350190, "question_id": 50350010, "link": "https://stackoverflow.com/questions/50350010/parsing-multiple-json-objects-in-go/50350190#50350190", "title": "Parsing multiple JSON objects in Go", "body": "<p>Seems like each line is its own json object.</p>\n\n<p>You may get away with the following code which will structure this output into correct json:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    base := `{\"trolo\":\"lolo\"}\n{\"trolo2\":\"lolo2\"}`\n\n    delimited := strings.Replace(base, \"\\n\", \",\", -1)\n\n    final := \"[\" + delimited + \"]\"\n    fmt.Println(final)\n}\n</code></pre>\n\n<p>You should be able to use <code>encoding/json</code> library on <code>final</code> now.</p>\n"}, {"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": false, "score": 0, "last_activity_date": 1526387325, "creation_date": 1526387325, "answer_id": 50350249, "question_id": 50350010, "link": "https://stackoverflow.com/questions/50350010/parsing-multiple-json-objects-in-go/50350249#50350249", "title": "Parsing multiple JSON objects in Go", "body": "<p>Another option would be to parse each incoming line, line by line, and then add each one to a collection in code (ie a slice)  Go provides a line <a href=\"https://golang.org/pkg/bufio/#Scanner\" rel=\"nofollow noreferrer\">scanner</a> for this.  </p>\n\n<pre><code>yourCollection := []yourObject{}\nscanner := bufio.NewScanner(YOUR_SOURCE)\nfor scanner.Scan() {\n    obj, err := PARSE_JSON_INTO_yourObject(scanner.Text())\n    if err != nil {\n       // something\n    }\n    yourCollection = append(yourCollection, obj)\n}\nif err := scanner.Err(); err != nil {\n    fmt.Fprintln(os.Stderr, \"reading standard input:\", err)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "is_accepted": true, "score": 9, "last_activity_date": 1526394532, "creation_date": 1526394532, "answer_id": 50352805, "question_id": 50350010, "link": "https://stackoverflow.com/questions/50350010/parsing-multiple-json-objects-in-go/50352805#50352805", "title": "Parsing multiple JSON objects in Go", "body": "<p>Assuming your input is really a series of valid JSON documents, use a <a href=\"https://golang.org/pkg/encoding/json/#Decoder\" rel=\"noreferrer\">json.Decoder</a> to decode them:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"strings\"\n)\n\nvar input = `\n{\"foo\": \"bar\"}\n{\"foo\": \"baz\"}\n`\n\ntype Doc struct {\n    Foo string\n}\n\nfunc main() {\n    dec := json.NewDecoder(strings.NewReader(input))\n    for {\n        var doc Doc\n\n        err := dec.Decode(&amp;doc)\n        if err == io.EOF {\n            // all done\n            break\n        }\n        if err != nil {\n            log.Fatal(err)\n        }\n\n        fmt.Printf(\"%+v\\n\", doc)\n    }\n}\n</code></pre>\n\n<p>Playground: <a href=\"https://play.golang.org/p/ANx8MoMC0yq\" rel=\"noreferrer\">https://play.golang.org/p/ANx8MoMC0yq</a></p>\n\n<p>If your input really is what you've shown in the question, that's not JSON and you have to write your own parser.</p>\n"}, {"tags": [], "owner": {"reputation": 208, "user_id": 10900314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F9oY7UuBnIc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaETuwIge2LmhIf7bCunjL89LcEnA/mo/photo.jpg?sz=128", "display_name": "Manoj", "link": "https://stackoverflow.com/users/10900314/manoj"}, "is_accepted": false, "score": 0, "last_activity_date": 1578988127, "creation_date": 1578988127, "answer_id": 59729426, "question_id": 50350010, "link": "https://stackoverflow.com/questions/50350010/parsing-multiple-json-objects-in-go/59729426#59729426", "title": "Parsing multiple JSON objects in Go", "body": "<p>You can read the ndjson from the file row by row and parse it then apply the logical operations on it. In the below sample instead of reading from the file, I have used an Array of JSON string.</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype NestedObject struct {\n    D string\n    E string\n}\n\ntype OuterObject struct {\n    A string\n    B string\n    C []NestedObject\n}\n\nfunc main() {\n\n    myJsonString := []string{`{\"A\":\"1\",\"B\":\"2\",\"C\":[{\"D\":\"100\",\"E\":\"10\"}]}`, `{\"A\":\"11\",\"B\":\"21\",\"C\":[{\"D\":\"1001\",\"E\":\"101\"}]}`}\n    for index, each := range myJsonString {\n        fmt.Printf(\"Index value [%d] is [%v]\\n\", index, each)\n        var obj OuterObject\n        json.Unmarshal([]byte(each), &amp;obj)\n        fmt.Printf(\"a: %v, b: %v, c: %v\", obj.A, obj.B, obj.C)\n        fmt.Println()\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Index value [0] is [{\"A\":\"1\",\"B\":\"2\",\"C\":[{\"D\":\"100\",\"E\":\"10\"}]}]\na: 1, b: 2, c: [{100 10}]\nIndex value [1] is [{\"A\":\"11\",\"B\":\"21\",\"C\":[{\"D\":\"1001\",\"E\":\"101\"}]}]\na: 11, b: 21, c: [{1001 101}]\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/JmhsEqHmIYb\" rel=\"nofollow noreferrer\">Try it on golang play</a></p>\n"}], "owner": {"reputation": 75, "user_id": 9546749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ea767689874e11b4703b8ed4c6126e?s=128&d=identicon&r=PG&f=1", "display_name": "Ice3man", "link": "https://stackoverflow.com/users/9546749/ice3man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3946, "favorite_count": 0, "accepted_answer_id": 50352805, "answer_count": 4, "score": 3, "last_activity_date": 1578988127, "creation_date": 1526386658, "last_edit_date": 1574139927, "question_id": 50350010, "link": "https://stackoverflow.com/questions/50350010/parsing-multiple-json-objects-in-go", "title": "Parsing multiple JSON objects in Go", "body": "<p>Objects like the below can be parsed quite easily using the <code>encoding/json</code> package.</p>\n\n<pre><code>[ \n    {\"something\":\"foo\"},\n    {\"something-else\":\"bar\"}\n]\n</code></pre>\n\n<p>The trouble I am facing is when there are multiple dicts returned from the server like this :</p>\n\n<pre><code>{\"something\":\"foo\"}\n{\"something-else\":\"bar\"}\n</code></pre>\n\n<p>This can't be parsed using the code below.</p>\n\n<pre><code>correct_format := strings.Replace(string(resp_body), \"}{\", \"},{\", -1)\njson_output := \"[\" + correct_format + \"]\"\n</code></pre>\n\n<p>I am trying to parse Common Crawl data (see <a href=\"http://index.commoncrawl.org/CC-MAIN-2018-17-index?url=*.netflix.com&amp;output=json\" rel=\"nofollow noreferrer\">example</a>).</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["pointers", "dictionary", "go", "types", "constructor"], "answers": [{"comments": [{"owner": {"reputation": 14646, "user_id": 299204, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/76b76089c6a9c79573f07123b8050303?s=128&d=identicon&r=PG", "display_name": "lzap", "link": "https://stackoverflow.com/users/299204/lzap"}, "edited": false, "score": 0, "creation_date": 1526381985, "post_id": 50348499, "comment_id": 87712604, "body": "Thanks, I was trying to do this on one line!"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 14646, "user_id": 299204, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/76b76089c6a9c79573f07123b8050303?s=128&d=identicon&r=PG", "display_name": "lzap", "link": "https://stackoverflow.com/users/299204/lzap"}, "edited": false, "score": 0, "creation_date": 1526382204, "post_id": 50348499, "comment_id": 87712741, "body": "@lzap That&#39;s still possible: <code>return &amp;MyType{}</code>, see edited answer. But don&#39;t use pointers to maps, it&#39;s redundant. It is rarely needed."}, {"owner": {"reputation": 14646, "user_id": 299204, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/76b76089c6a9c79573f07123b8050303?s=128&d=identicon&r=PG", "display_name": "lzap", "link": "https://stackoverflow.com/users/299204/lzap"}, "edited": false, "score": 0, "creation_date": 1526384678, "post_id": 50348499, "comment_id": 87714391, "body": "Damn when I try to access my map in a function I get &quot;assignment to entry in nil map&quot;. func (my MyType) MethodName"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 14646, "user_id": 299204, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/76b76089c6a9c79573f07123b8050303?s=128&d=identicon&r=PG", "display_name": "lzap", "link": "https://stackoverflow.com/users/299204/lzap"}, "edited": false, "score": 0, "creation_date": 1526385081, "post_id": 50348499, "comment_id": 87714648, "body": "@lzap Most likely you did not initialize your variable, e.g. <code>var m MyType</code> will leave <code>m</code> be <code>nil</code>."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 5, "last_activity_date": 1526382313, "last_edit_date": 1526382313, "creation_date": 1526381943, "answer_id": 50348499, "question_id": 50348439, "link": "https://stackoverflow.com/questions/50348439/how-to-use-map-as-data-carrier-in-go/50348499#50348499", "title": "How to use map as data carrier in Go?", "body": "<p>The builtin <a href=\"https://golang.org/pkg/builtin/#make\" rel=\"nofollow noreferrer\"><code>make()</code></a> function creates a <strong>non-pointer</strong> value of your <code>MyType</code> map type, yet the return type is a pointer. That's what the error message tells if you try to compile it:</p>\n\n<blockquote>\n  <p>cannot use make(MyType) (type MyType) as type *MyType in return argument</p>\n</blockquote>\n\n<p>If you return a pointer to the value, it works:</p>\n\n<pre><code>type MyType map[string]string\n\nfunc NewMyType() *MyType {\n    m := make(MyType)\n    return &amp;m\n}\n</code></pre>\n\n<p>If you would want to use a single line for it, you could use a <a href=\"https://golang.org/ref/spec#Composite_literals\" rel=\"nofollow noreferrer\">composite literal</a>:</p>\n\n<pre><code>func NewMyType() *MyType {\n    return &amp;MyType{}\n}\n</code></pre>\n\n<p>But maps (map values) are already implement as pointers in the background, so this is redundant and unnecessary. Just return the map-value as-is:</p>\n\n<pre><code>type MyType map[string]string\n\nfunc NewMyType() MyType {\n    return make(MyType)\n}\n</code></pre>\n\n<p>Or with a composite literal:</p>\n\n<pre><code>func NewMyType() MyType {\n    return MyType{}\n}\n</code></pre>\n\n<p>Although \"constructors\" for such simple types (simple creation) are not necessary, unless you want to do other things before returning it (e.g. specify its initial capacity or fill it with initial values).</p>\n"}], "owner": {"reputation": 14646, "user_id": 299204, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/76b76089c6a9c79573f07123b8050303?s=128&d=identicon&r=PG", "display_name": "lzap", "link": "https://stackoverflow.com/users/299204/lzap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50348499, "answer_count": 1, "score": -1, "last_activity_date": 1526382313, "creation_date": 1526381710, "last_edit_date": 1526382070, "question_id": 50348439, "link": "https://stackoverflow.com/questions/50348439/how-to-use-map-as-data-carrier-in-go", "title": "How to use map as data carrier in Go?", "body": "<p>I am unsure about correct terms, but how do I use this:</p>\n\n<pre><code>type MyType map[string]string\n</code></pre>\n\n<p>as \"data carrier\" (or object in OOP)?</p>\n\n<p>This does not work:</p>\n\n<pre><code>func NewMyType() *MyType {\n    return make(MyType)\n}\n</code></pre>\n\n<p>I do want to use pointer but apparently this does not work, the compiler expects reference on return.</p>\n"}, {"tags": ["windows", "go", "gcc", "cgo", "gccgo"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 1831738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ffaad782263b04db1a2afd9c8242718?s=128&d=identicon&r=PG", "display_name": "Hisko", "link": "https://stackoverflow.com/users/1831738/hisko"}, "is_accepted": true, "score": 1, "last_activity_date": 1526383791, "creation_date": 1526383791, "answer_id": 50349080, "question_id": 50347947, "link": "https://stackoverflow.com/questions/50347947/cgo-on-windows-naming-of-loaded-dll/50349080#50349080", "title": "cgo on windows : naming of loaded dll", "body": "<p>I think I found the answer to my question.</p>\n\n<p>I think I can't rename the compiled dll because the dll \"reference\" itself as this name. So it won't load properly.</p>\n\n<p>To resolve my problem I just renamed the parameter in the LDFLAG from <strong>-lrocksdb</strong> to <strong>-lrocksdb-shared</strong> in both my environement variable and in this <a href=\"https://github.com/tecbot/gorocksdb/blob/209fbe7c598c4e5b6da30d90fa1e70f80bb887d7/dynflag.go\" rel=\"nofollow noreferrer\">file</a></p>\n"}], "owner": {"reputation": 153, "user_id": 1831738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ffaad782263b04db1a2afd9c8242718?s=128&d=identicon&r=PG", "display_name": "Hisko", "link": "https://stackoverflow.com/users/1831738/hisko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 50349080, "answer_count": 1, "score": 1, "last_activity_date": 1526383791, "creation_date": 1526380136, "question_id": 50347947, "link": "https://stackoverflow.com/questions/50347947/cgo-on-windows-naming-of-loaded-dll", "title": "cgo on windows : naming of loaded dll", "body": "<p>I am trying to use <a href=\"https://github.com/tecbot/gorocksdb\" rel=\"nofollow noreferrer\">gorocksdb</a> which is a cgo package wapping the rocksdb library on windows.</p>\n\n<ul>\n<li>I built the rocksdb library with vcpkg which gave me as output <strong>rocksdb-shared.dll</strong>. I set the build path to my PATH.</li>\n<li>I installed msys64 in order to have gcc</li>\n<li>I have set <code>CGO_CFLAGS=\"-I/path/to/rocksdb/include\"</code> and\n<code>CGO_LDFLAGS=\"-L/path/to/rocksdb -lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy -llz4 -lzstd\"</code></li>\n<li>I have renammed <strong>rocksdb-shared.dll</strong> to <strong>librocksdb.dll</strong> because the linker requires the dll to start with <code>lib</code></li>\n<li>I do the <code>go get ...</code> command</li>\n<li>I run my test go file and I get the error <code>The programer can't start because rocksdb-shared.dll is missing ...</code></li>\n<li>If I rename it back to <strong>rocksdb-shared.dll</strong> the build fails because the linker can't find <strong>librocksdb.dll</strong></li>\n<li>The only way to make it work is to have both <strong>rocksdb-shared.dll</strong> and <strong>librocksdb.dll</strong> in the PATH</li>\n</ul>\n\n<p>Why the executable keeps loading <strong>rocksdb-shared.dll</strong>? I don't find any reference to it in the cgo package.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1117, "user_id": 4374801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-gKA8GCGfUks/AAAAAAAAAAI/AAAAAAAAI94/IvLw7PF4Zew/photo.jpg?sz=128", "display_name": "Roger Creasy", "link": "https://stackoverflow.com/users/4374801/roger-creasy"}, "edited": false, "score": 3, "creation_date": 1526380610, "post_id": 50347441, "comment_id": 87711809, "body": "Why the downvotes? How can I improve?"}], "answers": [{"tags": [], "owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "is_accepted": true, "score": 8, "last_activity_date": 1526378964, "creation_date": 1526378964, "answer_id": 50347556, "question_id": 50347441, "link": "https://stackoverflow.com/questions/50347441/tls-dial-returns-too-many-colons-in-address/50347556#50347556", "title": "tls.Dial returns &quot;too many colons in address&quot;", "body": "<p>It should be domain name, IPv4 or IPv6 address with port only, not URL.</p>\n\n<pre><code>conn, err := tls.Dial(\"tcp\", \"mail.google.com:443\", &amp;tls.Config{\n    RootCAs: roots,\n})\n</code></pre>\n"}], "owner": {"reputation": 1117, "user_id": 4374801, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-gKA8GCGfUks/AAAAAAAAAAI/AAAAAAAAI94/IvLw7PF4Zew/photo.jpg?sz=128", "display_name": "Roger Creasy", "link": "https://stackoverflow.com/users/4374801/roger-creasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5841, "favorite_count": 0, "accepted_answer_id": 50347556, "answer_count": 1, "score": 5, "last_activity_date": 1526378964, "creation_date": 1526378651, "last_edit_date": 1526378743, "question_id": 50347441, "link": "https://stackoverflow.com/questions/50347441/tls-dial-returns-too-many-colons-in-address", "title": "tls.Dial returns &quot;too many colons in address&quot;", "body": "<p>I am trying to loop through an array of addresses, and check their tls cert status. I pieced together a program from various examples that do other things.</p>\n\n<p>My first step in processing is </p>\n\n<pre><code>conn, err := tls.Dial(\"tcp\", url, nil)\n</code></pre>\n\n<p>where 'url' is passed in from the array (I do import <code>crypto/tls</code>). Before I go on to pulling the cert, I check for errors:</p>\n\n<pre><code>if err != nil { \n    log.Printf(\"Unable to get %q - %s\\n\", url, err)\n    return\n}\n</code></pre>\n\n<p>Here is a snippet of the array (with only test addresses for now):</p>\n\n<pre><code>var urls = []string{\n    \"https://google.com:443\",\n    \"https://expired.badssl.com:443\",\n    \"[https://wrong.host.badssl.com]:443\",\n    \"[https://self-signed.badssl.com]:443\"\n}\n</code></pre>\n\n<p>The first 2 return <code>too many colons in address</code>\nI found a suggestion to fix that using the brackets. The next 2 addresses, with the brackets, return <code>no such host</code></p>\n\n<p>Where is my error?</p>\n"}, {"tags": ["mongodb", "go"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 2, "creation_date": 1526376193, "post_id": 50346585, "comment_id": 87708907, "body": "Questions asking us to <b>recommend or find a book, tool, software library, tutorial or other off-site resource</b> are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, <a href=\"http://meta.stackoverflow.com/questions/254393\">describe the problem</a> and what has been done so far to solve it."}, {"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 1, "creation_date": 1526376310, "post_id": 50346585, "comment_id": 87708995, "body": "If you actually look yourself though, that&#39;s not the &quot;only&quot; option for connecting to MongoDB with Go. 3rd party offerings have been around for years, and they are not in &quot;alpha&quot;, so their API is more stable. I&#39;m sure once &quot;out of Alpha&quot; MongoDB will be happy to expand on their own manual or even &quot;unit tests&quot;, which is usually where I learn about different language implementations. Unit tests usually show you a lot."}], "answers": [{"tags": [], "owner": {"reputation": 57591, "user_id": 1388319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258babf29502a002296bc415851e2395?s=128&d=identicon&r=PG", "display_name": "Stennie", "link": "https://stackoverflow.com/users/1388319/stennie"}, "is_accepted": false, "score": 1, "last_activity_date": 1526386781, "creation_date": 1526386781, "answer_id": 50350057, "question_id": 50346585, "link": "https://stackoverflow.com/questions/50346585/simple-crud-examples-for-alpha-driver-from-mongodb/50350057#50350057", "title": "Simple CRUD examples for alpha driver from MongoDB", "body": "<p>Since the MongoDB Go driver is currently alpha, the documentation is still being worked on. However, you can find examples destined for documentation in the driver's GitHub repo: <a href=\"https://github.com/mongodb/mongo-go-driver/blob/master/examples/documentation_examples/examples.go\" rel=\"nofollow noreferrer\">examples/documentation_examples/examples.go</a>. There is also a test harness in the same directory (<a href=\"https://github.com/mongodb/mongo-go-driver/blob/master/examples/documentation_examples/examples_test.go\" rel=\"nofollow noreferrer\"><code>examples-test.go</code></a>) to ensure all the code examples work as expected.</p>\n\n<p>If you search <code>examples.go</code> for <code>// Start Example</code> you will find snippets of code demarcated with a matching <code>// End Example</code>. The numbering of examples is somewhat opaque, but those are actually standard references used to extract driver code snippets for the MongoDB manual.</p>\n\n<p>In particular, the initial code examples should match up with the tabbed code blocks within the <a href=\"https://docs.mongodb.com/manual/crud/\" rel=\"nofollow noreferrer\">MongoDB CRUD Operations</a> section of the manual.</p>\n\n<p>Using <a href=\"https://github.com/mongodb/mongo-go-driver/blob/master/examples/documentation_examples/examples.go#L55\" rel=\"nofollow noreferrer\"><code>func InsertExamples()</code></a> in <code>examples.go</code> to illustrate:</p>\n\n<ul>\n<li><p>Examples in this function are used by the <a href=\"https://docs.mongodb.com/manual/tutorial/insert-documents/\" rel=\"nofollow noreferrer\">Insert Documents</a> tutorial.</p></li>\n<li><p><a href=\"https://github.com/mongodb/mongo-go-driver/blob/2a25967215f361ca101688d23007a51eb787672d/examples/documentation_examples/examples.go#L65\" rel=\"nofollow noreferrer\">Example 1</a> is <a href=\"https://docs.mongodb.com/manual/tutorial/insert-documents/#insert-a-single-document\" rel=\"nofollow noreferrer\">Insert a Single Document</a>.</p></li>\n<li><p><a href=\"https://github.com/mongodb/mongo-go-driver/blob/2a25967215f361ca101688d23007a51eb787672d/examples/documentation_examples/examples.go#L89\" rel=\"nofollow noreferrer\">Example 2</a> is the <code>find()</code> query to retrieve the document that was just inserted.</p></li>\n<li><p><a href=\"https://github.com/mongodb/mongo-go-driver/blob/2a25967215f361ca101688d23007a51eb787672d/examples/documentation_examples/examples.go#L104\" rel=\"nofollow noreferrer\">Example 3</a> is <a href=\"https://docs.mongodb.com/manual/tutorial/insert-documents/#insert-multiple-documents\" rel=\"nofollow noreferrer\">Insert Multiple Documents</a>.</p></li>\n</ul>\n\n<p>In most cases the order of code examples should follow the order of the code blocks in the documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 9793186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MKEAD.png?s=128&g=1", "display_name": "toc-rox", "link": "https://stackoverflow.com/users/9793186/toc-rox"}, "is_accepted": false, "score": 5, "last_activity_date": 1526566200, "last_edit_date": 1526566200, "creation_date": 1526558072, "answer_id": 50390826, "question_id": 50346585, "link": "https://stackoverflow.com/questions/50346585/simple-crud-examples-for-alpha-driver-from-mongodb/50390826#50390826", "title": "Simple CRUD examples for alpha driver from MongoDB", "body": "<p>@Stennie: Thanks for the detailed explanations. I had seen the mentioned examples already, but they are looking very low level and not Go idiomatic for me. So I came up to this:</p>\n\n<pre><code>// Size defines the item size\ntype Size struct {\n    H   int\n    W   float64\n    Uom string\n}\n\n// Item defines an item\ntype Item struct {\n    OID  objectid.ObjectID `bson:\"_id,omitempty\"` // omitempty not working\n    Item string\n    Qty  int\n    Tags []string\n    Size Size\n}\n\nfunc main() {\n    // connect to MongoDB\n    client, err := mongo.Connect(context.Background(), \"mongodb://localhost:27017\", nil)\n    if err != nil {\n        log.Fatal(err)\n    }\n    db := client.Database(\"mongosample\")\n    inventory := db.Collection(\"inventory\")\n\n    // write document\n    itemWrite := Item{Item: \"canvas\", Qty: 100, Tags: []string{\"cotton\"}, Size: Size{H: 28, W: 35.5, Uom: \"cm\"}}\n    itemWrite.OID = objectid.New()\n    fmt.Printf(\"itemWrite = %v\\n\", itemWrite)\n\n    result, err := inventory.InsertOne(context.Background(), itemWrite)\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Printf(\"result = %#v\\n\", result)\n\n    // read documents\n    cursor, err := inventory.Find(\n        context.Background(),\n        bson.NewDocument(bson.EC.String(\"item\", \"canvas\")),\n    )\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer cursor.Close(context.Background())\n\n    itemRead := Item{}\n    for cursor.Next(context.Background()) {\n        err := cursor.Decode(&amp;itemRead)\n        if err != nil {\n            log.Fatal(err)\n        }\n        fmt.Printf(\"itemRead = %v\\n\", itemRead)\n    }\n}\n</code></pre>\n\n<p>I have no need to control the ObjectID in the application and want to let the driver or database generate the ID on demand. Problem here: I couldn't find a way to omit the ID. This <code>bson:\"_id,omitempty\"</code> isn't working. It leeds to an OID with everything set to zero 'ObjectID(\"000000000000000000000000\")'. Maybe a general problem because ObjectID is an array and not a slice: type ObjectID [12]byte</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10662415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60789e4a40d306c921284d883582f9a4?s=128&d=identicon&r=PG&f=1", "display_name": "Anuraj", "link": "https://stackoverflow.com/users/10662415/anuraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1558949701, "last_edit_date": 1558949701, "creation_date": 1558948103, "answer_id": 56322942, "question_id": 50346585, "link": "https://stackoverflow.com/questions/50346585/simple-crud-examples-for-alpha-driver-from-mongodb/56322942#56322942", "title": "Simple CRUD examples for alpha driver from MongoDB", "body": "<p>I wrote code like this in my recent project and it worked well. Request you to kindly try it out.  </p>\n\n<p>FYI : I am using official Go - <code>Mongo DB driver</code>.</p>\n\n<pre><code>import \"go.mongodb.org/mongo-driver/bson/primitive\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>type Item struct {\n\n    OID  primitive.ObjectID `json:\"id,omitempty\" bson:\"_id,omitempty\"`\n    Item string\n    Qty  int\n    Tags []string\n    Size Size\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9793186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MKEAD.png?s=128&g=1", "display_name": "toc-rox", "link": "https://stackoverflow.com/users/9793186/toc-rox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5330, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1558949701, "creation_date": 1526376136, "last_edit_date": 1526719650, "question_id": 50346585, "link": "https://stackoverflow.com/questions/50346585/simple-crud-examples-for-alpha-driver-from-mongodb", "title": "Simple CRUD examples for alpha driver from MongoDB", "body": "<p>I want to test the Golang MongoDB driver from MongoDB \n(<a href=\"https://github.com/mongodb/mongo-go-driver\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-go-driver</a>, currently in alpha state).</p>\n\n<p>The example in the package documentation (<a href=\"https://godoc.org/github.com/mongodb/mongo-go-driver/mongo\" rel=\"nofollow noreferrer\">https://godoc.org/github.com/mongodb/mongo-go-driver/mongo</a>) isn't very help for me. What I'm looking for are simple (but complete) examples for the basic CRUD operations.</p>\n"}, {"tags": ["go", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "reply_to_user": {"reputation": 403, "user_id": 7294974, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/B26Kl.jpg?s=128&g=1", "display_name": "salamander", "link": "https://stackoverflow.com/users/7294974/salamander"}, "edited": false, "score": 0, "creation_date": 1526378115, "post_id": 50346451, "comment_id": 87710270, "body": "Hey, no problem. Glad I could help."}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": true, "score": 2, "last_activity_date": 1526375766, "creation_date": 1526375766, "answer_id": 50346451, "question_id": 50346123, "link": "https://stackoverflow.com/questions/50346123/unmarshal-yaml-incorrectly/50346451#50346451", "title": "Unmarshal yaml incorrectly?", "body": "<p>You are using <code>json</code> tags instead of <code>yaml</code> tags. Fix your struct definition like this:</p>\n\n<pre><code>type Config struct {\n    Port       int    `yaml:\"port\"`\n    EncryptKey string `yaml:\"encryptKey\"`\n}\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 7294974, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/B26Kl.jpg?s=128&g=1", "display_name": "salamander", "link": "https://stackoverflow.com/users/7294974/salamander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 50346451, "answer_count": 1, "score": -1, "last_activity_date": 1528681869, "creation_date": 1526374713, "last_edit_date": 1528681869, "question_id": 50346123, "link": "https://stackoverflow.com/questions/50346123/unmarshal-yaml-incorrectly", "title": "Unmarshal yaml incorrectly?", "body": "<p>I am using <a href=\"https://github.com/go-yaml/yaml\" rel=\"nofollow noreferrer\">yaml</a> to decode yaml file. However, the result is not as expected.\nThe <code>EncryptKey</code> is not extracted. This is my test code:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n\n    \"gopkg.in/yaml.v2\"\n)\n\nvar data = `\nport: 8080\nencryptKey: \"jfgjfgkfgd\"\n`\n\ntype Config struct {\n    Port       int    `json:\"port\"`\n    EncryptKey string `json:\"encryptKey\"`\n}\n\nfunc main() {\n    t := Config{}\n\n    err := yaml.Unmarshal([]byte(data), &amp;t)\n    if err != nil {\n        log.Fatalf(\"error: %v\", err)\n    }\n    fmt.Printf(\"--- t:\\n%v\\n\\n\", t)\n}\n</code></pre>\n\n<p>I got the result like this:<code>--- t:\n{8080 }</code></p>\n\n<hr>\n\n<p>It's my carelessness. I should use the tag <code>yaml</code> instead of <code>json</code>.</p>\n"}, {"tags": ["go", "hyperledger-fabric", "hyperledger", "hyperledger-composer"], "comments": [{"owner": {"reputation": 3744, "user_id": 4298200, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh5.googleusercontent.com/-HcKtiretO2g/AAAAAAAAAAI/AAAAAAAAAH0/IXGAL7MX8sQ/photo.jpg?sz=128", "display_name": "Neuron", "link": "https://stackoverflow.com/users/4298200/neuron"}, "edited": false, "score": 0, "creation_date": 1526383536, "post_id": 50345793, "comment_id": 87713662, "body": "Welcome to Stack Overflow! You have linked to an external resource which is crucial for understanding your question. It is necessary to include the essential parts of your resource in your question, and ideally to provide the link for reference. Your post should stand alone from any other resource; <a href=\"https://en.wikipedia.org/wiki/Link_rot\" rel=\"nofollow noreferrer\">consider what would happen</a> if that site went down in the future!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9792972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "shiv simplyfi", "link": "https://stackoverflow.com/users/9792972/shiv-simplyfi"}, "edited": false, "score": 0, "creation_date": 1526475283, "post_id": 50348756, "comment_id": 87758805, "body": "Thank you for response..Could u tell me  instead of Javascript  is their any GoLang link...And is there any document or link for getting chain code from composer and GoLang on IBM cloud?"}], "tags": [], "owner": {"reputation": 5435, "user_id": 8944752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b262eef738b17fa75586f41faa853cf1?s=128&d=identicon&r=PG&f=1", "display_name": "R Thatcher", "link": "https://stackoverflow.com/users/8944752/r-thatcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1526480959, "last_edit_date": 1526480959, "creation_date": 1526382784, "answer_id": 50348756, "question_id": 50345793, "link": "https://stackoverflow.com/questions/50345793/i-have-written-code-in-golang-then-how-to-get-chain-code-using-hyper-ledger-fabr/50348756#50348756", "title": "I have written code in GoLang then how to get chain code using Hyper-ledger Fabric Composer?", "body": "<p>Chaincode for Hyperledger Composer is written in Javascript not GoLang. (Though Hyperledger Fabric supports both GoLang and Javascript with V1.1).</p>\n\n<p>If you wish to proceed with Composer and Javascript, you could start with the <a href=\"https://hyperledger.github.io/composer/latest/tutorials/developer-tutorial\" rel=\"nofollow noreferrer\">Developer Tutorial</a>, then follow this document for information on <a href=\"https://hyperledger.github.io/composer/latest/applications/applications-index\" rel=\"nofollow noreferrer\">Developing Applications</a>.</p>\n\n<p><strong>Update following Comment</strong></p>\n\n<p>There is a <a href=\"http://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html\" rel=\"nofollow noreferrer\">Fabric Tutorial \"First Application\"</a> that uses go for the chaincode.</p>\n\n<p>With regard to IBM cloud, it is possible to use Composer Business Networks, or write direct chaincode for the Fabric with IBM Cloud Starter Plan, and there are examples to \"auto\" deploy.</p>\n"}], "owner": {"reputation": 1, "user_id": 9792972, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "shiv simplyfi", "link": "https://stackoverflow.com/users/9792972/shiv-simplyfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1526480959, "creation_date": 1526373552, "last_edit_date": 1526383256, "question_id": 50345793, "link": "https://stackoverflow.com/questions/50345793/i-have-written-code-in-golang-then-how-to-get-chain-code-using-hyper-ledger-fabr", "title": "I have written code in GoLang then how to get chain code using Hyper-ledger Fabric Composer?", "body": "<p>I have set up <strong>composer-rest-server</strong> successfully using <a href=\"https://hyperledger.github.io/composer/latest/tutorials/deploy-to-fabric-single-org\" rel=\"nofollow noreferrer\">this link</a>  on IBM cloud. I have written custom logic code in <strong>GoLang</strong> for getting chain code. I don't know how will proceed for next setup for getting chain code. Could you help me by showing me which way I have to proceed?</p>\n"}, {"tags": ["go", "memory-leaks", "goroutine"], "comments": [{"owner": {"reputation": 2274, "user_id": 7567579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9644beeb1d324d1247b2951d28927?s=128&d=identicon&r=PG", "display_name": "Emin Laletovic", "link": "https://stackoverflow.com/users/7567579/emin-laletovic"}, "edited": false, "score": 1, "creation_date": 1526377251, "post_id": 50345085, "comment_id": 87709653, "body": "could you also add the part of the code where you call these goroutines?"}, {"owner": {"reputation": 1, "user_id": 9792570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec03cc4eae1dd4a5b7ada3b157ef576?s=128&d=identicon&r=PG&f=1", "display_name": "Valera", "link": "https://stackoverflow.com/users/9792570/valera"}, "reply_to_user": {"reputation": 2274, "user_id": 7567579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9644beeb1d324d1247b2951d28927?s=128&d=identicon&r=PG", "display_name": "Emin Laletovic", "link": "https://stackoverflow.com/users/7567579/emin-laletovic"}, "edited": false, "score": 0, "creation_date": 1526378936, "post_id": 50345085, "comment_id": 87710820, "body": "I added explication with bold in the question"}, {"owner": {"reputation": 2274, "user_id": 7567579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9644beeb1d324d1247b2951d28927?s=128&d=identicon&r=PG", "display_name": "Emin Laletovic", "link": "https://stackoverflow.com/users/7567579/emin-laletovic"}, "edited": false, "score": 0, "creation_date": 1526478221, "post_id": 50345085, "comment_id": 87761012, "body": "Presuming that you are closing <code>proxyWaitChan</code> somewhere (you can provide the info if and where you are doing that), it&#39;s possible that when the <code>proxyWaitChan</code> is closed, some of the executed goroutines have not finished with execution and thus leak. In practice, a big enough timeout can help you, but theoretically, it is not a guarantee that all goroutines will finish. You need to synchronize your goroutines with your main flow (not sure if you want to wait for all of them to finish or make them terminate after some period of time).You can do that with additional channel(s) and/or WaitGroup."}], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 6321206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t7rEQ.jpg?s=128&g=1", "display_name": "Andrii Soluk", "link": "https://stackoverflow.com/users/6321206/andrii-soluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1548251087, "creation_date": 1548251087, "answer_id": 54328710, "question_id": 50345085, "link": "https://stackoverflow.com/questions/50345085/go-leak-goroutines-when-use-proxy/54328710#54328710", "title": "Go leak goroutines when use proxy", "body": "<p>I had a similar issue, also had a problem with leak goroutines.\nFirst one was related to KeepAlive timeout in Dialer, and another is about TLSHandshakeTimeout. Sometimes my program was getting stuck. The following code should help you to avoid that. Hope it helps you )</p>\n\n<pre><code>&amp;http.Transport{\n        DialContext: (&amp;net.Dialer{\n            Timeout:   5 * time.Second,\n            KeepAlive: 5 * time.Second,\n            DualStack: true,\n        }).DialContext,\n        TLSHandshakeTimeout:   2 * time.Second,\n        ResponseHeaderTimeout: 2 * time.Second,\n        ExpectContinueTimeout: 1 * time.Second,\n        DisableKeepAlives:     true,\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9792570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec03cc4eae1dd4a5b7ada3b157ef576?s=128&d=identicon&r=PG&f=1", "display_name": "Valera", "link": "https://stackoverflow.com/users/9792570/valera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548251087, "creation_date": 1526370992, "last_edit_date": 1526378908, "question_id": 50345085, "link": "https://stackoverflow.com/questions/50345085/go-leak-goroutines-when-use-proxy", "title": "Go leak goroutines when use proxy", "body": "<p>Please help me to resolve my problem. I wrote the code what check proxies. In general I run 50 goroutines, each from then get proxy from channel and check if it work and got correct response from my test page.\nEach goroutine made this relation</p>\n\n<p>request ----> proxy ---> my test page ---> test content from my test page.</p>\n\n<p>function what check this relation is:</p>\n\n<pre><code>    // GetAndCheckURL get test page via proxy and check its body.\nfunc GetAndCheckURL(c *http.Client, urlStr string) ([]byte, error) {\n    resp, err := c.Get(urlStr)\n    if err != nil {\n        return nil, fmt.Errorf(\"request error: %v\", err)\n\n    }\n    defer func() {\n        if err := resp.Body.Close(); err != nil {\n            packageLogger.Neverf(\"can't close response body, error: %v\", err)\n        }\n    }()\n    if body, err := ioutil.ReadAll(resp.Body); err != nil {\n        packageLogger.Neverf(\"Can't read response body, URL '%s', error: %v, response statusCode: %d, status: %s\\n\", urlStr, err, resp.StatusCode, resp.Status)\n        return nil, err\n    } else if !bytes.Contains(body, []byte(\"&lt;!--proxy_test\")) {\n        return nil, errors.New(\"invalid body\")\n    } else {\n        return body, nil\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Because each goroutines check different proxies I can't use single http.Transport and http.Client structures. This function <code>GetAndCheckURL</code> get its http.client with its http.transport (with proxy). <strong>This function is running in my workers by this code</strong>:</p>\n\n<pre><code>    // readProxyWorker worker read proxy from chan.\nfunc readProxyWorker(DB *storm.DB, workerNum int, conf config.CheckTaskConfig, ownIP string, proxyWaitChan &lt;-chan proxy.Proxy, m proxy.CheckMetrics) {\n    for i := 0; i &lt; workerNum; i++ {\n        go func() {\n            var err error\n            for p := range proxyWaitChan {\n                // HERE RUN FUNCTION WHAT CHECK PROXIES\n            }\n        }()\n    }\n}\n</code></pre>\n\n<p>But problem is what for socks5 proxies I got leak goroutines.</p>\n\n<pre><code> goroutine 160801 [IO wait, 915 minutes]:\ninternal/poll.runtime_pollWait(0x7fb2ab337410, 0x72, 0xc4206b96a8)\n    /usr/local/Cellar/go/1.10.1/libexec/src/runtime/netpoll.go:173 +0x57\ninternal/poll.(*pollDesc).wait(0xc420c29998, 0x72, 0xffffffffffffff00, 0xb2e180, 0xe34418)\n    /usr/local/Cellar/go/1.10.1/libexec/src/internal/poll/fd_poll_runtime.go:85 +0x9b\ninternal/poll.(*pollDesc).waitRead(0xc420c29998, 0xc422915e00, 0x2, 0x13)\n    /usr/local/Cellar/go/1.10.1/libexec/src/internal/poll/fd_poll_runtime.go:90 +0x3d\ninternal/poll.(*FD).Read(0xc420c29980, 0xc422915ee0, 0x2, 0x13, 0x0, 0x0, 0x0)\n    /usr/local/Cellar/go/1.10.1/libexec/src/internal/poll/fd_unix.go:157 +0x17d\nnet.(*netFD).Read(0xc420c29980, 0xc422915ee0, 0x2, 0x13, 0x0, 0x0, 0xe7c080)\n    /usr/local/Cellar/go/1.10.1/libexec/src/net/fd_unix.go:202 +0x4f\nnet.(*conn).Read(0xc4214ec1b8, 0xc422915ee0, 0x2, 0x13, 0x0, 0x0, 0x0)\n    /usr/local/Cellar/go/1.10.1/libexec/src/net/net.go:176 +0x6a\nio.ReadAtLeast(0x7fb2ab62d868, 0xc4214ec1b8, 0xc422915ee0, 0x2, 0x13, 0x2, 0xa99f60, 0x0, 0x7fb2ab62d868)\n    /usr/local/Cellar/go/1.10.1/libexec/src/io/io.go:309 +0x86\nio.ReadFull(0x7fb2ab62d868, 0xc4214ec1b8, 0xc422915ee0, 0x2, 0x13, 0x0, 0x0, 0x0)\n    /usr/local/Cellar/go/1.10.1/libexec/src/io/io.go:327 +0x58\nvendor/golang_org/x/net/proxy.(*socks5).connect(0xc4208b6690, 0xb367c0, 0xc4214ec1b8, 0xc42083cd60, 0x11, 0xb367c0, 0xc4214ec1b8)\n    /usr/local/Cellar/go/1.10.1/libexec/src/vendor/golang_org/x/net/proxy/socks5.go:113 +0x2f5\nvendor/golang_org/x/net/proxy.(*socks5).Dial(0xc4208b6690, 0xabaa03, 0x3, 0xc42083cd60, 0x11, 0xc42083ce80, 0x12, 0xb367c0, 0xc4214ec1b8)\n    /usr/local/Cellar/go/1.10.1/libexec/src/vendor/golang_org/x/net/proxy/socks5.go:75 +0xf3\nnet/http.(*Transport).dialConn(0xc420e1eff0, 0xb32400, 0xc420020078, 0xc420c29580, 0xc420024780, 0x5, 0xc42083cd60, 0x11, 0xae8d10, 0xc4229ee7b8, ...)\n    /usr/local/Cellar/go/1.10.1/libexec/src/net/http/transport.go:1176 +0x6f7\nnet/http.(*Transport).getConn.func4(0xc420e1eff0, 0xb32400, 0xc420020078, 0xc421205a70, 0xc4209fa7e0)\n    /usr/local/Cellar/go/1.10.1/libexec/src/net/http/transport.go:957 +0x78\ncreated by net/http.(*Transport).getConn\n    /usr/local/Cellar/go/1.10.1/libexec/src/net/http/transport.go:956 +0x363\n</code></pre>\n\n<hr>\n\n<pre><code>    goroutine 18553 [chan receive, 27 minutes]:\nnet/http.(*Transport).getConn.func2.1(0x1a7c8900, 0x19b8ff40, 0x84f7388)\n    /usr/local/go/src/net/http/transport.go:946 +0x41\ncreated by net/http.(*Transport).getConn.func2\n    /usr/local/go/src/net/http/transport.go:945 +0x61\n</code></pre>\n\n<hr>\n\n<p>And I don't know where is my error. I can resolve this problem only when add deadline for connection (or ReadDeadline and WriteDeadline). But I want to resolve my problem with timeouts. I try many variants of timeouts, but this leak exist.\nIn my http.Transport DisablekeepAlive is true, net.Dialer and http.Client has timeouts. </p>\n\n<p>Help me, please.</p>\n"}, {"tags": ["go", "hyperledger-fabric", "hyperledger"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 5516994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EVTjV.jpg?s=128&g=1", "display_name": "Jasti Sri Radhe Shyam", "link": "https://stackoverflow.com/users/5516994/jasti-sri-radhe-shyam"}, "edited": false, "score": 0, "creation_date": 1526558822, "post_id": 50375940, "comment_id": 87797572, "body": "Thanks, there was similar response for the similar question : <a href=\"https://chat.hyperledger.org/channel/fabric-sdk-node?msg=q4jWWGmci6LLGRt8G\" rel=\"nofollow noreferrer\">chat.hyperledger.org/channel/&hellip;</a>"}], "tags": [], "owner": {"reputation": 313, "user_id": 713585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba13958744d04675cd610e85276419c?s=128&d=identicon&r=PG&f=1", "display_name": "Toddinpal", "link": "https://stackoverflow.com/users/713585/toddinpal"}, "is_accepted": true, "score": 1, "last_activity_date": 1526488438, "creation_date": 1526488438, "answer_id": 50375940, "question_id": 50344232, "link": "https://stackoverflow.com/questions/50344232/not-able-to-set-multiple-events-in-chaincode-per-transaction-getting-only-last/50375940#50375940", "title": "Not able to set multiple events in chaincode per transaction, getting only last event", "body": "<p>From looking at the shim code, there is only one slot in the shim for a chaincode event, so only the last call to setEvent will take effect.</p>\n"}], "owner": {"reputation": 161, "user_id": 5516994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EVTjV.jpg?s=128&g=1", "display_name": "Jasti Sri Radhe Shyam", "link": "https://stackoverflow.com/users/5516994/jasti-sri-radhe-shyam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 1, "accepted_answer_id": 50375940, "answer_count": 1, "score": 0, "last_activity_date": 1526488438, "creation_date": 1526368158, "last_edit_date": 1526451134, "question_id": 50344232, "link": "https://stackoverflow.com/questions/50344232/not-able-to-set-multiple-events-in-chaincode-per-transaction-getting-only-last", "title": "Not able to set multiple events in chaincode per transaction, getting only last event", "body": "<p>I have applied multiple events in a function of a chaincode (Hyperledger Fabric v1.1).</p>\n\n<pre><code>func (t *SimpleChaincode) initUsers(stub shim.ChaincodeStubInterface, args []string) pb.Response {\n...\n//Event supplier_bare\nerr = stub.SetEvent(\"supplier_bare\", userAsbytes)\nif err != nil {\n    return shim.Error(err.Error())\n}\n//Event supplier_bare_1\nerr = stub.SetEvent(\"supplier_bare_1\", userAsbytes)\nif err != nil {\n    return shim.Error(err.Error())\n}\n...\nreturn shim.Success(nil)\n}\n</code></pre>\n\n<p>When I invoke the function, I only get the last event ('<strong>supplier_bare_1</strong>') per transaction.</p>\n\n<p>Transaction (events):</p>\n\n<pre><code>...\n \"events\": {\n            \"chaincode_id\": \"mycc10\",\n            \"tx_id\":\"5421ae37d6e1947b7121f411d64dc215ccacbe45b2d0a9c796cc4a3715c922d6\",\n            \"event_name\": \"supplier_bare_1\",\n            \"payload\": {\n                        \"type\": \"Buffer\",\n                        \"data\": [\n                                 ...\n                                ]\n                       }\n           },\n...\n</code></pre>\n\n<p>Does the chaincode works this way or there is a different approach to achieve multiple events in a single function.</p>\n"}, {"tags": ["json", "go", "unmarshalling"], "comments": [{"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526369369, "post_id": 50342476, "comment_id": 87704919, "body": "<a href=\"https://play.golang.org/p/bFZO6P1aoP9\" rel=\"nofollow noreferrer\">play.golang.org/p/bFZO6P1aoP9</a>"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1526402756, "post_id": 50342476, "comment_id": 87727025, "body": "What have you tried so far?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9792000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae0f1172a0c04954aa396c27943f7ed?s=128&d=identicon&r=PG&f=1", "display_name": "d817db33", "link": "https://stackoverflow.com/users/9792000/d817db33"}, "edited": false, "score": 0, "creation_date": 1526361861, "post_id": 50342660, "comment_id": 87701573, "body": "how to get only the text, without the struct? Like just <code>Odio los lunes</code>"}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "reply_to_user": {"reputation": 17, "user_id": 9792000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae0f1172a0c04954aa396c27943f7ed?s=128&d=identicon&r=PG&f=1", "display_name": "d817db33", "link": "https://stackoverflow.com/users/9792000/d817db33"}, "edited": false, "score": 0, "creation_date": 1526362005, "post_id": 50342660, "comment_id": 87701617, "body": "Please check edited answer and link to playground example"}], "tags": [], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "is_accepted": false, "score": 1, "last_activity_date": 1526378159, "last_edit_date": 1526378159, "creation_date": 1526360692, "answer_id": 50342660, "question_id": 50342476, "link": "https://stackoverflow.com/questions/50342476/parsing-json-in-variable-in-golang/50342660#50342660", "title": "Parsing Json in variable in golang", "body": "<p>Implement <code>unmarshalar</code> to fetch the value required from nested array and parse it into and struct using <code>unmarshal</code> like:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\nfunc(item *Result) UnmarshalJSON(data []byte)error{\n    var v []interface{}\n    if err:= json.Unmarshal(data, &amp;v);err!=nil{\n        fmt.Println(err)\n        return err\n    }\n    item.Data = v[0].(interface{}).([]interface{})[0].([]interface{})[0].(string)\n    return nil\n}\n\ntype Result struct {\n    Data string\n}\n\nfunc main() {\n    var result Result\n    jsonString := []byte(`[[[\"Odio los lunes\", \"i hate mondays\", null, null, 1]], null, \"en\"]`)\n    if err := json.Unmarshal(jsonString, &amp;result); err != nil{\n        fmt.Println(err)\n    }\n    //fmt.Printf(\"%+v\\n\",result)\n    value := result.Data\n    fmt.Println(value)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/UfjsvHBKik_u\" rel=\"nofollow noreferrer\">Playground example</a></p>\n"}, {"tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 0, "last_activity_date": 1526421555, "last_edit_date": 1526421555, "creation_date": 1526397036, "answer_id": 50353681, "question_id": 50342476, "link": "https://stackoverflow.com/questions/50342476/parsing-json-in-variable-in-golang/50353681#50353681", "title": "Parsing Json in variable in golang", "body": "<p>A simple approach would be to parse the JSON document as an <code>interface{}</code> (\"any type\") and grab the target string value by asserting the parsed structure.  For example <a href=\"https://play.golang.org/p/JluyaPClblX\" rel=\"nofollow noreferrer\">(on the go playground)</a>:</p>\n\n<pre><code>func main() {\n  str := GetTargetString([]byte(jsonstr))\n  fmt.Println(str) // =&gt; \"Odio los lunes\"\n}\n\nfunc GetTargetString(bs []byte) string {\n  var doc interface{}\n  if err := json.Unmarshal(bs, &amp;doc); err != nil {\n    panic(err)\n  }\n  return doc.([]interface{})[0].([]interface{})[0].([]interface{})[0].(string)\n}\n</code></pre>\n\n<p>The \"GetTargetString\" function will panic if the given byte slice does not contain a valid JSON document or if the structure of the document isn't adequately similar (that is, an array whose first element is an array, whose first element is an array, whose first element is a string).</p>\n\n<p>A more idiomatic (and generally safer) approach would be to inspect the types using the special two-return-value form of the type assertion and return a tuple of <code>(string, error)</code>, e.g.:</p>\n\n<pre><code>if err := json.Unmarshal(jsonString, &amp;result); err != nil {\n  return \"\", err\n}\n\narray0, ok := doc.([]interface{})\nif !ok {\n  return \"\", fmt.Errorf(\"JSON document is not an array\")\n}\n\narray1, ok := array0[0].([]interface{})\nif !ok {\n  return \"\", fmt.Errorf(\"first element is not an array\")\n}\n\n// ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2246, "user_id": 274937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d848784d081501a5cba4a2fa7856e965?s=128&d=identicon&r=PG", "display_name": "valyala", "link": "https://stackoverflow.com/users/274937/valyala"}, "is_accepted": false, "score": 0, "last_activity_date": 1527707087, "creation_date": 1527707087, "answer_id": 50611805, "question_id": 50342476, "link": "https://stackoverflow.com/questions/50342476/parsing-json-in-variable-in-golang/50611805#50611805", "title": "Parsing Json in variable in golang", "body": "<p>It is much simpler (and faster) with <a href=\"https://github.com/valyala/fastjson\" rel=\"nofollow noreferrer\">fastjson</a>:</p>\n\n<pre><code>var p fastjson.Parser\nv, err := p.Parse(input)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Printf(\"v[0][0][0]: %s\", v.GetStringBytes(\"0\", \"0\", \"0\"))\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9792000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae0f1172a0c04954aa396c27943f7ed?s=128&d=identicon&r=PG&f=1", "display_name": "d817db33", "link": "https://stackoverflow.com/users/9792000/d817db33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1531473985, "creation_date": 1526359499, "last_edit_date": 1531473985, "question_id": 50342476, "link": "https://stackoverflow.com/questions/50342476/parsing-json-in-variable-in-golang", "title": "Parsing Json in variable in golang", "body": "<p>how do I parse this json </p>\n\n<pre><code>[\n  [\n    [\n      \"Odio los lunes\",\n      \"i hate mondays\",\n      null,\n      null,\n      1\n    ]\n  ],\n  null,\n  \"en\"\n]\n</code></pre>\n\n<p>to show just <code>Odio los lunes</code>?</p>\n"}, {"tags": ["go", "logging", "kubernetes", "stackdriver"], "comments": [{"owner": {"reputation": 3621, "user_id": 9231144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da0be227b72dd9dfdda45972952fde?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick W", "link": "https://stackoverflow.com/users/9231144/patrick-w"}, "edited": false, "score": 0, "creation_date": 1529525833, "post_id": 50342057, "comment_id": 88910214, "body": "are you using GKE or did you create your own cluster manually within Compute Engine?"}, {"owner": {"reputation": 2907, "user_id": 3968921, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9d5c954a2cee47c08a8ead21e79e24ab?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Deshpande", "link": "https://stackoverflow.com/users/3968921/ankit-deshpande"}, "reply_to_user": {"reputation": 3621, "user_id": 9231144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da0be227b72dd9dfdda45972952fde?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick W", "link": "https://stackoverflow.com/users/9231144/patrick-w"}, "edited": false, "score": 0, "creation_date": 1557234841, "post_id": 50342057, "comment_id": 98690577, "body": "@PatrickW Do you have any solutions for GKE ?"}, {"owner": {"reputation": 3621, "user_id": 9231144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da0be227b72dd9dfdda45972952fde?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick W", "link": "https://stackoverflow.com/users/9231144/patrick-w"}, "edited": false, "score": 0, "creation_date": 1557327436, "post_id": 50342057, "comment_id": 98729219, "body": "fluentd in GKE has the default behavior of marking logs from stdout as INFO and stderr as ERROR. From memory, Go is sending all logs to stderr. The fluentd agent in GKE can&#39;t be modified, so your two options are to install your own fluentd and remove Google&#39;s or you need to modify your code to output non errors to stdout"}], "answers": [{"tags": [], "owner": {"reputation": 1866, "user_id": 5405453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Me0YP.jpg?s=128&g=1", "display_name": "nijm", "link": "https://stackoverflow.com/users/5405453/nijm"}, "is_accepted": false, "score": 1, "last_activity_date": 1539691898, "creation_date": 1539691898, "answer_id": 52835198, "question_id": 50342057, "link": "https://stackoverflow.com/questions/50342057/how-do-i-set-google-stackdriver-to-respect-logging-severity-from-kubernetes/52835198#52835198", "title": "How do I set google stackdriver to respect logging severity from kubernetes?", "body": "<p>Take a look at this logging package: <a href=\"https://github.com/teltech/logger\" rel=\"nofollow noreferrer\">github.com/teltech/logger</a>, with an accompanying <a href=\"https://dev.to/hitman666/go-logger-with-kubernetes-stackdriver-format-compatibility-65k\" rel=\"nofollow noreferrer\">blog post</a>. It will output your logs in a JSON format, including the severity, that is readable by the Stackdriver Fluentd agent.</p>\n"}], "owner": {"reputation": 17289, "user_id": 45849, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/4PHVX.jpg?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/45849/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539691898, "creation_date": 1526356225, "question_id": 50342057, "link": "https://stackoverflow.com/questions/50342057/how-do-i-set-google-stackdriver-to-respect-logging-severity-from-kubernetes", "title": "How do I set google stackdriver to respect logging severity from kubernetes?", "body": "<p>I deployed a go application in google cloud using kubernetes which automatically logs to google stackdriver. Oddly, all log statements are being tagged with severity \"ERROR\"</p>\n\n<p>For example:</p>\n\n<pre><code>log.Println(\"This should have log level info\")\n</code></pre>\n\n<p>will be tagged as an error.</p>\n\n<p><a href=\"https://cloud.google.com/kubernetes-engine/docs/how-to/logging\" rel=\"nofollow noreferrer\">Their docs say</a> \"Severities: By default, logs written to the standard output are on the INFO level and logs written to the standard error are on the ERROR level.\"</p>\n\n<p>Anyone know what could be wrong with my setup?</p>\n"}, {"tags": ["arrays", "go", "insertion-sort"], "comments": [{"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526365269, "post_id": 50340821, "comment_id": 87702837, "body": "If you want to benchmark something, <a href=\"https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go\" rel=\"nofollow noreferrer\">write a benchmark</a>."}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 1, "creation_date": 1526389009, "post_id": 50340821, "comment_id": 87717421, "body": "In Go, <code>^</code> is bitwise XOR, <a href=\"https://golang.org/ref/spec#Arithmetic_operators\" rel=\"nofollow noreferrer\">Arithmetic operators</a>, <a href=\"https://golang.org/ref/spec\" rel=\"nofollow noreferrer\">The Go Programming Language</a>. Therefore, the value of the expression <code>(5^k)</code> isn&#39;t what you think it is."}], "owner": {"reputation": 21, "user_id": 9791357, "user_type": "registered", "profile_image": "https://graph.facebook.com/1716497181762242/picture?type=large", "display_name": "Andr&#233; Nunes Nachtigall", "link": "https://stackoverflow.com/users/9791357/andr%c3%a9-nunes-nachtigall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526397560, "creation_date": 1526344827, "last_edit_date": 1526397560, "question_id": 50340821, "link": "https://stackoverflow.com/questions/50340821/insertion-sort-using-go", "title": "Insertion sort using Go", "body": "<p>I'm having difficulty creating a random value insert in Go, I need to do 10 tests with 1000 numbers, then 10 tests with 5000 numbers, then 10 tests with 10000 numbers, then 10 tests with 15000 ... up to 50000</p>\n\n<p>I made a code with function and another code without function and the 2 are wrong</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"math/rand\"\n    \"time\"\n)\n\nfunc main() {\n    var vetor [50000]int\n    for k := 1; k &lt;= 10; {\n        k := (5 ^ k) * 1000\n        for i := 1000; i &lt; 50000; {\n            vetor[i] = rand.Intn(1000)\n            fmt.Print(vetor[i], \",\")\n        }\n        start := time.Now()\n        n := len(vetor)\n        if n &lt; 2 {\n            return\n        }\n        for i := 1; i &lt; n; i++ {\n            for j := i - 1; j &gt;= 0; j-- {\n                if (vetor)[j] &gt; (vetor)[j+1] {\n                    (vetor)[j], (vetor)[j+1] = (vetor)[j+1], (vetor)[j]\n                } else {\n                    break\n                }\n            }\n        }\n        t := time.Now()\n        decorrido := t.Sub(start)\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"math/rand\"\n    \"time\"\n)\n\nfunc insertion(array *[]int) {\n    n := len(*array)\n    if n &lt; 2 {\n        return\n    }\n    for i := 1; i &lt; n; i++ {\n        for j := i - 1; j &gt;= 0; j-- {\n            if (*array)[j] &gt; (*array)[j+1] {\n                (*array)[j], (*array)[j+1] = (*array)[j+1], (*array)[j]\n            } else {\n                break\n            }\n        }\n    }\n}\n\nfunc main() {\n    var vetor [50000]int\n    for k := 1; k &lt;= 10; {\n        k := (5 ^ k) * 1000\n        for i := 1000; i &lt; 50000; {\n            vetor[i] = rand.Intn(1000)\n            fmt.Print(vetor[i], \",\")\n        }\n        start := time.Now()\n        insertion(&amp;vetor)\n        t := time.Now()\n        decorrido := t.Sub(start)\n    }\n}\n</code></pre>\n\n<p>I also need to calculate the run time for all the tests and take the averages out of all 10 results</p>\n"}, {"tags": ["amazon-web-services", "go", "amazon-ec2", "bigdata", "amazon-dynamodb"], "comments": [{"owner": {"reputation": 5044, "user_id": 1276480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8UB8.jpg?s=128&g=1", "display_name": "RayfenWindspear", "link": "https://stackoverflow.com/users/1276480/rayfenwindspear"}, "edited": false, "score": 0, "creation_date": 1526335535, "post_id": 50339541, "comment_id": 87695565, "body": "There is a BatchWriteItem function: <a href=\"https://docs.aws.amazon.com/sdk-for-go/api/service/dynamodb/#DynamoDB.BatchWriteItem\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdk-for-go/api/service/dynamodb/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 5203311, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33faed87881b596237e4a4ae58bb7e47?s=128&d=identicon&r=PG", "display_name": "WeCanBeFriends", "link": "https://stackoverflow.com/users/5203311/wecanbefriends"}, "edited": false, "score": 0, "creation_date": 1526401881, "post_id": 50344809, "comment_id": 87726518, "body": "Used a wrapper around BatchItemReq to process more than 25 items in parallel, speed went to about 1million/5seconds. Thanks for the explanation"}], "tags": [], "owner": {"reputation": 4099, "user_id": 6376471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19290c0ab8b351cf10a7c0b1a9780b4c?s=128&d=identicon&r=PG", "display_name": "Zak", "link": "https://stackoverflow.com/users/6376471/zak"}, "is_accepted": true, "score": 6, "last_activity_date": 1526370027, "creation_date": 1526370027, "answer_id": 50344809, "question_id": 50339541, "link": "https://stackoverflow.com/questions/50339541/putitem-into-dynamodb-is-slow/50344809#50344809", "title": "PutItem into DynamoDB is slow", "body": "<p>The slowness comes from the fact that each insert has to do a full HTTP round trip to dynamo.</p>\n\n<p>10k items in 5 mins is about 30ms per item, which is expected of an HTTP trip.</p>\n\n<p>You can use a batch update, <a href=\"https://docs.aws.amazon.com/sdk-for-go/api/service/dynamodb/#DynamoDB.BatchWriteItem\" rel=\"noreferrer\">docs here</a></p>\n\n<p>In the docs, you have <code>BatchWriteItemInput</code>, which takes a <code>map[string][]*WriteRequest</code>.</p>\n\n<pre><code>type BatchWriteItemInput struct {\n    // ... trimmed\n\n    RequestItems map[string][]*WriteRequest\n\n    ...\n}\n</code></pre>\n\n<p>The <code>WriteRequest</code> model is a little odd, because its used for both <code>Delete</code> and <code>Put</code> operations, just ignore the <code>DeleteRequest *DeleteRequest</code> field.</p>\n\n<p>It's important to note that there are some limits on the batch operation:</p>\n\n<ul>\n<li>You can't change the same item more than once in a batch request</li>\n<li>You must have more than 2 and fewer than 25 items in a batch</li>\n<li>Each item cannot be bigger than 400KB and the total batch cannot be bigger than 16MB. </li>\n</ul>\n"}], "owner": {"reputation": 541, "user_id": 5203311, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33faed87881b596237e4a4ae58bb7e47?s=128&d=identicon&r=PG", "display_name": "WeCanBeFriends", "link": "https://stackoverflow.com/users/5203311/wecanbefriends"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2622, "favorite_count": 1, "accepted_answer_id": 50344809, "answer_count": 1, "score": 3, "last_activity_date": 1526374058, "creation_date": 1526334720, "last_edit_date": 1526374058, "question_id": 50339541, "link": "https://stackoverflow.com/questions/50339541/putitem-into-dynamodb-is-slow", "title": "PutItem into DynamoDB is slow", "body": "<p>I have an EC2 instance which opens up a json file, reads each line and does a putItem operation into two tables.</p>\n\n<p>Without the putItem operation, Golang parses a 67k line file in about 3 seconds.</p>\n\n<p>With the putItem operation, it is processing 10k items every 5 minutes. The put operation into dynamodb is not being throttled. The WCUs and RCUs have been set accordingly. So Is there a reason that the putItem operation is holding up the code?</p>\n\n<p>I assume that Golang is waiting for each put operation to succeed?</p>\n\n<p>Still quite unsure, if anyone has done a mass insert into dynamodb using golang, then it would be helpful if you shedded some light on how you circumvented this.</p>\n"}, {"tags": ["javascript", "html", "go"], "comments": [{"owner": {"reputation": 11274, "user_id": 9078341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TAD0A.png?s=128&g=1", "display_name": "Randy Casburn", "link": "https://stackoverflow.com/users/9078341/randy-casburn"}, "edited": false, "score": 0, "creation_date": 1526330630, "post_id": 50338707, "comment_id": 87693687, "body": "That error usually indicates the JSON is malformed and cannot be parsed. You do realize your sample is missing the closing script tag for the first tag...right?"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526330904, "post_id": 50338707, "comment_id": 87693815, "body": "What is the content of the <code>particles.json</code> file as served by Go? It must be malformed. Examining that file will probably be informative."}, {"owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "edited": false, "score": 0, "creation_date": 1526330913, "post_id": 50338707, "comment_id": 87693819, "body": "Hi Randy, Just checked my code that closing script tag is present there, I must have messed it up while pasting. Good spot though :)  Hi Flimzy, I can organize the js and css files later, at the moment I just need to get things working with Golang as backend."}, {"owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "edited": false, "score": 0, "creation_date": 1526330951, "post_id": 50338707, "comment_id": 87693838, "body": "I have updated particles.json file in the question. However, I have checked the validity of the file online and thing to note here is - that exact same file works with apache2 as web server."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526331173, "post_id": 50338707, "comment_id": 87693947, "body": "Is that the contents <i>as served by Go</i>? Or the contents on your disk before serving it?"}, {"owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "edited": false, "score": 0, "creation_date": 1526331495, "post_id": 50338707, "comment_id": 87694081, "body": "content on my disk but I am monitoring it on the firefox browser, and this file&#39;s status comes back as HTTP 200."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526331550, "post_id": 50338707, "comment_id": 87694100, "body": "I&#39;m not interested in the HTTP status. I&#39;m interested in the content. What is the body of the <code>particles.json</code> response served by Go?"}, {"owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "edited": false, "score": 0, "creation_date": 1526331684, "post_id": 50338707, "comment_id": 87694158, "body": "Sorry but how can I find this out?"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526331731, "post_id": 50338707, "comment_id": 87694178, "body": "You can either look at it in the details of the HTTP request in the Firefox console (well, I know you can in Chrome, I assume the same in FF), or you could fetch the same file using curl."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526331778, "post_id": 50338707, "comment_id": 87694197, "body": "But the error message suggests that the file is being corrupted (it says there&#39;s an error in the first byte of the file). So if you look at that file, you&#39;ll probably see what&#39;s wrong with it.  It&#39;s probably serving the wrong file, or the file is being corrupted, perhaps due to escaping or some other extra processing being done."}], "answers": [{"tags": [], "owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "is_accepted": false, "score": 2, "last_activity_date": 1526340720, "creation_date": 1526340720, "answer_id": 50340400, "question_id": 50338707, "link": "https://stackoverflow.com/questions/50338707/inconsistent-behaviour-of-javascript-particlesjs/50340400#50340400", "title": "inconsistent behaviour of javascript (particlesJS)", "body": "<p><code>http.HandleFunc(\"/\",</code> is matching anything that doesn't match elsewhere, it's essentially a catch all as the <code>ServeMux</code> documentation states:</p>\n\n<blockquote>\n  <p>Patterns name fixed, rooted paths, like \"/favicon.ico\", or rooted subtrees, like \"/images/\" (note the trailing slash). Longer patterns take precedence over shorter ones, so that if there are handlers registered for both \"/images/\" and \"/images/thumbnails/\", the latter handler will be called for paths beginning \"/images/thumbnails/\" and the former will receive requests for any other paths in the \"/images/\" subtree.</p>\n</blockquote>\n\n<p>Since it is trying to load <code>particles.json</code>, and there is no better match, it is loading your index page.</p>\n\n<p>You need to add another route, something like:</p>\n\n<pre><code>http.HandleFunc(\"/particles.json\", func(w http.ResponseWriter, r *http.Request) {\n   http.ServeFile(w, r, \"./path/to/particles.json\")\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "is_accepted": false, "score": 0, "last_activity_date": 1526909701, "creation_date": 1526909701, "answer_id": 50450124, "question_id": 50338707, "link": "https://stackoverflow.com/questions/50338707/inconsistent-behaviour-of-javascript-particlesjs/50450124#50450124", "title": "inconsistent behaviour of javascript (particlesJS)", "body": "<p>Thanks for your invaluable comments. I did try every options suggested above but couldn't make the program to work until I figured out that I had a silly misconception (due to lack of knowledge of course) that \"<strong>/</strong>\" in: *http.HandleFunc(\"<strong>/</strong>\", func(w http.ResponseWriter, r <em>http.Request)</em> is the root of my project folder i.e. the folder under which I had my ./src, ./bin, ./style/css/ and ./style/js/</p>\n\n<p>However, that wasn't the case. I modified the code to this:</p>\n\n<pre><code>func main () {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request){\n        http.ServeFile(w, r, r.URL.Path)\n    })\n    http.ListenAndServe(\":5000\" , nil)\n}\n</code></pre>\n\n<p>compiled and ran. Only to find that if I don't pass any path it was listing the \"root\" filesystem's contents like, /bin, /home. This was enough for me to understand that Go code is considering \"/\" filesystem's root and <strong>NOT</strong> project's root folder. \nI then updated <strong>absolute</strong> path of css and json file in my index.html and boom... It worked!</p>\n\n<p>Thanks again for your help. It did help me a lot.</p>\n"}], "owner": {"reputation": 132, "user_id": 9302427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21fad1a3b26ff8f4149eab78acccc654?s=128&d=identicon&r=PG&f=1", "display_name": "RoT", "link": "https://stackoverflow.com/users/9302427/rot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526909701, "creation_date": 1526330529, "last_edit_date": 1526331062, "question_id": 50338707, "link": "https://stackoverflow.com/questions/50338707/inconsistent-behaviour-of-javascript-particlesjs", "title": "inconsistent behaviour of javascript (particlesJS)", "body": "<p>I am trying to make a login page with work. Below is the body of main html page (only body is shown to keep things concise):</p>\n\n<pre><code>&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div id=\"login-box\"&gt;\n            &lt;div class=\"controls\"&gt;\n                &lt;input type=\"text\" name=\"username\" placeholder=\"Username\" class=\"form-control\" /&gt;\n                &lt;input type=\"text\" name=\"username\" placeholder=\"Password\" class=\"form-control\" /&gt;\n                &lt;button type=\"button\" class=\"btn btn-default btn-block btn-custom\"&gt;Login&lt;/button&gt;\n            &lt;/div&gt;  &lt;!-- /.controls --&gt;\n        &lt;/div&gt;   &lt;!-- /#login-box --&gt;\n    &lt;/div&gt;    &lt;!-- /.container --&gt;\n\n    &lt;div id=\"particles-js\"&gt;&lt;/div&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js\"&gt; &lt;/script&gt;\n\n    &lt;script&gt;\n    particlesJS.load('particles-js', 'particles.json', function() {\n        console.log('callback - particles.js config loaded');\n    });\n    &lt;/script&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>In addition to this I have a css and particles.json static files.</p>\n\n<p>Everything works when I execute it on a web browser with apache2 as web server.</p>\n\n<p>Then I take the exact same files and use it in a Golang program:</p>\n\n<pre><code>func main(){\n    templates := template.Must(template.ParseFiles(\"../../templates/index.html\"))\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request){\n        if err:= templates.ExecuteTemplate(w, \"index.html\", nil) ; err != nil{\n            http.Error(w, err.Error(), http.StatusInternalServerError)\n        }\n        //fmt.Fprintf(w, \"Welcome to Gopherland\")\n    })\n    http.Handle(\"/css/\", http.FileServer(http.Dir(\"style\")))\n    http.Handle(\"/js/\", http.FileServer(http.Dir(\"style\")))\n    http.ListenAndServe(\":5000\", nil)\n}\n</code></pre>\n\n<p>and it fails to parse particles.json file:</p>\n\n<p><strong>SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data</strong></p>\n\n<p>No other compile time or run time error is thrown by Go. This error appears in browser console. I have checked the validity of particles.json file.</p>\n\n<p>Can someone help please?</p>\n\n<p>Contents of particles.json:</p>\n\n<pre><code>{\n  \"particles\": {\n    \"number\": {\n      \"value\": 80,\n      \"density\": {\n        \"enable\": true,\n        \"value_area\": 800\n      }\n    },\n    \"color\": {\n      \"value\": \"#ffffff\"\n    },\n    \"shape\": {\n      \"type\": \"circle\",\n      \"stroke\": {\n        \"width\": 0,\n        \"color\": \"#000000\"\n      },\n      \"polygon\": {\n        \"nb_sides\": 5\n      },\n      \"image\": {\n        \"width\": 100,\n        \"height\": 100\n      }\n    },\n    \"opacity\": {\n      \"value\": 0.5,\n      \"random\": false,\n      \"anim\": {\n        \"enable\": false,\n        \"speed\": 1,\n        \"opacity_min\": 0.1,\n        \"sync\": false\n      }\n    },\n    \"size\": {\n      \"value\": 5,\n      \"random\": true,\n      \"anim\": {\n        \"enable\": false,\n        \"speed\": 40,\n        \"size_min\": 0.1,\n        \"sync\": false\n      }\n    },\n    \"line_linked\": {\n      \"enable\": true,\n      \"distance\": 150,\n      \"color\": \"#ffffff\",\n      \"opacity\": 0.4,\n      \"width\": 1\n    },\n    \"move\": {\n      \"enable\": true,\n      \"speed\": 6,\n      \"direction\": \"none\",\n      \"random\": false,\n      \"straight\": false,\n      \"out_mode\": \"out\",\n      \"attract\": {\n        \"enable\": false,\n        \"rotateX\": 600,\n        \"rotateY\": 1200\n      }\n    }\n  },\n  \"interactivity\": {\n    \"detect_on\": \"canvas\",\n    \"events\": {\n      \"onhover\": {\n        \"enable\": true,\n        \"mode\": \"repulse\"\n      },\n      \"onclick\": {\n        \"enable\": true,\n        \"mode\": \"push\"\n      },\n      \"resize\": true\n    },\n    \"modes\": {\n      \"grab\": {\n        \"distance\": 400,\n        \"line_linked\": {\n          \"opacity\": 1\n        }\n      },\n      \"bubble\": {\n        \"distance\": 400,\n        \"size\": 40,\n        \"duration\": 2,\n        \"opacity\": 8,\n        \"speed\": 3\n      },\n      \"repulse\": {\n        \"distance\": 200\n      },\n      \"push\": {\n        \"particles_nb\": 4\n      },\n      \"remove\": {\n        \"particles_nb\": 2\n      }\n    }\n  },\n  \"retina_detect\": true,\n  \"config_demo\": {\n    \"hide_card\": false,\n    \"background_color\": \"#b61924\",\n    \"background_image\": \"\",\n    \"background_position\": \"50% 50%\",\n    \"background_repeat\": \"no-repeat\",\n    \"background_size\": \"cover\"\n  }\n}\n</code></pre>\n"}, {"tags": ["postgresql", "go", "haproxy", "compose", "sqlx"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526329557, "post_id": 50338338, "comment_id": 87693193, "body": "What are you hoping for here? If the connection was reset, you need to reconnect."}, {"owner": {"reputation": 61, "user_id": 1728749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a37c7404dff6f8521870790b0c4b9?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1728749/nick"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526329907, "post_id": 50338338, "comment_id": 87693352, "body": "I&#39;m using the go standard lib <code>sql.Open</code> stuff which is meant to handle connecting pooling, so I can&#39;t just simply reconnect. Also as I mentioned, after the error, the subsequent queries go through fine. I&#39;ll update the question for clarity."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526330494, "post_id": 50338338, "comment_id": 87693627, "body": "Yes, the way to handle that with the Go standard library is to detect a connection failure, and retry the operation."}, {"owner": {"reputation": 61, "user_id": 1728749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a37c7404dff6f8521870790b0c4b9?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1728749/nick"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526330848, "post_id": 50338338, "comment_id": 87693793, "body": "Hmm, ok. Last paragraph on here appears to suggest the opposite. <a href=\"http://go-database-sql.org/errors.html\" rel=\"nofollow noreferrer\">go-database-sql.org/errors.html</a>"}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 2, "creation_date": 1526331221, "post_id": 50338338, "comment_id": 87693968, "body": "Wild guess: the connection to haproxy is still alive, but the connection to the backend times out and haproxy doesn&#39;t close the other end. I&#39;ve seen similar issues with redis. What happens if you don&#39;t use haproxy? Regular pings won&#39;t help much because there is no guarantee that all connections in either pool see some traffic before they time out."}, {"owner": {"reputation": 61, "user_id": 1728749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a37c7404dff6f8521870790b0c4b9?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1728749/nick"}, "edited": false, "score": 2, "creation_date": 1526331770, "post_id": 50338338, "comment_id": 87694193, "body": "Yeah, I think I may have just come to a similar conclusion. I&#39;m thinking of setting <code>db.SetConnMaxLifetime(time.Minute * 15)</code> which I think should flush out the dead connections."}, {"owner": {"reputation": 61, "user_id": 1728749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a37c7404dff6f8521870790b0c4b9?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1728749/nick"}, "reply_to_user": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1527238711, "post_id": 50338338, "comment_id": 88062441, "body": "Hi @Peter, looks like that did the trick. If you want to comment that as the answer, I&#39;ll give you the points."}, {"owner": {"reputation": 2612, "user_id": 5994461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aab1d1f8d1313f4c0b943d6666f89522?s=128&d=identicon&r=PG", "display_name": "user5994461", "link": "https://stackoverflow.com/users/5994461/user5994461"}, "edited": false, "score": 0, "creation_date": 1588788760, "post_id": 50338338, "comment_id": 109037270, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/32634980/haproxy-closes-long-living-tcp-connections-ignoring-tcp-keepalive\">HAProxy closes long living TCP connections ignoring TCP keepalive</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "is_accepted": false, "score": 0, "last_activity_date": 1615738856, "last_edit_date": 1615738856, "creation_date": 1615723367, "answer_id": 66624307, "question_id": 50338338, "link": "https://stackoverflow.com/questions/50338338/intermittent-connection-reset-by-peer-sql-postgres/66624307#66624307", "title": "intermittent &quot;connection reset by peer&quot; sql postgres", "body": "<p>Since no one wrote that explicity. The solution to this problem is setting <code>db.SetConnMaxLifetime(time.Minute)</code>. I tried it and it works. Connection reset occurs often on AWS where there is inactivity limit set to 350 seconds, after that TCP RST is returned.</p>\n"}], "owner": {"reputation": 61, "user_id": 1728749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a37c7404dff6f8521870790b0c4b9?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/1728749/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2586, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1615738856, "creation_date": 1526328845, "last_edit_date": 1526330010, "question_id": 50338338, "link": "https://stackoverflow.com/questions/50338338/intermittent-connection-reset-by-peer-sql-postgres", "title": "intermittent &quot;connection reset by peer&quot; sql postgres", "body": "<p>After a period of inactivity, my go web service is getting a <code>net.OpError</code> with message <code>read tcp x.x.x.x:52086-&gt;x.x.x.x:24414: read: connection reset by peer</code> when executing the first postgres sql query. After the error, the subsequent requests will work fine.</p>\n\n<p>The postgres database is hosted with compose.com which has haproxy in front of the postgres db. My go web app is using standard sql and sqlx.</p>\n\n<p>I've tried running a ticker invoking <code>db.Ping()</code> every 15 minutes, but this hasn't fixed the issue.</p>\n\n<p>Why is the go standard <code>sql</code> lib not handling these connection drops?</p>\n"}, {"tags": ["go", "aws-sdk-go", "cognito"], "comments": [{"owner": {"reputation": 3315, "user_id": 1664109, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/JAlH9.jpg?s=128&g=1", "display_name": "RockOnGom", "link": "https://stackoverflow.com/users/1664109/rockongom"}, "edited": false, "score": 0, "creation_date": 1539764033, "post_id": 50337252, "comment_id": 92615973, "body": "&quot;Unable to verify secret hash for client myClientId&quot;, so you are sending &#39;myClientId&#39; as your clientId."}], "answers": [{"comments": [{"owner": {"reputation": 3398, "user_id": 908423, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/cctsZ.jpg?s=128&g=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/908423/geoff"}, "edited": false, "score": 1, "creation_date": 1578701426, "post_id": 52299776, "comment_id": 105537446, "body": "This seemed to be the case for me. The original auth let me use the user&#39;s email in the secret but not for the refresh token. I can&#39;t find info in the documentation to support the <i>need</i> for the UUID from AWS in the SECRET_HASH and why it worked the first time without it. Can anyone provide a link to support this?"}, {"owner": {"reputation": 818, "user_id": 1045937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab4fd904e8c25376aafd349dd21745f?s=128&d=identicon&r=PG", "display_name": "bencoder", "link": "https://stackoverflow.com/users/1045937/bencoder"}, "edited": false, "score": 0, "creation_date": 1594975277, "post_id": 52299776, "comment_id": 111320499, "body": "This didn&#39;t seem to work for me, I instead tried <code>cognito:username</code> field and that worked for me"}], "tags": [], "owner": {"reputation": 331, "user_id": 2546318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceca15a5e9f7d19f672453e9206138aa?s=128&d=identicon&r=PG", "display_name": "tikendra.chand", "link": "https://stackoverflow.com/users/2546318/tikendra-chand"}, "is_accepted": false, "score": 7, "last_activity_date": 1536769826, "creation_date": 1536769826, "answer_id": 52299776, "question_id": 50337252, "link": "https://stackoverflow.com/questions/50337252/aws-cognito-refresh-token-fails-on-secret-hash/52299776#52299776", "title": "AWS Cognito refresh token fails on secret hash", "body": "<p>Use user id (sub) instead of email while generating secret hash.</p>\n\n<pre><code>secretHash := secretHash(sub, auth.Config.ClientID, auth.Config.ClientSecret)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 838, "user_id": 887812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd651ced5d5057b5b9477087e789897?s=128&d=identicon&r=PG", "display_name": "Niklas Ekman", "link": "https://stackoverflow.com/users/887812/niklas-ekman"}, "edited": false, "score": 0, "creation_date": 1603371515, "post_id": 63414021, "comment_id": 114020349, "body": "Alright, so I can&#39;t use the email to compute the secret hash. So what is the solution?"}], "tags": [], "owner": {"reputation": 11, "user_id": 14105406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8aa336b0d12ef39b3fe3620e6283069?s=128&d=identicon&r=PG&f=1", "display_name": "mcdl", "link": "https://stackoverflow.com/users/14105406/mcdl"}, "is_accepted": false, "score": 0, "last_activity_date": 1597412768, "creation_date": 1597412768, "answer_id": 63414021, "question_id": 50337252, "link": "https://stackoverflow.com/questions/50337252/aws-cognito-refresh-token-fails-on-secret-hash/63414021#63414021", "title": "AWS Cognito refresh token fails on secret hash", "body": "<p>This is the case as well in <strong>Javascript</strong>. At work we have a Cognito User Pool with the Username attribute set to <strong>email</strong>, see <a href=\"https://i.stack.imgur.com/FeKU6.png\" rel=\"nofollow noreferrer\">Screenshot</a>.</p>\n<p>In my setup, some APIs can use the email to compute the Secret Hash but <strong>NOT</strong> <strong>initiateAuth</strong>(REFRESH_TOKEN_AUTH/REFRESH_TOKEN).</p>\n<p>Here is a list of APIs that did work with the email as my username to compute:</p>\n<ul>\n<li><strong>initiateAuth</strong>(USER_PASSWORD_AUTH)</li>\n<li><strong>signUp</strong></li>\n<li><strong>forgotPassword</strong></li>\n<li><strong>confirmForgotPassword</strong></li>\n<li><strong>confirmSignUp</strong></li>\n<li><strong>resendConfirmationCode</strong></li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 3515197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3e97c34658c9a64e09a826633279ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3515197", "link": "https://stackoverflow.com/users/3515197/user3515197"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1337, "favorite_count": 5, "answer_count": 2, "score": 3, "last_activity_date": 1597412768, "creation_date": 1526324368, "last_edit_date": 1526324696, "question_id": 50337252, "link": "https://stackoverflow.com/questions/50337252/aws-cognito-refresh-token-fails-on-secret-hash", "title": "AWS Cognito refresh token fails on secret hash", "body": "<p>I have a problem refreshing an AWS Cognito token using server side authentication in Go. I am able to get the <code>id_token</code>, <code>access_token</code> and <code>refresh_token</code> with the <code>cognitoidentityprovider.AdminInitiateAuth</code> method. I have create a User Pools Client with secrets so I have to provide the <code>SECRET_HASH</code> in the <code>AuthParameters</code>.</p>\n\n<p>This all works fine when logging in, but the same secret hash doesn't work when refreshing the tokens.  I have tripple checked the code and verified the secret hashes I send are the same when logging in and when refreshing the token (it should be the same since it uses the username, clientID and clientSecret which don't change).</p>\n\n<p>The AWS API returns the following error:</p>\n\n<pre><code>{\n\"error\": \"NotAuthorizedException: Unable to verify secret hash for client myClientIdHere\\n\\tstatus code: 400, request id: c186ecf2-57a7-11e8-a01e-f97ed64650c9\"\n}\n</code></pre>\n\n<p>I have checked that device tracking is off as the documentation mentions that this is a problem when refreshing tokens on the server-side (note under \"Admin authentication flow\", <a href=\"https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-authentication-flow.html#amazon-cognito-user-pools-server-side-authentication-flow\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-authentication-flow.html#amazon-cognito-user-pools-server-side-authentication-flow</a>).</p>\n\n<p>My refresh code is:</p>\n\n<pre><code>AWSRefreshToken := aws.String(refreshToken)\nsecretHash := secretHash(email, auth.Config.ClientID, auth.Config.ClientSecret)\nAWSUserPoolID := aws.String(auth.Config.UserPoolID)\n\ninput := cognitoidentityprovider.AdminInitiateAuthInput{\n    AuthFlow: aws.String(\"REFRESH_TOKEN_AUTH\"),\n    AuthParameters: map[string]*string{\n        \"REFRESH_TOKEN\": AWSRefreshToken,\n        \"SECRET_HASH\":   &amp;secretHash,\n    },\n    ClientId:   &amp;auth.Config.ClientID,\n    UserPoolId: AWSUserPoolID,\n}\n\noutput, err := auth.AWSCognitoIdentityProvider.AdminInitiateAuth(&amp;input)\n</code></pre>\n\n<p>The secret hash code (from <a href=\"https://stackoverflow.com/a/46163403/3515197\">https://stackoverflow.com/a/46163403/3515197</a>):</p>\n\n<pre><code>func secretHash(username, clientID, clientSecret string) string {\n    mac := hmac.New(sha256.New, []byte(clientSecret))\n    mac.Write([]byte(username + clientID))\n    return base64.StdEncoding.EncodeToString(mac.Sum(nil))\n}\n</code></pre>\n\n<p>I have checked other Stack Overflow questions but they only mention the device tracking problem and that the secret hash is needed. What am I missing here?</p>\n"}, {"tags": ["go", "github", "mingw", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526324350, "post_id": 50336889, "comment_id": 87690669, "body": "It appears you don&#39;t have the development libraries properly installed from step 2."}, {"owner": {"reputation": 33, "user_id": 8301721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54749e328c3a141980f4a0378e3befa4?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dierker", "link": "https://stackoverflow.com/users/8301721/h-dierker"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526393121, "post_id": 50336889, "comment_id": 87720533, "body": "Tried doing that step again, still not working..."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 8301721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54749e328c3a141980f4a0378e3befa4?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dierker", "link": "https://stackoverflow.com/users/8301721/h-dierker"}, "is_accepted": false, "score": 0, "last_activity_date": 1526397883, "creation_date": 1526397883, "answer_id": 50353932, "question_id": 50336889, "link": "https://stackoverflow.com/questions/50336889/go-cant-find-sdl/50353932#50353932", "title": "Go can&#39;t find sdl", "body": "<p>Alrighty... I solved the problem by installing the 32 bit version of go. That's how simple it was...</p>\n"}], "owner": {"reputation": 33, "user_id": 8301721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54749e328c3a141980f4a0378e3befa4?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dierker", "link": "https://stackoverflow.com/users/8301721/h-dierker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526397883, "creation_date": 1526322962, "last_edit_date": 1526330777, "question_id": 50336889, "link": "https://stackoverflow.com/questions/50336889/go-cant-find-sdl", "title": "Go can&#39;t find sdl", "body": "<p>I've been trying to install sdl for go for a while now. I used this tutorial on github: <a href=\"https://github.com/vinzBad/go-sdl2-tut/blob/master/00_preparation/windows.md\" rel=\"nofollow noreferrer\">https://github.com/vinzBad/go-sdl2-tut/blob/master/00_preparation/windows.md</a></p>\n\n<p>However, every time I enter </p>\n\n<pre><code>go get -v github.com/veandco/go-sdl2/sdl\n</code></pre>\n\n<p>into cmd or git bash, after being done with everything else, i get</p>\n\n<blockquote>\n  <p>In file included from go\\src\\github.com\\veandco\\go-sdl2\\sdl\\audio.go:4:0:\n  ./sdl_wrapper.h:2:23: fatal error: SDL2/SDL.h: No such file or directory\n    #include \n                         ^\n  compilation terminated.</p>\n</blockquote>\n\n<p>So apparently it cannot find sdl, even though I got it installed and added the paths to my environment variables.</p>\n\n<p>I feel like I'm missing something, but I can't figure out what.</p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-platform"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526314157, "post_id": 50334680, "comment_id": 87685607, "body": "&quot;context&quot; is the full dependency name, because it&#39;s in the standard library, since Go 1.7. Which version of Go are you using?"}, {"owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526314281, "post_id": 50334680, "comment_id": 87685673, "body": "Fait enough, then the problem is elsewhere. I\u2019m using 1.8"}], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "edited": false, "score": 0, "creation_date": 1526368532, "post_id": 50343495, "comment_id": 87704434, "body": "This happens when I run it on Cloud Shell directly by using the App Engine online console. There are using go1.10."}, {"owner": {"reputation": 1713, "user_id": 4052858, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/710d5f65b404307fea9b5a1564c60549?s=128&d=identicon&r=PG&f=1", "display_name": "N.F.", "link": "https://stackoverflow.com/users/4052858/n-f"}, "reply_to_user": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "edited": false, "score": 0, "creation_date": 1526374302, "post_id": 50343495, "comment_id": 87707745, "body": "Are you trying to run local server for debugging? or deploying your application? When debugging, consider to use your own PC. When deploying try to run <code>goapp deploy app&#47;app.yaml</code>."}, {"owner": {"reputation": 1713, "user_id": 4052858, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/710d5f65b404307fea9b5a1564c60549?s=128&d=identicon&r=PG&f=1", "display_name": "N.F.", "link": "https://stackoverflow.com/users/4052858/n-f"}, "reply_to_user": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "edited": false, "score": 0, "creation_date": 1526375719, "post_id": 50343495, "comment_id": 87708560, "body": "<code>goapp version</code> on Cloud Shell returns <code>go version go1.6.3 (appengine-1.9.48) linux&#47;amd64</code>. This version does not support Go 1.8."}, {"owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "edited": false, "score": 0, "creation_date": 1526377588, "post_id": 50343495, "comment_id": 87709892, "body": "Thanks N.F. for spotting that up. I&#39;m currently using the other approach that I described in my response to this thread."}], "tags": [], "owner": {"reputation": 1713, "user_id": 4052858, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/710d5f65b404307fea9b5a1564c60549?s=128&d=identicon&r=PG&f=1", "display_name": "N.F.", "link": "https://stackoverflow.com/users/4052858/n-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1526366861, "last_edit_date": 1526366861, "creation_date": 1526365189, "answer_id": 50343495, "question_id": 50334680, "link": "https://stackoverflow.com/questions/50334680/go-vendoring-on-app-engine-standard/50343495#50343495", "title": "Go vendoring on App Engine Standard", "body": "<p>The <code>context</code> package will be inside <code>$GOROOT</code> ( not in <code>vendor</code> directory ). Probably your Go Appengine SDK is old and does not support Go 1.8. </p>\n\n<p>Update your SDK to the latest version. The <code>$GOROOT</code> should be like <code>/path/to/somewhere/goroot-1.8</code></p>\n"}, {"comments": [{"owner": {"reputation": 5174, "user_id": 1975086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e01df0a60ee2c34233ce48e32c21a3b8?s=128&d=identicon&r=PG", "display_name": "Alexander Trakhimenok", "link": "https://stackoverflow.com/users/1975086/alexander-trakhimenok"}, "edited": false, "score": 0, "creation_date": 1526399086, "post_id": 50346574, "comment_id": 87724851, "body": "You can have app.yaml under GOPATH /src it just have to be in a separate folder. All imports should ne in GOPATH and outisde of folder with app.yaml. For example I have lke this: <code>&#47;GOPATH&#47;src&#47;project1&#47;root</code> &amp; <code>&#47;GOPATH&#47;src&#47;project1&#47;app</code> where app imported from the root."}, {"owner": {"reputation": 5174, "user_id": 1975086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e01df0a60ee2c34233ce48e32c21a3b8?s=128&d=identicon&r=PG", "display_name": "Alexander Trakhimenok", "link": "https://stackoverflow.com/users/1975086/alexander-trakhimenok"}, "edited": false, "score": 0, "creation_date": 1526399186, "post_id": 50346574, "comment_id": 87724909, "body": "And vendoring was promised with support of Go 1.10 - means not going happen anytime soon as even 1.9 is currently just in beta."}, {"owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "reply_to_user": {"reputation": 5174, "user_id": 1975086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e01df0a60ee2c34233ce48e32c21a3b8?s=128&d=identicon&r=PG", "display_name": "Alexander Trakhimenok", "link": "https://stackoverflow.com/users/1975086/alexander-trakhimenok"}, "edited": false, "score": 0, "creation_date": 1526399309, "post_id": 50346574, "comment_id": 87724992, "body": "Thanks, that looks very similar to what I had before (check OP). Maybe I could have investigated a bit more. At the moment I am quite happy with the alternative I have in place."}], "tags": [], "owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "is_accepted": false, "score": 1, "last_activity_date": 1526376104, "creation_date": 1526376104, "answer_id": 50346574, "question_id": 50334680, "link": "https://stackoverflow.com/questions/50334680/go-vendoring-on-app-engine-standard/50346574#50346574", "title": "Go vendoring on App Engine Standard", "body": "<p>Just in case anyone else struggles with this, this is the approach I've taken that seems to work for me.</p>\n\n<p>Directory structure looks like this:</p>\n\n<pre><code>/GOPATH\n\u251c\u2500\u2500/appengine\n|  \u251c\u2500\u2500/.git/\n|  \u251c\u2500\u2500/project1\n|  |  \u251c\u2500\u2500 app.yaml\n|  |  \u2514\u2500\u2500 app.go\n|  \u2514\u2500\u2500/project2\n|     \u251c\u2500\u2500 app.yaml\n|     \u2514\u2500\u2500 app.go\n\u2514\u2500\u2500/src\n   \u251c\u2500\u2500/project1\n   |  \u251c\u2500\u2500/.git/\n   |  \u251c\u2500\u2500/mutations/\n   |  \u251c\u2500\u2500/queries/\n   |  \u251c\u2500\u2500/types/\n   |  \u251c\u2500\u2500/vendor/\n   |  \u2514\u2500\u2500/main.go\n   \u2514\u2500\u2500/project2\n      \u251c\u2500\u2500/.git/\n      \u251c\u2500\u2500/foo/\n      \u251c\u2500\u2500/bar/\n      \u251c\u2500\u2500/vendor/\n      \u2514\u2500\u2500/main.go\n</code></pre>\n\n<p>Each <strong>app.go</strong> file below the appengine folder contains:</p>\n\n<pre><code>package projectX\n\nimport \"projectX\"\n\nfunc init() {\n    projectX.Run()\n}\n</code></pre>\n\n<p>Each <strong>main.go</strong> file below src/projectX contains:</p>\n\n<pre><code>package projectX\n\nimport (\n    // Import whatever you need\n    \"google.golang.org/appengine\"\n)\n\nfunc Run() {\n    // Do whatever you need\n    appengine.Main()\n}\n</code></pre>\n\n<p>Seems that having the folder that contains <strong>app.yaml</strong> outside of $GOPATH/src is indeed necessary.</p>\n\n<p>This is also not ideal for version control if you need to have each project versioned under their own git repo as opposed to having one monolyth repo. I solved this by versioning each project AND versioning the appengine folder as well separately.</p>\n"}, {"tags": [], "owner": {"reputation": 1380, "user_id": 1170354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H14HR.jpg?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/1170354/oliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1538010859, "creation_date": 1538010859, "answer_id": 52528047, "question_id": 50334680, "link": "https://stackoverflow.com/questions/50334680/go-vendoring-on-app-engine-standard/52528047#52528047", "title": "Go vendoring on App Engine Standard", "body": "<p>I was having issues with, spent ages looking around trying to figure out why it wasn't working. This answer is a little late but hopefully will be useful for anyone else who has this issue.</p>\n\n<p>I updated to use Go 1.11 which I thought wasn't supported (found one of the GCP examples on github using it <a href=\"https://github.com/GoogleCloudPlatform/golang-samples/tree/master/appengine/go11x/helloworld\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<p>Set <code>runtime: go111</code> in <code>app.yaml</code> and it will support vendoring and give you a link to a proper build log. </p>\n\n<p>Now my directory structure is as follows.</p>\n\n<p><code>\n/GOPATH\n\u2514\u2500\u2500/src\n   \u251c\u2500\u2500/project1\n   |  \u251c\u2500\u2500/.git/\n   |  \u251c\u2500\u2500/whateverCode/\n   |  \u251c\u2500\u2500/vendor/\n   |  \u2514\u2500\u2500/main.go\n   |  \u2514\u2500\u2500/app.yaml\n</code></p>\n\n<p>I assume if it supports Go 1.11 we could also use <a href=\"https://github.com/golang/go/wiki/Modules\" rel=\"nofollow noreferrer\">Modules</a> for versioning but I haven't looked into that yet.</p>\n"}], "owner": {"reputation": 791, "user_id": 1441597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/129c9d44240bafaa6ccf94fb89072c75?s=128&d=identicon&r=PG", "display_name": "SebScoFr", "link": "https://stackoverflow.com/users/1441597/sebscofr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1538010859, "creation_date": 1526314078, "last_edit_date": 1526331108, "question_id": 50334680, "link": "https://stackoverflow.com/questions/50334680/go-vendoring-on-app-engine-standard", "title": "Go vendoring on App Engine Standard", "body": "<p>I know this topic has been referenced a few times already. Unfortunately I still wasn't able to find a working solution for my use case.</p>\n\n<p>I can't seem to get vendoring working for my Go application on App Engine Standard. I'm using <a href=\"https://github.com/golang/dep\" rel=\"nofollow noreferrer\">dep</a> for vendoring.</p>\n\n<p>I'm building a GraphQL API and here is my folder structure:</p>\n\n<pre><code>/GOPATH\n\u2514\u2500\u2500/src\n   \u2514\u2500\u2500/acme\n      \u251c\u2500\u2500/app\n      |   \u251c\u2500\u2500 app.yaml\n      |   \u2514\u2500\u2500 app.go\n      \u251c\u2500\u2500/src\n      |   \u251c\u2500\u2500 /mutations/\n      |   \u251c\u2500\u2500 /queries/\n      |   \u2514\u2500\u2500 /types/\n      \u2514\u2500\u2500/vendor/\n</code></pre>\n\n<p>Running <code>goapp serve app/app.yaml</code> on Cloud Shell fails with </p>\n\n<pre><code>INFO     2018-05-14 15:42:08,386 devappserver2.py:764] Skipping SDK update check.\nINFO     2018-05-14 15:42:08,471 api_server.py:268] Starting API server at: http://0.0.0.0:47213\nINFO     2018-05-14 15:42:08,600 dispatcher.py:199] Starting module \"default\" running at: http://0.0.0.0:8080\nINFO     2018-05-14 15:42:08,601 admin_server.py:116] Starting admin server at: http://0.0.0.0:8000\nERROR    2018-05-14 15:42:13,983 go_runtime.py:181] Failed to build Go application: (Executed command: /google/go_appengine/goroot/bin/go-app-builder -app_base /home/xxx/gopath/src/acme/app -arch 6 -dynamic -goroot /google/go_appengine/goroot -gopath /home/xxx/gopath:/google/gopath -nobuild_files ^^$ -incremental_rebuild -unsafe -binary_name _go_app -extra_imports appengine_internal/init -work_dir /tmp/tmpbt8DA2appengine-go-bin -gcflags -I,/google/go_appengine/goroot/pkg/linux_amd64_appengine -ldflags -L,/google/go_appengine/goroot/pkg/linux_amd64_appengine app.go)\n/home/xxx/gopath/src/acme/vendor/github.com/graphql-go/graphql/definition.go:4: can't find import: \"context\"\n\n2018/05/14 15:42:09 Can't find package \"context\" in $GOPATH: cannot find package \"context\" in any of:\n        /home/xxx/gopath/src/acme/vendor/context (vendor tree)\n        /google/go_appengine/goroot/src/context (from $GOROOT)\n        /home/xxx/gopath/src/context (from $GOPATH)\n        /google/gopath/src/context\n</code></pre>\n\n<p>Looks like the problem might be that one vendor is not using a full dependency name for \"context\".\n(EDIT: probably not the case though since I\u2019m using 1.8)</p>\n\n<p>Has anyone ever managed to successfully deploy on App Engine Standard using vendoring? Been pulling my hair all day on this.</p>\n"}, {"tags": ["variables", "go", "scope", "switch-statement"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1526311890, "post_id": 50334006, "comment_id": 87684210, "body": "<code>:=</code> should be <code>=</code>."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526312904, "post_id": 50334006, "comment_id": 87684862, "body": "Duplicate of <a href=\"https://stackoverflow.com/q/18241655/13860\">stackoverflow.com/q/18241655/13860</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7449347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tXb7T.jpg?s=128&g=1", "display_name": "pag-r", "link": "https://stackoverflow.com/users/7449347/pag-r"}, "edited": false, "score": 0, "creation_date": 1526313346, "post_id": 50334370, "comment_id": 87685118, "body": "Yes, this was the issue. I didn&#39;t noticed that in a first place. Thanks for help"}], "tags": [], "owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "is_accepted": true, "score": 4, "last_activity_date": 1526312975, "creation_date": 1526312975, "answer_id": 50334370, "question_id": 50334006, "link": "https://stackoverflow.com/questions/50334006/golang-switch-variable-scope/50334370#50334370", "title": "Golang Switch variable scope", "body": "<p>Your issue is in this line:</p>\n\n<pre><code>resp, body, errs := req.Get(suburl)\n</code></pre>\n\n<p>The short variable declaration operator <code>:=</code> <em>creates new variables</em> and assigns values to them. These <em>new</em> variables are said to \"shadow\" the variables you created in the outer scope, because they have the same names and thus they \"hide\" the outer-scoped variables from within that scope. To fix the issue, just assign the values to your existing variables from the outer scope, instead of creating new ones:</p>\n\n<pre><code>resp, body, errs = req.Get(suburl)\n</code></pre>\n\n<p>Note the use here of assignment <code>=</code> instead of short declaration <code>:=</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 7449347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tXb7T.jpg?s=128&g=1", "display_name": "pag-r", "link": "https://stackoverflow.com/users/7449347/pag-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5742, "favorite_count": 0, "accepted_answer_id": 50334370, "answer_count": 1, "score": 1, "last_activity_date": 1526312975, "creation_date": 1526311743, "last_edit_date": 1526311966, "question_id": 50334006, "link": "https://stackoverflow.com/questions/50334006/golang-switch-variable-scope", "title": "Golang Switch variable scope", "body": "<p>I'm trying to figure out simple switch in Golang and I'm stuck with variable scope.</p>\n\n<pre><code>var body string\nvar errs error\nreq := gorequest.New()\nvar resp gorequest.Response\nswitch verb {\ncase 0:\n    resp, body, errs := req.Get(suburl).\n        Set(\"X-Auth-Token\", d.Token).\n        Set(\"Content-type\", \"application/json\").\n        End()\n}\nif errs != nil {\n    return &amp;ConnResponse{resp.StatusCode, body, fmt.Errorf(\"%s\", errs)}\n}\n</code></pre>\n\n<p>I've declared resp, body, errs and req before switch and I've thought that they will be available after the switch body. \nWhat compiler returns is below errors (from the case declaration)</p>\n\n<pre><code># command-line-arguments\n./conn.go:135:3: resp declared and not used\n./conn.go:135:9: body declared and not used\n./conn.go:135:15: errs declared and not used\n</code></pre>\n\n<p>So I'm curious is the variable scope inside switch body is somehow different from declared in function? How would this piece of code look like to be able to get access to data after switch body.</p>\n"}, {"tags": ["windows", "http", "go", "networking"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1526315655, "post_id": 50333925, "comment_id": 87686334, "body": "You could, of course, use any address in the <code>127.0.0.0&#47;8</code> block. Try it with a random address in the block to eliminate the possibility that another process is using the <code>127.0.0.1</code> address."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1526338857, "post_id": 50333925, "comment_id": 87696513, "body": "This seems like a problem with your Windows setup, not with your go code. To test this, try running netcat listening on port 8888 and see if you can connect to that with telnet. If you can&#39;t, I think you have a problem for Super User, not Stack Overflow."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1526338909, "post_id": 50333925, "comment_id": 87696521, "body": "Also, what does localhost resolve to? When you <code>ping localhost</code>, it should show something like `Pinging localhost (127.0.0.1) with 32 bytes of data&quot;. Is it showing something else?"}, {"owner": {"reputation": 21, "user_id": 5163173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rfDzGXBfkR0/AAAAAAAAAAI/AAAAAAAAAC0/Y82v7lraKw4/photo.jpg?sz=128", "display_name": "Jin Zhao", "link": "https://stackoverflow.com/users/5163173/jin-zhao"}, "edited": false, "score": 0, "creation_date": 1526440788, "post_id": 50333925, "comment_id": 87740333, "body": "Yes, it resolves to ::1 (ipv6) while using <code>ping localhost</code> likes the most of  windows environment."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5163173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rfDzGXBfkR0/AAAAAAAAAAI/AAAAAAAAAC0/Y82v7lraKw4/photo.jpg?sz=128", "display_name": "Jin Zhao", "link": "https://stackoverflow.com/users/5163173/jin-zhao"}, "edited": false, "score": 0, "creation_date": 1526313316, "post_id": 50334016, "comment_id": 87685100, "body": "Thanks for your answer. I checked them. These is no services conflicts with my program and no <code>XAMPP</code> running."}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 1, "creation_date": 1526326173, "post_id": 50334016, "comment_id": 87691599, "body": "ping is ICMP. It has nothing to do with TCP listening ports (ping will generally work even if there is nothing listening on any port)."}, {"owner": {"reputation": 48, "user_id": 3277883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp8Ci.jpg?s=128&g=1", "display_name": "Poseidon", "link": "https://stackoverflow.com/users/3277883/poseidon"}, "edited": false, "score": 0, "creation_date": 1526331763, "post_id": 50334016, "comment_id": 87694190, "body": "Just out of curiosity, does telnet return ping as well?"}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526339390, "post_id": 50334016, "comment_id": 87696633, "body": "@Poseidon, telnet works with TCP connections. Not sure what you mean by &quot;return ping&quot;; ping is the name of a program."}, {"owner": {"reputation": 48, "user_id": 3277883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp8Ci.jpg?s=128&g=1", "display_name": "Poseidon", "link": "https://stackoverflow.com/users/3277883/poseidon"}, "edited": false, "score": 0, "creation_date": 1526350870, "post_id": 50334016, "comment_id": 87698964, "body": "I meant was, can ping verify IP addresses for telnet as well. I googled and got to know know some interesting things.  Thanks for your help mate. :)"}], "tags": [], "owner": {"reputation": 48, "user_id": 3277883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp8Ci.jpg?s=128&g=1", "display_name": "Poseidon", "link": "https://stackoverflow.com/users/3277883/poseidon"}, "is_accepted": false, "score": 0, "last_activity_date": 1526311788, "creation_date": 1526311788, "answer_id": 50334016, "question_id": 50333925, "link": "https://stackoverflow.com/questions/50333925/why-cant-connect-to-http-service-binding-on-127-0-0-1-with-any-ports/50334016#50334016", "title": "Why can&#39;t connect to http service binding on 127.0.0.1 with any ports", "body": "<p>If <code>XAMPP</code> is running in your machine, the local server sometimes uses <code>127.0.0.1</code> as the default. \nThis could be the reason that <code>ping localhost</code> is working but telnet is not.  </p>\n\n<p>Otherwise check other network services or localservers you have running for any conflicts.</p>\n\n<p>Cheers!</p>\n"}], "owner": {"reputation": 21, "user_id": 5163173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rfDzGXBfkR0/AAAAAAAAAAI/AAAAAAAAAC0/Y82v7lraKw4/photo.jpg?sz=128", "display_name": "Jin Zhao", "link": "https://stackoverflow.com/users/5163173/jin-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2604, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526313643, "creation_date": 1526311462, "last_edit_date": 1526313643, "question_id": 50333925, "link": "https://stackoverflow.com/questions/50333925/why-cant-connect-to-http-service-binding-on-127-0-0-1-with-any-ports", "title": "Why can&#39;t connect to http service binding on 127.0.0.1 with any ports", "body": "<p>I wrote a simple http server in Go language as below:</p>\n\n<pre><code>http.ListenAndServe(\":8888\", http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n    w.Write([]byte(\"hello\"))\n}))\n</code></pre>\n\n<p>When I test it on certain machine runs Windows 7, I found client can't connect to the server. </p>\n\n<pre><code>telnet 127.0.0.1 8888\nconnecting 127.0.0.1\u2026 can't open connection to the host.  on port 8888: connect failed. (I translate it from Chinese.)\n</code></pre>\n\n<p>Then I got the results of other test case:</p>\n\n<ol>\n<li>ping localhost and 127.0.0.1, successful.</li>\n<li>telnet localhost 8888, successful.</li>\n<li>telnet ::1 8888, successful.</li>\n<li>netstat -ano | find \"8888\", the server has listened 0.0.0.0:8888 and :::8888.</li>\n<li>Check the hosts file of OS, it's default configuration (nothing else).</li>\n<li>Check the Network Adapter, it doesn't open IPV6 adapter.</li>\n<li>The machine is in domain network.</li>\n<li>The IP Security Policy is an empty list.</li>\n<li>When I opened the MMC(Microsoft Management Console), I got a warning like this:<br>\n<a href=\"https://i.stack.imgur.com/yM3Pk.jpg\" rel=\"nofollow noreferrer\">message box</a><br>\nIt mean's:<br>\n<strong>Can't find resource \"$(string.SiteDiscoveryEnableWMI)\" (references in property displayName)\u2028. File C:\\windows\\PolicyDefinitions\\inetres.admx, line 64620, row 235</strong></li>\n</ol>\n\n<p>Anyone can tell me what's going on?</p>\n"}, {"tags": ["pointers", "go", "error-handling", "pass-by-reference"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1526310337, "post_id": 50333428, "comment_id": 87683247, "body": "No there is not. Maybe just personal style or consistency. Sometimes you <i>must</i> use a pointer receiver. If your case does not fall in the &quot;must&quot; section: Choose whatever you like or makes sense."}], "answers": [{"comments": [{"owner": {"reputation": 7358, "user_id": 4551301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d1kFH.jpg?s=128&g=1", "display_name": "Kaedys", "link": "https://stackoverflow.com/users/4551301/kaedys"}, "edited": false, "score": 1, "creation_date": 1526310457, "post_id": 50333561, "comment_id": 87683323, "body": "Incidentally, if your structure is intended to be used inside an interface, the default should be a <i>value receiver</i> anyway.  Pointer receivers can only fulfill interfaces if a pointer is passed in to the interface.  Value receivers work for either pointers or values.  <a href=\"https://stackoverflow.com/questions/44370277/type-is-pointer-to-interface-not-interface-confusion/44372954#44372954\">Details</a>"}], "tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": false, "score": 1, "last_activity_date": 1526310300, "creation_date": 1526310300, "answer_id": 50333561, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers/50333561#50333561", "title": "Custom errors in golang and pointer receivers", "body": "<p>No :) </p>\n\n<p><a href=\"https://blog.golang.org/error-handling-and-go#TOC_2\" rel=\"nofollow noreferrer\">https://blog.golang.org/error-handling-and-go#TOC_2</a>.</p>\n\n<p>Go interfaces allow for anything that complies with the error interface to be handled by code expecting <code>error</code></p>\n\n<pre><code>type error interface {\n    Error() string\n}\n</code></pre>\n\n<p>Like you mentioned, If you don't plan to modify state there is little incentive to pass around pointers:</p>\n\n<ul>\n<li>allocating to heap</li>\n<li>GC pressure</li>\n<li>Mutable state and concurrency, etc</li>\n</ul>\n\n<hr>\n\n<p>On a random rant , Anecdotally, I personally think that seeing examples like this one are why new go programers favor pointer receivers by default.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 9362398, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "brun", "link": "https://stackoverflow.com/users/9362398/brun"}, "is_accepted": false, "score": 2, "last_activity_date": 1526311126, "last_edit_date": 1526311126, "creation_date": 1526310848, "answer_id": 50333739, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers/50333739#50333739", "title": "Custom errors in golang and pointer receivers", "body": "<p>Errors in go only satisfy the error interface, i.e. provide a <code>.Error()</code> method.  Creating custom errors, or digging through Go source code, you will find errors to be much more behind the scenes.  If a struct is being populated in your application, to avoid making copies in memory it is more efficient to pass it as a pointer.  Furthermore, as illustrated in The Go Programming Language book:</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>The fmt.Errorf function formats an error message using fmt.Sprintf and returns a new error value. We use it to build descriptive errors by successively prefixing additional context information to the original error message. When the error is ultimately handled by the program\u2019s main function, it should provide a clear causal chain from the root problem to the overall failure, reminiscent of a NASA accident investigation:</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p><code>genesis: crashed: no parachute: G-switch failed: bad relay orientation</code></p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>Because error messages are frequently chained together, message strings should not be capitalized and newlines should be avoided. The resulting errors may be long, but they will be self-contained when found by tools like grep.</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>From this we can see that if a single 'error type' holds a wealth of information, and on top of this we are 'chaining' them together to create a detailed message, using pointers will be the best way to achieve this.</p>\n"}, {"comments": [{"owner": {"reputation": 43895, "user_id": 25645, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b02cab91fb3c5604163c116c494de2a5?s=128&d=identicon&r=PG", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/25645/nathan-h"}, "edited": false, "score": 0, "creation_date": 1526367940, "post_id": 50333850, "comment_id": 87704086, "body": "Great detailed response. A co-worker thought, if we use non-pointer, we wouldn&#39;t be able to do the usual <code>if err != nil</code> - is that right?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 43895, "user_id": 25645, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b02cab91fb3c5604163c116c494de2a5?s=128&d=identicon&r=PG", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/25645/nathan-h"}, "edited": false, "score": 0, "creation_date": 1526368320, "post_id": 50333850, "comment_id": 87704302, "body": "@NathanH No, that&#39;s not correct. <code>nil</code> is not a valid value for structs, that&#39;s true, but if you work with <code>error</code> values (which may wrap your non-pointer struct), <code>error</code> is an interface type which may have a value of <code>nil</code> (that&#39;s the zero value for interface types). But I recommend to read this answer to clear things up: <a href=\"https://stackoverflow.com/questions/29138591/hiding-nil-values-understanding-why-golang-fails-here/29138676#29138676\">Hiding nil values, understanding why golang fails here</a>."}, {"owner": {"reputation": 129, "user_id": 4199496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75737447823001e40a5a3e3eeab4636?s=128&d=identicon&r=PG&f=1", "display_name": "drlolly", "link": "https://stackoverflow.com/users/4199496/drlolly"}, "edited": false, "score": 0, "creation_date": 1535704305, "post_id": 50333850, "comment_id": 91173392, "body": "PG. 196 of the GOPL (Donovan,Kernighan) make the same point, but this answer explains it in detail. In each cases return pointer or struct, New creates a distinct instances of errorString. It is the value  returned by new, an error interface,that is the problem. When a struct is returned the two instances of the error interface compare  equal since they have the same values, even though they were created from 2 distinct errorStruts. When a pointer is ret&#39;d, the two  ints of error are distinct, since the pointer refers to the two separate insts of errorString (created by each call to New)."}, {"owner": {"reputation": 4227, "user_id": 437506, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1f81d6e639fd42098d15302f098f0531?s=128&d=identicon&r=PG&f=1", "display_name": "Kedar Mhaswade", "link": "https://stackoverflow.com/users/437506/kedar-mhaswade"}, "edited": false, "score": 0, "creation_date": 1548597350, "post_id": 50333850, "comment_id": 95589616, "body": "I think &quot;... often it&#39;s useful to declare all methods with pointer receiver,&quot; could be rectified to say &quot;it may be the case that correctness depends on consistency&quot; and that mixing the methods of a type to have both pointer and non-pointer receivers may have undesirable side-effects. Here&#39;s an <a href=\"https://play.golang.org/p/AHrc55sZcq9\" rel=\"nofollow noreferrer\">example</a>."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 22, "last_activity_date": 1548597128, "last_edit_date": 1548597128, "creation_date": 1526311280, "answer_id": 50333850, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers/50333850#50333850", "title": "Custom errors in golang and pointer receivers", "body": "<p>First, the blog post you linked and took your example from, <code>appError</code> is <strong>not</strong> an <code>error</code>. It's a wrapper that <em>carriers</em> an error value and other related info used by the <em>implementation</em> of the examples, they are not exposed, and not <code>appError</code> nor <code>*appError</code> is ever used as an <code>error</code> value.</p>\n\n<p>So the example you quoted has nothing to do with your actual question. But to answer the question in title:</p>\n\n<p>In general, consistency may be the reason. If a type has many methods and some need pointer receiver (e.g. because they modify the value), often it's useful to declare all methods with pointer receiver, so there's no confusion about the <a href=\"https://golang.org/ref/spec#Method_sets\" rel=\"noreferrer\">method sets</a> of the type and the pointer type.</p>\n\n<p>Answering regarding <code>error</code> implementations: when you use a <code>struct</code> value to implement an <code>error</code> value, it's dangerous to use a non-pointer to implement the <code>error</code> interface. Why is it so?</p>\n\n<p>Because <a href=\"https://golang.org/pkg/builtin/#error\" rel=\"noreferrer\"><code>error</code></a> is an interface. And interface values are <a href=\"https://golang.org/ref/spec#Comparison_operators\" rel=\"noreferrer\">comparable</a>. And they are compared by comparing the values they wrap. <em>And you get different comparison result based what values / types are wrapped inside them!</em> Because if you store pointers in them, the error values will be equal if they store the same pointer. And if you store non-pointers (structs) in them, they are equal if the struct values are equal.</p>\n\n<p>To elaborate on this and show an example:</p>\n\n<p>The standard library has an <a href=\"https://golang.org/pkg/errors/\" rel=\"noreferrer\"><code>errors</code></a> package. You can create error values from <code>string</code> values using the <a href=\"https://golang.org/pkg/errors/#example_New\" rel=\"noreferrer\"><code>errors.New()</code></a> function. If you look at its implementation (<a href=\"https://golang.org/src/errors/errors.go\" rel=\"noreferrer\"><code>errors/errors.go</code></a>), it's simple:</p>\n\n<pre><code>// Package errors implements functions to manipulate errors.\npackage errors\n\n// New returns an error that formats as the given text.\nfunc New(text string) error {\n    return &amp;errorString{text}\n}\n\n// errorString is a trivial implementation of error.\ntype errorString struct {\n    s string\n}\n\nfunc (e *errorString) Error() string {\n    return e.s\n}\n</code></pre>\n\n<p>The implementation returns a pointer to a very simple struct value. This is so that if you create 2 error values with the same <code>string</code> value, they won't be equal:</p>\n\n<pre><code>e1 := errors.New(\"hey\")\ne2 := errors.New(\"hey\")\nfmt.Println(e1, e2, e1 == e2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>hey hey false\n</code></pre>\n\n<p>This is intentional.</p>\n\n<p>Now if you would return a non-pointer:</p>\n\n<pre><code>func New(text string) error {\n    return errorString{text}\n}\n\ntype errorString struct {\n    s string\n}\n\nfunc (e errorString) Error() string {\n    return e.s\n}\n</code></pre>\n\n<p>2 error values with the same <code>string</code> would be equal:</p>\n\n<pre><code>e1 = New(\"hey\")\ne2 = New(\"hey\")\nfmt.Println(e1, e2, e1 == e2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>hey hey true\n</code></pre>\n\n<p>Try the examples on the <a href=\"https://play.golang.org/p/IgI3uzEAEt1\" rel=\"noreferrer\">Go Playground</a>.</p>\n\n<p>A shining example why this is important: Look at the error value stored in the variable <a href=\"https://golang.org/pkg/io/#pkg-variables\" rel=\"noreferrer\"><code>io.EOF</code></a>:</p>\n\n<pre><code>var EOF = errors.New(\"EOF\")\n</code></pre>\n\n<p>It is expected that <a href=\"https://golang.org/pkg/io/#Reader\" rel=\"noreferrer\"><code>io.Reader</code></a> implementations return this specific error value to signal end of input. So you can peacefully compare the error returned by <code>Reader.Read()</code> to <code>io.EOF</code> to tell if end of input is reached. You can be sure that if they occasionally return custom errors, they will never be equal to <code>io.EOF</code>, this is what <code>errors.New()</code> guarantees (because it returns a pointer to an unexported struct value).</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 4439011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16dcdf5cf348529957102a729ca07d33?s=128&d=identicon&r=PG&f=1", "display_name": "Albert X.W.", "link": "https://stackoverflow.com/users/4439011/albert-x-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1531972478, "last_edit_date": 1531972478, "creation_date": 1531972080, "answer_id": 51414050, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers/51414050#51414050", "title": "Custom errors in golang and pointer receivers", "body": "<p>We can look at this from the error handling's perspective, instead of the error creation.</p>\n\n<p>Error Definiton Side's Story</p>\n\n<pre><code>type ErrType1 struct {}\n\nfunc (e *ErrType1) Error() string {\n    return \"ErrType1\"\n}\n\ntype ErrType2 struct {}\n\nfunc (e ErrType2) Error() string {\n    return \"ErrType1\"\n}\n</code></pre>\n\n<p>Error Handler Side's Story</p>\n\n<pre><code>err :=  someFunc()\nswitch err.(type) {\ncase *ErrType1\n   ...\ncase ErrType2, *ErrType2\n   ...\ndefault\n   ...\n}\n</code></pre>\n\n<p>As you can see, if you implements a error type on a value receiver, then when you are doing the type assertion, you need to worry about both cases.</p>\n\n<p>For <code>ErrType2</code>, both <code>&amp;ErrType2{}</code> and <code>ErrType2{}</code> satisfy the interface.</p>\n\n<p>Because <code>someFunc</code> returns an <code>error</code> interface, you never know if it returns a struct value or a struct pointer, especially when <code>someFunc</code> isn't written by you.</p>\n\n<p>Therefore, by using a pointer receiver doesn't stop a user from returning a pointer as an error.</p>\n\n<p>That been said, all other aspects such as\nStack vs. Heap (memory allocation, GC pressure) still apply.</p>\n\n<p>Choose your implementation according to your use cases.</p>\n\n<p>In general, I prefer to a pointer receiver for the reason I demonstrated above. I prefer to Friendly API over performance and sometimes, when error type contains huge information, it's more performant.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11226834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fuoo2.jpg?s=128&g=1", "display_name": "pauwlsky", "link": "https://stackoverflow.com/users/11226834/pauwlsky"}, "is_accepted": false, "score": -1, "last_activity_date": 1553004619, "last_edit_date": 1592644375, "creation_date": 1553004619, "answer_id": 55242985, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers/55242985#55242985", "title": "Custom errors in golang and pointer receivers", "body": "<p>The tour of go explains the general reasons for pointer receivers pretty well:</p>\n<p><a href=\"https://tour.golang.org/methods/8\" rel=\"nofollow noreferrer\">https://tour.golang.org/methods/8</a></p>\n<blockquote>\n<p>There are two reasons to use a pointer receiver.</p>\n<p>The first is so that the method can modify the value that its receiver points to.</p>\n<p>In general, all methods on a given type should have either value or pointer receivers, but not a mixture of both.</p>\n</blockquote>\n"}], "owner": {"reputation": 43895, "user_id": 25645, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b02cab91fb3c5604163c116c494de2a5?s=128&d=identicon&r=PG", "display_name": "Nathan H", "link": "https://stackoverflow.com/users/25645/nathan-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5168, "favorite_count": 3, "answer_count": 5, "score": 10, "last_activity_date": 1553004619, "creation_date": 1526309916, "last_edit_date": 1552648289, "question_id": 50333428, "link": "https://stackoverflow.com/questions/50333428/custom-errors-in-golang-and-pointer-receivers", "title": "Custom errors in golang and pointer receivers", "body": "<p>Reading about value receivers vs pointer receivers across the web and stackoverflow, I understand the basic rule to be: If you don't plan to modify the receiver, and the receiver is relatively small, there is no need for pointers.</p>\n\n<p>Then, reading about implementing the <code>error</code> interface (eg. <a href=\"https://blog.golang.org/error-handling-and-go\" rel=\"noreferrer\">https://blog.golang.org/error-handling-and-go</a>), I see that examples of the <code>Error()</code> function all use pointer receiver.</p>\n\n<p>Yet, we are not modifying the receiver, and the struct is very small.</p>\n\n<p>I feel like the code is much nicer without pointers (<code>return &amp;appError{}</code> vs <code>return appError{}</code>).</p>\n\n<p>Is there a reason why the examples are using pointers?</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1526305757, "post_id": 50331946, "comment_id": 87679871, "body": "Whats &#39;plain text&#39;?"}, {"owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1526306142, "post_id": 50331946, "comment_id": 87680164, "body": "ip  216.58.208.78 city  Mountain View  region California   country US   loc 37.4192,-122.0570   postal 9404"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1526306214, "post_id": 50331946, "comment_id": 87680216, "body": "<a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow noreferrer\">golang.org/pkg/encoding/json</a>"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1526306316, "post_id": 50331946, "comment_id": 87680298, "body": "JSON is plain text, can you detail what exactly you&#39;re trying to accomplish?"}, {"owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "edited": false, "score": 0, "creation_date": 1526306326, "post_id": 50331946, "comment_id": 87680304, "body": "go doc is really hard to understand"}, {"owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "edited": false, "score": 0, "creation_date": 1526306749, "post_id": 50331946, "comment_id": 87680612, "body": "i want to parse the output data properly.. without braces and symbols"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526307791, "post_id": 50331946, "comment_id": 87681387, "body": "&quot;without braces and symbols&quot; is not a suitable definition of &quot;plain text&quot;."}, {"owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "edited": false, "score": 0, "creation_date": 1526307810, "post_id": 50331946, "comment_id": 87681404, "body": "<code>ip: 216.58.208.78 city: Mountain View region: California country: US loc: 37.4192-122.0570 postal: 940431</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "edited": false, "score": 0, "creation_date": 1526319912, "post_id": 50335222, "comment_id": 87688439, "body": "<i>thanks, can you explain this with example? how to accomplish this in above code</i>"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "reply_to_user": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "edited": false, "score": 0, "creation_date": 1526320007, "post_id": 50335222, "comment_id": 87688490, "body": "There are countless examples already on the internet, in the godoc for the json package, and even on SO."}], "tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1526316172, "creation_date": 1526316172, "answer_id": 50335222, "question_id": 50331946, "link": "https://stackoverflow.com/questions/50331946/how-to-decode-json-data-go/50335222#50335222", "title": "how to decode json data Go", "body": "<p>You need to do two things:</p>\n\n<ol>\n<li><p>You need to unmarshal the JSON you have received from the server. The <a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow noreferrer\">json</a> package will do this for you.</p></li>\n<li><p>You need to output the data in a format you desire. You can just use <code>fmt.Printf</code> or similar for that.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 9787078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OPL2UBkNVn8/AAAAAAAAAAI/AAAAAAAAAB0/TCPUWfirex4/photo.jpg?sz=128", "display_name": "Inzamam Raja", "link": "https://stackoverflow.com/users/9787078/inzamam-raja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1526316216, "creation_date": 1526305643, "last_edit_date": 1526316216, "question_id": 50331946, "link": "https://stackoverflow.com/questions/50331946/how-to-decode-json-data-go", "title": "how to decode json data Go", "body": "<p>How can I get this output in clear text\nany easy method to parse the data?</p>\n\n<pre><code>func iplocation() {\n    var ip string\n    fmt.Print(\"Enter IP Adress: \")\n    fmt.Scan(&amp;ip)\n    lip, err := http.Get(\"http://ipinfo.io/\" + ip + \"/geo\")\n    if err != nil {\n        log.Fatal(err)\n        os.Exit(0)\n    }\n    defer lip.Body.Close()\n    loc, err := ioutil.ReadAll(lip.Body)\n    if err != nil {\n        log.Fatal(err)\n        os.Exit(0)\n    }\n    lstring := string(loc)\n    fmt.Println(lstring)\n    os.Exit(0)\n}\n</code></pre>\n\n<p><strong>output</strong> </p>\n\n<pre><code>{\n  \"ip\": \"216.58.208.78\",\n  \"city\": \"Mountain View\",\n  \"region\": \"California\",\n  \"country\": \"US\",\n  \"loc\": \"37.4192,-122.0570\",\n  \"postal\": \"94043\"\n}\n</code></pre>\n\n<p><strong><em>I want to get output just like this</em></strong></p>\n\n<pre><code>  ip: 216.58.208.78,\n  city: Mountain View,\n  region: California,\n  country: US,\n  loc: 37.4192,-122.0570,\n  postal: 94043 \n</code></pre>\n\n<p><em>not in json format</em></p>\n"}, {"tags": ["xml", "go", "soap", "xml-parsing", "wsdl"], "comments": [{"owner": {"reputation": 5044, "user_id": 1276480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8UB8.jpg?s=128&g=1", "display_name": "RayfenWindspear", "link": "https://stackoverflow.com/users/1276480/rayfenwindspear"}, "edited": false, "score": 0, "creation_date": 1526317984, "post_id": 50331825, "comment_id": 87687522, "body": "Well the name of the tag is <code>return</code> so why are you calling it <code>ResultsVO</code> in the struct? If you change the <code>XMLName</code> to <code>return</code> the compiler error goes away because it&#39;s no longer being referenced by two different xml tag names."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 1423048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e63e8cfee4094b2d259260b96fc9db?s=128&d=identicon&r=PG", "display_name": "Metin Guler", "link": "https://stackoverflow.com/users/1423048/metin-guler"}, "is_accepted": false, "score": 0, "last_activity_date": 1538418253, "creation_date": 1538418253, "answer_id": 52596788, "question_id": 50331825, "link": "https://stackoverflow.com/questions/50331825/name-return-in-tag-of-response-return-conflicts-with-name-result-in-result/52596788#52596788", "title": "name &quot;return&quot; in tag of Response.Return_ conflicts with name &quot;Result&quot; in *Result.XMLName", "body": "<p>i don't know the root of the problem but it should work when you delete `xml:\"return,omitempty\" from LoginToPublicPortalResponse Return_.</p>\n"}], "owner": {"reputation": 139, "user_id": 7903682, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2bb447d483be033ad6bf17197bd6c7ae?s=128&d=identicon&r=PG&f=1", "display_name": "user7903682", "link": "https://stackoverflow.com/users/7903682/user7903682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1600628995, "creation_date": 1526305321, "last_edit_date": 1600628995, "question_id": 50331825, "link": "https://stackoverflow.com/questions/50331825/name-return-in-tag-of-response-return-conflicts-with-name-result-in-result", "title": "name &quot;return&quot; in tag of Response.Return_ conflicts with name &quot;Result&quot; in *Result.XMLName", "body": "<p>The actual error is <code>name &quot;return&quot; in tag of LoginToPublicPortalResponse.Return_ conflicts with name &quot;ResultVO&quot; in *ResultsVO.XMLName</code>. The code was generated by <a href=\"https://github.com/hooklift/gowsdl\" rel=\"nofollow noreferrer\">gowsdl</a>, and its giving a conflict error when I try to call a method.\nHere is my classes:</p>\n<pre><code>type LoginToPublicPortalResponse struct {\n        XMLName xml.Name `xml:&quot;http://publicportal.rest.powerschool.pearson.com/xsd loginToPublicPortalResponse&quot;`\n\n        Return_ *ResultsVO `xml:&quot;return,omitempty&quot;`\n}\n\ntype ResultsVO struct {\n        XMLName xml.Name `xml:&quot;http://vo.rest.powerschool.pearson.com/xsd ResultsVO&quot;`\n\n        *BaseResultsVO\n\n        CourseRequestGroupsVOs []*CourseRequestGroupVO `xml:&quot;courseRequestGroupsVOs,omitempty&quot;`\n        CourseRequestRulesVO   *CourseRequestRulesVO   `xml:&quot;courseRequestRulesVO,omitempty&quot;`\n        StudentDataVOs         []*StudentDataVO        `xml:&quot;studentDataVOs,omitempty&quot;`\n        UserSessionVO          *UserSessionVO          `xml:&quot;userSessionVO,omitempty&quot;`\n}\n</code></pre>\n<p>this is the actual XML returned:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;soapenv:Body&gt;\n      &lt;ns:loginToPublicPortalResponse xmlns:ns=&quot;http://publicportal.rest.powerschool.pearson.com/xsd&quot;&gt;\n         &lt;return xmlns:ax290=&quot;http://vo.rest.powerschool.pearson.com/xsd&quot; xmlns:ax291=&quot;http://model.rest.powerschool.pearson.com/xsd&quot; xmlns:ax293=&quot;http://util.java/xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:type=&quot;ax290:ResultsVO&quot;&gt;\n            &lt;courseRequestRulesVO xsi:nil=&quot;true&quot; /&gt;\n            &lt;userSessionVO xsi:type=&quot;ax290:UserSessionVO&quot;&gt;\n               &lt;locale xsi:nil=&quot;true&quot; /&gt;\n               &lt;serverCurrentTime&gt;2018-05-14T10:33:05.260Z&lt;/serverCurrentTime&gt;\n               &lt;serverInfo xsi:type=&quot;ax291:ServerInfo&quot;&gt;\n                  &lt;apiVersion&gt;2.3.0&lt;/apiVersion&gt;\n                  &lt;dayLightSavings&gt;3600000&lt;/dayLightSavings&gt;\n                  &lt;parentSAMLEndPoint /&gt;\n                  &lt;publicPortalDisabled&gt;false&lt;/publicPortalDisabled&gt;\n                  &lt;publicPortalDisabledMessage xsi:nil=&quot;true&quot; /&gt;\n                  &lt;rawOffset&gt;-18000000&lt;/rawOffset&gt;\n                  &lt;serverTime&gt;2018-05-14T10:33:05.261Z&lt;/serverTime&gt;\n                  &lt;studentSAMLEndPoint /&gt;\n                  &lt;teacherSAMLEndPoint /&gt;\n                  &lt;timeZoneName&gt;EDT&lt;/timeZoneName&gt;\n               &lt;/serverInfo&gt;\n               &lt;serviceTicket&gt;AAABY142UccKhfZkXiTvJ7x/Qa7mtUVb07hutu6fLO9zh1dQUQQKWbkID4uOY9/9dwqDKgYewKpe6YXiJp3xFcmU/UOLl4Cwox4i10Ak1LXKzfLSKUiiH3SscaA9hOsH&lt;/serviceTicket&gt;\n               &lt;studentIDs&gt;207032&lt;/studentIDs&gt;\n               &lt;userId&gt;207032&lt;/userId&gt;\n               &lt;userType&gt;2&lt;/userType&gt;\n            &lt;/userSessionVO&gt;\n         &lt;/return&gt;\n      &lt;/ns:loginToPublicPortalResponse&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>Do I need to change return to ResultsVO? Stop embedding ResultsVO?</p>\n"}, {"tags": ["go", "split"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1526299697, "post_id": 50329885, "comment_id": 87675733, "body": "What have you tried? What problems did you encounter?"}, {"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1526300049, "post_id": 50329885, "comment_id": 87675940, "body": "Do you need to be able to escape \\ as well, e.g. <code>&quot;foo\\\\&#47;bar&quot;</code> would result in <code>[&quot;foo\\&quot;,&quot;bar&quot;]</code>?"}, {"owner": {"reputation": 2079, "user_id": 4233342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBkZL.jpg?s=128&g=1", "display_name": "yahavi", "link": "https://stackoverflow.com/users/4233342/yahavi"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526300393, "post_id": 50329885, "comment_id": 87676176, "body": "@Flimzy I tried FieldsFunc (No conditional splitting) and Regex (No &#39;not&#39; operator on go). However, I can do it with complicated loop."}, {"owner": {"reputation": 2079, "user_id": 4233342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBkZL.jpg?s=128&g=1", "display_name": "yahavi", "link": "https://stackoverflow.com/users/4233342/yahavi"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1526300468, "post_id": 50329885, "comment_id": 87676224, "body": "@Adrian No, I need to escape only /"}, {"owner": {"reputation": 721, "user_id": 8930534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0277bb31c0a6d6334cf3d287289bc17?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh", "link": "https://stackoverflow.com/users/8930534/hugh"}, "edited": false, "score": 0, "creation_date": 1526300559, "post_id": 50329885, "comment_id": 87676288, "body": "@yahavi Try having a look at how the Split method is implemented and use that for inspiration: <a href=\"https://golang.org/src/strings/strings.go?s=7118:7152#L288\" rel=\"nofollow noreferrer\">golang.org/src/strings/strings.go?s=7118:7152#L288</a> Show your attempt and we can suggest changes."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1526300710, "post_id": 50329885, "comment_id": 87676397, "body": "Please include your current code in your question. Explain its shortcomings and the specific problem you&#39;re trying to overcome."}, {"owner": {"reputation": 2079, "user_id": 4233342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBkZL.jpg?s=128&g=1", "display_name": "yahavi", "link": "https://stackoverflow.com/users/4233342/yahavi"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526301209, "post_id": 50329885, "comment_id": 87676759, "body": "@Flimzy There is no code to share. I can write the loop and upload it here, but I wanted to find out if go offers me a better way."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526301343, "post_id": 50329885, "comment_id": 87676860, "body": "Go offers the same &quot;way&quot; as any other Turing-complete language."}], "answers": [{"tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": false, "score": 3, "last_activity_date": 1526301572, "creation_date": 1526301572, "answer_id": 50330575, "question_id": 50329885, "link": "https://stackoverflow.com/questions/50329885/conditional-split-of-a-string/50330575#50330575", "title": "conditional split of a string", "body": "<p>You have two basic approaches available to you, regardless of the language you're using.</p>\n\n<ol>\n<li>Search for all occurrences of <code>/</code> that are not immediately preceded by <code>\\</code> and perform a split.</li>\n<li>Replace all instances of <code>\\/</code> with some unique symbol that does not contain <code>/</code>, then split on <code>/</code>, and replace the unique symbol with <code>\\/</code> again.</li>\n</ol>\n\n<p>From a computational standpoint, the former will be more efficient.</p>\n\n<p>From a coding complexity standpoint, the latter will likely be easier to write.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 1236484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ef536230063c55133e385812977080b?s=128&d=identicon&r=PG", "display_name": "Aestek", "link": "https://stackoverflow.com/users/1236484/aestek"}, "is_accepted": false, "score": 1, "last_activity_date": 1526301628, "creation_date": 1526301628, "answer_id": 50330596, "question_id": 50329885, "link": "https://stackoverflow.com/questions/50329885/conditional-split-of-a-string/50330596#50330596", "title": "conditional split of a string", "body": "<p>You can use something in the style of :</p>\n\n<pre><code>func split(str string) []string {\n    var parts []string\n    var current bytes.Buffer\n    escaped := false\n\n    for _, r := range str {\n        if r == '\\\\' &amp;&amp; !escaped {\n            escaped = true\n        } else if r == '/' &amp;&amp; !escaped {\n            parts = append(parts, current.String())\n            current.Reset()\n        } else {\n            escaped = false\n            current.WriteRune(r)\n        }\n    }\n    parts = append(parts, current.String())\n    return parts\n}\n</code></pre>\n\n<p>Go Playground link : <a href=\"https://play.golang.org/p/RwLwFlsAW2Q\" rel=\"nofollow noreferrer\">https://play.golang.org/p/RwLwFlsAW2Q</a></p>\n"}], "owner": {"reputation": 2079, "user_id": 4233342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zBkZL.jpg?s=128&g=1", "display_name": "yahavi", "link": "https://stackoverflow.com/users/4233342/yahavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1526302503, "creation_date": 1526299533, "last_edit_date": 1526302503, "question_id": 50329885, "link": "https://stackoverflow.com/questions/50329885/conditional-split-of-a-string", "title": "conditional split of a string", "body": "<p>I want to split a string of type 'a/b/c' and allow escaping by '\\'.\nFor example: </p>\n\n<pre><code>'foo/bar\\/2.2/baz':\na=foo\nb=bar/2.2\nc=baz\n</code></pre>\n\n<p>Is there any elegant way to split by '/', ignoring '\\/'?</p>\n"}, {"tags": ["mongodb", "go"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1526294529, "post_id": 50328188, "comment_id": 87672539, "body": "This is actually a very broad subject. There&#39;s really &quot;a lot&quot; of different ways to approach this, and anyone who even says there&#39;s a &quot;best practice&quot; is outright lying. The only thing that really matters here is &quot;how your application uses the data&quot;. Unfortunately it&#39;s a mantra that needs to be repeated for every question about &quot;what structure do I use for xyz scenario?&quot;. So you can use different records, you can use arrays within documents, you can also use document keys within a document for different time intervals. The variations usually come in &quot;how you read&quot; and &quot;how you write&quot;."}, {"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1526294872, "post_id": 50328188, "comment_id": 87672748, "body": "Usually though the &quot;general&quot; separation is between &quot;Date&quot; and &quot;Time&quot;. So instead of all the different fields, you can probably consider if simply a &quot;Date&quot; and something like &quot;milliseconds since start of day&quot; for each set of &quot;start&quot; and &quot;end&quot; will usually cover most cases. But we really don&#39;t know exactly what your application intends to do."}], "answers": [{"tags": [], "owner": {"reputation": 5576, "user_id": 4986182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5oDOo.png?s=128&g=1", "display_name": "vitr", "link": "https://stackoverflow.com/users/4986182/vitr"}, "is_accepted": false, "score": 0, "last_activity_date": 1526524352, "last_edit_date": 1592644375, "creation_date": 1526524352, "answer_id": 50382526, "question_id": 50328188, "link": "https://stackoverflow.com/questions/50328188/how-can-i-make-a-database-structure-in-mongodb-for-saving-the-date-range/50382526#50382526", "title": "How can I make a database structure in mongodb for saving the date range?", "body": "<p>I'd make something like this.</p>\n<ol>\n<li>Find the first Monday date from the date range (see for example <a href=\"https://stackoverflow.com/questions/19122477/how-do-i-get-the-first-monday-of-a-given-month-in-go\">How do I get the first Monday of a given month in Go?\n</a></li>\n<li>Mondays happen every week, so you can easily find the rest of dates by adding 7 days till the end date</li>\n<li>Store all the Monday dates you found with the start and end times</li>\n</ol>\n<p>I wouldn't bother with hours and minutes as you can easily get them from the timestamps in Go. Here is the simplified DB structure I would make</p>\n<pre><code>Fields for Schedule //Schedule is a collection name\n Id (int) \n Day (string)\n Date (timestamp) // the actual date\n Start (timestamp)\n End (timestamp)\n</code></pre>\n<p>You don't need any more fields. You can get the day of the week (Day (string) in your structure, e.g. Monday) from the Date field too, but I believe if you want to query the collection by different days, this might speed things up, but be careful if you need to adjust for time zones. If you work with more than one, then store everything in UTC and you may have an extra filed Timezone, cos a date could be Monday for one zone and Sunday for another.</p>\n<p>So, the Schedule will hold weekdays and start and end times for each of them. I'm not sure if you need to store initial date ranges, the Schedule collection will hold that range as well, form the first record to the last one. In my mind, I'd initially populate the collection with a given date range, then later on, I can modify it by adding new days, or deleting them.\nWhen you query this collection with some start and end date range for the Date field, if your first result comes newer than 7 days from the start, this means you miss 1 or more entries from the start. If the last result comes older than 7 days from the range end, this means you miss some entries prior to the range end.</p>\n<p>There is nothing specific to Go, in my opinion, Go works well with dates and you don't need any special date structures in your DB.</p>\n"}], "owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526524352, "creation_date": 1526293862, "last_edit_date": 1526294663, "question_id": 50328188, "link": "https://stackoverflow.com/questions/50328188/how-can-i-make-a-database-structure-in-mongodb-for-saving-the-date-range", "title": "How can I make a database structure in mongodb for saving the date range?", "body": "<p>Here I'm saving the date range using golang. Suppose we have to save the all monday comes between the range of the <code>1-may-2018</code> to <code>14-july-2018</code>.</p>\n\n<p>How we will find all the monday between these range using <strong>golang</strong> and on the other hand we have set the <code>start_time</code> (<code>8:00 A.M.</code>) and the <code>end_time</code> (<code>6:00 P.M.</code>) of the first two coming monday in the database but on the third monday we have a change in the schedule that there is a time change like <code>start_time</code> (<code>9:00 A.M.</code>) and <code>end_time</code> (<code>5:00 P.M.</code>). Then how I will make my database to make this situation in practically using the golang.</p>\n\n<p>Can Anybody help me for this to solve this solution. I made a database for and I do ppr work on it and make some fields shown below:-</p>\n\n<pre><code>Fields for Schedule //Schedule is a collection name\n Id (int)\n Day (string)\n Start_hours (int)\n Start_minutes (int)\n End_hours (int)\n End_minutes (int)\n Start_date (timestamp)\n End_date (timestamp)\n</code></pre>\n\n<p>How I will select monday between the selected range and how will I do the situation I explained above can anybody give guidance to me to make this situation easier. Thank you if this is a basic question then I'm really sorry. </p>\n"}, {"tags": ["angular", "go", "proxy", "apache2", "mod-proxy"], "answers": [{"comments": [{"owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "edited": false, "score": 0, "creation_date": 1526350662, "post_id": 50331116, "comment_id": 87698928, "body": "@convener Thanks for the tip , can you please update the answer with code, I am not much familiar and believe I will break something else if I try it."}], "tags": [], "owner": {"reputation": 15919, "user_id": 98959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd8df86ca823b368f838da3ff25f10c?s=128&d=identicon&r=PG", "display_name": "covener", "link": "https://stackoverflow.com/users/98959/covener"}, "is_accepted": false, "score": 0, "last_activity_date": 1526303332, "creation_date": 1526303332, "answer_id": 50331116, "question_id": 50327209, "link": "https://stackoverflow.com/questions/50327209/set-proxy-to-load-rest-api-from-different-url/50331116#50331116", "title": "Set proxy to load rest api from different url", "body": "<p>The *:8080 should beon the ProxyPass/ProxyPassReverse and NOT on the ServerName/ServerAlias.</p>\n"}], "owner": {"reputation": 2453, "user_id": 2647198, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/fhjZv.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/2647198/vikram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526303332, "creation_date": 1526290514, "question_id": 50327209, "link": "https://stackoverflow.com/questions/50327209/set-proxy-to-load-rest-api-from-different-url", "title": "Set proxy to load rest api from different url", "body": "<p>I am working on an angular app with rest api integrated, rest api are built with golang so running on 8080  port. I have used httpclient method to load data from api so its first sending OPTIONS request to server which takes time and then loads actual data. I want to get rid of this options request, one of the solutions suggested to set proxy to load api from same server where the app is hosted \nsuppose mmy app is on example.com and api are on example.com:8080 and I want to set proxy for example.com:8080 as example.com </p>\n\n<p>Not sure if its possible or not , I tried following but it didnt work </p>\n\n<pre><code>NameVirtualHost *:80 \n&lt;VirtualHost *:80&gt; \n    ServerName example.com:8080 \n    ServerAlias www.example.com:8080\n    ProxyRequests off \n    ProxyPass / http://example.com/ \n    ProxyPassReverse / http://example.com/  \n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>My app and api both are hosted on aws ec2 instance</p>\n"}, {"tags": ["go", "sleep", "channel", "ticker"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526288224, "post_id": 50326354, "comment_id": 87668611, "body": "The first part of your question is too broad. There are many ways to interrupt polling or a loop. Please show your actual code, so a proper, appropriate answer can be provided. For the second question, I don&#39;t know what you mean by &quot;instantaneous values&quot;. Again, please provide your code, and describe exactly what you want."}, {"owner": {"reputation": 2178, "user_id": 3067964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvonS.jpg?s=128&g=1", "display_name": "jwells131313", "link": "https://stackoverflow.com/users/3067964/jwells131313"}, "edited": false, "score": 0, "creation_date": 1526325634, "post_id": 50326354, "comment_id": 87691326, "body": "You can try <a href=\"https://github.com/jwells131313/goethe\" rel=\"nofollow noreferrer\">github.com/jwells131313/goethe</a> which has timers that go off at regular intervals.  You have a choice with the timers to be fixed or to restart the timer once the timer job completes"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526293482, "post_id": 50327779, "comment_id": 87671955, "body": "This is exactly what I was looking for! Thanks a lot for the detailed answer."}, {"owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526303456, "post_id": 50327779, "comment_id": 87678304, "body": "What will be the condition if I have more than one devices to poll each for 1 second or so. eg. device1 then sleep(s) then device2 then sleep(s)..like that. Do I need to create a channel for each device?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526303642, "post_id": 50327779, "comment_id": 87678439, "body": "@Logan You want to poll 2 devices, <i>alternating</i>? If so, just introduce a bool flag, indicating which to poll when the next tick arrives. And when it does, poll the device, and flip the flag."}, {"owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526356153, "post_id": 50327779, "comment_id": 87699995, "body": "Not just 2 devices, I am talking about 10 devices. Polling would be device1, 2, 3....10 in an infinite for loop and I wanted 5 second delay(sleep) after each device poll."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526368493, "post_id": 50327779, "comment_id": 87704409, "body": "@Logan If you have <code>n</code> devices, you may have an index telling which device to poll when the next tick comes in. After polling that device, increment the index, and zero it if it goes above the index of the last device. Still no need to have distinct tickers for each device if you want to poll them one after the other."}, {"owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526566181, "post_id": 50327779, "comment_id": 87802844, "body": "Got it, but I want some delay like 10 seconds in between each device poll so I have to sleep for 10 seconds and again this will block my condition."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526566337, "post_id": 50327779, "comment_id": 87802957, "body": "@Logan No, there is no sleep involved. Just like in the solution above, there is no sleep call. There is only a <code>Ticker</code> which delivers a value on its channel periodically. Same would be with 10 devices. What changes is the <code>read()</code> function. You could have your <code>n</code> devices listed in a slice, and an index (which to read). Once the device at that index is read, increment the index."}, {"owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "edited": false, "score": 0, "creation_date": 1526624499, "post_id": 50327779, "comment_id": 87825181, "body": "Finally got it!"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 4, "last_activity_date": 1526299835, "last_edit_date": 1526299835, "creation_date": 1526292424, "answer_id": 50327779, "question_id": 50326354, "link": "https://stackoverflow.com/questions/50326354/golang-interrupting-infinite-polling-having-time-sleep/50327779#50327779", "title": "Golang: Interrupting infinite polling having time.Sleep", "body": "<p>You cannot interrupt a <code>time.Sleep()</code>.</p>\n\n<p>Instead if you need to listen to other \"events\" while waiting for something, you should use channels and the <a href=\"https://golang.org/ref/spec#Select_statements\" rel=\"nofollow noreferrer\"><code>select</code></a> statements. A <code>select</code> is similar to a <code>switch</code>, but with the cases all referring to communication operations.</p>\n\n<p>The good thing of <code>select</code> is that you may list multiple cases, all refering to comm. ops (e.g. channel receives or sends), and whichever operation can proceed will be chosen (<a href=\"https://stackoverflow.com/questions/47645808/golang-how-the-select-worked-when-multiple-channel-involved/47648910#47648910\">choosing one randomly if multiple can proceed</a>). If none can proceed, it will block (wait) until one of the comm. ops can proceed (unless there's a <code>default</code>).</p>\n\n<p>A \"timeout\" event may be realized using <a href=\"https://golang.org/pkg/time/#Time.After\" rel=\"nofollow noreferrer\"><code>time.After()</code></a>, or a series of \"continuous\" timeout events (ticks or heartbeats) using <a href=\"https://golang.org/pkg/time/#Ticker\" rel=\"nofollow noreferrer\"><code>time.Ticker</code></a>.</p>\n\n<p>You should change your button handler to send a value (the button state) on a channel, so receiving from this channel can be added to the <code>select</code> inside <code>poll()</code>, and processed \"immediately\" (without waiting for a timeout or the next tick event).</p>\n\n<p>See this example:</p>\n\n<pre><code>func poll(buttonCh &lt;-chan bool) {\n    isDevice := false\n\n    read := func() {\n        if isDevice {\n            device1()\n        } else {\n            sensor1()\n        }\n    }\n\n    ticker := time.NewTicker(1 * time.Second)\n    defer func() { ticker.Stop() }()\n\n    for {\n        select {\n        case isDevice = &lt;-buttonCh:\n        case &lt;-ticker.C:\n            read()\n        }\n    }\n}\n\nfunc device1() { log.Println(\"reading device1\") }\nfunc sensor1() { log.Println(\"reading sensor1\") }\n</code></pre>\n\n<p>Testing it:</p>\n\n<pre><code>buttonCh := make(chan bool)\n\n// simulate a click after 2.5 seconds:\ngo func() {\n    time.Sleep(2500 * time.Millisecond)\n    buttonCh &lt;- true\n}()\n\ngo poll(buttonCh)\ntime.Sleep(5500 * time.Millisecond)\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/p7gq-9ctiuH\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>2009/11/10 23:00:01 reading sensor1\n2009/11/10 23:00:02 reading sensor1\n2009/11/10 23:00:03 reading device1\n2009/11/10 23:00:04 reading device1\n2009/11/10 23:00:05 reading device1\n</code></pre>\n\n<p>This solution makes it easy to add any number of event sources without changing anything. For example if you want to add a \"shutdown\" event and a \"read-now\" event to the above solution, this is how it would look like:</p>\n\n<pre><code>for {\n    select {\n    case isDevice = &lt;-buttonCh:\n    case &lt;-ticker.C:\n        read()\n    case &lt;-readNowCh:\n        read()\n    case &lt;-shutdownCh:\n        return\n    }\n}\n</code></pre>\n\n<p>Where <code>shutdownCh</code> is a channel with any element type, and to signal shutdown, you do that by closing it:</p>\n\n<pre><code>var shutdownCh = make(chan struct{})\n\n// Somewhere in your app:\nclose(shutdownCh)\n</code></pre>\n\n<p>Closing the channel has the advantage that you may have any number of goroutines \"monitoring\" it, all will receive the shutdown (this is like broadcasting). Receive from a closed channel can proceed immediately, yielding the zero-value of the channel's element type.</p>\n\n<p>To issue an \"immediate read\" action, you would send a value on <code>readNowCh</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 6821422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PHi21.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/6821422/jeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1843, "favorite_count": 0, "accepted_answer_id": 50327779, "answer_count": 1, "score": 3, "last_activity_date": 1526616346, "creation_date": 1526287849, "last_edit_date": 1526616346, "question_id": 50326354, "link": "https://stackoverflow.com/questions/50326354/golang-interrupting-infinite-polling-having-time-sleep", "title": "Golang: Interrupting infinite polling having time.Sleep", "body": "<p>I am using the following simple polling mechanism:</p>\n\n<pre><code>    func poll() {\n\n        for {\n            if a {\n                device1()\n                time.Sleep(time.Second * 10)\n            } else {\n                sensor1()\n                time.Sleep(time.Second * 10)\n            }\n        }\n    }\n</code></pre>\n\n<p>I need to poll the device1 only if \"a\" is true otherwise poll the sensor1. Now here \"a\" will be set to true by clicking the button on UI which will be a random act. </p>\n\n<p>But because of time.Sleep, delay get introduced while checking the condition.   </p>\n\n<p>Is there any way to immediately stop time.Sleep when I get the value for \"a\"?\nwhat are the possible ways to implement such interrupts while polling in golang?</p>\n"}, {"tags": ["go", "google-cloud-platform", "google-compute-engine"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1526298570, "post_id": 50325851, "comment_id": 87675038, "body": "Your posted code has nothing to do with the actual question."}, {"owner": {"reputation": 49, "user_id": 3520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d71958174559b02a8862f8e014708f?s=128&d=identicon&r=PG&f=1", "display_name": "mohaksharma", "link": "https://stackoverflow.com/users/3520296/mohaksharma"}, "reply_to_user": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1526526936, "post_id": 50325851, "comment_id": 87781284, "body": "@mbuechmann Edited the question to remove confusion"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d71958174559b02a8862f8e014708f?s=128&d=identicon&r=PG&f=1", "display_name": "mohaksharma", "link": "https://stackoverflow.com/users/3520296/mohaksharma"}, "edited": false, "score": 0, "creation_date": 1526368972, "post_id": 50332682, "comment_id": 87704670, "body": "This solution will only work on google cloud instances which makes it difficult to during development to run on local machine"}, {"owner": {"reputation": 731, "user_id": 9741888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d10bfb62d64f0e5b295949c22e0b454?s=128&d=identicon&r=PG&f=1", "display_name": "Temu", "link": "https://stackoverflow.com/users/9741888/temu"}, "reply_to_user": {"reputation": 49, "user_id": 3520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d71958174559b02a8862f8e014708f?s=128&d=identicon&r=PG&f=1", "display_name": "mohaksharma", "link": "https://stackoverflow.com/users/3520296/mohaksharma"}, "edited": false, "score": 0, "creation_date": 1526395439, "post_id": 50332682, "comment_id": 87722242, "body": "You can&#39;t fetch metadata of a compute instance if you are running it on local and not in a compute instance, but during development you might run it in a free instance. Look here: <a href=\"https://cloud.google.com/free/docs/always-free-usage-limits\" rel=\"nofollow noreferrer\">cloud.google.com/free/docs/always-free-usage-limits</a>"}], "tags": [], "owner": {"reputation": 731, "user_id": 9741888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d10bfb62d64f0e5b295949c22e0b454?s=128&d=identicon&r=PG&f=1", "display_name": "Temu", "link": "https://stackoverflow.com/users/9741888/temu"}, "is_accepted": false, "score": 1, "last_activity_date": 1526307770, "creation_date": 1526307770, "answer_id": 50332682, "question_id": 50325851, "link": "https://stackoverflow.com/questions/50325851/how-to-get-project-id-using-go-sdk-for-google-cloud-platform/50332682#50332682", "title": "How to get project ID using Go SDK for Google cloud platform?", "body": "<p>You can find out the project ID of the Compute Engine instance by using the Google Cloud API [1] with a GET <strong>request to</strong> <strong>\u201c<a href=\"http://metadata.google.internal/computeMetadata/v1/project/project-id\" rel=\"nofollow noreferrer\">http://metadata.google.internal/computeMetadata/v1/project/project-id</a>\u201d</strong> with the <strong>header \u201cMetadata-Flavor: Google\u201d</strong> in order to be allowed.</p>\n\n<p>It can be tested in the Cloud Shell or a secure shell (SSH) terminal by using:</p>\n\n<blockquote>\n  <p>curl\n  \"<a href=\"http://metadata.google.internal/computeMetadata/v1/project/project-id\" rel=\"nofollow noreferrer\">http://metadata.google.internal/computeMetadata/v1/project/project-id</a>\"\n  -H \"Metadata-Flavor: Google\"</p>\n</blockquote>\n\n<p>[1] : <a href=\"https://cloud.google.com/compute/docs/storing-retrieving-metadata#default\" rel=\"nofollow noreferrer\">https://cloud.google.com/compute/docs/storing-retrieving-metadata#default</a></p>\n"}, {"comments": [{"owner": {"reputation": 486, "user_id": 2672500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dcfdcfde8c781ab3be905da858d01d9?s=128&d=identicon&r=PG", "display_name": "Jean Spector", "link": "https://stackoverflow.com/users/2672500/jean-spector"}, "edited": false, "score": 2, "creation_date": 1560353146, "post_id": 50365313, "comment_id": 99710648, "body": "Using <code>error</code> as a variable name is not a great idea - there&#39;s a <i>built-in</i> interface with this name"}], "tags": [], "owner": {"reputation": 49, "user_id": 3520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d71958174559b02a8862f8e014708f?s=128&d=identicon&r=PG&f=1", "display_name": "mohaksharma", "link": "https://stackoverflow.com/users/3520296/mohaksharma"}, "is_accepted": true, "score": 2, "last_activity_date": 1616257466, "last_edit_date": 1616257466, "creation_date": 1526457500, "answer_id": 50365313, "question_id": 50325851, "link": "https://stackoverflow.com/questions/50325851/how-to-get-project-id-using-go-sdk-for-google-cloud-platform/50365313#50365313", "title": "How to get project ID using Go SDK for Google cloud platform?", "body": "<p>Figured out the correct API.</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;golang.org/x/net/context&quot;\n    &quot;google.golang.org/api/compute/v1&quot;\n    &quot;golang.org/x/oauth2/google&quot;\n)\n\nfunc main() {\n    ctx := context.Background()\n    credentials, err := google.FindDefaultCredentials(ctx,compute.ComputeScope)\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    fmt.Printf(credentials.ProjectID)\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d71958174559b02a8862f8e014708f?s=128&d=identicon&r=PG&f=1", "display_name": "mohaksharma", "link": "https://stackoverflow.com/users/3520296/mohaksharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1941, "favorite_count": 0, "accepted_answer_id": 50365313, "answer_count": 2, "score": 0, "last_activity_date": 1616257466, "creation_date": 1526285959, "last_edit_date": 1526526878, "question_id": 50325851, "link": "https://stackoverflow.com/questions/50325851/how-to-get-project-id-using-go-sdk-for-google-cloud-platform", "title": "How to get project ID using Go SDK for Google cloud platform?", "body": "<p>I would like to fetch project-id in Go through the service account I am using in my system so that whenever that code runs on a compute instance in GCP, it should retrieve the project-id where the compute instance lies. Also if I run the code from my local machine, it should get the project-id same as \"gcloud info\" command gets from command line.</p>\n\n<p>Does anyone have any idea which API to use in Go?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": true, "score": 3, "last_activity_date": 1526283291, "creation_date": 1526283291, "answer_id": 50325156, "question_id": 50325136, "link": "https://stackoverflow.com/questions/50325136/how-to-read-slice-in-reflect-fieldbyname/50325156#50325156", "title": "How to read slice in Reflect.FieldByName()", "body": "<p>You need to combine your two attempts:</p>\n\n<pre><code>sliceOfString, ok := DataInput.FieldByName(\"Recipients\").Interface().([]string)\nif !ok {\n    panic(\"Not a []string!\")\n}\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 9456506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "elham anari", "link": "https://stackoverflow.com/users/9456506/elham-anari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 50325156, "answer_count": 1, "score": 1, "last_activity_date": 1526283510, "creation_date": 1526283204, "last_edit_date": 1526283510, "question_id": 50325136, "link": "https://stackoverflow.com/questions/50325136/how-to-read-slice-in-reflect-fieldbyname", "title": "How to read slice in Reflect.FieldByName()", "body": "<p>I pass data to a func with input type interface.</p>\n\n<p>This code:</p>\n\n<pre><code>main(){\n    SampleData := Input{\n    Recipients: []string{\"abc\",\"efg\"},\n    Msg:        string(\"Test message\"),\n    }\n    InsertInSendTBL(SampleData)\n}\n\ntype Input struct {\n    Recipients []string\n    Msg        string\n    sender      string\n}\ntype Output struct {\n    Recipients    []string\n    Msg           string\n    reciver     string\n}\nfunc InsertInSendTBL(Data interface{}) {\n    DataInput := reflect.ValueOf(Data)\n    NewVal := Output{\n        Recipients: DataInput.FieldByName(\"Recipients\").([]string{}),//LINE ERORE\n        Msg:        DataInput.FieldByName(\"Msg\").String(),\n        sender:     \"1000\",\n    }\n}\n</code></pre>\n\n<p>One of my struct fields is slice of string. I searched in reflect package but not found anything so I use \".([]string{})\" .\nResult is this error:</p>\n\n<blockquote>\n  <p>invalid type assertion: DataInput.FieldByName(\"Recipients\").(composite literal) (non-interface type reflect.Value on left)</p>\n</blockquote>\n\n<p>so I try interface in reflect But another error</p>\n\n<blockquote>\n  <p>cannot use DataInput.FieldByName(\"Recipients\").Interface() (type interface {}) as type []string in field value: need type assertion</p>\n</blockquote>\n"}, {"tags": ["dictionary", "go", "merge", "slice"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1526281060, "post_id": 50324612, "comment_id": 87664869, "body": "What have you tried? What problems did you encounter? Include your code, the output and/or errors you received, and what you expected instead."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1526282140, "post_id": 50324612, "comment_id": 87665365, "body": "Also, stop using Go 1.7, it&#39;s not even supported anymore. Current latest is 1.10.2."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526285486, "post_id": 50324612, "comment_id": 87667082, "body": "Thanks for updating your question with the code. What is the problem you&#39;re having with that code?"}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 4786944, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb18930f3400e1851acfe1239c113816?s=128&d=identicon&r=PG", "display_name": "CallMeLoki", "link": "https://stackoverflow.com/users/4786944/callmeloki"}, "edited": false, "score": 0, "creation_date": 1526284268, "post_id": 50325337, "comment_id": 87666510, "body": "it doesnt work with duplicated values in slice try using <a href=\"https://github.com/fatih/set\" rel=\"nofollow noreferrer\">github.com/fatih/set</a> for that"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 1152, "user_id": 4786944, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb18930f3400e1851acfe1239c113816?s=128&d=identicon&r=PG", "display_name": "CallMeLoki", "link": "https://stackoverflow.com/users/4786944/callmeloki"}, "edited": false, "score": 0, "creation_date": 1526284319, "post_id": 50325337, "comment_id": 87666533, "body": "@danicheeta Yes, duplicate values will be listed multiple times. This may or may not be what the asker wants, he didn&#39;t say anything about this."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 97, "user_id": 3809560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4221ab68448e9413c315147180574ac0?s=128&d=identicon&r=PG&f=1", "display_name": "user3809560", "link": "https://stackoverflow.com/users/3809560/user3809560"}, "edited": false, "score": 0, "creation_date": 1526284590, "post_id": 50325337, "comment_id": 87666679, "body": "@user3809560 Do you want to handle duplicates? I mean if the same <code>&quot;id_1&quot;: &quot;val_1&quot;</code> pair is contained in multiple input maps, is it OK that it will be listed multiple times in the target like <code>&quot;id_1&quot;: [&quot;val_1&quot;, &quot;val_x&quot;, &quot;val_1&quot;]</code>? Or you want to filter out these duplicates?"}, {"owner": {"reputation": 97, "user_id": 3809560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4221ab68448e9413c315147180574ac0?s=128&d=identicon&r=PG&f=1", "display_name": "user3809560", "link": "https://stackoverflow.com/users/3809560/user3809560"}, "edited": false, "score": 0, "creation_date": 1526287964, "post_id": 50325337, "comment_id": 87668472, "body": "@icza, you have used a for loop within srcMap. What control structure is it. Is it supported in 1.7"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 97, "user_id": 3809560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4221ab68448e9413c315147180574ac0?s=128&d=identicon&r=PG&f=1", "display_name": "user3809560", "link": "https://stackoverflow.com/users/3809560/user3809560"}, "edited": false, "score": 0, "creation_date": 1526288156, "post_id": 50325337, "comment_id": 87668572, "body": "@user3809560 Yes, it&#39;s supported by Go 1.7 (but you really should drop Go 1.7 and go with Go 1.10.2). There are 3 loops in the 2nd version. The most outer loops over the slice of input maps (<code>ms</code>), the 2nd loop loops over an input map (<code>m</code>), and the most inner loop loops over a slice value of the result map to check for a duplicate."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 9, "last_activity_date": 1526287668, "last_edit_date": 1526287668, "creation_date": 1526283911, "answer_id": 50325337, "question_id": 50324612, "link": "https://stackoverflow.com/questions/50324612/merge-maps-in-golang/50325337#50325337", "title": "Merge Maps in Golang", "body": "<h2>Simple merge</h2>\n\n<p>Yes, they can be merged, but since in the result map there may be multiple values associated to the same key, the value type should be a slice, such as <code>map[string][]string</code>.</p>\n\n<p>To do the merge, simply range over the maps to be merged, and append each value from the source maps to the slice associated with the same key in the result map.</p>\n\n<p>One thing to look out for is that once you do the append, you have to assign back the result slice to the same key in the result map.</p>\n\n<p>This is a simple implementation:</p>\n\n<pre><code>func merge(ms ...map[string]string) map[string][]string {\n    res := map[string][]string{}\n    for _, m := range ms {\n        for k, v := range m {\n            res[k] = append(res[k], v)\n        }\n    }\n    return res\n}\n</code></pre>\n\n<p>This <code>merge()</code> function has a variadic parameter, which means you may pass any number of maps to it.</p>\n\n<p>Note that you don't need to initialize the slices in the target map, as indexing a map with a key that is not yet in it will result in the <a href=\"https://golang.org/ref/spec#The_zero_value\" rel=\"noreferrer\">zero value</a> of its type (which is <code>nil</code> for slices), and you may append to a <code>nil</code> slice, the builtin <a href=\"https://golang.org/pkg/builtin/#append\" rel=\"noreferrer\"><code>append()</code></a> function takes care of (re-)allocations.</p>\n\n<p>Testing it:</p>\n\n<pre><code>m1 := map[string]string{\"id_1\": \"val_1\"}\nm2 := map[string]string{\"id_2\": \"val_2\"}\nm3 := map[string]string{\"id_1\": \"val_3\"}\n\nres := merge(m1, m2, m3)\nfmt.Println(res)\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/K6r2FeHaprV\" rel=\"noreferrer\">Go Playground</a>):</p>\n\n<pre><code>map[id_1:[val_1 val_3] id_2:[val_2]]\n</code></pre>\n\n<h2>Avoiding duplicates</h2>\n\n<p>Note that the above <code>merge()</code> will not filter out duplicates, meaning if the same <code>\"id_1\": \"val_1\"</code> pair is contained in multiple input maps, it will be listed multiple times in the target like <code>\"id_1\": [\"val_1\", \"val_1\", \"val_x\"]</code>. To filter out such duplicates (to only list it once in the target), we have to check this before doing the append (and if we've encountered it before, skip the append).</p>\n\n<p>This is how it could be done:</p>\n\n<pre><code>func merge(ms ...map[string]string) map[string][]string {\n    res := map[string][]string{}\n    for _, m := range ms {\n    srcMap:\n        for k, v := range m {\n            // Check if (k,v) was added before:\n            for _, v2 := range res[k] {\n                if v == v2 {\n                    continue srcMap\n                }\n            }\n            res[k] = append(res[k], v)\n        }\n    }\n    return res\n}\n</code></pre>\n\n<p>Testing it:</p>\n\n<pre><code>m1 := map[string]string{\"id_1\": \"val_1\"}\nm2 := map[string]string{\"id_2\": \"val_2\", \"id_1\": \"val_1\"}\nm3 := map[string]string{\"id_1\": \"val_3\"}\n\nres := merge(m1, m2, m3)\nfmt.Println(res)\n</code></pre>\n\n<p>Output (try it on the <a href=\"https://play.golang.org/p/HXVp-eUP3oK\" rel=\"noreferrer\">Go Playground</a>):</p>\n\n<pre><code>map[id_1:[val_1 val_3] id_2:[val_2]]\n</code></pre>\n\n<p>We can see that <code>\"id_1\": \"val_1\"</code> was included both in <code>m1</code> and <code>m2</code>, yet the value <code>\"val_1\"</code> is only listed once in in the slice associated with <code>\"id_1\"</code> key in the target map.</p>\n"}], "owner": {"reputation": 97, "user_id": 3809560, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4221ab68448e9413c315147180574ac0?s=128&d=identicon&r=PG&f=1", "display_name": "user3809560", "link": "https://stackoverflow.com/users/3809560/user3809560"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11327, "favorite_count": 3, "answer_count": 1, "score": 4, "last_activity_date": 1526287668, "creation_date": 1526281001, "last_edit_date": 1526284275, "question_id": 50324612, "link": "https://stackoverflow.com/questions/50324612/merge-maps-in-golang", "title": "Merge Maps in Golang", "body": "<p>I need to merge multiple maps <code>map1 = [ id: id_1 val: val_1 ]</code>, <code>map2 = [ id: id_2 val: val_2 ]</code> and  <code>map3 = [id: id_1, val: val_3]</code> such that the result map should be merged on the <code>id</code> values:</p>\n\n<pre><code>result_map = [id: id_1 val: {val_1, val_3}, id: id_2 var: {val_2}} ]\n</code></pre>\n\n<p>The code I've tried:</p>\n\n<pre><code>var a = make(map[string]interface{})\nfor _, m := range data {\n    for _, n := range data {\n        if m[\"id\"] == n[\"id\"] {\n            for l, k := range n {\n                c[l] = k\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Is there a way this can be done? Am using Golang 1.7</p>\n\n<p>Thanks</p>\n"}, {"tags": ["performance", "go", "redis"], "comments": [{"owner": {"reputation": 2245, "user_id": 78569, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff86b5a4d2ed04ef2e97af337b694bc9?s=128&d=identicon&r=PG&f=1", "display_name": "Imaskar", "link": "https://stackoverflow.com/users/78569/imaskar"}, "edited": false, "score": 0, "creation_date": 1526468465, "post_id": 50323873, "comment_id": 87754165, "body": "So what is the output for your timings?"}], "answers": [{"comments": [{"owner": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "edited": false, "score": 0, "creation_date": 1526277942, "post_id": 50323897, "comment_id": 87663550, "body": "Redis has not been the issue. Something else in the above code is taking 3ms to 5ms or sometimes more."}, {"owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "reply_to_user": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "edited": false, "score": 0, "creation_date": 1526278001, "post_id": 50323897, "comment_id": 87663577, "body": "Did you read the part (2)? It is round trip time between your app server and redis. It often takes the most significant time and vary by network condition"}, {"owner": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "edited": false, "score": 0, "creation_date": 1526278109, "post_id": 50323897, "comment_id": 87663614, "body": "Thanks for your response. But isn&#39;t that time accounted in &quot;time.Since(startPipeTime)&quot;"}, {"owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "reply_to_user": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "edited": false, "score": 0, "creation_date": 1526279107, "post_id": 50323897, "comment_id": 87664025, "body": "Which redis client are you using?"}, {"owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "reply_to_user": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "edited": false, "score": 0, "creation_date": 1526279708, "post_id": 50323897, "comment_id": 87664280, "body": "I think you&#39;re calling pipeline asynchronously"}], "tags": [], "owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "is_accepted": false, "score": 1, "last_activity_date": 1526277794, "creation_date": 1526277794, "answer_id": 50323897, "question_id": 50323873, "link": "https://stackoverflow.com/questions/50323873/missing-milliseconds-in-the-go-code-performing-redis-operation/50323897#50323897", "title": "Missing milliseconds in the Go code performing redis operation", "body": "<p>Time to execute a redis command include:</p>\n\n<ol>\n<li>App server pre-processing</li>\n<li>Round trip time between app server and redis server</li>\n<li>Redis server processing time</li>\n</ol>\n\n<p>In normal operation, (2) takes the most significant time.</p>\n"}], "owner": {"reputation": 891, "user_id": 7495321, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Go0zmWTKK88/AAAAAAAAAAI/AAAAAAAAHWs/MajAsM4ECDs/photo.jpg?sz=128", "display_name": "Pramod Shashidhara", "link": "https://stackoverflow.com/users/7495321/pramod-shashidhara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526277833, "creation_date": 1526277643, "last_edit_date": 1526277833, "question_id": 50323873, "link": "https://stackoverflow.com/questions/50323873/missing-milliseconds-in-the-go-code-performing-redis-operation", "title": "Missing milliseconds in the Go code performing redis operation", "body": "<p>Below is the sample snippet for getting value from Redis. I'm pipeling 3 redis commands and getting the values. The problem here is \"missing milliseconds\". The time taken by redis pipeline is significantly lower ( less than 5ms) but the overall time taken to perform a Get Operation is more than 10ms. Not sure which operation is taking time, unmarshal is not the issue, as I measured the len(bytes) and timing. Any help is much appreciated. </p>\n\n<p>Request/Second = 300, running on 3 AWS large instances with a powerful 25GB redis instance. Using 10 default connections.</p>\n\n<pre><code>func Get(params...) &lt;-chan CacheResult {\n    start := time.Now()\n    var res CacheResult\n    defer func() {\n            resCh &lt;- res\n    }()\n\n    type timers struct {\n        total     time.Duration\n        pipeline  time.Duration\n        unmarshal time.Duration\n    }\nt := timers{}\n\n    startPipeTime := time.Now()\n    // pipe line commands\n    pipe := c.client.Pipeline()\n    // 3 commands pipelined (HGET, HEGT, GET)\n    if _, res.Err = pipe.Exec(); res.Err != nil &amp;&amp; res.Err != redis.Nil {\n                    return resCh\n    }\n    sinceStartPipeTime := time.Since(startPipeTime)\n\n// get query values like below for HGET &amp; GET\nif val, res.Err = cachedValue.Bytes(); res.Err != nil {\n    return resCh\n}\n\n// Unmarshal the query value\nstartUnmarshalTime := time.Now()\nvar cv common.CacheValue\nif res.Err = json.Unmarshal(val, &amp;cv); res.Err != nil {\n    return resCh\n}\nsinceStartUnmarshalTime := time.Since(startUnmarshalTime)\nt.unmarshal = sinceStartUnmarshalTime\n\nendTime := time.Since(start)\nxlog.Infof(\"Timings total:%s, \"+\n        \"pipeline(redis):%s, unmarshaling(%vB):%s\", t.total, t.pipeline, len(val), t.unmarshal)\nreturn resCh\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["go", "garbage-collection", "go-map"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1526276420, "post_id": 50323147, "comment_id": 87663003, "body": "Yes, of course. Why do you ask?"}, {"owner": {"reputation": 136, "user_id": 8451486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WNzH.jpg?s=128&g=1", "display_name": "Deepak Kumar", "link": "https://stackoverflow.com/users/8451486/deepak-kumar"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526286221, "post_id": 50323147, "comment_id": 87667495, "body": "I am very new to go, and was not sure if this is the right way of de-referencing."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1526287219, "post_id": 50323147, "comment_id": 87668039, "body": "In Go &quot;dereferencing&quot; is the process of dereferencing a pointer to the value it points to, e.g. <code>*p</code>. There is no need to do &quot;dereferencing to allow garbage collection&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "is_accepted": true, "score": 1, "last_activity_date": 1526298616, "last_edit_date": 1526298616, "creation_date": 1526275043, "answer_id": 50323479, "question_id": 50323147, "link": "https://stackoverflow.com/questions/50323147/golang-de-reference-a-map/50323479#50323479", "title": "golang de-reference a map", "body": "<p><a href=\"https://golang.org/doc/faq#stack_or_heap\" rel=\"nofollow noreferrer\">Golang FAQ</a> on garbage collection:</p>\n\n<blockquote>\n  <p>Each variable in Go exists as long as there are references to it. If\n  the compiler cannot prove that the variable is not referenced after\n  the function returns, then the compiler must allocate the variable on\n  the garbage-collected heap to avoid dangling pointer errors.</p>\n</blockquote>\n\n<p>In case there are no references used for the current map it will be garbage collected by the language. But for deleting a map There is no process other than looping over it and delete the keys one by one. as</p>\n\n<pre><code>myMap := make(map[string]bool)\nfor k, _ := range myMap{\n    delete(myMap, k)\n}\n</code></pre>\n\n<p>If you re-initialze the map using <code>make</code> it will not going to de-reference the same it will clear the map but will not dereference it. If you check for its len it will become <code>zero</code></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    myMap := make(map[string]bool)\n\n    myMap[\"Jan\"] = true\n    myMap[\"Feb\"] = false\n    myMap[\"Mar\"] = true\n    fmt.Println(len(myMap))\n    myMap = make(map[string]bool)\n    fmt.Println(len(myMap))\n\n}\n</code></pre>\n\n<p>Along with that if you prints the address it points to same address. </p>\n\n<pre><code>fmt.Printf(\"address: %p \\n\", &amp;myMap)\nmyMap = make(map[string]bool)\nfmt.Printf(\"address: %p \", &amp;myMap)\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/B7GnYxBKtOf\" rel=\"nofollow noreferrer\">Playground Example</a></p>\n"}], "owner": {"reputation": 136, "user_id": 8451486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WNzH.jpg?s=128&g=1", "display_name": "Deepak Kumar", "link": "https://stackoverflow.com/users/8451486/deepak-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 1, "accepted_answer_id": 50323479, "answer_count": 1, "score": 0, "last_activity_date": 1531550913, "creation_date": 1526272450, "last_edit_date": 1531550913, "question_id": 50323147, "link": "https://stackoverflow.com/questions/50323147/golang-de-reference-a-map", "title": "golang de-reference a map", "body": "<p>Here is a sample code that creates a Map of string keys having value of bool.</p>\n\n<pre><code>myMap := make(map[string]bool)\n\nmyMap[\"Jan\"] = true\nmyMap[\"Feb\"] = false\nmyMap[\"Mar\"] = true\n</code></pre>\n\n<p>After doing some operation on this map, I want to delete it. I don't want to use for loop to iterate through each key and delete.</p>\n\n<p>If I do re-initialize myMap again (like following), does it de-references the original and subject to garbage collection?</p>\n\n<pre><code>myMap = make(map[string]bool)\n</code></pre>\n"}, {"tags": ["go", "hash", "concurrency"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526265281, "post_id": 50322182, "comment_id": 87660642, "body": "Show what you tried."}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526265867, "post_id": 50322182, "comment_id": 87660734, "body": "this is what I tried, not sure if that how it should be done, <a href=\"https://play.golang.org/p/vp7s512l8w4\" rel=\"nofollow noreferrer\">play.golang.org/p/vp7s512l8w4</a>"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526266669, "post_id": 50322182, "comment_id": 87660846, "body": "See <a href=\"https://stackoverflow.com/questions/18405023/how-would-you-define-a-pool-of-goroutines-to-be-executed-at-once-in-golang\" title=\"how would you define a pool of goroutines to be executed at once in golang\">stackoverflow.com/questions/18405023/&hellip;</a>"}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "reply_to_user": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1526266841, "post_id": 50322182, "comment_id": 87660866, "body": "thanks, the only part I&#39;m confused about is when reading the content from a file since I have to read line by line. how would you apply it to the example above, tried many times did not work."}, {"owner": {"reputation": 356, "user_id": 5370653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OKKAm9qfvyI/AAAAAAAAAAI/AAAAAAAAABM/Ud-YjhllKFU/photo.jpg?sz=128", "display_name": "Ksir", "link": "https://stackoverflow.com/users/5370653/ksir"}, "edited": false, "score": 0, "creation_date": 1526267755, "post_id": 50322182, "comment_id": 87661001, "body": "<a href=\"https://play.golang.org/p/ZRYAr_OZK6d\" rel=\"nofollow noreferrer\">play.golang.org/p/ZRYAr_OZK6d</a>  maybe this is what you want"}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526268260, "post_id": 50322182, "comment_id": 87661089, "body": "Thanks, this is exactly what I&#39;m looking for. however, it keeps waiting after its done and throws an error &quot;fatal error: all goroutines are asleep - deadlock!&quot; this is what I tried <a href=\"https://play.golang.org/p/08Y3Ar0B4Tg\" rel=\"nofollow noreferrer\">play.golang.org/p/08Y3Ar0B4Tg</a>"}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526268569, "post_id": 50322182, "comment_id": 87661137, "body": "oh maybe this is why :-) <a href=\"https://play.golang.org/p/vhIXiwDi9BC\" rel=\"nofollow noreferrer\">play.golang.org/p/vhIXiwDi9BC</a>"}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526269263, "post_id": 50322752, "comment_id": 87661237, "body": "Thanks a lot. question, if do_hash is a heavy operation, and there are 100 workers, is it going to wait until one at least is released?"}, {"owner": {"reputation": 356, "user_id": 5370653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OKKAm9qfvyI/AAAAAAAAAAI/AAAAAAAAABM/Ud-YjhllKFU/photo.jpg?sz=128", "display_name": "Ksir", "link": "https://stackoverflow.com/users/5370653/ksir"}, "reply_to_user": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526269564, "post_id": 50322752, "comment_id": 87661292, "body": "wait until all the 100 worker goroutines finish theirs work and quit"}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526413937, "post_id": 50322752, "comment_id": 87732931, "body": "nice, so what exactly the purpose of c &lt;- struct{}{} in this context?"}, {"owner": {"reputation": 356, "user_id": 5370653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OKKAm9qfvyI/AAAAAAAAAAI/AAAAAAAAABM/Ud-YjhllKFU/photo.jpg?sz=128", "display_name": "Ksir", "link": "https://stackoverflow.com/users/5370653/ksir"}, "reply_to_user": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1526457712, "post_id": 50322752, "comment_id": 87746923, "body": "like a counter, c &lt;- struct{}{} push an item into the chan buffer, and &lt;- ch consume an item, This mechanism is used to restrict the maximum number of goroutines"}], "tags": [], "owner": {"reputation": 356, "user_id": 5370653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OKKAm9qfvyI/AAAAAAAAAAI/AAAAAAAAABM/Ud-YjhllKFU/photo.jpg?sz=128", "display_name": "Ksir", "link": "https://stackoverflow.com/users/5370653/ksir"}, "is_accepted": true, "score": 2, "last_activity_date": 1526268752, "creation_date": 1526268752, "answer_id": 50322752, "question_id": 50322182, "link": "https://stackoverflow.com/questions/50322182/bounded-parallelism-to-hash-strings/50322752#50322752", "title": "bounded parallelism to hash strings", "body": "<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"os\"\n    \"sync\"\n)\n\nfunc hashPhoneNumers(phoneNO string, ch chan struct{}, group *sync.WaitGroup) {\n    do_hash(phoneNO)\n    &lt;-ch\n    group.Done()\n}\n\nfunc do_hash(s string) {\n    fmt.Println(\"do hash: \", s)\n}\n\nfunc main() {\n    c := make(chan struct{}, 100)\n    file, err := os.Open(\"file.txt\")\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(-1)\n    }\n    defer file.Close()\n    line := bufio.NewScanner(file)\n\n    wg := sync.WaitGroup{}\n    for line.Scan() {\n        // with a maximum of 100 concurrent process maximum\n        c &lt;- struct{}{}\n        wg.Add(1)\n        go hashPhoneNumers(line.Text(), c, &amp;wg)\n    }\n\n    // wait all goroutines done\n    wg.Wait()\n    close(c)\n}\n</code></pre>\n\n<p>this works fine</p>\n"}], "owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "closed_date": 1526269626, "accepted_answer_id": 50322752, "answer_count": 1, "score": 0, "last_activity_date": 1526268752, "creation_date": 1526262442, "last_edit_date": 1526265878, "question_id": 50322182, "link": "https://stackoverflow.com/questions/50322182/bounded-parallelism-to-hash-strings", "closed_reason": "Duplicate", "title": "bounded parallelism to hash strings", "body": "<p>Trying to solve the problem of reading phone numbers from a file (line by line) and hash them concurrently (md5) in go with a maximum of 100 concurrent process maximum, creating a fixed number of goroutines. tried using go pipeline and bounded parallelism but did not work. any guidance, please?</p>\n\n<p>this is what I tried, <a href=\"https://play.golang.org/p/vp7s512l8w4\" rel=\"nofollow noreferrer\">https://play.golang.org/p/vp7s512l8w4</a></p>\n"}, {"tags": ["go", "google-api", "google-bigquery"], "comments": [{"owner": {"reputation": 25696, "user_id": 6253347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1387a55798cae58a3a836dcbcd6e1951?s=128&d=identicon&r=PG&f=1", "display_name": "Elliott Brossard", "link": "https://stackoverflow.com/users/6253347/elliott-brossard"}, "edited": false, "score": 0, "creation_date": 1526252614, "post_id": 50320863, "comment_id": 87658630, "body": "Are there still tables or views inside the dataset? You probably need to delete them first."}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 13083700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gke7e.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/13083700/alex"}, "edited": false, "score": 0, "creation_date": 1602703194, "post_id": 50323258, "comment_id": 113807689, "body": "Had the same kind of error and removing the tables fixed the issue ! It&#39;s a matter of removing smaller pieces (tables, views) first."}], "tags": [], "owner": {"reputation": 25696, "user_id": 6253347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1387a55798cae58a3a836dcbcd6e1951?s=128&d=identicon&r=PG&f=1", "display_name": "Elliott Brossard", "link": "https://stackoverflow.com/users/6253347/elliott-brossard"}, "is_accepted": true, "score": 1, "last_activity_date": 1526273326, "creation_date": 1526273326, "answer_id": 50323258, "question_id": 50320863, "link": "https://stackoverflow.com/questions/50320863/googleapi-error-400-dataset-myprojectmydataset-is-still-in-use-resourceinuse/50323258#50323258", "title": "googleapi: Error 400: Dataset myProject:myDataset is still in use, resourceInUse", "body": "<p>For a dataset that contains tables and/or views, you have two options:</p>\n\n<ul>\n<li>Delete each table and view, then delete the dataset.</li>\n<li>Delete the dataset directly, passing <code>true</code> for the <code>deleteContents</code> option. This will delete all tables and views in the dataset.</li>\n</ul>\n"}], "owner": {"reputation": 1510, "user_id": 6476791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55d5de71330e6307063fdb6dde80d7ca?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6476791/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 50323258, "answer_count": 1, "score": 1, "last_activity_date": 1526273326, "creation_date": 1526247606, "question_id": 50320863, "link": "https://stackoverflow.com/questions/50320863/googleapi-error-400-dataset-myprojectmydataset-is-still-in-use-resourceinuse", "title": "googleapi: Error 400: Dataset myProject:myDataset is still in use, resourceInUse", "body": "<p>I am trying to remove dataset using BigQuery API.</p>\n\n<p>I have no problem removing the dataset in question manually using BigQuery UI, however when I am using the API I am seeing the following error:</p>\n\n<pre><code>googleapi: Error 400: Dataset myProject:myDataset is still in use, resourceInUse\n</code></pre>\n\n<p>I have checked that there are no open connections using the dataset.</p>\n\n<p>Here is the code used to remove dataset:</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"context\"\n    \"golang.org/x/oauth2\"\n    \"golang.org/x/oauth2/jwt\"\n    \"google.golang.org/api/bigquery/v2\"\n)\n\n\n\nfunc main() {\n    var authConfig *jwt.Config\n    var projectID = \"myProject\"\n    var datasetID = \"myDataset\"\n    ctx := context.Background()\n    oauthClient := oauth2.NewClient(ctx, authConfig.TokenSource(ctx))\n    service, err := bigquery.New(oauthClient)\n    if err != nil {\n        log.Fatal(err)\n    }\n    err = service.Datasets.Delete(projectID , datasetID).Context(ctx).Do()\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n</code></pre>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 6, "creation_date": 1526237270, "post_id": 50319404, "comment_id": 87654734, "body": "Your struct values need to be exported by having capitalized field names. For example you need to use <code>CurrentDateTime</code> instead of <code>currentDateTime</code>."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 1, "creation_date": 1526237647, "post_id": 50319404, "comment_id": 87654850, "body": "<a href=\"https://golang.org/ref/spec#Exported_identifiers\" rel=\"nofollow noreferrer\">golang.org/ref/spec#Exported_identifiers</a>"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1526237679, "post_id": 50319404, "comment_id": 87654863, "body": "The <a href=\"https://godoc.org/encoding/json\" rel=\"nofollow noreferrer\">encoding/json</a> documentation explains that fields must be exported.  The specification <a href=\"https://golang.org/ref/spec#Exported_identifiers\" rel=\"nofollow noreferrer\">describes exported identifiers</a>."}], "answers": [{"tags": [], "owner": {"reputation": 13022, "user_id": 230340, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3591e9adea97943ab462c84b0745e110?s=128&d=identicon&r=PG", "display_name": "Zippo", "link": "https://stackoverflow.com/users/230340/zippo"}, "is_accepted": true, "score": 68, "last_activity_date": 1568191639, "last_edit_date": 1568191639, "creation_date": 1526245156, "answer_id": 50320595, "question_id": 50319404, "link": "https://stackoverflow.com/questions/50319404/has-json-tag-but-not-exported/50320595#50320595", "title": "Has Json tag but not exported", "body": "<p>You're adding a JSON tag to a field that isn't exported.</p>\n\n<p>Struct fields must start with upper case letter (<a href=\"https://golang.org/ref/spec#Exported_identifiers\" rel=\"noreferrer\">exported</a>) for the JSON package to see their value.</p>\n\n<pre><code>struct A struct {\n    // Unexported struct fields are invisible to the JSON package.\n    // Export a field by starting it with an uppercase letter.\n    unexported string\n\n    // {\"Exported\": \"\"}\n    Exported string\n\n    // {\"custom_name\": \"\"}\n    CustomName string `json:\"custom_name\"`\n}\n</code></pre>\n\n<p>The underlying reason for this requirement is that the JSON package uses <code>reflect</code> to inspect struct fields. Since <code>reflect</code> doesn't allow access to unexported struct fields, the JSON package can't see their value.</p>\n"}], "owner": {"reputation": 549, "user_id": 5625598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b6ac4348e916b2fc4b3da0f9aa3c01d?s=128&d=identicon&r=PG&f=1", "display_name": "frostrock", "link": "https://stackoverflow.com/users/5625598/frostrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21821, "favorite_count": 6, "closed_date": 1526269653, "accepted_answer_id": 50320595, "answer_count": 1, "score": 31, "last_activity_date": 1568191639, "creation_date": 1526236558, "question_id": 50319404, "link": "https://stackoverflow.com/questions/50319404/has-json-tag-but-not-exported", "closed_reason": "Duplicate", "title": "Has Json tag but not exported", "body": "<p>Begining to study golang.\nTask: Get Json and Unmarshall it.\nBut I get mistake:</p>\n\n<pre><code>Json tag but not exported\n</code></pre>\n\n<p>How to make unexported fields become exported and then implement it using methods?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"net/http\"\n)\n\ntype Time struct {\n    time\n}\ntype time struct {\n    id                    string  `json:\"$id\"`\n    currentDateTime       string  `json:\"currentDateTime,string\"`\n    utcOffset             float64 `json:\"utcOffset,string\"`\n    isDayLightSavingsTime bool    `json:\"isDayLightSavingsTime,string\"`\n    dayOfTheWeek          string  `json:\"dayOfTheWeek,string\"`\n    timeZoneName          string  `json:\"timeZoneName,string\"`\n    currentFileTime       float64 `json:\"currentFileTime,string\"`\n    ordinalDate           string  `json:\"ordinalDate,string\"`\n    serviceResponse       string  `json:\"serviceResponse,string\"`\n}\n\nfunc (t *Time) GetTime() (Time, error) {\n    result := Time{}\n\n    return result, t.Timenow(result)\n}\nfunc (t *Time) Timenow(result interface{}) error {\n\n    res, err := http.Get(\"http://worldclockapi.com/api/json/utc/now\")\n    if err != nil {\n        fmt.Println(\"Cannot get Json\", err)\n    }\n\n    body, err := ioutil.ReadAll(res.Body)\n    if err != nil {\n        fmt.Println(\"Cannot create Body\", err)\n    }\n\n    defer res.Body.Close()\n\n    var resultJson interface{}\n    return json.Unmarshal(body, &amp;resultJson)\n\n}\n\nfunc main() {\n\n    var a Time\n    t, err := a.GetTime()\n    if err != nil {\n        fmt.Println(\"Error \", err)\n    }\n    fmt.Println(\"Time:\", t)\n}\n</code></pre>\n\n<p>Please explain in details whats wrong with struct and how to get right response?</p>\n"}, {"tags": ["go", "deadlock"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1526240157, "post_id": 50318730, "comment_id": 87655567, "body": "There is no \u201calgorithm\u201d other than you get a panic when all goroutines are blocked."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 3, "creation_date": 1526248212, "post_id": 50318730, "comment_id": 87657774, "body": "Put another way, there isn&#39;t the sort of deadlock detection that could tell if two goroutines will block forever because of the locks they took or such; it&#39;s not using that kind of fine-grained data to figure this out. It&#39;s just that the code to find the next goroutine to run may see that no goroutines are either currently runnable or waiting on something exteral to Go code (e.g., network activity or return from cgo or syscall), and then prints out there&#39;s a deadlock and exits."}], "answers": [{"comments": [{"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "edited": false, "score": 0, "creation_date": 1526270476, "post_id": 50320728, "comment_id": 87661464, "body": "Sorry, you&#39;re telling a possible background story which might lead you to my question but not really answering it"}], "tags": [], "owner": {"reputation": 13022, "user_id": 230340, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3591e9adea97943ab462c84b0745e110?s=128&d=identicon&r=PG", "display_name": "Zippo", "link": "https://stackoverflow.com/users/230340/zippo"}, "is_accepted": false, "score": 2, "last_activity_date": 1526247935, "last_edit_date": 1526247935, "creation_date": 1526246361, "answer_id": 50320728, "question_id": 50318730, "link": "https://stackoverflow.com/questions/50318730/what-is-the-algorithm-behind-golangs-all-goroutines-are-asleep-deadlock-er/50320728#50320728", "title": "What is the algorithm behind Golang&#39;s `all goroutines are asleep - deadlock!` error?", "body": "<p>Short: The runtime scheduler, responsible for sharing execution time of OS threads between goroutines, realizes that all goroutines are waiting forever or waiting on other goroutines and concludes a deadlock.</p>\n\n<p>Imagine a scenario where goroutine A fetches pages from the internet, sending them through channel C over to goroutine B. Goroutine A has nothing to do until goroutine B sends to channel C, so goroutine A is asleep waiting on goroutine A. Goroutine B is blocked waiting on a system call (HTTP request) to complete, so goroutine B is not waiting on other goroutines. Now, if you insert any operation that makes goroutine B wait on other goroutines (like receiving from channel D), goroutine B will be put to sleep, and since all other goroutines (just goroutine A really) are already asleep, we conclude a deadlock.</p>\n\n<p>Long: Read <a href=\"https://povilasv.me/go-scheduler/\" rel=\"nofollow noreferrer\">Go scheduler</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2208, "user_id": 5328069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21DZ0.jpg?s=128&g=1", "display_name": "morganbaz", "link": "https://stackoverflow.com/users/5328069/morganbaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1526247796, "creation_date": 1526247796, "answer_id": 50320884, "question_id": 50318730, "link": "https://stackoverflow.com/questions/50318730/what-is-the-algorithm-behind-golangs-all-goroutines-are-asleep-deadlock-er/50320884#50320884", "title": "What is the algorithm behind Golang&#39;s `all goroutines are asleep - deadlock!` error?", "body": "<p>You can check the Go source and easily find out: it happens in <a href=\"https://github.com/golang/go/blob/35ea62468bf7e3a79011c3ad713e847daa9a45a2/src/runtime/proc.go#L4159-L4233\" rel=\"nofollow noreferrer\">this function</a>, which is called in various places where the program might enter a deadlock state.</p>\n\n<p>The relevant part is that the runtime gets the number of open OS threads, and checks how many of them are actually running code. There are a few more checks, but that's basically it. Whenever you run a blocking operation - such as as locking a mutex when it's already been locked elsewhere, or receiving from an empty channel - the scheduler will try to make the thread do the work of another goroutine. If none can be found, it enters an idle state.</p>\n\n<p>Basically, the scheduler always tries to find code that is waiting to be ran. If none can be found, then it's a deadlock situation.</p>\n\n<p>This of course excludes cases of, i.e., goroutines which are running <code>time.Sleep</code>, which although are \"idling\", there's a thread actively checking when they are ready to be run. In other words, they are not dependent on other parts of the program to start being \"runnable\" again (such as is the case for mutexes).</p>\n"}], "owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 50320884, "answer_count": 2, "score": 3, "last_activity_date": 1526247935, "creation_date": 1526232241, "last_edit_date": 1526233135, "question_id": 50318730, "link": "https://stackoverflow.com/questions/50318730/what-is-the-algorithm-behind-golangs-all-goroutines-are-asleep-deadlock-er", "title": "What is the algorithm behind Golang&#39;s `all goroutines are asleep - deadlock!` error?", "body": "<p>Does the runtime keep a directed graph representing which goroutine waits for which somewhere? If so, could you point me to the relevant place in the source code?</p>\n\n<p>I have not professionally coded in Go but noticed it has several nice features when I played with it.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 172, "user_id": 7338886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/shaF0.jpg?s=128&g=1", "display_name": "Hasibul Hasn", "link": "https://stackoverflow.com/users/7338886/hasibul-hasn"}, "edited": false, "score": 0, "creation_date": 1526230832, "post_id": 50318473, "comment_id": 87652862, "body": "can you provide some example code? your question seems confusing"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2437417"}, "edited": false, "score": 2, "creation_date": 1526230844, "post_id": 50318473, "comment_id": 87652866, "body": "You can&#39;t change the order, but you could set local variables as flags to avoid running the main part of the code in an inlined deferred function call. Is there a particular problem you&#39;re trying to solve?"}], "answers": [{"tags": [], "owner": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "is_accepted": false, "score": 3, "last_activity_date": 1526231548, "last_edit_date": 1526231548, "creation_date": 1526230772, "answer_id": 50318526, "question_id": 50318473, "link": "https://stackoverflow.com/questions/50318473/is-there-a-way-to-manipulate-the-defer-stack/50318526#50318526", "title": "Is there a way to manipulate the defer stack?", "body": "<p>The defer stack is a LIFO stack, so you can obviously influence the order in which deferred statements execute in the function body. </p>\n\n<p>However, your question seems to be about modifying the defer stack in ways <em>other than simply changing the order in which things are added to it</em>, which is a feature that is not presently supported by the Go runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": true, "score": 5, "last_activity_date": 1526231315, "creation_date": 1526231315, "answer_id": 50318602, "question_id": 50318473, "link": "https://stackoverflow.com/questions/50318473/is-there-a-way-to-manipulate-the-defer-stack/50318602#50318602", "title": "Is there a way to manipulate the defer stack?", "body": "<p>The only modification possible to the <code>defer</code> stack is to \"pop\" onto it.</p>\n\n<p>Having said that, you could make a defer optional with a variable to early-exit from the deferred function.  Example:</p>\n\n<pre><code>func foo() {\n    var skipDefer bool\n    defer func() {\n        if skipDefer {\n            return\n        }\n        // Do body of defer\n    }()\n    // Do stuff\n    if someConditionIsTrue {\n        skipDefer = true\n    }\n    defer func() {\n        // Do this one unconditionally\n    }\n    // Do other stuff\n}\n</code></pre>\n\n<p>You could also manage a list of functions to be executed manually, if you really want to:</p>\n\n<pre><code>func foo() {\n    var deferreds []func()\n    defer func() {\n        for _, f := range deferreds {\n            f()\n        }\n    }()\n    // Add to and arrange `deferreds` to your heart's content\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3625, "user_id": 1730082, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/87eXw.png?s=128&g=1", "display_name": "leinaD_natipaC", "link": "https://stackoverflow.com/users/1730082/leinad-natipac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 50318602, "answer_count": 2, "score": 1, "last_activity_date": 1594797935, "creation_date": 1526230396, "last_edit_date": 1594797935, "question_id": 50318473, "link": "https://stackoverflow.com/questions/50318473/is-there-a-way-to-manipulate-the-defer-stack", "title": "Is there a way to manipulate the defer stack?", "body": "<p>Is there any way to change the defer stack? For example, adding a call to the bottom of the defer stack, or removing the last defer placed?</p>\n"}, {"tags": ["python", "go", "arduino", "serial-port"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526229891, "post_id": 50318058, "comment_id": 87652560, "body": "My only guess: You&#39;ve set a minimum read size of 4.  If there are fewer than 4 bytes read, will it block?"}, {"owner": {"reputation": 1453, "user_id": 2133240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iz1JT.jpg?s=128&g=1", "display_name": "dsgdfg", "link": "https://stackoverflow.com/users/2133240/dsgdfg"}, "edited": false, "score": 0, "creation_date": 1526236236, "post_id": 50318058, "comment_id": 87654419, "body": "Serial.println() equal to on python <code>ser.readline()</code> (so your delimiter is <code>\\n</code>) another point is : C++ and python  no diference, like ` while (Serial.available())(ardu) == while True: while ser.inWaiting() &gt; 0: (python)`"}, {"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "reply_to_user": {"reputation": 1453, "user_id": 2133240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iz1JT.jpg?s=128&g=1", "display_name": "dsgdfg", "link": "https://stackoverflow.com/users/2133240/dsgdfg"}, "edited": false, "score": 0, "creation_date": 1526238510, "post_id": 50318058, "comment_id": 87655114, "body": "@dsgdfg yes, I could replace this code with ser.readline(), without while loop, but my intend is to have golang version working, python code is for example, that device is working at all."}, {"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526238537, "post_id": 50318058, "comment_id": 87655129, "body": "@Flimzy I have tried with minimum size equals 1, still nothing."}, {"owner": {"reputation": 1453, "user_id": 2133240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iz1JT.jpg?s=128&g=1", "display_name": "dsgdfg", "link": "https://stackoverflow.com/users/2133240/dsgdfg"}, "edited": false, "score": 0, "creation_date": 1526275455, "post_id": 50318058, "comment_id": 87662704, "body": "<code>&quot;&#47;dev&#47;ttyACM0&quot;</code> and <code>&quot;&#47;dev&#47;ttyACM1&quot;</code> <b>I hope it&#39;s a joke.</b>"}, {"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "reply_to_user": {"reputation": 1453, "user_id": 2133240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iz1JT.jpg?s=128&g=1", "display_name": "dsgdfg", "link": "https://stackoverflow.com/users/2133240/dsgdfg"}, "edited": false, "score": 0, "creation_date": 1526284714, "post_id": 50318058, "comment_id": 87666728, "body": "@dsgdfg execuse me? I have different ports from time to time. The PID:VID doesn&#39;t binded to some particular tty device and the number assigned differs from time to time. Once I plug it in, it would be ACM1, another time it would be ACM0. UPD: I will update the question to avoid misunderstanding."}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "edited": false, "score": 0, "creation_date": 1526321367, "post_id": 50330709, "comment_id": 87689138, "body": "No, it has no effect, unfortunately."}, {"owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "reply_to_user": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "edited": false, "score": 0, "creation_date": 1526323894, "post_id": 50330709, "comment_id": 87690405, "body": "Try with 19200 and then 9600, confirm if the Arduino blinks or not. This will tell you if the Arduino gets the command in the first place or not."}, {"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "edited": false, "score": 0, "creation_date": 1526326914, "post_id": 50330709, "comment_id": 87691929, "body": "arudino blinked with both variants."}, {"owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "edited": false, "score": 0, "creation_date": 1526326957, "post_id": 50330709, "comment_id": 87691956, "body": "However, I remade arduino code a bit, using Serial.readString for reading and now everyhting works, if I set vmin\\vtime in golang version."}], "tags": [], "owner": {"reputation": 1002, "user_id": 8078317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldZij.jpg?s=128&g=1", "display_name": "Nitro", "link": "https://stackoverflow.com/users/8078317/nitro"}, "is_accepted": true, "score": 2, "last_activity_date": 1526301979, "creation_date": 1526301979, "answer_id": 50330709, "question_id": 50318058, "link": "https://stackoverflow.com/questions/50318058/reading-from-arduinos-serial-port-using-go-serial/50330709#50330709", "title": "Reading from arduino&#39;s serial port using go-serial", "body": "<p>You have set the baud rate for the Go lang function to 19200, but in the arduino you have used 9600.</p>\n\n<p>In the python code, the baud rate is not set, so it takes the default of 9600.</p>\n\n<p>Just set the right baud rate in your go lang program, and it should work.</p>\n"}], "owner": {"reputation": 649, "user_id": 554480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/m1Kjt.png?s=128&g=1", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/554480/mikhail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3164, "favorite_count": 0, "accepted_answer_id": 50330709, "answer_count": 1, "score": 1, "last_activity_date": 1526301979, "creation_date": 1526227616, "last_edit_date": 1526284773, "question_id": 50318058, "link": "https://stackoverflow.com/questions/50318058/reading-from-arduinos-serial-port-using-go-serial", "title": "Reading from arduino&#39;s serial port using go-serial", "body": "<p>I have arduino uno with simple firmware which provides simple API over serial port:</p>\n\n<ul>\n<li>Command \"read\" returns the current state</li>\n<li>Command \"on\" sets the state to \"on\"</li>\n<li>Command \"off\" sets the state to \"off\"</li>\n</ul>\n\n<p>Now I want to implement a client for this device.\nIf I use Arduino IDE serial monitor, this API works as expected.\nIf I use python with pySerial library, API works.</p>\n\n<p>But whenever I try to read data from the serial port using golang and go-serial, my read calls hangs (but works fine with /dev/pts/X created by socat, for example)</p>\n\n<p>Python client</p>\n\n<pre><code>import serial\ns = serial.Serial(\"/dev/ttyACM0\")\ns.write(\"read\\n\")\nresp = []\nchar = None\nwhile char != \"\\r\":\n    char = s.read()\n    resp.append(char)\nprint \"\".join(resp)\n</code></pre>\n\n<p>Go client (hangs on Read call forever):\n    package main</p>\n\n<pre><code>import \"fmt\"\nimport \"github.com/jacobsa/go-serial/serial\"\n\nfunc check(err error) {\n    if err != nil {\n        panic(err.Error())\n    }\n}\n\nfunc main() {\n    options := serial.OpenOptions{\n        PortName:        \"/dev/ttyACM0\",\n        BaudRate:        19200,\n        DataBits:        8,\n        StopBits:        1,\n        MinimumReadSize: 4,\n    }\n    port, err := serial.Open(options)\n    check(err)\n    n, err := port.Write([]byte(\"read\\n\"))\n    check(err)\n    fmt.Println(\"Written\", n)\n    buf := make([]byte, 100)\n    n, err = port.Read(buf)\n    check(err)\n    fmt.Println(\"Readen\", n)\n    fmt.Println(string(buf))\n}\n</code></pre>\n\n<p>Firmware code:</p>\n\n<pre><code>String inputString = \"\";         // a String to hold incoming data\nboolean stringComplete = false;  // whether the string is complete\nString state = \"off\";\n\nvoid setup() {\n    // initialize serial:\n    Serial.begin(9600);\n    // reserve 200 bytes for the inputString:\n    inputString.reserve(200);\n    pinMode(13, OUTPUT);\n}\n\nvoid loop() {\n    // print the string when a newline arrives:\n    if (stringComplete) {\n        blink();\n        if (inputString == \"on\\n\") {\n        state = \"on\";  \n        } else if (inputString == \"off\\n\") {\n        state = \"off\";  \n        } else if (inputString == \"read\\n\") {\n        Serial.println(state  );  \n        }\n        // clear the string:\n        inputString = \"\";\n        stringComplete = false;\n    }\n}\n\n\nvoid blink() {\n    digitalWrite(13, HIGH);   // set the LED on\n    delay(1000);              // wait for a second\n    digitalWrite(13, LOW);    // set the LED off\n    delay(1000);              // wait for a second\n}\n\nvoid serialEvent() {\n    while (Serial.available()) {\n        // get the new byte:\n        char inChar = (char)Serial.read();\n        // add it to the inputString:\n        inputString += inChar;\n        // if the incoming character is a newline, set a flag so the main loop can\n        // do something about it:\n        if (inChar == '\\n') {\n        stringComplete = true;\n        }\n    }\n}\n</code></pre>\n\n<p>Python code</p>\n"}, {"tags": ["go", "protocol-buffers", "grpc"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526218089, "post_id": 50314476, "comment_id": 87649017, "body": "It sounds like the response from the API is incomplete. Can you include the response you&#39;re trying to unmarshal in your question?"}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 8210633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bfc2d3ce85f67f84f06bfc9e6b8811?s=128&d=identicon&r=PG", "display_name": "lukeic", "link": "https://stackoverflow.com/users/8210633/lukeic"}, "edited": false, "score": 0, "creation_date": 1526294306, "post_id": 50325355, "comment_id": 87672439, "body": "Thanks for the response. You&#39;re right, using the <code>json</code> package does decode the response into a generic map interface, however I&#39;m trying to decode the response into a struct generated from a <code>.proto</code>. I&#39;ve just tried <code>json.Unmarshal</code> together with a protobuf type of <code>repeated google.protobuf.Struct</code> for the <code>wines</code> key, but the result of <code>wines</code> is a bunch of empty, repeated maps."}], "tags": [], "owner": {"reputation": 67, "user_id": 290839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9fc1ad38fed8b3f3075ac7c656e5e9?s=128&d=identicon&r=PG", "display_name": "gthomas", "link": "https://stackoverflow.com/users/290839/gthomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1526283987, "creation_date": 1526283987, "answer_id": 50325355, "question_id": 50314476, "link": "https://stackoverflow.com/questions/50314476/why-does-unmarshalling-this-api-response-return-an-unexpected-eof/50325355#50325355", "title": "Why does unmarshalling this API response return an unexpected EOF?", "body": "<p>It DOES parse with then <code>encoding/json</code> package: <a href=\"https://play.golang.org/p/IQzMm2tDI7w\" rel=\"nofollow noreferrer\">https://play.golang.org/p/IQzMm2tDI7w</a></p>\n\n<p>The <code>protoc</code>-generated code's <code>Unmarshal</code> parses a <em>Protocol Buffers</em> encoded byte stream, NOT JSON!</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 8210633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bfc2d3ce85f67f84f06bfc9e6b8811?s=128&d=identicon&r=PG", "display_name": "lukeic", "link": "https://stackoverflow.com/users/8210633/lukeic"}, "edited": false, "score": 0, "creation_date": 1526714433, "post_id": 50339084, "comment_id": 87860398, "body": "This was actually a bug in <code>jsonpb</code> itself, and has been fixed as per <a href=\"https://github.com/golang/protobuf/issues/605\" rel=\"nofollow noreferrer\">github.com/golang/protobuf/issues/605</a>"}], "tags": [], "owner": {"reputation": 370, "user_id": 8210633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bfc2d3ce85f67f84f06bfc9e6b8811?s=128&d=identicon&r=PG", "display_name": "lukeic", "link": "https://stackoverflow.com/users/8210633/lukeic"}, "is_accepted": true, "score": 2, "last_activity_date": 1526332364, "creation_date": 1526332364, "answer_id": 50339084, "question_id": 50314476, "link": "https://stackoverflow.com/questions/50314476/why-does-unmarshalling-this-api-response-return-an-unexpected-eof/50339084#50339084", "title": "Why does unmarshalling this API response return an unexpected EOF?", "body": "<h2>--Update--</h2>\n\n<p>I've now got the response unmarshalling as desired, using the <code>jsonpb.Unmarshal</code> method. To do so though I had to unmarshal and marshal the response with the regular json library first, in order to get around some escaped values in the response (I was receiving a 'bad value in Struct' error: </p>\n\n<pre><code>resJson, err := ioutil.ReadAll(res.Body)\n\nj := make(map[string]interface{})\nif err := json.Unmarshal(resJson, &amp;j); err != nil {\n    panic(err)\n}\n\njbytes, err := json.Marshal(j)\n\nresult := &amp;pb.Response{}\nr := strings.NewReader(string(jbytes))\nif err := jsonpb.Unmarshal(r, result); err != nil {\n    panic(err)\n}\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 8210633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5bfc2d3ce85f67f84f06bfc9e6b8811?s=128&d=identicon&r=PG", "display_name": "lukeic", "link": "https://stackoverflow.com/users/8210633/lukeic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7321, "favorite_count": 0, "accepted_answer_id": 50339084, "answer_count": 2, "score": 2, "last_activity_date": 1611564655, "creation_date": 1526202324, "last_edit_date": 1526301714, "question_id": 50314476, "link": "https://stackoverflow.com/questions/50314476/why-does-unmarshalling-this-api-response-return-an-unexpected-eof", "title": "Why does unmarshalling this API response return an unexpected EOF?", "body": "<h2>Problem</h2>\n\n<p>I'm creating a microservice in Go, using protocol buffers and gRPC. It interacts with a third-party API (Snooth) and I'm trying to unmarshal the JSON response into a protobuf struct I've created, using the <code>proto</code> package.</p>\n\n<p>Unmarshalling returns an <code>unexpected EOF</code> error.</p>\n\n<h2>What I've Tried</h2>\n\n<ul>\n<li>Using <code>json.newDecoder</code> instead of <code>json.unmarshal</code></li>\n<li><code>jsonpb.Unmarshal</code> instead of <code>proto.Unmarshal</code> (returns a <code>bad value in StructValue for key</code> error)</li>\n<li>Limiting the response read with <code>io.LimitReader</code></li>\n</ul>\n\n<p>I've also read something about prefixing the proto types with a size tag or something? But I'm not sure what that is or if it's relevant. Here's the repo on <a href=\"https://github.com/lukeic/vinogo/tree/feature/snooth/snooth\" rel=\"nofollow noreferrer\">Github</a>.</p>\n\n<h2>Question</h2>\n\n<p>What is causing this <code>unexpected EOF</code> error and how do I fix it, so that the API response is successfully unmarshalled into the proto struct?</p>\n\n<p>Side note: I am new to Go and would also appreciate any feedback/improvements on the following code. Thanks!</p>\n\n<h2>Code</h2>\n\n<p><code>Proto</code></p>\n\n<pre><code>message Response {\n    message Meta {\n        int32 results = 1;\n        int32 returned = 2;\n        string errmsg = 3;\n        int32 status = 4;\n    }\n\n    Meta meta = 1;\n    repeated google.protobuf.Struct wines = 2;\n    repeated google.protobuf.Struct actions = 3;\n}\n</code></pre>\n\n<p><code>main.go</code></p>\n\n<pre><code>func fetchFromSnooth(e string, qs string, c chan response) {\n    defer func() {\n        if r := recover(); r != nil {\n            log.Printf(\"Error fetching from Snooth: %s\", r)\n            errmsg := fmt.Sprint(r)\n            c &lt;- response{nil, snoothApiError{errmsg}}\n        }\n    }()\n\n    v := url.Values{\"akey\": {os.Getenv(\"SNOOTH_API_KEY\")}}\n    requestUrl := fmt.Sprintf(\"%s%s/?%s%s\", snoothRoot, e, v.Encode(), qs)\n    log.Printf(\"Fetching: %s\", requestUrl)\n\n    res, err := httpClient.Get(requestUrl)\n    if err != nil {\n        panic(err)\n    }\n    defer res.Body.Close()\n\n    body, err := ioutil.ReadAll(res.Body)\n    if err != nil {\n        panic(err)\n    }\n\n    result := &amp;pb.Response{}\n    if err := proto.Unmarshal(body, result); err != nil {\n        panic(err)\n    }\n    c &lt;- response{result, snoothApiError{\"\"}}\n}\n\nfunc (s *snoothApiService) searchWines(params *pb.Parameters_WineSearch) response {\n    c := make(chan response)\n    defer close(c)\n\n    v := url.Values{}\n    go fetchFromSnooth(\"wines\", v.Encode(), c)\n    return &lt;-c\n}\n\nfunc main() {\n    snooth := snoothApiService{}\n    resp := snooth.searchWines(nil)\n    fmt.Println(resp)\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>Here's an example of the type of API response I'm trying to unmarshal: </p>\n\n<pre><code>    {\n    \"meta\": {\n        \"results\": 1489442,\n        \"returned\": 5,\n        \"errmsg\": \"\",\n        \"status\": 1\n    },\n    \"wines\": [\n        {\n            \"name\": \"Conway Deep Sea Chardonnay la Costa Wine Co\",\n            \"code\": \"conway-deep-sea-chardonnay-la-costa-wine-co-2008-1\",\n            \"region\": \"USA &gt; California &gt; Central Coast\",\n            \"winery\": \"Conway Family Wines\",\n            \"winery_id\": \"conway-family-wines\",\n            \"varietal\": \"Chardonnay\",\n            \"price\": \"21.99\",\n            \"vintage\": \"2008\",\n            \"type\": \"White Wine\",\n            \"link\": \"http:\\/\\/www.snooth.com\\/wine\\/conway-deep-sea-chardonnay-la-costa-wine-co-2008-1\\/\",\n            \"tags\": \"\",\n            \"image\": \"https:\\/\\/ei.isnooth.com\\/multimedia\\/0\\/2\\/8\\/image_787698_square.jpeg\",\n            \"snoothrank\": 3,\n            \"available\": 0,\n            \"num_merchants\": 0,\n            \"num_reviews\": 10\n        },\n        {\n            \"name\": \"Olmaia Cabernet di Toscana\",\n            \"code\": \"olmaia-cabernet-di-toscana\",\n            \"region\": \"Italy &gt; Tuscany &gt; Toscana Igt\",\n            \"winery\": \"Col D Orcia\",\n            \"winery_id\": \"col-d-orcia\",\n            \"varietal\": \"Cabernet Sauvignon\",\n            \"price\": \"0.00\",\n            \"vintage\": \"\",\n            \"type\": \"Red Wine\",\n            \"link\": \"http:\\/\\/www.snooth.com\\/wine\\/olmaia-cabernet-di-toscana\\/\",\n            \"tags\": \"\",\n            \"image\": \"https:\\/\\/ei.isnooth.com\\/multimedia\\/d\\/e\\/e\\/image_790198_square.jpeg\",\n            \"snoothrank\": 3.5,\n            \"available\": 0,\n            \"num_merchants\": 0,\n            \"num_reviews\": 25\n        },\n        {\n            \"name\": \"Dominio Dostares Prieto Picudo Vino de la Tierra de Castilla Y Le\u00f3n Cumal\",\n            \"code\": \"dominio-dostares-prieto-picudo-vino-de-la-tierra-de-castilla-y-leon-cumal-2006\",\n            \"region\": \"Spain &gt; Castilla y Le\u00f3n &gt; Vino de la Tierra de Castilla y Le\u00f3n\",\n            \"winery\": \"Bisch\u00f6fliches Priesterseminar Trier\",\n            \"winery_id\": \"bischofliches-priesterseminar-trier\",\n            \"varietal\": \"Prieto Picudo\",\n            \"price\": \"15.89\",\n            \"vintage\": \"2006\",\n            \"type\": \"Red Wine\",\n            \"link\": \"http:\\/\\/www.snooth.com\\/wine\\/dominio-dostares-prieto-picudo-vino-de-la-tierra-de-castilla-y-leon-cumal-2006\\/\",\n            \"tags\": \"\",\n            \"image\": \"https:\\/\\/ei.isnooth.com\\/multimedia\\/d\\/0\\/4\\/image_336595_square.jpeg\",\n            \"snoothrank\": \"n\\/a\",\n            \"available\": 0,\n            \"num_merchants\": 0,\n            \"num_reviews\": 1\n        },\n        {\n            \"name\": \"Dominio Dostares Prieto Picudo Vino de la Tierra de Castilla Y Le\u00f3n Cumal\",\n            \"code\": \"dominio-dostares-prieto-picudo-vino-de-la-tierra-de-castilla-y-leon-cumal-2005\",\n            \"region\": \"Spain &gt; Castilla y Le\u00f3n &gt; Vino de la Tierra de Castilla y Le\u00f3n\",\n            \"winery\": \"Bisch\u00f6fliches Priesterseminar Trier\",\n            \"winery_id\": \"bischofliches-priesterseminar-trier\",\n            \"varietal\": \"Prieto Picudo\",\n            \"price\": \"38.99\",\n            \"vintage\": \"2005\",\n            \"type\": \"Red Wine\",\n            \"link\": \"http:\\/\\/www.snooth.com\\/wine\\/dominio-dostares-prieto-picudo-vino-de-la-tierra-de-castilla-y-leon-cumal-2005\\/\",\n            \"tags\": \"\",\n            \"image\": \"https:\\/\\/ei.isnooth.com\\/multimedia\\/1\\/d\\/a\\/image_336596_square.jpeg\",\n            \"snoothrank\": \"n\\/a\",\n            \"available\": 0,\n            \"num_merchants\": 0,\n            \"num_reviews\": 1\n        },\n        {\n            \"name\": \"The Little Penguin Chardonnay Premier\",\n            \"code\": \"the-little-penguin-chardonnay-premier-2010\",\n            \"region\": \"South East Australia\",\n            \"winery\": \"The Little Penguin\",\n            \"winery_id\": \"the-little-penguin\",\n            \"varietal\": \"Chardonnay\",\n            \"price\": \"11.99\",\n            \"vintage\": \"2010\",\n            \"type\": \"White Wine\",\n            \"link\": \"http:\\/\\/www.snooth.com\\/wine\\/the-little-penguin-chardonnay-premier-2010\\/\",\n            \"tags\": \"\",\n            \"image\": \"https:\\/\\/ei.isnooth.com\\/multimedia\\/2\\/c\\/4\\/image_826282_square.jpeg\",\n            \"snoothrank\": \"n\\/a\",\n            \"available\": 0,\n            \"num_merchants\": 0,\n            \"num_reviews\": 7\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["docker", "go", "hyperledger-fabric", "hyperledger"], "comments": [{"owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 0, "creation_date": 1526198010, "post_id": 50313911, "comment_id": 87643838, "body": "The container can&#39;t find <code>&#47;scripts&#47;script.sh</code>. It could be a problem with your Windows settings or it could be a problem with the image that the container uses to run hyperledger."}, {"owner": {"reputation": 61, "user_id": 9723909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3b5c952d5411b6079bcdc0c5894014?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9723909/arun"}, "reply_to_user": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 0, "creation_date": 1526199067, "post_id": 50313911, "comment_id": 87644088, "body": "can you please elaborate? is there a way to find what causes the issue? earlier resolutions regarding this issue mentioned to place the main folder in the same path as $HOME."}, {"owner": {"reputation": 7694, "user_id": 5529712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7uvxg.png?s=128&g=1", "display_name": "Gari Singh", "link": "https://stackoverflow.com/users/5529712/gari-singh"}, "edited": false, "score": 0, "creation_date": 1526204979, "post_id": 50313911, "comment_id": 87645435, "body": "Which version of Windows are you using?  If Windows 10, are you using Docker for Windows?  This error typically indicates that the folder in which the fabric-samples is located is not shared with Docker"}, {"owner": {"reputation": 61, "user_id": 9723909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3b5c952d5411b6079bcdc0c5894014?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9723909/arun"}, "edited": false, "score": 0, "creation_date": 1526207160, "post_id": 50313911, "comment_id": 87646004, "body": "Yes Windows 10 and Docker for Windows. The fabric-samples is located in C:/Users/XXXXX folder. If I go to the Settings-&gt;Shared Drives for dockers, it shows the &#39;C&#39; drive as shared."}, {"owner": {"reputation": 1651, "user_id": 488609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f4f4a868f2d14dc31ade2557e479277?s=128&d=identicon&r=PG", "display_name": "kiatng", "link": "https://stackoverflow.com/users/488609/kiatng"}, "edited": false, "score": 0, "creation_date": 1540347721, "post_id": 50313911, "comment_id": 92827437, "body": "I encounter the same error in Windows Subsystem for Linux (WSL) Ubuntu. Can it be because Windows is preventing running the <i>sh</i> file in another directory? Have you found a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8340170, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-drxb-s6k7wE/AAAAAAAAAAI/AAAAAAAACGE/YnIPL0wndPw/photo.jpg?sz=128", "display_name": "Paul Klinker", "link": "https://stackoverflow.com/users/8340170/paul-klinker"}, "is_accepted": false, "score": 0, "last_activity_date": 1535462002, "creation_date": 1535462002, "answer_id": 52058829, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/52058829#52058829", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>I ran into this problem on Ubuntu 18. I stopped all of my running Docker images and removed the exited images. After doing this, I was able to successfully run the byfn.sh script without the scripts.sh no such file error.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8188531, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6TNnZwHL2Zs/AAAAAAAAAAI/AAAAAAAAADg/6vvbnf4vpiQ/photo.jpg?sz=128", "display_name": "Shyam Singh", "link": "https://stackoverflow.com/users/8188531/shyam-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1543048310, "last_edit_date": 1543048310, "creation_date": 1543022932, "answer_id": 53454418, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/53454418#53454418", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>Ensure that the <code>fabric-samples</code> folder should be at location: <code>C:\\Users\\fabric-samples</code>.<br>\nNow, the <code>first-network</code> folder should be found at location: <code>C:\\Users\\fabric-samples\\first-network</code>.\nI assume you ran command : <code>./byfn.sh -m</code> generate from <code>first-network</code> directory. Then, ran <code>./byfn.sh -m up</code> command, and you got that error.</p>\n\n<p>Ensure that the path is correct and accordingly change path in environment variable <code>$HOME</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 282, "user_id": 8278630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXh4h.jpg?s=128&g=1", "display_name": "Farkhod Abdukodirov", "link": "https://stackoverflow.com/users/8278630/farkhod-abdukodirov"}, "edited": false, "score": 0, "creation_date": 1561871782, "post_id": 53455284, "comment_id": 100197854, "body": "&quot;sudo&quot; command for linux, but u r generating script file as it&#39;s for windows, which OS r u using?!"}], "tags": [], "owner": {"reputation": 11, "user_id": 10697959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442919bed9ee8107d36d3e520b2f2d37?s=128&d=identicon&r=PG&f=1", "display_name": "kitamaru", "link": "https://stackoverflow.com/users/10697959/kitamaru"}, "is_accepted": false, "score": 1, "last_activity_date": 1543035523, "creation_date": 1543035523, "answer_id": 53455284, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/53455284#53455284", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>I have just encountered the above error and have processed the following as mount the drive by command:</p>\n\n<pre><code>sudo mkdir /c\nsudo mount --bind /mnt/c /c\n\ncd /c/&lt;your path&gt;/fabric-samples/first-network\n./byfn.sh generate\n./byfn.sh up\n</code></pre>\n\n<p>good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 3430478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Ic3l.png?s=128&g=1", "display_name": "Shweta Gupta", "link": "https://stackoverflow.com/users/3430478/shweta-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1561551076, "last_edit_date": 1592644375, "creation_date": 1561551076, "answer_id": 56772521, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/56772521#56772521", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>I faced similar issue. I had mounted C drive and created a workspace there. eg.</p>\n<blockquote>\n<p>sudo mkdir /c</p>\n<p>sudo mount\u200a\u2014\u200abind /mnt/c /c</p>\n<p>mkdir /c/myspace&amp;&amp; cd /c/myspace</p>\n<p>/c/myspace</p>\n</blockquote>\n<p>I was executing the following command outside my workspace. You can copy or execute the command after cd into your workspace. Hope it helps.</p>\n<p><code>curl -sSL https://raw.githubusercontent.com/hyperledger/fabric/v1.4.0/scripts/bootstrap.sh | bash</code></p>\n"}, {"tags": [], "owner": {"reputation": 282, "user_id": 8278630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXh4h.jpg?s=128&g=1", "display_name": "Farkhod Abdukodirov", "link": "https://stackoverflow.com/users/8278630/farkhod-abdukodirov"}, "is_accepted": false, "score": 0, "last_activity_date": 1561871988, "creation_date": 1561871988, "answer_id": 56822587, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/56822587#56822587", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>Try following method also, stop the network, remove all previous values:</p>\n\n<pre><code>$./byfn.sh down\n$docker stop $(docker ps -a -q)\n$docker rm $(docker ps -a -q)\n$docker volume prune\n</code></pre>\n\n<p>Restart your docker then re-run the network!</p>\n\n<pre><code>$cd ....fabric-samples/first-network\n$./byfn.sh generate\n$./byfn.sh up\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 10574676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J4Q4i.jpg?s=128&g=1", "display_name": "Prafful Lachhwani", "link": "https://stackoverflow.com/users/10574676/prafful-lachhwani"}, "is_accepted": false, "score": 0, "last_activity_date": 1570861079, "last_edit_date": 1570861079, "creation_date": 1570763119, "answer_id": 58333702, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory/58333702#58333702", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>Check home directory using <br></p>\n\n<pre><code>echo ~\n</code></pre>\n\n<p>Make sure <code>fabric-samples</code> folder is present in your home directory<br></p>\n\n<pre><code>cd ~\ncd fabric-samples/first-network/\n./byfn.sh -m down\n./byfn.sh -m up\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9723909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d3b5c952d5411b6079bcdc0c5894014?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/9723909/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2421, "favorite_count": 0, "protected_date": 1570763722, "answer_count": 6, "score": 5, "last_activity_date": 1570861079, "creation_date": 1526197693, "last_edit_date": 1526214965, "question_id": 50313911, "link": "https://stackoverflow.com/questions/50313911/exec-scripts-script-sh-stat-scripts-script-sh-no-such-file-or-directory", "title": "&quot;exec: \\&quot;scripts/script.sh\\&quot;: stat scripts/script.sh: no such file or directory", "body": "<p>I am getting this error while trying to bring up the first hyperledger network:</p>\n\n<pre><code>$ ./byfn.sh -m up\nStarting with channel 'mychannel' and CLI timeout of '10' seconds and CLI delay of '3' seconds\nContinue? [Y/n] y\nproceeding ...\n2018-05-13 07:33:04.240 UTC [main] main -&gt; INFO 001 Exiting.....\nLOCAL_VERSION=1.1.0\nDOCKER_IMAGE_VERSION=1.1.0\nStarting peer1.org1.example.com ... done\nStarting peer1.org2.example.com ... done\nStarting peer0.org1.example.com ... done\nStarting peer0.org2.example.com ... done\nStarting orderer.example.com    ... done\ncli is up-to-date\nOCI runtime exec failed: exec failed: container_linux.go:348: starting container process caused \"exec: \\\"scripts/script.sh\\\": stat scripts/script.sh: no such file or directory\": unknown\nERROR !!!! Test failed\n</code></pre>\n\n<p>The main folder fabric-samples is under the folder C:\\User\\XXXXX. This is the same path for $HOME as well. I can see that the file script.sh is present under fabric-samples/first-network/scripts. </p>\n\n<p>Any other setting that needs to be done to help execute this?</p>\n\n<p>Go version: </p>\n\n<pre><code>go version go1.10.2 windows/amd64\n</code></pre>\n"}, {"tags": ["go", "concurrency", "synchronization", "channel", "goroutine"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "edited": false, "score": 0, "creation_date": 1526233298, "post_id": 50313611, "comment_id": 87653551, "body": "It works! But for this case tasks will wait till one of the worker will be freed. I want to implement case when goroutine for generating tasks will be able to put as much items to the queue, as we have available memory. And all of them will be proceeded one-by-one with workers. Is it possible? One of use cases is described in my prev. comment"}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "edited": false, "score": 0, "creation_date": 1526237580, "post_id": 50313611, "comment_id": 87654828, "body": "Is it sufficient to increase the size of the workCh channel? If not, then use <a href=\"https://godoc.org/sync#Cond\" rel=\"nofollow noreferrer\">sync.Cond</a> to implement a queue with no size limit."}, {"owner": {"reputation": 1988, "user_id": 6716410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbA3G.png?s=128&g=1", "display_name": "sf9v", "link": "https://stackoverflow.com/users/6716410/sf9v"}, "edited": false, "score": 0, "creation_date": 1562432656, "post_id": 50313611, "comment_id": 100374924, "body": "@CeriseLim&#243;n, would it make a difference if you would use a buffered channel? e.g. <code>results := make(chan string, num_workers)</code> I modified your example here: <a href=\"https://play.golang.org/p/6Jpjs887Wbc\" rel=\"nofollow noreferrer\">play.golang.org/p/6Jpjs887Wbc</a>, it seems that the results are ordered, but I don&#39;t understand why."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "reply_to_user": {"reputation": 1988, "user_id": 6716410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbA3G.png?s=128&g=1", "display_name": "sf9v", "link": "https://stackoverflow.com/users/6716410/sf9v"}, "edited": false, "score": 0, "creation_date": 1562434271, "post_id": 50313611, "comment_id": 100375285, "body": "@StevenFerrer The results are ordered due to details of the implementation. It valid for your program to print results in other orders."}, {"owner": {"reputation": 1988, "user_id": 6716410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbA3G.png?s=128&g=1", "display_name": "sf9v", "link": "https://stackoverflow.com/users/6716410/sf9v"}, "edited": false, "score": 0, "creation_date": 1562435722, "post_id": 50313611, "comment_id": 100375593, "body": "@CeriseLim&#243;n, thank you for your quick response. You&#39;re right, I tried it with my code and the results are not ordered. I was hoping that there is a way to truly make the results to come in order. Something like a queue but still maintaining async processing of the jobs."}, {"owner": {"reputation": 1988, "user_id": 6716410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RbA3G.png?s=128&g=1", "display_name": "sf9v", "link": "https://stackoverflow.com/users/6716410/sf9v"}, "edited": false, "score": 0, "creation_date": 1562437900, "post_id": 50313611, "comment_id": 100376078, "body": "@CeriseLim&#243;n, Good idea! Here&#39;s the new question: <a href=\"https://stackoverflow.com/questions/56916688/golang-ordering-results-of-goroutines\" title=\"golang ordering results of goroutines\">stackoverflow.com/questions/56916688/&hellip;</a>"}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 7, "last_activity_date": 1526195151, "creation_date": 1526195151, "answer_id": 50313611, "question_id": 50313376, "link": "https://stackoverflow.com/questions/50313376/synchronization-for-several-goroutines-using-channels/50313611#50313611", "title": "Synchronization for several goroutines using channels", "body": "<p>Use <a href=\"http://godoc.org/sync#WaitGroup\" rel=\"noreferrer\">sync.WaitGroup</a> to wait for goroutines to complete.  Close channels to cause loops reading on channels to exit.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sync\"\n)\n\ntype workerChannel chan uint64\n\nconst num_workers = 5\n\nfunc main() {\n\n    results := make(chan string)\n    workCh := make(workerChannel)\n\n    // Start workers\n    var wg sync.WaitGroup\n    wg.Add(num_workers)\n    for i := 0; i &lt; num_workers; i++ {\n        go func(num int) {\n            defer wg.Done()\n            // Loop processing work until workCh is closed\n            for w := range workCh {\n                results &lt;- fmt.Sprintf(\"worker %d, task %d\", num, w)\n            }\n\n        }(i)\n    }\n\n    // Close result channel when workers are done\n    go func() {\n        wg.Wait()\n        close(results)\n    }()\n\n    // Send work to be done\n    go func() {\n        for i := 0; i &lt; 21; i++ {\n            workCh &lt;- uint64(i)\n        }\n        // Closing the channel causes workers to break out of loop\n        close(workCh)\n    }()\n\n    // Process results. Loop exits when result channel is closed.\n    for r := range results {\n        fmt.Println(r)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/ZifpzsP6fNv\" rel=\"noreferrer\">https://play.golang.org/p/ZifpzsP6fNv</a></p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "edited": false, "score": 0, "creation_date": 1526232546, "post_id": 50313814, "comment_id": 87653355, "body": "In both versions you offer to close channel from the inside of the worker. This is not the case for me. In my case queue will be updated in runtime and I have no idea where is the end of data. Lets say that remote host enumerate files and provide filenames to the queue. The worker is calculating hash from the filename (the process took up to 30 seconds). I want to start a number of workers and goroutine that will receive filename and put them to the queue. Each worker is much slower than collector.  At the end of files, special command will be received an we must wait for finish the queue."}, {"owner": {"reputation": 912, "user_id": 1912391, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/890f477cf12dd59c58e326be303f04b6?s=128&d=identicon&r=PG", "display_name": "ZAky", "link": "https://stackoverflow.com/users/1912391/zaky"}, "reply_to_user": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "edited": false, "score": 0, "creation_date": 1526362728, "post_id": 50313814, "comment_id": 87701843, "body": "1. I close the channel from main, not from the worker. Its a good role of thumb to close the resource in the same function/object that created it. 2. Closing the channel close it only for writing, all the buffered messages will continue to be processed. 3. I didn&#39;t understand the case. Its an HTTP server? A daemon that read from pub/sub queue? or a job?"}], "tags": [], "owner": {"reputation": 912, "user_id": 1912391, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/890f477cf12dd59c58e326be303f04b6?s=128&d=identicon&r=PG", "display_name": "ZAky", "link": "https://stackoverflow.com/users/1912391/zaky"}, "is_accepted": false, "score": 1, "last_activity_date": 1526197659, "last_edit_date": 1526197659, "creation_date": 1526197001, "answer_id": 50313814, "question_id": 50313376, "link": "https://stackoverflow.com/questions/50313376/synchronization-for-several-goroutines-using-channels/50313814#50313814", "title": "Synchronization for several goroutines using channels", "body": "<p>I suggest using close(chan) for this kind of tasks.</p>\n\n<p>WaitGroup version.</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"sync\"\n)\n\nfunc worker(in chan int, wg *sync.WaitGroup) {\n    defer wg.Done()\n    for i := range in {\n        log.Println(i)\n    }\n\n}\n\nfunc main() {\n    in := make(chan int)\n    lc := 25\n    maxValue := 30\n    wg := sync.WaitGroup{}\n    wg.Add(lc)\n    for i := 0; i &lt; lc; i++ {\n        go worker(in, &amp;wg)\n    }\n\n    for c := 0; c &lt;= maxValue; c++ {\n        in &lt;- c\n    }\n    close(in)\n    wg.Wait()\n}\n</code></pre>\n\n<p>Channel version</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n)\n\nfunc worker(in chan int, end chan struct{}) {\n    defer func() { end &lt;- struct{}{} }()\n    for i := range in {\n        log.Println(i)\n    }\n\n}\n\nfunc main() {\n    in := make(chan int)\n    lc := 25\n    maxValue := 30\n    end := make(chan struct{})\n    var fin int\n    go func() {\n        for {\n            &lt;-end\n            fin++\n            log.Println(`fin`, fin)\n            if fin == lc {\n                break\n            }\n        }\n        close(end)\n        os.Exit(0)\n    }()\n    for i := 0; i &lt; lc; i++ {\n        go worker(in, end)\n    }\n\n    for c := 0; c &lt;= maxValue; c++ {\n        in &lt;- c\n    }\n    close(in)\n    &lt;-make(chan struct{})\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7502236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc9ce5ce519d93e95848744d2a605f0?s=128&d=identicon&r=PG&f=1", "display_name": "EagleNN", "link": "https://stackoverflow.com/users/7502236/eaglenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2879, "favorite_count": 0, "accepted_answer_id": 50313611, "answer_count": 2, "score": 3, "last_activity_date": 1562482691, "creation_date": 1526192952, "last_edit_date": 1562482691, "question_id": 50313376, "link": "https://stackoverflow.com/questions/50313376/synchronization-for-several-goroutines-using-channels", "title": "Synchronization for several goroutines using channels", "body": "<p>I need to start a number of workers with single task queue and single result queue. Each worker should be started in different goroutine. And I need to wait till all workers will be finished and task queue will be empty before exiting from program.\nI have prepare small example for goroutine synchronization.\nThe main idea was that we count tasks in queue and waiting for all workers to finish jobs. But current implementation sometime miss values.\nWhy this happends and how to solve the problem?\nThe sample code:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    \"fmt\"\n    \"os\"\n    \"os/signal\"\n    \"strconv\"\n)\n\nconst num_workers = 5\n\ntype workerChannel chan uint64\n\n// Make channel for tasks\nvar workCh workerChannel\n// Make channel for task counter\nvar cntChannel chan int\n\n// Task counter\nvar tskCnt int64\n\n// Worker function\nfunc InitWorker(input workerChannel, result chan string, num int) {\n    for {\n        select {\n        case inp := &lt;-input:\n            getTask()\n            result &lt;- (\"Worker \" + strconv.Itoa(num) + \":\" + strconv.FormatUint(inp, 10))\n        }\n    }\n}\n\n// Function to manage task counter\n// should be in uniq goroutine\nfunc taskCounter(inp chan int) {\n    for {\n        val := &lt;-inp\n        tskCnt += int64(val)\n    }\n}\n\n// Put pask to the queue\nfunc putTask(val uint64) {\n    func() {\n        fmt.Println(\"Put \", val)\n        cntChannel &lt;- int(1)\n        workCh &lt;- val\n    }()\n}\n\n// Get task from queue\nfunc getTask() {\n    func() {\n        cntChannel &lt;- int(-1)\n    }()\n}\n\nfunc main() {\n// Init service channels\n    abort := make(chan os.Signal)\n    done := make(chan bool)\n\n// init queue for results\n    result := make(chan string)\n\n// init task queue\n    workCh = make(workerChannel)\n\n// start some workers\n    for i := uint(0); i &lt; num_workers; i++ {\n        go InitWorker(workCh, result, int(i))\n    }\n\n// init counter for synchro\n    cntChannel = make(chan int)\n    go taskCounter(cntChannel)\n\n// goroutine that put some tasks into queue\n    go func() {\n        for i := uint(0); i &lt; 21; i++ {\n            putTask(uint64(i))\n        }\n\n        // wait for processing all tasks and close application\n        for len(cntChannel) != 0 {}\n        for tskCnt != 0 {}\n        for len(workCh) != 0 {}\n        for len(result) != 0 {}\n\n        // send signal for close\n        done &lt;- true\n    }()\n\n    signal.Notify(abort, os.Interrupt)\n    for {\n        select {\n        case &lt;-abort:\n            fmt.Println(\"Aborted.\")\n            os.Exit(0)\n\n        // print results\n        case res := &lt;-result:\n            fmt.Println(res)\n\n        case &lt;-done:\n            fmt.Println(\"Done\")\n            os.Exit(0)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "bazel", "build-tools"], "comments": [{"owner": {"reputation": 26173, "user_id": 1891, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c40d475927f7a86639ec54aa32517572?s=128&d=identicon&r=PG", "display_name": "Jay Conrod", "link": "https://stackoverflow.com/users/1891/jay-conrod"}, "edited": false, "score": 0, "creation_date": 1526252741, "post_id": 50312539, "comment_id": 87658653, "body": "As Ittai suggested below, please do file an issue on github.com/bazelbuild/rules_go. It&#39;s likely this will need to be fixed on the rules_go side, but it would be helpful to know more about your setup (OS, bazel version, rules_go version, number of files and dependencies involved)."}, {"owner": {"reputation": 441, "user_id": 1875058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/990c5ccec1b6b1ac632d16eaa174154b?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1875058/deepak"}, "reply_to_user": {"reputation": 26173, "user_id": 1891, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c40d475927f7a86639ec54aa32517572?s=128&d=identicon&r=PG", "display_name": "Jay Conrod", "link": "https://stackoverflow.com/users/1891/jay-conrod"}, "edited": false, "score": 0, "creation_date": 1526274442, "post_id": 50312539, "comment_id": 87662420, "body": "@JayConrod Updated the question with OS, bazel and go rules versions. Hope it helps. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 4815, "user_id": 170013, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b9978f2d051ec9d9716274764be7b1da?s=128&d=identicon&r=PG", "display_name": "Ittai", "link": "https://stackoverflow.com/users/170013/ittai"}, "is_accepted": false, "score": 0, "last_activity_date": 1526217241, "creation_date": 1526217241, "answer_id": 50316504, "question_id": 50312539, "link": "https://stackoverflow.com/questions/50312539/bazel-build-gives-argument-list-too-long-error/50316504#50316504", "title": "bazel build gives &quot;Argument list too long&quot; error", "body": "<p>I think it's not in your BUILD file but rather in rules_go.<br>\nI'd recommend opening them an issue since AFAIK this is something the rule implementation needs to support.<br>\nFor example in rules_scala we write the arguments to a file and then pass that file to the worker exactly like how you mention above.<br>\n<a href=\"https://github.com/bazelbuild/rules_scala/blob/master/scala/private/rule_impls.bzl#L274\" rel=\"nofollow noreferrer\">https://github.com/bazelbuild/rules_scala/blob/master/scala/private/rule_impls.bzl#L274</a></p>\n"}], "owner": {"reputation": 441, "user_id": 1875058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/990c5ccec1b6b1ac632d16eaa174154b?s=128&d=identicon&r=PG", "display_name": "Deepak", "link": "https://stackoverflow.com/users/1875058/deepak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526274391, "creation_date": 1526182686, "last_edit_date": 1592644375, "question_id": 50312539, "link": "https://stackoverflow.com/questions/50312539/bazel-build-gives-argument-list-too-long-error", "title": "bazel build gives &quot;Argument list too long&quot; error", "body": "<p>Trying to build go application using bazel. It fails due to multiple packages and source files present within the application.</p>\n<ul>\n<li>OS: Mac OS (High Sierra)</li>\n<li>Bazel version : 0.11.1 (homebrew)</li>\n<li>Go rules: 0.11.0</li>\n</ul>\n<p>Defined local_repository in WORKSPACE to get external dependencies</p>\n<p>Running following command</p>\n<pre><code>bazel build //go-app\n</code></pre>\n<p>leads to error</p>\n<blockquote>\n<p>Action failed to execute: java.io.IOException: Cannot run program\n&quot;/usr/bin/sandbox-exec&quot; (in directory\n&quot;/TEMP_DIR/PATH&quot;):\nerror=7, Argument list too long</p>\n<p>Target //go-app:go-app failed to build</p>\n</blockquote>\n<p>I came across <a href=\"https://docs.bazel.build/versions/master/skylark/lib/Args.html#use_param_file\" rel=\"nofollow noreferrer\">https://docs.bazel.build/versions/master/skylark/lib/Args.html#use_param_file</a> and thought it would fix my issue. Could anyone point me in the direction of how and where to implement this in my BUILD file and make it work? Thanks.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1526169870, "post_id": 50311532, "comment_id": 87639581, "body": "<a href=\"https://godoc.org/net/http#Server.Handler\" rel=\"nofollow noreferrer\">server.Handler</a> = r"}], "answers": [{"tags": [], "owner": {"reputation": 4589, "user_id": 5612096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51821186ffde540f4d10b86544ca1a7d?s=128&d=identicon&r=PG", "display_name": "Adirio", "link": "https://stackoverflow.com/users/5612096/adirio"}, "is_accepted": false, "score": 3, "last_activity_date": 1551173140, "creation_date": 1551173140, "answer_id": 54882176, "question_id": 50311532, "link": "https://stackoverflow.com/questions/50311532/autocert-using-gorilla-mux/54882176#54882176", "title": "Autocert using gorilla mux", "body": "<p>The integration would be like this:</p>\n\n<pre><code>func main() {\n    certManager := autocert.Manager{\n        Prompt:     autocert.AcceptTOS,\n        //HostPolicy: autocert.HostWhitelist(\"example.com\"),\n        Cache:      autocert.DirCache(\"./certs\"),            //Folder for storing certificates\n    }\n\n    r := mux.NewRouter()\n    r.PathPrefix(\"/static/\").Handler(http.StripPrefix(\"/static/\", http.FileServer(http.Dir(dir))))\n    r.HandleFunc(\"/login.html\",  LoginHtml)\n\n    server := &amp;http.Server{\n        Addr:      \":https\",\n        Handler:   r,\n        TLSConfig: &amp;tls.Config{\n            GetCertificate: certManager.GetCertificate,\n        },\n    }\n\n    go http.ListenAndServe(\":http\", certManager.HTTPHandler(nil))\n\n    log.Fatal(server.ListenAndServeTLS(\"\", \"\")) //Key and cert are coming from Let's Encrypt\n}\n</code></pre>\n\n<p>I would suggest to add some timeouts to the server. I usually go for Read, Write and Idle.</p>\n"}], "owner": {"reputation": 93, "user_id": 7204615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54176ff575fc7ec6f336c97869756259?s=128&d=identicon&r=PG&f=1", "display_name": "Lucian Blaga", "link": "https://stackoverflow.com/users/7204615/lucian-blaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1551173173, "creation_date": 1526168261, "last_edit_date": 1551173173, "question_id": 50311532, "link": "https://stackoverflow.com/questions/50311532/autocert-using-gorilla-mux", "title": "Autocert using gorilla mux", "body": "<p>I want to generate certificate using autocert and using gorila mux, my actual code is:</p>\n\n<pre><code>func main() {\n    certManager := autocert.Manager{\n        Prompt:     autocert.AcceptTOS,\n        //HostPolicy: autocert.HostWhitelist(\"example.com\"),\n        Cache:      autocert.DirCache(\"./certs\"),            //Folder for storing certificates\n    }\n\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        w.Write([]byte(\"Hello world\"))\n    })\n\n    server := &amp;http.Server{\n        Addr:      \":https\",\n        TLSConfig: &amp;tls.Config{\n            GetCertificate: certManager.GetCertificate,\n        },\n    }\n\n    go http.ListenAndServe(\":http\", certManager.HTTPHandler(nil))\n\n    log.Fatal(server.ListenAndServeTLS(\"\", \"\")) //Key and cert are coming from Let's Encrypt\n}\n</code></pre>\n\n<p>my routers is:</p>\n\n<pre><code>r := mux.NewRouter()\nr.PathPrefix(\"/static/\").Handler(http.StripPrefix(\"/static/\", http.FileServer(http.Dir(dir))))\nr.HandleFunc(\"/login.html\",  LoginHtml)\n</code></pre>\n\n<p>How can I integrate the gurilla mux in my actual code?</p>\n"}, {"tags": ["go", "file-io"], "comments": [{"owner": {"reputation": 26649, "user_id": 188702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9257dbb2fdd9d164711aa191420ef621?s=128&d=identicon&r=PG", "display_name": "Dominic Barnes", "link": "https://stackoverflow.com/users/188702/dominic-barnes"}, "edited": false, "score": 1, "creation_date": 1526167089, "post_id": 50311374, "comment_id": 87639133, "body": "When asking questions like this, I&#39;d recommend reading the source code. (it&#39;s pretty well-documented and generally easy to read)"}, {"owner": {"reputation": 26649, "user_id": 188702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9257dbb2fdd9d164711aa191420ef621?s=128&d=identicon&r=PG", "display_name": "Dominic Barnes", "link": "https://stackoverflow.com/users/188702/dominic-barnes"}, "edited": false, "score": 1, "creation_date": 1526167277, "post_id": 50311374, "comment_id": 87639158, "body": "The answer to this question may also vary considerably depending on the platform."}, {"owner": {"reputation": 226, "user_id": 7525350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8684620dc1923d467f336e062c5e90c1?s=128&d=identicon&r=PG&f=1", "display_name": "tillyboy", "link": "https://stackoverflow.com/users/7525350/tillyboy"}, "reply_to_user": {"reputation": 26649, "user_id": 188702, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9257dbb2fdd9d164711aa191420ef621?s=128&d=identicon&r=PG", "display_name": "Dominic Barnes", "link": "https://stackoverflow.com/users/188702/dominic-barnes"}, "edited": false, "score": 1, "creation_date": 1526169007, "post_id": 50311374, "comment_id": 87639458, "body": "I am not the most proficient source code crawler, but <a href=\"https://golang.org/src/os/stat.go?s=309:349#L1\" rel=\"nofollow noreferrer\">what I found</a> doesn&#39;t help me at all.  Finding the <a href=\"https://golang.org/src/os/stat_unix.go\" rel=\"nofollow noreferrer\"><code>statNolog</code> functions definition</a>, doesn&#39;t help me either, <a href=\"https://golang.org/src/syscall/syscall_linux_amd64.go?s=3452:3500#L54\" rel=\"nofollow noreferrer\"><code>syscall.Stats</code></a> is totally cryptic to me, and I cannot find the source for <code>fillFileStatFromSys</code>, but I guess it redirects to syscall somewhere, which then again I won&#39;t understand."}, {"owner": {"reputation": 221, "user_id": 1627538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoUzx.jpg?s=128&g=1", "display_name": "Abdelilah", "link": "https://stackoverflow.com/users/1627538/abdelilah"}, "edited": false, "score": 0, "creation_date": 1526170733, "post_id": 50311374, "comment_id": 87639704, "body": "it&#39;s a syscall to the operation system, like a wrapper, depends on the OS"}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 5, "last_activity_date": 1526184985, "creation_date": 1526184985, "answer_id": 50312711, "question_id": 50311374, "link": "https://stackoverflow.com/questions/50311374/does-golangs-os-stat-open-the-file/50312711#50312711", "title": "Does golangs os.Stat open the file?", "body": "<p>The <a href=\"https://golang.org/pkg/os/#File.Stat\" rel=\"noreferrer\">documentation</a> doesn't really explain why you'd want a <code>FileInfo</code>, or how it's retrieved. I suspect they're assuming that most readers will recognize, from the name, that it's a cross-platform abstraction for the Unix call <a href=\"http://pubs.opengroup.org/onlinepubs/009604499/functions/stat.html\" rel=\"noreferrer\"><code>stat</code></a>, and will already be aware of what that means. This isn't unique to Go\u2014countless other languages' standard libraries have a similarly-named function and similar assumptions in the docs. (See <a href=\"https://docs.python.org/3/library/os.html#os.stat\" rel=\"noreferrer\">Python</a>, for example.)</p>\n\n<p>The point of the <code>stat</code> function is to get metadata (size, creation time, etc.) about a file without having to open it. There are two reasons this is important:</p>\n\n<ul>\n<li>You may not have permissions to open the file.</li>\n<li>Reading just the metadata can be a lot more efficient (no need to read the data stream, create an entry in the kernel's open file table, etc.).</li>\n</ul>\n\n<p>And, as you saw in the docs, <code>os.Stat</code> is implemented on most platforms as <code>stat</code> or <a href=\"https://linux.die.net/man/2/fstatat\" rel=\"noreferrer\"><code>fstatat</code></a>.<sup>1</sup></p>\n\n<p>So, if you want to get the size of a file, <code>os.Stat</code> is a lot faster than, say, opening the file, seeking to the end, and getting the current position. Or even just opening the file and closing it. But it's still not free.</p>\n\n<p>With most Unix filesystems, it works by reading an inode, a single disk block with all the key information about a file, and inode allocation is usually optimized. (It also requires reading at least one directory, since you're specifying the file by name, but that gets cached for the usual case where performance matters, scanning a whole directory or tree.)</p>\n\n<p>And there definitely are platform differences. The biggest,<sup>2</sup> as usual, is between Windows and everybody else. Windows' NTFS filesystem caches most, but not all, of the same information in the directory entries, so if you only want that information, you don't even need to go to the (equivalent to an) inode, and it's much faster. But if you want everything, it's slower. Tools like <code>find</code> that are all about searching directory trees have to optimize for these differences, but for most programs, it isn't an issue; just call <code>stat</code>. Or, in Go, <code>os.Stat</code>.</p>\n\n<hr>\n\n<p><sub>1. That <code>fillFileStatFromSys</code> function you were confused by just reorganizes the information in the struct returned by <code>stat</code> into the format Go wants to present, so you don't have to deal with the equivalent of awkward C macros and legacy timestamp formats and so on.</sub></p>\n\n<p><sub>2. Historically, there have been platforms where there was nothing remotely like <code>stat</code>, and to simulate it, you really did have to open and close the file. But I don't think Go runs on any of those platforms.</sub></p>\n"}], "owner": {"reputation": 226, "user_id": 7525350, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8684620dc1923d467f336e062c5e90c1?s=128&d=identicon&r=PG&f=1", "display_name": "tillyboy", "link": "https://stackoverflow.com/users/7525350/tillyboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 50312711, "answer_count": 1, "score": 1, "last_activity_date": 1526184985, "creation_date": 1526166125, "question_id": 50311374, "link": "https://stackoverflow.com/questions/50311374/does-golangs-os-stat-open-the-file", "title": "Does golangs os.Stat open the file?", "body": "<p>Does the <code>os.Stat(path string) (os.FileInfo, error)</code> function (try to) open the file which is located at <code>path</code>, or is there any trickery involved so that it doesn't need to?</p>\n\n<p>Also, what is the performance penalty for opening/closing files multiple times (no reads/writes, I know these are slow), instead of doing it just once? Is it Hard-Disk bound? Does it differ between OSs?</p>\n"}, {"tags": ["go", "split", "slice", "file-extension"], "comments": [{"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526165112, "post_id": 50311213, "comment_id": 87638772, "body": "Use a variable, please."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 1, "creation_date": 1526165384, "post_id": 50311213, "comment_id": 87638821, "body": "... another approach: <code>&quot;ex.txt&quot;[strings.LastIndex(&quot;ex.txt&quot;, &quot;.&quot;)+1:]</code>, but still, please use a variable for the string because this is ugly."}], "answers": [{"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 18, "last_activity_date": 1587116907, "last_edit_date": 1587116907, "creation_date": 1526165296, "answer_id": 50311299, "question_id": 50311213, "link": "https://stackoverflow.com/questions/50311213/return-last-item-of-strings-split-slice-in-golang/50311299#50311299", "title": "Return last item of strings.Split() slice in Golang", "body": "<p>You should assign the results of the split to a variable, instead of calling it twice.</p>\n\n<pre><code>ss := strings.Split(msg, \".\")\ns := ss[len(ss)-1]\n</code></pre>\n\n<p>(Notice that this allows (or maybe forces) you to deal with the case where <code>ss</code> is empty or something else unexpected explicitly, before indexing it.)</p>\n\n<p>If you're doing this over and over again, and it offends you having to use two lines (or two lines plus error handling) instead of one, you can abstract it into a function easily:</p>\n\n<pre><code>func lastString(ss []string) string {\n    return ss[len(ss)-1]\n}\n\ns1 := lastString(strings.Split(\"example.txt\", \".\"))\ns2 := lastString(strings.Split(\"example.jpg\", \".\"))\n</code></pre>\n\n<p>After all, passing the result of a function as an argument has essentially the same effect as binding it to a variable.</p>\n"}, {"comments": [{"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 1, "creation_date": 1526165877, "post_id": 50311332, "comment_id": 87638922, "body": "Thank you! I saw that package but wanted to do it by hand for this purpose."}], "tags": [], "owner": {"reputation": 145, "user_id": 1472888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cea2f74d28b1be566edda938e101474?s=128&d=identicon&r=PG", "display_name": "hc6", "link": "https://stackoverflow.com/users/1472888/hc6"}, "is_accepted": false, "score": 6, "last_activity_date": 1526165605, "creation_date": 1526165605, "answer_id": 50311332, "question_id": 50311213, "link": "https://stackoverflow.com/questions/50311213/return-last-item-of-strings-split-slice-in-golang/50311332#50311332", "title": "Return last item of strings.Split() slice in Golang", "body": "<p>I would use the filepath package rather than parsing it yourself:</p>\n\n<pre><code>import \"path/filepath\"\n\ns := \"file.ext\"\next := filepath.Ext(s)\nif len(ext) != 0 {\n    fmt.Printf(\"ext = %s\\n\", ext[1:])\n} else {\n    fmt.Printf(\"no ext\\n\")\n}\n</code></pre>\n\n<p>This will work with a full path as well as just a file name.</p>\n"}, {"tags": [], "owner": {"reputation": 36489, "user_id": 592111, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f58f654597de2c10fa0403da52dfe289?s=128&d=identicon&r=PG", "display_name": "Jon Egerton", "link": "https://stackoverflow.com/users/592111/jon-egerton"}, "is_accepted": false, "score": 17, "last_activity_date": 1554912426, "creation_date": 1554912426, "answer_id": 55616962, "question_id": 50311213, "link": "https://stackoverflow.com/questions/50311213/return-last-item-of-strings-split-slice-in-golang/55616962#55616962", "title": "Return last item of strings.Split() slice in Golang", "body": "<p><a href=\"https://golang.org/pkg/strings/#LastIndex\" rel=\"noreferrer\"><code>strings.LastIndex</code></a> makes this quite neat:</p>\n\n<pre><code>s := \"Hello,Stack,Overflow\"\nlast := s[strings.LastIndex(s, \",\")+1:]\nfmt.Println(last)\n</code></pre>\n\n<p>returns \"Overflow\". If the search string isn't found it returns the whole string, which is logical.</p>\n\n<p>Playground <a href=\"https://play.golang.org/p/pn9rCj3sz57\" rel=\"noreferrer\">here</a></p>\n"}], "owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15814, "favorite_count": 1, "accepted_answer_id": 50311299, "answer_count": 3, "score": 15, "last_activity_date": 1587116907, "creation_date": 1526164541, "question_id": 50311213, "link": "https://stackoverflow.com/questions/50311213/return-last-item-of-strings-split-slice-in-golang", "title": "Return last item of strings.Split() slice in Golang", "body": "<p>I am <a href=\"https://golang.org/pkg/strings/#Split\" rel=\"noreferrer\">splitting</a> file names in Go to get at the file extension (e.g. <code>import (\"strings\") ; strings.Split(\"example.txt\", \".\")</code>). \nFor this reason, I would like to return the last item in the slice returned by the split, i.e. </p>\n\n<blockquote>\n  <p>for strings.Split(\"ex.txt\", \".\"), I want txt</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/22535775/the-last-element-of-a-slice#22535888\">This</a> question suggests that doing </p>\n\n<pre><code>strings.Split(\"ex.txt\", \".\")[len(strings.Split(\"ex.txt\", \".\")) - 1]\n</code></pre>\n\n<p>is the only way to get at it. That is, there is no <code>-1</code> as in Python. This seems very wasteful to me, as I feel we are doing the same splitting operation twice. </p>\n\n<ul>\n<li>Is there no better command for getting the last item of a slice in Go?</li>\n<li>If no, would the best approach be to write the result of <code>Split</code> into a variable, or just do the above?</li>\n</ul>\n\n<p>Thank you!</p>\n"}, {"tags": ["go", "constructor", "init"], "comments": [{"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 1, "creation_date": 1526155726, "post_id": 50310251, "comment_id": 87636422, "body": "The name <code>Define</code> is a bit strange for your struct?"}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 1, "creation_date": 1526156324, "post_id": 50310251, "comment_id": 87636584, "body": "I don&#39;t understand why you need to call <code>Area()</code> after initialization if it doesn&#39;t change the state of your struct. Why would you need this in a constructor, if the whole point of a constructor is to return a constructed <code>Define</code> which would have it&#39;s state changed by something more trivial than initial parameters."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 3, "creation_date": 1526157133, "post_id": 50310251, "comment_id": 87636806, "body": "As pointed out by jacob, your example makes little to no sense, that said, the convention is to define a &quot;constructor&quot; func that begins with <code>NewXxx</code>, e.g. <code>NewDefine</code> or <code>NewArea</code>, and in cases where your package&#39;s name matches the type you want to construct then you can stick with just <code>New</code>. E.g. say your package is named <code>area</code>, then you would define a func called <code>New</code> and then other packages that import the <code>area</code> package would initialize a new instance with <code>area.New</code>."}], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 3578692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abcd270aa5bfa384e94a2fdb89d509e?s=128&d=identicon&r=PG&f=1", "display_name": "Metatrix", "link": "https://stackoverflow.com/users/3578692/metatrix"}, "is_accepted": true, "score": 3, "last_activity_date": 1526189089, "creation_date": 1526189089, "answer_id": 50313018, "question_id": 50310251, "link": "https://stackoverflow.com/questions/50310251/what-is-the-best-way-to-implement-a-constructor-init-methods-in-go/50313018#50313018", "title": "what is the best way to implement a constructor/init methods in Go", "body": "<p>I'd rename Define to something better like Geometry. Usually in Golang, New... is used as a \"constructor\"</p>\n\n<p>Since you said you wanted area to be autocalculated, include the area as a struct field. Here's how I'd go about it (<a href=\"https://play.golang.org/p/4y6UVTTT34Z\" rel=\"nofollow noreferrer\">https://play.golang.org/p/4y6UVTTT34Z</a>):</p>\n\n<pre><code>package main\n\n//variables\ntype Geometry struct {\n    len    int\n    breath int\n    area   int\n}\n\n// Constructor\nfunc NewGeometry(len int, breadth int) *Geometry {\n    g := &amp;Geometry{len, breadth, Area(len, breadth)}\n    return g\n}\n\n//Area calculate area\nfunc Area(len, breadth int) (a int) {\n    return len * breadth\n}\n\nfunc main() {\n    g := NewGeometry(10, 2)\n    fmt.Println(g.area)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": false, "score": 0, "last_activity_date": 1526250251, "creation_date": 1526250251, "answer_id": 50321118, "question_id": 50310251, "link": "https://stackoverflow.com/questions/50310251/what-is-the-best-way-to-implement-a-constructor-init-methods-in-go/50321118#50321118", "title": "what is the best way to implement a constructor/init methods in Go", "body": "<p>Go has the concept of <a href=\"https://golang.org/doc/effective_go.html#composite_literals\" rel=\"nofollow noreferrer\">\"Constructors\"</a> that may cover your use case.  Combined with exporting it allows you to encapsulate initialization by hiding specifics of calculation from callers:</p>\n\n<pre><code>package main\n\n//Define declare variables\ntype Define struct {\n    len    int\n    breath int\n    area   int \n}\n\nfunc (e Define) Area() int {\n    return e.area\n}\n\nfunc NewDefine(l, b int) Define {\n   d := Define{\n      len: l,\n      breath: b,\n      area: calculateArea(l, b),\n   }\n   return d\n}\n</code></pre>\n\n<p>The pattern to focus on is the exported <code>NewX</code>.  It is extremely common to see constructors named <code>NewX</code> which will initialize and return a struct.  The above delegates to an un-exported <code>calculateArea</code> function.  Of course there are many different possible ways for you to structure your program.  <code>calculateArea</code> still encapsulates the area calculation for trivial unit testing, while hiding it from callers by not exporting it.</p>\n"}], "owner": {"reputation": 77, "user_id": 9738307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1f05380da6300ef30e5e3206f712105?s=128&d=identicon&r=PG&f=1", "display_name": "pretty08", "link": "https://stackoverflow.com/users/9738307/pretty08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 50313018, "answer_count": 2, "score": 0, "last_activity_date": 1526250251, "creation_date": 1526155516, "last_edit_date": 1526167254, "question_id": 50310251, "link": "https://stackoverflow.com/questions/50310251/what-is-the-best-way-to-implement-a-constructor-init-methods-in-go", "title": "what is the best way to implement a constructor/init methods in Go", "body": "<p>I have a program as below:</p>\n\n<pre><code>package main\n\n//Define declare variables\ntype Define struct {\n    len    int\n    breath int\n}\n\n//Area calculate area\nfunc (e *Define) Area() (a int) {\n    a = e.len * e.breath\n    return a\n}\n</code></pre>\n\n<p>I call the above program in :</p>\n\n<pre><code>package main\n\nfunc main() {\n    y := Define{10, 10}\n    x := y.Area()\n    print(x)\n}\n</code></pre>\n\n<p>I would like make the function Area() as part of struct initialization. Currently, I have to create a new object for \"Define\" ie \"y\" and then call the method Area. Instead is there a way that Area methods auto calculates once I create the object? </p>\n"}, {"tags": ["go", "heroku"], "comments": [{"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526163343, "post_id": 50310181, "comment_id": 87638402, "body": "Is that your full <code>vendor.json</code> file? It should contain an array of the app&#39;s dependencies as seen here: <a href=\"https://github.com/heroku/go-getting-started/blob/master/vendor/vendor.json\" rel=\"nofollow noreferrer\">github.com/heroku/go-getting-started/blob/master/vendor/&hellip;</a> To add the deps to vendor.json run <code>govendor add +external</code>"}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526164840, "post_id": 50310181, "comment_id": 87638720, "body": "Also your file setup shows <code>...&#47;gorilla&#47;websockets</code> while the package&#39;s actual name is singular (no &quot;s&quot; at the end), not sure if this is just a typo in the question or if it reflects your actual file setup..."}, {"owner": {"reputation": 317, "user_id": 7221826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a4abec0a80b101095bc8f9b8959a026f?s=128&d=identicon&r=PG&f=1", "display_name": "jj1111", "link": "https://stackoverflow.com/users/7221826/jj1111"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526819764, "post_id": 50310181, "comment_id": 87883851, "body": "@mkopriva Thanks! The issue was I hadn&#39;t added the deps to my vendor.json! As a follow up to your other question: I made a typo when writing my file structure above, in reality the path was .../gorilla/websocket"}], "owner": {"reputation": 317, "user_id": 7221826, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a4abec0a80b101095bc8f9b8959a026f?s=128&d=identicon&r=PG&f=1", "display_name": "jj1111", "link": "https://stackoverflow.com/users/7221826/jj1111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 773, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1551910914, "creation_date": 1526154880, "last_edit_date": 1526158328, "question_id": 50310181, "link": "https://stackoverflow.com/questions/50310181/deploying-go-project-to-heroku-error-cannot-find-package-in-any-of", "title": "deploying go project to heroku error: cannot find package in any of", "body": "<p>I've seen many people with similar problems posted on SO, but no solutions have worked for me so far. I'm trying to use govendor to deploy. My file setup:</p>\n\n<pre><code>vendor\n  /github.com\n    /gorilla\n      /websockets\n  vendor.json\nProcfile (only text is \"web: [my_app_name]\")    \nMyAppBinaryFile\n</code></pre>\n\n<p>This is my <code>vendor.json</code> file:</p>\n\n<pre><code>{\n  \"comment\": \"\",\n  \"ignore\": \"test\",\n  \"package\": [],\n  \"heroku\": {\n    \"install\" : [ \"./...\" ],\n    \"goVersion\": \"go1.9\"\n  },\n  \"rootPath\": \"github.com/[my_acct]/hackernews\"\n}\n</code></pre>\n\n<p>This is my GOPATH: <code>GOPATH=\"/Users/[my_account_name]/go\"</code></p>\n\n<p>This is my GOROOT: <code>GOROOT=\"/usr/local/Cellar/go/1.10.2/libexec\"</code></p>\n\n<p>This is my error:</p>\n\n<pre><code>remote: -----&gt; Go app detected\nremote: -----&gt; Fetching jq... done\nremote: -----&gt; Checking vendor/vendor.json file.\nremote:  !!\nremote:  !!    Deprecated or unsupported version of go (go1.9.4)\nremote:  !!    See https://devcenter.heroku.com/articles/go-support#go-versions for supported version information.\nremote:  !!\nremote: -----&gt; Installing go1.9.4\nremote: -----&gt; Fetching go1.9.4.linux-amd64.tar.gz... done\nremote: -----&gt; Fetching govendor... done\nremote: -----&gt; Fetching any unsaved dependencies (govendor sync)\nremote: -----&gt; Running: go install -v -tags heroku ./...\nremote: websockets/service.go:9:2: cannot find package \"github.com/gorilla/websocket\" in any of:\nremote:     /tmp/tmp.VCgbsN65Ud/.go/src/github.com/[my_app]/hackernews/vendor/github.com/gorilla/websocket (vendor tree)\nremote:     /app/tmp/cache/go1.9.4/go/src/github.com/gorilla/websocket (from $GOROOT)\nremote:     /tmp/tmp.VCgbsN65Ud/.go/src/github.com/gorilla/websocket (from $GOPATH)\n</code></pre>\n\n<p>I have my binary here, not in the <code>/bin</code> directory, although I've copied this file to the <code>/bin</code> directory as well with no luck. </p>\n\n<p>I've followed the heroku tutorial, and can build/deploy their sample app (<a href=\"https://devcenter.heroku.com/articles/getting-started-with-go#deploy-the-app\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/getting-started-with-go#deploy-the-app</a>). I've tried changing to godep and even glide.</p>\n\n<p>This issue (<a href=\"https://github.com/heroku/heroku-buildpack-go/issues/136\" rel=\"nofollow noreferrer\">https://github.com/heroku/heroku-buildpack-go/issues/136</a>) looks very similar from the logs outputting the error, but I my /vendor file is checked in.</p>\n\n<p>Any help is appreciated, thanks!</p>\n"}, {"tags": ["dictionary", "go", "concurrency", "channel"], "comments": [{"owner": {"reputation": 2208, "user_id": 5328069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21DZ0.jpg?s=128&g=1", "display_name": "morganbaz", "link": "https://stackoverflow.com/users/5328069/morganbaz"}, "edited": false, "score": 2, "creation_date": 1526150279, "post_id": 50309253, "comment_id": 87634938, "body": "From the approach you outlined, you&#39;d probably be creating many maps (which is expensive!) and copying the keys and values over and over. I&#39;d suggest you go for a simpler solution, keeping a map in the upper scope of the function, as the answer suggests; as new maps come in merge the two. Sure, this is not very concurrent, but other solutions would probably be more expensive, or require mutexes. If you&#39;re <i>really</i> dead set on setting the values concurrently, you can give <a href=\"https://golang.org/pkg/sync/#Map\" rel=\"nofollow noreferrer\">sync.Map</a> a shot - <a href=\"https://youtu.be/C1EtfDnsdDs\" rel=\"nofollow noreferrer\">but you probably don&#39;t need it</a>."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 1, "last_activity_date": 1526151362, "last_edit_date": 1526151362, "creation_date": 1526150241, "answer_id": 50309524, "question_id": 50309253, "link": "https://stackoverflow.com/questions/50309253/merge-maps-in-golang-concurrently/50309524#50309524", "title": "Merge maps in Golang concurrently", "body": "<p>Start with an empty map and merge any maps received on the channel to the map:</p>\n\n<pre><code>merged := make(make[string]int)\nfor m := range c {\n    for k, v := range m {\n       merged[k] = v\n    }\n}\n</code></pre>\n\n<p>The loop exits when channel <code>c</code> is closed.  The map <code>merged</code> is the merge of all maps received on <code>c</code>.</p>\n\n<p>Use variable to refer to the merged map instead of sending the merged map back to the channel.  Sending the merged map back to the channel makes the end condition more complicated without increasing concurrency.</p>\n"}], "owner": {"reputation": 273, "user_id": 3518619, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c5ac7c6da70e5763975f175c526a0273?s=128&d=identicon&r=PG&f=1", "display_name": "paraflou", "link": "https://stackoverflow.com/users/3518619/paraflou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526151362, "creation_date": 1526148310, "last_edit_date": 1526150518, "question_id": 50309253, "link": "https://stackoverflow.com/questions/50309253/merge-maps-in-golang-concurrently", "title": "Merge maps in Golang concurrently", "body": "<p>I am trying to merge many maps concurrently.\nI want to pop two maps from a channel, merge these two maps and send the merged map back to same channel until merging maps is finished. </p>\n\n<p>The bigger picture is that I produce maps concurrently and I want to start merging maps as soon as there are two available. In the end I want to have one merged map of all produced maps.</p>\n\n<p>I want to make sth like this:</p>\n\n<pre><code>func processMaps(c1 chan map[string]int) {\n    for map1 := range c1 {\n        map2 := &lt;-c1\n        mergedMap := mergeMaps(map1, map2)\n        c1 &lt;- mergedMap\n        }\n    }\n}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 2, "creation_date": 1526135449, "post_id": 50307196, "comment_id": 87630552, "body": "No, that&#39;s not possible."}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1526135498, "post_id": 50307196, "comment_id": 87630571, "body": "Only one thing you can do to check the type of underlying value of interface is use <code>fmt.Printf(&quot;%T&quot;, i)</code>"}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526136132, "post_id": 50307196, "comment_id": 87630774, "body": "You can find this feature in other parts of the language too: map access, some types of range statements, channel receives, to name a few. None of them are function calls so the question about a &quot;special case&quot; doesn&#39;t really apply."}, {"owner": {"reputation": 184, "user_id": 2052716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/705c5ee8a8be0fcf6a23a76c6c5bdfa4?s=128&d=identicon&r=PG", "display_name": "asinoladro", "link": "https://stackoverflow.com/users/2052716/asinoladro"}, "edited": false, "score": 0, "creation_date": 1526136499, "post_id": 50307196, "comment_id": 87630877, "body": "I would argue that all of these are all, conceptually, function calls, just with special syntax."}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 4, "creation_date": 1526138964, "post_id": 50307196, "comment_id": 87631618, "body": "@womblbombl: You might argue that, but you would be factually incorrect."}, {"owner": {"reputation": 184, "user_id": 2052716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/705c5ee8a8be0fcf6a23a76c6c5bdfa4?s=128&d=identicon&r=PG", "display_name": "asinoladro", "link": "https://stackoverflow.com/users/2052716/asinoladro"}, "edited": false, "score": 0, "creation_date": 1526216024, "post_id": 50307196, "comment_id": 87648429, "body": "Struggling to find a neat software engineering language-agnostic definition of a function, but broadly I&#39;d define a function (as opposed to a &#39;func&#39; declaration in Go, which is one specific kind of the broader concept) as an operation which takes zero or more inputs and produces zero or more outputs. Then you have pure functions, which have no side effects, and are closer to the mathematical definition of a function. <code>i.(T)</code> is a pure function which maps two inputs (an interface value and type) to one output (a concrete value). The + operator is another &#39;non-func&#39; pure function in this sense."}], "owner": {"reputation": 184, "user_id": 2052716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/705c5ee8a8be0fcf6a23a76c6c5bdfa4?s=128&d=identicon&r=PG", "display_name": "asinoladro", "link": "https://stackoverflow.com/users/2052716/asinoladro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1526216433, "answer_count": 0, "score": 3, "last_activity_date": 1526216675, "creation_date": 1526134634, "last_edit_date": 1526216675, "question_id": 50307196, "link": "https://stackoverflow.com/questions/50307196/can-a-go-function-check-how-many-of-its-return-values-are-being-consumed", "closed_reason": "Duplicate", "title": "Can a Go function check how many of its return values are being consumed?", "body": "<p>As per <a href=\"https://tour.golang.org/methods/15\" rel=\"nofollow noreferrer\">Go's official tour</a>, you can access an interface value's underlying concrete value using:</p>\n\n<pre><code>t := i.(T)\n</code></pre>\n\n<p>If <code>i</code> doesn't hold a <code>T</code>, the statement triggers a panic. If you do the following:</p>\n\n<pre><code>t, ok := i.(T)\n</code></pre>\n\n<p>...then there is no panic if <code>i</code> doesn't hold a <code>T</code>: we check the value of <code>ok</code> instead.</p>\n\n<p>That means the behaviour of <code>i.(T)</code> depends on whether its second return value is consumed or not. Is it possible for a normal user-written function to check whether the calling line of code consumes the second (or third, or...) argument in this way? Or is this a special case?</p>\n\n<p><strong>Note</strong>: <em>Marked as duplicate because it is a compile-time error to not consume all of a function's arguments (except by using <code>_</code>). Given that all arguments must be consumed, the question becomes: can you have functions with a variable number of returned variables, which is addressed in the linked question.</em></p>\n"}, {"tags": ["go", "equality"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 1, "creation_date": 1526127806, "post_id": 50306016, "comment_id": 87628434, "body": "<code>nil</code> is a special value, don&#39;t build your logic on it. Also see <a href=\"https://stackoverflow.com/questions/29138591/hiding-nil-values-understanding-why-golang-fails-here/29138676#29138676\">Hiding nil values, understanding why golang fails here</a>."}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 0, "creation_date": 1526146692, "post_id": 50306016, "comment_id": 87633929, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29138591/hiding-nil-values-understanding-why-golang-fails-here\">Hiding nil values, understanding why golang fails here</a>"}, {"owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "edited": false, "score": 1, "creation_date": 1526146717, "post_id": 50306016, "comment_id": 87633937, "body": "See also <a href=\"https://stackoverflow.com/q/19761393/1068283\">Why does Go have typed nil?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 3, "last_activity_date": 1526128075, "last_edit_date": 1526128075, "creation_date": 1526127671, "answer_id": 50306188, "question_id": 50306016, "link": "https://stackoverflow.com/questions/50306016/transitive-property-in-golang/50306188#50306188", "title": "Transitive property in Golang", "body": "<p>The identifier <code>nil</code> represents the <a href=\"https://golang.org/ref/spec#The_zero_value\" rel=\"nofollow noreferrer\">zero value</a> for  channel, pointer, interface, function, map and slice types. </p>\n\n<p>The zero value for a <code>*byte</code> is not equal to the zero value for an <code>interface{}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 9362398, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "brun", "link": "https://stackoverflow.com/users/9362398/brun"}, "is_accepted": false, "score": 1, "last_activity_date": 1526312326, "creation_date": 1526312326, "answer_id": 50334164, "question_id": 50306016, "link": "https://stackoverflow.com/questions/50306016/transitive-property-in-golang/50334164#50334164", "title": "Transitive property in Golang", "body": "<p>Nil does represent a zero value, but each value in go also has a type.</p>\n\n<p>I have also seen something similar to this in testing when methods return a custom error type as <code>err</code>, and then check to see if the errors are equal which fails because Go intrinsically believes they are different because you have not type asserted it to the custom error type.</p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 8591671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ae21750ead1b346f8240ee5d5458fd1a?s=128&d=identicon&r=PG&f=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/8591671/john-snow"}, "edited": false, "score": 0, "creation_date": 1546774307, "post_id": 54057238, "comment_id": 94955445, "body": "Thank you for the great example. Could you please clarify why the third statement is <code>x == &quot;hello&quot;</code> is false? According to the specification <code>if one operand is an untyped constant and the other operand is not, the constant is converted to the type of the other operand.</code> If we convert string constant <code>hello</code> to <code>x</code>, should not they be equal?"}], "tags": [], "owner": {"reputation": 21, "user_id": 10873223, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/34cb72f96189791715bb45e741179adf?s=128&d=identicon&r=PG", "display_name": "Alan A Donovan", "link": "https://stackoverflow.com/users/10873223/alan-a-donovan"}, "is_accepted": false, "score": 1, "last_activity_date": 1546730680, "creation_date": 1546730680, "answer_id": 54057238, "question_id": 50306016, "link": "https://stackoverflow.com/questions/50306016/transitive-property-in-golang/54057238#54057238", "title": "Transitive property in Golang", "body": "<p>Here's a more interesting example of intransitivity of Go's == operator. It doesn't rely on nil; for types like functions and maps, x==nil is best thought of as an special operator, since values of those types aren't comparable to each other.</p>\n\n<p><code>\n// \"hello\" != x == s == \"hello\"\nfunc main() {\n    type S string\n    var s S = \"hello\"\n    var x interface{} = s\n    fmt.Println(s == \"hello\") // s == \"hello\"\n    fmt.Println(x == s)       // x == s\n    fmt.Println(x == \"hello\") // x != \"hello\"\n}\n</code></p>\n\n<p>One way to explain this anomaly is that there are really two different equality operators at work here. The first comparison has type S, but the second and third have type interface{}. Once the types are erased, the interface conversions become explicit and each \"==\" is replaced by the appropriate comparison operator for its type. Those comparison operators, individually, are true equivalence relations, which is to say they are transitive.</p>\n"}], "owner": {"reputation": 309, "user_id": 8591671, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ae21750ead1b346f8240ee5d5458fd1a?s=128&d=identicon&r=PG&f=1", "display_name": "John Snow", "link": "https://stackoverflow.com/users/8591671/john-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1546730680, "creation_date": 1526126551, "last_edit_date": 1526131655, "question_id": 50306016, "link": "https://stackoverflow.com/questions/50306016/transitive-property-in-golang", "title": "Transitive property in Golang", "body": "<p>This piece of code looks quite counter-intuitive to me:</p>\n\n<pre><code>var first *byte\nvar second interface{}\n\nfmt.Println(first, first == nil)       // &lt;nil&gt; true\nfmt.Println(second, second == nil)     // &lt;nil&gt; true\nfmt.Println(first == second)           // false\n</code></pre>\n\n<p>As far as I understand, the case is that the first variable is a pointer to an empty variable of type <code>byte</code>, whereas the second is an empty interface. So, as the variables are not the same type, they are not considered equal.</p>\n\n<p>But if they are not equal to each other, how can they be equal to some third value? Is it common situation in programming languages when Transitive Law is not held?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526118542, "post_id": 50304851, "comment_id": 87626053, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16783273/best-way-to-implement-global-counters-for-highly-concurrent-applications\">Best way to implement global counters for highly concurrent applications?</a>"}, {"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526118557, "post_id": 50304851, "comment_id": 87626056, "body": "The question you linked to directly answers this question. How is this question not a duplicate?"}, {"owner": {"reputation": 157, "user_id": 9202774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbB6V.jpg?s=128&g=1", "display_name": "simotunes", "link": "https://stackoverflow.com/users/9202774/simotunes"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526190885, "post_id": 50304851, "comment_id": 87642386, "body": "My intension to ask this question is how it&#39;s possible that no duplication occurs. the link I put in the question doesn&#39;t answer about it."}], "answers": [{"tags": [], "owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "is_accepted": false, "score": 11, "last_activity_date": 1526143682, "last_edit_date": 1526143682, "creation_date": 1526118374, "answer_id": 50304884, "question_id": 50304851, "link": "https://stackoverflow.com/questions/50304851/how-to-create-global-counter-in-highly-concurrent-system/50304884#50304884", "title": "How to create global counter in highly concurrent system", "body": "<p>The direct answer to your question is: The code you've pasted <em>updates</em> the counter safely, but doesn't read or reset it safely.</p>\n\n<p>Contrary to the accepted answer in the question you linked to, however, the easiest, most efficient way to implement a shared counter is with the <a href=\"https://golang.org/pkg/sync/atomic\" rel=\"noreferrer\">atomic</a> package. It can be used to atomically increment several common types.  Example:</p>\n\n<pre><code>var globalCounter *int32 = new(int32)\n\n// .. later in your code\ncurrentCount := atomic.AddInt32(globalCounter, 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 336, "user_id": 2651871, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4830aa030d20eeda5677e23f830dddd2?s=128&d=identicon&r=PG", "display_name": "Amber Kulkarni", "link": "https://stackoverflow.com/users/2651871/amber-kulkarni"}, "edited": false, "score": 0, "creation_date": 1559112278, "post_id": 50306111, "comment_id": 99313280, "body": "I am currently the mutex variation to implement global counters.     In my current scenario I am updating counter when I receive a request.     I am also logging a line prior I increment the counter.     The problem is that after 8-9 hours at around 500 qps there is a difference in the number of lines logged vs the counter number.     the counter always has less values."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 5, "last_activity_date": 1526140632, "last_edit_date": 1526140632, "creation_date": 1526127202, "answer_id": 50306111, "question_id": 50304851, "link": "https://stackoverflow.com/questions/50304851/how-to-create-global-counter-in-highly-concurrent-system/50306111#50306111", "title": "How to create global counter in highly concurrent system", "body": "<p>Use a <a href=\"https://godoc.org/sync#Mutex\" rel=\"noreferrer\">sync.Mutex</a> to create a counter with add, get and reset operations as shown in the question.</p>\n\n<pre><code>type counter struct {\n    mu sync.Mutex\n    n  int\n}\n\nfunc (c *counter) Add() {\n    c.mu.Lock()\n    c.n++\n    c.mu.Unlock()\n}\n\nfunc (c *counter) Get() int {\n    c.mu.Lock()\n    n := c.n\n    c.mu.Unlock()\n    return n\n}\n\nfunc (c *counter) Reset() {\n    c.mu.Lock()\n    if c.n &gt; 8190 {\n        c.n = 0\n    }\n    c.mu.Unlock()\n}\n</code></pre>\n\n<p>If the reset function is not needed, then use the <a href=\"https://godoc.org/sync/atomic\" rel=\"noreferrer\">sync/atomic</a>. </p>\n\n<pre><code>type counter struct {\n    n int32\n}\n\nfunc (c *counter) Add() {\n    atomic.AddInt32(&amp;c.n, 1)\n}\n\nfunc (c *counter) Get() int {\n    return int(atomic.LoadInt32(&amp;c.n))\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 9202774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbB6V.jpg?s=128&g=1", "display_name": "simotunes", "link": "https://stackoverflow.com/users/9202774/simotunes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3056, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1601031603, "creation_date": 1526118124, "last_edit_date": 1601031603, "question_id": 50304851, "link": "https://stackoverflow.com/questions/50304851/how-to-create-global-counter-in-highly-concurrent-system", "title": "How to create global counter in highly concurrent system", "body": "<p>I'm creating global counter, which can be shared between goroutines.\nReferring to this <a href=\"https://stackoverflow.com/questions/16783273/golang-best-way-to-implement-global-counters-for-highly-concurrent-applications\">question</a>, following code may satisfy my needs.</p>\n<p>However if there ware lots of concurrent requests, could it happen that the same number is assigned to more than two goroutines?\nIf so how can I avoid this?</p>\n<p>This question is different from the link I pasted, as what I want to know about is how I can avoid duplication using channel counter. if the only possible solution is other implementation like sync.Mutex or atomic, I'll use it. however, according to the link (again), channel seems to be the best option. Any comment or answer really helpful. thanks in advance.\nI'm new to multithread coding and also go, might be silly question. sorry for that.</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;time&quot;\n)\n\nvar counter int\nvar counter_chan chan int\n\nfunc main() {\n    counter_chan = make(chan int, 100)\n\n    counter = 0\n\n    go func() {\n        for {\n            select {\n            case chanc := &lt;-counter_chan:\n                counter += chanc\n                fmt.Printf(&quot;%d \\n&quot;, counter)\n            }\n        }\n    }()\n\n    for i := 0; i &lt; 10; i++ {\n        go AddCounter(counter_chan)\n    }\n\n    time.Sleep(time.Second)\n    fmt.Printf(&quot;Total Count is ... %d \\n&quot;, GetCount())\n\n}\n\nfunc AddCounter(ch chan int) {\n    ch &lt;- 1\n}\n\nfunc GetCount() int {\n    return counter\n}\n\nfunc ResetCount() {\n    if counter &gt; 8190 {\n        counter = 0\n    }\n}\n</code></pre>\n<p>-- Edit 05/14 2018</p>\n<p>Assume following code is thread-safe for getting and resetting value. Am I right?</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;time&quot;\n)\n\nvar counter int\nvar addCounterChan chan int\nvar readCounterChan chan int\n\nfunc main() {\n    addCounterChan = make(chan int, 100)\n    readCounterChan = make(chan int, 100)\n\n    counter = 0\n\n    go func() {\n        for {\n            select {\n            case val := &lt;-addCounterChan:\n                counter += val\n                if counter &gt; 5 {\n                    counter = 0\n                }\n                readCounterChan &lt;- counter\n                fmt.Printf(&quot;%d \\n&quot;, counter)\n            }\n        }\n    }()\n\n    for i := 0; i &lt; 10; i++ {\n        go AddCounter(addCounterChan)\n    }\n\n    time.Sleep(time.Second)\n\n    for i := 0; i &lt; 10; i++ {\n        fmt.Printf(&quot;Total Count #%d is ... %d \\n&quot;, (i + 1), GetCount(readCounterChan))\n    }\n\n}\n\n// Following two functions will be implemented in another package in real case.\nfunc AddCounter(ch chan int) {\n    ch &lt;- 1\n}\n\nfunc GetCount(ch chan int) int {\n    r := &lt;-ch\n    return r\n}\n</code></pre>\n"}, {"tags": ["go", "amazon-s3"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526116745, "post_id": 50303991, "comment_id": 87625619, "body": "Your error message is a bit confusing. Is that exactly how you see it appearing?  Or is that two errors (an error, followed by a stack trace)?"}, {"owner": {"reputation": 961, "user_id": 1775688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2f0b.png?s=128&g=1", "display_name": "Jota Santos", "link": "https://stackoverflow.com/users/1775688/jota-santos"}, "reply_to_user": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 0, "creation_date": 1526132921, "post_id": 50303991, "comment_id": 87629774, "body": "As @Flimzy said, the whole thing is a bit confusing. So my advise is to start cleaning things a little bit from the start.  First, you <code>ioutil.ReadAll</code>, after it you <code>file.Read</code> (but since you ioutil.ReadAll the cursor is at the very end so you should be getting no bytes).  You don&#39;t need to do that process to get the file size because you already have <code>handler.Size</code>."}, {"owner": {"reputation": 961, "user_id": 1775688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2f0b.png?s=128&g=1", "display_name": "Jota Santos", "link": "https://stackoverflow.com/users/1775688/jota-santos"}, "edited": false, "score": 0, "creation_date": 1526133326, "post_id": 50303991, "comment_id": 87629869, "body": "Looking at the AWS S3 documentation of PutObject (link below) the <code>Body</code> is a <code>io.ReadSeeker</code> and the <code>multipart.File</code> you get when you <code>r.FormFile(&quot;file&quot;)</code> implements <code>io.Reader</code> and <code>io.Seeker</code> so I think you can pass <code>file</code> direct to the <code>PutObject</code>.  <a href=\"https://docs.aws.amazon.com/sdk-for-go/api/service/s3/#PutObjectInput\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdk-for-go/api/service/s3/#PutObjectInpu&zwnj;&#8203;t</a>"}], "owner": {"reputation": 2015, "user_id": 1591668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb658beece55f9525bd4cbb682fadc44?s=128&d=identicon&r=PG", "display_name": "user1591668", "link": "https://stackoverflow.com/users/1591668/user1591668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526112363, "creation_date": 1526111061, "last_edit_date": 1526112363, "question_id": 50303991, "link": "https://stackoverflow.com/questions/50303991/golang-amazon-s3-video-upload-giving-weird-errors", "title": "Golang amazon s3 video upload giving weird errors", "body": "<p>I am using Golang as my backend code, I have an app that allows people to upload images and videos. I have images working and videos used to work but now for some reason I am getting this error which is the same as this one <a href=\"https://github.com/aws/aws-sdk-js/issues/15\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-js/issues/15</a> . I have checked and the video is crossing over since the file that is being returned has some size but for some reason I keep getting the error below when it comes to uploading videos ... The error occurs in the <strong>PutObject</strong> below any suggestions would be great</p>\n\n<pre><code>func UploadStreamVideo(w http.ResponseWriter, r *http.Request) {\n    r.ParseForm()\n\n    var buf bytes.Buffer\n    sess, _ := session.NewSession(&amp;aws.Config{\n        Region:      aws.String(\"us-west-2\"),\n        Credentials: credentials.NewStaticCredentials(aws_access_key_id, aws_secret_access_key, \"\"),\n    })\n\n    svc := s3.New(sess)\n\n    file, handler, err := r.FormFile(\"file\")\n    if err != nil {\n        log_errors(\"HomePage-UploadStreamImage: error receiving file\", err.Error(), w)\n        fmt.Println(\"Error Uploading Image\")\n        return\n    }\n    defer file.Close()\n    println(handler.Filename) // I can see filename\n    println(handler.Size)   // I also see the size here\n\n    read_file, err := ioutil.ReadAll(file)\n\n    if err != nil {\n        log_errors(\"HomePage-UploadStreamImage\")\n        return\n    }\n\n    file.Read(read_file)\n    fileBytes := bytes.NewReader(read_file)\n    fileSize, err := buf.ReadFrom(file)\n    if err != nil {\n        log_errors(\"HomePage-UploadStreamImage\")\n    }\n\n    fileType := http.DetectContentType(read_file)\n    path := handler.Filename\n\n    params := &amp;s3.PutObjectInput{\n        Bucket: aws.String(\"yisl\"),\n        Key:    aws.String(path),\n        Body:   fileBytes,\n\n        ContentLength: aws.Int64(fileSize),\n        ContentType:   aws.String(fileType),\n    }\n\n     // This code below gives the error\n    _, err = svc.PutObject(params)\n    if err != nil {\n        println(err.Error())\n        log_errors(\"HomePage-UploadStreamImage\")\n        return\n    }\n\n    io.WriteString(w, \"Done\")\n}\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>NotImplemented: A header you provided implies functionality that is\nnot implemented     status code: 501, request id: 310D0CE7643E1B4B, host\nid:\nGUB8UDi9KJTIPybXh3I1m5Vu8Ixyt4LQv5PbVnyOH2ngAdtOv0DsyALHp1mMI3SmRpK+xHV3uds=\n\n&gt; 2018/05/12 03:30:21 http: panic serving [::1]:64945: runtime error:\n&gt; invalid memory address or nil pointer dereference goroutine 10\n&gt; [running]: net/http.(*conn).serve.func1(0xc420229400)\n&gt;   /usr/local/go/src/net/http/server.go:1726 +0xd0 panic(0x1451b20,\n&gt; 0x1752c30)    /usr/local/go/src/runtime/panic.go:502 +0x229\n&gt; database/sql.(*Rows).close(0x0, 0x0, 0x0, 0x0, 0x0)\n&gt;   /usr/local/go/src/database/sql/sql.go:2907 +0x6b\n&gt; database/sql.(*Rows).Close(0x0, 0x14f5698, 0x4d)\n&gt;   /usr/local/go/src/database/sql/sql.go:2903 +0x33\n&gt; _/Users/ignaciohernandez/Documents/go/Yisly-Backend/Controllers.log_errors(0x14ef38b,\n&gt; 0x2e, 0xc42010aa80, 0xda, 0x15737c0, 0xc420244380)\n&gt;   /Users/ignaciohernandez/Documents/go/Yisly-Backend/Controllers/function_store.go:27\n&gt; +0x2d8\n&gt; _/Users/ignaciohernandez/Documents/go/Yisly-Backend/Controllers.UploadStreamVideo(0x15737c0,\n&gt; 0xc420244380, 0xc420211700)\n&gt;   /Users/ignaciohernandez/Documents/go/Yisly-Backend/Controllers/HomePage.go:377\n&gt; +0x7ad net/http.HandlerFunc.ServeHTTP(0x14fd130, 0x15737c0, 0xc420244380, 0xc420211700)   /usr/local/go/src/net/http/server.go:1947\n&gt; +0x44 github.com/gorilla/mux.(*Router).ServeHTTP(0xc420142380, 0x15737c0, 0xc420244380, 0xc420211700)\n&gt;   /Users/ignaciohernandez/Documents/go/src/github.com/gorilla/mux/mux.go:162\n&gt; +0xed net/http.(*ServeMux).ServeHTTP(0x1760f20, 0x15737c0, 0xc420244380, 0xc420211500)    /usr/local/go/src/net/http/server.go:2337\n&gt; +0x130 net/http.serverHandler.ServeHTTP(0xc4201c89c0, 0x15737c0, 0xc420244380, 0xc420211500)  /usr/local/go/src/net/http/server.go:2694\n&gt; +0xbc net/http.(*conn).serve(0xc420229400, 0x1573b40, 0xc42002c9c0)   /usr/local/go/src/net/http/server.go:1830 +0x651 created by\n&gt; net/http.(*Server).Serve  /usr/local/go/src/net/http/server.go:2795\n&gt; +0x27b\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9779235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6695a4dc55f1084d702d64d930b9d35e?s=128&d=identicon&r=PG&f=1", "display_name": "haoziAndy", "link": "https://stackoverflow.com/users/9779235/haoziandy"}, "edited": false, "score": 0, "creation_date": 1526272972, "post_id": 50304394, "comment_id": 87662034, "body": "thanks,reply. But I add goczmq to the example,It is not working on Windwos"}], "tags": [], "owner": {"reputation": 3311, "user_id": 1377101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/784e2ea3644631d338aca027d9085a9d?s=128&d=identicon&r=PG", "display_name": "igr", "link": "https://stackoverflow.com/users/1377101/igr"}, "is_accepted": false, "score": 1, "last_activity_date": 1526114640, "creation_date": 1526114640, "answer_id": 50304394, "question_id": 50303008, "link": "https://stackoverflow.com/questions/50303008/how-do-i-get-gocmq-interrupt-signal-on-golang/50304394#50304394", "title": "How do I get gocmq interrupt signal on golang?", "body": "<p>I did a quick example and seems to work as expected. <br>\nHaving code in <code>a.go</code> :</p>\n\n<pre><code>package main\n\nimport (\n\"os\"\n\"os/signal\"\n\"time\"\n\"fmt\"\n)\n\nfunc main() {\n\nfmt.Println( \"Started...\")\nsignal_channel := make(chan os.Signal)\nsignal.Notify(signal_channel)\ngo func() {\n    // do whatever...\n    time.Sleep(10 *time.Second)\n}()\nsig1 := &lt;-signal_channel\nfmt.Println( \"\\n\\nGot signal: \", sig1 )\n\nfmt.Println( \"Done.\")\n\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&gt; go run a.go &amp;\n[1] 26515\nStarted...\n\n&gt;kill -HUP %1\n\nGot signal:  hangup\nDone. \n\n&gt; go run a.go &amp;\n[1] 26768\n&gt; Started...\n\nkill -USR1 %1\n\nGot signal:  user defined signal 1\n</code></pre>\n\n<p>Also: </p>\n\n<pre><code>go run a.go  // + Press CTRL-Z\nStarted...\n^Z\n[1]+  Stopped                 go run a.go\n\nGot signal:  stopped\nDone.\n</code></pre>\n\n<p>and </p>\n\n<pre><code>&gt; go run a.go // + Press CTRL-C \nStarted...\n^C\n\nGot signal:  interrupt\nDone.\n</code></pre>\n\n<p>If in your case it is not visible maybe it is consumed in gorutine. \nLike in: </p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n    \"os/signal\"\n    \"time\"\n    \"fmt\"\n)\n\nfunc main() {\n\n    fmt.Println( \"Started...\")\n    signal_channel := make(chan os.Signal)\n    signal.Notify(signal_channel)\n    go func() {\n        // do whatever...\n        sig2 := &lt;-signal_channel\n        fmt.Println( \"gorutine sig2: \", sig2)\n        time.Sleep(10 *time.Second)\n    }()\n\n    time.Sleep(10 *time.Second)\n    sig1 := &lt;-signal_channel\n    fmt.Println( \"\\n\\nGot signal: \", sig1 )\n\n    fmt.Println( \"Done.\")\n\n}\n</code></pre>\n\n<p>which gets: </p>\n\n<blockquote>\n  <p>go run a.go \n      Started...</p>\n</blockquote>\n\n<pre><code>^Cgorutine sig2:  interrupt\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9779235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6695a4dc55f1084d702d64d930b9d35e?s=128&d=identicon&r=PG&f=1", "display_name": "haoziAndy", "link": "https://stackoverflow.com/users/9779235/haoziandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1526122806, "answer_count": 1, "score": 0, "last_activity_date": 1526273000, "creation_date": 1526101426, "last_edit_date": 1526273000, "question_id": 50303008, "link": "https://stackoverflow.com/questions/50303008/how-do-i-get-gocmq-interrupt-signal-on-golang", "closed_reason": "Needs details or clarity", "title": "How do I get gocmq interrupt signal on golang?", "body": "<p>**  I use goczmq, but I don't catch system interrupt when run server on Windwos. Why?**</p>\n\n<pre><code>signal_channel := make(chan os.Signal)\nsignal.Notify(signal_channel)\ngo goczmq....\n&lt;-signal_channel\n</code></pre>\n"}, {"tags": ["php", "html", "go", "include"], "comments": [{"owner": {"reputation": 1282, "user_id": 6243941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09457fc073eb5e2591230f1e4e721190?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/6243941/priya"}, "edited": false, "score": 1, "creation_date": 1526100162, "post_id": 50302838, "comment_id": 87622170, "body": "Please see this <a href=\"https://stackoverflow.com/questions/33984147/golang-embed-html-from-file\" title=\"golang embed html from file\">stackoverflow.com/questions/33984147/&hellip;</a>"}, {"owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "reply_to_user": {"reputation": 1282, "user_id": 6243941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09457fc073eb5e2591230f1e4e721190?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/6243941/priya"}, "edited": false, "score": 0, "creation_date": 1526100701, "post_id": 50302838, "comment_id": 87622243, "body": "@priya its just show me the html in the terminal but i want this header will display in the browser i edit my question and then you will see"}, {"owner": {"reputation": 1282, "user_id": 6243941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09457fc073eb5e2591230f1e4e721190?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/6243941/priya"}, "edited": false, "score": 0, "creation_date": 1526101022, "post_id": 50302838, "comment_id": 87622294, "body": "Please see this <a href=\"https://stackoverflow.com/questions/43816039/html-partials-in-golang\" title=\"html partials in golang\">stackoverflow.com/questions/43816039/html-partials-in-golang</a>"}, {"owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "reply_to_user": {"reputation": 1282, "user_id": 6243941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09457fc073eb5e2591230f1e4e721190?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/6243941/priya"}, "edited": false, "score": 0, "creation_date": 1526101561, "post_id": 50302838, "comment_id": 87622384, "body": "@Priya  sorry to say but i am not getting this example actually i am using <code>gin package</code> :("}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526103896, "post_id": 50302838, "comment_id": 87622858, "body": "<code>os.Stdout</code> is standard output not the browser."}, {"owner": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526104113, "post_id": 50302838, "comment_id": 87622901, "body": "If you&#39;re using <code>gin</code> you should pass <a href=\"https://godoc.org/github.com/gin-gonic/gin#Context.Writer\" rel=\"nofollow noreferrer\"><code>c.Writer</code></a> whenever you want to write a response back to the client (browser)."}, {"owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "reply_to_user": {"reputation": 1282, "user_id": 6243941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09457fc073eb5e2591230f1e4e721190?s=128&d=identicon&r=PG&f=1", "display_name": "Priya", "link": "https://stackoverflow.com/users/6243941/priya"}, "edited": false, "score": 0, "creation_date": 1526107260, "post_id": 50302838, "comment_id": 87623544, "body": "Thanks @priya for helping me"}, {"owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "reply_to_user": {"reputation": 18601, "user_id": 965900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KqAT.png?s=128&g=1", "display_name": "mkopriva", "link": "https://stackoverflow.com/users/965900/mkopriva"}, "edited": false, "score": 0, "creation_date": 1526107279, "post_id": 50302838, "comment_id": 87623547, "body": "thanks @mkopriva For helping me."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 9778077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XpHtw.jpg?s=128&g=1", "display_name": "Arzeb Mansuri", "link": "https://stackoverflow.com/users/9778077/arzeb-mansuri"}, "is_accepted": false, "score": -2, "last_activity_date": 1526112499, "creation_date": 1526112499, "answer_id": 50304152, "question_id": 50302838, "link": "https://stackoverflow.com/questions/50302838/how-to-include-separate-header-file-in-each-html-file-containing-by-a-folder/50304152#50304152", "title": "How to include separate header file in each html file containing by a folder?", "body": "<p>You Can Use Html 5 Attributes <strong>w3-include-html</strong></p>\n\n<p>content.html\n</p>\n\n<pre><code> &lt;ahref=\"howto_google_maps.asp\"&gt;Google Maps&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_css_animate_buttons.asp\"&gt;Animated Buttons&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_css_modals.asp\"&gt;Modal Boxes&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_js_animate.asp\"&gt;Animations&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_js_progressbar.asp\"&gt;Progress Bars&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_css_dropdown.asp\"&gt;Hover Dropdowns&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_js_dropdown.asp\"&gt;Click Dropdowns&lt;/a&gt;&lt;br&gt;\n&lt;ahref=\"howto_css_table_responsive.asp\"&gt;Responsive Tables&lt;/a&gt;&lt;br&gt;\n</code></pre>\n\n<p></p>\n\n<p><code>&lt;div\u00a0w3-include-html=\"h1.html\"&gt;&lt;/div&gt;\u00a0\n&lt;div\u00a0w3-include-html=\"content.html\"&gt;&lt;/div&gt;</code></p>\n\n<p>This is work like a php <strong>include</strong> </p>\n"}], "owner": {"reputation": 157, "user_id": 9703809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9e630139bd3e5f4dd10fe2ff60540b?s=128&d=identicon&r=PG&f=1", "display_name": "gourav", "link": "https://stackoverflow.com/users/9703809/gourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526112499, "creation_date": 1526099218, "last_edit_date": 1526101137, "question_id": 50302838, "link": "https://stackoverflow.com/questions/50302838/how-to-include-separate-header-file-in-each-html-file-containing-by-a-folder", "title": "How to include separate header file in each html file containing by a folder?", "body": "<p>I want to include a single html header file <code>header.html</code> in each rest of the files in the folder while using php localhost we use <code>&lt;?php include 'header.php'; ?&gt;</code> just change the extension and use it everywhere but now I'm using the * <strong><em>golang</em></strong> and I don't know how to include the <code>header.html</code> file in each of the html file. I will done this for once write individually because there two files but if there are 50 files of html then its very time taken to write the code individually. How to include a single file of html header in the rest of the html files in folder?  </p>\n\n<p>The code I'm using is </p>\n\n<p>html file</p>\n\n<pre><code>&lt;body&gt;\n &lt;header&gt;{{template \"bootstrap_header.html\"}}&lt;/header&gt;\n&lt;h3&gt;Login Here&lt;/h3&gt;\n &lt;input type=\"text\" id=\"email\" name=\"email\" value=\"\" placeholder=\"enter your email here\"&gt;\n &lt;input type=\"text\" id=\"password\" name=\"password\" value=\"\" placeholder=\"enter your password here\"&gt;\n &lt;button id=\"button_first\"&gt;Click it for Login&lt;/button&gt;\n &lt;script&gt;\n    $(document).ready(function(){\n        $('button').on('click', function(e){\n            var email = $('#email').val()\n            var password = $('#password').val()\n            $.ajax({\n                    url:\"/api/v2/login\",\n                    type:\"POST\",\n                    data: {'email':email, \"password\":password},\n                success: function(results) {\n                    console.log(results)\n                    if(results.response.message === \"Success\"){\n                        console.log(\"hello\")\n                        alert(results.response.message);\n                        function setCookie(cname, cvalue, exdays) {\n                            document.cookie = cname + \"=\" + cvalue + \";path=/\";\n                        }\n                    setCookie(\"X-Test-Header\", results.response.total_record)\n                    document.location.href = \"/api/v1/customer?Number=\"+results.response.data[0]._id;\n                    }\n                    if(results.response.message === \"Failure\"){\n                        console.log(\"hello\")\n                        alert(results.response.data);\n                    }\n                }   \n            });\n        });\n    });\n &lt;/script&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>This page will redirect me at the given url <code>document.location.href = \"/api/v1/customer?Number=\"+results.response.data[0]._id;</code></p>\n\n<p>Go code </p>\n\n<pre><code>t, err := template.ParseFiles(\"buttons.html\", \"bootstrap_header.html\")\nif err != nil { \n    panic(err)  \n}\n\nerr = t.ExecuteTemplate(os.Stdout, \"buttons.html\", nil)\nif err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p>Gives me output as in terminal </p>\n\n<pre><code>Both file code in the terminal\n</code></pre>\n\n<blockquote>\n  <p>Expected output is to display it in the browser</p>\n</blockquote>\n"}, {"tags": ["sql", "go", "postgresql-9.3"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526111988, "post_id": 50301510, "comment_id": 87624551, "body": "What do you mean &quot;it doesn&#39;t even compile&quot;? The error you&#39;ve mentioned is a runtime error. What is the compilation failure?"}], "answers": [{"tags": [], "owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "is_accepted": true, "score": 2, "last_activity_date": 1526083498, "creation_date": 1526083498, "answer_id": 50301687, "question_id": 50301510, "link": "https://stackoverflow.com/questions/50301510/go-database-connector-go-sql-driver-works-everything-else-unknown-driver-for/50301687#50301687", "title": "Go Database Connector: go-sql-driver works, everything else &quot;unknown driver, forgotten import?&quot;", "body": "<p>Are you doing </p>\n\n<pre><code>db, err := sql.Open(\"mysql\",\n</code></pre>\n\n<p>later on?  When you import <code>\"github.com/lib/pq\"</code> for example, it registers itself by calling <code>sql.Register</code>, and then in the source of <code>sql.Open</code> you have:</p>\n\n<pre><code>func Open(driverName, dataSourceName string) (*DB, error) {\n    driversMu.RLock()\n    driveri, ok := drivers[driverName]\n    driversMu.RUnlock()\n    if !ok {\n        return nil, fmt.Errorf(\"sql: unknown driver %q (forgotten import?)\", driverName)\n    }\n}\n</code></pre>\n\n<p>So, since you are no longer importing <code>mysql</code>, you need to change <code>sql.Open</code> to use the <code>pq</code> driver (or whichever one you end up picking).</p>\n"}], "owner": {"reputation": 119, "user_id": 5522271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27dcf1dd2939d1f2c60a2a1a2fbff977?s=128&d=identicon&r=PG", "display_name": "Lawrence V.", "link": "https://stackoverflow.com/users/5522271/lawrence-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 0, "accepted_answer_id": 50301687, "answer_count": 1, "score": -3, "last_activity_date": 1526083498, "creation_date": 1526081664, "question_id": 50301510, "link": "https://stackoverflow.com/questions/50301510/go-database-connector-go-sql-driver-works-everything-else-unknown-driver-for", "title": "Go Database Connector: go-sql-driver works, everything else &quot;unknown driver, forgotten import?&quot;", "body": "<p>When I try to use database/sql in this way it compiles and works:</p>\n\n<pre><code>import (\n    \"database/sql\"\n    _ \"github.com/go-sql-driver/mysql\"\n)\n</code></pre>\n\n<p>But if I try to use postgres specific connectors it doesn't even compile:</p>\n\n<pre><code>import(\n    \"database/sql\"\n    _ \"github.com/lib/pq\"\n)\n\nimport(\n    \"database/sql\"\n    _ \"github.com/jbarham/gopgsqldriver\"\n)\n</code></pre>\n\n<p>both fail with the error</p>\n\n<pre><code>sql: unknown driver \"mysql\" (forgotten import?)\n</code></pre>\n\n<p>I have done go get for both of these packages, and am really not sure why it is not compiling</p>\n"}, {"tags": ["go", "null"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526083265, "post_id": 50301438, "comment_id": 87619873, "body": "Are you asking why calling <code>Error()</code> on a nil <code>error</code> panics, or why the panic output is formatted in the log?"}, {"owner": {"reputation": 927, "user_id": 2419669, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kuQAn.jpg?s=128&g=1", "display_name": "yangmillstheory", "link": "https://stackoverflow.com/users/2419669/yangmillstheory"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526083392, "post_id": 50301438, "comment_id": 87619897, "body": "I guess I&#39;m wondering why a nil pointer exception is occurring in the first place."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1526084201, "post_id": 50301438, "comment_id": 87620021, "body": "It may be easier to understand if you <a href=\"https://play.golang.org/p/W7jHpWGweMs\" rel=\"nofollow noreferrer\">build the &quot;base&quot; type yourself instead of using <code>error</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 8, "last_activity_date": 1526083222, "last_edit_date": 1592644375, "creation_date": 1526083222, "answer_id": 50301662, "question_id": 50301438, "link": "https://stackoverflow.com/questions/50301438/nil-pointer-embedded-error/50301662#50301662", "title": "nil pointer embedded error", "body": "<p>The <a href=\"https://golang.org/ref/spec#Struct_types\" rel=\"noreferrer\">spec</a> says:</p>\n<blockquote>\n<p>Given a struct type S and a defined type T, promoted methods are included in the method set of the struct as follows:</p>\n<ul>\n<li>If S contains an embedded field T, the method sets of S and *S both include promoted methods with receiver T. The method set of *S also includes promoted methods with receiver *T.</li>\n</ul>\n</blockquote>\n<p>The <a href=\"http://godoc.org/fmt\" rel=\"noreferrer\">fmt</a> documentation says:</p>\n<blockquote>\n<p>If an operand implements the error interface, the Error method will be invoked to convert the object to a string, which will then be formatted as required by the verb (if any).</p>\n</blockquote>\n<p>From this, we can conclude that <code>log.Println(d)</code> will invoke the promoted Error method from the <code>error</code> field.</p>\n<p>If the <code>error</code> field is <code>nil</code>, then the call panics.</p>\n<p>The fmt documentation also says:</p>\n<blockquote>\n<p>If an Error or String method triggers a panic when called by a print routine, the fmt package reformats the error message from the panic, decorating it with an indication that it came through the fmt package.</p>\n</blockquote>\n<p>The text <code>%!v(PANIC=runtime error: invalid memory address or nil pointer dereference)</code> is the decorated panic value.</p>\n"}], "owner": {"reputation": 927, "user_id": 2419669, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kuQAn.jpg?s=128&g=1", "display_name": "yangmillstheory", "link": "https://stackoverflow.com/users/2419669/yangmillstheory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 50301662, "answer_count": 1, "score": 1, "last_activity_date": 1526112027, "creation_date": 1526080975, "last_edit_date": 1526112027, "question_id": 50301438, "link": "https://stackoverflow.com/questions/50301438/nil-pointer-embedded-error", "title": "nil pointer embedded error", "body": "<p>Why do I get a nil pointer error when I try to print a pointer with an uninitialized embedded error:</p>\n\n<pre><code>package main\n\nimport (\n  \"log\"\n  \"errors\"\n)\n\ntype Danger struct {\n  error\n}\n\nfunc main() {\n  // the nil pointer issue has to do with struct embedding an error value that is nil\n  d := &amp;Danger{}\n  log.Println(d)\n\n  d = &amp;Danger{errors.New(\"foobar\")}\n  log.Println(d)\n}\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>2009/11/10 23:00:00 %!v(PANIC=runtime error: invalid memory address or nil pointer dereference)\n2009/11/10 23:00:00 foobar\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/fBuN0XonX9v\" rel=\"nofollow noreferrer\">https://play.golang.org/p/fBuN0XonX9v</a></p>\n\n<p>This came up in an interview today and neither interviewer nor interviewee could figure it out.</p>\n"}, {"tags": ["ssl", "go", "ssl-certificate"], "answers": [{"comments": [{"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526133961, "post_id": 50304181, "comment_id": 87630067, "body": "In addition, on the client-side of things Go will load the system CAs by default and verify the server against them; no special code required."}, {"owner": {"reputation": 15, "user_id": 9518704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7e372bb06cfffdd2ac027e0128e2ff?s=128&d=identicon&r=PG&f=1", "display_name": "user9518704", "link": "https://stackoverflow.com/users/9518704/user9518704"}, "edited": false, "score": 0, "creation_date": 1526165618, "post_id": 50304181, "comment_id": 87638867, "body": "tls.Config{} with no initialization worked perfectly for what I needed."}], "tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": true, "score": 0, "last_activity_date": 1526112822, "creation_date": 1526112822, "answer_id": 50304181, "question_id": 50301127, "link": "https://stackoverflow.com/questions/50301127/pythons-create-default-context-equivalent-in-go/50304181#50304181", "title": "Python&#39;s create_default_context() equivalent in Go?", "body": "<p>I think you're looking for <a href=\"https://golang.org/pkg/crypto/tls/#Config\" rel=\"nofollow noreferrer\"><code>tls.Config</code></a>. But keep in mind that Python's <code>ssl.create_default_context</code> exposes a lot of SSL internals that most people don't need, and you might not need a <code>tls.Config</code> in your application at all. For instance, <code>net/http</code> has a <a href=\"https://golang.org/pkg/net/http/#ListenAndServeTLS\" rel=\"nofollow noreferrer\"><code>http.ListenAndServeTLS()</code></a> function which starts a TLS web server with sensible defaults and whatever certificates you provide.</p>\n"}], "owner": {"reputation": 15, "user_id": 9518704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef7e372bb06cfffdd2ac027e0128e2ff?s=128&d=identicon&r=PG&f=1", "display_name": "user9518704", "link": "https://stackoverflow.com/users/9518704/user9518704"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 50304181, "answer_count": 1, "score": 0, "last_activity_date": 1526112822, "creation_date": 1526078310, "question_id": 50301127, "link": "https://stackoverflow.com/questions/50301127/pythons-create-default-context-equivalent-in-go", "title": "Python&#39;s create_default_context() equivalent in Go?", "body": "<p>I'm trying to modify my Go client and server code to use TLS. In Python I can do <code>ssl.create_default_context(purpose=ssl.Purpose.SERVER_AUTH)</code>\nwhich will automatically load the system's trusted CA certs and uses secure settings. I'm wondering if there's something similar in Go where it will automatically load trusted CA certificates. I'm not sure exactly what to put for the client's certificates.</p>\n"}, {"tags": ["go", "apache-kafka"], "answers": [{"comments": [{"owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526092676, "post_id": 50302339, "comment_id": 87621173, "body": "ok...I was under the assumption that if I used a buffered channel of lets say size <code>2,000</code>, I could put 2,000 messages in it and then read them into another go routine? The reason for this is that it looks like the confluent kafka consumer will poll but has a max off one message? <a href=\"https://github.com/confluentinc/confluent-kafka-go/blob/f5a17f16c36bc1505cd0c1a7f9c96c42387d75e7/kafka/consumer.go#L257...so\" rel=\"nofollow noreferrer\">github.com/confluentinc/confluent-kafka-go/blob/&hellip;</a> what I wanted to do was keep polling until I get 2,000 messages, then batch write those to redis"}, {"owner": {"reputation": 1306, "user_id": 5705686, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYuOhkTQVgQ/AAAAAAAAAAI/AAAAAAAAA1A/v5x1CDU6W4s/photo.jpg?sz=128", "display_name": "dolan", "link": "https://stackoverflow.com/users/5705686/dolan"}, "reply_to_user": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526092916, "post_id": 50302339, "comment_id": 87621204, "body": "It is possible to do what you said, but if you are only looping with a single routine from kafka, why not put those events in a slice instead of a channel? Slices are better for single threaded operations."}, {"owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526093968, "post_id": 50302339, "comment_id": 87621362, "body": "i&#39;m ok with that...so if I create a slice with the messages, can I pass that slice into a go routine and continue to consume more message then? I feel like thats maybe a no since the go routine will be working with the slice but them I&#39;m trying to add more to it?? Go rookie here so still learning..."}, {"owner": {"reputation": 1306, "user_id": 5705686, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYuOhkTQVgQ/AAAAAAAAAAI/AAAAAAAAA1A/v5x1CDU6W4s/photo.jpg?sz=128", "display_name": "dolan", "link": "https://stackoverflow.com/users/5705686/dolan"}, "reply_to_user": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526094262, "post_id": 50302339, "comment_id": 87621411, "body": "You have a few options. You could either pass it to a func, wait until it has been pushed to redis and then reuse it. If you want to have parallelism, it is probably easiest to just create a new slice to fill after you pass the first to be emptied into redis."}, {"owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526094446, "post_id": 50302339, "comment_id": 87621439, "body": "hmmm....so if I create a struct of how the slice looks like...how can I create more of them without defining them initially? Not sure if I asked that correctly..."}, {"owner": {"reputation": 1306, "user_id": 5705686, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYuOhkTQVgQ/AAAAAAAAAAI/AAAAAAAAA1A/v5x1CDU6W4s/photo.jpg?sz=128", "display_name": "dolan", "link": "https://stackoverflow.com/users/5705686/dolan"}, "reply_to_user": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "edited": false, "score": 0, "creation_date": 1526094537, "post_id": 50302339, "comment_id": 87621451, "body": "Check out make. It allows your to create a new slice of a length. They end up heap allocated so you can pass them and then create a new once next time through the loop."}], "tags": [], "owner": {"reputation": 1306, "user_id": 5705686, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jYuOhkTQVgQ/AAAAAAAAAAI/AAAAAAAAA1A/v5x1CDU6W4s/photo.jpg?sz=128", "display_name": "dolan", "link": "https://stackoverflow.com/users/5705686/dolan"}, "is_accepted": false, "score": 0, "last_activity_date": 1526092019, "creation_date": 1526092019, "answer_id": 50302339, "question_id": 50301067, "link": "https://stackoverflow.com/questions/50301067/go-channels-with-kafka-consumer/50302339#50302339", "title": "go channels with kafka consumer", "body": "<p>I think the bigger way to simplify this code is to separate the pipeline into multiple goroutines.</p>\n\n<p>The advantage of channels is the multiple people can be writing and reading on them at the same time. In this example, this might mean having a single go routine enqueueing onto the channel and another pulling off of the channel and putting things into redis.</p>\n\n<p>Something like this:</p>\n\n<pre><code>c := make(chan Message, bufferLen)\ngo pollKafka(c)\ngo pushToRedis(c)\n</code></pre>\n\n<p>If you want to add batching, you could add a middle stage that polls from the kafka channel, and appends to a slice until the slice is full and then enqueues that slice onto the channel for redis.</p>\n\n<p>If concurrency like this isn't a goal, it might be just be easier to replace the channel in your code with a slice. If there is only ever 1 goroutine acting on an object, it's not a good idea to try and use a channel.</p>\n"}], "owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1236, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526092019, "creation_date": 1526077912, "last_edit_date": 1526084353, "question_id": 50301067, "link": "https://stackoverflow.com/questions/50301067/go-channels-with-kafka-consumer", "title": "go channels with kafka consumer", "body": "<p>I'm new to go and starting to learn about channels. I'm using the confluent kafka consumer to create a functional consumer. What I want to accomplish is to send the messages into a buffered channel (2,000)...and then write the messages in the channel to redis using pipeline. I've gotten to consumer part to work by just doing a <code>println</code> of the message one by one until it reaches the end of the offsets, but when I try to add a channel, it seems to hit the <code>default:</code> case in the <code>switch</code> and then just freeze.</p>\n\n<p>it also doesn't look like I'm filling the channel correctly? This <code>fmt.Println(\"count is: \", len(redisChnl))</code> always prints <code>0</code></p>\n\n<p>here is what I have so far:</p>\n\n<pre><code>// Example function-based high-level Apache Kafka consumer\npackage main\n\nimport (\n    \"fmt\"\n    \"github.com/confluentinc/confluent-kafka-go/kafka\"\n    \"os\"\n    \"os/signal\"\n    \"syscall\"\n    \"time\"\n    \"encoding/json\"\n    \"regexp\"\n    \"github.com/go-redis/redis\"\n    \"encoding/binary\"\n)\n\nvar client *redis.Client\n\nfunc init() {\n    client = redis.NewClient(&amp;redis.Options{\n        Addr:         \":6379\",\n        DialTimeout:  10 * time.Second,\n        ReadTimeout:  30 * time.Second,\n        WriteTimeout: 30 * time.Second,\n        PoolSize:     10,\n        PoolTimeout:  30 * time.Second,\n    })\n    client.FlushDB()\n}\n\ntype MessageFormat struct {\n    MetricValueNumber float64     `json:\"metric_value_number\"`\n    Path              string      `json:\"path\"`\n    Cluster           string      `json:\"cluster\"`\n    Timestamp         time.Time   `json:\"@timestamp\"`\n    Version           string      `json:\"@version\"`\n    Host              string      `json:\"host\"`\n    MetricPath        string      `json:\"metric_path\"`\n    Type              string      `json:\"string\"`\n    Region            string      `json:\"region\"`\n}\n\n//func redis_pipeline(ky string, vl string) {\n//  pipe := client.Pipeline()\n//\n//  exec := pipe.Set(ky, vl, time.Hour)\n//\n//  incr := pipe.Incr(\"pipeline_counter\")\n//  pipe.Expire(\"pipeline_counter\", time.Hour)\n//\n//  // Execute\n//  //\n//  //     INCR pipeline_counter\n//  //     EXPIRE pipeline_counts 3600\n//  //\n//  // using one client-server roundtrip.\n//  _, err := pipe.Exec()\n//  fmt.Println(incr.Val(), err)\n//  // Output: 1 &lt;nil&gt;\n//}\n\nfunc main() {\n\n\n    sigchan := make(chan os.Signal, 1)\n    signal.Notify(sigchan, syscall.SIGINT, syscall.SIGTERM)\n\n    c, err := kafka.NewConsumer(&amp;kafka.ConfigMap{\n        \"bootstrap.servers\":               \"kafka.com:9093\",\n        \"group.id\":                        \"testehb\",\n        \"security.protocol\":               \"ssl\",\n        \"ssl.key.location\":                \"/Users/key.key\",\n        \"ssl.certificate.location\":        \"/Users/cert.cert\",\n        \"ssl.ca.location\":                 \"/Users/ca.pem\",\n    })\n\n    if err != nil {\n        fmt.Fprintf(os.Stderr, \"Failed to create consumer: %s\\n\", err)\n        os.Exit(1)\n    }\n\n    fmt.Printf(\"Created Consumer %v\\n\", c)\n\n    err = c.SubscribeTopics([]string{\"jmx\"}, nil)\n\n    redisMap := make(map[string]string)\n\n    redisChnl := make(chan []byte, 2000)\n\n    run := true\n\n    for run == true {\n        select {\n        case sig := &lt;-sigchan:\n            fmt.Printf(\"Caught signal %v: terminating\\n\", sig)\n            run = false\n        default:\n            ev := c.Poll(100)\n            if ev == nil {\n                continue\n            }\n\n            switch e := ev.(type) {\n            case *kafka.Message:\n\n                //fmt.Printf(\"%% Message on %s:\\n%s\\n\",\n                //  e.TopicPartition, string(e.Value))\n                if e.Headers != nil {\n                    fmt.Printf(\"%% Headers: %v\\n\", e.Headers)\n                }\n\n                str := e.Value\n                res := MessageFormat{}\n                json.Unmarshal([]byte(str), &amp;res)\n\n\n                fmt.Println(\"size\", binary.Size([]byte(str)))\n\n                host:= regexp.MustCompile(`^([^.]+)`).FindString(res.MetricPath)\n\n                redisMap[host] = string(str)\n                fmt.Println(\"count is: \", len(redisChnl)) //this always prints \"count is:  0\"\n\n                redisChnl &lt;- e.Value //I think this is the write way to put the messages in the channel?\n\n            case kafka.PartitionEOF:\n                fmt.Printf(\"%% Reached %v\\n\", e)\n            case kafka.Error:\n                fmt.Fprintf(os.Stderr, \"%% Error: %v\\n\", e)\n                run = false\n            default:\n                fmt.Printf(\"Ignored %v\\n\", e)\n            }\n\n            &lt;- redisChnl // I thought I could just empty the channel like this once the buffer is full?\n\n\n        }\n    }\n\n    fmt.Printf(\"Closing consumer\\n\")\n    c.Close()\n}\n</code></pre>\n\n<p>-------EDIT-------</p>\n\n<p>Ok, I think I got it to work by moving the <code>&lt;- redisChnl</code> inside <code>default</code>, but now I see that the <code>count before read</code> and <code>count after read</code> inside the <code>default</code> always prints <code>2,000</code>...I would have thought that the first <code>count before read = 2,000</code> and then <code>count after read = 0</code> since the channel would be empty then??</p>\n\n<pre><code>    select {\n    case sig := &lt;-sigchan:\n        fmt.Printf(\"Caught signal %v: terminating\\n\", sig)\n        run = false\n    default:\n        ev := c.Poll(100)\n        if ev == nil {\n            continue\n        }\n\n        switch e := ev.(type) {\n        case *kafka.Message:\n\n            //fmt.Printf(\"%% Message on %s:\\n%s\\n\",\n            //  e.TopicPartition, string(e.Value))\n            if e.Headers != nil {\n                fmt.Printf(\"%% Headers: %v\\n\", e.Headers)\n            }\n\n            str := e.Value\n            res := MessageFormat{}\n            json.Unmarshal([]byte(str), &amp;res)\n\n\n            //fmt.Println(\"size\", binary.Size([]byte(str)))\n\n            host:= regexp.MustCompile(`^([^.]+)`).FindString(res.MetricPath)\n\n            redisMap[host] = string(str)\n\n            go func() {\n                redisChnl &lt;- e.Value\n            }()\n\n\n        case kafka.PartitionEOF:\n            fmt.Printf(\"%% Reached %v\\n\", e)\n        case kafka.Error:\n            fmt.Fprintf(os.Stderr, \"%% Error: %v\\n\", e)\n            run = false\n        default:\n            fmt.Println(\"count before read: \", len(redisChnl))\n\n            fmt.Printf(\"Ignored %v\\n\", e)\n\n            &lt;-redisChnl\n\n            fmt.Println(\"count after read: \", len(redisChnl)) //would've expected this to be 0\n\n        }\n\n\n    }\n</code></pre>\n"}, {"tags": ["go", "dns"], "comments": [{"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526070060, "post_id": 50299353, "comment_id": 87616177, "body": "Isn&#39;t this just <a href=\"https://golang.org/pkg/os/#Hostname\" rel=\"nofollow noreferrer\">os.Hostname</a>?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "edited": false, "score": 0, "creation_date": 1526070623, "post_id": 50299353, "comment_id": 87616406, "body": "@Peter: it&#39;s a reverse dns lookup, but this looks like it should just be filed in the go issue tracker."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1526074827, "post_id": 50299353, "comment_id": 87617994, "body": "You typically can&#39;t resolve reserved range IPs like 10.x.x.x. They don&#39;t normally have DNS associated with them. There are exceptions like on Amazon&#39;s EC2 platform where, <i>if</i> you use their local DNS servers, you can resolve <code>10.in-addr.arpa</code>."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1526075964, "post_id": 50299353, "comment_id": 87618342, "body": "@tadman: most any organization of significant size will have internal DNS setup using private IP ranges. Many may not use PTR records, but it&#39;s not uncommon at all."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526076016, "post_id": 50299353, "comment_id": 87618364, "body": "@JimB In order for reverse DNS to work you&#39;ll need to have PTR records and a private DNS server. I&#39;m not sure what you mean by &quot;not use PTR records&quot; because that&#39;s how the <code>in-addr</code> space works."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1526076272, "post_id": 50299353, "comment_id": 87618429, "body": "@tadman: I mean many organization may <i>choose</i> to not add PTR records, but it&#39;s not uncommon to have a reverse lookup zone on a private DNS server."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1526077884, "post_id": 50299353, "comment_id": 87618804, "body": "Have you tried stepping through this code (or forking it into your own code and adding logging, or whatever) to see where it&#39;s going wrong? For example, does <code>DnsQuery</code> not return anything because it&#39;s being called wrong, or does it return records but they all get filtered out because <code>validRecs</code> is doing something wrong? (Maybe something stupid, like the AD server returning the CNAME in all caps but the PTR records in lowercase; who knows\u2026)"}, {"owner": {"reputation": 43, "user_id": 5826368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7mlpK.jpg?s=128&g=1", "display_name": "CapitanShinChan", "link": "https://stackoverflow.com/users/5826368/capitanshinchan"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1526307691, "post_id": 50299353, "comment_id": 87681305, "body": "@abarnert no, I haven&#39;t do that, but I&#39;ll check it soon."}], "owner": {"reputation": 43, "user_id": 5826368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7mlpK.jpg?s=128&g=1", "display_name": "CapitanShinChan", "link": "https://stackoverflow.com/users/5826368/capitanshinchan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542837181, "creation_date": 1526068429, "last_edit_date": 1542837181, "question_id": 50299353, "link": "https://stackoverflow.com/questions/50299353/resolving-ip-address-to-fqdn", "title": "Resolving IP address to FQDN", "body": "<p>I have a computer in a Windows domain and I'm trying to get the current domain name and host's FQDN from a Golang program.</p>\n\n<p>The best approach that I've found is to get the IP address of all the interfaces, and try to resolve each one of them to get the FQDN. The problem is that I don't get any results after calling the function <strong>net.LookupAddr()</strong>, but I got the FQDN if I use the Windows command <strong>nslookup</strong> or the Powershell cmdlet <strong>Resolve-DnsName</strong>.</p>\n\n<p>The following code just returns an empty array:</p>\n\n<pre><code>ipAddr := \"10.0.100.39\"\ndnsName, _ := net.LookupAddr(ipAddr)\n</code></pre>\n\n<p>When if I run the nslookup or Resolve-DnsName from a powershell window, it will return the FQDN.</p>\n\n<p>According to the Golang code, it should be using DNSQuery_W in Windows:\n<a href=\"https://golang.org/src/net/lookup_windows.go#L291\" rel=\"nofollow noreferrer\">https://golang.org/src/net/lookup_windows.go#L291</a></p>\n\n<p><a href=\"https://golang.org/src/syscall/syscall_windows.go#L593\" rel=\"nofollow noreferrer\">DNSQuery syscall on Go</a></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682016(v=vs.85).aspx\" rel=\"nofollow noreferrer\">MSDN documentation</a></p>\n\n<p>If you know a better way to get name of the domain for the current machine in Golang, I would be happy to consider it, but still want to know what's happening here.</p>\n"}, {"tags": ["html", "json", "go", "flash-message", "buffalo"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1526062528, "post_id": 50298019, "comment_id": 87612917, "body": "Please include the code to reproduce this issue in your question."}, {"owner": {"reputation": 107, "user_id": 9246264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b39c6c7332aafae59078fd7e448b53a?s=128&d=identicon&r=PG&f=1", "display_name": "Shilpa Kancharla", "link": "https://stackoverflow.com/users/9246264/shilpa-kancharla"}, "reply_to_user": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1526062597, "post_id": 50298019, "comment_id": 87612940, "body": "Sure, let me edit to add the application.html and _flash.html file codes."}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 4901191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--zVehh4nWiU/AAAAAAAAAAI/AAAAAAAAAGU/8tzmW126jBM/photo.jpg?sz=128", "display_name": "Stanislas Michalak", "link": "https://stackoverflow.com/users/4901191/stanislas-michalak"}, "is_accepted": false, "score": 0, "last_activity_date": 1526114245, "creation_date": 1526114245, "answer_id": 50304347, "question_id": 50298019, "link": "https://stackoverflow.com/questions/50298019/buffalo-v0-11-0-issues-with-flash-and-application-html/50304347#50304347", "title": "Buffalo v0.11.0 issues with flash and application.html?", "body": "<p>There was a <a href=\"https://github.com/gobuffalo/buffalo/pull/1049\" rel=\"nofollow noreferrer\">breaking change</a> in the Plush templating engine v4.5.7 (the one used by Buffalo by default). Buffalo <a href=\"https://github.com/gobuffalo/buffalo/releases/tag/v0.11.1\" rel=\"nofollow noreferrer\">v0.11.1</a> was released to address this issue, so if you upgrade <code>buffalo</code> to v0.11.1, it should work fine.</p>\n"}], "owner": {"reputation": 107, "user_id": 9246264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b39c6c7332aafae59078fd7e448b53a?s=128&d=identicon&r=PG&f=1", "display_name": "Shilpa Kancharla", "link": "https://stackoverflow.com/users/9246264/shilpa-kancharla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526114245, "creation_date": 1526062367, "last_edit_date": 1526097380, "question_id": 50298019, "link": "https://stackoverflow.com/questions/50298019/buffalo-v0-11-0-issues-with-flash-and-application-html", "title": "Buffalo v0.11.0 issues with flash and application.html?", "body": "<p>I am a beginner at using Golang and Buffalo. I am trying to create a password authentication service using the authrecipe from <a href=\"https://github.com/gobuffalo/authrecipe\" rel=\"nofollow noreferrer\">https://github.com/gobuffalo/authrecipe</a>. However, upon trying to run this using <code>buffalo dev</code>, I am receiving the following error from the JSON dump: </p>\n\n<pre><code>ERRO[2018-05-10T14:20:48-04:00] application.html: line 14: _flash.html: \n</code></pre>\n\n<p><code>line 3: flash: unknown identifier content_type=text/html db=\"0s\" duration=\"5.354757ms\" human_size=\"0 B\" method=GET params=\"{}\" path=/ render=\"659.229\u00b5s\" request_id=\"fa1ad5b329-b4e23f788b\" size=\"0\" status=\"0\"</code></p>\n\n<p>In line 14 application.html file, there is a reference to the flash folder, and in line 3 of my _flash.html file, there is a variable called flash. Has anyone else received this error? How did you fix it? I have tried to delete the flash command, but that did not resolve the problem and the same error kept appearing.</p>\n\n<p>application.html code: </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;Buffalo - Coke&lt;/title&gt;\n    &lt;%= stylesheetTag(\"application.css\") %&gt;\n    &lt;meta name=\"csrf-param\" content=\"authenticity_token\" /&gt;\n    &lt;meta name=\"csrf-token\" content=\"&lt;%= authenticity_token %&gt;\" /&gt;\n    &lt;link rel=\"icon\" href=\"&lt;%= assetPath(\"images/favicon.ico\") %&gt;\"&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n\n    &lt;div class=\"container\"&gt;\n      &lt;%= yield %&gt;\n    &lt;/div&gt;\n\n    &lt;%= javascriptTag(\"application.js\") %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>_flash.html code: </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;%= for (k, messages) in flash { %&gt;\n      &lt;%= for (msg) in messages { %&gt;\n        &lt;div class=\"alert alert-&lt;%= k %&gt;\" role=\"alert\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n            &lt;%= msg %&gt;\n        &lt;/div&gt;\n      &lt;% } %&gt;\n    &lt;% } %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["go", "struct"], "comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 1, "creation_date": 1526059603, "post_id": 50297289, "comment_id": 87611644, "body": "You&#39;ve found a structure that works, what is your question?"}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "edited": false, "score": 0, "creation_date": 1526060240, "post_id": 50297289, "comment_id": 87611910, "body": "if you see the error is due to <code>OrderBookItem</code> is a struct not an array of items that&#39;s why the error"}], "answers": [{"comments": [{"owner": {"reputation": 2884, "user_id": 1430476, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf9e49064895c6b498e936d2a2b80bf3?s=128&d=identicon&r=PG", "display_name": "Tino", "link": "https://stackoverflow.com/users/1430476/tino"}, "edited": false, "score": 0, "creation_date": 1526060131, "post_id": 50297389, "comment_id": 87611874, "body": "thanks that works. Is it possible to define the types to floats which is what they are? If I <code>fmt.Println(reflect.TypeOf(o.Asks[1][0]))</code>I get <code>string</code>"}, {"owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "reply_to_user": {"reputation": 2884, "user_id": 1430476, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf9e49064895c6b498e936d2a2b80bf3?s=128&d=identicon&r=PG", "display_name": "Tino", "link": "https://stackoverflow.com/users/1430476/tino"}, "edited": false, "score": 0, "creation_date": 1526064271, "post_id": 50297389, "comment_id": 87613705, "body": "@Tino, yes, using the string option: Bids []float64 <code>json:&quot;bids,string&quot;</code>. See <a href=\"https://golang.org/pkg/encoding/json/#Marshal\" rel=\"nofollow noreferrer\">json.Marshal</a> for other options."}], "tags": [], "owner": {"reputation": 75, "user_id": 1638680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3daa6d9e1fd176087a06f2bac4475895?s=128&d=identicon&r=PG", "display_name": "dgm", "link": "https://stackoverflow.com/users/1638680/dgm"}, "is_accepted": false, "score": 2, "last_activity_date": 1526059754, "creation_date": 1526059754, "answer_id": 50297389, "question_id": 50297289, "link": "https://stackoverflow.com/questions/50297289/unmarshaling-json-into-a-type/50297389#50297389", "title": "Unmarshaling json into a type", "body": "<p>You are treating your bids as a structure of two separate strings, when they are really a slice of strings in the JSON. If you change OrderBookItem to be</p>\n\n<pre><code>type OrderBookItem []string\n</code></pre>\n\n<p>which is how you have defined them in the second bit, which works. </p>\n\n<p>To access the values you just have to do:\nprice := d.Bids[0]\namount := d.Bids[1]</p>\n"}, {"comments": [{"owner": {"reputation": 19424, "user_id": 750852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezMNd.png?s=128&g=1", "display_name": "mpm", "link": "https://stackoverflow.com/users/750852/mpm"}, "edited": false, "score": 1, "creation_date": 1526062067, "post_id": 50297619, "comment_id": 87612708, "body": "You don&#39;t need all that unnecessary interface conversions, just pass a [2]string array to json.Unmarshall <a href=\"https://play.golang.org/p/kRYXtDZiIB7\" rel=\"nofollow noreferrer\">play.golang.org/p/kRYXtDZiIB7</a>"}, {"owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "reply_to_user": {"reputation": 19424, "user_id": 750852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ezMNd.png?s=128&g=1", "display_name": "mpm", "link": "https://stackoverflow.com/users/750852/mpm"}, "edited": false, "score": 0, "creation_date": 1526062210, "post_id": 50297619, "comment_id": 87612782, "body": "@mpm yes we can do that that&#39;s why I have mentioned in my answer that it is a slice of string in json. So I have converted into same object types. If OP wants to insert in same struct without changing the struct. But thanks for notifying."}, {"owner": {"reputation": 2476, "user_id": 5788720, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tkE-8jM--HE/AAAAAAAAAAI/AAAAAAAAAEw/g51C7_m9JWU/photo.jpg?sz=128", "display_name": "Iain Duncan", "link": "https://stackoverflow.com/users/5788720/iain-duncan"}, "edited": false, "score": 0, "creation_date": 1526074181, "post_id": 50297619, "comment_id": 87617799, "body": "I think mpm was saying that you can still achieve putting the data in a struct but don&#39;t need to do type conversion on the way"}], "tags": [], "owner": {"reputation": 8884, "user_id": 5821354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qc8o0.jpg?s=128&g=1", "display_name": "Himanshu", "link": "https://stackoverflow.com/users/5821354/himanshu"}, "is_accepted": true, "score": 3, "last_activity_date": 1526104220, "last_edit_date": 1526104220, "creation_date": 1526060743, "answer_id": 50297619, "question_id": 50297289, "link": "https://stackoverflow.com/questions/50297289/unmarshaling-json-into-a-type/50297619#50297619", "title": "Unmarshaling json into a type", "body": "<p>As the error says:</p>\n\n<blockquote>\n  <p>json: cannot unmarshal string into Go struct field\n  OrderBookResult.bids of type feed.OrderBookItem</p>\n</blockquote>\n\n<p>We cannot convert OrderBookResult.bids which is a slice of string into OrderBookItem which is struct</p>\n\n<p>Implement <code>UnmarshalJSON</code> interface to convert array into objects for <code>price</code> and <code>amount</code> of <code>OrderBookItem</code> struct. Like below</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"encoding/json\"\n)\n\ntype OrderBookItem struct {\n    Price  string\n    Amount string\n}\n\nfunc(item *OrderBookItem) UnmarshalJSON(data []byte)error{\n    var v []string\n    if err:= json.Unmarshal(data, &amp;v);err!=nil{\n        fmt.Println(err)\n        return err\n    }\n    item.Price  = v[0]\n    item.Amount = v[1]\n    return nil\n}\n\ntype OrderBookResult struct {\n    Timestamp string            `json:\"timestamp\"`\n    Bids      []OrderBookItem   `json:\"bids\"`\n    Asks      []OrderBookItem   `json:\"asks\"`\n}\n\nfunc main() {\n    var result OrderBookResult\n    jsonString := []byte(`{\"timestamp\": \"1526058949\", \"bids\": [[\"7215.90\", \"2.31930000\"], [\"7215.77\", \"1.00000000\"]]}`)\n    if err := json.Unmarshal([]byte(jsonString), &amp;result); err != nil{\n        fmt.Println(err)\n    }\n    fmt.Printf(\"%+v\", result)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/LIo43rAZSXy\" rel=\"nofollow noreferrer\">Playground working example</a></p>\n\n<p>For more information read GoLang spec for <a href=\"https://golang.org/pkg/encoding/json/#Unmarshaler\" rel=\"nofollow noreferrer\">Unmarshaler</a></p>\n"}], "owner": {"reputation": 2884, "user_id": 1430476, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cf9e49064895c6b498e936d2a2b80bf3?s=128&d=identicon&r=PG", "display_name": "Tino", "link": "https://stackoverflow.com/users/1430476/tino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2886, "favorite_count": 0, "accepted_answer_id": 50297619, "answer_count": 2, "score": 0, "last_activity_date": 1531308216, "creation_date": 1526059366, "last_edit_date": 1531308216, "question_id": 50297289, "link": "https://stackoverflow.com/questions/50297289/unmarshaling-json-into-a-type", "title": "Unmarshaling json into a type", "body": "<p>I get the following data:</p>\n\n<pre><code>{\n  \"timestamp\": \"1526058949\",\n  \"bids\": [\n    [\n      \"7215.90\",\n      \"2.31930000\"\n    ],\n    [\n      \"7215.77\",\n      \"1.00000000\"\n    ]\n  ]\n}\n</code></pre>\n\n<p>via websocket and I would like to unmarshall it into</p>\n\n<pre><code>type OrderBookItem struct {\n    Price  string\n    Amount string\n}\n\ntype OrderBookResult struct {\n    Timestamp string            `json:\"timestamp\"`\n    Bids      []OrderBookItem `json:\"bids\"`\n    Asks      []OrderBookItem `json:\"asks\"`\n}\n</code></pre>\n\n<p>Unmarshal it with: </p>\n\n<pre><code>s := e.Data.(string)\nd := &amp;OrderBookResult{}\nerr := json.Unmarshal([]byte(s), d)\nif err == nil {\n ....\n} else {\n fmt.Println(err.Error())\n}\n</code></pre>\n\n<p>But I keep getting the error:</p>\n\n<blockquote>\n  <p>json: cannot unmarshal string into Go struct field\n  OrderBookResult.bids of type feed.OrderBookItem</p>\n</blockquote>\n\n<p>When I change the struct into</p>\n\n<pre><code>type OrderBookResult struct {\n        Timestamp string     `json:\"timestamp\"`\n        Bids      [][]string `json:\"bids\"`\n        Asks      [][]string `json:\"asks\"`\n} \n</code></pre>\n\n<p>it works. I would like them to be defined as <code>float64</code> which is what they are. What do I have to change?</p>\n"}, {"tags": ["go", "makefile", "hyperledger-fabric"], "comments": [{"owner": {"reputation": 60130, "user_id": 13860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6bdc06836b7bcec9fce2c5c6e5242192?s=128&d=identicon&r=PG", "display_name": "Flimzy", "link": "https://stackoverflow.com/users/13860/flimzy"}, "edited": false, "score": 1, "creation_date": 1526057492, "post_id": 50296775, "comment_id": 87610664, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44723936/error-when-i-running-the-application-hyperledger-fabric\">Error when i running the application hyperledger fabric</a>"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526057544, "post_id": 50296775, "comment_id": 87610691, "body": "There&#39;s no reason to set GOROOT, and you probably should avoid it."}, {"owner": {"reputation": 3, "user_id": 7742662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150ca8df4078128dc223002e622174f3?s=128&d=identicon&r=PG&f=1", "display_name": "VenomSnake14", "link": "https://stackoverflow.com/users/7742662/venomsnake14"}, "edited": false, "score": 0, "creation_date": 1526058524, "post_id": 50296775, "comment_id": 87611131, "body": "Ive changed to location of fabric and changed GOPATH to point to it and got rid of GOROOT. I&#39;ve never used go before I&#39;m not sure where GOPATH should be pointing in this context"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1526062392, "post_id": 50296775, "comment_id": 87612854, "body": "@VenomSnake14: is you&#39;ve never used go before, then read <a href=\"https://golang.org/doc/code.html\" rel=\"nofollow noreferrer\">How to Write Go Code</a>, or just don&#39;t set GOPATH and use the default (the path you&#39;ve set is wrong for many  reasons)"}], "owner": {"reputation": 3, "user_id": 7742662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/150ca8df4078128dc223002e622174f3?s=128&d=identicon&r=PG&f=1", "display_name": "VenomSnake14", "link": "https://stackoverflow.com/users/7742662/venomsnake14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526057019, "creation_date": 1526057019, "question_id": 50296775, "link": "https://stackoverflow.com/questions/50296775/hyper-ledger-make-file-go-path", "title": "Hyper ledger make file go path", "body": "<p>Hi I'm trying to start a private hyper-ledger fabric network for testing </p>\n\n<p>When I enter the command <code>sudo make configtxgen cryptogen</code></p>\n\n<p>I get <code>Makefile:93: *** \"No go in PATH: Check dependencies\".  Stop.</code></p>\n\n<p>This is the path I'm using in my bashrc</p>\n\n<pre><code>export GOROOT=/usr/local/go\nexport GOPATH=/usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim\nexport PATH=$PATH:$GOROOT/bin:$GOPATH\n</code></pre>\n\n<p>go version returns <code>go version go1.9.1 linux/amd64</code></p>\n\n<p>Any help would be appreciated</p>\n\n<p>Thank You </p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-storage"], "comments": [{"owner": {"reputation": 307, "user_id": 9192468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c9e780929ad37be9449e167b21b490?s=128&d=identicon&r=PG&f=1", "display_name": "Ggrimaldo", "link": "https://stackoverflow.com/users/9192468/ggrimaldo"}, "edited": false, "score": 0, "creation_date": 1527172084, "post_id": 50296264, "comment_id": 88036089, "body": "Is it possible for you to share the code remaining on the headers? there could be an issue with the authentication or imports."}, {"owner": {"reputation": 4929, "user_id": 2050629, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f60dbf1e0b2f02120551724a3d4bcae1?s=128&d=identicon&r=PG", "display_name": "wiesson", "link": "https://stackoverflow.com/users/2050629/wiesson"}, "edited": false, "score": 0, "creation_date": 1547919496, "post_id": 50296264, "comment_id": 95362258, "body": "I have the same issue, in my case it&#39;s probably related how I upload the files"}, {"owner": {"reputation": 377, "user_id": 2214818, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/904dfd8f939241f50c468d2f27b25bd0?s=128&d=identicon&r=PG", "display_name": "Tiega", "link": "https://stackoverflow.com/users/2214818/tiega"}, "reply_to_user": {"reputation": 4929, "user_id": 2050629, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f60dbf1e0b2f02120551724a3d4bcae1?s=128&d=identicon&r=PG", "display_name": "wiesson", "link": "https://stackoverflow.com/users/2050629/wiesson"}, "edited": false, "score": 0, "creation_date": 1547932417, "post_id": 50296264, "comment_id": 95365687, "body": "@wiesson Hey, what you mean with same issue? With the serving? or the permissions?"}, {"owner": {"reputation": 4929, "user_id": 2050629, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f60dbf1e0b2f02120551724a3d4bcae1?s=128&d=identicon&r=PG", "display_name": "wiesson", "link": "https://stackoverflow.com/users/2050629/wiesson"}, "edited": false, "score": 0, "creation_date": 1548010351, "post_id": 50296264, "comment_id": 95381420, "body": "I uploaded data via django-storages to the google bucket and app engine was not able to access the that image (it worked via manual upload via web or gsutils/cli)."}, {"owner": {"reputation": 377, "user_id": 2214818, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/904dfd8f939241f50c468d2f27b25bd0?s=128&d=identicon&r=PG", "display_name": "Tiega", "link": "https://stackoverflow.com/users/2214818/tiega"}, "reply_to_user": {"reputation": 4929, "user_id": 2050629, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f60dbf1e0b2f02120551724a3d4bcae1?s=128&d=identicon&r=PG", "display_name": "wiesson", "link": "https://stackoverflow.com/users/2050629/wiesson"}, "edited": false, "score": 0, "creation_date": 1548443031, "post_id": 50296264, "comment_id": 95557059, "body": "@wiesson sry for the late response, try to create the folder you upload to with gsutil and set default permissions for that folder."}], "owner": {"reputation": 377, "user_id": 2214818, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/904dfd8f939241f50c468d2f27b25bd0?s=128&d=identicon&r=PG", "display_name": "Tiega", "link": "https://stackoverflow.com/users/2214818/tiega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1526055513, "creation_date": 1526054898, "last_edit_date": 1526055513, "question_id": 50296264, "link": "https://stackoverflow.com/questions/50296264/app-engine-go-standard-storage-images-api", "title": "App Engine Go Standard - Storage / Images API", "body": "<p>I have issues to get the serving images API in combination with the Cloud Storage / Blobstore API working.</p>\n\n<p>Images API: <a href=\"https://cloud.google.com/appengine/docs/standard/go/images/\" rel=\"nofollow noreferrer\">https://cloud.google.com/appengine/docs/standard/go/images/</a></p>\n\n<p>First of all, I could not get it to work with the dev_appserver at all. It creates the BlobKey I can find it in the admin server but the log shows:</p>\n\n<blockquote>\n  <p>Blob with key 'encoded_gs_file:ZXBpbG90Z28uYXBwc3BvdC5jb20vZGF0YS9NYWNoaW5lcy8yNTk0Mzg2L2hlaWRlbGJlcmdfYmdfdjIucG5n' does not exist</p>\n</blockquote>\n\n<p>Anyway I thought I would try it in the App Engine and here I managed to get it to work, but I need the given <strong>allUsers</strong> the access <strong>owner</strong> otherwise I get:</p>\n\n<blockquote>\n  <p>\"API error 1 (images: UNSPECIFIED_ERROR)\"</p>\n</blockquote>\n\n<p>The Files where uploaded via <strong>gsutil</strong> as private. But I noticed that the Images have to be public in the storage? Or is this a bug, couldn't find anything in the docs, just that the serveURL will be public.\nIf <strong>allUsers</strong> just have <strong>read</strong> access I get:</p>\n\n<blockquote>\n  <p>\"API error 7 (images: ACCESS_DENIED)\"</p>\n</blockquote>\n\n<p>My testing code, it will just get first file from the given bucketpath and try to get the serveURL:</p>\n\n<pre><code>ctx := appengine.NewContext(c.Request())\nbucketName, err := file.DefaultBucketName(ctx)\nif err != nil {\n    log.Println(ctx, \"failed to get default GCS bucket name: \", err)\n    return c.JSON(http.StatusBadRequest, err.Error())\n}\nclient, err := storage.NewClient(ctx)\nif err != nil {\n    log.Println(ctx, \"failed to create client: %v\", err)\n    return c.JSON(http.StatusBadRequest, err.Error())\n}\ndefer client.Close()\nbucket := client.Bucket(bucketName)\nfiles := []storage.ObjectAttrs{}\nquery := &amp;storage.Query{Prefix: \"PATHTOFILE\"}\nit := bucket.Objects(ctx, query)\nfor {\n    obj, err := it.Next()\n    if err == iterator.Done {\n        break\n    }\n    if err != nil {\n        log.Println(\"listBucket: unable to list bucket %q: %v\", bucketName, err)\n        return c.JSON(http.StatusBadRequest, err.Error())\n    }\n    files = append(files, *obj)\n}\nfileName := fmt.Sprintf(\"/gs/%s/%s\", files[0].Bucket, files[0].Name)\nblobKey, err := blobstore.BlobKeyForFile(ctx, fileName)\nif err != nil {\n    errorMessage := Model.ErrorResponseMessage{\n        Message: \"FailedToGetBlockKey\",\n        Info: []string{err.Error()},\n    }\n    errors.Errors = append(errors.Errors, errorMessage)\n    return c.JSON(http.StatusBadRequest, errors)\n}\noptions := image.ServingURLOptions{Secure:true, Size:600, Crop:false}\nurl, err := image.ServingURL(ctx, blobKey, &amp;options)\nif err != nil {\n    errorMessage := Model.ErrorResponseMessage{\n        Message: \"FailedToGetServingURL\",\n        Info: []string{err.Error()},\n    }\n    errors.Errors = append(errors.Errors, errorMessage)\n    return c.JSON(http.StatusBadRequest, errors)\n}\nreturn c.JSON(http.StatusOK, url)\n</code></pre>\n"}]