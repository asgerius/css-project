[{"tags": ["rest", "go", "frameworks", "beego"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 2, "creation_date": 1453930286, "post_id": 35046511, "comment_id": 57821044, "body": "Might be an obvious question but do you have the same dependencies on both machines? Did you do a <code>go get -u github.com&#47;astaxie&#47;beego</code> on the machine where it is not running?"}, {"owner": {"reputation": 641, "user_id": 2616232, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b8ef482200e234019a0822caffed2f8c?s=128&d=identicon&r=PG", "display_name": "user2616232", "link": "https://stackoverflow.com/users/2616232/user2616232"}, "reply_to_user": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453950241, "post_id": 35046511, "comment_id": 57828405, "body": "Yes I can see all the dependencies (exactly the same directory tree) in both machines."}], "answers": [{"comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 2, "creation_date": 1453986774, "post_id": 35054007, "comment_id": 57847598, "body": "-u after go get updates your existing dependency. Thus my comment above."}], "tags": [], "owner": {"reputation": 641, "user_id": 2616232, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b8ef482200e234019a0822caffed2f8c?s=128&d=identicon&r=PG", "display_name": "user2616232", "link": "https://stackoverflow.com/users/2616232/user2616232"}, "is_accepted": false, "score": 5, "last_activity_date": 1453961402, "creation_date": 1453961402, "answer_id": 35054007, "question_id": 35046511, "link": "https://stackoverflow.com/questions/35046511/beego-cannot-find-controller/35054007#35054007", "title": "Beego Cannot Find Controller", "body": "<p>I found the problem. Beego released new version between my installation of the machines. I thought it cannot see the whole controller but It was only the name of function.</p>\n\n<p>In new version: </p>\n\n<pre><code>serveJson() -&gt; serveJSON()\n</code></pre>\n\n<p>Config also changed.</p>\n\n<pre><code>Beego.HttpPort -&gt; beego.BConfig.Listen.HTTPPort\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5704141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c119e0e4d9596b06db2993de0e7eaf56?s=128&d=identicon&r=PG&f=1", "display_name": "Nix", "link": "https://stackoverflow.com/users/5704141/nix"}, "is_accepted": false, "score": 1, "last_activity_date": 1549598206, "creation_date": 1549598206, "answer_id": 54585789, "question_id": 35046511, "link": "https://stackoverflow.com/questions/35046511/beego-cannot-find-controller/54585789#54585789", "title": "Beego Cannot Find Controller", "body": "<p>Beego version 1.11.1</p>\n\n<p>This is case sensitive.</p>\n\n<p>Change</p>\n\n<pre><code>this.ServeJson()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>this.ServeJSON()\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 2616232, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b8ef482200e234019a0822caffed2f8c?s=128&d=identicon&r=PG", "display_name": "user2616232", "link": "https://stackoverflow.com/users/2616232/user2616232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1661, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549598206, "creation_date": 1453923423, "question_id": 35046511, "link": "https://stackoverflow.com/questions/35046511/beego-cannot-find-controller", "title": "Beego Cannot Find Controller", "body": "<p>I am working on beego application. I am trying to run the same code in two different machine. Both are ubuntu. In one machine, it runs without any problem but in other I got following error log. I have the same file organization for both, why do you think this might be happening?</p>\n\n<pre><code>controllers/EventController.go:18: this.ServeJson undefined (type *EventController has no field or method ServeJson)\ncontrollers/EventController.go:24: this.ServeJson undefined (type *EventController has no field or method ServeJson)\ncontrollers/EventController.go:30: this.ServeJson undefined (type *EventController has no field or method ServeJson)\ncontrollers/default.go:14: c.TplNames undefined (type *MainController has no field or method TplNames)\n</code></pre>\n\n<p>Even controller:</p>\n\n<pre><code>package controllers\n\n\nimport (\n    \"github.com/astaxie/beego\"\n    \"solardatabase/models\"\n    \"solardatabase/dao\"\n    \"solardatabase/services\"\n)\n\ntype EventController struct {\n    beego.Controller\n}\n\nfunc (this *EventController) ListEvents() {\n    res := struct{ Tasks []*models.Event }{dao.GetAllEvents()}\n    this.Data[\"json\"] = res\n    this.ServeJson()\n}\n\nfunc (this *EventController) ListEventsByRange() {\n    request, _ := models.CreateEventByTimeRangeRequest(this.Ctx.Input)\n    this.Data[\"json\"] = dao.EventsByTimeRange(request)\n    this.ServeJson()\n}\n\nfunc (this *EventController) TemporalQuery() {\n    request, _ := models.CreateTemporalRequest(this.Ctx.Input)\n    this.Data[\"json\"] = services.EventsByTimeFilter(request)\n    this.ServeJson()\n}\n</code></pre>\n"}, {"tags": ["http", "go"], "comments": [{"owner": {"reputation": 624, "user_id": 1887309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ba562230112c5953454a7b7ec7acb6?s=128&d=identicon&r=PG", "display_name": "Cedmundo", "link": "https://stackoverflow.com/users/1887309/cedmundo"}, "edited": false, "score": 0, "creation_date": 1453931367, "post_id": 35045342, "comment_id": 57821675, "body": "I don&#39;t see any problems using your method, nevertheless you can do a profiling to test the speed/memory of your implementation."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453932617, "post_id": 35045342, "comment_id": 57822367, "body": "The problem you face with a solution like this is that you hide any of the other implementations of <code>http.ResponseWriter</code>, i.e. it&#39;s awkward to get an <code>http.Hijacker</code> or <code>http.Flusher</code> out of the <code>ResponseWriter</code>. Within your own code I think it&#39;s OK if you know how to handle it, but other code may be expecting to assert one of those other interfaces."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1453934883, "post_id": 35045342, "comment_id": 57823590, "body": "This article covers the downsides well: <a href=\"https://joeshaw.org/net-context-and-http-handler/\" rel=\"nofollow noreferrer\">joeshaw.org/net-context-and-http-handler</a>"}], "owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1453919653, "creation_date": 1453919653, "question_id": 35045342, "link": "https://stackoverflow.com/questions/35045342/net-context-wrapped-on-the-http-responsewriter-good-or-bad", "title": "net/context wrapped on the http.ResponseWriter, good or bad?", "body": "<p>I needed an <a href=\"http://www.violetear.org\" rel=\"nofollow\">HTTP router</a> \"violetear\" that could support static and dynamic routing, with this I mean, been available to handle request like:</p>\n\n<pre><code>/read/book/:uuid/:uuid/ \n</code></pre>\n\n<blockquote>\n  <p>:uuid is something like C6FF0F6F-A274-48F4-B219-6595DCB989A5</p>\n</blockquote>\n\n<p>Or basic routes like:</p>\n\n<pre><code>/read/page/3\n</code></pre>\n\n<p>For the middleware I used <a href=\"https://github.com/justinas/alice\" rel=\"nofollow\">Alice</a> which helped me to keep things compatible with the http.Handler interface.</p>\n\n<p>So far so good, until the point where I needed to exchange data between the middleware or to access named parameters, like <code>:uuid</code> in previous example. </p>\n\n<p>Since the router was used in other projects I wanted to continue keeping compatibility with the <a href=\"https://golang.org/pkg/net/http/#Handler\" rel=\"nofollow\">http.Handler</a> interface, therefore I decided not to pass the <code>net/context</code> as an argument between middleware and opted to included in the http.ResponseWriter like specified here: <a href=\"https://github.com/nbari/violetear/blob/master/response_writer.go#L14\" rel=\"nofollow\">https://github.com/nbari/violetear/blob/master/response_writer.go#L14</a>.</p>\n\n<p>With this approach basically If I need to use the context I have to do something like:</p>\n\n<pre><code>func handleUUID(w http.ResponseWriter, r *http.Request) {\n    cw := w.(*ResponseWriter)\n    // add a key-value pair to the context\n    cw.Set(\"key\", \"my-value\")\n    // print current value for :uuid\n    fmt.Fprintf(w, \"Named parameter:, %q\", cw.Get(\":uuid\"))\n}\n</code></pre>\n\n<p>Notice the <code>cw := w.(*ResponseWriter)</code>.</p>\n\n<p>This is working but wondering if there is any issue by doing the <code>type</code> switch or if there are any concerns by doing this.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "answers": [{"tags": [], "owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "is_accepted": true, "score": 2, "last_activity_date": 1453921231, "creation_date": 1453921231, "answer_id": 35045788, "question_id": 35044782, "link": "https://stackoverflow.com/questions/35044782/google-app-engine-datastore-go-query-with-in-operator/35045788#35045788", "title": "google app engine datastore Go Query with &quot;in&quot; operator", "body": "<p>Other runtimes allow \"IN\" operator for datastore queries. It is, however, just a convenience: under the hood, the <a href=\"http://gae-java-persistence.blogspot.com/2009/12/queries-with-and-in-filters.html\" rel=\"nofollow\">datastore makes individual queries for each element in the list</a>.</p>\n\n<p>If you have a relatively small number of entities, it may be more efficient to retrieve all of them and then filter the results based on the \"department\" property, rather than issues N queries to search for N possible departments.</p>\n"}], "owner": {"reputation": 5728, "user_id": 2184930, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/460a48b8097cbd52e7315e349f6a84f3?s=128&d=identicon&r=PG", "display_name": "suman j", "link": "https://stackoverflow.com/users/2184930/suman-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 35045788, "answer_count": 1, "score": 3, "last_activity_date": 1471360357, "creation_date": 1453917745, "last_edit_date": 1471360357, "question_id": 35044782, "link": "https://stackoverflow.com/questions/35044782/google-app-engine-datastore-go-query-with-in-operator", "title": "google app engine datastore Go Query with &quot;in&quot; operator", "body": "<p>Using Query in App Engine Datastore, how do I specify to fetch keys that match a property with variable values?</p>\n\n<pre><code>var Person struct {\n   name string\n   department string  \n}\n\n//Query\nq := datastore.NewQuery(\"Person\").Filter(\"department = \", \"department1\").KeysOnly()\n</code></pre>\n\n<p>In the above query, instead of <strong>\"=\"</strong> operator, I want \"IN\" operator to specify more than 1 department value i.e fetch all person keys who belong to department1, department2, department3 etc.</p>\n\n<p>Is this possible with 1 Query? Or do I need to make 1 query for each department?</p>\n"}, {"tags": ["xml", "go"], "answers": [{"comments": [{"owner": {"reputation": 3087, "user_id": 856142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5bfb729f6ac07e17c2326a7335a3f3be?s=128&d=identicon&r=PG", "display_name": "yageek", "link": "https://stackoverflow.com/users/856142/yageek"}, "edited": false, "score": 0, "creation_date": 1453930468, "post_id": 35044312, "comment_id": 57821130, "body": "I can not deduce in advance what will be the prefix value.When you &quot;mix&quot; xml specifications, you use prefix to distinguish the spec you are using. I know that XMLSchema is defined with a specified URI. In the algorithm, I first search  if a namespace has been declared and I would like to have to retrieve the namespace prefix value."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "reply_to_user": {"reputation": 3087, "user_id": 856142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5bfb729f6ac07e17c2326a7335a3f3be?s=128&d=identicon&r=PG", "display_name": "yageek", "link": "https://stackoverflow.com/users/856142/yageek"}, "edited": false, "score": 0, "creation_date": 1453973302, "post_id": 35044312, "comment_id": 57838280, "body": "@yageek So you want to get information about all declared namespaces? If so, see edit."}, {"owner": {"reputation": 3087, "user_id": 856142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5bfb729f6ac07e17c2326a7335a3f3be?s=128&d=identicon&r=PG", "display_name": "yageek", "link": "https://stackoverflow.com/users/856142/yageek"}, "edited": false, "score": 0, "creation_date": 1454002335, "post_id": 35044312, "comment_id": 57859289, "body": "So it is not possible."}], "tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1453973268, "last_edit_date": 1453973268, "creation_date": 1453916262, "answer_id": 35044312, "question_id": 35044019, "link": "https://stackoverflow.com/questions/35044019/get-xml-namespace-prefix-in-go-using-unmarshal/35044312#35044312", "title": "Get XML namespace prefix in Go using Unmarshal", "body": "<p>Just get it like every other attribute:</p>\n\n<pre><code>type App struct {\n    XS string `xml:\"xs,attr\"`\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/2IOmkX1Jov\" rel=\"nofollow\">http://play.golang.org/p/2IOmkX1Jov</a>.</p>\n\n<p>It gets trickier if you also have an actual <code>xs</code> attribute, sans <code>xmlns</code>. Even if you add the namespace URI to <code>XS</code>'s tag, you will probably <a href=\"https://github.com/golang/go/issues/11724\" rel=\"nofollow\">get an error</a>.</p>\n\n<p><strong>EDIT:</strong> If you want to get <em>all</em> declared namespaces, you can define a custom <code>UnmarshalXML</code> on your element and scan it's attributes:</p>\n\n<pre><code>type App struct {\n    Namespaces map[string]string\n    Foo        int `xml:\"foo\"`\n}\n\nfunc (a *App) UnmarshalXML(d *xml.Decoder, start xml.StartElement) error {\n    a.Namespaces = map[string]string{}\n    for _, attr := range start.Attr {\n        if attr.Name.Space == \"xmlns\" {\n            a.Namespaces[attr.Name.Local] = attr.Value\n        }\n    }\n\n    // Go on with unmarshalling.\n    type app App\n    aa := (*app)(a)\n    return d.DecodeElement(aa, &amp;start)\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/u4RJBG3_jW\" rel=\"nofollow\">http://play.golang.org/p/u4RJBG3_jW</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3087, "user_id": 856142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5bfb729f6ac07e17c2326a7335a3f3be?s=128&d=identicon&r=PG", "display_name": "yageek", "link": "https://stackoverflow.com/users/856142/yageek"}, "is_accepted": false, "score": 0, "last_activity_date": 1454002419, "creation_date": 1454002419, "answer_id": 35068164, "question_id": 35044019, "link": "https://stackoverflow.com/questions/35044019/get-xml-namespace-prefix-in-go-using-unmarshal/35068164#35068164", "title": "Get XML namespace prefix in Go using Unmarshal", "body": "<p>Currently (Go 1.5), it does not seems to be possible.</p>\n\n<p>The only solution I found, was to use rewind the element:</p>\n\n<pre><code>func NewDocument(r io.ReadSeeker) (*Document, error) {\n\n    decoder := xml.NewDecoder(r)\n\n    // Retrieve xml namespace first\n    rootToken, err := decoder.Token()\n\n\n    if err != nil {\n        return nil, err\n    }\n\n    var xmlSchemaNamespace string\n\n    switch element := rootToken.(type) {\n    case xml.StartElement:\n\n        for _, attr := range element.Attr {\n            if attr.Value == xsd.XMLSchemaURI {\n                xmlSchemaNamespace = attr.Name.Local\n                break\n            }\n        }\n    }\n\n    /* Process name space */\n\n    // Rewind\n    r.Seek(0, 0)\n\n    // Standart unmarshall\n    decoder = xml.NewDecoder(r)\n    err = decoder.Decode(&amp;w)\n\n    /* ... */\n}\n</code></pre>\n"}], "owner": {"reputation": 3087, "user_id": 856142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5bfb729f6ac07e17c2326a7335a3f3be?s=128&d=identicon&r=PG", "display_name": "yageek", "link": "https://stackoverflow.com/users/856142/yageek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3402, "favorite_count": 1, "accepted_answer_id": 35044312, "answer_count": 2, "score": 2, "last_activity_date": 1454002419, "creation_date": 1453915422, "question_id": 35044019, "link": "https://stackoverflow.com/questions/35044019/get-xml-namespace-prefix-in-go-using-unmarshal", "title": "Get XML namespace prefix in Go using Unmarshal", "body": "<p>I would like to know if it is possible to get the XML namespace prefix using the \n<code>Unmarshal</code> method in <code>encoding/xml</code>.</p>\n\n<p>For example, I have: </p>\n\n<pre><code>&lt;application xmlns=\"http://wadl.dev.java.net/2009/02\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>I would like to know how to retrieve the <code>xs</code> defining the prefix for XMLSchema, without having to use the <code>Token</code> method.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1453914701, "post_id": 35043202, "comment_id": 57811688, "body": "I&#39;m not sure if Go&#39;s fmt library has the same security issues as C but to be on the safe side you should never use format strings from untrusted sources. In C this leads to information leaks, like printing out sensitive stack data and even data overwrite and code execution."}, {"owner": {"reputation": 2339, "user_id": 3081558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ritS.jpg?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3081558/patrick"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1453916030, "post_id": 35043202, "comment_id": 57812542, "body": "@ZanLynx thanks for the update. I just simplified the question. The program is not exposed to others for sure."}, {"owner": {"reputation": 1287, "user_id": 106275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43vfP.png?s=128&g=1", "display_name": "Stein", "link": "https://stackoverflow.com/users/106275/stein"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1482069173, "post_id": 35043202, "comment_id": 69616726, "body": "@Zan Lynx There are no such security concerns in Go&#39;s fmt library and elsewhere in regular Go code. Which doesn&#39;t imply it&#39;s a great idea to juggle with format strings at will."}], "answers": [{"comments": [{"owner": {"reputation": 20333, "user_id": 774078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/seSXR.png?s=128&g=1", "display_name": "Sterling Archer", "link": "https://stackoverflow.com/users/774078/sterling-archer"}, "edited": false, "score": 7, "creation_date": 1453917273, "post_id": 35043276, "comment_id": 57813423, "body": "This is a comment, not an answer. Why is this upvoted?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 20333, "user_id": 774078, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/seSXR.png?s=128&g=1", "display_name": "Sterling Archer", "link": "https://stackoverflow.com/users/774078/sterling-archer"}, "edited": false, "score": 4, "creation_date": 1453959585, "post_id": 35043276, "comment_id": 57831255, "body": "The (original) question was about how to make <code>fmt.Printf</code> ignore extra arguments and that cannot be done. The different solution is to preprocess you arguments but that&#39;s programming 101 and has nothing to do with <code>fmt.Printf</code>."}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": -4, "last_activity_date": 1453913299, "creation_date": 1453913299, "answer_id": 35043276, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf/35043276#35043276", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>You cannot do this.</p>\n\n<p>You have to find a different solution.</p>\n"}, {"comments": [{"owner": {"reputation": 2339, "user_id": 3081558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ritS.jpg?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3081558/patrick"}, "edited": false, "score": 0, "creation_date": 1453919234, "post_id": 35043994, "comment_id": 57814697, "body": "Thanks for your reply. I am kinda new to Golang. I think your answer is very inspiring!"}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": false, "score": 4, "last_activity_date": 1453915340, "last_edit_date": 1495542291, "creation_date": 1453915340, "answer_id": 35043994, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf/35043994#35043994", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>I agree with <a href=\"https://stackoverflow.com/a/35043276/102852\">Volker's answer</a>, but you could check your input string:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    tmp_str := \"hello %s\"\n\n    res := tmp_str\n    if strings.Count(tmp_str, \"%s\") == 1 {\n        res = fmt.Sprintf(tmp_str, \"world\")\n    }\n    fmt.Println(res)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1954, "user_id": 4746361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365515b57884ad8e8ad13e1050981839?s=128&d=identicon&r=PG&f=1", "display_name": "william.taylor.09", "link": "https://stackoverflow.com/users/4746361/william-taylor-09"}, "edited": false, "score": 1, "creation_date": 1453918524, "post_id": 35044497, "comment_id": 57814192, "body": "Great answer. Added a bit of error handling that OP can expand on: <a href=\"https://play.golang.org/p/NSFFzgLC7B\" rel=\"nofollow noreferrer\">play.golang.org/p/NSFFzgLC7B</a>"}, {"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "reply_to_user": {"reputation": 1954, "user_id": 4746361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/365515b57884ad8e8ad13e1050981839?s=128&d=identicon&r=PG&f=1", "display_name": "william.taylor.09", "link": "https://stackoverflow.com/users/4746361/william-taylor-09"}, "edited": false, "score": 2, "creation_date": 1453918655, "post_id": 35044497, "comment_id": 57814285, "body": "@william.taylor.09 good idea. I took your error handling and added it into the answer so that nobody would miss it. But note that having more %s than arguments could be considered <i>OK</i> (there&#39;s just some &quot;MISSING&quot;)"}, {"owner": {"reputation": 101, "user_id": 11795693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wvbhz.png?s=128&g=1", "display_name": "32f", "link": "https://stackoverflow.com/users/11795693/32f"}, "edited": false, "score": 0, "creation_date": 1577061583, "post_id": 35044497, "comment_id": 105080915, "body": "Adding an indexed placeholder helps: <code>fmt.Sprintf(&quot;Hello&quot;+&quot;%[2]s&quot;, &quot;World&quot;, &quot;&quot;)</code>"}], "tags": [], "owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "is_accepted": true, "score": 7, "last_activity_date": 1453922706, "last_edit_date": 1453922706, "creation_date": 1453916779, "answer_id": 35044497, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf/35044497#35044497", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>Yes you can do it, by slicing the arguments you pass to the variadic <code>Sprintf</code> function:</p>\n\n<pre><code>func TruncatingSprintf(str string, args ...interface{}) (string, error) {\n    n := strings.Count(str, \"%s\")\n    if n &gt; len(args) {\n        return \"\", errors.New(\"Unexpected string:\" + str)\n    }\n    return fmt.Sprintf(str, args[:n]...), nil\n}\n\nfunc main() {\n    tmp_str := \"hello %s %s %s\"         // don't hesitate to add many %s here\n    str, err := TruncatingSprintf(tmp_str, \"world\") // or many arguments here\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    fmt.Println(str)\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/NSFFzgLC7B\" rel=\"nofollow\"><strong>Demonstration 1</strong></a></p>\n\n<p><a href=\"https://play.golang.org/p/Ib2ULyAqCp\" rel=\"nofollow\"><strong>Demonstration 2</strong></a> (a different version outputting even when there's more %s than arguments)</p>\n\n<p>But you don't usually use dynamic formatted strings, this isn't secure and if you want to accept <em>any</em> string, you should also adapt this code to no choke on <code>%%s</code>. If you venture this far, then you should probably have a look at <a href=\"https://golang.org/pkg/text/template/\" rel=\"nofollow\">templates</a> (which would let you use named strings, and thus the missing one wouldn't have to be the last one).</p>\n"}, {"comments": [{"owner": {"reputation": 2552, "user_id": 610051, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c90269c460cc6593f56823abb0c9cf39?s=128&d=identicon&r=PG", "display_name": "Roshambo", "link": "https://stackoverflow.com/users/610051/roshambo"}, "edited": false, "score": 1, "creation_date": 1546729747, "post_id": 41209086, "comment_id": 94948277, "body": "In my particular case, this was perfect. Simple and straightforward."}, {"owner": {"reputation": 496, "user_id": 96292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b868b14dfedcaa12854e0d5c4fe07583?s=128&d=identicon&r=PG", "display_name": "duskstriker", "link": "https://stackoverflow.com/users/96292/duskstriker"}, "edited": false, "score": 0, "creation_date": 1550905746, "post_id": 41209086, "comment_id": 96452205, "body": "This worked perfectly for me as well. I also noticed that you can use &quot;%.T&quot; to ignore any data type (not just strings!). For example, <code>fmt.Printf(&quot;arg1=%s, arg2=%.T, arg3=%.T, arg4=%.T, arg=%s&quot;, &quot;arg1&quot;, 2.123, true, &quot;arg4&quot;, &quot;arg5&quot;)</code> =&gt; &quot;arg1=arg1, arg2=, arg3=, arg4=, arg=arg5&quot; (see: <a href=\"https://play.golang.org/p/m0ahZ7ofAH_f\" rel=\"nofollow noreferrer\">play.golang.org/p/m0ahZ7ofAH_f</a> and <a href=\"https://golang.org/pkg/fmt/\" rel=\"nofollow noreferrer\">golang.org/pkg/fmt</a>). With this approach, however, there is a &quot;Printf format %.T has unrecognized flag .&quot; error from Go vet which I haven&#39;t explained yet. Thanks Stein and Roshambo! :)"}], "tags": [], "owner": {"reputation": 1287, "user_id": 106275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43vfP.png?s=128&g=1", "display_name": "Stein", "link": "https://stackoverflow.com/users/106275/stein"}, "is_accepted": false, "score": 4, "last_activity_date": 1482069883, "creation_date": 1482069883, "answer_id": 41209086, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf/41209086#41209086", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>In this particular case, you could require the command line users to always supply a %s verb, and explain they can truncate the string to zero length:</p>\n\n<pre><code>Hello Friends%.0s\n</code></pre>\n\n<p>or even shorter:</p>\n\n<pre><code>Hello Friends%.s\n</code></pre>\n\n<p>The output is plain:</p>\n\n<blockquote>\n  <p>Hello Friends</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 11795693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wvbhz.png?s=128&g=1", "display_name": "32f", "link": "https://stackoverflow.com/users/11795693/32f"}, "is_accepted": false, "score": 0, "last_activity_date": 1563343223, "creation_date": 1563343223, "answer_id": 57069397, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf/57069397#57069397", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>I use this one (which can probably be expanded on)</p>\n\n<pre><code>Sprintf(\"Hello\"+\"%[2]s\", \"World\", \"\")\nSprintf(\"Hello %s\"+\"%[2]s\", \"World\", \"\")\n</code></pre>\n"}], "owner": {"reputation": 2339, "user_id": 3081558, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9ritS.jpg?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3081558/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4561, "favorite_count": 1, "accepted_answer_id": 35044497, "answer_count": 5, "score": 4, "last_activity_date": 1563343223, "creation_date": 1453913115, "last_edit_date": 1453951168, "question_id": 35043202, "link": "https://stackoverflow.com/questions/35043202/how-to-ignore-extra-fields-for-fmt-sprintf", "title": "How to ignore extra fields for fmt.Sprintf", "body": "<p>I have a Golang program that reads a string parameter from command line and passes it to the fmt.Sprintf function. Let's say tmp_str is the target string from command line.</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    tmp_str := \"hello %s\"\n    str := fmt.Sprintf(tmp_str, \"world\")\n    fmt.Println(str)\n}\n</code></pre>\n\n<p>In some cases, the program will pass a completed string like \"Hello Friends\", instead of a string template.. The program would panic and return:</p>\n\n<blockquote>\n  <p>Hello Friends%!(EXTRA string=world)</p>\n</blockquote>\n\n<p>So, how to ignore the extra fields for fmt.Sprintf?</p>\n"}, {"tags": ["date", "go", "comparison"], "answers": [{"tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 41, "last_activity_date": 1453912075, "creation_date": 1453912075, "answer_id": 35042785, "question_id": 35042515, "link": "https://stackoverflow.com/questions/35042515/compare-only-date-part-ot-time-time-in-golang/35042785#35042785", "title": "Compare only date part ot time.Time in Golang", "body": "<p>You can either truncate the time to the day:</p>\n\n<pre><code>t1.Truncate(24*time.Hour).Equal(t2.Truncate(24*time.Hour))\n</code></pre>\n\n<p>Or you can compare the year and day separately:</p>\n\n<pre><code>t1.Year() == t2.Year() &amp;&amp; t1.YearDay() == t2.YearDay()\n</code></pre>\n"}], "owner": {"reputation": 4897, "user_id": 1188357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/cKQ6S.png?s=128&g=1", "display_name": "Kiril", "link": "https://stackoverflow.com/users/1188357/kiril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13516, "favorite_count": 0, "accepted_answer_id": 35042785, "answer_count": 1, "score": 22, "last_activity_date": 1453912076, "creation_date": 1453911366, "question_id": 35042515, "link": "https://stackoverflow.com/questions/35042515/compare-only-date-part-ot-time-time-in-golang", "title": "Compare only date part ot time.Time in Golang", "body": "<p>Assume the following two dates. The date is the same, however the time is different.</p>\n\n<pre><code>t1, _ := time.Parse(\"2006-01-02 15:04:05\", \"2016-01-01 12:12:12.0\")\nt2, _ := time.Parse(\"2006-01-02 15:04:05\", \"2016-01-01 18:19:20.0\")\n</code></pre>\n\n<p>I would compare them using <code>Format()</code>, but am not sure if that's the best way, especially when different timezones are at play.</p>\n\n<pre><code>if t1.Format(\"2006-01-02\") == t2.Format(\"2006-01-02\") {\n    // dates are equal, don't care about time.\n}\n</code></pre>\n\n<p>Is this a good approach, or am I missing something?</p>\n"}, {"tags": ["windows", "service", "go"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 2, "creation_date": 1453909577, "post_id": 35040234, "comment_id": 57807992, "body": "Do it properly with the <code>svc</code> package? - Where do you expect to see output? Services are isolated so you would not see/be able to interact with anything. (FYI 1053 is a startup timeout error)"}, {"owner": {"reputation": 71, "user_id": 5579183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebddaf1f13fa6169eee72a89e06c7bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jungwan Nam", "link": "https://stackoverflow.com/users/5579183/jungwan-nam"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1453958429, "post_id": 35040234, "comment_id": 57830863, "body": "i didn&#39;t use svc package bc svc package is hard for me"}], "owner": {"reputation": 71, "user_id": 5579183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebddaf1f13fa6169eee72a89e06c7bd?s=128&d=identicon&r=PG&f=1", "display_name": "Jungwan Nam", "link": "https://stackoverflow.com/users/5579183/jungwan-nam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2086, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1454002937, "creation_date": 1453905475, "question_id": 35040234, "link": "https://stackoverflow.com/questions/35040234/golang-program-doesnt-not-work-on-windows-services", "title": "golang program doesn&#39;t not work on windows services", "body": "<p>i made this test program test.exe</p>\n\n<pre><code>package main\n\nimport (\n        \"fmt\"\n        \"time\"\n)\nfunc main(){\n        for{\n                fmt.Println(\"hello\")\n                time.Sleep(3 * time.Second)\n        }\n}\n</code></pre>\n\n<p>i wanna register this file with background at windows services (services.msc)</p>\n\n<p>i tried that all command sc, nssm, srvany like this </p>\n\n<pre><code>sc create TestService binpath=C:\\User\\sds\\Desktop\\test.exe\nnssm install TestService C:\\User\\sds\\Desktop\\test.exe\n</code></pre>\n\n<p>service registration is success in services but it is not work going to be stoped with 1053 error message</p>\n\n<p>i wanna run this program at windows background service</p>\n\n<p>plz</p>\n"}, {"tags": ["variables", "go", "global", "main"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 2, "creation_date": 1453902135, "post_id": 35038864, "comment_id": 57802228, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/21293000/go-build-works-fine-but-go-run-fails\">go build works fine but go run fails</a>"}, {"owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "edited": false, "score": 0, "creation_date": 1453902181, "post_id": 35038864, "comment_id": 57802259, "body": "Is the first letter on the variable name capitalized?"}, {"owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "edited": false, "score": 0, "creation_date": 1453902268, "post_id": 35038864, "comment_id": 57802325, "body": "Yes, it is capitalized, and my go build fails"}, {"owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "edited": false, "score": 0, "creation_date": 1453902308, "post_id": 35038864, "comment_id": 57802360, "body": "are you including all relevant files when running the program? That is, when running the code, are you running go run file1.go file2.go ..etc"}, {"owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "edited": false, "score": 0, "creation_date": 1453902426, "post_id": 35038864, "comment_id": 57802437, "body": "Yes, to be more concise, I have a variable called &#39;var StartTime = time.Now()&#39; in my main.go But when i try to access StartTime in a different .go of the same directory, it says its undefined, would i have to include &quot;main&quot; in the .go file that im trying to call?"}, {"owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "edited": false, "score": 0, "creation_date": 1453902603, "post_id": 35038864, "comment_id": 57802547, "body": "Hmm, perhaps it would be better to &quot;inject&quot; the variable into the other package, for instance, couldn&#39;t you set the variable in the other package in the main method of your main package? If you pass it by reference, then the variable is still shared..."}, {"owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "edited": false, "score": 0, "creation_date": 1453902778, "post_id": 35038864, "comment_id": 57802665, "body": "Unfortunately I can&#39;t do that, cause of the way our overall system is built. I assumed if it was global, all files would have access to it but i guess go doesn&#39;t let you do that"}, {"owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "edited": false, "score": 0, "creation_date": 1453902891, "post_id": 35038864, "comment_id": 57802732, "body": "I&#39;m afraid you will have a circular reference otherwise. Your main.go package is dependent on the &quot;otherPackage&quot;, and now you want to make the &quot;otherPackage&quot; dependent on the main package.."}, {"owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "edited": false, "score": 0, "creation_date": 1453903256, "post_id": 35038864, "comment_id": 57803028, "body": "Okay, I&#39;ve made that change so now main is in my src directory and then theres a directory in src called timeStamp with the other .go file in it, but it still gives me the same StartTime undefined"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453903314, "post_id": 35038864, "comment_id": 57803085, "body": "@Nighthee: yes, because you&#39;re not importing <code>main</code> into the other package, so it doesn&#39;t exists there (both because you can&#39;t have a circular dependency, and because you can&#39;t import a <code>main</code> package.)"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 4997647, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fb0591f53957717d9f95455aef09b142?s=128&d=identicon&r=PG&f=1", "display_name": "Kulbhushan Singh", "link": "https://stackoverflow.com/users/4997647/kulbhushan-singh"}, "edited": false, "score": 1, "creation_date": 1576500955, "post_id": 35039358, "comment_id": 104908607, "body": "aren&#39;t you re-declaring the variable?"}], "tags": [], "owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "is_accepted": true, "score": 89, "last_activity_date": 1453904364, "last_edit_date": 1453904364, "creation_date": 1453903067, "answer_id": 35039358, "question_id": 35038864, "link": "https://stackoverflow.com/questions/35038864/how-to-access-global-variables/35039358#35039358", "title": "How to access global variables", "body": "<p>I would \"inject\" the starttime variable instead, otherwise you have a circular dependency between the packages.</p>\n\n<p>main.go</p>\n\n<pre><code>var StartTime = time.Now()\nfunc main() {\n   otherPackage.StartTime = StartTime\n}\n</code></pre>\n\n<p>otherpackage.go</p>\n\n<pre><code>var StartTime time.Time\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "edited": false, "score": 0, "creation_date": 1453903555, "post_id": 35039473, "comment_id": 57803266, "body": "My &#39;dif&#39; is a restful API and won&#39;t be called when the program starts but only when its invoked through URL, so i need to put the StartTime in main.go and pass it to dif, you&#39;re passing it from dif to main, thanks for the try though!"}, {"owner": {"reputation": 10239, "user_id": 896358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df545d088c90710377af844a60d1f7ac?s=128&d=identicon&r=PG", "display_name": "ROOT", "link": "https://stackoverflow.com/users/896358/root"}, "edited": false, "score": 0, "creation_date": 1565766966, "post_id": 35039473, "comment_id": 101449914, "body": "A better way is to use function, instead of a variable, just make it a function that whenever its called you get a timestamp."}], "tags": [], "owner": {"reputation": 239, "user_id": 5835055, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eb5SIEHiKkE/AAAAAAAAAAI/AAAAAAAAAA0/nTcmPdpHHnA/photo.jpg?sz=128", "display_name": "joy miao", "link": "https://stackoverflow.com/users/5835055/joy-miao"}, "is_accepted": false, "score": 16, "last_activity_date": 1511674810, "last_edit_date": 1511674810, "creation_date": 1453903349, "answer_id": 35039473, "question_id": 35038864, "link": "https://stackoverflow.com/questions/35038864/how-to-access-global-variables/35039473#35039473", "title": "How to access global variables", "body": "<p>I create a file <code>dif.go</code> that contains your code:</p>\n\n<pre><code>package dif\n\nimport (\n    \"time\"\n)\n\nvar StartTime = time.Now()\n</code></pre>\n\n<p>Outside the folder I create my <code>main.go</code>, it is ok!</p>\n\n<pre><code>package main\n\nimport (\n    dif \"./dif\"\n    \"fmt\"\n)\n\nfunc main() {\n    fmt.Println(dif.StartTime)\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>2016-01-27 21:56:47.729019925 +0800 CST\n</code></pre>\n\n<p>Files directory structure:</p>\n\n<pre><code>folder\n  main.go\n  dif\n    dif.go\n</code></pre>\n\n<p>It works!</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3562771"}, "is_accepted": false, "score": 0, "last_activity_date": 1560274566, "last_edit_date": 1560274566, "creation_date": 1555048800, "answer_id": 55645352, "question_id": 35038864, "link": "https://stackoverflow.com/questions/35038864/how-to-access-global-variables/55645352#55645352", "title": "How to access global variables", "body": "<p>I suggest use the common way of import. </p>\n\n<p>First I will explain the way it called \"relative import\" maybe this way cause of some error</p>\n\n<p>Second I will explain the common way of import. </p>\n\n<p>FIRST: </p>\n\n<p>In go version >= 1.12 there is some new tips about import file and somethings changed.</p>\n\n<p>1- You should put your file in another folder for example I create a file in \"model\" folder and the file's name is \"example.go\"</p>\n\n<p>2- You have to use uppercase when you want to import a file!</p>\n\n<p>3- Use Uppercase for variables, structures and functions that you want to import in another files</p>\n\n<p>Notice: There is no way to import the main.go in another file.</p>\n\n<p>file directory is:</p>\n\n<pre><code>root\n|_____main.go\n|_____model\n          |_____example.go\n</code></pre>\n\n<p>this is a  example.go:</p>\n\n<pre><code>package model\n\nimport (\n    \"time\"\n)\n\nvar StartTime = time.Now()\n</code></pre>\n\n<p>and this is main.go you should use uppercase when you want to import a file. \"Mod\" started with uppercase</p>\n\n<pre><code>package main\n\nimport (\n    Mod \"./model\"\n    \"fmt\"\n)\n\nfunc main() {\n    fmt.Println(Mod.StartTime)\n}\n</code></pre>\n\n<p>NOTE!!!</p>\n\n<p>NOTE: I don't recommend this this type of import!</p>\n\n<p>SECOND: </p>\n\n<p>(normal import)</p>\n\n<p>the better way import file is:</p>\n\n<p>your structure should be like this:</p>\n\n<pre><code>root\n|_____github.com\n         |_________Your-account-name-in-github\n         |                |__________Your-project-name\n         |                                |________main.go\n         |                                |________handlers\n         |                                |________models\n         |               \n         |_________gorilla\n                         |__________sessions\n\n</code></pre>\n\n<p>and this is a example:</p>\n\n<pre><code>package main\n\nimport (\n    \"github.com/gorilla/sessions\"\n)\n\nfunc main(){\n     //you can use sessions here\n}\n</code></pre>\n\n<p>so you can import \"github.com/gorilla/sessions\" in every where that you want...just import it.</p>\n"}], "owner": {"reputation": 977, "user_id": 5227724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d8e7291331d1d6448748bfdef7aa5244?s=128&d=identicon&r=PG&f=1", "display_name": "Nighthee", "link": "https://stackoverflow.com/users/5227724/nighthee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151635, "favorite_count": 9, "accepted_answer_id": 35039358, "answer_count": 3, "score": 60, "last_activity_date": 1568963595, "creation_date": 1453901796, "last_edit_date": 1568963595, "question_id": 35038864, "link": "https://stackoverflow.com/questions/35038864/how-to-access-global-variables", "title": "How to access global variables", "body": "<p>How do I access a variable that was declared/init in my main.go in a different .go package/file? Keeps telling me that the variable is undefined (I know that global variables are bad but this is just to be used as a timestamp)</p>\n\n<p>in main.go</p>\n\n<pre><code>var StartTime = time.Now()\nfunc main(){...}\n</code></pre>\n\n<p>trying to access StartTime in a different .go file\nbut keep getting StartTime undefined</p>\n"}, {"tags": ["api", "go", "nominatim"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1453899906, "post_id": 35038064, "comment_id": 57800678, "body": "Seems to work for me. What&#39;s your <code>OpenStreetMapResponse</code> definition?"}, {"owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "edited": false, "score": 0, "creation_date": 1453899969, "post_id": 35038064, "comment_id": 57800713, "body": "Can you provide the struct for <code>OpenStreetMapResponse</code>?"}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1453901876, "post_id": 35038064, "comment_id": 57802026, "body": "Worked for me, what is your serviceURL? Seems like you may be stripping the query string from the URL possible?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453904420, "post_id": 35038064, "comment_id": 57803968, "body": "Why are you setting the <code>Content-Type</code> in the request (but send a nil body which is fine)? Maybe you should set <code>Accept</code> and/or other headers? And: Check and handle all errors."}, {"owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "edited": false, "score": 0, "creation_date": 1453905488, "post_id": 35038064, "comment_id": 57804800, "body": "Is <a href=\"http://nominatim.openstreetmap.org/search?format=json&amp;addressdetails=0&amp;q=1322\" rel=\"nofollow noreferrer\">this</a> the result that you&#39;re observing? ;-)"}, {"owner": {"reputation": 1, "user_id": 5846802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cfeddb2f19698ad01b58bc51308152?s=128&d=identicon&r=PG&f=1", "display_name": "C. Blair", "link": "https://stackoverflow.com/users/5846802/c-blair"}, "edited": false, "score": 0, "creation_date": 1453936967, "post_id": 35038064, "comment_id": 57824464, "body": "thwd that is the result set I&#39;m getting back.  I&#39;m expecting the result you get when you click on the link."}, {"owner": {"reputation": 1, "user_id": 5846802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cfeddb2f19698ad01b58bc51308152?s=128&d=identicon&r=PG&f=1", "display_name": "C. Blair", "link": "https://stackoverflow.com/users/5846802/c-blair"}, "edited": false, "score": 0, "creation_date": 1453937155, "post_id": 35038064, "comment_id": 57824543, "body": "Leo Correa, my service url is what is pasted at the beginning of this post.  It is the exact url generated from my code.  I&#39;ll also have to post of the OpenStreetMapResponse shortly."}, {"owner": {"reputation": 21289, "user_id": 532430, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/uAwnB.png?s=128&g=1", "display_name": "thwd", "link": "https://stackoverflow.com/users/532430/thwd"}, "edited": false, "score": 0, "creation_date": 1453973853, "post_id": 35038064, "comment_id": 57838649, "body": "I cant write a full answer right now but your problem is the URL-encoding of <code>serviceUrl</code>. Happy hacking!"}, {"owner": {"reputation": 1, "user_id": 5846802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cfeddb2f19698ad01b58bc51308152?s=128&d=identicon&r=PG&f=1", "display_name": "C. Blair", "link": "https://stackoverflow.com/users/5846802/c-blair"}, "edited": false, "score": 0, "creation_date": 1453987626, "post_id": 35038064, "comment_id": 57848165, "body": "I originally tried url.queryescape to no avail, but got it to work by building the url, its path and params with the url object.  Thank You for pushing me to look further into the url object."}], "owner": {"reputation": 1, "user_id": 5846802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30cfeddb2f19698ad01b58bc51308152?s=128&d=identicon&r=PG&f=1", "display_name": "C. Blair", "link": "https://stackoverflow.com/users/5846802/c-blair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453899491, "creation_date": 1453899491, "question_id": 35038064, "link": "https://stackoverflow.com/questions/35038064/why-does-golang-give-different-nominatim-results", "title": "why does golang give different nominatim results", "body": "<p>I am calling this api url with golang:</p>\n\n<p><a href=\"http://nominatim.openstreetmap.org/search?format=json&amp;addressdetails=0&amp;q=1322%20Kenwood%20Ave.%20Springfield%20OH%2045505%20US\" rel=\"nofollow\">http://nominatim.openstreetmap.org/search?format=json&amp;addressdetails=0&amp;q=1322%20Kenwood%20Ave.%20Springfield%20OH%2045505%20US</a></p>\n\n<p>When you click the url you get a single valid response from open street maps.</p>\n\n<p>When I call from golang, I get 10 results back, which are all invalid.  </p>\n\n<p>My code looks like:</p>\n\n<pre><code>var myResponse []OpenStreetMapResponse\nrequest, err := http.NewRequest(\"GET\", serviceUrl, nil)\nrequest.Header.Set(\"Content-Type\", \"application/json\")\nclient := &amp;http.Client{}\nresponse, err := client.Do(request)\ndefer response.Body.Close()\nbody, _ := ioutil.ReadAll(response.Body)\njson.Unmarshal(body, &amp;myResponse)\n</code></pre>\n\n<p>what am i doing wrong?  this makes absolutely no sense.  i can write this api call in about 4 different programming languages and I get the correct response, but golang is giving COMPLETELY different results.  any help you can provide would be greatly appreciated.</p>\n"}, {"tags": ["go", "timezone"], "comments": [{"owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "edited": false, "score": 2, "creation_date": 1453896962, "post_id": 35036951, "comment_id": 57798635, "body": "<a href=\"http://stackoverflow.com/questions/34975007/in-go-how-can-i-extract-the-value-of-my-current-local-time-offset\" title=\"in go how can i extract the value of my current local time offset\">stackoverflow.com/questions/34975007/&hellip;</a>"}, {"owner": {"reputation": 1568, "user_id": 830320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb02d7afb172dbbfcf0e5d9829b544f0?s=128&d=identicon&r=PG", "display_name": "OmarOthman", "link": "https://stackoverflow.com/users/830320/omarothman"}, "reply_to_user": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "edited": false, "score": 0, "creation_date": 1453898186, "post_id": 35036951, "comment_id": 57799502, "body": "This is not the same question by any means. I edited my question to make it clearer, though."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 4, "creation_date": 1453898804, "post_id": 35036951, "comment_id": 57799919, "body": "@OmarOthman You can&#39;t get offset by string because offset depends on time as well. Think about <a href=\"https://en.wikipedia.org/wiki/Daylight_saving_time\" rel=\"nofollow noreferrer\">DST</a>, or the fact that <a href=\"http://play.golang.org/p/6BHVVE9aIT\" rel=\"nofollow noreferrer\">time zones change</a>."}, {"owner": {"reputation": 1568, "user_id": 830320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb02d7afb172dbbfcf0e5d9829b544f0?s=128&d=identicon&r=PG", "display_name": "OmarOthman", "link": "https://stackoverflow.com/users/830320/omarothman"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1453981531, "post_id": 35036951, "comment_id": 57843840, "body": "@Ainar-G Thank you for your comment, I am a beginner in that world. But take a look <a href=\"https://metacpan.org/source/GAAS/HTTP-Date-6.02/lib/HTTP/Date.pm#L71\" rel=\"nofollow noreferrer\">here</a>, this is exactly what is happening!"}, {"owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "edited": false, "score": 0, "creation_date": 1454060463, "post_id": 35036951, "comment_id": 57884520, "body": "@OmarOthman hm, <a href=\"https://golang.org/pkg/time/#Time.Zone\" rel=\"nofollow noreferrer\">time.Time.Zone</a> function returns offset of the current zone from UTC (GMT basically). <code>loc, err := time.LoadLocation(&quot;MST&quot;); _, offset := Time.Now().In(loc).Zone()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1568, "user_id": 830320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb02d7afb172dbbfcf0e5d9829b544f0?s=128&d=identicon&r=PG", "display_name": "OmarOthman", "link": "https://stackoverflow.com/users/830320/omarothman"}, "edited": false, "score": 0, "creation_date": 1453983409, "post_id": 35042360, "comment_id": 57845158, "body": "I don&#39;t want the offset from the local time zone, I want it from GMT. Does that change anything? Could you please change your code to reflect this?"}, {"owner": {"reputation": 1568, "user_id": 830320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb02d7afb172dbbfcf0e5d9829b544f0?s=128&d=identicon&r=PG", "display_name": "OmarOthman", "link": "https://stackoverflow.com/users/830320/omarothman"}, "edited": false, "score": 0, "creation_date": 1453983436, "post_id": 35042360, "comment_id": 57845171, "body": "Also, could you please take a look at my last comment on the question itself?"}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1453910978, "last_edit_date": 1495541047, "creation_date": 1453910978, "answer_id": 35042360, "question_id": 35036951, "link": "https://stackoverflow.com/questions/35036951/timezone-to-offset/35042360#35042360", "title": "TimeZone to Offset?", "body": "<p>Here is the code, that calculates current offset between local and specified timezones. I agree with <a href=\"https://stackoverflow.com/questions/35036951/timezone-to-offset?noredirect=1#comment57799919_35036951\">Ainar-G's comment</a> that offset makes sense only with relation to specified moment in time:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    loc, err := time.LoadLocation(\"MST\")\n    if err != nil {\n        fmt.Println(err)\n    }\n\n    now := time.Now()\n    _, destOffset := now.In(loc).Zone()\n    _, localOffset := now.Zone()\n\n    fmt.Println(\"Offset:\", destOffset-localOffset)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14205, "user_id": 968244, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/I9DXX.jpg?s=128&g=1", "display_name": "isapir", "link": "https://stackoverflow.com/users/968244/isapir"}, "is_accepted": true, "score": 2, "last_activity_date": 1546391808, "last_edit_date": 1546391808, "creation_date": 1546391506, "answer_id": 54000206, "question_id": 35036951, "link": "https://stackoverflow.com/questions/35036951/timezone-to-offset/54000206#54000206", "title": "TimeZone to Offset?", "body": "<p>This should do the trick:</p>\n\n<pre><code>location, err := time.LoadLocation(\"MST\")\nif err != nil {\n    panic(err)\n}\n\ntzName, tzOffset := time.Now().In(location).Zone()\n\nfmt.Printf(\"name: [%v]\\toffset: [%v]\\n\", tzName, tzOffset)\n</code></pre>\n\n<p>Will print:</p>\n\n<blockquote>\n  <p>name: [MST]    offset: [-25200]</p>\n</blockquote>\n\n<p>Go Playground: <a href=\"https://play.golang.org/p/GVTgnpe1mB1\" rel=\"nofollow noreferrer\">https://play.golang.org/p/GVTgnpe1mB1</a></p>\n"}], "owner": {"reputation": 1568, "user_id": 830320, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb02d7afb172dbbfcf0e5d9829b544f0?s=128&d=identicon&r=PG", "display_name": "OmarOthman", "link": "https://stackoverflow.com/users/830320/omarothman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3184, "favorite_count": 0, "accepted_answer_id": 54000206, "answer_count": 2, "score": 2, "last_activity_date": 1546391808, "creation_date": 1453896468, "last_edit_date": 1453897929, "question_id": 35036951, "link": "https://stackoverflow.com/questions/35036951/timezone-to-offset", "title": "TimeZone to Offset?", "body": "<p>I want to get the offset in seconds from a specified time zone. That is exactly what <code>tz_offset()</code> in Perl's <a href=\"https://metacpan.org/source/GBARR/TimeDate-2.30/lib/Time/Zone.pm\" rel=\"nofollow\">Time::Zone</a> does: \"determines the offset from GMT in seconds of a specified timezone\".</p>\n\n<p>Is there already a way of doing this in Go? The input is a string that has the time zone name <em>and that's it</em>, but I know that Go has <code>LoadLocation()</code> in the <code>time</code> package, so <em>string => offset</em> or <em>location => offset</em> should be fine.</p>\n\n<p><strong>Input:</strong> \"MST\"</p>\n\n<p><strong>Output:</strong> -25200</p>\n"}, {"tags": ["time", "go", "timeout", "channel"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 0, "creation_date": 1453901478, "post_id": 35036653, "comment_id": 57801768, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/34894927/golang-timeouts-is-not-executed-with-channels\">golang timeouts is not executed with channels</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8129, "user_id": 1011695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00787a09c9726b2074f2bb786f88162c?s=128&d=identicon&r=PG", "display_name": "Everton", "link": "https://stackoverflow.com/users/1011695/everton"}, "edited": false, "score": 0, "creation_date": 1453896732, "post_id": 35036775, "comment_id": 57798439, "body": "Great! I was creating multiple channels! Thanks!"}], "tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 14, "last_activity_date": 1453895935, "creation_date": 1453895935, "answer_id": 35036775, "question_id": 35036653, "link": "https://stackoverflow.com/questions/35036653/why-doesnt-this-golang-code-to-select-among-multiple-time-after-channels-work/35036775#35036775", "title": "Why doesn&#39;t this Golang code to select among multiple time.After channels work?", "body": "<p>Because <code>time.After</code> is a function, so on every iteration it returns a new channel. If you want this channel to be the same for all iterations, you should save it before the loop:</p>\n\n<pre><code>timeout := time.After(3 * time.Second)\nfor {\n    select {\n    //...\n    case &lt;-timeout:\n        fmt.Printf(\"timeout\\n\")\n        return\n    }\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/muWLgTxpNf\">http://play.golang.org/p/muWLgTxpNf</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "is_accepted": false, "score": 5, "last_activity_date": 1453897322, "last_edit_date": 1495542878, "creation_date": 1453897322, "answer_id": 35037262, "question_id": 35036653, "link": "https://stackoverflow.com/questions/35036653/why-doesnt-this-golang-code-to-select-among-multiple-time-after-channels-work/35037262#35037262", "title": "Why doesn&#39;t this Golang code to select among multiple time.After channels work?", "body": "<p>Even <a href=\"https://stackoverflow.com/users/1892060/ainar-g\">@Ainar-G</a> has already provided the answer, another possibility is to use <code>time.Tick(1e9)</code> to generate a time tick on every second and then listen for <code>timeAfter</code>channel after the specified period.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    count := 0\n    timeTick := time.Tick(1 * time.Second)\n    timeAfter := time.After(5 * time.Second)\n\n    for {\n        select {\n        case &lt;-timeTick:\n            count++\n            fmt.Printf(\"tick %d\\n\", count)\n            if count &gt;= 5 {\n                fmt.Printf(\"ugh\\n\")\n                return\n            }\n        case &lt;-timeAfter:\n            fmt.Printf(\"timeout\\n\")\n            return\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8129, "user_id": 1011695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00787a09c9726b2074f2bb786f88162c?s=128&d=identicon&r=PG", "display_name": "Everton", "link": "https://stackoverflow.com/users/1011695/everton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2219, "favorite_count": 3, "accepted_answer_id": 35036775, "answer_count": 2, "score": 9, "last_activity_date": 1453897322, "creation_date": 1453895578, "last_edit_date": 1453896580, "question_id": 35036653, "link": "https://stackoverflow.com/questions/35036653/why-doesnt-this-golang-code-to-select-among-multiple-time-after-channels-work", "title": "Why doesn&#39;t this Golang code to select among multiple time.After channels work?", "body": "<p>Why doesn't this Golang code to select among multiple time.After channels work?</p>\n\n<p>See code below. The 'timeout' message is never issued. Why?</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    count := 0\n    for {\n        select {\n        case &lt;-time.After(1 * time.Second):\n            count++\n            fmt.Printf(\"tick %d\\n\", count)\n            if count &gt;= 5 {\n                fmt.Printf(\"ugh\\n\")\n                return\n            }\n        case &lt;-time.After(3 * time.Second):\n            fmt.Printf(\"timeout\\n\")\n            return\n        }\n    }\n}\n</code></pre>\n\n<p>Run it on Playground: <a href=\"http://play.golang.org/p/1gku-CWVAh\" rel=\"noreferrer\">http://play.golang.org/p/1gku-CWVAh</a></p>\n\n<p>Output:</p>\n\n<pre><code>tick 1\ntick 2\ntick 3\ntick 4\ntick 5\nugh\n</code></pre>\n"}, {"tags": ["go", "amazon-s3", "go-imagick"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453902373, "post_id": 35036200, "comment_id": 57802405, "body": "I don&#39;t see any image code in your example. Are you having trouble loading the image into imagick? Why are you downloading to a file if you don&#39;t want a file?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453904597, "post_id": 35036200, "comment_id": 57804106, "body": "What is an &quot;image magick object&quot;?"}, {"owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453918751, "post_id": 35036200, "comment_id": 57814353, "body": "@JimB If, I knew how to create the object from response stream.Why would i have asked the question. Anyways, I need to resize images on the fly. Since, Images are stored on S3. So, i need to download them on EC2 before that. So, to avoid the disk io i want to keep it in memory. Hence, asked this question how to create an image magick object from response stream in go lang. In the end why you downvoted my question?"}, {"owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453918920, "post_id": 35036200, "comment_id": 57814459, "body": "@Volker It&#39;s a library for image processing and it&#39;s wrapper in golang is called imagick. I have also provided the link in the question. By the way i didn&#39;t understand why you downvoted my question."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453919118, "post_id": 35036200, "comment_id": 57814602, "body": "ImageMagick doesn&#39;t operate on &quot;streams&quot;, but it does refer to an image in memory as a &quot;blob&quot;. To read an image from a <code>[]byte</code> you use <code>ReadImageBlob</code>."}, {"owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453919235, "post_id": 35036200, "comment_id": 57814700, "body": "@JimB I figured that out that there is an ReadImageBlob function in the library. But why would be the syntax for that."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453921564, "post_id": 35036200, "comment_id": 57816072, "body": "&quot;What&quot; would be the syntax? Instead of <code>ReadImage(file)</code>, you would use <code>ReadImageBlob(blob)</code>. Or, are you asking what to do after that? Or, How to get a new <code>[]byte</code> from the image without saving a file (<code>GetImageBlob</code>)? Or, just how to download into a <code>[]byte</code> (which has nothing to do with imagick)."}, {"owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453922295, "post_id": 35036200, "comment_id": 57816483, "body": "@JimB I want to know how to download an image into <code>[ ]byte</code> and after that how do i create image magick object from the <code>[ ] byte</code>. So that i can do operations like cropping, resizing etc."}], "answers": [{"comments": [{"owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "edited": false, "score": 0, "creation_date": 1453963022, "post_id": 35047110, "comment_id": 57832560, "body": "Thanking you very much"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 2, "last_activity_date": 1453925519, "creation_date": 1453925519, "answer_id": 35047110, "question_id": 35036200, "link": "https://stackoverflow.com/questions/35036200/create-image-magick-object-from-response-stream-in-go-lang/35047110#35047110", "title": "Create Image magick object from response stream in go lang", "body": "<p>You only need a DownloadManager if you want to download large files more efficiently. A DownloadManager requires a <code>WriterAt</code> (generally an <code>os.File</code>), which you would have to implement yourself over a <code>[]byte</code> or use a file in memory.</p>\n\n<p>If you fetch the object directly, you can read it into a <code>[]byte</code> which can be passed to <code>ReadImageBlob</code>:</p>\n\n<pre><code>out, err := s3Client.GetObject(&amp;s3.GetObjectInput{\n    Bucket: aws.String(BUCKET),\n    Key:    aws.String(KEY),\n})\nif err != nil {\n    log.Fatal(err)\n}\n\nimg, err := ioutil.ReadAll(out.Body)\nif err != nil {\n    log.Fatal(err)\n}\n\nmw := imagick.NewMagickWand()\ndefer mw.Destroy()\n\nerr = mw.ReadImageBlob(img)\nif err != nil {\n    log.Fatal(err)\n}\n...\n</code></pre>\n"}], "owner": {"reputation": 4133, "user_id": 2135526, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/75e764233b7968d0f9fb8e04f31230cf?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/2135526/naresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 1, "accepted_answer_id": 35047110, "answer_count": 1, "score": 0, "last_activity_date": 1453925519, "creation_date": 1453894369, "last_edit_date": 1453921211, "question_id": 35036200, "link": "https://stackoverflow.com/questions/35036200/create-image-magick-object-from-response-stream-in-go-lang", "title": "Create Image magick object from response stream in go lang", "body": "<p>I am using the following code to download and upload the images from <code>Amazon S3</code>. Now, after downloading the image i want to resize it using the <a href=\"https://github.com/gographics/imagick#build-tags\" rel=\"nofollow\">imagick library</a>, but without writing it on to the disk. So, how do i create the image magick object directly from response stream which i will get from S3 and upload the same on Amazon S3. Could you please suggest the changes for the same in below code? \nAlso, How do i change it to a http handler which takes the value of key from query string? </p>\n\n<p>I have commented out my code of image magick object reason being i am sure how to write it. </p>\n\n<pre><code>func main() {\n    file, err := os.Create(\"download_file\")\n\n        if err != nil {\n            log.Fatal(\"Failed to create file\", err)\n        }\n        defer file.Close()\n\n        downloader := s3manager.NewDownloader(session.New(&amp;aws.Config{Region: aws.String(REGION_NAME)}))\n        numBytes, err := downloader.Download(file,\n            &amp;s3.GetObjectInput{\n            Bucket: aws.String(BUCKET_NAME),\n            Key:    aws.String(KEY),\n            })\n        if err != nil {\n            fmt.Println(\"Failed to download file\", err)\n            return\n        }\n\n        fmt.Println(\"Downloaded file\", file.Name(), numBytes, \"bytes\")                   \n\n     //mw := imagick.NewMagickWand()\n     //   defer mw.Destroy()\n\n     //  err = mw.ReadImage(file)\n     //  if err != nil {\n     //      panic(err)\n     //   }  \n        // using io.Pipe read/writer file contents.\n        reader, writer := io.Pipe()\n\n        go func() {\n        io.Copy(writer, file)\n\n        file.Close()\n        writer.Close()\n        }()\n        uploader := s3manager.NewUploader(session.New(&amp;aws.Config{Region: aws.String(REGION_NAME)}))\n        result, err := uploader.Upload(&amp;s3manager.UploadInput{\n        Body:   reader,\n        Bucket: aws.String(BUCKET),\n        Key:    aws.String(KEY),\n        })\n\n        if err != nil {\n        log.Fatalln(\"Failed to upload\", err)\n        }\n\n        log.Println(\"Successfully uploaded to\", result.Location)\n            fmt.Println(\"code ran successfully\") \n}\n</code></pre>\n"}, {"tags": ["go", "kubernetes"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453894501, "post_id": 35035464, "comment_id": 57796836, "body": "try the yaml.v2 library and marshal with it, see if the output is compliant with kubernetes. <a href=\"https://github.com/go-yaml/yaml\" rel=\"nofollow noreferrer\">github.com/go-yaml/yaml</a>"}, {"owner": {"reputation": 1913, "user_id": 32713, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d49905ba52b7da99b00763b0d5087fb?s=128&d=identicon&r=PG", "display_name": "Ruben Vermeersch", "link": "https://stackoverflow.com/users/32713/ruben-vermeersch"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453896332, "post_id": 35035464, "comment_id": 57798113, "body": "That won&#39;t work, Kubernetes does not have yaml annotations. They seem to serialize to JSON and then convert to YAML, but I haven&#39;t found the right APIs yet to wrap it all in the correct envelope (including apiVersion and kind fields)."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453902289, "post_id": 35035464, "comment_id": 57802343, "body": "it&#39;s ugly but you might want to try to generate json and use python to properly format your json as yaml"}], "answers": [{"comments": [{"owner": {"reputation": 1337, "user_id": 1424706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17270c1c7ec7a9b8f9e474dedbcaa5d9?s=128&d=identicon&r=PG", "display_name": "jqualls", "link": "https://stackoverflow.com/users/1424706/jqualls"}, "edited": false, "score": 0, "creation_date": 1510456005, "post_id": 35041140, "comment_id": 81440499, "body": "As a side note, this may be unnecessary if you&#39;re not planning on maintaining these manually. Kubernetes manifests can be defined in json or yaml. The file extension .yaml, .yml, and .json can be used. So you could just marshal to JSON and write it to a <code>.json</code> file if you&#39;re feeding the output to <code>kubectl</code>  <a href=\"https://kubernetes.io/docs/user-guide/kubectl-cheatsheet/\" rel=\"nofollow noreferrer\">kubernetes.io/docs/user-guide/kubectl-cheatsheet</a>"}], "tags": [], "owner": {"reputation": 1913, "user_id": 32713, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d49905ba52b7da99b00763b0d5087fb?s=128&d=identicon&r=PG", "display_name": "Ruben Vermeersch", "link": "https://stackoverflow.com/users/32713/ruben-vermeersch"}, "is_accepted": true, "score": 2, "last_activity_date": 1453907794, "creation_date": 1453907794, "answer_id": 35041140, "question_id": 35035464, "link": "https://stackoverflow.com/questions/35035464/generate-yaml-manifest-from-kubernetes-types/35041140#35041140", "title": "Generate YAML manifest from Kubernetes types", "body": "<p>Found it, for future reference, here's what you might want to do:</p>\n\n<pre><code>package main\n\nimport (\n    \"os\"\n\n    \"k8s.io/kubernetes/pkg/api/unversioned\"\n    \"k8s.io/kubernetes/pkg/api/v1\"\n    \"k8s.io/kubernetes/pkg/runtime/serializer/json\"\n)\n\nfunc main() {\n    ns := &amp;v1.Namespace{\n        TypeMeta: unversioned.TypeMeta{\n            Kind:       \"Namespace\",\n            APIVersion: \"v1\",\n        },\n\n        ObjectMeta: v1.ObjectMeta{\n            Name: \"test\",\n        },\n    }\n\n    e := json.NewYAMLSerializer(json.DefaultMetaFactory, nil, nil)\n\n    err := e.EncodeToStream(ns, os.Stdout)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n\n<p>This might not be the best practice (better suggestions welcome), but it does the job.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7597379, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fp32BUdn-UM/AAAAAAAAAAI/AAAAAAAAABQ/dsFvWVZ8Qz0/photo.jpg?sz=128", "display_name": "tianfeiyu", "link": "https://stackoverflow.com/users/7597379/tianfeiyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1560924800, "creation_date": 1560924800, "answer_id": 56661094, "question_id": 35035464, "link": "https://stackoverflow.com/questions/35035464/generate-yaml-manifest-from-kubernetes-types/56661094#56661094", "title": "Generate YAML manifest from Kubernetes types", "body": "<pre><code>package main\n\nimport (\n    \"os\"\n\n    v1 \"k8s.io/api/core/v1\"\n    metav1 \"k8s.io/apimachinery/pkg/apis/meta/v1\"\n    \"k8s.io/apimachinery/pkg/runtime/serializer/json\"\n)\n\nfunc main() {\n    ns := &amp;v1.Namespace{\n        TypeMeta: metav1.TypeMeta{\n            Kind:       \"Namespace\",\n            APIVersion: \"v1\",\n        },\n\n        ObjectMeta: metav1.ObjectMeta{\n            Name: \"test\",\n        },\n    }\n\n    e := json.NewYAMLSerializer(json.DefaultMetaFactory, nil, nil)\n\n    //err := e.EncodeToStream(ns, os.Stdout)\n    err := e.Encode(ns, os.Stdout)\n    if err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11993700, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ph8FQ5Uyhbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdLdQlZ_ukjO4joVQx2NSobtel7gQ/photo.jpg?sz=128", "display_name": "Piotr The First", "link": "https://stackoverflow.com/users/11993700/piotr-the-first"}, "is_accepted": false, "score": 2, "last_activity_date": 1567073216, "creation_date": 1567073216, "answer_id": 57707828, "question_id": 35035464, "link": "https://stackoverflow.com/questions/35035464/generate-yaml-manifest-from-kubernetes-types/57707828#57707828", "title": "Generate YAML manifest from Kubernetes types", "body": "<p>Their API has updated, so this is how it looks like:</p>\n\n<pre><code>import k8sJson \"k8s.io/apimachinery/pkg/runtime/serializer/json\"\n...\nserializer := k8sJson.NewSerializerWithOptions(\n    k8sJson.DefaultMetaFactory, nil, nil,\n    k8sJson.SerializerOptions{\n        Yaml:   true,\n        Pretty: true,\n        Strict: true,\n    },\n)\n</code></pre>\n"}], "owner": {"reputation": 1913, "user_id": 32713, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9d49905ba52b7da99b00763b0d5087fb?s=128&d=identicon&r=PG", "display_name": "Ruben Vermeersch", "link": "https://stackoverflow.com/users/32713/ruben-vermeersch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2495, "favorite_count": 2, "accepted_answer_id": 35041140, "answer_count": 3, "score": 3, "last_activity_date": 1567073216, "creation_date": 1453892385, "question_id": 35035464, "link": "https://stackoverflow.com/questions/35035464/generate-yaml-manifest-from-kubernetes-types", "title": "Generate YAML manifest from Kubernetes types", "body": "<p>I'm looking into writing a tool that generates Kubernetes definitions programatically for our project.</p>\n\n<p>I've found that the API types in Kubernetes can be found in <code>k8s.io/kubernetes/pkg/api</code>. I would like to output YAML based on these types.</p>\n\n<p>Given an object like this:</p>\n\n<pre><code>ns := &amp;api.Namespace{\n    ObjectMeta: api.ObjectMeta{\n        Name: \"test\",\n    },\n}\n</code></pre>\n\n<p>What's the best way to generate the YAML output expected by <code>kubectl create</code>?</p>\n"}, {"tags": ["templates", "go", "struct"], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 352842, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/dfa1eed6ce2f228613cba4a39e79f093?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/352842/lars"}, "edited": false, "score": 0, "creation_date": 1453894688, "post_id": 35034399, "comment_id": 57796969, "body": "This works too, but the accepted answer ended up fitting better with the rest of my code."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 874, "user_id": 352842, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/dfa1eed6ce2f228613cba4a39e79f093?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/352842/lars"}, "edited": false, "score": 0, "creation_date": 1453902228, "post_id": 35034399, "comment_id": 57802291, "body": "@Lars I agree it&#39;s more elegant"}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": false, "score": 2, "last_activity_date": 1453889479, "creation_date": 1453889479, "answer_id": 35034399, "question_id": 35034039, "link": "https://stackoverflow.com/questions/35034039/how-to-update-field-value-in-a-go-template/35034399#35034399", "title": "How to update field value in a Go template", "body": "<p>One solution is to make the <code>plus1</code> function a closure that acts directly on the value of the <code>codec</code>:</p>\n\n<pre><code>// first create a codec instance\nc := codec {a, 0}\n\n// now define the function as a closure with a reference to c\nfns := template.FuncMap{\n  \"plus1\": func() int {\n      c.Count++\n      return c.Count\n   },\n}\n\n// now we don't need to pass anything to it in the template\nt := template.Must(template.New(\"abc\").Funcs(fns).Parse(`{{$l := len .Names}}{{range $k, $v := .Names}}{{if ne (plus1) $l}}{{$k}} {{$v}} {{end}}{{end}}.`))\n</code></pre>\n\n<p>The output was:</p>\n\n<pre><code>one 1 three 3\n</code></pre>\n\n<p>which I'm guessing is what you were aiming for? And the value is retained in <code>c</code> at the end of execution.</p>\n"}, {"comments": [{"owner": {"reputation": 874, "user_id": 352842, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/dfa1eed6ce2f228613cba4a39e79f093?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/352842/lars"}, "edited": false, "score": 0, "creation_date": 1453894624, "post_id": 35035750, "comment_id": 57796921, "body": "This works well, but too bad the method has to return something. I only really wanted the counter effect. I ened up running the method as an empty if statement to get around it."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 874, "user_id": 352842, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/dfa1eed6ce2f228613cba4a39e79f093?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/352842/lars"}, "edited": false, "score": 1, "creation_date": 1453894820, "post_id": 35035750, "comment_id": 57797067, "body": "@Lars You can define the method to return <code>string</code>, and simply return <code>&quot;&quot;</code> so it won&#39;t have any output."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 1, "last_activity_date": 1453894879, "last_edit_date": 1453894879, "creation_date": 1453893202, "answer_id": 35035750, "question_id": 35034039, "link": "https://stackoverflow.com/questions/35034039/how-to-update-field-value-in-a-go-template/35035750#35035750", "title": "How to update field value in a Go template", "body": "<p>You can simply define a method on your struct:</p>\n\n<pre><code>type codec struct {\n    Names map[string]string\n    Count int\n}\n\nfunc (c *codec) IncAndGet() int {\n    c.Count++\n    return c.Count\n}\n</code></pre>\n\n<p>Calling it from a template:</p>\n\n<pre><code>c := &amp;codec{Count: 2}\nt := template.Must(template.New(\"\").Parse(`{{.IncAndGet}} {{.IncAndGet}}`))\nt.Execute(os.Stdout, c)\n</code></pre>\n\n<p>Output (try it on the <kbd><a href=\"http://play.golang.org/p/V25PyArkSn\" rel=\"nofollow\">Go Playground</a></kbd>):</p>\n\n<pre><code>3 4\n</code></pre>\n\n<p>Note that for this to work, the method needs a pointer receiver (<code>func (c *codec) IncAndGet()</code>) and you have to pass a pointer to <code>Template.Execute()</code> (<code>c</code> is a pointer in our example: <code>c := &amp;codec{Count: 2}</code>).</p>\n\n<p>If you don't want any result just counting, define it to have a <code>string</code> return type and return the empty <code>string</code> <code>\"\"</code>:</p>\n\n<pre><code>func (c *codec) Inc() string {\n    c.Count++\n    return \"\"\n}\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 352842, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/dfa1eed6ce2f228613cba4a39e79f093?s=128&d=identicon&r=PG", "display_name": "Lars", "link": "https://stackoverflow.com/users/352842/lars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 35035750, "answer_count": 2, "score": 1, "last_activity_date": 1453894879, "creation_date": 1453888664, "last_edit_date": 1453894198, "question_id": 35034039, "link": "https://stackoverflow.com/questions/35034039/how-to-update-field-value-in-a-go-template", "title": "How to update field value in a Go template", "body": "<p>I have the following case, where I am passing a struct containing a map to a template:</p>\n\n<pre><code>package main\n\nimport (\n    \"log\"\n    \"os\"\n    \"text/template\"\n)\n\nvar fns = template.FuncMap{\n    \"plus1\": func(x int) int {\n        return x + 1\n    },\n}\n\ntype codec struct {\n    Names map[string]string\n    Count int\n}\n\nfunc main() {\n    a := map[string]string{\"one\": \"1\",\n        \"two\":   \"2\",\n        \"three\": \"3\"}\n\n    t := template.Must(template.New(\"abc\").Funcs(fns).Parse(`{{$l := len .Names}}{{range $k, $v := .Names}}{{if ne (plus1 $.Count) $l}}{{$k}} {{$v}} {{end}}{{end}}.`))\n\n    err := t.Execute(os.Stdout, codec{a, 0})\n    if err != nil {\n        log.Println(err)\n    }\n}\n</code></pre>\n\n<p>I would like to increment the <code>Count</code> field of <code>codec</code> so that I can know how many items of the map I've seen.</p>\n"}, {"tags": ["arrays", "go"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 4, "last_activity_date": 1453885186, "last_edit_date": 1453885186, "creation_date": 1453881334, "answer_id": 35031615, "question_id": 35031502, "link": "https://stackoverflow.com/questions/35031502/golang-invalid-array-bound/35031615#35031615", "title": "Golang- invalid array bound", "body": "<p><a href=\"https://golang.org/ref/spec#Array_types\" rel=\"nofollow\">Spec: Array types:</a></p>\n\n<blockquote>\n  <p>The length is part of the array's type; it must evaluate to a non-negative <a href=\"https://golang.org/ref/spec#Constants\" rel=\"nofollow\">constant</a> representable by a value of type <code>int</code>. </p>\n</blockquote>\n\n<p>Your length in <code>[s]float64</code> is not a constant.</p>\n\n<p>Use a <a href=\"https://golang.org/ref/spec#Slice_types\" rel=\"nofollow\">slice</a> instead of an array type, and know that you have to use integer type for the length, e.g.:</p>\n\n<pre><code>var mark []float64 = make([]float64, int(s))\n</code></pre>\n\n<p>Or short:</p>\n\n<pre><code>mark := make([]float64, int(s))\n</code></pre>\n\n<p>Going forward, always use integer types (e.g. <code>int</code>) for indices. You can declare it in <code>for</code> like:</p>\n\n<pre><code>for i := 0; i &lt; len(mark); i++ {\n    fmt.Scanf(\"%f\", &amp;mark[i])\n}\n</code></pre>\n\n<p>Or you can even use <code>for ... range</code> to range over the indices of the slice:</p>\n\n<pre><code>for i := range mark {\n    fmt.Scanf(\"%f\", &amp;mark[i])\n}\n</code></pre>\n\n<p>I would also use <code>int</code> type everywhere: the number of subjects and marks themselves do not have a meaning if they are non integers.</p>\n\n<p>Also <code>fmt.Scanf()</code> does not consume newline, subsequent <code>fmt.Scanf()</code> call will return immediately with an error.</p>\n\n<p>You should also check errors or successfully parsed values, both which are returned by the <code>fmt.Scan*()</code> functions.</p>\n\n<p>Also you don't have to loop the slice twice, you can calculate total (the sum) in the first.</p>\n\n<p>Going even more forward, you don't even have to store the marks in the slice, you could just ask the entered number of marks, calculate sum on the fly and print the average.</p>\n\n<p>Something like this:</p>\n\n<pre><code>var n, total, mark int\nfmt.Println(\"Number of subjects:\")\nfmt.Scanln(&amp;n)\nfor i := 0; i &lt; n; i++ {\n    fmt.Scanln(&amp;mark)\n    total += mark\n}\nfmt.Println(\"Average:\", float64(total)/float64(n))\n</code></pre>\n\n<p>If you were to add all the required checks, it could look like this:</p>\n\n<pre><code>var n, total, mark int\nfmt.Print(\"Number of subjects: \")\nif _, err := fmt.Scanln(&amp;n); err != nil || n &lt;= 0 {\n    fmt.Println(\"Wrong number!\")\n    return\n}\nfor i := 0; i &lt; n; i++ {\n    fmt.Printf(\"Enter %d. mark: \", i+1)\n    if _, err := fmt.Scanln(&amp;mark); err != nil || mark &lt; 1 || mark &gt; 5 {\n        fmt.Println(\"Wrong mark, enter it again!\")\n        fmt.Scanln()\n        i-- // We're gonna re-scan the same mark\n    } else {\n        total += mark\n    }\n}\nfmt.Println(\"Average:\", float64(total)/float64(n))\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5845458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f52f739e00a172ae0c0b822ea92e657?s=128&d=identicon&r=PG&f=1", "display_name": "DarkNinePenguin", "link": "https://stackoverflow.com/users/5845458/darkninepenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3327, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1453894260, "creation_date": 1453880975, "last_edit_date": 1453894260, "question_id": 35031502, "link": "https://stackoverflow.com/questions/35031502/golang-invalid-array-bound", "title": "Golang- invalid array bound", "body": "<p>When I run the code below I get the error:</p>\n\n<pre><code>school_mark.go:8: invalid array bound s\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main(){\n   var subj float64\n   fmt.Println(\"Enter how much you have subjects inn school: \")\n   fmt.Scanf(\"%f\", &amp;subj)\n   s := subj\n   var mark [s]float64\n   var a float64\n   for a = 0; a&lt;s; a++{\n     fmt.Scanf(\"%f\", &amp;mark)\n   }\n   var total float64\n   var i float64\n   for i= 0; i&lt;subj; i++{\n       total += mark[i]\n   }\n       fmt.Println(total/subj)    \n}\n</code></pre>\n\n<p>What is the problem?</p>\n"}, {"tags": ["http", "file-upload", "go", "server"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1453872318, "post_id": 35029311, "comment_id": 57784943, "body": "Secure in what way? Make sure no man in the middle tempers with the data? The uploader can upload anonymously? Etc. pp. Or Are you afraid of DDoS attacks against your server? Malicious data? You must provide much more details."}, {"owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453874478, "post_id": 35029311, "comment_id": 57785735, "body": "I have updated the content."}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 1, "creation_date": 1453875702, "post_id": 35029311, "comment_id": 57786186, "body": "the position is controlled by server side, not client side, at least."}], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 2, "last_activity_date": 1453878394, "last_edit_date": 1453878394, "creation_date": 1453876898, "answer_id": 35030421, "question_id": 35029311, "link": "https://stackoverflow.com/questions/35029311/what-is-the-most-secure-way-to-upload-a-file-receiving-from-browserclient/35030421#35030421", "title": "What is the most secure way to upload a file receiving from browser(client)?", "body": "<p>Your server receives a file (e.g. via a form post), and your server code is responsible to save it to a folder of the <strong>server's</strong> choice.</p>\n\n<p>The client has no control over where the server will save it. The client <em>may</em> arbitrarily recommend a folder e.g. with another form field (or a subfolder relative to some agreed or arbitrary root), but the client is not in a position to enforce anything.</p>\n\n<p>One thing you should be aware of that if you acquire the posted file name at server side, you should not use it as is, because the client may send a file name which contains folder separators (e.g. <code>'/'</code> and it may contain sequences to denote parent folders (e.g. <code>\"../..\"</code>).</p>\n\n<p>What you should do (<strong>most secure</strong>) is to generate a name at the server side. Or if you want to use the name recommended by the client, only use the last part of the sent file name (in case it contains folder names too). Also if you use the name sent by the client, you should check if file already exists to prevent independent clients to overwrite each other's files. Or best would be to use a folder name unique to the client, that way there is no chance to overwrite each other's files.</p>\n\n<p>You may use the <a href=\"https://golang.org/pkg/path/\" rel=\"nofollow\"><code>path</code></a> package to check/manipulate file names and paths. For example <a href=\"https://golang.org/pkg/path/#Base\" rel=\"nofollow\"><code>path.Base()</code></a> returns only the last part (the file name) of a path. And you may use <a href=\"https://golang.org/pkg/path/#Join\" rel=\"nofollow\"><code>path.Join()</code></a> to concatenate folders and file name.</p>\n\n<p>For example if a client uploads a file via a form post, you may handle it at server side like this:</p>\n\n<pre><code>func fileHandler(w http.ResponseWriter, r *http.Request) {\n    f, fh, err := r.FormFile(\"file\")\n    if err != nil {\n        // File not submitted? Handle error \n        http.Error(w, \"You must upload a file\", http.StatusBadRequest)\n        return\n    }\n\n    // Save it:\n    // Here I use username as a unique client identifier\n    saveName := path.Join(\"path/to/uploaded/files/\", username, path.Base(fh.Filename))\n    savef, err := os.Create(saveName)\n    if err != nil {\n        // Failed to create file on server, handle err\n        http.Error(w, \"Failed to save file\", http.StatusInternalServerError)\n        return\n    }\n    defer savef.Close()\n\n    io.Copy(savef, f)\n    fmt.Fprintln(w, \"File saved successfully.\")\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1453878394, "creation_date": 1453871386, "last_edit_date": 1453877713, "question_id": 35029311, "link": "https://stackoverflow.com/questions/35029311/what-is-the-most-secure-way-to-upload-a-file-receiving-from-browserclient", "title": "What is the most secure way to upload a file receiving from browser(client)?", "body": "<p>I am writing a web app using Golang, and I am writing the file upload part now, but I don't know what is the most secure way to do it.</p>\n\n<p>Can anyone give me some information? Thanks.</p>\n\n<p><strong>Edit:</strong> I mean how to prevent users upload their file to the position other than the position I want. User may modify the filename to cause it to be uploaded to a specific directory. Are there any way to prevent it?</p>\n\n<p>And I want to ask if the hacking technique like web shell workable to the web app written in Golang? I think is not, but I want to check if my thinking is right.</p>\n"}, {"tags": ["python", "go"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1453860233, "post_id": 35027519, "comment_id": 57781396, "body": "Perhaps make <code>rfsvmchurn.py</code> an argument instead of including it as part of <code>cmd</code>."}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1453860813, "post_id": 35027519, "comment_id": 57781586, "body": "Tried rfsvmchurn.py as argument, it also gives the same error"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1453860870, "post_id": 35027519, "comment_id": 57781604, "body": "The <i>exact</i> same error?"}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1453861325, "post_id": 35027519, "comment_id": 57781741, "body": "Python Execution Error : exec: &quot;python &quot;: executable file not found in $PATH"}, {"owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "edited": false, "score": 0, "creation_date": 1453862210, "post_id": 35027519, "comment_id": 57781980, "body": "Try using the full absolute path to the python script. If that works then the python script is not in a place that your program can find it (either in the PATH as the error says or your program&#39;s working directory)."}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453863093, "post_id": 35027519, "comment_id": 57782229, "body": "Also tried giving path like /usr/bin/python. But getting the same error"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1453863719, "post_id": 35027519, "comment_id": 57782419, "body": "Is there really a space inside the quotes in the error message (<code>&quot;python &quot;</code>)?  If so, make sure <code>cmd</code> is just <code>&quot;python&quot;</code> (no spaces)."}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453875806, "post_id": 35027519, "comment_id": 57786226, "body": "Yes removed spaces, but now getting this error Python Execution Error : exit status 1"}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453879250, "post_id": 35027519, "comment_id": 57787646, "body": "Thanks, its working. the exit status 1 is due to issue in python file"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453861348, "post_id": 35027668, "comment_id": 57781747, "body": "Getting same error   Python Execution Error : exec: &quot;python rfsvmchurn.py&quot;: executable file not found in $PATH"}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "reply_to_user": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453864351, "post_id": 35027668, "comment_id": 57782618, "body": "Try <code>.&#47;rfsvmchurn.py</code> instead?"}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "reply_to_user": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453864386, "post_id": 35027668, "comment_id": 57782633, "body": "Wait, actually, are you sure you passed &quot;python&quot; and &quot;rfsvmchurn.py&quot; as separate arguments? That error makes it sound like you had them as the same string."}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453875597, "post_id": 35027668, "comment_id": 57786148, "body": "Yes I tried like that, and now I am getting this error Python Execution Error : exit status 1"}, {"owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "edited": false, "score": 0, "creation_date": 1453879224, "post_id": 35027668, "comment_id": 57787636, "body": "Thanks, its working. the exit status 1 is due to issue in python file"}], "tags": [], "owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "is_accepted": false, "score": 1, "last_activity_date": 1453860935, "creation_date": 1453860935, "answer_id": 35027668, "question_id": 35027519, "link": "https://stackoverflow.com/questions/35027519/trying-to-exec-python-in-golang-using-exec-command/35027668#35027668", "title": "Trying to exec python in golang using exec.Command(", "body": "<p>Your issue is probably that you're passing flags and their arguments as a single string. You should instead do:</p>\n\n<pre><code>func execPython(fPath, colName, srv  string) (){\n    fmt.Println(\"Inside execPython\")\n    arg0 := \"-fp \" + fPath\n    arg1 := \"-srv \" + srv\n    arg2 := \"-col \" + colName\n    cmd := exec.Command(\"python\", \"rfsvmchurn.py\", \"-fp\", fPath, \"-srv\", srv, \"-col\", colName)\n    if err := cmd.Run(); err != nil {\n        fmt.Println(\"Python Execution Error :\",err)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5775232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470d0463b80960c71b631f7a5bc6df84?s=128&d=identicon&r=PG&f=1", "display_name": "ssenthil", "link": "https://stackoverflow.com/users/5775232/ssenthil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1453860935, "creation_date": 1453859955, "question_id": 35027519, "link": "https://stackoverflow.com/questions/35027519/trying-to-exec-python-in-golang-using-exec-command", "title": "Trying to exec python in golang using exec.Command(", "body": "<pre><code>func execPython(fPath, colName, srv  string) (){\nfmt.Println(\"Inside execPython\")\ncmd:= \"python rfsvmchurn.py\"\narg0 := \"-fp \" + fPath\narg1 := \"-srv \" + srv\narg2 := \"-col \" + colName\nif err := exec.Command(cmd, arg0, arg1, arg2).Run(); err != nil {\n    fmt.Println(\"Python Execution Error :\",err)\n}\n</code></pre>\n\n<p>}</p>\n\n<p>getting error \n  Python Execution Error : exec: \"python rfsvmchurn.py\": executable file not found in $PATH</p>\n"}, {"tags": ["go", "constants"], "answers": [{"tags": [], "owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "is_accepted": false, "score": 3, "last_activity_date": 1453855846, "creation_date": 1453855846, "answer_id": 35026885, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang/35026885#35026885", "title": "Runtime Const in Golang", "body": "<p>No, it is not possible. constants can only hold strings and numbers known at compile time.</p>\n"}, {"tags": [], "owner": {"reputation": 26448, "user_id": 10322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa46a3814b72439b1d2efa8f7c9162c2?s=128&d=identicon&r=PG", "display_name": "ctcherry", "link": "https://stackoverflow.com/users/10322/ctcherry"}, "is_accepted": true, "score": 11, "last_activity_date": 1453855863, "creation_date": 1453855863, "answer_id": 35026887, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang/35026887#35026887", "title": "Runtime Const in Golang", "body": "<p>Constants in go are set at compile time, see the relevant section in the docs here: <a href=\"https://golang.org/doc/effective_go.html#constants\" rel=\"noreferrer\">https://golang.org/doc/effective_go.html#constants</a></p>\n\n<blockquote>\n  <p>Constants in Go are just that\u2014constant. They are created at compile time, even when defined as locals in functions, and can only be numbers, characters (runes), strings or booleans. Because of the compile-time restriction, the expressions that define them must be constant expressions, evaluatable by the compiler. For instance, 1&lt;&lt;3 is a constant expression, while math.Sin(math.Pi/4) is not because the function call to math.Sin needs to happen at run time.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 4, "last_activity_date": 1454271568, "last_edit_date": 1454271568, "creation_date": 1453907961, "answer_id": 35041197, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang/35041197#35041197", "title": "Runtime Const in Golang", "body": "<p>As stated, there are no constructs supporting runtime constants in Go backed by the language spec or the Go runtime.</p>\n\n<p>You can simpulate runtime constants though with unexported fields and with a \"getter\" method, e.g.:</p>\n\n<pre><code>package wrapper\n\ntype Immutable struct {\n    value int\n}\n\nfunc (i Immutable) Get() int { // You may choose between pointer or value receiver\n    return i.value\n}\n\nfunc New(value int) Immutable {\n    return Immutable{value}\n}\n</code></pre>\n\n<p>You can create values of <code>Immutable</code> with the <code>New()</code> constructor-like function, and <em>no one*</em> outside of package <code>wrapper</code> will be able to modify the wrapped <code>int</code> value (<code>Immutable.value</code>).</p>\n\n<p>(*Note: <em>no one</em> means no one who is not touching package <a href=\"https://golang.org/pkg/unsafe/\" rel=\"nofollow\"><code>unsafe</code></a>, but that doesn't count. Even in Java you can change values of <code>final</code> attributes using Java reflection.)</p>\n"}, {"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 0, "last_activity_date": 1453933546, "creation_date": 1453933546, "answer_id": 35049294, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang/35049294#35049294", "title": "Runtime Const in Golang", "body": "<p>One way to do it is using an unexported struct and define functions that use that unexported type specifically.</p>\n\n<pre><code>// ./vendor/structstuff/structstuff.go\npackage structstuff\n\ntype constVal struct {\n    val int\n}\n\nfunc (c *constVal) Value() int {\n    return c.val\n}\n\nvar ExportedVal constVal\n\nfunc init() {\n    ExportedVal.val = 43\n}\n\nfunc CallFunc(c constVal) int {\n    return c.val\n}\n\n// ./main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"structstuff\"\n)\n\nfunc main() {\n    fmt.Println(structstuff.ExportedVal.Value())\n    fmt.Println(structstuff.CallFunc(structstuff.ExportedVal))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 2488609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H9dop.jpg?s=128&g=1", "display_name": "Abdelaziz Elrashed", "link": "https://stackoverflow.com/users/2488609/abdelaziz-elrashed"}, "is_accepted": false, "score": 0, "last_activity_date": 1610879024, "creation_date": 1610879024, "answer_id": 65759483, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang/65759483#65759483", "title": "Runtime Const in Golang", "body": "<p>You can use an anonymous function at Runtime to act just like constants as follows:</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n)\n\nfunc main() {\n    \n    // Define a Runtime constant\n    \n    pi := func() float64 { return 3.141592653589793238 }\n    \n    // Use the constant\n    \n    x := pi() * 123\n    \n    // Print the result\n    \n    fmt.Println(&quot;X = &quot;, x)\n}\n</code></pre>\n<p><a href=\"https://play.golang.org/p/Q0dGfwL_Y4P\" rel=\"nofollow noreferrer\">https://play.golang.org/p/Q0dGfwL_Y4P</a></p>\n"}], "owner": {"reputation": 631, "user_id": 763405, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/41dadac86a35b6500f1c8626f6ccc9e1?s=128&d=identicon&r=PG", "display_name": "Ryan", "link": "https://stackoverflow.com/users/763405/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4948, "favorite_count": 0, "accepted_answer_id": 35026887, "answer_count": 5, "score": 8, "last_activity_date": 1610879024, "creation_date": 1453855402, "question_id": 35026810, "link": "https://stackoverflow.com/questions/35026810/runtime-const-in-golang", "title": "Runtime Const in Golang", "body": "<p>In some languages, such as Java and C++, constants can be created and then assigned their value during the constructor (and then not changed after that).  Is there any way to do this in Golang so that a constant whose value won't be known until runtime can be created?  Thanks in advance!</p>\n"}, {"tags": ["go", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453851662, "post_id": 35025338, "comment_id": 57778841, "body": "You probably have a memory leak, but it&#39;s hard to tell from that one function. If you want to fight symptoms, maybe add swap to your machine. Also analyze your code for potential memory leaks. What hardware are you running on?"}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "reply_to_user": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453852166, "post_id": 35025338, "comment_id": 57779005, "body": "@Riscie the swapiness is good enough for the swap no.  What else would be needed to find the memory leak?"}, {"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453852594, "post_id": 35025338, "comment_id": 57779147, "body": "The go blog has an article about profiling apps which could help you <a href=\"http://blog.golang.org/profiling-go-programs\" rel=\"nofollow noreferrer\">blog.golang.org/profiling-go-programs</a>"}, {"owner": {"reputation": 1288, "user_id": 1876626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e81a0d90315dfb0b3f64c0936a34699e?s=128&d=identicon&r=PG", "display_name": "Joonazan", "link": "https://stackoverflow.com/users/1876626/joonazan"}, "edited": false, "score": 0, "creation_date": 1453854604, "post_id": 35025338, "comment_id": 57779771, "body": "Are you using some libraries which are Go to C bindings? If yes, check that you have freed all resources you&#39;ve allocated using those."}], "answers": [{"tags": [], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "is_accepted": true, "score": 5, "last_activity_date": 1453858006, "creation_date": 1453858006, "answer_id": 35027241, "question_id": 35025338, "link": "https://stackoverflow.com/questions/35025338/cannot-allocate-memory-error/35027241#35027241", "title": "cannot allocate memory error", "body": "<p>For anyone else who runs into this problem, it was a related recent issue <a href=\"https://github.com/golang/go/issues/5838#issuecomment-171280473\" rel=\"noreferrer\">in the golang issue</a>  </p>\n\n<blockquote>\n  <p>For all those affected, temporary workaround on Linux until it is\n  fixed properly can be one of following:</p>\n  \n  <ol>\n  <li>enable unconditional overcommit: <code>sysctl -w vm.overcommit_memory=1</code></li>\n  <li>enable unconditional overcommit: <code>sysctl -w vm.overcommit_memory=1</code> add swap to your host, with <code>sysctl -w vm.swappiness=1</code> it will almost\n  never going to be used, but it participates in calculations where\n  Linux kernel decides to whether it can afford to satisfy allocation or\n  not when <code>default overcommit_memory=0</code> is in use</li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4654, "favorite_count": 1, "accepted_answer_id": 35027241, "answer_count": 1, "score": 1, "last_activity_date": 1453873034, "creation_date": 1453847565, "last_edit_date": 1453873034, "question_id": 35025338, "link": "https://stackoverflow.com/questions/35025338/cannot-allocate-memory-error", "title": "cannot allocate memory error", "body": "<p>I just ported my app over from python so I'm a bit new to Go.  It seems I am having a memory issues.  <code>getAudioOnlyInfo: fork/exec /usr/local/bin/youtube-dl: cannot allocate memory.</code></p>\n\n<p>This is run on a ubuntu machine.  Via supervisor.  </p>\n\n<p>Edit:</p>\n\n<p>setting the <code>sysctl -w vm.swappiness=1</code> resolve the issue</p>\n"}, {"tags": ["go", "arm", "dbus"], "answers": [{"comments": [{"owner": {"reputation": 2253, "user_id": 1630586, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/902ef27763348c8d6d6aba56ffdf7304?s=128&d=identicon&r=PG", "display_name": "Julio", "link": "https://stackoverflow.com/users/1630586/julio"}, "edited": false, "score": 0, "creation_date": 1453833516, "post_id": 35020783, "comment_id": 57769087, "body": "Thank you. The python code is working fine, without auth. How is this possible ?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 2253, "user_id": 1630586, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/902ef27763348c8d6d6aba56ffdf7304?s=128&d=identicon&r=PG", "display_name": "Julio", "link": "https://stackoverflow.com/users/1630586/julio"}, "edited": false, "score": 0, "creation_date": 1453834394, "post_id": 35020783, "comment_id": 57769621, "body": "@Julio: if auth isn&#39;t required, then don&#39;t call Auth. I don&#39;t know what the python library is doing implicitly."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 1, "last_activity_date": 1453847045, "last_edit_date": 1453847045, "creation_date": 1453831630, "answer_id": 35020783, "question_id": 35020486, "link": "https://stackoverflow.com/questions/35020486/golang-and-dbus/35020783#35020783", "title": "Golang and DBUS", "body": "<p>This particular problem is right in the error message:</p>\n\n<blockquote>\n  <p>... user: Current not implemented on linux/arm\"</p>\n</blockquote>\n\n<p><code>user.Current</code> is only called for auth, so if you supply your own <a href=\"https://godoc.org/github.com/guelfey/go.dbus#Auth\" rel=\"nofollow\"><code>Auth</code></a> method it won't call <code>user.Current</code>.</p>\n\n<p>It looks like you'll have to create your own conn though, instead of using the global <code>sessionBus</code>. (see the source of <a href=\"https://godoc.org/github.com/guelfey/go.dbus#SessionBus\" rel=\"nofollow\"><code>SessionBus</code></a> and <a href=\"https://godoc.org/github.com/guelfey/go.dbus#Conn.Auth\" rel=\"nofollow\"><code>Conn.Auth</code></a> for more details)</p>\n\n<pre><code>conn, err := dbusSessionBusPrivate()\nif err != nil {\n    return\n}\n\nauths := []dbus.Auth{dbus.AuthExternal(username), dbus.AuthCookieSha1(username, homedir)}\nif err := conn.Auth(auths); err != nil {\n    conn.Close()\n    return\n}\n</code></pre>\n\n<p>You could also patch <code>go.dbus</code> to use an alternative method for finding the username and homedir for arm, like checking <code>$USER</code> and <code>$HOME</code> (or file an issue, or open a pull request).</p>\n"}], "owner": {"reputation": 2253, "user_id": 1630586, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/902ef27763348c8d6d6aba56ffdf7304?s=128&d=identicon&r=PG", "display_name": "Julio", "link": "https://stackoverflow.com/users/1630586/julio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2057, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1453847045, "creation_date": 1453830677, "question_id": 35020486, "link": "https://stackoverflow.com/questions/35020486/golang-and-dbus", "title": "Golang and DBUS", "body": "<p>I would like to convert this <code>Python</code> code in <code>Go</code>:</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport sys\nimport dbus\n\nif (len(sys.argv) &lt; 2):\n    print(\"Usage: %s &lt;modem&gt; &lt;ussd-string&gt;\" % (sys.argv[0]))\n    sys.exit(1)\n\nbus = dbus.SystemBus()\npath = sys.argv[1]\nussdstring = sys.argv[2]\n\nussd = dbus.Interface(bus.get_object('org.ofono', path),\n                      'org.ofono.SupplementaryServices')\n\nproperties = ussd.GetProperties()\nstate = properties[\"State\"]\n\nif state == \"idle\":\n    result = ussd.Initiate(ussdstring, timeout=100)[1]\nelif state == \"user-response\":\n    result = ussd.Respond(ussdstring, timeout=100)\nelse:\n    sys.exit(1);\n\nproperties = ussd.GetProperties()\nstate = properties[\"State\"]\nprint('USSD RESPONSE:\\n', result)\nprint('USSD SESSION:\\n', state)\n</code></pre>\n\n<p>I made a try with the <code>github.com/guelfey/go.dbus</code> library:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n\n    \"github.com/guelfey/go.dbus\"\n)\n\nfunc main() {\n    fmt.Printf(\"DBUS Test.\\n\")\n    conn, err := dbus.SessionBus()\n    if err != nil {\n        fmt.Fprintln(os.Stderr, \"Failed to connect to session bus:\", err)\n        os.Exit(1)\n    }\n\n    busObject := conn.Object(\"org.ofono\", \"/ril_0\")\n    fmt.Println(\"busObject:\", busObject)\n    var list []string\n    busObject.Call(\"org.ofono.SupplementaryServices.Initiate\", 0, \"#101#\").Store(&amp;list)\n    fmt.Println(\"list:\", list)\n    for _, v := range list {\n        fmt.Println(v)\n    }\n}\n</code></pre>\n\n<p>But I got the following response:</p>\n\n<pre><code>DBUS Test.\nFailed to connect to session bus: user: Current not implemented on linux/arm\n</code></pre>\n\n<p>Do you know how to use this DBUS library? Is this library the best one for <code>go</code> on ARM7?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1453822955, "post_id": 35017735, "comment_id": 57762306, "body": "What is <code>gorequest</code>?"}, {"owner": {"reputation": 586, "user_id": 953258, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/97a839b1a88e3ae1ec7299bad1546376?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Szecowka", "link": "https://stackoverflow.com/users/953258/adam-szecowka"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453823111, "post_id": 35017735, "comment_id": 57762416, "body": "<a href=\"https://github.com/parnurzeal/gorequest\" rel=\"nofollow noreferrer\">github.com/parnurzeal/gorequest</a>"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1453823369, "post_id": 35017735, "comment_id": 57762609, "body": "From the <a href=\"https://godoc.org/github.com/parnurzeal/gorequest#SuperAgent.Send\" rel=\"nofollow noreferrer\">gorequest docs</a>: &quot;Send function accepts either json string or query strings ...&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2284, "user_id": 2125099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bf0fb68f7d521aa94e45c76cb18a4b3?s=128&d=identicon&r=PG", "display_name": "fl0cke", "link": "https://stackoverflow.com/users/2125099/fl0cke"}, "is_accepted": false, "score": 0, "last_activity_date": 1453853250, "creation_date": 1453853250, "answer_id": 35026437, "question_id": 35017735, "link": "https://stackoverflow.com/questions/35017735/how-to-send-binary-data-using-gorequest/35026437#35026437", "title": "How to send binary data using gorequest", "body": "<p>Either set <code>req.BounceToRawString</code> to <code>true</code> or change the content type to <code>text/plain</code> before sending the string.</p>\n\n<p>From the docs at <a href=\"https://godoc.org/github.com/parnurzeal/gorequest\" rel=\"nofollow\">godoc.org</a>: </p>\n\n<blockquote>\n  <p>If you have set Type to text or Content-Type to text/plain, content will be sent as raw string in body instead of form </p>\n</blockquote>\n"}], "owner": {"reputation": 586, "user_id": 953258, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/97a839b1a88e3ae1ec7299bad1546376?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Szecowka", "link": "https://stackoverflow.com/users/953258/adam-szecowka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453853250, "creation_date": 1453822717, "last_edit_date": 1453827616, "question_id": 35017735, "link": "https://stackoverflow.com/questions/35017735/how-to-send-binary-data-using-gorequest", "title": "How to send binary data using gorequest", "body": "<p>I am trying to send content of html file via <strong>gorequest</strong> PUT method. In documentation of service which I am trying to contact it is mentioned that type of body should be <code>Content-Type: application/octet-stream.</code></p>\n\n<p>When I execute:</p>\n\n<pre><code>req.Send(string(content))\n</code></pre>\n\n<p>where content is slice of bytes (<code>[]byte</code>), my html file is broken, because content of the file is encoded, and all white spaces, special characters like &lt;, > are replaced.\nWhen I execute:</p>\n\n<pre><code>req.Send(content)\n</code></pre>\n\n<p>I see that following content is sent: <code>[60,104,116,109, .... ]</code> which is not what I would expect. Can you advise me how to transfer html file as a byte stream to webservice using gorequest? </p>\n"}, {"tags": ["http", "go", "goroutine"], "comments": [{"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "edited": false, "score": 6, "creation_date": 1453819361, "post_id": 35016420, "comment_id": 57759572, "body": "Yes, there is. For example standard library <a href=\"https://golang.org/pkg/net/http/\" rel=\"nofollow noreferrer\"><code>net&#47;http</code></a>, <a href=\"https://golang.org/pkg/encoding/json/\" rel=\"nofollow noreferrer\"><code>encoding&#47;json</code></a>."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1453820347, "post_id": 35016420, "comment_id": 57760281, "body": "not to mention <a href=\"https://golang.org/pkg/expvar/\" rel=\"nofollow noreferrer\"><code>expvar</code></a>"}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "edited": false, "score": 0, "creation_date": 1453827736, "post_id": 35016420, "comment_id": 57765646, "body": "Don&#39;t think that this is useful. Have you heard about log files? Simply write a line on each status update after putting the process into background using the <code>&amp;</code> operator. That would be a) What log files are good for. b) Not exposing an unnecessary security risk. c) WAY easier to implement, especially for a beginner."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "reply_to_user": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "edited": false, "score": 1, "creation_date": 1453828269, "post_id": 35016420, "comment_id": 57765981, "body": "@MarkusWMahlberg I disagree with your statement. While logs are useful to collect a stream of events, aggregating and analyzing those events to present an equivalent result just displaces the problem. Also, running a long-running program as a job in a terminal is a very bad idea, since accidentally exiting the shell will kill the program. Better use a process manager such as supervisord. Finally, Go makes it extremely easy to embed an HTTP server in any program, it is a pretty common pattern, even in the standard library, as demonstrated with the aforementionned <code>expvar</code> package."}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "reply_to_user": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 1, "creation_date": 1453839968, "post_id": 35016420, "comment_id": 57772971, "body": "@SirDarius I really assume that we rather know what we are doing. Take a nohup, or whatever means. But the general problem that an open port leads to an increased security concern. Just because something is easy doesn&#39;t mean you <i>should</i> do it. And log files for monitoring a progress are idiomatic. Not for Go, but for Linux."}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453842615, "post_id": 35023599, "comment_id": 57774614, "body": "Why have the extra <code>MakeResponse</code> goroutine with the channel of channels, when <code>RequestInfo</code> already executes in it&#39;s own goroutine, and you&#39;re synchronously waiting for the data anyway?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453842681, "post_id": 35023599, "comment_id": 57774657, "body": "@JimB I assumed the listener would be in its own package and you wouldn&#39;t want to directly expose the data from the main long-running program to the outside world. Note that <code>MakeResponse</code> calls an unexported example function to get the state to pass."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453843047, "post_id": 35023599, "comment_id": 57774864, "body": "Ah ok. Even so, IMO a simple mutex here would make the API more clear since this is just a synchronous function call hidden behind channels."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453843242, "post_id": 35023599, "comment_id": 57774981, "body": "@JimB that&#39;s possible! I tend to overuse channels and ignore other sync methods completely in Go. YMMV, but I&#39;m happy with the channel solution."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453849446, "post_id": 35023599, "comment_id": 57778034, "body": "An interesting idea might be to use some asynchronous framework (AJAX? WebSockets?) to serve the data from requests on a different endpoint and have &quot;/&quot; just load a mostly-empty template (that fills on each packet from the WebSocket or from each AJAX request). I&#39;m not sure that&#39;s exactly what OP is looking for, however."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1453841085, "creation_date": 1453841085, "answer_id": 35023599, "question_id": 35016420, "link": "https://stackoverflow.com/questions/35016420/http-server-in-separate-goroutine-to-display-progress/35023599#35023599", "title": "HTTP server in separate goroutine to display progress", "body": "<p>This will require some cooperative programming with your long-running program to listen for requests. It's also the perfect use case for a <code>chan chan</code></p>\n\n<pre><code>// inside your main package\n\n// MakeResponse listens for a request for information and serves it back on\n// request's channel.\nfunc MakeResponse(request chan chan interface{}) {\n    // I'm not sure what kind of raw data you're trying to throw back, but\n    // you probably don't want to do your encoding to json here. Do that in\n    // your webserver instead.\n\n    for resp := range request {\n        resp &lt;- getInternalStateInformation()\n    }\n}\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>// inside your listener package\n\nvar requests chan chan interface{}\n\nfunc init() {\n    requests = make(chan chan interface{}, 10)\n}\n\nfunc RequestInfo(w http.ResponseWriter, r *http.Request) {\n    response := make(chan interface{})\n    requests&lt;-response\n    data := &lt;-response\n    outData, err := json.Marshal(data)\n    if err != nil {\n        log.Printf(\"Couldn't marshal data %v\\n\", data)\n    }\n    fmt.Fprint(w, outData) // or more likely execute a template with this\n                           // context\n}\n\nfunc main() {\n    defer close(requests)\n    go longrunningprog.MakeResponse(requests)\n    http.HandleFunc(\"/\", RequestInfo)\n    http.ListenAndServe(\":8081\", nil)\n}\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5653566, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a57b23e789f4344a7ca37d2a6fc48a34?s=128&d=identicon&r=PG&f=1", "display_name": "Strickland Joseph", "link": "https://stackoverflow.com/users/5653566/strickland-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 596, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453841085, "creation_date": 1453819081, "question_id": 35016420, "link": "https://stackoverflow.com/questions/35016420/http-server-in-separate-goroutine-to-display-progress", "title": "HTTP server in separate goroutine to display progress", "body": "<p>Let's say I have a long-running programme in Go that is being ran on a server and, from time to time, the user needs to view its results (stats). We of course can create a screen session and make him login by SSH, reattach to the session etc, but it doesn't seem practical.\nAs a better option, I want to launch some sort of embedded HTTP server which shall listen on some port like 8081 and, whenever requested, return the info in form of text (or JSON or XML or whatever).\nBasically it should just compose a string and return it through HTTP/1.1.\nIt obviously should run in its own goroutin (in background). It is guarantied that the server receives low volume of traffic (e.g. no simultaneous requests)\nSo probably there's something ready-to-use?</p>\n"}, {"tags": ["json", "go"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 3, "creation_date": 1453817621, "post_id": 35015666, "comment_id": 57758341, "body": "json.Unmarshal() takes a pointer to your struct. Can&#39;t you just pass in the right struct at the right time? Maybe I am not understanding your question correctly?"}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 2642806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da049167daa84d2e05472f2bb4b7cd69?s=128&d=identicon&r=PG", "display_name": "slcjordan", "link": "https://stackoverflow.com/users/2642806/slcjordan"}, "is_accepted": false, "score": 0, "last_activity_date": 1453827684, "creation_date": 1453827684, "answer_id": 35019493, "question_id": 35015666, "link": "https://stackoverflow.com/questions/35015666/decoding-structs-in-different-json-mappings/35019493#35019493", "title": "Decoding structs in different JSON mappings", "body": "<p>You can override the unmarshal behavior by embedding a ResponseProperties pointer in another struct and implementing the json.Unmarshaller interface in those structs. Be aware the dangers of pointers inside structs, since pointers will default to nil.</p>\n\n<p>Here's a playground example: <a href=\"http://play.golang.org/p/ZTlLp0_wGY\" rel=\"nofollow\">http://play.golang.org/p/ZTlLp0_wGY</a></p>\n"}, {"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 3, "last_activity_date": 1453831219, "creation_date": 1453831219, "answer_id": 35020673, "question_id": 35015666, "link": "https://stackoverflow.com/questions/35015666/decoding-structs-in-different-json-mappings/35020673#35020673", "title": "Decoding structs in different JSON mappings", "body": "<p>I'd suggest just keeping them separate. You never know when an API response suddenly changes.</p>\n\n<p>But if you do want to unmarshal everything into one struct, one way to do this is to unmarshal into a struct that has fields for all possible aliases and then assign the one that is not empty. E.g.:</p>\n\n<pre><code>type Basket struct {\n    NumFruit int\n    Fruits   []string // Can be either \"Apples\" or \"Oranges\" in JSON.\n}\n\nfunc (bskt *Basket) UnmarshalJSON(b []byte) error {\n    type Basket_ Basket\n    v := struct {\n        Basket_\n        Apples, Oranges []string\n    }{}\n    if err := json.Unmarshal(b, &amp;v); err != nil {\n        return err\n    }\n    *bskt = Basket(v.Basket_)\n    if v.Apples != nil {\n        bskt.Fruits = v.Apples\n    }\n    if v.Oranges != nil {\n        bskt.Fruits = v.Oranges\n    }\n    return nil\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/pLe5EwsYEP\" rel=\"nofollow\">http://play.golang.org/p/pLe5EwsYEP</a>.</p>\n"}], "owner": {"reputation": 289, "user_id": 4768715, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55e2ba38b11b464ad4146a33abbb391d?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Reck", "link": "https://stackoverflow.com/users/4768715/patrick-reck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1453831219, "creation_date": 1453817081, "question_id": 35015666, "link": "https://stackoverflow.com/questions/35015666/decoding-structs-in-different-json-mappings", "title": "Decoding structs in different JSON mappings", "body": "<p>I am trying to decode two different responses with the same properties, the only difference is the names of the JSON mappings they come from.</p>\n\n<p>What is the proper way to achieve the demonstrated below?</p>\n\n<pre><code>type ResponseProperties struct {\n    CurrentPage uint\n    TotalPages  uint\n    Events      []TrackingEvent\n}\n\ntype TrackingResponse struct {\n    //  ResponseProperties\n    CurrentPage uint            `json:\"current_page\"`\n    TotalPages  uint            `json:\"total_pages\"`\n    Events      []TrackingEvent `json:\"clicks\"`\n}\n\ntype SubscriberResponse struct {\n    //  ResponseProperties\n    CurrentPage uint            `json:\"current_page\"`\n    TotalPages  uint            `json:\"total_pages\"`\n    Events      []TrackingEvent `json:\"subscribers\"`\n}\n</code></pre>\n"}, {"tags": ["json", "go", "unmarshalling"], "answers": [{"comments": [{"owner": {"reputation": 798, "user_id": 329056, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/676dd4312d04f92b8b9d1c0cae9ccad3?s=128&d=identicon&r=PG", "display_name": "scooz", "link": "https://stackoverflow.com/users/329056/scooz"}, "edited": false, "score": 0, "creation_date": 1453817231, "post_id": 35015549, "comment_id": 57758064, "body": "It&#39;s the simple things that get ya. Thanks."}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "reply_to_user": {"reputation": 798, "user_id": 329056, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/676dd4312d04f92b8b9d1c0cae9ccad3?s=128&d=identicon&r=PG", "display_name": "scooz", "link": "https://stackoverflow.com/users/329056/scooz"}, "edited": false, "score": 2, "creation_date": 1453828034, "post_id": 35015549, "comment_id": 57765820, "body": "@scooz It is the simple things that <i>will</i> get ya. ;)"}], "tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": true, "score": 4, "last_activity_date": 1453816763, "creation_date": 1453816763, "answer_id": 35015549, "question_id": 35015447, "link": "https://stackoverflow.com/questions/35015447/custom-json-unmarshalling-for-string-encoded-number/35015549#35015549", "title": "Custom JSON Unmarshalling for string-encoded number", "body": "<p>You're trying to unmarshal the string <code>1,500</code> which is invalid in JSON. I think what you means is to unmarshal the JSON string <code>\"1,500\"</code>:</p>\n\n<pre><code>assert.Nil(t, json.Unmarshal([]byte(`\"1,500\"`), &amp;c))\n</code></pre>\n\n<p>Note the backticks. Here is a simplified example:</p>\n\n<pre><code>b := []byte(`1,500`)\nvar s string\nerr := json.Unmarshal(b, &amp;s)\nfmt.Println(s, err) // Prints error.\n\nb = []byte(`\"1,500\"`)\nerr = json.Unmarshal(b, &amp;s)\nfmt.Println(s, err) // Works fine.\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/uwayOSgmTv\" rel=\"nofollow\">http://play.golang.org/p/uwayOSgmTv</a>.</p>\n"}], "owner": {"reputation": 798, "user_id": 329056, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/676dd4312d04f92b8b9d1c0cae9ccad3?s=128&d=identicon&r=PG", "display_name": "scooz", "link": "https://stackoverflow.com/users/329056/scooz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1551, "favorite_count": 0, "accepted_answer_id": 35015549, "answer_count": 1, "score": 4, "last_activity_date": 1453816763, "creation_date": 1453816463, "last_edit_date": 1495542207, "question_id": 35015447, "link": "https://stackoverflow.com/questions/35015447/custom-json-unmarshalling-for-string-encoded-number", "title": "Custom JSON Unmarshalling for string-encoded number", "body": "<p>I have a <code>struct</code> which contains various currency values, in cents (1/100 USD):</p>\n\n<pre><code>type CurrencyValues struct {\n   v1 int `json:\"v1,string\"`\n   v2 int `json:\"v2,string\"`\n} \n</code></pre>\n\n<p>I'd like to create a custom json Unmarshaller for currency values with thousand separators. These values are encoded as strings, with one or more thousand separators (<code>,</code>), and possibly a decimal point (<code>.</code>).</p>\n\n<p>For this JSON <code>{\"v1\": \"10\", \"v2\": \"1,503.21\"}</code>, I'd like to JSON Unmarshal a <code>CurrencyValues{v1: 1000, v2: 150321}</code>.</p>\n\n<p>Following a similar answer here: <a href=\"https://stackoverflow.com/questions/30856454/golang-how-to-unmarshall-both-0-and-false-as-bool-from-json\">Golang: How to unmarshall both 0 and false as bool from JSON</a>, I went ahead and created a custom type for my currency fields, which include a custom Unmarshalling function:</p>\n\n<pre><code>type ConvertibleCentValue int\n\nfunc (cents *ConvertibleCentValue) UnmarshalJSON(data []byte) error {\n    asString := string(data)\n\n    // Remove thousands separators\n    asString = strings.Replace(asString, \",\", \"\", -1)\n\n    // Parse to float, then convert dollars to cents\n    if floatVal, err := strconv.ParseFloat(asString, 32); err == nil {\n        *cents = ConvertibleCentValue(int(floatVal * 100.0))\n        return nil\n    } else {\n        return err\n    }\n}\n</code></pre>\n\n<p>However, when writing unit tests:</p>\n\n<pre><code>func Test_ConvertibleCentValue_Unmarshal(t *testing.T) {\n    var c ConvertibleCentValue\n    assert.Nil(t, json.Unmarshal([]byte(\"1,500\"), &amp;c))\n    assert.Equal(t, 150000, int(c))\n}\n</code></pre>\n\n<p>I encounter this error:</p>\n\n<pre><code>Error:      Expected nil, but got: &amp;json.SyntaxError{msg:\"invalid character ',' after top-level value\", Offset:2}\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["go", "net-http"], "comments": [{"owner": {"reputation": 10358, "user_id": 1211175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/il5eC.jpg?s=128&g=1", "display_name": "Endre Simo", "link": "https://stackoverflow.com/users/1211175/endre-simo"}, "edited": false, "score": 0, "creation_date": 1453816323, "post_id": 35015084, "comment_id": 57757465, "body": "Can you share the code?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453816518, "post_id": 35015084, "comment_id": 57757587, "body": "You can&#39;t read the response body once you&#39;ve already drained it. Have you tried using <a href=\"https://golang.org/pkg/net/http/#ReadResponse\" rel=\"nofollow noreferrer\">ReadResponse</a> on the buffered response?"}, {"owner": {"reputation": 407, "user_id": 789745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d86e542308758403576a94fb424dc83?s=128&d=identicon&r=PG", "display_name": "L.fole", "link": "https://stackoverflow.com/users/789745/l-fole"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453817462, "post_id": 35015084, "comment_id": 57758212, "body": "<a href=\"https://play.golang.org/p/Aj8KKfQGfD\" rel=\"nofollow noreferrer\">code here</a> This produces new file with header info and no body on <code>resp.write(f)</code>. BTW, thanks @JimB on earlier question. Can you provide example on ReadResponse."}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 7939550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35b8a18b2627953f8bcd06bdc656958?s=128&d=identicon&r=PG", "display_name": "amiabl", "link": "https://stackoverflow.com/users/7939550/amiabl"}, "edited": false, "score": 1, "creation_date": 1592311445, "post_id": 35015714, "comment_id": 110374964, "body": "You might want to pass a reference to the buffer, like <code>resp.Write(&amp;b)</code>, to avoid a <code>Cannot use &#39;b&#39; (type bytes.Buffer) as type io.Writer</code> error."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 5, "last_activity_date": 1453817203, "creation_date": 1453817203, "answer_id": 35015714, "question_id": 35015084, "link": "https://stackoverflow.com/questions/35015084/how-to-make-a-copy-of-response-of-http-geturl-request-in-golang/35015714#35015714", "title": "how to make a copy of response of http.Get(url) request in Golang", "body": "<p>Assuming the response fits in memory, just create a buffer and use <a href=\"https://golang.org/pkg/net/http/#Response.Write\" rel=\"noreferrer\">resp.Write</a>, like (untested, basically correct):</p>\n\n<pre><code>var b bytes.Buffer\nif err := resp.Write(b); err != nil {\n   // handle error\n} else {\n    // Do something with buffer\n}\n</code></pre>\n\n<p>for code that works with any reader, use: <a href=\"https://golang.org/pkg/io/ioutil/#ReadAll\" rel=\"noreferrer\">ioutil.ReadAll</a>, which returns a new  []byte containing the data that you can then wrap in a bytes.Buffer</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 2642806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da049167daa84d2e05472f2bb4b7cd69?s=128&d=identicon&r=PG", "display_name": "slcjordan", "link": "https://stackoverflow.com/users/2642806/slcjordan"}, "is_accepted": false, "score": 2, "last_activity_date": 1453844961, "last_edit_date": 1453844961, "creation_date": 1453834293, "answer_id": 35021551, "question_id": 35015084, "link": "https://stackoverflow.com/questions/35015084/how-to-make-a-copy-of-response-of-http-geturl-request-in-golang/35021551#35021551", "title": "how to make a copy of response of http.Get(url) request in Golang", "body": "<p>httputil has a response dump. <a href=\"https://golang.org/pkg/net/http/httputil/#DumpRequest\" rel=\"nofollow\">https://golang.org/pkg/net/http/httputil/#DumpRequest</a>\nIt will replace the body with an in-memory copy so you can reuse it.</p>\n"}], "owner": {"reputation": 407, "user_id": 789745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d86e542308758403576a94fb424dc83?s=128&d=identicon&r=PG", "display_name": "L.fole", "link": "https://stackoverflow.com/users/789745/l-fole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5071, "favorite_count": 0, "accepted_answer_id": 35015714, "answer_count": 2, "score": 2, "last_activity_date": 1453844961, "creation_date": 1453815397, "question_id": 35015084, "link": "https://stackoverflow.com/questions/35015084/how-to-make-a-copy-of-response-of-http-geturl-request-in-golang", "title": "how to make a copy of response of http.Get(url) request in Golang", "body": "<p>I'm trying to use <code>resp, err := http.Get(url)</code> command to write the response to file as well as use the same response to extract links. </p>\n\n<p>After I write the content to a file using <code>resp.Write(f)</code>, I cannot use <code>resp.Body</code> for another purpose (for the response from the above url) without making another <code>http.Get</code> request.</p>\n\n<p>I tried <code>resp2 := bytes.NewBuffer(resp)</code>. It gives eror as type does not match. I've tried copy as well.</p>\n"}, {"tags": ["go", "naming-conventions"], "comments": [{"owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 1, "creation_date": 1453812395, "post_id": 35014172, "comment_id": 57754914, "body": "The only definition of OK that matches here is <i>&quot;goling accepts it without complaint&quot;</i>. What about following the go usage instead of trying to reproduce what you did in another language ?"}, {"owner": {"reputation": 41009, "user_id": 450989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGjdr.jpg?s=128&g=1", "display_name": "Grzegorz \u017bur", "link": "https://stackoverflow.com/users/450989/grzegorz-%c5%bbur"}, "edited": false, "score": 5, "creation_date": 1453812420, "post_id": 35014172, "comment_id": 57754932, "body": "When in Rome do as the Romans do! Just use lower case names."}, {"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 2, "creation_date": 1453812459, "post_id": 35014172, "comment_id": 57754959, "body": "Why not just <code>column</code>? Since these names are unexported it doesn&#39;t really matter, but I don&#39;t think anyone would prefer <code>_Column</code> to <code>column</code>. To say nothing about autocompletion being easier when all unexported identifiers <i>don&#39;t</i> start with the same symbol."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453813896, "post_id": 35014172, "comment_id": 57755832, "body": "No it is not OK as it is dead ugly, unnecessary and misleading."}, {"owner": {"reputation": 1508, "user_id": 448420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6025e3530546eb4f2e6abb51b2c11ce8?s=128&d=identicon&r=PG", "display_name": "runec", "link": "https://stackoverflow.com/users/448420/runec"}, "edited": false, "score": 0, "creation_date": 1454589449, "post_id": 35014172, "comment_id": 58118258, "body": "I only partly agree on arguments about ugliness, autocompletion, reproduce from other languages etc, but I like and agree with the comment from Grzegors: When in Rome do as the Romans do! \u2013 since other arguments are just more or less weak opinions, including my own, I will follow this recommendation :)"}], "answers": [{"tags": [], "owner": {"reputation": 18805, "user_id": 34771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c1a3f9227c0cb408f8831d27d611ab2?s=128&d=identicon&r=PG", "display_name": "Vatine", "link": "https://stackoverflow.com/users/34771/vatine"}, "is_accepted": false, "score": 5, "last_activity_date": 1453813219, "creation_date": 1453813219, "answer_id": 35014431, "question_id": 35014172, "link": "https://stackoverflow.com/questions/35014172/naming-convention-for-not-exported-type-names-in-go/35014431#35014431", "title": "Naming convention for not-exported type names in Go", "body": "<p>I'd suggest using <code>column</code> in preference to <code>_Column</code>, on the basis that the style used by the standard libraries follow that naming convention.</p>\n\n<p>This is not explicit in the <a href=\"https://golang.org/doc/effective_go.html#names\" rel=\"noreferrer\">Names section of the style guide</a>, but based on the fact that underscores are generally discouraged, I'd say that using <code>_Column</code> is, at best, not idiomatic.</p>\n"}, {"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 1, "last_activity_date": 1453818506, "creation_date": 1453818506, "answer_id": 35016194, "question_id": 35014172, "link": "https://stackoverflow.com/questions/35014172/naming-convention-for-not-exported-type-names-in-go/35016194#35016194", "title": "Naming convention for not-exported type names in Go", "body": "<p>\"I like to\" and go don't super mix.</p>\n\n<p>There are idiomatic bits and tooling enforced bits.</p>\n\n<p>The community sticking to the standards makes for codebases that can be reasonably easy to read and comprehend by others.</p>\n\n<p>I find this to be one of the best attributes of go.   </p>\n\n<p>Sure, channels and goroutines are nice.<br>\nEasily being able to read a codebase is often much more valuable.</p>\n"}], "owner": {"reputation": 1508, "user_id": 448420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6025e3530546eb4f2e6abb51b2c11ce8?s=128&d=identicon&r=PG", "display_name": "runec", "link": "https://stackoverflow.com/users/448420/runec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1454589497, "creation_date": 1453812283, "last_edit_date": 1454589497, "question_id": 35014172, "link": "https://stackoverflow.com/questions/35014172/naming-convention-for-not-exported-type-names-in-go", "title": "Naming convention for not-exported type names in Go", "body": "<p>I like to name my types using Pascal case - starting with an upper case letter. In Go this implies the name is exported.</p>\n\n<p>To avoid export, I've started to prefix the type name with undercsore instead of lower-casing the first letter.</p>\n\n<p>E.g: Instead of \n<code>type Column struct{}</code>, I use <code>type _Column struct{}</code> to avoid export.</p>\n\n<p>I haven't seen this naming scheme used, but neither found any reason not to use it.</p>\n\n<p>Since <code>golint</code> accepts it without complaint, I guess this is OK?</p>\n\n<p><strong>Conclusion</strong>: Based on answers and comments I've decided to stay with lower-cased type names.</p>\n"}, {"tags": ["string", "go", "char", "string-concatenation", "maxlength"], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1453805832, "last_edit_date": 1453805832, "creation_date": 1453805130, "answer_id": 35012023, "question_id": 35011902, "link": "https://stackoverflow.com/questions/35011902/how-to-concatenate-follower-characters-to-a-string-until-a-defined-maximum-lengt/35012023#35012023", "title": "How to concatenate follower characters to a string until a defined maximum length has been reached in Golang?", "body": "<p>You could just do <code>input += \"_\"</code> in a cycle, but that would allocate unnecessary strings. Here is a version that doesn't allocate more than it needs:</p>\n\n<pre><code>const limit = 6\n\nfunc f(s string) string {\n    if len(s) &gt;= limit {\n        return s\n    }\n    b := make([]byte, limit)\n    copy(b, s)\n    for i := len(s); i &lt; limit; i++ {\n        b[i] = '_'\n    }\n    return string(b)\n}\n</code></pre>\n\n<p>Playground: <a href=\"http://play.golang.org/p/B_Wx1449QM\" rel=\"nofollow\">http://play.golang.org/p/B_Wx1449QM</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 21441, "user_id": 723693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b2fe761a7aa211adfb466500210412?s=128&d=identicon&r=PG", "display_name": "ain", "link": "https://stackoverflow.com/users/723693/ain"}, "is_accepted": true, "score": 5, "last_activity_date": 1453807201, "creation_date": 1453807201, "answer_id": 35012639, "question_id": 35011902, "link": "https://stackoverflow.com/questions/35011902/how-to-concatenate-follower-characters-to-a-string-until-a-defined-maximum-lengt/35012639#35012639", "title": "How to concatenate follower characters to a string until a defined maximum length has been reached in Golang?", "body": "<p>The <a href=\"https://golang.org/pkg/strings/#Repeat\" rel=\"noreferrer\">strings</a> package has a <code>Repeat</code> function, so something like</p>\n\n<pre><code>input += strings.Repeat(\"_\", desiredLen - utf8.RuneCountInString(input))\n</code></pre>\n\n<p>would be simpler. You should probably check that <code>desiredLen</code> is smaller than inpult length first.</p>\n"}, {"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 5, "last_activity_date": 1516981153, "last_edit_date": 1516981153, "creation_date": 1453809039, "answer_id": 35013220, "question_id": 35011902, "link": "https://stackoverflow.com/questions/35011902/how-to-concatenate-follower-characters-to-a-string-until-a-defined-maximum-lengt/35013220#35013220", "title": "How to concatenate follower characters to a string until a defined maximum length has been reached in Golang?", "body": "<p>You can also do this efficiently without loops and \"external\" function calls, by slicing a prepared \"max padding\" (slice out the required padding and simply add it to the input):</p>\n\n<pre><code>const max = \"______\"\n\nfunc pad(s string) string {\n    if i := utf8.RuneCountInString(s); i &lt; len(max) {\n        s += max[i:]\n    }\n    return s\n}\n</code></pre>\n\n<p>Using it:</p>\n\n<pre><code>fmt.Println(pad(\"abc\"))\nfmt.Println(pad(\"a\"))\nfmt.Println(pad(\"abcde\"))\n</code></pre>\n\n<p>Output (try it on the <a href=\"http://play.golang.org/p/ZWHEMxD3ll\" rel=\"nofollow noreferrer\">Go Playground</a>):</p>\n\n<pre><code>abc___\na_____\nabcde_\n</code></pre>\n\n<p><strong>Notes:</strong></p>\n\n<p><code>len(max)</code> is a constant (because <code>max</code> is a constant): <a href=\"https://golang.org/ref/spec#Length_and_capacity\" rel=\"nofollow noreferrer\">Spec: Length and capacity:</a></p>\n\n<blockquote>\n  <p>The expression <code>len(s)</code> is <a href=\"https://golang.org/ref/spec#Constants\" rel=\"nofollow noreferrer\">constant</a> if <code>s</code> is a string constant. </p>\n</blockquote>\n\n<p>Slicing a <code>string</code> is <a href=\"https://blog.golang.org/slices#TOC_12.\" rel=\"nofollow noreferrer\">efficient</a>:</p>\n\n<blockquote>\n  <p>An important consequence of this slice-like design for strings is that creating a substring is very efficient. All that needs to happen is the creation of a two-word string header. Since the string is read-only, the original string and the string resulting from the slice operation can share the same array safely.</p>\n</blockquote>\n"}], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 35012639, "answer_count": 3, "score": 3, "last_activity_date": 1516981153, "creation_date": 1453804753, "question_id": 35011902, "link": "https://stackoverflow.com/questions/35011902/how-to-concatenate-follower-characters-to-a-string-until-a-defined-maximum-lengt", "title": "How to concatenate follower characters to a string until a defined maximum length has been reached in Golang?", "body": "<p><kbd><strong>Input</strong></kbd><kbd><strong>Output</strong></kbd><br/>\n<kbd>abc&nbsp;&nbsp;&nbsp;&nbsp;</kbd><kbd>abc___</kbd><br/>\n<kbd>a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd><kbd>a___&nbsp;&nbsp;&nbsp;&nbsp;</kbd><br/>\n<kbd>abcde</kbd><kbd>abcde_</kbd><br/></p>\n\n<p><strong>Attempt</strong></p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"unicode/utf8\"\n\nfunc main() {\n    input := \"abc\"\n\n    if utf8.RuneCountInString(input) == 1 {\n        fmt.Println(input + \"_____\")\n    } else if utf8.RuneCountInString(input) == 2 {\n        fmt.Println(input + \"____\")\n    } else if utf8.RuneCountInString(input) == 3 {\n        fmt.Println(input + \"___\")\n    } else if utf8.RuneCountInString(input) == 4 {\n        fmt.Println(input + \"__\")\n    } else if utf8.RuneCountInString(input) == 5 {\n        fmt.Println(input + \"_\")\n    } else {\n        fmt.Println(input)\n    }\n}\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>abc___\n</code></pre>\n\n<p><strong>Discussion</strong></p>\n\n<p>Although the code is creating the expected output, it looks very verbose and devious. </p>\n\n<p><strong>Question</strong></p>\n\n<p>Is there a concise way?</p>\n"}, {"tags": ["json", "go", "error-handling"], "comments": [{"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 1, "creation_date": 1453797177, "post_id": 35009423, "comment_id": 57746606, "body": "what version of Go are you using?"}, {"owner": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 1, "creation_date": 1453797303, "post_id": 35009423, "comment_id": 57746670, "body": "<code>UnmarshalTypeError.Offset</code> was added in Go 1.5: <a href=\"https://github.com/golang/go/blob/master/api/go1.5.txt#L286\" rel=\"nofollow noreferrer\">github.com/golang/go/blob/master/api/go1.5.txt#L286</a>"}, {"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 8146, "user_id": 3477832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/44M2u.png?s=128&g=1", "display_name": "kostya", "link": "https://stackoverflow.com/users/3477832/kostya"}, "edited": false, "score": 0, "creation_date": 1453797817, "post_id": 35009423, "comment_id": 57746931, "body": "That is the problem. I have 1.2.1, but don&#39;t know why. Installed on Ubuntu14.04 with apt-get just yesterday.."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1453798061, "post_id": 35009423, "comment_id": 57747033, "body": "@Arxeiss never install go with apt-get for serious work,"}, {"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1453798525, "post_id": 35009423, "comment_id": 57747238, "body": "@Not_a_Golfer I found this <a href=\"https://github.com/golang/go/wiki/Ubuntu\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/Ubuntu</a> so I thought that it is OK..."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453801804, "post_id": 35009423, "comment_id": 57749081, "body": "@Arxeiss the binary packages on the golang website work great and are super easy to set up. If you want to remain with current go versions, stick with them."}, {"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453802875, "post_id": 35009423, "comment_id": 57749744, "body": "@Not_a_Golfer I&#39;m not saying that I want to stuck at old version. I just said, where I found it. So maybe I should say it again. I found it on that link, so I thought that it is OK. Why I shouldn&#39;t use apt-get, if in original golang reposiroty they are suggesting it? And why in apt-get repositories are so old versions?"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 3, "creation_date": 1453803787, "post_id": 35009423, "comment_id": 57750272, "body": "@Arxeiss Ubuntu repositories do not change the version of a piece of software during the lifetime of an Ubuntu version. 14.04 is almost two years old, and uses the the recent Go version for that time. Unless there&#39;s an apt repo that publishes up to date Go versions somewhere, you are stuck with only minor version updates for a certain version."}], "answers": [{"comments": [{"owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "edited": false, "score": 0, "creation_date": 1453799972, "post_id": 35010409, "comment_id": 57748030, "body": "Problem is older version of Golang in my case.. Check comments under my post"}], "tags": [], "owner": {"reputation": 239, "user_id": 5835055, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eb5SIEHiKkE/AAAAAAAAAAI/AAAAAAAAAA0/nTcmPdpHHnA/photo.jpg?sz=128", "display_name": "joy miao", "link": "https://stackoverflow.com/users/5835055/joy-miao"}, "is_accepted": false, "score": 1, "last_activity_date": 1453800018, "last_edit_date": 1453800018, "creation_date": 1453799896, "answer_id": 35010409, "question_id": 35009423, "link": "https://stackoverflow.com/questions/35009423/golang-unmarshaltypeerror-missing-offset/35010409#35010409", "title": "Golang UnmarshalTypeError missing Offset", "body": "<p>According to the godoc description:</p>\n\n<blockquote>\n  <p>If a JSON value is not appropriate for a given target type, or if a JSON number overflows the target type, Unmarshal skips that field and completes the unmarshalling as best it can. If no more serious errors are encountered, Unmarshal returns an UnmarshalTypeError describing the earliest such error.</p>\n</blockquote>\n\n<p>Just like <code>string</code> type unmarshals into <code>chan</code> type,it make a <code>UnmarshalTypeError</code> error,just like the following:</p>\n\n<pre><code>package main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n)\n\ntype A struct {\n    Name string\n    Chan chan int\n}\n\nfunc main() {\n    var a A\n    bs := []byte(`{\"Name\":\"hello\",\"Chan\":\"chan\"}`)\n    if e := json.Unmarshal(bs, &amp;a); e != nil {\n        if ute, ok := e.(*json.UnmarshalTypeError); ok {\n            fmt.Printf(\"UnmarshalTypeError %v - %v - %v\\n\", ute.Value, ute.Type, ute.Offset)\n        } else {\n            fmt.Println(\"Other error:\", e)\n        }\n    }\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>UnmarshalTypeError string - chan int - 29\n</code></pre>\n\n<p>It is working properly!</p>\n"}], "owner": {"reputation": 778, "user_id": 1513087, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bd72e2bb63a6112d441165df6fb8129?s=128&d=identicon&r=PG", "display_name": "Arxeiss", "link": "https://stackoverflow.com/users/1513087/arxeiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1453800018, "creation_date": 1453796242, "question_id": 35009423, "link": "https://stackoverflow.com/questions/35009423/golang-unmarshaltypeerror-missing-offset", "title": "Golang UnmarshalTypeError missing Offset", "body": "<p>I'm totally newbie in Golang and solving problem with parsing JSON. Everything is working, except error handling.</p>\n\n<pre><code>if err := json.Unmarshal(file, &amp;configData); err != nil {    \n    if ute, ok := err.(*json.UnmarshalTypeError); ok {\n        fmt.Printf(\"UnmarshalTypeError %v - %v - %v\", ute.Value, ute.Type, ute.Offset)        \n    }\n}\n</code></pre>\n\n<p>Here I get error <code>ute.Offset undefined (type *json.UnmarshalTypeError has no field or method Offset)</code> but in <a href=\"https://golang.org/pkg/encoding/json/#UnmarshalTypeError\" rel=\"nofollow\">Docs of JSON package</a> and also <a href=\"https://golang.org/src/encoding/json/decode.go?s=3363:3613#L89\" rel=\"nofollow\">code</a> they have this variable in <code>UnmarshalTypeError</code> struct.</p>\n\n<p>What I'm doing wrong? Thank you</p>\n"}, {"tags": ["go", "timer"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453797383, "post_id": 35009070, "comment_id": 57746702, "body": "What&#39;s wrong with <code>Timer</code> from package <code>time</code>? It does exactly what you need. (Btw. the concept of doing something &quot;exactly at some point in time&quot; doesn&#39;t work out well.)"}, {"owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453798842, "post_id": 35009070, "comment_id": 57747410, "body": "@Volker this is a production level issue and I better wish to meet that , &quot;exactly at some point in time&quot; as the case is in a distributed environment. Timer was fine otherwise."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1453800597, "post_id": 35009070, "comment_id": 57748395, "body": "What do you do if the OS clock gets readjusted and skips the &quot;exact moment of time&quot; you wish to execute something? What if the VM is suspended then? What if your laptop sleeps? Just because someone demands that something should happen &quot;exactly then and then&quot; and it has to be on production doesn&#39;t make the fundamental problem go away. Esoteric, but what if you schedule something and this instead if time never happens because it was dropped as a negative leap second?"}, {"owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453802509, "post_id": 35009070, "comment_id": 57749529, "body": "@Volker Okay, I certainly understand. So it is up to the point that, in practice, &quot;exactly at some point in time&quot; is only nearly possible, right?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453804983, "post_id": 35009070, "comment_id": 57750916, "body": "Exactly. And normally business wants things to happen at a certain clock reading which is bound to a timezone and not at some UTC or even TAI ( International Atomic Time) time point. E.g. &quot;Publish this at exactly 9:00 o&#39;clock&quot;. Now &quot;9 o&#39;clock&quot; is sometimes one hour later/earlier depending on daylight saving times. And daylight saving times change politically and sometimes on short notice. Just because something seems simple (because as a child you learn to be home at 6 pm sharp) it can be complicated."}, {"owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453805546, "post_id": 35009070, "comment_id": 57751233, "body": "@Volker many thanks for that point. Now it is clear. Thanks."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1453817202, "post_id": 35009070, "comment_id": 57758044, "body": "On general purpose hardware and operating systems, this is as accurate as you can get. Operating systems alarms also work on intervals (i.e. setitimer), not absolute time, and when they fire your process may still need to be paged in, wait for CPU, etc."}, {"owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453834317, "post_id": 35009070, "comment_id": 57769577, "body": "@JimB thanks for update. Very useful. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "edited": false, "score": 0, "creation_date": 1453798558, "post_id": 35009735, "comment_id": 57747254, "body": "thanks for your answer. In short, it seems like you are suggesting to run a ticker to check whether the future target time is met and run it until it does. I think it still have issues with the interval of ticker (may be second, millisecond, nano second or so on), and comparison overheads on considering the precision."}, {"owner": {"reputation": 239, "user_id": 5835055, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eb5SIEHiKkE/AAAAAAAAAAI/AAAAAAAAAA0/nTcmPdpHHnA/photo.jpg?sz=128", "display_name": "joy miao", "link": "https://stackoverflow.com/users/5835055/joy-miao"}, "reply_to_user": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "edited": false, "score": 0, "creation_date": 1453800626, "post_id": 35009735, "comment_id": 57748414, "body": "I have not encountered so precise requirements."}], "tags": [], "owner": {"reputation": 239, "user_id": 5835055, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eb5SIEHiKkE/AAAAAAAAAAI/AAAAAAAAAA0/nTcmPdpHHnA/photo.jpg?sz=128", "display_name": "joy miao", "link": "https://stackoverflow.com/users/5835055/joy-miao"}, "is_accepted": false, "score": 2, "last_activity_date": 1453797882, "last_edit_date": 1453797882, "creation_date": 1453797434, "answer_id": 35009735, "question_id": 35009070, "link": "https://stackoverflow.com/questions/35009070/alarm-like-timer-functionality-in-golang/35009735#35009735", "title": "Alarm like timer functionality in Golang", "body": "<p>In golang,maybe there are two way create ticker,just like the following:</p>    \n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    //\u7b2c\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f \n    ticker1 := time.NewTicker(1 * time.Second)\n    i := 1\n    for c := range ticker1.C {\n        i++\n        fmt.Println(c.Format(\"2006/01/02 15:04:05.999999999\"))\n        if i &gt; 5 {\n            ticker1.Stop()\n            break\n        }\n    }\n    fmt.Println(time.Now().Format(\"2006/01/02 15:04:05.999999999\"), \" 1 Finished.\")\n\n    //\u7b2c\u4e8c\u79cd\u5b9e\u73b0\u65b9\u5f0f \n    i = 1\n    ticker2 := time.AfterFunc(1*time.Second, func() {\n        i++\n        fmt.Println(time.Now().Format(\"2006/01/02 15:04:05.999999999\"))\n    })\n\n    for {\n        select {\n        case &lt;-ticker2.C:\n            fmt.Println(\"nsmei\")\n        case &lt;-time.After(3 * time.Second):\n            if i &lt;= 5 {\n                ticker2.Reset(1 * time.Second)\n                continue\n            }\n            goto BRK\n        }\n    BRK:\n        ticker2.Stop()\n        break\n    }\n    fmt.Println(time.Now().Format(\"2006/01/02 15:04:05.999999999\"), \" 2 Finished.\")\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2016/01/26 16:46:34.261248567\n2016/01/26 16:46:35.256381743\n2016/01/26 16:46:36.259717152\n2016/01/26 16:46:37.260320837\n2016/01/26 16:46:38.259312704\n2016/01/26 16:46:38.259410752  1 Finished.\n2016/01/26 16:46:39.260604274\n2016/01/26 16:46:42.261091322\n2016/01/26 16:46:45.263136257\n2016/01/26 16:46:48.264193517\n2016/01/26 16:46:51.265655137\n2016/01/26 16:46:53.265722632  2 Finished.\n</code></pre>\n\n<p><strong>According to the execution,the first is more precise than the second.</strong><p>In your case,you can use <code>time.Time.Sub()</code> to calculate the duration,and execute once using the second method,the rest using the first method.</p></p>\n\n<p>I hope these help you!</p>\n"}, {"tags": [], "owner": {"reputation": 603, "user_id": 3359537, "user_type": "registered", "profile_image": "https://graph.facebook.com/1500817467/picture?type=large", "display_name": "Gautham", "link": "https://stackoverflow.com/users/3359537/gautham"}, "is_accepted": false, "score": 0, "last_activity_date": 1480701878, "creation_date": 1480701878, "answer_id": 40938397, "question_id": 35009070, "link": "https://stackoverflow.com/questions/35009070/alarm-like-timer-functionality-in-golang/40938397#40938397", "title": "Alarm like timer functionality in Golang", "body": "<p>The following code achieves your purpose. All you've to do is call ScheduleAlarm() in the manner shown in the main() function below.</p>\n\n<pre><code>package main\n\nimport (\n    \"strings\"\n    \"strconv\"\n    \"fmt\"\n    \"time\"\n)\n\n// A struct for representing time.\ntype Time struct {\n    Hh int // Hours.\n    Mm int // Minutes.\n    Ss int // Seconds.\n}\n\nfunc main() {\n    /*\n    Set the alarm as shown below.\n    Time must be specified in 24 hour clock format.\n    Also, pass the callback to be called after the alarm is triggered.\n    */\n    alarm := ScheduleAlarm(Time{23, 28, 0}, func() {\n        fmt.Println(\"alarm received\")\n    })\n\n    // Do your stuff.\n    for i := 0; i &lt; 10; i++ {\n        fmt.Println(i)\n        time.Sleep(2 * time.Second)\n    }\n\n    // Don't forget to call the below line whenever you want to block.\n    &lt;-alarm\n}\n\n// Call this function to schedule the alarm. The callback will be called after the alarm is triggered.\nfunc ScheduleAlarm(alarmTime Time, callback func() ()) (endRecSignal chan string) {\n    endRecSignal = make(chan string)\n    go func() {\n        timeSplice := strings.Split(time.Now().Format(\"15:04:05\"), \":\")\n        hh, _ := strconv.Atoi(timeSplice[0])\n        mm, _ := strconv.Atoi(timeSplice[1])\n        ss, _ := strconv.Atoi(timeSplice[2])\n\n        startAlarm := GetDiffSeconds(Time{hh, mm, ss}, alarmTime)\n\n        // Setting alarm.\n        time.AfterFunc(time.Duration(startAlarm) * time.Second, func() {\n            callback()\n            endRecSignal &lt;- \"finished recording\"\n            close(endRecSignal)\n        })\n    }()\n    return\n}\n\nfunc GetDiffSeconds(fromTime, toTime Time) int {\n    fromSec := GetSeconds(fromTime)\n    toSec := GetSeconds(toTime)\n    diff := toSec - fromSec\n\n    if diff &lt; 0 {\n        return diff + 24 * 60 * 60\n    } else {\n        return diff\n    }\n}\n\nfunc GetSeconds(time Time) int {\n    return time.Hh * 60 * 60 + time.Mm * 60 + time.Ss\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 200, "user_id": 2520654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d427c521de710be9699674208b28ddc?s=128&d=identicon&r=PG", "display_name": "Shalin LK", "link": "https://stackoverflow.com/users/2520654/shalin-lk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2839, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1480701878, "creation_date": 1453794676, "last_edit_date": 1453795488, "question_id": 35009070, "link": "https://stackoverflow.com/questions/35009070/alarm-like-timer-functionality-in-golang", "title": "Alarm like timer functionality in Golang", "body": "<p>Is there any way for designing a timer that expires on a specific future time in Golang ? I mean a timer that expires on 2AM (let the current time be 12AM). I know one way is to use, </p>\n\n<pre><code> timer(target_future_time - current_time)   \n</code></pre>\n\n<p>but doesn't seem to be an exact way of doing it (may not be accurate on considering the execution time). Can anyone help please?</p>\n"}, {"tags": ["google-app-engine", "go"], "answers": [{"tags": [], "owner": {"reputation": 634, "user_id": 13421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a8231485a55282e64bdbad8e6824a00?s=128&d=identicon&r=PG", "display_name": "coffeepac", "link": "https://stackoverflow.com/users/13421/coffeepac"}, "is_accepted": false, "score": 0, "last_activity_date": 1453789081, "creation_date": 1453789081, "answer_id": 35007998, "question_id": 35007916, "link": "https://stackoverflow.com/questions/35007916/google-appengine-golang-api-instanceclass/35007998#35007998", "title": "google appengine golang API - InstanceClass", "body": "<p>F1, F2, F4 and F4_1G work fine.  I had an error elsewhere that was confounding my verification.  </p>\n"}], "owner": {"reputation": 634, "user_id": 13421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a8231485a55282e64bdbad8e6824a00?s=128&d=identicon&r=PG", "display_name": "coffeepac", "link": "https://stackoverflow.com/users/13421/coffeepac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453789081, "creation_date": 1453788542, "question_id": 35007916, "link": "https://stackoverflow.com/questions/35007916/google-appengine-golang-api-instanceclass", "title": "google appengine golang API - InstanceClass", "body": "<p>I'm writing an application that deploys code to google appengine using the golang API (<a href=\"https://godoc.org/google.golang.org/api/appengine/v1beta4\" rel=\"nofollow\">https://godoc.org/google.golang.org/api/appengine/v1beta4</a>).  For scaling I am using the AutomaticScaling option.  This should mean I can set instance class to F1, F2, F4 or F4_1G.  However, I get the following response every time I attempt to set InstanceClass to anything:</p>\n\n<pre><code>{\n  \"error\": {\n    \"code\": 400,\n    \"message\": \"Request contains an invalid argument.\",\n    \"errors\": [\n      {\n        \"message\": \"Request contains an invalid argument.\",\n        \"domain\": \"global\",\n        \"reason\": \"badRequest\"\n      }\n    ],\n    \"status\": \"INVALID_ARGUMENT\"\n  }\n}\n</code></pre>\n\n<p>Anyone know what the correct value is to specify InstanceClass?</p>\n\n<p>Code:</p>\n\n<pre><code>version := &amp;appengine.Version{\n            AutomaticScaling: automaticScaling,\n            Deployment:deployment, \n            Handlers: handlers, \n            Id: \"5\", \n            Runtime: \"java7\",\n            InstanceClass: \"F1\",\n            InboundServices: inbound_services,\n            Threadsafe: true,\n        }\n</code></pre>\n"}, {"tags": ["go", "package", "influxdb"], "answers": [{"tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1453785552, "last_edit_date": 1453785552, "creation_date": 1453784930, "answer_id": 35007373, "question_id": 35007249, "link": "https://stackoverflow.com/questions/35007249/missing-symbols-when-importing-github-com-influxdb-influxdb-client-v2-package/35007373#35007373", "title": "Missing symbols when importing `github.com/influxdb/influxdb/client/v2` package", "body": "<p>You local machine has a version of github.com/influxdb/influxdb/client/v2 before <a href=\"https://github.com/influxdata/influxdb/commit/b0e9f7e844225b05abf9f4455229490f99348ac4\" rel=\"nofollow\">this commit</a>. Your cloud server is fetching a more recent version of the package.</p>\n\n<p>To fix the issue, run </p>\n\n<pre><code>go get -u github.com/influxdb/influxdb/client/v2\n</code></pre>\n\n<p>on your local machine to get the latest version of the package. Update the application code to use the new function and type names:</p>\n\n<pre><code>influx_c := client.NewHTTPClient(client.HTTPConfig{\n        URL: u,\n        Username: username,\n        Password: password,\n })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 3582467, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/805cee70da40b10138134970787daed0?s=128&d=identicon&r=PG", "display_name": "abgordon", "link": "https://stackoverflow.com/users/3582467/abgordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1453786125, "creation_date": 1453786125, "answer_id": 35007545, "question_id": 35007249, "link": "https://stackoverflow.com/questions/35007249/missing-symbols-when-importing-github-com-influxdb-influxdb-client-v2-package/35007545#35007545", "title": "Missing symbols when importing `github.com/influxdb/influxdb/client/v2` package", "body": "<p>Nailed it, thanks! Also note from following code:</p>\n\n<pre><code>influx_c,err := client.NewHTTPClient(client.HTTPConfig{\n    Addr: \"http://localhost:8086\",\n    Username: username,\n    Password: password,\n})\n</code></pre>\n\n<p>They changed URL field to Addr, with is a string literal instead of a net/url object </p>\n"}], "owner": {"reputation": 587, "user_id": 3582467, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/805cee70da40b10138134970787daed0?s=128&d=identicon&r=PG", "display_name": "abgordon", "link": "https://stackoverflow.com/users/3582467/abgordon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 35007373, "answer_count": 2, "score": 0, "last_activity_date": 1453801096, "creation_date": 1453784058, "last_edit_date": 1453801096, "question_id": 35007249, "link": "https://stackoverflow.com/questions/35007249/missing-symbols-when-importing-github-com-influxdb-influxdb-client-v2-package", "title": "Missing symbols when importing `github.com/influxdb/influxdb/client/v2` package", "body": "<p>Setting up a web socket on google cloud in Golang, and import code that works fine on my local machine does not work on the cloud. </p>\n\n<p>I have:</p>\n\n<pre><code>import \"github.com/influxdb/influxdb/client/v2\"\n</code></pre>\n\n<p>and have run </p>\n\n<pre><code>go get \"github.com/influxdb/influxdb/client/v2\"\n</code></pre>\n\n<p>Upon running go run server.go I get:</p>\n\n<pre><code># command-line-arguments\n./pi_server.go:47: undefined: client.NewClient\n./pi_server.go:47: undefined: client.Config\n</code></pre>\n\n<p>Full code below, excluding const declarations and html:</p>\n\n<pre><code>package main\n\nimport (\n    \"flag\"\n    \"html/template\"\n    \"log\"\n    \"net/http\"\n    \"github.com/gorilla/websocket\"\n    \"fmt\"\n    \"net/url\"\n    \"github.com/influxdb/influxdb/client/v2\"\n    \"time\"\n)\n\nvar addr = flag.String(\"addr\", \"localhost:8080\", \"http service address\")\n\nvar upgrader = websocket.Upgrader{} // use default options\n\nfunc echo(w http.ResponseWriter, r *http.Request) {\n\n    //Influx init\n    u,err := url.Parse(\"http://localhost:8086\")\n    checkError(err)\n    influx_c := client.NewClient(client.Config{\n            URL: u,\n            Username: username,\n            Password: password,\n     })\n    bp,err := client.NewBatchPoints(client.BatchPointsConfig{\n        Database:  MyDB,\n        Precision: \"s\",\n    })\n    tags := map[string]string{\"my_sensor_id\": my_sensor_id}\n    //end influx init\n\n\n\n    c, err := upgrader.Upgrade(w, r, nil)\n    if err != nil {\n        log.Print(\"upgrade:\", err)\n        return\n    }\n    defer c.Close()\n    for {\n        mt, message, err := c.ReadMessage()\n        if err != nil {\n            log.Println(\"read:\", err)\n            break\n        }\n        log.Printf(\"recv: %s\", message)\n\n        /*\n            write to influx here\n        */ \n        fields := map[string]interface{}{\n            \"random_int\":   message,\n            \"other_stuff\":  69696,\n        }\n        pt,err := client.NewPoint(\"test_collection\", tags, fields, time.Now())\n        checkError(err)\n        bp.AddPoint(pt)\n        influx_c.Write(bp)\n\n\n\n        err = c.WriteMessage(mt, message)\n        if err != nil {\n            log.Println(\"write:\", err)\n            break\n        }\n    }\n}\n\nfunc home(w http.ResponseWriter, r *http.Request) {\n    homeTemplate.Execute(w, \"ws://\"+r.Host+\"/echo\", )\n}\n\nfunc main() {\n\n\n    flag.Parse()\n    log.SetFlags(0)\n    http.HandleFunc(\"/echo\", echo)\n    http.HandleFunc(\"/\", home)\n    log.Fatal(http.ListenAndServe(*addr, nil))\n}\n</code></pre>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 5905, "user_id": 172754, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/efa5682f70f80f7f60a1d0d0f406a042?s=128&d=identicon&r=PG", "display_name": "Gert Cuykens", "link": "https://stackoverflow.com/users/172754/gert-cuykens"}, "edited": false, "score": 0, "creation_date": 1453781080, "post_id": 35006854, "comment_id": 57741380, "body": "Thank you, I see now :) PS maybe add the same example to your answer with printf maybe that does print the zero&#39;s if you have time."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 5905, "user_id": 172754, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/efa5682f70f80f7f60a1d0d0f406a042?s=128&d=identicon&r=PG", "display_name": "Gert Cuykens", "link": "https://stackoverflow.com/users/172754/gert-cuykens"}, "edited": false, "score": 1, "creation_date": 1453781364, "post_id": 35006854, "comment_id": 57741434, "body": "@GertCuykens Yes, but format <code>%08p</code> and <code>%08x</code> will always pad to 8 hexa digits even if the argument is less than 4 bytes..."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 6, "last_activity_date": 1453793869, "last_edit_date": 1453793869, "creation_date": 1453780733, "answer_id": 35006854, "question_id": 35006766, "link": "https://stackoverflow.com/questions/35006766/why-is-the-address-size-different-0x206a10-0x104382e0/35006854#35006854", "title": "Why is the address size different? (0x206a10 - 0x104382e0)", "body": "<p>It's not the address size what is different, it's the size (length) of the hexadecimal representation as you printed it.</p>\n\n<p>All addresses you print on the Go Playground are 4 bytes, but if the first bytes (or bits) are zero, they are not printed.</p>\n\n<p>Also if you take a closer look, addresses of your global vars have 6 hexa digits, pointers allocated and returned by <code>new()</code> have 8 hexa digits. This is because those <code>int</code>s (returned by <code>new()</code>) are allocated on the heap with bigger offset (and thus \"bigger\" memory address).</p>\n\n<p>For example:</p>\n\n<pre><code>var i, j int32 = 123, 123000\nfmt.Printf(\"%x %x\\n\", i, j)\n</code></pre>\n\n<p>Prints <code>7b 1e078</code> even though both numbers are 4 bytes long (32 bits). You may use a format string to add padding <code>0</code>s like this:</p>\n\n<pre><code>fmt.Printf(\"%08x %08x\\n\", i, j)\n</code></pre>\n\n<p>Which results in <code>0000007b 0001e078</code> but this will always pad to 8 digits even if <code>i</code> or <code>j</code> would be \"less\" than 4 bytes (e.g. <code>int16</code>), so this padding won't tell you if they are of different sizes.</p>\n"}], "owner": {"reputation": 5905, "user_id": 172754, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/efa5682f70f80f7f60a1d0d0f406a042?s=128&d=identicon&r=PG", "display_name": "Gert Cuykens", "link": "https://stackoverflow.com/users/172754/gert-cuykens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 35006854, "answer_count": 1, "score": 2, "last_activity_date": 1453793869, "creation_date": 1453780012, "last_edit_date": 1453780373, "question_id": 35006766, "link": "https://stackoverflow.com/questions/35006766/why-is-the-address-size-different-0x206a10-0x104382e0", "title": "Why is the address size different? (0x206a10 - 0x104382e0)", "body": "<p><a href=\"http://play.golang.org/p/BgnHN-GikU\" rel=\"nofollow\">http://play.golang.org/p/BgnHN-GikU</a></p>\n\n<pre><code>var p1 = new(int)\nvar p2 *int = new(int)\nvar p3 = 0\nvar p4 *int\n\nfunc main() {\n    fmt.Println(*p1, &amp;p1, p1)\n    fmt.Println()\n    fmt.Println(*p2, &amp;p2, p2)\n    fmt.Println()\n    fmt.Println(p3, &amp;p3)\n    fmt.Println()\n    fmt.Println(p4, &amp;p4)\n}\n</code></pre>\n\n<p>0 0x206a10 0x104382e0</p>\n\n<p>0 0x206a14 0x104382f0</p>\n\n<p>0 0x21ccc0</p>\n\n<p><code>&lt;nil&gt;</code> 0x206a18</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 3, "creation_date": 1453795646, "post_id": 35006640, "comment_id": 57745842, "body": "Go is not Java. Go has no inheritance and no &quot;is a&quot; concept. Your attempt to model your problem looks like a direct translation from Java to Go. This will not work. Technically joy miao&#39;s answer is a complete and sensible explanation. Go is statically typed and a <code>*Lion</code> is not a <code>Cat</code>, even if a <code>*Lion</code> is assignable to a variable of type <code>Cat</code>; but assignability plays no role while matching type signatures. There is no need for factories in Go. Take a look at how the stdlib does things and stop writing Java code in Go."}, {"owner": {"reputation": 313, "user_id": 2340320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2534b9b9a431ca3109bae4f4aade35ed?s=128&d=identicon&r=PG&f=1", "display_name": "zian", "link": "https://stackoverflow.com/users/2340320/zian"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 5, "creation_date": 1453824709, "post_id": 35006640, "comment_id": 57763612, "body": "Using a function as a type is not something that is unique to Java, @Volker.  This code is not translated from Java."}, {"owner": {"reputation": 1159, "user_id": 666397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097ee41669d9e37f526dfcf396a632b0?s=128&d=identicon&r=PG", "display_name": "Atifm", "link": "https://stackoverflow.com/users/666397/atifm"}, "edited": false, "score": 0, "creation_date": 1570049915, "post_id": 35006640, "comment_id": 102796324, "body": "It works fine with a few changes: <a href=\"https://play.golang.org/p/ECSpoOIuzEx\" rel=\"nofollow noreferrer\">play.golang.org/p/ECSpoOIuzEx</a> It&#39;s not really a problem regarding inheritance.  Go has a smaller subject of OO constructs, just as Java has a smaller subset relative to C++"}], "answers": [{"comments": [{"owner": {"reputation": 1895, "user_id": 702772, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f52d6eda1d907af7b1a7b477eeed8fd8?s=128&d=identicon&r=PG", "display_name": "vutran", "link": "https://stackoverflow.com/users/702772/vutran"}, "edited": false, "score": 2, "creation_date": 1453784518, "post_id": 35007285, "comment_id": 57742236, "body": "Sure your code might work but this is not a good answer, he is not seeking for working code, he wants an explanation."}, {"owner": {"reputation": 313, "user_id": 2340320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2534b9b9a431ca3109bae4f4aade35ed?s=128&d=identicon&r=PG&f=1", "display_name": "zian", "link": "https://stackoverflow.com/users/2340320/zian"}, "edited": false, "score": 1, "creation_date": 1453785525, "post_id": 35007285, "comment_id": 57742468, "body": "In my use case, the Cat interface is defined in a separate go package that I do not wish to import into the go package where the Lion struct is defined. So I cannot just change the return type of the CreateLion function as you have suggested."}, {"owner": {"reputation": 858, "user_id": 3061962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40eae6978e593e2568f0ee35892c0d63?s=128&d=identicon&r=PG", "display_name": "Oleksiy Chechel", "link": "https://stackoverflow.com/users/3061962/oleksiy-chechel"}, "edited": false, "score": 0, "creation_date": 1453792659, "post_id": 35007285, "comment_id": 57744645, "body": "You can&#39;t assign func struct to func interface{}. Situation similar []interface{} - []struct. Because it&#39;s different types."}, {"owner": {"reputation": 1169, "user_id": 451246, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/k8Nkj.jpg?s=128&g=1", "display_name": "Ehsan Kia", "link": "https://stackoverflow.com/users/451246/ehsan-kia"}, "edited": false, "score": 1, "creation_date": 1547087700, "post_id": 35007285, "comment_id": 95074589, "body": "This answer is bad because now CreateLion returns a Cat, and you don&#39;t have access to any of the Lion-specific behaviors anymore. It makes sense for CatFactory to return a cat, but CreateLion should be returning a Lion."}, {"owner": {"reputation": 858, "user_id": 3061962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40eae6978e593e2568f0ee35892c0d63?s=128&d=identicon&r=PG", "display_name": "Oleksiy Chechel", "link": "https://stackoverflow.com/users/3061962/oleksiy-chechel"}, "edited": false, "score": 0, "creation_date": 1609031906, "post_id": 35007285, "comment_id": 115734582, "body": "CreateLion returns Lion) But interface of return value is a Cat (Lion is a big Cat)"}], "tags": [], "owner": {"reputation": 858, "user_id": 3061962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40eae6978e593e2568f0ee35892c0d63?s=128&d=identicon&r=PG", "display_name": "Oleksiy Chechel", "link": "https://stackoverflow.com/users/3061962/oleksiy-chechel"}, "is_accepted": false, "score": 15, "last_activity_date": 1453793502, "last_edit_date": 1453793502, "creation_date": 1453784343, "answer_id": 35007285, "question_id": 35006640, "link": "https://stackoverflow.com/questions/35006640/function-to-return-an-interface/35007285#35007285", "title": "function to return an Interface", "body": "<p>Try this:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Cat interface {\n    Meow()\n}\n\ntype Lion struct{}\n\nfunc (l Lion) Meow() {\n    fmt.Println(\"Roar\")\n}\n\ntype CatFactory func() Cat\n\nfunc CreateLion() Cat {\n    return Lion{}\n}\n\nfunc main() {\n    lion := CreateLion()\n    lion.Meow()\n\n    var cf CatFactory = CreateLion\n    fLion := cf()\n    fLion.Meow()\n}\n</code></pre>\n\n<p>In most cases, you can assign any type to base type <code>interface{}</code>. But situation changes if type of function parameter is a <code>map[T]interface{}</code>, <code>[]interface{}</code> or <code>func() interface{}</code>.\nIn this case the type must be the same.</p>\n"}, {"tags": [], "owner": {"reputation": 239, "user_id": 5835055, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eb5SIEHiKkE/AAAAAAAAAAI/AAAAAAAAAA0/nTcmPdpHHnA/photo.jpg?sz=128", "display_name": "joy miao", "link": "https://stackoverflow.com/users/5835055/joy-miao"}, "is_accepted": false, "score": 4, "last_activity_date": 1453785212, "creation_date": 1453785212, "answer_id": 35007411, "question_id": 35006640, "link": "https://stackoverflow.com/questions/35006640/function-to-return-an-interface/35007411#35007411", "title": "function to return an Interface", "body": "<p><p>I think you should read this blog <a href=\"http://blog.golang.org/laws-of-reflection\" rel=\"nofollow\">http://blog.golang.org/laws-of-reflection</a>,it is precise about the relation between variables,types and interfaces.<p></p>\n\n<p>In your example <code>*Lion</code> is different with <code>Cat</code>.</p>\n\n<p>You can correct function <code>CreateLion</code> returns from <code>*Lion</code> to <code>Cat</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7251210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPYtb.png?s=128&g=1", "display_name": "Qudaci", "link": "https://stackoverflow.com/users/7251210/qudaci"}, "is_accepted": false, "score": 4, "last_activity_date": 1506505934, "creation_date": 1506505934, "answer_id": 46444783, "question_id": 35006640, "link": "https://stackoverflow.com/questions/35006640/function-to-return-an-interface/46444783#46444783", "title": "function to return an Interface", "body": "<p>The problem here is that statically typed go differentiates the \"this is a function that returns a cat\" from \"this is a function that returns a lion that is a cat\" And therefore will not accept one as the other.</p>\n\n<p>The way to fix this is to give your factory var exactly what it expects:</p>\n\n<pre><code>var cf CatFactory = func() Cat{\n    return CreateLion()\n}\ncatlion := cf()\ncatlion.Meow()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 12817546, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7Y79xcMm5cw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePp9zs2ylgFHtZKiaQLj2QI9Xc7w/photo.jpg?sz=128", "display_name": "Tom L", "link": "https://stackoverflow.com/users/12817546/tom-l"}, "edited": false, "score": 0, "creation_date": 1599811749, "post_id": 58209271, "comment_id": 112895577, "body": "<code>func CreateLion() Lion {return Lion{}}</code> also works. Great answer +1."}, {"owner": {"reputation": 858, "user_id": 3061962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40eae6978e593e2568f0ee35892c0d63?s=128&d=identicon&r=PG", "display_name": "Oleksiy Chechel", "link": "https://stackoverflow.com/users/3061962/oleksiy-chechel"}, "edited": false, "score": 0, "creation_date": 1617794143, "post_id": 58209271, "comment_id": 118404379, "body": "You are just shading the variable/type. Just remove the <code>type CatFactory func () Cat</code>. It is not used in your code."}], "tags": [], "owner": {"reputation": 1159, "user_id": 666397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097ee41669d9e37f526dfcf396a632b0?s=128&d=identicon&r=PG", "display_name": "Atifm", "link": "https://stackoverflow.com/users/666397/atifm"}, "is_accepted": false, "score": 1, "last_activity_date": 1570049898, "creation_date": 1570049898, "answer_id": 58209271, "question_id": 35006640, "link": "https://stackoverflow.com/questions/35006640/function-to-return-an-interface/58209271#58209271", "title": "function to return an Interface", "body": "<p>Works fine with a few changes.  Check it out here: <a href=\"https://play.golang.org/p/ECSpoOIuzEx\" rel=\"nofollow noreferrer\">https://play.golang.org/p/ECSpoOIuzEx</a></p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    lion := CreateLion() // Go idomatic style recommends \n                         // allowing the compiler to divine the type\n    lion.Meow()\n\n    CatFactory := CreateLion\n    _ = CatFactory // Go doesn't like unused variables and fails the build\n\n    obj := CatFactory()     // exercising our factory method\n    obj.Meow()\n}\n\ntype Cat interface {\n    Meow()\n}\n\ntype Lion struct {}\nfunc (l Lion) Meow() {\n    fmt.Println(\"Roar\")\n}\n\n// define a functor that returns a Cat interface\ntype CatFactory func() Cat\n\n// define a function that returns a pointer to a Lion struct\nfunc CreateLion() *Lion {\n    return &amp;Lion{}\n}\n</code></pre>\n\n<p>Also, though Go doesn't have Java style interfaces, it does have interfaces and you can achieve polymorphism, but the types are known at compile time.  </p>\n\n<p>You can model an \"Is A\" relationship, if both types implement the same interface.  However it doesn't enforce the interface until you pass the object into a function that accepts that interface type.  So if you imagine implementing the Strategy pattern, when you're passing in the strategy object matching interface \"Cat\", that function will accept a \"Lion\" object, or any other class that implements a Meow function with the correct signature.  </p>\n\n<p>Also, factory methods are definitely necessary and useful in Go.  In fact, instead of constructors, in Go, you use factory functions to construct your objects.</p>\n"}], "owner": {"reputation": 313, "user_id": 2340320, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2534b9b9a431ca3109bae4f4aade35ed?s=128&d=identicon&r=PG&f=1", "display_name": "zian", "link": "https://stackoverflow.com/users/2340320/zian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34039, "favorite_count": 4, "answer_count": 4, "score": 16, "last_activity_date": 1608204178, "creation_date": 1453779145, "last_edit_date": 1608204178, "question_id": 35006640, "link": "https://stackoverflow.com/questions/35006640/function-to-return-an-interface", "title": "function to return an Interface", "body": "<p>The code below is really self-explanatory.</p>\n\n<p>How come I can say that the result of CreateLion(), a pointer to a struct that implements the Cat interface, is an instance of the Cat interface, and yet I cannot say that CreateLion() is of type \"function that returns the Cat interface.\"</p>\n\n<p>What is the standard Golang approach to achieving this type of behavior?</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var lion Cat := CreateLion()\n    lion.Meow()\n\n    // this line breaks. Why?\n    var cf CatFactory = CreateLion\n}\n\ntype Cat interface {\n    Meow()\n}\n\ntype Lion struct {}\nfunc (l Lion) Meow() {\n    fmt.Println(\"Roar\")\n}\n\n// define a functor that returns a Cat interface\ntype CatFactory func() Cat\n\n// define a function that returns a pointer to a Lion struct\nfunc CreateLion() *Lion {\n    return &amp;Lion{}\n}\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453780421, "post_id": 35006560, "comment_id": 57741193, "body": "<code>leak</code> always bindings to business(what your code want to do). If your program running well, leaving the routines, that&#39;s not <code>leak</code>. my opinion"}, {"owner": {"reputation": 5905, "user_id": 172754, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/efa5682f70f80f7f60a1d0d0f406a042?s=128&d=identicon&r=PG", "display_name": "Gert Cuykens", "link": "https://stackoverflow.com/users/172754/gert-cuykens"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453782155, "post_id": 35006560, "comment_id": 57741613, "body": "@JiangYD You are right I edited the question to be more precise."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1454614023, "post_id": 35006560, "comment_id": 58134947, "body": "<a href=\"https://golang.org/pkg/runtime/#GoroutineProfile\" rel=\"nofollow noreferrer\"><code>runtime.GoroutineProfile</code></a> has all the goroutines running and their stacktraces. Maybe better, <a href=\"http://stackoverflow.com/questions/19094099/how-to-dump-goroutine-stacktraces\">this answer describes using <code>runtime&#47;pprof</code></a> to get the whole traces printed. It&#39;s up to you then to figure out if the number of routines running is expected or not, of course."}], "answers": [{"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 2, "last_activity_date": 1454613790, "last_edit_date": 1454613790, "creation_date": 1453779909, "answer_id": 35006758, "question_id": 35006560, "link": "https://stackoverflow.com/questions/35006560/is-there-a-tool-to-detect-when-i-forget-to-close-goroutines/35006758#35006758", "title": "Is there a tool to detect when I forget to close goroutines?", "body": "<p>Yes, you are leaking 9 goroutines in you first example.</p>\n\n<p>I don't believe there's any tool to tell you this.</p>\n\n<p>would be an interesting thing to make, if there's a way to query for all existing non-system (ie: gc) goroutines.</p>\n\n<p>Probably can do something with: <a href=\"https://golang.org/pkg/runtime/#Stack\" rel=\"nofollow\">runtime.Stack</a>, but it would be super-specific \nto a given codebase as you likely have some \"good\" goroutines and some \"rogue\" ones.</p>\n\n<p>Update: Feb 4, 2016</p>\n\n<p>I got curious on this, so I made a really simple (and terribly named) library to do a diff of goroutines over time.  A simplistic leak detector.   <a href=\"https://github.com/dbudworth/greak\" rel=\"nofollow\">https://github.com/dbudworth/greak</a></p>\n"}], "owner": {"reputation": 5905, "user_id": 172754, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/efa5682f70f80f7f60a1d0d0f406a042?s=128&d=identicon&r=PG", "display_name": "Gert Cuykens", "link": "https://stackoverflow.com/users/172754/gert-cuykens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "accepted_answer_id": 35006758, "answer_count": 1, "score": 5, "last_activity_date": 1454613790, "creation_date": 1453778579, "last_edit_date": 1453782318, "question_id": 35006560, "link": "https://stackoverflow.com/questions/35006560/is-there-a-tool-to-detect-when-i-forget-to-close-goroutines", "title": "Is there a tool to detect when I forget to close goroutines?", "body": "<p>When I do this</p>\n\n<pre><code>done := make(chan bool)\nfor i := 0; i &lt; 10; i++ {\n    go func() {\n        done &lt;- true\n    }()\n}\n&lt;-done\n</code></pre>\n\n<p>instead of this</p>\n\n<pre><code>done := make(chan bool)\nfor i := 0; i &lt; 10; i++ {\n    go func() {\n        done &lt;- true\n    }()\n}\nfor i := 0; i &lt; 10; i++ {\n    &lt;-done\n}\n</code></pre>\n\n<p>Am I leaking goroutines if I do not close them and Is there a tool to detect when I forget to close goroutines?</p>\n"}, {"tags": ["go", "gob"], "comments": [{"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453779810, "post_id": 35006167, "comment_id": 57741015, "body": "<a href=\"http://stackoverflow.com/questions/32428797/go-rpc-call-is-fine-locally-marshalling-issue-when-using-rpc/32430429#32430429\" title=\"go rpc call is fine locally marshalling issue when using rpc\">stackoverflow.com/questions/32428797/&hellip;</a>"}, {"owner": {"reputation": 16811, "user_id": 1305253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/455f776955f148ffad8174a9b69aa4ba?s=128&d=identicon&r=PG", "display_name": "rolfl", "link": "https://stackoverflow.com/users/1305253/rolfl"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453780137, "post_id": 35006167, "comment_id": 57741111, "body": "@JiangYD - that Unmarshal method is for <code>encoding&#47;json</code>. Is there an equivalent for <code>encoding&#47;gob</code>?"}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453780259, "post_id": 35006167, "comment_id": 57741140, "body": "<a href=\"https://golang.org/pkg/encoding/gob/#GobDecoder\" rel=\"nofollow noreferrer\">golang.org/pkg/encoding/gob/#GobDecoder</a>"}, {"owner": {"reputation": 16811, "user_id": 1305253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/455f776955f148ffad8174a9b69aa4ba?s=128&d=identicon&r=PG", "display_name": "rolfl", "link": "https://stackoverflow.com/users/1305253/rolfl"}, "reply_to_user": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453780315, "post_id": 35006167, "comment_id": 57741159, "body": "OK, @JiangYD - the code I have in the question is using GobDecoder and GobEncoder (and it&#39;s working when the interface is embedded in a struct, but not when the interface is stand-alone)."}, {"owner": {"reputation": 2888, "user_id": 3555300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7112ac796e7b182256ac77ab9724d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jiang YD", "link": "https://stackoverflow.com/users/3555300/jiang-yd"}, "edited": false, "score": 0, "creation_date": 1453780594, "post_id": 35006167, "comment_id": 57741244, "body": "that&#39;s not broke the <code>the reflector knows the underlying type</code> problem. change interface to struct, and embed the dynamic types in that struct."}], "answers": [{"comments": [{"owner": {"reputation": 16811, "user_id": 1305253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/455f776955f148ffad8174a9b69aa4ba?s=128&d=identicon&r=PG", "display_name": "rolfl", "link": "https://stackoverflow.com/users/1305253/rolfl"}, "edited": false, "score": 0, "creation_date": 1453806442, "post_id": 35007244, "comment_id": 57751743, "body": "So, when encoding a &quot;raw&quot; interface &#39;instance&#39;, a simple <code>&amp;</code> in front of the variable is the magic, I really appreciate the link to that interfaces document too, Still reading it. I am going to declare the requirement to double-dereference the interface when encoding as &quot;finicky&quot; especially when the symptom of the problem is seen at decode time, not encode time. I guess if I look at the actual encoded stream I should see the difference though."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": true, "score": 6, "last_activity_date": 1453786697, "last_edit_date": 1453786697, "creation_date": 1453784041, "answer_id": 35007244, "question_id": 35006167, "link": "https://stackoverflow.com/questions/35006167/difference-between-gob-decoding-an-interface-in-a-struct-vs-raw/35007244#35007244", "title": "Difference between gob decoding an interface in a struct, vs. raw", "body": "<p>The call </p>\n\n<pre><code>err = enc.Encode(baggins)\n</code></pre>\n\n<p>passes an <code>impl</code> value to <code>Encode</code>.  It does not pass a value of type <code>IFace</code>.   The document <a href=\"http://research.swtch.com/interfaces\" rel=\"noreferrer\">http://research.swtch.com/interfaces</a> may be helpful in understanding why this is. The value is encoded as the concrete type <code>impl</code>. </p>\n\n<p>If you want to decode to an interface type, then you must encode an interface type. One way to do this is to pass a pointer to the interface value:</p>\n\n<pre><code>err = enc.Encode(&amp;baggins)\n</code></pre>\n\n<p>In this call, a <code>*IFace</code> is passed to Encode. After dereferencing the pointer, the encoder sees that the value is an interface type and encodes it as an interface type. Because the gob package does all necessary dereferencing and indirection when converting values, the extra level of indirection on the call to Encode does not require an extra level of indirection when decoding.</p>\n\n<p><kbd><a href=\"http://play.golang.org/p/YOCauG6Enh\" rel=\"noreferrer\">playground example</a></kbd></p>\n"}], "owner": {"reputation": 16811, "user_id": 1305253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/455f776955f148ffad8174a9b69aa4ba?s=128&d=identicon&r=PG", "display_name": "rolfl", "link": "https://stackoverflow.com/users/1305253/rolfl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3571, "favorite_count": 0, "accepted_answer_id": 35007244, "answer_count": 1, "score": 5, "last_activity_date": 1453786697, "creation_date": 1453775725, "question_id": 35006167, "link": "https://stackoverflow.com/questions/35006167/difference-between-gob-decoding-an-interface-in-a-struct-vs-raw", "title": "Difference between gob decoding an interface in a struct, vs. raw", "body": "<p>I have been struggling to understand the difference between encoding/decoding an interface type when that type is embedded in a struct, vs. when it's not embedded at all.</p>\n\n<p>Using the following example: <a href=\"http://play.golang.org/p/pM8XgonIwH\" rel=\"noreferrer\">here in the playground</a></p>\n\n<p>Note the code declares an interface <code>IFace</code>. It declares a non-exported struct <code>impl</code>. It sets up a few Gob methods to <code>Register</code>, <code>GobEncode</code>, and <code>GobDecode</code> the <code>impl</code> struct.</p>\n\n<p>Then, it also declares a struct <code>Data</code> which is exported, and has a single field <code>Foo</code> which is of the interface type <code>IFace</code>.</p>\n\n<p>So, there's an interface, a struct which implements it, and a container struct which has a field whose value is that interface type.</p>\n\n<p>My problem is that the container struct <code>Data</code> is happily sent through the Gob gauntlet, and, when it goes through, it happily encodes and decodes the IFace field in the <code>Data</code> struct... great! But, I cannot seem to be able to send just an instance of the IFace value through the gob gauntlet.</p>\n\n<p>What is the magic invocation I am missing?</p>\n\n<p>Searching for the error message gives a number of results, but I believe I have satisfied the Gob contract.... and the \"proof\" of that is in the successful struct gobbing. Obviously I have missed something, but can't see it.</p>\n\n<p>Note, the output of the program is:</p>\n\n<pre><code>Encoding {IFace:bilbo} now\nEncoding IFace:baggins now\nDecoded {IFace:bilbo} now\ndecode error: gob: local interface type *main.IFace can only be decoded from remote interface type; received concrete type impl\nDecoded &lt;nil&gt; now\n</code></pre>\n\n<p>The actual code is:</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/gob\"\n    \"fmt\"\n)\n\ntype IFace interface {\n    FooBar() string\n}\n\ntype impl struct {\n    value string\n}\n\nfunc init() {\n    gob.Register(impl{})\n}\n\nfunc (i impl) FooBar() string {\n    return i.value\n}\n\nfunc (i impl) String() string {\n    return \"IFace:\" + i.value\n}\n\nfunc (i impl) GobEncode() ([]byte, error) {\n    return []byte(i.value), nil\n}\n\nfunc (i *impl) GobDecode(dat []byte) error {\n    val := string(dat)\n    i.value = val\n    return nil\n}\n\nfunc newIFace(val string) IFace {\n    return impl{val}\n}\n\ntype Data struct {\n    Foo IFace\n}\n\nfunc main() {\n\n    var network bytes.Buffer        // Stand-in for a network connection\n    enc := gob.NewEncoder(&amp;network) // Will write to network.\n    dec := gob.NewDecoder(&amp;network) // Will read from network.\n\n    var err error\n\n    var bilbo IFace\n    bilbo = newIFace(\"bilbo\")\n\n    var baggins IFace\n    baggins = newIFace(\"baggins\")\n\n    dat := Data{bilbo}\n\n    fmt.Printf(\"Encoding %v now\\n\", dat)\n    err = enc.Encode(dat)\n    if err != nil {\n        fmt.Println(\"encode error:\", err)\n    }\n\n    fmt.Printf(\"Encoding %v now\\n\", baggins)\n    err = enc.Encode(baggins)\n    if err != nil {\n        fmt.Println(\"encode error:\", err)\n    }\n\n    var pdat Data\n    err = dec.Decode(&amp;pdat)\n    if err != nil {\n        fmt.Println(\"decode error:\", err)\n    }\n    fmt.Printf(\"Decoded %v now\\n\", pdat)\n\n    var pbag IFace\n    err = dec.Decode(&amp;pbag)\n    if err != nil {\n        fmt.Println(\"decode error:\", err)\n    }\n    fmt.Printf(\"Decoded %v now\\n\", pbag)\n\n}\n</code></pre>\n"}, {"tags": ["go", "machine-learning"], "answers": [{"tags": [], "owner": {"reputation": 604, "user_id": 854911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-302baaBxp8Q/AAAAAAAAAAI/AAAAAAAAABA/-K5SxmEim-A/photo.jpg?sz=128", "display_name": "struct", "link": "https://stackoverflow.com/users/854911/struct"}, "is_accepted": false, "score": 0, "last_activity_date": 1468276881, "creation_date": 1468276881, "answer_id": 38317323, "question_id": 35005532, "link": "https://stackoverflow.com/questions/35005532/getting-nil-while-using-predict-function-in-golearn/38317323#38317323", "title": "Getting &lt;nil&gt; while using .Predict() function in golearn", "body": "<p>(Just in case anybody's stumbled across this on Google). The issue tends to arise when the second <code>ParseCSVToInstances</code> produces instances which are subtly different from the first. To ensure that this isn't the problem, use <a href=\"https://godoc.org/github.com/sjwhitworth/golearn/base#ParseCSVToTemplatedInstances\" rel=\"nofollow\"><code>ParseCSVToTemplatedInstances</code></a>, so </p>\n\n<pre><code>testData, err := base.ParseCSVToInstances(\"~/Desktop/churn_test.csv\", false)\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code> testData, err := base.ParseCSVToTemplatedInstances(\"~/Desktop/churn_test.csv\", false, trainData)\n</code></pre>\n"}], "owner": {"reputation": 952, "user_id": 5505161, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c62b36b7d0f6241b61ef9e9a671240a5?s=128&d=identicon&r=PG&f=1", "display_name": "lordingtar", "link": "https://stackoverflow.com/users/5505161/lordingtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1468276881, "creation_date": 1453771269, "question_id": 35005532, "link": "https://stackoverflow.com/questions/35005532/getting-nil-while-using-predict-function-in-golearn", "title": "Getting &lt;nil&gt; while using .Predict() function in golearn", "body": "<p>I'm playing around with the knnclassifier_iris.go example in the golearn examples folder. I replaced the iris dataset with one of my own, and as long as I train my data on some percentage of the data I read in, all functions work fine and I get some output. However, when I clearly mention a training and testing dataset, and then run predict on the test dataset after fitting the training dataset, I get a nil result when I try to print the predictions. I don't know why I'm getting a nil value, so I would really appreciate some help. </p>\n\n<p>My code:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"github.com/sjwhitworth/golearn/base\"\n    \"github.com/sjwhitworth/golearn/evaluation\"\n    \"github.com/sjwhitworth/golearn/knn\"\n)\n\nfunc main() {\n    trainData, err := base.ParseCSVToInstances(\"~/Desktop/churn_train.csv\", true)\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(trainData)\n    testData, err := base.ParseCSVToInstances(\"~/Desktop/churn_test.csv\", false)\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(trainData)\n    fmt.Println(testData)\n\n    //Initialises a new KNN classifier\n    cls := knn.NewKnnClassifier(\"euclidean\", 2)\n    cls.Fit(trainData)\n\n//Calculates the Euclidean distance and returns the most popular label\n    predictions := cls.Predict(testData)\n    fmt.Println(predictions) //GETTING &lt;NIL&gt; AS OUTPUT\n\n    // Prints precision/recall metrics\n    confusionMat, err := evaluation.GetConfusionMatrix(testData, predictions)\n    if err != nil {\n        panic(fmt.Sprintf(\"Unable to get confusion matrix: %s\", err.Error())) //ERROR CAUSED HERE DUE TO GETTING &lt;NIL&gt;\n    }\n    fmt.Println(evaluation.GetSummary(confusionMat))\n\n}\n</code></pre>\n"}, {"tags": ["go", "hashmap"], "comments": [{"owner": {"reputation": 1122, "user_id": 4970650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496526a825adf2e6587a19d3a6d391f7?s=128&d=identicon&r=PG", "display_name": "Cirelli94", "link": "https://stackoverflow.com/users/4970650/cirelli94"}, "edited": false, "score": 2, "creation_date": 1583934426, "post_id": 35005261, "comment_id": 107278952, "body": "This question has a lot of upvote but I think there&#39;s a little misunderstanding here: a map can be <code>nil</code> or can be initialized and with 0 value inside that. This are two different situations!"}], "answers": [{"comments": [{"owner": {"reputation": 1783, "user_id": 4042398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea300bb172f4c250bd5532be1cdc448?s=128&d=identicon&r=PG", "display_name": "Slava Bacherikov", "link": "https://stackoverflow.com/users/4042398/slava-bacherikov"}, "edited": false, "score": 12, "creation_date": 1534082232, "post_id": 35005294, "comment_id": 90574068, "body": "For those who is wondering about complexity it is O(1). Here&#39;s <a href=\"https://github.com/golang/go/blob/5c11480631f5654e9e6937ff08c453660138c64d/src/runtime/map.go#L111\" rel=\"nofollow noreferrer\">implementation</a>."}], "tags": [], "owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "is_accepted": true, "score": 136, "last_activity_date": 1453769701, "creation_date": 1453769701, "answer_id": 35005294, "question_id": 35005261, "link": "https://stackoverflow.com/questions/35005261/how-to-check-if-a-map-is-empty-in-golang/35005294#35005294", "title": "How to check if a map is empty in Golang?", "body": "<p>You can use <code>len</code>:</p>\n\n<pre><code>if len(map) == 0 {\n    ....\n}\n</code></pre>\n\n<p>From <a href=\"https://golang.org/ref/spec#Length_and_capacity\" rel=\"noreferrer\">https://golang.org/ref/spec#Length_and_capacity</a></p>\n\n<blockquote>\n  <p>len(s) map[K]T          map length (number of defined keys)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1606238808, "post_id": 61956476, "comment_id": 114901117, "body": "<code>new(map[int64]string)</code> return a uninitialized pointer to a map. You can&#39;t use that to check if the map is empty."}], "tags": [], "owner": {"reputation": 11, "user_id": 2252415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba2c9eb9e2b39ef59caec05280b4144?s=128&d=identicon&r=PG", "display_name": "Mradul", "link": "https://stackoverflow.com/users/2252415/mradul"}, "is_accepted": false, "score": 0, "last_activity_date": 1590155121, "creation_date": 1590155121, "answer_id": 61956476, "question_id": 35005261, "link": "https://stackoverflow.com/questions/35005261/how-to-check-if-a-map-is-empty-in-golang/61956476#61956476", "title": "How to check if a map is empty in Golang?", "body": "<p>The following example demonstrates both the nil check and the length check that can be used for checking if a map is empty</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\nfunc main() {\n    a := new(map[int64]string)\n    if *a == nil {\n        fmt.Println(\"empty\")\n    }\n    fmt.Println(len(*a))\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>empty\n0\n</code></pre>\n"}], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62158, "favorite_count": 7, "accepted_answer_id": 35005294, "answer_count": 2, "score": 64, "last_activity_date": 1590155121, "creation_date": 1453769478, "last_edit_date": 1583076449, "question_id": 35005261, "link": "https://stackoverflow.com/questions/35005261/how-to-check-if-a-map-is-empty-in-golang", "title": "How to check if a map is empty in Golang?", "body": "<p>When the following code:</p>\n\n<pre><code>if map == nil {\n    log.Fatal(\"map is empty\")\n}\n</code></pre>\n\n<p>is run, the log statement is not executed, while <code>fmt.Println(map)</code> indicates that the map is empty:</p>\n\n<pre><code>map[]\n</code></pre>\n"}, {"tags": ["oracle", "go", "oracle11g", "oracle-call-interface", "oci8"], "comments": [{"owner": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "edited": false, "score": 0, "creation_date": 1453766836, "post_id": 35004744, "comment_id": 57737552, "body": "Have you done installation exactly like in the README ? <a href=\"https://github.com/mattn/go-oci8\" rel=\"nofollow noreferrer\">github.com/mattn/go-oci8</a> It says the following <code>You need to put oci8.pc like into your $PKG_CONFIG_PATH. oci8.pc should be like below. This is an example for windows.</code>"}, {"owner": {"reputation": 33, "user_id": 4114688, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c250d1ecb034de25cf752b38b320c1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Tuy", "link": "https://stackoverflow.com/users/4114688/tuy"}, "reply_to_user": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "edited": false, "score": 0, "creation_date": 1453767365, "post_id": 35004744, "comment_id": 57737692, "body": "I copied the sample file contents into my file and made the following changes: 1) The &quot;includedir&quot; field uses the &quot;include&quot; directory twice, so I removed one. Otherwise, it matched up with how my oracle directory is setup. 2) I added a line containing &quot;Version: 11.2&quot; after the &quot;Description&quot; line, since I was getting an error that indicated I needed such a line. 3) I was unsure of what to put in the first line (&quot;prefix&quot;), so I just put &quot;/bmc&quot; in that field. Otherwise it was exactly the same. And I did put its directory path in the PKG_CONFIG_PATH variable."}, {"owner": {"reputation": 4855, "user_id": 2510347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8b4592704ce48913b5e75f20f3727d?s=128&d=identicon&r=PG", "display_name": "Anthony Tuininga", "link": "https://stackoverflow.com/users/2510347/anthony-tuininga"}, "edited": false, "score": 0, "creation_date": 1459288107, "post_id": 35004744, "comment_id": 60216447, "body": "Are you mixing 32-bit and 64-bit? Everything needs to match."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8010385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cf186d51df9d8160d06e9844d93701?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Qamar", "link": "https://stackoverflow.com/users/8010385/osman-qamar"}, "is_accepted": false, "score": 2, "last_activity_date": 1494770302, "creation_date": 1494770302, "answer_id": 43964730, "question_id": 35004744, "link": "https://stackoverflow.com/questions/35004744/golang-oci8-error-adding-symbols-file-in-wrong-format/43964730#43964730", "title": "Golang oci8: error adding symbols: File in wrong format", "body": "<p>Looks to be the same issue I had trying to install oci8. Are you using TDM_GCC? The problem for me was that TDM_GCC has a compiler / linker bug that prevents from compiling certain files. I used ming64 instead and it worked. You can see my detailed posts regarding that here:</p>\n\n<p><a href=\"https://github.com/mattn/go-oci8/issues/75\" rel=\"nofollow noreferrer\">https://github.com/mattn/go-oci8/issues/75</a></p>\n"}], "owner": {"reputation": 33, "user_id": 4114688, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c250d1ecb034de25cf752b38b320c1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Tuy", "link": "https://stackoverflow.com/users/4114688/tuy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1494770302, "creation_date": 1453766307, "question_id": 35004744, "link": "https://stackoverflow.com/questions/35004744/golang-oci8-error-adding-symbols-file-in-wrong-format", "title": "Golang oci8: error adding symbols: File in wrong format", "body": "<p>I am trying to connect to an Oracle database in Go using <a href=\"https://github.com/mattn/go-oci8\" rel=\"nofollow\">this package</a>. I have both server and instantclient installed for both Oracle 11.2 and 12.1, and I'm following the instructions regarding the oci8.pc file. My operating system is Windows.</p>\n\n<p>However, when I run \"go get github.com/mattn/go-oci8\" (or attempt to install a program that uses the package after having gotten the package's source code directly) I get this error:</p>\n\n<pre><code># github.com/mattn/go-oci8\nC:/oraclexe/app/oracle/product/11.2.0/server/oci/lib/MSVC/oci.lib: error adding symbols: File in wrong format\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>Does anyone know what the problem is and how to fix it?</p>\n"}, {"tags": ["unit-testing", "go"], "comments": [{"owner": {"reputation": 108986, "user_id": 511529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YNRmY.jpg?s=128&g=1", "display_name": "GolezTrol", "link": "https://stackoverflow.com/users/511529/goleztrol"}, "edited": false, "score": 9, "creation_date": 1453763731, "post_id": 35004276, "comment_id": 57736567, "body": "Yes, it&#39;s possible. Put the code that is inside the loop in a separate function, and unit test that function without the loop."}, {"owner": {"reputation": 4235, "user_id": 3362420, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/sqUXZ.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3362420/daniel"}, "reply_to_user": {"reputation": 108986, "user_id": 511529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YNRmY.jpg?s=128&g=1", "display_name": "GolezTrol", "link": "https://stackoverflow.com/users/511529/goleztrol"}, "edited": false, "score": 0, "creation_date": 1453763828, "post_id": 35004276, "comment_id": 57736605, "body": "I agree with @GolezTrol.  Golez, you should put that in the answer section so I can upvote it ;-)"}, {"owner": {"reputation": 785, "user_id": 4759226, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/71e3831e96f2fb2774bc9675b2a898df?s=128&d=identicon&r=PG&f=1", "display_name": "Erick", "link": "https://stackoverflow.com/users/4759226/erick"}, "edited": false, "score": 0, "creation_date": 1453763864, "post_id": 35004276, "comment_id": 57736622, "body": "A code that loops forever? I would like to know a good scenario when it is good to have an infinite loop. That is really bad for performance. Isn&#39;t it?"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 3, "creation_date": 1453764079, "post_id": 35004276, "comment_id": 57736694, "body": "Looping forever has nothing really to do with performance.  For example, typically when you listen for tcp connections you infinite loop on a call to &quot;Accept&quot;, which blocks until someone connects to your socket.  It doesn&#39;t busy spin and eat cpu"}, {"owner": {"reputation": 108986, "user_id": 511529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YNRmY.jpg?s=128&g=1", "display_name": "GolezTrol", "link": "https://stackoverflow.com/users/511529/goleztrol"}, "edited": false, "score": 5, "creation_date": 1453798965, "post_id": 35004276, "comment_id": 57747471, "body": "Reading your update.. There is stuff that can&#39;t be unit tested. You have to live with that. All kinds of IO, the main function, and also this endless loop are just untestable, or at least untestable using a unit test, unless you have some exit condition that can be triggered from a test. But still, is it worth the effort? Code coverage is useful to measure to a certain degree, but 100% coverage doesn&#39;t mean you got all your scenarios tested either. Focus on the quality of the tests that test your core functionality first."}, {"owner": {"reputation": 1239, "user_id": 856769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/691ecfb55a585a28ed57916b7cd1bd46?s=128&d=identicon&r=PG", "display_name": "nfirvine", "link": "https://stackoverflow.com/users/856769/nfirvine"}, "edited": false, "score": 0, "creation_date": 1454373079, "post_id": 35004276, "comment_id": 58006170, "body": "Yeah, you need to question why you are testing. I would argue that <code>block</code> is not a unit as far as unit testing goes. One guideline I use is that unit tests run in the same process as the code being tested. What&#39;s the requirement you&#39;re trying to satisfy?"}, {"owner": {"reputation": 1239, "user_id": 856769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/691ecfb55a585a28ed57916b7cd1bd46?s=128&d=identicon&r=PG", "display_name": "nfirvine", "link": "https://stackoverflow.com/users/856769/nfirvine"}, "edited": false, "score": 0, "creation_date": 1454373183, "post_id": 35004276, "comment_id": 58006195, "body": "Also, your specific code is kinda pointless. Go&#39;s default handlers do what you&#39;re doing"}, {"owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "reply_to_user": {"reputation": 1239, "user_id": 856769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/691ecfb55a585a28ed57916b7cd1bd46?s=128&d=identicon&r=PG", "display_name": "nfirvine", "link": "https://stackoverflow.com/users/856769/nfirvine"}, "edited": false, "score": 0, "creation_date": 1454397850, "post_id": 35004276, "comment_id": 58013736, "body": "@nfirvine Hi can you please explain more about the handlers or give more details?"}, {"owner": {"reputation": 1239, "user_id": 856769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/691ecfb55a585a28ed57916b7cd1bd46?s=128&d=identicon&r=PG", "display_name": "nfirvine", "link": "https://stackoverflow.com/users/856769/nfirvine"}, "edited": false, "score": 0, "creation_date": 1454428627, "post_id": 35004276, "comment_id": 58034480, "body": "I might be able to find a reference in the runtime source. What I&#39;m saying is, if you simplified to just &quot;for {}&quot;, you&#39;d have the same program functionally (minus the print)."}, {"owner": {"reputation": 1239, "user_id": 856769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/691ecfb55a585a28ed57916b7cd1bd46?s=128&d=identicon&r=PG", "display_name": "nfirvine", "link": "https://stackoverflow.com/users/856769/nfirvine"}, "edited": false, "score": 0, "creation_date": 1454428932, "post_id": 35004276, "comment_id": 58034707, "body": "Actually, generally, you don&#39;t unit test package main. Put your units (AddString) in their own package, and test that"}], "answers": [{"tags": [], "owner": {"reputation": 1261, "user_id": 22079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07336bf2b6ecaca5e87cda7b99b9253?s=128&d=identicon&r=PG", "display_name": "Jeff Allen", "link": "https://stackoverflow.com/users/22079/jeff-allen"}, "is_accepted": false, "score": 6, "last_activity_date": 1454822081, "creation_date": 1454822081, "answer_id": 35250003, "question_id": 35004276, "link": "https://stackoverflow.com/questions/35004276/how-to-test-code-that-loops-forever/35250003#35250003", "title": "How to test code that loops forever", "body": "<p>Yes, it's possible. Put the code that is inside the loop in a separate function, and unit test that function without the loop. </p>\n"}, {"tags": [], "owner": {"reputation": 1201, "user_id": 651028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6d5887835c21dace586b98180544c74e?s=128&d=identicon&r=PG", "display_name": "Sergei G", "link": "https://stackoverflow.com/users/651028/sergei-g"}, "is_accepted": true, "score": 6, "last_activity_date": 1457463392, "last_edit_date": 1457463392, "creation_date": 1457462921, "answer_id": 35875545, "question_id": 35004276, "link": "https://stackoverflow.com/questions/35004276/how-to-test-code-that-loops-forever/35875545#35875545", "title": "How to test code that loops forever", "body": "<p>Introduce test delegates into your code.</p>\n\n<p>Extract your loop into a function that takes 2 functions as arguments: onBeginEvent and onEndEvent.  The functions signatures shall take: </p>\n\n<ul>\n<li>state that you want to inspect inside the test case</li>\n<li>optional: counter of loop number (so you can identify each loop).  It is optional because actual delegate implementation can count number of times it was invoked by itself.</li>\n</ul>\n\n<p>In the beginning of your loop you call OnBegingEvent(counter, currentState); than your code does its normal work and in the end you call OnEndEvent(counter, currentState);  Presumably your code has changed currentState.</p>\n\n<p>In production you could use an empty implementation of the function delegates or implement nil check in your loop.</p>\n\n<p>You can use this model to put as many checks of your processing algorithms as you want.  Let's say you have 5 checks.  Now you look back at it and realize that's becoming too hard.  You create an Interface that defines your callback  functions. These callback functions are a powerful method of changing your service behavior.  You step back one more time and realize that interface is actually your \"service's policy\" ;)</p>\n\n<p>Once you take that route you will want to stop your infinite loop somehow.  If you want a tight control within a test case you could take a 3rd function delegate that returns true if it is time to quit from the loop. Shared variable is an option to control quit condition.</p>\n\n<p>This is certainly a higher level of testing than unit testing and it is necessary in complex services.</p>\n"}], "owner": {"reputation": 20521, "user_id": 1135424, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rvwBS.jpg?s=128&g=1", "display_name": "nbari", "link": "https://stackoverflow.com/users/1135424/nbari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7826, "favorite_count": 2, "accepted_answer_id": 35875545, "answer_count": 2, "score": 11, "last_activity_date": 1533057852, "creation_date": 1453763648, "last_edit_date": 1533057852, "question_id": 35004276, "link": "https://stackoverflow.com/questions/35004276/how-to-test-code-that-loops-forever", "title": "How to test code that loops forever", "body": "<p>I have an app (<a href=\"https://github.com/epazote/epazote/blob/master/block.go\" rel=\"noreferrer\">epazote</a>) that once starts runs forever but I want to test some values before it blocks/waits until <kbd>ctrl</kbd>+<kbd>c</kbd> is pressed or is killed.</p>\n\n<p>Here is an small example: <a href=\"http://play.golang.org/p/t0spQRJB36\" rel=\"noreferrer\">http://play.golang.org/p/t0spQRJB36</a></p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    \"fmt\"\n    \"os\"\n    \"os/signal\"\n)\n\ntype IAddString interface {\n    AddString(string)\n}\n\ntype addString struct{}\n\nfunc (self *addString) AddString(s string) {\n    fmt.Println(s)\n}\n\nfunc block(a IAddString, s string) {\n\n    // test this\n    a.AddString(s)\n\n\n    // ignore this while testing\n    block := make(chan os.Signal)\n    signal.Notify(block, os.Interrupt, os.Kill)\n\n    for {\n        signalType := &lt;-block\n        switch signalType {\n\n        default:\n            signal.Stop(block)\n            fmt.Printf(\"%q signal received.\", signalType)\n            os.Exit(0)\n        }\n    }\n}\n\nfunc main() {\n    a := &amp;addString{}\n    block(a, \"foo\")\n}\n</code></pre>\n\n<p>I would like to know if is posible to ignore some parts of the code while testing, or how to test this cases, I have implemented an interface, in this case for testing <code>AddString</code>  that helped me to test some parts but have no idea of how to avoid the \"block\" and test.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>Update</strong>: Putting the code inside the loop <code>Addstring</code> in another function works but only for testing that function, but If I want to do a full code coverage, I still need to check/test the blocking part, for example how to test that is properly behaving when receiving <kbd>ctrl</kbd>+<kbd>c</kbd> or a <code>kill -HUP</code>, I was thinking on maybe creating a fake <code>signal.Notify</code> but don't know how to overwrite imported packages in case that could work. </p>\n"}, {"tags": ["templates", "go", "exec", "stdout"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453759277, "post_id": 35002965, "comment_id": 57734569, "body": "What do you mean &quot;more real time&quot;? Have you tried <a href=\"https://golang.org/pkg/os/exec/#Cmd.Output\" rel=\"nofollow noreferrer\"><code>Output</code></a> and <a href=\"https://golang.org/pkg/os/exec/#Cmd.CombinedOutput\" rel=\"nofollow noreferrer\"><code>CombinedOutput</code></a>?"}, {"owner": {"reputation": 3174, "user_id": 4639336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GvbJg.png?s=128&g=1", "display_name": "reticentroot", "link": "https://stackoverflow.com/users/4639336/reticentroot"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453759413, "post_id": 35002965, "comment_id": 57734648, "body": "I mean if I store the contents as a string and send the input, the user gets all the output at the same time, not as the content is being generated. Another way to put it. I want to pipe the stdout to the template as I&#39;m receiving it. Not after the system call is done."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453760605, "post_id": 35002965, "comment_id": 57735211, "body": "That&#39;s not really what templating is for. If you want to pipe the output you could write a header template, pipe the output, then a trailer template. It would be much easier though if the client requested the stream separately from the template and handled the display on the client side. This way the template is properly validated, not to mention clients may not display (or can&#39;t display) the html until it&#39;s complete, so there&#39;s no point in &quot;streaming&quot; a large chunk of it."}, {"owner": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "edited": false, "score": 1, "creation_date": 1453765973, "post_id": 35002965, "comment_id": 57737310, "body": "Why not using tcp socket streaming ? <a href=\"https://github.com/StabbyCutyou/buffstreams\" rel=\"nofollow noreferrer\">github.com/StabbyCutyou/buffstreams</a>"}, {"owner": {"reputation": 3174, "user_id": 4639336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GvbJg.png?s=128&g=1", "display_name": "reticentroot", "link": "https://stackoverflow.com/users/4639336/reticentroot"}, "edited": false, "score": 0, "creation_date": 1453766192, "post_id": 35002965, "comment_id": 57737383, "body": "That&#39;s a good idea. I&#39;ll read the link you sent me. I was thinking of using channels as well."}], "owner": {"reputation": 3174, "user_id": 4639336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GvbJg.png?s=128&g=1", "display_name": "reticentroot", "link": "https://stackoverflow.com/users/4639336/reticentroot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453758251, "creation_date": 1453758251, "question_id": 35002965, "link": "https://stackoverflow.com/questions/35002965/how-to-pipe-the-os-stdout-to-a-golang-template", "title": "How to pipe the os.Stdout to a golang template", "body": "<p>I was wondering if there was a way to pass the contents of exec.Command a template file in golang. My template file is static.  Currently, I use code that looks like this</p>\n\n<pre><code>cmd = exec.Command(\"/bin/sh\", shellScript)\ncmd.Stdout = os.Stdout\ncmd.Stderr = os.Stderr\ncmd.Run()\n</code></pre>\n\n<p>which works great if I want to view the server shell to see output from running that shell script..  Now i want to take it a step further and push the output of that shell script to my index.html.  I could store the contents of the process in a string and pass it in... but i was thinking something more real time.  Any ideas, etc?</p>\n"}, {"tags": ["events", "go", "interrupt", "raspberry-pi2"], "comments": [{"owner": {"reputation": 398, "user_id": 490418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yKy7.png?s=128&g=1", "display_name": "Chad Clark", "link": "https://stackoverflow.com/users/490418/chad-clark"}, "edited": false, "score": 1, "creation_date": 1453791422, "post_id": 35002664, "comment_id": 57744237, "body": "This is not an answer but might help.  There is a C library named WiringPi that handles edge-triggered interrupts.  Possibly you can make interrupts work in Go.  <a href=\"https://projects.drogon.net/raspberry-pi/wiringpi/functions/\" rel=\"nofollow noreferrer\">projects.drogon.net/raspberry-pi/wiringpi/functions</a>"}, {"owner": {"reputation": 521, "user_id": 1266024, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c0c172fce97d93cb27893aa77313b22?s=128&d=identicon&r=PG", "display_name": "quanglewangle", "link": "https://stackoverflow.com/users/1266024/quanglewangle"}, "reply_to_user": {"reputation": 398, "user_id": 490418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yKy7.png?s=128&g=1", "display_name": "Chad Clark", "link": "https://stackoverflow.com/users/490418/chad-clark"}, "edited": false, "score": 1, "creation_date": 1453791837, "post_id": 35002664, "comment_id": 57744365, "body": "Actually, C will do. I will give it a try Chad"}], "owner": {"reputation": 521, "user_id": 1266024, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3c0c172fce97d93cb27893aa77313b22?s=128&d=identicon&r=PG", "display_name": "quanglewangle", "link": "https://stackoverflow.com/users/1266024/quanglewangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1453757097, "creation_date": 1453757097, "question_id": 35002664, "link": "https://stackoverflow.com/questions/35002664/events-callbacks-or-listeners-in-go-on-raspberry-pi-gpio-lines", "title": "Events, callbacks or listeners in Go on Raspberry pi gpio lines?", "body": "<p>I've used Go successfully to read weather station data though USB and compose web pages. I want to ditch the 'console' and read the instruments directly, which is straightforward for temp and pressure but I can't bring myself to poll the anemometer input with a busy waiting loop. Hiding the busy wait in a thread is, well, just hiding it. Is there an actual interrupt mechanism?</p>\n\n<p>(The anemometer is a simple reed relay that closes once per rev).   </p>\n"}, {"tags": ["pointers", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453752465, "post_id": 35001226, "comment_id": 57730760, "body": "related: <a href=\"http://stackoverflow.com/questions/24452323/go-performance-whats-the-difference-between-pointer-and-value-in-struct\" title=\"go performance whats the difference between pointer and value in struct\">stackoverflow.com/questions/24452323/&hellip;</a>"}, {"owner": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 2, "creation_date": 1453753701, "post_id": 35001226, "comment_id": 57731494, "body": "In Go, I would only opt for a value over a pointer if I intend for instances of my type to be immutable. In my opinion pointers are almost always better and not just in Go."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 38332, "user_id": 763585, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f929fab16e27f59c5193f0db678125?s=128&d=identicon&r=PG", "display_name": "evanmcdonnal", "link": "https://stackoverflow.com/users/763585/evanmcdonnal"}, "edited": false, "score": 1, "creation_date": 1453757578, "post_id": 35001226, "comment_id": 57733679, "body": "I come from a similar background (Python, which does not have explicit pointers) and have settled on the same advice @evanmcdonnal gave. If You don&#39;t have an <b><i>explicitly</i></b> immutable class, you should pass by pointer."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1453757692, "post_id": 35001226, "comment_id": 57733737, "body": "And in addition, if your immutable values are large, <i>still</i> pass the pointer and only provide getters in the interface."}], "answers": [{"tags": [], "owner": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "is_accepted": false, "score": 1, "last_activity_date": 1453753543, "creation_date": 1453753543, "answer_id": 35001690, "question_id": 35001226, "link": "https://stackoverflow.com/questions/35001226/in-terms-of-design-and-when-writing-a-library-when-should-i-use-a-pointer-as-an/35001690#35001690", "title": "In terms of design and when writing a library, when should I use a pointer as an argument, and when should I not?", "body": "<p>Simply you can use pointers anywhere you want, sometimes you don't want to change your data. It may stand for abstract data, and you don't want to explicitly copy the data. Just pass by value and let compiler do its job.</p>\n"}, {"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": true, "score": 3, "last_activity_date": 1453757325, "creation_date": 1453757325, "answer_id": 35002744, "question_id": 35001226, "link": "https://stackoverflow.com/questions/35001226/in-terms-of-design-and-when-writing-a-library-when-should-i-use-a-pointer-as-an/35002744#35002744", "title": "In terms of design and when writing a library, when should I use a pointer as an argument, and when should I not?", "body": "<p>There's tradeoffs for both pointers and values.</p>\n\n<p>Generally speaking, pointers will point to some other region of memory in the system.  Be it the stack of the function that wants to pass a pointer to a local variable or some place on the heap.</p>\n\n<pre><code>func A() {\n    i := 25\n    B(&amp;i) // A sets up stack frame to call B,\n          // it copies the address of i so B can look it up later.\n    // At this point, i is equal to 30\n}\nfunc B(i *int){\n     // Here, i points to A's stack frame.\n     // For this to execute, I look at my variable \"i\", \n     //   see the memory address it points to, then look at that to get the value of 25.\n     // That address may be on another page of memory, \n     // causing me to have to look it up from main memory (which is slow).\n     println(10 + (*i)) \n\n     // Since I have the address to A's local variable, I can modify it.\n     *i = 30\n}\n</code></pre>\n\n<p>Pointers require me to de-reference them constantly whenever I was to see the data it points to.  Sometimes you don't care.  Other times it matters a lot.  It really depends on the application.</p>\n\n<p>If that pointer has to be de-referenced a lot (ie: you pass in a number to use in a bunch of different calcs), then you keep paying the cost.</p>\n\n<p>Compared to using values:</p>\n\n<pre><code>func A() {\n    i := 25\n    B(i) // A sets up the stack frame to call B, copying in the value 25\n    // i is still 25, because A gave B a copy of the value, and not the address.\n}\nfunc B(i int){\n     // Here, i is simply on the stack.  I don't have to do anything to use it.\n     println(10 + i) \n\n     // Since i here is a value on B's stack, modifications are not visible outside B's scpe\n     i = 30\n}\n</code></pre>\n\n<p>Since there's nothing to dereference, it's basically free to use the local variable.</p>\n\n<p>The down side of passing values happens if those values are large because copying data to the stack isn't free.  </p>\n\n<p>For an int it's a wash because pointers are \"int\" sized.  For a struct, or an array, you are copying all the data.</p>\n\n<p>Also, large objects on the stack can make the stack extra big.  Go handles this well with stack re-allocation, but in high performance scenarios, it may be too much of an impact to performance.</p>\n\n<p>There's a data safety aspect as well (can't modify something I pass by value), but I don't feel that is usually an issue in most code bases.</p>\n\n<p>Basically, if your problem was already solvable by ruby, python or other language without value types, then these performance nuances don't super-matter.  </p>\n\n<p>In general, passing structs as pointers will usually do \"the right thing\" while learning the language.</p>\n\n<p>For all other types, or things that you want to keep as read-only, pass values.</p>\n\n<p>There are exceptions to that rule, but it's best that you learn those as needs arise rather than try to redefine your world all at once.  If that makes sense.</p>\n"}], "owner": {"reputation": 1889, "user_id": 892404, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6c64aa7f128d8b6e4cfeafae93782ec7?s=128&d=identicon&r=PG", "display_name": "Parham Doustdar", "link": "https://stackoverflow.com/users/892404/parham-doustdar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 35002744, "answer_count": 2, "score": 2, "last_activity_date": 1453757325, "creation_date": 1453752001, "last_edit_date": 1495535278, "question_id": 35001226, "link": "https://stackoverflow.com/questions/35001226/in-terms-of-design-and-when-writing-a-library-when-should-i-use-a-pointer-as-an", "title": "In terms of design and when writing a library, when should I use a pointer as an argument, and when should I not?", "body": "<p>Sorry if my question seems stupid. My background is in PHP, Ruby, Python, Lua and similar languages, and I have no understanding of pointers in real-life scenarios.</p>\n\n<p>From what I've read on the Internet and what I've got as responses in a question I asked (<a href=\"https://stackoverflow.com/questions/35000292/when-is-a-pointer-idiomatic/35000714#35000714\">When is a pointer idiomatic?</a>), I have understood that:</p>\n\n<ul>\n<li>Pointers should be used when copying large data. Instead of getting the whole object hierarchy, receive its address and access it.</li>\n<li>Pointers have to be used when you have a function on a struct that modifies it.</li>\n</ul>\n\n<p>So, pointers seem like a great thing: I should just always get them as function arguments because they are so lightweight, and it's okay if I somehow end up not needing to modify anything on the struct.</p>\n\n<p>However, looking at that statement intuitively, I can feel that it sounds very creepy, and yet I don't know why.</p>\n\n<p>So, as someone who is designing a struct and its related functions, or just functions, when should I receive a pointer? When should I receive a value, and why?</p>\n\n<p>In other words, when should my <code>NewAuthor</code> method return <code>&amp;Author{ ... }</code>, and when should it return <code>Author{ ... }</code>? When should my function get a pointer to an author as an argument, and when should it just get the value (a copy) of type <code>Author</code>?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 24772, "user_id": 770830, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a3943e02574f64dabaa71603264c9c28?s=128&d=identicon&r=PG", "display_name": "bereal", "link": "https://stackoverflow.com/users/770830/bereal"}, "edited": false, "score": 7, "creation_date": 1453751833, "post_id": 35001020, "comment_id": 57730384, "body": "<a href=\"https://golang.org/pkg/os/exec/\" rel=\"nofollow noreferrer\">os/exec</a>?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453756559, "post_id": 35001020, "comment_id": 57733120, "body": "Yes. It might be more useful to know why you&#39;re asking, because why would you <i>not</i> be able to execute a python script from a Go program?"}, {"owner": {"reputation": 1159, "user_id": 1447908, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b658381103df92e4d32797b49287ca54?s=128&d=identicon&r=PG&f=1", "display_name": "king", "link": "https://stackoverflow.com/users/1447908/king"}, "edited": false, "score": 0, "creation_date": 1453756901, "post_id": 35001020, "comment_id": 57733293, "body": "I don&#39;t know why you wouldn&#39;t be able to do it. I&#39;ve never done it. I don&#39;t know how to execute another script within Go. thanks for os/exec I will look into that bereal."}], "answers": [{"tags": [], "owner": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "is_accepted": false, "score": 0, "last_activity_date": 1453753931, "creation_date": 1453753931, "answer_id": 35001795, "question_id": 35001020, "link": "https://stackoverflow.com/questions/35001020/run-a-python-script-in-go/35001795#35001795", "title": "Run a python script in GO", "body": "<p>Check this out. <a href=\"http://go-lang.cat-v.org/library-bindings\" rel=\"nofollow\">http://go-lang.cat-v.org/library-bindings</a></p>\n\n<p>I really don't see any value to using bindings, you may use while migrating your application to keep step by step migration.</p>\n\n<p>In anyways when you want to use any scripting or other languages you can simply execute on the OS and can get the results like @bereal said. </p>\n"}], "owner": {"reputation": 1159, "user_id": 1447908, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b658381103df92e4d32797b49287ca54?s=128&d=identicon&r=PG&f=1", "display_name": "king", "link": "https://stackoverflow.com/users/1447908/king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 950, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1453753931, "creation_date": 1453751245, "question_id": 35001020, "link": "https://stackoverflow.com/questions/35001020/run-a-python-script-in-go", "title": "Run a python script in GO", "body": "<p>Is it possible to run a python script in the go programming language? I want to be able to have a go program written, and in the beginning of it, execute a python script, then run the rest of the go program. </p>\n"}, {"tags": ["pointers", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453754598, "post_id": 35000292, "comment_id": 57731994, "body": "The interface implementation uses pointers, but interfaces themselves are not pointers."}], "answers": [{"comments": [{"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 2, "creation_date": 1453797725, "post_id": 35000489, "comment_id": 57746886, "body": "Be careful not to assume that copying a pointer is <i>always</i> faster than copying a struct. Due to cpu caching etc, it is possible for copying pointers to be slower in some circumstances."}], "tags": [], "owner": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "is_accepted": true, "score": 2, "last_activity_date": 1453749234, "creation_date": 1453749234, "answer_id": 35000489, "question_id": 35000292, "link": "https://stackoverflow.com/questions/35000292/when-is-a-pointer-idiomatic/35000489#35000489", "title": "When is a pointer idiomatic?", "body": "<p>You can think of a pointer as a value that points to the memory address of an object. Pointers are small (say 8 bytes) compared to most data structures.</p>\n\n<p>A lot of times you will get a pointer to an object because it is much faster to pass those 8 bytes than to create a copy of the entire object that you want to pass. </p>\n\n<p>In the case of a Request object it would be very expensive to create a copy of everything under the request (the payload, headers, and whatnot) compared to just passing a pointer that has access to the original data.</p>\n"}, {"tags": [], "owner": {"reputation": 490, "user_id": 3310759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409b69c3ae7b431fc16129ccdadae9cd?s=128&d=identicon&r=PG", "display_name": "driusan", "link": "https://stackoverflow.com/users/3310759/driusan"}, "is_accepted": false, "score": 1, "last_activity_date": 1453750104, "creation_date": 1453750104, "answer_id": 35000714, "question_id": 35000292, "link": "https://stackoverflow.com/questions/35000292/when-is-a-pointer-idiomatic/35000714#35000714", "title": "When is a pointer idiomatic?", "body": "<p>A pointer is, as the name suggests, a variable that points to a place in memory.</p>\n\n<p>You use it when copying the entire value of the object is unreasonable for some reason. This can either be because an object is so large that copying it would be slow, so you want to just pass a small pointer to the object and use the same object in memory (probably the reason http.Request is a pointer), or because you need to modify an existing reference to an object that other places in your code might already have a reference to. You can look into the code for net/http <a href=\"https://golang.org/src/net/http/\" rel=\"nofollow\">here</a> to see why. (In fact, for any Go standard library the code is a open if you want to look into why or how something is done a certain way.)</p>\n\n<p>But that's kind of irrelevant, because as a user, the reason you're passing a pointer is because the function is defined to take a pointer as a parameter. What reason the programmer who wrote the library decided to use a pointer is doesn't matter. You can either look up the go doc, or you can do what you're doing, and just pass a value, and if the compiler complains fix it.</p>\n"}, {"tags": [], "owner": {"reputation": 1396, "user_id": 1147648, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8cnlR.jpg?s=128&g=1", "display_name": "FZE", "link": "https://stackoverflow.com/users/1147648/fze"}, "is_accepted": false, "score": -1, "last_activity_date": 1453752654, "creation_date": 1453752654, "answer_id": 35001424, "question_id": 35000292, "link": "https://stackoverflow.com/questions/35000292/when-is-a-pointer-idiomatic/35001424#35001424", "title": "When is a pointer idiomatic?", "body": "<p>Pointers are really easy concept when you are just understand how they are works, but before understanding it really looks hard and annoying stuff, especially in C. There are pointer arithmetic, pointer which points a pointer etc.</p>\n\n<p>Anyway, you haven't to use pointers, if your library doesn't force you to use, but passing variables, data structures around the functions may copy all the things into another memory section because of the function scope.</p>\n\n<p>In most of the languages values are passes by literals. It means when you pass a variable to a function or class, it probably copy it.</p>\n\n<p>More memory consumption, also needs CPU time to copy items. Not good for complexity.</p>\n\n<p>On the other hand some languages like PHP has some automation, like <code>copy on write algorithm</code> when you pass a parameter to a function it passes by reference, it passes just memory address to function until function attempts to write to this variable, in that time it just copies the variable.</p>\n\n<p>But automation also brings some costs. The real point here <code>cost</code> Go tries to be fast as possible less automation more user control but also tries to be safe and simple. Not like C, C++ it doesn't make you feel ashamed.</p>\n\n<p>In your example <code>http.ResponseWriter</code> when you pass this to the any function by its memory reference(as a pointer) you write things to it  inside this function, it just directly writes to it, there is no special algorithm or check if there is no type mismatch etc. there may some check like garbage collector but It really brings advantages than it costs.</p>\n\n<p>Also in PHP, Java objects are passes by their references but the language just hides this verbosity.</p>\n\n<blockquote>\n  <p>I have read that interfaces are in fact pointers </p>\n</blockquote>\n\n<p>Not exactly, <code>Interface{}</code> Is a base type in Go so every type implements interface type, in this point of view it is just a type so there is no meaning to call as a pointer.\nIt gives you a dynamism, for example : if you read from a source which the data has not structured and inconsistent, structure can change any time e.g XML or JSON source. Just use Interface! you already know every type's ancestor is the Interface it will just handle underlying structure/type of data in runtime.</p>\n\n<p>But also you can use Interface term to define an interface (like java, c#, php etc.) and put implementation methods. When any of the struct which satisfies these methods. It naturally implements the interface. This implementation design called as Duck Typing please read for further information <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Duck_typing</a> </p>\n"}], "owner": {"reputation": 1889, "user_id": 892404, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6c64aa7f128d8b6e4cfeafae93782ec7?s=128&d=identicon&r=PG", "display_name": "Parham Doustdar", "link": "https://stackoverflow.com/users/892404/parham-doustdar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 35000489, "answer_count": 3, "score": 4, "last_activity_date": 1453752654, "creation_date": 1453748575, "question_id": 35000292, "link": "https://stackoverflow.com/questions/35000292/when-is-a-pointer-idiomatic", "title": "When is a pointer idiomatic?", "body": "<p>I come from languages which don't have explicit pointers, so I don't really understand the point of their existence (no pun intended).</p>\n\n<p>The problem is that I have no idea, most of the time, why I am passing a pointer to a function. I do understand that when you pass in a pointer, modifications to the variable are done to the value everywhere, but what's the point? Why not just modify the value and return the result?</p>\n\n<p>For example, <code>http.HandlerFunc</code> is a function that receives <code>http.ResponseWriter</code> and <code>*http.Request</code> as arguments. I have read that interfaces are in fact pointers (is that right?), but what I'm not getting is, why?</p>\n\n<p>Why am I getting a pointer to a writer? I'm not modifying it, I'm merely writing to it. And, why am I getting a pointer to a request? I am doing stuff like <code>request.FormValue()</code>.</p>\n\n<p>What I'm trying to determine here, through these examples, is the answer to the question, \"when do I need to pass in a pointer?\"</p>\n\n<p>The way I do it right now is to write my code, try to compile it, fix the errors that say I must pass in a pointer by adding an ampersand and asterisk, until the errors pass. However, I feel this half-understood concept of pointers is going to bite me in the backside some day very soon.</p>\n"}, {"tags": ["java", "regex", "go", "clojure"], "comments": [{"owner": {"reputation": 37450, "user_id": 363573, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e14a13f1a3b0f11a39496f47c0606cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Stephan", "link": "https://stackoverflow.com/users/363573/stephan"}, "edited": false, "score": 0, "creation_date": 1453746016, "post_id": 34999380, "comment_id": 57726963, "body": "Can you provide some input values and expected results?"}], "answers": [{"comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453745968, "post_id": 34999438, "comment_id": 57726929, "body": "Please provide an example string to find matches in if it does not work for you."}, {"owner": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "edited": false, "score": 0, "creation_date": 1453747883, "post_id": 34999438, "comment_id": 57728077, "body": "Fantastic! Thanks for the super speedy response time :)"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "edited": false, "score": 0, "creation_date": 1453747948, "post_id": 34999438, "comment_id": 57728120, "body": "You are welcome. You can learn about that Java character class syntax at <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html\" rel=\"nofollow noreferrer\">this page</a>. This <code>[\\D&amp;&amp;[^&#47;]]</code> is an example of a character class subtraction."}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1453745717, "creation_date": 1453745717, "answer_id": 34999438, "question_id": 34999380, "link": "https://stackoverflow.com/questions/34999380/how-can-i-convert-this-java-regular-expression-to-gos-regular-expression-syntax/34999438#34999438", "title": "How can I convert this Java regular expression to Go&#39;s regular expression syntax?", "body": "<p>It should be</p>\n\n<pre><code>var pattern = regexp.MustCompile(`:?([^/\\d].*/)?(/|[^\\d/][^/]*)`) \n</code></pre>\n\n<p>The pattern <code>[\\D&amp;&amp;[^/]]</code> means <em>any non-digit but a <code>/</code></em>, and it can be expressed with an extended negated character class <code>[^\\d/]</code>.</p>\n"}], "owner": {"reputation": 2254, "user_id": 1003650, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b653616a592b8bdc296b0abf6207a71?s=128&d=identicon&r=PG", "display_name": "Venantius", "link": "https://stackoverflow.com/users/1003650/venantius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 34999438, "answer_count": 1, "score": 2, "last_activity_date": 1469223844, "creation_date": 1453745556, "last_edit_date": 1469223844, "question_id": 34999380, "link": "https://stackoverflow.com/questions/34999380/how-can-i-convert-this-java-regular-expression-to-gos-regular-expression-syntax", "title": "How can I convert this Java regular expression to Go&#39;s regular expression syntax?", "body": "<p>I'm trying to convert this Java regular expression to Go's regular expression syntax:</p>\n\n<blockquote>\n  <p>[:]?([\\D&amp;&amp;[^/]].<em>/)?(/|[\\D&amp;&amp;[^/]][^/]</em>)</p>\n</blockquote>\n\n<p>This regular expression is the regex for matching Clojure keywords, taken from the JVM Clojure compiler. </p>\n"}, {"tags": ["mongodb", "go", "mgo"], "comments": [{"owner": {"reputation": 24603, "user_id": 1110423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed86330a464a2bc0069dfdfc35524f2e?s=128&d=identicon&r=PG", "display_name": "Alex Blex", "link": "https://stackoverflow.com/users/1110423/alex-blex"}, "edited": false, "score": 0, "creation_date": 1453744944, "post_id": 34998644, "comment_id": 57726297, "body": "Would this <a href=\"http://stackoverflow.com/questions/18340031/unstructured-mongodb-collections-with-mgo\" title=\"unstructured mongodb collections with mgo\">stackoverflow.com/questions/18340031/&hellip;</a> help?"}, {"owner": {"reputation": 1571, "user_id": 1587118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cBN8s.jpg?s=128&g=1", "display_name": "SRC", "link": "https://stackoverflow.com/users/1587118/src"}, "reply_to_user": {"reputation": 24603, "user_id": 1110423, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ed86330a464a2bc0069dfdfc35524f2e?s=128&d=identicon&r=PG", "display_name": "Alex Blex", "link": "https://stackoverflow.com/users/1110423/alex-blex"}, "edited": false, "score": 0, "creation_date": 1453782806, "post_id": 34998644, "comment_id": 57741797, "body": "Thanks I think this is what I wanted :)"}], "answers": [{"comments": [{"owner": {"reputation": 1571, "user_id": 1587118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cBN8s.jpg?s=128&g=1", "display_name": "SRC", "link": "https://stackoverflow.com/users/1587118/src"}, "edited": false, "score": 0, "creation_date": 1453782832, "post_id": 34999627, "comment_id": 57741805, "body": "This is also a good solution David. I will try this out. Thanks"}, {"owner": {"reputation": 1775, "user_id": 1241805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e69b9940a6d0998eabedda2452d8e7c?s=128&d=identicon&r=PG", "display_name": "Ezequiel Moreno", "link": "https://stackoverflow.com/users/1241805/ezequiel-moreno"}, "edited": false, "score": 0, "creation_date": 1453783685, "post_id": 34999627, "comment_id": 57742034, "body": "You might want to use <a href=\"https://godoc.org/gopkg.in/mgo.v2/bson#M\" rel=\"nofollow noreferrer\">godoc.org/gopkg.in/mgo.v2/bson#M</a> instead of map[string]interface{}"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 0, "creation_date": 1453791665, "post_id": 34999627, "comment_id": 57744311, "body": "Sort of agree on the bson.M.  Only reason I&#39;m weary of it is that it leaks the bson package in to the rest of your code wherever you want to create a new literal version of that map.  I generally try to minimize third party imports where possible so I have less to maintain later when I inevitably change my mine on what library to use for a given purpose."}, {"owner": {"reputation": 1571, "user_id": 1587118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cBN8s.jpg?s=128&g=1", "display_name": "SRC", "link": "https://stackoverflow.com/users/1587118/src"}, "edited": false, "score": 0, "creation_date": 1453793831, "post_id": 34999627, "comment_id": 57745102, "body": "valid argument. I agree"}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 3, "last_activity_date": 1453746387, "creation_date": 1453746387, "answer_id": 34999627, "question_id": 34998644, "link": "https://stackoverflow.com/questions/34998644/mongo-db-and-go-using-dynamic-data-models/34999627#34999627", "title": "Mongo DB and Go - using dynamic data models", "body": "<p>If Keys for metadata are unique, why not just use a map.</p>\n\n<p>meaning your Product struct looks like:</p>\n\n<pre><code>struct Product {\n    ID        bson.ObjectId `bson:\"_id,omitempty\"`\n    Name string\n    Description string\n     ... omitted other fields ...\n    MetaData map[string]map[string]interface{} // map of string -&gt; map of string -&gt; anything\n}\n</code></pre>\n\n<p>If you can have more than one instance of a given meta data, ie: 2 categories, use a list:</p>\n\n<pre><code>struct Product {\n    ID        bson.ObjectId `bson:\"_id,omitempty\"`\n    Name string\n    Description string\n     ... omitted other fields ...\n    MetaData []map[string]interface{} // list of maps of string -&gt; anything\n}\n</code></pre>\n"}], "owner": {"reputation": 1571, "user_id": 1587118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cBN8s.jpg?s=128&g=1", "display_name": "SRC", "link": "https://stackoverflow.com/users/1587118/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1453746387, "creation_date": 1453743140, "question_id": 34998644, "link": "https://stackoverflow.com/questions/34998644/mongo-db-and-go-using-dynamic-data-models", "title": "Mongo DB and Go - using dynamic data models", "body": "<p>I am faced with a problem where I am not sure which path to take. So I am asking it here. I have an application where there can be products and there can be metadata for a product. These metadata can be created and deleted from the front end. So let's say, today a each product has two meta data (e.g. Name, Price) then tomorrow it can be three, four or more or even less than two. So this is dynamic. I am trying to represent the data as follows</p>\n\n<pre><code>Product = \n{\n    \"_id\": mongo\n    \"Name\": string\n    \"Description\": string\n    \"BasePrice\": number\n    \"CreatedBy\": user mongo _id\n    \"CreatedAt\": timestamp\n    \"ModifiedAt\": timestamp\n    \"MetaData\": BSON object (having all the keys from ProductMetadata collection and their values. e.g. {\"Category\": \"table ware\", \"Material\": \"oak wood, copper\", \"Length\": 5.6})\n\n}\n\nProductMetadata = \n{\n    \"_id\": mongo\n    \"Name\": string (e.g. - \"Category\" or \"Material\" or \"Height\")\n    \"Type\": string (indicating what kind of value it can hold like string/integer/array. e.g. - \"string\")\n    \"CreatedAt\": timestamp\n    \"ModifiedAt\": timestamp\n}\n</code></pre>\n\n<p>As you can see this is a pure dynamic situation so having a structure at the code level which represent the model is impossible. </p>\n\n<p>My problem is, how do I implement such a thing using mgo and Go lang? If I need to use reflection then can some one please point me towards a good blog/tutorial where I can get a little bit more info. Or if you think that there is a fundamental problem in the approach of modeling the data then please correct me so that it can be easily implemented using Go. </p>\n\n<p>In Python, it would not be a problem to implement this. I know that. But I am confused about the Go implementation.</p>\n\n<p>Please help. </p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["email", "go", "gmail", "certificate"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453743369, "post_id": 34998580, "comment_id": 57725439, "body": "The error has nothing to do with your authentication, that&#39;s a TLS error. What do you mean by &quot;server is on localhost&quot;? Do you have &quot;smtp.gmail.com&quot; resolving to 127.0.0.1?"}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453747483, "post_id": 34998580, "comment_id": 57727859, "body": "<i>What do you mean by &quot;server is on localhost&quot;?</i>  (@JimB )   I mean  my server is not on www.address.com, but just on localhost:8080.  <i>Do you have &quot;smtp.gmail.com&quot; resolving to 127.0.0.1?</i>  (@JimB )   I don&#39;t know. I&#39;m sorry, I&#39;m quite new in web, and also I may have some translation problem. If you mean &quot;does it ping?&quot; so answer is yes, it pings well.    What do I need to check and how? Thank you"}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453749578, "post_id": 34998580, "comment_id": 57729159, "body": "I guess it was unsuccessfull to notify you, your username wasnt highlighted @JimB"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453752078, "post_id": 34998580, "comment_id": 57730534, "body": "Are you getting the certificate error connecting to <code>smtp.gmail.com</code>, or to your server on localhost?"}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453779643, "post_id": 34998580, "comment_id": 57740965, "body": "I guess while connecting to smtp.gmail.com because my server actually works (website is on) But when I try  <code>err = inviteEmail.Send(&quot;smtp.gmail.com:587&quot;, smtp.PlainAuth(&quot;&quot;, MyGmail, MyGmailPassword, &quot;smtp.gmail.com&quot;))</code> Then I have such error"}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453780001, "post_id": 34998580, "comment_id": 57741067, "body": "@JImB maybe there is a problem, because my golang version is 1.3?"}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453815181, "post_id": 34998580, "comment_id": 57756686, "body": "Guess it&#39;s not - I&#39;ve updated"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453816276, "post_id": 34998580, "comment_id": 57757442, "body": "It sounds like your OS isn&#39;t providing the correct or up to date root CAs to verify the certificate."}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453819743, "post_id": 34998580, "comment_id": 57759850, "body": "@JimB is there way to improve it? I am using Lubuntu 15.04 (Lubuntu requires not so much resources and this is useful because my server is on virtual machine: (Oracle VM))"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453820260, "post_id": 34998580, "comment_id": 57760219, "body": "Why a desktop system when the standard ubuntu server image is much smaller? Regardless, you need to troubleshoot the CA problem.  Make sure you have all OS updates installed. At lease try connecting to the mail server outside your program and verify the cert, either with Go and/or another client, so you can tell if it&#39;s your code or the system configuration. This isn&#39;t really programming related, and stackoverflow isn&#39;t the right forum to walk you through all the possible steps you could take."}, {"owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453823339, "post_id": 34998580, "comment_id": 57762573, "body": "Ok, Thank you @JimB I will try to find my problem out, I thought I can improve it programmly, but I don&#39;t, I will try. And I don&#39;t use server image yet, because I have tuned up Lubuntu (I used it much times for some university stuff, so I needed it to be desktop)"}], "owner": {"reputation": 45, "user_id": 5817950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fbb5004f4b388ecaf9f4c4d00f6f4ce?s=128&d=identicon&r=PG&f=1", "display_name": "utkillr", "link": "https://stackoverflow.com/users/5817950/utkillr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453755899, "creation_date": 1453742923, "question_id": 34998580, "link": "https://stackoverflow.com/questions/34998580/golang-email-sending-through-jordan-wright-email-v1", "title": "Golang email sending through jordan-wright/email.v1", "body": "<p>I'm writing web server and I need to send email message through my server. I tried to do as it's written in examples, but I get error:<br>\n<code>EXTRA x509.UnknownAuthorityError=x509: certificate signed by unknown authority</code><br>\nMy code is below:</p>\n\n<pre><code>inviteEmail := email.NewEmail() //it was said that email.v1 imported as email\ninviteEmail.From = MyEmail\ninviteEmail.To = make([]string, 1)\ninviteEmail.To[0] = emailstr //is reciever's email\ninviteEmail.Subject = \"Test\"\ninviteEmail.Text = []byte(\"Welcome \" + emailstr + \" \\nYour link is localhost:8080\")\nerr = inviteEmail.Send(\"smtp.gmail.com:587\", smtp.PlainAuth(\"\", MyGmail, MyGmailPassword, \"smtp.gmail.com\"))\nif err != nil {\n    logger.Error(\"ERROR : \", err)\n} else {\n    logger.Info(\"Email sent\")\n}\n</code></pre>\n\n<p>upd: I tried to use both MyGmail and MyGmailLogin (without @gmail.com) in PalinAuth but I always get error.</p>\n\n<p>Has anybody faced it? Maybe problem is because server is on localhost?</p>\n"}, {"tags": ["mysql", "sql", "go"], "comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 1, "creation_date": 1453738217, "post_id": 34996509, "comment_id": 57722159, "body": "sql.Open is really opening a connection pool.  the resulting db object is thread safe and can be used by your http handlers concurrently.  you generally will only call db.Close() before exiting your application"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5559226, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2db6ec22bed47d6ba22da0fd9df3c75d?s=128&d=identicon&r=PG&f=1", "display_name": "David Kane", "link": "https://stackoverflow.com/users/5559226/david-kane"}, "edited": false, "score": 0, "creation_date": 1453753038, "post_id": 34996654, "comment_id": 57731074, "body": "Aha! Thanks a lot for that and for the reading material. Very much appreciated."}], "tags": [], "owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "is_accepted": true, "score": 4, "last_activity_date": 1453736944, "creation_date": 1453736944, "answer_id": 34996654, "question_id": 34996509, "link": "https://stackoverflow.com/questions/34996509/golang-mysql-managing-connections/34996654#34996654", "title": "Golang &amp; MySQL - Managing Connections", "body": "<p>The problem is, you are redeclaring db inside your main function. </p>\n\n<p>change:</p>\n\n<pre><code>db, err := sql.Open(\"mysql\",\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>var err error\ndb, err = sql.Open(\"mysql\", \n</code></pre>\n\n<p>Also consider reading about diffrent organizing methods when it comes to db access in your app. This is a great read: <a href=\"http://www.alexedwards.net/blog/organising-database-access\" rel=\"nofollow\">http://www.alexedwards.net/blog/organising-database-access</a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5779675, "user_type": "unregistered", "profile_image": "https://i.stack.imgur.com/yJXFr.jpg?s=128&g=1", "display_name": "Antman", "link": "https://stackoverflow.com/users/5779675/antman"}, "is_accepted": false, "score": 2, "last_activity_date": 1453738990, "last_edit_date": 1453738990, "creation_date": 1453738668, "answer_id": 34997225, "question_id": 34996509, "link": "https://stackoverflow.com/questions/34996509/golang-mysql-managing-connections/34997225#34997225", "title": "Golang &amp; MySQL - Managing Connections", "body": "<p>In the</p>\n\n<pre><code>db, err := ...\n</code></pre>\n\n<p>statement the operator <code>:=</code> will define an new variable and hidde the global one with the same name.</p>\n"}], "owner": {"reputation": 81, "user_id": 5559226, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2db6ec22bed47d6ba22da0fd9df3c75d?s=128&d=identicon&r=PG&f=1", "display_name": "David Kane", "link": "https://stackoverflow.com/users/5559226/david-kane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1940, "favorite_count": 0, "accepted_answer_id": 34996654, "answer_count": 2, "score": 0, "last_activity_date": 1453738990, "creation_date": 1453736549, "question_id": 34996509, "link": "https://stackoverflow.com/questions/34996509/golang-mysql-managing-connections", "title": "Golang &amp; MySQL - Managing Connections", "body": "<p>I'm having trouble handling connections in a golang web app that uses MySQL. </p>\n\n<p>In the tutorials I have seen the database interaction is all handled once, in the main function. </p>\n\n<p>However, in the real world each http request will interact with the database - where should I keep sql.Open() and defer sql.Close()? Here is my code.</p>\n\n<pre><code>package main\n\nimport (\n    \"database/sql\"\n    \"fmt\"\n    _ \"github.com/go-sql-driver/mysql\"\n    \"html/template\"\n    \"net/http\"\n)\n\nvar db *sql.DB\n\nvar pageTemplate = template.Must(template.ParseFiles(\"index.html\"))\n\ntype Items []string\n\nfunc main() {\n    db, err := sql.Open(\"mysql\",\n        \"username:passwordl@tcp(127.0.0.1:3306)/databasename\")\n    checkErr(err)\n    defer db.Close()\n    _, err = db.Exec(\n        `\n    CREATE TABLE IF NOT EXISTS items (\n      item_id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,\n      item TEXT\n    );\n    `)\n    checkErr(err)\n    http.HandleFunc(\"/\", mainHandler)\n    http.ListenAndServe(\":3000\", nil)\n}\n\nfunc mainHandler(w http.ResponseWriter, r *http.Request) {\n    var item string\n    var items Items\n    stmt, err := db.Prepare(\"select item from items\")\n    checkErr(err)\n    defer stmt.Close()\n    rows, err := stmt.Query()\n    checkErr(err)\n    defer rows.Close()\n    for rows.Next() {\n        err := rows.Scan(&amp;item)\n        checkErr(err)\n        items = append(items, item)\n    }\n    if err = rows.Err(); err != nil {\n        checkErr(err)\n    }\n    pageTemplate.Execute(w, items)\n}\n\nfunc checkErr(err error) {\n    if err != nil {\n        fmt.Println(err)\n    }\n}\n</code></pre>\n\n<p>I get a runtime error on the line:</p>\n\n<pre><code>stmt, err := db.Prepare(\"select item from items\")\n</code></pre>\n\n<p>Persumably because the db isn't recognised outside of the main function. Should I instead have sql.Open() on each url Handler?</p>\n\n<p>Apologies if the question is ambiguous. </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1453738501, "post_id": 34995808, "comment_id": 57722338, "body": "<a href=\"http://stackoverflow.com/q/5029819/720999\">See also</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2878, "user_id": 3087441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zIs67.jpg?s=128&g=1", "display_name": "kopiczko", "link": "https://stackoverflow.com/users/3087441/kopiczko"}, "is_accepted": true, "score": 6, "last_activity_date": 1453735240, "last_edit_date": 1453735240, "creation_date": 1453734878, "answer_id": 34995923, "question_id": 34995808, "link": "https://stackoverflow.com/questions/34995808/declared-and-not-used-because-go-compiler-cant-consider-loops/34995923#34995923", "title": "&#39;declared and not used&#39; because Go compiler can&#39;t consider loops?", "body": "<p>The second current is in the <code>if</code> scope. Replace <code>current := &lt;- ch</code> with <code>current = &lt;- ch</code> (no colon). When using <code>:=</code> you define a new <code>current</code> variable in the nested scope.</p>\n\n<pre><code>if winning == current {\n    fmt.Println(games_played)\n    break\n} else {\n    current := &lt;- ch\n    games_played += 1\n}\n</code></pre>\n\n<p>is equivalent of:</p>\n\n<pre><code>if winning == current {\n    fmt.Println(games_played)\n    break\n} else {\n    var current int[6] // you don't want this, as it shadows your\n                       // current form the outher scope\n    current = &lt;- ch // you want only this guy\n    games_played += 1\n}\n</code></pre>\n"}], "owner": {"reputation": 2162, "user_id": 3204212, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/fd870d2b3afe56cd9c59c28c0fc715bd?s=128&d=identicon&r=PG&f=1", "display_name": "GreenTriangle", "link": "https://stackoverflow.com/users/3204212/greentriangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 34995923, "answer_count": 1, "score": 0, "last_activity_date": 1453735240, "creation_date": 1453734524, "question_id": 34995808, "link": "https://stackoverflow.com/questions/34995808/declared-and-not-used-because-go-compiler-cant-consider-loops", "title": "&#39;declared and not used&#39; because Go compiler can&#39;t consider loops?", "body": "<p>Poor title, but I didn't know how else to describe it within the character limit.</p>\n\n<p>As a learning exercise, I'm trying to write a little Go program that simulates a lottery draw. It draws six random numbers to be the winning set, then continually draws random arrays of random ints until you get that set again.</p>\n\n<p>First I wrote a function which takes a channel and infinitely loops \"add array of 6 random ints to the channel\":</p>\n\n<pre><code>func draw(ch chan&lt;- [6]int) {\n    generator := rand.New(rand.NewSource(time.Now().UnixNano()))\n    for {\n        ch &lt;- [6]int{\n            generator.Intn(100),\n            generator.Intn(100),\n            generator.Intn(100),\n            generator.Intn(100),\n            generator.Intn(100),\n            generator.Intn(100),\n        }\n    }\n}\n</code></pre>\n\n<p>Then in <code>main()</code> I specify two OS threads, create a channel that can hold 250 arrays of 6 ints, and start my <code>draw()</code> function in a goroutine.</p>\n\n<pre><code>runtime.GOMAXPROCS(2)\nch := make(chan [6]int, 250)\ngo draw(ch)\n</code></pre>\n\n<p>Next I take a winning set (eg <code>[4 8 15 16 23 42]</code>) from the channel, then a 'current' set, meaning the most recent draw. I set my game_played counter to 1:</p>\n\n<pre><code>winning := &lt;- ch\ncurrent := &lt;- ch\ngames_played := 1\n</code></pre>\n\n<p>Here's the tricky bit.</p>\n\n<p>In an infinite loop, I check if the current draw is equal to the winning draw. If it is, I print the number of games played, and break from the loop.</p>\n\n<p>If it <em>isn't</em>, I set <code>current</code> to a new draw, and increment the counter. The loop should then run the <code>if winning == current...</code> check again over and over until there's a match.</p>\n\n<pre><code>for {\n    if winning == current {\n        fmt.Println(games_played)\n        break\n    } else {\n        current := &lt;- ch\n        games_played += 1\n    }\n}\n</code></pre>\n\n<p>Here's the problem: that fourth-last line, <code>current := &lt;- ch</code>, throws a compiler error, 'current declared and not used'. I want to say \"Yeah, I <em>know</em> it's not used after that point reading downward, but it's declared inside a loop, so its value matters on the next iteration.\" But I can't work out how, or if I've done something stupid. I'm totally clueless about Go, obviously. But to me, thinking through it, the logic is sound. Am I messing something up?</p>\n\n<p>(Note: I'm aware of the oversight that a draw of <code>[1 2 3]</code> won't be equal to <code>[2 3 1]</code>, ignoring that for now.)</p>\n"}, {"tags": ["ssl", "go", "tcp"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453737624, "post_id": 34995238, "comment_id": 57721810, "body": "&quot;certificate is valid for otherhost.com, not somehost.com&quot; seems very clear. The server&#39;s name is &#39;otherhost.com&#39; (or at least that&#39;s the name in the certificate.)"}, {"owner": {"reputation": 358, "user_id": 4536186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nNlUY.png?s=128&g=1", "display_name": "Harlam", "link": "https://stackoverflow.com/users/4536186/harlam"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453738900, "post_id": 34995238, "comment_id": 57722625, "body": "No, host is exactly somehost.com, not otherhost.com. I know it. But I tried to connect to otherhost.com too and this host is unknown."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453739380, "post_id": 34995238, "comment_id": 57722948, "body": "Regardless of what the DNS name is, the name in the certificate the server is using is &#39;otherhost.com&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1453733710, "creation_date": 1453733710, "answer_id": 34995546, "question_id": 34995238, "link": "https://stackoverflow.com/questions/34995238/go-tls-connection/34995546#34995546", "title": "Go TLS connection", "body": "<p><code>openssl s_client</code> is just a test tool which connects but it does not care much if the certificate is valid for the connection.  Go instead cares if the certificate could be validated, so you get the information that the certificate is invalid because the name does not match.</p>\n\n<blockquote>\n  <p>what did I do wrong? </p>\n</blockquote>\n\n<p>Based on the error message you did access the host by the wrong hostname. Or you've configured your server badly so that it sends the wrong certificate.</p>\n"}, {"tags": [], "owner": {"reputation": 358, "user_id": 4536186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nNlUY.png?s=128&g=1", "display_name": "Harlam", "link": "https://stackoverflow.com/users/4536186/harlam"}, "is_accepted": true, "score": 0, "last_activity_date": 1454153152, "creation_date": 1454153152, "answer_id": 35101184, "question_id": 34995238, "link": "https://stackoverflow.com/questions/34995238/go-tls-connection/35101184#35101184", "title": "Go TLS connection", "body": "<p>I didn't need to check ssl certificate of server. It was demo server of some domain registry. So I need server to check my certificate.</p>\n\n<pre><code>const certPEM = `-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n`\nconst certKey = `-----BEGIN RSA PRIVATE KEY-----\n-----END RSA PRIVATE KEY-----`\n\ncert, err := tls.X509KeyPair([]byte(certPEM), []byte(certKey))\nif err != nil {\n    t.Error(\"server: loadkeys: %s\", err)\n}\n\ncfg := tls.Config{\n    InsecureSkipVerify: true,\n    ServerName:         \"somehost.com\",\n    Certificates:       []tls.Certificate{cert},\n}\n\nconn, err := tls.Dial(\"tcp\", \"somehost.com:700\", &amp;cfg)\nif err != nil {\n    t.Error(\"failed to connect: \" + err.Error())\n}\n\ndefer conn.Close()\n</code></pre>\n\n<p>So this code works in my case.</p>\n"}], "owner": {"reputation": 358, "user_id": 4536186, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nNlUY.png?s=128&g=1", "display_name": "Harlam", "link": "https://stackoverflow.com/users/4536186/harlam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 35101184, "answer_count": 2, "score": 0, "last_activity_date": 1454153152, "creation_date": 1453732870, "question_id": 34995238, "link": "https://stackoverflow.com/questions/34995238/go-tls-connection", "title": "Go TLS connection", "body": "<p>I connect to some server via openssl:</p>\n\n<pre><code>openssl s_client -crlf -connect somehost.com:700 -cert key.pem\n</code></pre>\n\n<p>And it works. Connection is successful.</p>\n\n<p>But when I tried to do same from Go code (example from documentation), it doesn't work for me:</p>\n\n<pre><code>import (\n    \"crypto/tls\"\n    \"crypto/x509\"\n)\n\nfunc main() {\n    // Connecting with a custom root-certificate set.\n    const rootPEM = `\n-----BEGIN CERTIFICATE-----\nmy key text\n-----END CERTIFICATE-----`\n\n// First, create the set of root certificates. For this example we only\n// have one. It's also possible to omit this in order to use the\n// default root set of the current operating system.\nroots := x509.NewCertPool()\nok := roots.AppendCertsFromPEM([]byte(rootPEM))\nif !ok {\n    panic(\"failed to parse root certificate\")\n}\n\nconn, err := tls.Dial(\"tcp\", \"somehost.com:700\", &amp;tls.Config{\n    RootCAs: roots,\n})\nif err != nil {\n    panic(\"failed to connect: \" + err.Error())\n}\nconn.Close()\n}\n</code></pre>\n\n<p>My text error is:</p>\n\n<pre><code>panic: failed to connect: x509: certificate is valid for otherhost.com, not somehost.com [recovered]\n</code></pre>\n\n<p>Question: what did I do wrong? And maybe I didn't add some tls.Config parameters?</p>\n"}, {"tags": ["go", "hugo", "go-html-template"], "answers": [{"tags": [], "owner": {"reputation": 2295, "user_id": 602059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd358846badc503b4358225e7edc231?s=128&d=identicon&r=PG", "display_name": "rdp", "link": "https://stackoverflow.com/users/602059/rdp"}, "is_accepted": true, "score": 5, "last_activity_date": 1453733717, "creation_date": 1453733717, "answer_id": 34995548, "question_id": 34995229, "link": "https://stackoverflow.com/questions/34995229/combining-first-function-with-index-in-golang-html-template/34995548#34995548", "title": "Combining first function with index in golang/html template", "body": "<p>I <em>think</em> what you are looking for based on your examples is the following:</p>\n\n<pre><code>{{ range $index, $element := (first 3 .Data.Pages.ByPublishDate) }}\n</code></pre>\n"}], "owner": {"reputation": 691, "user_id": 1780979, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b8d551e7bece7d0b55f48f52747f092?s=128&d=identicon&r=PG", "display_name": "DamirDiz", "link": "https://stackoverflow.com/users/1780979/damirdiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 34995548, "answer_count": 1, "score": 1, "last_activity_date": 1453733717, "creation_date": 1453732844, "question_id": 34995229, "link": "https://stackoverflow.com/questions/34995229/combining-first-function-with-index-in-golang-html-template", "title": "Combining first function with index in golang/html template", "body": "<p>I'm creating a blog with Hugo. \ni would like to list the first 3 Blog entries. That is not a problem so far.</p>\n\n<pre><code>{{ range first 3 .Data.Pages.ByPublishDate }}\n</code></pre>\n\n<p>But i need the index for adding css classes. I do that with this line </p>\n\n<pre><code>{{ range $index, $element := .Data.Pages.ByPublishDate }}\n</code></pre>\n\n<p>My problem now is how following. How do I get the index like in the second line of code but still limit the result to 3.</p>\n\n<p>Unfortunately this doesn't seem to work.</p>\n\n<pre><code>{{ range first 3 $index, $element := .Data.Pages.ByPublishDate }}\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["go", "web-crawler", "httprequest"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453735334, "post_id": 34995071, "comment_id": 57720247, "body": "see also <a href=\"https://golang.org/pkg/net/http/#Response.Write\" rel=\"nofollow noreferrer\"><code>http.Response.Write</code></a> method, which is used by <a href=\"https://golang.org/pkg/net/http/httputil/#DumpResponse\" rel=\"nofollow noreferrer\"><code>httputil.DumpResponse</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453735298, "post_id": 34995295, "comment_id": 57720218, "body": "Or you could get all the correct information using the <a href=\"https://golang.org/pkg/net/http/#Response.Write\" rel=\"nofollow noreferrer\"><code>http.Response.Write</code></a> method, which is used by <a href=\"https://golang.org/pkg/net/http/httputil/#DumpResponse\" rel=\"nofollow noreferrer\"><code>httputil.DumpResponse</code></a>"}, {"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453736411, "post_id": 34995295, "comment_id": 57720934, "body": "thanks @JimB, didn&#39;t know about this! Edited the snippet."}], "tags": [], "owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "is_accepted": true, "score": 4, "last_activity_date": 1453736345, "last_edit_date": 1453736345, "creation_date": 1453733042, "answer_id": 34995295, "question_id": 34995071, "link": "https://stackoverflow.com/questions/34995071/how-to-efficiently-store-html-response-to-a-file-in-golang/34995295#34995295", "title": "How to efficiently store html response to a file in golang", "body": "<p><strong>Edit:</strong> Thanks to @JimB for pointing to the <em>http.Response.Write</em> method which makes this a lot easier than I proposed in the beginning:</p>\n\n<pre><code>resp, err := http.Get(\"http://google.com/\")\n\nif err != nil{\n    log.Panic(err)\n}\n\nf, err := os.Create(\"output.txt\")\ndefer f.Close()\n\nresp.Write(f)\n</code></pre>\n\n<p><em>This was my first Answer</em> </p>\n\n<p>You could do something like this:</p>\n\n<pre><code>resp, err := http.Get(\"http://google.com/\")\n\nbody, err := ioutil.ReadAll(resp.Body)\n\n// write whole the body\nerr = ioutil.WriteFile(\"body.txt\", body, 0644)\nif err != nil {\n    panic(err)\n}\n</code></pre>\n\n<p><em>This was the edit to my first answer:</em> </p>\n\n<p>Thanks to @Hector Correa who added the header part. Here is a more comprehensive snippet, targeting your whole question. This writes header followed by the body of the request to output.txt</p>\n\n<pre><code>//get the response\nresp, err := http.Get(\"http://google.com/\")\n\n//body\nbody, err := ioutil.ReadAll(resp.Body)\n\n//header\nvar header string\nfor h, v := range resp.Header {\n    for _, v := range v {\n        header += fmt.Sprintf(\"%s %s \\n\", h, v)\n    }\n}\n\n//append all to one slice\nvar write []byte\nwrite = append(write, []byte(header)...)\nwrite = append(write, body...)\n\n//write it to a file\nerr = ioutil.WriteFile(\"output.txt\", write, 0644)\nif err != nil {\n    panic(err)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24853, "user_id": 446681, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cBjgR.jpg?s=128&g=1", "display_name": "Hector Correa", "link": "https://stackoverflow.com/users/446681/hector-correa"}, "is_accepted": false, "score": 2, "last_activity_date": 1453733853, "creation_date": 1453733853, "answer_id": 34995582, "question_id": 34995071, "link": "https://stackoverflow.com/questions/34995071/how-to-efficiently-store-html-response-to-a-file-in-golang/34995582#34995582", "title": "How to efficiently store html response to a file in golang", "body": "<p>Following on the answer by @Riscie you could also pick up the headers from the response with something like this:</p>\n\n<pre><code>for header, values := range resp.Header {\n    for _, value := range values {\n        log.Printf(\"\\t\\t %s %s\", header, value)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 2642806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da049167daa84d2e05472f2bb4b7cd69?s=128&d=identicon&r=PG", "display_name": "slcjordan", "link": "https://stackoverflow.com/users/2642806/slcjordan"}, "is_accepted": false, "score": 5, "last_activity_date": 1453740361, "last_edit_date": 1453740361, "creation_date": 1453739344, "answer_id": 34997459, "question_id": 34995071, "link": "https://stackoverflow.com/questions/34995071/how-to-efficiently-store-html-response-to-a-file-in-golang/34997459#34997459", "title": "How to efficiently store html response to a file in golang", "body": "<p>Go has an httputil package with a response dump.\n<a href=\"https://golang.org/pkg/net/http/httputil/#DumpResponse\" rel=\"noreferrer\">https://golang.org/pkg/net/http/httputil/#DumpResponse</a>.\nThe second argument of response dump is a bool of whether or not to include the body. So if you want to save just the header to a file, set that to false.</p>\n\n<p>An example function that would dump the response to a file could be:</p>\n\n<pre><code>import (\n    \"io/ioutil\"\n    \"net/http\"\n    \"net/http/httputil\"\n)\n\nfunc dumpResponse(resp *http.Response, filename string) error {\n    dump, err := httputil.DumpResponse(resp, true)\n    if err != nil {\n        return err\n    }\n\n    return ioutil.WriteFile(filename, dump, 0644)\n}\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 789745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d86e542308758403576a94fb424dc83?s=128&d=identicon&r=PG", "display_name": "L.fole", "link": "https://stackoverflow.com/users/789745/l-fole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6559, "favorite_count": 1, "accepted_answer_id": 34995295, "answer_count": 3, "score": 0, "last_activity_date": 1453740361, "creation_date": 1453732312, "last_edit_date": 1495541716, "question_id": 34995071, "link": "https://stackoverflow.com/questions/34995071/how-to-efficiently-store-html-response-to-a-file-in-golang", "title": "How to efficiently store html response to a file in golang", "body": "<p>I'm trying to build a crawler in Golang. I'm using <code>net/http</code> library to download the html file from url. I'm trying to save <code>http.resp</code> and <code>http.Header</code> into file. </p>\n\n<p>How to convert these two file from their respective format into string so that, it could be written to a text file.</p>\n\n<p>I also see a question asked earlier on parsing a stored html response file.  <a href=\"https://stackoverflow.com/questions/33963467/parse-http-requests-and-responses-from-text-file-in-go?rq=1\">Parse HTTP requests and responses from text file in Go</a> . Is there any way to save the url response in this format.</p>\n"}, {"tags": ["go", "beego"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 1, "creation_date": 1453728977, "post_id": 34993894, "comment_id": 57715958, "body": "What version of Go are you using? You may be using an old version of Go which is probably having issues building the beego package. I tried on OSX with go 1.5.3 and it worked fine."}, {"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453729123, "post_id": 34993894, "comment_id": 57716041, "body": "Yeah, probably the go version. Just checked with 1.5.3 on windows 8 and it runs with no problems."}], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1453729636, "creation_date": 1453729636, "answer_id": 34994190, "question_id": 34993894, "link": "https://stackoverflow.com/questions/34993894/error-when-try-to-install-beego/34994190#34994190", "title": "Error when try to install BEEGO", "body": "<p>The empty <code>for range</code> loops were introduced in <a href=\"https://golang.org/doc/go1.4#forrange\" rel=\"nofollow\">Go 1.4</a>. Your Go version seems to be older. Check your version with</p>\n\n<pre><code>go version\n</code></pre>\n\n<p>and if it's older than 1.4, install a newer version <a href=\"https://golang.org/dl/\" rel=\"nofollow\">from the official website</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 3, "last_activity_date": 1453731454, "creation_date": 1453731454, "answer_id": 34994779, "question_id": 34993894, "link": "https://stackoverflow.com/questions/34993894/error-when-try-to-install-beego/34994779#34994779", "title": "Error when try to install BEEGO", "body": "<p>You seem to be using an old Go version which is failing to build the <code>beego</code> package. </p>\n\n<p>Note that the package is only tested against <code>go 1.5.1</code>. So try upgrading to go <code>1.5.x</code> and attempt to fetch it again. </p>\n\n<p><a href=\"https://github.com/astaxie/beego/blob/master/.travis.yml#L4\" rel=\"nofollow\">https://github.com/astaxie/beego/blob/master/.travis.yml#L4</a></p>\n\n<p>I'm pretty sure the upgrade will fix your issues. </p>\n"}], "owner": {"reputation": 1, "user_id": 5837204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097e5d75c8eb5ba9910e1c6ac4281d65?s=128&d=identicon&r=PG&f=1", "display_name": "Sergi Bas", "link": "https://stackoverflow.com/users/5837204/sergi-bas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453731454, "creation_date": 1453728680, "last_edit_date": 1453729107, "question_id": 34993894, "link": "https://stackoverflow.com/questions/34993894/error-when-try-to-install-beego", "title": "Error when try to install BEEGO", "body": "<p>I am very new with GO, and when I tried to install the framwork beego on my Windows 8 Desktop or in a VirtualBox with Debian8 I had the same error:</p>\n\n<pre><code>sergi@odoo:~$ go get github.com/astaxie/beego\n# github.com/astaxie/beego\nwork/src/github.com/astaxie/beego/tree.go:144: syntax error: unexpected range, expecting {\nwork/src/github.com/astaxie/beego/tree.go:155: syntax error: unexpected else, expecting semicolon or newline\nwork/src/github.com/astaxie/beego/tree.go:157: non-declaration statement outside function body\nwork/src/github.com/astaxie/beego/tree.go:158: non-declaration statement outside function body\nwork/src/github.com/astaxie/beego/tree.go:159: non-declaration statement outside function body\nwork/src/github.com/astaxie/beego/tree.go:160: syntax error: unexpected }\nwork/src/github.com/astaxie/beego/tree.go:257: syntax error: unexpected range, expecting {\nwork/src/github.com/astaxie/beego/tree.go:267: syntax error: unexpected else, expecting semicolon or newline or }\nwork/src/github.com/astaxie/beego/tree.go:283: syntax error: unexpected }\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 12, "creation_date": 1453724030, "post_id": 34992328, "comment_id": 57712769, "body": "Why not just <code>-b</code>?"}, {"owner": {"reputation": 3121, "user_id": 1889327, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/lFDYA.jpg?s=128&g=1", "display_name": "andy", "link": "https://stackoverflow.com/users/1889327/andy"}, "reply_to_user": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "edited": false, "score": 0, "creation_date": 1453784045, "post_id": 34992328, "comment_id": 57742116, "body": "@Ainar-G, This is partial code of a function, i want to make the function invoked like <code>DecrBy(10)</code>, which is more natural, instead <code>DecrBy(-10)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 3926156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lMum.png?s=128&g=1", "display_name": "alecdwm", "link": "https://stackoverflow.com/users/3926156/alecdwm"}, "reply_to_user": {"reputation": 3121, "user_id": 1889327, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/lFDYA.jpg?s=128&g=1", "display_name": "andy", "link": "https://stackoverflow.com/users/1889327/andy"}, "edited": false, "score": 1, "creation_date": 1453808919, "post_id": 34992704, "comment_id": 57753031, "body": "I think you&#39;re overcomplicating your solution. Forget all the type casting, just do <code>2 * -1</code>. a-la <a href=\"http://play.golang.org/p/Y2CgPeQSF8\" rel=\"nofollow noreferrer\">play.golang.org/p/Y2CgPeQSF8</a> or <a href=\"http://play.golang.org/p/TdhvyM3Yxv\" rel=\"nofollow noreferrer\">play.golang.org/p/TdhvyM3Yxv</a>."}, {"owner": {"reputation": 3121, "user_id": 1889327, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/lFDYA.jpg?s=128&g=1", "display_name": "andy", "link": "https://stackoverflow.com/users/1889327/andy"}, "edited": false, "score": 1, "creation_date": 1453878580, "post_id": 34992704, "comment_id": 57787315, "body": "that is incredible easy and work around it. awesome.:)"}], "tags": [], "owner": {"reputation": 751, "user_id": 3926156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lMum.png?s=128&g=1", "display_name": "alecdwm", "link": "https://stackoverflow.com/users/3926156/alecdwm"}, "is_accepted": false, "score": 1, "last_activity_date": 1480176915, "last_edit_date": 1480176915, "creation_date": 1453725144, "answer_id": 34992704, "question_id": 34992328, "link": "https://stackoverflow.com/questions/34992328/how-to-convert-a-positive-signed-int32-value-to-its-negative-one/34992704#34992704", "title": "How to convert a positive signed int32 value to its negative one?", "body": "<p>The two results are different because the first value is typecast to an <em>unsigned</em> int32 (a <code>uint32</code>).</p>\n\n<p>This occurs here: <code>uint32(^uint32(int32(2) -1))</code><br>\nOr more simply: <code>uint32(-2)</code></p>\n\n<p>An <code>int32</code> can store any integer between -2147483648 and 2147483647.<br>\nThat's a total of 4294967296 different integer values (2^32... i.e. 32 bits).</p>\n\n<p>An <em>unsigned</em> int32 can store the same <strong>amount</strong> of different integer values, but drops the signage (+/-). In other words, an <em>unsigned</em> int32 can store any value from 0 to 4294967295.</p>\n\n<p>But what happens when we typecast a <em>signed</em> int32 (with a value of -2) to an <em>unsigned</em> int32, which cannot possibly store the value of -2?</p>\n\n<p>Well as you have found, we get the value of 4294967294. Which in a number system where one integer less than 0 is 4294967295; 4294967294 happens to be the sum of 0 - 2.</p>\n"}, {"tags": [], "owner": {"reputation": 3121, "user_id": 1889327, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/lFDYA.jpg?s=128&g=1", "display_name": "andy", "link": "https://stackoverflow.com/users/1889327/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1480176826, "last_edit_date": 1480176826, "creation_date": 1454052563, "answer_id": 35079039, "question_id": 34992328, "link": "https://stackoverflow.com/questions/34992328/how-to-convert-a-positive-signed-int32-value-to-its-negative-one/35079039#35079039", "title": "How to convert a positive signed int32 value to its negative one?", "body": "<p>Occasionally, i have learned that why we can not do   </p>\n\n<pre><code>fmt.Printf(\"%v\\n\", int32(^uint32(int32(2) -1)))\n</code></pre>\n\n<p>at compile time. It is that <code>^uint32(int32(2)-1)</code> is treated as a <code>constant</code> value with <code>uint32</code> type. It's value is <code>4294967294</code>. This exceeds the maximum value of <code>int32</code> for <code>2147483647</code>. So when you run <code>go build</code> on the source code file. <code>Compile error</code> is shown.</p>\n\n<p>The right answer to this should be:  </p>\n\n<pre><code>fmt.Printf(\"%v\\n, ^(int32(2) - 1))\n</code></pre>\n\n<p>i.e., we should first get the corresponding value of <code>1</code> in <code>int32</code> type and, then convert it to the <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\"><code>two's complementary form</code></a> as value of <code>-1</code>.</p>\n\n<p>However, according to <a href=\"https://blog.golang.org/constants\" rel=\"nofollow noreferrer\">this golang blog</a>'s <code>An exercise: The largest unsigned int</code> section, this is legal in runtime. So the code </p>\n\n<pre><code>var b int32 = 2\nfmt.Printf(\"%v\\n\", int32(^uint32(int32(b)-1)))\n</code></pre>\n\n<p>is alright.</p>\n\n<p>And, finally it comes to that this is related to constants in Golang. :)</p>\n"}], "owner": {"reputation": 3121, "user_id": 1889327, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/lFDYA.jpg?s=128&g=1", "display_name": "andy", "link": "https://stackoverflow.com/users/1889327/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5115, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480177003, "creation_date": 1453723929, "last_edit_date": 1480177003, "question_id": 34992328, "link": "https://stackoverflow.com/questions/34992328/how-to-convert-a-positive-signed-int32-value-to-its-negative-one", "title": "How to convert a positive signed int32 value to its negative one?", "body": "<p>I have try to write one logic is to convert an <code>int32</code> positive value to a corresponding negative one, i.e., <code>abs(negativeInt32) == positiveInt32</code>.</p>\n\n<p>I have tried with both:  </p>\n\n<ul>\n<li><p>First:</p>\n\n<pre><code>fmt.Printf(\"%v\\n\", int32(^uint32(int32(2) -1)))\n</code></pre>\n\n<p>This results in an error : <code>prog.go:8: constant 4294967294 overflows int32</code></p></li>\n<li><p>Second:</p>\n\n<pre><code>var b int32 = 2\nfmt.Printf(\"%v\\n\", int32(^uint32(int32(b)-1)))\n</code></pre>\n\n<p>This results in <code>-2</code>.</p></li>\n</ul>\n\n<p>How can both result in different results. I think they are equal.<br>\n<a href=\"http://play.golang.org/p/zipqfzVkk6\" rel=\"nofollow noreferrer\">play.golang.org</a></p>\n\n<h3>EDIT</h3>\n\n<p>Edit for replacing <code>uint32</code> with <code>int32</code> for the first situation.</p>\n\n<h3>ANSWERED</h3>\n\n<p>For those who come to this problem, I have answered the question myself. :)</p>\n"}, {"tags": ["c", "gcc", "go", "shared-libraries", "shared-objects"], "comments": [{"owner": {"reputation": 786, "user_id": 3970774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31c6c201b5b8718914fae0a47c7a7967?s=128&d=identicon&r=PG&f=1", "display_name": "NIket", "link": "https://stackoverflow.com/users/3970774/niket"}, "edited": false, "score": 0, "creation_date": 1453722778, "post_id": 34991934, "comment_id": 57711960, "body": "all these files are in same location"}], "answers": [{"tags": [], "owner": {"reputation": 1423, "user_id": 5700944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb2f574da513288b45bde6de8f06999?s=128&d=identicon&r=PG&f=1", "display_name": "dmi", "link": "https://stackoverflow.com/users/5700944/dmi"}, "is_accepted": true, "score": 4, "last_activity_date": 1453723015, "creation_date": 1453723015, "answer_id": 34992023, "question_id": 34991934, "link": "https://stackoverflow.com/questions/34991934/how-to-run-c-program-with-so-file/34992023#34992023", "title": "How to run c program with .so file", "body": "<p>Most probably your loader cannot find the library. Try to put the path to the directory where the libarry is located to <code>LD_LIBRARY_PATH</code> prior to run your binary.</p>\n\n<pre><code>export LD_LIBRARY_PATH=/path/to/my/library\n./a.out\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 1, "last_activity_date": 1453727599, "last_edit_date": 1453727599, "creation_date": 1453723034, "answer_id": 34992031, "question_id": 34991934, "link": "https://stackoverflow.com/questions/34991934/how-to-run-c-program-with-so-file/34992031#34992031", "title": "How to run c program with .so file", "body": "<p>You should use <code>LD_LIBRARY_PATH</code> to let the dynamic linker find your shared library in the list. Syntax is similar to <code>PATH</code> a list of directories separted by <code>:</code>.</p>\n\n<p>On OSX this environment variable is called <code>DYLD_LIBRARY_PATH</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 10, "last_activity_date": 1453723616, "last_edit_date": 1453723616, "creation_date": 1453723260, "answer_id": 34992103, "question_id": 34991934, "link": "https://stackoverflow.com/questions/34991934/how-to-run-c-program-with-so-file/34992103#34992103", "title": "How to run c program with .so file", "body": "<p>You should use the <a href=\"https://sourceware.org/binutils/docs/ld/Options.html#Options\" rel=\"noreferrer\">linker option</a> <a href=\"https://sourceware.org/binutils/docs/ld/Options.html#index-runtime-library-search-path-230\" rel=\"noreferrer\"><code>-rpath</code></a>, which tells the linker to add information in the executable program where to find runtime libraries like your <code>.so</code> file.</p>\n\n<p>This can be done using the GCC option <code>-Wl</code> which instructs the GCC frontend program to pass an option to the linker:</p>\n\n<pre><code>$ gcc c.c t.so -Wl,-rpath=$(pwd)\n</code></pre>\n\n<p>This will pass <code>-rpath=$(pwd)</code> to the linker, and <code>$(pwd)</code> causes the shell to call the <code>pwd</code> command to return the current directory.</p>\n\n<p>As long as you don't move the library the program should work.</p>\n\n<hr>\n\n<p>You <em>can</em> use the environment variable <code>LD_LIBRARY_PATH</code> too, but it's <a href=\"http://prefetch.net/articles/linkers.badldlibrary.html\" rel=\"noreferrer\">not recommended</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1175, "user_id": 1654526, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3287ef88010dfa6ae54dfadd74a0d5e0?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1654526/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1453725145, "creation_date": 1453725145, "answer_id": 34992705, "question_id": 34991934, "link": "https://stackoverflow.com/questions/34991934/how-to-run-c-program-with-so-file/34992705#34992705", "title": "How to run c program with .so file", "body": "<p>.so files are shared object, meaning object that are available to all applications that need them.. that is, shared. Due to this characteristics, they need to be stored in a well known place. Also, they need to be indexed by the dynamic linker.</p>\n\n<p>In linux for instance you typically have a file <em>/etc/ld.so.conf</em> where all directories where shared object are automatically read from are stored</p>\n\n<p>So your options are:</p>\n\n<ul>\n<li>Put your shared object file in a well known place</li>\n<li>Put your shared object file in a place of your choice and let the dynamic linker know about it: in linux you can modify <em>ld.so.conf</em> and run <em>ldconfig</em> to update ld indexes</li>\n<li>As other suggested write the path of your .so in the env variable LD_LIBRARY_PATH (since dynamic linker reads it before running your application). This must be done at each environment creation</li>\n<li>As other suggested use -rpath when compiling. Note that in this way you cannot move your .so file after the compilation</li>\n</ul>\n\n<p>Personally I prefer installing the .so file in a system library path</p>\n"}], "owner": {"reputation": 786, "user_id": 3970774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31c6c201b5b8718914fae0a47c7a7967?s=128&d=identicon&r=PG&f=1", "display_name": "NIket", "link": "https://stackoverflow.com/users/3970774/niket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26894, "favorite_count": 4, "accepted_answer_id": 34992023, "answer_count": 4, "score": 7, "last_activity_date": 1570174755, "creation_date": 1453722755, "last_edit_date": 1570174755, "question_id": 34991934, "link": "https://stackoverflow.com/questions/34991934/how-to-run-c-program-with-so-file", "title": "How to run c program with .so file", "body": "<p>I have gone through all the solutions on StackOverflow as well as Ask Ubuntu.</p>\n\n<p>I have a Go program:</p>\n\n<pre><code>package main\n\nimport \"C\"\n\n//export Getint\nfunc Getint() int {\n        return  2\n}\n\nfunc main() {}\n</code></pre>\n\n<p>and I have generated <code>.so</code> file for the same with name <code>t.so and header file</code>t.h`</p>\n\n<p>Now I would like to use this function in my C program.<br>\nI have written the code but I don't know how to execute it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;t.h&gt;\nint main()\n{\nint a;\na=Getint();\nprintf(\"number : %d\",a);\nreturn 0;\n}\n</code></pre>\n\n<p>When I execute it with</p>\n\n<pre><code>gcc c.c t.so\n</code></pre>\n\n<p>it generates <code>a.out</code> file</p>\n\n<p>but at the time of running <code>a.out</code> with <code>./a.out</code> it gives an error:</p>\n\n<pre><code>./a.out\nError while loading shared libraries: t.so: can not open shared object file: no such file or directory exists.\n</code></pre>\n\n<p>then I tried with:</p>\n\n<pre><code>gcc -c c.c -l t.so\n</code></pre>\n\n<p>So it generates <code>c.o</code> file and it is not executable.</p>\n"}, {"tags": ["go", "compression", "lz4"], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 0, "creation_date": 1453740113, "post_id": 34993510, "comment_id": 57723421, "body": "I need a compress a file to some other binary file using this package.And also i used this main program to compress my file [ <a href=\"https://github.com/pierrec/lz4/blob/master/lz4c/main.go\" rel=\"nofollow noreferrer\">github.com/pierrec/lz4/blob/master/lz4c/main.go</a> ] .Its getting compressed.."}, {"owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 1, "creation_date": 1453991498, "post_id": 34993510, "comment_id": 57851155, "body": "thanks for your answer. If i wrote compress and decompress in two different function then my decompression part i am having only the compressed data. Then how to handle this situation while creating buffer for decompression  <code>decompressed := make([]byte, len(toCompress))</code> And also  i got short buffer error from this i understand buffer is not enough.kindly help me out...."}, {"owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "reply_to_user": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 0, "creation_date": 1454003677, "post_id": 34993510, "comment_id": 57860087, "body": "You need to store the uncompressed data size somewhere while compressing and use it while decompressing. for example in db or in compressed data itself."}], "tags": [], "owner": {"reputation": 6265, "user_id": 3387925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mtLre.jpg?s=128&g=1", "display_name": "Mayank Patel", "link": "https://stackoverflow.com/users/3387925/mayank-patel"}, "is_accepted": true, "score": 5, "last_activity_date": 1453727504, "creation_date": 1453727504, "answer_id": 34993510, "question_id": 34991544, "link": "https://stackoverflow.com/questions/34991544/how-to-compress-and-decompress-a-file-using-lz4/34993510#34993510", "title": "How to compress and decompress a file using lz4?", "body": "<p>I think blow example should direct you to correct direction. It is the simplest example of how to compress and decompress using <code>github.com/pierrec/lz4</code> package.</p>\n\n<pre><code>//compress project main.go\npackage main\n\nimport \"fmt\"\nimport \"github.com/pierrec/lz4\"\n\nvar fileContent = `CompressBlock compresses the source buffer starting at soffet into the destination one.\nThis is the fast version of LZ4 compression and also the default one.\nThe size of the compressed data is returned. If it is 0 and no error, then the data is incompressible.\nAn error is returned if the destination buffer is too small.`\n\nfunc main() {\n    toCompress := []byte(fileContent)\n    compressed := make([]byte, len(toCompress))\n\n    //compress\n    l, err := lz4.CompressBlock(toCompress, compressed, 0)\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(\"compressed Data:\", string(compressed[:l]))\n\n    //decompress\n    decompressed := make([]byte, len(toCompress))\n    l, err = lz4.UncompressBlock(compressed[:l], decompressed, 0)\n    if err != nil {\n        panic(err)\n    }\n    fmt.Println(\"\\ndecompressed Data:\", string(decompressed[:l]))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 0, "creation_date": 1453730109, "post_id": 34993787, "comment_id": 57716628, "body": "its working but the file size bit large [ <a href=\"https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fpierrec%2Flz4%2Fblob%2Fmaster%2Flz4c%2Fmain.go&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFIT2O1Grs0vu4Gh8Af96GSBaa9EA\" rel=\"nofollow noreferrer\">google.com/&hellip;</a> ]. using this main code , i am done with compression. This compression size is half of your output size."}, {"owner": {"reputation": 751, "user_id": 3926156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lMum.png?s=128&g=1", "display_name": "alecdwm", "link": "https://stackoverflow.com/users/3926156/alecdwm"}, "reply_to_user": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 0, "creation_date": 1453736513, "post_id": 34993787, "comment_id": 57721013, "body": "I don&#39;t completely understand what you are trying to say in that comment, could you please re-phrase for me?"}, {"owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "edited": false, "score": 0, "creation_date": 1453740816, "post_id": 34993787, "comment_id": 57723863, "body": "From your code, my test file is compressed to 13 KB but using [ <a href=\"https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fpierrec%2Flz4%2Fblob%2Fmaster%2Flz4c%2Fmain.go&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFIT2O1Grs0vu4Gh8Af96GSBaa9EA\" rel=\"nofollow noreferrer\">google.com/&hellip;</a> ] this main code, the same file is compressed to 7 kb"}], "tags": [], "owner": {"reputation": 751, "user_id": 3926156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lMum.png?s=128&g=1", "display_name": "alecdwm", "link": "https://stackoverflow.com/users/3926156/alecdwm"}, "is_accepted": false, "score": 3, "last_activity_date": 1453729238, "last_edit_date": 1453729238, "creation_date": 1453728361, "answer_id": 34993787, "question_id": 34991544, "link": "https://stackoverflow.com/questions/34991544/how-to-compress-and-decompress-a-file-using-lz4/34993787#34993787", "title": "How to compress and decompress a file using lz4?", "body": "<p>Using the bufio package you can (de)compress files without slurping their entire contents into your memory all at once.</p>\n\n<p>In effect this allows you to (de)compress files larger than the memory available to the system, which may or may not be relevant to your specific circumstances.</p>\n\n<p>If this is relevant, you can find a working example here:</p>\n\n<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"io\"\n    \"os\"\n\n    \"github.com/pierrec/lz4\"\n)\n\n// Compress a file, then decompress it again!\nfunc main() {\n    compress(\"./compress-me.txt\", \"./compressed.txt\")\n    decompress(\"./compressed.txt\", \"./decompressed.txt\")\n}\n\nfunc compress(inputFile, outputFile string) {\n    // open input file\n    fin, err := os.Open(inputFile)\n    if err != nil {\n        panic(err)\n    }\n    defer func() {\n        if err := fin.Close(); err != nil {\n            panic(err)\n        }\n    }()\n    // make a read buffer\n    r := bufio.NewReader(fin)\n\n    // open output file\n    fout, err := os.Create(outputFile)\n    if err != nil {\n        panic(err)\n    }\n    defer func() {\n        if err := fout.Close(); err != nil {\n            panic(err)\n        }\n    }()\n    // make an lz4 write buffer\n    w := lz4.NewWriter(fout)\n\n    // make a buffer to keep chunks that are read\n    buf := make([]byte, 1024)\n    for {\n        // read a chunk\n        n, err := r.Read(buf)\n        if err != nil &amp;&amp; err != io.EOF {\n            panic(err)\n        }\n        if n == 0 {\n            break\n        }\n\n        // write a chunk\n        if _, err := w.Write(buf[:n]); err != nil {\n            panic(err)\n        }\n    }\n\n    if err = w.Flush(); err != nil {\n        panic(err)\n    }\n}\n\nfunc decompress(inputFile, outputFile string) {\n    // open input file\n    fin, err := os.Open(inputFile)\n    if err != nil {\n        panic(err)\n    }\n    defer func() {\n        if err := fin.Close(); err != nil {\n            panic(err)\n        }\n    }()\n\n    // make an lz4 read buffer\n    r := lz4.NewReader(fin)\n\n    // open output file\n    fout, err := os.Create(outputFile)\n    if err != nil {\n        panic(err)\n    }\n    defer func() {\n        if err := fout.Close(); err != nil {\n            panic(err)\n        }\n    }()\n\n    // make a write buffer\n    w := bufio.NewWriter(fout)\n\n    // make a buffer to keep chunks that are read\n    buf := make([]byte, 1024)\n    for {\n        // read a chunk\n        n, err := r.Read(buf)\n        if err != nil &amp;&amp; err != io.EOF {\n            panic(err)\n        }\n        if n == 0 {\n            break\n        }\n\n        // write a chunk\n        if _, err := w.Write(buf[:n]); err != nil {\n            panic(err)\n        }\n    }\n\n    if err = w.Flush(); err != nil {\n        panic(err)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "is_accepted": false, "score": 0, "last_activity_date": 1453742601, "creation_date": 1453742601, "answer_id": 34998478, "question_id": 34991544, "link": "https://stackoverflow.com/questions/34991544/how-to-compress-and-decompress-a-file-using-lz4/34998478#34998478", "title": "How to compress and decompress a file using lz4?", "body": "<p>The result What i expected is from the below code. I got this [ <a href=\"https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fpierrec%2Flz4%2Fblob%2Fmaster%2Flz4c%2Fmain.go&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFIT2O1Grs0vu4Gh8Af96GSBaa9EA\" rel=\"nofollow\">https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fpierrec%2Flz4%2Fblob%2Fmaster%2Flz4c%2Fmain.go&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNFIT2O1Grs0vu4Gh8Af96GSBaa9EA</a> ] from this file.\nFile is given as input in the command line argument and its compressed/Decompressed Successfully. </p>\n\n<pre><code>package main\nimport (\n    //  \"bytes\"\n\n    \"flag\"\n    \"fmt\"\n    \"io\"\n    \"log\"\n    \"os\"\n    \"path\"\n    \"runtime\"\n    \"strings\"\n\n    \"github.com/pierrec/lz4\"\n)\n\nfunc main() {\n    // Process command line arguments\n    var (\n        blockMaxSizeDefault = 4 &lt;&lt; 20\n        flagStdout          = flag.Bool(\"c\", false, \"output to stdout\")\n        flagDecompress      = flag.Bool(\"d\", false, \"decompress flag\")\n        flagBlockMaxSize    = flag.Int(\"B\", blockMaxSizeDefault, \"block max size [64Kb,256Kb,1Mb,4Mb]\")\n        flagBlockDependency = flag.Bool(\"BD\", false, \"enable block dependency\")\n        flagBlockChecksum   = flag.Bool(\"BX\", false, \"enable block checksum\")\n        flagStreamChecksum  = flag.Bool(\"Sx\", false, \"disable stream checksum\")\n        flagHighCompression = flag.Bool(\"9\", false, \"enabled high compression\")\n    )\n    flag.Usage = func() {\n        fmt.Fprintf(os.Stderr, \"Usage:\\n\\t%s [arg] [input]...\\n\\tNo input means [de]compress stdin to stdout\\n\\n\", os.Args[0])\n        flag.PrintDefaults()\n    }\n    flag.Parse()\n    fmt.Println(\"output to stdout \", *flagStdout)\n    fmt.Println(\"Decompress\", *flagDecompress)\n    // Use all CPUs\n    runtime.GOMAXPROCS(runtime.NumCPU())\n\n    zr := lz4.NewReader(nil)\n    zw := lz4.NewWriter(nil)\n    zh := lz4.Header{\n        BlockDependency: *flagBlockDependency,\n        BlockChecksum:   *flagBlockChecksum,\n        BlockMaxSize:    *flagBlockMaxSize,\n        NoChecksum:      *flagStreamChecksum,\n        HighCompression: *flagHighCompression,\n    }\n\n    worker := func(in io.Reader, out io.Writer) {\n        if *flagDecompress {\n            fmt.Println(\"\\n Decompressing the data\")\n            zr.Reset(in)\n            if _, err := io.Copy(out, zr); err != nil {\n                log.Fatalf(\"Error while decompressing input: %v\", err)\n            }\n        } else {\n            zw.Reset(out)\n            zw.Header = zh\n            if _, err := io.Copy(zw, in); err != nil {\n                log.Fatalf(\"Error while compressing input: %v\", err)\n            }\n        }\n    }\n\n    // No input means [de]compress stdin to stdout\n    if len(flag.Args()) == 0 {\n        worker(os.Stdin, os.Stdout)\n        os.Exit(0)\n    }\n\n    // Compress or decompress all input files\n    for _, inputFileName := range flag.Args() {\n        outputFileName := path.Clean(inputFileName)\n\n        if !*flagStdout {\n            if *flagDecompress {\n                outputFileName = strings.TrimSuffix(outputFileName, lz4.Extension)\n                if outputFileName == inputFileName {\n                    log.Fatalf(\"Invalid output file name: same as input: %s\", inputFileName)\n                }\n            } else {\n                outputFileName += lz4.Extension\n            }\n        }\n\n        inputFile, err := os.Open(inputFileName)\n        if err != nil {\n            log.Fatalf(\"Error while opening input: %v\", err)\n        }\n\n        outputFile := os.Stdout\n        if !*flagStdout {\n            outputFile, err = os.Create(outputFileName)\n            if err != nil {\n                log.Fatalf(\"Error while opening output: %v\", err)\n            }\n        }\n        worker(inputFile, outputFile)\n\n        inputFile.Close()\n        if !*flagStdout {\n            outputFile.Close()\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Sample Input</strong></p>\n\n<p>go run compress.go -9=true sample.txt</p>\n"}, {"tags": [], "owner": {"reputation": 7044, "user_id": 2132753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ewavI.jpg?s=128&g=1", "display_name": "Gustavo Bezerra", "link": "https://stackoverflow.com/users/2132753/gustavo-bezerra"}, "is_accepted": false, "score": -1, "last_activity_date": 1599517758, "last_edit_date": 1599517758, "creation_date": 1566795720, "answer_id": 57652006, "question_id": 34991544, "link": "https://stackoverflow.com/questions/34991544/how-to-compress-and-decompress-a-file-using-lz4/57652006#57652006", "title": "How to compress and decompress a file using lz4?", "body": "<p>I am also new to Go and have struggled a bit using <code>github.com/pierrec/lz4</code>.</p>\n<p>What I was misunderstanding is that calling <code>Close()</code> on <code>NewWriter</code> is <strong>not optional</strong> and failing to do so will lead to <strong>incorrect results</strong>. (I spent a lot of time banging my head against the wall for thinking this was optional and just a best-practice, as it is in closing file handlers, network connections, etc)</p>\n<p>I wrote two wrapper versions for compressing/decompressing.</p>\n<p>First, a generic reader/writer approach (similar to the example on the README, but without pipes) [<a href=\"https://play.golang.org/p/LhWJQJMnK6D\" rel=\"nofollow noreferrer\">playground</a>]:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>func compress(r io.Reader, w io.Writer) error {\n    zw := lz4.NewWriter(w)\n    _, err := io.Copy(zw, r)\n    if err != nil {\n        return err\n    }\n    // Closing is *very* important\n    return zw.Close()\n}\n\nfunc decompress(r io.Reader, w io.Writer) error {\n    zr := lz4.NewReader(r)\n    _, err := io.Copy(w, zr)\n    return err\n}\n</code></pre>\n<p>If your data size is small and you don't need to/want to mess with buffers and just want to have uncompressed bytes in, compressed bytes out, (in a more &quot;functional&quot; fashion) this second version may be more convenient [<a href=\"https://play.golang.org/p/pEdICj5orMw\" rel=\"nofollow noreferrer\">playground</a>]:</p>\n<pre class=\"lang-golang prettyprint-override\"><code>func compress(in []byte) ([]byte, error) {\n    r := bytes.NewReader(in)\n    w := &amp;bytes.Buffer{}\n    zw := lz4.NewWriter(w)\n    _, err := io.Copy(zw, r)\n    if err != nil {\n        return nil, err\n    }\n    // Closing is *very* important\n    if err := zw.Close(); err != nil {\n        return nil, err\n    }\n    return w.Bytes(), nil\n}\n\nfunc decompress(in []byte) ([]byte, error) {\n    r := bytes.NewReader(in)\n    w := &amp;bytes.Buffer{}\n    zr := lz4.NewReader(r)\n    _, err := io.Copy(w, zr)\n    if err != nil {\n        return nil, err\n    }\n    return w.Bytes(), nil\n}\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 5397795, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/898232106936756/picture?type=large", "display_name": "Dharani Dharan", "link": "https://stackoverflow.com/users/5397795/dharani-dharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6226, "favorite_count": 1, "accepted_answer_id": 34993510, "answer_count": 4, "score": 6, "last_activity_date": 1599517758, "creation_date": 1453721494, "last_edit_date": 1566817233, "question_id": 34991544, "link": "https://stackoverflow.com/questions/34991544/how-to-compress-and-decompress-a-file-using-lz4", "title": "How to compress and decompress a file using lz4?", "body": "<p>I want to compress and decompress a file using lz4 algorithm in Go. Is there any package available to do this? \nI searched and found a package called \n<a href=\"https://github.com/pierrec/lz4\" rel=\"nofollow noreferrer\">https://github.com/pierrec/lz4</a> </p>\n\n<p>I am new Go and I cannot figure out how to use this package to compress and decompress a file.</p>\n\n<p>I need to use this package to compress a file to binary format and decompress the binary file to original file using Go.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 1, "creation_date": 1453733789, "post_id": 34990417, "comment_id": 57719092, "body": "b&#39;s String() function can use <code>return string(*b)</code>, didn&#39;t need to sprintf the value.  just needed to match the return type of of the function"}, {"owner": {"reputation": 991, "user_id": 1061927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0ad4a66f66d793ea39a35ddacbcb45?s=128&d=identicon&r=PG", "display_name": "Dynom", "link": "https://stackoverflow.com/users/1061927/dynom"}, "reply_to_user": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 0, "creation_date": 1453815956, "post_id": 34990417, "comment_id": 57757236, "body": "Ah, you&#39;re right. I can&#39;t believe I missed that. I think I was thrown off by the error message <code>cannot convert b (type *Bar) to type string</code>. Thanks for the help."}, {"owner": {"reputation": 58775, "user_id": 474189, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/jzXIJ.jpg?s=128&g=1", "display_name": "Duncan Jones", "link": "https://stackoverflow.com/users/474189/duncan-jones"}, "edited": false, "score": 0, "creation_date": 1498807848, "post_id": 34990417, "comment_id": 76662170, "body": "@Dynom Please don&#39;t add answers to your question. If you&#39;ve got some interesting info to share, add your own answer below."}], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 1061927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0ad4a66f66d793ea39a35ddacbcb45?s=128&d=identicon&r=PG", "display_name": "Dynom", "link": "https://stackoverflow.com/users/1061927/dynom"}, "edited": false, "score": 0, "creation_date": 1453731452, "post_id": 34991364, "comment_id": 57717474, "body": "Actually, that makes a lot of sense.  But how come dereferencing in the method doesn&#39;t work? I&#39;ve tried this, but that doesn&#39;t work:      func (f *Foo) String() string {         return (*f).string     }"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 2, "creation_date": 1453733702, "post_id": 34991364, "comment_id": 57719023, "body": "When you pass printf a you are passing it the value a.  Change it to &amp;a (pointer to a) and your String() func will get called (from line 24 in your play example).  But it&#39;s notmally weird to pass around pointers to strings, so this answer makes more sense"}, {"owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "reply_to_user": {"reputation": 991, "user_id": 1061927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0ad4a66f66d793ea39a35ddacbcb45?s=128&d=identicon&r=PG", "display_name": "Dynom", "link": "https://stackoverflow.com/users/1061927/dynom"}, "edited": false, "score": 0, "creation_date": 1453755030, "post_id": 34991364, "comment_id": 57732274, "body": "@Dynom, &quot;The rule about pointers vs. values for receivers is that value methods can be invoked on pointers and values, but pointer methods can only be invoked on pointers&quot;"}, {"owner": {"reputation": 991, "user_id": 1061927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0ad4a66f66d793ea39a35ddacbcb45?s=128&d=identicon&r=PG", "display_name": "Dynom", "link": "https://stackoverflow.com/users/1061927/dynom"}, "edited": false, "score": 0, "creation_date": 1453815432, "post_id": 34991364, "comment_id": 57756856, "body": "Allright, that helped. Thanks for the explanations!"}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": true, "score": 0, "last_activity_date": 1453755094, "last_edit_date": 1495541047, "creation_date": 1453720895, "answer_id": 34991364, "question_id": 34990417, "link": "https://stackoverflow.com/questions/34990417/how-to-convert-a-user-defined-named-type-struct-to-its-anonymous-type/34991364#34991364", "title": "How to convert a user-defined named type/struct to it&#39;s anonymous type", "body": "<p>You've made a pointer receivers for your <code>String</code> methods, but you are working with values, not pointers to them, so it wouldn't apply. You need to switch to pointers or change <code>String</code> methods signatures:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Foo struct {\n    string\n}\n\nfunc (f Foo) String() string {\n    return \"My \" + f.string\n}\n\ntype Bar string\n\nfunc (b Bar) String() string {\n    return fmt.Sprintf(\"My %s\", string(b))\n}\n\nfunc main() {\n    a := Foo{\"a\"}\n    var b Bar = \"b\"\n\n    fmt.Printf(\"A is: %s\\n\", a)\n    fmt.Printf(\"B is: %s\\n\", b)\n}\n</code></pre>\n\n<p>Please, be careful with <a href=\"https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver-in-golang\">receivers type</a>:</p>\n\n<blockquote>\n  <p>The rule about pointers vs. values for receivers is that value methods\n  can be invoked on pointers and values, but pointer methods can only be\n  invoked on pointers</p>\n</blockquote>\n\n<p>Oh, and one more thing. <code>fmt.Sprintf(\"%s\", b)</code> will call <code>String</code> method if it's defined. So, you'll get a recursion.</p>\n"}], "owner": {"reputation": 991, "user_id": 1061927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0ad4a66f66d793ea39a35ddacbcb45?s=128&d=identicon&r=PG", "display_name": "Dynom", "link": "https://stackoverflow.com/users/1061927/dynom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 34991364, "answer_count": 1, "score": 1, "last_activity_date": 1453817362, "creation_date": 1453718057, "last_edit_date": 1495542207, "question_id": 34990417, "link": "https://stackoverflow.com/questions/34990417/how-to-convert-a-user-defined-named-type-struct-to-its-anonymous-type", "title": "How to convert a user-defined named type/struct to it&#39;s anonymous type", "body": "<h1>The original question</h1>\n\n<p>I have the following Go code. I would like to handle <code>Foo</code> a struct or <code>Bar</code> a type as a string. With \"handle\" I mean that I would like to convert/cast/whatever it's underlaying value to the (real) type <code>string</code>. I have a workaround, but I find it unintuitive in the case of a struct.</p>\n\n<p>Going for a Type (instead of a struct) seems the better approach. I don't need to maintain any state, nor do I have any need for \"inheriting\" type specific functionality, so in my case it should work. However a call to <code>type.String()</code> causes stack recursion. I'm mostly curious if I'm not missing something (obvious).</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype Foo struct {\n    string\n}\n\nfunc (f *Foo) String() string {\n    return f.string\n}\n\n\ntype Bar string\n\nfunc (b *Bar) String() string {\n    return fmt.Sprintf(\"%s\", b) // Cannot use: return string(b) here.\n}\n\nfunc main() {\n    a := Foo{\"a\"}\n    var b Bar\n    b = \"b\"\n\n    fmt.Printf(\"A is: %s\\n\", a) // Doesn't call a.String() ?\n    //fmt.Printf(\"A is: %s\\n\", string(a)) // Doesn't work\n    fmt.Printf(\"A is: %s\\n\", a.string)   // workaround A\n    fmt.Printf(\"A is: %s\\n\", a.String()) // workaround B, required if I want to use it in a different package\n\n    fmt.Printf(\"B is: %s\\n\", b) // Calls b.String()\n    fmt.Printf(\"B is: %s\\n\", string(b))\n    //fmt.Printf(\"B is: %s\\n\", b.String()) // Causes a stack overflow\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A is: {a}\nA is: a\nA is: a\nB is: b\nB is: b\n</code></pre>\n\n<p>Code on Go's Playground: <a href=\"https://play.golang.org/p/zgrKao4cxa\" rel=\"nofollow noreferrer\">https://play.golang.org/p/zgrKao4cxa</a>\nThe behaviour is from Go version 1.5.2</p>\n\n<h1>Answers</h1>\n\n<p>The following are short examples based on the answers of my original questions. Also, the following post helped in understanding and reasoning of the subject: <a href=\"https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver-in-golang\">Value receiver vs. Pointer receiver in Golang?</a></p>\n\n<p>In case of a type, the following works:</p>\n\n<pre><code>type MyString string\n\nfunc (b MyString) String() string {\n    return string(b)\n}\n</code></pre>\n\n<p>Go's Playground link: <a href=\"https://play.golang.org/p/H12bteAk8D\" rel=\"nofollow noreferrer\">https://play.golang.org/p/H12bteAk8D</a></p>\n\n<p>In case of a struct, the following works:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\ntype MyString struct {\n    string\n    someState int\n}\n\nfunc (m MyString) String() string {\n    return string(m.string)\n}\n\nfunc main() {\n    // The verbose version: \n    //var a MyString = MyString{string: \"a\", someState: 1}\n\n    a := MyString{\"a\", 1}\n\n    fmt.Printf(\"A is: %s\\n\", a)\n    fmt.Printf(\"A is: %s\\n\", a.String())\n}\n</code></pre>\n\n<p>Go's Playground link: <a href=\"https://play.golang.org/p/GEKeY4rmB8\" rel=\"nofollow noreferrer\">https://play.golang.org/p/GEKeY4rmB8</a></p>\n"}, {"tags": ["google-app-engine", "go", "google-cloud-datastore"], "answers": [{"comments": [{"owner": {"reputation": 5728, "user_id": 2184930, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/460a48b8097cbd52e7315e349f6a84f3?s=128&d=identicon&r=PG", "display_name": "suman j", "link": "https://stackoverflow.com/users/2184930/suman-j"}, "edited": false, "score": 1, "creation_date": 1453753790, "post_id": 34986658, "comment_id": 57731545, "body": "Is there a way to check this for multiple keys in one call? datastore has GetMulti function to return multiple entities. But can we do that for Queries? For example, I have a list of keys (random strings) with me and want to know if there are corresponding entities in datastore for them. I did not find &quot;in&quot; operator for Query filter."}, {"owner": {"reputation": 1655, "user_id": 8682074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1739167192766622/picture?type=large", "display_name": "John Balvin Arias", "link": "https://stackoverflow.com/users/8682074/john-balvin-arias"}, "reply_to_user": {"reputation": 5728, "user_id": 2184930, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/460a48b8097cbd52e7315e349f6a84f3?s=128&d=identicon&r=PG", "display_name": "suman j", "link": "https://stackoverflow.com/users/2184930/suman-j"}, "edited": false, "score": 0, "creation_date": 1532087730, "post_id": 34986658, "comment_id": 89853721, "body": "@sumanj you can&#39;t do that yet, you should use a loop to run the query"}, {"owner": {"reputation": 570, "user_id": 2899767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a37baf2d8cae5baca968f597de0ad9?s=128&d=identicon&r=PG&f=1", "display_name": "knopch1425", "link": "https://stackoverflow.com/users/2899767/knopch1425"}, "edited": false, "score": 0, "creation_date": 1548677464, "post_id": 34986658, "comment_id": 95613895, "body": "Apparently now there is a IN operator <a href=\"https://cloud.google.com/appengine/docs/standard/java/datastore/queries#filters\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/standard/java/datastore/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21441, "user_id": 723693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18b2fe761a7aa211adfb466500210412?s=128&d=identicon&r=PG", "display_name": "ain", "link": "https://stackoverflow.com/users/723693/ain"}, "is_accepted": true, "score": 3, "last_activity_date": 1453704747, "creation_date": 1453704747, "answer_id": 34986658, "question_id": 34985161, "link": "https://stackoverflow.com/questions/34985161/google-app-engine-go-datastore-check-for-entity-existence-using-key/34986658#34986658", "title": "google app engine go datastore check for entity existence using key", "body": "<p>To retrieve only key(s) add <code>KeysOnly()</code> to the end of your query, ie</p>\n\n<pre><code>q := datastore.NewQuery(entityKind).Filter(...).KeysOnly()\n</code></pre>\n\n<p>And yes, keys only query should be faster, quote from the <a href=\"https://cloud.google.com/appengine/docs/go/datastore/queries\" rel=\"nofollow\">doc</a>:</p>\n\n<blockquote>\n  <p>A keys-only query returns just the keys of the result entities instead of the entities themselves, at lower latency and cost than retrieving entire entities</p>\n</blockquote>\n\n<p>BTW, to retrieve an entity by it's key, you can also use the special property <code>__key__</code>, ie</p>\n\n<pre><code>qKey := datastore.NewKey(ctx, entityKind, stringId, 0, nil)\nq := datastore.NewQuery(entityKind).Filter(\"__key__ =\", qKey)\n</code></pre>\n"}], "owner": {"reputation": 5728, "user_id": 2184930, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/460a48b8097cbd52e7315e349f6a84f3?s=128&d=identicon&r=PG", "display_name": "suman j", "link": "https://stackoverflow.com/users/2184930/suman-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1453, "favorite_count": 1, "accepted_answer_id": 34986658, "answer_count": 1, "score": 1, "last_activity_date": 1471360409, "creation_date": 1453696447, "last_edit_date": 1471360409, "question_id": 34985161, "link": "https://stackoverflow.com/questions/34985161/google-app-engine-go-datastore-check-for-entity-existence-using-key", "title": "google app engine go datastore check for entity existence using key", "body": "<p>Given a stringId key for an entity, how do I check if there is a corresponding entity in datastore. I do not want to fetch the entity completely. I want to check if the entity exists or not.<br>\nIs there a performance impact if I fetch the complete entity to check its existence? Or is there a better way?\n</p>\n\n<pre><code>var Person struct {\n   stringId string //string id which makes the key\n   //many other properties.\n}\n\n//insert into datastore\n_, err := datastore.Put(ctx, datastore.NewKey(ctx, entityKind, stringId, 0, nil), entity)\n//retrieve the entity\ndatastore.Get(ctx, datastore.NewKey(ctx, entityKind, stringId, 0, nil), entity);\n</code></pre>\n\n<p><br>\nInstead of retrieving complete entity for a given stringId, is there a better way to check the entity exists?</p>\n"}, {"tags": ["arrays", "recursion", "go"], "comments": [{"owner": {"reputation": 431, "user_id": 1683251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fsxn.jpg?s=128&g=1", "display_name": "MaC", "link": "https://stackoverflow.com/users/1683251/mac"}, "edited": false, "score": 0, "creation_date": 1453710905, "post_id": 34984520, "comment_id": 57704545, "body": "You must provide more information. What do you want to achieve using recursion, for example? Why your piece of code is not working?"}, {"owner": {"reputation": 955, "user_id": 4134847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/513b1d7f1e558bd8b063bfcb508a9e5b?s=128&d=identicon&r=PG", "display_name": "Daniel Huckson", "link": "https://stackoverflow.com/users/4134847/daniel-huckson"}, "reply_to_user": {"reputation": 431, "user_id": 1683251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6fsxn.jpg?s=128&g=1", "display_name": "MaC", "link": "https://stackoverflow.com/users/1683251/mac"}, "edited": false, "score": 0, "creation_date": 1453774029, "post_id": 34984520, "comment_id": 57739656, "body": "If you look at the functions, &quot;digits1() through digits6()&quot; they are similar with more or less nesting and a different string lengths in the record function.  I&#39;m sure someone with more coding experience than me has seen this pattern before and could convert it to recursive function.  I currently have these methods statically written and this is not the best solution. I have written recursive methods before but I can&#39;t seem to come up with anything for this. Having a dynamic , possibly recursive digits#() function would make the game more dynamically modifiable."}], "answers": [{"tags": [], "owner": {"reputation": 4236, "user_id": 2231905, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d4a1b6ef81bd93c9dd8896880995b77?s=128&d=identicon&r=PG", "display_name": "Fallen", "link": "https://stackoverflow.com/users/2231905/fallen"}, "is_accepted": false, "score": 0, "last_activity_date": 1453773665, "creation_date": 1453773665, "answer_id": 35005872, "question_id": 34984520, "link": "https://stackoverflow.com/questions/34984520/how-to-make-a-go-program-recursive/35005872#35005872", "title": "How to make a go program recursive", "body": "<p>Recursion is not a language specific concept. If you know what is recursion and if you know how to write a function in Go, then you can write a recursive function in Go.</p>\n\n<p>This is a dummy recursive function in Go.</p>\n\n<pre><code>func f(n int) int {\n    if n &lt; 0 {\n        return 0 // or something else\n    }\n    if n == 0 {\n        return 1\n    }\n    return n * f(n - 1)\n}\n</code></pre>\n\n<p>This is a recursive function in Go, because,</p>\n\n<ol>\n<li>It has a termination (base) condition(n &lt;= 0)</li>\n<li>f(n) depends on f(x) for all x &lt; n.</li>\n<li>It's written in Go.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 955, "user_id": 4134847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/513b1d7f1e558bd8b063bfcb508a9e5b?s=128&d=identicon&r=PG", "display_name": "Daniel Huckson", "link": "https://stackoverflow.com/users/4134847/daniel-huckson"}, "edited": false, "score": 0, "creation_date": 1453832234, "post_id": 35007713, "comment_id": 57768358, "body": "Thank you so much, I have written recursive functions before but not with as much complexity. Looking at the (&lt;a href=&quot;<a href=\"https://play.golang.org/p/-kNjWKOzdZ\" rel=\"nofollow noreferrer\">play.golang.org/p/-kNjWKOzdZ</a>&quot; code I wrote&lt;/a&gt;) it just cry&#39;s out for recursion. I&#39;m looking at (<a href=\"https://play.golang.org/p/suoVTWpQvv\" rel=\"nofollow noreferrer\">play.golang.org/p/suoVTWpQvv</a>&quot; your solution) and have no idea what&#39;s going on. I will take the time to study it until I do though. Thanks again!"}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 1, "last_activity_date": 1453792462, "last_edit_date": 1453792462, "creation_date": 1453787312, "answer_id": 35007713, "question_id": 34984520, "link": "https://stackoverflow.com/questions/34984520/how-to-make-a-go-program-recursive/35007713#35007713", "title": "How to make a go program recursive", "body": "<p>As far as I can tell, you want to recursively find all the combinations of winning numbers. For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc combinations(n []int, c []int, ccc [][][]int) [][][]int {\n    if len(n) == 0 {\n        return ccc\n    }\n    if len(ccc) == 0 {\n        ccc = make([][][]int, len(n))\n    }\n    for i := range n {\n        cc := make([]int, len(c)+1)\n        copy(cc, c)\n        cc[len(cc)-1] = n[i]\n        ccc[len(cc)-1] = append(ccc[len(cc)-1], cc)\n        ccc = combinations(n[i+1:], cc, ccc)\n    }\n    return ccc\n}\n\nfunc main() {\n    n := []int{1, 2, 3, 4}\n    fmt.Println(\"winning numbers\", n)\n    fmt.Println()\n    nw := 0\n    w := combinations(n, nil, nil)\n    fmt.Println(\"winning tickets:\")\n    d := \" digit : \"\n    for i := range w {\n        fmt.Print(i+1, d)\n        d = \" digits: \"\n        for j := range w[i] {\n            nw++\n            fmt.Print(w[i][j], \" \")\n        }\n        fmt.Println()\n    }\n    fmt.Println()\n    fmt.Println(nw, \"winners\")\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>winning numbers [1 2 3 4]\n\nwinning tickets:\n1 digit : [1] [2] [3] [4] \n2 digits: [1 2] [1 3] [1 4] [2 3] [2 4] [3 4] \n3 digits: [1 2 3] [1 2 4] [1 3 4] [2 3 4] \n4 digits: [1 2 3 4] \n\n15 winners\n</code></pre>\n\n<p>Simplifying, you can see the recursion.</p>\n\n<pre><code>func combinations(n []int) {\n    if len(n) == 0 {\n        return \n    }\n    for i := range n {\n        combinations(n[i+1:])\n    }\n    return \n}\n</code></pre>\n\n<p>The recursion terminates when <code>len(n) == 0</code>. In the for loop, <code>i</code> increases to <code>len(n)-1</code>, <code>combinations(n[i+1:])</code> becomes <code>combinations(n[len(n):])</code>, and <code>len(n[len(n):]) == 0</code>, which will terminate the recursion.</p>\n"}], "owner": {"reputation": 955, "user_id": 4134847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/513b1d7f1e558bd8b063bfcb508a9e5b?s=128&d=identicon&r=PG", "display_name": "Daniel Huckson", "link": "https://stackoverflow.com/users/4134847/daniel-huckson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 35007713, "answer_count": 2, "score": -3, "last_activity_date": 1453792462, "creation_date": 1453691594, "last_edit_date": 1453775132, "question_id": 34984520, "link": "https://stackoverflow.com/questions/34984520/how-to-make-a-go-program-recursive", "title": "How to make a go program recursive", "body": "<p>How could I make this go program recursive. I'm learning golang by writing a game number analyzer. I've been thinking and thinking on how to do this and can't come up with a working solution. Here is the link in the <a href=\"https://play.golang.org/p/lsYjYdEUMN\" rel=\"nofollow\">Google Playground.</a> Any help would be greatly appreciated. </p>\n\n<pre><code>/*\nFile record.go\nAuthor: Dan Huckson\nDate: 20160120\nPurpose: Number analyzer\n*/\npackage main\n\nimport (\n    \"fmt\"\n)\n\ntype Stats struct {\n    category map[string]Events\n}\n\ntype Events struct {\n    event map[string]*Event\n}\n\ntype Event struct {\n    value int64\n}\n\nfunc main() {\n    winners := [][]int{\n        {1, 2, 3, 4, 5, 6},\n        {2, 4, 6, 28, 26, 39},\n        {1, 4, 9, 10, 26, 39},\n        {1, 9, 19, 29, 26, 49},\n        {4, 5, 6, 28, 26, 49}}\n\n    keys := []string{\"digits1\", \"digits2\", \"digits3\", \"digits4\", \"digits5\", \"digits6\"}\n\n    stats := new(Stats)\n    stats.category = make(map[string]Events)\n\n    for _, key := range keys {\n        events, ok := stats.category[key]\n        if !ok {\n            events = *new(Events)\n        }\n        events.event = make(map[string]*Event)\n        stats.category[key] = events\n\n    }\n    fmt.Println()\n\n    for _, winner := range winners {\n        fmt.Println(winner)\n        stats.digits1(\"digits1\", winner)\n        stats.digits2(\"digits2\", winner)\n        stats.digits3(\"digits3\", winner)\n        stats.digits4(\"digits4\", winner)\n        stats.digits5(\"digits5\", winner)\n        stats.digits6(\"digits6\", winner)\n    }\n}\n\nfunc (stats *Stats) record(key string, balls string) {\n\n    event, ok := stats.category[key].event[balls]\n    if !ok {\n        event = new(Event)\n        stats.category[key].event[balls] = event\n    }\n    stats.category[key].event[balls].value += 1\n\n    word := \"\"\n    if len(balls) &gt; 1 {\n        word = \"Balls\"\n    } else {\n        word = \"Ball\"\n    }\n\n    fmt.Printf(\"%s:%s\\tCount:%d\\n\", word, balls_to_csv(balls), stats.category[key].event[balls].value)\n}\n\nfunc (stats *Stats) digits1(key string, winner []int) {\n    for i := 0; i &lt; len(winner); i++ {\n        stats.record(key, string(winner[i]))\n    }\n}\n\nfunc (stats *Stats) digits2(key string, winner []int) {\n    for i := 0; i &lt; len(winner)-1; i++ {\n        for j := i + 1; j &lt; len(winner); j++ {\n            stats.record(key, string(winner[i])+string(winner[j]))\n        }\n    }\n}\n\nfunc (stats *Stats) digits3(key string, winner []int) {\n    for i := 0; i &lt; len(winner)-2; i++ {\n        for j := i + 1; j &lt; len(winner)-1; j++ {\n            for k := j + 1; k &lt; len(winner); k++ {\n                stats.record(key, string(winner[i])+string(winner[j])+string(winner[k]))\n            }\n        }\n    }\n}\n\nfunc (stats *Stats) digits4(key string, winner []int) {\n    for i := 0; i &lt; len(winner)-3; i++ {\n        for j := i + 1; j &lt; len(winner)-2; j++ {\n            for k := j + 1; k &lt; len(winner)-1; k++ {\n                for l := k + 1; l &lt; len(winner); l++ {\n                    stats.record(key, string(winner[i])+string(winner[j])+string(winner[k])+string(winner[l]))\n                }\n            }\n        }\n    }\n}\n\nfunc (stats *Stats) digits5(key string, winner []int) {\n    for i := 0; i &lt; len(winner)-4; i++ {\n        for j := i + 1; j &lt; len(winner)-3; j++ {\n            for k := j + 1; k &lt; len(winner)-2; k++ {\n                for l := k + 1; l &lt; len(winner)-1; l++ {\n                    for m := l + 1; m &lt; len(winner); m++ {\n                        stats.record(key, string(winner[i])+string(winner[j])+string(winner[k])+string(winner[l])+string(winner[m]))\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunc (stats *Stats) digits6(key string, winner []int) {\n    for i := 0; i &lt; len(winner)-5; i++ {\n        for j := i + 1; j &lt; len(winner)-4; j++ {\n            for k := j + 1; k &lt; len(winner)-3; k++ {\n                for l := k + 1; l &lt; len(winner)-2; l++ {\n                    for m := l + 1; m &lt; len(winner)-1; m++ {\n                        for n := m + 1; n &lt; len(winner); n++ {\n                            stats.record(key, string(winner[i])+string(winner[j])+string(winner[k])+string(winner[l])+string(winner[m])+string(winner[n]))\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunc balls_to_csv(key string) string {\n    s := \"\"\n    length := len(key)\n    for i := 0; i &lt; length; i++ {\n        s += fmt.Sprintf(\"%d,\", key[i])\n    }\n    return s[:len(s)-1]\n}\n</code></pre>\n"}, {"tags": ["google-app-engine", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453737220, "post_id": 34984310, "comment_id": 57721508, "body": "The appengine sdk requires go1.4.2, and you&#39;ve recompiled some stuff in the sdk with go1.5. Just unpack a new version of the sdk, and don&#39;t manipulate anything in the sdk with your local go installation."}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453818089, "post_id": 34984310, "comment_id": 57758656, "body": "I don&#39;t think it requires 1.4.2.. but I could be wrong. I am using Go version 1.5.3 and I use appengine just fine (however I have the most recent version, whatever that is). Try what JimB said, just get a new version of the SDK."}], "owner": {"reputation": 261, "user_id": 559060, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ccd63004b32d04f26cac2de51f7f9031?s=128&d=identicon&r=PG&f=1", "display_name": "Djanux", "link": "https://stackoverflow.com/users/559060/djanux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453689723, "creation_date": 1453689723, "question_id": 34984310, "link": "https://stackoverflow.com/questions/34984310/wrong-import-after-updating-go-appengine", "title": "wrong import after updating go appengine", "body": "<p>I have updated goappengine to the last version and I have this error message. It looks like that it is looking for Go 1.4.2 and I am running 1.5.2 ??  It unlikely that I was running 1.4 before. \nAny pointers of the problem</p>\n\n<pre><code>\u279c  dev git:(master) \u2717 goapp serve\nINFO     2016-01-25 02:31:53,808 devappserver2.py:769] Skipping SDK update check.\nINFO     2016-01-25 02:31:53,832 api_server.py:205] Starting API server at: http://localhost:65025\nINFO     2016-01-25 02:31:53,836 dispatcher.py:197] Starting module \"default\" running at: http://localhost:8080\nINFO     2016-01-25 02:31:53,839 admin_server.py:116] Starting admin server at: http://localhost:8000\nERROR    2016-01-25 02:31:55,105 go_runtime.py:179] Failed to build Go application: (Executed command: /Users/moon/go_appengine/goroot/bin/go-app-builder -app_base /Users/moon/Downloads/d1/d2 -arch 6 -dynamic -goroot /Users/moon/go_appengine/goroot -nobuild_files ^^$ -unsafe -gopath /Users/moon/gopath:/Users/moon/go_appengine/goroot -binary_name _go_app -extra_imports appengine_internal/init -work_dir /var/folders/75/xlk18qb10231fqxqmdwg_xhm0000gn/T/tmpf1CeKbappengine-go-bin -gcflags -I,/Users/moon/go_appengine/goroot/pkg/darwin_amd64_appengine -ldflags -L,/Users/moon/go_appengine/goroot/pkg/darwin_amd64_appengine beta.go main.go)\n/var/folders/75/xlk18qb10231fqxqmdwg_xhm0000gn/T/tmpf1CeKbappengine-go-bin/beta.go:9: import /Users/moon/go_appengine/goroot/pkg/darwin_amd64/appengine.a: object is [darwin amd64 go1.5.2 X:none] expected [darwin amd64 go1.4.2 (appengine-1.9.31) X:precisestack]\n\n2016/01/25 04:31:55 go-app-builder: build timing: 1\u00d76g (11ms total), 0\u00d76l (0 total)\n2016/01/25 04:31:55 go-app-builder: failed running 6g: exit status 1\n\n^Cgoapp: caught SIGINT, waiting for dev_appserver.py to shut down\nINFO     2016-01-25 02:32:19,423 shutdown.py:45] Shutting down.\nINFO     2016-01-25 02:32:19,423 api_server.py:648] Applying all pending transactions and saving the datastore\nINFO     2016-01-25 02:32:19,423 api_server.py:651] Saving search indexes\n\u279c  dev git:(master) \u2717 goapp version\ngo version go1.4.2 (appengine-1.9.31) darwin/amd64\n\u279c  dev git:(master) \u2717 go version\ngo version go1.5.2 darwin/amd64\n\u279c  dev git:(master) \u2717\n\u279c  dev git:(master) \u2717echo $GOPATH\n/Users/moon/gopath:/Users/moon/go_appengine/goroot\n</code></pre>\n"}, {"tags": ["go", "code-coverage", "build-tools"], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 3355188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d635e8f9bc47fa9b84c92241a62ff107?s=128&d=identicon&r=PG", "display_name": "D&#225;vid Kaya", "link": "https://stackoverflow.com/users/3355188/d%c3%a1vid-kaya"}, "is_accepted": true, "score": 1, "last_activity_date": 1453717689, "creation_date": 1453717689, "answer_id": 34990296, "question_id": 34982070, "link": "https://stackoverflow.com/questions/34982070/how-to-get-code-coverage-using-gb/34990296#34990296", "title": "How to get code coverage using gb?", "body": "<p><code>-coverprofile</code> flag is not supported in gb yet.</p>\n\n<p>You can check the status at <a href=\"https://github.com/constabulary/gb/issues/367\" rel=\"nofollow\">https://github.com/constabulary/gb/issues/367</a>.</p>\n\n<p>There is also a workaround posted there, which you can use.</p>\n"}], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 34990296, "answer_count": 1, "score": 0, "last_activity_date": 1453717689, "creation_date": 1453673103, "question_id": 34982070, "link": "https://stackoverflow.com/questions/34982070/how-to-get-code-coverage-using-gb", "title": "How to get code coverage using gb?", "body": "<p>Running <a href=\"https://getgb.io/\" rel=\"nofollow\">gb</a>:</p>\n\n<pre><code>gb test .../&lt;regex&gt;/... -v\n</code></pre>\n\n<p>works, but running <code>gb test .../&lt;regex&gt;/... -coverprofile=cover.out</code> results in:</p>\n\n<pre><code>testing: cannot use -test.coverprofile because test binary was not built with coverage enabled\n</code></pre>\n\n<p>while <code>go test -coverprofile cover.out</code> works. How to get code coverage using gb as well?</p>\n"}, {"tags": ["rest", "http", "post", "go", "html5-video"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 9, "creation_date": 1453685283, "post_id": 34982042, "comment_id": 57696604, "body": "Remove the <code>Content-Disposition: attachment; filename=output.mp4</code> header, which forces a download with the given filename."}], "answers": [{"tags": [], "owner": {"reputation": 24447, "user_id": 603316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4db0c2cbf2d5c9c196902dfc9db8218d?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/603316/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1491933261, "creation_date": 1491933261, "answer_id": 43353038, "question_id": 34982042, "link": "https://stackoverflow.com/questions/34982042/returning-a-video-from-a-post-request/43353038#43353038", "title": "Returning a video from a POST request", "body": "<p>\"Content-Disposition: attachment\" is not appropriate in this case. <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Disposition\" rel=\"nofollow noreferrer\">The MDN has a good description</a>:</p>\n\n<blockquote>\n  <p>In a regular HTTP response, the Content-Disposition response header is a header indicating if the content is expected to be displayed inline in the browser, that is, as a Web page or as part of a Web page, or as an attachment, that is downloaded and saved locally.</p>\n</blockquote>\n\n<p>If you want a browser to play the video, either remove the header or change the value to \"inline\".</p>\n"}], "owner": {"reputation": 2992, "user_id": 143733, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5f1f863259165f1382a5412f1d02a843?s=128&d=identicon&r=PG", "display_name": "Setheron", "link": "https://stackoverflow.com/users/143733/setheron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1491933261, "creation_date": 1453672931, "question_id": 34982042, "link": "https://stackoverflow.com/questions/34982042/returning-a-video-from-a-post-request", "title": "Returning a video from a POST request", "body": "<p>I have build a simple server for myself using Go and running into some odd issue.</p>\n\n<p>I've created a route \"/transcoding\" where users can issue a POST HTTP request to with a multipart video file and receive back a modified video.</p>\n\n<p>The problem I'm having is that when returning the video in the response, it doesn't seem to automatically play in Chrome/Safari/Firefox.</p>\n\n<p>I know the video being returned is valid though because if I use curl/httpie or save set the content-type as attachment, the resulting file plays fine.</p>\n\n<p>Is this something perhaps with POST-GET-REDIRECT ?</p>\n\n<pre><code>http -f POST http://localhost:8080/transcode input@~/Downloads/sample.mp4  \n\nHTTP/1.1 200 OK\nAccept-Ranges: bytes\nContent-Disposition: attachment; filename=output.mp4\nContent-Length: 398037\nContent-Type: video/mp4\nDate: Sun, 24 Jan 2016 22:00:00 GMT\nLast-Modified: Sun, 24 Jan 2016 22:00:00 GMT\n\n\n\n+-----------------------------------------+\n| NOTE: binary data not shown in terminal |\n+-----------------------------------------+\n</code></pre>\n\n<p>The above sample shows that I've set the Content-Length and Content-Type appropriately. The browser will show the video player however nothing plays.\n(If I drag-n-drop the saved file though, it will play)</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1453651697, "post_id": 34977713, "comment_id": 57685374, "body": "you can try it out <a href=\"http://play.golang.org/p/AQi-KLMhS7\" rel=\"nofollow noreferrer\">play.golang.org</a>"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453666962, "post_id": 34977713, "comment_id": 57691126, "body": "None of your option is common. Just pass the value. And please: Take the Tour of Go."}], "answers": [{"tags": [], "owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "is_accepted": true, "score": 6, "last_activity_date": 1453727312, "last_edit_date": 1453727312, "creation_date": 1453651342, "answer_id": 34977952, "question_id": 34977713, "link": "https://stackoverflow.com/questions/34977713/should-i-pass-pointers-as-parameters/34977952#34977952", "title": "Should I pass pointers as parameters", "body": "<p>Not sure why you've got downvoted... The second option will not compile because inside the other function myVar is not present. Every variable has a scope. The variable is only accessible inside it's scope.</p>\n\n<p><em>(If you like to learn more about the diffrent scopes in go I recommend the following link <a href=\"https://www.golang-book.com/books/web/01-02\" rel=\"nofollow\">https://www.golang-book.com/books/web/01-02</a> - scroll down to scope. It's well explained with a nice visualization.)</em> </p>\n\n<p>To make things a bit clearer, I add some examples:</p>\n\n<p><strong>OPTION 1 - pass the pointer value</strong></p>\n\n<p>This is what you had. But make sure to dereference your pointer to get back the actual string. Your version was printing the pointer itself (mem-address). See my change (*s instead of just s)!</p>\n\n<pre><code>func main() {\n    myVar := \"hello world\"\n    other(&amp;myVar)\n}\n\nfunc other(s *string) {\n    println(*s)\n}\n</code></pre>\n\n<p><strong>OPTION 2 - pass the variable value</strong></p>\n\n<p>This is probably what you meant with your option 2.</p>\n\n<pre><code>package main\n\nfunc main() {\n    myVar := \"hello world\"\n    other(myVar)\n}\n\nfunc other(myVar string) {\n    println(myVar) \n}\n</code></pre>\n\n<p><strong>OPTION 3 - make myVar global</strong></p>\n\n<p>Maybe this is what you wanted to do in your second option. myVar is global here (or as in golang lingo, myVar has a <em>package</em>-level scope), therefore accessible inside the other function.</p>\n\n<pre><code>var myVar = \"hello world\"\n\nfunc main() {\n    other()\n}\n\nfunc other() {\n    println(myVar)\n}\n</code></pre>\n\n<p><strong>As to your question wether you should pass the value or a pointer to the variable:</strong></p>\n\n<p>In general you pass pointers, if your function needs to be able to edit the value. Also when the variable itself is really big and it would cost time / ressources to pass the value you can pass the pointer which is more efficent.</p>\n"}], "owner": {"reputation": 9071, "user_id": 1003632, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/80a7f76fb4682911dc2f56d7cf491454?s=128&d=identicon&r=PG", "display_name": "tommyd456", "link": "https://stackoverflow.com/users/1003632/tommyd456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 34977952, "answer_count": 1, "score": 1, "last_activity_date": 1453727312, "creation_date": 1453650077, "last_edit_date": 1453650922, "question_id": 34977713, "link": "https://stackoverflow.com/questions/34977713/should-i-pass-pointers-as-parameters", "title": "Should I pass pointers as parameters", "body": "<p>I'm working with pointers for the first time and I have what is probably a simple question.</p>\n\n<p>I have two functions <code>main</code> and <code>other</code>. If I have a variable in the <code>main</code> function that I would like to make available in the <code>other</code> function should I pass it as a parameter or is that defeating the object of pointers?</p>\n\n<p><strong>OPTION 1</strong></p>\n\n<pre><code>func main() {\n    myVar := \"hello world\"   \n    other(&amp;myVar)\n}\n\nfunc other(s *string) {\n    println(s)\n}\n</code></pre>\n\n<p><strong>OPTION 2</strong></p>\n\n<pre><code>func main() {\n    myVar := \"hello world\"\n    other()   \n}\n\nfunc other() {\n    println(*myVar) //Is myVar even accessible here?\n}\n</code></pre>\n"}, {"tags": ["linux", "go"], "answers": [{"tags": [], "owner": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "is_accepted": false, "score": 5, "last_activity_date": 1453643911, "creation_date": 1453643911, "answer_id": 34976663, "question_id": 34976564, "link": "https://stackoverflow.com/questions/34976564/convert-os-signal-to-string-to-be-able-to-print-it-in-afile/34976663#34976663", "title": "Convert os.Signal to string to be able to print it in afile", "body": "<p>You can do</p>\n\n<pre><code>err := ioutil.WriteFile(\"out\", []byte(sig.String()), 0644)\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 2432158, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3ed649b0eb13125049451100ee5e9e9f?s=128&d=identicon&r=PG", "display_name": "Walid Hanafy", "link": "https://stackoverflow.com/users/2432158/walid-hanafy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1453687378, "creation_date": 1453643277, "question_id": 34976564, "link": "https://stackoverflow.com/questions/34976564/convert-os-signal-to-string-to-be-able-to-print-it-in-afile", "title": "Convert os.Signal to string to be able to print it in afile", "body": "<p>I need to Convert the os.signal type to string to be able to save it in a file.</p>\n\n<pre><code>err := ioutil.WriteFile(\"out\", sig, 0644)\n</code></pre>\n\n<p>I get error like this:</p>\n\n<pre><code>./signals.go:37: cannot use sig (type os.Signal) as type []byte in argument to ioutil.WriteFile\n</code></pre>\n"}, {"tags": ["google-app-engine", "go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453674924, "post_id": 34976534, "comment_id": 57693839, "body": "Create a custom handler type (with context as one of the params), and have your router or some middleware (first in the chain) call NewContext to initialize it."}], "answers": [{"tags": [], "owner": {"reputation": 5284, "user_id": 3953357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2f0b6d4522d8c03a21c5c41d5ba5a23?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3953357/adam"}, "is_accepted": true, "score": 0, "last_activity_date": 1453679455, "last_edit_date": 1453679455, "creation_date": 1453679017, "answer_id": 34983001, "question_id": 34976534, "link": "https://stackoverflow.com/questions/34976534/google-app-engine-context-context-vs-gorilla-context/34983001#34983001", "title": "Google App Engine context.Context vs gorilla context", "body": "<pre><code>import (\n    \"golang.org/x/net/context\"\n    gorillacontext \"github.com/gorilla/context\"    \n)\n</code></pre>\n\n<p>I know this isn't the answer you want, but there's no way around it since the '<a href=\"https://godoc.org/golang.org/x/net/context#Context\" rel=\"nofollow\">context</a>' package in the Go standard library (used by App Engine) doesn't provide the functionality you want as compared to Gorilla's '<a href=\"http://www.gorillatoolkit.org/pkg/context\" rel=\"nofollow\">context</a>' package. If you want to use additional frameworks that define their own 'context' packages, you will need to use multiple imports.</p>\n\n<p>There's a good point made about these two contexts on a <a href=\"https://groups.google.com/forum/#!topic/gorilla-web/DF9xYrGuHKg\" rel=\"nofollow\">groups discussion</a> in that possibly Gorilla's context is misnamed since they are both used for different purposes - \"The App Engine one stores credentials to make RPC requests; the Gorilla one is just a container for request globals.\"</p>\n"}], "owner": {"reputation": 5728, "user_id": 2184930, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/460a48b8097cbd52e7315e349f6a84f3?s=128&d=identicon&r=PG", "display_name": "suman j", "link": "https://stackoverflow.com/users/2184930/suman-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 34983001, "answer_count": 1, "score": 2, "last_activity_date": 1453679455, "creation_date": 1453643130, "last_edit_date": 1453647866, "question_id": 34976534, "link": "https://stackoverflow.com/questions/34976534/google-app-engine-context-context-vs-gorilla-context", "title": "Google App Engine context.Context vs gorilla context", "body": "<p>In GAE Go, in order to log, we need to create a new context using <code>appengine.NewContext(r)</code> which returns <code>context.Context</code>. </p>\n\n<p>How do I use this context to set/get variables at request scope? In Gorilla, <a href=\"http://www.gorillatoolkit.org/pkg/context\" rel=\"nofollow\">Context</a> has a clean Set/Get functions on context which is what I want to use in my code. However I do not want to import 2 different context packages. </p>\n\n<p>GAE logging forces you to use <code>context.Context</code>.\n</p>\n\n<pre><code>//handlerFunc\n\nfunc MyFunc(w http.ResponseWriter, r *http.Request) {\n    ctx := appengine.NewContext(r)\n    // I want to set request scoped variables in context and pass it to doSomething.\n    doSomething(ctx,w,r);\n}\n\nfunc doSomething(ctx context.Context, w http.ResponseWriter, r *http.Request) {\n    log.Debugf(ctx, \"Beginning doSomething\"); //requires context parameter\n    // get the request scoped variables from context. How? Use Gorilla Context?\n}\n</code></pre>\n"}, {"tags": ["github", "go", "get", "clone", "traffic"], "comments": [{"owner": {"reputation": 27317, "user_id": 893693, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/yHFyJ.jpg?s=128&g=1", "display_name": "Stephan Dollberg", "link": "https://stackoverflow.com/users/893693/stephan-dollberg"}, "edited": false, "score": 5, "creation_date": 1453640639, "post_id": 34975947, "comment_id": 57681624, "body": "Yes, go get uses git clone."}], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 3310759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409b69c3ae7b431fc16129ccdadae9cd?s=128&d=identicon&r=PG", "display_name": "driusan", "link": "https://stackoverflow.com/users/3310759/driusan"}, "is_accepted": true, "score": 2, "last_activity_date": 1453682663, "creation_date": 1453682663, "answer_id": 34983493, "question_id": 34975947, "link": "https://stackoverflow.com/questions/34975947/is-installing-a-go-package-with-go-get-counted-as-cloning-at-github/34983493#34983493", "title": "Is installing a Go package with &#39;go get&#39; counted as cloning at GitHub?", "body": "<p>Yes. <code>go get</code> clones the repository (as well as any submodules in the vendor directory if GO15VENDOREXPERIMENT is enabled.) Since the repository is being cloned, it will count in the traffic as cloning.</p>\n"}], "owner": {"reputation": 443, "user_id": 5629360, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3503b0324a4d065e459d5344b29de08e?s=128&d=identicon&r=PG&f=1", "display_name": "sbtpr", "link": "https://stackoverflow.com/users/5629360/sbtpr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 34983493, "answer_count": 1, "score": 2, "last_activity_date": 1453682663, "creation_date": 1453639533, "question_id": 34975947, "link": "https://stackoverflow.com/questions/34975947/is-installing-a-go-package-with-go-get-counted-as-cloning-at-github", "title": "Is installing a Go package with &#39;go get&#39; counted as cloning at GitHub?", "body": "<p>When a user installs a Go package with the command:</p>\n\n<pre><code>go get github.com/username/repositoryname/packagename\n</code></pre>\n\n<p>is this counted in the GitHub traffic as cloning?</p>\n\n<p>I have a new Go repository and my GitHub account counted several clones. However I installed my own package as a test with the go get command a few times. Is this also counted as cloning or only when a user clicks on 'Clone in desktop'?</p>\n"}, {"tags": ["xml", "go", "rss"], "answers": [{"tags": [], "owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "is_accepted": true, "score": 4, "last_activity_date": 1453649725, "last_edit_date": 1495535274, "creation_date": 1453649725, "answer_id": 34977652, "question_id": 34975837, "link": "https://stackoverflow.com/questions/34975837/parsing-rss-feed-in-go/34977652#34977652", "title": "Parsing RSS feed in Go", "body": "<p>The xml from the rss feed has a channel element with two child 'link' elements: 'link' and 'atom:link'. Even though one has a namespace prefix, Go xml unmarshaller sees a conflict. See also <a href=\"https://stackoverflow.com/questions/24870309/golang-xml-unmarshalling-issue-local-name-collisions-fail\">local name collisions fail</a> and <a href=\"https://github.com/golang/go/issues/13400\" rel=\"nofollow noreferrer\">issue on github</a>.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n...\n   &lt;channel&gt;\n      &lt;title&gt;Forum - Sixty Second Idea to Improve the World&lt;/title&gt;\n      &lt;link&gt;http://www.bbc.co.uk/programmes/p02nrvz8&lt;/link&gt;\n      ...\n      &lt;atom:link href=\"http://www.bbc.co.uk/...\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7876, "user_id": 2777965, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/tQaGa.png?s=128&g=1", "display_name": "030", "link": "https://stackoverflow.com/users/2777965/030"}, "is_accepted": false, "score": 0, "last_activity_date": 1589729458, "creation_date": 1589729458, "answer_id": 61854314, "question_id": 34975837, "link": "https://stackoverflow.com/questions/34975837/parsing-rss-feed-in-go/61854314#61854314", "title": "Parsing RSS feed in Go", "body": "<p>Or use a library like <a href=\"https://github.com/ungerik/go-rss\" rel=\"nofollow noreferrer\">go-rss</a> or a tool like <a href=\"https://github.com/030/informado\" rel=\"nofollow noreferrer\">informado</a> to read various RSS feeds.</p>\n"}], "owner": {"reputation": 764, "user_id": 1398066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213b36a51eaf5c87bf8a7db78176770b?s=128&d=identicon&r=PG", "display_name": "P&#233;ter Szakszon", "link": "https://stackoverflow.com/users/1398066/p%c3%a9ter-szakszon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2515, "favorite_count": 0, "accepted_answer_id": 34977652, "answer_count": 2, "score": 1, "last_activity_date": 1589729458, "creation_date": 1453638815, "last_edit_date": 1453642272, "question_id": 34975837, "link": "https://stackoverflow.com/questions/34975837/parsing-rss-feed-in-go", "title": "Parsing RSS feed in Go", "body": "<p>I am trying to write a podcast downloader in Go. The following code parses an RSS feed but the link of the channel is empty when printing the parsed data to the standard output. I don't know why. Any suggestions? I am new to Go.</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>package main\n\nimport (\n    \"encoding/xml\"\n    \"fmt\"\n    \"net/http\"\n)\n\ntype Enclosure struct {\n    Url    string `xml:\"url,attr\"`\n    Length int64  `xml:\"length,attr\"`\n    Type   string `xml:\"type,attr\"`\n}\n\ntype Item struct {\n    Title     string    `xml:\"title\"`\n    Link      string    `xml:\"link\"`\n    Desc      string    `xml:\"description\"`\n    Guid      string    `xml:\"guid\"`\n    Enclosure Enclosure `xml:\"enclosure\"`\n    PubDate   string    `xml:\"pubDate\"`\n}\n\ntype Channel struct {\n    Title string `xml:\"title\"`\n    Link  string `xml:\"link\"`\n    Desc  string `xml:\"description\"`\n    Items []Item `xml:\"item\"`\n}\n\ntype Rss struct {\n    Channel Channel `xml:\"channel\"`\n}\n\nfunc main() {\n    resp, err := http.Get(\"http://www.bbc.co.uk/programmes/p02nrvz8/episodes/downloads.rss\")\n    if err != nil {\n        fmt.Printf(\"Error GET: %v\\n\", err)\n        return\n    }\n    defer resp.Body.Close()\n\n    rss := Rss{}\n\n    decoder := xml.NewDecoder(resp.Body)\n    err = decoder.Decode(&amp;rss)\n    if err != nil {\n        fmt.Printf(\"Error Decode: %v\\n\", err)\n        return\n    }\n\n    fmt.Printf(\"Channel title: %v\\n\", rss.Channel.Title)\n    fmt.Printf(\"Channel link: %v\\n\", rss.Channel.Link)\n\n    for i, item := range rss.Channel.Items {\n        fmt.Printf(\"%v. item title: %v\\n\", i, item.Title)\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "timezone-offset"], "comments": [{"owner": {"reputation": 8757, "user_id": 9634, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6181812b2747dc091b4b7ec97fb67c2f?s=128&d=identicon&r=PG", "display_name": "Brent.Longborough", "link": "https://stackoverflow.com/users/9634/brent-longborough"}, "edited": false, "score": 0, "creation_date": 1453668524, "post_id": 34975007, "comment_id": 57691663, "body": "@olif wins, in a very close-run thing. Thank you all for your answers."}], "answers": [{"comments": [{"owner": {"reputation": 4866, "user_id": 215713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa4a82dca6b5d2d0b58e784231caf3a?s=128&d=identicon&r=PG", "display_name": "rfay", "link": "https://stackoverflow.com/users/215713/rfay"}, "edited": false, "score": 0, "creation_date": 1520784446, "post_id": 34975910, "comment_id": 85447651, "body": "This has the args wrong - Should be z, _ := t.Zone(), assuming you want the timezone as a string."}], "tags": [], "owner": {"reputation": 2741, "user_id": 842077, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b1f84f21accf057a5683c53ac0f8b59?s=128&d=identicon&r=PG", "display_name": "olif", "link": "https://stackoverflow.com/users/842077/olif"}, "is_accepted": true, "score": 27, "last_activity_date": 1539841449, "last_edit_date": 1539841449, "creation_date": 1453639304, "answer_id": 34975910, "question_id": 34975007, "link": "https://stackoverflow.com/questions/34975007/how-can-i-extract-the-value-of-my-current-local-time-offset/34975910#34975910", "title": "How can I extract the value of my current local time offset?", "body": "<p>You can use the Zone() method on the time type:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    t := time.Now()\n    zone, offset := t.Zone()\n    fmt.Println(zone, offset)\n}\n</code></pre>\n\n<p><em>Zone computes the time zone in effect at time t, returning the abbreviated name of the zone (such as \"CET\") and its offset in seconds east of UTC.</em></p>\n"}, {"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 9, "last_activity_date": 1453654135, "last_edit_date": 1453654135, "creation_date": 1453639363, "answer_id": 34975919, "question_id": 34975007, "link": "https://stackoverflow.com/questions/34975007/how-can-i-extract-the-value-of-my-current-local-time-offset/34975919#34975919", "title": "How can I extract the value of my current local time offset?", "body": "<blockquote>\n  <p><a href=\"https://golang.org/pkg/time/\" rel=\"noreferrer\">Package time</a></p>\n  \n  <p><a href=\"https://golang.org/pkg/time/#Time.Local\" rel=\"noreferrer\">func (Time) Local</a></p>\n\n<pre><code>func (t Time) Local() Time\n</code></pre>\n  \n  <p>Local returns t with the location set to local time.</p>\n  \n  <p><a href=\"https://golang.org/pkg/time/#Time.Zone\" rel=\"noreferrer\">func (Time) Zone</a></p>\n\n<pre><code>func (t Time) Zone() (name string, offset int)\n</code></pre>\n  \n  <p>Zone computes the time zone in effect at time t, returning the\n  abbreviated name of the zone (such as \"CET\") and its offset in seconds\n  east of UTC.</p>\n  \n  <p><a href=\"https://golang.org/pkg/time/#Location\" rel=\"noreferrer\">type Location</a></p>\n\n<pre><code>type Location struct {\n        // contains filtered or unexported fields\n}\n</code></pre>\n  \n  <p>A Location maps time instants to the zone in use at that time.\n  Typically, the Location represents the collection of time offsets in\n  use in a geographical area, such as CEST and CET for central Europe. </p>\n\n<pre><code>var Local *Location = &amp;localLoc\n</code></pre>\n  \n  <p>Local represents the system's local time zone.</p>\n\n<pre><code>var UTC *Location = &amp;utcLoc\n</code></pre>\n  \n  <p>UTC represents Universal Coordinated Time (UTC).</p>\n  \n  <p><a href=\"https://golang.org/pkg/time/#Time.In\" rel=\"noreferrer\">func (Time) In</a></p>\n\n<pre><code>func (t Time) In(loc *Location) Time\n</code></pre>\n  \n  <p>In returns t with the location information set to loc.</p>\n  \n  <p>In panics if loc is nil.</p>\n</blockquote>\n\n<p>For example,</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc main() {\n    t := time.Now()\n\n    // For a time t, offset in seconds east of UTC (GMT)\n    _, offset := t.Local().Zone()\n    fmt.Println(offset)\n\n    // For a time t, format and display as UTC (GMT) and local times.\n    fmt.Println(t.In(time.UTC))\n    fmt.Println(t.In(time.Local))\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-18000\n2016-01-24 16:48:32.852638798 +0000 UTC\n2016-01-24 11:48:32.852638798 -0500 EST\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": false, "score": 6, "last_activity_date": 1453640217, "creation_date": 1453640217, "answer_id": 34976066, "question_id": 34975007, "link": "https://stackoverflow.com/questions/34975007/how-can-i-extract-the-value-of-my-current-local-time-offset/34976066#34976066", "title": "How can I extract the value of my current local time offset?", "body": "<p>I don't think it makes sense to manually convert time to another TZ. Use <a href=\"https://golang.org/pkg/time/#Time.In\" rel=\"noreferrer\">time.Time.In</a> function:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc printTime(t time.Time) {\n    zone, offset := t.Zone()\n    fmt.Println(t.Format(time.Kitchen), \"Zone:\", zone, \"Offset UTC:\", offset)\n}\n\nfunc main() {\n    printTime(time.Now())\n    printTime(time.Now().UTC())\n\n    loc, _ := time.LoadLocation(\"America/New_York\")\n    printTime(time.Now().In(loc))\n}\n</code></pre>\n"}], "owner": {"reputation": 8757, "user_id": 9634, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6181812b2747dc091b4b7ec97fb67c2f?s=128&d=identicon&r=PG", "display_name": "Brent.Longborough", "link": "https://stackoverflow.com/users/9634/brent-longborough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19486, "favorite_count": 2, "accepted_answer_id": 34975910, "answer_count": 3, "score": 18, "last_activity_date": 1599574889, "creation_date": 1453633685, "last_edit_date": 1599574889, "question_id": 34975007, "link": "https://stackoverflow.com/questions/34975007/how-can-i-extract-the-value-of-my-current-local-time-offset", "title": "How can I extract the value of my current local time offset?", "body": "<p>I'm struggling a bit trying to format and display some IBM mainframe TOD clock data. I want to format the data in both GMT and local time (as the default -- otherwise in the zone the user specifies).</p>\n<p>For this, I need to get the value of the local time offset from GMT as a signed integer number of seconds.</p>\n<p>In zoneinfo.go (which I confess I don't fully understand), I can see</p>\n<pre><code>// A zone represents a single time zone such as CEST or CET.\ntype zone struct {\n    name   string // abbreviated name, &quot;CET&quot;\n    offset int    // seconds east of UTC\n    isDST  bool   // is this zone Daylight Savings Time?\n}\n</code></pre>\n<p>but this is not, I think, exported, so this code doesn't work:</p>\n<pre><code>package main\nimport ( &quot;time&quot;; &quot;fmt&quot; )\n\nfunc main() {\n    l, _ := time.LoadLocation(&quot;Local&quot;)\n    fmt.Printf(&quot;%v\\n&quot;, l.zone.offset)\n}\n</code></pre>\n<p>Is there a simple way to get this information?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 8826, "user_id": 10245, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2909c1103b9ceba6c8933c85dc4f803?s=128&d=identicon&r=PG", "display_name": "Tim Abell", "link": "https://stackoverflow.com/users/10245/tim-abell"}, "edited": false, "score": 0, "creation_date": 1533800178, "post_id": 34973883, "comment_id": 90481422, "body": "It&#39;s because the folder path you checked out into doesn&#39;t match the import paths in the source code. As a result the go compiler thinks you are trying to use internal things from some other repo."}, {"owner": {"reputation": 8826, "user_id": 10245, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2909c1103b9ceba6c8933c85dc4f803?s=128&d=identicon&r=PG", "display_name": "Tim Abell", "link": "https://stackoverflow.com/users/10245/tim-abell"}, "edited": false, "score": 0, "creation_date": 1533800191, "post_id": 34973883, "comment_id": 90481433, "body": "See also <a href=\"https://stackoverflow.com/q/41060764/10245\">stackoverflow.com/q/41060764/10245</a>"}, {"owner": {"reputation": 8826, "user_id": 10245, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2909c1103b9ceba6c8933c85dc4f803?s=128&d=identicon&r=PG", "display_name": "Tim Abell", "link": "https://stackoverflow.com/users/10245/tim-abell"}, "edited": false, "score": 0, "creation_date": 1533800208, "post_id": 34973883, "comment_id": 90481443, "body": "See also <a href=\"https://stackoverflow.com/q/46040715/10245\">stackoverflow.com/q/46040715/10245</a>"}, {"owner": {"reputation": 10306, "user_id": 658497, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AiHJI.jpg?s=128&g=1", "display_name": "Noam Manos", "link": "https://stackoverflow.com/users/658497/noam-manos"}, "edited": false, "score": 0, "creation_date": 1568627564, "post_id": 34973883, "comment_id": 102320684, "body": "Make sure to set <a href=\"https://github.com/golang/go/wiki/SettingGOPATH\" rel=\"nofollow noreferrer\">go import path</a>. See also: <a href=\"https://stackoverflow.com/a/57953217/658497\">stackoverflow.com/a/57953217/658497</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 4, "last_activity_date": 1453626826, "last_edit_date": 1453626826, "creation_date": 1453626326, "answer_id": 34973939, "question_id": 34973883, "link": "https://stackoverflow.com/questions/34973883/how-do-i-fix-the-error-message-use-of-an-internal-package-not-allowed-when-go/34973939#34973939", "title": "How do I fix the error message &quot;use of an internal package not allowed&quot; when go getting a golang package?", "body": "<p>From that <a href=\"https://github.com/goji/goji/issues/13#issuecomment-171790915\" rel=\"nofollow\">goji issue 13</a>, the right command is:</p>\n\n<pre><code>go get goji.io\n</code></pre>\n\n<p>That page <a href=\"http://goji.io/\" rel=\"nofollow\"><code>http://goji.io/</code></a> has the <code>go-import</code> meta directive:</p>\n\n<pre><code>&lt;meta name=\"go-import\" content=\"goji.io git https://github.com/goji/goji\"&gt;\n</code></pre>\n\n<p>That way, go does not consider <code>goji.io/internal</code> (see for instance <a href=\"https://github.com/goji/goji/blob/fb52dfc61184d118950f39b11f2f3dcb14686fb8/router.go\" rel=\"nofollow\"><code>router.go</code></a>) as trying to import internal package of a \"third-party\".<br>\n<a href=\"https://github.com/golang/go/issues/13755\" rel=\"nofollow\">This issue</a> illustrates the wrong internal import case:</p>\n\n<blockquote>\n  <p>You are not allowed to import internal package (or its subpackages) of a third party repo.</p>\n</blockquote>\n"}], "owner": {"reputation": 6997, "user_id": 834839, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3846bd89a1d8366cd1b6b1cc40fd69d9?s=128&d=identicon&r=PG", "display_name": "canadadry", "link": "https://stackoverflow.com/users/834839/canadadry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7445, "favorite_count": 1, "accepted_answer_id": 34973939, "answer_count": 1, "score": 5, "last_activity_date": 1453626826, "creation_date": 1453625994, "question_id": 34973883, "link": "https://stackoverflow.com/questions/34973883/how-do-i-fix-the-error-message-use-of-an-internal-package-not-allowed-when-go", "title": "How do I fix the error message &quot;use of an internal package not allowed&quot; when go getting a golang package?", "body": "<p>I am using go 1.5.3. I ran this</p>\n\n<pre><code>go get -x github.com/goji/goji\n</code></pre>\n\n<p>and I am getting this error message:</p>\n\n<pre><code>git checkout master\npackage github.com/goji/goji\nimports goji.io/internal: use of internal package not allowed\n</code></pre>\n\n<p>How do I resolve this ?</p>\n"}, {"tags": ["go", "boltdb", "bleve"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453661064, "post_id": 34973055, "comment_id": 57688803, "body": "Bleve appears to use BoltDB to store its own indexes (rather than building them from an existing Bolt database): <a href=\"https://godoc.org/github.com/blevesearch/bleve/index/store/boltdb\" rel=\"nofollow noreferrer\">godoc.org/github.com/blevesearch/bleve/index/store/boltdb</a>"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453661161, "post_id": 34973055, "comment_id": 57688834, "body": "Further: what are you building with BoltDB? It&#39;s an excellent KV store for things like auth sessions, tokens, etc but is not suited to ad-hoc queries or full text search."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 97394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c76488dff9b5d9a872dff88f008f88e?s=128&d=identicon&r=PG", "display_name": "Ben Johnson", "link": "https://stackoverflow.com/users/97394/ben-johnson"}, "edited": false, "score": 0, "creation_date": 1453668940, "post_id": 34979182, "comment_id": 57691793, "body": "I find Bolt works great as an application data store when paired with a search index. For many applications, data retrieval occurs either through primary key or full text search. Key/value stores perform great at primary key search and your FTE index works great for full text search."}, {"owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "edited": false, "score": 0, "creation_date": 1453768109, "post_id": 34979182, "comment_id": 57737905, "body": "Hi. Thank you for you reply. It however doesn&#39;t answer my question :("}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 0, "creation_date": 1453791748, "post_id": 34979182, "comment_id": 57744338, "body": "Yep, both of y&#39;all are right.  I didn&#39;t really dig enough in to the topic."}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 2, "last_activity_date": 1453657557, "creation_date": 1453657557, "answer_id": 34979182, "question_id": 34973055, "link": "https://stackoverflow.com/questions/34973055/getting-started-with-bleve-using-boltdb/34979182#34979182", "title": "Getting started with Bleve using BoltDB", "body": "<p>How you index your data depends on how you want to query for it.</p>\n\n<p>If you want to query by any arbitrary fields, like {Age:15, Name:\"Bob\"} then BoltDB isn't an awesome fit for your problem.  </p>\n\n<p>BoltDB is simply a key value store with fast access to sequential keys and efficient prefix seeking.  It's not really a replacement for general use databases.</p>\n\n<p>You likely want something more like a document store (ie: MongoDB) or RDBMS (ie: PostgreSQL).  </p>\n\n<p>If you just wanted something that uses simple files and is embedded, you could also use <a href=\"https://www.sqlite.org/\" rel=\"nofollow\">SQlite</a> with the <a href=\"http://mattn.github.io/go-sqlite3/\" rel=\"nofollow\">Go module</a></p>\n\n<p>If you want to search by only a single field, like ID or Name, then use that as the key.</p>\n\n<p>If lookup speed doesn't matter at all, I guess you can use Bolt to just iterate over the entire db, parse the json and check the fields.  But that's probably the worst approach you could take.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "edited": false, "score": 0, "creation_date": 1453767726, "post_id": 34981322, "comment_id": 57737786, "body": "Thank you for your reply. I do understand, from the documentation, how data is being indexed and how searches are being done. I however still do not understand how the actual data from BoltDB is being employed here."}, {"owner": {"reputation": 375, "user_id": 97394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c76488dff9b5d9a872dff88f008f88e?s=128&d=identicon&r=PG", "display_name": "Ben Johnson", "link": "https://stackoverflow.com/users/97394/ben-johnson"}, "reply_to_user": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "edited": false, "score": 1, "creation_date": 1453813089, "post_id": 34981322, "comment_id": 57755335, "body": "Bleve uses a BoltDB store for its own internal format of the indexed data. It&#39;s better to think of Bleve as a black box. Your BoltDB store doesn&#39;t interact with it except through the Bleve API."}], "tags": [], "owner": {"reputation": 375, "user_id": 97394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c76488dff9b5d9a872dff88f008f88e?s=128&d=identicon&r=PG", "display_name": "Ben Johnson", "link": "https://stackoverflow.com/users/97394/ben-johnson"}, "is_accepted": true, "score": 8, "last_activity_date": 1453668795, "creation_date": 1453668795, "answer_id": 34981322, "question_id": 34973055, "link": "https://stackoverflow.com/questions/34973055/getting-started-with-bleve-using-boltdb/34981322#34981322", "title": "Getting started with Bleve using BoltDB", "body": "<p>Bleve uses BoltDB as one of several backend stores and is separate from where you store your application data. To index your data in Bleve, simply add your <code>Index</code>:</p>\n\n<p><code>index.Index(person.ID, person)</code></p>\n\n<p>That <code>index</code> exists separately from your application data (whether it's in Bolt, Postgres, etc).</p>\n\n<p>To retrieve your data, you'll need to construct a search request using <code>bleve.NewSearchRequest()</code>, then call <code>Index.Search()</code>. This will return a <code>SearchResult</code> which includes a <code>Hits</code> field where you can retrieve the <code>ID</code> for your object. You can use this to look up the object in your application data store.</p>\n\n<p><em>Disclaimer: I am the author of BoltDB.</em></p>\n"}], "owner": {"reputation": 139, "user_id": 2099063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ECm9.jpg?s=128&g=1", "display_name": "Mardwan", "link": "https://stackoverflow.com/users/2099063/mardwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2580, "favorite_count": 2, "accepted_answer_id": 34981322, "answer_count": 2, "score": 2, "last_activity_date": 1505742187, "creation_date": 1453618507, "last_edit_date": 1505742187, "question_id": 34973055, "link": "https://stackoverflow.com/questions/34973055/getting-started-with-bleve-using-boltdb", "title": "Getting started with Bleve using BoltDB", "body": "<p>I am trying to wrap my head around Bleve and I understand everything that is going on in the tutorials, videos and documentation. I however get very confused when I am using it on BoltDB and don't know how to start.</p>\n\n<p>Say I have an existing BoltDB database called <code>data.db</code> populated with values of struct type Person</p>\n\n<pre><code>type Person struct {\n   ID int          `json:\"id\"`             \n   Name string     `json:\"name\"` \n   Age int         `json:\"age\"`\n   Sex string      `json:\"sex\"`\n}\n</code></pre>\n\n<p>How do I index this data so that I can do a search? How do I handle the indexing of data that will be stored in the database in the future?</p>\n\n<p>Any help will be highly appreciated. </p>\n"}, {"tags": ["struct", "go", "maps"], "comments": [{"owner": {"reputation": 956, "user_id": 1667207, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/w3ttm.jpg?s=128&g=1", "display_name": "verygoodsoftwarenotvirus", "link": "https://stackoverflow.com/users/1667207/verygoodsoftwarenotvirus"}, "edited": false, "score": 0, "creation_date": 1453610899, "post_id": 34972157, "comment_id": 57674438, "body": "<code>stats.category[&quot;aa&quot;]</code> is supposed to be a map of strings to a slice of Events, but you are trying to assign it the value of 66."}], "answers": [{"tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 1, "last_activity_date": 1453611469, "creation_date": 1453611469, "answer_id": 34972406, "question_id": 34972157, "link": "https://stackoverflow.com/questions/34972157/structure-with-nested-maps-golang/34972406#34972406", "title": "structure with nested maps golang", "body": "<p>There are a few issues with your approach.</p>\n\n<ul>\n<li><p>You aren't initializing you maps.  You need to create them first.</p></li>\n<li><p>Maps return copies of their values.  So when you pull out \"aa\" and modify it, you are getting a copy of \"aa\", changing it, then throwing it away.  You need to put it back in the map, or use pointers.</p></li>\n</ul>\n\n<p>Here's a working example (non-pointer version) on <a href=\"http://play.golang.org/p/M2jAFq7G8a\" rel=\"nofollow\">Play</a>.<br>\nNotice the construction of the maps, and the re-assignment back to the map when modifying a value.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\ntype Stats struct {\n    cnt      int\n    category map[string]Events\n}\n\ntype Events struct {\n    cnt   int\n    event map[string]Event\n}\n\ntype Event struct {\n    value int64\n}\n\nfunc main() {\n    stats := &amp;Stats{category: map[string]Events{}}\n    stats.cnt = 33\n    tmpCat, ok := stats.category[\"aa\"]\n    if !ok {\n        tmpCat = Events{event: map[string]Event{}}\n    }\n    tmpCat.cnt = 66\n    tmpEv := tmpCat.event[\"bb\"]\n\n    tmpEv.value = 99\n    tmpCat.event[\"bb\"] = tmpEv\n    stats.category[\"aa\"] = tmpCat\n\n    fmt.Println(stats.cnt, stats.category[\"aa\"].event[\"bb\"].value)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 955, "user_id": 4134847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/513b1d7f1e558bd8b063bfcb508a9e5b?s=128&d=identicon&r=PG", "display_name": "Daniel Huckson", "link": "https://stackoverflow.com/users/4134847/daniel-huckson"}, "edited": false, "score": 0, "creation_date": 1453616802, "post_id": 34972468, "comment_id": 57675462, "body": "Thank you for your solution it&#39;s exactly what I was looking for."}, {"owner": {"reputation": 574, "user_id": 1922105, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/acda6b7d5597b2367905248c9428178a?s=128&d=identicon&r=PG", "display_name": "Atherion", "link": "https://stackoverflow.com/users/1922105/atherion"}, "edited": false, "score": 0, "creation_date": 1605896137, "post_id": 34972468, "comment_id": 114802706, "body": "Took me a while to find your post for this answer, but it makes sense now"}], "tags": [], "owner": {"reputation": 1183, "user_id": 2959387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459784500061e41da68ed5af11f92183?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Thakkar", "link": "https://stackoverflow.com/users/2959387/prashant-thakkar"}, "is_accepted": true, "score": 13, "last_activity_date": 1536964489, "last_edit_date": 1536964489, "creation_date": 1453612047, "answer_id": 34972468, "question_id": 34972157, "link": "https://stackoverflow.com/questions/34972157/structure-with-nested-maps-golang/34972468#34972468", "title": "structure with nested maps golang", "body": "<p>There are couple of issues with the code:</p>\n\n<ol>\n<li><p>Map needs to be initialized using make function. Currently they are nil</p></li>\n<li><p>Return value from map is non-addressable, this because if map is growing it needs to relocated which will cause memory address to change. Hence we need to extract value explicitly from map to a variable, update it and assigning it back.</p></li>\n<li><p>Use pointer</p></li>\n</ol>\n\n<p>I have updated the solution to show both updated it value returned and assigning it back and pointer.</p>\n\n<p><a href=\"http://play.golang.org/p/lv50AONXyU\" rel=\"noreferrer\">http://play.golang.org/p/lv50AONXyU</a></p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\ntype Stats struct {\n    cnt      int\n    category map[string]Events\n}\n\ntype Events struct {\n    cnt   int\n    event map[string]*Event\n}\n\ntype Event struct {\n    value int64\n}\n\nfunc main() {\n\n    stats := new(Stats)\n    stats.cnt = 33\n    stats.category = make(map[string]Events)\n    e, f := stats.category[\"aa\"]\n    if !f {\n        e = Events{}\n    }\n    e.cnt = 66\n\n    e.event = make(map[string]*Event)\n    stats.category[\"aa\"] = e\n    stats.category[\"aa\"].event[\"bb\"] = &amp;Event{}\n    stats.category[\"aa\"].event[\"bb\"].value = 99\n\n    fmt.Println(stats)\n    fmt.Println(stats.cnt, stats.category[\"aa\"].event[\"bb\"].value)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80332, "user_id": 145587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2ce699e2ec2d8ddb26b6a866191da86d?s=128&d=identicon&r=PG", "display_name": "OneOfOne", "link": "https://stackoverflow.com/users/145587/oneofone"}, "is_accepted": false, "score": 3, "last_activity_date": 1453650229, "creation_date": 1453650229, "answer_id": 34977740, "question_id": 34972157, "link": "https://stackoverflow.com/questions/34972157/structure-with-nested-maps-golang/34977740#34977740", "title": "structure with nested maps golang", "body": "<p>Adding this as a different approach to the problem:</p>\n\n<pre><code>type Stats struct {\n    cnt        int\n    categories map[string]*Events\n}\n\nfunc (s *Stats) Category(n string) (e *Events) {\n    if s.categories == nil {\n        s.categories = map[string]*Events{}\n    }\n    if e = s.categories[n]; e == nil {\n        e = &amp;Events{}\n        s.categories[n] = e\n    }\n    return\n}\n\ntype Events struct {\n    cnt    int\n    events map[string]*Event\n}\n\nfunc (e *Events) Event(n string) (ev *Event) {\n    if e.events == nil {\n        e.events = map[string]*Event{}\n    }\n    if ev = e.events[n]; ev == nil {\n        ev = &amp;Event{}\n        e.events[n] = ev\n    }\n    return\n}\n\ntype Event struct {\n    value int64\n}\n\nfunc main() {\n    var stats Stats\n    stats.cnt = 33\n    stats.Category(\"aa\").cnt = 66\n    stats.Category(\"aa\").Event(\"bb\").value = 99\n\n    fmt.Println(stats)\n    fmt.Println(stats.cnt, stats.Category(\"aa\").Event(\"bb\").value)\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/d5DBifko1l\" rel=\"nofollow\"><kbd>playground</kbd></a></p>\n"}], "owner": {"reputation": 955, "user_id": 4134847, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/513b1d7f1e558bd8b063bfcb508a9e5b?s=128&d=identicon&r=PG", "display_name": "Daniel Huckson", "link": "https://stackoverflow.com/users/4134847/daniel-huckson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36840, "favorite_count": 4, "accepted_answer_id": 34972468, "answer_count": 3, "score": 6, "last_activity_date": 1536964489, "creation_date": 1453609007, "question_id": 34972157, "link": "https://stackoverflow.com/questions/34972157/structure-with-nested-maps-golang", "title": "structure with nested maps golang", "body": "<p>Hi I'm new to go and was trying to figure out how maps work.\nI have made up a little test program and can't seem to get it to work.\nWhat I'm doing wrong? </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\ntype Stats struct {\n    cnt      int\n    category map[string]Events\n}\n\ntype Events struct {\n    cnt   int\n    event map[string]Event\n}\n\ntype Event struct {\n    value int64\n}\n\nfunc main() {\n\n    stats := new(Stats)\n    stats.cnt = 33\n    stats.category[\"aa\"].cnt = 66\n    stats.category[\"aa\"].event[\"bb\"].value = 99\n\n    fmt.Println(stats.cnt, stats.category[\"aa\"].event[\"bb\"].value)\n}\n</code></pre>\n"}, {"tags": ["go", "redis", "redigo"], "comments": [{"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 2, "creation_date": 1453606774, "post_id": 34971769, "comment_id": 57673710, "body": "There&#39;s no efficient way to do this with lists.   I&#39;d probably change the thing pushing to the list to both push to a list and to send a pub/sub message saying which list it just pushed to.   Wrap that up in a lua function and it will be pretty darn efficent.  More efficient than opening 10k sockets each blocking on BLPOP or whatever you are doing to read the lists"}], "answers": [{"comments": [{"owner": {"reputation": 6828, "user_id": 200394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7320ef727f46a2b14e52b6dc88e2cc78?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/200394/daniel"}, "edited": false, "score": 1, "creation_date": 1453648932, "post_id": 34972041, "comment_id": 57684355, "body": "I like @itamar &#39;s thought below better."}, {"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 0, "creation_date": 1453653848, "post_id": 34972041, "comment_id": 57686222, "body": "Thanks though not my thought - that&#39;s just how Redis works ;)"}, {"owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "edited": false, "score": 0, "creation_date": 1453726489, "post_id": 34972041, "comment_id": 57714389, "body": "Anyway, your idea is nice but had several problems - I took the liberty and fixed them."}], "tags": [], "owner": {"reputation": 6828, "user_id": 200394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7320ef727f46a2b14e52b6dc88e2cc78?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/200394/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1453726422, "last_edit_date": 1453726422, "creation_date": 1453607796, "answer_id": 34972041, "question_id": 34971769, "link": "https://stackoverflow.com/questions/34971769/redis-how-to-listen-changes-in-1000-to-10-000-lists-using-golang/34972041#34972041", "title": "Redis how to listen changes in 1000 to 10,000 lists using golang?", "body": "<p>I haven't tried this, but as speculation, I would use Redis's Lua to implement 2 new commands - MSR_PUSH and MSR_POP - which would do the following respectively:</p>\n\n<pre><code>-- MSR_PUSH\nredis.call(\"PUSH\", KEYS[1], ARGV[1])\nredis.call(\"PUBLISH\", \"notify\", KEYS[1])\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>-- MSR_POP\nlocal v = redis.call(\"POP\", KEYS[1])\nif v then\n  redis.call(\"PUBLISH\", \"notify\", KEYS[1])\nend\nreturn v\n</code></pre>\n\n<p>So, these Lua scripts update the lists as you normally do, but then also publish the keyname that was updated to the notify pub/sub, which will then allow a watching script (golang) to do something.  You could also just push to another queue, and long poll that.</p>\n\n<p>This link has more information on Lua with Redis: <a href=\"https://www.redisgreen.net/blog/intro-to-lua-for-redis-programmers/\" rel=\"nofollow\">https://www.redisgreen.net/blog/intro-to-lua-for-redis-programmers/</a></p>\n"}, {"tags": [], "owner": {"reputation": 39563, "user_id": 3160475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8989da0a2c491338617b07df53e60c?s=128&d=identicon&r=PG", "display_name": "Itamar Haber", "link": "https://stackoverflow.com/users/3160475/itamar-haber"}, "is_accepted": true, "score": 5, "last_activity_date": 1453620834, "creation_date": 1453620834, "answer_id": 34973289, "question_id": 34971769, "link": "https://stackoverflow.com/questions/34971769/redis-how-to-listen-changes-in-1000-to-10-000-lists-using-golang/34973289#34973289", "title": "Redis how to listen changes in 1000 to 10,000 lists using golang?", "body": "<p>You can enable Redis' keyspace notifications and subscribe to the relevant events on the keys/patterns that interest you.</p>\n\n<p>More details can be found in the documentation: <a href=\"http://redis.io/topics/notifications\" rel=\"noreferrer\">http://redis.io/topics/notifications</a></p>\n"}], "owner": {"reputation": 57, "user_id": 5831946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72cb1cd9b58d2a86d551dfe54ed80f64?s=128&d=identicon&r=PG&f=1", "display_name": "Madhu Sudhan Reddy", "link": "https://stackoverflow.com/users/5831946/madhu-sudhan-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 34973289, "answer_count": 2, "score": 3, "last_activity_date": 1453726422, "creation_date": 1453604874, "last_edit_date": 1453714526, "question_id": 34971769, "link": "https://stackoverflow.com/questions/34971769/redis-how-to-listen-changes-in-1000-to-10-000-lists-using-golang", "title": "Redis how to listen changes in 1000 to 10,000 lists using golang?", "body": "<p>I have 1000 to 10,000 keys stored in Redis, their value type is list.\nWhen a new item is added to any one of the existing lists, I need my golang program to be notified. \nOnce notification is received I need to spawn a new goroutine and perform a small operation.</p>\n\n<p>I am using redigo for redis connection pool.</p>\n\n<p>What is the best approach to solve this problem, without overloading the Redis instance?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453591741, "post_id": 34969777, "comment_id": 57670424, "body": "What happens when you add the content-type to your POST? <code>-H &quot;Content-Type: application&#47;json&quot;</code> (Your handler is running on my machine, but I am using Powershells Invoke-RestMethod, so speculating if something is wrong with the curl command...)"}, {"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 0, "creation_date": 1453592270, "post_id": 34969777, "comment_id": 57670602, "body": "I got it to work with curl on my windows machine with escaping characters like this <code>curl.exe -X POST http:&#47;&#47;localhost:8080 -d &quot;{\\&quot;FirstName\\&quot;:\\&quot;Test Value\\&quot;}&quot; -H &quot;Content-Type: application&#47;json&quot;</code>Not sure what os you are on? (windows is weird...)"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 4213171, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GHpF2AlBRtc/AAAAAAAAAAI/AAAAAAAAC4U/VRXHIpZ1oKM/photo.jpg?sz=128", "display_name": "Ulrich Schreiner", "link": "https://stackoverflow.com/users/4213171/ulrich-schreiner"}, "is_accepted": false, "score": 0, "last_activity_date": 1453615761, "creation_date": 1453615761, "answer_id": 34972791, "question_id": 34969777, "link": "https://stackoverflow.com/questions/34969777/go-struct-json-decode-always-empty-return/34972791#34972791", "title": "go struct JSON decode always empty return &amp;{}", "body": "<p>You have to remove the <code>r.ParseForm</code>. You can read here</p>\n\n<p><a href=\"https://golang.org/pkg/net/http/#Request.ParseForm\" rel=\"nofollow\">https://golang.org/pkg/net/http/#Request.ParseForm</a></p>\n\n<blockquote>\n  <p>For POST or PUT requests, it also parses the request body</p>\n</blockquote>\n\n<p>So your request body will be empty after the call of <code>ParseForm</code> and you will receive an empty struct.</p>\n"}, {"tags": [], "owner": {"reputation": 255, "user_id": 1733431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efc17c527bd56f6f44db66fb0d8ceaf0?s=128&d=identicon&r=PG", "display_name": "eldosoa", "link": "https://stackoverflow.com/users/1733431/eldosoa"}, "is_accepted": false, "score": 1, "last_activity_date": 1453736178, "last_edit_date": 1453736178, "creation_date": 1453724578, "answer_id": 34992538, "question_id": 34969777, "link": "https://stackoverflow.com/questions/34969777/go-struct-json-decode-always-empty-return/34992538#34992538", "title": "go struct JSON decode always empty return &amp;{}", "body": "<p>Two things:</p>\n\n<p>Since you're using the JSON lib convention, then your post form data should be <code>FirstName</code> and not <code>firstName</code>. If you really wanted to use <code>firstName</code>, you need to add this struct tag to the field: <code>json:\"firstName\"</code>.</p>\n\n<p>Next, you don't need to put <code>&amp;</code> in <code>&amp;p</code> anymore because <code>new(Patient)</code> already returns a pointer. Just put <code>p</code>. </p>\n\n<p>Although personally, I'd just do <code>p := Patient{}</code> just so I know it's not a pointer and use <code>&amp;p</code> in the decoder. </p>\n"}], "owner": {"reputation": 15792, "user_id": 816721, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8444cf72fac7e9065e0c68d70246a36d?s=128&d=identicon&r=PG", "display_name": "rkmax", "link": "https://stackoverflow.com/users/816721/rkmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2412, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1453736178, "creation_date": 1453588527, "last_edit_date": 1453592380, "question_id": 34969777, "link": "https://stackoverflow.com/questions/34969777/go-struct-json-decode-always-empty-return", "title": "go struct JSON decode always empty return &amp;{}", "body": "<p>What I can be doing wrong in my handler?</p>\n\n<pre><code>type Patient struct {\n    FirstName string\n    LastName  string\n}\n\n\nfunc createHandler(w http.ResponseWriter, r *http.Request) {\n\n    r.ParseForm()\n    p := new(Patient)\n    err := json.NewDecoder(r.Body).Decode(&amp;p)\n\n    if err != nil &amp;&amp; err != io.EOF {\n        log.Fatal(err)\n    }\n\n    log.Print(p)\n}\n</code></pre>\n\n<p>I always get from <code>curl -X POST $PATH -d '{\"firstName\": \"Julian\"}'</code></p>\n\n<pre><code>2016/01/23 17:33:50 &amp;{  }\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>I've added <code>fmt.Println(r)</code> and got this</p>\n\n<pre><code>2016/01/23 18:33:22 &amp;{POST /patients/ HTTP/1.1 1 1 map[Accept:[*/*] Content-Type:[application/json] User-Agent:[curl/7.46.0]] 0x9b2820 0 [] false localhost:8081 map[] map[] &lt;nil&gt; map[] [::1]:35394 /patients/ &lt;nil&gt; &lt;nil&gt;}\n</code></pre>\n\n<p>after debug the previous line I realized it's a problem with the subrouter of gorilla toolkit</p>\n"}, {"tags": ["go", "import"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 4, "creation_date": 1453576966, "post_id": 34967358, "comment_id": 57665681, "body": "Make sure to read about how packages work in go. Eg: golang.org/doc/code.html. Packages always are in a folder with the name of the package. In your example, tst.go should be inside a folder called tst"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "edited": false, "score": 1, "creation_date": 1453576980, "post_id": 34967358, "comment_id": 57665689, "body": "also, when using &quot;go run&quot; you must specify all files you want to compile and run.  Includes only finds packages in your gopath.  In this case, you probably want to do &quot;go run *.go&quot; to actually run those two files.   You only import stuff in a different &quot;package&quot;, which also would be in a different directory than your &quot;package main&quot; code"}, {"owner": {"reputation": 3895, "user_id": 3169754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sP8Pj.png?s=128&g=1", "display_name": "gavv", "link": "https://stackoverflow.com/users/3169754/gavv"}, "edited": false, "score": 0, "creation_date": 1470250363, "post_id": 34967358, "comment_id": 64876862, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/15049903/how-to-use-custom-packages-in-golang\">How to use custom packages in golang?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453597841, "post_id": 34967696, "comment_id": 57672026, "body": "I&#39;ve followed your hint but the output wasn&#39;t the expected one :/"}, {"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "reply_to_user": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453601737, "post_id": 34967696, "comment_id": 57672789, "body": "Does <code>&#47;Users&#47;mt&#47;Documents&#47;Codes&#47;go&#47;src&#47;github.com&#47;mt&#47;Apollo&#47;tst</code>exi&zwnj;&#8203;st?"}, {"owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453672971, "post_id": 34967696, "comment_id": 57693201, "body": "of course that rout exist, <code>Apollo</code> is my project folder and tst is a <code>.go</code>file"}, {"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "reply_to_user": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453760794, "post_id": 34967696, "comment_id": 57735307, "body": "@Chelo Tavano Check out <a href=\"https://golang.org/doc/code.html#Workspaces\" rel=\"nofollow noreferrer\">golang.org/doc/code.html#Workspaces</a> and <a href=\"https://golang.org/doc/code.html#PackagePaths\" rel=\"nofollow noreferrer\">golang.org/doc/code.html#PackagePaths</a>. Your package source code should be in a directory with the package name, your import path would then include the full directory path."}, {"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "reply_to_user": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453762834, "post_id": 34967696, "comment_id": 57736179, "body": "@CheloTavano see the edit in my answer and see if that helps"}], "tags": [], "owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "is_accepted": true, "score": 2, "last_activity_date": 1453762788, "last_edit_date": 1453762788, "creation_date": 1453576716, "answer_id": 34967696, "question_id": 34967358, "link": "https://stackoverflow.com/questions/34967358/how-to-import-my-own-function-defined-out-of-main-package-in-go/34967696#34967696", "title": "How to import my own function defined out of main package in Go?", "body": "<p>If I read the question correctly:</p>\n\n<p>The import path should be the full path, following the $GOPATH, so likely 'github.com/mt/Apollo/tst'</p>\n\n<p>This is where the package code should reside and would also be the package import path. See this from the documentation:</p>\n\n<blockquote>\n  <p>The packages from the standard library are given short paths such as\n  \"fmt\" and \"net/http\". For your own packages, you must choose a base\n  path that is unlikely to collide with future additions to the standard\n  library or other external libraries.</p>\n  \n  <p>If you keep your code in a source repository somewhere, then you\n  should use the root of that source repository as your base path. For\n  instance, if you have a GitHub account at github.com/user, that should\n  be your base path.</p>\n</blockquote>\n\n<p>I have it working. Here is exactly what I've done:</p>\n\n<p>main.go</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"github.com/mt/Apollo/tst\"\n)\n\nfunc main() {\n    fmt.Println(\"just testing\")\n    tst.P()\n}\n</code></pre>\n\n<p>tst.go</p>\n\n<pre><code>package tst\n\nimport (\n    \"fmt\"\n)\n\nfunc P() {\n    fmt.Println(\"ola\")\n}\n</code></pre>\n\n<p>directory structure looks like:</p>\n\n<p>mt/Apollo/main.go</p>\n\n<p>mt/Apollo/tst/tst.go</p>\n\n<p>The other thing to note is that I capitalized the \"P\" in func p(). Lower case identifiers are not exported. More on that <a href=\"http://www.goinggo.net/2014/03/exportedunexported-identifiers-in-go.html\" rel=\"nofollow\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453597498, "post_id": 34969950, "comment_id": 57671941, "body": "sure, i&#39;m trying to do this to build an API-REST with gin (<a href=\"https://gin-gonic.github.io/gin/\" rel=\"nofollow noreferrer\">gin-gonic.github.io/gin</a>) and follow the pattern defined by express(node js) users.  routes on <code>routes</code>folder, controllers on <code>controllers</code>folder and so on."}, {"owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453597776, "post_id": 34969950, "comment_id": 57672008, "body": "by the other hand, I&#39;ve made &#39;go run *.go&#39; and the output was expected but the main idea is just run my main file <code>main.go</code> or in gin framework my <code>app.js</code>"}, {"owner": {"reputation": 154, "user_id": 4023381, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1163f54bc7aeb2478d8bdc8be4c38bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Sevag", "link": "https://stackoverflow.com/users/4023381/sevag"}, "reply_to_user": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453598264, "post_id": 34969950, "comment_id": 57672104, "body": "Try changing the package of tst.go to &quot;package main&quot;, then do &quot;go build ./&quot; to create an executable and run that executable."}, {"owner": {"reputation": 2722, "user_id": 4740606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWt5W.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4740606/snowman"}, "edited": false, "score": 0, "creation_date": 1453602003, "post_id": 34969950, "comment_id": 57672844, "body": "external packages are not &quot;package main&quot;, they have their own package name. Main is reserved for the executable."}, {"owner": {"reputation": 154, "user_id": 4023381, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1163f54bc7aeb2478d8bdc8be4c38bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Sevag", "link": "https://stackoverflow.com/users/4023381/sevag"}, "edited": false, "score": 0, "creation_date": 1453639845, "post_id": 34969950, "comment_id": 57681365, "body": "Yes. But he&#39;s not trying to make an external package. He&#39;s trying to make a project, split across multiple files."}, {"owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "edited": false, "score": 0, "creation_date": 1453673319, "post_id": 34969950, "comment_id": 57693327, "body": "I undestood the idea to call all my file as package main (and i have done it). but I still cannot get the expected output runing <b>only</b> my <code>main.go</code> file with <code>go run main.go</code>, otherwise when i run <code>go run *.go</code> command the output was the expected one"}], "tags": [], "owner": {"reputation": 154, "user_id": 4023381, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1163f54bc7aeb2478d8bdc8be4c38bd8?s=128&d=identicon&r=PG&f=1", "display_name": "Sevag", "link": "https://stackoverflow.com/users/4023381/sevag"}, "is_accepted": false, "score": 4, "last_activity_date": 1453650953, "last_edit_date": 1453650953, "creation_date": 1453589693, "answer_id": 34969950, "question_id": 34967358, "link": "https://stackoverflow.com/questions/34967358/how-to-import-my-own-function-defined-out-of-main-package-in-go/34969950#34969950", "title": "How to import my own function defined out of main package in Go?", "body": "<p>If you set the package of tst.go to \"package main\" as well, you will be able to access p() without any import statements.</p>\n\n<pre><code>$ cat main.go \npackage main\n\nfunc main() {\n    p()\n}\n$ cat tst.go \npackage main\n\nimport \"fmt\"\n\nfunc p() {\n    fmt.Println(\"ola\")\n}\n$ go build ./ &amp;&amp; ./test \nola\n</code></pre>\n\n<p>I believe this will suit your request: </p>\n\n<blockquote>\n  <p>I just want to make a project and split the logic into many different files.</p>\n</blockquote>\n\n<p>If you're building a program and not a library, the accepted Go convention is to have all your files as \"package main\":</p>\n\n<blockquote>\n  <p>The package \u201cmain\u201d tells the Go compiler that the package should compile as an executable program instead of a shared library.\n  <a href=\"http://thenewstack.io/understanding-golang-packages/\" rel=\"noreferrer\">http://thenewstack.io/understanding-golang-packages/</a></p>\n</blockquote>\n\n<p><strong>Please explain your downvote</strong></p>\n\n<p>Here's some examples of well-known idiomatic Go projects which do exactly as I say:</p>\n\n<ul>\n<li><a href=\"https://github.com/tools/godep\" rel=\"noreferrer\">https://github.com/tools/godep</a></li>\n<li><a href=\"https://github.com/docker/containerd/tree/master/containerd\" rel=\"noreferrer\">https://github.com/docker/containerd/tree/master/containerd</a></li>\n</ul>\n\n<p>These are executables with the code split among multiple Go files, all of which belong to \"package main\".</p>\n\n<p>Seeing as the OP is slightly unclear, you could choose to interpret that he wants to create an external package, tst. But he's clear when he says:</p>\n\n<blockquote>\n  <p>I just want to make a project and split the logic into many different files.</p>\n</blockquote>\n\n<p>He says many files - <strong>not</strong> many external packages. And he also says:</p>\n\n<blockquote>\n  <p>of course my file structure is:</p>\n</blockquote>\n\n<pre><code>myFolder/\n   |- main.go\n   |_ tst.go\n</code></pre>\n\n<p>My suggestion is the correct way to do things in this case:</p>\n\n<pre><code>executable/\n   |- main.go (package main)\n   |- a.go (package main)\n   |- b.go (package main)\n</code></pre>\n\n<p>With the application split among main, a and b.</p>\n"}], "owner": {"reputation": 53, "user_id": 4946067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c6b3339b61bb21a4971eb33c0cd53ad?s=128&d=identicon&r=PG&f=1", "display_name": "Chelo Tavano", "link": "https://stackoverflow.com/users/4946067/chelo-tavano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9051, "favorite_count": 0, "accepted_answer_id": 34967696, "answer_count": 2, "score": 4, "last_activity_date": 1470241454, "creation_date": 1453574847, "last_edit_date": 1470241454, "question_id": 34967358, "link": "https://stackoverflow.com/questions/34967358/how-to-import-my-own-function-defined-out-of-main-package-in-go", "title": "How to import my own function defined out of main package in Go?", "body": "<p>I'm pretty new on Go but I'm from the C++ school. I just want to make a project and split the logic into multiple files.</p>\n\n<p>In C++ I just need to put on my <code>main_file.cpp</code> a single</p>\n\n<pre><code>#include \"my_own_lib.hpp\" \n</code></pre>\n\n<p>(similar to <code>module.exports</code> and then <code>require('relative/path/to/my-own-lib')</code> in Node.js)</p>\n\n<p>and that's it. In Go I followed the same logic but my result is:</p>\n\n<pre><code>$ go run main.go\nmain.go:4:8: open /Users/mt/Documents/Codes/go/src/github.com/mt/Apollo/tst: no such file or directory\n</code></pre>\n\n<p>My files:</p>\n\n<p><strong>main.go</strong></p>\n\n<pre><code>package main\n\nimport \"fmt\"\nimport \"./tst\"\n\nfunc main() {\n    fmt.Println(\"just testing\")\n    tst.p()\n}\n</code></pre>\n\n<p><strong>tst.go</strong></p>\n\n<pre><code>package tst\n\nimport \"fmt\"\n\nfunc p() {\n    fmt.Println(\"ola\")\n}\n</code></pre>\n\n<p>Of course my file structure is:</p>\n\n<pre><code>myFolder/\n   |- main.go\n   |_ tst.go\n</code></pre>\n\n<p>Could someone tell me what is the right way to do this?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 3290, "user_id": 485185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a3484c170dab0e78478b407bbd41100?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/485185/philip"}, "edited": false, "score": 1, "creation_date": 1453574611, "post_id": 34967215, "comment_id": 57664827, "body": "Can you add something like <code>log.Printf(&quot;form: %v&quot;, form)</code> before calling <code>validate</code>?"}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "reply_to_user": {"reputation": 3290, "user_id": 485185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a3484c170dab0e78478b407bbd41100?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/485185/philip"}, "edited": false, "score": 0, "creation_date": 1453575471, "post_id": 34967215, "comment_id": 57665130, "body": "Hmm.. I see when I don&#39;t enter anything it prints &quot;form: &amp;{     {map[]}} map[blah: blah, etc...]`.. and it prints the same thing even when I do enter information. So it must not be sending it from the HTML then..."}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "reply_to_user": {"reputation": 3290, "user_id": 485185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a3484c170dab0e78478b407bbd41100?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/485185/philip"}, "edited": false, "score": 1, "creation_date": 1453575496, "post_id": 34967215, "comment_id": 57665138, "body": "Ahhhhh I forgot the name attributes on the input fields. Beginner mistake. Thanks! You should add an answer so I can accept it."}, {"owner": {"reputation": 3290, "user_id": 485185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a3484c170dab0e78478b407bbd41100?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/485185/philip"}, "edited": false, "score": 0, "creation_date": 1453576874, "post_id": 34967215, "comment_id": 57665643, "body": "Cool, you&#39;re welcome! :)"}], "answers": [{"tags": [], "owner": {"reputation": 3290, "user_id": 485185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a3484c170dab0e78478b407bbd41100?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/485185/philip"}, "is_accepted": true, "score": 1, "last_activity_date": 1453576936, "creation_date": 1453576936, "answer_id": 34967740, "question_id": 34967215, "link": "https://stackoverflow.com/questions/34967215/why-is-my-struct-method-always-returning-false/34967740#34967740", "title": "Why is my struct method always returning false?", "body": "<p>It's best to debug this kind of problem with a log statement like:</p>\n\n<p><code>log.Printf(\"form: %v\", form)</code></p>\n\n<p>before calling <code>validate</code>, so it's clear what the input data looks like.</p>\n\n<p>Greetings, Philip</p>\n"}], "owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 34967740, "answer_count": 1, "score": 1, "last_activity_date": 1453576936, "creation_date": 1453574128, "question_id": 34967215, "link": "https://stackoverflow.com/questions/34967215/why-is-my-struct-method-always-returning-false", "title": "Why is my struct method always returning false?", "body": "<p>I'm trying to do validation on my form struct in a method that returns a bool, but I keep getting false even when it should be returning true.. </p>\n\n<p>If you look towards the end of the <code>Validate</code> method, you'll see I write <code>validated := len(this.Errors) == 0</code> which should be making \"validated\" either true or false based on whether the Errors map has items or not, and then I <code>return validated</code>.</p>\n\n<p>When I fill out my form accurately, there should be no errors yet I still get false when I should be getting true. </p>\n\n<p>Can someone explain? Is this not how Go works?</p>\n\n<p><strong>form.go:</strong></p>\n\n<pre><code>package models\n\nimport (\n    \"../config\"\n    \"../util\"\n)\n\ntype Form struct {\n    Name    string\n    Email   string\n    Phone   string\n    Message string\n    Thanks  string\n    ErrorHandler\n}\n\nfunc (this *Form) Validate() bool {\n    this.Errors = make(map[string]string)\n\n    matched := util.MatchRegexp(\".+@.+\\\\..+\", this.Email)\n\n    if !util.IsEmpty(this.Email) {\n        if matched == false {\n            this.Errors[\"Email\"] = config.EMAIL_INVALID\n        }\n    } else {\n        this.Errors[\"Email\"] = config.EMAIL_EMPTY\n    }\n\n    if util.IsEmpty(this.Name) {\n        this.Errors[\"Name\"] = config.NAME_EMPTY\n    }\n\n    if util.IsEmpty(this.Phone) {\n        this.Errors[\"Phone\"] = config.PHONE_EMPTY\n    }\n\n    if util.IsEmpty(this.Message) {\n        this.Errors[\"Message\"] = config.MESSAGE_EMPTY\n    }\n\n    validated := len(this.Errors) == 0\n\n    if validated {\n        this.Thanks = config.THANK_YOU\n    }\n\n    return validated\n}\n</code></pre>\n\n<p><strong>errorhandler.go:</strong></p>\n\n<pre><code>package models\n\ntype ErrorHandler struct {\n    Errors map[string]string\n}\n\nfunc (this *ErrorHandler) HandleErr(err string) {\n    this.Errors = make(map[string]string)\n    this.Errors[\"Error\"] = err\n}\n</code></pre>\n\n<p>And this is where I try to call the <code>Validate</code> method -- in a function in my controller:</p>\n\n<pre><code>form := &amp;models.Form{\n    Name:    r.FormValue(\"name\"),\n    Email:   r.FormValue(\"email\"),\n    Phone:   r.FormValue(\"phone\"),\n    Message: r.FormValue(\"message\")}\n\nif form.Validate() {\n    // This never runs because 'form.Validate()' is always false\n}\n</code></pre>\n\n<p>I don't think the <code>util.IsEmpty()</code> is the culprit here.. just checks if the string is empty:</p>\n\n<pre><code>func IsEmpty(str string) bool {\n    return strings.TrimSpace(str) == \"\"\n}\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453571115, "post_id": 34966658, "comment_id": 57663651, "body": "You already have the number in bits: 8 * the byte count. It would be very, very odd to have to read bit-by-bit in Go (or any other non-embedded language). Are you sure the book (which book?) wants you to do that? Else, see this existing answer: <a href=\"http://stackoverflow.com/questions/29583024/reading-8-bits-from-a-reader-in-golang\" title=\"reading 8 bits from a reader in golang\">stackoverflow.com/questions/29583024/&hellip;</a> - but I can honestly say you should never have to do that when comparing hashes in a real program."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1453572231, "post_id": 34966658, "comment_id": 57664024, "body": "What you&#39;re implementing is called Hamming Distance, and is a very common and useful algorithm. You should read about bit-wise operations on bytes and the solution isn&#39;t hard - XOR the two bytes to get a byte with only the different bits set. Then count the bits with bit shifting."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "reply_to_user": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 0, "creation_date": 1453573048, "post_id": 34966658, "comment_id": 57664271, "body": "@peterSO I don&#39;t doubt the OP: there may have, however, been context surrounding the question that wasn&#39;t made available in their post. If the book does want you to perform bit-wise operations, would not a previous exercise or chapter provide some introduction before throwing you in? (it&#39;s not even clear which book is being discussed; I assume it&#39;s GoPL)."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "reply_to_user": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 0, "creation_date": 1453575385, "post_id": 34966658, "comment_id": 57665102, "body": "@peterSO I know what Hamming weight is :) Again, with only the question (and no surrounding text!), would you immediately presume to operate in bits (the less straightforward approach)? If you had already read the book, sure, but for those of us that haven&#39;t we&#39;re left guessing."}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453575626, "post_id": 34966658, "comment_id": 57665192, "body": "(the Go std. lib, for example, only counts the bytes of a hash, not the bits, because in many cases it&#39;s unnecessary to do so)"}], "answers": [{"tags": [], "owner": {"reputation": 47884, "user_id": 164234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b34a2a81515583dc95e5c0809db06bb?s=128&d=identicon&r=PG", "display_name": "Nick Craig-Wood", "link": "https://stackoverflow.com/users/164234/nick-craig-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1453574422, "creation_date": 1453574422, "answer_id": 34967269, "question_id": 34966658, "link": "https://stackoverflow.com/questions/34966658/compare-bits-in-two-arrays/34967269#34967269", "title": "Compare bits in two arrays", "body": "<p>Here is how I would do it</p>\n\n<pre><code>package main\n\nimport (\n    \"crypto/sha256\"\n    \"fmt\"\n)\n\nvar (\n    s1 string = \"unodostresquatro\"\n    s2 string = \"UNODOSTRESQUATRO\"\n    h1        = sha256.Sum256([]byte(s1))\n    h2        = sha256.Sum256([]byte(s2))\n)\n\nfunc main() {\n    fmt.Printf(\"s1: %s h1: %X h1 type: %T\\n\", s1, h1, h1)\n    fmt.Printf(\"s2: %s h2: %X h2 type: %T\\n\", s2, h2, h2)\n    fmt.Printf(\"Number of different bits: %d\\n\", DifferentBits(h1, h2))\n}\n\n// bitCount counts the number of bits set in x\nfunc bitCount(x uint8) int {\n    count := 0\n    for x != 0 {\n        x &amp;= x - 1\n        count++\n    }\n    return count\n}\n\nfunc DifferentBits(c1 [32]uint8, c2 [32]uint8) int {\n    var counter int\n    for x := range c1 {\n        counter += bitCount(c1[x] ^ c2[x])\n    }\n    return counter\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/xq1BW1pH_H\" rel=\"nofollow\">Playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 3, "last_activity_date": 1453597787, "last_edit_date": 1453597787, "creation_date": 1453574448, "answer_id": 34967276, "question_id": 34966658, "link": "https://stackoverflow.com/questions/34966658/compare-bits-in-two-arrays/34967276#34967276", "title": "Compare bits in two arrays", "body": "<blockquote>\n  <p><a href=\"http://www.gopl.io/\" rel=\"nofollow\">The Go Programming Language</a></p>\n  \n  <p>Alan A. A. Donovan \u00b7 Brian W.Kernighan</p>\n  \n  <p>Exercise 4.1: Write a function that counts the number of bits that\n  are different in two SHA256 hashes.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"http://www.pearsonhighered.com/educator/product/C-Programming-Language/9780131103627.page\" rel=\"nofollow\">The C Programming Language</a></p>\n  \n  <p>Brian W.Kernighan \u00b7 Dennis M. Ritchie</p>\n  \n  <p>Exercise 2-9. In a two's complement number system, <code>x &amp;= (x-1)</code> deletes\n  the rightmost 1-bit in <code>x</code>. Use this observation to write a faster\n  version of <code>bitcount</code>.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><a href=\"https://graphics.stanford.edu/~seander/bithacks.html\" rel=\"nofollow\">Bit Twiddling Hacks</a></p>\n  \n  <p>Sean Eron Anderson</p>\n  \n  <p><a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan\" rel=\"nofollow\">Counting bits set, Brian Kernighan's way</a></p>\n\n<pre><code>unsigned int v; // count the number of bits set in v\nunsigned int c; // c accumulates the total bits set in v\nfor (c = 0; v; c++)\n{\n  v &amp;= v - 1; // clear the least significant bit set\n}\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>For exercise 4.1, you are counting the number of <strong>bytes</strong> that are different. Count the number of <strong>bits</strong> that are different. For example,</p>\n\n<pre><code>package main\n\nimport (\n    \"crypto/sha256\"\n    \"fmt\"\n)\n\nfunc BitsDifference(h1, h2 *[sha256.Size]byte) int {\n    n := 0\n    for i := range h1 {\n        for b := h1[i] ^ h2[i]; b != 0; b &amp;= b - 1 {\n            n++\n        }\n    }\n    return n\n}\n\nfunc main() {\n    s1 := \"unodostresquatro\"\n    s2 := \"UNODOSTRESQUATRO\"\n    h1 := sha256.Sum256([]byte(s1))\n    h2 := sha256.Sum256([]byte(s2))\n    fmt.Println(BitsDifference(&amp;h1, &amp;h2))\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>139\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 464326, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e7833859641db4ddc6ed4089fce9c4a?s=128&d=identicon&r=PG", "display_name": "Jakub M", "link": "https://stackoverflow.com/users/464326/jakub-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 1, "accepted_answer_id": 34967276, "answer_count": 2, "score": 2, "last_activity_date": 1453597787, "creation_date": 1453570884, "question_id": 34966658, "link": "https://stackoverflow.com/questions/34966658/compare-bits-in-two-arrays", "title": "Compare bits in two arrays", "body": "<p>I've got stuck with ex4.1 for the book which says: <br />\n<em>Write a function that counts the number of bits that are different in two SHA256 hashes.</em></p>\n\n<p>The partial solution I came up with is pasted below, but it's wrong - it counts number of different bytes not bits.\nCould you please point me in the right direction?</p>\n\n<pre><code>package main\n\nimport (\n    \"crypto/sha256\"\n    \"fmt\"\n)\n\nvar s1 string = \"unodostresquatro\"\nvar s2 string = \"UNODOSTRESQUATRO\"\nvar h1 = sha256.Sum256([]byte(s1))\nvar h2 = sha256.Sum256([]byte(s2))\n\nfunc main() {\n    fmt.Printf(\"s1: %s h1: %X h1 type: %T\\n\", s1, h1, h1) \n    fmt.Printf(\"s2: %s h2: %X h2 type: %T\\n\", s2, h2, h2) \n    fmt.Printf(\"Number of different bits: %d\\n\", 8 * DifferentBits(h1, h2))\n}\n\nfunc DifferentBits(c1 [32]uint8, c2 [32]uint8) int {\n    var counter int \n    for x := range c1 {\n        if c1[x] != c2[x] {\n            counter += 1\n        }\n    }   \n    return counter\n\n}\n</code></pre>\n"}, {"tags": ["go", "interface"], "comments": [{"owner": {"reputation": 3099, "user_id": 1595320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7394f8a600a66b2dfaf6613fd32f8fc?s=128&d=identicon&r=PG", "display_name": "Riscie", "link": "https://stackoverflow.com/users/1595320/riscie"}, "edited": false, "score": 1, "creation_date": 1453584341, "post_id": 34966271, "comment_id": 57668251, "body": "I&#39;ts not quite clear what you are asking to me. Can you elaborate on your question? Maybe add some code?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453593220, "post_id": 34966271, "comment_id": 57670879, "body": "Don&#39;t program Java in Go. Start concrete (not with an interface). Extract interface where appropriate. Take a look at how the stdlib does things."}], "answers": [{"tags": [], "owner": {"reputation": 1615, "user_id": 1376205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff8ba613f2dc50cc30e7f3af3e2914?s=128&d=identicon&r=PG", "display_name": "Will C", "link": "https://stackoverflow.com/users/1376205/will-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1453595281, "creation_date": 1453595281, "answer_id": 34970760, "question_id": 34966271, "link": "https://stackoverflow.com/questions/34966271/how-ioc-interfaces-and-implementations-work/34970760#34970760", "title": "How ioc, interfaces and implementations work", "body": "<p>If I am understanding you correctly, you're saying your implementation is coupled to the <code>config</code> struct instead of the interface. If that is the case, simply replace the argument that uses the <code>config</code> to the interface, in this case <code>PAAPI</code>. </p>\n\n<p>In the below code, instead of the <code>DoSomethingWithStruct</code> function definition, what you want is probably the <code>DoSomethingWithInterface</code> function definition.</p>\n\n<pre><code>type PAAPI interface {\n    Foo() // just a stub method\n}\n\ntype Config struct {}\n\nfunc (config *Config) Foo() {\n    // do something\n}\n\nfunc DoSomethingWithStruct(config Config) {\n    // do something\n}\n\n// you probably want a method that uses your config through the interface\nfunc DoSomethingWithInterface(config PAAPI) {\n    // do something\n}\n</code></pre>\n\n<p>To take it another step further, if in an external package, you want to implement the interface simply define another struct that adheres to the interface. Like the below:</p>\n\n<pre><code>type ExternalConfig struct{}\n\nfunc (config *ExternalConfig) Foo() {\n    // do something\n}\n</code></pre>\n\n<p>A couple notes about this that differs from Java is that there is no explicit <code>implements</code> keyword in Go. It is based off a familiar principle in dynamically typed programming languages instead, which is basically <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow\">duck-typing</a>. It implicitly knows that the interface is implemented by the struct at compile time.</p>\n\n<p>Based on the two previous snippets of code, now you can call <code>DoSomethingWithInterface(ExternalConfig{})</code>. Note that I inlined the instance of <code>ExternalConfig</code> here but you can create it with actual credentials and pass it into <code>DoSomethingWithInterface</code> in the same way. Hope this helps. Also, feel free to comment to ask for clarity if I'm not quite hitting the target.</p>\n"}], "owner": {"reputation": 7718, "user_id": 225885, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pKYBo.jpg?s=128&g=1", "display_name": "jim", "link": "https://stackoverflow.com/users/225885/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 34970760, "answer_count": 1, "score": 0, "last_activity_date": 1453595281, "creation_date": 1453568540, "question_id": 34966271, "link": "https://stackoverflow.com/questions/34966271/how-ioc-interfaces-and-implementations-work", "title": "How ioc, interfaces and implementations work", "body": "<p>I am trying to figure out interfaces in GoLang.</p>\n\n<p>Being familiar with how it all works in Java i.e. interface, implements allowing for a mock and a full implementation. I am a bit confused on how I can tie things together in Go.</p>\n\n<p>For example, I am trying to implement <code>AmazonProductAdvertisingAPI</code> connector. I have created <code>PAAPI</code> interface and also another file that provides an implementation.</p>\n\n<p>I then have a struct <code>config</code>. I then created a file with method signatures that implement <code>PAAPI</code> and are based on <code>config</code> i.e. <code>config</code> implements <code>PAAPI</code>.</p>\n\n<p>All that happens in the same package. But from an outside perspective, how can I then go and implement a mock of <code>PAAPI</code> it seems bizarre that everything is linked on the <code>config</code> struct.</p>\n\n<p>Any code example would be greatly appreciated. Thanks.</p>\n"}, {"tags": ["go", "variable-assignment", "declaration"], "answers": [{"comments": [{"owner": {"reputation": 3597, "user_id": 829496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XXTbx.jpg?s=128&g=1", "display_name": "fronthem", "link": "https://stackoverflow.com/users/829496/fronthem"}, "edited": false, "score": 0, "creation_date": 1453564770, "post_id": 34965532, "comment_id": 57661515, "body": "The crucial point is that which one is better? in term of efficiency. If they are the same that means different people will use different ways to archive this. That might be a pretty sad for go&#39;s code convention."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 3, "last_activity_date": 1453567799, "last_edit_date": 1453567799, "creation_date": 1453564469, "answer_id": 34965532, "question_id": 34965414, "link": "https://stackoverflow.com/questions/34965414/difference-between-variable-declaration-and-short-variable-declaration-at-lo/34965532#34965532", "title": "Difference between &quot;variable declaration&quot; and &quot;short variable declaration&quot; at local scope in Go", "body": "<p>They are the same type (<code>byte</code> is an alias for <code>uint8</code>) and value. For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var c byte = 'A'\n    d := byte('A')\n    fmt.Printf(\"c: %[1]T %[1]v d: %[2]T %[2]v c==d: %v\", c, d, c == d)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>c: uint8 65 d: uint8 65 c==d: true\n</code></pre>\n\n<p>They are equally efficient; the runtime code is the same. They are both easy to understand by Go compilers.</p>\n\n<blockquote>\n  <p><a href=\"https://golang.org/ref/spec\" rel=\"nofollow\">The Go Programming Language Specification</a>.</p>\n  \n  <p>A short variable declaration uses the syntax:</p>\n\n<pre><code>ShortVarDecl = IdentifierList \":=\" ExpressionList .\n</code></pre>\n  \n  <p>It is shorthand for a regular variable declaration with initializer\n  expressions but no types: </p>\n\n<pre><code>\"var\" IdentifierList = ExpressionList .\n</code></pre>\n</blockquote>\n\n<p>The \"best\" is a matter of style. Which reads better in a given context?</p>\n\n<blockquote>\n  <p><a href=\"http://www.gopl.io/\" rel=\"nofollow\">The Go Programming Language</a></p>\n  \n  <p>Alan A. A. Donovan \u00b7 Brian W.Kernighan</p>\n  \n  <p>Because of their brevity and flexibility, short variable\n  declarations are used to declare and initialize the majority of local\n  variables. A var declaration tends to be reserved for local variables\n  that need an explicit type that differs from that of the initializer\n  expression, or for when the variable will be assigned a value later\n  and its initial value is unimportant.</p>\n</blockquote>\n"}], "owner": {"reputation": 3597, "user_id": 829496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/XXTbx.jpg?s=128&g=1", "display_name": "fronthem", "link": "https://stackoverflow.com/users/829496/fronthem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 1, "accepted_answer_id": 34965532, "answer_count": 1, "score": 2, "last_activity_date": 1453567799, "creation_date": 1453563814, "last_edit_date": 1495542731, "question_id": 34965414, "link": "https://stackoverflow.com/questions/34965414/difference-between-variable-declaration-and-short-variable-declaration-at-lo", "title": "Difference between &quot;variable declaration&quot; and &quot;short variable declaration&quot; at local scope in Go", "body": "<p>According to this question <a href=\"https://stackoverflow.com/questions/27775590/how-to-define-a-single-byte-variable-in-go-lang\">how-to-define-a-single-byte-variable-in-go-lang</a></p>\n\n<p>At a local scope:</p>\n\n<pre><code>var c byte = 'A' \n</code></pre>\n\n<p>and</p>\n\n<pre><code>c := byte('A')\n</code></pre>\n\n<p>My questions are: </p>\n\n<ol>\n<li>Do they have the same mechanism?</li>\n<li>Which one is more easy to understand by a go compiler?</li>\n</ol>\n"}, {"tags": ["postgresql", "validation", "go", "error-handling"], "answers": [{"comments": [{"owner": {"reputation": 1414, "user_id": 822779, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/aJm0V.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/822779/sam"}, "edited": false, "score": 0, "creation_date": 1453591564, "post_id": 34964721, "comment_id": 57670378, "body": "Hi. Sorry I think I poorly worded the part where I said nothing could go wrong. I was referring to a null field or length out of bounds. Regarding the returning errors, postgres provides me with an error  code, schema, table but no column. So it appears that my only way to extract the problem column is to parse the hint field, which seems like a really bad idea. Should the error struct contain column for a unique constraint? I really appreciate your help."}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "reply_to_user": {"reputation": 1414, "user_id": 822779, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/aJm0V.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/822779/sam"}, "edited": false, "score": 0, "creation_date": 1453613636, "post_id": 34964721, "comment_id": 57674880, "body": "@Sam: The hint field is empty, at least under version 9.4. The error struct probably should <i>not</i> contain a column name, because a unique constraint can include more than one column. Lookup the columns a unique constraint applies to from <code>information_schema.key_column_usage.</code> See revised answer."}, {"owner": {"reputation": 1414, "user_id": 822779, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/aJm0V.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/822779/sam"}, "edited": false, "score": 0, "creation_date": 1453621088, "post_id": 34964721, "comment_id": 57676295, "body": "Thanks for such a detailed answer. I&#39;ve got one more question regarding your answer if I may. PostgreSQL aborts a query after the first constraint is broken. Therefore if a user is filling out a form which breaches all constraints, they&#39;ll only get one piece of feedback per request. I.e. in this scenario it may take up to 3 submits to get it right. Set username, email, voucher -&gt; Constraint breach on username -&gt; Change username -&gt; Constraint breach on email -&gt; Change email -&gt; Constraint breach on voucher."}, {"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "reply_to_user": {"reputation": 1414, "user_id": 822779, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/aJm0V.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/822779/sam"}, "edited": false, "score": 0, "creation_date": 1453636314, "post_id": 34964721, "comment_id": 57680236, "body": "@Sam: If your question is, &quot;Is there any way to avoid the worst case--three separate submissions by the user to satisfy all the constraints--then, no, there really isn&#39;t. You&#39;d have to supply the right value for username in order to get past the first error; if you already <i>knew</i> the username, then the <i>user</i> wouldn&#39;t have to supply it in the first place."}], "tags": [], "owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "is_accepted": true, "score": 5, "last_activity_date": 1453613531, "last_edit_date": 1453613531, "creation_date": 1453559534, "answer_id": 34964721, "question_id": 34963064, "link": "https://stackoverflow.com/questions/34963064/go-pq-and-postgres-appropriate-error-handling-for-constraints/34964721#34964721", "title": "Go pq and Postgres appropriate error handling for constraints", "body": "<blockquote>\n  <p>If the validation was done correctly, the only thing that can really go wrong is the UNIQUE constraints. </p>\n</blockquote>\n\n<p>No, the client could lack sufficient privileges, the client might have entered a valid password that's not the <em>right</em> password, the client might have entered a valid voucher that belongs to a different client, etc.</p>\n\n<p>Using \"A SERIALIZABLE transaction which checks every single form value prior to insertion\" doesn't make sense. Just insert data, and trap errors.</p>\n\n<p>At the very least, your code needs to examine and respond to the C (Code) field, which is always present in the error struct. You don't need to parse the error struct, but you do need to read it.</p>\n\n<p>If you violate a unique constraint, PostgreSQL will return SQL state 23505 in the Code field. It will also return the name of the first constraint that's violated. It doesn't return the column name, probably because a unique constraint can include more than one column.</p>\n\n<p>You can select the column(s) the constraint refers to by querying the information_schema views.</p>\n\n<p>Here's a simple version of your table.</p>\n\n<pre><code>create table test (\n  username VARCHAR(255) UNIQUE NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  voucher VARCHAR(255) UNIQUE NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n\ninsert into test values ('msherrill', 'me@example.com', 'a', 'wibble');\n</code></pre>\n\n<p>This quick and dirty go program inserts the same row again. It violates <em>every</em> unique constraint.</p>\n\n<pre><code>package main\n\nimport (\n    \"github.com/lib/pq\"\n    \"database/sql\"\n    \"fmt\"\n    \"log\"\n)\n\nfunc main() {\n    db, err := sql.Open(\"postgres\", \"host=localhost port=5435 user=postgres password=xxxxxxxx dbname=scratch sslmode=disable\")\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    rows, err := db.Exec(\"insert into public.test values ('msherrill', 'me@example.com', 'a', 'wibble');\")\n    if err, ok := err.(*pq.Error); ok {\n        fmt.Println(\"Severity:\", err.Severity)\n        fmt.Println(\"Code:\", err.Code)\n        fmt.Println(\"Message:\", err.Message)\n        fmt.Println(\"Detail:\", err.Detail)\n        fmt.Println(\"Hint:\", err.Hint)\n        fmt.Println(\"Position:\", err.Position)\n        fmt.Println(\"InternalPosition:\", err.InternalPosition)\n        fmt.Println(\"Where:\", err.Where)\n        fmt.Println(\"Schema:\", err.Schema)\n        fmt.Println(\"Table:\", err.Table)\n        fmt.Println(\"Column:\", err.Column)\n        fmt.Println(\"DataTypeName:\", err.DataTypeName)\n        fmt.Println(\"Constraint:\", err.Constraint)\n        fmt.Println(\"File:\", err.File)\n        fmt.Println(\"Line:\", err.Line)\n        fmt.Println(\"Routine:\", err.Routine)\n    }\n   fmt.Println(rows)\n}\n</code></pre>\n\n<p>Here's the output.</p>\n\n<pre>\nSeverity: ERROR\nCode: 23505\nMessage: duplicate key value violates unique constraint \"test_username_key\"\nDetail: Key (username)=(msherrill) already exists.\nHint: \nPosition: \nInternalPosition: \nWhere: \nSchema: public\nTable: test\nColumn: \nDataTypeName: \nConstraint: test_username_key\nFile: nbtinsert.c\nLine: 406\nRoutine: _bt_check_unique\n</pre>\n\n<p>You have the schema, table, and constraint names. You presumably know the database (catalog) name, too.  Use these values to select the schema, table, and column names from information_schema views. You're lucky; in this case you need only one view.</p>\n\n<pre><code>select table_catalog, table_schema, table_name, column_name \nfrom information_schema.key_column_usage\nwhere \n    table_catalog = 'scratch' and          -- Database name\n    table_schema = 'public' and            -- value returned by err.Schema\n    table_name = 'test' and                -- value returned by err.Table\n    constraint_name = 'test_username_key'  -- value returned by err.Constraint\norder by constraint_catalog, constraint_schema, constraint_name, ordinal_position;\n</code></pre>\n"}], "owner": {"reputation": 1414, "user_id": 822779, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/aJm0V.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/822779/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "accepted_answer_id": 34964721, "answer_count": 1, "score": 2, "last_activity_date": 1453613736, "creation_date": 1453549692, "last_edit_date": 1453613736, "question_id": 34963064, "link": "https://stackoverflow.com/questions/34963064/go-pq-and-postgres-appropriate-error-handling-for-constraints", "title": "Go pq and Postgres appropriate error handling for constraints", "body": "<p>I'm currently using the <code>pq</code> lib for Go to communicate with my PostgreSQL database. Error checking is proving to be a little more difficult than anticipated. The easiest way to describe my question is through an example scenario.</p>\n\n<p>Imagine a web form:  </p>\n\n<pre><code>Username  ________\nEmail     ________\nVoucher   ________\nPassword  ________\n</code></pre>\n\n<p>A rough schema:</p>\n\n<pre><code>username VARCHAR(255) UNIQUE NOT NULL,\nemail VARCHAR(255) UNIQUE NOT NULL,\nvoucher VARCHAR(255) UNIQUE NOT NULL,\npassword VARCHAR(255) NOT NULL\n</code></pre>\n\n<p>Ignore the presumed plain text password for now. If a person submits the form, I can do all of my validation to verify constraints such as length/allowed characters/etc.</p>\n\n<p>Now it comes to putting it in the database, so we write a prepared statement and execute it. If the validation was done correctly, the only thing that can really go wrong is the <code>UNIQUE</code> constraints. In the event that someone attempts to enter an existing username, database/sql is going to fire back an error.</p>\n\n<p>My problem is that I have no idea what to do with that error and recover from (what should be) a recoverable error. pq provides <a href=\"https://github.com/lib/pq/blob/master/error.go#L25\" rel=\"nofollow\">some support</a> for this, but there still appears to be come ambiguity to what's returned.</p>\n\n<p>I can see two solutions, neither of which sound particularly appealing to me:\nA <code>SERIALIZABLE</code> transaction which checks every single form value prior to insertion. Alternatively, some form of parsing on the pq error struct.</p>\n\n<p>Is there a common pattern for implementing such a system? I'd like to be able to say to a user <code>Sorry that username exists</code> rather than <code>Sorry something bad happened</code></p>\n\n<p>As a sidenote, the PostgreSQL documentation states:  </p>\n\n<blockquote>\n  <p>The fields for\n  schema name, table name, column name, data type name, and constraint\n  name are supplied only for a limited number of error types; see\n  <a href=\"http://www.postgresql.org/docs/current/static/errcodes-appendix.html\" rel=\"nofollow\">Appendix A.</a></p>\n</blockquote>\n\n<p>but the linked page isn't very helpful with respect to values returned in the database object.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1453544779, "post_id": 34962026, "comment_id": 57655200, "body": "Just because Java and JavaScript does something is not an argument for being sensible. C has pointers too."}, {"owner": {"reputation": 2002, "user_id": 737997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/26ylW.jpg?s=128&g=1", "display_name": "Llewellyn Collins", "link": "https://stackoverflow.com/users/737997/llewellyn-collins"}, "edited": false, "score": 1, "creation_date": 1453546441, "post_id": 34962026, "comment_id": 57655697, "body": "This question can yield a lot of opinionated answers"}, {"owner": {"reputation": 302, "user_id": 1746580, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/nsOZ1.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1746580/kevin"}, "edited": false, "score": 0, "creation_date": 1453617905, "post_id": 34962026, "comment_id": 57675693, "body": "I&#39;ve post this <b><a href=\"https://groups.google.com/forum/#!topic/golang-nuts/_c673wqxS60\" rel=\"nofollow noreferrer\">discussion</a></b> on golang-nuts of google group. This <b><a href=\"http://stackoverflow.com/questions/23542989/pointers-vs-values-in-parameters-and-return-values\">question</a></b> is what I meant to ask on stackoverflow."}], "answers": [{"comments": [{"owner": {"reputation": 1781, "user_id": 4515566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOOZ7.jpg?s=128&g=1", "display_name": "arainone", "link": "https://stackoverflow.com/users/4515566/arainone"}, "edited": false, "score": 0, "creation_date": 1453555913, "post_id": 34962687, "comment_id": 57658631, "body": "Good objective answer to such an opinionated question!"}], "tags": [], "owner": {"reputation": 4684, "user_id": 302214, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3014940b3380fb3cb0e117fa1adba98d?s=128&d=identicon&r=PG&f=1", "display_name": "Espresso", "link": "https://stackoverflow.com/users/302214/espresso"}, "is_accepted": false, "score": 2, "last_activity_date": 1453547424, "creation_date": 1453547424, "answer_id": 34962687, "question_id": 34962026, "link": "https://stackoverflow.com/questions/34962026/why-golang-has-both-values-and-pointers-for-struct-types/34962687#34962687", "title": "why golang has both values and pointers for struct types", "body": "<p>In Go, the flexibility allows you to optimize your program since it's by default garbage-collected. See the <a href=\"https://golang.org/doc/faq#stack_or_heap\" rel=\"nofollow\">FAQ</a>:</p>\n\n<blockquote>\n  <p>When possible, the Go compilers will allocate variables that\n  are local to a function in that function's stack frame. However, if\n  the compiler cannot prove that the variable is not referenced after\n  the function returns, then the compiler must allocate the variable on\n  the garbage-collected heap to avoid dangling pointer errors.</p>\n</blockquote>\n\n<p>If a struct is returned by value, it won't be allocated on the heap. Thus, the garbage collector doesn't have to keep track of it to determine when it's safe to free the memory allocated for it.</p>\n"}], "owner": {"reputation": 302, "user_id": 1746580, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/nsOZ1.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1746580/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "closed_date": 1453549372, "answer_count": 1, "score": -2, "last_activity_date": 1453547424, "creation_date": 1453542898, "question_id": 34962026, "link": "https://stackoverflow.com/questions/34962026/why-golang-has-both-values-and-pointers-for-struct-types", "closed_reason": "Opinion-based", "title": "why golang has both values and pointers for struct types", "body": "<p>One of Go's design goals is to be simple. But Go have both values and pointers for struct types which I think is confusing for developers to choose from, while java and javascript have a very simple rule: primitive types are always values, object types are always pointers. Why doesn't Go adopt this simple rule from java and javascript? Or is there any vital advantages of values compared to pointers?</p>\n"}, {"tags": ["struct", "go"], "answers": [{"comments": [{"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453561234, "post_id": 34960574, "comment_id": 57660331, "body": "Hmm still trying to grok that.. I think my lack of knowledge of pointers/memory is failing me here. This is my first &quot;lower level&quot; language. If make &quot;allocates memory and initializes the map&quot;, as quoted in the other answer, then what is naming it in the struct doing? like what does <code>type ErrorHandler struct { Errors map[string]string }</code> do if it isn&#39;t either allocating memory or initializing &#39;Errors&#39;? Is it just saying &quot;here you are, you can be called, but can&#39;t be used because you don&#39;t quite exist yet until being created with memory allocation and initialization&quot;?"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453562180, "post_id": 34960574, "comment_id": 57660643, "body": "maps are basically a reference type, meaning a type that refers to some other piece of memory.  That other piece of memory being nil by default.  If you are familiar with Java, it&#39;s like class Foo { String someString }.  When you do new Foo(), Your Foo instance has reference to a null String.  Until you assign it a value, any operation on that string is  NullPointerException.   Not sure if that makes it more clear or not"}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453562943, "post_id": 34960574, "comment_id": 57660901, "body": "Okay yeah that makes sense.. so it&#39;s basically a way to create &quot;things&quot; without them taking up any space, and then you can initialize them/allocate memory when and only when you need to use them to save resources. Is that right?"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453564716, "post_id": 34960574, "comment_id": 57661491, "body": "yes, you are actually creating a holder for &quot;thing&quot; without making the actual thing it holds.  It&#39;s generally useful for things with unknown / unbounded size.  if a map wasn&#39;t a reference type, every time you added an element that made it resize, it would get a new address (making all your variables point to the old map).   By having a reference type, i can refer to that and then growth operations just update the reference itself, my variable doesn&#39;t change."}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453565385, "post_id": 34960574, "comment_id": 57661708, "body": "Cool.. I think I&#39;m starting to get it now. Thanks a lot =)"}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 1, "last_activity_date": 1453532042, "creation_date": 1453532042, "answer_id": 34960574, "question_id": 34959485, "link": "https://stackoverflow.com/questions/34959485/what-does-the-make-function-do-to-a-map-in-this-context/34960574#34960574", "title": "What does the &quot;make&quot; function do to a map in this context", "body": "<p>Think of a map as a struct containing a pointer to the underling map structure and a size (there may be other stuff, not sure).</p>\n\n<p>For example, think of it like:</p>\n\n<pre><code>struct Map {\n  data *Entries\n  size int\n}\n</code></pre>\n\n<p>make, allocates the initial value of Entries according to the size passed to make (if any)</p>\n\n<p>When you say:</p>\n\n<pre><code>form.Errors = make(map[string]string)\n</code></pre>\n\n<p>it's like saying:</p>\n\n<pre><code>form.Errors = struct { data : malloc(sizeof(Entries)*capacity), size : 0 }\n</code></pre>\n\n<p>which copies the \"data\" and \"size\" variables in to your form.Errors</p>\n\n<p>The actual field \"form.Errors\" is still the same place in memory, the internal values of form.Errors have changed to match what make returned.</p>\n\n<p>So, the address doesn't change when you look at &amp;form.Errors</p>\n\n<p>As for the nil error when pushing to a map you didn't <code>make</code>...</p>\n\n<p>An un-maid map has no \"data\" segment yet, so you get a nil pointer error.</p>\n\n<p>Not unlike doing:</p>\n\n<pre><code>var i *int\n*i = 5\n</code></pre>\n\n<p>Also results in a nil error</p>\n\n<p>Hopefully that all made sense and helps shed a bit of light on the confusion.</p>\n"}, {"comments": [{"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453560794, "post_id": 34961116, "comment_id": 57660188, "body": "I think with my current method, using it in every HandleErr call is appropriate because only one error can occur at one time. For example, I try and send the email and Gmail refuses the credentials, so I call HandleErr and pass in my own error message. It would then return the view with the error so it wouldn&#39;t be able to catch any other error yet. But I think what you showed me will work well for when I have multiple errors that should all be &quot;pushed&quot; into the struct so all can be there in there together...correct?"}, {"owner": {"reputation": 2878, "user_id": 3087441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zIs67.jpg?s=128&g=1", "display_name": "kopiczko", "link": "https://stackoverflow.com/users/3087441/kopiczko"}, "reply_to_user": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453628868, "post_id": 34961116, "comment_id": 57678137, "body": "If you can store only one error in the ErrorHandler then you shouldn&#39;t use a map. You can refactor your struct to sth like <code>type ErrorHandler struct { Key, Val string }</code> and have your init problem resolved. If you want to &quot;push&quot; errors I would recommend using slice instead of map."}], "tags": [], "owner": {"reputation": 2878, "user_id": 3087441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zIs67.jpg?s=128&g=1", "display_name": "kopiczko", "link": "https://stackoverflow.com/users/3087441/kopiczko"}, "is_accepted": false, "score": 1, "last_activity_date": 1453536658, "last_edit_date": 1592644375, "creation_date": 1453536262, "answer_id": 34961116, "question_id": 34959485, "link": "https://stackoverflow.com/questions/34959485/what-does-the-make-function-do-to-a-map-in-this-context/34961116#34961116", "title": "What does the &quot;make&quot; function do to a map in this context", "body": "<p>First, to answer your question:</p>\n<p>from <a href=\"https://golang.org/pkg/builtin/#make\" rel=\"nofollow noreferrer\">https://golang.org/pkg/builtin/#make</a></p>\n<blockquote>\n<p>The make built-in function allocates and initializes an object of type slice, map, or chan (only) [...]</p>\n<p>Map: An initial allocation is made according to the size but the\nresulting map has length 0. The size may be omitted, in which case\na small starting size is allocated.</p>\n</blockquote>\n<p>Secondly, there aren't goroutines in the code you posted.</p>\n<p>Thirdly, make <strong>initializes</strong> the map and you probably shouldn't use it in every <code>HandleErr</code> call, because it would replace your current map. I think that what you want may be an initialization function like <code>NewErrorHandler</code> or <code>NewForm</code>. It is kind of make for your struct. For example:</p>\n<pre><code>func NewErrorHandler() ErrorHandler {\n    return ErrorHandler{make(map[string]string)}\n}\n</code></pre>\n<p>And finally why can't map initialize automatically? If it did you wouldn't have any control over initial size of your map. It may matter if you have mission critical code and you want it to be fast or low memory and know the size.</p>\n<p>PS. There is also alternative way to initialize a map. If you want initialize an empty map you can write: <code>map[string]string{}</code>. If you want to create a map with initial values:</p>\n<pre><code>map[string]string{\n    &quot;a&quot;: &quot;b&quot;,\n    &quot;c&quot;: &quot;d&quot;,\n}\n</code></pre>\n<p>So you could write you NewErrorHandler function like:</p>\n<pre><code>func NewErrorHandler() ErrorHandler {\n    return ErrorHandler{map[string]string{}}\n}\n</code></pre>\n"}], "owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453560663, "creation_date": 1453521873, "last_edit_date": 1592644375, "question_id": 34959485, "link": "https://stackoverflow.com/questions/34959485/what-does-the-make-function-do-to-a-map-in-this-context", "title": "What does the &quot;make&quot; function do to a map in this context", "body": "<p>I am new to Go and was looking for a tutorial on forms a few days ago, and now that I've familiarized myself a bit more I was attempting to create my own error handler that I could use with all of my structs, sort of like an abstract class, but the example I got from the tutorial I saw has me a bit stumped.</p>\n<p>Here is a small example I played with to test what the <code>make</code> function was doing. I kind of figured it out by tinkering, but I don't understand what it's <em>actually</em> doing, and why it is necessary.</p>\n<pre><code>type ErrorHandler struct {\n    Errors map[string]string\n}\n\ntype Form struct {\n    ErrorHandler\n}\n\nfunc main() {\n    form := &amp;Form{}\n\n    if true {\n        fmt.Printf(&quot;%p\\n&quot;, &amp;form.Errors)\n    } else {\n        form.Errors = make(map[string]string)\n        fmt.Printf(&quot;%p\\n&quot;, &amp;form.Errors)\n    }\n}\n</code></pre>\n<p>In the example above, I try changing the if statement from true to false to see if the memory address changes based on whether the <code>make</code> function is used or not and it stays the same both cases. I read the answer <a href=\"https://stackoverflow.com/questions/9320862/go-why-would-i-make-or-new\">here</a> and he said one of its uses is to &quot;create a map with space preallocated&quot; -- which honestly doesn't mean much to me since I'm new to pointers and all that, but the &quot;create a map&quot; part had me thinking it's like reinitializing that Errors map in the ErrorHandler struct, which would assign it to a new memory address, yes? But no, they stay the same.</p>\n<p>So I tried creating a value in the map, once <em>without</em> the make function and once <em>with</em> the make function. The <code>if</code> condition gives me an error saying <code>assignment to entry in nil map</code> and <code>goroutine [running]</code>, and the <code>else</code> statement prints &quot;haha&quot;, which is what I set it to:</p>\n<pre><code>type ErrorHandler struct {\n    Errors map[string]string\n}\n\ntype Form struct {\n    ErrorHandler\n}\n\nfunc main() {\n    form := &amp;Form{}\n\n    if true {\n        form.Errors[&quot;blah&quot;] = &quot;haha&quot;\n        fmt.Printf(form.Errors[&quot;blah&quot;])\n    } else {\n        form.Errors = make(map[string]string)\n        form.Errors[&quot;blah&quot;] = &quot;haha&quot;\n        fmt.Printf(form.Errors[&quot;blah&quot;])\n    }\n}\n</code></pre>\n<p>So I sort of see what the make function is doing, but not exactly. As far as I can tell if I am going to &quot;push&quot; items into that map I need to use the <code>make</code> function, but I don't see why it's necessary. Why is the <code>map[string]string</code> set to nil in my struct because when I print it out I see &quot;map[]&quot; and not &quot;nil&quot;... that's confusing.</p>\n<p>Can someone explain please? And how is this <code>goroutine</code> used here? Maybe that's the answer I'm looking for.. never used that before.</p>\n<p>Also, since I have to use <code>make</code>, is there a way to kind of make it happen automatically instead of having to put it at the top of each method?</p>\n<p>For example in my ErrorHandler struct I have a method that looks like this:</p>\n<pre><code>func (this *ErrorHandler) HandleErr(err string) {\n    this.Errors = make(map[string]string)\n    this.Errors[&quot;Error&quot;] = err\n}\n</code></pre>\n<p>and in my Form struct I also have another method that is validating the form, but also uses the `this.Errors = make(map[string]string) at the top of the method... feels non-DRY to me.</p>\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1453521490, "post_id": 34959422, "comment_id": 57650056, "body": "By convention, but Go does not enforce it as a rule. In the standard lib I can&#39;t think of anything (off the top of my head) that doesn&#39;t follow this rule of thumb, however."}, {"owner": {"reputation": 1227, "user_id": 418772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/812e307892de3240c2b50a3e66295f84?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/418772/rob"}, "edited": false, "score": 0, "creation_date": 1453524601, "post_id": 34959422, "comment_id": 57650569, "body": "if the function expects err to be checked, it&#39;s usually not going to even define what the other values are.  the definition of the function needs to be specific enough to know this.  in some cases, non-nil err may have you going to the primary return value to find hints like error messages."}], "answers": [{"tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": true, "score": 5, "last_activity_date": 1453525152, "last_edit_date": 1453525152, "creation_date": 1453521569, "answer_id": 34959454, "question_id": 34959422, "link": "https://stackoverflow.com/questions/34959422/in-go-when-a-function-returns-an-error-are-the-other-variables-always-its-zer/34959454#34959454", "title": "In Go, when a function returns an error, are the other variables always its &quot;zero&quot; value?", "body": "<p>Not always. For example,<code>io.Reader</code>:</p>\n\n<blockquote>\n  <p><a href=\"https://golang.org/pkg/io/\" rel=\"nofollow\">Package io</a></p>\n  \n  <p><a href=\"https://golang.org/pkg/io/#Reader\" rel=\"nofollow\">type Reader</a></p>\n\n<pre><code>type Reader interface {\n        Read(p []byte) (n int, err error)\n}\n</code></pre>\n  \n  <p>Reader is the interface that wraps the basic Read method.</p>\n  \n  <p>Read reads up to len(p) bytes into p. It returns the number of bytes\n  read (0 &lt;= n &lt;= len(p)) and any error encountered. Even if Read\n  returns n &lt; len(p), it may use all of p as scratch space during the\n  call. If some data is available but not len(p) bytes, Read\n  conventionally returns what is available instead of waiting for more.</p>\n  \n  <p>When Read encounters an error or end-of-file condition after\n  successfully reading n > 0 bytes, it returns the number of bytes read.\n  It may return the (non-nil) error from the same call or return the\n  error (and n == 0) from a subsequent call. An instance of this general\n  case is that a Reader returning a non-zero number of bytes at the end\n  of the input stream may return either err == EOF or err == nil. The\n  next Read should return 0, EOF.</p>\n  \n  <p>Callers should always process the n > 0 bytes returned before\n  considering the error err. Doing so correctly handles I/O errors that\n  happen after reading some bytes and also both of the allowed EOF\n  behaviors.</p>\n  \n  <p>Implementations of Read are discouraged from returning a zero byte\n  count with a nil error, except when len(p) == 0. Callers should treat\n  a return of 0 and nil as indicating that nothing happened; in\n  particular it does not indicate EOF.</p>\n  \n  <p>Implementations must not retain p.</p>\n</blockquote>\n\n<p>For example,</p>\n\n<p><code>readfile.go</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"io\"\n    \"os\"\n)\n\nfunc main() {\n    f, err := os.Open(\"readfile.go\")\n    if err != nil {\n        fmt.Println(err)\n        return\n    }\n    defer f.Close()\n    r := bufio.NewReader(f)\n\n    fileLen := int64(0)\n    buf := make([]byte, 0, 4*1024)\n    for {\n        n, err := r.Read(buf[:cap(buf)])\n        buf = buf[:n]\n        if n == 0 {\n            if err == nil {\n                continue\n            }\n            if err == io.EOF {\n                break\n            }\n            fmt.Println(err)\n            return\n        }\n\n        // Do something with buf\n        fileLen += int64(len(buf))\n\n        if err != nil &amp;&amp; err != io.EOF {\n            fmt.Println(err)\n            return\n        }\n    }\n    fmt.Println(\"file length:\", fileLen, \"bytes\")\n}\n</code></pre>\n\n<p>If <code>err != nil</code> then, unless the documentation says otherwise, assume that all other values are undefined. </p>\n"}], "owner": {"reputation": 1866, "user_id": 2449468, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/814a2fe06121017beb9d2c95426c7d36?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/2449468/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 2, "accepted_answer_id": 34959454, "answer_count": 1, "score": 2, "last_activity_date": 1453543994, "creation_date": 1453521255, "last_edit_date": 1453543994, "question_id": 34959422, "link": "https://stackoverflow.com/questions/34959422/in-go-when-a-function-returns-an-error-are-the-other-variables-always-its-zer", "title": "In Go, when a function returns an error, are the other variables always its &quot;zero&quot; value?", "body": "<p>I'm talking about the Go standard library:</p>\n\n<pre><code>output, err := abc.Xyz()\nif err != nil {\n    // by convention is `output` always its \"zero\" value?\n}\n</code></pre>\n"}, {"tags": ["xml", "go"], "comments": [{"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1453654652, "post_id": 34958199, "comment_id": 57686534, "body": "<a href=\"http://blog.davidsingleton.org/parsing-huge-xml-files-with-go/\" rel=\"nofollow noreferrer\">Parsing Huge XML Files With Go</a> may be of interest."}, {"owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "reply_to_user": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1453655109, "post_id": 34958199, "comment_id": 57686701, "body": "I&#39;m aware of it, but it&#39;s using the functionality that I&#39;m questioning. It always consumes everything enclosed within the node that you decode, thereby either returning all of it or skipping all of it. In either case, it traverses all of it and I want to avoid having to either do that unnecessarily or having to have to constantly seek back to the next child."}], "answers": [{"comments": [{"owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1453571483, "post_id": 34963595, "comment_id": 57663773, "body": "The principal difference being that I&#39;m providing a Buffer rather than a File?"}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "reply_to_user": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1453588307, "post_id": 34963595, "comment_id": 57669451, "body": "The principal difference is that you do not use <code>xml.Unmarshal()</code>, but <code>xml.Decoder.Token()</code> and <code>xml.Decoder.DecodeElement()</code>. So that for the stream part.The <code>xml.Decoder.DecodeElement()</code>method actually identifies if an end tag of a non-sub element is found. Simply remove a <code>&lt;&#47;chapter&gt;</code> on the playground, and you will see. Can the remainder be quite big? Yes. But you leverage that by doing stream parsing, in which the xml read so far is not held in RAM, and you limit what is kept in RAM to the parent element of the unclosed tag. It doesn&#39;t get any better."}, {"owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1453592343, "post_id": 34963595, "comment_id": 57670625, "body": "Yeah, but DecodeElement actually calls the unmarshal and the unmarshal traverses all of the way to the matching closing tag. I know that it&#39;s not in memory, but it&#39;s also wasteful to read more than the current tag (I want to process one tag at a time rather than having to seek back constantly). Am I missing something in your explanation?"}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "reply_to_user": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1453593361, "post_id": 34963595, "comment_id": 57670923, "body": "So how would you be able to process a tag unless it is read? you could read byte-wise. What you miss is that <code>Decoder.unmarshal</code> actually notices a runaway tag \u2013 it loads at most until the <b>parent</b> is closed. As you can see in the playground example the parser exactly does what you want: each <code>&lt;chapter&gt;</code>is parsed individually."}, {"owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 1, "creation_date": 1453593637, "post_id": 34963595, "comment_id": 57671007, "body": "I mean that DecodeElement will not only parse through the current tag but then skip everything between the current tag and its closing tag. So, if I want to get the information from the current tag, I&#39;ll not be able to get the information for any of the children. It seems like there&#39;s a limited amount of flexibility in the built-in encoding/xml package. I can&#39;t just use it as a tag-by-tag tokenizer."}, {"owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "reply_to_user": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "edited": false, "score": 0, "creation_date": 1453634392, "post_id": 34963595, "comment_id": 57679677, "body": "Yes, you can: recursion. Or you can unmashal the <i>current</i> tag and iterate."}], "tags": [], "owner": {"reputation": 17024, "user_id": 1296707, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cc4319dbdd4adbb6d25f1eb2309eec20?s=128&d=identicon&r=PG", "display_name": "Markus W Mahlberg", "link": "https://stackoverflow.com/users/1296707/markus-w-mahlberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1453553881, "last_edit_date": 1453553881, "creation_date": 1453552951, "answer_id": 34963595, "question_id": 34958199, "link": "https://stackoverflow.com/questions/34958199/go-decoding-only-one-xml-node-at-a-time/34963595#34963595", "title": "Go: Decoding only one XML node at a time", "body": "<p>What you describe is called XML stream parsing as it is done by any SAX parser, for example. Good news: <code>encoding/xml</code> supports that, albeit it is a <em>bit</em> hidden.</p>\n\n<p>What you actually have to do is to create an instance of <code>xml.Decoder</code>, passing an <code>io.Reader</code>. Then you will use <code>Decoder.Token()</code> to read the input stream until the next <strong>valid</strong> xml token found. From there, you can decide what to do next.</p>\n\n<p>Here is a little example <a href=\"https://gist.github.com/mwmahlberg/1da54ebfacaaad54853a\" rel=\"nofollow\">also available as gist</a>, or you can <kbd><a href=\"http://play.golang.org/p/_Fg1zdC-J_\" rel=\"nofollow\">Run it on PlayGround</a></kbd>:</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/xml\"\n    \"fmt\"\n)\n\nconst (\n    book = `&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;book&gt;\n  &lt;preface&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/preface&gt;\n  &lt;chapter num=\"1\" title=\"Foo\"&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/chapter&gt;\n  &lt;chapter num=\"2\" title=\"Bar\"&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/chapter&gt;\n&lt;/book&gt;`\n)\n\ntype Chapter struct {\n    Num     int    `xml:\"num,attr\"`\n    Title   string `xml:\"title,attr\"`\n    Content string `xml:\",chardata\"`\n}\n\nfunc main() {\n\n    // We emulate a file or network stream\n    b := bytes.NewBufferString(book)\n\n    // And set up a decoder\n    d := xml.NewDecoder(b)\n\n    for {\n\n        // We look for the next token\n        // Note that this only reads until the next positively identified\n        // XML token in the stream\n        t, err := d.Token()\n\n        if err != nil  {\n            break\n        }\n\n        switch et := t.(type) {\n\n        case xml.StartElement:\n            // We now have to inspect wether we are interested in the element\n            // otherwise we will advance\n            if et.Name.Local == \"chapter\" {\n                // Most often/likely element first\n\n                c := &amp;Chapter{}\n\n                // We decode the element into(automagically advancing the stream)\n                // If no matching token is found, there will be an error\n                // Note the search only happens within the parent.\n                if err := d.DecodeElement(&amp;c, &amp;et); err != nil {\n                    panic(err)\n                }\n\n                // We have found what we are interested in, so we print it\n                fmt.Printf(\"%d: %s\\n\", c.Num, c.Title)\n\n            } else if et.Name.Local == \"book\" {\n                fmt.Println(\"Book begins!\")\n            }\n\n        case xml.EndElement:\n\n            if et.Name.Local != \"book\" {\n                continue\n            }\n\n            fmt.Println(\"Finished processing book!\")\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8363, "user_id": 706421, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/bb7e85832e0110214043a8726ad70a76?s=128&d=identicon&r=PG", "display_name": "Dustin Oprea", "link": "https://stackoverflow.com/users/706421/dustin-oprea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1453553881, "creation_date": 1453508939, "last_edit_date": 1453541505, "question_id": 34958199, "link": "https://stackoverflow.com/questions/34958199/go-decoding-only-one-xml-node-at-a-time", "title": "Go: Decoding only one XML node at a time", "body": "<p>Looking through the sourcecode for encoding/xml package, all of the unmarshaling logic (which decodes the actual XML nodes and types them) is in unmarshal and the only way to invoke this is essentially by calling DecodeElement. However, the unmarshaling logic also inherently searches-out the next EndElement. The predominant reason for this seems to be validation. However, this seems to represent a major design flaw to me: What if I have a massive XML file, I am sufficiently confident in its structure, and I'd just like to decode a single node at a time so that I can efficiently filter through the data on-the-fly? The RawToken() call can be used to get the current tag, which is great, but, obviously, when you call DecodeElement() on it, there's an error when the inevitable unmarshal() call apparently starts running into nodes in a way that it perceives as unbalanced.</p>\n\n<p>It seems theoretically possible to encounter a token that I'd like to decode, capture the offset, decode the element, seek back to the previous position, and loop, but that'd still result in a massive amount of unnecessary processing.</p>\n\n<p>Is there no way to just parse one node at a time?</p>\n"}, {"tags": ["sorting", "dictionary", "struct", "go"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1453508886, "post_id": 34958036, "comment_id": 57647986, "body": "It&#39;s unclear what &quot;sorting a map&quot; would mean. What are you trying to do afterwards? Maps are orderless, so they&#39;re not sortable in the traditional sense."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453508912, "post_id": 34958036, "comment_id": 57647993, "body": "The <a href=\"https://golang.org/pkg/sort/\" rel=\"nofollow noreferrer\">sort package</a> has multiple examples. Do you have a question about using Sort?"}], "answers": [{"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1453510369, "last_edit_date": 1453510369, "creation_date": 1453509194, "answer_id": 34958236, "question_id": 34958036, "link": "https://stackoverflow.com/questions/34958036/sorting-a-mapstringstruct/34958236#34958236", "title": "Sorting a map[string][]struct{}", "body": "<p>If the goal is to sort each slice in <code>graph</code> by cost, you only need to implement <a href=\"https://golang.org/pkg/sort/#Interface\" rel=\"nofollow\"><code>sort.Interface</code></a> on <code>[]Graph</code>, then use a for loop to loop through the values.</p>\n\n<pre><code>type ByCost []Graph\n\nfunc (gs *ByCost) Len() int { return len(gs) }\nfunc (gs *ByCost) Less(i, j int) bool { return gs[i].cost &lt; gs[j].cost }\nfunc (gs *ByCost) Swap(i, j int) { gs[i], gs[j] = gs[j], gs[i] }\n\nfor _, v := range graph {\n    sort.Sort(ByCost(v))\n</code></pre>\n\n<p>If you're trying to iterate through the map in sorted order by the <em>sum</em> of the costs in the <code>[]Graph</code>, that's going to be much less clean.</p>\n\n<pre><code>type GraphKeyPairs struct {\n    key string\n    value []Graph\n}\n\n// Build a slice to store our map values\nsortedGraph := make([]GraphKeyPairs, 0, len(graph))\nfor k,v := range graph {\n    // O(n)\n    gkp := GraphKeyPairs{key: k, value: v}\n    sortedGraph = append(sortedGraph, gkp)\n}\n\ntype BySummedCost []GraphKeyPairs\n\nfunc (gkp *BySummedCost) Len() int { return len(gkp) }\nfunc (gkp *BySummedCost) Swap(i, j int) { gkp[i], gkp[j] = gkp[j], gkp[i] }\n\nfunc (gkp *BySummedCost) Less(i, j int) bool {\n    // O(2n)\n    iCost, jCost := 0, 0\n    for _, v := range gkp[i].value {\n        iCost += v.cost\n    }\n    for _, v := range gkp[j].value {\n        jCost += v.cost\n    }\n    return iCost &lt; jCost\n}\n\nsort.Sort(BySummedCost(sortedGraph))\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 4851387, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/92ef9e7d030494e2e142ce9d7a1f436b?s=128&d=identicon&r=PG&f=1", "display_name": "abdel", "link": "https://stackoverflow.com/users/4851387/abdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1453538061, "accepted_answer_id": 34958236, "answer_count": 1, "score": -2, "last_activity_date": 1453510369, "creation_date": 1453507772, "last_edit_date": 1453509925, "question_id": 34958036, "link": "https://stackoverflow.com/questions/34958036/sorting-a-mapstringstruct", "closed_reason": "Needs more focus", "title": "Sorting a map[string][]struct{}", "body": "<p>I would likde to sort this map by <strong>cost</strong> </p>\n\n<pre><code>type Graph struct {\n    vertice string\n    cost    float64\n}\n\nvar graph map[string][]Graph\n</code></pre>\n\n<p>In the order of lowest to highest  </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["go", "interface"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 3, "creation_date": 1453498961, "post_id": 34956268, "comment_id": 57644469, "body": "<code>Packer</code> and <code>interface { Close() error; Put(io.Reader) (int, error) }</code> are 2 distinct types. Why do you need the anonymous interface in the Store definition?"}, {"owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453544300, "post_id": 34956268, "comment_id": 57655066, "body": "<a href=\"https://play.golang.org/p/apbRi49DVH\" rel=\"nofollow noreferrer\">play.golang.org/p/apbRi49DVH</a>"}, {"owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453544547, "post_id": 34956268, "comment_id": 57655127, "body": "@JimB: <code>type Packer interface { Close() error; Put(io.Reader) (int, error) }</code> looks the same as <code>interface { Close() error; Put(io.Reader) (int, error) }</code> to me? The one is just &quot;anonymous&quot; and the other has a name."}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 1, "creation_date": 1453556736, "post_id": 34956268, "comment_id": 57658909, "body": "<code>type A int</code> and <code>type B int</code> look the same too, but are distinct types as far as Go&#39;s type system is concerned."}, {"owner": {"reputation": 1615, "user_id": 1376205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff8ba613f2dc50cc30e7f3af3e2914?s=128&d=identicon&r=PG", "display_name": "Will C", "link": "https://stackoverflow.com/users/1376205/will-c"}, "edited": false, "score": 0, "creation_date": 1453600800, "post_id": 34956268, "comment_id": 57672581, "body": "@Dave Just because it has the same definition doesn&#39;t make it the same interface. Thats a lot like saying that two instances of objects are the same if all their values are the same which they&#39;re not because they have different memory addresses."}, {"owner": {"reputation": 1615, "user_id": 1376205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ff8ba613f2dc50cc30e7f3af3e2914?s=128&d=identicon&r=PG", "display_name": "Will C", "link": "https://stackoverflow.com/users/1376205/will-c"}, "edited": false, "score": 2, "creation_date": 1453600888, "post_id": 34956268, "comment_id": 57672599, "body": "There&#39;s quite a few questions to how you&#39;re writing Go. First off, why have the nested interface? Second, why not just import the package that supplies the <code>Packer</code> interface and embed the <code>Packer</code> interface in the <code>Store</code> interface? Third, why the anonymous interface to substitute the <code>Packer</code> interface?"}], "owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1491, "favorite_count": 3, "answer_count": 0, "score": 2, "last_activity_date": 1453498200, "creation_date": 1453498200, "question_id": 34956268, "link": "https://stackoverflow.com/questions/34956268/nested-interfaces-in-go", "title": "Nested interfaces in Go", "body": "<p>I have an interface type in Go, which defines some methods, with their own nested interfaces. Something like this:</p>\n\n<pre><code>type Store interface {\n    Pack(key string) interface {\n        Put(r io.Reader) (int, error)\n        io.Closer\n    }\n    // ... other stuff ...\n}\n</code></pre>\n\n<p>Now, I define another interface, let's call it a Packer, which matches what the Pack method returns, like this:</p>\n\n<pre><code>type Packer interface {\n    Put(r io.Reader) (int, error)\n    io.Closer\n}\n</code></pre>\n\n<p>I can then implement two kinds of Stores. One with a Pack method that returns a Packer, and another with a Pack that returns the explicit interface type:</p>\n\n<pre><code>func (s *storeTypeA) Pack(key string) Packer { ... }\n\nfunc (s *storeTypeB) Pack(key string) interface {\n    Put(r io.Reader) (int, error)\n    io.Closer\n} { ... }\n</code></pre>\n\n<p>There's only one problem now. <code>storeTypeA</code> doesn't actually conform to the Store interface anymore. If I try to pass it off as a Store, I get this error:</p>\n\n<pre><code>prog.go: cannot use storeTypeA literal (type *storeTypeA) as type Store in assignment:\n    *storeTypeA does not implement Store (wrong type for Pack method)\n        have Pack(string) Packer\n        want Pack(string) interface { Close() error; Put(io.Reader) (int, error) }\n</code></pre>\n\n<p>What I don't understand though, is that the Packer interface <em>is</em> exactly equal to <code>interface { Close() error; Put(io.Reader) (int, error) }</code>. So why the error?</p>\n\n<p>Any ideas how to work around this?</p>\n\n<p>I guess the obvious thing would be to just not have the nested interfaces, but I'm kind of curious why this should be a problem. I'm doing it this way because I want to be able to define the interface <em>outside</em> of the package where I'm providing the Store itself.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453498347, "post_id": 34956202, "comment_id": 57644158, "body": "What version of go are you using that&#39;s giving you this error?"}], "answers": [{"comments": [{"owner": {"reputation": 1152, "user_id": 4786944, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb18930f3400e1851acfe1239c113816?s=128&d=identicon&r=PG", "display_name": "CallMeLoki", "link": "https://stackoverflow.com/users/4786944/callmeloki"}, "edited": false, "score": 0, "creation_date": 1529944160, "post_id": 34956254, "comment_id": 89048388, "body": "hi, can you do me a favor and delete your answer ?"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 3, "last_activity_date": 1453498136, "creation_date": 1453498136, "answer_id": 34956254, "question_id": 34956202, "link": "https://stackoverflow.com/questions/34956202/go-syntax-error-unbalanced-braces/34956254#34956254", "title": "Go syntax error, unbalanced braces", "body": "<p>There's an unexpected <code>}</code>, because you're missing a comma on the end of the <code>friends</code> line</p>\n\n<pre><code>friends: []*Friend{&amp;f1, &amp;f2},\n</code></pre>\n\n<p>Always <code>go fmt</code> your code. (or use <code>goimports</code>). It will give you an error with the exact line and column:</p>\n\n<blockquote>\n  <p>missing ',' before newline in composite literal</p>\n</blockquote>\n"}], "owner": {"reputation": 1152, "user_id": 4786944, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb18930f3400e1851acfe1239c113816?s=128&d=identicon&r=PG", "display_name": "CallMeLoki", "link": "https://stackoverflow.com/users/4786944/callmeloki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 34956254, "answer_count": 1, "score": 1, "last_activity_date": 1453502318, "creation_date": 1453497929, "last_edit_date": 1453502318, "question_id": 34956202, "link": "https://stackoverflow.com/questions/34956202/go-syntax-error-unbalanced-braces", "title": "Go syntax error, unbalanced braces", "body": "<p>When I'm trying to run my app it says that there is an unexpected <code>}</code> in line 32, I have counted <code>{</code> and <code>}</code>, seems they are even but when I remove f1, f2 and p it works well. How can I fix this?</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n    \"html/template\"\n)\n\ntype friend struct{\n    fname   string\n}\n\ntype person struct{\n    username    string\n    emails      []string\n    friends     []*friend\n}\n\nfunc home(w http.ResponseWriter, r *http.Request){\n    f1 := friend{fname: \"minux.ma\"}\n    f2 := friend{fname: \"xushiwei\"}\n    p := Person{\n        userName: \"Astaxie\",\n        emails: []string{\"astaxie@beego.me\", \"astaxie@gmail.com\"},\n        friends: []*Friend{&amp;f1, &amp;f2}\n    }\n\n    t, err := template.ParseFiles(\"template.gtpl\")\n    if err != nil{\n        fmt.Println(err)\n    }\n\n    t.Execute(w, nil)\n}\n\nfunc main(){\n\n    http.HandleFunc(\"/\", home)\n    err := http.ListenAndServe(\":8000\", nil)\n    if err != nil{\n        log.Fatal(\"listen and serve:\", err)\n    }\n}\n</code></pre>\n"}, {"tags": ["go", "mgo", "json-api"], "comments": [{"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1453506478, "post_id": 34956121, "comment_id": 57647393, "body": "I have not used <i>jsonapi</i> before, but having a quick glance, it seems <b>Id</b> field is an <b>int</b> field, which I guess the bson &quot;_id&quot; is created in mongodb but not used in the struct"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 3173409, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d6e363f7845b9b2ab6efbf756c53749d?s=128&d=identicon&r=PG&f=1", "display_name": "Rudys", "link": "https://stackoverflow.com/users/3173409/rudys"}, "is_accepted": true, "score": 2, "last_activity_date": 1461925683, "creation_date": 1461925683, "answer_id": 36935913, "question_id": 34956121, "link": "https://stackoverflow.com/questions/34956121/golang-jsonapi-requires-string-or-int-but-mongo-needs-bson-objectid/36935913#36935913", "title": "Golang jsonapi requires string or int but mongo needs bson.ObjectId", "body": "<p>Create one more struct of Blog like below</p>\n\n<pre><code>type BlogPostVO struct {\nId string `jsonapi:\"primary,posts\" bson:\"_id,omitempty\"`\nAuthor string `jsonapi:\"attr,author\"`\nCreatedDate time.Time `jsonapi:\"attr,created_date\"`\nBody string `jsonapi:\"attr,body\"`\nTitle string `jsonapi:\"attr,title\"`\n</code></pre>\n\n<p>}</p>\n\n<p>and use the below function in your controller to parse</p>\n\n<pre><code>func parseToVO(blog *models.Blog) *models.BlogVO {\n  bolgVO := models.BlogVO{}\n   bolgVO.Id = blog.Id.Hex()\n   bolgVO.Author  = blog.Author \n  bolgVO.CreatedDate = blog.CreatedDate\n  bolgVO.Body = blog.Body\n  bolgVO.Title = blog.Title\n  return &amp;models.Blog\n}\n</code></pre>\n\n<p>this worked for me</p>\n"}], "owner": {"reputation": 137, "user_id": 2132924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c87fb357586a72d52e6dfa8b5ec789e4?s=128&d=identicon&r=PG", "display_name": "noahtkeller", "link": "https://stackoverflow.com/users/2132924/noahtkeller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 36935913, "answer_count": 1, "score": 0, "last_activity_date": 1461925683, "creation_date": 1453497561, "question_id": 34956121, "link": "https://stackoverflow.com/questions/34956121/golang-jsonapi-requires-string-or-int-but-mongo-needs-bson-objectid", "title": "Golang jsonapi requires string or int but mongo needs bson.ObjectId", "body": "<p>Playing with go and the following packages:</p>\n\n<pre><code>github.com/julienschmidt/httprouter  \ngithub.com/shwoodard/jsonapi  \ngopkg.in/mgo.v2/bson\n</code></pre>\n\n<p>I have the following structs:</p>\n\n<pre><code>type Blog struct{\n    Posts []interface{}\n}\n\ntype BlogPost struct {\n    Id bson.ObjectId `jsonapi:\"primary,posts\" bson:\"_id,omitempty\"`\n    Author string `jsonapi:\"attr,author\"`\n    CreatedDate time.Time `jsonapi:\"attr,created_date\"`\n    Body string `jsonapi:\"attr,body\"`\n    Title string `jsonapi:\"attr,title\"`\n}\n</code></pre>\n\n<p>and this router handler:</p>\n\n<pre><code>func (blog *Blog) GetAll(w http.ResponseWriter, r *http.Request, ps httprouter.Params) {\n    if err := jsonapi.MarshalManyPayload(w, blog.Posts); err != nil {\n        http.Error(w, err.Error(), 500)\n    }\n}\n</code></pre>\n\n<p>When the handler function is called it spits out the error:</p>\n\n<pre><code>id should be either string or int\n</code></pre>\n\n<p>How should this struct look so I can use it with mgo and jsonapi?</p>\n"}, {"tags": ["oop", "go"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1453492650, "post_id": 34954793, "comment_id": 57641319, "body": "use a pointer method and you&#39;re good."}, {"owner": {"reputation": 1, "user_id": 5556204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6148a35865d5734fb5dffc4a60663d6a?s=128&d=identicon&r=PG&f=1", "display_name": "over300laughs", "link": "https://stackoverflow.com/users/5556204/over300laughs"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1453493850, "post_id": 34954793, "comment_id": 57641964, "body": "Yeah that totally worked. Thanks!"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1453494479, "post_id": 34954793, "comment_id": 57642264, "body": "BTW you do know that you are emulating what <code>append</code> does implicitly, right?"}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1453495187, "post_id": 34955254, "comment_id": 57642592, "body": "You do realize that <code>append</code> does this already, and more efficiently?"}, {"owner": {"reputation": 1, "user_id": 5556204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6148a35865d5734fb5dffc4a60663d6a?s=128&d=identicon&r=PG&f=1", "display_name": "over300laughs", "link": "https://stackoverflow.com/users/5556204/over300laughs"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453499532, "post_id": 34955254, "comment_id": 57644745, "body": "No I didn&#39;t. I&#39;m very new to Go and must have missed it in the docs. Thank you. I&#39;m always trying to make my code better. :)"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453502871, "post_id": 34955254, "comment_id": 57646074, "body": "Since you&#39;ve already missed some basics like pointers and slice handling, I would suggest re-running through the docs. Also, regarding your first sentence, no one really strives to make their Go application &quot;more object oriented&quot; (whatever that might mean). You can bundle data and behavior with methods, and use interfaces for polymorphism, but there&#39;s no OO requirement to fulfill in Go."}], "tags": [], "owner": {"reputation": 1, "user_id": 5556204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6148a35865d5734fb5dffc4a60663d6a?s=128&d=identicon&r=PG&f=1", "display_name": "over300laughs", "link": "https://stackoverflow.com/users/5556204/over300laughs"}, "is_accepted": true, "score": -1, "last_activity_date": 1453494000, "creation_date": 1453494000, "answer_id": 34955254, "question_id": 34954793, "link": "https://stackoverflow.com/questions/34954793/how-to-make-nested-object-oriented-function-calls-in-go/34955254#34955254", "title": "How to make nested object oriented function calls in GO", "body": "<p>I just needed to do this:</p>\n\n<pre><code>//groups is of type Groups\n//AllGroups is of type []Group\ngroups.AllGroups.GrowGroupsArray()\n\nfunc (g *Groups) GrowGroupsArray() { //&lt;- Make this a pointer method\n    newSlice := make([]Group, len(g), 2*cap(g)+1)\n    copy(newSlice, g)\n    g.AllGroups = newSlice\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5556204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6148a35865d5734fb5dffc4a60663d6a?s=128&d=identicon&r=PG&f=1", "display_name": "over300laughs", "link": "https://stackoverflow.com/users/5556204/over300laughs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 34955254, "answer_count": 1, "score": -2, "last_activity_date": 1453494000, "creation_date": 1453492286, "question_id": 34954793, "link": "https://stackoverflow.com/questions/34954793/how-to-make-nested-object-oriented-function-calls-in-go", "title": "How to make nested object oriented function calls in GO", "body": "<p>I'm trying to make my Go application more object oriented. Right now I have the following call:</p>\n\n<pre><code>groups.AllGroups = GrowGroupsArray(groups.AllGroups)\n</code></pre>\n\n<p>Which calls:</p>\n\n<pre><code>func GrowGroupsArray(g []Group) []Group {\n    newSlice := make([]Group, len(g), 2*cap(g)+1)\n    copy(newSlice, g)\n    g = newSlice\n    return g\n}\n</code></pre>\n\n<p>This technically works but I would rather this:</p>\n\n<pre><code>//groups is of type Groups\n//AllGroups is of type []Group\ngroups.AllGroups.GrowGroupsArray()\n\nfunc (g Groups) GrowGroupsArray() {\n    newSlice := make([]Group, len(g), 2*cap(g)+1)\n    copy(newSlice, g)\n    g.AllGroups = newSlice\n}\n</code></pre>\n\n<p>This compiles fine but I get a runtime panic because nothing is being saved to the object when the function is completed (out of scope). I've encountered the exact same issue in several places where the first example works but the second will not save the new array to my object. The old array persists after the function has been called. Any help would be greatly appreciated. </p>\n"}, {"tags": ["parsing", "go"], "comments": [{"owner": {"reputation": 27429, "user_id": 497208, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f53ec83b7a4a74ef31eabd1d86b716e0?s=128&d=identicon&r=PG", "display_name": "Jakub M.", "link": "https://stackoverflow.com/users/497208/jakub-m"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 0, "creation_date": 1453491365, "post_id": 34954520, "comment_id": 57640681, "body": "@DenysS&#233;guret: not sure. It is not really about golang but more about parsers and grammar."}, {"owner": {"reputation": 1502, "user_id": 1014587, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/990x8.jpg?s=128&g=1", "display_name": "Mast", "link": "https://stackoverflow.com/users/1014587/mast"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 2, "creation_date": 1453491460, "post_id": 34954520, "comment_id": 57640735, "body": "@DenysS&#233;guret If it&#39;s on-topic here, let it stick here. No point in moving something if it&#39;s on-topic here as well."}, {"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "reply_to_user": {"reputation": 332764, "user_id": 263525, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ec289925069b35f18f1230b90dc654e5?s=128&d=identicon&r=PG", "display_name": "Denys S&#233;guret", "link": "https://stackoverflow.com/users/263525/denys-s%c3%a9guret"}, "edited": false, "score": 1, "creation_date": 1453491626, "post_id": 34954520, "comment_id": 57640818, "body": "@DenysS&#233;guret There is no code in this question to review."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453500122, "post_id": 34954520, "comment_id": 57645011, "body": "As a regular expression, that language is <code>a?(ba)*b?</code> but I don&#39;t think that helps you parse it with an RDP. (Yes, it is also <code>b?(ab)*a?</code> Curiously, the two regular expressions are equivalent.)"}], "answers": [{"comments": [{"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 0, "creation_date": 1453492275, "post_id": 34954618, "comment_id": 57641128, "body": "Would be better written as <code>A ::= &quot;a&quot; B?</code>"}, {"owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "reply_to_user": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 0, "creation_date": 1453492887, "post_id": 34954618, "comment_id": 57641459, "body": "If I remove the extra ` | &quot;a&quot;` case, how would it terminate?"}, {"owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "reply_to_user": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 0, "creation_date": 1453492934, "post_id": 34954618, "comment_id": 57641490, "body": "(and why doesn&#39;t ` | &quot;a&quot;` render as a code snippet?)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1453500187, "post_id": 34954618, "comment_id": 57645029, "body": "@Filip: In a comment, ` is only special if not followed by a space."}, {"owner": {"reputation": 27429, "user_id": 497208, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f53ec83b7a4a74ef31eabd1d86b716e0?s=128&d=identicon&r=PG", "display_name": "Jakub M.", "link": "https://stackoverflow.com/users/497208/jakub-m"}, "edited": false, "score": 0, "creation_date": 1453541611, "post_id": 34954618, "comment_id": 57654343, "body": "@FilipHaglund: Your answer in my syntax and in BNF both works, I edited my post where I translate your BNF to my syntax"}], "tags": [], "owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "is_accepted": true, "score": 3, "last_activity_date": 1453491906, "last_edit_date": 1453491906, "creation_date": 1453491603, "answer_id": 34954618, "question_id": 34954520, "link": "https://stackoverflow.com/questions/34954520/succinct-grammar-to-parse-strings-of-alternating-characters-like-ababa-or-bab/34954618#34954618", "title": "Succinct grammar to parse strings of alternating characters like &quot;ababa&quot; or &quot;baba&quot;", "body": "<p>The BNF grammar you have is this:</p>\n\n<pre><code>expr ::= A | B\nA ::= \"a\" B | \"a\"\nB ::= \"b\" A | \"b\"\n</code></pre>\n\n<p>which I think translates to this using your syntax:</p>\n\n<pre><code>\"expr\": Or(Ref(\"A\"), Ref(\"B\")),\n\"A\": And(\n    a,\n    Optional(Ref(\"B\"))),\n\"B\": And(\n    b,\n    Optional(Ref(\"A\")))\n</code></pre>\n\n<p>Note that it is important to check terminals (<code>\"a\"</code>, <code>\"b\"</code>) before non-terminals (<code>Ref(x)</code>), or you'll get an infinite loop. It would always try to see if it could match another <code>A</code> or <code>B</code> to the end of the string, and then another, and another, causing a never ending recursion.</p>\n"}], "owner": {"reputation": 27429, "user_id": 497208, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f53ec83b7a4a74ef31eabd1d86b716e0?s=128&d=identicon&r=PG", "display_name": "Jakub M.", "link": "https://stackoverflow.com/users/497208/jakub-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 34954618, "answer_count": 1, "score": 3, "last_activity_date": 1453541556, "creation_date": 1453491165, "last_edit_date": 1495540751, "question_id": 34954520, "link": "https://stackoverflow.com/questions/34954520/succinct-grammar-to-parse-strings-of-alternating-characters-like-ababa-or-bab", "title": "Succinct grammar to parse strings of alternating characters like &quot;ababa&quot; or &quot;baba&quot;", "body": "<p>I am working on a toy <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">parser</a> in <a href=\"https://en.wikipedia.org/wiki/Go_(programming_language)\" rel=\"nofollow noreferrer\">golang</a> just to learn the language. I added a test case with grammar covering the following cases:</p>\n\n<pre><code>Valid:\na, ab, aba, ababababababa, ababababab\nb, ba, bab, babababababab, bababababa\n\nInvalid:\nabb, baa\n</code></pre>\n\n<p><code>a</code> is always followed by <code>b</code> and vice versa.</p>\n\n<p>Now the grammar in my parser looks like that (I omit the surrounding code for sake of brevity):</p>\n\n<pre><code>    \"expr\": Or(Ref(\"A\"), Ref(\"B\")),\n    \"A\": And(\n        a,\n        Optional(\n            And(\n                b,\n                Optional(Ref(\"A\"))))),\n    \"B\": And(\n        b,\n        Optional(Ref(\"A\")))\n</code></pre>\n\n<p>Where</p>\n\n<pre><code>a - exact match for \"a\" character\nb - exact match for \"b\" character\n\"A\", \"B\", \"expr\" - names of the parts of the grammar that can be referred\n                   later with Ref(\"A\")\nAnd      - consume sequence of expressions\nOr       - consume any of the expressions\nRef      - refer to other expression (allows recursion)\nOptional - make the expression non-obligatory\n</code></pre>\n\n<p>I guess it is not the most succinct way to describe this grammar. How to make it more compact?</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/847439/why-cant-a-recursive-descent-parser-handle-left-recursion\">Why can&#39;t a recursive-descent parser handle left recursion</a></li>\n</ul>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>The BNF <a href=\"https://stackoverflow.com/a/34954618/497208\">answer from Filip</a> can be written in my syntax as:</p>\n\n<pre><code>    \"expr\": Or(Ref(\"A\"), Ref(\"B\")),\n    \"A\":    Or(And(a, Ref(\"B\")), a),\n    \"B\":    Or(And(b, Ref(\"A\")), b)\n</code></pre>\n"}, {"tags": ["go", "interface", "factory-method"], "comments": [{"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1453501502, "post_id": 34954212, "comment_id": 57645542, "body": "There is no need to program Java in Go."}, {"owner": {"reputation": 6080, "user_id": 73894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35c1996874453ddea075285853b95116?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/73894/adam"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1453502059, "post_id": 34954212, "comment_id": 57645734, "body": "@Volker what would an appropriate design pattern be in Go?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 1, "creation_date": 1453544616, "post_id": 34954212, "comment_id": 57655157, "body": "That is a strange question. Design patterns help implementing stuff which cannot be naturally expressed in a language. Why do you think you need a <code>FooFactory</code>? Why do you need to wrap a plain, simple, understandable <code>NewRealFoo</code> twice (in FooConstructor and FooFactory)? Most probably there is <b>no</b> <b>need</b> for it; not not and not in the future. E.g. testing works just fine, even without factories producing constructors."}], "answers": [{"comments": [{"owner": {"reputation": 6080, "user_id": 73894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35c1996874453ddea075285853b95116?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/73894/adam"}, "edited": false, "score": 0, "creation_date": 1453739583, "post_id": 34954413, "comment_id": 57723075, "body": "These are very good suggestions, but I am trying to avoid type casting because then I would need to know which concrete implementation was returned from the factory and thus defeats the purpose of the factory method. I think my problem is that I&#39;m trying to access a field, which the interface knows nothing about. If it&#39;s a field present on all implementation, I should wrap it in a method, like <code>f.Name()</code> and add that to the interface."}, {"owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "reply_to_user": {"reputation": 6080, "user_id": 73894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35c1996874453ddea075285853b95116?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/73894/adam"}, "edited": false, "score": 0, "creation_date": 1453742198, "post_id": 34954413, "comment_id": 57724806, "body": "You already have that in <code>foo.Bar()</code>. What part of your question did I not answer?"}], "tags": [], "owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "is_accepted": false, "score": 2, "last_activity_date": 1453491271, "last_edit_date": 1453491271, "creation_date": 1453490742, "answer_id": 34954413, "question_id": 34954212, "link": "https://stackoverflow.com/questions/34954212/go-factory-method-returns-type-interface-not-the-struct-which-implements-the-in/34954413#34954413", "title": "Go factory method returns type interface, not the struct which implements the interface", "body": "<p>You are actually returning the <code>RealFoo</code> object, but as an implementation of <code>Foo</code>.</p>\n\n<p>To get the field of the <code>RealFoo</code> struct, use a type assertion: </p>\n\n<pre><code>f.(RealFoo).Name\n</code></pre>\n\n<p>or, to avoid panic if it's not a <code>RealFoo</code>:</p>\n\n<pre><code>if realFoo, ok := f.(RealFoo); ok {\n    _ := realFoo.Name\n}\n</code></pre>\n\n<p>or a switch over all or some of the possible types of <code>Foo</code></p>\n\n<pre><code>switch rf := f.(type) {\ncase realFoo:\n    _ := rf.Name // rf is a realFoo\ncase unrealFoo:\n    _ := rf.ImaginaryName // rf is an unrealFoo\ncase surrealFoo:\n    _ := rf.SurrealName // rf is a surrealFoo\ndefault: \n    // rf is none of the above types\n}\n</code></pre>\n\n<p>You could also return a <code>RealFoo</code> from <code>NewRealFoo</code>, instead of a <code>Foo</code>, if you are willing to modify your factory constructor. It will still be valid to use anywhere a <code>Foo</code> is expected, since it implements that interface. That's what you are doing that in <code>NewRealFoo</code>, when returning a <code>RealFoo</code> in a function returning <code>Foo</code>.</p>\n\n<pre><code>func NewRealFoo(name string) RealFoo {\n    return &amp;RealFoo{Name: name}\n}\n</code></pre>\n"}], "owner": {"reputation": 6080, "user_id": 73894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/35c1996874453ddea075285853b95116?s=128&d=identicon&r=PG", "display_name": "adam", "link": "https://stackoverflow.com/users/73894/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453656082, "creation_date": 1453490053, "last_edit_date": 1453656082, "question_id": 34954212, "link": "https://stackoverflow.com/questions/34954212/go-factory-method-returns-type-interface-not-the-struct-which-implements-the-in", "title": "Go factory method returns type interface, not the struct which implements the interface", "body": "<p>I am trying to create a factory method that returns a constructor for a struct that implements some interface.</p>\n\n<p>Here is some sample code that illustrates the pattern I'm using.</p>\n\n<pre><code>// Generic Interface\ntype Foo interface {\n    Bar() string\n}\n\ntype FooConstructor func(name string) Foo\n\n// A struct that implements Foo\ntype RealFoo struct {\n    Name string\n}\n\nfunc (f *RealFoo) Bar() string {\n    return f.Name\n}\n\nfunc NewRealFoo(name string) Foo {\n    return &amp;RealFoo{Name: name}\n}\n\n// Factory method to return some FooConstructor\nfunc FooFactory() FooConstructor {\n    // based on some logic, return some Foo constructor\n    return NewRealFoo\n}\n\nfunc main() {\n    ff := FooFactory()\n    f := ff(\"baz\")\n    fmt.Println(f.Bar())\n    fmt.Println(f.Name)\n}\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/0RzXlIGAs8\" rel=\"nofollow\">http://play.golang.org/p/0RzXlIGAs8</a></p>\n\n<p>When I try and access a field on my struct that is not defined in the interface, I get an error:</p>\n\n<p><code>f.Name undefined (type Foo has no field or method Name)</code></p>\n\n<p>I believe the problem is that my constructor, <code>func NewRealFoo(name string) Foo</code> has the interface as the return type, instead of <code>*RealFoo</code>. But in order to use it as a type <code>FooConstructor</code> for the factory method, the return type must be the <code>Foo</code> interface.</p>\n\n<p>How can I fix my code so that I can access the field <code>f.Name</code>?</p>\n"}, {"tags": ["string", "go", "integer"], "comments": [{"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 1, "creation_date": 1453486438, "post_id": 34953063, "comment_id": 57638227, "body": "What is the expected result of this supposed operation? 5 or 53 (an US-ASCII code for the character &quot;5&quot;)? I&#39;m asking because &quot;extract a character ... and operate with it as a number&quot; can be interpreted as if you&#39;d like to get the character <i>code</i> and not convert &quot;5&quot; to an integer 5."}], "answers": [{"comments": [{"owner": {"reputation": 6009, "user_id": 908425, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb97dfda824ea3e9c84ff835e635a4e6?s=128&d=identicon&r=PG", "display_name": "Sebastian Breit", "link": "https://stackoverflow.com/users/908425/sebastian-breit"}, "edited": false, "score": 0, "creation_date": 1453485634, "post_id": 34953094, "comment_id": 57637827, "body": "thanx, I&#39;ll try it. Could you explain why would this work? What about a sub string like danumber[0:3] ?"}, {"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "reply_to_user": {"reputation": 6009, "user_id": 908425, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb97dfda824ea3e9c84ff835e635a4e6?s=128&d=identicon&r=PG", "display_name": "Sebastian Breit", "link": "https://stackoverflow.com/users/908425/sebastian-breit"}, "edited": false, "score": 0, "creation_date": 1453485748, "post_id": 34953094, "comment_id": 57637881, "body": "@Perroloco: Updated. Yes, <code>danumber[0:3]</code> would work as well with <code>strconv.Atoi</code>."}], "tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 4, "last_activity_date": 1453486070, "last_edit_date": 1453486070, "creation_date": 1453485486, "answer_id": 34953094, "question_id": 34953063, "link": "https://stackoverflow.com/questions/34953063/convert-substring-to-int-in-golang/34953094#34953094", "title": "Convert substring to int in golang", "body": "<p>What your expression gives you is the <a href=\"https://en.wikipedia.org/wiki/UTF-8#Codepage_layout\" rel=\"nofollow\">character code</a> for the digit. To convert the character to the character's value, subtract <code>0</code>'s  character code from it:</p>\n\n<pre><code>int(danumber[0] - '0') // in your example, this is: 53 - 48\n</code></pre>\n\n<p>If you want to convert multiple digits, I would recommend using the <a href=\"https://godoc.org/strconv\" rel=\"nofollow\"><code>strconv</code></a> package:</p>\n\n<pre><code>number, err := strconv.Atoi(danumber[0:2]) // convert first two characters to int\n</code></pre>\n"}], "owner": {"reputation": 6009, "user_id": 908425, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb97dfda824ea3e9c84ff835e635a4e6?s=128&d=identicon&r=PG", "display_name": "Sebastian Breit", "link": "https://stackoverflow.com/users/908425/sebastian-breit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 34953094, "answer_count": 1, "score": 0, "last_activity_date": 1453486070, "creation_date": 1453485386, "question_id": 34953063, "link": "https://stackoverflow.com/questions/34953063/convert-substring-to-int-in-golang", "title": "Convert substring to int in golang", "body": "<p>I have this variable:</p>\n\n<pre><code>danumber := \"542353242\"\n</code></pre>\n\n<p>and want to extract a character from the string and operate with it as a number.\nTried this:</p>\n\n<pre><code>int(danumber[0])\n</code></pre>\n\n<p>but it doesn't seem to work. </p>\n"}, {"tags": ["serialization", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453483259, "post_id": 34952479, "comment_id": 57636507, "body": "Does <code>%v</code>, with either of the <code>#</code> or <code>+</code> flags not work for you?"}, {"owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "edited": false, "score": 4, "creation_date": 1453483279, "post_id": 34952479, "comment_id": 57636522, "body": "Depending on your usage, I would recommend looking at templating. See: <a href=\"https://godoc.org/text/template\" rel=\"nofollow noreferrer\"><code>text&#47;template</code></a> and <a href=\"https://godoc.org/html/template\" rel=\"nofollow noreferrer\"><code>html&#47;template</code></a>."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453483340, "post_id": 34952479, "comment_id": 57636559, "body": "Not to mention &quot;encoding/json&quot;, or external packages like <a href=\"https://godoc.org/github.com/davecgh/go-spew/spew\" rel=\"nofollow noreferrer\">godoc.org/github.com/davecgh/go-spew/spew</a>"}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453483666, "post_id": 34952479, "comment_id": 57636755, "body": "Hmm thank you both for the links. I was actually already using html/template for my views but I could probably also use them for emails.. Cool."}], "answers": [{"comments": [{"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1453496026, "post_id": 34954928, "comment_id": 57643029, "body": "That works.. How would this work in congruence with my Form struct? I see some docs on how I could use an interface in my struct by naming a field and making its type the interface.. would that Form struct then have access to the interface inside of it? (I basically just want to do that for separations of concerns.. my Form struct is my &quot;model&quot; so I don&#39;t want to create the interface inside the controller, which is what your example would be doing for me)."}], "tags": [], "owner": {"reputation": 12289, "user_id": 596041, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9eb6a78f4a48d143d59966fceec3c655?s=128&d=identicon&r=PG", "display_name": "Filip Haglund", "link": "https://stackoverflow.com/users/596041/filip-haglund"}, "is_accepted": false, "score": 1, "last_activity_date": 1453492721, "creation_date": 1453492721, "answer_id": 34954928, "question_id": 34952479, "link": "https://stackoverflow.com/questions/34952479/do-functions-of-the-fmt-package-support-formatters-for-arrays/34954928#34954928", "title": "Do functions of the `fmt` package support formatters for arrays?", "body": "<p>If you just want to pass a slice of arguments to <code>fmt.Sprintf</code> (or any other function that takes a variadic number of arguments) you can do that like this:</p>\n\n<pre><code>func main() {\n    s := []interface{}{1,2,5}\n    z := fmt.Sprintf(\"%d, %d, %d\", s...)\n    print(z)\n}\n</code></pre>\n\n<p>or if you have a slice of anything that isn't the empty interface, we have to copy it into a slice of the empty interface:</p>\n\n<pre><code>func main() {\n    s := []int{1,2,5}\n\n    // we need to copy each element one-by-one into a []interface{} \n    // because they are laid out differently in memory in go.\n    var x []interface{}\n    for _, i := range s {\n        x = append(x, i)\n    }\n\n    // pass the contents of the new slice into sprintf\n    z := fmt.Sprintf(\"%d, %d, %d\", x...)\n    print(z)\n}\n</code></pre>\n"}], "owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453492721, "creation_date": 1453483144, "last_edit_date": 1453486244, "question_id": 34952479, "link": "https://stackoverflow.com/questions/34952479/do-functions-of-the-fmt-package-support-formatters-for-arrays", "title": "Do functions of the `fmt` package support formatters for arrays?", "body": "<p>I am trying to submit an email with multiple paramaters and I have emails in a separate file with some printing verbs, but since there are so many verbs I end up with a line like this:</p>\n\n<pre><code>message := fmt.Sprintf(util.CONTACT_EMAIL, form.Name, form.Email, form.Email,     form.Phone, form.Phone, form.Message, ...)\n</code></pre>\n\n<p>and it just goes on and on which looks bad. And the reason I repeat some verbs is to get the href's, for example <code>&lt;a href\"mailto:%s\"&gt;%s&lt;/a&gt;</code>, and so forth. If anyone has a better approach to that I'd really like to know.</p>\n\n<p>But on to my question.. Does Go have a formatter that works similar to \n<a href=\"http://php.net/manual/en/function.vsprintf.php\" rel=\"nofollow\">vsprintf</a> in PHP? It basically takes an array as the arguments so it would be like:</p>\n\n<pre><code>string vsprintf(string $format , array $args) \n</code></pre>\n\n<p>..instead of the mess I have above, which allows it to be a bit more readable.</p>\n\n<p>I looked on the docs but don't seem to see anything..but a lot of what Go does is still foreign to me so maybe I overlooked it.</p>\n"}, {"tags": ["ssl", "parse-platform", "go", "https", "ssl-certificate"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453484680, "post_id": 34952237, "comment_id": 57637319, "body": "sounds like something is wrong with your dns"}, {"owner": {"reputation": 1, "user_id": 2300098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c98569f3ef7aebaa89f41db0f877af?s=128&d=identicon&r=PG", "display_name": "Mohamed Bassem", "link": "https://stackoverflow.com/users/2300098/mohamed-bassem"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453812401, "post_id": 34952237, "comment_id": 57754917, "body": "It was actually a DNS problem. Never thought of this. Thank you!"}], "owner": {"reputation": 1, "user_id": 2300098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c98569f3ef7aebaa89f41db0f877af?s=128&d=identicon&r=PG", "display_name": "Mohamed Bassem", "link": "https://stackoverflow.com/users/2300098/mohamed-bassem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453812467, "creation_date": 1453482400, "last_edit_date": 1453812467, "question_id": 34952237, "link": "https://stackoverflow.com/questions/34952237/parse-com-presents-a-wrong-ssl-certificate", "title": "parse.com presents a wrong SSL certificate", "body": "<p>I'm using Parse.com to issue push notifications to my app users. I use golang's default http client to make the POST request. Whenever I load parse with many requests in the same time, it works normally for the first few requests and then I start getting this error for the following requests:</p>\n\n<blockquote>\n  <p>Post <a href=\"https://api.parse.com/1/push\" rel=\"nofollow\">https://api.parse.com/1/push</a>: x509: certificate is valid for incapsula.com, trello.com, www.trello.com, not api.parse.com</p>\n</blockquote>\n\n<p>And sometimes:</p>\n\n<blockquote>\n  <p>Post <a href=\"https://api.parse.com/1/push\" rel=\"nofollow\">https://api.parse.com/1/push</a>: x509: certificate is valid for *.google.com, *.android.com, *.appengine.google.com, *.cloud.google.com, *.google-analytics.com, *.google.ca, *.google.cl, *.google.co.in, *.google.co.jp, *.google.co.uk, *.google.com.ar, *.google.com.au, *.google.com.br, *.google.com.co, *.google.com.mx, *.google.com.tr, *.google.com.vn, *.google.de, *.google.es, *.google.fr, *.google.hu, *.google.it, *.google.nl, *.google.pl, *.google.pt, *.googleadapis.com, *.googleapis.cn, *.googlecommerce.com, *.googlevideo.com, *.gstatic.cn, *.gstatic.com, *.gvt1.com, *.gvt2.com, *.metric.gstatic.com, *.urchin.com, *.url.google.com, *.youtube-nocookie.com, *.youtube.com, *.youtubeeducation.com, *.ytimg.com, android.clients.google.com, android.com, g.co, goo.gl, google-analytics.com, google.com, googlecommerce.com, urchin.com, youtu.be, youtube.com, youtubeeducation.com, not api.parse.com</p>\n</blockquote>\n\n<p>Is it something wrong from Parse or am I missing something ?</p>\n\n<p>EDIT:\nAs someone suggested in the comments. It was a DNS problem and it's now fixed. Thank you!</p>\n"}, {"tags": ["go", "command-line-interface"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453476532, "post_id": 34949685, "comment_id": 57631921, "body": "You&#39;re going to have to provide more information, or a reproducible example. If you can run the linked example, drop your code directly in there and see what happens. Try changin the Fprintf&#39;s to print to stdout and see what you get."}, {"owner": {"reputation": 1620, "user_id": 1183758, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/a2Bxf.jpg?s=128&g=1", "display_name": "n8gard", "link": "https://stackoverflow.com/users/1183758/n8gard"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453477372, "post_id": 34949685, "comment_id": 57632543, "body": "Fair enough. I&#39;ll mock one up shortly. I have used spew.Dump() within the loop to verify the data is there. It&#39;s definitely a goterm problem (my usage thereof, of course!)."}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 2, "creation_date": 1453477914, "post_id": 34949685, "comment_id": 57632926, "body": "@n8gard: It works for me. <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example.</a>."}, {"owner": {"reputation": 51399, "user_id": 1553888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01ac05cf8db6f338aef3c2f65e348f5d?s=128&d=identicon&r=PG", "display_name": "u_mulder", "link": "https://stackoverflow.com/users/1553888/u-mulder"}, "edited": false, "score": 0, "creation_date": 1453479919, "post_id": 34949685, "comment_id": 57634291, "body": "Sure you have <code>func main</code> and all libs imported? How&#39;s your function called?"}, {"owner": {"reputation": 1620, "user_id": 1183758, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/a2Bxf.jpg?s=128&g=1", "display_name": "n8gard", "link": "https://stackoverflow.com/users/1183758/n8gard"}, "edited": false, "score": 1, "creation_date": 1453484640, "post_id": 34949685, "comment_id": 57637297, "body": "I&#39;m creating a full, reproducible example and will have it up in a bit. But I know the libs are working because the single data-row example does work. Just not when I iterate through a list and attempt to put multiple rows in the table. A subtle thing I am missing, I&#39;m sure. Thanks everyone."}], "answers": [{"tags": [], "owner": {"reputation": 1620, "user_id": 1183758, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/a2Bxf.jpg?s=128&g=1", "display_name": "n8gard", "link": "https://stackoverflow.com/users/1183758/n8gard"}, "is_accepted": true, "score": 0, "last_activity_date": 1455375105, "creation_date": 1455375105, "answer_id": 35381316, "question_id": 34949685, "link": "https://stackoverflow.com/questions/34949685/how-to-iterate-over-a-list-and-draw-a-table-with-the-goterm-package/35381316#35381316", "title": "How to iterate over a list and draw a table with the goterm package?", "body": "<p>After some more testing I found that everything was, in fact, working properly. What I had failed to catch in the differences between goterm and Go's native tabwriter is that the former is more of an actual terminal program and redraws the screen. Embarrassingly, expecting scrolling output, my terminal window was too small for the 50+ rows being output. After realizing this and finding that I wanted the scrolling output of tabwriter, I switched and minutes later everything was working as expected. goterm is a fantastic package if you're looking for an interactive-like terminal program. It's not what I wanted though I had been attracted to it for its formatting capabilities. In short, RTFM.</p>\n"}], "owner": {"reputation": 1620, "user_id": 1183758, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/a2Bxf.jpg?s=128&g=1", "display_name": "n8gard", "link": "https://stackoverflow.com/users/1183758/n8gard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 35381316, "answer_count": 1, "score": 0, "last_activity_date": 1455375105, "creation_date": 1453474867, "question_id": 34949685, "link": "https://stackoverflow.com/questions/34949685/how-to-iterate-over-a-list-and-draw-a-table-with-the-goterm-package", "title": "How to iterate over a list and draw a table with the goterm package?", "body": "<p>I am trying to rapidly prototype something with <a href=\"https://github.com/buger/goterm/blob/master/examples/table_example.go\" rel=\"nofollow\">goterm</a>. I have a list of user objects in a struct. I want to output a header row (works) then iterate over the list (works) and add a row for each user. However, with the code below, nothing renders to the console. No blank lines. Nothing. The program just returns. I have gotten the linked example to work with just the header row and a data row. Appending to the table by iterating as I am is not working. I am certain I am missing something very basic. Help would be appreciated. I will continue hacking away.</p>\n\n<pre><code>func usersListOutputConsole(users *data.UserList) {\n  userTable := tm.NewTable(0, 10, 5, ' ', 0)\n  fmt.Fprintf(userTable, \"ID\\tName\\tFull Name\\tEmail\\n\") // the header row\n  for _, user := range users.Data {\n    fmt.Fprintf(userTable, \"%d\\t%s\\t%s\\t%s\\n\", user.ID,   user.Attributes[\"name\"], user.Attributes[\"full_name\"], user.Attributes[\"email\"])\n  }\n  tm.Println(userTable)\n  tm.Flush()\n}\n</code></pre>\n"}, {"tags": ["regex", "go"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5503331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bc7dc27a956fa132c6ea04c666f1f9?s=128&d=identicon&r=PG&f=1", "display_name": "Randy Layman", "link": "https://stackoverflow.com/users/5503331/randy-layman"}, "edited": false, "score": 0, "creation_date": 1453491654, "post_id": 34950673, "comment_id": 57640827, "body": "Thanks.  That makes sense to me now."}], "tags": [], "owner": {"reputation": 4936, "user_id": 102852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1a03727472c03ab6628d437a24e00?s=128&d=identicon&r=PG", "display_name": "alex vasi", "link": "https://stackoverflow.com/users/102852/alex-vasi"}, "is_accepted": true, "score": 3, "last_activity_date": 1453477913, "creation_date": 1453477913, "answer_id": 34950673, "question_id": 34949554, "link": "https://stackoverflow.com/questions/34949554/golang-regexp-named-groups-and-submatches/34950673#34950673", "title": "Golang Regexp Named Groups and Submatches", "body": "<p>Group names and positions are fixed:</p>\n\n<pre><code>re := regexp.MustCompile(\"(?P&lt;first&gt;[a-zA-Z]+) \")\ngroupNames := re.SubexpNames()\nfor matchNum, match := range re.FindAllStringSubmatch(\"Alan Turing \", -1) {\n    for groupIdx, group := range match {\n        name := groupNames[groupIdx]\n        if name == \"\" {\n            name = \"*\"\n        }\n        fmt.Printf(\"#%d text: '%s', group: '%s'\\n\", matchNum, group, name)\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 3446582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wLrPg.jpg?s=128&g=1", "display_name": "Niemi", "link": "https://stackoverflow.com/users/3446582/niemi"}, "edited": false, "score": 0, "creation_date": 1574764474, "post_id": 58308223, "comment_id": 104338384, "body": "2020 not 2010 (:"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 255, "user_id": 3446582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wLrPg.jpg?s=128&g=1", "display_name": "Niemi", "link": "https://stackoverflow.com/users/3446582/niemi"}, "edited": false, "score": 0, "creation_date": 1574765784, "post_id": 58308223, "comment_id": 104339134, "body": "@Niemi Thank you. I have edited the answer accordingly."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 3, "last_activity_date": 1574765768, "last_edit_date": 1574765768, "creation_date": 1570637407, "answer_id": 58308223, "question_id": 34949554, "link": "https://stackoverflow.com/questions/34949554/golang-regexp-named-groups-and-submatches/58308223#58308223", "title": "Golang Regexp Named Groups and Submatches", "body": "<p>That might be included in Go 1.14 (Q1 2020, not yet confirmed).<br>\nSee \"<a href=\"https://github.com/golang/go/issues/32420\" rel=\"nofollow noreferrer\"><strong>proposal: regexp: add <code>(*Regexp).SubexpIndex</code></strong> #32420</a>\"</p>\n\n<pre><code>// SubexpIndex returns the index of the first subexpression with the given name,\n// or else -1 if there is no subexpression with that name.\n//\n// Note that multiple subexpressions can be written using the same name, as in\n// (?P&lt;bob&gt;a+)(?P&lt;bob&gt;b+), which declares two subexpressions named \"bob\".\n// In this case SubexpIndex returns the index of the leftmost such subexpression\n// in the regular expression.\nfunc (*Regexp) SubexpIndex(name string) int\n</code></pre>\n\n<p>This is currently considered in <a href=\"https://go-review.googlesource.com/c/go/+/187919/\" rel=\"nofollow noreferrer\">CL 187919</a></p>\n\n<pre><code>re := regexp.MustCompile(`(?P&lt;first&gt;[a-zA-Z]+) (?P&lt;last&gt;[a-zA-Z]+)`)\nfmt.Println(re.MatchString(\"Alan Turing\"))\nmatches := re.FindStringSubmatch(\"Alan Turing\")\nlastIndex := re.SubexpIndex(\"last\")\nfmt.Printf(\"last =&gt; %d\\n\", lastIndex)\nfmt.Println(matches[lastIndex])\n\n// Output:\n// true\n// last =&gt; 2\n// Turing\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5503331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bc7dc27a956fa132c6ea04c666f1f9?s=128&d=identicon&r=PG&f=1", "display_name": "Randy Layman", "link": "https://stackoverflow.com/users/5503331/randy-layman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5573, "favorite_count": 2, "accepted_answer_id": 34950673, "answer_count": 2, "score": 7, "last_activity_date": 1574765768, "creation_date": 1453474515, "last_edit_date": 1453474786, "question_id": 34949554, "link": "https://stackoverflow.com/questions/34949554/golang-regexp-named-groups-and-submatches", "title": "Golang Regexp Named Groups and Submatches", "body": "<p>I am trying to match a regular expression and get the capturing group name for the match. This works when the regular expression only matches the string once, but if it matches the string more than once, <code>SubexpNames</code> doesn't return the duplicated names.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"regexp\"\n)\n\nfunc main() {\n    re := regexp.MustCompile(\"(?P&lt;first&gt;[a-zA-Z]+) \")\n    fmt.Printf(\"%q\\n\", re.SubexpNames())\n    fmt.Printf(\"%q\\n\", re.FindAllStringSubmatch(\"Alan Turing \", -1))\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[\"\" \"first\"]\n[[\"Alan \" \"Alan\"] [\"Turing \" \"Turing\"]]\n</code></pre>\n\n<p>Is it possible to get the capturing group name for each submatch?</p>\n"}, {"tags": ["random", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1453473075, "post_id": 34947001, "comment_id": 57629550, "body": "2^280 possible values (that number of 85 digits long in base 10) is going be unique. I would just adjust the length of b so you don&#39;t need padding on every base64 string."}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453473262, "post_id": 34947853, "comment_id": 57629668, "body": "code.google.com was retired a year ago, and will be taken offline this month."}, {"owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "edited": false, "score": 0, "creation_date": 1453474873, "post_id": 34947853, "comment_id": 57630774, "body": "Yes, there is one field in my database to store the token. But the thing I can&#39;t understand is that almost every website takes the form like : htttp://address/token . And in the URL, there is no information to denote this token is for which user record, so obviously the token can not be the same, it need to be unique."}, {"owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "edited": false, "score": 0, "creation_date": 1453475824, "post_id": 34947853, "comment_id": 57631415, "body": "But after I checkout the link you provided above, it seems UUID is enough to implement this functionality. It seems the probability of collision is almost impossible."}, {"owner": {"reputation": 4541, "user_id": 450117, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MQjBY.jpg?s=128&g=1", "display_name": "Eswar Rajesh Pinapala", "link": "https://stackoverflow.com/users/450117/eswar-rajesh-pinapala"}, "edited": false, "score": 1, "creation_date": 1535045268, "post_id": 34947853, "comment_id": 90932138, "body": "<code>Have another job that periodically cleans expired and non-verified emails.</code> You can avoid this if you could verify expiry at the time of email verification. save a verification_start_date, to check expiry."}], "tags": [], "owner": {"reputation": 1541, "user_id": 2232135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7swMf.png?s=128&g=1", "display_name": "smcstewart", "link": "https://stackoverflow.com/users/2232135/smcstewart"}, "is_accepted": false, "score": 4, "last_activity_date": 1612568517, "last_edit_date": 1612568517, "creation_date": 1453469357, "answer_id": 34947853, "question_id": 34947001, "link": "https://stackoverflow.com/questions/34947001/how-do-i-generate-a-unique-token-for-e-mail-verification/34947853#34947853", "title": "How do I generate a unique token (for e-mail verification)?", "body": "<p>Check out <a href=\"https://pkg.go.dev/github.com/google/uuid#NewRandom\" rel=\"nofollow noreferrer\">https://pkg.go.dev/github.com/google/uuid#NewRandom</a>.</p>\n<p>And you may want to consider storing this in a database with the email address and perhaps an expiry date / time so that the verification doesn't stay there forever. You may only want to allow people to verify within 24 hours, or 7 days and so on. Have another job that periodically cleans expired and non-verified emails.</p>\n"}, {"comments": [{"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 3, "creation_date": 1453470813, "post_id": 34947943, "comment_id": 57627959, "body": "A 35-byte (280 bit) token generated from crypto/rand is about as unique as you can get. Your comment &quot;No, the method as presented won&#39;t guarantee them to be unique&quot; or &quot;I&#39;d say an UUID or something looking like SHA-256/512 calculated over some random data is OK.&quot; would not be any better. There is no need to compare with existing tokens as the chance of collision is infinitesimally small."}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "reply_to_user": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 0, "creation_date": 1453472023, "post_id": 34947943, "comment_id": 57628827, "body": "@elithrar, the gist of my answer is that there exist a simple and sensible way to ensure uniqueness no matter what approach to generating of the tokens you use. I may be too low-tech but I don&#39;t have a degree in math and so why would I play with thinking about the probability of a collision if I just can avoid it using a simple check? I prefer &quot;reliable&quot; over &quot;neat&quot;. ;-)"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "edited": false, "score": 1, "creation_date": 1453472303, "post_id": 34947943, "comment_id": 57629018, "body": "What if you have tens of thousands of records? (not absurd for a moderately sized site). You can&#39;t check every record: it doesn&#39;t scale even to a few thousand. 32-byte tokens are fine."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1453472524, "post_id": 34947943, "comment_id": 57629160, "body": "If you have random data (which crypto/rand is supplying here), taking an SHA2 value of that only reduces the randomness of your data if you have more than the hash&#39;s size. If you have less, you&#39;re not adding any randomness, so there&#39;s no point."}, {"owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "edited": false, "score": 0, "creation_date": 1453475952, "post_id": 34947943, "comment_id": 57631498, "body": "It seems the solution provided by @Steven S. is enough to this problem. But still thank you for writing this detailed explanation."}], "tags": [], "owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "is_accepted": false, "score": 2, "last_activity_date": 1453469644, "creation_date": 1453469644, "answer_id": 34947943, "question_id": 34947001, "link": "https://stackoverflow.com/questions/34947001/how-do-i-generate-a-unique-token-for-e-mail-verification/34947943#34947943", "title": "How do I generate a unique token (for e-mail verification)?", "body": "<p>Two points:</p>\n\n<ul>\n<li>No, the method as presented won't guarantee them to be unique.</li>\n<li>You don't need to have <em>all</em> your tokens to be unique.</li>\n</ul>\n\n<p>To expand on these points&hellip;</p>\n\n<p>You're dealing with <em>a set of outstanding</em> verification requests.\nThat is:</p>\n\n<ol>\n<li>A request is made by the user;</li>\n<li>You generate a unique verification token and <em>store</em> it into some presistent database.  This is needed in order for verification to work anyway.</li>\n<li>The user receives your e-mail and clicks that link from it which contain your token.  At this point you remove the information about this pending verificaton request from your persistent storage.</li>\n</ol>\n\n<p>As you can see, at any given time you only have several outstanding verification requests.  Hence this situation has two important properties:</p>\n\n<ul>\n<li>You only need the tokens of these outstanding requests be different from one another.  It's OK to have a verification token to be the same as that of some past (or future) request.</li>\n<li>Your tokens have to be hard-to-guess (obviously).  I'm sure you already understand that.</li>\n</ul>\n\n<p>So, the approach to generating a new token is as follows:</p>\n\n<ol>\n<li><p>Generate something hard-to-guess.</p></li>\n<li><p>Compare it with the tokens bound to the outstanding/pending verification requests persisted in your storage.</p>\n\n<p>If you find an outstanding request with the same token, you have a collision so go to step (1) and repeat.</p>\n\n<p>Otherwise the token is OK so proceed with it and persist the data about this request.</p></li>\n<li><p>Once the request passed verification, remove it from your storage.</p></li>\n</ol>\n\n<p>Exact algorythm for generating tokens does not matter much.  I'd say an UUID or something looking like SHA-256/512 calculated over some random data is OK.</p>\n"}], "owner": {"reputation": 641, "user_id": 3087000, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4dd1dcaf7efecd574bb2273a5a8c06fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3087000", "link": "https://stackoverflow.com/users/3087000/user3087000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4707, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1612568517, "creation_date": 1453466492, "last_edit_date": 1453469003, "question_id": 34947001, "link": "https://stackoverflow.com/questions/34947001/how-do-i-generate-a-unique-token-for-e-mail-verification", "title": "How do I generate a unique token (for e-mail verification)?", "body": "<p>I want to implement a system that after user signs up, user will receive an email includes a link to verify this email is for that user.</p>\n\n<p>The way I generate the token for verifying the email is like this:</p>\n\n<pre><code>import (\n    \"crypto/rand\"\n    \"encoding/base64\"\n)\n\nfunc generateToken() (string, error) {\n    b := make([]byte, 35)\n    _, err := rand.Read(b)\n    if err != nil {\n        return \"\", err\n    }\n    return base64.URLEncoding.EncodeToString(b), nil\n}\n</code></pre>\n\n<p>But what I want to ask is if this method is OK? How to make all the token generated by this method is unique ? </p>\n\n<p>What is the normal way to implement this system ?</p>\n\n<p>Please give me some ideas and tell me if this method of generating token is good.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["http", "go", "memcached"], "comments": [{"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "edited": false, "score": 1, "creation_date": 1453451437, "post_id": 34942101, "comment_id": 57615937, "body": "Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Foobar\" rel=\"nofollow noreferrer\">Foobar</a>."}, {"owner": {"reputation": 4494, "user_id": 3727050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OFrev.png?s=128&g=1", "display_name": "urban", "link": "https://stackoverflow.com/users/3727050/urban"}, "edited": false, "score": 0, "creation_date": 1453451458, "post_id": 34942101, "comment_id": 57615949, "body": "Based on <a href=\"https://en.wikipedia.org/wiki/Foobar\" rel=\"nofollow noreferrer\">wiki</a> these are variables whose name is not important... This question could be considered out of topic, but is definitely programming related and a good one :) (every beginner wonders at some point)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1453451940, "post_id": 34942101, "comment_id": 57616205, "body": "They are called <i>metasyntactic variables</i>. The etymology of <code>foo</code> and <code>bar</code> are uncertain. See <a href=\"https://en.wikipedia.org/wiki/Metasyntactic_variable\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Metasyntactic_variable</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8433, "user_id": 2667536, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UfmAF.png?s=128&g=1", "display_name": "Derlin", "link": "https://stackoverflow.com/users/2667536/derlin"}, "is_accepted": true, "score": 3, "last_activity_date": 1453451427, "last_edit_date": 1495541423, "creation_date": 1453451427, "answer_id": 34942162, "question_id": 34942101, "link": "https://stackoverflow.com/questions/34942101/what-does-foo-and-bar-mean-and-why-people-like-use-them-as-example-case/34942162#34942162", "title": "what does &quot;foo&quot; and &quot;bar&quot; mean and why people like use them as example case?", "body": "<p>Google can answer your question far better than I. From <a href=\"https://en.wikipedia.org/wiki/Foobar#History_and_etymology\" rel=\"nofollow noreferrer\">wiki</a>:</p>\n\n<blockquote>\n  <p>The word foo originated as a nonsense word from the 1930s, the military term FUBAR emerged in the 1940s, and the use of foo in a programming context is generally credited to the Tech Model Railroad Club (TMRC) of MIT from circa 1960.[9] However, the precise relationship of these terms is not known with certainty, and several anecdotal theories have been advanced to identify them.</p>\n</blockquote>\n\n<p>Also, have a look at this question: <a href=\"https://stackoverflow.com/questions/4868904/what-is-the-origin-of-foo-and-bar\">What is the origin of foo and bar?</a> as well as this one: <a href=\"https://softwareengineering.stackexchange.com/questions/69788/what-is-the-history-of-the-use-of-foo-and-bar-in-source-code-examples\">https://softwareengineering.stackexchange.com/questions/69788/what-is-the-history-of-the-use-of-foo-and-bar-in-source-code-examples</a></p>\n"}], "owner": {"reputation": 49, "user_id": 5797406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rO76N.jpg?s=128&g=1", "display_name": "rench", "link": "https://stackoverflow.com/users/5797406/rench"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "closed_date": 1453452503, "accepted_answer_id": 34942162, "answer_count": 1, "score": -1, "last_activity_date": 1453455206, "creation_date": 1453451158, "last_edit_date": 1453455206, "question_id": 34942101, "link": "https://stackoverflow.com/questions/34942101/what-does-foo-and-bar-mean-and-why-people-like-use-them-as-example-case", "closed_reason": "Duplicate", "title": "what does &quot;foo&quot; and &quot;bar&quot; mean and why people like use them as example case?", "body": "<p>In many program test case or example case, i always see \"bar\" and \"foo\", what is the two word represent for and why choose this two words as example?</p>\n"}, {"tags": ["xml", "go", "unmarshalling"], "answers": [{"comments": [{"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1453450541, "post_id": 34941833, "comment_id": 57615440, "body": "Thanks for that.  Can you please show me what it would look like in the simplified example from my edit?  I&#39;m applying your solution but it doesn&#39;t work.  Here is the playground: <a href=\"https://play.golang.org/p/cXG6prczVK\" rel=\"nofollow noreferrer\">play.golang.org/p/cXG6prczVK</a>"}, {"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1453451354, "post_id": 34941833, "comment_id": 57615891, "body": "according to the principle you explained, the first example should work"}, {"owner": {"reputation": 4311, "user_id": 741992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a2d7257021bf728eab69025ea0a5fd?s=128&d=identicon&r=PG", "display_name": "petrkotek", "link": "https://stackoverflow.com/users/741992/petrkotek"}, "reply_to_user": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1453475261, "post_id": 34941833, "comment_id": 57631033, "body": "i believe that in this case the issue might be, that XML must have only one top-level element - i.e. your XML input in the second example is not valid XML"}, {"owner": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "reply_to_user": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 2, "creation_date": 1453478303, "post_id": 34941833, "comment_id": 57633184, "body": "@believesInSanta, you can avoid a separate struct for nested elements <a href=\"https://play.golang.org/p/7aGWd0Crnb\" rel=\"nofollow noreferrer\">by using a specially crafted tag</a>. Please actually take your time and read the rules for XML unmarshaling explained <a href=\"https://golang.org/pkg/encoding/xml/#Unmarshal\" rel=\"nofollow noreferrer\">here</a>: the <code>encoding&#47;xml</code> package has some power tools which might not be obvious from just skimming over random examples found in the internets ;-)"}, {"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "reply_to_user": {"reputation": 42799, "user_id": 720999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/04ee78e90161fa1c4dce14d615315160?s=128&d=identicon&r=PG", "display_name": "kostix", "link": "https://stackoverflow.com/users/720999/kostix"}, "edited": false, "score": 0, "creation_date": 1453478643, "post_id": 34941833, "comment_id": 57633410, "body": "oh wow, I didn&#39;t realize the full utility of those tags.  thanks a lot for showing me that @kostix"}], "tags": [], "owner": {"reputation": 4311, "user_id": 741992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a2d7257021bf728eab69025ea0a5fd?s=128&d=identicon&r=PG", "display_name": "petrkotek", "link": "https://stackoverflow.com/users/741992/petrkotek"}, "is_accepted": true, "score": 6, "last_activity_date": 1453450032, "creation_date": 1453450032, "answer_id": 34941833, "question_id": 34941539, "link": "https://stackoverflow.com/questions/34941539/how-do-i-unmarshal-nested-xml-elements-into-an-array/34941833#34941833", "title": "How do I unmarshal nested XML elements into an array?", "body": "<p>For this kind of nesting, you'll need also a struct for <code>Children</code> element:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"encoding/xml\"\n)\n\nfunc main() {\n\n    container := Parent{}\n    err := xml.Unmarshal([]byte(xml_data), &amp;container)\n\n    if err != nil {\n        fmt.Println(err)\n    } else {\n        fmt.Println(container)  \n    }\n}\n\nvar xml_data = `&lt;Parent&gt;\n            &lt;Val&gt;Hello&lt;/Val&gt;\n            &lt;Children&gt;\n                &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n            &lt;/Children&gt;\n        &lt;/Parent&gt;`\n\ntype Parent struct {\n    Val string\n    Children Children\n}\n\ntype Children struct {\n    Child []Child\n}\n\ntype Child struct {\n    Val string\n}\n</code></pre>\n\n<p>Also pasted here: <a href=\"https://play.golang.org/p/-rNryBSq01\" rel=\"noreferrer\" title=\"Go Playground\">Go Playground</a></p>\n\n<p>Note that your code would work (after changing variable name from <code>Children</code> to <code>Child</code>) with this kind of XML structure:</p>\n\n<pre><code>&lt;Parent&gt;\n    &lt;Val&gt;Hello&lt;/Val&gt;\n    &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n    &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n    &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n&lt;/Parent&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1626, "user_id": 159762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03896e8a1ac27618c696edb9bb150365?s=128&d=identicon&r=PG", "display_name": "Leigh  McCulloch", "link": "https://stackoverflow.com/users/159762/leigh-mcculloch"}, "edited": false, "score": 3, "creation_date": 1489809687, "post_id": 42618835, "comment_id": 72846396, "body": "This is a better less cluttered solution, and confirmed to work: <a href=\"https://play.golang.org/p/K4WhGBJnfp\" rel=\"nofollow noreferrer\">play.golang.org/p/K4WhGBJnfp</a>"}, {"owner": {"reputation": 180, "user_id": 3761560, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0af5439b8de8b452495b097ddae5c4b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/3761560/ben"}, "edited": false, "score": 1, "creation_date": 1523397851, "post_id": 42618835, "comment_id": 86542675, "body": "Yeah, this is what I needed as well. Otherwise, for a similar case, the accepted solution was leaving me with a redundant node/struct in my xml-to-json transformation. @snyh"}, {"owner": {"reputation": 474, "user_id": 506983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4fac4ecdf3872ebd039962a5e277f19?s=128&d=identicon&r=PG", "display_name": "sergodeeva", "link": "https://stackoverflow.com/users/506983/sergodeeva"}, "edited": false, "score": 0, "creation_date": 1599218770, "post_id": 42618835, "comment_id": 112713410, "body": "Thank you! This should be accepted as a correct answer."}], "tags": [], "owner": {"reputation": 1029, "user_id": 401883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Sqws.png?s=128&g=1", "display_name": "snyh", "link": "https://stackoverflow.com/users/401883/snyh"}, "is_accepted": false, "score": 26, "last_activity_date": 1488781433, "creation_date": 1488781433, "answer_id": 42618835, "question_id": 34941539, "link": "https://stackoverflow.com/questions/34941539/how-do-i-unmarshal-nested-xml-elements-into-an-array/42618835#42618835", "title": "How do I unmarshal nested XML elements into an array?", "body": "<pre><code>type Parent struct {\n    Val string\n    Children []Child  `xml:\"Children&gt;Child\"`  //Just use the '&gt;'\n}\n</code></pre>\n"}], "owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7486, "favorite_count": 2, "accepted_answer_id": 34941833, "answer_count": 2, "score": 4, "last_activity_date": 1488781433, "creation_date": 1453448920, "last_edit_date": 1453478389, "question_id": 34941539, "link": "https://stackoverflow.com/questions/34941539/how-do-i-unmarshal-nested-xml-elements-into-an-array", "title": "How do I unmarshal nested XML elements into an array?", "body": "<p>My XML contains an array of predefined elements, but I can't pick up the array.  Here is the XML structure:</p>\n\n<pre><code>var xml_data = `&lt;Parent&gt;\n                   &lt;Val&gt;Hello&lt;/Val&gt;\n                   &lt;Children&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                   &lt;/Children&gt;\n                &lt;/Parent&gt;`\n</code></pre>\n\n<p>Here is the full code and here is the <a href=\"https://play.golang.org/p/VfHDqKILfA\" rel=\"nofollow\">playground link</a>.  Running this will pick up Parent.Val, but not Parent.Children.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"encoding/xml\"\n)\n\nfunc main() {\n\n    container := Parent{}\n    err := xml.Unmarshal([]byte(xml_data), &amp;container)\n\n    if err != nil {\n        fmt.Println(err)\n    } else {\n        fmt.Println(container)  \n    }\n}\n\nvar xml_data = `&lt;Parent&gt;\n                   &lt;Val&gt;Hello&lt;/Val&gt;\n                   &lt;Children&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                      &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n                   &lt;/Children&gt;\n                &lt;/Parent&gt;`\n\ntype Parent struct {\n    Val string\n    Children []Child\n}\n\ntype Child struct {\n    Val string\n}\n</code></pre>\n\n<p>EDIT: I simplified the problem a bit <a href=\"https://play.golang.org/p/JkaA79p1-W\" rel=\"nofollow\">here</a>.  Basically I can't unmarshal any array, not just of predefined structure.  Below is the updated work code.  In that example, only one item ends up in the container interface.</p>\n\n<pre><code>func main() {\n\n    container := []Child{}\n    err := xml.Unmarshal([]byte(xml_data), &amp;container)\n\n    if err != nil {\n        fmt.Println(err)\n    } else {\n        fmt.Println(container)  \n    }\n\n    /* \n        ONLY ONE CHILD ITEM GETS PICKED UP\n    */\n}\n\nvar xml_data = `\n            &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n            &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n            &lt;Child&gt;&lt;Val&gt;Hello&lt;/Val&gt;&lt;/Child&gt;\n        `\n\ntype Child struct {\n    Val string\n}\n</code></pre>\n"}, {"tags": ["go", "beego"], "comments": [{"owner": {"reputation": 1425, "user_id": 2349141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jbWDl.jpg?s=128&g=1", "display_name": "poorva", "link": "https://stackoverflow.com/users/2349141/poorva"}, "edited": false, "score": 0, "creation_date": 1461907604, "post_id": 34940659, "comment_id": 61420411, "body": "I am having similar problem , my <code>copyrequestbody</code> is set to <code>true</code> I dont see a request doing to server at all , but somehow the response is empty"}, {"owner": {"reputation": 938, "user_id": 1772722, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/17346489240f67dafa4bad5967fa1aae?s=128&d=identicon&r=PG", "display_name": "lionelmessi", "link": "https://stackoverflow.com/users/1772722/lionelmessi"}, "reply_to_user": {"reputation": 1425, "user_id": 2349141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jbWDl.jpg?s=128&g=1", "display_name": "poorva", "link": "https://stackoverflow.com/users/2349141/poorva"}, "edited": false, "score": 0, "creation_date": 1461944096, "post_id": 34940659, "comment_id": 61443544, "body": "your req is not reaching the server?"}, {"owner": {"reputation": 1425, "user_id": 2349141, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/jbWDl.jpg?s=128&g=1", "display_name": "poorva", "link": "https://stackoverflow.com/users/2349141/poorva"}, "edited": false, "score": 0, "creation_date": 1462194022, "post_id": 34940659, "comment_id": 61520995, "body": "i belive that a <code>ListenAndServe</code> method is internally called in this case. The only factor by which i can say that the server is running properly is if i make a valid request i get 200 OK but for invalid requests i get 404 Actually , I have posted my actual problem <a href=\"http://stackoverflow.com/questions/36983078/beego-endpoint-testing\">here</a>"}, {"owner": {"reputation": 666, "user_id": 1819852, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/da91c0f9296f7029e059362ea5809af6?s=128&d=identicon&r=PG", "display_name": "souravlahoti", "link": "https://stackoverflow.com/users/1819852/souravlahoti"}, "edited": false, "score": 0, "creation_date": 1476879121, "post_id": 34940659, "comment_id": 67531946, "body": "I get unmatch GET to my URL and it returns 404 status , but infact using Postman I get response <a href=\"http://stackoverflow.com/questions/40130473/beego-test-case-returns-404-status-endpoint-not-match\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 938, "user_id": 1772722, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/17346489240f67dafa4bad5967fa1aae?s=128&d=identicon&r=PG", "display_name": "lionelmessi", "link": "https://stackoverflow.com/users/1772722/lionelmessi"}, "is_accepted": true, "score": 0, "last_activity_date": 1453449550, "creation_date": 1453449550, "answer_id": 34941722, "question_id": 34940659, "link": "https://stackoverflow.com/questions/34940659/send-json-request-to-test-endpoint-api-in-beego-is-failing-with-empty-body/34941722#34941722", "title": "Send JSON request to test Endpoint API in beego is failing with empty body", "body": "<p>Reading the body of a request is <strong>Disabled</strong> by default in Beego. You need to add the following line to <code>app.conf</code> file </p>\n\n<pre><code>copyrequestbody = true\n</code></pre>\n\n<p>This resolves the issue.</p>\n"}], "owner": {"reputation": 938, "user_id": 1772722, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/17346489240f67dafa4bad5967fa1aae?s=128&d=identicon&r=PG", "display_name": "lionelmessi", "link": "https://stackoverflow.com/users/1772722/lionelmessi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 1, "accepted_answer_id": 34941722, "answer_count": 1, "score": 3, "last_activity_date": 1548879655, "creation_date": 1453445378, "last_edit_date": 1548879655, "question_id": 34940659, "link": "https://stackoverflow.com/questions/34940659/send-json-request-to-test-endpoint-api-in-beego-is-failing-with-empty-body", "title": "Send JSON request to test Endpoint API in beego is failing with empty body", "body": "<p>I am trying to test the endpoint of my REST API's using beego framework.</p>\n\n<p>My test function is below that I am using to send JSON request:</p>\n\n<pre><code>func testHTTPJsonResp(url string) string {\n    var jsonStr = []byte(`{\"title\":\"Buy cheese and bread for breakfast.\"}`)\n    req, err := http.NewRequest(\"POST\", url, bytes.NewBuffer(jsonStr))\n    req.Header.Set(\"X-Custom-Header\", \"myvalue\")\n    req.Header.Set(\"Content-Type\", \"application/json\")\n\n    beego.Error(err)\n    w := httptest.NewRecorder()\n    beego.BeeApp.Handlers.ServeHTTP(w, req)\n\n    beego.Debug(w)\n\n    return w.Body.String()\n}\n</code></pre>\n\n<p>The server does receive the request but the input body is always <code>empty</code> for the request.</p>\n\n<p>Similar, function that I am using to send Form data to server <code>works fine</code>.</p>\n\n<pre><code>func testHTTPResp(httpProt, url string, params map[string]interface{}) string {\n    bodyBuf := &amp;bytes.Buffer{}\n    bodyWriter := multipart.NewWriter(bodyBuf)\n\n    for key, val := range params {\n        beego.Error(key + val.(string))\n        _ = bodyWriter.WriteField(key, val.(string))\n\n    }\n\n    contentType := bodyWriter.FormDataContentType()\n    bodyWriter.Close()\n\n    r, _ := http.NewRequest(httpProt, url, bodyBuf)\n    r.Header.Add(\"Content-Type\", contentType)\n\n    w := httptest.NewRecorder()\n    beego.BeeApp.Handlers.ServeHTTP(w, r)\n\n    beego.Debug(w)\n\n    return w.Body.String()\n}\n</code></pre>\n\n<p><strong>Issue:</strong> Why is the server receiving JSON request body as empty while similar form-encoded data goes fine. Have been stuck on this for a few days now, any pointers are highly appreciated.</p>\n"}, {"tags": ["c", "windows", "go", "c-strings", "cgo"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453448859, "post_id": 34940385, "comment_id": 57614681, "body": "try to change <code>C.SetConsoleTitle(ctitle)</code> to <code>C.SetConsoleTitle(title.c_str())</code>"}, {"owner": {"reputation": 157, "user_id": 3959850, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t8r1X.png?s=128&g=1", "display_name": "buddy148", "link": "https://stackoverflow.com/users/3959850/buddy148"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1453448993, "post_id": 34940385, "comment_id": 57614759, "body": "@LPs That doesn&#39;t seem possible <code>title.c_str undefined (type string has no field or method c_str)</code> Thanks anyway :)"}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 3959850, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t8r1X.png?s=128&g=1", "display_name": "buddy148", "link": "https://stackoverflow.com/users/3959850/buddy148"}, "is_accepted": false, "score": 1, "last_activity_date": 1453450651, "last_edit_date": 1453450651, "creation_date": 1453450215, "answer_id": 34941873, "question_id": 34940385, "link": "https://stackoverflow.com/questions/34940385/golang-cgo-unable-to-use-converted-string/34941873#34941873", "title": "Golang CGO unable to use converted string", "body": "<p>I've found a solution, You're able to cast the pointer to an <code>*C.CHAR</code>:</p>\n\n<pre><code>// #include &lt;windows.h&gt;\nimport \"C\"\nimport \"unsafe\"\n\nfunc Title(title string) {\n  ctitle := unsafe.Pointer(C.CString(title))\n  defer C.free(ctitle)\n  C.SetConsoleTitle((*C.CHAR)(ctitle))\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 3959850, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/t8r1X.png?s=128&g=1", "display_name": "buddy148", "link": "https://stackoverflow.com/users/3959850/buddy148"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1453450651, "creation_date": 1453444295, "question_id": 34940385, "link": "https://stackoverflow.com/questions/34940385/golang-cgo-unable-to-use-converted-string", "title": "Golang CGO unable to use converted string", "body": "<p>I'm attempting to set the title of the Windows command prompt using CGO and the windows c header:</p>\n\n<pre><code>// #include &lt;windows.h&gt;\nimport \"C\"\nimport \"unsafe\"\n\nfunc Title(title string) {\n  ctitle := C.CString(title)\n  defer C.free(unsafe.Pointer(ctitle))\n  C.SetConsoleTitle(ctitle)\n}\n</code></pre>\n\n<p>But at compile time, the following error occurs:</p>\n\n<pre><code>cannot use ctitle (type *C.char) as type *C.CHAR in argument to _Cfunc_SetConsoleTitle\n</code></pre>\n\n<p>It would seem that <code>C.SetConsoleTitle(ctitle)</code> is expecting a string of type <code>*C.CHAR</code> but <code>C.CString(title)</code> is returning <code>*C.char</code></p>\n\n<p>How should I go about converting the string to the expected type?</p>\n"}]