[{"tags": ["pointers", "go"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1420674131, "post_id": 27830605, "comment_id": 44067240, "body": "The actual value of <code>x</code> is <code>x</code>. If the parameter <code>a</code> stores the address of <code>x</code>, then <code>*a</code> gives the value of <code>x</code>."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 2, "creation_date": 1420674693, "post_id": 27830605, "comment_id": 44067397, "body": "I think it&#39;s the dual usage of * to signify two different things that&#39;s confusing. I remember I was a bit baffled by it when I first learned C years ago."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 2, "creation_date": 1420678341, "post_id": 27830605, "comment_id": 44068465, "body": "3: you&#39;re printing the address of the pointer variables, not of the underlying integers. You&#39;d print <code>a</code> and <code>b</code> to see those."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420681152, "post_id": 27830605, "comment_id": 44069178, "body": "4: it&#39;s just how they chose to define the language: they decided variables would behave as if they always live at the same address. An advantage of that is that you don&#39;t have to worry about the many pitfalls you can have with pointers (like having your variables unexpectedly changed by other code) except when you actually elect to use pointers (or the Go types implemented using pointers, like slices and maps)."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 3, "creation_date": 1420681259, "post_id": 27830605, "comment_id": 44069209, "body": "2: no, <code>a, b = b, a</code> swaps the pointers accessible within your <code>swap</code> function, but it doesn&#39;t swap the values from <code>main</code>&#39;s perspective: the last line of output becomes <code>5 15 2</code>: <a href=\"http://play.golang.org/p/rCXDgkZ9kG\" rel=\"nofollow noreferrer\">play.golang.org/p/rCXDgkZ9kG</a>"}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420681478, "post_id": 27830605, "comment_id": 44069256, "body": "1: covering the same territory as the first two comments: <code>*x</code> in your <code>main()</code> is invalid syntax (try it), because <code>x</code> is not of a pointer type. It just happens the character in the name of the type (<code>*int</code>) is taken from the operator you use to access a value through a pointer (<code>*</code>, also called the <i>dereference</i> operator), instead of the one you use to get a pointer to a variable (<code>&amp;</code>)."}, {"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "reply_to_user": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420681615, "post_id": 27830605, "comment_id": 44069295, "body": "@twotwotwo, why not post your comments as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 1, "last_activity_date": 1420705704, "last_edit_date": 1420705704, "creation_date": 1420684788, "answer_id": 27832111, "question_id": 27830605, "link": "https://stackoverflow.com/questions/27830605/understanding-pointers-in-go/27832111#27832111", "title": "Understanding pointers in Go", "body": "<blockquote>\n  <ol>\n  <li>From what I understand <code>&amp;x</code> gives the address at which <code>x</code> is stored. To get the actual value of x, I need to use <code>*x</code>. Then, I don't understand why <code>&amp;x</code> is of type <code>*int</code>. As <code>*x</code> and <code>&amp;x</code> are both of type <code>*int</code>, their differences are not clear to me at all.</li>\n  </ol>\n</blockquote>\n\n<p>When <code>*int</code> is in function declaration, it mean pointer of int. but it's in the statement, <code>*x</code> is not type <code>*int</code>. it mean dereference of the pointer. So:</p>\n\n<pre><code>*a, *b = *b, *a\n</code></pre>\n\n<p>This mean, swapping values by dereference.\nThe fuction arguments is passing by copyed. So if you want to export values to caller, you need to pass a pointer of the variable as argument.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>In my swap function, what is the difference between using <code>*a, *b = *b, *a</code> and using <code>a, b = b, a</code>? Both work but I can't explain why...</li>\n  </ol>\n</blockquote>\n\n<p>As I said, <code>a, b = b, a</code> mean swapping pointers not swapping values.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Why are the addresses different when printed between step 2 and 3?</li>\n  </ol>\n</blockquote>\n\n<p>This is not a defined result. Address of variable are disposed by go's runtime.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Why can't I just modify the address directly assigning <code>&amp;b</code> to <code>&amp;a</code> for example?</li>\n  </ol>\n</blockquote>\n\n<p>Not impossible. For example:</p>\n\n<pre><code>package main\n\nimport (\n    \"unsafe\"\n)\n\nfunc main() {\n    arr := []int{2, 3}\n\n    pi := &amp;arr[0] // take address of first element of arr\n\n    println(*pi) // print 2\n\n    // Add 4bytes to the pointer\n    pi = (*int)(unsafe.Pointer(uintptr(unsafe.Pointer(pi)) + unsafe.Sizeof(int(0))))\n\n    println(*pi) // print 3\n}\n</code></pre>\n\n<p>Using unsafe package, you can update address values. But it's not endorsed.</p>\n"}, {"tags": [], "owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "is_accepted": true, "score": 4, "last_activity_date": 1420755511, "last_edit_date": 1495541659, "creation_date": 1420685298, "answer_id": 27832161, "question_id": 27830605, "link": "https://stackoverflow.com/questions/27830605/understanding-pointers-in-go/27832161#27832161", "title": "Understanding pointers in Go", "body": "<p>1) It's a confusion about the language that leads you to think <code>*x</code> and <code>&amp;x</code> are the same type. As Not_a_Golfer pointed out, the uses of <code>*</code> in expressions and type names are different. <code>*x</code> in your <code>main()</code> is invalid syntax, because <code>*</code> in an expression tries to get the value pointed to by the pointer that follows, but <code>x</code> is not a pointer (it's an <code>int</code>). </p>\n\n<p>I think you were thinking of the fact that when you take a pointer to <code>x</code> using <code>&amp;x</code>, the character you add to the type name is <code>*</code> to form <code>*int</code>. I can see how it's confusing that <code>&amp;var</code> gets you <code>*typ</code> rather than <code>&amp;typ</code>. On the other hand, if they'd put <code>&amp;</code> on the type name instead, that would be confusing in other situations. Some trickiness is inevitable, and like human languages, it may be easier to learn by using than discussion alone. </p>\n\n<p>2) Again, turns out the assumption is inaccurate: <code>a, b = b, a</code> swaps the pointers that the <code>swap</code> function looks at, but doesn't swap the values from <code>main</code>'s perspective and the last line of output changes to <code>5 15 2</code>: <a href=\"http://play.golang.org/p/rCXDgkZ9kG\" rel=\"nofollow noreferrer\">http://play.golang.org/p/rCXDgkZ9kG</a></p>\n\n<p>3) <code>swap</code> is printing the address of the pointer variables, not of the underlying integers. You'd print <code>a</code> and <code>b</code> to see the addresses of the integers.</p>\n\n<p>4) I'm going to assume, maybe wrongly, that you were hoping you could swap the locations that arbitrary variables point to with <code>&amp;</code> syntax, as in <code>&amp;x, &amp;y = &amp;y, &amp;x</code>, without ever declaring pointer variables. There's some ambiguity, and if that's not what you were going for, I'm not sure if this part of the answer will help you.</p>\n\n<p>As with many \"why can't I...\" questions the easy out is \"because they defined the language that way\". But going to <em>why</em> it's that way a little bit, I think you're required to declare a variable as a pointer at some point (or <a href=\"https://stackoverflow.com/questions/23542989/pointers-vs-values-in-parameters-and-return-values/23551970#23551970\">another type implemented using pointers, like maps or slices</a>) because pointers come with booby traps: you can do something over in one piece of code that changes other code's local variables in unexpected ways, for example. So wherever you see <code>*int</code> appear, it's telling you you might have to worry about (or, that you're able to use) things like <code>nil</code> pointers, concurrent access from multiple pieces of code, etc.</p>\n\n<p>Go is a bit more conservative about making pointer-hood explicit than other languages are: C++, for example, has the concept of \"reference parameters\" (<code>int&amp; i</code>) where you could do your <code>swap(x,y)</code> with no <code>&amp;</code> or pointers appearing in <code>main</code>. In other words, in languages with reference parameters, you might have to look at the declaration of a function to know whether it will change its arguments. That sort of behavior was a little too surprising/implicit/tricky for the Go folks to adopt. </p>\n\n<hr>\n\n<p>No getting around that all the referencing and dereferencing takes some thinking, and you might just have to work with it a while to get it; hope all this helps, though.</p>\n"}], "owner": {"reputation": 7273, "user_id": 2641547, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/660520007/picture?type=large", "display_name": "Spearfisher", "link": "https://stackoverflow.com/users/2641547/spearfisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 27832161, "answer_count": 2, "score": 3, "last_activity_date": 1420755511, "creation_date": 1420673601, "last_edit_date": 1420674086, "question_id": 27830605, "link": "https://stackoverflow.com/questions/27830605/understanding-pointers-in-go", "title": "Understanding pointers in Go", "body": "<p>I am trying to understand how pointers work in Go. On a general level, I have little experience with pointers as I mostly use javascript.</p>\n\n<p>I wrote this dummy program:</p>\n\n<pre><code>func swap(a, b *int) {\n    fmt.Println(\"3\", &amp;a, &amp;b)\n    *a, *b = *b, *a\n\n    fmt.Println(\"4\", a, b)\n}\nfunc main() {\n    x := 15\n    y := 2\n\n    fmt.Println(\"1\", x, y)\n    fmt.Println(\"2\", &amp;x, &amp;y)\n    swap(&amp;x, &amp;y)\n    fmt.Println(\"5\", x, y)\n}\n</code></pre>\n\n<p>Which prints the following results:</p>\n\n<pre><code>$ go run test.go\n1 15 2\n2 0x208178170 0x208178178\n3 0x2081ac020 0x2081ac028\n4 0x208178178 0x208178170\n5 2 15\n</code></pre>\n\n<p>I have several questions:</p>\n\n<ol>\n<li><p>From what I understand <code>&amp;x</code> gives the address at which <code>x</code> is stored. To get the actual value of x, I need to use <code>*x</code>. Then, I don't understand why <code>&amp;x</code> is of type <code>*int</code>. As <code>*x</code> and <code>&amp;x</code> are both of type <code>*int</code>, their differences are not clear to me at all.</p></li>\n<li><p>In my swap function, what is the difference between using <code>*a, *b = *b, *a</code> and using <code>a, b = b, a</code>? Both work but I can't explain why...</p></li>\n<li><p>Why are the addresses different when printed between step 2 and 3?</p></li>\n<li><p>Why can't I just modify the address directly assigning <code>&amp;b</code> to <code>&amp;a</code> for example?</p></li>\n</ol>\n\n<p>Many thanks for your help</p>\n"}, {"tags": ["html", "go", "concatenation"], "comments": [{"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 0, "creation_date": 1420678318, "post_id": 27828242, "comment_id": 44068460, "body": "Is this question too long? I was thinking that too much info is better than too little info."}], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 0, "creation_date": 1428706146, "post_id": 29570471, "comment_id": 47293058, "body": "Genius!!! Thanks a ton! I never thought about using the <code>ReplaceWithHtml</code> function like that."}], "tags": [], "owner": {"reputation": 7031, "user_id": 28855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a62c5134a4ff7b618582d8dd267d2b5?s=128&d=identicon&r=PG", "display_name": "Jaime Soriano", "link": "https://stackoverflow.com/users/28855/jaime-soriano"}, "is_accepted": true, "score": 3, "last_activity_date": 1428699048, "creation_date": 1428699048, "answer_id": 29570471, "question_id": 27828242, "link": "https://stackoverflow.com/questions/27828242/goquery-extract-text-from-one-html-tag-and-add-it-to-the-next-tag/29570471#29570471", "title": "goquery- Extract text from one html tag and add it to the next tag", "body": "<p>Something like this code does the job, it finds all <code>&lt;h1&gt;</code> nodes, then all <code>&lt;span&gt;</code> nodes inside these <code>&lt;h1&gt;</code> nodes, looking for one with class <code>text</code>. Then it gets the next element to the <code>&lt;h1&gt;</code> node, if it is a <code>&lt;p&gt;</code>, that has inside a <code>&lt;span&gt;</code>, then it replaces this last <code>&lt;span&gt;</code> with a new <code>&lt;span&gt;</code> with the new text and removes the <code>&lt;h1&gt;</code>.</p>\n\n<p>I wonder if it's possible to create nodes using <code>goquery</code> without writing html...</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n\n    \"github.com/PuerkitoBio/goquery\"\n)\n\nvar htmlCode string = `&lt;html&gt;\n...\n&lt;html&gt;`\n\nfunc main() {\n    doc, _ := goquery.NewDocumentFromReader(strings.NewReader((htmlCode)))\n    doc.Find(\"h1\").Each(func(i int, h1 *goquery.Selection) {\n        h1.Find(\"span\").Each(func(j int, s *goquery.Selection) {\n            if s.HasClass(\"text\") {\n                if p := h1.Next(); p != nil {\n                    if ps := p.Children().First(); ps != nil &amp;&amp; ps.HasClass(\"text\") {\n                        ps.ReplaceWithHtml(\n                            fmt.Sprintf(\"&lt;span class=\\\"text\\\"&gt;%s%s&lt;/span&gt;)\", s.Text(), ps.Text()))\n                        h1.Remove()\n                    }\n                }\n            }\n        })\n    })\n    htmlResult, _ := doc.Html()\n    fmt.Println(htmlResult)\n}\n</code></pre>\n"}], "owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6530, "favorite_count": 1, "accepted_answer_id": 29570471, "answer_count": 1, "score": 4, "last_activity_date": 1428699048, "creation_date": 1420663196, "last_edit_date": 1420681328, "question_id": 27828242, "link": "https://stackoverflow.com/questions/27828242/goquery-extract-text-from-one-html-tag-and-add-it-to-the-next-tag", "title": "goquery- Extract text from one html tag and add it to the next tag", "body": "<p>Yeah, sorry that the title explains nothing. I'll need to use an example.</p>\n\n<p>This is a continuation of another <a href=\"https://stackoverflow.com/questions/27789446/goquery-concatenate-a-tag-with-the-one-that-follows\">question</a> I posted which solved one problem but not all of them. I've put most of the background info from that question into this one. Also, I've only been looking into Go for about 5 days (and I only started learning code a couple months ago), so I'm 90% sure that I'm close to figuring out what I want and that the problem is that I've got some silly syntax mistakes.  </p>\n\n<h3>Situation</h3>\n\n<p>I'm trying to use <code>goquery</code> to parse a webpage. (Eventually I want to put some of the data in a database). Here's what it looks like:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;h1&gt;\n            &lt;span class=\"text\"&gt;Go &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;totally &lt;/span&gt;\n            &lt;span class=\"post\"&gt;kicks &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;hacks &lt;/span&gt;\n            &lt;span class=\"post\"&gt;its &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h1&gt;\n            &lt;span class=\"text\"&gt;debugger &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;should &lt;/span&gt;\n            &lt;span class=\"post\"&gt;be &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;called &lt;/span&gt;\n            &lt;span class=\"post\"&gt;ogle &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h3&gt;\n            &lt;span class=\"statement\"&gt;true&lt;/span&gt;\n        &lt;/h3&gt;\n    &lt;/body&gt;\n&lt;html&gt;\n</code></pre>\n\n<h3>Objective</h3>\n\n<p>I'd like to:  </p>\n\n<ol>\n<li><strong>Extract</strong> the content of <code>&lt;h1...\"text\"</code>.  </li>\n<li><strong>Insert</strong> (and concatenate) this extracted content into the content of <code>&lt;p...\"text\"</code>.  </li>\n<li>Only do this for the <code>&lt;p&gt;</code> tag that <em>immediately follows</em> the <code>&lt;h1&gt;</code> tag.  </li>\n<li>Do this for <strong>all</strong> of the <code>&lt;h1&gt;</code> tags on the page.  </li>\n</ol>\n\n<p>Once again, an example explains ^this better. This is what I want it to look like:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;Go totally &lt;/span&gt;\n            &lt;span class=\"post\"&gt;kicks &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;hacks &lt;/span&gt;\n            &lt;span class=\"post\"&gt;its &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;debugger should &lt;/span&gt;\n            &lt;span class=\"post\"&gt;be &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;called &lt;/span&gt;\n            &lt;span class=\"post\"&gt;ogle&lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h3&gt;\n            &lt;span class=\"statement\"&gt;true&lt;/span&gt;\n        &lt;/h3&gt;\n    &lt;/body&gt;\n&lt;html&gt;\n</code></pre>\n\n<h3>Solution Attempts</h3>\n\n<p>Because distinguishing further the <code>&lt;h1&gt;</code> tags from the <code>&lt;p&gt;</code> tags would provide more parsing options, I've figured out how to change the <code>class</code> attributes of the <code>&lt;h1&gt;</code> tags to this:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;h1&gt;\n            &lt;span class=\"title\"&gt;Go &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;totally &lt;/span&gt;\n            &lt;span class=\"post\"&gt;kicks &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;hacks &lt;/span&gt;\n            &lt;span class=\"post\"&gt;its &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h1&gt;\n            &lt;span class=\"title\"&gt;debugger &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;should &lt;/span&gt;\n            &lt;span class=\"post\"&gt;be &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=\"text\"&gt;called &lt;/span&gt;\n            &lt;span class=\"post\"&gt;ogle &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h3&gt;\n            &lt;span class=\"statement\"&gt;true&lt;/span&gt;\n        &lt;/h3&gt;\n    &lt;/body&gt;\n&lt;html&gt;\n</code></pre>\n\n<p>with this code:</p>\n\n<pre><code>html_code := strings.NewReader(`\ncode_example_above\n`)\ndoc, _ := goquery.NewDocumentFromReader(html_code)\ndoc.Find(\"h1\").Each(func(i int, s *goquery.Selection) {\n    s.SetAttr(\"class\", \"title\")\n    class, _ := s.Attr(\"class\")\n    if class == \"title\" {\n        fmt.Println(class, s.Text())\n    }\n})\n</code></pre>\n\n<p>I know that I can select the <code>&lt;p...\"text\"</code> following the <code>&lt;h1...\"title\"</code> with <em>either</em> <code>doc.Find(\"h1+p\")</code> <em>or</em> <code>s.Next()</code> inside the <code>doc.Find(\"h1\").Each</code> function:</p>\n\n<pre><code>doc.Find(\"h1\").Each(func(i int, s *goquery.Selection) {\n    s.SetAttr(\"class\", \"title\")\n    class, _ := s.Attr(\"class\")\n    if class == \"title\" {\n        fmt.Println(class, s.Text())\n        fmt.Println(s.Next().Text())\n    }\n})\n</code></pre>\n\n<p>I can't figure out how to insert the text from <code>&lt;h1...\"title\"</code> to <code>&lt;p...\"text\"</code>. I've tried using quite a few variations of <code>s.After()</code>, <code>s.Before()</code>, and <code>s.Append()</code>, e.g., like this:</p>\n\n<pre><code>doc.Find(\"h1\").Each(func(i int, s *goquery.Selection) {\n    s.SetAttr(\"class\", \"title\")\n    class, _ := s.Attr(\"class\")\n    if class == \"title\" {\n        s.After(s.Text())\n        fmt.Println(s.Next().Text())\n    }\n})\n</code></pre>\n\n<p>but I can't figure out how to do exactly what I want.</p>\n\n<p>If I use <code>s.After(s.Next().Text())</code> instead, I get this error output:</p>\n\n<pre><code>panic: expected identifier, found 5 instead\n\ngoroutine 1 [running]:\ncode.google.com/p/cascadia.MustCompile(0xc2082f09a0, 0x62, 0x62)\n    /home/*/go/src/code.google.com/p/cascadia/selector.go:59 +0x77\ngithub.com/PuerkitoBio/goquery.(*Selection).After(0xc2082ea630, 0xc2082f09a0, 0x62, 0x5)\n    /home/*/go/src/github.com/PuerkitoBio/goquery/manipulation.go:18 +0x32\nmain.func\u00b7001(0x0, 0xc2082ea630)\n    /home/*/go/test2.go:78 +0x106\ngithub.com/PuerkitoBio/goquery.(*Selection).Each(0xc2082ea600, 0x7cb678, 0x2)\n    /home/*/go/src/github.com/PuerkitoBio/goquery/iteration.go:7 +0x173\nmain.ExampleScrape()\n    /home/*/go/test2.go:82 +0x213\nmain.main()\n    /home/*/go/test2.go:175 +0x1b\n\ngoroutine 9 [runnable]:\nnet/http.(*persistConn).readLoop(0xc208047ef0)\n    /usr/lib/go/src/net/http/transport.go:928 +0x9ce\ncreated by net/http.(*Transport).dialConn\n    /usr/lib/go/src/net/http/transport.go:660 +0xc9f\n\ngoroutine 17 [syscall, locked to thread]:\nruntime.goexit()\n    /usr/lib/go/src/runtime/asm_amd64.s:2232 +0x1\n\ngoroutine 10 [select]:\nnet/http.(*persistConn).writeLoop(0xc208047ef0)\n    /usr/lib/go/src/net/http/transport.go:945 +0x41d\ncreated by net/http.(*Transport).dialConn\n    /usr/lib/go/src/net/http/transport.go:661 +0xcbc\nexit status 2\n</code></pre>\n\n<p>(The lines of my script don't match the lines of the examples above, but \"line 72\" of my script contains the code <code>s.After(s.Next().Text())</code>. I don't know what exactly <code>panic: expected identifier, found 5 instead</code> means.)</p>\n\n<h3>Summary</h3>\n\n<p>In summary, my problem is that I can't quite wrap my head around how to use <code>goquery</code> to add text to a tag.</p>\n\n<p>I think I'm close. Would any gopher Jedis be able and willing to help this padawan?</p>\n"}, {"tags": ["go", "websocket", "socket.io", "cors"], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "edited": false, "score": 0, "creation_date": 1420683533, "post_id": 27831890, "comment_id": 44069799, "body": "Thanks for the tip, but I tried that with no luck.. Same error responses in the client.. Connects, then disconnects stating: <code>closed before the connection is established. (index):1 XMLHttpRequest cannot load https:&#47;&#47;api.domain.com&#47;socket.io&#47;?...  No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. Origin &#39;http:&#47;&#47;fiddle.jshell.net&#39; is therefore not allowed access.</code>"}], "tags": [], "owner": {"reputation": 1589, "user_id": 303882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e1965c029f488c25ecbcb7819ebf8f?s=128&d=identicon&r=PG", "display_name": "Dan Croak", "link": "https://stackoverflow.com/users/303882/dan-croak"}, "is_accepted": false, "score": 0, "last_activity_date": 1420682984, "creation_date": 1420682984, "answer_id": 27831890, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors/27831890#27831890", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>How about in your <code>SayHelloWorld</code> func, adding something like:</p>\n\n<pre><code>w.Header().Set(\"Access-Control-Allow-Origin\", \"*\")\n</code></pre>\n\n<p>Or, possibly better:</p>\n\n<pre><code>if origin := r.Header.Get(\"Origin\"); origin != \"\" {\n  w.Header().Set(\"Access-Control-Allow-Origin\", origin)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "edited": false, "score": 0, "creation_date": 1420715612, "post_id": 27833316, "comment_id": 44081380, "body": "Thank you for the reply, I am trying our your solution now. As a side note, I&#39;m confused as to why you mention I&#39;m not using the cors package.. <code>c := cors.New(cors.Options{...})</code> is the first block of code under <code>main()</code> -- am I using this incorrectly?"}, {"owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "edited": false, "score": 0, "creation_date": 1420717087, "post_id": 27833316, "comment_id": 44082218, "body": "I&#39;ve tried out your solution here with no luck.. (<a href=\"https://gist.github.com/acoyfellow/72cfc18acb2f0eee0b96\" rel=\"nofollow noreferrer\">gist.github.com/acoyfellow/72cfc18acb2f0eee0b96</a>) but I&#39;m still either: A) repeating my same mistake or B) doing something else wrong."}], "tags": [], "owner": {"reputation": 4679, "user_id": 749854, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541a5cb4925d352cac921c21e9213aa4?s=128&d=identicon&r=PG", "display_name": "nvcnvn", "link": "https://stackoverflow.com/users/749854/nvcnvn"}, "is_accepted": false, "score": 0, "last_activity_date": 1420693640, "creation_date": 1420693640, "answer_id": 27833316, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors/27833316#27833316", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>I get the similar problerm with normal ajax call. It require more work in both front-end and backend. I belive most popular front-end libs liek JQuery or AngularJS handle these very well.<br>\nI see you're using the <a href=\"https://github.com/rs/cors\" rel=\"nofollow\">https://github.com/rs/cors</a> package but you don't include the usage of that package, here is the implement with only Go std package:</p>\n\n<pre><code>type CrossOriginServer struct {}\n\nfunc (s *CrossOriginServer) ServeHTTP(rw http.ResponseWriter, req *http.Request) {\n    // you may need to add some more headers here\n    allowHeaders := \"Accept, Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization\"\n    if origin := req.Header.Get(\"Origin\"); validOrigin(origin) {\n        rw.Header().Set(\"Access-Control-Allow-Origin\", origin)\n        rw.Header().Set(\"Access-Control-Allow-Methods\", \"POST, PUT, PATCH, GET, DELETE\")\n        rw.Header().Set(\"Access-Control-Allow-Headers\", allowHeaders)\n    }\n    if req.Method == \"OPTIONS\" {\n        return\n    }\n\n    // if you want, you can use gorilla/mux or any routing package here\n    mux := http.NewServeMux()\n    mux.Handle(\"/socket.io/\", c.Handler(server))\n    mux.HandleFunc(\"/\", SayHelloWorld)\n\n    mux.ServeHTTP(rw, req)\n}\n\nfunc validOrigin(origin string) bool {\n    allowOrigin := []string{\n        \"http://localhost:8081\",\n        \"http://example.com\"\n    }\n\n    for _, v := range allowOrigin {\n        if origin == v {\n            return true\n        }\n    }\n\n    return false\n}\n\nfunc main() {\n    // do you stuff\n    // ...\n    // ...\n\n    http.ListenAndServe(\":8080\", &amp;CrossOriginServer{})\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "edited": false, "score": 0, "creation_date": 1420730973, "post_id": 27841103, "comment_id": 44091008, "body": "Hmm.. I&#39;m having trouble interpreting your answer (and the linked one). I already have a Node.js/Socket.io cluster that uses websockets over CORS no problem, so now I&#39;m just confused even more. It sounds like your saying I need to send my origin from the client to the socket.io server, but I don&#39;t understand. Doesn&#39;t it automatically fill? I can&#39;t see anything in the Socket.io client API about setting a origin explicitly"}], "tags": [], "owner": {"reputation": 3715, "user_id": 280526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0ee26a5c307c0b6ac4d1ed4659ffe1b?s=128&d=identicon&r=PG", "display_name": "NebuSoft", "link": "https://stackoverflow.com/users/280526/nebusoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1420723129, "last_edit_date": 1495539958, "creation_date": 1420723129, "answer_id": 27841103, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors/27841103#27841103", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>It appears that CORS does not apply to WebSockets. Per this related question \"With WebSocket, there is an \"origin\" header, which browser MUST fill with the origin of the HTML containing the JS that opens the WS connection.\"</p>\n\n<p>As stated here: \n<a href=\"https://stackoverflow.com/questions/11076658/cross-origin-websockets-with-golang\">Cross origin websockets with Golang</a></p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "is_accepted": true, "score": 9, "last_activity_date": 1420759607, "last_edit_date": 1592644375, "creation_date": 1420759607, "answer_id": 27851406, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors/27851406#27851406", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>So I gave up using googoolee's Socket.io implementation and went with gorilla's.</p>\n<p>I checked out their examples: <a href=\"https://github.com/gorilla/websocket/tree/master/examples/chat\" rel=\"noreferrer\">https://github.com/gorilla/websocket/tree/master/examples/chat</a></p>\n<p>Checked out their docs: <a href=\"http://www.gorillatoolkit.org/pkg/websocket\" rel=\"noreferrer\">http://www.gorillatoolkit.org/pkg/websocket</a>\n-- Under Origin Considerations I found:</p>\n<blockquote>\n<p>An application can allow connections from any origin by specifying a function that always returns true:</p>\n<p>var upgrader = websocket.Upgrader{\nCheckOrigin: func(r *http.Request) bool { return true },\n}</p>\n</blockquote>\n<p>I added this <code>CheckOrigin</code> function to the <code>conn.go</code> file in their example, and was able to get a CORS socket server talking to a browser.</p>\n<p>As a first adventure into Golang, this was frustrating and fun.. +1 to anyone else learning</p>\n"}, {"comments": [{"owner": {"reputation": 4410, "user_id": 2709301, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sCvqY.jpg?s=128&g=1", "display_name": "tjons", "link": "https://stackoverflow.com/users/2709301/tjons"}, "edited": false, "score": 1, "creation_date": 1421539273, "post_id": 28005668, "comment_id": 44399803, "body": "This should be a comment, not an answer. Upvoted so you can have commenting privileges now."}], "tags": [], "owner": {"reputation": 31, "user_id": 4465930, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a43b4c0250ce5496845e22758f77b812?s=128&d=identicon&r=PG", "display_name": "george", "link": "https://stackoverflow.com/users/4465930/george"}, "is_accepted": false, "score": 3, "last_activity_date": 1421538793, "creation_date": 1421538793, "answer_id": 28005668, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors/28005668#28005668", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>Don't you mean http + ws or https + wss. If you remove a s from wss, you should be able to connect.</p>\n\n<p>If you want tls for web socket (wss), then you need to http.ListenAndServeTLS.</p>\n"}], "owner": {"reputation": 184, "user_id": 1178564, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01fc0036949a6efdabc5c7647a21b442?s=128&d=identicon&r=PG", "display_name": "Jordan Coeyman", "link": "https://stackoverflow.com/users/1178564/jordan-coeyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11226, "favorite_count": 4, "accepted_answer_id": 27851406, "answer_count": 5, "score": 2, "last_activity_date": 1421538793, "creation_date": 1420662409, "last_edit_date": 1420746532, "question_id": 27828052, "link": "https://stackoverflow.com/questions/27828052/go-socket-io-http-wss-on-one-port-with-cors", "title": "Go &amp; Socket.io HTTP + WSS on one port with CORS?", "body": "<p>Brand new to Go.. Still obviously learning the syntax and the basics.. But I do have a specific goal in mind..</p>\n\n<p>I'm trying to just get a simple server up on :8080 that can respond to both HTTP and socket.io (via <code>/socket.io/</code> url), specificaly with CORS.</p>\n\n<p>My code:</p>\n\n<pre><code>package main\n\nimport (\n     \"log\"         \n     \"net/http\"\n     \"github.com/rs/cors\"\n     \"github.com/googollee/go-socket.io\"\n )\n\n func SayHelloWorld(w http.ResponseWriter, r *http.Request) {\n     w.Write([]byte(\"Hello, World!\"))\n }\n\n func main() {\n\n   c := cors.New(cors.Options{\n         AllowedOrigins: []string{\"*\"},\n         AllowCredentials: true,\n   })\n\n   server, err := socketio.NewServer(nil)\n     if err != nil {\n         log.Fatal(err)\n     }\n\n\n   server.On(\"connection\", func(so socketio.Socket) {\n      log.Println(\"on connection\")\n      so.Join(\"chat\")\n      so.On(\"chat message\", func(msg string) {\n          log.Println(\"emit:\", so.Emit(\"chat message\", msg))\n          so.BroadcastTo(\"chat\", \"chat message\", msg)\n      })\n      so.On(\"disconnection\", func() {\n          log.Println(\"on disconnect\")\n      })\n   })\n\n   server.On(\"error\", func(so socketio.Socket, err error) {\n      log.Println(\"error:\", err)\n   })    \n\n\n   http.Handle(\"/socket.io/\", c.Handler(server))\n   http.HandleFunc(\"/\", SayHelloWorld)\n   log.Println(\"Serving at localhost:8080...\")\n   log.Fatal(http.ListenAndServe(\":8080\", nil))\n}\n</code></pre>\n\n<p>On the client side I'm still seeing:</p>\n\n<blockquote>\n  <p>WebSocket connection to 'wss://api.domain.com/socket.io/?EIO=3&amp;transport=websocket&amp;sid=xNWd9aZvwDnZOrXkOBaC' failed: WebSocket is closed before the connection is established.</p>\n  \n  <p>(index):1 XMLHttpRequest cannot load <a href=\"https://api.domain.com/socket.io/?EIO=3&amp;transport=polling&amp;t=1420662449235-3932&amp;sid=xNWd9aZvwDnZOrXkOBaC\" rel=\"nofollow\">https://api.domain.com/socket.io/?EIO=3&amp;transport=polling&amp;t=1420662449235-3932&amp;sid=xNWd9aZvwDnZOrXkOBaC</a>. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin '<a href=\"http://fiddle.jshell.net\" rel=\"nofollow\">http://fiddle.jshell.net</a>' is therefore not allowed access.</p>\n</blockquote>\n\n<p><strong><em>EDIT #1:</em></strong></p>\n\n<p>So I've been banging my head away trying to understand why I can't connect.. Came across an even more confusing piece of the puzzle?</p>\n\n<p><a href=\"https://gist.github.com/acoyfellow/167b055da85248c94fc4\" rel=\"nofollow\">https://gist.github.com/acoyfellow/167b055da85248c94fc4</a></p>\n\n<p>The above gist is the code of my golang server + the browser code used to connect.. This code will send 30 HTTP GET requests <strong>per second</strong> to the backend, without connecting, upgrading, or giving any errors (client or server side).. it essentially DDOS's my own backend?</p>\n\n<p>Someone, please someone tell me I'm doing something stupid.. This is quite the pickle :P</p>\n\n<p><strong><em>EDIT #2:</em></strong></p>\n\n<p>I can stop the \"DDOS\" by simply adjusting the trailing <code>/</code> on the URL of the socket.io endpoint in Go.. So: <code>mux.Handle(\"/socket.io\", server)</code> to <code>mux.Handle(\"/socket.io/\", server)</code> will now produce error messages and connection attempts with error responses of:</p>\n\n<blockquote>\n  <p>WebSocket connection to 'wss://api.domain.com/socket.io/?EIO=3&amp;transport=websocket&amp;sid=0TzmTM_QtF1TaS4exiwF' failed: Error during WebSocket handshake: Unexpected response code: 400 socket.io-1.2.1.js:2 </p>\n  \n  <p>GET <a href=\"https://api.domain.com/socket.io/?EIO=3&amp;transport=polling&amp;t=1420743204485-62&amp;sid=0TzmTM_QtF1TaS4exiwF\" rel=\"nofollow\">https://api.domain.com/socket.io/?EIO=3&amp;transport=polling&amp;t=1420743204485-62&amp;sid=0TzmTM_QtF1TaS4exiwF</a> 400 (Bad Request)</p>\n</blockquote>\n"}, {"tags": ["memory", "memory-management", "syntax", "go"], "answers": [{"comments": [{"owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 0, "creation_date": 1420664895, "post_id": 27828296, "comment_id": 44063289, "body": "if <code>(*T)(nil)</code> doesn&#39;t allocate memory, why I have access to its Struct&#39;s fields? <code>unsafe</code> shows the same values as if I just use new(T)"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 6, "creation_date": 1420668033, "post_id": 27828296, "comment_id": 44064785, "body": "You don&#39;t have access."}, {"owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 0, "creation_date": 1420704957, "post_id": 27828296, "comment_id": 44075859, "body": "Yes, you&#39;re right! It was autocompletion) Sorry for my noob questions, but if so, why the empty pointer still takes bytes?"}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 2, "creation_date": 1420706281, "post_id": 27828296, "comment_id": 44076359, "body": "What do you mean with &quot;empty pointer still takes bytes&quot;? The pointer itself needs space (typically 8 bytes) to be stored but it points to nowhere: there is no RAM allocated for the struct the pointer may point to."}, {"owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "edited": false, "score": 0, "creation_date": 1420707439, "post_id": 27828296, "comment_id": 44076922, "body": "Thank you I&#39;ve heard what I wanted)"}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": true, "score": 12, "last_activity_date": 1420673218, "last_edit_date": 1420673218, "creation_date": 1420663414, "answer_id": 27828296, "question_id": 27827871, "link": "https://stackoverflow.com/questions/27827871/what-the-difference-between-tnil-and-t-newt-golang/27828296#27828296", "title": "What the difference between (*T)(nil) and &amp;T{}/new(T)? Golang", "body": "<p>The two forms <code>new(T)</code> and <code>&amp;T{}</code> are completely equivalent: Both allocate a zero T and return a pointer to this allocated memory. The only difference is, that <code>&amp;T{}</code> doesn't work for builtin types like <code>int</code>; you can only do <code>new(int)</code>.</p>\n\n<p>The form <code>(*T)(nil)</code> does <em>not</em> allocate a <code>T</code> it just returns a nil pointer to T. Your <code>test3 := (*Struct)(nil)</code> is just a obfuscated variant of the idiomatic <code>var test3 *Struct</code>.</p>\n"}], "owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 3, "accepted_answer_id": 27828296, "answer_count": 1, "score": 6, "last_activity_date": 1420673218, "creation_date": 1420661664, "question_id": 27827871, "link": "https://stackoverflow.com/questions/27827871/what-the-difference-between-tnil-and-t-newt-golang", "title": "What the difference between (*T)(nil) and &amp;T{}/new(T)? Golang", "body": "<p>Could anybody explain what the subtle difference between these two notations: <code>(*T)(nil)/new(T)</code> and <code>&amp;T{}</code>. </p>\n\n<pre><code>type Struct struct {\n    Field int\n}\n\nfunc main() {\n    test1 := &amp;Struct{}\n    test2 := new(Struct)\n    test3 := (*Struct)(nil)\n    fmt.Printf(\"%#v, %#v, %#v \\n\", test1, test2, test3)\n    //&amp;main.Struct{Field:0}, &amp;main.Struct{Field:0}, (*main.Struct)(nil) \n}\n</code></pre>\n\n<p>Seems like the only difference of this one <code>(*T)(nil)</code> from other is that it returns nil pointer or no pointer, but still allocates memory for all fields of the Struct.</p>\n"}, {"tags": ["google-app-engine", "go"], "comments": [{"owner": {"reputation": 1620, "user_id": 4316235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46c2d21f13517cd4460f4513815fd46?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Deskins", "link": "https://stackoverflow.com/users/4316235/jeff-deskins"}, "edited": false, "score": 0, "creation_date": 1420665158, "post_id": 27827752, "comment_id": 44063407, "body": "You may see that error if you are trying to access the server from the APP_ID.appspot.com url.  You should access the instance directly by public ip (or CNAME).  If running locally, since you mentioned 127.0.0.1, then use the docker container ip."}, {"owner": {"reputation": 734, "user_id": 2863194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tTcA9.png?s=128&g=1", "display_name": "SWilly22", "link": "https://stackoverflow.com/users/2863194/swilly22"}, "reply_to_user": {"reputation": 1620, "user_id": 4316235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46c2d21f13517cd4460f4513815fd46?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Deskins", "link": "https://stackoverflow.com/users/4316235/jeff-deskins"}, "edited": false, "score": 0, "creation_date": 1420713332, "post_id": 27827752, "comment_id": 44080108, "body": "Still no luck, I&#39;ve deployed my app to &quot;production&quot;, updated my websocket url to point to my appspot url (i&#39;m running only one instance for the time being) and i&#39;m still receiving: &quot;WebSocket connection to &#39;ws://APPID.appspot.com/connect&#39; failed: Error during WebSocket handshake: Unexpected response code: 400&quot;"}, {"owner": {"reputation": 1620, "user_id": 4316235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46c2d21f13517cd4460f4513815fd46?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Deskins", "link": "https://stackoverflow.com/users/4316235/jeff-deskins"}, "edited": false, "score": 1, "creation_date": 1420744945, "post_id": 27827752, "comment_id": 44099536, "body": "You cannot use the appspot.com url for websockets.  You need to use the ip address of the managed-vm to hit the server directly.  Using the appspot.com url, you are hitting other Google frontend servers before you get to the app."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 4271541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3324609d234e06bd42ad72b1b0fa8fd9?s=128&d=identicon&r=PG&f=1", "display_name": "Mohab", "link": "https://stackoverflow.com/users/4271541/mohab"}, "is_accepted": false, "score": 0, "last_activity_date": 1426303538, "creation_date": 1426303538, "answer_id": 29045097, "question_id": 27827752, "link": "https://stackoverflow.com/questions/27827752/websocket-support-in-managed-vm/29045097#29045097", "title": "Websocket support in managed vm", "body": "<p>As per Google's <a href=\"https://cloud.google.com/appengine/docs/java/managed-vms/sdk\" rel=\"nofollow\">documentation</a> and the <a href=\"https://github.com/GoogleCloudPlatform/appengine-websocketchat-java\" rel=\"nofollow\">example</a> included over there, Managed VMs supports WebSocket in \"Java\" language as for now. May be in the future release (as Managed VMs is still in its Beta version), \"GO\" language will be put into consideration for addressing such functionality and/or feature. </p>\n"}], "owner": {"reputation": 734, "user_id": 2863194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tTcA9.png?s=128&g=1", "display_name": "SWilly22", "link": "https://stackoverflow.com/users/2863194/swilly22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1294, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1426303538, "creation_date": 1420661172, "last_edit_date": 1420701437, "question_id": 27827752, "link": "https://stackoverflow.com/questions/27827752/websocket-support-in-managed-vm", "title": "Websocket support in managed vm", "body": "<p>I've tried using <a href=\"https://github.com/gorilla/websocket\" rel=\"nofollow\">websockets</a> within my Golang application served from Google's <a href=\"https://cloud.google.com/appengine/docs/go/managed-vms/\" rel=\"nofollow\">managed vm</a> but I couldn't get it to work, from Chrome developer console I'm getting: </p>\n\n<blockquote>\n  <p>WebSocket connection to 'ws://127.0.0.1:8080/connect' failed: Error\n  during WebSocket handshake: Unexpected response code: 400\" and on my\n  backend I'm getting: \"websocket: connection header != upgrade.</p>\n</blockquote>\n\n<p>My question, does managed vm supports Golang websockets? If so a code snip would be appreciated.</p>\n"}, {"tags": ["pointers", "interface", "go"], "comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 1, "creation_date": 1420660456, "post_id": 27827500, "comment_id": 44060908, "body": "<a href=\"http://stackoverflow.com/a/23148998/6309\">stackoverflow.com/a/23148998/6309</a> can illustrates a bit the pointer included in an interface."}], "answers": [{"comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420664388, "post_id": 27828432, "comment_id": 44063021, "body": "Also, it&#39;s often redundant to pass a pointer to an <code>interface</code> type to avoid copying--it&#39;s already a small (two-word) value. If it helps, here are <a href=\"http://research.swtch.com/interfaces\" rel=\"nofollow noreferrer\">Russ Cox&#39;s post on how interface values are stored</a> and <a href=\"http://stackoverflow.com/questions/23542989/pointers-vs-values-in-parameters-and-return-values/23551970#23551970\">an answer covering what other Go types are implemented with pointers</a>."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "reply_to_user": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 4, "creation_date": 1420664540, "post_id": 27828432, "comment_id": 44063096, "body": "@twotwotwo: Correct. One should &quot;never&quot; pass interface values via pointers with &quot;never&quot; in the sense of &quot;until you have to and you will know when you have to&quot;."}], "tags": [], "owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "is_accepted": false, "score": 3, "last_activity_date": 1420664588, "last_edit_date": 1420664588, "creation_date": 1420663925, "answer_id": 27828432, "question_id": 27827500, "link": "https://stackoverflow.com/questions/27827500/in-what-sense-can-gos-interface-be-considered-a-pointer/27828432#27828432", "title": "In what sense can Go&#39;s interface be considered a pointer?", "body": "<p>This quote is strange. I think he wants to say something in the line of this: Methods on pointer receivers are a clear indication that the method may modify the receiver as the method is invoked on the original struct and not on a copy. This clear indication of \"You work on pointers here, this might modify the original!\" is lost once you wrap a struct in an interface value: You may pass around copies of the interface value but all these copies wrap the same struct.</p>\n"}], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1420664588, "creation_date": 1420660255, "question_id": 27827500, "link": "https://stackoverflow.com/questions/27827500/in-what-sense-can-gos-interface-be-considered-a-pointer", "title": "In what sense can Go&#39;s interface be considered a pointer?", "body": "<p>In <a href=\"http://matt-welsh.blogspot.pt/2013/08/rewriting-large-production-system-in-go.html\" rel=\"nofollow\">this blog post</a> the author states that:</p>\n\n<blockquote>\n  <p>Structs can implement interfaces, of course, so in general you tend to\n  treat these as the same thing. But when you're dealing with a struct,\n  you might be passing by reference, in which the type is *myStruct, or\n  you might be passing by value, in which the type is just myStruct. If,\n  on the other hand, the thing you're dealing with is \"just\" an\n  interface, you never have a pointer to it -- <strong>an interface is a pointer</strong>\n  <strong>in some sense</strong>. It can get confusing when you're looking at code that\n  is passing things around without the * to remember that it might\n  actually \"be a pointer\" if it's an interface rather than a struct.</p>\n</blockquote>\n\n<p>In what sense can Go's interface be considered a pointer? Please provide some examples.</p>\n"}, {"tags": ["variables", "types", "go", "type-inference"], "answers": [{"tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": true, "score": 3, "last_activity_date": 1430153259, "last_edit_date": 1430153259, "creation_date": 1420659380, "answer_id": 27827262, "question_id": 27827199, "link": "https://stackoverflow.com/questions/27827199/how-can-i-get-information-about-type-of-a-go-variable/27827262#27827262", "title": "How can I get information about type of a Go variable", "body": "<p>You are looking for something like <a href=\"https://godoc.org/github.com/rogpeppe/godef\" rel=\"nofollow\"><code>godef</code></a></p>\n\n<blockquote>\n  <p>If the -t flag is given, the type of the expression will also be\n  printed. The -a flag causes all the public members (fields and\n  methods) of the expression, and their location, to be printed also;\n  the -A flag prints private members too.</p>\n</blockquote>\n\n<p>I know it is being used by various vim and emacs scripts.</p>\n"}, {"tags": [], "owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1429812321, "creation_date": 1429812321, "answer_id": 29831125, "question_id": 27827199, "link": "https://stackoverflow.com/questions/27827199/how-can-i-get-information-about-type-of-a-go-variable/29831125#29831125", "title": "How can I get information about type of a Go variable", "body": "<p>The <a href=\"https://golang.org/s/oracle-user-manual\" rel=\"nofollow\">Go Oracle</a> does this and much more.</p>\n\n<p><a href=\"https://github.com/fatih/vim-go\" rel=\"nofollow\"><code>vim-go</code></a> is a complete vim setup for Go.\nIt includes integration with the previously mentioned <a href=\"https://godoc.org/github.com/rogpeppe/godef\" rel=\"nofollow\"><code>godef</code></a> (as :GoDef) and Go oracle (as :GoImplements, :GoCallees, :GoReferrers, etc) as well as other tools.</p>\n"}], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 27827262, "answer_count": 2, "score": 0, "last_activity_date": 1430153259, "creation_date": 1420659132, "question_id": 27827199, "link": "https://stackoverflow.com/questions/27827199/how-can-i-get-information-about-type-of-a-go-variable", "title": "How can I get information about type of a Go variable", "body": "<p>Suppose I have the following code in Go:</p>\n\n<pre><code>foo, bar := someFunc(baz) \n</code></pre>\n\n<p>I would like to create a Vim function to check type of <code>foo</code> or <code>bar</code> when editing a file.</p>\n\n<p>Is there any tool or reliable source of information for functions from Go's packages I could use or? As for the functions declared in the file I'm editing I was thinking about simply parsing all the functions declared in that file.</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1420647668, "post_id": 27823430, "comment_id": 44053471, "body": "Please do realize that it&#39;s easily possible to fake the executable name in <code>os.Args</code> by the program that executed the application. This isn&#39;t a problem <i>per-se</i> but might cause security issues if the application runs with elevated permissions."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1420649611, "post_id": 27823430, "comment_id": 44054725, "body": "@FUZxxl I don&#39;t know of a pre-baked way to do it, but you can always use <code>os.GetPid()</code> to get our current process id, and then look up the executable path in <code>&#47;proc&#47;&lt;pid&gt;&#47;exe</code>. And then you can make sure that this is in fact the current executable."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1420649873, "post_id": 27823430, "comment_id": 44054863, "body": "Well, if you like to tie yourself to Linux\u2026 this method is not really portable; most operating systems provide a way to figure out what name the binary of a running process has, but the way to do this is different on each."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1420650915, "post_id": 27823430, "comment_id": 44055492, "body": "@FUZxxl of course, which is why go supports _windows.go build rules, etc etc."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1420651318, "post_id": 27823430, "comment_id": 44055728, "body": "Notably, the package you suggest doesn&#39;t use them. I&#39;m not really sure if Windows has a process-replacing <code>exec()</code> anyway."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1420652553, "post_id": 27823430, "comment_id": 44056435, "body": "@FUZxxl yes it does. of course the semantics are a bit different, and replacing an executable is not that simple because it&#39;s &quot;locked&quot;, but it&#39;s certainly possible: <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1420653128, "post_id": 27823430, "comment_id": 44056773, "body": "As far as I know, Microsoft Windows&#39; <code>CreateProcess</code> creates a new process instead of replacing an existing one and is thus not a suitable replacement for <code>exec()</code> in this context. Remember, <code>exec()</code> replaces the image of the calling process without creating a new process. To create a new process on Unix, you use <code>fork()</code>, then <code>exec()</code>."}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": true, "score": 11, "last_activity_date": 1420646467, "creation_date": 1420646467, "answer_id": 27823430, "question_id": 27823042, "link": "https://stackoverflow.com/questions/27823042/is-it-possible-for-a-go-binary-to-reload-itself/27823430#27823430", "title": "Is it possible for a go binary to reload itself?", "body": "<p>Yes, it is possible using <code>os.Args</code> which holds the executable name of the current process, and the <code>os.exec</code> package that can start and fork processes. A good example is how it is done in the <code>goagain</code> package, which supports zero downtime restarts. In fact, you can probably just use it. </p>\n\n<p>See <a href=\"https://github.com/rcrowley/goagain\">https://github.com/rcrowley/goagain</a> </p>\n\n<p>and more specifically in this file: <a href=\"https://github.com/rcrowley/goagain/blob/master/goagain.go#L77\">https://github.com/rcrowley/goagain/blob/master/goagain.go#L77</a></p>\n"}], "owner": {"reputation": 3624, "user_id": 197017, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/59bbbf963f8a584e895b5d860235faa7?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/197017/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6540, "favorite_count": 2, "accepted_answer_id": 27823430, "answer_count": 1, "score": 6, "last_activity_date": 1420646467, "creation_date": 1420645201, "question_id": 27823042, "link": "https://stackoverflow.com/questions/27823042/is-it-possible-for-a-go-binary-to-reload-itself", "title": "Is it possible for a go binary to reload itself?", "body": "<p>I'm using go-update (<a href=\"https://github.com/inconshreveable/go-update\" rel=\"noreferrer\">https://github.com/inconshreveable/go-update</a>) to update a Go binary that I distribute to users. Right now, when the running go program detects a new version, it sends a message to the user asking them to to quit and restart the program.</p>\n\n<p>Is it possible for the running go program to reload itself from the new binary?</p>\n\n<p>This was asked in the go-update issue tracker, but no answer:\n<a href=\"https://github.com/inconshreveable/go-update/issues/5\" rel=\"noreferrer\">https://github.com/inconshreveable/go-update/issues/5</a></p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 1662, "user_id": 961517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nboyt.png?s=128&g=1", "display_name": "Gima", "link": "https://stackoverflow.com/users/961517/gima"}, "edited": false, "score": 0, "creation_date": 1420652638, "post_id": 27822257, "comment_id": 44056482, "body": "Thank you, but this solution needs to know the type of the map&#39;s key at compile-time, and hence fails with other key types."}], "tags": [], "owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "is_accepted": false, "score": 5, "last_activity_date": 1420647959, "last_edit_date": 1420647959, "creation_date": 1420642984, "answer_id": 27822257, "question_id": 27821827, "link": "https://stackoverflow.com/questions/27821827/how-to-access-maps-nil-key-using-reflection/27822257#27822257", "title": "How to access map&#39;s nil key using reflection?", "body": "<p>Here's one way to create a <code>reflect.Value</code> for a <code>nil</code> value of type <code>interface{}</code>:</p>\n\n<pre><code>rkey := reflect.ValueOf(new(interface{})).Elem()\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/4bU1LNp6JS\" rel=\"nofollow\">playground example</a></p>\n"}, {"tags": [], "owner": {"reputation": 1662, "user_id": 961517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nboyt.png?s=128&g=1", "display_name": "Gima", "link": "https://stackoverflow.com/users/961517/gima"}, "is_accepted": true, "score": 2, "last_activity_date": 1420652515, "creation_date": 1420652515, "answer_id": 27825346, "question_id": 27821827, "link": "https://stackoverflow.com/questions/27821827/how-to-access-maps-nil-key-using-reflection/27825346#27825346", "title": "How to access map&#39;s nil key using reflection?", "body": "<p>The missing piece appears to have been the <em>zero value</em> of the map's key type, which is needed to access the nil key of the map.</p>\n\n<pre><code>refmap.MapIndex(reflect.Zero(refmap.Type().Key()))\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/JfPYA2qOIZ\" rel=\"nofollow\">playground example</a></p>\n"}], "owner": {"reputation": 1662, "user_id": 961517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nboyt.png?s=128&g=1", "display_name": "Gima", "link": "https://stackoverflow.com/users/961517/gima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "accepted_answer_id": 27825346, "answer_count": 2, "score": 3, "last_activity_date": 1420652515, "creation_date": 1420641498, "question_id": 27821827, "link": "https://stackoverflow.com/questions/27821827/how-to-access-maps-nil-key-using-reflection", "title": "How to access map&#39;s nil key using reflection?", "body": "<p>I have a map that has a nil-keyed value:</p>\n\n<pre><code>mapp := map[interface{}]interface{}{\n    nil: \"a\",\n}\n</code></pre>\n\n<p>Accessing it's nil key's directly works:</p>\n\n<pre><code>fmt.Println(\"key[nil]:\", mapp[nil])\n</code></pre>\n\n<p>But using reflection it doesn't - how to do this?</p>\n\n<pre><code>rmapp := reflect.ValueOf(mapp)\nrkey := reflect.ValueOf(interface{}(nil))\nrval := rmapp.MapIndex(rmapp.MapIndex(rkey))\nfmt.Println(\"key[nil]:\", rval)\n</code></pre>\n\n<p>Non-working code here:<br>\n<a href=\"https://play.golang.org/p/6TKN_tDNgV\" rel=\"nofollow\">https://play.golang.org/p/6TKN_tDNgV</a></p>\n"}, {"tags": ["go", "floating-point", "floating-accuracy"], "comments": [{"owner": {"reputation": 16714, "user_id": 426894, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LyG6D.jpg?s=128&g=1", "display_name": "asawyer", "link": "https://stackoverflow.com/users/426894/asawyer"}, "edited": false, "score": 0, "creation_date": 1420663157, "post_id": 27819137, "comment_id": 44062355, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 16714, "user_id": 426894, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LyG6D.jpg?s=128&g=1", "display_name": "asawyer", "link": "https://stackoverflow.com/users/426894/asawyer"}, "edited": false, "score": 1, "creation_date": 1420716418, "post_id": 27819137, "comment_id": 44081840, "body": "@asawyer Not really. OP is wondering why these two yield different results, not why one of the results is not exactly 9.12."}], "answers": [{"comments": [{"owner": {"reputation": 13363, "user_id": 252239, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f2ada894473b5170440f31412c6a84ec?s=128&d=identicon&r=PG", "display_name": "Attila O.", "link": "https://stackoverflow.com/users/252239/attila-o"}, "edited": false, "score": 0, "creation_date": 1420633524, "post_id": 27819409, "comment_id": 44044648, "body": "&quot;In the first case the result will be converted to <code>float64</code> when passed to the <code>Println()</code>&quot; \u2014 you mean the result of multiplying two untyped constants, right?"}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 13363, "user_id": 252239, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f2ada894473b5170440f31412c6a84ec?s=128&d=identicon&r=PG", "display_name": "Attila O.", "link": "https://stackoverflow.com/users/252239/attila-o"}, "edited": false, "score": 0, "creation_date": 1420633589, "post_id": 27819409, "comment_id": 44044678, "body": "@AttilaO. Yes, the result of the multiplication. When it is passed to the <code>Println()</code> function, it has to be converted to a typed value. Also edited to add code to show the type of the result."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 6, "last_activity_date": 1420641518, "last_edit_date": 1420641518, "creation_date": 1420633218, "answer_id": 27819409, "question_id": 27819137, "link": "https://stackoverflow.com/questions/27819137/why-do-these-two-float64s-have-different-values/27819409#27819409", "title": "Why do these two float64s have different values?", "body": "<p>The reason for the different output is that in the first case <code>912 * 0.01</code> is the multiplication of 2 untyped constant values which is of arbitrary precision, and only the result is converted to <code>float64</code> when the value is passed to <code>Println()</code>. (See <a href=\"http://golang.org/ref/spec#Constant_expressions\" rel=\"nofollow\">Constant expressions</a> section of the Language specification for details.)</p>\n\n<p>In the second case <code>float64(912) * 0.01</code> first <code>912</code> is converted to <code>float64</code>, then the untyped constant <code>0.01</code> is converted to <code>float64</code> and these two values having <code>float64</code> are multiplied which is not an arbitrary precision, and will not give exact result.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>In the first case the result will be converted to <code>float64</code> when passed to the <code>Println()</code>:</p>\n\n<pre><code>fmt.Printf(\"%T %v\\n\", 912 * 0.01, 912 * 0.01)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>float64 9.12\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/26ZNgxcA9p\" rel=\"nofollow\">Test it on Go Playground</a></p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 14, "last_activity_date": 1420633496, "creation_date": 1420633496, "answer_id": 27819483, "question_id": 27819137, "link": "https://stackoverflow.com/questions/27819137/why-do-these-two-float64s-have-different-values/27819483#27819483", "title": "Why do these two float64s have different values?", "body": "<p>As per <a href=\"http://golang.org/ref/spec#Constant_expressions\">spec</a>:</p>\n\n<blockquote>\n  <p>Constant expressions are always evaluated exactly; intermediate values and the constants themselves may require precision significantly larger than supported by any predeclared type in the language.</p>\n</blockquote>\n\n<p>Since</p>\n\n<pre><code>912 * 0.01\n</code></pre>\n\n<p>is a constant expression, it is evaluated exactly. Thus, writing <code>fmt.Println(912 * 0.01)</code> has the same effect as writing <code>fmt.Println(9.12)</code>. When you pin <code>912</code> to <code>float64</code>, the other operand of the floating-point multiplication is implicitly pinned to <code>float64</code>, too. Thus, the expression <code>float64(912) * 0.01</code> behaves like <code>float64(912) * float64(0.01)</code>. 0.01 is not exactly representable in a <code>float64</code>, thus precision is lost in a different place than in the expression <code>float64(912 * 0.01)</code> which arises in the argument of <code>fmt.Println()</code> in your first example, explaining the different results.</p>\n"}], "owner": {"reputation": 13363, "user_id": 252239, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f2ada894473b5170440f31412c6a84ec?s=128&d=identicon&r=PG", "display_name": "Attila O.", "link": "https://stackoverflow.com/users/252239/attila-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 2, "accepted_answer_id": 27819483, "answer_count": 2, "score": 9, "last_activity_date": 1420641518, "creation_date": 1420632276, "last_edit_date": 1495541720, "question_id": 27819137, "link": "https://stackoverflow.com/questions/27819137/why-do-these-two-float64s-have-different-values", "title": "Why do these two float64s have different values?", "body": "<p>Consider these two cases:</p>\n\n<pre><code>fmt.Println(912 * 0.01)\nfmt.Println(float64(912) * 0.01)\n</code></pre>\n\n<p>(<a href=\"http://play.golang.org/p/k3OLoemaA8\" rel=\"nofollow noreferrer\">Go Playground link</a>)</p>\n\n<p>The second one prints 9.120000000000001, which is actually fine, <a href=\"https://stackoverflow.com/questions/21895756/why-are-floating-point-numbers-inaccurate\">I understand why that is happening</a>.</p>\n\n<p>However, why does the first line print 9.12, without the \u202601 at the end? Does Go multiply the two untyped constants and simply replace them with a 9.12 literal when compiling?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 579, "user_id": 2416204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSoph.jpg?s=128&g=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/2416204/bruno"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1420621972, "post_id": 27814942, "comment_id": 44038044, "body": "Waiting a few days if anyone comes up with a clever wrapper or manipulating the `Request&#180;, otherwise feel free to add as answer then."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1420624995, "post_id": 27814942, "comment_id": 44039734, "body": "@Bruno doing it by extending the default roundtripper is no biggie, are you interested in that? I did something similar when implementing an http cache."}, {"owner": {"reputation": 579, "user_id": 2416204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSoph.jpg?s=128&g=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/2416204/bruno"}, "reply_to_user": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1420629465, "post_id": 27814942, "comment_id": 44042326, "body": "@Not_a_Golfer Oh yes, would be highly appreciated.   New to Go so my impression was that i&#39;D have to rewrite either <a href=\"http://golang.org/src/net/http/client.go#L302\" rel=\"nofollow noreferrer\">golang.org/src/net/http/client.go#L302</a> or <a href=\"https://github.com/pkulak/simpletransport/blob/master/simpletransport/simple_transport.go\" rel=\"nofollow noreferrer\">github.com/pkulak/simpletransport/blob/master/simpletranspor&zwnj;&#8203;t/&hellip;</a> to achieve this, but an example of how to achieve by simple extension would be like Birthday &amp; New Years rolle d into one!"}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1420636888, "post_id": 27814942, "comment_id": 44046470, "body": "@Bruno okay I&#39;ll try, but I might have missed something in your question and it is more complicated than I thought."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420641070, "post_id": 27814942, "comment_id": 44049000, "body": "@Bruno: Can you clarify what you want? The documentation specifically says <code>If CheckRedirect returns an error, the Client&#39;s Get method returns both the previous Response and CheckRedirect&#39;s error</code>. You should have the response available."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420642361, "post_id": 27814942, "comment_id": 44049817, "body": "@JimB If I understand correctly, what OP wants is the final URL for some domains, and the shortened URL for others, but the final data for all of them."}, {"owner": {"reputation": 7284, "user_id": 4374109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sHeIb.png?s=128&g=1", "display_name": "Uvelichitel", "link": "https://stackoverflow.com/users/4374109/uvelichitel"}, "edited": false, "score": 0, "creation_date": 1420642885, "post_id": 27814942, "comment_id": 44050163, "body": "Don&#39;t sure I clear understand what you want to achieve, but you have *Request (reference) as argument in CheckRedirect(req *Request, via []*Request) func. So you can   easily change Request, say redirect to your own Request.URL or something instead of issuing an error."}, {"owner": {"reputation": 579, "user_id": 2416204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSoph.jpg?s=128&g=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/2416204/bruno"}, "edited": false, "score": 0, "creation_date": 1420668370, "post_id": 27814942, "comment_id": 44064931, "body": "Much appreciated, clarified the question a bit (hopefully):  In the case of <code>on.ft.com&#47;14pQBYE</code> i want to record <code>http:&#47;&#47;www.ft.com&#47;intl&#47;cms&#47;s&#47;701a3c36-95be-11e4-a390-00144fe&zwnj;&#8203;abdc0.html</code> instead of the longer paywall URL.  Doing it by recording a specific step in the redirect chain, eg if the hostname matches a specific string, seems more reliable/generic that trying to fiddle with final URL."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4230449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6495c401314ba39ef4da01c802a7b7?s=128&d=identicon&r=PG", "display_name": "Flo Lauber", "link": "https://stackoverflow.com/users/4230449/flo-lauber"}, "is_accepted": true, "score": 3, "last_activity_date": 1421197678, "last_edit_date": 1421197678, "creation_date": 1421197145, "answer_id": 27934218, "question_id": 27814942, "link": "https://stackoverflow.com/questions/27814942/selectively-follow-redirects-in-go/27934218#27934218", "title": "Selectively Follow Redirects in Go", "body": "<p>The client request <em>will</em> actually still return the last valid <code>Response</code> in cases where your custom <code>CheckResponse</code> yields an error (As mentioned in the comments).</p>\n\n<p><a href=\"http://golang.org/pkg/net/http/#Client\" rel=\"nofollow\">http://golang.org/pkg/net/http/#Client</a></p>\n\n<blockquote>\n  <p>If CheckRedirect returns an error, the Client's Get method returns both the previous Response and CheckRedirect's error (wrapped in a url.Error) instead of issuing the Request req.</p>\n</blockquote>\n\n<p>If you maintain a list of \"known\" paywall-urls, you can abort the paywall-redirect in your <code>CheckResponse</code> with a custom <code>error</code> type (<code>Paywalled</code> in the example below). \nYour error handling code later has to consider that error type as a special (non-erroneous) case.</p>\n\n<p>Example:</p>\n\n<pre><code>package main\n\nimport (\n    \"errors\"\n    \"fmt\"\n    \"net/http\"\n    \"net/url\"\n)\n\nvar Paywalled = errors.New(\"next redirect would hit a paywall\")\n\nvar badHosts = map[string]error{\n    \"registration.ft.com\": Paywalled,\n}\n\nvar client = &amp;http.Client{\n    CheckRedirect: func(req *http.Request, via []*http.Request) error {\n        // N.B.: when used in production, also check for redirect loops\n        return badHosts[req.URL.Host]\n    },\n}\n\nfunc main() {\n    resp, err := client.Get(\"http://on.ft.com/14pQBYE\")\n    // ignore non-nil err if it's a `Paywalled` wrapped in url.Error\n    if e, ok := err.(*url.Error); (ok &amp;&amp; e.Err != Paywalled) || (!ok &amp;&amp; err != nil) {\n        fmt.Println(\"error: \", err)\n        return\n    }   \n    resp.Body.Close()\n    fmt.Println(resp.Request.URL)\n}                                                                                                                                     \n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 2416204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSoph.jpg?s=128&g=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/2416204/bruno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1634, "favorite_count": 0, "accepted_answer_id": 27934218, "answer_count": 1, "score": 2, "last_activity_date": 1421197678, "creation_date": 1420618162, "last_edit_date": 1420667864, "question_id": 27814942, "link": "https://stackoverflow.com/questions/27814942/selectively-follow-redirects-in-go", "title": "Selectively Follow Redirects in Go", "body": "<p>I'm trying to write a twitter reader that resolves the final URLs of link shorteners etc, but gives me a URL along the way for a list of manually defined host patterns. The reason to do this is that i don't want to end up with the paywall URL but the one before.</p>\n\n<p>As far as i can tell the way to do this is write my own client based on the default <code>RoundTripper</code> because returning an error from a custom <code>CheckRedirect</code> function aborts the client without yielding a response.</p>\n\n<p>Is there a way to use the default <code>client</code> and record a list of URLs/specific URL from a custom <code>checkRedirect</code> function?</p>\n"}, {"tags": ["go", "command-line-arguments"], "comments": [{"owner": {"reputation": 3918, "user_id": 1305540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3ee433f66d0b4a0e2dbe10bb560e1f93?s=128&d=identicon&r=PG", "display_name": "exists-forall", "link": "https://stackoverflow.com/users/1305540/exists-forall"}, "edited": false, "score": 0, "creation_date": 1420616463, "post_id": 27814518, "comment_id": 44035792, "body": "My guess is that <code>len(os.Args)</code> is not greater than one, and that that&#39;s why <code>n</code> is not being set to anything but <code>0</code>.  I&#39;d insert a print statement in the <code>if</code> statement to check whether or not this is the case."}, {"owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "reply_to_user": {"reputation": 3918, "user_id": 1305540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3ee433f66d0b4a0e2dbe10bb560e1f93?s=128&d=identicon&r=PG", "display_name": "exists-forall", "link": "https://stackoverflow.com/users/1305540/exists-forall"}, "edited": false, "score": 0, "creation_date": 1420617493, "post_id": 27814518, "comment_id": 44036149, "body": "@SelectricSimian Thank you. I put <code>fmt.Println(&quot;More than 1 arguments&quot;)</code> in the <code>if</code> statement, run it with <code>.&#47;prime.exe 39393993 10</code> and I got <code>More than 1 arguments 0 is a composite because it can be divided by 2</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "edited": false, "score": 0, "creation_date": 1420619559, "post_id": 27814880, "comment_id": 44036873, "body": "Thank you very much! After I add <code>n, err :...</code>, I got this error: <code>prog.go:36: n declared and not used</code> line 36 is the line <code>n, err: ...</code> If I remove this line and use <code>n,_ = ...</code> instead, the program runs correctly. So there&#39;s something wrong with the err handling."}, {"owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "reply_to_user": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "edited": false, "score": 0, "creation_date": 1420619808, "post_id": 27814880, "comment_id": 44036982, "body": "@Nick That is because the <code>:=</code> assigns the result to new variables and you declared your <code>n</code> variable outside of the containing <code>if</code> block (so the one created inside the <code>if</code> block is not used, only the &quot;outer&quot; one). You can solve this by also declaring the <code>err</code> (either outside or inside the <code>if</code> block) and just use simple assignment: <code>n, err = ...</code>."}, {"owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "edited": false, "score": 0, "creation_date": 1420620526, "post_id": 27814880, "comment_id": 44037311, "body": "I added <code>var err error</code> before <code>n, err = ...</code>, it works. Thank you very much!"}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 6, "last_activity_date": 1420620593, "last_edit_date": 1420620593, "creation_date": 1420617856, "answer_id": 27814880, "question_id": 27814518, "link": "https://stackoverflow.com/questions/27814518/how-to-take-command-argument-in-go/27814880#27814880", "title": "How to take command argument in Go?", "body": "<p>The problem is with this line:</p>\n\n<pre><code>n,_ = strconv.ParseInt(os.Args[1],64,64)\n</code></pre>\n\n<p>The documentation of <a href=\"http://golang.org/pkg/strconv/#ParseInt\" rel=\"nofollow\"><code>ParseInt(s string, base int, bitSize int) (i int64, err error)</code></a> states:</p>\n\n<blockquote>\n  <p>ParseInt interprets a string s in the given base (2 to 36) and returns the corresponding value i.</p>\n</blockquote>\n\n<p>The base can be <strong><code>36</code></strong> at the most and you pass <code>64</code>. In this case an error will be returned (which you discard by using the blank identifier <code>_</code>), and <code>n</code> will have the zero value which is <code>0</code> hence you see the output as</p>\n\n<blockquote>\n  <p><strong>0</strong> is a composite because it can be divided by 2</p>\n</blockquote>\n\n<p><strong>Solution:</strong></p>\n\n<p>Change the line in question to this:</p>\n\n<pre><code>n, _ = strconv.ParseInt(os.Args[1], 10, 64)\n</code></pre>\n\n<p>and it should work. Also you should not discard errors because you will run into cases like this. Instead handle them properly like this:</p>\n\n<pre><code>var err error\nn, err = strconv.ParseInt(os.Args[1], 10, 64)\nif err != nil {\n    log.Fatal(err)\n}\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>Also note that the first argument (<code>os.Args[0]</code> is the name of the executable), and since you expect and work with 2 extra arguments, you should check if the length of <code>os.Args</code> is greater than 2 not 1:</p>\n\n<pre><code>if len(os.Args) &gt; 2 {\n    // os.Args[1] and os.Args[2] is valid\n}\n</code></pre>\n"}], "owner": {"reputation": 6591, "user_id": 2185472, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/05ef4480505adfa05516719b865e22aa?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2185472/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 27814880, "answer_count": 1, "score": 2, "last_activity_date": 1420620593, "creation_date": 1420616150, "last_edit_date": 1420620107, "question_id": 27814518, "link": "https://stackoverflow.com/questions/27814518/how-to-take-command-argument-in-go", "title": "How to take command argument in Go?", "body": "<p>I just start to learn Go, and I wrote a prime test program using the <code>ProbablyPrime</code> library. </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"math/big\"\n    \"math\"\n    \"os\"\n    \"strconv\"\n)\n\nfunc prime_test(n int64, certainty int)(bool,float64){\n    var probobility float64\n    i := big.NewInt(n)\n    isPrime := i.ProbablyPrime(certainty)\n    probobility = 1 - 1/math.Pow(4,10)\n    return isPrime, probobility\n}\n\nfunc why_not_prime(n int64)(int64){\n    var i int64 \n    for  i=2 ; i&lt;n/2; i++ {\n        if n%i == 0 {return i}\n    }\n    return i\n}\n\n\nfunc main() {\n    var n int64\n    var certainty int\n    var isPrime bool\n    var probobility float64 \n\n    if len(os.Args) &gt; 1 {\n    n,_ = strconv.ParseInt(os.Args[1],64,64)\n    certainty,_ = strconv.Atoi(os.Args[2])\n    }\n\n    isPrime, probobility = prime_test(n,certainty)\n    if isPrime {\n        fmt.Printf(\"%d is probably %0.8f%% a prime.\", n, probobility*100)\n    } else {\n        var i int64\n        i = why_not_prime(n)\n        fmt.Printf(\"%d is a composite because it can be divided by %d\", n, i)\n    }\n}\n</code></pre>\n\n<p>The code could be successfully compiled. When I run it, it always return <code>0 is a composite because it can be divided by 2</code>.</p>\n\n<p>I guess there's something wrong with the command line argument parsing. How to fix it?</p>\n"}, {"tags": ["go", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 615, "user_id": 841753, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/08cd4f5549098d8ec152e14900e8924c?s=128&d=identicon&r=PG", "display_name": "drodman", "link": "https://stackoverflow.com/users/841753/drodman"}, "edited": false, "score": 0, "creation_date": 1420685006, "post_id": 27815101, "comment_id": 44070102, "body": "Excellent, thank you! I should have asked before I went and wrote my own function. At least it was interesting..."}], "tags": [], "owner": {"reputation": 47884, "user_id": 164234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b34a2a81515583dc95e5c0809db06bb?s=128&d=identicon&r=PG", "display_name": "Nick Craig-Wood", "link": "https://stackoverflow.com/users/164234/nick-craig-wood"}, "is_accepted": true, "score": 6, "last_activity_date": 1420618866, "creation_date": 1420618866, "answer_id": 27815101, "question_id": 27814408, "link": "https://stackoverflow.com/questions/27814408/working-with-raw-bytes-from-a-network-in-go/27815101#27815101", "title": "Working with raw bytes from a network in go", "body": "<p>The go way would be to use <a href=\"http://golang.org/pkg/encoding/binary\" rel=\"noreferrer\">encoding/binary</a> which internally does pretty much what you've written above.</p>\n\n<p>(<a href=\"http://play.golang.org/p/3dhyT0EVti\" rel=\"noreferrer\">playground</a>)</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/binary\"\n    \"fmt\"\n    \"log\"\n)\n\ntype Header struct {\n    Length uint16\n    Size   uint16\n    Flags  uint32\n}\n\nfunc main() {\n    header := &amp;Header{Length: 0xC8, Size: 3, Flags: 0x100}\n    fmt.Printf(\"in = %#v\\n\", header)\n    buf := new(bytes.Buffer)\n\n    err := binary.Write(buf, binary.LittleEndian, header)\n    if err != nil {\n        log.Fatalf(\"binary.Write failed: %v\", err)\n    }\n    b := buf.Bytes()\n    fmt.Printf(\"wire = % x\\n\", b)\n\n    var header2 Header\n    buf2 := bytes.NewReader(b)\n    err = binary.Read(buf2, binary.LittleEndian, &amp;header2)\n    if err != nil {\n        log.Fatalf(\"binary.Read failed: %v\", err)\n    }\n    fmt.Printf(\"out = %#v\\n\", header2)\n}\n</code></pre>\n\n<p>Which prints</p>\n\n<pre><code>in = &amp;main.Header{Length:0xc8, Size:0x3, Flags:0x100}\nwire = c8 00 03 00 00 01 00 00\nout = main.Header{Length:0xc8, Size:0x3, Flags:0x100}\n</code></pre>\n"}], "owner": {"reputation": 615, "user_id": 841753, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/08cd4f5549098d8ec152e14900e8924c?s=128&d=identicon&r=PG", "display_name": "drodman", "link": "https://stackoverflow.com/users/841753/drodman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2661, "favorite_count": 1, "accepted_answer_id": 27815101, "answer_count": 1, "score": 3, "last_activity_date": 1420618866, "creation_date": 1420615671, "question_id": 27814408, "link": "https://stackoverflow.com/questions/27814408/working-with-raw-bytes-from-a-network-in-go", "title": "Working with raw bytes from a network in go", "body": "<p>(Sorry, long question!) I've recently been trying out Go as opposed to C++ for a game server emulator I'm working on as a side project and am questioning whether I'm implementing it in sensible Go terms. As you might expect, the server communicates with one or more game clients by sending raw packets (TCP) that adhere to a particular protocol specification. The relevant part goes something like this: </p>\n\n<p>receive a header -> decrypt it -> recv bytes until the header length is reached -> decrypt the rest of the packet -> dispatch to a handler -> decode the packet -> handle as necessary -> send a response</p>\n\n<p>The protocol is defined in terms of bytes in little endian order, so in my C++ implementation the packet header looks like this (I know, it only works on LE machines):</p>\n\n<pre><code>struct pkt_header {\n    uint16_t length;\n    uint16_t type;\n    uint32_t flags;\n};\n</code></pre>\n\n<p>Upon <em>recv()</em>'ing and decrypting this header, I'll extract the fields:</p>\n\n<pre><code>// client-&gt;recv_buffer is of type u_char[1024]\nheader = (pkt_header*) client-&gt;recv_buffer;\n\nif (client-&gt;recv_size &lt; header-&gt;length) {\n    // Recv some more\n}\n// Decrypt and so on\n</code></pre>\n\n<p>In the handlers themselves I can nest the above header struct in other packet structure definitions and cast those onto the <em>byte[]</em> buffer arrays in order to directly access the fields. From what I've read, struct alignment (unsurprisingly) is difficult/impossible and highly discouraged in Go. </p>\n\n<p>Not knowing what else to do, I wrote this function for going from an arbitrary Struct -> []byte:</p>\n\n<pre><code>// Serializes the fields of a struct to an array of bytes in the order in which the fields are\n// declared. Calls panic() if data is not a struct or pointer to struct.\nfunc StructToBytes(data interface{}) []byte {\n    val := reflect.ValueOf(data)\n    valKind := val.Kind()\n    if valKind == reflect.Ptr {\n        val = reflect.ValueOf(data).Elem()\n        valKind = val.Kind()\n    }\n\n    if valKind != reflect.Struct {\n        panic(\"data must of type struct or struct ptr, got: \" + valKind.String())\n    }\n\n    bytes := new(bytes.Buffer)\n    for i := 0; i &lt; val.NumField(); i++ {\n        field := val.Field(i)\n\n        switch kind := field.Kind(); kind {\n        case reflect.Struct:\n            binary.Write(bytes, binary.LittleEndian, StructToBytes(field.Interface()))\n        case reflect.Array, reflect.Slice:\n            binary.Write(bytes, binary.LittleEndian, field.Interface())\n        case reflect.Uint8:\n            binary.Write(bytes, binary.LittleEndian, uint8(field.Uint()))\n        case reflect.Uint16:\n            binary.Write(bytes, binary.LittleEndian, uint16(field.Uint()))\n        // You get the idea\n        }\n    }\n    return bytes.Bytes()\n}\n</code></pre>\n\n<p>And would do this in a handler:</p>\n\n<pre><code>type Header struct {\n    length uint16\n    size uint16\n    flags uint32\n}\nnewHeader := new(Header)\n// Initialization, etc\nclient.Conn.Write(StructToBytes(newHeader)) // ex. [C8 00 03 00 00 00 01 00]  \n</code></pre>\n\n<p>As a Go newbie, feedback on how I might implement this more efficiently is more than welcome. So far it's worked well, but now I'm faced with the challenge of how to do the opposite: go from []byte->Struct (for example, <em>[C8 00 03 00 00 01 00 00]</em> to a Header { length = C8, size = 03, flags = 0100 }</p>\n\n<p>Do I need to just implement the reverse of this or is there a better method of going from an array of bytes to an arbitrary struct (or vice versa, as opposed to my function)? Please let me know if any additional clarity would be helpful.</p>\n"}, {"tags": ["database", "pdf", "go", "beego"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1429449321, "post_id": 27814336, "comment_id": 47594126, "body": "<b>Never ignore errors</b>!! What are you ignoring from <code>GetFile</code>? Does <code>SaveToFile</code> return errors? You ignore <code>ioutil.ReadFile</code> errors. You ignore <code>ioutil.WriteFile</code> errors. And using files at all here is just wrong."}], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 2645787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b4ee359db012decf739c4f518b61a4?s=128&d=identicon&r=PG", "display_name": "Sumit Rathore", "link": "https://stackoverflow.com/users/2645787/sumit-rathore"}, "edited": false, "score": 0, "creation_date": 1420941534, "post_id": 27867804, "comment_id": 44168215, "body": "thanks for your answer. I get your point that storing files in db have performance issue.But my problem was how to make pdf file and download it after reading content from db. any help regarding how to do it?"}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 481, "user_id": 2645787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b4ee359db012decf739c4f518b61a4?s=128&d=identicon&r=PG", "display_name": "Sumit Rathore", "link": "https://stackoverflow.com/users/2645787/sumit-rathore"}, "edited": false, "score": 0, "creation_date": 1420943719, "post_id": 27867804, "comment_id": 44168532, "body": "The database is beside the point. There&#39;s no reason to write a file if you&#39;re just sending the data off somewhere else."}, {"owner": {"reputation": 1515, "user_id": 1516001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6d465bb8df6bda89904c7aafea0dda6c?s=128&d=identicon&r=PG", "display_name": "Donald French", "link": "https://stackoverflow.com/users/1516001/donald-french"}, "edited": false, "score": 0, "creation_date": 1560538612, "post_id": 27867804, "comment_id": 99783656, "body": "@JimB You last comment was useless. What gives you the right to make decisions for the OP. He asked a legitimate question and has a need for it. Giving a suggestion is fine, then answer the question."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 1515, "user_id": 1516001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6d465bb8df6bda89904c7aafea0dda6c?s=128&d=identicon&r=PG", "display_name": "Donald French", "link": "https://stackoverflow.com/users/1516001/donald-french"}, "edited": false, "score": 0, "creation_date": 1560539294, "post_id": 27867804, "comment_id": 99783928, "body": "@DonaldFrench: I did answer to the question, (albeit over 4 years ago, with limited info from the OP). The problem is ignoring the <code>multipart.File</code>, which contains the file, which is why it has nothing to do with the db and the rest doesn&#39;t work. Everything else is just suggestion as you say."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": false, "score": 1, "last_activity_date": 1420832530, "last_edit_date": 1420832530, "creation_date": 1420831795, "answer_id": 27867804, "question_id": 27814336, "link": "https://stackoverflow.com/questions/27814336/how-to-make-pdf-file-by-reading-content-from-database-using-beego/27867804#27867804", "title": "How to make pdf file by reading content from database using beego?", "body": "<p>You're ignoring the <code>multipart.File</code> from the <code>GetFile</code> call. Use that directly. It's a waste of time to write it to disk and read it back again.</p>\n\n<p>There's also no reason to save the file to disk between reading it from the DB and sending to the client. </p>\n\n<p>(You may want to be sure that your DB is optimized to handle large blobs like this. It's not the usual use-case for most databases.)</p>\n"}, {"tags": [], "owner": {"reputation": 709, "user_id": 789096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e49d9e3fbc5927db7abee02cf9f9e22?s=128&d=identicon&r=PG", "display_name": "Rio", "link": "https://stackoverflow.com/users/789096/rio"}, "is_accepted": false, "score": -1, "last_activity_date": 1445515942, "creation_date": 1445515942, "answer_id": 33280761, "question_id": 27814336, "link": "https://stackoverflow.com/questions/27814336/how-to-make-pdf-file-by-reading-content-from-database-using-beego/33280761#33280761", "title": "How to make pdf file by reading content from database using beego?", "body": "<p>When is used github.com/jung-kurt/gofpdf library:</p>\n\n<pre><code>func (c *MyController) PrintPDF() {         \n    pdf := gofpdf.New(\"\", \"\", \"\", \"\")\n    pdf.AddPage()\n    pdf.Text(10, 20, \"Circles\")\n    var b bytes.Buffer\n    w := bufio.NewWriter(&amp;b)\n    pdf.Output(w)\n    pdf.Close()\n    w.Flush()\n    c.Ctx.Output.ContentType(\"application/pdf\")\n    c.Ctx.Output.Body(b.bytes())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1515, "user_id": 1516001, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6d465bb8df6bda89904c7aafea0dda6c?s=128&d=identicon&r=PG", "display_name": "Donald French", "link": "https://stackoverflow.com/users/1516001/donald-french"}, "is_accepted": false, "score": 0, "last_activity_date": 1560612039, "creation_date": 1560612039, "answer_id": 56611669, "question_id": 27814336, "link": "https://stackoverflow.com/questions/27814336/how-to-make-pdf-file-by-reading-content-from-database-using-beego/56611669#56611669", "title": "How to make pdf file by reading content from database using beego?", "body": "<p>I had the same issue of a pdf in a MongoDB document. It was stored as a string value Base64 encrypted. My steps were:</p>\n\n<ol>\n<li>Find the record.</li>\n<li>Decode the string: </li>\n<li>Create a *Buffer from the pdfBytes </li>\n<li><p>write it directly to the http.ResponseWritter:</p>\n\n<p><code>b := bytes.NewBuffer(pdfBytes)                         // Step 2\npdfBytes,err := b64.StdEncoding.DecodeString(doc.Image) // Step 3\nif _, err := b.WriteTo(w); err != nil {                 // Step 4\n   fmt.Fprintf(w, \"%s\", err) // Handle the error\n}</code></p></li>\n</ol>\n\n<p>This works fine, I handle 40+ million documents using it.  However, I am always interested in learning if there is a better way. As @JimB said, if you are required to read from a file his way is best. The problem is the question was very vague. </p>\n"}], "owner": {"reputation": 481, "user_id": 2645787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b4ee359db012decf739c4f518b61a4?s=128&d=identicon&r=PG", "display_name": "Sumit Rathore", "link": "https://stackoverflow.com/users/2645787/sumit-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1560612039, "creation_date": 1420615349, "last_edit_date": 1420829768, "question_id": 27814336, "link": "https://stackoverflow.com/questions/27814336/how-to-make-pdf-file-by-reading-content-from-database-using-beego", "title": "How to make pdf file by reading content from database using beego?", "body": "<p>I read a pdf file and then store its raw content into database. Now i want to read that content from database and create a pdf so that user can download it.</p>\n\n<p>For this i read the content and write it to file with .pdf extension. But the result in an empty pdf file.</p>\n\n<p>I am doing this because i want to avoid saving files in disk. </p>\n\n<p>I am using beego framework. </p>\n\n<p>Any suggestions/help?</p>\n\n<p>Here what i am doing</p>\n\n<p>Reading from pdf file and writing it to database</p>\n\n<pre><code>_,header,_:=c.GetFile(\"attachment[]\")\nattachment:=header.Filename\nc.SaveToFile(\"attachment[]\",\"/tmp/\"+attachment)\ncontent,_:= ioutil.ReadFile(\"/tmp/\"+attachment)\ns := string(content)\n</code></pre>\n\n<p>then write this 's' to database</p>\n\n<p>reading from database and writing to pdf file</p>\n\n<pre><code>err := o.Raw(\"SELECT attachment FROM table_name WHERE id=?\",id).QueryRow(&amp;att)\nif err == nil {\n     fmt.Println(att)\n}\nvar data []byte\ndata = []byte(att)\nioutil.WriteFile(\"/tmp/hello.pdf\",data, 0666)\n</code></pre>\n"}, {"tags": ["go", "go-playground"], "comments": [{"owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "edited": false, "score": 6, "creation_date": 1420603153, "post_id": 27812164, "comment_id": 44031978, "body": "Currently, It&#39;s not possible."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 2, "creation_date": 1557809606, "post_id": 27812164, "comment_id": 98878455, "body": "Currently (May 2019, 4 years later)... it is possible! See <a href=\"https://stackoverflow.com/a/27813778/6309\">my updated answer below</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 8684, "user_id": 410747, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4939d91065321d68191a16481ccbd9f2?s=128&d=identicon&r=PG", "display_name": "netbrain", "link": "https://stackoverflow.com/users/410747/netbrain"}, "edited": false, "score": 0, "creation_date": 1557825264, "post_id": 27813778, "comment_id": 98885335, "body": "@netbrain Thank you. I have included your example in the answer for more visibility."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 31, "last_activity_date": 1557981855, "last_edit_date": 1592644375, "creation_date": 1420612741, "answer_id": 27813778, "question_id": 27812164, "link": "https://stackoverflow.com/questions/27812164/can-i-import-3rd-party-package-into-golang-playground/27813778#27813778", "title": "Can I import 3rd party package into golang playground", "body": "<p>Since May 14th, 2019, <a href=\"https://twitter.com/bradfitz/status/1128069715455123457\" rel=\"noreferrer\">it is now possible</a> (from <a href=\"https://twitter.com/bradfitz\" rel=\"noreferrer\">Brad Fitzpatrick</a>)!</p>\n<blockquote>\n<p>The #golang playground now supports third-party imports, pulling them in via <a href=\"https://proxy.golang.org/\" rel=\"noreferrer\">https://proxy.golang.org/</a></p>\n<p>Example: <a href=\"https://play.golang.org/p/eqEo7mqdS9l\" rel=\"noreferrer\">https://play.golang.org/p/eqEo7mqdS9l</a>  \ud83c\udf89</p>\n<p>Multi-file support &amp; few other things up next.<br />\nReport bugs at <a href=\"https://github.com/golang/go/issues/31944\" rel=\"noreferrer\"><code>golang/go</code> issue 31944</a>, or here on the tweeters.</p>\n</blockquote>\n<p>(On the <strong>&quot;multiple file&quot; support</strong>, see, since May. 16th 2019, &quot;<a href=\"https://stackoverflow.com/a/56160948/6309\">Which packages may be imported in the go playground?</a>&quot;: see an <a href=\"https://play.golang.org/p/w3XRk47wo5u\" rel=\"noreferrer\">example here</a>)</p>\n<p><a href=\"https://stackoverflow.com/users/410747/netbrain\">netbrain</a> suggests <a href=\"https://stackoverflow.com/questions/27812164/can-i-import-3rd-party-package-into-golang-playground/27813778?noredirect=1#comment98883929_27813778\">in the comments</a> another <a href=\"https://play.golang.org/p/Hf5mQidVv5L\" rel=\"noreferrer\">example</a>:</p>\n<p>On the playground:</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n\n    &quot;gonum.org/v1/gonum/mat&quot;\n)\n\nfunc main() {\n    v1 := mat.NewVecDense(4,[]float64{1,2,3,4})\n    fmt.Println(mat.Dot(v1,v1))\n}\n</code></pre>\n<p>woud give '30', using <a href=\"https://godoc.org/gonum.org/v1/gonum/mat#NewVecDense\" rel=\"noreferrer\"><code>mat.NewVecDense()</code></a> to create a column vector, and <a href=\"https://godoc.org/gonum.org/v1/gonum/mat#Dot\" rel=\"noreferrer\"><code>mat.Dot()</code></a> to return the sum of the element-wise product of <code>v1</code> and <code>v1</code></p>\n<p>The point being: <a href=\"https://github.com/gonum/gonum/tree/master/mat\" rel=\"noreferrer\"><code>gonum/mat</code></a> is <em>not</em> part of the <a href=\"https://golang.org/pkg/\" rel=\"noreferrer\">Go Standard Library</a>.</p>\n<hr />\n<p>Original answers:</p>\n<p>The most complete article on Go Playground remains &quot;<a href=\"http://blog.golang.org/playground\" rel=\"noreferrer\">Inside the Go Playground</a>&quot;, which mentions:</p>\n<ul>\n<li><a href=\"https://github.com/golang/tools/blob/af7d92a90fbbc868c5d6cd4c3c9637637668d599/godoc/static/static.go#L511-L527\" rel=\"noreferrer\"><code>godoc/static/static.go</code></a> (for the default go program displayed in the playground)</li>\n<li><a href=\"https://github.com/golang/tools/tree/master/playground\" rel=\"noreferrer\"><code>golang/tools/playground</code></a> for the sources, with <a href=\"https://github.com/golang/tools/blob/master/playground/socket/socket.go#L237-L299\" rel=\"noreferrer\"><code>playground/socket/socket.go</code></a> building and executing the program from the playground editor.</li>\n</ul>\n<p>None of those processes support importing a remote package (that would be accessed over the internet).<br />\nIt is very much a self-contained system (that you can run locally as well as using it from play.golang.org), with multiple features stubbed or faked, like the network:</p>\n<blockquote>\n<p>Like the file system, the playground's network stack is an in-process fake implemented by the syscall package.<br />\nIt permits playground projects to use the loopback interface (127.0.0.1).<br />\n<strong>Requests to other hosts will fail</strong>.</p>\n</blockquote>\n<hr />\n<p>Update 2017:</p>\n<p>You have alternatives:</p>\n<ul>\n<li><a href=\"https://github.com/iafan/goplayspace\" rel=\"noreferrer\"><strong><code>iafan/goplayspace</code></strong></a></li>\n<li><a href=\"https://github.com/xiam/go-playground\" rel=\"noreferrer\"><strong><code>xiam/go-playground</code></strong></a></li>\n</ul>\n<p>But they still use use the official Go Playground service to build and run Go code, so that would still not allow for external imports.</p>\n"}, {"tags": [], "owner": {"reputation": 8698, "user_id": 961810, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh3.googleusercontent.com/-sx37srgARV4/AAAAAAAAAAI/AAAAAAAAAhw/XUlBN6N5Y6E/photo.jpg?sz=128", "display_name": "Brad Peabody", "link": "https://stackoverflow.com/users/961810/brad-peabody"}, "is_accepted": false, "score": 1, "last_activity_date": 1520312545, "last_edit_date": 1520312545, "creation_date": 1520312029, "answer_id": 49123620, "question_id": 27812164, "link": "https://stackoverflow.com/questions/27812164/can-i-import-3rd-party-package-into-golang-playground/49123620#49123620", "title": "Can I import 3rd party package into golang playground", "body": "<p>I have not tried it myself but <a href=\"https://github.com/xiam/go-playground\" rel=\"nofollow noreferrer\">xiam/go-playground</a> indicates that this is possible:</p>\n\n<blockquote>\n  <p><strong>Importing custom packages</strong></p>\n  \n  <p>Remember that playground users won't be able to install or use packages that are not part of the Go standard library, in case you want to showcase a special package you'll have to create a slightly different docker image on top of the sandbox or the unsafebox...</p>\n</blockquote>\n\n<p>(Followed by example of how to do this with a Dockerfile modification.)</p>\n\n<p>This would seem to indicate that the compilation is (or at least can be) performed inside a custom sandbox as show in the xiam/go-playground project, thus making this possible (not requiring play.golang.org as indicated by @VonC's answer).</p>\n\n<p>If I get a chance to test this myself I'll update this answer with more detail.</p>\n"}], "owner": {"reputation": 6617, "user_id": 334999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2cf2fa2fba401c27fd217344f9b4c280?s=128&d=identicon&r=PG", "display_name": "Shuo", "link": "https://stackoverflow.com/users/334999/shuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9514, "favorite_count": 4, "accepted_answer_id": 27813778, "answer_count": 2, "score": 22, "last_activity_date": 1557981855, "creation_date": 1420602843, "last_edit_date": 1459798948, "question_id": 27812164, "link": "https://stackoverflow.com/questions/27812164/can-i-import-3rd-party-package-into-golang-playground", "title": "Can I import 3rd party package into golang playground", "body": "<p>I googled but got no answer. Is it possible? If yes, how to do it?</p>\n\n<p>The Go Playground link: <a href=\"https://play.golang.org/\" rel=\"noreferrer\">https://play.golang.org/</a></p>\n"}, {"tags": ["go", "goroutine"], "comments": [{"owner": {"reputation": 3551, "user_id": 2137314, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LjaqW.jpg?s=128&g=1", "display_name": "siritinga", "link": "https://stackoverflow.com/users/2137314/siritinga"}, "edited": false, "score": 2, "creation_date": 1420620416, "post_id": 27812085, "comment_id": 44037278, "body": "The answer below is great, but answering your particular question, <code>var chans []chan int</code> is only declaring <code>chans</code>, but you need to allocate it too. It can be done in a single statement with <code>chans := make([]chan int, len(arr))</code>. This is not particular for <code>chan</code>, but general for slices of any type."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1429813216, "post_id": 27812085, "comment_id": 47789317, "body": "Side nit: don&#39;t do <code>time.Sleep(500000000)</code>, instead do <code>time.Sleep(500\u00a0*\u00a0time.Millisecond)</code>."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1429813390, "post_id": 27812085, "comment_id": 47789426, "body": "Another nit: <a href=\"https://blog.golang.org/slices\" rel=\"nofollow noreferrer\">slices and arrays are very different in Go</a>, you repeated refer to a slice as an array which at minimum is an error in the comments but could also be a sign of a serious misunderstanding."}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 2, "creation_date": 1429813801, "post_id": 27812309, "comment_id": 47789665, "body": "Minor comment for those that may not be aware of it: when you know ahead of time how many times <code>wg.Add(1)</code> will be called it can be beneficial to just do <code>wg.Add(len(arr))</code> once before the loop. All wait group calls require synchronization so it can be helpful to minimize such calls. Of course, if you think it&#39;s clearer or more readable (or if you don&#39;t know the total ahead of time) then calling <code>wg.Add(1)</code> is perfectly fine too."}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": true, "score": 3, "last_activity_date": 1420604080, "creation_date": 1420604080, "answer_id": 27812309, "question_id": 27812085, "link": "https://stackoverflow.com/questions/27812085/slice-of-channels-and-concurrent-function-execution/27812309#27812309", "title": "slice of channels and concurrent function execution", "body": "<p>In this case, you don't need to use chan.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sync\"\n    \"time\"\n)\n\nfunc double(i int) int {\n    result := 2 * i\n    fmt.Println(result)\n    time.Sleep(500000000)\n    return result\n}\n\nfunc notParallel(arr []int) (outArr []int) {\n    for _, i := range arr {\n        outArr = append(outArr, double(i))\n    }\n    return\n}\n\n// how to do the same as notParallel func in parallel way.\n// For each element of array double func should evaluate concuruntly\n// without waiting each next element to eval\nfunc parallel(arr []int) (outArr []int) {\n    outArr = make([]int, len(arr))\n    var wg sync.WaitGroup\n    for counter, number := range arr {\n        wg.Add(1)\n        go func(counter int, number int) {\n            outArr[counter] = double(number)\n            wg.Done()\n        }(counter, number)\n    }\n    wg.Wait()\n\n    return\n}\n\nfunc main() {\n    arr := []int{7, 8, 9}\n    fmt.Printf(\"%d\\n\", notParallel(arr))\n    fmt.Printf(\"%d\\n\", parallel(arr))\n}\n</code></pre>\n\n<p>Because parallel must wait all of finish of goroutine(s).</p>\n\n<p>And I notice your code doesn't work because you refer <code>counter</code>, <code>number</code> in same function scope.</p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 27812309, "answer_count": 1, "score": 2, "last_activity_date": 1420604080, "creation_date": 1420602228, "question_id": 27812085, "link": "https://stackoverflow.com/questions/27812085/slice-of-channels-and-concurrent-function-execution", "title": "slice of channels and concurrent function execution", "body": "<p>How to create slice of channels and run function <code>double(i)</code> concurrently inside slice iteration:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc double(i int) int {\n    result := 2 * i\n    fmt.Println(result)\n    time.Sleep(500000000)\n    return result\n}\n\nfunc notParallel(arr []int) (outArr []int) {\n    for _, i := range arr {\n        outArr = append(outArr, double(i))\n    }\n    return\n}\n\n// how to do the same as notParallel func in parallel way.\n// For each element of array double func should evaluate concuruntly\n// without waiting each next element to eval\nfunc parallel(arr []int) (outArr []int) {\n\n    var chans []chan int\n    for i := 0; i &lt; len(arr); i++ {\n        chans[i] = make(chan int) // i = 0 : panic: runtime error: index out of range\n    }\n\n    for counter, number := range arr {\n        go func() {\n            chans[counter] &lt;- double(number)\n        }()\n    }\n\n    return\n}\n\nfunc main() {\n    arr := []int{7, 8, 9}\n    fmt.Printf(\"%d\\n\", notParallel(arr))\n    fmt.Printf(\"%d\\n\", parallel(arr))\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/FwaBKXAF2q\" rel=\"nofollow\">playground</a></p>\n\n<p>As function <code>double(i)</code> sleeps for 500 ms function <code>notParallel(arr []int)</code> works for 1500 ms for 3 elements of <code>arr []int</code> but function <code>parallel(arr []int)</code> would work about 500 ms.</p>\n\n<p>In my implementation have error...</p>\n\n<pre><code>panic: runtime error: index out of range\n</code></pre>\n\n<p>... on line ...</p>\n\n<pre><code>chans[i] = make(chan int) // i = 0\n</code></pre>\n"}, {"tags": ["go", "installation", "package"], "comments": [{"owner": {"reputation": 1, "user_id": 12118394, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a97921bc4da1d42932c902b1432f7f4f?s=128&d=identicon&r=PG", "display_name": "sss", "link": "https://stackoverflow.com/users/12118394/sss"}, "edited": false, "score": 0, "creation_date": 1569407455, "post_id": 27809176, "comment_id": 102586963, "body": "Still no answer to the question, and you have the same problem? Help us find a solution by researching the problem, then contribute the results of your research and anything additional you\u2019ve tried as a partial answer. That way, even if we can\u2019t figure it out, the next person has more to go on. It\u2019s also possible to gain a bit of reputation with your answers and vote up the question so it gets more attention, or you could set a bounty on the question."}], "answers": [{"tags": [], "owner": {"reputation": 1967, "user_id": 1390507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53335e2b507fd457757eee3a39323159?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1390507/alex"}, "is_accepted": true, "score": 3, "last_activity_date": 1420794324, "last_edit_date": 1420794324, "creation_date": 1420598257, "answer_id": 27810633, "question_id": 27809176, "link": "https://stackoverflow.com/questions/27809176/go-install-cant-load-package-even-though-gopath-is-set/27810633#27810633", "title": "Go install: \u201cCan&#39;t load package\u201d (even though GOPATH is set)", "body": "<p><code>GOPATH</code> environment variable must contain valid path.</p>\n\n<p><code>\\cygdrive\\c\\Users\\Paul\\Documents\\Home\\go\\src\\hello</code> is not a valid path on Windows.</p>\n\n<p>Try setting <code>GOPATH=c:\\Users\\Paul\\Documents\\Home\\go</code> instead.</p>\n"}], "owner": {"reputation": 75, "user_id": 2923605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c1c848c826e56644b5227a78313f5c?s=128&d=identicon&r=PG&f=1", "display_name": "user2923605", "link": "https://stackoverflow.com/users/2923605/user2923605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18137, "favorite_count": 0, "accepted_answer_id": 27810633, "answer_count": 1, "score": 3, "last_activity_date": 1569407455, "creation_date": 1420587637, "last_edit_date": 1420794392, "question_id": 27809176, "link": "https://stackoverflow.com/questions/27809176/go-install-cant-load-package-even-though-gopath-is-set", "title": "Go install: \u201cCan&#39;t load package\u201d (even though GOPATH is set)", "body": "<p>I'm just getting started with the Go programming language and installed Go using the Windows installer from the website. I tested installation by using <code>go run hello.go</code> and that works. The problem comes when I try to build my first program:</p>\n\n<pre><code>$ echo $GOROOT\nC:\\Go\\\n$ echo $GOPATH\n/cygdrive/c/Users/Paul/Documents/Home/go\nmkdir -p $GOPATH/src/hello\n</code></pre>\n\n<p>Inside that directory I have a simple <code>hello.go</code> program:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    fmt.Printf(\"Hello, world.\\n\")\n}\n</code></pre>\n\n<p>The problem comes when I try to build and install:</p>\n\n<pre><code>$ go install hello\ncan't load package: package hello: cannot find package \"hello\" in any of:\n    C:\\Go\\src\\hello (from $GOROOT)\n    \\cygdrive\\c\\Users\\Paul\\Documents\\Home\\go\\src\\hello (from $GOPATH)\n</code></pre>\n"}, {"tags": ["git", "go", "bitbucket-server"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420582806, "post_id": 27807413, "comment_id": 44025409, "body": "The tools that install into GOROOT are hard-coded into the <code>go</code> tool. You can&#39;t change their import path, or they won&#39;t install into the correct location."}, {"owner": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420592875, "post_id": 27807413, "comment_id": 44028688, "body": "This is relatively true.  After fixing up the import paths in the tool component files with the local path, the tool builds fine.  go install places the result in $GOPATH/bin, but moving it to $GOTOOLDIR is a simple matter.  At that point, the new &#39;go tool cover -xml=coverage.out&#39; behavior works just fine."}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "edited": false, "score": 0, "creation_date": 1420585744, "post_id": 27807837, "comment_id": 44026623, "body": "Thanks for your response.  If I get the repo with curl I get &quot;Invalid request from host 192.168.1.111: Note that Stash does not support Git&#39;s legacy HTTP transport protocol.&quot;  So I guess stash is looking at user-agent or something. I looked at the link you cited and it seems to come down to returning a meta tag from stash for a custom import path, but I have no idea how to do this.  Here&#39;s someone trying to accomplish the same thing: <a href=\"https://answers.atlassian.com/questions/329277/making-git-suffix-for-repository-urls-optional\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "edited": false, "score": 0, "creation_date": 1420586793, "post_id": 27807837, "comment_id": 44027008, "body": "@kerlyn Try to put the repo in an URL that contains the suffix <code>.git</code> in the directory where the git repository is found. For instance, if the repo is <code>git:example.com&#47;foo.git</code>, try an import path like <code>example.com&#47;foo.git&#47;package</code>."}, {"owner": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "edited": false, "score": 0, "creation_date": 1420593151, "post_id": 27807837, "comment_id": 44028751, "body": "Good suggestion, but I still end up with &quot;.git&quot; in the pathname.  Not elegant, but also not fatal.  As I say above, the import paths have to be fixed in the tool component files and the resulting binary moved to the correct location, but the end result works as desired."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "edited": false, "score": 0, "creation_date": 1420626320, "post_id": 27807837, "comment_id": 44040525, "body": "@kerlyn If you don&#39;t want the import-path to contain <code>.git</code>, an HTTP server needs to serve the page at the import path. This page needs to contain a certain meta-tag (described above) that points to the path where the package is located."}, {"owner": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "edited": false, "score": 0, "creation_date": 1420649780, "post_id": 27807837, "comment_id": 44054809, "body": "Agreed, so the question is whether such a meta tag can be returned by stash as per the <a href=\"https://answers.atlassian.com/questions/329277/making-git-suffix-for-repository-urls-optional\" rel=\"nofollow noreferrer\">link</a> I posted above."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 1, "last_activity_date": 1420581838, "last_edit_date": 1420581838, "creation_date": 1420581238, "answer_id": 27807837, "question_id": 27807413, "link": "https://stackoverflow.com/questions/27807413/trying-to-create-a-local-repo-of-go-tools-that-is-go-get-able/27807837#27807837", "title": "Trying to create a local repo of go.tools that is go get-able", "body": "<p>What does <code>curl http://stash.example.com/scm/x/tools</code> yield? What servers are listening on <code>stash.example.com</code>? Generally, a <code>go get</code>-able path either contains a component with a suffix denoting the revision control system used (e.g. <code>example.com/repository.git/package</code>) or a certain meta-tag exists in one of the directory layers that tells <code>go get</code> where to get the source.</p>\n\n<p><code>go get</code> is an unsophisticated mechanism and if I recall correctly it doesn't work with git when the server requires authentication.</p>\n\n<p>Have a look <a href=\"http://golang.org/cmd/go/#hdr-Remote_import_paths\" rel=\"nofollow\">here</a> for the relevant documentation on how import paths work with <code>go get</code>. I'm not going to cite out of this as it's rather long, unlikely to go down and you can retrieve it on your local machine by installing <code>godoc</code> and running</p>\n\n<pre><code>godoc -http=:8080 # or some other port\n</code></pre>\n\n<p>and then pointing your browser to</p>\n\n<pre><code>http://localhost:8080/cmd/go/#hdr-Relative_import_paths.\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 2008119, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7478fedd2a9fbe87c53a4562524f215c?s=128&d=identicon&r=PG", "display_name": "kerlyn", "link": "https://stackoverflow.com/users/2008119/kerlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1552311018, "creation_date": 1420579443, "last_edit_date": 1552311018, "question_id": 27807413, "link": "https://stackoverflow.com/questions/27807413/trying-to-create-a-local-repo-of-go-tools-that-is-go-get-able", "title": "Trying to create a local repo of go.tools that is go get-able", "body": "<p>I have added a new switch (-xml) to the go cover tool to generate an XML doc that is consumable by Atlassian clover so the bamboo builds of our go projects can report simple coverage statistics.  I would like this local version to be accessible to the build agents using go get &lt;importpath&gt;.</p>\n\n<p>These are the steps I've tried:</p>\n\n<pre><code>- setup $GOPATH\n- created $GOPATH/src/stash.example.com/scm/x\n- cd $GOPATH/src/stash.example.com/scm/x\n- git clone --bare https://go.goolesource.com/tools\n</code></pre>\n\n<p>and then basically followed the steps for importing an existing git project into stash as described in <a href=\"https://confluence.atlassian.com/display/STASH/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-ImportanexistingGitprojectintoStash\" rel=\"nofollow noreferrer\">https://confluence.atlassian.com/display/STASH/Importing+code+from+an+existing+project#Importingcodefromanexistingproject-ImportanexistingGitprojectintoStash</a></p>\n\n<p>If I then 'rm -rf tools' followed by 'go get -d stash.example.com/scm/x/tools' I get \"unrecognized import path stash.example.com/scm/x/tools\".  It works if I type 'go get -d stash.example.com/scm/x/tools.git' (providing the vcs hint to go get), but the resulting subdirectory is named 'test.git'.  The alternative to providing the vcs hint in the path is to return a &lt;meta&gt; tag in the html from the stash server, but I have no idea how to create that.</p>\n\n<p>I should add that 'cd $GOPATH/src/stash.example.com/scm/x' + 'git clone <a href=\"http://user@stash.example.com/scm/x/tools.git\" rel=\"nofollow noreferrer\">http://user@stash.example.com/scm/x/tools.git</a>' creates the tools subdirectory as expected.</p>\n\n<p>I must host this on a local server inside my firewall, so github is not an option.  Any advice?</p>\n"}, {"tags": ["regex", "go"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1420575554, "post_id": 27806236, "comment_id": 44022052, "body": "Advanced regex features are cool and all, but you rarely need them."}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 3, "last_activity_date": 1420575251, "creation_date": 1420575251, "answer_id": 27806465, "question_id": 27806236, "link": "https://stackoverflow.com/questions/27806236/match-proceeding-word-without-look-ahead-in-go/27806465#27806465", "title": "Match proceeding word without look ahead in Go", "body": "<p>You still can detect '<code>from xxx</code>', without looking the lookahead syntax <a href=\"https://code.google.com/p/re2/issues/detail?id=79\" rel=\"nofollow\">not supported</a> by <strong><a href=\"https://code.google.com/p/re2/\" rel=\"nofollow\">re2</a></strong>.<br>\nSince you would then capture '<code>from</code> ', you need to remove it from the result.</p>\n\n<p>See <a href=\"http://play.golang.org/p/zvRE2u7Uok\" rel=\"nofollow\">playground</a>:</p>\n\n<pre><code>r := regexp.MustCompile(\"(?:\\\\bfrom\\\\s)(\\\\w+)\")\nres := r.FindAllString(strings.ToLower(\"select foo from bar limit 10\"), 1)\nif len(res) != 1 {\n    panic(\"unable\")\n}\ni := strings.LastIndex(res[0], \" \")\nfmt.Println(res[0][i+1:], i)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>bar 4\n</code></pre>\n"}], "owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 27806465, "answer_count": 1, "score": 2, "last_activity_date": 1420575416, "creation_date": 1420574260, "last_edit_date": 1420575416, "question_id": 27806236, "link": "https://stackoverflow.com/questions/27806236/match-proceeding-word-without-look-ahead-in-go", "title": "Match proceeding word without look ahead in Go", "body": "<p>I am trying to retrieve the table from a query string (eg. '<code>select foo from bar limit 10</code>' should return '<code>bar</code>').  </p>\n\n<p>I believe '<code>(?&lt;=\\bfrom\\\\s)(\\\\w+)</code>' is what I was looking for but it is unsupported by Go regexp package. (<a href=\"http://play.golang.org/p/MJ3DUk6uuC\" rel=\"nofollow\">http://play.golang.org/p/MJ3DUk6uuC</a>)</p>\n"}, {"tags": ["opengl", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420569908, "post_id": 27804542, "comment_id": 44019196, "body": "You need to be able to build <code>github.com&#47;go-gl&#47;gl</code> first. Have you read through the README? There&#39;s <a href=\"https://github.com/go-gl/gl#windows\" rel=\"nofollow noreferrer\">no confirmation of it working on windows</a>, but that&#39;s where you need to start."}, {"owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420570700, "post_id": 27804542, "comment_id": 44019598, "body": "I have read through that and the support is currently unknown. But I can&#39;t build go-gl/gl because mingw just can&#39;t find GLFW or GL despite the two files above being listed in <code>C:\\MinGW\\include\\GLFW\\glfw3.h</code> and <code>C:\\MinGW\\include\\GL\\glew.h</code>. Does <code>include</code> need to be in the path?"}, {"owner": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "edited": false, "score": 0, "creation_date": 1420570859, "post_id": 27804542, "comment_id": 44019668, "body": "Just a heads up as well, if you get past this issue, there are a few bad import statements:  &quot;github.com/go-gl/mathgl/examples/opengl-tutorial/helper&quot; &quot;github.com/go-gl/mathgl/examples/opengl-tutorial/input&quot;  I believe should be   &quot;github.com/go-gl/examples/mathgl/opengl-tutorial/helper&quot; &quot;github.com/go-gl/examples/mathgl/opengl-tutorial/input&quot;"}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1420571484, "post_id": 27804542, "comment_id": 44019928, "body": "@CoreyOgburn: that error is not related to GLFW at all, but to <a href=\"http://glew.sourceforge.net/\" rel=\"nofollow noreferrer\">GLEW</a>, which is an entirely different library."}, {"owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "reply_to_user": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1420571609, "post_id": 27804542, "comment_id": 44019995, "body": "@derhass I&#39;ve gone down that road as well, but it doesn&#39;t do me any good to mess with GLEW if mingw&#39;s g++ can&#39;t find glfw3.h as well. I feel like fixing one missing file will direct me towards how to fix the second missing file."}, {"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "reply_to_user": {"reputation": 1599, "user_id": 2623893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/t40xu.png?s=128&g=1", "display_name": "kwolfe", "link": "https://stackoverflow.com/users/2623893/kwolfe"}, "edited": false, "score": 0, "creation_date": 1420574928, "post_id": 27804542, "comment_id": 44021738, "body": "@kwolfe -- Those are mine, can you send a pull request fixing the bad imports?"}], "owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 846, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420567740, "creation_date": 1420567740, "last_edit_date": 1495540674, "question_id": 27804542, "link": "https://stackoverflow.com/questions/27804542/setting-up-go-gl-on-windows-glfw-not-found", "title": "Setting up go-gl on windows? GLFW not found?", "body": "<p>I'm trying to get go-gl to work on windows. I've downloaded mingw and I've installed glfw according to <a href=\"https://stackoverflow.com/questions/12886609/setting-up-glfw-with-mingw\">this question</a> (I put the dll in System32).</p>\n\n<p>I download <a href=\"https://github.com/go-gl/examples/blob/master/glfw3/triangle/triangle.go\" rel=\"nofollow noreferrer\">triangle.go</a> from the examples github and setup this folder structure on my desktop:</p>\n\n<pre><code>/gocode\n  /src\n    /gogltest\n      triangle.go\n</code></pre>\n\n<p>I set the <code>gocode</code> folder as the gopath, I <code>cd</code> into <code>gogltest</code> and run <code>go get</code>. It downloads the files into <code>gocode/src/github.com/</code> and I get this output:</p>\n\n<pre><code># github.com/go-gl/glfw3\n..\\github.com\\go-gl\\glfw3\\clipboard.go:4:24: fatal error: GLFW/glfw3.h: No such\nfile or directory\n //#include &lt;GLFW/glfw3.h&gt;\n                        ^\ncompilation terminated.\n# github.com/go-gl/gl\nIn file included from ..\\github.com\\go-gl\\gl\\attriblocation.go:7:0:\ngl.h:2:21: fatal error: GL/glew.h: No such file or directory\n #include &lt;GL/glew.h&gt;\n                     ^\ncompilation terminated.\n</code></pre>\n\n<p>What am I missing that will make glfw work for me?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 5, "creation_date": 1420566685, "post_id": 27804218, "comment_id": 44017517, "body": "The length of a slice is <code>len(s)</code>, not <code>s.length</code>."}, {"owner": {"reputation": 10232, "user_id": 2104976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a5168ce005df0148523b929ea9983c0?s=128&d=identicon&r=PG", "display_name": "callmekatootie", "link": "https://stackoverflow.com/users/2104976/callmekatootie"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1420566795, "post_id": 27804218, "comment_id": 44017586, "body": "Shoot! Thanks! I should have done my homework before asking."}], "answers": [{"tags": [], "owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "is_accepted": true, "score": 5, "last_activity_date": 1420566691, "creation_date": 1420566691, "answer_id": 27804276, "question_id": 27804218, "link": "https://stackoverflow.com/questions/27804218/type-int-has-no-field-or-method-length/27804276#27804276", "title": "type []int has no field or method length", "body": "<p>The golang way of getting a slices length is to use the <code>len</code> function:</p>\n\n<pre><code>if i &lt; len(fibonacciNumbers)\n</code></pre>\n"}], "owner": {"reputation": 10232, "user_id": 2104976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a5168ce005df0148523b929ea9983c0?s=128&d=identicon&r=PG", "display_name": "callmekatootie", "link": "https://stackoverflow.com/users/2104976/callmekatootie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1337, "favorite_count": 0, "accepted_answer_id": 27804276, "answer_count": 1, "score": -4, "last_activity_date": 1420566691, "creation_date": 1420566453, "question_id": 27804218, "link": "https://stackoverflow.com/questions/27804218/type-int-has-no-field-or-method-length", "title": "type []int has no field or method length", "body": "<p>I have the following code - </p>\n\n<pre><code>package \"main\"\n\nvar fibonacciNumbers = []int{0, 1}\n\nfunc getIthFibo(i int) int {\n    if i &lt; fibonacciNumbers.length {\n        return fibonacciNumbers[i]\n    }\n    ...\n}\n</code></pre>\n\n<p>However, I get an error at the <code>if</code> condition -  </p>\n\n<pre><code>fibonacciNumbers.length undefined - type []int has no field or method length\n</code></pre>\n\n<p>What I understood was that I created a slice with the elements 0 and 1 - so it should have a length of 2 but I get the above error.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 0, "creation_date": 1420585559, "post_id": 27803914, "comment_id": 44026558, "body": "You can check here <a href=\"http://golang.org/pkg/math/\" rel=\"nofollow noreferrer\">golang.org/pkg/math</a>, they are not provided."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4296194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc0a1203c7455326dd25bdfed0755c4e?s=128&d=identicon&r=PG&f=1", "display_name": "DamThatsGood", "link": "https://stackoverflow.com/users/4296194/damthatsgood"}, "is_accepted": false, "score": -1, "last_activity_date": 1421380508, "last_edit_date": 1421380508, "creation_date": 1420565558, "answer_id": 27804012, "question_id": 27803914, "link": "https://stackoverflow.com/questions/27803914/integer-functions-of-square-and-square-root/27804012#27804012", "title": "Integer functions of square and square root", "body": "<p>What you can do is type-cast a <strong>float</strong> to your value.</p>\n\n<pre><code>int a=10,b=2;\nmath.Pow(float(a),float(b));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3678, "user_id": 266284, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b19949c5e0bc77bb33c6d526466adbdf?s=128&d=identicon&r=PG", "display_name": "medium", "link": "https://stackoverflow.com/users/266284/medium"}, "is_accepted": false, "score": 1, "last_activity_date": 1420565738, "creation_date": 1420565738, "answer_id": 27804059, "question_id": 27803914, "link": "https://stackoverflow.com/questions/27803914/integer-functions-of-square-and-square-root/27804059#27804059", "title": "Integer functions of square and square root", "body": "<p>just create a float64 object using the int value. Example if int = 10.</p>\n\n<pre><code>var x float64 = 10\nvar b = math.Pow(2, x) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "is_accepted": false, "score": 0, "last_activity_date": 1420671650, "last_edit_date": 1495542745, "creation_date": 1420671650, "answer_id": 27830224, "question_id": 27803914, "link": "https://stackoverflow.com/questions/27803914/integer-functions-of-square-and-square-root/27830224#27830224", "title": "Integer functions of square and square root", "body": "<p>There are fast approximate algorithms described elsewhere on SO, such as <a href=\"https://stackoverflow.com/questions/1100090/looking-for-an-efficient-integer-square-root-algorithm-for-arm-thumb2\">this one</a>. If performance is important, porting one of the C algorithms to Go might be worth the effort.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7496628, "user_type": "registered", "profile_image": "https://graph.facebook.com/1853527534936734/picture?type=large", "display_name": "Devin Nathan-Turner", "link": "https://stackoverflow.com/users/7496628/devin-nathan-turner"}, "is_accepted": false, "score": 2, "last_activity_date": 1492376842, "creation_date": 1492376842, "answer_id": 43442156, "question_id": 27803914, "link": "https://stackoverflow.com/questions/27803914/integer-functions-of-square-and-square-root/43442156#43442156", "title": "Integer functions of square and square root", "body": "<p>If your return value is a float, you can use Ceil or Floor from the math package and then convert it to an int.</p>\n\n<pre><code>n := 5.5\no := math.Floor(n)\np := int(math.Pow(o, 2))\n\nfmt.Println(\"Float:\", n)\nfmt.Println(\"Floor:\", o)\nfmt.Println(\"Square:\", p)\n\n5.5\n5\n25\n</code></pre>\n\n<p>Keep in mind that Floor still returns a float64, so you will still want to wrap it in int()</p>\n"}], "owner": {"reputation": 10232, "user_id": 2104976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a5168ce005df0148523b929ea9983c0?s=128&d=identicon&r=PG", "display_name": "callmekatootie", "link": "https://stackoverflow.com/users/2104976/callmekatootie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10720, "favorite_count": 0, "answer_count": 4, "score": 8, "last_activity_date": 1492376842, "creation_date": 1420565180, "question_id": 27803914, "link": "https://stackoverflow.com/questions/27803914/integer-functions-of-square-and-square-root", "title": "Integer functions of square and square root", "body": "<p>Currently, <code>math.Pow()</code> and <code>math.sqrt</code> take <code>float64</code> type arguments.  </p>\n\n<p>Do we have equivalent functions that take <code>int</code> type arguments?</p>\n"}, {"tags": ["interface", "go", "type-conversion"], "comments": [{"owner": {"reputation": 2861, "user_id": 544265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZfZK.jpg?s=128&g=1", "display_name": "c0ming", "link": "https://stackoverflow.com/users/544265/c0ming"}, "edited": false, "score": 1, "creation_date": 1474611851, "post_id": 27803654, "comment_id": 66610367, "body": "how about _, ok := interface{}(val).(Somether) ?"}], "answers": [{"comments": [{"owner": {"reputation": 2851, "user_id": 243089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4c504339686fb2092eba997ee8899131?s=128&d=identicon&r=PG", "display_name": "Victor Zamanian", "link": "https://stackoverflow.com/users/243089/victor-zamanian"}, "edited": false, "score": 0, "creation_date": 1490918314, "post_id": 27804417, "comment_id": 73338857, "body": "Any reason why the black identifier does not necessarily need to be <code>*Somether</code>, since the right hand has a <i>pointer</i> to <code>MyType</code>? I&#39;m still learning. :-)"}, {"owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "edited": false, "score": 1, "creation_date": 1491025817, "post_id": 27804417, "comment_id": 73383082, "body": "you can think of an interface value like a container, you can put whatever you want in it as long as it implements the right methods. It can contain a pointer to a struct, or a struct directly. As a rule of thumb you never need to make a pointer to an interface value"}], "tags": [], "owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "is_accepted": true, "score": 49, "last_activity_date": 1420567219, "creation_date": 1420567219, "answer_id": 27804417, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface/27804417#27804417", "title": "Explanation of checking if value implements interface", "body": "<p>You only have to check if a value implements an interface if you don't know the value's type.\nIf the type is known, that check is automatically done by the compiler.</p>\n\n<p>If you really want to check anyways, you can do it with the second method you gave:</p>\n\n<pre><code>var _ Somether = (*MyType)(nil)\n</code></pre>\n\n<p>which would error at compile time:</p>\n\n<pre><code>prog.go:23: cannot use (*MyType)(nil) (type *MyType) as type Somether in assignment:\n    *MyType does not implement Somether (missing Method method)\n [process exited with non-zero status]\n</code></pre>\n\n<p>What you are doing here, is assigning a pointer of <code>MyType</code> type (and <code>nil</code> value) to a variable of type <code>Somether</code>, but since the variable name is <code>_</code> it is disregarded.</p>\n\n<p>If <code>MyType</code> implemented <code>Somether</code>, it would compile and do nothing</p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 7951943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dK6IY.png?s=128&g=1", "display_name": "Alpha", "link": "https://stackoverflow.com/users/7951943/alpha"}, "is_accepted": false, "score": 13, "last_activity_date": 1570937425, "creation_date": 1570937425, "answer_id": 58360366, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface/58360366#58360366", "title": "Explanation of checking if value implements interface", "body": "<p>Following will work:</p>\n\n<pre><code>val:=MyType(\"hello\")\nvar i interface{}=val\nv, ok:=i.(Somether)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2211, "user_id": 788833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/WJfHU.png?s=128&g=1", "display_name": "dmigo", "link": "https://stackoverflow.com/users/788833/dmigo"}, "is_accepted": false, "score": 6, "last_activity_date": 1581443264, "creation_date": 1581443264, "answer_id": 60174682, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface/60174682#60174682", "title": "Explanation of checking if value implements interface", "body": "<p>It is also possible to use <code>Implements(u Type) bool</code> method of <code>reflect.Type</code> in the following way:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n\nimport (\n    \"reflect\"\n)\n\ntype Somether interface {\n    Method() bool\n}\n\ntype MyType string\n\nfunc (mt MyType) Method() bool {\n    return true\n}\n\nfunc main() {\n\n    inter := reflect.TypeOf((*Somether)(nil)).Elem()\n\n    if reflect.TypeOf(MyType(\"\")).Implements(inter) {\n        print(\"implements\")\n    } else {\n        print(\"doesn't\")\n    }\n}\n</code></pre>\n\n<p>You can read more on that in the <a href=\"https://golang.org/pkg/reflect/#TypeOf\" rel=\"noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 977279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/166149cc97f5f0308f0834f529cd5c8f?s=128&d=identicon&r=PG", "display_name": "trevor", "link": "https://stackoverflow.com/users/977279/trevor"}, "is_accepted": false, "score": 8, "last_activity_date": 1599495015, "last_edit_date": 1599495015, "creation_date": 1585928088, "answer_id": 61015355, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface/61015355#61015355", "title": "Explanation of checking if value implements interface", "body": "<p>You can also take Alpha's solution:</p>\n<pre><code>val := MyType(&quot;hello&quot;)\nvar i interface{} = val\nv, ok := i.(Somether)\n</code></pre>\n<p>... and reduce it further:</p>\n<pre><code>val := MyType(&quot;hello&quot;)\nv, ok := interface{}(val).(Somether)\n</code></pre>\n<p>If you're trying to test for one-off methods, you can even do something like:</p>\n<pre><code>val := MyType(&quot;hello&quot;)\nv, ok := interface{}(val).(interface {\n    Method() bool\n}) \n</code></pre>\n<blockquote>\n<p>NOTE: Make sure you are very careful with &quot;pointer receiver&quot; versus &quot;value receiver&quot; implementations.  If the implementation uses a pointer the assertion will fail when passing in a value object.  If the implementation uses a value receiver, both assertions will pass.</p>\n</blockquote>\n<pre><code>// Implement Somether as a POINTER receiver method\nfunc (mt *MyType) Method() bool {\n  return true\n}\n\nfunc main() {\n    val := MyType(&quot;hello&quot;)\n\n    v, ok := interface{}(val).(Somether)\n    fmt.Println(v, ok)\n    // Output:  &lt;nil&gt; false\n\n    // Notice the pass by reference\n    v, ok := interface{}(&amp;val).(Somether)\n    fmt.Println(v, ok)\n    // Output:  0xc000010200 true\n\n}\n</code></pre>\n<p>versus</p>\n<pre><code>// Implement Somether as a VALUE receiver method\nfunc (mt MyType) Method() bool {\n  return true\n}\n\nfunc main() {\n    val := MyType(&quot;hello&quot;)\n\n    v, ok := interface{}(val).(Somether)\n    fmt.Println(v, ok)\n    // Output:  hello true\n\n    // Notice the pass by reference\n    v, ok := interface{}(&amp;val).(Somether)\n    fmt.Println(v, ok)\n    // Output:  0xc00008e1e0 true\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10865607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc6ec626ba038499952b8bc3b7d6fae?s=128&d=identicon&r=PG&f=1", "display_name": "pmg7670", "link": "https://stackoverflow.com/users/10865607/pmg7670"}, "is_accepted": false, "score": 0, "last_activity_date": 1614316409, "creation_date": 1614316409, "answer_id": 66380482, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface/66380482#66380482", "title": "Explanation of checking if value implements interface", "body": "<p>I have a solution that I use to complement a panic handler pattern<br>\nI have not exhaustively tested the code but casual testing is affirmative<br>\nI welcome any suggestions to improve or other go expert stuff</p>\n<pre><code>// -------------------------------------------------------------- //\n// hasErrIface -\n// ---------------------------------------------------------------//\nfunc hasErrIface(v reflect.Value) (error, bool) {\n    // CanInterface reports whether Interface can be used without panicking\n    if !v.CanInterface() {\n        return nil, false\n    }\n    // Interface panics if the Value was obtained by accessing unexported struct fields\n    err, ok := v.Interface().(error)\n    return err, ok\n}\n\n// -------------------------------------------------------------- //\n// HasErrKind\n// ---------------------------------------------------------------//\nfunc HasErrKind(r interface{}) (err error, isErr bool) {\n    err = nil\n    isErr = false\n    v := reflect.ValueOf(r)\n    switch v.Kind() {\n    case reflect.Struct:\n        errtype := reflect.TypeOf((*error)(nil)).Elem()\n        if v.Type().Implements(errtype) {\n            err, isErr = v.Interface().(error)\n        }\n    case reflect.Ptr:\n        err, isErr = hasErrIface(v)\n    case reflect.Interface:\n        err, isErr = hasErrIface(v)\n    }\n    return\n}\n\n// -------------------------------------------------------------- //\n// EvalErrKind\n// ---------------------------------------------------------------//\nfunc EvalErrKind(r interface{}) (errval error) {\n    err, isErr := HasErrKind(r)\n    if !isErr {\n        errtxt := &quot;Unknown system error - %v :\\n%v&quot;\n        v := reflect.ValueOf(r)\n        return fmt.Errorf(errtxt, v.Type(), v)\n    }\n    return err\n}\n\n// -------------------------------------------------------------- //\n// PanicHandler\n// ---------------------------------------------------------------//\nfunc PanicHandler(errHandler func(error)) func() {\n    return func() {\n        var err error\n        if r := recover(); r != nil {\n            switch r.(type) {\n            case ApiError:\n                err = r.(ApiError)\n            default:\n                err = EvalErrKind(r)\n            }\n            if errHandler != nil {\n                errHandler(err)\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36698, "favorite_count": 10, "accepted_answer_id": 27804417, "answer_count": 5, "score": 37, "last_activity_date": 1614316409, "creation_date": 1420564168, "last_edit_date": 1528303548, "question_id": 27803654, "link": "https://stackoverflow.com/questions/27803654/explanation-of-checking-if-value-implements-interface", "title": "Explanation of checking if value implements interface", "body": "<p>I've read \"Effective Go\" and other Q&amp;As like this: <a href=\"https://stackoverflow.com/questions/17994519/golang-interface-compliance-compile-type-check\">golang interface compliance compile type check</a> , but nonetheless I can't understand properly how to use this technique.</p>\n\n<p>Please, see example:</p>\n\n<pre><code>type Somether interface {\n    Method() bool\n}\n\ntype MyType string\n\nfunc (mt MyType) Method2() bool {\n    return true\n}\n\nfunc main() {\n    val := MyType(\"hello\")\n\n    //here I want to get bool if my value implements Somether\n    _, ok := val.(Somether)\n    //but val must be interface, hm..what if I want explicit type?\n\n    //yes, here is another method:\n    var _ Iface = (*MyType)(nil)\n    //but it throws compile error\n    //it would be great if someone explain the notation above, looks weird\n}\n</code></pre>\n\n<p>Is there any simple ways (eg without using reflection) check value if it implements an interface?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1420561957, "post_id": 27802873, "comment_id": 44014790, "body": "Where is <code>i</code> defined in your Javascript code?"}, {"owner": {"reputation": 7273, "user_id": 2641547, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/660520007/picture?type=large", "display_name": "Spearfisher", "link": "https://stackoverflow.com/users/2641547/spearfisher"}, "reply_to_user": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1420562115, "post_id": 27802873, "comment_id": 44014908, "body": "ive edited the code for clarity"}], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 6, "last_activity_date": 1420562336, "creation_date": 1420562336, "answer_id": 27803098, "question_id": 27802873, "link": "https://stackoverflow.com/questions/27802873/multiple-variables-in-for-loop-in-go/27803098#27803098", "title": "Multiple variables in for loop in Go", "body": "<p>In Go, you can do multiple variable assignment in a loop like so. </p>\n\n<pre><code>package main\n\nfunc main() {\n    var (\n        i = 10\n        b = 2\n    )\n    for a := b; i != 0; i, b = i/2, b*b {\n      // some code\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7273, "user_id": 2641547, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/660520007/picture?type=large", "display_name": "Spearfisher", "link": "https://stackoverflow.com/users/2641547/spearfisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4126, "favorite_count": 0, "accepted_answer_id": 27803098, "answer_count": 1, "score": 2, "last_activity_date": 1420562336, "creation_date": 1420561610, "last_edit_date": 1420562100, "question_id": 27802873, "link": "https://stackoverflow.com/questions/27802873/multiple-variables-in-for-loop-in-go", "title": "Multiple variables in for loop in Go", "body": "<p>I am trying to write a for loop in Go with multiple variables.</p>\n\n<p>Coming from the javascript world, I'd like to achieve something like this:</p>\n\n<pre><code>    var i = 10;\n    var b = 2;\n    for (var a = b; i; i /= 2, b *= b ) {\n      // some code\n    }\n</code></pre>\n\n<p>I've tried a 'raw translation' like this:</p>\n\n<pre><code>   i, b := 10, 2\n   for a := b; i; i /= 2, b *= b {\n      // some code\n    }\n</code></pre>\n\n<p>But it doesn't work. What is the proper syntax?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["json", "go", "devexpress"], "answers": [{"tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": true, "score": 3, "last_activity_date": 1420550447, "creation_date": 1420550447, "answer_id": 27799566, "question_id": 27799326, "link": "https://stackoverflow.com/questions/27799326/can-i-format-dynamically-created-json-into-the-required-format-for-dev-express-c/27799566#27799566", "title": "Can i format dynamically created json into the required format for dev express charts", "body": "<p>You just need to make a slice of structs. Adapted from the doc example:</p>\n\n<pre><code>type Tuple struct {\n    Country    string\n    Population string\n}\ntuples := []Tuple{\n    {Country: \"abc\", Population: \"1234\"},\n    {Country: \"def\", Population: \"567\"},\n}\n\nb, err := json.Marshal(tuples)\nif err != nil {\n    fmt.Println(\"error:\", err)\n}\nos.Stdout.Write(b)\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>[\n    {\"Country\":\"abc\",\"Population\":\"1234\"},\n    {\"Country\":\"def\",\"Population\":\"567\"}\n]\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 3481046, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76ca1ada418b4a060f96ac0f87a79cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Kumar", "link": "https://stackoverflow.com/users/3481046/abinash-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 27799566, "answer_count": 1, "score": 1, "last_activity_date": 1420550447, "creation_date": 1420549591, "last_edit_date": 1420549990, "question_id": 27799326, "link": "https://stackoverflow.com/questions/27799326/can-i-format-dynamically-created-json-into-the-required-format-for-dev-express-c", "title": "Can i format dynamically created json into the required format for dev express charts", "body": "<p>I have written a go program for giving json as a response to the httpRequest,but i am able to create json in this format only :</p>\n\n<pre><code>{\n  \"Country\": [\n        \"abc\",\n        \"def\",\n\n    ],\n    \"Population\": [\n        \"8388344\",\n        \"343\",\n\n    ]\n}\n</code></pre>\n\n<p>The content types are dynamically defined using map[string]string.Can someone please help me out to give the json in the below format:</p>\n\n<pre><code>[\n    {\n       \"Country\" :\"abc\",\n       \"Population\" :\"8388344\"\n    },\n    {\n        \"Country\" : \"def\",\n        \"Population\" :\"343\"\n    },\n    ...\n]\n</code></pre>\n\n<p>Please help me out..</p>\n"}, {"tags": ["generics", "go", "nodes"], "answers": [{"comments": [{"owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "edited": false, "score": 0, "creation_date": 1420542481, "post_id": 27797215, "comment_id": 44003289, "body": "Thanks! Sometimes the solution is easy. I think you understood my problem."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": true, "score": 1, "last_activity_date": 1420541937, "creation_date": 1420541937, "answer_id": 27797215, "question_id": 27797034, "link": "https://stackoverflow.com/questions/27797034/implement-generic-node-list/27797215#27797215", "title": "Implement &quot;generic&quot; node list", "body": "<p>I am not entirely sure I understand what you are trying to do but here are a few ideas:</p>\n\n<ul>\n<li><strong>Use the <a href=\"http://golang.org/pkg/container/list/\" rel=\"nofollow\">standard container</a></strong></li>\n<li><p>Make the node contain your \"user\" data as an interface:</p>\n\n<pre><code>type Node struct {\n    next *Node\n    Value interface{}\n}\n</code></pre></li>\n</ul>\n\n<p>This is (somewhat) like doing it in C with a <code>void*</code> to user data.</p>\n"}], "owner": {"reputation": 13244, "user_id": 317915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/86d01c87cc6f22c8445661b72b6b0d78?s=128&d=identicon&r=PG", "display_name": "topskip", "link": "https://stackoverflow.com/users/317915/topskip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 27797215, "answer_count": 1, "score": 0, "last_activity_date": 1420541937, "creation_date": 1420541383, "question_id": 27797034, "link": "https://stackoverflow.com/questions/27797034/implement-generic-node-list", "title": "Implement &quot;generic&quot; node list", "body": "<p>I'd like to implement a linked list with <em>nodes</em>. Each node can be of a different type (Foo, Bar and Baz - will be 40-50 different nodes) and each type has common fields (prev, next, ...) and some node-specific fields.</p>\n\n<p>I have a hard time to come up with a solution that looks reasonable. Now the question: what approach can I take to make this more elegant?</p>\n\n<p>Here is my (dummy) <code>main.go</code>:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n\n    \"node\"\n)\n\nfunc main() {\n    a := node.NewFoo()\n    fmt.Println(a)\n\n    b := node.NewBar()\n    fmt.Println(b)\n\n    node.Append(a, b)\n}\n</code></pre>\n\n<p>and here is my implementation (<code>node.go</code>):</p>\n\n<pre><code>package node\n\ntype Node interface {\n}\n\ntype FooNode struct {\n    prev               Node\n    next               Node\n    FieldSpecificToFoo int\n}\n\ntype BarNode struct {\n    prev               Node\n    next               Node\n    FieldSpecificToBar int\n}\n\ntype BazNode struct {\n    prev               Node\n    next               Node\n    FieldSpecificToBaz int\n}\n\nfunc NewFoo() *FooNode {\n    return &amp;FooNode{}\n}\n\nfunc NewBar() *BarNode {\n    return &amp;BarNode{}\n}\n\nfunc NewBaz() *BazNode {\n    return &amp;BazNode{}\n}\n\nfunc Append(a, b Node) {\n    // set next and prev pointer\n    switch v := a.(type) {\n    case FooNode:\n        v.next = b\n    case BarNode:\n        v.next = b\n    case BazNode:\n        v.next = b\n    }\n\n    switch v := b.(type) {\n    case FooNode:\n        v.prev = a\n    case BarNode:\n        v.prev = a\n    case BazNode:\n        v.prev = a\n    }\n}\n</code></pre>\n\n<p>This is obviously a pretty crappy implementation. What can I do in this case?</p>\n"}, {"tags": ["go", "channel", "goroutine"], "answers": [{"tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": true, "score": 7, "last_activity_date": 1420538202, "last_edit_date": 1420538202, "creation_date": 1420534404, "answer_id": 27795117, "question_id": 27795036, "link": "https://stackoverflow.com/questions/27795036/create-chan-for-func-with-two-return-args/27795117#27795117", "title": "Create chan for func with two return args", "body": "<h2>Using 2 different channels</h2>\n\n<p>You want to send values to 2 different channels. Sending a value to a channel is not an assignment, so you can't send on both channels in one step.</p>\n\n<p>First store the values returned by <code>boolInt()</code>, then send the values to the 2 channels like this:</p>\n\n<pre><code>go func() {\n    b, i := boolInt()\n    chanBool &lt;- b\n    chanInt &lt;- i\n}()\n</code></pre>\n\n<p><strong>Testing it:</strong></p>\n\n<pre><code>go func() {\n    b, i := boolInt()\n    chanBool &lt;- b\n    chanInt &lt;- i\n}()\n\nfmt.Println(\"Received bool:\", &lt;-chanBool)\nfmt.Println(\"Received int:\", &lt;-chanInt)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Received bool: false\nReceived int: 1\n</code></pre>\n\n<p><strong>Note:</strong> you first have to receive from <code>chanBool</code> because you created unbuffered channels, and because in the example we first send to <code>chanBool</code>, that blocks until the sent value is recevied and only then proceeds to send a value to the <code>chanInt</code>. Attempting to receive from <code>chanInt</code> first would cause a deadlock (<code>\"fatal error: all goroutines are asleep - deadlock!\"</code>).</p>\n\n<h2>Solution using only one channel</h2>\n\n<p>If you want to send multiple values on a channel, you can create a wrapper <code>struct</code> for the values:</p>\n\n<pre><code>type MyStruct struct {\n    b bool\n    i int\n}\n</code></pre>\n\n<p>And using it:</p>\n\n<pre><code>ch := make(chan MyStruct)\ngo func() {\n    b, i := boolInt()\n    ch &lt;- MyStruct{b, i}\n}()\n\nfmt.Println(\"Received value:\", &lt;-ch)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Received value: {false 1}\n</code></pre>\n\n<p><strong>Note:</strong> You could also use a <code>[]interface{}</code> slice as a wrapper, but a struct provides a clearer way and type safety to its fields.</p>\n\n<p><strong>Note #2:</strong> It would make things easier and clearer if the <code>boolInt()</code> function itself would return a <code>MyStruct</code> value:</p>\n\n<pre><code>func boolInt() MyStruct {\n    return MyStruct{false, 1}\n}\n</code></pre>\n\n<p>In which case code would be as simple as this:</p>\n\n<pre><code>ch := make(chan MyStruct)\ngo func() {\n    ch &lt;- boolInt()\n}()\n</code></pre>\n\n<h2>Alternative 1 channel solution</h2>\n\n<p>Another option is to make the channel type <code>interface{}</code> so it can receive values of any type, and just send/receive multiple values on it:</p>\n\n<pre><code>ch := make(chan interface{})\ngo func() {\n    b, i := boolInt()\n    ch &lt;- b\n    ch &lt;- i\n}()\n\nfmt.Println(\"Received values:\", &lt;-ch, &lt;-ch)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Received values: false 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1420536594, "creation_date": 1420536594, "answer_id": 27795708, "question_id": 27795036, "link": "https://stackoverflow.com/questions/27795036/create-chan-for-func-with-two-return-args/27795708#27795708", "title": "Create chan for func with two return args", "body": "<p>If you want to send two values down a channel together, one option is to use a struct to pack both values together.  For example:</p>\n\n<pre><code>type BoolPlusInt struct {\n    B bool\n    I int\n}\n</code></pre>\n\n<p>You can then create a value of this type holding the two values before sending it down the channel.  For instance:</p>\n\n<pre><code>c := make(chan BoolPlusInt)\ngo func() {\n    var v BoolPlusInt\n    v.B, v.I = boolInt()\n    c &lt;- v\n}()\n</code></pre>\n\n<p>This solution might be preferable if you have multiple goroutines sending or receiving on the channel.  Since the two values are packed together you don't need to worry about bugs in one place leading to the two channels getting out of sync.</p>\n\n<p>You can experiment with this suggestion here: <a href=\"http://play.golang.org/p/I_Apg4ciFI\" rel=\"nofollow\">http://play.golang.org/p/I_Apg4ciFI</a></p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 1, "accepted_answer_id": 27795117, "answer_count": 2, "score": 4, "last_activity_date": 1475842935, "creation_date": 1420534009, "last_edit_date": 1475842935, "question_id": 27795036, "link": "https://stackoverflow.com/questions/27795036/create-chan-for-func-with-two-return-args", "title": "Create chan for func with two return args", "body": "<p>Is it posible to create channel for function <code>boolInt</code> without redefining it?</p>\n\n<pre><code>package main\n\nfunc boolInt() (bool, int) {\n    return false, 1\n}\n\nfunc main() {\n    chanBool := make(chan bool)\n    chanInt := make(chan int)\n    go func() {\n        // chanBool &lt;- boolInt() // error: multiple-value boolInt() in single-value context\n        chanBool, chanInt &lt;- boolInt() //  syntax error: unexpected semicolon or newline, expecting := or = or comma\n    }()\n\n}\n</code></pre>\n\n<p>When I try to use it in single value context\n<code>chanBool &lt;- boolInt()</code> I get an error:  <code>multiple-value boolInt() in single-value context</code>.</p>\n\n<p>In 2-value context: \n<code>chanBool, chanInt &lt;- boolInt()</code> got error: <code>syntax error: unexpected semicolon or newline, expecting := or = or comma</code>.</p>\n\n<p><a href=\"https://play.golang.org/p/3efHEX-Jkt\" rel=\"nofollow\">playground</a></p>\n"}, {"tags": ["go", "slice"], "answers": [{"comments": [{"owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "edited": false, "score": 0, "creation_date": 1420536585, "post_id": 27793399, "comment_id": 44000107, "body": "Thanks, I have go all through the <a href=\"http://blog.golang.org/go-slices-usage-and-internals\" rel=\"nofollow noreferrer\">official blog</a> again and have a better view of GoLang&#39;s slice mechanism."}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 5, "last_activity_date": 1420541213, "last_edit_date": 1420541213, "creation_date": 1420526362, "answer_id": 27793399, "question_id": 27793165, "link": "https://stackoverflow.com/questions/27793165/how-to-create-a-unfixed-length-slice-in-golang/27793399#27793399", "title": "how to create a unfixed length slice in golang", "body": "<p>A Go slice can't do that, but the <code>append()</code> function will grow your slice in a matter that appending elements becomes an <i>O</i>(1) amortized operation:</p>\n\n<pre><code>func listFile() []string {\n    // make a slice of length 0\n    list := make([]string, 0)\n\n    files, _ := ioutil.ReadDir(\"content\")\n    for _, f := range files {\n        // append grows list as needed\n        list = append(list, f.Name())\n    }\n\n    return list\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "edited": false, "score": 1, "creation_date": 1420536803, "post_id": 27793416, "comment_id": 44000219, "body": "Thanks, this reserved suggestion really make a spark for me."}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1420526438, "creation_date": 1420526438, "answer_id": 27793416, "question_id": 27793165, "link": "https://stackoverflow.com/questions/27793165/how-to-create-a-unfixed-length-slice-in-golang/27793416#27793416", "title": "how to create a unfixed length slice in golang", "body": "<p>Yes, you can create an empty slice and append to it with <code>append</code>. If you know more or less the average size you're expecting, you can reserve some space for it, just like in Java's ArrayList. This will prevent reallocating the underlying data when the slice grows.</p>\n\n<pre><code>//make an empty slice with 20 reserved items to avoid \nlist := make([]string, 0, 20)reallocation\n\n// now we just append to it. The underlying data is not copied\nlist = append(list, \"foo\") // add to it\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1420535472, "post_id": 27794667, "comment_id": 43999588, "body": "Upvote for providing the right solution for this case."}], "tags": [], "owner": {"reputation": 284620, "user_id": 1705598, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/aTFoe.jpg?s=128&g=1", "display_name": "icza", "link": "https://stackoverflow.com/users/1705598/icza"}, "is_accepted": false, "score": 2, "last_activity_date": 1420532422, "creation_date": 1420532422, "answer_id": 27794667, "question_id": 27793165, "link": "https://stackoverflow.com/questions/27793165/how-to-create-a-unfixed-length-slice-in-golang/27794667#27794667", "title": "how to create a unfixed length slice in golang", "body": "<p>To produce a slice of names from a slice of <code>FileInfo</code>, you don't need anything like the Java <code>ArrayList</code>.</p>\n\n<p><code>ioutil.ReadDir()</code> returns you a slice of <code>FileInfo</code> of which you can query its length using the built-in <strong><code>len</code></strong> function:</p>\n\n<pre><code>count := len(files)\n</code></pre>\n\n<p>So you you can make an array or slice capable of holding names of this amount:</p>\n\n<pre><code>func listFile() []string {\n    files, _ := ioutil.ReadDir(\"content\")\n\n    list := make([]string, len(files))\n    for i, f := range files {\n        list[i] = f.Name()\n    }\n\n    return list\n}\n</code></pre>\n"}], "owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 0, "accepted_answer_id": 27793399, "answer_count": 3, "score": 0, "last_activity_date": 1420541213, "creation_date": 1420525217, "question_id": 27793165, "link": "https://stackoverflow.com/questions/27793165/how-to-create-a-unfixed-length-slice-in-golang", "title": "how to create a unfixed length slice in golang", "body": "<p>Is there any way to create a <strong>unfixed length</strong> slice in go? As a example, I want to grab all the fileNames in a directory(<code>content/</code>) fill to  a <code>[] string</code> slice.</p>\n\n<p>The <code>content/</code> dir contains:</p>\n\n<pre><code>$-&gt; tree content/\ncontent/\n\u251c\u2500\u2500 1.txt\n\u251c\u2500\u2500 2.txt\n\u2514\u2500\u2500 tmp\n</code></pre>\n\n<p>Here is what I currently got:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"io/ioutil\"\n)\n\nfunc listFile() []string {\n    list := make([]string, 100)\n    // as you can see, I make a slice length as 100, but that is not appropriate.\n\n    files, _ := ioutil.ReadDir(\"content\")\n    i := 0\n    for _, f := range files{\n        list[i] = f.Name()\n        i = i+1\n    }\n    return list\n}\n\nfunc main(){\n    fmt.Print(listFile())\n}\n</code></pre>\n\n<p>What I want to achieve is a way to simulate the behavior of <code>ArrayList</code> in java, which I can just simply <code>list.add()</code> and wont care about the length.</p>\n\n<p>Can slice in GoLang do that? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["go", "goroutine"], "comments": [{"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 1, "creation_date": 1420672298, "post_id": 27792389, "comment_id": 44066635, "body": "When using parallel execution to speed-up a program, Amdahl&#39;s Law is important and will be one of the factors that determine whether you are successful or just wasting your effort. In Go, concurrency has broader aims than just faster execution. It&#39;s important enough to be worth learning about though, so I wish you success."}, {"owner": {"reputation": 2317, "user_id": 4466589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPR5Y.jpg?s=128&g=1", "display_name": "Bora M. Alper", "link": "https://stackoverflow.com/users/4466589/bora-m-alper"}, "reply_to_user": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 1, "creation_date": 1592766874, "post_id": 27792389, "comment_id": 110535899, "body": "@Rick-777 Amdahl\u2019s Law is more about <i>parallelism</i> than <i>concurrency</i>: in certain cases where latency is a huge factor (think of I/O-bound operations such as making 100 HTTP requests), concurrency can be a huge improvement."}, {"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1592848107, "post_id": 27792389, "comment_id": 110566127, "body": "Amdahl&#39;s law is quite simple and general - it doesn&#39;t care about (or even mention) I/o. Nor does it matter about the difference between parallelism and concurrency; these are widely misunderstood terms anyway."}, {"owner": {"reputation": 1519, "user_id": 734205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee59dd7b79f175e0664c3183bc862ce8?s=128&d=identicon&r=PG", "display_name": "ddelizia", "link": "https://stackoverflow.com/users/734205/ddelizia"}, "edited": false, "score": 0, "creation_date": 1601914116, "post_id": 27792389, "comment_id": 113547504, "body": "You can also check this library <a href=\"https://github.com/ddelizia/channelify\" rel=\"nofollow noreferrer\">github.com/ddelizia/channelify</a> (I am the author :) )"}], "answers": [{"comments": [{"owner": {"reputation": 1519, "user_id": 734205, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ee59dd7b79f175e0664c3183bc862ce8?s=128&d=identicon&r=PG", "display_name": "ddelizia", "link": "https://stackoverflow.com/users/734205/ddelizia"}, "edited": false, "score": 0, "creation_date": 1601914070, "post_id": 27792477, "comment_id": 113547476, "body": "I made a library that can do what you are doing in few lines with reflection. You can check the example <a href=\"https://github.com/ddelizia/channelify\" rel=\"nofollow noreferrer\">github.com/ddelizia/channelify</a>. The logic behind is the same but I think I made it easier to use :)"}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": true, "score": 15, "last_activity_date": 1420521319, "creation_date": 1420521319, "answer_id": 27792477, "question_id": 27792389, "link": "https://stackoverflow.com/questions/27792389/golang-functions-parallel-execution-with-return/27792477#27792477", "title": "golang functions: parallel execution with return", "body": "<p>Use chan/goroutine</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\n// sleeps for `secs` seconds\nfunc f1(secs time.Duration) (result string) {\n    fmt.Printf(\"waiting %v\\n\", secs)\n    time.Sleep(secs * time.Second)\n    result = fmt.Sprintf(\"waited for %v seconds\", secs)\n    return\n}\n\n// prints arg1, arg2\nfunc f2(arg1, arg2 string) {\n    fmt.Println(arg1)\n    fmt.Println(arg2)\n}\n\n// this function executes for 3 seconds, because waits a lot\nfunc runNotParallel() {\n    out1 := f1(2)\n    out2 := f1(1)\n    f2(out1, out2)\n\n}\n\n// golang parallel return functions\n// todo: make it run so all the function will executes for 2 seconds not for 3\nfunc runParallel() {\n    out1 := make(chan string)\n    out2 := make(chan string)\n    go func() {\n        out1 &lt;- f1(2)\n    }()\n    go func() {\n        out2 &lt;- f1(1)\n    }()\n    f2(&lt;-out1, &lt;-out2)\n}\n\nfunc main() {\n    runNotParallel()\n    runParallel()\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/G4RHiq9LJw\" rel=\"noreferrer\">https://play.golang.org/p/G4RHiq9LJw</a></p>\n"}, {"tags": [], "owner": {"reputation": 929, "user_id": 8109026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jomoj.jpg?s=128&g=1", "display_name": "Raed Shomali", "link": "https://stackoverflow.com/users/8109026/raed-shomali"}, "is_accepted": false, "score": 5, "last_activity_date": 1496805721, "creation_date": 1496805721, "answer_id": 44402936, "question_id": 27792389, "link": "https://stackoverflow.com/questions/27792389/golang-functions-parallel-execution-with-return/44402936#44402936", "title": "golang functions: parallel execution with return", "body": "<p>Another way you could do it is using <code>WaitGroup</code></p>\n\n<p>I wrote this utility function to help parallelize a group of functions:</p>\n\n<pre><code>import \"sync\"\n\n// Parallelize parallelizes the function calls\nfunc Parallelize(functions ...func()) {\n    var waitGroup sync.WaitGroup\n    waitGroup.Add(len(functions))\n\n    defer waitGroup.Wait()\n\n    for _, function := range functions {\n        go func(copy func()) {\n            defer waitGroup.Done()\n            copy()\n        }(function)\n    }\n}\n</code></pre>\n\n<p>So in your case, we could do this</p>\n\n<pre><code>value1 := \"\"\nvalue2 := \"\"\n\nfunc1 := func() {\n    value1 = f1(2)\n}\n\nfunc2 = func() {\n    value2 = f1(1)\n}\n\nParallelize(func1, func2)\n\nf2(out1, out2)\n</code></pre>\n\n<p>If you wanted to use the Parallelize function, you can find it here <a href=\"https://github.com/shomali11/util\" rel=\"noreferrer\">https://github.com/shomali11/util</a></p>\n"}, {"tags": [], "owner": {"reputation": 1168, "user_id": 6902803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a367db18393e37cb6bd3fc799bd21ca?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Kokorin", "link": "https://stackoverflow.com/users/6902803/oleg-kokorin"}, "is_accepted": false, "score": 0, "last_activity_date": 1616262092, "creation_date": 1616262092, "answer_id": 66724623, "question_id": 27792389, "link": "https://stackoverflow.com/questions/27792389/golang-functions-parallel-execution-with-return/66724623#66724623", "title": "golang functions: parallel execution with return", "body": "<p>here is a solution without channels but with the missing <strong>f2</strong> synchronization:</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;sync&quot;\n    &quot;time&quot;\n)\n\n// sleeps for `secs` seconds\nfunc f1(secs time.Duration, result *string, sg *sync.WaitGroup) () {\n    fmt.Printf(&quot;waiting %v\\n&quot;, secs)\n    time.Sleep(secs * time.Second)\n    *result = fmt.Sprintf(&quot;waited for %d seconds&quot;, secs)\n    if sg!= nil {\n        sg.Done()\n    }\n    return\n}\n\n// prints arg1, arg2\nfunc f2(arg1, arg2 string) {\n    fmt.Println(arg1)\n    fmt.Println(arg2)\n}\n\n// this function executes for 3 seconds, because waits a lot\nfunc runNotParallel() {\n\n    var out1, out2 string\n    f1(2, &amp;out1, nil)\n    f1(1, &amp;out2,nil)\n    f2(out1, out2)\n\n}\n\n// golang parallel return functions\n// todo: make it run so all the function will executes for 2 seconds not for 3\nfunc runParallel() {\n    var sg sync.WaitGroup\n    sg.Add(2)\n    var out1, out2 string\n    go f1(2, &amp;out1, &amp;sg)\n    go f1(1, &amp;out2, &amp;sg)\n    sg.Wait()\n    f2(out1, out2)\n}\n\nfunc main() {\n    runNotParallel()\n    runParallel()\n}\n</code></pre>\n<p>basically, <strong>go</strong> operator blocks from using/accessing a return values but it could be done using a pointers for the return place holders in the signature</p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10962, "favorite_count": 6, "accepted_answer_id": 27792477, "answer_count": 3, "score": 5, "last_activity_date": 1616262092, "creation_date": 1420520649, "question_id": 27792389, "link": "https://stackoverflow.com/questions/27792389/golang-functions-parallel-execution-with-return", "title": "golang functions: parallel execution with return", "body": "<p>How to make two functions calls <code>f1(2)</code> and <code>f1(1)</code> execute in parallel so that all the program would execute for 2 seconds not for 3.</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\n// sleeps for `secs` seconds\nfunc f1(secs time.Duration) (result string) {\n    fmt.Printf(\"waiting %V\\n\", secs)\n    time.Sleep(secs * time.Second)\n    result = fmt.Sprintf(\"waited for %d seconds\", secs)\n    return\n}\n\n// prints arg1, arg2\nfunc f2(arg1, arg2 string) {\n    fmt.Println(arg1)\n    fmt.Println(arg2)\n}\n\n// this function executes for 3 seconds, because waits a lot\nfunc runNotParallel() {\n\n    out1 := f1(2)\n    out2 := f1(1)\n    f2(out1, out2)\n\n}\n\n// golang parallel return functions\n// todo: make it run so all the function will executes for 2 seconds not for 3\nfunc runParallel() {\n    out1 := f1(2)\n    out2 := f1(1)\n    f2(out1, out2)\n}\n\nfunc main() {\n    runNotParallel()\n    runParallel()\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/WSRwOKvMBz\" rel=\"noreferrer\">playground</a></p>\n\n<p>I guess I can do it only with channels. Should I redefine function <code>f1</code> or I can leave it as is and change only way I call it?</p>\n"}, {"tags": ["go", "imap", "fetch"], "answers": [{"comments": [{"owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "edited": false, "score": 0, "creation_date": 1420523679, "post_id": 27792816, "comment_id": 43995143, "body": "Thanks James. Now I&#39;m reading the RFC 3501 in order to gain more knowledge about the IMAP protocol. I&#39;m still struggling to get the Go API work to fetch the body. Can you please show me some working code example that fetches the body of the mails. Thanks."}], "tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1420523482, "creation_date": 1420523482, "answer_id": 27792816, "question_id": 27791655, "link": "https://stackoverflow.com/questions/27791655/how-to-fetch-body-from-imap-server-in-go/27792816#27792816", "title": "How to fetch body from imap server in Go", "body": "<p>The example code you've linked to demonstrates the use of the IMAP <code>FETCH</code> command to fetch the <code>RFC822.HEADER</code> message data item for a message.  The RFC <a href=\"https://tools.ietf.org/html/rfc3501#section-6.4.5\" rel=\"nofollow\">contains a list of standard data items you can fetch from a message</a>.</p>\n\n<p>If you want the entire mime formatted message (both headers and body), then requesting <code>BODY</code> should do.  You can get the headers and message body separately by requesting <code>BODY[HEADER]</code> and <code>BODY[TEXT]</code> respectively.  Modifying the sample program to use one of these data items should get the data you are after.</p>\n"}, {"tags": [], "owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "is_accepted": true, "score": 3, "last_activity_date": 1420531141, "creation_date": 1420531141, "answer_id": 27794386, "question_id": 27791655, "link": "https://stackoverflow.com/questions/27791655/how-to-fetch-body-from-imap-server-in-go/27794386#27794386", "title": "How to fetch body from imap server in Go", "body": "<p>I figured out how to get the body text now.</p>\n\n<pre><code>cmd, _ = c.UIDFetch(set, \"RFC822.HEADER\", \"RFC822.TEXT\")\n\n// Process responses while the command is running\nfmt.Println(\"\\nMost recent messages:\")\nfor cmd.InProgress() {\n    // Wait for the next response (no timeout)\n    c.Recv(-1)\n\n    // Process command data\n    for _, rsp = range cmd.Data {\n        header := imap.AsBytes(rsp.MessageInfo().Attrs[\"RFC822.HEADER\"])\n        uid := imap.AsNumber((rsp.MessageInfo().Attrs[\"UID\"]))\n        body := imap.AsBytes(rsp.MessageInfo().Attrs[\"RFC822.TEXT\"])\n        if msg, _ := mail.ReadMessage(bytes.NewReader(header)); msg != nil {\n            fmt.Println(\"|--\", msg.Header.Get(\"Subject\"))\n            fmt.Println(\"UID: \", uid)\n\n            fmt.Println(string(body))\n        }\n    }\n    cmd.Data = nil\n    c.Data = nil\n}\n</code></pre>\n"}], "owner": {"reputation": 12745, "user_id": 1663023, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/fc43a735e2c498f450a9908a5bd9ebf4?s=128&d=identicon&r=PG", "display_name": "Qian Chen", "link": "https://stackoverflow.com/users/1663023/qian-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1923, "favorite_count": 0, "accepted_answer_id": 27794386, "answer_count": 2, "score": 6, "last_activity_date": 1420531141, "creation_date": 1420514946, "question_id": 27791655, "link": "https://stackoverflow.com/questions/27791655/how-to-fetch-body-from-imap-server-in-go", "title": "How to fetch body from imap server in Go", "body": "<p>I successfully fetched a list of email headers using the sample code from this url: <a href=\"https://godoc.org/code.google.com/p/go-imap/go1/imap#example-Client\" rel=\"noreferrer\">https://godoc.org/code.google.com/p/go-imap/go1/imap#example-Client</a> . However, I still haven't been able to fetch the body of the emails. Can anyone show some working sample code that could fetch the body of the emails from a imap server in Golang?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "reply_to_user": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1420505656, "post_id": 27790333, "comment_id": 43990721, "body": "yes, 300 fits into two bytes."}], "answers": [{"tags": [], "owner": {"reputation": 49343, "user_id": 2082673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gmyMb.jpg?s=128&g=1", "display_name": "dave", "link": "https://stackoverflow.com/users/2082673/dave"}, "is_accepted": true, "score": 1, "last_activity_date": 1420506110, "creation_date": 1420506110, "answer_id": 27790532, "question_id": 27790333, "link": "https://stackoverflow.com/questions/27790333/trying-to-insert-integer-into-byte-array/27790532#27790532", "title": "trying to insert integer into byte array", "body": "<p>I'm a little confused what you are even trying to do with</p>\n\n<pre><code>app0[13:15] = []byte(300)\n</code></pre>\n\n<p>A single byte can't hold the value 300, and you have a slice of bytes.  I'll assume you want the value 300 converted into two bytes:</p>\n\n<pre><code>import (\n    \"fmt\"\n    \"bytes\"\n    \"encoding/binary\"\n)\n\nfunc main() {\n    app0 := []byte(\"\\xff\\xe0\\x00\\x10\\x4a\\x46\\x49\\x46\\x00\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\")\n    app0 =  append(app0[:13], append(intToBytes(uint16(300)), app0[15:]...)...)\n    fmt.Println(app0)\n}\n\nfunc intToBytes(i uint16) []byte {\n    buf := new(bytes.Buffer)\n    _ = binary.Write(buf, binary.LittleEndian, i)\n    return buf.Bytes()\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/qADHwCCFQG\" rel=\"nofollow\">https://play.golang.org/p/qADHwCCFQG</a></p>\n\n<p>The trick here is you have to actually get an array of bytes, and then you can use the variadic operator (<code>...</code>) and then <code>append</code> function to replace the inner elements of the array.</p>\n"}, {"comments": [{"owner": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "edited": false, "score": 0, "creation_date": 1420506910, "post_id": 27790602, "comment_id": 43991042, "body": "thank you very much. this code is not portable. it will work correctly only on little-endian architecture, am I right?"}, {"owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "reply_to_user": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "edited": false, "score": 0, "creation_date": 1420507083, "post_id": 27790602, "comment_id": 43991074, "body": "@akonsu: For little-endian architecture, write: <code>app0[13], app0[14] = 300&amp;0xFF, 300&gt;&gt;8</code>."}], "tags": [], "owner": {"reputation": 133115, "user_id": 221700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad32856042eea9fd2db5210ac033787d?s=128&d=identicon&r=PG", "display_name": "peterSO", "link": "https://stackoverflow.com/users/221700/peterso"}, "is_accepted": false, "score": 1, "last_activity_date": 1420506649, "creation_date": 1420506649, "answer_id": 27790602, "question_id": 27790333, "link": "https://stackoverflow.com/questions/27790333/trying-to-insert-integer-into-byte-array/27790602#27790602", "title": "trying to insert integer into byte array", "body": "<p>For example,</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    app0 := []byte(\"\\xff\\xe0\\x00\\x10\\x4a\\x46\\x49\\x46\\x00\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\")\n    fmt.Println(app0)\n    app0[13], app0[14] = 300&gt;&gt;8, 300&amp;0xFF\n    fmt.Println(app0)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[255 224 0 16 74 70 73 70 0 1 1 1 0 0 0 0 0 0]\n[255 224 0 16 74 70 73 70 0 1 1 1 0 1 44 0 0 0]\n</code></pre>\n"}], "owner": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 1, "accepted_answer_id": 27790532, "answer_count": 2, "score": 0, "last_activity_date": 1420506649, "creation_date": 1420504744, "question_id": 27790333, "link": "https://stackoverflow.com/questions/27790333/trying-to-insert-integer-into-byte-array", "title": "trying to insert integer into byte array", "body": "<p>I have an array of bytes</p>\n\n<pre><code>app0 := []byte(\"\\xff\\xe0\\x00\\x10\\x4a\\x46\\x49\\x46\\x00\\x01\\x01\\x01\\x00\\x00\\x00\\x00\\x00\\x00\")\n</code></pre>\n\n<p>I am trying to figure out how to replace <code>app0[13:15]</code> with two bytes containing <code>300</code>.</p>\n\n<p>Please help. I tried the following but it won't even compile:</p>\n\n<pre><code>app0[13:15] = []byte(300)\n</code></pre>\n"}, {"tags": ["go", "goquery"], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 1, "creation_date": 1420522471, "post_id": 27792581, "comment_id": 43994824, "body": "Whoa! That was easy. That code&#39;s a little long though--is there a way to make it shorter? Lol. Thanks! I just figured out another way to do it too that I&#39;ll post."}, {"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 0, "creation_date": 1420523918, "post_id": 27792581, "comment_id": 43995207, "body": "Ok maybe I didn&#39;t figure out another way. I almost did though. I&#39;ll update my question explaining it."}, {"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 0, "creation_date": 1420561334, "post_id": 27792581, "comment_id": 44014393, "body": "Well this is ironic. This question is for some code to put data into an sqlite database, and you&#39;re the author of the sqlite3 driver! Awesome examples on the git repo. :)"}], "tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": true, "score": 1, "last_activity_date": 1420522059, "creation_date": 1420522059, "answer_id": 27792581, "question_id": 27789446, "link": "https://stackoverflow.com/questions/27789446/goquery-concatenate-a-tag-with-the-one-that-follows/27792581#27792581", "title": "goquery- Concatenate a tag with the one that follows", "body": "<p>I don't know what you are writing code with goquery. But maybe, your expected is neighbor selector.</p>\n\n<pre><code>h1+p\n</code></pre>\n\n<p>This returns h1 tags which has p tag in neighbor.</p>\n"}], "owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 27792581, "answer_count": 1, "score": 2, "last_activity_date": 1445405651, "creation_date": 1420499081, "last_edit_date": 1592644375, "question_id": 27789446, "link": "https://stackoverflow.com/questions/27789446/goquery-concatenate-a-tag-with-the-one-that-follows", "title": "goquery- Concatenate a tag with the one that follows", "body": "<p>For some background info, I'm new to Go (3 or 4 days), but I'm starting to get more comfortable with it.</p>\n<p>I'm trying to use <code>goquery</code> to parse a webpage. (Eventually I want to put some of the data in a database). For my problem, an example will be the easiest way to explain it:</p>\n<pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;h1&gt;\n            &lt;span class=&quot;text&quot;&gt;Go &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;totally &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;kicks &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;hacks &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;its &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h1&gt;\n            &lt;span class=&quot;text&quot;&gt;debugger &lt;/span&gt;\n        &lt;/h1&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;should &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;be &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;called &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;ogle &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h3&gt;\n            &lt;span class=&quot;statement&quot;&gt;true&lt;/span&gt;\n        &lt;/h3&gt;\n    &lt;/body&gt;\n&lt;html&gt;\n</code></pre>\n<p>I'd like to:</p>\n<ol>\n<li><strong>Extract</strong> the content of <code>&lt;h1...&quot;text&quot;</code>.</li>\n<li><strong>Insert</strong> (and concatenate) this extracted content into the content of <code>&lt;p...&quot;text&quot;</code>.</li>\n<li>Only do this for the <code>&lt;p&gt;</code> tag that <em>immediately follows</em> the <code>&lt;h1&gt;</code> tag.</li>\n<li>Do this for <strong>all</strong> of the <code>&lt;h1&gt;</code> tags on the page.</li>\n</ol>\n<p>So this is what I want it to look like:</p>\n<pre><code>&lt;html&gt;\n    &lt;body&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;Go totally &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;kicks &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;hacks &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;its &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;debugger should &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;be &lt;/span&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;span class=&quot;text&quot;&gt;called &lt;/span&gt;\n            &lt;span class=&quot;post&quot;&gt;ogle&lt;/span&gt;\n        &lt;/p&gt;\n        &lt;h3&gt;\n            &lt;span class=&quot;statement&quot;&gt;true&lt;/span&gt;\n        &lt;/h3&gt;\n    &lt;/body&gt;\n&lt;html&gt;\n</code></pre>\n<p>With the code starting off like this,</p>\n<pre><code>package main\n\nimport (\n    &quot;fmt&quot;\n    &quot;strings&quot;\n    &quot;github.com/PuerkitoBio/goquery&quot;\n)\n\nfunc main() {\n    html_code := strings.NewReader(`code_example_above`)\n    doc, _ := goquery.NewDocumentFromReader(html_code)\n</code></pre>\n<p>I know that I can read <code>&lt;h1...&quot;text&quot;</code> with:</p>\n<pre><code>h3_tag := doc.Find(&quot;h3 .text&quot;)\n</code></pre>\n<p>I also know that I can add the content of <code>&lt;h1...&quot;text&quot;</code> to the content of <code>&lt;p...&quot;text&quot;</code> with this:</p>\n<pre><code>doc.Find(&quot;p .text&quot;).Before(&quot;h3 .text&quot;)\n</code></pre>\n<p>^But this command inserts the content from <em>every single</em> case of <code>&lt;h1...&quot;text&quot;</code> before <em>every single</em> case of <code>&lt;p...&quot;text&quot;</code>.</p>\n<p>Then, I found out how to get a step closer to what I want:</p>\n<pre><code>doc.Find(&quot;p .text&quot;).First().Before(&quot;h3 .text&quot;)\n</code></pre>\n<p>^This command inserts the content from <em>every single</em> case of <code>&lt;h1...&quot;text&quot;</code> <strong>only</strong> before the <strong>first</strong> case of <code>&lt;p...&quot;text&quot;</code> (which is closer to what I want).</p>\n<p>I also tried using <code>goquery</code>'s <code>Each()</code> function, but I could not get any closer to what I wanted with that method (though I'm sure there's a way to do it with <code>Each()</code>, right?)</p>\n<p>My biggest issue is that I can't figure out how to associate each instance of <code>&lt;h1...&quot;text&quot;</code> with the <code>&lt;p...&quot;text&quot;</code> instance that immediately follows it.</p>\n<p>If it helps, <code>&lt;h1...&quot;text&quot;</code> is <strong>always</strong> followed by <code>&lt;p...&quot;text&quot;</code> on the web pages I'm trying to parse.</p>\n<p>My brain's out of juice. Do any Go geniuses know how to do this and are willing to explain it? Thanks in advance.</p>\n<h3>EDIT</h3>\n<p>I found out something else I can do:</p>\n<pre><code>doc.Find(&quot;h1&quot;).Each(func(i int, s *goquery.Selection) {\n    nex := s.Next().Text()\n    fmt.Println(s.Text(), nex, &quot;\\n\\n&quot;)\n})\n</code></pre>\n<p>^This prints out what I want--the contents of each instance of <code>&lt;h1...&quot;text&quot;</code> followed by its immediate instance of <code>&lt;p...&quot;text&quot;</code>. I had thought that <code>s.Next()</code> would output the next instance of <code>&lt;h1&gt;</code>, but it outputs the next tag in <code>doc</code>--the <code>*goquery.Selection</code> that it's iterating through. Is that correct?</p>\n<p>Or, as <code>mattn</code> pointed out, I could also use <code>doc.Find(&quot;h1+p&quot;)</code>.</p>\n<p>I'm still having trouble appending <code>&lt;h1...&quot;text&quot;</code> to <code>&lt;p...&quot;text&quot;</code>. I'll post it as another question because you can break this one down into multiple questions, and <code>Mattn</code> already answered one.</p>\n"}, {"tags": ["security", "rest", "go", "hmac"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1467267"}, "edited": false, "score": 0, "creation_date": 1420559868, "post_id": 27799844, "comment_id": 44013473, "body": "You&#39;re right about the Hash. It shouldn&#39;t be there :). Thanks for the answer. Just wanted to be sure before I continued rounding up this segment of my system."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 1, "last_activity_date": 1420551484, "creation_date": 1420551484, "answer_id": 27799844, "question_id": 27789310, "link": "https://stackoverflow.com/questions/27789310/hmac-with-a-time-window/27799844#27799844", "title": "HMAC with a time-window", "body": "<p>There's not much to answer here, an HMAC authenticates a message and verifies integrity, and that seems to be what you want. Also, TLS is only \"more than enough\" if you're authenticating the client. If this is an unauthenticated call, then HMAC is still reasonable to prove the knowledge of a shared secret.</p>\n\n<p>Note that <code>SecretHash</code> is superfluous. You already have a secret shared key.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1467267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 27799844, "answer_count": 1, "score": 0, "last_activity_date": 1420551484, "creation_date": 1420498397, "question_id": 27789310, "link": "https://stackoverflow.com/questions/27789310/hmac-with-a-time-window", "title": "HMAC with a time-window", "body": "<p>I'm doing some tests with HMAC by using a time-window mechanism based on UTC+0 synced time. The server has a special public API call <code>http://myserver.com/api/servertime/</code> that will return the server's exact UTC+0 time. This way the API users can sync their requesting client so it will be able to match the time window my API allows for secure calls. I built in a 30 minute timeslot (<code>-15min</code> - <code>+15min</code>).</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>func GenerateHmac512(message []byte, key []byte) []byte {\n    h := hmac.New(sha512.New, key)\n    h.Write(message)\n    return []byte(base64.StdEncoding.EncodeToString(h.Sum(nil)))\n}\n\nfunc ValidateHmac512(message, messageMAC, key []byte) bool {\n    var err error\n    decryptedMessageMAC, err := base64.StdEncoding.DecodeString(string(messageMAC))\n\n    if err != nil {\n        log.Fatalln(err.Error())\n        return false\n    }\n\n    mac := hmac.New(sha512.New, key)\n    mac.Write(message)\n    expectedMAC := mac.Sum(nil)\n    return hmac.Equal(decryptedMessageMAC, expectedMAC)\n}\n\nfunc main() {\n    timestamp := time.Now().Unix()\n    key := []byte(\"afad9411468602782fb62d904f623d87\")\n    message := []byte(fmt.Sprintf(\"SecretHash,Value1,Value2,Value3,TimeStamp:%d\", time.Now().Unix()))\n    hmacHash := GenerateHmac512(message, key)\n    hmacValid := ValidateHmac512(message, hmacHash, key)\n    log.Println(timestamp)\n    log.Println(string(hmacHash))\n    log.Println(hmacValid)\n\n    requestValid := false\n\n    if timestamp &gt; time.Now().Unix()-(60*15) &amp;&amp; timestamp &lt; time.Now().Unix()+(60+15) {\n        requestValid = true\n    }\n\n    log.Println(requestValid)\n}\n</code></pre>\n\n<p>I'm hashing the timestamp that will be publicly provided in the call in my HMAC hash, combined with the secret hash. I'm wondering if this is fool-proof enough, or it would need more work to make it totally solid? The call would be something like this:</p>\n\n<pre><code>POST http://myserver.com/api/users/\nValue1 : Data1\nValue2 : Data2\nValue3 : Data3\nTimestamp : 1420497639\n</code></pre>\n\n<p><em>Eventually when this is all OK I'm gonna send this data over SSL/TLS. I know SSL is more than enough and HMAC wouldn't be needed, but I like to have these 3 layers of security. And I want to benchmark variations of these layers to see what the performance impact is and how I can tweak it to have a good balance between performance and security.</em></p>\n"}, {"tags": ["go", "goroutine"], "comments": [{"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1420498099, "post_id": 27789227, "comment_id": 43988474, "body": "Read the implementation?"}, {"owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1420498284, "post_id": 27789227, "comment_id": 43988540, "body": "Where can I find the implementation on built-in keywords?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 1, "creation_date": 1420498857, "post_id": 27789227, "comment_id": 43988787, "body": "<a href=\"http://dave.cheney.net/2014/06/07/five-things-that-make-go-fast\" rel=\"nofollow noreferrer\">dave.cheney.net/2014/06/07/five-things-that-make-go-fast</a> can help."}, {"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1420498877, "post_id": 27789227, "comment_id": 43988801, "body": "I haven&#39;t looked but in Go&#39;s source of course - I was mainly saying that the only way to answer this definitively is to review the source and study it."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420499220, "post_id": 27789227, "comment_id": 43988926, "body": "You could call them &quot;user-mode threads&quot; multiplexed onto OS threads by a user-mode scheduler. That is: when one goroutine starts waiting on a blocking operation (say, an HTTP call to a remote server), the Go runtime looks for something else that can run, and switches to it (even if the last time it ran, it ran on a different OS thread)."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420499450, "post_id": 27789227, "comment_id": 43989009, "body": "Compared to the usual OS threads in Linux, Go threads have less switching overhead because you don&#39;t have to hop into kernel mode and back to user mode (and, more importantly, you don&#39;t have to run Linux&#39;s more complex fair scheduler), and rather than allocating lots of stack space, it initially allocates a few KB and it can grow as necessary later. I think (going a bit outside my firm knowledge here) people working on non-Go runtimes (Rust?) have talked about avoiding heavy allocation of physical RAM f/new threads using VM overcommit, though that has the caveat that it&#39;s an OS-wide setting."}, {"owner": {"reputation": 76939, "user_id": 15955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e95618da1c880d3f324319567ca52591?s=128&d=identicon&r=PG", "display_name": "Nils Pipenbrinck", "link": "https://stackoverflow.com/users/15955/nils-pipenbrinck"}, "edited": false, "score": 0, "creation_date": 1420500199, "post_id": 27789227, "comment_id": 43989234, "body": "They are just fibers: <a href=\"https://en.wikipedia.org/wiki/Fiber_%28computer_science%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fiber_%28computer_science%29</a>"}, {"owner": {"reputation": 2763, "user_id": 2517719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9NsiC.jpg?s=128&g=1", "display_name": "Floegipoky", "link": "https://stackoverflow.com/users/2517719/floegipoky"}, "reply_to_user": {"reputation": 76939, "user_id": 15955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e95618da1c880d3f324319567ca52591?s=128&d=identicon&r=PG", "display_name": "Nils Pipenbrinck", "link": "https://stackoverflow.com/users/15955/nils-pipenbrinck"}, "edited": false, "score": 0, "creation_date": 1420501203, "post_id": 27789227, "comment_id": 43989561, "body": "@NilsPipenbrinck Seems they might be more accurately interpreted as <a href=\"https://en.wikipedia.org/wiki/Fiber_%28computer_science%29#Fibers_and_coroutines\" rel=\"nofollow noreferrer\">coroutines</a>"}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420501226, "post_id": 27789227, "comment_id": 43989566, "body": "Essentially yes re: what Nils said; &quot;green threads&quot; are similar. (I think there are distinctions you could make, reading the definitions as WP phrases them, but all are, from the app perspective, processes implemented with the help of user-mode scheduling.) The performance benefit of goroutines/fibers/green threads is also similar to the boost some software gets from event-driven models (look at nginx/libuv/Node), though not all event driven tools show a thread-like abstraction to the user (e.g., Node makes you program with callbacks)."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420501822, "post_id": 27789227, "comment_id": 43989749, "body": "There are fine distinctions--WP pages seem to say (correctly or not) that &quot;fibers&quot; doesn&#39;t refer to a language-level construct (and says the language-level version is called a coroutine) and that &quot;pure fibers&quot; and green threads &quot;normally cannot&quot; use multiple cores, unlike the <a href=\"https://en.wikipedia.org/wiki/Thread_(computing)#Models\" rel=\"nofollow noreferrer\">M:N (hybrid) threading</a> model goroutines follow. I suspect the highly specific baggage attached to &quot;green thread,&quot; &quot;fiber,&quot; and &quot;coroutine&quot; are part of why a new word was coined. (The other part being that the new word just sounded cool, haha.)"}, {"owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "edited": false, "score": 0, "creation_date": 1420532010, "post_id": 27789227, "comment_id": 43998122, "body": "To see a comparison betweeen goroutines and green threads, check <a href=\"http://programmers.stackexchange.com/questions/222642/are-go-langs-goroutine-pools-just-green-threads/222694#222694\" title=\"are go langs goroutine pools just green threads\">programmers.stackexchange.com/questions/222642/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6973, "user_id": 720391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lGHly.png?s=128&g=1", "display_name": "mattn", "link": "https://stackoverflow.com/users/720391/mattn"}, "is_accepted": false, "score": 1, "last_activity_date": 1420525530, "creation_date": 1420525530, "answer_id": 27793226, "question_id": 27789227, "link": "https://stackoverflow.com/questions/27789227/what-exactly-are-goroutines/27793226#27793226", "title": "What exactly are goroutines?", "body": "<p>When having two CPUs, goroutine(s) runs as real threads. When having single CPU, the goroutine(s) runs as co-routine of single thread that running with switching their contexts. goroutine doesn't stick the fixed thread. So it doesn't identifier like thread-id. If you want to stick goroutine as OS thread, you need to use <code>runtime.LockOSThread()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "is_accepted": false, "score": 12, "last_activity_date": 1420605766, "last_edit_date": 1420605766, "creation_date": 1420530563, "answer_id": 27794268, "question_id": 27789227, "link": "https://stackoverflow.com/questions/27789227/what-exactly-are-goroutines/27794268#27794268", "title": "What exactly are goroutines?", "body": "<p>A few things distinguish goroutines from typical OS threads:</p>\n\n<ul>\n<li>There's <em>user-mode scheduling</em>. When a goroutine is blocked (waiting on the network, say), the Go runtime looks for another one that can run. This happens without having to enter and exit kernel mode and without the OS kernel's scheduler running.</li>\n<li>There isn't <em>only</em> user-mode scheduling: to use multiple cores, Go will start multiple OS threads and run goroutines on all of them, potentially moving a goroutine between OS threads to keep everything busy. If you hear that goroutines are \"multiplexed\" onto OS threads, that's what it means.</li>\n<li>They're meant to have low cost to start. Stacks start out small, only a few kilobytes and growing as needed, whether the OS is using virtual-memory overcommit or not.</li>\n<li>They're tied in with the language; besides the <code>go</code> statement itself, there are <a href=\"http://golang.org/ref/spec#Channel_types\" rel=\"noreferrer\">channel types</a> and operations and <a href=\"http://golang.org/ref/spec#Select_statements\" rel=\"noreferrer\"><code>select</code> statements</a> for coordinating the goroutines.</li>\n<li>They <em>lack</em> some OS threading features: currently, Go's scheduler doesn't guarantee fairness, and there's only very limited pre-emption (an empty <code>for{}</code> loop will never be switched away from).</li>\n</ul>\n\n<p>They're closely related to lots of other terms: </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Fiber_%28computer_science%29\" rel=\"noreferrer\">fibers</a>, a term used in connection with user-mode-scheduled threads</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Green_threads\" rel=\"noreferrer\">green threads</a>, another term used to refer to user-mode-scheduled threads</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Coroutine\" rel=\"noreferrer\">coroutines</a>, referring to routines that can yield control to each other at arbitrary points in their code</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Event-driven_architecture\" rel=\"noreferrer\">event-driven architectures</a>, which might switch to other tasks while waiting on asynchronous events like network I/O, but may not present a thread-like interface (they might use callback functions instead, for example)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Thread_(computing)#Models\" rel=\"noreferrer\">M:N hybrid threading</a>, which involves both kernel- and user-mode threads, and can involve migration of user-mode threads across OS threads.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5539, "user_id": 871134, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BKxlV.jpg?s=128&g=1", "display_name": "Deleplace", "link": "https://stackoverflow.com/users/871134/deleplace"}, "is_accepted": false, "score": 0, "last_activity_date": 1420633307, "creation_date": 1420633307, "answer_id": 27819429, "question_id": 27789227, "link": "https://stackoverflow.com/questions/27789227/what-exactly-are-goroutines/27819429#27819429", "title": "What exactly are goroutines?", "body": "<p><a href=\"http://morsmachine.dk/go-scheduler\" rel=\"nofollow\">This Morsing's blog post about the Go scheduler</a> is nice because it has pictures with triangles, squares and circles.</p>\n\n<p>From the scheduler's point of view :</p>\n\n<blockquote>\n  <p><em>The goroutine includes the stack, the instruction pointer and other information important for scheduling.</em></p>\n</blockquote>\n"}], "owner": {"reputation": 21585, "user_id": 160527, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f2af00f8b669405a2a068ddae153ff48?s=128&d=identicon&r=PG", "display_name": "Corey Ogburn", "link": "https://stackoverflow.com/users/160527/corey-ogburn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1420633307, "creation_date": 1420498054, "question_id": 27789227, "link": "https://stackoverflow.com/questions/27789227/what-exactly-are-goroutines", "title": "What exactly are goroutines?", "body": "<p>The tutorials and documentation I've read all say that goroutines are \"not quite threads\" or \"lightweight threads\" but can usually be treated like they are their own separate thread.</p>\n\n<p>So... What are they really?</p>\n"}, {"tags": ["performance", "memory-management", "go", "variadic-functions", "escape-analysis"], "comments": [{"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1420496506, "post_id": 27788813, "comment_id": 43987833, "body": "Well, for starters, the <code>fmt</code> package heavily utilizes reflection to get all of the fancy struct printing it does. That can be a bottleneck if you&#39;re really shooting for performance. I realize its not even being called - but that&#39;s something else to think about. May I ask, what happens if you write your own variadic function that accepts arguments that are <b>NOT</b> of type <code>interface{}</code>? Do you see the same issues?"}, {"owner": {"reputation": 175, "user_id": 4219537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bcc75841a5c4da353fc4edbe24b4b5?s=128&d=identicon&r=PG&f=1", "display_name": "mansfield", "link": "https://stackoverflow.com/users/4219537/mansfield"}, "reply_to_user": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1420502514, "post_id": 27788813, "comment_id": 43989971, "body": "Yes, I tested it on a variadic function which took <code>*int</code>s as arguments, but forgot to specify that or to include the source (which I have now done). The results are the same as with <code>Printf()</code>. Also, for the reasons you have mentioned, I generally do not use the <code>fmt</code> package in sections which are critical to performance. Although it is certainly a good thing to note."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420503875, "post_id": 27788813, "comment_id": 43990325, "body": "Oh, only marginally prettier, but another option: <code>ptr1, ptr2 := ptr1, ptr2</code> inside the if block. Unless the compiler optimizes that away, now it&#39;s two variables declared inside the &#39;if&#39; that escape, which might be analogous to the temporary returned from <code>Copy</code> created inside the <code>if</code> escaping."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420503982, "post_id": 27788813, "comment_id": 43990344, "body": "Still, super odd and sort of unfortunate, and may be worth posting reduction to <code>golang-nuts</code>."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420504247, "post_id": 27788813, "comment_id": 43990402, "body": "Slightly curious if explicitly creating the slice at the callsite, as in <code>fmt.Printf(&quot;%v %v&quot;, []interface{}{ptr1, ptr2}...)</code> helps--doubt it (seems like that must be how Go looks at the existing printf), arguably uglier than <code>a, b := a, b</code>, but, you know, for science."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420504720, "post_id": 27788813, "comment_id": 43990505, "body": "Yup, nope, none of that worked (<a href=\"http://play.golang.org/p/vFFq_ibE-D\" rel=\"nofollow noreferrer\">play.golang.org/p/vFFq_ibE-D</a>). Whee, I&#39;ve got nothin&#39;."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420512751, "post_id": 27788813, "comment_id": 43992489, "body": "Looking again I just realized <code>Copy</code> is actually allocating a <i>new integer</i> that escapes in place of the original. That makes me think it&#39;s just that any pointer passed passed to <code>Printf</code> is assumed to escape (i.e., Go can&#39;t trivially prove <code>Printf</code> doesn&#39;t stash inputs somewhere). That makes me pessimistic about finding a simple syntactical change that avoids this as long as long as <code>ptr</code> (not <code>ptr==nil</code> or <code>*ptr</code>) is being passed into <code>Printf</code>."}, {"owner": {"reputation": 155397, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 4, "creation_date": 1420531661, "post_id": 27788813, "comment_id": 43998000, "body": "Re: &quot;Go can&#39;t trivially prove Printf doesn&#39;t stash inputs somewhere&quot;: More precisely: <a href=\"http://golang.org/src/cmd/gc/esc.c\" rel=\"nofollow noreferrer\">Go&#39;s escape analysis</a> really only applies to function parameters and local variables. Since <code>Printf</code>&#39;s formal parameter is a slice, the escape analysis only verifies that the slice doesn&#39;t escape. It doesn&#39;t bother to check whether the elements of the slice (the actual arguments) could escape. This is what mansfield was getting at with his/her supposition that &quot;Go allocates pointers on the heap whenever they are placed in a slice&quot;."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420577873, "post_id": 27788813, "comment_id": 44023031, "body": "Yeah. Pretty rough that there&#39;s no obvious non-escaping alt. here--oh well."}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 1737204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2851ca9622b504c85b92fc3e93d87b1f?s=128&d=identicon&r=PG", "display_name": "wldsvc", "link": "https://stackoverflow.com/users/1737204/wldsvc"}, "edited": false, "score": 0, "creation_date": 1429138167, "post_id": 27925214, "comment_id": 47464060, "body": "<a href=\"http://stackoverflow.com/questions/27788813/variadic-functions-causing-unnecessary-heap-allocations-in-go#comment43998000_27788813\">ruakh&#39;s comment above</a> is more accurate as to the reason why. Anyhow your solution works IF the variadic function called does not change the values or store the pointers for later use, so it&#39;s fine if the OP just does a Printf should an error occur."}, {"owner": {"reputation": 1036, "user_id": 1737204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2851ca9622b504c85b92fc3e93d87b1f?s=128&d=identicon&r=PG", "display_name": "wldsvc", "link": "https://stackoverflow.com/users/1737204/wldsvc"}, "edited": false, "score": 0, "creation_date": 1429478168, "post_id": 27925214, "comment_id": 47605074, "body": "Scratch what I said, your code forces a copy of the incoming data (n1 and n2) at every iteration of the loop, which is suboptimal in this case. He&#39;s probably dealing with pointers to structures much bigger than an int. His only solution is to copy the data only in the escaping block (<code>if ptr1 == nil ... {</code>)"}], "tags": [], "owner": {"reputation": 10229, "user_id": 195130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e8ae4e7eded8cd37805b4b31cc1f1c53?s=128&d=identicon&r=PG", "display_name": "Chandra Sekar", "link": "https://stackoverflow.com/users/195130/chandra-sekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1421164458, "last_edit_date": 1421164458, "creation_date": 1421161701, "answer_id": 27925214, "question_id": 27788813, "link": "https://stackoverflow.com/questions/27788813/variadic-functions-causing-unnecessary-heap-allocations-in-go/27925214#27925214", "title": "Variadic functions causing unnecessary heap allocations in Go", "body": "<p>From <a href=\"http://golang.org/doc/faq#stack_or_heap\" rel=\"nofollow\">Go FAQ</a>,</p>\n\n<blockquote>\n  <p>In the current compilers, if a variable has its address taken, that\n  variable is a candidate for allocation on the heap. However, a basic\n  escape analysis recognizes some cases when such variables will not\n  live past the return from the function and can reside on the stack.</p>\n</blockquote>\n\n<p>When the pointers are passed to a function, I think it fails the second part of escape analysis. For example, the function may assign the pointer to a global variable in its package which lives longer than the current stack. I don't think the current compiler does such deep escape analysis.</p>\n\n<p>One way to avoid the cost of allocation would be to move the allocation outside the loop and reassign the value to allocated memory inside the loop.</p>\n\n<pre><code>func DoWork() {\n    sum := 0\n    n1, n2 := new(int), new(int)\n\n    for i := 0; i &lt; BigScaryNumber; i++ {\n        *n1, *n2 = rand.Intn(20), rand.Intn(20)\n        ptr1, ptr2 := n1, n2\n\n        // Check if pointers are nil.\n        if ptr1 == nil || ptr2 == nil {\n            fmt.Printf(\"Pointers %v %v contain a nil.\\n\", n1, n2)\n            break\n        }\n\n        // Do work with pointer contents.\n        sum += *ptr1 + *ptr2\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 4219537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bcc75841a5c4da353fc4edbe24b4b5?s=128&d=identicon&r=PG&f=1", "display_name": "mansfield", "link": "https://stackoverflow.com/users/4219537/mansfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1421164458, "creation_date": 1420496049, "last_edit_date": 1420527788, "question_id": 27788813, "link": "https://stackoverflow.com/questions/27788813/variadic-functions-causing-unnecessary-heap-allocations-in-go", "title": "Variadic functions causing unnecessary heap allocations in Go", "body": "<p>I'm currently working on some performance sensitive code in Go. At one point I have a particularly tight inner loop which does three things in succession:</p>\n\n<ol>\n<li><p>Obtain several pointers to data. In the event of a rare error, one or more of these pointers might be <code>nil</code>.</p></li>\n<li><p>Check whether this error has occurred, and log an error if it has.</p></li>\n<li><p>Do work with the data stored in the pointers.</p></li>\n</ol>\n\n<p>Shown below is a toy program with the same structure (although the pointers can never actually be nil).</p>\n\n<pre><code>package main\n\nimport (\n    \"math/rand\"\n    \"fmt\"\n)\n\nconst BigScaryNumber = 1&lt;&lt;25\n\nfunc DoWork() {\n    sum := 0\n    for i := 0; i &lt; BigScaryNumber; i++ {\n        // Generate pointers.\n        n1, n2 := rand.Intn(20), rand.Intn(20)\n        ptr1, ptr2 := &amp;n1, &amp;n2\n\n        // Check if pointers are nil.\n        if ptr1 == nil || ptr2 == nil {\n            fmt.Printf(\"Pointers %v %v contain a nil.\\n\", ptr1, ptr2)\n            break\n        }\n\n        // Do work with pointer contents.\n        sum += *ptr1 + *ptr2\n    }\n}\n\nfunc main() {\n    DoWork()\n}\n</code></pre>\n\n<p>When I run this on my machine, I get the following:</p>\n\n<pre><code>$ go build alloc.go &amp;&amp; time ./alloc \n\nreal    0m5.466s\nuser    0m5.458s\nsys     0m0.015s\n</code></pre>\n\n<p>However, if I remove the print statement, I get the following:</p>\n\n<pre><code>$ go build alloc_no_print.go &amp;&amp; time ./alloc_no_print\n\nreal    0m4.070s\nuser    0m4.063s\nsys     0m0.008s\n</code></pre>\n\n<p>Since the print statement is never actually called, I investigated whether the print statement was somehow causing the pointers to be allocated on the heap instead of the stack. Running the compiler with the <code>-m</code> flag on the original program gives:</p>\n\n<pre><code>$ go build -gcflags=-m alloc.go\n# command-line-arguments\n./alloc.go:14: moved to heap: n1\n./alloc.go:15: &amp;n1 escapes to heap\n./alloc.go:14: moved to heap: n2\n./alloc.go:15: &amp;n2 escapes to heap\n./alloc.go:19: DoWork ... argument does not escape\n</code></pre>\n\n<p>while doing this on a print statement-less program gives</p>\n\n<pre><code>$ go build -gcflags=-m alloc_no_print.go\n# command-line-arguments\n./alloc_no_print.go:14: DoWork &amp;n1 does not escape\n./alloc_no_print.go:14: DoWork &amp;n2 does not escape\n</code></pre>\n\n<p>confirming that even an unused <code>fmt.Printf()</code> is causing heap allocations which have a very real effect on performance. I can get the same behavior by replacing <code>fmt.Printf()</code> with a variadic function which does nothing and takes <code>*int</code>s as parameters instead of <code>interface{}</code>s:</p>\n\n<pre><code>func VarArgsError(ptrs ...*int) {\n    panic(\"An error has occurred.\")\n}\n</code></pre>\n\n<p>I think this behavior is because Go allocates pointers on the heap whenever they are placed in a slice (although I'm not sure that this is the actual behavior of the escape analysis routines, I don't see how it would safely be able to do otherwise).</p>\n\n<p>There are two purposes to this question: first, I want to know if my analysis of the situation is correct, since I don't really understand how Go's escape analysis works. And second, I wanted suggestions for maintaining the behavior of the original program without causing unneeded allocations. My best guess is to wrap a <code>Copy()</code> function around the pointers prior to passing them into the print statement:</p>\n\n<pre><code>fmt.Printf(\"Pointers %v %v contain a nil.\", Copy(ptr1), Copy(ptr2))\n</code></pre>\n\n<p>where <code>Copy()</code> is defined as</p>\n\n<pre><code>func Copy(ptr *int) *int {\n    if ptr == nil {\n        return nil\n    } else {\n        n := *ptr\n        return &amp;n\n    }\n}\n</code></pre>\n\n<p>While this gives me the same performance as the no print statement case, it's weird and not the sort of thing I want to rewrite for every variable type and then wrap around <em>all</em> of my error logging code.</p>\n"}, {"tags": ["struct", "go", "leveldb"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4389258, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/db2b4999b0defd9d84f30e4a7b48c9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Gon", "link": "https://stackoverflow.com/users/4389258/gon"}, "edited": false, "score": 0, "creation_date": 1420495376, "post_id": 27788548, "comment_id": 43987353, "body": "Thank you. I guess gob package maybe the only option for now :)"}], "tags": [], "owner": {"reputation": 5698, "user_id": 916451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/2902394/picture?type=large", "display_name": "jjm", "link": "https://stackoverflow.com/users/916451/jjm"}, "is_accepted": true, "score": 0, "last_activity_date": 1420494845, "creation_date": 1420494845, "answer_id": 27788548, "question_id": 27788453, "link": "https://stackoverflow.com/questions/27788453/golang-leveldb-struct/27788548#27788548", "title": "Golang levelDB struct", "body": "<p><code>levelDB</code> only supports strings/byte arrays as keys and values.  This is actually a pretty smart feature, because it keeps serialization of complex data structures at the application level.  To serialize your <code>Thm</code> struct you can try the <a href=\"http://golang.org/pkg/encoding/gob/\" rel=\"nofollow\">gob package</a> if you don't need applications in other languages to be able to read the values, or protobufs, json, or msgpack if you need the serialized data to be accessible to other languages.  </p>\n"}], "owner": {"reputation": 71, "user_id": 4389258, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/db2b4999b0defd9d84f30e4a7b48c9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Gon", "link": "https://stackoverflow.com/users/4389258/gon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 27788548, "answer_count": 1, "score": 0, "last_activity_date": 1420494845, "creation_date": 1420494447, "question_id": 27788453, "link": "https://stackoverflow.com/questions/27788453/golang-leveldb-struct", "title": "Golang levelDB struct", "body": "<p>I'm trying to use following DB API: <a href=\"https://godoc.org/github.com/syndtr/goleveldb/leveldb#\" rel=\"nofollow\">https://godoc.org/github.com/syndtr/goleveldb/leveldb#</a>\n(simple file based key/value DB)</p>\n\n<p>I was able to put and get \"key\"s into the database.\nHowever, I'm wondering if value can be a struct such as:</p>\n\n<pre><code>type Thm struct {\n    Name string\n    Age  int\n}\n</code></pre>\n\n<p>Then, </p>\n\n<pre><code>var Tmp Thm\nTmp.Name = \"Gon\"\nTmp.Age = 33\n\ndb.Put([]byte(\"test3\"), []byte(Tmp), nil)\n</code></pre>\n\n<p>Right now, the error I'm getting is \"cannot covert Tmp (type Thm) to type []byte.</p>\n\n<p>If you have experiences with levelDB, could you help me how normally this will be done?\nOR, should I convert struct into byte in order to make this work?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["go", "namespaces", "thrift"], "answers": [{"tags": [], "owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "is_accepted": true, "score": 7, "last_activity_date": 1420493067, "creation_date": 1420493067, "answer_id": 27788153, "question_id": 27787009, "link": "https://stackoverflow.com/questions/27787009/proper-way-to-gen-multiple-thrift-files-for-go/27788153#27788153", "title": "Proper way to gen multiple Thrift files for Go", "body": "<blockquote>\n  <p>The problem is, the ttypes.go and (presumably) constants.go are getting overwritten by whatever is gen'd last in the for loop. </p>\n</blockquote>\n\n<p>Yes, that's true. </p>\n\n<blockquote>\n  <p>Is there a way around this? </p>\n</blockquote>\n\n<p>The most (cross-language) portable recommendation is to not do this. Instead:</p>\n\n<ul>\n<li>put different IDL files into different namespaces</li>\n<li>put everything belonging to one namespace into exactly one IDL file</li>\n</ul>\n\n<p>The Thrift compiler offers a few compiler switches for Go that may help you at least partially, (you get all available options for all languages by typing <code>thrift --help</code> on the command prompt)</p>\n\n<pre><code> go (Go):\n   package_prefix=  Package prefix for generated files.\n   thrift_import=   Override thrift package import path (default:git.apache.org/thrift.git/lib/go/thrift)\n   package=         Package name (default: inferred from thrift file name)\n</code></pre>\n\n<p>These options are used like in </p>\n\n<pre><code> thrift -gen go:package=mypack,package_prefix=myprefix\n</code></pre>\n\n<blockquote>\n  <p>It works for the other languages - seems like it's an oversight for Go. </p>\n</blockquote>\n\n<p>It might be your impression but I'd recommend not to try it, if you are interested in cross-language compatibility. The behaviour is the same with other languages. Just as an example: I recently fixed (or better: worked around) a problem <a href=\"https://issues.apache.org/jira/browse/THRIFT-2920\">with the Erlang tests</a>, where I had to fight exactly this very same issue.</p>\n"}, {"tags": [], "owner": {"reputation": 8880, "user_id": 2363866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ToSkw.png?s=128&g=1", "display_name": "creker", "link": "https://stackoverflow.com/users/2363866/creker"}, "is_accepted": false, "score": 0, "last_activity_date": 1456883830, "creation_date": 1456883830, "answer_id": 35737034, "question_id": 27787009, "link": "https://stackoverflow.com/questions/27787009/proper-way-to-gen-multiple-thrift-files-for-go/35737034#35737034", "title": "Proper way to gen multiple Thrift files for Go", "body": "<p>Had the same problem recently. Every IDL in different namespaces just doesn't work. Code looks bad, different namespaces everywhere that you have to remember, annoying to add/remove namespaces for every little thing.</p>\n\n<p>I only define a single namespace so I come with this. Basically, objects are in different files but they're written as they're in a single file. So no imports, no cross-file references, no namespaces in every file. I put namespaces in a separate file. Then my script joins everything into one big thirft file and compiles it. It does require you to put everything in the right order but it works for languages I need - Go, C# and Java worked fine.</p>\n\n<p>For me it too looks like an oversight. There is no reason for it to be like that just for Go. Maybe some day I will send a merge request with behaviour that better matches other languages.</p>\n"}], "owner": {"reputation": 3829, "user_id": 1146334, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/cL3do.png?s=128&g=1", "display_name": "FuriousGeorge", "link": "https://stackoverflow.com/users/1146334/furiousgeorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3347, "favorite_count": 2, "accepted_answer_id": 27788153, "answer_count": 2, "score": 2, "last_activity_date": 1456883830, "creation_date": 1420488314, "question_id": 27787009, "link": "https://stackoverflow.com/questions/27787009/proper-way-to-gen-multiple-thrift-files-for-go", "title": "Proper way to gen multiple Thrift files for Go", "body": "<p>So I have the following files</p>\n\n<pre><code>/src/baseService.thrift\n    /baseTypes.thrift\n    /baseSecurity.thrift\n</code></pre>\n\n<p>I want all of these thrift definitions to be created into one library. The top of each file is thus:</p>\n\n<pre><code>baseService.thrift\n==================\nnamespace java foo.bar\nnamespace cpp foo.bar\nnamespace js foo.bar\nnamespace go foo.bar\n\nimport \"baseTypes.thrift\"\n\nbaseTypes.thrift\n================\nnamespace java foo.bar\nnamespace cpp foo.bar\nnamespace js foo.bar\nnamespace go foo.bar\n\nbaseSecurity.thrift\n===================\nnamespace java foo.bar\nnamespace cpp foo.bar\nnamespace js foo.bar\nnamespace go foo.bar\n\nimport \"baseTypes.thrift\"\n</code></pre>\n\n<p>The problem is, how to I create all of these into one lib package?  It works fine for java/cpp/js but when I try to build for go it's a no go.</p>\n\n<p>With thrift, you can't do a <code>thrift gen:baz *.thrift</code>, you have to do the files one at a time.  For the other languages, we just do a:</p>\n\n<pre><code>for f in `find *.thrift`; do\n   thrift -o myGenDir --gen go $f\"\ndone\n</code></pre>\n\n<p>(substitute appropriate gen command for each lang)</p>\n\n<p>For Python this is fine because it puts every gen'd file in it's own dir based on the filename [ i.e. foo/bar/{filename}/ttypes.py].  For Java it dumps all of the files in foo/bar/ but every class name is unique.  For cpp, it dumps it all into the gen dir, but uniquely named per thrift file [so {filename.h}, {filename.cpp}].  For Go, however, it dumps everything into foo/bar like so:</p>\n\n<pre><code>/foo/bar/constants.go\n/foo/bar/service.go\n/foo/bar/service-remote/\n/foo/bar/baz/  [for anything that has a namespace of foo.bar.baz]\n/foo/bar/ttypes.go\n</code></pre>\n\n<p>The problem is, the ttypes.go and (presumably) constants.go are getting overwritten by whatever is gen'd last in the for loop.  Is there a way around this?  It works for the other languages - seems like it's an oversight for Go.  What am I missing.  We've got lots of Thrift files with lots of stuff in them - I'd rather not have to combine everything that's at the same package level into one thrift file.</p>\n"}, {"tags": ["node.js", "apache", "nginx", "go", "directory-structure"], "answers": [{"tags": [], "owner": {"reputation": 8296, "user_id": 216488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c510f6396aac23ff75e25f50cf3014d6?s=128&d=identicon&r=PG", "display_name": "Caleb", "link": "https://stackoverflow.com/users/216488/caleb"}, "is_accepted": true, "score": 0, "last_activity_date": 1431558941, "creation_date": 1431558941, "answer_id": 30226729, "question_id": 27785959, "link": "https://stackoverflow.com/questions/27785959/go-node-js-php-nginx-apache-web-root-directory-conventions-best-practi/30226729#30226729", "title": "Go / Node.js / PHP + NGINX / Apache web root directory conventions / best practices", "body": "<p>I put all applications in <code>/opt</code>. When you build your go program you will end up with a single binary. For example suppose you have a project:</p>\n\n<pre><code>gocode/src/github.com/someorg/foo\n</code></pre>\n\n<p>You would run:</p>\n\n<pre><code>go build -o /tmp/foo\n</code></pre>\n\n<p>And put that on the server:</p>\n\n<pre><code>/opt/foo/foo\n</code></pre>\n\n<p>For your static content just copy the files:</p>\n\n<pre><code>/opt/foo/public/images/logo.png\n/opt/foo/public/styles/site.css\n/opt/foo/public/scripts/site.js\n</code></pre>\n\n<p>So in this example you only have 4 files, you don't upload any <code>.go</code> files, and there's no need to match the folder structure you have locally.</p>\n\n<p>For nginx you just need to forward traffic to a port, so it doesn't need to know anything about where files are. Go is more than capable of serving the files out of your public and media directories.</p>\n\n<p>If you need a writeable folder (most web apps are read-only), then I'd recommend storing that data in <code>/tmp</code> or <code>/var</code> but not alongside your application.</p>\n"}], "owner": {"reputation": 1751, "user_id": 3973406, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b2d94768947ebd5fd0f38ee5b3f472c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dac0d3r", "link": "https://stackoverflow.com/users/3973406/dac0d3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 30226729, "answer_count": 1, "score": 1, "last_activity_date": 1431558941, "creation_date": 1420484063, "last_edit_date": 1420484825, "question_id": 27785959, "link": "https://stackoverflow.com/questions/27785959/go-node-js-php-nginx-apache-web-root-directory-conventions-best-practi", "title": "Go / Node.js / PHP + NGINX / Apache web root directory conventions / best practices", "body": "<p>I just finished setting up my CMS (programmed in Go) on my dedicated Linux (Ubuntu Server 14.04) server with NGINX as my primary webserver I wish to utilize to serve static content in addition to the Go (and Node.js) http webserver and instead of using their respective fileservers.</p>\n\n<p>Since this is my first experience with Linux, dedicated servers in general and deploying Go applications online, I'd be very interested in hearing your opinions about good conventions to where we store - ideally - all our different websites/webapplications.</p>\n\n<p>By default NGINX uses /usr/share/nginx/ to serve content from. I know it's the easiest thing in the world to change it to whatever we want, but I like to do things right from the beginning.</p>\n\n<p>Right now I store my CMS (Go application) in /home/[myuser]/gocode/src/[projectname]. This is where the go application resides, but it is also there I have the folders, \"public\" and \"media\" which I would ideally serve with NGINX.</p>\n\n<p>Since I'd like to be able to switch webservers and host Apache-, NGINX-, etc- applications inside the same overall root location, I now have second doubts about using /var/www or /var/www/html as my root directory. The reason being that apache uses this location by default, and I don't want to serve my application files - only my static files. Others seem to be using /home/user/public_html but that again, wouldn't work well for different webservers and programming languages/platforms.</p>\n\n<p>Do you have any good arguments as to where we would ideally gather/place all our PHP/Apache, Go/NGINX, Node.js, etc. applications?</p>\n\n<p>I tagged this with go and node.js, since go is my primary programming language of choice and most of my applications will be in that language. I do however also want to host my old PHP and Node.js applications - ideally in the same root directory - depending if you have any gold nuggets to share with me regarding how to organize such a multi-platform environment.</p>\n"}, {"tags": ["linux", "go"], "answers": [{"comments": [{"owner": {"reputation": 23028, "user_id": 107156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mSIVv.jpg?s=128&g=1", "display_name": "Kyle Brandt", "link": "https://stackoverflow.com/users/107156/kyle-brandt"}, "edited": false, "score": 0, "creation_date": 1420480090, "post_id": 27784945, "comment_id": 43979940, "body": "Here is the unix implementation of readdirnames: golang.org/src/os/dir_unix.go"}, {"owner": {"reputation": 23028, "user_id": 107156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mSIVv.jpg?s=128&g=1", "display_name": "Kyle Brandt", "link": "https://stackoverflow.com/users/107156/kyle-brandt"}, "edited": false, "score": 0, "creation_date": 1420480251, "post_id": 27784945, "comment_id": 43980023, "body": "Readdir also sorts, that might be a lot of the CPU. I did notice that <code>&#47;* Open file table structure *&#47; struct files_struct { \tint count; \tfd_set close_on_exec; \tfd_set open_fds; \tstruct file * fd[NR_OPEN]; }</code> is part of task_struct in linux. I wonder if I can get that count via syscall somehow..."}, {"owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "reply_to_user": {"reputation": 23028, "user_id": 107156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mSIVv.jpg?s=128&g=1", "display_name": "Kyle Brandt", "link": "https://stackoverflow.com/users/107156/kyle-brandt"}, "edited": false, "score": 0, "creation_date": 1420480572, "post_id": 27784945, "comment_id": 43980168, "body": "@KyleBrandt I wondered about that too. If it would be anywhere I would expect it to be in <code>stat</code>."}], "tags": [], "owner": {"reputation": 164108, "user_id": 714501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2090a0ffd27b055c8fa22a8e59476d0?s=128&d=identicon&r=PG", "display_name": "cnicutar", "link": "https://stackoverflow.com/users/714501/cnicutar"}, "is_accepted": false, "score": 3, "last_activity_date": 1420479954, "creation_date": 1420479954, "answer_id": 27784945, "question_id": 27784844, "link": "https://stackoverflow.com/questions/27784844/efficient-way-to-get-the-number-of-file-handles-open-by-a-process-in-go/27784945#27784945", "title": "Efficient Way to get the number of File Handles Open By a Process in Go?", "body": "<p>The trouble with <code>ioutil.Readdir</code> is that it does <code>file.Readdir</code> which says that it does an <code>lstat</code> for every file.</p>\n\n<p>It seems <a href=\"http://golang.org/pkg/os/#File.Readdirnames\" rel=\"nofollow\"><code>Readdirnames</code></a> doesn't do this, returning only the names. And since you only want the count, that should be enough.</p>\n"}], "owner": {"reputation": 23028, "user_id": 107156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mSIVv.jpg?s=128&g=1", "display_name": "Kyle Brandt", "link": "https://stackoverflow.com/users/107156/kyle-brandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1420479954, "creation_date": 1420479527, "question_id": 27784844, "link": "https://stackoverflow.com/questions/27784844/efficient-way-to-get-the-number-of-file-handles-open-by-a-process-in-go", "title": "Efficient Way to get the number of File Handles Open By a Process in Go?", "body": "<p>I have a monitoring agent called scollector that is using more cpu on our loadbalancer. Perf says the CPU is mostly due to <code>__d_lookup</code>. One of the things I monitor is the number of open file handles - I do this via the following code:</p>\n\n<pre><code>    fds, e := ioutil.ReadDir(\"/proc/\" + pid + \"/fd\")\n    if e != nil {\n        w.Remove(pid)\n        continue\n    }\n    ...\n    Add(md, \"linux.proc.num_fds\", len(fds), tags, metadata.Gauge, metadata.Files, descLinuxProcFd)\n</code></pre>\n\n<p>When I strace the process, I see it calling <code>lstat</code> on every file in the <code>/fd</code> directory (which is going to be a lot for our active load balancer (at least .5 million fds) - so I hypothesizing that this is the source of the high dentry cache cpu usage for the process. </p>\n\n<p>Anyone have a suggestion on a better way to do this?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 26843, "user_id": 208997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/250e219125d8bff1f03e6faea950f218?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/208997/simon"}, "edited": false, "score": 0, "creation_date": 1420478652, "post_id": 27784521, "comment_id": 43979199, "body": "Some relevant links: <a href=\"http://blog.golang.org/go-concurrency-patterns-timing-out-and\" rel=\"nofollow noreferrer\">blog.golang.org/go-concurrency-patterns-timing-out-and</a> and <a href=\"https://gobyexample.com/timeouts\" rel=\"nofollow noreferrer\">gobyexample.com/timeouts</a>"}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 2183994, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/36933fee585f010c8c62ad617c67ce10?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Hydra", "link": "https://stackoverflow.com/users/2183994/dark-hydra"}, "edited": false, "score": 0, "creation_date": 1420481867, "post_id": 27785380, "comment_id": 43980815, "body": "Thank you! Now I understand, what to do."}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 1, "last_activity_date": 1420481568, "creation_date": 1420481568, "answer_id": 27785380, "question_id": 27784521, "link": "https://stackoverflow.com/questions/27784521/http-client-idle-timeout/27785380#27785380", "title": "HTTP client, idle timeout", "body": "<p>You need to create your own <code>net.Dialer</code>, that returns a <code>net.Conn</code> which sets the appropriate read and write deadlines. </p>\n\n<p>The <code>Conn</code> would look something like this:</p>\n\n<pre><code>// Conn wraps a net.Conn, and sets a deadline for every read\n// and write operation.\ntype Conn struct {\n    net.Conn\n    ReadTimeout  time.Duration\n    WriteTimeout time.Duration\n}\n\nfunc (c *Conn) Read(b []byte) (int, error) {\n    err := c.Conn.SetReadDeadline(time.Now().Add(c.ReadTimeout))\n    if err != nil {\n        return 0, err\n    }\n    return c.Conn.Read(b)\n}\n\nfunc (c *Conn) Write(b []byte) (int, error) {\n    err := c.Conn.SetWriteDeadline(time.Now().Add(c.WriteTimeout))\n    if err != nil {\n        return 0, err\n    }\n    return c.Conn.Write(b)\n}\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 2183994, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/36933fee585f010c8c62ad617c67ce10?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Hydra", "link": "https://stackoverflow.com/users/2183994/dark-hydra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 818, "favorite_count": 0, "accepted_answer_id": 27785380, "answer_count": 1, "score": 0, "last_activity_date": 1420481568, "creation_date": 1420478091, "question_id": 27784521, "link": "https://stackoverflow.com/questions/27784521/http-client-idle-timeout", "title": "HTTP client, idle timeout", "body": "<p>How to make idle timeout in Go HTTP client?</p>\n\n<p>Idle timeout means timeout on calling Read/Write methods of Conn interface from HTTP client internals. It can be useful when client downloads file and in some moment downloading fails because read timeout reached.</p>\n"}, {"tags": ["json", "http", "go"], "comments": [{"owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "edited": false, "score": 0, "creation_date": 1420476557, "post_id": 27782918, "comment_id": 43978011, "body": "I would recommend putting the code you have currently duplicated in a middleware."}], "answers": [{"comments": [{"owner": {"reputation": 8981, "user_id": 71444, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2101d75ccd71c5dfb984991a7ba53b9b?s=128&d=identicon&r=PG", "display_name": "harm", "link": "https://stackoverflow.com/users/71444/harm"}, "edited": false, "score": 0, "creation_date": 1420528208, "post_id": 27784038, "comment_id": 43996787, "body": "So close yet so far way. Thanks for the final push! BTW the return interace{} is not even necessary."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "reply_to_user": {"reputation": 8981, "user_id": 71444, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2101d75ccd71c5dfb984991a7ba53b9b?s=128&d=identicon&r=PG", "display_name": "harm", "link": "https://stackoverflow.com/users/71444/harm"}, "edited": false, "score": 0, "creation_date": 1420552912, "post_id": 27784038, "comment_id": 44008934, "body": "Wrote it out too quickly I guess, didn&#39;t even use the return that I didn&#39;t need ;)"}], "tags": [], "owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "is_accepted": true, "score": 0, "last_activity_date": 1420552744, "last_edit_date": 1420552744, "creation_date": 1420476368, "answer_id": 27784038, "question_id": 27782918, "link": "https://stackoverflow.com/questions/27782918/abstract-get-read-unmarshal-logic-away/27784038#27784038", "title": "Abstract GET, read, unmarshal logic away", "body": "<p>Don't use the address of the <code>interface{}</code>, it already contains the pointer needed for unmarshaling.</p>\n\n<pre><code>func request(url string, target interface{}) (interface{}, error) {\n     // get response\n     err = json.Unmarshal(body, target)\n    ...\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/sDCFe39VVl\" rel=\"nofollow\">example</a></p>\n"}], "owner": {"reputation": 8981, "user_id": 71444, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2101d75ccd71c5dfb984991a7ba53b9b?s=128&d=identicon&r=PG", "display_name": "harm", "link": "https://stackoverflow.com/users/71444/harm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "accepted_answer_id": 27784038, "answer_count": 1, "score": 0, "last_activity_date": 1420552744, "creation_date": 1420472734, "question_id": 27782918, "link": "https://stackoverflow.com/questions/27782918/abstract-get-read-unmarshal-logic-away", "title": "Abstract GET, read, unmarshal logic away", "body": "<p>My application does a whole lot of API calls and I'm trying to get rid of some duplication surrounding that. Conceptually the following steps are repeated every single time:</p>\n\n<ol>\n<li>Do a GET request\n<ol>\n<li>Check for errors</li>\n</ol></li>\n<li>Read the body of the response\n<ol>\n<li>Check for errors</li>\n</ol></li>\n<li>Deserialize into target struct\n<ol>\n<li>Check for errors</li>\n</ol></li>\n<li>Return target struct</li>\n</ol>\n\n<p>The only significant difference between all the calls is the target struct.\nIn code it looks something like this:</p>\n\n<pre><code>func getUsers() ([]User, error) {\n    resp, err := http.Get(someUrl)\n    if err != nil {\n        return nil, err \n    }\n    if resp.StatusCode != 200 {\n        return nil, errors.New(\"Search return non 200 status code\")\n    }\n\n    defer resp.Body.Close()\n\n    body, err := ioutil.ReadAll(resp.Body)\n    if err != nil {\n        return nil, err \n    }\n\n    var users []User // This is the only real difference!\n    err = json.Unmarshal(body, &amp;users)\n    if err != nil {\n        return nil, err \n    }\n\n    return users, nil \n}\n</code></pre>\n\n<p>I would love to do something like <code>getUsers(url, users)</code> and <code>getProjects(url, projects)</code>.</p>\n\n<p>I've been trying with a function which takes a <code>interface{}</code> and cast it later to the correct type again but to no avail:</p>\n\n<pre><code>func request(url string, target interface{}) (interface{}, error) {\n     // do all the same logic as above. Except:\n     err = json.Unmarshal(body, &amp;target)\n     // ...\n     return target, nil\n}\n</code></pre>\n\n<p>And then do something like: </p>\n\n<pre><code> var users []User\n result, err := request(url, users)\n v, ok := result.([]User)\n</code></pre>\n\n<p>I have the feeling this should be possible...</p>\n"}, {"tags": ["regex", "go", "sublimetext3"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420471797, "post_id": 27781076, "comment_id": 43975112, "body": "just default to using backquotes (`) for regexes. That way you don&#39;t need to worry about escaping characters when you change things."}], "answers": [{"tags": [], "owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "is_accepted": true, "score": 2, "last_activity_date": 1420466527, "creation_date": 1420466527, "answer_id": 27781139, "question_id": 27781076, "link": "https://stackoverflow.com/questions/27781076/what-does-too-short-multibyte-code-string-in-regex-mean/27781139#27781139", "title": "what does `too short multibyte code string in regex` mean?", "body": "<p>It means that you forgot to escape the <code>\\</code> in <code>\\x</code>.<br>\nTherefore, it's trying to parse a Unicode character escape of the form <code>\\x1234</code>, and it didn't find enough numbers.</p>\n"}], "owner": {"reputation": 1251, "user_id": 1984350, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1398c50ad82b6853c0db90c423697841?s=128&d=identicon&r=PG", "display_name": "Adeeb", "link": "https://stackoverflow.com/users/1984350/adeeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 27781139, "answer_count": 1, "score": 1, "last_activity_date": 1420466527, "creation_date": 1420466335, "last_edit_date": 1495541569, "question_id": 27781076, "link": "https://stackoverflow.com/questions/27781076/what-does-too-short-multibyte-code-string-in-regex-mean", "title": "what does `too short multibyte code string in regex` mean?", "body": "<p>I am creating a sublime text highlighting file. However, I am stuck with an error I don't fully understand. I have the following regex:</p>\n\n<pre><code>\\x([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])\n</code></pre>\n\n<p>When I try to load the file in sublime text, I get the error:</p>\n\n<blockquote>\n  <p>Error in regex: too short multibyte code string in regex\n  \\x([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])</p>\n</blockquote>\n\n<p>I have tried Googling to understand what this error means, the only thing I have come across that is relavent are the following links:</p>\n\n<p><a href=\"https://github.com/rubinius/rubinius/issues/2194\" rel=\"nofollow noreferrer\">0. github issue of the rubinius project</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/21048981/ruby-regex-xf0-xf7-x80-xbf3-too-short-escaped-multibyte-character\">1. stackoverflow thread</a></p>\n\n<p><a href=\"http://www.reddit.com/r/ruby/comments/26llao/gsub_regex_throwing_too_short_escaped_multibyte/\" rel=\"nofollow noreferrer\">2. reddit thread</a></p>\n\n<p>Unfortunately, from those links i could only determine that that error likely caused by a character encoding [ from 1 &amp; 2]. I now suspect that \"\\x\" might be the problem as everything else in that regex is fine. How does one escape that character and all others like it, in particular, can a golang script be used to sanitize regexes to get rid of such problems?</p>\n"}, {"tags": ["bash", "go"], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1428817633, "post_id": 27781039, "comment_id": 47320673, "body": "Do <i>not</i> use <code>syscall.Exec</code> when <a href=\"https://golang.org/pkg/os/exec/\" rel=\"nofollow noreferrer\">the <code>os&#47;exec</code> package</a> will do. Do <i>not</i> use temporary files when there is no need."}], "tags": [], "owner": {"reputation": 382, "user_id": 1419028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WhkWm.jpg?s=128&g=1", "display_name": "krizz", "link": "https://stackoverflow.com/users/1419028/krizz"}, "is_accepted": false, "score": -1, "last_activity_date": 1420466202, "creation_date": 1420466202, "answer_id": 27781039, "question_id": 27780078, "link": "https://stackoverflow.com/questions/27780078/go-embed-bash-script-in-binary/27781039#27781039", "title": "Go: embed bash script in binary", "body": "<p>Did you try writing the stream-data (according to the reference go-bindata provides a function that returns []byte) into a temporary file?</p>\n\n<p>see: <a href=\"http://golang.org/pkg/io/ioutil/#TempFile\" rel=\"nofollow\">http://golang.org/pkg/io/ioutil/#TempFile</a></p>\n\n<p>you can then execute it with a syscall</p>\n\n<p><a href=\"http://golang.org/pkg/syscall/#Exec\" rel=\"nofollow\">http://golang.org/pkg/syscall/#Exec</a></p>\n\n<p>where the first argument needs to be a shell.</p>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 454499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb46488d2c90d51f366cafc776e2b3ad?s=128&d=identicon&r=PG", "display_name": "progrium", "link": "https://stackoverflow.com/users/454499/progrium"}, "is_accepted": true, "score": 3, "last_activity_date": 1420489270, "creation_date": 1420489270, "answer_id": 27787265, "question_id": 27780078, "link": "https://stackoverflow.com/questions/27780078/go-embed-bash-script-in-binary/27787265#27787265", "title": "Go: embed bash script in binary", "body": "<p>Yes, you can include any files in your binary with go-bindata:\n<a href=\"https://github.com/jteeuwen/go-bindata\" rel=\"nofollow\">https://github.com/jteeuwen/go-bindata</a></p>\n\n<p>I've also made a tool for making Go/Bash hybrid apps:\n<a href=\"https://github.com/progrium/go-basher\" rel=\"nofollow\">https://github.com/progrium/go-basher</a></p>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 3935563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c13653d8c738e8fb478d4142af59d0b?s=128&d=identicon&r=PG&f=1", "display_name": "lavalamp", "link": "https://stackoverflow.com/users/3935563/lavalamp"}, "is_accepted": false, "score": 1, "last_activity_date": 1420760449, "creation_date": 1420760449, "answer_id": 27851559, "question_id": 27780078, "link": "https://stackoverflow.com/questions/27780078/go-embed-bash-script-in-binary/27851559#27851559", "title": "Go: embed bash script in binary", "body": "<p>If you really have to do this, just construct a script and pass it as Stdin; here's an example out in the wild:</p>\n\n<p><a href=\"https://github.com/GoogleCloudPlatform/kubernetes/blob/63248f281f55698b520137d477631e87a3b02c4f/hack/e2e.go#L420\" rel=\"nofollow\">https://github.com/GoogleCloudPlatform/kubernetes/blob/63248f281f55698b520137d477631e87a3b02c4f/hack/e2e.go#L420</a></p>\n"}, {"tags": [], "owner": {"reputation": 1069, "user_id": 1287536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bdf040ab9024de588b911d0e6365612?s=128&d=identicon&r=PG", "display_name": "lee8oi", "link": "https://stackoverflow.com/users/1287536/lee8oi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421439205, "creation_date": 1421439205, "answer_id": 27992062, "question_id": 27780078, "link": "https://stackoverflow.com/questions/27780078/go-embed-bash-script-in-binary/27992062#27992062", "title": "Go: embed bash script in binary", "body": "<p>You can actually directly interface with the system shell in Go. Depending on what's in your bash script you can probably convert everything completely to go. For example things like handling files, extracting archives, outputting text, asking for user input, downloading files, and so much more can be done natively in Go. For anything you absolutely need the shell for you can always use <a href=\"http://golang.org/pkg/os/exec/\" rel=\"nofollow\">golang.org/pkg/os/exec</a>.</p>\n\n<p>I wrote a snippet that demonstrates a really simple Go based command shell. Basically it pipes input, output, and error between the user and the shell. It can be used interactively or to directly run most shell commands. I'm mentioning it here mostly to demonstrate Go's OS capabilities. Check it out: <a href=\"https://gist.github.com/lee8oi/a8a90f559fe48355f800\" rel=\"nofollow\">github.com/lee8oi/goshell.go</a></p>\n"}], "owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2816, "favorite_count": 0, "accepted_answer_id": 27787265, "answer_count": 4, "score": 4, "last_activity_date": 1421439205, "creation_date": 1420462791, "last_edit_date": 1495541334, "question_id": 27780078, "link": "https://stackoverflow.com/questions/27780078/go-embed-bash-script-in-binary", "title": "Go: embed bash script in binary", "body": "<p>I'm trying to cross compile a Go program that will execute a bash script. Is it possible to embed the bash script in the binary?</p>\n\n<p>I've referenced:\n<a href=\"https://stackoverflow.com/questions/21595295/golang-serve-static-files-from-memory\">Golang serve static files from memory</a></p>\n\n<p>Not sure if this applies to executing bash scripts though. Am I missing something here? Some clarification or pointers will be very helpful, thanks!</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "edited": false, "score": 8, "creation_date": 1420457251, "post_id": 27778280, "comment_id": 43967157, "body": "you can use the <code>-timeout</code> argument. see <a href=\"http://stackoverflow.com/questions/24929790/how-to-set-the-go-timeout-flag-on-go-test\" title=\"how to set the go timeout flag on go test\">stackoverflow.com/questions/24929790/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14471, "user_id": 735926, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6b5fa39f5bc4b397eb7e55766eecd8c4?s=128&d=identicon&r=PG", "display_name": "bfontaine", "link": "https://stackoverflow.com/users/735926/bfontaine"}, "is_accepted": true, "score": 30, "last_activity_date": 1592768957, "last_edit_date": 1592768957, "creation_date": 1436519392, "answer_id": 31336818, "question_id": 27778280, "link": "https://stackoverflow.com/questions/27778280/test-killed-with-quit-ran-too-long/31336818#31336818", "title": "Test killed with quit: ran too long", "body": "<p>Use <code>go test -timeout &lt;duration&gt;</code>, e.g.:</p>\n<pre><code>$ go test -timeout 20m\n</code></pre>\n<p>The default is 10m.</p>\n<p>From <a href=\"http://golang.org/pkg/time/#ParseDuration\" rel=\"noreferrer\">the docs</a>:</p>\n<blockquote>\n<p>Valid time units are &quot;ns&quot;, &quot;us&quot; (or &quot;\u00b5s&quot;), &quot;ms&quot;, &quot;s&quot;, &quot;m&quot;, &quot;h&quot;.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5513113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/317b1216883b6b7c816b3bbd568170c8?s=128&d=identicon&r=PG&f=1", "display_name": "MOHL-CLAUZADE Yannick", "link": "https://stackoverflow.com/users/5513113/mohl-clauzade-yannick"}, "is_accepted": false, "score": 2, "last_activity_date": 1524561282, "creation_date": 1524561282, "answer_id": 49997764, "question_id": 27778280, "link": "https://stackoverflow.com/questions/27778280/test-killed-with-quit-ran-too-long/49997764#49997764", "title": "Test killed with quit: ran too long", "body": "<p>By default, timeout exit after 10 minutes</p>\n\n<p><code>go test --help</code></p>\n\n<p><code>-timeout d\n        If a test binary runs longer than duration d, panic.\n        If d is 0, the timeout is disabled.\n        The default is 10 minutes (10m).\n</code></p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7519, "favorite_count": 4, "accepted_answer_id": 31336818, "answer_count": 2, "score": 18, "last_activity_date": 1592768957, "creation_date": 1420456191, "question_id": 27778280, "link": "https://stackoverflow.com/questions/27778280/test-killed-with-quit-ran-too-long", "title": "Test killed with quit: ran too long", "body": "<p>I run <code>go test</code> and got timout error:</p>\n\n<pre><code>*** Test killed with quit: ran too long (10m0s).\nFAIL    call/httptest   600.050s\n</code></pre>\n\n<p>How to extend timeout and make it bigger than 10 minutes?</p>\n"}, {"tags": ["json", "go"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 3481046, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76ca1ada418b4a060f96ac0f87a79cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Kumar", "link": "https://stackoverflow.com/users/3481046/abinash-kumar"}, "edited": false, "score": 0, "creation_date": 1420532454, "post_id": 27778376, "comment_id": 43998328, "body": "Thanks a lot.It really helped me. :)"}], "tags": [], "owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1420456543, "creation_date": 1420456543, "answer_id": 27778376, "question_id": 27777092, "link": "https://stackoverflow.com/questions/27777092/can-i-have-a-user-defined-value-as-a-data-type-in-json-in-golang/27778376#27778376", "title": "Can i have a user defined value as a data type in json in golang", "body": "<p>you can override the way Go's json package marshals a struct by writing a custom <code>MarshalJSON</code> function:</p>\n\n<pre><code>type xAxis struct {\n    Name  string\n    Value string\n}\n\nfunc (a xAxis) MarshalJSON() ([]byte, error) {\n    return json.Marshal(map[string]interface{}{a.Name: a.Value})\n}\n</code></pre>\n\n<p>to try it: <a href=\"http://play.golang.org/p/G_E4IpNYIz\" rel=\"nofollow\">http://play.golang.org/p/G_E4IpNYIz</a></p>\n"}, {"tags": [], "owner": {"reputation": 4122, "user_id": 1743957, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa0c08c9d80f0702b0eba6398a4ae26d?s=128&d=identicon&r=PG", "display_name": "Sebastien C.", "link": "https://stackoverflow.com/users/1743957/sebastien-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1420464873, "creation_date": 1420464873, "answer_id": 27780666, "question_id": 27777092, "link": "https://stackoverflow.com/questions/27777092/can-i-have-a-user-defined-value-as-a-data-type-in-json-in-golang/27780666#27780666", "title": "Can i have a user defined value as a data type in json in golang", "body": "<p>The <code>encoding/json</code> package allows you to use a map instead of a struct.</p>\n\n<p>That's probably not as performant as structures, but it works.</p>\n\n<pre><code>data := map[string]string {\n    \"Country\": \"abc\",\n    \"Foo\": \"bar\",\n}\n\n// Creating JSON from a map\nj, err := json.Marshal(data)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Println(string(j))\n// ==&gt; {\"Country\":\"abc\",\"Foo\":\"bar\"}\n\n// Creating map from JSON\nvar data2 map[string]string\nerr = json.Unmarshal(j, &amp;data2)\nif err != nil {\n    log.Fatal(err)\n}\nfmt.Println(data2)\n// ==&gt; map[Country:abc Foo:bar]\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 3481046, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/76ca1ada418b4a060f96ac0f87a79cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Kumar", "link": "https://stackoverflow.com/users/3481046/abinash-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 27778376, "answer_count": 2, "score": 1, "last_activity_date": 1420464873, "creation_date": 1420451941, "last_edit_date": 1420452709, "question_id": 27777092, "link": "https://stackoverflow.com/questions/27777092/can-i-have-a-user-defined-value-as-a-data-type-in-json-in-golang", "title": "Can i have a user defined value as a data type in json in golang", "body": "<p>I am creating a json response in golang.I have a question that i am able to generate a json such as :</p>\n\n<pre><code>{\n  \"Name\" : \"Country\",\n  \"Value\" : \"abc\"\n}\n</code></pre>\n\n<p>The value of name and value can change based on the user and the struct I am using is like:</p>\n\n<pre><code>type xAxis struct {\n  Name string,\n  Value string\n}\n</code></pre>\n\n<p>I want my json to look like this:</p>\n\n<pre><code>{\n   \"Country\" : \"abc\"\n}\n</code></pre>\n\n<p>Is it possible to create the json like this?</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1434, "user_id": 1738558, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/5maf4.jpg?s=128&g=1", "display_name": "Innovation", "link": "https://stackoverflow.com/users/1738558/innovation"}, "edited": false, "score": 0, "creation_date": 1420450389, "post_id": 27776525, "comment_id": 43963767, "body": "Please provide me your js library that you are using."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 2, "creation_date": 1420451054, "post_id": 27776525, "comment_id": 43964134, "body": "&amp;#39; is fine, just leave it."}, {"owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "reply_to_user": {"reputation": 1434, "user_id": 1738558, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/5maf4.jpg?s=128&g=1", "display_name": "Innovation", "link": "https://stackoverflow.com/users/1738558/innovation"}, "edited": false, "score": 1, "creation_date": 1420452954, "post_id": 27776525, "comment_id": 43965084, "body": "@Innovation no js, just golang"}, {"owner": {"reputation": 1434, "user_id": 1738558, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/5maf4.jpg?s=128&g=1", "display_name": "Innovation", "link": "https://stackoverflow.com/users/1738558/innovation"}, "edited": false, "score": 0, "creation_date": 1420453848, "post_id": 27776525, "comment_id": 43965529, "body": "Can you provide some jsfiddle."}, {"owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "reply_to_user": {"reputation": 1434, "user_id": 1738558, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/5maf4.jpg?s=128&g=1", "display_name": "Innovation", "link": "https://stackoverflow.com/users/1738558/innovation"}, "edited": false, "score": 0, "creation_date": 1420456443, "post_id": 27776525, "comment_id": 43966766, "body": "@Innovation sorry, it is impossible to run golang in jsfiddle"}, {"owner": {"reputation": 4679, "user_id": 749854, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541a5cb4925d352cac921c21e9213aa4?s=128&d=identicon&r=PG", "display_name": "nvcnvn", "link": "https://stackoverflow.com/users/749854/nvcnvn"}, "edited": false, "score": 0, "creation_date": 1420470934, "post_id": 27776525, "comment_id": 43974621, "body": "Can you tell us why you want (&#39;) rather than (&amp;#39;) ?"}, {"owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "reply_to_user": {"reputation": 4679, "user_id": 749854, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/541a5cb4925d352cac921c21e9213aa4?s=128&d=identicon&r=PG", "display_name": "nvcnvn", "link": "https://stackoverflow.com/users/749854/nvcnvn"}, "edited": false, "score": 0, "creation_date": 1420472242, "post_id": 27776525, "comment_id": 43975398, "body": "@nvcnvn <code>&amp;#39;</code> is good but <code>&#39;</code> is better for reading html source code. It is more humanistic."}, {"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 4, "creation_date": 1420476464, "post_id": 27776525, "comment_id": 43977963, "body": "The output from <code>html&#47;template</code> is for web browsers first, not humans.  The library is working as designed: its behavior may not be what you want, but it&#39;s doing what it says it&#39;ll do: generate HTML that&#39;s safe against code injection.  Note, in particular, that this is context sensitive: if you are doing the injection in a regular paragraph, it doesn&#39;t do the same escape (<a href=\"http://play.golang.org/p/wwJzpbtciv\" rel=\"nofollow noreferrer\">play.golang.org/p/wwJzpbtciv</a>), so there must be something contextually sensitive with <code>TITLE</code> that the library understands that you are not considering.  Specifically, it&#39;s using RCDATA escaping conventions."}, {"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 0, "creation_date": 1420476651, "post_id": 27776525, "comment_id": 43978072, "body": "Specifically, see: <a href=\"http://golang.org/src/html/template/context.go#L98\" rel=\"nofollow noreferrer\">golang.org/src/html/template/context.go#L98</a> where the library is deliberately watching for <code>TITLE</code> as a special text-escaping context.  You&#39;re asking for behavior ---human-readability---that isn&#39;t compatible with the safety concerns in the library."}, {"owner": {"reputation": 704, "user_id": 566659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcecdb372d2c5c8741b5d7a52eead983?s=128&d=identicon&r=PG", "display_name": "xiaq", "link": "https://stackoverflow.com/users/566659/xiaq"}, "reply_to_user": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 1, "creation_date": 1422655077, "post_id": 27776525, "comment_id": 44851276, "body": "To augment @dyoo&#39;s comment, the behavior is required by the spec: <a href=\"http://www.w3.org/html/wg/drafts/html/master/syntax.html#parsing-main-inhead\" rel=\"nofollow noreferrer\">w3.org/html/wg/drafts/html/master/&hellip;</a> (look for <code>title</code> after that). It amazes me how the HTML syntax is dreadfully complex..."}], "answers": [{"tags": [], "owner": {"reputation": 704, "user_id": 566659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcecdb372d2c5c8741b5d7a52eead983?s=128&d=identicon&r=PG", "display_name": "xiaq", "link": "https://stackoverflow.com/users/566659/xiaq"}, "is_accepted": true, "score": 1, "last_activity_date": 1422655270, "creation_date": 1422655270, "answer_id": 28245363, "question_id": 27776525, "link": "https://stackoverflow.com/questions/27776525/escaping-to-39-in-golang-html-template/28245363#28245363", "title": "escaping &#39; to &amp;#39; in golang html template", "body": "<p>@dyoo has explained clearly that <code>&lt;title&gt;</code> content is treated as RCDATA. The code that does the escaping is <a href=\"http://golang.org/src/html/template/html.go#L23\" rel=\"nofollow\">here</a>. The branch <code>if t == contentTypeHTML</code> is what happens with <code>template.HTML</code>.</p>\n\n<p>If you really need to control the output of the source, use <code>text/template</code> and do the escaping manually.</p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2656, "favorite_count": 1, "accepted_answer_id": 28245363, "answer_count": 1, "score": 3, "last_activity_date": 1422655270, "creation_date": 1420449876, "question_id": 27776525, "link": "https://stackoverflow.com/questions/27776525/escaping-to-39-in-golang-html-template", "title": "escaping &#39; to &amp;#39; in golang html template", "body": "<p>How to prevent escaping <code>'</code> to <code>&amp;#39;</code> in html template:</p>\n\n<pre><code>package main\n\nimport (\n    \"html/template\"\n    \"os\"\n)\n\nconst tmpl = `&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;{{.Title}}&lt;/title&gt;\n    &lt;/head&gt;\n&lt;/html&gt;`\n\nfunc main() {\n    t := template.Must(template.New(\"ex\").Parse(tmpl))\n    v := map[string]interface{}{\n        \"Title\": template.HTML(\"Hello World'\"),\n    }\n    t.Execute(os.Stdout, v)\n}\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Hello World&amp;#39;&lt;/title&gt;\n    &lt;/head&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Desired output: </p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Hello World'&lt;/title&gt;\n    &lt;/head&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><a href=\"http://play.golang.org/p/q_f3dUbzOQ\" rel=\"nofollow\">playouground</a></p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "edited": false, "score": 0, "creation_date": 1420473610, "post_id": 27778716, "comment_id": 43976222, "body": "Haha oops. Well that would do it!"}], "tags": [], "owner": {"reputation": 1855, "user_id": 1558705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1563795271fe55bf0beab2d12cd69b0?s=128&d=identicon&r=PG", "display_name": "Dean Elbaz", "link": "https://stackoverflow.com/users/1558705/dean-elbaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1420457702, "creation_date": 1420457702, "answer_id": 27778716, "question_id": 27776290, "link": "https://stackoverflow.com/questions/27776290/iterate-over-goquery-selection/27778716#27778716", "title": "Iterate over *goquery.Selection", "body": "<p>I think your first attempt could work if you used <code>append</code> properly.\n<code>append(x, s.Text())</code> does not change x, rather it returns a new slice.</p>\n\n<p>so you really need to do:</p>\n\n<pre><code>x = append(x, s.Text())\n</code></pre>\n"}], "owner": {"reputation": 2903, "user_id": 4257217, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/i1EYW.png?s=128&g=1", "display_name": "GreenRaccoon23", "link": "https://stackoverflow.com/users/4257217/greenraccoon23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1616, "favorite_count": 0, "accepted_answer_id": 27778716, "answer_count": 1, "score": 0, "last_activity_date": 1420457702, "creation_date": 1420448955, "last_edit_date": 1420451645, "question_id": 27776290, "link": "https://stackoverflow.com/questions/27776290/iterate-over-goquery-selection", "title": "Iterate over *goquery.Selection", "body": "<p>I just started learning Go a couple days ago, so bear with me please. :)  </p>\n\n<p>I'm fetching text from a web page with <code>goquery</code>. Like this:  </p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"github.com/PuerkitoBio/goquery\"\n)\n\nfunc ExampleScrape() {\n    doc, err := goquery.NewDocument(\"http://lifehacker.com\")\n    if err != nil {\n        log.Fatal(err)\n        fmt.Println(\"fail\")\n    } else {\n        fmt.Println(\"got it\")\n    }\n\n    h1_text := doc.Find(\"h1\").Text()\n    fmt.Println(h1_text)\n}\n\nfunc main() {\n    ExampleScrape()\n}\n</code></pre>\n\n<p>This works great. What I can't figure out is how to turn the <code>doc.Find(\"h1\").Text()</code> selection into an array or slice so that I can iterate over them (or, even better, figuring out if <code>goquery</code> has a function for this). I'm sure there's a way to do this, right?</p>\n\n<p>I tried doing this (inside <code>func ExampleScrape</code>):</p>\n\n<pre><code>var x []string\ndoc.Find(\"h1\").Each(func(i int, s *goquery.Selection) {\n    append(x, s.Text())\n})\n</code></pre>\n\n<p>but it didn't work because <code>append</code> in the 'nested'/closure function remains local to that function--it doesn't get returned back to <code>func ExampleScrape</code>. So then I tried this:</p>\n\n<pre><code>x := doc.Find(\"h1\").Each(func(i int, s *goquery.Selection) {\n    return s.Text()\n})\nfor _, i := range x {\n    fmt.Println(x)\n}\n</code></pre>\n\n<p>but <code>*goquery.Selection</code> types can't be ranged over.</p>\n\n<p>Is there a way to iterate over <code>*goquery.Selection</code>'s like this?</p>\n\n<p>You guys on here are awesome, by the way. I'm always blown away by the answers I get on here. If someone can explain how to do this, thanks a googolplex in advance. :)</p>\n"}, {"tags": ["variables", "go", "byte"], "answers": [{"comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "edited": false, "score": 0, "creation_date": 1420445961, "post_id": 27775624, "comment_id": 43961875, "body": "@armnotstrong I have edited the answer to explain <i>why</i> it works."}, {"owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "edited": false, "score": 0, "creation_date": 1420446258, "post_id": 27775624, "comment_id": 43961969, "body": "It&#39;s like a cast in C or java,  but instead of write as <code>(byte) &#39;A&#39;</code> it write as <code>byte(&#39;A&#39;)</code>, Am I understand that right?"}, {"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "edited": false, "score": 0, "creation_date": 1420448068, "post_id": 27775624, "comment_id": 43962723, "body": "Some people will get mad at you for comparing it to a cast, but yes, they&#39;re similar in function."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "edited": false, "score": 1, "creation_date": 1420452281, "post_id": 27775624, "comment_id": 43964733, "body": "@armnotstrong sort of: the spec never mentions &quot;casting&quot;, only &quot;conversion&quot;: see this comment (<a href=\"http://stackoverflow.com/questions/25593367/golang-can-i-cast-to-chan-interface#comment39977784_25593367\" title=\"golang can i cast to chan interface%23comment39977784_25593367\">stackoverflow.com/questions/25593367/&hellip;</a>): &quot;Go has <b>type conversions</b>, <b>type assertions</b> and <b>interfaces</b> (and <b>type switches</b>) and that&#39;s it. Type conversions come closest to cast in e.g. C.&quot;"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 10, "last_activity_date": 1420445777, "creation_date": 1420445777, "answer_id": 27775624, "question_id": 27775590, "link": "https://stackoverflow.com/questions/27775590/how-to-define-a-single-byte-variable-in-go-lang/27775624#27775624", "title": "How to define a single byte variable in go lang", "body": "<p>In your example, this would work, using the <a href=\"https://golang.org/ref/spec#Conversions\" rel=\"noreferrer\">conversion syntax <code>T(x)</code></a>:</p>\n\n<pre><code>c := byte('A')\n</code></pre>\n\n<blockquote>\n  <p>Conversions are expressions of the form <code>T(x)</code> where <code>T</code> is a type and <code>x</code> is an expression that can be converted to type <code>T</code>. </p>\n</blockquote>\n\n<p>See <a href=\"http://play.golang.org/p/c3xT_Ufuan\" rel=\"noreferrer\">this playground example</a>.</p>\n\n<pre><code>cb := byte('A')\nfmt.Println(unhex(cb))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1420463348, "creation_date": 1420463348, "answer_id": 27780240, "question_id": 27775590, "link": "https://stackoverflow.com/questions/27775590/how-to-define-a-single-byte-variable-in-go-lang/27780240#27780240", "title": "How to define a single byte variable in go lang", "body": "<p>If you don't want to use the <code>:=</code> syntax, you can still use a <code>var</code> statement, which lets you explicitly specify the type.  e.g:</p>\n\n<pre><code>var c byte = 'A'\n</code></pre>\n"}], "owner": {"reputation": 6945, "user_id": 2288944, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/7qryD.jpg?s=128&g=1", "display_name": "armnotstrong", "link": "https://stackoverflow.com/users/2288944/armnotstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18659, "favorite_count": 1, "accepted_answer_id": 27775624, "answer_count": 2, "score": 6, "last_activity_date": 1420463348, "creation_date": 1420445596, "question_id": 27775590, "link": "https://stackoverflow.com/questions/27775590/how-to-define-a-single-byte-variable-in-go-lang", "title": "How to define a single byte variable in go lang", "body": "<p>I am a newbie to golang and want to find a way to define a <strong>single</strong> <code>byte</code> variable.</p>\n\n<p>It's a demo program in <em>Effective Go</em> reference.</p>\n\n<pre><code>package main\n\nimport (\n   \"fmt\"\n)\n\nfunc unhex(c byte) byte{\n    switch {\n    case '0' &lt;= c &amp;&amp; c &lt;= '9':\n        return c - '0'\n    case 'a' &lt;= c &amp;&amp; c &lt;= 'f':\n        return c - 'a' + 10\n    case 'A' &lt;= c &amp;&amp; c &lt;= 'F':\n        return c - 'A' + 10\n    }\n    return 0\n}\n\nfunc main(){\n    // It works fine here, as I wrap things with array.\n    c := []byte{'A'}\n    fmt.Println(unhex(c[0]))\n\n    //c := byte{'A'}    **Error** invalid type for composite literal: byte\n    //fmt.Println(unhex(c))\n}\n</code></pre>\n\n<p>As you see I can wrap a byte with array, things goes fine, but How can I define a single byte without using array? thanks.</p>\n"}, {"tags": ["function", "pointers", "go"], "comments": [{"owner": {"reputation": 131, "user_id": 482137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eef3757d49ddfb94a9ecfeb51917600?s=128&d=identicon&r=PG", "display_name": "pbitty", "link": "https://stackoverflow.com/users/482137/pbitty"}, "edited": false, "score": 3, "creation_date": 1488995226, "post_id": 27775376, "comment_id": 72481067, "body": "I ran similar benchmarks with a single string field and also with two fields: string and int fields.  I got faster results from the value receiver.      BenchmarkChangePointerReceiver-4   \t10000000000\t         0.99 ns/op     BenchmarkChangeItValueReceiver-4   \t10000000000\t         0.33 ns/op  This is using Go 1.8.  I wonder if there were compiler optimizations made since you last ran the benchmarks.  See <a href=\"https://gist.github.com/pbitty/aaf143ce98907eb1687bc0eff28a436b\" rel=\"nofollow noreferrer\">gist</a> for more details."}, {"owner": {"reputation": 1956, "user_id": 3210551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3bvhv.jpg?s=128&g=1", "display_name": "Chrisport", "link": "https://stackoverflow.com/users/3210551/chrisport"}, "reply_to_user": {"reputation": 131, "user_id": 482137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eef3757d49ddfb94a9ecfeb51917600?s=128&d=identicon&r=PG", "display_name": "pbitty", "link": "https://stackoverflow.com/users/482137/pbitty"}, "edited": false, "score": 2, "creation_date": 1511775207, "post_id": 27775376, "comment_id": 81971005, "body": "You&#39;re right. Running my original benchmark using Go1.9, I get different results now as well. Pointer Receiver 0.60 ns/op, Value receiver 0.38 ns/op"}], "answers": [{"comments": [{"owner": {"reputation": 792, "user_id": 1727807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67752c1ba4ef7cb9b843fc9be38fef0d?s=128&d=identicon&r=PG", "display_name": "Hart Simha", "link": "https://stackoverflow.com/users/1727807/hart-simha"}, "edited": false, "score": 27, "creation_date": 1493939853, "post_id": 27775558, "comment_id": 74628987, "body": "<code>The rule about pointers vs. values for receivers is that value methods can be invoked on pointers and values, but pointer methods can only be invoked on pointers</code>      Not true, actually. Both value receiver and pointer receiver methods can be invoked on a correctly-typed pointer or non-pointer. Regardless of what the method is called on, within the method body the identifier of the receiver refers to a by-copy value when a value receiver is used, and a pointer when a pointer receiver is used: See <a href=\"https://play.golang.org/p/3WHGaAbURM\" rel=\"nofollow noreferrer\">play.golang.org/p/3WHGaAbURM</a>"}, {"owner": {"reputation": 91, "user_id": 926880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717fcf2e810bba9f6cc27d1cdfe1f4aa?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/926880/tera"}, "edited": false, "score": 3, "creation_date": 1512885088, "post_id": 27775558, "comment_id": 82432926, "body": "There is a great explanation <a href=\"https://github.com/golang/go/wiki/MethodSets#variables\" rel=\"nofollow noreferrer\">here</a>  &quot;If x is addressable and &amp;x&#39;s method set contains m, x.m() is shorthand for (&amp;x).m(). &quot;"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 91, "user_id": 926880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717fcf2e810bba9f6cc27d1cdfe1f4aa?s=128&d=identicon&r=PG", "display_name": "tera", "link": "https://stackoverflow.com/users/926880/tera"}, "edited": false, "score": 0, "creation_date": 1512887190, "post_id": 27775558, "comment_id": 82433310, "body": "@tera Yes: that is discussed at <a href=\"https://stackoverflow.com/q/43953187/6309\">stackoverflow.com/q/43953187/6309</a>"}, {"owner": {"reputation": 5658, "user_id": 1162217, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7E5sp.jpg?s=128&g=1", "display_name": "Lukas Lukac", "link": "https://stackoverflow.com/users/1162217/lukas-lukac"}, "edited": false, "score": 6, "creation_date": 1534888430, "post_id": 27775558, "comment_id": 90864958, "body": "Great answer but I strongly dissagree with this point: &quot;as it will make the intention more clear&quot;, NOPE, a clean API, X as argument and Y as a return value is a clear intention. Passing a Struct by pointer and spending time on carefully reading the code to check what all attributes get modified is far from clear, maintainable."}, {"owner": {"reputation": 56, "user_id": 9187963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K7l54lCsn9k/AAAAAAAAAAI/AAAAAAAAPTU/BaNysZGsBwg/photo.jpg?sz=128", "display_name": "Gaurav Agarwal", "link": "https://stackoverflow.com/users/9187963/gaurav-agarwal"}, "reply_to_user": {"reputation": 792, "user_id": 1727807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67752c1ba4ef7cb9b843fc9be38fef0d?s=128&d=identicon&r=PG", "display_name": "Hart Simha", "link": "https://stackoverflow.com/users/1727807/hart-simha"}, "edited": false, "score": 0, "creation_date": 1586934469, "post_id": 27775558, "comment_id": 108307613, "body": "@HartSimha I think the post above is pointing to fact that pointer receiver methods are not in &quot;method set&quot; for value types. In your linked playground, adding following line will result in compilation error: <code>Int(5).increment_by_one_ptr()</code>. Similarly, a trait that defines the method <code>increment_by_one_ptr</code> will not be satisfied with a value of type <code>Int</code>."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 140, "last_activity_date": 1420445401, "creation_date": 1420445401, "answer_id": 27775558, "question_id": 27775376, "link": "https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver/27775558#27775558", "title": "Value receiver vs. pointer receiver", "body": "<p>Note that <a href=\"http://golang.org/doc/faq#methods_on_values_or_pointers\">the FAQ does mention consistency</a></p>\n\n<blockquote>\n  <p>Next is consistency. If some of the methods of the type must have pointer receivers, the rest should too, so the method set is consistent regardless of how the type is used. See the <a href=\"http://golang.org/doc/faq#different_method_sets\">section on method set</a>s for details. </p>\n</blockquote>\n\n<p>As mentioned <a href=\"http://grokbase.com/t/gg/golang-nuts/1478q5p81c/go-nuts-making-a-copy-of-a-pointer-receiver\">in this thread</a>:</p>\n\n<blockquote>\n  <p>The rule about pointers vs. values for receivers is that value methods can\n  be invoked on pointers and values, but pointer methods can only be invoked\n  on pointers</p>\n</blockquote>\n\n<p>Now:</p>\n\n<blockquote>\n  <p>Can someone tell me a case where a value receiver clearly makes more sense then a pointer receiver?</p>\n</blockquote>\n\n<p>The <a href=\"https://github.com/golang/go/wiki/CodeReviewComments#receiver-type\">Code Review comment</a> can help:</p>\n\n<blockquote>\n  <ul>\n  <li>If the receiver is a map, func or chan, don't use a pointer to it.</li>\n  <li>If the receiver is a slice and the method doesn't reslice or reallocate the slice, don't use a pointer to it.</li>\n  <li>If the method needs to mutate the receiver, the receiver must be a pointer.</li>\n  <li>If the receiver is a struct that contains a <code>sync.Mutex</code> or similar synchronizing field, the receiver must be a pointer to avoid copying.</li>\n  <li>If the receiver is a large struct or array, a pointer receiver is more efficient. How large is large? Assume it's equivalent to passing all its elements as arguments to the method. If that feels too large, it's also too large for the receiver.</li>\n  <li>Can function or methods, either concurrently or when called from this method, be mutating the receiver? A value type creates a copy of the receiver when the method is invoked, so outside updates will not be applied to this receiver. If changes must be visible in the original receiver, the receiver must be a pointer.</li>\n  <li>If the receiver is a struct, array or slice and any of its elements is a pointer to something that might be mutating, prefer a pointer receiver, as it will make the intention more clear to the reader.</li>\n  <li><strong>If the receiver is a small array or struct that is naturally a value type</strong> (for instance, something like the <code>time.Time</code> type), with no mutable fields and no pointers, or is just a simple basic type such as int or string, <strong>a value receiver makes sense</strong>.<br>\n  <strong>A value receiver can reduce the amount of garbage that can be generated; if a value is passed to a value method, an on-stack copy can be used instead of allocating on the heap.</strong> (The compiler tries to be smart about avoiding this allocation, but it can't always succeed.) Don't choose a value receiver type for this reason without profiling first.</li>\n  <li>Finally, when in doubt, use a pointer receiver.</li>\n  </ul>\n</blockquote>\n\n<p>The part in bold is found for instance in <a href=\"https://github.com/golang/go/blob/a1053ed6107a8301a62be9d1f2da8fa387bfefea/src/net/http/server.go#L713-L718\"><code>net/http/server.go#Write()</code></a>:</p>\n\n<pre><code>// Write writes the headers described in h to w.\n//\n// This method has a value receiver, despite the somewhat large size\n// of h, because it prevents an allocation. The escape analysis isn't\n// smart enough to realize this function doesn't mutate h.\nfunc (h extraHeader) Write(w *bufio.Writer) {\n...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 529, "user_id": 2646870, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5379f3b69e0f5f71537bd93cb018a4f1?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/2646870/rich"}, "edited": false, "score": 0, "creation_date": 1587744968, "post_id": 51956853, "comment_id": 108639332, "body": "I like 99% of what you say here and strongly agree with it. That said I&#39;m wondering if your example is the best way to illustrate your point. Isn&#39;t TokenCache essentially a map (from @VonC - &quot;if the receiver is a map, func or chan, don&#39;t use a pointer to it&quot;). Since maps are reference types what do you gain by making &quot;Add()&quot; a pointer receiver? Any copies of TokenCache will reference the same map. See this Go playground - <a href=\"https://play.golang.com/p/Xda1rsGwvhq\" rel=\"nofollow noreferrer\">play.golang.com/p/Xda1rsGwvhq</a>"}, {"owner": {"reputation": 5658, "user_id": 1162217, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7E5sp.jpg?s=128&g=1", "display_name": "Lukas Lukac", "link": "https://stackoverflow.com/users/1162217/lukas-lukac"}, "reply_to_user": {"reputation": 529, "user_id": 2646870, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5379f3b69e0f5f71537bd93cb018a4f1?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/2646870/rich"}, "edited": false, "score": 0, "creation_date": 1588431499, "post_id": 51956853, "comment_id": 108895245, "body": "Glad we are aligned. Great point. Actually, I think I have used pointer in this example because I copied it from a project where the TokenCache is handling more stuff than just that map. And If I use a pointer in one method, I use it in all of them. Do you suggest removing the pointer from this particular SO example?"}, {"owner": {"reputation": 529, "user_id": 2646870, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5379f3b69e0f5f71537bd93cb018a4f1?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/2646870/rich"}, "edited": false, "score": 0, "creation_date": 1588519162, "post_id": 51956853, "comment_id": 108922386, "body": "LOL, copy/paste strikes again! \ud83d\ude09 IMO you can leave it as is since it illustrates a trap that\u2019s easy to fall into, or you could replace the map with something(s) that demonstrate state and/or a large data structure."}, {"owner": {"reputation": 5658, "user_id": 1162217, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7E5sp.jpg?s=128&g=1", "display_name": "Lukas Lukac", "link": "https://stackoverflow.com/users/1162217/lukas-lukac"}, "reply_to_user": {"reputation": 529, "user_id": 2646870, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5379f3b69e0f5f71537bd93cb018a4f1?s=128&d=identicon&r=PG", "display_name": "Rich", "link": "https://stackoverflow.com/users/2646870/rich"}, "edited": false, "score": 0, "creation_date": 1588532714, "post_id": 51956853, "comment_id": 108928450, "body": "Well, I am sure they will read the comments... PS: Rich, your arguments seem reasonable, add me on LinkedIn (link in my profile) happy to connect."}, {"owner": {"reputation": 1018, "user_id": 6308879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a26f398bb65ee4334917e1e77b0132?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Opalinski", "link": "https://stackoverflow.com/users/6308879/artur-opalinski"}, "edited": false, "score": 0, "creation_date": 1603037949, "post_id": 51956853, "comment_id": 113903132, "body": "@Lukas: A very side note: The Slovak &#39;walking through ROSE (not pink!) garden&#39; has a quite similar counterpart in English: &#39;bed of roses&#39;. So &#39;Unit testing is s bed of roses&#39; :-)"}], "tags": [], "owner": {"reputation": 5658, "user_id": 1162217, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7E5sp.jpg?s=128&g=1", "display_name": "Lukas Lukac", "link": "https://stackoverflow.com/users/1162217/lukas-lukac"}, "is_accepted": false, "score": 25, "last_activity_date": 1536741960, "last_edit_date": 1536741960, "creation_date": 1534886391, "answer_id": 51956853, "question_id": 27775376, "link": "https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver/51956853#51956853", "title": "Value receiver vs. pointer receiver", "body": "<p>To add additionally to @VonC great, informative answer. </p>\n\n<p>I am surprised no one really mentioned the maintainance cost once the project gets larger, old devs leave and new one comes. Go surely is a young language.</p>\n\n<p>Generally speaking, I try to avoid pointers when I can but they do have their place and beauty.</p>\n\n<p><strong>I use pointers when:</strong></p>\n\n<ul>\n<li>working with large datasets</li>\n<li>have a struct maintaining state, e.g. TokenCache, </li>\n<li><ul>\n<li>I make sure ALL fields are PRIVATE, interaction is possible only via defined method receivers</li>\n</ul></li>\n<li><ul>\n<li>I don't pass this function to any goroutine </li>\n</ul></li>\n</ul>\n\n<p>E.g:</p>\n\n<pre><code>type TokenCache struct {\n    cache map[string]map[string]bool\n}\n\nfunc (c *TokenCache) Add(contract string, token string, authorized bool) {\n    tokens := c.cache[contract]\n    if tokens == nil {\n        tokens = make(map[string]bool)\n    }\n\n    tokens[token] = authorized\n    c.cache[contract] = tokens\n}\n</code></pre>\n\n<p><strong>Reasons why I avoid pointers:</strong></p>\n\n<ul>\n<li>pointers are not concurrently safe (the whole point of GoLang)</li>\n<li>once pointer receiver, always pointer receiver (for all Struct's methods for consistency)</li>\n<li>mutexes are surely more expensive, slower and harder to maintain comparing to the \"value copy cost\"</li>\n<li>speaking of \"value copy cost\", is that really an issue? Premature optimization is root to all evil, you can always add pointers later</li>\n<li>it directly, conciously forces me to design small Structs </li>\n<li>pointers can be mostly avoided by designing pure functions with clear intention and obvious I/O</li>\n<li>garbage collection is harder with pointers I believe</li>\n<li>easier to argue about encapsulation, responsibilities</li>\n<li>keep it simple, stupid (yes, pointers can be tricky because you never know the next project's dev)</li>\n<li>unit testing is like walking through pink garden (slovak only expression?), means  easy</li>\n<li><strong>no NIL if conditions</strong> (NIL can be passed where a pointer was expected)</li>\n</ul>\n\n<p>My rule of thumb, write as many encapsulated methods as possible such as:</p>\n\n<pre><code>package rsa\n\n// EncryptPKCS1v15 encrypts the given message with RSA and the padding scheme from PKCS#1 v1.5.\nfunc EncryptPKCS1v15(rand io.Reader, pub *PublicKey, msg []byte) ([]byte, error) {\n    return []byte(\"secret text\"), nil\n}\n\ncipherText, err := rsa.EncryptPKCS1v15(rand, pub, keyBlock) \n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>This question inspired me to research the topic more and write a blog post about it <a href=\"https://medium.com/gophersland/gopher-vs-object-oriented-golang-4fa62b88c701\" rel=\"noreferrer\">https://medium.com/gophersland/gopher-vs-object-oriented-golang-4fa62b88c701</a></p>\n"}, {"tags": [], "owner": {"reputation": 7205, "user_id": 66634, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Em4x8.jpg?s=128&g=1", "display_name": "Erik Engheim", "link": "https://stackoverflow.com/users/66634/erik-engheim"}, "is_accepted": false, "score": 0, "last_activity_date": 1614390769, "creation_date": 1614390769, "answer_id": 66394881, "question_id": 27775376, "link": "https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver/66394881#66394881", "title": "Value receiver vs. pointer receiver", "body": "<p>It is a question of semantics. Imagine you write a function taking two numbers as arguments. You don't want to suddenly find out that either of these numbers got mutated by the calling function. If you pass them as pointers that is possible. Lots of things should act just like numbers. Things like points, 2D vectors, dates, rectangles, circles etc. These things don't have identity. Two circle at the same position and with the same radius should not be distinguished from each other. They are value types.</p>\n<p>But something like a database connection or a file handle, a button in the GUI is something where identity matters. In these cases you want a pointer to the object.</p>\n<p>When something is inherently a value type such as a rectangle or point, it is really preferable to be able to pass them without using pointers. Why? Because it means you are certain to avoid mutating the object. It clarifies semantics and intent to reader of your code. It is clear that the function receiving the object cannot and will not mutate the object.</p>\n"}], "owner": {"reputation": 1956, "user_id": 3210551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3bvhv.jpg?s=128&g=1", "display_name": "Chrisport", "link": "https://stackoverflow.com/users/3210551/chrisport"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30589, "favorite_count": 80, "accepted_answer_id": 27775558, "answer_count": 3, "score": 138, "last_activity_date": 1616768159, "creation_date": 1420444451, "last_edit_date": 1616768159, "question_id": 27775376, "link": "https://stackoverflow.com/questions/27775376/value-receiver-vs-pointer-receiver", "title": "Value receiver vs. pointer receiver", "body": "<p>It is very unclear for me in which case I would want to use a value receiver instead of always using a pointer receiver.</p>\n<p>To recap from the docs:</p>\n<pre><code>type T struct {\n    a int\n}\nfunc (tv  T) Mv(a int) int         { return 0 }  // value receiver\nfunc (tp *T) Mp(f float32) float32 { return 1 }  // pointer receiver\n</code></pre>\n<p>The <strong>docs</strong> also say &quot;For types such as basic types, slices, and small structs, a value receiver is very cheap so unless the semantics of the method requires a pointer, a value receiver is efficient and clear.&quot;</p>\n<p><strong>First point</strong> they docs say a value receiver is &quot;very cheap&quot;, but the question is whether it is cheaper than a pointer receiver. So I made a small benchmark <a href=\"https://gist.github.com/chrisport/f28674850ffc3d9238f8\" rel=\"nofollow noreferrer\">(code on gist)</a> which showed me, that pointer receiver is faster even for a struct that has only one string field. These are the results:</p>\n<pre><code>// Struct one empty string property\nBenchmarkChangePointerReceiver  2000000000               0.36 ns/op\nBenchmarkChangeItValueReceiver  500000000                3.62 ns/op\n\n\n// Struct one zero int property\nBenchmarkChangePointerReceiver  2000000000               0.36 ns/op\nBenchmarkChangeItValueReceiver  2000000000               0.36 ns/op\n</code></pre>\n<p><em>(Edit: Please note that second point became invalid in newer go versions, see comments.)</em></p>\n<p><strong>Second point</strong> the docs say that a value receiver it is &quot;efficient and clear&quot; which is more a matter of taste, isn't it? Personally I prefer consistency by using the same thing everywhere. Efficiency in what sense? Performance wise it seems pointer are almost always more efficient. Few test-runs with one int property showed minimal advantage of Value receiver (range of 0.01-0.1 ns/op)</p>\n<p>Can someone tell me a case where a value receiver clearly makes more sense than a pointer receiver? Or am I doing something wrong in the benchmark? Did I overlook other factors?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "is_accepted": false, "score": 2, "last_activity_date": 1420446436, "creation_date": 1420446436, "answer_id": 27775761, "question_id": 27775337, "link": "https://stackoverflow.com/questions/27775337/read-n-integers-float-string-from-standard-input/27775761#27775761", "title": "Read n integers / float / string from standard input", "body": "<p>This code pushes everything into the loop header, as well as puts <code>input</code> into the most local scope possible. You should be checking the error returned by Scanf too:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var num []int\n    var count int\n    var err error\n\n   for _, err = fmt.Scanf(\"%d\\n\", &amp;count); err == nil &amp;&amp; count &gt; 0; count-- {\n       var input int\n       _, err = fmt.Scanf(\"%d\\n\", &amp;input)\n       num = append(num, input)\n   }\n\n   if err != nil {\n       panic(err)\n   }\n\n}\n</code></pre>\n\n<p>There are about a million ways to write equivalent code, this seemed the best to me. An argument could be made for putting the error check in the loop before the <code>append</code>, but since encountering an error presumably invalidates the list, I thought it looked prettier this way.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10266532, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9a596d386788eef1c0c12a9e33b5ba08?s=128&d=identicon&r=PG", "display_name": "Aswin", "link": "https://stackoverflow.com/users/10266532/aswin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535052560, "creation_date": 1535052560, "answer_id": 51993029, "question_id": 27775337, "link": "https://stackoverflow.com/questions/27775337/read-n-integers-float-string-from-standard-input/51993029#51993029", "title": "Read n integers / float / string from standard input", "body": "<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"os\"\n    \"fmt\"\n)\n\nfunc main() {\n\n    reader := bufio.NewReader(os.Stdin)\n\n    a:= read(reader,100000)\n\n    fmt.Println(a)\n}\n\nfunc read (reader *bufio.Reader, n int)([]uint32) {\n\n    a := make([]uint32, n)\n    for i:=0; i&lt;n; i++ {\n        fmt.Fscan(reader, &amp;a[i])\n    }\n\n    return a\n}\n</code></pre>\n"}], "owner": {"reputation": 10232, "user_id": 2104976, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1a5168ce005df0148523b929ea9983c0?s=128&d=identicon&r=PG", "display_name": "callmekatootie", "link": "https://stackoverflow.com/users/2104976/callmekatootie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1335, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535052560, "creation_date": 1420444287, "question_id": 27775337, "link": "https://stackoverflow.com/questions/27775337/read-n-integers-float-string-from-standard-input", "title": "Read n integers / float / string from standard input", "body": "<p>Algorithm competition have questions that provide the input in multiple lines, with the first line specifying the count of the inputs. Example - </p>\n\n<pre><code>3\n78\n42\n99\n</code></pre>\n\n<p>The first line tells that there will be 3 integers followed by the three integers.</p>\n\n<p>Currently, I have the following code to read them - </p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var num []int\n    var input int\n    var count int\n\n    fmt.Scanf(\"%d\", &amp;count)\n\n    for {\n       if (count == 0) {\n           break\n       }\n\n       fmt.Scanf(\"%d\", &amp;input)\n       num = append(num, input)\n\n       count--\n    }\n}\n</code></pre>\n\n<p>Is there a better way to carry this out? The above approach feels clumsy for some reason.</p>\n"}, {"tags": ["selenium", "go"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2848639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d78011a86316d62645b0edd7aa7c70?s=128&d=identicon&r=PG&f=1", "display_name": "that_derek", "link": "https://stackoverflow.com/users/2848639/that-derek"}, "is_accepted": false, "score": 2, "last_activity_date": 1430121337, "creation_date": 1430121337, "answer_id": 29890135, "question_id": 27772832, "link": "https://stackoverflow.com/questions/27772832/port-not-available-exiting-for-golang-selenium-webdriver/29890135#29890135", "title": "Port not available. Exiting... for golang selenium webdriver", "body": "<p>It looks as though the fedesog/webdriver is trying to open up a listener on port 9515 and that is failing:</p>\n\n<p><a href=\"https://github.com/fedesog/webdriver/blob/master/chromedriver.go\" rel=\"nofollow\">https://github.com/fedesog/webdriver/blob/master/chromedriver.go</a></p>\n\n<p>You could try switching ports or seeing what if anything might be blocking that port on your machine.</p>\n"}, {"tags": [], "owner": {"reputation": 7907, "user_id": 1592008, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e208220f7cb95e6854adb653663736a?s=128&d=identicon&r=PG", "display_name": "Oleg Neumyvakin", "link": "https://stackoverflow.com/users/1592008/oleg-neumyvakin"}, "is_accepted": false, "score": 0, "last_activity_date": 1444406205, "creation_date": 1444406205, "answer_id": 33042561, "question_id": 27772832, "link": "https://stackoverflow.com/questions/27772832/port-not-available-exiting-for-golang-selenium-webdriver/33042561#33042561", "title": "Port not available. Exiting... for golang selenium webdriver", "body": "<p>Try to check chromedriver log or run it from console. </p>\n\n<p>It maybe some package dependencies like dbus.</p>\n"}], "owner": {"reputation": 11529, "user_id": 1024794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8237daabaa73dc7fc573fc224d0f1b54?s=128&d=identicon&r=PG", "display_name": "Maxim Yefremov", "link": "https://stackoverflow.com/users/1024794/maxim-yefremov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2594, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1444406205, "creation_date": 1420426656, "question_id": 27772832, "link": "https://stackoverflow.com/questions/27772832/port-not-available-exiting-for-golang-selenium-webdriver", "title": "Port not available. Exiting... for golang selenium webdriver", "body": "<p>I use <a href=\"https://github.com/fedesog/webdriver\" rel=\"nofollow\">selenium golang webdriver</a> example. </p>\n\n<pre><code>package main\n\nimport (\n    \"github.com/fedesog/webdriver\"\n    \"log\"\n    \"time\"\n)\n\nfunc main() {\n    chromeDriver := webdriver.NewChromeDriver(\"/path/To/Chrome/Driver/chromedriver\")\n    err := chromeDriver.Start()\n    if err != nil {\n        log.Println(err)\n    }\n    desired := webdriver.Capabilities{\"Platform\": \"Linux\"}\n    required := webdriver.Capabilities{}\n    session, err := chromeDriver.NewSession(desired, required)\n    if err != nil {\n        log.Println(err)\n    }\n    err = session.Url(\"http://golang.org\")\n    if err != nil {\n        log.Println(err)\n    }\n    time.Sleep(10 * time.Second)\n    session.Delete()\n    chromeDriver.Stop()\n}\n</code></pre>\n\n<p>It works but logs error:</p>\n\n<pre><code>Port not available. Exiting..\n</code></pre>\n\n<p>Full output is :</p>\n\n<pre><code>Starting ChromeDriver (v2.9.248307) on port 9515\nPort not available. Exiting...\n</code></pre>\n"}, {"tags": ["linux", "ubuntu", "go", "cgo"], "comments": [{"owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "edited": false, "score": 1, "creation_date": 1420426988, "post_id": 27772831, "comment_id": 43956628, "body": "It might be a silly question, but is the C compiler still installed?"}, {"owner": {"reputation": 1387, "user_id": 2301484, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/05301156f430e42f5e4022f46ebc2220?s=128&d=identicon&r=PG", "display_name": "Grayda", "link": "https://stackoverflow.com/users/2301484/grayda"}, "reply_to_user": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "edited": false, "score": 0, "creation_date": 1420428379, "post_id": 27772831, "comment_id": 43956841, "body": "@JamesHenstridge I think you might be on to something here. The 64 bit version was installed, but I may have needed the 32 bit, even though I&#39;m not building 32 bit binaries. Installing the 32 bit C compiler using instructions from <a href=\"https://github.com/golang/go/wiki/InstallFromSource#Install_C_tools\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/InstallFromSource#Install_C_tools</a> seems to have fixed it. Will answer after getting a sample app to build"}], "answers": [{"tags": [], "owner": {"reputation": 1387, "user_id": 2301484, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/05301156f430e42f5e4022f46ebc2220?s=128&d=identicon&r=PG", "display_name": "Grayda", "link": "https://stackoverflow.com/users/2301484/grayda"}, "is_accepted": true, "score": 2, "last_activity_date": 1420429175, "creation_date": 1420429175, "answer_id": 27773097, "question_id": 27772831, "link": "https://stackoverflow.com/questions/27772831/golang-c-source-files-not-allowed-when-not-using-cgo/27773097#27773097", "title": "Golang - C source files not allowed when not using cgo", "body": "<p>So James was on the right track. I had gcc installed, but not the 32 bit version. Following advice from <a href=\"https://github.com/golang/go/wiki/InstallFromSource#Install_C_tools\" rel=\"nofollow\">https://github.com/golang/go/wiki/InstallFromSource#Install_C_tools</a> on how to install the 32 bit version fixed the issue.</p>\n"}, {"tags": [], "owner": {"reputation": 99684, "user_id": 149482, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cb6a2b464b7190c48e4f148a0e51d13a?s=128&d=identicon&r=PG", "display_name": "Matt Joiner", "link": "https://stackoverflow.com/users/149482/matt-joiner"}, "is_accepted": false, "score": 4, "last_activity_date": 1432122705, "creation_date": 1432122705, "answer_id": 30348877, "question_id": 27772831, "link": "https://stackoverflow.com/questions/27772831/golang-c-source-files-not-allowed-when-not-using-cgo/30348877#30348877", "title": "Golang - C source files not allowed when not using cgo", "body": "<p>I fixed this by unsetting <code>GOROOT</code> in the environment. It was pointing to another Go installation.</p>\n"}, {"tags": [], "owner": {"reputation": 511, "user_id": 373719, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d1522fd426dafd8e3d085e97f63220db?s=128&d=identicon&r=PG", "display_name": "crlane", "link": "https://stackoverflow.com/users/373719/crlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1440854382, "creation_date": 1440854382, "answer_id": 32286500, "question_id": 27772831, "link": "https://stackoverflow.com/questions/27772831/golang-c-source-files-not-allowed-when-not-using-cgo/32286500#32286500", "title": "Golang - C source files not allowed when not using cgo", "body": "<p>I had a similar problem after upgrading to go 1.5. Removing the <code>/usr/local/go</code> directory and reinstalling from the tarball fixed the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1936760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kYhW1.jpg?s=128&g=1", "display_name": "main", "link": "https://stackoverflow.com/users/1936760/main"}, "is_accepted": false, "score": 0, "last_activity_date": 1445419315, "creation_date": 1445419315, "answer_id": 33255448, "question_id": 27772831, "link": "https://stackoverflow.com/questions/27772831/golang-c-source-files-not-allowed-when-not-using-cgo/33255448#33255448", "title": "Golang - C source files not allowed when not using cgo", "body": "<p>if you install Go 1.4 and then install Go 1.5. But don't change GOROOT environment variables.\nChange GOROOT point to GO 1.5 path.</p>\n"}], "owner": {"reputation": 1387, "user_id": 2301484, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/05301156f430e42f5e4022f46ebc2220?s=128&d=identicon&r=PG", "display_name": "Grayda", "link": "https://stackoverflow.com/users/2301484/grayda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7030, "favorite_count": 0, "accepted_answer_id": 27773097, "answer_count": 4, "score": 4, "last_activity_date": 1445419315, "creation_date": 1420426650, "question_id": 27772831, "link": "https://stackoverflow.com/questions/27772831/golang-c-source-files-not-allowed-when-not-using-cgo", "title": "Golang - C source files not allowed when not using cgo", "body": "<p>When trying to run <code>go build</code> in my src directory, I get this error:</p>\n\n<blockquote>\n  <p>imports runtime: C source files not allowed when not using cgo: atomic_amd64x.c defs.c float.c heapdump.c lfstack.c malloc.c mcache.c mcentral.c mem_linux.c mfixalloc.c mgc0.c mheap.c msize.c os_linux.c panic.c parfor.c proc.c runtime.c signal.c signal_amd64x.c signal_unix.c stack.c string.c sys_x86.c vdso_linux_amd64.c</p>\n</blockquote>\n\n<p>When I first started learning Go I ran <code>sudo apt-get install golang</code> on my Ubuntu laptop (14.04 LTS, 64bit) which installed version 1.2. That ran fine and I was able to build, install and run apps. I then ran autoremove to get rid of it, then installed 1,4 from the golang website.</p>\n\n<p>What's going on here, and how can I fix it? Googling the error shows that it has something to do with a previously installed version of go, but I thought autoremove would clean it and any dependencies up (which it seemed to, as I made sure I couldn't find golang anywhere, before installing from source.</p>\n\n<p>Any clues?</p>\n"}, {"tags": ["go", "daemon"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1420419673, "post_id": 27772097, "comment_id": 43955201, "body": "<code>init.d</code> is just daemon manager, it does not daemonise. All daemons on Debian should play nice with <code>init.d</code>. As to why it seems to be hard, see <a href=\"https://github.com/golang/go/issues/227\" rel=\"nofollow noreferrer\">this open issue</a>."}, {"owner": {"reputation": 87059, "user_id": 5728991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4kTj8.png?s=128&g=1", "display_name": "Cerise Lim&#243;n", "link": "https://stackoverflow.com/users/5728991/cerise-lim%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1420421271, "post_id": 27772097, "comment_id": 43955503, "body": "It is not safe to fork a Go program."}], "answers": [{"tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": false, "score": 1, "last_activity_date": 1420466438, "last_edit_date": 1420466438, "creation_date": 1420466005, "answer_id": 27780988, "question_id": 27772097, "link": "https://stackoverflow.com/questions/27772097/can-i-daemonize-a-golang-process-without-external-tools/27780988#27780988", "title": "Can I daemonize a golang process without external tools?", "body": "<p>Messing directly with fork() from a Go program is perilous. A typical deamonize implementation based on an equivalent C program is not safe.</p>\n\n<p>You may be interested by the approach used by the following package:\n<a href=\"https://github.com/VividCortex/godaemon\" rel=\"nofollow\">https://github.com/VividCortex/godaemon</a></p>\n"}], "owner": {"reputation": 4811, "user_id": 2874789, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/VKbXD.jpg?s=128&g=1", "display_name": "Christopher Shroba", "link": "https://stackoverflow.com/users/2874789/christopher-shroba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1420466438, "creation_date": 1420419387, "question_id": 27772097, "link": "https://stackoverflow.com/questions/27772097/can-i-daemonize-a-golang-process-without-external-tools", "title": "Can I daemonize a golang process without external tools?", "body": "<p>I've seen many different suggestions for how to daemonize an application written in Go, including using upstart or init.d.  Why not just do it yourself though?  It seems like the steps are simple enough:</p>\n\n<ul>\n<li>Fork and exit parent</li>\n<li>Change file mode mask</li>\n<li>Create a unique session id</li>\n<li>Change current working directory</li>\n<li>Close file descriptors</li>\n</ul>\n\n<p>(<a href=\"http://www.linuxprofilm.com/articles/linux-daemon-howto.html#s3\" rel=\"nofollow\">source</a>)</p>\n\n<p>So why not just do this in your program, rather than depending on third party software to do a simple task for you?</p>\n"}, {"tags": ["eclipse", "go"], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 0, "last_activity_date": 1420441927, "creation_date": 1420441927, "answer_id": 27774913, "question_id": 27771402, "link": "https://stackoverflow.com/questions/27771402/error-running-go-program/27774913#27774913", "title": "Error running Go program", "body": "<p>The setup process should be driven by <a href=\"https://github.com/philproctor/SimpleComputerRemote/blob/master/Host/install/windows/innosetup-x64.iss\" rel=\"nofollow\"><code>Host/install/windows/innosetup-x64.iss</code></a> for <a href=\"http://www.jrsoftware.org/ishelp/index.php\" rel=\"nofollow\">InnoSetup</a>:<br>\nYou need to check if the setup properly installed the exe, and why it looks for <code>C:/Users!/...</code> instead of <code>C:/Users/...</code></p>\n"}, {"tags": [], "owner": {"reputation": 2238, "user_id": 2238745, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FmkGUMS2Hf4/AAAAAAAAAAI/AAAAAAAAA78/FLcnwhMAkvw/photo.jpg?sz=128", "display_name": "Jin Thakur", "link": "https://stackoverflow.com/users/2238745/jin-thakur"}, "is_accepted": true, "score": 1, "last_activity_date": 1422194513, "creation_date": 1422194513, "answer_id": 28137236, "question_id": 27771402, "link": "https://stackoverflow.com/questions/27771402/error-running-go-program/28137236#28137236", "title": "Error running Go program", "body": "<p>Its a build issue. Check your bin folder \nWhether program has access to the folder\nCheck preferences  and missing references for the golang project.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 2615880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbd2dc38e9240d863a76dea7fbf2c988?s=128&d=identicon&r=PG", "display_name": "Nesh", "link": "https://stackoverflow.com/users/2615880/nesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500025772, "creation_date": 1500025772, "answer_id": 45099870, "question_id": 27771402, "link": "https://stackoverflow.com/questions/27771402/error-running-go-program/45099870#45099870", "title": "Error running Go program", "body": "<p>I managed to find the issue, It is no configuration issue or anything. You have to do 3 things as follows, </p>\n\n<p>1) Make sure GOPATH value is different from GOROOT.\n2) Make sure GOBIN value is empty.\n3) Your package name on the go file in eclipse should be main and not the package name \"hello\". This should be the case for at least the file that has main function. To do this, File->New go file->Source file type should be -> Command source file-> Empty main function. Then type your code after which you can build to see the the .exe file in GOPATH/bin and the program run.</p>\n\n<p>Worked for me.</p>\n"}], "owner": {"reputation": 75, "user_id": 4306323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/woN3s.jpg?s=128&g=1", "display_name": "Esselami", "link": "https://stackoverflow.com/users/4306323/esselami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1717, "favorite_count": 1, "accepted_answer_id": 28137236, "answer_count": 3, "score": 3, "last_activity_date": 1500025772, "creation_date": 1420413164, "last_edit_date": 1459896024, "question_id": 27771402, "link": "https://stackoverflow.com/questions/27771402/error-running-go-program", "title": "Error running Go program", "body": "<p>i'm trying to run a Go program and it always gives me this error i tried googling it but nothing can't see what's the problem! <a href=\"http://i.stack.imgur.com/lb5vn.png\" rel=\"nofollow\">ScreenShot</a></p>\n\n<pre><code>Executable file (C:/Users!/ABDELLATIF-PC/Desktop/SimpleComputerRemote/Host/bin/server.exe) doesn't exist\n</code></pre>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1420411035, "post_id": 27770737, "comment_id": 43953286, "body": "Is this specifically for your use in a project that works with Go code or are you after a plugin for the editor you are using? <code>GoSublime</code> does this for Sublime - and I use<code>vim-go</code> for Vim which utilises the <code>gocode</code> package for auto completion. Both options are available there (plugins for editors, or <code>gocode</code> to create your own autocomplete)."}, {"owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "reply_to_user": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 0, "creation_date": 1420411319, "post_id": 27770737, "comment_id": 43953366, "body": "For my usage of go with my app. not for Sublime/vim (i want to make smth similar to SublimeGo not seeing its code, it&#39;s big)"}, {"owner": {"reputation": 57021, "user_id": 1517578, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/gd070.png?s=128&g=1", "display_name": "Simon Whitehead", "link": "https://stackoverflow.com/users/1517578/simon-whitehead"}, "edited": false, "score": 1, "creation_date": 1420416652, "post_id": 27770737, "comment_id": 43954566, "body": "You should look at the <a href=\"https://github.com/nsf/gocode\" rel=\"nofollow noreferrer\">gocode</a> package then."}], "answers": [{"tags": [], "owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "is_accepted": true, "score": 0, "last_activity_date": 1420423451, "creation_date": 1420423451, "answer_id": 27772505, "question_id": 27770737, "link": "https://stackoverflow.com/questions/27770737/go-how-to-get-autocomplete-for-any-go-file/27772505#27772505", "title": "Go: how to get autocomplete for any go file", "body": "<p>Tks to comment. Answer is gocode <a href=\"https://github.com/nsf/gocode\" rel=\"nofollow\">https://github.com/nsf/gocode</a> (it has document inside zip).</p>\n"}], "owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 27772505, "answer_count": 1, "score": 0, "last_activity_date": 1420423451, "creation_date": 1420408231, "question_id": 27770737, "link": "https://stackoverflow.com/questions/27770737/go-how-to-get-autocomplete-for-any-go-file", "title": "Go: how to get autocomplete for any go file", "body": "<p>Seems go has autocomplete data gettable via some go program. any example how to? e.g. i have file <code>test.go</code> and line:column 10:12. this pos (10:12) is after some func name, e.g. \"getn\" - can I get list of all funcs which begin with \"getn\".</p>\n\n<p>ie, get autocomplete data.</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1672, "user_id": 2464397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8l2kG.png?s=128&g=1", "display_name": "ThinkChaos", "link": "https://stackoverflow.com/users/2464397/thinkchaos"}, "edited": false, "score": 2, "creation_date": 1420397269, "post_id": 27768974, "comment_id": 43948859, "body": "SE is not an alternative to Google. <a href=\"https://groups.google.com/d/msg/golang-nuts/Bf5jbJwYXoA/RJxohbcDpbUJ\" rel=\"nofollow noreferrer\">link</a>, <a href=\"https://code.google.com/p/go/source/browse/?repo=tools#hg%2Fcmd%2Fgotype\" rel=\"nofollow noreferrer\">link2</a>"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1430145510, "post_id": 27768974, "comment_id": 47920192, "body": "Note: Go 1.5 or 1.6 should introduce &quot;<code>go doc</code>&quot;. I have updated my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1420397446, "post_id": 27769030, "comment_id": 43948924, "body": "Also in the GitHub Go repo: <a href=\"https://github.com/golang/tools/tree/master/cmd/gotype\" rel=\"nofollow noreferrer\">github.com/golang/tools/tree/master/cmd/gotype</a>"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 3, "last_activity_date": 1430145483, "last_edit_date": 1430145483, "creation_date": 1420397063, "answer_id": 27769030, "question_id": 27768974, "link": "https://stackoverflow.com/questions/27768974/gotype-command-not-installed-with-go/27769030#27769030", "title": "gotype command not installed with Go?", "body": "<p>Update April 2015: Go 1.5 should introduce \"<code>go doc</code>\": see</p>\n\n<ul>\n<li><a href=\"https://go-review.googlesource.com/#/c/9227/3\" rel=\"nofollow\">review 9227</a>: <code>cmd/go</code>,<code>cmd/doc</code>: add \"<code>go doc</code>\"</li>\n<li><a href=\"https://go-review.googlesource.com/#/c/9226/\" rel=\"nofollow\">review 9226</a>: rename <code>doc.go</code> to <code>alldocs.go</code> in preparation for \"<code>go doc</code>\"</li>\n</ul>\n\n<blockquote>\n  <p>Add the new <code>go doc</code> command to the go command, installed in the tool directory.</p>\n  \n  <p>usage: </p>\n</blockquote>\n\n<pre><code>go doc [-u] [package|[package.]symbol[.method]]\n</code></pre>\n\n<hr>\n\n<p>Original answer (January 2015)</p>\n\n<p>You would need:</p>\n\n<pre><code>go get -u golang.org/x/tools/cmd/gotype\n</code></pre>\n\n<p>That would install that extra tools from <a href=\"https://godoc.org/golang.org/x/tools/cmd/gotype\" rel=\"nofollow\"><code>golang.org/x/tools/cmd/gotype</code></a>:</p>\n\n<blockquote>\n  <p>The <code>gotype</code> command does syntactic and semantic analysis of Go files and packages like the front-end of a Go compiler.<br>\n  Errors are reported if the analysis fails; otherwise <code>gotype</code> is quiet (unless <code>-v</code> is set). </p>\n</blockquote>\n\n<hr>\n\n<p>Note: this isn't the only extra tool you might consider installing, as illustrated in <a href=\"http://www.goinggo.net/2013_10_01_archive.html\" rel=\"nofollow\">this article</a>:</p>\n\n<pre><code>go get -u golang.org/x/tools/cmd/godoc\ngo get -u golang.org/x/tools/cmd/vet\ngo get -u golang.org/x/tools/cmd/goimports\ngo get -u golang.org/x/tools/cmd/gorename\ngo get -u golang.org/x/tools/cmd/oracle\ngo get -u golang.org/x/tools/cmd/gotype\ngo get -u github.com/golang/lint/golint\n</code></pre>\n\n<hr>\n\n<p>Note: Go 1.5 will make that operation even faster.<br>\nSee <a href=\"https://github.com/golang/go/commit/dc2d64bf81b3342d35bdbfa42b971087ade6dfc6\" rel=\"nofollow\">commit dc2d64b</a> by <a href=\"https://github.com/bradfitz\" rel=\"nofollow\">Brad Fitzpatrick (<code>bradfitz</code>)</a>:</p>\n\n<blockquote>\n  <h2><code>cmd/go</code>: cache results of HTTP requests done during meta tag discovery</h2>\n  \n  <p>Previously, running</p>\n</blockquote>\n\n<pre><code>$ go get -u -v golang.org/x/tools/cmd/godoc\n</code></pre>\n\n<blockquote>\n  <p>would results in dozens of HTTP requests for:</p>\n</blockquote>\n\n<pre><code>https://golang.org/x/tools?go-get=1\n</code></pre>\n\n<blockquote>\n  <p>once per package under <code>x/tools</code>.</p>\n  \n  <p><strong>Now it caches the results</strong>.<br>\n  We still end up doing one HTTP request for all the packages under <code>x/tools</code>, but this reduces the total number of HTTP requests in ~half.</p>\n</blockquote>\n"}], "owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1664, "favorite_count": 1, "accepted_answer_id": 27769030, "answer_count": 1, "score": 0, "last_activity_date": 1430145483, "creation_date": 1420396769, "question_id": 27768974, "link": "https://stackoverflow.com/questions/27768974/gotype-command-not-installed-with-go", "title": "gotype command not installed with Go?", "body": "<p>i got Go 1.4 / Win32 from offsite. I see foder \"c:\\go\\bin\". No <code>gotype</code> command in it. I need <code>gotype</code> -- where is gotype, how to install it?</p>\n"}, {"tags": ["http", "go", "middleware", "gorilla"], "comments": [{"owner": {"reputation": 969, "user_id": 3512573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050a10f5be0185d552b941c12a6b33e3?s=128&d=identicon&r=PG&f=1", "display_name": "jayme", "link": "https://stackoverflow.com/users/3512573/jayme"}, "edited": false, "score": 0, "creation_date": 1494831535, "post_id": 27768655, "comment_id": 74976166, "body": "You should put &quot;working&quot; (in terms of &quot;running through the compiler&quot;) code as example."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 4565260, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9L063tHigqc/AAAAAAAAAAI/AAAAAAAAABA/Gj2U9nqyE-8/photo.jpg?sz=128", "display_name": "Iacob Vlad-George", "link": "https://stackoverflow.com/users/4565260/iacob-vlad-george"}, "is_accepted": false, "score": 0, "last_activity_date": 1423957159, "last_edit_date": 1423957159, "creation_date": 1423865804, "answer_id": 28509687, "question_id": 27768655, "link": "https://stackoverflow.com/questions/27768655/get-gorilla-mux-router-current-route-name-from-middleware/28509687#28509687", "title": "Get gorilla/mux router current route name from middleware", "body": "<p>I had the same problem and I resolved in that way:</p>\n\n<pre><code>var match mux.RouteMatch\nrouteExists := s.Router.Match(r, &amp;match)\nif routeExists &amp;&amp; match.Route.GetName(){\n    routeName := match.Route.GetName()\n}\n</code></pre>\n\n<p>And when I defined the route I added <code>.Name(\"route/:param\")</code> where <code>route/:param</code> is my route.</p>\n"}, {"tags": [], "owner": {"reputation": 969, "user_id": 3512573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050a10f5be0185d552b941c12a6b33e3?s=128&d=identicon&r=PG&f=1", "display_name": "jayme", "link": "https://stackoverflow.com/users/3512573/jayme"}, "is_accepted": false, "score": 1, "last_activity_date": 1494831417, "creation_date": 1494831417, "answer_id": 43973200, "question_id": 27768655, "link": "https://stackoverflow.com/questions/27768655/get-gorilla-mux-router-current-route-name-from-middleware/43973200#43973200", "title": "Get gorilla/mux router current route name from middleware", "body": "<p>From <a href=\"https://godoc.org/github.com/gorilla/mux#CurrentRoute\" rel=\"nofollow noreferrer\">CurrentRoute godoc</a>:</p>\n\n<blockquote>\n  <p>CurrentRoute returns the matched route for the current request, if any. This only works when called inside the handler of the matched route because the matched route is stored in the request context[...]</p>\n</blockquote>\n\n<p>In your example, your chain of <code>mwAuthenticate, mwAuthorize</code> is attached to the route \"/\" without using gorilla mux. That means when the request passes your handlers, it has not passed gorilla mux router.</p>\n\n<p>Try the following (your example stripped down):</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/http\"\n\n    \"github.com/gorilla/mux\"\n)\n\nvar (\n    err          error\n    r            *mux.Router\n    devRouter    *mux.Router\n)\n\nfunc devDbSeed(w http.ResponseWriter, r *http.Request) {\n    fmt.Fprintln(w, \"devDbSeed\")\n    return\n}\n\nfunc main() {\n    r = mux.NewRouter()\n    devRouter = r.PathPrefix(\"/api/v1/dev\").Subrouter()\n\n    // mwAuthorize and mwAuthenticate basically work the same\n    mw := []func(http.Handler) http.Handler{mwAuthenticate, mwAuthorize}\n\n    // development endpoints\n    devRouter.Handle(\"/db/seed\", use(http.HandlerFunc(devDbSeed), mw...)).Name(\"foo\")\n\n    // Send all requests into the mux router\n    err = http.ListenAndServe(\":9000\", r)\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n\nfunc use(h http.Handler, mw ...func(http.Handler) http.Handler) http.Handler {\n    // exec order: mw[0],mw[1],mw[N]...\n    for i := len(mw) - 1; i &gt;= 0; i-- {\n        h = mw[i](h)\n    }\n    return h\n}\n\nfunc mwAuthorize(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        if !authorize(r) {\n            w.WriteHeader(http.StatusForbidden)\n            return\n        }\n        next.ServeHTTP(w, r)\n    })\n}\nfunc mwAuthenticate(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        next.ServeHTTP(w, r)\n    })\n}\n\nfunc authorize(r *http.Request) (isAuthorized bool) {\n    isAuthorized = false\n\n    handlerName := \"UNKNOWN\"\n    if route := mux.CurrentRoute(r); route != nil {\n        routeName := route.GetName()\n        if routeName != \"\" {\n            handlerName = routeName\n        }\n    }\n\n    log.Println(handlerName)\n    switch handlerName {\n    case \"USERS_CREATE\":\n        // route-specific authorization\n        log.Println(\"USERS_CREATE\")\n        break\n    default:\n        break\n    }\n    return\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1202, "user_id": 5032550, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6MWmL.jpg?s=128&g=1", "display_name": "Luis Cabrera Benito", "link": "https://stackoverflow.com/users/5032550/luis-cabrera-benito"}, "is_accepted": false, "score": 1, "last_activity_date": 1595381971, "creation_date": 1595381971, "answer_id": 63025488, "question_id": 27768655, "link": "https://stackoverflow.com/questions/27768655/get-gorilla-mux-router-current-route-name-from-middleware/63025488#63025488", "title": "Get gorilla/mux router current route name from middleware", "body": "<p>What about:</p>\n<pre><code>routeName := mux.CurrentRoute(r).GetName()\n</code></pre>\n<p>Where <code>r</code> is the <code>*http.Request</code>. Don't forget to import <code>&quot;github.com/gorilla/mux&quot;</code>. Remember that in order to use this, you must give you route a name when you define it</p>\n"}], "owner": {"reputation": 31, "user_id": 693747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b570a7cbb70a9d2a73bfd88074c743b?s=128&d=identicon&r=PG", "display_name": "user693747", "link": "https://stackoverflow.com/users/693747/user693747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3775, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1595381971, "creation_date": 1420394798, "last_edit_date": 1420413681, "question_id": 27768655, "link": "https://stackoverflow.com/questions/27768655/get-gorilla-mux-router-current-route-name-from-middleware", "title": "Get gorilla/mux router current route name from middleware", "body": "<p><strong>Problem:</strong>\nUnable to access mux.CurrentRoute(r).GetName() from middleware. (Although I had been able to access it from my middleware, I had to change the way my middleware works due to it's previous inability to access the request).  So I've mucked something up and I'm not sure how to get back to a working state where I can access the route name.</p>\n\n<p>Any help would be much appreciated!</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>runtime error: invalid memory address or nil pointer dereference \n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>func main() {\n    var (\n        err          error\n        r            *mux.Router\n        devRouter    *mux.Router\n        usersRouter  *mux.Router\n        brandsRouter *mux.Router\n    )\n    defer db.Close()\n    defer store.Close()\n\n    r = mux.NewRouter()\n    devRouter = r.PathPrefix(\"/api/v1/dev\").Subrouter()\n    usersRouter = r.PathPrefix(\"/api/v1/users\").Subrouter()\n    brandsRouter = r.PathPrefix(\"/api/v1/brands\").Subrouter()\n\n    // development endpoints\n    devRouter.HandleFunc(\"/db/seed\", devDbSeed)\n    ...\n\n    // users\n    usersRouter.HandleFunc(\"/create\", usersCreateHandlerFunc).Methods(\"POST\").Name(\"USERS_CREATE\")\n    ...\n\n    // brands\n    brandsRouter.HandleFunc(\"/create\", brandsCreateHandlerFunc).Methods(\"POST\").Name(\"BRANDS_CREATE\")\n    ...\n\n    // products\n    brandsRouter.HandleFunc(\"/{brand_id:[0-9]+}/products\", brandsProductsListHandlerFunc).Methods(\"GET\").Name(\"BRANDS_PRODUCTS_LIST\")\n    ...\n\n    // mwAuthorize and mwAuthenticate basically work the same\n    mw := []func(http.Handler) http.Handler{mwAuthenticate, mwAuthorize}\n    http.Handle(\"/\", use(r, mw...))\n    err = http.ListenAndServe(\":9000\", nil)\n    if err != nil {\n         logIt(err)\n    }\n}\n\nfunc use(h http.Handler, mw ...func(http.Handler) http.Handler) http.Handler {\n    // exec order: mw[0],mw[1],mw[N]...\n    for i := len(mw) - 1; i &gt;= 0; i-- {\n        h = mw[i](h)\n    }\n    return h\n}\n\nfunc mwAuthorize(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n         if true != authorize(r) {\n            w.WriteHeader(http.StatusForbidden)\n            return\n         } else {\n            next.ServeHTTP(w, r)\n         }\n     })\n}\n\nfunc authorize(r *http.Request) (isAuthorized bool) {\n    isAuthorized = false\n    /**\n       This is where it's failing!\n    */\n    routeName := mux.CurrentRoute(r).GetName()\n    switch routeName {\n    case \"USERS_CREATE\":\n        // route-specific authorization\n        break\n    ...\n    default:\n        break\n    }\n    return\n}\n</code></pre>\n\n<p>Update (2015-01-04 @ 4:49PM EST):\nSo after removing the middleware (or at least commenting out the section that's trying to read mux.CurrentRoute) I am able to retrieve the route name from the destination handlerfunc (ex: usersCreateHandlerFunc or brandsCreateHandlerFunc).  This doesn't solve my problem (I'd still like to perform authentication/authorization in middleware as opposed to every handlerfunc), I have a hunch it's letting me know *mux.Router isn't available in my middleware until after the final .ServeHTTP call.  (Or something along those lines...)</p>\n\n<p>Update (2015-01-04 @ 5:41PM EST):\nTried a different (albeit less-preferred) direction of using Negroni as the middleware component.  Still getting nil-pointer error when I try to get mux.CurrentRoute.</p>\n\n<p>Update (2015-01-04 @ 6:17PM EST):\nI am able to access the request (ex: r.URL) from the middleware func's, but still no luck on accessing the mux.Route (ex: mux.CurrentRoute(r)). After looking a bit more at the mux source, I think it's because the current mux context isn't getting set because the router hasn't executed the matcher yet (and therefore it doesn't know what route it's currently on until AFTER the middleware is complete).  However, I'm still not sure how to either resolve this, or re-structure my code to handle this.</p>\n"}, {"tags": ["bash", "go"], "answers": [{"tags": [], "owner": {"reputation": 1189, "user_id": 3931609, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/4n2cW.jpg?s=128&g=1", "display_name": "Kul", "link": "https://stackoverflow.com/users/3931609/kul"}, "is_accepted": false, "score": 0, "last_activity_date": 1420376484, "creation_date": 1420376484, "answer_id": 27765779, "question_id": 27765143, "link": "https://stackoverflow.com/questions/27765143/go-execute-bash-script/27765779#27765779", "title": "Go: execute bash script", "body": "<p>Check the example at <a href=\"http://golang.org/pkg/os/exec/#Command\" rel=\"nofollow\">http://golang.org/pkg/os/exec/#Command</a>  </p>\n\n<p>You can try by using an output buffer and assigning it to the Stdout of the cmd you create, as follows:</p>\n\n<pre><code>var out bytes.Buffer\ncmd.Stdout = &amp;out\n</code></pre>\n\n<p>You can then run the command using </p>\n\n<pre><code>cmd.Run() \n</code></pre>\n\n<p>If this executes fine (meaning it returns nil), the output of the command will be in the <code>out</code> buffer, the string version of which can be obtained with  </p>\n\n<pre><code>out.String()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4577, "user_id": 217965, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2f56f147c441727ffd27a57d747f131c?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/217965/drew"}, "is_accepted": true, "score": 5, "last_activity_date": 1420378317, "creation_date": 1420378317, "answer_id": 27766014, "question_id": 27765143, "link": "https://stackoverflow.com/questions/27765143/go-execute-bash-script/27766014#27766014", "title": "Go: execute bash script", "body": "<p><code>exec.Command()</code> returns a struct that can be used for other commands like <code>Run</code></p>\n\n<p>If you're only looking for the output of the command try this:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"os/exec\"\n)\n\nfunc main() {\n    out, err := exec.Command(\"date\").Output()\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Printf(\"The date is %s\\n\", out)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2930636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad17ea494ac6deda22a963ad7ede4acc?s=128&d=identicon&r=PG", "display_name": "Dario Filipovi\u0107", "link": "https://stackoverflow.com/users/2930636/dario-filipovi%c4%87"}, "is_accepted": false, "score": 2, "last_activity_date": 1420458593, "last_edit_date": 1495540513, "creation_date": 1420458593, "answer_id": 27778927, "question_id": 27765143, "link": "https://stackoverflow.com/questions/27765143/go-execute-bash-script/27778927#27778927", "title": "Go: execute bash script", "body": "<p>You can also use CombinedOutput() instead of Output(). It will dump standard error result of executed command instead of just returning error code.\nSee:\n<a href=\"https://stackoverflow.com/questions/18159704/how-to-debug-exit-status-1-error-when-running-exec-command-in-golang\">How to debug &quot;exit status 1&quot; error when running exec.Command in Golang</a></p>\n"}], "owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11398, "favorite_count": 0, "accepted_answer_id": 27766014, "answer_count": 3, "score": 4, "last_activity_date": 1420458593, "creation_date": 1420371880, "last_edit_date": 1495535409, "question_id": 27765143, "link": "https://stackoverflow.com/questions/27765143/go-execute-bash-script", "title": "Go: execute bash script", "body": "<p>How do I execute a bash script from my Go program? Here's my code:</p>\n\n<p>Dir Structure:</p>\n\n<pre><code>/hello/\n  public/\n    js/\n      hello.js\n  templates\n    hello.html\n\n  hello.go\n  hello.sh\n</code></pre>\n\n<p>hello.go</p>\n\n<pre><code>cmd, err := exec.Command(\"/bin/sh\", \"hello.sh\")\n  if err != nil {\n    fmt.Println(err)\n}\n</code></pre>\n\n<p>When I run hello.go and call the relevant route, I get this on my console:</p>\n\n<p><code>exit status 127\noutput is</code></p>\n\n<p>I'm expecting [\"a\", \"b\", \"c\"]</p>\n\n<p>I am aware there is a similar question on SO: <a href=\"https://stackoverflow.com/questions/25834277/executing-a-bash-script-from-golang\">Executing a Bash Script from Golang</a>, however, I'm not sure if I'm getting the path correct. Will appreciate help!</p>\n"}, {"tags": ["variables", "go"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1420373233, "post_id": 27764421, "comment_id": 43941243, "body": "For future language questions, please have a look at the <a href=\"http://golang.org/ref/spec\" rel=\"nofollow noreferrer\">spec</a> first. It should answer all your questions."}, {"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 0, "creation_date": 1420477859, "post_id": 27764421, "comment_id": 43978790, "body": "As a comment: <code>prs</code> probably stands for &quot;present&quot;.  The code in your example is checking for the presence or absence of an entry for <code>&quot;example&quot;</code> in the <code>m</code> map."}, {"owner": {"reputation": 1350, "user_id": 3656968, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000202663021/picture?type=large", "display_name": "Kansuler", "link": "https://stackoverflow.com/users/3656968/kansuler"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 7, "creation_date": 1420480761, "post_id": 27764421, "comment_id": 43980249, "body": "@FUZxxl Yes, I had a look there previously, but as I didn&#39;t know the name of the feature, i didn&#39;t find it. Also I find the official specs for programming languages not being very pedagogical and rather learn by example."}, {"owner": {"reputation": 1350, "user_id": 3656968, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000202663021/picture?type=large", "display_name": "Kansuler", "link": "https://stackoverflow.com/users/3656968/kansuler"}, "reply_to_user": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 0, "creation_date": 1420480813, "post_id": 27764421, "comment_id": 43980274, "body": "@dyoo Once I had the explanation below I figured out it&#39;s meaning, but worth noting if someone else have the same question!"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1443886423, "post_id": 27764421, "comment_id": 53675082, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24357028/meaning-of-underscore-blank-identifier-in-go\">Meaning of underscore (blank identifier) in Go</a>"}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 8, "creation_date": 1463869619, "post_id": 27764421, "comment_id": 62249899, "body": "@FUZxxl: I don&#39;t know. Most of the questions asked on SO probably have answers available <i>somewhere.</i> Some threshold exists, beneath which a question should probably not be asked, but I don&#39;t think that this question falls beneath that."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1470207969, "post_id": 27764421, "comment_id": 64848357, "body": "<code>_,</code> is not some special syntax. It&#39;s the variable name <code>_</code> (which is special; see <a href=\"http://stackoverflow.com/questions/24357028/meaning-of-underscore-blank-identifier-in-go\" title=\"meaning of underscore blank identifier in go\">stackoverflow.com/questions/24357028/&hellip;</a>) followed by a <code>,</code>. <code>_, x := blah</code> is similar to <code>foo, x := blah</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1350, "user_id": 3656968, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000202663021/picture?type=large", "display_name": "Kansuler", "link": "https://stackoverflow.com/users/3656968/kansuler"}, "edited": false, "score": 0, "creation_date": 1420367495, "post_id": 27764432, "comment_id": 43939845, "body": "Thanks for giving a good example. It took me some thinking to understand the concept, but now i do!"}, {"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "edited": false, "score": 0, "creation_date": 1420369504, "post_id": 27764432, "comment_id": 43940322, "body": "Note that IME &quot;generally accepted standard&quot; is to call the membership test variables &quot;ok&quot; (same for checking if a channel read was valid or not)."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "edited": false, "score": 1, "creation_date": 1420370541, "post_id": 27764432, "comment_id": 43940569, "body": "@Jsor I agree. I have included your comment in the answer for more visibilty, and added a few additional examples."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 135, "last_activity_date": 1612571897, "last_edit_date": 1612571897, "creation_date": 1420366174, "answer_id": 27764432, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/27764432#27764432", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>It avoids having to declare all the variables for the returns values.<br />\nIt is called the <a href=\"https://golang.org/doc/effective_go.html#blank\" rel=\"noreferrer\"><strong>blank identifier</strong></a>.</p>\n<p>As in:</p>\n<pre><code>_, y, _ := coord(p)  // coord() returns three values; only interested in y coordinate\n</code></pre>\n<p>That way, you don't have to declare a variable you won't use: Go would not allow it. Instead, use '_' to ignore said variable.</p>\n<p>(the <a href=\"https://stackoverflow.com/q/26972615/6309\">other '<code>_</code>' use case is for import</a>)</p>\n<p>Since it discards the return value, it is helpful when you want to check only one of the returned values, as in &quot;<a href=\"https://stackoverflow.com/a/2051011/6309\">How to test key existence in a map?</a>&quot; shown in &quot;<a href=\"http://golang.org/doc/effective_go.html#maps\" rel=\"noreferrer\">Effective Go, map</a>&quot;:</p>\n<pre><code>_, present := timeZone[tz]\n</code></pre>\n<blockquote>\n<p>To test for presence in the map without worrying about the actual value, you can use the blank identifier, a simple underscore (<code>_</code>).<br />\nThe blank identifier can be assigned or declared with any value of any type, with the value discarded harmlessly.<br />\nFor testing presence in a map, use the blank identifier in place of the usual variable for the value.</p>\n</blockquote>\n<p>As <a href=\"https://stackoverflow.com/users/901827/jsor\">Jsor</a> adds <a href=\"https://stackoverflow.com/questions/27764421/what-is-in-a-golang-declaration/27764432#comment43940322_27764432\">in the comments</a>:</p>\n<blockquote>\n<p>&quot;generally accepted standard&quot; is to call the membership test variables &quot;ok&quot; (same for checking if a channel read was valid or not)</p>\n</blockquote>\n<p>That allows you to combine it with test:</p>\n<pre><code>if _, err := os.Stat(path); os.IsNotExist(err) {\n    fmt.Printf(&quot;%s does not exist\\n&quot;, path)\n}\n</code></pre>\n<p>You would find it also in loop:</p>\n<blockquote>\n<p>If you only need the second item in the range (the value), use the blank identifier, an underscore, to discard the first:</p>\n</blockquote>\n<pre><code>sum := 0\nfor _, value := range array {\n    sum += value\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 2464397, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8l2kG.png?s=128&g=1", "display_name": "ThinkChaos", "link": "https://stackoverflow.com/users/2464397/thinkchaos"}, "is_accepted": false, "score": 4, "last_activity_date": 1420366463, "creation_date": 1420366463, "answer_id": 27764469, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/27764469#27764469", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p><code>_</code> is the blank identifier. Meaning the value it should be assigned is discarded.</p>\n\n<p>Here it is the value of <code>example</code> key that is discarded. The second line of code would discard the <em>presence</em> boolean and store the value in <code>prs</code>.<br>\nSo to only check the presence in the map, you can discard the value. This can be used to use a map as a set.</p>\n"}, {"comments": [{"owner": {"reputation": 72581, "user_id": 44852, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/JbQbc.jpg?s=128&g=1", "display_name": "Tarik", "link": "https://stackoverflow.com/users/44852/tarik"}, "edited": false, "score": 15, "creation_date": 1463667309, "post_id": 32922539, "comment_id": 62171001, "body": "Your first sentence was important to understand the reason why there is an _ as a blank identifier."}], "tags": [], "owner": {"reputation": 1239, "user_id": 1396189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1ff21cc3cf79234c73e0f7ef69b46259?s=128&d=identicon&r=PG", "display_name": "Juni Brosas", "link": "https://stackoverflow.com/users/1396189/juni-brosas"}, "is_accepted": false, "score": 70, "last_activity_date": 1443875164, "creation_date": 1443875164, "answer_id": 32922539, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/32922539#32922539", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>The Go compiler won't allow you to create variables that you never use.</p>\n\n<pre><code>for i, value := range x {\n   total += value\n}\n</code></pre>\n\n<p>The above code will return an error message \"i declared and not used\". </p>\n\n<p>Since we don't use i inside of our loop we need to change it to this: </p>\n\n<pre><code>for _, value := range x {\n   total += value\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 660, "user_id": 2063953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18bcb402477b269f64b326c0dcfbb5fa?s=128&d=identicon&r=PG", "display_name": "Anagha", "link": "https://stackoverflow.com/users/2063953/anagha"}, "is_accepted": false, "score": 2, "last_activity_date": 1530145945, "creation_date": 1530145945, "answer_id": 51073148, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/51073148#51073148", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>It is called the blank identifier and it helps in cases where you wish to discard the value that is going to be returned and not reference it</p>\n\n<p>Some places where we use it:</p>\n\n<ul>\n<li>A function returns a value and you don't intend to use it in the\nfuture </li>\n<li>You want to iterate and need an i value that you will not be\nusing</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 2619083, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/96b47ca0cdbe80874a3fa695709700be?s=128&d=identicon&r=PG&f=1", "display_name": "koopertrooper", "link": "https://stackoverflow.com/users/2619083/koopertrooper"}, "is_accepted": false, "score": 4, "last_activity_date": 1531545700, "last_edit_date": 1531545700, "creation_date": 1531544435, "answer_id": 51335375, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/51335375#51335375", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<blockquote>\n  <p>The blank identifier may be used whenever syntax requires a variable name but program logic does not, for instance to discard an unwanted loop index when we require only the element value.</p>\n</blockquote>\n\n<p>Excerpt From:</p>\n\n<p>The Go Programming Language (Addison-Wesley Professional Computing Series)</p>\n\n<p>Brian W. Kernighan</p>\n\n<p>This material may be protected by copyright.</p>\n"}, {"tags": [], "owner": {"reputation": 3868, "user_id": 2295484, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BAohf.png?s=128&g=1", "display_name": "Krishnadas PC", "link": "https://stackoverflow.com/users/2295484/krishnadas-pc"}, "is_accepted": false, "score": 1, "last_activity_date": 1545903216, "creation_date": 1545903216, "answer_id": 53942757, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/53942757#53942757", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<blockquote>\n  <p><strong>An unused variable is not allowed in Golang</strong></p>\n</blockquote>\n\n<p>If you were coming from other programming languages this might feel bit difficult to get used to this. But this results in more cleaner code. So by using a <code>_</code> we are saying we know there is a variable there but we don't want to use it and telling the compiler that does not complain me about it. :)</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 10459585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i259T.png?s=128&g=1", "display_name": "Kaveen Hyacinth", "link": "https://stackoverflow.com/users/10459585/kaveen-hyacinth"}, "is_accepted": false, "score": 2, "last_activity_date": 1556849499, "last_edit_date": 1556849499, "creation_date": 1556847422, "answer_id": 55962221, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/55962221#55962221", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>Basically, <code>_,</code> known as the blank identifier. In GO we can't have variables that are not being used. </p>\n\n<p>As an instance when you iterating through an array if you are using <strong>value := range</strong> you don't want a <strong>i</strong> value for iterating. But if you omit the i value it will return an error. But if you declare i and didn't use it, it will also return an error. </p>\n\n<p>Therefore, that is the place where we have to use <code>_,</code>. </p>\n\n<p>Also it is used when you don't want a function's return value in the future.</p>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 7298873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/038j2.jpg?s=128&g=1", "display_name": "monkrus", "link": "https://stackoverflow.com/users/7298873/monkrus"}, "is_accepted": false, "score": 2, "last_activity_date": 1578702215, "creation_date": 1578702215, "answer_id": 59690603, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration/59690603#59690603", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>The great use case for the unused variable is the situation when you only need a partial  output. In the example below we only need to print the value (state population). </p>\n\n<pre><code>package main\nimport (\n    \"fmt\"\n)\nfunc main() {\n          statePopulations := map[string]int{\n          \"California\": 39250017,\n          \"Texas\":      27862596,\n          \"Florida\":    20612439,\n          }\n          for _, v := range statePopulations {\n          fmt.Println(v)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1350, "user_id": 3656968, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000202663021/picture?type=large", "display_name": "Kansuler", "link": "https://stackoverflow.com/users/3656968/kansuler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51777, "favorite_count": 27, "accepted_answer_id": 27764432, "answer_count": 8, "score": 108, "last_activity_date": 1612571897, "creation_date": 1420366051, "last_edit_date": 1531518353, "question_id": 27764421, "link": "https://stackoverflow.com/questions/27764421/what-is-underscore-comma-in-a-go-declaration", "title": "What is &quot;_,&quot; (underscore comma) in a Go declaration?", "body": "<p>And I can't seem to understand this kind of variable declaration:</p>\n\n<pre><code>_, prs := m[\"example\"]\n</code></pre>\n\n<p>What exactly is \"<code>_,</code>\" doing and why have they declared a variable like this instead of</p>\n\n<pre><code>prs := m[\"example\"]\n</code></pre>\n\n<p>(I found it as part of <a href=\"https://gobyexample.com/maps\" rel=\"noreferrer\">Go by Example: Maps</a>)</p>\n"}, {"tags": ["go", "goroutine"], "comments": [{"owner": {"reputation": 1641, "user_id": 3828156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/scFYI.jpg?s=128&g=1", "display_name": "chendesheng", "link": "https://stackoverflow.com/users/3828156/chendesheng"}, "edited": false, "score": 0, "creation_date": 1420358332, "post_id": 27763501, "comment_id": 43938043, "body": "You can use SIGQUIT(ctrl+\\&#41; to print out all goroutines."}, {"owner": {"reputation": 5123, "user_id": 430294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1e64dbcbda5c975c399565058d3590e8?s=128&d=identicon&r=PG", "display_name": "vrbilgi", "link": "https://stackoverflow.com/users/430294/vrbilgi"}, "reply_to_user": {"reputation": 1641, "user_id": 3828156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/scFYI.jpg?s=128&g=1", "display_name": "chendesheng", "link": "https://stackoverflow.com/users/3828156/chendesheng"}, "edited": false, "score": 0, "creation_date": 1420361718, "post_id": 27763501, "comment_id": 43938625, "body": "@chendesheng: Thanks for your suggesting but it don&#39;t answer my question why above program has 4 goroutine and when I add Sleep why the number increases to 5 ?"}], "answers": [{"comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429814091, "post_id": 27764120, "comment_id": 47789826, "body": "And of course this is completely implementation dependant. The very next point release of Go could arbitrarily add or remove goroutines started by the runtime (or anywhere else in the standard packages). Not to mention <code>gc</code> vs <code>gccgo</code> differences."}], "tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": true, "score": 5, "last_activity_date": 1420364074, "last_edit_date": 1420364074, "creation_date": 1420363396, "answer_id": 27764120, "question_id": 27763501, "link": "https://stackoverflow.com/questions/27763501/how-many-goroutines-are-started-by-default-in-a-go-program/27764120#27764120", "title": "How many goroutines are started by default in a Go program?", "body": "<p>Actually, memory management takes more than one goroutine ...</p>\n\n<p>The 4 initial goroutines are:</p>\n\n<ul>\n<li>the main goroutine</li>\n<li>the background sweeper (the phase of the garbage collection which is concurrent)</li>\n<li>the scavenger (also part of the garbage collector)</li>\n<li>the finalizer goroutine (exclusively running the <a href=\"https://golang.org/pkg/runtime/#SetFinalizer\" rel=\"noreferrer\">finalizers</a> eventually attached to objects)</li>\n</ul>\n\n<p>Then, the time.Sleep function is called. It requires a timer. Timers are implemented in the runtime, through an additional goroutine (timerproc), which processes events stored in the timer heap. This goroutine is lazily started when the first timer is added to the heap.</p>\n\n<p>Hence, you finally get 5 goroutines.</p>\n"}], "owner": {"reputation": 5123, "user_id": 430294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1e64dbcbda5c975c399565058d3590e8?s=128&d=identicon&r=PG", "display_name": "vrbilgi", "link": "https://stackoverflow.com/users/430294/vrbilgi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 27764120, "answer_count": 1, "score": 2, "last_activity_date": 1420624146, "creation_date": 1420357400, "last_edit_date": 1420624146, "question_id": 27763501, "link": "https://stackoverflow.com/questions/27763501/how-many-goroutines-are-started-by-default-in-a-go-program", "title": "How many goroutines are started by default in a Go program?", "body": "<pre><code>package main\n\nimport (\n    //\"time\"\n    \"runtime\"\n    \"fmt\"\n)\n\nfunc main() {\n    //time.Sleep(100 * time.Millisecond)//By adding this number of goroutine increases\nfmt.Println(runtime.NumGoroutine())\n}\n</code></pre>\n\n<p>I am trying to find out the number of goroutines in a program. My <a href=\"http://play.golang.org/p/oDNYtyHxK5\" rel=\"nofollow\">code is here</a>. While coding this I noticed default number of goroutines is 4.</p>\n\n<p>For me:</p>\n\n<ul>\n<li>main is one goroutine</li>\n<li>garbage collector is one goroutine</li>\n</ul>\n\n<p>What are the others?</p>\n\n<p>By adding the <strong>time.Sleep</strong> (above), the number of goroutines increases to 5. What is the reason for this?</p>\n"}, {"tags": ["go", "sha256"], "answers": [{"comments": [{"owner": {"reputation": 10925, "user_id": 723947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b898a5dde625380e861e3719e50a4c?s=128&d=identicon&r=PG", "display_name": "dyoo", "link": "https://stackoverflow.com/users/723947/dyoo"}, "edited": false, "score": 1, "creation_date": 1420354890, "post_id": 27762738, "comment_id": 43937331, "body": "This might not be applicable to the original question, if <code>encoded</code> is a slice of uninterpreted bytes.  It only works if <code>encoded</code> is to be interpreted as the base64-encoding of the checksum."}], "tags": [], "owner": {"reputation": 481, "user_id": 2645787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b4ee359db012decf739c4f518b61a4?s=128&d=identicon&r=PG", "display_name": "Sumit Rathore", "link": "https://stackoverflow.com/users/2645787/sumit-rathore"}, "is_accepted": false, "score": -4, "last_activity_date": 1420349708, "last_edit_date": 1495539924, "creation_date": 1420349708, "answer_id": 27762738, "question_id": 27762562, "link": "https://stackoverflow.com/questions/27762562/how-to-compare-32byte-with-byte-in-golang/27762738#27762738", "title": "How to compare [32]byte with []byte in golang?", "body": "<p>I got the answer using this thread</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16111754/sha256-in-go-and-php-giving-different-results?rq=1\">SHA256 in Go and PHP giving different results</a></p>\n\n<pre><code>    converted := []byte(raw)\n    hasher := sha256.New()\n    hasher.Write(converted)\n    return hex.EncodeToString(hasher.Sum(nil)) == encoded\n</code></pre>\n\n<p>This is not converting [32]byte to []byte but it is using different function which do not give output in [32]byte.</p>\n"}, {"comments": [{"owner": {"reputation": 3436, "user_id": 307614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/671aed37f0d4a6668053a70a75f5c715?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/307614/dave"}, "edited": false, "score": 4, "creation_date": 1439079260, "post_id": 27762870, "comment_id": 51714571, "body": "You can also use <code>bytes.Equal(x[:], y[:])</code>"}], "tags": [], "owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "is_accepted": true, "score": 31, "last_activity_date": 1569859340, "last_edit_date": 1569859340, "creation_date": 1420351227, "answer_id": 27762870, "question_id": 27762562, "link": "https://stackoverflow.com/questions/27762562/how-to-compare-32byte-with-byte-in-golang/27762870#27762870", "title": "How to compare [32]byte with []byte in golang?", "body": "<p>You can trivially convert any array ([size]T) to a slice ([]T) by slicing it:</p>\n\n<pre><code>x := [32]byte{}\nslice := x[:] // shorthand for x[0:len(x)]\n</code></pre>\n\n<p>From there you can compare it to your slice like you would compare any other two slices, e.g.</p>\n\n<pre><code>func Equal(slice1, slice2 []byte) bool {\n    if len(slice1) != len(slice2) {\n        return false\n    }\n\n    for i := range slice1 {\n        if slice1[i] != slice2[i] {\n            return false\n        }\n    }\n\n    return true\n}\n</code></pre>\n\n<p>Edit: As Dave mentions in the comments, there's also an <code>Equal</code> method in the <code>bytes</code> package, <code>bytes.Equal(x[:], y[:])</code></p>\n"}], "owner": {"reputation": 481, "user_id": 2645787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b4ee359db012decf739c4f518b61a4?s=128&d=identicon&r=PG", "display_name": "Sumit Rathore", "link": "https://stackoverflow.com/users/2645787/sumit-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11949, "favorite_count": 2, "accepted_answer_id": 27762870, "answer_count": 2, "score": 20, "last_activity_date": 1569859340, "creation_date": 1420347626, "question_id": 27762562, "link": "https://stackoverflow.com/questions/27762562/how-to-compare-32byte-with-byte-in-golang", "title": "How to compare [32]byte with []byte in golang?", "body": "<p>I want to compare output of sha256.Sum256() which is [32]byte with a []byte.</p>\n\n<p>I am getting an error \"mismatched types [32]byte and []byte\". I am not able to convert []byte to [32]byte. </p>\n\n<p>Is there a way to do this? </p>\n"}, {"tags": ["go", "binary", "installation", "package", "executable"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1192760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585312e70084ed02013b7110e1459ef5?s=128&d=identicon&r=PG", "display_name": "Jim Zhan", "link": "https://stackoverflow.com/users/1192760/jim-zhan"}, "edited": false, "score": 0, "creation_date": 1420355898, "post_id": 27762346, "comment_id": 43937549, "body": "Wah, didn&#39;t know a trick like this. Work pretty well. But is there any thing I can add/config to achieve the same goal in the standard way?"}, {"owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "reply_to_user": {"reputation": 11, "user_id": 1192760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585312e70084ed02013b7110e1459ef5?s=128&d=identicon&r=PG", "display_name": "Jim Zhan", "link": "https://stackoverflow.com/users/1192760/jim-zhan"}, "edited": false, "score": 0, "creation_date": 1420392793, "post_id": 27762346, "comment_id": 43947230, "body": "What do you mean by &#39;standard way&quot;  meaning, someone does go get github.com/myproject/demo and gets multiple executables?  nope, no way to do that that I&#39;m aware of"}, {"owner": {"reputation": 11, "user_id": 1192760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585312e70084ed02013b7110e1459ef5?s=128&d=identicon&r=PG", "display_name": "Jim Zhan", "link": "https://stackoverflow.com/users/1192760/jim-zhan"}, "edited": false, "score": 0, "creation_date": 1420419502, "post_id": 27762346, "comment_id": 43955167, "body": "Exactly, thought it could be (&amp; it really should) configured to achieved this. But thanks anyway, the ellipsis trick is already good enough :-)"}], "tags": [], "owner": {"reputation": 9777, "user_id": 121631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85801ee3b7b70969f6713aaa5768ca20?s=128&d=identicon&r=PG", "display_name": "David Budworth", "link": "https://stackoverflow.com/users/121631/david-budworth"}, "is_accepted": false, "score": 0, "last_activity_date": 1420345429, "creation_date": 1420345429, "answer_id": 27762346, "question_id": 27762187, "link": "https://stackoverflow.com/questions/27762187/any-way-to-install-executable-along-with-library-via-go-get/27762346#27762346", "title": "Any way to install executable along with library via go get?", "body": "<p>I believe you can do:</p>\n\n<pre><code>go get github.com/myproject/demo/...\n</code></pre>\n\n<p>The ellipsis (...) means all sub directories</p>\n\n<p>I'm pretty sure this will install all executables and libraries in your \"demo\" repository</p>\n"}], "owner": {"reputation": 11, "user_id": 1192760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585312e70084ed02013b7110e1459ef5?s=128&d=identicon&r=PG", "display_name": "Jim Zhan", "link": "https://stackoverflow.com/users/1192760/jim-zhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420345429, "creation_date": 1420343682, "last_edit_date": 1420344182, "question_id": 27762187, "link": "https://stackoverflow.com/questions/27762187/any-way-to-install-executable-along-with-library-via-go-get", "title": "Any way to install executable along with library via go get?", "body": "<p>It took me sometime to have some basic understandings of Go's package structure &amp; came up with this in my project:</p>\n\n<blockquote>\n<pre><code>&lt;/github.com/myproject/demo/\n\u25b8 config/\n\u25b8 crypto/\n\u25b8 demo/\n    executable.go\n  deps.go\n  LICENSE\n  README.md\n  demo.go\n</code></pre>\n</blockquote>\n\n<p>I can now have the same name for the libary &amp; binary, but not in the way I want. Binary executable has to be installed separately via go get like \"go get github.com/myproject/demo/demo\", is there anyway to install the binary executable via single go get like \"go get github.com/myproject/demo\"?</p>\n"}, {"tags": ["go", "wrapper", "midi"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 3417677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f06f6b9f1db194f92df42900ef325c5c?s=128&d=identicon&r=PG&f=1", "display_name": "S\u0142awomir Kozok", "link": "https://stackoverflow.com/users/3417677/s%c5%82awomir-kozok"}, "edited": false, "score": 0, "creation_date": 1420330326, "post_id": 27760923, "comment_id": 43933087, "body": "I had it. Reinstallation changes nothing."}], "tags": [], "owner": {"reputation": 76939, "user_id": 15955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e95618da1c880d3f324319567ca52591?s=128&d=identicon&r=PG", "display_name": "Nils Pipenbrinck", "link": "https://stackoverflow.com/users/15955/nils-pipenbrinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1420329532, "creation_date": 1420329532, "answer_id": 27760923, "question_id": 27760637, "link": "https://stackoverflow.com/questions/27760637/go-midi-portmidi-installation/27760923#27760923", "title": "Go MIDI portmidi installation", "body": "<p>The dynamic library of libportmidi is missing.</p>\n\n<p>Try: </p>\n\n<pre><code>sudo apt-get install libportmidi0\n</code></pre>\n\n<p>That should fix it if you're on a debian/ubuntu system. If the library is not available on your linux system search your can still get the library source and compile it yourself. </p>\n"}, {"comments": [{"owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1420391696, "post_id": 27765060, "comment_id": 43946874, "body": "Do you know why the official repo version doesn&#39;t work?"}, {"owner": {"reputation": 141, "user_id": 3417677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f06f6b9f1db194f92df42900ef325c5c?s=128&d=identicon&r=PG&f=1", "display_name": "S\u0142awomir Kozok", "link": "https://stackoverflow.com/users/3417677/s%c5%82awomir-kozok"}, "reply_to_user": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "edited": false, "score": 0, "creation_date": 1420483014, "post_id": 27765060, "comment_id": 43981390, "body": "Don&#39;t know why. But when downloading from repo, it has older version (1:200-0ubuntu3, which propably means v. 200). When downloading from official developer site, it has proper version (v. 217)"}], "tags": [], "owner": {"reputation": 141, "user_id": 3417677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f06f6b9f1db194f92df42900ef325c5c?s=128&d=identicon&r=PG&f=1", "display_name": "S\u0142awomir Kozok", "link": "https://stackoverflow.com/users/3417677/s%c5%82awomir-kozok"}, "is_accepted": true, "score": 1, "last_activity_date": 1420371114, "creation_date": 1420371114, "answer_id": 27765060, "question_id": 27760637, "link": "https://stackoverflow.com/questions/27760637/go-midi-portmidi-installation/27765060#27765060", "title": "Go MIDI portmidi installation", "body": "<p>Repaired it.</p>\n\n<p>Installing libportmidi0 from official repo is bad idea. Need to compile it, for example from:</p>\n\n<p><a href=\"http://sourceforge.net/projects/portmedia/files/portmidi/217/portmidi-src-217.zip/download\" rel=\"nofollow\">PortMIDI source download</a></p>\n\n<p>All the instructions how to compile it in directory <em>pm_linux</em>.</p>\n"}], "owner": {"reputation": 141, "user_id": 3417677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f06f6b9f1db194f92df42900ef325c5c?s=128&d=identicon&r=PG&f=1", "display_name": "S\u0142awomir Kozok", "link": "https://stackoverflow.com/users/3417677/s%c5%82awomir-kozok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 27765060, "answer_count": 2, "score": 2, "last_activity_date": 1459895675, "creation_date": 1420327242, "last_edit_date": 1459895675, "question_id": 27760637, "link": "https://stackoverflow.com/questions/27760637/go-midi-portmidi-installation", "title": "Go MIDI portmidi installation", "body": "<p>I'm new in Go. I want to use PortMidi wrapper for Go, trying to use this:\n<a href=\"https://github.com/rakyll/portmidi\" rel=\"nofollow\">Go PortMidi</a></p>\n\n<p>When using:</p>\n\n<pre><code>go get github.com/rakyll/portmidi\n</code></pre>\n\n<p>I've got:</p>\n\n<pre><code>/usr/bin/ld: $WORK/github.com/rakyll/portmidi/_obj/portmidi.cgo2.o: undefined reference to symbol 'Pt_Start'\n/usr/lib/libporttime.so.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Tried to search something about:</p>\n\n<pre><code>DSO missing from command line\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>undefined reference to symbol 'Pt_Start'\n</code></pre>\n\n<p>But found nothing.</p>\n"}, {"tags": ["error-handling", "go"], "answers": [{"tags": [], "owner": {"reputation": 47884, "user_id": 164234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b34a2a81515583dc95e5c0809db06bb?s=128&d=identicon&r=PG", "display_name": "Nick Craig-Wood", "link": "https://stackoverflow.com/users/164234/nick-craig-wood"}, "is_accepted": true, "score": 1, "last_activity_date": 1420322674, "creation_date": 1420322674, "answer_id": 27760021, "question_id": 27759024, "link": "https://stackoverflow.com/questions/27759024/how-to-specify-and-handle-specific-errors-in-go/27760021#27760021", "title": "How to specify and handle specific errors in Go?", "body": "<p>Firstly note that <a href=\"http://golang.org/pkg/net/http/#Client.Get\" rel=\"nofollow\">http.Get</a> doesn't return an error for an HTTP return which isn't 200.  The Get did its job successfully even when the server gave it a 404 error. From the docs</p>\n\n<blockquote>\n  <p>A non-2xx response doesn't cause an error.</p>\n</blockquote>\n\n<p>Therfore in your code, <code>err</code> will be <code>nil</code> when you call this which means it will return <code>err=nil</code> which probably isn't what you want.</p>\n\n<pre><code>if resp.StatusCode != http.StatusOK {\n    return nil, err\n}\n</code></pre>\n\n<p>This should do what you want</p>\n\n<pre><code>if resp.StatusCode != http.StatusOK {\n    return nil, fmt.Errorf(\"HTTP Error %d: %s\", resp.StatusCode, resp.Status)\n}\n</code></pre>\n\n<p>Which will return an error for any kind of HTTP error, with a message as to what it was.</p>\n"}, {"tags": [], "owner": {"reputation": 3290, "user_id": 296559, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1b20928b0e2fede5489d564878ce7bb8?s=128&d=identicon&r=PG", "display_name": "RoboTamer", "link": "https://stackoverflow.com/users/296559/robotamer"}, "is_accepted": false, "score": 0, "last_activity_date": 1420322703, "creation_date": 1420322703, "answer_id": 27760023, "question_id": 27759024, "link": "https://stackoverflow.com/questions/27759024/how-to-specify-and-handle-specific-errors-in-go/27760023#27760023", "title": "How to specify and handle specific errors in Go?", "body": "<p>Sure you can:</p>\n\n<pre><code>package main\n\nimport \"fmt\"\n\nfunc main() {\n    var err error\n    switch err {\n    case nil:\n        fmt.Println(\"Is nil\")\n    }\n}\n</code></pre>\n\n<p><a href=\"https://play.golang.org/p/4VdHW87wCr\" rel=\"nofollow\">https://play.golang.org/p/4VdHW87wCr</a></p>\n"}], "owner": {"reputation": 1448, "user_id": 3990714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d3ffcc10f19da50e8c320016137dd7?s=128&d=identicon&r=PG&f=1", "display_name": "nonamorando", "link": "https://stackoverflow.com/users/3990714/nonamorando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 27760021, "answer_count": 2, "score": 2, "last_activity_date": 1420322703, "creation_date": 1420315521, "question_id": 27759024, "link": "https://stackoverflow.com/questions/27759024/how-to-specify-and-handle-specific-errors-in-go", "title": "How to specify and handle specific errors in Go?", "body": "<p>I wrote this very basic parser that goes through Reddit JSON and am curious how I can specifically manage an error in Go. </p>\n\n<p>For example I have this \"Get\" method  for a link:</p>\n\n<pre><code>func Get(reddit string) ([]Item, error) {\n    url := fmt.Sprintf(\"http://reddit.com/r/%s.json\", reddit)\n    resp, err := http.Get(url)\n    if err != nil {\n        return nil, err\n    }\n    defer resp.Body.Close()\n    if resp.StatusCode != http.StatusOK {\n        return nil, err\n    }\n    /*\n     * Other code here\n    */\n}\n</code></pre>\n\n<p>How can I handle, say, a 404 error from the StatusCode? I know I can test for the 404 error itself:</p>\n\n<pre><code>if resp.StatusCode == http.StatusNotfound {\n    //do stuff here\n}\n</code></pre>\n\n<p>But is there a way I can directly manage the <code>resp.StatusCode != http.StatusOK</code> without having to write a bunch of if statements? Is there a way I can use <code>err</code> in a switch statement?</p>\n"}, {"tags": ["json", "sqlite", "go", "martini"], "answers": [{"comments": [{"owner": {"reputation": 1448, "user_id": 3990714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d3ffcc10f19da50e8c320016137dd7?s=128&d=identicon&r=PG&f=1", "display_name": "nonamorando", "link": "https://stackoverflow.com/users/3990714/nonamorando"}, "edited": false, "score": 0, "creation_date": 1420318243, "post_id": 27758235, "comment_id": 43929716, "body": "How does Go interpret the <code>json:&quot;user1&quot;</code>?"}, {"owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "reply_to_user": {"reputation": 1448, "user_id": 3990714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9d3ffcc10f19da50e8c320016137dd7?s=128&d=identicon&r=PG&f=1", "display_name": "nonamorando", "link": "https://stackoverflow.com/users/3990714/nonamorando"}, "edited": false, "score": 0, "creation_date": 1420325534, "post_id": 27758235, "comment_id": 43931800, "body": "Go does not interpret this string. However the encoding/json package uses the reflect API to extract the string from the structure definition, and then parse it. It interprets the content as described at <a href=\"http://golang.org/pkg/encoding/json/#Marshal\" rel=\"nofollow noreferrer\">golang.org/pkg/encoding/json/#Marshal</a>"}], "tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": true, "score": 1, "last_activity_date": 1420310315, "creation_date": 1420310315, "answer_id": 27758235, "question_id": 27756856, "link": "https://stackoverflow.com/questions/27756856/error-with-json-encoding-in-martini/27758235#27758235", "title": "Error with JSON encoding in Martini", "body": "<p>Consider the way you define your structures.</p>\n\n<p>In the first case:</p>\n\n<pre><code>type chatbetweenusers struct {\n    Time string `json:\"time\"`\n    Text string `json:\":\"text\"`\n}\n</code></pre>\n\n<p>The syntax of the tag associated to Text is wrong. It should be:</p>\n\n<pre><code>    Text string `json:\"text\"`\n</code></pre>\n\n<p>In the second case:</p>\n\n<pre><code>type chatbetweenusers struct {\n    Text string `json:\":\"text\"`\n    User1 string `json:\":\"user1\"`\n}\n</code></pre>\n\n<p>The syntax associated to both tags is wrong. They should be:</p>\n\n<pre><code>    Text string `json:\"text\"`\n    User1 string `json:\"user1\"`\n</code></pre>\n\n<p>Here is a playground example: <a href=\"https://play.golang.org/p/rirtTsTVWT\" rel=\"nofollow\">https://play.golang.org/p/rirtTsTVWT</a></p>\n"}], "owner": {"reputation": 57, "user_id": 2506580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f542a140e2fa43ba04551637798f3d2?s=128&d=identicon&r=PG", "display_name": "Murat Kasimov", "link": "https://stackoverflow.com/users/2506580/murat-kasimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 27758235, "answer_count": 1, "score": 1, "last_activity_date": 1420310315, "creation_date": 1420302136, "question_id": 27756856, "link": "https://stackoverflow.com/questions/27756856/error-with-json-encoding-in-martini", "title": "Error with JSON encoding in Martini", "body": "<p>When I'm trying to get JSON data from my database, I get this:<br>\n{\"time\":\"13:42:21 11.12.14\",\":\":\"\u041f\u0440\u0438\u0432\u0435\u0442\"}<br>\n{\"time\":\"13:42:25 11.12.14\",\":\":\"\u042d\u0439!\"}</p>\n\n<pre><code>var time string \nvar text string\n\ntype chatbetweenusers struct {\n    Time string `json:\"time\"`\n    Text string `json:\":\"text\"`\n    }\n\nvar buffer bytes.Buffer\n    db, err := sql.Open(\"sqlite3\", \"./database.db\"); if err != nil {\n        log.Fatal(err)\n    }; defer db.Close()\n\nrows, err := db.Query(\"select time, text from messages;\")\n    if err != nil {\n        log.Fatal(err) \n    } \n    defer rows.Close()\n\n\n    for rows.Next() {\n        // give a names for every column from query result\n        err := rows.Scan(&amp;time, &amp;text)\n        if err != nil {\n            log.Fatal(err)\n        }\n        // add strings to struct\n        chatitem := &amp;chatbetweenusers{time, text}\n        log.Println(chatitem)\n\n        // format it to JSON!\n        b, err := json.Marshal(chatitem)\n        // conver JSON into string to return from Martini\n        s := string(b[:])\n        buffer.WriteString(s)\n    }\n\nreturn buffer.String()\n})\n</code></pre>\n\n<p>And when I'm trying to get other data from database, I get this:<br>\n{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}{}</p>\n\n<pre><code>var text string\nvar user1 string\n\ntype chatbetweenusers struct {\n    Text string `json:\":\"text\"`\n    User1 string `json:\":\"user1\"`\n    }\n\nvar buffer bytes.Buffer\n    db, err := sql.Open(\"sqlite3\", \"./database.db\"); if err != nil {\n        log.Fatal(err)\n    }; defer db.Close()\n\nrows, err := db.Query(\"select text, user1 from messages;\")\n    if err != nil {\n        log.Fatal(err) \n    } \n    defer rows.Close()\n\n\n    for rows.Next() {\n        // give a names for every column from query result\n        err := rows.Scan(&amp;text, &amp;user1)\n        if err != nil {\n            log.Fatal(err)\n        }\n        // add strings to struct\n        chatitem := &amp;chatbetweenusers{text, user1}\n        log.Println(chatitem)\n\n        // format it to JSON!\n        b, err := json.Marshal(chatitem)\n        // conver JSON into string to return from Martini\n        s := string(b[:])\n        buffer.WriteString(s)\n    }\n\nreturn buffer.String()\n})\n</code></pre>\n\n<p>What happens when I composite other data in JSON? \nI tried all that is possible, but this is doesn't work properly.</p>\n"}, {"tags": ["go", "webserver", "updates"], "answers": [{"comments": [{"owner": {"reputation": 3812, "user_id": 3085985, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/888a12312ba45899c6c6f1eb409930c6?s=128&d=identicon&r=PG&f=1", "display_name": "Compufreak", "link": "https://stackoverflow.com/users/3085985/compufreak"}, "edited": false, "score": 1, "creation_date": 1420308932, "post_id": 27756985, "comment_id": 43926600, "body": "That pointed me into the right direction. 2 links I found and that will probably be helpful are : <a href=\"https://github.com/mailgun/manners\" rel=\"nofollow noreferrer\">github.com/mailgun/manners</a> (graceful shutdown) and maybe <a href=\"https://github.com/rcrowley/goagain\" rel=\"nofollow noreferrer\">github.com/rcrowley/goagain</a> (No-downtime-restart)."}, {"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "reply_to_user": {"reputation": 3812, "user_id": 3085985, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/888a12312ba45899c6c6f1eb409930c6?s=128&d=identicon&r=PG&f=1", "display_name": "Compufreak", "link": "https://stackoverflow.com/users/3085985/compufreak"}, "edited": false, "score": 1, "creation_date": 1420310026, "post_id": 27756985, "comment_id": 43926953, "body": "@Compufreak manners looks nice. I don&#39;t think I&#39;d use goagain personally, but rather Einhorn or the LB approach (which I&#39;m using currently)."}], "tags": [], "owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "is_accepted": true, "score": 1, "last_activity_date": 1420303309, "last_edit_date": 1420303309, "creation_date": 1420302921, "answer_id": 27756985, "question_id": 27756705, "link": "https://stackoverflow.com/questions/27756705/best-practice-for-updating-go-web-application/27756985#27756985", "title": "Best practice for updating Go web application", "body": "<p>It's not just an issue with Go, but in general we can divide the problem into two separate ones:</p>\n\n<ol>\n<li><p>Making sure current requests do not get terminated and affect user experience.</p></li>\n<li><p>Making sure there is no down-time in which new requests cannot be handled. </p></li>\n</ol>\n\n<p>The first one is easier to tackle: You just don't violently kill your server, but tell it to exit, causing a \"Drain phase\", in which it does not accept new requests and only finishes the currently running requests, and exits. This can be done by listening on signals for example, and entering the app into a special state. </p>\n\n<p>It's not trivial with Go as the default http server doesn't support shutting it down, but you can start a server with a <code>net.Listener</code>, and then keep a reference to it an close it when the time is due.</p>\n\n<p>Now, doing only approach one and then starting the service again will cause new requests not to be accepted while this is going on, and we all know this can take a number of seconds in extreme cases.</p>\n\n<p>So what we need is another instance of the server already running with the new code, the instant the old one is not responding to new requests, right? That can be done in several ways:</p>\n\n<ol>\n<li><p>Having more than one server, and a load-balancer on top of them, allowing one (or more) server to take the load while we restart another. That's the simplest way, and the way most people do it. If you need N servers to take the load of your users, just keep N+1 and restart one at a time.</p></li>\n<li><p>Using socket sharing tricks. In Newer Linux kernels, Many processes can listen and accept on the same port. What you do is simply start the new instance and then tell the old one to finish and exit. This way there is no pause. This is done by setting <code>SO_REUSEPORT</code> on the listening socket.</p></li>\n<li><p>The above can be automated with ready to ship solutions, like Einhorn, that deals with all the details for you, see <a href=\"https://github.com/stripe/einhorn\" rel=\"nofollow\">https://github.com/stripe/einhorn</a></p></li>\n<li><p>Another approach is documented in this blog post: <a href=\"http://blog.nella.org/?p=879\" rel=\"nofollow\">http://blog.nella.org/?p=879</a></p></li>\n</ol>\n"}], "owner": {"reputation": 3812, "user_id": 3085985, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/888a12312ba45899c6c6f1eb409930c6?s=128&d=identicon&r=PG&f=1", "display_name": "Compufreak", "link": "https://stackoverflow.com/users/3085985/compufreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 2, "accepted_answer_id": 27756985, "answer_count": 1, "score": 1, "last_activity_date": 1420303309, "creation_date": 1420301023, "question_id": 27756705, "link": "https://stackoverflow.com/questions/27756705/best-practice-for-updating-go-web-application", "title": "Best practice for updating Go web application", "body": "<p>I am wondering what would be the best practice for deploying updates to a (MVC) Go web application. Imagine the following scenario :</p>\n\n<p>1) Code and test some changes for my Go Web Application</p>\n\n<p>2) Deploy update without anyone currently using the previous version getting interrupted.</p>\n\n<p>I don't know how to make sure point 2) can be covered - when somebody is sending a request to the server and I rebuild/restart it just in this moment, he gets an error - even if the request just uses a part of the code I did not touch or that is backwards-compatible, or if I just added a new Request-handler. </p>\n\n<p>Maybe I'm missing something trivial or a well-known pattern as I am just in the process of learning go and my previous web applications were ASP.NET- or php-applications where this was no issue as I did not need to restart the webserver on code changes.</p>\n"}, {"tags": ["interface", "go", "mgo"], "comments": [{"owner": {"reputation": 3551, "user_id": 2137314, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LjaqW.jpg?s=128&g=1", "display_name": "siritinga", "link": "https://stackoverflow.com/users/2137314/siritinga"}, "edited": false, "score": 0, "creation_date": 1420302317, "post_id": 27755954, "comment_id": 43924438, "body": "I think that a slice of interfaces cannot match an slice of other types, even if the type match the interface. Take a look at this long post: <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/Il-tO1xtAyE\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/golang-nuts/Il-tO1xtAyE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "edited": false, "score": 0, "creation_date": 1420322784, "post_id": 27757312, "comment_id": 43931084, "body": "Okay - that would be another problem. But the compiler tells me that the function is undefined - which is just not correct ?"}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "reply_to_user": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "edited": false, "score": 0, "creation_date": 1420338215, "post_id": 27757312, "comment_id": 43934655, "body": "You&#39;ll need to share more code - namely, what type is <code>helper</code>?"}, {"owner": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "edited": false, "score": 0, "creation_date": 1420375974, "post_id": 27757312, "comment_id": 43941956, "body": "helper is a package containing the function IsInSlice."}, {"owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "reply_to_user": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "edited": false, "score": 0, "creation_date": 1420393145, "post_id": 27757312, "comment_id": 43947365, "body": "Honestly I&#39;m not sure. That&#39;s really bizarre."}], "tags": [], "owner": {"reputation": 16549, "user_id": 836390, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tNl4E.jpg?s=128&g=1", "display_name": "joshlf", "link": "https://stackoverflow.com/users/836390/joshlf"}, "is_accepted": false, "score": 0, "last_activity_date": 1420304824, "creation_date": 1420304824, "answer_id": 27757312, "question_id": 27755954, "link": "https://stackoverflow.com/questions/27755954/go-compile-error-undefined-function/27757312#27757312", "title": "Go compile error &quot;undefined function&quot;", "body": "<p>Your problem is that you're trying to use a value of type <code>[]models.Users{}</code> as a value of type <code>[]Identifiable</code>. While <code>models.Users</code> implements <code>Identifiable</code>, Go's type system is designed so that slices of values implementing an interface cannot be used as (or converted to) slices of the interface type.</p>\n\n<p>See the Go specification's <a href=\"http://golang.org/ref/spec#Conversions\" rel=\"nofollow\">section on conversions</a> for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "is_accepted": true, "score": 0, "last_activity_date": 1420662951, "creation_date": 1420662951, "answer_id": 27828179, "question_id": 27755954, "link": "https://stackoverflow.com/questions/27755954/go-compile-error-undefined-function/27828179#27828179", "title": "Go compile error &quot;undefined function&quot;", "body": "<p>Apparently, Go did not rebuild my package and was looking for the function in an old build. It was therefore undefined. Performing <code>rm -fr [GO-ROOT]/pkg/github.com/my/project/models</code> did the trick.</p>\n"}], "owner": {"reputation": 303, "user_id": 3090989, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1035450643/picture?type=large", "display_name": "Michel", "link": "https://stackoverflow.com/users/3090989/michel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 0, "accepted_answer_id": 27828179, "answer_count": 2, "score": -1, "last_activity_date": 1420662951, "creation_date": 1420295863, "question_id": 27755954, "link": "https://stackoverflow.com/questions/27755954/go-compile-error-undefined-function", "title": "Go compile error &quot;undefined function&quot;", "body": "<p>I have the following pieces of code:</p>\n\n<p><strong>Interface &amp; function definition:</strong></p>\n\n<pre><code>package helper\n\nimport \"gopkg.in/mgo.v2/bson\"\n\n// Defines an interface for identifiable objects\ntype Identifiable interface {\n    GetIdentifier() bson.ObjectId\n}\n\n// Checks if a slice contains a given object with a given bson.ObjectId\nfunc IsInSlice(id bson.ObjectId, objects []Identifiable) bool {\n    for _, single := range objects {\n        if single.GetIdentifier() == id {\n            return true\n        }\n    }\n    return false\n}\n</code></pre>\n\n<p><strong>The definition of the user struct which satisfies 'Identifiable':</strong></p>\n\n<pre><code>package models\n\nimport (\n    \"github.com/my/project/services\"\n    \"gopkg.in/mgo.v2/bson\"\n)\n\ntype User struct {\n    Id       bson.ObjectId   `json:\"_id,omitempty\" bson:\"_id,omitempty\"`\n    Username string          `json:\"username\" bson:\"username\"`\n    Email    string          `json:\"email\" bson:\"email\"`\n    Password string          `json:\"password\" bson:\"password\"`\n    Albums   []bson.ObjectId `json:\"albums,omitempty\" bson:\"albums,omitempty\"`\n    Friends  []bson.ObjectId `json:\"friends,omitempty\" bson:\"friends,omitempty\"`\n}\n\nfunc GetUserById(id string) (err error, user *User) {\n    dbConnection, dbCollection := services.GetDbConnection(\"users\")\n    defer dbConnection.Close()\n    err = dbCollection.Find(bson.M{\"_id\": bson.ObjectIdHex(id)}).One(&amp;user)\n    return err, user\n}\n\nfunc (u *User) GetIdentifier() bson.ObjectId {\n    return u.Id\n}\n</code></pre>\n\n<p><strong>A test which checks for the existence of an object inside a slice:</strong></p>\n\n<pre><code>package controllers\n\nimport ( \n    \"github.com/my/project/helper\"\n    \"gopkg.in/mgo.v2/bson\"\n)\n\n\nvar testerId = bson.NewObjectId()\nvar users = []models.Users{}\n\n/* Some code to get users from db */\n\nif !helper.IsInSlice(testerId, users) {\n    t.Fatalf(\"User is not saved in the database\")\n}\n</code></pre>\n\n<p>When I try to compile the test it I get the error: <code>undefined helper.IsInSlice</code>. When I rewrite the <code>IsInSlice</code> method to not take <code>[]Identifiable</code> but <code>[]models.User</code> it works fine.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["go"], "answers": [{"tags": [], "owner": {"reputation": 47884, "user_id": 164234, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6b34a2a81515583dc95e5c0809db06bb?s=128&d=identicon&r=PG", "display_name": "Nick Craig-Wood", "link": "https://stackoverflow.com/users/164234/nick-craig-wood"}, "is_accepted": true, "score": 4, "last_activity_date": 1420281749, "creation_date": 1420281749, "answer_id": 27753957, "question_id": 27753921, "link": "https://stackoverflow.com/questions/27753921/create-an-object-on-method/27753957#27753957", "title": "Create an object on method", "body": "<p>In this code you are creating a memory object, then throwing it away and creating another one which is rather inefficient.  You also aren't returning it.</p>\n\n<pre><code>s := new(SelfInitialisator)\ns.CreateObject()\n</code></pre>\n\n<p>The Go way would be to use a function to create your object, like this</p>\n\n<pre><code>func NewSelfInitialisator() *SelfInitialisator {\n    s := new(SelfInitialisator)\n    s.Fields1 = \"Hello\"\n    s.Fields2 = \"Foo\"\n    return s\n}\n</code></pre>\n\n<p>And call</p>\n\n<pre><code>s := NewSelfInitialisator()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1420293122, "post_id": 27753960, "comment_id": 43921762, "body": "What I want to do is with ServeHTTP as follow <a href=\"https://gist.github.com/kostonstyle/665f442703c29ef4dff1\" rel=\"nofollow noreferrer\">gist.github.com/kostonstyle/665f442703c29ef4dff1</a>. As you can see on the ServeHTTP method, it creates the own(controller) object like in a class based language, when I create an object on the static method."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 1, "last_activity_date": 1420281757, "creation_date": 1420281757, "answer_id": 27753960, "question_id": 27753921, "link": "https://stackoverflow.com/questions/27753921/create-an-object-on-method/27753960#27753960", "title": "Create an object on method", "body": "<p>It wouldn't mutate the receiver, only create another instance which would be lost at the end of CreateObject() call.<br>\nYou could use the receiver directly to initialize its content:</p>\n\n<pre><code>func (rcv *SelfInitialisator) CreateObject() {\n    rcv.Fields1 = \"Hello\"\n    rcv.Fields2 = \"Foo\"\n}\n</code></pre>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 27753957, "answer_count": 2, "score": 1, "last_activity_date": 1420281757, "creation_date": 1420281461, "question_id": 27753921, "link": "https://stackoverflow.com/questions/27753921/create-an-object-on-method", "title": "Create an object on method", "body": "<p>It is a bad code when I create a self obeject on the method? Like this(Look at the method Create)</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n)\n\ntype SelfInitialisator struct {\n    Fields1, Fields2 string\n}\n\nfunc (rcv *SelfInitialisator) Method1() {\n    fmt.Println(rcv.Fields1, rcv.Fields2)\n}\n\nfunc (rcv *SelfInitialisator) CreateObject() {\n    s := new(SelfInitialisator)\n    s.Fields1 = \"Hello\"\n    s.Fields2 = \"Foo\"\n}\n\nfunc main() {\n\n    s := new(SelfInitialisator)\n    s.CreateObject()\n\n}\n</code></pre>\n"}, {"tags": ["unix", "ubuntu", "command-line", "go", "terminal"], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 6, "last_activity_date": 1420277959, "last_edit_date": 1495542827, "creation_date": 1420277959, "answer_id": 27753471, "question_id": 27753395, "link": "https://stackoverflow.com/questions/27753395/how-to-run-golang-code-directly-from-terminal-command-line/27753471#27753471", "title": "How to run Go(lang) code directly from terminal/command line?", "body": "<p>In command-line, only a project like <a href=\"https://github.com/vito/go-repl\" rel=\"nofollow noreferrer\">go-repl</a> would compile/run a multi-line go source code without leaving any <code>.go</code> file behind.<br>\nAn alternative: <a href=\"https://github.com/sriram-srinivasan/gore\" rel=\"nofollow noreferrer\">gore</a>:</p>\n\n<pre><code>$ gore\nEnter one or more lines and hit ctrl-D\nfunc test() string {return \"hello\"}\nprintln(test())\n^D\n---------------------------------\nhello\n</code></pre>\n\n<p>(Other repl-like solution are listed in \"<a href=\"https://stackoverflow.com/q/8513609/6309\">Does Go provide REPL?</a>\")</p>\n\n<p>Or you would need to develop a go wrapper which would internally create a source code and go run it, before deleting it.</p>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 7047363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a4cda8321abd1a553445a95258babb?s=128&d=identicon&r=PG&f=1", "display_name": "muthukumar selvaraj", "link": "https://stackoverflow.com/users/7047363/muthukumar-selvaraj"}, "edited": false, "score": 0, "creation_date": 1517297762, "post_id": 27768209, "comment_id": 84026578, "body": "<code>go: missing Bazaar command</code> the above command throws me an error"}, {"owner": {"reputation": 1794, "user_id": 1662254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d01229ee764ab765fd8395ec6a2e50fe?s=128&d=identicon&r=PG", "display_name": "nover", "link": "https://stackoverflow.com/users/1662254/nover"}, "reply_to_user": {"reputation": 685, "user_id": 7047363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a4cda8321abd1a553445a95258babb?s=128&d=identicon&r=PG&f=1", "display_name": "muthukumar selvaraj", "link": "https://stackoverflow.com/users/7047363/muthukumar-selvaraj"}, "edited": false, "score": 0, "creation_date": 1582225475, "post_id": 27768209, "comment_id": 106713745, "body": "@muthukumarhelius You need to install the Bazaar version tool as Ubuntu hosts their gorun-code in a bzr repo. See more here: <a href=\"https://github.com/golang/go/wiki/GoGetTools\" rel=\"nofollow noreferrer\">github.com/golang/go/wiki/GoGetTools</a>"}], "tags": [], "owner": {"reputation": 8230, "user_id": 204313, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d561f2de0f27818ee920dbc9e4a8a4d?s=128&d=identicon&r=PG", "display_name": "Rick-777", "link": "https://stackoverflow.com/users/204313/rick-777"}, "is_accepted": false, "score": 1, "last_activity_date": 1420392101, "creation_date": 1420392101, "answer_id": 27768209, "question_id": 27753395, "link": "https://stackoverflow.com/questions/27753395/how-to-run-golang-code-directly-from-terminal-command-line/27768209#27768209", "title": "How to run Go(lang) code directly from terminal/command line?", "body": "<p>Ubuntu has a <code>gorun</code> tool which works well for small scripts. It compiles scripts on the fly, caching the binaries in /tmp.</p>\n\n<p><a href=\"https://wiki.ubuntu.com/gorun\" rel=\"nofollow\">https://wiki.ubuntu.com/gorun</a></p>\n\n<p>Although it's intended for scripting and not as a REPL, you could use it in various ways. </p>\n\n<p>Although <code>gorun</code> has come from the Ubuntu community, it should work on any Linux distro because it uses vanilla Go source code via</p>\n\n<pre><code>$ go get launchpad.net/gorun\n</code></pre>\n"}], "owner": {"reputation": 13460, "user_id": 1349754, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/QoNQ4.jpg?s=128&g=1", "display_name": "Timur Fayzrakhmanov", "link": "https://stackoverflow.com/users/1349754/timur-fayzrakhmanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15122, "favorite_count": 1, "accepted_answer_id": 27753471, "answer_count": 2, "score": 8, "last_activity_date": 1584195542, "creation_date": 1420277314, "question_id": 27753395, "link": "https://stackoverflow.com/questions/27753395/how-to-run-golang-code-directly-from-terminal-command-line", "title": "How to run Go(lang) code directly from terminal/command line?", "body": "<p>I want to run simple go code directly from terminal/command line. For example:</p>\n\n<pre><code>go run \"\npackage main\nfunc main() {\nprintln(\"hello\")\n}\n\"\nhello\n</code></pre>\n\n<p>However golang allows code execution only from file. So maybe there are some ways how to emulate it? Like this:</p>\n\n<pre><code>go run file.go &lt; echo \"....\"\n</code></pre>\n\n<p>But there should be no files after actions above.</p>\n"}, {"tags": ["mongodb", "go", "mgo"], "comments": [{"owner": {"reputation": 17441, "user_id": 1617024, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BtSF5.jpg?s=128&g=1", "display_name": "BatScream", "link": "https://stackoverflow.com/users/1617024/batscream"}, "edited": false, "score": 0, "creation_date": 1420273976, "post_id": 27753027, "comment_id": 43917022, "body": "Please update your question with a specific use case that you find not solvable, the desired output, and what you have tried. Otherwise your question is too broad and you will find <a href=\"http://docs.mongodb.org/manual/reference/operator/aggregation/setIsSubset/\" rel=\"nofollow noreferrer\">docs.mongodb.org/manual/reference/operator/aggregation/&hellip;</a>, as a starting point."}, {"owner": {"reputation": 11, "user_id": 2732291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1843e8fc0c54d59d9a768ff0ea5731c?s=128&d=identicon&r=PG&f=1", "display_name": "admirestator", "link": "https://stackoverflow.com/users/2732291/admirestator"}, "reply_to_user": {"reputation": 17441, "user_id": 1617024, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/BtSF5.jpg?s=128&g=1", "display_name": "BatScream", "link": "https://stackoverflow.com/users/1617024/batscream"}, "edited": false, "score": 1, "creation_date": 1420274932, "post_id": 27753027, "comment_id": 43917184, "body": "@BatScream Actually I came from the same link you have just posted,I quoted the sample.What I want to know is how to construct the same pipeline in golang <b>with mgo</b>."}], "owner": {"reputation": 11, "user_id": 2732291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1843e8fc0c54d59d9a768ff0ea5731c?s=128&d=identicon&r=PG&f=1", "display_name": "admirestator", "link": "https://stackoverflow.com/users/2732291/admirestator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420273274, "creation_date": 1420273274, "question_id": 27753027, "link": "https://stackoverflow.com/questions/27753027/how-to-construct-aggregation-of-setissubset-with-mgo", "title": "How to construct aggregation of $setIsSubset with mgo", "body": "<p>I tried to construct a pipeline with mgo, but I have no idea about how to use <strong>$setIsSubset</strong> operator.</p>\n\n<p>Here is the example from mongodb doc shows the usage of <strong>$setIsSubSet</strong>.\nIs there anyone who can give me some tips? :-)</p>\n\n<pre><code>&lt;code&gt;\n\ndb.experiments.aggregate(\n   [\n       {$project: {A:1, B:1,AisSubset: {$setIsSubset: [\"$A\", \"$B\"]}, _id:0 }}\n   ]\n)\n\n&lt;/code&gt;\n</code></pre>\n\n<p><a href=\"http://docs.mongodb.org/manual/reference/operator/aggregation/setIsSubset\" rel=\"nofollow\">mongodb doc</a></p>\n"}, {"tags": ["jquery", "twitter-bootstrap", "go", "typeahead.js", "bootstrap-typeahead"], "comments": [{"owner": {"reputation": 3111, "user_id": 455678, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ec6689b267447cdcd58fbe5d89332b25?s=128&d=identicon&r=PG", "display_name": "Lander", "link": "https://stackoverflow.com/users/455678/lander"}, "edited": false, "score": 0, "creation_date": 1420276374, "post_id": 27752516, "comment_id": 43917435, "body": "Shouldn&#39;t your URL be <code>&#47;public&#47;js&#47;countries.json</code>? Also do you get any kind of error in the developer console?"}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "reply_to_user": {"reputation": 3111, "user_id": 455678, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ec6689b267447cdcd58fbe5d89332b25?s=128&d=identicon&r=PG", "display_name": "Lander", "link": "https://stackoverflow.com/users/455678/lander"}, "edited": false, "score": 0, "creation_date": 1420278997, "post_id": 27752516, "comment_id": 43917983, "body": "ah yea, I&#39;ve updated the post with the errors."}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "reply_to_user": {"reputation": 3111, "user_id": 455678, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ec6689b267447cdcd58fbe5d89332b25?s=128&d=identicon&r=PG", "display_name": "Lander", "link": "https://stackoverflow.com/users/455678/lander"}, "edited": false, "score": 0, "creation_date": 1420280231, "post_id": 27752516, "comment_id": 43918334, "body": "@lander when I changed the URL to /public/js/countries.json I had these extra errors:  Resource interpreted as Script but transferred with MIME type text/html: &quot;<a href=\"http://localhost:8080/[absolute\" rel=\"nofollow noreferrer\">localhost:8080/[absolute</a> path to]/hello/public/js/form.js&quot;. localhost/:11 Resource interpreted as Script but transferred with MIME type text/html: &quot;<a href=\"http://localhost:8080/[absolute\" rel=\"nofollow noreferrer\">localhost:8080/[absolute</a> path to]/hello/public/js/typeahead.min.js&quot;."}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "reply_to_user": {"reputation": 3111, "user_id": 455678, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ec6689b267447cdcd58fbe5d89332b25?s=128&d=identicon&r=PG", "display_name": "Lander", "link": "https://stackoverflow.com/users/455678/lander"}, "edited": false, "score": 0, "creation_date": 1420280316, "post_id": 27752516, "comment_id": 43918358, "body": "actually its the same either way I write it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 959919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb257337b0d2ef48eeb23e5dccaac22?s=128&d=identicon&r=PG", "display_name": "namochan", "link": "https://stackoverflow.com/users/959919/namochan"}, "reply_to_user": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420280679, "post_id": 27753753, "comment_id": 43918458, "body": "If you start the service with something like http.FileServer(http.Dir(&quot;public&quot;)), the html should refer to &quot;/js&quot; , not &quot;/public/js&quot;."}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420280990, "post_id": 27753753, "comment_id": 43918538, "body": "I started the service with http.FileServer(http.Dir(&quot;[absolute path to]/public/js&quot;)). Will that make a difference?"}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420281078, "post_id": 27753753, "comment_id": 43918567, "body": "I set the http header to Content-type: application/javascript and that resolved the error. But I now only see the html code on the web page."}, {"owner": {"reputation": 1, "user_id": 959919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb257337b0d2ef48eeb23e5dccaac22?s=128&d=identicon&r=PG", "display_name": "namochan", "link": "https://stackoverflow.com/users/959919/namochan"}, "reply_to_user": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420281400, "post_id": 27753753, "comment_id": 43918659, "body": "Take this for example:   <a href=\"http://golang.org/pkg/net/http/#example_FileServer\" rel=\"nofollow noreferrer\">golang.org/pkg/net/http/#example_FileServer</a>   If the &quot;public&quot; folder has a index.html, it will be served on the top level. HTML is rendered in the browser, and it will not have access anywhere else than the public folder.   All the browser sees is the folder, starting from &quot;/&quot;. So your &quot;[ABSOLUTE_PATH]/project/public/js/script.js&quot; should be &quot;/js/script.js&quot; in the HTML file."}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420281609, "post_id": 27753753, "comment_id": 43918711, "body": "alright, I&#39;ve changed it them to /js/script.js already but I still see HTML code on the page."}, {"owner": {"reputation": 1, "user_id": 959919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb257337b0d2ef48eeb23e5dccaac22?s=128&d=identicon&r=PG", "display_name": "namochan", "link": "https://stackoverflow.com/users/959919/namochan"}, "reply_to_user": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420283313, "post_id": 27753753, "comment_id": 43919121, "body": "I think you set the content type to javascript for all server files, that would make the browser show the html file as plain-text and not include the .js file, thus getting rid of the error."}, {"owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "edited": false, "score": 0, "creation_date": 1420285311, "post_id": 27753753, "comment_id": 43919604, "body": "ahh what should I do then??"}], "tags": [], "owner": {"reputation": 1, "user_id": 959919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb257337b0d2ef48eeb23e5dccaac22?s=128&d=identicon&r=PG", "display_name": "namochan", "link": "https://stackoverflow.com/users/959919/namochan"}, "is_accepted": false, "score": 0, "last_activity_date": 1420280363, "last_edit_date": 1420280363, "creation_date": 1420280029, "answer_id": 27753753, "question_id": 27752516, "link": "https://stackoverflow.com/questions/27752516/go-and-typeahead-js-integration/27753753#27753753", "title": "Go and Typeahead js integration", "body": "<p>The error you're getting about \"&lt;\" in typeahead.min.js:1 sounds like your backend is returning html instead of javascript.</p>\n\n<p>You might want to check your routes.</p>\n\n<p>You didn't show hello.go, so this is just a guess, but I think the path in html should be \"/js/...\", not an absolute path.</p>\n"}], "owner": {"reputation": 3424, "user_id": 3918985, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4349dc6a41c144c486e982afb327fca7?s=128&d=identicon&r=PG&f=1", "display_name": "user3918985", "link": "https://stackoverflow.com/users/3918985/user3918985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1195, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1420281286, "creation_date": 1420268043, "last_edit_date": 1420281286, "question_id": 27752516, "link": "https://stackoverflow.com/questions/27752516/go-and-typeahead-js-integration", "title": "Go and Typeahead js integration", "body": "<p>I'm trying to integrate typeahead.js with my Go program. It doesn't seem to be working. Here's what I have so far:</p>\n\n<p>Directory Structure:</p>\n\n<pre><code>/hello/\n  public/\n    js/\n      countries.json\n      form.js\n      typeahead.min.js\n\n  templates/\n    form.html\n\n  hello.go\n</code></pre>\n\n<p>countries.json:</p>\n\n<pre><code>[\"Andorra\",\"United Arab Emirates\",\"Afghanistan\",\"Antigua and Barbuda\",\"Anguilla\"]\n</code></pre>\n\n<p>form.js</p>\n\n<pre><code>var countries = new Bloodhound({\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),\n    queryTokenizer: Bloodhound.tokenizers.whitespace,\n    limit: 10,\n    prefetch: {\n       url: 'hello/public/js/countries.json',\n       filter: function(list) {\n       return $.map(list, function(country) { return { name: country }; });\n       }\n    }\n});\ncountries.initialize();\n\n$('#prefetch .typeahead').typeahead(null, {\n   name: 'countries',\n   displayKey: 'name',\n   source: countries.ttAdapter()\n});\n</code></pre>\n\n<p>typeahead.min.js:</p>\n\n<p>The contents from <code>http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.min.js</code></p>\n\n<p>form.html</p>\n\n<pre><code>&lt;html&gt;\n\n  &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css\"&gt;\n\n  &lt;script src=\"//code.jquery.com/jquery-1.11.2.min.js\"&gt;&lt;/script&gt;\n  &lt;script src=\"//code.jquery.com/jquery-migrate-1.2.1.min.js\"&gt;&lt;/script&gt;\n\n  &lt;script src=\"[absolute path to]/hello/public/js/form.js\"&gt;&lt;/script&gt;\n  &lt;script src=\"[absolute path to]/hello/public/js/typeahead.min.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\"&gt;&lt;/script&gt;\n\n  &lt;body&gt;            \n    &lt;form method=\"post\" action=\"/join\" id=\"loginForm\"&gt;\n\n        &lt;div id=\"prefetch\"&gt;\n          &lt;input class=\"typeahead\" type=\"text\" placeholder=\"Countries\"&gt;\n        &lt;/div&gt;\n\n        &lt;button type=\"submit\"&gt;Join&lt;/button&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>File server in hello.go:</p>\n\n<p>http.Handle(\"/public/js/\", http.StripPrefix(\"/public/js\", http.FileServer(http.Dir(filepath.Join(cwd, \"/github.com/hello/hello/public/js\")))))</p>\n\n<p>Error in console:</p>\n\n<p><code>Uncaught SyntaxError: Unexpected token &lt;</code>\n<code>typeahead.min.js:1 Uncaught SyntaxError: Unexpected token &lt;</code></p>\n\n<p>I've referenced:</p>\n\n<p><a href=\"http://runnable.com/UlXgeluakNULAAAv/create-an-autocomplete-input-box-with-typeahead-js-for-jquery-and-javascript\" rel=\"nofollow\">http://runnable.com/UlXgeluakNULAAAv/create-an-autocomplete-input-box-with-typeahead-js-for-jquery-and-javascript</a>\n<a href=\"http://plugins.upbootstrap.com/bootstrap-ajax-typeahead/\" rel=\"nofollow\">http://plugins.upbootstrap.com/bootstrap-ajax-typeahead/</a></p>\n\n<p>I've been trying to figure this out for a while now. I can see the form display and it seems like bootstrap and jquery are being imported from the CDN but there is no drop down auto complete suggestions. </p>\n\n<p>I'll really appreciate help!! Or let me know if you need anymore information. Thanks!</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 17491, "user_id": 901827, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86a6acccf7e8dbe398ebda4f8524ed50?s=128&d=identicon&r=PG", "display_name": "LinearZoetrope", "link": "https://stackoverflow.com/users/901827/linearzoetrope"}, "edited": false, "score": 1, "creation_date": 1420286504, "post_id": 27751346, "comment_id": 43919929, "body": "Honestly, I&#39;d just use a normal &quot;+=&quot; and downslice unless profiling proved it was a bottleneck."}, {"owner": {"reputation": 3829, "user_id": 1146334, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/cL3do.png?s=128&g=1", "display_name": "FuriousGeorge", "link": "https://stackoverflow.com/users/1146334/furiousgeorge"}, "edited": false, "score": 0, "creation_date": 1420300539, "post_id": 27751346, "comment_id": 43923938, "body": "Yah, it&#39;s just odd that there&#39;s no m.Keys() to be able to provide to the strings.Join, especially given that you can <code>range</code> iterate over the map."}, {"owner": {"reputation": 3551, "user_id": 2137314, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LjaqW.jpg?s=128&g=1", "display_name": "siritinga", "link": "https://stackoverflow.com/users/2137314/siritinga"}, "edited": false, "score": 0, "creation_date": 1420321215, "post_id": 27751346, "comment_id": 43930660, "body": "Go doesn&#39;t have many syntactic sugars. It can be done in four lines."}, {"owner": {"reputation": 1169, "user_id": 451246, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/k8Nkj.jpg?s=128&g=1", "display_name": "Ehsan Kia", "link": "https://stackoverflow.com/users/451246/ehsan-kia"}, "edited": false, "score": 0, "creation_date": 1544228201, "post_id": 27751346, "comment_id": 94214627, "body": "Well, this merged with the fact that Golang doesn&#39;t have real sets. this means that something as simple as &#39;|&#39;.join(set(list)) in python becomes: create map[string]struct{}, loop to fill it up, create []string, loop to fill it up, call strings.Join. So one line turned into two loops and 10 lines."}], "tags": [], "owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "is_accepted": true, "score": 10, "last_activity_date": 1420254916, "last_edit_date": 1420254916, "creation_date": 1420254491, "answer_id": 27751346, "question_id": 27750982, "link": "https://stackoverflow.com/questions/27750982/join-map-keys-in-golang/27751346#27751346", "title": "Join map keys in golang", "body": "<p>Most of the time, I'd just write the obvious code:</p>\n\n<pre><code>func KeysString(m map[string]bool) string {\n    keys := make([]string, 0, len(m))\n    for k := range m {\n        keys = append(keys, k)\n    }\n    return \"[\" + strings.Join(keys, \", \") + \"]\"\n}\n</code></pre>\n\n<p>If you need efficiency more than readability, you can look at the implementation of <a href=\"http://golang.org/src/strings/strings.go?s=9356:9396#L372\"><code>strings.Join</code></a> for an idea on how to write this minimising copies. The main difference between this and your code is that a <code>[]byte</code> of exactly the right length is constructed which prevents the data being copied around when the buffer has to resize as the result is getting built up.</p>\n\n<pre><code>func KeysString(m map[string]bool) string {\n    if len(m) == 0 {\n        return \"[]\"\n    }\n    n := 2 * len(m)  // (len-1) commas (\", \"), and one each of \"[\" and \"]\".\n    for k := range m {\n        n += len(k)\n    }\n    b := make([]byte, n)\n    bp := copy(b, \"[\")\n    first := true\n    for k := range m {\n        if !first {\n            bp += copy(b[bp:], \", \")\n        }\n        bp += copy(b[bp:], k)\n        first = false\n    }\n    bp += copy(b[bp:], \"]\")\n    return string(b)\n}\n</code></pre>\n\n<p>Of course, be sure to profile and optimise in the context of the code you're using this function to make sure the readability tradeoff is actually worth it.</p>\n"}], "owner": {"reputation": 3829, "user_id": 1146334, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/cL3do.png?s=128&g=1", "display_name": "FuriousGeorge", "link": "https://stackoverflow.com/users/1146334/furiousgeorge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12905, "favorite_count": 0, "accepted_answer_id": 27751346, "answer_count": 1, "score": 5, "last_activity_date": 1420254916, "creation_date": 1420250253, "question_id": 27750982, "link": "https://stackoverflow.com/questions/27750982/join-map-keys-in-golang", "title": "Join map keys in golang", "body": "<p>I want to join all of the keys of a map into a single string of the form [k1, k2, ...].  I'm not overly concerned with the order, just that I can make the string.  I know that there is the function <code>strings.Join()</code> but it takes in a <code>[]string</code> and not a <code>map[string]bool</code>.</p>\n\n<p>I want to do this in the most efficient/fastest way possible (i.e. I don't want to create an entire copy of the keys just so I can slice over it).  I couldn't find a way to just get a slice of the map's keys, so I came up with the following function instead.  Obviously it's not the greatest because it does an unnecessary write and trunc. </p>\n\n<p>Is there a way to just slice over the map keys?</p>\n\n<pre><code>func CreateStringArray(myMap map[string]bool) string {\n    if myMap == nil || len(myMap) == 0 {\n        return \"[ ]\"\n    }\n\n    buf := bytes.NewBufferString(\"[\")\n\n    for k, _ := range myMap {\n        buf.WriteString(k)\n        buf.WriteString(\", \")\n    }\n\n    buf.Truncate(buf.Len() - 2)\n    buf.WriteString(\"]\")\n\n    return buf.String()\n}\n</code></pre>\n"}, {"tags": ["pointers", "struct", "go"], "comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 0, "creation_date": 1420235357, "post_id": 27748718, "comment_id": 43909235, "body": "<code>type base.Controller is not an expression</code>, means you need an instance of something there, not the type."}], "answers": [{"comments": [{"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1420235206, "post_id": 27748758, "comment_id": 43909188, "body": "You can only access embedded fields by their type name, and type names can&#39;t have selectors. Only <code>rcv.Controller</code> could work."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 1, "creation_date": 1420235322, "post_id": 27748758, "comment_id": 43909225, "body": "@JimB indeed. I have edited the answer accordingly. I should have known since I used a similar example in <a href=\"http://stackoverflow.com/a/27733969/6309\">stackoverflow.com/a/27733969/6309</a> yesterday."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 3, "last_activity_date": 1420235257, "last_edit_date": 1420235257, "creation_date": 1420233987, "answer_id": 27748758, "question_id": 27748718, "link": "https://stackoverflow.com/questions/27748718/how-to-share-embedded-struct-pointer/27748758#27748758", "title": "How to share embedded struct pointer", "body": "<p>You can try referencing the anonymous field by mentioning the instance of the parent class:</p>\n\n<pre><code>rcv.Controller\n</code></pre>\n\n<p>(since the \"name\" of an anonymous field is the same as the type of the field)</p>\n\n<p>See a similar example in:</p>\n\n<ul>\n<li>\"<a href=\"http://golangtutorials.blogspot.fr/2011/06/anonymous-fields-in-structs-like-object.html\" rel=\"nofollow\">Anonymous fields in structs - like object composition</a>\",</li>\n<li>\"<a href=\"http://golangtutorials.blogspot.fr/2011/06/methods-on-structs.html\" rel=\"nofollow\">Methods on structs</a>\".</li>\n</ul>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 2, "accepted_answer_id": 27748758, "answer_count": 1, "score": 2, "last_activity_date": 1420235257, "creation_date": 1420233737, "question_id": 27748718, "link": "https://stackoverflow.com/questions/27748718/how-to-share-embedded-struct-pointer", "title": "How to share embedded struct pointer", "body": "<p>I have following code:</p>\n\n<p>A struct controller, that have anonymous fields.</p>\n\n<pre><code>type controller struct {\n    *base.Controller\n    store *data\n}\n</code></pre>\n\n<p>As you can see, *base.Controller is anonymous fields pointer.\nThen a second struct that composed with *base.Controller too.</p>\n\n<pre><code>type expiredError struct {\n    *base.Controller\n    local string\n}\n</code></pre>\n\n<p>I initialized the controller struct as follow:</p>\n\n<pre><code>c := &amp;controller{base.New(rw, r, false, \"controller/account\"), nil}\nc.Title = \"Activate account\"\nc.serve()\n</code></pre>\n\n<p>The base.Controller on controller is initialize with base.New() function.</p>\n\n<p>Now I have on controller methods, that initialize the expiredError struct and it should share the pointer of base.Controller to base.Controller of expiredError too.</p>\n\n<pre><code>func (rcv *controller) validate() error {\n\n    ....\n\n    // If time for activating account is expired\n    if time.Now().Unix() &gt; rcv.store.Expired {\n        // Delete registered user from neo4j\n        maccount.Delete(rcv.store.Email, rcv.Local)\n\n        return &amp;expiredError{base.Controller, rcv.Local}\n    }\n\n    return nil\n}\n</code></pre>\n\n<p>I've got here a compiler error</p>\n\n<pre><code>type base.Controller is not an expression\n</code></pre>\n"}, {"tags": ["data-structures", "go", "tree", "garbage-collection", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420234342, "post_id": 27748418, "comment_id": 43908882, "body": "Interesting. Low-hanging: I think it&#39;s at least worth looking at object slices instead of pointer slices, which would remove another layer of pointers for the GC to trace through, though that impacts a lot of code. You could test on one type, maybe NodeToken, and see if it helps, and only then try it more broadly."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420234646, "post_id": 27748418, "comment_id": 43908987, "body": "In terms of hairier stuff stuff, yes, storing indices into slices could help--you&#39;re essentially managing your own memory then. If the memory management isn&#39;t too complicated (you don&#39;t want to free and reuse nodes, say), that could work. If stuff is immutable or almost so I can see it working, if not, beware."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420235017, "post_id": 27748418, "comment_id": 43909115, "body": "Oh, interesting combination: maybe you could allocate largish flat slices of each type (&quot;chunks&quot;), and nodes&#39; <code>[]NodeSelectorGroup</code>s etc. are <i>subslices of those chunks</i>. One constraint that imposes is that, say, a single ruleset&#39;s <code>SelectorGroup</code>s all share a &quot;chunk&quot;, which probably involves wasting a little RAM when you need 10 selector groups but the current chunk only has room for 5. But it avoids some small allocations and layers of pointers without forcing you to store indices all over the place."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1420235245, "post_id": 27748418, "comment_id": 43909205, "body": "But don&#39;t feel guilty if it&#39;s taking 1s to minify Bootstrap or something. You could move forward with code that&#39;s easy to work with, and think about high-level optimizations instead, like parallelizing some hard parts or figuring out how to only re-minify the differences when a file changes slightly from the previous version. Or maybe how it is &quot;feels inefficient&quot; but is fine. Or you have RAM to spare and can set GOGC=500. Goal is to make the users happy, whether we make the GC happy or not."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1420235360, "post_id": 27748418, "comment_id": 43909237, "body": "Ack, finally: memprofile. Sounds like you know that GC is taking a while, and AST operations are a plausible candidate for it, but might as well rule out something wacky like string processing being the real hidden culprit."}, {"owner": {"reputation": 1582, "user_id": 3486065, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/EozB4.png?s=128&g=1", "display_name": "Taco de Wolff", "link": "https://stackoverflow.com/users/3486065/taco-de-wolff"}, "reply_to_user": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1420240664, "post_id": 27748418, "comment_id": 43910843, "body": "Thanks twotwotwo, I did some memory profiling and removed the []byte -&gt; string conversions and saved 10%. After all I don&#39;t think it&#39;s worth the hassle to flatten the tree, but it was a nice brain exercise ;)"}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 1, "creation_date": 1420240787, "post_id": 27748418, "comment_id": 43910877, "body": "Nice. w00t that you were already doing Bootstrap in .028s! :)"}], "owner": {"reputation": 1582, "user_id": 3486065, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/EozB4.png?s=128&g=1", "display_name": "Taco de Wolff", "link": "https://stackoverflow.com/users/3486065/taco-de-wolff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420240518, "creation_date": 1420232045, "last_edit_date": 1420240518, "question_id": 27748418, "link": "https://stackoverflow.com/questions/27748418/performance-suggestions-for-trees-and-the-gc", "title": "Performance suggestions for trees and the GC", "body": "<p>In my attempt to create a CSS3 parser (<a href=\"https://github.com/tdewolff/css\" rel=\"nofollow\">https://github.com/tdewolff/css</a>) for my minification library, I'm in the process of optimizing the tokenizer, parser and minifier. The tokenizer is pretty fast but I believe the parser could be optimized.</p>\n\n<p>The parser processes the tokens and generates a tree of nodes representing the syntax. All nodes satisfy this interface:</p>\n\n<pre><code>type Node interface {\n    Type() NodeType\n    String() string\n}\n</code></pre>\n\n<p>Example nodes (see <a href=\"https://github.com/tdewolff/css/blob/master/node.go\" rel=\"nofollow\">https://github.com/tdewolff/css/blob/master/node.go</a>):</p>\n\n<pre><code>// root\ntype NodeStylesheet struct {\n    NodeType\n    Nodes []Node\n}\n\n// example node\ntype NodeRuleset struct {\n    NodeType\n    SelGroups []*NodeSelectorGroup\n    Decls     []*NodeDeclaration\n}\n\n// leave (the only end-leave possible)\ntype NodeToken struct {\n    NodeType\n    TokenType\n    Data string\n}\n</code></pre>\n\n<p>Parsing stylesheet (see <a href=\"https://github.com/tdewolff/css/blob/master/parse.go\" rel=\"nofollow\">https://github.com/tdewolff/css/blob/master/parse.go</a>):</p>\n\n<pre><code>func (p *parser) parseStylesheet() *NodeStylesheet {\n    n := NewStylesheet()\n    for {\n        p.skipWhitespace()\n        if p.at(ErrorToken) {\n            return n\n        }\n        if p.at(CDOToken) || p.at(CDCToken) {\n            n.Nodes = append(n.Nodes, p.shift())\n        } else if cn := p.parseAtRule(); cn != nil {\n            n.Nodes = append(n.Nodes, cn)\n        } else if cn := p.parseRuleset(); cn != nil {\n            n.Nodes = append(n.Nodes, cn)\n        } else if cn := p.parseDeclaration(); cn != nil {\n            n.Nodes = append(n.Nodes, cn)\n        } else if !p.at(ErrorToken) {\n            n.Nodes = append(n.Nodes, p.shift())\n        }\n    }\n}\n</code></pre>\n\n<p>Each node is allocated on the heap and a significant time is spent on the GC and related tasks. Could I reduce that?</p>\n\n<p>Can I put all element in a flat array for instance? Because the elements of the tree are filled sequentially (ie. it can be flattened). What techniques can I use to reduce (small) allocations on the heap?</p>\n\n<h2>Update</h2>\n\n<p>The minifier is actually not really slow, bootstrap (134kB) is minified in 28ms (NodeJS implementations take atleast 45ms and produce larger files <a href=\"http://goalsmashers.github.io/css-minification-benchmark/\" rel=\"nofollow\">http://goalsmashers.github.io/css-minification-benchmark/</a>). But it would be great if I could squeeze out even more!</p>\n\n<p>I know that some time is spent on <code>[]byte</code> -> <code>string</code> casting, but the <code>[]byte</code> from the tokenizer needs to be copied anyways because its memory can be reused at any <code>tokenizer.Next()</code> call. Since it needs to be copied anyways, I figured casting to string was better because it made much of the code easier (checking for equality).</p>\n\n<p>I can make a tokenizer variant that keeps the whole file in memory, which is fine for the parser because the parser doesn't stream anyways.</p>\n\n<h2>Update 2</h2>\n\n<p>I did load the whole file into memory for the parser and replaced all <code>string</code> to '[]byte`, now it's 10% faster! Bootstrap.css now takes 23ms.</p>\n\n<p>I don't think it's worth the hassle to flatten the tree, and it removes some of the flexibility (user able to modify the tree).</p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1420227478, "post_id": 27747571, "comment_id": 43906231, "body": "As in copying a slice to an array? <a href=\"http://stackoverflow.com/a/21399657/6309\">stackoverflow.com/a/21399657/6309</a>"}, {"owner": {"reputation": 11281, "user_id": 260805, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/34e031251528689dd8f8039fef24a65f?s=128&d=identicon&r=PG", "display_name": "Ztyx", "link": "https://stackoverflow.com/users/260805/ztyx"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1420227721, "post_id": 27747571, "comment_id": 43906338, "body": "No. I prefer to not copy. Added that to question."}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 2, "creation_date": 1420228991, "post_id": 27747571, "comment_id": 43906854, "body": "Not convertible without <code>unsafe</code>. The slice header itself is 24 bytes on amd64 and is copied to the stack when <code>hex.DecodeString</code> returns, and hashing itself is going to be far, far more expensive than copying a 16-byte result; I&#39;d pick your battles and not worry too much about this one."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1420249326, "post_id": 27747938, "comment_id": 43912873, "body": "Notice that you can usually make sure that data you receive ends up in an array variable by slicing the array variable (e.g. <code>foo[:]</code>). This is useful when you want to actually use arrays for performance reasons but you still want to <code>Read()</code> and <code>Write()</code> into them."}], "tags": [], "owner": {"reputation": 43554, "user_id": 727643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIm6q.jpg?s=128&g=1", "display_name": "Stephen Weinberg", "link": "https://stackoverflow.com/users/727643/stephen-weinberg"}, "is_accepted": true, "score": 12, "last_activity_date": 1420229709, "last_edit_date": 1420229709, "creation_date": 1420229323, "answer_id": 27747938, "question_id": 27747571, "link": "https://stackoverflow.com/questions/27747571/how-can-i-convert-from-byte-to-16byte/27747938#27747938", "title": "How can I convert from []byte to [16]byte?", "body": "<p>There is no direct method to convert a slice to an array. You can however do a copy.</p>\n\n<pre><code>var ret [16]byte\ncopy(ret[:], b)\n</code></pre>\n\n<p>The standard library uses []byte and if you insist on using something else you will just have a lot more typing to do. I wrote a program using arrays for my md5 values and regretted it.</p>\n"}], "owner": {"reputation": 11281, "user_id": 260805, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/34e031251528689dd8f8039fef24a65f?s=128&d=identicon&r=PG", "display_name": "Ztyx", "link": "https://stackoverflow.com/users/260805/ztyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 2, "accepted_answer_id": 27747938, "answer_count": 1, "score": 4, "last_activity_date": 1420229709, "creation_date": 1420227350, "last_edit_date": 1420227743, "question_id": 27747571, "link": "https://stackoverflow.com/questions/27747571/how-can-i-convert-from-byte-to-16byte", "title": "How can I convert from []byte to [16]byte?", "body": "<p>I have this code:</p>\n\n<pre><code>func my_function(hash string) [16]byte {\n    b, _ := hex.DecodeString(hash)\n    return b   // Compile error: fails since [16]byte != []byte\n}\n</code></pre>\n\n<p><code>b</code> will be of type <code>[]byte</code>. I know that <code>hash</code> is of length 32. How can I make my code above work? Ie. can I somehow cast from a general-length byte array to a fixed-length byte array? I am not interested in allocating 16 new bytes and copying the data over.</p>\n"}, {"tags": ["go", "notepad++"], "comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1481460558, "post_id": 27747457, "comment_id": 69377754, "body": "<a href=\"http://stackoverflow.com/a/36329825/2932052\">blinksmith&#39;s solution</a> looks much cleaner to me than the accepted answer."}, {"owner": {"reputation": 22043, "user_id": 87973, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abc7768058e25c1382df18414db72a10?s=128&d=identicon&r=PG", "display_name": "Jonas Bystr&#246;m", "link": "https://stackoverflow.com/users/87973/jonas-bystr%c3%b6m"}, "reply_to_user": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1503493034, "post_id": 27747457, "comment_id": 78638067, "body": "@Wolf: yeah; would be nice if srini considered changing the accepted answer as the currently accepted one looks a bit daunting."}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "edited": false, "score": 1, "creation_date": 1452547060, "post_id": 27748051, "comment_id": 57208655, "body": "I followed these steps and can&#39;t see a &quot;go&quot; option under language."}, {"owner": {"reputation": 708, "user_id": 327313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b31e8984641214d9e35d93ec7f406a46?s=128&d=identicon&r=PG", "display_name": "Nik Todorov", "link": "https://stackoverflow.com/users/327313/nik-todorov"}, "reply_to_user": {"reputation": 995, "user_id": 4872477, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a52a31b0da099d83aa619226a0174b20?s=128&d=identicon&r=PG&f=1", "display_name": "GreySage", "link": "https://stackoverflow.com/users/4872477/greysage"}, "edited": false, "score": 0, "creation_date": 1452897662, "post_id": 27748051, "comment_id": 57384722, "body": "I&#39;ve updated my answer - the problem was that in userDefineLang-Anthony.xml the root tag is commented out and I did not explained that it need to be uncommented."}, {"owner": {"reputation": 12893, "user_id": 1279820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/CJFmh.png?s=128&g=1", "display_name": "Celeritas", "link": "https://stackoverflow.com/users/1279820/celeritas"}, "edited": false, "score": 0, "creation_date": 1463051470, "post_id": 27748051, "comment_id": 61903119, "body": "I got the autocomplete to work but no highlighting/colours."}], "tags": [], "owner": {"reputation": 708, "user_id": 327313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b31e8984641214d9e35d93ec7f406a46?s=128&d=identicon&r=PG", "display_name": "Nik Todorov", "link": "https://stackoverflow.com/users/327313/nik-todorov"}, "is_accepted": false, "score": 9, "last_activity_date": 1452899010, "last_edit_date": 1452899010, "creation_date": 1420229958, "answer_id": 27748051, "question_id": 27747457, "link": "https://stackoverflow.com/questions/27747457/go-language-plugin-for-notepad/27748051#27748051", "title": "Go language plugin for Notepad++", "body": "<p>Yep, it did not work out of the box for me too. I did not have userDefineLang.xml</p>\n\n<p>After finishing the step for go.xml, </p>\n\n<blockquote>\n  <p>Download <a href=\"http://go-lang.cat-v.org/text-editors/notepad-plus-plus/go.xml\">go.xml</a> and copy it to plugins\\APIs.</p>\n</blockquote>\n\n<p>this is what I did extra:</p>\n\n<ol>\n<li>Open <code>%APPDATA%/Notepad++</code></li>\n<li>Download <a href=\"http://go-lang.cat-v.org/text-editors/notepad-plus-plus/userDefineLang-Anthony.xml\">userDefineLang-Anthony.xml</a> from their link </li>\n<li>Save it to <code>%APPDATA%/Notepad++</code> </li>\n<li>a) if there is file userDefineLang.xml there - open it and paste the content of userDefineLang-Anthony.xml as child of <code>&lt;NotepadPlus&gt;</code></li>\n<li>b) if no such file - Rename userDefineLang-Anthony.xml to userDefineLang.xml and edit it -> uncomment <code>&lt;!-- &lt;NotepadPlus&gt; --&gt;</code> and <code>&lt;!-- &lt;/NotepadPlus&gt; --&gt;</code></li>\n<li>Restart Notepad++</li>\n<li>Open any .go file</li>\n</ol>\n\n<p>You should see in Language menu - after the User Defined. a \"<strong>go</strong>\" menu item.</p>\n\n<p>I hope this helps.</p>\n\n<p>EDIT: to make it easy I'm adding the content of my userDefineLang.xml</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;NotepadPlus&gt;\n    &lt;UserLang name=\"go\" ext=\"go\"&gt;\n        &lt;Settings&gt;\n            &lt;Global caseIgnored=\"no\" /&gt;\n            &lt;TreatAsSymbol comment=\"no\" commentLine=\"no\" /&gt;\n            &lt;Prefix words1=\"no\" words2=\"no\" words3=\"no\" words4=\"no\" /&gt;\n        &lt;/Settings&gt;\n        &lt;KeywordLists&gt;\n            &lt;Keywords name=\"Delimiters\"&gt;&amp;quot;`0&amp;quot;`&lt;/Keywords&gt;\n            &lt;Keywords name=\"Folder+\"&gt;&lt;/Keywords&gt;\n            &lt;Keywords name=\"Folder-\"&gt;&lt;/Keywords&gt;\n            &lt;Keywords name=\"Operators\"&gt;( ) [ ] { } ... . , _ &amp;amp; ^ %  &amp;gt; &amp;lt; ! =&lt;/Keywords&gt;\n            &lt;Keywords name=\"Comment\"&gt; 1/* 2*/ 0//&lt;/Keywords&gt;\n            &lt;Keywords name=\"Words1\"&gt;append bool break byte cap case chan close closed complex complex128 complex64 const continue copy default defer else fallthrough false float32 float64 for func go goto if iota imag import int int16 int32 int64 int8 interface len make map new nil package panic print println range real recover return select string struct switch true type uint uint16 uint32 uint64 uint8 uintptr var&lt;/Keywords&gt;\n            &lt;Keywords name=\"Words2\"&gt;&lt;/Keywords&gt;\n            &lt;Keywords name=\"Words3\"&gt;&lt;/Keywords&gt;\n            &lt;Keywords name=\"Words4\"&gt;&lt;/Keywords&gt;\n        &lt;/KeywordLists&gt;\n        &lt;Styles&gt;\n            &lt;WordsStyle name=\"DEFAULT\" styleID=\"11\" fgColor=\"000000\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"FOLDEROPEN\" styleID=\"12\" fgColor=\"FFFF00\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"FOLDERCLOSE\" styleID=\"13\" fgColor=\"0B243B\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"KEYWORD1\" styleID=\"5\" fgColor=\"AA0000\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"1\" /&gt;\n            &lt;WordsStyle name=\"KEYWORD2\" styleID=\"6\" fgColor=\"AA0000\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"1\" /&gt;\n            &lt;WordsStyle name=\"KEYWORD3\" styleID=\"7\" fgColor=\"AA0000\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"KEYWORD4\" styleID=\"8\" fgColor=\"A00000\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"COMMENT\" styleID=\"1\" fgColor=\"AAAAAA\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"COMMENT LINE\" styleID=\"2\" fgColor=\"AAAAAA\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"NUMBER\" styleID=\"4\" fgColor=\"A52A2A\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"OPERATOR\" styleID=\"10\" fgColor=\"8000FF\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"1\" /&gt;\n            &lt;WordsStyle name=\"DELIMINER1\" styleID=\"14\" fgColor=\"0000FF\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"DELIMINER2\" styleID=\"15\" fgColor=\"0000FF\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n            &lt;WordsStyle name=\"DELIMINER3\" styleID=\"16\" fgColor=\"0000FF\" bgColor=\"FFFFFF\" fontName=\"\" fontStyle=\"0\" /&gt;\n        &lt;/Styles&gt;\n    &lt;/UserLang&gt;\n&lt;/NotepadPlus&gt;\n</code></pre>\n\n<p>Be careful if you have other user defined languages there.</p>\n"}, {"comments": [{"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1481460464, "post_id": 36329825, "comment_id": 69377717, "body": "Much cleaner solution than the accepted answer, but the highlighting seems to work not automatically for open files with the go extension. Any suggestions?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 1, "creation_date": 1481879105, "post_id": 36329825, "comment_id": 69561263, "body": "I need to clarify my statement: already open go files are not affected after the restart. If you close them and open them again, they are shown with syntax highlighting."}, {"owner": {"reputation": 3044, "user_id": 316441, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lChLH.png?s=128&g=1", "display_name": "RRTW", "link": "https://stackoverflow.com/users/316441/rrtw"}, "edited": false, "score": 0, "creation_date": 1536808841, "post_id": 36329825, "comment_id": 91559595, "body": "Color was aweflu while using dark theme on Notepad++"}, {"owner": {"reputation": 10878, "user_id": 1432614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77bba5d9575b661847b54a489a13152?s=128&d=identicon&r=PG", "display_name": "Ross Smith II", "link": "https://stackoverflow.com/users/1432614/ross-smith-ii"}, "edited": false, "score": 0, "creation_date": 1548129969, "post_id": 36329825, "comment_id": 95422355, "body": "Didn&#39;t work. What a crappy program. Switching to vscode, which always works ootb."}, {"owner": {"reputation": 466, "user_id": 5882350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTpuf.jpg?s=128&g=1", "display_name": "blinksmith", "link": "https://stackoverflow.com/users/5882350/blinksmith"}, "reply_to_user": {"reputation": 10878, "user_id": 1432614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77bba5d9575b661847b54a489a13152?s=128&d=identicon&r=PG", "display_name": "Ross Smith II", "link": "https://stackoverflow.com/users/1432614/ross-smith-ii"}, "edited": false, "score": 0, "creation_date": 1548331679, "post_id": 36329825, "comment_id": 95507951, "body": "@RossSmithII both method is work and yes VSCode is better for daily coding, we use npp just for fast editing."}, {"owner": {"reputation": 2039, "user_id": 1827764, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/020eeae0bec754b16c896c8c8e38eb08?s=128&d=identicon&r=PG", "display_name": "raphael75", "link": "https://stackoverflow.com/users/1827764/raphael75"}, "edited": false, "score": 0, "creation_date": 1593184859, "post_id": 36329825, "comment_id": 110700248, "body": "@blinksmith  After we perform the steps in Method 2, do we need to use &quot;C&quot; for the language for Go files?"}, {"owner": {"reputation": 1138, "user_id": 296066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/940b69b965704253eca438cdfaf72b15?s=128&d=identicon&r=PG", "display_name": "metalim", "link": "https://stackoverflow.com/users/296066/metalim"}, "edited": false, "score": 0, "creation_date": 1609327431, "post_id": 36329825, "comment_id": 115812160, "body": "for method 2: TYPE WORD doesn&#39;t have &quot;user-defined&quot; field anymore. Still, method 2 is better because of how awful Notepad++ works with themes: each theme must define colors for every language, so method 1 gives white background when working with Dark Theme. Yet, that doesn&#39;t mean Notepad++ is bad, it&#39;s just not up to date with current trends."}], "tags": [], "owner": {"reputation": 466, "user_id": 5882350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTpuf.jpg?s=128&g=1", "display_name": "blinksmith", "link": "https://stackoverflow.com/users/5882350/blinksmith"}, "is_accepted": true, "score": 35, "last_activity_date": 1545771368, "last_edit_date": 1545771368, "creation_date": 1459417648, "answer_id": 36329825, "question_id": 27747457, "link": "https://stackoverflow.com/questions/27747457/go-language-plugin-for-notepad/36329825#36329825", "title": "Go language plugin for Notepad++", "body": "<p>How to install user defined language Notepad++\nfor golang.</p>\n\n<p>*EDIT: UPDATED in 26/12/2018</p>\n\n<blockquote>\n  <p>Method 1 :</p>\n  \n  <ul>\n  <li>Download <a href=\"https://gist.github.com/blinksmith/99e5234ea601af8ba8bfab35c8fbebef\" rel=\"noreferrer\" title=\"Golang udl on gist github\">golang.udl.xml on gist github</a> and then open Notepad++</li>\n  <li>Go to Toolbar Menu => Language -> \"Define your language...\" -> Import. </li>\n  <li>Import golang.udl.xml and restart Notepad++.</li>\n  </ul>\n</blockquote>\n\n<p>and method 2 is my recommended version because it's automatically highlighting go files. </p>\n\n<blockquote>\n  <p>Method 2 (<strong>Recommended</strong> Version) :</p>\n  \n  <ul>\n  <li>Go to Toolbar Menu => Settings -> \"Style Configurator...\".</li>\n  <li>in \"Language :\" box choose \"C\" </li>\n  <li>in \"<strong>Style :</strong>\" box choose \"<strong>INSTRUCTION WORD</strong>\"</li>\n  <li>in \"<strong>User-defined-keywords</strong>\" box, copy paste the keywords below. </li>\n  <li><code>var func append utf8 nil cap close closed copy image len make new panic print println range real recover select chan defer go interface map range true false</code></li>\n  <li>then in \"<strong>Style :</strong>\" box go to\"<strong>TYPE WORD</strong>\", copy paste the keywords below to \"<strong><em>User-defined-keywords</em></strong>\" box.</li>\n  <li><code>string package import type uint uintptr uint8 uint16 uint32 uint64 int8 int16 int32 int64 float32 float64 complex complex64 complex128 byte rune iota</code></li>\n  <li>Change Foreground colour style to RED.</li>\n  <li>IMPORTANT STEP: in \"<strong>User-ext. :</strong>\" box type \"go\". and click \"Save &amp; Close\" button, then restart Notepad++.\n  <a href=\"https://i.stack.imgur.com/ORrij.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ORrij.png\" alt=\"enter image description here\"></a></li>\n  </ul>\n</blockquote>\n\n<pre><code>\"English is not my mother tongue; please excuse any errors on my part.\"\n</code></pre>\n\n<p>the reason why choosing method two rather than method one is because UserDefinedLanguage in Notepad++ still having a bugs, Operators &amp; Delimiters feature in NPP cannot correctly do their job. if you are not disturbed by the delimiter then method one is quite good.</p>\n"}], "owner": {"reputation": 802, "user_id": 2018909, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/10ebdad579fc333db3830e893baf977e?s=128&d=identicon&r=PG", "display_name": "srini", "link": "https://stackoverflow.com/users/2018909/srini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32317, "favorite_count": 7, "accepted_answer_id": 36329825, "answer_count": 2, "score": 24, "last_activity_date": 1555960615, "creation_date": 1420226650, "last_edit_date": 1555960615, "question_id": 27747457, "link": "https://stackoverflow.com/questions/27747457/go-language-plugin-for-notepad", "title": "Go language plugin for Notepad++", "body": "<p>Did someone try using <em>golang</em> (Go programming language) plugin for Notepad++?</p>\n\n<p>I tried the instructions published at the below link, but it did not work for me. Just wondering if it worked for anyone:<br>\n<a href=\"http://go-lang.cat-v.org/text-editors/notepad-plus-plus/\" rel=\"noreferrer\">http://go-lang.cat-v.org/text-editors/notepad-plus-plus/</a></p>\n"}, {"tags": ["sql", "go", "schema", "gorilla"], "answers": [{"tags": [], "owner": {"reputation": 6974, "user_id": 199475, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f655f91b22aa5f97fc50936c8b6c0cd7?s=128&d=identicon&r=PG", "display_name": "carbocation", "link": "https://stackoverflow.com/users/199475/carbocation"}, "is_accepted": true, "score": 4, "last_activity_date": 1420212726, "creation_date": 1420212726, "answer_id": 27744494, "question_id": 27744493, "link": "https://stackoverflow.com/questions/27744493/can-i-use-gorilla-schema-with-an-sql-nullstring/27744494#27744494", "title": "Can I use gorilla schema with an sql.NullString?", "body": "<p>I created a gist ( <a href=\"https://gist.github.com/carbocation/51b55297702c7d30d3ef\" rel=\"nofollow\">https://gist.github.com/carbocation/51b55297702c7d30d3ef</a> ) that shows one way to approach this. You need to create a <code>schema.Converter</code> for each of the four types: sql.NullString, sql.NullBool, sql.NullInt64, and sql.NullFloat64.</p>\n\n<p>An example for sql.NullString:</p>\n\n<pre><code>import \"database/sql\"\nimport \"reflect\"\n\nfunc ConvertSQLNullString(value string) reflect.Value {\n    v := sql.NullString{}\n    if err := v.Scan(value); err != nil {\n        return reflect.Value{}\n    }\n\n    return reflect.ValueOf(v)\n}\n</code></pre>\n\n<p>Then register this with your <code>*schema.Decoder</code> (usually a package global, in this case named <code>d</code>):</p>\n\n<pre><code>import \"database/sql\"\n\nnullString := sql.NullString{}\nd.RegisterConverter(nullString, ConvertSQLNullString)\n</code></pre>\n"}], "owner": {"reputation": 6974, "user_id": 199475, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f655f91b22aa5f97fc50936c8b6c0cd7?s=128&d=identicon&r=PG", "display_name": "carbocation", "link": "https://stackoverflow.com/users/199475/carbocation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 27744494, "answer_count": 1, "score": 2, "last_activity_date": 1420212726, "creation_date": 1420212726, "question_id": 27744493, "link": "https://stackoverflow.com/questions/27744493/can-i-use-gorilla-schema-with-an-sql-nullstring", "title": "Can I use gorilla schema with an sql.NullString?", "body": "<p>I am using gorilla schema to populate a struct based on a user's form submission. My struct contains <code>sql.NullString</code> and I am currently getting the following error:</p>\n\n<p><code>schema: converter not found for sql.NullString</code></p>\n\n<p>How can I use <code>sql.NullString</code> in a struct that I want to populate with gorilla schema?</p>\n"}, {"tags": ["mongodb", "go", "mgo"], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 3165682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b2478bc5ca718b37141274c4930109?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Miechowiecki", "link": "https://stackoverflow.com/users/3165682/pawel-miechowiecki"}, "edited": false, "score": 0, "creation_date": 1420406064, "post_id": 27742567, "comment_id": 43951794, "body": "Thx, that solved the problem. I did no think that Nil can implement  selector ;)"}], "tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": false, "score": 5, "last_activity_date": 1420203788, "last_edit_date": 1420203788, "creation_date": 1420203210, "answer_id": 27742567, "question_id": 27742381, "link": "https://stackoverflow.com/questions/27742381/golang-mongodb-remove-all-items-from-collection-mgo-v2/27742567#27742567", "title": "Golang mongodb remove all items from collection [mgo.v2]", "body": "<p>See the MongoDB documentation at:\n<a href=\"http://docs.mongodb.org/manual/tutorial/remove-documents/\" rel=\"noreferrer\">http://docs.mongodb.org/manual/tutorial/remove-documents/</a></p>\n\n<p>To remove all the documents of a given collection, just call RemoveAll with an empty selector. Just passing nil as a parameter should work fine:</p>\n\n<pre><code>sess.DB(\"mydb\").C(\"mycollection\").RemoveAll(nil)\n</code></pre>\n\n<p>Be sure to check the returned objects though.</p>\n"}, {"comments": [{"owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "edited": false, "score": 1, "creation_date": 1420273192, "post_id": 27748475, "comment_id": 43916889, "body": "I believe mgo already does this for you. At least, it does it for other methods, such as Find."}], "tags": [], "owner": {"reputation": 241, "user_id": 3312855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ce1548cea453410b809c41f0b67700?s=128&d=identicon&r=PG", "display_name": "wilsonfiifi", "link": "https://stackoverflow.com/users/3312855/wilsonfiifi"}, "is_accepted": false, "score": 1, "last_activity_date": 1420232379, "creation_date": 1420232379, "answer_id": 27748475, "question_id": 27742381, "link": "https://stackoverflow.com/questions/27742381/golang-mongodb-remove-all-items-from-collection-mgo-v2/27748475#27748475", "title": "Golang mongodb remove all items from collection [mgo.v2]", "body": "<p>As per @DidierSpezia response use <code>C(\"mycollection\").RemoveAll</code>. However since the <a href=\"http://www.json.org/\" rel=\"nofollow\">JSON specification</a> distinguishes between an \"empty object\" <code>{}</code> and \"null\", you should probably use an empty <code>map[string]interface{}</code> or <code>bson.M</code>.</p>\n\n<pre><code>sess.DB(\"mydb\").C(\"mycollection\").RemoveAll(bson.M{})\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 3165682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b2478bc5ca718b37141274c4930109?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel Miechowiecki", "link": "https://stackoverflow.com/users/3165682/pawel-miechowiecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7577, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1577723976, "creation_date": 1420202317, "last_edit_date": 1577723976, "question_id": 27742381, "link": "https://stackoverflow.com/questions/27742381/golang-mongodb-remove-all-items-from-collection-mgo-v2", "title": "Golang mongodb remove all items from collection [mgo.v2]", "body": "<p>How to remove all items from collection stored in mongodb using GO lang? </p>\n\n<p>In mongo console I can use:</p>\n\n<pre><code>db.mycollection.remove({})\n</code></pre>\n\n<p>where empty brackets {} mean all document pattern.</p>\n\n<p>In GO lang (I use \"gopkg.in/mgo.v2\" and \"gopkg.in/mgo.v2/bson\") there are methods:</p>\n\n<pre><code>sess.DB(\"mydb\").C(\"mycollection\").Remove(...)\nor\nsess.DB(\"mydb\").C(\"mycollection\").RemoveAll(...)\n</code></pre>\n\n<p>but both of them needs parameter that implements selector. For example selector can be a bson map</p>\n\n<pre><code>bson.M{\"id\": id}\n</code></pre>\n\n<p>but I want to remove all elements, not a particular one.</p>\n"}, {"tags": ["go", "android-studio"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 1, "creation_date": 1420220280, "post_id": 27741379, "comment_id": 43903281, "body": "BTW this is not what you asked, but IMHO, you are better off using LiteIDE, which is Go specific. It&#39;s not as powerful an IDE as IDEA but it works much better with the Go ecosystem. I hope the Go plugin for IntelliJ will continue progressing and get as good, because it&#39;s an amazing platform."}, {"owner": {"reputation": 8939, "user_id": 92606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7526ec3e801f8ba99f6746498a154a6?s=128&d=identicon&r=PG", "display_name": "Burcu Dogan", "link": "https://stackoverflow.com/users/92606/burcu-dogan"}, "edited": false, "score": 1, "creation_date": 1431226165, "post_id": 27741379, "comment_id": 48402576, "body": "Currently there is no Android Studio integration for Go, but it is in our roadmap to land a proper plugin to support Go mobile builds."}, {"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "reply_to_user": {"reputation": 8939, "user_id": 92606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e7526ec3e801f8ba99f6746498a154a6?s=128&d=identicon&r=PG", "display_name": "Burcu Dogan", "link": "https://stackoverflow.com/users/92606/burcu-dogan"}, "edited": false, "score": 0, "creation_date": 1440750399, "post_id": 27741379, "comment_id": 52412057, "body": "@BurcuDogan currently the Go plugin for IntelliJ platform, which is compatible with Android Studio, doesn&#39;t support the gomobile platform build as a target but I guess this could be requested <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/new\" rel=\"nofollow noreferrer\">github.com/go-lang-plugin-org/go-lang-idea-plugin/issues/new</a> or contributed :)"}], "answers": [{"comments": [{"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "edited": false, "score": 0, "creation_date": 1440749838, "post_id": 32238737, "comment_id": 52411771, "body": "Please note that the Go documentation states that debugging with GDB is not in a very good shape <a href=\"https://golang.org/doc/gdb\" rel=\"nofollow noreferrer\">golang.org/doc/gdb</a> and your answer has nothing to do with the question."}, {"owner": {"reputation": 19, "user_id": 5270663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o33RR.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/5270663/patrick"}, "reply_to_user": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "edited": false, "score": 0, "creation_date": 1441041846, "post_id": 32238737, "comment_id": 52508300, "body": "My answer is just recommendation and actually besides GDB you cannot find any powerful debug tool for Golang, right?"}, {"owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "edited": false, "score": 0, "creation_date": 1441055127, "post_id": 32238737, "comment_id": 52514925, "body": "There&#39;s delve, which makes progress every day, <a href=\"https://github.com/derekparker/delve\" rel=\"nofollow noreferrer\">github.com/derekparker/delve</a> . There was also a talk about it at GopherCon 2015 so you can have a quick look there. But also, recommending a tool that&#39;s not working without the right disclaimer is not a good answer imho."}], "tags": [], "owner": {"reputation": 19, "user_id": 5270663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o33RR.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/5270663/patrick"}, "is_accepted": false, "score": 1, "last_activity_date": 1440744824, "last_edit_date": 1440744824, "creation_date": 1440634772, "answer_id": 32238737, "question_id": 27741379, "link": "https://stackoverflow.com/questions/27741379/android-studio-and-go/32238737#32238737", "title": "Android Studio and Go?", "body": "<p>IntelliJ with golang plugin is a good choice for golang development but it doesn't support debugging, so if you want to debug with GDB then Eclipse with golang plugin is preferred. </p>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 1772722, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/17346489240f67dafa4bad5967fa1aae?s=128&d=identicon&r=PG", "display_name": "lionelmessi", "link": "https://stackoverflow.com/users/1772722/lionelmessi"}, "edited": false, "score": 0, "creation_date": 1453172849, "post_id": 32266544, "comment_id": 57474889, "body": "I tried using it but it always keeps complaining about <code>Project SDK is not defined</code>. It is also not able to find imports and keeps importing the same package on <code>Alt+Enter</code>. Any suggestions or settings we need to do ?"}, {"owner": {"reputation": 938, "user_id": 1772722, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/17346489240f67dafa4bad5967fa1aae?s=128&d=identicon&r=PG", "display_name": "lionelmessi", "link": "https://stackoverflow.com/users/1772722/lionelmessi"}, "edited": false, "score": 0, "creation_date": 1453173134, "post_id": 32266544, "comment_id": 57474963, "body": "Ok was able to fix it. We need to add the SDK along with existing Android ones. As well as add the Gopath explicitly."}], "tags": [], "owner": {"reputation": 5861, "user_id": 951414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82155035c493a583d2d92aa1d13eaf7e?s=128&d=identicon&r=PG", "display_name": "dlsniper", "link": "https://stackoverflow.com/users/951414/dlsniper"}, "is_accepted": true, "score": 5, "last_activity_date": 1440750310, "creation_date": 1440750310, "answer_id": 32266544, "question_id": 27741379, "link": "https://stackoverflow.com/questions/27741379/android-studio-and-go/32266544#32266544", "title": "Android Studio and Go?", "body": "<p>The correct answer is: Follow the instructions from the readme and the plugin will work with Android Studio: <a href=\"https://github.com/go-lang-plugin-org/go-lang-idea-plugin#pre-release-builds\">https://github.com/go-lang-plugin-org/go-lang-idea-plugin#pre-release-builds</a></p>\n\n<p>If you have any issues, please feel free to open a ticket. Thanks.</p>\n"}], "owner": {"reputation": 18037, "user_id": 699215, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/dac451eeb6941e002e455f5a4e48bf9b?s=128&d=identicon&r=PG", "display_name": "Chris G.", "link": "https://stackoverflow.com/users/699215/chris-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8859, "favorite_count": 3, "accepted_answer_id": 32266544, "answer_count": 2, "score": 9, "last_activity_date": 1459895304, "creation_date": 1420197855, "last_edit_date": 1459895304, "question_id": 27741379, "link": "https://stackoverflow.com/questions/27741379/android-studio-and-go", "title": "Android Studio and Go?", "body": "<p>Can you use Android Studio for Go development? I am able to install the gaoling plugin, but can not start a Go project?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["go"], "answers": [{"comments": [{"owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "edited": false, "score": 1, "creation_date": 1420203071, "post_id": 27741584, "comment_id": 43895884, "body": "Beware: it only work for database engines whose truncate statement is transactional. For a number of them (Oracle, MySQL), it is not. Truncate table is commonly implemented as a DDL operation, rather than a DML."}, {"owner": {"reputation": 33, "user_id": 4412214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5088dad894e3f547af48ade9ae75f7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4412214/alex"}, "edited": false, "score": 0, "creation_date": 1420203302, "post_id": 27741584, "comment_id": 43895977, "body": "Great help! Thanks for including the defer statement!!"}, {"owner": {"reputation": 6974, "user_id": 199475, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f655f91b22aa5f97fc50936c8b6c0cd7?s=128&d=identicon&r=PG", "display_name": "carbocation", "link": "https://stackoverflow.com/users/199475/carbocation"}, "edited": false, "score": 1, "creation_date": 1420212824, "post_id": 27741584, "comment_id": 43899875, "body": "To be clear, some MySQL engines (<code>InnoDB</code>) do support transactions, whereas others (<code>MyISAM</code>) do not."}], "tags": [], "owner": {"reputation": 1749, "user_id": 3243380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MrCc3.jpg?s=128&g=1", "display_name": "nussjustin", "link": "https://stackoverflow.com/users/3243380/nussjustin"}, "is_accepted": true, "score": 6, "last_activity_date": 1420198749, "creation_date": 1420198749, "answer_id": 27741584, "question_id": 27741185, "link": "https://stackoverflow.com/questions/27741185/idiomatic-way-to-do-multiple-queries-in-golang-in-one-transaction/27741584#27741584", "title": "Idiomatic way to do multiple queries in golang in one transaction", "body": "<p>Use a Transaction, like this (see the comments in the code):</p>\n\n<pre><code>func TruncateGalleryImport() error {\n    s := make([]string, 0)\n\n    s = append(s, \"TRUNCATE TABLE add_map\")\n    s = append(s, \"TRUNCATE TABLE album\")\n    s = append(s, \"TRUNCATE TABLE album_permission\")\n    s = append(s, \"TRUNCATE TABLE album_view\")\n    s = append(s, \"TRUNCATE TABLE album_watch\")\n    s = append(s, \"TRUNCATE TABLE media\")\n    s = append(s, \"TRUNCATE TABLE media_user_view\")\n    s = append(s, \"TRUNCATE TABLE media_view\")\n    s = append(s, \"TRUNCATE TABLE media_watch\")\n    s = append(s, \"TRUNCATE TABLE private_map\")\n    s = append(s, \"TRUNCATE TABLE attachment\")\n    s = append(s, \"TRUNCATE TABLE attachment_data\")\n\n    // Get new Transaction. See http://golang.org/pkg/database/sql/#DB.Begin\n    txn, err := myDb.Begin()\n\n    if err != nil {\n        return err\n    }\n\n    defer func() {\n        // Rollback the transaction after the function returns.\n        // If the transaction was already commited, this will do nothing.\n        _ = txn.Rollback()\n    }()\n\n    for _, q := range s {\n        // Execute the query in the transaction.\n        _, err := txn.Exec(q)\n\n        if err != nil {\n            return err\n        }\n    }\n\n    // Commit the transaction.\n    return txn.Commit()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 678, "user_id": 2158788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxUxp.jpg?s=128&g=1", "display_name": "snassr", "link": "https://stackoverflow.com/users/2158788/snassr"}, "is_accepted": false, "score": 2, "last_activity_date": 1497358648, "creation_date": 1497358648, "answer_id": 44522218, "question_id": 27741185, "link": "https://stackoverflow.com/questions/27741185/idiomatic-way-to-do-multiple-queries-in-golang-in-one-transaction/44522218#44522218", "title": "Idiomatic way to do multiple queries in golang in one transaction", "body": "<p>You can use a wrapped function to do the commit/rollback logic, possibly even expand the error handling using string matching.</p>\n\n<pre><code>// RDBTransaction is a function which abstracts a sql transaction\n// into a function with an isolation level (isolvl) parameter.\n// the following integers represent the available isolation levels (isolvl)\n//  1: SERIALIZABLE\n//  2: REPEATABLE READ\n//  3: READ COMMITTED\n//  4: READ UNCOMMITTED\nfunc RDBTransaction(db *sql.DB, isolvl int, fn func(*sql.Tx) error) (err error) {\n    var tx *sql.Tx\n    tx, err = db.Begin()\n    if err != nil {\n        return err\n    }\n\n    // transaction isolation level setting\n    switch isolvl {\n    case 1:\n        _, err = tx.Exec(`set transaction isolation level serializable`)\n    case 2:\n        _, err = tx.Exec(`set transaction isolation level repeatable read`)\n    case 3:\n        _, err = tx.Exec(`set transaction isolation level read committed`)\n    case 4:\n        _, err = tx.Exec(`set transaction isolation level read uncommitted`)\n    default:\n        _, err = tx.Exec(`set transaction isolation level serializable`)\n    }\n    if err != nil {\n        return err\n    }\n\n    // catch all, commit/rollback\n    defer func() {\n        if err != nil {\n            tx.Rollback()\n            return\n        }\n        err = tx.Commit()\n    }()\n\n    // run transaction\n    err = fn(tx)\n\n    return err\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4412214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5088dad894e3f547af48ade9ae75f7b9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4412214/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6417, "favorite_count": 2, "accepted_answer_id": 27741584, "answer_count": 2, "score": 3, "last_activity_date": 1497358648, "creation_date": 1420196993, "question_id": 27741185, "link": "https://stackoverflow.com/questions/27741185/idiomatic-way-to-do-multiple-queries-in-golang-in-one-transaction", "title": "Idiomatic way to do multiple queries in golang in one transaction", "body": "<p>I'm currently struggling (my 2nd day) to find the best way to do multiple queries and was wondering if you know a solution.</p>\n\n<p>I have an open *sql.DB Connection, named <strong>myDb</strong> and use the <em>go-sql-driver</em></p>\n\n<pre><code>func TruncateGalleryImport() error {\n\n    s := make([]string, 0)\n\n    s = append(s, \"TRUNCATE TABLE add_map\")\n    s = append(s, \"TRUNCATE TABLE album\")\n    s = append(s, \"TRUNCATE TABLE album_permission\")\n    s = append(s, \"TRUNCATE TABLE album_view\")\n    s = append(s, \"TRUNCATE TABLE album_watch\")\n    s = append(s, \"TRUNCATE TABLE media\")\n    s = append(s, \"TRUNCATE TABLE media_user_view\")\n    s = append(s, \"TRUNCATE TABLE media_view\")\n    s = append(s, \"TRUNCATE TABLE media_watch\")\n    s = append(s, \"TRUNCATE TABLE private_map\")\n    s = append(s, \"TRUNCATE TABLE attachment\")\n    s = append(s, \"TRUNCATE TABLE attachment_data\")\n\n    for _, q := range s {\n        _, err := myDb.Exec(q)\n        if err != nil {\n            return err\n        }\n    }\n\n    return nil\n}\n</code></pre>\n\n<p>Is it possible to commit all the above queries together using only one transaction?</p>\n\n<p>Cheers</p>\n"}, {"tags": ["c", "struct", "go"], "comments": [{"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420195013, "post_id": 27740574, "comment_id": 43892344, "body": "I recall some versions of C could write 32 bit integers in a middle-endian form. can you post a hex dump of the start of the file?"}, {"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "reply_to_user": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420195205, "post_id": 27740574, "comment_id": 43892431, "body": "@Jasen using xxd: <code>0000000: 0700 0000 a91f 0000 7074 732f 3300 0000  ........pts&#47;3...</code>"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 1, "creation_date": 1420195659, "post_id": 27740574, "comment_id": 43892648, "body": "that changes everything,  your int16 is 4 bytes long :)"}, {"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "reply_to_user": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420196075, "post_id": 27740574, "comment_id": 43892830, "body": "@Jasen But in Go int16 is 2 bytes long. For example: <a href=\"http://play.golang.org/p/u1_bBJSeSo\" rel=\"nofollow noreferrer\">play.golang.org/p/u1_bBJSeSo</a>"}, {"owner": {"reputation": 7115, "user_id": 2347483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80792d6741e11aaa6bec5f80fcc30a9c?s=128&d=identicon&r=PG", "display_name": "Phylogenesis", "link": "https://stackoverflow.com/users/2347483/phylogenesis"}, "edited": false, "score": 0, "creation_date": 1420196229, "post_id": 27740574, "comment_id": 43892888, "body": "But the first 4 bytes of your file are for field <code>A</code>"}, {"owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 1, "creation_date": 1420196311, "post_id": 27740574, "comment_id": 43892916, "body": "@eric_lagergren it is in C also,  what has actually happened is the C compiler has added some padding after the int16_t  so that the int32_t can be 4-byte aligned"}, {"owner": {"reputation": 7115, "user_id": 2347483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80792d6741e11aaa6bec5f80fcc30a9c?s=128&d=identicon&r=PG", "display_name": "Phylogenesis", "link": "https://stackoverflow.com/users/2347483/phylogenesis"}, "edited": false, "score": 0, "creation_date": 1420196498, "post_id": 27740574, "comment_id": 43893006, "body": "Further possible reading: <a href=\"http://stackoverflow.com/questions/6672205/packed-structs-in-gccgo\" title=\"packed structs in gccgo\">stackoverflow.com/questions/6672205/packed-structs-in-gccgo</a>"}, {"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "reply_to_user": {"reputation": 7115, "user_id": 2347483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80792d6741e11aaa6bec5f80fcc30a9c?s=128&d=identicon&r=PG", "display_name": "Phylogenesis", "link": "https://stackoverflow.com/users/2347483/phylogenesis"}, "edited": false, "score": 0, "creation_date": 1420196597, "post_id": 27740574, "comment_id": 43893056, "body": "@Phylogenesis Thanks. Funny enough, I was just reading that question when my phone let me know you replied! :)"}, {"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "reply_to_user": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "edited": false, "score": 0, "creation_date": 1420196631, "post_id": 27740574, "comment_id": 43893071, "body": "@Jasen ahhh, gotcha. Thanks."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1420209091, "post_id": 27740574, "comment_id": 43898273, "body": "the &#39;C&#39; struct definition is NOT actually working for reading the contents of the file.  For one reason, there will be 2 bytes of padding between the first and second field.  That padding will be replace with the last 2 bytes of the first four 0 bytes from the file.  There 2 bytes are not referenceable except by referencing the whole struct."}], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "edited": false, "score": 1, "creation_date": 1420196763, "post_id": 27740690, "comment_id": 43893129, "body": "Yeah, the padding works. Go lets you use <code>_</code> for padding... somehow that didn&#39;t register when I read the docs the first time. It&#39;s a shame they don&#39;t align like C does.  Thanks for your help."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "edited": false, "score": 1, "creation_date": 1420249415, "post_id": 27740690, "comment_id": 43912893, "body": "@eric_lagergren Actually, the alignment is there (use <code>unsafe.Offsetof</code> to verify that). It&#39;s just that  <code>binary.Read()</code> requires you to explicitly specify alignment so your code is portable."}], "tags": [], "owner": {"reputation": 10217, "user_id": 471930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tds8p.png?s=128&g=1", "display_name": "Jasen", "link": "https://stackoverflow.com/users/471930/jasen"}, "is_accepted": true, "score": 6, "last_activity_date": 1420197356, "last_edit_date": 1420197356, "creation_date": 1420194601, "answer_id": 27740690, "question_id": 27740574, "link": "https://stackoverflow.com/questions/27740574/why-isnt-binary-read-reading-integers-correctly/27740690#27740690", "title": "Why isn&#39;t binary.Read() reading integers correctly?", "body": "<p>Assuming the first two characters of the string aren't '\\000' </p>\n\n<p>what you've got there is an alignment problem, your C compiler is putting an extra two bytes of padding after the int16, Go isn't</p>\n\n<p>easiest fix is probably just to add a dummy (padding) int16 after 'A'</p>\n\n<pre><code>type foo struct \n{\n    A int16\n    A_pad int16\n    B int32\n    C [32]byte\n}\n</code></pre>\n\n<p>or the may be a way to tell go that the int32 needs to be \"4-byte aligned\"</p>\n\n<p>if you know of one please edit this answer or post a comment</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1420209727, "creation_date": 1420209727, "answer_id": 27743886, "question_id": 27740574, "link": "https://stackoverflow.com/questions/27740574/why-isnt-binary-read-reading-integers-correctly/27743886#27743886", "title": "Why isn&#39;t binary.Read() reading integers correctly?", "body": "<pre><code>given:\n\n0000000: 0700 0000 a91f 0000 7074 732f 3300 0000 ........pts/3...\n\nthe fields, per the struct, are:\n0700h that will be the short int field, little endian format =  7\n\n0000a91fh that will be the  int field, little endian format = the big number\n...\n\nyour struct needs a second short field to absorb the 0000h\nthen \n0700h = 7\n0000h = 0 in new field\na91f0000 = 8105\n....\n\nwhich indicates (amongst other things) that the struct is missing \nthe expected 2 byte padding between the short and the int fields\ndoes the C code have #pragma pack?\n</code></pre>\n"}], "owner": {"reputation": 481, "user_id": 2967113, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5d72f96279c46ac2639cfdc34753bc42?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Lagergren", "link": "https://stackoverflow.com/users/2967113/eric-lagergren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 27740690, "answer_count": 2, "score": 1, "last_activity_date": 1420209727, "creation_date": 1420194047, "last_edit_date": 1420194876, "question_id": 27740574, "link": "https://stackoverflow.com/questions/27740574/why-isnt-binary-read-reading-integers-correctly", "title": "Why isn&#39;t binary.Read() reading integers correctly?", "body": "<p>I'm trying to read a binary file in Go.</p>\n\n<p>Essentially I have a struct like this:</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>type foo struct {\n    A int16\n    B int32\n    C [32]byte\n    // and so on...\n}\n</code></pre>\n\n<p>and I'm reading from the file into the struct like this:</p>\n\n<pre class=\"lang-go prettyprint-override\"><code>fi, err := os.Open(fname)\n// error checking, defer close, etc.\nvar bar foo\nbinary.Read(fi, binary.LittleEndian, &amp;bar)\n</code></pre>\n\n<p>Now, that <em>should</em> work, but I'm getting some weird results. For instance, when I read into the struct I should get this:</p>\n\n<pre><code>A: 7\nB: 8105\nC: // some string\n</code></pre>\n\n<p>but what I get is this:</p>\n\n<pre><code>A: 7\nB: 531169280\nC: // some correct string\n</code></pre>\n\n<p>The reason for this is because when <code>binary.Read()</code> is reading the file, after it reads the <code>[]byte{7, 0}</code> as <code>int16(7)</code> (the correct value for <code>A</code>), it comes across the slice <code>[]byte{0, 0, 169, 31}</code> and tries to convert it into an <code>int32</code>. However, <code>binary.Read()</code>'s conversion does this:</p>\n\n<p><code>uint32(b[0]) | uint32(b[1])&lt;&lt;8 | uint32(b[2])&lt;&lt;16 | uint32(b[3])&lt;&lt;24</code> where <code>b</code> is the byte slice.</p>\n\n<p>But what really confuses me is doing the exact same thing in C works perfectly fine.</p>\n\n<p>If I write this in C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main()\n{\n    int fd;\n    struct cool_struct {\n        short int A;\n        int32_t B;\n        char C[32];\n        // you get the picture...\n    } foo;\n    int sz = sizeof(struct cool_struct);\n    const char* file_name = \"/path/to/my/file\"\n\n    fd = open(file_name, O_RDONLY);\n    // more code\n    read(fd, &amp;foo, sz);\n    // print values\n}\n</code></pre>\n\n<p>I get the correct results. Why is my C code getting this correct while my Go code isn't?</p>\n"}, {"tags": ["git", "go", "indentation", "git-rebase", "gofmt"], "comments": [{"owner": {"reputation": 3946, "user_id": 4354956, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-dGnI8MKmUL4/AAAAAAAAAAI/AAAAAAAAABE/s48lzQAiCKk/photo.jpg?sz=128", "display_name": "Joseph K. Strauss", "link": "https://stackoverflow.com/users/4354956/joseph-k-strauss"}, "edited": false, "score": 1, "creation_date": 1420212507, "post_id": 27738571, "comment_id": 43899727, "body": "Way to tedious. Check out <code>git filter-branch</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 1, "last_activity_date": 1420214172, "last_edit_date": 1495540674, "creation_date": 1420214172, "answer_id": 27744800, "question_id": 27738571, "link": "https://stackoverflow.com/questions/27738571/any-tools-rebase-a-branch-in-git-while-running-go-fmt-each-commit-separately/27744800#27744800", "title": "Any tools rebase a branch in Git while running go fmt each commit separately?", "body": "<blockquote>\n  <p>but if a quick tool or simpler workflow does this more cleanly, then I'd love to know about it. </p>\n</blockquote>\n\n<p>As <a href=\"https://stackoverflow.com/users/4354956/joseph-k-strauss\">Joseph K. Strauss</a> mentions <a href=\"https://stackoverflow.com/questions/27738571/any-tools-rebase-a-branch-in-git-while-running-go-fmt-each-commit-separately/27744800#comment43899727_27738571\">in the comments</a>, <a href=\"http://git-scm.com/docs/git-filter-branch\" rel=\"nofollow noreferrer\"><code>git filter-branch</code></a> should be enough, plus <a href=\"https://stackoverflow.com/a/13321739/6309\"><code>go fmt</code> using the three dot notation</a>:</p>\n\n<pre><code>git filter-branch --tree-filter 'go fmt ...'\n</code></pre>\n\n<p>You can read (much) more on filter-branch at \"<a href=\"https://stackoverflow.com/a/22274266/6309\"><code>git filter-branch</code> - discard the changes to a set of files in a range of commits</a>\".</p>\n\n<p>That command will run against all local branch, and will change the history (since new SHA1 will be generated for each modified commit).<br>\nA <code>git push --force</code> might be needed to publish the new history to its upstream repo: do warn the other collaborators, for them to reset their local repos.</p>\n"}], "owner": {"reputation": 4036, "user_id": 667457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/33f9a9233b25c8230f5b5edb38493842?s=128&d=identicon&r=PG", "display_name": "Jeff Burdges", "link": "https://stackoverflow.com/users/667457/jeff-burdges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 27744800, "answer_count": 1, "score": 1, "last_activity_date": 1420214172, "creation_date": 1420181959, "last_edit_date": 1420192850, "question_id": 27738571, "link": "https://stackoverflow.com/questions/27738571/any-tools-rebase-a-branch-in-git-while-running-go-fmt-each-commit-separately", "title": "Any tools rebase a branch in Git while running go fmt each commit separately?", "body": "<p>I wish to rebuild/rebase all commits in a Git branch <code>X</code> using a source code formatting tool like <code>go fmt</code> or <code>indent</code>.  </p>\n\n<p>I'd expect the workflow to roughly consist of making a new branch off <code>master</code> and iterating the following with <code>$_</code> ranging over the commits in <code>X</code>:</p>\n\n<pre><code>git cherry-pick $_\ngo fmt ...\ngit commit -a --amend\n</code></pre>\n\n<p>Or maybe even</p>\n\n<pre><code>git cherry-pick -n $_\ngo fmt ...\ngit cherry-pick --continue\n</code></pre>\n\n<p>I wouldn't expect <code>-n</code> and <code>--continue</code> to play together like that, though.  Also, one should naturally do a <code>go fmt</code> commit to <code>X</code> and <code>go diff X new</code> when done.</p>\n\n<p>However, there are many steps that can go wrong with this procedure, like the <code>-a</code> seeking to change files that weren't changed in the original commit, <code>go fmt</code> confusing Git's patching, Git changing the commit dates, etc. </p>\n\n<p>None of that is particularly troublesome, but if a quick tool or simpler workflow does this more cleanly, then I'd love to know about it. </p>\n"}, {"tags": ["go"], "comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1420148576, "post_id": 27734934, "comment_id": 43881279, "body": "<a href=\"http://stackoverflow.com/q/10858787/6309\">stackoverflow.com/q/10858787/6309</a>, <a href=\"http://stackoverflow.com/a/25497688/6309\">stackoverflow.com/a/25497688/6309</a>"}, {"owner": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "reply_to_user": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1420148766, "post_id": 27734934, "comment_id": 43881327, "body": "thanks for the links"}], "answers": [{"tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 1, "last_activity_date": 1420149127, "last_edit_date": 1592644375, "creation_date": 1420149127, "answer_id": 27735021, "question_id": 27734934, "link": "https://stackoverflow.com/questions/27734934/how-tags-of-struct-fields-are-used/27735021#27735021", "title": "how tags of struct fields are used?", "body": "<blockquote>\n<p>[tag] becomes an attribute for all the fields in the corresponding field declaration</p>\n</blockquote>\n<p>In addition to the links above (&quot;<a href=\"https://stackoverflow.com/q/10858787/6309\">What are the use(s) for tags in Go?</a>&quot;, &quot;<a href=\"https://stackoverflow.com/a/25497688/6309\">go lang, struct: what is the third parameter</a>&quot;) <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/wkQBj2XUj40\" rel=\"nofollow noreferrer\">this thread</a> provides an example which does <em>not</em> come from the standard packages:</p>\n<blockquote>\n<p>Suppose I have the following code (see below). I use a type switch the check the type of the argument in <code>WhichOne()</code>.</p>\n<p>How do I access the tag (&quot;<code>blah</code>&quot; in both cases)?<br />\nI'm I forced the use the reflection package, or can this also be done in &quot;pure&quot; Go?</p>\n</blockquote>\n<pre><code>type PersonAge struct {\n        name string &quot;blah&quot;\n        age  int\n}\n\ntype PersonShoe struct {\n        name     string &quot;blah&quot;\n        shoesize int\n}\n\nfunc WhichOne(x interface{}) {\n    ...\n}\n</code></pre>\n<blockquote>\n<p>After reading that (again), looking in <code>json/encode.go</code> and some trial and error, I have found a solution.<br />\nTo print out <code>&quot;blah&quot;</code> of the following structure:</p>\n</blockquote>\n<pre><code>type PersonAge struct {\n        name string &quot;blah&quot;\n        age  int\n}\n</code></pre>\n<blockquote>\n<p>You'll need:</p>\n</blockquote>\n<pre><code>func WhichOne(i interface{}) {\n        switch t := reflect.NewValue(i).(type) {\n        case *reflect.PtrValue:\n                x := t.Elem().Type().(*reflect.StructType).Field(0).Tag\n                println(x)\n        }  \n}\n</code></pre>\n<p>Here: <code>Field(0).Tag</code> illustrates the &quot;becomes an attribute for all the fields in the corresponding field declaration&quot;.</p>\n"}], "owner": {"reputation": 26022, "user_id": 410102, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a70b7da5a3a712e800100e61ef8d8917?s=128&d=identicon&r=PG", "display_name": "akonsu", "link": "https://stackoverflow.com/users/410102/akonsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 27735021, "answer_count": 1, "score": 1, "last_activity_date": 1420149127, "creation_date": 1420148376, "question_id": 27734934, "link": "https://stackoverflow.com/questions/27734934/how-tags-of-struct-fields-are-used", "title": "how tags of struct fields are used?", "body": "<p>I do not understand how field tags in <code>struct</code> are used and when. Per <a href=\"https://golang.org/ref/spec#Struct_types\" rel=\"nofollow\">https://golang.org/ref/spec#Struct_types</a>:</p>\n\n<blockquote>\n  <p>[tag] becomes an attribute for all the fields in the corresponding field declaration</p>\n</blockquote>\n\n<p>what does this mean?</p>\n"}, {"tags": ["go", "embedding"], "answers": [{"comments": [{"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1420205361, "post_id": 27733969, "comment_id": 43896759, "body": "<code>as a pointer to a non-interface type name *T</code> what do this mean?"}, {"owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 0, "creation_date": 1420205877, "post_id": 27733969, "comment_id": 43896977, "body": "and <code>The whole point of anonymous fields is that methods get promoted.</code> what do you mean with promoted?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 1, "creation_date": 1420206384, "post_id": 27733969, "comment_id": 43897173, "body": "@zero_coding meaning the method of the embedded type will by accessible/visible through the parent type."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "edited": false, "score": 1, "creation_date": 1420206430, "post_id": 27733969, "comment_id": 43897188, "body": "@zero_coding for example <code>*log.Logger</code> is a  a pointer to a non-interface type: it can be embedded."}, {"owner": {"reputation": 1168, "user_id": 786389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11a3c4e1a6577f9a0a0b1c169588472f?s=128&d=identicon&r=PG", "display_name": "y3sh", "link": "https://stackoverflow.com/users/786389/y3sh"}, "edited": false, "score": 0, "creation_date": 1562853343, "post_id": 27733969, "comment_id": 100516380, "body": "Flyweight patterns reuse <i>immutable</i> objects, these pics are mutable right?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 1168, "user_id": 786389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11a3c4e1a6577f9a0a0b1c169588472f?s=128&d=identicon&r=PG", "display_name": "y3sh", "link": "https://stackoverflow.com/users/786389/y3sh"}, "edited": false, "score": 1, "creation_date": 1562853861, "post_id": 27733969, "comment_id": 100516670, "body": "@y3sh Right. I suspect <a href=\"https://books.google.fr/books?id=o86PDwAAQBAJ&amp;pg=PA28&amp;lpg=PA28&amp;dq=%22golang%22+%22Flyweight%22+%22immutable%22&amp;source=bl&amp;ots=h3jn6LUmH9&amp;sig=ACfU3U1NYGrPqjj6yTCpg_GobCcHCjeSDw&amp;hl=en&amp;sa=X&amp;ved=2ahUKEwjTgZmAhK3jAhWsy4UKHS_mAwYQ6AEwAHoECAkQAQ#v=onepage&amp;q=%22golang%22%20%22Flyweight%22%20%22immutable%22&amp;f=false\" rel=\"nofollow noreferrer\">a bit more is involved in order to implement a true Flightweight pattern</a>"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 10, "last_activity_date": 1420141743, "last_edit_date": 1420141743, "creation_date": 1420140896, "answer_id": 27733969, "question_id": 27733854, "link": "https://stackoverflow.com/questions/27733854/embedding-when-to-use-pointer/27733969#27733969", "title": "Embedding when to use pointer", "body": "<p>You can use one or the other: for <a href=\"https://golang.org/ref/spec#Struct_types\" rel=\"noreferrer\">struct type</a>, the spec mentions:</p>\n\n<blockquote>\n  <p>A field declared with a type but no explicit field name is an <em>anonymous</em> field, also called an <em>embedded</em> field or an embedding of the type in the struct. </p>\n  \n  <p>An embedded type must be specified as a type name <code>T</code> or as a pointer to a non-interface type name <code>*T</code>, and <code>T</code> itself may not be a pointer type.</p>\n</blockquote>\n\n<p>Since <a href=\"http://golang.org/pkg/log/#Logger\" rel=\"noreferrer\"><code>log.Logger</code></a> is <em>not</em> an interface, you can use the type or a pointer to the type for the anonymous field <code>Logger</code>.</p>\n\n<hr>\n\n<p>The article \"<a href=\"http://www.hydrogen18.com/blog/golang-embedding.html\" rel=\"noreferrer\">Embedding in Go </a>\" fro <a href=\"https://github.com/hydrogen18\" rel=\"noreferrer\">Eric Urban (<code>hydrogen18</code>)</a> calls embedding a pointer \"<strong>embed by-pointer</strong>\":</p>\n\n<blockquote>\n  <ul>\n  <li>The first advantage to this is that you can rely on functions that use the <code>NewX</code> idiom returning a struct by-pointer to do initialization. </li>\n  <li>The second advantage is that <strong>you can embed all the functionality of a type without needing to know when it is instantiated</strong>.<br>\n  The embedded pointer to a <code>Bitmap</code> is no different than any other pointer in Go, so it can be assigned multiple times.<br>\n  By doing this you can change what instance you are extending dynamically at run time.</li>\n  </ul>\n</blockquote>\n\n<p>For instance, with:</p>\n\n<pre><code>type Bitmap struct{\n    data [4][5]bool\n}\n\ntype Renderer struct{\n    *Bitmap //Embed by pointer\n    on uint8\n    off uint8\n}\n</code></pre>\n\n<p>The <code>Renderer</code> type embeds a <code>Bitmap</code> by-pointer.</p>\n\n<blockquote>\n  <p>A single instance of <code>Bitmap</code> can act as the embedded instance of many <code>Renderer</code> instances:</p>\n</blockquote>\n\n<pre><code>var renderA,renderB Renderer\nrenderA.on = 'X'\nrenderA.off = 'O'\nrenderB.on = '@'\nrenderB.off = '.'\n\nvar pic Bitmap\npic.data[0][6] = true\npic.data[0][7] = true\npic.data[1][8] = true\npic.data[2][9] = true\npic.data[3][10] = true\n\nrenderA.Bitmap = &amp;pic\nrenderB.Bitmap = &amp;pic\n\nrenderA.render()\nrenderB.render()\n</code></pre>\n\n<blockquote>\n  <p>This shares the same <code>Bitmap</code> instance to two different renderers.<br>\n  Each renderer has its own set of characters, allowing two representations of the bitmap to be printed.<br>\n  This is what the output looks like:</p>\n</blockquote>\n\n<pre><code>OXXO\nOXOO\nOXOO\nOXOO\n.@@.\n.@..\n.@..\n.@..\n</code></pre>\n\n<blockquote>\n  <p>This example demonstrates the <a href=\"http://en.wikipedia.org/wiki/Flyweight_pattern\" rel=\"noreferrer\">Flyweight Pattern</a>.<br>\n  Although inconsequential to memory consumption in this example, having many thousands of instances sharing a single underlying data structure can be very significant in reducing the memory consumption of systems.</p>\n</blockquote>\n\n<hr>\n\n<p>As mentioned in <a href=\"https://groups.google.com/forum/#!topic/golang-nuts/KnkFFZ0SStY\" rel=\"noreferrer\">this thread</a>:</p>\n\n<blockquote>\n  <p>The reason why you can't have pointer to pointer and pointer to interface anonymous fields is that these types don't have methods.<br>\n  <strong>The whole point of anonymous fields is that methods get promoted</strong>. </p>\n  \n  <p>I already explained why interfaces don't have methods: a lot of people were using pointers to interfaces incorrectly and unnecessarily, and there weren't any known valid uses, so the language was changed to actively discourage this usage by making pointers to interfaces have no methods.</p>\n</blockquote>\n"}], "owner": {"reputation": 25967, "user_id": 1743843, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8ea2c1d9051e40332376a07bc166d9d5?s=128&d=identicon&r=PG&f=1", "display_name": "softshipper", "link": "https://stackoverflow.com/users/1743843/softshipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2240, "favorite_count": 6, "accepted_answer_id": 27733969, "answer_count": 1, "score": 4, "last_activity_date": 1470207650, "creation_date": 1420139973, "last_edit_date": 1470207650, "question_id": 27733854, "link": "https://stackoverflow.com/questions/27733854/embedding-when-to-use-pointer", "title": "Embedding when to use pointer", "body": "<p>When I want to embed a struct within another struct, should I use a pointer or value?</p>\n\n<p>For example</p>\n\n<pre><code>type Job struct {\n    Command string\n    *log.Logger\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>type Job struct {\n    Command string\n    log.Logger\n}\n</code></pre>\n"}, {"tags": ["sorting", "go"], "answers": [{"comments": [{"owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "edited": false, "score": 0, "creation_date": 1420138491, "post_id": 27733578, "comment_id": 43878780, "body": "That was it. Thank You."}], "tags": [], "owner": {"reputation": 14973, "user_id": 128186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46c330659979615fe50c46f5f553b39f?s=128&d=identicon&r=PG", "display_name": "Arjan", "link": "https://stackoverflow.com/users/128186/arjan"}, "is_accepted": true, "score": 3, "last_activity_date": 1420138036, "creation_date": 1420138036, "answer_id": 27733578, "question_id": 27733469, "link": "https://stackoverflow.com/questions/27733469/sort-slice-with-respect-to-another-slice-in-go/27733578#27733578", "title": "Sort slice with respect to another slice in go", "body": "<p>You forgot to swap the elements of <code>other_slice</code> in the implementation of <code>Swap</code>:</p>\n\n<pre><code>func (sbo SortByOther) Swap(i, j int) {\n    sbo.main_slice[i], sbo.main_slice[j] = sbo.main_slice[j], sbo.main_slice[i]\n    sbo.other_slice[i], sbo.other_slice[j] = sbo.other_slice[j], sbo.other_slice[i]\n}\n</code></pre>\n"}], "owner": {"reputation": 67160, "user_id": 1078084, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/wApmM.jpg?s=128&g=1", "display_name": "Akavall", "link": "https://stackoverflow.com/users/1078084/akavall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "accepted_answer_id": 27733578, "answer_count": 1, "score": 1, "last_activity_date": 1420138036, "creation_date": 1420137145, "last_edit_date": 1420137646, "question_id": 27733469, "link": "https://stackoverflow.com/questions/27733469/sort-slice-with-respect-to-another-slice-in-go", "title": "Sort slice with respect to another slice in go", "body": "<p>I am trying to figure out a way to sort one slice with respect to the other, for example:</p>\n\n<p>I want to sort <code>main_slice</code> with respect to <code>other_slice</code></p>\n\n<p><code>other_slice = []int{3,5,1,2,7}</code></p>\n\n<p><code>main_slice =  []int{1,2,3,4,5}</code></p>\n\n<p><code>3</code> in <code>main_slice</code> corresponds to lowest value in <code>other_slice</code> (<code>1</code>), <code>4</code> to the second lowest (<code>2</code>); therefore, I expect sorted <code>main_slice to be</code>: <code>{3,4,1,2,5}</code></p>\n\n<p>I used <a href=\"https://gobyexample.com/sorting-by-functions\" rel=\"nofollow\">this</a> tutorial as reference, but could not come up with a solution, here is my try:</p>\n\n<pre><code>package main\n\nimport ( \"fmt\"\n         \"sort\"\n)\n\ntype TwoSlices struct {\n    main_slice  []int\n    other_slice  []int\n}\n\ntype SortByOther TwoSlices\n\nfunc (sbo SortByOther) Len() int {\n    return len(sbo.main_slice)\n}\n\nfunc (sbo SortByOther) Swap(i, j int) {\n    sbo.main_slice[i], sbo.main_slice[j] = sbo.main_slice[j], sbo.main_slice[i]\n}\n\nfunc (sbo SortByOther) Less(i, j int) bool {\n    return sbo.other_slice[i] &lt; sbo.other_slice[j] \n}\n\n\nfunc main() {\n    my_other_slice := []int{3,5,1,2,7}\n    my_main_slice := []int{1,2,3,4,5} // sorted : {3,4,1,2,5}\n\n    my_two_slices := TwoSlices{main_slice: my_main_slice, other_slice: my_other_slice}\n\n    fmt.Println(\"Not sorted : \", my_two_slices.main_slice)\n\n    sort.Sort(SortByOther(my_two_slices))\n    fmt.Println(\"Sorted : \", my_two_slices.main_slice)\n\n}\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>Not sorted :  [1 2 3 4 5]\nSorted :  [1 3 2 4 5]\n</code></pre>\n\n<p><code>main_slice</code> is getting changed, but it does not do what I want, what am I doing wrong?</p>\n"}, {"tags": ["google-app-engine", "go", "google-admin-sdk"], "comments": [{"owner": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1420237367, "post_id": 27732066, "comment_id": 43909902, "body": "You can grant the service account access to certain scopes in the Control Panel as explained in the Google Drive domain-wide documentation <a href=\"https://developers.google.com/drive/web/delegation#delegate_domain-wide_authority_to_your_service_account\" rel=\"nofollow noreferrer\">developers.google.com/drive/web/&hellip;</a>. Use Admin SDK scopes instead."}, {"owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "reply_to_user": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1420244524, "post_id": 27732066, "comment_id": 43911905, "body": "I did this for the offline service account.  I don&#39;t have a client_id for the appengine account, only an email address which that page will not accept.  Do you know how I can register the appengine service account?"}, {"owner": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1420244738, "post_id": 27732066, "comment_id": 43911961, "body": "Did you try this link <a href=\"https://cloud.google.com/appengine/docs/java/gettingstarted/creating\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/java/gettingstarted/creating</a>"}, {"owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "reply_to_user": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1420245452, "post_id": 27732066, "comment_id": 43912130, "body": "That link looks to me like it explains setting up a project, which I already have done.  You can find the service account name on the appengine settings page as explained here: <a href=\"https://cloud.google.com/appengine/articles/prediction_service_accounts\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/articles/prediction_service_accou&zwnj;&#8203;nts</a>   The problem I have is that I don&#39;t know the client_id for the service account, so I cannot figure out how to grant it API access.  The service account name is like project-name@appspot.gserviceaccount.com but it needs to be a domain, not an email address."}, {"owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "reply_to_user": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1420318317, "post_id": 27732066, "comment_id": 43929743, "body": "Turns out the appengine service account does have access to the admin api - it just doesn&#39;t have access to my Google Apps domain information.  I think the way to allow it access is to specify the Subject name, but I don&#39;t see how to do this."}], "owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420126186, "creation_date": 1420126186, "question_id": 27732066, "link": "https://stackoverflow.com/questions/27732066/can-i-set-subject-aka-prn-in-appenginetokensource", "title": "Can I set Subject (aka Prn) in AppEngineTokenSource?", "body": "<p>I'm trying to call the Admin sdk from google AppEngine using Go, I have already done the following:</p>\n\n<ul>\n<li>Added Admin SDK to my appengine project</li>\n<li>added the appengine-project-name@appspot.gserviceaccount.com to the service accounts for the project</li>\n</ul>\n\n<p>Following the example here <a href=\"https://godoc.org/golang.org/x/oauth2/google#example-AppEngineTokenSource\" rel=\"nofollow\">https://godoc.org/golang.org/x/oauth2/google#example-AppEngineTokenSource</a></p>\n\n<p>I'm getting: Error 403: Not Authorized to access this resource/api, forbidden</p>\n\n<p>When I did this from the command line, I had to set the Subject account.  Is there a way to do this with AppEngineTokenService?</p>\n\n<pre><code>client := &amp;http.Client{\n    Transport: &amp;oauth2.Transport{\n        Source: google.AppEngineTokenSource(ctx,\n            \"https://www.googleapis.com/auth/admin.directory.user\"),\n        Base: &amp;urlfetch.Transport{\n            Context: ctx,\n        },\n    },\n}\n\nsvc, err := admin.New(client)\nif err != nil {\n    fmt.Printf(\"Error getting svc\\n\")\n    ctx.Errorf(\"error getting service %v\", err)\n}\nusersvc := admin.NewUsersService(svc)\n\nlistcall := usersvc.List()\nlistcall.Domain(\"example.com\")\nusers, err := listcall.Do()\n</code></pre>\n"}, {"tags": ["html", "nginx", "go"], "comments": [{"owner": {"reputation": 39512, "user_id": 1239701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ca4e887354416993fd91e2e16c4380?s=128&d=identicon&r=PG", "display_name": "Not_a_Golfer", "link": "https://stackoverflow.com/users/1239701/not-a-golfer"}, "edited": false, "score": 0, "creation_date": 1420114239, "post_id": 27728926, "comment_id": 43872713, "body": "Just add the <code>Access-Control-Allow-Origin</code> header in your server."}, {"owner": {"reputation": 15641, "user_id": 1567738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1065193e064ef75f6278754f7f02abb6?s=128&d=identicon&r=PG", "display_name": "Intermernet", "link": "https://stackoverflow.com/users/1567738/intermernet"}, "edited": false, "score": 0, "creation_date": 1420165023, "post_id": 27728926, "comment_id": 43884789, "body": "This link may help <a href=\"http://enable-cors.org/server_nginx.html\" rel=\"nofollow noreferrer\">enable-cors.org/server_nginx.html</a>"}, {"owner": {"reputation": 3, "user_id": 4378043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5851d92de4f2615f2afcc3f9bebddeb7?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Kumar Sinha", "link": "https://stackoverflow.com/users/4378043/abinash-kumar-sinha"}, "edited": false, "score": 0, "creation_date": 1420176768, "post_id": 27728926, "comment_id": 43886888, "body": "I cant understand why it is showing a CORS problem because i am using the same server &quot;localhost&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 6313, "user_id": 56488, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22d1cad677921dd4bea94bb549013e7a?s=128&d=identicon&r=PG", "display_name": "dar", "link": "https://stackoverflow.com/users/56488/dar"}, "is_accepted": true, "score": 1, "last_activity_date": 1420203739, "creation_date": 1420203739, "answer_id": 27742690, "question_id": 27728926, "link": "https://stackoverflow.com/questions/27728926/xmlhttprequest-cannot-load-http-localhost9090-receive-no-access-control-all/27742690#27742690", "title": "XMLHttpRequest cannot load http://localhost:9090/receive. No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource", "body": "<p>In your error above you have the page loading from <code>http://localhost:9009</code> requesting to <code>http://localhost:9090/</code>.   These are different origins according to the Same Origin description here: <a href=\"http://tools.ietf.org/html/rfc6454#section-5\" rel=\"nofollow\">http://tools.ietf.org/html/rfc6454#section-5</a></p>\n\n<p>The origins must match:</p>\n\n<ul>\n<li>scheme</li>\n<li>host</li>\n<li>port</li>\n</ul>\n\n<p>For you the the scheme and host are the same, but the ports are different.  Thus you will need to add the CORS headers to allow the caller to call your server on <code>http://localhost:9090</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 4378043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5851d92de4f2615f2afcc3f9bebddeb7?s=128&d=identicon&r=PG&f=1", "display_name": "Abinash Kumar Sinha", "link": "https://stackoverflow.com/users/4378043/abinash-kumar-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 27742690, "answer_count": 1, "score": 0, "last_activity_date": 1420203739, "creation_date": 1420095621, "question_id": 27728926, "link": "https://stackoverflow.com/questions/27728926/xmlhttprequest-cannot-load-http-localhost9090-receive-no-access-control-all", "title": "XMLHttpRequest cannot load http://localhost:9090/receive. No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource", "body": "<p>I am opening a html file through nginx server and then the html file passes the \"POST\" request from the dropzone to the nginx server which then proxy_pass to my go server.This go server then accepts the request.</p>\n\n<p>But when i try to use my html file and drop something in the dropzone i get the error :</p>\n\n<pre><code>XMLHttpRequest cannot load http://localhost:9090/receive. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://localhost:9009' is therefore not allowed access.\n</code></pre>\n\n<p>PLease help me out.</p>\n"}, {"tags": ["unicode", "go", "terminal", "rune"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1429814653, "post_id": 27728157, "comment_id": 47790147, "body": "You may also be interested in the <a href=\"https://godoc.org/golang.org/x/text/width\" rel=\"nofollow noreferrer\"><code>golang.org&#47;x&#47;text&#47;width</code></a> package, which is part of the <a href=\"https://golang.org/pkg/#subrepo\" rel=\"nofollow noreferrer\">Go project&#39;s sub-repositories</a>. There is also a (possibly) related Go project <a href=\"https://blog.golang.org/normalization\" rel=\"nofollow noreferrer\">blog article</a>."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429817121, "post_id": 27728157, "comment_id": 47791707, "body": "@DaveC Ah! That must be new. Maybe that package&#39;s existence is a consequence of the bug I filed about the absence of these functions?"}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429817786, "post_id": 27728157, "comment_id": 47792128, "body": "I don&#39;t think it offers the same functionality however, it just may be of interest as it&#39;s related."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1429817901, "post_id": 27728157, "comment_id": 47792208, "body": "@DaveC It does exactly what wcwidth does\u2014classifying characters with respect to size on terminal devices."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1420119607, "post_id": 27731208, "comment_id": 43873954, "body": "After extensive testing, I can confirm that this library does what I need. Thank you!"}], "tags": [], "owner": {"reputation": 143292, "user_id": 142162, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F5xn2.png?s=128&g=1", "display_name": "Tim Cooper", "link": "https://stackoverflow.com/users/142162/tim-cooper"}, "is_accepted": true, "score": 6, "last_activity_date": 1420118754, "creation_date": 1420118754, "answer_id": 27731208, "question_id": 27728157, "link": "https://stackoverflow.com/questions/27728157/is-there-an-equivalent-to-the-wcwidth-function-in-go/27731208#27731208", "title": "Is there an equivalent to the wcwidth() function in Go?", "body": "<blockquote>\n  <p>Does a similar function exist in the Go standard library or the supplementary libraries?</p>\n</blockquote>\n\n<p>I believe the most popular library for this is <a href=\"https://github.com/mattn/go-runewidth\" rel=\"noreferrer\">go-runewidth</a>.</p>\n\n<p>Example:</p>\n\n<pre><code>package main\n\nimport (\n  \"github.com/mattn/go-runewidth\"\n)\n\nfunc main() {\n  println(runewidth.StringWidth(\"A\"))   // prints 1\n  println(runewidth.StringWidth(\"\u5b57\"))  // prints 2\n}\n</code></pre>\n"}], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 1, "accepted_answer_id": 27731208, "answer_count": 1, "score": 2, "last_activity_date": 1420662146, "creation_date": 1420084363, "last_edit_date": 1420662146, "question_id": 27728157, "link": "https://stackoverflow.com/questions/27728157/is-there-an-equivalent-to-the-wcwidth-function-in-go", "title": "Is there an equivalent to the wcwidth() function in Go?", "body": "<p>The POSIX function <code>wcwidth()</code> computes the width of a given <code>wchar_t</code> when printed on a terminal. For instance, <code>wcwidth(L'A')</code> returns <code>1</code>, <code>wcwidth(L'\u5b57')</code> returns <code>2</code>, etc. There is also a function <code>wcswidth()</code> which computes the width of an entire string\u2014this is useful if combining accents are present.</p>\n\n<p>Does a similar function exist in the Go standard library or the supplementary libraries? If not, is there an easy way to make something sufficiently similar?</p>\n"}, {"tags": ["go", "mgo"], "answers": [{"tags": [], "owner": {"reputation": 62894, "user_id": 1114486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0513d720af96f4496f4b869fe9579a?s=128&d=identicon&r=PG", "display_name": "Didier Spezia", "link": "https://stackoverflow.com/users/1114486/didier-spezia"}, "is_accepted": true, "score": 1, "last_activity_date": 1420117438, "creation_date": 1420117438, "answer_id": 27731053, "question_id": 27728146, "link": "https://stackoverflow.com/questions/27728146/query-document-with-different-struct-for-results/27731053#27731053", "title": "Query Document with different struct for results", "body": "<p>It works perfectly for me, with MongoDB 2.6.5</p>\n\n<p>The following code:</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"gopkg.in/mgo.v2\"\n    \"gopkg.in/mgo.v2/bson\"\n    \"log\"\n)\n\ntype Statistics struct {\n    Url  string\n    Hits int\n}\n\ntype Person struct {\n    Num   int\n    Uuid  string\n    Name  string\n    Stats []Statistics\n}\n\nfunc main() {\n\n    // Connect to the database\n    session, err := mgo.Dial(\"localhost\")\n    if err != nil {\n        panic(err)\n    }\n    defer session.Close()\n\n    // Remove people collection if any\n    c := session.DB(\"test\").C(\"people\")\n    c.DropCollection()\n\n    // Add some data\n    err = c.Insert(\n        &amp;Person{1, \"UUID1\", \"Joe\", []Statistics{Statistics{\"a\", 1}, Statistics{\"b\", 2}}},\n        &amp;Person{2, \"UUID2\", \"Jane\", []Statistics{Statistics{\"c\", 3}, Statistics{\"d\", 4}}},\n        &amp;Person{3, \"UUID3\", \"Didier\", []Statistics{Statistics{\"e\", 5}, Statistics{\"f\", 6}}})\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    result := []Person{}\n    err = c.Find(bson.M{\"$or\": []bson.M{bson.M{\"uuid\": \"UUID3\"}, bson.M{\"name\": \"Joe\"}}}).Select(bson.M{\"num\": 1, \"name\": 1, \"stats.hits\": 1}).All(&amp;result)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Println(result)\n}\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>[{1  Joe [{ 1} { 2}]} {3  Didier [{ 5} { 6}]}]\n</code></pre>\n\n<p>... which is precisely what I would expect.</p>\n"}, {"tags": [], "owner": {"reputation": 811, "user_id": 2644113, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/23949b1ad01e3b7237a23382706a4305?s=128&d=identicon&r=PG", "display_name": "user2644113", "link": "https://stackoverflow.com/users/2644113/user2644113"}, "is_accepted": false, "score": 0, "last_activity_date": 1420133018, "creation_date": 1420133018, "answer_id": 27732937, "question_id": 27728146, "link": "https://stackoverflow.com/questions/27728146/query-document-with-different-struct-for-results/27732937#27732937", "title": "Query Document with different struct for results", "body": "<p>Maybe this will help others - essentially I was trying to take a document with an embedded document and return a result set like I would do in SQL with a select a.LastName + ', ' + a.FirstName as Name, b.OtherData and in essence have a different 'table' / 'document'.  </p>\n\n<p>So here is my current solution - love to get better ones (more performant?) though!</p>\n\n<p>I created a new struct and I'm using the 'mapstructure' library </p>\n\n<pre><code>import \"github.com/goinggo/mapstructure\"\n\n\ntype Stats struct {\n   UserStatus string `json:\"userStatus\" bson:\"userStatus\"`\n   ... a bunch more fields\n}\n\ntype User struct {\n    ID               bson.ObjectId `json:\"-\" bson:\"_id\"`\n    LastName         string        `json:\"lastName\"  bson:\"lastName\"`\n    FirstName        string        `json:\"firstName\" bson:\"firstName\"`\n    Role             string        `json:\"role\" bson:\"role\"`\n    Tags             []string      `json:\"tags\" bson:\"tags\"`\n    ... (a bunch more fields)\n    Stats            UserStats     `json:\"stats\" bson:\"stats\"`\n}\n\n\ntype MyReportItem struct {\n   FirstName   string `json:\"firstName\" jpath:\"firstName\"`\n   LastName    string `json:\"lastName\"  jpath:\"lastName\"`\n   Status      string `json:\"status\"    jpath:\"stats.userStatus\"`\n}\n\ntype MyReport struct {\n     Results []MyReportItem `json:\"results\"`\n}\n\n\nfunc xxxx(w http.ResponseWriter, r *http.Request) {\n\n   var users MyReportItem\n\n   // the results will come back as a slice of map[string]interface{}\n   mgoResult := []map[string]interface{}{}\n\n   // execute the query\n   err := c.Find(finder).Select(projection).All(&amp;mgoResult)\n   if err != nil {\n      http.Error(w, err.Error(), http.StatusInternalServerError)\n      return\n   }\n\n   user := MyReportItem{}\n   // iterate through the results and decode them into the MyReport struct\n   for _, x := range mgoResult {\n      docScript, _ := json.Marshal(x)\n      docMap := map[string]interface{}{}\n      json.Unmarshal(docScript, &amp;docMap)\n\n      err := mapstructure.DecodePath(docMap, &amp;user)\n      if err == nil {\n        users.Results = append(users.Results, user)\n     }\n   }\n\n   ... send back the results ...\n   _ := json.NewEncoder(w).Encode(&amp;users)\n}\n</code></pre>\n\n<p>Now I get a slice of objects in the form:</p>\n\n<pre><code>results: [\n  {\n     firstName: \"John\",\n     lastName: \"Doe\",\n     status: \"active\"\n  }\n  ...\n]\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>{\n    firstName: \"John\",\n    lastName: \"Doe\",\n    stats: {\n             status: \"active\"\n           }\n}\n</code></pre>\n"}], "owner": {"reputation": 811, "user_id": 2644113, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/23949b1ad01e3b7237a23382706a4305?s=128&d=identicon&r=PG", "display_name": "user2644113", "link": "https://stackoverflow.com/users/2644113/user2644113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 27731053, "answer_count": 2, "score": 2, "last_activity_date": 1420133018, "creation_date": 1420084131, "question_id": 27728146, "link": "https://stackoverflow.com/questions/27728146/query-document-with-different-struct-for-results", "title": "Query Document with different struct for results", "body": "<p>I have a collection of documents that were inserted into Mongo looking something like this:</p>\n\n<pre><code>type Stats struct {\n   UserStatus string `json:\"userStatus\" bson:\"userStatus\"`\n   ... a bunch more fields\n}\n\ntype User struct {\n    ID               bson.ObjectId `json:\"-\" bson:\"_id\"`\n    LastName         string        `json:\"lastName\"  bson:\"lastName\"`\n    FirstName        string        `json:\"firstName\" bson:\"firstName\"`\n    Role             string        `json:\"role\" bson:\"role\"`\n    Tags             []string      `json:\"tags\" bson:\"tags\"`\n    ... (a bunch more fields)\n    Stats            UserStats     `json:\"stats\" bson:\"stats\"`\n}\n</code></pre>\n\n<p>I want to query it to get a specific report, so I tried this:</p>\n\n<pre><code>func UserNameReport() {\n    ... get mongo session, etc.\n\n   // create struct of just the data I want returned\n    type UserNames struct {\n        LastName         string        `json:\"lastName\"  bson:\"lastName\"`\n        FirstName        string        `json:\"firstName\" bson:\"firstName\"`\n        ... etc\n        UserStats        Stats         `json:\"stats\" bson:\"stats\"` \n    }\n\n    projection := bson.M{\"lastName\":1, \"firstName\":1, etc}\n    result := []UserNames{}\n    err := x.Find({query user collection}).Select(projection).All(&amp;result)\n    ...\n}\n</code></pre>\n\n<p>This works - my question is, how can I include just ONE field from the 'Stats' struct?  In other words,\nI essentially want the \"projection\" to be this:</p>\n\n<pre><code>projection := bson.M{\"lastName\":1, ..., \"stats.userStatus\":1}  &lt;-- stats.userStatus doesn't work\n...\nerr := x.Find({query user collection}).Select(projection).All(&amp;result)\n</code></pre>\n\n<p>I get the entire \"Stats\" embedded struct in the results - how can I filter out just one field from the sub-document in and put it into the result set?</p>\n\n<p>Thanks!</p>\n"}]