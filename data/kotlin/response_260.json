[{"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "edited": false, "score": 0, "creation_date": 1577833158, "post_id": 59548956, "comment_id": 105267078, "body": "Please add your code so people can help you better."}, {"owner": {"reputation": 11, "user_id": 12634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1169e5feddd39c2f8165340af393a4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12634219/daniel"}, "reply_to_user": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "edited": false, "score": 0, "creation_date": 1577842234, "post_id": 59548956, "comment_id": 105268110, "body": "There&#39;s not really much to add. I have two edittexts and a button in my layout, and in my kotlin file I have the mathematical formula for the conversion."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1169e5feddd39c2f8165340af393a4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12634219/daniel"}, "edited": false, "score": 0, "creation_date": 1577930318, "post_id": 59549654, "comment_id": 105283486, "body": "That works. Thanks! I had played around with addTextChangedListener, but couldn&#39;t get it to work. I did change the if statement to (s.isNotEmpty() &amp;&amp; edittext2.isFocused). Without the isFocused it wouldn&#39;t let me change the text. I guess since the two were at odds with each other."}, {"owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "reply_to_user": {"reputation": 11, "user_id": 12634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1169e5feddd39c2f8165340af393a4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12634219/daniel"}, "edited": false, "score": 0, "creation_date": 1577930403, "post_id": 59549654, "comment_id": 105283502, "body": "let me know if more help required and upvote if it helped you."}, {"owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "reply_to_user": {"reputation": 11, "user_id": 12634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1169e5feddd39c2f8165340af393a4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12634219/daniel"}, "edited": false, "score": 0, "creation_date": 1577931369, "post_id": 59549654, "comment_id": 105283650, "body": "(s.isNotEmpty() || edittext2.isFocused) why not to use or condition"}], "tags": [], "owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "is_accepted": false, "score": -1, "last_activity_date": 1577845590, "creation_date": 1577845590, "answer_id": 59549654, "question_id": 59548956, "link": "https://stackoverflow.com/questions/59548956/updating-edittexts-on-the-fly/59549654#59549654", "title": "Updating EditTexts on the fly", "body": "<p>Try this out</p>\n\n<pre><code>    edittext2.addTextChangedListener(object : TextWatcher {\n\n        override fun onTextChanged(s: CharSequence, start: Int, before: Int,\n                                   count: Int) {\n            if (s != \"\") {\n                val outPut=Integer.parseInt(\"get the value of editText1\")+ Integer.parseInt(\"get the value of editText2\")\n                txtOutPut.text=\"$outPut\"\n            }\n\n        }\n\n        override fun beforeTextChanged(s: CharSequence, start: Int, count: Int,\n                                       after: Int) {\n\n        }\n\n        override fun afterTextChanged(s: Editable) {\n\n        }\n    })\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e1169e5feddd39c2f8165340af393a4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/12634219/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577845590, "creation_date": 1577832513, "question_id": 59548956, "link": "https://stackoverflow.com/questions/59548956/updating-edittexts-on-the-fly", "title": "Updating EditTexts on the fly", "body": "<p>Trying to learn kotlin and I'm working on a simple conversion app where I have two edittexts. I would like for the calculation to happen automatically when I change the text. So if edittext2 is supposed to be 10 times larger than edittext1, I'd like edittext1 change to 10 if I enter 100 in edittext2 and if I change edittext2 to 50, edittext1 changes to 5, etc..</p>\n\n<p>Currently I have a convert and clear button, but I would like to minimize the design and make it less cumbersome.</p>\n"}, {"tags": ["android", "testing", "kotlin", "junit", "expresso"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 12358187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843090eac1bfdf390549f0cc7dc8166?s=128&d=identicon&r=PG&f=1", "display_name": "SomeKoder", "link": "https://stackoverflow.com/users/12358187/somekoder"}, "edited": false, "score": 0, "creation_date": 1578085645, "post_id": 59549473, "comment_id": 105337152, "body": "Thank you so much! Will look into it :)"}], "tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": false, "score": 1, "last_activity_date": 1577842099, "creation_date": 1577842099, "answer_id": 59549473, "question_id": 59548647, "link": "https://stackoverflow.com/questions/59548647/how-to-unit-test-location-services-pop-up-in-android/59549473#59549473", "title": "How to unit test location services pop up in Android", "body": "<p>Shameless self-plug: I wrote an article describing a solution to a similar problem back in 2016 called <a href=\"https://blog.egorand.me/testing-runtime-permissions-lessons-learned/\" rel=\"nofollow noreferrer\">Testing Runtime Permissions: Lessons Learned</a>, hope it's still useful. TLDR: since the permission dialog is a system dialog and lives outside of your app's process, it's not reachable with Espresso. You'd need to use the <a href=\"https://developer.android.com/training/testing/ui-automator\" rel=\"nofollow noreferrer\">UI Automator</a>, which offers more possibilities in terms of accessing system UI from under test.</p>\n"}], "owner": {"reputation": 137, "user_id": 12358187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3843090eac1bfdf390549f0cc7dc8166?s=128&d=identicon&r=PG&f=1", "display_name": "SomeKoder", "link": "https://stackoverflow.com/users/12358187/somekoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577842099, "creation_date": 1577828579, "question_id": 59548647, "link": "https://stackoverflow.com/questions/59548647/how-to-unit-test-location-services-pop-up-in-android", "title": "How to unit test location services pop up in Android", "body": "<p>I'm really trying to wrap  my head  around unit testing.   Could use a  little help for a  road block. I'm  trying  to click the location popup buttons when asking  for location  permissions.\nI'm using JUnit 4 and expresso.\nHere's my test rule:</p>\n\n<pre><code>@get:Rule\nval testRule: ActivityTestRule&lt;MyActivity&gt; = ActivityTestRule(MyActivity::class.java)\n</code></pre>\n\n<p>I got a set up function:</p>\n\n<pre><code>@Before\nfun setUp() {\n    mActivity = testRule.activity\n    mFragment = MyFragment.newInstance()\n}\n</code></pre>\n\n<p>And finally my button click  test:</p>\n\n<pre><code>@Test\nfun testLocationClick(){\n    Assert.assertNotNull(onView(withId(R.id.button_turn_on_location)))\n    onView(withId(R.id.button_turn_on_location)).perform(click())\n\n    onView(withText(\"Allow all\")).perform(click())\n</code></pre>\n\n<p>This last line  saying \"Allow  all\" was my attempt to try and click on the allow button but  it  does  not  work. Here's an attached image showing what I'm  trying to click.\n<a href=\"https://i.stack.imgur.com/lBUbe.png\" rel=\"nofollow noreferrer\">Image</a></p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12251581"}, "is_accepted": false, "score": 1, "last_activity_date": 1577879297, "creation_date": 1577879297, "answer_id": 59552230, "question_id": 59548394, "link": "https://stackoverflow.com/questions/59548394/fragment-not-loading-after-second-click-on-bottom-navigation/59552230#59552230", "title": "Fragment not loading after second click on bottom navigation", "body": "<p>Try to use <code>childFragmentManager</code> instead of <code>supportFragmentManager</code></p>\n\n<pre><code>homePagerAdapter = HomeViewpagerAdapter(activity!!.supportFragmentManager)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8409608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c17341d78db186e7b76981f7117309?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzeb", "link": "https://stackoverflow.com/users/8409608/shahzeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577891890, "creation_date": 1577825860, "last_edit_date": 1577891890, "question_id": 59548394, "link": "https://stackoverflow.com/questions/59548394/fragment-not-loading-after-second-click-on-bottom-navigation", "title": "Fragment not loading after second click on bottom navigation", "body": "<p>i am trying to add viewpager and tablayout along with bottom navigation. First time fragment loads fine then i click the item the fragment is not loading properly\nhere is my main activity code</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;include layout=\"@layout/toolbar\"\n        android:id=\"@+id/layout_toolbar\"/&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/fragmentContainer\"\n        android:layout_width=\"match_parent\"\n        android:layout_weight=\"1\"\n        android:layout_height=\"0dp\"/&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottomNav\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        app:menu=\"@menu/bottom_nav_menu\"\n        android:background=\"@drawable/bg_bottom_bar\"\n        /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>Kotlin Code</strong></p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>    bottomNav.setOnNavigationItemSelectedListener {\n            var selectedFragment: Fragment? = null\n            when (it.itemId) {\n                R.id.homeFragment -&gt; {\n                    replaceFragment(fragment = HomeFragment())\n                    return@setOnNavigationItemSelectedListener true\n                }\n                R.id.fixtures -&gt; {\n                    replaceFragment(fragment = AllMatchsFragment())\n                    return@setOnNavigationItemSelectedListener true\n                }\n\n\n            }\n\n            false\n        }\n    private fun replaceFragment(fragment: Fragment) {\n        supportFragmentManager.beginTransaction().replace(R.id.fragmentContainer, fragment).commit()\n    }\n</code></pre>\n\n<p>Here is fragment code where i want to load <code>viewpager</code> and <code>tablayout</code>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>        homePagerAdapter = HomeViewpagerAdapter(activity!!.supportFragmentManager)\n        homePagerAdapter!!.populateFragment(AllMatchsFragment())\n        homePagerAdapter!!.populateFragment(LiveMatchesFragment())\n\n        view.homeViewPager.adapter=homePagerAdapter\n        view.tabLayout.setupWithViewPager(view.homeViewPager)\n\n        return view\n</code></pre>\n\n<p><strong>Fragment XML</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;com.google.android.material.tabs.TabLayout\n        android:id=\"@+id/tabLayout\"\n        android:layout_width=\"172dp\"\n        android:layout_height=\"wrap_content\"\n        app:tabMode=\"fixed\"\n        app:tabTextColor=\"@color/colorPrimary\"\n        app:tabSelectedTextColor=\"@color/colorAccent\"\n        &gt;\n\n\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\n\n\n    &lt;androidx.viewpager.widget.ViewPager\n        android:id=\"@+id/homeViewPager\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_below=\"@id/tabLayout\"/&gt;\n</code></pre>\n\n<p><strong>ViewPagerAdapter</strong></p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>    val tabNameList= listOf(\"All\",\"Live\")\n    val fragmentList = mutableListOf&lt;Fragment&gt;()\n    override fun getItem(position: Int): Fragment {\n        return fragmentList[position]\n    }\n    override fun getCount(): Int {\n        return 2\n    }\n\n    override fun getPageTitle(position: Int): CharSequence? {\n        return tabNameList[position]\n    }\n\n    fun populateFragment(fragment: Fragment){\n        fragmentList.add(fragment)\n\n    }\n</code></pre>\n\n<p>When I perform second click on the second viewpager got stuck and fragment disappear when I close and reopen the app it works fine and after second click again remain the same.</p>\n"}, {"tags": ["android", "kotlin", "android-videoview"], "comments": [{"owner": {"reputation": 3908, "user_id": 2442831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02549a823af84370033c7389ec6f553f?s=128&d=identicon&r=PG", "display_name": "Lino", "link": "https://stackoverflow.com/users/2442831/lino"}, "edited": false, "score": 0, "creation_date": 1577824577, "post_id": 59548239, "comment_id": 105265561, "body": "it should work.. do you have flavours in your app?"}, {"owner": {"reputation": 93, "user_id": 6668924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bb23736c063aebb83f85455a65d290?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6668924/edward"}, "reply_to_user": {"reputation": 3908, "user_id": 2442831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02549a823af84370033c7389ec6f553f?s=128&d=identicon&r=PG", "display_name": "Lino", "link": "https://stackoverflow.com/users/2442831/lino"}, "edited": false, "score": 0, "creation_date": 1577828194, "post_id": 59548239, "comment_id": 105266213, "body": "I&#39;m not sure what flavours are"}, {"owner": {"reputation": 93, "user_id": 6668924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bb23736c063aebb83f85455a65d290?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6668924/edward"}, "reply_to_user": {"reputation": 3908, "user_id": 2442831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02549a823af84370033c7389ec6f553f?s=128&d=identicon&r=PG", "display_name": "Lino", "link": "https://stackoverflow.com/users/2442831/lino"}, "edited": false, "score": 0, "creation_date": 1577828892, "post_id": 59548239, "comment_id": 105266338, "body": "I had this line in my imports which was messing it up import android.support.compat.R"}], "owner": {"reputation": 93, "user_id": 6668924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bb23736c063aebb83f85455a65d290?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/6668924/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577824229, "creation_date": 1577824229, "question_id": 59548239, "link": "https://stackoverflow.com/questions/59548239/android-videoview-not-finding-file-in-r-raw", "title": "Android videoView not finding file in R.raw", "body": "<p>I created the raw resources directory and inserted the video test.mp4 into it.</p>\n\n<p>I am try to run the following code but it is giving me an unresolved reference on test</p>\n\n<pre><code>        val uri = Uri.parse(\"android.resource://\" + packageName + \"/\" + R.raw.test)\n        videoview.setVideoURI(uri)\n        videoview.setOnPreparedListener { videoview.start() }\n</code></pre>\n"}, {"tags": ["kotlin", "android-room", "android-recyclerview", "data-class"], "answers": [{"tags": [], "owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "is_accepted": false, "score": 0, "last_activity_date": 1580748605, "creation_date": 1580748605, "answer_id": 60043676, "question_id": 59548046, "link": "https://stackoverflow.com/questions/59548046/dynamic-sectioned-recyclerview-room-and-single-data-class/60043676#60043676", "title": "Dynamic/Sectioned RecyclerView, Room and Single Data Class", "body": "<p>I chose to address this by transforming the data in the ViewModel into a list of the embedded classes.  While I\u2019m still not certain if this is the best direction, and would appreciate some commentary here, the relevant changes are below.</p>\n\n<pre><code>class MainViewModel(private val repository: DataRepository) : ViewModel() {\n    //...\n\n    init {\n        _people = Transformations.map(repository.livePeopleMessages()) { peopleWithMessages -&gt;\n            peopleWithMessages.flatMap {\n                mutableListOf&lt;Any&gt;(it.Person).also { personWithMessages -&gt;\n                    personWithMessages.addAll(it.Messages)\n                }\n            }\n        }\n    }\n//...\n}\n\nclass PeopleViewAdapter: ListAdapter&lt;Any, RecyclerView.ViewHolder&gt;(PeopleDiffCallback()) {//...}\n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580748605, "creation_date": 1577822467, "question_id": 59548046, "link": "https://stackoverflow.com/questions/59548046/dynamic-sectioned-recyclerview-room-and-single-data-class", "title": "Dynamic/Sectioned RecyclerView, Room and Single Data Class", "body": "<p>New to Android development and Kotlin.  I\u2019m hoping to use different views based on the properties of my data class, but I\u2019m not really sure how and I\u2019m uncertain if what I want to do is even possible.  I know I need to override getItemViewType, and leverage that in onCreateViewHolder, but I\u2019m confused with the code for getItemViewType.</p>\n\n<p>Room Data Class</p>\n\n<pre><code>data class PersonMessages(\n        @Embedded\n        val Person: Person,\n        @Relation(\n                parentColumn = \"id\",\n                entityColumn = \"person_id\"\n        )\n        val Messages: List&lt;Messages&gt;\n)\n</code></pre>\n\n<p>RecyclerView Adapter</p>\n\n<pre><code>class PeopleViewAdapter: ListAdapter&lt;PersonMessages, PeopleViewAdapter.ViewHolder&gt;(PeopleDiffCallback()) {\n//    ...\noverride fun getItemViewType(position: Int): Int =\n        when (getItem(position)) {\n            is Messages -&gt; R.layout.fragment_message_detail\n            is Person -&gt; R.layout.fragment_people_detail\n            else -&gt; throw IllegalStateException(\"Illegal item view type\")\n        }\n}\n</code></pre>\n\n<p>For getItemViewType, Android Studio correctly complains that Messages and Person are Incompatible types with PersonMessages, but I have no idea as to what I need to change, and where, to get this to work.</p>\n\n<p>All clue sticks appreciated.</p>\n"}, {"tags": ["spring", "jpa", "kotlin", "spring-data-jpa"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1577822755, "post_id": 59547724, "comment_id": 105265150, "body": "Don&#39;t use native queries. Learn JPQL. Here&#39;s the documentation about joins in JPQL: <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#hql-explicit-join\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/current/userguide/html_single/&hellip;</a>&zwnj;&#8203;. Also, between the controller returning JSON, and the query returning data, you can, and should write code that transforms the data into the objects you want, so that you send back the JSON you want. Yoru query actually returns a List&lt;Array&lt;Any?&gt;&gt;, and you can transform this list into whatever you want."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 0, "creation_date": 1577991387, "post_id": 59552108, "comment_id": 105304916, "body": "thanks for the direction Alexey. So I updated my code, but I now get an error:  No converter found capable of converting from type [org.springframework.data.jpa.repository.query.AbstractJpaQu&zwnj;&#8203;ery$TupleConverter$T&zwnj;&#8203;upleBackedMap] to type [catpipe.report.model.ReportWithBatches]] with root cause. How do I change the query to avoid this error?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 1, "creation_date": 1577996669, "post_id": 59552108, "comment_id": 105306895, "body": "What&#39;s the return type of your repository now? It seems by the error that JPA is trying to convert directly to your class, which shouldn&#39;t be the case."}, {"owner": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 0, "creation_date": 1577998522, "post_id": 59552108, "comment_id": 105307500, "body": "I&#39;m not sure what the return type is, I will try to debug ."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 1, "creation_date": 1577998940, "post_id": 59552108, "comment_id": 105307645, "body": "Your repository should return <code>List&lt;Array&lt;Any?&gt;&gt;</code>, not <code>List&lt;ReportWithBatches&gt;</code>. <code>List&lt;ReportWithBatches&gt;</code> is returned only from the service, after you map it manually."}, {"owner": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 1, "creation_date": 1577999943, "post_id": 59552108, "comment_id": 105307961, "body": "got it! I just have an error with the localDate casting, will figure it out. Thank you! you are very kind."}, {"owner": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 0, "creation_date": 1578883310, "post_id": 59552108, "comment_id": 105571951, "body": "I was asked to redo the DTO by storing the data directly into it. This is the example I&#39; trying to follow: <a href=\"https://smarterco.de/spring-data-jpa-query-result-to-dto/\" rel=\"nofollow noreferrer\">smarterco.de/spring-data-jpa-query-result-to-dto</a>. However, since mine is an inner join query, I&#39;m not sure how to make it work. Should I leave ReportsWithBatches as a Data Class? is it correct the way it&#39;s done? where are my errors?"}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "reply_to_user": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "edited": false, "score": 0, "creation_date": 1578908089, "post_id": 59552108, "comment_id": 105578609, "body": "You certainly can use a regular <code>class</code> instead of <code>data class</code>. Those are questions you should address to one asking for the refactoring."}, {"owner": {"reputation": 303, "user_id": 1731158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa693ac4e60170303954274cc2531bff?s=128&d=identicon&r=PG", "display_name": "Gagan Singh", "link": "https://stackoverflow.com/users/1731158/gagan-singh"}, "edited": false, "score": 1, "creation_date": 1609758322, "post_id": 59552108, "comment_id": 115913328, "body": "thank you , thank you thank you."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 2, "last_activity_date": 1577878192, "creation_date": 1577878192, "answer_id": 59552108, "question_id": 59547724, "link": "https://stackoverflow.com/questions/59547724/kotlin-jpa-query-inner-join-using-two-types/59552108#59552108", "title": "Kotlin JPA query inner join using two types", "body": "<p>As was correctly stated in the comments, the return type of your query is <code>List&lt;Array&lt;Any?&gt;&gt;</code>, not <code>List&lt;Any&gt;</code>.</p>\n\n<p>Create a data class that would serve as your DTO and map results to it:</p>\n\n<pre><code>data class ReportWithBatchInfo(val azureFileName : String, /* more field here */)\n\nfun findAllByCreationDateJoinBatches(date: LocalDate): List&lt;ReportWithBatchInfo&gt; {\n    return reportRepository.findAllByCreationDateJoinBatches(date).map {\n        ReportWithBatchInfo(it[0] as String, /* more mappings here */)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 11371376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gP6GAP4KnJs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcj8Qtob-6pxcA3TUCmn2cJa5a5Aw/mo/photo.jpg?sz=128", "display_name": "Heidi E", "link": "https://stackoverflow.com/users/11371376/heidi-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 59552108, "answer_count": 1, "score": 2, "last_activity_date": 1578938588, "creation_date": 1577819440, "last_edit_date": 1578938588, "question_id": 59547724, "link": "https://stackoverflow.com/questions/59547724/kotlin-jpa-query-inner-join-using-two-types", "title": "Kotlin JPA query inner join using two types", "body": "<p>I am new to Kotlin and JPA. I have an inner join query that gets data from two tables(Postgres). The query works fine. However, since I now have two types (the two tables), using either one only returns all the fields from one of the tables. In order to return all fields, I changed the type to List. However, when I do that, my oject that is returned has no fields, only the raw data. How can I change my code so my json response contains both the name of the fields, as well as the data. </p>\n\n<p>Sorry if my question isn't clear, I'm very new to Kotlin.</p>\n\n<p>UPDATED CODE\nmy repository code</p>\n\n<pre><code>package com.sg.xxx.XXXTTT.report.repository\nimport com.sg.xxx.XXXTTT.report.model.Report\nimport com.sg.xxx.XXXTTT.report.model.ReportWithBatches\nimport org.springframework.data.jpa.repository.JpaRepository\nimport org.springframework.data.jpa.repository.Query\nimport org.springframework.stereotype.Repository\nimport java.time.LocalDate\n\n\n@Repository\ninterface IReportRepository : JpaRepository&lt;Report, Long&gt; {\n\n    fun findAllByCreationDate(date: LocalDate): List&lt;Report&gt;\n\n    fun findByReportName(name: String): Report?\n\n    fun findByAdlsFullPath(name: String): Report?\n\n    @Query(\"SELECT new com.sg.xxx.xxxttt.report.model.ReportWithBatches(r.adlsFullPath, r.sentToXXX, r.contentLength, r.creationDate, r.remoteFileNameOnFTA, b.dataPath , b.version, b.source, r.numberOfRecords) FROM Report r INNER JOIN BatchInfo b ON r.reportUuid = b.reportUuid WHERE r.creationDate = ?1\")\n    fun findAllByCreationDateJoinBatches(date: LocalDate): List&lt;ReportWithBatches&gt;\n}\n\n\n\n</code></pre>\n\n<p>my controller code</p>\n\n<pre><code>    @GetMapping(value = [\"/linkBatches/{today}\"])\n    fun findAllByCreationDateJoinBatches(@PathVariable(\"today\") @DateTimeFormat(pattern = \"yyyyMMdd\") date: LocalDate): List&lt;ReportWithBatches&gt; {\n        return eligibleService.findAllByCreationDateJoinBatches(date)\n    }\n</code></pre>\n\n<p>my DTO</p>\n\n<pre><code>package com.sg.xxx.xxxttt.report.model\nimport java.time.LocalDate\n\nopen class ReportWithBatches(\n        var adlsFullPath: String?,\n        var sentToXXX: Boolean?,\n        var contentLength: Long?,\n        var creationDate: LocalDate,\n        var remoteFileNameOnFTA: String?,\n        var dataPath: String?,\n        var version: Int?,\n        var source: String?,\n        var numberOfRecords: Long?\n)\n\n\n\n\n\n</code></pre>\n\n<p>my function in the service</p>\n\n<pre><code>fun findAllByCreationDateJoinBatches(date: LocalDate): List&lt;ReportWithBatches&gt; {\n        return reportRepository.findAllByCreationDateJoinBatches(date)\n    }\n        }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "exoplayer2.x"], "answers": [{"tags": [], "owner": {"reputation": 1291, "user_id": 8660721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpPvW.jpg?s=128&g=1", "display_name": "Mohammad Sommakia", "link": "https://stackoverflow.com/users/8660721/mohammad-sommakia"}, "is_accepted": true, "score": 0, "last_activity_date": 1581524729, "creation_date": 1581524729, "answer_id": 60192888, "question_id": 59547714, "link": "https://stackoverflow.com/questions/59547714/android-grey-view-instead-of-back-and-home-button-of-the-screen-when-using-exo/60192888#60192888", "title": "Android : Grey View instead of back and home button of the screen when using exo player in full screen mode", "body": "<p>finally i solved the problem by removing </p>\n\n<pre><code>android:fitsSystemWindows=\"true\"\n</code></pre>\n\n<p>from the <code>MainActivity</code> root view and it worked perfectly </p>\n"}], "owner": {"reputation": 1291, "user_id": 8660721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpPvW.jpg?s=128&g=1", "display_name": "Mohammad Sommakia", "link": "https://stackoverflow.com/users/8660721/mohammad-sommakia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 60192888, "answer_count": 1, "score": 0, "last_activity_date": 1581524729, "creation_date": 1577819345, "question_id": 59547714, "link": "https://stackoverflow.com/questions/59547714/android-grey-view-instead-of-back-and-home-button-of-the-screen-when-using-exo", "title": "Android : Grey View instead of back and home button of the screen when using exo player in full screen mode", "body": "<p>I have a problem when click on full screen button in exo player like this</p>\n\n<p>and i use this code to make the full screen mode</p>\n\n<p><a href=\"https://i.stack.imgur.com/KnK9a.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KnK9a.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>activity?.window?.decorView?.systemUiVisibility = (View.SYSTEM_UI_FLAG_FULLSCREEN\n                        or View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\n                        or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION)\n                if ((activity as AppCompatActivity?)?.supportActionBar != null) {\n                    (activity as AppCompatActivity?)?.supportActionBar?.hide()\n                }\n                activity?.requestedOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE\n                val params =\n                    first_channel_vp.layoutParams as RelativeLayout.LayoutParams\n                params.width = ViewGroup.LayoutParams.MATCH_PARENT\n                params.height = ViewGroup.LayoutParams.MATCH_PARENT\n                first_channel_vp.layoutParams = params\n                fullscreen = true\n                first_channel_vp.resizeMode = AspectRatioFrameLayout.RESIZE_MODE_FILL\n</code></pre>\n\n<p>thanks in advance.</p>\n"}, {"tags": ["android", "kotlin", "retrofit", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 11374232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1955ea2a40d036a2411a03732874139c?s=128&d=identicon&r=PG", "display_name": "Pyro", "link": "https://stackoverflow.com/users/11374232/pyro"}, "is_accepted": false, "score": 0, "last_activity_date": 1577815888, "creation_date": 1577815888, "answer_id": 59547322, "question_id": 59547191, "link": "https://stackoverflow.com/questions/59547191/android-kotlin-retrofit2-query-not-working/59547322#59547322", "title": "Android - Kotlin - Retrofit2 | @Query not working", "body": "<p>Well, fully deleting the app seems to have fixed that...</p>\n"}], "owner": {"reputation": 25, "user_id": 11374232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1955ea2a40d036a2411a03732874139c?s=128&d=identicon&r=PG", "display_name": "Pyro", "link": "https://stackoverflow.com/users/11374232/pyro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577815888, "creation_date": 1577814969, "question_id": 59547191, "link": "https://stackoverflow.com/questions/59547191/android-kotlin-retrofit2-query-not-working", "title": "Android - Kotlin - Retrofit2 | @Query not working", "body": "<p>I'm trying to get a parameter in my API request url.</p>\n\n<p>If I set it like this it works</p>\n\n<pre><code>interface SteamApiService{\n    @GET(\"appdetails?appids=218620\")\n    fun getGame(): Deferred&lt;Map&lt;String, GameDetailedWrapper2&gt;&gt;\n}\n</code></pre>\n\n<p>I now want to use a variable I put in the getGame()\nAs far as I can tell you're supposed to do this with the @Query but I can't seem to get it working.\nI also can't figure out if there's a way to see the actual call you make (that'd have helped me debug)\nBeneath this is my full ApiService with the @Query I tried (among others)</p>\n\n<p>My ApiService</p>\n\n<pre><code>package com.example.projectandroid.data.network\n\nimport com.example.projectandroid.model.Game\nimport com.example.projectandroid.model.GameDetailed\nimport com.example.projectandroid.model.GameDetailedWrapper\nimport com.example.projectandroid.model.GameDetailedWrapper2\nimport com.jakewharton.retrofit2.adapter.kotlin.coroutines.CoroutineCallAdapterFactory\nimport com.squareup.moshi.Moshi\nimport com.squareup.moshi.kotlin.reflect.KotlinJsonAdapterFactory\nimport kotlinx.coroutines.Deferred\nimport okhttp3.OkHttpClient\nimport retrofit2.Retrofit\nimport retrofit2.converter.moshi.MoshiConverterFactory\nimport retrofit2.http.GET\nimport retrofit2.http.Path\nimport retrofit2.http.Query\n\nprivate const val BASE_URL_STEAM = \"https://store.steampowered.com/api/\"\n\nprivate val moshi = Moshi.Builder()\n    //.add(ResponseGetGamesAdapter())\n    .add(KotlinJsonAdapterFactory())\n    .build()\n\n//OkhttpClient for building http request url\nprivate val tmdbClient = OkHttpClient().newBuilder()\n    .build()\n\nprivate val retrofit = Retrofit.Builder()\n    .client(tmdbClient)\n    .addConverterFactory(MoshiConverterFactory.create(moshi))\n    .addCallAdapterFactory(CoroutineCallAdapterFactory())\n    .baseUrl(BASE_URL_STEAM)\n    .build()\n\n\ninterface SteamApiService{\n    @GET(\"appdetails\")\n    fun getGame(@Query(\"appids\") appid:String): Deferred&lt;Map&lt;String, GameDetailedWrapper2&gt;&gt;\n\n}\n\n\n\nobject SteamApi {\n    val retrofitService: SteamApiService by lazy {\n        retrofit.create(SteamApiService::class.java)\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 21989, "user_id": 715269, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/81265cf97af6195bd098512acbf47d03?s=128&d=identicon&r=PG", "display_name": "Gangnus", "link": "https://stackoverflow.com/users/715269/gangnus"}, "edited": false, "score": 0, "creation_date": 1577812862, "post_id": 59546695, "comment_id": 105262766, "body": "I see. Only there should be <code>String?,</code> without the question mark, it is an error, too."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1577811185, "creation_date": 1577811185, "answer_id": 59546695, "question_id": 59546560, "link": "https://stackoverflow.com/questions/59546560/is-the-syntax-of-the-right-expression-dependent-on-the-type-of-the-left-value/59546695#59546695", "title": "Is the syntax of the right expression dependent on the type of the left value?", "body": "<p><code>String email = client?.personalInfo?.email</code> is not a valid Kotlin syntax. It's a Java syntax. </p>\n\n<p>If you'd like to specify the type, you do it after the variable name:</p>\n\n<pre><code>val email: String = client?.personalInfo?.email\n</code></pre>\n\n<p>The error is just telling you that compiler is not able to even parse the code.</p>\n"}], "owner": {"reputation": 21989, "user_id": 715269, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/81265cf97af6195bd098512acbf47d03?s=128&d=identicon&r=PG", "display_name": "Gangnus", "link": "https://stackoverflow.com/users/715269/gangnus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 59546695, "answer_count": 1, "score": 0, "last_activity_date": 1577989792, "creation_date": 1577810357, "last_edit_date": 1577989792, "question_id": 59546560, "link": "https://stackoverflow.com/questions/59546560/is-the-syntax-of-the-right-expression-dependent-on-the-type-of-the-left-value", "title": "Is the syntax of the right expression dependent on the type of the left value?", "body": "<p>Following the tutorial from Kotlin Koans I have met a task about Nullable Types.</p>\n\n<p>This code is accepted by the compiler as correct:</p>\n\n<pre><code>fun sendMessageToClient(\n        client: Client?, message: String?, mailer: Mailer\n) {\n    val email = client?.personalInfo?.email;\n    if(email != null &amp;&amp; message!=null)\n    mailer.sendMessage(email, message);\n}\n\nclass Client(val personalInfo: PersonalInfo?)\nclass PersonalInfo(val email: String?)\ninterface Mailer {\n    fun sendMessage(email: String, message: String)\n}\n</code></pre>\n\n<p>If I change only one word <code>val</code> to <code>String</code>:</p>\n\n<pre><code>fun sendMessageToClient(\n        client: Client?, message: String?, mailer: Mailer\n) {\n      // here is the change\n    String email = client?.personalInfo?.email;\n    if(email != null &amp;&amp; message!=null)\n    mailer.sendMessage(email, message);\n}\n\nclass Client(val personalInfo: PersonalInfo?)\nclass PersonalInfo(val email: String?)\ninterface Mailer {\n    fun sendMessage(email: String, message: String)\n}\n</code></pre>\n\n<p>the line under the comment is marked by the compiler as having 4 same errors \"Expecting an element\", placed at <code>=</code>, both <code>?.</code> and <code>;</code>.</p>\n\n<p>If I remove <code>val</code> in both Client and PersonalInfo class descriptions, nothing changes.</p>\n\n<p>What do these errors mean?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577811007, "post_id": 59546409, "comment_id": 105262201, "body": "Could you please elaborate your use-case, as to what you&#39;re trying to achieve here?"}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "reply_to_user": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577811827, "post_id": 59546409, "comment_id": 105262452, "body": "@MadhuBhat Question edited."}, {"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577813990, "post_id": 59546409, "comment_id": 105263072, "body": "But isn&#39;t that completely against the concept of a compile-time constant? Hence I very much doubt that it&#39;s possible to achieve that."}, {"owner": {"reputation": 5057, "user_id": 4695271, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/fNlXZ.png?s=128&g=1", "display_name": "x80486", "link": "https://stackoverflow.com/users/4695271/x80486"}, "edited": false, "score": 0, "creation_date": 1577814249, "post_id": 59546409, "comment_id": 105263151, "body": "If you have inputs, then you wouldn&#39;t have anything constant, right? Unless those are fixed also ;)"}, {"owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "edited": false, "score": 0, "creation_date": 1577815567, "post_id": 59546409, "comment_id": 105263523, "body": "When I say input, I mean input them into my code, i.e. add the constant to my code. Hope that makes more sense."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577869579, "post_id": 59546409, "comment_id": 105271103, "body": "@MadhuBhat No, it isn&#39;t; you can do it in C++, Rust, some other languages. Just not on JVM."}, {"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577871033, "post_id": 59546409, "comment_id": 105271324, "body": "@AlexeyRomanov yes exactly, I was talking about the context of the question, ie JVM :)"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577871516, "post_id": 59546409, "comment_id": 105271409, "body": "@MadhuBhat Ok, but &quot;completely against the concept&quot; seemed to imply a stronger claim to me."}, {"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577871713, "post_id": 59546409, "comment_id": 105271457, "body": "@AlexeyRomanov why would I talk about concepts outside the context of the question? For example, there are concepts which work differently in Kotlin and Java itself, even though both work on JVM. I don&#39;t understand why you&#39;re going at that bit of the comment :)"}], "answers": [{"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 3, "last_activity_date": 1577813860, "creation_date": 1577813860, "answer_id": 59547055, "question_id": 59546409, "link": "https://stackoverflow.com/questions/59546409/declaring-constants-in-kotlin-calling-functions-at-compile-time/59547055#59547055", "title": "Declaring constants in Kotlin - calling functions at compile time", "body": "<p>No. The reason for that is that there's no guarantee that the return value of any function is a constant (can be computed in compile time).</p>\n\n<p>It's perfectly fine to use <code>val myAngle = Math.toRadians(45.0)</code>, though.</p>\n"}], "owner": {"reputation": 3196, "user_id": 1541397, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/991c4e6d0872e18880e3e0ff51cdf5a2?s=128&d=identicon&r=PG", "display_name": "David Callanan", "link": "https://stackoverflow.com/users/1541397/david-callanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59547055, "answer_count": 1, "score": 1, "last_activity_date": 1577813860, "creation_date": 1577809193, "last_edit_date": 1577811818, "question_id": 59546409, "link": "https://stackoverflow.com/questions/59546409/declaring-constants-in-kotlin-calling-functions-at-compile-time", "title": "Declaring constants in Kotlin - calling functions at compile time", "body": "<p>For compile-time constants, is there a way of doing</p>\n\n<pre><code>const val myAngle = Math.toRadians(45.0)\n</code></pre>\n\n<p>without including the <code>Math.toRadians</code> function logic directly in code</p>\n\n<pre><code>const val myAngle = 45.0 / 180.0 * Math.PI\n</code></pre>\n\n<p>and without doing the calculation beforehand</p>\n\n<pre><code>const val myAngle = Math.PI / 2 // 45.0 degrees\n</code></pre>\n\n<p>i.e. is there a way of calling <code>Math.toRadians</code> at compile-time?</p>\n\n<p><strong>Edit</strong> - My usecase: I am trying to create some angle constants, I would like to input them in degrees, but I would like the stored constant to be in radians.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1577806576, "post_id": 59545974, "comment_id": 105260845, "body": "Please show your code so far and view xml"}, {"owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1577807006, "post_id": 59545974, "comment_id": 105261003, "body": "Since I do not know how to do this at all, action on tapping, I have not coded anything for this purpose. I have just created a new project with an activity, a button and an editText on it."}], "answers": [{"tags": [], "owner": {"reputation": 1132, "user_id": 10048703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4Etl.png?s=128&g=1", "display_name": "davidm", "link": "https://stackoverflow.com/users/10048703/davidm"}, "is_accepted": true, "score": 2, "last_activity_date": 1577810395, "creation_date": 1577810395, "answer_id": 59546566, "question_id": 59545974, "link": "https://stackoverflow.com/questions/59545974/tap-on-to-activate-button/59546566#59546566", "title": "Tap on to activate button", "body": "<p>I wrote a possible solution in Java and then I used Android Studio to convert the <code>MainActivity.java</code> in Kotlin. But I will post both the Java and Kotlin source code and also the xml file.</p>\n\n<p>The application has only one activity with a Button and an EditText that appears when the user tap somewhere in the activity three times.</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>// gen with Android Studio\nclass MainActivity : AppCompatActivity() {\n\n    private var button: Button? = null\n    private var editText: EditText? = null\n    private var count = 0\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        button = findViewById(R.id.button)\n        editText = findViewById(R.id.editText)\n\n        val constraintLayout = findViewById&lt;ConstraintLayout&gt;(R.id.layout)\n\n        constraintLayout.setOnClickListener {\n            if(count &lt; 4) count++;\n\n            if (count == 3) {\n                button!!.visibility = Button.VISIBLE\n                button!!.isEnabled = true\n\n                editText!!.visibility = EditText.VISIBLE\n                editText!!.isEnabled = true\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private Button button;\n    private EditText editText;\n    private int count = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        button = findViewById(R.id.button);\n        editText =  findViewById(R.id.editText);\n\n        ConstraintLayout constraintLayout = findViewById(R.id.layout);\n\n        constraintLayout.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                if(count &lt; 4) count++;\n\n                if(count == 3){\n                    button.setVisibility(Button.VISIBLE);\n                    button.setEnabled(true);\n\n                    editText.setVisibility(EditText.VISIBLE);\n                    editText.setEnabled(true);\n                }\n            }\n        });\n    }\n}\n</code></pre>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/layout\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@string/button\"\n        android:visibility=\"gone\"\n        android:enabled=\"false\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toEndOf=\"@+id/editText\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;EditText\n        android:id=\"@+id/editText\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:layout_marginLeft=\"16dp\"\n        android:ems=\"10\"\n        android:inputType=\"textPersonName\"\n        android:text=\"@string/edit\"\n        android:visibility=\"gone\"\n        android:enabled=\"false\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59546566, "answer_count": 1, "score": 0, "last_activity_date": 1580030809, "creation_date": 1577806466, "last_edit_date": 1580030809, "question_id": 59545974, "link": "https://stackoverflow.com/questions/59545974/tap-on-to-activate-button", "title": "Tap on to activate button", "body": "<p>I want a button (myButton) and an EditText (myText) to be enabled and even shown on the activity only when I tap on a particular area (where the button is placed even though the button is not visible at this point of time).</p>\n\n<p>On launching the app, these two elements are not enabled nor visible to the user. After tapping on the place (where the button is located), or anywhere on the activity will also be OK, for 3 times both the button and editText should show and be enabled. How can I get it done?</p>\n\n<p>I am on Android Studio using Kotlin.</p>\n"}, {"tags": ["android", "kotlin", "webview"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 12616259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1228a809bf374ebcd3fe37e380ba7024?s=128&d=identicon&r=PG&f=1", "display_name": "aCas", "link": "https://stackoverflow.com/users/12616259/acas"}, "is_accepted": false, "score": 0, "last_activity_date": 1577886490, "creation_date": 1577886490, "answer_id": 59553077, "question_id": 59545801, "link": "https://stackoverflow.com/questions/59545801/android-webview-contentheight-has-value-from-last-visited-page/59553077#59553077", "title": "Android Webview contentHeight has value from last visited page", "body": "<p>I had to work around the Problem. To test the behavior afterwards, I get the ContentHeight in a Button.Listener and display the value with Toast.makeText(). Now I get the current value.</p>\n"}], "owner": {"reputation": 33, "user_id": 12616259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1228a809bf374ebcd3fe37e380ba7024?s=128&d=identicon&r=PG&f=1", "display_name": "aCas", "link": "https://stackoverflow.com/users/12616259/acas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577886490, "creation_date": 1577805278, "question_id": 59545801, "link": "https://stackoverflow.com/questions/59545801/android-webview-contentheight-has-value-from-last-visited-page", "title": "Android Webview contentHeight has value from last visited page", "body": "<p>When I invoke Webview.contentHeight, I get every time the value from the last visited site. What have I to do, to get the contentHeight of the new loaded site?</p>\n\n<p>I try this:</p>\n\n<pre><code>val view = findViewById&lt;WebView&gt;(R.id.view)\nurl = edit.text.toString()\nurl = URLUtil.guessUrl(url)\nedit.text = url\n\nif (URLUtil.isValidUrl(url)) {\n  view.loadUrl(url)\n  //here I've tried and give the Webview with sleep(30000) some time, but this also don't working\n  var cheight = view.contentHeight\n  var vHeight = view.height\n  var mheight = view.measuredHeight\n  var minheight = view.minimumHeight\n  Toast.makeText(this, cheight.toString() + \" \" + vHeight.toString() + \" \" + mheight.toString() + \" \" + minheight.toString(), Toast.LENGTH_SHORT).show()\n</code></pre>\n"}, {"tags": ["java", "gradle", "kotlin", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 8502, "user_id": 484293, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/70tBc.jpg?s=128&g=1", "display_name": "blubb", "link": "https://stackoverflow.com/users/484293/blubb"}, "edited": false, "score": 0, "creation_date": 1577805023, "post_id": 59545185, "comment_id": 105260332, "body": "Regarding your second question, what exactly is it that you&#39;re struggling with? It seems this could be solved with a <code>&quot;api&quot;(...)</code> dependency just like the <code>&quot;implementation&quot;(...)</code>."}, {"owner": {"reputation": 52172, "user_id": 438319, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e67d8015cee56fdd33ada1a7e154fbcf?s=128&d=identicon&r=PG&f=1", "display_name": "ams", "link": "https://stackoverflow.com/users/438319/ams"}, "reply_to_user": {"reputation": 8502, "user_id": 484293, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/70tBc.jpg?s=128&g=1", "display_name": "blubb", "link": "https://stackoverflow.com/users/484293/blubb"}, "edited": false, "score": 0, "creation_date": 1577805386, "post_id": 59545185, "comment_id": 105260461, "body": "just removed the question you are right it&#39;s not clear just confusion my parts getting going with Gradle with no experience or knowledge of Kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1595324966, "post_id": 59545755, "comment_id": 111428598, "body": "Does it mean common settings like <code>repositories</code> can&#39;t be defined in the root build file if using Kotlin DSL? Seems that way."}], "tags": [], "owner": {"reputation": 8502, "user_id": 484293, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/70tBc.jpg?s=128&g=1", "display_name": "blubb", "link": "https://stackoverflow.com/users/484293/blubb"}, "is_accepted": true, "score": 3, "last_activity_date": 1577804914, "creation_date": 1577804914, "answer_id": 59545755, "question_id": 59545185, "link": "https://stackoverflow.com/questions/59545185/how-to-define-common-dependencies-in-gradle-kotlin-dsl-from-the-parent-project/59545755#59545755", "title": "How to define common dependencies in Gradle kotlin dsl from the parent project?", "body": "<p>I would advise you to read the <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html#kotdsl:accessor_applicability\" rel=\"nofollow noreferrer\">Gradle Kotlin DSL Primer</a>. The section \"Understanding when type-safe model accessors are available\" explains why you shouldn't expect <code>implementation</code> to be defined at this place (emphasis mine):</p>\n\n<blockquote>\n  <p>The set of type-safe model accessors available <strong>is calculated right before evaluating the script body, immediately after the plugins {} block. Any model elements contributed after that point do not work with type-safe model accessors.</strong> For example, this includes any configurations you might define in your own build script.</p>\n</blockquote>\n\n<p>So you cannot use a typesafe accessor for <code>implementation</code> in the top-level <code>build.gradle</code>, except if you would apply the <code>java</code> plugin in its <code>plugins {}</code> block (which is not advised, unless the root project itself contains sources).</p>\n\n<p>Instead, <strong>use unsafe accessors, as demonstrated in the section <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html#sec:kotlin_using_standard_api\" rel=\"nofollow noreferrer\">Understanding what to do when type-safe model accessors are not available</a></strong>, like this:</p>\n\n<pre><code>plugins.withType&lt;JavaPlugin&gt; {\n        extensions.configure&lt;JavaPluginExtension&gt; {\n            sourceCompatibility = JavaVersion.VERSION_11\n            targetCompatibility = JavaVersion.VERSION_11\n\n            dependencies {\n                \"implementation\"(platform(\"org.springframework.boot:spring-boot-dependencies:2.2.2.RELEASE\"))\n            }\n\n            tasks.withType&lt;Test&gt; {\n                useJUnitPlatform()\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 52172, "user_id": 438319, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e67d8015cee56fdd33ada1a7e154fbcf?s=128&d=identicon&r=PG&f=1", "display_name": "ams", "link": "https://stackoverflow.com/users/438319/ams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "accepted_answer_id": 59545755, "answer_count": 1, "score": 2, "last_activity_date": 1577810046, "creation_date": 1577801609, "last_edit_date": 1577810046, "question_id": 59545185, "link": "https://stackoverflow.com/questions/59545185/how-to-define-common-dependencies-in-gradle-kotlin-dsl-from-the-parent-project", "title": "How to define common dependencies in Gradle kotlin dsl from the parent project?", "body": "<p>I am setting up a multi module Gradle build with the Kotlin DSL. Below is the top level <code>build.gradle.kts</code> file I am using. </p>\n\n<pre><code>subprojects {\n    repositories {\n        mavenCentral()\n    }\n\n    group = \"com.example\"\n    version = \"1.0.0\"\n\n    plugins.withType&lt;JavaPlugin&gt; {\n        extensions.configure&lt;JavaPluginExtension&gt; {\n            sourceCompatibility = JavaVersion.VERSION_11\n            targetCompatibility = JavaVersion.VERSION_11\n\n            dependencies {\n                implementation(platform(\"org.springframework.boot:spring-boot-dependencies:2.2.2.RELEASE\"))\n            }\n\n            tasks.withType&lt;Test&gt; {\n                useJUnitPlatform()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I get the following error </p>\n\n<pre><code>* What went wrong:\nScript compilation error:\n\n  Line 15:                 implementation(platform(\"org.springframework.boot:spring-boot-dependencies:2.2.2.RELEASE\"))\n                           ^ Unresolved reference: implementation\n\n1 error\n\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<ul>\n<li>How do I set common dependencies from the root <code>build.gradle.kts</code>?</li>\n</ul>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "edited": false, "score": 0, "creation_date": 1577801129, "post_id": 59545066, "comment_id": 105259062, "body": "<code>mutableListOf(0,0,1,0,0)</code> :)"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 15397, "user_id": 3290339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMy5l.jpg?s=128&g=1", "display_name": "Onik", "link": "https://stackoverflow.com/users/3290339/onik"}, "edited": false, "score": 0, "creation_date": 1577801255, "post_id": 59545066, "comment_id": 105259107, "body": "Ok, thanks:), if I want to use <code>list</code> variable to do it?"}, {"owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 0, "creation_date": 1577801663, "post_id": 59545066, "comment_id": 105259216, "body": "@vasik988 if my answer is helpful, you can mark it as accepted answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "is_accepted": true, "score": 1, "last_activity_date": 1577801278, "creation_date": 1577801278, "answer_id": 59545124, "question_id": 59545066, "link": "https://stackoverflow.com/questions/59545066/how-to-replace-index-value-in-mutablelistof/59545124#59545124", "title": "How to replace index value in mutableListOf?", "body": "<p>You can try following:</p>\n\n<pre><code>val list = mutableListOf(0, 0, 0, 0, 0)\nlist[list.size / 2] = 1\n// after this array should look like this: (0, 0, 1, 0, 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577817346, "post_id": 59545164, "comment_id": 105264018, "body": "Thanks, what do you mean? List size is 5. Is it important if it&#39;s odd or not?"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577828076, "post_id": 59545164, "comment_id": 105266199, "body": "Or maybe size is 4."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577869732, "post_id": 59545164, "comment_id": 105271124, "body": "If the size is 4, then it isn&#39;t clear what you want to replace from the question."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1578018019, "post_id": 59545164, "comment_id": 105312514, "body": "I see, so index is counting from 0 and size is counting from 1 as I understand."}], "tags": [], "owner": {"reputation": 22313, "user_id": 1739882, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Li4nC.jpg?s=128&g=1", "display_name": "Chintan Soni", "link": "https://stackoverflow.com/users/1739882/chintan-soni"}, "is_accepted": false, "score": 1, "last_activity_date": 1577801457, "creation_date": 1577801457, "answer_id": 59545164, "question_id": 59545066, "link": "https://stackoverflow.com/questions/59545066/how-to-replace-index-value-in-mutablelistof/59545164#59545164", "title": "How to replace index value in mutableListOf?", "body": "<p>You can do it as follows:</p>\n\n<pre><code>val list = mutableListOf(0, 0, 0, 0, 0)\nlist[list.size / 2] = 1\n</code></pre>\n\n<p><strong>Assumption:</strong> list size would be odd number</p>\n"}], "owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59545124, "answer_count": 2, "score": 0, "last_activity_date": 1577801457, "creation_date": 1577800958, "question_id": 59545066, "link": "https://stackoverflow.com/questions/59545066/how-to-replace-index-value-in-mutablelistof", "title": "How to replace index value in mutableListOf?", "body": "<p>I want to replace middle 0 with 1. How can I do it?</p>\n\n<pre><code>val list = mutableListOf(0,0,0,0,0)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mvvm"], "comments": [{"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 0, "creation_date": 1577799925, "post_id": 59544740, "comment_id": 105258697, "body": "check this code is executing or not  <code>authState.value = AuthState.AUTHENTICATED</code>."}, {"owner": {"reputation": 1187, "user_id": 3251645, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c2b67f18c87216f04487f4723a0c93e?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Borkar", "link": "https://stackoverflow.com/users/3251645/amol-borkar"}, "reply_to_user": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 0, "creation_date": 1577802523, "post_id": 59544740, "comment_id": 105259465, "body": "Updated the question please check"}], "answers": [{"comments": [{"owner": {"reputation": 1187, "user_id": 3251645, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c2b67f18c87216f04487f4723a0c93e?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Borkar", "link": "https://stackoverflow.com/users/3251645/amol-borkar"}, "edited": false, "score": 0, "creation_date": 1577813725, "post_id": 59546378, "comment_id": 105262996, "body": "Hey, thanks for your response! From what I understand when the callback inside <code>AuthService</code> will set the value of mutable livedata e.g <code>authenticatedUserLiveData.value = AuthData(...)</code> it should be modified inside the viewmodel and the fragment since it is observing the viewmodel, right?"}, {"owner": {"reputation": 1187, "user_id": 3251645, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c2b67f18c87216f04487f4723a0c93e?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Borkar", "link": "https://stackoverflow.com/users/3251645/amol-borkar"}, "edited": false, "score": 0, "creation_date": 1577813902, "post_id": 59546378, "comment_id": 105263038, "body": "Also, passing around callbacks like this basically fails the purpose of ViewModel and LiveData."}, {"owner": {"reputation": 949, "user_id": 6745643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zh4InaNEvp4/AAAAAAAAAAI/AAAAAAAAADU/VkoLunlB9-c/photo.jpg?sz=128", "display_name": "shafayat hossain", "link": "https://stackoverflow.com/users/6745643/shafayat-hossain"}, "reply_to_user": {"reputation": 1187, "user_id": 3251645, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c2b67f18c87216f04487f4723a0c93e?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Borkar", "link": "https://stackoverflow.com/users/3251645/amol-borkar"}, "edited": false, "score": 0, "creation_date": 1577849280, "post_id": 59546378, "comment_id": 105268672, "body": "Reply of first comment: Yes, any kind of data manipulation will be happen in viewmodel. Because <code>View</code> only should know how to show data in UI, and <code>Model</code> should know where data exists and how it will be fetched. <code>Viewmodel</code> contains core business logic and it knows what data will be passed to <code>view</code>  Replay of second comment: I don&#39;t think passing an object of an interface breaks the purpose of viewmodel. Because it&#39;s just pass an object as argument to repository. There must be a communicator. It can be live data, or Observable or interface."}], "tags": [], "owner": {"reputation": 949, "user_id": 6745643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zh4InaNEvp4/AAAAAAAAAAI/AAAAAAAAADU/VkoLunlB9-c/photo.jpg?sz=128", "display_name": "shafayat hossain", "link": "https://stackoverflow.com/users/6745643/shafayat-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1577809020, "creation_date": 1577809020, "answer_id": 59546378, "question_id": 59544740, "link": "https://stackoverflow.com/questions/59544740/view-not-reflecting-state-changes-from-service/59546378#59546378", "title": "View not reflecting state changes from service", "body": "<p><code>createNewUser()</code> method is doing it's work asynchronously. Initially <code>authenticatedUserLiveData</code> is <code>null</code>. So you are getting <code>null</code> from viewmodel. You have to push a callback after <code>onCompleteListener()</code> called from <code>firebaseAuth.createUserWithEmailAndPassword()</code>. There are several ways to make this. Personally I use RxJava for async tasks. For better understanding you can make a interface will be called after success or error callback from firebase auth. Code will looks like this</p>\n\n<p>callback interface can be:</p>\n\n<pre><code>interface AuthCallback {\n    fun onUserCreationResult(authData: AuthData)\n}\n</code></pre>\n\n<p>from <code>AuthService</code></p>\n\n<pre><code>fun createNewUser(email: String, password: String, callback: AuthCallback){\n\nfirebaseAuth.createUserWithEmailAndPassword(email, password)\n    .addOnCompleteListener { task: Task&lt;AuthResult&gt; -&gt;\n        if (task.isSuccessful) {\n            Log.d(\"AuthService\", \"Created new user! $email\")\n            callback.onUserCreationResult(AuthData(\"success\", task.result?.user, null))\n\n            task.result?.user?.let {\n                DatabaseService.getDbInstance().collection(\"users\")\n                    .document(it.uid).set(it).addOnCompleteListener { task: Task&lt;Void&gt; -&gt;\n                        Log.d(\"AuthService\", \"Added new user to database.\")\n                    }\n            }\n        } else {\n            Log.d(\n                \"AuthService\",\n                \"Failed to create new user! $email ${task.exception?.message}\"\n            )\n            callback.onUserCreationResult(AuthData(\"failure\", null, task.exception?.message))\n        }\n    }\n}\n</code></pre>\n\n<p>And finally in viewmodel:</p>\n\n<pre><code>fun createUserWithEmailAndPassword(email: String, password: String) {\n\n    authService.createNewUser(email, password, object: AuthCallback {\n        override fun onUserCreationResult(authData: AuthData) {\n            if (data?.status.equals(\"success\")) {\n                authState.value = AuthState.AUTHENTICATED\n            } else {\n                authState.value = AuthState.INVALID_AUTH\n                Log.d(\"AuthVM\", result?.msg)\n                authErrorMsg.value = result?.msg\n            }\n\n            currentUser.value = authData.data\n        }\n\n    })\n\n}\n</code></pre>\n\n<p>I hope everything will work fine. </p>\n"}], "owner": {"reputation": 1187, "user_id": 3251645, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c2b67f18c87216f04487f4723a0c93e?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Borkar", "link": "https://stackoverflow.com/users/3251645/amol-borkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577821069, "creation_date": 1577798972, "last_edit_date": 1577821069, "question_id": 59544740, "link": "https://stackoverflow.com/questions/59544740/view-not-reflecting-state-changes-from-service", "title": "View not reflecting state changes from service", "body": "<p>I've implemented email and password authentication using ViewModel and LiveData. My code looks like this:</p>\n\n<p><strong>AuhtService.kt</strong></p>\n\n<pre><code>fun createNewUser(email: String, password: String): MutableLiveData&lt;AuthData&gt; {\n    val authenticatedUserLiveData = MutableLiveData&lt;AuthData&gt;()\n\n    firebaseAuth.createUserWithEmailAndPassword(email, password)\n        .addOnCompleteListener { task: Task&lt;AuthResult&gt; -&gt;\n            if (task.isSuccessful) {\n                Log.d(\"AuthService\", \"Created new user! $email\")\n                authenticatedUserLiveData.value = AuthData(\"success\", task.result?.user, null)\n\n                task.result?.user?.let {\n                    DatabaseService.getDbInstance().collection(\"users\")\n                        .document(it.uid).set(it).addOnCompleteListener { task: Task&lt;Void&gt; -&gt;\n                            Log.d(\"AuthService\", \"Added new user to database.\")\n                        }\n                }\n            } else {\n                Log.d(\n                    \"AuthService\",\n                    \"Failed to create new user! $email ${task.exception?.message}\"\n                )\n                authenticatedUserLiveData.value =\n                    AuthData(\"failure\", null, task.exception?.message)\n            }\n        }\n\n\n    return authenticatedUserLiveData\n}\n</code></pre>\n\n<p>This class performs the firebase operations and returns livedata of type <code>AuthData</code> which is basically a wrapper around <code>FirebaseUser</code> and a couple of strings to carry error messages in case Authentication fails.</p>\n\n<p><strong>UserAuthViewModel.kt</strong></p>\n\n<pre><code>class UserAuthViewModel : ViewModel() {\n    private val authService = AuthService()\n\n    enum class AuthState {\n        AUTHENTICATED,\n        UNAUTHENTICATED,\n        INVALID_AUTH\n    }\n\n    val authState = MutableLiveData&lt;AuthState&gt;()\n    val authErrorMsg = MutableLiveData&lt;String&gt;()\n    var currentUser = MutableLiveData&lt;FirebaseUser&gt;()\n\n    init {\n        authErrorMsg.value = \"\"\n        authState.value = AuthState.UNAUTHENTICATED\n        currentUser = authService.getCurrentUser()\n    }\n\n    fun signInWithEmail(email: String, password: String) {\n        val result = authService.loginWithEmail(email, password).value\n\n        if (result?.status.equals(\"success\")) {\n            authState.value = AuthState.AUTHENTICATED\n        } else {\n            authState.value = AuthState.INVALID_AUTH\n            authErrorMsg.value = result?.msg\n        }\n\n        currentUser.value = result?.data\n    }\n\n    fun createUserWithEmailAndPassword(email: String, password: String) {\n\n        val result = authService.createNewUser(email, password).value\n\n        if (result?.status.equals(\"success\")) {\n            authState.value = AuthState.AUTHENTICATED\n        } else {\n            authState.value = AuthState.INVALID_AUTH\n            Log.d(\"AuthVM\", result?.msg)\n            authErrorMsg.value = result?.msg\n        }\n\n        currentUser.value = result?.data\n    }\n}\n</code></pre>\n\n<p>finally my <strong>RegisterFragment.kt</strong></p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n\n    userAuthViewModel.authState.observe(viewLifecycleOwner, Observer { authState -&gt;\n        if (authState == UserAuthViewModel.AuthState.AUTHENTICATED) {\n            Toast.makeText(\n                context,\n                \"User is ${userAuthViewModel.currentUser.value?.email}\",\n                Toast.LENGTH_SHORT\n            ).show()\n        }\n\n        if(authState == UserAuthViewModel.AuthState.INVALID_AUTH) {\n            Snackbar.make(view, \"${userAuthViewModel.authErrorMsg.value}\", Snackbar.LENGTH_SHORT).show()\n        }\n    })\n\n    register_button.setOnClickListener {\n        val email = registerEmail_editText.editText?.text\n        val pwd = registerPassword_editText.editText?.text\n\n        userAuthViewModel.createUserWithEmailAndPassword(email.toString(), pwd.toString())\n    }\n\n    goToLoginButton.setOnClickListener{\n        findNavController().navigate(R.id.action_registerFragment_to_loginFragment)\n    }\n}\n</code></pre>\n\n<p>The above code is mainly inspired from google docs and MVVM arch. but it behaves very weirdly, first of all I get a snackbar at the start with no text, secondly the error messages are not displayed in the sncakbar when auth fails. What am I doing wrong.</p>\n\n<p><strong>Update:</strong> On further testing it seems that <code>result?.msg</code> in my <code>UserAuthViewModel</code> is null, but I'm passing error messages in my AuthService, quite weird.</p>\n\n<p><strong>Update 2:</strong> Its seems in either case the else of <code>if (result?.status.equals(\"success\"))</code> is being executed, am I doing string comparison wrong?</p>\n\n<p><strong>Update 3:</strong> I figured it out but I'm not sure what is the proper way to solve this. The <em>problem</em> is that although AuthServie returns a <code>MutableLiveData</code> that contains null values initially which will be replaced by proper values later (when async calls from AuthService finish). In the ViewModel I do this to propagate new AuthData when user perfroms a sign up</p>\n\n<p><code>val result = authService.createNewUser(email, password).value</code></p>\n\n<p>Problem is that doing this passes the initial LiveData object in the AuthService with null values to the ViewModel, so the View updates with null values, I need a way to so that the View can observe actual values when they get updated from authservice's callbacks.</p>\n"}, {"tags": ["java", "android", "sockets", "kotlin", "socket.io"], "comments": [{"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1577798923, "post_id": 59544698, "comment_id": 105258351, "body": "Tell about host and port please."}, {"owner": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1577798967, "post_id": 59544698, "comment_id": 105258373, "body": "Does it work on 9?"}, {"owner": {"reputation": 99, "user_id": 4369280, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737246980/picture?type=large", "display_name": "Swaran G&#245;dl&#227;", "link": "https://stackoverflow.com/users/4369280/swaran-g%c3%b5dl%c3%a3"}, "reply_to_user": {"reputation": 3570, "user_id": 12121419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b54723fc3fa242fc9b1fa46eb2ca6a?s=128&d=identicon&r=PG", "display_name": "blackapps", "link": "https://stackoverflow.com/users/12121419/blackapps"}, "edited": false, "score": 0, "creation_date": 1577948866, "post_id": 59544698, "comment_id": 105286987, "body": "@blackapps it&#39;s not working on 9 and above but working fine below 9. I think something is wrong with api level 28+"}], "owner": {"reputation": 99, "user_id": 4369280, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001737246980/picture?type=large", "display_name": "Swaran G&#245;dl&#227;", "link": "https://stackoverflow.com/users/4369280/swaran-g%c3%b5dl%c3%a3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577804186, "creation_date": 1577798691, "last_edit_date": 1577804186, "question_id": 59544698, "link": "https://stackoverflow.com/questions/59544698/socket-on-android-pie-or-api-level-28-is-not-working-im-not-able-to-connect-wi", "title": "Socket on android pie or api level 28 is not working. I&#39;m not able to connect with Socket using host and post in android java", "body": "<p>I tried with this code </p>\n\n<pre><code>try {\n  pingSocket = Socket(host, port)\n  out = PrintWriter(pingSocket.getOutputStream(), true)\n  br = BufferedReader(InputStreamReader(pingSocket.getInputStream()))\n} catch (e: IOException) {\n  return null\n}\n\nLog.d(\"xx\", \"Locating Slot...\")\n\nwhile (true) {\n  resp = br.readLine().toString()\n  Log.d(\"xx\", \"Reader's Telnet Data: \" + resp)\n}\n</code></pre>\n\n<p>This code is working on below android 9.0. I also added <code>network-security-config.xml</code> file under xml directory and added <code>android:usesCleartextTraffic=\"true\"</code> in <code>manifest.xml</code> file.\nWhile I'm testing on android pie the cursor stops at <code>pingSocket = Socket(host, port)</code> line and throws a timeout exception.</p>\n"}, {"tags": ["android", "kotlin", "android-resource-qualifiers"], "comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1577801166, "post_id": 59544697, "comment_id": 105259074, "body": "From the link, I&#39;m guessing this is a question about the Android API; if so, adding a suitable tag to the question, and/or mentioning that explicitly, might help provide some context.  Also, it might help to explain what this code is intended to do."}, {"owner": {"reputation": 1225, "user_id": 9008140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153470332463913/picture?type=large", "display_name": "John Lord", "link": "https://stackoverflow.com/users/9008140/john-lord"}, "edited": false, "score": 0, "creation_date": 1577820172, "post_id": 59544697, "comment_id": 105264642, "body": "R is not a repository of data.  It is just a list of pointers.  It is used for finding objects and does not contain any data from those objects.  In your example above, leave off the $.  It should already be a property if it is that file.  R.String.category__service would access that one.  If you want selectables you need to create xml arrays inside the strings file and access them properly as arrays."}, {"owner": {"reputation": 3, "user_id": 12632358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cLHkFAC1qxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDrDxjRrF9uoIPfwffBFetpW_hxw/photo.jpg?sz=128", "display_name": "M Deckers", "link": "https://stackoverflow.com/users/12632358/m-deckers"}, "reply_to_user": {"reputation": 1225, "user_id": 9008140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153470332463913/picture?type=large", "display_name": "John Lord", "link": "https://stackoverflow.com/users/9008140/john-lord"}, "edited": false, "score": 0, "creation_date": 1577886330, "post_id": 59544697, "comment_id": 105274581, "body": "@JohnLord leaving off the $ would not work since I have multiple categories and I wanted to walk trough them and I didn&#39;t want to hardcode R.string.category__service, R.string.category__other etc. I have looked at xml arrays in the documentation and it seems you can&#39;t acces them by key - meaning their key is numeric. But I&#39;d need something like category[&#39;service&#39;]"}], "answers": [{"tags": [], "owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "is_accepted": true, "score": 0, "last_activity_date": 1577801540, "creation_date": 1577801540, "answer_id": 59545175, "question_id": 59544697, "link": "https://stackoverflow.com/questions/59544697/use-string-variable-as-object-key/59545175#59545175", "title": "Use string variable as object key", "body": "<p>You can try following:</p>\n\n<pre><code>val key = \"category__$this.name\" // \"category__service\"\nval s = resources.getIdentifier(key, \"string\", context.packageName)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12632358, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cLHkFAC1qxI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDrDxjRrF9uoIPfwffBFetpW_hxw/photo.jpg?sz=128", "display_name": "M Deckers", "link": "https://stackoverflow.com/users/12632358/m-deckers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 59545175, "answer_count": 1, "score": 0, "last_activity_date": 1577813610, "creation_date": 1577798678, "last_edit_date": 1577813610, "question_id": 59544697, "link": "https://stackoverflow.com/questions/59544697/use-string-variable-as-object-key", "title": "Use string variable as object key", "body": "<p>I have strings in my strings.xml e.g.:</p>\n\n<pre><code>&lt;string name=\"category__service\"&gt;Service&lt;/string&gt;\n</code></pre>\n\n<p>I want to access them like this:</p>\n\n<pre><code>val key = \"category__$this.name\" // \"category__service\"\nval s = R.string.[key]\n</code></pre>\n\n<p>This would give me the Id of the string which I can use.\nBut this way I get the error</p>\n\n<blockquote>\n  <p>The expression cannot be a selector (occur after a doted text)</p>\n</blockquote>\n\n<p>I also tried</p>\n\n<pre><code>val s = R.string.$key\n</code></pre>\n\n<p>but I get: </p>\n\n<blockquote>\n  <p>Expecting an element</p>\n</blockquote>\n\n<p>The <a href=\"https://developer.android.com/reference/kotlin/android/R\" rel=\"nofollow noreferrer\">documentation</a> on what R is to begin with, isn't giving me much. As far as I see \u2013 R.string does not have a simple getter.</p>\n\n<p>So at this point I'm just guessing for a solution. Is this even possible in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "delegation"], "comments": [{"owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 0, "creation_date": 1577798599, "post_id": 59544324, "comment_id": 105258229, "body": "Do you want to prevent setting <code>val prefName: String?</code> every time? Did I understand correctly?"}, {"owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 0, "creation_date": 1577798862, "post_id": 59544324, "comment_id": 105258330, "body": "Or are you talking about setting default value every time?"}, {"owner": {"reputation": 11, "user_id": 12632153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAPiD0xcbj6DKaz1gPsaAs5kt3IvVOfKxGRql1rqw=k-s128", "display_name": "Devreet Kaur", "link": "https://stackoverflow.com/users/12632153/devreet-kaur"}, "reply_to_user": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 0, "creation_date": 1577942304, "post_id": 59544324, "comment_id": 105285358, "body": "I want to prevent setting val prefName: String? every time"}], "owner": {"reputation": 11, "user_id": 12632153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAPiD0xcbj6DKaz1gPsaAs5kt3IvVOfKxGRql1rqw=k-s128", "display_name": "Devreet Kaur", "link": "https://stackoverflow.com/users/12632153/devreet-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 410, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1598805985, "creation_date": 1577796350, "last_edit_date": 1577801653, "question_id": 59544324, "link": "https://stackoverflow.com/questions/59544324/how-to-use-android-shared-preferences-using-delegation-in-kotlin-without-assig", "title": "How to use Android Shared Preferences (using delegation) in kotlin without assigning value to variable", "body": "<p>Using the below code for getting and setting preference value. I am forced to use var \"pref1\" for that. Using multiple variables can be a heavy process. Every time while getting or setting sharedPreferences using a variable is compulsory. Is there any other way to use this without declaring variables???</p>\n\n<pre><code>var pref1 by stringPref(\"Pref1\",\"value1\")\nvar prefValue by stringPref(\"Pref1\")\n</code></pre>\n\n<pre><code>abstract class PrefDelegate&lt;T&gt;(val prefName: String?, val prefKey: String) {\n    protected val prefs: SharedPreferences by lazy {\n        if (getAppContext() != null) \n            if (prefName != null) getAppContext().getSharedPreferences(prefName, Context.MODE_PRIVATE) else PreferenceManager.getDefaultSharedPreferences(getAppContext())\n        else\n            throw IllegalStateException(\"Context was not initialized. Call PrefDelegate.init(context) before using it\")\n    }\n\n    abstract operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T\n    abstract operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T)\n\n}\n\nfun makeStringPref(prefKey: String, defaultValue: String? = null) {\n    var count by stringPref(prefKey,defaultValue)\n}\n\n\nfun stringPref(prefKey: String, defaultValue: String? = null)= StringPrefDelegate(null, prefKey, defaultValue)\nfun stringPref(prefName: String, prefKey: String, defaultValue: String? = null) = StringPrefDelegate(prefName, prefKey, defaultValue)\n\n\nclass StringPrefDelegate(prefName: String?, prefKey: String, val defaultValue: String?) : PrefDelegate&lt;String?&gt;(prefName, prefKey) {\n    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;) = prefs.getString(prefKey, defaultValue) \n    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String?) = prefs.edit().putString(prefKey, value).apply() \n}\n\n\n\nfun intPref(prefKey: String, defaultValue: Int = 0) = IntPrefDelegate(null, prefKey, defaultValue)\nfun intPref(prefName: String, prefKey: String, defaultValue: Int = 0) = IntPrefDelegate(prefName, prefKey, defaultValue)\n\n\nclass IntPrefDelegate(prefName: String?, prefKey: String, val defaultValue: Int) : PrefDelegate&lt;Int&gt;(prefName, prefKey) {\n    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;) = prefs.getInt(prefKey, defaultValue)\n    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: Int) = prefs.edit().putInt(prefKey, value).apply() \n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 911, "user_id": 11166067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444535f9bbe8ba11c596d7bb3f06c2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Leonov", "link": "https://stackoverflow.com/users/11166067/dmitrii-leonov"}, "edited": false, "score": 1, "creation_date": 1577881108, "post_id": 59543501, "comment_id": 105273371, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/44471284/when-to-use-an-inline-function-in-kotlin\">when to use an inline function in Kotlin?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 1, "last_activity_date": 1577794536, "creation_date": 1577794536, "answer_id": 59544029, "question_id": 59543501, "link": "https://stackoverflow.com/questions/59543501/what-is-the-correct-use-of-inline-function-in-kotlin/59544029#59544029", "title": "what is the correct use of inline function in kotlin?", "body": "<p>For example:</p>\n\n<pre><code>inline fun TextView.onTextChanged(crossinline onTextChangeListener: (String) -&gt; Unit) {\n     addTextChangedListener(object: TextWatcher {\n         override fun afterTextChanged(editable: Editable) {\n              onTextChangeListener(editable.toString())\n         }\n\n         ... \n     ) \n} \n</code></pre>\n\n<p>So if you're passing a lambda but you don't want to underneath create an anonymous inner class but rather inline the lambda into the call, then you can use <code>inline</code>. If you need to invoke this lambda inside another anonymous object or lambda, you can use <code>crossinline</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "is_accepted": true, "score": 5, "last_activity_date": 1583926210, "last_edit_date": 1583926210, "creation_date": 1577797065, "answer_id": 59544416, "question_id": 59543501, "link": "https://stackoverflow.com/questions/59543501/what-is-the-correct-use-of-inline-function-in-kotlin/59544416#59544416", "title": "what is the correct use of inline function in kotlin?", "body": "<p>So let's say we have a higher-order function, which takes another function as a parameter</p>\n\n<pre><code>fun doSomething(block: () -&gt; Unit){\n\n}\n</code></pre>\n\n<p>the Kotlin compiler will convert this to equivalent Java code which would be,</p>\n\n<pre><code>void doSomething( new Function(){\n\n  void invoke(){\n      // the code which you passed in the functional parameter\n   }\n\n})\n</code></pre>\n\n<p>The Kotlin compiler creates an Anonymous Inner Class for the functional parameter you passed and when you call this passed functional parameter the compiler internally calls this <code>invoke()</code> method.</p>\n\n<p>As a result, all functional parameter results in extra object creation and function call which is a performance and memory overhead.</p>\n\n<p>We can avoid this overhead by introducing the <code>inline</code> modifier. When added to a function the function call is skipped and the function code is added at the call site instead.</p>\n\n<p>So let's say we have a simple testing function,</p>\n\n<pre><code>inline fun testing(block : () -&gt; Unit){ \n\n   println(\"Inside the testing block\")\n   block()\n   someOtherRandomFunction()\n\n}\n</code></pre>\n\n<p>and we call this testing function from the main function, like this</p>\n\n<pre><code>fun main(){\n\n   testing{\n           println(\"Passed from the main function\")     \n   }\n\n}\n</code></pre>\n\n<p>When the above main function gets compiled, it would look like </p>\n\n<pre><code>fun main(){\n\n   println(\"Inside the testing block\")\n   println(\"Passed from the main function\")\n   someOtherRandomFunction()\n\n}\n</code></pre>\n\n<p>As if no testing function ever existed, all the code body from the testing function is simply copy-pasted inside the main function body.</p>\n"}], "owner": {"reputation": 113, "user_id": 6294571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cN1N8ez_kCw/AAAAAAAAAAI/AAAAAAAAAIw/rNVoYBKmmD8/photo.jpg?sz=128", "display_name": "rahul khurana", "link": "https://stackoverflow.com/users/6294571/rahul-khurana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 1, "closed_date": 1578638982, "accepted_answer_id": 59544416, "answer_count": 2, "score": 3, "last_activity_date": 1583926210, "creation_date": 1577791655, "question_id": 59543501, "link": "https://stackoverflow.com/questions/59543501/what-is-the-correct-use-of-inline-function-in-kotlin", "closed_reason": "Duplicate", "title": "what is the correct use of inline function in kotlin?", "body": "<p>I need a real life example when we can use this. I have gone through this link <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"nofollow noreferrer\">(https://kotlinlang.org/docs/reference/inline-functions.html)</a> but not able to find a good example.</p>\n"}, {"tags": ["android", "kotlin", "firebase-storage"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1577793964, "post_id": 59543052, "comment_id": 105256657, "body": "Firebase APIs are asynchronous, so you can check <b><a href=\"https://stackoverflow.com/questions/51594772/how-to-return-a-list-from-firestore-database-as-a-result-of-a-function-in-kotlin/51595202\">this</a></b> out."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9635680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1820023701351913/picture?type=large", "display_name": "Squall Huang", "link": "https://stackoverflow.com/users/9635680/squall-huang"}, "edited": false, "score": 0, "creation_date": 1577926738, "post_id": 59546204, "comment_id": 105282991, "body": "Thank you Frank van Puffelen: Your solution actually solved my problem. Thank you very much. ^_^"}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": true, "score": 1, "last_activity_date": 1577807833, "creation_date": 1577807833, "answer_id": 59546204, "question_id": 59543052, "link": "https://stackoverflow.com/questions/59543052/after-log-dtag-downloadimgsuriarraylistdownloadimagesurilist-upload-code/59546204#59546204", "title": "After Log.d(TAG, &quot;downloadImgsUriArrayList:$downloadImagesUriList &quot;) upload codes excute before for iterator&#39;s .addOnCompleteListener", "body": "<p>Firebase APIs, like most modern cloud APIs, are asynchronous, since they interact with a (potentially time-consuming) server. Instead of blocking your main thread while the cloud interaction happens, the clients allow your main code to continue, and then call back once the cloud API has completed its work.</p>\n\n<p>In your code that means that the <code>Log.d(TAG, \"downloadImgsUriArrayList:$downloadImagesUriList \");</code> runs <strong>before</strong> the <code>imgFileRef.downloadUrl</code>. This explains why nothing is written to the database by <code>add(uploadedImages)</code>: the download URLs haven't been determined yet, because the upload is still in progress.</p>\n\n<p>To solve this problem, all code that requires the download URL of an upload, must be <strong>inside</strong> the completion listener of that upload.</p>\n\n<p>The simplest way to do this, is to add a new URL each time the upload of that file completes:</p>\n\n<pre><code>for (uriForUpload in imagesList) {\n    val imgNameUUID = UUID.randomUUID().toString()\n    val withAppendedPath =\n        Uri.withAppendedPath(uriForUpload, imgNameUUID).toString()\n    var imgFileRef = uploadImgsPath!!.child(withAppendedPath)\n    imgFileRef.putFile(uriForUpload)\n        .continueWithTask {\n            if (!it.isSuccessful) {\n                it.exception?.let {\n                    throw it\n                }\n            }\n            imgFileRef.downloadUrl\n        }.addOnCompleteListener {\n            if (it.isSuccessful) {\n                var uriForDownload = it.result.toString()\n                Log.d(TAG, \"uriForDownload:$uriForDownload \");\n                downloadImagesUriList.add(uriForDownload)\n\n                Log.d(TAG, \"downloadImgsUriArrayList:$downloadImagesUriList \");\n                var uploadedImages = UploadedImages(\n                    categoryDesignID, user!!.uid,\n                    downloadImagesUriList, Timestamp.now()\n                )\n                //Save uploaded images path info to firestore\n                firestore.collection(\"uploadedImages\").add(uploadedImages)\n            }\n        }\n}\n</code></pre>\n\n<p>The above will create a new document each time an upload completes. You'll <em>either</em> want to update the same document after each file completes <em>or</em> wait until the last file has uploaded before creating the document. There are many ways to do either, but a simple way is to simply keep a counter of how many files have completed uploading:</p>\n\n<pre><code>var uploadedCount = 0\nfor (uriForUpload in imagesList) {\n    ...\n\n        }.addOnCompleteListener {\n            if (it.isSuccessful) {\n                var uriForDownload = it.result.toString()\n                Log.d(TAG, \"uriForDownload:$uriForDownload \");\n                downloadImagesUriList.add(uriForDownload)\n                if (uploadedCount++ &gt;= imagesList.size) {\n                    Log.d(TAG, \"downloadImgsUriArrayList:$downloadImagesUriList \");\n                    var uploadedImages = UploadedImages(\n                        categoryDesignID, user!!.uid,\n                        downloadImagesUriList, Timestamp.now()\n                    )\n                    //Save uploaded images path info to firestore\n                    firestore.collection(\"uploadedImages\").add(uploadedImages)\n                }\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9635680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1820023701351913/picture?type=large", "display_name": "Squall Huang", "link": "https://stackoverflow.com/users/9635680/squall-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1577871068, "accepted_answer_id": 59546204, "answer_count": 1, "score": 0, "last_activity_date": 1577807833, "creation_date": 1577789256, "last_edit_date": 1577807185, "question_id": 59543052, "link": "https://stackoverflow.com/questions/59543052/after-log-dtag-downloadimgsuriarraylistdownloadimagesurilist-upload-code", "closed_reason": "Not suitable for this site", "title": "After Log.d(TAG, &quot;downloadImgsUriArrayList:$downloadImagesUriList &quot;) upload codes excute before for iterator&#39;s .addOnCompleteListener", "body": "<p>After <code>Log.d(TAG, \"downloadImgsUriArrayList:$downloadImagesUriList \")</code> upload codes excute before for iterator's .addOnCompleteListener lead to <code>var downloadImagesUriList: MutableList&lt;String&gt;  = mutableListOf()</code> is empty.</p>\n\n<p>How to solve this problem?</p>\n\n<pre><code>var downloadImagesUriList: MutableList&lt;String&gt;  = mutableListOf()\n\n//Upload images button\nupload_imgs_button.setOnClickListener {\n    Log.d(TAG, \"uploadImgsPath: $uploadImgsPath\");\n        //Upload images to firebase storage\n    if (uploadImgsPath != null) {\n\n        for (uriForUpload in imagesList) {\n            val imgNameUUID = UUID.randomUUID().toString()\n            val withAppendedPath =\n                Uri.withAppendedPath(uriForUpload, imgNameUUID).toString()\n            var imgFileRef = uploadImgsPath!!.child(withAppendedPath)\n            imgFileRef.putFile(uriForUpload)\n                .continueWithTask {\n                    if (!it.isSuccessful) {\n                        it.exception?.let {\n                            throw it\n                        }\n                    }\n                    imgFileRef.downloadUrl\n                }.addOnCompleteListener {\n                    if (it.isSuccessful) {\n                        var uriForDownload = it.result.toString()\n                        Log.d(TAG, \"uriForDownload:$uriForDownload \");\n                        downloadImagesUriList.add(uriForDownload)\n                    }\n                }\n\n        }\n\n//The process will run here before downloadImagesUriList.add(uriForDownload) was excuted.\n//How to solve this problem?\n        Log.d(TAG, \"downloadImgsUriArrayList:$downloadImagesUriList \");\n        var uploadedImages = UploadedImages(\n            categoryDesignID, user!!.uid,\n            downloadImagesUriList, Timestamp.now()\n        )\n        //Save uploaded images path info to firestore\n        firestore.collection(\"uploadedImages\").add(uploadedImages)\n            .addOnSuccessListener {\n                Toast.makeText(context, \"Upload successful\", Toast.LENGTH_LONG)\n                    .show()\n            }\n    } else {\n        Toast.makeText(context,\"Please choose a category\",Toast.LENGTH_LONG).show()\n    }\n</code></pre>\n"}, {"tags": ["android", "xml", "kotlin", "xml-parsing", "retrofit2"], "comments": [{"owner": {"reputation": 242, "user_id": 9162370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a683486012638e74dc407f3c2bd59ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Dholakia", "link": "https://stackoverflow.com/users/9162370/mohit-dholakia"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577788277, "post_id": 59542853, "comment_id": 105254712, "body": "yes but i need actual XML data"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577788395, "post_id": 59542853, "comment_id": 105254751, "body": "Then in your request received the response as <code>ResponseBody</code> and then convert it to your Model. You can&#39;t do whatever you want in your way"}, {"owner": {"reputation": 242, "user_id": 9162370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a683486012638e74dc407f3c2bd59ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Dholakia", "link": "https://stackoverflow.com/users/9162370/mohit-dholakia"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577789830, "post_id": 59542853, "comment_id": 105255316, "body": "how to convert response body to the model as respone is of XML and i am not sure that Gson will help here!!"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577789911, "post_id": 59542853, "comment_id": 105255349, "body": "You have to use your parser to convert it MODEL"}], "answers": [{"tags": [], "owner": {"reputation": 242, "user_id": 9162370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a683486012638e74dc407f3c2bd59ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Dholakia", "link": "https://stackoverflow.com/users/9162370/mohit-dholakia"}, "is_accepted": true, "score": 0, "last_activity_date": 1577961222, "creation_date": 1577961222, "answer_id": 59561871, "question_id": 59542853, "link": "https://stackoverflow.com/questions/59542853/how-to-get-xml-response-string-along-with-kotlin-data-model-in-android/59561871#59561871", "title": "How to get XML response string along with Kotlin Data Model in android?", "body": "<p>I have achieved this by using SimpleXmlConverterFactory below is my code which will use XML response body and convert it to data model class so that I got both XML response string and model class</p>\n\n<pre><code>val strategy = AnnotationStrategy()\nval serializer = Persister(strategy)\nval model = SimpleXmlConverterFactory.create(serializer).responseBodyConverter(CustomModel::class.java,arrayOfNulls&lt;Annotation&gt;(0),null)?.convert(response) as CustomModel\n</code></pre>\n"}], "owner": {"reputation": 242, "user_id": 9162370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a683486012638e74dc407f3c2bd59ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Dholakia", "link": "https://stackoverflow.com/users/9162370/mohit-dholakia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 59561871, "answer_count": 1, "score": 0, "last_activity_date": 1577961222, "creation_date": 1577788123, "question_id": 59542853, "link": "https://stackoverflow.com/questions/59542853/how-to-get-xml-response-string-along-with-kotlin-data-model-in-android", "title": "How to get XML response string along with Kotlin Data Model in android?", "body": "<p>I am parsing XML response using SimpleXmlConverterFactory which works perfect but it gives me data model classes with respect to provided model class while making API call but now I need a response string as well which I got from the server.</p>\n\n<p>I have tried by taking responseBody in the model class but due to that it gives error in my XML parsing</p>\n\n<pre><code>class ResponseAndPojo(val value : MODEL, val response : ResponseBody)\n</code></pre>\n\n<p>Using the above class I am trying to parse response with a retrofit API call but it is not working</p>\n"}, {"tags": ["android", "kotlin", "junit", "kotlin-coroutines", "android-mvvm"], "answers": [{"comments": [{"owner": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "edited": false, "score": 0, "creation_date": 1577789797, "post_id": 59543048, "comment_id": 105255301, "body": "Thanks. But still the test &#39;data_storeUser_returnUserDetailsStored&#39; fails with &#39;result&#39; being always &#39;Result.UserDetailsNotStored&#39;. Is it the reason that my &#39;DataRepositoryImpl&#39; is a singleton?"}, {"owner": {"reputation": 899, "user_id": 1109493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47f3f0d38818f5bb5f97a6b9d9d7f305?s=128&d=identicon&r=PG", "display_name": "anshul", "link": "https://stackoverflow.com/users/1109493/anshul"}, "reply_to_user": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "edited": false, "score": 0, "creation_date": 1577790346, "post_id": 59543048, "comment_id": 105255490, "body": "@Maria Yes you have to debug why the condition (result is Result.GetUserDetails ) is still failing even though we have mocking the behaviour  <code>when</code>(cacheRepository.retrieveUserDetails())         ).thenReturn(Result.GetUserDetails)  Possibility is that the instances are different hence the condition fails"}, {"owner": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "edited": false, "score": 0, "creation_date": 1577791630, "post_id": 59543048, "comment_id": 105255906, "body": "It works now... some silly mistake of mine. thanks a ton :)"}, {"owner": {"reputation": 899, "user_id": 1109493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47f3f0d38818f5bb5f97a6b9d9d7f305?s=128&d=identicon&r=PG", "display_name": "anshul", "link": "https://stackoverflow.com/users/1109493/anshul"}, "reply_to_user": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "edited": false, "score": 0, "creation_date": 1577792070, "post_id": 59543048, "comment_id": 105256055, "body": "@Maria Glad to hear."}], "tags": [], "owner": {"reputation": 899, "user_id": 1109493, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47f3f0d38818f5bb5f97a6b9d9d7f305?s=128&d=identicon&r=PG", "display_name": "anshul", "link": "https://stackoverflow.com/users/1109493/anshul"}, "is_accepted": true, "score": 1, "last_activity_date": 1577789223, "creation_date": 1577789223, "answer_id": 59543048, "question_id": 59542758, "link": "https://stackoverflow.com/questions/59542758/android-repository-unit-test/59543048#59543048", "title": "Android repository unit test", "body": "<p>First of all, you doing UnitTest incorrectly. This is not the responsibility of your UT class DataRepositoryImpl to check if the user has been stored successfully. if so, you need to provide the real instance of the cacheRepository.\nSecond, you can write two Unit test cases positive and negative like below </p>\n\n<pre><code>@Test\nfun data_storeUser_returnUserDetailsStored() {\n    runBlocking {\n\n        `when`(cacheRepository.retrieveUserDetails())\n        ).thenReturn(Result.GetUserDetails)\n\n        val result = dataRepository.changeCustomDataBasedOnAction(\n            MyAction.StoreUser(\n                \"username\", \"40\"\n            )\n        )\n\n        Assert.assertEquals(result, ListenableWorker.Result.UserDetailsStored)\n    }\n}\n\n@Test\nfun data_storeUser_returnUserDetailsNotStored() {\n    runBlocking {\n\n        `when`(cacheRepository.retrieveUserDetails())\n        ).thenReturn(Result.UserDetailsNotStored)\n\n        val result = dataRepository.changeCustomDataBasedOnAction(\n            MyAction.StoreUser(\n                \"username\", \"40\"\n            )\n        )\n\n        Assert.assertEquals(result, ListenableWorker.Result.UserDetailsNotStored)\n    }\n}\n</code></pre>\n\n<p>Unit test case for checking actual caching of data can be written separately in the cacheRepository test class. </p>\n"}], "owner": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2267, "favorite_count": 0, "accepted_answer_id": 59543048, "answer_count": 1, "score": 0, "last_activity_date": 1577789223, "creation_date": 1577787621, "last_edit_date": 1577787985, "question_id": 59542758, "link": "https://stackoverflow.com/questions/59542758/android-repository-unit-test", "title": "Android repository unit test", "body": "<p>I have an issue with my repository unit testing where I don't get the expected result. Can anyone point me out my problem please. </p>\n\n<p>In the tests, reading out from the repository gives me an unexpected value.</p>\n\n<p>Here is my repository code - </p>\n\n<pre><code>interface DataRepository {\n   suspend fun changeCustomDataBasedOnAction(action: MyAction): Result\n}\n\nclass DataRepositoryImpl(\n    private val cacheRepository: CacheRepository\n) : DataRepository {\n\n    override suspend fun changeCustomDataBasedOnAction(action: MyAction): Result {\n        when (action) {\n            is MyAction.StoreUser -&gt; {\n                print(\"Storing to cache\" + action.userName + action.userAge)\n                cacheRepository.storeUserDetails(\n                    UserModel(\n                        action.userName,\n                        action.userAge\n                    )\n                )\n                return isUserDetailsStored()\n            }\n        }\n    }\n\n    private suspend fun isUserDetailsStored(): Result {\n        val result = cacheRepository.retrieveUserDetails()\n        print(\"Reading from cache\" + result)\n        if (result is Result.GetUserDetails) {\n            return Result.UserDetailsStored\n        }\n        return Result.UserDetailsNotStored\n    }\n}\n</code></pre>\n\n<p>This is my corresponding unit test - </p>\n\n<pre><code>class DataRepositoryImplTest {\n\n    @get:Rule\n    val instantExecutorRule = InstantTaskExecutorRule()\n\n    private lateinit var dataRepository: DataRepository\n\n    @Mock\n    private lateinit var cacheRepository: CacheRepository\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        dataRepository = DataRepositoryImpl(cacheRepository)\n    }\n\n    @After\n    fun tearDown() {\n    }\n\n    @Test\n    fun data_storeUser_returnUserDetailsStored() {\n        runBlocking {\n\n            `when`(\n                dataRepository.changeCustomDataBasedOnAction(\n                    MyAction.StoreUser(\n                        \"username\", \"40\"\n                    )\n                )\n            ).thenReturn(Result.UserDetailsStored)\n\n            val result = dataRepository.changeCustomDataBasedOnAction(\n                    MyAction.StoreUser(\n                        \"username\", \"40\"\n                    )\n            )\n\n            Assert.assertEquals(result, Result.UserDetailsStored)\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is I get this test result -</p>\n\n<pre><code>Storing to cache username40\n\nReading from cache null\n\nStoring to cache username40\n\nReading from cache com.user.app.Result$UserDetailsStored@2584b82d\n\njava.lang.AssertionError: \n\nExpected :com.user.app.Result$UserDetailsNotStored@7bbc8656\n\nActual   :com.user.app.Result$UserDetailsStored@2584b82d\n</code></pre>\n"}, {"tags": ["android", "kotlin", "flutter"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5286483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lH6f0.jpg?s=128&g=1", "display_name": "r.soltani", "link": "https://stackoverflow.com/users/5286483/r-soltani"}, "is_accepted": false, "score": 0, "last_activity_date": 1577794329, "creation_date": 1577794329, "answer_id": 59543997, "question_id": 59542358, "link": "https://stackoverflow.com/questions/59542358/noclassdeffounderror-in-flutter-app-which-has-kotlin-library-dependency/59543997#59543997", "title": "NoClassDefFoundError in Flutter app which has kotlin library dependency", "body": "<p>i found the root of problem.i am using some of the jdk8 functions in kotlin code and it is not supported on older devices because they are jvm 6 or 7.</p>\n\n<p>for example Collection.removeIf or Map.forEach function  is defined in jdk8</p>\n\n<p>i managed to solve this issue by finding and replacing all jdk8 function calls by lowering language level of intellij idea to 6.but it only forces you to use only language features under 6 and not functions.i think now i have to find all jdk8 function in the heystack!</p>\n"}], "owner": {"reputation": 11, "user_id": 5286483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lH6f0.jpg?s=128&g=1", "display_name": "r.soltani", "link": "https://stackoverflow.com/users/5286483/r-soltani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577794329, "creation_date": 1577785672, "last_edit_date": 1577792272, "question_id": 59542358, "link": "https://stackoverflow.com/questions/59542358/noclassdeffounderror-in-flutter-app-which-has-kotlin-library-dependency", "title": "NoClassDefFoundError in Flutter app which has kotlin library dependency", "body": "<p>in my flutter app , i have a kotlin library dependency.in the main activity on android folder, i am calling one of library`s functions, which it has a lambda in it.</p>\n\n<p>for example : a.b.c.Util.someFunction$1</p>\n\n<p>i am calling \"someFunction\" from MainActivity and it crashes because it says that it cant find  \"$1\" class.i am aware that kotlin creates a class for each lambda and names it as such(with $ sign).</p>\n\n<p>fun fact is , the app runs in my android 7 device , but it crashes on android 4 and 5 device.</p>\n\n<p>my best guess was that i am using source compatibility of version 8 for kotlin compiler and it generates java 8 compatible bytecode so lower devices dont support it, but even downgrading it to version 6 didnt solve the problem</p>\n\n<p>i have added multidex support to build.gradle and have extended FlutterApplication and have called Multidex.install(this) at my Application class and have replaced my Application class in manifest</p>\n"}, {"tags": ["java", "android", "date", "kotlin", "simpledateformat"], "comments": [{"owner": {"reputation": 21095, "user_id": 822588, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7bVy8.jpg?s=128&g=1", "display_name": "Sleiman Jneidi", "link": "https://stackoverflow.com/users/822588/sleiman-jneidi"}, "edited": false, "score": 0, "creation_date": 1577785716, "post_id": 59542300, "comment_id": 105253800, "body": "is the date in UTC?"}, {"owner": {"reputation": 884, "user_id": 7074278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hVaMu.jpg?s=128&g=1", "display_name": "SkypeDogg", "link": "https://stackoverflow.com/users/7074278/skypedogg"}, "edited": false, "score": 1, "creation_date": 1577786583, "post_id": 59542300, "comment_id": 105254078, "body": "Maybe this will help you <a href=\"https://stackoverflow.com/a/26637209/7074278\">stackoverflow.com/a/26637209/7074278</a>"}, {"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 2, "creation_date": 1577811857, "post_id": 59542300, "comment_id": 105262463, "body": "<code>SimpleDateFormat</code> is now legacy, supplanted years ago by the modern <i>java.time</i> classes defined in JSR 310."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1577811871, "post_id": 59542300, "comment_id": 105262466, "body": "You might want to try using Android ThreeTen date libraries"}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 0, "creation_date": 1577990493, "post_id": 59542300, "comment_id": 105304575, "body": "As an aside consider throwing away the long outmoded and notoriously troublesome <code>SimpleDateFormat</code> and friends, and adding <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project in order to use <code>java.time</code>, the modern Java date and time API. It is so much nicer to work with."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 8490812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Pg8JE9EFn94/AAAAAAAAAAI/AAAAAAAAAH8/BRoJ3pNFyTk/photo.jpg?sz=128", "display_name": "hameemyousuf", "link": "https://stackoverflow.com/users/8490812/hameemyousuf"}, "is_accepted": false, "score": -1, "last_activity_date": 1577787291, "creation_date": 1577787291, "answer_id": 59542693, "question_id": 59542300, "link": "https://stackoverflow.com/questions/59542300/how-to-know-if-a-date-is-in-previous-x-minutes/59542693#59542693", "title": "How to know if a date is in previous x minutes?", "body": "<p>Is this you want:</p>\n\n<pre><code>int xMinutes = 10 * 60 * 1000;\nlong dateIsoinMillis = dateIso.getTime();\nlong xMinsAgo = System.currentTimeMillis() - xMinutes;\nif (dateIsoinMillis &lt; xMinsAgo) {\n    System.out.println(\"searchTimestamp is older than 10 minutes\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "is_accepted": false, "score": 2, "last_activity_date": 1577853613, "last_edit_date": 1577853613, "creation_date": 1577811350, "answer_id": 59546713, "question_id": 59542300, "link": "https://stackoverflow.com/questions/59542300/how-to-know-if-a-date-is-in-previous-x-minutes/59546713#59546713", "title": "How to know if a date is in previous x minutes?", "body": "<h1><code>java.time.Instant</code></h1>\n\n<p>Use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> class to represent a moment in UTC. </p>\n\n<p>To parse, replace SPACE with a <code>T</code> per the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard.</p>\n\n<pre><code>Instant instant = Instant.parse( \"2019-12-17 15:14:29.198Z\".replace( \" \" , \"T\" ) ;\n</code></pre>\n\n<p>Determine the current moment in <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a>.</p>\n\n<pre><code>Instant now = Instant.now() ;\n</code></pre>\n\n<p>Determine 15 minutes ago. Call <code>plus\u2026</code>/<code>minus\u2026</code> methods for date-time math.</p>\n\n<pre><code>Instant then = now.minusMinutes( 15 ) ;\n</code></pre>\n\n<p>Apply your test. Here we use the Half-Open approach where the beginning is <em>inclusive</em> while the ending is <em>exclusive</em>. </p>\n\n<pre><code>boolean isRecent = \n    ( ! instant.isBefore( then ) )  // \"Not before\" means \"Is equal to or later\".\n    &amp;&amp; \n    instant.isBefore( now )         \n;\n</code></pre>\n\n<p>For older Android, add the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><em>ThreeTenABP</em></a> library that wraps the <a href=\"https://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Backport</em></a> library. Android 26+ bundles <em>java.time</em> classes. </p>\n\n<p><a href=\"https://i.stack.imgur.com/y0grY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y0grY.png\" alt=\"Table of which java.time library to use with which version of Java or Android\"></a> </p>\n\n<p>If you are doing much of this work, add the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> library to your project (may not be appropriate for Android, not sure). This gives you the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a> class and it\u2019s handy comparison methods such as <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html#contains(java.time.Instant)\" rel=\"nofollow noreferrer\"><code>contains</code></a>. </p>\n\n<pre><code>Interval.of( then , now ).contains( instant )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213390, "user_id": 642706, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ZWEI3.jpg?s=128&g=1", "display_name": "Basil Bourque", "link": "https://stackoverflow.com/users/642706/basil-bourque"}, "edited": false, "score": 1, "creation_date": 1577853529, "post_id": 59548005, "comment_id": 105269029, "body": "FYI, the terribly flawed date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>java.util.Calendar</code></a>, and <code>java.text.SimpleDateFormat</code> are now <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a>, supplanted by the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><i>java.time</i></a> classes built into Java 8 and later."}], "tags": [], "owner": {"reputation": 58, "user_id": 11277926, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Vh_EdTqrmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUntaRuoUq7mCRSJePWs8h5Z0AUg/mo/photo.jpg?sz=128", "display_name": "Ev0lv3zz", "link": "https://stackoverflow.com/users/11277926/ev0lv3zz"}, "is_accepted": false, "score": 0, "last_activity_date": 1577822068, "creation_date": 1577822068, "answer_id": 59548005, "question_id": 59542300, "link": "https://stackoverflow.com/questions/59542300/how-to-know-if-a-date-is-in-previous-x-minutes/59548005#59548005", "title": "How to know if a date is in previous x minutes?", "body": "<p>If you already know the reference date everytime you access the program, you can use java.util.Calendar.</p>\n\n<pre><code>boolean isBefore;\nlong timeToCheck = 15*60*1000; //15 minutes.\nCalendar calendar = Calendar.getInstance(), calendar2 = Calendar.getInstance();\ncalendar.set(Calendar.DATE, yourDay);\ncalendar.set(Calendar.HOUR_OF_DAY, yourHour);\ncalendar.set(Calendar.MINUTE, yourMinute);\ncalendar.set(Calendar.SECOND, yourSecond);\n\nif (calendar.before(calendar2)){\n  long timeInMillis = calendar2.getTimeInMillis() - calendar.getTimeInMillis();\n  if ( timeInMillis &gt;= timeToCheck ) isBefore = true;\n  else isBefore = false;\n}\n</code></pre>\n"}], "owner": {"reputation": 8086, "user_id": 1076026, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/zoHLk.jpg?s=128&g=1", "display_name": "wawanopoulos", "link": "https://stackoverflow.com/users/1076026/wawanopoulos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577853613, "creation_date": 1577785383, "question_id": 59542300, "link": "https://stackoverflow.com/questions/59542300/how-to-know-if-a-date-is-in-previous-x-minutes", "title": "How to know if a date is in previous x minutes?", "body": "<p>I have an ISO String date like this one: <code>2019-12-17 15:14:29.198Z</code></p>\n\n<p>I would like to know if this date is in the previous 15 minutes from now.\nIs-it possible to do that with <code>SimpleDateFormat</code> ?</p>\n\n<pre><code>val dateIso = SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", Locale.FRENCH).parse(isoString)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "static", "companion-object", "kotlin-lateinit"], "comments": [{"owner": {"reputation": 5359, "user_id": 870565, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/86wGY.jpg?s=128&g=1", "display_name": "pnizzle", "link": "https://stackoverflow.com/users/870565/pnizzle"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577783570, "post_id": 59541924, "comment_id": 105253053, "body": "@JeelVankhede Ive just updated my question. I knew someone would jump to that."}, {"owner": {"reputation": 5359, "user_id": 870565, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/86wGY.jpg?s=128&g=1", "display_name": "pnizzle", "link": "https://stackoverflow.com/users/870565/pnizzle"}, "edited": false, "score": 0, "creation_date": 1577783626, "post_id": 59541924, "comment_id": 105253076, "body": "I assume you guys are agreeing that each time init is called, names is assigned a new instance of the array?"}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 1, "creation_date": 1577783721, "post_id": 59541924, "comment_id": 105253105, "body": "Yes, one other thing you can try is take your initialization to another object as local variable then use that to assign your companion variable."}], "answers": [{"tags": [], "owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577783775, "creation_date": 1577783775, "answer_id": 59542004, "question_id": 59541924, "link": "https://stackoverflow.com/questions/59541924/kotlin-are-companion-object-lateinit-vars-initialised-once/59542004#59542004", "title": "Kotlin: are companion object lateinit vars initialised once?", "body": "<p>Companion object in Kotlin works same as the the static in java. By declaring a companion object inside our class, you\u2019ll be able to call its members with the same syntax as calling static methods in Java.And yes its going to be initialized once also in kotlin we have one \nmore keyword for singleton instance to create the singleton in kotlin. </p>\n\n<p>On other hand init is going to called after primary constructor also you can have one or more init blocks executing in series.</p>\n"}, {"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1577788543, "post_id": 59542049, "comment_id": 105254820, "body": "This may be even slightly clearer by moving <code>getHashCode</code> inside the <code>companion object</code>."}], "tags": [], "owner": {"reputation": 4346, "user_id": 1292557, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ccb0ba86944ca95bd765dfcc1ed3eb32?s=128&d=identicon&r=PG", "display_name": "Abu Yousuf", "link": "https://stackoverflow.com/users/1292557/abu-yousuf"}, "is_accepted": true, "score": 3, "last_activity_date": 1577784593, "last_edit_date": 1577784593, "creation_date": 1577783996, "answer_id": 59542049, "question_id": 59541924, "link": "https://stackoverflow.com/questions/59541924/kotlin-are-companion-object-lateinit-vars-initialised-once/59542049#59542049", "title": "Kotlin: are companion object lateinit vars initialised once?", "body": "<blockquote>\n  <p>is names going to be initialised/assigned twice, and therefore with\n  any subsequent Foo initialisation?</p>\n</blockquote>\n\n<p>As in init block its initializing <code>names</code> every time so it will create new <code>Array</code> for every instance.</p>\n\n<p>You can verify this with simple print </p>\n\n<pre><code>class Foo {\n    companion object {\n        lateinit var names: Array&lt;String&gt;\n    }\n    init {\n        println(\"Creating Foo\")\n        names = arrayOf(\"George\", \"Keith\", \"Martha\", \"Margret\")\n    }\n\n    fun getHashCode():Int{\n        return names.hashCode()\n    }\n\n}\n\nfun main() {\n\n    var foo1 = Foo();\n    println(foo1.getHashCode());\n    var foo2 = Foo();\n    println(foo2.getHashCode());\n}\n</code></pre>\n\n<p>In Output HashCode are different :</p>\n\n<pre><code>Creating Foo\n746292446\nCreating Foo\n1072591677\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5359, "user_id": 870565, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/86wGY.jpg?s=128&g=1", "display_name": "pnizzle", "link": "https://stackoverflow.com/users/870565/pnizzle"}, "edited": false, "score": 0, "creation_date": 1577784237, "post_id": 59542055, "comment_id": 105253279, "body": "<code>object ArrayOfString</code> is a singleton in Kotlin isn&#39;t it? So this is pretty much the same as initialising <code>names</code> inside <code>companion object</code>. I think just doing that keeps it simple, as I might have over engineered a few things."}, {"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "reply_to_user": {"reputation": 5359, "user_id": 870565, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/86wGY.jpg?s=128&g=1", "display_name": "pnizzle", "link": "https://stackoverflow.com/users/870565/pnizzle"}, "edited": false, "score": 0, "creation_date": 1577784529, "post_id": 59542055, "comment_id": 105253384, "body": "Yes, it&#39;s singleton!"}], "tags": [], "owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "is_accepted": false, "score": 1, "last_activity_date": 1577784037, "creation_date": 1577784037, "answer_id": 59542055, "question_id": 59541924, "link": "https://stackoverflow.com/questions/59541924/kotlin-are-companion-object-lateinit-vars-initialised-once/59542055#59542055", "title": "Kotlin: are companion object lateinit vars initialised once?", "body": "<p>You can try below code block to achieve what you want.</p>\n\n<pre><code>class Foo {\n\n    object ArrayOfString {\n        val names = arrayOf(\"George\", \"Keith\", \"Martha\", \"Margret\")\n    }\n\n    companion object {\n        val names: Array&lt;String&gt; = ArrayOfString.names\n    }\n}\n</code></pre>\n\n<p>By this way, you won't have initialization every time for your array, hope that make sense!</p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 9832121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8SC2y.jpg?s=128&g=1", "display_name": "Hardik raiyani", "link": "https://stackoverflow.com/users/9832121/hardik-raiyani"}, "is_accepted": false, "score": 0, "last_activity_date": 1577786596, "creation_date": 1577786596, "answer_id": 59542545, "question_id": 59541924, "link": "https://stackoverflow.com/questions/59541924/kotlin-are-companion-object-lateinit-vars-initialised-once/59542545#59542545", "title": "Kotlin: are companion object lateinit vars initialised once?", "body": "<pre><code>class Foo {\nVar names :ArrayList&lt;String&gt; = arrayOf(\"George\", \"Keith\", \"Martha\", \"Margret\")\ncompanion object {\n    lateinit var names: Array&lt;String&gt;\n}}\n</code></pre>\n\n<p>You can do like this</p>\n"}], "owner": {"reputation": 5359, "user_id": 870565, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/86wGY.jpg?s=128&g=1", "display_name": "pnizzle", "link": "https://stackoverflow.com/users/870565/pnizzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1181, "favorite_count": 0, "accepted_answer_id": 59542049, "answer_count": 4, "score": 1, "last_activity_date": 1577786596, "creation_date": 1577783315, "last_edit_date": 1577783585, "question_id": 59541924, "link": "https://stackoverflow.com/questions/59541924/kotlin-are-companion-object-lateinit-vars-initialised-once", "title": "Kotlin: are companion object lateinit vars initialised once?", "body": "<p>Given the code below:</p>\n\n<pre><code>class Foo {\n    companion object {\n        lateinit var names: Array&lt;String&gt;\n    }\n    init {\n        names = arrayOf(\"George\", \"Keith\", \"Martha\", \"Margret\")\n    }\n\n}\n</code></pre>\n\n<p>If I created two instances of <code>Foo</code>:</p>\n\n<pre><code>var foo1 = Foo();\nvar foo2 = Foo();\n</code></pre>\n\n<p>is <code>names</code> going to be initialised/assigned twice, and therefore with any subsequent <code>Foo</code> initialisation?</p>\n\n<p>My intent is to have a simple static variable <code>names</code> holding those predefined names.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>This is assuming I do not want to have: <code>var names: arrayOf(\"George\", \"Keith\", \"Martha\", \"Margret\")</code> inside companion object.</p>\n"}, {"tags": ["sql", "kotlin", "orm", "kotlin-exposed"], "comments": [{"owner": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 0, "creation_date": 1578733554, "post_id": 59541834, "comment_id": 105541596, "body": "You could define StatementInterceptor which will actualize your fields or just use built in expressions of your database (like <code>ON UPDATE current_timestamp</code> in MySQL)"}, {"owner": {"reputation": 354, "user_id": 5925080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f7fd9f68a10a958ee7251d551d153b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Anand", "link": "https://stackoverflow.com/users/5925080/aditya-anand"}, "reply_to_user": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 0, "creation_date": 1578751952, "post_id": 59541834, "comment_id": 105545295, "body": "Could you link to a sample implementation @Tapac?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 3588231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a8434509b4fecdf201233b8806f89?s=128&d=identicon&r=PG&f=1", "display_name": "Tim van der Leeuw", "link": "https://stackoverflow.com/users/3588231/tim-van-der-leeuw"}, "edited": false, "score": 0, "creation_date": 1619082263, "post_id": 59545747, "comment_id": 118798929, "body": "For <code>createdAt</code> there&#39;s also <code>defaultExpression</code>, at least in current version: <code>val createdAt = timestamp(&quot;created_at&quot;).defaultExpression( CurrentTimestamp() )</code>. However, I&#39;m still searching for an automatic solution for <code>lastModified</code>."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577804872, "creation_date": 1577804872, "answer_id": 59545747, "question_id": 59541834, "link": "https://stackoverflow.com/questions/59541834/how-to-get-createdat-and-lastmodified-fields-with-proper-behavior-using-kotlins/59545747#59545747", "title": "How to get createdAt and lastModified fields with proper behavior using Kotlin&#39;s Exposed ORM?", "body": "<p>For <code>createdAt</code> case there's <code>clientDefault</code> function:</p>\n\n<pre><code>abstract class BaseTable : IntIdTable() {\n   val createdAt = datetime(\"created_at\").clientDefault { DateTime.now() }\n}\n</code></pre>\n\n<p>Not aware of any solution for <code>lastModified</code>, though. I'm setting it in the DAO manually.</p>\n"}], "owner": {"reputation": 354, "user_id": 5925080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f7fd9f68a10a958ee7251d551d153b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Anand", "link": "https://stackoverflow.com/users/5925080/aditya-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577804872, "creation_date": 1577782743, "question_id": 59541834, "link": "https://stackoverflow.com/questions/59541834/how-to-get-createdat-and-lastmodified-fields-with-proper-behavior-using-kotlins", "title": "How to get createdAt and lastModified fields with proper behavior using Kotlin&#39;s Exposed ORM?", "body": "<pre><code>data class User(\n    var name: String? = null,\n    val mobile: String,\n    var email: String? = null\n) : Principal, BaseTable()\n</code></pre>\n\n<p>Ideally, what I would want is to have the common logic for the generation of the lastModified, createdAt fields to reside in some common class (e.g: BaseTable)</p>\n\n<pre><code>abstract class BaseTable {\n    private lateinit var createdAt: DateTime\n    private lateinit var lastModified: DateTime\n}\n</code></pre>\n\n<p>Which would act as the parent of all my models since I want the createdAt and lastModified fields in every table.</p>\n\n<p>To be clear, here is the behavior I want:</p>\n\n<ul>\n<li>createdAt: Just store the time when the row was created, and never change again</li>\n<li>lastModified: Every time a row is updated, update this field as well. When a new row is created createdAt = lastModified.</li>\n</ul>\n\n<p>Is there a way to do this using Kotlin (Jetbrains) Exposed SQL library?</p>\n"}, {"tags": ["android", "kotlin", "junit", "kotlin-coroutines", "android-mvvm"], "answers": [{"tags": [], "owner": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "is_accepted": false, "score": 1, "last_activity_date": 1577781783, "creation_date": 1577781783, "answer_id": 59541674, "question_id": 59541504, "link": "https://stackoverflow.com/questions/59541504/android-use-case-and-repository-unit-testing/59541674#59541674", "title": "Android use case and repository unit testing", "body": "<p>I fixed it. Basically I needed to add a <code>Mockito.when(...).thenReturn(livedata)</code>.\nHere is the code below -</p>\n\n<pre><code>@Test\nfun myUseCase_loginUser_expectedUserLoggedIn() {\n    `when`(\n        myUseCase.performCustomAction(\n          MyAction.LoginUser(\n            \"userName\", \"password\"\n          )\n        )\n    ).thenReturn(liveData)\n\n    val result = myUseCase.performCustomAction(\n        MyAction.LoginUser(\n            \"userName\", \"password\"\n        )\n    )\n\n    Assert.assertThat(result, `is`(liveData))\n}\n</code></pre>\n"}], "owner": {"reputation": 277, "user_id": 12048666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09266cf471e0d7a2196a666b388d1ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Ma2340", "link": "https://stackoverflow.com/users/12048666/ma2340"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577781783, "creation_date": 1577780633, "question_id": 59541504, "link": "https://stackoverflow.com/questions/59541504/android-use-case-and-repository-unit-testing", "title": "Android use case and repository unit testing", "body": "<p>I am having issues unit testing my use case. Here is the use case code-</p>\n\n<pre><code>    interface MyUseCase {\n        fun performCustomAction(action: MyAction): LiveData&lt;Result&gt;\n    }\n\n    class MyUseCaseImpl(private val dataRepository: DataRepository) : MyUseCase {\n\n       override fun performCustomAction(action: MyAction) = liveData {\n          emit(Result.DataFetchInProgress)\n          emit(dataRepository.performDataOperation(action))\n       }\n    }\n</code></pre>\n\n<p>Here is the corresponding unit test -</p>\n\n<pre><code>class MyUseCaseImplTest {\n\n    @Rule\n    @JvmField\n    val rule = InstantTaskExecutorRule()\n\n    private lateinit var myUseCase: MyUseCase\n\n    @Mock\n    private lateinit var dataRepository: DataRepository\n\n    @Mock\n    private lateinit var liveData: LiveData&lt;Result&gt;\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n        myUseCase = spy(MyUseCaseImpl(dataRepository))\n    }\n\n    @After\n    fun tearDown() {\n    }\n\n    @Test\n    fun myUseCase_loginUser_expectedUserLoggedIn() {\n        val result: LiveData&lt;Result&gt; = myUseCase.performCustomAction(\n            MyAction.LoginUser(\n                \"userName\", \"password\"\n            )\n        )\n\n        Assert.assertEquals(result, liveData)\n    }\n}\n</code></pre>\n\n<p>I get this error when I run this unit test -</p>\n\n<pre><code>java.lang.AssertionError: \nExpected :androidx.lifecycle.CoroutineLiveData@4c012563\nActual   :liveData\n</code></pre>\n\n<p>What mistake am i doing here? </p>\n\n<p>Also could you please suggest me what else I can test in my use case</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "edited": false, "score": 0, "creation_date": 1577794163, "post_id": 59542336, "comment_id": 105256734, "body": "So why does the <a href=\"https://medium.com/androiddevelopers/coroutines-on-android-part-iii-real-work-2ba8a2ec2f45\" rel=\"nofollow noreferrer\">medium article</a> say we shouldn&#39;t call room queries from IO thread?"}, {"owner": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "edited": false, "score": 0, "creation_date": 1577796346, "post_id": 59542336, "comment_id": 105257486, "body": "I cited it in my question: &quot;Note: Room uses its own dispatcher to run queries on a background thread. Your code should not use withContext(Dispatchers.IO) to call suspending room queries. It will complicate the code and make your queries run slower.&quot;"}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "edited": false, "score": 1, "creation_date": 1577797767, "post_id": 59542336, "comment_id": 105257949, "body": "Okay, as I have mentioned, after Room version <code>2.1</code>, the recommendation is not to use <code>IO</code> thread from developer side as Room is doing it for us. But, if our legacy code is using Room version below <code>2.1</code>, developer need to handle it."}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "edited": false, "score": 0, "creation_date": 1577797802, "post_id": 59542336, "comment_id": 105257964, "body": "It is recommendation, not rule. We can still use <code>IO</code> as good practise with <code>2.1</code> version of <code>Room</code>"}, {"owner": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "edited": false, "score": 1, "creation_date": 1577798572, "post_id": 59542336, "comment_id": 105258222, "body": "Thank you for clarifying that. I use version <code>2.2.3</code>, but my code runs faster with <code>Dispatchers.IO</code>. I assume it is because of complexities introduced in the ViewModel/Repository code ..."}], "tags": [], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "is_accepted": true, "score": 2, "last_activity_date": 1577785550, "creation_date": 1577785550, "answer_id": 59542336, "question_id": 59541100, "link": "https://stackoverflow.com/questions/59541100/how-to-perform-heavy-database-operations-with-room/59542336#59542336", "title": "How to perform heavy database operations with room?", "body": "<blockquote>\n  <p>Why should it matter from which dispatcher room queries are called if room uses a custom dispatcher anyways?</p>\n</blockquote>\n\n<p>Room introduced <code>Kotlin Coroutine</code> support from version <code>2.1</code> onwards. Earlier, they were not supporting <code>Coroutine</code>. So, first of all, make sure if your room version is <code>2.1</code> or above from <code>build.gradle</code> file : </p>\n\n<pre><code>implementation \"androidx.room:room-coroutines:${versions.room}\"\n</code></pre>\n\n<p>If you're using <code>Room</code> version older than <code>2.1</code>, then <code>Room</code> will perform operations on caller thread. This means that if we give query call of Room on <code>MAIN</code> thread, it'll execute operations on <code>MAIN</code>. If we give call to Room on <code>IO - background</code> thread, it'll execute on <code>background</code>.</p>\n\n<blockquote>\n  <p>How to perform expensive room queries without blocking the main thread?</p>\n</blockquote>\n\n<p>For this, we should call Room queries on <code>IO</code> thread. You are already doing correct thing </p>\n\n<pre><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    lifecycleScope.launch {\n        withContext(Dispatchers.IO) {\n            val result = viewModel.someHeavyOperation() // a suspend fun\n        }\n        doSomething(result)\n    }\n}\n</code></pre>\n\n<p>In addition to it, if you need to add waiting until Room query call returns, you can use <code>async</code> launcher and <code>await()</code> method</p>\n\n<pre><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    lifecycleScope.launch {\n    val content = async(Dispatchers.IO) {\n        viewModel.someHeavyOperation() // a suspend fun\n    }\n    // Using below line, we are introducing waiting for completion of someHeavyOperation() on IO thread\n    // If we return any result from someHeavyOperation(), it can be accessed in result variable as below\n    var result = content.await() \n    }\n   }\n}\n</code></pre>\n\n<p>Reference : </p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/a/59376666/1994950\">https://stackoverflow.com/a/59376666/1994950</a></li>\n<li><a href=\"https://stackoverflow.com/a/59408634/1994950\">https://stackoverflow.com/a/59408634/1994950</a></li>\n</ol>\n"}], "owner": {"reputation": 168, "user_id": 7739788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea6771caacff5ad60826b48ecbaed2f?s=128&d=identicon&r=PG&f=1", "display_name": "wave", "link": "https://stackoverflow.com/users/7739788/wave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 59542336, "answer_count": 1, "score": 2, "last_activity_date": 1577785550, "creation_date": 1577778121, "question_id": 59541100, "link": "https://stackoverflow.com/questions/59541100/how-to-perform-heavy-database-operations-with-room", "title": "How to perform heavy database operations with room?", "body": "<p>I'm using a room database to run some heavy database operation. I am not using LiveData for this operation as I use the result for computation only. Now if in my main fragment I have this</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    lifecycleScope.launch {\n        val result = viewModel.someHeavyOperation() // a suspend fun\n        doSomething(result)\n    }\n}\n</code></pre>\n\n<p>I get a <code>Skipped xx frames! Your application might be doing to much work on main thread.</code> on startup which I don't get if I leave out the database query.</p>\n\n<p>Now some answers here like <a href=\"https://stackoverflow.com/a/57657797\">this one</a> or <a href=\"https://stackoverflow.com/a/48265349\">that one</a> seem to suggest running the query on IO thread, like</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    lifecycleScope.launch {\n        withContext(Dispatchers.IO) {\n            val result = viewModel.someHeavyOperation() // a suspend fun\n        }\n        doSomething(result)\n    }\n}\n</code></pre>\n\n<p>which does increase performance for me. What confuses me though is that in <a href=\"https://medium.com/androiddevelopers/coroutines-on-android-part-iii-real-work-2ba8a2ec2f45\" rel=\"nofollow noreferrer\">an article</a> by the android developers publication on medium it says</p>\n\n<blockquote>\n  <p>Note: Room uses its own dispatcher to run queries on a background thread. Your code should not use withContext(Dispatchers.IO) to call suspending room queries. It will complicate the code and make your queries run slower.</p>\n</blockquote>\n\n<p>However, they only seem to consider the case where the expensive bits are the ensuing calculations, where they seem to suggest something like</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    lifecycleScope.launch {\n        val result = viewModel.someOperation() // a suspend fun\n        withContext(Dispatchers.Default) {\n            doSomethingHeavy(result)\n        }\n    }\n}\n</code></pre>\n\n<p>So now my questions:</p>\n\n<ol>\n<li>Why should it matter from which dispatcher room queries are called if room uses a custom dispatcher anyways?</li>\n<li>How to perform expensive room queries without blocking the main thread?</li>\n</ol>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-authentication"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1577777296, "post_id": 59540917, "comment_id": 105251110, "body": "Looks like <code>storedVerificationId</code> is null, and you&#39;re assuming it&#39;s not null by using the <code>!!</code> operator to dereference it before it gets a value."}, {"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 1, "creation_date": 1577777755, "post_id": 59540917, "comment_id": 105251241, "body": "<code>storedVerificationId</code> is null .Bcoz  this code is not executing <code>storedVerificationId = verificationId</code>."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 10997981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pEBs7.png?s=128&g=1", "display_name": "Myjaa", "link": "https://stackoverflow.com/users/10997981/myjaa"}, "edited": false, "score": 0, "creation_date": 1577789582, "post_id": 59542489, "comment_id": 105255233, "body": "I fixed that but now it gives <code>Cannot create PhoneAuthCredential without either verificationProof, sessionInfo, or temporaryProof.</code>"}], "tags": [], "owner": {"reputation": 650, "user_id": 6607435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVnaE.jpg?s=128&g=1", "display_name": "Pawan Soni", "link": "https://stackoverflow.com/users/6607435/pawan-soni"}, "is_accepted": true, "score": 0, "last_activity_date": 1577786251, "creation_date": 1577786251, "answer_id": 59542489, "question_id": 59540917, "link": "https://stackoverflow.com/questions/59540917/kotlin-app-crashing-due-to-null-pointer-exception/59542489#59542489", "title": "Kotlin App Crashing due to NULL POINTER EXCEPTION", "body": "<p>We should know about the basic difference between \"?\" and \"!!\" operator.\n\"?\" will execute the program, even variable is null and \"!!\" produce a null pointer exception.</p>\n\n<p>Here is one more operator i.e. Elvis operator that provides a meaning full value to a null value even if the variable is null.</p>\n\n<p>So as per the requirement, You can try this code</p>\n\n<pre><code>var storedVerificationId:String?=null\n\nval storeverificationIdEvenNull: String= if (storedVerificationId:String != null) storedVerificationId:String.length else \"-1\"\n</code></pre>\n\n<p>and change the code like </p>\n\n<pre><code>val credential = PhoneAuthProvider.getCredential(storedVerificationId, code)\n</code></pre>\n\n<p>now if the value is null then it will always assign \"-1\" as a String value in the storedVerificationId and you can perform the operation based on the ID.</p>\n"}], "owner": {"reputation": 65, "user_id": 10997981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pEBs7.png?s=128&g=1", "display_name": "Myjaa", "link": "https://stackoverflow.com/users/10997981/myjaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 59542489, "answer_count": 1, "score": 0, "last_activity_date": 1577786251, "creation_date": 1577776957, "last_edit_date": 1577777229, "question_id": 59540917, "link": "https://stackoverflow.com/questions/59540917/kotlin-app-crashing-due-to-null-pointer-exception", "title": "Kotlin App Crashing due to NULL POINTER EXCEPTION", "body": "<p>I am trying to use Firebase's mobile authentication with my Kotlin app. My app keeps on crashing showing a NULL POINTER EXCEPTION, My best guess is that the 'code' variable remains null even though I assign it a value in fun onVerificationCompleted(credential: PhoneAuthCredential).</p>\n\n<p><strong>My Kotlin Code:</strong></p>\n\n<pre><code>package com.example.myhospital\n\nimport android.content.Intent\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport android.view.View\nimport android.widget.Toast\nimport com.google.android.gms.tasks.Task\nimport com.google.firebase.FirebaseException\nimport com.google.firebase.FirebaseTooManyRequestsException\nimport com.google.firebase.auth.*\nimport kotlinx.android.synthetic.main.activity_otp_auth.*\nimport java.util.concurrent.TimeUnit\n\nclass otp_auth : AppCompatActivity() {\n\n    lateinit var mauth:FirebaseAuth\n    var storedVerificationId:String?=null\n//    var resendToken:PhoneAuthProvider.ForceResendingToken?=null\n    var code:String?=null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_otp_auth)\n\n        mauth=FirebaseAuth.getInstance()\n\n        bu_send_otp.setOnClickListener {\n                view:View-&gt;verify()\n        }\n\n\n    }\n\n\n    private fun verify(){\n        val phnNo=enter_mobile.text.toString()\n\n        PhoneAuthProvider.getInstance().verifyPhoneNumber(\n            \"+91\"+phnNo, // Phone number to verify\n            60, // Timeout duration\n            TimeUnit.SECONDS, // Unit of timeout\n            this, // Activity (for callback binding)\n            mcallbacks) // OnVerificationStateChangedCallbacks\n    }\n\n\n    var mcallbacks = object : PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\n\n        override fun onVerificationCompleted(credential: PhoneAuthCredential) {\n            // This callback will be invoked in two situations:\n            // 1 - Instant verification. In some cases the phone number can be instantly\n            //     verified without needing to send or enter a verification code.\n            // 2 - Auto-retrieval. On some devices Google Play services can automatically\n            //     detect the incoming verification SMS and perform verification without\n            //     user action.\n            buVerify.setOnClickListener { view: View -&gt;\n                code = enter_OTP.text.toString()          //Assigned a value to code\n            }\n            signInWithPhoneAuthCredential(credential)\n        }\n\n        override fun onVerificationFailed(e: FirebaseException) {\n            // This callback is invoked in an invalid request for verification is made,\n            // for instance if the the phone number format is not valid.\n\n            if (e is FirebaseAuthInvalidCredentialsException) {\n                Toast.makeText(applicationContext,\"Chal Be!!\",Toast.LENGTH_SHORT).show()\n            }\n        }\n\n        override fun onCodeSent(\n            verificationId: String,\n            token: PhoneAuthProvider.ForceResendingToken\n        ) {\n            // The SMS verification code has been sent to the provided phone number, we\n            // now need to ask the user to enter the code and then construct a credential\n            // by combining the code with a verification ID.\n            super.onCodeSent(verificationId, token)\n\n            // Save verification ID and resending token so we can use them later\n            storedVerificationId = verificationId\n\n        }\n    }\n\n\n    val credential = PhoneAuthProvider.getCredential(storedVerificationId!!, code!!)\n\n\n    private fun signInWithPhoneAuthCredential(credential: PhoneAuthCredential) {\n        mauth.signInWithCredential(credential).addOnCompleteListener{ task:Task&lt;AuthResult&gt; -&gt;\n            if (task.isSuccessful) {\n                // Sign in success, update UI with the signed-in user's information\n                val intent = Intent(this,book_appoint::class.java)\n                startActivity(intent)\n\n            } else {\n                // Sign in failed, display a message and update the UI\n                if (task.exception is FirebaseAuthInvalidCredentialsException) {\n                    Toast.makeText(applicationContext,\"WRONG!!\",Toast.LENGTH_SHORT).show()\n                }\n            }\n        }\n    }\n\n\n}\n</code></pre>\n\n<p><strong>My logcat shows an error at :</strong></p>\n\n<pre><code>val credential = PhoneAuthProvider.getCredential(storedVerificationId!!, code!!)\n</code></pre>\n\n<blockquote>\n  <p>Caused by: kotlin.KotlinNullPointerException at\n  com.example.myhospital.otp_auth.(otp_auth.kt:89)</p>\n</blockquote>\n\n<p><strong>My logcat:</strong></p>\n\n<pre><code>2019-12-31 02:27:42.496 16222-16222/? E/mple.myhospita: Unknown bits set in runtime_flags: 0x8000\n2019-12-31 02:27:45.804 16222-16222/com.example.myhospital E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myhospital, PID: 16222\n    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.myhospital/com.example.myhospital.otp_auth}: kotlin.KotlinNullPointerException\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3194)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3409)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2016)\n        at android.os.Handler.dispatchMessage(Handler.java:107)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n     Caused by: kotlin.KotlinNullPointerException\n        at com.example.myhospital.otp_auth.&lt;init&gt;(otp_auth.kt:89)\n        at java.lang.Class.newInstance(Native Method)\n        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\n        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:43)\n        at android.app.Instrumentation.newActivity(Instrumentation.java:1243)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3182)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3409)\u00a0\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\u00a0\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\u00a0\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\u00a0\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2016)\u00a0\n        at android.os.Handler.dispatchMessage(Handler.java:107)\u00a0\n        at android.os.Looper.loop(Looper.java:214)\u00a0\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\u00a0\n        at java.lang.reflect.Method.invoke(Native Method)\u00a0\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\u00a0\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\u00a0\n</code></pre>\n\n<p><strong>My XML:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".otp_auth\"&gt;\n\n    &lt;EditText\n        android:id=\"@+id/enter_mobile\"\n        android:layout_width=\"359dp\"\n        android:layout_height=\"73dp\"\n        android:layout_marginTop=\"56dp\"\n        android:ems=\"10\"\n        android:hint=\"Enter Your Mobile No.\"\n        android:inputType=\"phone\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/bu_send_otp\"\n        android:layout_width=\"151dp\"\n        android:layout_height=\"56dp\"\n        android:layout_marginTop=\"28dp\"\n        android:text=\"Send OTP\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/enter_mobile\" /&gt;\n\n    &lt;EditText\n        android:id=\"@+id/enter_OTP\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:ems=\"10\"\n        android:hint=\"Enter OTP\"\n        android:inputType=\"number\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"@+id/bu_send_otp\"\n        app:layout_constraintHorizontal_bias=\"0.235\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/bu_send_otp\"\n        app:layout_constraintVertical_bias=\"0.246\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/buVerify\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"68dp\"\n        android:layout_marginBottom=\"256dp\"\n        android:fontFamily=\"monospace\"\n        android:text=\"Verify\"\n        android:textStyle=\"bold\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.384\"\n        app:layout_constraintStart_toEndOf=\"@+id/enter_OTP\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577777111, "post_id": 59540899, "comment_id": 105251057, "body": "Your listener is ignoring errors.  Log the exception in onCancelled to see if there was an error."}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577777135, "post_id": 59540899, "comment_id": 105251062, "body": "Operation to firebase is asynchronous. So your <code>Toast</code> shows message before execute the operation. That&#39;s mean your <code>Toast</code> doesn&#39;t reflect the actual result. Add your database structure to investigate more"}, {"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 0, "creation_date": 1577777394, "post_id": 59540899, "comment_id": 105251139, "body": "It replace by the empty string .So check the data in <code>post</code> and in <code>firebase</code>."}, {"owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577777590, "post_id": 59540899, "comment_id": 105251198, "body": "@DougStevenson Can you help me do that?"}, {"owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577777631, "post_id": 59540899, "comment_id": 105251210, "body": "@Md.Asaduzzaman  { &quot;dataID&quot; : { &quot;-LwM6GI3UwBxMkdoWiVe&quot; : { &quot;postDescription&quot; : &quot;description1&quot;, &quot;postName&quot; : &quot;Test Data&quot; } } }"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "edited": false, "score": 0, "creation_date": 1577778327, "post_id": 59541037, "comment_id": 105251401, "body": "Bravo, it worked. Can you tell me what was wrong with my code? I am totally a new to this and know nothing. Just started learning."}, {"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 1, "creation_date": 1577778435, "post_id": 59541037, "comment_id": 105251430, "body": "getReference(&quot;dataID&quot;) is not your data node it is your parent node. Then you have to access their children ."}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 1, "creation_date": 1577778771, "post_id": 59541037, "comment_id": 105251529, "body": "You code is absolutely fine. You just miss one thing that I mentioned in my answer,  In your database <code>dataID</code> can contains list of <code>Post</code> with key like <code>-LwM6GI3UwBxMkdoWiVe</code>. In your code you try to parse that key as <code>Post</code> object which is not correct."}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1577777745, "creation_date": 1577777745, "answer_id": 59541037, "question_id": 59540899, "link": "https://stackoverflow.com/questions/59540899/retrieve-data-from-firebase-on-android-studio/59541037#59541037", "title": "Retrieve data from Firebase on Android Studio", "body": "<p>You query to database return list of items. So loop through it and try to get <code>Post</code>. Check below:</p>\n\n<pre><code>override fun onDataChange(dataSnapshot: DataSnapshot) {\n    dataSnapshot.children.forEach {childSnapshot -&gt;\n        val post = childSnapshot.getValue(Post::class.java)\n        dbView.text=post?.postName\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1577778305, "creation_date": 1577778305, "answer_id": 59541128, "question_id": 59540899, "link": "https://stackoverflow.com/questions/59540899/retrieve-data-from-firebase-on-android-studio/59541128#59541128", "title": "Retrieve data from Firebase on Android Studio", "body": "<p><code>getReference(\"dataID\")</code>  is not your data node it is your parent node.\nThen you have to access their children using  <code>getChildren()</code> method.</p>\n\n<p>Change you on data change method with this.</p>\n\n<pre><code> override fun onDataChange(dataSnapshot: DataSnapshot) {\n        for (postSnapshot : dataSnapshot.getChildren()) {\n        val post = postSnapshot .getValue(Post::class.java)\n        dbView.text=post?.postName\n         }\n    }\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 3765415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/m0k9Y.jpg?s=128&g=1", "display_name": "user3765415", "link": "https://stackoverflow.com/users/3765415/user3765415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 59541037, "answer_count": 2, "score": 0, "last_activity_date": 1577778305, "creation_date": 1577776873, "last_edit_date": 1577777046, "question_id": 59540899, "link": "https://stackoverflow.com/questions/59540899/retrieve-data-from-firebase-on-android-studio", "title": "Retrieve data from Firebase on Android Studio", "body": "<p>Can someone help me fix it?</p>\n\n<p>Following code works without any error, however, it does not retrieve data from Firebase and show in the TextView.</p>\n\n<pre><code>private fun viewData() {\n    val postReference = FirebaseDatabase.getInstance().getReference(\"dataID\")\n    val dbView= findViewById&lt;TextView&gt;(R.id.txtFdbData)\n    val postListener = object : ValueEventListener {\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            val post = dataSnapshot.getValue(Post::class.java)\n            dbView.text=post?.postName\n        }\n        override fun onCancelled(databaseError: DatabaseError) {\n        }\n    }\n    postReference.addValueEventListener(postListener)\n    Toast.makeText(this,\"Retrieved\",Toast.LENGTH_LONG).show()\n}\n</code></pre>\n\n<p>Above code is called when I tap the button 'btnView'</p>\n\n<pre><code> viewButton = findViewById(R.id.btnView)\n        viewButton.setOnClickListener {\n            viewData()\n        }\n</code></pre>\n\n<p>When I hit the button it shows the toast message 'Retrieved' and the default value given in the TextView (txtFdbData) is deleted (or may be replaced with an empty string?, I do not know).</p>\n\n<p>Following is the post Class</p>\n\n<pre><code>data class Post (\n    val postName: String=\"\",\n    val postDescription:String=\"\")\n</code></pre>\n\n<p>I am working on Android Studio, using Kotlin and Firebase Realtime Database.</p>\n"}, {"tags": ["android", "kotlin", "android-edittext", "editor"], "comments": [{"owner": {"reputation": 1501, "user_id": 4557946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Qtd3P.jpg?s=128&g=1", "display_name": "Tushar Saha", "link": "https://stackoverflow.com/users/4557946/tushar-saha"}, "edited": false, "score": 0, "creation_date": 1577777244, "post_id": 59540610, "comment_id": 105251095, "body": "where is the problem?? i don&#39;t see any clear question here."}, {"owner": {"reputation": 359, "user_id": 9976418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FygQ3.png?s=128&g=1", "display_name": "Mahendra Gohil", "link": "https://stackoverflow.com/users/9976418/mahendra-gohil"}, "edited": false, "score": 0, "creation_date": 1577777298, "post_id": 59540610, "comment_id": 105251112, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/6200533/how-to-set-textview-textstyle-such-as-bold-italic\">How to set TextView textStyle such as bold, italic</a>"}, {"owner": {"reputation": 165, "user_id": 10233277, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6eC_MVyCXes/AAAAAAAAAAI/AAAAAAAAAPg/3srdfUJvVwQ/photo.jpg?sz=128", "display_name": "Berkay Kire&#231;ci", "link": "https://stackoverflow.com/users/10233277/berkay-kire%c3%a7ci"}, "edited": false, "score": 0, "creation_date": 1577779156, "post_id": 59540610, "comment_id": 105251650, "body": "I just tried this solution. My problem is that i dont wanna change typeface for all text. When i click bold, it makes all string bold. Thats why i used setSpan with indexes. But it doesnt work either."}], "answers": [{"tags": [], "owner": {"reputation": 1501, "user_id": 4557946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Qtd3P.jpg?s=128&g=1", "display_name": "Tushar Saha", "link": "https://stackoverflow.com/users/4557946/tushar-saha"}, "is_accepted": false, "score": 0, "last_activity_date": 1577777377, "creation_date": 1577777377, "answer_id": 59540975, "question_id": 59540610, "link": "https://stackoverflow.com/questions/59540610/how-to-change-typeface-programmatically-in-edittext-properly/59540975#59540975", "title": "How to change typeface programmatically in edittext properly?", "body": "<p>To change type face you can use some thing like this.</p>\n\n<pre><code>TextView tv = (TextView) findViewById(R.id.tvname);\nTypeface face = Typeface.createFromAsset(getAssets(),\n        \"fonts/epimodem.ttf\");\ntv.setTypeface(face);\n</code></pre>\n\n<p>Also you may try html for the same</p>\n\n<pre><code>textView.setText(Html.fromHtml(\"&lt;h2&gt;Title&lt;/h2&gt;&lt;br&gt;&lt;p&gt;Description here&lt;/p&gt;\", Html.FROM_HTML_MODE_COMPACT));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1987, "user_id": 1942463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced12e2371bca0e36ef0bb7cefafd432?s=128&d=identicon&r=PG&f=1", "display_name": "Rajasekaran M", "link": "https://stackoverflow.com/users/1942463/rajasekaran-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1577777514, "creation_date": 1577777514, "answer_id": 59540999, "question_id": 59540610, "link": "https://stackoverflow.com/questions/59540610/how-to-change-typeface-programmatically-in-edittext-properly/59540999#59540999", "title": "How to change typeface programmatically in edittext properly?", "body": "<p>You can update when change typeface when click button for bold or italic.</p>\n\n<p>Add below method to your code</p>\n\n<pre><code> fun onUpdateTypeface() {\n\n    when {\n        isBold &amp;&amp; isItalic -&gt;\n            view?.tvForgetPassword?.setTypeface(null, Typeface.BOLD_ITALIC);\n        isBold &amp;&amp; !isItalic -&gt;\n            view?.tvForgetPassword?.setTypeface(null, Typeface.BOLD);\n        !isBold &amp;&amp; isItalic -&gt;\n            view?.tvForgetPassword?.setTypeface(null, Typeface.ITALIC);\n        else -&gt; view?.tvForgetPassword?.setTypeface(null, Typeface.NORMAL);\n    }\n}\n</code></pre>\n\n<p>Update your onClick method</p>\n\n<pre><code>boldButton.onClick {\n    isBold = !isBold\n    val image = when (isBold) {\n        true -&gt; R.drawable.ic_bold_active\n        false -&gt; R.drawable.ic_bold\n    }\n    start = editor.text!!.length\n    boldButton.setImageResource(image)\n    onUpdateTypeface()\n}\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 10233277, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6eC_MVyCXes/AAAAAAAAAAI/AAAAAAAAAPg/3srdfUJvVwQ/photo.jpg?sz=128", "display_name": "Berkay Kire&#231;ci", "link": "https://stackoverflow.com/users/10233277/berkay-kire%c3%a7ci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1577777514, "creation_date": 1577774836, "question_id": 59540610, "link": "https://stackoverflow.com/questions/59540610/how-to-change-typeface-programmatically-in-edittext-properly", "title": "How to change typeface programmatically in edittext properly?", "body": "<p>i am trying to create a basic text editor. I almost achived what i wanted to do but there are some problems. When i press 'B' button, it makes text bold. If i keep writing without giving space and press 'B' button again,  all letters i write turn normal. But i want to keep letters bold which are already bold. When i give space, it works as i want, makes bold, italic or normal. Here are some parts of my code:</p>\n\n<pre><code> editor.textChangedListener {\n        beforeTextChanged { _, _, _, _ -&gt;\n            val length = editor.text?.length\n            length?.let {\n                if (it &gt; 0) {\n                    val styleSpan = when {\n                        isBold &amp;&amp; isItalic -&gt; StyleSpan(Typeface.BOLD_ITALIC)\n                        isBold &amp;&amp; !isItalic -&gt; StyleSpan(Typeface.BOLD)\n                        !isBold &amp;&amp; isItalic -&gt; StyleSpan(Typeface.ITALIC)\n                        else -&gt; StyleSpan(Typeface.NORMAL)\n                    }\n                    val spannable = Spannable.SPAN_EXCLUSIVE_EXCLUSIVE\n                    if (it &lt; start) start = 0\n                    editor.text?.setSpan(styleSpan, start, it, spannable)\n                }\n            }\n        }\n    }\n    boldButton.onClick {\n        isBold = !isBold\n        val image = when (isBold) {\n            true -&gt; R.drawable.ic_bold_active\n            false -&gt; R.drawable.ic_bold\n        }\n        start = editor.text!!.length\n        boldButton.setImageResource(image)\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "scrollview"], "comments": [{"owner": {"reputation": 1637, "user_id": 5370550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/eccb2be595b28aa6f5da58e7a32199dc?s=128&d=identicon&r=PG&f=1", "display_name": "Nik", "link": "https://stackoverflow.com/users/5370550/nik"}, "edited": false, "score": 2, "creation_date": 1577774738, "post_id": 59540566, "comment_id": 105250406, "body": "You don&#39;t need horizontal scrollview. Even Recyclerview will scroll horizontally and Vertically"}, {"owner": {"reputation": 1663, "user_id": 6997819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNXp1.jpg?s=128&g=1", "display_name": "Vir Rajpurohit", "link": "https://stackoverflow.com/users/6997819/vir-rajpurohit"}, "edited": false, "score": 0, "creation_date": 1577774776, "post_id": 59540566, "comment_id": 105250420, "body": "What is need of horizontal scrollview if recyclerview itself can work same?"}, {"owner": {"reputation": 378, "user_id": 2294587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQuwK.jpg?s=128&g=1", "display_name": "Dashrath Rathod", "link": "https://stackoverflow.com/users/2294587/dashrath-rathod"}, "edited": false, "score": 0, "creation_date": 1577774944, "post_id": 59540566, "comment_id": 105250468, "body": "Please refer following URL this may be help you <a href=\"https://stackoverflow.com/questions/34258496/nestedscrollview-and-horizontal-recyclerview-smooth-scrolling\" title=\"nestedscrollview and horizontal recyclerview smooth scrolling\">stackoverflow.com/questions/34258496/&hellip;</a>"}, {"owner": {"reputation": 378, "user_id": 2294587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQuwK.jpg?s=128&g=1", "display_name": "Dashrath Rathod", "link": "https://stackoverflow.com/users/2294587/dashrath-rathod"}, "edited": false, "score": 0, "creation_date": 1577775006, "post_id": 59540566, "comment_id": 105250484, "body": "Please refer following URL this may help you <a href=\"https://stackoverflow.com/questions/34258496/nestedscrollview-and-horizontal-recyclerview-smooth-scrolling\" title=\"nestedscrollview and horizontal recyclerview smooth scrolling\">stackoverflow.com/questions/34258496/&hellip;</a>"}, {"owner": {"reputation": 140, "user_id": 9470643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f91c238aa119dad250c4b6eb3eb8e8d7?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/9470643/mohammad"}, "edited": false, "score": 0, "creation_date": 1577775477, "post_id": 59540566, "comment_id": 105250599, "body": "thanks, Nik. when I deleted HorizontalScrollView it works correctly!"}], "answers": [{"tags": [], "owner": {"reputation": 924, "user_id": 9884628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJ5Py.jpg?s=128&g=1", "display_name": "Karan Mehta", "link": "https://stackoverflow.com/users/9884628/karan-mehta"}, "is_accepted": false, "score": -1, "last_activity_date": 1577774848, "creation_date": 1577774848, "answer_id": 59540611, "question_id": 59540566, "link": "https://stackoverflow.com/questions/59540566/scrollview-doesnt-work-in-mobile-but-work-in-simulation/59540611#59540611", "title": "scrollview doesn&#39;t work in mobile but work in simulation", "body": "<p>When you are setting adapter for first time, you don't need to notifyDataSetChanged(),\nSo try removing </p>\n\n<pre><code>adapter.notifyDataSetChanged()\n</code></pre>\n\n<p>You should use it whenever there is a change in list items afterwards anywhere in class.</p>\n"}, {"tags": [], "owner": {"reputation": 733, "user_id": 7719064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330b14ebe09d3c66209141f6268fe033?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Raiyani", "link": "https://stackoverflow.com/users/7719064/akshay-raiyani"}, "is_accepted": true, "score": 2, "last_activity_date": 1577778619, "creation_date": 1577778619, "answer_id": 59541177, "question_id": 59540566, "link": "https://stackoverflow.com/questions/59540566/scrollview-doesnt-work-in-mobile-but-work-in-simulation/59541177#59541177", "title": "scrollview doesn&#39;t work in mobile but work in simulation", "body": "<p>Try with the only recyclerview, delete HorizontalScrollView from parent. For HorizontalScroll you can use below code.</p>\n\n<pre><code>recycler_challenge.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, true));\n\n\n&lt;androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/recycler_challenge\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:layoutManager=\"android.support.v7.widget.LinearLayoutManager\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 140, "user_id": 9470643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f91c238aa119dad250c4b6eb3eb8e8d7?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/9470643/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59541177, "answer_count": 2, "score": 0, "last_activity_date": 1577778619, "creation_date": 1577774573, "question_id": 59540566, "link": "https://stackoverflow.com/questions/59540566/scrollview-doesnt-work-in-mobile-but-work-in-simulation", "title": "scrollview doesn&#39;t work in mobile but work in simulation", "body": "<p>I have used a RecyclerView which is shaped to horizontal using LayoutManager,\nI put my RecyclerView in HorizontalScrollView and it works well, in the android simulation of the Android Studio while in the real phone, it works some times! I mean it scrolls a little and can't scroll completely but if you try to scroll it so much suddenly it can scroll completely.</p>\n\n<p>here is my recycler view code:</p>\n\n<pre><code>    &lt;HorizontalScrollView\n        android:id=\"@+id/scrollbar\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"&gt;\n\n\n           &lt;androidx.recyclerview.widget.RecyclerView\n               android:id=\"@+id/recycler_challenge\"\n               android:layout_width=\"wrap_content\"\n               android:layout_height=\"wrap_content\" /&gt;\n\n\n    &lt;/HorizontalScrollView&gt;\n</code></pre>\n\n<p>and these codes show how I used RecyclerView in my Fragment:</p>\n\n<pre><code>    val recyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recycler_challenge)\n\n    recyclerView.layoutManager = LinearLayoutManager(view.context, LinearLayoutManager.HORIZONTAL, false)\n\n\n    val challenges = ArrayList&lt;challenge_model&gt;()\n\n    challenges.add(challenge_model(\"https://pic1.jpg\", \"picture one\", false,\"pic_1\"))\n    challenges.add(challenge_model(\"https://pic1.jpg\", \"picture two\", false,\"pic_2\"))\n    challenges.add(challenge_model(\"https://pic1.jpg\", \"picture two\", false,\"pic_3\"))\n    challenges.add(challenge_model(\"https://pic1.jpg\", \"picture two\", false,\"pic_4\"))\n    challenges.add(challenge_model(\"https://pic1.jpg\", \"picture two\", false,\"pic_5\"))\n\n\n    val adapter = challenge_adapter(challenges)\n    recyclerView.adapter = adapter\n    adapter.notifyDataSetChanged()\n</code></pre>\n\n<p>based on the code above, about not scrolling completely, I mean I can scroll and see three picture and it seems it is it! but some times suddenly it can be scrolled completely and show all 5 images.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-glide", "appglidemodule"], "comments": [{"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1577904760, "post_id": 59539797, "comment_id": 105278975, "body": "edited: I think, I don&#39;t have to go through all of this and thinks an alternative options:  1. fork the glide, and create different GlideExtensions features 2. just migrate to kotlin (this will definitely match my desired to be functional method) 3. creating a wrapper method (static) to receive a lambda that return a <code>RequestListener&lt;Drawable&gt;</code>"}, {"owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "edited": false, "score": 0, "creation_date": 1577972164, "post_id": 59539797, "comment_id": 105296275, "body": "What is the error for? &quot;I&#39;ve also try the java approach like this, and also have a compile-error&quot;"}, {"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "reply_to_user": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "edited": false, "score": 0, "creation_date": 1577977778, "post_id": 59539797, "comment_id": 105298995, "body": "@TWiStErRob <code>addListener(RequestListener&lt;capture&lt;?&gt;&gt;) cannot be applied to (RequestListener&lt;Object&gt;)</code>"}, {"owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "edited": false, "score": 0, "creation_date": 1577980922, "post_id": 59539797, "comment_id": 105300585, "body": "That&#39;s good, I think. It sounds like the annotation processor passed, but your code had an error in it because of wrong type."}], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1577978330, "post_id": 59564360, "comment_id": 105299268, "body": "yes, I&#39;ve also tried using generic <code>BaseRequestOptions&lt;*&gt;</code> to <code>RequestBuilder&lt;Drawable&gt;</code> see this <a href=\"https://imgur.com/a/iB0pS0w\" rel=\"nofollow noreferrer\">image here</a>"}, {"owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "reply_to_user": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1577980844, "post_id": 59564360, "comment_id": 105300539, "body": "hmm, based on <a href=\"https://stackoverflow.com/a/40139018/253468\">stackoverflow.com/a/40139018/253468</a>, you might need <code>@JvmSuppressWildcards</code>"}], "tags": [], "owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "is_accepted": false, "score": 0, "last_activity_date": 1577972463, "creation_date": 1577972463, "answer_id": 59564360, "question_id": 59539797, "link": "https://stackoverflow.com/questions/59539797/glideoption-adding-extending-requestbuilder-to-customize-listener-and-achieve-f/59564360#59564360", "title": "@GlideOption adding/extending RequestBuilder to customize listener and achieve functional approach in Java 8", "body": "<p>I think you need to take the error message literally:</p>\n\n<pre><code>    @JvmStatic\n    @GlideOption\n    fun listener(\n            options: RequestBuilder&lt;Drawable&gt;,\n            failedAction: () -&gt; Unit,\n            readyAction: () -&gt; Unit\n    ): BaseRequestOptions&lt;Drawable&gt; {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    @JvmStatic\n    @GlideOption\n    fun listener(\n            options: RequestBuilder&lt;*&gt;, // no explicit type, wildcard only (=== Java's &lt;?&gt;)\n            failedAction: () -&gt; Unit,\n            readyAction: () -&gt; Unit\n    ): BaseRequestOptions&lt;*&gt; {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>    @JvmStatic\n    @GlideOption\n    fun listener(\n            options: BaseRequestOptions&lt;*&gt;, // not a subtype, exactly that type\n            failedAction: () -&gt; Unit,\n            readyAction: () -&gt; Unit\n    ): BaseRequestOptions&lt;*&gt; {\n</code></pre>\n\n<p>and then you can probably cast the <code>options</code> parameter to <code>RequestOptions</code> or the generated class' type, if necessary.</p>\n"}], "owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577978600, "creation_date": 1577768584, "last_edit_date": 1577978600, "question_id": 59539797, "link": "https://stackoverflow.com/questions/59539797/glideoption-adding-extending-requestbuilder-to-customize-listener-and-achieve-f", "title": "@GlideOption adding/extending RequestBuilder to customize listener and achieve functional approach in Java 8", "body": "<p>Glide Version: 4.9.0</p>\n\n<p>I tried to customized the <code>RequestBuilder</code> class, to have a customized builder, in this case I want to customize <code>RequestBuilder#addListener</code> function to have a <code>@FunctionalInterface</code> or <code>Function0&lt;R&gt;</code> as argument and to be functional for Java 8.</p>\n\n<p>I've tried to read documentation about <a href=\"http://bumptech.github.io/glide/doc/generatedapi.html#glideextension\" rel=\"nofollow noreferrer\"><code>@GlideExtensions</code> here</a> &amp; the difference between:</p>\n\n<ol>\n<li><code>@GlideOption</code>: for adding customized <code>RequestOptions</code> as long first parameter is extended from <code>BaseRequestOptions&lt;*&gt;</code> in this case <code>RequestBuilder&lt;TranscodeType&gt; extends BaseRequestOptions&lt;RequestBuilder&lt;TranscodeType&gt;&gt;</code></li>\n<li><code>@GlideType</code>: Definitely creating different type of drawable, not doing much of configuration, therefore I didn't try it.</li>\n</ol>\n\n<p>Due to <code>RequestListener</code> doesn't have <code>@FunctionalInterface</code> annotation, I ended-up using both <strong>Kotlin</strong> &amp; <strong>Java 8</strong> to achieve the <strong>lambda-like</strong> parameter function. </p>\n\n<p>I've created a <code>SafeGlideApp</code> class to handle context related problem <a href=\"https://github.com/bumptech/glide/issues/803#issuecomment-163528497\" rel=\"nofollow noreferrer\">using RequestManager inside onCreate</a> &amp; <a href=\"https://github.com/bumptech/glide/issues/1484#issuecomment-324888367\" rel=\"nofollow noreferrer\">checking if the activity <code>isFinishing</code></a></p>\n\n<pre><code>class SafeGlideApp {\n\n    companion object {\n\n        private lateinit var rm: RequestManager\n        private lateinit var target: ViewTarget&lt;ImageView, Drawable&gt;\n\n        /**\n         * This is mandatory to setup inside onCreate() on any Activity/Fragment\n         * @param Activity receive the current activity if not finishing\n         */\n        @JvmStatic\n        fun init(activity: Activity) {\n            rm = Glide.with(activity)\n        }\n\n        @JvmStatic\n        fun destroy() {\n            target.clearOnDetach()\n            rm.pauseAllRequests()\n            rm.clear(target)\n        }\n\n        @JvmStatic\n        fun with(activity: Activity, safeAction: (RequestManager) -&gt; ViewTarget&lt;ImageView, Drawable&gt;) {\n            init(activity)\n            activity.safeRunnable {\n                check(::rm.isInitialized)\n                target = safeAction(rm)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Here's my desired functions to call custom listener on SafeGlideApp.</p>\n\n<p><strong>Activity.java</strong></p>\n\n<pre><code>SafeGlideApp.with(this, requestManager -&gt; requestManager\n                        .load(url)\n                        .listener(\n                                Helpers.wrapper(() -&gt; doSomething()),\n                                Helpers.wrapper(() -&gt; doSomething())\n                        )\n                        .into(imageView)\n);\n</code></pre>\n\n<p>In order to have an interop between kotlin-java, I created this wrapper inspired by everyone in stackoverflow. So, in the invocation calls, cleaner and simplier.</p>\n\n<p><strong>Helpers.java</strong></p>\n\n<pre><code>    /**\n     * This lambda wrapper function takes nothing as argument and return Unit\n     * E.g: f(wrapper(() -&gt; doSomethingVoid()))\n     *\n     * @param callable\n     * @return Unit\n     */\n    public static Function0&lt;Unit&gt; wrapper(Runnable callable) {\n        return () -&gt; {\n            callable.run();\n            return Unit.INSTANCE;\n        };\n    }\n</code></pre>\n\n<p>And here's my approach so far to customize the <code>RequestBuilder</code>.</p>\n\n<p>My generic listener class</p>\n\n<p><strong>CustomListener.kt</strong></p>\n\n<pre><code>fun &lt;T : Any&gt; makeLoadingRequestListener(\n        failedAction: (() -&gt; Unit)?,\n        readyAction: (() -&gt; Unit)?\n): RequestListener&lt;T&gt; = object : RequestListener&lt;T&gt; {\n    override fun onLoadFailed(e: GlideException?, model: Any?, target: Target&lt;T&gt;?, isFirstResource: Boolean): Boolean {\n        failedAction?.invoke()\n        return false\n    }\n\n    override fun onResourceReady(resource: T, model: Any?, target: Target&lt;T&gt;?, dataSource: DataSource?, isFirstResource: Boolean): Boolean {\n        readyAction?.invoke()\n        return false\n    }\n}\n</code></pre>\n\n<p><strong>Troubleshooting</strong></p>\n\n<ul>\n<li>Using explicit type Drawable will have a compile-error: </li>\n</ul>\n\n<pre><code>e: [kapt] An exception occurred: java.lang.IllegalArgumentException:\n   @GlideOption methods must take a BaseRequestOptions&lt;?&gt; object as\n   their first parameter, but the first parameter in\n   MyAppGlideExtension#listener(RequestBuilder, Unit, Unit) is\n   RequestBuilder&lt;Drawable&gt;\n</code></pre>\n\n<p>Here's my extension class <strong>MyGlideExtension.kt</strong></p>\n\n<pre><code>@GlideExtension\nopen class MyAppGlideExtension private constructor() {\n\n    companion object {\n\n        @JvmStatic\n        @GlideOption\n        fun listener(\n                options: RequestBuilder&lt;Drawable&gt;,\n                failedAction: () -&gt; Unit,\n                readyAction: () -&gt; Unit\n        ): BaseRequestOptions&lt;Drawable&gt; {\n            return options.addListener(makeLoadingRequestListener&lt;Drawable&gt;(\n                    failedAction = failedAction,\n                    readyAction = readyAction\n            ))\n        }\n    }\n}\n</code></pre>\n\n<p>As stated in this issue <a href=\"https://github.com/bumptech/glide/issues/3552\" rel=\"nofollow noreferrer\">#3552</a> &amp; <a href=\"https://github.com/bumptech/glide/issues/4003\" rel=\"nofollow noreferrer\">#4030</a>. <code>FlickrGlideExtension</code> example is using Java. Also, the author stated to use <code>?</code> wildcard in Kotlin, in fact that's not supported in Kotlin.</p>\n\n<ul>\n<li>I've also try the java approach like this, and also have a compile-error</li>\n</ul>\n\n<pre><code>@GlideExtension\npublic final class MyGlideExtension {\n\n    private MyGlideExtension GlideExtension() {\n        return this;\n    }\n\n    @GlideOption\n    public static BaseRequestOptions&lt;?&gt; test(RequestBuilder&lt;?&gt; requestBuilder,\n                                             Function0&lt;Unit&gt; failed,\n                                             Function0&lt;Unit&gt; ready) {\n        return requestBuilder.listener(new RequestListener&lt;Object&gt;() {\n            @Override\n            public boolean onLoadFailed(@Nullable GlideException e, Object model, Target&lt;Object&gt; target, boolean isFirstResource) {\n                return false;\n            }\n\n            @Override\n            public boolean onResourceReady(Object resource, Object model, Target&lt;Object&gt; target, DataSource dataSource, boolean isFirstResource) {\n                return false;\n            }\n        });\n    }\n}\n</code></pre>\n\n<ul>\n<li>Unfortunately, I didn't know how to use projection to solve this issue out-projected type prohibits for <code>RequestBuilder#addListener</code> function</li>\n</ul>\n\n<pre><code>@GlideExtension\nopen class MyAppGlideExtension private constructor() {\n\n    companion object {\n\n        @JvmStatic\n        @GlideOption\n        fun listener(\n                options: RequestBuilder&lt;*&gt;,\n                failedAction: () -&gt; Unit,\n                readyAction: () -&gt; Unit\n        ): BaseRequestOptions&lt;*&gt; {\n            return options.addListener(makeLoadingRequestListener&lt;Object&gt;(\n                    failedAction = failedAction,\n                    readyAction = readyAction\n            ))\n        }\n    }\n}\n</code></pre>\n\n<ul>\n<li>Manually extending <code>RequestManager</code> &amp; <code>RequestBuilder</code></li>\n</ul>\n\n<pre><code>class CustomRequestManager(\n        glide: Glide, lifecycle: Lifecycle,\n        treeNode: RequestManagerTreeNode, context: Context\n) : RequestManager(glide, lifecycle, treeNode, context) {\n\n    override fun load(string: String?): CustomRequestBuilder&lt;Drawable&gt; {\n        return super.load(string) as CustomRequestBuilder&lt;Drawable&gt;\n    }\n}\n\nclass CustomRequestBuilder&lt;TranscodeType : Any&gt;(\n        glide: Glide,\n        requestManager: RequestManager,\n        transcodeClass: Class&lt;TranscodeType&gt;,\n        context: Context\n) : RequestBuilder&lt;TranscodeType&gt;(glide, requestManager, transcodeClass, context) {\n\n    fun listener(failedAction: () -&gt; Unit, readyAction: () -&gt; Unit): RequestBuilder&lt;TranscodeType&gt; {\n        return addListener(makeLoadingRequestListener&lt;TranscodeType&gt;(\n                failedAction = failedAction,\n                readyAction = readyAction\n        ))\n    }\n}\n</code></pre>\n\n<p>but failed when casting <code>GlideApp.with(this) as CustomRequestManager</code> and throws compile-error: <code>GlideRequest cannot be casted to CustomRequestManager</code></p>\n\n<p>Last but not least.</p>\n\n<ul>\n<li>Is there any approach possible to extends/customize <code>RequestBuilder</code> class? </li>\n<li>Or is this possible creating a helper class without extending <code>RequestBuilder</code> to use\n&amp; wrap <code>RequestListener&lt;R&gt;</code> interface to be functional?</li>\n</ul>\n"}, {"tags": ["testing", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "is_accepted": true, "score": 2, "last_activity_date": 1577765081, "creation_date": 1577765081, "answer_id": 59539437, "question_id": 59539044, "link": "https://stackoverflow.com/questions/59539044/should-kotlin-test-classes-be-internal/59539437#59539437", "title": "Should Kotlin test classes be internal?", "body": "<p>Using <code>internal</code> visibility means that it can be accessed by other classes in the same module. This is the closest Kotlin has to Java's default 'package-private' which also makes sense for tests written in Java.</p>\n\n<p>Using <code>private</code> is more restrictive making it so that test classes can reuse each other which can be useful some times. There really shouldn't be a use for public test classes, unless they're global test helpers which would be the exception rather than the rule.</p>\n"}, {"tags": [], "owner": {"reputation": 650, "user_id": 6607435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVnaE.jpg?s=128&g=1", "display_name": "Pawan Soni", "link": "https://stackoverflow.com/users/6607435/pawan-soni"}, "is_accepted": false, "score": 0, "last_activity_date": 1577792825, "creation_date": 1577792825, "answer_id": 59543731, "question_id": 59539044, "link": "https://stackoverflow.com/questions/59539044/should-kotlin-test-classes-be-internal/59543731#59543731", "title": "Should Kotlin test classes be internal?", "body": "<p>Internal is a new modifier available in Kotlin that\u2019s not there in Java.\nSetting a declaration as internal means that it\u2019ll be available in the same module only.\nBy module in Kotlin, we mean a group of files that are compiled together.</p>\n\n<pre><code>internal class A {\n}\n\ninternal val x = 0\n</code></pre>\n\n<p>These won\u2019t be visible outside the current module.\nInternal Modifiers is useful when you need to hide specific library implementations from the users.\nThis wasn\u2019t possible using the package-private visibility in Java.</p>\n"}], "owner": {"reputation": 400, "user_id": 9527593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Np0L.png?s=128&g=1", "display_name": "z11i", "link": "https://stackoverflow.com/users/9527593/z11i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "accepted_answer_id": 59539437, "answer_count": 2, "score": 3, "last_activity_date": 1577792825, "creation_date": 1577760643, "question_id": 59539044, "link": "https://stackoverflow.com/questions/59539044/should-kotlin-test-classes-be-internal", "title": "Should Kotlin test classes be internal?", "body": "<p>When you generate a test class for a given class in IntelliJ, say <code>class Foo</code>, it will generate a test class <code>internal class FooTest</code>. Why does it default to an <code>internal class</code>? What's the advantage of using internal classes for test classes?</p>\n\n<p>The way I was generating test classes is: put cursor on the class name <code>Foo</code>, press <code>Option/Alt</code>+<code>Enter</code>, select \"Create Test\".</p>\n"}, {"tags": ["spring-boot", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 541, "user_id": 1117181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce29746f3ada533be47b21dbb5f8a4aa?s=128&d=identicon&r=PG", "display_name": "JasonMing", "link": "https://stackoverflow.com/users/1117181/jasonming"}, "edited": false, "score": 0, "creation_date": 1578566008, "post_id": 59538836, "comment_id": 105483266, "body": "Thanks about pointing out the configuration <code>org.springframework.boot.configurationprocessor.additionalMe&zwnj;&#8203;tadataLocations</code>. I&#39;ve read the source codes of spring-boot-configuration-processor, the key locations is <code>org.springframework.boot.configurationprocessor.MetadataStor&zwnj;&#8203;e#locateAdditionalMe&zwnj;&#8203;tadataFile</code>. The default behavior find additional json file in the <b>class output</b> path. But in gradle build, additional json file is located in <code>$buildDir&#47;resources&#47;main</code>."}, {"owner": {"reputation": 27474, "user_id": 613628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81249832e79806754a4bd9c915164fbf?s=128&d=identicon&r=PG", "display_name": "Stephane Nicoll", "link": "https://stackoverflow.com/users/613628/stephane-nicoll"}, "edited": false, "score": 0, "creation_date": 1597741840, "post_id": 59538836, "comment_id": 112226056, "body": "That looks like a bug in kapt to me."}, {"owner": {"reputation": 23, "user_id": 12525768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb7becb5f3f94e6ea38384549789ba1?s=128&d=identicon&r=PG&f=1", "display_name": "hirakida", "link": "https://stackoverflow.com/users/12525768/hirakida"}, "edited": false, "score": 0, "creation_date": 1597840566, "post_id": 59538836, "comment_id": 112263955, "body": "I see. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 27474, "user_id": 613628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81249832e79806754a4bd9c915164fbf?s=128&d=identicon&r=PG", "display_name": "Stephane Nicoll", "link": "https://stackoverflow.com/users/613628/stephane-nicoll"}, "is_accepted": true, "score": 1, "last_activity_date": 1597910741, "creation_date": 1597910741, "answer_id": 63500849, "question_id": 59538836, "link": "https://stackoverflow.com/questions/59538836/how-to-merge-additional-spring-configuration-metadata-json-with-kapt-when-using/63500849#63500849", "title": "How to merge additional-spring-configuration-metadata.json with kapt when using Kotlin and Gradle?", "body": "<p>Adding an answer here for better visibility. This is a known issue in the Kapt maven plugin that does not make sure the compilation classpath is available when the annotation processor runs. The implementation can't see the file and therefore won't merge it.</p>\n<p>Your workaround works and there is an issue <a href=\"https://youtrack.jetbrains.com/issue/KT-41217\" rel=\"nofollow noreferrer\">you can vote for</a> in the JetBrains issue tracker.</p>\n"}], "owner": {"reputation": 23, "user_id": 12525768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb7becb5f3f94e6ea38384549789ba1?s=128&d=identicon&r=PG&f=1", "display_name": "hirakida", "link": "https://stackoverflow.com/users/12525768/hirakida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 63500849, "answer_count": 1, "score": 1, "last_activity_date": 1597910741, "creation_date": 1577758481, "last_edit_date": 1577761243, "question_id": 59538836, "link": "https://stackoverflow.com/questions/59538836/how-to-merge-additional-spring-configuration-metadata-json-with-kapt-when-using", "title": "How to merge additional-spring-configuration-metadata.json with kapt when using Kotlin and Gradle?", "body": "<p>I have read these documents but I don\u2019t know how to merge <code>additional-spring-configuration-metadata.json</code> with <code>kapt</code> when using Kotlin and Gradle.<br>\n<a href=\"https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/appendix-configuration-metadata.html#configuration-metadata-annotation-processor\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/appendix-configuration-metadata.html#configuration-metadata-annotation-processor</a><br>\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-kotlin-configuration-properties\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-kotlin-configuration-properties</a></p>\n\n<p>I managed to merge it this way, but I want to know the official way.</p>\n\n<pre><code>plugins {\n    id(\"org.springframework.boot\") version \"2.2.2.RELEASE\"\n    id(\"io.spring.dependency-management\") version \"1.0.8.RELEASE\"\n    kotlin(\"jvm\") version \"1.3.61\"\n    kotlin(\"plugin.spring\") version \"1.3.61\"\n    kotlin(\"kapt\") version \"1.3.61\"\n}\n\ndependencies {\n    kapt(\"org.springframework.boot:spring-boot-configuration-processor\")\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    implementation(\"org.jetbrains.kotlin:kotlin-reflect\")\n    \u2026\n}\n\nkapt {\n    arguments {\n        arg(\n            \"org.springframework.boot.configurationprocessor.additionalMetadataLocations\",\n            \"$projectDir/src/main/resources\"\n        )\n    }\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions {\n        freeCompilerArgs = listOf(\"-Xjsr305=strict\")\n        jvmTarget = \"1.8\"\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "list", "kotlin", "random"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577757571, "post_id": 59538719, "comment_id": 105247537, "body": "You just don&#39;t want the same value twice? Use the code you have, remember the last value, and if it comes up next, ignore it, get the next random number until it&#39;s different from the last that was output."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577761776, "post_id": 59538719, "comment_id": 105248108, "body": "Thanks for comment, I want to use list to to find a way how to solve latency problem of quiz app (see linked post) by pre-checking and pre-setting values before quiz."}, {"owner": {"reputation": 14257, "user_id": 820127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f8fffeec4f2ba3e75aebe941e4e5dd?s=128&d=identicon&r=PG", "display_name": "rossum", "link": "https://stackoverflow.com/users/820127/rossum"}, "edited": false, "score": 0, "creation_date": 1577796129, "post_id": 59538719, "comment_id": 105257417, "body": "One way to avoid repeats is to shuffle, rather than pick randomly."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577763597, "post_id": 59539184, "comment_id": 105248395, "body": "Thanks, but how can I make <code>set</code> variable accessible in <code>onCreate()</code>? See my edited post. If I do like this, I get error in <code>set[lastIndex]</code>."}, {"owner": {"reputation": 1609, "user_id": 3983066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r1qMF.jpg?s=128&g=1", "display_name": "Shadow Droid", "link": "https://stackoverflow.com/users/3983066/shadow-droid"}, "reply_to_user": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577766020, "post_id": 59539184, "comment_id": 105248704, "body": "@vasik988 set[lastIndex] will give you error because Set belongs to Collections, so you have to iterate it...or you can convert Set to Array using <code>set.toArray()</code> which will return you array and then you can use setArray[lastIndex]."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577791729, "post_id": 59539184, "comment_id": 105255936, "body": "<code>toArray()</code> Gives me unresolved reference. I tried to add <code>import kotlin.collections</code> but it didn&#39;t work, how to refer to <code>toArray()</code>?"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577831884, "post_id": 59539184, "comment_id": 105266853, "body": "It works in the way I want when I set  <code>mutableListOf</code> instead of <code>mutableSetOf </code>. Thanks!"}], "tags": [], "owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "is_accepted": true, "score": 0, "last_activity_date": 1577762322, "creation_date": 1577762322, "answer_id": 59539184, "question_id": 59538719, "link": "https://stackoverflow.com/questions/59538719/how-to-create-random-list-without-repeating-one-previous-value/59539184#59539184", "title": "How to create random list without repeating one previous value?", "body": "<p>You can use a Set, a set is a data structure present in  languaes where it contains unique items</p>\n\n<pre><code>fun randomList(size: Int)List&lt;Int&gt; {\n    val set = mutableSetOf&lt;Int&gt;()\n    while (set.size &lt; size) {\n              set.add(/*your random here*/)\n     }\n     return set.toList()\n}\n</code></pre>\n\n<p>The while makes the size is the the needed and the set makes sure thar repeated numbers on each iteration are nor added twice</p>\n"}], "owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1577819918, "accepted_answer_id": 59539184, "answer_count": 1, "score": 0, "last_activity_date": 1577763496, "creation_date": 1577757251, "last_edit_date": 1577763496, "question_id": 59538719, "link": "https://stackoverflow.com/questions/59538719/how-to-create-random-list-without-repeating-one-previous-value", "closed_reason": "Needs more focus", "title": "How to create random list without repeating one previous value?", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.random/-random/index.html\" rel=\"nofollow noreferrer\">This</a> code creates list of random numbers, but sometimes value of one previous index is repeated. I can use code below to avoid repeating, but it creates random integer, not list. So, I need to avoid list to be like this <code>[1,1,0,5]</code> and want it to be like this <code>[1,0,1,5]</code></p>\n\n<pre><code>var previousIndex = 0\n\nprivate fun getNewRandomIndex(): Int {\n        var newIndex = -1\n        while (true) {\n            newIndex = random.nextInt(randomValues.size)\n            if (previousIndex != newIndex) {\n                previousIndex = newIndex\n                break\n            }\n        }\n        return newIndex\n    }\n</code></pre>\n\n<p>I want to use created list called <code>randomNumbers</code> for this code.</p>\n\n<pre><code>var lastIndex = 0\n imageView.setOnClickListener {\n\n\n                lastIndex = (lastIndex + 1) % randomNumbers.size\n            button.text = randomNumbers[lastIndex].toString()\n        }\n</code></pre>\n\n<p>Edited:</p>\n\n<pre><code>var lastIndex = 0\n    val set = mutableSetOf&lt;Int&gt;()\n            while (set.size &lt; 5) {\n                set.add(getNewRandomIndex())\n            }\n            set.toList()\n\n    imageView.setOnClickListener {\n                    lastIndex = (lastIndex + 1) % set.size\n                button.text = set[lastIndex].toString()\n            }\n\n    Error: No get method providing array access\n</code></pre>\n"}, {"tags": ["json", "kotlin", "serialization"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 9544327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zk5ZL.jpg?s=128&g=1", "display_name": "volkan y\u0131lmaz", "link": "https://stackoverflow.com/users/9544327/volkan-y%c4%b1lmaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1577749072, "creation_date": 1577749072, "answer_id": 59537998, "question_id": 59537900, "link": "https://stackoverflow.com/questions/59537900/jsonobject-extract-key-and-value-in-kotlin/59537998#59537998", "title": "JsonObject extract key and value in kotlin", "body": "<pre><code>for (key in myListTypes.keySet()) {\n   myListTypes.get(key).toString()\n}\n</code></pre>\n\n<p>works for me!</p>\n"}], "owner": {"reputation": 33, "user_id": 9544327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zk5ZL.jpg?s=128&g=1", "display_name": "volkan y\u0131lmaz", "link": "https://stackoverflow.com/users/9544327/volkan-y%c4%b1lmaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577749072, "creation_date": 1577748192, "question_id": 59537900, "link": "https://stackoverflow.com/questions/59537900/jsonobject-extract-key-and-value-in-kotlin", "title": "JsonObject extract key and value in kotlin", "body": "<p>In kotlin i have a response like that:</p>\n\n<pre><code>\"nameIdPairs\":{\"name1\":\"590f7340a1fc\", \"name2\":\"590f7340a1fc\"}}\n</code></pre>\n\n<p>since key and value is not determined before, it changes continuosly. Therefore, i cannot use data class. I get this response with JsonObject but i need to extract \"name1\" and \"590f7340a1fc\" seperately. What are the possible ways to do it in Kotlin?</p>\n"}, {"tags": ["kotlin", "jvm", "linechart", "variadic", "tornadofx"], "comments": [{"owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "edited": false, "score": 0, "creation_date": 1577829336, "post_id": 59537712, "comment_id": 105266407, "body": "Would the chart values be bound to the list of objects (meaning the chart would change immediately be seen in the chart) or would it be more like a button generating the chart from the list (no live change, just when button clicked)?"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 2318948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ef4105f7e05ed49002bb617e1e01d9?s=128&d=identicon&r=PG", "display_name": "Deepan", "link": "https://stackoverflow.com/users/2318948/deepan"}, "is_accepted": true, "score": 0, "last_activity_date": 1577890328, "creation_date": 1577890328, "answer_id": 59553479, "question_id": 59537712, "link": "https://stackoverflow.com/questions/59537712/filling-a-line-chart-with-generated-data-in-tornadofx/59553479#59553479", "title": "Filling a line chart with generated data in TornadoFX", "body": "<p>Assuming you have a list <code>myList</code> with respective properties <code>a b c</code> in each element then <code>data()</code> can be called for each item using looping in <code>myList</code> i.e.</p>\n\n<pre><code>myList.forEach { item -&gt;\n    data( item.a, item.b, item.c)\n}\n</code></pre>\n\n<p>instead of manually calling <code>data()</code> for each data point</p>\n"}], "owner": {"reputation": 3, "user_id": 6287847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88c9afd51d4ba597d5ffdcd8dd85d975?s=128&d=identicon&r=PG&f=1", "display_name": "ImaginaryNumb3r", "link": "https://stackoverflow.com/users/6287847/imaginarynumb3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 59553479, "answer_count": 1, "score": 0, "last_activity_date": 1577890328, "creation_date": 1577746537, "question_id": 59537712, "link": "https://stackoverflow.com/questions/59537712/filling-a-line-chart-with-generated-data-in-tornadofx", "title": "Filling a line chart with generated data in TornadoFX", "body": "<p>I'm trying to turn a table of data into a series of line charts with TornadoFX. Each line in the table should correspond to a named line in the chart. As a start, I've followed the <a href=\"https://github.com/edvin/tornadofx-guide/blob/master/part1/8.%20Charts.md\" rel=\"nofollow noreferrer\">TornadoFX guide</a>, but this only covers the use case with hard coded values.</p>\n\n<p>This is the TornadoFX guide example:</p>\n\n<pre><code>linechart(\"Unit Sales Q2 2016\", CategoryAxis(), NumberAxis()) {\n\n    multiseries(\"Product X\", \"Product Y\") {\n        data(\"MAR\", 10245, 28443)\n        data(\"APR\", 23963, 22845)\n        data(\"MAY\", 15038, 19045)\n    }\n}\n</code></pre>\n\n<p>I was successful in creating the labels for the series, but that was about it:</p>\n\n<pre><code>val multiSeriesHeader = table.columHeaders.map { it.toString() }.toTypedArray()\n\nlinechart(\"Unit Sales Q2 2016\", CategoryAxis(), NumberAxis()) {\n    multiseries(*multiSeriesHeader) {\n        // Here I want something like:\n        // multidata( array of lines in the matrix, in the \"data\" format )\n    }\n}\n</code></pre>\n\n<p>My end goal is a way to \"automatically generate\" new lines of <code>data(\"Month\", values...)</code> so I can create more lines to the chart by appending more values to a list of \"line-data\". However, I feel utterly lost with the way the <code>linechart</code> method creates the line chart and how the subsequent calls to <code>multiseries</code> and <code>data</code> translate into arguments (via these blocks).</p>\n\n<p>I am new to TornadoFX and somewhat new with Kotlin. So, I don't know if there is a trick in the language or the library that would solve my problem. Help is be greatly appreciated!</p>\n"}, {"tags": ["android", "kotlin", "nullpointerexception"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12627579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ScHLOTMg6Og/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfX8_xaWDycV2WgthK04-0vgsrmIg/photo.jpg?sz=128", "display_name": "akhi halder", "link": "https://stackoverflow.com/users/12627579/akhi-halder"}, "edited": false, "score": 0, "creation_date": 1577857707, "post_id": 59536594, "comment_id": 105269466, "body": "I did.   open var plane = arrayOfNulls&lt;Bitmap&gt;(15)"}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577738296, "creation_date": 1577738296, "answer_id": 59536594, "question_id": 59536535, "link": "https://stackoverflow.com/questions/59536535/there-is-no-error-in-the-code-but-after-install-my-app-crash-and-rectifying-lo/59536594#59536594", "title": "There is no error in the code. But after install, my app crash and rectifying logcat &quot;error is attemp to write to null array&quot;", "body": "<p>Looks like you didn't initialize the <code>plane</code> array in <code>Plane.kt</code>:</p>\n\n<pre><code>init {\n    plane = arrayOf(\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_1),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_2),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_3),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_4),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_5),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_6),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_7),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_8),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_9),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_10),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_11),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_12),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_13),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_14),\n        BitmapFactory.decodeResource(context.resources, R.drawable.plane_15)\n    )\n    random = Random()\n    resetPosition()\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12627579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ScHLOTMg6Og/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfX8_xaWDycV2WgthK04-0vgsrmIg/photo.jpg?sz=128", "display_name": "akhi halder", "link": "https://stackoverflow.com/users/12627579/akhi-halder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577777822, "creation_date": 1577737849, "last_edit_date": 1577777822, "question_id": 59536535, "link": "https://stackoverflow.com/questions/59536535/there-is-no-error-in-the-code-but-after-install-my-app-crash-and-rectifying-lo", "title": "There is no error in the code. But after install, my app crash and rectifying logcat &quot;error is attemp to write to null array&quot;", "body": "<p><strong>Here is my code Plane.kt</strong></p>\n\n<pre><code> init {\n    plane[0] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_1)\n    plane[1] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_2)\n    plane[2] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_3)\n    plane[3] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_4)\n    plane[4] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_5)\n    plane[5] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_6)\n    plane[6] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_7)\n    plane[7] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_8)\n    plane[8] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_9)\n    plane[9] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_10)\n    plane[10] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_11)\n    plane[11] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_12)\n    plane[12] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_13)\n    plane[13] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_14)\n    plane[14] = BitmapFactory.decodeResource(context.resources, R.drawable.plane_15)\n    random = Random()\n    resetPosition()\n}\n</code></pre>\n\n<p><strong>Here is my code Plane2.kt</strong></p>\n\n<pre><code>open class Plane2(context: Context) : Plane(context) {\noverride var  plane = arrayOfNulls&lt;Bitmap&gt;(10)\noverride val bitmap: Bitmap?\n    get() = plane[planeFrame]\n\noverride val width: Int\n    get() = plane[0]!!.width\n\noverride val height: Int\n    get() = plane[0]!!.height\n\noverride fun resetPosition() {\n    planeX = -(200 + random.nextInt(1500))\n    planeY = random.nextInt(400)\n    velocity = 5 + random.nextInt(21)\n}\n</code></pre>\n\n<p><strong>Here is my code GameView.kt</strong></p>\n\n<pre><code> init {\n    tank = BitmapFactory.decodeResource(resources, R.drawable.tank)\n    val display = (getContext() as Activity).windowManager.defaultDisplay\n    val size = Point()\n    display.getSize(size)\n    dWidth = size.x\n    dHeight = size.y\n    rect = Rect(0, 0, dWidth, dHeight)\n    planes = ArrayList()\n    planes2 = ArrayList()\n    missiles = ArrayList()\n    explosions = ArrayList()\n    for (i in 0..1) {\n  open class Plane2(context: Context) : Plane(context) {\noverride var  plane = arrayOfNulls&lt;Bitmap&gt;(10)\noverride val bitmap: Bitmap?\n    get() = plane[planeFrame]\n\noverride val width: Int\n    get() = plane[0]!!.width\n\noverride val height: Int\n    get() = plane[0]!!.height\n\noverride fun resetPosition() {\n    planeX = -(200 + random.nextInt(1500))\n    planeY = random.nextInt(400)\n    velocity = 5 + random.nextInt(21)\n}\n  val plane = Plane(context)\n        planes.add(plane)\n        val plane2 = Plane2(context)\n        planes2.add(plane2)\n    }\n</code></pre>\n\n<p><strong>StartGame.kt</strong></p>\n\n<pre><code>class StartGame : Activity() {\nvar gameView: GameView? = null\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    requestWindowFeature(Window.FEATURE_NO_TITLE)\n    this.window.setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN)\n    this.window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON)\n    //gameView = GameView(this)\n    gameView = GameView(this)\n    setContentView(gameView)\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Here is my Logcat error</strong></p>\n\n<pre><code>2019-12-31 01:58:49.006 6311-6311/com.example.shooterplane E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.shooterplane, PID: 6311\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.shooterplane/com.example.shooterplane.StartGame}: java.lang.NullPointerException: Attempt to write to null array\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2946)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3081)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1831)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loop(Looper.java:201)\n    at android.app.ActivityThread.main(ActivityThread.java:6810)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\n Caused by: java.lang.NullPointerException: Attempt to write to null array\n    at com.example.shooterplane.Plane.&lt;init&gt;(Plane.kt:32)\n    at com.example.shooterplane.Plane2.&lt;init&gt;(Plane2.kt:7)\n    at com.example.shooterplane.GameView.&lt;init&gt;(GameView.kt:183)\n    at com.example.shooterplane.StartGame.onCreate(StartGame.kt:16)\n    at android.app.Activity.performCreate(Activity.java:7224)\n    at android.app.Activity.performCreate(Activity.java:7213)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1272)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2926)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3081)\u00a0\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\u00a0\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\u00a0\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1831)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:106)\u00a0\n    at android.os.Looper.loop(Looper.java:201)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6810)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\u00a0\n</code></pre>\n\n<p>What is the logic of this problem?</p>\n"}, {"tags": ["android", "kotlin", "android-room", "rx-kotlin"], "comments": [{"owner": {"reputation": 583, "user_id": 6932415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21eb39eb48004add7a1ac82b85632170?s=128&d=identicon&r=PG&f=1", "display_name": "Michiel", "link": "https://stackoverflow.com/users/6932415/michiel"}, "edited": false, "score": 0, "creation_date": 1577737880, "post_id": 59536511, "comment_id": 105242650, "body": "Are you sure the <code>LiveData</code> should be wrapped in a separate <code>MediatorLiveData</code>?"}, {"owner": {"reputation": 367, "user_id": 7359831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d371c1ddd5e308bfaf155378d82944?s=128&d=identicon&r=PG&f=1", "display_name": "Pytan", "link": "https://stackoverflow.com/users/7359831/pytan"}, "reply_to_user": {"reputation": 583, "user_id": 6932415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21eb39eb48004add7a1ac82b85632170?s=128&d=identicon&r=PG&f=1", "display_name": "Michiel", "link": "https://stackoverflow.com/users/6932415/michiel"}, "edited": false, "score": 0, "creation_date": 1577740626, "post_id": 59536511, "comment_id": 105243527, "body": "@Michiel not sure.. Isn&#39;t it ok?"}], "owner": {"reputation": 367, "user_id": 7359831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2d371c1ddd5e308bfaf155378d82944?s=128&d=identicon&r=PG&f=1", "display_name": "Pytan", "link": "https://stackoverflow.com/users/7359831/pytan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577737700, "creation_date": 1577737700, "question_id": 59536511, "link": "https://stackoverflow.com/questions/59536511/android-want-to-fetch-data-from-roomdb-when-2-variables-changed", "title": "Android: want to fetch data from roomDB when 2 variables changed", "body": "<p>I wanna fetch data from roomDB when variable changed. When folderName changed and when task changed.\nI use <code>MediatorLiveData</code>, but it doesn't work.\nHow can I fix it?</p>\n\n<p>This is a view model class.</p>\n\n<pre><code> val folderName = ViewModelFolder.selectedFolder // MutableLiveData&lt;String&gt;\n val filteredTasks = MediatorLiveData&lt;LiveData&lt;List&lt;Task&gt;&gt;&gt;()\n init {\n   filteredTasks.addSource(folderName) { name -&gt;\n     filteredTasks.value = getTasksByFolderIsDone(name, false)\n   }\n}\n</code></pre>\n\n<p>Main activity</p>\n\n<pre><code>taskViewModel.filteredTasks.observe(viewLifecycleOwner, Observer { tasks -&gt;\n  tasks?.let { taskAdapter.setTasks(tasks as List&lt;Task&gt;) }\n})\n</code></pre>\n"}, {"tags": ["caching", "kotlin", "repository", "android-room"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577741330, "post_id": 59536461, "comment_id": 105243791, "body": "There&#39;s a different problem in the above. <code>if (user != null) return MutableLiveData&lt;User&gt;(user)</code> should also be checking that <code>user.id == userId</code>. You also might want to limit the cache duration (or otherwise cleared) otherwise database changes to the current logged in user would never be visible."}, {"owner": {"reputation": 1336, "user_id": 5360898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2311f7173b8d73d55690a4fb6ce11d8f?s=128&d=identicon&r=PG&f=1", "display_name": "yaugenka", "link": "https://stackoverflow.com/users/5360898/yaugenka"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 1, "creation_date": 1577743673, "post_id": 59536461, "comment_id": 105244584, "body": "Good points! But I guess those will be the next steps after I manage to set the user into cache."}], "owner": {"reputation": 1336, "user_id": 5360898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2311f7173b8d73d55690a4fb6ce11d8f?s=128&d=identicon&r=PG&f=1", "display_name": "yaugenka", "link": "https://stackoverflow.com/users/5360898/yaugenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577737442, "creation_date": 1577737442, "question_id": 59536461, "link": "https://stackoverflow.com/questions/59536461/repository-with-simple-cache-in-kotlin", "title": "Repository with simple cache in Kotlin", "body": "<p>I'm trying to implement a simple caching of a logged in user in a repository which is linked to a room database.</p>\n\n<p>Here is the code of the repository</p>\n\n<pre><code>@Singleton\nclass UserRepository @Inject constructor(\n    private val webservice: Webservice,\n    private val userDao: UserDao\n) {\n    var user: User? = null  //simple cache of a currently logged in user\n        private set\n\n    init {\n        user = null\n    }\n\n    fun getUser(userId: Int): LiveData&lt;User&gt; {\n        if (user != null)\n            return MutableLiveData&lt;User&gt;(user)\n        val data = userDao.load(userId)\n        //the value is always null because the load function is done async\n        user = data.value\n        return data\n    }\n}\n</code></pre>\n\n<p>And here is the UserDao</p>\n\n<pre><code>@Dao\ninterface UserDao {\n    @Query(\"select * from user where id = :userId\")\n    fun load(userId: Int): LiveData&lt;User&gt;\n}\n</code></pre>\n\n<p>User data is feched by a ViewModel like so</p>\n\n<pre><code>class HomeViewModel @Inject constructor(\n        repository: UserRepository\n    ) : ViewModel() {\n\n    val userId: Int = MainActivity.uid\n    val user: LiveData&lt;User&gt; = repository.getUser(userId)\n}\n</code></pre>\n\n<p>The data is fetched from the database and displayed correctly but the loaded user is never asigned to the cache because the loading is done async. Is it possible to add some listener to the load function?</p>\n\n<p>I'm quite new to kotlin and android in general so if there are some better solutions for this kind of simple cache please advise.</p>\n"}, {"tags": ["kotlin", "dsl"], "answers": [{"tags": [], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "is_accepted": false, "score": 0, "last_activity_date": 1577739302, "creation_date": 1577739302, "answer_id": 59536746, "question_id": 59536338, "link": "https://stackoverflow.com/questions/59536338/dslmarker-not-limiting-the-scope-of-dsl/59536746#59536746", "title": "@DSLMarker not limiting the scope of DSL", "body": "<p>It seems annotating the base class, in this case <code>Tag</code>, does the trick, that probably means all those other annotations serve no purpose?</p>\n\n<pre><code>@DslMarker\nannotation class TagMarker\n\n@TagMarker\nabstract class Tag(val tagName: String, var selfClosing: Boolean = false): Element {\n\n    val children = arrayListOf&lt;Element&gt;()\n    val attributes = hashMapOf&lt;String, String&gt;()\n\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/G0J6k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G0J6k.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577739302, "creation_date": 1577736689, "question_id": 59536338, "link": "https://stackoverflow.com/questions/59536338/dslmarker-not-limiting-the-scope-of-dsl", "title": "@DSLMarker not limiting the scope of DSL", "body": "<p>i'm building a Kotlin DSL for HTML that caters for very specific requirements i have (hence not using kotlinx.html)</p>\n\n<pre><code>        DIV(classes = \"div1\") {\n            +\"text1\"\n            a(href = \"#0\") {\n                +\"text2\"\n                div(classes = \"div2\") {\n                    +\"text3\"\n                    href = \"#1\"\n                }\n                div(classes = \"div3\") {\n                    +\"text4\"\n                    href = \"#2\"\n                }\n            }\n            hr(classes = \"hr1\")\n            span(classes = \"span1\") {\n                +\"text5\"\n            }\n        }\n</code></pre>\n\n<p>In the example above, i'm able to call <code>href</code> in any of the child elements of <code>a</code> instead of having to do <code>this@a.href = \"\"</code>. How do i limit the scope so that <code>this</code> will only be of type <code>DIV</code> in this example and throw a compiler error when calling <code>href</code> since <code>DIV</code> doesn't have an <code>href</code> property?</p>\n\n<p>Here's a shortened version of the <code>DIV</code> class\n<a href=\"https://github.com/persephone-unframework/dsl/blob/master/src/main/kotlin/io/persephone/dsl/element/DIV.kt\" rel=\"nofollow noreferrer\">https://github.com/persephone-unframework/dsl/blob/master/src/main/kotlin/io/persephone/dsl/element/DIV.kt</a></p>\n\n<pre><code>@DslMarker\nannotation class DivMarker\n\n@DivMarker\nclass DIV(\n    classes: String? = null,\n    ....\n    init: (DIV.() -&gt; Unit)? = null\n) : Tag(\n    tagName = \"div\",\n    selfClosing = false\n) {\n\n    fun a(\n        classes: String? = null,\n        ....\n        init: (A.() -&gt; Unit)? = null\n    ) = A().let {\n\n        this.children.add(it)\n        ....\n        init?.invoke(it)\n        it\n    }\n\n    ....\n\n}\n</code></pre>\n\n<p>Similarly, class A is also marked:\n<a href=\"https://github.com/persephone-unframework/dsl/blob/master/src/main/kotlin/io/persephone/dsl/element/A.kt\" rel=\"nofollow noreferrer\">https://github.com/persephone-unframework/dsl/blob/master/src/main/kotlin/io/persephone/dsl/element/A.kt</a></p>\n\n<pre><code>@DslMarker\nannotation class AMarker\n\n@AMarker\nclass A(\n    href: String? = null,\n    ...\n    init: (A.() -&gt; Unit)? = null\n) : Tag(\n    tagName = \"a\",\n    selfClosing = false\n) {\n\n    fun div(\n        classes: String? = null,\n        init: (DIV.() -&gt; Unit)? = null\n    ) = DIV().let {\n\n        this.children.add(it)\n\n        ....\n\n        init?.invoke(it)\n        it\n    }\n\n    ....\n}\n</code></pre>\n\n<p>Any idea why the <code>@DslMarker</code> annotation is not limiting the scope in this scenario and how i can fix it?</p>\n"}, {"tags": ["java", "kotlin", "lambda", "interface"], "comments": [{"owner": {"reputation": 15235, "user_id": 505152, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c988366574e6e5f4fa0b3e01faa90a86?s=128&d=identicon&r=PG", "display_name": "htafoya", "link": "https://stackoverflow.com/users/505152/htafoya"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577737001, "post_id": 59536168, "comment_id": 105242329, "body": "Oh thank, you @jsamol, i didn&#39;t know it was only for Java interfaces. Do you want to post that as an answer so I can choose it as such?"}], "answers": [{"tags": [], "owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "is_accepted": true, "score": 5, "last_activity_date": 1602657014, "last_edit_date": 1602657014, "creation_date": 1577737413, "answer_id": 59536451, "question_id": 59536168, "link": "https://stackoverflow.com/questions/59536168/kotlin-interfaces-as-trailing-lambdas/59536451#59536451", "title": "Kotlin - Interfaces as Trailing Lambdas", "body": "<h2>Edit:</h2>\n<p>It is now possible with Kotlin 1.4.</p>\n<p>Note, however, that SAM conversions still won't work with standard interfaces, you have to explicitly declare your interface as a <a href=\"https://kotlinlang.org/docs/reference/fun-interfaces.html\" rel=\"nofollow noreferrer\">functional interface</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun interface ToolbarFragmentCallBack {\n    fun onNavigationClick()\n}\n\naddToolBar(R.id.toolbar_fragment, toolbarTitle, toolbarParent) {\n    presenter.onClickNavigationToolBar()\n}\n</code></pre>\n<hr />\n<h2>Old Answer:</h2>\n<p>For now Kotlin supports SAM conversions for Java interfaces only\n(see <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">docs</a>):</p>\n<blockquote>\n<p>Also note that this feature works only for Java interop; since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.</p>\n</blockquote>\n<p>However, that is about to change with the new version 1.4 (see <a href=\"https://blog.jetbrains.com/kotlin/2019/12/what-to-expect-in-kotlin-1-4-and-beyond/\" rel=\"nofollow noreferrer\">What to Expect in Kotlin 1.4</a>):</p>\n<blockquote>\n<p>The community has requested us to introduce support for SAM conversions for Kotlin classes. [...] SAM conversions currently only work for Java interfaces and abstract classes. The initial idea behind this design was to use function types explicitly for such use-cases. It turned out, however, that function types and typealiases don\u2019t cover all the use-cases, and people often had to keep an interface in Java only to get a SAM-conversion for it.</p>\n</blockquote>\n"}], "owner": {"reputation": 15235, "user_id": 505152, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c988366574e6e5f4fa0b3e01faa90a86?s=128&d=identicon&r=PG", "display_name": "htafoya", "link": "https://stackoverflow.com/users/505152/htafoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 59536451, "answer_count": 1, "score": 1, "last_activity_date": 1602657014, "creation_date": 1577735598, "question_id": 59536168, "link": "https://stackoverflow.com/questions/59536168/kotlin-interfaces-as-trailing-lambdas", "title": "Kotlin - Interfaces as Trailing Lambdas", "body": "<p>Which are the rules that make an Interface capable of being used as <em>trailing lambda</em> argument?</p>\n\n<p>I though that the only rule was for it to be having a unique function on its definition, however I got myself into the following problem:</p>\n\n<p>I had this <strong>Java</strong> interface </p>\n\n<pre><code>public interface ToolbarFragmentCallBack {\n    void onNavigationClick();\n}\n</code></pre>\n\n<p>Called from a java class:</p>\n\n<pre><code>public void addToolBar(int container, String title, boolean isParent,\n                       ToolbarFragment.ToolbarFragmentCallBack callback) {\n      //do something\n}\n</code></pre>\n\n<p>Which was called from both Kotlin and Java files:</p>\n\n<p><strong>Kotlin (1):</strong></p>\n\n<pre><code>addToolBar(R.id.toolbar_fragment, toolbarTitle, toolbarParent) {\n            presenter.onClickNavigationToolBar()\n}\n</code></pre>\n\n<p><strong>Java (2):</strong></p>\n\n<pre><code>addToolBar(R.id.toolbar_fragment, definition.getTitle(), false, () -&gt; {\n            activity.onBackPressed();\n        });\n</code></pre>\n\n<p>However, I recently migrated the interface to Kotlin:</p>\n\n<pre><code>interface ToolbarFragmentCallBack {\n    fun onNavigationClick()\n}\n</code></pre>\n\n<p>And now the **Kotlin (1) ** implementation calls don't compile, with message </p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is () -> Unit but\n  ToolbarFragment.ToolbarFragmentCallBack! was expected</p>\n</blockquote>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "edited": false, "score": 0, "creation_date": 1577882107, "post_id": 59549364, "comment_id": 105273568, "body": "My <code>@Service</code> annotation does exactly what the <code>@Bean</code> annotation does in your code."}, {"owner": {"reputation": 3740, "user_id": 1246282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2c2f18588f9771a7db500e90a6eb44?s=128&d=identicon&r=PG", "display_name": "chrsblck", "link": "https://stackoverflow.com/users/1246282/chrsblck"}, "reply_to_user": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "edited": false, "score": 0, "creation_date": 1577920501, "post_id": 59549364, "comment_id": 105282054, "body": "@mikeb did you try it? It does work, while the <code>@Service</code> annotation does not."}, {"owner": {"reputation": 3740, "user_id": 1246282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2c2f18588f9771a7db500e90a6eb44?s=128&d=identicon&r=PG", "display_name": "chrsblck", "link": "https://stackoverflow.com/users/1246282/chrsblck"}, "reply_to_user": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "edited": false, "score": 0, "creation_date": 1577920626, "post_id": 59549364, "comment_id": 105282070, "body": "Another option is to <code>@Autowire</code> the implementation (<code>@Autowire lateinit var updatingProcessor UpdatingProcessor</code>), which probably isn&#39;t the best."}], "tags": [], "owner": {"reputation": 3740, "user_id": 1246282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e2c2f18588f9771a7db500e90a6eb44?s=128&d=identicon&r=PG", "display_name": "chrsblck", "link": "https://stackoverflow.com/users/1246282/chrsblck"}, "is_accepted": false, "score": 1, "last_activity_date": 1577839752, "creation_date": 1577839752, "answer_id": 59549364, "question_id": 59535916, "link": "https://stackoverflow.com/questions/59535916/spring-boot-kotlin-autowire-failure-for-generic-bean-with-listx/59549364#59549364", "title": "Spring Boot (Kotlin) Autowire failure for generic bean with List&lt;X&gt;", "body": "<p>This is related to this post -> <a href=\"https://stackoverflow.com/questions/48320519/spring-inject-list-of-generic-interface-implementations-in-kotlin\">spring-inject-list-of-generic-interface-implementations-in-kotlin</a></p>\n\n<p>You should be able to take the <strong>Action</strong> suggested by Spring:</p>\n\n<blockquote>\n  <p>Consider defining a bean of type 'org.springframework.batch.item.ItemProcessor' in your configuration.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>@Configuration\nclass UpdatingProcessorConfig {\n    @Autowired\n    lateinit var searchService: SearchService\n    @Autowired\n    lateinit var objectMapper: ObjectMapper\n\n    @Bean\n    fun updatingProcessor(): ItemProcessor&lt;SomeItem, List&lt;OtherObject&gt;&gt; = UpdatingProcessor(searchService, objectMapper)\n}\n\nclass UpdatingProcessor(val searchService: SearchService, val objectMapper: ObjectMapper) :\n        ItemProcessor&lt;SomeItem, List&lt;OtherObject&gt;&gt; {\n    override fun process(p0: SomeItem): List&lt;OtherObject&gt;? {\n        TODO(\"not implemented\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8853, "user_id": 1022260, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/27a141cb4a1a2f49d43bc09a5fa742b2?s=128&d=identicon&r=PG&f=1", "display_name": "mikeb", "link": "https://stackoverflow.com/users/1022260/mikeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577839752, "creation_date": 1577734007, "last_edit_date": 1577734402, "question_id": 59535916, "link": "https://stackoverflow.com/questions/59535916/spring-boot-kotlin-autowire-failure-for-generic-bean-with-listx", "title": "Spring Boot (Kotlin) Autowire failure for generic bean with List&lt;X&gt;", "body": "<p>I have this bean defined in a Batch application:</p>\n\n<pre><code>@Service(\"updating-processor\")\nclass UpdatingProcessor(val searchService: searchService, val objectMapper: ObjectMapper) : ItemProcessor&lt;SomeItem, List&lt;OtherObject&gt;&gt;\n</code></pre>\n\n<p>I know that the above bean gets created in the app, I put a breakpoint in the init method and it stops when I debug the app.</p>\n\n<p>I have this class:</p>\n\n<pre><code>@SpringBootApplication\n@EnableBatchProcessing\n@EnableJpaRepositories\n@EnableRetry(proxyTargetClass=true)\nclass EtlApplication() : CommandLineRunner {\n    companion object {\n        val LOG = LoggerFactory.getLogger(EtlApplication::class.java.name)\n    }\n\n    @Autowired\n    @Qualifier(\"updating-processor\")\n    lateinit var updatingProcessor: ItemProcessor&lt;SomeItem, List&lt;OtherObject&gt;&gt;\n}\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <hr>\n    \n    <p>APPLICATION FAILED TO START</p>\n    \n    <hr>\n    \n    <p>Description:</p>\n    \n    <p>Field updatingProcessor in ... required a bean of type >> 'org.springframework.batch.item.ItemProcessor' that could not be found.</p>\n    \n    <p>Action:</p>\n    \n    <p>Consider defining a bean of type 'org.springframework.batch.item.ItemProcessor' in your configuration.</p>\n  </blockquote>\n</blockquote>\n\n<p>I get an error saying that the \"updating-processor\" cannot be autowired, and it's due to the <code>List&lt;OtherObject&gt;</code> as the second type.  If I change <code>List&lt;OtherObject&gt;</code> to just <code>OtherObject</code> for the second generic parameter, the autowiring works.</p>\n\n<p>How do I make it work with the list?</p>\n"}, {"tags": ["android-studio", "android-layout", "kotlin", "popupmenu"], "comments": [{"owner": {"reputation": 629, "user_id": 5110977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gY4kM.png?s=128&g=1", "display_name": "Markaos", "link": "https://stackoverflow.com/users/5110977/markaos"}, "edited": false, "score": 1, "creation_date": 1578313067, "post_id": 59535630, "comment_id": 105386965, "body": "On every call to showPopup(), you create a brand new PopupMenu isntance that will probably never be shown again (you don&#39;t store the object anywhere, so you definitely don&#39;t reuse it)"}, {"owner": {"reputation": 37, "user_id": 11877553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907fe9fc7c912901a14b3ac0398e373c?s=128&d=identicon&r=PG&f=1", "display_name": "Rokko", "link": "https://stackoverflow.com/users/11877553/rokko"}, "reply_to_user": {"reputation": 629, "user_id": 5110977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gY4kM.png?s=128&g=1", "display_name": "Markaos", "link": "https://stackoverflow.com/users/5110977/markaos"}, "edited": false, "score": 0, "creation_date": 1578422584, "post_id": 59535630, "comment_id": 105430735, "body": "Ok, i did, but still, when I restart the app, menu&#39;s added content is gone. Should I save somehow the state of the menu?"}, {"owner": {"reputation": 629, "user_id": 5110977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gY4kM.png?s=128&g=1", "display_name": "Markaos", "link": "https://stackoverflow.com/users/5110977/markaos"}, "edited": false, "score": 1, "creation_date": 1578645459, "post_id": 59535630, "comment_id": 105513669, "body": "Yes. Yes, you should"}], "owner": {"reputation": 37, "user_id": 11877553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/907fe9fc7c912901a14b3ac0398e373c?s=128&d=identicon&r=PG&f=1", "display_name": "Rokko", "link": "https://stackoverflow.com/users/11877553/rokko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1584644741, "creation_date": 1577732266, "last_edit_date": 1584644741, "question_id": 59535630, "link": "https://stackoverflow.com/questions/59535630/changing-popup-menus-content-programmatically", "title": "Changing popup menu&#39;s content programmatically", "body": "<p>I'm new to Android Studio.\nI've created a layout for popup menu and showing it after button click. In menu's items there's \"add item\" to add other items into popup menu, but when I simply do <code>popup.menu.add(\"Title\")</code> when \"add item\" clicked, it just changes current menu appearance, not menu's layout itself, so when I next time display it, it won't change.</p>\n\n<p>My code:</p>\n\n<pre><code>private fun showPopup(v: View) {\n    val popup = PopupMenu(myActivity, v)\n    val inflater: MenuInflater = popup.menuInflater\n    inflater.inflate(R.menu.group_menu, popup.menu)\n\n    popup.setOnMenuItemClickListener{ item: MenuItem? -&gt;\n\n        when (item!!.itemId) {\n            R.id.add_item -&gt; {\n                Toast.makeText(context, item.title, Toast.LENGTH_SHORT).show()\n                val dbHelper = DBHelper(myActivity)\n                popup.menu.add(\"Title\")\n            }\n        }\n\n        true\n    }\n\n    popup.show()\n}\n</code></pre>\n\n<p>XML:</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n&lt;item\nandroid:id=\"@+id/add_item\"\nandroid:title=\"+\" /&gt;&lt;/menu&gt;\n</code></pre>\n\n<p>So my question is, how can I add items to the popup menu after hitting \"add item\" to make them last there?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1577729322, "post_id": 59534981, "comment_id": 105239709, "body": "Are you talking about the infix <code>and</code> function? <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/and.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/and.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 2049, "user_id": 338784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6WQOS.jpg?s=128&g=1", "display_name": "Jihed Amine", "link": "https://stackoverflow.com/users/338784/jihed-amine"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1577739576, "post_id": 59534981, "comment_id": 105243204, "body": "@UnholySheep that&#39;s exactly it. You can put your comment as an answer so that I choose it as the expected answer"}], "answers": [{"tags": [], "owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "is_accepted": true, "score": 2, "last_activity_date": 1577740449, "creation_date": 1577740449, "answer_id": 59536907, "question_id": 59534981, "link": "https://stackoverflow.com/questions/59534981/can-i-use-non-shortcircuit-logical-operator-in-kotlin/59536907#59536907", "title": "Can I use non shortcircuit logical operator in kotlin?", "body": "<p>The \"operator\" you are looking for is the infix <code>and</code> function in Kotlin (reference page: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/and.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/and.html</a>)<br>\nTherefore your example should be</p>\n\n<pre><code>val myBoolean = false and true\n</code></pre>\n"}], "owner": {"reputation": 2049, "user_id": 338784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6WQOS.jpg?s=128&g=1", "display_name": "Jihed Amine", "link": "https://stackoverflow.com/users/338784/jihed-amine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59536907, "answer_count": 1, "score": 3, "last_activity_date": 1577740449, "creation_date": 1577729030, "question_id": 59534981, "link": "https://stackoverflow.com/questions/59534981/can-i-use-non-shortcircuit-logical-operator-in-kotlin", "title": "Can I use non shortcircuit logical operator in kotlin?", "body": "<pre><code>val myBoolean = false &amp; true\n</code></pre>\n\n<p>gives a compilation error in Kotlin (Unexpected tokens (use ';' to separate expressions on the same line))</p>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore", "timestamp"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577728315, "post_id": 59534784, "comment_id": 105239362, "body": "If all you have is a year and month, that&#39;s not very well suited for a Timestamp, which represents a very specific moment in time to nanosecond precision."}, {"owner": {"reputation": 431, "user_id": 4990669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/907119162678964/picture?type=large", "display_name": "Mohamed Farahat", "link": "https://stackoverflow.com/users/4990669/mohamed-farahat"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577743563, "post_id": 59534784, "comment_id": 105244549, "body": "ok , let me put you in the situation , we used goLang to set a list of products and each element has a timestamp field , i as android want to  update this firebase timestamp field so which data type should we use ! and what are other constrains that we need to turn date to firebase timestamp !"}], "answers": [{"tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 3, "last_activity_date": 1577792321, "creation_date": 1577792321, "answer_id": 59543643, "question_id": 59534784, "link": "https://stackoverflow.com/questions/59534784/convert-date-to-firetstore-timestamp/59543643#59543643", "title": "Convert date to firetstore TimeStamp", "body": "<p>First of all, Firestore timestamps are generated on the server and as Doug Stevenson mentioned in his comment, it can store time units as small as nanoseconds.</p>\n\n<p>However, if you want to convert a year and month to a Firestore <code>Timestamp</code> object, the day, hour, minutes, seconds and nanoseconds components will always be 0. This is happening because those components simply do not exist at all since you are only using the year and month. <code>0</code> is just the default value that it is used in this case.</p>\n\n<blockquote>\n  <p>I as android want to update this firebase timestamp field so which data type should we use</p>\n</blockquote>\n\n<p>As mentioned in the official documentation regarding Firestore <a href=\"https://firebase.google.com/docs/firestore/manage-data/data-types\" rel=\"nofollow noreferrer\">data types</a>, the most appropriate way of saving the time and date is as <code>Date</code>, as explained in my answer from the following post:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48474957/servertimestamp-is-allways-null-on-firebase-firestore/48475027\">ServerTimestamp is always null on Firebase Firestore</a></li>\n</ul>\n\n<p>Now if you want to convert a <code>Timestamp</code> object to a <code>Date</code> object, it means that you are narrowing the conversion (you lose the nanoseconds precision) while converting a <code>Date</code> object to a <code>Timestamp</code> object it means that you are widening the conversion. In this case, as also mentioned before, new precision is added and missing data is filled with zeros.</p>\n"}], "owner": {"reputation": 431, "user_id": 4990669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/907119162678964/picture?type=large", "display_name": "Mohamed Farahat", "link": "https://stackoverflow.com/users/4990669/mohamed-farahat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 59543643, "answer_count": 1, "score": 1, "last_activity_date": 1577792321, "creation_date": 1577727748, "question_id": 59534784, "link": "https://stackoverflow.com/questions/59534784/convert-date-to-firetstore-timestamp", "title": "Convert date to firetstore TimeStamp", "body": "<p>i want to convert date as a long seconds to Firestore timestamp </p>\n\n<pre><code>object TimeStampConverter {\n\nfun convertToTimeStamp(months: Int, year: Int): Date? {\n    val date = Calendar.getInstance()\n    date[Calendar.YEAR] = year // Set the year you want\n    date[Calendar.MONTH] = months\n    return date.time\n}}\n</code></pre>\n\n<p>i want to convert the date.time that returned from TimeStampConverter function to a Firestore Timestamp.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8423444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmdLz.jpg?s=128&g=1", "display_name": "Eliah B", "link": "https://stackoverflow.com/users/8423444/eliah-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1577728811, "creation_date": 1577728811, "answer_id": 59534957, "question_id": 59534778, "link": "https://stackoverflow.com/questions/59534778/why-cant-we-add-block-around-property-getter-field-in-kotlin/59534957#59534957", "title": "Why can&#39;t we add block around property getter field in kotlin", "body": "<p>The first thing to recognize in your second example is that <code>get()</code> is not of type <code>Int</code> (as you've declared in the first example) and is instead of type <code>() -&gt; Int</code>. </p>\n\n<p>It may be worth reviewing some of the docs on <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">higher order functions</a> along with <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">properties and fields</a> for good measure. </p>\n\n<p>A third correct example equivalent to your first would be: (just in case it's helpful)</p>\n\n<pre><code>class Time(time: Int){\n   var time: Int = time\n      get(): Int {\n          return if(field &gt; 127){\n            127\n          }else if(){\n            -128\n          }\n          else{\n            field\n          }\n        }\n}\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4846042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-thaNdBs2iOc/AAAAAAAAAAI/AAAAAAAAENQ/iO7nNZOLRSo/photo.jpg?sz=128", "display_name": "Syed Muhammad Arslan", "link": "https://stackoverflow.com/users/4846042/syed-muhammad-arslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 59534957, "answer_count": 1, "score": 0, "last_activity_date": 1577728811, "creation_date": 1577727710, "last_edit_date": 1577727824, "question_id": 59534778, "link": "https://stackoverflow.com/questions/59534778/why-cant-we-add-block-around-property-getter-field-in-kotlin", "title": "Why can&#39;t we add block around property getter field in kotlin", "body": "<p>I have written code below first example works but the second example throws an error \"inferred Unit expecting Int\"</p>\n\n<p><strong><em>First Example</em></strong></p>\n\n<pre><code>class Time(time: Int){\n   var time: Int = time\n     get()= if(field &gt; 127){\n            127\n          }else if(){\n           -128\n          }\n          else{\n            field\n          }\n}\n\n</code></pre>\n\n<hr>\n\n<p>Second Example</p>\n\n<hr>\n\n<pre><code>class Time(time: Int){\n   var time: Int = time\n      get()= {\n          if(field &gt; 127){\n            127\n          }else if(){\n            -128\n          }\n          else{\n            field\n          }\n        }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1793, "user_id": 7881446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL7Kt.png?s=128&g=1", "display_name": "Christilyn Arjona", "link": "https://stackoverflow.com/users/7881446/christilyn-arjona"}, "edited": false, "score": 0, "creation_date": 1577733729, "post_id": 59534195, "comment_id": 105241245, "body": "You should be adding a scroll listener with a scrollable view like <code>NestedScrollView</code> or <code>ScrollView</code>. Can you post your layout xml?"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 12616259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1228a809bf374ebcd3fe37e380ba7024?s=128&d=identicon&r=PG&f=1", "display_name": "aCas", "link": "https://stackoverflow.com/users/12616259/acas"}, "is_accepted": true, "score": 1, "last_activity_date": 1577737610, "creation_date": 1577737610, "answer_id": 59536485, "question_id": 59534195, "link": "https://stackoverflow.com/questions/59534195/android-kotlin-get-scrollbar-reached-top/59536485#59536485", "title": "Android Kotlin: Get ScrollBar reached Top", "body": "<p>After Chrisilyn's comment, I look my XML an recognized, the scrollable View is the Webview, so I changed the code like this and was able to solve the problem:</p>\n\n<pre><code>val view = findViewById(R.id.view) as WebView\nview.viewTreeObserver.addOnScrollChangedListener {\nvar position = view.scrollY\n</code></pre>\n\n<p>Thank you Christilyn!</p>\n"}], "owner": {"reputation": 33, "user_id": 12616259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1228a809bf374ebcd3fe37e380ba7024?s=128&d=identicon&r=PG&f=1", "display_name": "aCas", "link": "https://stackoverflow.com/users/12616259/acas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 59536485, "answer_count": 1, "score": 0, "last_activity_date": 1577737610, "creation_date": 1577724580, "last_edit_date": 1577736448, "question_id": 59534195, "link": "https://stackoverflow.com/questions/59534195/android-kotlin-get-scrollbar-reached-top", "title": "Android Kotlin: Get ScrollBar reached Top", "body": "<p>I try to get the information, that the user of my app has scrolled to the top of the site. Very Information I get here or via a search engine seems to be outdated (Java or deprecated functions)</p>\n\n<p>So, here it was I try until now:</p>\n\n<pre><code>    val layout = findViewById(R.id.layout) as LinearLayout\n    layout.viewTreeObserver.addOnScrollChangedListener {\n        val position = layout.scrollY\n        Toast.makeText(this, \"Scrolled \" + position.toString(), Toast.LENGTH_SHORT).show()\n    }\n</code></pre>\n\n<p>Unfortunately, the Toast is every time \"Scrolled 0\". \nWhat can I do, to get the information, if the user has scrolled to the top of the view?</p>\n\n<p>For Christilyn:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:keepScreenOn=\"true\"\nandroid:focusable=\"true\"\nandroid:focusableInTouchMode=\"true\"\nandroid:focusedByDefault=\"true\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\".MainActivity\"&gt;\n&lt;LinearLayout\nandroid:id=\"@+id/layout\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:orientation=\"vertical\"\napp:layout_constraintStart_toStartOf=\"parent\"\napp:layout_constraintTop_toTopOf=\"parent\"&gt;\n&lt;LinearLayout\nandroid:id=\"@+id/toolbar\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"48dp\"\nandroid:orientation=\"horizontal\"\nandroid:visibility=\"gone\"\nandroid:elevation=\"4dp\"&gt;\n&lt;EditText\nandroid:id=\"@+id/text\"\nandroid:autofillHints=\"url\"\nandroid:layout_width=\"fill_parent\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_weight=\"1\"\nandroid:ems=\"10\"\nandroid:inputType=\"textPersonName\"\nandroid:text=\"\" /&gt;\n&lt;Button\nandroid:id=\"@+id/button\"\nandroid:layout_width=\"120dp\"\nandroid:layout_height=\"wrap_content\"\nandroid:layout_weight=\"1\"\nandroid:text=\"Set\" /&gt;\n&lt;/LinearLayout&gt;\n&lt;WebView\nandroid:id=\"@+id/view\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"0dp\"\nandroid:layout_weight=\"0.8\"/&gt;\n&lt;/LinearLayout&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "kdoc"], "owner": {"reputation": 1062, "user_id": 5082913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2643625611a7dda0fe37cf1dc9513f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Shreck Ye", "link": "https://stackoverflow.com/users/5082913/shreck-ye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1577723957, "creation_date": 1577723957, "question_id": 59534063, "link": "https://stackoverflow.com/questions/59534063/how-to-add-top-level-kdoc-for-a-file", "title": "How to add top level KDoc for a file?", "body": "<p>Is there a way to add a piece of top level KDoc for a Kotlin file?</p>\n\n<p>Since Kotlin supports multiple variables, functions, classes, etc. in a single file, it makes sense to document the file as a whole. However, <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"noreferrer\">Documenting Kotlin Code - Kotlin Programming Language</a> seems not to have any instructions on this.</p>\n"}, {"tags": ["firebase", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577721637, "post_id": 59533546, "comment_id": 105236739, "body": "What exactly is the <code>cls</code> that you&#39;re passing to <code>convert()</code>, eventually going to <code>getValue()</code>? That&#39;s the problem."}, {"owner": {"reputation": 99, "user_id": 5791366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BoFYhNJh360/AAAAAAAAAAI/AAAAAAAACOQ/rCrDQuZjNSg/photo.jpg?sz=128", "display_name": "Sachidananda Sahu", "link": "https://stackoverflow.com/users/5791366/sachidananda-sahu"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577721877, "post_id": 59533546, "comment_id": 105236851, "body": "here T is my dataClass and im trying to convert dataSnapshot into T i.e dataClass"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577722150, "post_id": 59533546, "comment_id": 105236975, "body": "So, what is the actual class <code>cls</code> that you&#39;re passing? What specifically should this function return given an <code>cls</code> and snapshot at runtime? Please be specific.  What you have right now is too abstract.  You will want to edit the question to show the class that you&#39;re passing, the contents of the snapshot, and what you expect the function to return."}, {"owner": {"reputation": 99, "user_id": 5791366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BoFYhNJh360/AAAAAAAAAAI/AAAAAAAACOQ/rCrDQuZjNSg/photo.jpg?sz=128", "display_name": "Sachidananda Sahu", "link": "https://stackoverflow.com/users/5791366/sachidananda-sahu"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1577722464, "post_id": 59533546, "comment_id": 105237130, "body": "in this case my T is &#39;User.kt&#39;, if i directly use T i.e <code>val user = snapShot.getValue(T::class.java)</code> then i&#39;m getting following error: <code>cannot use &#39;T&#39; as reified type parameter. use a class instead</code>"}], "owner": {"reputation": 99, "user_id": 5791366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BoFYhNJh360/AAAAAAAAAAI/AAAAAAAACOQ/rCrDQuZjNSg/photo.jpg?sz=128", "display_name": "Sachidananda Sahu", "link": "https://stackoverflow.com/users/5791366/sachidananda-sahu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577721613, "creation_date": 1577721498, "last_edit_date": 1577721613, "question_id": 59533546, "link": "https://stackoverflow.com/questions/59533546/com-google-firebase-database-databaseexception-class-java-lang-class-has-generi", "title": "com.google.firebase.database.DatabaseException: Class java.lang.Class has generic type parameters, please use GenericTypeIndicator instead", "body": "<p>I am using firebase for my android app, and whenever I try to convert dataSnapshot to object I get the following error:</p>\n\n<pre><code>com.google.firebase.database.DatabaseException: Class java.lang.Class has generic type parameters, please use GenericTypeIndicator instead\n</code></pre>\n\n<p>Here is my class:</p>\n\n<pre><code>class DatabaseApi&lt;T&gt; {\n\n    suspend fun getData(path: String): DatabaseResult&lt;Class&lt;T&gt;?&gt; {\n        val databaseResult = DatabaseHelper().get(path)\n\n        return try {\n            convertDatabaseSnapshot(databaseResult.value)\n        } catch (e: Exception) {\n            DatabaseResult.failed(e.toString())\n        }\n    }\n\n    fun &lt;T&gt; convert(cls: Class&lt;T&gt;, snapShot: DataSnapshot): DatabaseResult&lt;T?&gt; {\n        return try {\n\n            val data = snapShot.getValue(cls)\n            DatabaseResult.success(data)\n        } catch (e: Exception) {\n            val message = e.message ?: \"\"\n            DatabaseResult.failed(message)\n        }\n    }\n\n    inline fun &lt;reified T&gt; convertDatabaseSnapshot(snapShot: DataSnapshot): DatabaseResult&lt;T?&gt; {\n        return convert(T::class.java, snapShot)\n    } \n}\n</code></pre>\n\n<p>And this is the code where I am getting the error:</p>\n\n<pre><code>val data = snapShot.getValue(cls)\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "firebase-realtime-database"], "comments": [{"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1577720225, "post_id": 59533250, "comment_id": 105236141, "body": "Could you use <code>mutableListOf&lt;String&gt;</code> instead? And what do you mean with &quot;doesn&#39;t work&quot;? Is not adding the data inside the list? Or what?"}, {"owner": {"reputation": 187, "user_id": 11341692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqC5X.jpg?s=128&g=1", "display_name": "Saba", "link": "https://stackoverflow.com/users/11341692/saba"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1577720340, "post_id": 59533250, "comment_id": 105236202, "body": "yes it doesnt do anything"}, {"owner": {"reputation": 187, "user_id": 11341692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqC5X.jpg?s=128&g=1", "display_name": "Saba", "link": "https://stackoverflow.com/users/11341692/saba"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1577720414, "post_id": 59533250, "comment_id": 105236227, "body": "mutableListOf doesnt work either"}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 11341692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqC5X.jpg?s=128&g=1", "display_name": "Saba", "link": "https://stackoverflow.com/users/11341692/saba"}, "edited": false, "score": 0, "creation_date": 1577720698, "post_id": 59533315, "comment_id": 105236337, "body": "&quot;none of the following functions can be called with the arguments supplied &quot; ArrayAdapter says"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 187, "user_id": 11341692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqC5X.jpg?s=128&g=1", "display_name": "Saba", "link": "https://stackoverflow.com/users/11341692/saba"}, "edited": false, "score": 0, "creation_date": 1577720966, "post_id": 59533315, "comment_id": 105236443, "body": "See the edit. You need to specify which <code>this</code> is to be passed to ArrayAdapter"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 1, "last_activity_date": 1577720942, "last_edit_date": 1577720942, "creation_date": 1577720471, "answer_id": 59533315, "question_id": 59533250, "link": "https://stackoverflow.com/questions/59533250/how-to-make-changes-in-outer-scope-when-overriding-ondatachange-function/59533315#59533315", "title": "How to make changes in outer scope when overriding onDataChange function", "body": "<p><code>addValueEventListener</code> is asynchronous and returns immediately.  <code>onDataChange</code> is called some time later with the results of the query, whenever it becomes available. Your code is incorrectly assuming the the results are immediately available.  What you should do instead is populate views in the callback, after the data is known the be available.</p>\n\n<pre><code>    db.addValueEventListener(object : ValueEventListener {\n        override fun onDataChange(p0: DataSnapshot) {\n            // DATA FIRST BECOMES AVAILABLE HERE\n            for (i in p0.children) {\n                val city: String = i.value.toString()\n                println(city)\n                cities.add(city)\n            }\n            // ONLY POPULATE THE LISTVIEW WHEN THE DATA IS READY\n            listView = findViewById(R.id.listview)\n            listView.adapter = ArrayAdapter&lt;String&gt;(this@ShowActivity, android.R.layout.simple_expandable_list_item_1, cities)\n        }\n    })\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 11341692, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqC5X.jpg?s=128&g=1", "display_name": "Saba", "link": "https://stackoverflow.com/users/11341692/saba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59533315, "answer_count": 1, "score": 1, "last_activity_date": 1577720942, "creation_date": 1577720160, "last_edit_date": 1577720603, "question_id": 59533250, "link": "https://stackoverflow.com/questions/59533250/how-to-make-changes-in-outer-scope-when-overriding-ondatachange-function", "title": "How to make changes in outer scope when overriding onDataChange function", "body": "<p>I am trying to get data from firebase, iterate it and add items to array. but i cant do it from onDataCreate function because its not working</p>\n\n<pre><code>package com.example.cities\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.ArrayAdapter\nimport android.widget.ListView\nimport com.google.firebase.database.*\nimport kotlinx.android.synthetic.main.activity_show.*\n\nclass ShowActivity : AppCompatActivity() {\n\n    private lateinit var db: DatabaseReference\n    lateinit var listView: ListView\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_show)\n\n\n        val cities = arrayListOf&lt;String&gt;(\"Test1\")\n        db = FirebaseDatabase.getInstance().getReference(\"Cities\")\n\n        db.addValueEventListener(object : ValueEventListener {\n            override fun onCancelled(p0: DatabaseError) {\n                TODO(\"not implemented\")\n            }\n\n            override fun onDataChange(p0: DataSnapshot) {\n                    for (i in p0.children) {\n                        val city: String = i.value.toString()\n                        cities.add(city)\n                        println(city)\n                    }\n            }\n        })\n        cities.add(\"Test2\")\n        listView = findViewById(R.id.listview)\n        listView.adapter =\n            ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_expandable_list_item_1, cities)\n    }\n}\n</code></pre>\n\n<p>Test1 and Test2 are working fine but the main problem is that cities.add(city) doesnt work while println(city) does. as i see it cant make changes outside of scope so i need help to do that.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 46525, "user_id": 7294900, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Pdqi4.gif?s=128&g=1", "display_name": "user7294900", "link": "https://stackoverflow.com/users/7294900/user7294900"}, "edited": false, "score": 0, "creation_date": 1577718545, "post_id": 59532886, "comment_id": 105235380, "body": "I asked similar question <a href=\"https://stackoverflow.com/questions/59158369/how-can-i-open-class-only-to-test-class\" title=\"how can i open class only to test class\">stackoverflow.com/questions/59158369/&hellip;</a>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577736075, "post_id": 59532886, "comment_id": 105242014, "body": "I will just note that no major &quot;better Java&quot; language took its package visibility: C# has internal like Kotlin (earlier, of course), Scala has nested packages. And even Java 10 effectively changes the meaning of package visibility, if you use modules. Just like checked exceptions (but implementing either Scala&#39;s or Kotlin&#39;s visibility on JVM takes a lot more effort)."}], "owner": {"reputation": 63, "user_id": 10665858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31a92383da69892fb84bb6c89aad2bbc?s=128&d=identicon&r=PG&f=1", "display_name": "Antony", "link": "https://stackoverflow.com/users/10665858/antony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577718346, "creation_date": 1577718346, "question_id": 59532886, "link": "https://stackoverflow.com/questions/59532886/why-kotlin-use-internal-instead-of-package", "title": "Why Kotlin use internal instead of package?", "body": "<p>I know Java, but new to Kotlin. If anything wrong, please correct me, thanks.</p>\n\n<p>Kotlin use internal, but no package scope. As a programmer, I think package is easier to manage and easier to understand. I think there is some reason Kotlin choose internal instead of package. Could anyone tell me why?</p>\n\n<p>Thank you. </p>\n"}, {"tags": ["spring-boot", "kotlin", "spring-webflux", "kotlin-coroutines", "spring-data-r2dbc"], "owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1577714814, "creation_date": 1577714814, "question_id": 59532164, "link": "https://stackoverflow.com/questions/59532164/should-i-use-flow-as-a-return-type-in-controller-based-spring-webflux-service", "title": "Should I use Flow as a return type in controller-based Spring Webflux service", "body": "<p>I am trying to make use of Kotlin <code>coroutines</code> along with <code>spring-data-r2dbc</code>(<code>databaseClient</code>) in our next Spring Boot service.\nI'm already familiar with both concepts but as we dug deeper into the details of implementation I started to ask myself this question.</p>\n\n<p>In most examples I saw, every endpoint that returned some sort of collections, will return Flow instead when migrating to reactive approach.</p>\n\n<p>While there was no other(non-blocking) way to do it with <code>Mono</code>/<code>Flux</code>, since we wanted to hand over the subscription to the engine(<code>Webflux</code>), the situation is very different with Kotlin <code>Flows</code>. Flow's terminal operations are suspending, which makes them intrinsically non-blocking.\nThat means <strong>I can terminate a Flow in a non-blocking way right when and where I get it</strong>, and proceed with a regular <code>List</code>, for example.</p>\n\n<p>Of course, there can be more complex scenarios with underlying hot publishers, reactive transports/protocols, etc., but in my case it's a very conventional service. The only reason we decided to use reactive approach is because it's IO-bound: for every API call, we will need to fetch data from multiple other services over HTTP/REST, then execute some database queries and then return the combined result.\nSo, the question is: does it make any sense to spatter Flow in multiple application layers(Controller, Service, Repository) if I can just reduce it to a regular <code>List</code> on the spot, say, in Repository:</p>\n\n<pre><code>    suspend fun findByEvent(id: String): List&lt;MyEntity&gt; =\n        databaseClient.execute(MY_QUERY)....all().asFlow().toList()\n</code></pre>\n\n<p>so that the rest of my application layers won't even know anything about <code>Flow</code>(the entire chain of calls will remain suspendable anyway)?</p>\n"}, {"tags": ["android", "kotlin", "android-viewpager", "android-viewpager2"], "comments": [{"owner": {"reputation": 146, "user_id": 12569186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncjxk.jpg?s=128&g=1", "display_name": "adi purnama", "link": "https://stackoverflow.com/users/12569186/adi-purnama"}, "edited": false, "score": 0, "creation_date": 1577710577, "post_id": 59531127, "comment_id": 105231925, "body": "please try change at when <code>position &lt;= 1</code> to <code>position &lt;= 10</code> or higher"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "reply_to_user": {"reputation": 146, "user_id": 12569186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ncjxk.jpg?s=128&g=1", "display_name": "adi purnama", "link": "https://stackoverflow.com/users/12569186/adi-purnama"}, "edited": false, "score": 0, "creation_date": 1577710763, "post_id": 59531127, "comment_id": 105232012, "body": "nothin happens."}, {"owner": {"reputation": 519, "user_id": 10608556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WhONPBsQaIA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBpEXiYJIpazIjVSORBU373SYOMuQ/mo/photo.jpg?sz=128", "display_name": "alireza daryani", "link": "https://stackoverflow.com/users/10608556/alireza-daryani"}, "edited": false, "score": 0, "creation_date": 1577711426, "post_id": 59531127, "comment_id": 105232282, "body": "did you add some more seconds to your delay?"}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1577711466, "post_id": 59531127, "comment_id": 105232303, "body": "I have changed the delay seconds from the handler, but the handler only handles the viewpager, not the transition animation, the handler will just wait untill x seconds to change"}], "answers": [{"comments": [{"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1577715143, "post_id": 59531396, "comment_id": 105233972, "body": "Thanks for your answer, I think the transition animation should be delayed in the animation class instead of inside the handler"}, {"owner": {"reputation": 549, "user_id": 5627584, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/zXrut.jpg?s=128&g=1", "display_name": "Robert Ruxandrescu", "link": "https://stackoverflow.com/users/5627584/robert-ruxandrescu"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1577715386, "post_id": 59531396, "comment_id": 105234078, "body": "Have you tried to scroll back to an item that the ViewPager has already been through? The animation should work."}, {"owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1577715517, "post_id": 59531396, "comment_id": 105234124, "body": "the animation work from both sides, swiping back or through the viewpager, the thing is that is doing it really fast"}, {"owner": {"reputation": 549, "user_id": 5627584, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/zXrut.jpg?s=128&g=1", "display_name": "Robert Ruxandrescu", "link": "https://stackoverflow.com/users/5627584/robert-ruxandrescu"}, "reply_to_user": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "edited": false, "score": 0, "creation_date": 1577715611, "post_id": 59531396, "comment_id": 105234160, "body": "In my case, the animations would work if you swipe on the ViewPager, but it wouldn&#39;t work if you were to do it programmatically. However, once you scrolled through the items, the animations would work both if you slided on the ViewPager and if you were to press on the button that was hooked to programmatically swipe the ViewPager."}], "tags": [], "owner": {"reputation": 549, "user_id": 5627584, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/zXrut.jpg?s=128&g=1", "display_name": "Robert Ruxandrescu", "link": "https://stackoverflow.com/users/5627584/robert-ruxandrescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1577712718, "last_edit_date": 1577712718, "creation_date": 1577711225, "answer_id": 59531396, "question_id": 59531127, "link": "https://stackoverflow.com/questions/59531127/viewpager2-slider-transition-sliding-too-fast/59531396#59531396", "title": "ViewPager2 - Slider transition sliding too fast", "body": "<p>I have encountered a similar problem when working with ViewPager2. I had two items in my ViewPager, and put the switch to the next item as the action of a button. The first time you press it, the animation is instantaneous, like you describe. However, in my setup, if you press again on it, it scrolls back to the left. Once it does that, the animation works correctly (both left and right).</p>\n\n<p>From what I can tell from your code, in your case you continue to scroll in a single direction - hence you only observe the instantaneous scrolling. Try to play around with it and make it scroll back, instead of only forward. See if the animation appears correctly in that case.</p>\n\n<p>EDIT: If you find that the same behavior applies in your case as well, you can apply a completely inelegant hack:</p>\n\n<p>You can \"browse\" through your ViewPager's items when you're opening up your activity, as quickly as possible. Then, after going through each item, switch back to the first item and then just apply whatever logic you have now. If you do this, the items will already be \"loaded\" and the animations will work.</p>\n\n<p>Of course, while you're doing that in the \"background\", you can display a progress loader when you first get into the activity, and once you've scrolled back to the first item, display your activity. The user will think the activity is \"loading\", but in reality you will be going through each of your ViewPager's items, effectively \"pre-loading\" them.</p>\n\n<p>Completely ugly solution, but it should work. I hope someone can come up with a better one than this, as I don't exactly know the reason why the animation isn't playing correctly the first time.</p>\n"}], "owner": {"reputation": 2083, "user_id": 10870164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LiN2r.jpg?s=128&g=1", "display_name": "CoffeeBreak", "link": "https://stackoverflow.com/users/10870164/coffeebreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 59531396, "answer_count": 1, "score": 0, "last_activity_date": 1577712718, "creation_date": 1577710135, "question_id": 59531127, "link": "https://stackoverflow.com/questions/59531127/viewpager2-slider-transition-sliding-too-fast", "title": "ViewPager2 - Slider transition sliding too fast", "body": "<p>I have implemented from the documentation of <a href=\"https://developer.android.com/training/animation/screen-slide-2\" rel=\"nofollow noreferrer\">viewpager2</a> the follow animation</p>\n\n<pre><code>private const val MIN_SCALE = 0.85f\nprivate const val MIN_ALPHA = 0.5f\n\nclass ZoomOutPageTransformer : ViewPager2.PageTransformer {\n\n    override fun transformPage(view: View, position: Float) {\n        view.apply {\n            val pageWidth = width\n            val pageHeight = height\n            when {\n                position &lt; -1 -&gt; { // [-Infinity,-1)\n                    // This page is way off-screen to the left.\n                    alpha = 0f\n                }\n                position &lt;= 1 -&gt; { // [-1,1]\n                    // Modify the default slide transition to shrink the page as well\n                    val scaleFactor = Math.max(MIN_SCALE, 1 - Math.abs(position))\n                    val vertMargin = pageHeight * (1 - scaleFactor) / 2\n                    val horzMargin = pageWidth * (1 - scaleFactor) / 2\n                    translationX = if (position &lt; 0) {\n                        horzMargin - vertMargin / 2\n                    } else {\n                        horzMargin + vertMargin / 2\n                    }\n\n                    // Scale the page down (between MIN_SCALE and 1)\n                    scaleX = scaleFactor\n                    scaleY = scaleFactor\n\n                    // Fade the page relative to its size.\n                    alpha = (MIN_ALPHA +\n                            (((scaleFactor - MIN_SCALE) / (1 - MIN_SCALE)) * (1 - MIN_ALPHA)))\n                }\n                else -&gt; { // (1,+Infinity]\n                    // This page is way off-screen to the right.\n                    alpha = 0f\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Now, in my activity I wraped this animation with a Handler to automatically swipe, but is going really fast that I cant even notice when its sliding</p>\n\n<pre><code>private fun slideViewPager(){\n    var currentPage = 0\n    var timer: Timer? = null\n    val DELAY_MS: Long = 2000 //delay in milliseconds before task is to be executed\n    val PERIOD_MS: Long = 3000\n        val handler = Handler()\n        val update = Runnable {\n            if (currentPage == NUM_PAGES - 1) {\n                currentPage = 0\n            }\n            viewPager.setCurrentItem(currentPage++, true)\n        }\n\n        timer = Timer() // This will create a new Thread\n        timer!!.schedule(object : TimerTask() { // task to be scheduled\n            override fun run() {\n                handler.post(update)\n            }\n        }, DELAY_MS, PERIOD_MS)\n    }\n</code></pre>\n\n<p>I have adjusted the delay from the handler, but is not that the problem, because that just delays when its gonna change to the other page, but the transition during this change is really fast, how can I slow it down ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577706786, "post_id": 59530363, "comment_id": 105230335, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/56166712/arrayliststring-vs-arraylistofstring\">ArrayList&lt;String&gt;() vs arrayListOf&lt;String&gt;()</a>"}], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 13165893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVT3T.jpg?s=128&g=1", "display_name": "Branddd", "link": "https://stackoverflow.com/users/13165893/branddd"}, "edited": false, "score": 0, "creation_date": 1603880665, "post_id": 59530434, "comment_id": 114174064, "body": "Isnt ArrayList a collection of lists? While arrayListOf is a kind of list? <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections</a>"}, {"owner": {"reputation": 42, "user_id": 13165893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVT3T.jpg?s=128&g=1", "display_name": "Branddd", "link": "https://stackoverflow.com/users/13165893/branddd"}, "edited": false, "score": 0, "creation_date": 1603880695, "post_id": 59530434, "comment_id": 114174076, "body": "Thats what i understood in the documentary here :D"}], "tags": [], "owner": {"reputation": 2710, "user_id": 3737186, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/PYtA4.png?s=128&g=1", "display_name": "Sjoerd222888", "link": "https://stackoverflow.com/users/3737186/sjoerd222888"}, "is_accepted": false, "score": 0, "last_activity_date": 1577706936, "creation_date": 1577706936, "answer_id": 59530434, "question_id": 59530363, "link": "https://stackoverflow.com/questions/59530363/whats-the-difference-between-arraylistof-and-arraylist-in-kotlin/59530434#59530434", "title": "what&#39;s the difference between arrayListOf and ArrayList in kotlin?", "body": "<p>As described in the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/array-list-of.html\" rel=\"nofollow noreferrer\">documentation</a> <code>arrayListOf</code> is a function that creates an ArrayList instance. If I understand it correctly it serves the purpose of determining the generic type from the passed input values and it's a convenience function.</p>\n"}], "owner": {"reputation": 173, "user_id": 12568657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a7b94f1618b03ed23d2d9f029821a4?s=128&d=identicon&r=PG&f=1", "display_name": "jakchang", "link": "https://stackoverflow.com/users/12568657/jakchang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "closed_date": 1577707041, "answer_count": 1, "score": 0, "last_activity_date": 1577706936, "creation_date": 1577706632, "question_id": 59530363, "link": "https://stackoverflow.com/questions/59530363/whats-the-difference-between-arraylistof-and-arraylist-in-kotlin", "closed_reason": "Duplicate", "title": "what&#39;s the difference between arrayListOf and ArrayList in kotlin?", "body": "<p>I searched the difference between arrayListOf and ArrayList.\nso I understand arrayListOf is function, and ArrayList is class.\nbut I don't understand the exact difference using them.</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1577705525, "post_id": 59529959, "comment_id": 105229756, "body": "<code>runBlocking</code> spawns new coroutine scope to run suspending code from &quot;regular&quot; code block. What do you want to achieve by nesting them?"}, {"owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1577706021, "post_id": 59529959, "comment_id": 105229981, "body": "@Pawel I don&#39;t want to nest them. :) It&#39;s just, I witnessed it in some project (it&#39;s already fixed), and I&#39;m interested in learning what could have happened."}], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1577706901, "creation_date": 1577706901, "answer_id": 59530427, "question_id": 59529959, "link": "https://stackoverflow.com/questions/59529959/can-something-bad-happen-when-using-runblocking-from-a-coroutine/59530427#59530427", "title": "Can something bad happen when using runBlocking from a coroutine?", "body": "<blockquote>\n  <p>What can happen when done accidentally in a more complex setting? Crashes? Or maybe Deadlocks?</p>\n</blockquote>\n\n<p>No, nothing like that. In fact, <code>runBlocking</code> is specifically written to support nesting: </p>\n\n<blockquote>\n  <p>If the specified dispatcher is an event loop of another <code>runBlocking</code>, then this invocation uses the outer event loop.</p>\n</blockquote>\n\n<p>The concern you mention is not actually related to nesting <code>runBlocking</code> calls, but a general concern of calling any blocking code from a coroutine. We use coroutines with the specific purpose of avoiding to block the thread, so it's usually an error to call blocking functions inside them. You'll get the same warning for <code>Thread.sleep()</code>, <code>java.io</code> calls etc.</p>\n"}], "owner": {"reputation": 7542, "user_id": 1866775, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4K99R.jpg?s=128&g=1", "display_name": "Tobias Hermann", "link": "https://stackoverflow.com/users/1866775/tobias-hermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 3, "accepted_answer_id": 59530427, "answer_count": 1, "score": 5, "last_activity_date": 1577706901, "creation_date": 1577704794, "question_id": 59529959, "link": "https://stackoverflow.com/questions/59529959/can-something-bad-happen-when-using-runblocking-from-a-coroutine", "title": "Can something bad happen when using runBlocking from a coroutine?", "body": "<p>From <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/run-blocking.html\" rel=\"noreferrer\">the documentation of <code>runBlocking</code></a> is it clear why it does not make sense to use it from a coroutine, e.g., nest it.</p>\n\n<p>It even explicitly states:</p>\n\n<blockquote>\n  <p>This function should not be used from a coroutine.</p>\n</blockquote>\n\n<p>However, it is possible to do so:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    runBlocking {\n        runBlocking {\n            println(\"hi\")\n        }\n    }\n}\n</code></pre>\n\n<p>The (IntelliJ) IDE complains a bit</p>\n\n<p><img src=\"https://i.imgur.com/OCvdVKx.png\" alt=\"OCvdVKx\"></p>\n\n<p>but the code compiles and runs.</p>\n\n<p>What can happen when done accidentally in a more complex setting? Crashes? Or maybe Deadlocks?</p>\n"}, {"tags": ["android", "kotlin", "flutter", "dart", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "is_accepted": true, "score": 4, "last_activity_date": 1577704473, "creation_date": 1577704473, "answer_id": 59529886, "question_id": 59529885, "link": "https://stackoverflow.com/questions/59529885/how-can-i-embed-a-flutter-layout-in-my-android-app-using-flutterfragment-with-a/59529886#59529886", "title": "How can I embed a Flutter layout in my Android App using FlutterFragment with a custom entry point?", "body": "<p><strong>What went wrong?</strong></p>\n\n<p>As of the moment, if you are using <strong>AndroidX</strong>, the only way you can use <code>FlutterFragment</code> in embedding your Flutter layout is when it is added as an <strong>Android Archive (AAR)</strong> in your dependencies.</p>\n\n<p>I've previously opened an <a href=\"https://github.com/flutter/flutter/issues/36984\" rel=\"nofollow noreferrer\">issue</a> in Github regarding this concern, and it is still open at the time of writing.</p>\n\n<p>Adding Flutter as an AAR dependency has both pros and cons. With AAR, your team does not need to have Flutter SDK installed in their local machine nor required to install Dart SDK. However, since AAR files are compiled artifacts, your team may not be able to edit the project's Flutter source code during development.</p>\n\n<p><a href=\"https://flutter.dev/docs/development/add-to-app/android/project-setup\" rel=\"nofollow noreferrer\">Here's</a> the documentation on how you can setup your Android project with your Flutter source code added as an AAR module. </p>\n\n<blockquote>\n  <p>But why really use AAR?</p>\n</blockquote>\n\n<p>Under the hood, <code>FlutterFragment</code> and some (if not all) of the classes under \n<code>io.flutter.embedding</code> are still using the support libraries and not AndroidX, there is a <strong>mismatch in the dependencies</strong>. With AAR and with your <a href=\"https://developer.android.com/studio/command-line/jetifier\" rel=\"nofollow noreferrer\">jetifier</a> enabled during <strong>compilation</strong>, the AAR output of your Flutter will now use equivalent AndroidX libraries, something you don't expect to happen during <strong>runtime</strong> .</p>\n\n<blockquote>\n  <p>But, I need my team to work on some Flutter app features simultaneously with some Android app project changes.</p>\n</blockquote>\n\n<p>Well, since you can't use <code>FlutterFragment</code> in that particular type of setup, you can still use <code>FlutterView</code>, especially if you are only showing a portion of your Flutter layout in your Android app.</p>\n\n<p><strong>feature_fragment.kt</strong></p>\n\n<pre><code>portfolioEngine?.let { flutterEngine -&gt;\n    // Start executing Dart code to pre-warm the FlutterEngine.\n    // https://github.com/flutter/flutter/wiki/Experimental:-Launch-Flutter-with-non-main-entrypoint\n    flutterEngine.dartExecutor.executeDartEntrypoint(\n        DartExecutor.DartEntrypoint(\n            FlutterMain.findAppBundlePath(),\n            \"customEntryPoint\"\n        )\n    )\n\n    // Cache the FlutterEngine to be used by FlutterActivity.\n    FlutterEngineCache\n        .getInstance()\n        .put(\"SOME_FLUTTER_ENGINE_NAME\", flutterEngine)\n\n    // Add the Flutter layout\n    flutterView = FlutterView(context)\n    flutterView.attachToFlutterEngine(flutterEngine)\n    flutterContainerView?.removeAllViews() // Only if deemed necessary\n    flutterContainerView?.addView(flutterView)\n}\n</code></pre>\n\n<p><strong>feature_layout.xml</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/flutterContainerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"300dp\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>But, there's a small catch...</strong></p>\n\n<p>One of the benefits using <code>FlutterActivity</code> or <code>FlutterFragment</code> over <code>FlutterView</code> is the ease of managing the lifecycle of your Android and Flutter code simultaneously. Don't worry, you can still handle how your Flutter code will behave by managing its lifecycle using the attached <code>FlutterEngine</code>.</p>\n\n<p><strong>Further reading</strong></p>\n\n<ul>\n<li><a href=\"https://api.flutter.dev/javadoc/io/flutter/embedding/engine/FlutterEngine.html#getLifecycleChannel\" rel=\"nofollow noreferrer\">https://api.flutter.dev/javadoc/io/flutter/embedding/engine/FlutterEngine.html#getLifecycleChannel</a></li>\n<li><a href=\"https://flutter.dev/docs/development/add-to-app/android/project-setup\" rel=\"nofollow noreferrer\">https://flutter.dev/docs/development/add-to-app/android/project-setup</a></li>\n</ul>\n"}], "owner": {"reputation": 1460, "user_id": 10942908, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jLlgs.png?s=128&g=1", "display_name": "Joshua de Guzman", "link": "https://stackoverflow.com/users/10942908/joshua-de-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 2, "accepted_answer_id": 59529886, "answer_count": 1, "score": 3, "last_activity_date": 1577704779, "creation_date": 1577704473, "last_edit_date": 1577704779, "question_id": 59529885, "link": "https://stackoverflow.com/questions/59529885/how-can-i-embed-a-flutter-layout-in-my-android-app-using-flutterfragment-with-a", "title": "How can I embed a Flutter layout in my Android App using FlutterFragment with a custom entry point?", "body": "<p>This feature I'm trying out in Flutter is called <strong>Add-to-App</strong>.</p>\n\n<p>I read the instructions included in their <a href=\"https://flutter.dev/docs/development/add-to-app\" rel=\"nofollow noreferrer\">documentation</a> on how I can add <code>FlutterFragment</code> as a section in my app.</p>\n\n<p>As seen in the document <a href=\"https://flutter.dev/docs/development/add-to-app/android/add-flutter-fragment?tab=add-fragment-kotlin-tab#add-a-flutterfragment-to-an-activity-with-a-new-flutterengine\" rel=\"nofollow noreferrer\">example</a>, I should be able to add my <code>newFlutterFragment</code> just like how I add normal <code>Fragment</code> classes in Android.</p>\n\n<pre><code>// Create and attach a FlutterFragment if one does not exist.\nif (flutterFragment == null) {\n  var newFlutterFragment = FlutterFragment.createDefault()\n  flutterFragment = newFlutterFragment\n  fragmentManager\n    .beginTransaction()\n    .add(\n      R.id.fragment_container,\n      newFlutterFragment,\n      TAG_FLUTTER_FRAGMENT\n    )\n    .commit()\n}\n</code></pre>\n\n<p>The examples we're pretty much straightforward, however, as per checking (Github and SO), it only works when you are warming up a <code>FlutterEngine</code> using the <strong><code>main</code></strong> or <strong>default entry point</strong>.</p>\n\n<p><img src=\"https://user-images.githubusercontent.com/20706361/61922524-602b1400-af93-11e9-939b-c12c79e8a5b6.png\" alt=\"image-1\"></p>\n\n<p>Unfortunately, whenever I try adding my own <code>FlutterFragment</code> using a <strong>custom entry point</strong>, it doesn't seem to accept the type of object I'm passing in the <code>.add(&lt;INVALID_TYPE&gt;,...,...)</code> method of the <code>FragmentTransaction</code>.</p>\n\n<p><img src=\"https://user-images.githubusercontent.com/20706361/61922585-99fc1a80-af93-11e9-9e7d-5f1df1b11185.png\" alt=\"image-1\"></p>\n\n<p>Is there by any chance that I could still use <code>FlutterFragment</code> as the container for the Flutter section view I have?</p>\n\n<p>Setup</p>\n\n<ul>\n<li>Android depend on Flutter module's source code (<strong>Option B</strong>)</li>\n<li>Android project with AndroidX</li>\n</ul>\n\n<p>Environment</p>\n\n<ul>\n<li>Flutter: v1.12.13+hotfix.5 (stable)</li>\n<li>Dart: v2.4.0</li>\n<li>OS: macOS Catalina v1.14.5</li>\n</ul>\n"}, {"tags": ["android", "android-fragments", "kotlin", "navigation-drawer"], "answers": [{"comments": [{"owner": {"reputation": 2475, "user_id": 5151608, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh4.googleusercontent.com/-oYW8BasOUmM/AAAAAAAAAAI/AAAAAAAAAM0/iz3B5oRB6Hs/photo.jpg?sz=128", "display_name": "noobEinstien", "link": "https://stackoverflow.com/users/5151608/noobeinstien"}, "edited": false, "score": 0, "creation_date": 1577705653, "post_id": 59529895, "comment_id": 105229806, "body": "how to label it?"}, {"owner": {"reputation": 2475, "user_id": 5151608, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh4.googleusercontent.com/-oYW8BasOUmM/AAAAAAAAAAI/AAAAAAAAAM0/iz3B5oRB6Hs/photo.jpg?sz=128", "display_name": "noobEinstien", "link": "https://stackoverflow.com/users/5151608/noobeinstien"}, "edited": false, "score": 0, "creation_date": 1577706928, "post_id": 59529895, "comment_id": 105230386, "body": "I have changed the ids, that part is working fine, but apart from included graphs I have other fragments and when clicking on it will not obey back stack policy"}], "tags": [], "owner": {"reputation": 21, "user_id": 3102765, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001190736206/picture?type=large", "display_name": "Sanket Shah", "link": "https://stackoverflow.com/users/3102765/sanket-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1577704500, "creation_date": 1577704500, "answer_id": 59529895, "question_id": 59529849, "link": "https://stackoverflow.com/questions/59529849/how-to-set-included-graph-as-startdestination-in-navigation-graph/59529895#59529895", "title": "How to set included graph as startDestination in Navigation Graph?", "body": "<p>You need to use same Ids of menu item with Graph XML Fragments. </p>\n\n<p>Rest things will be automanaged.</p>\n"}], "owner": {"reputation": 2475, "user_id": 5151608, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh4.googleusercontent.com/-oYW8BasOUmM/AAAAAAAAAAI/AAAAAAAAAM0/iz3B5oRB6Hs/photo.jpg?sz=128", "display_name": "noobEinstien", "link": "https://stackoverflow.com/users/5151608/noobeinstien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577704500, "creation_date": 1577704292, "question_id": 59529849, "link": "https://stackoverflow.com/questions/59529849/how-to-set-included-graph-as-startdestination-in-navigation-graph", "title": "How to set included graph as startDestination in Navigation Graph?", "body": "<p>I have multiple modules in my app and some of them are UI modules, The UI modules have one <code>NavigationGraph</code> and it is included inside the app.</p>\n\n<p>The app has both <code>BottomNavigationView</code> and <code>Toolbar</code>. So I am stuck with some transitions. I will share the code below and elaborate problem.</p>\n\n<p>This is my app navigation graph</p>\n\n<pre><code>&lt;navigation xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/mobile_navigation\"\n    app:startDestination=\"@+id/navigation_group\"&gt;\n\n    &lt;fragment\n        android:id=\"@+id/navigation_group\"\n        android:name=\"com.example.group.view.fragments.GroupHostFragment\"\n        android:label=\"@string/title_group\"\n        tools:layout=\"@layout/fragment_home\" /&gt;\n\n    &lt;fragment\n        android:id=\"@+id/navigation_scene\"\n        android:name=\"com.wisilica.scene.view.SceneHostFragment\"\n        android:label=\"@string/title_scene\"\n        tools:layout=\"@layout/fragment_dashboard\" /&gt;\n\n    ...\n\n&lt;/navigation&gt;\n\n</code></pre>\n\n<p>And each fragment is a host fragment in UI modules.</p>\n\n<p>My dashboard activity layout</p>\n\n<pre><code>\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;com.google.android.material.appbar.AppBarLayout\n        android:id=\"@+id/appbarLayout\"&gt;\n\n        &lt;com.google.android.material.appbar.MaterialToolbar\n            android:id=\"@+id/toolbar\" /&gt;\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottomNavView\"\n\n        .................\n\n        app:menu=\"@menu/bottom_nav_menu\" /&gt;\n\n    &lt;fragment\n        android:id=\"@+id/nav_host_fragment\"\n        android:name=\"androidx.navigation.fragment.NavHostFragment\"\n\n        .................\n\n        app:navGraph=\"@navigation/mobile_navigation\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n</code></pre>\n\n<p>DashboardActivity Code</p>\n\n<pre><code>        setupActionBarWithNavController(navController, appBarConfiguration)\n\n        toolbar.setupWithNavController(navController)\n        bottomNavView.setupWithNavController(navController)\n</code></pre>\n\n<p>When clicking <strong>bottom menu</strong> items it was working perfectly and navigate to different host fragments. But the problem was <strong>homeUp button</strong> only showing clicking second host fragment, not on first host fragment and its destinations.</p>\n\n<pre><code>   Dashboard Graph\n    |            |\n    v            v\nhostA     |   host B\n  |              |\n  V              V\ndest1 (dest2)    dest1(dest2)\n\n</code></pre>\n\n<p>Initially, we are on hostA(dest1 will show), but homeUp symbol will not show(OK) and click to dest2, homeUp symbol is not shown(Why)</p>\n\n<p>Clicked bottomview menu item and moved to hostB, homeUp symbol is shown(why), and clicked on the button<br>\nand moved to hostA.</p>\n\n<p>I have tried to include the navGraph for hostA and hostB, then it is not responding for BottomNavigationView</p>\n\n<p>Please help me to fix this problem?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["file", "kotlin", "copy"], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 4762282, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a87249e3029c3daae0d473b1dc712484?s=128&d=identicon&r=PG&f=1", "display_name": "Ircover", "link": "https://stackoverflow.com/users/4762282/ircover"}, "is_accepted": true, "score": 0, "last_activity_date": 1577705712, "creation_date": 1577705712, "answer_id": 59530173, "question_id": 59529618, "link": "https://stackoverflow.com/questions/59529618/expression-destination-of-type-file-cannot-be-invoked-as-a-function/59530173#59530173", "title": "Expression &#39;destination&#39; of type &#39;File&#39; cannot be invoked as a function", "body": "<p>When you are placing brackets after variable name (like you do in <code>destination(copiedFiles.toString())</code>), compiler thinks you are trying to invoke <code>destination</code> object like a function. In other words it tries to call <code>invoke</code> method (you can read about that <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">here</a>) that should exist in any object, that is called like a function. Obviously, <code>File</code> class doesn't have it.</p>\n\n<p>May be, you missed some method call? Something like <code>destination.</code><strong><code>clone</code></strong><code>(copiedFiles.toString())</code> (I don't know what method you really need here).</p>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59530173, "answer_count": 1, "score": 0, "last_activity_date": 1577705712, "creation_date": 1577703209, "last_edit_date": 1577704264, "question_id": 59529618, "link": "https://stackoverflow.com/questions/59529618/expression-destination-of-type-file-cannot-be-invoked-as-a-function", "title": "Expression &#39;destination&#39; of type &#39;File&#39; cannot be invoked as a function", "body": "<p>I am trying to builf a function, that copies all files from a certain directory to a new one, if their extension matched the extension I am passing to the function, and if they are not empty.</p>\n\n<p>I keep getting this error <code>Expression 'destination' of type 'File' cannot be invoked as a function. The function 'invoke()' is not found</code>.</p>\n\n<p>I am a bit confused as to how to approach this as <code>File</code> can be either a file or a directory correct? SO in my case, I pass a directory to that function, so how do I copy my desired files in to new files in THAT directory? I'm new to handling files.</p>\n\n<p>Here's my code so far (I'd like to just return the amount of files that were copied).</p>\n\n<pre><code>fun copyFiles(source: File, destination: File, fileExtension: String = \"\"): Int {\n\n    var copiedFiles =0;\n    if(!source.isDirectory() || !destination.isDirectory() return 0\n\n    source.walk().forEach {file-&gt;\n        if(file.length().toInt() == 0) return@forEach\n\n        if(fileExtension !=\"\" &amp;&amp;  file.extension !=  fileExtension) return@forEach\n\n        file.copyTo(destination(copiedFiles.toString()))\n        copiedFiles++\n    }\n\n\n    return copiedFiles\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "server", "backend"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577710108, "post_id": 59529489, "comment_id": 105231717, "body": "Discussions at <a href=\"https://discuss.kotlinlang.org/t/coroutine-scheduling/12644\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/coroutine-scheduling/12644</a>, <a href=\"https://discuss.kotlinlang.org/t/coroutines-with-time-scheduling/2942\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/coroutines-with-time-scheduling/294&zwnj;&#8203;2</a> and <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/1186\" rel=\"nofollow noreferrer\">github.com/Kotlin/kotlinx.coroutines/issues/1186</a> may be helpful for writing your own, but I don&#39;t know if there is a standard solution (even a third-party one)."}], "owner": {"reputation": 354, "user_id": 5925080, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25f7fd9f68a10a958ee7251d551d153b?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Anand", "link": "https://stackoverflow.com/users/5925080/aditya-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1577702643, "creation_date": 1577702643, "question_id": 59529489, "link": "https://stackoverflow.com/questions/59529489/can-kotlin-coroutines-be-an-alternative-for-javas-scheduledthreadpoolexecutor-f", "title": "Can Kotlin coroutines be an alternative for Java&#39;s ScheduledThreadPoolExecutor for scheduling long running background jobs?", "body": "<p>The traditional java approach involves getting a ScheduledThreadPoolExecutor by</p>\n\n<p><code>Executors.newScheduledThreadPool(1)</code></p>\n\n<p>And then running a bunch of <code>Runnable</code>s inside it using methods such as <code>scheduleAtFixedRate()</code>.</p>\n\n<p>However, this approach locks you into Java's threading model, which can be challenging in a Kotlin codebase where you're judiciously using Kotlin's <code>suspend</code> and made your long running jobs (e.g: Network/DB ops) in a coroutine-friendly way.</p>\n\n<p>You can always use <code>runBlocking{}</code> to forcefully run your suspend methods within the runnables to schedule them using <code>ScheduledThreadPoolExecutor</code>, but that hardly seems elegant. You're effectively going around the coroutine threading model and going back to Java's.</p>\n\n<p>So, is there a way to run long running background operations with Kotlin's coroutines? Something with an API similar to <code>scheduleAtFixedRate</code>-like methods (e.g: Run X() at 5 PM every day - a Kotlin friendly replacement of cron jobs essentially.)</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577707465, "last_edit_date": 1592644375, "creation_date": 1577707465, "answer_id": 59530545, "question_id": 59528808, "link": "https://stackoverflow.com/questions/59528808/flow-reducing-operations-expect-suspend-function/59530545#59530545", "title": "Flow reducing operations expect suspend function", "body": "<blockquote>\n<p>Why does operation have to be suspendable?</p>\n<p>Allowing suspension inside operation just opens a can of worms</p>\n</blockquote>\n<p>It seems that your question conflates &quot;must&quot; with &quot;may&quot;. The operation doesn't have to be suspendable, but Kotlin allows it to be. It is simply not opinionated and allows suspendable functions here just as anywhere else in the Flow API. If it didn't allow it, I'm sure there would be 100 times more users asking why, among all other operations, <code>reduce</code> was degraded to non-suspendable operations.</p>\n<p>Anyway, the &quot;can of worms&quot;, as you put it, doesn't seem as dangerous to me. All you're risking is performance, and you risk that in so many other ways, for example by writing blocking code instead of suspending code.</p>\n"}], "owner": {"reputation": 5021, "user_id": 4470135, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/oXA6y.jpg?s=128&g=1", "display_name": "yuranos", "link": "https://stackoverflow.com/users/4470135/yuranos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577707465, "creation_date": 1577699618, "question_id": 59528808, "link": "https://stackoverflow.com/questions/59528808/flow-reducing-operations-expect-suspend-function", "title": "Flow reducing operations expect suspend function", "body": "<p>I do not understand why Kotlin Flow reduce, fold functions have signature like:</p>\n\n<pre><code>public suspend fun &lt;S, T : S&gt; Flow&lt;T&gt;.reduce(operation: suspend (accumulator: S, value: T) -&gt; S): S\n\npublic suspend inline fun &lt;T, R&gt; Flow&lt;T&gt;.fold(\n    initial: R,\n    crossinline operation: suspend (acc: R, value: T) -&gt; R): R\n</code></pre>\n\n<p>Why does <code>operation</code> have to be suspendable? The flow itself is asynchronous, that is clear, but the reducing operation will most likely be very cheap. operation is supposed to be called only when the next value is emitted. Allowing suspension inside <code>operation</code> just opens a can of worms because both functions are supposed to accumulate values and not do something IO-heavy or long-running with them.</p>\n"}, {"tags": ["kotlin", "async-await", "kotlin-coroutines"], "answers": [{"comments": [{"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577709125, "post_id": 59530471, "comment_id": 105231281, "body": "I&#39;m not sure I follow - can you change your example to show how you wait for a coroutine or suspend function from a non-suspend function without using <code>runBlocking</code>?"}, {"owner": {"reputation": 204, "user_id": 12010124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561293881944b392b684bf9dc4096ca?s=128&d=identicon&r=PG&f=1", "display_name": "PhillauSofia", "link": "https://stackoverflow.com/users/12010124/phillausofia"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577714501, "post_id": 59530471, "comment_id": 105233690, "body": "I&#39;ve added an example that you can run on yourself. Hope it helps more."}, {"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 1, "creation_date": 1577734675, "post_id": 59530471, "comment_id": 105241555, "body": "I don&#39;t think you fully understood my question. I need the blocking / non-suspend code to block and wait for the coroutine to finish, and get its result. If I understand correctly, what you&#39;ve done here is demonstrate how you can launch a coroutine from non-suspend code in a &quot;fire and forget&quot; fashion..."}], "tags": [], "owner": {"reputation": 204, "user_id": 12010124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561293881944b392b684bf9dc4096ca?s=128&d=identicon&r=PG&f=1", "display_name": "PhillauSofia", "link": "https://stackoverflow.com/users/12010124/phillausofia"}, "is_accepted": false, "score": 0, "last_activity_date": 1577714463, "last_edit_date": 1577714463, "creation_date": 1577707130, "answer_id": 59530471, "question_id": 59528802, "link": "https://stackoverflow.com/questions/59528802/kotlin-how-to-wait-for-a-coroutine-from-non-suspend-without-runblocking/59530471#59530471", "title": "Kotlin: How to wait for a coroutine from non-suspend without runBlocking?", "body": "<p>You can create your own scope with dispatchers that do operations in the background. You can use withContext if you want to wait for something to completely finish executing.</p>\n\n<pre><code>private val myScope = CoroutineScope(Dispatchers.Main) \n\nmyScope.launch {\n\n   withContext(Dispatchers.IO) {\n        //to stuff in the background\n    }\n\n}\n\n</code></pre>\n\n<p>You run the code bellow, you'll see that it prints 20, not null. </p>\n\n<pre><code>fun main() {\n    callSuspendFun()\n}\n\nsuspend fun doWorkAndReturnDouble(num: Int): Int {\n    delay(1000)\n    return num * 2\n}\n\nfun callSuspendFun() {\n    val coroutineScope = CoroutineScope(Dispatchers.Main)\n    coroutineScope.launch {\n        var num: Int? = null\n        withContext(Dispatchers.IO) {\n            val newNum = 10\n            num = doWorkAndReturnDouble(newNum)\n        }\n        println(num)\n    }\n}\n</code></pre>\n\n<p>So to call a suspend function from a non-suspend function, without using runBlocking, you have to create a coroutine scope. And withContext you wait for the execution of the code.</p>\n"}, {"comments": [{"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577907896, "post_id": 59552955, "comment_id": 105279643, "body": "Again - this means <code>waitFor()</code> is now a <code>suspend</code> method. <code>waitFor()</code> is called from a non-<code>suspend</code> method. How do I make that caller wait for <code>waitFor()</code>&#39;s result?"}], "tags": [], "owner": {"reputation": 675, "user_id": 5600256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dacf13e2ad0d8fd7217dca5b1ee9e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Sianaki", "link": "https://stackoverflow.com/users/5600256/mohammad-sianaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1577885481, "creation_date": 1577885481, "answer_id": 59552955, "question_id": 59528802, "link": "https://stackoverflow.com/questions/59528802/kotlin-how-to-wait-for-a-coroutine-from-non-suspend-without-runblocking/59552955#59552955", "title": "Kotlin: How to wait for a coroutine from non-suspend without runBlocking?", "body": "<p>You should use <code>coroutineScope</code></p>\n\n<pre><code>suspend fun waitFor(): String = coroutineScope {\n    proc.outputStream.close()\n\n    var output = \"\"\n    val outputRdr = async { output = proc.inputStream.bufferedReader().use { it.readText() } }\n    var error = \"\"\n    val errorRdr = async { error = proc.errorStream.bufferedReader().use { it.readText() } }\n\n    proc.waitFor()\n\n        outputRdr.await()\n        errorRdr.await()\n\n    if (proc.exitValue() != 0) {\n        throw RuntimeException(\"Command returned non-zero status: $output${error}\")\n    }\n\n    return output\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577908281, "post_id": 59553155, "comment_id": 105279726, "body": "This code does not compile. <code>waitFor()</code> now does not return anything. Furthermore the lines of <code>proc.outputStream.close()</code> and <code>proc.waitFor()</code> now generate a warning &quot;inappropriate blocking method call&quot;. Also the return statement is not accepted as the launch block is of type <code>CoroutineScope.() -&gt; Unit</code>."}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577930468, "post_id": 59553155, "comment_id": 105283510, "body": "I&#39;ve corrected errors. <code>proc.outputStream.close()</code> was giving warning of blocking call, so I put it outside and above coroutine scope. I&#39;ve handled return value error also"}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577931671, "post_id": 59553155, "comment_id": 105283707, "body": "If you want to get proper <code>output</code> returned from <code>waitFor()</code>, you need to make this function suspend. Currently, <code>output</code> value will not match with correct value, as <code>return output</code> line is not waiting for launched coroutine&#39;s completion"}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577940886, "post_id": 59553155, "comment_id": 105285100, "body": "@AmirAbiri : I&#39;ve edited my code to handle that case also. Now, <code>output</code> with proper value would get returned. Plus, <code>waitFor()</code> is non-suspend function. Please run this code."}, {"owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577949085, "post_id": 59553155, "comment_id": 105287051, "body": "That doesn&#39;t work either - <code>waitFor()</code> simply returns <code>&quot;&quot;</code> immediately."}, {"owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "reply_to_user": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "edited": false, "score": 0, "creation_date": 1577949767, "post_id": 59553155, "comment_id": 105287274, "body": "Then there is some problem in writing value to <code>output</code>. Can you re-check it or debug it or log it?"}], "tags": [], "owner": {"reputation": 6630, "user_id": 1994950, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5f16e6eff1f8a47146a95c3234218946?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/1994950/kushal"}, "is_accepted": false, "score": 0, "last_activity_date": 1577940814, "last_edit_date": 1577940814, "creation_date": 1577887263, "answer_id": 59553155, "question_id": 59528802, "link": "https://stackoverflow.com/questions/59528802/kotlin-how-to-wait-for-a-coroutine-from-non-suspend-without-runblocking/59553155#59553155", "title": "Kotlin: How to wait for a coroutine from non-suspend without runBlocking?", "body": "<p>You can use <code>CoroutineScope()</code> with <code>Dispathers.IO</code> which will launch a coroutine in background thread and would offload your execution on that thread</p>\n\n<pre><code>class RunningCommand(private val proc: Process) {\n\nfun waitFor(): String {\n    // Starting a new coroutine on Background thread (IO)\n    proc.outputStream.close()\n    var output = \"\"\n    CoroutineScope(Dispatchers.Unconfined).async {\n\n        val outputRdr = async { output = proc.inputStream.bufferedReader().use { it.readText() } }\n        var error = \"\"\n        val errorRdr = async { error = proc.errorStream.bufferedReader().use { it.readText() } }\n\n        proc.waitFor()\n\n        // No need of runBlocking \n        // await() call would wait for completion of its async block\n        outputRdr.await() // Execution would block until outputRdr block completion on IO thread\n        // At this stage, outputRdr block is completed\n        errorRdr.await() // Execution would block until errorRdr block completion on IO thread\n        // At this stage, errorRdr block is completed\n\n\n        if (proc.exitValue() != 0) {\n            throw RuntimeException(\"Command returned non-zero status: $output${error}\")\n        }\n    return@async output\n    }\n    return output\n}\n\n}\n</code></pre>\n\n<p>Note : If you're calling <code>waitFor()</code> method from any coroutine context, you can carry on work on same coroutine context by writing <code>coroutineScope { }</code> instead of <code>CoroutineScope(Dispatchers.IO).launch { }</code>, managing structured concurrency properly. </p>\n"}, {"comments": [{"owner": {"reputation": 3606, "user_id": 178274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8bcbf9deef69f1d6a2f658eefe4487c4?s=128&d=identicon&r=PG", "display_name": "denis.zhdanov", "link": "https://stackoverflow.com/users/178274/denis-zhdanov"}, "edited": false, "score": 0, "creation_date": 1613934910, "post_id": 59559779, "comment_id": 117223398, "body": "Please also note that your original example with two <code>async()</code> in the global scope suffers from a problem that the coroutines are unrelated - if one of them fails, another one might still be running as it&#39;s completely independent of everything and is bound only to the global scope"}], "tags": [], "owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "is_accepted": true, "score": 4, "last_activity_date": 1604617604, "last_edit_date": 1604617604, "creation_date": 1577950293, "answer_id": 59559779, "question_id": 59528802, "link": "https://stackoverflow.com/questions/59528802/kotlin-how-to-wait-for-a-coroutine-from-non-suspend-without-runblocking/59559779#59559779", "title": "Kotlin: How to wait for a coroutine from non-suspend without runBlocking?", "body": "<p>For any future travellers who make the same mistake as me - <code>runBlocking</code> is OK to use not just in <code>main</code> / tests - but also:</p>\n<blockquote>\n<p>It is designed to bridge regular blocking code to libraries that are written in suspending style</p>\n</blockquote>\n<p>Somehow I got the impression that it is evil to use for just some library function, but it is not.</p>\n"}], "owner": {"reputation": 7014, "user_id": 800334, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a070788360df4847afbf6797a1a5bcaf?s=128&d=identicon&r=PG", "display_name": "Amir Abiri", "link": "https://stackoverflow.com/users/800334/amir-abiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3680, "favorite_count": 0, "accepted_answer_id": 59559779, "answer_count": 4, "score": 3, "last_activity_date": 1604617604, "creation_date": 1577699573, "last_edit_date": 1577950150, "question_id": 59528802, "link": "https://stackoverflow.com/questions/59528802/kotlin-how-to-wait-for-a-coroutine-from-non-suspend-without-runblocking", "title": "Kotlin: How to wait for a coroutine from non-suspend without runBlocking?", "body": "<p><strong>Edit 2:</strong> I think I misunderstood the documentation. I read:</p>\n\n<blockquote>\n  <p><strong>runBlocking</strong></p>\n  \n  <p>This function should not be used from a coroutine. It is designed to bridge regular blocking code to libraries that are written in suspending style, to be used in <code>main</code> functions and in tests.</p>\n</blockquote>\n\n<p>To mean that I shouldn't use <code>runBlocking()</code> at all other than for <code>main</code> or tests. But I now realise I read it wrong, specifically this part:</p>\n\n<blockquote>\n  <p><strong>It is designed to bridge regular blocking code to libraries that are written in suspending style</strong></p>\n</blockquote>\n\n<p>So it seems that runBlocking <strong>should</strong> be used in this scenario.</p>\n\n<p>However I think I should fully grok the topic of contexts to see which contexts is best suited to pass to runBlocking in this case:</p>\n\n<pre><code>return runBlocking(???????) {\n    job1.await() + job2.await()\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> Clearly I phrased the question badly as all attempts to answer it miss the actual question and the constraint I am posing. So let's try a different approach...</p>\n\n<p>This works:</p>\n\n<pre><code>fun doSomething(): Int {\n    val job1 = GlobalScope.async { calculateSomething() }\n    val job2 = GlobalScope.async { calculateSomething() }\n    return runBlocking {\n        job1.await() + job2.await()\n    }\n}\n\nsuspend fun calculateSomething(): Int {\n    delay(1000L)\n    return 13\n}\n\nsuspend fun calculateSomethingElse(): Int {\n    delay(2000L)\n    return 19\n}\n</code></pre>\n\n<p>My question is: is there anyway I can achieve the same result:</p>\n\n<ol>\n<li><strong>Without</strong> using <code>runBlocking()</code> at all.</li>\n<li><strong>Without</strong> turning <code>doSomething()</code> into a <code>suspend</code> function.</li>\n</ol>\n\n<p>?</p>\n\n<p>In other words: is there anything I can put instead of <code>??????</code> to make the following work?</p>\n\n<pre><code>fun doSomething(): Int {\n    val job1 = GlobalScope.async { calculateSomething() }\n    val job2 = GlobalScope.async { calculateSomething() }\n    return ????????? {\n        job1.?????() + job2.?????()\n    }\n}\n\nsuspend fun calculateSomething(): Int {\n    delay(1000L)\n    return 13\n}\n\nsuspend fun calculateSomethingElse(): Int {\n    delay(2000L)\n    return 19\n}\n</code></pre>\n\n<hr>\n\n<p><strike>\nI have a small utility method that runs any given external command and returns its output (i.e small wrapper around Java Process API):</p>\n\n<pre><code>class RunningCommand(private val proc: Process) {\n\n    fun waitFor(): String {\n        proc.outputStream.close()\n\n        var output = \"\"\n        val outputRdr = thread { output = proc.inputStream.bufferedReader().use { it.readText() } }\n        var error = \"\"\n        val errorRdr = thread { error = proc.errorStream.bufferedReader().use { it.readText() } }\n\n        proc.waitFor()\n\n        outputRdr.join()\n        errorRdr.join()\n\n        if (proc.exitValue() != 0) {\n            throw RuntimeException(\"Command returned non-zero status: $output$error\")\n        }\n\n        return output\n    }\n}\n</code></pre>\n\n<p>This code works correctly. However it creates two additional threads for each command execution. I wanted to avoid that by switching to coroutines. I was able to do this, but I had to use <code>runBlocking</code>:</p>\n\n<pre><code>class RunningCommand(private val proc: Process) {\n\n    fun waitFor(): String {\n        proc.outputStream.close()\n\n        var output = \"\"\n        val outputRdr = GlobalScope.async { output = proc.inputStream.bufferedReader().use { it.readText() } }\n        var error = \"\"\n        val errorRdr = GlobalScope.async { error = proc.errorStream.bufferedReader().use { it.readText() } }\n\n        proc.waitFor()\n\n        runBlocking {\n            outputRdr.await()\n            errorRdr.await()\n        }\n\n        if (proc.exitValue() != 0) {\n            throw RuntimeException(\"Command returned non-zero status: $output${error}\")\n        }\n\n        return output\n    }\n}\n</code></pre>\n\n<p>This code also works, but I read that <code>runBlocking</code> should only be used on <code>main()</code> methods and tests, i.e not meant to be used in this way. Peeking at its implementation it looks horrible and indeed looks like something one wouldn't want to call repeatedly from some utility method.</p>\n\n<p><strong>So my question is:</strong> how else am I supposed to bridge the gap between blocking code and coroutines? Or put differently, what is the correct way to wait for a <code>suspend</code> function from non-<code>suspend</code> code?</p>\n\n<p>Or is it simply that my design is wrong, and to use Coroutines anywhere down the line I need to make the <code>main()</code> method <code>runBlocking</code> and essentially always be inside some coroutine scope?\n</strike></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 1, "creation_date": 1577697438, "post_id": 59528300, "comment_id": 105226606, "body": "Check your dialog style <code>R.style.AppCompatAlertDialogStyle</code>"}, {"owner": {"reputation": 51156, "user_id": 1318946, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/jUw99.jpg?s=128&g=1", "display_name": "Pratik Butani", "link": "https://stackoverflow.com/users/1318946/pratik-butani"}, "edited": false, "score": 0, "creation_date": 1577697552, "post_id": 59528300, "comment_id": 105226654, "body": "Please put screenshots of both version"}, {"owner": {"reputation": 378, "user_id": 4519936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cne3i.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4519936/mohsen"}, "reply_to_user": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577701672, "post_id": 59528300, "comment_id": 105228260, "body": "thank you @Md.Asaduzzaman, I have put AppCompatAlertDialogStyle in v21 style instead of style"}], "owner": {"reputation": 378, "user_id": 4519936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cne3i.jpg?s=128&g=1", "display_name": "mohsen", "link": "https://stackoverflow.com/users/4519936/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1577706320, "creation_date": 1577697393, "last_edit_date": 1577702118, "question_id": 59528300, "link": "https://stackoverflow.com/questions/59528300/prevent-alertdialog-be-full-screen", "title": "prevent AlertDialog be full screen?", "body": "<p>My alertDialog is ok in android 8.1.0 but in 4.4.4 is full screen</p>\n\n<pre><code>    val builder = AlertDialog.Builder(this, R.style.AppCompatAlertDialogStyle)\n    builder.setMessage(getString(R.string.sign_out_message))\n    builder.setNegativeButton(R.string.action_no) { _, _ -&gt; }\n    builder.setPositiveButton(R.string.sign_out) { _, _ -&gt;\n\n    }\n    val alertDialog = builder.create()\n    alertDialog?.requestWindowFeature(Window.FEATURE_NO_TITLE)\n    alertDialog.show()\n</code></pre>\n\n<p>My style</p>\n\n<pre><code>&lt;style name=\"AppCompatAlertDialogStyle\" parent=\"Theme.AppCompat.Light.Dialog.Alert\"&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorAccent&lt;/item&gt;\n    &lt;item name=\"android:textColorPrimary\"&gt;@color/textColorPrimary&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;@color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4041, "user_id": 2023697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mo57V.jpg?s=128&g=1", "display_name": "Liem Vo", "link": "https://stackoverflow.com/users/2023697/liem-vo"}, "is_accepted": true, "score": 2, "last_activity_date": 1577697119, "creation_date": 1577697119, "answer_id": 59528233, "question_id": 59528200, "link": "https://stackoverflow.com/questions/59528200/how-to-open-activity-from-adapter-in-kotlin/59528233#59528233", "title": "how to open activity from adapter in kotlin", "body": "<p>Just replace the error line with</p>\n\n<pre><code> context.startActivity(intent)\n</code></pre>\n"}], "owner": {"reputation": 382, "user_id": 11413968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36TZo.png?s=128&g=1", "display_name": "mili2501", "link": "https://stackoverflow.com/users/11413968/mili2501"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "closed_date": 1577698629, "accepted_answer_id": 59528233, "answer_count": 1, "score": 1, "last_activity_date": 1577697119, "creation_date": 1577696950, "question_id": 59528200, "link": "https://stackoverflow.com/questions/59528200/how-to-open-activity-from-adapter-in-kotlin", "closed_reason": "Duplicate", "title": "how to open activity from adapter in kotlin", "body": "<p>I am trying to open activity from adapter. It gives me error <strong>Type Mismatch: inferred type is Intent but context was expected</strong>. help me.\n<a href=\"https://i.stack.imgur.com/QH8pN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QH8pN.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 2667925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/305f7d3d31e1355c8d2a9bf41678ee1a?s=128&d=identicon&r=PG", "display_name": "h.kelidari", "link": "https://stackoverflow.com/users/2667925/h-kelidari"}, "edited": false, "score": 0, "creation_date": 1577705397, "post_id": 59529788, "comment_id": 105229705, "body": "i&#39;m using adapter from : <a href=\"https://stackoverflow.com/a/54190660/2667925\">stackoverflow.com/a/54190660/2667925</a>. my problem is such as <a href=\"https://stackoverflow.com/questions/54145519/moshi-adapter-to-skip-bad-objects-in-the-listt\" title=\"moshi adapter to skip bad objects in the listt\">stackoverflow.com/questions/54145519/&hellip;</a>. but when i&#39;m using this solution cause error!"}], "tags": [], "owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1577703999, "creation_date": 1577703999, "answer_id": 59529788, "question_id": 59528154, "link": "https://stackoverflow.com/questions/59528154/problem-by-moshi-custom-jsonadapter-for-skip-bad-elements/59529788#59529788", "title": "problem by moshi custom JsonAdapter for skip bad elements", "body": "<p>The skipping adapter doesn\u2019t know how much to skip. You want it to skip to the end of the current list element, bit the crash may have left the JsonReader partially through a complex object.</p>\n\n<p>Work around by passing <a href=\"https://square.github.io/moshi/1.x/moshi/com/squareup/moshi/JsonReader.html#peekJson--\" rel=\"nofollow noreferrer\">peekJson()</a> to the delegate adapter and <strong>always</strong> skipping regardless of whether there was an exception.or not.</p>\n"}], "owner": {"reputation": 780, "user_id": 2667925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/305f7d3d31e1355c8d2a9bf41678ee1a?s=128&d=identicon&r=PG", "display_name": "h.kelidari", "link": "https://stackoverflow.com/users/2667925/h-kelidari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577703999, "creation_date": 1577696725, "question_id": 59528154, "link": "https://stackoverflow.com/questions/59528154/problem-by-moshi-custom-jsonadapter-for-skip-bad-elements", "title": "problem by moshi custom JsonAdapter for skip bad elements", "body": "<p>i have a moshi custom json adapter for skip bad elements as follow:</p>\n\n<pre><code>class SkipBadElementsListAdapter(private val elementAdapter: JsonAdapter&lt;Any?&gt;) :\nJsonAdapter&lt;List&lt;Any?&gt;&gt;() {\nobject Factory : JsonAdapter.Factory {\n    override fun create(\n        type: Type,\n        annotations: Set&lt;Annotation&gt;,\n        moshi: Moshi\n    ): JsonAdapter&lt;*&gt;? {\n        if (annotations.isNotEmpty() || Types.getRawType(type) != List::class.java) {\n            return null\n        }\n        val elementType = Types.collectionElementType(type, List::class.java)\n        val elementAdapter = moshi.adapter&lt;Any?&gt;(elementType)\n        return SkipBadElementsListAdapter(elementAdapter).nullSafe()\n    }\n}\n\noverride fun fromJson(reader: JsonReader): List&lt;Any?&gt;? {\n\n    val result = mutableListOf&lt;Any?&gt;()\n    reader.beginArray()\n    while (reader.hasNext()) {\n        try {\n            val peeked = reader.peekJson()\n            result += elementAdapter.fromJson(peeked)\n        } catch (ignored: JsonDataException) {\n            Timber.tag(\"JsonParseError\").d(ignored.toString())\n        }\n        reader.skipValue()\n    }\n    reader.endArray()\n    return result\n\n}\n\noverride fun toJson(writer: JsonWriter, value: List&lt;Any?&gt;?) {\n\n    if (value == null) {\n        throw NullPointerException(\"value was null! Wrap in .nullSafe() to write nullable values.\")\n    }\n    writer.beginArray()\n    for (i in value.indices) {\n        elementAdapter.toJson(writer, value[i])\n    }\n    writer.endArray()\n}\n</code></pre>\n\n<p>}</p>\n\n<p>but after add this custom json adapter i receive a lot off fatal error in firebase:</p>\n\n<pre><code>Fatal Exception: java.lang.AssertionError\n   at com.squareup.moshi.JsonUtf8Reader.&lt;init&gt;(JsonUtf8Reader.java:118)\n   at com.squareup.moshi.JsonUtf8Reader.peekJson(JsonUtf8Reader.java:1076)\n   at ir.part.app.signal.core.util.api.SkipBadElementsListAdapter.fromJson(SkipBadElementsListAdapter.java:30)\n   at ir.part.app.signal.core.util.api.SkipBadElementsListAdapter.fromJson(SkipBadElementsListAdapter.java:7)\n   at com.squareup.moshi.JsonAdapter$2.fromJson(JsonAdapter.java:137)\n   at ir.part.app.signal.core.model.SignalListResponseJsonAdapter.fromJson(SignalListResponseJsonAdapter.java:41)\n   at ir.part.app.signal.core.model.SignalListResponseJsonAdapter.fromJson(SignalListResponseJsonAdapter.java:17)\n   at com.squareup.moshi.JsonAdapter$2.fromJson(JsonAdapter.java:137)\n   at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:45)\n   at retrofit2.converter.moshi.MoshiResponseBodyConverter.convert(MoshiResponseBodyConverter.java:27)\n   at retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:225)\n   at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:121)\n   at com.google.firebase.perf.network.zzh.onResponse(zzh.java:22)\n   at okhttp3.RealCall$AsyncCall.execute(RealCall.java:203)\n   at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)\n   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)\n   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)\n   at java.lang.Thread.run(Thread.java:776)\n</code></pre>\n\n<p>i look in moshi lib code and guess problem occur in \"sourcePeek.require\": </p>\n\n<pre><code>    JsonUtf8Reader(JsonUtf8Reader copyFrom) {\n    ...\n    // Make sure our buffer has as many bytes as the source's buffer. This is necessary because\n    // JsonUtf8Reader assumes any data it has peeked (like the peekedNumberLength) are buffered.\n    try {\n      sourcePeek.require(copyFrom.buffer.size());\n    } catch (IOException e) {\n      throw new AssertionError();\n    }\n}\n</code></pre>\n\n<p>what is wrong by my custom moshi adapter?! i want skip bad element from json receive from server in a list of data and show correct items.</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 911, "user_id": 11166067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444535f9bbe8ba11c596d7bb3f06c2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Leonov", "link": "https://stackoverflow.com/users/11166067/dmitrii-leonov"}, "edited": false, "score": 0, "creation_date": 1577699632, "post_id": 59528120, "comment_id": 105227421, "body": "I&#39;ve just tried your code and it works fine.  <code>Calling coroutine from thread: main</code> <code>Current thread: DefaultDispatcher-worker-1</code> <code>Running from thread: main</code>"}, {"owner": {"reputation": 3062, "user_id": 1218970, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e32857f0d648ad0f6c11fb041eb34e5d?s=128&d=identicon&r=PG", "display_name": "SMGhost", "link": "https://stackoverflow.com/users/1218970/smghost"}, "reply_to_user": {"reputation": 911, "user_id": 11166067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444535f9bbe8ba11c596d7bb3f06c2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii Leonov", "link": "https://stackoverflow.com/users/11166067/dmitrii-leonov"}, "edited": false, "score": 0, "creation_date": 1577704206, "post_id": 59528120, "comment_id": 105229262, "body": "I&#39;ve moved this to a different place, but still getting same problem. I&#39;ve tried switching  launch(Dispatchers.Main) to  launch(Dispatchers.Default) and it works, but that is not what I need."}], "answers": [{"tags": [], "owner": {"reputation": 3062, "user_id": 1218970, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e32857f0d648ad0f6c11fb041eb34e5d?s=128&d=identicon&r=PG", "display_name": "SMGhost", "link": "https://stackoverflow.com/users/1218970/smghost"}, "is_accepted": true, "score": 1, "last_activity_date": 1577882360, "creation_date": 1577882360, "answer_id": 59552598, "question_id": 59528120, "link": "https://stackoverflow.com/questions/59528120/kotlin-coroutines-not-running-launch-on-main/59552598#59552598", "title": "Kotlin coroutines not running launch on main", "body": "<p>Moving to a different machine I finally got some errors about Dispatchers.MAIN not working.</p>\n\n<p>In the end all I had to do was replace all raw coroutine dependencies with:</p>\n\n<pre><code>implementation(\"org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1\")\n</code></pre>\n"}], "owner": {"reputation": 3062, "user_id": 1218970, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e32857f0d648ad0f6c11fb041eb34e5d?s=128&d=identicon&r=PG", "display_name": "SMGhost", "link": "https://stackoverflow.com/users/1218970/smghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1234, "favorite_count": 0, "accepted_answer_id": 59552598, "answer_count": 1, "score": 1, "last_activity_date": 1577882360, "creation_date": 1577696500, "last_edit_date": 1592644375, "question_id": 59528120, "link": "https://stackoverflow.com/questions/59528120/kotlin-coroutines-not-running-launch-on-main", "title": "Kotlin coroutines not running launch on main", "body": "<p>I have following code:</p>\n<pre><code> Timber.d(&quot;Calling coroutine from thread: ${Thread.currentThread().name}&quot;)\n    scope.launch {\n        Timber.d(&quot;Current thread: ${Thread.currentThread().name}&quot;)\n        runTest()\n    }\n\n suspend fun runTest() {\n    coroutineScope {\n        launch(Dispatchers.Main) {\n            Timber.d(&quot;Running from thread: ${Thread.currentThread().name}&quot;)\n        }\n    }\n}\n</code></pre>\n<p>If I run it. App crashes with no error in log.\nIn my log I see:</p>\n<blockquote>\n<p>Calling coroutine from thread: main</p>\n<p>Current thread: DefaultDispatcher-worker-2</p>\n</blockquote>\n<p>But I don't see entry with <strong>Running from thread:</strong></p>\n<p>This is done in viewmodel\nMy scope looks like this:</p>\n<pre><code>val scope: ViewModelCoroutineScope = ViewModelCoroutineScope(Dispatchers.Default)\n\nclass ViewModelCoroutineScope(\n    context: CoroutineContext\n) : CoroutineScope {\n\n    private var onViewDetachJob = Job()\n    override val coroutineContext: CoroutineContext = context + onViewDetachJob\n\n    fun onCleared() {\n        onViewDetachJob.cancel()\n    }\n}\n</code></pre>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["kotlin", "reflection", "properties", "annotations"], "comments": [{"owner": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 2, "creation_date": 1577695173, "post_id": 59527696, "comment_id": 105225897, "body": "Do you have any specific reason for using VALUE_PARAMETER target?"}, {"owner": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "reply_to_user": {"reputation": 2240, "user_id": 4699509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYnk.jpg?s=128&g=1", "display_name": "Natig Babayev", "link": "https://stackoverflow.com/users/4699509/natig-babayev"}, "edited": false, "score": 0, "creation_date": 1577695497, "post_id": 59527696, "comment_id": 105226003, "body": "You&#39;re right. Without the target VALUE_PARAMETER the annotation appears in the annotations list. Why?"}], "answers": [{"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1577699127, "last_edit_date": 1592644375, "creation_date": 1577699127, "answer_id": 59528710, "question_id": 59527696, "link": "https://stackoverflow.com/questions/59527696/kotlin-read-property-annotation-via-reflection/59528710#59528710", "title": "Kotlin read property annotation via reflection", "body": "<p>As <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">documented</a></p>\n<blockquote>\n<p>If you don't specify a use-site target, the target is chosen according to the @Target annotation of the annotation being used. If there are multiple applicable targets, the first applicable target from the following list is used:</p>\n<ul>\n<li><p>param;</p>\n</li>\n<li><p>property;</p>\n</li>\n<li><p>field.</p>\n</li>\n</ul>\n</blockquote>\n<p>So in your case it's the parameter which is annotated, not the property. Depending on your requirements, you could work around it by checking both property and parameter annotations:</p>\n<pre><code>val param = MyClass::class.primaryConstructor.findParameterByName(prop.name)\nval annotations = prop.annotations + (param?.annotations ?: listOf())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "edited": false, "score": 0, "creation_date": 1577728813, "post_id": 59529003, "comment_id": 105239557, "body": "Does this help @Jayser ?"}, {"owner": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "edited": false, "score": 0, "creation_date": 1577782330, "post_id": 59529003, "comment_id": 105252649, "body": "I had to replaced javaField with javaClass but it didn&#39;t work."}, {"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "reply_to_user": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "edited": false, "score": 0, "creation_date": 1577782566, "post_id": 59529003, "comment_id": 105252714, "body": "@Jayser no you shouldn&#39;t use <code>javaClass</code>, but use <code>javaField</code> as specified in my answer. The code snippet that is part of my answer works fine. Please try that."}, {"owner": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "edited": false, "score": 0, "creation_date": 1577790619, "post_id": 59529003, "comment_id": 105255578, "body": "I use Kotlin 1.3.61 and I get an compile time error of &quot;Unresolved reference: javaField&quot;"}, {"owner": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "edited": false, "score": 0, "creation_date": 1577790976, "post_id": 59529003, "comment_id": 105255702, "body": "kotlin-reflect is also added to my maven dependencies. I don&#39;t why the javaField Property isn&#39;t available."}, {"owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "reply_to_user": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "edited": false, "score": 0, "creation_date": 1577800166, "post_id": 59529003, "comment_id": 105258772, "body": "@Jayser that might be an environment issue, as <code>javaField</code> is from kotlin-reflect itself. Can you try the solutions mentioned <a href=\"https://stackoverflow.com/questions/31712046/kotlin-unresolved-reference-in-intellij/53063096\">here</a>?"}], "tags": [], "owner": {"reputation": 8287, "user_id": 9840318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVUQR.jpg?s=128&g=1", "display_name": "Madhu Bhat", "link": "https://stackoverflow.com/users/9840318/madhu-bhat"}, "is_accepted": false, "score": 3, "last_activity_date": 1577700366, "last_edit_date": 1592644375, "creation_date": 1577700366, "answer_id": 59529003, "question_id": 59527696, "link": "https://stackoverflow.com/questions/59527696/kotlin-read-property-annotation-via-reflection/59529003#59529003", "title": "Kotlin read property annotation via reflection", "body": "<p>Instead of having the annotation target specified as <code>@Target(AnnotationTarget.PROPERTY, AnnotationTarget.VALUE_PARAMETER)</code>, you can specify it as <code>@Target(AnnotationTarget.FIELD)</code> and access it as below:</p>\n<pre><code>@Target(AnnotationTarget.FIELD)\nannotation class MyAnnotation\n\nclass MyClass(@MyAnnotation val attr: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val prop = MyClass::attr\n    println(&quot;Is MyAnnotation annotated - ${prop.javaField?.isAnnotationPresent(MyAnnotation::class.java)}&quot;)\n    prop.javaField?.annotations?.forEach { println(&quot;Annotation present is - ${it.annotationClass.qualifiedName}&quot;) }\n}\n</code></pre>\n<p>The output:</p>\n<blockquote>\n<p>Is MyAnnotation annotated - true</p>\n<p>Annotation present is - packageName.MyAnnotation</p>\n</blockquote>\n"}], "owner": {"reputation": 71, "user_id": 8421492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35292bd75fd328184ba1081b3a5a4252?s=128&d=identicon&r=PG&f=1", "display_name": "Jayser", "link": "https://stackoverflow.com/users/8421492/jayser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577700366, "creation_date": 1577694021, "question_id": 59527696, "link": "https://stackoverflow.com/questions/59527696/kotlin-read-property-annotation-via-reflection", "title": "Kotlin read property annotation via reflection", "body": "<p>I've created an annotation for properties and now I want to read it via reflection at runtime. In my opinion I'm doing everything right but there's no annotation.</p>\n\n<p>Why isn't the annotation not available?</p>\n\n<pre><code>@Retention(AnnotationRetention.RUNTIME)\n@Target(AnnotationTarget.PROPERTY, AnnotationTarget.VALUE_PARAMETER)\nannotation class MyAnnotation\n\nclass MyClass(@MyAnnotation val attr: List&lt;String&gt;)\n\nfun main(args: Array&lt;String&gt;) {\n    var prop = MyClass::attr\n    prop.annotations.forEach { println(\"prop.annotations -&gt; \" + it) }\n    prop.javaClass.getAnnotations().forEach { println(\"prop.javaClass.getAnnotations -&gt; \" + it) }\n    println(\"isAnnotationPresent -&gt; ${prop.javaClass.isAnnotationPresent(MyAnnotation::class.java)}\")\n}\n</code></pre>\n\n<p><strong>Output:</strong><br/>\n<em>prop.javaClass.getAnnotations -> @kotlin.Metadata(xi=0, bv=[1, 0, 3], mv=[1, 1, 16], k=3, xs=, d1=[], d2=[], pn=)\nisAnnotationPresent -> false</em></p>\n"}, {"tags": ["android", "kotlin", "android-view", "extension-methods", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1577699470, "post_id": 59527650, "comment_id": 105227343, "body": "It is <code>this</code> you use, not <code>this?</code>. E.g. you can&#39;t write <code>val view = this?</code>. <code>?</code> here is part of the <code>?.</code> safe call operator."}], "tags": [], "owner": {"reputation": 761, "user_id": 11818952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0j58.png?s=128&g=1", "display_name": "SowingFiber", "link": "https://stackoverflow.com/users/11818952/sowingfiber"}, "is_accepted": false, "score": 0, "last_activity_date": 1577693761, "creation_date": 1577693761, "answer_id": 59527650, "question_id": 59527568, "link": "https://stackoverflow.com/questions/59527568/how-to-create-a-view-extension-function-in-kotlin/59527650#59527650", "title": "How to create a View extension function in Kotlin", "body": "<p>Ok, So my issue was that I didn't know how to get reference to the calling View. i.e., I didn't know how to call <code>myView</code> and set its property inside the extension function <code>setNewWidth()</code></p>\n\n<p>So, I tried using <code>this?</code> and it worked.</p>\n\n<p>Then, I did a few changes to the extension function to work for <code>myView</code> which is a <code>Relative Layout</code>.</p>\n\n<p>This is what I worked out:</p>\n\n<pre><code>private fun RelativeLayout?.setWidth(i: Int) {\n    val layoutParams: ViewGroup.LayoutParams? = this?.layoutParams\n    layoutParams?.width = i\n    this?.layoutParams = layoutParams\n}\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13924, "user_id": 344487, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/121250664bfcadc67069fda58195234b?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/344487/fred"}, "is_accepted": true, "score": 3, "last_activity_date": 1577694020, "creation_date": 1577694020, "answer_id": 59527695, "question_id": 59527568, "link": "https://stackoverflow.com/questions/59527568/how-to-create-a-view-extension-function-in-kotlin/59527695#59527695", "title": "How to create a View extension function in Kotlin", "body": "<p>I think the main problem here is how the extension function is defined, in particular, the lines that have <code>View.layoutParams</code> - this is calling a static property on <code>View</code> that doesn't exist. You need to use the one from the instance. If you'd write the extension function like so:</p>\n\n<pre><code>private fun View?.setNewWidth(i: Int) {\n  val layoutParams = this?.layoutParams\n  layoutParams?.width = i\n  this?.layoutParams = layoutParams\n}\n</code></pre>\n\n<p>Then you can call the method like you want. Personally, I don't find this so readable and I'd remove the nullability here and write it as:</p>\n\n<pre><code>private fun View.setNewWidth(i: Int) {\n  val newLayoutParams = layoutParams\n  newLayoutParams?.width = i\n  layoutParams = newLayoutParams\n}\n</code></pre>\n\n<p>The only difference is that now you need <code>?.</code> to call the method if the view is nullable, which I personally find fine - <code>myView?.setNewWidth(123)</code>. I assume most of the time you won't have a nullable view.</p>\n"}], "owner": {"reputation": 761, "user_id": 11818952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q0j58.png?s=128&g=1", "display_name": "SowingFiber", "link": "https://stackoverflow.com/users/11818952/sowingfiber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 59527695, "answer_count": 2, "score": 0, "last_activity_date": 1577694020, "creation_date": 1577693320, "question_id": 59527568, "link": "https://stackoverflow.com/questions/59527568/how-to-create-a-view-extension-function-in-kotlin", "title": "How to create a View extension function in Kotlin", "body": "<p>I'm trying to create an extension function in Kotlin. I did try several tutorials, but didn't quite understand, how to implement this one.</p>\n\n<p>I'm trying to create a <code>setWidth()</code> function as such</p>\n\n<pre><code>//Find my_view in the fragment\nval myView = v.findViewById&lt;RelativeLayout&gt;(R.id.my_view)\n\n//Then use the extension function\nmyView.setNewWidth(500)\n\n</code></pre>\n\n<p>This is how I've defined my extension function</p>\n\n<pre><code>\nprivate fun View?.setNewWidth(i: Int) {\n    val layoutParams: ViewGroup.LayoutParams = View.layoutParams\n    layoutParams.width = i\n    View.layoutParams = layoutParams\n}\n\n</code></pre>\n\n<p>I don't understand what I need to do here.</p>\n\n<p>I want to call the extension function as <code>myView.ExtensionFunction()</code>, but I don't know how to do that. The tutorials, were un-informative.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1577692648, "post_id": 59527457, "comment_id": 105225167, "body": "There is already a <a href=\"https://stackoverflow.com/q/51007975/10182897\">issue</a> similar like that"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1577692571, "creation_date": 1577692571, "answer_id": 59527457, "question_id": 59527383, "link": "https://stackoverflow.com/questions/59527383/why-kotlin-when-syntax-couldnt-fetch-value/59527457#59527457", "title": "Why Kotlin when syntax couldn&#39;t fetch value?", "body": "<p>You're not showing code that actually accesses <code>uploadImgsPath</code>, so for all we know, you're simply accessing it before the <code>when</code> executes and assigns a value.</p>\n\n<p>However, not all of your code paths in the <code>when</code> assign a value to <code>uploadImgsPath</code>:</p>\n\n<pre><code>\"\" -&gt; {\n    categoryDesignID = \"\"\n    Toast.makeText(context,\"Please choose a category\",Toast.LENGTH_LONG).show()\n}\n</code></pre>\n\n<p>So that could also be a problem.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 9635680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1820023701351913/picture?type=large", "display_name": "Squall Huang", "link": "https://stackoverflow.com/users/9635680/squall-huang"}, "is_accepted": false, "score": 0, "last_activity_date": 1577702392, "creation_date": 1577702392, "answer_id": 59529418, "question_id": 59527383, "link": "https://stackoverflow.com/questions/59527383/why-kotlin-when-syntax-couldnt-fetch-value/59529418#59529418", "title": "Why Kotlin when syntax couldn&#39;t fetch value?", "body": "<p>Thank you all.\nI found reason later and have solved this problem already.\nAbove codes are totally right.\nThe issue is because I set firestore's document id to my model's field id,\nso when syntex can't match two different id let var uploadImgsPath couldn't fetch any value.</p>\n"}], "owner": {"reputation": 81, "user_id": 9635680, "user_type": "registered", "profile_image": "https://graph.facebook.com/1820023701351913/picture?type=large", "display_name": "Squall Huang", "link": "https://stackoverflow.com/users/9635680/squall-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577702392, "creation_date": 1577692124, "last_edit_date": 1577693083, "question_id": 59527383, "link": "https://stackoverflow.com/questions/59527383/why-kotlin-when-syntax-couldnt-fetch-value", "title": "Why Kotlin when syntax couldn&#39;t fetch value?", "body": "<p><strong>I just want to ask why my var <code>uploadImgsPath</code> in the Logcat always say: \"lateinit property <code>uploadImgsPath</code> has not been initialized\" ?</strong></p>\n\n<p>Why <code>uploadImgsPath</code> can't fetch value from when syntax?</p>\n\n<pre><code>companion object {\n\n        lateinit var categoryDesignID:String\n        lateinit var uploadImgsPath:StorageReference\n    }\n\n    //Set Spinner\n            categoryViewModel.getMainCategoryDesign().observe(this, Observer {\n                if (it[0].designTitle != \"UnCategorized\") {\n                    it.add(0, CategoryDesign(\"\", \"\", \"UnCategorized\"))\n                }\n                spinner.adapter = ArrayAdapter&lt;CategoryDesign&gt;(\n                    context!!,\n                    android.R.layout.simple_spinner_item,\n                    it)\n                    .apply {\n                        setDropDownViewResource(android.R.layout.simple_dropdown_item_1line)\n                    }\n                spinner.setSelection(0, false)\n                spinner.onItemSelectedListener= object : AdapterView.OnItemSelectedListener {\n                    override fun onNothingSelected(parent: AdapterView&lt;*&gt;?) {\n                        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n                    }\n\n                    override fun onItemSelected(\n                        parent: AdapterView&lt;*&gt;?,\n                        view: View?,\n                        position: Int,\n                        id: Long\n                    ) {\n                        when (it.get(position).categoryDesignID) {\n                            //Setup firebase storage path\n                            \"\" -&gt; {\n                                categoryDesignID = \"\"\n                                Toast.makeText(context,\"Please choose a category\",Toast.LENGTH_LONG).show()}\n                            \"ClothingDesign\" -&gt; {uploadImgsPath = mStorageRef\n                                .child(\"uploadedDesignImgs\")\n                                .child(\"ClothingDesign\")\n                            categoryDesignID = \"ClothingDesign\" }\n\n                            \"CommercialDesign\" -&gt; {uploadImgsPath = mStorageRef\n                                .child(\"uploadedDesignImgs\")\n                                .child(\"CommercialDesign\")\n                            categoryDesignID = \"CommercialDesign\"}\n\n                            \"LightingDesign\" -&gt; {uploadImgsPath = mStorageRef\n                                .child(\"uploadedDesignImgs\")\n                                .child(\"LightingDesign\")\n                            categoryDesignID = \"LightingDesign\"}\n                        }\n                    }\n                }\n            })\n</code></pre>\n"}, {"tags": ["java", "json", "kotlin", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 0, "creation_date": 1577703580, "post_id": 59528874, "comment_id": 105229022, "body": "Also note that the type field is in the JSON model but not the Kotlin type."}, {"owner": {"reputation": 489, "user_id": 10076263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c446ae62ccc4374a39cfbce66c4f189?s=128&d=identicon&r=PG&f=1", "display_name": "coltonidle", "link": "https://stackoverflow.com/users/10076263/coltonidle"}, "edited": false, "score": 0, "creation_date": 1577723542, "post_id": 59528874, "comment_id": 105237576, "body": "@Alexey thanks for the clarification. It seems as though I was completely misunderstanding this. From your point of view, for my use case I&#39;d have to write my own adapter factory? Do you by any chance have any sample on how I&#39;d write that? I really thought that PolymorphicJsonAdapterFactory would be able to help here, but it seems to only help if my &quot;type&quot; is written out in the json."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 489, "user_id": 10076263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c446ae62ccc4374a39cfbce66c4f189?s=128&d=identicon&r=PG&f=1", "display_name": "coltonidle", "link": "https://stackoverflow.com/users/10076263/coltonidle"}, "edited": false, "score": 0, "creation_date": 1577725759, "post_id": 59528874, "comment_id": 105238450, "body": "@coltonidle I think <code>PolymorphicJsonAdapterFactory</code>&#39;s source is the best starting point, actually. It&#39;s at <a href=\"https://github.com/square/moshi/blob/master/adapters/src/main/java/com/squareup/moshi/adapters/PolymorphicJsonAdapterFactory.java\" rel=\"nofollow noreferrer\">github.com/square/moshi/blob/master/adapters/src/main/java/c&zwnj;&#8203;om/&hellip;</a>. In particular look at the <code>fromJson</code> and <code>toJson</code> methods, they are what you&#39;ll need to change."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1577699910, "creation_date": 1577699910, "answer_id": 59528874, "question_id": 59526985, "link": "https://stackoverflow.com/questions/59526985/how-to-use-polymorphicjsonadapterfactory-with-an-interface-in-moshi/59528874#59528874", "title": "How to use PolymorphicJsonAdapterFactory with an interface in Moshi?", "body": "<pre><code>PolymorphicJsonAdapterFactory.of(PersonInterface.java, \"\")\n    .withSubtype(BusinessPerson.java, \"occupation\")\n    .withSubtype(PolicePerson.java, \"rank\")\n</code></pre>\n\n<p>means that JSON for every person is supposed to contain a key <code>\"\"</code> and <code>\"occupation\"</code> or <code>\"rank\"</code> is the value for this key, not a key name itself as you want. So e.g. it would encode a </p>\n\n<pre><code>BusinessPerson(\"John\", \"CEO\")\n</code></pre>\n\n<p>as</p>\n\n<pre><code>{\"\": \"occupation\", \"personsName\": \"John\", \"occupation\": \"CEO\"}\n</code></pre>\n\n<p>I think you'll have to write your own adapter factory for this use-case if you want to avoid a discriminator field.</p>\n"}], "owner": {"reputation": 489, "user_id": 10076263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c446ae62ccc4374a39cfbce66c4f189?s=128&d=identicon&r=PG&f=1", "display_name": "coltonidle", "link": "https://stackoverflow.com/users/10076263/coltonidle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1271, "favorite_count": 0, "accepted_answer_id": 59528874, "answer_count": 1, "score": 0, "last_activity_date": 1577699910, "creation_date": 1577689670, "question_id": 59526985, "link": "https://stackoverflow.com/questions/59526985/how-to-use-polymorphicjsonadapterfactory-with-an-interface-in-moshi", "title": "How to use PolymorphicJsonAdapterFactory with an interface in Moshi?", "body": "<p>I have an interface with two concrete types as part of my model that I'd like to serialize/deserialize with Moshi. My issue is that I don't fully understand if PolymorphicJsonAdapterFactory is actually meant for my use case. I've looked at the samples and a few blog posts and (if I'm understanding them correctly) all of them seem to point to the fact that your interface is supposed to have a field in the interface that allows you to determine the type. I'm working in an existing codebase and so I can't easily add a field that would allow me to figure out what type it is by some string literal.</p>\n\n<p>This is where I'm at with my Moshi code and I'm seeking validation on whether or not I'm using PolymorphicJsonAdapterFactory correctly. Note: I'm using java for the moshi portion of the code and for my model. My interface and it's concrete types are in kotlin</p>\n\n<pre><code>String json = ...;\n\nMoshi moshi = new Moshi.Builder()\n.add(PolymorphicJsonAdapterFactory.of(PersonInterface.java, \"\")\n            .withSubtype(BusinessPerson.java, \"occupation\")\n            .withSubtype(PolicePerson.java, \"rank\")\n)\n.build();\nJsonAdapter&lt;MyModel&gt; jsonAdapter = moshi.adapter(MyModel.class);\n\nMyModel myModel = jsonAdapter.fromJson(json);\n</code></pre>\n\n<p>Note: I'm using java for the moshi portion of the code and for my model. My interface and it's concrete types are in kotlin</p>\n\n<p><code>MyModel</code> is defined as the following</p>\n\n<pre><code>class MyModel {\n    String month;\n    PersonInterface person;\n}\n</code></pre>\n\n<p>My interface and concrete classes in kotlin:</p>\n\n<pre><code>Interface PersonInterface {\n    val personsName: String?\n}\n\ndata class BusinessPerson(\n        override val personsName: String,\n        val occupation: String?\n) : PersonInterface\n\ndata class PolicePerson(\n    override val personsName: String,\n    val rank: String?\n) : PersonInterface\n</code></pre>\n\n<p>The goal is to hopefully have Moshi be able to create a </p>\n\n<pre><code>class MyModel {\n    String month;\n    BusinessPerson person;\n}\n</code></pre>\n\n<p>or a </p>\n\n<pre><code>class MyModel {\n    String month;\n    PolicePerson person;\n}\n</code></pre>\n\n<p>depending on whether or not the person field contains an <code>occupation</code> (which means it's of type BusinessPerson) or if it contains the field <code>rank</code> (which means it's of type PolicePerson).</p>\n"}, {"tags": ["android", "kotlin", "arraylist", "hashmap"], "comments": [{"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 1, "creation_date": 1577689214, "post_id": 59526862, "comment_id": 105224193, "body": "<a href=\"https://stackoverflow.com/questions/2144776/is-the-order-of-values-retrieved-from-a-hashmap-the-insertion-order\" title=\"is the order of values retrieved from a hashmap the insertion order\">stackoverflow.com/questions/2144776/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 1094290, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1f5a5314033d2286b0a9ca639a26c360?s=128&d=identicon&r=PG", "display_name": "Amosa", "link": "https://stackoverflow.com/users/1094290/amosa"}, "edited": false, "score": 0, "creation_date": 1577740045, "post_id": 59526862, "comment_id": 105243371, "body": "It&#39;s not guaranteed that the <code>HashMap</code> sequence will be the same as how you inserted. Use <code>LinkedHashSet</code> if you would like to preserve the order. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-linked-hash-set/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/&hellip;</a>"}], "owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1577689278, "answer_count": 0, "score": 1, "last_activity_date": 1577689517, "creation_date": 1577688897, "last_edit_date": 1577689517, "question_id": 59526862, "link": "https://stackoverflow.com/questions/59526862/dont-where-my-data-sequence-are-changing-hashmap", "closed_reason": "Duplicate", "title": "Don&#39;t where my data sequence are changing hashmap", "body": "<p>I had a <code>list</code> and each item of the list has its <code>parent id</code>. I created <code>hashmap</code> which contain list <code>item</code>\nas per its <code>parentId</code>. The list is in proper sequence and I add <code>item</code> to <code>hashmap</code>. In the end, the hashmap sequence changed. I don't know where. </p>\n\n<pre><code>var package = HashMap&lt;String, MutableList&lt;Model&gt;&gt;()\nvar temp: MutableList&lt;Model&gt;? = ArrayList&lt;Model&gt;()\nfor (item in list!!) {\n    temp = package?.get(item.parentId!!)\n    Log.e(\"parent id\",Gson().toJson(item.parentId!!))\n    if (temp != null)\n        temp.add(item)\n    else {\n        temp = ArrayList&lt;Model&gt;()\n        temp.add(item)\n    }\n\n    package?.put(item.parentId!!, temp)\n    Log.e(\"package\",Gson().toJson(package.keys))\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "type-erasure", "moshi"], "answers": [{"comments": [{"owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 0, "creation_date": 1577703488, "post_id": 59527814, "comment_id": 105228987, "body": "Yep, Moshi needs to be able to introspect what T is here. I recommend a variant of option 2; return an instance of JsonAdapter rather than an object with annotated methods."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 0, "creation_date": 1577707183, "post_id": 59527814, "comment_id": 105230496, "body": "Option 1 also uses instance of JsonAdapter, the point of <code>reified</code> is that it should inherit <code>JsonAdapter&lt;Runnable&gt;</code> and not <code>JsonAdapter&lt;T&gt;</code>."}, {"owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "edited": false, "score": 0, "creation_date": 1577721105, "post_id": 59527814, "comment_id": 105236505, "body": "Thanks , both options work well ! I never thought of <code>reified</code> solution."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1577707307, "last_edit_date": 1577707307, "creation_date": 1577694773, "answer_id": 59527814, "question_id": 59526697, "link": "https://stackoverflow.com/questions/59526697/moshi-with-kotlin-generics-throws-no-jsonadapter-for-interface/59527814#59527814", "title": "Moshi with kotlin generics throws No JsonAdapter for interface", "body": "<p>Option 1 (I expect it to work, but am not certain): Try changing <code>toJsonAdapter</code> to <code>inline fun &lt;reified T&gt; IMapConverter&lt;T&gt;.toJsonAdapter() : JsonAdapter&lt;T&gt; { ... }</code>. </p>\n\n<p>Option 2: use one of <code>Moshi.Builder.add</code> overloads which allow specifying the type (<code>Class&lt;T&gt;</code> extends <code>Type</code>):</p>\n\n<pre><code>.add(IRunnable::class.java, converter.toJsonAdapter())\n</code></pre>\n\n<p>to avoid a chance to give the wrong type, you can use <code>reified</code> again:</p>\n\n<pre><code>inline fun &lt;reified T&gt; Moshi.Builder.add(converter: IMapConverter&lt;T&gt;) = add(T::class.java, converter.toJsonAdapter())\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>Moshi.Builder().add(converter)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 8550140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWQXq.png?s=128&g=1", "display_name": "Khaled Qasem", "link": "https://stackoverflow.com/users/8550140/khaled-qasem"}, "is_accepted": false, "score": 1, "last_activity_date": 1583789393, "creation_date": 1583789393, "answer_id": 60608611, "question_id": 59526697, "link": "https://stackoverflow.com/questions/59526697/moshi-with-kotlin-generics-throws-no-jsonadapter-for-interface/60608611#60608611", "title": "Moshi with kotlin generics throws No JsonAdapter for interface", "body": "<p>You need to suppress wildcards using <code>@JvmSuppressWildcards</code>. </p>\n\n<p>So in your case it should be like this </p>\n\n<pre><code>interface IMapConverter&lt;@JvmSuppressWildcards T&gt; {\n  fun getMap(impl : T) : Map&lt;String , String&gt;\n  fun getImpl(map : Map&lt;String , String&gt;) : T?\n}\n</code></pre>\n"}], "owner": {"reputation": 10010, "user_id": 298430, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/59f4dbadde568115653307fefda7e422?s=128&d=identicon&r=PG", "display_name": "smallufo", "link": "https://stackoverflow.com/users/298430/smallufo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1953, "favorite_count": 1, "accepted_answer_id": 59527814, "answer_count": 2, "score": 3, "last_activity_date": 1583789393, "creation_date": 1577687776, "question_id": 59526697, "link": "https://stackoverflow.com/questions/59526697/moshi-with-kotlin-generics-throws-no-jsonadapter-for-interface", "title": "Moshi with kotlin generics throws No JsonAdapter for interface", "body": "<p>Suppose I have an Interface <code>IRunnable</code> and two implementations <code>Cat</code> and <code>Dog</code> :</p>\n\n<pre><code>interface IRunnable {\n  fun run()\n}\n\nclass Cat : IRunnable {\n  override fun run() { println(\"cat running\") }\n}\n\nclass Dog : IRunnable {\n  override fun run() { println(\"dog running\") }\n}\n</code></pre>\n\n<p>And there is an interface that converts <code>IRunnable</code> to <code>Map&lt;String,String&gt;</code> with key=<code>runnable</code></p>\n\n<pre><code>interface IMapConverter&lt;T&gt; {\n  fun getMap(impl : T) : Map&lt;String , String&gt;\n  fun getImpl(map : Map&lt;String , String&gt;) : T?\n}\n</code></pre>\n\n<pre><code>class RunnableConverter : IMapConverter&lt;IRunnable&gt; {\n  private val key = \"runnable\"\n\n  override fun getMap(impl: IRunnable): Map&lt;String, String&gt; {\n    val value = when(impl) {\n      is Cat -&gt; \"C\"\n      is Dog -&gt; \"D\"\n      else -&gt; throw RuntimeException(\"error\")\n    }\n    return mapOf(key to value)\n  }\n\n  override fun getImpl(map: Map&lt;String, String&gt;): IRunnable? {\n    return map[key]?.let { value -&gt;\n      when (value) {\n        \"C\" -&gt; Cat()\n        \"D\" -&gt; Dog()\n        else -&gt; throw RuntimeException(\"error\")\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Then with moshi , I want the <code>IMapConverter</code> become a <code>JsonAdapter</code> , so I add a <code>getAdapter()</code> function inside <code>RunnableConverter</code> :</p>\n\n<pre><code>fun getAdapter() : JsonAdapter&lt;IRunnable&gt; {\n    return object : JsonAdapter&lt;IRunnable&gt;() {\n\n      @ToJson\n      override fun toJson(writer: JsonWriter, runnable: IRunnable?) {\n        runnable?.also { impl -&gt;\n          writer.beginObject()\n          getMap(impl).forEach { (key , value) -&gt;\n            writer.name(key).value(value)\n          }\n          writer.endObject()\n        }\n      }\n\n      @FromJson\n      override fun fromJson(reader: JsonReader): IRunnable? {\n        reader.beginObject()\n\n        val map = mutableMapOf&lt;String , String&gt;().apply {\n          while (reader.hasNext()) {\n            put(reader.nextName() , reader.nextString())\n          }\n        }\n        val result = getImpl(map)\n\n        reader.endObject()\n        return result\n      }\n    }\n  }\n</code></pre>\n\n<p>It works well :</p>\n\n<pre><code>  @Test\n  fun testConverter1() {\n    val converter = RunnableConverter()\n\n    val moshi = Moshi.Builder()\n      .add(converter.getAdapter())\n      .build()\n\n    val adapter = moshi.adapter&lt;IRunnable&gt;(IRunnable::class.java)\n    adapter.toJson(Dog()).also { json -&gt;\n      assertEquals(\"\"\"{\"runnable\":\"D\"}\"\"\" , json)\n      adapter.fromJson(json).also { runnable -&gt;\n        assertTrue(runnable is Dog)\n      }\n    }\n  }\n</code></pre>\n\n<p>But , when I want to <strong>externalize</strong> the adapter to a extension function :</p>\n\n<pre><code>fun &lt;T&gt; IMapConverter&lt;T&gt;.toJsonAdapter() : JsonAdapter&lt;T&gt; {\n  return object : JsonAdapter&lt;T&gt;() {\n\n    @ToJson\n    override fun toJson(writer: JsonWriter, value: T?) {\n      value?.also { impl -&gt;\n        writer.beginObject()\n        getMap(impl).forEach { (key , value) -&gt;\n          writer.name(key).value(value)\n        }\n        writer.endObject()\n      }\n    }\n\n    @FromJson\n    override fun fromJson(reader: JsonReader): T? {\n      reader.beginObject()\n\n      val map = mutableMapOf&lt;String , String&gt;().apply {\n        while (reader.hasNext()) {\n          put(reader.nextName() , reader.nextString())\n        }\n      }\n\n      val result = getImpl(map)\n      reader.endObject()\n      return result\n    }\n  }\n}\n\n</code></pre>\n\n<p>And when I want to test the function :</p>\n\n<pre><code>  @Test\n  fun testConverter2() {\n    val converter = RunnableConverter()\n\n    val moshi = Moshi.Builder()\n      .add(converter.toJsonAdapter()) // this is extension function\n      .build()\n\n    val adapter = moshi.adapter&lt;IRunnable&gt;(IRunnable::class.java)\n    adapter.toJson(Dog()).also { json -&gt;\n      logger.info(\"json of dog = {}\", json)\n      assertEquals(\"\"\"{\"runnable\":\"D\"}\"\"\" , json)\n      adapter.fromJson(json).also { runnable -&gt;\n        assertTrue(runnable is Dog)\n      }\n    }\n  }\n</code></pre>\n\n<p>It compiles OK , but reports error :</p>\n\n<pre><code>java.lang.IllegalArgumentException: No JsonAdapter for interface moshi.IRunnable (with no annotations)\n\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:148)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:98)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:72)\n    at moshi.MoshiTest.testConverter2(MoshiTest.kt:39)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\n</code></pre>\n\n<p>I try to set breakpoint at line 137 at Moshi.java\n<a href=\"https://github.com/square/moshi/blob/40a829ef181e7097087ec0e95cdcf3e3fbba3156/moshi/src/main/java/com/squareup/moshi/Moshi.java#L137\" rel=\"nofollow noreferrer\">https://github.com/square/moshi/blob/40a829ef181e7097087ec0e95cdcf3e3fbba3156/moshi/src/main/java/com/squareup/moshi/Moshi.java#L137</a></p>\n\n<p>And this is the debug screenshot :</p>\n\n<p>The OK one (defined in <code>RunnableConverter</code>) :\n<a href=\"https://i.stack.imgur.com/6uL72.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6uL72.png\" alt=\"enter image description here\"></a></p>\n\n<p>And this is the generic version created by extension function :\n<a href=\"https://i.stack.imgur.com/8kZe4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8kZe4.png\" alt=\"enter image description here\"></a></p>\n\n<p>It seems because the type erasure , it cannot work ...\nIs there any way to work around it ?</p>\n\n<p>For anyone who interests in it , the full code is here :\n<a href=\"https://gist.github.com/smallufo/985db4719c5434a5f57f06b14011de78\" rel=\"nofollow noreferrer\">https://gist.github.com/smallufo/985db4719c5434a5f57f06b14011de78</a></p>\n\n<p>environment :</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.squareup.moshi&lt;/groupId&gt;\n  &lt;artifactId&gt;moshi-kotlin&lt;/artifactId&gt;\n  &lt;version&gt;1.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin", "kotlin-lateinit"], "comments": [{"owner": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 2, "creation_date": 1577683149, "post_id": 59526005, "comment_id": 105222723, "body": "Before using <code>textInput</code> you need to do something like <code>textInput = mutableListOf(&quot;Abc&quot;, &quot;Xyz&quot;)</code>"}, {"owner": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "edited": false, "score": 0, "creation_date": 1577690711, "post_id": 59526005, "comment_id": 105224588, "body": "Great, have added answer with the same"}], "answers": [{"tags": [], "owner": {"reputation": 1207, "user_id": 6671004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bueJ3.jpg?s=128&g=1", "display_name": "Shrey Garg", "link": "https://stackoverflow.com/users/6671004/shrey-garg"}, "is_accepted": false, "score": 1, "last_activity_date": 1577686025, "creation_date": 1577686025, "answer_id": 59526433, "question_id": 59526005, "link": "https://stackoverflow.com/questions/59526005/how-to-initialize-the-lateinit-variable/59526433#59526433", "title": "how to Initialize the lateinit variable?", "body": "<p>You will have to initialise <code>textInput</code> variable before using it.\nFor this you can do something like this : </p>\n\n<pre><code>textInput = mutableListOf(\"Abc\", \"Xyz\")\n</code></pre>\n\n<hr>\n\n<p>From docs : Accessing a lateinit property before it has been initialized throws a special exception that clearly identifies the property being accessed and the fact that it hasn't been initialized.</p>\n\n<p>Read more: <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties-and-variables\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties-and-variables</a></p>\n"}, {"comments": [{"owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "reply_to_user": {"reputation": 25, "user_id": 11797633, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rxpvzQJZo9k/AAAAAAAAAAI/AAAAAAAAFYI/XiQDd-6q73o/photo.jpg?sz=128", "display_name": "Yashwin.L", "link": "https://stackoverflow.com/users/11797633/yashwin-l"}, "edited": false, "score": 0, "creation_date": 1577936595, "post_id": 59528267, "comment_id": 105284415, "body": "accept answer if it worked for you also ask any help if needed"}, {"owner": {"reputation": 25, "user_id": 11797633, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rxpvzQJZo9k/AAAAAAAAAAI/AAAAAAAAFYI/XiQDd-6q73o/photo.jpg?sz=128", "display_name": "Yashwin.L", "link": "https://stackoverflow.com/users/11797633/yashwin-l"}, "edited": false, "score": 0, "creation_date": 1577946646, "post_id": 59528267, "comment_id": 105286364, "body": "the app ran without any problem but the content&#39;s inside the app is empty! i don&#39;t know way all can see is the blank space! is it because i took that app from open source or any other problem and here is the <a href=\"https://github.com/ligi/SurvivalManual\" rel=\"nofollow noreferrer\">github</a> for the app.please share me if you have any idea about this problem."}], "tags": [], "owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "is_accepted": true, "score": 1, "last_activity_date": 1577697276, "creation_date": 1577697276, "answer_id": 59528267, "question_id": 59526005, "link": "https://stackoverflow.com/questions/59526005/how-to-initialize-the-lateinit-variable/59528267#59528267", "title": "how to Initialize the lateinit variable?", "body": "<p>Do this :</p>\n\n<pre><code> private  var currentUrl: String =\"\"\n private  var currentTopicName: String =\"\"\n private  var textInput= mutableListOf&lt;String&gt;()\n</code></pre>\n\n<p>You can do same thing with lateinit do you really don't need to user here. But if you\nwish to do then. </p>\n\n<pre><code>private lateinit var currentUrl: String\nprivate lateinit var currentTopicName: String\nprivate lateinit var textInput: MutableList&lt;String&gt;\n</code></pre>\n\n<p>In onCreate() method you have to just initialize these all variables.</p>\n\n<pre><code>  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    currentUrl = String()\n    currentTopicName = String()\n    textInput= mutableListOf()\n}\n</code></pre>\n\n<p>Let me know if any more help needed.</p>\n"}], "owner": {"reputation": 25, "user_id": 11797633, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rxpvzQJZo9k/AAAAAAAAAAI/AAAAAAAAFYI/XiQDd-6q73o/photo.jpg?sz=128", "display_name": "Yashwin.L", "link": "https://stackoverflow.com/users/11797633/yashwin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 710, "favorite_count": 0, "accepted_answer_id": 59528267, "answer_count": 2, "score": 1, "last_activity_date": 1577697276, "creation_date": 1577682924, "question_id": 59526005, "link": "https://stackoverflow.com/questions/59526005/how-to-initialize-the-lateinit-variable", "title": "how to Initialize the lateinit variable?", "body": "<p>I am trying to run the open source app in which <strong>i am getting the error as</strong></p>\n\n<pre><code>lateinit property textInput has not been initialized\n</code></pre>\n\n<p><strong>The main code where the <code>textInput</code> is used</strong></p>\n\n<pre><code>class MainActivity : BaseActivity() {\n\n    private val drawerToggle by lazy { ActionBarDrawerToggle(this, drawer_layout, drawer_open, drawer_close) }\n\n    private val survivalContent by lazy { SurvivalContent(assets) }\n\n    private lateinit var currentUrl: String\n    private lateinit var currentTopicName: String\n    private lateinit var textInput: MutableList&lt;String&gt;\n\n\n    private var lastFontSize = State.getFontSize()\n    private var lastNightMode = State.nightModeString()\n    private var lastAllowSelect = State.allowSelect()\n\n    private val linearLayoutManager by lazy { LinearLayoutManager(this) }\n\n    private var isInEditMode by observable(false, onChange = { _, _, newMode -&gt;\n        if (newMode) {\n            fab.setImageResource(drawable.ic_image_remove_red_eye)\n            contentRecycler.adapter = EditingRecyclerAdapter(textInput)\n        } else {\n            fab.setImageResource(drawable.ic_editor_mode_edit)\n            contentRecycler.adapter = MarkdownRecyclerAdapter(textInput, imageWidth(), onURLClick)\n        }\n\n        contentRecycler.scrollToPosition(State.lastScrollPos)\n    })\n</code></pre>\n\n<p>Since i am new to android development i don't to how to initialize the lateinit variable before using it.Before this i tried to do the <code>git submodule update</code> as mentioned in this <a href=\"https://github.com/ligi/SurvivalManual/issues/54\" rel=\"nofollow noreferrer\">github</a> but it didn't worked.so now i hope the problem is in initializing the <strong>textInput</strong> variable.</p>\n"}, {"tags": ["java", "android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "edited": false, "score": 0, "creation_date": 1577685130, "post_id": 59525784, "comment_id": 105223159, "body": "Do you want to convert this code into java?"}], "answers": [{"tags": [], "owner": {"reputation": 1131, "user_id": 6284448, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/af0Bu.jpg?s=128&g=1", "display_name": "GParekar", "link": "https://stackoverflow.com/users/6284448/gparekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1577682100, "creation_date": 1577682100, "answer_id": 59525930, "question_id": 59525784, "link": "https://stackoverflow.com/questions/59525784/how-to-translate-this-android-kotlin-code-to-java-code/59525930#59525930", "title": "How to translate this Android Kotlin code to Java code", "body": "<pre><code>init\n</code></pre>\n\n<p>As per documentation - init is equivalent to a constructor in java. here we can initialize a variable.</p>\n\n<pre><code>let\n</code></pre>\n\n<p>As per documentation- Kotlin <strong>let</strong> is a scoping function wherein the variables declared inside the expression cannot be used outside.</p>\n\n<pre><code>tracker?.let {\n    holder.bind(number, it.isSelected(position.toLong()))\n}\n</code></pre>\n\n<p>here <strong>it</strong> is a copy of tracker.changing <strong>it</strong> will not affect on tracker variable.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 12182135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kuzJv.jpg?s=128&g=1", "display_name": "MrKovalev", "link": "https://stackoverflow.com/users/12182135/mrkovalev"}, "is_accepted": false, "score": 0, "last_activity_date": 1577685980, "creation_date": 1577685980, "answer_id": 59526423, "question_id": 59525784, "link": "https://stackoverflow.com/questions/59525784/how-to-translate-this-android-kotlin-code-to-java-code/59526423#59526423", "title": "How to translate this Android Kotlin code to Java code", "body": "<p>MainAdapter equivalent in Java code is something like that:</p>\n\n<pre><code>class MainAdapter extends RecyclerView.Adapter&lt;MainAdapter.ViewHolder&gt; {\n\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    SelectionTracker&lt;Long&gt; tracker;\n\n    public MainAdapter() {\n        setHasStableIds(true);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        int number = list.get(position);\n\n        if (tracker != null) {\n            holder.bind(number, tracker.isSelected(position.toLong()));\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 1536714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/974e6ea02a6276538571675ced055b9e?s=128&d=identicon&r=PG", "display_name": "avenger", "link": "https://stackoverflow.com/users/1536714/avenger"}, "is_accepted": true, "score": 2, "last_activity_date": 1577695439, "creation_date": 1577695439, "answer_id": 59527937, "question_id": 59525784, "link": "https://stackoverflow.com/questions/59525784/how-to-translate-this-android-kotlin-code-to-java-code/59527937#59527937", "title": "How to translate this Android Kotlin code to Java code", "body": "<p>I would recommend another way to read kotlin code assuming you are well familiar with java. You can use below option in android studio.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eYzqr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYzqr.jpg\" alt=\"Decode kt file\"></a></p>\n\n<p>After this just click decompile and Voila!, you will get java code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/cJypd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cJypd.png\" alt=\"byte code\"></a></p>\n\n<p>So now you can read any kotlin code.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12638579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19f8ea22e419f9b51c2e14b28ae40635?s=128&d=identicon&r=PG&f=1", "display_name": "latentdragon", "link": "https://stackoverflow.com/users/12638579/latentdragon"}, "is_accepted": false, "score": 0, "last_activity_date": 1577936328, "creation_date": 1577936328, "answer_id": 59558051, "question_id": 59525784, "link": "https://stackoverflow.com/questions/59525784/how-to-translate-this-android-kotlin-code-to-java-code/59558051#59558051", "title": "How to translate this Android Kotlin code to Java code", "body": "<pre><code>class M {\n    var age: Int = 0\n}\n</code></pre>\n\n<pre><code>fun main(){\n    val m = M()\n    m.let {\n        it.age = 11\n     }\n    println(m.age)\n}\n</code></pre>\n\n<p>above output \"11\", so \"let\" doesn't copy the receiver, \"it\" is just point to the receiver, it has side-effect</p>\n"}], "owner": {"reputation": 117, "user_id": 11677722, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eBmYKvOQFR8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reqZ7I0fxaGb7BIkdffGGbSkVrjUg/mo/photo.jpg?sz=128", "display_name": "A4_TS", "link": "https://stackoverflow.com/users/11677722/a4-ts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 59527937, "answer_count": 4, "score": 0, "last_activity_date": 1577936328, "creation_date": 1577680778, "last_edit_date": 1577701098, "question_id": 59525784, "link": "https://stackoverflow.com/questions/59525784/how-to-translate-this-android-kotlin-code-to-java-code", "title": "How to translate this Android Kotlin code to Java code", "body": "<pre><code>class MainAdapter : RecyclerView.Adapter&lt;MainAdapter.ViewHolder&gt;() {\n\n    var list: List&lt;Int&gt; = arrayListOf()\n    var tracker: SelectionTracker&lt;Long&gt;? = null\n\n    init {\n        setHasStableIds(true)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        val number = list[position]\n        tracker?.let {\n            holder.bind(number, it.isSelected(position.toLong()))\n        }\n    }\n</code></pre>\n\n<p>I would like to understand this example. What does <code>tracker?.let</code> translate to? And also what's the equivalent of <code>init</code> in Java?</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 7897438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86d3b734987a14edcc0028b107cda6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Nadtochii", "link": "https://stackoverflow.com/users/7897438/yevhenii-nadtochii"}, "edited": false, "score": 0, "creation_date": 1577725854, "post_id": 59525639, "comment_id": 105238490, "body": "good option, but not exactly what I need. I&#39;ve edited sample code in question. I obly need to restrict creation of inner class, but not its visibility."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "reply_to_user": {"reputation": 367, "user_id": 7897438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86d3b734987a14edcc0028b107cda6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Nadtochii", "link": "https://stackoverflow.com/users/7897438/yevhenii-nadtochii"}, "edited": false, "score": 1, "creation_date": 1577726405, "post_id": 59525639, "comment_id": 105238692, "body": "One way to fix that would be to define an interface that <code>Inner</code> implements that is visible. Another thing is using a <code>protected constructor</code>, but then whichever visibility you assign to the Inner constructor would restrict the Outer access the same as from outside of Outer so doesn&#39;t work out."}, {"owner": {"reputation": 367, "user_id": 7897438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86d3b734987a14edcc0028b107cda6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Nadtochii", "link": "https://stackoverflow.com/users/7897438/yevhenii-nadtochii"}, "edited": false, "score": 0, "creation_date": 1577727060, "post_id": 59525639, "comment_id": 105238907, "body": "Kotlin style conventions discourage boilerplate code :) but option with interface seems to be the most suitable for now. Thank you!"}], "tags": [], "owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1577728002, "last_edit_date": 1577728002, "creation_date": 1577679180, "answer_id": 59525639, "question_id": 59525497, "link": "https://stackoverflow.com/questions/59525497/how-to-restrict-instantiation-of-inner-class-only-inside-outer-in-kotlin/59525639#59525639", "title": "How to restrict instantiation of inner class only inside outer in Kotlin?", "body": "<p><em>Edited:</em> To make the <code>val</code> field visible and at the same time hide the <code>Inner</code> constructor, it may be useful to use an interface that's visible and make the implementation private:</p>\n\n<pre><code>class Outer {\n    val insideInner: Inner = InnerImpl()\n\n    interface Inner {\n        // ...\n    }\n    private inner class InnerImpl : Inner {\n        // ...\n    }\n}\n\n\nval outer = Outer()\nval outsideInner = outer.InnerImpl() // Error! Cannot access '&lt;init&gt;': it is private in 'Inner'\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 7897438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86d3b734987a14edcc0028b107cda6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Nadtochii", "link": "https://stackoverflow.com/users/7897438/yevhenii-nadtochii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 59525639, "answer_count": 1, "score": 3, "last_activity_date": 1577728002, "creation_date": 1577677634, "last_edit_date": 1577725628, "question_id": 59525497, "link": "https://stackoverflow.com/questions/59525497/how-to-restrict-instantiation-of-inner-class-only-inside-outer-in-kotlin", "title": "How to restrict instantiation of inner class only inside outer in Kotlin?", "body": "<p>Having inner &amp; outer classes I want to restrict instantiation of inner only by the scope of outer class. How can I achieve this in Kotlin ? Java provides it in a very easy way. But is seems that in Kotlin I can't access private field even from inner class.</p>\n\n<p>What Kotlin has:</p>\n\n<pre><code>class Outer {\n    val insideCreatedInner: Inner = Inner()\n    inner class Inner\n}\n\nval insideCreatedInner = Outer().insideCreatedInner // Should be visible and accessible\nval outsideCreatedInner = Outer().Inner() // I want to disallow this\n</code></pre>\n\n<p>How Java solve this:</p>\n\n<pre><code>class Outer {\n    Inner insideCreatedInner = new Inner();\n    class Inner {\n        private Inner() {}\n    }\n}\n\nOuter.Inner insideCreatedInner = new Outer().insideCreatedInner;\nOuter.Inner outsideCreatedInner = new Outer().new Inner(); // 'Inner()' has private access in 'Outer.Inner'\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "interface", "callback"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577673789, "post_id": 59525086, "comment_id": 105221138, "body": "When you did the conversion to Kotlin, did you keep the exact same definition for the <code>MapControlUpdate</code> in Java? Part of what you want is using the Single Abstract Method (SAM) enhancement working with interfaces consisting of one method."}], "answers": [{"comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1577681726, "post_id": 59525130, "comment_id": 105222459, "body": "This is probably the main reason they are adding SAM conversion for Kotlin interfaces in Kotlin 1.4."}], "tags": [], "owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "is_accepted": false, "score": 3, "last_activity_date": 1577673978, "creation_date": 1577673978, "answer_id": 59525130, "question_id": 59525086, "link": "https://stackoverflow.com/questions/59525086/java-kotlin-callback-syntax-do-i-really-need-2-callback-definitions-after-conv/59525130#59525130", "title": "Java/Kotlin callback syntax - do I really need 2 callback definitions after conversion to Kotlin?", "body": "<p>I suspect that you will need to keep just your <code>interface MapControlUpdate</code> definition in Java.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1577692353, "creation_date": 1577692353, "answer_id": 59527416, "question_id": 59525086, "link": "https://stackoverflow.com/questions/59525086/java-kotlin-callback-syntax-do-i-really-need-2-callback-definitions-after-conv/59527416#59527416", "title": "Java/Kotlin callback syntax - do I really need 2 callback definitions after conversion to Kotlin?", "body": "<p>Instead of two callbacks you would keep just one callback and convert as appropriate:</p>\n\n<pre><code>var onSelectionChange: MapControlUpdate? = null\n\nfun setOnSelectionChange(listener: (WidgetMapType.MAP_TYPE?) -&gt; Unit){\n    onSelectionChangeListener = object : MapControlUpdate {\n        override fun onSelectionChange(mapType: WidgetMapType.MAP_TYPE?) {\n            listener(mapType)\n        }\n    }\n}\n</code></pre>\n\n<p>Or write a helper function if <code>MapControlUpdate</code> is used more than once.</p>\n\n<p>But the real solution is, as karmakaze says: keep the interface in Java until Kotlin 1.4 and then declare it as <a href=\"https://stackoverflow.com/questions/59442419/function-interface-in-kotlin-1-4\"><code>fun interface</code></a>.</p>\n"}], "owner": {"reputation": 1333, "user_id": 5890321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08b0ac8116e1de42e5733c6c67c92a2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Argo", "link": "https://stackoverflow.com/users/5890321/kenneth-argo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577692353, "creation_date": 1577673443, "question_id": 59525086, "link": "https://stackoverflow.com/questions/59525086/java-kotlin-callback-syntax-do-i-really-need-2-callback-definitions-after-conv", "title": "Java/Kotlin callback syntax - do I really need 2 callback definitions after conversion to Kotlin?", "body": "<p>I have a problem that has been challenging me for a few days with no resolution (more directly, no resolution I feel is correct). The issue is around callbacks, Java implementation vs Kotlin implementation</p>\n\n<p>I have this Java method:</p>\n\n<pre><code>public void setOnSelectionChange(MapControlUpdate mapMenuControl) {\n    this.mapControlUpdate = mapMenuControl;\n}\n\nprivate MapControlUpdate mapControlUpdate;\n\npublic interface MapControlUpdate {\n    void onSelectionChange(MAP_TYPE mapType);\n}\n</code></pre>\n\n<p>Using the above implementation I have what I want (below) in both Java and Kotlin.</p>\n\n<p>Java (before):</p>\n\n<pre><code>widgetMapType.setOnSelectionChange(mapType -&gt; {\n    Toast.makeText(getContext(), \"clicked: \" + mapType, Toast.LENGTH_LONG).show();\n});\n</code></pre>\n\n<p>Kotlin (before):</p>\n\n<pre><code>widgetMapType.setOnSelectionChange {\n    Toast.makeText(context, \"clicked: $it\", Toast.LENGTH_LONG).show()\n}\n</code></pre>\n\n<p>The new Kotlin code, after conversion is:</p>\n\n<pre><code>fun setOnSelectionChange(mapMenuControl: MapControlUpdate?) {\n    mapControlUpdate = mapMenuControl\n}\n\nprivate var mapControlUpdate: MapControlUpdate? = null\n</code></pre>\n\n<p>After the conversion to Kotlin the Java usage remains unchanged but I need to change the Kotlin code as follows or I get a syntax error:</p>\n\n<p>Kotlin (after): </p>\n\n<pre><code>widgetMapType.setMapMenuControl(object: WidgetMapType.MapControlUpdate {\n    override fun onSelectionChange(mapType: WidgetMapType.MAP_TYPE?) {\n        Toast.makeText(context, \"clicked: $mapType\", Toast.LENGTH_LONG).show()\n    }\n})\n</code></pre>\n\n<p>In order to get back to where I'd like to be I found that the only solution appear to be to implement 2 callbacks; 1 to allow Java to work with the original syntax and another to allow Kotlin syntax to remain the same.</p>\n\n<p>This is the code I'm using (it works):</p>\n\n<pre><code>var onSelectionChange: MapControlUpdate? = null\n\nprivate var onSelectionChangeListener: ((MapDisplayTypes?) -&gt; Unit)? = null\n\nfun setOnSelectionChange(listener: (MapDisplayTypes?) -&gt; Unit){\n    onSelectionChangeListener = listener\n}\n</code></pre>\n\n<p>and I fire both callbacks as appropriate</p>\n\n<pre><code>onSelectionChange?.onSelectionChange(it)    // Java\nonSelectionChangeListener?.invoke(it)   // Kotlin\n</code></pre>\n\n<p>I really cannot believe that there isn't a more correct method but my searches (here and on the web) have returns tons of examples for Kotlin and Java but they all align with my above examples based on the code (also shown above).  I suspect there maybe an annotation or something that I'm missing so finding no other solution I'm turning to the community here.</p>\n\n<p>Thank you ahead of time!!</p>\n"}, {"tags": ["java", "gradle", "kotlin", "intellij-idea", "jar"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 1, "creation_date": 1577674318, "post_id": 59525001, "comment_id": 105221231, "body": "Have you determined whether the problem is with the new .jar or running on the new Mac? (i.e. does the old .jar run on the new Mac or the new .jar fail on the old Mac?)  BTW, a 401 code seems like an HTTP authentication problem. Check for hidden files (starting with <code>.</code> use <code>ls -la</code> to see them) which could impact either the building of the .jar or running of the .jar file. Similarly for environment variables. If you&#39;re running the .jar inside IntelliJ the run configuration there also applies."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577739508, "post_id": 59525001, "comment_id": 105243176, "body": "@kamakaze, The main issue is running the <code>Main</code> method in IntelliJ on the new Mac. The old <i>.jar</i> runs as expected on the new Mac, and the new <i>.jar</i> compiled yesterday runs as expected on the old Mac. <b>The <code>Main</code> method runs on the old Mac as expected, but not on the new Mac.</b>"}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 1, "creation_date": 1577739781, "post_id": 59525001, "comment_id": 105243291, "body": "So would you agree that the problem is with the run configuration (and not the build configuration) in IntelliJ on the new Mac? If that&#39;s the case visually compare the project settings (especially the run configuration) between the old and new mac."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577744577, "post_id": 59525001, "comment_id": 105244847, "body": "@karmakaze, Good point. I think there is a high likelihood the issue is with the run configuration. I&#39;ve re-checked the IntelliJ, Project, and Run configurations. The <i>gradle-wrapper.properties</i> <b>Gradle</b>, IntelliJ Preferences <b>Gradle JVM</b>, Project <b>SDK</b>, Run/Debug Configurations <b>JRE</b>, and Project <b>language level</b> versions are the same across both machines."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577744998, "post_id": 59525001, "comment_id": 105244971, "body": "@karmakaze, May you also vote on the question in order to help others discover this, who are also having this issue."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 1, "creation_date": 1577745330, "post_id": 59525001, "comment_id": 105245056, "body": "It seems more of an IntelliJ config issue than GCP one. Maybe update the title to be something that seems relevant to the current knowledge."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577745776, "post_id": 59525001, "comment_id": 105245185, "body": "@karmakaze, The title change is complete."}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 1, "creation_date": 1577746115, "post_id": 59525001, "comment_id": 105245303, "body": "@karmakaze, The fact that the issue temporarily subsides after <i>Invalidate cache/Restart...</i> seems to be a clue..."}], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577809493, "creation_date": 1577672378, "last_edit_date": 1577809493, "question_id": 59525001, "link": "https://stackoverflow.com/questions/59525001/intellij-main-error-migrating-projects-exception-in-thread-timer-0", "title": "IntelliJ Main Error Migrating Projects: Exception in thread &quot;Timer-0&quot;", "body": "<h1>Overview</h1>\n\n<p>There is an issue when attempting to migrate a Kotlin AppEngine project from an old MacBook Pro (MBP) to a new MBP, when running the <code>Main</code> method and building a <em>.jar</em> file locally.</p>\n\n<p>The <code>Main</code> method in IntelliJ fails intermittently on the new MBP. The old <em>.jar</em> runs as expected on the new MBP, and the new <em>.jar</em> runs as expected on the old MBP. </p>\n\n<p><strong>Expected</strong></p>\n\n<ol>\n<li>Run existing local <em>.jar</em> file from Kotlin project on the old MBP.</li>\n<li>Clone Kotlin project from GitHub repository into local IntelliJ project on new MBP.</li>\n<li>Build <em>.jar</em> on new MBP. </li>\n<li>Run <em>.jar</em> on new MBP. </li>\n<li>Host <em>.jar</em> on Google AppEngine instance.</li>\n</ol>\n\n<p><strong>Observed</strong></p>\n\n<ol>\n<li>Running <em>.jar</em> on existing MBP works as expected.</li>\n<li>Running <code>main</code> method with the same code runs intermittently on the new MBP after the GitHub repo is cloned locally.</li>\n</ol>\n\n<h1>Error</h1>\n\n<p><strong>The <code>Main</code> method runs on the old MBP as expected, but not on the new MBP with the following error.</strong> </p>\n\n<blockquote>\n  <p>Exception in thread \"Timer-0\" com.google.cloud.storage.StorageException: 401 Unauthorized\n      at com.google.cloud.storage.spi.v1.HttpStorageRpc.translate(HttpStorageRpc.java:229)\n      at com.google.cloud.storage.spi.v1.HttpStorageRpc.create(HttpStorageRpc.java:310)\n      at com.google.cloud.storage.StorageImpl$3.call(StorageImpl.java:196)\n      at com.google.cloud.storage.StorageImpl$3.call(StorageImpl.java:193)\n      at com.google.api.gax.retrying.DirectRetryingExecutor.submit(DirectRetryingExecutor.java:105)\n      at com.google.cloud.RetryHelper.run(RetryHelper.java:76)\n      at com.google.cloud.RetryHelper.runWithRetries(RetryHelper.java:50)\n      at com.google.cloud.storage.StorageImpl.internalCreate(StorageImpl.java:192)\n      at com.google.cloud.storage.StorageImpl.create(StorageImpl.java:154)\n      at content.SaveContentKt.saveContent(SaveContent.kt:38)\n      at content.ContentTasks.generateContent(ContentTasks.kt:55)\n      at content.ContentTasks.run(ContentTasks.kt:41)\n      at java.base/java.util.TimerThread.mainLoop(Timer.java:556)\n      at java.base/java.util.TimerThread.run(Timer.java:506)\n  Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized\n      at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:150)\n      at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:113)\n      at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:40)\n      at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:554)\n      at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:474)\n      at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:591)\n      at com.google.cloud.storage.spi.v1.HttpStorageRpc.create(HttpStorageRpc.java:307)\n      ... 12 more</p>\n</blockquote>\n\n<h2>Configuration</h2>\n\n<p>The <em>gradle-wrapper.properties</em> <strong>Gradle</strong>, IntelliJ Preferences <strong>Gradle JVM</strong>, Project <strong>SDK</strong>, Run/Debug Configurations <strong>JRE</strong>, and Project <strong>language level</strong> versions are the same across both machines.</p>\n\n<p><em>Preferences</em> > <em>Gradle</em></p>\n\n<ul>\n<li><p><em>Use Gradle from:</em> <code>'gradle-wrapper.properties' file</code></p></li>\n<li><p><em>Gradle JVM:</em> <code>Library/Java/JavaVirtualMachines/12.0.1</code></p></li>\n</ul>\n\n<p><em>File</em> > <em>Project Structure...</em> > <em>Project</em></p>\n\n<ul>\n<li><em>Project SDK:</em> <code>12.0.1</code></li>\n<li><em>Project language level:</em> <code>11</code></li>\n</ul>\n\n<p><em>Running .jar file</em>: <em>Project Structure</em> > <em>Project Settings</em> > <em>Artifacts</em> > <em>Add</em> > <em>JAR</em> > <em>From modules with dependencies...</em></p>\n\n<ul>\n<li><em>Module:</em> <code>coinverse-media.main</code></li>\n<li><em>Main Class:</em> <code>Initialization</code></li>\n</ul>\n\n<p>Lastly, build artifact and run <em>.jar</em> file.</p>\n\n<p><em>build.gradle</em></p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.61'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nplugins {\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.2.51'\n}\n\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n    implementation 'com.squareup.retrofit2:retrofit:2.7.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.7.0'\n    implementation 'com.squareup.retrofit2:adapter-rxjava:2.7.0'\n    implementation 'com.google.firebase:firebase-admin:6.12.0'\n    implementation 'com.google.cloud:google-cloud-storage:1.102.0'\n    implementation 'com.google.apis:google-api-services-youtube:v3-rev20190827-1.30.1'\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<h1>Attempted Solutions</h1>\n\n<ol>\n<li><em>Invalidate Caches / Restart...</em>: This appears to fix the issue for a few times running the <code>Main</code> method, then the error continues to show.</li>\n<li><code>./gradlew clean build</code></li>\n<li>Gradle > Reimport All Gradle Projects</li>\n<li>Updating to the latest <a href=\"https://gradle.org/releases/\" rel=\"nofollow noreferrer\">Gradle version</a>.</li>\n<li>Ensure existing MBP and new MBP are running on the same IntelliJ/Project/Run configurations.</li>\n<li>Potentially related build dependency conflict issue: <a href=\"https://stackoverflow.com/questions/52881622/guava-dependency-breaking-jar-built-with-kotlin\">Guava Dependency Breaking Jar Built With Kotlin</a>.</li>\n</ol>\n\n<h1>Build Data</h1>\n\n<ul>\n<li><a href=\"https://scans.gradle.com/s/exa2ynrifkfua\" rel=\"nofollow noreferrer\">Build scan results</a></li>\n<li>Stack trace</li>\n</ul>\n\n<blockquote>\n  <p>6:09:42 PM: Executing task 'assemble'...</p>\n  \n  <p>Task :compileKotlin UP-TO-DATE</p>\n  \n  <p>Task :compileJava NO-SOURCE</p>\n  \n  <p>Task :processResources NO-SOURCE</p>\n  \n  <p>Task :classes UP-TO-DATE</p>\n  \n  <p>Task :inspectClassesForKotlinIC UP-TO-DATE</p>\n  \n  <p>Task :jar UP-TO-DATE</p>\n  \n  <p>Task :assemble UP-TO-DATE</p>\n  \n  <p>BUILD SUCCESSFUL in 75ms\n  3 actionable tasks: 3 up-to-date\n  6:09:42 PM: Task execution finished 'assemble'.</p>\n</blockquote>\n\n<ul>\n<li>Hidden files\n<a href=\"https://i.stack.imgur.com/T4Piy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T4Piy.png\" alt=\"enter image description here\"></a></li>\n</ul>\n"}, {"tags": ["java", "android", "kotlin", "android-developer-api"], "comments": [{"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1578476660, "post_id": 59524839, "comment_id": 105447515, "body": "added answer to all your questions see this - <a href=\"https://stackoverflow.com/a/59589825/9640177\">stackoverflow.com/a/59589825/9640177</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2728, "user_id": 10309342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e95623d18e7fff6249a8f4f922a9b22?s=128&d=identicon&r=PG&f=1", "display_name": "gehbiszumeis", "link": "https://stackoverflow.com/users/10309342/gehbiszumeis"}, "edited": false, "score": 0, "creation_date": 1601456920, "post_id": 59561143, "comment_id": 113411306, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/27279615\">From Review</a>"}], "tags": [], "owner": {"reputation": 6426, "user_id": 4471715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5026f58744339680af12b163aad259?s=128&d=identicon&r=PG&f=1", "display_name": "A STEFANI", "link": "https://stackoverflow.com/users/4471715/a-stefani"}, "is_accepted": false, "score": 3, "last_activity_date": 1578500337, "last_edit_date": 1578500337, "creation_date": 1577958066, "answer_id": 59561143, "question_id": 59524839, "link": "https://stackoverflow.com/questions/59524839/is-it-possible-to-pause-any-video-mediaplayer-app-in-android-when-pull-down-th/59561143#59561143", "title": "Is it possible to pause any video (mediaplayer) APP in Android when pull down the notification panel?", "body": "<p><strong>Assuming</strong> that the Android <strong>device use the default</strong> <a href=\"https://developer.android.com/reference/android/media/MediaPlayer\" rel=\"nofollow noreferrer\">MediaPlayer</a>, according to this <a href=\"https://developer.android.com/reference/android/media/MediaPlayer#StateDiagram\" rel=\"nofollow noreferrer\">state diagram</a>, you may use the native <code>pause</code> and <code>stop</code> state.</p>\n\n<p>If you only wan't to stop sound, you may probably change the sound volume using a <a href=\"https://developer.android.com/reference/android/media/VolumeAutomation\" rel=\"nofollow noreferrer\">VolumeAutomation</a> ?</p>\n"}, {"tags": [], "owner": {"reputation": 1320, "user_id": 5502638, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cMg8M.jpg?s=128&g=1", "display_name": "Akash Dubey", "link": "https://stackoverflow.com/users/5502638/akash-dubey"}, "is_accepted": true, "score": 10, "last_activity_date": 1577961350, "creation_date": 1577961350, "answer_id": 59561899, "question_id": 59524839, "link": "https://stackoverflow.com/questions/59524839/is-it-possible-to-pause-any-video-mediaplayer-app-in-android-when-pull-down-th/59561899#59561899", "title": "Is it possible to pause any video (mediaplayer) APP in Android when pull down the notification panel?", "body": "<p>You can use below method for detecting the notification panel pull, </p>\n\n<p>In your manifest file </p>\n\n<pre><code> &lt;uses-permission android:name=\"android.permission.EXPAND_STATUS_BAR\" /&gt;\n</code></pre>\n\n<p>In your activity override the <code>onWindowFocusChanged()</code> and write the below code. </p>\n\n<p>This uses the permission </p>\n\n<pre><code>@Override\npublic void onWindowFocusChanged(boolean hasFocus)\n{\n    try\n    {\n        if(!hasFocus)\n        {\n            Object service  = getSystemService(\"statusbar\");\n            Class&lt;?&gt; statusbarManager = Class.forName(\"android.app.StatusBarManager\");\n            Method collapse = statusbarManager.getMethod(\"collapse\");\n            collapse .setAccessible(true);\n            collapse .invoke(service);\n        }\n    }\n    catch(Exception ex)\n    {\n        if(!hasFocus)\n        {\n            try {\n                Object service  = getSystemService(\"statusbar\");\n                Class&lt;?&gt; statusbarManager = Class.forName(\"android.app.StatusBarManager\");\n                Method collapse = statusbarManager.getMethod(\"collapse\");\n                collapse .setAccessible(true);\n                collapse .invoke(service);\n\n            } catch (Exception e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();                \n            }\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Then in your app request for audio focus, refer below link </p>\n\n<p><a href=\"https://developer.android.com/guide/topics/media-apps/audio-focus#java\" rel=\"noreferrer\">https://developer.android.com/guide/topics/media-apps/audio-focus#java</a></p>\n\n<p>This will pause audio access for all other apps.</p>\n"}, {"tags": [], "owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "is_accepted": false, "score": 3, "last_activity_date": 1578476618, "last_edit_date": 1578476618, "creation_date": 1578133511, "answer_id": 59589825, "question_id": 59524839, "link": "https://stackoverflow.com/questions/59524839/is-it-possible-to-pause-any-video-mediaplayer-app-in-android-when-pull-down-th/59589825#59589825", "title": "Is it possible to pause any video (mediaplayer) APP in Android when pull down the notification panel?", "body": "<p>There are two parts to the solution</p>\n\n<ol>\n<li>detecting notification panel pull</li>\n<li>pausing any media playing app</li>\n</ol>\n\n<p>For detecting notification panel pull you may employ the method suggested <a href=\"https://stackoverflow.com/a/59561899/9640177\">by Akash</a> or same code <a href=\"https://stackoverflow.com/a/16297360/9640177\">here</a> by Lalith. </p>\n\n<blockquote>\n  <p>In your manifest file</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.EXPAND_STATUS_BAR\" /&gt;\n</code></pre>\n  \n  <p>In your activity override the onWindowFocusChanged() and write the below code.</p>\n\n<pre><code>@Override\npublic void onWindowFocusChanged(boolean hasFocus)\n{\n    try\n    {\n        if(!hasFocus)\n        {\n            Object service  = getSystemService(\"statusbar\");\n            Class&lt;?&gt; statusbarManager = Class.forName(\"android.app.StatusBarManager\");\n            Method collapse = statusbarManager.getMethod(\"collapse\");\n            collapse .setAccessible(true);\n            collapse .invoke(service);\n        }\n    }\n    catch(Exception ex)\n    {\n        if(!hasFocus)\n        {\n            try {\n                Object service  = getSystemService(\"statusbar\");\n                Class&lt;?&gt; statusbarManager = Class.forName(\"android.app.StatusBarManager\");\n                Method collapse = statusbarManager.getMethod(\"collapse\");\n                collapse .setAccessible(true);\n                collapse .invoke(service);\n\n            } catch (Exception e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();                \n            }\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n</blockquote>\n\n<p>For the second part all well designed media players implement Audio Focus Change Listeners. Thus to pause all media player apps you can request temporary or full audio focus depending on whether you want to let the apps play again as soon as notification panel is collapsed.</p>\n\n<p>Use following</p>\n\n<pre><code>AudioManager audioManager = (AudioManager) Context.getSystemService(Context.AUDIO_SERVICE);\nplaybackAttributes = new AudioAttributes.Builder()\n    .setUsage(AudioAttributes.USAGE_GAME)\n    .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)\n    .build();\nfocusRequest = new AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN)\n    // replace AUDIOFOCUS_GAIN with AUDIOFOCUS_GAIN_TRANSIENT if you want to pause and again resume when notification panel collapsed\n    .setAudioAttributes(playbackAttributes)\n    .setAcceptsDelayedFocusGain(true)\n    .setOnAudioFocusChangeListener(afChangeListener, handler)\n    .build();\n// to requestAudioFocus and pause other media apps\naudioManager.requestAudioFocus(focusRequest);\n\n// to resume again in case you requested AUDIOFOCUS_GAIN_TRANSIENT\naudioManager.abandonAudioFocus(afChangeListener);\n</code></pre>\n\n<p>Don't forget to implement AudioFocusChangeListener</p>\n\n<pre><code>AudioManager.OnAudioFocusChangeListener afChangeListener = new AudioManager.OnAudioFocusChangeListener() {\n    @Override\n    public void onAudioFocusChange(int focusChange) {\n        // leave this empty if you don't need to handle audio focus for your app\n    }\n};\n</code></pre>\n\n<blockquote>\n  <p>Is there a way that I can call the onPause function of any foreground App from the SystemUI process?</p>\n</blockquote>\n\n<p>As far as I have researched system ui process is not accessible. However, you can launch an <strong>activity with transparent theme</strong>. </p>\n\n<p>In your manifest</p>\n\n<pre><code>&lt;activity android:name=\".your.activity\" android:theme=\"@android:style/Theme.Translucent.NoTitleBar\" /&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/2177450/9640177\">see this</a> and I have also personally tested creating transparent activity.</p>\n\n<p>This means that the activity on top now is your transparent activity and the onPause method of the other activity will naturally be called. Once the notification panel is collapsed you can destroy this activity. And to be on safe side you can also set onTouch listener by creating an empty view that feels the screen which should destroy the activity onTouch. </p>\n"}], "owner": {"reputation": 19827, "user_id": 1150712, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qkWxm.png?s=128&g=1", "display_name": "zhangxaochen", "link": "https://stackoverflow.com/users/1150712/zhangxaochen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 2, "accepted_answer_id": 59561899, "answer_count": 3, "score": 11, "last_activity_date": 1612069311, "creation_date": 1577670288, "last_edit_date": 1612069311, "question_id": 59524839, "link": "https://stackoverflow.com/questions/59524839/is-it-possible-to-pause-any-video-mediaplayer-app-in-android-when-pull-down-th", "title": "Is it possible to pause any video (mediaplayer) APP in Android when pull down the notification panel?", "body": "<p>Assume I have the AOSP source code, How can I pause the APP in the foreground when pulling down the notification panel? I've googled and find an APP can listen the event <code>onWindowFocusChange</code> and take some action proactively, but how can I pause <strong>ANY</strong> APP when pulling down the notification panel, without modify every APP respectively (which is impractical)?</p>\n\n<p>Is there a way that I can call the <code>onPause</code> function of any foreground App from the SystemUI process?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 127466, "user_id": 1202025, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FlCCd.jpg?s=128&g=1", "display_name": "\u03c1\u044f\u03c3\u0455\u03c1\u0454\u044f K", "link": "https://stackoverflow.com/users/1202025/%cf%81%d1%8f%cf%83%d1%95%cf%81%d1%94%d1%8f-k"}, "edited": false, "score": 0, "creation_date": 1577669767, "post_id": 59524790, "comment_id": 105220558, "body": "Use <code>setArguments</code> of Fragment to send <code>nightId</code> ."}, {"owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "edited": false, "score": 0, "creation_date": 1577670052, "post_id": 59524790, "comment_id": 105220607, "body": "Use <code>dashboardViewModel</code> in your fragment and observe the nightId"}, {"owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "edited": false, "score": 0, "creation_date": 1577670688, "post_id": 59524790, "comment_id": 105220708, "body": "Can you share more code of your fragment and adapter"}, {"owner": {"reputation": 69, "user_id": 7306139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86addd40587e322a42cbe38cfc8cdf3b?s=128&d=identicon&r=PG&f=1", "display_name": "Oooha", "link": "https://stackoverflow.com/users/7306139/oooha"}, "edited": false, "score": 1, "creation_date": 1577670713, "post_id": 59524790, "comment_id": 105220711, "body": "I assume you wanted to pass the nightId which you got through Counter listener from the dashboard fragment to the other fragment .If so ,if other fragment is in the same activity as dashboard fragment you can use interface to communicate with the fragments .it will be better if you share more code."}], "answers": [{"tags": [], "owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577673472, "creation_date": 1577673472, "answer_id": 59525090, "question_id": 59524790, "link": "https://stackoverflow.com/questions/59524790/sharing-recyclerview-item-id-with-another-fragment/59525090#59525090", "title": "Sharing recyclerview item ID with another fragment", "body": "<ol>\n<li><p>In your recyclerview </p>\n\n<pre><code> class RecipeRecyclerAdapter(\n  mFragmentCommunication: FragmentCommunication\n ) :\n RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() {\n\n\n private var mFragmentCommunication: FragmentCommunication? = null\n\n\n init {\nthis.mFragmentCommunication =mFragmentCommunication\n\n      }\n\n override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): \n  RecyclerView.ViewHolder {\n\n        view = LayoutInflater.from(parent.context)\n            .inflate(\n                com.broadcast.recipeslistapp.R.layout.layout_recipe_list_item,\n                parent,\n                false\n            )\n          return RecipeViewHolder(view)\n\n    }\n\n\n  }\n\noverride fun getItemCount(): Int {\n   if (mRecipes.isNullOrEmpty()) {\n    return 0\n   } else {\n    return mRecipes!!.size\n}\n}\n\noverride fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) {\n\n\nholder.itemView.setOnClickListener {\n    mFragmentCommunication!!.PassNightId(nightId = 1) //value of nightId\n   }\n\n  }\n\n\ninterface FragmentCommunication {\nfun PassNightId(nightId: Int)\n}\n</code></pre></li>\n</ol>\n\n<p>Fragment A from where you want to send data :</p>\n\n<pre><code>class RecipeListActivity : BaseActivity(),\nRecipeRecyclerAdapter.FragmentCommunication {\n\nprivate lateinit var layoutManager: LinearLayoutManager\n\n\n}\n\nprivate fun initRecyclerView() {\n    mAdapter = RecipeRecyclerAdapter( this)\n    val itemDecorator = VerticalSpacingItemDecorator(30);\n    recipe_list.addItemDecoration(itemDecorator);\n    recipe_list.adapter = mAdapter\n    layoutManager = LinearLayoutManager(this);\n    recipe_list.layoutManager = layoutManager\n}\n\n\noverride fun PassNightId(nightId: Int) {\n    val testFragment = TestFragment()\n    val bundle = Bundle()\n    bundle.putString(\"nightId\", \"$nightId\")\n    testFragment.arguments = bundle\n    supportFragmentManager.beginTransaction().replace(R.id.containerId,testFragment).commit()\n\n   }\n  }\n</code></pre>\n\n<p>Fragment B where you want to getData :</p>\n\n<pre><code> class TestFragment  : Fragment()\n{\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    val nightId =arguments?.getString(\"nightId\")\n\n}\noverride fun onCreateView(\n    inflater: LayoutInflater,\n    container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    return inflater.inflate(R.layout.test_fragment,container,false)\n}\n }\n</code></pre>\n\n<p>This is how you can send data from on fragment to another fragment.</p>\n"}], "owner": {"reputation": 45, "user_id": 12442162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb5cf426f7c1aff667aa581a9daf48f?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar J.", "link": "https://stackoverflow.com/users/12442162/edgar-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577691604, "creation_date": 1577669625, "last_edit_date": 1577691604, "question_id": 59524790, "link": "https://stackoverflow.com/questions/59524790/sharing-recyclerview-item-id-with-another-fragment", "title": "Sharing recyclerview item ID with another fragment", "body": "<p>Currently I have a recyclerview adapter that gets data from the database and displays it in the dashboard fragment. Once the item is clicked, I want to pass the item id to the details fragment to get the correct items information on the detailed view. How can I pass this ID to the detailed fragment?</p>\n\n<p><strong>Dashboard Fragment</strong>  </p>\n\n<pre><code>class DashboardFragment : Fragment() {\n\n    private lateinit var viewModel: DashboardViewModel\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        // Get a reference to the binding object and inflate the fragment views.\n        val binding:  DashboardFragmentBinding = DataBindingUtil.inflate(\n                inflater, R.layout.dashboard_fragment, container, false)\n\n        val application = requireNotNull(this.activity).application\n\n        val dataSource = NumberDatabase.getInstance(application).numberDatabaseDao\n\n        val viewModelFactory = DashboardViewModelFactory(dataSource, application)\n\n\n        // Get a reference to the ViewModel associated with this fragment.\n        val dashboardViewModel =\n                ViewModelProviders.of(\n                        this, viewModelFactory).get(DashboardViewModel::class.java)\n\n        // To use the View Model with data binding, you have to explicitly\n        // give the binding object a reference to it.\n        binding.dashboardViewModel = dashboardViewModel\n\n        val adapter = CounterAdapter(CounterListener { nightId -&gt;\n            dashboardViewModel.onCountClicked(nightId)\n        })\n\n\n        binding.counterList.adapter = adapter\n\n        dashboardViewModel.counts.observe(viewLifecycleOwner, Observer {\n            it?.let {\n                adapter.submitList(it)\n            }\n        })\n}\n</code></pre>\n\n<p><strong>Adapter</strong></p>\n\n<pre><code>class CounterAdapter (val clickListener: CounterListener): ListAdapter&lt;Number, CounterAdapter.ViewHolder&gt;(NightDiffCallback()) {\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n        holder.bind(getItem(position)!!, clickListener)\n    }\n\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        return ViewHolder.from(parent)\n    }\n\n\n    class ViewHolder private constructor(val binding: ListItemCounterBinding) : RecyclerView.ViewHolder(binding.root){\n\n        fun bind(item: Number, clickListener: CounterListener) {\n            binding.night = item\n            binding.clickListener = clickListener\n\n            binding.executePendingBindings()\n        }\n\n        companion object {\n            fun from(parent: ViewGroup): ViewHolder {\n                val layoutInflater = LayoutInflater.from(parent.context)\n                val binding = ListItemCounterBinding.inflate(layoutInflater, parent, false)\n                return ViewHolder(binding)\n            }\n        }\n    }\n}\n\nclass CounterListener(val clickListener: (nightId: Long) -&gt; Unit) {\n    fun onClick(night: Number) = clickListener(night.nightId)\n    }    \n</code></pre>\n"}, {"tags": ["kotlin", "android-mapview", "implements"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11235325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJ35nzLbrSo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYsQocULrxZZ195q463A3cmDX5rw/mo/photo.jpg?sz=128", "display_name": "YIDE", "link": "https://stackoverflow.com/users/11235325/yide"}, "edited": false, "score": 0, "creation_date": 1577752275, "post_id": 59525427, "comment_id": 105246615, "body": "thanks your explanation, I am a beginner and I really need that."}], "tags": [], "owner": {"reputation": 5062, "user_id": 1197251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f988c493109880ba789886bfe5c0514?s=128&d=identicon&r=PG", "display_name": "dominicoder", "link": "https://stackoverflow.com/users/1197251/dominicoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1578087480, "last_edit_date": 1578087480, "creation_date": 1577676875, "answer_id": 59525427, "question_id": 59524557, "link": "https://stackoverflow.com/questions/59524557/google-mapview-implements-onmapreadycallback-with-kotlin/59525427#59525427", "title": "Google MapView implements OnMapReadyCallback with Kotlin", "body": "<p><a href=\"https://developers.google.com/android/reference/com/google/android/gms/maps/OnMapReadyCallback\" rel=\"nofollow noreferrer\"><code>OnMapReadyCallback</code></a> is an interface that has a single method <code>onMapReady</code>. What the compiler is telling you is that when you implement an interface, if your class is itself not an interface nor abstract, you have to declare implementations for the methods defined in the interface. So you would update your activity like this:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), OnMapReadyCallback{\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n\n    override fun onMapReady(map: GoogleMap) {\n        // Add implementation here\n    }\n}\n</code></pre>\n\n<p>This might solve this particular issue, but it sounds like you might have to read up on interfaces and how they work <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow noreferrer\">in Kotlin</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow noreferrer\">in Java</a>.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 3, "user_id": 11235325, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rJ35nzLbrSo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYsQocULrxZZ195q463A3cmDX5rw/mo/photo.jpg?sz=128", "display_name": "YIDE", "link": "https://stackoverflow.com/users/11235325/yide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "accepted_answer_id": 59525427, "answer_count": 1, "score": 0, "last_activity_date": 1578087480, "creation_date": 1577666412, "question_id": 59524557, "link": "https://stackoverflow.com/questions/59524557/google-mapview-implements-onmapreadycallback-with-kotlin", "title": "Google MapView implements OnMapReadyCallback with Kotlin", "body": "<p>I use a EmptyActivity and want put a MapView in MainActivity, I think I need implements OnMapReadyCallback, This is my code.</p>\n\n<pre><code>package com.example.myapplication\nimport android.os.Bundle\nimport androidx.appcompat.app.AppCompatActivity\nimport com.google.android.gms.maps.OnMapReadyCallback\n\nclass MainActivity : AppCompatActivity(), OnMapReadyCallback{\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n    }\n}\n</code></pre>\n\n<p>Why I got this\nerror: Class 'MainActivity' is not abstract and does not implement abstract member public abstract fun onMapReady(p0: GoogleMap!): Unit defined in com.google.android.gms.maps.OnMapReadyCallback.</p>\n"}, {"tags": ["android", "arrays", "list", "kotlin", "random"], "comments": [{"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 1, "creation_date": 1577662635, "post_id": 59524217, "comment_id": 105219439, "body": "The question is not clear. What do you want to do? If you want to select a random image from the array you don&#39;t need the list, but only a single number: <code>imageView.setImageResource(array[Random.nextInt(0, 5)])</code>."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "edited": false, "score": 0, "creation_date": 1577662966, "post_id": 59524217, "comment_id": 105219489, "body": "No, I don&#39;t want it to be random. I want to use from pre-created list by specific order like from <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.random/-random/index.html\" rel=\"nofollow noreferrer\">this</a> list."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577663123, "post_id": 59524285, "comment_id": 105219506, "body": "Thanks for answer, but I want to create list before, and use by order of that list. For example, if list is <code>1,3,9,7</code>and I use it in <code>setOnClickListener()</code>, on every click it should give me images by order <code>1,3,9,7</code>."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577663596, "post_id": 59524285, "comment_id": 105219577, "body": "If you&#39;re curious why I want to do this, look at <a href=\"https://stackoverflow.com/questions/59523159/how-to-solve-latency-issue-in-quiz-application\">this</a>. My goal is to set values for questions before quiz."}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577663719, "post_id": 59524285, "comment_id": 105219595, "body": "@vasik988 <code>ImageView.setImageResource()</code> takes only one argument, do you have more than one <code>ImageView</code> or would like to use a single one and replace every image with a new one according to the list of indices?"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577663807, "post_id": 59524285, "comment_id": 105219611, "body": "Replace every image with a new one according to the list of indices"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577665816, "post_id": 59524285, "comment_id": 105219966, "body": "Ok, but I don&#39;t really understand how to use <code>randomValues     .map { array[it] }     .forEach { imageView.setImageResource(it) }</code> in <code>setOnClickListener()</code>. If I press on imageView, nothing changes."}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577704836, "post_id": 59524285, "comment_id": 105229504, "body": "@vasik988 Putting the above code into <code>setOnClickListener</code> either as a lambda or a separate function should do the work. The problem might be however, that all the changes are applied faster than the UI is able to respond and in the end only the last transition will be noticeable. Given the fact you have only 5 possibilities, it may occur that the last drawable is the same as the first one quite often, so it appears like nothing has happened. I assumed you have already figured how to handle this problem as that hasn&#39;t seem like your concern."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577708133, "post_id": 59524285, "comment_id": 105230872, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/205077/discussion-between-vasik988-and-jsamol\">continue this discussion in chat</a>."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577743593, "post_id": 59524285, "comment_id": 105244562, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/205114/discussion-between-prako2-and-jsamol\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "is_accepted": false, "score": 1, "last_activity_date": 1577665202, "last_edit_date": 1577665202, "creation_date": 1577662962, "answer_id": 59524285, "question_id": 59524217, "link": "https://stackoverflow.com/questions/59524217/how-to-apply-random-list-of-numbers-for-selection-from-array-to-select-image/59524285#59524285", "title": "How to apply random list of numbers for selection from array to select image?", "body": "<p>If you'd like to select simply a random element from the array, you can use the <code>Array.random()</code> method which just <em>returns a random element from the array</em>:</p>\n\n<pre><code>var array = intArrayOf(R.drawable.cat1,R.drawable.cat2,R.drawable.cat3,R.drawable.cat4,R.drawable.cat5)\nimageView.setImageResource(array.random())\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>If you want to select a list of resources based on a randomly generated list of indices, you can achieve this by transforming every index into the right resource. Then you can perform your action on every selected item using the <code>forEach</code> method:</p>\n\n<pre><code>var array = intArrayOf(R.drawable.cat1,R.drawable.cat2,R.drawable.cat3,R.drawable.cat4,R.drawable.cat5)\nval randomValues = List(15) { Random.nextInt(0, 5) }\n\nrandomValues\n    .map { array[it] }\n    .forEach { imageView.setImageResource(it) }\n</code></pre>\n\n<p>Basically your approach failed because you tried to use the entire <code>randomValues</code> list as a single index value. Instead you should iterate over the list in one way or another and select the resource for each randomly generated number.</p>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 0, "creation_date": 1577715066, "post_id": 59531960, "comment_id": 105233929, "body": "Thank you but it&#39;s not actually what I want. As I see, you use quantity of elements of <code>randomValues</code> but actually elements from array are selected by order (they are not randomly created). &quot;what&#39;s the point?&quot; - See linked post. I have latency problem with checking images, so I want to pre-create random list and check that list to get all right answers. I would really appreciate if you know I way how to solve that problem."}, {"owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "reply_to_user": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "edited": false, "score": 1, "creation_date": 1577724035, "post_id": 59531960, "comment_id": 105237789, "body": "Sorry, there was a mistake. I corrected the code from  <code>array[lastIndex]</code> to <code>array[randomValues[lastIndex]]</code>"}], "tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": true, "score": 1, "last_activity_date": 1577723960, "last_edit_date": 1577723960, "creation_date": 1577713785, "answer_id": 59531960, "question_id": 59524217, "link": "https://stackoverflow.com/questions/59524217/how-to-apply-random-list-of-numbers-for-selection-from-array-to-select-image/59531960#59531960", "title": "How to apply random list of numbers for selection from array to select image?", "body": "<p>If you want to select a new random image at each click you just need to do:</p>\n\n<pre><code>val array = intArrayOf(R.drawable.cat1, R.drawable.cat2, R.drawable.cat3, R.drawable.cat4, R.drawable.cat5)\n\n\nimageView.setOnClickListener {\n    imageView.setImageResource(array.random())\n}\n</code></pre>\n\n<p>If you absolutely need to use a predefined list of random values (what's the point?), then you need to track the last index you used. Something like:  </p>\n\n<pre><code>// in your class\nvar lastIndex = 0\nval randomValues = List(15) { Random.nextInt(0, 5) }\n\n// setting the listener\nval array = intArrayOf(R.drawable.cat1, R.drawable.cat2, R.drawable.cat3, R.drawable.cat4, R.drawable.cat5)\n\nimageView.setOnClickListener {\n    imageView.setImageResource(array[randomValues[lastIndex]])\n    lastIndex = (lastIndex + 1) % randomValues.size\n}\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 59531960, "answer_count": 2, "score": 0, "last_activity_date": 1578744666, "creation_date": 1577662352, "last_edit_date": 1578744666, "question_id": 59524217, "link": "https://stackoverflow.com/questions/59524217/how-to-apply-random-list-of-numbers-for-selection-from-array-to-select-image", "title": "How to apply random list of numbers for selection from array to select image?", "body": "<p>How to make list of random numbers and use it to set image from array?</p>\n\n<pre><code>val randomValues = List(15) { Random.nextInt(0, 5) }\nvar array = intArrayOf(R.drawable.cat1,R.drawable.cat2,R.drawable.cat3,R.drawable.cat4,R.drawable.cat5)\nimageView.setImageResource(array[randomValues])\n</code></pre>\n\n<p>I'm getting Type mismatch on <code>randomValues</code> in  <code>imageView.setImageResource(array[randomValues])</code>. <code>Required: Int and Found: List &lt;int&gt;</code>.</p>\n\n<h2>Edited</h2>\n\n<pre><code>val randomValues = List(15) { Random.nextInt(0, 5) }\n        var array = intArrayOf(R.drawable.cat1,R.drawable.cat2,R.drawable.cat3,R.drawable.cat4,R.drawable.cat5)\n\n\n        imageView.setOnClickListener {\n            randomValues\n                .map { array[it] }\n                .forEach { imageView.setImageResource(it) }\n        }\n</code></pre>\n"}, {"tags": ["java", "swing", "kotlin", "jpanel"], "answers": [{"tags": [], "owner": {"reputation": 306906, "user_id": 131872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG", "display_name": "camickr", "link": "https://stackoverflow.com/users/131872/camickr"}, "is_accepted": true, "score": 1, "last_activity_date": 1577662954, "creation_date": 1577662954, "answer_id": 59524280, "question_id": 59524210, "link": "https://stackoverflow.com/questions/59524210/prevent-jpanel-subcomponents-from-being-displayed-twice/59524280#59524280", "title": "Prevent JPanel subcomponents from being displayed twice", "body": "<p>Don't know anything about Kotlin, but I would guess the problem is:</p>\n\n<pre><code>override fun paintComponent(g: Graphics) {\n    if (width != previousWidth || height != previousHeight) \n</code></pre>\n\n<p>The first statement when you override paintComponent(...) in Swing should be:</p>\n\n<pre><code>override fun paintComponent(g: Graphics) {\n    super.paintComponent(g); // added\n    if (width != previousWidth || height != previousHeight) \n</code></pre>\n\n<p>To make sure the background gets cleared so there are no painting artifacts.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8997478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 59524280, "answer_count": 1, "score": 1, "last_activity_date": 1577662954, "creation_date": 1577662273, "question_id": 59524210, "link": "https://stackoverflow.com/questions/59524210/prevent-jpanel-subcomponents-from-being-displayed-twice", "title": "Prevent JPanel subcomponents from being displayed twice", "body": "<p>I have a <code>JFrame</code> containing a <code>JPanel</code>. This <code>JPanel</code> has some more Components in it, like <code>JLabel</code>, <code>JTextField</code>, <code>JLabel</code>, and a <code>JFileChooser</code>.\nThese components are displaying properly where they should be, but they are also displaying at position <code>(0, 0)</code> in the window underneath what should be there. Whichever one was last focused is displayed on top:\n<a href=\"https://i.stack.imgur.com/tz9Yf.png\" rel=\"nofollow noreferrer\">(Image) The JFileChooser is displayed as a separate window, but also displayed underneath what is supposed to be displayed at <code>(0, 0)</code></a></p>\n\n<p>How do I prevent this from happening?</p>\n\n<hr>\n\n<p>Code: (some methods have been omitted to make code shorter. These are not relevant to issue.)</p>\n\n<pre><code>package com.kasad.pathfinder.mapmaker.graphics.components\n\nimport com.kasad.pathfinder.mapmaker.grid.Node\nimport java.awt.Color\nimport java.awt.FlowLayout\nimport java.awt.Graphics\nimport java.awt.event.*\nimport javax.swing.JButton\nimport javax.swing.JFileChooser\nimport javax.swing.JLabel\nimport javax.swing.JPanel\nimport javax.swing.filechooser.FileNameExtensionFilter\n\nclass DisplaySO : JPanel() {\n    companion object {\n        val WALKABLE_TILE_COLOR: Color = Color.WHITE\n        val WALL_TILE_COLOR: Color = Color.BLACK\n        val START_TILE_COLOR: Color = Color.GREEN\n        val END_TILE_COLOR: Color = Color.RED\n        val TILE_BORDER_COLOR: Color = Color.BLACK\n\n        const val GRID_MARGIN: Int = 50\n    }\n\n    private var nodes = arrayOf(    // Start with a 3x3 grid of walkable nodes\n        ... // Not relevant to issue (omitted)\n    )\n\n    // These variables (nodeSize, centerOffset[X/Y], grid[Height/Width]) are referred to as \"draw sizes\"\n    private var nodeSize = 0        // Size of each node\n    private var centerOffsetX = 0   // X offset to center grid\n    private var centerOffsetY = 0   // Y offset to center grid\n    private var gridWidth = 0      // The total width of the grid\n    private var gridHeight = 0     // The total height of the grid\n\n    private var previousWidth = 0   // Previous width of window\n    private var previousHeight = 0  // Previous height of window\n\n    private var startNode: Node? = null\n    private var endNode: Node? = null\n\n    private lateinit var prevMousedNode: Node   // Previous node selected by mouse\n    private var currentKeyPressed: Char? = null\n    private var currentMouseButton: Int? = null\n\n    private val widthBox = JNumberField(6)  // Create text boxes for grid width &amp; height input\n    private val heightBox = JNumberField(6) // |\n    private val widthBoxLabel = JLabel(\"Rows:\")     // Text box labels\n    private val heightBoxLabel = JLabel(\"Columns:\") // |\n    private val resizeButton = JButton(\"Resize\")    // Button to resize grid/process inputs\n    private val fileChooser = JFileChooser()\n    private val saveButton = JButton(\"Save to File\")\n\n    fun init() {\n        isDoubleBuffered = true\n        isVisible = true\n        isFocusable = true\n        layout = FlowLayout(FlowLayout.LEFT)\n\n        add(widthBoxLabel)\n        add(widthBox)\n        add(heightBoxLabel)\n        add(heightBox)\n        add(resizeButton)\n        add(saveButton)\n        resizeButton.addActionListener {\n            this@DisplaySO.requestFocusInWindow()\n            val newWidth: Int\n            val newHeight: Int\n            try {\n                newWidth = widthBox.value\n                newHeight = heightBox.value\n\n            } catch (e: NumberFormatException) {\n                println(\"Error: Invalid number\")\n                return@addActionListener\n            }\n            resizeGrid(newWidth, newHeight)\n        }\n        saveButton.addActionListener {  // When the save button is pressed,\n            saveGrid()                  // Save the grid to a file\n        }\n        resizeButton.isFocusable = false    // Set buttons as unfocusable (forces keystrokes to be processed by window)\n        saveButton.isFocusable = false      // |\n        fileChooser.apply {\n            dialogTitle = \"Choose file to save to...\"                                 // Window title\n            addChoosableFileFilter(FileNameExtensionFilter(\"Grid Map Files\", \"gmap\")) // Add a file extension filter and\n            fileFilter = choosableFileFilters[1]                                      // set it as the default\n            isMultiSelectionEnabled = false                                           // Only allow selecting one file\n        }\n\n        addKeyListener(object : KeyListener {\n            override fun keyPressed(e: KeyEvent) {\n                if ((e.keyChar in 'A'..'Z' || e.keyChar in 'a'..'z') &amp;&amp; currentKeyPressed != e.keyChar) {\n                    currentKeyPressed = e.keyChar\n                    println(e.keyChar)\n                }\n            }\n\n            override fun keyReleased(e: KeyEvent) {\n                if (currentKeyPressed == e.keyChar)\n                    currentKeyPressed = null\n            }\n\n            override fun keyTyped(e: KeyEvent?) {}\n        })\n        addMouseListener(object : MouseListener {\n            override fun mousePressed(e: MouseEvent) {\n                if (!this@DisplaySO.isFocusOwner)\n                    this@DisplaySO.requestFocusInWindow()\n                currentMouseButton = e.button\n                processMouseDown(e)\n            }\n\n            override fun mouseReleased(e: MouseEvent) {\n                if (currentMouseButton == e.button)\n                    currentMouseButton = null\n            }\n\n            override fun mouseEntered(e: MouseEvent?) {}\n            override fun mouseExited(e: MouseEvent?) {}\n            override fun mouseClicked(e: MouseEvent?) {}\n        })\n        addMouseMotionListener(object : MouseMotionListener {\n            override fun mouseMoved(e: MouseEvent?) {}\n\n            override fun mouseDragged(e: MouseEvent) {\n                processMouseDown(e)\n            }\n        })\n\n        nodeSize = (height - 2 * GRID_MARGIN) / nodes.size\n        repaint()\n    }\n\n    private fun resizeGrid(newGridWidth: Int, newGridHeight: Int) {\n        ... // Not relevant to issue (omitted)\n    }\n\n    private fun computeDrawSizes() {\n        ... // Not relevant to issue (omitted)\n    }\n\n    private fun drawGrid(g: Graphics) {\n        var nodePositionX: Int\n        var nodePositionY: Int\n        for (row in nodes) {\n            for (node in row) {\n                nodePositionX = node.gridX * nodeSize + centerOffsetX\n                nodePositionY = node.gridY * nodeSize + centerOffsetY\n                with(g) {\n                    color = when (true) {\n                        node.walkable -&gt; when {\n                            node.isStartNode -&gt; START_TILE_COLOR\n                            node.isEndNode -&gt; END_TILE_COLOR\n                            else -&gt; WALKABLE_TILE_COLOR\n                        }\n                        else -&gt; WALL_TILE_COLOR\n                    }\n                    fillRect(\n                        nodePositionX,\n                        nodePositionY,\n                        nodeSize,\n                        nodeSize\n                    )\n                    color = TILE_BORDER_COLOR\n                    drawRect(\n                        nodePositionX,\n                        nodePositionY,\n                        nodeSize,\n                        nodeSize\n                    )\n                }\n            }\n        }\n    }\n\n    private fun processMouseDown(e: MouseEvent) {\n        ... // Not relevant to issue (omitted)\n    }\n\n    private fun getNodeByPosition(x: Int, y: Int): Node? {\n        ... // Not relevant to issue (omitted)\n    }\n\n    @Throws(IllegalArgumentException::class)\n    private fun updateNode(node: Node, newStatus: Int) {\n        ... // Not relevant to issue (omitted)\n    }\n\n    private fun saveGrid() {\n        if (startNode == null || endNode == null) {\n            println(\"Error: must choose a start node and an end node\")\n            return\n        }\n        if (fileChooser.showSaveDialog(this) != JFileChooser.APPROVE_OPTION)\n            return\n        fileChooser.selectedFile.writeText(\n            gridToString()\n        )\n    }\n\n    private fun gridToString(): String {\n        ... // Not relevant to issue (omitted)\n    }\n\n    override fun paintComponent(g: Graphics) {\n        if (width != previousWidth || height != previousHeight) // If window has been resized,\n            computeDrawSizes()                                  // recalculate the draw sizes\n\n        drawGrid(g) // Draw the grid\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577660084, "post_id": 59523926, "comment_id": 105218995, "body": "First of all, you are trying to use <code>repository</code> during the initialization of the view model. By that time there is no way the property has been already injected. You have to either inject it in the constructor or init <code>data</code> lazily, e.g. using the <code>lazy</code> delegate. Secondly, how do you create a <code>MyViewModel</code> instance?"}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577687738, "post_id": 59523926, "comment_id": 105223869, "body": "@jsamol , I updated my question with <code>MyFragment</code> which shows how I created <code>MyViewModel</code> instance. Could you please give a code example for your answer?"}, {"owner": {"reputation": 4041, "user_id": 2023697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mo57V.jpg?s=128&g=1", "display_name": "Liem Vo", "link": "https://stackoverflow.com/users/2023697/liem-vo"}, "edited": false, "score": 0, "creation_date": 1577697025, "post_id": 59523926, "comment_id": 105226475, "body": "Did you try to add the annotation <code>@Inject</code> when you declare your viewmodel in the fragment?"}], "answers": [{"comments": [{"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577717359, "post_id": 59528107, "comment_id": 105234903, "body": "Thanks, can I ask further what is the root reason behind for creating a ViewModelFactory for dagger? Why can&#39;t dagger just provide the <code>MyRepository</code> if <code>MyRepository</code> has constructor injection annotation? What&#39;s so special in ViewModel that these steps are needed?"}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577718679, "post_id": 59528107, "comment_id": 105235424, "body": "Now I get error <code>lateinit property viewModelFactory has not been initialized </code> Is it because I should also do the <code>DaggerAppComponent</code> builder in <code>MyFragment</code> onCreate?  Currently it is in <code>MainActivity</code>"}, {"owner": {"reputation": 668, "user_id": 3882134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa84c99d616254a2396bcea21b77373?s=128&d=identicon&r=PG&f=1", "display_name": "BMacedo", "link": "https://stackoverflow.com/users/3882134/bmacedo"}, "reply_to_user": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577729914, "post_id": 59528107, "comment_id": 105239927, "body": "Regarding the new error you got, it is just as you said, you need to inject the component in the fragment in order for @Inject to work. Otherwise the factory will never be initialized."}, {"owner": {"reputation": 668, "user_id": 3882134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa84c99d616254a2396bcea21b77373?s=128&d=identicon&r=PG&f=1", "display_name": "BMacedo", "link": "https://stackoverflow.com/users/3882134/bmacedo"}, "reply_to_user": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577730080, "post_id": 59528107, "comment_id": 105239983, "body": "The special thing about the ViewModel is that you never call the constructor of the ViewModel yourself. The lifecycle of the viewModel is given internally by the ViewModelProviders. Therefore, if you have dependencies in your VM, you need a ViewModelFactory. And then you use dagger to init that factory."}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577730141, "post_id": 59528107, "comment_id": 105240014, "body": "I tried injecting the component in the fragment, but same error still..."}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577738098, "post_id": 59528107, "comment_id": 105242724, "body": "I updated my post again.  Is <code>ViewModelKey </code> thing really necessary? If you check @jsamol&#39;s answer, he doesn&#39;t mention it."}], "tags": [], "owner": {"reputation": 668, "user_id": 3882134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa84c99d616254a2396bcea21b77373?s=128&d=identicon&r=PG&f=1", "display_name": "BMacedo", "link": "https://stackoverflow.com/users/3882134/bmacedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577700559, "last_edit_date": 1577700559, "creation_date": 1577696402, "answer_id": 59528107, "question_id": 59523926, "link": "https://stackoverflow.com/questions/59523926/dagger-2-multi-module-project-inject-dependency-but-get-lateinit-property-rep/59528107#59528107", "title": "Dagger 2: multi-module project, inject dependency but get &quot;lateinit property repository has not been initialize&quot; error at runtime", "body": "<p>A few steps you'll need to use Dagger with the AAC ViewModel classes:</p>\n\n<ol>\n<li>You need to use constructor injection in your ViewModel class (as you're doing in the updated question)</li>\n<li>You will need a <a href=\"https://developer.android.com/reference/android/arch/lifecycle/ViewModelProvider.Factory\" rel=\"nofollow noreferrer\">ViewModelFactory</a> to tell the ViewModelProvider how to instantiate your ViewModel</li>\n<li>Finally, you will need to tell Dagger how to create your ViewModelFactory</li>\n</ol>\n\n<p>For the first step, pass the repository in the ViewModel constructor and annotate your view model class with <code>@Inject</code>:</p>\n\n<pre><code>class MyViewModel @Inject constructor(private val repository: MyRepository): ViewModel() {\n    val data = repository.getData()\n}\n</code></pre>\n\n<p>For the second and third steps, one easy way to create a generic ViewModelFactory for any ViewModels that you will have in your project, and also tell Dagger how to use it you can:</p>\n\n<p>Create a Singleton generic ViewModelFactory:</p>\n\n<pre><code>@Singleton\nclass ViewModelFactory @Inject constructor(private val viewModels: MutableMap&lt;Class&lt;out ViewModel&gt;, Provider&lt;ViewModel&gt;&gt;) :\n        ViewModelProvider.Factory {\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T =\n            viewModels[modelClass]?.get() as T\n}\n</code></pre>\n\n<p>Create a custom annotation to identify your ViewModels and let Dagger know that it needs to provide them:</p>\n\n<pre><code>@Target(\n    AnnotationTarget.FUNCTION,\n    AnnotationTarget.PROPERTY_GETTER,\n    AnnotationTarget.PROPERTY_SETTER\n)\n@kotlin.annotation.Retention(AnnotationRetention.RUNTIME)\n@MapKey\ninternal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n</code></pre>\n\n<p>Create a new module for your ViewModels:</p>\n\n<pre><code>@Module\nabstract class ViewModelModule {\n\n@Binds\ninternal abstract fun bindsViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory\n\n// Add any other ViewModel that you may have\n@Binds\n@IntoMap\n@ViewModelKey(MyViewModel::class)\ninternal abstract fun bindsMyViewModel(viewModel: MyViewModel): ViewModel\n}\n</code></pre>\n\n<blockquote>\n  <p>Don't forget to declare the new module in your dagger component</p>\n</blockquote>\n\n<p>And use the view model in your activity, instantiating it with the help of the ViewModelFactory:</p>\n\n<pre><code>class MyFragment : Fragment() {\n   @Inject\n   lateinit var viewModelFactory: ViewModelProvider.Factory\n   lateinit var viewModel: MyViewModel\n\n   override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        viewModel = ViewModelProviders.of(this, viewModelFactory).get(MyViewModel::class.java)\n        ...\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577717493, "post_id": 59528579, "comment_id": 105234963, "body": "You said <code>viewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)</code> a new MyViewModel instance is created outside Dagger&#39;s control. But <code>ViewModelProviders</code> is a <code>androidx</code> package thing, why it has to be bound with dagger in the 1st place? (imaging if I use another DI framework) or I don&#39;t use DI framework just use old tedious non DI way, does it mean then I couldn&#39;t use <code>ViewModelProviders</code> from <code>androidx</code> package then? I don&#39;t understand this comment from you, could you please clarify more?"}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577718688, "post_id": 59528579, "comment_id": 105235428, "body": "and...now I get error <code>lateinit property viewModelFactory has not been initialized </code>"}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577731482, "post_id": 59528579, "comment_id": 105240461, "body": "@Leem <i>a new MyViewModel instance is created outside Dagger&#39;s control</i> - I meant by that that it isn&#39;t created with any use of Dagger, that&#39;s why you need to provide this custom <code>ViewModelProvider.Factory</code>, to let Dagger interfere in the process."}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577731601, "post_id": 59528579, "comment_id": 105240504, "body": "@Leem <i>now I get error <code>lateinit property viewModelFactory has not been initialized</code></i> - you have to tell Dagger to inject into the fragment, just like you did with your activity. I left the appropriate code in my answer, but I assumed you moved the process of initializing the <code>AppComponent</code> to a custom <code>Application</code>, so you can use the same instance in every activity and fragment."}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577738021, "post_id": 59528579, "comment_id": 105242696, "body": "if I have moved the process of initializing the <code>AppComponent</code> to a custom <code>Application</code> e.g. <code>MyApplication</code>, do I still need to add <code>fun inject(fragment: Fragment)</code> inside <code>AppComponent</code> ? and if you check @BMacedo&#39;s answer, he mentioned a thing <code>ViewModelKey</code> which is not in your answer, is it necessary?"}, {"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "reply_to_user": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "edited": false, "score": 0, "creation_date": 1577738308, "post_id": 59528579, "comment_id": 105242779, "body": "@Leem Yes, you have to keep all the <code>fun inject(...)</code> methods for every activity and fragment you&#39;d like to inject; <i>and if you check @BMacedo&#39;s answer, he mentioned a thing ViewModelKey which is not in your answer, is it necessary?</i> - I&#39;ve mentioned there are 2 approaches of implementing <code>ViewModelProvider.Factory</code>, @BMacedo used the first one in his answer, I went with the second. In such case <code>ViewModelKey</code> is not necessary."}, {"owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "reply_to_user": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577738714, "post_id": 59528579, "comment_id": 105242913, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/205104/discussion-between-leem-and-jsamol\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "is_accepted": true, "score": 3, "last_activity_date": 1577699609, "last_edit_date": 1577699609, "creation_date": 1577698574, "answer_id": 59528579, "question_id": 59523926, "link": "https://stackoverflow.com/questions/59523926/dagger-2-multi-module-project-inject-dependency-but-get-lateinit-property-rep/59528579#59528579", "title": "Dagger 2: multi-module project, inject dependency but get &quot;lateinit property repository has not been initialize&quot; error at runtime", "body": "<p>In order to inject dependencies Dagger must be either:</p>\n\n<ul>\n<li>responsible for creating the object, or</li>\n<li>ask to perform an injection, just like in the activities or fragments, which are instantiated by the system:</li>\n</ul>\n\n<pre><code>DaggerAppComponent\n    .builder()\n    .coreComponent(coreComponent)\n    .build()\n    .inject(this)\n</code></pre>\n\n<p>In your first approach none of the above is true, a new <code>MyViewModel</code> instance is created outside Dagger's control: </p>\n\n<pre><code>viewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)\n</code></pre>\n\n<p>therefore the dependency doesn't even get initialized. Additionally, even if you'd perform the injection more manually, like in the activity, the code still would fail, because you are trying to reference the <code>repository</code> property during the initialization process of the object <code>val data = repository.getData()</code>, before the <code>lateinit var</code> gets a chance to be set. In such cases the <code>lazy</code> delegate comes handy:</p>\n\n<pre><code>class MyViewModel : ViewModel() {\n    @Inject\n    lateinit var repository: MyRepository\n\n    val data by lazy { repository.getData() }\n\n    ...\n}\n</code></pre>\n\n<p>However, the field injection isn't the most desirable way to perform a DI, especially when the injectable objects needs to know about it. You can inject your dependencies into <code>ViewModel</code>s using the construction injection, but it requires some additional setup. </p>\n\n<p>The problem lies in the way view models are created and managed by the Android SDK. They are created using a <code>ViewModelProvider.Factory</code> and the default one requires the view model to have non-argument constructor. So what you need to do to perform the constructor injection is mainly to provide your custom <code>ViewModelProvider.Factory</code>:</p>\n\n<pre><code>// injects the view model's `Provider` which is provided by Dagger, so the dependencies in the view model can be set\nclass MyViewModelFactory&lt;VM : ViewModel&gt; @Inject constructor(\n    private val viewModelProvider: @JvmSuppressWildcards Provider&lt;VM&gt; \n) : ViewModelProvider.Factory {\n\n    @Suppress(\"UNCHECKED_CAST\")\n     override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T = \n         viewModelProvider.get() as T\n}\n</code></pre>\n\n<p>(There are 2 approaches to implementing a custom <code>ViewModelProvider.Factory</code>, the first one uses a singleton factory which gets a map of all the view models' <code>Provider</code>s, the latter (the one above) creates a single factory for each view model. I prefer the second one as it doesn't require additional boilerplate and binding every view model in Dagger's modules.)</p>\n\n<p>Use the constructor injection in your view model:</p>\n\n<pre><code>class MyViewModel @Inject constructor(private val repository: MyRepository): ViewModel() {\n    val data = repository.getData()\n}\n</code></pre>\n\n<p>And then inject the <strong>factory</strong> into your activities or fragments and use it to create the view model:</p>\n\n<pre><code>@Component(modules = [AppModule::class], dependencies = [CoreComponent::class])\n@featureScope\ninterface AppComponent {\n    fun inject(activity: MainActivity)\n    fun inject(fragment: MyFragment)\n}\n\nclass MyFragment : Fragment() {\n\n   @Inject\n   lateinit var viewModelFactory: MyViewModelFactory&lt;MyViewModel&gt;\n\n   lateinit var viewModel: MyViewModel\n\n   override fun onAttach(context: Context) {\n      // you should create a `DaggerAppComponent` instance once, e.g. in a custom `Application` class and use it throughout all activities and fragments\n      (context.applicationContext as MyApp).appComponent.inject(this)\n      super.onAttach(context)\n   }\n\n   override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        viewModel = ViewModelProviders.of(this, viewModelFactory)[MyViewModel::class.java]\n        ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 13790, "user_id": 740018, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f3fa30f9aa9c60557a2e64ac73efee30?s=128&d=identicon&r=PG", "display_name": "Leem", "link": "https://stackoverflow.com/users/740018/leem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1687, "favorite_count": 2, "accepted_answer_id": 59528579, "answer_count": 2, "score": 4, "last_activity_date": 1577737880, "creation_date": 1577659327, "last_edit_date": 1577737880, "question_id": 59523926, "link": "https://stackoverflow.com/questions/59523926/dagger-2-multi-module-project-inject-dependency-but-get-lateinit-property-rep", "title": "Dagger 2: multi-module project, inject dependency but get &quot;lateinit property repository has not been initialize&quot; error at runtime", "body": "<p>Dagger version is 2.25.2.</p>\n\n<p>I have two Android project modules: <code>core</code> module &amp; <code>app</code> module.  </p>\n\n<p>In <code>core</code> module, I defined for dagger <code>CoreComponent</code> , </p>\n\n<p>In <code>app</code> module I have <code>AppComponent</code> for dagger.</p>\n\n<p><code>CoreComponet</code> in core project module:</p>\n\n<pre><code>@Component(modules = [MyModule::class])\n@CoreScope\ninterface CoreComponent {\n   fun getMyRepository(): MyRepository\n}\n</code></pre>\n\n<p>In core project module, I have a repository class, it doesn't belong to any dagger module but I use <code>@Inject</code> annotation next to its constructor:</p>\n\n<pre><code>class MyRepository @Inject constructor() {\n   ...\n}\n</code></pre>\n\n<p>My app component:</p>\n\n<pre><code>@Component(modules = [AppModule::class], dependencies = [CoreComponent::class])\n@featureScope\ninterface AppComponent {\n    fun inject(activity: MainActivity)\n}\n</code></pre>\n\n<p>In <code>MainActivity</code>:</p>\n\n<pre><code>class MainActivity: AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val coreComponent = DaggerCoreComponent.builder().build()\n\n        DaggerAppComponent\n                  .builder()\n                  .coreComponent(coreComponent)\n                  .build()\n                  .inject(this)\n     }\n\n}\n</code></pre>\n\n<p>My project is MVVM architecture, In general:</p>\n\n<ul>\n<li><p><code>MainActivity</code> hosts <code>MyFragment</code></p></li>\n<li><p><code>MyFragment</code> has a reference to <code>MyViewModel</code> </p></li>\n<li><p><code>MyViewModel</code> has dependency <code>MyRepository</code> (as mentioned above <code>MyRepository</code> is in <code>core</code> module)</p></li>\n</ul>\n\n<p>Here is <code>MyViewModel</code> :</p>\n\n<pre><code>class MyViewModel : ViewModel() {\n    // Runtime error: lateinit property repository has not been initialize\n    @Inject\n    lateinit var repository: MyRepository\n\n    val data = repository.getData()\n\n}\n</code></pre>\n\n<p><code>MyViewModel</code> is initialized in MyFragment:</p>\n\n<pre><code>class MyFragment : Fragment() {\n   lateinit var viewModel: MyViewModel\n\n   override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        viewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)\n        ...\n    }\n}\n</code></pre>\n\n<p>When I run my app, it crashes with runtime error:</p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property repository has not been initialize\n</code></pre>\n\n<p>The error tells me dagger dependency injection does't work with my setup. So, what do I miss? How to get rid of this error?</p>\n\n<p><strong>==== update =====</strong></p>\n\n<p>I tried :</p>\n\n<pre><code>class MyViewModel @Inject constructor(private val repository: MyRepository): ViewModel() {\n        val data = repository.getData()\n    }\n</code></pre>\n\n<p>Now when I run the app, I get new error:</p>\n\n<pre><code>Caused by: java.lang.InstantiationException: class foo.bar.MyViewModel has no zero argument constructor\n</code></pre>\n\n<p><strong>====== update 2 =====</strong></p>\n\n<p>Now, I created <code>MyViewModelFactory</code>:</p>\n\n<pre><code>class MyViewModelFactory @Inject constructor(private val creators: Map&lt;Class&lt;out ViewModel&gt;,\n                                            @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;): ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        val creator = creators[modelClass] ?: creators.entries.firstOrNull {\n            modelClass.isAssignableFrom(it.key)\n        }?.value ?: throw IllegalArgumentException(\"unknown model class $modelClass\")\n        try {\n            @Suppress(\"UNCHECKED_CAST\")\n            return creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n\n    }\n}\n</code></pre>\n\n<p>I updated MyFragment to be :</p>\n\n<pre><code>class MyFragment : Fragment() {\n   lateinit var viewModel: MyViewModel\n   @Inject\nlateinit var viewModelFactory: ViewModelProvider.Factory\n\n   override fun onAttach(context: Context) {\n    // inject app component in MyFragment\n    super.onAttach(context)\n    (context.applicationContext as MyApplication).appComponent.inject(this)\n}\n\n   override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        // I pass `viewModelFactory` instance here, new error here at runtime, complaining viewModelFactory has not been initialized\n        viewModel = ViewModelProviders.of(this, viewModelFactory).get(MyViewModel::class.java)\n        ...\n    }\n}\n</code></pre>\n\n<p>Now I run my app, I get new error:</p>\n\n<pre><code>kotlin.UninitializedPropertyAccessException: lateinit property viewModelFactory has not been initialized\n</code></pre>\n\n<p>What's still missing?</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 1, "creation_date": 1577667201, "post_id": 59523696, "comment_id": 105220165, "body": "I think you changed a type name in your example interface and missed updating it. &quot;Entity&quot; doesn&#39;t match &quot;Result&quot; or &quot;Params&quot;."}, {"owner": {"reputation": 436, "user_id": 6757836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486b3816c3a5a2a9273f9f2a45b83876?s=128&d=identicon&r=PG&f=1", "display_name": "TheYogi", "link": "https://stackoverflow.com/users/6757836/theyogi"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1577676401, "post_id": 59523696, "comment_id": 105221559, "body": "Yup, that&#39;s exactly what i did haha"}], "answers": [{"tags": [], "owner": {"reputation": 1600, "user_id": 1292745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGKY6.gif?s=128&g=1", "display_name": "gpunto", "link": "https://stackoverflow.com/users/1292745/gpunto"}, "is_accepted": false, "score": 2, "last_activity_date": 1577662387, "creation_date": 1577662387, "answer_id": 59524225, "question_id": 59523696, "link": "https://stackoverflow.com/questions/59523696/optional-generic-parameters-in-kotlin/59524225#59524225", "title": "Optional generic parameters in Kotlin", "body": "<p>I don't think you can do anything special with a single interface. \ud83e\udd37\u200d\u2642\ufe0f<br>\nThe one solution that comes to mind is creating a child interface with a single type parameter that overrides the <code>Unit</code> function delegating to a different one without parameters.<br>\nSomething like:</p>\n\n<pre><code>interface Parent1&lt;out Result&gt; : Parent&lt;Result, Unit&gt; {\n    override fun run(params: Unit): Result = run()\n    fun run(): Result\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 2, "last_activity_date": 1577666963, "creation_date": 1577666963, "answer_id": 59524598, "question_id": 59523696, "link": "https://stackoverflow.com/questions/59523696/optional-generic-parameters-in-kotlin/59524598#59524598", "title": "Optional generic parameters in Kotlin", "body": "<p>You can create an extension function that handles <code>Parent</code>s where the second type is a Unit. The function will only be available for use when the second type is a match for Unit:</p>\n\n<pre><code>fun &lt;Result&gt; Parent&lt;Result, Unit&gt;.run() = run(Unit)\n</code></pre>\n\n<p>The terminology you're using is atypical. A class that implements an interface is not a child of that interface. It is a child of whatever its superclass is.</p>\n"}], "owner": {"reputation": 436, "user_id": 6757836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486b3816c3a5a2a9273f9f2a45b83876?s=128&d=identicon&r=PG&f=1", "display_name": "TheYogi", "link": "https://stackoverflow.com/users/6757836/theyogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577679928, "creation_date": 1577657061, "last_edit_date": 1577679928, "question_id": 59523696, "link": "https://stackoverflow.com/questions/59523696/optional-generic-parameters-in-kotlin", "title": "Optional generic parameters in Kotlin", "body": "<p>Here's the current problem I'm trying to solve, we have the following interface in Kotlin:</p>\n\n<pre><code>interface Parent&lt;out Result, in Params&gt; where Result : Any {\n    fun run(params: Params): Result\n}\n</code></pre>\n\n<p>The issue here is that sometimes I don't want to pass any params to the interface so I end up passing Unit as the type parameter and the overriding class ends up looking like this:</p>\n\n<pre><code>class Child : Parent&lt;String, Unit&gt; {\n    override fun run(params: Unit): String { ... }\n}\n</code></pre>\n\n<p>End Goal: It would be nice to add some abstraction in order to \"get\" a <code>run</code> function with no Params at all when <code>Params</code> is <code>Unit</code>\nlike:</p>\n\n<pre><code>class Child : Parent&lt;SomeEntity, Unit&gt; {\n    override fun run(): Entity { ... }\n}\n</code></pre>\n\n<p>Or even better, optionally pass the second type parameter in order to have a single class that take one or two type parameters.</p>\n\n<pre><code>class Child : Parent&lt;String&gt; {\n    override fun run(): Entity { ... }\n}\n</code></pre>\n\n<p>Same Parent class with params</p>\n\n<pre><code>class Child : Parent&lt;String, Int&gt; {\n    override fun run(params: Int): String { ... }\n}\n</code></pre>\n\n<p>Is this possible at all?</p>\n"}, {"tags": ["android", "firebase", "gradle", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 879, "user_id": 9881903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xOtup.jpg?s=128&g=1", "display_name": "GuanHongHuang", "link": "https://stackoverflow.com/users/9881903/guanhonghuang"}, "edited": false, "score": 1, "creation_date": 1577666998, "post_id": 59523566, "comment_id": 105220137, "body": "post your <code>GroupAdapter</code> code"}, {"owner": {"reputation": 1017, "user_id": 8663811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MJk1V.jpg?s=128&g=1", "display_name": "frankenstein", "link": "https://stackoverflow.com/users/8663811/frankenstein"}, "edited": false, "score": 0, "creation_date": 1577682815, "post_id": 59523566, "comment_id": 105222655, "body": "post your error log"}, {"owner": {"reputation": 667, "user_id": 1856321, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/OP58Q.jpg?s=128&g=1", "display_name": "saulyasar", "link": "https://stackoverflow.com/users/1856321/saulyasar"}, "edited": false, "score": 1, "creation_date": 1591276444, "post_id": 59523566, "comment_id": 109998891, "body": "please instead of edit your question use &#39;Answer your own question&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 6669, "user_id": 4874146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bxg2I.png?s=128&g=1", "display_name": "Damian Kozlak", "link": "https://stackoverflow.com/users/4874146/damian-kozlak"}, "edited": false, "score": 1, "creation_date": 1578097345, "post_id": 59524104, "comment_id": 105340001, "body": "You should read about Kotlin synthetic properties, your answer gives absolute nothing to the guy who asked the question."}, {"owner": {"reputation": 446, "user_id": 7501361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rGJV0b-wbL4/AAAAAAAAAAI/AAAAAAAAADA/Q3ZLus3uqxE/photo.jpg?sz=128", "display_name": "Nicodemus Ojwee", "link": "https://stackoverflow.com/users/7501361/nicodemus-ojwee"}, "reply_to_user": {"reputation": 6669, "user_id": 4874146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bxg2I.png?s=128&g=1", "display_name": "Damian Kozlak", "link": "https://stackoverflow.com/users/4874146/damian-kozlak"}, "edited": false, "score": 0, "creation_date": 1578319304, "post_id": 59524104, "comment_id": 105390007, "body": "@DamianKozlak my bad. I answered from a Java perspective."}], "tags": [], "owner": {"reputation": 446, "user_id": 7501361, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rGJV0b-wbL4/AAAAAAAAAAI/AAAAAAAAADA/Q3ZLus3uqxE/photo.jpg?sz=128", "display_name": "Nicodemus Ojwee", "link": "https://stackoverflow.com/users/7501361/nicodemus-ojwee"}, "is_accepted": false, "score": 0, "last_activity_date": 1577676968, "last_edit_date": 1577676968, "creation_date": 1577661048, "answer_id": 59524104, "question_id": 59523566, "link": "https://stackoverflow.com/questions/59523566/unresolved-reference-on-recyclerview/59524104#59524104", "title": "Unresolved reference on RecyclerView", "body": "<p>Define the reference to the <code>RecyclerView</code> using the code below before setting an adapter to it. i.e</p>\n\n<ol>\n<li><p>Outside <code>onCreate</code> function right above it within the class. Define your <code>RecyclerView</code> as below.</p>\n\n<p><code>lateinit var recycler_view_new_message: RecyclerView</code></p></li>\n<li><p>Inside your <code>onCreate</code> function before <strong>recycler_view_new_message.adapter = adapter</strong>, add the code below.</p>\n\n<p><code>recycler_view_new_message = findViewById&lt;RecyclerView&gt;(R.id. recycler_view_new_message)</code></p></li>\n</ol>\n"}], "owner": {"reputation": 47, "user_id": 8469315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K7rRFdaP4Bs/AAAAAAAAAAI/AAAAAAAAAFg/W7IuuHZlqs0/photo.jpg?sz=128", "display_name": "Alonso hernandez", "link": "https://stackoverflow.com/users/8469315/alonso-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2419, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1604957048, "creation_date": 1577655867, "last_edit_date": 1604957048, "question_id": 59523566, "link": "https://stackoverflow.com/questions/59523566/unresolved-reference-on-recyclerview", "title": "Unresolved reference on RecyclerView", "body": "<p>I'm able to retrieve the data from Firebase but when I try to load it into the groupie adapter, the recyclerview activity is not loading, and shows the following error \"Unresolved reference: None of the following candidates are applicable because of receiver type mismatch....\", I am I missing dependency??</p>\n\n<p>This is my activity code, under to the fetchUser method is where I get the error:</p>\n\n<pre><code>\nimport android.os.Bundle\nimport android.util.Log\nimport androidx.appcompat.app.AppCompatActivity\nimport com.google.firebase.database.DataSnapshot\nimport com.google.firebase.database.DatabaseError\nimport com.google.firebase.database.FirebaseDatabase\nimport com.google.firebase.database.ValueEventListener\nimport com.xwray.groupie.GroupAdapter\nimport com.xwray.groupie.GroupieViewHolder\nimport com.xwray.groupie.Item\nimport kotlinx.android.synthetic.main.activity_new_message.*\n\nclass NewMessageActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_new_message)\n\n\n        // Activity screen title\n        supportActionBar?.title = \"Select User\"\n\n        val adapter = GroupAdapter&lt;GroupieViewHolder&gt;()\n\n\n        adapter.add(UserItem())\n        adapter.add(UserItem())\n        adapter.add(UserItem())\n\n        recycler_view_new_message.adapter = adapter\n\n        fetchUsers()\n\n    }\n}\n\nprivate fun fetchUsers() {\n    val ref = FirebaseDatabase.getInstance().getReference(\"/users\")\n    ref.addListenerForSingleValueEvent(object: ValueEventListener {\n\n        override fun onDataChange(p0: DataSnapshot) {\n            val adapter = GroupAdapter&lt;GroupieViewHolder&gt;()\n\n\n            p0.children.forEach {\n                Log.d(\"NewMessage\", it.toString())\n                val user = it.getValue(User::class.java)\n                adapter.add(UserItem())\n            }\n            recycler_view_new_message.adapter = adapter /// THIS IS WHERE I GET THE UNRESOLVED REFERENCE ERROR\n        }\n\n        override fun onCancelled(p0: DatabaseError) {\n\n        }\n    })\n\n\n}\n\nclass UserItem: Item&lt;GroupieViewHolder&gt;() {\n    override fun bind(viewHolder: GroupieViewHolder, position: Int) {\n    }\n\n    override fun getLayout(): Int {\n        return R.layout.user_row_new_message\n    }\n\n}\n\n\n</code></pre>\n\n<p>This is the gradle dependencies:</p>\n\n<pre><code>    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.core:core-ktx:1.0.2'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n\n    implementation 'com.google.firebase:firebase-analytics:17.2.0'\n    implementation 'com.google.firebase:firebase-auth:19.2.0'\n\n    implementation 'com.google.firebase:firebase-storage:19.1.0'\n    implementation 'com.google.firebase:firebase-database:19.1.0'\n    implementation 'de.hdodenhof:circleimageview:3.0.1'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation \"com.xwray:groupie:2.7.0\"\n\n    implementation 'com.squareup.picasso:picasso:2.71828'\n\n\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>and this is my recyclerView XML config:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".NewMessageActivity\"&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/recycler_view_new_message\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layoutManager=\"androidx.recyclerview.widget.LinearLayoutManager\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>SOLUTION:</strong>\nIt ended up being a very dumb mistake, I realized I had left fetchUsers() method outside of the NewMessageActivity class, so I just moved that method back into the class and I was able to reference the RecyclerView component.</p>\n"}, {"tags": ["android", "kotlin", "arraylist"], "comments": [{"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1577655364, "post_id": 59523333, "comment_id": 105218008, "body": "<code>listA.filter { it.name == &quot;john&quot; }</code>"}, {"owner": {"reputation": 69, "user_id": 12620988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c3a4e8366d29320ef77619b5e0513f?s=128&d=identicon&r=PG&f=1", "display_name": "ismacil jama", "link": "https://stackoverflow.com/users/12620988/ismacil-jama"}, "reply_to_user": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "edited": false, "score": 0, "creation_date": 1577657356, "post_id": 59523333, "comment_id": 105218448, "body": "Thank you, please post it as an answer to help the others"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 12620988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c3a4e8366d29320ef77619b5e0513f?s=128&d=identicon&r=PG&f=1", "display_name": "ismacil jama", "link": "https://stackoverflow.com/users/12620988/ismacil-jama"}, "edited": false, "score": 0, "creation_date": 1577659386, "post_id": 59523784, "comment_id": 105218866, "body": "Thank you, the groupBy is saves me, the second solution"}], "tags": [], "owner": {"reputation": 741, "user_id": 8677930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjJem.jpg?s=128&g=1", "display_name": "Mayokun", "link": "https://stackoverflow.com/users/8677930/mayokun"}, "is_accepted": true, "score": 1, "last_activity_date": 1577657827, "creation_date": 1577657827, "answer_id": 59523784, "question_id": 59523333, "link": "https://stackoverflow.com/questions/59523333/android-kotlin-arraylist-of-objects-get-specific-value/59523784#59523784", "title": "Android kotlin Arraylist of objects get specific value", "body": "<p>You could use the <code>filter</code> function i.e </p>\n\n<pre><code>listA.filter { it.name == \"john\" }\n</code></pre>\n\n<p>or use <code>groupBy</code> with <code>forEach</code> i.e</p>\n\n<pre><code>listA.groupBy{ it.name }.forEach{name, list -&gt;\n\n//name: the key for each list according to their names\n//list: a grouped list according to the names\n\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 12620988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c3a4e8366d29320ef77619b5e0513f?s=128&d=identicon&r=PG&f=1", "display_name": "ismacil jama", "link": "https://stackoverflow.com/users/12620988/ismacil-jama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 59523784, "answer_count": 1, "score": 1, "last_activity_date": 1577657827, "creation_date": 1577653892, "question_id": 59523333, "link": "https://stackoverflow.com/questions/59523333/android-kotlin-arraylist-of-objects-get-specific-value", "title": "Android kotlin Arraylist of objects get specific value", "body": "<p>I have ArrayList and i want to get him some specific object values and insert them to another ArrayList, but I can't get the specific values</p>\n\n<pre><code>val listA = ArrayList&lt;User&gt;()\n</code></pre>\n\n<p>this list contains some users with their <strong>id,name, and email</strong> so i need to get all user's whose names are <strong>john</strong> and <strong>id,email</strong> will be any value</p>\n"}, {"tags": ["android", "kotlin", "latency"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577675980, "post_id": 59523159, "comment_id": 105221500, "body": "Using threads may be adding to the problem rather than solving it. When threads are used, any access to shared data and UI elements must be coordinated so that all threads are seeing the same states over time. A common bug using threads is stale data which may appear as latency. There may also be delayed initialization occurring here but it&#39;s harder to see with the threads.  I suggest running code in event handlers that change the question/answer states all on the main thread (e.g. not creating extra threads)."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577706846, "post_id": 59523159, "comment_id": 105230363, "body": "Look at my comments in the code where I tried to place event handlers instead of creating new threads and putting them there. If I do like this, my activity totally crashes (black screen). If I put <code>Thread.sleep(1000)</code> after event handlers, it gives the same result."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577707355, "post_id": 59523159, "comment_id": 105230580, "body": "If I use that code in one additional thread, it has extremely high latency."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577721398, "post_id": 59523159, "comment_id": 105236638, "body": "My suggestion was to learn how to use event handlers, without any <code>Thread</code> in your code and no <code>sleep</code>s. The basic logic is inside some <code>onSomeEventHandler</code> code that you: (1) check the current state variable value; (2) change that state variable value; and (3) make the display changes to match the new state variable value."}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577722064, "post_id": 59523159, "comment_id": 105236934, "body": "Sorry, but I don&#39;t understand what do you mean. Actually with one <code>Thread</code> checking works fine, just high latency. But with 10 threads sometimes variables doesn&#39;t get updated at all. I don&#39;t understand why do I get black screen when I use code in the main thread. However, my main problem is latency. Checking current state takes very long time."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577724374, "post_id": 59523159, "comment_id": 105237924, "body": "What is the effect of <code>showGreen1 = isGreenBackgroundShouldAppear1()</code> as seen by the user? I was asking if this logic could also be done in event handlers or is it some sort of animation/transition?"}, {"owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577725538, "post_id": 59523159, "comment_id": 105238361, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/205093/discussion-between-prako2-and-karmakaze\">continue this discussion in chat</a>."}], "owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577899168, "creation_date": 1577652573, "last_edit_date": 1577899168, "question_id": 59523159, "link": "https://stackoverflow.com/questions/59523159/how-to-solve-latency-issue-in-quiz-application", "title": "How to solve latency issue in quiz application?", "body": "<p>I have array with more elements than posted here. I show only 2 in post but there are 10 <code>showGreen</code> variables, 10 additional threads, 10 \"TextViews\" and 10 <code>isGreenBackgroundShouldAppear</code> functions. As you see, when answer is correct, <code>TextView1</code> or <code>TextView2</code> becomes green on <code>ACTION_DOWN</code> and sets random image in <code>image_view</code> thus preparing next question. The problem is that if I use 10 threads which separately set value of answer for every <code>TextView</code> every 500ms, if user press correct answer <code>TextView</code> too fast, it will be treated as wrong answer (red). If I set from 500ms to 300ms or less, sometimes <code>showGreen</code> never gets updated correctly. Do you maybe know any solution for my problem?</p>\n\n<pre><code>    class Cats : AppCompatActivity() {\n\n                var cats = intArrayOf(\n                    R.drawable.cat1,\n                    R.drawable.cat2,\n                    R.drawable.cat3,\n                    R.drawable.cat4,\n                    R.drawable.cat5,\n                    R.drawable.cat6,\n                    R.drawable.cat7,\n                    R.drawable.cat8,\n                    R.drawable.cat9,\n                    R.drawable.cat10,\n                    R.drawable.cat11,\n                    R.drawable.cat12,\n                    R.drawable.cat13,\n                    R.drawable.cat14,\n                    R.drawable.cat15,\n                    R.drawable.cat16,\n                    R.drawable.cat17\n                )\n\n                lateinit var random: Random\n\n                var showGreen1 = false\n                var showGreen2 = false\n\n                val runnable1 = Runnable {\n                    while (true) {\n                        showGreen1 = isGreenBackgroundShouldAppear1()\n                        Thread.sleep(500)\n                    }\n                }\n                val runnable2 = Runnable {\n                    while (true) {\n                        showGreen2 = isGreenBackgroundShouldAppear2()\n                        Thread.sleep(500)\n                    }\n                }\n                 override fun onCreate(savedInstanceState: Bundle?) {\n                    super.onCreate(savedInstanceState)\n\n                      random = Random()\n                    Thread(runnable1).start()\n                Thread(runnable2).start()\n\n                TextView1.setOnTouchListener(View.OnTouchListener { view, motionEvent -&gt;\n                            when (motionEvent.action) {\n\n                                MotionEvent.ACTION_DOWN -&gt; {\n                                    if (showGreen1) {\n                                        TextView1.setBackgroundResource(R.color.green);\n                                image_view.setImageResource(cats[random.nextInt(cats.size)])\n/*showGreen1 = isGreenBackgroundShouldAppear1()\nshowGreen2 = isGreenBackgroundShouldAppear2()*/\n                                    } else {\n                                        TextView1.setBackgroundResource(R.color.red);\n\n                                    }\n                                }\n                                MotionEvent.ACTION_UP -&gt; {\n                                    TextView1.setBackgroundResource(R.color.white)\n                                }\n\n\n                            }\n                            return@OnTouchListener true\n                        })\n\n                        TextView2.setOnTouchListener(View.OnTouchListener { view, motionEvent -&gt;\n                            when (motionEvent.action) {\n\n                                MotionEvent.ACTION_DOWN -&gt; {\n                                    if (showGreen2) {\n                                        TextView2.setBackgroundResource(R.color.green);\n                                        image_view.setImageResource(cats[random.nextInt(cats.size)])\n                                    } else {\n                                        TextView2.setBackgroundResource(R.color.red);\n\n                                    }\n                                }\n                                MotionEvent.ACTION_UP -&gt; {\n                                    TextView2.setBackgroundResource(R.color.white)\n                                }\n\n\n                            }\n                            return@OnTouchListener true\n                        })\n            /*while(true)\n            {\n            showGreen1 = isGreenBackgroundShouldAppear1()\n\n            showGreen2 = isGreenBackgroundShouldAppear2()\n\n            }*/\n\n\n\n\n                        fun isGreenBackgroundShouldAppear1(): Boolean {\n                    return image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat1\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat2\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat3\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat4\n                    )?.constantState ||\n\n\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat5\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat6\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat7\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat8\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat9\n                    )?.constantState\n                }\n\n\n\n                fun isGreenBackgroundShouldAppear2(): Boolean {\n                    return image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat10\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat11\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat12\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat13\n                    )?.constantState ||\n\n\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat14\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat15\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat16\n                    )?.constantState ||\n                            image_view.drawable.constantState == ContextCompat.getDrawable(\n                        this,\n                        R.drawable.cat17\n                    )?.constantState\n                }\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "sharedpreferences", "android-preferences"], "answers": [{"tags": [], "owner": {"reputation": 414, "user_id": 10776164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2eb84a806a62335ec24b843070ecced?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/10776164/louis"}, "is_accepted": true, "score": 2, "last_activity_date": 1577736094, "creation_date": 1577736094, "answer_id": 59536253, "question_id": 59522573, "link": "https://stackoverflow.com/questions/59522573/how-to-save-another-value-instead-of-newvalue-in-onpreferencechange/59536253#59536253", "title": "How to save another value instead of newValue in OnPreferenceChange?", "body": "<p>I think there are a couple of problems here:</p>\n\n<ol>\n<li>When you return <code>true</code>, the current value in the preference (<code>newValue</code>) will be saved to the <code>SharedPreferences</code>. This will overwrite the value you have manually saved.</li>\n<li>Just writing the shared preferences isn't enough, this will not notify the preference of a change, so it will not update to show the new value.</li>\n</ol>\n\n<p>So instead, swap the <code>true</code> and <code>false</code>, so when you want to 'intercept' the change you return false, and if you leave the value unchanged you return true. And then instead of manually changing the shared preferences, call <code>preference.setText(newURL)</code>. This will update the shared preferences, and notify the preference that the value has changed, so it will update on screen.</p>\n"}], "owner": {"reputation": 43, "user_id": 12090261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fYp4nmpAac4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcR03czIHudKv8S5A7QOPSxos_Btg/photo.jpg?sz=128", "display_name": "Finn377", "link": "https://stackoverflow.com/users/12090261/finn377"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 59536253, "answer_count": 1, "score": 1, "last_activity_date": 1577736094, "creation_date": 1577647397, "last_edit_date": 1577653739, "question_id": 59522573, "link": "https://stackoverflow.com/questions/59522573/how-to-save-another-value-instead-of-newvalue-in-onpreferencechange", "title": "How to save another value instead of newValue in OnPreferenceChange?", "body": "<p>I have got a Preference with the key \"base_url\" with an onPreferenceChangeListener.\nThe problem is that I want to change wrong input directly in the onPreferenceChange but it does not save.\nFor example: Input is google.at it should add https:// to the URL.</p>\n\n<pre><code>class SettingsFragment : PreferenceFragmentCompat() {\n    override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {\n        setPreferencesFromResource(R.xml.settings_pref, rootKey)\n\n        val editURLPreference: EditTextPreference? = findPreference(\"base_url\")\n        val preferenceURLListener: Preference.OnPreferenceChangeListener =\n            object : Preference.OnPreferenceChangeListener {\n                override fun onPreferenceChange(preference: Preference?, newValue: Any?): Boolean {\n                    var newURL = newValue as String\n                    when {\n                        newURL.isEmpty() -&gt; {\n                        }\n                        newURL.startsWith(\"https://\") -&gt; {\n                        }\n                        newURL.startsWith(\"http://\") -&gt; newURL =\n                            newURL.replace(\"http://\", \"https://\")\n                        else -&gt; newURL = \"https://\".plus(newValue)\n                    }\n                    if (Patterns.WEB_URL.matcher(newURL).matches()) {\n                        Log.w(\"Test\",\"passt $newURL\")\n                        val sharedPref = PreferenceManager.getDefaultSharedPreferences(requireContext().applicationContext)\n                        sharedPref.edit().putString(\"base_url\",newURL).apply()\nLog.w(\"Test\",sharedPref.getString(\"base_url\",\"\")) //This works!\n                        removeFiles()\n                        return true\n                    }\n                    Toast.makeText(context, \"Ung\u00fcltige Eingabe\", Toast.LENGTH_LONG).show()\n                    return false\n                }\n            }\n        editURLPreference?.onPreferenceChangeListener = preferenceURLListener\n</code></pre>\n\n<p>The problem is that when I am trying to call the preference in an Activity it displays the old value without https://\nThis is my call in MainActivity:</p>\n\n<pre><code>override fun onResume() {\n        super.onResume()\nLog.w(\"baseURL\",PreferenceManager.getDefaultSharedPreferences(applicationContext).getString(\"base_url\",\"\"))  \n    }\n\n</code></pre>\n\n<p>I think the problem is that the new Value is not saved correctly, i know that true will accept newValue maybe it overrides the correct value. (I have tried it with context and applicationcontext.)</p>\n\n<p>Because calling the Preference directly in the onPreferenceChangeListener gives the correct output with https.</p>\n\n<pre><code>sharedPref.getString(\"base_url\",\"\")\n</code></pre>\n"}, {"tags": ["android", "class", "object", "inheritance", "kotlin"], "comments": [{"owner": {"reputation": 6669, "user_id": 4874146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bxg2I.png?s=128&g=1", "display_name": "Damian Kozlak", "link": "https://stackoverflow.com/users/4874146/damian-kozlak"}, "edited": false, "score": 4, "creation_date": 1577647572, "post_id": 59522482, "comment_id": 105216126, "body": "Don&#39;t use AsyncTask. Try Kotlin Coroutines or RxJava, RxKotlin for background tasks."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 12021861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N69Wgmsx3Gg/AAAAAAAAAAI/AAAAAAAAAko/3YYOMCKpywg/photo.jpg?sz=128", "display_name": "Vemu", "link": "https://stackoverflow.com/users/12021861/vemu"}, "edited": false, "score": 0, "creation_date": 1577647481, "post_id": 59522538, "comment_id": 105216093, "body": "Yeah, but then Android Studio says <code>This AsyncTask class should be static or leaks might occur</code>"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 65, "user_id": 12021861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N69Wgmsx3Gg/AAAAAAAAAAI/AAAAAAAAAko/3YYOMCKpywg/photo.jpg?sz=128", "display_name": "Vemu", "link": "https://stackoverflow.com/users/12021861/vemu"}, "edited": false, "score": 0, "creation_date": 1577647938, "post_id": 59522538, "comment_id": 105216225, "body": "Why not you use separate class for <code>AsyncTask</code> or you have to keep it static. Check this: <a href=\"https://stackoverflow.com/a/44309450/2637449\">stackoverflow.com/a/44309450/2637449</a>"}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1577647139, "creation_date": 1577647139, "answer_id": 59522538, "question_id": 59522482, "link": "https://stackoverflow.com/questions/59522482/class-in-class-inheritance/59522538#59522538", "title": "Class in class inheritance", "body": "<p>Mark the class as <code>inner</code></p>\n\n<pre><code>inner class DownloadNews: AsyncTask&lt;Void, Void, Void&gt;() {\n    override fun onPostExecute(result: Void?) {\n        adapter\n        super.onPostExecute(result)\n    }\n\n    override fun doInBackground(vararg params: Void?): Void {}\n}\n</code></pre>\n\n<p>According <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html#anonymous-inner-classes\" rel=\"nofollow noreferrer\">official documentation</a> </p>\n\n<blockquote>\n  <p>A nested class marked as inner can access the members of its outer\n  class. Inner classes carry a reference to an object of an outer class</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 12021861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N69Wgmsx3Gg/AAAAAAAAAAI/AAAAAAAAAko/3YYOMCKpywg/photo.jpg?sz=128", "display_name": "Vemu", "link": "https://stackoverflow.com/users/12021861/vemu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577647139, "creation_date": 1577646635, "question_id": 59522482, "link": "https://stackoverflow.com/questions/59522482/class-in-class-inheritance", "title": "Class in class inheritance", "body": "<p>I try to do <a href=\"https://github.com/gifffert/ParseSiteData/blob/master/app/src/main/java/ru/embersoft/parsesitedata/MainActivity.java\" rel=\"nofollow noreferrer\">this</a>, but in Kotlin. I have done that:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    lateinit var adapter: NewsRecViewAdapter\n    var newsItems: ArrayList&lt;NewsItem&gt; = ArrayList()\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        adapter = NewsRecViewAdapter(newsItems)\n        DownloadNews().execute()\n    }\n\n    class DownloadNews: AsyncTask&lt;Void, Void, Void&gt;() {\n        override fun onPostExecute(result: Void?) {\n            adapter\n            super.onPostExecute(result)\n        }\n\n        override fun doInBackground(vararg params: Void?): Void {}\n    }\n}\n</code></pre>\n\n<p>DownloadNews class can't inheritance adapter from MainActivity class. I'd rather not use inner. How can I fix it?</p>\n"}, {"tags": ["android", "button", "kotlin"], "comments": [{"owner": {"reputation": 367, "user_id": 7552894, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/RxUnX.png?s=128&g=1", "display_name": "Omar Boshra", "link": "https://stackoverflow.com/users/7552894/omar-boshra"}, "edited": false, "score": 0, "creation_date": 1577649396, "post_id": 59522332, "comment_id": 105216595, "body": "First button must finish its job first .If the other button is in another thread .Both work parallel."}], "answers": [{"tags": [], "owner": {"reputation": 741, "user_id": 8677930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjJem.jpg?s=128&g=1", "display_name": "Mayokun", "link": "https://stackoverflow.com/users/8677930/mayokun"}, "is_accepted": true, "score": 1, "last_activity_date": 1577649093, "creation_date": 1577649093, "answer_id": 59522777, "question_id": 59522332, "link": "https://stackoverflow.com/questions/59522332/how-button-with-setonclicklistener-does-unfinished-job-when-other-button-is-pr/59522777#59522777", "title": "How button with setOnClickListener() does unfinished job when other button is pressed?", "body": "<p>If you don't want the function of the 2nd button to affect the function of the 1st button, you can run these two operations/functions concurrently using <a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html\" rel=\"nofollow noreferrer\">Kotlin Coroutines</a>. It even applies best if the functions of both button 1 and 2 are long running tasks which would help ensure you don't block the <code>main thread</code>.</p>\n\n<p>You set the functions of both button 1 and button 2 to run on separate <code>coroutines</code> while the <code>main thread</code> continues. These two functions will execute in the background while the <code>main thread</code> continues. You need to mark the functions of both button 1 and 2 as a <code>suspend</code> function which is a term to identify that a function is <code>coroutine</code> friendly.</p>\n\n<p>Look up <a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html\" rel=\"nofollow noreferrer\">Kotlin Coroutines</a> for better understanding.</p>\n"}], "owner": {"reputation": 413, "user_id": 6533406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c6c045774753c3a3386e1c78ae9769?s=128&d=identicon&r=PG&f=1", "display_name": "Pranciskus", "link": "https://stackoverflow.com/users/6533406/pranciskus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 59522777, "answer_count": 1, "score": 0, "last_activity_date": 1577649093, "creation_date": 1577645438, "question_id": 59522332, "link": "https://stackoverflow.com/questions/59522332/how-button-with-setonclicklistener-does-unfinished-job-when-other-button-is-pr", "title": "How button with setOnClickListener() does unfinished job when other button is pressed?", "body": "<p>If I press button which is set to do job on click and I press other button immidiately while 1st button didn't finish his job, will 1st button finish his job or will be interupted in Kotlin?</p>\n"}, {"tags": ["android", "generics", "kotlin", "retrofit", "retrofit2"], "comments": [{"owner": {"reputation": 2247, "user_id": 11342519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d481d7c4c6219c1453c46ed3b76f7535?s=128&d=identicon&r=PG&f=1", "display_name": "jsamol", "link": "https://stackoverflow.com/users/11342519/jsamol"}, "edited": false, "score": 0, "creation_date": 1577648532, "post_id": 59522202, "comment_id": 105216360, "body": "You are trying to use a nullable type in a method that takes non-nullable arguments. Why do you need <code>interfaceClazz</code> to be nullable anyway? What are you expecting to be returned when it&#39;s <code>null</code>?"}, {"owner": {"reputation": 6669, "user_id": 4874146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bxg2I.png?s=128&g=1", "display_name": "Damian Kozlak", "link": "https://stackoverflow.com/users/4874146/damian-kozlak"}, "edited": false, "score": 0, "creation_date": 1577649231, "post_id": 59522202, "comment_id": 105216553, "body": "You should re-think your architecture. I assume that you&#39;re using Dagger2 (<code>@Inject</code> annotation), so you must declare explicit what service you&#39;re going to provide."}], "answers": [{"tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 3, "last_activity_date": 1577649176, "creation_date": 1577649176, "answer_id": 59522788, "question_id": 59522202, "link": "https://stackoverflow.com/questions/59522202/my-generic-function-for-retrofit-interface-creation-get-compiler-error-inferred/59522788#59522788", "title": "My generic function for Retrofit interface creation get compiler error: inferred type is Class&lt;T&gt;? but Class&lt;T!&gt; was expected", "body": "<p>Retrofit create needs non nullable arguments. Try to make <code>interfaceClazz</code> non nullable</p>\n\n<pre><code>fun &lt;T&gt; createService(interfaceClazz: Class&lt;T&gt;): T {\n    // No error now\n    return retrofit.create(interfaceClazz)\n}\n</code></pre>\n"}], "owner": {"reputation": 4117, "user_id": 842225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/33a910e7c34ca92a8a02b12e016d4674?s=128&d=identicon&r=PG&f=1", "display_name": "user842225", "link": "https://stackoverflow.com/users/842225/user842225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 1, "accepted_answer_id": 59522788, "answer_count": 1, "score": 0, "last_activity_date": 1577649176, "creation_date": 1577644481, "last_edit_date": 1577646258, "question_id": 59522202, "link": "https://stackoverflow.com/questions/59522202/my-generic-function-for-retrofit-interface-creation-get-compiler-error-inferred", "title": "My generic function for Retrofit interface creation get compiler error: inferred type is Class&lt;T&gt;? but Class&lt;T!&gt; was expected", "body": "<p>I am using Retrofit in my Android (kotlin) project.</p>\n\n<p>I created my interface:</p>\n\n<pre><code>interface StudentsInterface {\n    @GET(\"foo/bar/{id}\")\n    suspend fun getStudent(@Path(\"id\") myId: Int)\n}\n</code></pre>\n\n<p>I created a <code>MyClient</code> class in which I defined a generic function for creating endpoint service out from any interface like above code defined:</p>\n\n<pre><code>class MyClient() {\n    @Inject\n    lateinit var  retrofit: Retrofit\n\n    // this is my generic function\n    fun &lt;T&gt; createService(interfaceClazz: Class&lt;T&gt;?): T {\n        // Compiler error: Type mismatch: inferred type is Class&lt;T&gt;? but Class&lt;T!&gt; was expected\n        return retrofit.create(interfaceClazz)\n    }\n}\n</code></pre>\n\n<p>So that in another class I can :</p>\n\n<pre><code>val sService = myClient.createService(StudentsInterface::class.java)\n...\n</code></pre>\n\n<p>But when I build the project, I always get compiler error: <code>Type mismatch: inferred type is Class&lt;T&gt;? but Class&lt;T!&gt; was expected</code> in the line of code <code>return retrofit.create(interfaceClazz)</code></p>\n\n<p>Why do I get this error? How to get rid of it?</p>\n"}, {"tags": ["java", "android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 428, "user_id": 10844401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nEVuY.jpg?s=128&g=1", "display_name": "asim", "link": "https://stackoverflow.com/users/10844401/asim"}, "edited": false, "score": 0, "creation_date": 1577643809, "post_id": 59522076, "comment_id": 105215120, "body": "&quot;var a:IntArray = intArrayOf(1,2,3,4)&quot; to &quot;var a = intArrayOf(1,2,3,4)&quot;.... remove &quot;:IntArray&quot;"}, {"owner": {"reputation": 27, "user_id": 12201274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8eCgFJTlwUs/AAAAAAAAAAI/AAAAAAAAAa0/LPbBjkJOu6c/photo.jpg?sz=128", "display_name": "Bilge Kaan Atay", "link": "https://stackoverflow.com/users/12201274/bilge-kaan-atay"}, "reply_to_user": {"reputation": 428, "user_id": 10844401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nEVuY.jpg?s=128&g=1", "display_name": "asim", "link": "https://stackoverflow.com/users/10844401/asim"}, "edited": false, "score": 0, "creation_date": 1577650945, "post_id": 59522076, "comment_id": 105216991, "body": "It didn&#39;t work."}, {"owner": {"reputation": 428, "user_id": 10844401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nEVuY.jpg?s=128&g=1", "display_name": "asim", "link": "https://stackoverflow.com/users/10844401/asim"}, "edited": false, "score": 0, "creation_date": 1577727015, "post_id": 59522076, "comment_id": 105238892, "body": "that doesn&#39;t look like an android activity to me, what exactly are you trying to achieve? my guess is that you got android all wrong, try adding an (auto-generated) activity and see how its coded."}, {"owner": {"reputation": 27, "user_id": 12201274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8eCgFJTlwUs/AAAAAAAAAAI/AAAAAAAAAa0/LPbBjkJOu6c/photo.jpg?sz=128", "display_name": "Bilge Kaan Atay", "link": "https://stackoverflow.com/users/12201274/bilge-kaan-atay"}, "reply_to_user": {"reputation": 428, "user_id": 10844401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nEVuY.jpg?s=128&g=1", "display_name": "asim", "link": "https://stackoverflow.com/users/10844401/asim"}, "edited": false, "score": 0, "creation_date": 1577874444, "post_id": 59522076, "comment_id": 105272025, "body": "Can you try to compile a project which has IntArrays in it ? I have projects which contains activites. I know what activity is. The thing is I faced this problem when it comes to use IntArrays. So, I decided to test it with &quot;no empty&quot; project. But it is failure."}, {"owner": {"reputation": 477, "user_id": 1744705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/My0Z3.jpg?s=128&g=1", "display_name": "TeachMeJava", "link": "https://stackoverflow.com/users/1744705/teachmejava"}, "edited": false, "score": 0, "creation_date": 1580435451, "post_id": 59522076, "comment_id": 106105867, "body": "I am facing same issue. I am using Intellij IDEA for pure kotlin (not android) and when I call the <code>intArrayOf()</code> function, compiler throws an error : <code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: kotlin&#47;KotlinPackage</code>. I think this problem is about Java SDK or Kotlin SDK but I could not figure out which one..."}], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 1744705, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/My0Z3.jpg?s=128&g=1", "display_name": "TeachMeJava", "link": "https://stackoverflow.com/users/1744705/teachmejava"}, "is_accepted": true, "score": 5, "last_activity_date": 1580766029, "last_edit_date": 1580766029, "creation_date": 1580764881, "answer_id": 60047331, "question_id": 59522076, "link": "https://stackoverflow.com/questions/59522076/exception-in-thread-main-java-lang-noclassdeffounderror-kotlin-kotlinpackage/60047331#60047331", "title": "Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: kotlin/KotlinPackage &amp; Caused by: java.lang.ClassNotFoundException: kotlin.KotlinPackage", "body": "<p>I had the same problem and I discovered that this is a bug of Kotlin library. (I am so serious.) You cannot call <code>intArrayOf()</code> method.</p>\n\n<p>I am sure that you are using Windows 10 Single Language <strong>Turkish</strong>. (I was using the same operating system.) Kotlin's some libraries cannot work on Turkish operating system. You can check this issue on <a href=\"https://youtrack.jetbrains.com/issue/KT-25400\" rel=\"noreferrer\">YouTrack</a>.</p>\n\n<p>You can solve your problem with installing <strong>Windows 10 Pro English</strong> or <strong>Windows 10 Single Language English</strong>. I do not know any other approach right now. (You can open new issue on Kotlin website.)</p>\n\n<p>This bug took from me 30 days. You can check <a href=\"https://stackoverflow.com/q/59512559/1744705\">my related question</a> about this Kotlin bug.</p>\n"}], "owner": {"reputation": 27, "user_id": 12201274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8eCgFJTlwUs/AAAAAAAAAAI/AAAAAAAAAa0/LPbBjkJOu6c/photo.jpg?sz=128", "display_name": "Bilge Kaan Atay", "link": "https://stackoverflow.com/users/12201274/bilge-kaan-atay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "accepted_answer_id": 60047331, "answer_count": 1, "score": 1, "last_activity_date": 1580766029, "creation_date": 1577643472, "last_edit_date": 1577874570, "question_id": 59522076, "link": "https://stackoverflow.com/questions/59522076/exception-in-thread-main-java-lang-noclassdeffounderror-kotlin-kotlinpackage", "title": "Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: kotlin/KotlinPackage &amp; Caused by: java.lang.ClassNotFoundException: kotlin.KotlinPackage", "body": "<p>When I try to add IntArrays in my codes, the Android Studio gives me these errors:</p>\n\n<pre><code>\"C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java.exe\" \"-javaagent:C:\\Program Files\\Android\\Android Studio\\lib\\idea_rt.jar=50719:C:\\Program Files\\Android\\Android Studio\\bin\" -Dfile.encoding=UTF-8 -classpath C:\\Users\\bosun\\AppData\\Local\\Android\\Sdk\\platforms\\android-29\\android.jar;C:\\Users\\bosun\\AppData\\Local\\Android\\Sdk\\platforms\\android-29\\data\\res;C:\\Users\\bosun\\AndroidStudioProjects\\Test2\\app\\build\\intermediates\\javac\\debug\\classes;C:\\Users\\bosun\\AndroidStudioProjects\\Test2\\app\\build\\tmp\\kotlin-classes\\debug;C:\\Users\\bosun\\AndroidStudioProjects\\Test2\\app\\build\\generated\\res\\resValues\\debug;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlin\\kotlin-android-extensions-runtime\\1.3.61\\289bdf25b4886749e040c7a7d3aab8a57f85c631\\kotlin-android-extensions-runtime-1.3.61.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlin\\kotlin-stdlib-jdk7\\1.3.61\\70dffc5f8ac5ea7c34f30deac5b9d8b1d48af066\\kotlin-stdlib-jdk7-1.3.61.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlin\\kotlin-stdlib\\1.3.61\\4702105e97f7396ae41b113fdbdc180ec1eb1e36\\kotlin-stdlib-1.3.61.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains.kotlin\\kotlin-stdlib-common\\1.3.61\\65abb71d5afb850b68be03987b08e2c864ca3110\\kotlin-stdlib-common-1.3.61.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\org.jetbrains\\annotations\\13.0\\919f0dfe192fb4e063e7dacadee7f8bb9a2672a9\\annotations-13.0.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\androidx.collection\\collection\\1.0.0\\42858b26cafdaa69b6149f45dfc2894007bc2c7a\\collection-1.0.0.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\androidx.lifecycle\\lifecycle-common\\2.0.0\\e070ffae07452331bc5684734fce6831d531785c\\lifecycle-common-2.0.0.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\androidx.arch.core\\core-common\\2.0.0\\bb21b9a11761451b51624ac428d1f1bb5deeac38\\core-common-2.0.0.jar;C:\\Users\\bosun\\.gradle\\caches\\modules-2\\files-2.1\\androidx.annotation\\annotation\\1.0.2\\2f1d597d48e5309e935ce1212eedf5ae69d3f97\\annotation-1.0.2.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\4400ce52558a1326f6f8df052592e334\\core-ktx-1.0.2\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\879984f11f327e0566da31edd3b93778\\appcompat-1.0.2\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\879984f11f327e0566da31edd3b93778\\appcompat-1.0.2\\res;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\9ac1dcdf45a51c129ec9ab070abfd8d7\\fragment-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\9b9150b07929bc69439efe995438be41\\vectordrawable-animated-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\59d04c87522e7722ea3ca8715a8b0d7d\\legacy-support-core-ui-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\e8e43754c06475d8590f4ff699e532f8\\legacy-support-core-utils-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\f918a2c43bb058b74c18b9596e2a2796\\vectordrawable-1.0.1\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\d1a473dd41ab9d9cfedb415a767fa8e2\\loader-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\28a2f2bfe5b19437baae53dd908102d9\\viewpager-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\ced0565cf77ede6c9fe2cc907e012eb2\\coordinatorlayout-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\ced0565cf77ede6c9fe2cc907e012eb2\\coordinatorlayout-1.0.0\\res;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\0e17e0903cc4b356cac1f1cdb05efef6\\drawerlayout-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\3bb2c7104f2f4e21e4344de7d5162af7\\slidingpanelayout-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\e4f940674933431d2ed1592b500f2e4e\\customview-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\4cc9299baa04d807d8b5ed7d258aef09\\swiperefreshlayout-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\70edb5ab10f0c6baaf068d26450280d2\\asynclayoutinflater-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\bde5344dd836d92b3a6c11207c599e3d\\core-1.0.2\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\bde5344dd836d92b3a6c11207c599e3d\\core-1.0.2\\res;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\1df4b1ae03d2b473d0219ecebc547a11\\versionedparcelable-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\a5cd9e8e0d405c18c2b2d3ee49201e52\\cursoradapter-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\4ec2bbfd3859804671a6ce6c91e03a8c\\documentfile-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\9d992e7c041153936c4b20c6e9d00821\\localbroadcastmanager-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\99907df3d56060bc7b1502dcd5ee124b\\print-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\99a636cd82617c988188441746e7f20d\\lifecycle-viewmodel-2.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\c20fb0ee45b96eb0e4b0a639b2ec1f4d\\lifecycle-runtime-2.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\7b586029e966589a4a60caf5a0a6e9d2\\interpolator-1.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\d94f7826feb0de043e3c43244f79749a\\lifecycle-livedata-2.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\e31b9daaaa8bb7510409960c20556b7e\\lifecycle-livedata-core-2.0.0\\jars\\classes.jar;C:\\Users\\bosun\\.gradle\\caches\\transforms-2\\files-2.1\\373d10fc23cf87276d7fbe4eda833447\\core-runtime-2.0.0\\jars\\classes.jar com.example.test2.MainKt\nException in thread \"main\" java.lang.NoClassDefFoundError: kotlin/KotlinPackage\n    at com.example.test2.MainKt.main(main.kt:4)\n    at com.example.test2.MainKt.main(main.kt)\nCaused by: java.lang.ClassNotFoundException: kotlin.KotlinPackage\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 2 more\n</code></pre>\n\n<p>Most codes works fine. I can test some projects. Emulator is working fine too. But when it comes to add IntArrays it cannot compile. I've search on everywhere but I couldn't find the solution. I've reinstalled the Android Studio and JRE but it didn't work as well.</p>\n\n<p>Used Codes:</p>\n\n<pre><code>package com.example.test2\n\nfun main(){\n    var a:IntArray = intArrayOf(1,2,3,4)\n    println(\"test\")\n}\n</code></pre>\n\n<p>My build Gradles:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.3.61'\n    repositories {\n        google()\n        jcenter()\n\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.5.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>and the second one is:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion '29.0.2'\n    defaultConfig {\n        applicationId \"com.example.test2\"\n        minSdkVersion 15\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.2'\n    implementation 'androidx.core:core-ktx:1.0.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n\n}\n</code></pre>\n\n<p>Addition: I have tested this situation in a completely different computer. It gives an error too. I guess it is kind a bug of Android Studio.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 2, "last_activity_date": 1577643229, "creation_date": 1577643229, "answer_id": 59522038, "question_id": 59521979, "link": "https://stackoverflow.com/questions/59521979/kotlin-flatmapto-does-not-compile/59522038#59522038", "title": "Kotlin flatMapTo does not compile", "body": "<p>Your lambda returns an <code>Iterator&lt;String&gt;</code>. It's supposed to return an <code>Iterable&lt;String&gt;</code>. A <code>Set&lt;String&gt;</code> is already an <code>Iterable&lt;String&gt;</code>.</p>\n\n<p>All you need is</p>\n\n<pre><code>listOf(HashSet&lt;String&gt;()).flatMapTo(HashSet()) { it }\n</code></pre>\n"}], "owner": {"reputation": 1779, "user_id": 3795043, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0QTMP.jpg?s=128&g=1", "display_name": "findusl", "link": "https://stackoverflow.com/users/3795043/findusl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 59522038, "answer_count": 1, "score": 1, "last_activity_date": 1577643236, "creation_date": 1577642735, "question_id": 59521979, "link": "https://stackoverflow.com/questions/59521979/kotlin-flatmapto-does-not-compile", "title": "Kotlin flatMapTo does not compile", "body": "<p>I want to flat map a Collection of Sets to a single Set. I have the following code which does not compile in IntelliJ IDEA. I can't tell why:</p>\n\n<pre><code>listOf(HashSet&lt;String&gt;()).flatMapTo(HashSet&lt;String&gt;()) { it.iterator() as Iterator&lt;String&gt; }\n</code></pre>\n\n<p>There is a very confusing error message on the lambda in the end which says:</p>\n\n<blockquote>\n  <p>Type mismatch. Required: (kotlin.collections.HashSet&lt;String> /* =\n  java.util.HashSet&lt;String> <em>/) \u2192 Iterable&lt;String> Found:\n  (kotlin.collections.HashSet&lt;String> /</em> = java.util.HashSet&lt;String> */)\n  \u2192 Iterator&lt;String></p>\n</blockquote>\n\n<p>But they are both completely the same? I am confused as to why that doesn't want to work.</p>\n\n<p>There is also an error message shown on the <code>flatMapTo</code> function and says:</p>\n\n<blockquote>\n  <p>Type inference failed: </p>\n  \n  <p>inline fun &lt;T, R, C : MutableCollection&lt;in R>> Iterable&lt;T>.flatMapTo (\n  destination: C, transform: (T) \u2192 Iterable&lt;R> ) : C cannot be applied\n  to</p>\n  \n  <p>receiver: List&lt;kotlin.collections.HashSet&lt;String> /* =\n  java.util.HashSet&lt;String> &ast;/> arguments: (\n  kotlin.collections.HashSet&lt;String> /* = java.util.HashSet&lt;String> &ast;/,\n  (kotlin.collections.HashSet&lt;String> /* = java.util.HashSet&lt;String> &ast;/)\n  \u2192 Iterator&lt;String> )</p>\n</blockquote>\n\n<p>*Hope I didn't forget any special characters in the quotes. had to replace &lt; and some * with html entities.*</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "search", "android-recyclerview"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1577643651, "post_id": 59521557, "comment_id": 105215082, "body": "Thank you a lot! This helped me a great deal. I can initiate a new Query that gets a new LiveData&lt;List&lt;Object&gt;&gt; from my database, but when I override the old LiveData object with the new one the screen doesnt get updated. Do you know why that could happen?"}, {"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "reply_to_user": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1577645811, "post_id": 59521557, "comment_id": 105215638, "body": "Need to check <code>viewFragmentViewModel.searchTranslations</code>. Also add this"}, {"owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1577646058, "post_id": 59521557, "comment_id": 105215698, "body": "I think i narrowed down the problem with the room database query. Its just returning an empty list. Added the query to the question."}, {"owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "edited": false, "score": 0, "creation_date": 1577646901, "post_id": 59521557, "comment_id": 105215931, "body": "That doesnt work. &quot;Unused parameter&quot; If I put &#39;% :string %&#39; there, it doesnt get the string. I tried similar things already."}], "tags": [], "owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "is_accepted": true, "score": 0, "last_activity_date": 1577646595, "last_edit_date": 1577646595, "creation_date": 1577639470, "answer_id": 59521557, "question_id": 59521340, "link": "https://stackoverflow.com/questions/59521340/add-functioning-searchview-to-one-specific-fragment/59521557#59521557", "title": "Add functioning SearchView to one specific Fragment", "body": "<p><strong>Step - 1:</strong> Implements <code>SearchView.OnQueryTextListener</code> in your <code>ViewFragment</code></p>\n\n<pre><code>class ViewFragment : Fragment(), SearchView.OnQueryTextListener {\n\n    ...\n\n    override fun onQueryTextSubmit(query: String?): Boolean {\n        return false\n    }\n\n    override fun onQueryTextChange(newText: String?): Boolean {\n\n        //Do your operation here\n\n        return true\n    }\n}\n</code></pre>\n\n<p><strong>Step - 2:</strong> Get <code>SearchView</code> from menu and initialize with listener</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {\n    inflater.inflate(R.menu.search_menu, menu)\n\n    val meniItem = menu?.findItem(R.id.action_search)\n    val searchView = meniItem?.actionView as SearchView?\n    searchView?.setOnQueryTextListener(this)\n\n    super.onCreateOptionsMenu(menu, inflater)\n}\n</code></pre>\n\n<p><strong>Step - 3:</strong> Inside <code>onQueryTextChange</code> take your search query and do operation</p>\n\n<p><strong>Update:</strong> Change your implementation like below:</p>\n\n<pre><code>fun searchTranslations(searchString: String) : List&lt;Translation&gt;? {\n    return database.getTranslationsBySearch(searchString).value\n}\n</code></pre>\n\n<p>And Dao</p>\n\n<pre><code>@Query(\"SELECT * FROM word_translation_table WHERE word_ger LIKE '% :string %'  OR word_es LIKE '% :string %' \")\nfun getTranslationsBySearch(string: String): LiveData&lt;List&lt;Translation&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10376535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc9e46b64c82a59b915019a406f15e2c?s=128&d=identicon&r=PG&f=1", "display_name": "Phil T.", "link": "https://stackoverflow.com/users/10376535/phil-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 59521557, "answer_count": 1, "score": 0, "last_activity_date": 1577654418, "creation_date": 1577637995, "last_edit_date": 1577654418, "question_id": 59521340, "link": "https://stackoverflow.com/questions/59521340/add-functioning-searchview-to-one-specific-fragment", "title": "Add functioning SearchView to one specific Fragment", "body": "<p>I got a fragment where I want to add a SearchView. I got it already in the Menu, its clickable and everything, but every guide I find to actually search something is either out of date or not exactly what I need.</p>\n\n<p>This is my fragment </p>\n\n<pre><code>    class ViewFragment : Fragment () {\n\n    override fun onCreateView(inflater: LayoutInflater,container: ViewGroup?,\nsavedInstanceState: Bundle?\n    ): View? {\n        val binding: ViewFragmentBinding = DataBindingUtil.inflate(\n            inflater, R.layout.view_fragment, container, false)\n\n        val application = requireNotNull(this.activity).application\n\n        setHasOptionsMenu(true)\n        binding.setLifecycleOwner(this)\n\n        viewFragmentViewModel.navigateToEdit.observe(this, Observer {translation -&gt;\n            translation?.let {\n                this.findNavController().navigate(\n                    ViewFragmentDirections\n                        .actionViewFragmentToEditFragment(translation)\n                )\n                viewFragmentViewModel.onEditNavigated()\n            }\n        })\n\n        val adapter = TranslationAdapter(TranslationListener { translationID -&gt;\n            viewFragmentViewModel.onTranslationClicked(translationID)\n        })\n        binding.translationList.adapter = adapter\n\n        viewFragmentViewModel.translations.observe(viewLifecycleOwner, Observer {\n            it?.let {\n                adapter.submitList(it)\n            }\n        })\n\n        return binding.root\n    }\n\n    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater){\n        inflater.inflate(R.menu.search_menu, menu)\n        super.onCreateOptionsMenu(menu, inflater)\n\n    }\n</code></pre>\n\n<p>And this is my menu with the search</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n\n    &lt;item\n        android:id=\"@+id/action_search\"\n        android:icon=\"@android:drawable/ic_menu_search\"\n        app:showAsAction=\"always|collapseActionView\"\n        app:actionViewClass=\"android.widget.SearchView\"\n        android:title=\"Search\"/&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>Can anyone tell me how I can get set everything up so I can access the search string the user has entered and submit a new list to the RecycleView? Or just point me in the right direction!</p>\n\n<p>Thank you in advance!</p>\n\n<p>EDIT: Heres The update. I have an MutableLiveData Where i put the query and observe it so I can act on its observe function. I got a variable translationList in the ViewModel that I wanted to update.</p>\n\n<pre><code>class ViewFragment : Fragment (), SearchView.OnQueryTextListener {\n\n\nprivate var searchText = MutableLiveData&lt;String&gt;()\n\noverride fun onCreateView(\n    inflater: LayoutInflater,\n    container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n</code></pre>\n\n<p>...</p>\n\n<pre><code>    val adapter = TranslationAdapter(TranslationListener { translationID -&gt;\n        viewFragmentViewModel.onTranslationClicked(translationID)\n    })\n    binding.translationList.adapter = adapter\n\n    viewFragmentViewModel.translations.observe(viewLifecycleOwner, Observer {\n        it?.let {\n            adapter.submitList(it)\n        }\n    })\n\n    searchText.observe(this, Observer {searchString -&gt;\n        searchString?.let {\n            if(searchString == \"\"){\n                adapter.submitList(viewFragmentViewModel.translations.value)\n            }\n            else{\n                adapter.submitList(viewFragmentViewModel.searchTranslations(searchString))\n            }\n\n        }\n    })\n\n}\n\noverride fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater){\n    inflater.inflate(R.menu.search_menu, menu)\n\n    val menuItem = menu.findItem(R.id.action_search)\n    val searchView = menuItem.actionView as SearchView\n    searchView.setOnQueryTextListener(this)\n    super.onCreateOptionsMenu(menu, inflater)\n}\n\noverride fun onQueryTextChange(newText: String?): Boolean {\n\n    searchText.value = newText\n    return true\n}\n\noverride fun onQueryTextSubmit(query: String?): Boolean {\n    return false\n}\n</code></pre>\n\n<p>}</p>\n\n<p>For the closure, since I already had an list with all my objects from the database I wanted to search in, its easier to just go through that list with a filter. </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577633767, "post_id": 59520726, "comment_id": 105212492, "body": "Service won&#39;t run in the background forever, the what you are looking for is the alarm manager or the workmanager, the dalvik or the ATN machine can kill any process at any time, that inclueds services, and I don&#39;t think that service is correct because it has to bind to an activity"}, {"owner": {"reputation": 1, "user_id": 10532432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6XDL7udEDs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCneGXLSIJLoZhe3a5cLnNjJDdtwg/mo/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10532432/sebastian"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577639279, "post_id": 59520726, "comment_id": 105213947, "body": "I implemented the Alarm Manager two ways, in which he gives my service, however, debugging the program and testing does not enter my service. Could you say what I&#39;m doing wrong? @cutiko In each ways the service does not turn on.  Antoine can tell me if i good understand ifi culd use my Foregriund service in AlarmMananger or not?"}, {"owner": {"reputation": 1, "user_id": 10532432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6XDL7udEDs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCneGXLSIJLoZhe3a5cLnNjJDdtwg/mo/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10532432/sebastian"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577639341, "post_id": 59520726, "comment_id": 105213970, "body": "1 way: alarmMgr = this.getSystemService(Context.ALARM_SERVICE) as AlarmManager         alarmIntent = Intent(this, ForegroundService::class.java).let { intent -&gt;             PendingIntent.getBroadcast(this, 0, intent, 0)         }           alarmMgr?.setInexactRepeating(             AlarmManager.ELAPSED_REALTIME_WAKEUP,             SystemClock.elapsedRealtime(),             10 * 60,             alarmIntent         )"}, {"owner": {"reputation": 1, "user_id": 10532432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6XDL7udEDs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCneGXLSIJLoZhe3a5cLnNjJDdtwg/mo/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10532432/sebastian"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577639370, "post_id": 59520726, "comment_id": 105213983, "body": "2 way:  fun setOnetimeTimer(context: Context) {         val am = context.getSystemService(Context.ALARM_SERVICE) as AlarmManager           val intent = Intent(context, ForegroundService::class.java)     intent.putExtra(&quot;time&quot;,java.lang.Boolean.TRUE)     val pi = PendingIntent.getBroadcast(context, 0, intent, 0)     am.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 1000 * 60, pi)"}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577645066, "post_id": 59520726, "comment_id": 105215438, "body": "I already told you, the service needs to be bound to an activity, try using and intent service or as I recommended the workmanager"}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577645115, "post_id": 59520726, "comment_id": 105215453, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/51153003/periodicworkrequest-with-workmanager\">PeriodicWorkRequest with WorkManager</a>"}, {"owner": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577648994, "post_id": 59520726, "comment_id": 105216485, "body": "@cutiko <code>Service</code> doesn&#39;t have to bind to an <code>Activity</code>. As long as it&#39;s a foreground service, Android will give it roughly the same priority as an app with an onscreen <code>Activity</code>. It is very unlikely to be preemptively terminated. That said, the OP must be advised against trying to solve the problem this way, and it is much better to use <code>AlarmManager</code> or <code>WorkManager</code> as you suggested."}, {"owner": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "reply_to_user": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "edited": false, "score": 0, "creation_date": 1577655753, "post_id": 59520726, "comment_id": 105218097, "body": "@greeble31 services has to be bound to an activity bound services not, the priority of the virtual machine is to make sure the app in foreground is running smooth if anything else is consuming resources it will be killed so &quot;rouughly&quot; takes us back to the beginning"}, {"owner": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "reply_to_user": {"reputation": 7065, "user_id": 4017501, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-Mk9ZAlByQdc/AAAAAAAAAAI/AAAAAAAAAD8/TKM32IE8Mxs/photo.jpg?sz=128", "display_name": "cutiko", "link": "https://stackoverflow.com/users/4017501/cutiko"}, "edited": false, "score": 0, "creation_date": 1577657741, "post_id": 59520726, "comment_id": 105218520, "body": "@cutiko Well, right, the OS can decide to terminate any JVM on the basis of excessive resource usage. But the point is, having a foreground service makes that <i>much less likely</i>; it makes the app a &quot;foreground app&quot;. Binding the <code>Service</code> to an <code>Activity</code> does not do that. Have an <code>Activity</code> on screen? Yes, you have a &quot;foreground app&quot;. But once that <code>Activity</code> disappears, you now have a &quot;background app&quot;, and it&#39;s much more likely to be killed. It doesn&#39;t matter if it&#39;s bound or not."}], "owner": {"reputation": 1, "user_id": 10532432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R6XDL7udEDs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCneGXLSIJLoZhe3a5cLnNjJDdtwg/mo/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10532432/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1577633347, "creation_date": 1577633347, "question_id": 59520726, "link": "https://stackoverflow.com/questions/59520726/android-kotlin-service-issue", "title": "Android Kotlin Service issue", "body": "<p>I have implemented a service that runs in the background of the application. The service calls the function every minute, which checks if the time has come to trigger the notification - reminder (retrieves the current date and time and compares it with the data saved in the database. If the date and time match, the notification is triggered. The function is called every 1 minute. Function this one must check every 1 minute the condition when the user uses the application, the application runs in the background, does not use the application and how the phone is asleep. By implementing reminders the previous day evening to the evening and the next day. Reminders appear for the same day for the evening and the first reminder for the next day. The next ones do not appear. On the other hand, the reminder set for 5 minutes works and for 30 no longer. Looking for information I found on the internet that the problem lies in:</p>\n\n<ul>\n<li>time drift - When the screen is on and the phone is fully awake, the interval between two consecutive events will remain constant most of the time, but may jump from time to time (lengthen)</li>\n<li>the phone goes into sleep mode</li>\n</ul>\n\n<p>Any of you have an idea how to solve this, get around it?</p>\n\n<p><em>ForegroundService</em></p>\n\n<pre><code>class ForegroundService : Service() {\n    companion object {\n        val CHANNEL_ID = \"ForegroundServiceChannel\"\n        val CHANNEL_ID_CHILD = \"ForegroundServiceChannelCHILD\"\n        private var isRunning = true\n    }\n\n    override fun onStartCommand(intent: Intent, flags: Int, startId: Int): Int {\n        val input = intent.getIntExtra(\"time\",15)\n        createNotificationChannel()\n        val notificationIntent = Intent(this, Menu::class.java)\n        val pendingIntent = PendingIntent.getActivity(\n            this,\n            0, notificationIntent, 0\n        )\n\n        val wakeLock: PowerManager.WakeLock =\n            (getSystemService(Context.POWER_SERVICE) as PowerManager).run {\n                newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, \"MyApp::AR_Apteczka\").apply {\n                    acquire()\n                }\n            }\n\n\n\n        val notification = NotificationCompat.Builder(this, CHANNEL_ID)\n            .setContentTitle(\"Twoja Elektroniczna Apteczka\")\n            .setContentText(\"Dbamy o Twoje zdrowie\")\n            .setSmallIcon(com.example.agnieszka.ar_apteczka.R.drawable.pills)\n            .setOnlyAlertOnce(true)\n            //.setContentIntent(pendingIntent)\n            //.setSound(null)\n            .build()\n\n\n\n        startForeground(1, notification)\n        isRunning = true\n        val context = this\n        val intent = Intent(this, ShowAllTodaysMedicines::class.java)\n        val pendingIntentNotification = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)\n        doAsync {\n            while(true)\n            {\n                var message= createReminderMessage(context)\n\n                uiThread {\n                        if(true) {\n                            if (message != \"Nadszed\u0142 czas by za\u017cy\u0107: \") {\n                                val notification =\n                                    NotificationCompat.Builder(context, CHANNEL_ID_CHILD)\n                                        .setContentTitle(\"Za\u017cyj leki\")\n                                        .setContentText(message)\n                                        .setSmallIcon(com.example.agnieszka.ar_apteczka.R.drawable.pills)\n                                        .setContentIntent(pendingIntentNotification)\n                                        .setAutoCancel(true)\n                                        .build()\n                                with(NotificationManagerCompat.from(context)) {\n                                    notificationManager.notify(2, notification)\n                                }\n                            }\n                        }\n                }\n\n                //SystemClock.sleep(60000)\n                SystemClock.sleep(60*1000-SystemClock.elapsedRealtime()%1000)\n               // SystemClock.sleep(50000) //10*1000-SystemClock.elapsedRealtime()%1000\n            }\n        }\n        return START_NOT_STICKY\n    }\n\n    override fun onBind(intent: Intent): IBinder? {\n        return null\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        isRunning = false\n    }\n\n    private fun createNotificationChannel() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val serviceChannel = NotificationChannel(\n                CHANNEL_ID,\n                \"Foreground Service Channel\",\n                //NotificationManager.IMPORTANCE_DEFAULT\n                NotificationManager.IMPORTANCE_DEFAULT\n            )\n            //serviceChannel.setSound(null, null) //\n            val serviceChannel2 = NotificationChannel(\n                CHANNEL_ID_CHILD,\n                \"Foreground Service ChannelChild \",\n                NotificationManager.IMPORTANCE_DEFAULT\n                //NotificationManager.IMPORTANCE_LOW\n            )\n            val manager = getSystemService(NotificationManager::class.java)\n            manager.createNotificationChannel(serviceChannel)\n            manager.createNotificationChannel(serviceChannel2)\n        }\n    }\n\n    fun reminderForNow(context: Context) : ArrayList&lt;Reminder&gt; {\n        var listOfReminder : ArrayList&lt;Reminder&gt; = ArrayList()\n        var timetoday = takeTimeNow()\n        var dateToday = takeTodayDate()\n\n        val dbHelper = SQLConector(context)\n        val allRemindersList = dbHelper.getAllReminders()\n        for (i: Reminder in allRemindersList) {\n\n            if (i.reminderDate == dateToday &amp;&amp; i.ReminderTime == timetoday) {\n                var reminder = Reminder(\n                    i.idReminder,\n                    i.medicineName,\n                    i.reminderDate,\n                    i.ReminderTime\n                )\n                listOfReminder.add(reminder)\n            }\n        }\n        return listOfReminder\n    }\n\n    private fun createReminderMessage(p0: Context) : String{\n        var message = \"Nadszed\u0142 czas by za\u017cy\u0107: \"\n        var listOfReminders = reminderForNow(p0)\n        if(listOfReminders.count() &gt; 0){\n            for (i: Reminder in listOfReminders) {\n                message += i.medicineName + \", \"\n            }\n        }\n        return message\n    }\n\n private fun takeTodayDate():String{\n        val current = LocalDateTime.now()\n        val formatDate = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\")\n     var currentDate = current.format(formatDate).toString()\n        return  currentDate\n    }\n\n    private fun takeTimeNow() : String{\n        val current = LocalDateTime.now()\n        val formatTime = DateTimeFormatter.ofPattern(\"HH:mm\")\n        return current.format(formatTime).toString()\n    }\n}\n\n\n**Main Activity**\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val binding = DataBindingUtil.setContentView&lt;ActivityMainBinding&gt;(this, R.layout.activity_main)\n        binding.buttonStart.setOnClickListener { startService() }\n        binding.buttonStop.setOnClickListener {stopService()  }\n        startService()\n    }\n\n\n    private fun startService() {\n        val serviceIntent = Intent(this, ForegroundService::class.java)\n        serviceIntent.putExtra(\"time\", 1)\n\n        ContextCompat.startForegroundService(this, serviceIntent)\n    }\n\n    private fun stopService() {\n        val serviceIntent = Intent(this, ForegroundService::class.java)\n        stopService(serviceIntent)\n    }\n\n}\n\n*Manifest*\n&lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;\n&lt;uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" /&gt;\n&lt;application\n            android:allowBackup=\"false\"\n            android:icon=\"@drawable/pills\"\n            android:label=\"@string/nameOfApplications\"\n            android:roundIcon=\"@drawable/icon\"\n            android:supportsRtl=\"true\"\n            android:theme=\"@style/AppTheme\"&gt;\n        &lt;service\n                android:name=\".ForegroundService\"\n                android:enabled=\"true\"\n                android:exported=\"true\"/&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\"/&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-jetpack"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1577635185, "post_id": 59520360, "comment_id": 105212852, "body": "I am uncertain why you have that <code>BindingAdapter</code> defined on a <code>companion object</code> of a seemingly-unrelated class. Since this affecting <code>ImageView</code>, you can define it as an extension function on <code>ImageView</code> itself. See <a href=\"https://gitlab.com/commonsguy/cw-jetpack-kotlin/blob/v0.6/Bookmarker/src/main/java/com/commonsware/jetpack/bookmarker/BindingAdapters.kt\" rel=\"nofollow noreferrer\">this <code>BindingAdapter</code></a> and <a href=\"https://gitlab.com/commonsguy/cw-jetpack-kotlin/blob/v0.6/Bookmarker/src/main/res/layout/row.xml\" rel=\"nofollow noreferrer\">this layout that uses it</a>."}, {"owner": {"reputation": 3130, "user_id": 448037, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/fcfe21e407d1ac6529482dcbb24ed370?s=128&d=identicon&r=PG", "display_name": "Android_programmer_office", "link": "https://stackoverflow.com/users/448037/android-programmer-office"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1577644424, "post_id": 59520360, "comment_id": 105215264, "body": "I tried by using extension fncn, still not able to view image"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1577644520, "post_id": 59520360, "comment_id": 105215282, "body": "Perhaps there is an issue with the URL or with Picasso&#39;s ability to use it. Check Logcat for messages."}], "answers": [{"tags": [], "owner": {"reputation": 1213, "user_id": 8012516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea08238ea40a010d752fadfe7b1effdf?s=128&d=identicon&r=PG&f=1", "display_name": "haresh", "link": "https://stackoverflow.com/users/8012516/haresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577698628, "creation_date": 1577698628, "answer_id": 59528595, "question_id": 59520360, "link": "https://stackoverflow.com/questions/59520360/not-able-to-bind-image-with-image-url-in-android-databinding-with-kotlin/59528595#59528595", "title": "Not able to bind image with image url in Android DataBinding with Kotlin", "body": "<p>In DataBinding Adapter :</p>\n\n<p>// BindingAdapter.kt  file</p>\n\n<p>// set Picasso image</p>\n\n<pre><code>@BindingAdapter(\"imageUrl\")\n  fun loadImage(view: ImageView, imageUrl: String) {\n  Picasso.get()\n .load(imageUrl)            \n .into(view)\n</code></pre>\n\n<p>// set drawable image</p>\n\n<pre><code>fun setImageDrawable(view: ImageView, drawable: Drawable) {\nview.setImageDrawable(drawable)\n }\n\n}\n</code></pre>\n\n<p>// in xml </p>\n\n<pre><code>   &lt;ImageView\n        android:id=\"@+id/imgHexaLeft\"\n        android:layout_width=\"53dp\"\n        android:layout_height=\"53dp\"\n        android:layout_marginTop=\"12dp\"\n         app:imageUrl=\"@{historyData.backgroundImg}\"\n     /&gt;\n</code></pre>\n\n<p>Same you can set the drawable.</p>\n"}], "owner": {"reputation": 3130, "user_id": 448037, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/fcfe21e407d1ac6529482dcbb24ed370?s=128&d=identicon&r=PG", "display_name": "Android_programmer_office", "link": "https://stackoverflow.com/users/448037/android-programmer-office"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577968654, "creation_date": 1577630448, "last_edit_date": 1577968654, "question_id": 59520360, "link": "https://stackoverflow.com/questions/59520360/not-able-to-bind-image-with-image-url-in-android-databinding-with-kotlin", "title": "Not able to bind image with image url in Android DataBinding with Kotlin", "body": "<p>I am facing issues in setting image url to image view using data binding in Kotlin.\nI have used BindingAdapter but still image is not populated with image url. Please find below the source and resource files used and help me in resolving this issue.</p>\n\n<p>My Data class is as below:</p>\n\n<pre><code> data class ItemInfo(val img:String,val fname:String,val lname:String){\n\n   companion object {\n    @BindingAdapter(\"img\")\n    @JvmStatic\n    fun loadImage(imageView: ImageView, url: String) {\n    if (url != \"\") {\n        // Picasso.with(imageView.getContext()).load(url).resize(200, 200).into(imageView).\n        Picasso.get().load(url).into(imageView)\n    }\n\n}\n\n\n}\n }\n</code></pre>\n\n<p>My Layout is as below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n  &lt;layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\" &gt;\n\n&lt;data&gt;\n    &lt;variable name=\"item\"\n              type=\"com.example.jetpackmvvmdemos.DataBindingAdapter.models.ItemInfo\"&gt;\n    &lt;/variable&gt;\n&lt;/data&gt;\n\n&lt;androidx.cardview.widget.CardView \n     android:layout_width=\"match_parent\"\n     android:layout_height=\"wrap_content\"\n     android:layout_marginTop=\"8dp\"\n     android:layout_marginStart=\"8dp\"\n     android:layout_marginEnd=\"8dp\"&gt;\n\n   &lt;androidx.constraintlayout.widget.ConstraintLayout\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"wrap_content\"\n         android:layout_margin=\"10dp\"&gt;\n\n   &lt;ImageView\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:id=\"@+id/imageView\"\n        android:scaleType=\"fitXY\"\n        app:img=\"@{item.img}\"\n        app:layout_constraintStart_toStartOf=\"parent\" \n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\" \n        app:layout_constraintEnd_toEndOf=\"parent\" \n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\" \n        android:layout_marginTop=\"8dp\" \n        app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n    &lt;TextView\n        android:text=\"@{item.fname}\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView3\" \n        app:layout_constraintStart_toStartOf=\"parent\" \n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\" \n        app:layout_constraintEnd_toEndOf=\"parent\" \n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\" \n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/imageView\"/&gt;\n    &lt;TextView\n        android:text=\"@{item.lname}\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView4\" \n        app:layout_constraintStart_toStartOf=\"parent\" \n        android:layout_marginLeft=\"8dp\"\n        android:layout_marginStart=\"8dp\" \n        app:layout_constraintEnd_toEndOf=\"parent\" \n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginRight=\"8dp\" \n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/textView3\"/&gt;\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n&lt;/androidx.cardview.widget.CardView&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>ViewModel:</p>\n\n<pre><code>class EmpViewModel:ViewModel() {\n    var empInfoList:MutableList&lt;ItemInfo&gt;\n    init {\n        empInfoList = mutableListOf&lt;ItemInfo&gt;()\n        empInfoList.add(ItemInfo(\"https://via.placeholder.com/50x50.png?text=1\",\"ABC\",\"DEF\"))\n        empInfoList.add(ItemInfo(\"https://via.placeholder.com/50x50.png?text=2\",\"GHI\",\"JKL\"))\n        empInfoList.add(ItemInfo(\"https://via.placeholder.com/50x50.png?text=3\",\"MNO\",\"PQR\"))\n        empInfoList.add(ItemInfo(\"https://via.placeholder.com/50x50.png?text=4\",\"STU\",\"VWX\"))\n\n    }\n\n}\n</code></pre>\n\n<p>Adapter:</p>\n\n<pre><code>class ListInfoAdapter(var context: Context) : RecyclerView.Adapter&lt;ListInfoAdapter.ViewHolder&gt;() {\n    private var list: List&lt;ItemInfo&gt; = emptyList&lt;ItemInfo&gt;()\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n\n        val binding: ListItemBinding = DataBindingUtil.inflate(LayoutInflater.from(context), R.layout.list_item, parent, false)\n        return ListInfoAdapter.ViewHolder(binding)\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n       // Log.d(\"ADapter\", \"Info:::\" + list.get(position).body)\n        holder.bind(list.get(position))\n    }\n\n    fun setAdapterList(list: List&lt;ItemInfo&gt;) {\n        this.list = list\n        notifyDataSetChanged()\n    }\n    override fun getItemCount(): Int = list.size\n\n    class ViewHolder(val binding: ListItemBinding) : RecyclerView.ViewHolder(binding.root) {\n        fun bind(data: Any) {\n            binding.setVariable(BR.item, data) // BR - generated class; BR.item - 'item' is variable name declared in layout\n            binding.executePendingBindings()\n        }\n    }\n}\n</code></pre>\n\n<p>Fragment:</p>\n\n<pre><code>class DataBindingListFragment: Fragment() {\n\n    var fragmentView: View? = null\n    private var listAdapter: ListInfoAdapter? = null\n    private var listLayoutBinding: com.example.jetpackmvvmdemos.databinding.EmpInfoListFragmentLayoutBinding? = null\n   // lateinit var empViewModel: EmpViewModel\n    val empViewModel: EmpViewModel by lazy { ViewModelProviders.of(this).get(EmpViewModel::class.java) }\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n    }\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        listLayoutBinding = DataBindingUtil.inflate(inflater, R.layout.emp_info_list_fragment_layout, container, false)\n        fragmentView = listLayoutBinding?.root\n        initAdapter()\n        setAdapter()\n        fetchEmpInfo()\n        return fragmentView\n    }\n\n\n\n\n    fun fetchEmpInfo() {\n        listAdapter?.setAdapterList(empViewModel.empInfoList)\n\n    }\n\n\n    fun setAdapter(){\n        fragmentView?.emprecyclerView?.apply {\n            layoutManager = LinearLayoutManager(activity)\n            addItemDecoration(DividerItemDecoration(activity, DividerItemDecoration.VERTICAL))\n            adapter = listAdapter\n        }\n    }\n\n    private fun initAdapter() {\n        listAdapter = ListInfoAdapter(this@DataBindingListFragment.requireActivity())\n    }\n}\n</code></pre>\n\n<p>Build.Gradle (App level)</p>\n\n<pre><code>     apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlin-kapt'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion \"29.0.2\"\n    defaultConfig {\n        applicationId \"com.example.jetpackmvvmdemos\"\n        minSdkVersion 15\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    ext.compiler_version = '3.3.1'\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.0.0-beta01'\n    implementation 'androidx.core:core-ktx:1.2.0-rc01'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.2'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.0-alpha4'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha4'\n    kapt \"com.android.databinding:compiler:$compiler_version\"\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    implementation 'androidx.cardview:cardview:1.0.0'\n    def lifecycle_version = \"2.1.0\"\n    // ViewModel and LiveData\n    implementation \"androidx.lifecycle:lifecycle-extensions:$lifecycle_version\"\n    implementation 'com.squareup.picasso:picasso:2.71828'\n}\nkapt {\n    generateStubs = true\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8108382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ce3945eb4eebc934bc214db6cedaf6?s=128&d=identicon&r=PG&f=1", "display_name": "123", "link": "https://stackoverflow.com/users/8108382/123"}, "edited": false, "score": 0, "creation_date": 1577629562, "post_id": 59520232, "comment_id": 105211488, "body": "That was my question, whenever I try to use either of those I can&#39;t return the value from my function."}, {"owner": {"reputation": 3713, "user_id": 3801327, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jBaPg.png?s=128&g=1", "display_name": "Rick Sanchez", "link": "https://stackoverflow.com/users/3801327/rick-sanchez"}, "reply_to_user": {"reputation": 67, "user_id": 8108382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ce3945eb4eebc934bc214db6cedaf6?s=128&d=identicon&r=PG&f=1", "display_name": "123", "link": "https://stackoverflow.com/users/8108382/123"}, "edited": false, "score": 0, "creation_date": 1577629640, "post_id": 59520232, "comment_id": 105211504, "body": "Added to my answer. Sorry, I saw that last part after answering it lol"}], "tags": [], "owner": {"reputation": 3713, "user_id": 3801327, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jBaPg.png?s=128&g=1", "display_name": "Rick Sanchez", "link": "https://stackoverflow.com/users/3801327/rick-sanchez"}, "is_accepted": true, "score": 0, "last_activity_date": 1577629605, "last_edit_date": 1577629605, "creation_date": 1577629448, "answer_id": 59520232, "question_id": 59520173, "link": "https://stackoverflow.com/questions/59520173/how-to-avoid-networkonmainthreadexception-in-this-case/59520232#59520232", "title": "How to avoid NetworkOnMainThreadException in this case?", "body": "<p>You cannot make a network call on Android from the main thread. You must use a worker thread.  </p>\n\n<p>This can be done in plain old Java thread, or some \"higher level\" constructs such as AsyncTask, HandlerThread, RxJava, coroutines etc.   </p>\n\n<p>Normally you can't \"return\" from a thread like you are looking for, as the execution would continue on the main thread after triggering the new one.<br>\nIf you use coroutines, you can do this with suspend functions.  </p>\n\n<p>If you don't want to learn coroutines, with RxJava you'd have to return an observable to the calling functions  </p>\n\n<p>Otherwise, convert your method to callback based, and invoke the callback when you're finished </p>\n"}], "owner": {"reputation": 67, "user_id": 8108382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ce3945eb4eebc934bc214db6cedaf6?s=128&d=identicon&r=PG&f=1", "display_name": "123", "link": "https://stackoverflow.com/users/8108382/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 59520232, "answer_count": 1, "score": 1, "last_activity_date": 1577629605, "creation_date": 1577629088, "question_id": 59520173, "link": "https://stackoverflow.com/questions/59520173/how-to-avoid-networkonmainthreadexception-in-this-case", "title": "How to avoid NetworkOnMainThreadException in this case?", "body": "<p>I have a function:</p>\n\n<pre><code>        fun getUpdatedStr(): DoubleArray {\n            var Strings : DoubleArray = doubleArrayOf()\n            for (i in 0..9) {\n                val page = Jsoup.connect(\"somesite.com\").get()\n                val table = page.select(\"table\").first().select(\"td\").first()\n                Strings += table.text()\n                }\n            return Strings\n        }\n</code></pre>\n\n<p>That throws an <strong>android.os.NetworkOnMainThreadException</strong>. My problem is that if I try to put this function into a Thread then I can't return the value to use it for other functions. What's the best way to work around this?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 13006, "user_id": 2637449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KXkC4.jpg?s=128&g=1", "display_name": "Md. Asaduzzaman", "link": "https://stackoverflow.com/users/2637449/md-asaduzzaman"}, "edited": false, "score": 0, "creation_date": 1577624257, "post_id": 59519303, "comment_id": 105210094, "body": "What is the problem, Can you mention here? Can you also add your <code>todo_list.xml</code> ?"}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1577625835, "post_id": 59519303, "comment_id": 105210476, "body": "you don&#39;t clear <code>paintFlags</code> when <code>mTodo.isDone == 0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 11021795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8XwOZ.jpg?s=128&g=1", "display_name": "Hooni", "link": "https://stackoverflow.com/users/11021795/hooni"}, "is_accepted": true, "score": 0, "last_activity_date": 1577665443, "last_edit_date": 1577665443, "creation_date": 1577622736, "answer_id": 59519441, "question_id": 59519303, "link": "https://stackoverflow.com/questions/59519303/wrongly-run-onbindviewholder-in-recyclerview-kotlin/59519441#59519441", "title": "Wrongly run onBindViewHolder in Recyclerview - Kotlin", "body": "<p>use holder.adapterposition instead of position</p>\n\n<pre><code>val mTODO = mArray[holder.adapterposition]\n</code></pre>\n\n<p>for more info check: <a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter.html?hl=en#onBindViewHolder(VH,%20int)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter.html?hl=en#onBindViewHolder(VH,%20int)</a></p>\n\n<p>edit:\nas @Pawel has pointed out, the flags should be cleared when mTodo.isDone == 0.</p>\n\n<p>that should get the job done</p>\n"}], "owner": {"reputation": 13, "user_id": 12565593, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDoqAmmhfPSSOiebSkvyf7X7YVcn95B8bW6_DZmTg=k-s128", "display_name": "Saeed Damra", "link": "https://stackoverflow.com/users/12565593/saeed-damra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 59519441, "answer_count": 1, "score": 1, "last_activity_date": 1577665443, "creation_date": 1577621672, "last_edit_date": 1577623434, "question_id": 59519303, "link": "https://stackoverflow.com/questions/59519303/wrongly-run-onbindviewholder-in-recyclerview-kotlin", "title": "Wrongly run onBindViewHolder in Recyclerview - Kotlin", "body": "<p>I'am trying to handle my recyclerview put there is a problem\nwhen i scroll down (onBindView function) works fine \nbut when scroll back to the first items in recyclerview everything becomes wrong like the following images.</p>\n\n<pre><code>   package com.leaderspro.mrlawyer.adapters\n\nimport android.graphics.Paint\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport androidx.recyclerview.widget.RecyclerView\nimport com.leaderspro.mrlawyer.R\nimport com.leaderspro.mrlawyer.models.TODOModel\nimport kotlinx.android.synthetic.main.todo_list.view.*\n\n\nclass TODOAdapter(private val mArray: ArrayList&lt;TODOModel&gt;) :\n    RecyclerView.Adapter&lt;TODOAdapter.ViewHolder&gt;() {\n\n    var mView: View? = null\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {\n        mView = LayoutInflater.from(parent.context).inflate(R.layout.todo_list, parent, false)\n\n        return ViewHolder(mView!!)\n    }\n\n    override fun getItemCount(): Int {\n        return mArray.size\n    }\n\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\n\n\n        val mTODO = mArray[position]\n\n\n\n            if (mTODO.isDone == 0) {//not complete\n                holder.ivIsDone.setImageResource(R.drawable.ic_checkbox_unchecked)\n            } else if (mTODO.isDone == 1) {\n                holder.ivIsDone.setImageResource(R.drawable.ic_checkbox_checked)\n                holder.tvTodoTask.paintFlags =\n                    holder.tvTodoTask.paintFlags or Paint.STRIKE_THRU_TEXT_FLAG //put line on done Tasks\n            }\n\n        holder.tvTodoTask.text = mTODO.task\n        holder.tvTODODate.text = mTODO.date\n\n    }\n\n\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n        val tvTodoTask = itemView.tvTodoTask!!\n        val tvTODODate = itemView.tvTODODate!!\n        val ivIsDone = itemView.ivIsDone!!\n\n        val todoListMainLinear = itemView.todoListMainLinear!!\n\n    }\n}\n</code></pre>\n\n<p><strong>works fine</strong>\n<a href=\"https://i.stack.imgur.com/6mBUJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/6mBUJ.png</a></p>\n\n<p><strong>works fine</strong>\n<a href=\"https://i.stack.imgur.com/qcpLK.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/qcpLK.png</a></p>\n\n<p><strong>Wrongly called onBindView when Scroll Back</strong>\n<a href=\"https://i.stack.imgur.com/2sRsu.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/2sRsu.png</a></p>\n"}, {"tags": ["android", "kotlin", "android-activity", "dependency-injection", "composition"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 6311832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f5b84a6fb31cd1ed9cf3aeab20af8?s=128&d=identicon&r=PG&f=1", "display_name": "ThePMO", "link": "https://stackoverflow.com/users/6311832/thepmo"}, "edited": false, "score": 0, "creation_date": 1579768575, "post_id": 59868216, "comment_id": 105878992, "body": "Thank you for your answer, but it doesn&#39;t cover a method of &quot;inserting&quot; functionality into the Android Activity framework functions like onCreate etc."}, {"owner": {"reputation": 363, "user_id": 6311832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f5b84a6fb31cd1ed9cf3aeab20af8?s=128&d=identicon&r=PG&f=1", "display_name": "ThePMO", "link": "https://stackoverflow.com/users/6311832/thepmo"}, "edited": false, "score": 0, "creation_date": 1580138359, "post_id": 59868216, "comment_id": 105989837, "body": "Also, if I&#39;m not mistaken, its not possible to use &quot;this&quot; in any way when delegating interface properties, since &quot;this&quot; doesn&#39;t exist at the moment of delegation yet!"}, {"owner": {"reputation": 8161, "user_id": 9248201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301395c5000a1e23206170d900448aef?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo Ostasha", "link": "https://stackoverflow.com/users/9248201/pavlo-ostasha"}, "reply_to_user": {"reputation": 363, "user_id": 6311832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f5b84a6fb31cd1ed9cf3aeab20af8?s=128&d=identicon&r=PG&f=1", "display_name": "ThePMO", "link": "https://stackoverflow.com/users/6311832/thepmo"}, "edited": false, "score": 0, "creation_date": 1580206206, "post_id": 59868216, "comment_id": 106012722, "body": "Regarding this you are correct  - as I wrote in the answer the code &quot;is not complete and barely functional&quot;. Using composition instead of inheritance will make this possible."}], "tags": [], "owner": {"reputation": 8161, "user_id": 9248201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301395c5000a1e23206170d900448aef?s=128&d=identicon&r=PG&f=1", "display_name": "Pavlo Ostasha", "link": "https://stackoverflow.com/users/9248201/pavlo-ostasha"}, "is_accepted": false, "score": 0, "last_activity_date": 1579727002, "creation_date": 1579727002, "answer_id": 59868216, "question_id": 59519088, "link": "https://stackoverflow.com/questions/59519088/android-kotlin-composing-different-activity-traits-into-one-activity/59868216#59868216", "title": "Android/Kotlin: Composing different Activity &quot;traits&quot; into one activity", "body": "<p>What you are referring to in Kotlin called <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow noreferrer\">interfaces</a> in conjunction with some basic <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">delegation</a>.</p>\n\n<pre><code>interface Base {\n    fun printMessage()\n    fun printMessageLine()\n}\n\nclass BaseImpl(val x: Int) : Base {\n    override fun printMessage() { print(x) }\n    override fun printMessageLine() { println(x) }\n}\n\nclass Derived(b: Base) : Base by b {\n    override fun printMessage() { print(\"abc\") }\n}\n\nfun main() {\n    val b = BaseImpl(10)\n    Derived(b).printMessage()\n    Derived(b).printMessageLine()\n}\n</code></pre>\n\n<p>Though it won't save you from the <code>super</code> problem since it Android framework issue rather than Kotlin Language.</p>\n\n<p>For your case I would do something like </p>\n\n<pre><code>interface BaseActivityContainer{\n var activity: Activity\n}\n\nclass MainActivity: BaseActivityContainer{\n\noverride var activity: Activity = this\n\n}\n\ninterface BaseDoable: BaseActivityContainer{\n\nfun doActivityStuff(){\n activity.getString(...)\n}\n\n}\n\ninterface BaseDoableSecond: BaseActivityContainer{\n\nfun doActivityStuff(){\n activity.getDrawable(...)\n}\n\n}\n\nclass SomeActivity: MainActivity, BaseDoableSecond by this\n</code></pre>\n\n<p>Handle Lyfecycle events with the help of Android Lifecycle</p>\n\n<p>This is not complete and barely functional but I hope it will clear some stuff for you.</p>\n"}], "owner": {"reputation": 363, "user_id": 6311832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14f5b84a6fb31cd1ed9cf3aeab20af8?s=128&d=identicon&r=PG&f=1", "display_name": "ThePMO", "link": "https://stackoverflow.com/users/6311832/thepmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1580138454, "creation_date": 1577619833, "last_edit_date": 1580138454, "question_id": 59519088, "link": "https://stackoverflow.com/questions/59519088/android-kotlin-composing-different-activity-traits-into-one-activity", "title": "Android/Kotlin: Composing different Activity &quot;traits&quot; into one activity", "body": "<p>I'm looking for a way to combine different features in an Android activity, that should be reusable for different activity classes. Specifically the problem arises from overriding open methods where the super's implementation also has to be called.</p>\n\n<pre><code>open class FirstActivity : FragmentActicity() {\n  override fun onStart() {\n    super.onStart()\n    doSomething()\n  }\n}\n</code></pre>\n\n<p>That's simple enough, but it is not reusable. I could e.g. want to have the same behavior with a different base activity class:</p>\n\n<pre><code>open class SecondActivity : AppCompatActivity() {\n  override fun onStart() {\n    super.onStart()\n    doSomething()\n  }\n}\n</code></pre>\n\n<p>where I'd have to duplicate the code. If I have a very basic functionality like tracking the state of the activity, I would want this in more or less all of my activities which do have different base classes. \nIt get's even worse when I want to create some more features that can be combined:</p>\n\n<pre><code>open class ThirdActivity : FragmentActivity() {\n  override fun onResume() {\n    super.onResume()\n    doSomeResuming()\n  }\n}\n\nopen Class FirstActivityAgain : ThirdActivity {\n  override fun onStart() {\n    super.onStart()\n    doSomething()\n  }\n}\n\nclass MyFragmentActivity : FirstActivity() {\n  override fun onStop() {\n    doSomethingElse()\n    super.onStop()\n  }\n}\n\nclass MyFragmentActivityWithResuming : FirstActivityAgain() {\n  override fun onStop() {\n    doSomethingElse()\n    super.onStop()\n  }\n}\n\nclass MyTopBarActivity : SecondActivity() {\n  override fun onStop() {\n    doSomethingElse()\n    super.onStop()\n  }\n}\n\n\n</code></pre>\n\n<p><a href=\"https://www.geeksforgeeks.org/trait-linearization-in-scala/\" rel=\"noreferrer\">In Scala I can use Traits</a> to do this <a href=\"https://riptutorial.com/scala/example/3404/stackable-modification-with-traits\" rel=\"noreferrer\">stackable modification</a>, which allows for very flexible mixins of functionality. It's even possible to modify the same method over and over again, one just has to be careful with the <a href=\"https://stackoverflow.com/questions/34242536/linearization-order-in-scala\">linearization order</a>. \nNone of this is possible in Kotlin because a Scala Trait is neither equivalent to a Kotlin abstract class nor to a Kotlin Interface.</p>\n\n<p>It doesn't seem to be possible with Kotlin's delegates either. I also thought about using generics, which in my limited imagination could look like this:</p>\n\n<pre><code>open class FirstActivity&lt;BaseActivity : Activity&gt; : BaseActivity() {\n  ...\n}\n</code></pre>\n\n<p>which of course is also not possible. </p>\n\n<p>Is there anything I've overlooked? Can it be done by using Dagger? </p>\n"}]