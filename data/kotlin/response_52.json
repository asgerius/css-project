[{"tags": ["loops", "functional-programming", "break", "kotlin", "continue"], "comments": [{"owner": {"reputation": 1867, "user_id": 3848334, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XyhMu.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/3848334/david"}, "edited": false, "score": 0, "creation_date": 1537252702, "post_id": 34642868, "comment_id": 91704899, "body": "Note: it is good to mention IDE(Android studio maybe Intellij too) not show a warning when use return@forEach in last line of forEach function lambda."}], "answers": [{"comments": [{"owner": {"reputation": 1439, "user_id": 108034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8500c09e0cb583959da82df41ccb6a56?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/108034/mark"}, "edited": false, "score": 0, "creation_date": 1540476607, "post_id": 34642869, "comment_id": 92887945, "body": "Using breaks and returns with labels like this is a code smell (IMHO). See @user8320224&#39;s answer below for a much more elegant and idiomatic functional solution."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 1439, "user_id": 108034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8500c09e0cb583959da82df41ccb6a56?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/108034/mark"}, "edited": false, "score": 2, "creation_date": 1540654616, "post_id": 34642869, "comment_id": 92949062, "body": "@Mark I adjusted the answer to be a combination of the functional models for this, and the literal answer."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 54, "user_id": 372751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29564e1d5ac741a15478c11f673f0fca?s=128&d=identicon&r=PG", "display_name": "store88", "link": "https://stackoverflow.com/users/372751/store88"}, "edited": false, "score": 1, "creation_date": 1540655750, "post_id": 34642869, "comment_id": 92949376, "body": "@store88 extended the answer to provide more options."}, {"owner": {"reputation": 113, "user_id": 11081843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd5b50c8c61df38c0c60ad354122255?s=128&d=identicon&r=PG&f=1", "display_name": "Yava", "link": "https://stackoverflow.com/users/11081843/yava"}, "edited": false, "score": 0, "creation_date": 1576976711, "post_id": 34642869, "comment_id": 105065717, "body": "unfortunately filter gives me a new list so I cant use it if I need to mutate something and @breaker needs something to label outside of it so its situational"}, {"owner": {"reputation": 1211, "user_id": 2199492, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6dd13243846a5c4b90cc5c7a60098020?s=128&d=identicon&r=PG", "display_name": "Crag", "link": "https://stackoverflow.com/users/2199492/crag"}, "edited": false, "score": 0, "creation_date": 1595247446, "post_id": 34642869, "comment_id": 111399080, "body": "forEachIndexed?"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 117, "last_activity_date": 1540659605, "last_edit_date": 1540659605, "creation_date": 1452114825, "answer_id": 34642869, "question_id": 34642868, "link": "https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin/34642869#34642869", "title": "How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?", "body": "<p>There are other options other than what you are asking for that provide similar functionality.  For example:</p>\n\n<p>You can avoid processing some values using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"noreferrer\"><code>filter</code></a>:  (<em>like a <code>continue</code></em>)</p>\n\n\n\n<pre><code>dataSet.filter { it % 2 == 0 }.forEach {\n    // do work on even numbers\n}\n</code></pre>\n\n<p>You can stop a functional loop by using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-while.html\" rel=\"noreferrer\"><code>takeWhile</code></a>: (<em>like a <code>break</code></em>)</p>\n\n<pre><code>dataSet.takeWhile { it &lt; 10 }.forEach {\n    // do work on numbers as long as they are &lt; 10, otherwise stop\n}\n</code></pre>\n\n<p>A more complex, although nonsensical example where you want to do some processing, skip some resulting values, and then stop at a set of different conditions, would be:</p>\n\n<pre><code>dataSet.asSequence()\n       .takeWhile { it &gt;=  0 }    // a -1 signals end of the dataset (break)\n       .map { it + 1 }            // increment each number\n       .filterNot { it % 5 == 0 } // skip (continue) numbers divisible by 5\n       .map { it - 1 }            // decrement each number by 1\n       .filter { it &lt; 100 }       // skip (continue) if number is &gt;= 100\n       .drop(5)                   // ignore the first 5 numbers\n       .take(10)                  // use the next 10 numbers and end\n       .forEach {\n           // do work on the final list\n       }\n</code></pre>\n\n<p>A combination of these functions tends to eliminate the need for <code>continue</code> or <code>break</code>.  And there are endless different options here and more than can be documented.  To get an idea of what can be done, it is best if you learn all of the functions available in the Kotlin standard library for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-collection/index.html#kotlin.collections.Collection\" rel=\"noreferrer\">collections</a>, lazy <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/-sequence/index.html\" rel=\"noreferrer\">sequences</a>, and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html#kotlin.collections.Iterable\" rel=\"noreferrer\">iterable</a>.</p>\n\n<p>Sometimes there are cases where you have mutating state that still needs to <code>break</code> or <code>continue</code> and is hard to do in a functional model.  You can make it work using more complex functions like <code>fold</code> and <code>reduce</code> combined with the <code>filter</code> and <code>takeWhile</code> functions but sometimes that is harder to grok.  Therefore if you really want that exact behavior you can use <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"noreferrer\">return from lambda expression</a> which mimics a <code>continue</code> or <code>break</code> depending on your usage.</p>\n\n<p>Here is a an example mimicking <code>continue</code>:</p>\n\n\n\n<pre><code>(1..5).forEach  {\n    if (it == 3) return@forEach  // mimic continue@forEach\n    // ... do something more\n}\n</code></pre>\n\n<p>And you can go more complicated and use labels when you having nesting or confusing situations:</p>\n\n<pre><code>(1..3).forEach outer@ { x -&gt;\n    (1..3).forEach inner@ { y -&gt;\n        if (x == 2 &amp;&amp; y == 2) return@outer // mimic continue@outer\n        if (x == 1 &amp;&amp; y == 1) return@inner // mimic continue@inner\n        // ... do something more\n    }\n}\n</code></pre>\n\n<p>If you want to do a <code>break</code> you need something outside the loop that you can return from, here we will use the <code>run()</code> function to help us:</p>\n\n<pre><code>run breaker@ {\n    (1..20).forEach { x -&gt;\n        if (x == 5) return@breaker  // mimic break@forEach\n        // ... do something more\n    }\n}\n</code></pre>\n\n<p>Instead of <code>run()</code> it could be <code>let()</code> or <code>apply()</code> or anything naturally you have surrounding the <code>forEach</code> that is a place you want to break from.  But you will also skip the code within the same block following the <code>forEach</code> so be careful.</p>\n\n<p>These are inlined functions so really they do not really add overhead.</p>\n\n<p>Read the Kotlin reference docs for <a href=\"https://kotlinlang.org/docs/reference/returns.html\" rel=\"noreferrer\">Returns and Jumps</a> for all the special cases including for anonymous functions.</p>\n\n<hr/>\n\n<p><strong>Here is a unit test</strong> proving this all works:</p>\n\n<pre><code>@Test fun testSo32540947() {\n    val results = arrayListOf&lt;Pair&lt;Int,Int&gt;&gt;()\n    (1..3).forEach outer@ { x -&gt;\n        (1..3).forEach inner@ { y -&gt;\n            if (x == 2 &amp;&amp; y == 2) return@outer // continue @outer\n            if (x == 1 &amp;&amp; y == 1) return@inner // continue @inner\n            results.add(Pair(x,y))\n        }\n    }\n\n    assertEquals(listOf(Pair(1,2), Pair(1,3), Pair(2,1), Pair(3,1), Pair(3,2), Pair(3,3)), results)\n\n    val results2 = arrayListOf&lt;Int&gt;()\n    run breaker@ {\n        (1..20).forEach { x -&gt;\n            if (x == 5) return@breaker\n            results2.add(x)\n        }\n    }\n\n    assertEquals(listOf(1,2,3,4), results2)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540656177, "post_id": 38590741, "comment_id": 92949514, "body": "This is a complete misuse of <code>any</code> function which is designed to just find if a condition exists in the sequence and return true/false if so, ending as early as possible.  It is not designed to be used for processing, nor can be used in the middle of a functional chain, but rather only at the end."}], "tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": false, "score": 0, "last_activity_date": 1469538330, "creation_date": 1469538330, "answer_id": 38590741, "question_id": 34642868, "link": "https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin/38590741#38590741", "title": "How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?", "body": "<p><code>forEach</code> with break can be specificly substituted with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/any.html\" rel=\"nofollow\">any</a> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/any.html\" rel=\"nofollow\">function</a>:</p>\n\n<pre><code>(1..20).any { x -&gt;\n    (x == 5).apply { // break on true\n        if (!this) {\n            results2.add(x)\n        }\n    }\n}\n</code></pre>\n\n<p>Or possibly even shorter:</p>\n\n<pre><code>(1..20).any { x -&gt;\n    results2.add(x)\n    x == 4 // break on true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 0, "creation_date": 1509709152, "post_id": 47094236, "comment_id": 81139051, "body": "A usage example would improve your answer."}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 2, "creation_date": 1513163904, "post_id": 47094236, "comment_id": 82544452, "body": "Beware that this would copy all satisfying elements into newly allocated intermediate collection."}, {"owner": {"reputation": 1439, "user_id": 108034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8500c09e0cb583959da82df41ccb6a56?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/108034/mark"}, "edited": false, "score": 0, "creation_date": 1540476400, "post_id": 47094236, "comment_id": 92887810, "body": "When dealing with a sequence instead of (or created from) an array, the aforementioned concern about intermediate collections is irrelevant (since sequences are lazy and don&#39;t build intermediate collections).  IMHO, this is a better answer than the accepted one, you just need to use it on a sequence."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540655904, "post_id": 47094236, "comment_id": 92949420, "body": "Sequences are not always faster, depends on list size and the actions taken. This has been proven repeatedly."}, {"owner": {"reputation": 1439, "user_id": 108034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8500c09e0cb583959da82df41ccb6a56?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/108034/mark"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540846195, "post_id": 47094236, "comment_id": 93006765, "body": "@JaysonMinard if your comment was addressed to me (seems like it is), note that i didn&#39;t say a sequence would be faster--just that using a sequence would nullify the previously stated concern about intermediate collections."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540933440, "post_id": 47094236, "comment_id": 93044166, "body": "it was just a generic thought to make sure that wasn&#39;t inferred as well."}], "tags": [], "owner": {"reputation": 162, "user_id": 8320224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690c13ebd4b14ac64b9b34e9962ec668?s=128&d=identicon&r=PG&f=1", "display_name": "user8320224", "link": "https://stackoverflow.com/users/8320224/user8320224"}, "is_accepted": false, "score": 2, "last_activity_date": 1509712606, "last_edit_date": 1509712606, "creation_date": 1509706988, "answer_id": 47094236, "question_id": 34642868, "link": "https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin/47094236#47094236", "title": "How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?", "body": "<p><a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-while.html\" rel=\"nofollow noreferrer\">takeWhile</a> stdlib function may be used instead of break.</p>\n\n<p>For example,</p>\n\n<pre><code>val array = arrayOf(2, 8, 4, 5, 13, 12, 16)\narray.takeWhile { it % 2 == 0 }.forEach { println(it) } // break on odd\narray.takeWhile { it % 3 != 0 }.forEach { println(it) } // break on 3 * n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540655837, "post_id": 51371652, "comment_id": 92949400, "body": "The example for <code>first</code> is misleading because it returns the value instead of just stopping the loop and having processing after.  It is not the same as a break."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540708809, "post_id": 51371652, "comment_id": 92958952, "body": "Hi @JaysonMinard, do check out that we are using <code>asSequence()</code>. This will stop the loop upon finding it. Please check <a href=\"https://medium.com/@elye.project/kotlin-slow-list-and-lazy-sequence-61691fc974c5\" rel=\"nofollow noreferrer\">medium.com/@elye.project/&hellip;</a> to understand the different processing between list and sequence"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540934368, "post_id": 51371652, "comment_id": 93044494, "body": "Sure, it just feels backwards to stop your functional chain using a function not designed for that purpose, <code>first</code> is &quot;Returns the first element matching the given predicate&quot; not &quot;continue while a predicate is true&quot; which is <code>takeWhile</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540934626, "post_id": 51371652, "comment_id": 93044572, "body": "Second. <code>first</code> throws an exception if not found, which makes it less like <code>break</code> than even having the wrong description.  It is not a good general purpose replacement for <code>break</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540935035, "post_id": 51371652, "comment_id": 93044706, "body": "Third, the two samples of the code are not equivalent.  One prints 60 the other does not."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1540935069, "post_id": 51371652, "comment_id": 93044717, "body": "Fourth, you promote the non idiomatic use of the function <code>map</code> when you should be using <code>onEach</code> its its place or after a <code>takeWhile { it != 60 }</code> a <code>forEach</code>."}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": -1, "last_activity_date": 1531787562, "creation_date": 1531787562, "answer_id": 51371652, "question_id": 34642868, "link": "https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin/51371652#51371652", "title": "How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?", "body": "<p>If there's a need to use <code>continue</code> or <code>break</code>, it is not ideal to use <code>forEach</code> compare to normal <code>for-loop</code></p>\n\n<p>If you really like to chain your command, and perform like a for-loop, use the normal functional chain, instead of <code>forLoop</code></p>\n\n<p>E.g. for</p>\n\n<pre><code>    for(i in 0 until 100 step 3) {\n        if (i == 6) continue\n        if (i == 60) break\n        println(i)\n    }\n</code></pre>\n\n<p>Use <code>map</code> as for-loop, <code>filterNot</code> as continue, and <code>asSequence() &amp; first</code> for break</p>\n\n<pre><code>    (0 until 100 step 3).asSequence()\n            .filterNot { it == 6 }\n            .map { println(it); it }\n            .first { it == 60 }\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26119, "favorite_count": 15, "accepted_answer_id": 34642869, "answer_count": 4, "score": 56, "last_activity_date": 1540659605, "creation_date": 1452114825, "last_edit_date": 1610973576, "question_id": 34642868, "link": "https://stackoverflow.com/questions/34642868/how-do-i-do-a-break-or-continue-when-in-a-functional-loop-within-kotlin", "title": "How do I do a &quot;break&quot; or &quot;continue&quot; when in a functional loop within Kotlin?", "body": "<p>In Kotlin, I cannot do a <code>break</code> or <code>continue</code> within a function loop and my lambda -- like I can from a normal <code>for</code> loop.  For example, this does not work:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>(1..5).forEach {\n    continue@forEach  // not allowed, nor break@forEach\n}\n</code></pre>\n<p>There are <a href=\"https://confluence.jetbrains.com/display/Kotlin/Returns+and+jumps#Returnsandjumps-Breakandcontinueincustomcontrolstructures\" rel=\"nofollow noreferrer\">old documentation</a> that mentions this being available but it appears it was never implemented.  What is the best way to get the same behavior when I want to <code>continue</code> or <code>break</code> from within the lambda?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.  Also to clarify some really old answers written for alphas of Kotlin that are not accurate for current-day Kotlin.</em></p>\n"}, {"tags": ["java", "kotlin", "collections", "java-8", "java-stream"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456838809, "post_id": 34642254, "comment_id": 59122959, "body": "In cases where you have no choice but to use <code>collect(Collectors.toList())</code> or similar, you might hit this issue:  <a href=\"http://stackoverflow.com/a/35722167/3679676\">stackoverflow.com/a/35722167/3679676</a> (the issue, with workarounds)"}], "answers": [{"comments": [{"owner": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "edited": false, "score": 0, "creation_date": 1458882586, "post_id": 34642255, "comment_id": 60061364, "body": "Is there an equivalent to Java8&#39;s parallelStream() in Kotlin?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "edited": false, "score": 0, "creation_date": 1459109215, "post_id": 34642255, "comment_id": 60133708, "body": "The answer about immutable collections and Kotlin is the same answer for @arnab here for parallel, other libraries exist, use them: <a href=\"http://stackoverflow.com/a/34476880/3679676\">stackoverflow.com/a/34476880/3679676</a>"}, {"owner": {"reputation": 164, "user_id": 2711105, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7207debf9f46350a4ce327f5b51c305e?s=128&d=identicon&r=PG", "display_name": "roborative", "link": "https://stackoverflow.com/users/2711105/roborative"}, "reply_to_user": {"reputation": 2142, "user_id": 117750, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a3c5aa6a5e3d8e33424f6ac89400c2ec?s=128&d=identicon&r=PG", "display_name": "arnab", "link": "https://stackoverflow.com/users/117750/arnab"}, "edited": false, "score": 2, "creation_date": 1477782023, "post_id": 34642255, "comment_id": 67904467, "body": "@arnab You might want to look at the Kotlin support for Java 7/8 features (in particular, kotlinx-support-jdk8) that was made available earlier this year: <a href=\"https://discuss.kotlinlang.org/t/jdk7-8-features-in-kotlin-1-0/1625\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/jdk7-8-features-in-kotlin-1-0/1625</a>"}, {"owner": {"reputation": 8911, "user_id": 775138, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XAKUy.jpg?s=128&g=1", "display_name": "herman", "link": "https://stackoverflow.com/users/775138/herman"}, "edited": false, "score": 0, "creation_date": 1521737047, "post_id": 34642255, "comment_id": 85870083, "body": "Is it really idiomatic to use 3 different &quot;it&quot; references in one statement?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1521844488, "post_id": 34642255, "comment_id": 85921178, "body": "It is a preference, in the samples above I was keeping them short and only providing a local name for a parameter if necessary."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 274, "last_activity_date": 1557067146, "last_edit_date": 1557067146, "creation_date": 1452112475, "answer_id": 34642255, "question_id": 34642254, "link": "https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr/34642255#34642255", "title": "What Java 8 Stream.collect equivalents are available in the standard Kotlin library?", "body": "<p>There are functions in the Kotlin stdlib for average, count, distinct,filtering, finding, grouping, joining, mapping, min, max, partitioning, slicing, sorting, summing, to/from arrays, to/from lists, to/from maps, union, co-iteration, all the functional paradigms, and more.  So you can use those to create little 1-liners and there is no need to use the more complicated syntax of Java 8.  </p>\n\n<p><s><em>I think the only thing missing from the built-in Java 8 <code>Collectors</code> class is summarization (but in <a href=\"https://stackoverflow.com/a/34661483/3679676\">another answer to this question</a> is a simple solution)</em>.  </p>\n\n<p>One thing missing from both is batching by count, which is seen in <a href=\"https://stackoverflow.com/a/34504231/3679676\">another Stack Overflow answer</a> and has a simple answer as well. Another interesting case is this one also from Stack Overflow: <a href=\"https://stackoverflow.com/questions/32574783/idiomatic-way-to-spilt-sequence-into-three-lists-using-kotlin\">Idiomatic way to spilt sequence into three lists using Kotlin</a>.  And if you want to create something like <code>Stream.collect</code> for another purpose, see <a href=\"https://stackoverflow.com/questions/34639208\">Custom Stream.collect in Kotlin</a></s></p>\n\n<p><strong>EDIT 11.08.2017:</strong> Chunked/windowed collection operations were added in kotlin 1.2 M2, see <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-2-m2-is-out/\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-2-m2-is-out/</a></p>\n\n<hr>\n\n<p>It is always good to explore the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html\" rel=\"noreferrer\">API Reference for kotlin.collections</a> as a whole before creating new functions that might already exist there.</p>\n\n<p>Here are some conversions from Java 8 <code>Stream.collect</code> examples to the equivalent in Kotlin:</p>\n\n<p><strong>Accumulate names into a List</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:  \nList&lt;String&gt; list = people.stream().map(Person::getName).collect(Collectors.toList());\n</code></pre>\n\n<pre><code>// Kotlin:\nval list = people.map { it.name }  // toList() not needed\n</code></pre>\n\n<p><strong>Convert elements to strings and concatenate them, separated by commas</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nString joined = things.stream()\n                       .map(Object::toString)\n                       .collect(Collectors.joining(\", \"));\n</code></pre>\n\n<pre><code>// Kotlin:\nval joined = things.joinToString(\", \")\n</code></pre>\n\n<p><strong>Compute sum of salaries of employee</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nint total = employees.stream()\n                      .collect(Collectors.summingInt(Employee::getSalary)));\n</code></pre>\n\n<pre><code>// Kotlin:\nval total = employees.sumBy { it.salary }\n</code></pre>\n\n<p><strong>Group employees by department</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nMap&lt;Department, List&lt;Employee&gt;&gt; byDept\n     = employees.stream()\n                .collect(Collectors.groupingBy(Employee::getDepartment));\n</code></pre>\n\n<pre><code>// Kotlin:\nval byDept = employees.groupBy { it.department }\n</code></pre>\n\n<p><strong>Compute sum of salaries by department</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nMap&lt;Department, Integer&gt; totalByDept\n     = employees.stream()\n                .collect(Collectors.groupingBy(Employee::getDepartment,\n                     Collectors.summingInt(Employee::getSalary)));\n</code></pre>\n\n<pre><code>// Kotlin:\nval totalByDept = employees.groupBy { it.dept }.mapValues { it.value.sumBy { it.salary }}\n</code></pre>\n\n<p><strong>Partition students into passing and failing</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nMap&lt;Boolean, List&lt;Student&gt;&gt; passingFailing =\n     students.stream()\n             .collect(Collectors.partitioningBy(s -&gt; s.getGrade() &gt;= PASS_THRESHOLD));\n</code></pre>\n\n<pre><code>// Kotlin:\nval passingFailing = students.partition { it.grade &gt;= PASS_THRESHOLD }\n</code></pre>\n\n<p><strong>Names of male members</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nList&lt;String&gt; namesOfMaleMembers = roster\n    .stream()\n    .filter(p -&gt; p.getGender() == Person.Sex.MALE)\n    .map(p -&gt; p.getName())\n    .collect(Collectors.toList());\n</code></pre>\n\n<pre><code>// Kotlin:\nval namesOfMaleMembers = roster.filter { it.gender == Person.Sex.MALE }.map { it.name }\n</code></pre>\n\n<p><strong>Group names of members in roster by gender</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nMap&lt;Person.Sex, List&lt;String&gt;&gt; namesByGender =\n      roster.stream().collect(\n        Collectors.groupingBy(\n            Person::getGender,                      \n            Collectors.mapping(\n                Person::getName,\n                Collectors.toList())));\n</code></pre>\n\n<pre><code>// Kotlin:\nval namesByGender = roster.groupBy { it.gender }.mapValues { it.value.map { it.name } }   \n</code></pre>\n\n<p><strong>Filter a list to another list</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nList&lt;String&gt; filtered = items.stream()\n    .filter( item -&gt; item.startsWith(\"o\") )\n    .collect(Collectors.toList());\n</code></pre>\n\n<pre><code>// Kotlin:\nval filtered = items.filter { it.startsWith('o') } \n</code></pre>\n\n<p><strong>Finding shortest string a list</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nString shortest = items.stream()\n    .min(Comparator.comparing(item -&gt; item.length()))\n    .get();\n</code></pre>\n\n<pre><code>// Kotlin:\nval shortest = items.minBy { it.length }\n</code></pre>\n\n<p><strong>Counting items in a list after filter is applied</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nlong count = items.stream().filter( item -&gt; item.startsWith(\"t\")).count();\n</code></pre>\n\n<pre><code>// Kotlin:\nval count = items.filter { it.startsWith('t') }.size\n// but better to not filter, but count with a predicate\nval count = items.count { it.startsWith('t') }\n</code></pre>\n\n<p>and on it goes...  In all cases, no special fold, reduce, or other functionality was required to mimic <code>Stream.collect</code>.  If you have further use cases, add them in comments and we can see!</p>\n\n<h2>About laziness</h2>\n\n<p>If you want to lazy process a chain, you can convert to a <code>Sequence</code> using <code>asSequence()</code> before the chain.  At the end of the chain of functions, you usually end up with a <code>Sequence</code> as well.  Then you can use <code>toList()</code>, <code>toSet()</code>, <code>toMap()</code> or some other function to materialize the <code>Sequence</code> at the end.</p>\n\n<pre><code>// switch to and from lazy\nval someList = items.asSequence().filter { ... }.take(10).map { ... }.toList()\n\n// switch to lazy, but sorted() brings us out again at the end\nval someList = items.asSequence().filter { ... }.take(10).map { ... }.sorted()\n</code></pre>\n\n<h2>Why are there no Types?!?</h2>\n\n<p>You will notice the Kotlin examples do not specify the types.  This is because Kotlin has full type inference and is completely type safe at compile time.  More so than Java because it also has nullable types and can help prevent the dreaded NPE.  So this in Kotlin:</p>\n\n<pre><code>val someList = people.filter { it.age &lt;= 30 }.map { it.name }\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>val someList: List&lt;String&gt; = people.filter { it.age &lt;= 30 }.map { it.name }\n</code></pre>\n\n<p>Because Kotlin knows what <code>people</code> is, and that <code>people.age</code> is <code>Int</code> therefore the filter expression only allows comparison to an <code>Int</code>, and that <code>people.name</code> is a <code>String</code> therefore the <code>map</code> step produces a <code>List&lt;String&gt;</code> (readonly <code>List</code> of <code>String</code>).</p>\n\n<p>Now, if <code>people</code> were possibly <code>null</code>, as-in a <code>List&lt;People&gt;?</code> then:</p>\n\n<pre><code>val someList = people?.filter { it.age &lt;= 30 }?.map { it.name }\n</code></pre>\n\n<p>Returns a <code>List&lt;String&gt;?</code> that would need to be null checked (<em>or use one of the other Kotlin operators for nullable values, see this <a href=\"https://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\">Kotlin idiomatic way to deal with nullable values</a> and also <a href=\"https://stackoverflow.com/questions/26341225/idiomatic-way-of-handling-nullable-or-empty-list-in-kotlin\">Idiomatic way of handling nullable or empty list in Kotlin</a></em>)</p>\n\n<h2>See also:</h2>\n\n<ul>\n<li>API Reference for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-iterable/index.html\" rel=\"noreferrer\">extension functions for Iterable</a></li>\n<li>API reference for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-array/index.html\" rel=\"noreferrer\">extension functions for Array</a></li>\n<li>API reference for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-list/index.html\" rel=\"noreferrer\">extension functions for List</a></li>\n<li>API reference for <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/kotlin.-map/index.html\" rel=\"noreferrer\">extension functions to Map</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1454935990, "post_id": 34661483, "comment_id": 58251432, "body": "In stream 5 there isn&#39;t any plus to use two maps instead of one <code>.map { it.substring(1).toInt() }</code>: as you know well inferred type is one of kotlin power."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 0, "creation_date": 1455037152, "post_id": 34661483, "comment_id": 58305759, "body": "true, but there is no downside either (for comparability I kept them separate)"}, {"owner": {"reputation": 920, "user_id": 1481689, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/10d0339242a000b0b683ed1d5e25a110?s=128&d=identicon&r=PG", "display_name": "Howard Lovatt", "link": "https://stackoverflow.com/users/1481689/howard-lovatt"}, "edited": false, "score": 0, "creation_date": 1523954944, "post_id": 34661483, "comment_id": 86762488, "body": "But the Java code can easily be made parallel, so in many cases you would be better off calling the Java stream code from Kotlin."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 920, "user_id": 1481689, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/10d0339242a000b0b683ed1d5e25a110?s=128&d=identicon&r=PG", "display_name": "Howard Lovatt", "link": "https://stackoverflow.com/users/1481689/howard-lovatt"}, "edited": false, "score": 0, "creation_date": 1524138494, "post_id": 34661483, "comment_id": 86856131, "body": "@HowardLovatt there are many cases where parallel is not the way to go, especially in heavy concurrent environments where you are already in a thread pool.  I&#39;m betting the average use case is NOT parallel, and it is the rare case.  But of course, you always have the option to use Java classes as you see fit, and none of this was really the purpose of this question and answer."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 47, "last_activity_date": 1506356278, "last_edit_date": 1506356278, "creation_date": 1452187669, "answer_id": 34661483, "question_id": 34642254, "link": "https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr/34661483#34661483", "title": "What Java 8 Stream.collect equivalents are available in the standard Kotlin library?", "body": "<p>For additional examples, here are all the samples from <a href=\"http://winterbe.com/posts/2014/07/31/java8-stream-tutorial-examples/\" rel=\"noreferrer\">Java 8 Stream Tutorial</a> converted to Kotlin.  The title of each example, is derived from the source article:</p>\n\n<p><strong>How streams work</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nList&lt;String&gt; myList = Arrays.asList(\"a1\", \"a2\", \"b1\", \"c2\", \"c1\");\n\nmyList.stream()\n      .filter(s -&gt; s.startsWith(\"c\"))\n      .map(String::toUpperCase)\n     .sorted()\n     .forEach(System.out::println);\n\n// C1\n// C2\n</code></pre>\n\n<pre><code>// Kotlin:\nval list = listOf(\"a1\", \"a2\", \"b1\", \"c2\", \"c1\")\nlist.filter { it.startsWith('c') }.map (String::toUpperCase).sorted()\n        .forEach (::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #1</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nArrays.asList(\"a1\", \"a2\", \"a3\")\n    .stream()\n    .findFirst()\n    .ifPresent(System.out::println);    \n</code></pre>\n\n<pre><code>// Kotlin:\nlistOf(\"a1\", \"a2\", \"a3\").firstOrNull()?.apply(::println)\n</code></pre>\n\n<p>or, create an extension function on String called ifPresent:</p>\n\n<pre><code>// Kotlin:\ninline fun String?.ifPresent(thenDo: (String)-&gt;Unit) = this?.apply { thenDo(this) }\n\n// now use the new extension function:\nlistOf(\"a1\", \"a2\", \"a3\").firstOrNull().ifPresent(::println)\n</code></pre>\n\n<p>See also: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"noreferrer\"><code>apply()</code> function</a></p>\n\n<p>See also: <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">Extension Functions</a></p>\n\n<p>See also:  <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"noreferrer\"><code>?.</code> Safe Call operator</a>, and in general nullability: <a href=\"https://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o/34498563#34498563\">In Kotlin, what is the idiomatic way to deal with nullable values, referencing or converting them</a></p>\n\n<p><strong>Different Kinds of Streams #2</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nStream.of(\"a1\", \"a2\", \"a3\")\n    .findFirst()\n    .ifPresent(System.out::println);    \n</code></pre>\n\n<pre><code>// Kotlin:\nsequenceOf(\"a1\", \"a2\", \"a3\").firstOrNull()?.apply(::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #3</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nIntStream.range(1, 4).forEach(System.out::println);\n</code></pre>\n\n<pre><code>// Kotlin:  (inclusive range)\n(1..3).forEach(::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #4</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nArrays.stream(new int[] {1, 2, 3})\n    .map(n -&gt; 2 * n + 1)\n    .average()\n    .ifPresent(System.out::println); // 5.0    \n</code></pre>\n\n<pre><code>// Kotlin:\narrayOf(1,2,3).map { 2 * it + 1}.average().apply(::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #5</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nStream.of(\"a1\", \"a2\", \"a3\")\n    .map(s -&gt; s.substring(1))\n    .mapToInt(Integer::parseInt)\n    .max()\n    .ifPresent(System.out::println);  // 3\n</code></pre>\n\n<pre><code>// Kotlin:\nsequenceOf(\"a1\", \"a2\", \"a3\")\n    .map { it.substring(1) }\n    .map(String::toInt)\n    .max().apply(::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #6</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nIntStream.range(1, 4)\n    .mapToObj(i -&gt; \"a\" + i)\n    .forEach(System.out::println);\n\n// a1\n// a2\n// a3    \n</code></pre>\n\n<pre><code>// Kotlin:  (inclusive range)\n(1..3).map { \"a$it\" }.forEach(::println)\n</code></pre>\n\n<p><strong>Different Kinds of Streams #7</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nStream.of(1.0, 2.0, 3.0)\n    .mapToInt(Double::intValue)\n    .mapToObj(i -&gt; \"a\" + i)\n    .forEach(System.out::println);\n\n// a1\n// a2\n// a3\n</code></pre>\n\n<pre><code>// Kotlin:\nsequenceOf(1.0, 2.0, 3.0).map(Double::toInt).map { \"a$it\" }.forEach(::println)\n</code></pre>\n\n<h2>Why Order Matters</h2>\n\n<p>This section of the Java 8 Stream Tutorial is the same for Kotlin and Java.</p>\n\n<h2>Reusing Streams</h2>\n\n<p>In Kotlin, it depends on the type of collection whether it can be consumed more than once.  A <code>Sequence</code> generates a new iterator every time, and unless it asserts \"use only once\" it can reset to the start each time it is acted upon.  Therefore while the following fails in Java 8 stream, but works in Kotlin:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nStream&lt;String&gt; stream =\nStream.of(\"d2\", \"a2\", \"b1\", \"b3\", \"c\").filter(s -&gt; s.startsWith(\"b\"));\n\nstream.anyMatch(s -&gt; true);    // ok\nstream.noneMatch(s -&gt; true);   // exception\n</code></pre>\n\n<pre><code>// Kotlin:  \nval stream = listOf(\"d2\", \"a2\", \"b1\", \"b3\", \"c\").asSequence().filter { it.startsWith('b' ) }\n\nstream.forEach(::println) // b1, b2\n\nprintln(\"Any B ${stream.any { it.startsWith('b') }}\") // Any B true\nprintln(\"Any C ${stream.any { it.startsWith('c') }}\") // Any C false\n\nstream.forEach(::println) // b1, b2\n</code></pre>\n\n<p>And in Java to get the same behavior:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nSupplier&lt;Stream&lt;String&gt;&gt; streamSupplier =\n    () -&gt; Stream.of(\"d2\", \"a2\", \"b1\", \"b3\", \"c\")\n          .filter(s -&gt; s.startsWith(\"a\"));\n\nstreamSupplier.get().anyMatch(s -&gt; true);   // ok\nstreamSupplier.get().noneMatch(s -&gt; true);  // ok\n</code></pre>\n\n<p>Therefore in Kotlin the provider of the data decides if it can reset back and provide a new iterator or not.  But if you want to intentionally constrain a <code>Sequence</code> to one time iteration, you can use <code>constrainOnce()</code> function for <code>Sequence</code> as follows:</p>\n\n<pre><code>val stream = listOf(\"d2\", \"a2\", \"b1\", \"b3\", \"c\").asSequence().filter { it.startsWith('b' ) }\n        .constrainOnce()\n\nstream.forEach(::println) // b1, b2\nstream.forEach(::println) // Error:java.lang.IllegalStateException: This sequence can be consumed only once. \n</code></pre>\n\n<h2>Advanced Operations</h2>\n\n<p><strong>Collect example #5</strong> (yes, I skipped those already in the other answer)</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nString phrase = persons\n        .stream()\n        .filter(p -&gt; p.age &gt;= 18)\n        .map(p -&gt; p.name)\n        .collect(Collectors.joining(\" and \", \"In Germany \", \" are of legal age.\"));\n\n    System.out.println(phrase);\n    // In Germany Max and Peter and Pamela are of legal age.    \n</code></pre>\n\n<pre><code>// Kotlin:\nval phrase = persons.filter { it.age &gt;= 18 }.map { it.name }\n        .joinToString(\" and \", \"In Germany \", \" are of legal age.\")\n\nprintln(phrase)\n// In Germany Max and Peter and Pamela are of legal age.\n</code></pre>\n\n<p>And as a side note, in Kotlin we can create simple <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"noreferrer\">data classes</a> and instantiate the test data as follows:</p>\n\n<pre><code>// Kotlin:\n// data class has equals, hashcode, toString, and copy methods automagically\ndata class Person(val name: String, val age: Int) \n\nval persons = listOf(Person(\"Tod\", 5), Person(\"Max\", 33), \n                     Person(\"Frank\", 13), Person(\"Peter\", 80),\n                     Person(\"Pamela\", 18))\n</code></pre>\n\n<p><strong>Collect example #6</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nMap&lt;Integer, String&gt; map = persons\n        .stream()\n        .collect(Collectors.toMap(\n                p -&gt; p.age,\n                p -&gt; p.name,\n                (name1, name2) -&gt; name1 + \";\" + name2));\n\nSystem.out.println(map);\n// {18=Max, 23=Peter;Pamela, 12=David}    \n</code></pre>\n\n<p>Ok, a more interest case here for Kotlin.  First the wrong answers to explore variations of creating a <code>Map</code> from a collection/sequence: </p>\n\n<pre><code>// Kotlin:\nval map1 = persons.map { it.age to it.name }.toMap()\nprintln(map1)\n// output: {18=Max, 23=Pamela, 12=David} \n// Result: duplicates overridden, no exception similar to Java 8\n\nval map2 = persons.toMap({ it.age }, { it.name })\nprintln(map2)\n// output: {18=Max, 23=Pamela, 12=David} \n// Result: same as above, more verbose, duplicates overridden\n\nval map3 = persons.toMapBy { it.age }\nprintln(map3)\n// output: {18=Person(name=Max, age=18), 23=Person(name=Pamela, age=23), 12=Person(name=David, age=12)}\n// Result: duplicates overridden again\n\nval map4 = persons.groupBy { it.age }\nprintln(map4)\n// output: {18=[Person(name=Max, age=18)], 23=[Person(name=Peter, age=23), Person(name=Pamela, age=23)], 12=[Person(name=David, age=12)]}\n// Result: closer, but now have a Map&lt;Int, List&lt;Person&gt;&gt; instead of Map&lt;Int, String&gt;\n\nval map5 = persons.groupBy { it.age }.mapValues { it.value.map { it.name } }\nprintln(map5)\n// output: {18=[Max], 23=[Peter, Pamela], 12=[David]}\n// Result: closer, but now have a Map&lt;Int, List&lt;String&gt;&gt; instead of Map&lt;Int, String&gt;\n</code></pre>\n\n<p>And now for the correct answer:</p>\n\n<pre><code>// Kotlin:\nval map6 = persons.groupBy { it.age }.mapValues { it.value.joinToString(\";\") { it.name } }\n\nprintln(map6)\n// output: {18=Max, 23=Peter;Pamela, 12=David}\n// Result: YAY!!\n</code></pre>\n\n<p>We just needed to join the matching values to collapse the lists and provide a transformer to <code>jointToString</code> to move from <code>Person</code> instance to the <code>Person.name</code>.</p>\n\n<p><strong>Collect example #7</strong></p>\n\n<p>Ok, this one can easily be done without a custom <code>Collector</code>, so let's solve it the Kotlin way, then contrive a new example that shows how to do a similar process for <code>Collector.summarizingInt</code> which does not natively exist in Kotlin.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nCollector&lt;Person, StringJoiner, String&gt; personNameCollector =\nCollector.of(\n        () -&gt; new StringJoiner(\" | \"),          // supplier\n        (j, p) -&gt; j.add(p.name.toUpperCase()),  // accumulator\n        (j1, j2) -&gt; j1.merge(j2),               // combiner\n        StringJoiner::toString);                // finisher\n\nString names = persons\n        .stream()\n        .collect(personNameCollector);\n\nSystem.out.println(names);  // MAX | PETER | PAMELA | DAVID    \n</code></pre>\n\n<pre><code>// Kotlin:\nval names = persons.map { it.name.toUpperCase() }.joinToString(\" | \")\n</code></pre>\n\n<p><em>It's not my fault they picked a trivial example!!!</em>  Ok, here is a new <code>summarizingInt</code> method for Kotlin and a matching sample:</p>\n\n<p><strong>SummarizingInt Example</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Java:\nIntSummaryStatistics ageSummary =\n    persons.stream()\n           .collect(Collectors.summarizingInt(p -&gt; p.age));\n\nSystem.out.println(ageSummary);\n// IntSummaryStatistics{count=4, sum=76, min=12, average=19.000000, max=23}    \n</code></pre>\n\n<pre><code>// Kotlin:\n\n// something to hold the stats...\ndata class SummaryStatisticsInt(var count: Int = 0,  \n                                var sum: Int = 0, \n                                var min: Int = Int.MAX_VALUE, \n                                var max: Int = Int.MIN_VALUE, \n                                var avg: Double = 0.0) {\n    fun accumulate(newInt: Int): SummaryStatisticsInt {\n        count++\n        sum += newInt\n        min = min.coerceAtMost(newInt)\n        max = max.coerceAtLeast(newInt)\n        avg = sum.toDouble() / count\n        return this\n    }\n}\n\n// Now manually doing a fold, since Stream.collect is really just a fold\nval stats = persons.fold(SummaryStatisticsInt()) { stats, person -&gt; stats.accumulate(person.age) }\n\nprintln(stats)\n// output: SummaryStatisticsInt(count=4, sum=76, min=12, max=23, avg=19.0)\n</code></pre>\n\n<p>But it is better to create an extension function, 2 actually to match styles in Kotlin stdlib:</p>\n\n<pre><code>// Kotlin:\ninline fun Collection&lt;Int&gt;.summarizingInt(): SummaryStatisticsInt\n        = this.fold(SummaryStatisticsInt()) { stats, num -&gt; stats.accumulate(num) }\n\ninline fun &lt;T: Any&gt; Collection&lt;T&gt;.summarizingInt(transform: (T)-&gt;Int): SummaryStatisticsInt =\n        this.fold(SummaryStatisticsInt()) { stats, item -&gt; stats.accumulate(transform(item)) }\n</code></pre>\n\n<p>Now you have two ways to use the new <code>summarizingInt</code> functions:</p>\n\n<pre><code>val stats2 = persons.map { it.age }.summarizingInt()\n\n// or\n\nval stats3 = persons.summarizingInt { it.age }\n</code></pre>\n\n<p>And all of these produce the same results.  We can also create this extension to work on <code>Sequence</code> and for appropriate primitive types.</p>\n\n<p>For fun, <a href=\"https://gist.github.com/apatrida/fe04727fa0db290d140f\" rel=\"noreferrer\">compare the Java JDK code vs. Kotlin custom code</a> required to implement this summarization. </p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1456839016, "creation_date": 1456839016, "answer_id": 35724284, "question_id": 34642254, "link": "https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr/35724284#35724284", "title": "What Java 8 Stream.collect equivalents are available in the standard Kotlin library?", "body": "<p>There are some cases where it is hard to avoid calling <code>collect(Collectors.toList())</code> or similar.  In those cases, you can more quickly change to a Kotlin equivalent using extension functions such as:</p>\n\n\n\n<pre><code>fun &lt;T: Any&gt; Stream&lt;T&gt;.toList(): List&lt;T&gt; = this.collect(Collectors.toList&lt;T&gt;())\nfun &lt;T: Any&gt; Stream&lt;T&gt;.asSequence(): Sequence&lt;T&gt; = this.iterator().asSequence()\n</code></pre>\n\n<p>Then you can simply <code>stream.toList()</code> or <code>stream.asSequence()</code> to move back into the Kotlin API.  A case such as <code>Files.list(path)</code> forces you into a <code>Stream</code> when you may not want it, and these extensions can help you to shift back into the standard collections and Kotlin API.</p>\n"}, {"tags": [], "owner": {"reputation": 8911, "user_id": 775138, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/XAKUy.jpg?s=128&g=1", "display_name": "herman", "link": "https://stackoverflow.com/users/775138/herman"}, "is_accepted": false, "score": 2, "last_activity_date": 1521741768, "creation_date": 1521741768, "answer_id": 49435547, "question_id": 34642254, "link": "https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr/49435547#49435547", "title": "What Java 8 Stream.collect equivalents are available in the standard Kotlin library?", "body": "<h2>More on laziness</h2>\n\n<p>Let's take the example solution for \"Compute sum of salaries by department\" given by Jayson:</p>\n\n<pre><code>val totalByDept = employees.groupBy { it.dept }.mapValues { it.value.sumBy { it.salary }}\n</code></pre>\n\n<p>In order to make this lazy (i.e. avoid creating an intermediate map in the <code>groupBy</code> step), it is not possible to use <code>asSequence()</code>.  Instead, we must use <code>groupingBy</code> and <code>fold</code> operation:</p>\n\n<pre><code>val totalByDept = employees.groupingBy { it.dept }.fold(0) { acc, e -&gt; acc + e.salary }\n</code></pre>\n\n<p>To some people this may even be more readable, since you're not dealing with map entries: the <code>it.value</code> part in the solution was confusing for me too at first.</p>\n\n<p>Since this is a common case and we'd prefer not to write out the <code>fold</code> each time, it may be better to just provide a generic <code>sumBy</code> function on <code>Grouping</code>:</p>\n\n<pre><code>public inline fun &lt;T, K&gt; Grouping&lt;T, K&gt;.sumBy(\n        selector: (T) -&gt; Int\n): Map&lt;K, Int&gt; = \n        fold(0) { acc, element -&gt; acc + selector(element) }\n</code></pre>\n\n<p>so that we can simply write:</p>\n\n<pre><code>val totalByDept = employees.groupingBy { it.dept }.sumBy { it.salary }\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41041, "favorite_count": 107, "accepted_answer_id": 34642255, "answer_count": 4, "score": 190, "last_activity_date": 1557067146, "creation_date": 1452112475, "last_edit_date": 1551966431, "question_id": 34642254, "link": "https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr", "title": "What Java 8 Stream.collect equivalents are available in the standard Kotlin library?", "body": "<p>In Java 8, there is <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/reduction.html#collect\" rel=\"noreferrer\"><code>Stream.collect</code></a> which allows aggregations on collections.  In Kotlin, this does not exist in the same way, other than maybe as a collection of extension functions in the stdlib.  But it isn't clear what the equivalences are for different use cases.  </p>\n\n<p>For example, at the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html\" rel=\"noreferrer\">top of the JavaDoc for <code>Collectors</code></a> are examples written for Java 8, and when porting them to Kolin you can't use the Java 8 classes when on a different JDK version, so likely they should be written differently.  </p>\n\n<p>In terms of resources online showing examples of Kotlin collections, they are typically trivial and don't really compare to the same use cases.  What are good examples that really match the cases such as documented for Java 8 <code>Stream.collect</code>?  The list there is:</p>\n\n<ul>\n<li>Accumulate names into a List</li>\n<li>Accumulate names into a TreeSet</li>\n<li>Convert elements to strings and concatenate them, separated by commas</li>\n<li>Compute sum of salaries of employee</li>\n<li>Group employees by department</li>\n<li>Compute sum of salaries by department</li>\n<li>Partition students into passing and failing</li>\n</ul>\n\n<p>With details in the JavaDoc linked above.</p>\n\n<p><strong><em>Note:</em></strong> <em>this question is intentionally written and answered by the author (<a href=\"https://stackoverflow.blog/2011/07/01/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO. Also to clarify some really old answers written for alphas of Kotlin that are not accurate for current-day Kotlin.</em></p>\n"}, {"tags": ["collections", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1452112549, "post_id": 34639208, "comment_id": 57030467, "body": "Related: <a href=\"http://stackoverflow.com/questions/34642254\">stackoverflow.com/questions/34642254</a>"}], "answers": [{"tags": [], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "is_accepted": true, "score": 21, "last_activity_date": 1452102186, "last_edit_date": 1452102186, "creation_date": 1452101791, "answer_id": 34639236, "question_id": 34639208, "link": "https://stackoverflow.com/questions/34639208/what-is-the-kotlin-equivalent-of-java-stream-collect/34639236#34639236", "title": "What is the Kotlin equivalent of Java Stream.collect?", "body": "<p>For scenarios not covered by built in operations <code>toList()</code> etc, you can use the fact that collect is just a fold. So given</p>\n\n<pre><code>val list: List&lt;Pair&lt;String, Int&gt;&gt; = listOf(\"Ann\" to 19, \"John\" to  23)\n</code></pre>\n\n<p>you can collect to a collection of your choice with a fold</p>\n\n<pre><code>val map: Map&lt;String, Int&gt; = list.fold(HashMap(), { accumulator, item -&gt;\n    accumulator.put(item.first, item.second); accumulator})\n</code></pre>\n\n<p>If you then define an extension function</p>\n\n<pre><code>fun &lt;T, R&gt; Iterable&lt;T&gt;.collectTo(accumulator: R, accumulation: (R, T) -&gt; Unit) = \n    this.fold(accumulator, { accumulator, item -&gt; accumulation(accumulator, item); accumulator } )\n</code></pre>\n\n<p>you can further simplify</p>\n\n<pre><code>val map2: Map&lt;String, Int&gt; = list.collectTo(HashMap(), { accumulator, item -&gt; \n    accumulator.put(item.first, item.second) })\n</code></pre>\n\n<p>Although in this case of course you could just use the <code>.toMap</code> extension function.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 8, "last_activity_date": 1452112780, "last_edit_date": 1495542269, "creation_date": 1452109976, "answer_id": 34641595, "question_id": 34639208, "link": "https://stackoverflow.com/questions/34639208/what-is-the-kotlin-equivalent-of-java-stream-collect/34641595#34641595", "title": "What is the Kotlin equivalent of Java Stream.collect?", "body": "<p><strong><em>NOTE:</em></strong> <em>For some common cases where you would use <code>Stream.collect</code> from Java 8, you can use already existing stdlib functions in Kotlin.  For those you cannot find in Kotlin you can explore creating custom flows as described in the answer by @duncan.  This answer is added to help know what is capable within stdlib, so you can decide when to write something custom.  It answers the title of the question <strong>\"What is the Kotlin equivalent of Java Stream.collect?\"</em></strong> </p>\n\n<p>There are functions in the stdlib for average, count, distinct,filtering, finding, grouping, joining, mapping, min, max, partitioning, slicing, sorting, summing, to/from arrays, to/from lists, to/from maps, union, co-iteration, all the functional paradigms, and more.  Little 1-liners and no need to use the more complicated syntax of Java 8.  <em>I think the only thing missing from the built-in Java 8 <code>Collectors</code> class is summarization</em>.  </p>\n\n<p>Another SO Post covers these equivalencies in detail is: <a href=\"https://stackoverflow.com/questions/34642254/what-is-the-java-8-stream-collect-equivalent-in-kotlin\">What Java 8 Stream.collect equivalents are available in the standard Kotlin library?</a></p>\n"}], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8587, "favorite_count": 5, "accepted_answer_id": 34639236, "answer_count": 2, "score": 16, "last_activity_date": 1452293190, "creation_date": 1452101711, "last_edit_date": 1452293190, "question_id": 34639208, "link": "https://stackoverflow.com/questions/34639208/what-is-the-kotlin-equivalent-of-java-stream-collect", "title": "What is the Kotlin equivalent of Java Stream.collect?", "body": "<p>If I want to collect my Kotlin collection into something that isn't built into the stdlib, how do I do it?</p>\n"}, {"tags": ["generics", "rx-java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 4, "last_activity_date": 1452083122, "creation_date": 1452083122, "answer_id": 34633123, "question_id": 34632720, "link": "https://stackoverflow.com/questions/34632720/how-to-obtain-a-correct-type-when-returning-templatet-from-a-static-function/34633123#34633123", "title": "How to obtain a correct type when returning Template&lt;T?&gt; from a static function with null", "body": "<p>Would <code>Observable.just(null as T?)</code> work?</p>\n\n<p>Your original cast will never work because <code>T</code> is a non-nullable type, so null can't be cast to it. So casting it to a nullable <code>T</code> (aka <code>T?</code>) should work.</p>\n"}, {"comments": [{"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1507832785, "post_id": 34633145, "comment_id": 80379290, "body": "Would it be more appropriate to use <code>&lt;T?&gt;</code> instead of <code>&lt;T&gt;</code> on that <code>just()</code> call?"}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 3, "last_activity_date": 1452083200, "creation_date": 1452083200, "answer_id": 34633145, "question_id": 34632720, "link": "https://stackoverflow.com/questions/34632720/how-to-obtain-a-correct-type-when-returning-templatet-from-a-static-function/34633145#34633145", "title": "How to obtain a correct type when returning Template&lt;T?&gt; from a static function with null", "body": "<p>The simplest workaround is to explicitly specify generic argument:</p>\n\n<pre><code>public fun get(): Observable&lt;T?&gt; {\n    return if (someCondition()) {\n        Observable.just(someLocalVarOfTypeT)\n    } else {\n        Observable.just&lt;T&gt;(null)        \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 2388775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c7f157fb2f88191e968dd5ef011dc268?s=128&d=identicon&r=PG", "display_name": "Motorro", "link": "https://stackoverflow.com/users/2388775/motorro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 34633145, "answer_count": 2, "score": 3, "last_activity_date": 1505853766, "creation_date": 1452081840, "last_edit_date": 1505853766, "question_id": 34632720, "link": "https://stackoverflow.com/questions/34632720/how-to-obtain-a-correct-type-when-returning-templatet-from-a-static-function", "title": "How to obtain a correct type when returning Template&lt;T?&gt; from a static function with null", "body": "<p>I'm trying some Rx and Kotlin.\nSuppose I have a function that returns <code>Observable&lt;T?&gt;</code>:</p>\n\n<pre><code>public fun get():Observable&lt;T?&gt; {\n    return if (someCondition()) {\n        Observable.just(someLocalVarOfTypeT)\n    } else {\n        Observable.just(null)        \n    }\n}\n</code></pre>\n\n<p>The compiler can't infer <code>Observable.just(null)</code> because it substitutes <code>kotlin.Nothing</code> as <code>T</code> in this expression:</p>\n\n<pre><code>Type mismatch: required rx.Observable&lt;T?&gt; found rx.Observable&lt;kotlin.Nothing?&gt;\n</code></pre>\n\n<p>Trying to cast:</p>\n\n<pre><code>Observable.just(null as T)\n</code></pre>\n\n<p>leads to: </p>\n\n<pre><code>The cast will never succeed\n</code></pre>\n\n<p>The signature of <code>Observable.just(null)</code> is (for convenience):</p>\n\n<pre><code>public final static &lt;T&gt; Observable&lt;T&gt; just(final T value) {\n    return ...\n}\n</code></pre>\n\n<p>What is the correct way to cast such an <code>Observable</code> to the correct type?\nIntermediate variable:</p>\n\n<pre><code>val a: Observable&lt;T?&gt; = Observable.just(null)\n</code></pre>\n\n<p>works, but looks weird...</p>\n"}, {"tags": ["android", "javadoc", "kotlin", "kdoc"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1452083408, "post_id": 34632070, "comment_id": 57011207, "body": "I think you are talking about doc comments, not about annotations. Please edit the question (its name)"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 15, "last_activity_date": 1452084188, "last_edit_date": 1452084188, "creation_date": 1452082093, "answer_id": 34632795, "question_id": 34632070, "link": "https://stackoverflow.com/questions/34632070/kotlin-documentation-doesnt-support-tags-like-p-well/34632795#34632795", "title": "Kotlin documentation doesn&#39;t support tags like &#39;&lt;p&gt;&#39; well", "body": "<p>As said in <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html#inline-markup\">documentation</a>, KDoc (equivalent of Java\u2019s JavaDoc in Kotlin) utilizes regular <a href=\"https://help.github.com/articles/markdown-basics/\">Markdown syntax</a> for inline markup instead of HTML tags.</p>\n\n<p>In Markdown, paragraphs are just split by an empty line, like this:</p>\n\n<pre><code>/**\n * necessary\n *\n * setType is to set the PendingIntend's request code\n */\n</code></pre>\n\n<p>Also, please see <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html#kdoc-syntax\">this example</a> in the Kotlin reference.</p>\n"}], "owner": {"reputation": 1358, "user_id": 5218585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gtN7e.jpg?s=128&g=1", "display_name": "Allen Vork", "link": "https://stackoverflow.com/users/5218585/allen-vork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 1, "accepted_answer_id": 34632795, "answer_count": 1, "score": 7, "last_activity_date": 1452096209, "creation_date": 1452079776, "last_edit_date": 1452096209, "question_id": 34632070, "link": "https://stackoverflow.com/questions/34632070/kotlin-documentation-doesnt-support-tags-like-p-well", "title": "Kotlin documentation doesn&#39;t support tags like &#39;&lt;p&gt;&#39; well", "body": "<p>I'm writing doc comments to describe a method.</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>   /**\n     * &lt;p&gt;necessary\n     * &lt;p&gt;setType is to set the PendingIntend's request code&lt;/p&gt;\n     */\n</code></pre>\n\n<p>But it won't show the paragraphs. If I don't use the <code>&lt;p&gt;</code>, all the documentation is in a line without any break.\nIt works in Java class but when it comes to Kotlin, I don't know how to deal with it.</p>\n"}, {"tags": ["java", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452069812, "post_id": 34628725, "comment_id": 57002946, "body": "To be clear, with &quot;named parameters&quot; you mean explicitly assigning your <code>contentURL</code> param? Because with the <code>onCompletion = ...</code> thing you&#39;re <i>already</i> using named parameters."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452069946, "post_id": 34628725, "comment_id": 57003025, "body": "Yes, that what I mean. It is a very simple (but poorly worded, will try to fix) question."}, {"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 1, "creation_date": 1452070723, "post_id": 34628725, "comment_id": 57003464, "body": "Interesting corner case there. You&#39;re not allowed to, the compiler says &quot;Named parameters are not allowed for function types&quot;. I&#39;ve left a message for the kotlin people and let&#39;s see if we can get an answer as to why that&#39;s not possible."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452071029, "post_id": 34628725, "comment_id": 57003651, "body": "Ah that&#39;s interesting. If I drop onCompletion = can i refer to the function parameter as &#39;contentURL&#39; instead of &#39;it&#39; ?"}, {"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 1, "creation_date": 1452071687, "post_id": 34628725, "comment_id": 57004017, "body": "I think you&#39;re confusing two things: <i>declaration</i> of <code>onCompletion</code> (in the <code>storeImage</code> fun) can have named params <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\" rel=\"nofollow noreferrer\">&quot;for documentation&quot;</a>. In the <i>definition</i> of <code>onCompletion</code> you&#39;d still need to use the closure syntax: <code>onCompletion = { contentURL -&gt; &#47;* do stuff *&#47; }</code>. On the <i>call site</i>, you&#39;re not allowed to name the param: <code>onCompletion(URL(...))</code>."}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452071796, "post_id": 34628725, "comment_id": 57004083, "body": "What about a function with two or more parameters? How do we refer to them?"}, {"owner": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452072258, "post_id": 34628725, "comment_id": 57004365, "body": "By name: <code>onCompletion = { name: String, contentURL: URL -&gt; ... }</code>, call: <code>onCompletion(&quot;yes!&quot;, URL(...))</code>"}, {"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "reply_to_user": {"reputation": 5111, "user_id": 785663, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b32f09978c0b55f375b81e9179dc568?s=128&d=identicon&r=PG", "display_name": "mabi", "link": "https://stackoverflow.com/users/785663/mabi"}, "edited": false, "score": 0, "creation_date": 1452073074, "post_id": 34628725, "comment_id": 57004906, "body": "I&#39;m sorry. I worded my question very badly. I think the edit/example makes it more clear."}], "answers": [{"comments": [{"owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "edited": false, "score": 1, "creation_date": 1452080850, "post_id": 34630081, "comment_id": 57009750, "body": "I added an IntelliJ feature suggestion, for consideration: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-150085\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-150085</a>"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 10, "last_activity_date": 1452073894, "creation_date": 1452073894, "answer_id": 34630081, "question_id": 34628725, "link": "https://stackoverflow.com/questions/34628725/kotlin-named-parameter-syntax-for-closure-lambda/34630081#34630081", "title": "Kotlin named parameter syntax for closure/lambda", "body": "<p>You can use the regular syntax for giving names to lambda parameters. This works regardless of whether you're using a named argument to pass the lambda to the function.</p>\n\n<pre><code>contentManager.storeImage(image, \"1234/Foobar.jpg\", \n    onCompletion = { bar -&gt;\n       //do something with bar\n    })\n</code></pre>\n"}], "owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5060, "favorite_count": 1, "accepted_answer_id": 34630081, "answer_count": 1, "score": 8, "last_activity_date": 1452073894, "creation_date": 1452069455, "last_edit_date": 1452073039, "question_id": 34628725, "link": "https://stackoverflow.com/questions/34628725/kotlin-named-parameter-syntax-for-closure-lambda", "title": "Kotlin named parameter syntax for closure/lambda", "body": "<p>I created the following function: </p>\n\n<pre><code>public fun storeImage(image: BufferedImage, toPath: String, \n    onCompletion: (contentURL: URL) -&gt; Unit)\n{\n    val file = File(this.storageDirectory, toPath)\n    log.debug(\"storing image: ${file.absolutePath}\")\n    val extension = toPath.extensionOrNull()\n    if (!file.exists())\n    {\n        file.parentFile.mkdirs()\n        file.createNewFile()\n    }\n    ImageIO.write(image, extension!!, FileOutputStream(file.absolutePath))\n    onCompletion(URL(contentBaseUrl, toPath))\n}\n</code></pre>\n\n<p>I can see that I can call it like this: </p>\n\n<pre><code>contentManager.storeImage(image, \"1234/Foobar.jpg\", onCompletion = {\n    println(\"$it\")\n})\n</code></pre>\n\n<p>Or I can use trailing closure syntax: </p>\n\n<pre><code>contentManager.storeImage(image, \"1234/Foobar.jpg\") {\n    println(\"$it\")\n}\n</code></pre>\n\n<p>But how do I call the store image method and call the onCompletion function using named parameters? </p>\n\n<p><strong>Edit/Example:</strong></p>\n\n<p>I would like to call the <code>storeImage</code> method using a syntax similar to: </p>\n\n<pre><code>contentManager.storeImage(image, \"1234/Foobar.jpg\", \n    onCompletion = (bar: URL) : Unit -&gt; {\n       //do something with bar\n    }\n</code></pre>\n\n<p>I could not find the correct syntax in the docs for the above kind of thing. </p>\n"}, {"tags": ["kotlin", "onejar"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452055332, "post_id": 34625539, "comment_id": 56997244, "body": "Important information is missing from your question.   Where is <code>merchant.id</code> located in the source?  Did you look inside the fat jar and see this file there as well?  If it is not there, did you look at how to make sure resources are copied into the fat jar?  Did you read other SO articles like <a href=\"http://stackoverflow.com/questions/5688329/onejar-with-maven-wont-copy-resource-into-jar\" title=\"onejar with maven wont copy resource into jar\">stackoverflow.com/questions/5688329/&hellip;</a>?  Or <a href=\"http://stackoverflow.com/questions/23276836/onejar-and-resource-loading\" title=\"onejar and resource loading\">stackoverflow.com/questions/23276836/&hellip;</a>?"}, {"owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452055431, "post_id": 34625539, "comment_id": 56997277, "body": "@JaysonMinard Yes the file is there - as said in the question - this executes from intelliJ perfectly fine.  Path for resource: <code>&#47;src&#47;main&#47;resources&#47;</code> Path for code: <code>&#47;src&#47;main&#47;java&#47;Route.kt</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452055745, "post_id": 34625539, "comment_id": 56997372, "body": "Is the resource <code>merchant.id</code> within a JAR within the onejar <code>lib&#47;</code> directory?  I.e. your onejar fat JAR is <code>myApp.jar</code> and within it are many other JAR files in <code>lib&#47;dependency1.jar</code> <code>lib&#47;dependency2.jar</code> and within those is your <code>merchant.id</code> instead of the top level jar?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452055823, "post_id": 34625539, "comment_id": 56997388, "body": "(note, it working in intellij isn&#39;t related information since OneJar completely changes what and how clases and resources are packaged compared to intellij running from the flat file system)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452055953, "post_id": 34625539, "comment_id": 56997426, "body": "When the resource is within a JAR within the fat JAR, you have the problem described in: <a href=\"http://stackoverflow.com/questions/21361931/how-to-get-an-url-for-a-resource-directory-when-using-onejar\" title=\"how to get an url for a resource directory when using onejar\">stackoverflow.com/questions/21361931/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/941754/how-to-get-a-path-to-a-resource-in-a-java-jar-file/941785\" title=\"how to get a path to a resource in a java jar file\">stackoverflow.com/questions/941754/&hellip;</a> and  ... and onejar uses its own class loader, not the system one you are using: <a href=\"http://stackoverflow.com/a/20636830/3679676\">stackoverflow.com/a/20636830/3679676</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452056262, "post_id": 34625539, "comment_id": 56997512, "body": "Flagging as duplicate, see the answer below which points out all the duplicate questions in SO"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452056618, "post_id": 34625539, "comment_id": 56997613, "body": "I added a possible solution in my answer for you that I think works, but I cannot test."}, {"owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452056648, "post_id": 34625539, "comment_id": 56997623, "body": "@JaysonMinard I agree with the point on jar being bundled in one-jar. Will including resource in one-jar will help?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452056702, "post_id": 34625539, "comment_id": 56997643, "body": "Try the answer I give below under &quot;One way to defeat this&quot; example"}, {"owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452056732, "post_id": 34625539, "comment_id": 56997656, "body": "@JaysonMinard I only have func main in my code - how do I access MyClass/Class name there"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452057025, "post_id": 34625539, "comment_id": 56997743, "body": "just add a class to the same file <code>class MyApp {}</code>.  You can also try using system class loader but with method <code>getResourceAsStream</code> instead of <code>getResource</code> since the URL may not be a valid URL when nesting into other JAR files.  That could ALSO be your issue is that you grab the URL instead of an inputstream."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452057161, "post_id": 34625539, "comment_id": 56997793, "body": "Read my full answer below, and ask questions there.  This is no longer the right place to continue a discussion when all of my notes are in the answer I wrote, and edited for everything discussed here."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452057379, "post_id": 34625539, "comment_id": 56997845, "body": "in your edited question you have the file name as <code>merchant.id.soft.applepaydev-v1.csr</code> instead of <code>merchant.id</code> therefore unless you shortened that to make this simpler question, that is ALSO a problem with finding the resource if the name does not match."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452057736, "post_id": 34625539, "comment_id": 56997964, "body": "Ok, my answer is as complete as it can be, please read the options presented and comment on the answer."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452058104, "post_id": 34625539, "comment_id": 56998087, "body": "So it worked?  please add a comment to the answer saying which part worked."}], "answers": [{"comments": [{"owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "edited": false, "score": 0, "creation_date": 1452058241, "post_id": 34625902, "comment_id": 56998131, "body": "What I did was to add another class with the function to access the resource. Then used the <code>MyClass::class.java.getResource</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "edited": false, "score": 0, "creation_date": 1452058377, "post_id": 34625902, "comment_id": 56998171, "body": "<code>getResource</code> or <code>getResourceAsStream</code> ... interesting if <code>getResource</code> works, I should edit my answer then."}, {"owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "edited": false, "score": 0, "creation_date": 1452060472, "post_id": 34625902, "comment_id": 56998938, "body": "It does - I just didn&#39;t want the cruft of creating a new class. But <code>fun</code> in cotillon didn&#39;t allow me to do the same."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "edited": false, "score": 0, "creation_date": 1452060559, "post_id": 34625902, "comment_id": 56998967, "body": "You can put your <code>main()</code> within the <code>companion object</code> of a class instead of letting it go to the default created class, add the <code>@JvmStatic</code> annotation and it can be run directly from your new class.  Then you have both."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 5, "last_activity_date": 1452058429, "last_edit_date": 1495541382, "creation_date": 1452056239, "answer_id": 34625902, "question_id": 34625539, "link": "https://stackoverflow.com/questions/34625539/using-resource-in-kotlin-func-does-not-work-with-fat-jar-one-jar/34625902#34625902", "title": "Using resource in kotlin func - does not work with fat jar (one jar)", "body": "<p>OneJar packages all of your code into a JAR file that also contains other JAR files in the <code>lib/</code> directory or as a reference to them in other dirs outside the JAR (depending on the onejar system you are using).  It uses a custom class loader to make this work.  Therefore it defeats your use of the system class loader.</p>\n\n<p><strong>One way to defeat this</strong> is to use a class from the same JAR as the resource you want to load, and therefore its class loader is probably setup correctly into the JAR or nested JAR or magic location in Narnia of your resource:</p>\n\n<pre><code>val stream = MyClass::class.java.getResourceAsStream(\"/merchant.id\")\n</code></pre>\n\n<p>Where <code>MyClass</code> is a class from the same JAR as <code>merchant.id</code>, and the path to the resource must be absolute with the leading <code>/</code></p>\n\n<p>Be sure to get the <strong>stream</strong> and not the resource URL which might not be usable to you since it isn't an understandable URL to the system.  It could produce a URL for a JAR within a JAR which the rest of Java wouldn't understand, for example <code>file:/path/to/jarfile/bot.jar!/config/file.txt</code> (or worse!).  It could work, but I'm not sure when it is a JAR within a JAR with a file in it.</p>\n\n<p><strong>A secondary option:</strong></p>\n\n<pre><code>val stream = Thread.currentThread().contextClassLoader.getResourceAsStream(\"/merchant.id\")\n</code></pre>\n\n<p><strong>Check your resource names:</strong></p>\n\n<p>In your question you say to read resource <code>merchant.id</code> but then show JAR contents having <code>merchant.id.soft.applepaydev-v1.csr</code> ... make sure these names match if you are trying to load this exact resource.</p>\n\n<hr/>\n\n<p>Resource loading in onejar must be customized, which is ugly.  <a href=\"http://one-jar.sourceforge.net/index.php?page=details&amp;file=resources\" rel=\"nofollow noreferrer\">In a link to one resource that talks about resource loading with onejar</a>:  </p>\n\n<blockquote>\n  <p>There are a number of ways that Java supports finding and opening resources:</p>\n  \n  <ul>\n  <li>URL findResource(String resource): returns a resource, or null if not found.</li>\n  <li>Enumeration findResources(String resource): returns an enumeration of resource URL's which match the given string</li>\n  <li>URL.openConnection(): opens a connection to a resource by its URL.</li>\n  </ul>\n  \n  <p>One-Jar supports all of these mechanisms within the context of a One-Jar file, which may contain Jar files that have duplicate resources.</p>\n</blockquote>\n\n<p>This problem is referenced from these other Stack Overflow posts, therefore this is pretty much a duplicate question:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/20635556/classpath-resources-inside-one-jar-packaged-via-sbt/22940040#22940040\">Classpath resources inside one-jar packaged via sbt</a></li>\n<li><a href=\"https://stackoverflow.com/questions/941754/how-to-get-a-path-to-a-resource-in-a-java-jar-file/941785\">How to get a path to a resource in a Java JAR file</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21361931/how-to-get-an-url-for-a-resource-directory-when-using-onejar\">How to get an URL for a resource directory when using OneJar?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23276836/onejar-and-resource-loading\">Onejar and resource loading</a></li>\n</ul>\n\n<p>Googling turns up many more resources.</p>\n"}], "owner": {"reputation": 7686, "user_id": 1602049, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/84787ebc102aac57806f98fa87aa10d0?s=128&d=identicon&r=PG", "display_name": "nitishagar", "link": "https://stackoverflow.com/users/1602049/nitishagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3490, "favorite_count": 1, "accepted_answer_id": 34625902, "answer_count": 1, "score": 1, "last_activity_date": 1505853893, "creation_date": 1452053713, "last_edit_date": 1505853893, "question_id": 34625539, "link": "https://stackoverflow.com/questions/34625539/using-resource-in-kotlin-func-does-not-work-with-fat-jar-one-jar", "title": "Using resource in kotlin func - does not work with fat jar (one jar)", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val urlForCSR: URL = ClassLoader.getSystemClassLoader().getResource(\"merchant.id\")\n    // also tried ClassLoader.getSystemResource(\"merchant.id\")\n    ...\n</code></pre>\n\n<p>The following when run from intelliJ works fine and finds the resource. But when run using the bundled jar it gives a <code>NullPointerException</code>.</p>\n\n<ul>\n<li>Path for resource: <code>/src/main/resources/merchant.id</code></li>\n<li>Path for code: <code>/src/main/java/Route.kt</code></li>\n</ul>\n\n<p>Following is the Maven config snippet:</p>\n\n<pre><code>    ...\n    &lt;!-- Make this jar executable --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;RouteKt&lt;/mainClass&gt; &lt;!-- Class generated (for above main func - named Route.kt) --&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;!-- Includes the runtime dependencies --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.dstovall&lt;/groupId&gt;\n            &lt;artifactId&gt;onejar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.4.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;one-jar&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n</code></pre>\n\n<p>Is there any other war to get URL for the above resource which would work with one-jar or other way of making a fat jar.</p>\n\n<p>Jar content:</p>\n\n<pre><code>jar tf target/Route-1.0-SNAPSHOT.jar\nMETA-INF/\nMETA-INF/MANIFEST.MF\nmerchant.id\nRouteKt$main$1.class\nRouteKt.class\nMETA-INF/maven/\nMETA-INF/maven/groupId/\nMETA-INF/maven/groupId/TokenGenerator/\nMETA-INF/maven/groupId/TokenGenerator/pom.xml\nMETA-INF/maven/groupId/TokenGenerator/pom.properties\n</code></pre>\n\n<p>One-jar content:</p>\n\n<pre><code>META-INF/MANIFEST.MF\nmain/Route-1.0-SNAPSHOT.jar\nlib/kotlin-stdlib-0.1-SNAPSHOT.jar\nlib/kotlin-runtime-0.1-SNAPSHOT.jar\nlib/spark-core-2.3.jar\nlib/slf4j-api-1.7.12.jar\nlib/slf4j-simple-1.7.12.jar\nlib/jetty-server-9.3.2.v20150730.jar\n...\n</code></pre>\n"}, {"tags": ["scala", "kotlin"], "comments": [{"owner": {"reputation": 64109, "user_id": 515054, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c2392da041304fda667e525f3e80fdd?s=128&d=identicon&r=PG", "display_name": "0__", "link": "https://stackoverflow.com/users/515054/0"}, "edited": false, "score": 11, "creation_date": 1452010166, "post_id": 34615947, "comment_id": 56977629, "body": "The Scala compiler spends most of its time, AFAIK, in the typer phase. Scala has a more powerful type system than Kotlin, this might be one reason. Otherwise related question: <a href=\"https://stackoverflow.com/questions/30005124/why-is-compilation-very-slow-for-scala-programs\" title=\"why is compilation very slow for scala programs\">stackoverflow.com/questions/30005124/&hellip;</a> - if you don&#39;t want your question to be closed as opinion-based, it would be helpful to provide concrete numbers, e.g. benchmarks for comparable code."}, {"owner": {"reputation": 5617, "user_id": 837133, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c9edb4f0fe7160cd5e47f3bf32b1bce9?s=128&d=identicon&r=PG", "display_name": "ayvango", "link": "https://stackoverflow.com/users/837133/ayvango"}, "edited": false, "score": 3, "creation_date": 1452012314, "post_id": 34615947, "comment_id": 56979155, "body": "scala is principally non-local. Single change in an implicit may lead entire project to recompile"}, {"owner": {"reputation": 1016, "user_id": 2496309, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/evS93.jpg?s=128&g=1", "display_name": "Micha\u0142 Urbaniak", "link": "https://stackoverflow.com/users/2496309/micha%c5%82-urbaniak"}, "edited": false, "score": 1, "creation_date": 1452020098, "post_id": 34615947, "comment_id": 56983786, "body": "After seeing 0__&#39;s answer we can clearly see that the question can be answered in a non-opinion-based way..."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 3, "creation_date": 1452027404, "post_id": 34615947, "comment_id": 56987758, "body": "@Micha\u0142Urbaniak 0__&#39;s answer is not an answer to the 3 question (title and the other two at the end). Is just a well written draft analysis of the sentence that <i>Kotlin compile faster than Scala</i> and not why... This question is still a primary opinion based for everybody except <i>Dmitry Jemerov</i> :)"}], "answers": [{"comments": [{"owner": {"reputation": 1016, "user_id": 2496309, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/evS93.jpg?s=128&g=1", "display_name": "Micha\u0142 Urbaniak", "link": "https://stackoverflow.com/users/2496309/micha%c5%82-urbaniak"}, "edited": false, "score": 5, "creation_date": 1452028440, "post_id": 34616856, "comment_id": 56988304, "body": "A very good answer to a poor question :)"}, {"owner": {"reputation": 64109, "user_id": 515054, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c2392da041304fda667e525f3e80fdd?s=128&d=identicon&r=PG", "display_name": "0__", "link": "https://stackoverflow.com/users/515054/0"}, "reply_to_user": {"reputation": 1016, "user_id": 2496309, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/evS93.jpg?s=128&g=1", "display_name": "Micha\u0142 Urbaniak", "link": "https://stackoverflow.com/users/2496309/micha%c5%82-urbaniak"}, "edited": false, "score": 1, "creation_date": 1452028966, "post_id": 34616856, "comment_id": 56988561, "body": "@Micha\u0142Urbaniak It is really not an answer. For <i>one example</i> I picked, Kotlin compiles maybe three or four times more LOC per time compared to Scala. If your unit is &quot;algorithm&quot; perhaps the speed increase is less than 2x, while you might need to write less code. But there are different approaches to Project Euler, and there are many other scenarios and larger code bases where you would write different kind of code... The formula also changes when you take sbt&#39;s capability of incremental compilation into account. Finally, this cannot explain <b>why a compiler takes this and that much time</b>."}, {"owner": {"reputation": 171, "user_id": 3613097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d9ee2e2c8a9755390b10e70fe19a34?s=128&d=identicon&r=PG&f=1", "display_name": "pabl0rg", "link": "https://stackoverflow.com/users/3613097/pabl0rg"}, "edited": false, "score": 0, "creation_date": 1464690865, "post_id": 34616856, "comment_id": 62575421, "body": "Note: the lines of code comparison is not meaningful.  If you look at the code, you&#39;ll see why.  The Kotlin version adds a lot of scaffolding to each solution (declares package, main function, prints output, etc).  The Scala version is bare-bones and only asserts solutions.  The same could be done in Kotlin."}, {"owner": {"reputation": 3032, "user_id": 2178852, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yshPF.jpg?s=128&g=1", "display_name": "Chetan Bhasin", "link": "https://stackoverflow.com/users/2178852/chetan-bhasin"}, "edited": false, "score": 0, "creation_date": 1553527835, "post_id": 34616856, "comment_id": 97407547, "body": "I would argue word-count is very meaningful. A lot of code that is hand-written by Kotlin needs to be inferred by Scala compiler. Scala compiler is doing extra work. Regardless of how necessary or useful that extra work may be is a different question."}], "tags": [], "owner": {"reputation": 64109, "user_id": 515054, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c2392da041304fda667e525f3e80fdd?s=128&d=identicon&r=PG", "display_name": "0__", "link": "https://stackoverflow.com/users/515054/0"}, "is_accepted": true, "score": 28, "last_activity_date": 1491223172, "last_edit_date": 1491223172, "creation_date": 1452012278, "answer_id": 34616856, "question_id": 34615947, "link": "https://stackoverflow.com/questions/34615947/why-does-kotlin-compile-faster-than-scala/34616856#34616856", "title": "Why does Kotlin compile faster than Scala?", "body": "<p>Although I think the question is not well suited for Stack Overflow as it will tend to produce primarily opinion based answers, here is one attempt: You have two different languages, especially concerning the type system, and two completely independent implementations of compilers. So to expect them to have the \"same\" kind of compilation speed is already a fallacy. I have linked in my comment to another question that examines the speed of the Scala compiler. Basically, it depends on many factors, for example the amount of work that the type inferencer and implicit resolution required by a specific code base.</p>\n\n<p>Nevertheless, I ran a very quick example: I compiled some Project Euler solutions in Kotlin and Scala. This gave me for a fresh re-compile of the whole project:</p>\n\n<ul>\n<li><strong>6 seconds in Kotlin</strong> (down to <strong>5 seconds</strong> in successive re-builds)</li>\n<li><strong>10 seconds in Scala</strong> (down to <strong>7 seconds</strong> in successive re-builds).</li>\n</ul>\n\n<p>Origin of the source code:</p>\n\n<ul>\n<li>I took <a href=\"https://github.com/kotlin-projects/kotlin-euler\" rel=\"noreferrer\">this code for Kotlin</a>, changed a lot of imports because apparently the Kotlin standard library changed in the meantime, in order to make it compile.</li>\n<li>I took <a href=\"https://github.com/pavelfatin/projecteuler\" rel=\"noreferrer\">this code for Scala</a>, and converted it into an sbt project with each problem wrapped in an <code>object pXY extends App { ... }</code> and placed it in a package <code>euler</code>.</li>\n</ul>\n\n<p>Then I removed the files for which only one solution existed, ending up with 26 problems. Both projects were compiled with IntelliJ IDEA 15 CE using <code>Rebuild Project</code>.</p>\n\n<hr>\n\n<p>To give another perspective on this business, I ran <code>wc</code> (word count) on the sources:</p>\n\n<pre><code>// lines words bytes\n931  3603 33087 total  // Kotlin\n261  1166  6472 total  // Scala\n</code></pre>\n\n<p>So now you can either argue that the Kotlin compiler needed to process \"more source code\" or that the Scala code was \"more dense\" :)</p>\n"}], "owner": {"reputation": 1016, "user_id": 2496309, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/evS93.jpg?s=128&g=1", "display_name": "Micha\u0142 Urbaniak", "link": "https://stackoverflow.com/users/2496309/micha%c5%82-urbaniak"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2653, "favorite_count": 0, "closed_date": 1452019936, "accepted_answer_id": 34616856, "answer_count": 1, "score": 7, "last_activity_date": 1491223172, "creation_date": 1452009583, "last_edit_date": 1476348034, "question_id": 34615947, "link": "https://stackoverflow.com/questions/34615947/why-does-kotlin-compile-faster-than-scala", "closed_reason": "Opinion-based", "title": "Why does Kotlin compile faster than Scala?", "body": "<p>When we read the <a href=\"https://en.wikipedia.org/wiki/Kotlin_%28programming_language%29#History\" rel=\"noreferrer\">wikipedia</a> description of the Kotlin programming language, it is stating that:</p>\n\n<blockquote>\n  <p>JetBrains lead Dmitry Jemerov said that most languages did not have the features they were looking for, with the exception of Scala. However, he cited the slow compile time of Scala as an obvious deficiency.[4] One of the stated goals of Kotlin is to compile as quickly as Java.</p>\n</blockquote>\n\n<p>How did they achieve that goal? And why is Scala compile time so slow that it was unacceptable for the Kotlin creators? Or - in other words - which features of the Scala compiler make it slower than the Kotlin compiler?</p>\n"}, {"tags": ["list", "iterator", "kotlin", "mutable"], "answers": [{"comments": [{"owner": {"reputation": 3643, "user_id": 5079380, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qYTmy.jpg?s=128&g=1", "display_name": "Amr ElAdawy", "link": "https://stackoverflow.com/users/5079380/amr-eladawy"}, "edited": false, "score": 1, "creation_date": 1496498155, "post_id": 34608552, "comment_id": 75692253, "body": "Should not you use <code>MutableListIterator</code>? I cannot find <code>set</code> in iterator"}, {"owner": {"reputation": 2269, "user_id": 1973391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae30a1e774892d1e469db82636262620?s=128&d=identicon&r=PG", "display_name": "sosite", "link": "https://stackoverflow.com/users/1973391/sosite"}, "edited": false, "score": 0, "creation_date": 1518525304, "post_id": 34608552, "comment_id": 84534148, "body": "For primitive arrays you should use Structural equality <code>!=</code> in place of Referential equality <code>!==</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 3643, "user_id": 5079380, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/qYTmy.jpg?s=128&g=1", "display_name": "Amr ElAdawy", "link": "https://stackoverflow.com/users/5079380/amr-eladawy"}, "edited": false, "score": 1, "creation_date": 1519057822, "post_id": 34608552, "comment_id": 84744383, "body": "@AmrElAdawy In the examples I am using the <code>listIterator()</code> returned from mutable structures which therefore returns a <code>MutableListIterator</code>, so the code as above works.  If you are typing your iterator or using a non-mutable list to get the iterator, then, of course, you will have <code>ListIterator</code> instead.  The code above infers the correct types."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2269, "user_id": 1973391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae30a1e774892d1e469db82636262620?s=128&d=identicon&r=PG", "display_name": "sosite", "link": "https://stackoverflow.com/users/1973391/sosite"}, "edited": false, "score": 0, "creation_date": 1519057957, "post_id": 34608552, "comment_id": 84744463, "body": "@sosite the referential equality is intentional, it is asking if the mutator gave back a new object, not if it modified the contents or gave back an equivalent object.  It is just a quick performance check and if these lists were observable to avoid firing off events.  It would be slow to do full equality checks on the contents and this wasn&#39;t intended to do that anyway."}, {"owner": {"reputation": 2269, "user_id": 1973391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae30a1e774892d1e469db82636262620?s=128&d=identicon&r=PG", "display_name": "sosite", "link": "https://stackoverflow.com/users/1973391/sosite"}, "edited": false, "score": 0, "creation_date": 1519125775, "post_id": 34608552, "comment_id": 84772666, "body": "@JaysonMinard But identity equality for arguments of primitive types is deprecated"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1519162662, "post_id": 34608552, "comment_id": 84795064, "body": "Ah, yes, that did happen.  Makes sense, depending on what is in the list."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 76, "last_activity_date": 1451987569, "last_edit_date": 1451987569, "creation_date": 1451987262, "answer_id": 34608552, "question_id": 34608551, "link": "https://stackoverflow.com/questions/34608551/in-kotlin-how-do-you-modify-the-contents-of-a-list-while-iterating/34608552#34608552", "title": "In Kotlin, how do you modify the contents of a list while iterating", "body": "<p>First, not all copying of a list is bad.  Sometimes a copy can take advantage of CPU cache and be extremely fast, it depends on the list, size, and other factors.</p>\n\n<p>Second, for modifying a list \"in-place\" you need to use a type of list that is mutable.  In your sample you use <code>listOf</code> which returns the <code>List&lt;T&gt;</code> interface, and that is read-only.  You need to directly reference the class of a mutable list (i.e. <code>ArrayList</code>), or it is idiomatic Kotlin to use the helper functions <code>arrayListOf</code> or <code>linkedListOf</code> to create a <code>MutableList&lt;T&gt;</code> reference.  Once you have that, you can iterate the list using the <code>listIterator()</code> which has a mutation method <code>set()</code>.</p>\n\n<pre><code>// create a mutable list\nval someList = arrayListOf(1, 20, 10, 55, 30, 22, 11, 0, 99)\n\n// iterate it using a mutable iterator and modify values \nval iterate = someList.listIterator()\nwhile (iterate.hasNext()) {\n    val oldValue = iterate.next()\n    if (oldValue &lt;= 20) iterate.set(oldValue + 20)\n}\n</code></pre>\n\n<p>This will change the values in the list as iteration occurs and is efficient for all list types.  To make this easier, create helpful extension functions that you can re-use (see below).</p>\n\n<h2>Mutating using a simple extension function:</h2>\n\n<p>You can write extension functions for Kotlin that do an in place mutable iteration for any <code>MutableList</code> implementation.  These inline functions will perform as fast as any custom use of the iterator and is inlined for performance.  Perfect for Android or anywhere.</p>\n\n<p>Here is a <code>mapInPlace</code> extension function (which keeps the naming typical for these type of functions such as <code>map</code> and <code>mapTo</code>): </p>\n\n\n\n<pre><code>inline fun &lt;T&gt; MutableList&lt;T&gt;.mapInPlace(mutator: (T)-&gt;T) {\n    val iterate = this.listIterator()\n    while (iterate.hasNext()) {\n        val oldValue = iterate.next()\n        val newValue = mutator(oldValue)\n        if (newValue !== oldValue) {\n            iterate.set(newValue)\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Example</strong> calling any variation of this extension function:</p>\n\n<pre><code>val someList = arrayListOf(1, 20, 10, 55, 30, 22, 11, 0, 99)\nsomeList.mapInPlace { if (it &lt;= 20) it + 20 else it }\n</code></pre>\n\n<p>This is not generalized for all <code>Collection&lt;T&gt;</code>, because most iterators only have a <code>remove()</code> method, not <code>set()</code>.</p>\n\n<h2>Extension functions for Arrays</h2>\n\n<p>You can handle generic arrays with a similar method:</p>\n\n<pre><code>inline fun &lt;T&gt; Array&lt;T&gt;.mapInPlace(mutator: (T)-&gt;T) {\n    this.forEachIndexed { idx, value -&gt;\n        mutator(value).let { newValue -&gt;\n            if (newValue !== value) this[idx] = mutator(value)\n        }\n    }\n}\n</code></pre>\n\n<p>And for each of the primitive arrays, use a variation of:</p>\n\n<pre><code>inline fun BooleanArray.mapInPlace(mutator: (Boolean)-&gt;Boolean) {\n    this.forEachIndexed { idx, value -&gt;\n        mutator(value).let { newValue -&gt;\n            if (newValue !== value) this[idx] = mutator(value)\n        }\n    }\n}\n</code></pre>\n\n<h2>About the Optimization using only Reference Equality</h2>\n\n<p>The extension functions above optimize a little by not setting the value if it has not changed to a different instance, checking that using  <code>===</code> or <code>!==</code> is <a href=\"https://kotlinlang.org/docs/reference/equality.html#referential-equality\">Referential Equality</a>.  It isn't worth checking <code>equals()</code> or <code>hashCode()</code> because calling those has an unknown cost, and really the referential equality catches any intent to change the value.  </p>\n\n<h2>Unit Tests for Extension Functions</h2>\n\n<p>Here are unit test cases showing the functions working, and also a small comparison to the stdlib function <code>map()</code> that makes a copy:</p>\n\n<pre><code>class MapInPlaceTests {\n    @Test fun testMutationIterationOfList() {\n        val unhappy = setOf(\"Sad\", \"Angry\")\n        val startingList = listOf(\"Happy\", \"Sad\", \"Angry\", \"Love\")\n        val expectedResults = listOf(\"Happy\", \"Love\", \"Love\", \"Love\")\n\n        // modify existing list with custom extension function\n        val mutableList = startingList.toArrayList()\n        mutableList.mapInPlace { if (it in unhappy) \"Love\" else it }\n        assertEquals(expectedResults, mutableList)\n    }\n\n    @Test fun testMutationIterationOfArrays() {\n        val otherArray = arrayOf(true, false, false, false, true)\n        otherArray.mapInPlace { true }\n        assertEquals(arrayOf(true, true, true, true, true).toList(), otherArray.toList())\n    }\n\n    @Test fun testMutationIterationOfPrimitiveArrays() {\n        val primArray = booleanArrayOf(true, false, false, false, true)\n        primArray.mapInPlace { true }\n        assertEquals(booleanArrayOf(true, true, true, true, true).toList(), primArray.toList())\n    }\n\n    @Test fun testMutationIterationOfListWithPrimitives() {\n        val otherList = arrayListOf(true, false, false, false, true)\n        otherList.mapInPlace { true }\n        assertEquals(listOf(true, true, true, true, true), otherList)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1694, "user_id": 2673386, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc376861b2ff6f3088bb4c338df6126a?s=128&d=identicon&r=PG", "display_name": "EntangledLoops", "link": "https://stackoverflow.com/users/2673386/entangledloops"}, "is_accepted": false, "score": 2, "last_activity_date": 1581478340, "last_edit_date": 1581478340, "creation_date": 1581477912, "answer_id": 60180629, "question_id": 34608551, "link": "https://stackoverflow.com/questions/34608551/in-kotlin-how-do-you-modify-the-contents-of-a-list-while-iterating/60180629#60180629", "title": "In Kotlin, how do you modify the contents of a list while iterating", "body": "<p>Here's what I came up with, which is a similar approach to Jayson:</p>\n\n<pre><code>inline fun &lt;T&gt; MutableList&lt;T&gt;.mutate(transform: (T) -&gt; T): MutableList&lt;T&gt; {\n    return mutateIndexed { _, t -&gt; transform(t) }\n}\n\ninline fun &lt;T&gt; MutableList&lt;T&gt;.mutateIndexed(transform: (Int, T) -&gt; T): MutableList&lt;T&gt; {\n    val iterator = listIterator()\n    var i = 0\n    while (iterator.hasNext()) {\n        iterator.set(transform(i++, iterator.next()))\n    }\n    return this\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 713809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lqC64.jpg?s=128&g=1", "display_name": "Byron Katz", "link": "https://stackoverflow.com/users/713809/byron-katz"}, "is_accepted": false, "score": -1, "last_activity_date": 1610648201, "creation_date": 1610648201, "answer_id": 65724689, "question_id": 34608551, "link": "https://stackoverflow.com/questions/34608551/in-kotlin-how-do-you-modify-the-contents-of-a-list-while-iterating/65724689#65724689", "title": "In Kotlin, how do you modify the contents of a list while iterating", "body": "<p>Without having to write any new extension methods - yes, the functional paradigms are awesome, but they <em>do</em> generally imply immutability.  If you're mutating, you might consider making that implicit by going old school:</p>\n<pre><code>    val someList = mutableListOf(1, 20, 10, 55, 30, 22, 11, 0, 99)\n\n    for(i in someList.indices) {\n        val value = someList[i]\n        someList[i] = if (value &lt;= 20) value + 20 else value\n    }\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39308, "favorite_count": 9, "accepted_answer_id": 34608552, "answer_count": 3, "score": 46, "last_activity_date": 1610648201, "creation_date": 1451987262, "last_edit_date": 1610973576, "question_id": 34608551, "link": "https://stackoverflow.com/questions/34608551/in-kotlin-how-do-you-modify-the-contents-of-a-list-while-iterating", "title": "In Kotlin, how do you modify the contents of a list while iterating", "body": "<p>I have a list:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val someList = listOf(1, 20, 10, 55, 30, 22, 11, 0, 99)\n</code></pre>\n<p>And I want to iterate it while modifying some of the values.  I know I can do it with <code>map</code> but that makes a copy of the list.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val copyOfList = someList.map { if (it &lt;= 20) it + 20 else it }\n</code></pre>\n<p>How do I do this without a copy?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the idiomatic answers to commonly asked Kotlin topics are present in SO.  Also to clarify some really old answers written for alphas of Kotlin that are not accurate for current-day Kotlin.</em></p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 4, "creation_date": 1451924460, "post_id": 34594902, "comment_id": 56936005, "body": "Maybe we should mark this question as duplicate of <a href=\"https://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\" title=\"in kotlin what is the idiomatic way to deal with nullable values referencing o\">stackoverflow.com/questions/34498562/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 3, "creation_date": 1451929182, "post_id": 34594975, "comment_id": 56938775, "body": "see also: <a href=\"https://stackoverflow.com/questions/34498562\">stackoverflow.com/questions/34498562</a> for dealing with null values.  Also note that <code>filterNotNull()</code> method is available on Kotlin collections that let&#39;s you eliminate the <code>null</code> values if desired or convert to a list that is no longer capable of having nulls."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 14, "last_activity_date": 1451923102, "last_edit_date": 1451923102, "creation_date": 1451923041, "answer_id": 34594975, "question_id": 34594902, "link": "https://stackoverflow.com/questions/34594902/what-use-is-in-arrayliststring/34594975#34594975", "title": "What use is &quot;?&quot; in ArrayList&lt;String?&gt;", "body": "<p>It means the list elements can be either <code>String</code> or <code>null</code>. This is covered under <a href=\"http://kotlinlang.org/docs/reference/null-safety.html\">Null Safety</a> in the documentation.</p>\n"}], "owner": {"reputation": 437, "user_id": 5725496, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/386fb553a85bbd158916b038438a3855?s=128&d=identicon&r=PG&f=1", "display_name": "pozklundw", "link": "https://stackoverflow.com/users/5725496/pozklundw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505853948, "creation_date": 1451922796, "last_edit_date": 1505853948, "question_id": 34594902, "link": "https://stackoverflow.com/questions/34594902/what-use-is-in-arrayliststring", "title": "What use is &quot;?&quot; in ArrayList&lt;String?&gt;", "body": "<p>Does it mean list item can be <code>String</code> or non <code>String</code>? I find the usage in following code:</p>\n\n<pre><code>class KotlinGreetingJoiner(val greeter: Greeter) {\n\n    val names = ArrayList&lt;String?&gt;()\n\n    fun addName(name: String?) {\n        names.add(name)\n    }\n\n    fun getJoinedGreeting(): String {\n        val joiner = Joiner.on(\" and \").skipNulls()\n        return \"${greeter.getGreeting()} ${joiner.join(names)}\"\n    }\n}\n</code></pre>\n"}, {"tags": ["regex", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1451922844, "post_id": 34594605, "comment_id": 56935045, "body": "Why are you using <code>.*?</code>? I think you mean simply <code>.*</code>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1451923745, "post_id": 34594605, "comment_id": 56935566, "body": "Try <code>field = regex.find(input)!!.groups[1]!!.value</code> and put the <code>?</code> into a character class: <code>[?]</code>. Or something like <code>val regex = &quot;xeno:&#47;&#47;soundcloud&#47;[?]code=(.*?)#&quot;.toRegex() &#47;&#47;  val input = &quot;xeno:&#47;&#47;soundcloud&#47;?code=secret_code_data#&quot; &#47;&#47; val result = regex.find(input)!!.groups[1]!!.value</code>."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1451923848, "post_id": 34594605, "comment_id": 56935635, "body": "I would suggest parsing the url and extracting the query parameter instead of using RegEx."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451927609, "post_id": 34594605, "comment_id": 56937822, "body": "I addressed the regex, as well as using other safe parsing models below.  Regex is not safe if the URL may have encoded characters, or you try to decode as one whole string."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1453464029, "post_id": 34594605, "comment_id": 57623628, "body": "<a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "edited": false, "score": 0, "creation_date": 1451924657, "post_id": 34594778, "comment_id": 56936134, "body": "<code>Regex(&quot;&quot;&quot;xeno:&#47;&#47;soundcloud&#47;\\?code=(.*?)#&quot;&quot;&quot;).find(&quot;xeno:&#47;&#47;so&zwnj;&#8203;undcloud&#47;?code=secre&zwnj;&#8203;t_code_data#&quot;)?.valu&zwnj;&#8203;e</code> returns <code>&quot;xeno:&#47;&#47;soundcloud&#47;?code=secret_code_data#&quot;</code> so escaping the question mark as @buckley suggests does do the trick. @ssuukk Did you try escaping the question-mark in the <code>url</code> and not the <code>Regex</code> <code>pattern</code> instead?"}], "tags": [], "owner": {"reputation": 12128, "user_id": 381995, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/fea060e161740c07f3498f69c0a640fb?s=128&d=identicon&r=PG", "display_name": "buckley", "link": "https://stackoverflow.com/users/381995/buckley"}, "is_accepted": false, "score": 0, "last_activity_date": 1451922304, "creation_date": 1451922304, "answer_id": 34594778, "question_id": 34594605, "link": "https://stackoverflow.com/questions/34594605/regex-matching-in-kotlin/34594778#34594778", "title": "Regex matching in Kotlin", "body": "<p>Add an escape before the first question mark as it has a special meaning</p>\n\n<pre><code>? \n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>\\?\n</code></pre>\n\n<p>You are also capturing the secret code in the first group. Not sure the kotlin code that follows is extracting the first group though.</p>\n"}, {"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1491838791, "post_id": 34595791, "comment_id": 73719154, "body": "Very nice answer, thanks. Maybe <code>groups!![0]</code> looks more idiomatic than <code>groups?.get(0)</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1492351956, "post_id": 34595791, "comment_id": 73933181, "body": "@m0skit0 that suggested change does not propagate the null on missing matches.  Nor does adding <code>?.let{ ... }</code> anywhere really help clean it up."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 42, "last_activity_date": 1453465943, "last_edit_date": 1495535482, "creation_date": 1451925836, "answer_id": 34595791, "question_id": 34594605, "link": "https://stackoverflow.com/questions/34594605/regex-matching-in-kotlin/34595791#34595791", "title": "Regex matching in Kotlin", "body": "<p>Here are three options, the first providing a good Regex that does what you want, and the other two for parsing URL's using an alternative to Regex which handle URL component encoding/decoding correctly.</p>\n\n<h2>Parsing using Regex</h2>\n\n<p><strong><em>NOTE:</em></strong>  <em>Regex method is unsafe in most use cases since it does not properly parse the URL into components, then decode each component separately.  Normally you cannot decode the whole URL into one string and then parse safely because some encoded characters might confuse the Regex later.  This is similar to parsing XHTML using regex (as <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">described here</a>).  See alternatives to Regex below.</em></p>\n\n<p>Here is a cleaned up regex as a unit test case that handles more URLs safely.  At the end of this post is a unit test you can use for each method.</p>\n\n\n\n<pre><code>private val SECRET_CODE_REGEX = \"\"\"xeno://soundcloud[/]?.*[\\?&amp;]code=([^#&amp;]+).*\"\"\".toRegex()\nfun findSecretCode(withinUrl: String): String? =\n        SECRET_CODE_REGEX.matchEntire(withinUrl)?.groups?.get(1)?.value\n</code></pre>\n\n<p>This regex handles these cases:</p>\n\n<ul>\n<li>with and without trailing <code>/</code> in path</li>\n<li>with and without fragment</li>\n<li>parameter as first, middle or last in list of parameters</li>\n<li>parameter as only parameter</li>\n</ul>\n\n<p>Note that idiomatic way to make a regex in Kotlin is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/kotlin.-string/to-regex.html\" rel=\"noreferrer\"><code>someString.toRegex()</code></a>.  It and other extension methods can be found in the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/\" rel=\"noreferrer\">Kotlin API Reference</a>.</p>\n\n<h2>Parsing using UriBuilder or similar class</h2>\n\n<p>Here is an example using the <a href=\"https://github.com/kohesive/klutter/blob/master/core-jdk6/src/main/kotlin/uy/klutter/core/uri/UriBuilder.kt#L10-L26\" rel=\"noreferrer\"><code>UriBuilder</code></a> from the <a href=\"https://github.com/kohesive/klutter\" rel=\"noreferrer\">Klutter library for Kotlin</a>.  This version handles <a href=\"https://github.com/kohesive/klutter/blob/master/core-jdk6/src/main/kotlin/uy/klutter/core/uri/UrlEncoding.kt\" rel=\"noreferrer\">encoding/decoding</a> including more modern JavaScript unicode encodings not handled by the Java standard <code>URI</code> class (<em>which has many issues</em>).  This is safe, easy, and you don't need to worry about any special cases.  </p>\n\n<p>Implementation:</p>\n\n<pre><code>fun findSecretCode(withinUrl: String): String? {\n    fun isValidUri(uri: UriBuilder): Boolean = uri.scheme == \"xeno\"\n                    &amp;&amp; uri.host == \"soundcloud\"\n                    &amp;&amp; (uri.encodedPath == \"/\" || uri.encodedPath.isNullOrBlank())\n    val parsed = buildUri(withinUrl)\n    return if (isValidUri(parsed)) parsed.decodedQueryDeduped?.get(\"code\") else null\n}\n</code></pre>\n\n<p>The Klutter <code>uy.klutter:klutter-core-jdk6:$klutter_version</code> artifact is small, and includes some other extensions include the modernized URL encoding/decoding.  (For <code>$klutter_version</code> use the <a href=\"http://mvnrepository.com/artifact/uy.klutter/klutter-core\" rel=\"noreferrer\">most current release</a>).</p>\n\n<h2>Parsing with JDK URI Class</h2>\n\n<p>This version is a little longer, and shows you need to parse the raw query string yourself, decode after parsing, then find the query parameter:</p>\n\n<pre><code>fun findSecretCode(withinUrl: String): String? {\n    fun isValidUri(uri: URI): Boolean = uri.scheme == \"xeno\"\n            &amp;&amp; uri.host == \"soundcloud\"\n            &amp;&amp; (uri.rawPath == \"/\" || uri.rawPath.isNullOrBlank())\n\n    val parsed = URI(withinUrl)\n    return if (isValidUri(parsed)) {\n        parsed.getRawQuery().split('&amp;').map {\n            val parts = it.split('=')\n            val name = parts.firstOrNull() ?: \"\"\n            val value = parts.drop(1).firstOrNull() ?: \"\"\n            URLDecoder.decode(name, Charsets.UTF_8.name()) to URLDecoder.decode(value, Charsets.UTF_8.name())\n        }.firstOrNull { it.first == \"code\" }?.second\n    } else null\n}\n</code></pre>\n\n<p>This could be written as an extension on the URI class itself:</p>\n\n<pre><code>fun URI.findSecretCode(): String? { ... }\n</code></pre>\n\n<p>In the body remove <code>parsed</code> variable and use <code>this</code> since you already have the URI, well you ARE the URI.  Then call using:</p>\n\n<pre><code>val secretCode = URI(myTestUrl).findSecretCode()\n</code></pre>\n\n<h2>Unit Tests</h2>\n\n<p>Given any of the functions above, run this test to prove it works:</p>\n\n<pre><code>class TestSo34594605 {\n    @Test fun testUriBuilderFindsCode() {\n        // positive test cases\n\n        val testUrls = listOf(\"xeno://soundcloud/?code=secret_code_data#\",\n                \"xeno://soundcloud?code=secret_code_data#\",\n                \"xeno://soundcloud/?code=secret_code_data\",\n                \"xeno://soundcloud?code=secret_code_data\",\n                \"xeno://soundcloud?code=secret_code_data&amp;other=fish\",\n                \"xeno://soundcloud?cat=hairless&amp;code=secret_code_data&amp;other=fish\",\n                \"xeno://soundcloud/?cat=hairless&amp;code=secret_code_data&amp;other=fish\",\n                \"xeno://soundcloud/?cat=hairless&amp;code=secret_code_data\",\n                \"xeno://soundcloud/?cat=hairless&amp;code=secret_code_data&amp;other=fish#fragment\"\n        )\n\n        testUrls.forEach { test -&gt;\n            assertEquals(\"secret_code_data\", findSecretCode(test), \"source URL: $test\")\n        }\n\n        // negative test cases, don't get things on accident\n\n        val badUrls = listOf(\"xeno://soundcloud/code/secret_code_data#\",\n                \"xeno://soundcloud?hiddencode=secret_code_data#\",\n                \"http://www.soundcloud.com/?code=secret_code_data\")\n\n        badUrls.forEach { test -&gt;\n            assertNotEquals(\"secret_code_data\", findSecretCode(test), \"source URL: $test\")\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 6830, "user_id": 1332872, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/M03y5.jpg?s=128&g=1", "display_name": "ssuukk", "link": "https://stackoverflow.com/users/1332872/ssuukk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29932, "favorite_count": 1, "accepted_answer_id": 34595791, "answer_count": 2, "score": 30, "last_activity_date": 1453465943, "creation_date": 1451921728, "question_id": 34594605, "link": "https://stackoverflow.com/questions/34594605/regex-matching-in-kotlin", "title": "Regex matching in Kotlin", "body": "<p>How do I match secret_code_data in string:</p>\n\n<pre><code>xeno://soundcloud/?code=secret_code_data#\n</code></pre>\n\n<p>I've tried</p>\n\n<pre><code>val regex = Regex(\"\"\"xeno://soundcloud/?code=(.*?)#\"\"\")\nfield = regex.find(url)?.value ?: \"\"\n</code></pre>\n\n<p>without luck. I suspect ? before code might be the problem, should I escape it somehow. Can you help?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1451911663, "post_id": 34588117, "comment_id": 56927947, "body": "Do you want to convert Java code to Kotlin or Kotlin code to Java?"}, {"owner": {"reputation": 1043, "user_id": 2853418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af7c9dc4163790157eba14a8b6bb7f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sachini Samarasinghe", "link": "https://stackoverflow.com/users/2853418/sachini-samarasinghe"}, "edited": false, "score": 18, "creation_date": 1513833118, "post_id": 34588117, "comment_id": 82804443, "body": "CMD+SHFT+ALT+K is the easiest way to convert from Java to Kotlin in Android Studio"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1451918162, "post_id": 34588153, "comment_id": 56932122, "body": "This is true within Intellij IDEA, the auto-convert Java to Kotlin.  Does it also work with the Eclipse plugin for Kotlin?"}, {"owner": {"reputation": 317, "user_id": 1145167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a0eaa435f9b60f1bba3666230a88e1?s=128&d=identicon&r=PG", "display_name": "std.denis", "link": "https://stackoverflow.com/users/1145167/std-denis"}, "edited": false, "score": 2, "creation_date": 1454622268, "post_id": 34588153, "comment_id": 58139663, "body": "@yole, any chance to see &quot;Paste and convert Java to Kotlin&quot; action in IDEA/AS? I was discouraged that prompt &quot;Convert to Kotlin?&quot; is not predictable when I&#39;m trying to paste Java code \u2013 I thought some code analysis is used to detect Java code in clipboard :) The answers here enlightened me. But an issue still here \u2013 I have to use .java file as intermediate if I&#39;m copying from the browser."}, {"owner": {"reputation": 907, "user_id": 3074505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KRt1o.jpg?s=128&g=1", "display_name": "2xsaiko", "link": "https://stackoverflow.com/users/3074505/2xsaiko"}, "edited": false, "score": 6, "creation_date": 1510166519, "post_id": 34588153, "comment_id": 81323743, "body": "Actually, there is such a tool. <a href=\"https://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a> has a convert from Java dialog where you can paste your code in and get Kotlin code out."}, {"owner": {"reputation": 608, "user_id": 4648533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zoougZaZjb4/AAAAAAAAAAI/AAAAAAAAAGI/j4t0j7lHyWk/photo.jpg?sz=128", "display_name": "Revan siddappa", "link": "https://stackoverflow.com/users/4648533/revan-siddappa"}, "edited": false, "score": 0, "creation_date": 1613025424, "post_id": 34588153, "comment_id": 116949710, "body": "Shift + Alt + Ctrl + k in Windows worked for me in Android studio so please check once"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 46, "last_activity_date": 1567169753, "last_edit_date": 1567169753, "creation_date": 1451900107, "answer_id": 34588153, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/34588153#34588153", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>There is no tool to convert Kotlin code to Java. If you want to convert part of a file from Java to Kotlin, the easiest way is to copy the code from the Java file in the IDE and paste it into the Kotlin file.</p>\n"}, {"comments": [{"owner": {"reputation": 352, "user_id": 12024274, "user_type": "registered", "profile_image": "https://graph.facebook.com/134974181103602/picture?type=large", "display_name": "Andor N&#233;meth", "link": "https://stackoverflow.com/users/12024274/andor-n%c3%a9meth"}, "edited": false, "score": 0, "creation_date": 1602063578, "post_id": 34588951, "comment_id": 113598791, "body": "Idea? You mean IDE."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 352, "user_id": 12024274, "user_type": "registered", "profile_image": "https://graph.facebook.com/134974181103602/picture?type=large", "display_name": "Andor N&#233;meth", "link": "https://stackoverflow.com/users/12024274/andor-n%c3%a9meth"}, "edited": false, "score": 0, "creation_date": 1602081470, "post_id": 34588951, "comment_id": 113608102, "body": "@AndorN&#233;meth IDEA is an IDE"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 18, "last_activity_date": 1505854044, "last_edit_date": 1505854044, "creation_date": 1451902916, "answer_id": 34588951, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/34588951#34588951", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>I found a workaround: </p>\n\n<ol>\n<li>Create a Java file and paste inside this file Java code, which you want covert.</li>\n<li>Now copy Java code from Java file.</li>\n<li>Go to Kotlin file and paste this code. Idea will suggest convert code from Java to Kotlin.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 3323, "user_id": 1533585, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9q3bh.png?s=128&g=1", "display_name": "NP Developer", "link": "https://stackoverflow.com/users/1533585/np-developer"}, "edited": false, "score": 0, "creation_date": 1513840864, "post_id": 39602657, "comment_id": 82807193, "body": "But is this possible to for all java files convert to kt files?"}, {"owner": {"reputation": 2868, "user_id": 1964191, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/D0wlJ.png?s=128&g=1", "display_name": "okarakose", "link": "https://stackoverflow.com/users/1964191/okarakose"}, "reply_to_user": {"reputation": 3323, "user_id": 1533585, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9q3bh.png?s=128&g=1", "display_name": "NP Developer", "link": "https://stackoverflow.com/users/1533585/np-developer"}, "edited": false, "score": 0, "creation_date": 1513924914, "post_id": 39602657, "comment_id": 82843133, "body": "It is possible as I know. And even when you can copy java code and paste it to the <b>.kt</b> file. Android Studio will ask you to &quot;Would you like to convert java code to kotlin code&quot; option."}, {"owner": {"reputation": 12664, "user_id": 422252, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rUirn.jpg?s=128&g=1", "display_name": "Lime", "link": "https://stackoverflow.com/users/422252/lime"}, "edited": false, "score": 0, "creation_date": 1520057014, "post_id": 39602657, "comment_id": 85167938, "body": "I do not have this as an option what do I do?"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "reply_to_user": {"reputation": 12664, "user_id": 422252, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rUirn.jpg?s=128&g=1", "display_name": "Lime", "link": "https://stackoverflow.com/users/422252/lime"}, "edited": false, "score": 0, "creation_date": 1559115022, "post_id": 39602657, "comment_id": 99314575, "body": "@WilliamA, probably this is because it wants to convert a whole file, not a piece of code. You can use <a href=\"https://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">try.kotlinlang.org</a> (&quot;Convert from Java&quot; button), as wrote Md Mohsin."}], "tags": [], "owner": {"reputation": 2868, "user_id": 1964191, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/D0wlJ.png?s=128&g=1", "display_name": "okarakose", "link": "https://stackoverflow.com/users/1964191/okarakose"}, "is_accepted": false, "score": 124, "last_activity_date": 1527660557, "last_edit_date": 1527660557, "creation_date": 1474400985, "answer_id": 39602657, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/39602657#39602657", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<h2>With Android Studio 3.0</h2>\n\n<p>You <strong>don't need to install</strong> any plugin to convert java code to kotlin code. Now, Google is <strong>officially supporting</strong> Kotlin language.</p>\n\n<ul>\n<li>Android Studio Menu -> <strong>Code -> Convert Java File to Kotlin File</strong></li>\n</ul>\n\n<h2>Before Android Studio 3.0</h2>\n\n<p>If you are using older Android Studio ( which is below version 3.0 ) there is a <strong>Kotlin tool</strong> under the menu.</p>\n\n<p>Installing Kotlin plugin :</p>\n\n<ul>\n<li>Android Studio Menu -> <strong>File -> Settings -> Plugins -> Browse repositories -> Kotlin</strong></li>\n</ul>\n\n<p>Converting Java Code to Kotlin Code :</p>\n\n<ul>\n<li>Select your java class file from project structure.</li>\n<li>Android Studio Menu -> <strong>Code -> Convert Java File to Kotlin File</strong></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1136, "user_id": 126688, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/Eq4uL.jpg?s=128&g=1", "display_name": "Andy Atkinson", "link": "https://stackoverflow.com/users/126688/andy-atkinson"}, "edited": false, "score": 0, "creation_date": 1519764499, "post_id": 43308666, "comment_id": 85040438, "body": "On Intellij Ultimate 2017.02 on OS X, when I do the paste, I get the dialog, and when I select &quot;yes&quot; to do the conversion, the resulting file is blank. When I choose &quot;no&quot; it pastes it as Java code. So it seems buggy/broken."}], "tags": [], "owner": {"reputation": 2927, "user_id": 262789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ht8vy.png?s=128&g=1", "display_name": "Jade", "link": "https://stackoverflow.com/users/262789/jade"}, "is_accepted": false, "score": 7, "last_activity_date": 1491752434, "creation_date": 1491752434, "answer_id": 43308666, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/43308666#43308666", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>When pasting Java code into Kotlin file, using IntelliJ derived IDE, the IDE will not convert the Java into Kotlin.</p>\n\n<p>The problem seems to stem from IntelliJ not knowing the code is Java. Here is a simple way to ensure that code is converted into Kotlin.</p>\n\n<ol>\n<li>Copy the Java code from your web browser.</li>\n<li>Open Scratch File (File -> New -> Scratch File or Ctrl+Alt+Shift+Insert)</li>\n<li>In the Languages dialog select Java as the language.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/zxZcc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zxZcc.png\" alt=\"New Scratch window Languages dialog.\"></a></p>\n\n<ol start=\"4\">\n<li>Paste the previously copied Java snippet.</li>\n<li>Select All (Ctrl-A) and Copy (Ctrl-C)</li>\n<li>Now Paste into your Kotlin code.</li>\n</ol>\n\n<p>By first pasting the Java code into a Java scratch file, you have let IntelliJ know that the code snippet is Java code. It will then automatically convert the code to Kotlin when pasting into a Kotlin file.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5229412"}, "is_accepted": false, "score": 3, "last_activity_date": 1496331702, "creation_date": 1496331702, "answer_id": 44311926, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/44311926#44311926", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p><a href=\"https://i.stack.imgur.com/14UO1.png\" rel=\"nofollow noreferrer\">click here for image</a></p>\n\n<p>In Android 3.0 Canary, it is very simple: Go to Code; the last option is 'Convert Java file into Kotlin.' And you are done!</p>\n\n<p>There is also a shortcut: Ctrl+Alt+Shift+K</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 7334246, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/707804709387737/picture?type=large", "display_name": "Prasanth Yejje", "link": "https://stackoverflow.com/users/7334246/prasanth-yejje"}, "is_accepted": false, "score": 2, "last_activity_date": 1496388158, "creation_date": 1496388158, "answer_id": 44323096, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/44323096#44323096", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>its a simple process..\ngo into your Android studio's tool bar and Do follow this Step</p>\n\n<p>CODE -> Convert java file to kotlin file.. </p>\n\n<p>then it asks you for Confirmation and Restart the Android Studio IDE..when you confirm then it restart your IDE and it show you converted Kotlin code file...</p>\n"}, {"tags": [], "owner": {"reputation": 3587, "user_id": 6021927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KbskS.jpg?s=128&g=1", "display_name": "Jayakrishnan", "link": "https://stackoverflow.com/users/6021927/jayakrishnan"}, "is_accepted": false, "score": 9, "last_activity_date": 1498139294, "last_edit_date": 1498139294, "creation_date": 1496563026, "answer_id": 44351954, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/44351954#44351954", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p><strong>In Android Studio 3.0</strong></p>\n\n<p>Kotlin is fully supported from <strong>Android Studio 3.0</strong> (i.e, NO Kotlin Plugin required). If you have Android Studio <strong>>= 3.0</strong> then your following jobs are very easy, </p>\n\n<ul>\n<li>You can create new Kotlin file. </li>\n<li>You can add Kotlin code to existing\nProject. </li>\n<li>You can convert entire JAVA code into Kotlin</li>\n</ul>\n\n<p><strong>Convert existing Java code to Kotlin code</strong></p>\n\n<p>In Android Studio 3.0, open a Java file and select <strong>Code > Convert Java File to Kotlin File.</strong></p>\n\n<p>Or, create a new Kotlin file <strong>(File > New > Kotlin File/Class)</strong>, and then paste your Java code into that file\u2014when prompted, click <strong>Yes</strong> to convert the code to Kotlin. You can check <strong>Don't show this dialog next time</strong>, which makes it easy to dump Java code snippets into your Kotlin files.</p>\n\n<p><strong>Dialog Window</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/GjxLP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GjxLP.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://developer.android.com/kotlin/get-started.html#convert-to-kotlin-code\" rel=\"noreferrer\"><em>Official Source :: Convert to Kotlin From JAVA</em> </a></p>\n\n<p><strong>Note::When you create a new project</strong></p>\n\n<p>Tick checkbox <strong>Include Kotlin support</strong> to get kotlin support for the entire project.</p>\n\n<p>The below is the screen shot of first screen of new Android Project Creation Window with an option to include Kotlin Support to the entire project.</p>\n\n<p><a href=\"https://i.stack.imgur.com/K2hgN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/K2hgN.png\" alt=\"Create new Android project with Kotlin support\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 922, "user_id": 7301274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J12wk.jpg?s=128&g=1", "display_name": "Khyati Fatania", "link": "https://stackoverflow.com/users/7301274/khyati-fatania"}, "is_accepted": false, "score": 2, "last_activity_date": 1521699424, "last_edit_date": 1521699424, "creation_date": 1497850392, "answer_id": 44622886, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/44622886#44622886", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>If your Android Studio version is less than 3 then you have to install plugin of Kotlin. To install it follow steps from below link</p>\n\n<p><a href=\"https://blog.jetbrains.com/kotlin/2013/08/working-with-kotlin-in-android-studio/\" rel=\"nofollow noreferrer\">Blog jetbrains :- Working with Kotlin in Android Studio</a></p>\n\n<p>After installing plugin restart Android Studio and Find Action (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>A</kbd>) and type Convert Java File to Kotlin.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 5321270, "user_type": "registered", "profile_image": "https://graph.facebook.com/1201696103202624/picture?type=large", "display_name": "Sanjay Goswami", "link": "https://stackoverflow.com/users/5321270/sanjay-goswami"}, "is_accepted": false, "score": 9, "last_activity_date": 1510818428, "creation_date": 1510818428, "answer_id": 47324176, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/47324176#47324176", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>Simple Ctrl+Alt+Shift+ K code will convert into kotlin</p>\n"}, {"tags": [], "owner": {"reputation": 746, "user_id": 1496693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WB16i.jpg?s=128&g=1", "display_name": "airowe", "link": "https://stackoverflow.com/users/1496693/airowe"}, "is_accepted": false, "score": 2, "last_activity_date": 1511298369, "creation_date": 1511298369, "answer_id": 47422732, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/47422732#47422732", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>From kotlinlang.org, <a href=\"https://try.kotlinlang.org/\" rel=\"nofollow noreferrer\">click on \"Try Online\" at the top of the page</a>. You'll see an option to \"Convert from Java\" in the toolbar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NSXF0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NSXF0.png\" alt=\"Click Try Online\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/VeRU0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VeRU0.png\" alt=\"Click Convert from Java\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1501, "user_id": 2598244, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/XwqXh.jpg?s=128&g=1", "display_name": "Md Mohsin", "link": "https://stackoverflow.com/users/2598244/md-mohsin"}, "is_accepted": false, "score": 25, "last_activity_date": 1516876871, "creation_date": 1516876871, "answer_id": 48440896, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/48440896#48440896", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>To convert Java code in Android studio use CTRL+SHIFT+ALT+K</p>\n\n<p>To convert from Website use <a href=\"https://try.kotlinlang.org/\" rel=\"noreferrer\">Try Kotlin</a> site.</p>\n\n<p>To convert from Android app use <a href=\"https://play.google.com/store/apps/details?id=coders.hub.android.master&amp;hl=en\" rel=\"noreferrer\">Master in Android</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 413148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzZlN.jpg?s=128&g=1", "display_name": "Kamlesh Karwande", "link": "https://stackoverflow.com/users/413148/kamlesh-karwande"}, "edited": false, "score": 0, "creation_date": 1580134174, "post_id": 57197246, "comment_id": 105987520, "body": "how to do this in an exact opposition manner. Kotlin -&gt; Java ?"}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "reply_to_user": {"reputation": 301, "user_id": 413148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzZlN.jpg?s=128&g=1", "display_name": "Kamlesh Karwande", "link": "https://stackoverflow.com/users/413148/kamlesh-karwande"}, "edited": false, "score": 0, "creation_date": 1580229785, "post_id": 57197246, "comment_id": 106025890, "body": "@KamleshKarwande, it is impossible. I was interested in it, JetBrains won&#39;t write such a tool."}, {"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 0, "creation_date": 1580229900, "post_id": 57197246, "comment_id": 106025958, "body": "Maybe for a whole file, I don&#39;t know, but a fragment is not converted anymore. AS 3.5.3, Windows."}], "tags": [], "owner": {"reputation": 200, "user_id": 5789158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5753fe810d5fc4056d472e3939664680?s=128&d=identicon&r=PG&f=1", "display_name": "NicoDiAngelo", "link": "https://stackoverflow.com/users/5789158/nicodiangelo"}, "is_accepted": false, "score": 20, "last_activity_date": 1564048635, "last_edit_date": 1564048635, "creation_date": 1564042345, "answer_id": 57197246, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/57197246#57197246", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>To convert a complete file into Kotlin, use this combo of keys:  </p>\n\n<ul>\n<li><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>Cmd</kbd> + <kbd>k</kbd> in\nMac</li>\n<li><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>Ctrl</kbd> +\n<kbd>k</kbd> in Windows</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 11233874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZKkRZXeGtLI/AAAAAAAAAAI/AAAAAAAAKy8/ykntNfF5hw8/photo.jpg?sz=128", "display_name": "Sohail Pathan", "link": "https://stackoverflow.com/users/11233874/sohail-pathan"}, "is_accepted": false, "score": 2, "last_activity_date": 1571377257, "last_edit_date": 1571377257, "creation_date": 1571374989, "answer_id": 58444223, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/58444223#58444223", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>You don't need any specific tools. Just simply copy and paste from anywhere and paste to <code>.kt</code> file in <code>Android Studio.</code> Dialog Window will be open by asking \"Convert <code>Java to Kotlin</code>\". Press Yes, It will convert it and do some miner changes.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6404309, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-msfbsLTK7Hs/AAAAAAAAAAI/AAAAAAAAABM/O7BdWAVlPEo/photo.jpg?sz=128", "display_name": "Alankrita Shah", "link": "https://stackoverflow.com/users/6404309/alankrita-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1609608881, "creation_date": 1609608881, "answer_id": 65542099, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/65542099#65542099", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>The simplest way to do this -</p>\n<ol>\n<li>Copy the code from the .java file.</li>\n<li>Create a new file with .kt extension.</li>\n<li>Paste the code.</li>\n<li>A pop up would appear asking to convert the code you pasted to Kotlin. Allow.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3033, "user_id": 3339394, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ciehO.jpg?s=128&g=1", "display_name": "The_Martian", "link": "https://stackoverflow.com/users/3339394/the-martian"}, "is_accepted": false, "score": 0, "last_activity_date": 1617150751, "last_edit_date": 1617150751, "creation_date": 1610032940, "answer_id": 65615145, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin/65615145#65615145", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>In the new Android Studio version of 4.1 and above, you don't have to do any of the above stuff. You simply copy and paste any Java code into any existing kt file in Android Studio and it will recognize it as Java code needed to be converted to Kotlin. Then it will ask you in a dialog box whether it's something you want to do and convert it right in the spot if you answer yes. You can also check the &quot;do not ask to convert&quot; and it will automatically convert any Java code you paste in the future for you.</p>\n"}], "owner": {"reputation": 21726, "user_id": 1708058, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4a0b611077fcb9f7ede011fdc46e4d4c?s=128&d=identicon&r=PG", "display_name": "Alan Coromano", "link": "https://stackoverflow.com/users/1708058/alan-coromano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102619, "favorite_count": 13, "accepted_answer_id": 34588153, "answer_count": 15, "score": 77, "last_activity_date": 1617150751, "creation_date": 1451899988, "last_edit_date": 1451942605, "question_id": 34588117, "link": "https://stackoverflow.com/questions/34588117/how-can-i-convert-a-part-of-java-source-file-to-kotlin", "title": "How can I convert a part of Java source file to Kotlin?", "body": "<p>In my Kotlin project I have some parts of Java code which I want to convert to Kotlin. The menu item Convert Java file to Kotlin is disabled because it's not a whole file I want to convert. </p>\n\n<p>How can I convert Java code to Kotlin?</p>\n"}, {"tags": ["java", "android", "testing", "kotlin"], "comments": [{"owner": {"reputation": 1544, "user_id": 3480318, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bf703895923e89cd94a85d801205e4cd?s=128&d=identicon&r=PG&f=1", "display_name": "Nehal", "link": "https://stackoverflow.com/users/3480318/nehal"}, "edited": false, "score": 6, "creation_date": 1451886404, "post_id": 34585339, "comment_id": 56915887, "body": "Be more specific, what you want to achieve"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1451896474, "post_id": 34585339, "comment_id": 56919529, "body": "At the very least, you need to put the code in a method."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 2, "last_activity_date": 1451897624, "creation_date": 1451897624, "answer_id": 34587485, "question_id": 34585339, "link": "https://stackoverflow.com/questions/34585339/how-to-use-spek/34587485#34587485", "title": "How to use Spek", "body": "<p>You can use any test framework with Kotlin in exactly the same way as in Java. A sample project using Kotlin, Maven and JUnit can be found <a href=\"https://github.com/JetBrains/kotlin-examples/tree/master/maven/hello-world\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1451898215, "creation_date": 1451898215, "answer_id": 34587627, "question_id": 34585339, "link": "https://stackoverflow.com/questions/34585339/how-to-use-spek/34587627#34587627", "title": "How to use Spek", "body": "<p>Looks like you using 0.1-SNAPSHOT version. Please try current version <a href=\"http://repository.jetbrains.com/simple/spek/org/jetbrains/spek/spek/\" rel=\"nofollow\">0.1.188</a></p>\n"}, {"tags": [], "owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "is_accepted": false, "score": 3, "last_activity_date": 1485005389, "last_edit_date": 1485005389, "creation_date": 1451917434, "answer_id": 34593280, "question_id": 34585339, "link": "https://stackoverflow.com/questions/34585339/how-to-use-spek/34593280#34593280", "title": "How to use Spek", "body": "<p>You cut and paste an old syntax from <code>spek</code> site :) you need <em>function name</em> before the second bracket as the error suggests: use <code>{ init {</code> instead of <code>{{</code></p>\n\n<pre><code>import kotlin.test.assertEquals\nimport org.jetbrains.spek.api.Spek\n\nclass BlaherSpecs: Spek() { init {\n    given(\"Let's test Blaher\") {\n        var blaher = Blaher()\n\n        on(\"Blaher blah\") {\n            val blah = blaher.blah()\n\n            it(\"should be Blah!\") {\n                assertEquals(\"Blah1!\", blah)\n            }\n        }\n    }\n}}\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 5725496, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/386fb553a85bbd158916b038438a3855?s=128&d=identicon&r=PG&f=1", "display_name": "pozklundw", "link": "https://stackoverflow.com/users/5725496/pozklundw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1793, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1485005438, "creation_date": 1451886354, "last_edit_date": 1485005438, "question_id": 34585339, "link": "https://stackoverflow.com/questions/34585339/how-to-use-spek", "title": "How to use Spek", "body": "<p>I tried <a href=\"https://github.com/nhekfqn/kotlin-spek-maven-sample.git\" rel=\"nofollow noreferrer\">this sample</a>, but it raises a syntax error. Is there any other way to test Kotlin? For example, with JUnit or Spek?</p>\n\n<pre><code>import kotlin.test.assertEquals\nimport org.jetbrains.spek.api.Spek\n\nclass BlaherSpecs: Spek() {{\n    given(\"Let's test Blaher\") {\n        var blaher = Blaher()\n\n        on(\"Blaher blah\") {\n            val blah = blaher.blah()\n\n            it(\"should be Blah!\") {\n                assertEquals(\"Blah1!\", blah)\n            }\n        }\n    }\n}}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/N5Psc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N5Psc.png\" alt=\"IDE with errors\"></a></p>\n"}, {"tags": ["lambda", "rx-java", "kotlin", "rx-kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 7, "last_activity_date": 1451897063, "creation_date": 1451897063, "answer_id": 34587372, "question_id": 34583595, "link": "https://stackoverflow.com/questions/34583595/behavior-with-kotlin-higher-order-functions-and-single-method-interfaces/34587372#34587372", "title": "Behavior with Kotlin Higher-Order Functions and Single-method interfaces?", "body": "<p>The SAM conversion (converting a lambda into a function type) currently works only for methods written in Java. Kotlin has proper function types, so there is no need for SAM conversion - you can declare the parameter as a function type directly (which works, as you have observed).</p>\n\n<p><code>Observable.map()</code> is written in Java, so the SAM conversion is applied. Your extension function is written in Kotlin, so it's not.</p>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 832, "favorite_count": 0, "accepted_answer_id": 34587372, "answer_count": 1, "score": 5, "last_activity_date": 1451897063, "creation_date": 1451870732, "question_id": 34583595, "link": "https://stackoverflow.com/questions/34583595/behavior-with-kotlin-higher-order-functions-and-single-method-interfaces", "title": "Behavior with Kotlin Higher-Order Functions and Single-method interfaces?", "body": "<p>I was having some issues using RxJava and Kotlin earlier. I made some interesting discoveries which I'm still puzzled about. </p>\n\n<p>There is the simple <code>Func1</code> interface in RxJava</p>\n\n<pre><code>public interface Func1&lt;T, R&gt; extends Function {\n    R call(T t);\n}\n</code></pre>\n\n<p>I was trying to add an extension method to an <code>Observable</code>, also an RxJava class. This would collect the emissions into a Google Guava <code>ImmutableListMulitmap</code> using a <code>Func1</code> to map the key off each item. </p>\n\n<pre><code>fun &lt;K,T&gt; Observable&lt;T&gt;.toImmutableListMultimap(keyMapper: Func1&lt;T, K&gt;): Observable&lt;ImmutableListMultimap&lt;K,T&gt;&gt; {\n    return this.collect({ ImmutableListMultimap.builder&lt;K,T&gt;()},{ b, t -&gt; b.put(keyMapper.call(t), t)}).map { it.build() }\n}\n</code></pre>\n\n<p>When I tried to invoke this extension method I could not get it to compile, and it was not understanding the lambda expression at all. </p>\n\n<pre><code>ScheduledItem.all.flatMap { it.rebuildSoftTransactions }\n.toImmutableListMultimap { it.id /*compile error */ } .cache()\n</code></pre>\n\n<p>However, the strangest thing happened when I modified the extension method to use the <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\">function type</a>.</p>\n\n<pre><code>fun &lt;K,T&gt; Observable&lt;T&gt;.toImmutableListMultimap(keyMapper: (T) -&gt; K): Observable&lt;ImmutableListMultimap&lt;K,T&gt;&gt; {\n    return this.collect({ ImmutableListMultimap.builder&lt;K,T&gt;()},{ b, t -&gt; b.put(keyMapper(t), t)}).map { it.build() }\n}\n</code></pre>\n\n<p>And then everything compiled fine. But this is what puzzled me: How come it did not infer the lambda onto the interface? When I use the standard <code>map()</code> method on the <code>Observable</code> it infers the lambda just fine using the curly bracket <code>{ }</code> syntax. But why does it not work for my extension method above?</p>\n"}, {"tags": ["kotlin", "data-class"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451918277, "post_id": 34582420, "comment_id": 56932204, "body": "He is asking specifically about <code>data</code> classes which have built-in functionality that I am guessing he wants to ensure is active."}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1451959219, "post_id": 34582420, "comment_id": 56951856, "body": "I won&#39;t downvote, but I think you should remove this answer, since it&#39;s way off-base."}, {"owner": {"reputation": 1040, "user_id": 4938870, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-exhltEcd7aQ/AAAAAAAAAAI/AAAAAAAAKN0/kHdNboi56iY/photo.jpg?sz=128", "display_name": "Josh Kitchens", "link": "https://stackoverflow.com/users/4938870/josh-kitchens"}, "edited": false, "score": 0, "creation_date": 1451959926, "post_id": 34582420, "comment_id": 56952041, "body": "Could you explain why you think it&#39;s &quot;way off-base&quot;? I started off with a disclaimer that I&#39;m not familiar with Kotlin specifics, but the point I was trying to make is general across languages. Don&#39;t mix interface and implementation. That&#39;s just a good rule."}, {"owner": {"reputation": 4338, "user_id": 1278476, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef9d804497091cfa613c8ad0352f3866?s=128&d=identicon&r=PG", "display_name": "barsju", "link": "https://stackoverflow.com/users/1278476/barsju"}, "edited": false, "score": 0, "creation_date": 1565683631, "post_id": 34582420, "comment_id": 101419279, "body": "You are off base because the question is about a specific feature in Kotlin that does not exist in Java. The accepted answer is correct. Your answer, although you do have a valid point about inheritance, has nothing to do with the question and ads no value in this context."}], "tags": [], "owner": {"reputation": 1040, "user_id": 4938870, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-exhltEcd7aQ/AAAAAAAAAAI/AAAAAAAAKN0/kHdNboi56iY/photo.jpg?sz=128", "display_name": "Josh Kitchens", "link": "https://stackoverflow.com/users/4938870/josh-kitchens"}, "is_accepted": false, "score": -2, "last_activity_date": 1451860456, "creation_date": 1451860456, "answer_id": 34582420, "question_id": 34582070, "link": "https://stackoverflow.com/questions/34582070/kotlin-interface-whereby-the-implementor-must-be-a-data-class/34582420#34582420", "title": "Kotlin: Interface whereby the implementor must be a data class?", "body": "<p>So I'm going to preface my answer by saying I don't have experience with Kotlin, but I have plenty of Java experience which as I understand it is similar, so unless Kotlin has a feature that helps do what you want that Java doesn't, my answer might still apply.</p>\n\n<p>If I understand correctly, basically what you're trying to do is enforce that whatever class implements your interface X, must also be a subtype of Y. </p>\n\n<p>My first question would be Why would you want to do this? Enforcing that X only be implemented by subtypes of Y is mixing interface and implementation, which the exact opposite of what interfaces are for.</p>\n\n<p>To even enforce this, you would have to have X extend the interface of Y, either implicitly or explicitly. Since in Java (and presumably Kotlin), interfaces cannot extend objects, you have two options:</p>\n\n<p>1) extend the INTERFACE of data, if it exists (which I don't think it does given what I've been reading about data classes. It sounds more like a baked in language feature than just a helpful code object)</p>\n\n<p>2) Add to your interface the exact method signatures of the methods you want out of data classes. BY doing this, you've gained two things: First, you get your convenience methods whenever a data class implements your interface, and second, you still have the flexibility that interfaces are meant to provide, because now even non-data classes <em>can</em> implement your interface if you need them to, they just have to be sure to define the data classes interface methods manually.</p>\n"}, {"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 3, "last_activity_date": 1451865310, "creation_date": 1451865310, "answer_id": 34583034, "question_id": 34582070, "link": "https://stackoverflow.com/questions/34582070/kotlin-interface-whereby-the-implementor-must-be-a-data-class/34583034#34583034", "title": "Kotlin: Interface whereby the implementor must be a data class?", "body": "<p>No, <em>copy</em> method have unique number of parameters for every data class, so it's useless to have such interface. If all your data classes have same field - just create and implement common interface.</p>\n"}], "owner": {"reputation": 6932, "user_id": 620237, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/yzN9F.jpg?s=128&g=1", "display_name": "Dave Maple", "link": "https://stackoverflow.com/users/620237/dave-maple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 34583034, "answer_count": 2, "score": 2, "last_activity_date": 1464705755, "creation_date": 1451858186, "last_edit_date": 1464705755, "question_id": 34582070, "link": "https://stackoverflow.com/questions/34582070/kotlin-interface-whereby-the-implementor-must-be-a-data-class", "title": "Kotlin: Interface whereby the implementor must be a data class?", "body": "<p>Is there an Interface that I can extend or some other way to create an Interface whereby the implementing class must be a data class? It would be useful to have access to the data class API methods such as copy().</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4761077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xP8CxHaiTpw/AAAAAAAAAAI/AAAAAAAAABk/wr-XpN020Cs/photo.jpg?sz=128", "display_name": "Ilya Puzanov", "link": "https://stackoverflow.com/users/4761077/ilya-puzanov"}, "edited": false, "score": 0, "creation_date": 1451846550, "post_id": 34579441, "comment_id": 56905250, "body": "Thanks for your answer, so MyFactory.instance is basically valid get-accessor &quot;method&quot; ?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 87, "user_id": 4761077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xP8CxHaiTpw/AAAAAAAAAAI/AAAAAAAAABk/wr-XpN020Cs/photo.jpg?sz=128", "display_name": "Ilya Puzanov", "link": "https://stackoverflow.com/users/4761077/ilya-puzanov"}, "edited": false, "score": 0, "creation_date": 1451847341, "post_id": 34579441, "comment_id": 56905567, "body": "@IlyaPuzanov, you&#39;re welcome. Yes, Kotlin compiler will generate <code>MyFactory.getInstance()</code> for Java, and in Kotlin <code>MyFactory.instance</code> is already <i>getting</i> the property value."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1451843192, "last_edit_date": 1451843192, "creation_date": 1451842249, "answer_id": 34579441, "question_id": 34578097, "link": "https://stackoverflow.com/questions/34578097/kotlin-factory-class-with-properties-issues/34579441#34579441", "title": "Kotlin - Factory class with properties issues", "body": "<p>The explanation is the following:</p>\n\n<p>Kotlin compiler creates getters and setters for all properties, but they are visible only in Java. In Kotlin, properties are idiomatic, and they are even <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#getters-and-setters\" rel=\"nofollow\">generated from Java getter and setter pair</a> when you use Java classes. </p>\n\n<p>Thus declaring a method <code>getInstance</code> indeed clashes with the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#properties\" rel=\"nofollow\">auto-generated getter that will be visible in Java code</a>.</p>\n\n<p>If you need custom getter behaviour please use getter syntax:</p>\n\n<pre><code>var instance: MyFactory? = null\nget() {\n    /* do something */\n    return field\n}\n</code></pre>\n\n<p>In this example <code>field</code> is a soft keyword and means backing field for the property.</p>\n\n<p>It is documented <a href=\"https://kotlinlang.org/docs/reference/properties.html#getters-and-setters\" rel=\"nofollow\">here</a>.</p>\n\n<p>By the way, <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow\">object declaration</a> seems to fit your case well.</p>\n"}], "owner": {"reputation": 87, "user_id": 4761077, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xP8CxHaiTpw/AAAAAAAAAAI/AAAAAAAAABk/wr-XpN020Cs/photo.jpg?sz=128", "display_name": "Ilya Puzanov", "link": "https://stackoverflow.com/users/4761077/ilya-puzanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 34579441, "answer_count": 1, "score": 2, "last_activity_date": 1505854182, "creation_date": 1451834372, "last_edit_date": 1505854182, "question_id": 34578097, "link": "https://stackoverflow.com/questions/34578097/kotlin-factory-class-with-properties-issues", "title": "Kotlin - Factory class with properties issues", "body": "<p>I'm trying to write factory class in Kotlin. In Java:  </p>\n\n<pre><code>public class MyFactory {\n   private static MyFactory instance = null;\n   private Properties props = null;\n   private FirstClass firstInstance = null;\n   private SecondClass secondInstance = null;\n\n   private MyFactory() {\n     props = new Properties();\n     try {\n       props.load(new FileInputStream(\"path/to/config\"));\n\n       String firstClass = props.getProperty(\u201cfirst.class\u201d);\n       String secondClass = props.getProperty(\u201csecond.class\u201d);\n       firstInstance = (FirstClass) Class.forName(firstClass).newInstance();\n       secondInstance = (SecondClass) Class.forName(secondClass).newInstance();\n     } catch (Exception ex) {\n        ex.printStackTrace();\n     }\n  }\n  static {\n    instance = new MyFactory();\n  }\n  public static MyFactory getInstance() {\n    return instance;\n  }\n\n  public FirstClass getFirstClass() {\n    return firstInstance;\n  }\n\n  public SecondClass getSecondClass() {\n    return secondInstance;\n  }\n\n}\n</code></pre>\n\n<p>And I encountered few issues trying to rewrite this in Kotlin.\nI tried to generate code first with Java converter on try.kotlinlang.org. The result is:</p>\n\n<pre><code>class MyFactory private constructor() {\n  private var props: Properties? = null\n\n  private var firstInstance: FirstClass? = null\n  private var secondInstance: SecondClass? = null\n\n  init {\n      try {\n          props!!.load(FileInputStream(\"path/to/conf\"))\n\n          val firstClass = props!!.getProperty(\"prop\")\n          val secondClass = props!!.getProperty(\"prop\")\n\n          firstInstance = Class.forName(firstClass).newInstance() as FirstClass\n          secondInstance = Class.forName(secondClass).newInstance() as SecondClass\n      } catch (ex: Exception) {\n          ex.printStackTrace()\n      }\n  }\n\n  companion object {\n      var instance: MyFactory? = null\n\n      init{\n          instance = MyFactory()\n     }\n   }\n}\n</code></pre>\n\n<p>I am using IntelliJ IDEA 15, and it says that this class don't have <code>getInstance()</code> method, but when I try to implement it it says:  </p>\n\n<pre><code>  Platform declaration clash: The following declarations have the same JVM signature:\nfun &lt;get-instance&gt;(): my.package.MyFactory?\nfun getInstance(): my.package.MyFactory?\n</code></pre>\n\n<p>As I remember, getters are auto-implemented only in data classes.\nCan someone clarify this situation or maybe tell me the right way how to implement this?\nUPDATE:<br>\nI make use of this class in Kotlin by refering to properties itself, ex. MyFactory.instance!!.firstInstance, but it feels wrong to do it this way.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1480495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNr9j.png?s=128&g=1", "display_name": "Connor Spencer Harries", "link": "https://stackoverflow.com/users/1480495/connor-spencer-harries"}, "is_accepted": true, "score": 4, "last_activity_date": 1451824886, "last_edit_date": 1451824886, "creation_date": 1451779705, "answer_id": 34572046, "question_id": 34571964, "link": "https://stackoverflow.com/questions/34571964/consumer-acting-oddly-in-kotlin/34572046#34572046", "title": "Consumer acting oddly in kotlin", "body": "<p>Silly me. I've had java drilled into my head for so long. Replacing the <code>Consumer&lt;out Event&gt;</code> (and other <code>Consumer</code> uses) with <code>(Event) -&gt; Unit</code> cleared up everything!</p>\n\n<p>For anyone interested in the code:</p>\n\n<pre><code>class EventBus(controller: Controller) {\n    private val consumerMap : MutableMap&lt;KClass&lt;out Event&gt;, MutableSet&lt;(Event) -&gt; Unit&gt;&gt; = ConcurrentHashMap()\n    private val controller : Controller = controller\n\n    public fun &lt;T : Event&gt; register(clazz: KClass&lt;T&gt;, handler: (T) -&gt; Unit) {\n        consumerMap.getOrPut(clazz, { HashSet() }).add(handler as (Event) -&gt; Unit) // hacky cast :-)\n    }\n\n    public fun &lt;T : Event&gt; post(event : T) {\n        consumerMap[event.javaClass.kotlin]?.forEachIndexed { i, handler -&gt;\n            controller.getLogger().trace(\"Firing handler ${i + 1} for event ${event.javaClass.name}\")\n            handler.invoke(event)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 1480495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qNr9j.png?s=128&g=1", "display_name": "Connor Spencer Harries", "link": "https://stackoverflow.com/users/1480495/connor-spencer-harries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "accepted_answer_id": 34572046, "answer_count": 1, "score": 4, "last_activity_date": 1451824886, "creation_date": 1451778904, "question_id": 34571964, "link": "https://stackoverflow.com/questions/34571964/consumer-acting-oddly-in-kotlin", "title": "Consumer acting oddly in kotlin", "body": "<p>I'm just getting back into Kotlin (transitioning from java) and I've noticed that using a <code>Consumer</code> is trickier than it sounds.</p>\n\n<pre><code>class EventBus(controller: Controller) {\n    private val consumerMap : MutableMap&lt;KClass&lt;out Event&gt;, MutableSet&lt;Consumer&lt;out Event&gt;&gt;&gt; = ConcurrentHashMap()\n    private val controller : Controller = controller\n\n    public fun &lt;T : Event&gt; register(clazz: KClass&lt;T&gt;, handler: Consumer&lt;T&gt;) {\n        consumerMap.getOrPut(clazz, { HashSet() }).add(handler)\n    }\n\n    public fun &lt;T : Event&gt; post(event : T) {\n        consumerMap[event.javaClass.kotlin]?.forEachIndexed { i, handler -&gt;\n            controller.getLogger().trace(\"Firing handler ${i + 1} for event ${event.javaClass.name}\")\n            handler.accept(event)\n        }\n    }\n}\n</code></pre>\n\n<p>I'm attempting to make a simple class for firing dead basic events, the only problem is according to IntelliJ the accept method does not exist. However, when I attempt to create a new consumer and use it straight away the accept method is there and works just as expected. </p>\n\n<p><a href=\"http://pksv.co/go/myOeEvTE\" rel=\"nofollow noreferrer\">http://pksv.co/go/myOeEvTE</a></p>\n\n<p>Is there anything I may have missed or overlooked?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1451779775, "post_id": 34569739, "comment_id": 56888981, "body": "I will take a closer look at the link you posted.  I am not 100% sure this is the same issue I am having.  BTW, all I am really trying to do is have several tabs, and each tab have it&#39;s own backstack.  I have seen a lot of solutions that involve managing your own back stack,  but they were kind of old, and for the most part I think the nested fragments seem to be working (each tab has it&#39;s own childFragmentManager with it&#39;s own back stack), now is the trick part of handing device rotations."}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1451833280, "post_id": 34569739, "comment_id": 56900510, "body": "I am going to unaccept this for now, I do see the bug, and ultimately it will prevent me from doing what I was planning,  but this <b>seems</b> to be something different.  I will add more to my question"}, {"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1451923156, "post_id": 34569739, "comment_id": 56935230, "body": "the issue I was having <b>is</b> related to this bug.  I will add some ore info in my question to document what I found, but basically this &quot;subfragment&quot; still thinks it is part of the now dead activity.  Explicitly removing it from the activity before it is destroyed, then allows it to be added to the new activity created after the rotation."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 3, "last_activity_date": 1451766621, "last_edit_date": 1451766621, "creation_date": 1451762410, "answer_id": 34569739, "question_id": 34569492, "link": "https://stackoverflow.com/questions/34569492/fragment-instance-is-retained-but-child-fragment-is-not-re-attached/34569739#34569739", "title": "Fragment instance is retained but child fragment is not re-attached", "body": "<p>Your problem looks similar to the issue described here:</p>\n\n<p><a href=\"https://code.google.com/p/android/issues/detail?id=74222\" rel=\"nofollow\">https://code.google.com/p/android/issues/detail?id=74222</a></p>\n\n<p>unfortunately this issue will probably not be fixed by google.</p>\n\n<p>Using retained fragments for UI or nested fragments is not a good idea - they are recomended to be used in place of onRetainNonConfigurationInstance, so ie. for large collections/data structures. Also you could find Loaders better than retained fragments, they also are retained during config changes.</p>\n\n<p>btw. I find retained fragments more of a hack - like using <code>android:configChanges</code> to \"fix\" problems caused by screen rotations. It all works until user presses home screen and android decides to kill your app process. Once user will like to go back to your app - your retained fragments will be destroyed - and you will still have to recreate it. So its always better to code everything like if your resources could be destroyed any time.</p>\n"}, {"comments": [{"owner": {"reputation": 1827, "user_id": 1859486, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b980815af2589acdbfbd7abc0717e824?s=128&d=identicon&r=PG", "display_name": "Alix", "link": "https://stackoverflow.com/users/1859486/alix"}, "edited": false, "score": 0, "creation_date": 1605709204, "post_id": 34689608, "comment_id": 114734251, "body": "This no longer works in newer APIs / Kotling versions (1.4.10+). Does not compile."}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 2, "last_activity_date": 1452313073, "creation_date": 1452313073, "answer_id": 34689608, "question_id": 34569492, "link": "https://stackoverflow.com/questions/34569492/fragment-instance-is-retained-but-child-fragment-is-not-re-attached/34689608#34689608", "title": "Fragment instance is retained but child fragment is not re-attached", "body": "<p>The accepted answer to my question above points out a reported bug in the support library v4 in which nested fragments (and child fragment managers) are no longer retained on configuration changes.</p>\n\n<p>One of the <a href=\"https://code.google.com/p/android/issues/detail?id=74222#c45\" rel=\"nofollow\">posts</a> provides a work-around (which seems to work well).\nThe work around involves creating a subclass of Fragment and uses reflection.</p>\n\n<p>Since my original question used Kotlin code, I thought I would share my Kotlin version of the work around here in case anyone else hits this.  In the end, I am not sure I will stick with this solution, since it is still somewhat of a hack, it still manipulates private fields, however if the field name is changed, the error will be found at compile time rather than runtime.</p>\n\n<p>The way this works is this:</p>\n\n<ol>\n<li>In your fragment that will contain child fragments you create a field retainedChildFragmentManager, that will hold the childFragmentManager that will be lost during the configuration change</li>\n<li>In the onCreate callback for the same fragment, you set retainInstance to true</li>\n<li>In the onAttach callback for the same fragment, you check to see if retainedChildFragmentManger is non-null, if so you call a Fragment extension function that re-attaches the retainedChildFragmentManager, otherwise you set the retainedChildFragmentManager to the current childFragmentManager.</li>\n<li>Finally you need to fix the child fragments to point back to the newly created hosting activity (the bug leaves them referencing the old activity, which I think results in a memory leak).</li>\n</ol>\n\n<p>Here is an example:</p>\n\n<h2>Kotlin Fragment extensions</h2>\n\n<pre><code>// some convenience functions\ninline fun Fragment.pushContentIntoContainer(containerId: Int, content: Fragment) {\n    val transaction = fragmentManager.beginTransaction()\n    transaction.replace(containerId, content)\n    transaction.addToBackStack(\"tag\")\n    transaction.commit()\n\n}\n inline fun Fragment.addRootContentToContainer(containerId: Int, content: Fragment) {\n\n    val transaction = childFragmentManager.beginTransaction()\n    transaction.replace(containerId, content)\n    transaction.commit()\n}\n\n// here we address the bug\ninline fun Fragment.reattachRetainedChildFragmentManager(childFragmentManager: FragmentManager) {\n    setChildFragmentManager(childFragmentManager)\n    updateChildFragmentsHost()\n}\n\nfun Fragment.setChildFragmentManager(childFragmentManager: FragmentManager) {\n     if (childFragmentManager is FragmentManagerImpl) {\n         mChildFragmentManager = childFragmentManager   // mChildFragmentManager is private to Fragment, but the extension can touch it\n     }\n}\n\nfun Fragment.updateChildFragmentsHost() {\n    mChildFragmentManager.fragments.forEach { fragment -&gt;  // fragments is hidden in Fragment\n        fragment?.mHost = mHost  // mHost is private also\n    }\n}\n</code></pre>\n\n<h2>The Fragment Hosting the child Fragments</h2>\n\n<pre><code>class Tab1Fragment : Fragment() , TabRootFragment {\n\n    var subfragment: DefaultSubfragment? = null\n    var retainedChildFragmentManager: FragmentManager? = null\n    override val title = \"Tab 1\"\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        val rootView = inflater!!.inflate(R.layout.fragment_main, container, false)\n        if (subfragment == null ) {\n            subfragment = DefaultSubfragment()\n            subfragment!!.sectionLable = \"label 1x\"\n            subfragment!!.buttonText = \"button 1\"\n            addRootContentToContainer(R.id.child_container, content = subfragment!!)\n        }\n        return rootView\n    }\n\n    override fun onAttach(context: Context?) {\n        super.onAttach(context)\n        if (retainedChildFragmentManager != null) {\n            reattachRetainedChildFragmentManager(retainedChildFragmentManager!!)\n        } else {\n            retainedChildFragmentManager = childFragmentManager\n        }\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        retainInstance = true\n    }    \n}\n</code></pre>\n"}], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4347, "favorite_count": 1, "accepted_answer_id": 34569739, "answer_count": 2, "score": 6, "last_activity_date": 1452313330, "creation_date": 1451760778, "last_edit_date": 1452313330, "question_id": 34569492, "link": "https://stackoverflow.com/questions/34569492/fragment-instance-is-retained-but-child-fragment-is-not-re-attached", "title": "Fragment instance is retained but child fragment is not re-attached", "body": "<p><strong>Update:</strong> accepted answer points to explanation (bug) with a work-around, but also see my Kotlin based work-around attached as an answer below.</p>\n\n<p>This code is in Kotlin, but I think it is a basic android fragment life-cycle issue.</p>\n\n<p>I have a Fragment that holds a reference to an other \"subfragment\"</p>\n\n<p>Here is basically what I am doing:</p>\n\n<ol>\n<li>I have a main fragment that has <code>retainInstance</code> set to true</li>\n<li>I have a field in the main fragment that will hold a reference to the subfragment, initially this field is null</li>\n<li>In the main fragment's <code>onCreateView</code>, I check to see if the subfragment field is null, if so, I create an instance of the subFragment and assign it to the field</li>\n<li>Finally I add the subfragment to a container in the layout of the main fragment.</li>\n<li>If the field is not null, ie we are in onCreateView due to a configuration change, I don't re-create the subfragment, I just try to added it to the containter.</li>\n</ol>\n\n<p>When the device is rotated, I do observe the <code>onPaused()</code> and <code>onDestroyView()</code> methods of the subfragment being called, but I don't see any lifecyle methods being called on the subfragment during the process of adding the retained reference to the subfragment, to the child_container when the main fragments view is re-created. </p>\n\n<p>The net affect is that I don't see the subfragment view in the main fragment.  If I comment out the if (subfragment == null) and just create a new subfragment everytime, i <strong>do</strong> see the subfragment in the view.</p>\n\n<h2>Update</h2>\n\n<p>The answer below does point out a bug, in which the childFragmentManager is not retained on configuration changes.  This will ultimately break my intended usage, which was to preserve the backstack after rotation, however I think what I am seeing is something different.</p>\n\n<p>I added code to the activities <code>onWindowFocusChanged</code> method and I see something like this when the app is first launched:</p>\n\n<pre><code>activity is in view\nfm = FragmentManager{b13b9b18 in Tab1Fragment{b13b2b98}}\ntab 1 fragments = [DefaultSubfragment{b13bb610 #0 id=0x7f0c0078}]\n</code></pre>\n\n<p>and then after rotation:</p>\n\n<pre><code>activity is in view\nfm = FragmentManager{b13f9c30 in Tab1Fragment{b13b2b98}}\ntab 1 fragments = null\n</code></pre>\n\n<p>here fm is the childFragmentManager, and as you can see, we still have the same instance of Tab1Fragment, but it has a new childFragmentManager, which I think is unwanted and due to the bug reported in the answer below.\nThe thing is that I <strong>did</strong> add the subfragment to this <strong>new</strong> childFragmentManger.\nSo it seems like the transaction never executes with the reference to the fragment that was retained,  but does complete if I create a brand new fragment. (I did try calling <code>executePendingTransactions</code> on the new childFragmentManager)</p>\n\n<hr>\n\n<pre><code>class Tab1Fragment: Fragment() {\n\n    var subfragment: DefaultSubfragment? = null\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n        val rootView = inflater!!.inflate(R.layout.fragment_main, container, false)\n        if (subfragment == null ) {\n            subfragment = DefaultSubfragment()\n            subfragment!!.sectionLabel = \"label 1\"\n            subfragment!!.buttonText = \"button 1\"\n        }\n        addRootContentToContainer(R.id.child_container, content = subfragment!!)\n\n    return rootView\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        retainInstance = true\n    }\n\ninline fun Fragment.addRootContentToContainer(containerId: Int, content: Fragment) {\n    val transaction = childFragmentManager.beginTransaction()\n    transaction.replace(containerId, content)\n    transaction.commit()\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1451764562, "creation_date": 1451764562, "answer_id": 34570096, "question_id": 34569398, "link": "https://stackoverflow.com/questions/34569398/property-accessibility-in-kotlin/34570096#34570096", "title": "Property accessibility in Kotlin", "body": "<p>It's a known issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-10385\" rel=\"nofollow\">KT-10385</a>:</p>\n\n<blockquote>\n  <p>Kotlin doesn't generate setter method for the following code:</p>\n\n<pre><code>private val someProperty: Integer\npublic set\n</code></pre>\n  \n  <p>The intention is to generate a set only property. Use case including\n  spring dependency injection.</p>\n</blockquote>\n"}], "owner": {"reputation": 1693, "user_id": 2285617, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6a3a918584842b0cb751711242c57536?s=128&d=identicon&r=PG", "display_name": "Semyon Danilov", "link": "https://stackoverflow.com/users/2285617/semyon-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 34570096, "answer_count": 1, "score": 3, "last_activity_date": 1451764562, "creation_date": 1451760123, "last_edit_date": 1451763079, "question_id": 34569398, "link": "https://stackoverflow.com/questions/34569398/property-accessibility-in-kotlin", "title": "Property accessibility in Kotlin", "body": "<p>Here is what we know from the docs: getter of <code>public</code> property can't be private (seems logical enough), so:</p>\n\n<pre><code>@Inject\nvar repository: MyExampleRepository? = null\n    private get\n</code></pre>\n\n<p>won't compile.\nOk, so maybe we can make property <code>private</code> and define setter <code>public</code>?</p>\n\n<pre><code>@Inject\nprivate var repository: MyExampleRepository? = null\n    public set\n</code></pre>\n\n<p>This will compile and value will actually be injected, but I still can't use this in code, so:</p>\n\n<p><code>service.repository = null</code></p>\n\n<p>gives compilation error:</p>\n\n<pre><code>Kotlin: Cannot access 'repository': it is 'private' in 'MyService'\n</code></pre>\n\n<p>I wonder if it is possible to have private property with public setter.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451705657, "post_id": 34562200, "comment_id": 56868339, "body": "In what build system, or IDE?  the answer might be different.  (I&#39;ve never seen this option available, but to be sure be clear about in what build system this would be applicable)"}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1451713360, "post_id": 34562200, "comment_id": 56869602, "body": "Do you have the source of this project on Github? Are you using Gradle and Intellij?"}, {"owner": {"reputation": 673, "user_id": 400760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587f891cd219178dab5c40c8ea354f4?s=128&d=identicon&r=PG", "display_name": "Jeffrey Charles", "link": "https://stackoverflow.com/users/400760/jeffrey-charles"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451872425, "post_id": 34562200, "comment_id": 56912802, "body": "@JaysonMinard it&#39;s using Gradle as the build system"}, {"owner": {"reputation": 673, "user_id": 400760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587f891cd219178dab5c40c8ea354f4?s=128&d=identicon&r=PG", "display_name": "Jeffrey Charles", "link": "https://stackoverflow.com/users/400760/jeffrey-charles"}, "reply_to_user": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1451872489, "post_id": 34562200, "comment_id": 56912818, "body": "@JaredBurrows <a href=\"https://github.com/jeffcharles/visitor-detector\" rel=\"nofollow noreferrer\">github.com/jeffcharles/visitor-detector</a>. A very early and still in development version. Yes and yes to Gradle and Intellij."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 400760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587f891cd219178dab5c40c8ea354f4?s=128&d=identicon&r=PG", "display_name": "Jeffrey Charles", "link": "https://stackoverflow.com/users/400760/jeffrey-charles"}, "edited": false, "score": 0, "creation_date": 1451873353, "post_id": 34562349, "comment_id": 56912994, "body": "Writing something in Gradle in the meantime is a reasonable idea. It&#39;s not high enough priority for me to justify the effort for that right now but I&#39;ll consider it in the future."}, {"owner": {"reputation": 1349, "user_id": 2465785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7192d5231450c0ccca6ad473ce1d75?s=128&d=identicon&r=PG", "display_name": "William Leung", "link": "https://stackoverflow.com/users/2465785/william-leung"}, "edited": false, "score": 0, "creation_date": 1489139397, "post_id": 34562349, "comment_id": 72550779, "body": "they schedule this improvement to 1.2? why there is no any VOTE button there"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 8, "last_activity_date": 1451712696, "last_edit_date": 1495542715, "creation_date": 1451705860, "answer_id": 34562349, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors/34562349#34562349", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>This does not appear to be currently available in the Kotlin command-line help, or arguments available to the Kotlin compiler:</p>\n\n<p><a href=\"https://github.com/JetBrains/kotlin/blob/58e93d5e1bb547c8a7e398587b6851ccf6372326/compiler/cli/cli-common/src/org/jetbrains/kotlin/cli/common/arguments/K2JVMCompilerArguments.java\" rel=\"nofollow noreferrer\">K2JVMCompilerArguments.java</a></p>\n\n<p>and</p>\n\n<p><a href=\"https://github.com/JetBrains/kotlin/blob/58e93d5e1bb547c8a7e398587b6851ccf6372326/compiler/cli/cli-common/src/org/jetbrains/kotlin/cli/common/arguments/CommonCompilerArguments.java\" rel=\"nofollow noreferrer\">CommonCompilerArguments.java</a></p>\n\n<p>But some people in Gradle do things like this to scan logging of the compiler to know when a warning was generated.  <a href=\"https://stackoverflow.com/questions/29519085/how-to-fail-gradle-build-on-javadoc-warnings\">How to fail gradle build on Javadoc warnings</a></p>\n\n<p>Within the IDE Plugins available for Kotlin (Intellij IDEA and Eclipse) there is no such option.</p>\n\n<p>You should file a feature request (or check if one already exists) in <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">YouTrack</a> which has all the issue tracking for the Kotlin project.  And if you do so, please post the issue here so it can be tracked.</p>\n"}, {"comments": [{"owner": {"reputation": 3365, "user_id": 1139908, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/236b3e95f0bac08c8695acdf99eb267c?s=128&d=identicon&r=PG", "display_name": "karl", "link": "https://stackoverflow.com/users/1139908/karl"}, "edited": false, "score": 3, "creation_date": 1513207377, "post_id": 46244803, "comment_id": 82568621, "body": "Which block of <code>build.gradle</code> does this need to be added to?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 3365, "user_id": 1139908, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/236b3e95f0bac08c8695acdf99eb267c?s=128&d=identicon&r=PG", "display_name": "karl", "link": "https://stackoverflow.com/users/1139908/karl"}, "edited": false, "score": 1, "creation_date": 1513773467, "post_id": 46244803, "comment_id": 82779272, "body": "@karl I think this should be on the top level. Please refer to the official documentation: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#compiler-options\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 3365, "user_id": 1139908, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/236b3e95f0bac08c8695acdf99eb267c?s=128&d=identicon&r=PG", "display_name": "karl", "link": "https://stackoverflow.com/users/1139908/karl"}, "edited": false, "score": 4, "creation_date": 1513801246, "post_id": 46244803, "comment_id": 82795280, "body": "Thanks. From the docs, for future reference: for an Android project, the task name will include the build variant (i.e. <code>compileDebugKotlin</code>), but you can add it to all tasks by using <code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompi&zwnj;&#8203;le).all { kotlinOptions { ... } }</code>"}, {"owner": {"reputation": 3600, "user_id": 1494902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y088H.jpg?s=128&g=1", "display_name": "Piotr Aleksander Chmielowski", "link": "https://stackoverflow.com/users/1494902/piotr-aleksander-chmielowski"}, "edited": false, "score": 2, "creation_date": 1567454062, "post_id": 46244803, "comment_id": 101960125, "body": "For Android: inside <code>allprojects</code> block of project level <code>build.gradle</code> file, add: <code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompi&zwnj;&#8203;le).all { kotlinOptions.allWarningsAsErrors = true }</code>"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 38, "last_activity_date": 1508860010, "last_edit_date": 1508860010, "creation_date": 1505496428, "answer_id": 46244803, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors/46244803#46244803", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>Since Kotlin 1.2, the command line argument <code>-Werror</code> is supported. In Gradle, it's named <code>allWarningsAsErrors</code>:</p>\n\n<pre><code>compileKotlin {\n    kotlinOptions.allWarningsAsErrors = true\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 188, "user_id": 389842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664211abba7c71ba83c7e43d64098f02?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/389842/daniel"}, "edited": false, "score": 1, "creation_date": 1584124719, "post_id": 59788388, "comment_id": 107350476, "body": "For AndroidStudio 3.5, I put the above block within <code>allprojects</code> block at top level of ./app/build.gradle file, and that worked for me."}], "tags": [], "owner": {"reputation": 4154, "user_id": 2390217, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/1c42289dabee917e679767208ae4c534?s=128&d=identicon&r=PG&f=1", "display_name": "Alireza A. Ahmadi", "link": "https://stackoverflow.com/users/2390217/alireza-a-ahmadi"}, "is_accepted": false, "score": 2, "last_activity_date": 1579267803, "creation_date": 1579267803, "answer_id": 59788388, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors/59788388#59788388", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>If you are using android use this instead. In Android we don't have compileKotlin but rather compileDebugKotlin, compileReleaseKotlin, etc. So we have to loop through them and add this configuration to all of them. </p>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {\n    kotlinOptions {\n        kotlinOptions.allWarningsAsErrors = true\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16575, "user_id": 52954, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/49313a97f8c3f50e05b6c7ce6d3e8ecd?s=128&d=identicon&r=PG", "display_name": "LiorH", "link": "https://stackoverflow.com/users/52954/liorh"}, "is_accepted": false, "score": 1, "last_activity_date": 1582106844, "creation_date": 1582106844, "answer_id": 60297759, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors/60297759#60297759", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>With the Kotlin DSL:</p>\n\n<pre><code>tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt; {\n    kotlinOptions {\n        kotlinOptions.allWarningsAsErrors = true\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2444, "user_id": 287761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZJAT.png?s=128&g=1", "display_name": "Enselic", "link": "https://stackoverflow.com/users/287761/enselic"}, "is_accepted": false, "score": 4, "last_activity_date": 1589276296, "creation_date": 1589276296, "answer_id": 61748428, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors/61748428#61748428", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>With recent versions of the Android Gradle plug-in, one can simply do this:</p>\n\n<pre><code>android {\n    kotlinOptions {\n        kotlinOptions.allWarningsAsErrors = true\n    }\n\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 673, "user_id": 400760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5587f891cd219178dab5c40c8ea354f4?s=128&d=identicon&r=PG", "display_name": "Jeffrey Charles", "link": "https://stackoverflow.com/users/400760/jeffrey-charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5719, "favorite_count": 1, "accepted_answer_id": 46244803, "answer_count": 5, "score": 31, "last_activity_date": 1589276296, "creation_date": 1451704004, "question_id": 34562200, "link": "https://stackoverflow.com/questions/34562200/how-do-i-make-the-kotlin-compiler-treat-warnings-as-errors", "title": "How do I make the Kotlin compiler treat warnings as errors?", "body": "<p>I have a Kotlin project where I'd like to have Kotlin warnings treated as errors. How can I do that?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 1139, "user_id": 388065, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0d5510c3c90ef3a040ad3bbd2e38859?s=128&d=identicon&r=PG", "display_name": "Makotosan", "link": "https://stackoverflow.com/users/388065/makotosan"}, "edited": false, "score": 5, "creation_date": 1477085587, "post_id": 34541650, "comment_id": 67639126, "body": "If you want to do it in onCreateView, btn_K will be a property on rootView as well.  You could do <code>rootView.btn_K.setOnClickListener</code>"}, {"owner": {"reputation": 68, "user_id": 6151294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f3673303ce0a4728aad2bf06e0117c?s=128&d=identicon&r=PG&f=1", "display_name": "Mahdi Bagjani", "link": "https://stackoverflow.com/users/6151294/mahdi-bagjani"}, "reply_to_user": {"reputation": 1139, "user_id": 388065, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0d5510c3c90ef3a040ad3bbd2e38859?s=128&d=identicon&r=PG", "display_name": "Makotosan", "link": "https://stackoverflow.com/users/388065/makotosan"}, "edited": false, "score": 0, "creation_date": 1531916394, "post_id": 34541650, "comment_id": 89774435, "body": "Thanks @Makotosan your answer  worked for me."}, {"owner": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 0, "creation_date": 1540536043, "post_id": 34541650, "comment_id": 92909613, "body": "Clean, rebuild and restart Android studio worked for me"}, {"owner": {"reputation": 4683, "user_id": 3870025, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0fd762141547dc47fbf1fd5b9b389fc?s=128&d=identicon&r=PG&f=1", "display_name": "solidak", "link": "https://stackoverflow.com/users/3870025/solidak"}, "reply_to_user": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 0, "creation_date": 1540537203, "post_id": 34541650, "comment_id": 92910224, "body": "@Otziii This thread was first written in 2015. The first answer has 259 votes and was accepted. I don&#39;t think its necessary to add more answers."}, {"owner": {"reputation": 1977, "user_id": 3301138, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OifFE.jpg?s=128&g=1", "display_name": "Otziii", "link": "https://stackoverflow.com/users/3301138/otziii"}, "edited": false, "score": 2, "creation_date": 1540538006, "post_id": 34541650, "comment_id": 92910669, "body": "@Solidak I had this problem recently, tried all the answers and the only thing that made it work was what I now commented. I had an answer on this thread, but it just got downvoted, so I changed it to a comment. Seems like people are still having this issue, and no one mentioned to clean and restart."}], "answers": [{"comments": [{"owner": {"reputation": 4683, "user_id": 3870025, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0fd762141547dc47fbf1fd5b9b389fc?s=128&d=identicon&r=PG&f=1", "display_name": "solidak", "link": "https://stackoverflow.com/users/3870025/solidak"}, "edited": false, "score": 3, "creation_date": 1451608117, "post_id": 34543172, "comment_id": 56848011, "body": "It worked!! Thanks.   Just a quick heads-up for future reference. I had another exception, and I dug a little deeper and it turns out that the Null Reference Exception was coming from an async callback to the UI thread where it would try to access the synthetic property, but it was already null at the time. Make sure to use the <i>Safe Call</i> operator (?.) or some other null safety operator.   It would also help to keep a class reference of the view and not rely on synthetic properties outside of <code>onViewCreated()</code>"}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "edited": false, "score": 2, "creation_date": 1477848399, "post_id": 34543172, "comment_id": 67918202, "body": "One question though - it generates different code for Activity and Fragment? If we use another structure that doesn&#39;t contain <code>getView()</code> or it cannot invoke <code>findViewById()</code>, is there a way to work around it? For example, teach it which function will return my layout?"}, {"owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "edited": false, "score": 7, "creation_date": 1487428953, "post_id": 34543172, "comment_id": 71786481, "body": "You can also access it like <code>rootView.btn_K</code> if you have a view (and not just in fragments , this can be done everywhere)"}, {"owner": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "edited": false, "score": 0, "creation_date": 1510416768, "post_id": 34543172, "comment_id": 81430246, "body": "It works ! However It should be more underlined from Kotlin documentation. I didn&#39;t notice this method until this post.. Thanks anyway !"}, {"owner": {"reputation": 9000, "user_id": 2851687, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2wGfz.jpg?s=128&g=1", "display_name": "ralphgabb", "link": "https://stackoverflow.com/users/2851687/ralphgabb"}, "edited": false, "score": 0, "creation_date": 1523599251, "post_id": 34543172, "comment_id": 86634998, "body": "it works. also kotterknife works this way not in Java where you can access it @ onCreateView of fragment. Good find though. Thanks"}, {"owner": {"reputation": 614, "user_id": 2058441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FXoAo.jpg?s=128&g=1", "display_name": "Loves2Develop", "link": "https://stackoverflow.com/users/2058441/loves2develop"}, "edited": false, "score": 0, "creation_date": 1553809565, "post_id": 34543172, "comment_id": 97535143, "body": "You&#39;re my superman! I&#39;m was just trying to build a simple app with some trial and error and missed this simple answer while I was banging my head trying to understand why all elements were null"}, {"owner": {"reputation": 108, "user_id": 1848871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b2c5ec90894ca498134e8941081d16?s=128&d=identicon&r=PG", "display_name": "Arie Agung", "link": "https://stackoverflow.com/users/1848871/arie-agung"}, "edited": false, "score": 8, "creation_date": 1556108151, "post_id": 34543172, "comment_id": 98324304, "body": "I always used it in onViewCreated, but still on some device (I got the report from Crashlytics) it got &quot;must not be null&quot; exception. The view is there. I inflate correct layout, it works on my device. It just strange not working on random device."}, {"owner": {"reputation": 2961, "user_id": 1882227, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/22c446eb0a1e6a90beba1a213bf8e27a?s=128&d=identicon&r=PG", "display_name": "Langkiller", "link": "https://stackoverflow.com/users/1882227/langkiller"}, "edited": false, "score": 0, "creation_date": 1557434060, "post_id": 34543172, "comment_id": 98774157, "body": "Thanks a lot for the precise and informative answer!"}, {"owner": {"reputation": 7507, "user_id": 324417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f0086aee0bbb0aaa6545e8a80969494?s=128&d=identicon&r=PG", "display_name": "DixieFlatline", "link": "https://stackoverflow.com/users/324417/dixieflatline"}, "reply_to_user": {"reputation": 108, "user_id": 1848871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b2c5ec90894ca498134e8941081d16?s=128&d=identicon&r=PG", "display_name": "Arie Agung", "link": "https://stackoverflow.com/users/1848871/arie-agung"}, "edited": false, "score": 0, "creation_date": 1595838505, "post_id": 34543172, "comment_id": 111601565, "body": "@ArieAgung i have same problems that got worse lately. How to fix this case?"}], "tags": [], "owner": {"reputation": 14074, "user_id": 1348215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/iEZX8.jpg?s=128&g=1", "display_name": "Egor Neliuba", "link": "https://stackoverflow.com/users/1348215/egor-neliuba"}, "is_accepted": true, "score": 479, "last_activity_date": 1530981709, "last_edit_date": 1530981709, "creation_date": 1451548915, "answer_id": 34543172, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/34543172#34543172", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>Kotlin synthetic properties are not magic and work in a very simple way. When you access <code>btn_K</code>, it calls for <code>getView().findViewById(R.id.btn_K)</code>.</p>\n\n<p>The problem is that you are accessing it too soon. <code>getView()</code> returns <code>null</code> in <code>onCreateView</code>. Try doing it in the <code>onViewCreated</code> method:</p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    btn_K.setOnClickListener { Log.d(TAG, \"onViewCreated(): hello world\"); }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 7404532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f9e61e7c83984bbf83f84638d9b340?s=128&d=identicon&r=PG&f=1", "display_name": "NathanL", "link": "https://stackoverflow.com/users/7404532/nathanl"}, "edited": false, "score": 0, "creation_date": 1521801812, "post_id": 47391485, "comment_id": 85897210, "body": "I just want to point out that for some reasons, this answer worked for me while the accepted answer did not. My views are null in <code>onViewCreated</code> but then defined in <code>onActivityCreated</code>. Don&#39;t know why though."}], "tags": [], "owner": {"reputation": 111, "user_id": 5491022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c39dde575146152f5e2534a0843be6?s=128&d=identicon&r=PG&f=1", "display_name": "Kashish luthra", "link": "https://stackoverflow.com/users/5491022/kashish-luthra"}, "is_accepted": false, "score": 10, "last_activity_date": 1511182473, "last_edit_date": 1511182473, "creation_date": 1511179028, "answer_id": 47391485, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/47391485#47391485", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>You are calling this <code>btn_K</code> too soon as at that time it returns a null and is giving you Null Pointer Exception. </p>\n\n<p>You can use these views by this synthetic plugin in <code>onActivityCreated()</code> method which is called just after <code>onCreateView()</code> of Fragment lifecycle.</p>\n\n<pre><code>onActivityCreated()\n{\n        super.onActivityCreated(savedInstanceState)\n        btn_K.setOnClickListener{}\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 5147789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hIZLR.jpg?s=128&g=1", "display_name": "Amit Walke", "link": "https://stackoverflow.com/users/5147789/amit-walke"}, "is_accepted": false, "score": -3, "last_activity_date": 1523361689, "creation_date": 1523361689, "answer_id": 49753120, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/49753120#49753120", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<pre><code>class CardSelectorFragment : Fragment() {\n\n\nval TAG = javaClass.canonicalName\n\ncompanion object {\n    fun newInstance(): CardSelectorFragment {\n        return CardSelectorFragment()\n    }\n}\n\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    var rootView = inflater?.inflate(R.layout.fragment_card_selector, container, false)\n\n    rootView?.findViewById&lt;TextView&gt;(R.id.mTextView)?.setOnClickListener{\n        Log.d(TAG, \"onViewCreated(): hello world\");\n    }\n    //btn_K.setOnClickListener { Log.d(TAG, \"onViewCreated(): hello world\"); }\n    return rootView\n}\n</code></pre>\n\n<p>}</p>\n\n<p>**Here you are using btn_K.setOnClickListener before finding \n-You have to find the element form xml to your java/kotlin code by using findViewById then and then only you can perform operation on that view or element.</p>\n\n<h2>-So that's why null pointer execption you got</h2>\n\n<p>**</p>\n"}, {"comments": [{"owner": {"reputation": 5883, "user_id": 4420355, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/496f3c375711d2f45f0d913c0d1851dc?s=128&d=identicon&r=PG", "display_name": "kuzdu", "link": "https://stackoverflow.com/users/4420355/kuzdu"}, "edited": false, "score": 2, "creation_date": 1567419852, "post_id": 50482126, "comment_id": 101946992, "body": "Why? Where do have this knowledge? Why not <code>onViewCreated</code> instead?"}], "tags": [], "owner": {"reputation": 199, "user_id": 9832581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abhilasha Yadav", "link": "https://stackoverflow.com/users/9832581/abhilasha-yadav"}, "is_accepted": false, "score": 1, "last_activity_date": 1527059833, "creation_date": 1527059833, "answer_id": 50482126, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/50482126#50482126", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>In Fragments please write your code in onActivityCreated:-</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        super.onCreateView(inflater, container, savedInstanceState)\n        return inflater.inflate(R.layout.login_activity, container, false)\n\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n        callbackManager = CallbackManager.Factory.create()\n        initialization()\n        onClickLogin()\n        onClickForgot()\n        onClickSocailLogIn()\n\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1531837618, "post_id": 51354995, "comment_id": 89739709, "body": "Yes, just use <code>val view = inflater.inflate() view.button.text = &quot;caption&quot;</code>."}, {"owner": {"reputation": 520, "user_id": 6551566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F-HStsyQ1X0/AAAAAAAAAAI/AAAAAAAAFzQ/0jBesQT1ip4/photo.jpg?sz=128", "display_name": "CacheMeOutside", "link": "https://stackoverflow.com/users/6551566/cachemeoutside"}, "edited": false, "score": 0, "creation_date": 1548365307, "post_id": 51354995, "comment_id": 95526295, "body": "This is the best answer - neatest solution for sure!"}, {"owner": {"reputation": 2983, "user_id": 7767664, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/32630cb48af30367a74442b541b5f94a?s=128&d=identicon&r=PG&f=1", "display_name": "user924", "link": "https://stackoverflow.com/users/7767664/user924"}, "reply_to_user": {"reputation": 520, "user_id": 6551566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F-HStsyQ1X0/AAAAAAAAAAI/AAAAAAAAFzQ/0jBesQT1ip4/photo.jpg?sz=128", "display_name": "CacheMeOutside", "link": "https://stackoverflow.com/users/6551566/cachemeoutside"}, "edited": false, "score": 0, "creation_date": 1550044009, "post_id": 51354995, "comment_id": 96120333, "body": "@CacheMeOutside no, because it&#39;s still boilerplate code <code>rootView.subView.doSomething</code>. It&#39;s better to use views starting from <code>onViewCreated</code>"}], "tags": [], "owner": {"reputation": 521, "user_id": 5046960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dGCFU.jpg?s=128&g=1", "display_name": "Rhusfer", "link": "https://stackoverflow.com/users/5046960/rhusfer"}, "is_accepted": false, "score": 5, "last_activity_date": 1531718375, "creation_date": 1531718375, "answer_id": 51354995, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51354995#51354995", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>the only thing you need to do is:</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    var rootView = inflater?.inflate(R.layout.fragment_card_selector, container, false)\n    rootView.btn_K.setOnClickListener { Log.d(TAG, \"onViewCreated(): hello world\"); }\n\n    return rootView\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38571, "user_id": 1418457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/16bebb36e0e28572a316ba0450e190d1?s=128&d=identicon&r=PG", "display_name": "onmyway133", "link": "https://stackoverflow.com/users/1418457/onmyway133"}, "is_accepted": false, "score": 7, "last_activity_date": 1533553952, "last_edit_date": 1533553952, "creation_date": 1533304997, "answer_id": 51674381, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/51674381#51674381", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>Synthetic properties generated by <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"noreferrer\">Kotlin Android Extensions plugin</a> needs a <code>view</code> for <code>Fragment/Activity</code> to be set before hand.</p>\n\n<p>In your case, for <code>Fragment</code>, you need to use <code>view.btn_K</code> in <code>onViewCreated</code></p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    super.onCreateView(inflater, container, savedInstanceState)\n    val view = inflater.inflate(R.layout.fragment_card_selector, container, false)\n    view.btn_K.setOnClickListener{} // access with `view`\n    return view\n}\n</code></pre>\n\n<p>Or better, you should only access synthetic properties in <code>onViewCreated</code></p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    super.onCreateView(inflater, container, savedInstanceState)\n    return inflater.inflate(R.layout.fragment_card_selector, container, false)\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    btn_K.setOnClickListener{} // access without `view`\n}\n</code></pre>\n\n<p>Please notice that <code>savedInstanceState</code> parameter should be nullable <code>Bundle?</code>, and also check <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"noreferrer\">Importing synthetic properties</a></p>\n\n<blockquote>\n  <p>It is convenient to import all widget properties for a specific layout\n  in one go:</p>\n  \n  <p><code>import kotlinx.android.synthetic.main.&lt;layout&gt;.*</code></p>\n  \n  <p>Thus if the layout filename is activity_main.xml, we'd import\n  <code>kotlinx.android.synthetic.main.activity_main.*.</code></p>\n  \n  <p>If we want to call the synthetic properties on View, we should also\n  import <code>kotlinx.android.synthetic.main.activity_main.view.*.</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 7289, "user_id": 3736955, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1647d5d7348d070ae95df49253385ee1?s=128&d=identicon&r=PG", "display_name": "Jemshit Iskenderov", "link": "https://stackoverflow.com/users/3736955/jemshit-iskenderov"}, "edited": false, "score": 0, "creation_date": 1546855433, "post_id": 53333007, "comment_id": 94977108, "body": "i have seen it happening in <code>onActivityCreated</code> too"}], "tags": [], "owner": {"reputation": 931, "user_id": 4429472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/830c4684595c5ff0de0621e686c51345?s=128&d=identicon&r=PG&f=1", "display_name": "ZzZombo", "link": "https://stackoverflow.com/users/4429472/zzzombo"}, "is_accepted": false, "score": 0, "last_activity_date": 1542352024, "creation_date": 1542352024, "answer_id": 53333007, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/53333007#53333007", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>In my case nothing worked until I followed the advice from <a href=\"https://stackoverflow.com/users/3301138/otziii\">Otziii</a> in the comments. Clean, rebuild (no restart needed), re-run the app. I also didn't need to go with <code>onActivityCreated</code> and just <code>onCreateView</code> did the trick.</p>\n\n<p>One time I also made the error of inflating wrong layout, thus not getting the expected controls obviously.</p>\n"}, {"tags": [], "owner": {"reputation": 208, "user_id": 6737438, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sNKGMi2BUEk/AAAAAAAAAAI/AAAAAAAACjE/ND4c_iParRg/photo.jpg?sz=128", "display_name": "Rahul ShaRma", "link": "https://stackoverflow.com/users/6737438/rahul-sharma"}, "is_accepted": false, "score": 3, "last_activity_date": 1561536902, "creation_date": 1561536902, "answer_id": 56768213, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/56768213#56768213", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>no need to define companion object just call every id by a view like</p>\n\n<pre><code> lateinit var mView: View\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    mView=inflater.inflate(R.layout.product_list,container,false)\n\n    mView.addProduct.setOnClickListener {\n\n        val intent=Intent(activity,ProductAddActivity::class.java)\n        startActivity(intent)\n    }     return mView\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1072, "user_id": 6330489, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/831813746924822/picture?type=large", "display_name": "Aziz", "link": "https://stackoverflow.com/users/6330489/aziz"}, "is_accepted": false, "score": 0, "last_activity_date": 1565940729, "last_edit_date": 1565940729, "creation_date": 1565940246, "answer_id": 57520459, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment/57520459#57520459", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>Adding it to @Egor Neliuba's answer, Yes whenever you call a view without reference, kotlinex looks for a rootView, and since you are inside a fragment and fragment doesn't have <code>getView()</code> method. Therefore it might throw <code>NullPointerException</code></p>\n\n<p>There are two ways to overcome this,</p>\n\n<ul>\n<li>Either you override <code>onViewCreated()</code> as mentioned</li>\n<li><p>Or If you want to bind views in some other class(say anonymous), you can simply create an extension function like this,</p>\n\n<p><code>fun View.bindViews(){...}</code></p></li>\n</ul>\n\n<p>The second approach is helpful, when you have a single fragment with multiple behaviour.</p>\n"}], "owner": {"reputation": 4683, "user_id": 3870025, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0fd762141547dc47fbf1fd5b9b389fc?s=128&d=identicon&r=PG&f=1", "display_name": "solidak", "link": "https://stackoverflow.com/users/3870025/solidak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58029, "favorite_count": 29, "accepted_answer_id": 34543172, "answer_count": 9, "score": 257, "last_activity_date": 1565940729, "creation_date": 1451540503, "last_edit_date": 1537188205, "question_id": 34541650, "link": "https://stackoverflow.com/questions/34541650/nullpointerexception-when-trying-to-access-views-in-a-kotlin-fragment", "title": "NullPointerException when trying to access views in a Kotlin fragment", "body": "<p>How to use Kotlin Android Extensions with <code>Fragment</code>s?\nIf I use them inside <code>onCreateView()</code>, I get this <code>NullPointerException</code> exception: </p>\n\n<blockquote>\n  <p>Caused by: java.lang.NullPointerException: Attempt to invoke virtual\n  method 'android.view.View android.view.View.findViewById(int)' on a\n  null object reference</p>\n</blockquote>\n\n<p>Here is the fragment code: </p>\n\n<pre><code>package com.obaied.testrun.Fragment\n\nimport android.os.Bundle\nimport android.support.v4.app.Fragment\nimport android.util.Log\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport com.obaied.acaan.R\nimport kotlinx.android.synthetic.main.fragment_card_selector.*\n\npublic class CardSelectorFragment : Fragment() {\n    val TAG = javaClass.canonicalName\n\n    companion object {\n        fun newInstance(): CardSelectorFragment {\n            return CardSelectorFragment()\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        var rootView = inflater?.inflate(R.layout.fragment_card_selector, container, false)\n        btn_K.setOnClickListener { Log.d(TAG, \"onViewCreated(): hello world\"); }\n\n        return rootView\n    }\n}\n`\n</code></pre>\n"}]