[{"tags": ["kotlin", "listiterator"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1462960793, "post_id": 37159064, "comment_id": 61854173, "body": "Maybe you could describe the problem you&#39;re trying to solve in more detail?"}], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1462962159, "post_id": 37159455, "comment_id": 61855185, "body": "And how can I initialize it with an empty list&lt;string&gt;?"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1462962493, "post_id": 37159455, "comment_id": 61855424, "body": "I don&#39;t understand what you mean."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462963633, "post_id": 37159455, "comment_id": 61856180, "body": "<code>val iit = listOf&lt;String&gt;().iterator()</code>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 3, "last_activity_date": 1462961440, "creation_date": 1462961440, "answer_id": 37159455, "question_id": 37159064, "link": "https://stackoverflow.com/questions/37159064/how-to-declare-an-iterator-without-initializing-it-kotlin/37159455#37159455", "title": "How to declare an iterator without initializing it? (Kotlin)", "body": "<p>If this variable is a property you can use either <code>lateinit</code> or <code>Delegates.notNull()</code>.</p>\n\n<pre><code>private var lateinit iterator1: ListIterator&lt;String&gt;\nprivate var iterator2: ListIterator&lt;String&gt; by Delegates.notNull()\n</code></pre>\n\n<p>However if it's a local variable you cannot left it uninitialized. You can declare it as a <code>val</code> and initialize it later but initialization must happen in all code paths.</p>\n\n<pre><code>val iterator: ListIterator&lt;String&gt;\n// Do something.\niterator = list.listIterator()\n</code></pre>\n\n<p>Or you can make it nullable, initialize with <code>null</code> and later assign it a value.</p>\n\n<pre><code>var iterator: ListIterator&lt;String&gt;? = null\n// Do something.\niterator = list.listIterator()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4829117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259c758f4c8f99c62eecdb88393eab49?s=128&d=identicon&r=PG&f=1", "display_name": "Jano Hern&#225;ndez", "link": "https://stackoverflow.com/users/4829117/jano-hern%c3%a1ndez"}, "is_accepted": false, "score": 1, "last_activity_date": 1463044769, "creation_date": 1463044769, "answer_id": 37182510, "question_id": 37159064, "link": "https://stackoverflow.com/questions/37159064/how-to-declare-an-iterator-without-initializing-it-kotlin/37182510#37182510", "title": "How to declare an iterator without initializing it? (Kotlin)", "body": "<p>As written as answer, this is what you are asking for.</p>\n\n<pre><code>val iit = listOf&lt;String&gt;().iterator()\n</code></pre>\n\n<p>But, from my point of view, create an iterator from an empty list you are not referencing ever again is a bad smell.</p>\n\n<p>Maybe you should consider</p>\n\n<pre><code>val l = listOf&lt;String&gt;()\nval iit = l.iterator()\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517276733, "creation_date": 1462960544, "last_edit_date": 1517276733, "question_id": 37159064, "link": "https://stackoverflow.com/questions/37159064/how-to-declare-an-iterator-without-initializing-it-kotlin", "title": "How to declare an iterator without initializing it? (Kotlin)", "body": "<p>I have a <code>listIterator&lt;String&gt;</code> called <code>iit</code>.</p>\n\n<p>Now I know how to declare it and give it a value, but what if I just want to declare it and initialize it with nothing.</p>\n\n<p>How can it be done?</p>\n\n<p><strong>EDIT:</strong>\nAnd how can I initialize the iterator with an empty <code>list&lt;string&gt;</code>?</p>\n"}, {"tags": ["regex", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1462907619, "post_id": 37146888, "comment_id": 61832149, "body": "<code>iString</code> uses &quot;/n&quot; instead of &quot;\\n&quot;. Is that intentional?"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1462907740, "post_id": 37146888, "comment_id": 61832208, "body": "Wouldn&#39;t something like <code>&#47;&#47;.*[\\n]*</code> work?"}, {"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1462908154, "post_id": 37146888, "comment_id": 61832440, "body": "@mfulton26 - No, it&#39;s a mistake. I&#39;ve fixed it."}, {"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1462908202, "post_id": 37146888, "comment_id": 61832470, "body": "@I&#39;L&#39;I It&#39;s possible there&#39;s more than one space between the <code>&quot;&#47;&#47;&quot;</code>. As for the <code>&quot;.*&quot;</code> for some reason it doesn&#39;t work in Kotlin."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1462915216, "post_id": 37146888, "comment_id": 61836339, "body": "@user3601872 could you please explain why you specified your question to relate to the &quot;kotlin&quot; topic? Kotlin (after Java and many other languages) support the regular expressions syntax which is standard and language-independent. How does knowing kotlin help answer this question?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1462929020, "post_id": 37146888, "comment_id": 61840556, "body": "@user3601872 Could you tell what are you trying to achieve in general? If you want to parse some C++ code, then regular expressions isn&#39;t a suitable tool for this task."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462963880, "post_id": 37146888, "comment_id": 61856346, "body": "@user3601872 about the Kotlin tag - could you please remove the tag from your question and reformulate it so it is language-agnostic? Irrelevant tags  confuse others"}], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 1, "creation_date": 1462908712, "post_id": 37147206, "comment_id": 61832738, "body": "Worked! Thank you!  Who doesn&#39;t love a one-line, let alone a one-character solution?"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1462908104, "creation_date": 1462908104, "answer_id": 37147206, "question_id": 37146888, "link": "https://stackoverflow.com/questions/37146888/how-to-make-regular-expression-end-at-first-chance-kotlin/37147206#37147206", "title": "How to make regular-expression end at first chance. (Kotlin)", "body": "<p><code>X*</code> is a greedy quantifier (see <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/quant.html\" rel=\"noreferrer\">Quantifiers (The Java\u2122 Tutorials > Essential Classes > Regular Expressions</a>).</p>\n\n<p>You can use <code>X*?</code> instead which is a reluctant quantifier:</p>\n\n<pre><code>var iString = \"int i; //A variable \\n\" +\n        \"//This is a text with notes \\n\" +\n        \"//Can you remove them? \\n\" +\n        \"cout&lt;&lt;i; //printing i \\n\"\nvar notes1= (\"/\"+\"(\\\\s)*\"+\"/\"+\"(\\\\w|[^\\\\w])*?\"+\"\\\\n\").toRegex()\nprintln(iString.replace(notes1, \"\"))\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>int i; cout&lt;&lt;i; \n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 37147206, "answer_count": 1, "score": 1, "last_activity_date": 1462908104, "creation_date": 1462907006, "last_edit_date": 1462907841, "question_id": 37146888, "link": "https://stackoverflow.com/questions/37146888/how-to-make-regular-expression-end-at-first-chance-kotlin", "title": "How to make regular-expression end at first chance. (Kotlin)", "body": "<p>Say I have a string that contains a program with notes as follows:</p>\n\n<pre><code>var iString = \"int i; //A variable \\n\" +\n\"//This is a text with notes \\n\" +\n\"//Can you remove them? \\n\" +\n\"cout&lt;&lt;i; //printing i \\n\"\n</code></pre>\n\n<p>I've created a regular expression that would recognize notes:</p>\n\n<pre><code>var notes1= (\"/\"+\"(\\\\s)*\"+\"/\"+\"(\\\\w|[^\\\\w])*\"+\"\\\\n\").toRegex()\n</code></pre>\n\n<p>Problem is when writing <code>var newString = iString.replace(notes1,\"\")</code></p>\n\n<p>I accept newString to be: <code>\"int i; cout&lt;&lt;i \\n\"</code></p>\n\n<p>Instead, the result is: <code>\"int i;\"</code></p>\n\n<p>The regular expression 'devours' the whole string till the last <code>\"\\n\"</code> while I wanted is to end whenever is gets the chance.</p>\n\n<p>How do I define it in Kotlin?</p>\n"}, {"tags": ["regex", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1462907186, "post_id": 37145889, "comment_id": 61831874, "body": "Do you mind restoring your original question and then posting your current question as a new question? I could update my answer to reflect your new question but then others with a similar question as your original question would not be able to find the question/answer."}, {"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1462907404, "post_id": 37145889, "comment_id": 61832022, "body": "Done. returned the original question."}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1462905976, "creation_date": 1462905976, "answer_id": 37146596, "question_id": 37145889, "link": "https://stackoverflow.com/questions/37145889/regex-a-metacharacter-to-recognize-any-type-of-character/37146596#37146596", "title": "Regex: A metacharacter to recognize any type of character", "body": "<p>The dollar sign (<code>$</code>) is a boundary matcher for the end of a line so you have to escape it with backslash (<code>\\</code>). Kotlin has two types of strings: escaped and raw (see <a href=\"https://kotlinlang.org/docs/reference/basic-types.html\" rel=\"nofollow\">Basic Types - Kotlin Programming Language</a>). If you use escaped strings then you'll need to escape the backslash with a backslash. Below are various ways to declare your desired <code>Regex</code>:</p>\n\n<pre><code>\"\"\"\\$.{3}\\$\"\"\".toRegex()\n\"\"\"\\$...\\$\"\"\".toRegex()\n\"\\\\$.{3}\\\\$\".toRegex()\n\"\\\\$...\\\\$\".toRegex()\nRegex(\"\"\"\\$.{3}\\$\"\"\")\nRegex(\"\"\"\\$...\\$\"\"\")\nRegex(\"\\\\$.{3}\\\\$\")\nRegex(\"\\\\$...\\\\$\")\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462953953, "creation_date": 1462903500, "last_edit_date": 1462953953, "question_id": 37145889, "link": "https://stackoverflow.com/questions/37145889/regex-a-metacharacter-to-recognize-any-type-of-character", "title": "Regex: A metacharacter to recognize any type of character", "body": "<p>I want to be able to recognize the following pattern:\n<code>$...$</code></p>\n\n<p>with <code>\"...\"</code> being any type of character.</p>\n\n<p>How can it be done in Kotlin?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1463578155, "post_id": 37145009, "comment_id": 62124413, "body": "FYI: In addition to hotkey&#39;s great workaround below I&#39;ve created <a href=\"https://youtrack.jetbrains.com/issue/KT-12393\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-12393</a>."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 4, "last_activity_date": 1462957208, "last_edit_date": 1462957208, "creation_date": 1462902110, "answer_id": 37145469, "question_id": 37145009, "link": "https://stackoverflow.com/questions/37145009/how-do-i-call-a-method-in-kotlin-with-a-different-upper-bound/37145469#37145469", "title": "How do I call a method in Kotlin with a different upper bound?", "body": "<p>As for now I found this quite hacky workaround for it:</p>\n\n<pre><code>private enum class DummyEnum    \n\nfun &lt;T&gt; handleAny(classOfT: Class&lt;T&gt;) {\n    if (classOfT.isEnum) {\n        handleEnum(classOfT as Class&lt;DummyEnum&gt;) //absolutely any enum goes\n    }\n}\n\nfun &lt;T : Enum&lt;T&gt;&gt; handleEnum(classOfT: Class&lt;T&gt;) {\n    println(classOfT.toString())\n}\n</code></pre>\n\n<p>The idea is to make an unchecked cast to the type with any generic parameter satisfying the upper bound (let it be <code>DummyEnum</code>), which will then be erased at runtime anyway.</p>\n\n<p>The limitation is that the solution <strong>doesn't work correctly with reified generics</strong>: if <code>handleEnum</code> had reified type parameter, it would be substituted for statically inferred type (<code>DummyEnum</code>).</p>\n"}], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 37145469, "answer_count": 1, "score": 3, "last_activity_date": 1462957208, "creation_date": 1462900644, "question_id": 37145009, "link": "https://stackoverflow.com/questions/37145009/how-do-i-call-a-method-in-kotlin-with-a-different-upper-bound", "title": "How do I call a method in Kotlin with a different upper bound?", "body": "<p>e.g. Given a <code>Class&lt;T&gt;</code> how do I call/invoke a method/constructor that requires <code>Class&lt;T&gt; where T : Enum&lt;T&gt;</code>?</p>\n\n<pre><code>fun &lt;T : Any&gt; handleAny(classOfT: Class&lt;T&gt;) {\n    if (classOfT.isEnum) {\n        handleEnum(classOfT)\n    }\n}\n\nfun &lt;T : Enum&lt;T&gt;&gt; handleEnum(classOfT: Class&lt;T&gt;) { /*...*/ }\n</code></pre>\n\n<p>Error: <code>inferred type T is not a subtype of kotlin.Enum&lt;T&gt;</code></p>\n\n<p>In Java I can do an unchecked call but I cannot seem to find a way to do anything similar in Kotlin.</p>\n"}, {"tags": ["java", "regex", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462901981, "post_id": 37144643, "comment_id": 61828803, "body": "this is a question about regular expressions, right?"}, {"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1462902388, "post_id": 37144643, "comment_id": 61829031, "body": "This depends, what language is this?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1462918797, "post_id": 37144643, "comment_id": 61837723, "body": "If you have longer comments, very large ones, you may have issues with the <code>(?s)&#47;\\\\*.*?\\\\*&#47;</code>. Then, use a proven and time beaten <code>&quot;&#47;\\\\*[^*]*\\\\*+(?:[^&#47;*][^*]*\\\\*+)*&#47;&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1455, "user_id": 5339966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0897e935d50e040875b9ea61d8c0851c?s=128&d=identicon&r=PG&f=1", "display_name": "mszymborski", "link": "https://stackoverflow.com/users/5339966/mszymborski"}, "edited": false, "score": 1, "creation_date": 1462909577, "post_id": 37145531, "comment_id": 61833220, "body": "It&#39;s worth noting, even just so that people know what to look for, that it uses lazy matching for the content rather than the normal, greedy one. This way it doesn&#39;t match multiple block coments, as noted in other comments."}], "tags": [], "owner": {"reputation": 1931, "user_id": 5384802, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NfjlfEGYm0k/AAAAAAAAAAI/AAAAAAAAIg8/8T0oIsEarGU/photo.jpg?sz=128", "display_name": "Arnaud Gueras", "link": "https://stackoverflow.com/users/5384802/arnaud-gueras"}, "is_accepted": false, "score": 1, "last_activity_date": 1462902291, "creation_date": 1462902291, "answer_id": 37145531, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note/37145531#37145531", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p>You must escaped special characters</p>\n\n<pre><code> /(\\/\\*.+?\\*\\/)/\n</code></pre>\n\n<p><a href=\"http://regexr.com/3dd28\" rel=\"nofollow\">http://regexr.com/3dd28</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 4, "creation_date": 1462902646, "post_id": 37145542, "comment_id": 61829176, "body": "That regex also matches <code>&#47;* 1 *&#47; 2 &#47;* 3 *&#47;</code> completely, where the <code>2</code> should in pretty much all languages using <code>&#47;* ... *&#47;</code> comments not be treated as part of a comment."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462902333, "creation_date": 1462902333, "answer_id": 37145542, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note/37145542#37145542", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p>Not sure what you are trying to achieve, but here is a regex which matches a <code>/* ... */</code> comment: <code>\\/\\*.*\\*\\/</code></p>\n\n<p>Use this site to find and debug a solution <a href=\"http://regexr.com/\" rel=\"nofollow\">http://regexr.com/</a></p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462903042, "post_id": 37145588, "comment_id": 61829426, "body": "does not mach <code>&#47;* &#47;&#47;hello *&#47;</code> :("}, {"owner": {"reputation": 1455, "user_id": 5339966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0897e935d50e040875b9ea61d8c0851c?s=128&d=identicon&r=PG&f=1", "display_name": "mszymborski", "link": "https://stackoverflow.com/users/5339966/mszymborski"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1462909415, "post_id": 37145588, "comment_id": 61833117, "body": "@voddan You can use lazy regexes, the normal ones are greedy. They will look something like <code>&#47;\\*.*?\\*&#47;</code>. That is <code>&#47;*</code> followed by (lazily) as many other characters as it takes, followed by <code>*&#47;</code>"}, {"owner": {"reputation": 4820, "user_id": 5965558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r2ey8.jpg?s=128&g=1", "display_name": "Shady Alset", "link": "https://stackoverflow.com/users/5965558/shady-alset"}, "reply_to_user": {"reputation": 1455, "user_id": 5339966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0897e935d50e040875b9ea61d8c0851c?s=128&d=identicon&r=PG&f=1", "display_name": "mszymborski", "link": "https://stackoverflow.com/users/5339966/mszymborski"}, "edited": false, "score": 1, "creation_date": 1462909873, "post_id": 37145588, "comment_id": 61833389, "body": "@mszymborski thanks for suggestion, i&#39;ve updated my answer."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462915768, "post_id": 37145588, "comment_id": 61836631, "body": "this is nice! Found yet another bug : <code>&#47;* 1 &#47;* 2*&#47; 3?? *&#47;</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462946302, "post_id": 37145588, "comment_id": 61845241, "body": "btw, nested scopes are impossible to implement with pure regular expressions"}], "tags": [], "owner": {"reputation": 4820, "user_id": 5965558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r2ey8.jpg?s=128&g=1", "display_name": "Shady Alset", "link": "https://stackoverflow.com/users/5965558/shady-alset"}, "is_accepted": false, "score": 1, "last_activity_date": 1462910214, "last_edit_date": 1462910214, "creation_date": 1462902468, "answer_id": 37145588, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note/37145588#37145588", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p>Try this pattern <em>(also it's allow multi-line between <code>/* .. */</code> )</em>:</p>\n\n<p>EDIT: According on <strong><em>mszymborski</em></strong> suggestion.</p>\n\n<pre><code>(\\/\\*[\\w\\'\\s\\r\\n\\*]*\\*\\/)|(\\/\\*.*?\\*\\/)\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/aC5pI4/6\" rel=\"nofollow noreferrer\">regex101 DEMO</a></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/YzdKR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YzdKR.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "is_accepted": false, "score": 1, "last_activity_date": 1462910542, "creation_date": 1462910542, "answer_id": 37147911, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note/37147911#37147911", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p><code>*+</code> is <a href=\"http://www.regular-expressions.info/possessive.html\" rel=\"nofollow\">possessive</a>, so <code>(\\w|\\W)*+</code> matches all the way to the end of the string and refuses to back off to let the final <code>/</code> match.  I think you meant:</p>\n\n<pre><code>\"(?s)/.*?/\"`\n</code></pre>\n\n<p><code>(?s)</code> turns on DOTALL mode, which allows the <code>.</code> to match newlines; that's much more efficient than <code>(\\w|\\W)</code>.  The <code>?</code> makes the <code>.*</code> non-greedy, so it stops at the very next <code>/</code>.  However, I think you may want this:</p>\n\n<pre><code>\"(?s)/\\\\*.*?\\\\*/\"\n</code></pre>\n\n<p>I don't know what kind of text you're matching, but if it's a programming language, the <code>*</code> is most likely part of the comment delimiter, and a <code>/</code> by itself has its own, very different meaning.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462963437, "last_edit_date": 1495540792, "creation_date": 1462963437, "answer_id": 37160285, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note/37160285#37160285", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p>Unfortunately it is not possible to match <code>/* .. */</code> syntax with Java/Kotlin RegEx correctly since they do not support recursive patterns.</p>\n\n<p>The problematic test case is:</p>\n\n<pre><code>/*\n    /* ... */\n*/\n</code></pre>\n\n<p>Kotlin compiler will parse the code above as two <strong>nested</strong> comment blocks.</p>\n\n<p>The only way to achieve that for an arbitrary level of nested blocks is to use a technic called \"Regular Expression Recursion\". As mentioned here, it is not supported on Java <a href=\"https://stackoverflow.com/questions/2010469/java-regex-library-with-recursion-support\">Java regex library with recursion support</a>.</p>\n\n<p>The only solution I see here (if you indeed need to correctly parse <em>any</em> Kotlin code) is to write your own parser for that.</p>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1462963437, "creation_date": 1462899334, "last_edit_date": 1462909083, "question_id": 37144643, "link": "https://stackoverflow.com/questions/37144643/a-regular-expression-that-would-recognize-a-note", "title": "A regular expression that would recognize a /*...*/ note", "body": "<p>I have a string containing <code>/*...*/</code> notes and I'm trying to get rid of them.  For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hello /* this is a note */\n</code></pre>\n\n<p>So basically I'm trying to come up with a regular-expression that would find a <code>/</code> then a sequence of any type of characters, then another <code>/</code>.  I've tried this:</p>\n\n<pre><code>(\"/+(\\\\w|\\\\W)*+/\").toRegex()\n</code></pre>\n\n<p>...but it doesn't work.</p>\n"}, {"tags": ["assert", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 8470, "user_id": 1245622, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/V7rHB.jpg?s=128&g=1", "display_name": "linqu", "link": "https://stackoverflow.com/users/1245622/linqu"}, "is_accepted": false, "score": 5, "last_activity_date": 1462971357, "last_edit_date": 1462971357, "creation_date": 1462892187, "answer_id": 37142160, "question_id": 37142028, "link": "https://stackoverflow.com/questions/37142028/assertion-with-error-message-in-kotin/37142160#37142160", "title": "Assertion with Error Message in Kotin", "body": "<p>I got it by myself, I need to declare a lambda function without parameters, which looks like this in Kotlin:</p>\n\n<pre><code>assert(count &gt; 5, {\"value too small\"})\nassert(count &gt; 5, { -&gt; \"value too small\"})\n</code></pre>\n\n<p>Sorry for bothering you! I leave the question, maybe some other beginner will find it useful.</p>\n"}, {"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 12, "last_activity_date": 1462894364, "creation_date": 1462894364, "answer_id": 37143015, "question_id": 37142028, "link": "https://stackoverflow.com/questions/37142028/assertion-with-error-message-in-kotin/37143015#37143015", "title": "Assertion with Error Message in Kotin", "body": "<p><code>assert</code>'s message parameter is not a String, but a function returning a String. This is so because otherwise, since <code>assert</code> is a normal Kotlin function, its arguments would be evaluated every time which would lead to unnecessary overhead (and sometimes change in semantics) of calculating the message string in case that string is a complex expression.</p>\n\n<p>To pass a function argument, use the <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions\" rel=\"noreferrer\">lambda syntax</a>. The last argument which is a lambda may be left out of the parentheses:</p>\n\n<pre><code>assert(count &gt; 5) { \"value too small\" }\n</code></pre>\n"}], "owner": {"reputation": 8470, "user_id": 1245622, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/V7rHB.jpg?s=128&g=1", "display_name": "linqu", "link": "https://stackoverflow.com/users/1245622/linqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 0, "accepted_answer_id": 37143015, "answer_count": 2, "score": 9, "last_activity_date": 1462971357, "creation_date": 1462891868, "question_id": 37142028, "link": "https://stackoverflow.com/questions/37142028/assertion-with-error-message-in-kotin", "title": "Assertion with Error Message in Kotin", "body": "<p>I am getting comfortable in Kotlin after switching from Java and could not find out how to use Kotlin's <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/assert.html\" rel=\"noreferrer\">assert</a> function in conjunction with an error message.</p>\n\n<p>Sounds simple, I just need something similar to Java's</p>\n\n<pre><code>assert count &gt; 5 : \"value too small\"\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>assert(count &gt; 5, \"value too small\")\n</code></pre>\n\n<p>However, the second argument needs to be <code>() -&gt; Any</code>. How to achieve that?</p>\n"}, {"tags": ["parent-child", "subclass", "extension-methods", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1462867848, "last_edit_date": 1592644375, "creation_date": 1462867848, "answer_id": 37132723, "question_id": 37131406, "link": "https://stackoverflow.com/questions/37131406/kotlin-how-can-a-child-class-use-a-parents-extension-function-in-the-super-con/37132723#37132723", "title": "Kotlin: How can a child class use a parent&#39;s extension function in the super constructor call?", "body": "<p>In your example the lambda in question is not a field of <code>Parent</code> (strictly speaking), but a parameter to a function (class constructor).</p>\n<p>The lambda is constructed (resolved) before any object, <code>Child</code> or <code>Parent</code>, is created. That's why methods can be resolved and the lambda is not in the scope of <code>Child</code>.</p>\n<h3>PS</h3>\n<p>The name of the topic suggests the following situation, but it compiles all right:</p>\n<pre><code>class Child : Parent({}) {\n    val lambdaField: Int.() -&gt; Any =  {\n        print()\n        this.print()\n        5.print()\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1462882166, "last_edit_date": 1462882166, "creation_date": 1462868047, "answer_id": 37132784, "question_id": 37131406, "link": "https://stackoverflow.com/questions/37131406/kotlin-how-can-a-child-class-use-a-parents-extension-function-in-the-super-con/37132784#37132784", "title": "Kotlin: How can a child class use a parent&#39;s extension function in the super constructor call?", "body": "<p>The reason why you cannot use <code>Parent</code>'s extension inside <code>Child</code> <strong>super constructor call</strong> argument is that its <code>Parent</code> part is not initialized yet at that point and thus cannot be used as <em>dispatch receiver</em> of the extension.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow\">Member extension functions</a> can use the eclosing class' members and this means that they need an instance of the class to be called with, and you cannot use the instance in its own constructor arguments.</p>\n\n<p>Otherwise, you can use <code>Parent</code>'s extensions anywhere inside the <code>Child</code> members and in constructors (or <code>init</code> blocks), because super constructor is called before own constructors:</p>\n\n<pre><code>class Child : Parent {\n    constructor(): super({}) {\n        5.print()\n    }\n\n    fun f() {\n        5.print()\n    }\n\n    val g: (Int) -&gt; Unit = { it.print() }\n}\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 0, "accepted_answer_id": 37132784, "answer_count": 2, "score": 1, "last_activity_date": 1462883364, "creation_date": 1462863613, "last_edit_date": 1462883364, "question_id": 37131406, "link": "https://stackoverflow.com/questions/37131406/kotlin-how-can-a-child-class-use-a-parents-extension-function-in-the-super-con", "title": "Kotlin: How can a child class use a parent&#39;s extension function in the super constructor call?", "body": "<p>How can a child class use its parent's extension function in a lambda field?</p>\n\n<p>Consider this parent class:</p>\n\n<pre><code>abstract class Parent(val field: Int.() -&gt; Any) { \n    fun Int.print() = println(this) \n}\n</code></pre>\n\n<p>And this child:</p>\n\n<pre><code>class Child : Parent({\n    print() // DOESN'T COMPILE\n    this.print() // DOESN'T COMPILE\n\n    5.print() // DOESN'T COMPILE\n\n    val value = 5\n    value.print() // DOESN'T COMPILE\n})\n</code></pre>\n"}, {"tags": ["split", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 1, "creation_date": 1462867733, "post_id": 37131816, "comment_id": 61804800, "body": "Any chance you can come up with a function that would do that but for regular-expressions delimiters?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "edited": false, "score": 0, "creation_date": 1462867973, "post_id": 37131816, "comment_id": 61804942, "body": "@user3601872 This is a piece of code from one of my past projects. If you can improve it, feel free to post it here, so I could benefit from it too."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1462864996, "creation_date": 1462864996, "answer_id": 37131816, "question_id": 37131283, "link": "https://stackoverflow.com/questions/37131283/how-to-split-a-string-and-plant-the-delimiters-between-the-splitted-parts-in-kot/37131816#37131816", "title": "How to split a string and plant the delimiters between the splitted parts in Kotlin?", "body": "<p>This is my version of such a function:</p>\n\n<pre><code>fun String.splitKeeping(str: String): List&lt;String&gt; {\n    return this.split(str).flatMap {listOf(it, str)}.dropLast(1).filterNot {it.isEmpty()}\n}\n\nfun String.splitKeeping(vararg strs: String): List&lt;String&gt; {\n    var res = listOf(this)\n    strs.forEach {str -&gt; \n        res = res.flatMap {it.splitKeeping(str)}\n    }\n    return res\n}\n\n//USAGE:\n\"Hello! How do you do? Good day!\".splitKeeping(\"!\", \"?\")\n</code></pre>\n\n<p>It is not very fast (square complexity), but works well for relatively short strings.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 3496176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TrPop.jpg?s=128&g=1", "display_name": "zhumengzhu", "link": "https://stackoverflow.com/users/3496176/zhumengzhu"}, "is_accepted": false, "score": 10, "last_activity_date": 1525517611, "last_edit_date": 1525517611, "creation_date": 1462865423, "answer_id": 37131956, "question_id": 37131283, "link": "https://stackoverflow.com/questions/37131283/how-to-split-a-string-and-plant-the-delimiters-between-the-splitted-parts-in-kot/37131956#37131956", "title": "How to split a string and plant the delimiters between the splitted parts in Kotlin?", "body": "<p>Here is a similar question in Java: <a href=\"https://stackoverflow.com/questions/2206378/how-to-split-a-string-but-also-keep-the-delimiters\">How to split a string, but also keep the delimiters?</a></p>\n\n<p>Use lookahead. In Kotlin, the code maybe like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val str = \"Hello! How do you do? Good day!\"\n\n    val reg = Regex(\"(?&lt;=[!?])|(?=[!?])\")\n\n    var list = str.split(reg)\n\n    println(list)\n}\n</code></pre>\n\n<p>The output of this is:</p>\n\n<pre><code>[Hello, !, How do you do, ?, Good day, !]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 0, "last_activity_date": 1534844395, "creation_date": 1534844395, "answer_id": 51945816, "question_id": 37131283, "link": "https://stackoverflow.com/questions/37131283/how-to-split-a-string-and-plant-the-delimiters-between-the-splitted-parts-in-kot/51945816#51945816", "title": "How to split a string and plant the delimiters between the splitted parts in Kotlin?", "body": "<p>Here's an extension function wrapping the code discussed <a href=\"https://stackoverflow.com/a/2206432/8073652\">here</a>:</p>\n\n<pre><code>private const val withDelimiter = \"((?&lt;=%1\\$s)|(?=%1\\$s))\"\n\nfun Regex.splitWithDelimiter(input: CharSequence) = \n    Regex(withDelimiter.format(this.pattern)).split(input)\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9246, "favorite_count": 5, "answer_count": 3, "score": 7, "last_activity_date": 1534844395, "creation_date": 1462863312, "last_edit_date": 1500935944, "question_id": 37131283, "link": "https://stackoverflow.com/questions/37131283/how-to-split-a-string-and-plant-the-delimiters-between-the-splitted-parts-in-kot", "title": "How to split a string and plant the delimiters between the splitted parts in Kotlin?", "body": "<p>Say I have a string</p>\n\n<p><code>\"Hello! How do you do? Good day!\"</code></p>\n\n<p>and I want to split it, with my delimiters being: <code>?</code> and <code>!</code>\nusing the \"split\" function the result would be:</p>\n\n<pre><code>`[Hello, How do you do, Good day]`\n</code></pre>\n\n<p>However, I want it to be:</p>\n\n<pre><code>`[Hello, !, How do you do, ?, Good day, !]`\n</code></pre>\n"}, {"tags": ["generics", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1462862486, "post_id": 37130979, "comment_id": 61801669, "body": "Please add specific code that you&#39;re having problem compiling/running in the question itself."}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1462862710, "post_id": 37130979, "comment_id": 61801791, "body": "@miensol Usage added."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1462864398, "post_id": 37130979, "comment_id": 61802734, "body": "Please try to create a minimal, self-contained example. How is <code>Packet</code> and <code>Packeteer</code> defined?"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1462869123, "post_id": 37130979, "comment_id": 61805627, "body": "@KirillRakhman what you would expect the second argument to <code>receive</code> be?"}], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1462882846, "post_id": 37133198, "comment_id": 61815446, "body": "Is there any unsafe way to bypass this restriction?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 1, "creation_date": 1462884345, "post_id": 37133198, "comment_id": 61816660, "body": "@Jire, you can perform unsafe cast: <code>(packet as Packet&lt;in SomeType&gt;).receive(packeteer, someTypeInstance)</code>, though it might imply <code>ClassCastException</code> thrown somewhere."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1463570193, "last_edit_date": 1463570193, "creation_date": 1462869306, "answer_id": 37133198, "question_id": 37130979, "link": "https://stackoverflow.com/questions/37130979/kotlin-how-can-i-invoke-a-lambda-field-which-has-a-generic-type-of-its-class/37133198#37133198", "title": "Kotlin: How can I invoke a lambda field which has a generic type of its class?", "body": "<p>This behavior is just how <a href=\"https://kotlinlang.org/docs/reference/generics.html#star-projections\" rel=\"nofollow\">star projections</a> (<code>Foo&lt;*&gt;</code>) work in Kotlin.</p>\n\n<p>As said in the docs</p>\n\n<blockquote>\n  <p>For <code>Foo&lt;T&gt;</code>, where <code>T</code> is an invariant type parameter with the upper\n  bound <code>TUpper</code>, <code>Foo&lt;*&gt;</code> is equivalent to <code>Foo&lt;out TUpper&gt;</code> for reading\n  values and to <code>Foo&lt;in Nothing&gt;</code> for writing values.</p>\n</blockquote>\n\n<p>If you use star projection <code>Packet&lt;*&gt;</code>, you know nothing about its generic type, thus you cannot safely pass any value to its method where a generic parameter is expected (that's why <code>Nothing</code> type is there).</p>\n\n<p>You can use <a href=\"https://kotlinlang.org/docs/reference/generics.html#use-site-variance-type-projections\" rel=\"nofollow\">in-projection</a> to specify a <em>lower bound</em> for the generic type, and for <code>Packet&lt;in SomeType&gt;</code> you will be able to pass instances of <code>SomeType</code> into the methods. This will require actual type parameter of <code>Packet</code> to be <code>SomeType</code> or some of its ancestors, similar to <code>? super T</code> wildcard in Java:</p>\n\n<pre><code>private val incoming = arrayOfNulls&lt;Packet&lt;in SomeType&gt;&gt;(256)\n\nfun incoming(id: Int, packeteer: Packeteer) {\n    val packet = incoming[id] ?: return\n    packet.receive(packeteer, someTypeInstance)\n}\n</code></pre>\n\n<p>Otherwise, you can use unchecked cast to call the method, though it can result in <code>ClassCastException</code> thrown somewhere inside:</p>\n\n<pre><code>(packet as Packet&lt;in SomeType&gt;).receive(packeteer, someTypeInstance)\n</code></pre>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 37133198, "answer_count": 1, "score": 1, "last_activity_date": 1463570193, "creation_date": 1462862401, "last_edit_date": 1462862999, "question_id": 37130979, "link": "https://stackoverflow.com/questions/37130979/kotlin-how-can-i-invoke-a-lambda-field-which-has-a-generic-type-of-its-class", "title": "Kotlin: How can I invoke a lambda field which has a generic type of its class?", "body": "<p>How can I invoke a lambda field which has a generic type of its class? For some reason, a reference to such a generic class like <code>Example&lt;*&gt;</code> yields an accept that replaces the original type (like <code>Example&lt;Something&gt;</code>) with <code>Nothing</code>. How can I invoke such a lambda by only having reference to <code>Example&lt;*&gt;</code>?</p>\n\n<p>Codebase I am having this problem with: <a href=\"https://github.com/Jire/Acelta/tree/master/src/main/kotlin/com/acelta/packet/incoming/packets\" rel=\"nofollow\">https://github.com/Jire/Acelta/tree/master/src/main/kotlin/com/acelta/packet/incoming/packets</a></p>\n\n<p>I am trying to this code, but as you can see on the 5th line I cannot invoke the lambda because the accept type is <code>Nothing</code>.</p>\n\n<pre><code>private val incoming = arrayOfNulls&lt;Packet&lt;*&gt;&gt;(256)\n\nfun incoming(id: Int, packeteer: Packeteer) {\n    val packet = incoming[id] ?: return\n    packet.receive(packeteer, /* this is type Nothing! */)\n}\n</code></pre>\n"}, {"tags": ["json", "gson", "retrofit", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1462816223, "post_id": 37119306, "comment_id": 61785356, "body": "Why you don&#39;t want to use <code>data class Countries(val countries:List&lt;Country&gt; = listOf&lt;Country&gt;())</code> ?"}, {"owner": {"reputation": 299, "user_id": 1290107, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/831bfd75bdad9f812cde3a456c0eb9aa?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1290107/dmitry"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1462872270, "post_id": 37119306, "comment_id": 61807665, "body": "I think it is unnecessary entity"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1462872605, "post_id": 37119306, "comment_id": 61807883, "body": "Then why not hide it instead of fighting with deserialization? i.e. <code>interface  DictService {      @GET(&quot;&#47;json&#47;countries&quot;)     public fun _countries(): Observable&lt;Countries&gt; } data class Countries(val countries:List&lt;Country&gt; = listOf&lt;Country&gt;()) fun DictService.countries() = _countries().map { it.countries } </code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 299, "user_id": 1290107, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/831bfd75bdad9f812cde3a456c0eb9aa?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1290107/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1462808460, "last_edit_date": 1462808460, "creation_date": 1462807364, "answer_id": 37119545, "question_id": 37119306, "link": "https://stackoverflow.com/questions/37119306/retrofit-gson-deserializer-return-inside-array/37119545#37119545", "title": "retrofit + gson deserializer: return inside array", "body": "<p>I found the way:</p>\n\n<pre><code>object CountriesTypeFactory : TypeAdapterFactory {\n    override fun &lt;T : Any?&gt; create(gson: Gson?, type: TypeToken&lt;T&gt;?): TypeAdapter&lt;T&gt;? {\n        val delegate = gson?.getDelegateAdapter(this, type)\n        val elementAdapter = gson?.getAdapter(JsonElement::class.java)\n\n        return object : TypeAdapter&lt;T&gt;() {\n            @Throws(IOException::class)\n            override fun write(outjs: JsonWriter, value: T) {\n                delegate?.write(outjs, value)\n            }\n\n            @Throws(IOException::class)\n            override fun read(injs: JsonReader): T {\n                var jsonElement = elementAdapter!!.read(injs)\n                if (jsonElement.isJsonObject) {\n                    val jsonObject = jsonElement.asJsonObject\n                    if (jsonObject.has(\"countries\") &amp;&amp; jsonObject.get(\"countries\").isJsonArray) {\n                        jsonElement = jsonObject.get(\"countries\")\n                    }\n                }\n                return delegate!!.fromJsonTree(jsonElement)\n            }\n        }.nullSafe()\n    }\n}\n</code></pre>\n\n<p>But it is very complex decision, I think, for such problem.\nAre there another one simpler way?</p>\n\n<p><strong>Another one:</strong>\nI found bug in my initial code from start meassage!!!\nIt works fine if replace List by ArrayList!</p>\n"}, {"comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 1, "creation_date": 1462820509, "post_id": 37123390, "comment_id": 61787731, "body": "This will not unwrap <code>countries</code> items which seems to be the authors intention"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462820184, "creation_date": 1462820184, "answer_id": 37123390, "question_id": 37119306, "link": "https://stackoverflow.com/questions/37119306/retrofit-gson-deserializer-return-inside-array/37123390#37123390", "title": "retrofit + gson deserializer: return inside array", "body": "<p>I would use Jackson for this task. \nTry this <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">https://github.com/FasterXML/jackson-module-kotlin</a></p>\n\n<pre><code>val mapper = jacksonObjectMapper()\ndata class Country(val id: Int, val name: String)\n\n// USAGE:\nval country = mapper.readValue&lt;Country&gt;(jsonString)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 2, "last_activity_date": 1462873277, "creation_date": 1462873277, "answer_id": 37134706, "question_id": 37119306, "link": "https://stackoverflow.com/questions/37119306/retrofit-gson-deserializer-return-inside-array/37134706#37134706", "title": "retrofit + gson deserializer: return inside array", "body": "<p>If your intention is to simplify the interface and hide the intermediate wrapper object I guess the simplest thing to do is to add an extension method to the <code>DictService</code> like so:</p>\n\n<pre><code>interface DictService {\n\n    @GET(\"/json/countries\")\n    fun _countries(): Observable&lt;Countries&gt;\n}\n\nfun DictService.countries() = _countries().map { it.countries }\ndata class Countries(val countries: List&lt;Country&gt; = listOf())\n</code></pre>\n\n<p>Which can then be used as follows:</p>\n\n<pre><code>val countries:Observable&lt;List&lt;Country&gt;&gt; = dictService.countries()\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 1290107, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/831bfd75bdad9f812cde3a456c0eb9aa?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/1290107/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462873277, "creation_date": 1462806681, "question_id": 37119306, "link": "https://stackoverflow.com/questions/37119306/retrofit-gson-deserializer-return-inside-array", "title": "retrofit + gson deserializer: return inside array", "body": "<p>I have api that return json:</p>\n\n<pre><code>{\"countries\":[{\"id\":1,\"name\":\"Australia\"},{\"id\":2,\"name\":\"Austria\"}, ... ]}\n</code></pre>\n\n<p>I write model class (Kotlin lang)</p>\n\n<pre><code>data class Country(val id: Int, val name: String)\n</code></pre>\n\n<p>And I want do request using retorift that returning List &lt; Models.Country >, from \"countries\" field in json</p>\n\n<p>I write next:</p>\n\n<pre><code>interface DictService {\n\n    @GET(\"/json/countries\")\n    public fun countries(): Observable&lt;List&lt;Models.Country&gt;&gt;\n\n    companion object {\n        fun create() : DictService {\n            val gsonBuilder = GsonBuilder()\n            val listType = object : TypeToken&lt;List&lt;Models.Country&gt;&gt;(){}.type\n            gsonBuilder.registerTypeAdapter(listType, CountriesDeserializer)\n            gsonBuilder.setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)\n\n            val service = Retrofit.Builder()\n                    .baseUrl(\"...\")\n                    .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n                    .addConverterFactory(GsonConverterFactory.create(gsonBuilder.create()))\n                    .build()\n            return service.create(DictService::class.java)\n        }\n    }\n\n    object CountriesDeserializer : JsonDeserializer&lt;List&lt;Models.Country&gt;&gt; {\n        override fun deserialize(json: JsonElement?, typeOfT: Type?, context: JsonDeserializationContext?): List&lt;Models.Country&gt;? {\n            val res = ArrayList&lt;Models.Country&gt;()\n            if(json!=null) {\n                val countries = json.asJsonObject.get(\"countries\")\n                if (countries.isJsonArray()) {\n                    for (elem: JsonElement in countries.asJsonArray) {\n                        res.add(Gson().fromJson(elem, Models.Country::class.java))\n                    }\n                }\n            }\n            return null;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>But I get error: \njava.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 1 column 2 path $\nCountriesDeserializer code dont execute even!\nWhat they want from me?</p>\n\n<p>Maybe I need write my own TypeAdapterFactory?</p>\n\n<p>I dont want use model class like</p>\n\n<pre><code>class Countries {\n   public List&lt;Country&gt; countries;\n}\n</code></pre>\n"}, {"tags": ["transactions", "kotlin", "jooq"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 9, "last_activity_date": 1462806846, "last_edit_date": 1462806846, "creation_date": 1462805658, "answer_id": 37118925, "question_id": 37118924, "link": "https://stackoverflow.com/questions/37118924/how-can-i-more-easily-use-jooq-transactions-in-kotlin/37118925#37118925", "title": "How can I more easily use Jooq transactions in Kotlin", "body": "<p>To solve this, you can use extension functions to make some methods only available within a transaction.  First, we fix the transaction function so that there are two flavours, one that is top level, and one that is a nested transaction.</p>\n\n\n\n<pre><code>fun &lt;T : Any?&gt; tx(codeBlock: DSLContext.() -&gt; T): T {\n    return rootContext.txWithReturn(codeBlock)\n}\n\nfun &lt;T : Any?&gt; DSLContext.tx(codeBlock: DSLContext.() -&gt; T): T {\n    var returnVal: T? = null\n    this.transaction { cfg -&gt;\n        returnVal = DSL.using(cfg).codeBlock()\n    }\n    return returnVal as T\n}\n</code></pre>\n\n<p>Now your transactions will nest seamlessly and never have the chance of error.  Because Kotlin will pick the more specific extension function first when used as a nested transaction.  </p>\n\n<pre><code>fun foo() {\n   tx { // calls the outer function that creates a transaction\n     ...\n     tx { // calls the extension on DSLContext because our code block has receiver of DSLContext\n       ...\n       tx { // calls the extension function, further nesting correctly\n         ...\n       }\n     }\n   }\n}\n</code></pre>\n\n<p>Now the same principle can be applied to the methods <code>actionAbc</code> and <code>actionXyz</code> so that they are only able to be called from within a transaction.</p>\n\n<pre><code>fun DSLContext.actionAbc(parm1: String, parm2: Int) {\n   ...\n}\n\nfun DSLContext.actionXyz(parm: Date) {\n   ...\n}\n</code></pre>\n\n<p>They no longer create transactions because they are guaranteed to only be called from within one.  Their use is now naturally:</p>\n\n<pre><code>fun higherLevelAction(parm1: String, parm2: Date) {\n  tx {\n    actionAbc(parm1, 45)\n    actionXyz(parm2)\n\n    tx {\n       // nesting naturally\n       ...\n    }\n  }\n}\n</code></pre>\n\n<p>It is impossible to call <code>actionAbc</code> or <code>actionXyz</code> without a transaction.  So if you want to make them dual use, we can create a second flavour of the action that creates its own transaction and delegates to the other.  For example for <code>actionAbc</code>:</p>\n\n<pre><code>fun DSLContext.actionAbc(parm1: String, parm2: Int) {\n   ...\n}\n\nfun actionAbc(parm1: String, parm2: Int) {\n   tx { actionAbc(parm1, parm2) } // delegates to one above but with a new transaction\n}\n</code></pre>\n\n<p>Now <code>actionAbc</code> is callable independently and also within another transaction and the compiler will decide based on the receiver which version to call. </p>\n\n<p>The only caveat is that if these are class methods then they can only be called from within the same class since you cannot specify both an instance and a receiver at the same time for calling a method.</p>\n\n<p>The examples above covers these cases:</p>\n\n<ul>\n<li>create new transaction on call (although caller may not be aware this is happening)</li>\n<li>only inherit existing transaction on call (enforced at compile time if only this version of the method is present)</li>\n<li>inherit existing, if not create new transaction on call (enforced at compile time, correct version called when two are present)</li>\n</ul>\n\n<p>If you want to reject the case where a method is called when there is already an existing transaction, just implement the extension version and throw an exception:</p>\n\n<pre><code>@Deprecated(\"Only call these without an existing transaction!\", \n            level = DeprecationLevel.ERROR)\nfun DSLContext.actionAbc(parm1: String, parm2: Int) {\n   throw IllegalStateException(\"Only call these without an existing transaction!\")\n}\n\nfun actionAbc(parm1: String, parm2: Int) {\n   tx { \n      ...\n   } \n}\n</code></pre>\n\n<p>This last case will be checked by the compiler because of the use of <code>@Deprecation</code> annotation with level set to <code>ERROR</code>.  You could also allow the call, and delegate to the other method and set the deprecation to <code>WARNING</code> level so that the user is aware of the potential for a problem but can also suppress the warning using <code>@Suppress(\"DEPRECATION\")</code> on the calling statement.</p>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 37118925, "answer_count": 1, "score": 6, "last_activity_date": 1462806846, "creation_date": 1462805658, "last_edit_date": 1610973576, "question_id": 37118924, "link": "https://stackoverflow.com/questions/37118924/how-can-i-more-easily-use-jooq-transactions-in-kotlin", "title": "How can I more easily use Jooq transactions in Kotlin", "body": "<p>I have Jooq code written in Kotlin using transactions, and sometimes I want a method to work stand-alone as a top-level action that will have its own transactions, and other times want it to work composited with other methods within the same transaction.  For example, I have two lower level functions <code>actionAbc</code> and <code>actionXyz</code> that I want to compose into different higher level data methods and inherit their transaction if present, otherwise have their own.</p>\n<p>I know in Spring or other frameworks there are annotations that can be added that validate &quot;transaction required&quot; or &quot;create transaction if none&quot; type functionality.  But how do I do the same with Jooq + Kotlin without using those libraries?</p>\n<p>The closest I came up with is to pass the transaction in as an optional parameter and default it to a new transaction if missing.  But if someone forgets to pass in the transaction, then has the subtle failure of using a new top-level and unrelated transaction, I don't want that.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun tx(ctx: DSLContext = rootContext, codeBlock: DSLContext.() -&gt; Unit): Unit {\n        ctx.transaction { cfg -&gt;\n            DSL.using(cfg).codeBlock()\n        }\n    }\n}\n\n// and used as:\n\nfun actionAbc(parm1: String, parm2: Int, ctx: DSLContext = rootContext) {\n   tx(ctx) { ... }\n}\n\nfun actionXyz(parm: Date, ctx: DSLContext = rootContext) {\n   tx(ctx) { ... }\n}\n\n// composed:\n\nfun higherLevelAction(parm1: String, parm2: Date) {\n  tx {\n    actionAbc(parm1, 45, this) // if you forget `this` you are doing the wrong thing\n    actionXyz(parm2, this)\n\n    tx(this) {\n       // nested transaction, also dangerous if forgetting `this` parameter\n    }\n  }\n}\n</code></pre>\n<p>How do I do this more naturally, and less dangerously?</p>\n<p><strong>Note:</strong> <em>this question is intentionally written and answered by the author (<a href=\"https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/\">Self-Answered Questions</a>), so that the answers to commonly asked Kotlin topics are present in SO.</em></p>\n"}, {"tags": ["spring-boot", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3327, "user_id": 68035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/85570b6623e44f128c08668bf6687f85?s=128&d=identicon&r=PG", "display_name": "gaqzi", "link": "https://stackoverflow.com/users/68035/gaqzi"}, "edited": false, "score": 1, "creation_date": 1462841515, "post_id": 37120448, "comment_id": 61795725, "body": "The GitHub issue where this is tracked: <a href=\"https://github.com/spring-projects/spring-boot/issues/5902\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/5902</a>"}], "tags": [], "owner": {"reputation": 84621, "user_id": 1384297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQ01b.jpg?s=128&g=1", "display_name": "Andy Wilkinson", "link": "https://stackoverflow.com/users/1384297/andy-wilkinson"}, "is_accepted": true, "score": 1, "last_activity_date": 1462810311, "last_edit_date": 1462810311, "creation_date": 1462809944, "answer_id": 37120448, "question_id": 37118917, "link": "https://stackoverflow.com/questions/37118917/could-not-detect-default-configuration-classes-for-test-class-with-kotlin-and-a/37120448#37120448", "title": "Could not detect default configuration classes for test class with Kotlin and @AutoConfigureMockMvc", "body": "<p>The stack overflow is occurring when Spring Boot attempts to introspect the annotations on <code>DeveloperControllerTest</code>.</p>\n\n<p><code>DeveloperControllerTest</code> is annotated with <code>kotlin.Metadata</code>. <code>Metadata</code> is annotated with <code>kotlin.annotation.Retention</code>. <code>Retention</code> is annotated with <code>kotlin.annotation.Target</code> and <code>Target</code> is annotated with itself. <code>Target</code> being annotated with itself is the cause of the stack overflowing.</p>\n\n<p>It is legal, although probably quite unusual, for an annotation to be used to annotate itself. Spring Boot should probably be more defensive.</p>\n"}, {"tags": [], "owner": {"reputation": 544, "user_id": 7898657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75916f8a78e4b6080d3e56dfb59bbe8?s=128&d=identicon&r=PG&f=1", "display_name": "Codetector", "link": "https://stackoverflow.com/users/7898657/codetector"}, "is_accepted": false, "score": 2, "last_activity_date": 1496260065, "creation_date": 1496260065, "answer_id": 44293517, "question_id": 37118917, "link": "https://stackoverflow.com/questions/37118917/could-not-detect-default-configuration-classes-for-test-class-with-kotlin-and-a/44293517#44293517", "title": "Could not detect default configuration classes for test class with Kotlin and @AutoConfigureMockMvc", "body": "<p>try adding </p>\n\n<pre><code>@ComponentScan(basePackages = arrayOf(\"YourAppBasePackage\"))\n@SpringBootTest(classes = arrayOf(MyExampleApplication::class))\n</code></pre>\n\n<p>This solved the issue for me</p>\n"}], "owner": {"reputation": 3327, "user_id": 68035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/85570b6623e44f128c08668bf6687f85?s=128&d=identicon&r=PG", "display_name": "gaqzi", "link": "https://stackoverflow.com/users/68035/gaqzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9641, "favorite_count": 0, "accepted_answer_id": 37120448, "answer_count": 2, "score": 2, "last_activity_date": 1496260065, "creation_date": 1462805639, "question_id": 37118917, "link": "https://stackoverflow.com/questions/37118917/could-not-detect-default-configuration-classes-for-test-class-with-kotlin-and-a", "title": "Could not detect default configuration classes for test class with Kotlin and @AutoConfigureMockMvc", "body": "<p>I'm giving Kotlin a whirl and was converting the test below that was running fine in Java to Kotlin. After converting the test using the IntelliJ conversion tool I tried to run it but I got this error:</p>\n\n<pre><code>22:32:19.476 [main] DEBUG org.springframework.test.context.junit4.SpringJUnit4ClassRunner - SpringJUnit4ClassRunner constructor called with [class com.test.app.web.DeveloperControllerTest]\n22:32:19.486 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class [org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]\n22:32:19.494 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor [public org.springframework.test.context.support.DefaultBootstrapContext(java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate)]\n22:32:19.517 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [com.test.app.web.DeveloperControllerTest] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]\n22:32:19.539 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.test.app.web.DeveloperControllerTest], using SpringBootContextLoader\n22:32:19.543 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.test.app.web.DeveloperControllerTest]: class path resource [com/test/app/web/DeveloperControllerTest-context.xml] does not exist\n22:32:19.544 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.test.app.web.DeveloperControllerTest]: class path resource [com/test/app/web/DeveloperControllerTestContext.groovy] does not exist\n22:32:19.544 [main] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.test.app.web.DeveloperControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.\n22:32:19.545 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.test.app.web.DeveloperControllerTest]: DeveloperControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\njava.lang.StackOverflowError\nat java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936)\nat java.util.concurrent.ConcurrentHashMap.containsKey(ConcurrentHashMap.java:964)\nat java.lang.reflect.WeakCache.containsValue(WeakCache.java:175)\nat java.lang.reflect.Proxy.isProxyClass(Proxy.java:791)\nat java.lang.reflect.Proxy.getInvocationHandler(Proxy.java:815)\nat sun.reflect.annotation.AnnotationInvocationHandler.asOneOfUs(AnnotationInvocationHandler.java:226)\nat sun.reflect.annotation.AnnotationInvocationHandler.equalsImpl(AnnotationInvocationHandler.java:201)\nat sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:64)\nat com.sun.proxy.$Proxy13.equals(Unknown Source)\nat java.util.HashMap.putVal(HashMap.java:634)\nat java.util.HashMap.put(HashMap.java:611)\nat java.util.HashSet.add(HashSet.java:219)\nat org.springframework.boot.test.context.ImportsContextCustomizer$ContextCustomizerKey.collectElementAnnotations(ImportsContextCustomizer.java:239)\nat org.springframework.boot.test.context.ImportsContextCustomizer$ContextCustomizerKey.collectClassAnnotations(ImportsContextCustomizer.java:226)\n</code></pre>\n\n<p>Java test:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class DeveloperControllerTest {\n    @Autowired\n    private MockMvc mvc;\n\n    @Test\n    public void createNewDeveloper() throws Exception {\n        mvc.perform(\n                post(\"/api/v1/developers\")\n                        .param(\"username\", \"boaty\")\n                        .param(\"email\", \"boaty@mcboatface.org\")\n                        .param(\"password\", \"123loveboats\")\n                        .param(\"passwordConfirmation\", \"123loveboats\")\n        ).andExpect(status().isCreated());\n    }\n}\n</code></pre>\n\n<p>Converted to Kotlin:</p>\n\n<pre><code>@RunWith(SpringRunner::class)\n@SpringBootTest\n@AutoConfigureMockMvc\nclass DeveloperControllerTest {\n    @Autowired\n    lateinit var mvc: MockMvc\n\n    @Test\n    @Throws(Exception::class)\n    fun createNewDeveloper() {\n        mvc.perform(\n                post(\"/api/v1/developers\")\n                        .param(\"username\", \"boaty\")\n                        .param(\"email\", \"boaty@mcboatface.org\")\n                        .param(\"password\", \"123loveboats\")\n                        .param(\"passwordConfirmation\", \"123loveboats\"))\n                .andExpect(status().isCreated)\n    }\n}\n</code></pre>\n\n<p>What I've noticed with this is that if I remove the annotation <code>AutoConfigureMockMvc</code> Spring will boot and try to run, but it'll fail because it can't autowire <code>MockMvc</code>.</p>\n\n<p>I'm using Kotlin 1.0.1-2 together with Spring Boot 1.4.0-M2.</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 3264806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb562f05681009d5859fd8087c0a6659?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3264806/reza"}, "edited": false, "score": 0, "creation_date": 1462836085, "post_id": 37116533, "comment_id": 61794471, "body": "Yes , it works. thank you. I wonder in what condition retrofit will return non null Unit."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 353, "user_id": 3264806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb562f05681009d5859fd8087c0a6659?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3264806/reza"}, "edited": false, "score": 0, "creation_date": 1462863261, "post_id": 37116533, "comment_id": 61802100, "body": "Probably never, <code>Unit</code> is just an object class. Also, since Retrofit does not know about <code>Unit</code> but uses <code>Void</code>, it will always return <code>null</code>."}, {"owner": {"reputation": 3317, "user_id": 2557258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBgdF.jpg?s=128&g=1", "display_name": "Yazon2006", "link": "https://stackoverflow.com/users/2557258/yazon2006"}, "edited": false, "score": 1, "creation_date": 1499275477, "post_id": 37116533, "comment_id": 76840790, "body": "Unfortunatelly this does not work for me, because I got EOFexception from Gson when it tried to parse response."}, {"owner": {"reputation": 3317, "user_id": 2557258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBgdF.jpg?s=128&g=1", "display_name": "Yazon2006", "link": "https://stackoverflow.com/users/2557258/yazon2006"}, "edited": false, "score": 1, "creation_date": 1534492836, "post_id": 37116533, "comment_id": 90732649, "body": "Also RxJava 2.0+ had restriction about passing null arguments. I don&#39;t think that optional type is suitable at all."}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 5, "last_activity_date": 1462798929, "creation_date": 1462798929, "answer_id": 37116533, "question_id": 37116364, "link": "https://stackoverflow.com/questions/37116364/retrofit2-return-null-unit-in-kotlin-for-204-no-content-response/37116533#37116533", "title": "Retrofit2 return null Unit in kotlin for 204 No Content response", "body": "<p>The instance passed into <code>onNext</code> is the (parsed) body of the response. Since the response has no body, it is <code>null</code>. Therefore, <code>null</code> is being passed.</p>\n\n<p>You should be able to use </p>\n\n<pre><code>fun postData(/*args*/): Observable&lt;Unit?&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3317, "user_id": 2557258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBgdF.jpg?s=128&g=1", "display_name": "Yazon2006", "link": "https://stackoverflow.com/users/2557258/yazon2006"}, "is_accepted": false, "score": 6, "last_activity_date": 1499275956, "creation_date": 1499275956, "answer_id": 44932628, "question_id": 37116364, "link": "https://stackoverflow.com/questions/37116364/retrofit2-return-null-unit-in-kotlin-for-204-no-content-response/44932628#44932628", "title": "Retrofit2 return null Unit in kotlin for 204 No Content response", "body": "<p>The right way of solving this problem is to use Completable like this:</p>\n\n<pre><code>@POST(\"/path/to/post\")\nfun postData(/*args*/): Completable \n</code></pre>\n\n<p>Then you can subscribe like this:</p>\n\n<pre><code>service.postData(/*args*/)\n    .subscribe({ view.dataPostedSuccesfully() }, { handleError(it) })\n</code></pre>\n\n<p>Work like a charm for me with Retrofit 2.2.0, RxJava 2.1.0.</p>\n"}], "owner": {"reputation": 353, "user_id": 3264806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb562f05681009d5859fd8087c0a6659?s=128&d=identicon&r=PG&f=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/3264806/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2649, "favorite_count": 1, "accepted_answer_id": 37116533, "answer_count": 2, "score": 4, "last_activity_date": 1499275956, "creation_date": 1462798425, "question_id": 37116364, "link": "https://stackoverflow.com/questions/37116364/retrofit2-return-null-unit-in-kotlin-for-204-no-content-response", "title": "Retrofit2 return null Unit in kotlin for 204 No Content response", "body": "<p>I'm using Retrofit 2.0.2 to post data to server using the interface below:</p>\n\n<pre><code>@POST(\"/path/to/post\")\nfun postData(/*args*/): Observable&lt;Unit&gt;\n</code></pre>\n\n<p>And received success response from server.</p>\n\n<pre><code>05-09 21:20:21.770 23117 23224 D OkHttp  : --&gt; POST https://myserver.com/api/notifications/123/markRead http/1.1\n05-09 21:20:21.770 23117 23224 D OkHttp  : Content-Length: 0\n05-09 21:20:21.770 23117 23224 D OkHttp  : User-Agent: MyUserAgent\n05-09 21:20:21.770 23117 23224 D OkHttp  : Authorization: Bearer xxxxx\n05-09 21:20:21.770 23117 23224 D OkHttp  : --&gt; END POST (0-byte body)\n05-09 21:20:22.473 23117 23224 D OkHttp  : &lt;-- 204 No Content https://myserver.com/api/notifications/123/markRead (701ms)\n</code></pre>\n\n<p>But i got exception below, seems retrofit pass null Unit to onNext.\nIs this expected behaviour?</p>\n\n<pre><code>05-09 21:20:22.496 23117 23117 W System.err: java.lang.IllegalArgumentException: Parameter specified as non-null is null: method b.d.b.k.b, parameter result\n05-09 21:20:22.496 23117 23117 W System.err:    at com.myandroid.notification.dialog.c$a.a(NotificationListPresenter.kt)\n05-09 21:20:22.496 23117 23117 W System.err:    at com.myandroid.notification.dialog.c$a.onNext(NotificationListPresenter.kt:57)\n05-09 21:20:22.496 23117 23117 W System.err:    at e.g.b.onNext(SafeSubscriber.java:139)\n05-09 21:20:22.496 23117 23117 W System.err:    at e.d.a.g$2$1.onNext(OnSubscribeRedo.java:249)\n05-09 21:20:22.496 23117 23117 W System.err:    at e.d.a.p$a.call(OperatorObserveOn.java:215)\n05-09 21:20:22.496 23117 23117 W System.err:    at e.a.b.b$b.run(LooperScheduler.java:107)\n05-09 21:20:22.496 23117 23117 W System.err:    at android.os.Handler.handleCallback(Handler.java:730)\n05-09 21:20:22.504 23117 23117 W System.err:    at android.os.Handler.dispatchMessage(Handler.java:92)\n05-09 21:20:22.504 23117 23117 W System.err:    at android.os.Looper.loop(Looper.java:137)\n05-09 21:20:22.504 23117 23117 W System.err:    at android.app.ActivityThread.main(ActivityThread.java:5103)\n05-09 21:20:22.504 23117 23117 W System.err:    at java.lang.reflect.Method.invokeNative(Native Method)\n05-09 21:20:22.504 23117 23117 W System.err:    at java.lang.reflect.Method.invoke(Method.java:525)\n05-09 21:20:22.504 23117 23117 W System.err:    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)\n05-09 21:20:22.504 23117 23117 W System.err:    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n05-09 21:20:22.504 23117 23117 W System.err:    at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 7, "last_activity_date": 1462776978, "creation_date": 1462776978, "answer_id": 37109488, "question_id": 37108275, "link": "https://stackoverflow.com/questions/37108275/filternotnull-on-kotlin-list-with-generic-type/37109488#37109488", "title": "filterNotNull on Kotlin List with generic type", "body": "<p>As per <a href=\"https://kotlinlang.org/docs/reference/generics.html#upper-bounds\">the Kotlin docs</a>:</p>\n\n<blockquote>\n  <p>The default upper bound (if none specified) is <code>Any?</code></p>\n</blockquote>\n\n<p>This means that the problematic declaration is equivalent to:</p>\n\n<pre><code>fun &lt;A:Any?&gt; nonNullValues(values: List&lt;A?&gt;): List&lt;A&gt; = values.filterNotNull()\n</code></pre>\n\n<p>The <code>nonNullValues</code> method declares to return a list of <strong>nullable items of type <code>A</code></strong> whereas <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-not-null.html\"><code>filterNotNull</code></a> returns a list of <strong>non nullable items of type <code>A</code></strong>. Hence a mismatch and a compiler error.</p>\n"}], "owner": {"reputation": 3069, "user_id": 591922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/qmZop.png?s=128&g=1", "display_name": "Loic", "link": "https://stackoverflow.com/users/591922/loic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 1, "accepted_answer_id": 37109488, "answer_count": 1, "score": 5, "last_activity_date": 1462777641, "creation_date": 1462771748, "question_id": 37108275, "link": "https://stackoverflow.com/questions/37108275/filternotnull-on-kotlin-list-with-generic-type", "title": "filterNotNull on Kotlin List with generic type", "body": "<p>This is working : </p>\n\n<pre><code>val values: List&lt;String&gt;  = listOf(\"a\", null, \"b\").filterNotNull()\n</code></pre>\n\n<p>This is not working :</p>\n\n<pre><code>fun &lt;A&gt; nonNullValues(values: List&lt;A?&gt;): List&lt;A&gt; = values.filterNotNull()\n</code></pre>\n\n<p>The compiler complains about generic types : </p>\n\n<pre><code>Error:(8, 63) Kotlin: Type parameter bound for T in fun &lt;T : kotlin.Any&gt; kotlin.collections.Iterable&lt;T?&gt;.filterNotNull(): kotlin.collections.List&lt;T&gt;\n is not satisfied: inferred type A is not a subtype of kotlin.Any\n</code></pre>\n\n<p>This one is working : </p>\n\n<pre><code>fun &lt;A: Any&gt; nonNullValues(values: List&lt;A?&gt;): List&lt;A&gt; = values.filterNotNull()\n</code></pre>\n\n<p>Could someone please explain me why I need to tell the compiler that A is a subtype of Any? I was thinking every type was a subtype of Any...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 4417, "user_id": 4303352, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-GDIsWLXCoRk/AAAAAAAAAAI/AAAAAAAAADU/ANG0rOZ3vVQ/photo.jpg?sz=128", "display_name": "Nilesh Senta", "link": "https://stackoverflow.com/users/4303352/nilesh-senta"}, "edited": false, "score": 1, "creation_date": 1470901755, "post_id": 37105278, "comment_id": 65140612, "body": "<a href=\"http://stackoverflow.com/questions/33141407/logging-in-retrofit-2-0/38890345#38890345\" title=\"logging in retrofit 2 0\">stackoverflow.com/questions/33141407/logging-in-retrofit-2-0&zwnj;&#8203;/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "is_accepted": true, "score": 11, "last_activity_date": 1502391069, "last_edit_date": 1502391069, "creation_date": 1462744993, "answer_id": 37105307, "question_id": 37105278, "link": "https://stackoverflow.com/questions/37105278/httplogginginterceptor-not-logging-with-retrofit-2/37105307#37105307", "title": "HttpLoggingInterceptor not logging with retrofit 2", "body": "<p>Instead of</p>\n\n<pre><code>val okHttpClient = OkHttpClient.Builder()\n    .addNetworkInterceptor(interceptor)\n    ...\n</code></pre>\n\n<p>you should have something like:</p>\n\n<pre><code>val okHttpClient = OkHttpClient.Builder()\n    .addInterceptor(interceptor)\n    ...\n</code></pre>\n\n<p>as the <code>addNetworkInterceptor()</code> plays with interceptors that observe a single network request and response, while <code>addInterceptor()</code> adds interceptor that observes the full span of each call: from the connection is established (if any) until after the response source is selected (either the origin server, cache, or both).</p>\n\n<p><strong>EDIT</strong></p>\n\n<blockquote>\n  <p>Errors doing requests on Main Thread are not showing by the logger, so be careful</p>\n</blockquote>\n\n<p>Doing networking on main thread is not an \"ordinary\" error. It will result in your app being killed by the system with <code>NetworkOnMainThreadException</code> and this will happen before interceptor would be given any chance to run.</p>\n"}, {"tags": [], "owner": {"reputation": 4200, "user_id": 10699119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYUPn.jpg?s=128&g=1", "display_name": "sana ebadi", "link": "https://stackoverflow.com/users/10699119/sana-ebadi"}, "is_accepted": false, "score": 5, "last_activity_date": 1573737787, "creation_date": 1573737787, "answer_id": 58857833, "question_id": 37105278, "link": "https://stackoverflow.com/questions/37105278/httplogginginterceptor-not-logging-with-retrofit-2/58857833#58857833", "title": "HttpLoggingInterceptor not logging with retrofit 2", "body": "<pre><code>private val interceptor = run {\n    val httpLoggingInterceptor = HttpLoggingInterceptor()\n    httpLoggingInterceptor.apply {\n        httpLoggingInterceptor.level = HttpLoggingInterceptor.Level.BODY\n    }\n}\n\n\nprivate val okHttpClient = OkHttpClient.Builder()\n    .addNetworkInterceptor(interceptor) // same for .addInterceptor(...)\n    .connectTimeout(30, TimeUnit.SECONDS) //Backend is really slow\n    .writeTimeout(30, TimeUnit.SECONDS)\n    .readTimeout(30, TimeUnit.SECONDS)\n    .build()\n</code></pre>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9947, "favorite_count": 2, "accepted_answer_id": 37105307, "answer_count": 2, "score": 7, "last_activity_date": 1573737787, "creation_date": 1462744751, "last_edit_date": 1462746025, "question_id": 37105278, "link": "https://stackoverflow.com/questions/37105278/httplogginginterceptor-not-logging-with-retrofit-2", "title": "HttpLoggingInterceptor not logging with retrofit 2", "body": "<p>Im trying to log all the requests (with a network interceptor) using refrofit2, kotlin and logging-interceptor:</p>\n\n<ul>\n<li>retrofit: \"2.0.2\" </li>\n<li>okhttp3 : \"3.2.0\"</li>\n<li>com.squareup.okhttp3:logging-interceptor 3.2.0</li>\n</ul>\n\n<p>like:</p>\n\n<pre><code>val interceptor = HttpLoggingInterceptor()\n    interceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n\n    val okHttpClient = OkHttpClient.Builder()\n        .addNetworkInterceptor(interceptor) // same for .addInterceptor(...)\n        .connectTimeout(30, TimeUnit.SECONDS) //Backend is really slow\n        .writeTimeout(30, TimeUnit.SECONDS)\n        .readTimeout(30, TimeUnit.SECONDS)\n        .build()\n\n    sRestAdapter = Retrofit.Builder()\n        .client(okHttpClient)\n        .baseUrl(if (host.endsWith(\"/\")) host else \"$host/\")\n        .addConverterFactory(GsonConverterFactory.create(gson()))\n        .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n        .build()\n</code></pre>\n\n<p>It just print:</p>\n\n<pre><code>D/OkHttp: --&gt; GET url...\nD/OkHttp: --&gt; END GET\n</code></pre>\n\n<p>What is happening?</p>\n\n<p>--------------- EDIT --------</p>\n\n<p>Errors doing requests on Main Thread are not showing by the logger, so be careful.</p>\n"}, {"tags": ["kotlin", "typesafe-config", "hocon"], "comments": [{"owner": {"reputation": 1621, "user_id": 760680, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4f4f58a321d43abb6f5b9f5973747078?s=128&d=identicon&r=PG", "display_name": "Geordee Naliyath", "link": "https://stackoverflow.com/users/760680/geordee-naliyath"}, "edited": false, "score": 0, "creation_date": 1462684019, "post_id": 37092808, "comment_id": 61736113, "body": "I probably don&#39;t need to unwrap the config object. But dealing with it as is did not yield any results and this was the closest I could bring it to &quot;print&quot; something."}], "answers": [{"comments": [{"owner": {"reputation": 1621, "user_id": 760680, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4f4f58a321d43abb6f5b9f5973747078?s=128&d=identicon&r=PG", "display_name": "Geordee Naliyath", "link": "https://stackoverflow.com/users/760680/geordee-naliyath"}, "edited": false, "score": 0, "creation_date": 1462766670, "post_id": 37098400, "comment_id": 61757197, "body": "I had to suppress an UNCHECKED_CAST warning too."}], "tags": [], "owner": {"reputation": 96, "user_id": 6306312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3668e1d371edaa7d8f58001e88f78b92?s=128&d=identicon&r=PG&f=1", "display_name": "Sakura", "link": "https://stackoverflow.com/users/6306312/sakura"}, "is_accepted": true, "score": 8, "last_activity_date": 1462700490, "creation_date": 1462700490, "answer_id": 37098400, "question_id": 37092808, "link": "https://stackoverflow.com/questions/37092808/reading-and-processing-hocon-in-kotlin/37098400#37098400", "title": "Reading and Processing HOCON in Kotlin", "body": "<p>Consider your code, deconstructed below:</p>\n\n<pre><code>val keys = metadata.getObjectList(\"tablename.columns\")\n        .filter {\n            val item:ConfigObject = it\n            val unwrapped:Map&lt;String,Any?&gt; = item.unwrapped()\n            val values:Collection&lt;Any?&gt; = unwrapped.values\n            val firstValue:Any? = values.first()\n            firstValue.get(\"key\") == true // does not compile\n        }\n</code></pre>\n\n<p>From the above the problem should be obvious. You need to aid the compiler with the information that <code>firstValue</code> holds a <code>Map</code> like so:</p>\n\n<pre><code>val firstValueMap = firstValue as Map&lt;String,Any?&gt;\nfirstValueMap[\"key\"] == true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 2, "last_activity_date": 1462818518, "last_edit_date": 1462818518, "creation_date": 1462818158, "answer_id": 37122838, "question_id": 37092808, "link": "https://stackoverflow.com/questions/37092808/reading-and-processing-hocon-in-kotlin/37122838#37122838", "title": "Reading and Processing HOCON in Kotlin", "body": "<p>Even though you are not using Klutter, I created an update for it to make <code>ConfigObject</code> and <code>Config</code> act uniformly the same.  From Klutter version <code>1.17.1</code> onwards (pushing to Maven central today) you can do what is represented in the following unit test based on your question.  </p>\n\n<p>The function finding the key columns:</p>\n\n\n\n<pre><code>fun findKeyColumns(cfg: Config, tableName: String): Map&lt;String, ConfigObject&gt; {\n    return cfg.nested(tableName).value(\"columns\").asObjectList()\n            .map { it.keys.single() to it.value(it.keys.single()).asObject() }\n            .filter {\n                it.second.value(\"key\").asBoolean(false)\n            }\n            .toMap()\n}\n</code></pre>\n\n<p>Here is full unit test for this:</p>\n\n<pre><code>// from http://stackoverflow.com/questions/37092808/reading-and-processing-hocon-in-kotlin\n@Test fun testFromSo37092808() {\n    // === mocked configuration file\n\n    val cfg = loadConfig(StringAsConfig(\"\"\"\n            products: {\n              columns: [\n                { item: { type: integer, key: true, null: false } }\n                { desc: { type: varchar, length: 64 } }\n                { quantity: { type: integer, null: false } }\n                { price: { type: decimal, precision: 14, scale: 3 } }\n              ]\n            }\n          \"\"\"))\n\n    // === function to find which columns are key columns\n\n    fun findKeyColumns(cfg: Config, tableName: String): Map&lt;String, ConfigObject&gt; {\n        return cfg.nested(tableName).value(\"columns\").asObjectList()\n                .map { it.keys.single() to it.value(it.keys.single()).asObject() }\n                .filter {\n                    it.second.value(\"key\").asBoolean(false)\n                }\n                .toMap()\n    }\n\n    // === sample usage\n\n    val productKeys = findKeyColumns(cfg, \"products\")\n\n    // we only have 1 in the test data, so grab the name and the values\n    val onlyColumnName = productKeys.entries.first().key\n    val onlyColumnObj = productKeys.entries.first().value\n\n    assertEquals (\"item\", onlyColumnName)\n    assertEquals (true, onlyColumnObj.value(\"key\").asBoolean())\n    assertEquals (\"integer\", onlyColumnObj.value(\"type\").asString())\n    assertEquals (false, onlyColumnObj.value(\"null\").asBoolean())\n}\n</code></pre>\n\n<p>You could return a <code>Map</code> as above, or a list of <code>Pair</code> for the column name to settings mapping since the column name is not inside of its settings.</p>\n\n<p>The design of the configuration file could also be changed to make the processing of the configuration more simple (i.e. the name of the table inside its configuration object, rather than as a left-side key.  Same for column names, add into the object and not as a left-side key.)</p>\n"}], "owner": {"reputation": 1621, "user_id": 760680, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4f4f58a321d43abb6f5b9f5973747078?s=128&d=identicon&r=PG", "display_name": "Geordee Naliyath", "link": "https://stackoverflow.com/users/760680/geordee-naliyath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 2, "accepted_answer_id": 37098400, "answer_count": 2, "score": 5, "last_activity_date": 1462818518, "creation_date": 1462649298, "last_edit_date": 1462683914, "question_id": 37092808, "link": "https://stackoverflow.com/questions/37092808/reading-and-processing-hocon-in-kotlin", "title": "Reading and Processing HOCON in Kotlin", "body": "<p>I would like to read the following configuration from a HOCON (Typesafe Config) file into Kotlin.</p>\n\n<pre><code>tablename: {  \n  columns: [\n    { item: { type: integer, key: true, null: false } }\n    { desc: { type: varchar, length: 64 } }\n    { quantity: { type: integer, null: false } }\n    { price: { type: decimal, precision: 14, scale: 3 } }\n  ]\n}\n</code></pre>\n\n<p>In fact I would like to extract the key column(s). I have tried the following so far.</p>\n\n<pre><code>val metadata = ConfigFactory.parseFile(metafile)\nval keys = metadata.getObjectList(\"${tablename.toLowerCase()}.columns\")\n                   .filter { it.unwrapped().values.first().get(\"key\") == true }\n</code></pre>\n\n<p>But it fails with the following error.</p>\n\n<pre><code>Unresolved reference. None of the following candidates is applicable because of receiver type mismatch:\n@kotlin.internal.InlineOnly public operator inline fun &lt;@kotlin.internal.OnlyInputTypes K, V&gt; kotlin.collections.Map&lt;out kotlin.String, ???&gt;.get(key: kotlin.String): ??? defined in kotlin.collections\n</code></pre>\n\n<p>It is clear that Kotlin is not able to understand the data type of the \"value\" field in the Map. How do I declare it or let Kotlin know?</p>\n\n<p>Also not that there are different types and optional keys in this Map.</p>\n\n<p>PS: I know that there are couple of wrappers available for Kotlin such as Konfig and Klutter. I was hoping that if this is easy to write I could avoid another library.</p>\n\n<p><strong>UPDATE 1:</strong></p>\n\n<p>I have tried the following.</p>\n\n<pre><code>it.unwrapped().values.first().get&lt;String, Boolean&gt;(\"key\")\n</code></pre>\n\n<p>to get the following compiler error.</p>\n\n<pre><code>Unresolved reference. None of the following candidates is applicable because of receiver type mismatch:\n@kotlin.internal.InlineOnly public operator inline fun &lt;@kotlin.internal.OnlyInputTypes K, V&gt; kotlin.collections.Map&lt;out kotlin.String, kotlin.Boolean&gt;.get(key: kotlin.String): kotlin.Boolean? defined in kotlin.collections\n</code></pre>\n\n<p>And this</p>\n\n<pre><code>it.unwrapped().values.first().get&lt;String, Boolean?&gt;(\"key\")\n</code></pre>\n\n<p>with output</p>\n\n<pre><code>Unresolved reference. None of the following candidates is applicable because of receiver type mismatch:\n@kotlin.internal.InlineOnly public operator inline fun &lt;@kotlin.internal.OnlyInputTypes K, V&gt; kotlin.collections.Map&lt;out kotlin.String, kotlin.Boolean?&gt;.get(key: kotlin.String): kotlin.Boolean? defined in kotlin.collections\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Looking at the way it is handled elsewhere, I guess I probably need to use reflection. Trying it out with my limited exposure. No luck so far.</p>\n"}, {"tags": ["regex", "kotlin", "regex-group"], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 7, "last_activity_date": 1462664268, "creation_date": 1462664268, "answer_id": 37094745, "question_id": 37088679, "link": "https://stackoverflow.com/questions/37088679/kotlin-regex-named-groups-support/37094745#37094745", "title": "Kotlin Regex named groups support", "body": "<p>As of Kotlin 1.0 the <code>Regex</code> class doesn't provide a way to access matched named groups in <code>MatchGroupCollection</code> because the Standard Library can only employ regex api available in JDK6, that doesn't have support for named groups either.</p>\n\n<p>If you target JDK8 you can use <code>java.util.regex.Pattern</code> and <code>java.util.regex.Matcher</code> classes. The latter provides <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#group-java.lang.String-\"><code>group</code></a> method to get the result of named-capturing group match.</p>\n"}, {"tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": true, "score": 23, "last_activity_date": 1494447183, "last_edit_date": 1494447183, "creation_date": 1472891575, "answer_id": 39304900, "question_id": 37088679, "link": "https://stackoverflow.com/questions/37088679/kotlin-regex-named-groups-support/39304900#39304900", "title": "Kotlin Regex named groups support", "body": "<p>According to <a href=\"https://discuss.kotlinlang.org/t/regex-named-groups/1864/2\" rel=\"noreferrer\">this discussion</a>, </p>\n\n<blockquote>\n  <p>This will be supported in Kotlin 1.1.\n  <a href=\"https://youtrack.jetbrains.com/issue/KT-12753\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-12753</a></p>\n</blockquote>\n\n<p><a href=\"https://discuss.kotlinlang.org/t/kotlin-early-access-preview-updated/1437\" rel=\"noreferrer\">Kotlin 1.1 EAP</a> is already available to try.</p>\n\n<hr>\n\n<pre><code>\"\"\"(\\w+?)(?&lt;num&gt;\\d+)\"\"\".toRegex().matchEntire(\"area51\")!!.groups[\"num\"]!!.value\n</code></pre>\n\n<p>You'll have to <a href=\"https://kotlinlang.org/docs/reference/using-maven.html\" rel=\"noreferrer\">use</a> <code>kotlin-stdlib-jre8</code>.</p>\n"}], "owner": {"reputation": 1159, "user_id": 2035277, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/315e5fbce834a8ebf0040a15d80f14c8?s=128&d=identicon&r=PG", "display_name": "gs_vlad", "link": "https://stackoverflow.com/users/2035277/gs-vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9504, "favorite_count": 2, "accepted_answer_id": 39304900, "answer_count": 2, "score": 19, "last_activity_date": 1508797029, "creation_date": 1462624911, "question_id": 37088679, "link": "https://stackoverflow.com/questions/37088679/kotlin-regex-named-groups-support", "title": "Kotlin Regex named groups support", "body": "<p>Does Kotlin have support for named regex groups?</p>\n\n<p>Named regex group looks like this: <code>(?&lt;name&gt;...)</code></p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 6, "last_activity_date": 1462617897, "creation_date": 1462617897, "answer_id": 37087546, "question_id": 37087452, "link": "https://stackoverflow.com/questions/37087452/property-delegation-baked-by-mutable-map/37087546#37087546", "title": "Property delegation baked by mutable map", "body": "<p>Until the issues <a href=\"https://youtrack.jetbrains.com/issue/KT-5870#tab=Linked%20Issues\">KT-5870</a>, <a href=\"https://youtrack.jetbrains.com/issue/KT-9772\">KT-9772</a> are resolved you can do the following:</p>\n\n<pre><code>operator fun &lt;V, V1 : V&gt; (() -&gt; Map&lt;in String, V&gt;).getValue(thisRef: Any?, property: KProperty&lt;*&gt;): V1 {\n    val map = this()\n    return map[property.name] as V1\n}\n</code></pre>\n\n<p>Which can then be used as follows:</p>\n\n<pre><code>class Mapped(var data:Map&lt;String,String&gt;){\n    val firstName:String by { data }\n}\n</code></pre>\n\n<p>The above does not handle nullability well. Here's an improved version:</p>\n\n<pre><code>operator fun &lt;V, V1 : V&gt; (() -&gt; Map&lt;in String, V&gt;).getValue(thisRef: Any?, property: KProperty&lt;*&gt;): V1 {\n    val map = this()\n    val key = property.name\n    @Suppress(\"UNCHECKED_CAST\")\n    val value = map[key] as V1\n    if (property.returnType.isMarkedNullable) {\n        return value\n    } else {\n        if(value != null){\n            return value\n        }\n        if(map.containsKey(key)){\n            throw KotlinNullPointerException(\"Property baking map returned null value for key '$key' for non nullable property: $property\")\n        } else {\n            throw KotlinNullPointerException(\"Property baking map has no key '$key' for non nullable property $property\")\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6303570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcc7380b2f14e2e13e24e3ba66590248?s=128&d=identicon&r=PG&f=1", "display_name": "zetsu", "link": "https://stackoverflow.com/users/6303570/zetsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 2, "accepted_answer_id": 37087546, "answer_count": 1, "score": 6, "last_activity_date": 1462617897, "creation_date": 1462617374, "question_id": 37087452, "link": "https://stackoverflow.com/questions/37087452/property-delegation-baked-by-mutable-map", "title": "Property delegation baked by mutable map", "body": "<p>I have a following code:</p>\n\n<pre><code>class Mapped(var data:Map&lt;String,String&gt;){\n    val firstName:String by data\n}\n</code></pre>\n\n<p>This works fine in case the <code>Mapped</code> is used as follows:</p>\n\n<pre><code>val mapped = Mapped(mapOf(\"firstName\" to \"initialFirstName\"))\nprintln(mapped.firstName); // prints \"initialFirstName\"\n</code></pre>\n\n<p>However since the <code>data</code> property is mutable we can change it's value i.e.:</p>\n\n<pre><code>mapped.data = mapOf(\"firstName\" to \"updated\");\n</code></pre>\n\n<p>However the <code>firstName</code> property still holds the <code>\"initialFirstName\"</code>. </p>\n\n<p>Is there <strong>a work around to this</strong>, <a href=\"https://youtrack.jetbrains.com/issue/KT-9772\">known/documented</a> albeit unexpected (to me) behavior?</p>\n"}, {"tags": ["java", "android", "exception-handling", "rx-java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 3, "last_activity_date": 1516118906, "last_edit_date": 1516118906, "creation_date": 1462620022, "answer_id": 37087901, "question_id": 37086936, "link": "https://stackoverflow.com/questions/37086936/rxjava-default-error-handler/37087901#37087901", "title": "RxJava default error handler", "body": "<p>You can use the <a href=\"http://reactivex.io/documentation/operators/catch.html\" rel=\"nofollow noreferrer\"><code>onErrorResumeNext</code></a> operator. Example usage:</p>\n\n<pre><code>fun BaseFragment.callGallery(view: View){\n    view\n      .clicks()\n      .bindToLifecycle(this)\n      .onErrorResumeNext { err -&gt; log(err); Observable.empty() }\n      .subscribe {\n         // do stuff\n      }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9488, "user_id": 1121497, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lKl3g.jpg?s=128&g=1", "display_name": "Ferran Maylinch", "link": "https://stackoverflow.com/users/1121497/ferran-maylinch"}, "edited": false, "score": 1, "creation_date": 1516118876, "post_id": 37088553, "comment_id": 83555041, "body": "Looks like it&#39;s deprecated"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 7, "last_activity_date": 1462624183, "creation_date": 1462624183, "answer_id": 37088553, "question_id": 37086936, "link": "https://stackoverflow.com/questions/37086936/rxjava-default-error-handler/37088553#37088553", "title": "RxJava default error handler", "body": "<p>RxJava has <a href=\"https://github.com/ReactiveX/RxJava/wiki/Plugins\" rel=\"noreferrer\">Plugins</a> to support cross cutting concerns nicely. In particular <a href=\"https://github.com/ReactiveX/RxJava/wiki/Plugins#rxjavaerrorhandler\" rel=\"noreferrer\"><code>RxJavaErrorHandler</code></a> is desiged to attached global error handling behavior like so:</p>\n\n<pre><code>RxJavaPlugins.getInstance().registerErrorHandler(object : RxJavaErrorHandler() {\n    override fun handleError(e: Throwable?) {\n        println(\"Global error handler: $e\")\n    }\n})\n\nObservable.just(1).concatMap({ Observable.error&lt;Int&gt;(Exception(\"Just throwing $it\")) })\n        .subscribe({\n            println(\"I'll not be called\")\n        }, {\n            println(\"Specific error handler: $it\")\n        })\n</code></pre>\n\n<p>The above code would print:</p>\n\n<pre><code>Error occurred java.lang.Exception: Just throwing 1\nA default error handler: java.lang.Exception: Just throwing 1\n</code></pre>\n\n<p>I suspect that you'd also be interested in improving diagnostic information available in stacktraces when you do have an unhandled error. For that there's a <a href=\"https://github.com/Cookizz/RxJavaStackTracer/blob/master/app/src/main/java/stacktracer/rxjava/cookizz/com/rxjavastacktracer/RxJavaStackTracer.java\" rel=\"noreferrer\"><code>RxJavaStackTracer</code></a> that when used <code>RxJavaPlugins.getInstance().registerObservableExecutionHook(RxJavaStackTracer())</code> enhaces stack trace information. The <a href=\"https://github.com/ReactiveX/RxJava/issues/3521\" rel=\"noreferrer\">Stacktraces and subscribeOn/observeOn</a> issue on github is a good read on the topic.</p>\n"}], "owner": {"reputation": 1238, "user_id": 1444191, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e2f9966b827690e6389716c8dd78959?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/1444191/slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3721, "favorite_count": 2, "answer_count": 2, "score": 7, "last_activity_date": 1516118906, "creation_date": 1462614171, "question_id": 37086936, "link": "https://stackoverflow.com/questions/37086936/rxjava-default-error-handler", "title": "RxJava default error handler", "body": "<p>Sorry, is there a possibility to set default error handler in RxJava?</p>\n\n<p>For instance, I some code in <code>Utils.kt</code> file:</p>\n\n<pre><code>fun BaseFragment.callGallery(view: View){\n    view.clicks().bindToLifecycle(this).subscribe {\n        RxPaparazzo.takeImage(this)\n        .usingGallery()\n        .subscribe { response -&gt;\n            throw RuntimeException(\"Where is this exception from?\")\n        }\n    }\n}\n</code></pre>\n\n<p>But in stacktrace there's no any hint about <code>Utils.kt</code> or about any of my file.</p>\n\n<p>I understand that I can set onError in every subscriber. with code like:</p>\n\n<pre><code>.subscribe ({ response -&gt;\n    ....\n}, { it.printStackTrace() })\n</code></pre>\n\n<p>But I'd prefer to set one default onError for all subscribers. How can I do it?</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>05-07 12:11:48.246 10966-10966/ru.egslava.rxfluxtest E/AndroidRuntime: FATAL EXCEPTION: main\n Process: ru.egslava.rxfluxtest, PID: 10966\n java.lang.RuntimeException: Unable to destroy activity {ru.egslava.rxfluxtest/rx_activity_result.HolderActivity}: rx.exceptions.OnErrorNotImplementedException: Where is this exception from?\n     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3831)\n     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3849)\n     at android.app.ActivityThread.-wrap5(ActivityThread.java)\n     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1398)\n     at android.os.Handler.dispatchMessage(Handler.java:102)\n     at android.os.Looper.loop(Looper.java:148)\n     at android.app.ActivityThread.main(ActivityThread.java:5417)\n     at java.lang.reflect.Method.invoke(Native Method)\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n  Caused by: rx.exceptions.OnErrorNotImplementedException: Where is this exception from?\n     at rx.internal.util.InternalObservableUtils$ErrorNotImplementedAction.call(InternalObservableUtils.java:374)\n     at rx.internal.util.InternalObservableUtils$ErrorNotImplementedAction.call(InternalObservableUtils.java:371)\n     at rx.internal.util.ActionSubscriber.onError(ActionSubscriber.java:44)\n     at rx.observers.SafeSubscriber._onError(SafeSubscriber.java:157)\n     at rx.observers.SafeSubscriber.onError(SafeSubscriber.java:120)\n     at rx.exceptions.Exceptions.throwOrReport(Exceptions.java:204)\n     at rx.observers.SafeSubscriber.onNext(SafeSubscriber.java:144)\n     at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onNext(OperatorOnErrorResumeNextViaFunction.java:153)\n     at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74)\n     at rx.internal.operators.OperatorMerge$MergeSubscriber.emitScalar(OperatorMerge.java:391)\n     at rx.internal.operators.OperatorMerge$MergeSubscriber.tryEmit(OperatorMerge.java:353)\n     at rx.internal.operators.OperatorMerge$InnerSubscriber.onNext(OperatorMerge.java:838)\n     at rx.observers.Subscribers$5.onNext(Subscribers.java:229)\n     at rx.internal.operators.OperatorZip$Zip.tick(OperatorZip.java:264)\n     at rx.internal.operators.OperatorZip$Zip$InnerSubscriber.onNext(OperatorZip.java:335)\n     at rx.internal.operators.OperatorMap$MapSubscriber.onNext(OperatorMap.java:74)\n     at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:268)\n     at rx.Subscriber.setProducer(Subscriber.java:211)\n     at rx.internal.operators.OperatorMap$MapSubscriber.setProducer(OperatorMap.java:99)\n     at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:79)\n     at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:75)\n     at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:50)\n     at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n     at rx.Observable.unsafeSubscribe(Observable.java:8452)\n     at rx.internal.operators.OperatorZip$Zip.start(OperatorZip.java:214)\n     at rx.internal.operators.OperatorZip$ZipSubscriber.onNext(OperatorZip.java:156)\n     at rx.internal.operators.OperatorZip$ZipSubscriber.onNext(OperatorZip.java:122)\n     at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:268)\n     at rx.Subscriber.setProducer(Subscriber.java:209)\n     at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:79)\n     at rx.internal.util.ScalarSynchronousObservable$1.call(ScalarSynchronousObservable.java:75)\n     at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:50)\n     at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30)\n     at rx.Observable.unsafeSubscribe(Observable.java:8452)\n     at rx.internal.util.ScalarSynchronousObservable$4.call(ScalarSynchronousObservable.java:227)\n     at rx.internal.util.ScalarSynchronousObservable$4.call(ScalarSynchronousObservable.java:220)\n     at rx.Observable.unsafeSubscribe(Observable.java:8452)\n     at rx.internal.operators.OperatorMerge$MergeSubscriber.onNext(OperatorMerge.java:248)\n</code></pre>\n"}, {"tags": ["json", "gson", "kotlin"], "comments": [{"owner": {"reputation": 7499, "user_id": 2139222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1eA8.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/2139222/ulises"}, "edited": false, "score": 1, "creation_date": 1462590401, "post_id": 37084060, "comment_id": 61712599, "body": "what language is this?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462590481, "post_id": 37084060, "comment_id": 61712614, "body": "I don&#39;t think this deserves to have a Java tag, but don&#39;t you need to escape double quotes in your string?"}, {"owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "reply_to_user": {"reputation": 7499, "user_id": 2139222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1eA8.jpg?s=128&g=1", "display_name": "Ulises", "link": "https://stackoverflow.com/users/2139222/ulises"}, "edited": false, "score": 0, "creation_date": 1462590549, "post_id": 37084060, "comment_id": 61712622, "body": "@Ulises, Kotlin language with Gson lib"}, {"owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462590704, "post_id": 37084060, "comment_id": 61712649, "body": "@cricket_007, I checked the JSON <a href=\"http://jsonlint.com/\" rel=\"nofollow noreferrer\">here</a>. It&#39;s a valid JSON file"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462590820, "post_id": 37084060, "comment_id": 61712669, "body": "I&#39;m sure the JSON itself is valid, but you have double quotes within double quotes. Unless kotlin handles that somehow, you have to escape the quotes in the string"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462590896, "post_id": 37084060, "comment_id": 61712678, "body": "There are examples of creating JSON objects here   <a href=\"https://github.com/SalomonBrys/Kotson/blob/master/README.md\" rel=\"nofollow noreferrer\">github.com/SalomonBrys/Kotson/blob/master/README.md</a>"}, {"owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462591118, "post_id": 37084060, "comment_id": 61712718, "body": "@cricket_007, I&#39;m using this library too :) , but the problem is that this String containing the JSON object is a server response, I&#39;m just storing it in a <code>val</code>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1462591417, "post_id": 37084060, "comment_id": 61712755, "body": "Okay, my only point was that I don&#39;t think your simple string in your question here is a valid string object"}, {"owner": {"reputation": 5492, "user_id": 6083675, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D2CgS.png?s=128&g=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/6083675/laurel"}, "edited": false, "score": 0, "creation_date": 1462591533, "post_id": 37084060, "comment_id": 61712775, "body": "It might be caused by the <code>[]</code> at the end..."}, {"owner": {"reputation": 1275, "user_id": 5014221, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1869ef33edac6f8f4b0622f494987290?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Patil", "link": "https://stackoverflow.com/users/5014221/ashish-patil"}, "edited": false, "score": 1, "creation_date": 1462592212, "post_id": 37084060, "comment_id": 61712887, "body": "<a href=\"http://stackoverflow.com/questions/7634518/getting-jsonobject-from-jsonarray\" title=\"getting jsonobject from jsonarray\">stackoverflow.com/questions/7634518/&hellip;</a>  this might help"}], "answers": [{"tags": [], "owner": {"reputation": 5007, "user_id": 518992, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/24b326bf978c7aa93937b443f7a24ecc?s=128&d=identicon&r=PG", "display_name": "sargue", "link": "https://stackoverflow.com/users/518992/sargue"}, "is_accepted": false, "score": 1, "last_activity_date": 1462781900, "creation_date": 1462781900, "answer_id": 37110799, "question_id": 37084060, "link": "https://stackoverflow.com/questions/37084060/error-cannot-be-converted-to-json-when-trying-to-create-a-json-object-from/37110799#37110799", "title": "Error &quot;[] cannot be converted to JSON&quot; when trying to create a JSON Object from String", "body": "<p>Your code is fine, there is something else that is failing.</p>\n\n<p>I've tried this and it works.</p>\n\n<pre><code>package proves\n\nimport com.google.gson.JsonParser\n\nfun main(args: Array&lt;String&gt;) {\n    val jsonString = \"{ \\\"age\\\": 22, \\\"height\\\" : 1.8, \\\"profession\\\":\\\"Student\\\", \\\"at_room\\\": false, \\\"gender\\\": \\\"male\\\",\\\"pictures\\\": []}\"\n    val jsonData = JsonParser().parse(jsonString).asJsonObject\n    print(jsonData)\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\"age\":22,\"height\":1.8,\"profession\":\"Student\",\"at_room\":false,\"gender\":\"male\",\"pictures\":[]}\n</code></pre>\n"}], "owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1462784113, "creation_date": 1462590273, "last_edit_date": 1462784113, "question_id": 37084060, "link": "https://stackoverflow.com/questions/37084060/error-cannot-be-converted-to-json-when-trying-to-create-a-json-object-from", "title": "Error &quot;[] cannot be converted to JSON&quot; when trying to create a JSON Object from String", "body": "<p>I'm using the Koltin language with GSON library to create/parse JSON. I have the following string that represents a JSON object</p>\n\n<pre><code>val jsonString = \"{ \\\"age\\\": 22, \\\"height\\\" : 1.8, \\\"profession\\\":\\\"Student\\\", \\\"at_room\\\": false, \\\"gender\\\": \\\"male\\\",\\\"pictures\\\": []}\"\n</code></pre>\n\n<p>When I try to convert this string to a JSON Object, by doing</p>\n\n<pre><code>val jsonData = JsonParser().parse(jsonString).asJsonObject\n</code></pre>\n\n<p>I get the following error:</p>\n\n<p><code>[] can not be converted to JSON</code></p>\n\n<p>I guess that this error is due to the fact that <code>pictures</code> is a JSONArray and not a primitive type. Anyway, I would like to know how to convert this string to a JSON Object correctly.</p>\n"}, {"tags": ["java", "android", "interface", "kotlin", "function-calls"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1462568149, "post_id": 37077657, "comment_id": 61707297, "body": "Could you please reformat the code? In it&#39;s current state it is kinda hard to read. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1462554615, "creation_date": 1462554615, "answer_id": 37077955, "question_id": 37077657, "link": "https://stackoverflow.com/questions/37077657/kotlin-performance-of-interface-vs-function-invocation/37077955#37077955", "title": "Kotlin performance of Interface vs Function Invocation", "body": "<p>A lambda in Kotlin is compiled to an anonymous inner class. Therefore, the performance of the two scenarios will be exactly the same.</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 37077955, "answer_count": 1, "score": 1, "last_activity_date": 1462570756, "creation_date": 1462553531, "last_edit_date": 1462570756, "question_id": 37077657, "link": "https://stackoverflow.com/questions/37077657/kotlin-performance-of-interface-vs-function-invocation", "title": "Kotlin performance of Interface vs Function Invocation", "body": "<p>In Kotlin, as we can use functions as variables, i tend to replace interfaces with function calls like this:</p>\n\n<pre><code>class A {\n\n    private var listener: AA? = null\n    var callThis: (() -&gt; Unit) ? = null)\n\n    fun somethingHere() {\n        callThis?.invoke()\n        listener?.callThis2()\n    }\n\n    fun attachListener(listener: AA) {\n        this.listener = listener\n    }\n\n    interface AA {\n        fun callThis2()\n    }\n}\n\nclass B {\n    init {\n        val objectA = A()\n        objectA.callThis = {}\n        objectA.attachListener(object : A.AA {\n            override fun callThis2() {\n            }\n        })\n\n    }\n}\n</code></pre>\n\n<p>As I'm pretty new to Kotlin, i would like to know the differences and in what scenarios should i use function calls vs interfaces, except for the (obviously) abstraction. Or is it the same, and the function call does exactly the same as anonymous inner classes</p>\n\n<p>The function is called many times, each 100s precisely, and i would like to know, in terms of performance, which on is better</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1471381909, "post_id": 37077176, "comment_id": 65321826, "body": "I don&#39;t see that your StateListDrawable uses <code>Activity</code> as <code>Context</code>. Could you provide code of calling this function?"}], "owner": {"reputation": 537, "user_id": 5207721, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/686783f7f5ad8284b8c1491775db498c?s=128&d=identicon&r=PG&f=1", "display_name": "gesuwall", "link": "https://stackoverflow.com/users/5207721/gesuwall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462551796, "creation_date": 1462551796, "question_id": 37077176, "link": "https://stackoverflow.com/questions/37077176/why-does-context-not-have-the-activitys-primary-color-attribute", "title": "Why does context not have the activity&#39;s primary color attribute?", "body": "<p>I'm writing a library that has an activity for photo editing. When the user is done editing, there is a \"done\" button with a color background. I want to be able to customize the color of the button so I have static methods in a <em>different class</em> that create drawables with different colors. Something that I want to do in this class is a function that receives a <code>Context</code> reference and creates a drawable with the primary color. Here's my code:</p>\n\n<pre><code>//code from FlatButtonDrawable class companion object\nfun new(ctx: Context): StateListDrawable{\n\n            val typedValue = TypedValue();\n\n            val a = ctx.obtainStyledAttributes(typedValue.data, intArrayOf(R.attr.colorPrimary))\n            val color = a.getColor(0, 0);\n\n            a.recycle();\n            return createColorDrawable(color)\n        }\n</code></pre>\n\n<p>This function gets the primary color from the <code>Context</code> and returns a drawable with that color. The problem is that the primaryColor attribute is not found, so it returns a colorless drawable.</p>\n\n<p>What's even weirder is that if instead I fetch the primary color in my activity and <em>then</em> call the static method, it works. Here's the code:</p>\n\n<pre><code>//code from activity class\nval sendButton = findViewById(R.id.sendPhoto) as Button\nval typedValue = TypedValue();\nval a = obtainStyledAttributes(typedValue.data, intArrayOf(R.attr.colorPrimary))\nval color = a.getColor(0,0)\na.recycle()\nsendButton.background =FlatButtonDrawable.createColorDrawable(color)\n</code></pre>\n\n<p>So the real question is: <strong>Why does <code>obtainStyledAttributes</code> fail when called from my static method using the activity's context reference, but it succeeds when called from the activity?</strong></p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 6, "creation_date": 1462819125, "post_id": 37070443, "comment_id": 61786983, "body": "With regex it is sometimes nice to use <code>&quot;&quot;&quot;</code> instead of <code>&quot;</code> for the regex string so that you do not have to escape the contents of the regex."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 101, "last_activity_date": 1467029502, "last_edit_date": 1467029502, "creation_date": 1462531646, "answer_id": 37070443, "question_id": 37070352, "link": "https://stackoverflow.com/questions/37070352/how-do-i-replace-duplicate-whitespaces-in-a-string-in-kotlin/37070443#37070443", "title": "How do I replace duplicate whitespaces in a String in Kotlin?", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"noreferrer\"><code>replace</code> function</a> in Kotlin has overloads for either raw string and regex patterns.</p>\n\n<pre><code>\"Test  me\".replace(\"\\\\s+\", \" \")\n</code></pre>\n\n<p>This replaces raw string <code>\\s+</code>, which is the problem.</p>\n\n<pre><code>\"Test  me\".replace(\"\\\\s+\".toRegex(), \" \")\n</code></pre>\n\n<p>This line replaces multiple whitespaces with a single space. \nNote the explicit <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/to-regex.html\" rel=\"noreferrer\"><code>toRegex()</code></a> call, which makes a <code>Regex</code> from a <code>String</code>, thus specifying the overload with <code>Regex</code> as pattern.</p>\n\n<p>There's also an overload which allows you to produce the replacement from the matches. For example, to replace them with the first whitespace encountered, use this:</p>\n\n<pre><code>\"Test\\n\\n  me\".replace(\"\\\\s+\".toRegex()) { it.value[0].toString() }\n</code></pre>\n\n<p><hr>\nBy the way, if the operation is repeated, consider moving the pattern construction out of the repeated code for better efficiency:</p>\n\n<pre><code>val pattern = \"\\\\s+\".toRegex()\n\nfor (s in strings)\n    result.add(s.replace(pattern, \" \"))\n</code></pre>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24075, "favorite_count": 7, "accepted_answer_id": 37070443, "answer_count": 1, "score": 48, "last_activity_date": 1583427819, "creation_date": 1462531347, "last_edit_date": 1465509110, "question_id": 37070352, "link": "https://stackoverflow.com/questions/37070352/how-do-i-replace-duplicate-whitespaces-in-a-string-in-kotlin", "title": "How do I replace duplicate whitespaces in a String in Kotlin?", "body": "<p>Say I have a string: <code>\"Test    me\"</code>.</p>\n\n<p>how do I convert it to: <code>\"Test me\"</code>?</p>\n\n<p>I've tried using:</p>\n\n<pre><code>string?.replace(\"\\\\s+\", \" \")\n</code></pre>\n\n<p>but it appears that <code>\\\\s</code> is an illegal escape in Kotlin.</p>\n"}, {"tags": ["android", "kotlin", "dbflow"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1998137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH7ib.jpg?s=128&g=1", "display_name": "Rodrigo Salinas", "link": "https://stackoverflow.com/users/1998137/rodrigo-salinas"}, "is_accepted": true, "score": 2, "last_activity_date": 1462499806, "creation_date": 1462499806, "answer_id": 37063035, "question_id": 37062882, "link": "https://stackoverflow.com/questions/37062882/unresolved-reference-kclass-trying-to-use-dbflow-and-kotlin-with-android/37063035#37063035", "title": "Unresolved reference KClass trying to use DBFlow and Kotlin with Android", "body": "<p>Apparently I was not supposed to use KClass in that manner. The correct way in current Kotlin is <code>AppDatabase::class</code> instead of <code>KClass&lt;AppDatabase&gt;</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 1998137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH7ib.jpg?s=128&g=1", "display_name": "Rodrigo Salinas", "link": "https://stackoverflow.com/users/1998137/rodrigo-salinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 37063035, "answer_count": 1, "score": 1, "last_activity_date": 1462499806, "creation_date": 1462498735, "question_id": 37062882, "link": "https://stackoverflow.com/questions/37062882/unresolved-reference-kclass-trying-to-use-dbflow-and-kotlin-with-android", "title": "Unresolved reference KClass trying to use DBFlow and Kotlin with Android", "body": "<p>I'm using kotlin 1.0.1-2 in my Android project. I want to use DBFlow as my ORM. But it demands the use of the Table annotation for my classes to be persisted. The Table annotation has the Database attribute. And this attribute expects a KClass. Nevertheless, the following code simply doesn't compile. The error says: <code>Unresolved reference KClass</code>. Whose fault is that? Thanks in advance.</p>\n\n<pre><code>import com.raizlabs.android.dbflow.annotation.Column\nimport com.raizlabs.android.dbflow.annotation.PrimaryKey\nimport com.raizlabs.android.dbflow.annotation.Table\nimport com.raizlabs.android.dbflow.structure.BaseModel\nimport java.util.*\nimport kotlin.reflect.KClass\n\n@Table(name = \"items\", database = KClass&lt;AppDatabase&gt;)\nclass Item : BaseModel() {\n    @PrimaryKey(autoincrement = true)\n    @Column(name = \"id\")\n    var id: Long = 0\n    @Column(name = \"updated_at\")\n    var updatedAt: Calendar = Calendar.getInstance()\n}\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 4412, "user_id": 1650580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Su7AM.jpg?s=128&g=1", "display_name": "Mike Buhot", "link": "https://stackoverflow.com/users/1650580/mike-buhot"}, "edited": false, "score": 1, "creation_date": 1462447631, "post_id": 37047745, "comment_id": 61646266, "body": "As demonstrated in the answer you linked to, spy is designed to solve exactly this problem - letting you verify calls on a non-mock object instance. Can you explain why spy can&#39;t be used?"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1462453581, "post_id": 37047745, "comment_id": 61650067, "body": "The thing you&#39;re trying to do is also a sign of bad class design. Keep your internals private, and test external behavior."}], "answers": [{"tags": [], "owner": {"reputation": 26640, "user_id": 13163, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/67f7ed4d56aafb0563abfe2c74697a3d?s=128&d=identicon&r=PG", "display_name": "Krzysztof Kozmic", "link": "https://stackoverflow.com/users/13163/krzysztof-kozmic"}, "is_accepted": true, "score": 5, "last_activity_date": 1462442959, "creation_date": 1462442959, "answer_id": 37047827, "question_id": 37047745, "link": "https://stackoverflow.com/questions/37047745/how-could-i-test-a-method-is-not-being-called-for-a-non-mock-object/37047827#37047827", "title": "How could I test a method is not being called for a non mock object?", "body": "<p>That won't work by definition.</p>\n\n<p>Mocking frameworks can <code>verify</code> only calls to mock objects. They have no way of knowing what has or hasn't happened to objects they do not control. You either need to mock your presenter, replace it with a stub or...</p>\n\n<p>well, I think those are the only two options.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 0, "accepted_answer_id": 37047827, "answer_count": 1, "score": 3, "last_activity_date": 1462442959, "creation_date": 1462442741, "last_edit_date": 1495542236, "question_id": 37047745, "link": "https://stackoverflow.com/questions/37047745/how-could-i-test-a-method-is-not-being-called-for-a-non-mock-object", "title": "How could I test a method is not being called for a non mock object?", "body": "<p>I have a test as below, where in the given condition, I want to ensure <code>mainPresenter.presenterFunction()</code> is not called.</p>\n\n<pre><code>class MainPresenterTest {\n\n    val mainPresenter: MainPresenter\n    val mainView: MainView\n    val mainBridge: MainBridge\n\n    init {\n        mainView = mock(MainView::class.java)\n        webBridge = mock(MainBridge::class.java)\n        mainPresenter = MainPresenter(mainView, mainBridge)\n    }\n\n    @Before\n    fun setUp() {\n        MockitoAnnotations.initMocks(this)\n    }\n\n    @Test\n    fun simpleTeset1() {\n        // Given\n        whenMock(mainView.viewFunctionCondition()).thenReturn(true)\n\n        // When\n        mainPresenter.onTriggger()\n\n        // Then\n        verify(mainView).viewFunction1()\n        verify(mainPresenter, never()).presenterFunction()\n        verify(mainView, never()).viewFunction2()\n    }\n}\n</code></pre>\n\n<p>However it error out stating</p>\n\n<pre><code>org.mockito.exceptions.misusing.NotAMockException: \nArgument passed to verify() is of type MainPresenter and is not a mock!\nMake sure you place the parenthesis correctly!\n</code></pre>\n\n<p>The error is on the line <code>verify(mainPresenter, never()).presenterFunction()</code></p>\n\n<p>It is expected as <code>mainPresenter</code> is not a mock object. How could I test a method that being called for a non mock object? </p>\n\n<p>I see the answer in <a href=\"https://stackoverflow.com/questions/31039283/how-to-verify-a-method-of-a-non-mock-object-is-called\">how to verify a method of a non-mock object is called?</a>, but that is still using Mock and Spy. I hope to find a way without need to mock for a class instance that I already have.</p>\n\n<p>(Note: the above is written in Kotlin)</p>\n"}]