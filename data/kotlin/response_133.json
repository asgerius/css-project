[{"tags": ["java", "operators", "kotlin"], "comments": [{"owner": {"reputation": 3123, "user_id": 7803527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bskeA.jpg?s=128&g=1", "display_name": "Dean Xu", "link": "https://stackoverflow.com/users/7803527/dean-xu"}, "edited": false, "score": 1, "creation_date": 1501114953, "post_id": 45339034, "comment_id": 77640759, "body": "Double-colon is for reflect(class, method, field) in kotlin, not method reference like in java."}, {"owner": {"reputation": 2792, "user_id": 1197317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a809eed13d4da1cd8797d0578ab6076?s=128&d=identicon&r=PG", "display_name": "fikr4n", "link": "https://stackoverflow.com/users/1197317/fikr4n"}, "reply_to_user": {"reputation": 3123, "user_id": 7803527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bskeA.jpg?s=128&g=1", "display_name": "Dean Xu", "link": "https://stackoverflow.com/users/7803527/dean-xu"}, "edited": false, "score": 0, "creation_date": 1501124883, "post_id": 45339034, "comment_id": 77643077, "body": "Thanks, that&#39;s something I misunderstood from the <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">documentation</a>. I thought it&#39;s callable reference, since <code>val f: () -&gt; CharArray = &quot;&quot;::toCharArray</code> is valid."}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 2, "creation_date": 1501141451, "post_id": 45339034, "comment_id": 77650068, "body": "<a href=\"https://discuss.kotlinlang.org/t/class-literals-in-kotlin/465/7\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/class-literals-in-kotlin/465/7</a>"}, {"owner": {"reputation": 2792, "user_id": 1197317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a809eed13d4da1cd8797d0578ab6076?s=128&d=identicon&r=PG", "display_name": "fikr4n", "link": "https://stackoverflow.com/users/1197317/fikr4n"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1524196883, "post_id": 45339034, "comment_id": 86883099, "body": "@Miha_x64 &#39;s answer is the answer, thanks; as I asked about &quot;why&quot; instead of &quot;how&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 3163, "user_id": 1690017, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f4227236924d10a1c31e13c0857f398c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/1690017/david"}, "edited": false, "score": 0, "creation_date": 1588848150, "post_id": 45341542, "comment_id": 109060291, "body": "why doesn&#39;t the language implemented getKClass() instead? and accordingly getJavaClass()???!"}, {"owner": {"reputation": 3141, "user_id": 3886961, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/772368ba3e38aa724fc0a4da29e977fe?s=128&d=identicon&r=PG&f=1", "display_name": "kiedysktos", "link": "https://stackoverflow.com/users/3886961/kiedysktos"}, "edited": false, "score": 1, "creation_date": 1591258504, "post_id": 45341542, "comment_id": 109988655, "body": "maybe they didn&#39;t want to be so influenced by Java :)"}, {"owner": {"reputation": 2083, "user_id": 574263, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/GMiDA.jpg?s=128&g=1", "display_name": "mjaggard", "link": "https://stackoverflow.com/users/574263/mjaggard"}, "edited": false, "score": 0, "creation_date": 1608205820, "post_id": 45341542, "comment_id": 115514905, "body": "This doesn&#39;t answer the question, which was &quot;why&quot;"}], "tags": [], "owner": {"reputation": 8060, "user_id": 3834036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEZNI.png?s=128&g=1", "display_name": "Lior Bar-On", "link": "https://stackoverflow.com/users/3834036/lior-bar-on"}, "is_accepted": false, "score": 36, "last_activity_date": 1518906730, "last_edit_date": 1518906730, "creation_date": 1501130389, "answer_id": 45341542, "question_id": 45339034, "link": "https://stackoverflow.com/questions/45339034/why-getting-class-in-kotlin-using-double-colon/45341542#45341542", "title": "Why getting class in Kotlin using double-colon (::)?", "body": "<p>In Kotlin you can write <a href=\"http://kotlinlang.org/docs/reference/reflection.html#class-references\" rel=\"noreferrer\"><code>Object::class</code></a>, which will give you a <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html\" rel=\"noreferrer\"><code>KClass</code></a>. KClass is not equivalent to the class Class that we know from Java. \nIf you want to get the Java Class class you can write <code>Object::class.java</code> - i.e.:\n<code>println(\"string\"::class.java)</code></p>\n\n<p>Also in java, <code>.class</code> is not a method or a member - it is a special directive for the compiler to access the class.\nI guess each language select the syntax that makes most sense for it, and kotlin's creators decided to use <code>::</code></p>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 4232765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb641f121b5ca37ed58cfbc51bbbf4e7?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4232765/daniel"}, "edited": false, "score": 0, "creation_date": 1594291610, "post_id": 49938744, "comment_id": 111077697, "body": "The link is broken."}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "reply_to_user": {"reputation": 345, "user_id": 4232765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb641f121b5ca37ed58cfbc51bbbf4e7?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4232765/daniel"}, "edited": false, "score": 1, "creation_date": 1594322020, "post_id": 49938744, "comment_id": 111093671, "body": "@Daniel, I&#39;ve re-checked, it works. Maybe it gets loaded too slow (especially on mobile networks) or your internet connection is censored/restricted."}], "tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 14, "last_activity_date": 1524217503, "creation_date": 1524217503, "answer_id": 49938744, "question_id": 45339034, "link": "https://stackoverflow.com/questions/45339034/why-getting-class-in-kotlin-using-double-colon/49938744#49938744", "title": "Why getting class in Kotlin using double-colon (::)?", "body": "<p><code>::</code> in Kotlin is about meta-programming, including method references, property references and class literals.\nSee <a href=\"https://discuss.kotlinlang.org/t/class-literals-in-kotlin/465\" rel=\"noreferrer\">discussion about class literals</a>.</p>\n"}], "owner": {"reputation": 2792, "user_id": 1197317, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a809eed13d4da1cd8797d0578ab6076?s=128&d=identicon&r=PG", "display_name": "fikr4n", "link": "https://stackoverflow.com/users/1197317/fikr4n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13559, "favorite_count": 7, "accepted_answer_id": 49938744, "answer_count": 2, "score": 37, "last_activity_date": 1524217503, "creation_date": 1501112043, "question_id": 45339034, "link": "https://stackoverflow.com/questions/45339034/why-getting-class-in-kotlin-using-double-colon", "title": "Why getting class in Kotlin using double-colon (::)?", "body": "<p>We know that double-colon (<code>::</code>) is used to get function (callable) reference in Kotlin, e.g. <code>String::compareTo</code>, <code>\"string\"::compareTo</code>. </p>\n\n<p>In Java we use <code>SomeClass.class</code> and <code>someInstance.getClass()</code> to get the class. Why in Kotlin we use <code>SomeClass::class</code> and <code>someInstance::class</code> while <code>class</code> is not a function/method?</p>\n\n<pre><code>println(String::compareTo)\n// output: fun kotlin.String.compareTo(kotlin.String): kotlin.Int\nprintln(\"string\".compareTo(\"strong\"))\n// output: -6\nprintln(String::class)\n// output: class kotlin.String\nprintln(\"string\".class)\n// compile error\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 2557, "user_id": 5764553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd0033e9f395f84f4357d0fafd54df1?s=128&d=identicon&r=PG", "display_name": "Andrew Myers", "link": "https://stackoverflow.com/users/5764553/andrew-myers"}, "edited": false, "score": 0, "creation_date": 1501107049, "post_id": 45337711, "comment_id": 77638556, "body": "<a href=\"//meta.stackoverflow.com/q/285551\">Please don&#39;t post your code as an image.</a>"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1501107441, "post_id": 45337711, "comment_id": 77638712, "body": "Is this a serious question? I&#39;d start reading the documentation first"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8326927, "user_type": "registered", "profile_image": "https://graph.facebook.com/2346547885569899/picture?type=large", "display_name": "Karandeep Singh", "link": "https://stackoverflow.com/users/8326927/karandeep-singh"}, "edited": false, "score": 0, "creation_date": 1501169393, "post_id": 45337777, "comment_id": 77671597, "body": "thankyou , but i knew this .... SOMEBODY EDITED MY QUESTION .. actually i want to ask that how a view can be a datatype ? number , string is a datatype but a view ? means"}, {"owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "reply_to_user": {"reputation": 1, "user_id": 8326927, "user_type": "registered", "profile_image": "https://graph.facebook.com/2346547885569899/picture?type=large", "display_name": "Karandeep Singh", "link": "https://stackoverflow.com/users/8326927/karandeep-singh"}, "edited": false, "score": 0, "creation_date": 1501169619, "post_id": 45337777, "comment_id": 77671747, "body": "It&#39;s a class called View. You should look it up in the documentation."}], "tags": [], "owner": {"reputation": 1094, "user_id": 5081265, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/989bdc7ec91fc4e2accea93f2d5bc78a?s=128&d=identicon&r=PG", "display_name": "ecain", "link": "https://stackoverflow.com/users/5081265/ecain"}, "is_accepted": false, "score": 0, "last_activity_date": 1501104651, "creation_date": 1501104651, "answer_id": 45337777, "question_id": 45337711, "link": "https://stackoverflow.com/questions/45337711/meaning-of-view-view/45337777#45337777", "title": "Meaning of view: View", "body": "<p>What you're seeing is the parameters to pass into the function : <code>view:View</code>. It says you pass in a parameter of type <code>View</code> and when you use it in the function you reference it by it's name <code>view</code>.</p>\n\n<p>For example: </p>\n\n<pre><code>fun doubleNumber(num:Int) : Int{\n   return num * num\n}\n</code></pre>\n\n<p>In this function <code>doubleNumber</code> we pass in a parameter of type <code>Int</code> and call it <code>num</code>. You can see that within the function when we want to use that passed in parameter we use it's name <code>num</code>. </p>\n"}], "owner": {"reputation": 1, "user_id": 8326927, "user_type": "registered", "profile_image": "https://graph.facebook.com/2346547885569899/picture?type=large", "display_name": "Karandeep Singh", "link": "https://stackoverflow.com/users/8326927/karandeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1501146238, "creation_date": 1501104356, "last_edit_date": 1501146238, "question_id": 45337711, "link": "https://stackoverflow.com/questions/45337711/meaning-of-view-view", "title": "Meaning of view: View", "body": "<p>What is the meaning of <code>view: View</code> in Kotlin for Android?</p>\n\n<p><img src=\"https://i.stack.imgur.com/7Ne37.png\" alt=\"\"></p>\n"}, {"tags": ["mysql", "spring", "spring-data", "hql", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1629, "user_id": 1250358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/vZ5Gl.png?s=128&g=1", "display_name": "Ben M", "link": "https://stackoverflow.com/users/1250358/ben-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1501129540, "creation_date": 1501129540, "answer_id": 45341405, "question_id": 45337304, "link": "https://stackoverflow.com/questions/45337304/spring-data-creates-inner-join-on-onetomany/45341405#45341405", "title": "Spring Data Creates Inner Join On OneToMany", "body": "<p>You're definitely getting the inner join due to selecting the mapped property <code>b.fooContext</code> in the below</p>\n\n<pre><code>SELECT NEW com.foo.persistence.sql.po.NewFooWithMetadataPO(\n                    b.id,\n                    b.accountId,\n                    bi.profitCenterSegmentation,\n                    b.fooContext\n                )...\n</code></pre>\n\n<p>You're separately outer joining to <code>FooContextPO</code> as <code>bc</code> so if you want to avoid the inner join, you cannot reference the mapped property <code>fooContext</code>. So you'll need to select <code>bc</code> instead. </p>\n\n<p>Is the fact you're only getting 1 record back due to the actual underlying data? Does the SQL its generating when you select <code>bc</code> instead of <code>b.fooContext</code> look incorrect as well? If so... can you share what that sql looks like?</p>\n"}], "owner": {"reputation": 108, "user_id": 2052339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120d3a2e1741f47cda30866934b97442?s=128&d=identicon&r=PG", "display_name": "EJG", "link": "https://stackoverflow.com/users/2052339/ejg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501129540, "creation_date": 1501102711, "question_id": 45337304, "link": "https://stackoverflow.com/questions/45337304/spring-data-creates-inner-join-on-onetomany", "title": "Spring Data Creates Inner Join On OneToMany", "body": "<p>So I am using spring data, and I'm having an issue trying to get a list back for this hibernate query.</p>\n\n<pre><code>interface NewFooWithMetadataDAO : Repository&lt;Foo, Int&gt; {\n    @Query(\"\"\"SELECT NEW com.foo.persistence.sql.po.NewFooWithMetadataPO(\n                    b.id,\n                    b.accountId,\n                    bi.profitCenterSegmentation,\n                    b.fooContext\n                )\n                from\n                    Foo b\n                    left join b.fooIntent bi\n                    left join b.fooContext bc\n                where\n                    account_id = ?1\n                group by\n                    b.id\n    \"\"\")\n    fun findByAccountId(accountId: Int): List&lt;NewFooWithMetadataPO&gt;\n}\n</code></pre>\n\n<p>This query creates a hibernate query like this.</p>\n\n<pre><code>select \n    foo0_.id as col_0_0_, \n    foo0_.account_id as col_1_0_, \n    foo_buc1_.profit_center_segmentation as col_2_0_,\n    . as col_3_0_ \nfrom \n    foo foo0_ \n    left outer join foo_intent foo_buc1_ on foo0_.foo_intent_id=foo_buc1_.id \n    left outer join foo_context_map foocont2_ on foo0_.id=foocont2_.foo_id \n    inner join foo_context_map foocont3_ on foo0_.id=foocont3_.foo_id \nwhere \n    account_id=? \ngroup by foo0_.id\n</code></pre>\n\n<p>Which is a bad query.</p>\n\n<p>I have also tried <code>bc</code> instead of <code>b.fooContext</code> in the HQL, but then I don't get a collection, I get a single FooContextPO.</p>\n\n<p>My Entities are like</p>\n\n<pre><code>@Entity\n@Table(name = \"foo\")\ndata class Foo(\n        @Id\n        val id: Int,\n        @Column(name= \"account_id\")\n        val accountId: Int,\n\n        @OneToOne\n        @JoinColumn(name = \"foo_intent_id\", referencedColumnName = \"id\")\n        @NotFound(action=NotFoundAction.IGNORE)\n        val fooIntent: FooIntentPO,\n\n\n        @OneToMany\n        @JoinColumn(name = \"foo_id\", referencedColumnName = \"id\")\n        @NotFound(action=NotFoundAction.IGNORE)\n        val fooContext: Collection&lt;FooContextPO&gt;\n){\n        @Entity\n        @Table(name = \"foo_intent\")\n        data class FooIntentPO(\n                @Id\n                val id: Int,\n                @Column(name = \"profit_center_segmentation\")\n                val profitCenterSegmentation: String\n        )\n        @Entity\n        @Table(name = \"foo_context_map\")\n        data class FooContextPO(\n                @Id\n                val id: Int,\n                @Column(name = \"foo_id\")\n                val fooId: Int,\n                @OneToOne\n                @JoinColumn(name = \"context_id\", referencedColumnName = \"id\")\n                val context: ContextPO\n        )\n        @Entity\n        @Table(name = \"context\")\n        data class ContextPO (\n                @Id\n                val id: Int,\n                @ManyToOne\n                @JoinColumn(name = \"foo_id\", referencedColumnName = \"id\")\n                val foo: Foo,\n                @Column(name = \"context\")\n                val context: String\n        )\n\n}\n\ndata class NewFooWithMetadataPO(\n        val id: Int,\n        val accountId: Int?,\n        val profitCenterSegmentation: String?,\n        val context: Collection&lt;Foo.FooContextPO&gt;\n)\n</code></pre>\n\n<p>Is there some way for me to get the left join working correctly here without it generating an inner join?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "edited": false, "score": 2, "creation_date": 1501103789, "post_id": 45337014, "comment_id": 77637160, "body": "I definitely forgot about <code>myString.equals(&quot;&quot;)</code>. I guess because I never do that in Java since I was told not to. Thanks for the reminder and clear explanation!"}, {"owner": {"reputation": 3732, "user_id": 1016544, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/08b2ae4d9b56474f6cfbe79fae6688a2?s=128&d=identicon&r=PG", "display_name": "Wahib Ul Haq", "link": "https://stackoverflow.com/users/1016544/wahib-ul-haq"}, "edited": false, "score": 2, "creation_date": 1543403303, "post_id": 45337014, "comment_id": 93904704, "body": "Since Kotlin 1.3, there&#39;s even a new extension function available which is <code>ifBlank</code> and it allows you to assign a default string if your main value is empty"}], "tags": [], "owner": {"reputation": 2225, "user_id": 3474528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bNcDK.png?s=128&g=1", "display_name": "Charles Durham", "link": "https://stackoverflow.com/users/3474528/charles-durham"}, "is_accepted": true, "score": 49, "last_activity_date": 1501101679, "creation_date": 1501101679, "answer_id": 45337014, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin/45337014#45337014", "title": "Checking if string is empty in Kotlin", "body": "<p>Don't use <code>myString == \"\"</code>, in java this would be <code>myString.equals(\"\")</code> which also isn't recommended.</p>\n\n<p><code>isBlank</code> is not the same as <code>isEmpty</code> and it really depends on your use-case.</p>\n\n<p><code>isBlank</code> checks that a char sequence has a 0 length or that all indices are white space. <code>isEmpty</code> only checks that the char sequence length is 0.</p>\n\n<pre><code>/**\n * Returns `true` if this string is empty or consists solely of whitespace characters.\n */\npublic fun CharSequence.isBlank(): Boolean = length == 0 || indices.all { this[it].isWhitespace() }\n\n\n/**\n * Returns `true` if this char sequence is empty (contains no characters).\n */\n@kotlin.internal.InlineOnly\npublic inline fun CharSequence.isEmpty(): Boolean = length == 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "edited": false, "score": 1, "creation_date": 1501103372, "post_id": 45337031, "comment_id": 77636957, "body": "I appreciate you putting it very simply. I could only give an invisible upvote for now though, so cheers! :)"}], "tags": [], "owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "is_accepted": false, "score": 8, "last_activity_date": 1501101737, "creation_date": 1501101737, "answer_id": 45337031, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin/45337031#45337031", "title": "Checking if string is empty in Kotlin", "body": "<p>Use <code>isEmpty</code> when you want to test that a String is exactly equal to the empty string <code>\"\"</code>.</p>\n\n<p>Use <code>isBlank</code> when you want to test that a String is empty or only consists of whitespace (<code>\"\"</code>, <code>\"   \"</code>).</p>\n\n<p>Avoid using <code>== \"\"</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "edited": false, "score": 1, "creation_date": 1501103612, "post_id": 45337465, "comment_id": 77637084, "body": "I&#39;ve also thought of always using isBlank(), but did you know that passwords could actually be just spaces? Of course, that depends on what you&#39;d allow. Thanks for the reminder on nullable String! Here&#39;s an invisible upvote. :D"}, {"owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "reply_to_user": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "edited": false, "score": 0, "creation_date": 1501103833, "post_id": 45337465, "comment_id": 77637183, "body": "Depends on the situation, but I would assume that an only blank space password would be disallowed by most websites/backends. Then again, I&#39;ve never tried it! But +1 for extreme edge cases"}], "tags": [], "owner": {"reputation": 3573, "user_id": 5564847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aqnwlPrpnW0/AAAAAAAAAAI/AAAAAAAAABg/kED99SX86V0/photo.jpg?sz=128", "display_name": "Eric Bachhuber", "link": "https://stackoverflow.com/users/5564847/eric-bachhuber"}, "is_accepted": false, "score": 27, "last_activity_date": 1600336373, "last_edit_date": 1600336373, "creation_date": 1501103275, "answer_id": 45337465, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin/45337465#45337465", "title": "Checking if string is empty in Kotlin", "body": "<p>For <code>String?</code> (nullable String) datatype, I use <code>.isNullOrBlank()</code></p>\n<p>For <code>String</code>, I use <code>.isBlank()</code></p>\n<p>Why? Because most of the time, I do not want to allow Strings with whitespace (and <code>.isBlank()</code> checks whitespace as well as empty String). If you don't care about whitespace, use <code>.isNullorEmpty()</code> and <code>.isEmpty()</code> for <code>String?</code> and <code>String</code>, respectively.</p>\n"}, {"tags": [], "owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "is_accepted": false, "score": 2, "last_activity_date": 1563975432, "creation_date": 1563975432, "answer_id": 57184294, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin/57184294#57184294", "title": "Checking if string is empty in Kotlin", "body": "<p>You can use <code>isNullOrBlank()</code> to check is a string is null or empty. This method considers spaces only strings to be empty.</p>\n\n<p>Here is a usage example:</p>\n\n<pre><code>val s: String? = null\nprintln(s.isNullOrBlank())\nval s1: String? = \"\"\nprintln(s1.isNullOrBlank())\nval s2: String? = \"     \"\nprintln(s2.isNullOrBlank())\nval s3: String? = \"  a \"\nprintln(s3.isNullOrBlank())\n</code></pre>\n\n<p>The output of this snippet is:</p>\n\n<pre><code>true\ntrue\ntrue\nfalse\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 3115160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100003274868454/picture?type=large", "display_name": "Deepak Ror", "link": "https://stackoverflow.com/users/3115160/deepak-ror"}, "is_accepted": false, "score": 4, "last_activity_date": 1566889140, "creation_date": 1566889140, "answer_id": 57669210, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin/57669210#57669210", "title": "Checking if string is empty in Kotlin", "body": "<p>There are two methods available in Kotlin.\n1. isNullOrBlank()\n2. isNullOrEmpty()</p>\n\n<p>And the difference is </p>\n\n<pre><code>    data = \" \" // this is a text with blank space \n\n    println(data.isNullOrBlank()?.toString())  //true\n    println(data.isNullOrEmpty()?.toString())  //false\n</code></pre>\n"}], "owner": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29994, "favorite_count": 4, "accepted_answer_id": 45337014, "answer_count": 5, "score": 41, "last_activity_date": 1600336373, "creation_date": 1501101468, "question_id": 45336954, "link": "https://stackoverflow.com/questions/45336954/checking-if-string-is-empty-in-kotlin", "title": "Checking if string is empty in Kotlin", "body": "<p>In Java, we've always been reminded to use <code>myString.isEmpty()</code> to check whether a String is empty. In Kotlin however, I find that you can use either <code>myString == \"\"</code> or <code>myString.isEmpty()</code> or even <code>myString.isBlank()</code>.</p>\n\n<p>Are there any guidelines/recommendations on this? Or is it simply \"anything that rocks your boat\"?</p>\n\n<p>Thanks in advance for feeding my curiosity. :D</p>\n"}, {"tags": ["java", "oop", "kotlin"], "comments": [{"owner": {"reputation": 4480, "user_id": 1440057, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TBIqJ.jpg?s=128&g=1", "display_name": "Nikhil Vartak", "link": "https://stackoverflow.com/users/1440057/nikhil-vartak"}, "edited": false, "score": 0, "creation_date": 1501091574, "post_id": 45333916, "comment_id": 77630406, "body": "<i>Alert</i> Those are not DTOs. Either separate behavior from them or call them something else, not DTO."}, {"owner": {"reputation": 1275, "user_id": 44605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cuxry.png?s=128&g=1", "display_name": "AlexC", "link": "https://stackoverflow.com/users/44605/alexc"}, "reply_to_user": {"reputation": 4480, "user_id": 1440057, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TBIqJ.jpg?s=128&g=1", "display_name": "Nikhil Vartak", "link": "https://stackoverflow.com/users/1440057/nikhil-vartak"}, "edited": false, "score": 0, "creation_date": 1501092502, "post_id": 45333916, "comment_id": 77630980, "body": "@niksofteng Why are they not DTOs? The objects exist to transfer data from one source to another, they may be used to transfer data from one object type to another, who cares.  In my context they are DTOs (and I am only showing code essential to my question).  Did you understand my question?"}], "answers": [{"comments": [{"owner": {"reputation": 1275, "user_id": 44605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cuxry.png?s=128&g=1", "display_name": "AlexC", "link": "https://stackoverflow.com/users/44605/alexc"}, "edited": false, "score": 0, "creation_date": 1501162292, "post_id": 45338092, "comment_id": 77665840, "body": "Unfortunately this does not work, the toString does not get called (and open + abstract is redundant).  What is happening is that Derived class is a &#39;data class&#39; which generates a toString implicitly and does not call this method.  I edited the question with this to see if there is more that can be done to make it work."}, {"owner": {"reputation": 1275, "user_id": 44605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cuxry.png?s=128&g=1", "display_name": "AlexC", "link": "https://stackoverflow.com/users/44605/alexc"}, "edited": false, "score": 0, "creation_date": 1501162514, "post_id": 45338092, "comment_id": 77666030, "body": "I suspect this may be a limitation of the language where deriving data class from base will effectively hide methods that are automatically generated by the data class (not sure but it seems that way)."}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 0, "last_activity_date": 1501185430, "last_edit_date": 1501185430, "creation_date": 1501106153, "answer_id": 45338092, "question_id": 45333916, "link": "https://stackoverflow.com/questions/45333916/generated-tostring-method-to-include-members-from-base-class/45338092#45338092", "title": "Generated toString method to include members from base class?", "body": "<p>Override <code>toString</code> in <code>BaseDto</code> with a reflection call like the following (<a href=\"https://stackoverflow.com/questions/40862207/kotlin-generate-tostring-for-a-non-data-class\">credit to @junique</a> for the <code>reflectionToString()</code> code example)...</p>\n\n<pre><code>import kotlin.reflect.*\nimport kotlin.collections.*\nimport java.lang.reflect.Modifier\n\nabstract class BaseDto(\n        var id: Long = 0L\n) {\n    open protected fun fromResultSet(rs: ResultSet) {\n        this.id = rs.id\n    }\n\n    override open public fun toString() = reflectionToString(this)\n\n    fun reflectionToString(obj: Any?): String {\n        if(obj == null) {\n            return \"null\"\n        }\n        val s = mutableListOf&lt;String&gt;()\n        var clazz: Class&lt;in Any&gt;? = obj.javaClass\n        while (clazz != null) {\n            for (prop in clazz.declaredFields.filterNot { Modifier.isStatic(it.modifiers) }) {\n                prop.isAccessible = true\n                s += \"${prop.name}=\" + prop.get(obj)?.toString()?.trim()\n            }\n            clazz = clazz.superclass\n        }\n        return \"${obj.javaClass.simpleName}=[${s.joinToString(\", \")}]\"\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I tested this by creating a regular <code>class</code> instead of a <code>data class</code>.  It doesn't work for a <code>data class</code>.  Prior to 1.1., <code>data classes</code> could not even extend other classes (but they could implement interfaces).  More and more, I am agreeing with the OP.</p>\n"}], "owner": {"reputation": 1275, "user_id": 44605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Cuxry.png?s=128&g=1", "display_name": "AlexC", "link": "https://stackoverflow.com/users/44605/alexc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501185430, "creation_date": 1501090606, "last_edit_date": 1501162409, "question_id": 45333916, "link": "https://stackoverflow.com/questions/45333916/generated-tostring-method-to-include-members-from-base-class", "title": "Generated toString method to include members from base class?", "body": "<p>I am trying to build a DTO (data-transfer-object) classes in Kotlin to be called from a Java application.  Given following code:</p>\n\n<p><em>BaseDto.kt</em></p>\n\n<pre><code>package sandbox.KotlinDataObjects\n\nimport org.apache.commons.lang3.builder.ToStringBuilder\nimport java.sql.ResultSet\nimport java.sql.SQLException\n\n/**\n * Base DTO\n * (JSON/XML serialization code removed for clarity)\n */\nabstract class BaseDto(\n        var id: Long = 0\n) {\n    @Throws(SQLException::class)\n    open protected fun fromResultSet(rs: ResultSet) {\n        this.id = rs.getLong(\"id\")\n    }\n\n    /**\n     * Override toString and use StringBuilder\n     * Since DataObject may be one of many objects based on BaseDto\n     *   we want to avoid doing this in every data class\n     * Derived class seems to generate a toString and this never gets\n     *   called, this is the issue I believe\n     */\n    override fun toString(): String {\n        return ToStringBuilder.reflectionToString(this)\n    }\n}\n</code></pre>\n\n<p><em>DataObject.kt</em></p>\n\n<pre><code>package sandbox.KotlinDataObjects\n\nimport org.apache.commons.lang3.builder.ToStringBuilder\nimport java.sql.ResultSet\n\ndata class DataObject(\n        var name: String = \"\"\n) : BaseDto() {\n    override fun fromResultSet(rs: ResultSet) {\n        super.fromResultSet(rs)\n        name = rs.getString(\"name\")\n    }\n}\n</code></pre>\n\n<p><em>Main.java</em></p>\n\n<pre><code>package sandbox.KotlinDataObjects;\n\nimport org.mockito.Mockito;\n\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class Main {\n    /**\n     * Mock ResultSet for testing with columns we are requesting\n     * @return ResultSet\n     * @throws SQLException\n     */\n    private static ResultSet getMockedResultSet() throws SQLException {\n        ResultSet mockedRs = Mockito.mock(ResultSet.class);\n        Mockito.when(mockedRs.getLong(\"id\")).thenReturn(12L);\n        Mockito.when(mockedRs.getString(\"name\")).thenReturn(\"MyName\");\n        return mockedRs;\n    }\n\n    public static void main(String[] args) {\n        try (ResultSet mockedRs = getMockedResultSet()) {\n\n            // Read DataObject from ResultSet (mocked to avoid DB connection)\n            DataObject dobj = new DataObject();\n            dobj.fromResultSet(mockedRs);\n\n            System.out.println(\"toString: dobj=\"+dobj);\n            System.out.println(\"getters: dobj.name=\"+dobj.getName()+\"  dobj.id=\"+dobj.getId());\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>This displays:</p>\n\n<pre><code>toString: dobj2=DataObject(name=MyName)\ngetters: dobj2.name=MyName  dobj2.id=12\n</code></pre>\n\n<p>I would like to include the <em>id</em> field form the BaseDto in the DataObject.toString call.  One option is to override the toString with ToStringBuilder.reflectionToString in DataObject.toSting, but it would have to be added to every object derived from BaseDto.  Is there a way to declare a data object hierarchy that automatically includes members from base classes.  This is doable in java by overriding toString() in the base and using the ToStringBuilder.reflectionToString, in Kotlin the base toString is not called since data object generates its own version of toString which does not call super. </p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2"], "answers": [{"comments": [{"owner": {"reputation": 1176, "user_id": 6108532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-ER-WChilI0c/AAAAAAAAAAI/AAAAAAAACh0/miIzszqnL-c/photo.jpg?sz=128", "display_name": "Tom Wayne", "link": "https://stackoverflow.com/users/6108532/tom-wayne"}, "edited": false, "score": 0, "creation_date": 1501129332, "post_id": 45335299, "comment_id": 77644219, "body": "I updated the code based on your answer. The problem still persists :/ ."}, {"owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "reply_to_user": {"reputation": 1176, "user_id": 6108532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-ER-WChilI0c/AAAAAAAAAAI/AAAAAAAACh0/miIzszqnL-c/photo.jpg?sz=128", "display_name": "Tom Wayne", "link": "https://stackoverflow.com/users/6108532/tom-wayne"}, "edited": false, "score": 0, "creation_date": 1501504979, "post_id": 45335299, "comment_id": 77793172, "body": "@PepaHru\u0161ka It still returns a <code>Single</code>? <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html#flatMap(io.reactivex.functions.Function)\" rel=\"nofollow noreferrer\"><code>Flowable.flatMap()</code></a> and <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html#map(io.reactivex.functions.Function)\" rel=\"nofollow noreferrer\"><code>Flowable.map()</code></a> both return a <code>Flowable</code>, so unless <code>DatabaseRead.permissions()</code> returns a <code>Single</code> instead of a <code>Flowable</code>..."}], "tags": [], "owner": {"reputation": 13134, "user_id": 5115932, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/TUPjU.jpg?s=128&g=1", "display_name": "Bryan", "link": "https://stackoverflow.com/users/5115932/bryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1501505035, "last_edit_date": 1501505035, "creation_date": 1501095394, "answer_id": 45335299, "question_id": 45333511, "link": "https://stackoverflow.com/questions/45333511/different-return-type-in-rxjava-2-updating-from-rxjava1/45335299#45335299", "title": "Different return type in RxJava 2 (updating from RxJava1)", "body": "<p><a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html#toList()\" rel=\"nofollow noreferrer\"><code>toList()</code></a> (which returns a <code>Single</code>) is in the wrong place.</p>\n\n<p>Change it from this:</p>\n\n<pre><code>return DatabaseRead.permissions(groupId)\n        .flatMap {\n            Flowable.fromIterable(it.toSome()).map {\n                // Map code\n            }\n        }\n        .toList()\n        .map {\n            // Map code\n        }\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>return DatabaseRead.permissions(groupId)\n        .flatMap {\n            Flowable.fromIterable(it.toSome()).map {\n                // Map code\n            }.toList()\n        }.map {\n            // Map code\n        }\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 6108532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-ER-WChilI0c/AAAAAAAAAAI/AAAAAAAACh0/miIzszqnL-c/photo.jpg?sz=128", "display_name": "Tom Wayne", "link": "https://stackoverflow.com/users/6108532/tom-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501505035, "creation_date": 1501089352, "last_edit_date": 1501127527, "question_id": 45333511, "link": "https://stackoverflow.com/questions/45333511/different-return-type-in-rxjava-2-updating-from-rxjava1", "title": "Different return type in RxJava 2 (updating from RxJava1)", "body": "<p>I am migrating our app from RxJava 1.x.x to RxJava 2.x.x. I have a problem with one of my method - it returns different return type. I had this method in version 1.x.x :</p>\n\n<pre><code>fun permissionsUsers(groupId: String): Observable&lt;PermissionsUsers?&gt; {\n        return DatabaseRead.permissions(groupId)\n                .flatMap {\n                    Observable.from(it).map {\n                        combineLatest(DatabaseRead.user(it.getId()), Observable.just(it.level), ::UserLevel)\n                    }.toList()\n                }\n                .flatMap {\n                    Observable.combineLatest(it) {\n                        var owner: User? = null\n                        val editPermissions = mutableListOf&lt;User&gt;()\n                        val readOnlyPermissions = mutableListOf&lt;User&gt;()\n                        it.forEach {\n                            it as UserLevel\n                            when (it.level) {\n                                Permission.LEVEL_OWNER -&gt; owner = it.user\n                                Permission.LEVEL_WRITE -&gt; editPermissions.add(it.user)\n                                Permission.LEVEL_READONLY -&gt; readOnlyPermissions.add(it.user)\n                            }\n                        }\n                        PermissionsUsers(checkNotNull(owner, { \"Owner doesn't exist\" }), editPermissions.sortedBy(User::name), readOnlyPermissions.sortedBy(User::name))\n                    }\n                }\n    }\n</code></pre>\n\n<p>As you can see the result type is <code>Observable&lt;PermissionsUsers?&gt;</code>. In RxJava2, the nullable observables are not allowed. I solved this problem with Optional. I also replaced Observable classes with Flowable cause I need to manage Backpressure strategy.  It means that return type is changed from <code>Observable&lt;PermissionsUsers?&gt;</code> to <code>Flowable&lt;Optional&lt;PermissionUsers&gt;&gt;</code>.\nThis is the changed method:</p>\n\n<pre><code>fun permissionsUsers(groupId: String): Flowable&lt;Optional&lt;PermissionsUsers&gt;&gt; {\n        return DatabaseRead.permissions(groupId)\n                .flatMap {\n                    Flowable.fromIterable(it.toSome()).map {\n                        combineLatest(DatabaseRead.user(it.getId()), Flowable.just(it.level.toOptional()), ::UserLevel)\n                    }.toList()\n                }\n                .map {\n                    Flowable.combineLatest(it) {\n                        var owner: User? = null\n                        val editPermissions = mutableListOf&lt;User&gt;()\n                        val readOnlyPermissions = mutableListOf&lt;User&gt;()\n                        it.forEach {\n                            it as UserLevel\n                            when (it.level) {\n                                Permission.LEVEL_OWNER -&gt; owner = it.user\n                                Permission.LEVEL_WRITE -&gt; editPermissions.add(it.user)\n                                Permission.LEVEL_READONLY -&gt; readOnlyPermissions.add(it.user)\n                            }\n                        }\n                        PermissionsUsers(checkNotNull(owner, { \"Owner doesn't exist\" }), editPermissions.sortedBy(User::name), readOnlyPermissions.sortedBy(User::name)).toOptional()\n                    }\n                }\n    }\n</code></pre>\n\n<p>The problem is that now the required return type is wrapped to extra Single. So it looks like this: <code>Single&lt;Flowable&lt;Optional&lt;PermissionsUsers&gt;&gt;&gt;</code><br>\ninstead of <code>Flowable&lt;Optional&lt;PermissionsUsers&gt;&gt;</code>. Do you have any idea how to remove that Single? I cannot change the return type.</p>\n"}, {"tags": ["java", "firebase", "firebase-realtime-database", "listener", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 1821809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1VGXk.png?s=128&g=1", "display_name": "Olmectron", "link": "https://stackoverflow.com/users/1821809/olmectron"}, "edited": false, "score": 0, "creation_date": 1501087957, "post_id": 45333038, "comment_id": 77628078, "body": "Sorry, as you see, my previousChildName are all called p1, and after checking my code twice I don&#39;t see where did I use it. I&#39;m always calling only p0, which is the DataSnapshot.  Would you please point me to the exact line you&#39;re talking about?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 78, "user_id": 1821809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1VGXk.png?s=128&g=1", "display_name": "Olmectron", "link": "https://stackoverflow.com/users/1821809/olmectron"}, "edited": false, "score": 0, "creation_date": 1501089777, "post_id": 45333038, "comment_id": 77629296, "body": "A little bit late but figure it out. Please see my updated answer."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 2, "last_activity_date": 1501089648, "last_edit_date": 1501089648, "creation_date": 1501087771, "answer_id": 45333038, "question_id": 45332937, "link": "https://stackoverflow.com/questions/45332937/firebase-sdk-in-kotlin-onchildchanged-not-firing-on-first-child-in-list/45333038#45333038", "title": "Firebase SDK in Kotlin - onChildChanged not firing on first child in list", "body": "<p>This is happening because you are using the <code>p1 : String</code> and not the <code>p1 : String?</code>. The String is actually the <code>previousChildName</code> and that's why you are getting that.</p>\n\n<p>Because Kotlin does not have <code>NullPointerException</code>, the practice is to use question mark (<code>?</code>) after the String like this: <code>p1: String?</code></p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 1821809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1VGXk.png?s=128&g=1", "display_name": "Olmectron", "link": "https://stackoverflow.com/users/1821809/olmectron"}, "is_accepted": true, "score": 1, "last_activity_date": 1501089156, "creation_date": 1501089156, "answer_id": 45333436, "question_id": 45332937, "link": "https://stackoverflow.com/questions/45332937/firebase-sdk-in-kotlin-onchildchanged-not-firing-on-first-child-in-list/45333436#45333436", "title": "Firebase SDK in Kotlin - onChildChanged not firing on first child in list", "body": "<p>Thanks to a comment by @Alex Mamo, I addressed my attention to the previousChildName params, and there was the problem that had me trapped for hours!</p>\n\n<p>Given Kotlin's default's behavior about not allowing Non-null references in variables without a \"?\" at the end, the onChildChanged method wasn't fired only on my first item because the previousChildName for it was actually null. </p>\n\n<p>So, I changed <code>p1: String</code> to <code>p1: String?</code> and problem solved!  </p>\n\n<p>It didn't work like this:</p>\n\n<pre><code>override fun onChildChanged(p0: DataSnapshot, p1: String) { ... }\n</code></pre>\n\n<p>It works this way!:</p>\n\n<pre><code>override fun onChildChanged(p0: DataSnapshot, p1: String?) { ... }\n</code></pre>\n"}], "owner": {"reputation": 78, "user_id": 1821809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1VGXk.png?s=128&g=1", "display_name": "Olmectron", "link": "https://stackoverflow.com/users/1821809/olmectron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 1, "accepted_answer_id": 45333436, "answer_count": 2, "score": 1, "last_activity_date": 1501089648, "creation_date": 1501087443, "last_edit_date": 1501087796, "question_id": 45332937, "link": "https://stackoverflow.com/questions/45332937/firebase-sdk-in-kotlin-onchildchanged-not-firing-on-first-child-in-list", "title": "Firebase SDK in Kotlin - onChildChanged not firing on first child in list", "body": "<p>I'm developing a server side app using Kotlin for managing my list of web customers in Firebase. I've successfully added the Java Firebase Admin SDK to my Kotlin and have gotten a functional connection with my Realtime Database.</p>\n\n<p>However, I just noticed one problem. I added a ChildEventListener for listening to changes to their data, and it works nice on every customer but the first one in the list. No matter if I order the data or no with \"orderBy\", the first queried item never receives a ChildChanged callback when actually edited in the database.</p>\n\n<pre><code>var ref=FirebaseDatabase.getInstance().getReference(\"web-\ncustomers\").orderByChild(\"displayName\")\n    ref.addChildEventListener(object:ChildEventListener{\n        override fun onCancelled(p0: DatabaseError?) {\n                if(p0!=null)\n            println(p0.message)\n        }\n\n        override fun onChildMoved(p0: DataSnapshot?, p1: String?) {\n\n            println(\"A child moved !!!!!!!!!!!!!!!!!!\")\n        }\n\n        override fun onChildChanged(p0: DataSnapshot, p1: String) {\n                println(\"A child changed !!!!!!!!!!!!!!!!!!\")\n                val key=p0.key as String\n                println(\"A customer changed: \"+key)\n                for(value:HashMap&lt;String,Any&gt; in list){\n                    println(value.get(\".key\") as String+\": \"+value.get(\"displayName\") as String)\n                    if((value.get(\".key\") as String).equals(key)){\n                        val valor=p0.value as HashMap&lt;String,Any&gt;\n\n                        for(llave in valor.keys){\n                            val dato=valor.get(llave) as Any\n\n                            value.put(llave,dato)\n\n                        }\n\n                        println(\"Customer \"+valor.get(\"displayName\") as String+\" modified!!!!!!\")\n                        refresh()\n                        break\n                    }\n                }\n\n        }\n\n        override fun onChildAdded(p0: DataSnapshot, p1: String?) {\n\n            println(\"A child added !!!!!!!!!!!!!!!!!!\")\n            val value=p0.value as HashMap&lt;String,Any&gt;\n            value.put(\".key\",p0.key as String)\n            list.add(value)\n        }\n\n        override fun onChildRemoved(p0: DataSnapshot?) {\n            println(\"A child removed !!!!!!!!!!!!!!!!!!\")\n\n        }\n\n\n    })\n</code></pre>\n\n<p>I thought there could be some problem with the data in my customers, so it crashed without even throwing an exception, but even after adding a  single println for checking a ChildChanged callback was fired, it doesn't do a thing with the first customer in the list!</p>\n\n<p>I've done a similar code in the past for Java (without Kotlin) and they always worked great.</p>\n\n<p>I'm using latest Firebase Java SDK version, 5.2.0.</p>\n\n<p>Has anyone experienced a similar error?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 290336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f0ba137554699944422ce581eb57275?s=128&d=identicon&r=PG", "display_name": "SirGregg", "link": "https://stackoverflow.com/users/290336/sirgregg"}, "edited": false, "score": 0, "creation_date": 1501088725, "post_id": 45333069, "comment_id": 77628612, "body": "Aaaah so a generic method is what I&#39;ve been missing... That seems to solve it, thanks!"}], "tags": [], "owner": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "is_accepted": true, "score": 0, "last_activity_date": 1501087877, "creation_date": 1501087877, "answer_id": 45333069, "question_id": 45332853, "link": "https://stackoverflow.com/questions/45332853/invoking-methods-on-interfaces-with-generics/45333069#45333069", "title": "Invoking methods on interfaces with generics", "body": "<p>Since you are building the <code>consumers</code> map, it would be safe to make an unchecked cast to the correct generic EventConsumer type:</p>\n\n<pre><code>fun &lt;T: Event&gt; consume(event: T) {\n    val consumer = consumers[event::class] as? EventConsumer&lt;T&gt;\n\n    consumer?.consume(event)\n}\n</code></pre>\n"}], "owner": {"reputation": 100, "user_id": 290336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f0ba137554699944422ce581eb57275?s=128&d=identicon&r=PG", "display_name": "SirGregg", "link": "https://stackoverflow.com/users/290336/sirgregg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 45333069, "answer_count": 1, "score": 3, "last_activity_date": 1501087877, "creation_date": 1501087169, "question_id": 45332853, "link": "https://stackoverflow.com/questions/45332853/invoking-methods-on-interfaces-with-generics", "title": "Invoking methods on interfaces with generics", "body": "<p>The following is a very simple illustration of what I'm trying to do:</p>\n\n<pre><code>interface Event {\n    fun value(): Int\n}\n\nclass Event1: Event {\n    override fun value() = 1\n}\n\nclass Event2: Event {\n    override fun value() = 2\n}\n\ninterface EventConsumer&lt;T&gt; where T: Event {\n    fun consume(event: T)\n}\n\nclass Event1Consumer: EventConsumer&lt;Event1&gt; {\n    override fun consume(event: Event1) {\n        println(event.value())\n    }\n}\n\nclass Event2Consumer: EventConsumer&lt;Event2&gt; {\n    override fun consume(event: Event2) {\n        println(event.value())\n    }\n}\n\nclass EventManager {\n    private val consumers: Map&lt;KClass&lt;*&gt;, EventConsumer&lt;*&gt;&gt; = mapOf(\n            Event1::class to Event1Consumer(),\n            Event2::class to Event2Consumer()\n    )\n\n    fun consume(event: Event) {\n        val consumer = consumers[event::class]\n\n        consumer?.consume(event)\n    }\n}\n</code></pre>\n\n<p>The final method call (consumer.consume()) is giving me a compiler error</p>\n\n<blockquote>\n  <p>Out-projected type 'EventConsumer&lt;*>?' prohibits the use of 'public\n  abstract fun consume(event: T): Unit defined in EventConsumer'</p>\n</blockquote>\n\n<p>I know that Kotlin is a lot more strict about generics than Java which is probably why it doesn't work, but how would I implement something like this properly?</p>\n"}, {"tags": ["kotlin", "y-combinator"], "answers": [{"tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 2, "last_activity_date": 1501101315, "last_edit_date": 1501101315, "creation_date": 1501100288, "answer_id": 45336637, "question_id": 45331701, "link": "https://stackoverflow.com/questions/45331701/how-to-use-kotlin-to-write-a-y-combinator-function/45336637#45336637", "title": "How to use Kotlin to Write a Y-combinator function?", "body": "<p>In Kotlin, you should introduce an additional interface <code>G</code>, Otherwise you will get the <code>UNCHECKED_CAST</code> warnings, since Kotlin is a <em>statically typed</em> programming language  rather than a dynamic language, for example:</p>\n\n<pre><code>typealias X = (Int) -&gt; Int\ntypealias F = Function1&lt;X, X&gt;\n//        v-------------v--- let G reference G recursively\ninterface G : Function1&lt;G, X&gt;\n\n//  v--- create a G from lazy blocking\nfun G(block: (G) -&gt; X) = object : G {\n    //                          v--- delegate call `block(g)` like as `g(g)`\n    override fun invoke(g: G) = block(g)\n}\n\nfun Y(f: F) = (fun(g: G) = g(g))(G { g -&gt; f({ x -&gt; g(g)(x) }) })\n\nval fact = Y({ rec -&gt; { n -&gt; if (n == 0) 1 else n * rec(n - 1) } })\n</code></pre>\n\n<p>Another version cast a <code>Function1&lt;G, X&gt;</code> to a <code>G</code>, so it should suppress the <em>UNCHECKED_CAST</em> warnings, for example:</p>\n\n<pre><code>typealias X = (Int) -&gt; Int\ntypealias F = Function1&lt;X, X&gt;\ntypealias G = Function1&lt;Any, X&gt;\n\n@Suppress(\"UNCHECKED_CAST\")\n//                                           v--- cast `g` to `G`.\nfun Y(f: F) = (fun(g: Function1&lt;G, X&gt;) = g(g as G))({ g -&gt; f { x -&gt; g(g)(x) } })\n\nval fact = Y({ rec -&gt; { n -&gt; if (n == 0) 1 else n * rec(n - 1) } })\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6681137, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qVduqLBR290/AAAAAAAAAAI/AAAAAAAAAA8/LvWj5llLei8/photo.jpg?sz=128", "display_name": "Jack Chen", "link": "https://stackoverflow.com/users/6681137/jack-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 2, "accepted_answer_id": 45336637, "answer_count": 1, "score": 2, "last_activity_date": 1501101315, "creation_date": 1501083824, "last_edit_date": 1501095920, "question_id": 45331701, "link": "https://stackoverflow.com/questions/45331701/how-to-use-kotlin-to-write-a-y-combinator-function", "title": "How to use Kotlin to Write a Y-combinator function?", "body": "<p>Can I use Kotlin FP (Lambda, function) to write a Y-combinator function?</p>\n\n<pre><code>Y = \u03bbf.(\u03bbx.f (x x)) (\u03bbx.f (x x))\n</code></pre>\n\n<p>In JS: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function Y(f) {\n    return (function (g) {\n        return g(g);\n    })(function (g) {\n        return f(function (x) {\n            return g(g)(x);\n        });\n    });\n}\n\nvar fact = Y(function (rec) {\n    return function (n) {\n        return n == 0 ? 1 : n * rec(n - 1);\n    };\n});\n</code></pre>\n\n<p>In Coffee: </p>\n\n<pre><code>coffee&gt; Y = (f) -&gt; ((x) -&gt; (x x)) ((x) -&gt; (f ((y) -&gt; ((x x) y))))\n[Function]\n\ncoffee&gt; fact = Y (f)  -&gt;(n) -&gt; if n==0 then 1 else n*f(n-1)\n[Function]\n\ncoffee&gt; fact(10)\n3628800\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["java", "android", "kotlin", "apt", "kapt"], "answers": [{"comments": [{"owner": {"reputation": 6020, "user_id": 1965189, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kQn7F.jpg?s=128&g=1", "display_name": "Victor Laerte", "link": "https://stackoverflow.com/users/1965189/victor-laerte"}, "edited": false, "score": 0, "creation_date": 1501085370, "post_id": 45331491, "comment_id": 77626344, "body": "I already did this, but as said in <a href=\"https://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/06/&hellip;</a> javac does not propagate Inherited annotations down the class hierarchies. So I also used RealmClass annotation"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 1, "last_activity_date": 1501083265, "creation_date": 1501083265, "answer_id": 45331491, "question_id": 45329858, "link": "https://stackoverflow.com/questions/45329858/realm-not-generating-realmproxy-classes-in-java-kotlin-project-when-using-kapt/45331491#45331491", "title": "Realm not generating RealmProxy classes in Java/Kotlin project when using kapt", "body": "<p>I believe you should either extend <code>RealmObject</code>:</p>\n\n<pre><code>open class PageModel(...) : RealmObject()\n</code></pre>\n\n<p>Or <a href=\"https://realm.io/docs/java/latest/#realmmodel-interface\" rel=\"nofollow noreferrer\">use the <code>@RealmClass</code> annotation and implement <code>RealmModel</code></a>:</p>\n\n<pre><code>@RealmClass \nopen class PageModel(...) : RealmModel\n</code></pre>\n\n<p>Perhaps the annotation used together with the subclassing is what trips up Realm.</p>\n"}, {"tags": [], "owner": {"reputation": 5958, "user_id": 3286819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojklK.jpg?s=128&g=1", "display_name": "Xavier Rubio Jansana", "link": "https://stackoverflow.com/users/3286819/xavier-rubio-jansana"}, "is_accepted": false, "score": 0, "last_activity_date": 1501171230, "creation_date": 1501171230, "answer_id": 45355765, "question_id": 45329858, "link": "https://stackoverflow.com/questions/45329858/realm-not-generating-realmproxy-classes-in-java-kotlin-project-when-using-kapt/45355765#45355765", "title": "Realm not generating RealmProxy classes in Java/Kotlin project when using kapt", "body": "<p><code>kotlin-kapt</code> plugin instructs gradle to use kapt3. Maybe is this related, and Realm plugin has some issue with it? Shouldn't be the case, as from <a href=\"https://stackoverflow.com/questions/42936257/kapt3-java-io-file-cannot-be-cast-to-java-lang-string#43067311\">this question</a> seems to be working, but is also for an older version of the plugin (which makes it even more weird).</p>\n"}, {"comments": [{"owner": {"reputation": 5555, "user_id": 397244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/48eda17f60e423ebc1bfd92b248bd2dd?s=128&d=identicon&r=PG", "display_name": "kaneda", "link": "https://stackoverflow.com/users/397244/kaneda"}, "edited": false, "score": 1, "creation_date": 1515425309, "post_id": 46975951, "comment_id": 83285300, "body": "Just as a remark, with AS 3.x you don&#39;t have to use <code>retrolambda</code> anymore."}], "tags": [], "owner": {"reputation": 36, "user_id": 8071589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6MiEJQX4fxg/AAAAAAAAAAI/AAAAAAAABxM/ZO99rzsDOWM/photo.jpg?sz=128", "display_name": "Silvio Gustavo", "link": "https://stackoverflow.com/users/8071589/silvio-gustavo"}, "is_accepted": true, "score": 2, "last_activity_date": 1509110505, "last_edit_date": 1509110505, "creation_date": 1509110089, "answer_id": 46975951, "question_id": 45329858, "link": "https://stackoverflow.com/questions/45329858/realm-not-generating-realmproxy-classes-in-java-kotlin-project-when-using-kapt/46975951#46975951", "title": "Realm not generating RealmProxy classes in Java/Kotlin project when using kapt", "body": "<p>I solved the problem by declaring the realm-android plugin as the last one in the list of plugins and also by switching from annotationProcessor to Kapt, like below:</p>\n\n<pre><code>apply plugin: 'me.tatarka.retrolambda'\napply plugin: 'realm-android'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\n\nkapt 'com.android.databinding:compiler:2.3.3'\ncompile group: 'com.google.dagger', name: 'dagger', version: \"${daggerVersion}\"\nkapt group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\nkaptTest group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\nkaptAndroidTest group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 9832581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "abhilasha Yadav", "link": "https://stackoverflow.com/users/9832581/abhilasha-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1548831262, "creation_date": 1548831262, "answer_id": 54434837, "question_id": 45329858, "link": "https://stackoverflow.com/questions/45329858/realm-not-generating-realmproxy-classes-in-java-kotlin-project-when-using-kapt/54434837#54434837", "title": "Realm not generating RealmProxy classes in Java/Kotlin project when using kapt", "body": "<p>//build gradle (app)</p>\n\n<blockquote>\n  <p>apply plugin: 'com.android.application'\n   apply plugin: 'kotlin-kapt'</p>\n  \n  <p>apply plugin: 'kotlin-android' \n  apply plugin : 'realm-android' \n  apply plugin :'kotlin-android-extensions'</p>\n  \n  <p>realm {\n      kotlinExtensionsEnabled = true \n  }</p>\n</blockquote>\n\n<p>//build gradle (project)\n classpath \"io.realm:realm-gradle-plugin:5.9.0\"</p>\n"}], "owner": {"reputation": 6020, "user_id": 1965189, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kQn7F.jpg?s=128&g=1", "display_name": "Victor Laerte", "link": "https://stackoverflow.com/users/1965189/victor-laerte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 46975951, "answer_count": 4, "score": 2, "last_activity_date": 1548831262, "creation_date": 1501079216, "question_id": 45329858, "link": "https://stackoverflow.com/questions/45329858/realm-not-generating-realmproxy-classes-in-java-kotlin-project-when-using-kapt", "title": "Realm not generating RealmProxy classes in Java/Kotlin project when using kapt", "body": "<p>I'm trying to integrate realm in a Java/Kotlin project, but kapt is not generating RealmProxy classes even for .java files</p>\n\n<p>I've updated realm because of <a href=\"https://github.com/realm/realm-java/issues/2491\" rel=\"nofollow noreferrer\">this</a>, but still not working</p>\n\n<p>Gradle app file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\n\nrepositories {\n    maven {\n        url 'https://maven.fabric.io/public'\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\nproject.ext {\n    daggerVersion = '2.2'\n}\n\ndependencies {\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n    kapt \"com.android.databinding:compiler:2.3.3\"\n\n    annotationProcessor group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\n    compile group: 'com.google.dagger', name: 'dagger', version: \"${daggerVersion}\"\n    kapt \"com.google.dagger:dagger-compiler:${daggerVersion}\"\n    provided group: 'org.glassfish', name: 'javax.annotation', version: '10.0-b28'\n    testAnnotationProcessor group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\n    testCompile group: 'com.google.dagger', name: 'dagger', version: \"${daggerVersion}\"\n    androidTestAnnotationProcessor group: 'com.google.dagger', name: 'dagger-compiler', version: \"${daggerVersion}\"\n    androidTestCompile group: 'com.google.dagger', name: 'dagger', version: \"${daggerVersion}\"\n}\n...\n</code></pre>\n\n<p>Project File:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.3-2'\n\n    repositories {\n        jcenter()\n\n        maven {\n            url 'https://maven.fabric.io/public'\n        }\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:3.5.0\"\n    }\n}\n...\n</code></pre>\n\n<p>Java Model file:</p>\n\n<pre><code>@RealmClass\npublic class NotificationEventsModel extends RealmObject {\n\n    @PrimaryKey\n    private long classPK;\n\n    @SerializedName(\"userNotificationEventsCount\")\n    private int eventsCount;\n\n}\n</code></pre>\n\n<p>Kotlin Model file:</p>\n\n<pre><code>@RealmClass open class PageModel(\n\n    open var classPK: Long = 0,\n    open var content: String? = null,\n    @PrimaryKey\n    open var id: Long = 0,\n\n) : RealmObject() {\n\n}\n</code></pre>\n"}, {"tags": ["java", "android", "json", "gson", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 18, "last_activity_date": 1555059280, "last_edit_date": 1555059280, "creation_date": 1501077169, "answer_id": 45328982, "question_id": 45327893, "link": "https://stackoverflow.com/questions/45327893/kotlin-gson-custom-deserializer-for-list/45328982#45328982", "title": "Kotlin Gson custom deserializer for list", "body": "<p>The problem is that Kotlin compiler sees <code>List</code> like a covariant generic type <code>List&lt;out T&gt;</code> and compiles its instantiations as wildcard types, i. e. <code>List&lt;CharSequence&gt;</code> gets compiled as <code>List&lt;? extends Charsequence&gt;</code>.</p>\n\n<p>The solution is either to use <code>MutableList</code> which is invatiant</p>\n\n<pre><code>object : TypeToken&lt;MutableList&lt;Advert&gt;&gt;() {}.type\n</code></pre>\n\n<p>or to supperss wildcard generation</p>\n\n<pre><code>object : TypeToken&lt;List&lt;@JvmSuppressWildcards Advert&gt;&gt;() {}.type\n</code></pre>\n\n<p>More info: <a href=\"https://kotlinlang.org/docs/reference/generics.html#variance\" rel=\"noreferrer\">Kotlin Generics. Variance</a></p>\n"}], "owner": {"reputation": 1002, "user_id": 5576117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qexrw.jpg?s=128&g=1", "display_name": "Mamykin Andrey", "link": "https://stackoverflow.com/users/5576117/mamykin-andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2317, "favorite_count": 1, "accepted_answer_id": 45328982, "answer_count": 1, "score": 7, "last_activity_date": 1555059280, "creation_date": 1501074291, "question_id": 45327893, "link": "https://stackoverflow.com/questions/45327893/kotlin-gson-custom-deserializer-for-list", "title": "Kotlin Gson custom deserializer for list", "body": "<p>How to register custom Json deserializer in Gson?</p>\n\n<p>When I'm register deserializer in java code all works fine, but when I convert Kotlin to Java - deserializer method not called.</p>\n\n<p>Kotlin register code:</p>\n\n<pre><code>val listType: Type = object : TypeToken&lt;List&lt;Advert&gt;&gt;() {}.type\nval gson = GsonBuilder()\n           .registerTypeAdapter(listType, deserializer)\n\nval retrofit = Retrofit.Builder()\n               .addConverterFactory(GsonConverterFactory.create(gson))\n</code></pre>\n\n<p>Java code:</p>\n\n<pre><code>Type listType = new TypeToken&lt;List&lt;Advert&gt;&gt;() {}.getType();\nGson gson = new GsonBuilder()\n            .registerTypeAdapter(listType, deserializer)\n\nRetrofit retrofit = new Retrofit.Builder()\n            .addConverterFactory(GsonConverterFactory.create(gson))\n</code></pre>\n\n<p>Deserializer declaration:</p>\n\n<pre><code>class AdvertsDeserializer : JsonDeserializer&lt;List&lt;Advert&gt;&gt; {\noverride fun deserialize(json: JsonElement?, typeOfT: Type?,\n                         context: JsonDeserializationContext?): List&lt;Advert&gt; {\n</code></pre>\n\n<p>Method calling</p>\n\n<pre><code>// list is List&lt;Advert&gt;\nservice.getAdverts()\n            .subscribe({\n                list -&gt;\n                viewState.showAdvertsList(list)\n            }, {\n                error -&gt;\n                error.printStackTrace()\n            })\n</code></pre>\n\n<p>As I understand - problem in type of Json object(listType), or what I'm doing wrong?</p>\n"}, {"tags": ["c#", "kotlin"], "comments": [{"owner": {"reputation": 6832, "user_id": 6064728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yZxqO.jpg?s=128&g=1", "display_name": "Samvel Petrosov", "link": "https://stackoverflow.com/users/6064728/samvel-petrosov"}, "edited": false, "score": 1, "creation_date": 1501072045, "post_id": 45326938, "comment_id": 77615436, "body": "Replace <code>TimeSpan span = BFreigabe - DateTime.Now;</code>  with <code>TimeSpan span = BFreigabe.Value - DateTime.Now;</code>"}, {"owner": {"reputation": 94444, "user_id": 1663001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NBllQ.jpg?s=128&g=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/1663001/davidg"}, "edited": false, "score": 0, "creation_date": 1501072099, "post_id": 45326938, "comment_id": 77615464, "body": "<code>BFreigabe.Value - DateTime.Now</code> or <code>BFreigabe.GetValueOrDefault() - DateTime.Now</code>"}, {"owner": {"reputation": 6832, "user_id": 6064728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yZxqO.jpg?s=128&g=1", "display_name": "Samvel Petrosov", "link": "https://stackoverflow.com/users/6064728/samvel-petrosov"}, "edited": false, "score": 0, "creation_date": 1501072751, "post_id": 45326938, "comment_id": 77615999, "body": "I don&#39;t understand the meaning of your first <b>Edit</b> you have checking for <code>null</code> before this code so anyway it will not be null, but you are working incorrect with <code>nullable</code> type when you write <code>BFreigabe - DateTime.Now</code>. So there is nothing connected with nullsafety"}, {"owner": {"reputation": 565, "user_id": 3257988, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f664fe43b529736d7eb7906f52fb4179?s=128&d=identicon&r=PG&f=1", "display_name": "Looki", "link": "https://stackoverflow.com/users/3257988/looki"}, "reply_to_user": {"reputation": 6832, "user_id": 6064728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yZxqO.jpg?s=128&g=1", "display_name": "Samvel Petrosov", "link": "https://stackoverflow.com/users/6064728/samvel-petrosov"}, "edited": false, "score": 1, "creation_date": 1501074301, "post_id": 45326938, "comment_id": 77617230, "body": "@Samvel Petrosov in Kotlin when you nullcheck a variable like that it will not throw an error when doing actions requiring null safety because the compiler recognizes that the variable cannot be <code>null</code> any more, meaning the nullable type is automatically casted to a non-nullable type"}, {"owner": {"reputation": 6832, "user_id": 6064728, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yZxqO.jpg?s=128&g=1", "display_name": "Samvel Petrosov", "link": "https://stackoverflow.com/users/6064728/samvel-petrosov"}, "edited": false, "score": 0, "creation_date": 1501074868, "post_id": 45326938, "comment_id": 77617702, "body": "@Looki you problem is not with <code>DateTime?</code> in this case. You problem is that the result of  <code>BFreigabe - DateTime.Now</code> is <code>TimeSpan?</code>. So when you cast <code>DateTime?</code> to <code>DateTime</code> or taking the <code>Value</code> the result becomes <code>TimeSpan</code>. So you can do even this <code>TimeSpan span = (TimeSpan)(BFreigabe - DateTime.Now);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 3257988, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f664fe43b529736d7eb7906f52fb4179?s=128&d=identicon&r=PG&f=1", "display_name": "Looki", "link": "https://stackoverflow.com/users/3257988/looki"}, "edited": false, "score": 0, "creation_date": 1501072681, "post_id": 45327060, "comment_id": 77615944, "body": "I&#39;ve solved the problem by casting <code>DateTime</code> to the Variable"}], "tags": [], "owner": {"reputation": 1694, "user_id": 1681616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d6b5f51553691004057f6770a23a0d?s=128&d=identicon&r=PG", "display_name": "Iqon", "link": "https://stackoverflow.com/users/1681616/iqon"}, "is_accepted": true, "score": 3, "last_activity_date": 1581343625, "last_edit_date": 1581343625, "creation_date": 1501072237, "answer_id": 45327060, "question_id": 45326938, "link": "https://stackoverflow.com/questions/45326938/assert-variable-is-not-null/45327060#45327060", "title": "Assert Variable is not Null", "body": "<p>If you have the previous check, you can access the value. Nullable types always have two properties: <code>HasValue</code> and <code>Value</code>.</p>\n\n<p>You could either cast to <code>DateTime</code> (Without the <code>?</code>) or use the value property.</p>\n\n<pre><code>DateTime? BFreigabe = getDateTime();\nif (!BFreigabe.HasValue == null) \n    return false;\n\nTimeSpan span = BFreigabe.Value - DateTime.Now;\n</code></pre>\n\n<p>Or store the nullable variable in a non nullable variable:</p>\n\n<pre><code>DateTime? BFreigabe = getDateTime();\nif (BFreigabe.HasValue == null) \n{\n    DateTime neverNull = BFreigabe.Value;\n    TimeSpan span = neverNull  - DateTime.Now;\n}\n</code></pre>\n\n<p>This will get full editor support and guarantee that there is no <code>NullReferenceExcpetion</code>.</p>\n\n<p><strong>EDIT</strong>: Because your question states <strong>Assert</strong>.  Assert usually means that we will throw an exception if the state is invalid. </p>\n\n<p>In this case, omit the check for nullness. If you access <code>var.Value</code> while <code>var</code> is null, this will throw a <code>NullReferenceException</code>. This moves the responsibility to the caller.</p>\n\n<p>Another option would be to not use the nullable variable. Either by converting it (see the second listing) or by not accepting Nullable types as a parameter.</p>\n\n<pre><code>function TimeSpan Calc(DateTime time)\n{\n    // here we know for sure, that time is never null\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 5188234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e608e3257484615e2d5b8202b51598?s=128&d=identicon&r=PG&f=1", "display_name": "Vojta Nov&#225;k", "link": "https://stackoverflow.com/users/5188234/vojta-nov%c3%a1k"}, "is_accepted": false, "score": -1, "last_activity_date": 1501072350, "creation_date": 1501072350, "answer_id": 45327108, "question_id": 45326938, "link": "https://stackoverflow.com/questions/45326938/assert-variable-is-not-null/45327108#45327108", "title": "Assert Variable is not Null", "body": "<p>Try to convert NULL value to any value, that is irrelevant.</p>\n\n<pre><code>DateTime? BFreigabe = getDateTime();\nif (BFreigabe == null) return false;\nTimeSpan span = (BFreigabe??DateTime.Now) - DateTime.Now;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 3880685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CkzrZ.jpg?s=128&g=1", "display_name": "Noren", "link": "https://stackoverflow.com/users/3880685/noren"}, "is_accepted": false, "score": 0, "last_activity_date": 1501072443, "creation_date": 1501072443, "answer_id": 45327147, "question_id": 45326938, "link": "https://stackoverflow.com/questions/45326938/assert-variable-is-not-null/45327147#45327147", "title": "Assert Variable is not Null", "body": "<p>How about this?</p>\n\n<pre><code>DateTime? BFreigabe = getDateTime();\nif (!BFreigabe.HasValue) return false;\nDateTime BFreigabeValue = BFreigabe.Value;\nTimeSpan span = BFreigabeValue - DateTime.Now;\n</code></pre>\n"}], "owner": {"reputation": 565, "user_id": 3257988, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f664fe43b529736d7eb7906f52fb4179?s=128&d=identicon&r=PG&f=1", "display_name": "Looki", "link": "https://stackoverflow.com/users/3257988/looki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2235, "favorite_count": 0, "accepted_answer_id": 45327060, "answer_count": 3, "score": 6, "last_activity_date": 1581343625, "creation_date": 1501071888, "last_edit_date": 1501072462, "question_id": 45326938, "link": "https://stackoverflow.com/questions/45326938/assert-variable-is-not-null", "title": "Assert Variable is not Null", "body": "<p>I have a Variable with type <code>DateTime?</code></p>\n\n<p>In a Function I check it for being <code>null</code> and want to use it afterwards without always having to <code>?.</code> every call. In e.g. Kotlin the IDE recognizes a check like that and asserts that the variable cannot be <code>null</code> afterwards. Is there a way to do this in C#?</p>\n\n<pre><code>DateTime? BFreigabe = getDateTime();\nif (BFreigabe == null) return false;\nTimeSpan span = BFreigabe - DateTime.Now; \n//Shows Error because it.BFreigabe has the type DateTime?, even though it can't be null\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>When using </p>\n\n<pre><code>TimeSpan span = BFreigabe.Value - DateTime.Now;\n</code></pre>\n\n<p>instead it works <strong>in this case</strong> because <code>.Value</code> doesn't have nullsafety at all. However, considering that this would compile even without the null check and just produce an error, the general question still remains. How can one persuade C# that a former nullable variable isn't nullable any more?</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>Casting DateTime on the Variable works. </p>\n\n<pre><code>TimeSpan span = (DateTime)BFreigabe - DateTime.Now;\n</code></pre>\n\n<p>Still not as safe as in Kotlin, but similar enough.</p>\n"}, {"tags": ["android", "kotlin", "coroutine", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1501076413, "post_id": 45326818, "comment_id": 77618943, "body": "Can you put the <code>try-catch</code> around <code>launch(){}</code> ?"}, {"owner": {"reputation": 2804, "user_id": 1213197, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/5FAnq.png?s=128&g=1", "display_name": "Oleksii Masnyi", "link": "https://stackoverflow.com/users/1213197/oleksii-masnyi"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1501077705, "post_id": 45326818, "comment_id": 77620072, "body": "@voddan nope, <code>launch</code> executes immediately. but I found a solution"}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 1796236, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/HghlS.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1796236/pablo"}, "edited": false, "score": 0, "creation_date": 1510802315, "post_id": 45329413, "comment_id": 81593037, "body": "Thanks for the info. Are we supposed to do that for every <code>launch</code> or <code>run</code>  usage in our code? In production code, we usually want exceptions to bubble up so that Crashlytics or another logger can catch them. Is there a less... cluttered... way to do that?"}, {"owner": {"reputation": 251, "user_id": 4873342, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6KS69I9P7Ww/AAAAAAAAAAI/AAAAAAAAIXA/DedGB6BaVgU/photo.jpg?sz=128", "display_name": "Eric Ho", "link": "https://stackoverflow.com/users/4873342/eric-ho"}, "edited": false, "score": 0, "creation_date": 1520312900, "post_id": 45329413, "comment_id": 85252572, "body": "i want to ask if we can replace the &quot;launch&quot; func. to the async function to catch the exception in same way??  I have try it and make it fail. At lease i can use the &quot;withContext&quot; function to use your catch exception approach"}], "tags": [], "owner": {"reputation": 2804, "user_id": 1213197, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/5FAnq.png?s=128&g=1", "display_name": "Oleksii Masnyi", "link": "https://stackoverflow.com/users/1213197/oleksii-masnyi"}, "is_accepted": false, "score": 8, "last_activity_date": 1501078165, "creation_date": 1501078165, "answer_id": 45329413, "question_id": 45326818, "link": "https://stackoverflow.com/questions/45326818/cant-catch-exception-throwing-after-kotlin-coroutine-is-cancelled/45329413#45329413", "title": "Can&#39;t catch exception throwing after Kotlin coroutine is cancelled", "body": "<p>Use <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-coroutine-exception-handler.html\" rel=\"noreferrer\"><code>CoroutineExceptionHandler</code></a> as additinoal coroutine context to handle exceptions, for <code>launch</code> or <code>run</code> like </p>\n\n<pre><code>run(CommonPool + CoroutineExceptionHandler({ _, e -&gt;\n   Log.e(\"TAG\", \"CoroutineExceptionHandler\", e)\n})) {\n    ...\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>launch(UI + CoroutineExceptionHandler({ _, e -&gt;\n   Log.e(\"TAG\", \"CoroutineExceptionHandler\", e)\n})) {\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2804, "user_id": 1213197, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/5FAnq.png?s=128&g=1", "display_name": "Oleksii Masnyi", "link": "https://stackoverflow.com/users/1213197/oleksii-masnyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3217, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1501078165, "creation_date": 1501071584, "question_id": 45326818, "link": "https://stackoverflow.com/questions/45326818/cant-catch-exception-throwing-after-kotlin-coroutine-is-cancelled", "title": "Can&#39;t catch exception throwing after Kotlin coroutine is cancelled", "body": "<p>Using <a href=\"https://github.com/Kotlin/kotlinx.coroutines/\" rel=\"nofollow noreferrer\">kotlinx.coroutines</a> lib I can't catch an exception if it was thrown after coroutine is canceled. This leads to app crash. </p>\n\n<pre><code>fun foo() {\n  val job = launch(UI) {\n     try {\n        Log.d(\"TAG\", \"Start coroutine\")\n        run(CommonPool) {\n           Log.d(\"TAG\", \"Start bg task\")\n           // Intentionally make bg task running for a long time\n           SystemClock.sleep(2000)\n           Log.d(\"TAG\", \"Throw bg task exception\")\n           throw RuntimeException(\"Bg task exception\")\n        }\n     } catch (e: Exception) {\n        Log.e(\"TAG\", \"Handle coroutine exception\", e)\n     }\n  }\n\n  launch(UI) {\n     delay(1000)\n     Log.d(\"TAG\", \"Cancel job = ${job.cancel()}\")\n  }\n</code></pre>\n\n<p>}</p>\n\n<p>Running this functions on Android produces the following log output</p>\n\n<pre><code>07-26 15:09:10.038 31518-31518/co.foo.bar D/MainActivity: Start coroutine\n07-26 15:09:10.044 31518-31547/co.foo.bar D/MainActivity: Start bg task\n07-26 15:09:11.046 31518-31518/co.foo.bar D/MainActivity: Cancel job = true\n07-26 15:09:11.047 31518-31518/co.foo.bar E/MainActivity: Handled coroutine exception\n                           java.util.concurrent.CancellationException: Job was cancelled\n                           at kotlinx.coroutines.experimental.JobSupport$CompletedExceptionally.getException(Job.kt:921)\n                           at kotlinx.coroutines.experimental.RunCompletion.afterCompletion(Builders.kt:198)\n                           ...\n                           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)\n07-26 15:09:12.046 31518-31547/co.foo.bar D/MainActivity: Throwing bg task exception\n\n--------- beginning of crash\n07-26 15:09:12.046 31518-31547/co.foo.bar E/AndroidRuntime: FATAL EXCEPTION: ForkJoinPool.commonPool-worker-1\nProcess: co.foo.bar, PID: 31518\n                           java.lang.RuntimeException: Bg task exception\n                           at co.foo.barsample.MainActivity$onCreate$1$job$1$1.doResume(MainActivity.kt:36)\n                           at kotlin.coroutines.experimental.jvm.internal.CoroutineImpl.resume(CoroutineImpl.kt:54)\n                           at kotlinx.coroutines.experimental.DispatchTask.run(CoroutineDispatcher.kt:120)\n                           at java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1383)\n                           at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:256)\n                           at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1123)\n                           at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1961)\n                           at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1909)\n                           at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:128)\n07-26 15:09:12.050 1705-2190/system_process W/ActivityManager:   Force finishing activity co.foo.bar/co.foo.barsample.MainActivity\n</code></pre>\n\n<p>Seems to be calling <code>cancel()</code> throws <code>CancellationException</code> which is caught successfully. But the subsequent <code>RuntimeException</code> is not caught. I suppose the following exceptions after the job is canceled should be ignored by the lib? Or how I can cancel job silently without throwing a <code>CancellationException</code> exception?</p>\n"}, {"tags": ["java", "kotlin", "lint"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501077040, "post_id": 45326364, "comment_id": 77619456, "body": "You may call them <code>load...</code> or <code>fetch...</code> :)"}, {"owner": {"reputation": 1323, "user_id": 1571480, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ad5521e564c79fddb7633d646aad01ce?s=128&d=identicon&r=PG", "display_name": "Pavlus", "link": "https://stackoverflow.com/users/1571480/pavlus"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501089043, "post_id": 45326364, "comment_id": 77628810, "body": "both these are already used in other contexts"}], "answers": [{"comments": [{"owner": {"reputation": 1323, "user_id": 1571480, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ad5521e564c79fddb7633d646aad01ce?s=128&d=identicon&r=PG", "display_name": "Pavlus", "link": "https://stackoverflow.com/users/1571480/pavlus"}, "edited": false, "score": 0, "creation_date": 1501088877, "post_id": 45332318, "comment_id": 77628701, "body": "As you noticed, this will disable it for the whole project."}, {"owner": {"reputation": 1323, "user_id": 1571480, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ad5521e564c79fddb7633d646aad01ce?s=128&d=identicon&r=PG", "display_name": "Pavlus", "link": "https://stackoverflow.com/users/1571480/pavlus"}, "edited": false, "score": 0, "creation_date": 1501245636, "post_id": 45332318, "comment_id": 77708444, "body": "Yes, sorry, but it still not answers question. I did not want to suppress inspection for a project, nor file/class/method, because it will disable it for any other property access method on that level and not for exactly specified method everywhere."}], "tags": [], "owner": {"reputation": 1904, "user_id": 1545952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMD46.jpg?s=128&g=1", "display_name": "Xvolks", "link": "https://stackoverflow.com/users/1545952/xvolks"}, "is_accepted": false, "score": 5, "last_activity_date": 1501255388, "last_edit_date": 1501255388, "creation_date": 1501085514, "answer_id": 45332318, "question_id": 45326364, "link": "https://stackoverflow.com/questions/45326364/suppress-use-property-access-syntax-for-method-or-class/45332318#45332318", "title": "Suppress &quot;Use property access syntax&quot; for method or class", "body": "<p>I suppose that you use IntelliJ IDEA.</p>\n\n<p>You can go to <code>Preferences, Editor, Inspection, Kotlin, Accessor call that can...</code> and uncheck it. (Or type <code>property syntax</code> in search filter).</p>\n\n<p>This will disable this warning on your whole project. You may also change the severity to something else that suit your needs.</p>\n\n<p><strong>EDIT</strong>: You can use the <code>@Suppress</code> annotation.</p>\n\n<p>Suppose you have a Java class named <code>A</code> exposing methods:</p>\n\n<ul>\n<li><code>getA()</code> this one is a regular Java bean access, </li>\n<li><code>getB()</code> this one is a network call for example.</li>\n</ul>\n\n<p>You can write:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val a = A()\n    println(a.a)\n    @Suppress(\"UsePropertyAccessSyntax\")\n    print(a.getB())\n}\n</code></pre>\n\n<p><code>@Suppress</code> can be used at several levels. See <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-suppress/index.html\" rel=\"noreferrer\">Documentation</a>. </p>\n\n<p>IntelliJ IDEA has a nice help to suppress those warnings.\n<a href=\"https://i.stack.imgur.com/NF0Hf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NF0Hf.png\" alt=\"Idea screen capture\"></a></p>\n\n<p><strong>EDIT2</strong>:<br>\nDisclaimer : There is an other way to do that, but I will not use it myself as it is ugly and I prefer having a warning than using it.</p>\n\n<p>You can use Kotlin extensions and rename your network getters like this.  </p>\n\n<p>The Java class:</p>\n\n<pre><code>public class A {\n    private int a;\n\n    int getA() {\n        return a;\n    }\n\n    A _getB() {   // Was getB()\n        return this;\n    }\n}\n</code></pre>\n\n<p>The Kotlin file:</p>\n\n<pre><code>fun A.getB() : A {       // Kotlin extension\n    return this._getB()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val a = A()\n    println(a.a)\n    print(a.getB()) // No warning here\n}\n</code></pre>\n"}], "owner": {"reputation": 1323, "user_id": 1571480, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ad5521e564c79fddb7633d646aad01ce?s=128&d=identicon&r=PG", "display_name": "Pavlus", "link": "https://stackoverflow.com/users/1571480/pavlus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1678, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1501255388, "creation_date": 1501070393, "last_edit_date": 1501245778, "question_id": 45326364, "link": "https://stackoverflow.com/questions/45326364/suppress-use-property-access-syntax-for-method-or-class", "title": "Suppress &quot;Use property access syntax&quot; for method or class", "body": "<p>In my project, I have a delegate(written in Java) for fetching data by RPC, most of it methods start with 'get' and some require no parameters, so Kotlin suggests to replace calls to them with property access syntax while they are not fulfilling property semantics (well, because they perform network requests), so I'd like to suppress all such inspections for all these methods usages by default and not in place of every call (yes, I'm aware of <code>@Suppress</code> annotation for blocks, and it works exactly opposite to what I need). </p>\n\n<p>Is there any solution for this except renaming them so they won't start with 'get'?</p>\n"}, {"tags": ["android", "geolocation", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1501060921, "post_id": 45322675, "comment_id": 77607159, "body": "Please post the code as text instead of an image."}], "answers": [{"tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": true, "score": 7, "last_activity_date": 1501065332, "creation_date": 1501065332, "answer_id": 45324476, "question_id": 45322675, "link": "https://stackoverflow.com/questions/45322675/fusedlocationproviderclient-with-service-android-kotlin/45324476#45324476", "title": "FusedLocationProviderClient With Service Android Kotlin", "body": "<p>Class <code>Task</code> (<a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/Task\" rel=\"noreferrer\">https://developers.google.com/android/reference/com/google/android/gms/tasks/Task</a>) have three overloads of method <code>addOnCompleteListener</code>:</p>\n\n<ul>\n<li><code>addOnCompleteListener(OnCompleteListener&lt;TResult&gt; listener)</code></li>\n<li><code>addOnCompleteListener(Activity activity, OnCompleteListener&lt;TResult&gt; listener)</code></li>\n<li><code>addOnCompleteListener(Executor executor, OnCompleteListener&lt;TResult&gt; listener)</code></li>\n</ul>\n\n<p>Your <code>Service</code> is neither <code>Activity</code>, nor <code>Executor</code>. So the two latter overloads are not applicable for you. Just drop the first parameter and use it like that:</p>\n\n<p><code>mFusedLocationClient!!.lastLocation.addOnCompleteListener { task -&gt; \n   //do something\n}\n</code></p>\n"}], "owner": {"reputation": 41, "user_id": 8295666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c21dc87d426f004bc12ef0e47fbe5b?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Ror", "link": "https://stackoverflow.com/users/8295666/deepak-ror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2676, "favorite_count": 0, "accepted_answer_id": 45324476, "answer_count": 1, "score": 3, "last_activity_date": 1538033078, "creation_date": 1501060881, "question_id": 45322675, "link": "https://stackoverflow.com/questions/45322675/fusedlocationproviderclient-with-service-android-kotlin", "title": "FusedLocationProviderClient With Service Android Kotlin", "body": "<p>I am using Fused Api for location update. I am using Fused Api with Activity is working fine. But when i use it within service class its showing  <a href=\"https://i.stack.imgur.com/5Zvjv.png\" rel=\"nofollow noreferrer\">This is my Service class code . Where error occurring</a></p>\n"}, {"tags": ["java", "list", "arraylist", "kotlin", "indexoutofboundsexception"], "answers": [{"comments": [{"owner": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "edited": false, "score": 0, "creation_date": 1501059992, "post_id": 45321440, "comment_id": 77606418, "body": "thank you, I&#39;ve thought that it was similar to Java, now I&#39;ve understood !"}, {"owner": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "edited": false, "score": 0, "creation_date": 1505810038, "post_id": 45321440, "comment_id": 79553618, "body": "sorry for my question, but how to use this structure in a recyclerview? I&#39;ve found the same problem"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "edited": false, "score": 0, "creation_date": 1505832026, "post_id": 45321440, "comment_id": 79568994, "body": "I&#39;m not sure what your problem is in regards to a RecyclerView, but you should post it as a new question."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 11, "last_activity_date": 1501058894, "last_edit_date": 1501058894, "creation_date": 1501057801, "answer_id": 45321440, "question_id": 45321344, "link": "https://stackoverflow.com/questions/45321344/indexoutofboundsexception-for-for-loop-in-kotlin/45321440#45321440", "title": "IndexOutOfBoundsException for for-loop in Kotlin", "body": "<p>Ranges in Kotlin are inclusive, therefore <code>0..foodObjects!!.size</code> starts at <code>0</code> and ends at <code>foodObjects.size</code>, including both ends. This causes the exception when your loop attempts to index the list with its own size, which is one more than the largest valid index.</p>\n\n<p>To create a range that doesn't include the upper bound (like your Java loop), you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/until.html\" rel=\"noreferrer\"><code>until</code></a>:</p>\n\n<pre><code>for(i in 0 until foodObjects!!.size) {\n    // ...\n}\n</code></pre>\n\n<hr>\n\n<p>You could also clean your code up a bit if you did null checks on the collections you're using up front:</p>\n\n<pre><code>if (foodObjects != null &amp;&amp; checked != null &amp;&amp; objectsId != null) {\n    for (i in 0 until foodObjects.size) {\n        if (checked.get(i) == true) {\n            objectsId.add(foodObjects.get(i).objectId)\n        }\n    }\n}\nelse {\n    // handle the case when one of the lists is null\n}\n</code></pre>\n\n<p>And to get rid of having to handle indexes altogether, you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/indices.html\" rel=\"noreferrer\"><code>indices</code></a> property of a list (plus I use the indexing operator here instead of <code>get</code> calls):</p>\n\n<pre><code>for (i in foodObjects.indices) {\n    if (checked[i]) {\n        objectsId.add(foodObjects[i].objectId)\n    }\n}\n</code></pre>\n\n<p>You could also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/for-each-indexed.html\" rel=\"noreferrer\"><code>forEachIndexed</code></a>:</p>\n\n<pre><code>foodObjects.forEachIndexed { i, foodObject -&gt;\n    if (checked[i]) {\n        objectsId.add(foodObject.objectId)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1501059553, "last_edit_date": 1501059553, "creation_date": 1501058741, "answer_id": 45321813, "question_id": 45321344, "link": "https://stackoverflow.com/questions/45321344/indexoutofboundsexception-for-for-loop-in-kotlin/45321813#45321813", "title": "IndexOutOfBoundsException for for-loop in Kotlin", "body": "<p>Take a look at this example from the Kotlin documentation for <a href=\"https://kotlinlang.org/docs/reference/ranges.html\" rel=\"nofollow noreferrer\">ranges</a>:</p>\n\n<pre><code>if (i in 1..10) { // equivalent of 1 &lt;= i &amp;&amp; i &lt;= 10\n    println(i)\n}\n</code></pre>\n\n<p>As you can see </p>\n\n<blockquote>\n  <p>1, 2, 3, 4, 5, 6, 7, 8, 9, 10</p>\n</blockquote>\n\n<p>will be printed. So, the 10 is included.</p>\n\n<p>The highest index of your collection <code>foodObjects</code> is <code>(foodObjects.size() - 1)</code> because it starts with 0.</p>\n\n<p>So, to fix your problem, just do this:</p>\n\n<pre><code>for(i in  0..(foodObjects.size - 1)) { \n   // ...\n}\n</code></pre>\n\n<p>A better way to write this would be:</p>\n\n<pre><code>for((i, element) in foodObjects.withIndex()){\n   // do something with element\n   println(\"The index is $i\")\n}\n</code></pre>\n\n<p>This way you have the element and the index at once and don't need to worry about ranges.</p>\n\n<p>*I removed the null checks for simplicity.</p>\n"}], "owner": {"reputation": 1577, "user_id": 4279905, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b94ec276d9ce3164b3490fdc35a39618?s=128&d=identicon&r=PG&f=1", "display_name": "ste9206", "link": "https://stackoverflow.com/users/4279905/ste9206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4484, "favorite_count": 0, "accepted_answer_id": 45321440, "answer_count": 2, "score": 2, "last_activity_date": 1501059553, "creation_date": 1501057544, "last_edit_date": 1501058897, "question_id": 45321344, "link": "https://stackoverflow.com/questions/45321344/indexoutofboundsexception-for-for-loop-in-kotlin", "title": "IndexOutOfBoundsException for for-loop in Kotlin", "body": "<p>I have two list in Kotlin, of the same size, <code>foodObjects: MutableList&lt;ParseObject&gt;?</code> and <code>checked: MutableList&lt;Boolean&gt;?</code>. I need to do a for cycle and get the objectId from <code>foodObjects</code> every time that an element of <code>checked</code> is true. So it is this in Java:</p>\n\n<pre><code>  for(int i = 0; i&lt; foodObjects.size(); i++) {\n      //here\n  }\n</code></pre>\n\n<p>but in Kotlin, I don't know why, there are some problems. In fact, if I do this:</p>\n\n<pre><code> for(i in  0..foodObjects!!.size)\n {\n     if (checked?.get(i) == true) {\n        objectsId?.add(foodObjects.get(i).objectId)\n     }\n\n }\n</code></pre>\n\n<p>I've got <code>IndexOutOfBoundsException</code> : I don't know why, it continue the cycle also at <code>foodObjects.size</code>. I could do it also with filter and map:</p>\n\n<pre><code>(0..foodObjects!!.size)\n                 .filter { checked?.get(it) == true }\n                 .forEach { objectsId?.add(foodObjects.get(it).objectId) }\n</code></pre>\n\n<p>but I'm giving the same error. I need to stop it using this if:</p>\n\n<pre><code>  for(i in  0..foodObjects!!.size)\n  {\n    if(i &lt; foodObjects.size) {\n       if (checked?.get(i) == true) {\n                     objectsId?.add(foodObjects.get(i).objectId)\n       }\n    }\n  }\n</code></pre>\n\n<p>to get it works.</p>\n\n<p>Everyone could tell me why in Kotlin I need to do it, when in Java it works good?</p>\n"}, {"tags": ["kotlin", "null-check"], "answers": [{"comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1501059138, "post_id": 45321264, "comment_id": 77605759, "body": "I think the code in your question is clear enough. Since you know <code>myNullableString</code> must not be null within the else case, it is safe to use !!. I would rather wait for the update instead of writing some extra function."}], "tags": [], "owner": {"reputation": 2804, "user_id": 1213197, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/5FAnq.png?s=128&g=1", "display_name": "Oleksii Masnyi", "link": "https://stackoverflow.com/users/1213197/oleksii-masnyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1501057297, "creation_date": 1501057297, "answer_id": 45321264, "question_id": 45321263, "link": "https://stackoverflow.com/questions/45321263/any-way-to-tell-kotlin-compiler-that-prior-callable-function-already-did-a-check/45321264#45321264", "title": "Any way to tell Kotlin compiler that prior callable function already did a check for null", "body": "<p>Didn\u2019t see any mentions that there is a way to tell such info to the compiler, but here is a workaround: having function returning null if string is empty and use let?.{} after that</p>\n\n<pre><code>inline fun String?.nullIfBlank(): String? = if (this?.isBlank() ?: true) null else this\n\nval resultingString: String = myNullableString.nullIfBlank()?.let {\n    String.format(it) \n} ?: myNullDefaultString\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 5438558, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0ShxAp5iC7E/AAAAAAAAAAI/AAAAAAAAARM/TM5sLskezaE/photo.jpg?sz=128", "display_name": "sandwwraith", "link": "https://stackoverflow.com/users/5438558/sandwwraith"}, "is_accepted": false, "score": 0, "last_activity_date": 1501171676, "creation_date": 1501171676, "answer_id": 45355930, "question_id": 45321263, "link": "https://stackoverflow.com/questions/45321263/any-way-to-tell-kotlin-compiler-that-prior-callable-function-already-did-a-check/45355930#45355930", "title": "Any way to tell Kotlin compiler that prior callable function already did a check for null", "body": "<p>Compiler can perform smart cast from nullable type to non-nullable only after explicit check expression, like <code>myNullableString != null</code></p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1548804074, "creation_date": 1548804074, "answer_id": 54431117, "question_id": 45321263, "link": "https://stackoverflow.com/questions/45321263/any-way-to-tell-kotlin-compiler-that-prior-callable-function-already-did-a-check/54431117#54431117", "title": "Any way to tell Kotlin compiler that prior callable function already did a check for null", "body": "<p>Kotlin 1.3 introduced a concept called <a href=\"https://kotlinlang.org/docs/reference/whatsnew13.html#contracts\" rel=\"nofollow noreferrer\">contracts</a>. From now on you can tell the compiler that a null check has been done. It has already been implemented for all necessary functions in the standard library (for <code>isNullOrBlank()</code> too).</p>\n\n<p>So, your example would compile now without <code>!!</code></p>\n\n<pre><code>val myNullableString: String? = null\n\nval result = if (myNullableString.isNullOrBlank()) {\n    \"default\"\n} else {\n    String.format(myNullableString, \"hello\") // myNullableString is smart-casted to String\n}\n</code></pre>\n"}], "owner": {"reputation": 2804, "user_id": 1213197, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/5FAnq.png?s=128&g=1", "display_name": "Oleksii Masnyi", "link": "https://stackoverflow.com/users/1213197/oleksii-masnyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54431117, "answer_count": 3, "score": 2, "last_activity_date": 1548804074, "creation_date": 1501057297, "question_id": 45321263, "link": "https://stackoverflow.com/questions/45321263/any-way-to-tell-kotlin-compiler-that-prior-callable-function-already-did-a-check", "title": "Any way to tell Kotlin compiler that prior callable function already did a check for null", "body": "<p>If I have a code fragment like</p>\n\n<pre><code>val myNullableString : String?\nval resultingString = if (myNullableString.isNullOrBlank()) \nmyNullDefaultString else String.format(myNullableString!!, someOtherString)\n</code></pre>\n\n<p>I have to use <code>myNullableString!!</code> in <code>String.format()</code> since the compiler would not be able to figure out that <code>isNullOrBlank()</code> includes a null-check. Is this correct or is there any way to tell the compiler that a function will infer that the instance is not null?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 200, "user_id": 5588873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12649ed505eda2fb7de1b4cbc3a03cb?s=128&d=identicon&r=PG&f=1", "display_name": "swapnil", "link": "https://stackoverflow.com/users/5588873/swapnil"}, "edited": false, "score": 0, "creation_date": 1501047555, "post_id": 45317944, "comment_id": 77598492, "body": "Can you tell me why you want to do this. Kotlin has better way to handle null values using String? (Kotlin optionals)."}, {"owner": {"reputation": 11142, "user_id": 2229438, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/629fdde67cb23f9d3799635d89c7b250?s=128&d=identicon&r=PG", "display_name": "Grzegorz Piwowarek", "link": "https://stackoverflow.com/users/2229438/grzegorz-piwowarek"}, "reply_to_user": {"reputation": 200, "user_id": 5588873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c12649ed505eda2fb7de1b4cbc3a03cb?s=128&d=identicon&r=PG&f=1", "display_name": "swapnil", "link": "https://stackoverflow.com/users/5588873/swapnil"}, "edited": false, "score": 2, "creation_date": 1501052135, "post_id": 45317944, "comment_id": 77600951, "body": "@swapnil he explained that in the first sentence he wrote"}], "answers": [{"tags": [], "owner": {"reputation": 2613, "user_id": 1388837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/15d773b2cb0e4c95c615b6ad13b0f20d?s=128&d=identicon&r=PG", "display_name": "bennyl", "link": "https://stackoverflow.com/users/1388837/bennyl"}, "is_accepted": true, "score": 6, "last_activity_date": 1501047366, "creation_date": 1501047366, "answer_id": 45318232, "question_id": 45317944, "link": "https://stackoverflow.com/questions/45317944/how-to-get-optionalstring-from-string-and-string-in-kotlin/45318232#45318232", "title": "How to get Optional&lt;String&gt; from String? and String in Kotlin", "body": "<p>just create one that wrap the string value, in your case: </p>\n\n<pre><code>override fun getCurrentAuditor(): Optional&lt;String&gt; {\n    val userName = SecurityUtils.currentUserLogin\n    return Optional.of(userName ?: SYSTEM_ACCOUNT)\n}\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 2501333, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18cd174b715cba90515137a97766618c?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2501333/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 45318232, "answer_count": 1, "score": 1, "last_activity_date": 1501047366, "creation_date": 1501045928, "question_id": 45317944, "link": "https://stackoverflow.com/questions/45317944/how-to-get-optionalstring-from-string-and-string-in-kotlin", "title": "How to get Optional&lt;String&gt; from String? and String in Kotlin", "body": "<p>I have overridden a function in Kotlin that returns an <code>Optional&lt;String&gt;</code>.  How do I convert <code>String?</code> and <code>String</code> types into <code>Optional&lt;String&gt;</code>?</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>override fun getCurrentAuditor(): Optional&lt;String&gt; {\n    val userName = SecurityUtils.currentUserLogin\n    return userName ?: SYSTEM_ACCOUNT\n}\n</code></pre>\n\n<p>From the above example:</p>\n\n<p><code>userName</code> is a <code>String?</code></p>\n\n<p><code>SYSTEM_ACCOUNT</code> is a <code>String</code></p>\n\n<p>I'm getting errors on the return statement that both variables are not <code>Optional&lt;String&gt;</code> types.</p>\n"}, {"tags": ["java", "android", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "edited": false, "score": 0, "creation_date": 1501054691, "post_id": 45320361, "comment_id": 77602697, "body": "here:  (dog)Inject     internal lateinit var store: KotlinReactiveEntityStore&lt;T&gt;"}, {"owner": {"reputation": 163, "user_id": 3967272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2deb95c3d4fdbb1f839fed62d6ff161?s=128&d=identicon&r=PG&f=1", "display_name": "Guliash", "link": "https://stackoverflow.com/users/3967272/guliash"}, "reply_to_user": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "edited": false, "score": 1, "creation_date": 1501054924, "post_id": 45320361, "comment_id": 77602861, "body": "Yes, you marked field as injectable, but you create an instance manually, don&#39;t you? So it is up to you to set this field. Dagger will inject field if it creates an instance."}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 1, "creation_date": 1501054929, "post_id": 45320361, "comment_id": 77602866, "body": "If you annotate fields with <code>@Inject</code> you have to call <code>component.inject(myObject)</code> to inject its fields. You did not include any code that hints on you doing so."}, {"owner": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "edited": false, "score": 0, "creation_date": 1501055105, "post_id": 45320361, "comment_id": 77602988, "body": "@Guliash no, how can i do it? I thought fun <b>provideStoreDB</b> should call automatically when i defenition variable <b>store</b> as Inject"}, {"owner": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1501055579, "post_id": 45320361, "comment_id": 77603315, "body": "@David Medenjak can you give an example? I thought fun provideStoreDB from DI should call automatically"}, {"owner": {"reputation": 163, "user_id": 3967272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2deb95c3d4fdbb1f839fed62d6ff161?s=128&d=identicon&r=PG&f=1", "display_name": "Guliash", "link": "https://stackoverflow.com/users/3967272/guliash"}, "reply_to_user": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "edited": false, "score": 1, "creation_date": 1501055820, "post_id": 45320361, "comment_id": 77603493, "body": "@Loxpozizni, why don&#39;t you add KotlinReactiveEntityStore as a parameter to constructor? The in you module add argument for provides method, and it should be fun."}], "tags": [], "owner": {"reputation": 163, "user_id": 3967272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2deb95c3d4fdbb1f839fed62d6ff161?s=128&d=identicon&r=PG&f=1", "display_name": "Guliash", "link": "https://stackoverflow.com/users/3967272/guliash"}, "is_accepted": false, "score": 1, "last_activity_date": 1501054506, "creation_date": 1501054506, "answer_id": 45320361, "question_id": 45316994, "link": "https://stackoverflow.com/questions/45316994/provide-methods-in-dagger-2/45320361#45320361", "title": "Provide methods in Dagger 2", "body": "<p>I can't see where you inject KotlinReactiveEntityStore in PersistentDatabase. You just create an instance in the provides method, but no injection is done. </p>\n"}], "owner": {"reputation": 532, "user_id": 3274299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/36fb3494dca1629f2a914f5851758cd7?s=128&d=identicon&r=PG&f=1", "display_name": "Tipok", "link": "https://stackoverflow.com/users/3274299/tipok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501054506, "creation_date": 1501040166, "question_id": 45316994, "link": "https://stackoverflow.com/questions/45316994/provide-methods-in-dagger-2", "title": "Provide methods in Dagger 2", "body": "<p>I have problem, i don't know why but my variable don't inject and equals null. \nI provide method like this:</p>\n\n<pre><code>@Provides\n@Singleton\nfun provideSource(context: Context): DatabaseSource = DatabaseSource(context, Models.DEFAULT, DB_NAME, DB_VERSION)\n\n@Provides\n@Singleton\nfun provideStoreDB(databaseSource: DatabaseSource): KotlinReactiveEntityStore&lt;Store&gt; = KotlinReactiveEntityStore(KotlinEntityDataStore(databaseSource.configuration))\n\n@Provides\n@Singleton\n@NotNull\nfun provideStores() : Database&lt;Store&gt; = PersistentDatabase(Store::class)\n</code></pre>\n\n<p>And class for model Store:</p>\n\n<p>it is heir from  class \"persistable\".</p>\n\n<pre><code>@Entity\ndata class Store(val id: Long = 0, val name: String = \"\", val description: String = \"\", val date: String = \"\") : DisplayableItem, Persistable\n</code></pre>\n\n<p>Class for works with DB </p>\n\n<pre><code>@Singleton\nclass PersistentDatabase &lt;T: Any&gt; (val type: KClass&lt;T&gt;) : Database &lt;T&gt; {\n    @Inject\n    internal lateinit var store: KotlinReactiveEntityStore&lt;T&gt;\n\n    override fun addResult(item: T): Completable = store.insert(item).toCompletable()\n\n    override fun addListResult(item: List&lt;T&gt;): Completable = store.insert(item).toCompletable()\n\n    override fun deleteResult(item: T): Completable = store.delete(item)\n\n    override fun getAllResults(): Single&lt;List&lt;T&gt;&gt; = (store select type).get().observable().toList()\n\n    override fun removeAllResults(): Completable = store.delete(type).get().single().toCompletable()\n}\n</code></pre>\n\n<p>In my repository layer i use it like this:</p>\n\n<pre><code>@Inject\nlateinit var database: Database&lt;DetectedLanguageText&gt;\n\nfun getHistory(): Single&lt;List&lt;DetectedLanguageText&gt;&gt; {\n    return database.getAllResults()\n            .map { it.sortedByDescending { it.date } }\n            .transitSuccessToEmitter(historyEmitter)\n}\n</code></pre>\n\n<p>But when i am in function <strong>getAllResults</strong> the variable </p>\n\n<pre><code>    @Inject\n    internal lateinit var store: KotlinReactiveEntityStore&lt;T&gt;\n</code></pre>\n\n<p>Doesn't inject and equals <strong>null</strong>. Why it doesn't work for me?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "is_accepted": true, "score": 9, "last_activity_date": 1501034189, "creation_date": 1501034189, "answer_id": 45316159, "question_id": 45315666, "link": "https://stackoverflow.com/questions/45315666/converting-callablet-java-method-to-kotlin/45316159#45316159", "title": "Converting &quot;Callable&lt;T&gt;&quot; Java method to Kotlin", "body": "<p>I think this is an Kotlin converter bug. It converted your code to <code>() -&gt; T</code> instead of <code>Callable&lt;T&gt;</code> (which is basically the same but these are actually different types).\nThis is the working code</p>\n\n<pre><code>private fun &lt;T&gt; createCallable(task: Callable&lt;T&gt;): Callable&lt;T&gt; {\n    return Callable {\n        try {\n            task.call()\n        } catch (e: Exception) {\n            handle(e)\n            throw e\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 2, "last_activity_date": 1501036060, "last_edit_date": 1501036060, "creation_date": 1501034772, "answer_id": 45316236, "question_id": 45315666, "link": "https://stackoverflow.com/questions/45315666/converting-callablet-java-method-to-kotlin/45316236#45316236", "title": "Converting &quot;Callable&lt;T&gt;&quot; Java method to Kotlin", "body": "<p>This is how I did it, might be too verbose, but it works.  I also implement a <code>handle</code> function.</p>\n\n<pre><code>import java.util.concurrent.*\n\nprivate fun &lt;T&gt; createCallable(task: Callable&lt;T&gt;): Callable&lt;T&gt; {\n    return object : Callable&lt;T&gt; {\n    override fun call(): T  {\n            try {\n                return task.call()\n            } catch (e: Exception) {\n                handle(e)\n                throw e\n            }\n        }\n    }\n}\n\nprivate fun handle(e: Exception): Unit { println(\"got exception\") }\n</code></pre>\n\n<p>And this how I call it in a test...</p>\n\n<pre><code>fun main(vararg argv: String): Unit {\n    val callable1 = object : Callable&lt;Int&gt; {\n        override fun call(): Int = 1\n    }\n    val c1 = createCallable(callable1)\n    println(\"callable1 = ${c1.call()}\")\n\n    val callable2 = object : Callable&lt;Unit&gt; {\n        override fun call(): Unit { println(\"Hello\"); throw Exception(\"Hello\") }\n    }\n    val c2 = createCallable(callable2)\n    c2.call()\n}\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 2501333, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18cd174b715cba90515137a97766618c?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2501333/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4430, "favorite_count": 1, "accepted_answer_id": 45316159, "answer_count": 2, "score": 4, "last_activity_date": 1501042816, "creation_date": 1501030292, "last_edit_date": 1501042816, "question_id": 45315666, "link": "https://stackoverflow.com/questions/45315666/converting-callablet-java-method-to-kotlin", "title": "Converting &quot;Callable&lt;T&gt;&quot; Java method to Kotlin", "body": "<p>I'm trying to convert a Java method:</p>\n\n<pre><code>private &lt;T&gt; Callable&lt;T&gt; createCallable(final Callable&lt;T&gt; task) {\n    return () -&gt; {\n        try {\n            return task.call();\n        } catch (Exception e) {\n            handle(e);\n            throw e;\n        }\n    };\n}\n</code></pre>\n\n<p>from the following Java file <a href=\"https://github.com/jhipster/jhipster/blob/master/src/main/java/io/github/jhipster/async/ExceptionHandlingAsyncTaskExecutor.java\" rel=\"nofollow noreferrer\">ExceptionHandlingAsyncTaskExecutor.java</a> into Kotlin.</p>\n\n<p>The code gets converted automatically using IntelliJ IDEA into:</p>\n\n<pre><code>private fun &lt;T&gt; createCallable(task: Callable&lt;T&gt;): Callable&lt;T&gt; {\n    return {\n        try {\n            return task.call()\n        } catch (e: Exception) {\n            handle(e)\n            throw e\n        }\n    }\n}\n</code></pre>\n\n<p>which is not correct.  But I have to idea what the correct implementation for this should be.  Any ideas?</p>\n"}, {"tags": ["javascript", "java", "kotlin", "kotlin-js-interop"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501055819, "post_id": 45315217, "comment_id": 77603492, "body": "Multiplatform library compilation is neither oficially supported nor documented. In <a href=\"http://slack.kotlinlang.org/\" rel=\"nofollow noreferrer\">slack.kotlinlang.org</a>, there&#39;s a #multiplatform channel, you can try asking there."}], "answers": [{"tags": [], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "is_accepted": false, "score": 0, "last_activity_date": 1501034299, "last_edit_date": 1501034299, "creation_date": 1501027081, "answer_id": 45315289, "question_id": 45315217, "link": "https://stackoverflow.com/questions/45315217/how-to-create-a-library-in-kotlin-and-use-it-from-projects-that-target-javascrip/45315289#45315289", "title": "How to create a library in Kotlin and use it from projects that target javascript or java?", "body": "<p>When using Gradle instead of using <code>compile ...kotlin-stdlib-jre8</code> (or any other <code>jre</code>) use <code>compile ...kotlin-stdlib</code>. This should be enough though remember not to use Java-only features (such as most of the reflection features) as they <a href=\"https://kotlinlang.org/docs/reference/js-reflection.html\" rel=\"nofollow noreferrer\">won't work</a> when using JavaScript</p>\n"}], "owner": {"reputation": 1668, "user_id": 181913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3e44a194a20a8069e2aca94fde9c810f?s=128&d=identicon&r=PG", "display_name": "Burg", "link": "https://stackoverflow.com/users/181913/burg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501095665, "creation_date": 1501026501, "question_id": 45315217, "link": "https://stackoverflow.com/questions/45315217/how-to-create-a-library-in-kotlin-and-use-it-from-projects-that-target-javascrip", "title": "How to create a library in Kotlin and use it from projects that target javascript or java?", "body": "<p>I am looking at how I can create a common library that is used by both front-end and back-end codebases.  I'd like to be able to create a library that is written purely in Kotlin, compile it, and register said artifact(s) to be imported as dependencies from both js (using npm) and kotlin-java (using maven).  Is this a workflow that is supported or possible?  If so, what are the approaches to doing so?</p>\n"}, {"tags": ["java", "android", "multithreading", "android-widget", "kotlin"], "comments": [{"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1501037120, "post_id": 45313963, "comment_id": 77595372, "body": "is the textview also part of the list item layout?  if so, you might need to call <code>invalidateViews</code> on the list."}, {"owner": {"reputation": 339, "user_id": 1526242, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/871f8564e9845c7e6f739471d398a4ff?s=128&d=identicon&r=PG", "display_name": "SaxSalute", "link": "https://stackoverflow.com/users/1526242/saxsalute"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1501076101, "post_id": 45313963, "comment_id": 77618684, "body": "What would I call invalidateViews on? The whole architecture of having a RemoteViewsService that supplies a RemoteViewsFactoryAdapter has me fairly confused about what part of the system needs to be notified of the update to invalidate the row."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1501080010, "post_id": 45313963, "comment_id": 77622010, "body": "On the list.  Your widget has a <code>getViewAt</code> returning a view for a specific item.  After updating <code>remoteViews</code>, invalidate the list view.  See if that helps or changes anything."}], "answers": [{"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 0, "last_activity_date": 1501082076, "creation_date": 1501082076, "answer_id": 45331041, "question_id": 45313963, "link": "https://stackoverflow.com/questions/45313963/updating-collection-based-widget-remoteviews-after-asynctask-callback/45331041#45331041", "title": "Updating collection-based Widget RemoteViews after AsyncTask callback", "body": "<p>Consider using a <code>ListView</code> and <code>ArrayAdapter</code>.  <a href=\"http://www.vogella.com/tutorials/AndroidListView/article.html\" rel=\"nofollow noreferrer\">Here</a> is a link to one good tutorial on the subject.</p>\n\n<p>The idea is that you have your background task update backing data rather than your view directly.  The backing data is a collection of items representing the data for each item in your list.  Your <code>AsyncTask</code> would do it's thing and update the item in the collection.  Then it would call <code>notifyDataSetChanged()</code> on the <code>ArrayAdapter</code> to get it to update the <code>ListView</code>.</p>\n"}], "owner": {"reputation": 339, "user_id": 1526242, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/871f8564e9845c7e6f739471d398a4ff?s=128&d=identicon&r=PG", "display_name": "SaxSalute", "link": "https://stackoverflow.com/users/1526242/saxsalute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501082076, "creation_date": 1501018846, "question_id": 45313963, "link": "https://stackoverflow.com/questions/45313963/updating-collection-based-widget-remoteviews-after-asynctask-callback", "title": "Updating collection-based Widget RemoteViews after AsyncTask callback", "body": "<p>I'm in a situation where the elements of my Widget's ListView are reliant on content fetched over the network via an AsyncTask. The code for getViewAt in my RemoteViewsFactory implementation is as follows:</p>\n\n<pre><code>val preRendered = RemoteViews(context.packageName, R.layout.list_item_layout)\n\nMyAsyncTask(preRendered).execute()\n\nreturn preRendered\n</code></pre>\n\n<p>And the AsyncTask is defined as an inner class</p>\n\n<pre><code>private inner class MyAsyncTask(val remoteViews: RemoteViews) : AsyncTask&lt;Void, Void, Bitmap&gt;()\n{\n    override fun doInBackground(vararg nothing: Void): Bitmap = &lt;fetch image from internet synchronously&gt;\n\n    override fun onPostExecute(result: Bitmap) = remoteViews.setImageViewBitmap(R.id.imageview, result)\n}\n</code></pre>\n\n<p>My basic train of thought is that I should perform the rendering of some default layout to the RemoteViews and return that to be inserted into the list, then allow the network operations to take place in the background. I then make modifications in the onPostExecute method of the AsyncTask on the same instance of RemoteViews, which I believe should in theory result in the actual list element being updated. However, despite the onPostExecute being run and the view being populated with its initial layout, the image is never set. Does anybody have any thoughts on how to achieve this? </p>\n\n<p>Afterthought: I've tried just using a TextView and setting some static text in the AsyncTask and that also does not work.</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501055672, "post_id": 45313529, "comment_id": 77603377, "body": "In Anko (and classic XML), the layout gets created once and should never be recreated. To change properties of views, you can store references to these views (<code>imgView</code> in this case) and change properties when necessary."}, {"owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "reply_to_user": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501057182, "post_id": 45313529, "comment_id": 77604374, "body": "@Miha_x64 Thanks.  ok.  That&#39;s what I&#39;m currently doing.  I just wondered if there was another way."}], "owner": {"reputation": 2161, "user_id": 1390035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1aa41b417d7fb6398f18864fe23f736?s=128&d=identicon&r=PG", "display_name": "Dave Chambers", "link": "https://stackoverflow.com/users/1390035/dave-chambers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501757888, "creation_date": 1501017077, "question_id": 45313529, "link": "https://stackoverflow.com/questions/45313529/how-can-i-redraw-an-anko-framelayout-when-my-model-changes", "title": "How can I redraw an Anko frameLayout when my model changes?", "body": "<p>I have an <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">Anko component</a> where I create my view with some code like this:</p>\n\n<pre><code>override fun createView(ui: AnkoContext&lt;T&gt;) = with(ui) {\n    frameLayout {\n        var imgView = imageView(R.drawable.ic_1).lparams {\n            horizontalMargin = ...\n            topMargin = ...\n            width = ...\n            height = ...\n        }\n        imgView.backgroundColor = gameModel.colour\n    }\n}\n</code></pre>\n\n<p>The background of my <code>imgView</code> depends on a colour in my model.  </p>\n\n<p>Let's imagine I update my model elsewhere.  How do I 'refresh' the Anko component UI to reflect the new <code>gameModel.colour</code>?  I've never done any <code>Android</code> before but it seems one would usually use either <code>invalidate()</code> or <code>requestLayout()</code> but they don't seem to work.</p>\n"}, {"tags": ["intellij-idea", "refactoring", "kotlin", "rename"], "comments": [{"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 1, "creation_date": 1501016330, "post_id": 45313335, "comment_id": 77589358, "body": "Why don&#39;t you just rename the hookEvent function parameter yourself rather than using Intellij Refactor seeing that it is giving you problems."}, {"owner": {"reputation": 1036, "user_id": 3562927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b46d85f27384a8b58999ad329e4ec4a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stevey", "link": "https://stackoverflow.com/users/3562927/stevey"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1501045207, "post_id": 45313335, "comment_id": 77597528, "body": "You mean go in and manually change the parameter inside the function everywhere it&#39;s used?  Sure, I&#39;ll go do it in Emacs.  But IntelliJ&#39;s behavior doesn&#39;t make any sense to me."}, {"owner": {"reputation": 717, "user_id": 1204819, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wevqj.jpg?s=128&g=1", "display_name": "insidesin", "link": "https://stackoverflow.com/users/1204819/insidesin"}, "edited": false, "score": 0, "creation_date": 1536903501, "post_id": 45313335, "comment_id": 91597939, "body": "@user3562927 I would also like the answer this this. Seenms random whether I&#39;ll get the quick edit or the buggy &quot;deep edit&quot;."}], "owner": {"reputation": 1036, "user_id": 3562927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b46d85f27384a8b58999ad329e4ec4a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stevey", "link": "https://stackoverflow.com/users/3562927/stevey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1501016181, "creation_date": 1501016181, "question_id": 45313335, "link": "https://stackoverflow.com/questions/45313335/how-can-i-make-intellij-refactor-rename-parameter-only-rename-the-local-version", "title": "How can I make IntelliJ refactor-&gt;rename parameter only rename the local version of it? (Kotlin)", "body": "<p>I have an overridden function, where the parameter has a different name in the overridden version.</p>\n\n<p>Original function:</p>\n\n<pre><code>fun hookEvent(event: Event) { ... }\n</code></pre>\n\n<p>overridden function:</p>\n\n<pre><code>fun hookEvent(e: Event) { ... }\n</code></pre>\n\n<p>This gives me a warning that it can cause problems when using named arguments.</p>\n\n<p>When I select Refactor->Rename, and try to rename 'e' (in the overridden function) to 'event', IntelliJ searches my entire project and finds every single place where I have overridden the original function, and tries to rename the parameter in all of them.  Then I get conflicts because in some of those places, 'event' is already a local variable in those functions.</p>\n\n<p>I only want it to rename that particular instance of the parameter, in that particular overridden function.  How?</p>\n"}, {"tags": ["annotations", "kotlin", "non-nullable"], "comments": [{"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 0, "creation_date": 1501015346, "post_id": 45312946, "comment_id": 77588799, "body": "As far as I know you can only do this in Java 8+ where annotating generic parameters is allowed"}], "answers": [{"comments": [{"owner": {"reputation": 1302, "user_id": 1183126, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3282188721b086ac8f6277f59d348b12?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/1183126/tom"}, "edited": false, "score": 0, "creation_date": 1573037885, "post_id": 45313284, "comment_id": 103748058, "body": "Unfortunately this only works if Kotlin is using the Java source code. Kotlin (currently) does not recognise annotations on type arguments in compiled Java libraries that are used as dependencies. See <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#annotating-type-parameters\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1501017676, "last_edit_date": 1501017676, "creation_date": 1501015953, "answer_id": 45313284, "question_id": 45312946, "link": "https://stackoverflow.com/questions/45312946/annotate-type-parameter-in-java-for-kotlin-compiler/45313284#45313284", "title": "Annotate Type Parameter in Java for Kotlin Compiler", "body": "<p>You can do that by annotating the <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/type_annotations.html\" rel=\"nofollow noreferrer\">type use</a> of <code>Foo</code> with some of the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#nullability-annotations\" rel=\"nofollow noreferrer\">nullability annotations that the Kotlin compiler understands</a>. Unfortunately, some annotation libraries from the list don't support type use annotation.</p>\n\n<p>I found that <code>@NotNull</code> from <a href=\"https://mvnrepository.com/artifact/org.jetbrains/annotations/15.0\" rel=\"nofollow noreferrer\"><code>org.jetbrains:annotations:15.0</code></a> (but not 13.0) has the <code>TYPE_USE</code> target, so you can add the library as a dependency to your project and annotate the type use:</p>\n\n<pre><code>import org.jetbrains.annotations.NotNull;\n\n...\n\npublic @NotNull Optional&lt;@NotNull Foo&gt; getFoo() {\n    // always return some non-null value\n}\n</code></pre>\n\n<p>Then the return type will be seen as <code>Optional&lt;Foo&gt;</code> in Kotlin.</p>\n\n<p>This, of course, can be done with any other nullability annotations from the list I mentioned above that support the <code>TYPE_USE</code> target.</p>\n"}], "owner": {"reputation": 74510, "user_id": 43582, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e5ac1db48e4a7ef1b192cc6b5e7fbf0?s=128&d=identicon&r=PG", "display_name": "Bombe", "link": "https://stackoverflow.com/users/43582/bombe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1661, "favorite_count": 0, "accepted_answer_id": 45313284, "answer_count": 1, "score": 2, "last_activity_date": 1501017676, "creation_date": 1501014601, "question_id": 45312946, "link": "https://stackoverflow.com/questions/45312946/annotate-type-parameter-in-java-for-kotlin-compiler", "title": "Annotate Type Parameter in Java for Kotlin Compiler", "body": "<p>In Java, I have the following method:</p>\n\n<pre><code>public Optional&lt;Foo&gt; getFoo() {\n    // always return some non-null value\n}\n</code></pre>\n\n<p>In Kotlin code, the return type of this method is given as <code>Optional&lt;Foo!&gt;!</code>. By using the <code>@Nonnull</code> annotation I can cut this down to <code>Optional&lt;Foo!&gt;</code> (i.e. only the <code>Foo</code> type is not null-checked anymore).</p>\n\n<p>Is there a way to annotate the method to make the Kotlin compiler null-check the return value correctly?</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 6, "last_activity_date": 1501010673, "creation_date": 1501010673, "answer_id": 45311920, "question_id": 45311856, "link": "https://stackoverflow.com/questions/45311856/kotlin-appendtext-and-closing-resources/45311920#45311920", "title": "Kotlin: appendText and closing resources", "body": "<p>You can just jump into the implementation of <code>appendText</code> in your IDE to find out (<code>Ctrl + B</code> on Windows, <code>\u2318B</code> on Mac).</p>\n\n<p>Here's the implementation of the method:</p>\n\n<pre><code>public fun File.appendText(text: String, charset: Charset = Charsets.UTF_8): Unit \n    = appendBytes(text.toByteArray(charset))\n</code></pre>\n\n<p>And here's the <code>appendBytes</code> method that it delegates the work to:</p>\n\n<pre><code>public fun File.appendBytes(array: ByteArray): Unit \n    = FileOutputStream(this, true).use { it.write(array) }\n</code></pre>\n\n<p>You can see that it actually uses the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\" rel=\"noreferrer\"><code>use</code></a> helper method as you've expected.</p>\n"}, {"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501011607, "post_id": 45312101, "comment_id": 77586690, "body": "The first paragraph of the question states that the question is about <code>File.appendText()</code>"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1501023311, "post_id": 45312101, "comment_id": 77591931, "body": "thanks for you feedback. I know it. I just point it out what&#39;s he misunderstand. :)"}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": false, "score": 0, "last_activity_date": 1501012837, "last_edit_date": 1501012837, "creation_date": 1501011345, "answer_id": 45312101, "question_id": 45311856, "link": "https://stackoverflow.com/questions/45311856/kotlin-appendtext-and-closing-resources/45312101#45312101", "title": "Kotlin: appendText and closing resources", "body": "<p>You are right there is no <code>appendText</code> function on <code>Writer</code>, you can see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-writer/index.html\" rel=\"nofollow noreferrer\">here</a> as further.</p>\n\n<p>The <a href=\"https://kotlinlang.org/docs/reference/idioms.html#java-7s-try-with-resources\" rel=\"nofollow noreferrer\">use</a> function is same as java-7 <em>try-with-resource</em> expression. it will close the resource after the block exit. In fact, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/append-text.html\" rel=\"nofollow noreferrer\">File#appendText</a> call the <a href=\"https://kotlinlang.org/docs/reference/idioms.html#java-7s-try-with-resources\" rel=\"nofollow noreferrer\">use</a> function to close the resource.</p>\n\n<p><strong>IF</strong> you append the text only once you can using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/append-text.html\" rel=\"nofollow noreferrer\">File#appendText</a> instead. for example:</p>\n\n<pre><code>out8.appendText(\"content\")\n</code></pre>\n\n<p><strong>IF</strong> you want to operate a file more than once, you should using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/buffered-writer.html\" rel=\"nofollow noreferrer\">File#bufferedWriter()</a> instead, since the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/append-text.html\" rel=\"nofollow noreferrer\">File#appendText</a> will create &amp; open a new writer each time. for example:</p>\n\n<pre><code>out8.bufferedWriter().use{ \n    it.append(\"first\").append(\"second\") \n}\n</code></pre>\n"}], "owner": {"reputation": 4200, "user_id": 2223059, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fcc055942e2ce10dd11a6e77a93e2b22?s=128&d=identicon&r=PG", "display_name": "user2223059", "link": "https://stackoverflow.com/users/2223059/user2223059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 45311920, "answer_count": 2, "score": 6, "last_activity_date": 1501012837, "creation_date": 1501010415, "question_id": 45311856, "link": "https://stackoverflow.com/questions/45311856/kotlin-appendtext-and-closing-resources", "title": "Kotlin: appendText and closing resources", "body": "<p>I'm new to Kotlin, but I have a strong Java background (Java is my day job). I'm loving some of the shortcut functions in Kotlin. One of the big ones is File.appendText(). It's very convenient, IMO.</p>\n\n<p>My question is about closing resources. If I was to use a writer, I would do something like this:</p>\n\n<pre><code>out8.writer().use { ... }\n</code></pre>\n\n<p>But I don't see any thing directly on the appendText method that indicates closing resources. Does Kotlin handle this behind the scenes for me, or is this something I have to worry about in another way?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1501010371, "post_id": 45311821, "comment_id": 77585996, "body": "I thought objects were immutable in Kotlin.  I&#39;m new to the language, so I&#39;m not sure.  It&#39;s a more functional style, is it not?  No, I&#39;m wrong: <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/properties.html</a>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1501010414, "post_id": 45311821, "comment_id": 77586019, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38243085/private-getter-and-public-setter-for-a-kotlin-property\">Private getter and public setter for a Kotlin property</a>"}, {"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501010488, "post_id": 45311821, "comment_id": 77586072, "body": "@zsmb13, nope, I don&#39;t intend to have a private getter, but rather no getter at all"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1501010526, "post_id": 45311821, "comment_id": 77586095, "body": "Still the same question, you&#39;re looking for a write-only property. Deprecating the setter is still the best way to go for this use case."}, {"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1501010567, "post_id": 45311821, "comment_id": 77586126, "body": "@duffymo, I&#39;m new as well, but I&#39;m not sure whether properties are a feature of functional programming"}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1501010683, "post_id": 45311821, "comment_id": 77586192, "body": "Functional programming means functions and immutable objects.  That&#39;s the beauty of it: Everything is inherently thread safe and parallelizable."}, {"owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "edited": false, "score": 0, "creation_date": 1501055431, "post_id": 45311821, "comment_id": 77603210, "body": "Kotlin allows programming in procedural, object-oriented, and functional styles, you can mix them without any restrictions."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 6, "last_activity_date": 1600729566, "last_edit_date": 1600729566, "creation_date": 1501018957, "answer_id": 45313993, "question_id": 45311821, "link": "https://stackoverflow.com/questions/45311821/property-without-getter-in-kotlin/45313993#45313993", "title": "Property without getter in Kotlin", "body": "<p>Deprecating the getter is still the only way to get the effect.</p>\n<p>You don't need an Anko dependency, just use the <code>@Deprecated</code> annotation with an appropriate <code>level</code>.</p>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "accepted_answer_id": 45313993, "answer_count": 1, "score": 6, "last_activity_date": 1600729566, "creation_date": 1501010287, "last_edit_date": 1592644375, "question_id": 45311821, "link": "https://stackoverflow.com/questions/45311821/property-without-getter-in-kotlin", "title": "Property without getter in Kotlin", "body": "<p>How can I declare a property with a custom setter, but without getter in Kotlin?\nIn <a href=\"https://github.com/Kotlin/anko\" rel=\"noreferrer\">Anko</a> for example they do it like this:</p>\n<pre><code>var myProperty: Type\n    @Deprecated(AnkoInternals.NO_GETTER, level = DeprecationLevel.ERROR) \n    get() = AnkoInternals.noGetter()\n    set(value) { field = value; /* setter logic */ }\n</code></pre>\n<p>But it looks a bit hacky to me. Is this a right way to do so? If yes, then what about the case when a project doesn't have Anko dependency?</p>\n<p>P.S. Let me be clear - I want to have no getter at all, rather than private getter</p>\n"}, {"tags": ["oop", "casting", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1501005874, "last_edit_date": 1501005874, "creation_date": 1501005498, "answer_id": 45310533, "question_id": 45310457, "link": "https://stackoverflow.com/questions/45310457/the-cast-can-never-be-succeed/45310533#45310533", "title": "The cast can never be succeed", "body": "<p>You seem to have both an <code>Operations</code> and an <code>Operations1</code> class. Your <code>multiOperations1</code> class inherits from <code>Operations</code> instead of <code>Operations1</code>, so you won't be able to cast it to <code>Operations1</code> (unless <code>Operations</code> is a subclass of <code>Operations1</code>).</p>\n\n<p>I assume you wanted to inherit from Operations1 instead, like this:</p>\n\n<pre><code>class multiOperations1(): Operations1() {\n    ...\n}\n</code></pre>\n\n<p>A note on conventions: class names in Kotlin usually follow Java conventions, and use upper camel case, so you should probably name your class <code>MultiOperations1</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "is_accepted": false, "score": 0, "last_activity_date": 1501006685, "creation_date": 1501006685, "answer_id": 45310877, "question_id": 45310457, "link": "https://stackoverflow.com/questions/45310457/the-cast-can-never-be-succeed/45310877#45310877", "title": "The cast can never be succeed", "body": "<p>Either you can use -</p>\n\n<pre><code> var inlit  = multiOperations1() as Operations\n</code></pre>\n\n<p>You can typecast your derived class to parent class. In your case <code>multiOperations1</code> class have a parent class <code>Operations</code>. </p>\n\n<p>Just a suggestion start you class name like <code>multiOperations1</code> from capital letter. </p>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 6825339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIV14.jpg?s=128&g=1", "display_name": "Zulqarnain", "link": "https://stackoverflow.com/users/6825339/zulqarnain"}, "is_accepted": true, "score": 1, "last_activity_date": 1567193034, "last_edit_date": 1567193034, "creation_date": 1553248376, "answer_id": 55296973, "question_id": 45310457, "link": "https://stackoverflow.com/questions/45310457/the-cast-can-never-be-succeed/55296973#55296973", "title": "The cast can never be succeed", "body": "<p>To achieve you can use Gson and avoid boilerplate code.</p>\n\n<pre><code>var operation= Operations(....)\n\nval json = Gson().toJson(operation)\n\nval multiOperations:MultiOperations =Gson().fromJson(json, MultiOperations::class.java)\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7901073, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/880953266ac071573ee2d63db1b8ade1?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/7901073/usman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9168, "favorite_count": 0, "accepted_answer_id": 55296973, "answer_count": 3, "score": 2, "last_activity_date": 1567193034, "creation_date": 1501005252, "last_edit_date": 1501014086, "question_id": 45310457, "link": "https://stackoverflow.com/questions/45310457/the-cast-can-never-be-succeed", "title": "The cast can never be succeed", "body": "<p>I am new in Kotlin and I currently study about the concept of OOP</p>\n\n<p>I am trying to do a cast with this code, but I'm facing an error:   </p>\n\n<pre><code>open class Operations1(){\nopen  fun sum(n1:Int , n2:Int):Int{\n    return n1+ n2\n}\nfun sub(n1:Int , n2:Int):Int{\n    return n1- n2\n}\n}\nclass multiOperations1():Operations(){\noverride  fun sum(n1:Int , n2:Int):Int{\n    return n1+ n2 +5\n}\nfun mul(n1:Int , n2:Int):Int{\n    return n1* n2\n}\nfun div(n1:Int , n2:Int):Int{\n    return n1/ n2\n}\n}\nfun main(args:Array&lt;String&gt;){\n\nvar oper = Operations()\nvar inlit  = multiOperations1() as Operations1\nprintln(\"Enter first number\")\nvar n1:Int = readLine()!!.toInt()\nprintln(\"Enter Second Number\")\nvar n2:Int = readLine()!!.toInt()\n\nvar sum = inlit.sum(n1 , n2)\nvar sub = inlit.sub(n1 , n2)\nprintln(\"Sum: \" + sum)\nprintln(\"Sub: \" + sub)\n}\n</code></pre>\n\n<p>Screen shot of the code</p>\n\n<p><a href=\"https://i.stack.imgur.com/0zGuq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0zGuq.png\" alt=\"This is the screen shot of the code\"></a></p>\n\n<p>error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fs7c4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fs7c4.png\" alt=\"This is the error which my program through\"></a></p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 4644, "user_id": 2953017, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8f4c7b65f88adad59c3ea40fa557abbf?s=128&d=identicon&r=PG&f=1", "display_name": "Zohra Khan", "link": "https://stackoverflow.com/users/2953017/zohra-khan"}, "edited": false, "score": 0, "creation_date": 1501005205, "post_id": 45309872, "comment_id": 77583018, "body": "<a href=\"https://stackoverflow.com/questions/24522696/android-widget-searchview-cannot-be-cast-to-android-support-v7-widget-searchview\" title=\"android widget searchview cannot be cast to android support v7 widget searchview\">stackoverflow.com/questions/24522696/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501003389, "post_id": 45309912, "comment_id": 77581852, "body": "I won&#39;t put this in the answer, but is this from a tutorial or something? It&#39;s curious that the same code sample keeps coming up here."}, {"owner": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501003804, "post_id": 45309912, "comment_id": 77582135, "body": "Actually it comes from the code of Github. But it does not work when I try to do what you tell me the app crashes :/"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501003987, "post_id": 45309912, "comment_id": 77582264, "body": "The exact same code is crashing <a href=\"https://stackoverflow.com/q/45309129/4465208\">here</a> as well. Same advice as there. You should look at the stacktrace, and post another question if you can&#39;t figure it out."}, {"owner": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501003988, "post_id": 45309912, "comment_id": 77582266, "body": "It is very strange because I just let the three first lines and it crashes whereas if I let the two first lines it works. The line 3 is really strange :/"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501004030, "post_id": 45309912, "comment_id": 77582296, "body": "Perhaps <code>getActionView()</code> is not returning a <code>SearchView</code>. In this case, you&#39;d get a <code>ClassCastException</code> there."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501004113, "post_id": 45309912, "comment_id": 77582364, "body": "Can you post your menu XML? Do you have the <code>SearchView</code> set up there?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501004565, "post_id": 45309912, "comment_id": 77582671, "body": "Yeah, that looks good. Can you get a stacktrace from the crash?"}, {"owner": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 3, "creation_date": 1501004960, "post_id": 45309912, "comment_id": 77582892, "body": "Maybe It is because of this : ` java.lang.ClassCastException: android.support.v7.widget.SearchView cannot be cast to android.widget.SearchView` ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501005015, "post_id": 45309912, "comment_id": 77582922, "body": "Oh, there you go, you just have the wrong <code>SearchView</code> imported in your code. You should import the one from the support library instead of <code>android.widget.SearchView</code>."}, {"owner": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "edited": false, "score": 0, "creation_date": 1501005187, "post_id": 45309912, "comment_id": 77583009, "body": "Oh thank you ! Yeah it was that ! Thank you very much !"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 0, "last_activity_date": 1501003311, "creation_date": 1501003311, "answer_id": 45309912, "question_id": 45309872, "link": "https://stackoverflow.com/questions/45309872/no-value-passed-for-parameter-item/45309912#45309912", "title": "No value passed for parameter item", "body": "<p>The problem is that <code>MenuItemCompat.getActionView()</code> requires the <code>MenuItem</code> to be passed in as a parameter:</p>\n\n<pre><code>val searchView = MenuItemCompat.getActionView(searchItem) as SearchView\n</code></pre>\n\n<p>If this is depracated in the Android version you're using (<a href=\"https://stackoverflow.com/q/45306133/4465208\">as seen here</a>), you should use this instead:</p>\n\n<pre><code>val searchView = searchItem.getActionView() as SearchView\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8365265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dac9a9bbe29b0ae9a7d9fc36353d45f3?s=128&d=identicon&r=PG&f=1", "display_name": "Donald Harris", "link": "https://stackoverflow.com/users/8365265/donald-harris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3456, "favorite_count": 0, "accepted_answer_id": 45309912, "answer_count": 1, "score": 0, "last_activity_date": 1501004922, "creation_date": 1501003184, "last_edit_date": 1501004922, "question_id": 45309872, "link": "https://stackoverflow.com/questions/45309872/no-value-passed-for-parameter-item", "title": "No value passed for parameter item", "body": "<p>Hello I have this code :</p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.menu_search, menu)\n        val searchItem = menu.findItem(R.id.action_search)\n        val searchView = MenuItemCompat.getActionView() as SearchView\n\n        //*** setOnQueryTextFocusChangeListener ***\n        searchView.setOnQueryTextFocusChangeListener(object : View.OnFocusChangeListener {\n\n            override fun onFocusChange(v: View, hasFocus: Boolean) {\n\n            }\n        })\n\n        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\n\n            override fun onQueryTextSubmit(query: String): Boolean {\n\n                return false\n            }\n\n            override fun onQueryTextChange(searchQuery: String): Boolean {\n                adapter!!.filter(searchQuery.trim { it &lt;= ' ' })\n                tvListAnimal.invalidate()\n                return true\n            }\n        })\n\n\n        return true\n    }\n</code></pre>\n\n<p>And I found a bug in this line :         <code>val searchView = MenuItemCompat.getActionView() as SearchView</code>. Actually it is just the beginning of the code. Indeed Android Studio told me <code>No value passed for parameter item</code> but I don't really know what I have to put ? </p>\n\n<p>Thank a lot for your help ! Really !</p>\n\n<p>EDIT : here is the menu_search.xml : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n\n    &lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        tools:context=\".SettingsFragment\"&gt;\n        &lt;item android:id=\"@+id/action_search\"\n            android:title=\"Search\"\n            android:icon=\"@drawable/ic_search\"\n            app:showAsAction=\"collapseActionView|always\"\n            app:actionViewClass=\"android.support.v7.widget.SearchView\"\n            android:layout_width=\"wrap_content\" /&gt;\n\n\n\n\n\n&lt;/menu&gt;\n</code></pre>\n\n<p>I found this in the logcat :</p>\n\n<pre><code> java.lang.ClassCastException: android.support.v7.widget.SearchView cannot be cast to android.widget.SearchView\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "edited": false, "score": 0, "creation_date": 1501003636, "post_id": 45309939, "comment_id": 77582036, "body": "@gil.fernandes Not at all. glad it helped you."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": false, "score": 5, "last_activity_date": 1501003605, "last_edit_date": 1501003605, "creation_date": 1501003418, "answer_id": 45309939, "question_id": 45309853, "link": "https://stackoverflow.com/questions/45309853/padding-string-in-kotlin/45309939#45309939", "title": "Padding string in Kotlin", "body": "<p>You can using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/format.html\" rel=\"noreferrer\">String#format</a> extension function instead, In fact, it is inlined to call-site function with <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#format-java.lang.String-java.lang.Object...-\" rel=\"noreferrer\">java.lang.String#format</a> for example:</p>\n\n<pre><code>mutableList.forEach { cp -&gt;\n    println(\"%-45s - %s\".format(cp.name, cp.value))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "edited": false, "score": 0, "creation_date": 1501004217, "post_id": 45310001, "comment_id": 77582449, "body": "good answer. I have tried what you suggested and it works like a charm."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 22, "last_activity_date": 1501017002, "last_edit_date": 1501017002, "creation_date": 1501003630, "answer_id": 45310001, "question_id": 45309853, "link": "https://stackoverflow.com/questions/45309853/padding-string-in-kotlin/45310001#45310001", "title": "Padding string in Kotlin", "body": "<p>You can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/pad-end.html\" rel=\"noreferrer\"><code>.padEnd(length, padChar = ' ')</code> extension</a> from <code>kotlin-stdlib</code> for that. It accepts the desired <code>length</code>  and an optional <code>padChar</code> (default is whitespace):</p>\n\n<pre><code>mutableList.forEach {\n    println(\"${it.name.padEnd(45)} - ${it.value}\")\n}\n</code></pre>\n\n<p>There's also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/pad-start.html\" rel=\"noreferrer\"><code>padStart</code></a> that aligns the padding in the other direction.</p>\n"}], "owner": {"reputation": 9497, "user_id": 2735286, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87ddd81aa1b12c27aecdab22da387f5c?s=128&d=identicon&r=PG&f=1", "display_name": "gil.fernandes", "link": "https://stackoverflow.com/users/2735286/gil-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5474, "favorite_count": 2, "accepted_answer_id": 45310001, "answer_count": 2, "score": 14, "last_activity_date": 1501017002, "creation_date": 1501003138, "last_edit_date": 1501003261, "question_id": 45309853, "link": "https://stackoverflow.com/questions/45309853/padding-string-in-kotlin", "title": "Padding string in Kotlin", "body": "<p>I was trying to pad a string in Kotlin to achieve some proper alignment on the console output. Something along these lines:</p>\n\n<pre><code>accountsLoopQuery                             - \"$.contactPoints.contactPoints[?(@.contactAccount.id)]\"\nbrokerPassword                                - *****\nbrokerURI                                     - tcp://localhost:61616\nbrokerUsername                                - admin\ncontactPointPriorityProperties                - \"contactPointPriority.properties\"\ncustomerCollection                            - \"customer\"\ncustomerHistoryCollection                     - \"customer_history\"\ndefaultSystemOwner                            - \"TUIGROUP\"\n</code></pre>\n\n<p>I have ended up coding it this way - cheating with Java's String.format:</p>\n\n<pre><code>mutableList.forEach { cp -&gt;\n    println(String.format(\"%-45s - %s\", cp.name, cp.value))\n}\n</code></pre>\n\n<p>Is there a proper way to do this with the Kotlin libraries?</p>\n"}, {"tags": ["android", "constructor", "kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1501000969, "post_id": 45309129, "comment_id": 77580350, "body": "your app crashes is not about this problem, you should put the stacktrace here."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1501001010, "post_id": 45309129, "comment_id": 77580385, "body": "Your second solution is the right one for creating an <code>OnFocusChangeListener</code> instance. Since you&#39;re not inheriting from a class here, you don&#39;t need to call the constructor of the superclass (which is what <code>()</code> would mark), you just have to write down the name of the interface there. You should post the log that your crash produces (perhaps as a separate question, since the issue is not about constructors)."}, {"owner": {"reputation": 333, "user_id": 8364264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a0cb70257af58ba09ba82b67f46447?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Thomas", "link": "https://stackoverflow.com/users/8364264/ross-thomas"}, "edited": false, "score": 0, "creation_date": 1501001297, "post_id": 45309129, "comment_id": 77580595, "body": "Thank you but in the first case I mean where <code>object : View.OnFocusChangeListener() </code> I got the message &#39;This class does not have a constructor.&#39; So for you the solution is to remove the parenthesis ? And the fact that the app crashes is not about this ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501001387, "post_id": 45309129, "comment_id": 77580649, "body": "Yes, you have to remove the parenthesis, because you&#39;re inheriting from an interface, and not extending a class. And yes, your crash is caused by something else in your code. You should look at the stacktrace to see what crashes your app, and if you can&#39;t figure it out, post that error as a separate question."}, {"owner": {"reputation": 333, "user_id": 8364264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a0cb70257af58ba09ba82b67f46447?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Thomas", "link": "https://stackoverflow.com/users/8364264/ross-thomas"}, "edited": false, "score": 0, "creation_date": 1501002421, "post_id": 45309129, "comment_id": 77581286, "body": "Yes you totally right ! I will go to post ! thank you !"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501004360, "post_id": 45309129, "comment_id": 77582558, "body": "The same code came up with a crash <a href=\"https://stackoverflow.com/q/45309872/4465208\">here</a>. Did you fix your crash?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1501005282, "post_id": 45309129, "comment_id": 77583061, "body": "The other question is now solved. If you still have your crash, you should check out the solution there (it was a wrong import in that case)."}], "owner": {"reputation": 333, "user_id": 8364264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a0cb70257af58ba09ba82b67f46447?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Thomas", "link": "https://stackoverflow.com/users/8364264/ross-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501062836, "creation_date": 1501000776, "last_edit_date": 1501062836, "question_id": 45309129, "link": "https://stackoverflow.com/questions/45309129/how-can-i-complete-my-constructor", "title": "How can I complete my constructor?", "body": "<p>I have this code: </p>\n\n<pre><code>override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.menu_search, menu)\n        val searchItem = menu.findItem(R.id.action_search)\n        val searchView = MenuItemCompat.getActionView(searchItem) as SearchView\n        //*** setOnQueryTextFocusChangeListener ***\n        searchView.setOnQueryTextFocusChangeListener(object : View.OnFocusChangeListener() {\n\n            override fun onFocusChange(v: View, hasFocus: Boolean) {\n\n            }\n        })\n\n        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {\n\n            override fun onQueryTextSubmit(query: String): Boolean {\n\n                return false\n            }\n\n            override fun onQueryTextChange(searchQuery: String): Boolean {\n                adapter!!.filter(searchQuery.toString().trim { it &lt;= ' ' })\n                tvListAnimal.invalidate()\n                return true\n            }\n        })\n\n\n        return true\n    }\n</code></pre>\n\n<p>The problem comes from this part:</p>\n\n<pre><code>searchView.setOnQueryTextFocusChangeListener(object : View.OnFocusChangeListener() {\n\n   override fun onFocusChange(v: View, hasFocus: Boolean) {\n\n   }\n})\n</code></pre>\n\n<p>When I try to run with Android Studio, I get this message:</p>\n\n<blockquote>\n  <p>'This class does not have a constructor.'</p>\n</blockquote>\n\n<p>I try to write like this:</p>\n\n<pre><code>searchView.setOnQueryTextFocusChangeListener(object : View.OnFocusChangeListener {\n\n   override fun onFocusChange(v: View, hasFocus: Boolean) {\n\n   }\n})\n</code></pre>\n\n<p>It works but the app crashes, because I remove the parenthesis after <code>View.OnFocusChangeListener</code>.</p>\n\n<p>I have no idea how to complete this. Someone has an idea?</p>\n"}, {"tags": ["android", "kotlin", "android-camera", "samsung-mobile", "galaxy"], "comments": [{"owner": {"reputation": 13966, "user_id": 606351, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Z6uDY.jpg?s=128&g=1", "display_name": "Vaiden", "link": "https://stackoverflow.com/users/606351/vaiden"}, "edited": false, "score": 2, "creation_date": 1501061440, "post_id": 45307336, "comment_id": 77607528, "body": "Why the downvotes? This seems to be a legit question"}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1501065599, "post_id": 45307336, "comment_id": 77610700, "body": "<a href=\"https://stackoverflow.com/questions/25321968/trouble-with-focus-mode-continuous-picture-on-galaxy-s5\" title=\"trouble with focus mode continuous picture on galaxy s5\">stackoverflow.com/questions/25321968/&hellip;</a>  Related?"}, {"owner": {"reputation": 1031, "user_id": 433804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UrkHt.jpg?s=128&g=1", "display_name": "Karl Jamoralin", "link": "https://stackoverflow.com/users/433804/karl-jamoralin"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1501075789, "post_id": 45307336, "comment_id": 77618434, "body": "@Michael yes, related though the solution didn&#39;t work. I&#39;ve figured it out already; will post the answer here"}], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 980615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OWZKL.jpg?s=128&g=1", "display_name": "Jelle de Fries", "link": "https://stackoverflow.com/users/980615/jelle-de-fries"}, "edited": false, "score": 1, "creation_date": 1544782509, "post_id": 45328655, "comment_id": 94406458, "body": "We had this same problem for the Samsung S6 this fixed it!"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1548073262, "post_id": 45328655, "comment_id": 95400353, "body": "By &quot;continuous focus&quot; you mean calling <code>camera.autoFocus()</code> every X seconds? About the delaying of getting the supported focus modes, this didn&#39;t help me (tested on SGS7 and Pixel 2). It returned me the same tiny set of available focus modes (&quot;fixed&quot; for Pixel 2 and &quot;fixed&quot;,&quot;infinity&quot; for SGS7)."}, {"owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "reply_to_user": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1549662802, "post_id": 45328655, "comment_id": 95997869, "body": "@androiddeveloper no, autoFocus is a different way of focusing, as opposed to FOCUS_MODE_CONTINUOUS_PICTURE."}, {"owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1549662850, "post_id": 45328655, "comment_id": 95997892, "body": "So, what I want to know, is what the fallback is for Samsungs, if they don&#39;t support FOCUS_MODE_CONTINUOUS_PICTURE?"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "reply_to_user": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1549668199, "post_id": 45328655, "comment_id": 95999364, "body": "@BrillPappin I noticed that they barely provide any of those modes. Max of 2 or something like that. So, what we did is just call this function of <code>autoFocus</code> every now and then."}, {"owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "reply_to_user": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1549753469, "post_id": 45328655, "comment_id": 96017627, "body": "@androiddeveloper you mean if it didn&#39;t support FOCUS_MODE_CONTINUOUS_PICTURE, you simply call autoFocus periodically?"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "reply_to_user": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "edited": false, "score": 0, "creation_date": 1549761081, "post_id": 45328655, "comment_id": 96018967, "body": "@BrillPappin Indeed. In fact, since I&#39;ve noticed that I can&#39;t even try this mode on any of the devices we had at the office, I didn&#39;t bother to add anything related to it in code, sadly..."}], "tags": [], "owner": {"reputation": 1031, "user_id": 433804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UrkHt.jpg?s=128&g=1", "display_name": "Karl Jamoralin", "link": "https://stackoverflow.com/users/433804/karl-jamoralin"}, "is_accepted": true, "score": 4, "last_activity_date": 1501077073, "last_edit_date": 1501077073, "creation_date": 1501076321, "answer_id": 45328655, "question_id": 45307336, "link": "https://stackoverflow.com/questions/45307336/auto-focus-modes-not-working-in-samsung-s8/45328655#45328655", "title": "Auto Focus Modes Not Working In Samsung S8", "body": "<p>I finally figured out -- it appears that autofocus mode parameters should be set differently in Samsung S8. </p>\n\n<p>Here's what I tried that failed:</p>\n\n<ol>\n<li>Setting any autofocus modes (AUTO, CONTINUOUS_PICTURE, INFINITY)\nbefore starting preview</li>\n<li>Scheduled <code>camera.autoFocus()</code> to run every\none second immdediately after camera.open</li>\n</ol>\n\n<p><strong>Here's what I tried that worked:</strong></p>\n\n<ol>\n<li>Putting continuous focus or <code>camera.autoFocus()</code> in a button onClick</li>\n<li>Delaying the setting of continuous focus by 1 second after <code>camera.open()</code> &lt;-- this is what solved my issue</li>\n</ol>\n\n<p>My code for #2:</p>\n\n<pre><code>private val autoFocusExecutor = ScheduledThreadPoolExecutor(1)\n\nfun startCamera() {\n    if (camera == null) {\n        camera = Camera.open()\n        if (camera == null) {\n            showCameraErrorMsg()\n        } else {\n            preview.camera = camera\n            capturereceipt_textview_cameraerrormsg.visibility = View.GONE\n            capturereceipt_framelayout_viewfinder.visibility = View.VISIBLE\n\n            autoFocusExecutor.schedule(Sc{\n                val params: Camera.Parameters = camera!!.parameters\n                if (params.getSupportedFocusModes()\n                        .contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE)) {\n                    //TODO: Auto focus not working\n                    params.focusMode = Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE\n                }\n                camera?.parameters = params\n            }, 1000, TimeUnit.MILLISECONDS)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 933, "user_id": 3051660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b0181b4d785e0373cf10553a2ed3fae3?s=128&d=identicon&r=PG", "display_name": "Angad Singh", "link": "https://stackoverflow.com/users/3051660/angad-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1609925164, "creation_date": 1609925164, "answer_id": 65593195, "question_id": 45307336, "link": "https://stackoverflow.com/questions/45307336/auto-focus-modes-not-working-in-samsung-s8/65593195#65593195", "title": "Auto Focus Modes Not Working In Samsung S8", "body": "<p>I faced the same issue with the Samsung J7 Prime, where the code was working but the camera focus was fixed. Setting the focus mode using a handler fixed the issue for me:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>Handler().post { \n    camera.apply {\n        val params = camera.parameters\n\n        if (params.supportedFocusModes?.contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE) == true) {\n            params.focusMode = Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE\n            camera.parameters = params\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 433804, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UrkHt.jpg?s=128&g=1", "display_name": "Karl Jamoralin", "link": "https://stackoverflow.com/users/433804/karl-jamoralin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "accepted_answer_id": 45328655, "answer_count": 2, "score": 4, "last_activity_date": 1609925164, "creation_date": 1500995667, "last_edit_date": 1542265024, "question_id": 45307336, "link": "https://stackoverflow.com/questions/45307336/auto-focus-modes-not-working-in-samsung-s8", "title": "Auto Focus Modes Not Working In Samsung S8", "body": "<p><strong>Update 2: Any focus modes apparently don't work</strong></p>\n\n<p><strong>Update 1: Problem seems to be isolated to my Samsung S8 device. It's working on Nexus 5X and Xiaomi phones</strong></p>\n\n<p>I've been trying to make <code>FOCUS_MODE_CONTINUOUS_PICTURE</code> work but to no avail. I've confirmed my device supports continuous auto picture via <code>getSupportedFocusModes()</code>, and not sure why it doesn't work.</p>\n\n<p>Here's my code, continuous auto focus is being set in <code>startCamera()</code>:</p>\n\n<pre><code>class CaptureReceiptFragment : Fragment(), CaptureReceiptContract.View {\n\nprivate val MY_PERMISSIONS_REQUEST_CAMERA = 1\n\nprivate var camera: Camera? = null\nprivate var hasCameraPermission: Boolean? = null\n\nprivate lateinit var preview: CameraPreview\n\noverride var presenter: CaptureReceiptContract.Presenter? = null\n\nprivate val picture = Camera.PictureCallback { data, camera -&gt;\n\n    val pictureStorageDir = File(Environment.getExternalStoragePublicDirectory(\n            Environment.DIRECTORY_PICTURES), getAppName())\n\n    presenter?.saveReceipt(pictureStorageDir, data)\n\n\n}\n\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    val root = inflater!!.inflate(R.layout.capturereceipt_frag, container, false)\n\n    return root\n}\n\noverride fun onActivityCreated(savedInstanceState: Bundle?) {\n    super.onActivityCreated(savedInstanceState)\n\n    hasCameraPermission = ContextCompat.checkSelfPermission(context, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED\n\n    if (hasCameraPermission!!) {\n        showCameraErrorMsg()\n    } else {\n        capturereceipt_button_capturereceipt.setOnClickListener {\n            captureReceipt()\n        }\n        startCameraOnCreate()\n    }\n}\n\noverride fun onResume() {\n    super.onResume()\n    presenter?.start()\n    if (hasCameraPermission!!) {\n        showCameraErrorMsg()\n    } else {\n        startCamera()\n        setCameraRotation()\n    }\n}\n\noverride fun onPause() {\n    super.onPause()\n    camera?.release()\n    camera = null\n}\n\noverride fun gotoReceiptList() {\n    //TODO\n}\n\noverride fun goBack() {\n    //TODO\n}\n\nprivate fun startCameraOnCreate() {\n    preview = CameraPreview(context)\n    capturereceipt_framelayout_viewfinder.addView(preview)\n    startCamera()\n}\n\nprivate fun startCamera() {\n    if (camera == null) {\n        camera = Camera.open()\n        if (camera == null) {\n            showCameraErrorMsg()\n        } else {\n            val params: Camera.Parameters? = camera!!.parameters\n            if (params!!.getSupportedFocusModes()\n                    .contains(Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE)) {\n                params.focusMode = Camera.Parameters.FOCUS_MODE_CONTINUOUS_PICTURE;\n            }\n            camera?.parameters = params\n            preview.camera = camera\n            capturereceipt_textview_cameraerrormsg.visibility = View.GONE\n            capturereceipt_framelayout_viewfinder.visibility = View.VISIBLE\n        }\n    }\n}\n\nprivate fun showCameraErrorMsg() {\n    capturereceipt_textview_cameraerrormsg.visibility = View.VISIBLE\n    capturereceipt_framelayout_viewfinder.visibility = View.GONE\n}\n\noverride fun captureReceipt() {\n    camera?.takePicture(null, null, picture)\n}\n\nprivate fun getOutputPictureFile(): File? {\n    val appName = getAppName()\n\n    val pictureStorageDir = File(Environment.getExternalStoragePublicDirectory(\n            Environment.DIRECTORY_PICTURES), appName)\n\n    if (!pictureStorageDir.exists()) {\n        pictureStorageDir.mkdirs()\n    }\n\n    val timeStamp = SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(Date())\n    return File(pictureStorageDir.getPath() + File.separator + \"IMG_\" + timeStamp + \".jpg\")\n}\n\nprivate fun getAppName(): String {\n    val appInfo = context.getApplicationInfo()\n    val stringId = appInfo.labelRes\n    if (stringId == 0) {\n        return appInfo.nonLocalizedLabel.toString()\n    } else {\n        return this.getString(stringId)\n    }\n}\n\nfun setCameraDisplayOrientation() {\n    val info = Camera.CameraInfo()\n    Camera.getCameraInfo(CAMERA_FACING_BACK, info)\n    val rotation = activity.windowManager.defaultDisplay.rotation\n    var degrees = 0\n    when (rotation) {\n        Surface.ROTATION_0 -&gt; degrees = 0\n        Surface.ROTATION_90 -&gt; degrees = 90\n        Surface.ROTATION_180 -&gt; degrees = 180\n        Surface.ROTATION_270 -&gt; degrees = 270\n    }\n    var result: Int\n    if (info.facing == CAMERA_FACING_FRONT) {\n        result = (info.orientation + degrees) % 360\n        result = (360 - result) % 360  // compensate the mirror\n    } else {  // back-facing\n        result = (info.orientation - degrees + 360) % 360\n    }\n    camera?.setDisplayOrientation(result);\n}\n\nfun setCameraRotation() {\n    val info: Camera.CameraInfo = Camera.CameraInfo()\n    Camera.getCameraInfo(CAMERA_FACING_BACK, info)\n    val rotation = activity.windowManager.defaultDisplay.rotation\n    var degrees = 0\n    when(rotation) {\n        Surface.ROTATION_0 -&gt; degrees = 0\n        Surface.ROTATION_90 -&gt; degrees = 90\n        Surface.ROTATION_180 -&gt; degrees = 180\n        Surface.ROTATION_270 -&gt; degrees = 270\n    }\n    val rotate = (info.orientation - degrees + 360) % 360\n    camera?.setDisplayOrientation(rotate)\n    val params: Camera.Parameters = camera!!.parameters\n    params.setRotation(rotate)\n    camera?.parameters = params\n}\n\ncompanion object {\n    @JvmStatic fun newInstance(): CaptureReceiptFragment {\n        return CaptureReceiptFragment()\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1500995202, "post_id": 45306133, "comment_id": 77576108, "body": "Whats the problem with your second approach? Can you post the error?"}, {"owner": {"reputation": 1576, "user_id": 3537322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FgcT4.jpg?s=128&g=1", "display_name": "Stanojkovic", "link": "https://stackoverflow.com/users/3537322/stanojkovic"}, "edited": false, "score": 0, "creation_date": 1608219972, "post_id": 45306133, "comment_id": 115521779, "body": "In 2020 you can just use <code>val searchView = searchItem.actionView as SearchView</code>"}], "answers": [{"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1500997553, "post_id": 45306783, "comment_id": 77577937, "body": "Just to add to this, the <a href=\"https://developer.android.com/reference/android/support/v4/view/MenuItemCompat.html#getActionView(android.view.MenuItem)\" rel=\"nofollow noreferrer\">docs</a> actually link the <code>getActionView</code> method of <code>MenuItem</code> in the deprecation info."}], "tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": true, "score": 62, "last_activity_date": 1500994255, "creation_date": 1500994255, "answer_id": 45306783, "question_id": 45306133, "link": "https://stackoverflow.com/questions/45306133/getactionview-is-deprecated/45306783#45306783", "title": "getActionView is deprecated?", "body": "<p>The Javadoc says:</p>\n\n<blockquote>\n  <p>Use getActionView() directly.</p>\n</blockquote>\n\n<p>Hence, what you should do is:</p>\n\n<pre><code>val searchView = searchItem.getActionView() as SearchView\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 4039605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4afeedb783b16902502d08d5343def13?s=128&d=identicon&r=PG&f=1", "display_name": "JoboFive", "link": "https://stackoverflow.com/users/4039605/jobofive"}, "is_accepted": false, "score": 3, "last_activity_date": 1507225144, "last_edit_date": 1507225144, "creation_date": 1503200054, "answer_id": 45778212, "question_id": 45306133, "link": "https://stackoverflow.com/questions/45306133/getactionview-is-deprecated/45778212#45778212", "title": "getActionView is deprecated?", "body": "<p>You can use the same as provided on <a href=\"https://developer.android.com/guide/topics/search/search-dialog.html\" rel=\"nofollow noreferrer\">android developer</a> website</p>\n\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    // Inflate the options menu from XML\n    MenuInflater inflater = getMenuInflater();\n    inflater.inflate(R.menu.options_menu, menu);\n\n    // Get the SearchView and set the searchable configuration\n    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);\n    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();\n    // Assumes current activity is the searchable activity\n    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));\n    searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default\n\n    return true;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2263, "user_id": 1760907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LB1qV.jpg?s=128&g=1", "display_name": "Pubudu Dodangoda", "link": "https://stackoverflow.com/users/1760907/pubudu-dodangoda"}, "edited": false, "score": 2, "creation_date": 1513843564, "post_id": 47920450, "comment_id": 82808460, "body": "It would be even better if you can explain what you did there."}], "tags": [], "owner": {"reputation": 121, "user_id": 9126043, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Bgft0QlCD8o/AAAAAAAAAAI/AAAAAAAAB10/F2LEym6wZKU/photo.jpg?sz=128", "display_name": "Ashish Kumar", "link": "https://stackoverflow.com/users/9126043/ashish-kumar"}, "is_accepted": false, "score": 12, "last_activity_date": 1513843317, "creation_date": 1513843317, "answer_id": 47920450, "question_id": 45306133, "link": "https://stackoverflow.com/questions/45306133/getactionview-is-deprecated/47920450#47920450", "title": "getActionView is deprecated?", "body": "<p>As suggested by egor, you can do like this</p>\n\n<pre><code>    getMenuInflater().inflate(R.menu.menu_items, menu);\n    MenuItem menuItem = menu.findItem(R.id.action_search);\n\n    SearchView searchView = (SearchView) menuItem.getActionView();\n    search(searchView);\n    return true;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 2843451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RCAdl.jpg?s=128&g=1", "display_name": "Harry Zhang", "link": "https://stackoverflow.com/users/2843451/harry-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1517517126, "creation_date": 1517517126, "answer_id": 48571257, "question_id": 45306133, "link": "https://stackoverflow.com/questions/45306133/getactionview-is-deprecated/48571257#48571257", "title": "getActionView is deprecated?", "body": "<p>Use <code>actionView</code> directly in Kotlin, like this:</p>\n\n<pre><code>  override fun onCreateOptionsMenu(menu: Menu?): Boolean {\n    menuInflater.inflate(R.menu.actions, menu)\n    val searchItem = menu?.findItem(R.id.action_search)\n    val searchView = searchItem?.actionView as SearchView\n    searchView.animate()\n    // TODO: Configure the search info and add any event listeners...\n    return super.onCreateOptionsMenu(menu)\n}\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 8364264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a0cb70257af58ba09ba82b67f46447?s=128&d=identicon&r=PG&f=1", "display_name": "Ross Thomas", "link": "https://stackoverflow.com/users/8364264/ross-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17075, "favorite_count": 3, "accepted_answer_id": 45306783, "answer_count": 4, "score": 33, "last_activity_date": 1517517126, "creation_date": 1500992563, "last_edit_date": 1500994104, "question_id": 45306133, "link": "https://stackoverflow.com/questions/45306133/getactionview-is-deprecated", "title": "getActionView is deprecated?", "body": "<p>Today I decide to translate my android app from Java to Kotlin ! :) But I was very surprise when I type this :</p>\n\n<pre><code>val searchItem = menu.findItem(R.id.action_search)\nval searchView = MenuItemCompat.getActionView(searchItem) as SearchView\n</code></pre>\n\n<p>And Android Studio told me : \" 'getActionView(MenuItem!):View!' is deprecated. Deprecated in Java \"</p>\n\n<p>So before to ask you the solution I ask to Google what is the solution and I believed I find the solution : \"Use getActionView() directly.\" </p>\n\n<p>So I modified my code like this :</p>\n\n<pre><code>val searchView = MenuItemCompat.getActionView() as SearchView\n</code></pre>\n\n<p>But <code>getActionView()</code> is still crossed so I don't understand at all...</p>\n\n<p>I will be very happy if you can help me :) Thank you !</p>\n"}, {"tags": ["kotlin", "swagger"], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 7, "last_activity_date": 1500988615, "creation_date": 1500988615, "answer_id": 45304538, "question_id": 45304421, "link": "https://stackoverflow.com/questions/45304421/swagger-for-kotlin/45304538#45304538", "title": "Swagger for Kotlin", "body": "<p>Here is sample spring boot app with swagger:</p>\n\n<pre><code>@RestController\nclass MyController {\n    @ApiOperation(value = \"doc header...\", notes = \"detailed doc...\")\n    @RequestMapping(value = \"/double\", method = arrayOf(RequestMethod.GET))\n    fun doubleValue(number: Int) = 2 * number\n}\n\n\n@Configuration\n@EnableSwagger2\nclass SwaggerConfig {\n    @Bean\n    fun api(): Docket {\n        return Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build()\n    }\n}\n</code></pre>\n\n<p>dependencies are</p>\n\n<pre><code>compile(\"io.springfox:springfox-swagger2:2.7.0\")\ncompile(\"io.springfox:springfox-swagger-ui:2.7.0\")\n</code></pre>\n\n<p>If you browse <a href=\"http://localhost:8080/swagger-ui.html\" rel=\"noreferrer\">http://localhost:8080/swagger-ui.html</a> it is all there...</p>\n"}, {"tags": [], "owner": {"reputation": 10745, "user_id": 2616755, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SY0Fa.png?s=128&g=1", "display_name": "cmd", "link": "https://stackoverflow.com/users/2616755/cmd"}, "is_accepted": false, "score": 2, "last_activity_date": 1585530078, "last_edit_date": 1585530078, "creation_date": 1515685331, "answer_id": 48210830, "question_id": 45304421, "link": "https://stackoverflow.com/questions/45304421/swagger-for-kotlin/48210830#48210830", "title": "Swagger for Kotlin", "body": "<p>I recently had a similar requirement. As a result I created a <a href=\"https://github.com/cdimascio/kotlin-swagger-spring-functional-template\" rel=\"nofollow noreferrer\">template project</a> that integrates Kotlin, Webflux, and Swagger. It provides interactive API doc and automatic request validation.</p>\n\n<p>See here -> <a href=\"https://github.com/cdimascio/kotlin-swagger-spring-functional-template\" rel=\"nofollow noreferrer\">https://github.com/cdimascio/kotlin-swagger-spring-functional-template</a></p>\n\n<p>Validation is functional. It's used as such:</p>\n\n<pre><code>validate.request(req) {\n  // Do stuff e.g. return a list of names \n  ok().body(Mono.just(listOf(\"carmine\", \"alex\", \"eliana\")))\n}\n</code></pre>\n\n<p>with body</p>\n\n<pre><code>validate.request(req).withBody(User::class.java) { body -&gt;\n  // Note that body is deserialized as User!\n  // Now you can do stuff. \n  // For example, lets echo the request as the response \n  ok().body(Mono.just(body))\n}\n</code></pre>\n\n<p>It utilizes openapi 2 and 3 validation provided by atlassian.</p>\n"}], "owner": {"reputation": 9549, "user_id": 317522, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/y7DXx.jpg?s=128&g=1", "display_name": "Paulo Merson", "link": "https://stackoverflow.com/users/317522/paulo-merson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6267, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1585530078, "creation_date": 1500988273, "question_id": 45304421, "link": "https://stackoverflow.com/questions/45304421/swagger-for-kotlin", "title": "Swagger for Kotlin", "body": "<p>Has anyone used a swagger tool with Kotlin? </p>\n\n<p>In our organization, we have create most of our REST services using Java and SpringMVC (@RestController classes). We have used springfox to generate the Swagger API documentation. The swagger JSON representation is also used to automatically feed a searchable service catalog, so the swagger format for service metadata is important to us. </p>\n\n<p>Some dev teams are now beginning to use Kotlin. We're looking for recommendations or comments related to using springfox or other swagger lib with Kotlin.  </p>\n"}, {"tags": ["android", "unit-testing", "mockito", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 3, "last_activity_date": 1500992467, "last_edit_date": 1500992467, "creation_date": 1500989449, "answer_id": 45304867, "question_id": 45304361, "link": "https://stackoverflow.com/questions/45304361/mocked-method-not-returning-value-from-test-local-variable/45304867#45304867", "title": "Mocked method not returning value from test-local variable", "body": "<p>When you use <code>doReturn coins</code>, Mockito saves the value that <code>coins</code> had at the mock set up time, that is, its initial value <code>0</code>, and then returns that saved value ignoring the changes to the actual variable.</p>\n\n<p>To make the mock query the variable each time the function is called, use <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/916f186df947d3b69b14b1f5dc286555dc625549/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/Mockito.kt#L229\" rel=\"nofollow noreferrer\"><code>doAnswer { ... }</code></a>:</p>\n\n<pre><code>on { getInt(\"coins\", 0) } doAnswer { coins }\n</code></pre>\n"}], "owner": {"reputation": 632, "user_id": 5457046, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zq5ETlBHaqs/AAAAAAAAAAI/AAAAAAAAAsE/87l3AWZOmA8/photo.jpg?sz=128", "display_name": "saitho", "link": "https://stackoverflow.com/users/5457046/saitho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 45304867, "answer_count": 1, "score": 1, "last_activity_date": 1500993159, "creation_date": 1500988145, "last_edit_date": 1500992561, "question_id": 45304361, "link": "https://stackoverflow.com/questions/45304361/mocked-method-not-returning-value-from-test-local-variable", "title": "Mocked method not returning value from test-local variable", "body": "<p>I have written a test to check if my method for adding and subtracting coins from the userdata preference method is working correctly. I mocked the SharedPreferences class and I am using a local variable <code>coins</code> that stores the coin amount.</p>\n\n<p>However the mocked getInt() does not seem to return the correct value of coins:\nRunning the test <em>addCoinValid</em> fails (Expected: 5, Actual: 0). I've made 2 outputs during the test:</p>\n\n<p>variable: 1 - mockedReturn: 0<br>\nvariable: 5 - mockedReturn: 0</p>\n\n<p>The left number is the value from the variable and the right number is what the mocked <em>getInt()</em> returns.</p>\n\n<p>Can anyone tell me what's going on? :O</p>\n\n<hr>\n\n<p>This is my test:</p>\n\n<pre><code>class UserDataTest {\n    var coins = 0\n\n    val editor = mock&lt;SharedPreferences.Editor&gt;()\n    val sharedPrefs = mock&lt;SharedPreferences&gt; {\n        on{ getInt(\"coins\", 0) } doReturn coins\n        on { edit() } doReturn editor\n    }\n    val context = mock&lt;Context&gt; {\n        on { getSharedPreferences(\"userdata\", 0) } doReturn sharedPrefs\n    }\n    val userData = UserData(context)\n\n    @Before\n    fun initEditorMock() {\n        whenever(editor.clear()).thenReturn(editor)\n        whenever(editor.putInt(eq(\"coins\"), any&lt;Int&gt;())).thenAnswer{ invocation -&gt;\n            this.coins = invocation.getArgument(1)\n            return@thenAnswer editor\n        }\n    }\n\n    @Test\n    fun addCoinValid() {\n        userData.setCoins(1)\n        println(\"variable: \"+coins+\" - mockedReturn: \"+userData.getCoins())\n\n        userData.addCoins(5)\n        println(\"variable: \"+coins+\" - mockedReturn: \"+userData.getCoins())\n        assertEquals(5, userData.getCoins())\n    }\n    // ...\n}\n</code></pre>\n\n<p>And this is the class that is tested:</p>\n\n<pre><code>class UserData(context: Context) {\n    val settings = context.getSharedPreferences(\"userdata\", 0)\n\n    fun getCoins(): Int {\n        return settings.getInt(\"coins\", 0)\n    }\n\n    fun setCoins(number: Int) {\n        settings.edit().clear().putInt(\"coins\", number).apply()\n    }\n\n    fun addCoins(number: Int) {\n        if(number &lt; 0) {\n            return\n        }\n        var coins = settings.getInt(\"coins\", 0)\n        setCoins(coins+number)\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "xml", "kotlin"], "comments": [{"owner": {"reputation": 2176, "user_id": 5591671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YQXFqZwgXBM/AAAAAAAAAAI/AAAAAAAAISQ/u8QMVA7EqBg/photo.jpg?sz=128", "display_name": "Ashwin Mothilal", "link": "https://stackoverflow.com/users/5591671/ashwin-mothilal"}, "edited": false, "score": 0, "creation_date": 1500988809, "post_id": 45304333, "comment_id": 77570691, "body": "Check for the resource file and values in it."}, {"owner": {"reputation": 2220, "user_id": 4098637, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uYGnV.jpg?s=128&g=1", "display_name": "Raghavendra", "link": "https://stackoverflow.com/users/4098637/raghavendra"}, "edited": false, "score": 0, "creation_date": 1500988956, "post_id": 45304333, "comment_id": 77570842, "body": "@AmirKhan What is the selected theme in the preview?"}], "answers": [{"comments": [{"owner": {"reputation": 966, "user_id": 2385364, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ec33fa52e91e09c47a1c8e3aac60dad5?s=128&d=identicon&r=PG", "display_name": "Gary Paluk", "link": "https://stackoverflow.com/users/2385364/gary-paluk"}, "edited": false, "score": 1, "creation_date": 1502011878, "post_id": 45399080, "comment_id": 78021252, "body": "This message had annoyed me for weeks. Cheers!"}, {"owner": {"reputation": 142, "user_id": 6762864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9929bfb2f6d50f90c92f7ff761a8d596?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Jurski", "link": "https://stackoverflow.com/users/6762864/karol-jurski"}, "edited": false, "score": 4, "creation_date": 1504124897, "post_id": 45399080, "comment_id": 78897588, "body": "Sorry, I finally found second styles.xml in values-v21 and updated it. Now it works correctly."}, {"owner": {"reputation": 1006, "user_id": 3888756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPnk1.jpg?s=128&g=1", "display_name": "DigitalNinja", "link": "https://stackoverflow.com/users/3888756/digitalninja"}, "edited": false, "score": 0, "creation_date": 1509648083, "post_id": 45399080, "comment_id": 81114170, "body": "How the hell did you figure that out?! This solution worked for me. Thanks!"}, {"owner": {"reputation": 1377, "user_id": 449328, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/hvr2i.jpg?s=128&g=1", "display_name": "Toby Wilson", "link": "https://stackoverflow.com/users/449328/toby-wilson"}, "edited": false, "score": 0, "creation_date": 1514394706, "post_id": 45399080, "comment_id": 82960204, "body": "Problem started for me after upgrading to Android Studio 3.0.1. This fixed it for me, thanks."}, {"owner": {"reputation": 443, "user_id": 6339449, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/dqfkG.jpg?s=128&g=1", "display_name": "Narender Reddy", "link": "https://stackoverflow.com/users/6339449/narender-reddy"}, "edited": false, "score": 0, "creation_date": 1533102648, "post_id": 45399080, "comment_id": 90216781, "body": "@vinod Thanks it worked for me but I have doubt .I have changed the styles Theme so is there any changes applied to application or working same like how it was worked before adding the Base in styles"}, {"owner": {"reputation": 2407, "user_id": 5339829, "user_type": "registered", "accept_rate": 27, "profile_image": "https://lh4.googleusercontent.com/-Gq5bRoltcyM/AAAAAAAAAAI/AAAAAAAABJA/57FhuHkoR3E/photo.jpg?sz=128", "display_name": "Aman Verma", "link": "https://stackoverflow.com/users/5339829/aman-verma"}, "edited": false, "score": 0, "creation_date": 1548541367, "post_id": 45399080, "comment_id": 95579547, "body": "There is no Base.Theme.AppCompat.Light.NoActionBar. And i am using this only. what to do?"}], "tags": [], "owner": {"reputation": 805, "user_id": 2754151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f28f0034d55e73ad66ce45ec6e8b7985?s=128&d=identicon&r=PG&f=1", "display_name": "vinod", "link": "https://stackoverflow.com/users/2754151/vinod"}, "is_accepted": true, "score": 62, "last_activity_date": 1502450908, "last_edit_date": 1502450908, "creation_date": 1501412245, "answer_id": 45399080, "question_id": 45304333, "link": "https://stackoverflow.com/questions/45304333/android-failed-to-instantiate-one-or-more-classes/45399080#45399080", "title": "Android Failed to instantiate one or more classes", "body": "<p>In <code>styles.xml</code>,</p>\n\n<p>Changing the theme from <code>Theme.AppCompat.Light.DarkActionBar</code> to <code>Base.Theme.AppCompat.Light.DarkActionBar</code> has worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 3617, "user_id": 6243553, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4jGJ2.jpg?s=128&g=1", "display_name": "HarshitMadhav", "link": "https://stackoverflow.com/users/6243553/harshitmadhav"}, "is_accepted": false, "score": 5, "last_activity_date": 1514189484, "creation_date": 1514189484, "answer_id": 47966878, "question_id": 45304333, "link": "https://stackoverflow.com/questions/45304333/android-failed-to-instantiate-one-or-more-classes/47966878#47966878", "title": "Android Failed to instantiate one or more classes", "body": "<p>Finally, after 4 days of facing the same error I resolved this on my own:</p>\n\n<p>Click on </p>\n\n<blockquote>\n  <p>Build--> Make Build</p>\n</blockquote>\n\n<p>and then </p>\n\n<blockquote>\n  <p>Refresh the layout.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9974554, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e290f71756e66d73314ebfc298d6203e?s=128&d=identicon&r=PG", "display_name": "user9974554", "link": "https://stackoverflow.com/users/9974554/user9974554"}, "is_accepted": false, "score": 1, "last_activity_date": 1529604618, "last_edit_date": 1529604618, "creation_date": 1529602265, "answer_id": 50974454, "question_id": 45304333, "link": "https://stackoverflow.com/questions/45304333/android-failed-to-instantiate-one-or-more-classes/50974454#50974454", "title": "Android Failed to instantiate one or more classes", "body": "<p>In the <code>build.gradle</code> (Module: <code>app</code>) change the implementation of <code>appcompat</code> to a previous version by searching the <code>developer.google</code></p>\n\n<p>This is an error in the android framework usually happens in the alpha and beta appcompat versions.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 349, "user_id": 6848974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac597d035abcb5f2953a50ac9b207012?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Khan", "link": "https://stackoverflow.com/users/6848974/amir-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25902, "favorite_count": 9, "accepted_answer_id": 45399080, "answer_count": 3, "score": 21, "last_activity_date": 1534699058, "creation_date": 1500988067, "last_edit_date": 1534699058, "question_id": 45304333, "link": "https://stackoverflow.com/questions/45304333/android-failed-to-instantiate-one-or-more-classes", "title": "Android Failed to instantiate one or more classes", "body": "<p>I have a running project and all the xml files are showing me the error message <code>Android Failed to instantiate one or more classes</code>. The program still works.</p>\n\n<p>I cleaned the cache and used invalidate Caches and Restart.</p>\n\n<p>Here the Full message:</p>\n\n<blockquote>\n  <p>The following classes could not be instantiated android.support.v7.widget.AppCompatTextView</p>\n</blockquote>\n\n<p>Tip: Use View.isInEditMode() in your custom view to skip code or show sample data when shown in the IDE.</p>\n\n<pre><code>java.lang.NullPointerException\n    at android.content.res.Resources_Delegate.getValue(Resources_Delegate.java:788)\n    at android.content.res.Resources.getValue(Resources.java:1286)\n    at android.support.v4.content.res.ResourcesCompat.loadFont(ResourcesCompat.java:212)\n    at android.support.v4.content.res.ResourcesCompat.getFont(ResourcesCompat.java:206)\n    at android.support.v7.widget.TintTypedArray.getFont(TintTypedArray.java:119)\n    at android.support.v7.widget.AppCompatTextHelper.updateTypefaceAndStyle(AppCompatTextHelper.java:208)\n    at android.support.v7.widget.AppCompatTextHelper.loadFromAttributes(AppCompatTextHelper.java:152)\n    at android.support.v7.widget.AppCompatTextHelperV17.loadFromAttributes(AppCompatTextHelperV17.java:38)\n    at android.support.v7.widget.AppCompatTextView.&lt;init&gt;(AppCompatTextView.java:81)\n    at android.support.v7.widget.AppCompatTextView.&lt;init&gt;(AppCompatTextView.java:71)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.jetbrains.android.uipreview.ViewLoader.createNewInstance(ViewLoader.java:475)\n    at org.jetbrains.android.uipreview.ViewLoader.loadClass(ViewLoader.java:250)\n    at org.jetbrains.android.uipreview.ViewLoader.loadClass(ViewLoader.java:213)\n    at com.android.tools.idea.rendering.LayoutlibCallbackImpl.loadClass(LayoutlibCallbackImpl.java:193)\n    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:333)\n    at android.view.BridgeInflater.onCreateView(BridgeInflater.java:152)\n    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:717)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:785)\n    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:222)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:727)\n    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:858)\n    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:70)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:834)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:492)\n    at com.android.layoutlib.bridge.bars.CustomBar.&lt;init&gt;(CustomBar.java:95)\n    at com.android.layoutlib.bridge.bars.StatusBar.&lt;init&gt;(StatusBar.java:67)\n    at com.android.layoutlib.bridge.impl.Layout.createStatusBar(Layout.java:224)\n    at com.android.layoutlib.bridge.impl.Layout.&lt;init&gt;(Layout.java:146)\n    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:301)\n    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:429)\n    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:368)\n    at com.android.tools.idea.rendering.RenderTask$2.compute(RenderTask.java:567)\n    at com.android.tools.idea.rendering.RenderTask$2.compute(RenderTask.java:549)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runReadAction(ApplicationImpl.java:863)\n    at com.android.tools.idea.rendering.RenderTask.createRenderSession(RenderTask.java:549)\n    at com.android.tools.idea.rendering.RenderTask.lambda$inflate$1(RenderTask.java:680)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n"}, {"tags": ["generics", "kotlin", "inline"], "answers": [{"comments": [{"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500970632, "post_id": 45297547, "comment_id": 77556773, "body": "The problem with that solution is that I have to expose <code>createImpl</code> which I do not want to. I only want to be able to create <code>Params</code> internally"}, {"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 2, "creation_date": 1500971810, "post_id": 45297547, "comment_id": 77557531, "body": "Wow, that is really great"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1500971642, "last_edit_date": 1500971642, "creation_date": 1500970381, "answer_id": 45297547, "question_id": 45297122, "link": "https://stackoverflow.com/questions/45297122/reified-type-parameters-and-internals/45297547#45297547", "title": "Reified type parameters and internals", "body": "<p>You can fix this by adding an intermediary method to create your <code>ParamsImpl</code> instance:</p>\n\n<pre><code>fun &lt;T&gt; createImpl(doc: T): Params&lt;T&gt; = ParamsImpl(doc)\n\ninline fun &lt;reified T&gt; doSomething(init: Params&lt;T&gt;.() -&gt; Unit) {\n    val doc = T::class.java.newInstance()\n    val params = createImpl(doc)\n\n    params.init()\n}\n</code></pre>\n\n<p>This method doesn't have to be inlined (since you're just passing a generic instance to it that you've already created in the <code>doSomething</code> method), therefore it can use <code>ParamsImpl</code> in its private implementation.</p>\n\n<p>It's also important that it's return type is <code>Params&lt;T&gt;</code> so that it only exposes that type to the users of <code>doSomething</code>.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>To hide the creation method, you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-published-api/index.html\" rel=\"nofollow noreferrer\"><code>@PublishedApi</code></a> annotation in combination with <code>internal</code> visibility:</p>\n\n<pre><code>@PublishedApi internal fun &lt;T&gt; createImpl(doc: T): Params&lt;T&gt; = ParamsImpl(doc)\n</code></pre>\n\n<p>This will enable its use in <code>inline</code> functions, but hide it from other users. </p>\n\n<p>This means that in other modules, it won't be visible in Kotlin code, and it will give you an error when you try to call it from Java (this, of course, can be suppressed, but this is the best guarantee that Kotlin can give you for its <code>internal</code> visiblity when doing interop).</p>\n\n<p>You can also use the constructor and mark the <code>ParamsImpl</code> class itself with <code>@PublishedApi</code>, if you like that more.</p>\n"}, {"comments": [{"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500970717, "post_id": 45297574, "comment_id": 77556819, "body": "<code>doSomething</code> needs to be public. Having a public function to create <code>Params</code> is not what I want since I only want to be able to create them internally"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500971228, "post_id": 45297574, "comment_id": 77557161, "body": "@danielspaniol sir, how about it now?"}, {"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500971463, "post_id": 45297574, "comment_id": 77557304, "body": "that looks really ugly. I hoped there would be a nicer solution than using reflection. I don&#39;t get why it is not possible to just use the <code>internal</code> in the <code>inline</code> function."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500971531, "post_id": 45297574, "comment_id": 77557345, "body": "@danielspaniol hi, there is no way to do that, because <code>ParamImpl</code> will inlined into call-site function, however its visibility is internal, so the compiler will report such a error. if you don&#39;t want to expose the internal <code>ParamsImpl</code>, the only way is to use <i>reflection</i>."}, {"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500971619, "post_id": 45297574, "comment_id": 77557395, "body": "I thought since Kotlins <code>internal</code> maps to Javas <code>public</code> it should not be to problematic for the compiler"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1500971823, "post_id": 45297574, "comment_id": 77557539, "body": "@danielspaniol sir, you can see the <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">visibility</a> as further. it&#39;s the kotlin compiler problem.  because Kotlin is already assert that the <code>internal</code> visibility only can be access in the same module."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": false, "score": 0, "last_activity_date": 1500971210, "last_edit_date": 1500971210, "creation_date": 1500970484, "answer_id": 45297574, "question_id": 45297122, "link": "https://stackoverflow.com/questions/45297122/reified-type-parameters-and-internals/45297574#45297574", "title": "Reified type parameters and internals", "body": "<p>This is because an inline function will be inlined into call-site function and the visibility of the <code>ParamsImpl</code> class is <em>internal</em>.</p>\n\n<p>You can easily to solve this problem by makes <code>doSomething</code>'s visibility to <em>internal</em>.</p>\n\n<p>But you also can extract another non-inline method to solve the problem, for example:</p>\n\n<pre><code>inline fun &lt;reified T&gt; doSomething(init: Params&lt;T&gt;.() -&gt; Unit) {\n    val doc= T::class.java.newInstance()\n\n    newParams(doc).init()\n}\n\nfun &lt;T&gt; newParams(doc: T): Params&lt;T&gt; {\n    return ParamsImpl&lt;T&gt;(doc)\n}\n</code></pre>\n\n<p><strong>IF</strong> you don't want to expose <code>ParamsImpl</code> to others, you must using <strong>reflection</strong>, for example:</p>\n\n<pre><code>inline fun &lt;reified T&gt; doSomething(init: Params&lt;T&gt;.() -&gt; Unit) {\n    val doc = T::class.java.newInstance()\n    //             v--- the full qualifier class name \n    Class.forName(\"pkg.ParamsImpl\").getDeclaredConstructor(Any::class.java).run {\n        isAccessible = true\n        @Suppress(\"UNCHECKED_CAST\")\n        (newInstance(doc) as Params&lt;T&gt;).init()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 1, "closed_date": 1500983743, "accepted_answer_id": 45297547, "answer_count": 2, "score": 2, "last_activity_date": 1500971642, "creation_date": 1500969125, "last_edit_date": 1500969474, "question_id": 45297122, "link": "https://stackoverflow.com/questions/45297122/reified-type-parameters-and-internals", "closed_reason": "Duplicate", "title": "Reified type parameters and internals", "body": "<p>I have a generic function which needs to instantiate an object of its generic argument and pass it to an instance of some interface. <br>\nAs far as I know, the only way to instantiate that generic object is making the function inline and reifying that type parameter. But I do not want to expose the implementation of that interface. <br>\nThe problem is that inlined functions can not use internal classes.</p>\n\n<p>What I basically want to is this:</p>\n\n<pre><code>/* The interface I want to expose */\ninterface Params&lt;T&gt; {\n    val doc: T\n}\n\n/* The implementation I do not want to expose */\ninternal class ParamsImpl&lt;T&gt; (override val doc: T) : Params&lt;T&gt; \n\n\n/* The function */\ninline fun &lt;reified T&gt; doSomething(init: Params&lt;T&gt;.() -&gt; Unit) {\n    val doc= T::class.java.newInstance()\n    val params = ParamsImpl(doc) // Can't compile since ParamsImpl is internal \n\n    params.init()\n}\n</code></pre>\n"}, {"tags": ["kotlin", "type-inference", "spring-webflux"], "comments": [{"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500968159, "post_id": 45295818, "comment_id": 77555198, "body": "Try response.expectBody(Version::class.java).isEqualTo&lt;Version&gt;(&zwnj;&#8203;version)"}, {"owner": {"reputation": 53, "user_id": 8236944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c3174b0b2522f032854fe7654c9c40?s=128&d=identicon&r=PG&f=1", "display_name": "Velde", "link": "https://stackoverflow.com/users/8236944/velde"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500974190, "post_id": 45295818, "comment_id": 77559277, "body": "I&#39;ve tried this option, however, it leads to the following error: Kotlin: Type argument is not within its bounds: should be subtype of &#39;Nothing!&#39;"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500975317, "post_id": 45295818, "comment_id": 77560153, "body": "Try replacing Version with Any. response.expectBody(Version::class.java).isEqualTo&lt;Any&gt;(\u200c\u200bve&zwnj;&#8203;rsion)"}, {"owner": {"reputation": 53, "user_id": 8236944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c3174b0b2522f032854fe7654c9c40?s=128&d=identicon&r=PG&f=1", "display_name": "Velde", "link": "https://stackoverflow.com/users/8236944/velde"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500976839, "post_id": 45295818, "comment_id": 77561319, "body": "New update: It does compile if I use &#39;response.expectBoyd(Version::class.java).isEqualTo&lt;Nothing&gt;&zwnj;&#8203;(version). This will be because the &#39;isEqualTo&#39; method has a &lt;T extends S&gt; generic and S is definied as &#39;S extends WebTestClient.BodySpec&lt;B, S&gt;&#39;. However, the result of this is a nullpointer even though the body is not null. Using isEqualTo&lt;Any&gt; also doesn&#39;t compile. It gives an error that it should be a subtype of Nothing!"}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 1092077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5778521f67d80de0ee3b213e4f159a59?s=128&d=identicon&r=PG", "display_name": "S&#233;bastien Deleuze", "link": "https://stackoverflow.com/users/1092077/s%c3%a9bastien-deleuze"}, "is_accepted": true, "score": 5, "last_activity_date": 1523971468, "last_edit_date": 1523971468, "creation_date": 1501009553, "answer_id": 45311624, "question_id": 45295818, "link": "https://stackoverflow.com/questions/45295818/type-interference-issue-with-the-webflux-webtestclient-and-kotlin/45311624#45311624", "title": "Type interference issue with the WebFlux WebTestClient and Kotlin", "body": "<p>This known issue coming from a Kotlin type inference limitation (<a href=\"https://youtrack.jetbrains.com/issue/KT-5464\" rel=\"noreferrer\">KT-5464</a>) already reported on Spring JIRA as <a href=\"https://jira.spring.io/browse/SPR-15692\" rel=\"noreferrer\">SPR-15692</a> has been fixed as of Spring Framework 5.0.6+ / Spring Boot 2.0.2+. Make sure to use the Kotlin extension by writing <code>.expectBody&lt;Foo&gt;()</code>. See also <a href=\"https://github.com/sdeleuze/webflux-kotlin-web-tests\" rel=\"noreferrer\">the repository with concrete <code>WebTestClient</code> examples</a> in Kotlin I have created</p>\n"}, {"tags": [], "owner": {"reputation": 1783, "user_id": 958160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o4CVw.jpg?s=128&g=1", "display_name": "Li Ying", "link": "https://stackoverflow.com/users/958160/li-ying"}, "is_accepted": false, "score": 1, "last_activity_date": 1548909624, "creation_date": 1548909624, "answer_id": 54453400, "question_id": 45295818, "link": "https://stackoverflow.com/questions/45295818/type-interference-issue-with-the-webflux-webtestclient-and-kotlin/54453400#54453400", "title": "Type interference issue with the WebFlux WebTestClient and Kotlin", "body": "<p>I ran into the same issue.</p>\n\n<p>Looks like the solution is to use an extension function <code>.expectBody&lt;Version&gt;()</code></p>\n\n<p>please refer to:\n<a href=\"https://github.com/spring-projects/spring-framework/issues/20251#issuecomment-453457296\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/20251#issuecomment-453457296</a></p>\n\n<p>so, you can change your code to:</p>\n\n<pre><code>import org.springframework.test.web.reactive.server.expectBody\n......\nresponse&lt;Version&gt;.expectBody().isEqualTo(version)\n</code></pre>\n\n<p>it should work</p>\n"}], "owner": {"reputation": 53, "user_id": 8236944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c3174b0b2522f032854fe7654c9c40?s=128&d=identicon&r=PG&f=1", "display_name": "Velde", "link": "https://stackoverflow.com/users/8236944/velde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1300, "favorite_count": 0, "accepted_answer_id": 45311624, "answer_count": 2, "score": 5, "last_activity_date": 1548909624, "creation_date": 1500965212, "last_edit_date": 1500984725, "question_id": 45295818, "link": "https://stackoverflow.com/questions/45295818/type-interference-issue-with-the-webflux-webtestclient-and-kotlin", "title": "Type interference issue with the WebFlux WebTestClient and Kotlin", "body": "<p>I'm building a prototype for a new application using Spring Webflux and Kotlin. Spring Webflux contains a WebTestClient for unit tests. According to the documentation I should be able to test the results of a REST call like this:</p>\n\n<pre><code>@Test\nfun getVersion_SingleResult_ContentTypeJson_StatusCodeOk_ContentEqualsVersion() {\n    //given\n    var version = Version(\"Test\", \"1.0\")\n    val handler = ApiHandler(version!!)\n    val client = WebTestClient.bindToRouterFunction(ApiRoutes(handler).apiRouter()).build()\n\n    //expect\n    val response = client.get().uri(\"/api/version/\").exchange()\n    response.expectStatus().isOk\n    response.expectHeader().contentType(MediaType.APPLICATION_JSON_UTF8)\n    response.expectBody(Version::class.java).isEqualTo(version)\n}\n</code></pre>\n\n<p>However, I'm running into some type interference issues. The problem is in the combination of 'expectBody' and 'isEqualTo'. </p>\n\n<p>The error I get is: </p>\n\n<blockquote>\n  <p>Kotlin: Type inference failed: Not enough information to infer parameter T in fun  isEqualTo(p0: Version!): T! Please specify it explicitly.</p>\n</blockquote>\n\n<p>The used methods have the following signatures:</p>\n\n<pre><code>&lt;B&gt; WebTestClient.BodySpec&lt;B, ?&gt; expectBody(Class&lt;B&gt; var1);\n\npublic interface BodySpec&lt;B, S extends WebTestClient.BodySpec&lt;B, S&gt;&gt; {\n    &lt;T extends S&gt; T isEqualTo(B var1);\n}\n</code></pre>\n\n<p>Sadly I'm running into the limits of my knowledge of generics and the differences between Kotlin and Java which means that I'm not sure how I should specify this.</p>\n\n<p>Edit: Like I said below, it compiles when I use <code>isEqualTo&lt;Nothing&gt;(version)</code>. However, this causes a NullPointerException when the isEqualTo ends without a failure. This seems to be because the 'isEqualTo' method returns a value, which is now defined as the 'Nothing' type.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 4, "creation_date": 1500961902, "post_id": 45294879, "comment_id": 77551413, "body": "Why don&#39;t you try it?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1500967229, "post_id": 45294879, "comment_id": 77554502, "body": "Addition @OP: if you&#39;re asking this because you don&#39;t have access to a Kotlin environment, you can use sites like <a href=\"http://www.ideone.com\" rel=\"nofollow noreferrer\">Ideone</a>."}, {"owner": {"reputation": 682, "user_id": 5765771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/90fbd7abadc8251d7607728aa531dd90?s=128&d=identicon&r=PG&f=1", "display_name": "Al Mamun", "link": "https://stackoverflow.com/users/5765771/al-mamun"}, "edited": false, "score": 1, "creation_date": 1500969133, "post_id": 45294879, "comment_id": 77555841, "body": "I&#39;ve tried this <code>println(&quot;$sum(3,4)&quot;)</code>"}, {"owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "edited": false, "score": 2, "creation_date": 1500983355, "post_id": 45294879, "comment_id": 77566031, "body": "These down votes are atrocious, this is a perfectly valid question."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1500988241, "post_id": 45294879, "comment_id": 77570198, "body": "Probably because you didn&#39;t include your failed attempt, and didn&#39;t show any effort."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1500963219, "creation_date": 1500963219, "answer_id": 45295221, "question_id": 45294879, "link": "https://stackoverflow.com/questions/45294879/can-i-call-methods-inside-string-template-in-kotlin/45295221#45295221", "title": "Can i call methods inside string template in Kotlin?", "body": "<p>Yes, <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#string-templates\" rel=\"nofollow noreferrer\">string templates</a> can contain arbitrary expressions, you just have to use curly braces.</p>\n\n<pre><code>fun foo() = 42\nval bar = 25\n\n\"$bar\"\n\"${bar}\"\n\"${foo()}\"\n\"${2 + 10 / 5}\"\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 5765771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/90fbd7abadc8251d7607728aa531dd90?s=128&d=identicon&r=PG&f=1", "display_name": "Al Mamun", "link": "https://stackoverflow.com/users/5765771/al-mamun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 45295221, "answer_count": 1, "score": -2, "last_activity_date": 1501046179, "creation_date": 1500961804, "last_edit_date": 1501046179, "question_id": 45294879, "link": "https://stackoverflow.com/questions/45294879/can-i-call-methods-inside-string-template-in-kotlin", "title": "Can i call methods inside string template in Kotlin?", "body": "<p>I have a method:</p>\n\n<pre><code>fun sum(first:Int, second:Int):Int\n{\n    return first + second\n}\n</code></pre>\n\n<p>Can I call this method with parameter inside a string template like I can do with a variable?</p>\n\n<p>I've tried the following but it didn't work:</p>\n\n<pre><code>println(\"$sum(3,4)\")\n</code></pre>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2", "rx-kotlin"], "comments": [{"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 3, "creation_date": 1500960723, "post_id": 45294524, "comment_id": 77550879, "body": "You can&#39;t - even in Java, <code>.onNext(null)</code> will evaluate to <code>.onError(new NullPointerException(...))</code>."}, {"owner": {"reputation": 868, "user_id": 4908259, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-Y0L2LhjfxeA/AAAAAAAAAAI/AAAAAAAAEU8/xI6jS8pXkes/photo.jpg?sz=128", "display_name": "Abhinav Nair", "link": "https://stackoverflow.com/users/4908259/abhinav-nair"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 2, "creation_date": 1500960955, "post_id": 45294524, "comment_id": 77550987, "body": "In RxJava 1 it was possible. But in 2 it is not."}, {"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1500961696, "post_id": 45294524, "comment_id": 77551328, "body": "BTW: Your code is not even compiling. Please post only valid code in here. You can edit the post to fix this."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 3, "creation_date": 1501007499, "post_id": 45294524, "comment_id": 77584360, "body": "@guenhter The code doesn&#39;t have to compile if the question is how to make the code compile."}, {"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1501015843, "post_id": 45294524, "comment_id": 77589072, "body": "RxJava implements the reactive streams specification which does not support null values. You can use <a href=\"https://github.com/gojuno/koptional\" rel=\"nofollow noreferrer\">github.com/gojuno/koptional</a> to wrap the values. Includes filters for RxJava"}, {"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1501375668, "post_id": 45294524, "comment_id": 77751513, "body": "@nhaarman the question is not how to make it compile. It is how to pass null"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1544626450, "post_id": 45294524, "comment_id": 94343679, "body": "One possible workaround would be to use <code>AtomicReference(null) </code> vs <code>AtomicReference(User)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": false, "score": 10, "last_activity_date": 1500961339, "last_edit_date": 1500961339, "creation_date": 1500960973, "answer_id": 45294695, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/45294695#45294695", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>If you use rxkotlin/rxjava 2.0 (I assume so) than the answer is: you can't. The reason is explained here.</p>\n\n<p>This is a break of the interface. Have a look at the <code>Observable</code> Interface</p>\n\n<pre><code>public interface Observer&lt;T&gt; {\n\n    /** ... */\n    void onSubscribe(@NonNull Disposable d);\n\n    /** ... */\n    void onNext(@NonNull T t);\n\n    /** ... */\n    void onError(@NonNull Throwable e);\n\n    /** ... */\n    void onSubscribe(@NonNull Disposable d);\n\n    /** ... */\n    void onNext(@NonNull T t);\n\n    /** ... */\n    void onError(@NonNull Throwable e);\n...\n</code></pre>\n\n<p>The <code>@NonNull</code> will be considered by the Kotlin compiler and therefore you CAN'T pass null.</p>\n\n<p>Even if you could, the <code>onNext</code> would immediately throw an error:</p>\n\n<pre><code>@Override\npublic void onNext(T t) {\n    if (t == null) {\n        onError(new NullPointerException(\"onNext called with null. Null values are generally not allowed in 2.x operators and sources.\"));\n        return;\n    }\n    ...\n}\n</code></pre>\n\n<hr>\n\n<p>If you really need such a thing as <code>null</code> you have to fake it. e.g. by creating a static object of <code>User</code> which represents your <code>null</code>-element.</p>\n\n<p>e.g.</p>\n\n<pre><code>data class User(val username, val password) {\n\n    companion object {\n        val NULL_USER = User(\"\", \"\")\n    }\n}\n...\nval user = BehaviorSubject.create&lt;User&gt;()\n...\nuser.onNext(User.NULL_USER)\n...\nuser.filter { it !== User.NULL_USER }\n</code></pre>\n\n<p>But it is somehow possible, try to avoid the <code>null</code> concept and maybe think of another solution where this isn't needed.</p>\n"}, {"comments": [{"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1500995403, "post_id": 45302336, "comment_id": 77576257, "body": "Yes, I guess this is the cleanest way to do it (even if I don&#39;t really like Optionals :) )."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 3, "creation_date": 1501006396, "post_id": 45302336, "comment_id": 77583701, "body": "A &quot;complete&quot; implementation of <code>Optional</code> (with methods like <code>java.util.Optional</code>) is pretty short: <a href=\"https://gist.github.com/ephemient/2dec1165b7993e6a6cd7cdfa005fe277\" rel=\"nofollow noreferrer\">gist.github.com/ephemient/2dec1165b7993e6a6cd7cdfa005fe277</a>"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1501007011, "post_id": 45302336, "comment_id": 77584072, "body": "@ephemient interesting approach!"}, {"owner": {"reputation": 1888, "user_id": 8536239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef95deb577f83fc571bc5ab416461daa?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Padgett", "link": "https://stackoverflow.com/users/8536239/jeff-padgett"}, "edited": false, "score": 0, "creation_date": 1557881119, "post_id": 45302336, "comment_id": 98911173, "body": "Could someone explain this code?  I don&#39;t understand `data class Optional&lt;T&gt;, and also fun &lt;T&gt; T?.asOptional() = Optional(this).  It looks like he is creating a data class called &quot;Optional&quot;, but what does the &lt;T&gt; after it do?  Does the class &quot;Optional&quot; take on the same type of it&#39;s parameter, the &quot;value&quot; of type &quot;T?&quot;?"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": false, "score": 24, "last_activity_date": 1500983229, "creation_date": 1500983229, "answer_id": 45302336, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/45302336#45302336", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>As <a href=\"https://stackoverflow.com/a/45294695/675383\">Guenhter</a> explained, this is not possible. However, instead of proposing the null-object pattern, I'd recommend an implementation of the <code>Optional</code> type:</p>\n\n<pre><code>data class Optional&lt;T&gt;(val value: T?)\nfun &lt;T&gt; T?.asOptional() = Optional(this)\n</code></pre>\n\n<p>This makes your intent much clearer, and you can use a destructuring declaration in your functions:</p>\n\n<pre><code>Observable.just(Optional(\"Test\"))\n  .map { (text: String?) -&gt; text?.substring(1)?.asOptional() }\n  .subscribe()\n</code></pre>\n\n<p>Using the null-object pattern here can cause more bugs than it solves.</p>\n"}, {"comments": [{"owner": {"reputation": 3219, "user_id": 1983904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wBNSn.jpg?s=128&g=1", "display_name": "Bolling", "link": "https://stackoverflow.com/users/1983904/bolling"}, "edited": false, "score": 0, "creation_date": 1582724320, "post_id": 45371201, "comment_id": 106875482, "body": "I like this approach, it is straight forward and clean."}], "tags": [], "owner": {"reputation": 868, "user_id": 4908259, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-Y0L2LhjfxeA/AAAAAAAAAAI/AAAAAAAAEU8/xI6jS8pXkes/photo.jpg?sz=128", "display_name": "Abhinav Nair", "link": "https://stackoverflow.com/users/4908259/abhinav-nair"}, "is_accepted": true, "score": 2, "last_activity_date": 1551958486, "last_edit_date": 1551958486, "creation_date": 1501238012, "answer_id": 45371201, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/45371201#45371201", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>Thank you very much for all your answers but I ultimately went with this solution:-</p>\n\n<pre><code>class UserEnvelope(val user:User?) {}\n</code></pre>\n\n<p>And using this in the observables.</p>\n\n<p>This best suited my requirements.</p>\n\n<p>I am new to Kotlin so I don't know how to use Optionals. But from what I understand, I would have to typecast it to User type everytime I need to observe the values right?</p>\n"}, {"tags": [], "owner": {"reputation": 4435, "user_id": 812598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad6c769fb4cb6525f4ea6c6e7bf8983a?s=128&d=identicon&r=PG", "display_name": "GoRoS", "link": "https://stackoverflow.com/users/812598/goros"}, "is_accepted": false, "score": 0, "last_activity_date": 1527276203, "creation_date": 1527276203, "answer_id": 50535662, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/50535662#50535662", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>Since RxJava 2 does not support <em>null</em> values, there are some other acceptable solutions you can use:</p>\n\n<ul>\n<li>Work with a custom or third party wrapper library of Optionals like some of the posted answers suggest. When I got rid of Java in favour of Kotlin, Optionals went away in the same package since Kotlin per se supports nullability as part of its type System. Just by this change the code was much more clearer, and I personally don't want to get Optionals back in my code as long as I can avoid them.</li>\n<li>Emit <code>Any</code> class instances with your subject type. For example you could create an <code>Empty.INSTANCE</code> enum class which would emulate the <em>null</em> value and then filter by the enum class.</li>\n<li><p>The last one is the one I use and prefer being a variant of the previous solution and is based on specialisations. Our friends of JetBrains always emphasise that classes are very cheap in Kotlin, so this would be a quick example to distinguish logged users and not logged ones:</p>\n\n<pre><code>abstract class SessionUser\nsealed class LoggedUser(val username: String, val password: String) : SessionUser()\nsealed class LogoutUser : SessionUser()\n\nprivate val user = BehaviorSubject.create&lt;SessionUser&gt;()\nprivate val loggedUser = \n   user.filter { it is LoggedUser }.cast(LoggedUser::class.java)\n\nfun login(username: String, password: String) {\n   user.onNext(LoggedUser(username, password))\n}\n\nfun logout() {\n   user.onNext(LogoutUser())\n}\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5919144, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1nZ__8d0q8/AAAAAAAAAAI/AAAAAAAADxI/tE6sJpPTxn0/photo.jpg?sz=128", "display_name": "Anton Donov", "link": "https://stackoverflow.com/users/5919144/anton-donov"}, "is_accepted": false, "score": 1, "last_activity_date": 1580991192, "creation_date": 1580991192, "answer_id": 60094750, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/60094750#60094750", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>To implement the solution mentioned in the <a href=\"https://stackoverflow.com/users/675383/nhaarman\">nhaarman</a>'s answer, you can use the util class <code>Optional</code> (<a href=\"https://developer.android.com/reference/java/util/Optional\" rel=\"nofollow noreferrer\">doc</a>) from the Android SDK which was added in <strong>API level 24</strong>.</p>\n\n<p>If your app's <code>minSdkVersion</code> less than 24 then you still need to implement it by yourself. </p>\n"}, {"tags": [], "owner": {"reputation": 11672, "user_id": 9648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/449d9a003618bc23907182726ab67b41?s=128&d=identicon&r=PG", "display_name": "JohnnyLambada", "link": "https://stackoverflow.com/users/9648/johnnylambada"}, "is_accepted": false, "score": 0, "last_activity_date": 1603837218, "creation_date": 1603837218, "answer_id": 64563697, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/64563697#64563697", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>I've taken an approach similar to <code>Optional&lt;User&gt;</code> and <code>UserEnvelope</code>. I make a simple <code>User</code> class and a <code>ReifiedUser</code> class that inherits from it. The <code>User</code> class has a <code>companion object</code> that has a NONE instance. The <code>BehaviorSubject</code> is instantiated with the <code>User.NONE</code> instance. It looks something like this:</p>\n<pre><code>open class User {\n    companion object {\n        val NONE = User()\n    }\n}\n\nclass ReifiedUser(\n        @field:JsonProperty(J.FirstName) val firstName: String,\n        @field:JsonProperty(J.LastName) val lastName: String\n) : User()\n</code></pre>\n<p>My <code>BehaviorSubject</code> is instantiated like this:</p>\n<pre><code>val activeUser: BehaviorSubject&lt;User&gt; = BehaviorSubject.createDefault(User.NONE)\n</code></pre>\n<p>And wherever I need to use <code>activeUser</code> I either <code>flatMap</code> it to <code>Observable.empty()</code> if it's NONE or just figure out what it is and what to do in the subscriber.</p>\n<p>I don't like mixing java <code>Optional</code> with kotlin nullable because mixing <code>map</code> and <code>let</code> gets really confusing and ugly. This way it's very obvious what's going on.</p>\n"}, {"tags": [], "owner": {"reputation": 785, "user_id": 2987410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69940f8d4d9637e559323f55a2d736a5?s=128&d=identicon&r=PG", "display_name": "Sourav Chandra", "link": "https://stackoverflow.com/users/2987410/sourav-chandra"}, "is_accepted": false, "score": 0, "last_activity_date": 1617720879, "creation_date": 1617720879, "answer_id": 66971074, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin/66971074#66971074", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>I think it makes more sense to write a container class such as <code>Result</code>. An example of that would be</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class Result&lt;T&gt;(value: T?, error: Throwable?)\n</code></pre>\n<p>Usage</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>Observable.create { observer -&gt;\n   upstreamService.listen(object: UpstreamListener {\n     onSuccess(data: User) {\n       observer.onSuccess(Result(data))\n     }\n     onError(exception: Throwable) {\n       observer.onSuccess(Result(null, exception))\n     }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 868, "user_id": 4908259, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh4.googleusercontent.com/-Y0L2LhjfxeA/AAAAAAAAAAI/AAAAAAAAEU8/xI6jS8pXkes/photo.jpg?sz=128", "display_name": "Abhinav Nair", "link": "https://stackoverflow.com/users/4908259/abhinav-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19922, "favorite_count": 1, "accepted_answer_id": 45371201, "answer_count": 7, "score": 19, "last_activity_date": 1617720879, "creation_date": 1500960181, "last_edit_date": 1500960993, "question_id": 45294524, "link": "https://stackoverflow.com/questions/45294524/how-to-pass-null-to-an-observable-with-nullable-type-in-rxjava-2-and-kotlin", "title": "How to pass null to an Observable with nullable type in RxJava 2 and Kotlin", "body": "<p>I initialize my variable like this:-</p>\n\n<pre><code> val user: BehaviorSubject&lt;User?&gt; user = BehaviorSubject.create()\n</code></pre>\n\n<p>But I can't do this. IDE throws an error:-</p>\n\n<pre><code>user.onNext(null)\n</code></pre>\n\n<p>And doing this, IDE says u will never be null:-</p>\n\n<pre><code>user.filter( u -&gt; u!=null)\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "edited": false, "score": 0, "creation_date": 1500955052, "post_id": 45293594, "comment_id": 77549025, "body": "thanks, now how can i use this implemented listener inside activity?  for example:  <code>MyProgressView.setOnitemClickListener(new OnitemClickListener(){}};</code>"}], "tags": [], "owner": {"reputation": 140, "user_id": 8331040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df20bba776406513816266bc2bab7975?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/8331040/santhosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1500961111, "last_edit_date": 1500961111, "creation_date": 1500954584, "answer_id": 45293594, "question_id": 45293506, "link": "https://stackoverflow.com/questions/45293506/equivalent-implementing-java-interface-on-kotlin/45293594#45293594", "title": "equivalent implementing java interface on kotlin", "body": "<p>use <strong>setOnClickItemListener</strong> in your Activity.</p>\n\n<pre><code>class MyProgressView : RelativeLayout, OnClickedItemListener  {\n\n    var onClickItemListener: OnClickedItemListener? = null\n\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    private fun init() {\n        LayoutInflater.from(context).inflate(R.layout.download_progress_layout, this)\n    }\n\n    override fun onClick(state: Boolean) {\n        //do something on onclick\n    }\n\n    fun setOnClickedItemListener(onclickItemListener: OnClickedItemListener) {\n        this.onClickItemListener = onclickItemListener\n    }\n\n}\n</code></pre>\n\n<p>I hope this may help you.</p>\n"}], "owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 45293594, "answer_count": 1, "score": 0, "last_activity_date": 1500961111, "creation_date": 1500953930, "question_id": 45293506, "link": "https://stackoverflow.com/questions/45293506/equivalent-implementing-java-interface-on-kotlin", "title": "equivalent implementing java interface on kotlin", "body": "<p>I'm newbie in <code>Kotlin</code> and i'm trying to know how can i implementing java interface on kotlin, i'm using that on android,</p>\n\n<pre><code>public interface OnClickedItemListener {\n    void onClick(boolean state);\n}\n</code></pre>\n\n<p><code>OnClickedItemListener</code> is my custom interface which i want to implementing that, in kotlin i have this class:</p>\n\n<pre><code>class MyProgressView : RelativeLayout {\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    private fun init() {\n        LayoutInflater.from(context).inflate(R.layout.download_progress_layout, this)\n        cusotmView.setOnClickListener {\n        }\n    }\n}\n</code></pre>\n\n<p>in that whats equivalent this cods for example:</p>\n\n<pre><code>class MyProgressView : RelativeLayout {\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    private fun init() {\n        LayoutInflater.from(context).inflate(R.layout.download_progress_layout, this)\n        cusotmView.setOnClickListener {\n            /*\n            if(onitemClickListener!=null) onitemClickListener.onClick()\n            */\n        }\n    }\n\n    /*\n    public interface OnitemClickListener{\n        void onClick();\n    }\n\n    public static void setOnitemClickListener(OnitemClickListener listener){\n        onitemClickListener = l;\n    }\n    */\n\n}\n</code></pre>\n"}, {"tags": ["android", "google-maps", "callback", "geolocation", "kotlin"], "comments": [{"owner": {"reputation": 241, "user_id": 6104775, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0iBE1.jpg?s=128&g=1", "display_name": "Nenco", "link": "https://stackoverflow.com/users/6104775/nenco"}, "edited": false, "score": 0, "creation_date": 1500930978, "post_id": 45290064, "comment_id": 77542786, "body": "well if it works the first time that means that its not entering the onReceive method the second time and its not calling the updateLocation method. Which means that you are not sending a broadcast the right way. I&#39;m guessing that you didnt put it in the onResume method because onCreate gets called only once thats why it works only the first time. I&#39;m just guessing here :)"}, {"owner": {"reputation": 11598, "user_id": 869330, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34be19b80429871a85ea92656850bceb?s=128&d=identicon&r=PG&f=1", "display_name": "Naetmul", "link": "https://stackoverflow.com/users/869330/naetmul"}, "edited": false, "score": 0, "creation_date": 1500945652, "post_id": 45290064, "comment_id": 77546877, "body": "What is <code>act</code>? Did you ensure that <code>act</code> is not null in <code>onActivityCreated</code>?"}, {"owner": {"reputation": 13757, "user_id": 5039950, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1f695a9f3f5a8c6a13e60c880769527b?s=128&d=identicon&r=PG&f=1", "display_name": "chandil03", "link": "https://stackoverflow.com/users/5039950/chandil03"}, "edited": false, "score": 0, "creation_date": 1500985250, "post_id": 45290064, "comment_id": 77567634, "body": "which <code>link</code> are you talking about?"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 6118151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854bb5247a6a4c393f5b5c0f00b70443?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/6118151/oleg"}, "is_accepted": false, "score": 0, "last_activity_date": 1501051492, "creation_date": 1501051492, "answer_id": 45319370, "question_id": 45290064, "link": "https://stackoverflow.com/questions/45290064/how-to-set-callback-in-kotlin/45319370#45319370", "title": "How to set CallBack in Kotlin?", "body": "<p>I found where was mistake. I am using parent BaseActivity where is inner class Receiver. In SplashActivity that Inherited from BaseActivity I created object Receiver, and callback I created from fragment in MainActivity inherited from BaseActivity too. I had situation when first setting callback and after that was creating Reciever. I endured all processes in MainActivity and it work.</p>\n"}], "owner": {"reputation": 23, "user_id": 6118151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/854bb5247a6a4c393f5b5c0f00b70443?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg", "link": "https://stackoverflow.com/users/6118151/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1120, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501051492, "creation_date": 1500930474, "last_edit_date": 1500958530, "question_id": 45290064, "link": "https://stackoverflow.com/questions/45290064/how-to-set-callback-in-kotlin", "title": "How to set CallBack in Kotlin?", "body": "<p>I try to transfer device geolocation into fragment and using callback. But after set one time link is null</p>\n\n<pre><code> fun updateLocation(location:LatLng){\n   Log.d(TAG,\"Update fragment \"+ localUpdater+\" \"+location)\n   localUpdater?.tryOutLocation(location)\n\n }\n private inner class Receiver: BroadcastReceiver(){\n     override fun onReceive(context: Context?, intent: Intent?) {\n         val bundle = intent?.extras!![AppConstants.LOCATION_BUNDLE] as Bundle\n         val location = bundle.get(AppConstants.LOCATION_BUNDLE) as LatLng\n         updateLocation(location)                  \n     }\n }\n\nfun setUpdater(updater: IUpdateLocation){\n    this.localUpdater = updater\n    Log.d(TAG,\"Update fragment1 \"+localUpdater)\n}\n</code></pre>\n\n<p>I declare callback:</p>\n\n<pre><code>private var localUpdater: IUpdateLocation? = null\n</code></pre>\n\n<p>Code interface:</p>\n\n<pre><code>interface IUpdateLocation {\n    fun tryOutLocation(location:LatLng)\n}\n</code></pre>\n\n<p>Fragment code:</p>\n\n<pre><code>override fun onActivityCreated(savedInstanceState: Bundle?) {\n    act?.setUpdater(this)\n    super.onActivityCreated(savedInstanceState)\n}\n\n\noverride fun tryOutLocation(location: LatLng) {\n    Log.d(TAG,\"Update fragment map fragment \"+location+\" \")\n    if(gMap != null){\n        gMap?.uiSettings?.isZoomGesturesEnabled\n        gMap?.addMarker(MarkerOptions().position(location).title(\"Test\"))\n        gMap?.moveCamera(CameraUpdateFactory.newLatLngZoom(location, 20.0f))\n}\n</code></pre>\n\n<p>First time <a href=\"http://prntscr.com/fzsd36\" rel=\"nofollow noreferrer\">callback is set and work (log)</a></p>\n\n<p>but after first calling link is null. Why? How I can fix this problem?</p>\n"}, {"tags": ["java", "compiler-errors", "kotlin", "aspectj", "aspectj-maven-plugin"], "owner": {"reputation": 744, "user_id": 3708426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1696669719/picture?type=large", "display_name": "Jonathan Leitschuh", "link": "https://stackoverflow.com/users/3708426/jonathan-leitschuh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1500996575, "creation_date": 1500928257, "last_edit_date": 1500996575, "question_id": 45289534, "link": "https://stackoverflow.com/questions/45289534/aspectj-compiler-problems-with-kotlin-delegation-in-type-hierarchy", "title": "AspectJ Compiler problems with kotlin delegation in type hierarchy", "body": "<p><strong>NOTICE</strong></p>\n\n<p>TLDR; I discovered that this was simply an environmental problem. The JAR with the kotlin code had old class files that caused unexpected problems that the compiler was 100% handling correctly.</p>\n\n<p>I think that there was another class file in the JAR that I was trying to depend upon that was called <code>SimpleLink</code> that was a class instead of an interface. The Gradle Kotlin compile plugin didn't remove these classes when I removed the <code>.kt</code> files. LPT: Run the Gradle clean task before trying to publish, even if you are only publishing to maven local.</p>\n\n<hr>\n\n<p>I'm having a problem with aspectj linking against code that uses kotlin classes from another project.</p>\n\n<p>The aspectJ compiler is running version <code>1.8.6</code>.</p>\n\n<p>My particular problem is that, I keep seeing this:\n<code>\nType mismatch: cannot convert from element type ExtendedSimpleLink to SimpleLink\n</code></p>\n\n<p>I have a type hierarchy where <code>ExtendedSimpleLink extends LinkDecorator</code> where <code>LinkDecorator</code> is written in kotlin and compiled in another project and <code>ExtendedSimpleLink</code> is java compiled with the aspectj compiler.</p>\n\n<p><code>LinkDecorator</code> looks like this:</p>\n\n<pre><code>abstract class LinkDecorator(\n    private val decorated : SimpleLink\n) : SimpleLink by decorated {\n    override fun hashCode(): Int = decorated.hashCode()\n\n    override fun equals(other: Any?): Boolean = decorated == other\n}\n</code></pre>\n\n<p>I have no idea why the aspectj compiler can't figure out the type hierarchy.\nIt should be looking at the bytecode for <code>LinkDecorator</code> and saying that obviously <code>ExtendedSimpleLink</code> is an instance of a <code>SimpleLink</code>.</p>\n\n<p>As an example, the following code (trying to be compiled by the aspectJ compiler):</p>\n\n<pre><code>final class ExtendedSimpleLink extends LinkDecorator\n{\n\n    private final Double something;\n\n    private final Object somethingElse;\n\n\n    private ExtendedSimpleLink(\n            final SimpleLink decorated,\n            final Object somethingElse,\n            final Double something)\n    {\n        super(decorated);\n        this.somethingElse = somethingElse;\n        this.something = something;\n    }\n\n\n    public static ExtendedSimpleLink from(final SimpleLink decorated)\n    {\n        if (decorated instanceof ExtendedSimpleLink)\n        {\n            return (ExtendedSimpleLink) decorated;\n        }\n        return new ExtendedSimpleLink(decorated, null, null);\n    }\n}\n</code></pre>\n\n<p>Compiling the above class gives this error from maven:</p>\n\n<pre><code>[ERROR] /Users/[user]/work/tmp/[project]/Core/src/main/java/com/company/core/engine/fitting/ExtendedSimpleLink.java:50:0::0 The return type is incompatible with LinkDecorator.getFabricLinkMetricEnhancement()\n[ERROR] error at if (decorated instanceof ExtendedSimpleLink)\n[ERROR] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n[ERROR] /Users/[user]/work/tmp/[project]/Core/src/main/java/com/company/core/engine/fitting/ExtendedSimpleLink.java:58:0::0 Incompatible conditional operand types SimpleLink and ExtendedSimpleLink\n[ERROR] error at return (ExtendedSimpleLink) decorated;\n[ERROR] ^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>IntelliJ seems completely fine with this code. I think that it using the JavaC compiler for linting however.</p>\n\n<p>My questions are, why is this happening? Is there a known problem in the AspectJ compiler? Are there similar problems with interop with groovy and the aspectJ compiler for example?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've tried adding the following to see if it solves the problem:</p>\n\n<pre><code>final class ExtendedSimpleLink extends LinkDecorator implements SimpleLink {\n    // same as above...\n}\n</code></pre>\n\n<p>Now I have all the same exceptions as before but with a new exception added to the mix:</p>\n\n<pre><code>[ERROR] error at final class ExtendedSimpleLink extends LinkDecorator implements SimpleLink\n[ERROR] ^^^^^^^^^\n[ERROR] /Users/[user]/work/tmp/[project]/Core/src/main/java/com/company/core/engine/fitting/ExtendedSimpleLink.java:23:0::0 The type SimpleLink cannot be a superinterface of ExtendedSimpleLink; a superinterface must be an interface\n</code></pre>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1500966221, "post_id": 45290564, "comment_id": 77553748, "body": "I updated the answer with a more robust solution using a TableCellFragment which is introduced in TornadoFX 1.7.9 :)"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "reply_to_user": {"reputation": 49, "user_id": 7495504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d79e5f2a1e0299d39595f9e86fa1c8d4?s=128&d=identicon&r=PG&f=1", "display_name": "skiey", "link": "https://stackoverflow.com/users/7495504/skiey"}, "edited": false, "score": 0, "creation_date": 1501060965, "post_id": 45290564, "comment_id": 77607190, "body": "Great! You can check it out by using a snapshot build already :)"}, {"owner": {"reputation": 49, "user_id": 7495504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d79e5f2a1e0299d39595f9e86fa1c8d4?s=128&d=identicon&r=PG&f=1", "display_name": "skiey", "link": "https://stackoverflow.com/users/7495504/skiey"}, "edited": false, "score": 0, "creation_date": 1501095925, "post_id": 45290564, "comment_id": 77632823, "body": "I tried that in my project, but seemed <code>model.item</code> could be <code>null</code> somehow (compiler threw NPE here <code>if (model.number.value == 123L) error(&quot;Invalid number&quot;) else null</code>) so I had to add additional <code>null</code> checking in <code>validator</code> lambda before accessing model properties. After that it did the trick. Thanks again, Edvin :)"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 4, "last_activity_date": 1500966169, "last_edit_date": 1500966169, "creation_date": 1500932574, "answer_id": 45290564, "question_id": 45288335, "link": "https://stackoverflow.com/questions/45288335/tornadofx-how-to-add-validation-while-editing-tableview/45290564#45290564", "title": "TornadoFX how to add validation while editing TableView", "body": "<p>You can either implement your own cellfactory and return a cell that shows a textfield bound to a ViewModel when in edit mode and an label if not. Alternatively, if you're fine with always displaying a textfield, you can use <code>cellFormat</code> and bind the current item to an ItemModel so you can attach validation:</p>\n\n<pre><code>class ItemModel(item: Item) : ItemViewModel&lt;Item&gt;(item) {\n    val name = bind(Item::nameProperty)\n    val number = bind(Item::numberProperty)\n}\n\n\nclass MainView : View(\"Example\") {\n    val items = listOf(Item(\"One\", 1), Item(\"Two\", 2)).observable()\n\n    override val root = vbox {\n        tableview(items) {\n            column(\"Name\", Item::nameProperty).makeEditable()\n            column(\"Number\", Item::numberProperty).cellFormat {\n                val model = ItemModel(rowItem)\n                graphic = textfield(model.number, NumberStringConverter()) {\n                    validator {\n                        if (model.number.value == 123) error(\"Invalid number\") else null\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It will look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pqzso.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pqzso.png\" alt=\"CellFormat Solution\"></a></p>\n\n<p>While it works, it's sort of wasteful since the nodes are recreated frequently. I would recommend approach number one if performance is a concern, until we get <code>cellFragment</code> support for TableView like we have for ListView.</p>\n\n<p><strong>EDIT</strong>: I implemented <code>cellFragment</code> support, so it's possible to create a more robust solution which will show a label when not in edit mode and a validating textfield when you enter edit mode.</p>\n\n<pre><code>class ItemModel : ItemViewModel&lt;Item&gt;() {\n    val name = bind(Item::nameProperty)\n    val number = bind(Item::numberProperty)\n}\n\n\nclass MainView : View(\"Example\") {\n    val items = listOf(Item(\"One\", 1), Item(\"Two\", 2)).observable()\n\n    override val root = vbox {\n        tableview(items) {\n            column(\"Name\", Item::nameProperty).makeEditable()\n            column(\"Number\", Item::numberProperty).cellFragment(NumberEditor::class)\n        }\n    }\n}\n\nclass NumberEditor : TableCellFragment&lt;Item, Number&gt;() {\n    // Bind our ItemModel to the rowItemProperty, which points to the current Item\n    val model = ItemModel().bindToRowItem(this)\n\n    override val root = stackpane {\n        textfield(model.number, NumberStringConverter()) {\n            removeWhen(editingProperty.not())\n            validator {\n                if (model.number.value == 123L) error(\"Invalid number\") else null\n            }\n            // Call cell.commitEdit() only if validation passes\n            action {\n                if (model.commit()) {\n                    cell?.commitEdit(model.number.value)\n                }\n            }\n        }\n        // Label is visible when not in edit mode, and always shows committed value (itemProperty)\n        label(itemProperty) {\n            removeWhen(editingProperty)\n        }\n    }\n\n    // Make sure we rollback our model to avoid showing the last failed edit\n    override fun startEdit() {\n        model.rollback()\n    }\n\n}\n</code></pre>\n\n<p>This will be possible starting from TornadoFX 1.7.9.</p>\n"}], "owner": {"reputation": 49, "user_id": 7495504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d79e5f2a1e0299d39595f9e86fa1c8d4?s=128&d=identicon&r=PG&f=1", "display_name": "skiey", "link": "https://stackoverflow.com/users/7495504/skiey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 0, "accepted_answer_id": 45290564, "answer_count": 1, "score": 1, "last_activity_date": 1500966169, "creation_date": 1500923558, "question_id": 45288335, "link": "https://stackoverflow.com/questions/45288335/tornadofx-how-to-add-validation-while-editing-tableview", "title": "TornadoFX how to add validation while editing TableView", "body": "<p>Consider folowing example:</p>\n\n<pre><code>class Item(name: String, number: Int) {\n    val nameProperty = SimpleStringProperty(name)\n    var name by nameProperty\n\n    val numberProperty by lazy { SimpleIntegerProperty(number) }\n    var number by numberProperty\n}\n\nclass MainView : View(\"Example\") {\n    val items = listOf(Item(\"One\", 1), Item(\"Two\", 2)).observable()\n\n    override val root = vbox {\n        tableview(items) {\n            column(\"Name\", Item::nameProperty).makeEditable()\n            column(\"Number\", Item::numberProperty).makeEditable(NumberStringConverter())\n            enableCellEditing()\n        }\n    }\n}\n</code></pre>\n\n<p>How can I add a <code>validator</code> while editing cells? Is the only way to do that is to add <code>rowExpander</code> with some <code>textfield</code> and try to validate a model there?</p>\n"}, {"tags": ["android", "kotlin", "handler", "runnable"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500922032, "post_id": 45287818, "comment_id": 77538176, "body": "you can pass a <code>Callable</code> to your <code>Handler</code>, and <code>sendMessageDelayed</code> recursively."}, {"owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "edited": false, "score": 1, "creation_date": 1500925039, "post_id": 45287818, "comment_id": 77539765, "body": "Please put code in the question and not link to it because a) Not everybody can get to imgur from work and b) the link might expire and this question will be useless in the future."}, {"owner": {"reputation": 237, "user_id": 4922635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10204774870991346/picture?type=large", "display_name": "Ryan Dailey", "link": "https://stackoverflow.com/users/4922635/ryan-dailey"}, "edited": false, "score": 0, "creation_date": 1500927273, "post_id": 45287818, "comment_id": 77540908, "body": "Thanks for letting me know!"}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 4922635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10204774870991346/picture?type=large", "display_name": "Ryan Dailey", "link": "https://stackoverflow.com/users/4922635/ryan-dailey"}, "edited": false, "score": 0, "creation_date": 1500922731, "post_id": 45287900, "comment_id": 77538582, "body": "Thanks that is exactly what I was looking for! Works great"}, {"owner": {"reputation": 2903, "user_id": 1160216, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/f0TsK.jpg?s=128&g=1", "display_name": "Mike Miller", "link": "https://stackoverflow.com/users/1160216/mike-miller"}, "edited": false, "score": 0, "creation_date": 1502966197, "post_id": 45287900, "comment_id": 78423200, "body": "Am I right in assuming you can just create a default handler (i.e. val handler:Handler = Handler()) then start it (i.e handler.post(runnableCode)) and it&#39;ll run every 5 seconds everything you put in the run block (before handler.postDelayed...)?"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 27, "last_activity_date": 1500922028, "creation_date": 1500922028, "answer_id": 45287900, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin/45287900#45287900", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>Since you can't reference a lambda you're currently in, and you can't reference the property you're defining while you're defining the lambda you're assigning to it, the best solution here is an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"noreferrer\"><code>object</code> expression</a>:</p>\n\n<pre><code>val runnableCode = object: Runnable {\n    override fun run() {\n        handler.postDelayed(this, 5000)\n    }\n}\n</code></pre>\n\n<p>Assuming that this property is not a <code>var</code> because you actually want to change it while this self-calling is happening.</p>\n"}, {"tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 3, "last_activity_date": 1500963202, "creation_date": 1500963202, "answer_id": 45295219, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin/45295219#45295219", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>As Kotlin does not yet allow recursive lambdas (see <a href=\"https://youtrack.jetbrains.com/issue/KT-10350\" rel=\"nofollow noreferrer\">KT-10350</a>), you must use other constructs, such as object expressions as in @zsmb13's answer, or ordinary functions as below</p>\n\n<pre><code>fun StartTimer() {\n    Timer_Preview.postDelayed(Runnable { runnable() }, 5000)\n}\n\nfun runnable() {\n    //Code here\n\n    // Run code again after 5 seconds\n    Timer_Preview.postDelayed(Runnable { runnable() }, 5000)\n}\n</code></pre>\n\n<p>However, in your particular case, it looks like you could just call <code>StartTimer()</code> again to re-arm the timer, assuming it doesn't do anything else:</p>\n\n<pre><code>private val RunnableCode = Runnable {\n    //Code here\n\n    //Run code again after 5 seconds\n    StartTimer()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 6565215, "user_type": "registered", "profile_image": "https://graph.facebook.com/1205292612838477/picture?type=large", "display_name": "Wojtek Oko\u0144ski", "link": "https://stackoverflow.com/users/6565215/wojtek-oko%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1538991002, "last_edit_date": 1538991002, "creation_date": 1538990455, "answer_id": 52699088, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin/52699088#52699088", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>You can do this with simple functions:  </p>\n\n<pre><code>private fun waitToDoSomethingRecursively() {\n    handler.postDelayed(::doSomethingRecursively, 5000)\n}\n\nprivate fun doSomethingRecursively () {\n    ...\n    waitToDoSomethingRecursively()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7649, "user_id": 208881, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bf3eafe58d6aba3dbab9d64307aeb6fb?s=128&d=identicon&r=PG", "display_name": "AFD", "link": "https://stackoverflow.com/users/208881/afd"}, "edited": false, "score": 3, "creation_date": 1554288728, "post_id": 54059339, "comment_id": 97693801, "body": "Don&#39;t forget to clear up when leaving, though, e.g. on Android:  myFixedRateTimer.cancel()"}], "tags": [], "owner": {"reputation": 5466, "user_id": 3248593, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/P0sIC.jpg?s=128&g=1", "display_name": "Morteza Rastgoo", "link": "https://stackoverflow.com/users/3248593/morteza-rastgoo"}, "is_accepted": false, "score": 13, "last_activity_date": 1546757984, "creation_date": 1546757984, "answer_id": 54059339, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin/54059339#54059339", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>Simply Use <code>fixedRateTimer</code></p>\n\n<pre><code> fixedRateTimer(\"timer\",false,0,5000){\n        this@MainActivity.runOnUiThread {\n            Toast.makeText(this@MainActivity, \"text\", Toast.LENGTH_SHORT).show()\n        }\n    }\n</code></pre>\n\n<p>Change initial delay by setting another value for the third parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 1992, "user_id": 8471798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1WiHS.jpg?s=128&g=1", "display_name": "canerkaseler", "link": "https://stackoverflow.com/users/8471798/canerkaseler"}, "is_accepted": false, "score": 3, "last_activity_date": 1583335849, "creation_date": 1583335849, "answer_id": 60529489, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin/60529489#60529489", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>I recommended <strong>SingleThread</strong> because it is very useful. If you would like to do job for each second, you can set because parameters of it:</p>\n\n<blockquote>\n  <p>Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit);</p>\n</blockquote>\n\n<p>TimeUnit values are: NANOSECONDS, MICROSECONDS, MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS. </p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>private fun mDoThisJob(){\n\n    Executors.newSingleThreadScheduledExecutor().scheduleAtFixedRate({\n        //TODO: You can write your periodical job here..!\n\n    }, 1, 1, TimeUnit.SECONDS)\n}\n</code></pre>\n\n<p>@canerkaseler</p>\n"}], "owner": {"reputation": 237, "user_id": 4922635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10204774870991346/picture?type=large", "display_name": "Ryan Dailey", "link": "https://stackoverflow.com/users/4922635/ryan-dailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16936, "favorite_count": 3, "accepted_answer_id": 45287900, "answer_count": 5, "score": 15, "last_activity_date": 1583335849, "creation_date": 1500921720, "question_id": 45287818, "link": "https://stackoverflow.com/questions/45287818/handler-to-run-task-every-5-seconds-kotlin", "title": "Handler to run task every 5 seconds Kotlin", "body": "<p>I would like to run a certain code every 5 seconds. I am having trouble achieving this with a handler. How can this be done in Kotlin? Here is what I have so far. Also to note, the variable Timer_Preview is a Handler.</p>\n\n<p><a href=\"https://i.stack.imgur.com/U9pAv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/U9pAv.png\" alt=\"My Code\"></a></p>\n"}, {"tags": ["java", "dependency-injection", "kotlin", "guice"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1500919309, "post_id": 45287126, "comment_id": 77536614, "body": "Try adding the <code>@JvmSuppressWildcards</code> annotation to the declaration of <code>val schedulers</code>"}, {"owner": {"reputation": 1879, "user_id": 1130975, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3682a919cff609aa82c72a2d3549eccf?s=128&d=identicon&r=PG&f=1", "display_name": "kboom", "link": "https://stackoverflow.com/users/1130975/kboom"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1500919425, "post_id": 45287126, "comment_id": 77536680, "body": "Adding it to constructor declaration doesn&#39;t change anything. Doing this on a field modifies the error message to No implementation for java.util.Map&lt;java.lang.String, com.scherule.scheduling.algorithms.SchedulingAlgorithm&gt; (...) So it appears it cannot even find this one."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500927404, "post_id": 45287126, "comment_id": 77540963, "body": "the error message seems to say that it couldn&#39;t find an implementation for SchedulingAlgorithm.  how is that defined?"}, {"owner": {"reputation": 1879, "user_id": 1130975, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3682a919cff609aa82c72a2d3549eccf?s=128&d=identicon&r=PG&f=1", "display_name": "kboom", "link": "https://stackoverflow.com/users/1130975/kboom"}, "edited": false, "score": 0, "creation_date": 1500980815, "post_id": 45287126, "comment_id": 77564196, "body": "IntervalProjectionAlgorithm is the only implementation bound as you can see in the first code snippet. And it cannot find a map not a schedulingAlgorithm, isn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 6497736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KEJ_eF2GFd0/AAAAAAAAAAI/AAAAAAAAACE/6UcYv4Z-NQ0/photo.jpg?sz=128", "display_name": "Eric Jiang", "link": "https://stackoverflow.com/users/6497736/eric-jiang"}, "edited": false, "score": 0, "creation_date": 1567703814, "post_id": 46177377, "comment_id": 102051935, "body": "Thanks, adding @JvmSuppressWildcards to the parameter that expects injection let me get around this."}], "tags": [], "owner": {"reputation": 746, "user_id": 968016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1dMs.jpg?s=128&g=1", "display_name": "Alen Vre\u010dko", "link": "https://stackoverflow.com/users/968016/alen-vre%c4%8dko"}, "is_accepted": false, "score": 2, "last_activity_date": 1505221866, "creation_date": 1505221866, "answer_id": 46177377, "question_id": 45287126, "link": "https://stackoverflow.com/questions/45287126/guice-mapbinder/46177377#46177377", "title": "Guice MapBinder", "body": "<p>The problem is in the fact Kotlin Generics != Java Generics.</p>\n\n<p>This Kotlin code.</p>\n\n<pre><code> @Named(\"scheduling.algorithms\") val schedulers: Map&lt;String, SchedulingAlgorithm&gt;\n</code></pre>\n\n<p>Gets compiled as</p>\n\n<pre><code>Map&lt;String, ? extends SchedulingAlgorithm&gt; and not Map&lt;String, SchedulingAlgorithm&gt;\n</code></pre>\n\n<p>When injecting Guice is looking for <code>Map&lt;String, ? extends SchedulingAlgorithm&gt;</code> for which it has no binding as the <code>MapBinder</code> created the binding for <code>Map&lt;String, SchedulingAlgorithm&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 433, "user_id": 6497736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KEJ_eF2GFd0/AAAAAAAAAAI/AAAAAAAAACE/6UcYv4Z-NQ0/photo.jpg?sz=128", "display_name": "Eric Jiang", "link": "https://stackoverflow.com/users/6497736/eric-jiang"}, "edited": false, "score": 0, "creation_date": 1567704436, "post_id": 49217177, "comment_id": 102052190, "body": "I think the annotation needs to be on the parameter Guice is trying to inject, not the on the @Provides method."}], "tags": [], "owner": {"reputation": 65, "user_id": 1664184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f1491a992c7361e823f9bda9fc430ea5?s=128&d=identicon&r=PG", "display_name": "Vraiment", "link": "https://stackoverflow.com/users/1664184/vraiment"}, "is_accepted": false, "score": 0, "last_activity_date": 1520748461, "creation_date": 1520748461, "answer_id": 49217177, "question_id": 45287126, "link": "https://stackoverflow.com/questions/45287126/guice-mapbinder/49217177#49217177", "title": "Guice MapBinder", "body": "<p>Instead of using a <code>MapBinder</code> you can try to add the following member method to your <code>AlgorithmsModule</code>:</p>\n\n<pre><code>@Provides\n@Singleton\n@Named(\"scheduling.algorithms\")\nfun schedulingAlgorithms(): Map&lt;String, @JvmSuppressWildcards SchedulingAlgorithm&gt; {\n    return IntervalProjectionAlgorithm()\n}\n</code></pre>\n"}], "owner": {"reputation": 1879, "user_id": 1130975, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3682a919cff609aa82c72a2d3549eccf?s=128&d=identicon&r=PG&f=1", "display_name": "kboom", "link": "https://stackoverflow.com/users/1130975/kboom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520748461, "creation_date": 1500919209, "question_id": 45287126, "link": "https://stackoverflow.com/questions/45287126/guice-mapbinder", "title": "Guice MapBinder", "body": "<p>I'm using Guice in Java + Kotlin project to inject map of algorithm implementation into a specific bean but I keep getting</p>\n\n<pre><code>1) No implementation for java.util.Map&lt;java.lang.String, ? extends com.scherule.scheduling.algorithms.SchedulingAlgorithm&gt; annotated with @com.google.inject.name.Named(value=scheduling.algorithms) was bound.\n  while locating java.util.Map&lt;java.lang.String, ? extends com.scherule.scheduling.algorithms.SchedulingAlgorithm&gt; annotated with @com.google.inject.name.Named(value=scheduling.algorithms)\n    for the 2nd parameter of com.scherule.scheduling.SchedulingJobConsumer.&lt;init&gt;(SchedulingJobConsumer.kt:17)\n  while locating com.scherule.scheduling.SchedulingJobConsumer\n</code></pre>\n\n<p>The definition of the module is defined like this:</p>\n\n<pre><code>class AlgorithmsModule : AbstractModule() {\n\n    override fun configure() {\n        MapBinder.newMapBinder(binder(),\n                String::class.java,\n                SchedulingAlgorithm::class.java,\n                Names.named(\"scheduling.algorithms\")\n        ).addBinding(\"interval-projection\").toInstance(IntervalProjectionAlgorithm())\n    }\n\n}\n</code></pre>\n\n<p>And the caller code is:</p>\n\n<pre><code>@Singleton\nclass SchedulingJobConsumer\n@Inject constructor(\n        @Named(\"scheduling.channel\") channel: Channel,\n        @Named(\"scheduling.algorithms\") val schedulers: Map&lt;String, SchedulingAlgorithm&gt;\n) : DefaultConsumer(channel) ...\n</code></pre>\n\n<p>But when I do</p>\n\n<pre><code>injector.getInstance(Key.get(new TypeLiteral&lt;Map&lt;String, SchedulingAlgorithm&gt;&gt;() {}, named(\"scheduling.algorithms\")))\n</code></pre>\n\n<p>it is there. What's wrong?</p>\n"}, {"tags": ["java", "spring", "kotlin"], "comments": [{"owner": {"reputation": 8060, "user_id": 3834036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEZNI.png?s=128&g=1", "display_name": "Lior Bar-On", "link": "https://stackoverflow.com/users/3834036/lior-bar-on"}, "edited": false, "score": 2, "creation_date": 1500919122, "post_id": 45287003, "comment_id": 77536497, "body": "why not simply set it to -1, or Int.MinValue to mark it was not initialized? Another option is to use BigInteger (but may have performance impact on scale)"}, {"owner": {"reputation": 1070, "user_id": 2576122, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y8tPg.png?s=128&g=1", "display_name": "Mateusz Chrzaszcz", "link": "https://stackoverflow.com/users/2576122/mateusz-chrzaszcz"}, "reply_to_user": {"reputation": 8060, "user_id": 3834036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEZNI.png?s=128&g=1", "display_name": "Lior Bar-On", "link": "https://stackoverflow.com/users/3834036/lior-bar-on"}, "edited": false, "score": 0, "creation_date": 1500920183, "post_id": 45287003, "comment_id": 77537111, "body": "@LiorBar-On I guess I was overthinking this one :) Simplicity is a king!"}], "answers": [{"comments": [{"owner": {"reputation": 1070, "user_id": 2576122, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y8tPg.png?s=128&g=1", "display_name": "Mateusz Chrzaszcz", "link": "https://stackoverflow.com/users/2576122/mateusz-chrzaszcz"}, "edited": false, "score": 0, "creation_date": 1500919387, "post_id": 45287107, "comment_id": 77536654, "body": "I admit this would work, but I am not entirely sure if this is the only plausible solution. If you do not mind I will give it a few more days. If no one suggests anything better I will accept it as an answer."}, {"owner": {"reputation": 1070, "user_id": 2576122, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y8tPg.png?s=128&g=1", "display_name": "Mateusz Chrzaszcz", "link": "https://stackoverflow.com/users/2576122/mateusz-chrzaszcz"}, "edited": false, "score": 0, "creation_date": 1500920216, "post_id": 45287107, "comment_id": 77537142, "body": "Yeah, that&#39;s more like it in a bit more complex situation when you can&#39;t simply default it!"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 1070, "user_id": 2576122, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y8tPg.png?s=128&g=1", "display_name": "Mateusz Chrzaszcz", "link": "https://stackoverflow.com/users/2576122/mateusz-chrzaszcz"}, "edited": false, "score": 2, "creation_date": 1500920250, "post_id": 45287107, "comment_id": 77537169, "body": "@MateuszChrzaszcz yes, sir. I&#39;m glad it helped you. but I think you never need this complex features, since if the value is not found, spring will throw a bean can&#39;t initialized exception. just use the simplest solution is ok."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 4, "last_activity_date": 1500920743, "last_edit_date": 1500920743, "creation_date": 1500919151, "answer_id": 45287107, "question_id": 45287003, "link": "https://stackoverflow.com/questions/45287003/compiler-warning-while-using-value-annotation-in-kotlin-project/45287107#45287107", "title": "Compiler warning while using @Value annotation in Kotlin project", "body": "<p>The simplest solution is don't to use a late-initialized property since Kotlin late-initialized property don't support for primitive types now, and you can initialize it with the default value of spring expression, for example:</p>\n\n<pre><code>@Value(#{config['poolCapacity']?:'5000'})\nvar somePool: Int = 5000\n</code></pre>\n\n<p>A complex example you can write a delegated properties, but you must annotated at <code>setter</code> by <code>@set</code> site-target rather than <code>field</code>/<code>property</code> , for example:</p>\n\n<pre><code>@set:Value(#{config['poolCapacity']?:'5000'})\nvar value by required&lt;Int&gt;()\n</code></pre>\n\n<hr>\n\n<pre><code>inline fun &lt;reified T&gt; required(): ReadWriteProperty&lt;Any, T&gt; {\n    return object : ReadWriteProperty&lt;Any, T&gt; {\n        var value: T? = null;\n        override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): T = value as T\n\n        override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: T) {\n            this.value = value;\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 2576122, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/y8tPg.png?s=128&g=1", "display_name": "Mateusz Chrzaszcz", "link": "https://stackoverflow.com/users/2576122/mateusz-chrzaszcz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "accepted_answer_id": 45287107, "answer_count": 1, "score": 4, "last_activity_date": 1500920743, "creation_date": 1500918752, "question_id": 45287003, "link": "https://stackoverflow.com/questions/45287003/compiler-warning-while-using-value-annotation-in-kotlin-project", "title": "Compiler warning while using @Value annotation in Kotlin project", "body": "<p>Is there any type in Kotlin language that I could use in a late initialization instead of <code>java.lang.Integer</code> so that I do not get a compiler warning?</p>\n\n<p>Let's say I have a class like this one:</p>\n\n<pre><code>class SomeClass {\n @Value(#{config['poolCapacity']?:'5000'})\n lateinit var somePool: Integer\n}\n</code></pre>\n\n<p>I can't use <code>Int</code> type from Kotlin because it's primitive type and <code>lazeint</code> does not accept it. </p>\n\n<p>If I stick to <code>java.lang.Integer</code> it works just fine but I am getting compiler warning of this sort:</p>\n\n<blockquote>\n  <p>SomeClass.kt: (20, 24): This class shouldn't be used in Kotlin. Use\n  kotlin.Int instead.</p>\n</blockquote>\n\n<p>Obviously I might create needed type myself but I simply wonder if there is something out of the box and recommended that we should use in such situation and I simply can't find it? (Annotated constructor is not a solution in this particular case).</p>\n"}, {"tags": ["android", "json", "android-asynctask", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1500918023, "post_id": 45286747, "comment_id": 77535876, "body": "Well, did <code>ex.printStackTrace()</code> get executed instead?"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1500918082, "post_id": 45286747, "comment_id": 77535909, "body": "maybe <code>gson</code> can&#39;t create a <code>MutableList</code> since it is an interface. have you try <code>List&lt;Category&gt;</code> because gson support java as well."}, {"owner": {"reputation": 34447, "user_id": 4936904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jh6MN.jpg?s=128&g=1", "display_name": "Pavneet_Singh", "link": "https://stackoverflow.com/users/4936904/pavneet-singh"}, "edited": false, "score": 1, "creation_date": 1500918193, "post_id": 45286747, "comment_id": 77535960, "body": "try add <code>adapter!!.notifyDataSetChanged()</code> at the end of <code>onPostExecute</code>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1500918246, "post_id": 45286747, "comment_id": 77535989, "body": "Or use <code>adapter.clear(); adapter.addAll(result)</code> instead"}, {"owner": {"reputation": 1, "user_id": 8359184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b868c926f12bd5331ea3e340d3c8dca2?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTon", "link": "https://stackoverflow.com/users/8359184/nguyenton"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1500918368, "post_id": 45286747, "comment_id": 77536047, "body": "The program was built successfully via virtual device without errors . So that method doesn&#39;t execute ! @cricket_007"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1500922157, "post_id": 45286747, "comment_id": 77538260, "body": "Just because your code builds doesn&#39;t mean you won&#39;t ever hit a <code>catch</code> block or any runtime exceptions"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8359184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b868c926f12bd5331ea3e340d3c8dca2?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTon", "link": "https://stackoverflow.com/users/8359184/nguyenton"}, "is_accepted": true, "score": 0, "last_activity_date": 1500995842, "creation_date": 1500995842, "answer_id": 45307403, "question_id": 45286747, "link": "https://stackoverflow.com/questions/45286747/kotlin-application-doesnt-show-my-json-array/45307403#45307403", "title": "Kotlin application doesn&#39;t show my json array", "body": "<p>I just found the solution for my problem . I forgot to add http:// before the link. I just use Logging function and I got a message \" no protocol\" </p>\n\n<p>Just a newbie mistake. Sorry you guys!</p>\n"}], "owner": {"reputation": 1, "user_id": 8359184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b868c926f12bd5331ea3e340d3c8dca2?s=128&d=identicon&r=PG&f=1", "display_name": "NguyenTon", "link": "https://stackoverflow.com/users/8359184/nguyenton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 45307403, "answer_count": 1, "score": 0, "last_activity_date": 1500995842, "creation_date": 1500917883, "last_edit_date": 1500957163, "question_id": 45286747, "link": "https://stackoverflow.com/questions/45286747/kotlin-application-doesnt-show-my-json-array", "title": "Kotlin application doesn&#39;t show my json array", "body": "<p>I just started to learn Kotlin and I have tried to make my first android application with Kotlin.\nI have a webservice which built on Restful API and it returns a json array for me like the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ggszP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ggszP.jpg\" alt=\"Json Array\"></a></p>\n\n<p>My Kotlin code for showing json array via gson library !</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    val TAG:String=\"TipCalculatorActivity\"\n    var adapter:ArrayAdapter&lt;Category&gt;?=null\n    var dsSP: MutableList&lt;Category&gt; = mutableListOf()\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        adapter=ArrayAdapter(this,android.R.layout.simple_list_item_1,dsSP)\n        lvCategory.adapter=adapter\n    }\n\n    override fun onResume() {\n        super.onResume()\n        var task=CategoryTask()\n        task.execute()\n    }\n\n    inner class CategoryTask:AsyncTask&lt;Void, Void, MutableList&lt;Category&gt;&gt;() {\n        override fun onPostExecute(result: MutableList&lt;Category&gt;?)\n        {\n            super.onPostExecute(result)\n            dsSP.clear()\n            dsSP.addAll(result!!)\n        }\n        override fun doInBackground(vararg p0: Void?): MutableList&lt;Category&gt;\n        {\n            var dsFromServer:MutableList&lt;Category&gt; = mutableListOf()\n            try {\n                var url:URL=URL(\"192.168.31.86/shop/api/category\")\n                var conn: HttpURLConnection = url.openConnection() as HttpURLConnection\n                conn.requestMethod=\"GET\"\n                conn.addRequestProperty(\"content-type\",\"application/json;charset:UTF-8\")\n                var isr= InputStreamReader(conn.getInputStream(), \"UTF-8\")\n                var gson=Gson()\n                dsFromServer=gson.fromJson(isr,object:TypeToken&lt;MutableList&lt;Category&gt;&gt;(){}.type)\n                isr.close()\n\n\n            }\n            catch (ex:Exception)\n            {\n                ex.printStackTrace()\n\n            }\n            return dsFromServer\n        }\n\n        override fun onPreExecute()\n        {\n            super.onPreExecute()\n            dsSP.clear()\n        }\n\n\n    }\n\n}\n</code></pre>\n\n<p>Of course, I declared all attributes of json array on another class , exactly like webservice </p>\n\n<p>The result has nothing to show. I don't know why.\n<a href=\"https://i.stack.imgur.com/YdVEG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YdVEG.jpg\" alt=\"Nothing but a blank space\"></a></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1500913992, "post_id": 45285702, "comment_id": 77533661, "body": "You can make a new &quot;NonEmptyString&quot; type that wraps a string, and ensures it&#39;s never blank by checking the &quot;input&quot; string given to its constructor. You can also only expose operations on the wrapped string that won&#39;t cause it to become empty. Optionally, you can add such operations, but with checks to ensure they don&#39;t actually result in an empty String."}], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 3, "creation_date": 1500914752, "post_id": 45285841, "comment_id": 77534063, "body": "Also, there are <code>observable</code> and <code>vetoable</code> in <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/index.html\" rel=\"nofollow noreferrer\"><code>kotlin.properties.Delegates</code></a> that can slightly simplify this implementation: you won&#39;t need to implement the <code>get&#47;setValue(...)</code> operators but instead just pass the code that checks the assigments."}, {"owner": {"reputation": 5131, "user_id": 5135551, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ILHpb.jpg?s=128&g=1", "display_name": "Jim Leask", "link": "https://stackoverflow.com/users/5135551/jim-leask"}, "edited": false, "score": 0, "creation_date": 1500922664, "post_id": 45285841, "comment_id": 77538539, "body": "Ah - String is final, so you can&#39;t do this by a subclass. Using Delegates looks good. Likely will either throw an exception in the constructor and the setter, or use <code>vetoable</code> to simply reject the input, depending on what works best for my usage. Thx."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1500914432, "creation_date": 1500914432, "answer_id": 45285841, "question_id": 45285702, "link": "https://stackoverflow.com/questions/45285702/how-to-enforce-an-empty-non-null-string-in-kotlin/45285841#45285841", "title": "How to enforce an empty, non-null String in Kotlin?", "body": "<p>If you need this behavior in multiple places, you can create a delegate to handle it, where you can do the check either in the setter of the private property, or in the <code>setValue</code> function:</p>\n\n<pre><code>class NonEmptyString(private var str: String) {\n    init {\n        if (str.isEmpty()) {\n            throw IllegalArgumentException(\"Invalid initial value\")\n        }\n    }\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;) = str\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) {\n        if (value.isEmpty()) {\n            return // or throw or something\n        }\n        str = value\n    }\n}\n</code></pre>\n\n<p>The usage of this would look like this:</p>\n\n<pre><code>var nonEmpty by NonEmptyString(\"something\")\nnonEmpty = \"\"\nprintln(nonEmpty) // \"something\"\n</code></pre>\n"}], "owner": {"reputation": 5131, "user_id": 5135551, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ILHpb.jpg?s=128&g=1", "display_name": "Jim Leask", "link": "https://stackoverflow.com/users/5135551/jim-leask"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2691, "favorite_count": 0, "accepted_answer_id": 45285841, "answer_count": 1, "score": 4, "last_activity_date": 1500914432, "creation_date": 1500913833, "question_id": 45285702, "link": "https://stackoverflow.com/questions/45285702/how-to-enforce-an-empty-non-null-string-in-kotlin", "title": "How to enforce an empty, non-null String in Kotlin?", "body": "<p>I often want to hold a string that can not be null <strong>or blank</strong> - whitespace isn't good enough. The compiler handles <code>String?</code> nicely to prevent null, and we can use <code>aNullableString.isNullOrBlank()</code> to check if it is null or blank. However, this requires that the blank check be handled everywhere it is used then handle errors if it is blank, which can cause unexpected errors if you miss a spot.</p>\n\n<p>Is there an easier way to define a type or extension to <code>String</code> that will enforce that the string must not be blank?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "edited": false, "score": 0, "creation_date": 1500915951, "post_id": 45285996, "comment_id": 77534734, "body": "thanks, my activity is implemented with java, how can i set this listener? for example: <code>public static void setOnItemClickListener(OnItemClickListener lst){ progressListener = l }</code> and from activity for example <code>DownloadProgressView.setOnItemClickInterface(new ...){}</code>"}, {"owner": {"reputation": 632, "user_id": 7341528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddee6302cbca0f95b323769671827d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vova Stelmashchuk", "link": "https://stackoverflow.com/users/7341528/vova-stelmashchuk"}, "reply_to_user": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "edited": false, "score": 0, "creation_date": 1500916215, "post_id": 45285996, "comment_id": 77534882, "body": "Use static for setListener it is realy better idea."}], "tags": [], "owner": {"reputation": 632, "user_id": 7341528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddee6302cbca0f95b323769671827d1?s=128&d=identicon&r=PG&f=1", "display_name": "Vova Stelmashchuk", "link": "https://stackoverflow.com/users/7341528/vova-stelmashchuk"}, "is_accepted": false, "score": 6, "last_activity_date": 1616359535, "last_edit_date": 1616359535, "creation_date": 1500914972, "answer_id": 45285996, "question_id": 45285491, "link": "https://stackoverflow.com/questions/45285491/kotlin-add-custom-listener-for-clicked-on-widgets-on-android/45285996#45285996", "title": "Kotlin add custom listener for clicked on widgets on android", "body": "<p>For init progreessListener use following code</p>\n<pre><code>var listener: () -&gt; Unit = {}\n</code></pre>\n<p>For call onClick use : <code>listener()</code></p>\n<p>For implement your interface use following code :</p>\n<pre><code>var onItemClickInterface : () -&gt; Unit = {\n  //TODO\n}\n</code></pre>\n"}], "owner": {"reputation": 11571, "user_id": 1830228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/8Yfo5.png?s=128&g=1", "display_name": "DolDurma", "link": "https://stackoverflow.com/users/1830228/doldurma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5522, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1616359535, "creation_date": 1500913111, "last_edit_date": 1500915201, "question_id": 45285491, "link": "https://stackoverflow.com/questions/45285491/kotlin-add-custom-listener-for-clicked-on-widgets-on-android", "title": "Kotlin add custom listener for clicked on widgets on android", "body": "<p>I'm newbie in Kotiln and this code is simple class which I'm using on Android. In this class I want to make simple listener to detect clicks on item inside of a class such as activity, fragment or adapter. My problem is that I can define this listener for <code>circularProgressView</code> widget.</p>\n\n<pre><code>class DownloadProgressView : RelativeLayout {\n\n    var progressListener: ((downloading: Boolean) -&gt; Unit)? = null\n    private var downloading = false\n\n    constructor(context: Context?) : super(context) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n        init()\n    }\n\n    constructor(context: Context?, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init()\n    }\n\n    private fun init() {\n        LayoutInflater.from(context).inflate(R.layout.download_progress_layout, this)\n        circularProgressView.setOnClickListener {\n            downloading = !downloading\n            setProgressViews(downloading)\n            progressListener?.invoke(downloading)\n\n            //if listener!=null then onItemClicked.onClick();\n        }\n    }\n}\n</code></pre>\n\n<p>How can I know if user clicked on <code>circularProgressView</code> inside activity? </p>\n\n<p>I'm trying to implement this interface and use it inside Kotlin:</p>\n\n<pre><code>public interface OnItemClickListener {\n    void onClick(int position);\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-jobscheduler", "firebase-job-dispatcher"], "comments": [{"owner": {"reputation": 1670, "user_id": 6377726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86abe216f2585dbc74b761a713f12766?s=128&d=identicon&r=PG&f=1", "display_name": "Android Admirer", "link": "https://stackoverflow.com/users/6377726/android-admirer"}, "edited": false, "score": 0, "creation_date": 1500912890, "post_id": 45285397, "comment_id": 77533009, "body": "you don&#39;t have any semi colons <code>;</code>?!"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1670, "user_id": 6377726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86abe216f2585dbc74b761a713f12766?s=128&d=identicon&r=PG&f=1", "display_name": "Android Admirer", "link": "https://stackoverflow.com/users/6377726/android-admirer"}, "edited": false, "score": 1, "creation_date": 1500912971, "post_id": 45285397, "comment_id": 77533051, "body": "@Omar This is Kotlin code."}, {"owner": {"reputation": 1670, "user_id": 6377726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86abe216f2585dbc74b761a713f12766?s=128&d=identicon&r=PG&f=1", "display_name": "Android Admirer", "link": "https://stackoverflow.com/users/6377726/android-admirer"}, "edited": false, "score": 0, "creation_date": 1500913014, "post_id": 45285397, "comment_id": 77533091, "body": "I was just asking..."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 5272499, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-SUWiPljjfW4/AAAAAAAAAAI/AAAAAAAAATo/Sn_CwazQ5Y4/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041a\u0443\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5272499/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9a%d1%83%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1500923012, "creation_date": 1500923012, "answer_id": 45288177, "question_id": 45285397, "link": "https://stackoverflow.com/questions/45285397/why-my-job-is-not-starting/45288177#45288177", "title": "Why my job is not starting?", "body": "<p>I must put in bundle with </p>\n\n<pre><code>bundle.putString(\"TAG\", gson.toJson(object))\n</code></pre>\n\n<p>but not</p>\n\n<pre><code>bundle.putParcelable(\"TAG\", object)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1253, "user_id": 879440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5739b41dd6402ea5bfd61ce63cc933b2?s=128&d=identicon&r=PG", "display_name": "ctate", "link": "https://stackoverflow.com/users/879440/ctate"}, "is_accepted": true, "score": 0, "last_activity_date": 1502927721, "creation_date": 1502927721, "answer_id": 45724652, "question_id": 45285397, "link": "https://stackoverflow.com/questions/45285397/why-my-job-is-not-starting/45724652#45724652", "title": "Why my job is not starting?", "body": "<p>Your manifest declaration is wrong: you need to declare job services as requiring a specific permission that only the OS itself can use.  From <a href=\"https://developer.android.com/reference/android/app/job/JobService.html#PERMISSION_BIND\" rel=\"nofollow noreferrer\">the JobService documentation</a>:</p>\n\n<blockquote>\n  <p>Job services must be protected with this permission:</p>\n  \n  <blockquote>\n    <p><code>&lt;service android:name=\"MyJobService\"\n                 android:permission=\"android.permission.BIND_JOB_SERVICE\" &gt;</code></p>\n  </blockquote>\n  \n  <p>If a job service is declared in the manifest but not protected with this permission, that service will be ignored by the OS.</p>\n</blockquote>\n"}], "owner": {"reputation": 117, "user_id": 5272499, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-SUWiPljjfW4/AAAAAAAAAAI/AAAAAAAAATo/Sn_CwazQ5Y4/photo.jpg?sz=128", "display_name": "\u041d\u0438\u043a\u0438\u0442\u0430 \u041a\u0443\u043b\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/5272499/%d0%9d%d0%b8%d0%ba%d0%b8%d1%82%d0%b0-%d0%9a%d1%83%d0%bb%d0%b8%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 45724652, "answer_count": 2, "score": 0, "last_activity_date": 1502927721, "creation_date": 1500912776, "question_id": 45285397, "link": "https://stackoverflow.com/questions/45285397/why-my-job-is-not-starting", "title": "Why my job is not starting?", "body": "<p>I try using JobSchedulers for my chat app (for async send message):</p>\n\n<pre><code> val job = dispatcher.newJobBuilder()\n                .setService(BackgroundJobService::class.java)\n                .setTag(BackgroundJobService.TASKTAG_SEND_MESSAGE)\n                .setReplaceCurrent(false)\n                .setConstraints(Constraint.ON_ANY_NETWORK)\n                .setExtras(bundle)\n                .setTrigger(Trigger.executionWindow(0, 1))\n                .build()\ndispatcher.mustSchedule(job)\n</code></pre>\n\n<p>And add my service in manifest:</p>\n\n<pre><code>&lt;service\n            android:exported=\"false\"\n            android:name=\".data.background.service.BackgroundJobService\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"com.firebase.jobdispatcher.ACTION_EXECUTE\"/&gt;\n            &lt;/intent-filter&gt;\n&lt;/service&gt;\n</code></pre>\n\n<p>I write this JobService and it not called onCreate() and not called onDestroy()</p>\n\n<pre><code>class BackgroundJobService : JobService() {\n        companion object {\n            val TASKTAG_SEND_MESSAGE = \"send_message\"\n        }\n\n        @Inject\n        lateinit var webSocket: IRxWebSocket\n        var subscribe: Disposable? = null\n\n        override fun onCreate() {\n            super.onCreate()\n            App.appComponent.inject(this)\n            subscribe = webSocket.connect().subscribe({}, {})\n        }\n\n        override fun onStartJob(job: JobParameters?): Boolean {\n            return true // Debug point here\n        }\n\n        override fun onStopJob(job: JobParameters?): Boolean {\n            return true\n        }\n\n        override fun onDestroy() {\n            super.onDestroy()\n            subscribe?.dispose()\n        }\n    }\n</code></pre>\n\n<p>But my onStartJob not calling! Where is my mistake?\nSomething i see message \"Google Play services has stopped\".</p>\n"}, {"tags": ["java", "kotlin", "rx-android", "reactive"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500912204, "post_id": 45284570, "comment_id": 77532577, "body": "could you give more information? I don&#39;t understand your intention since English is not my strength."}, {"owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913079, "post_id": 45284570, "comment_id": 77533120, "body": "Sorry. What would you like to know? Non-technical requirements:  Have a queue of things to process Be able to listen to the result of the queue items being processed and do stuff with them  Be able to turn on and off the processing asynchronously"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913131, "post_id": 45284570, "comment_id": 77533142, "body": "Sadly, I can&#39;t helped you. :)"}, {"owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913299, "post_id": 45284570, "comment_id": 77533254, "body": "I just added some more concrete examples."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913409, "post_id": 45284570, "comment_id": 77533321, "body": "what&#39;s you want is switch <code>on&#47;off</code> feature?"}, {"owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913641, "post_id": 45284570, "comment_id": 77533452, "body": "Yes. Backed with a live queue which may have items removed, reordered. Also may run out of items and then be refilled."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500913846, "post_id": 45284570, "comment_id": 77533576, "body": "Hey, it seems to  <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/subjects/PublishSubject.html\" rel=\"nofollow noreferrer\">PublishSubject</a> is for you, but you need to wrap it to support <code>on&#47;off</code> feature."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1500913938, "post_id": 45284570, "comment_id": 77533633, "body": "You are looking for <a href=\"https://github.com/akarnokd/RxJava2Extensions\" rel=\"nofollow noreferrer\"><code>valve()</code></a>"}, {"owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1500914164, "post_id": 45284570, "comment_id": 77533747, "body": "@EpicPandaForce that looks like what I need. I&#39;ve seen you on the androiddev subreddit before :). Thanks!"}, {"owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1500914262, "post_id": 45284570, "comment_id": 77533805, "body": "@EpicPandaForce will you add <code>valve</code> as an answer below so I can mark it as correct and give you the karma?"}], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 1, "last_activity_date": 1500921448, "creation_date": 1500921448, "answer_id": 45287749, "question_id": 45284570, "link": "https://stackoverflow.com/questions/45284570/rxjava-live-reactive-queue-with-on-off-switch/45287749#45287749", "title": "RxJava Live Reactive Queue (with on off switch)", "body": "<p>You can use <code>valve()</code> operator from <a href=\"https://github.com/akarnokd/RxJava2Extensions\" rel=\"nofollow noreferrer\">RxJava2Extensions</a> for this.</p>\n\n<pre><code>public PublishProcessor&lt;Boolean&gt; flowControl = PublishProcessor.create();\n\npublic void start() {\n    Flowable./*...*/\n            .compose(FlowableTransformers.valve(flowControl))\n            .subscribe(/*...*/);\n</code></pre>\n\n<p>In which case <code>flowControl.onNext(true)</code> will start the stream, and <code>flowControl.onNext(false)</code> will stop and queue it.</p>\n\n<p>(Any other Rx2 type must be converted to Flowable to use it.)</p>\n"}, {"tags": [], "owner": {"reputation": 5095, "user_id": 1055284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e1kcy.jpg?s=128&g=1", "display_name": "Ben Barkay", "link": "https://stackoverflow.com/users/1055284/ben-barkay"}, "is_accepted": false, "score": 0, "last_activity_date": 1601741158, "last_edit_date": 1601741158, "creation_date": 1601739229, "answer_id": 64185928, "question_id": 45284570, "link": "https://stackoverflow.com/questions/45284570/rxjava-live-reactive-queue-with-on-off-switch/64185928#64185928", "title": "RxJava Live Reactive Queue (with on off switch)", "body": "<p>I've been dealing with this issue recently (listening for pressure when managing NIO selection keys) and converged upon a relatively simple solution which uses common operators:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Queue&lt;T&gt; queue;\n\n// This controls whether the queue is being polled or not.\n// It's probably a good idea to make sure this emits the last value upon\n// subscription using a BehaviorProcessor or a ReplayFlowable etc.\nFlowable&lt;Boolean&gt; condition;\n\n// This is a &quot;dumb&quot; generator which continuously polls the queue and emits items\nFlowable&lt;T&gt; generator = Flowable.generate(emitter -&gt; {\n    T item = queue.poll();\n    if (item != null) {\n        emitter.onNext(item);\n    }\n});\n\n// We wire our generator and condition together to achieve the expected result.\nFlowable&lt;T&gt; drainWhileCondition = condition.distinctUntilChanged()\n    .concatMap(c -&gt; c\n        ? generator.takeUntil(condition.filter(Boolean.FALSE::equals))\n        : Flowable.empty());\n</code></pre>\n<hr />\n<p>You can also make a transformer method for this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;T&gt; FlowableTransformer&lt;T, T&gt; valve(Flowable&lt;Boolean&gt; condition) {\n    return upstream -&gt; condition.distinctUntilChanged()\n            .concatMap(c -&gt; c\n                    ? upstream.takeUntil(condition.filter(Boolean.FALSE::equals))\n                    : Flowable.empty());\n}\n</code></pre>\n<p>And use it like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flowable&lt;T&gt; generator;\nFlowable&lt;Boolean&gt; condition;\n\nFlowable&lt;T&gt; valvedGenerator = generator.compose(valve(condition));\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 3363726, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PpgOU.jpg?s=128&g=1", "display_name": "AnnonAshera", "link": "https://stackoverflow.com/users/3363726/annonashera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 45287749, "answer_count": 2, "score": 0, "last_activity_date": 1601741158, "creation_date": 1500910243, "last_edit_date": 1500913823, "question_id": 45284570, "link": "https://stackoverflow.com/questions/45284570/rxjava-live-reactive-queue-with-on-off-switch", "title": "RxJava Live Reactive Queue (with on off switch)", "body": "<p>Working on an android app in kotlin.</p>\n\n<p>I need to set up a system to be able to do work from a live queue (and observe the results of the work in a stream).</p>\n\n<p>But I also have to be able to toggle the \"queue processing\" depending on a couple external factors (which also come in as streams) like <code>networkIsAvailable (Observable&lt;Boolean&gt;)</code>.</p>\n\n<p>I can't use <code>Observable.fromIterable()</code> because that creates the iterable right away and this queue will adjust and items may get removed.</p>\n\n<p>I need some kind of loop where I can finish the item, check to make sure we should keep going, and then pop the first item of the queue and do that.</p>\n\n<p>I'm not sure how to do some kind of loop like this in a subscription?</p>\n\n<p>The queue can also become empty and things should start again when the toggle is turned back on.</p>\n\n<p>Perhaps I should push out that determination (about whether to process the next item in the queue or not) into a <code>Subject&lt;Boolean&gt;?</code> and then have a subscription to that subject that starts the process again?</p>\n\n<p>examples:</p>\n\n<p>turn on ---- process top of queue, process top of queue (previous was polled off the queue) --- turn off -- no more processing</p>\n\n<p>turn back on -- process top of queue, queue-empty -- stops</p>\n\n<p>add item to queue -- processes -- stops queue empty</p>\n\n<p>turn on processing -- add item to queue-- doesnt process until its turned back on</p>\n\n<p>turn on -- processing top item</p>\n"}, {"tags": ["list", "dictionary", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 5, "last_activity_date": 1500909378, "creation_date": 1500909378, "answer_id": 45284255, "question_id": 45284134, "link": "https://stackoverflow.com/questions/45284134/convert-maps-to-list-of-maps-in-kotlin/45284255#45284255", "title": "Convert maps to list of maps in Kotlin", "body": "<p>Just to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"noreferrer\">Map#map</a> is sufficient for you, for example:</p>\n\n<pre><code>fun toListOfMaps(map: Map&lt;Int, String&gt;): List&lt;Map&lt;String, Any&gt;&gt; {\n    //               v--- destructuring `Map.Entry` here\n    return map.map { (number, answer) -&gt; \n        mapOf(\"number\" to number, \"answer\" to answer) \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2244, "favorite_count": 0, "accepted_answer_id": 45284255, "answer_count": 1, "score": 4, "last_activity_date": 1534339650, "creation_date": 1500909022, "last_edit_date": 1534339650, "question_id": 45284134, "link": "https://stackoverflow.com/questions/45284134/convert-maps-to-list-of-maps-in-kotlin", "title": "Convert maps to list of maps in Kotlin", "body": "<p>I am trying to convert a traditional map:</p>\n\n<pre><code>1 -&gt; \"YES\",\n2 -&gt; \"NO\",\n3 -&gt; \"YES\",\n...\n</code></pre>\n\n<p>To a list of maps with fixed keys like such:</p>\n\n<pre><code>[\n  &lt;number -&gt; 1,\n   answer -&gt; \"YES\"&gt;,\n  &lt;number -&gt; 2,\n   answer -&gt; \"NO\"&gt;,\n  ...\n]\n</code></pre>\n\n<p>Right now I have a solution which does not look good and is not really making use of Kotlin's functional features. I was wondering if there was a clearer solution that did:</p>\n\n<pre><code>fun toListOfMaps(map: Map&lt;Int, String&gt;): List&lt;Map&lt;String, Any&gt;&gt; {\n    val listOfMaps = emptyList&lt;Map&lt;String, Any&gt;&gt;().toMutableList()\n\n    for (entry in map) {\n        val mapElement = mapOf(\n                \"number\" to entry.component1(),\n                \"answer\" to entry.component2()\n        )\n        listOfMaps.add(mapElement)\n    }\n\n    return listOfMaps\n}\n</code></pre>\n"}, {"tags": ["android", "sqlite", "kotlin", "android-room", "android-architecture-components"], "answers": [{"tags": [], "owner": {"reputation": 1654, "user_id": 7008181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/EQAyE.jpg?s=128&g=1", "display_name": "Ahmed Abd-Elmeged", "link": "https://stackoverflow.com/users/7008181/ahmed-abd-elmeged"}, "is_accepted": true, "score": 0, "last_activity_date": 1500913400, "creation_date": 1500913400, "answer_id": 45285573, "question_id": 45283569, "link": "https://stackoverflow.com/questions/45283569/error-with-making-enum-as-primary-key-at-room-database-library/45285573#45285573", "title": "Error with making Enum as primary key at Room database Library", "body": "<p>I has this error, because kotlin apparently generate multiple java constructors for single kotlin constructor with default argument values. Working code i edit the data class to be like this:</p>\n\n<pre><code>@Entity(tableName = Constants.TABLE_NAME)\ndata class Sura(\n        @PrimaryKey\n        val quranIndex: QuranIndex,\n\n        @ColumnInfo(name = \"sura_name\")\n        val suraName: String ,\n\n        @ColumnInfo(name = \"download_url\")\n        val downloadUrl: String\n)\n</code></pre>\n"}], "owner": {"reputation": 1654, "user_id": 7008181, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/EQAyE.jpg?s=128&g=1", "display_name": "Ahmed Abd-Elmeged", "link": "https://stackoverflow.com/users/7008181/ahmed-abd-elmeged"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 45285573, "answer_count": 1, "score": 0, "last_activity_date": 1500913400, "creation_date": 1500907493, "last_edit_date": 1500908292, "question_id": 45283569, "link": "https://stackoverflow.com/questions/45283569/error-with-making-enum-as-primary-key-at-room-database-library", "title": "Error with making Enum as primary key at Room database Library", "body": "<p>i am using a enum to be a primary key for the Room database library with TypeConvertor and it dos't compile at run time and throw an error</p>\n\n<p>Here is my converter</p>\n\n<pre><code>class QuranIndexConverter {\n\n@TypeConverter\nfun toQuranIndex(index: String): QuranIndex {\n    return QuranIndex.valueOf(index)\n}\n\n@TypeConverter\nfun toStringIndex(quranIndex: QuranIndex): String {\n    return quranIndex.name\n}}\n</code></pre>\n\n<p>Here the Dao</p>\n\n<pre><code>    @Dao\ninterface SuraDao {\n\n    @Query(\"SELECT * FROM \" + Constants.TABLE_NAME)\n    fun getAll(): LiveData&lt;List&lt;Sura&gt;&gt;\n\n    @Insert\n    fun insertAll(suras: List&lt;Sura&gt;)\n\n    @Insert\n    fun insert(sura: Sura)\n\n    @Delete\n    fun deleteAll(suras: List&lt;Sura&gt;)\n\n    @Delete\n    fun delete(sura: Sura)}\n</code></pre>\n\n<p>Here is the module</p>\n\n<pre><code>@Entity(tableName = Constants.TABLE_NAME)\n data class Sura(\n    @PrimaryKey\n    val quranIndex: QuranIndex = QuranIndex.ABS,\n\n    @ColumnInfo(name = \"sura_name\")\n    val suraName: String = \"Abasa\",\n\n    @ColumnInfo(name = \"download_url\")\n    val downloadUrl: String = \"www.google.com\")\n</code></pre>\n\n<p>Here is the room database</p>\n\n<pre><code>@Database(\n    entities = arrayOf(Sura::class),\n    version = 1)\n@TypeConverters(QuranIndexConverter::class)\nabstract class Appdatabase : RoomDatabase() {\nabstract fun suraDao(): SuraDao\n}\n</code></pre>\n\n<p>The error message </p>\n\n<pre><code>    e: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\entity\\Sura.java:31: error: Room cannot pick a constructor since multiple constructors are suitable. Try to annotate\n    e: \n\n    e:     public Sura(@org.jetbrains.annotations.NotNull()\n    e:            ^\n    e:   unwanted constructors with @Ignore.\n    e: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\entity\\Sura.java:38: error: Room cannot pick a constructor since multiple constructors are suitable. Try to annotate\n    e: \n\n    e:     public Sura() {\n    e:            ^\n    e:   unwanted constructors with @Ignore.\n    e: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\entity\\Sura.java:8: error: Cannot find setter for field.\n   e: \n\n   e:     private final com.abdelmeged.ahmed.nourplayerarch.utils.QuranIndex quranIndex = null;\n   e:                                                                        ^\n   e: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\entity\\Sura.java:11: error: Cannot find setter for field.\n   e: \n\n   e:     private final java.lang.String suraName = null;\n   e:                                    ^\n   e: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\entity\\Sura.java:14: error: Cannot find setter for field.\n   e: \n\n   e:     private final java.lang.String downloadUrl = null;\n   e:                                    ^\n\nw: H:\\Work\\Android\\Inmaa\\Nour\\NourPLayerArch\\app\\build\\tmp\\kapt3\\stubs\\debug\\com\\abdelmeged\\ahmed\\nourplayerarch\\db\\Appdatabase.java:6: warning: Schema export directory is not provided to the annotation processor so we cannot export the schema. You can either provide `room.schemaLocation` annotation processor argument OR set exportSchema to false.\nw: \n\nw: public abstract class Appdatabase extends android.arch.persistence.room.RoomDatabase {\nw:                 ^\n\ne: java.lang.IllegalStateException: failed to analyze: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:57)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:144)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:167)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:55)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.exec(CLICompiler.java:182)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.execCompiler(CompileServiceImpl.kt:397)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.access$execCompiler(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:365)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$2$$special$$inlined$withValidClientOrSessionProxy$lambda$1.invoke(CompileServiceImpl.kt:798)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$2$$special$$inlined$withValidClientOrSessionProxy$lambda$1.invoke(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:825)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.access$checkedCompile(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$2.invoke(CompileServiceImpl.kt:797)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$2.invoke(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.ifAlive(CompileServiceImpl.kt:1004)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.ifAlive$default(CompileServiceImpl.kt:865)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:791)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.access$doCompile(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1.invoke(CompileServiceImpl.kt:364)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1.invoke(CompileServiceImpl.kt:99)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.ifAlive(CompileServiceImpl.kt:1004)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.ifAlive$default(CompileServiceImpl.kt:865)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:336)\n    at sun.reflect.GeneratedMethodAccessor80.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:90)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:42)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:205)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:166)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:82)\n    at org.jetbrains.kotlin.resolve.jvm.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:89)\n    at org.jetbrains.kotlin.resolve.jvm.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:99)\n    at org.jetbrains.kotlin.resolve.jvm.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:76)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.analyze(KotlinToJVMBytecodeCompiler.kt:365)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:105)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:354)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:139)\n    ... 39 more\n</code></pre>\n"}, {"tags": ["functional-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500916204, "post_id": 45283016, "comment_id": 77534878, "body": "Note: when use the stream-api you only need to transform the data source only once rather than many times, and it uses lower-memory than <code>Iterable#flatMap</code> since it will collect the original data source to another data source in each terminal operation. if you have many data &amp; operations on the stream, you maybe get the <code>OutOfMemoryError</code>. e.g: a <code>Sequence</code> read a huge file lines by <code>BufferedReader.lines</code>. for more details you can see <a href=\"https://stackoverflow.com/a/35630670/4465208\">@hotkey&#39;s answer</a>."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 8, "last_activity_date": 1500906981, "last_edit_date": 1500906981, "creation_date": 1500906059, "answer_id": 45283016, "question_id": 45282778, "link": "https://stackoverflow.com/questions/45282778/count-occurrences-of-each-tag-using-functional-programming/45283016#45283016", "title": "Count occurrences of each tag using functional programming", "body": "<p>You can using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"noreferrer\">Iterable#asSequence</a> just like as Java-8 stream-api in Kotlin. then using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/flat-map.html\" rel=\"noreferrer\">Sequence#flatMap</a> to merge all <code>tag</code>s into a <code>Sequence</code> , and then using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/grouping-by.html\" rel=\"noreferrer\">Sequence#groupingBy</a> to counting each tag, for example:</p>\n\n<pre><code>private fun extractTags(notes: List&lt;Note&gt;): Map&lt;String, Int&gt; {\n    return notes.asSequence()\n                .flatMap { it.tags.asSequence() }\n                .groupingBy { it }.eachCount()\n}\n</code></pre>\n\n<p><em>Note</em>: both <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/flat-map.html\" rel=\"noreferrer\">Sequence#flatMap</a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/grouping-by.html\" rel=\"noreferrer\">Sequence#groupingBy</a> are <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"noreferrer\">intermediate operations</a>, which means if the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#StreamOps\" rel=\"noreferrer\">terminal operation</a> <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/each-count.html\" rel=\"noreferrer\"><code>Grouping#eachCount</code></a> is not called. all of the operations on the <code>Sequence</code> is not ran.</p>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1500911961, "post_id": 45285064, "comment_id": 77532422, "body": "<code>groupingBy { it }.eachCount()</code> is more preferable in terms of memory consumption."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1500924614, "post_id": 45285064, "comment_id": 77539545, "body": "@Ilya - yes, you&#39;re right.  I chose to use <code>groupBy</code> and <code>mapValues</code> because the OP used these and my main intent was to point to the specific problem with the original example.  The accepted answer uses <code>groupingBy { it }.eachCount()</code>, I felt that would suffice."}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 0, "last_activity_date": 1500923917, "last_edit_date": 1500923917, "creation_date": 1500911700, "answer_id": 45285064, "question_id": 45282778, "link": "https://stackoverflow.com/questions/45282778/count-occurrences-of-each-tag-using-functional-programming/45285064#45285064", "title": "Count occurrences of each tag using functional programming", "body": "<p>Here is your code modified to work.  I changed <code>map</code> to <code>flatMap</code>.  I also provided a version implemented as an extension function.  Yours was failing because <code>map></code> was producing a <code>List&lt;List&lt;String>></code> where you were expecting <code>List&lt;String></code> (hence, <code>flagMap</code>).</p>\n\n<pre><code>fun extractTags(notes: List&lt;Note&gt;): Map&lt;String, Int&gt; {\n    return notes.flatMap { it.tags } // results in List&lt;String&gt;\n            .groupBy { it } // results in Pair&lt;String, List&lt;String&gt;&gt;\n            .mapValues { it.value.count() }\n}\n\nfun Iterable&lt;Note&gt;.extractTags(): Map&lt;String, Int&gt; {\n    return this.flatMap { it.tags } // results in List&lt;String&gt;\n            .groupBy { it } // results in Pair&lt;String, List&lt;String&gt;&gt;\n            .mapValues { it.value.count() }\n}\n</code></pre>\n\n<p>And here is some code to test it with</p>\n\n<pre><code>import kotlin.collections.*\n\nfun main(vararg args: String) : Unit {\n    var notes = ArrayList&lt;Note&gt;()\n    notes.add(Note(List&lt;String&gt;(1) { \"tag1\" }))\n    notes.add(Note(List&lt;String&gt;(4) { \"tag4\" }))\n    notes.add(Note(List&lt;String&gt;(14) { \"tag14\" }))\n\n   for((first,second) in extractTags(notes))\n       println(\"$first: $second\")\n   for((first,second) in notes.extractTags())\n       println(\"$first: $second\")\n}\n\nclass Note {\n    constructor(strings: List&lt;String&gt;) {\n        tags = strings\n    }\n    var tags: List&lt;String&gt;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1500912106, "creation_date": 1500912106, "answer_id": 45285185, "question_id": 45282778, "link": "https://stackoverflow.com/questions/45282778/count-occurrences-of-each-tag-using-functional-programming/45285185#45285185", "title": "Count occurrences of each tag using functional programming", "body": "<p>While the already accepted answer unarguably solves your problem, I feel like there's a bit of an \"everything looks like a nail when you have a hammer\" thing going on here.</p>\n\n<p>The essence of that answer is that <code>flatMap</code>, <code>groupingBy</code>, and <code>eachCount</code> are the methods you need to solve your problem, however, using sequences here seems completely unnecessary. </p>\n\n<p>Here's the code that just operates on/with regular collections:</p>\n\n<pre><code>private fun extractTags(notes: List&lt;Note&gt;): Map&lt;String, Int&gt; {\n    return notes.flatMap { it.tags }\n            .groupingBy { it }\n            .eachCount()\n}\n</code></pre>\n\n<p>I'd like to argue that this is a better solution than the one using sequences, because:</p>\n\n<ul>\n<li>It produces the same results, since it uses the same operators.</li>\n<li>The code is just simpler and easier to read without them.</li>\n<li>The transformations here are simple and few, sequences get useful when you have long chains.</li>\n<li>We are probably operating on relatively small data sets here. In my own quick measurements, the solution using sequences was about 10% faster when there are a million notes, but 17% slower when there are only ten thousand. I'll wager to guess you're closer to the latter in size of your lists. Sequences have overhead.</li>\n<li>We aren't making use of the laziness provided by sequences at all, since we want to evaluate and return the results immediately.</li>\n</ul>\n\n<p>You can see an excellent comparison of the two ways with pros and cons <a href=\"https://stackoverflow.com/a/35630670/4465208\">here</a> as well for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 1033, "user_id": 1064618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8g7Ub.jpg?s=128&g=1", "display_name": "AndroidLover", "link": "https://stackoverflow.com/users/1064618/androidlover"}, "is_accepted": false, "score": 0, "last_activity_date": 1593730593, "creation_date": 1593730593, "answer_id": 62706155, "question_id": 45282778, "link": "https://stackoverflow.com/questions/45282778/count-occurrences-of-each-tag-using-functional-programming/62706155#62706155", "title": "Count occurrences of each tag using functional programming", "body": "<p>Excuse me for this late solution, but it is be the best one: as I think when you are using Kotlin you have the standard library that give you a better syntax, shorter and cleaner than the Java 8 streams.</p>\n<pre><code>private fun extractTags(notes: List&lt;Note&gt;): Map&lt;String, Int&gt; = notes.flatMap { it.tags }//list of String\n        .groupBy { it }//list of Map.Entry&lt;String,List&lt;String&gt;&gt; //List&lt;Map.Entry&lt;String,List&lt;String&gt;&gt;&gt;\n        .map {\n            Pair(it.key, it.value.size)\n        }//list of pairs(tag, count) // List&lt;Pair(String,Int) \n       .toMap()//creat a map from the list of pairs\n</code></pre>\n"}], "owner": {"reputation": 704, "user_id": 2528840, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6FGhA.jpg?s=128&g=1", "display_name": "Schadenfreude", "link": "https://stackoverflow.com/users/2528840/schadenfreude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3532, "favorite_count": 0, "accepted_answer_id": 45283016, "answer_count": 4, "score": 6, "last_activity_date": 1593730593, "creation_date": 1500905423, "last_edit_date": 1515079592, "question_id": 45282778, "link": "https://stackoverflow.com/questions/45282778/count-occurrences-of-each-tag-using-functional-programming", "title": "Count occurrences of each tag using functional programming", "body": "<p>I've been trying to make a function that returns a <code>Map&lt;String, Int&gt;</code> with the key being a certain tag and the value being the number of occurrences.</p>\n\n<p>The object (simplified) from which I need to extract the info:</p>\n\n<pre><code>class Note {\n   List&lt;String&gt; tags\n}\n</code></pre>\n\n<p>The function so far:</p>\n\n<pre><code>private fun extractTags(notes: List&lt;Note&gt;): Map&lt;String, Int&gt; {\n    return notes.map { note -&gt; note.tags }\n                .groupBy { it }\n                .mapValues { it.value.count() }    \n}\n</code></pre>\n\n<p>Right now the compiler gives me a return type mismatch of <code>Map&lt;(Mutable)Set&lt;String!&gt;!, Int&gt;</code> and I'm not certain I'm getting the desired result (as I still can't test this properly). </p>\n\n<p>I'm expecting a result something in the lines of:</p>\n\n<pre><code>(tag1, 1)\n(tag2, 4)\n(tag3, 14)\n...\n</code></pre>\n"}, {"tags": ["rest", "jersey", "kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500908220, "post_id": 45282528, "comment_id": 77530003, "body": "hi, Please put the stacktrace in your answer."}], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 4198432, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c8e63f72c361af1460668848c655285?s=128&d=identicon&r=PG&f=1", "display_name": "sk_dev", "link": "https://stackoverflow.com/users/4198432/sk-dev"}, "edited": false, "score": 0, "creation_date": 1501166764, "post_id": 45353081, "comment_id": 77669620, "body": "thanks for your response. Funny enough, my Kotlin translated to Java works (see my edit #2 above), so my MessageBodyWriter does serialize ArrayList, but it seems to be picky about generics. I have to test your solution ... it is not exactly what I was trying to achieve, but it may be ok."}, {"owner": {"reputation": 227, "user_id": 4198432, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c8e63f72c361af1460668848c655285?s=128&d=identicon&r=PG&f=1", "display_name": "sk_dev", "link": "https://stackoverflow.com/users/4198432/sk-dev"}, "edited": false, "score": 0, "creation_date": 1501526134, "post_id": 45353081, "comment_id": 77807279, "body": "your code produces <code>{ &quot;fieldName&quot;: [ &quot;responseGenericEntityWithArrayList&quot; ] }</code> (aka &quot;list of strings with label&quot;), my (Java) code produces <code>[ { &quot;fieldName&quot;:&quot;responseGenericEntityWithArrayList&quot; } ]</code> (list of <code>fieldName -&gt; String</code> entries). That is not quite the same. Since I need to avoid API changes, I have to find a Kotlin solution similar to my Java solution."}], "tags": [], "owner": {"reputation": 56, "user_id": 8226579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvJaw.jpg?s=128&g=1", "display_name": "HASUNUMA Kenji", "link": "https://stackoverflow.com/users/8226579/hasunuma-kenji"}, "is_accepted": false, "score": 0, "last_activity_date": 1501164062, "creation_date": 1501164062, "answer_id": 45353081, "question_id": 45282528, "link": "https://stackoverflow.com/questions/45282528/jax-rs-with-kotlin-messagebodywriter-not-found/45353081#45353081", "title": "JAX-RS with Kotlin MessageBodyWriter not found", "body": "<p>Because JAX-RS cannot encode <code>ArrayList</code> to JSON Array.</p>\n\n<p><code>MessageBodyWriter</code> is a handler to convert Java data type to output format, <em>e.g.</em> XML, JSON. JAX-RS has built-in <code>MessageBodyWriter</code> for major data type (include JAXB), however those does not include for <code>ArrayList</code>. Thus you need to create a custom <code>MessageBodyWriter</code> to accept <code>ArrayList</code> and encode to JSON.</p>\n\n<p>But in this case, any custom <code>MessageBodyWriter</code> is not need. Instead of, you need to re-create <code>Entry</code> class. I'm sorry that I can't write Kotlin sample, but if it write using Java, it's following;</p>\n\n<pre><code>@Path(\"demokotlin\")\npublic class DemoKotlinResource {\n\n    @GET\n    @Path(\"responseGenericEntityWithArrayList\")\n    public Response arrayList() {\n    Entry entity = new Entry();\n        entity.fieldName.add(\"responseGenericEntityWithArrayList\");\n        return Response\n                .status(Response.Status.OK)\n                .entity(entity)\n                .type(MediaType.APPLICATION_JSON).build();\n    }\n}\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class Entry {\n    public List&lt;String&gt; fieldName = new ArrayList&lt;&gt;();\n}\n</code></pre>\n\n<p>And it translate to Kotlin, then it's maybe completed.</p>\n"}], "owner": {"reputation": 227, "user_id": 4198432, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c8e63f72c361af1460668848c655285?s=128&d=identicon&r=PG&f=1", "display_name": "sk_dev", "link": "https://stackoverflow.com/users/4198432/sk-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1501166285, "creation_date": 1500904559, "last_edit_date": 1501166285, "question_id": 45282528, "link": "https://stackoverflow.com/questions/45282528/jax-rs-with-kotlin-messagebodywriter-not-found", "title": "JAX-RS with Kotlin MessageBodyWriter not found", "body": "<p>I've implemented a JAX-RS resource (a) with Kotlin and (b) with Java. While the Java flavor works as expected, the Kotlin flavor fails with a \n<code>MessageBodyWriter not found for media type=application/json, type=class java.util.ArrayList, genericType=java.util.List&lt;? extends ....Entry&gt;.|#]</code> exception.</p>\n\n<p>This is my resource</p>\n\n<pre><code>@Path(\"demokotlin\")\nclass DemoKotlinResource {\n    @GET\n    @Path(\"responseGenericEntityWithArrayList\")\n    fun arrayList(): Response {\n        val list = arrayListOf(Entry(\"responseGenericEntityWithArrayList\"))\n        val entity = object : GenericEntity&lt;List&lt;Entry&gt;&gt;(list) {}\n        return Response\n                .status(Response.Status.OK)\n                .entity(entity)\n                .type(MediaType.APPLICATION_JSON).build()\n    }\n}\n\n@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\nopen class Entry(val fieldName: String)\n</code></pre>\n\n<p>The integration test is essentially </p>\n\n<pre><code>private val client = ClientBuilder.newClient()\nprivate val target = client.target(\"http://localhost:8080/xyz/resources/demokotlin\")\n\n@Test\nfun responseGenericEntityWithArrayList() {\n    val response = target.path(\"responseGenericEntityWithArrayList\").request(MediaType.APPLICATION_JSON).get()\n    assertThat(\"no ok status\", response.status, equalTo(200))\n    val entity = response.readEntity(JsonArray::class.java)\n    assertThat(entity.getJsonObject(0).getString(\"fieldName\"), equalTo(\"responseGenericEntityWithArrayList\"))\n    assertThat(entity.toString(), equalTo(\"[{\\\"fieldName\\\":\\\"responseGenericEntityWithArrayList\\\"}]\"))\n}\n</code></pre>\n\n<p>The equivalent code in Java works fine while the shown code in Kotlin throws <code>MessageBodyWriter not found for media type=application/json, type=class java.util.ArrayList, genericType=java.util.List&lt;? extends ....Entry&gt;.|#]</code>.</p>\n\n<p>I am using Payara 4.1.2.172. Digging through some JAX-RS classes I found that the Java Code leads to </p>\n\n<pre><code>genericType=java.util.List&lt;....Entry&gt;\n</code></pre>\n\n<p>(without the <code>? extends</code>) while the generic type info with Kotlin is</p>\n\n<pre><code>genericType=java.util.List&lt;? extends ....Entry&gt;\n</code></pre>\n\n<p>could that be the cause? If so, how can I fix this?</p>\n\n<p><em>edit 2017-07-25</em> Here is the stack trace </p>\n\n<pre><code>#|2017-07-25T12:33:16.932+0000|INFO|Payara 4.1||_ThreadID=32;_ThreadName=http-thread-pool::http-listener-1(1);_TimeMillis=1500985996932;_LevelValue=800;|\njavax.ws.rs.InternalServerErrorException: HTTP 500 Internal Server Error\n        at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:90)\n        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n        at org.glassfish.jersey.message.internal.MessageBodyFactory.writeTo(MessageBodyFactory.java:1130)\n        at org.glassfish.jersey.server.ServerRuntime$Responder.writeResponse(ServerRuntime.java:711)\n        at org.glassfish.jersey.server.ServerRuntime$Responder.processResponse(ServerRuntime.java:444)\n        at org.glassfish.jersey.server.ServerRuntime$Responder.process(ServerRuntime.java:434)\n        at org.glassfish.jersey.server.ServerRuntime$2.run(ServerRuntime.java:329)\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:317)\n        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:305)\n        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1154)\n        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:473)\n        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:427)\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:388)\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:341)\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:228)\n        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1606)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:338)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.glassfish.tyrus.servlet.TyrusServletFilter.doFilter(TyrusServletFilter.java:305)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:250)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:160)\n        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:654)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:593)\n        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:99)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)\n        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:371)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:238)\n        at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:466)\n        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:169)\n        at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:206)\n        at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:180)\n        at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:235)\n        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\n        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\n        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)\n        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:117)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:56)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:137)\n        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)\n        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyWriter not found for media type=application/json, type=class java.util.ArrayList, genericType=java.util.List&lt;? extends com.github.reproducer.boundary.Entry&gt;.\n        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor$TerminalWriterInterceptor.aroundWriteTo(WriterInterceptorExecutor.java:247)\n        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n        at org.glassfish.jersey.server.internal.JsonWithPaddingInterceptor.aroundWriteTo(JsonWithPaddingInterceptor.java:106)\n        at org.glassfish.jersey.message.internal.WriterInterceptorExecutor.proceed(WriterInterceptorExecutor.java:162)\n        at org.glassfish.jersey.server.internal.MappableExceptionWrapperInterceptor.aroundWriteTo(MappableExceptionWrapperInterceptor.java:86)\n        ... 52 more\n        |#]\n</code></pre>\n\n<p>edit #2: <em>working</em> Java Code - should be quite similar to Kotlin variant</p>\n\n<pre><code>@Path(\"demojava\")\npublic class DemoJavaResource {\n\n    @GET\n    @Path(\"responseGenericEntityWithArrayList\")\n    public Response arrayList() {\n        final List&lt;JEntry&gt; list = new ArrayList&lt;&gt;();\n        list.add(new JEntry(\"responseGenericEntityWithArrayList\"));\n        final GenericEntity&lt;List&lt;JEntry&gt;&gt; entity = new GenericEntity&lt;List&lt;JEntry&gt;&gt;(list) {};\n        return Response\n            .status(Response.Status.OK)\n            .entity(entity)\n            .type(MediaType.APPLICATION_JSON).build();\n    }\n}\n</code></pre>\n\n<p>and JEntry</p>\n\n<pre><code>@XmlRootElement\n@XmlAccessorType(XmlAccessType.FIELD)\nclass JEntry {\n    private String fieldName;\n\n    JEntry() { this(\"\"); }\n\n    JEntry(final String responseGenericEntityWithArrayList) {\n        fieldName = responseGenericEntityWithArrayList;\n    }\n\n    public String getFieldName() { return fieldName; }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "qr-code", "android-vision"], "comments": [{"owner": {"reputation": 134, "user_id": 1458397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c80deacba5c27b6129828f6bc2794593?s=128&d=identicon&r=PG", "display_name": "Karacago", "link": "https://stackoverflow.com/users/1458397/karacago"}, "edited": false, "score": 0, "creation_date": 1502437197, "post_id": 45282021, "comment_id": 78218276, "body": "Please check the google play services version on device."}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 1222752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e98cac0fbcc5bb4c338297ede6a1d77?s=128&d=identicon&r=PG", "display_name": "AnkitRox", "link": "https://stackoverflow.com/users/1222752/ankitrox"}, "is_accepted": false, "score": 0, "last_activity_date": 1504076818, "creation_date": 1504076818, "answer_id": 45954095, "question_id": 45282021, "link": "https://stackoverflow.com/questions/45282021/mobile-vison-api-detect-no-qr-code/45954095#45954095", "title": "Mobile Vison API detect no QR code", "body": "<p>Check internet connection on the second device; As Vision API requires Google play services and this needs internet connection; however need not to provide permission in Manifest file..</p>\n"}], "owner": {"reputation": 161, "user_id": 6726618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76837710d3854727ff6220041d87c13b?s=128&d=identicon&r=PG&f=1", "display_name": "fanfanta", "link": "https://stackoverflow.com/users/6726618/fanfanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1049, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1504076818, "creation_date": 1500903109, "question_id": 45282021, "link": "https://stackoverflow.com/questions/45282021/mobile-vison-api-detect-no-qr-code", "title": "Mobile Vison API detect no QR code", "body": "<p>I'm developing a QR code scanner with Mobile Vision API (play-services-vision 11.0.1). I've run my application on two Android devices (Xperia SO-04E Android 4.2.2). My application works correctly on one device but does not detect QR code on the other. Camera started correctly, but detected no QR code. Does anyone know a solution? Might does a device's configuration cause this?</p>\n\n<p>A part of source code(Activity written in Kotlin) is as below. I've configured the camera permission in AndroidManifest.xml.</p>\n\n<pre><code>// instantiate barcode detector in an Activity onCreate method\nval barcodeDetector = BarcodeDetector.Builder(this).build()\ncameraSource = CameraSource.Builder(this, barcodeDetector)\n               .setAutoFocusEnabled(true)\n               .setRequestedPreviewSize(1600, 1024)\n\n // set callback\n barcodeDetector.setProcessor(object: Detector.Processor&lt;Barcode&gt;?) {\n     override fun release() {}\n\n     override fun receiveDetections(detections: Detector.Detections&lt;Barcode&gt;?) {\n         \u30fb\u30fb\u30fb\n         // parse a detected QR code\n         \u30fb\u30fb\u30fb\n     }\n\n } \n</code></pre>\n"}, {"tags": ["json", "kotlin", "json-simple"], "answers": [{"comments": [{"owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1500903390, "post_id": 45281822, "comment_id": 77526563, "body": "I see. This jsonArray is the response of an API I trust (and is supposed to return a JSONArray of underlying JSONObjects). Therefore I could consider this as completely safe, right?"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "edited": false, "score": 0, "creation_date": 1500903882, "post_id": 45281822, "comment_id": 77526956, "body": "@pk1914 No. the json data type is not only have <code>JSONObject</code>&amp;<code>JSONArray</code> , but also have <code>string</code>,<code>boolean</code>,<code>number</code>. and a <code>JSONArray</code> also can add any type of <code>Object</code>, e.g: add another json array <code>add(JSONArray())</code>."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 4, "last_activity_date": 1500903589, "last_edit_date": 1500903589, "creation_date": 1500902514, "answer_id": 45281822, "question_id": 45281424, "link": "https://stackoverflow.com/questions/45281424/casting-jsonarray-to-iterablejsonobject-kotlin/45281822#45281822", "title": "Casting JSONArray to Iterable&lt;JSONObject&gt; - Kotlin", "body": "<p>You can cast it successfully, since <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONArray.html\" rel=\"nofollow noreferrer\">JSONArray</a> <strong>is-A</strong> <code>Iterable</code>.  but it can't make sure each element in <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONArray.html\" rel=\"nofollow noreferrer\">JSONArray</a> is a <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONObject.html\" rel=\"nofollow noreferrer\">JSONObject</a>.</p>\n\n<p>The  <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONArray.html\" rel=\"nofollow noreferrer\">JSONArray</a>  is a <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\">raw type</a> <code>List</code>, which means it can adding anything, for example:</p>\n\n<pre><code>val jsonArray = JSONArray()\njsonArray.add(\"string\")\njsonArray.add(JSONArray())\n</code></pre>\n\n<p>When the code operates on a downcasted generic type <code>Iterable&lt;JSONObject&gt;</code> from  a raw type <code>JSONArray</code>, it maybe be thrown a <code>ClassCastException</code>, for example:  </p>\n\n<pre><code>val jsonObjectIterable = jsonArray as Iterable&lt;JSONObject&gt;\n\n//    v--- throw ClassCastException, when try to cast a `String` to a `JSONObject`\nval first = jsonObjectIterable.iterator().next()\n</code></pre>\n\n<p>So this is why become dangerous. On the other hand, If you only want to add <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\">JSONObjec</a>s into the <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONArray.html\" rel=\"nofollow noreferrer\">JSONArray</a>, you can cast a <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\">raw type</a> <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/JSONObject.html\" rel=\"nofollow noreferrer\">JSONArray</a> to a generic type <code>MutableList&lt;JSONObject&gt;</code>, for example:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nval jsonArray = JSONArray() as MutableList&lt;JSONObject&gt;\n\n//      v--- the jsonArray only can add a JSONObject now\njsonArray.add(JSONObject(mapOf(\"foo\" to \"bar\")))\n\n//      v--- there is no need down-casting here, since it is a Iterable&lt;JSONObject&gt;\nval jsonObjectIterable:Iterable&lt;JSONObject&gt; = jsonArray \n\nval first = jsonObjectIterable.iterator().next()\n\nprintln(first[\"foo\"])\n//           ^--- return \"bar\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5272, "user_id": 3627468, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0772d3e1d9354783e36b717483b14f60?s=128&d=identicon&r=PG", "display_name": "Vakas", "link": "https://stackoverflow.com/users/3627468/vakas"}, "is_accepted": false, "score": 1, "last_activity_date": 1517466683, "creation_date": 1517466683, "answer_id": 48556639, "question_id": 45281424, "link": "https://stackoverflow.com/questions/45281424/casting-jsonarray-to-iterablejsonobject-kotlin/48556639#48556639", "title": "Casting JSONArray to Iterable&lt;JSONObject&gt; - Kotlin", "body": "<p>Following is rather a simple implementation. </p>\n\n<p>Suppose Your Object is <strong>Person</strong></p>\n\n<pre><code>data class Person( val ID: Int, val name: String): Serializable\nval gson = Gson()\nval persons: Array&lt;Person&gt; = gson.fromJson(responseSTRING, Array&lt;Person&gt;::class.java)\n</code></pre>\n\n<p>Now persons is an <strong>Array</strong> of <strong>Person</strong></p>\n"}], "owner": {"reputation": 2169, "user_id": 4564505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qRYlQ.jpg?s=128&g=1", "display_name": "pavlos163", "link": "https://stackoverflow.com/users/4564505/pavlos163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4142, "favorite_count": 0, "accepted_answer_id": 45281822, "answer_count": 2, "score": 4, "last_activity_date": 1517466683, "creation_date": 1500901486, "question_id": 45281424, "link": "https://stackoverflow.com/questions/45281424/casting-jsonarray-to-iterablejsonobject-kotlin", "title": "Casting JSONArray to Iterable&lt;JSONObject&gt; - Kotlin", "body": "<p>I am using <a href=\"http://juliusdavies.ca/json-simple-1.1.1-javadocs/org/json/simple/package-summary.html\" rel=\"nofollow noreferrer\">Json-Simple</a> in Kotlin.</p>\n\n<p>In what situations could this cast:</p>\n\n<pre><code>val jsonObjectIterable = jsonArray as Iterable&lt;JSONObject&gt;\n</code></pre>\n\n<p>Become dangerous? <code>jsonArray</code> is a <code>JSONArray</code> object.</p>\n"}, {"tags": ["methods", "compiler-errors", "kotlin", "immutability"], "answers": [{"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1500901507, "post_id": 45280329, "comment_id": 77525170, "body": "yes, you can think it as <b>effectively-final</b> in Java."}], "tags": [], "owner": {"reputation": 682, "user_id": 5765771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/90fbd7abadc8251d7607728aa531dd90?s=128&d=identicon&r=PG&f=1", "display_name": "Al Mamun", "link": "https://stackoverflow.com/users/5765771/al-mamun"}, "is_accepted": false, "score": 0, "last_activity_date": 1500898233, "creation_date": 1500898233, "answer_id": 45280329, "question_id": 45280328, "link": "https://stackoverflow.com/questions/45280328/unable-to-update-kotlin-method-parameters-value/45280329#45280329", "title": "Unable to update Kotlin method parameter&#39;s value", "body": "<p>In Kotlin, method parameter's are <strong>val(non-mutable)</strong> type not <strong>var(mutable)</strong> type. Similar as java <code>final</code>.\nThat's why i cant <strong>mutate(change)</strong> that .</p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1500898548, "creation_date": 1500898548, "answer_id": 45280428, "question_id": 45280328, "link": "https://stackoverflow.com/questions/45280328/unable-to-update-kotlin-method-parameters-value/45280428#45280428", "title": "Unable to update Kotlin method parameter&#39;s value", "body": "<p>A function's parameters inside the function are read-only (like variables created with <code>val</code>), therefore they cannot be reassigned.</p>\n\n<p>You can see discussions about this design decision <a href=\"https://discuss.kotlinlang.org/t/function-parameters-are-val-not-var/897\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://discuss.kotlinlang.org/t/method-parameters-and-mutable-variables/333\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500899044, "creation_date": 1500899044, "answer_id": 45280576, "question_id": 45280328, "link": "https://stackoverflow.com/questions/45280328/unable-to-update-kotlin-method-parameters-value/45280576#45280576", "title": "Unable to update Kotlin method parameter&#39;s value", "body": "<p>The error you saw has more to do with scoping. A function's parameter by design is immutable or more accurately, read-only and that is what the <code>val</code> keyword stands for that is why you see that error.</p>\n"}, {"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 2, "last_activity_date": 1500903883, "last_edit_date": 1592644375, "creation_date": 1500903883, "answer_id": 45282288, "question_id": 45280328, "link": "https://stackoverflow.com/questions/45280328/unable-to-update-kotlin-method-parameters-value/45282288#45282288", "title": "Unable to update Kotlin method parameter&#39;s value", "body": "<blockquote>\n<p>What's wrong with updating the variable?</p>\n</blockquote>\n<p>The others answer the question by effectively saying &quot;because Kotlin function parameters are immutable.&quot;  Of course, that is a(the) correct answer.</p>\n<p>But given the fact so many languages, <strong>including Java</strong>, allow you to re-assign function parameters, it might be valid to interpret your question as &quot;why does Kotlin disallow re-assigning function parameters?&quot;</p>\n<p><strong>My Answer</strong>: Kotlin and Swift have many features in common, so I went to Swift 3 to see why <strong>they</strong> decided to deprecate function parameter re-assignment and found this <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0003-remove-var-parameters.md#motivation\" rel=\"nofollow noreferrer\">motivation</a>.</p>\n<blockquote>\n<p>Using  var  annotations on function parameters have limited utility, optimizing for a line of code at the cost of confusion with  inout , which has the semantics most people expect. To emphasize the fact these values are unique copies and don't have the write-back semantics of  inout , we should not allow  var  here.</p>\n<p>In summary, the problems that motivate this change are:</p>\n<p>\u2022 var  is often confused with  inout  in function parameters.</p>\n<p>\u2022 var  is often confused to make value types have reference semantics.</p>\n<p>\u2022Function parameters are not refutable patterns like in if-, while-, guard-, for-in-, and case statements.</p>\n</blockquote>\n<p>Of course, Kotlin has no <code>inout</code> decoration.  But the writers could have chosen to allow <code>val</code> and <code>var</code>, with <code>val</code> being the default.  Then they would have had behavior consistent with many other languages.  Instead, they opted for code clarity.</p>\n<p>The OPs example code shows a valid example of when parameter re-assignment is clear and natural.  Having to add one more line to a very short function (to get a local variable to do what the parameter variable could have done) IMHO reduces clarity.  Again, IMHO, I would have preferred optionally being able to declare my parameters as <code>var</code>.</p>\n"}], "owner": {"reputation": 682, "user_id": 5765771, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/90fbd7abadc8251d7607728aa531dd90?s=128&d=identicon&r=PG&f=1", "display_name": "Al Mamun", "link": "https://stackoverflow.com/users/5765771/al-mamun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1531, "favorite_count": 0, "closed_date": 1500904304, "answer_count": 4, "score": 1, "last_activity_date": 1500903883, "creation_date": 1500898233, "question_id": 45280328, "link": "https://stackoverflow.com/questions/45280328/unable-to-update-kotlin-method-parameters-value", "closed_reason": "Duplicate", "title": "Unable to update Kotlin method parameter&#39;s value", "body": "<p>I've following Kotlin method</p>\n\n<pre><code>fun getpower(base:Int,power:Int):Int\n{\n    var result = 1\n    while(power &gt; 0){\n        result = result * base\n        power-- // &lt;---- error in this line\n    }\n    return result\n}\n</code></pre>\n\n<p>Kotlin compiler gives following error\n<code>Error:(6, 8) Val cannot be reassigned</code></p>\n\n<p>What's wrong with updating the variable?</p>\n"}, {"tags": ["caching", "spring-boot", "redis", "kotlin"], "comments": [{"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1500892562, "post_id": 45278291, "comment_id": 77518919, "body": "Without <code>@EnableCaching</code> those annotations are pretty much useless. Which is also quite clearly explained in the article you linked to."}, {"owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1500906384, "post_id": 45278291, "comment_id": 77528635, "body": "The @EnableCaching is in the start class which contain    SpringApplication.run(Application.class);"}, {"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1500916125, "post_id": 45278291, "comment_id": 77534837, "body": "Add it to your question for completeness."}, {"owner": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 0, "creation_date": 1500920907, "post_id": 45278291, "comment_id": 77537531, "body": "Why is your Configuration/ cacheManager class written in Java and everything else in Kotlin?"}, {"owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1500948922, "post_id": 45278291, "comment_id": 77547610, "body": "@M.Deinum Has been added"}, {"owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "reply_to_user": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 0, "creation_date": 1500949515, "post_id": 45278291, "comment_id": 77547745, "body": "@JKLy This project is write in java before, I want to use some kotlin in this. And part of the code has not been completely replaced. I try to writ Configuration/cacheManager in kotlin, Still don&#39;t have any effect"}], "answers": [{"comments": [{"owner": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 1, "creation_date": 1500968924, "post_id": 45293451, "comment_id": 77555723, "body": "If you use the kotlin-spring Gradle plugin it will make Spring annotated members <code>open</code> at build time without having to change the code to work with the framework: <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#kotlin-spring-compiler-plugin\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "reply_to_user": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 0, "creation_date": 1500973670, "post_id": 45293451, "comment_id": 77558883, "body": "Thanks, then I also saw the corresponding articles.But still not work in the unit test(such as mock). If there is a corresponding unit test case"}, {"owner": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 0, "creation_date": 1500974319, "post_id": 45293451, "comment_id": 77559375, "body": "Mockito 2 now supports mocking final members. See here: <a href=\"http://hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito/\" rel=\"nofollow noreferrer\">hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito</a> It&#39;s also now slightly easier than described in the blog post because all you need to do is add this dependency to the test scope: <code>org.mockito:mockito-inline:2.8.47</code>"}, {"owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "reply_to_user": {"reputation": 2105, "user_id": 1631664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691b56d8d43fec81f05431e857164424?s=128&d=identicon&r=PG", "display_name": "JK Ly", "link": "https://stackoverflow.com/users/1631664/jk-ly"}, "edited": false, "score": 0, "creation_date": 1500978585, "post_id": 45293451, "comment_id": 77562580, "body": "Is really thank you for your answer\uff0c<code>mockito-inline</code> solved can&#39;t mocking final members problem."}], "tags": [], "owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "is_accepted": true, "score": 4, "last_activity_date": 1500963535, "last_edit_date": 1500963535, "creation_date": 1500953634, "answer_id": 45293451, "question_id": 45278291, "link": "https://stackoverflow.com/questions/45278291/spring-boot-cache-not-support-kotlin/45293451#45293451", "title": "spring boot cache not support kotlin?", "body": "<p>Thanks all, I have fix it by make the cache method open</p>\n\n<pre><code>@Component\n@CacheConfig(cacheNames = arrayOf(\"longCacheManager\"), cacheManager = \"longCacheManager\")\nopen class CacheService {\n\n    @Cacheable(key = \"#id.toString()\")\n    open fun save(id: Long): Long {\n        return id\n    }\n}\n</code></pre>\n\n<p>Spring generated proxy with cglib.</p>\n\n<p>It must mandatory inherit the classes and methods. </p>\n\n<p>But kotlin default is <code>final class</code> and method which without the keyword <code>open</code>.</p>\n"}], "owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2501, "favorite_count": 0, "accepted_answer_id": 45293451, "answer_count": 1, "score": 2, "last_activity_date": 1500963535, "creation_date": 1500892405, "last_edit_date": 1500949643, "question_id": 45278291, "link": "https://stackoverflow.com/questions/45278291/spring-boot-cache-not-support-kotlin", "title": "spring boot cache not support kotlin?", "body": "<p>I'm try to replace some java code with kotlin.</p>\n\n<p>Such as jpa or cache.</p>\n\n<p>The Start class is:</p>\n\n<pre><code>@EnableAsync\n@EnableCaching\n@EnableSwagger2\n@SpringBootApplication\nopen class Application\n\nfun main(args: Array&lt;String&gt;) {\n    SpringApplication.run(Application::class.java)\n}\n</code></pre>\n\n<p>The simple controller:</p>\n\n<pre><code>@RestController\nclass CacheController {\n\n    @Autowired\n    private lateinit var cache: CacheService\n\n    @PutMapping(\"{id}\")\n    fun save(@PathVariable id: Long) {\n        cache.save(id)\n    }\n}\n</code></pre>\n\n<p>CacheService:</p>\n\n<pre><code>@Component\n@CacheConfig(cacheNames = arrayOf(\"longCacheManager\"), cacheManager = \"longCacheManager\")\nopen class CacheService {\n\n    @Cacheable(key = \"#id\")\n    fun save(id: Long): Long {\n        return id\n    }\n}\n</code></pre>\n\n<p>cacheManager:</p>\n\n<pre><code>@Configuration\nopen class CacheConfig {\n\n    @Autowired\n    private lateinit var redisConnectionFactory: RedisConnectionFactory\n\n    @Bean\n    @Qualifier(\"longCacheManager\")\n    open fun longCacheManager(): CacheManager {\n        val redisTemplate = StringRedisTemplate(redisConnectionFactory)\n        redisTemplate.valueSerializer = GenericToStringSerializer(Long::class.java)\n        val cacheManager = RedisCacheManager(redisTemplate)\n        cacheManager.setUsePrefix(true)\n        return cacheManager\n    }\n}\n</code></pre>\n\n<p>I can confirm the parameter of id entered in CacheService's method save, but after I have excute the PutMethod, there is nothing in redis.</p>\n\n<p>When I write the cacheServie with java like this, the redis would be save what I want.</p>\n\n<p>The Java cache service like this:</p>\n\n<pre><code>@Component\n@CacheConfig(cacheNames = \"longCacheManager\", cacheManager = \"longCacheManager\")\npublic class JavaCacheService {\n\n    @Cacheable(key = \"#id\")\n    public Long save(Long id) {\n        return id;\n    }\n}\n</code></pre>\n\n<p>I have also read some article like this:\n<a href=\"https://pathtogeek.com/spring-boot-caching-with-kotlin\" rel=\"nofollow noreferrer\">https://pathtogeek.com/spring-boot-caching-with-kotlin</a></p>\n\n<p>My SpringBootVersion is <code>1.5.3.RELEASE</code>\nand kotlinVersion is <code>1.1.3-2</code></p>\n"}, {"tags": ["android", "android-studio", "gradle", "build", "kotlin"], "comments": [{"owner": {"reputation": 2802, "user_id": 1640009, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7d2fca77984f73030fcd81083886f254?s=128&d=identicon&r=PG", "display_name": "Ankur_009", "link": "https://stackoverflow.com/users/1640009/ankur-009"}, "edited": false, "score": 1, "creation_date": 1500889583, "post_id": 45276507, "comment_id": 77516879, "body": "Can you add what is the error you got?"}, {"owner": {"reputation": 61, "user_id": 7112414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdQE0.jpg?s=128&g=1", "display_name": "LastMan0nEarth", "link": "https://stackoverflow.com/users/7112414/lastman0nearth"}, "reply_to_user": {"reputation": 2802, "user_id": 1640009, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7d2fca77984f73030fcd81083886f254?s=128&d=identicon&r=PG", "display_name": "Ankur_009", "link": "https://stackoverflow.com/users/1640009/ankur-009"}, "edited": false, "score": 0, "creation_date": 1500891660, "post_id": 45276507, "comment_id": 77518308, "body": "sure, error:   <code>xecution failed for task &#39;:V3:processProdDebugManifest&#39;. &gt; Manifest merger failed : Attribute meta-data#android.support.VERSION@value value=(25.3.1) from [com.android.support:cardview-v7:25.3.1] AndroidManifest.xml:24:9-31   \tis also present at [com.android.support:customtabs:26.0.0-alpha1] AndroidManifest.xml:24:9-38 value=(26.0.0-alpha1).   \tSuggestion: add &#39;tools:replace=&quot;android:value&quot;&#39; to &lt;meta-data&gt; element at AndroidManifest.xml:22:5-24:34 to override.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7112414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdQE0.jpg?s=128&g=1", "display_name": "LastMan0nEarth", "link": "https://stackoverflow.com/users/7112414/lastman0nearth"}, "edited": false, "score": 0, "creation_date": 1500901332, "post_id": 45278759, "comment_id": 77525039, "body": "Thanks for the advice. I&#39;ve actually re-cloned the project from github so that the original version nums are back in the build.gradle. Now I&#39;m getting a new erropr <code>Failed to find target with hash string android-23 in Users&#47;cameron&#47;Library&#47;Android&#47;sdk</code> .     Im assuming this means I need to download a specific android-23 module or plugin but not too sure."}, {"owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "reply_to_user": {"reputation": 61, "user_id": 7112414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdQE0.jpg?s=128&g=1", "display_name": "LastMan0nEarth", "link": "https://stackoverflow.com/users/7112414/lastman0nearth"}, "edited": false, "score": 1, "creation_date": 1500913477, "post_id": 45278759, "comment_id": 77533355, "body": "Probably, yes. Did you manage to install SDK 23? Can be done using Android Studio: Tools/Android/SDK Manager."}, {"owner": {"reputation": 61, "user_id": 7112414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdQE0.jpg?s=128&g=1", "display_name": "LastMan0nEarth", "link": "https://stackoverflow.com/users/7112414/lastman0nearth"}, "edited": false, "score": 0, "creation_date": 1500995370, "post_id": 45278759, "comment_id": 77576230, "body": "Yes, sorted now. Needed to install the SDK and then was able to run. Now onto the errors....."}], "tags": [], "owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "is_accepted": false, "score": 2, "last_activity_date": 1500893668, "creation_date": 1500893668, "answer_id": 45278759, "question_id": 45276507, "link": "https://stackoverflow.com/questions/45276507/do-i-need-to-update-kotlin-every-time-i-work-on-my-companys-application/45278759#45278759", "title": "Do I need to update Kotlin every time I work on my company&#39;s application?", "body": "<p>The error from your comment isn't related to Kotlin. Make sure that all versions of the support library are the same, currently you're using <code>26.0.0-alpha1</code> for <code>customtabs</code> and <code>25.3.1</code> for <code>cardview-v7</code>. You should probably use version <code>25.3.1</code> for <code>customtabs</code> as well.</p>\n\n<p>Also, avoid using <code>+</code>, as this makes your build always use the latest version of the dependency, which makes specific builds unreproducable.</p>\n"}], "owner": {"reputation": 61, "user_id": 7112414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdQE0.jpg?s=128&g=1", "display_name": "LastMan0nEarth", "link": "https://stackoverflow.com/users/7112414/lastman0nearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500948849, "creation_date": 1500887383, "last_edit_date": 1500948849, "question_id": 45276507, "link": "https://stackoverflow.com/questions/45276507/do-i-need-to-update-kotlin-every-time-i-work-on-my-companys-application", "title": "Do I need to update Kotlin every time I work on my company&#39;s application?", "body": "<p>I'm having trouble building an Android project at the company I am working for. Currently, I get a whole bunch of errors when I try to build my project due to the specified versions of the dependencies defined in the .gradle file not matching the current version of kotlin.</p>\n\n<p>So, to rectify this I have updated the highlighted dependency versions in the project to match the current version of kotlin I am using. </p>\n\n<p>My big question is whether I have to do this every time I want to develop on Android? I'm assuming the answers a big fat NO, but as someone completely new to this, I definitely need some help from the community if possible.</p>\n\n<p>Just to explain me, we have limited development resources, hence the question on here. I'm going to be taking over the Android side of things and should probably sign up for a one-week taster course (or something like that) but for now, I have our whole Android app on our hands with minimal comments, tests or instructions. </p>\n\n<p>I also posted this question to Reddit and the best advice I was given was to add a '+' to the dependencies in build.gradle instead of version numbers. I've since tried this and feel like it might not be the solution I need. This is because I feel that the live application wouldn't be working if this were the issue. </p>\n\n<p>In short, I feel like my local version of the application might not be working because I have some settings in Kotlin/Android studio somewhere that I need to change.....Any suggestions you can provide RE what these settings may be would be a huge help! </p>\n"}, {"tags": ["intellij-idea", "ant", "kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500893030, "post_id": 45273155, "comment_id": 77519194, "body": "Related <a href=\"http://kotlinlang.org/docs/reference/using-ant.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/using-ant.html</a>"}, {"owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500899597, "post_id": 45273155, "comment_id": 77523738, "body": "Thank you for the reply. Why do I have to manipulate the ant task, when the build file is auto generated?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1500901892, "post_id": 45273155, "comment_id": 77525482, "body": "The Ant build script generation in IntelliJ IDEA does not support Kotlin at this time, and there are no plans to add support. Please consider using a different build system, such as Gradle."}, {"owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1536227945, "post_id": 45273155, "comment_id": 91351865, "body": "Thanks for information, @yole. I leave this question unanswered, b/c it is Not Implemented Yet."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1536228030, "post_id": 45273155, "comment_id": 91351926, "body": "It&#39;s extremely unlikely that it will ever be implemented."}], "owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500890643, "creation_date": 1500873905, "last_edit_date": 1500890643, "question_id": 45273155, "link": "https://stackoverflow.com/questions/45273155/intellij-idea-generated-ant-file-does-not-output-files", "title": "intelliJ IDEA generated ant file does not output files", "body": "<p>I have a java project converted automagically to kotlin. Now I generate ant build file for the project, but the variables are undefined:</p>\n\n<pre><code>&lt;property name=\"code.output.dir\" value=\"undefined\"/&gt;\n&lt;property name=\"code.testoutput.dir\" value=\"undefined\"/&gt;\n</code></pre>\n\n<p>When I change the value to a non existent directory it is not created. And when I create the directory manually the next time the build succeeds the directory is removed.</p>\n\n<p>How do I compile my project properly?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 45596, "user_id": 1741671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QQX5Z.png?s=128&g=1", "display_name": "Ajay S", "link": "https://stackoverflow.com/users/1741671/ajay-s"}, "reply_to_user": {"reputation": 10985, "user_id": 2664350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267fd556e7bd18db2e3923939cd3dd6b?s=128&d=identicon&r=PG", "display_name": "piet.t", "link": "https://stackoverflow.com/users/2664350/piet-t"}, "edited": false, "score": 0, "creation_date": 1500877975, "post_id": 45272573, "comment_id": 77510514, "body": "@piet.t It may be, but it is duplicate of Out Of Memory issue, OP can find lot of threads on SO on this"}, {"owner": {"reputation": 45596, "user_id": 1741671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/QQX5Z.png?s=128&g=1", "display_name": "Ajay S", "link": "https://stackoverflow.com/users/1741671/ajay-s"}, "reply_to_user": {"reputation": 10985, "user_id": 2664350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267fd556e7bd18db2e3923939cd3dd6b?s=128&d=identicon&r=PG", "display_name": "piet.t", "link": "https://stackoverflow.com/users/2664350/piet-t"}, "edited": false, "score": 0, "creation_date": 1500878825, "post_id": 45272573, "comment_id": 77510943, "body": "@piet.t I see. I retracted my vote on this."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7718881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZE0A.jpg?s=128&g=1", "display_name": "isicout", "link": "https://stackoverflow.com/users/7718881/isicout"}, "edited": false, "score": 0, "creation_date": 1500889577, "post_id": 45275563, "comment_id": 77516875, "body": "sure that  <code>val sPool = Executors.newScheduledThreadPool(2)!</code>  is outside this method , and  t have follow your suggest  modify my code ,  this error happend odds is   a lot less. but still happend,"}, {"owner": {"reputation": 57, "user_id": 7718881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZE0A.jpg?s=128&g=1", "display_name": "isicout", "link": "https://stackoverflow.com/users/7718881/isicout"}, "edited": false, "score": 0, "creation_date": 1500889739, "post_id": 45275563, "comment_id": 77516985, "body": "i have change follow code <code>time.scheduleAtFixedRate(taskQu, 0, 1000)</code>     \uff0c <code>val time=Timer()</code>\uff0c this error not happend and you can try ,   but thank you a lot !!!!"}], "tags": [], "owner": {"reputation": 166, "user_id": 4506881, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xg8dl_iH1-k/AAAAAAAAAAI/AAAAAAAAACw/jwP6NZZWh6E/photo.jpg?sz=128", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/4506881/imran-ahmad"}, "is_accepted": false, "score": 1, "last_activity_date": 1500884514, "creation_date": 1500884514, "answer_id": 45275563, "question_id": 45272573, "link": "https://stackoverflow.com/questions/45272573/java-lang-outofmemoryerror-pthread-create-1040kb-stack-failed-try/45275563#45275563", "title": "java.lang.OutOfMemoryError: pthread_create (1040KB stack) failed: Try", "body": "<p>I did the same thing using the below program and it is working fine:</p>\n\n<pre><code>public class ThreadExecutionTest {\n\n/**\n * @param args\n */\nScheduledExecutorService executor=Executors.newScheduledThreadPool(2);\n\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    ThreadExecutionTest test=new ThreadExecutionTest();\n    test.executeThread();\n\n}\n\npublic void executeThread() {\n    Runnable task=()-&gt; System.out.println(\"executing thread \"+Thread.currentThread().getName() );\n    executor.scheduleAtFixedRate(task, 0, 1000, TimeUnit.MILLISECONDS);\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The exception you are getting is OutofMemoryError as multiple thread are getting created after every second, so after sometime it's throwing this error.\nPlease check where you have declared \"val sPool = Executors.newScheduledThreadPool(2)!!\", if this is declared inside method then remove it and declare it outside the method.(declare it in the class level). </p>\n"}], "owner": {"reputation": 57, "user_id": 7718881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nZE0A.jpg?s=128&g=1", "display_name": "isicout", "link": "https://stackoverflow.com/users/7718881/isicout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2630, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1500884514, "creation_date": 1500870044, "question_id": 45272573, "link": "https://stackoverflow.com/questions/45272573/java-lang-outofmemoryerror-pthread-create-1040kb-stack-failed-try", "title": "java.lang.OutOfMemoryError: pthread_create (1040KB stack) failed: Try", "body": "<p>when i invoke threadExecutor  method large  number </p>\n\n<pre><code>  fun startAnimation(): Unit {\n\n    sPool.scheduleAtFixedRate(taskQu, 0, 1000, TimeUnit.MILLISECONDS)       \n}\n</code></pre>\n\n<p>it will cause this error prompt , <code>sPool</code> is java ThreadExecutors</p>\n\n<p><code>val sPool = Executors.newScheduledThreadPool(2)!!</code></p>\n\n<p>and <code>taskQu</code>is async timer task </p>\n\n<pre><code> val taskQu = object : TimerTask() {\n    override fun run() {\n\n        uihandler.obtainMessage().sendToTarget()\n\n    }\n}\n</code></pre>\n\n<p>i got this prompt</p>\n\n<pre><code>java.lang.OutOfMemoryError: pthread_create (1040KB stack) failed: Try again\n                                                                      at java.lang.Thread.nativeCreate(Native Method)\n                                                                      at java.lang.Thread.start(Thread.java:1063)\n                                                                      at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:921)\n                                                                      at java.util.concurrent.ThreadPoolExecutor.ensurePrestart(ThreadPoolExecutor.java:1556)\n                                                                      at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:310)\n                                                                      at java.util.concurrent.ScheduledThreadPoolExecutor.scheduleAtFixedRate(ScheduledThreadPoolExecutor.java:567)\n</code></pre>\n\n<p>so , where this problem about this issue  emerge?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1500892172, "post_id": 45272019, "comment_id": 77518668, "body": "The arguments you provide to your function are of type <code>String</code>. You can convert them to <code>Int</code> with the <code>toInt</code> function."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6105481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf7c42927bedfaa0fe85a9c2ff53f0b?s=128&d=identicon&r=PG&f=1", "display_name": "T.H. Chen", "link": "https://stackoverflow.com/users/6105481/t-h-chen"}, "edited": false, "score": 0, "creation_date": 1500866862, "post_id": 45272101, "comment_id": 77507053, "body": "So the maxOf called in the second line is not the function I implemented? Thanks :)"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 11, "user_id": 6105481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf7c42927bedfaa0fe85a9c2ff53f0b?s=128&d=identicon&r=PG&f=1", "display_name": "T.H. Chen", "link": "https://stackoverflow.com/users/6105481/t-h-chen"}, "edited": false, "score": 0, "creation_date": 1500867405, "post_id": 45272101, "comment_id": 77507164, "body": "@T.H.Chen yes. You didn&#39;t <b>define</b> any <code>maxOf2</code> funtion for the <code>Comparable</code> rather than didn&#39;t  <b>implemented</b>. When say didn&#39;t <b>implement</b> means you have <b>defined</b> but do nothing for it. they are different meanings.:)"}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 0, "last_activity_date": 1500866373, "creation_date": 1500866373, "answer_id": 45272101, "question_id": 45272019, "link": "https://stackoverflow.com/questions/45272019/kotlin-type-mismatch-error-when-passing-the-arguments-from-the-terminal/45272101#45272101", "title": "Kotlin type mismatch error when passing the arguments from the terminal", "body": "<p>This is because there is another <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/max-of.html\" rel=\"nofollow noreferrer\">maxOf</a> to get the max of <code>Comparable</code>, and <code>String</code> <strong>is-A</strong> <code>Comparable</code>.</p>\n\n<pre><code>fun &lt;T : Comparable&lt;T&gt;&gt; maxOf(a: T, b: T): T\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6105481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf7c42927bedfaa0fe85a9c2ff53f0b?s=128&d=identicon&r=PG&f=1", "display_name": "T.H. Chen", "link": "https://stackoverflow.com/users/6105481/t-h-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 45272101, "answer_count": 1, "score": 0, "last_activity_date": 1500866373, "creation_date": 1500865625, "question_id": 45272019, "link": "https://stackoverflow.com/questions/45272019/kotlin-type-mismatch-error-when-passing-the-arguments-from-the-terminal", "title": "Kotlin type mismatch error when passing the arguments from the terminal", "body": "<p>When I tried to learn the syntax of kotlin, I found a type mismatch error.\nThe file test1.kt is as follow:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;){\n  println(maxOf(args[0], args[1]))\n  println(maxOf2(args[0], args[1]))\n}\n\nfun maxOf(a: Int, b: Int): Int{\n  return if (a&gt;b) a else b\n}\n\nfun maxOf2(a: Int, b: Int): Int = if (a&gt;b) a else b\n</code></pre>\n\n<p>I compiled the program by typing the command on terminal.</p>\n\n<pre><code>kotlinc test1.kt -include-runtime -d test1.jar\n</code></pre>\n\n<p>And the error message shows:</p>\n\n<pre><code>test1.kt:3:18: error: type mismatch: inferred type is String but Int was expected\n  println(maxOf2(args[0], args[1]))\n                 ^\ntest1.kt:3:27: error: type mismatch: inferred type is String but Int was expected\n  println(maxOf2(args[0], args[1]))\n                          ^\n</code></pre>\n\n<p>The problem can be fixed by replacing</p>\n\n<pre><code>println(maxOf2(args[0], args[1]))\n</code></pre>\n\n<p>with </p>\n\n<pre><code>println(maxOf2(args[0].toInt(), args[1].toInt()))\n</code></pre>\n\n<p>My problem is why the error only happens in the function \"maxOf2\"?</p>\n"}, {"tags": ["intellij-idea", "build", "compiler-errors", "kotlin"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860366, "post_id": 45271471, "comment_id": 77505831, "body": "Is this a class you created?  A Google search revealed little for <code>FractionOval</code>."}, {"owner": {"reputation": 546, "user_id": 1972245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XkjYO.jpg?s=128&g=1", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/1972245/beryllium"}, "edited": false, "score": 0, "creation_date": 1500860424, "post_id": 45271471, "comment_id": 77505844, "body": "This seems like an import problem. Are you using gradle?"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860450, "post_id": 45271471, "comment_id": 77505849, "body": "@TimBiegeleisen Yes. It&#39;s at <a href=\"https://github.com/BlueHuskyStudios/Husky-UI/blob/For-Telegram-RP/JVM/src/org/bh/tools/ui/generic/geometry/Oval.kt#L26\" rel=\"nofollow noreferrer\">github.com/BlueHuskyStudios/Husky-UI/blob/For-Telegram-RP/JV&zwnj;&#8203;M/&hellip;</a>"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 546, "user_id": 1972245, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XkjYO.jpg?s=128&g=1", "display_name": "Beryllium", "link": "https://stackoverflow.com/users/1972245/beryllium"}, "edited": false, "score": 0, "creation_date": 1500860476, "post_id": 45271471, "comment_id": 77505855, "body": "@Beryllium no, I&#39;m using IDEA and git modules"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860514, "post_id": 45271471, "comment_id": 77505867, "body": "Are you using Maven?  Gradle?"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860550, "post_id": 45271471, "comment_id": 77505876, "body": "@TimBiegeleisen Just using IDEA&#39;s built-in build system"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860599, "post_id": 45271471, "comment_id": 77505892, "body": "If IntelliSense is working, but it can&#39;t build, then the only possibility which comes to mind is that this dependency is not on your class path."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860630, "post_id": 45271471, "comment_id": 77505896, "body": "@TimBiegeleisen I agree. I just can&#39;t figure out what that is, exactly"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860682, "post_id": 45271471, "comment_id": 77505919, "body": "Well what is the location of the JAR file, and are there other dependencies in the same location which <i>are</i> being picked up correctly when you build?"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860745, "post_id": 45271471, "comment_id": 77505939, "body": "@TimBiegeleisen There&#39;s no JAR, yet; currently, the whole project and its (my) libraries are being built every time. The rest of the Husky UI libraries and Blue Base are being picked up just fine."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500860892, "post_id": 45271471, "comment_id": 77505970, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149953/discussion-between-ben-leggiero-and-tim-biegeleisen\">continue this discussion in chat</a>."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500862485, "post_id": 45271471, "comment_id": 77506276, "body": "If you are including this dependency as actual source code rather than a JAR, then I think you&#39;d need to use the same package path.  Does a file called <code>org.bh.tools.ui.generic.geometry.FractionOval</code> exist in your project?"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500862777, "post_id": 45271471, "comment_id": 77506328, "body": "@TimBiegeleisen <code>FractionOval</code> exists only in Husky UI/Core, and Husky UI/JVM has a compile-time dependency on Husky UI/Core. Neither my top-level project, Telegram RP, nor any of the other libraries, contain a <code>FractionOval</code>. If they did, I&#39;d get a conflict error rather than a missing symbol error. I encourage you to clone the projects and see the build error, yourself."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1500862925, "post_id": 45271471, "comment_id": 77506358, "body": "I upvoted your question if that helps."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1500863137, "post_id": 45271471, "comment_id": 77506390, "body": "Thank you, @TimBiegeleisen. I will continue trying to fix it myself, as well, and update with an answer if I find one. I&#39;ll definitely give it a bounty, too, if it comes to that."}], "answers": [{"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1501630378, "post_id": 45444795, "comment_id": 77859494, "body": "Oh oops! I think I understand now. This is essentially the same solution as @cristianoms&#39;, correct?"}, {"owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1501635133, "post_id": 45444795, "comment_id": 77860696, "body": "@BenLeggiero Yes, but I think I am the first to have the correct answer, you can see from the timeline and my edit history ."}, {"owner": {"reputation": 2466, "user_id": 770557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc346cc45ac73ab4755b2555a4326ff?s=128&d=identicon&r=PG", "display_name": "cristianoms", "link": "https://stackoverflow.com/users/770557/cristianoms"}, "edited": false, "score": 0, "creation_date": 1501682509, "post_id": 45444795, "comment_id": 77886665, "body": "Your got it right about an our before me, @aristotll. The only thing you missed is about editing source code inside git submodules, which you shouldn&#39;t do."}], "tags": [], "owner": {"reputation": 6303, "user_id": 4680436, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yAD2X.jpg?s=128&g=1", "display_name": "aristotll", "link": "https://stackoverflow.com/users/4680436/aristotll"}, "is_accepted": true, "score": 3, "last_activity_date": 1501611841, "last_edit_date": 1501611841, "creation_date": 1501610490, "answer_id": 45444795, "question_id": 45271471, "link": "https://stackoverflow.com/questions/45271471/why-wont-my-idea-projects-build/45444795#45444795", "title": "Why won&#39;t my IDEA projects build?", "body": "<p>It is all about module name changes after your refactoring, so the dependencies cannot be found.</p>\n\n<p>1.\nIn <code>Telegram-RP/lib/Husky-UI/JVM/Husky UI JVM/JVM.iml</code> changes</p>\n\n<pre><code>&lt;orderEntry type=\"module\" module-name=\"Husky UI/Core\" exported=\"\" /&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;orderEntry type=\"module\" module-name=\"Husky UI\"  exported=\"\" /&gt;\n</code></pre>\n\n<hr>\n\n<p>2.\nIn <code>Telegram-RP/Desktop JVM/Desktop JVM.iml</code></p>\n\n<p>changes </p>\n\n<pre><code>&lt;orderEntry type=\"module\" module-name=\"Husky UI/Core\" /&gt;\n&lt;orderEntry type=\"module\" module-name=\"Husky UI/JVM\" /&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;orderEntry type=\"module\" module-name=\"Husky UI\" /&gt;\n&lt;orderEntry type=\"module\" module-name=\"JVM\" /&gt;\n</code></pre>\n\n<hr>\n\n<p>As a matter of fact, you can see module names from the <code>Project</code> view in bold text :\n<a href=\"https://i.stack.imgur.com/j2ZEp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j2ZEp.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 1, "creation_date": 1501630216, "post_id": 45446464, "comment_id": 77859446, "body": "Oh wow that made it build! Can you explain why? Also, this is essentially the same as @aristotll&#39;s answer, right?"}, {"owner": {"reputation": 2466, "user_id": 770557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc346cc45ac73ab4755b2555a4326ff?s=128&d=identicon&r=PG", "display_name": "cristianoms", "link": "https://stackoverflow.com/users/770557/cristianoms"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 1, "creation_date": 1501631464, "post_id": 45446464, "comment_id": 77859811, "body": "Yeah, it&#39;s kinda the same thing. The only thing missing in @aristotll&#39;s answer is that you&#39;re not supposed to edit the submodules configuration files directly. But in the end it&#39;s all about dependencies and their paths :)"}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 0, "creation_date": 1501633449, "post_id": 45446464, "comment_id": 77860307, "body": "I&#39;m all for editing &quot;gui-only&quot; files in the name of &quot;no, IDE, you messed up this time&quot; :P"}, {"owner": {"reputation": 2466, "user_id": 770557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc346cc45ac73ab4755b2555a4326ff?s=128&d=identicon&r=PG", "display_name": "cristianoms", "link": "https://stackoverflow.com/users/770557/cristianoms"}, "reply_to_user": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "edited": false, "score": 1, "creation_date": 1501634440, "post_id": 45446464, "comment_id": 77860537, "body": "haha I&#39;m the opposite. Actually, I hate committing IDE&#39;s specific project configuration files to source control. I rather having them automatically generated for me. Check how to do it with Gradle: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/using-gradle.html</a>"}], "tags": [], "owner": {"reputation": 2466, "user_id": 770557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc346cc45ac73ab4755b2555a4326ff?s=128&d=identicon&r=PG", "display_name": "cristianoms", "link": "https://stackoverflow.com/users/770557/cristianoms"}, "is_accepted": false, "score": 4, "last_activity_date": 1501616753, "creation_date": 1501616753, "answer_id": 45446464, "question_id": 45271471, "link": "https://stackoverflow.com/questions/45271471/why-wont-my-idea-projects-build/45446464#45446464", "title": "Why won&#39;t my IDEA projects build?", "body": "<p>Got it figured after messing around a while. I'll post the <code>git diff</code> output so you can apply it directly to your files.</p>\n\n<p>First, there's changes to be done in the submodule <code>lib/Husky-UI/JVM/Husky UI JVM/JVM.iml</code> (remember: you should edit the proper repository and update this project's git submodule):</p>\n\n<pre><code>-    &lt;orderEntry type=\"module\" module-name=\"Husky UI/Core\" exported=\"\" /&gt;\n+    &lt;orderEntry type=\"module\" module-name=\"Husky UI\" exported=\"\" /&gt;\n</code></pre>\n\n<p>Then go after <code>Core/Core.iml</code> and remove those 2 lines:</p>\n\n<pre><code>-    &lt;orderEntry type=\"module\" module-name=\"Husky UI/Core\" /&gt;\n-    &lt;orderEntry type=\"module\" module-name=\"Husky UI/JVM\" /&gt;\n</code></pre>\n\n<p>Finally,change <code>Desktop JVM/Desktop JVM.iml</code>:</p>\n\n<pre><code>+    &lt;orderEntry type=\"module\" module-name=\"Husky UI\" exported=\"\" /&gt;\n+    &lt;orderEntry type=\"module\" module-name=\"Husky IO\" exported=\"\" /&gt;\n+    &lt;orderEntry type=\"module\" module-name=\"JVM\" exported=\"\" /&gt;\n     &lt;orderEntry type=\"module\" module-name=\"Blue Base\" /&gt;\n-    &lt;orderEntry type=\"module\" module-name=\"Husky IO\" /&gt;\n     &lt;orderEntry type=\"module\" module-name=\"Core\" /&gt;\n-    &lt;orderEntry type=\"module\" module-name=\"Husky UI/Core\" /&gt;\n-    &lt;orderEntry type=\"module\" module-name=\"Husky UI/JVM\" /&gt;\n</code></pre>\n\n<p>Tell me how it worked out for you.</p>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 45444795, "answer_count": 2, "score": 8, "last_activity_date": 1501616753, "creation_date": 1500860231, "last_edit_date": 1501198095, "question_id": 45271471, "link": "https://stackoverflow.com/questions/45271471/why-wont-my-idea-projects-build", "title": "Why won&#39;t my IDEA projects build?", "body": "<p>I am building <a href=\"https://github.com/BlueHuskyStudios/Blue-Husky-Software-Platform\" rel=\"noreferrer\">a software platform</a>, and as a proof of concept (and to determine what it requires), I'm building an instant messenger called Telegram RP, using my platform repos listed here: <a href=\"https://github.com/BlueHuskyStudios/Blue-Husky-Software-Platform\" rel=\"noreferrer\">https://github.com/BlueHuskyStudios/Blue-Husky-Software-Platform</a></p>\n\n<p>Now, I've made the decision to separate the JVM-specific code from the generic code, but upon my first step doing so, it won't compile.</p>\n\n<p>I'm stumped. I've triple-checked language-level visibilities, removed and re-added both Git and IDEA modules, triple-checked the dependency hierarchies, ensured parallel builds are off... and yet <strong>it still claims that there's an unresolved reference at build time</strong>, despite the editor letting me middle-/control-click to navigate to the import. </p>\n\n<p>Can anyone help me understand how to make this understand that the package it's complaining about is actually there when I click build andor run?</p>\n\n<hr>\n\n<h3>I encourage you to clone these and attempt to build them in IDEA 2017.2:</h3>\n\n<p>Here's <strong>an SSCCE of my setup</strong>, which should compile just fine once all repos are cloned: <a href=\"https://github.com/BenLeggiero/SO-SSCCE-45271471\" rel=\"noreferrer\">https://github.com/BenLeggiero/SO-SSCCE-45271471</a></p>\n\n<p>Here's the repo containing the project in question: <a href=\"https://github.com/BenLeggiero/Telegram-RP\" rel=\"noreferrer\">https://github.com/BenLeggiero/Telegram-RP</a> <sub>(<a href=\"https://github.com/BenLeggiero/Telegram-RP/tree/60c7b026fd4bd09a0b348dec6e44a4a52326f7b1\" rel=\"noreferrer\">permalink to repo when I asked this question</a>)</sub></p>\n\n<p>Specifically, this sub-repo: <a href=\"https://github.com/BlueHuskyStudios/Husky-UI/tree/For-Telegram-RP\" rel=\"noreferrer\">https://github.com/BlueHuskyStudios/Husky-UI/tree/For-Telegram-RP</a></p>\n\n<p>Here's the line that's failing: <a href=\"https://github.com/BlueHuskyStudios/Husky-UI/blob/6887f492c37583d82b49ebf36b12d68a3a1dcb32/JVM/src/org/bh/tools/ui/swing/Graphics%20Extensions.kt#L8\" rel=\"noreferrer\">https://github.com/BlueHuskyStudios/Husky-UI/blob/6887f492c37583d82b49ebf36b12d68a3a1dcb32/JVM/src/org/bh/tools/ui/swing/Graphics%20Extensions.kt#L8</a></p>\n\n<pre><code>import org.bh.tools.ui.generic.geometry.FractionOval\n                       ^ ~~~~~\nError:(8, 24) Kotlin: Unresolved reference: generic\n</code></pre>\n\n<hr>\n\n<p>This didn't happen before I moved Desktop-JVM-specific code <a href=\"https://github.com/BlueHuskyStudios/Husky-UI/commit/7bb78188cc5e66c52ba012cdb6aa6ded71926cdf\" rel=\"noreferrer\">from Husky UI/Core</a>, <a href=\"https://github.com/BlueHuskyStudios/Husky-UI/commit/50ba2dcf6bd3520e17dc927aec82cd5fb88f266e\" rel=\"noreferrer\">to Husky UI/JVM</a>, so I must assume it involves that... I just can't figure out why.</p>\n\n<hr>\n\n<p>My environment:</p>\n\n<blockquote>\n  <p>IntelliJ IDEA 2017.2 <br/>\n  Build #IC-172.3317.76, built on July 15, 2017 <br/>\n  JRE: 1.8.0_152-release-915-b5 amd64 <br/>\n  JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o <br/>\n  Windows 10 10.0 <br/></p>\n</blockquote>\n"}, {"tags": ["android", "spinner", "kotlin", "dropdown"], "answers": [{"tags": [], "owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1500866424, "creation_date": 1500866424, "answer_id": 45272110, "question_id": 45270885, "link": "https://stackoverflow.com/questions/45270885/android-spinner-getdropdownview-repeating-items-after-selection/45272110#45272110", "title": "Android Spinner getDropDownView repeating items after selection", "body": "<p>In <code>getDropDownView()</code>, you only update the values of the view inside your <code>if (convertView == null)</code> case. You should always update all values every time the method is called, or else recycled views will have garbage in them.</p>\n"}], "owner": {"reputation": 953, "user_id": 7074708, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1163cb93f5145045e1a64109699fa9f5?s=128&d=identicon&r=PG&f=1", "display_name": "julioribeiro", "link": "https://stackoverflow.com/users/7074708/julioribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500866424, "creation_date": 1500853471, "question_id": 45270885, "link": "https://stackoverflow.com/questions/45270885/android-spinner-getdropdownview-repeating-items-after-selection", "title": "Android Spinner getDropDownView repeating items after selection", "body": "<p>I have the following SpinnerAdapter which successfully brings me a list of my object Discipline with it's correct layout style for both the spinner and the dropdown items. But when I select one of the items, the position 0 text repeats on the selected item position.</p>\n\n<pre><code>class ClassesSpinnerAdapter(context: Context, resourceId: Int,\n                        val disciplineClasses: List&lt;Discipline&gt;) : ArrayAdapter&lt;Discipline&gt;(context, resourceId, disciplineClasses) {\n\noverride fun getItem(position: Int): Discipline {\n    return disciplineClasses[position]\n}\n\noverride fun getCount(): Int {\n    return disciplineClasses.size\n}\n\noverride fun getItemId(position: Int): Long {\n    return super.getItemId(position)\n}\n\noverride fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n    var holder: ClassSpinnerHolder\n    var rowView: View\n\n    if (convertView == null) {\n        rowView = LayoutInflater.from(parent?.context).inflate(R.layout.classes_spinner_row, parent, false)\n        holder = ClassSpinnerHolder()\n\n        holder.classNameTxt = rowView.findViewById(R.id.classes_spinner_text) as TextView?\n        holder.classNameTxt?.text = disciplineClasses[position].className.replace(\"ano\", \"\")\n        rowView.tag = holder\n    } else {\n        holder = convertView.tag as ClassSpinnerHolder\n        rowView = convertView\n    }\n    val discipline: Discipline = disciplineClasses[position];\n    if (discipline != null) {\n        holder.classNameTxt?.text = disciplineClasses[position].className.replace(\"ano\", \"\")\n    }\n    return rowView\n}\n\n\noverride fun getDropDownView(position: Int, convertView: View?, parent: ViewGroup?): View {\n    var holder: ClassSpinnerHolder\n    var rowView: View\n\n    if (convertView == null) {\n        rowView = LayoutInflater.from(parent?.context).inflate(R.layout.classes_spinner_row, parent, false)\n        holder = ClassSpinnerHolder()\n\n        holder.classNameTxt = rowView.findViewById(R.id.classes_spinner_text) as TextView?\n        holder.classNameTxt?.text = disciplineClasses[position].className.replace(\"ano\", \"\")\n        rowView.tag = holder\n    } else {\n        holder = convertView.tag as ClassSpinnerHolder\n        rowView = convertView\n    }\n    return rowView\n}\n\ninner class ClassSpinnerHolder() {\n    var classNameTxt: TextView? = null\n}\n</code></pre>\n\n<p>This is the result that I'm getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PpeWf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PpeWf.png\" alt=\"Initial State\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/uQ6SB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uQ6SB.png\" alt=\"First Dropdown\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/nAI6y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nAI6y.png\" alt=\"Dropdown after selecting second element\"></a></p>\n\n<p>I kinda solved it by removing the getDropDownView() method and overriding toString on my model class, but I wanted a better solution, I think i'm overriding getDropDownView() in a wrong way, can someone help me out?</p>\n"}, {"tags": ["java", "android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1500848293, "creation_date": 1500848293, "answer_id": 45270382, "question_id": 45270127, "link": "https://stackoverflow.com/questions/45270127/convert-deprecated-methods-from-java-to-kotlin/45270382#45270382", "title": "Convert deprecated methods from Java to Kotlin", "body": "<p>You read the <a href=\"https://developer.android.com/reference/android/support/v4/view/MenuItemCompat.html#setOnActionExpandListener(android.view.MenuItem,%20android.support.v4.view.MenuItemCompat.OnActionExpandListener)\" rel=\"nofollow noreferrer\">documentation</a> and do what's suggested to you.</p>\n\n<blockquote>\n  <p><strong>This method was deprecated in API level 26.0.0-beta1.</strong><br>\n  Use <code>setOnActionExpandListener(MenuItem.OnActionExpandListener)</code> directly. </p>\n</blockquote>\n\n<p>The <code>setOnActionExpandListener()</code> was added with Android version 14 and since the Support libraries in version 26 requires the same version, there's no need for using it with the compatibility method.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8354597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500848293, "creation_date": 1500845873, "last_edit_date": 1500847104, "question_id": 45270127, "link": "https://stackoverflow.com/questions/45270127/convert-deprecated-methods-from-java-to-kotlin", "title": "Convert deprecated methods from Java to Kotlin", "body": "<p>I am translating a code from Java to Kotlin with Android Studio, but I have the problem.</p>\n\n<p>When I use this:</p>\n\n<pre><code>MenuItemCompat.setOnActionExpandListener(MenuItem.OnActionExpandListener)\n</code></pre>\n\n<p>Android Studio tells me <code>setOnActionExpandListener</code> is deprecated in Java. So how can I convert this code in Kotlin ?</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["spring", "spring-data", "spring-data-jpa", "kotlin", "ignite"], "comments": [{"owner": {"reputation": 64961, "user_id": 66686, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5c09f46f4edab31c43465b9f36638678?s=128&d=identicon&r=PG", "display_name": "Jens Schauder", "link": "https://stackoverflow.com/users/66686/jens-schauder"}, "edited": false, "score": 1, "creation_date": 1500870795, "post_id": 45269537, "comment_id": 77508028, "body": "you tagged the question with Java, but much of your code is not Java."}, {"owner": {"reputation": 64961, "user_id": 66686, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5c09f46f4edab31c43465b9f36638678?s=128&d=identicon&r=PG", "display_name": "Jens Schauder", "link": "https://stackoverflow.com/users/66686/jens-schauder"}, "edited": false, "score": 0, "creation_date": 1500871398, "post_id": 45269537, "comment_id": 77508195, "body": "The line you indicate can&#39;t possibly throw a NPE. Which is line 22 of Main?"}, {"owner": {"reputation": 1250, "user_id": 7285198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Rn0bgZZ2I0Q/AAAAAAAAAAI/AAAAAAAAAI0/E1OYOkut95s/photo.jpg?sz=128", "display_name": "Nikita Ryanov", "link": "https://stackoverflow.com/users/7285198/nikita-ryanov"}, "reply_to_user": {"reputation": 64961, "user_id": 66686, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5c09f46f4edab31c43465b9f36638678?s=128&d=identicon&r=PG", "display_name": "Jens Schauder", "link": "https://stackoverflow.com/users/66686/jens-schauder"}, "edited": false, "score": 0, "creation_date": 1500891149, "post_id": 45269537, "comment_id": 77517968, "body": "@JensSchauder yes, if was my fault. The prograaming language is kotlin and a few java. The 22th line in main is <code>(ignite.getOrCreateCache(&quot;ClientCache&quot;)).loadCache(null);</code> (another lines was commented and i deleted them, sorry for misleading)"}], "answers": [{"comments": [{"owner": {"reputation": 1250, "user_id": 7285198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Rn0bgZZ2I0Q/AAAAAAAAAAI/AAAAAAAAAI0/E1OYOkut95s/photo.jpg?sz=128", "display_name": "Nikita Ryanov", "link": "https://stackoverflow.com/users/7285198/nikita-ryanov"}, "edited": false, "score": 0, "creation_date": 1500891488, "post_id": 45272872, "comment_id": 77518184, "body": "The problem is that ignite create own spring context and my app create another context too and when i try to inject ClientService into ClientStore the ignite&#39;s context doesn&#39;t see any implementation of it (that&#39;s all i figured out). When i create an xml config for ignite and declare beans there it works fine until i need ClientRepository which can&#39;t be created."}], "tags": [], "owner": {"reputation": 64961, "user_id": 66686, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/5c09f46f4edab31c43465b9f36638678?s=128&d=identicon&r=PG", "display_name": "Jens Schauder", "link": "https://stackoverflow.com/users/66686/jens-schauder"}, "is_accepted": false, "score": 0, "last_activity_date": 1500872138, "creation_date": 1500872138, "answer_id": 45272872, "question_id": 45269537, "link": "https://stackoverflow.com/questions/45269537/how-to-inject-spring-resources-into-apache-ignite-classes/45272872#45272872", "title": "How to inject spring resources into Apache Ignite classes?", "body": "<p>I don't know Ignite and I don't know the programming language you are using but it looks like Ignite and not Spring is creating your <code>ClientStore</code> instances. Therefore you need to inject the dependencies manually.</p>\n\n<p>I'm not really familiar with the FactoryBuilder used there, so there might be nice solutions if you can use a constructor with arguments or even a lambda, but if that doesn' work, you can store a reference to the repository in static field and get it from there in the constructor of the <code>ClientStore</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1250, "user_id": 7285198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Rn0bgZZ2I0Q/AAAAAAAAAAI/AAAAAAAAAI0/E1OYOkut95s/photo.jpg?sz=128", "display_name": "Nikita Ryanov", "link": "https://stackoverflow.com/users/7285198/nikita-ryanov"}, "edited": false, "score": 0, "creation_date": 1500987005, "post_id": 45291894, "comment_id": 77569134, "body": "Thank you! I also figured out, that ignite doesn&#39;t know about spring context, but i don&#39;t know about IgniteSpring.start(...)!"}], "tags": [], "owner": {"reputation": 7955, "user_id": 1832193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7886121f315ae5348033e4b7b643c09d?s=128&d=identicon&r=PG", "display_name": "Valentin Kulichenko", "link": "https://stackoverflow.com/users/1832193/valentin-kulichenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1500941245, "creation_date": 1500941245, "answer_id": 45291894, "question_id": 45269537, "link": "https://stackoverflow.com/questions/45269537/how-to-inject-spring-resources-into-apache-ignite-classes/45291894#45291894", "title": "How to inject spring resources into Apache Ignite classes?", "body": "<p>When you start Ignite using <code>Ignition#start</code> with <code>IgniteConfiguration</code> object, it's not aware of Spring context at all. You need to use <code>IgniteSpring#start</code> methods instead to provide context explicitly. Another option is to utilize <a href=\"https://ignite.apache.org/releases/mobile/org/apache/ignite/IgniteSpringBean.html\" rel=\"noreferrer\">IgniteSpringBean</a> that already implements <code>ApplicationContextAware</code> and starts <code>Ignite</code> instance properly.</p>\n\n<p>Also note that you will need to provide either bean name or bean class as a parameter to <code>@SpringResource</code> annotation.</p>\n"}], "owner": {"reputation": 1250, "user_id": 7285198, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Rn0bgZZ2I0Q/AAAAAAAAAAI/AAAAAAAAAI0/E1OYOkut95s/photo.jpg?sz=128", "display_name": "Nikita Ryanov", "link": "https://stackoverflow.com/users/7285198/nikita-ryanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2106, "favorite_count": 0, "accepted_answer_id": 45291894, "answer_count": 2, "score": 2, "last_activity_date": 1500941245, "creation_date": 1500841128, "last_edit_date": 1500891174, "question_id": 45269537, "link": "https://stackoverflow.com/questions/45269537/how-to-inject-spring-resources-into-apache-ignite-classes", "title": "How to inject spring resources into Apache Ignite classes?", "body": "<p>I have a problem with injection spring beans into some ignite's classes. I'm trying to create this: Client -> Apache Ignite -> Spring-Data -> DataBase\nMaybe it is wrong, i'm not sure.</p>\n\n<p>So, at this moment my classes look like:\nAppConfiguration</p>\n\n<pre><code>@Configuration\n@ComponentScan(basePackages = arrayOf(\"com.ignite.cache\"))\nopen class AppConfiguration : Serializable {\n    private val logger: Logger = Logger.getLogger(AppConfiguration::class.java)\n\n    @Bean\n    open fun igniteInstance(): Ignite {\n        val cfg = IgniteConfiguration()\n\n        cfg.igniteInstanceName = \"springDataNode\"\n\n        cfg.isPeerClassLoadingEnabled = true\n\n\n        var clientCache: CacheConfiguration&lt;Long, Client&gt; = CacheConfiguration(\"ClientCache\")\n        clientCache.apply {\n            setIndexedTypes(Long::class.java, Client::class.java)\n            setCacheStoreFactory(FactoryBuilder.factoryOf(ClientStore::class.java))\n            isReadThrough = true\n            isWriteThrough = true\n        }\n\n        cfg.setCacheConfiguration(clientCache)\n\n        return Ignition.start(cfg)\n    }\n}\n</code></pre>\n\n<p>DataSourceConfiguration:</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = arrayOf(\"com.ignite.cache.model.repositories.springdatarepository\"))\n@EnableIgniteRepositories(basePackages = arrayOf(\"com.ignite.cache.model.repositories.igniterepository\"))\n@ComponentScan(basePackages = arrayOf(\"com.ignite.cache.model\"))\nopen class DataSourceConfiguration : Serializable {\n\n    @Bean\n    open fun entityManagerFactory(): LocalContainerEntityManagerFactoryBean {\n        var entityManagerFactory: LocalContainerEntityManagerFactoryBean = LocalContainerEntityManagerFactoryBean()\n\n        entityManagerFactory.apply {\n            dataSource = dataSource()\n            setPackagesToScan(\"com.ignite.cache.model\")\n\n            var vendorAdapter: HibernateJpaVendorAdapter = HibernateJpaVendorAdapter()\n\n            vendorAdapter.apply {\n                setGenerateDdl(true)\n                setShowSql(true)\n            }\n\n            var properties: Properties = Properties()\n\n            properties.apply {\n                put(\"database.dialet\", \"org.hibernate.dialect.PostgreSQL95Dialect\")\n                put(\"database.globally_quoted_identifiers\", \"false\")\n                put(\"database.enable_lazy_load_no_trans\", \"true\")\n                put(\"database.show_sql\", \"true\")\n            }\n\n            jpaVendorAdapter = vendorAdapter\n            setJpaProperties(properties)\n        }\n\n        return entityManagerFactory\n    }\n\n    @Bean\n    open fun dataSource(): DataSource {\n        var source: ComboPooledDataSource = ComboPooledDataSource()\n\n        source.apply {\n            driverClass = \"org.postgresql.Driver\"\n            jdbcUrl = \"jdbc:postgresql://localhost:5432/ignite\"\n            user = \"postgres\"\n            password = \"1111\"\n            acquireIncrement = 5\n            idleConnectionTestPeriod = 60\n            maxPoolSize = 20\n            minPoolSize = 10\n            initialPoolSize = 10\n        }\n\n        return source\n    }\n\n    @Bean\n    open fun transactionManager() : PlatformTransactionManager {\n        var manager: JpaTransactionManager = JpaTransactionManager()\n\n        manager.apply {\n            entityManagerFactory = entityManagerFactory().nativeEntityManagerFactory\n        }\n\n        return manager\n    }\n\n    @Bean\n    open fun exceptionTranslator(): PersistenceExceptionTranslationPostProcessor = PersistenceExceptionTranslationPostProcessor()\n}\n</code></pre>\n\n<p>Entity:</p>\n\n<pre><code>@Entity\n@Table(name = \"client\")\ndata class Client\n(\n        @Id\n        @Column(name = \"id\")\n        @GeneratedValue(generator = \"increment\")\n        @GenericGenerator(name = \"increment\", strategy = \"increment\")\n        var id: Long = 0,\n        @Column(name = \"email\", nullable = false, unique = true)\n        var email: String = \"\",\n        @Column(name = \"login\", nullable = false, unique = true)\n        var login: String = \"\"\n) : Serializable\n</code></pre>\n\n<p>Repositories:</p>\n\n<pre><code>@RepositoryConfig(cacheName = \"ClientCache\")\ninterface IgniteClientRepository : IgniteRepository&lt;Client, Long&gt; {\n}\n@Repository\ninterface ClientRepository : CrudRepository&lt;Client, Long&gt;\n</code></pre>\n\n<p>Standart implemenation for service classes and CacheStore for ignite:</p>\n\n<pre><code>public class ClientStore implements CacheStore&lt;Long, Client&gt;, Serializable {\n    private Logger logger = Logger.getLogger(ClientStore.class);\n\n    @SpringResource\n    private IClientService clientRepository; // &lt;- error is here (NPE)\n\n    @Override\n    public void loadCache(IgniteBiInClosure&lt;Long, Client&gt; igniteBiInClosure, @Nullable Object... objects) throws CacheLoaderException {\n        Iterable&lt;Client&gt; clients = clientRepository.findAll();\n\n        for(Client client : clients) {\n            igniteBiInClosure.apply(client.getId(), client);\n        }\n    }\n...\n}\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>public class Main {\n    private static Logger logger = Logger.getLogger(Main.class);\n\n    public static void main(String[] args) {\n        ApplicationContext context = new AnnotationConfigApplicationContext(AppConfiguration.class, DataSourceConfiguration.class);\n        Ignite ignite = context.getBean(Ignite.class);\n\n        (ignite.getOrCreateCache(\"ClientCache\")).loadCache(null);\n\n        IgniteClientRepository clientRepository = context.getBean(IgniteClientRepository.class);\n\n        Iterable&lt;Client&gt; clients = clientRepository.findAll();\n        for(Client client : clients) {\n            logger.info(client);\n        }\n\n        logger.info(\"Finish\");\n    }\n}\n</code></pre>\n\n<p>But when i try to load some data from database into cache i get error NPE:</p>\n\n<pre><code>Exception in thread \"main\" javax.cache.integration.CacheLoaderException: java.lang.NullPointerException\n    at org.apache.ignite.internal.processors.cache.store.GridCacheStoreManagerAdapter.loadCache(GridCacheStoreManagerAdapter.java:528)\n    at org.apache.ignite.internal.processors.cache.distributed.dht.GridDhtCacheAdapter.localLoadCache(GridDhtCacheAdapter.java:486)\n    at org.apache.ignite.internal.processors.cache.GridCacheProxyImpl.localLoadCache(GridCacheProxyImpl.java:217)\n    at org.apache.ignite.internal.processors.cache.GridCacheAdapter$LoadCacheJob.localExecute(GridCacheAdapter.java:5439)\n    at org.apache.ignite.internal.processors.cache.GridCacheAdapter$LoadCacheJobV2.localExecute(GridCacheAdapter.java:5488)\n    at org.apache.ignite.internal.processors.cache.GridCacheAdapter$TopologyVersionAwareJob.execute(GridCacheAdapter.java:6103)\n    at org.apache.ignite.compute.ComputeJobAdapter.call(ComputeJobAdapter.java:132)\n    at org.apache.ignite.internal.processors.closure.GridClosureProcessor$C2.execute(GridClosureProcessor.java:1842)\n    at org.apache.ignite.internal.processors.job.GridJobWorker$2.call(GridJobWorker.java:566)\n    at org.apache.ignite.internal.util.IgniteUtils.wrapThreadLoader(IgniteUtils.java:6621)\n    at org.apache.ignite.internal.processors.job.GridJobWorker.execute0(GridJobWorker.java:560)\n    at org.apache.ignite.internal.processors.job.GridJobWorker.body(GridJobWorker.java:489)\n    at org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:110)\n    at org.apache.ignite.internal.processors.job.GridJobProcessor.processJobExecuteRequest(GridJobProcessor.java:1114)\n    at org.apache.ignite.internal.processors.task.GridTaskWorker.sendRequest(GridTaskWorker.java:1379)\n    at org.apache.ignite.internal.processors.task.GridTaskWorker.processMappedJobs(GridTaskWorker.java:640)\n    at org.apache.ignite.internal.processors.task.GridTaskWorker.body(GridTaskWorker.java:532)\n    at org.apache.ignite.internal.util.worker.GridWorker.run(GridWorker.java:110)\n    at org.apache.ignite.internal.processors.task.GridTaskProcessor.startTask(GridTaskProcessor.java:743)\n    at org.apache.ignite.internal.processors.task.GridTaskProcessor.execute(GridTaskProcessor.java:443)\n    at org.apache.ignite.internal.processors.closure.GridClosureProcessor.callAsync(GridClosureProcessor.java:447)\n    at org.apache.ignite.internal.processors.closure.GridClosureProcessor.callAsync(GridClosureProcessor.java:418)\n    at org.apache.ignite.internal.processors.closure.GridClosureProcessor.callAsync(GridClosureProcessor.java:402)\n    at org.apache.ignite.internal.processors.cache.GridCacheAdapter.globalLoadCacheAsync(GridCacheAdapter.java:3681)\n    at org.apache.ignite.internal.processors.cache.GridCacheAdapter.globalLoadCache(GridCacheAdapter.java:3657)\n    at org.apache.ignite.internal.processors.cache.IgniteCacheProxy.loadCache(IgniteCacheProxy.java:387)\n    at com.ignite.cache.Main.main(Main.java:22)\nCaused by: java.lang.NullPointerException\n    at com.ignite.cache.model.service.ClientStore.loadCache(ClientStore.java:30)\n    at org.apache.ignite.internal.processors.cache.store.GridCacheStoreManagerAdapter.loadCache(GridCacheStoreManagerAdapter.java:502)\n    ... 26 more\n</code></pre>\n\n<p>I still can't figure out why my client service doesn't inject into CacheStore class. Maybe i should use xml config instead of java-class config for ignite? </p>\n"}, {"tags": ["android", "android-layout", "android-fragments", "kotlin", "android-view"], "comments": [{"owner": {"reputation": 3428, "user_id": 1827254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F1JrN.png?s=128&g=1", "display_name": "Eselfar", "link": "https://stackoverflow.com/users/1827254/eselfar"}, "edited": false, "score": 0, "creation_date": 1501086978, "post_id": 45269174, "comment_id": 77627473, "body": "I don&#39;t understand your issue. Why not using with the Navigation Drawer directly? I mean, you know that the user has selected the Fragment B, so you know what has happenned. So what not to put your logic in the onClickListener of the Navigation Drawer. Like that you&#39;ll know what is displayed or not without trying to guess it from the Fragment&#39;s state. But are you sure your Fragment A is not displayed btw?  Can you had the code of the Navigation Drawer listener?"}, {"owner": {"reputation": 2389, "user_id": 8195525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-L_XNZLvRO6o/AAAAAAAAAAI/AAAAAAAABI8/fpBStVFU5WI/photo.jpg?sz=128", "display_name": "Derek", "link": "https://stackoverflow.com/users/8195525/derek"}, "edited": false, "score": 1, "creation_date": 1501087448, "post_id": 45269174, "comment_id": 77627756, "body": "Please post more code, Where are you calling this function? what does your activity look like?"}, {"owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "reply_to_user": {"reputation": 3428, "user_id": 1827254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F1JrN.png?s=128&g=1", "display_name": "Eselfar", "link": "https://stackoverflow.com/users/1827254/eselfar"}, "edited": false, "score": 0, "creation_date": 1501105334, "post_id": 45269174, "comment_id": 77637815, "body": "@Eselfar  i have added more info onto why i need it like this."}, {"owner": {"reputation": 3428, "user_id": 1827254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F1JrN.png?s=128&g=1", "display_name": "Eselfar", "link": "https://stackoverflow.com/users/1827254/eselfar"}, "edited": false, "score": 0, "creation_date": 1501107649, "post_id": 45269174, "comment_id": 77638799, "body": "So why not calling <code>.stop</code> in the <code>onPause</code> of the Fragment as the fragment is paused when not displayed? Still don&#39;t understand your issue."}, {"owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "reply_to_user": {"reputation": 3428, "user_id": 1827254, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F1JrN.png?s=128&g=1", "display_name": "Eselfar", "link": "https://stackoverflow.com/users/1827254/eselfar"}, "edited": false, "score": 0, "creation_date": 1501113084, "post_id": 45269174, "comment_id": 77640325, "body": "@Eselfar onPause only gets called in a fragment when its activity onPause get called. It doesnt get called when its out of view"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1501139887, "post_id": 45269174, "comment_id": 77649030, "body": "How do you switch your fragment?"}, {"owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "reply_to_user": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1501216307, "post_id": 45269174, "comment_id": 77690517, "body": "@BakaWaii i updated with code on how i switch fragments"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1501217328, "post_id": 45269174, "comment_id": 77690833, "body": "Did you try to put the code in <code>onCreateView()</code> and <code>onDestroyView()</code>? I think it should work."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1501377799, "post_id": 45269174, "comment_id": 77751843, "body": "you are calling both <code>supportFragmentManager</code> and <code>fragmentManager</code>, is that supported?  also <code>setUserVisibleHint</code> had issues in several early SDK levels, not sure which level called it fixed."}, {"owner": {"reputation": 1121, "user_id": 5261361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SCqtO.jpg?s=128&g=1", "display_name": "Akshay Nandwana", "link": "https://stackoverflow.com/users/5261361/akshay-nandwana"}, "edited": false, "score": 0, "creation_date": 1501607449, "post_id": 45269174, "comment_id": 77848602, "body": "you could have a look aat one of my answers <a href=\"https://stackoverflow.com/questions/45384809/configure-a-fragment-to-be-shown-first-when-application-is-started/45384948#45384948\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "edited": false, "score": 0, "creation_date": 1501105396, "post_id": 45332810, "comment_id": 77637841, "body": "Since this is not an overriden method i would have to have an infinite loop constantly checking if the fragment is visible or not, this would not be ideal."}], "tags": [], "owner": {"reputation": 385, "user_id": 7851269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ffd629a61ee1a8690135c4d6a7ab556?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Alt", "link": "https://stackoverflow.com/users/7851269/tobias-alt"}, "is_accepted": false, "score": 3, "last_activity_date": 1501087023, "creation_date": 1501087023, "answer_id": 45332810, "question_id": 45269174, "link": "https://stackoverflow.com/questions/45269174/how-to-tell-when-fragment-is-not-visible-in-a-navigationdrawer/45332810#45332810", "title": "How to tell when fragment is not visible in a NavigationDrawer", "body": "<p>You can simply call </p>\n\n<pre><code>if (myFragment.isVisible()) {...}\n</code></pre>\n\n<p>or another way is</p>\n\n<pre><code>public boolean isFragmentUIActive() {\n    return isAdded() &amp;&amp; !isDetached() &amp;&amp; !isRemoving();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "edited": false, "score": 0, "creation_date": 1501614557, "post_id": 45396162, "comment_id": 77852660, "body": "I would add specifically to use the PreferenceFragmentCompat to use with the supportfragmentmanager. That was the issue since i was using both Native and Support fragment managers"}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": true, "score": 2, "last_activity_date": 1501720571, "last_edit_date": 1501720571, "creation_date": 1501386506, "answer_id": 45396162, "question_id": 45269174, "link": "https://stackoverflow.com/questions/45269174/how-to-tell-when-fragment-is-not-visible-in-a-navigationdrawer/45396162#45396162", "title": "How to tell when fragment is not visible in a NavigationDrawer", "body": "<p>Here are a few things I can think of...</p>\n\n<ol>\n<li>Use a consistent fragment, either Support or Native, not both.  And, some say the Support fragment is preferable (better maintained).</li>\n<li>Make sure the fragment container is not hard coded in XML.  If you intend to replace a fragment, then the initial fragment should be loaded dynamically by your code (you typically will load into a FrameLayout using the id as your R.id.{frameLayoutId}).</li>\n<li><strong>Do Use</strong> the Frament lifecycle events.  <code>onPause</code> fires when you replace a fragment, so does <code>onDetach</code>.  That will tell you when your old fragment is no longer visible (or will be invisible shortly). If it does not fire, then you have another issue in your code, possibly mixing of Fragment types, or a hardcoded fragment in XML?</li>\n<li>Use <code>setUserVisibleHint</code> only in a fragment pager, or be prepared to set it manually.  <a href=\"https://stackoverflow.com/questions/14731589/is-fragment-setuservisiblehint-called-by-the-android-system\">this</a> answer has a little more to say about the use of <code>setUserVisibleHint</code>.  When using a pager, multiple fragments can be attached at once, so an additional means (some call it lifecycle event) was needed to tell if a fragment was \"really, truly\" visible, hence <code>setUserVisibleHint</code> was introduced.</li>\n<li><p><strong>Bonus</strong>: If appropriate for your app, use the back stack for backing up by calling <code>addToBackStack</code> after <code>replace</code>.  I add this mainly as an addition lifecycle item one would typically want in their app.  The code looks like this...</p>\n\n<pre><code>// to initialize your fragment container\nsupportFragmentManager\n        .beginTransaction()\n        .add(R.id.content_fragment, fragment)\n        .addToBackStack(\"blank\")\n        .commit()\n\n// to update your fragment container\nsupportFragmentManager\n        .beginTransaction()\n        .replace(R.id.content_fragment, fragment)\n        .addToBackStack(\"settings\")\n        .commit()\n\n//in your XML, it can be as simple as adding the FrameLayout below,\n// if you start with the Android Studio template for Navigation drawer,\n// you can replace the call that includes the \"content_main\" layout\n\n&lt;!--&lt;include layout=\"@layout/content_main\" /&gt; --&gt;\n&lt;FrameLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:id=\"@+id/content_fragment\" /&gt;\n</code></pre></li>\n</ol>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 1023, "user_id": 5995152, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/56b76f80a32db6d0043477769da896ef?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamers Org", "link": "https://stackoverflow.com/users/5995152/dreamers-org"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 937, "favorite_count": 2, "accepted_answer_id": 45396162, "answer_count": 2, "score": 1, "last_activity_date": 1501720571, "creation_date": 1500838494, "last_edit_date": 1501175339, "question_id": 45269174, "link": "https://stackoverflow.com/questions/45269174/how-to-tell-when-fragment-is-not-visible-in-a-navigationdrawer", "title": "How to tell when fragment is not visible in a NavigationDrawer", "body": "<p>I am trying to tell when a user selects a different fragment in my navigation drawer. I was trying to use </p>\n\n<pre><code>override fun setUserVisibleHint(isVisibleToUser: Boolean) {\n    super.setUserVisibleHint(isVisibleToUser)\n}\n</code></pre>\n\n<p>How i switch fragments in my MainActivity:</p>\n\n<pre><code>override fun onNavigationItemSelected(item: MenuItem): Boolean {\n        // Handle navigation view item clicks here.\n        when (item.itemId) {\n\n            R.id.nav_camera -&gt; {\n                // Handle the camera action\n                val fragment: HomeFragment = HomeFragment()\n                supportFragmentManager.beginTransaction().replace(R.id.content_main, fragment).commit()\n\n            }\n            R.id.nav_manage -&gt; {\n                val fragment: SettingFragment = SettingFragment()\n                fragmentManager.beginTransaction().replace(R.id.content_main, fragment).commit()\n\n            }\n            R.id.nav_share -&gt; {\n                onInviteClicked()\n\n            }\n            R.id.nav_send -&gt; {\n\n                val emailIntent: Intent = Intent(android.content.Intent.ACTION_SEND)\n                emailIntent.type = Constants.FEEDBACK_EMAIL_TYPE\n\n                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,\n                        arrayOf(Constants.FEEDBACK_EMAIL_ADDRESS))\n\n                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,\n                        Constants.FEEDBACK_EMAIL_SUBJECT)\n\n                startActivity(Intent.createChooser(\n                        emailIntent, Constants.FEEDBACK_TITLE))\n\n\n            }\n        }\n\n        val drawer: DrawerLayout = findViewById(R.id.drawer_layout)\n        drawer.closeDrawer(GravityCompat.START)\n        return true\n    }\n</code></pre>\n\n<p>However this does not seem to get called at all. For example, in my <code>NavigationDrawer</code> activity, it shows Fragment A. The user opens the navigation drawer and selects Fragment B. <code>setUserVisibleHint()</code> does not get called in fragment A so my code can know it is no longer shown. I need my code that is isolated in fragment A to know when it is not shown so it can call .stop() on some variables. This is the same use case as onPause() in an activity.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500837575, "post_id": 45269024, "comment_id": 77500758, "body": "It will be better for you to copy and paste the code here than just using a picture. Also don&#39;t just post the error. Post your code too"}, {"owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "edited": false, "score": 0, "creation_date": 1500837606, "post_id": 45269024, "comment_id": 77500774, "body": "Mark - Line#16 of MainActivity"}], "answers": [{"tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 1, "last_activity_date": 1500840927, "creation_date": 1500840927, "answer_id": 45269512, "question_id": 45269024, "link": "https://stackoverflow.com/questions/45269024/unfortunately-the-app-has-stopped-android-studio-and-there-is-no-error/45269512#45269512", "title": "unfortunately the app has stopped Android studio and there is no Error", "body": "<p>The property <code>adapter</code> should be use a <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"nofollow noreferrer\">late-initialized</a> property or a nullable property. Otherwise, you will get a <code>KotlinNullPointerException</code> by the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"nofollow noreferrer\">NPE-lovers</a> operator <code>!!</code>, for example:</p>\n\n<pre><code>//                     v---cast `null` to any type will throws NullPointerException\nvar adpter:foodAdapter=null!!\n</code></pre>\n\n<p>Should be a <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"nofollow noreferrer\">late-initialized</a> property:</p>\n\n<pre><code>lateinit var adpter:foodAdapter\n</code></pre>\n\n<p><strong>OR</strong> a nullable property:</p>\n\n<pre><code>var adapter:foodAdapter? = null\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 289, "user_id": 3861647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nrJTR.jpg?s=128&g=1", "display_name": "David Pacheco", "link": "https://stackoverflow.com/users/3861647/david-pacheco"}, "is_accepted": false, "score": 0, "last_activity_date": 1501235950, "creation_date": 1501235950, "answer_id": 45370461, "question_id": 45269024, "link": "https://stackoverflow.com/questions/45269024/unfortunately-the-app-has-stopped-android-studio-and-there-is-no-error/45370461#45370461", "title": "unfortunately the app has stopped Android studio and there is no Error", "body": "<p>To expand on <a href=\"https://stackoverflow.com/questions/45269024/unfortunately-the-app-has-stopped-android-studio-and-there-is-no-error#45269512\">holi-java</a> answer, Kotlin unlike Java tries to be a <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#null-safety\" rel=\"nofollow noreferrer\">null safe language</a>.</p>\n\n<p>Unless explicitly defined all variables in Kotlin are not nullable. Therefore if you wish to have a variable that can hold a <code>null</code> value you will need to add <code>?</code> after the type name to indicate this is the case.</p>\n\n<pre><code>var canBeNull: String? = null\nvar canNotBeNull: String = null // Won't compile\nvar canNotBeNull2: String = null!! // Will crash and burn at runtime\n</code></pre>\n\n<p>In your example you were forcing the compiler to accept the <code>null</code> value into your <code>adapter</code> variable which led to the runtime NPE.</p>\n\n<p>The <code>!!</code> syntax should only be used when you are sure that the value <em>will not</em> be <code>null</code> but the compiler is unable to make that distinction. This can be the case when using 3rd party libraries that are written in Java.</p>\n"}], "owner": {"reputation": 11, "user_id": 8302247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ke_nBFVmyNE/AAAAAAAAAAI/AAAAAAAAAAs/HJhDGiOfrQ8/photo.jpg?sz=128", "display_name": "hassan elhallaq", "link": "https://stackoverflow.com/users/8302247/hassan-elhallaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 45269512, "answer_count": 2, "score": -2, "last_activity_date": 1501235950, "creation_date": 1500837514, "last_edit_date": 1500841229, "question_id": 45269024, "link": "https://stackoverflow.com/questions/45269024/unfortunately-the-app-has-stopped-android-studio-and-there-is-no-error", "title": "unfortunately the app has stopped Android studio and there is no Error", "body": "<p><a href=\"https://i.stack.imgur.com/3CTPx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3CTPx.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>In android monitor it's make this error like in the picture and I can't understand why is the error in the XML ?\nthe code no problem with it \ncan the picture that i added it make this error?</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nval ListOffood = ArrayList&lt;Food&gt;()\nvar adpter:foodAdapter=null!!\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    ListOffood.add(Food(\"sandwis\",\"m3 t7eneh\",R.drawable.ic_stat_name))\n    ListOffood.add(Food(\"sandwis\",\"m3 t7eneh\",R.drawable.ic_stat_name))\n    ListOffood.add(Food(\"sandwis\",\"m3 t7eneh\",R.drawable.ic_stat_name))\n    ListOffood.add(Food(\"sandwis\",\"m3 t7eneh\",R.drawable.ic_stat_name))\n    ListOffood.add(Food(\"sandwis\",\"m3 t7eneh\",R.drawable.ic_stat_name))\n\n    adpter=foodAdapter(this,ListOffood)\n    graidV.adapter=adpter\n}\n\nclass foodAdapter: BaseAdapter {\n    var ListOffood=ArrayList&lt;Food&gt;()\n    var context: Context?=null\n    constructor(context: Context, ListOffood:ArrayList&lt;Food&gt;):super(){\n        this.context=context\n        this.ListOffood=ListOffood\n    }\n\n\n    override fun getView(p0: Int, p1: View?, p2: ViewGroup?): View? {\n        val food = ListOffood[p0]\n        var view = LayoutInflater.from(context).inflate(R.layout.foodlist,p2,false)\n        view.textV.text=food.name\n        view.imageV.setImageResource(food.image!!)\n\n        return view\n    }\n\n\n    override fun getItem(p0: Int): Any {\n        return ListOffood[p0]\n    }\n\n    override fun getItemId(p0: Int): Long {\n        return p0.toLong()\n    }\n\n    override fun getCount(): Int {\n        return ListOffood.size\n\n    }\n\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-8.0-oreo"], "comments": [{"owner": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 2, "creation_date": 1500825884, "post_id": 45267041, "comment_id": 77497028, "body": "Can you try changing <code>this.label = ... as TextView</code> to <code>this.label = row?.findViewById&lt;TextView&gt;</code> and do so analogously for <code>val listView = ...</code>? Please let me know if this works so I can make this a proper answer in that case."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1500827823, "post_id": 45267041, "comment_id": 77497625, "body": "Which line causes error?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1500827869, "post_id": 45267041, "comment_id": 77497640, "body": "Can you demonstrate the problem with a smaller example?"}, {"owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "reply_to_user": {"reputation": 1839, "user_id": 1502352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacd8109133d34d8382cf40d4f41012d?s=128&d=identicon&r=PG", "display_name": "Christian Br&#252;ggemann", "link": "https://stackoverflow.com/users/1502352/christian-br%c3%bcggemann"}, "edited": false, "score": 0, "creation_date": 1500831464, "post_id": 45267041, "comment_id": 77498832, "body": "@ChristianBr&#252;ggemann Like this: <a href=\"http://i.imgur.com/ZeWKjt5.png\" rel=\"nofollow noreferrer\">i.imgur.com/ZeWKjt5.png</a> and this: <a href=\"http://i.imgur.com/Can7w0p.png\" rel=\"nofollow noreferrer\">i.imgur.com/Can7w0p.png</a> ? With your edits there are now these errors: <a href=\"http://i.imgur.com/qqPAjrL.png\" rel=\"nofollow noreferrer\">i.imgur.com/qqPAjrL.png</a>"}, {"owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1500831555, "post_id": 45267041, "comment_id": 77498865, "body": "@voddan This line causes the error: this.label = row?.findViewById(R.id.label) as TextView"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 1, "creation_date": 1500834470, "post_id": 45267041, "comment_id": 77499733, "body": "Try this this.label = row?.findViewById&lt;TextView&gt;(R.id.label) as TextView"}, {"owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500835999, "post_id": 45267041, "comment_id": 77500258, "body": "@AlfMoh The app starts now but crashes immediately after that. The error in the debug console is now: kotlin.TypeCastException: null cannot be cast to non-null type android.widget.ListView"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500836679, "post_id": 45267041, "comment_id": 77500458, "body": "Add a question mark to the end of TextView"}, {"owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500837841, "post_id": 45267041, "comment_id": 77500846, "body": "@AlfMoh With a question mark at the end (this.label = row?.findViewById&lt;TextView&gt;(R.id.label) as TextView?) I get the following error: Error:(94, 26) Type mismatch: inferred type is TextView? but TextView was expected"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500837930, "post_id": 45267041, "comment_id": 77500886, "body": "what about this? public val label: TextView?      init {         this.label = row?.findViewById&lt;TextView?&gt;(R.id.label) as TextView?     }"}, {"owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "reply_to_user": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "edited": false, "score": 0, "creation_date": 1500838286, "post_id": 45267041, "comment_id": 77500995, "body": "Unfortunately same error: <b>Error:(94, 26) Type mismatch: inferred type is TextView? but TextView was expected</b>. And this in the Android Monitor: <b>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.phenakit.tg.phenakit/com.phenakit.tg.phena&zwnj;&#8203;kit.MainActivity}: kotlin.TypeCastException: null cannot be cast to non-null type android.widget.ListView</b> @AlfMoh"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "reply_to_user": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "edited": false, "score": 0, "creation_date": 1500838343, "post_id": 45267041, "comment_id": 77501018, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149942/discussion-between-alf-moh-and-timo-guntner\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1475, "user_id": 3010630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aHiem.jpg?s=128&g=1", "display_name": "EricWasTaken", "link": "https://stackoverflow.com/users/3010630/ericwastaken"}, "edited": false, "score": 0, "creation_date": 1501652474, "post_id": 45269610, "comment_id": 77865528, "body": "If you are targeting API 26 in your App, then the answer below is the correct answer. <code>val listView = findViewById&lt;ListView&gt;(R.id.list)</code>"}, {"owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "reply_to_user": {"reputation": 1475, "user_id": 3010630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aHiem.jpg?s=128&g=1", "display_name": "EricWasTaken", "link": "https://stackoverflow.com/users/3010630/ericwastaken"}, "edited": false, "score": 0, "creation_date": 1501652965, "post_id": 45269610, "comment_id": 77865736, "body": "@ericWasTaken Yeah, you are right. The compiler is supposed to infer the type from the contents in the brackets. Sometimes it fails at that. Your code is also correct. Will update my answer to reflect the changes."}], "tags": [], "owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "is_accepted": false, "score": 2, "last_activity_date": 1501653046, "last_edit_date": 1501653046, "creation_date": 1500841576, "answer_id": 45269610, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android/45269610#45269610", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p>Change your code to this. Where the main changes occurred are marked with asterisks.</p>\n\n<pre><code>package com.phenakit.tg.phenakit\n\nimport android.content.Context\nimport android.os.Bundle\nimport android.support.design.widget.BottomNavigationView\nimport android.support.v7.app.AppCompatActivity\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.BaseAdapter\nimport android.widget.ListView\nimport android.widget.TextView\n\npublic class MainActivity : AppCompatActivity() {\n\n    private var mTextMessage: TextView? = null\n\n    private val mOnNavigationItemSelectedListener = BottomNavigationView.OnNavigationItemSelectedListener { item -&gt;\n        when (item.itemId) {\n            R.id.navigation_home -&gt; {\n                mTextMessage!!.setText(R.string.title_home)\n                return@OnNavigationItemSelectedListener true\n            }\n            R.id.navigation_dashboard -&gt; {\n                mTextMessage!!.setText(R.string.title_dashboard)\n                return@OnNavigationItemSelectedListener true\n            }\n            R.id.navigation_notifications -&gt; {\n                setContentView(R.layout.activity_list_view)\n                return@OnNavigationItemSelectedListener true\n            }\n        }\n        false\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        mTextMessage = findViewById(R.id.message) as TextView?\n        val navigation = findViewById(R.id.navigation) as BottomNavigationView\n        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n\n\n        **val listView = findViewById&lt;ListView&gt;(R.id.list)**\n\n\n\n        **listView?.adapter = ListExampleAdapter(this)**\n    }\n\n    private class ListExampleAdapter(context: Context) : BaseAdapter() {\n        internal var sList = arrayOf(\"Eins\", \"Zwei\", \"Drei\")\n        private  val mInflator: LayoutInflater\n\n        init {\n            this.mInflator = LayoutInflater.from(context)\n        }\n\n        override fun getCount(): Int {\n            return sList.size\n        }\n\n        override fun getItem(position: Int): Any {\n            return sList[position]\n        }\n\n        override fun getItemId(position: Int): Long {\n            return position.toLong()\n        }\n\n        override fun getView(position: Int, convertView: View?, parent: ViewGroup): View? {\n            val view: View?\n            val vh: ListRowHolder\n\n            if(convertView == null) {\n                view = this.mInflator.inflate(R.layout.list_row, parent, false)\n                vh = ListRowHolder(view)\n                view.tag = vh\n            } else {\n                view = convertView\n                vh = view.tag as ListRowHolder\n            }\n\n            vh.label.text = sList[position]\n            return view\n        }\n    }\n\n    private class ListRowHolder(row: View?) {\n        public var label: TextView\n\n        **init { this.label = row?.findViewById&lt;TextView?&gt;(R.id.label) as TextView }**\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 923, "user_id": 940731, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/333c4a17da8def9add5bab106e43779e?s=128&d=identicon&r=PG", "display_name": "Gustav Karlsson", "link": "https://stackoverflow.com/users/940731/gustav-karlsson"}, "edited": false, "score": 11, "creation_date": 1507364228, "post_id": 45297610, "comment_id": 80187509, "body": "Here&#39;s how to batch-resolve this: Open the <i>Replace in Path</i> dialog (Ctrl+Shift+R) and check the regex box. Replace <code>findViewById\\((.+?)\\)\\s+as\\s+(.+)</code> with <code>findViewById&lt;$2&gt;\\($1\\)</code> and run the replace on all files. It solved almost all of my errors."}, {"owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "edited": false, "score": 1, "creation_date": 1517418583, "post_id": 45297610, "comment_id": 84091306, "body": "Why it is sufficient in Java to infer View type by default and not sufficient in Kotlin? <code>findViewById(R.id.tabLayout).setOnClickListener(v-&gt; Log.d(TAG, &quot;login: &quot;));</code> this is OK for Java."}, {"owner": {"reputation": 947, "user_id": 3680200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7500324e1ff2a25d7f79855474443cf6?s=128&d=identicon&r=PG&f=1", "display_name": "user3680200", "link": "https://stackoverflow.com/users/3680200/user3680200"}, "reply_to_user": {"reputation": 923, "user_id": 940731, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/333c4a17da8def9add5bab106e43779e?s=128&d=identicon&r=PG", "display_name": "Gustav Karlsson", "link": "https://stackoverflow.com/users/940731/gustav-karlsson"}, "edited": false, "score": 0, "creation_date": 1551032678, "post_id": 45297610, "comment_id": 96481639, "body": "<code>findViewById\\((.+?)\\)\\s+as\\s+([A-Za-z0-9?]+)</code> works better for me. It prevents some one line code is not over @GustavKarlsson"}, {"owner": {"reputation": 1869, "user_id": 1033591, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/c28sO.jpg?s=128&g=1", "display_name": "Alston", "link": "https://stackoverflow.com/users/1033591/alston"}, "edited": false, "score": 1, "creation_date": 1573290531, "post_id": 45297610, "comment_id": 103840606, "body": "The link doesn&#39;t say that."}], "tags": [], "owner": {"reputation": 6267, "user_id": 696420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MtBnq.jpg?s=128&g=1", "display_name": "nmw", "link": "https://stackoverflow.com/users/696420/nmw"}, "is_accepted": true, "score": 236, "last_activity_date": 1573461584, "last_edit_date": 1573461584, "creation_date": 1500970573, "answer_id": 45297610, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android/45297610#45297610", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p>You must be using API level 26 (or above). This version has changed the signature of <code>View.findViewById()</code> - see here <a href=\"https://developer.android.com/about/versions/oreo/android-8.0-changes#fvbi-signature\" rel=\"noreferrer\">https://developer.android.com/about/versions/oreo/android-8.0-changes#fvbi-signature</a></p>\n\n<p>So in your case, where the result of <code>findViewById</code> is ambiguous, you need to supply the type:</p>\n\n<p>1/ Change </p>\n\n<p><code>val listView = findViewById(R.id.list) as ListView</code> to</p>\n\n<p><code>val listView = findViewById&lt;ListView&gt;(R.id.list)</code></p>\n\n<p>2/ Change </p>\n\n<p><code>this.label = row?.findViewById(R.id.label) as TextView</code> to</p>\n\n<p><code>this.label = row?.findViewById&lt;TextView&gt;(R.id.label) as TextView</code></p>\n\n<p>Note that in 2/ the cast is only required because <code>row</code> is nullable. If <code>label</code> \nwas nullable too, or if you made <code>row</code> not nullable, it wouldn't be required.</p>\n"}, {"tags": [], "owner": {"reputation": 514, "user_id": 3198425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEL3I.png?s=128&g=1", "display_name": "Trinea", "link": "https://stackoverflow.com/users/3198425/trinea"}, "is_accepted": false, "score": 7, "last_activity_date": 1502344387, "last_edit_date": 1502344387, "creation_date": 1501774476, "answer_id": 45488734, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android/45488734#45488734", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p>Andoid O change findViewById api from</p>\n\n<blockquote>\n  <p>public View findViewById(int id);</p>\n</blockquote>\n\n<p>to </p>\n\n<blockquote>\n  <p>public final  T findViewById(int id)</p>\n</blockquote>\n\n<p>so, if you are target to API 26, you can change</p>\n\n<blockquote>\n  <p>val listView = findViewById(R.id.list) as ListView</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>val listView = findViewById(R.id.list)</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>val listView: ListView = findViewById(R.id.list)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7922, "user_id": 5316872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IrQOX.jpg?s=128&g=1", "display_name": "Keshav Gera", "link": "https://stackoverflow.com/users/5316872/keshav-gera"}, "is_accepted": false, "score": 4, "last_activity_date": 1510574241, "creation_date": 1510574241, "answer_id": 47263833, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android/47263833#47263833", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p><strong>Its Working</strong> </p>\n\n<p><strong>API Level 25 or below use this</strong> </p>\n\n<pre><code>    var et_user_name = findViewById(R.id.et_user_name) as EditText\n</code></pre>\n\n<p><strong>API Level 26 or Above use this</strong> </p>\n\n<pre><code>    val et_user_name: EditText = findViewById(R.id.et_user_name)\n</code></pre>\n\n<p>Happy Coding !</p>\n"}, {"tags": [], "owner": {"reputation": 2001, "user_id": 1896203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zi8eA.jpg?s=128&g=1", "display_name": "pauminku", "link": "https://stackoverflow.com/users/1896203/pauminku"}, "is_accepted": false, "score": 0, "last_activity_date": 1513085755, "creation_date": 1513085755, "answer_id": 47774001, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android/47774001#47774001", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p>I would suggest you to use <code>synthetics</code> kotlin Android extension:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/tutorials/android-plugin.html</a> </p>\n\n<p><a href=\"https://antonioleiva.com/kotlin-android-extensions/\" rel=\"nofollow noreferrer\">https://antonioleiva.com/kotlin-android-extensions/</a></p>\n\n<p>In your case the code will be something like this:</p>\n\n<pre><code>init {\n   this.label = row.label\n}\n</code></pre>\n\n<p>As simple as that ;)</p>\n"}], "owner": {"reputation": 2533, "user_id": 2874407, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/846df4262273ac7d1f9d05aec6d8d302?s=128&d=identicon&r=PG&f=1", "display_name": "Timo G&#252;ntner", "link": "https://stackoverflow.com/users/2874407/timo-g%c3%bcntner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63965, "favorite_count": 12, "accepted_answer_id": 45297610, "answer_count": 5, "score": 118, "last_activity_date": 1573461584, "creation_date": 1500825232, "last_edit_date": 1503425486, "question_id": 45267041, "link": "https://stackoverflow.com/questions/45267041/not-enough-information-to-infer-parameter-t-with-kotlin-and-android", "title": "&quot;Not enough information to infer parameter T&quot; with Kotlin and Android", "body": "<p>I'm trying to replicate the following ListView in my Android app using Kotlin: <a href=\"https://github.com/bidrohi/KotlinListView\" rel=\"noreferrer\">https://github.com/bidrohi/KotlinListView</a>.</p>\n\n<p>Unfortunately I'm getting an error I'm unable to resolve myself.\nHere's my code:</p>\n\n<pre><code>MainActivity.kt:\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val listView = findViewById(R.id.list) as ListView\n    listView.adapter = ListExampleAdapter(this)\n}\n\nprivate class ListExampleAdapter(context: Context) : BaseAdapter() {\n    internal var sList = arrayOf(\"Eins\", \"Zwei\", \"Drei\")\n    private  val mInflator: LayoutInflater\n\n    init {\n        this.mInflator = LayoutInflater.from(context)\n    }\n\n    override fun getCount(): Int {\n        return sList.size\n    }\n\n    override fun getItem(position: Int): Any {\n        return sList[position]\n    }\n\n    override fun getItemId(position: Int): Long {\n        return position.toLong()\n    }\n\n    override fun getView(position: Int, convertView: View?, parent: ViewGroup): View? {\n        val view: View?\n        val vh: ListRowHolder\n\n        if(convertView == null) {\n            view = this.mInflator.inflate(R.layout.list_row, parent, false)\n            vh = ListRowHolder(view)\n            view.tag = vh\n        } else {\n            view = convertView\n            vh = view.tag as ListRowHolder\n        }\n\n        vh.label.text = sList[position]\n        return view\n    }\n}\n\nprivate class ListRowHolder(row: View?) {\n    public val label: TextView\n\n    init {\n        this.label = row?.findViewById(R.id.label) as TextView\n    }\n}\n}\n</code></pre>\n\n<p>The layouts are exactly as here: <a href=\"https://github.com/bidrohi/KotlinListView/tree/master/app/src/main/res/layout\" rel=\"noreferrer\">https://github.com/bidrohi/KotlinListView/tree/master/app/src/main/res/layout</a></p>\n\n<p>The full error message I'm getting is this: \n<strong>Error:(92, 31) Type inference failed: Not enough information to infer parameter T in fun  findViewById(p0: Int): T!\nPlease specify it explicitly.</strong></p>\n\n<p>I'd appreciate any help I can get.</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 3522901, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qHSLg.jpg?s=128&g=1", "display_name": "Akash kumar", "link": "https://stackoverflow.com/users/3522901/akash-kumar"}, "edited": false, "score": 0, "creation_date": 1595183052, "post_id": 45266299, "comment_id": 111379597, "body": "Thanks for your support and sharing your in depth knowledge"}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 3, "last_activity_date": 1500823127, "last_edit_date": 1500823127, "creation_date": 1500820798, "answer_id": 45266299, "question_id": 45266264, "link": "https://stackoverflow.com/questions/45266264/kotlin-mainactivity-extends-appcompatactivity-onrequestpermissionsresult-func/45266299#45266299", "title": "Kotlin - MainActivity extends AppCompatActivity, onRequestPermissionsResult function not found and cannot be overriden", "body": "<p>Kotlin <code>Array&lt;Int&gt;</code> is mapped to Java <code>Integer[]</code>, <code>IntArray</code> is mapped to Java <code>int[]</code>, they are different array types in Java. and you can see the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#mapped-types\" rel=\"nofollow noreferrer\">mapped types</a> in Kotlin as further.</p>\n\n<p>The <a href=\"http://android.xsoftlab.net/reference/android/support/v4/app/FragmentActivity.html#onRequestPermissionsResult(int,%20java.lang.String[],%20int[])\" rel=\"nofollow noreferrer\">AppCompatActivity#onRequestPermissionsResult</a> method signature is:</p>\n\n<pre><code>override fun onRequestPermissionsResult(requestCode : Int , \n                                        permissions: Array&lt;String&gt;,     \n                                        grantResults: IntArray){\n    //      it is IntArray rather than Array&lt;Int&gt;   ---^  \n    TODO()\n}\n</code></pre>\n\n<p>Rather than:</p>\n\n<pre><code>override fun onRequestPermissionsResult(requestCode : Int , \n                                        permissions: Array&lt;String&gt;, \n                                        grantResults: Array&lt;Int&gt;){\n    TODO()\n}\n</code></pre>\n\n<p><em>Note</em>: if the api has promised that its parameters never be <code>null</code>, such as <a href=\"http://android.xsoftlab.net/reference/android/support/v4/app/FragmentActivity.html#onRequestPermissionsResult(int,%20java.lang.String[],%20int[])\" rel=\"nofollow noreferrer\">onRequestPermissionsResult</a> then you can use an <code>IntArray</code> to make the parameter easy to use. Otherwise, you should use <code>IntArray?</code> instead.</p>\n\n<p><strong>IF</strong> you don't want to know all of the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#mapped-types\" rel=\"nofollow noreferrer\">mapped types</a> in Kotlin, there is another way that will make you override the super class methods quickly. First, put the cursor in the class, then press <code>CTRL+O</code> to select the methods to override. for example:</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), \n                     ConnectionCallbacks,\n                     OnConnectionFailedListener{\n// put the cursor here, press `CTRL+O` to select which method you want to override\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8353481, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-t35cveRLcr4/AAAAAAAAAAI/AAAAAAAAAHM/PJ-86E3Pszg/photo.jpg?sz=128", "display_name": "yrsend", "link": "https://stackoverflow.com/users/8353481/yrsend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3938, "favorite_count": 0, "accepted_answer_id": 45266299, "answer_count": 1, "score": 2, "last_activity_date": 1500823127, "creation_date": 1500820559, "last_edit_date": 1500820677, "question_id": 45266264, "link": "https://stackoverflow.com/questions/45266264/kotlin-mainactivity-extends-appcompatactivity-onrequestpermissionsresult-func", "title": "Kotlin - MainActivity extends AppCompatActivity, onRequestPermissionsResult function not found and cannot be overriden", "body": "<p>I have a trial activity class Main Activity that extends AppCompatActivity. In the docs, AppCompatActivity inherits the method onRequestPermissionsResult, when I try to override the said method onRequestPermissionsResult,\n   this error shows up</p>\n\n<blockquote>\n  <p>\"Error:(95, 5) 'onRequestPermissionsResult' overrides nothing\"</p>\n</blockquote>\n\n<pre><code>    class MainActivity : AppCompatActivity(),  ConnectionCallbacks, OnConnectionFailedListener{\n    //I didnt include the other functions in the interfaces, suffice to say i have already added them in the original\n\n    override fun onRequestPermissionsResult(requestCode : Int , permissions: Array&lt;String&gt;, grantResults: Array&lt;Int&gt;){\n        println(\"SHOULD HAVE THIS FUNCTION\")\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 3103, "user_id": 3887813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a5d60d4ba9be9d67243bef5ca7f0141?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/3887813/robin"}, "edited": false, "score": 0, "creation_date": 1500807332, "post_id": 45263831, "comment_id": 77491403, "body": "Assuming you&#39;re using Android Studio, why don&#39;t you simply take that code snippet and paste it into a Kotlin file? The IDE will automatically convert it to correct Kotlin code for you. Or you can write it in a Java file and press Ctrl+Alt+Shift+K to convert the whole file to Kotlin."}], "answers": [{"tags": [], "owner": {"reputation": 4445, "user_id": 6290452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc977b070a4c0b40edff349c8a017048?s=128&d=identicon&r=PG&f=1", "display_name": "AlexTa", "link": "https://stackoverflow.com/users/6290452/alexta"}, "is_accepted": true, "score": 5, "last_activity_date": 1500804699, "creation_date": 1500804699, "answer_id": 45263900, "question_id": 45263831, "link": "https://stackoverflow.com/questions/45263831/fragment-instantiation-in-kotlin/45263900#45263900", "title": "Fragment instantiation in kotlin", "body": "<p>You can take the following code snippet as example:</p>\n\n<pre><code>var fragment: Fragment? = null\nwhen(id) {\n    R.id.nav_new -&gt; fragment = FragAllPosts()\n    R.id.nav_about -&gt; fragment = FragAuthors()\n    R.id.nav_tags -&gt; fragment = FragTags()\n}\n\nif(null != fragment) {\n    val ft = fragmentManager.beginTransaction();\n    ft.replace(R.id.content_frame, fragment);\n    ft.commit();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1390, "user_id": 8951109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c6ce25a6621f6b6c3889babd4e8c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Hofmann", "link": "https://stackoverflow.com/users/8951109/sebastian-hofmann"}, "edited": false, "score": 1, "creation_date": 1529750606, "post_id": 51000221, "comment_id": 88994596, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}], "tags": [], "owner": {"reputation": 71, "user_id": 4731759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4627f64c97aa74f6fdf2cbcf49accaf?s=128&d=identicon&r=PG", "display_name": "Jedsada Tiwongvorakul", "link": "https://stackoverflow.com/users/4731759/jedsada-tiwongvorakul"}, "is_accepted": false, "score": 1, "last_activity_date": 1529749407, "creation_date": 1529749407, "answer_id": 51000221, "question_id": 45263831, "link": "https://stackoverflow.com/questions/45263831/fragment-instantiation-in-kotlin/51000221#51000221", "title": "Fragment instantiation in kotlin", "body": "<p>Hope it helps!!!</p>\n\n<pre><code>var fragment: Fragment? = null\nwhen (id) {\n    R.id.nav_new -&gt; fragment = FragAllPosts.newInstance()\n    R.id.nav_about -&gt; fragment = FragAuthors.newInstance()\n    R.id.nav_tags -&gt; fragment = FragTags.newInstance()\n}\n\n// activity use supportFragmentManager\n// fragment use childFragmentManager\n\nfragment?.apply {\n    supportFragmentManager?.beginTransaction()?.replace(R.id.content_frame, this)?.commit()\n}\n\n// Example class fragment create newInstance function\n\nclass FragAllPosts : Fragment() {\n    companion object {\n        fun newInstance(bundle: Bundle? = null): FragAllPosts = FragAllPosts().apply {\n            arguments = bundle\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 807, "user_id": 4497505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/402c3f26a47faea34a7927fdd7b0c2f3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/4497505/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2672, "favorite_count": 0, "accepted_answer_id": 45263900, "answer_count": 2, "score": -2, "last_activity_date": 1529749407, "creation_date": 1500804240, "last_edit_date": 1500854422, "question_id": 45263831, "link": "https://stackoverflow.com/questions/45263831/fragment-instantiation-in-kotlin", "title": "Fragment instantiation in kotlin", "body": "<p>I'm new to kotlin and I'd like to create the following code in kotlin:</p>\n\n<pre><code>Fragment fragment = null;\n\nswitch(id) {\n    case R.id.nav_new:\n        fragment = new FragAllPosts();\n        break;\n    case R.id.nav_about:\n        fragment = new FragAuthors();\n        break;\n    case R.id.nav_tags:\n        fragment = new FragTags();\n        break;\n}\n\nif (fragment != null) {\n    FragmentTransaction ft = getFragmentManager().beginTransaction();\n    ft.replace(R.id.content_frame, fragment);\n    ft.commit();\n}\n</code></pre>\n\n<p>The fragments are very basic and don't contain any parameters yet.\nHow can I achieve the above in kotlin? Thanks!</p>\n"}, {"tags": ["android", "kotlin", "android-lint"], "comments": [{"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500773138, "post_id": 45259370, "comment_id": 77484926, "body": "its not a function, and its also not an extension function. its actually a property with a <code>getter</code>.  can you show code how you are using it?"}, {"owner": {"reputation": 2273, "user_id": 4407321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KHKUZ.png?s=128&g=1", "display_name": "Allan W", "link": "https://stackoverflow.com/users/4407321/allan-w"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500779912, "post_id": 45259370, "comment_id": 77485810, "body": "@Les oops my mistake. I had it in a file with my extensions and I forgot that this doesn&#39;t count as one. I&#39;ve added an example usage, but it&#39;s basically the same as replacing <code>Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP</code> with <code>buildIsLollipopAndUp</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 0, "last_activity_date": 1500807656, "creation_date": 1500807656, "answer_id": 45264326, "question_id": 45259370, "link": "https://stackoverflow.com/questions/45259370/using-newapi-property-still-causes-lint-warnings/45264326#45264326", "title": "Using NewApi property still causes lint warnings", "body": "<p>It looks like <code>lint</code> doesn't know how to expand the inline Kotlin variable in place.  I didn't check if it expands for Java.  Will do so later.</p>\n\n<p>Also noted...</p>\n\n<pre><code>    if(!(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP)) return\n    val anim = ViewAnimationUtils.createCircularReveal(this, x, y, 0f, r).setDuration(duration)\n</code></pre>\n\n<p>...will not suppress lint.  But...</p>\n\n<pre><code>    if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP)\n    val anim = ViewAnimationUtils.createCircularReveal(this, x, y, 0f, r).setDuration(duration)\n</code></pre>\n\n<p>...will.  Again, I did not check if the same is true for Java.</p>\n\n<p>So, I doubt this is a Kotlin/Java issue.  I think it is a lint issue.</p>\n"}], "owner": {"reputation": 2273, "user_id": 4407321, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/KHKUZ.png?s=128&g=1", "display_name": "Allan W", "link": "https://stackoverflow.com/users/4407321/allan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1500807656, "creation_date": 1500758683, "last_edit_date": 1500779861, "question_id": 45259370, "link": "https://stackoverflow.com/questions/45259370/using-newapi-property-still-causes-lint-warnings", "title": "Using NewApi property still causes lint warnings", "body": "<p>I have created my own extension function that checks if the sdk is at least lollipop</p>\n\n<pre><code>inline val buildIsLollipopAndUp: Boolean\n    get() = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP\n</code></pre>\n\n<p>However, if I use this, the lint tools can't figure out that I've verified my api level and still gives me new api warnings. Is there anyway to make those warning disappear and have the lint tools recognize my check?</p>\n\n<p>A simple example:</p>\n\n<pre><code>if (buildIsLollipopAndUp) ripple()\nelse fade()\n</code></pre>\n\n<p>Where <code>ripple</code> calls on the circular animation that is only available for lollipop and up, and <code>fade</code> is the default animation.</p>\n\n<p>My <a href=\"https://github.com/AllanWang/KAU/blob/61d87976e8b29ed25061ae98743a6cf4f4274542/core/src/main/kotlin/ca/allanwang/kau/utils/AnimUtils.kt#L20\" rel=\"nofollow noreferrer\">full example</a>:</p>\n\n<pre><code>@SuppressLint(\"NewApi\")\n@KauUtils fun View.circularReveal(x: Int = 0, y: Int = 0, offset: Long = 0L, radius: Float = -1.0f, duration: Long = 500L, onStart: (() -&gt; Unit)? = null, onFinish: (() -&gt; Unit)? = null) {\n    if (!isAttachedToWindow) {\n        onStart?.invoke()\n        visible()\n        onFinish?.invoke()\n        return\n    }\n    if (!buildIsLollipopAndUp) return fadeIn(offset, duration, onStart, onFinish)\n\n    val r = if (radius &gt;= 0) radius\n    else Math.max(Math.hypot(x.toDouble(), y.toDouble()), Math.hypot((width - x.toDouble()), (height - y.toDouble()))).toFloat()\n\n    val anim = ViewAnimationUtils.createCircularReveal(this, x, y, 0f, r).setDuration(duration)\n    anim.startDelay = offset\n    anim.addListener(object : AnimatorListenerAdapter() {\n        override fun onAnimationStart(animation: Animator?) {\n            visible()\n            onStart?.invoke()\n        }\n\n        override fun onAnimationEnd(animation: Animator?) = onFinish?.invoke() ?: Unit\n        override fun onAnimationCancel(animation: Animator?) = onFinish?.invoke() ?: Unit\n    })\n    anim.start()\n}\n</code></pre>\n\n<p>Note that I need the lint suppressor so as to avoid lint warnings</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 1, "creation_date": 1500733484, "post_id": 45255559, "comment_id": 77474976, "body": "You want to quickly edit the question and replace the all upper case. That is perceived as screaming - and nobody likes being screamed at."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 8308225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGtd0.jpg?s=128&g=1", "display_name": "vankhanhpr", "link": "https://stackoverflow.com/users/8308225/vankhanhpr"}, "edited": false, "score": 0, "creation_date": 1500736208, "post_id": 45255651, "comment_id": 77475692, "body": "thank you for your answer But I do not know what to do,Can you say more about this"}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "reply_to_user": {"reputation": 193, "user_id": 8308225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGtd0.jpg?s=128&g=1", "display_name": "vankhanhpr", "link": "https://stackoverflow.com/users/8308225/vankhanhpr"}, "edited": false, "score": 0, "creation_date": 1500737445, "post_id": 45255651, "comment_id": 77476073, "body": "I added a bit more info to my answer."}, {"owner": {"reputation": 1194, "user_id": 4696610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pnh70.jpg?s=128&g=1", "display_name": "Ravi Vaniya", "link": "https://stackoverflow.com/users/4696610/ravi-vaniya"}, "edited": false, "score": 0, "creation_date": 1557292863, "post_id": 45255651, "comment_id": 98710717, "body": "thx @BladeCoder, You saved my day, I have wasted 8 to 9 hours on this, upvoted for <code>onlyWorkingSolution</code> i know :)"}, {"owner": {"reputation": 331, "user_id": 4607466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-sGZSpilFXrk/AAAAAAAAAAI/AAAAAAAABrY/KdQ0Bc9gZuI/photo.jpg?sz=128", "display_name": "Lucas B.", "link": "https://stackoverflow.com/users/4607466/lucas-b"}, "edited": false, "score": 1, "creation_date": 1559843409, "post_id": 45255651, "comment_id": 99555746, "body": "But how nothing could be selected if the event onItemSelected was called? lol"}, {"owner": {"reputation": 5682, "user_id": 1214866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2abf3be662a661df93f57518e39fc25?s=128&d=identicon&r=PG", "display_name": "ham", "link": "https://stackoverflow.com/users/1214866/ham"}, "reply_to_user": {"reputation": 331, "user_id": 4607466, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-sGZSpilFXrk/AAAAAAAAAAI/AAAAAAAABrY/KdQ0Bc9gZuI/photo.jpg?sz=128", "display_name": "Lucas B.", "link": "https://stackoverflow.com/users/4607466/lucas-b"}, "edited": false, "score": 3, "creation_date": 1561160553, "post_id": 45255651, "comment_id": 99986009, "body": "@LucasB. because it&#39;s a bad API.This shouldn&#39;t happen. But for historical reasons, it might never be changed. At least selectedItemView should be marked nullable."}], "tags": [], "owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "is_accepted": true, "score": 43, "last_activity_date": 1533341316, "last_edit_date": 1533341316, "creation_date": 1500733706, "answer_id": 45255651, "question_id": 45255559, "link": "https://stackoverflow.com/questions/45255559/kotlin-crashes-on-android-when-selected-item-view-is-null/45255651#45255651", "title": "Kotlin crashes on Android when selected item view is null", "body": "<p>In <code>onItemSelected()</code>, the <code>selectedItemView</code> argument may be null when nothing is selected. Change its type to <code>View?</code> instead of <code>View</code> and properly handle the case where nothing is selected.</p>\n\n<p>Example (index is also negative when nothing is selected):</p>\n\n<pre><code>override fun onItemSelected(parentView: AdapterView&lt;*&gt;, selectedItemView: View?, position: Int, id: Long) {\n    if (position &gt;= 0) {\n        sex = parentView.getItemAtPosition(position).toString()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 8308225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RGtd0.jpg?s=128&g=1", "display_name": "vankhanhpr", "link": "https://stackoverflow.com/users/8308225/vankhanhpr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2809, "favorite_count": 3, "accepted_answer_id": 45255651, "answer_count": 1, "score": 16, "last_activity_date": 1533341398, "creation_date": 1500733079, "last_edit_date": 1533341398, "question_id": 45255559, "link": "https://stackoverflow.com/questions/45255559/kotlin-crashes-on-android-when-selected-item-view-is-null", "title": "Kotlin crashes on Android when selected item view is null", "body": "<p>I am getting an error and the app dies when I run it.</p>\n\n<p>This is the error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>07-22 21:02:19.785 3136-3136/? E/dalvikvm: Could not find class 'android.graphics.drawable.RippleDrawable', referenced from method android.support.v7.widget.AppCompatImageHelper.hasOverlappingRendering\n07-22 21:02:19.825 3136-3136/? E/dalvikvm: Could not find class 'android.widget.ThemedSpinnerAdapter', referenced from method android.support.v7.widget.AppCompatSpinner$DropDownAdapter.&lt;init&gt;\n07-22 21:02:19.915 3136-3136/? E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.vankhanhpr.vidu2, PID: 3136\n    java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter selectedItemView\n    at com.example.vankhanhpr.vidu2.fragment_main.fragment_mom_baby.Create_File_Mon$onCreate$1.onItemSelected(Create_File_Mon.kt)\n    at android.widget.AdapterView.fireOnSelected(AdapterView.java:893)\n    at android.widget.AdapterView.selectionChanged(AdapterView.java:880)\n    at android.widget.AdapterView.checkSelectionChanged(AdapterView.java:1043)\n    at android.widget.AdapterView.handleDataChanged(AdapterView.java:1023)\n    at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:180)\n    at android.widget.Spinner.onMeasure(Spinner.java:486)\n    at android.support.v7.widget.AppCompatSpinner.onMeasure(AppCompatSpinner.java:416)\n    at android.view.View.measure(View.java:16628)\n    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1231)\n    at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)\n    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)\n    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)\n    at android.view.View.measure(View.java:16628)\n    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:719)\n    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:455)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\n    at android.support.v7.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:139)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)\n    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)\n    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)\n    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)\n    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)\n    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)\n    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2298)\n    at android.view.View.measure(View.java:16628)\n    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1916)\n    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1113)\n    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1295)\n    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)\n    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5622)\n    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:761)\n    at android.view.Choreographer.doCallbacks(Choreographer.java:574)\n    at android.view.Choreographer.doFrame(Choreographer.java:544)\n    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:747)\n    at android.os.Handler.handleCallback(Handler.java:733)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:212)\n    at android.app.ActivityThread.main(ActivityThread.java:5135)[enter image description here][1]\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>if(flag!!) {\n    var adapter = ArrayAdapter.createFromResource(this, R.array.relationship_arrays, android.R.layout.simple_spinner_item)\n    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n    var adapter_sex = ArrayAdapter.createFromResource(this, R.array.sex_arrays, android.R.layout.simple_spinner_item)\n    adapter_sex.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n    relationship_spinner!!.adapter = adapter\n    sex_spinner!!.adapter = adapter_sex\n}\nelse\n{\n    var adapter = ArrayAdapter.createFromResource(this, R.array.relationship_mom, android.R.layout.simple_spinner_item)\n    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n\n    var adapter_sex = ArrayAdapter.createFromResource(this, R.array.sex_mom, android.R.layout.simple_spinner_item)\n    adapter_sex.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)\n\n    relationship_spinner!!.adapter = adapter\n    sex_spinner!!.adapter = adapter_sex\n}\n\ntry {\n    relationship_spinner!!.setOnItemSelectedListener(object : OnItemSelectedListener {\n        override fun onItemSelected(parentView: AdapterView&lt;*&gt;, selectedItemView: View, position: Int, id: Long) {\n            relationship = parentView.getItemAtPosition(position).toString()\n        }\n\n        override fun onNothingSelected(parentView: AdapterView&lt;*&gt;) {\n            var r = 0\n        }\n    })\n\n    sex_spinner!!.setOnItemSelectedListener(object : OnItemSelectedListener {\n        override fun onItemSelected(parentView: AdapterView&lt;*&gt;, selectedItemView: View, position: Int, id: Long) {\n            sex = parentView.getItemAtPosition(position).toString()\n        }\n\n        override fun onNothingSelected(parentView: AdapterView&lt;*&gt;) {\n            var r = 0\n        }\n    })\n}\ncatch (e:Exception){}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 18360, "user_id": 2911458, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3a6060bc7ace07fa75791cd5dac2d46a?s=128&d=identicon&r=PG", "display_name": "stkent", "link": "https://stackoverflow.com/users/2911458/stkent"}, "is_accepted": false, "score": 0, "last_activity_date": 1500735370, "creation_date": 1500735370, "answer_id": 45255904, "question_id": 45255458, "link": "https://stackoverflow.com/questions/45255458/android-kotlin-custom-webview-cannot-be-invoked-as-a-function-the-function/45255904#45255904", "title": "Android: Kotlin: custom webView - cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>Why not just call</p>\n\n<pre><code>observableWebView.setOnLongClickListener\n</code></pre>\n\n<p>It looks like you're trying to \"invoke\" a method on <code>observableWebView</code>, but it's not a function type?</p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1500750806, "creation_date": 1500750806, "answer_id": 45258248, "question_id": 45255458, "link": "https://stackoverflow.com/questions/45255458/android-kotlin-custom-webview-cannot-be-invoked-as-a-function-the-function/45258248#45258248", "title": "Android: Kotlin: custom webView - cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>You can extend Anko to support your custom View with an extension function like this one (see the docs <a href=\"https://github.com/Kotlin/anko/wiki/Anko-Layouts#is-it-extensible\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>inline fun ViewManager.observableWebView(theme: Int = 0, init: ObservableWebView.() -&gt; Unit): ObservableWebView {\n    return ankoView({ ObservableWebView(it) }, theme, init)\n}\n</code></pre>\n\n<p>Then creating one and setting a listener would look like this:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    verticalLayout {\n        observableWebView {\n            setOnLongClickListener {\n                Log.d(\"WEBVIEW\", \"on long click\")\n                true\n            }\n            onLongClick {\n                Log.d(\"WEBVIEW\", \"on long click\")\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This code shows off too different ways to create the long click listener, of course you do not need both.</p>\n\n<p>The first one is the classic way, it uses <code>WebView</code>'s <code>setOnLongClickListener</code> function, and <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM conversion</a> to create a listener instance with a lambda. You have to return a boolean value here to indicate whether you've handled the event, or you want it to propagate.</p>\n\n<p>The second way, using <code>onLongClick</code> is a way to do it with Anko. Above <code>0.10.0</code>, this will use coroutines. Here, you don't get the option to return a boolean value.</p>\n\n<hr>\n\n<p>Optionally, if you want to be able to use the <code>observableWebView()</code> syntax as well, you can create another extension that delegates to this previous extension:</p>\n\n<pre><code>inline fun ViewManager.observableWebView() = observableWebView {}\n</code></pre>\n"}], "owner": {"reputation": 1227, "user_id": 8164968, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c76845207f72226c13e5546f8ddff26c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8164968/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2552, "favorite_count": 1, "accepted_answer_id": 45258248, "answer_count": 2, "score": 2, "last_activity_date": 1500750806, "creation_date": 1500732401, "question_id": 45255458, "link": "https://stackoverflow.com/questions/45255458/android-kotlin-custom-webview-cannot-be-invoked-as-a-function-the-function", "title": "Android: Kotlin: custom webView - cannot be invoked as a function. The function &#39;invoke()&#39; is not found", "body": "<p>I has one activity (<strong>ContactActivity.kt</strong>) that contain only one webView component. Activity write on Kotlin. </p>\n\n<p>I want to replace webView with my custom webView (<strong>ObservableWebView.java</strong>).</p>\n\n<p>So here code (<strong>MyActivity.kt</strong>):</p>\n\n<pre><code>class ContactActivity : AppCompatActivity() {\n\n        @SuppressLint(\"NewApi\")\n        override fun onCreate(savedInstanceState: Bundle?) {\n            verticalLayout {\n     val observableWebView = object : ObservableWebView(MainApp.getAppContext())\n            observableWebView { // error here\n                    setOnLongClickListener(object : View.OnLongClickListener {\n                        override fun onLongClick(v: View): Boolean {\n                            return true\n                        }\n                    })\n                }\n            }\n       }\n    }\n</code></pre>\n\n<p>Also I has custom webView - ObservableWebView.java:</p>\n\n<pre><code>public class ObservableWebView extends WebView {\n    private OnScrollChangedCallback mOnScrollChangedCallback;\n\n    public ObservableWebView(final Context context) {\n        super(context);\n    }\n\n    public ObservableWebView(final Context context, final AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public ObservableWebView(final Context context, final AttributeSet attrs, final int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    @Override\n    protected void onScrollChanged(final int l, final int t, final int oldl, final int oldt) {\n        super.onScrollChanged(l, t, oldl, oldt);\n        if (mOnScrollChangedCallback != null) mOnScrollChangedCallback.onScroll(l, t);\n    }\n\n    public OnScrollChangedCallback getOnScrollChangedCallback() {\n        return mOnScrollChangedCallback;\n    }\n\n    public void setOnScrollChangedCallback(final OnScrollChangedCallback onScrollChangedCallback) {\n        mOnScrollChangedCallback = onScrollChangedCallback;\n    }\n\n    /**\n     * Impliment in the activity/fragment/view that you want to listen to the webview\n     */\n    public static interface OnScrollChangedCallback {\n        public void onScroll(int l, int t);\n    }\n}\n</code></pre>\n\n<p>But I get compile error in <strong>MyActivity.kt</strong>:</p>\n\n<pre><code>Error:(145, 13) Expression 'observableWebView' of type '&lt;no name provided&gt;' cannot be invoked as a function. The function 'invoke()' is not found\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "edited": false, "score": 0, "creation_date": 1500728486, "post_id": 45254850, "comment_id": 77473579, "body": "Thank you for your response, I am thinking to add some additional methods rather than updating existing ones. Is it possible?"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "edited": false, "score": 0, "creation_date": 1500728598, "post_id": 45254850, "comment_id": 77473613, "body": "@Rasi I don&#39;t updating existing <code>at</code>. <code>String</code> has no <code>at</code> method. the code above just an example, sir."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "edited": false, "score": 0, "creation_date": 1500729912, "post_id": 45254850, "comment_id": 77473979, "body": "@Rasi Hi, I have added a detailed explaination of the exntension method, you can see it as further."}, {"owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "edited": false, "score": 0, "creation_date": 1500730348, "post_id": 45254850, "comment_id": 77474101, "body": "I tried to answer at a basic level which can help beginners like me. Please check and suggest Edit if needed. Thanks again!"}, {"owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1500740280, "post_id": 45254850, "comment_id": 77476919, "body": "You cannot create an extension for an existing member function. The <code>substring</code> in your example is actually an extension itself in Kotlin, so you can choose which one you to import. If it were a member function you couldn&#39;t use your own extension with the same name as it is &#39;shadowed&#39; by the real function. This is also explained in the <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1500740337, "post_id": 45254850, "comment_id": 77476937, "body": "@RobCo hi, extension function has its own scope like as <a href=\"https://stackoverflow.com/questions/44912705/kotlin-top-level-function-scopes-shadowing/44912960#44912960\">top-level function scopes</a>. having you copy the code and test it yet?"}, {"owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1500740869, "post_id": 45254850, "comment_id": 77477095, "body": "Yes, it only works because all methods on String are defined as extensions in the framework. You can&#39;t &#39;override&#39; an existing member function function as the answer suggests. For example try with File.getName()"}, {"owner": {"reputation": 4869, "user_id": 6151924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d32a9252d2034b93b3eb8f743512104?s=128&d=identicon&r=PG&f=1", "display_name": "RobCo", "link": "https://stackoverflow.com/users/6151924/robco"}, "edited": false, "score": 0, "creation_date": 1500741107, "post_id": 45254850, "comment_id": 77477153, "body": "Well you&#39;re not wrong, and many methods in Kotlin lib are extensions so it still applies, I just found the wording a bit misleading. +1"}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": true, "score": 3, "last_activity_date": 1500741881, "last_edit_date": 1500741881, "creation_date": 1500728350, "answer_id": 45254850, "question_id": 45254766, "link": "https://stackoverflow.com/questions/45254766/kotlin-extension-for-final-class/45254850#45254850", "title": "Kotlin - Extension for final class", "body": "<p>yes, you can. Kotin <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">extension method</a> provides the ability to extend a class with new functionality <strong>without having to inherit from the class</strong> or use any type of design pattern such as Decorator.</p>\n\n<p>Below is an extension method for a <code>String</code>:</p>\n\n<pre><code>//  v--- the extension method receiver type\nfun String.at(value: Int) = this[value]\n</code></pre>\n\n<p>And the extension method code generated as Java below:</p>\n\n<pre><code>public static char at(String receiver, int value){\n    return receiver.charAt(value);\n}\n</code></pre>\n\n<p>So an extension method in Kotlin is using <strong>delegation</strong> rather than inheritance.</p>\n\n<p>Then you can calling an extension method like as its member function as below:</p>\n\n<pre><code>println(\"bar\".at(1))//println 'a'\n</code></pre>\n\n<p>You also can write an extension method for the existing extension function, for example:</p>\n\n<pre><code>fun String.substring(value: Int): String = TODO()\n\n//    v--- throws exception rather than return \"ar\"\n\"bar\".substring(1)\n</code></pre>\n\n<p>But you can't write an extension method for the existing member function, for example:</p>\n\n<pre><code>operator fun String.get(value: Int): Char = TODO()\n\n//   v--- return 'a' rather than throws an Exception\nval second = \"bar\"[1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6041, "user_id": 5138921, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5f202e6926526d8b4ad819de30504e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alf Moh", "link": "https://stackoverflow.com/users/5138921/alf-moh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500729269, "creation_date": 1500729269, "answer_id": 45254986, "question_id": 45254766, "link": "https://stackoverflow.com/questions/45254766/kotlin-extension-for-final-class/45254986#45254986", "title": "Kotlin - Extension for final class", "body": "<p>You can do that with extension functions in Kotlin. With extensions, you are able to add extra functionality to a class that you do or do not have access to; for example a legacy code base. In the example given in the Kotlin docs <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">here</a>, <code>swap</code> was added to <code>MutableList&lt;Int&gt;</code> which doesn't have <code>swap</code> originally. A <code>this</code> keyword is used that refers to the object that the swap functionality will operate on. In the example below, <code>this</code> refers to <code>testList</code></p>\n\n<pre><code>val testList = mutableListOf(1, 2, 3)\ntestList.swap(0, 2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500731444, "post_id": 45255132, "comment_id": 77474415, "body": "Hi, How about it now? do you having any confusing? I&#39;m not good at english, I wish you can understand it."}, {"owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500732249, "post_id": 45255132, "comment_id": 77474639, "body": "Thanks for update. My intention was just to show, how to add additional methods in final classes. No intention to use any kind of that method. It was random example."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500732303, "post_id": 45255132, "comment_id": 77474661, "body": "well. I have up-vote it since it is right about your intention."}], "tags": [], "owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "is_accepted": false, "score": 1, "last_activity_date": 1500731090, "last_edit_date": 1500731090, "creation_date": 1500730292, "answer_id": 45255132, "question_id": 45254766, "link": "https://stackoverflow.com/questions/45254766/kotlin-extension-for-final-class/45255132#45255132", "title": "Kotlin - Extension for final class", "body": "<p>Trying to add more detail, this answer might be helpful for someone.</p>\n\n<p>Yes we can add additional methods to <code>final</code> classes like <code>String</code>. For an example I would like to add one method in <code>String</code> which will tell me that my <code>String</code> have valid number of characters for password or not. </p>\n\n<p>So what I have to do is, I have ti create a below function which can be written in same <code>class</code> or at different separate <code>class</code> file. </p>\n\n<pre><code>    fun String.hasValidPassword() : Boolean {\n\n // Even no need to send string from outside, use 'this' for reference of a String\n\n     return !TextUtils.isEmpty(this) &amp;&amp; this.length &gt; 6\n    }\n</code></pre>\n\n<p>And now from anywhere call </p>\n\n<pre><code>    val isValid : Boolean = password.haveValidLength()\n</code></pre>\n\n<h2>Suggestion</h2>\n\n<p>If your application just has a single password validation, then there is no problem.</p>\n\n<p>However, I don't suggest you write such a extension method <code>hasValidPassword</code> if the application has more than one validation. since the extension method is <strong>satically</strong>, you can't change your <code>hasValidPassword</code> in runtime. So if you want to change the validation in runtime, you should using a function instead, for example:</p>\n\n<pre><code>class PasswordRepository(private val validate:(String)-&gt;Boolean){\n    fun save(value:String){\n        if(validate(value)){\n            //TODO persist the password\n        }\n    }\n}\n\nval permitAll = PasswordRepository {true}\nval denyAll = PasswordRepository {false}\n\npermitAll.save(\"it will be persisted\")\ndenyAll.save(\"it will not be persisted\")\n</code></pre>\n\n<p>In other words, the extension method above violates <a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"nofollow noreferrer\">Single Responsibility Principle</a>, it does validation &amp; string operations.</p>\n"}], "owner": {"reputation": 9509, "user_id": 1380032, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/56881b805678c0352d3d4f92a908ffbf?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/1380032/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3053, "favorite_count": 0, "accepted_answer_id": 45254850, "answer_count": 3, "score": 1, "last_activity_date": 1500741881, "creation_date": 1500727821, "last_edit_date": 1500740654, "question_id": 45254766, "link": "https://stackoverflow.com/questions/45254766/kotlin-extension-for-final-class", "title": "Kotlin - Extension for final class", "body": "<p>Is it possible to create extension of <code>final</code> classes like String? Like in <strong>swift</strong> it is possible to add additional methods inside a <code>extension</code> of <code>final</code> <code>class</code>.</p>\n\n<p>For an example - I would like to create a method in <code>String</code> extension which will tell me <code>String</code> have valid length for password.</p>\n\n<pre><code> val password : String = mEdtPassword!!.getText().toString()\n\n // how to define haveValidLength method in extension\n val isValid : Boolean = password.haveValidLength()\n</code></pre>\n\n<p>Note - That example is just for a sake to understand usability of <code>extension</code>, not a real scenario.</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 861, "user_id": 7229971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/AWdZL.jpg?s=128&g=1", "display_name": "KuLdip PaTel", "link": "https://stackoverflow.com/users/7229971/kuldip-patel"}, "edited": false, "score": 0, "creation_date": 1500727409, "post_id": 45254466, "comment_id": 77473274, "body": "just do one thing , copy all your MyActivity.java class code and paste in MyActivity.kt class...android studio do every thing for you."}, {"owner": {"reputation": 1227, "user_id": 8164968, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c76845207f72226c13e5546f8ddff26c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8164968/alex"}, "reply_to_user": {"reputation": 861, "user_id": 7229971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/AWdZL.jpg?s=128&g=1", "display_name": "KuLdip PaTel", "link": "https://stackoverflow.com/users/7229971/kuldip-patel"}, "edited": false, "score": 0, "creation_date": 1500727793, "post_id": 45254466, "comment_id": 77473390, "body": "I want to replace webView by custom webView (ObservableWebView). How I can do this?"}, {"owner": {"reputation": 1227, "user_id": 8164968, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c76845207f72226c13e5546f8ddff26c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8164968/alex"}, "reply_to_user": {"reputation": 861, "user_id": 7229971, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/AWdZL.jpg?s=128&g=1", "display_name": "KuLdip PaTel", "link": "https://stackoverflow.com/users/7229971/kuldip-patel"}, "edited": false, "score": 0, "creation_date": 1500807321, "post_id": 45254466, "comment_id": 77491400, "body": "I found solution: <a href=\"https://stackoverflow.com/questions/45255458/android-kotlin-custom-webview-cannot-be-invoked-as-a-function-the-function/45258248#45258248\" title=\"android kotlin custom webview cannot be invoked as a function the function\">stackoverflow.com/questions/45255458/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3910, "user_id": 4103854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EUnmsdTd6P4/AAAAAAAAAAI/AAAAAAAAAGI/TBEWqWgj0wo/photo.jpg?sz=128", "display_name": "Logain", "link": "https://stackoverflow.com/users/4103854/logain"}, "is_accepted": true, "score": 1, "last_activity_date": 1500726600, "creation_date": 1500726600, "answer_id": 45254579, "question_id": 45254466, "link": "https://stackoverflow.com/questions/45254466/how-replace-webview-by-custom-webview/45254579#45254579", "title": "How replace webView by custom webView?", "body": "<p>If you want to add your custom webview following anko syntax, you need to extend the DSL as stated on the <a href=\"https://github.com/Kotlin/anko/wiki/Anko-Layouts#is-it-extensible\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<p>Follow the <code>MapView</code> example but use your <code>ObservableWebView</code> instead.</p>\n\n<ul>\n<li><a href=\"https://github.com/Kotlin/anko/wiki/Anko-Layouts#is-it-extensible\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/anko/wiki/Anko-Layouts#is-it-extensible</a></li>\n</ul>\n"}], "owner": {"reputation": 1227, "user_id": 8164968, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/c76845207f72226c13e5546f8ddff26c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/8164968/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "accepted_answer_id": 45254579, "answer_count": 1, "score": 0, "last_activity_date": 1500727721, "creation_date": 1500725980, "last_edit_date": 1500727721, "question_id": 45254466, "link": "https://stackoverflow.com/questions/45254466/how-replace-webview-by-custom-webview", "title": "How replace webView by custom webView?", "body": "<p>I has my activity that contain only one webView. </p>\n\n<p>Activity write on Kotlin:</p>\n\n<pre><code>    class MyActivity : AppCompatActivity() {\n\n        @SuppressLint(\"NewApi\")\n        override fun onCreate(savedInstanceState: Bundle?) {\n           // some code here\n            verticalLayout {\n                webView {//replace this by custom webView (ObservableWebView)\n                    setOnLongClickListener(object : View.OnLongClickListener {\n                        override fun onLongClick(v: View): Boolean {\n                            return true\n                        }\n                    })\n                }\n            }\n       }\n    }\n</code></pre>\n\n<p>Also I has custom webView - ObservableWebView.java:</p>\n\n<pre><code>public class ObservableWebView extends WebView {\n // some code here\n}\n</code></pre>\n\n<p>I want to replace webView with my custom webView (<strong>ObservableWebView</strong>) in class <strong>MyActivity.kt</strong>. How I can do this?</p>\n"}, {"tags": ["java", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 3, "creation_date": 1500727785, "post_id": 45253857, "comment_id": 77473388, "body": "<code>BehaviorSubject</code> doesn&#39;t retain the last item after completion by design. You should use <code>ReplaySubject.createWithSize(1)</code> to have the altest always replayed, even beyond the upstream completing."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500801082, "post_id": 45253857, "comment_id": 77489911, "body": "Thanks @akarnokd. How if I just want the last item to be emitted, but not all?"}], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1500801251, "post_id": 45254703, "comment_id": 77489947, "body": "Yes, that explains why it no longer have the last item, because it is completed. But if I want to have the last item emitted still, is there a way?"}, {"owner": {"reputation": 2809, "user_id": 1327386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff09c58c3d0fa53283f7122799d615ba?s=128&d=identicon&r=PG", "display_name": "hgrey", "link": "https://stackoverflow.com/users/1327386/hgrey"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1500807707, "post_id": 45254703, "comment_id": 77491503, "body": "As @akarnokd explained you can use <code>ReplaySubject.createWithSize(1)</code> to always replay last item."}, {"owner": {"reputation": 2809, "user_id": 1327386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff09c58c3d0fa53283f7122799d615ba?s=128&d=identicon&r=PG", "display_name": "hgrey", "link": "https://stackoverflow.com/users/1327386/hgrey"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1500808539, "post_id": 45254703, "comment_id": 77491718, "body": "It works fine, just 3 is replayed. Can you paste your code?  Are you sure observable has terminated at time of subscription? the javadoc states the guarantee explicitly: &quot;When observers subscribe to a terminated <code>ReplaySubject</code>, they are guaranteed to see at most <code>size</code> <code>onNext</code> events followed by a termination event.&quot;"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1500812780, "post_id": 45254703, "comment_id": 77493023, "body": "I basically replace <code>val subject = ReplaySubject.create&lt;Int&gt;()</code> with <code>val subject = ReplaySubject.createWithSize&lt;Int&gt;(1)</code>, per my first sample code above."}, {"owner": {"reputation": 2809, "user_id": 1327386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff09c58c3d0fa53283f7122799d615ba?s=128&d=identicon&r=PG", "display_name": "hgrey", "link": "https://stackoverflow.com/users/1327386/hgrey"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1500814909, "post_id": 45254703, "comment_id": 77493674, "body": "Not sure what is happenning, which version of rx are you using? Anyway, you can guarantee single event but modifying the observable with <code>observable.takeLast(1).subscribe(subject)</code>, this will work regardless of the subscription state."}], "tags": [], "owner": {"reputation": 2809, "user_id": 1327386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff09c58c3d0fa53283f7122799d615ba?s=128&d=identicon&r=PG", "display_name": "hgrey", "link": "https://stackoverflow.com/users/1327386/hgrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1500888872, "last_edit_date": 1500888872, "creation_date": 1500727388, "answer_id": 45254703, "question_id": 45253857, "link": "https://stackoverflow.com/questions/45253857/rxjava-behaviorsubject-not-emitting-last-item/45254703#45254703", "title": "RxJava BehaviorSubject not emitting last item?", "body": "<p>It does not print anything because subsription has already terminated. If the subscription is still active then 3 will be printed, for example:</p>\n\n<pre><code>val o1: Observable&lt;Int&gt; = Observable.just(1, 2, 3)\nval o2: Observable&lt;Int&gt; = Observable.just(4).delay(100,TimeUnit.MILLISECONDS)\nval observable: Observable&lt;Int&gt; = Observable.concat(o1, o2)\nval subject = BehaviorSubject.create&lt;Int&gt;()\nobservable.subscribe(subject)\nsubject.subscribe{\n    result -&gt;\n    System.out.println(\"Start $result in Subscription Result\")\n}\nThread.sleep(1000)\n</code></pre>\n\n<p>Both 3 and 4 (after delay) will be printed, with 3 emitted as most recent event before the subscription and 4 is emitted after the subscription.</p>\n\n<p>Additionally as explained by @akarnokd in the comment section <code>ReplaySubject.createWithSize(1)</code> can be used to always replay last item even after observable completion and if single item is needed regardless of stream completion state then <code>observable.takeLast(1).subscribe(subject)</code> can be used to guarantee that:</p>\n\n<pre><code>val observable : Observable&lt;Int&gt; = Observable.just(1, 2, 3)\nval subject = ReplaySubject.createWithSize&lt;Int&gt;(1)\nobservable.takeLast(1).subscribe(subject) //can be moved after subject.subscribe as well\nsubject.subscribe{\n    result -&gt;\n    System.out.println(\"Start $result in Subscription Result\")\n}\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 0, "accepted_answer_id": 45254703, "answer_count": 1, "score": 3, "last_activity_date": 1500888872, "creation_date": 1500721800, "last_edit_date": 1500725192, "question_id": 45253857, "link": "https://stackoverflow.com/questions/45253857/rxjava-behaviorsubject-not-emitting-last-item", "title": "RxJava BehaviorSubject not emitting last item?", "body": "<p>I have a simple RxJava, using ReplaySubject, I could get the result, where all 3 numbers are printed.</p>\n\n<pre><code>    val observable : Observable&lt;Int&gt; = Observable.just(1, 2, 3)\n    val subject = ReplaySubject.create&lt;Int&gt;()\n    observable.subscribe(subject)\n    subject.subscribe{\n        result -&gt;\n        System.out.println(\"Start $result in Subscription Result\")\n    }\n</code></pre>\n\n<p>When I change to Behavior, I expect the third number i.e. 3 to be printed, as I always thought Behavior is to replay the last emitted item.</p>\n\n<pre><code>    val observable : Observable&lt;Int&gt; = Observable.just(1, 2, 3)\n    val subject = BehaviorSubject.create&lt;Int&gt;()\n    observable.subscribe(subject)\n    subject.subscribe{\n        result -&gt;\n        System.out.println(\"Start $result in Subscription Result\")\n    }\n</code></pre>\n\n<p>However it doesn't print anything. Why? </p>\n\n<p>Did I miss anything important here? If yes, let me know how to get the supposing emitted last item (i.e. 3) printed.</p>\n"}, {"tags": ["android", "animation", "kotlin", "android-animation", "android-constraintlayout"], "answers": [{"tags": [], "owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "is_accepted": false, "score": 14, "last_activity_date": 1500712886, "creation_date": 1500712886, "answer_id": 45252510, "question_id": 45250853, "link": "https://stackoverflow.com/questions/45250853/how-to-animate-constraintlayout-from-bottom-to-top-of-screen/45252510#45252510", "title": "How to animate ConstraintLayout from bottom to top of screen?", "body": "<p>Having this <code>xml</code> as content view:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/constraint_layout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/button\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginBottom=\"8dp\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginStart=\"8dp\"\n        android:layout_marginTop=\"8dp\"\n        android:text=\"Button\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHorizontal_bias=\"0.0\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintVertical_bias=\"0.0\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>And this in the activity:</p>\n\n<pre><code>class SecondActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.item)\n\n        val constraintLayout = findViewById(R.id.constraint_layout) as ConstraintLayout\n        val button = findViewById(R.id.button)\n\n        button.setOnClickListener {\n            val constraintSet = ConstraintSet()\n            constraintSet.clone(constraintLayout)\n            constraintSet.setVerticalBias(R.id.button, 1.0f)\n            constraintSet.setHorizontalBias(R.id.button, 1.0f)\n\n            val transition = AutoTransition()\n            transition.duration = 1500\n            transition.interpolator = AccelerateDecelerateInterpolator()\n\n            TransitionManager.beginDelayedTransition(constraintLayout, transition)\n            constraintSet.applyTo(constraintLayout)\n        }\n    }\n}\n</code></pre>\n\n<p>Will result in this output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7YZIF.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7YZIF.gif\" alt=\"enter image description here\"></a></p>\n\n<p>See <a href=\"https://robinhood.engineering/beautiful-animations-using-android-constraintlayout-eee5b72ecae3\" rel=\"noreferrer\">this article</a> and <a href=\"https://www.youtube.com/watch?v=Xx4aRI3oQbM\" rel=\"noreferrer\">this presentation</a> for more details.</p>\n"}], "owner": {"reputation": 1161, "user_id": 1172908, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/c7fbad3bedaa05bc36ca613de5b5406c?s=128&d=identicon&r=PG", "display_name": "Moo33", "link": "https://stackoverflow.com/users/1172908/moo33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6787, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1509349257, "creation_date": 1500699492, "last_edit_date": 1509349257, "question_id": 45250853, "link": "https://stackoverflow.com/questions/45250853/how-to-animate-constraintlayout-from-bottom-to-top-of-screen", "title": "How to animate ConstraintLayout from bottom to top of screen?", "body": "<p>I've been looking for the simplest way to animate an object with <code>ConstraintLayout</code> from point A to point B, with the ability to change its duration and acceleration speed. E.g., moving a layout/view from off screen bottom to it's intended position with constraints set on screen. I've not been able to find how to do it for objects with <code>ConstraintLayout</code>. Anyone can point me in the right direction? Thanks.</p>\n"}, {"tags": ["concurrency", "parallel-processing", "kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6513042"}, "edited": false, "score": 0, "creation_date": 1500696770, "post_id": 45250359, "comment_id": 77465882, "body": "okay. Thread sleep should be in the while clause. But why?"}, {"owner": {"reputation": 11598, "user_id": 869330, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34be19b80429871a85ea92656850bceb?s=128&d=identicon&r=PG&f=1", "display_name": "Naetmul", "link": "https://stackoverflow.com/users/869330/naetmul"}, "edited": false, "score": 0, "creation_date": 1500700220, "post_id": 45250359, "comment_id": 77466507, "body": "Thread creation in actual system takes some time."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1500734705, "post_id": 45250359, "comment_id": 77475293, "body": "I think I have already mentioned in your previous question. you must to unserstand what is &quot;<b>happens-before</b>&quot; <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\">here</a> &amp; <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.google.com.hk/#newwindow=1&amp;safe=strict&amp;q=site:https://docs.oracle.com/javase/tutorial+happens-before\" rel=\"nofollow noreferrer\">here</a> in thread first. in this case you also can using <code>CyclicBarrier(2)</code> to fetch the expected result. there is no need such a <code>Thread.sleep</code> in your case."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6513042"}, "edited": false, "score": 0, "creation_date": 1500746068, "post_id": 45251053, "comment_id": 77478555, "body": "With @Synchronized annotation the output is  0 0 1 1 2 3 2 ... is this correct too?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1500749915, "post_id": 45251053, "comment_id": 77479763, "body": "Kotlin&#39;s <code>@Synchronized</code> annotation is the same as having the <code>synchronized</code> keyword there in Java. This only prevents different threads entering a method of an object at the same time. This does nothing in this case, as your two threads are two different object instances. See <a href=\"https://stackoverflow.com/questions/6214229/question-about-java-synchronized\">here</a>."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 2, "last_activity_date": 1500701573, "creation_date": 1500701573, "answer_id": 45251053, "question_id": 45250359, "link": "https://stackoverflow.com/questions/45250359/threads-unexpectead-running-in-sequence/45251053#45251053", "title": "Threads unexpectead running in sequence", "body": "<p>Well, the output of this code can basically be any interleaved version of the two threads' numbers. They'll both individually print the numbers from 1 to 10 in sequence, but there is no guarantee for when this happens in relation to each other, since there's no synchronization between them, and without the delay inside the loop, they are both just trying to print the numbers as fast possible.</p>\n\n<p>These are all perfectly valid outcomes for this code:</p>\n\n<pre><code>T1    1   2   3\nT2      1   2   3\nout   1 1 2 2 3 3\n\nT1    1 2 3\nT2          1 2 3\nout   1 2 3 1 2 3\n\nT1          1 2 3\nT2    1 2 3\nout   1 2 3 1 2 3\n\nT1    1   2 3\nT2      1     2 3\nout   1 1 2 3 2 3\n</code></pre>\n\n<p>If you put the delay inside the loop, and it's long enough, you'll somewhat guarantee that you get a sequence like <code>1 1 2 2 3 3</code>, but the order in which the two copies of a number are printed between the threads is still up to how the threads happen to get scheduled in a particular run.</p>\n\n<pre><code>      &lt; ~100 ms &gt;\nT1   1           2           3\nT2    1           2           3\nout  11          22          33\n\nT1    1           2           3\nT2   1           2           3\nout  11          22          33\n\nT1    1          2            3\nT2   1            2          3\nout  11          22          33\n</code></pre>\n\n<p>Note that <code>Thread.sleep</code> itself <a href=\"https://stackoverflow.com/questions/18736681/how-accurate-is-thread-sleep\">isn't perfectly accurate</a> either, and using it for this purpose will just happen to work out most of the time if you put in a long enough delay here.</p>\n\n<p>If you want to write multithreaded code that runs predictably, look into different synchronization methods (<code>synchronized</code>, locks, semaphores, etc).</p>\n"}, {"tags": [], "owner": {"reputation": 14615, "user_id": 1770868, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/GfRgh.jpg?s=128&g=1", "display_name": "Ahmad Aghazadeh", "link": "https://stackoverflow.com/users/1770868/ahmad-aghazadeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1500721316, "creation_date": 1500721316, "answer_id": 45253777, "question_id": 45250359, "link": "https://stackoverflow.com/questions/45250359/threads-unexpectead-running-in-sequence/45253777#45253777", "title": "Threads unexpectead running in sequence", "body": "<p>Change to </p>\n\n<pre><code>class Runner: Thread() {\n    override fun run() {\n        var i = 0\n        while (i &lt; 10) {\n            println(\"${Thread.currentThread().name} $i\")\n            i++\n            try {\n                Thread.sleep(100)\n            } catch (e: Exception) {\n                e.printStackTrace()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Maybe it's close to you, but this result is not always there.</p>\n\n<blockquote>\n  <p>T1   1<br>\n    T2   1<br>\n    T1   2<br>\n    T2   2<br>\n    T1   3<br>\n    T2   3<br>\n    .\n    .\n    .</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6513042"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 45251053, "answer_count": 2, "score": 0, "last_activity_date": 1500721316, "creation_date": 1500694256, "question_id": 45250359, "link": "https://stackoverflow.com/questions/45250359/threads-unexpectead-running-in-sequence", "title": "Threads unexpectead running in sequence", "body": "<p>I expected to output be 0 0 1 1 2 2 ... but the output was 0 1 2 3 ... 0 1  2  3</p>\n\n<pre><code>class Runner: Thread() {\n    override fun run() {\n        var i = 0\n        while (i &lt; 10) {\n            println(\"${Thread.currentThread().name} $i\")\n            i++\n        }\n\n        try {\n            Thread.sleep(100)\n        } catch (e: Exception) {\n            e.printStackTrace()\n        }\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val nah = Runner()\n    val blah = Runner()\n\n    nah.start()\n    blah.start()\n}\n</code></pre>\n\n<p>What is incorrect? </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 1552262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bc32ea26511604508b168f2fba6a34?s=128&d=identicon&r=PG", "display_name": "lalosoft", "link": "https://stackoverflow.com/users/1552262/lalosoft"}, "edited": false, "score": 0, "creation_date": 1500690041, "post_id": 45249670, "comment_id": 77464871, "body": "<code>Unit</code> is the word to indicate that function returns a <code>void</code>. This answer should be marked as correct"}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 7, "last_activity_date": 1500686411, "last_edit_date": 1500686411, "creation_date": 1500686033, "answer_id": 45249670, "question_id": 45249649, "link": "https://stackoverflow.com/questions/45249649/how-to-let-a-kotlin-block-return-void/45249670#45249670", "title": "How to let a kotlin block return void?", "body": "<pre><code>fun search(key: String, callback: (novels: ResultInfo) -&gt; Unit): Unit { ... }\n</code></pre>\n\n<p>See <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html\" rel=\"noreferrer\">Unit</a></p>\n\n<p>I also declared the function to return effectively void</p>\n"}], "owner": {"reputation": 91, "user_id": 5619690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sA6X-sXLa5c/AAAAAAAAAAI/AAAAAAAAACQ/9CbLZK9875g/photo.jpg?sz=128", "display_name": "Hu Gforce", "link": "https://stackoverflow.com/users/5619690/hu-gforce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500686411, "creation_date": 1500685816, "question_id": 45249649, "link": "https://stackoverflow.com/questions/45249649/how-to-let-a-kotlin-block-return-void", "title": "How to let a kotlin block return void?", "body": "<p>like code below, when I use a block to callback,and I want to let the block return void, but I can not find a word to do this. </p>\n\n<p><code>fun search(key:String, callback: ((novels:ResultInfo)-&gt;??)){</code></p>\n"}, {"tags": ["java", "concurrency", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 3, "creation_date": 1500679078, "post_id": 45247999, "comment_id": 77462016, "body": "There&#39;s no reason to expect a particular execution order here."}, {"owner": {"reputation": 1366, "user_id": 1147141, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0869f216c4bae930c93e7b568984ed01?s=128&d=identicon&r=PG", "display_name": "efekctive", "link": "https://stackoverflow.com/users/1147141/efekctive"}, "edited": false, "score": 0, "creation_date": 1500679378, "post_id": 45247999, "comment_id": 77462092, "body": "It is the OS thread scheduler the one that rules here. It follows its own policies"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6513042"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1500680994, "post_id": 45247999, "comment_id": 77462456, "body": "@OliverCharlesworth and about the Synchronized annotation? In this example, there are two threads accessing the same object."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500685885, "post_id": 45247999, "comment_id": 77464222, "body": "you should understand what is happens-before first. If you change <code>await</code> to the last statement in the first thread .then you can always see the expected result <code>1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": true, "score": 2, "last_activity_date": 1500688087, "creation_date": 1500688087, "answer_id": 45249844, "question_id": 45247999, "link": "https://stackoverflow.com/questions/45247999/kotlin-synchronized/45249844#45249844", "title": "Kotlin Synchronized", "body": "<p>Both <code>nah</code> and <code>blah</code> set up jobs to be run on a different thread than their own.  So when they each call <code>start</code>, they are just flagging the thread scheduler to start them. <code>start</code> returns immediately and the current thread continues running the main line of code until something happens to make it defer.  At that point, the scheduler does it's thing, running anything that is ready and waiting to run.  You should not expect a particular order, nor should you try to predict an order.  That is why you have synchronization constructs to use in your code.</p>\n\n<p>You could run your tasks on a single threaded Executor like in <a href=\"https://stackoverflow.com/questions/32037844/how-to-execute-tasks-in-executorservice-sequentially\">this</a> SO answer (for java though, you would have to adapt).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6513042"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4842, "favorite_count": 1, "accepted_answer_id": 45249844, "answer_count": 1, "score": 1, "last_activity_date": 1500688087, "creation_date": 1500678947, "last_edit_date": 1500679144, "question_id": 45247999, "link": "https://stackoverflow.com/questions/45247999/kotlin-synchronized", "title": "Kotlin Synchronized", "body": "<p>I've been studying java multi-thread on the last weeks. I learned about synchronized, and understood that synchronized avoid various threads access the same propertie at same time. \nI wrote this code to run two threads at the same thread.</p>\n\n<pre><code>val gate = CyclicBarrier(3)\nval obj = SynchronizedCounter()\n\nvar nah = object : Thread() {\n    override fun run() {\n        gate.await()\n        obj.increment()\n    }\n}\n\nvar blah = object : Thread() {\n    override fun run() {\n        gate.await()\n        println(obj.value())\n    }\n}\n\nnah.start()\nblah.start()\n\ngate.await()\n\nclass SynchronizedCounter {\n    private var c = 0\n\n    @Synchronized\n    fun increment() {\n        c++\n    }\n\n    @Synchronized\n    fun decrement() {\n        c--\n    }\n\n    @Synchronized\n    fun value(): Int {\n        return c\n    }\n}\n</code></pre>\n\n<p>Output: 0\nWouldn't return 1? Because the second thread is run after the one</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 1, "last_activity_date": 1500709840, "creation_date": 1500709840, "answer_id": 45252099, "question_id": 45247705, "link": "https://stackoverflow.com/questions/45247705/tornadofx-itemviewmodel-updating-if-backing-object-that-do-not-expose-javafx-pro/45252099#45252099", "title": "TornadoFX ItemViewModel updating if backing object that do not expose JavaFX properties is changed", "body": "<p>When your backing object is not observable, calling <code>rollback()</code> is exactly the right thing to do. The semantics fit your use case perfectly, as rollback makes sure your <code>ViewModel</code> matches the values in the already assigned backing object.</p>\n\n<p>In your case, you know what's changed so if you want to keep the existing values as they are and only update the status you might as well be pragmatic about it:</p>\n\n<pre><code>model.status.value = model.item.status\n</code></pre>\n\n<p>Personally, I always use observable values when I can, they don't add much boilerplate with the new syntax, and they enable you to write your code in a much more declarative way. For completeness, this is how you'd declare the <code>status</code> as an observable property in <code>User</code>:</p>\n\n<pre><code>val statusProperty = SimpleBooleanProperty()\nvar status by statusProperty\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7495504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d79e5f2a1e0299d39595f9e86fa1c8d4?s=128&d=identicon&r=PG&f=1", "display_name": "skiey", "link": "https://stackoverflow.com/users/7495504/skiey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 45252099, "answer_count": 1, "score": 0, "last_activity_date": 1500765010, "creation_date": 1500676850, "last_edit_date": 1500765010, "question_id": 45247705, "link": "https://stackoverflow.com/questions/45247705/tornadofx-itemviewmodel-updating-if-backing-object-that-do-not-expose-javafx-pro", "title": "TornadoFX ItemViewModel updating if backing object that do not expose JavaFX properties is changed", "body": "<p>I have a following code</p>\n\n<pre><code>class MainView : View(\"Example\") {\n    val model: UserModel = UserModel()\n\n    init {\n        model.item = User(status = true)\n    }\n\n    override val root = vbox {\n        useMaxWidth = true\n        label(model.status)\n        button(\"Get new status\") {\n            action {\n                model.item.updateStatus()\n                println(\"Status in model: ${model.status.value}\")\n                println(\"Status in backing object: ${model.item.status}\")\n            }\n        }\n    }\n}\n\nclass User(var status: Boolean, val api: Api = Api()) {\n\n    fun updateStatus() {\n        status = api.getStatus()\n    }\n}\n\n\nclass UserModel : ItemViewModel&lt;User&gt;() {\n    val status = bind(User::status)\n}\n\n\nclass Api {\n    fun getStatus(): Boolean {\n        val list = listOf(true, false)\n        return list[(Math.random() * list.size).toInt()]\n    }\n}\n</code></pre>\n\n<p>After clicking the button the <code>model.itemProperty</code> changes but the <code>model.status</code> doesn't. Calling <code>model.rollback()</code> does the trick but I suppose it is not the proper way to get the <code>ItemViewModel</code> updated after backing property is changed. Is there any TornadoFX's way to update <code>UserModel</code> (and corresponding View as a result) without assigning a new <code>User</code> object to the <code>model.item</code>?  </p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "is_accepted": false, "score": 8, "last_activity_date": 1509307317, "last_edit_date": 1509307317, "creation_date": 1500677162, "answer_id": 45247763, "question_id": 45246268, "link": "https://stackoverflow.com/questions/45246268/do-kotlin-android-extensions-cache-the-synthetic-properties-or-each-time-it-call/45247763#45247763", "title": "Do Kotlin Android Extensions cache the synthetic properties or each time it calls findViewById()?", "body": "<p>In the current version (1.1.3), views are cached for Activities and Fragments layouts. For other kinds of containers like RecyclerView ViewHolders, there is no cache.</p>\n\n<p>Also, the cache is a <code>HashMap</code> with Integer boxing for keys. A <code>SparseArray</code> would have been better.</p>\n\n<p>Edit: Since version 1.1.4, views can be cached for other classes too, including <code>ViewHolder</code>, if you make them implement the <code>LayoutContainer</code> interface. You can also use the <code>@ContainerOptions</code> annotation to specify another cache implementation, including <code>SparseArray</code>. Both of these features are still experimental and need to be enabled manually in your <code>build.gradle</code> file:</p>\n\n<pre><code>androidExtensions {\n    experimental = true\n}\n</code></pre>\n\n<p><a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/android-extensions-entity-caching.md\" rel=\"nofollow noreferrer\">Read more</a> about it.</p>\n"}, {"comments": [{"owner": {"reputation": 10444, "user_id": 458668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3RGgN.jpg?s=128&g=1", "display_name": "WindRider", "link": "https://stackoverflow.com/users/458668/windrider"}, "edited": false, "score": 1, "creation_date": 1507556579, "post_id": 46646302, "comment_id": 80244947, "body": "Is the proposal fully implemented in 1.1.4?"}, {"owner": {"reputation": 10444, "user_id": 458668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3RGgN.jpg?s=128&g=1", "display_name": "WindRider", "link": "https://stackoverflow.com/users/458668/windrider"}, "edited": false, "score": 0, "creation_date": 1507580475, "post_id": 46646302, "comment_id": 80258049, "body": "I did but I wasn&#39;t completely sure."}, {"owner": {"reputation": 11742, "user_id": 5730321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/6yX7D.jpg?s=128&g=1", "display_name": "Leo Droidcoder", "link": "https://stackoverflow.com/users/5730321/leo-droidcoder"}, "edited": false, "score": 0, "creation_date": 1605317402, "post_id": 46646302, "comment_id": 114622195, "body": "Has anyone tried it? I am debugging it and see that findVidewById is still getting called. ViewHolder does implement LayoutContainer and I tried to access views either <code>itemView.myView</code> and <code>containerView.myView</code>"}, {"owner": {"reputation": 3044, "user_id": 926568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mOOGR.png?s=128&g=1", "display_name": "deviant", "link": "https://stackoverflow.com/users/926568/deviant"}, "edited": false, "score": 0, "creation_date": 1605425954, "post_id": 46646302, "comment_id": 114642370, "body": "try <code>viewHolder.childView</code>. btw these extensions are deprecated unfortunatelly :("}], "tags": [], "owner": {"reputation": 3044, "user_id": 926568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mOOGR.png?s=128&g=1", "display_name": "deviant", "link": "https://stackoverflow.com/users/926568/deviant"}, "is_accepted": true, "score": 6, "last_activity_date": 1601478577, "last_edit_date": 1601478577, "creation_date": 1507551571, "answer_id": 46646302, "question_id": 45246268, "link": "https://stackoverflow.com/questions/45246268/do-kotlin-android-extensions-cache-the-synthetic-properties-or-each-time-it-call/46646302#46646302", "title": "Do Kotlin Android Extensions cache the synthetic properties or each time it calls findViewById()?", "body": "<p>Since 1.1.4 views can be cached in any class.\nCaching in custom views enabled by default. For ViewHolders you need to implement <code>LayoutContainer</code> interface like this:</p>\n<pre><code>class MyViewHolder(override val containerView: View): LayoutContainer\n</code></pre>\n<p>See this doc for details\n<a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/android-extensions-entity-caching.md\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/KEEP/blob/master/proposals/android-extensions-entity-caching.md</a></p>\n<p>Update:\nTo be able to use <code>LayoutContainer</code> you should add this to the gradle script:</p>\n<pre><code>androidExtensions {\n    experimental = true\n}\n</code></pre>\n"}], "owner": {"reputation": 10444, "user_id": 458668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3RGgN.jpg?s=128&g=1", "display_name": "WindRider", "link": "https://stackoverflow.com/users/458668/windrider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1671, "favorite_count": 1, "accepted_answer_id": 46646302, "answer_count": 2, "score": 10, "last_activity_date": 1601478577, "creation_date": 1500669054, "question_id": 45246268, "link": "https://stackoverflow.com/questions/45246268/do-kotlin-android-extensions-cache-the-synthetic-properties-or-each-time-it-call", "title": "Do Kotlin Android Extensions cache the synthetic properties or each time it calls findViewById()?", "body": "<p>If I have a simple custom view:</p>\n\n<p>myitem.xml</p>\n\n<pre><code>&lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        &gt;\n\n        &lt;TextView\n        android:id=\"@+id/textview\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n         /&gt;\n&lt;FrameLayout/&gt;\n</code></pre>\n\n<p>Accessing a kotlinx syntentic property:</p>\n\n<pre><code>import kotlinx.android.synthetic.main.myitem.view.*\n\nview.toolbar.text = \"Some text\"\n</code></pre>\n\n<p>Internally it generates a call to <code>findByViewID()</code>. So my question is: </p>\n\n<p><strong>Is the result cached for custom views like for activities or each each time <code>findByViewID</code> is called?</strong> The answer is quite important for performance reasons.</p>\n"}, {"tags": ["arrays", "kotlin"], "comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 1, "creation_date": 1500660197, "post_id": 45244010, "comment_id": 77454072, "body": "<code>while( x &lt; abc)</code>"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 1, "creation_date": 1500661829, "post_id": 45244010, "comment_id": 77454994, "body": "also ...  var x = 0"}], "answers": [{"tags": [], "owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "is_accepted": false, "score": 1, "last_activity_date": 1500660282, "creation_date": 1500660282, "answer_id": 45244056, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop/45244056#45244056", "title": "Take input in array with loop", "body": "<p>You should change <code>x &lt;= abc</code> to <code>x &lt; abc</code> and <code>x = 1</code> to <code>x = 0</code>. It doesn't work now because if <code>abc = 5</code> and you loop 4 times then <code>x = 5</code> <em>but</em> arrays in Kotlin (and Java) start at index 0 which means that array of size 5 has the following indexes: <code>0, 1, 2, 3, 4</code> which means that <code>arrayint[5]</code> doesn't exist as <code>5</code> is out of bounds (<code>&gt; 4</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 4, "creation_date": 1500665423, "post_id": 45245293, "comment_id": 77456841, "body": "I also prefer to use <code>arrayint.forEach(::println)</code> to keep it on one line."}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 2, "last_activity_date": 1500664996, "creation_date": 1500664996, "answer_id": 45245293, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop/45245293#45245293", "title": "Take input in array with loop", "body": "<p>The following is a little more succinct</p>\n\n<pre><code>var arrayint = Array&lt;Int&gt;(5) { readLine()!!.toInt() }\nfor(x in arrayint)\n    println(x)\n</code></pre>\n\n<p>On the first line, instead of using the initializer lambda { 0 }, I use a lambda that call readLine.\nOn line 2, instead of having to know my range (0..4), I let the language do it for me (an Array is iterable).</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 11799182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sRGJjhyctGg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3zHUU2yts0gl3pZvwcAG561KWyQ/photo.jpg?sz=128", "display_name": "raju mistry", "link": "https://stackoverflow.com/users/11799182/raju-mistry"}, "is_accepted": true, "score": 1, "last_activity_date": 1563400415, "last_edit_date": 1563400415, "creation_date": 1563387912, "answer_id": 57082152, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop/57082152#57082152", "title": "Take input in array with loop", "body": "<p>Try this:</p>\n\n<pre><code>fun main (args:Array&lt;String&gt;){\n\n    var arrayint = Array&lt;Int&gt;(5){0}\n    var x:Int = 0\n    val abc:Int = arrayint.size\n    while( x &lt; abc)\n    {\n        arrayint[x] = readLine()!!.toInt()\n        x++\n    }\n\n    for(index in 0..4)\n    {\n        println(arrayint[index])\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11978144, "user_type": "registered", "profile_image": "https://graph.facebook.com/648596645630766/picture?type=large", "display_name": "Shoaib Khalid", "link": "https://stackoverflow.com/users/11978144/shoaib-khalid"}, "is_accepted": false, "score": 0, "last_activity_date": 1566817872, "last_edit_date": 1566817872, "creation_date": 1566817153, "answer_id": 57656593, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop/57656593#57656593", "title": "Take input in array with loop", "body": "<p>Following code is taking input in array using loop</p>\n\n<pre><code>import java.util.*\nfun main(args: Array&lt;String&gt;) {\n\n    var num = arrayOfNulls&lt;Int&gt;(5)\n    var read= Scanner(System.`in`)\n    println(\"Enter array values\")\n    for(i in 0..4)\n    {\n        num[i] = read.nextInt()\n    }\n    println(\"The array is\")\n\n    for(x in num){\n        println(x)}\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12010106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GPkE0.png?s=128&g=1", "display_name": "Arya", "link": "https://stackoverflow.com/users/12010106/arya"}, "is_accepted": false, "score": 0, "last_activity_date": 1610697728, "last_edit_date": 1610697728, "creation_date": 1610638777, "answer_id": 65722077, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop/65722077#65722077", "title": "Take input in array with loop", "body": "<p>Following code is taking input of array size and then it's elements</p>\n<pre><code>fun main() {\n\n    print(&quot;Enter Array size: &quot;)\n    val arraySize = readLine()!!.toInt()\n    println(&quot;Enter Array Elements&quot;)\n    val arr = Array&lt;Int&gt;(arraySize) { readLine()!!.toInt() }\n\n    for (x in arr)\n        println(x)\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 7901073, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/880953266ac071573ee2d63db1b8ade1?s=128&d=identicon&r=PG&f=1", "display_name": "Usman", "link": "https://stackoverflow.com/users/7901073/usman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3668, "favorite_count": 0, "accepted_answer_id": 57082152, "answer_count": 5, "score": 2, "last_activity_date": 1610697728, "creation_date": 1500660108, "question_id": 45244010, "link": "https://stackoverflow.com/questions/45244010/take-input-in-array-with-loop", "title": "Take input in array with loop", "body": "<p>developers, i am new in Kotlin I am trying to take input in Array by using loop and after that, i print the all values of array by using loop but t get only input and not show the other chunk and through the error which is shiwn on attach image</p>\n\n<p><a href=\"https://i.stack.imgur.com/5dLZT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5dLZT.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>    fun main(args: Array&lt;String&gt;) {\n\n    var arrayint = Array&lt;Int&gt;(5){0}\n    var x = 1\n        val abc:Int = arrayint.size\n     while( x &lt;= abc)\n     {\n         arrayint[x] = readLine()!!.toInt()\n            x++\n     }\n\n\n   for(index in 0..4)\n   {\n       println(arrayint[index])\n   }\n\n}\n</code></pre>\n"}, {"tags": ["variables", "lambda", "functional-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500660462, "post_id": 45244054, "comment_id": 77454202, "body": "thanks for your answer, sir. your answer is same with me, but why I wrong?"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500665569, "post_id": 45244054, "comment_id": 77456915, "body": "It would seem the compiler would know that &#39;a&#39; is unused until the lambda is called.  A better place for the error would be where the lambda is called (or passed to some function).  I understand closure might be an issue."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500667450, "post_id": 45244054, "comment_id": 77457790, "body": "@Les Hi. in fact, the compiler know the variable <code>a</code> whether is initialized because the compiler must make sure everything is initialized to supports null-safety in Kotlin. it must analyzing the code at the compile time from top to bottom. but why the code  <code>run{a=2}</code> , I can&#39;t understand it. Indeed, it should be works fine without any <code>catch-block</code> in my second question."}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 0, "creation_date": 1500672696, "post_id": 45244054, "comment_id": 77460168, "body": "@kiskae - the <code>run</code> function is not special, it will run the block and return, after which <code>a</code> will have been initialized.  It&#39;s an inline function, otherwise I would agree that it is too much for the compiler to have to figure out whether or not the function actually called the lambda or not."}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 2, "last_activity_date": 1500660278, "creation_date": 1500660278, "answer_id": 45244054, "question_id": 45243255, "link": "https://stackoverflow.com/questions/45243255/why-the-variable-cant-be-initialized-correctly-in-inline-function-as-in-java/45244054#45244054", "title": "Why the variable can&#39;t be initialized correctly in inline function as in java?", "body": "<blockquote>\n  <p>Q: But why the code below also can't be working?</p>\n</blockquote>\n\n<p>Because code can change. At the point where the lambda is defined the variable is not initialized so if the code is changed and the lambda is invoked directly afterwards it would be invalid. The kotlin compiler wants to make sure there is absolutely no way the uninitialized variable can be accessed before it is initialized, even by proxy.</p>\n\n<blockquote>\n  <p>Q: why does Kotlin inline functions can't works fine even if I initializing the variable in catch-block like as in java?</p>\n</blockquote>\n\n<p>Because <code>run</code> is not special and the compiler can't know when the body is executed. If you consider the possibility of <code>run</code> not being executed then the compiler cannot guarentee that the variable will be initialized.</p>\n\n<p>In the changed example it uses the try-catch expression to essentially execute <code>a = run { 2 }</code>, which is different from <code>run { a = 2 }</code> because a result is guaranteed by the return type.</p>\n\n<blockquote>\n  <p>Q: If the actual thing is that, why I doesn't call the run directly?</p>\n</blockquote>\n\n<p>That is essentially what happens. Regarding the final Java code the fact is that Java does not follow the exact same rules of Kotlin and the same happens in reverse. Just because something is possible in Java does not mean it will be valid Kotlin.</p>\n"}, {"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500667991, "post_id": 45245995, "comment_id": 77458024, "body": ":), Hi, it is not I want. you can see here that I talk with @hotkey as further, but my bad english will confused you.  If you can solve my confusing, I&#39;ll giving additional bounties. <a href=\"https://stackoverflow.com/questions/45238746/why-can-a-use-block-not-safely-initialize-a-var/45238793\" title=\"why can a use block not safely initialize a var\">stackoverflow.com/questions/45238746/&hellip;</a>"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500669319, "post_id": 45245995, "comment_id": 77458677, "body": "@holi-java, I understand.  But I add the answer because people like me with questions about lazy initialization will likely come to this page."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500669568, "post_id": 45245995, "comment_id": 77458775, "body": "I&#39;m sorry I confused you. but I&#39;ll thank you somewhere."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500671019, "post_id": 45245995, "comment_id": 77459431, "body": "yeah, the example above using <code>lazy</code>, but  compiler using <code>*Ref</code>. however your code can working, the byte code generated using <code>*Ref</code> can&#39;t. this is <b>why</b> I confused.  good catch, but still didn&#39;t answer my question since our question are the same, :)"}], "tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 1, "last_activity_date": 1500670177, "last_edit_date": 1500670177, "creation_date": 1500667860, "answer_id": 45245995, "question_id": 45243255, "link": "https://stackoverflow.com/questions/45243255/why-the-variable-cant-be-initialized-correctly-in-inline-function-as-in-java/45245995#45245995", "title": "Why the variable can&#39;t be initialized correctly in inline function as in java?", "body": "<p>You could make the variable lazy with the following...</p>\n\n<pre><code>val a: Int by lazy { 3 }\n</code></pre>\n\n<p>Obviously, you could use a function in place of the 3.  But this allows the compiler to continue and guarantees that <code>a</code> is initialized before use.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Though the question seems to be \"why can't it be done\".  I am in the same mind frame, that I don't see why not (within reason).  I think the compiler has enough information to figure out that a lambda declaration is not a reference to any of the closure variables.  So, I think it could show a different error when the lambda is used and the variables it references have not been initialized.</p>\n\n<p>That said, here is what I would do if the compiler writers were to disagree with my assessment (or take too long to get around to the feature).</p>\n\n<p>The following example shows a way to do a lazy local variable initialization (for version 1.1 and later)</p>\n\n<pre><code>import kotlin.reflect.*\n\n//...\nvar a:Int by object {\n    private var backing : Int? = null\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): Int =\n        backing ?: throw Exception(\"variable has not been initialized\") \n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: Int) {\n        backing = value\n    }\n}\nvar lambda = { a }\n\n// ...\na = 3\nprintln(\"a = ${lambda()}\")\n</code></pre>\n\n<p>I used an anonymous object to show the guts of what's going on (and because <code>lazy</code> caused a compiler error).  The object could be turned into function like <code>lazy</code>.</p>\n\n<p>Now we are potentially back to a runtime exception if the programmer forgets to initialize the variable before it is referenced.  But Kotlin did try at least to help us avoid that.</p>\n"}], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500893256, "creation_date": 1500657318, "last_edit_date": 1500893256, "question_id": 45243255, "link": "https://stackoverflow.com/questions/45243255/why-the-variable-cant-be-initialized-correctly-in-inline-function-as-in-java", "title": "Why the variable can&#39;t be initialized correctly in inline function as in java?", "body": "<p>We know the lambda body is <strong>lazily</strong> well, because if we don't call the lambda the code in the lambda body is never be called.</p>\n\n<p>We also know in any function language that a variable can be used in a function/lambda even if it is not initialized, such as javascript, ruby, groovy and .etc, for example, the groovy code below can works fine:</p>\n\n<pre><code>def foo\n\ndef lambda = { foo }\n\nfoo = \"bar\"\n\nprintln(lambda())\n//      ^--- return \"bar\"\n</code></pre>\n\n<p>We also know we can access an uninitialized variable if the catch-block has initialized the variable when an Exception is raised in try-block in Java, for example:</p>\n\n<pre><code>//  v--- m is not initialized yet\nint m;\n\ntry{ throw new RuntimeException(); } catch(Exception ex){ m = 2;}\n\nSystem.out.println(m);// println 2\n</code></pre>\n\n<p>If the lambda is lazily, why does Kotlin can't use an uninitialized variable in lambda? I know Kotlin is a null-safety language, so the compiler will analyzing the code from top to bottom include the lambda body to make sure the variable is initialized. so the lambda body is not \"lazily\" at compile-time. for example:</p>\n\n<pre><code>var a:Int\nval lambda = { a }// lambda is never be invoked\n//             ^--- a compile error thrown: variable is not initialized yet\na = 2\n</code></pre>\n\n<p><strong>Q</strong>: But why the code below also can't be working? I don't understand it, since the variable is <strong>effectively-final</strong> in Java, if you want to change the variable value you must using an <code>ObjectRef</code> instead, and this test contradicts my previous conclusions:\"lambda body is not lazily at compile-time\" .for example:</p>\n\n<pre><code>var a:Int\nrun{ a = 2 }// a is initialized &amp; inlined to callsite function\n\n//      v--- a compile error thrown: variable is not initialized yet\nprintln(a)\n</code></pre>\n\n<p>So I  only can think is that the compiler can't sure the <code>element</code> field in <code>ObjectRef</code> is whether initialized or not, but @hotkey has denied my thoughts. <strong>Why</strong>?</p>\n\n<p><strong>Q</strong>: why does Kotlin inline functions can't works fine even if I initializing the variable in catch-block like as in java? for example:</p>\n\n<pre><code>var a: Int\n\ntry {\n    run { a = 2 }\n} catch(ex: Throwable) {\n    a = 3\n}\n\n//      v--- Error: `a` is not initialized\nprintln(a)\n</code></pre>\n\n<p>But, @hotkey has already mentioned that you should using <code>try-catch</code> expression in Kotlin to initializing a variable in <a href=\"https://stackoverflow.com/a/45240753/7607923\">his answer</a>, for example:</p>\n\n<pre><code>var a: Int = try {\n    run { 2 }\n} catch(ex: Throwable) {\n    3\n}\n\n//      v--- println 2\nprintln(a);\n</code></pre>\n\n<p><strong>Q</strong>: If the actual thing is that, why I don't call the <code>run</code> directly? for example:</p>\n\n<pre><code>val a = run{2};\n\nprintln(a);//println 2\n</code></pre>\n\n<p>However the code above can works fine in java, for example:</p>\n\n<pre><code>int a;\ntry {\n    a = 2;\n} catch (Throwable ex) {\n    a = 3;\n}\n\nSystem.out.println(a); // println 2\n</code></pre>\n"}, {"tags": ["android", "retrofit", "kotlin"], "comments": [{"owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 0, "creation_date": 1500653561, "post_id": 45241994, "comment_id": 77450576, "body": "<code>OkHttp</code>&#39;s <code>RequestBody.contentLength()</code> just <a href=\"https://github.com/square/okhttp/blob/master/okhttp/src/main/java/okhttp3/RequestBody.java#L113\" rel=\"nofollow noreferrer\">forwards to file.length()</a> under the hood, so I&#39;m confused as to how this could happen."}, {"owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 0, "creation_date": 1500653800, "post_id": 45241994, "comment_id": 77450730, "body": "If you could add some more code (e.g. the part where you call the API to send the file size), it might help."}, {"owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "reply_to_user": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "edited": false, "score": 0, "creation_date": 1500654443, "post_id": 45241994, "comment_id": 77451065, "body": "@PixelElephant you are correct. The <code>ResponseBody</code> isn&#39;t the issue. It&#39;s adding it on elsewhere"}], "answers": [{"comments": [{"owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "edited": false, "score": 0, "creation_date": 1500881493, "post_id": 45243929, "comment_id": 77511698, "body": "Makes sense. Thanks for the detailed answer. Is there another way of sending a binary file with retrofit 2?"}], "tags": [], "owner": {"reputation": 17217, "user_id": 1240320, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/3ff7ec4e8d7aebe239763aa235cd6d14?s=128&d=identicon&r=PG", "display_name": "Pixel Elephant", "link": "https://stackoverflow.com/users/1240320/pixel-elephant"}, "is_accepted": true, "score": 0, "last_activity_date": 1500659804, "creation_date": 1500659804, "answer_id": 45243929, "question_id": 45241994, "link": "https://stackoverflow.com/questions/45241994/retrofit-2-requestbody-content-length-greater-than-file-size/45243929#45243929", "title": "Retrofit 2 RequestBody Content Length Greater Than File Size", "body": "<p>This seems to be a mistake on the part of the avatar upload API. The avatar is being uploaded as MultipartData and so will never equal the raw size of the file. This is because a multipart request will have additional data besides the file. </p>\n\n<p>Here is an example multipart request:</p>\n\n<pre><code>--------------------------0b880724ca8aacd6\nContent-Disposition: form-data; name=\"file1\"; filename=\"test.txt\"\nContent-Type: text/plain\n\ntest test test\n\n--------------------------0b880724ca8aacd6--\n</code></pre>\n\n<p>As you can see, the content of the file is just <code>test test test</code>. Everything else is additional data added by the multipart request. </p>\n\n<p>The raw size on disk is 15 bytes, while the Content-Length of the request is 202, due to all the extra data.</p>\n\n<p>So the avatar upload API should not just be checking the Content-Length of the entire request, but rather extracting the specific part relating to the file and just checking the size of the data contained in that part.</p>\n\n<p>If you have no control over the behaviour of the avatar upload API, then you can attempt to calculate the total Content-Length by figuring out the total size of the overhead added by the multipart request and adding that to your file size.</p>\n"}], "owner": {"reputation": 13997, "user_id": 507313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8b097f0a88ab346a912b74fda4c57cf?s=128&d=identicon&r=PG", "display_name": "StuStirling", "link": "https://stackoverflow.com/users/507313/stustirling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 1, "accepted_answer_id": 45243929, "answer_count": 1, "score": 0, "last_activity_date": 1500659804, "creation_date": 1500652600, "last_edit_date": 1500654414, "question_id": 45241994, "link": "https://stackoverflow.com/questions/45241994/retrofit-2-requestbody-content-length-greater-than-file-size", "title": "Retrofit 2 RequestBody Content Length Greater Than File Size", "body": "<p>I have an Api which requires me to send up the size of a file in bytes before I then send up the actual file. When I call <code>file.length()</code> on the file to send up in the first Api call, it returns <code>1996</code>. </p>\n\n<p>When I then package the file up into a <code>RequestBody</code> the <code>contentLength()</code> becomes <code>2556</code>. The server then rejects this, saying that these sizes must match.</p>\n\n<p>Here is the code for creating the <code>RequestBody</code>.</p>\n\n<pre><code>val requestBody = RequestBody.create(\n                        MediaType.parse(\"image/jpeg\"),\n                        avatarFile)\n</code></pre>\n\n<ul>\n<li>What is being added in the <code>RequestBody</code> to increase its content length? </li>\n<li>Should I just send up the size of the <code>RequestBody</code> on the first call to get around this problem?</li>\n</ul>\n\n<p><strong>EDIT</strong> </p>\n\n<p>Here is where I call the API the first time to send the size initially:</p>\n\n<pre><code>return authService.updateAvatar(\n                    AvatarMetadataRequest(\n                            size = avatarFile.length().toInt(),\n                            crc = profileImageProvider.getFile()!!.checksum()!!.toInt()))\n</code></pre>\n\n<p>And then this is where I call it the second time when the file actually gets uploaded:</p>\n\n<pre><code>        val avatarFile = profileImageProvider.getFile()\n\n        val requestBody = RequestBody.create(\n                MediaType.parse(\"image/jpeg\"),\n                avatarFile)\n        return authService.uploadAvatar(\n                id.split(\"/\").last(),\n                MultipartBody.Part.createFormData(\"avatar\",\n                        profileImageProvider.getFileName(),\n                        requestBody))\n</code></pre>\n\n<p>It turns out the <code>contentLength()</code> of the <code>requestBody</code> is correct. So the <code>Content-Length</code> must be being modified or increased when the <code>MultipartBody.Part.createFormData</code> is called.</p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "rx-java"], "comments": [{"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500653098, "post_id": 45241898, "comment_id": 77450311, "body": "The init hooks affect the first creation of the Schedulers class and thus can&#39;t be reset. You should override the dynamic <code>setComputationSchedulerHandler</code> and co instead."}, {"owner": {"reputation": 431, "user_id": 4094435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PShL-9bECo/AAAAAAAAAAI/AAAAAAAAAGA/g-KwnyZgik4/photo.jpg?sz=128", "display_name": "Tam&#225;s Kozm&#233;r", "link": "https://stackoverflow.com/users/4094435/tam%c3%a1s-kozm%c3%a9r"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500885812, "post_id": 45241898, "comment_id": 77514223, "body": "I tried to do that first, but that way I couldn&#39;t even run the tests separately. I got this error: <code>java.lang.NoClassDefFoundError: Could not initialize class io.reactivex.android.schedulers.AndroidSchedulers</code>"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500886095, "post_id": 45241898, "comment_id": 77514401, "body": "Yeah, AndroidSchedulers is a different animal. Keep that as <code>RxAndroidPlugins.setInitMainThreadSchedulerHandler</code> but have the rest as I suggested."}, {"owner": {"reputation": 431, "user_id": 4094435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PShL-9bECo/AAAAAAAAAAI/AAAAAAAAAGA/g-KwnyZgik4/photo.jpg?sz=128", "display_name": "Tam&#225;s Kozm&#233;r", "link": "https://stackoverflow.com/users/4094435/tam%c3%a1s-kozm%c3%a9r"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500886245, "post_id": 45241898, "comment_id": 77514493, "body": "Just tried it. It produces the same results, only the first test passes."}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500886383, "post_id": 45241898, "comment_id": 77514591, "body": "What is the error stacktrace, including the error type? (Your post cut out the exception type)"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500887294, "post_id": 45241898, "comment_id": 77515241, "body": "There could be something in <code>UserListPresenter</code> that doesn&#39;t get set up properly. Can you somehow share the code?"}, {"owner": {"reputation": 431, "user_id": 4094435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PShL-9bECo/AAAAAAAAAAI/AAAAAAAAAGA/g-KwnyZgik4/photo.jpg?sz=128", "display_name": "Tam&#225;s Kozm&#233;r", "link": "https://stackoverflow.com/users/4094435/tam%c3%a1s-kozm%c3%a9r"}, "reply_to_user": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500887850, "post_id": 45241898, "comment_id": 77515648, "body": "I added it to the post"}, {"owner": {"reputation": 64143, "user_id": 61158, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/db0a0198951e15aadcb42b40452c29f7?s=128&d=identicon&r=PG", "display_name": "akarnokd", "link": "https://stackoverflow.com/users/61158/akarnokd"}, "edited": false, "score": 0, "creation_date": 1500888833, "post_id": 45241898, "comment_id": 77516326, "body": "Nothing stands out beyond the showError and hideLoading being swapped in the code and in the unit test. I&#39;d start debugging by placing breakpoints on <code>emitter?.onError(Exception(error))</code> and following the emission. You can add <code>doOnEvent()</code> at various places to see where the code stops. Also you can try and call <code>triggerActions</code> again or replace it with <code>advanceTimeBy</code> just in case."}, {"owner": {"reputation": 156, "user_id": 4847691, "user_type": "registered", "profile_image": "https://graph.facebook.com/911808265546107/picture?type=large", "display_name": "Volodymyr Machekhin", "link": "https://stackoverflow.com/users/4847691/volodymyr-machekhin"}, "edited": false, "score": 0, "creation_date": 1512038940, "post_id": 45241898, "comment_id": 82100189, "body": "I faced the same issue, did you figure out so far?"}], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 4847691, "user_type": "registered", "profile_image": "https://graph.facebook.com/911808265546107/picture?type=large", "display_name": "Volodymyr Machekhin", "link": "https://stackoverflow.com/users/4847691/volodymyr-machekhin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512039749, "creation_date": 1512039749, "answer_id": 47571865, "question_id": 45241898, "link": "https://stackoverflow.com/questions/45241898/only-the-first-test-passes-with-testscheduler-when-running-multiple-tests-kotli/47571865#47571865", "title": "Only the first test passes with TestScheduler when running multiple tests (Kotlin)", "body": "<p>Just fixed same issue. You should define your schedulers ones and not specify them in the rule. RxAndroidPlugins will keep the first instance of TestScheduler after TestRule.apply will put another instance for a new test. </p>\n\n<p>Putting setting scheduler handlers in companion objects will help</p>\n\n<pre><code>companion object {\n\n    val testScheduler: TestScheduler\n\n    init {\n        testScheduler = TestScheduler()\n        RxAndroidPlugins.setInitMainThreadSchedulerHandler { _ -&gt; testScheduler }\n        RxJavaPlugins.setInitComputationSchedulerHandler { _ -&gt; testScheduler }\n        RxJavaPlugins.setInitIoSchedulerHandler { _ -&gt; testScheduler }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 431, "user_id": 4094435, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5PShL-9bECo/AAAAAAAAAAI/AAAAAAAAAGA/g-KwnyZgik4/photo.jpg?sz=128", "display_name": "Tam&#225;s Kozm&#233;r", "link": "https://stackoverflow.com/users/4094435/tam%c3%a1s-kozm%c3%a9r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 885, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1512046814, "creation_date": 1500652290, "last_edit_date": 1500887809, "question_id": 45241898, "link": "https://stackoverflow.com/questions/45241898/only-the-first-test-passes-with-testscheduler-when-running-multiple-tests-kotli", "title": "Only the first test passes with TestScheduler when running multiple tests (Kotlin)", "body": "<p>I am trying to test my presenter in an MVP architecture using RxJava in Kotlin. I have created a test rule to substitute the usual schedulers with a <code>TestScheduler</code> to be able to test asynchronous requests:</p>\n\n<pre><code>class TestSchedulerRule : TestRule {\n\n    val testScheduler = TestScheduler()\n\n    override fun apply(base: Statement, d: Description): Statement {\n        return object : Statement() {\n            @Throws(Throwable::class)\n            override fun evaluate() {\n                RxJavaPlugins.setInitIoSchedulerHandler { testScheduler }\n                RxJavaPlugins.setInitComputationSchedulerHandler { testScheduler }\n                RxJavaPlugins.setInitNewThreadSchedulerHandler { testScheduler }\n                RxJavaPlugins.setInitSingleSchedulerHandler { testScheduler }\n                RxAndroidPlugins.setInitMainThreadSchedulerHandler { testScheduler }\n\n                try {\n                    base.evaluate()\n                } finally {\n                    RxJavaPlugins.reset()\n                    RxAndroidPlugins.reset()\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is my test class. The problem is that every test is passing, if I run them separately, but if I run the whole suite, only the first one passes. There should be a problem with the <code>TestScheduler</code>, because if I use an immediate scheduler, it works.</p>\n\n<pre><code>class UserListPresenterTest {\n\n    @Rule @JvmField\n    val testSchedulerRule = TestSchedulerRule()\n\n    @Mock\n    lateinit var mockGetUsers: GetUsers\n\n    @Mock\n    lateinit var mockView: UserListView\n\n    lateinit var userListPresenter: UserListPresenter\n\n    @Before\n    fun setup() {\n        MockitoAnnotations.initMocks(this)\n        userListPresenter = UserListPresenter(mockGetUsers)\n    }\n\n    @Test\n    fun testGetUsers_errorCase_showError() {\n        // Given\n        val error = \"Test error\"\n        val single: Single&lt;List&lt;UserViewModel&gt;&gt; = Single.create {\n            emitter -&gt; emitter?.onError(Exception(error))\n        }\n\n        // When\n        `when`(mockGetUsers.execute(Mockito.anyInt(), Mockito.anyBoolean())).thenReturn(single)\n\n        userListPresenter.attachView(mockView)\n        userListPresenter.getUsers()\n\n        testSchedulerRule.testScheduler.triggerActions()\n\n        // Then\n        verify(mockView).hideLoading()\n        verify(mockView).showError()\n    }\n\n    @Test\n    fun testGetUsers_successCaseFirstPage_clearList() {\n        // Given\n        val users = listOf(UserViewModel(1, \"Name\", 1000, \"\"))\n        val single: Single&lt;List&lt;UserViewModel&gt;&gt; = Single.create {\n            emitter -&gt; emitter?.onSuccess(users)\n        }\n\n        // When\n        `when`(mockGetUsers.execute(Mockito.anyInt(), Mockito.anyBoolean())).thenReturn(single)\n\n        userListPresenter.attachView(mockView)\n        userListPresenter.getUsers()\n\n        testSchedulerRule.testScheduler.triggerActions()\n\n        // Then\n        verify(mockView).clearList()\n    }\n}\n</code></pre>\n\n<p>Here is the error I get in the console:</p>\n\n<pre><code>Wanted but not invoked:\nmockView.hideLoading();\n-&gt; at com.example.tamaskozmer.kotlinrxexample.UserListPresenterTest.testGetUsers_errorCase_showError(UserListPresenterTest.kt:57)\nActually, there were zero interactions with this mock.\n\n    at com.example.tamaskozmer.kotlinrxexample.UserListPresenterTest.testGetUsers_errorCase_showError(UserListPresenterTest.kt:57)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\n    at com.example.tamaskozmer.kotlinrxexample.TestSchedulerRule$apply$1.evaluate(TestSchedulerRule.kt:28)\n    at org.junit.rules.RunRules.evaluate(RunRules.java:20)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at com.intellij.rt.execution.application.AppMainV2.main(AppMainV2.java:131)\n</code></pre>\n\n<p>UserListPresenter class</p>\n\n<pre><code>class UserListPresenter(private val getUsers: GetUsers) : BasePresenter&lt;UserListView&gt;() {\n\n    private val offset = 5\n\n    private var page = 1\n    private var loading = false\n\n    fun getUsers(forced: Boolean = false) {\n        loading = true\n        if (forced) {\n            resetPaging()\n        }\n        getUsers.execute(page, forced)\n                .subscribeOn(Schedulers.newThread())\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribe({\n                    users -&gt;\n                    loading = false\n                    if (page == 1) {\n                        view?.clearList()\n                    }\n                    view?.addUsersToList(users)\n                    view?.hideLoading()\n                    page++\n                },\n                {\n                    loading = false\n                    view?.showError()\n                    view?.hideLoading()\n                })\n    }\n\n    private fun resetPaging() {\n        page = 1\n    }\n\n    fun onScrollChanged(lastVisibleItemPosition: Int, totalItemCount: Int) {\n        if (!loading) {\n            if (lastVisibleItemPosition &gt;= totalItemCount - offset) {\n                getUsers()\n            }\n        }\n\n        if (loading &amp;&amp; lastVisibleItemPosition &gt;= totalItemCount) {\n            view?.showLoading()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-4.4-kitkat", "fragmentmanager"], "comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 1, "creation_date": 1500893808, "post_id": 45241248, "comment_id": 77519683, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15207305/getting-the-error-java-lang-illegalstateexception-activity-has-been-destroyed\">Getting the error &quot;Java.lang.IllegalStateException Activity has been destroyed&quot; when using tabs with ViewPager</a>"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3753453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f81e1709019d1cd55bb1da51aaf582?s=128&d=identicon&r=PG&f=1", "display_name": "Ziiiimon", "link": "https://stackoverflow.com/users/3753453/ziiiimon"}, "is_accepted": true, "score": 1, "last_activity_date": 1500893938, "creation_date": 1500893938, "answer_id": 45278848, "question_id": 45241248, "link": "https://stackoverflow.com/questions/45241248/illegalstateexception-activity-has-been-destroyed-api-level-21/45278848#45278848", "title": "IllegalStateException: Activity has been destroyed (API level &lt;21)", "body": "<p>Found a solution here:\n<a href=\"https://stackoverflow.com/questions/15207305/getting-the-error-java-lang-illegalstateexception-activity-has-been-destroyed\">Getting the error &quot;Java.lang.IllegalStateException Activity has been destroyed&quot; when using tabs with ViewPager</a> Its a known bug in android.</p>\n\n<p>You have to override the onDetach() in the Fragments that use the <code>childFragmentManager</code> and set its reference to null.</p>\n\n<pre><code>override fun onDetach() {\n    super.onDetach()\n\n    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\n        try {\n            val childFragmentManager = Fragment::class.java!!.getDeclaredField(\"mChildFragmentManager\")\n            childFragmentManager.setAccessible(true)\n            childFragmentManager.set(this, null)\n\n        } catch (e: NoSuchFieldException) {\n            throw RuntimeException(e)\n        } catch (e: IllegalAccessException) {\n            throw RuntimeException(e)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 3753453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f81e1709019d1cd55bb1da51aaf582?s=128&d=identicon&r=PG&f=1", "display_name": "Ziiiimon", "link": "https://stackoverflow.com/users/3753453/ziiiimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 45278848, "answer_count": 1, "score": 3, "last_activity_date": 1500893938, "creation_date": 1500650312, "last_edit_date": 1500884724, "question_id": 45241248, "link": "https://stackoverflow.com/questions/45241248/illegalstateexception-activity-has-been-destroyed-api-level-21", "title": "IllegalStateException: Activity has been destroyed (API level &lt;21)", "body": "<p>I have a Single Activity App with a bottombar. Each tab of the bottombar is a fragment which acts as a container and presents several childfragments. \n<strong>Only on Android versions &lt;21</strong> the app crashes with the following stacktrace:</p>\n\n<pre><code>Process: de.name.dev, PID: 5262                                                                       \njava.lang.IllegalStateException: Activity has been destroyed                                                                           \n    at android.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1345)               \n    at android.app.BackStackRecord.commitInternal(BackStackRecord.java:597)           \n    at android.app.BackStackRecord.commit(BackStackRecord.java:575)        \n    at de.xxxxxx.more.MoreFragment.onViewCreated(MoreFragment.kt:30)                \n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:904)               \n    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)       \n    at android.app.BackStackRecord.run(BackStackRecord.java:684)      \n    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1447)           \n    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:443)      \n    at android.os.Handler.handleCallback(Handler.java:733)             \n    at android.os.Handler.dispatchMessage(Handler.java:95)                         \n    at android.os.Looper.loop(Looper.java:136)                         \n    at android.app.ActivityThread.main(ActivityThread.java:5017)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:515)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:779)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:595)\n    at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Our ContainerFragment looks like this:</p>\n\n<pre><code>class MoreFragment : KodeinFragment(), MoreOpenWebViewListener {\n\nprivate val settingsFragment by lazy {\n    SettingsFragment(this)\n}\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n}\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup, savedInstanceState: Bundle?): View {\n    return inflater.inflate(R.layout.fragment_more, container, false)\n}\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    childFragmentManager.beginTransaction()\n        .add(R.id.more_container, settingsFragment)\n        .commit()\n}\n\n...\n</code></pre>\n\n<p>In <code>onViewCreated</code> the container adds the fragment to show to its <code>childfragmentManager</code>.\nIf navigated between tabs the fragment will get destroyed and recreated.\nOn the 2nd time you come to the <code>.commit()</code> it crashes with above stacktrace. </p>\n\n<p>The <code>MoreFragment</code> is instantiated in another ContainerFragment which is the <code>TabBarFragment</code>:</p>\n\n<pre><code>class TabBarFragment : KodeinFragment() {\n\nprivate val sessionStore: SessionStore by instance()\n\nprivate val fragment1 by lazy { Fragment1() }\nprivate val moreFragment by lazy { MoreFragment() }\n\nprivate val fragment2 by lazy { fragment2.newFragment2(sessionStore.data) }\n\nvar currentTabFragment: Fragment? = null\n    private set\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    childFragmentManager\n        .beginTransaction()\n        .add(R.id.fragment_container, contractsFragment)\n        .commit()\n    bottomBar.selectTabAtPosition(0)\n    bottomBar.setOnTabSelectListener { tabId -&gt;\n        when (tabId) {\n            R.id.tab1 -&gt; replaceFragment(fragment1)\n            R.id.tab2 -&gt; replaceFragment(fragment2)\n            R.id.tab_settings -&gt; replaceFragment(moreFragment)\n        }\n    }\n    ViewCompat.setElevation(bottomBar, 8.0f * resources.displayMetrics.density)\n}\n\nprivate fun replaceFragment(fragment: Fragment) {\n    childFragmentManager.beginTransaction().replace(R.id.fragment_container, fragment).commit()\n    currentTabFragment = fragment\n}\n}\n</code></pre>\n\n<p>Any Idea whats happening?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 3403, "user_id": 766328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bfb353a72b42d878a3917316c31a68a3?s=128&d=identicon&r=PG", "display_name": "Trein", "link": "https://stackoverflow.com/users/766328/trein"}, "is_accepted": true, "score": 1, "last_activity_date": 1500820320, "creation_date": 1500820320, "answer_id": 45266221, "question_id": 45241125, "link": "https://stackoverflow.com/questions/45241125/wrapping-domain-classes-to-itemviewmodel/45266221#45266221", "title": "Wrapping domain classes to ItemViewModel", "body": "<p>Have you tried something like this?</p>\n\n<pre><code>class UserItemModel(uItem: UserItem) : ItemViewModel&lt;UserItem&gt;() {\n    // Same way you defined previously.\n}\n\nclass TradesViewModel {\n    val saleableItems: SimpleListProperty&lt;UserItemModel&gt;(FXCollections.observableArrayList())\n    val soldAwaitingItems: SimpleListProperty&lt;UserItemModel&gt;(FXCollections.observableArrayList())\n}\n\nclass TradesView : View(\"My View\") {\n    val tradesModel: TradesViewModel by inject()\n\n    init {\n        with(root) {\n            tableview(tradesModel.saleableItems) {\n                column(\"Name\", UserItemModel::simpleItem)\n                column(\"Price\", UserItemModel::price)\n                column(\"Lower limit\", UserItemModel::lowerLimit)\n                column(\"Upper limit\", UserItemModel::upperLimit)\n            }   \n        }\n    }\n}\n</code></pre>\n\n<p>Also, if your table is read-only, you might be able to define <code>UserItemModel</code> as a simple data class - no need for extending <code>ItemViewModel</code> or performing property bindings.</p>\n"}], "owner": {"reputation": 49, "user_id": 7495504, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d79e5f2a1e0299d39595f9e86fa1c8d4?s=128&d=identicon&r=PG&f=1", "display_name": "skiey", "link": "https://stackoverflow.com/users/7495504/skiey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 45266221, "answer_count": 1, "score": 1, "last_activity_date": 1578256266, "creation_date": 1500649960, "last_edit_date": 1578256266, "question_id": 45241125, "link": "https://stackoverflow.com/questions/45241125/wrapping-domain-classes-to-itemviewmodel", "title": "Wrapping domain classes to ItemViewModel", "body": "<p>I have a domain class</p>\n\n<pre><code>class UserItem(var simpleItem: Item, var id: String, var status: String, var price: Int) {\n    var upperLimit: Int = 0\n    var lowerLimit: Int = 0\n    /* methods here */\n}\n</code></pre>\n\n<p>and a class storing these objects</p>\n\n<pre><code>class Trades {\n    val saleableItems: ArrayList&lt;UserItem&gt; = ArrayList()\n    val soldAwaitingItems: ArrayList&lt;UserItem&gt; = ArrayList()\n\n    /* methods */\n}\n</code></pre>\n\n<p><code>saleableItems</code> and <code>soldAwaitingItems</code> are updated from within <code>Trades</code></p>\n\n<p>I want to display <code>saleableItems</code> using <code>TableView</code> so that I could bind data and View without converting properties to TornadoFX properties so I wrapped <code>UserItem</code> to <code>ItemViewModel</code></p>\n\n<pre><code>class UserItemModel(uItem: UserItem) : ItemViewModel&lt;UserItem&gt;() {\n    val simpleItem = bind { item?.observable(UserItem::simpleItem) }\n    val id = bind { item?.observable(UserItem::id) }\n    val status = bind { item?.observable(UserItem::status) }\n    val price = bind { item?.observable(UserItem::price) }\n    val upperLimit = bind { item?.observable(UserItem::upperLimit) }\n    val lowerLimit = bind { item?.observable(UserItem::lowerLimit) }\n\n    init {\n        item = uItem\n    }\n}\n</code></pre>\n\n<p>Is there any way to wrap <code>Trades</code> to <code>ItemViewModel&lt;Trades&gt;</code> so that I have something like</p>\n\n<pre><code>class TradesModel : ItemViewModel&lt;Trades&gt;() {\n    val saleableItems: ObservableList&lt;UserItemModel&gt;\n    val soldAwaitingItems: ObservableList&lt;UserItemModel&gt;\n}\n</code></pre>\n\n<p>and then use it in <code>View</code></p>\n\n<pre><code>class TradesView : View(\"My View\") {\nval tradesModel: TradesModel by inject()\n\n    tableview(tradesModel.saleableItems) {\n        column(\"Name\", UserItemModel::simpleItem)\n        column(\"Price\", UserItemModel::price)\n        column(\"Lower limit\", UserItemModel::lowerLimit)\n        column(\"Upper limit\", UserItemModel::upperLimit)\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin"], "comments": [{"owner": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1500647948, "post_id": 45240268, "comment_id": 77446887, "body": "Gut reaction is: every time you add a fragment, look for it in the fragment manager and remove it (with <code>FragmentTransaction.remove()</code>) if it&#39;s there. That way there&#39;s only ever one instance of a given fragment in your fragment manager and the newest ones are at the top."}, {"owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "reply_to_user": {"reputation": 44108, "user_id": 8298909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MRxNb.jpg?s=128&g=1", "display_name": "Ben P.", "link": "https://stackoverflow.com/users/8298909/ben-p"}, "edited": false, "score": 0, "creation_date": 1500648161, "post_id": 45240268, "comment_id": 77447029, "body": "@BenP. But how do I retrieve the actual transaction, not just the fragment?"}], "answers": [{"comments": [{"owner": {"reputation": 104, "user_id": 6881761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61cd47097c7610afcd5ad838a67b0ed4?s=128&d=identicon&r=PG&f=1", "display_name": "badrobot15", "link": "https://stackoverflow.com/users/6881761/badrobot15"}, "edited": false, "score": 0, "creation_date": 1535446780, "post_id": 45242551, "comment_id": 91057980, "body": "I&#39;ve got the same exact requirement as you have mentioned in the question. I&#39;m trying to implement your solution, however given that I am working in java and not kotlin, I&#39;m not able to implement the exact same logic you have used. Is it possible you could provide a java compatible solution too?"}], "tags": [], "owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "is_accepted": true, "score": 1, "last_activity_date": 1500654539, "creation_date": 1500654539, "answer_id": 45242551, "question_id": 45240268, "link": "https://stackoverflow.com/questions/45240268/how-to-remove-duplicate-entries-from-fragmentmanager/45242551#45242551", "title": "How to remove duplicate entries from FragmentManager?", "body": "<p>At this point I'm pretty sure it doesn't work with FragmentManager, so I created a class to implement a stack that doesn't allow duplicates:</p>\n\n<pre><code>class NoDuplicateStack&lt;T&gt; {\n\n    val stack: MutableList&lt;T&gt; = mutableListOf()\n    val size: Int\n        get() = stack.size\n\n    // Push element onto the stack\n    fun push(p: T) {\n        val index = stack.indexOf(p)\n        if (index != -1) {\n            stack.removeAt(index)\n        }\n        stack.add(p)\n    }\n\n    // Pop upper element of stack\n    fun pop(): T? {\n        if (size &gt; 0) {\n            return stack.removeAt(stack.size - 1)\n        } else {\n            return null\n        }\n    }\n\n    // Look at upper element of stack, don't pop it\n    fun peek(): T? {\n        if (size &gt; 0) {\n            return stack[stack.size - 1]\n        } else {\n            return null\n        }\n    }\n\n}\n</code></pre>\n\n<p>I then integrated this class into my activity:</p>\n\n<pre><code>class ActivityOverview : AppCompatActivity() {\n\n    val fragmentsStack = NoDuplicateStack&lt;String&gt;()\n    val fragmentHome = FragmentHome()\n    val fragmentSettings = FragmentSettings()\n    val fragmentHistory = FragmentHistory()\n\n    // Listener for BottomNavigationView\n    private val mOnNavigationItemSelectedListener = ...\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        ...\n    }\n\n    override fun onBackPressed() {\n        if (fragmentsStack.size &gt; 1) {\n            // Remove current fragment from stack\n            fragmentsStack.pop()\n            // Get previous fragment from stack and set it again\n            val newTag = fragmentsStack.pop()\n            if (newTag != null) {\n                setActiveFragment(newTag)\n            }\n        } else {\n            finish()\n        }\n    }\n\n    // Update displayed fragment\n    fun setActiveFragment(tag: String) {\n        val fragment = when (tag) {\n            resources.getString(R.string.tag_fragment_home) -&gt; fragmentHome\n            resources.getString(R.string.tag_fragment_settings) -&gt; fragmentSettings\n            resources.getString(R.string.tag_fragment_history) -&gt; fragmentHistory\n            else -&gt; null\n        }\n\n        if (fragment != null &amp;&amp; !fragment.isVisible) {\n            fragmentManager.beginTransaction()\n                    .replace(R.id.container_fragment, fragment, tag)\n                    .commit()\n            fragmentsStack.push(tag)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 1813971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0iiXu.jpg?s=128&g=1", "display_name": "Ninja420", "link": "https://stackoverflow.com/users/1813971/ninja420"}, "is_accepted": false, "score": 0, "last_activity_date": 1554987255, "creation_date": 1554987255, "answer_id": 55633017, "question_id": 45240268, "link": "https://stackoverflow.com/questions/45240268/how-to-remove-duplicate-entries-from-fragmentmanager/55633017#55633017", "title": "How to remove duplicate entries from FragmentManager?", "body": "<p>I also faced the same problem, I did this which uses the system stack</p>\n\n<pre><code>   val totalFragments = supportFragmentManager.backStackEntryCount\n\n            if (totalFragments != 0) {\n                val removed = supportFragmentManager.getBackStackEntryAt(totalFragments - 1)\n                poppedFragments.add(removed.name!!)\n\n                for (idx in totalFragments - 1  downTo 0) {\n                    val fragment = supportFragmentManager.getBackStackEntryAt(idx)\n                    if (!poppedFragments.contains(fragment.name)) {\n                        supportFragmentManager.popBackStack(fragment.name, 0)\n                        return\n                    }\n                }\n\n                finish()\n                return\n            }\n\n            super.onBackPressed()\n</code></pre>\n\n<p>and then added this while launching the fragment</p>\n\n<pre><code>    if (poppedFragments.contains(tag)) {\n            poppedFragments.remove(tag)\n        }\n</code></pre>\n"}], "owner": {"reputation": 1281, "user_id": 3617426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/K47GU.jpg?s=128&g=1", "display_name": "Lasse Meyer", "link": "https://stackoverflow.com/users/3617426/lasse-meyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "accepted_answer_id": 45242551, "answer_count": 2, "score": 1, "last_activity_date": 1554987255, "creation_date": 1500647394, "last_edit_date": 1500647835, "question_id": 45240268, "link": "https://stackoverflow.com/questions/45240268/how-to-remove-duplicate-entries-from-fragmentmanager", "title": "How to remove duplicate entries from FragmentManager?", "body": "<p>I have a simple activity with a <code>BottomNavigationView</code>. I'm using fragments to implement the contents of the activity for the different pages.</p>\n\n<p>When the user presses the back button, it's supposed to go back to the previously looked at page. The problem is, when you repeatedly switch back and forth between the pages (fragments), this entire history is recorded. Take this example:</p>\n\n<p>A -> B -> A -> B -> C -> A -> C</p>\n\n<p>Pressing the back button would result in the reverse, but instead I want this behaviour (I noticed it in the Instagram app):</p>\n\n<p>C -> A -> B -> Exit App</p>\n\n<p>So every fragment should only have one entry in the backstack. How do I do this? I do I remove the previous transactions for a fragment from the stack?</p>\n\n<p>Is this at all possible using a FragmentManager? Or do I have to implement my own?</p>\n\n<p>My Activity with the BottomNavigationView:</p>\n\n<pre><code>class ActivityOverview : AppCompatActivity() {\n\n    // Listener for BottomNavigationView\n    private val mOnNavigationItemSelectedListener = BottomNavigationView.OnNavigationItemSelectedListener { item -&gt;\n        when (item.itemId) {\n            R.id.navigation_home -&gt; {\n                // \"Home\" menu item pressed\n                setActiveFragment(resources.getString(R.string.tag_fragment_home))\n                return@OnNavigationItemSelectedListener true\n            }\n            R.id.navigation_dashboard -&gt; {\n                // \"Dashboard\" menu item pressed\n                return@OnNavigationItemSelectedListener true\n            }\n            R.id.navigation_settings -&gt; {\n                // \"Settings\" menu item pressed\n                setActiveFragment(resources.getString(R.string.tag_fragment_settings))\n                return@OnNavigationItemSelectedListener true\n            }\n        }\n        false\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_overview)\n\n        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n        navigation.menu.findItem(R.id.navigation_home).setChecked(true)\n        // Set initial fragment\n        setActiveFragment(resources.getString(R.string.tag_fragment_home))\n    }\n\n    override fun onBackPressed() {\n        // &gt; 1 so initial fragment addition isn't removed from stack\n        if (fragmentManager.backStackEntryCount &gt; 1) {\n            fragmentManager.popBackStack()\n        } else {\n            finish()\n        }\n    }\n\n    // Update displayed fragment\n    fun setActiveFragment(tag: String) {\n        val fragment = if (fragmentManager.findFragmentByTag(tag) != null) {\n            // Fragment is already initialized\n            if (fragmentManager.findFragmentByTag(tag).isVisible) {\n                // Fragment is visible already, don't add another transaction\n                null\n            } else {\n                // Fragment is not visible, add transaction\n                fragmentManager.findFragmentByTag(tag)\n            }\n        } else {\n            // Fragment is not initialized yet\n            when (tag) {\n                resources.getString(R.string.tag_fragment_home) -&gt; FragmentHome()\n                resources.getString(R.string.tag_fragment_settings) -&gt; FragmentSettings()\n                else -&gt; null\n            }\n        }\n\n        if (fragment != null) {\n            val transaction = fragmentManager.beginTransaction()\n            transaction.replace(R.id.container_fragment, fragment, tag)\n            transaction.addToBackStack(null)\n            transaction.commit()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "project-reactor", "spring-webflux"], "comments": [{"owner": {"reputation": 15, "user_id": 12895663, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bASRrqGE_eQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcqDP2-X5Jrhg-OBAbyAKLFeYNJVQ/photo.jpg?sz=128", "display_name": "onkar tyagi", "link": "https://stackoverflow.com/users/12895663/onkar-tyagi"}, "edited": false, "score": 1, "creation_date": 1589222903, "post_id": 45240005, "comment_id": 109202775, "body": "This post has the code (Java) to log request body - <a href=\"https://stackoverflow.com/questions/61706948/how-to-log-request-body-in-spring-webflux-java\" title=\"how to log request body in spring webflux java\">stackoverflow.com/questions/61706948/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 153752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7f9e75f274a5e719e386de42a98a43e?s=128&d=identicon&r=PG", "display_name": "Koguro", "link": "https://stackoverflow.com/users/153752/koguro"}, "edited": false, "score": 2, "creation_date": 1500903726, "post_id": 45280764, "comment_id": 77526823, "body": "Thank you for a detailed answer. Looks like such high-level filtering (and  logging) goes against core reactive ideology and I should consider moving logging to the business level (at least for responses)"}, {"owner": {"reputation": 882, "user_id": 279648, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/abcdeb5c850992aa617325feec34237e?s=128&d=identicon&r=PG", "display_name": "javabeats", "link": "https://stackoverflow.com/users/279648/javabeats"}, "edited": false, "score": 1, "creation_date": 1510156125, "post_id": 45280764, "comment_id": 81316993, "body": "@brian-clozel, what do you mean &quot;<code>flatMap</code> on the request&quot;? Can you elaborate?"}, {"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 0, "creation_date": 1514843581, "post_id": 45280764, "comment_id": 83079304, "body": "Can you elaborate on the <code>retain</code>/<code>release</code> model? I see it used in <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/core/codec/StringDecoder.java\" rel=\"nofollow noreferrer\">StringDecoder</a>, but don&#39;t quite understand. The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/buffer/PooledDataBuffer.html\" rel=\"nofollow noreferrer\">PooledDataBuffer</a> docs are useless in that regard."}, {"owner": {"reputation": 1172, "user_id": 2583044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e389ae8a908e2c80cca150bcbbf827ed?s=128&d=identicon&r=PG", "display_name": "62mkv", "link": "https://stackoverflow.com/users/2583044/62mkv"}, "edited": false, "score": 1, "creation_date": 1584615208, "post_id": 45280764, "comment_id": 107492933, "body": "concerning &quot;why would you want to do that&quot;: I have a use-case where we have to persist every &quot;message&quot; (requests/responses both downstream and upstream) for visibility purposes. I could accept Strings in my controller methods, and do the parsing myself, but that&#39;s .. mean? I could also serialize POJOs before persisting but that just wastes resources.. so I thought, may be there&#39;s a way to &quot;sneak in&quot; WebFlux/Netty pipeline so I could keep representation of a request body in memory while it&#39;s being processed, for persistence purposes. not sure why that would be worse than manual serialization."}], "tags": [], "owner": {"reputation": 46241, "user_id": 22982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d1d5b668ad4b1fccb1a80e6789d11b5?s=128&d=identicon&r=PG", "display_name": "Brian Clozel", "link": "https://stackoverflow.com/users/22982/brian-clozel"}, "is_accepted": true, "score": 15, "last_activity_date": 1500899611, "creation_date": 1500899611, "answer_id": 45280764, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/45280764#45280764", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>This is more or less similar to the situation in Spring MVC.</p>\n\n<p>In Spring MVC, you can use a <code>AbstractRequestLoggingFilter</code> filter and  <code>ContentCachingRequestWrapper</code> and/or <code>ContentCachingResponseWrapper</code>. Many tradeoffs here:</p>\n\n<ul>\n<li>if you'd like to access servlet request attributes, you need to actually read and parse the request body</li>\n<li>logging the request body means buffering the request body, which can use a significant amount of memory</li>\n<li>if you'd like to access the response body, you need to wrap the response and buffer the response body as it's being written, for later retrieval</li>\n</ul>\n\n<p><code>ContentCaching*Wrapper</code> classes don't exist in WebFlux but you could create similar ones. But keep in mind other points here:</p>\n\n<ul>\n<li>buffering data in memory somehow goes against the reactive stack, since we're trying there to be very efficient with the available resources</li>\n<li>you should not tamper with the actual flow of data and flush more/less often than expected, otherwise you'd risk breaking streaming uses cases</li>\n<li>at that level, you only have access to <code>DataBuffer</code> instances, which are (roughly) memory-efficient byte arrays. Those belong to buffer pools and are recycled for other exchanges. If those aren't properly retained/released, memory leaks are created (and buffering data for later consumption certainly fits that scenario)</li>\n<li>again at that level, it's only bytes and you don't have access to any codec to parse the HTTP body. I'd forget about buffering the content if it's not human-readable in the first place</li>\n</ul>\n\n<p>Other answers to your question:</p>\n\n<ul>\n<li>yes, the <code>WebFilter</code> is probably the best approach</li>\n<li>no, you shouldn't subscribe to the request body otherwise you'd consume data that the handler won't be able to read; you can <code>flatMap</code> on the request and buffer data in <code>doOn</code> operators</li>\n<li>wrapping the response should give you access to the response body as it's being written; don't forget about memory leaks, though</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 252905, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d54ce58ffa2d9f11ba304a356949dcab?s=128&d=identicon&r=PG", "display_name": "Kyprus", "link": "https://stackoverflow.com/users/252905/kyprus"}, "edited": false, "score": 0, "creation_date": 1522542463, "post_id": 45877770, "comment_id": 86194966, "body": "I get an http 100 status every time with this approach (because <code>response.statusCode</code> is null). So far I have not been able to figure out how to properly get the status code of the response in a <code>WebFilter</code>. Anyone know?"}, {"owner": {"reputation": 8756, "user_id": 3795036, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c01d5584e40e3d19507e9a5eaf0bae15?s=128&d=identicon&r=PG", "display_name": "K.Nicholas", "link": "https://stackoverflow.com/users/3795036/k-nicholas"}, "edited": false, "score": 1, "creation_date": 1609434355, "post_id": 45877770, "comment_id": 115844046, "body": "friggin &quot;var&quot; stuff."}], "tags": [], "owner": {"reputation": 7443, "user_id": 361832, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hb6yU.jpg?s=128&g=1", "display_name": "Dariusz Bacinski", "link": "https://stackoverflow.com/users/361832/dariusz-bacinski"}, "is_accepted": false, "score": 11, "last_activity_date": 1503651270, "creation_date": 1503651270, "answer_id": 45877770, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/45877770#45877770", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>I didn't find a good way to log request/response bodies, but if you are just interested in meta data then you can do it like follows.</p>\n\n<pre><code>import org.springframework.http.HttpHeaders\nimport org.springframework.http.HttpStatus\nimport org.springframework.http.server.reactive.ServerHttpResponse\nimport org.springframework.stereotype.Component\nimport org.springframework.web.server.ServerWebExchange\nimport org.springframework.web.server.WebFilter\nimport org.springframework.web.server.WebFilterChain\nimport reactor.core.publisher.Mono\n\n@Component\nclass LoggingFilter(val requestLogger: RequestLogger, val requestIdFactory: RequestIdFactory) : WebFilter {\n    val logger = logger()\n\n    override fun filter(exchange: ServerWebExchange, chain: WebFilterChain): Mono&lt;Void&gt; {\n        logger.info(requestLogger.getRequestMessage(exchange))\n        val filter = chain.filter(exchange)\n        exchange.response.beforeCommit {\n            logger.info(requestLogger.getResponseMessage(exchange))\n            Mono.empty()\n        }\n        return filter\n    }\n}\n\n@Component\nclass RequestLogger {\n\n    fun getRequestMessage(exchange: ServerWebExchange): String {\n        val request = exchange.request\n        val method = request.method\n        val path = request.uri.path\n        val acceptableMediaTypes = request.headers.accept\n        val contentType = request.headers.contentType\n        return \"&gt;&gt;&gt; $method $path ${HttpHeaders.ACCEPT}: $acceptableMediaTypes ${HttpHeaders.CONTENT_TYPE}: $contentType\"\n    }\n\n    fun getResponseMessage(exchange: ServerWebExchange): String {\n        val request = exchange.request\n        val response = exchange.response\n        val method = request.method\n        val path = request.uri.path\n        val statusCode = getStatus(response)\n        val contentType = response.headers.contentType\n        return \"&lt;&lt;&lt; $method $path HTTP${statusCode.value()} ${statusCode.reasonPhrase} ${HttpHeaders.CONTENT_TYPE}: $contentType\"\n    }\n\n    private fun getStatus(response: ServerHttpResponse): HttpStatus =\n        try {\n            response.statusCode\n        } catch (ex: Exception) {\n            HttpStatus.CONTINUE\n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "edited": false, "score": 5, "creation_date": 1514843020, "post_id": 47931511, "comment_id": 83079179, "body": "This is flies in the face of reactive programming, where you&#39;re buffering the whole content. Certainly not what Brian said."}, {"owner": {"reputation": 341, "user_id": 5600262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c2786ad3cba8dfc0ec63401a3cee3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Sylvester", "link": "https://stackoverflow.com/users/5600262/sylvester"}, "edited": false, "score": 0, "creation_date": 1570806077, "post_id": 47931511, "comment_id": 103042977, "body": "I found this example helpful. I could save the request JSON in a database using this mechanism to maintain an audit trail."}, {"owner": {"reputation": 805, "user_id": 2761431, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/92a8412ac8c2afc1bdb8b54da28656f2?s=128&d=identicon&r=PG&f=1", "display_name": "user2761431", "link": "https://stackoverflow.com/users/2761431/user2761431"}, "edited": false, "score": 0, "creation_date": 1576943292, "post_id": 47931511, "comment_id": 105059301, "body": "@Silvmike This worked only for POST requests where getBody() is being called. If I have to invoke the flushLog for GET requests what should be done? getBody() is not being called in that case."}, {"owner": {"reputation": 805, "user_id": 2761431, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/92a8412ac8c2afc1bdb8b54da28656f2?s=128&d=identicon&r=PG&f=1", "display_name": "user2761431", "link": "https://stackoverflow.com/users/2761431/user2761431"}, "edited": false, "score": 0, "creation_date": 1576944468, "post_id": 47931511, "comment_id": 105059572, "body": "I did a hack, I override the getMethodValue() and invoked flushLog if the request type is GET."}], "tags": [], "owner": {"reputation": 55, "user_id": 1837969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adecff5298a6d0614083559b3a59078f?s=128&d=identicon&r=PG", "display_name": "Silvmike", "link": "https://stackoverflow.com/users/1837969/silvmike"}, "is_accepted": false, "score": 3, "last_activity_date": 1513969049, "last_edit_date": 1513969049, "creation_date": 1513884269, "answer_id": 47931511, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/47931511#47931511", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>I am pretty new to Spring WebFlux, and I don't know how to do it in Kotlin, but should be the same as in Java using WebFilter:</p>\n\n<pre><code>public class PayloadLoggingWebFilter implements WebFilter {\n\n    public static final ByteArrayOutputStream EMPTY_BYTE_ARRAY_OUTPUT_STREAM = new ByteArrayOutputStream(0);\n\n    private final Logger logger;\n    private final boolean encodeBytes;\n\n    public PayloadLoggingWebFilter(Logger logger) {\n        this(logger, false);\n    }\n\n    public PayloadLoggingWebFilter(Logger logger, boolean encodeBytes) {\n        this.logger = logger;\n        this.encodeBytes = encodeBytes;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        if (logger.isInfoEnabled()) {\n            return chain.filter(decorate(exchange));\n        } else {\n            return chain.filter(exchange);\n        }\n    }\n\n    private ServerWebExchange decorate(ServerWebExchange exchange) {\n        final ServerHttpRequest decorated = new ServerHttpRequestDecorator(exchange.getRequest()) {\n\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n\n                if (logger.isDebugEnabled()) {\n                    final ByteArrayOutputStream baos = new ByteArrayOutputStream();\n                    return super.getBody().map(dataBuffer -&gt; {\n                        try {\n                            Channels.newChannel(baos).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        } catch (IOException e) {\n                            logger.error(\"Unable to log input request due to an error\", e);\n                        }\n                        return dataBuffer;\n                    }).doOnComplete(() -&gt; flushLog(baos));\n\n                } else {\n                    return super.getBody().doOnComplete(() -&gt; flushLog(EMPTY_BYTE_ARRAY_OUTPUT_STREAM));\n                }\n            }\n\n        };\n\n        return new ServerWebExchangeDecorator(exchange) {\n\n            @Override\n            public ServerHttpRequest getRequest() {\n                return decorated;\n            }\n\n            private void flushLog(ByteArrayOutputStream baos) {\n                ServerHttpRequest request = super.getRequest();\n                if (logger.isInfoEnabled()) {\n                    StringBuffer data = new StringBuffer();\n                    data.append('[').append(request.getMethodValue())\n                        .append(\"] '\").append(String.valueOf(request.getURI()))\n                        .append(\"' from \")\n                            .append(\n                                Optional.ofNullable(request.getRemoteAddress())\n                                            .map(addr -&gt; addr.getHostString())\n                                        .orElse(\"null\")\n                            );\n                    if (logger.isDebugEnabled()) {\n                        data.append(\" with payload [\\n\");\n                        if (encodeBytes) {\n                            data.append(new HexBinaryAdapter().marshal(baos.toByteArray()));\n                        } else {\n                            data.append(baos.toString());\n                        }\n                        data.append(\"\\n]\");\n                        logger.debug(data.toString());\n                    } else {\n                        logger.info(data.toString());\n                    }\n\n                }\n            }\n        };\n    }\n\n}\n</code></pre>\n\n<p>Here some tests on this: <a href=\"https://github.com/Silvmike/webflux-demo/blob/master/tests/src/test/java/ru/hardcoders/demo/webflux/web_handler/filters/TestLogging.java\" rel=\"nofollow noreferrer\">github</a></p>\n\n<p>I think this is what <strong>Brian Clozel</strong> (@brian-clozel) meant.</p>\n"}, {"comments": [{"owner": {"reputation": 4770, "user_id": 211794, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/aaad19c53c01e52ff968566808e2efa1?s=128&d=identicon&r=PG", "display_name": "Ashok Koyi", "link": "https://stackoverflow.com/users/211794/ashok-koyi"}, "edited": false, "score": 1, "creation_date": 1515062861, "post_id": 48053522, "comment_id": 83161631, "body": "Its for debugging during development. No one enables debugging in production. I have explained in details in my other post on why debugging is required <a href=\"https://stackoverflow.com/questions/47596571/readable-debug-logging-for-http-requests-with-spring-webclient?noredirect=1#comment82218651_47624492\" title=\"readable debug logging for http requests with spring webclient\">stackoverflow.com/questions/47596571/&hellip;</a>"}, {"owner": {"reputation": 415, "user_id": 1159668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad584c23e35b9b31f6169c66f9b06c8b?s=128&d=identicon&r=PG", "display_name": "tonio", "link": "https://stackoverflow.com/users/1159668/tonio"}, "edited": false, "score": 0, "creation_date": 1609187535, "post_id": 48053522, "comment_id": 115772589, "body": "Here an scenario I fill has nothing to do with debugging, suppose you have a retry policy configured to act when, lets say, HttpStatus 503/504 is returned, It seems to me that to be able to log this response is much more than simply debugging thing, it might give us useful information about the reason why this is happening in a given moment if API does so, so I hope I found a way to this in a reasonable not 500 code lines as I&#39;ve seen around after of a couple of days of looking for it,  really frustated with this basic thing."}], "tags": [], "owner": {"reputation": 15791, "user_id": 839733, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2s6lO.jpg?s=128&g=1", "display_name": "Abhijit Sarkar", "link": "https://stackoverflow.com/users/839733/abhijit-sarkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1514844412, "last_edit_date": 1514844412, "creation_date": 1514843444, "answer_id": 48053522, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/48053522#48053522", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>What Brian said. In addition, logging request/response bodies don't make sense for reactive streaming. If you imagine the data flowing through a pipe as a stream, you don't have the full content at any time <em>unless</em> you buffer it, which defeats the whole point. For small request/response, you can get away with buffering, but then why use the reactive model (other than to impress your coworkers :-) )?</p>\n\n<p>The only reason for logging request/response that I could conjure up is debugging, but with the reactive programming model, debugging method has to be modified too. Project Reactor doc has an excellent section on debugging that you can refer to: <a href=\"http://projectreactor.io/docs/core/snapshot/reference/#debugging\" rel=\"nofollow noreferrer\">http://projectreactor.io/docs/core/snapshot/reference/#debugging</a></p>\n"}, {"tags": [], "owner": {"reputation": 1157, "user_id": 2221087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/68e33f803d855c96231ec3335efbed19?s=128&d=identicon&r=PG", "display_name": "ROCKY", "link": "https://stackoverflow.com/users/2221087/rocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1519636433, "creation_date": 1519636433, "answer_id": 48984920, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/48984920#48984920", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>You can actually enable DEBUG logging for Netty and Reactor-Netty related to see full picture of what's happening. You could play with the below and see what you want and don't. That was the best I could.</p>\n\n<pre><code>reactor.ipc.netty.channel.ChannelOperationsHandler: DEBUG\nreactor.ipc.netty.http.server.HttpServer: DEBUG\nreactor.ipc.netty.http.client: DEBUG\nio.reactivex.netty.protocol.http.client: DEBUG\nio.netty.handler: DEBUG\nio.netty.handler.proxy.HttpProxyHandler: DEBUG\nio.netty.handler.proxy.ProxyHandler: DEBUG\norg.springframework.web.reactive.function.client: DEBUG\nreactor.ipc.netty.channel: DEBUG\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2128, "user_id": 5784273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PRUd.jpg?s=128&g=1", "display_name": "jihor", "link": "https://stackoverflow.com/users/5784273/jihor"}, "is_accepted": false, "score": 1, "last_activity_date": 1545921702, "creation_date": 1545921702, "answer_id": 53946782, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/53946782#53946782", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>Assuming we are dealing with a simple JSON or XML response, if <code>debug</code> level for corresponding loggers is not sufficient for some reason, one can use string representation before transforming it to object:</p>\n\n<pre><code>Mono&lt;Response&gt; mono = WebClient.create()\n                               .post()\n                               .body(Mono.just(request), Request.class)\n                               .retrieve()\n                               .bodyToMono(String.class)\n                               .doOnNext(this::sideEffectWithResponseAsString)\n                               .map(this::transformToResponse);\n</code></pre>\n\n<p>the following are the side-effect and transformation methods:</p>\n\n<pre><code>private void sideEffectWithResponseAsString(String response) { ... }\nprivate Response transformToResponse(String response) { /*use Jackson or JAXB*/ }    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1769, "user_id": 6532771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f103a1e5cc55f94078b7221aea26fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Lymar", "link": "https://stackoverflow.com/users/6532771/ivan-lymar"}, "is_accepted": false, "score": 5, "last_activity_date": 1591826943, "last_edit_date": 1591826943, "creation_date": 1591664721, "answer_id": 62273442, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/62273442#62273442", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>This is what I came up with for java.</p>\n\n<pre><code>public class RequestResponseLoggingFilter implements WebFilter {\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        ServerHttpRequest httpRequest = exchange.getRequest();\n        final String httpUrl = httpRequest.getURI().toString();\n\n        ServerHttpRequestDecorator loggingServerHttpRequestDecorator = new ServerHttpRequestDecorator(exchange.getRequest()) {\n            String requestBody = \"\";\n\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n                return super.getBody().doOnNext(dataBuffer -&gt; {\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        requestBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), \"UTF-8\");\n                        commonLogger.info(LogMessage.builder()\n                                .step(httpUrl)\n                                .message(\"log incoming http request\")\n                                .stringPayload(requestBody)\n                                .build());\n                    } catch (IOException e) {\n                        commonLogger.error(LogMessage.builder()\n                                .step(\"log incoming request for \" + httpUrl)\n                                .message(\"fail to log incoming http request\")\n                                .errorType(\"IO exception\")\n                                .stringPayload(requestBody)\n                                .build(), e);\n                    }\n                });\n            }\n        };\n\n        ServerHttpResponseDecorator loggingServerHttpResponseDecorator = new ServerHttpResponseDecorator(exchange.getResponse()) {\n            String responseBody = \"\";\n            @Override\n            public Mono&lt;Void&gt; writeWith(Publisher&lt;? extends DataBuffer&gt; body) {\n                Mono&lt;DataBuffer&gt; buffer = Mono.from(body);\n                return super.writeWith(buffer.doOnNext(dataBuffer -&gt; {\n                    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n                        Channels.newChannel(byteArrayOutputStream).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        responseBody = IOUtils.toString(byteArrayOutputStream.toByteArray(), \"UTF-8\");\n                        commonLogger.info(LogMessage.builder()\n                                .step(\"log outgoing response for \" + httpUrl)\n                                .message(\"incoming http request\")\n                                .stringPayload(responseBody)\n                                .build());\n                    } catch (Exception e) {\n                        commonLogger.error(LogMessage.builder()\n                                .step(\"log outgoing response for \" + httpUrl)\n                                .message(\"fail to log http response\")\n                                .errorType(\"IO exception\")\n                                .stringPayload(responseBody)\n                                .build(), e);\n                    }\n                }));\n            }\n        };\n        return chain.filter(exchange.mutate().request(loggingServerHttpRequestDecorator).response(loggingServerHttpResponseDecorator).build());\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1437, "user_id": 5370480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ikXWz.jpg?s=128&g=1", "display_name": "Dean Jain", "link": "https://stackoverflow.com/users/5370480/dean-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1591941366, "creation_date": 1591941366, "answer_id": 62338336, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/62338336#62338336", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>Here is the <a href=\"https://github.com/jeizas/webflux/tree/master/src/main/java/com/jeizas\" rel=\"nofollow noreferrer\">GitHub Repo</a> with <em>complete implementation</em> to <strong>log both request and response body along with http headers</strong> for webflux/java based application... </p>\n"}, {"tags": [], "owner": {"reputation": 488, "user_id": 4629427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/295f2a2f1e5200c30613a4feed89080e?s=128&d=identicon&r=PG&f=1", "display_name": "Rocky4Ever", "link": "https://stackoverflow.com/users/4629427/rocky4ever"}, "is_accepted": false, "score": 0, "last_activity_date": 1601946206, "creation_date": 1601946206, "answer_id": 64217998, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/64217998#64217998", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>If your using controller instead of handler best way is aop with annotating you controller class with @Log annotation.And FYI this takes plain json object as request not mono.</p>\n<pre><code>@Target(AnnotationTarget.FUNCTION)\n@Retention(AnnotationRetention.RUNTIME)\nannotation class Log\n\n@Aspect\n@Component\nclass LogAspect {\n    companion object {\n        val log = KLogging().logger\n    }\n\n    @Around(&quot;@annotation(Log)&quot;)\n    @Throws(Throwable::class)\n    fun logAround(joinPoint: ProceedingJoinPoint): Any? {\n        val start = System.currentTimeMillis()\n        val result = joinPoint.proceed()\n        return if (result is Mono&lt;*&gt;) result.doOnSuccess(getConsumer(joinPoint, start)) else result\n    }\n\n    fun getConsumer(joinPoint: ProceedingJoinPoint, start: Long): Consumer&lt;Any&gt;? {\n        return Consumer {\n            var response = &quot;&quot;\n            if (Objects.nonNull(it)) response = it.toString()\n            log.info(\n                &quot;Enter: {}.{}() with argument[s] = {}&quot;,\n                joinPoint.signature.declaringTypeName, joinPoint.signature.name,\n                joinPoint.args\n            )\n            log.info(\n                &quot;Exit: {}.{}() had arguments = {}, with result = {}, Execution time = {} ms&quot;,\n                joinPoint.signature.declaringTypeName, joinPoint.signature.name,\n                joinPoint.args[0],\n                response, System.currentTimeMillis() - start\n            )\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2842, "user_id": 1042273, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/jfTB7.jpg?s=128&g=1", "display_name": "Tarek", "link": "https://stackoverflow.com/users/1042273/tarek"}, "is_accepted": false, "score": 2, "last_activity_date": 1612409784, "creation_date": 1612409784, "answer_id": 66039023, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux/66039023#66039023", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>Since Spring Boot 2.2.x, Spring Webflux supports <a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html\" rel=\"nofollow noreferrer\">Kotlin coroutines</a>. With coroutines, you can have the advantages of non-blocking calls without having to handle Mono and Flux wrapped objects. It adds extensions to <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/main/kotlin/org/springframework/web/reactive/function/server/ServerRequestExtensions.kt\" rel=\"nofollow noreferrer\">ServerRequest</a> and <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/main/kotlin/org/springframework/web/reactive/function/server/ServerResponseExtensions.kt\" rel=\"nofollow noreferrer\">ServerResponse</a>, adding methods like <code>ServerRequest#awaitBody()</code> and <code>ServerResponse.BodyBuilder.bodyValueAndAwait(body: Any)</code>. So you could rewrite you code like this:</p>\n<pre><code>@Bean\nfun apiRouter() = coRouter {\n    (accept(MediaType.APPLICATION_JSON) and &quot;/api&quot;).nest {\n        &quot;/user&quot;.nest {\n            /* the handler methods now use ServerRequest and ServerResponse directly\n             you just need to add suspend before your function declaration:\n             suspend fun listUsers(ServerRequest req, ServerResponse res) */ \n            GET(&quot;/&quot;, userHandler::listUsers)\n            POST(&quot;/{userId}&quot;, userHandler::updateUser)\n        }\n    }\n\n    // this filter will be applied to all routes built by this coRouter\n    filter { request, next -&gt;\n      // using non-blocking request.awayBody&lt;T&gt;()\n      logger.info(&quot;Processing $request with body ${request.awaitBody&lt;String&gt;()}&quot;)\n        val res = next(request)\n        logger.info(&quot;Handling with Content-Type ${res.headers().contentType} and status code ${res.rawStatusCode()}&quot;)\n        res \n    }\n}\n</code></pre>\n<p>In order to create a WebFilter Bean with coRoutines, I think you can use this <a href=\"https://github.com/konrad-kaminski/spring-kotlin-coroutine/blob/master/spring-webflux-kotlin-coroutine/src/main/kotlin/org/springframework/web/server/CoroutineWebFilter.kt\" rel=\"nofollow noreferrer\">CoroutineWebFilter</a> interface (I haven't tested it, I don't know if it works).</p>\n"}], "owner": {"reputation": 487, "user_id": 153752, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7f9e75f274a5e719e386de42a98a43e?s=128&d=identicon&r=PG", "display_name": "Koguro", "link": "https://stackoverflow.com/users/153752/koguro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51868, "favorite_count": 13, "accepted_answer_id": 45280764, "answer_count": 10, "score": 35, "last_activity_date": 1612409784, "creation_date": 1500646653, "question_id": 45240005, "link": "https://stackoverflow.com/questions/45240005/how-to-log-request-and-response-bodies-in-spring-webflux", "title": "How to log request and response bodies in Spring WebFlux", "body": "<p>I want to have centralised logging for requests and responses in my REST API on Spring WebFlux with Kotlin. So far I've tried this approaches</p>\n\n<pre><code>@Bean\nfun apiRouter() = router {\n    (accept(MediaType.APPLICATION_JSON) and \"/api\").nest {\n        \"/user\".nest {\n            GET(\"/\", userHandler::listUsers)\n            POST(\"/{userId}\", userHandler::updateUser)\n        }\n    }\n}.filter { request, next -&gt;\n    logger.info { \"Processing request $request with body ${request.bodyToMono&lt;String&gt;()}\" }\n    next.handle(request).doOnSuccess { logger.info { \"Handling with response $it\" } }\n}\n</code></pre>\n\n<p>Here request method and path log successfully but the body is <code>Mono</code>, so how should I log it? Should it be the other way around and I have to subscribe on request body <code>Mono</code> and log it in the callback?\nAnother problem is that <code>ServerResponse</code> interface here doesn't have access to the response body. How can I get it here?</p>\n\n<hr>\n\n<p>Another approach I've tried is using <code>WebFilter</code></p>\n\n<pre><code>@Bean\nfun loggingFilter(): WebFilter =\n        WebFilter { exchange, chain -&gt;\n            val request = exchange.request\n            logger.info { \"Processing request method=${request.method} path=${request.path.pathWithinApplication()} params=[${request.queryParams}] body=[${request.body}]\"  }\n\n            val result = chain.filter(exchange)\n\n            logger.info { \"Handling with response ${exchange.response}\" }\n\n            return@WebFilter result\n        }\n</code></pre>\n\n<p>Same problem here: request body is <code>Flux</code> and no response body.</p>\n\n<p>Is there a way to access full request and response for logging from some filters? What don't I understand?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 3706, "user_id": 2018455, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e75a41fc224930ef1fa9ddcc9c714174?s=128&d=identicon&r=PG", "display_name": "Neil Locketz", "link": "https://stackoverflow.com/users/2018455/neil-locketz"}, "edited": false, "score": 4, "creation_date": 1500644413, "post_id": 45239128, "comment_id": 77444354, "body": "One difference is Unit is actually a value in Kotlin, whereas Java&#39;s void isn&#39;t actually a value (you can&#39;t get an instance of <code>void</code>; they had to make a <code>Void</code> class, so you could use <code>Void</code> in places that expected a value). Kotlin&#39;s unit only has one instance, and you can use it like any other piece of data."}, {"owner": {"reputation": 11627, "user_id": 2602791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db72b53576b82f4fa30f46bfc8438937?s=128&d=identicon&r=PG", "display_name": "BladeCoder", "link": "https://stackoverflow.com/users/2602791/bladecoder"}, "edited": false, "score": 1, "creation_date": 1500644909, "post_id": 45239128, "comment_id": 77444703, "body": "In Java you have the void keyword and the Void type, Unit replaces them both. It has a single instance value which is implied, while the Void type has no instance at all and forces you to write the null value. Unit makes it easier to write generic functions compared to Java."}], "owner": {"reputation": 1272, "user_id": 5879376, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qb7Rba0jBEs/AAAAAAAAAAI/AAAAAAAAAjk/3ccb5t5yDac/photo.jpg?sz=128", "display_name": "Rishabh Maurya", "link": "https://stackoverflow.com/users/5879376/rishabh-maurya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "closed_date": 1500644593, "answer_count": 0, "score": 2, "last_activity_date": 1500644207, "creation_date": 1500644207, "question_id": 45239128, "link": "https://stackoverflow.com/questions/45239128/is-there-any-difference-between-unit-in-kotlin-and-void-of-java", "closed_reason": "Duplicate", "title": "Is there any difference between Unit in Kotlin and void of Java?", "body": "<p>In the documentation of kotlin ,it is given that <code>Unit</code> type corresponds to <code>void</code> in Java . But Java documentation clearly mention void is a keyword . Going by the naming convention of keyword,<code>Unit</code> bears no resemblance to it at all. </p>\n\n<p>Is there any subtle difference between both of them ?</p>\n"}, {"tags": ["kotlin", "autocloseable"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1500652102, "post_id": 45238793, "comment_id": 77449608, "body": "Actually, <code>use</code> re-throws the exception it catches. If an exception is thrown inside the <code>use { ... }</code> block, it is thrown outside the <code>use</code> call, and the <code>println(myVar)</code> line is not reached at all. A <i>perfect compiler</i> would not prohibit this code because it would guess that <code>use</code> calls the block exactly once and rethrows the exception back into the calling code. :) The Kotlin compiler just does perform the <i>exactly-once</i> analysis for the lambdas."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500657068, "post_id": 45238793, "comment_id": 77452443, "body": "Oh, right, I didn&#39;t check that. Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": -1, "last_activity_date": 1500643677, "last_edit_date": 1500643677, "creation_date": 1500643324, "answer_id": 45238793, "question_id": 45238746, "link": "https://stackoverflow.com/questions/45238746/why-can-a-use-block-not-safely-initialize-a-var/45238793#45238793", "title": "Why can a use block not safely initialize a var?", "body": "<p>In case an exception occurs while executing <code>it.foo()</code>, the <code>use</code> block will catch the exception, close your <code>autoClosable</code>, and then return. In this case, <code>myVar</code> will be left uninitialized. </p>\n\n<p>This is why the compiler won't let you do what you're trying to do.</p>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651049, "post_id": 45240031, "comment_id": 77448912, "body": "The difference between <code>use</code> and <code>try</code> is that <code>try</code> is a language construct with a known semantics: it will execute the body, and if an exception is thrown, then it will execute the corresponding <code>catch</code> block. The compiler can thus prove that <code>myVar</code> is assigned by all means. And <code>use</code> is a completely different matter: it is just a library function, and it can manage the lambda it is passed in an arbitrary way (e.g. call it multiple times or never call it). Therefore the compiler cannot be sure that the code block is ever executed, and it conservatively prohibits possibly incorrect code."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651233, "post_id": 45240031, "comment_id": 77449033, "body": "well, but the code of the lambda body is inlined into call-site function, so it should be right. that I also have test it, nested <code>try-catch</code> also can working. but inline function can&#39;t. for example:  <code>try { try{ TODO() }catch(e:Throwable){throw e} } catch (e: Throwable) { myVar=autoClosable.foo() }</code>"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651353, "post_id": 45240031, "comment_id": 77449107, "body": "so why the inlined function can&#39;t working, the only thing I can think is compiler don&#39;t sure the <code>element</code> of the <code>ObjectRef</code> is initialized. and I describe it in answer at the middle. maybe you never see it."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651758, "post_id": 45240031, "comment_id": 77449374, "body": "Even though the lambda is inlined, the control flow is not currently analyzed in it. It&#39;s just not implemented, and the compiler just prohibits this code as if the lambda is not called. To make it work, the compiler should analyze either the inline function body to prove that it calls the lambda or the resulting bytecode. Neither is done at this moment."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651775, "post_id": 45240031, "comment_id": 77449384, "body": "Also, when a <code>var</code> is used only in inline lambdas, it is not wrapped into an <code>ObjectRef</code> at all."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500651893, "post_id": 45240031, "comment_id": 77449464, "body": "could you give some source code or some reference let me to see it? I know you have contributed Kotlin. but your answer don&#39;t persuade me at the first time."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1500652144, "post_id": 45240031, "comment_id": 77449637, "body": "Ok, sure, I&#39;ll do it a little bit later."}], "tags": [], "owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "is_accepted": false, "score": -1, "last_activity_date": 1500647927, "last_edit_date": 1500647927, "creation_date": 1500646729, "answer_id": 45240031, "question_id": 45238746, "link": "https://stackoverflow.com/questions/45238746/why-can-a-use-block-not-safely-initialize-a-var/45240031#45240031", "title": "Why can a use block not safely initialize a var?", "body": "<p>This is because <code>use</code> is an <strong>inline function</strong>, which means the lambda body will be inlined to the call-site function, and the actual type of the variable <code>myVar</code> depends on its context.</p>\n\n<p><strong>IF</strong> the <code>myVar</code> is used in lambda for reading, the the type is <code>MyType</code> or its supertype. for example:</p>\n\n<pre><code>//      v--- the actual type here is MyType\nvar myVar: MyType = TODO()\n\nautoClosable.use {\n    myVar.todo()\n}\n</code></pre>\n\n<p><strong>IF</strong> the <code>myVar</code> is used in lambda for writing, the actual type is an <code>ObjectRef</code>. why? this is because Java don't allow you change the variable out of the annoymous class scope. In fact, <code>myVar</code> is <strong>effectively-final</strong>. for example:</p>\n\n<pre><code>//  v--- the actual type here is an ObjectRef type.\nvar myVar: MyType\n\nautoClosable.use {\n    myVar = autoClosable.foo()\n}\n</code></pre>\n\n<p><strong>So</strong> when the compiler checking at <code>println(myVar)</code>, it can't sure the element of the <code>ObjectRef</code> is initialized or not. then a compiler error is raised.</p>\n\n<p><strong>IF</strong> you catch anything, the code also can't be compiled, for example:</p>\n\n<pre><code>//  v--- the actual type here is an ObjectRef type.\nvar myVar: MyType\ntry {\n    autoClosable.use {\n        myVar = it.foo()\n    }\n} catch(e: Throwable) {\n    myVar = MyType()\n}\n\n//       v--- Error: Variable 'myVar' must be initialized\nprintln(myVar) \n</code></pre>\n\n<p><strong>But</strong> when the actual type of the <code>myVar</code> is <code>MyType</code>, it works fine. for example:</p>\n\n<pre><code>var myVar: MyType\ntry {\n    TODO()\n} catch(e: Throwable) {\n    myVar = MyType()\n}\n\nprintln(myVar) // works fine\n</code></pre>\n\n<p><strong>Why</strong> kotlin didn't optimize inline functions to use <code>MyType</code> directly for writing? </p>\n\n<p>the only thing I think, the compiler don't know the <code>myVar</code> whether is used in lambda body of another uninline function in future. or kotlin want to keep semantic consistent for all of the functions.</p>\n"}, {"comments": [{"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500649266, "post_id": 45240753, "comment_id": 77447739, "body": "if it is lazy why this code can&#39;t working? <code>var myVar: MyType ;val b = { println(myVar) }; myVar = autoClosable.foo()</code>\uff0c Otherwise, there&#39;s my down-vote. :)"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500649573, "post_id": 45240753, "comment_id": 77447957, "body": "@holi-java, and why should it work? It&#39;s much easier for the compiler to prohibit <code>val b = { println(myVar) }</code> (which can be called <b>before</b> <code>myVar</code> is assigned -- <code>myVar</code> is unitialized up to the moment <code>b</code> is created) than to check that at each call site of <code>b</code> the <code>myVar</code> has already been initialized."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500649631, "post_id": 45240753, "comment_id": 77448002, "body": "@holi-java, if that&#39;s not what you were asking about, then I must have misunderstood you, could you please reformulate the question?"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500649680, "post_id": 45240753, "comment_id": 77448027, "body": "Hi, you ask me to post it as question?"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500649868, "post_id": 45240753, "comment_id": 77448134, "body": "but it should be initialized <code>myVar</code> with <code>ObjectRef</code> since as you said the lambda is lazily, the compiler can&#39;t be sure the lambda is invoked."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650073, "post_id": 45240753, "comment_id": 77448264, "body": "we know any language such as javascript, the function can access the variable out side of its scope, and can be initialized later. but in java if you want both to write the value out of the lambda scope &amp; read the value in lambda scope, we must using an <code>ObjectRef</code>. since the variable out of the lambda scope is <b>effective-final</b>. and I also can see the kotlin bytecode that the type  exactly  is a <code>ObjectRef</code>. why can&#39;t be compiled?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650125, "post_id": 45240753, "comment_id": 77448298, "body": "@holi-java, well, it&#39;s just how it works under the hood, but look at the semantics of the code. When you write <code>println(myVar)</code>, you expect the value of <code>MyType</code> to be printed, not the <code>ObjectRef</code> the compiler created to store that. Actually, the compiler makes everything to make a variable wrapped into an <code>ObjectRef</code> look like an ordinary <code>var</code>, the <code>ObjectRef</code> is never shown to the user (unless they look into the bytecode). So, by saying <i><code>myVar</code> stays uninitialized</i>, I mean, <i>either the local variable or the <code>ObjectRef</code> wrapper doesn&#39;t hold the value that should be assigned</i>."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650212, "post_id": 45240753, "comment_id": 77448369, "body": "Actually, in my answer I abstract away from the <code>ObjectRef</code>, which is completely an implementation detail and is not necessary to explain the code semantics -- we can just think of the <code>var</code> as a container for a variable, no matter if it is wrapped or not, the compiler makes sure we assign the value before using the <code>var</code>."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650534, "post_id": 45240753, "comment_id": 77448584, "body": "hi, the first time I also think it is lazily. but when I dump the code, I found I can&#39;t say it is lazily correctly.I think you should give the thoroughly answer. :)"}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650686, "post_id": 45240753, "comment_id": 77448679, "body": "invoke the lambda exactly <b>once</b>. so what&#39;s wrong of my answer, sir?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650766, "post_id": 45240753, "comment_id": 77448732, "body": "What do you mean by <b>lazy</b>? The actual reason for the restriction the OP faced is that the compiler does not prove that the lambda is ever called. Once the <i>exactly-once</i> check I mentioned is implemented in the compiler, the code in the question will be allowed."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500650846, "post_id": 45240753, "comment_id": 77448786, "body": "I&#39;m sorry I&#39;m not good at english. I said I also found the lambda is lazily, but when I dump the byte code, I found I can&#39;t say it is lazily correctly. since the byte code of the lambda body is analyzed by compiler. <b>lazy</b> I means the code in lambda body is never invoked, if the lambda is not called."}, {"owner": {"reputation": 25092, "user_id": 7607923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/amAyL.jpg?s=128&g=1", "display_name": "holi-java", "link": "https://stackoverflow.com/users/7607923/holi-java"}, "edited": false, "score": 0, "creation_date": 1500657456, "post_id": 45240753, "comment_id": 77452638, "body": "sir, due to my bad english, I have create it as a <a href=\"https://stackoverflow.com/questions/45243255/why-the-variable-cant-be-initialized-correctly-in-inline-function-as-in-java\">question</a>. I&#39;m glad you to go to help me solve my confusion. first, thanks."}, {"owner": {"reputation": 3030, "user_id": 443836, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6a1767f6664b99900d9f7d93be9a6dbe?s=128&d=identicon&r=PG", "display_name": "Marco Eckstein", "link": "https://stackoverflow.com/users/443836/marco-eckstein"}, "edited": false, "score": 0, "creation_date": 1501247096, "post_id": 45240753, "comment_id": 77709603, "body": "Regarding the original answer: Great! Writing it this way, you can even omit the explicit type declaration <code>MyType</code>. You might want to edit your answer."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1501247857, "last_edit_date": 1501247857, "creation_date": 1500648871, "answer_id": 45240753, "question_id": 45238746, "link": "https://stackoverflow.com/questions/45238746/why-can-a-use-block-not-safely-initialize-a-var/45240753#45240753", "title": "Why can a use block not safely initialize a var?", "body": "<p>Since <code>use { ... }</code> is not a language construct but <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\" rel=\"nofollow noreferrer\">is just a library function</a>, the compiler doesn't know (and, currently, does not make effort to prove) that the lambda you pass is <strong>ever executed</strong>. Therefore the usage of the variable that might not be initialized is prohibited.</p>\n\n<p>For example, compare your code to this function call. Without additional code analysis, they are identical for the compiler:</p>\n\n<pre><code>inline fun ignoreBlock(block: () -&gt; Unit) = Unit\n\nvar myVar: MyType\nignoreBlock { myVar = it.foo() }\nprintln(myVar) // Expectedly, `myVar` stays uninitialized, and the compiler prohibits it\n</code></pre>\n\n<p>To bypass this restriction, you can use the value returned from <code>use</code> (this is the value your block returns) to initialize your variable:</p>\n\n<pre><code>val myVar = autoClosable.use {\n    it.foo()\n}\n</code></pre>\n\n<p>And if you also want to handle the exception it might throw, then use <a href=\"https://kotlinlang.org/docs/reference/exceptions.html#try-is-an-expression\" rel=\"nofollow noreferrer\"><code>try</code> as an expression</a>: </p>\n\n<pre><code>val myVar = try {\n    autoClosable.use {\n        it.foo()\n    }\n} catch (e: SomeException) {\n    otherValue   \n}\n</code></pre>\n\n<p>Theoretically, inline functions can actually be checked to invoke a lambda exactly once, and if the Kotlin compiler could do that, it would allow your use case and some others. But this has not been implemented yet. </p>\n"}], "owner": {"reputation": 3030, "user_id": 443836, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6a1767f6664b99900d9f7d93be9a6dbe?s=128&d=identicon&r=PG", "display_name": "Marco Eckstein", "link": "https://stackoverflow.com/users/443836/marco-eckstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 1, "accepted_answer_id": 45240753, "answer_count": 3, "score": 4, "last_activity_date": 1501689627, "creation_date": 1500643170, "last_edit_date": 1501689627, "question_id": 45238746, "link": "https://stackoverflow.com/questions/45238746/why-can-a-use-block-not-safely-initialize-a-var", "title": "Why can a use block not safely initialize a var?", "body": "<p>Why does this give a compile error?</p>\n\n<pre><code>val autoClosable = MyAutoClosable()\nvar myVar: MyType\nautoClosable.use {\n    myVar= it.foo()\n}\nprintln(myVar) // Error: Variable 'myVar' must be initialized\n</code></pre>\n\n<p>Maybe the compiler just sees <code>{ myVar= it.foo() }</code> as a function that is passed to another function and has no knowledge about when or even if it will be executed?</p>\n\n<p>But since <code>use</code> is not just a function but Kotlin's replacement for Java's try-with-resource, some special knowledge about it would be appropriate, wouldn't it? Right now, I am forced to initialize <code>myVar</code> with some dummy value, which is not in the spirit of Kotlin at all.</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1500996521, "post_id": 45237452, "comment_id": 77577128, "body": "You compile <code>client</code> to <code>js</code> and <code>model</code> to <code>java</code>. And now you wan&#39;t to use classes from the <code>model</code> which are compiled to <code>.class</code>-files within your <code>client</code> code which is compiled to <code>.js</code>? Is this right? So you basically want to use the code from <code>model</code> in <code>client</code> is this correct?"}, {"owner": {"reputation": 131, "user_id": 8069946, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BG-5msBKRcg/AAAAAAAAAAI/AAAAAAAAAEM/JxvbupWq5BQ/photo.jpg?sz=128", "display_name": "Vladislav Chernogorov", "link": "https://stackoverflow.com/users/8069946/vladislav-chernogorov"}, "reply_to_user": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "edited": false, "score": 0, "creation_date": 1501002139, "post_id": 45237452, "comment_id": 77581118, "body": "Yes, it is correct."}], "answers": [{"tags": [], "owner": {"reputation": 966, "user_id": 4978865, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-75z0lafdAEk/AAAAAAAAAAI/AAAAAAAAABQ/LjBjsQQLGnM/photo.jpg?sz=128", "display_name": "Praytic", "link": "https://stackoverflow.com/users/4978865/praytic"}, "is_accepted": true, "score": 1, "last_activity_date": 1526799923, "creation_date": 1526799923, "answer_id": 50432483, "question_id": 45237452, "link": "https://stackoverflow.com/questions/45237452/how-to-compile-kotlin-domain-module-with-client-module-with-gradle/50432483#50432483", "title": "How to compile Kotlin domain module with client module with Gradle?", "body": "<p>I have developed the following architecture for my application:\nI have <code>client</code>,<code>server</code> and <code>model</code> modules but also I have a separate source directory with DTOs called <code>dto</code> (not module btw). Here's the dependency hierarchy for the build:</p>\n\n<ul>\n<li><code>client</code> depends on <code>dto</code></li>\n<li><code>server</code> depends on <code>model</code></li>\n<li><code>model</code> depends on <code>dto</code></li>\n</ul>\n\n<p>With such hierarchy model can still use <code>stdlib</code> functionality and <code>server</code> will share all DTOs with <code>client</code> module. Meanwhile <code>dto</code> module will use the <code>stdlib</code> if it's compiled as <code>module</code> dependency and <code>stdlib-js</code> if it's compiled as <code>client</code> dependency, so it important to remember which classes you are able to use there.</p>\n\n<p>In order to achieve this, you need to add </p>\n\n<pre><code>sourceSets.main.kotlin.srcDirs += '../dto/src/main/kotlin\n</code></pre>\n\n<p>config to both <code>client</code> and <code>model</code> build.gradle files. For Gradle Kotlin DSL:</p>\n\n<pre><code>the&lt;JavaPluginConvention&gt;().sourceSets {\n    \"main\" {\n        java {\n            srcDirs(\"../dto/src/main/kotlin\")\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8069946, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BG-5msBKRcg/AAAAAAAAAAI/AAAAAAAAAEM/JxvbupWq5BQ/photo.jpg?sz=128", "display_name": "Vladislav Chernogorov", "link": "https://stackoverflow.com/users/8069946/vladislav-chernogorov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 50432483, "answer_count": 1, "score": 3, "last_activity_date": 1526799923, "creation_date": 1500639330, "last_edit_date": 1500996431, "question_id": 45237452, "link": "https://stackoverflow.com/questions/45237452/how-to-compile-kotlin-domain-module-with-client-module-with-gradle", "title": "How to compile Kotlin domain module with client module with Gradle?", "body": "<p>I have the following project structure:<br>\n - <code>parent</code><br>\n - - <code>client</code> (written in Kotlin but compiled to JS)<br>\n - - <code>server</code> (written in Kotlin)<br>\n - - <code>model</code> (written in Kotlin)<br>\n<code>client</code> module has a dependency on <code>model</code>. So when I compile <code>client</code> to JS it also should compile <code>model</code> with it. For now I have the following Gradle configurations which are not doing the desired thing:  </p>\n\n<p><strong>project/parent.gradle</strong></p>\n\n<pre><code>group 'com.vchernogorov.tycher'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.1.3-2'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n    compile project(\":model\")\n    compile project(\":client\")\n    compile project(\":server\")\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p><strong>project/settings.gradle</strong></p>\n\n<pre><code>rootProject.name = 'parent'\ninclude ':model'\ninclude ':server'\ninclude ':client'\n</code></pre>\n\n<p><strong>project/model/build.gradle</strong></p>\n\n<pre><code>group 'com.vchernogorov.tycher'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.1.3-2'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version\"\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p><strong>project/client/build.gradle</strong></p>\n\n<pre><code>group 'com.vchernogorov.tycher'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.1.3-2'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin2js'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version\"\n    compile project(\":model\")\n}\n\nbuild.doLast {\n    configurations.compile.each { File file -&gt;\n        copy {\n            includeEmptyDirs = false\n\n            from zipTree(file.absolutePath)\n            into \"${projectDir}/web\"\n            include { fileTreeElement -&gt;\n                def path = fileTreeElement.path\n                path.endsWith(\".js\") &amp;&amp; (path.startsWith(\"META-INF/resources/\") || !path.startsWith(\"META-INF/\"))\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When I run <code>gradle build</code> command on <code>client</code> I get this message:  </p>\n\n<pre><code>:model:compileKotlin\nUsing kotlin incremental compilation\n:model:compileJava UP-TO-DATE\n:model:copyMainKotlinClasses\n:model:processResources UP-TO-DATE\n:model:classes UP-TO-DATE\n:model:jar\n:client:compileJava UP-TO-DATE\n:client:compileKotlin2Js\ne: project/client/src/main/kotlin/HelloWorld.kt: (30, 19): Unresolved reference: Position\ne: project/client/src/main/kotlin/HelloWorld.kt: (50, 5): Unresolved reference: Test\ne: project/client/src/main/kotlin/SocketHandler.kt: (10, 36): Unresolved reference: User\n:client:compileKotlin2Js FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':client:compileKotlin2Js'.\n&gt; Compilation error. See log for more details\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 13.891 secs\n</code></pre>\n\n<p>These 3 classes are defined in <code>model</code>.<br>\nSo what should I do to successfully compile <code>client</code> and not changing the code?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "rx-kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1500629664, "post_id": 45234134, "comment_id": 77433937, "body": "You&#39;d be ill-advised to do this in any language that uses a binary floating point type. Use an integral type and divide by 4 at the point of use."}, {"owner": {"reputation": 1595, "user_id": 6638533, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy9JV.jpg?s=128&g=1", "display_name": "samAlvin", "link": "https://stackoverflow.com/users/6638533/samalvin"}, "edited": false, "score": 0, "creation_date": 1500629896, "post_id": 45234134, "comment_id": 77434108, "body": "I don&#39;t think you can make it in kotlin&#39;s <code>for loop</code>, since the docs says &quot;for iterates through anything that provides an iterator&quot;: <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#for-loops\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/control-flow.html#for-loops</a> ... Use kotlin&#39;s <code>while</code> instead"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1500630180, "post_id": 45234134, "comment_id": 77434346, "body": "@Bathsheba: 0.25 works well in binary, though. I&#39;d still avoid floats in loop variables, because adding 0.25 may be a no-op if the base number is huge, and then you end up with an infinite loop. That cannot happen with integers (an integer counting loop will always terminate, even though it can take a very long time if you wrap around at the end)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1500630250, "post_id": 45234134, "comment_id": 77434399, "body": "Indeed 0.25 is a dyadic rational, so adding this particular constant successively from 0 will work well. A comment in the source code on the lines of &quot;I know what I&#39;m doing&quot; wouldn&#39;t go amiss."}], "answers": [{"tags": [], "owner": {"reputation": 55159, "user_id": 614807, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6b1f008009ba21a4675bc5e40cd3326d?s=128&d=identicon&r=PG", "display_name": "Chirag", "link": "https://stackoverflow.com/users/614807/chirag"}, "is_accepted": false, "score": 2, "last_activity_date": 1500632567, "last_edit_date": 1500632567, "creation_date": 1500629787, "answer_id": 45234228, "question_id": 45234134, "link": "https://stackoverflow.com/questions/45234134/how-do-i-make-a-loop-like-mentioned-below-in-kotlin-programming-language/45234228#45234228", "title": "How do i make a loop like mentioned below in kotlin programming language?", "body": "<p>Here is the kotlin code equivalent to for loop.</p>\n\n<pre><code>var i = 0.0\nwhile (i &lt; 10.0)\n{\n  println(\"value is:\" + i)\n  i += 1.0\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 6018922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64514f2111c758325aac19cd177385da?s=128&d=identicon&r=PG&f=1", "display_name": "aygavras", "link": "https://stackoverflow.com/users/6018922/aygavras"}, "is_accepted": false, "score": 3, "last_activity_date": 1500629900, "creation_date": 1500629900, "answer_id": 45234264, "question_id": 45234134, "link": "https://stackoverflow.com/questions/45234134/how-do-i-make-a-loop-like-mentioned-below-in-kotlin-programming-language/45234264#45234264", "title": "How do i make a loop like mentioned below in kotlin programming language?", "body": "<p>You should use the Intellij plugin for converting Java code for Kotlin. It's pretty neat (unless you have complex code using lambdas) This is what it converts to for your given question:</p>\n\n<pre><code>  var i = 0.0\n  while (i &lt; 10.0) {\n      println(\"value is:\" + i)\n      i += 0.25\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 1761448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf20b72ed880bfd9557c1b1417c2496?s=128&d=identicon&r=PG", "display_name": "Bala", "link": "https://stackoverflow.com/users/1761448/bala"}, "is_accepted": false, "score": 1, "last_activity_date": 1500639487, "creation_date": 1500639487, "answer_id": 45237499, "question_id": 45234134, "link": "https://stackoverflow.com/questions/45234134/how-do-i-make-a-loop-like-mentioned-below-in-kotlin-programming-language/45237499#45237499", "title": "How do i make a loop like mentioned below in kotlin programming language?", "body": "<p>Kotlin for loop only support iterate the arrays.Please refer <a href=\"https://kotlinlang.org/docs/reference/control-flow.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/control-flow.html</a></p>\n\n<p>It's achievable in different way</p>\n\n<pre><code>var length:Double = 10.0 \nvar increment:Double = 0.25\nfor (index in Array((length/increment).toInt(), { i -&gt; (i * increment) })) \nprintln(index)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 547, "user_id": 9119669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1FrV.png?s=128&g=1", "display_name": "Pouria Hemati", "link": "https://stackoverflow.com/users/9119669/pouria-hemati"}, "edited": false, "score": 1, "creation_date": 1607144400, "post_id": 65153781, "comment_id": 115186536, "body": "Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes."}], "tags": [], "owner": {"reputation": 43, "user_id": 3357952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929cef7f6dd79b203f9d621ceffd8c8c?s=128&d=identicon&r=PG&f=1", "display_name": "brian.brown", "link": "https://stackoverflow.com/users/3357952/brian-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1607202078, "last_edit_date": 1607202078, "creation_date": 1607142576, "answer_id": 65153781, "question_id": 45234134, "link": "https://stackoverflow.com/questions/45234134/how-do-i-make-a-loop-like-mentioned-below-in-kotlin-programming-language/65153781#65153781", "title": "How do i make a loop like mentioned below in kotlin programming language?", "body": "<p>I'm not sure if this syntax is new, but natural numbers may be used to iterate values like so.</p>\n<pre><code>(0..(10*4)).map {\n    it / 4.0 as Double\n}.forEach {\n    println(it)\n}\n</code></pre>\n<p>I'm avoiding iteration on IEEE 754 floating points, as that could potentially cause errors. It may be fine in this case, but the same may not be true depending on environment, context, and language. It's best to avoid using floating point except in cases where the numbers are expected to have arbitrary precision, i.e. uses real numbers or continuity.</p>\n<p>This syntax may be used within a for loop as well if you don't need to store the result. However, for loops should be avoided for the most part if you want immutability (which you should).</p>\n<pre><code>for (i in 0..10) {\n  println(&quot;Project Loom is a lie! $i&quot;)\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7602736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fkOL3wfXnQo/AAAAAAAAAAI/AAAAAAAAAJg/XOUk-Wjmgrw/photo.jpg?sz=128", "display_name": "Bhoopesh Tiwari", "link": "https://stackoverflow.com/users/7602736/bhoopesh-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1607202078, "creation_date": 1500629524, "last_edit_date": 1500629568, "question_id": 45234134, "link": "https://stackoverflow.com/questions/45234134/how-do-i-make-a-loop-like-mentioned-below-in-kotlin-programming-language", "title": "How do i make a loop like mentioned below in kotlin programming language?", "body": "<p>How can I make it in kotlin using for loop?</p>\n\n<pre><code>for (double i = 0; i &lt; 10.0; i += 0.25) {\n    System.out.println(\"value is:\" + i);\n}\n</code></pre>\n"}, {"tags": ["java", "android", "process", "android-service", "kotlin"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500628635, "post_id": 45233710, "comment_id": 77433189, "body": "start your service before binding - <code>unbindService</code> docs say: <i>&quot;Disconnect from an application service. You will no longer receive calls as the service is restarted, and the service is now allowed to stop at any time.&quot;</i>"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500628778, "post_id": 45233710, "comment_id": 77433293, "body": "@pskink I start my service in my Application class onCreate which runs before bind, and according to logcat I can see that my service onCreate runs long before onBind"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500628840, "post_id": 45233710, "comment_id": 77433347, "body": "and it is stopped right after <code>unbindService()</code> call?"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500628969, "post_id": 45233710, "comment_id": 77433428, "body": "@pskink yes, exactly!"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629006, "post_id": 45233710, "comment_id": 77433448, "body": "post your code then"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629093, "post_id": 45233710, "comment_id": 77433510, "body": "@pskink I updated my question, it is a really big project which I can&#39;t post all codes, sorry."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629238, "post_id": 45233710, "comment_id": 77433608, "body": "you are extending base <code>Service</code> class?"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629311, "post_id": 45233710, "comment_id": 77433661, "body": "@pskink yes, <code>class MainService : Service()</code>"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629436, "post_id": 45233710, "comment_id": 77433755, "body": "see <a href=\"https://github.com/android/platform_development/tree/master/samples/ApiDemos/src/com/example/android/apis/app\" rel=\"nofollow noreferrer\">github.com/android/platform_development/tree/master/samples/&zwnj;&#8203;&hellip;</a>, try some *Service*.java classes"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629563, "post_id": 45233710, "comment_id": 77433856, "body": "I am using dagger for DI, is it possible by mistake I am using application context for creating some objects inside my service!! could this be the cause of this issue?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1500629875, "post_id": 45233710, "comment_id": 77434089, "body": "hard to say, dunno"}], "answers": [{"comments": [{"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "edited": false, "score": 0, "creation_date": 1500674794, "post_id": 45247304, "comment_id": 77460879, "body": "I want to use my background service to keep a bluetooth connection alive and running, which means it is not a time related service which could be interrupted or run in different periods. Any idea for my situation?"}, {"owner": {"reputation": 9794, "user_id": 2450855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c71e825b2af16dd5a14bd6daf4e21469?s=128&d=identicon&r=PG", "display_name": "Farhad Faghihi", "link": "https://stackoverflow.com/users/2450855/farhad-faghihi"}, "reply_to_user": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "edited": false, "score": 0, "creation_date": 1500675304, "post_id": 45247304, "comment_id": 77461008, "body": "IntentService seems good. It maintains a queue of works, start the service automatically and keeps it alive while there&#39;s work in the queue."}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "edited": false, "score": 0, "creation_date": 1500675398, "post_id": 45247304, "comment_id": 77461033, "body": "But it will die when there is no task to do. By the way, I need my bluetooth connection object in my service to reuse it!"}, {"owner": {"reputation": 9794, "user_id": 2450855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c71e825b2af16dd5a14bd6daf4e21469?s=128&d=identicon&r=PG", "display_name": "Farhad Faghihi", "link": "https://stackoverflow.com/users/2450855/farhad-faghihi"}, "reply_to_user": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "edited": false, "score": 0, "creation_date": 1500675517, "post_id": 45247304, "comment_id": 77461066, "body": "sure. If your service is going to poll for an external condition to fire some other modules, I guess timed-polling with an executor or timer task may be the solution"}, {"owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "edited": false, "score": 0, "creation_date": 1500733310, "post_id": 45247304, "comment_id": 77474932, "body": "It is not possible to keep service running, You have to prepare your code for a restart and being able to continue. I added more details that I found during my researches and testes."}], "tags": [], "owner": {"reputation": 9794, "user_id": 2450855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c71e825b2af16dd5a14bd6daf4e21469?s=128&d=identicon&r=PG", "display_name": "Farhad Faghihi", "link": "https://stackoverflow.com/users/2450855/farhad-faghihi"}, "is_accepted": false, "score": 0, "last_activity_date": 1500674480, "creation_date": 1500674480, "answer_id": 45247304, "question_id": 45233710, "link": "https://stackoverflow.com/questions/45233710/service-gets-killed-when-app-closes/45247304#45247304", "title": "Service gets killed when app closes", "body": "<p>It is a normal behavior for a service to stop when the application main thread stops. </p>\n\n<p>Personally, I don't agree with using an internal service in a separate process for the regular development and functionality sharing between modules. A worker or IntentService is the more appropriate candidate most of the times.</p>\n\n<p>To keep your service alive after user exits the app, try one of the scheduled threading mechanism that suits your needs, best :</p>\n\n<p>1- TimerTask ( not really recommended !)</p>\n\n<p>2- Executors.newScheduledThreadExecutor</p>\n\n<p>3- AlarmManager</p>\n\n<p>4- JobScheduler</p>\n"}], "owner": {"reputation": 6405, "user_id": 2359762, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/72b0ca8ad84812abd50f1fb26d137ac2?s=128&d=identicon&r=PG", "display_name": "Mohsen Mirhoseini", "link": "https://stackoverflow.com/users/2359762/mohsen-mirhoseini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500674910, "creation_date": 1500628362, "last_edit_date": 1500674910, "question_id": 45233710, "link": "https://stackoverflow.com/questions/45233710/service-gets-killed-when-app-closes", "title": "Service gets killed when app closes", "body": "<p>I have a main service which should always be running in the background in my Android application for handling a bluetooth device connection and feeding data to it.</p>\n\n<p>According to these questions, it is a normal behavior if my service live in my app process to get killed when app closes,</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/15452935/android-background-service-is-restarting-when-application-is-killed\">Android Background Service is restarting when application is killed</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31759911/service-restarted-on-application-close-start-sticky\">Service restarted on Application Close - START_STICKY</a></li>\n<li><a href=\"https://stackoverflow.com/questions/17767767/keeping-background-service-alive-after-user-exit-app\">keeping background service alive after user exit app</a></li>\n</ul>\n\n<p>But I even tried running my service in a separate process using this tag <code>android:process=\":service\"</code> inside my manifest but it also get killed and restarted when my app get killed!</p>\n\n<p><strong>More info:</strong>\nI start my service in my application onCreate method, and for binding to my service in my activity I use <code>BIND_AUTO_CREATE</code>, which generally I am not sure is it correct or not.</p>\n\n<p><strong>update:</strong>\nI also have another service which bind inside my current service, I am not sure if it might be source of issue!</p>\n\n<p><strong>more update:</strong>\nI am using dagger for DI, is it possible by mistake I am using application context for creating some objects inside my service!! could this be the cause of this issue?</p>\n\n<p><strong>some more update</strong>\nI separate dagger components for my service and now application and service got no common objects, but problem still remains.</p>\n\n<p><strong>update with a sample code which got the same issue</strong>\nHere is the Application class:</p>\n\n<pre><code>class MyApplication:Application() {\n\n    override fun onCreate() {\n        super.onCreate()\n\n        startService(Intent(this, MyService::class.java))\n    }\n}\n</code></pre>\n\n<p>Here is the Service class:</p>\n\n<pre><code>class MyService : Service() {\n\n    private val mBinder = MyBinder()\n\n    inner class MyBinder : Binder() {\n        internal val service: MyService\n            get() = this@MyService\n    }\n\n    override fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n        Log.i(TAG, \"onStartCommand\")\n\n        return START_STICKY\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n\n        Log.i(TAG, \"onCreate\")\n    }\n\n    override fun onBind(intent: Intent): IBinder? {\n        Log.i(TAG, \"onBind\")\n\n        return mBinder\n    }\n\n    override fun onUnbind(intent: Intent): Boolean {\n        Log.i(TAG, \"onUnbind\")\n\n        return super.onUnbind(intent)\n    }\n\n    override fun onDestroy() {\n        Log.i(TAG, \"onDestroy\")\n\n        super.onDestroy()\n    }\n\n    companion object {\n        val TAG = \"MyService\"\n    }\n}\n</code></pre>\n\n<p>This is the Activity:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    lateinit var context: Context\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        Log.i(TAG, \"onCreate\")\n\n        context = this\n    }\n\n    //connect to the service\n    val myServiceConnection = object : ServiceConnection {\n        override fun onServiceConnected(name: ComponentName?, service: IBinder?) {\n            Log.i(TAG, \"onServiceConnected\")\n\n            val binder = service as? MyService.MyBinder\n\n            // ...\n        }\n\n        override fun onServiceDisconnected(name: ComponentName?) {\n            Log.i(TAG, \"onServiceDisconnected\")\n        }\n    }\n\n    override fun onResume() {\n        super.onResume()\n        Log.i(TAG, \"onResume\")\n\n        val intent = Intent(context, MyService::class.java)\n        bindService(intent, myServiceConnection, Context.BIND_AUTO_CREATE);\n    }\n\n    override fun onPause() {\n        super.onPause()\n        Log.i(TAG, \"onPause\")\n\n        unbindService(myServiceConnection)\n    }\n\n    companion object {\n        val TAG = \"MainActivity\"\n    }\n}\n</code></pre>\n\n<p>Last but not least, the Manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.mirhoseini.stickyservice\"&gt;\n\n    &lt;application\n        android:name=\".MyApplication\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;service\n            android:name=\".MyService\"\n            android:enabled=\"true\"\n            android:exported=\"true\"\n            android:process=\":service\" /&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"}, {"tags": ["javafx", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 2715, "user_id": 2272445, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d8fed0b827e41acbb8e9028cfc91b65e?s=128&d=identicon&r=PG&f=1", "display_name": "shan", "link": "https://stackoverflow.com/users/2272445/shan"}, "edited": false, "score": 0, "creation_date": 1501254853, "post_id": 45236471, "comment_id": 77715449, "body": "worked like a charm, thanks! I like the format of using .then, very readable and easy to understand for a noob like me lol"}], "tags": [], "owner": {"reputation": 238, "user_id": 8151834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6999072a68061e07119cecfb0c4f0a96?s=128&d=identicon&r=PG", "display_name": "Wall0p", "link": "https://stackoverflow.com/users/8151834/wall0p"}, "is_accepted": true, "score": 3, "last_activity_date": 1500648198, "last_edit_date": 1500648198, "creation_date": 1500636378, "answer_id": 45236471, "question_id": 45233063, "link": "https://stackoverflow.com/questions/45233063/consecutive-animation-in-tornadofx/45236471#45236471", "title": "Consecutive animation in TornadoFX?", "body": "<p>There's a JavaFX class \"SequentialTransition\" that will run your timelines in sequence.  You'll need to disable the TornadoFX autoplay with a flag passed into the timeline builder.  Check out ParallelTransition if you want to run these all at once using a similar coding pattern.</p>\n\n<pre><code>class STTest : View(\"My View\") {\n\n    val r1 = Rectangle(20.0, 20.0, Color.RED)\n    val r2 = Rectangle(20.0, 20.0, Color.YELLOW)\n    val r3 = Rectangle(20.0, 20.0, Color.GREEN)\n    val r4 = Rectangle(20.0, 20.0, Color.BLUE)\n\n    override val root = vbox {\n\n        button(\"Animate\") {\n            setOnAction {\n\n                val t1 = timeline(false) {\n                    keyframe(Duration.seconds(0.5)) {\n                        keyvalue(r1.translateXProperty(), 50.0, interpolator = Interpolator.EASE_BOTH)\n                    }\n                }\n                val t2 = timeline(false) {\n                    keyframe(Duration.seconds(0.5)) {\n                        keyvalue(r2.translateXProperty(), 100.0, interpolator = Interpolator.EASE_BOTH)\n                    }\n                }\n                val t3 = timeline(false) {\n                    keyframe(Duration.seconds(0.5)) {\n                        keyvalue(r3.translateXProperty(), 150.0, interpolator = Interpolator.EASE_BOTH)\n                    }\n                }\n                val t4 = timeline(false) {\n                    keyframe(Duration.seconds(0.5)) {\n                        keyvalue(r4.translateXProperty(), 200.0, interpolator = Interpolator.EASE_BOTH)\n                    }\n                }\n\n                /* functions look better\n                val st = SequentialTransition()\n                st.children += t1\n                st.children += t2\n                st.children += t3\n                st.children += t4\n\n                st.play()\n                */  \n\n                t1.then(t2).then(t3).then(t4).play()\n\n            }\n        }\n        pane {\n            add(r1)\n            add(r2)\n            add(r3)\n            add(r4)\n        }\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2715, "user_id": 2272445, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d8fed0b827e41acbb8e9028cfc91b65e?s=128&d=identicon&r=PG&f=1", "display_name": "shan", "link": "https://stackoverflow.com/users/2272445/shan"}, "edited": false, "score": 0, "creation_date": 1501254912, "post_id": 45239782, "comment_id": 77715489, "body": "awesome, excited for 1.7.9! :^)"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": false, "score": 4, "last_activity_date": 1500645965, "creation_date": 1500645965, "answer_id": 45239782, "question_id": 45233063, "link": "https://stackoverflow.com/questions/45233063/consecutive-animation-in-tornadofx/45239782#45239782", "title": "Consecutive animation in TornadoFX?", "body": "<p>Based on the structure proposed by @tornadofx-fan I've added builders for sequentialTransition and parallelTransition, so starting from TornadoFX 1.7.9 you can do the same like this:</p>\n\n<pre><code>class TransitionViews: View() {\n   val r1 = Rectangle(20.0, 20.0, Color.RED)\n   val r2 = Rectangle(20.0, 20.0, Color.YELLOW)\n   val r3 = Rectangle(20.0, 20.0, Color.GREEN)\n   val r4 = Rectangle(20.0, 20.0, Color.BLUE)\n\n   override val root = vbox {\n       button(\"Animate\").action {\n           sequentialTransition {\n               timeline {\n                   keyframe(0.5.seconds) {\n                       keyvalue(r1.translateXProperty(), 50.0, interpolator = Interpolator.EASE_BOTH)\n                   }\n               }\n               timeline {\n                   keyframe(0.5.seconds) {\n                       keyvalue(r2.translateXProperty(), 100.0, interpolator = Interpolator.EASE_BOTH)\n                   }\n               }\n               timeline {\n                   keyframe(0.5.seconds) {\n                       keyvalue(r3.translateXProperty(), 150.0, interpolator = Interpolator.EASE_BOTH)\n                   }\n               }\n               timeline {\n                   keyframe(0.5.seconds) {\n                       keyvalue(r4.translateXProperty(), 200.0, interpolator = Interpolator.EASE_BOTH)\n                   }\n               }\n           }\n       }\n       pane {\n           add(r1)\n           add(r2)\n           add(r3)\n           add(r4)\n       }\n   }\n}\n</code></pre>\n\n<p>The timeline builder inside of these transitions don't automatically play, while the transition itself automatically plays when the builder is completed. You can pass <code>play=false</code> to the transition builder to disable autoplay.</p>\n\n<p>Also note the usage of <code>0.5.seconds</code> to generate the Duration objects :)</p>\n"}, {"tags": [], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "is_accepted": false, "score": 1, "last_activity_date": 1500669881, "last_edit_date": 1500669881, "creation_date": 1500657011, "answer_id": 45243163, "question_id": 45233063, "link": "https://stackoverflow.com/questions/45233063/consecutive-animation-in-tornadofx/45243163#45243163", "title": "Consecutive animation in TornadoFX?", "body": "<p>In this case where you're just setting scales and rotations, there are some nice helpers already in the library. This should work for you:</p>\n\n<pre><code>val time = 0.5.seconds\nfirstImg.scale(time, Point2D(1.0, 1.0), play = false).and(firstImg.rotate(time, 0.0, play = false))\n        .then(secondImg.scale(time, Point2D(1.0, 1.0), play = false).and(secondImg.rotate(time, 0.0, play = false)))\n        .then(thirdImg.scale(time, Point2D(1.0, 1.0), play = false).and(thirdImg.rotate(time, 0.0, play = false)))\n        .then(fourthImg.scale(time, Point2D(1.0, 1.0), play = false).and(fourthImg.rotate(time, 0.0, play = false)))\n        .play()\n</code></pre>\n\n<p>The <code>play = false</code> everywhere is required since these helpers were designed for simple one-off auto-playing animations.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>After <a href=\"https://kotlinlang.slack.com/messages/C136UUPE1/\" rel=\"nofollow noreferrer\">a discussion in Slack</a>, these may be simplified in a future release, so the above may eventually be as easy as</p>\n\n<pre><code>val time = 0.5.seconds\nlistOf(\n    firstImg.scale(time, 1 p 1) and firstImg.rotate(time, 0),\n    secondImg.scale(time, 1 p 1) and secondImg.rotate(time, 0),\n    thirdImg.scale(time, 1 p 1) and thirdImg.rotate(time, 0),\n    fourthImg.scale(time, 1 p 1) and fourthImg.rotate(time, 0)\n).playSequential()\n</code></pre>\n\n<p>Watch the release notes for more info!</p>\n\n<p><strong>Another Edit</strong></p>\n\n<p>Looks like I was over complicating things a bit. You can just use this if you like it more:</p>\n\n<pre><code>val time = 0.5.seconds\nSequentialTransition(\n    firstImg.scale(time, Point2D(1.0, 1.0), play = false).and(firstImg.rotate(time, 0.0, play = false)).\n    secondImg.scale(time, Point2D(1.0, 1.0), play = false).and(secondImg.rotate(time, 0.0, play = false)),\n    thirdImg.scale(time, Point2D(1.0, 1.0), play = false).and(thirdImg.rotate(time, 0.0, play = false)),\n    fourthImg.scale(time, Point2D(1.0, 1.0), play = false).and(fourthImg.rotate(time, 0.0, play = false))\n).play()\n</code></pre>\n"}], "owner": {"reputation": 2715, "user_id": 2272445, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d8fed0b827e41acbb8e9028cfc91b65e?s=128&d=identicon&r=PG&f=1", "display_name": "shan", "link": "https://stackoverflow.com/users/2272445/shan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 45236471, "answer_count": 3, "score": 4, "last_activity_date": 1500669881, "creation_date": 1500626578, "question_id": 45233063, "link": "https://stackoverflow.com/questions/45233063/consecutive-animation-in-tornadofx", "title": "Consecutive animation in TornadoFX?", "body": "<p>After reading through the documentation, I'm still a bit confused on how to execute an animation <em>after</em> another one has completed. I have a timeline like so:</p>\n\n<pre><code>timeline {\n  keyframe(Duration.seconds(0.5)) {\n    keyvalue(firstImg.scaleXProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(firstImg.scaleYProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(firstImg.rotateProperty(), 0.0, interpolator = Interpolator.EASE_BOTH)\n  }\n\n  keyframe(Duration.seconds(0.5)) {\n    keyvalue(secondImg.scaleXProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(secondImg.scaleYProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(secondImg.rotateProperty(), 0.0, interpolator = Interpolator.EASE_BOTH)\n  }\n\n  keyframe(Duration.seconds(0.5)) {\n    keyvalue(thirdImg.scaleXProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(thirdImg.scaleYProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(thirdImg.rotateProperty(), 0.0, interpolator = Interpolator.EASE_BOTH)\n  }\n\n  keyframe(Duration.seconds(0.5)) {\n    keyvalue(fourthImg.scaleXProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(fourthImg.scaleYProperty(), 1.0, interpolator = Interpolator.EASE_BOTH)\n    keyvalue(fourthImg.rotateProperty(), 0.0, interpolator = Interpolator.EASE_BOTH)\n  }\n}\n</code></pre>\n\n<p>This runs them all at once, but I would like to run each animation after the other one has finished! I can't quite figure out how to do this.. (<em>sorry if this is obvious, I am very new to Kotlin and Java in general!</em>)</p>\n\n<p>I see that the keyframe has an <code>onFinished</code> property but I can't quite figure out what I'm supposed to actually <em>set</em> it to. Is there a better way to do this? Thank you!</p>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 8, "creation_date": 1538803559, "post_id": 45235642, "comment_id": 92281220, "body": "Regarding the unique Gradle module names: on a highly modularized project, with multiple inner-modules level, you can easily end up having inner modules with the same name, with that making sense. The Kotlin compiler could probably be smarter about that, and use the <i>fully qualified</i> module name."}, {"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "edited": false, "score": 1, "creation_date": 1603746958, "post_id": 45235642, "comment_id": 114129368, "body": "On android, we are seeing the same file duplicated in 2 or more places. For example one might be under <code>build&#47;intermediates&#47;javac&#47;debug&#47;classes&#47;META-INF&#47;</code> and another under <code>build&#47;tmp&#47;kotlin-classes&#47;debug&#47;META-INF&#47;</code> so then if we select <code>pickFirst</code> in the packaging options, that does not work."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 27, "last_activity_date": 1500895756, "last_edit_date": 1500895756, "creation_date": 1500633853, "answer_id": 45235642, "question_id": 45232350, "link": "https://stackoverflow.com/questions/45232350/disable-meta-inf-generation-in-gradle-android-library-kotlin-project/45235642#45235642", "title": "Disable META-INF/* generation in gradle android library kotlin project", "body": "<p>The original purpose of <code>.kotlin_module</code> files is to store the package parts mapping to the compiled class files. The compiler uses them to resolve top-level function calls in a library attached to the project.  Also, Kotlin reflection uses the <code>.kotlin_module</code> files to construct the top level members metadata at runtime. See more: <a href=\"https://blog.jetbrains.com/kotlin/2015/06/improving-java-interop-top-level-functions-and-properties/\" rel=\"noreferrer\"><em>Improving Java Interop: Top-Level Functions and Properties</em></a></p>\n\n<p>Given that, you don't want to disable their generation in library projects, because it might break compilation against the libraries.</p>\n\n<p>Instead, you can get rid of the duplicates by using <code>packagingOptions</code> in your app <code>build.gradle</code>, as said <a href=\"https://stackoverflow.com/questions/44509608/duplicate-files-copied-in-apk-meta-inf-library-release-kotlin-module\">here</a>:</p>\n\n<pre><code>android {\n    // ...\n\n    packagingOptions {\n        exclude 'META-INF/library_release.kotlin_module'\n    }\n}\n</code></pre>\n\n<p>Note: excluding these files from an application APK interferes with reflection at runtime and therefore is is not the best solution either.</p>\n\n<hr>\n\n<p>Another option is to use unique module names in your libraries:</p>\n\n<pre><code>compileReleaseKotlin.kotlinOptions.freeCompilerArgs += [\"-module-name\", \"my.library.id\"]\n</code></pre>\n\n<p><sup>Choose the task that produces the output that is then packed into the AAR.\n It might not be <code>compileReleaseKotlin</code>, and also note that doing this might affect the tests compilation for this variant.</sup></p>\n\n<p>Or, what's more reliable, just choose unique Gradle module names, because the Kotlin module is named after the Gradle project.</p>\n"}, {"tags": [], "owner": {"reputation": 4443, "user_id": 300236, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ef35e12ab8af89a100661ce7783c550?s=128&d=identicon&r=PG", "display_name": "Brill Pappin", "link": "https://stackoverflow.com/users/300236/brill-pappin"}, "is_accepted": false, "score": 1, "last_activity_date": 1613509934, "creation_date": 1613509934, "answer_id": 66232246, "question_id": 45232350, "link": "https://stackoverflow.com/questions/45232350/disable-meta-inf-generation-in-gradle-android-library-kotlin-project/66232246#66232246", "title": "Disable META-INF/* generation in gradle android library kotlin project", "body": "<p>I was able to resolve this by renaming modules to be uniquem when simpler module names conflicted.</p>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4528, "favorite_count": 3, "accepted_answer_id": 45235642, "answer_count": 2, "score": 11, "last_activity_date": 1613509934, "creation_date": 1500624428, "last_edit_date": 1500626529, "question_id": 45232350, "link": "https://stackoverflow.com/questions/45232350/disable-meta-inf-generation-in-gradle-android-library-kotlin-project", "title": "Disable META-INF/* generation in gradle android library kotlin project", "body": "<p>Good day. I've written a kotlin android library and uploaded it on bintray. But when I try to use it (via gradle compile) in some project, it fails to build with following errors:</p>\n\n<pre><code>&gt; com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK META-INF/library_release.kotlin_module\nFile1: C:\\Users\\Charlie\\.android\\build-cache\\2939fbc6b0336396c9c4912d615880645b2c729d\\output\\jars\\classes.jar\nFile2: C:\\Users\\Charlie\\OneDrive\\Dev\\Projects\\AndroidStudio\\MetuCardLib\\demo\\build\\intermediates\\bundles\\default\\classes.jar\n</code></pre>\n\n<p>I've looked up both of these .jar files and they both contained <code>META-INF</code> folder with <code>library_release.kotlin_module</code> file. But more importantly generated .aar (android archive published in bintray) contained this folder as well as this file. I've checked other decent bintray android libraries and they don't seem to include any <code>META-INF</code> files. However those that do include it (in most cases they contain license files) produce the same <code>DuplicateFileException</code> and the way to resolve it is to explicitly exclude them in use-project's gradle file.</p>\n\n<p>What's the use of this <code>library_release.kotlin_module</code> file and how can I disable its generation during publishing? Because I don't want to explicitly exclude from every project which is using this library and I don't want to ask other developers to do so.</p>\n\n<p>Here's the library's repo: <a href=\"https://github.com/arslancharyev31/Anko-ExpandableTextView/\" rel=\"noreferrer\">https://github.com/arslancharyev31/Anko-ExpandableTextView/</a>\nAnd it's bintray repo: <a href=\"https://bintray.com/arslancharyev31/android/Anko-ExpandableTextView\" rel=\"noreferrer\">https://bintray.com/arslancharyev31/android/Anko-ExpandableTextView</a></p>\n"}]