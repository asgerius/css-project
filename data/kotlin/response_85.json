[{"tags": ["java", "android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1472071745, "post_id": 39129477, "comment_id": 65610860, "body": "why are you invoking same things twice? why the wildcards?"}, {"owner": {"reputation": 121, "user_id": 196906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ec6bb9ff128a3e4b366b5afd5ce8bb30?s=128&d=identicon&r=PG", "display_name": "netdur", "link": "https://stackoverflow.com/users/196906/netdur"}, "reply_to_user": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1472122443, "post_id": 39129477, "comment_id": 65630751, "body": "@DiegoTorresMilano I&#39;m not sure why but if I build once I get &quot;ClassNotFoundException&quot; exception, I found out invoking same things twice fix this problem ... wild card because I don&#39;t want people googling app name to find this question"}, {"owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1472149534, "post_id": 39129477, "comment_id": 65648143, "body": "So, fix the ClassNotFoundException problem first. And how are people looking at this question to give you an answer supposed to guess that you are hiding the package with wildcard?"}, {"owner": {"reputation": 121, "user_id": 196906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ec6bb9ff128a3e4b366b5afd5ce8bb30?s=128&d=identicon&r=PG", "display_name": "netdur", "link": "https://stackoverflow.com/users/196906/netdur"}, "reply_to_user": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1472166121, "post_id": 39129477, "comment_id": 65655444, "body": "Yeah if you notice the question is about ClassNotFoundException problem I need to fix, building the project twice without any modifications makes the problem vanish, go figure!"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 196906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ec6bb9ff128a3e4b366b5afd5ce8bb30?s=128&d=identicon&r=PG", "display_name": "netdur", "link": "https://stackoverflow.com/users/196906/netdur"}, "edited": false, "score": 0, "creation_date": 1472124689, "post_id": 39136701, "comment_id": 65632191, "body": "hi @mklimek ... thank for help, I have to use line  <code>.&#47;gradlew --offline clean assembleDebug</code> twice to escape error but that did reduce build time to 4 minutes, thank you"}, {"owner": {"reputation": 121, "user_id": 196906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ec6bb9ff128a3e4b366b5afd5ce8bb30?s=128&d=identicon&r=PG", "display_name": "netdur", "link": "https://stackoverflow.com/users/196906/netdur"}, "edited": false, "score": 0, "creation_date": 1472166285, "post_id": 39136701, "comment_id": 65655494, "body": "I think I will accept your answer, it didn&#39;t fix the original problem but it made the workaround less painful, thank you"}], "tags": [], "owner": {"reputation": 22943, "user_id": 870674, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0463b7a46ed49025082a795ac2f67f49?s=128&d=identicon&r=PG", "display_name": "klimat", "link": "https://stackoverflow.com/users/870674/klimat"}, "is_accepted": true, "score": 1, "last_activity_date": 1472114678, "last_edit_date": 1472114678, "creation_date": 1472099241, "answer_id": 39136701, "question_id": 39129477, "link": "https://stackoverflow.com/questions/39129477/runtimeexception-unable-to-instantiate-activity-componentinfo-classnotfound/39136701#39136701", "title": "RuntimeException: Unable to instantiate activity ComponentInfo ... ClassNotFoundException", "body": "<p>Use just this:</p>\n\n<p><code>./gradlew --offline clean assembleDebug</code></p>\n\n<p>To send .apk to your device use something like that:</p>\n\n<p><code>adb install app/build/output/apk/appDebug.apk</code></p>\n\n<p>Ensure your apk filename and the path are correct.</p>\n"}, {"tags": [], "owner": {"reputation": 3863, "user_id": 996787, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/TNXsv.jpg?s=128&g=1", "display_name": "Rajesh Nasit", "link": "https://stackoverflow.com/users/996787/rajesh-nasit"}, "is_accepted": false, "score": 0, "last_activity_date": 1501409541, "creation_date": 1501409541, "answer_id": 45398690, "question_id": 39129477, "link": "https://stackoverflow.com/questions/39129477/runtimeexception-unable-to-instantiate-activity-componentinfo-classnotfound/45398690#45398690", "title": "RuntimeException: Unable to instantiate activity ComponentInfo ... ClassNotFoundException", "body": "<p>I have stopped the Instant run from Android studio and its working.</p>\n\n<p>File->Setting->Build->Instant Run->Disble checkbox of Enable instant run to hotswap code/resource changes</p>\n"}], "owner": {"reputation": 121, "user_id": 196906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ec6bb9ff128a3e4b366b5afd5ce8bb30?s=128&d=identicon&r=PG", "display_name": "netdur", "link": "https://stackoverflow.com/users/196906/netdur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 39136701, "answer_count": 2, "score": 1, "last_activity_date": 1501409541, "creation_date": 1472059344, "last_edit_date": 1472060425, "question_id": 39129477, "link": "https://stackoverflow.com/questions/39129477/runtimeexception-unable-to-instantiate-activity-componentinfo-classnotfound", "title": "RuntimeException: Unable to instantiate activity ComponentInfo ... ClassNotFoundException", "body": "<p>I'm getting the following error:</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to instantiate activity\n  ComponentInfo{com.<em>.chat/com.</em>.login.LoginActivity}:\n  java.lang.ClassNotFoundException: Didn't find class\n  \"com.<em>.login.LoginActivity\" on path: DexPathList[[zip file\n  \"/data/app/com.</em>.chat-1/base.apk\"],nativeLibraryDirectories=[/data/app/com.*.chat-1/lib/arm,\n  /vendor/lib, /system/lib]]</p>\n</blockquote>\n\n<p>I have tried everything I could find online without success.  The only way I could get around this by this inefficient script I made:</p>\n\n<pre><code>#!/usr/bin/env bash\n\n./gradlew app:clean\n./gradlew app:installDebug\n./gradlew app:clean\n./gradlew app:installDebug\n\n/home/adel/Android/Sdk/platform-tools/adb shell am start -n com.*.chat/com.*.login.LoginActivity\n\nnotify-send -i icon.png \"gradle task done\" \"check your phone\"\n</code></pre>\n\n<p>It works, but takes around 7 minutes to get done.  Is there a faster, more efficient way of doing this?</p>\n"}, {"tags": ["gradle", "kotlin", "gradle-plugin"], "answers": [{"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1472071450, "post_id": 39123219, "comment_id": 65610728, "body": "Well that&#39;s hilarious - I&#39;m already using a handful of Netflix&#39;s nebula plugins (project, release, etc)....the kotlin plugin didn&#39;t exist last time I looked. I will give this a try, thanks!"}], "tags": [], "owner": {"reputation": 693, "user_id": 214464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c1abb92892b279b334bfdfdab824018?s=128&d=identicon&r=PG", "display_name": "Rodrigo B. de Oliveira", "link": "https://stackoverflow.com/users/214464/rodrigo-b-de-oliveira"}, "is_accepted": true, "score": 6, "last_activity_date": 1472041353, "creation_date": 1472041353, "answer_id": 39123219, "question_id": 39117820, "link": "https://stackoverflow.com/questions/39117820/how-to-share-boilerplate-kotlin-configuration-across-multiple-gradle-projects/39123219#39123219", "title": "How to share boilerplate Kotlin configuration across multiple Gradle projects?", "body": "<p>Check out the <a href=\"https://github.com/nebula-plugins/nebula-kotlin-plugin\" rel=\"noreferrer\">nebula-kotlin-plugin</a>. It seems very close to what you're trying to achieve there.</p>\n"}, {"tags": [], "owner": {"reputation": 3606, "user_id": 178274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8bcbf9deef69f1d6a2f658eefe4487c4?s=128&d=identicon&r=PG", "display_name": "denis.zhdanov", "link": "https://stackoverflow.com/users/178274/denis-zhdanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1539993296, "creation_date": 1539993296, "answer_id": 52901213, "question_id": 39117820, "link": "https://stackoverflow.com/questions/39117820/how-to-share-boilerplate-kotlin-configuration-across-multiple-gradle-projects/52901213#52901213", "title": "How to share boilerplate Kotlin configuration across multiple Gradle projects?", "body": "<p>The problem here is that there is a <a href=\"https://github.com/gradle/gradle/issues/1322\" rel=\"nofollow noreferrer\">known gradle bug</a> about the inability to apply plugins by id from init scripts. That's why you need to use fully qualified class name as a workaround.</p>\n\n<p>E.g. I have the following in the init script and it works:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: org.jetbrains.kotlin.gradle.plugin.KotlinPlatformJvmPlugin\n</code></pre>\n\n<p>By the way, I created a gradle plugin for preparing custom gradle distributions with common setup defined in init script - <a href=\"http://gradle-dist.oss.harmonysoft.tech/\" rel=\"nofollow noreferrer\">custom-gradle-dist</a>. It works perfectly for my projects, e.g. a <em>build.gradle</em> for a library project looks like this (this is a complete file, all <em>repository</em>, <em>apply plugin</em>, <em>dependencies</em> etc setup is defined in the init script):  </p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code>dependencies {\n    compile 'org.springframework.kafka:spring-kafka'\n}\n</code></pre>\n"}], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 39123219, "answer_count": 2, "score": 4, "last_activity_date": 1539993296, "creation_date": 1472026203, "question_id": 39117820, "link": "https://stackoverflow.com/questions/39117820/how-to-share-boilerplate-kotlin-configuration-across-multiple-gradle-projects", "title": "How to share boilerplate Kotlin configuration across multiple Gradle projects?", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow\">typical Kotlin configuration</a> in a Gradle project is very boilerplate, and I'm looking for a way of abstracting it out into an external build script so that it can be reused.</p>\n\n<p>I have a working solution (below), but it feels like a bit of a hack as the kotlin-gradle-plugin doesn't work out of the box this way.</p>\n\n<p>It's messy to apply any non-standard plugin from an external script as you <a href=\"https://discuss.gradle.org/t/how-do-i-apply-a-plugin-to-a-project-from-a-shared-applied-gradle-file/7508\" rel=\"nofollow\">can't apply the plugin by id</a>, i.e.</p>\n\n<p><code>apply plugin: 'kotlin'</code> will result in <code>Plugin with id 'kotlin' not found.</code></p>\n\n<p>The simple (well, usually) workaround is to apply by the fully qualified classname of the plugin, i.e.</p>\n\n<p><code>apply plugin: org.jetbrains.kotlin.gradle.plugin.KotlinPluginWrapper</code></p>\n\n<p>which in this case throws a nice little exception indicating that the plugin probably wasn't meant to be called this way:</p>\n\n<pre><code>Failed to determine source cofiguration of kotlin plugin. \nCan not download core. Please verify that this or any parent project\ncontains 'kotlin-gradle-plugin' in buildscript's classpath configuration.\n</code></pre>\n\n<p>So I managed to hack together a plugin (just a modified version of the <a href=\"https://github.com/JetBrains/kotlin/blob/v1.0.3/libraries/tools/kotlin-gradle-plugin/src/main/kotlin/org/jetbrains/kotlin/gradle/plugin/KotlinPluginWrapper.kt\" rel=\"nofollow\">real plugin</a>) which forces it to find the plugin from the current buildscript.</p>\n\n<p><strong>kotlin.gradle</strong></p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = \"1.0.3\"\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n}\n\napply plugin: CustomKotlinPlugin\nimport org.jetbrains.kotlin.gradle.plugin.CleanUpBuildListener\nimport org.jetbrains.kotlin.gradle.plugin.KotlinBasePluginWrapper\nimport org.jetbrains.kotlin.gradle.plugin.KotlinPlugin\nimport org.jetbrains.kotlin.gradle.tasks.KotlinTasksProvider\n\n/**\n * Wrapper around the Kotlin plugin wrapper (this code is largely a refactoring of KotlinBasePluginWrapper).\n * This is required because the default behaviour expects the kotlin plugin to be applied from the project,\n * not from an external buildscript.\n */\nclass CustomKotlinPlugin extends KotlinBasePluginWrapper {\n\n    @Override\n    void apply(Project project) {\n        // use String literal as KOTLIN_COMPILER_ENVIRONMENT_KEEPALIVE_PROPERTY constant isn't available\n        System.setProperty(\"kotlin.environment.keepalive\", \"true\")\n\n        // just use the kotlin version defined in this script\n        project.extensions.extraProperties?.set(\"kotlin.gradle.plugin.version\", project.property('kotlin_version'))\n\n        // get the plugin using the current buildscript\n        def plugin = getPlugin(this.class.classLoader, project.buildscript)\n        plugin.apply(project)\n\n        def cleanUpBuildListener = new CleanUpBuildListener(this.class.classLoader, project)\n        cleanUpBuildListener.buildStarted()\n        project.gradle.addBuildListener(cleanUpBuildListener)\n    }\n\n    @Override\n    Plugin&lt;Project&gt; getPlugin(ClassLoader pluginClassLoader, ScriptHandler scriptHandler){\n        return new KotlinPlugin(scriptHandler, new KotlinTasksProvider(pluginClassLoader));\n    }\n}\n</code></pre>\n\n<p>This can then be applied in any project (i.e. <code>apply from: \"kotlin.gradle\"</code>) and you're up and running for Kotlin development.</p>\n\n<p>It works, and I haven't had any issues yet, but I'm wondering if there is a better way? I'm not really keen on merging in changes to the plugin every time there's a new version of Kotlin.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 0, "creation_date": 1471952717, "post_id": 39099474, "comment_id": 65547052, "body": "Thanks for the tip. Still wonder what is the best way to translate such code"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "edited": false, "score": 0, "creation_date": 1471952993, "post_id": 39099474, "comment_id": 65547249, "body": "I expanded my answer to cover your original question."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1471983340, "post_id": 39099474, "comment_id": 65567235, "body": "The Kotlin stdlib version can be simplified further using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.net.-u-r-l/read-text.html\" rel=\"nofollow noreferrer\"><code>URL.readText</code></a>: <code>val text = URL(urlSpec).readText()</code>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1472024403, "post_id": 39099474, "comment_id": 65580697, "body": "Yes, although in this case, the stream won&#39;t be buffered."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 10, "last_activity_date": 1471952960, "last_edit_date": 1471952960, "creation_date": 1471950400, "answer_id": 39099474, "question_id": 39099437, "link": "https://stackoverflow.com/questions/39099437/best-way-to-translate-this-java-code-into-kotlin/39099474#39099474", "title": "Best way to translate this java code into kotlin", "body": "<p>Instead of translating the code literally, make use of Kotlin's stdlib which offers a number of useful extension functions. Here's one version</p>\n\n<pre><code>val text = URL(urlSpec).openConnection().inputStream.bufferedReader().use { it.readText() }\n</code></pre>\n\n<p>To answer the original question: You're right, assignments are not treated as expressions. Therefore you will need to separate the assignment and the comparison. Take a look at the implementation in the stdlib for an example:</p>\n\n<pre><code>public fun Reader.copyTo(out: Writer, bufferSize: Int = DEFAULT_BUFFER_SIZE): Long {\n    var charsCopied: Long = 0\n    val buffer = CharArray(bufferSize)\n    var chars = read(buffer)\n    while (chars &gt;= 0) {\n        out.write(buffer, 0, chars)\n        charsCopied += chars\n        chars = read(buffer)\n    }\n    return charsCopied\n}\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/JetBrains/kotlin/blob/a66fc9043437d2e75f04feadcfc63c61b04bd196/libraries/stdlib/src/kotlin/io/ReadWrite.kt#L114\">https://github.com/JetBrains/kotlin/blob/a66fc9043437d2e75f04feadcfc63c61b04bd196/libraries/stdlib/src/kotlin/io/ReadWrite.kt#L114</a></p>\n"}, {"tags": [], "owner": {"reputation": 21581, "user_id": 4754790, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0hACp.jpg?s=128&g=1", "display_name": "Dragan Bozanovic", "link": "https://stackoverflow.com/users/4754790/dragan-bozanovic"}, "is_accepted": false, "score": 3, "last_activity_date": 1472151684, "creation_date": 1472151684, "answer_id": 39152902, "question_id": 39099437, "link": "https://stackoverflow.com/questions/39099437/best-way-to-translate-this-java-code-into-kotlin/39152902#39152902", "title": "Best way to translate this java code into kotlin", "body": "<p>You could use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"nofollow\">apply</a> block to execute the assignment:</p>\n\n<pre><code>val input= connection.getInputStream();\nvar bytesRead = 0;\nval buffer = ByteArray(1024)\nwhile (input.read(buffer).apply { bytesRead = this } &gt; 0) {\n    out.write(buffer, 0, bytesRead);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2813, "user_id": 3600738, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vXuZd.png?s=128&g=1", "display_name": "harsh_v", "link": "https://stackoverflow.com/users/3600738/harsh-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1522313340, "creation_date": 1522313340, "answer_id": 49551686, "question_id": 39099437, "link": "https://stackoverflow.com/questions/39099437/best-way-to-translate-this-java-code-into-kotlin/49551686#49551686", "title": "Best way to translate this java code into kotlin", "body": "<blockquote>\n  <p>You could use something like this</p>\n</blockquote>\n\n<p><em>This operation may be little heavy as a function is created each iteration.</em> </p>\n\n<pre><code>val url = URL(\"urlSpec\")\nval connection = url.openConnection() as HttpURLConnection\nval `in` = connection.inputStream\nval buffer = ByteArray(1024)\nvar bytesRead: Int? = null\nwhile ({ bytesRead = `in`.read(buffer); bytesRead }() != null) {\n        out.write(buffer, 0, bytesRead!!)\n}\nout.close()\n</code></pre>\n"}], "owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "accepted_answer_id": 39099474, "answer_count": 3, "score": 4, "last_activity_date": 1522313340, "creation_date": 1471950282, "question_id": 39099437, "link": "https://stackoverflow.com/questions/39099437/best-way-to-translate-this-java-code-into-kotlin", "title": "Best way to translate this java code into kotlin", "body": "<pre><code>URL url = new URL(urlSpec);\nHttpURLConnection connection = (HttpURLConnection)url.openConnection();\nInputStream in = connection.getInputStream();\nint bytesRead = 0;\nbyte[] buffer = new byte[1024];\nwhile ((bytesRead = in.read(buffer)) &gt; 0) {\n    out.write(buffer, 0, bytesRead);\n}\nout.close();\n</code></pre>\n\n<p>I am especially curious about this part</p>\n\n<pre><code>while(bytesRead = in.read(buffer))\n</code></pre>\n\n<p>We know that asigements are treated as statements in kotlin while in java they are treated as expressions, so this construct is only possible in java.</p>\n\n<p>What is best way to translate this java code into kotlin?</p>\n"}, {"tags": ["android", "file", "kotlin", "messagepack", "kotlin-android-extensions"], "answers": [{"tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": true, "score": 1, "last_activity_date": 1471942669, "creation_date": 1471942669, "answer_id": 39096697, "question_id": 39093527, "link": "https://stackoverflow.com/questions/39093527/file-byte-error-in-kotlin-how-to-transfer-correctly/39096697#39096697", "title": "File byte error in kotlin. How to transfer correctly?", "body": "<p>I didn't succeeded in reproducing your problem. However I think I've found the bug that may be causing corrupted file transfer.</p>\n\n<p>In your server code there's an infinite loop that returns immediately out of method leaving the rest of method unreachable. This is the clean-up code that closes connections and streams. Quite possibly the <code>OutputStream</code> was not properly closed and this is the cause of corrupted file write.</p>\n\n<p>That's how the server code should look like:</p>\n\n<pre><code>val datalen = dis.readInt() // data length\n\nif (datalen &gt; 0) {\n    var finaldata = ByteArray(datalen)\n     var process = 0;\n     while (process &lt;= datalen) {\n        read = dis.read(buffer)\n        if (read &lt; 0) {\n            break\n        }\n        msgdata.write(buffer)\n        process += 4096\n    }\n    println(process.toString() + \" \" + datalen.toString())\n    val allData = msgdata.toByteArray().slice(0..datalen).toByteArray()\n    unpackByte(allData)\n\n}\n\nmsgdata.close()\ndis.close()\n</code></pre>\n\n<p><code>while</code> loop is unnecessary. Also you probably should just <code>break</code> the loop, not <code>return</code> from function.</p>\n\n<p>P.S.\nHave you considered using <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow\">IOUtils</a> to handle all the IO read/writes? Half of your code could be replaced with just a few lines of code using this library.</p>\n"}], "owner": {"reputation": 45, "user_id": 6255297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73c284d569726067a20d96e0cf99c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Icarusud", "link": "https://stackoverflow.com/users/6255297/icarusud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 39096697, "answer_count": 1, "score": 0, "last_activity_date": 1471942669, "creation_date": 1471932463, "question_id": 39093527, "link": "https://stackoverflow.com/questions/39093527/file-byte-error-in-kotlin-how-to-transfer-correctly", "title": "File byte error in kotlin. How to transfer correctly?", "body": "<p>I want to Transfer file with tcp client to server, but image file has been wrong.</p>\n\n<p>My client code is</p>\n\n<pre><code>import com.sun.xml.internal.messaging.saaj.util.ByteOutputStream\nimport org.msgpack.core.MessageBufferPacker\nimport org.msgpack.core.MessagePack\nimport org.msgpack.core.MessageUnpacker\nimport java.io.*\nimport java.net.Socket\nimport java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    fileClient(\"localhost\",1988,\"fruit.jpg\")\n}\n\nclass fileClient (host:String, port:Int, file:String){\n    var s : Socket ?= null\n    var out = ByteArrayOutputStream()\n    var msg : MessageBufferPacker = MessagePack.newDefaultBufferPacker()\n\n    init {\n        try {\n            s = Socket(host,port)\n            sendFile(file)\n        }catch (e:Exception){\n            e.printStackTrace()\n        }\n    }\n\n    @Throws(IOException::class)\n    fun sendFile(file: String) {\n        val dos = DataOutputStream(s!!.getOutputStream())\n        val buffer = ByteArray(4096)\n        val filebytes = File(file).readBytes()\n        var msgdata = ByteOutputStream()\n\n        msg.packString(file)\n        msg.packBinaryHeader(filebytes.size)\n        msg.writePayload(filebytes)\n\n        msg.close()\n\n\n\n        val data = msg.toByteArray()\n        val datasize = data.size\n        val ins = ByteArrayInputStream(data)\n        dos.writeInt(datasize)\n        while (ins.read(buffer) &gt; 0) {\n            dos.write(buffer)\n        }\n        dos.close()\n    }\n}\n</code></pre>\n\n<p>And my server code is </p>\n\n<pre><code>import com.sun.xml.internal.messaging.saaj.util.ByteOutputStream\nimport org.msgpack.core.MessagePack\nimport org.msgpack.core.MessageUnpacker\nimport java.awt.List\nimport java.io.*\nimport java.net.ServerSocket\nimport java.net.Socket\nimport java.text.SimpleDateFormat\nimport java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    var fs = FileServer(1988)\n    fs.start()\n}\n\nclass FileServer(port: Int) : Thread() {\n\n    private var ss: ServerSocket? = null\n\n    var fileRealName : String ?= null\n\n    init {\n        try {\n            ss = ServerSocket(port)\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n\n    }\n\n    override fun run() {\n        while (true) {\n            try {\n                val clientSock = ss!!.accept()\n                saveFile(clientSock)\n            } catch (e: IOException) {\n                e.printStackTrace()\n            }\n\n        }\n    }\n\n    @Throws(IOException::class)\n    private fun saveFile(clientSock: Socket) {\n        var msgList = ArrayList&lt;Any&gt;()\n        val dis = DataInputStream(clientSock.inputStream)\n        val msgdata = ByteOutputStream()\n        val buffer = ByteArray(4096)\n        var read = 0\n\n\n        while (true) {\n            val datalen = dis.readInt() // data length\n\n            if(datalen!= null &amp;&amp; datalen &gt;0){\n                var finaldata = ByteArray(datalen)\n                var process = 0;\n                while (process &lt;= datalen) {\n                    read = dis.read(buffer)\n                    if (read &lt; 0) {\n                        return\n                    }\n                    msgdata.write(buffer)\n                    process += 4096\n                }\n                println(process.toString() + \" \"+ datalen.toString())\n                var allData = msgdata.toByteArray().slice(0..datalen).toByteArray()\n                unpackByte(allData)\n\n            }\n\n        }\n\n        msgdata.close()\n        dis.close()\n    }\n\n    private fun unpackByte(data:ByteArray){\n\n        var unpacker : MessageUnpacker = MessagePack.newDefaultUnpacker(data)\n\n        var fileName = unpacker.unpackString().toString()\n\n        var filesize = unpacker.unpackBinaryHeader()\n        var buffer = ByteArray(filesize)\n        unpacker.readPayload(buffer)\n\n        var fos = FileOutputStream(fileName)\n        fos.write(buffer)\n        fos.close()\n\n        unpacker.close()\n\n    }\n\n}\n</code></pre>\n\n<p>And a file what I want to transfer is\n<a href=\"https://i.stack.imgur.com/3vg1A.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3vg1A.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>but after transfer, image on server is like this.\n<a href=\"https://i.stack.imgur.com/YYjjz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YYjjz.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>How can I transfer this file correctly?</p>\n"}, {"tags": ["kotlin", "kotlin-interop"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1471866253, "post_id": 39075117, "comment_id": 65504798, "body": "Just a sidenote, Kotlin has its own <code>File.walk</code> extension method."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1471880855, "post_id": 39075117, "comment_id": 65515409, "body": "You&#39;ve stumbled upon a bug in type inference <a href=\"https://youtrack.jetbrains.com/issue/KT-11259\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11259</a>"}, {"owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1471882617, "post_id": 39075117, "comment_id": 65516421, "body": "@Ilya Thanks for the link - great that there&#39;s already a ticket."}], "answers": [{"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1471880753, "post_id": 39075422, "comment_id": 65515337, "body": "<code>MutableList&lt;in T&gt;</code> is rarely a result one expects to get from <code>collect</code>. Second workaround is ok."}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 0, "last_activity_date": 1471856884, "creation_date": 1471856884, "answer_id": 39075422, "question_id": 39075117, "link": "https://stackoverflow.com/questions/39075117/java-lambda-type-inference-not-working-as-expected-in-kotlin/39075422#39075422", "title": "Java lambda type inference not working as expected in Kotlin", "body": "<p>I've found two ways to make it work without explicitly specifying generic type in both places.</p>\n\n<p>Either you can specify full type of variable with <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow\">generic covariance</a> </p>\n\n<pre><code>val folders: MutableList&lt;in String&gt; = Files.walk(Paths.get(args[0]))\n        .filter { it.toFile().isDirectory }\n        .map { it.toAbsolutePath().toString() }\n        .collect(Collectors.toList())\n</code></pre>\n\n<p>or you can simply let Kotlin do its type inference for variable (not generic parameter of method)</p>\n\n<pre><code>val folders2 = Files.walk(Paths.get(args[0]))\n        .filter { it.toFile().isDirectory }\n        .map { it.toAbsolutePath().toString() }\n        .collect(Collectors.toList&lt;String&gt;())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1471880982, "post_id": 39082675, "comment_id": 65515499, "body": "I&#39;d like to add that <code>Stream&lt;T&gt;.toList()</code> is already in the standard library of coming Kotlin 1.1 <a href=\"https://github.com/JetBrains/kotlin/blob/1.1-M1/libraries/stdlib/jre8/src/kotlin/streams/Streams.kt#L35\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/blob/1.1-M1/libraries/stdlib/jre&zwnj;&#8203;8/&hellip;</a>"}, {"owner": {"reputation": 248, "user_id": 3116100, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/k97z7.gif?s=128&g=1", "display_name": "SWAppDev", "link": "https://stackoverflow.com/users/3116100/swappdev"}, "edited": false, "score": 0, "creation_date": 1496696488, "post_id": 39082675, "comment_id": 75756169, "body": "Hi, when i&#39;m using the File(path).walk() method, the list contains only the name of the Directory from path, but not the files inside this directory. Any idea ?"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 3, "last_activity_date": 1471877551, "last_edit_date": 1495541822, "creation_date": 1471877551, "answer_id": 39082675, "question_id": 39075117, "link": "https://stackoverflow.com/questions/39075117/java-lambda-type-inference-not-working-as-expected-in-kotlin/39082675#39082675", "title": "Java lambda type inference not working as expected in Kotlin", "body": "<blockquote>\n  <p>Why does this piece of Java code not compile in Kotlin without the explicit type parameter in <code>Collectors.toList&lt;String&gt;()</code>?</p>\n</blockquote>\n\n<p>This looks like a compiler bug to me. I recommend creating an issue in <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">Kotlin (KT) | YouTrack</a>.</p>\n\n<blockquote>\n  <p>Is there a more idiomatic way to do this?</p>\n</blockquote>\n\n<p>Yes. As <a href=\"https://stackoverflow.com/users/615306/kirill-rakhman\">Kirill Rakhman</a> <a href=\"https://stackoverflow.com/questions/39075117/java-lambda-type-inference-not-working-as-expected-in-kotlin#comment65504798_39075117\">comments</a>, \"Kotlin has its own <code>File.walk</code> extension method.\" e.g.:</p>\n\n<pre><code>val folders: List&lt;String&gt; = File(args[0]).walk()\n        .filter(File::isDirectory)\n        .map(File::getAbsolutePath)\n        .toList()\n</code></pre>\n\n<p>If you prefer using Java 8 streams then checkout <a href=\"https://github.com/Kotlin/kotlinx.support\" rel=\"nofollow noreferrer\">Kotlin/kotlinx.support: Extension and top-level functions to use JDK7/JDK8 features in Kotlin 1.0</a>. It defines a <code>Stream&lt;T&gt;.toList()</code> function:</p>\n\n<pre><code>val folders: List&lt;String&gt; = Files.walk(Paths.get(args[0]))\n        .filter { it.toFile().isDirectory }\n        .map { it.toAbsolutePath().toString() }\n        .toList()\n</code></pre>\n"}], "owner": {"reputation": 10611, "user_id": 366299, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0e8e3739ae9c55898c284aaf5ba164ba?s=128&d=identicon&r=PG", "display_name": "atamanroman", "link": "https://stackoverflow.com/users/366299/atamanroman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1471877551, "creation_date": 1471856061, "question_id": 39075117, "link": "https://stackoverflow.com/questions/39075117/java-lambda-type-inference-not-working-as-expected-in-kotlin", "title": "Java lambda type inference not working as expected in Kotlin", "body": "<p>Why does this piece of Java code not compile in Kotlin without the explicit type parameter in <code>Collectors.toList&lt;String&gt;()</code>? Is there a more idiomatic way to do this?</p>\n\n<pre><code>// works\nList&lt;String&gt; folders = Files.walk(Paths.get(args[0]))\n   \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.filter(it -&gt; it.toFile().isDirectory())\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.map(it -&gt; it.toAbsolutePath().toString())\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.collect(Collectors.toList());\n\n// does not compile - resulting type is `MutableList&lt;in String!&gt;..List&lt;Any?&gt;?` which is not compatible to `List&lt;String&gt;`\nval folders: List&lt;String&gt; = Files.walk(Paths.get(args[0]))\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.filter { it.toFile().isDirectory }\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.map { it.toAbsolutePath().toString() }\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.collect(Collectors.toList())\n\n// compiles\nval folders: List&lt;String&gt; = Files.walk(Paths.get(args[0]))\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.filter { it.toFile().isDirectory }\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.map { it.toAbsolutePath().toString() }\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0.collect(Collectors.toList&lt;String&gt;())\n</code></pre>\n"}, {"tags": ["android", "functional-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 1, "creation_date": 1471797064, "post_id": 39066389, "comment_id": 65481270, "body": "OK. I wasn&#39;t really expecting to be able to do so directly. I wondered whether there&#39;s a more idiomatic way (not necessarily using <code>map</code> -- I&#39;ve updated the question to clarify)."}, {"owner": {"reputation": 667, "user_id": 3329708, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rH4LC.png?s=128&g=1", "display_name": "Master Disaster", "link": "https://stackoverflow.com/users/3329708/master-disaster"}, "reply_to_user": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1471797358, "post_id": 39066389, "comment_id": 65481359, "body": "It doesn&#39;t matter that you used <code>map</code>. You can&#39;t do that in Kotlin."}], "tags": [], "owner": {"reputation": 667, "user_id": 3329708, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rH4LC.png?s=128&g=1", "display_name": "Master Disaster", "link": "https://stackoverflow.com/users/3329708/master-disaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1471796832, "creation_date": 1471796832, "answer_id": 39066389, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/39066389#39066389", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>Your first suggestion is correct. You can't map cursor. </p>\n"}, {"comments": [{"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1471804893, "post_id": 39066437, "comment_id": 65483436, "body": "Anko looks useful. However, it doesn&#39;t seem to have a function that can send the cursor object to my existing <code>getStringFromCursor</code> function. It only sends an array or map of column values. As I&#39;m hoping to convert my app to Kotlin gradually, that&#39;s a problem. (The source shows me how to write a suitable extension function, though, so thanks for that.)"}, {"owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "reply_to_user": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1471806787, "post_id": 39066437, "comment_id": 65484005, "body": "I don&#39;t know how your <code>getStringFromCursor</code> looks like, but quite possibly it can be implemented as: <code>cursor.parseList { it[&quot;column_name_with_string&quot;] } </code> or <code>val COLUMN_INDEX = 2</code> <code>cursor.parseList { it[COLUMN_INDEX] } </code>"}, {"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1471807245, "post_id": 39066437, "comment_id": 65484131, "body": "Yes, the Anko way looks pretty nice, but in this case I&#39;m rewriting test code and I&#39;d like to test an existing function (which takes a cursor and returns a string for that record). Anko hides the cursor object, which means that I can&#39;t pass it to the existing function: It means I&#39;d have to rewrite both things."}, {"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1471855893, "post_id": 39066437, "comment_id": 65497969, "body": "Actually, I think what was confusing me was that <code>parseList</code> takes a parser object not a function. I could do the following instead, which uses the cursor object from the enclosing scope, and (wastefully) ignores the column array created for each row: <code>c.asSequence().map { getStringFromCursor(c) }</code>"}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 4, "last_activity_date": 1471797150, "creation_date": 1471797150, "answer_id": 39066437, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/39066437#39066437", "title": "Kotlin on Android: map a cursor to a list", "body": "<p><code>Cursor</code>s are meant to be lazy so there is no obvious <code>map</code>. However <a href=\"http://github.com/Kotlin/anko\" rel=\"nofollow\">Anko</a> (ANdroid KOtlin by JetBrains) does have an extension method to help you with mapping <code>Cursor</code>.</p>\n\n<p>The method is called <code>Cursor.parseList(parser)</code>. <a href=\"https://github.com/Kotlin/anko/blob/701bb6dd76830d9c24cf6578df750a9f3427b603/anko/library/static/sqlite/src/SqlParsers.kt\" rel=\"nofollow\">Here</a> you can find full implementation of it. Usage should be straight-forward. And <a href=\"https://github.com/Kotlin/anko/blob/master/doc/SQLITE.md#parsing-query-result\" rel=\"nofollow\">here</a> are some official docs on sqlite and parsing cursors with anko.</p>\n"}, {"comments": [{"owner": {"reputation": 778, "user_id": 746529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73341c7ebe8bb09b128f4833ea25f986?s=128&d=identicon&r=PG", "display_name": "ddmytrenko", "link": "https://stackoverflow.com/users/746529/ddmytrenko"}, "edited": false, "score": 7, "creation_date": 1507384976, "post_id": 39067259, "comment_id": 80192932, "body": "Hm, and what about the first item? I think this one will be better: <code>fun Cursor.asSequence(): Sequence&lt;Cursor&gt; = generateSequence(seed = takeIf { it.moveToFirst() }) { takeIf { it.moveToNext() } }</code>"}, {"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "reply_to_user": {"reputation": 778, "user_id": 746529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73341c7ebe8bb09b128f4833ea25f986?s=128&d=identicon&r=PG", "display_name": "ddmytrenko", "link": "https://stackoverflow.com/users/746529/ddmytrenko"}, "edited": false, "score": 0, "creation_date": 1507403916, "post_id": 39067259, "comment_id": 80198860, "body": "A fresh cursor is positioned before the first record, so the first c.moveToNext() will move to the first record."}], "tags": [], "owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "is_accepted": true, "score": 20, "last_activity_date": 1565259310, "last_edit_date": 1565259310, "creation_date": 1471802459, "answer_id": 39067259, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/39067259#39067259", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>This is what I went with in the end, using <code>kotlin.sequences.generateSequence</code>...</p>\n\n<pre><code>val list = generateSequence { if (c.moveToNext()) c else null }\n        .map { getStringFromCursor(it) }\n        .toList()\n</code></pre>\n\n<p>My first attempt was a little shorter:</p>\n\n<pre><code>val list = (1 .. c.count).map {\n    c.moveToNext()\n    getStringFromCursor(c)\n}\n</code></pre>\n\n<p>Both versions rely on the cursor initially being positioned before the first record (as a new cursor is). The second would throw if that wasn't the case, while the first would return a shorter list.</p>\n"}, {"tags": [], "owner": {"reputation": 1169, "user_id": 4765832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQ9lD.jpg?s=128&g=1", "display_name": "Rafols", "link": "https://stackoverflow.com/users/4765832/rafols"}, "is_accepted": false, "score": 2, "last_activity_date": 1531820994, "creation_date": 1531820994, "answer_id": 51378276, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/51378276#51378276", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>You can use this extension:</p>\n\n<pre><code>fun &lt;T&gt; Cursor.toArrayList(block: (Cursor) -&gt; T) : ArrayList&lt;T&gt; {\n    return arrayListOf&lt;T&gt;().also { list -&gt;\n        if (moveToFirst()) {\n            do {\n                list.add(block.invoke(this))\n            } while (moveToNext())\n        }\n    }\n}\n</code></pre>\n\n<p>and use it:</p>\n\n<pre><code>val list = cursor.toArrayList { getStringFromCursor(it) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 0, "last_activity_date": 1536935138, "last_edit_date": 1536935138, "creation_date": 1536934721, "answer_id": 52333883, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/52333883#52333883", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>Similar to Rafols I created a small function to solve that problem, because I didn't like converting from an Array to an Object with Anko. Advantages of my solution: It closes the cursor automatically, it is <code>inline</code> therefore it has less performance impact and you can use the column names in your <code>parseRow</code> function.</p>\n\n<pre><code>private inline fun &lt;T&gt; getObjectListFromCursor(cursor: Cursor, parseRow: (Cursor) -&gt; T): List&lt;T&gt; {\n        return cursor.run {\n            mutableListOf&lt;T&gt;().also { list -&gt;\n                if (moveToFirst()) {\n                    do {\n                        list.add(parseRow(this))\n                    } while (moveToNext())\n                }\n                close()\n            }\n        }\n    }\n</code></pre>\n\n<p>you call it like this:</p>\n\n<pre><code>val list = getObjectListFromCursor(c, this::getStringFromCursor)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2748, "user_id": 2563009, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/P7bfG.png?s=128&g=1", "display_name": "Thuy Trinh", "link": "https://stackoverflow.com/users/2563009/thuy-trinh"}, "is_accepted": false, "score": 2, "last_activity_date": 1544736270, "creation_date": 1544736270, "answer_id": 53770290, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/53770290#53770290", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>You can write your own <code>map()</code> which checks against <code>isClosed()</code> and safely close the <code>Cursor</code> after iterating all over its rows like below:</p>\n\n<pre><code>fun &lt;T&gt; Cursor.map(f: (Cursor) -&gt; T): List&lt;T&gt; {\n  val items = mutableListOf&lt;T&gt;()\n  use {\n    while (!it.isClosed &amp;&amp; it.moveToNext()) {\n      items += f(it)\n    }\n  }\n  return items.toList()\n}\n</code></pre>\n\n<p>Sample usage:</p>\n\n<pre><code>val contacts = cursor.map { it.toContact() }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1810, "user_id": 898457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8EOSo.jpg?s=128&g=1", "display_name": "Alex Semeniuk", "link": "https://stackoverflow.com/users/898457/alex-semeniuk"}, "edited": false, "score": 1, "creation_date": 1567755990, "post_id": 57708349, "comment_id": 102066188, "body": "Using <code>count</code> is generally discouraged. Depending on specific DB configuration, you may not know the exact count in advance or the real count might be much larger than you get (due to caching). The safest way is to use the result of <code>moveToNext()</code> method to determine whether you have reached the end."}], "tags": [], "owner": {"reputation": 2662, "user_id": 3886459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed94b9c64c9abb7a0c0ea126b63782f?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Beimcik", "link": "https://stackoverflow.com/users/3886459/maciej-beimcik"}, "is_accepted": false, "score": 1, "last_activity_date": 1567075056, "creation_date": 1567075056, "answer_id": 57708349, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/57708349#57708349", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>Just another way to look at it</p>\n\n<pre><code>cursor.moveToFirst()\nval list = generateSequence {\n    cursor.moveToNext()\n    getStringFromCursor(cursor)\n}.take(cursor.count).toList()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1610010482, "post_id": 65609091, "comment_id": 115999532, "body": "&quot;In particular, can it be done in a single assignment of a read-only list?&quot; Your answer doesn&#39;t address this, and is more complicated than the auto-converted code."}, {"owner": {"reputation": 243, "user_id": 3542190, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001300969542/picture?type=large", "display_name": "Mehtab", "link": "https://stackoverflow.com/users/3542190/mehtab"}, "reply_to_user": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "edited": false, "score": 0, "creation_date": 1610449660, "post_id": 65609091, "comment_id": 116130650, "body": "I was stuck over the same issue but I haven&#39;t looked at the &quot;single assignment of a read-only list&quot; so this answer not related to you but this solved my problem so I posted it here it might help someone because I searched a lot and didn&#39;t found any solution."}], "tags": [], "owner": {"reputation": 243, "user_id": 3542190, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100001300969542/picture?type=large", "display_name": "Mehtab", "link": "https://stackoverflow.com/users/3542190/mehtab"}, "is_accepted": false, "score": -1, "last_activity_date": 1610008845, "creation_date": 1610008845, "answer_id": 65609091, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list/65609091#65609091", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>Hope this may help others.</p>\n<pre><code>        var list = ArrayList&lt;HashMap&lt;String, String&gt;&gt;()\n\n        if (c != null)\n        {\n          c.moveToFirst()\n          do\n          {\n            val temp = HashMap&lt;String, String&gt;()\n            temp.put(&quot;id&quot;, c.getString(0))\n            temp.put(&quot;body&quot;, c.getString(1))\n            temp.put(&quot;address&quot;, c.getString(2))\n            list.add(temp)\n          }\n          while (c.moveToNext())\n        }\n        \n</code></pre>\n"}], "owner": {"reputation": 11617, "user_id": 44615, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66a939e1811361ef6cadd460e913bae3?s=128&d=identicon&r=PG", "display_name": "Martin Stone", "link": "https://stackoverflow.com/users/44615/martin-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6750, "favorite_count": 0, "accepted_answer_id": 39067259, "answer_count": 8, "score": 12, "last_activity_date": 1610008845, "creation_date": 1471796118, "last_edit_date": 1471815518, "question_id": 39066267, "link": "https://stackoverflow.com/questions/39066267/kotlin-on-android-map-a-cursor-to-a-list", "title": "Kotlin on Android: map a cursor to a list", "body": "<p>In Kotlin, What's the best way to iterate through an Android Cursor object and put the results into a list?</p>\n\n<p>My auto-converted Java:</p>\n\n<pre><code>val list = ArrayList&lt;String&gt;()\nwhile (c.moveToNext()) {\n    list.add(getStringFromCursor(c))\n}\n</code></pre>\n\n<p>Is there a more idiomatic way? In particular, can it be done in a single assignment of a read-only list? E.g....</p>\n\n<pre><code>val list = /*mystery*/.map(getStringFromCursor)\n</code></pre>\n\n<p>... or some other arrangement, where the list is assigned fully-formed.</p>\n"}, {"tags": ["java", "jackson", "kotlin", "json-deserialization"], "owner": {"reputation": 703, "user_id": 878272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b8067d9e4077656e7d9e98a594d2f19e?s=128&d=identicon&r=PG", "display_name": "THX1138", "link": "https://stackoverflow.com/users/878272/thx1138"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1471847557, "creation_date": 1471765420, "last_edit_date": 1471847557, "question_id": 39061976, "link": "https://stackoverflow.com/questions/39061976/wrapping-all-standard-and-custom-jackson-deserializers-within-a-universal-proper", "title": "Wrapping all Standard and Custom Jackson Deserializers within a Universal Property Deserializer", "body": "<p>I'm using Jackson 2.8 and looking to wrap all standard/custom deserializers in a standard wrapping deserialize in order to do some post processing on each deserialized value instance of every property. To accomplish this, I subclassed a <code>BeanDeserializerModifier</code> in order to pass the base <code>JsonDeserializer</code> and the appropriate <code>JavaType</code> for the given property type to a subclass of <code>StdJsonDeserializer</code> which then calls that base deserializer and performs various operations on the resulting value instance. </p>\n\n<p>During deserialization I get the following error:</p>\n\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of com.lindisfarne.MundaneDataClass: no suitable constructor found, can not deserialize from Object value (missing default constructor or creator, or perhaps need to add/enable type information?)\n</code></pre>\n\n<p>Without the <code>BeanDeserializerModifier</code>, the operation would, of course, work just fine -so clearly I am getting an incorrect or incomplete deserializer. How can I get the correct deserializer for the given type?</p>\n\n<p>Full Kotlin code to reproduce issue below:</p>\n\n<pre><code>package com.lindisfarne\n\nimport com.fasterxml.jackson.core.JsonParser\nimport com.fasterxml.jackson.databind.*\nimport com.fasterxml.jackson.databind.deser.BeanDeserializerModifier\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer\nimport com.fasterxml.jackson.module.kotlin.KotlinModule\nimport com.fasterxml.jackson.module.kotlin.readValue\n\n\nclass ReferencingBeanModifier() : BeanDeserializerModifier() {\n\n    override fun modifyDeserializer(config: DeserializationConfig?, beanDesc: BeanDescription?, deserializer: JsonDeserializer&lt;*&gt;?): JsonDeserializer&lt;*&gt; {\n\n        val javaType = beanDesc?.type\n        return WrappingDeserializer(deserializer = deserializer, javaType = javaType)\n\n    }\n\n}\n\nclass WrappingDeserializer(val deserializer :JsonDeserializer&lt;*&gt;?, val javaType: JavaType?) : StdDeserializer&lt;Any&gt;(javaType) {\n\n    override fun deserialize(jsonParser: JsonParser?, deserializationContext: DeserializationContext?): Any? {\n\n        val instance = deserializer?.deserialize(jsonParser,deserializationContext)\n        println(instance)\n\n        //do more stuff\n\n        return instance\n    }\n\n\n}\n\ndata class MundaneDataClass(\n        val trivialBoolean: Boolean = true,\n        val borningInt:Int = 1,\n        val meaninglessString:String = \"yes\"\n)\n\nfun massiveFailure() : Unit {\n\n    val mapper = ObjectMapper()\n\n    with (mapper) {\n        registerModules(\n                KotlinModule().setDeserializerModifier(ReferencingBeanModifier())\n        )\n        disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n    }\n\n    val mdc = MundaneDataClass()\n    val dataJson = mapper.writeValueAsString(mdc)\n    val mdc2 = mapper.readValue&lt;MundaneDataClass&gt;(dataJson)\n\n}\n</code></pre>\n"}, {"tags": ["c#", ".net", "kotlin", "covariance"], "comments": [{"owner": {"reputation": 62092, "user_id": 3538012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dcc3c1ad5e4ae4d79ba377020978d107?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Duniho", "link": "https://stackoverflow.com/users/3538012/peter-duniho"}, "edited": false, "score": 0, "creation_date": 1471764821, "post_id": 39061831, "comment_id": 65472867, "body": "Your question is way too broad and conflates a number of different topics. On the first, regarding the constructor, classes aren&#39;t variant, interfaces are. And a constructor isn&#39;t part of an interface. You can violate variance in the class itself however you like; it doesn&#39;t matter because the only place you can <i>use</i> the variance is when treating the type via the interface."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 62092, "user_id": 3538012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dcc3c1ad5e4ae4d79ba377020978d107?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Duniho", "link": "https://stackoverflow.com/users/3538012/peter-duniho"}, "edited": false, "score": 1, "creation_date": 1471764977, "post_id": 39061831, "comment_id": 65472903, "body": "@PeterDuniho Thank you. Do you suggest I break down the question and post as multiple questions?"}, {"owner": {"reputation": 62092, "user_id": 3538012, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dcc3c1ad5e4ae4d79ba377020978d107?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Duniho", "link": "https://stackoverflow.com/users/3538012/peter-duniho"}, "edited": false, "score": 2, "creation_date": 1471765229, "post_id": 39061831, "comment_id": 65472951, "body": "Yes, I do think that would be better. Though, I predict the answer to your #2 question is &quot;you can&#39;t do that&quot; (because you can&#39;t), and your #3 question is just plain off-topic (it&#39;s asking for a recommendation for some external resource)."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 1, "last_activity_date": 1471777118, "creation_date": 1471777118, "answer_id": 39063435, "question_id": 39061831, "link": "https://stackoverflow.com/questions/39061831/can-a-covariant-type-parameter-be-in-an-input-position-in-the-constructor/39063435#39063435", "title": "Can a covariant type parameter be in an input position in the constructor?", "body": "<p>All types that are shipped with Kotlin are described in its <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"nofollow\">API reference</a>, in particular the <code>kotlin</code> package: </p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/\" rel=\"nofollow\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/</a> </p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 1, "closed_date": 1471785726, "accepted_answer_id": 39063435, "answer_count": 1, "score": -1, "last_activity_date": 1471777118, "creation_date": 1471764179, "last_edit_date": 1495541311, "question_id": 39061831, "link": "https://stackoverflow.com/questions/39061831/can-a-covariant-type-parameter-be-in-an-input-position-in-the-constructor", "closed_reason": "Needs more focus", "title": "Can a covariant type parameter be in an input position in the constructor?", "body": "<p>In <a href=\"https://stackoverflow.com/a/36753782/303685\">this answer</a>, <a href=\"https://stackoverflow.com/users/170842/michael\">Michael</a> suggests that the generic type parameter be made co-variant in order to allow the creation of an empty node.</p>\n\n<p>I get that the generic type parameter is in all output positions since all the properties of the <code>Tree&lt;T&gt;</code> and its sub-types are read-only (<code>val</code>'s).</p>\n\n<p>But it <em>does</em> have the type parameter in an input position in the constructor.</p>\n\n<p>I thought that that code wouldn't work in C# so I tried it out and, to my surprise, it worked just fine.</p>\n\n<pre><code>// See this: https://stackoverflow.com/questions/36753579/algebraic-data-types-in-kotlin\n// Short url: https://stackoverflow.com/a/36753782/303685\ninterface ITree&lt;out T&gt; { }\n\nclass Tree&lt;T&gt;: ITree&lt;T&gt; { }\n\nsealed class Node&lt;T&gt; : Tree&lt;T&gt;\n{\n  private readonly T _left;\n  private readonly T _right;\n\n  public Node(T left, T right)\n  {\n    _left = left;\n    _right = right;\n   }\n\n   public T Left { get { return _left; } }\n   public T Right { get { return _right; } }\n }\n\nclass Program\n{\n  static void CovarianceTest1()\n  {\n     ITree&lt;object&gt; tree = new Node&lt;string&gt;(\"Hello\", \"World!\");\n  }\n}\n</code></pre>\n\n<p>I realize now that in doing this exercise, I learnt something new about variance.</p>\n\n<p><strong>So, my first question is:</strong></p>\n\n<p><em>Are co-variant type parameters allowed in input positions in constructors? In what other places are type parameters allowed to disregard their variance qualifiers?</em></p>\n\n<p>Another thing I learnt about variance is that the variant generic type parameter may not even appear in the variant interface declaration as seen in the example below.</p>\n\n<pre><code>interface ITree&lt;out T&gt; { }\n</code></pre>\n\n<p>You'll see that the <code>ITree&lt;out T&gt;</code> interface does not have <code>T</code> in either input or output positions. This also came as a shock to me.</p>\n\n<p><strong>My second question is:</strong></p>\n\n<p><em>And the other question I have is, what is the C# equivalent of the <code>Nothing</code> type in Kotlin? The answer says that <code>Nothing</code> is the most sub-type that cannot further be derived. It is the exact opposite of <code>Any</code> (or the most base type in other languages).</em></p>\n\n<p>To emulate that code in C#, it didn't make sense to have this:</p>\n\n<pre><code>class Empty : Tree&lt;null&gt; { }\n</code></pre>\n\n<p>Because that's just illegal C# code and <code>null</code> also doesn't seem analogous to <code>Nothing</code>.</p>\n\n<p>So, I had to fake a dummy like so to imitate the <code>Empty</code> class declaration.</p>\n\n<pre><code>sealed class Dummy { }\n\nsealed class Empty : Tree&lt;Dummy&gt;\n{\n  private static Empty _empty = null;\n  private static object syncLock = new object();\n  private Empty() { }\n  public Empty Instance\n  {\n    get\n    {\n    if (_empty == null)\n    {\n      lock (syncLock)\n      {\n        if (_empty == null)\n        {\n          _empty = new Empty();\n         }\n        }\n       }\n\n       return _empty;\n      }\n   }\n}\n</code></pre>\n\n<p><strong>My third and final question is:</strong></p>\n\n<p><em>Therefore, my final question is, is there a place that contains an exhaustive list of all the types available in Kotlin along with their descriptions? Because even though the <a href=\"https://kotlinlang.org/docs/reference/basic-types.html\" rel=\"nofollow noreferrer\">Basic Types page</a> lists most of the common ones, it seems not to be an exhaustive list. The types not listed there are all sprinkled over <a href=\"https://kotlinlang.org/docs/reference/\" rel=\"nofollow noreferrer\">the documentation</a>. Like in the instance above, they just appear with a mention on a page here or there.</em></p>\n"}, {"tags": ["java", "android", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1471745392, "post_id": 39059602, "comment_id": 65469979, "body": "Seeing as the build process is mostly sequential, I&#39;m not entirely sure that &quot;pulling out&quot; smaller modules would be beneficial other than potential re-use in other projects."}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1471745664, "post_id": 39059602, "comment_id": 65470016, "body": "the build process can be parallel. The advantage is that if you change a piece of code at the bottom of the dependencies, then the other modules shouldn&#39;t need to be rebuilt, but rather just have their outputs merged into the final build."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1471746259, "post_id": 39059602, "comment_id": 65470113, "body": "If those modules don&#39;t need rebuilt, then that seems to answer your question, no? The process would be faster"}, {"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1471746753, "post_id": 39059602, "comment_id": 65470191, "body": "1. I&#39;m not certain how smart the android plugin is, but theoretically it shouldn&#39;t be rebuilt, and 2. I have no idea how expensive merging the sources from multiple builds together would be. Again, I tried this several years back, and I found multiple modules to be slower."}], "answers": [{"comments": [{"owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "edited": false, "score": 0, "creation_date": 1475115311, "post_id": 39435964, "comment_id": 66816304, "body": "I appreciate your thorough and well thought out answer!"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1473596796, "last_edit_date": 1473596796, "creation_date": 1473596027, "answer_id": 39435964, "question_id": 39059602, "link": "https://stackoverflow.com/questions/39059602/many-small-modules-or-few-large-modules-for-best-build-performance/39435964#39435964", "title": "Many small modules, or few large modules for best build performance?", "body": "<p>Both for Gradle and for Kotlin there have been large recent gains in compilation performance for an overall build.  Including lowering the overhead of multiple modules in a build.</p>\n\n<p>You can see some examples of these increases in this recent article:  <a href=\"https://medium.com/keepsafe-engineering/kotlin-vs-java-compilation-speed-e6c174b39b5d\" rel=\"nofollow\">Kotlin vs. Java Compilation Speeds</a></p>\n\n<p>The overhead between multiple modules is reduced by a combination of Gradle's configuration step for modules being order of magnitudes faster, and by keeping more in memory so that it does not have to be reloaded on each compilation run, and not compiling things that fine-grained dependency checking considers not needing to be recompiled.</p>\n\n<p>Here are tips:</p>\n\n<ul>\n<li>make sure Gradle daemon is enabled (is by default now, so unless you turned it off, all good)</li>\n<li>upgrade to Kotlin 1.0.3 (and keep an eye out for 1.0.4 release soon)</li>\n<li>enable <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#incremental-compilation\" rel=\"nofollow\">incremental Kotlin compilation</a>:\n\n<blockquote>\n  <p>To enable incremental compilation for Gradle, you need to set the kotlin.incremental property to true (for example, by adding the line kotlin.incremental=true to the gradle.properties file in the root directory of your project).</p>\n</blockquote></li>\n<li>use Android studio 2.1 or newer and <a href=\"https://medium.com/google-developers/faster-android-studio-builds-with-dex-in-process-5988ed8aa37e\" rel=\"nofollow\">enable DEX in Process</a>\n\n<blockquote>\n  <p>Android Studio 2.1 enables a new feature: Dex In Process, that can dramatically increase the speed of full clean builds as well as improving Instant Run performance.</p>\n</blockquote></li>\n<li>be sure that any tasks you use support incremental running in Gradle, some don't and can slow down your build times (for example Dokka task runs no matter what changed), you can disable tasks that you don't need all the time using <code>-x&lt;task&gt;</code> parameter to Gradle.  </li>\n</ul>\n\n<p>Now whether it is faster for multi-module builds or single module builds, I find now that the overhead of modules that haven't changed is negligible.  And for those that have, is the normal cost of compilation.</p>\n\n<p>Beware that incremental compilation doesn't always work between Android builds in Gradle due to <a href=\"https://discuss.gradle.org/t/since-3-0-classpath-order-of-android-project-isnt-consistent/19435/4\" rel=\"nofollow\">Android plugin for Gradle changing the classpath ordering between builds</a>.  Although this tends to be consistent between builds there is a chance that if it recalculates the classpath it will be a different order and cause a new full build.  But this would be a problem whether you are single or multiple module building.</p>\n\n<p>Overall answers to your question probably differ radically across projects, hardware, different configurations, and people's perceptions and even misuse and misconfiguration of builds.  Given the improvements mentioned above you have to decide to take the time to test the current state for your actual project -- and see for yourself!</p>\n"}], "owner": {"reputation": 11933, "user_id": 471744, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/GDzVT.jpg?s=128&g=1", "display_name": "spierce7", "link": "https://stackoverflow.com/users/471744/spierce7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 4, "answer_count": 1, "score": 7, "last_activity_date": 1473596796, "creation_date": 1471736005, "last_edit_date": 1471742893, "question_id": 39059602, "link": "https://stackoverflow.com/questions/39059602/many-small-modules-or-few-large-modules-for-best-build-performance", "title": "Many small modules, or few large modules for best build performance?", "body": "<p>A few years ago, when first adopting gradle for Android (before Gradle 2.0), I found that there was some overhead to using and depending upon a module, so I've stayed away from splitting my project into smaller modules, and instead have created very large modules. After trying out some other build systems (like Buck for instance), performance is gained by splitting your code into multiple small modules. Some of the modern programming languages like Kotlin even have visibility modifiers specifically built around the concept of splitting your code into modules.</p>\n\n<p>We're currently at Gradle 2.14.1 (almost 3.0), and for the past several releases, they've quoted massive performance gains. With the changes to Gradle / the Android plugin the past few years, does it now produce faster builds to split your code into smaller modules, or to use fewer large modules?</p>\n"}, {"tags": ["gradle", "kotlin", "checkstyle"], "answers": [{"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1471736269, "creation_date": 1471736269, "answer_id": 39059622, "question_id": 39058620, "link": "https://stackoverflow.com/questions/39058620/treewalker-checks-not-working-with-kotlin-gradle/39059622#39059622", "title": "TreeWalker checks not working with Kotlin/Gradle?", "body": "<p>I can't find any information that it <em>does</em> work with Kotlin, so it would be reasonable to assume that it doesn't, especially taking into account that it's a tool that automates the process of checking <em>Java</em> code.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3210547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jKqmW.png?s=128&g=1", "display_name": "Sieber", "link": "https://stackoverflow.com/users/3210547/sieber"}, "edited": false, "score": 0, "creation_date": 1472383261, "post_id": 39154232, "comment_id": 65721986, "body": "Thanks for the pointer, I found in the documentation that I could force to check the *.kt files anyway but as you already mentionned the Java lexer did not like that at all.Some checks did work tho, but they drowned in hundreds of Java syntax notices &#175;\\_(\u30c4)_/&#175;"}], "tags": [], "owner": {"reputation": 9111, "user_id": 4647853, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/jp9Xr.jpg?s=128&g=1", "display_name": "Michal Kordas", "link": "https://stackoverflow.com/users/4647853/michal-kordas"}, "is_accepted": true, "score": 2, "last_activity_date": 1472156935, "creation_date": 1472156935, "answer_id": 39154232, "question_id": 39058620, "link": "https://stackoverflow.com/questions/39058620/treewalker-checks-not-working-with-kotlin-gradle/39154232#39154232", "title": "TreeWalker checks not working with Kotlin/Gradle?", "body": "<p>From <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/TreeWalker.java#L99\" rel=\"nofollow\">the source code</a> it is clear that <code>TreeWalker</code> activates only on files with <code>.java</code> extension:</p>\n\n<pre><code>    public TreeWalker() {\n        setFileExtensions(\"java\");\n    }\n</code></pre>\n\n<p>Moreover, it uses <a href=\"https://github.com/checkstyle/checkstyle/blob/master/src/main/java/com/puppycrawl/tools/checkstyle/TreeWalker.java#L53\" rel=\"nofollow\">Java lexer</a> underneath, so it won't work for any other language.</p>\n\n<p>As you've already noticed, all other checks are fine to use with any file/language.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1506338634, "last_edit_date": 1506338634, "creation_date": 1506338171, "answer_id": 46403896, "question_id": 39058620, "link": "https://stackoverflow.com/questions/39058620/treewalker-checks-not-working-with-kotlin-gradle/46403896#46403896", "title": "TreeWalker checks not working with Kotlin/Gradle?", "body": "<p>Checkstyle does not support Kotlin.</p>\n\n<p>As an alternative, the IntelliJ IDEA Kotlin 1.1.50+ plugin supports checking the Kotlin code style against the settings configured for the project <a href=\"https://blog.jetbrains.com/kotlin/2017/09/kotlin-1-1-50-is-out/\" rel=\"nofollow noreferrer\">(announced here)</a>. </p>\n\n<p>Currently this is only an IDE feature, but there's a work-in-progress Gradle plugin with the same functionality (not available yet).</p>\n\n<p><a href=\"https://i.stack.imgur.com/QoGXz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QoGXz.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 25, "user_id": 3210547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jKqmW.png?s=128&g=1", "display_name": "Sieber", "link": "https://stackoverflow.com/users/3210547/sieber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 39154232, "answer_count": 3, "score": 2, "last_activity_date": 1506338634, "creation_date": 1471726471, "question_id": 39058620, "link": "https://stackoverflow.com/questions/39058620/treewalker-checks-not-working-with-kotlin-gradle", "title": "TreeWalker checks not working with Kotlin/Gradle?", "body": "<p>I want to use <a href=\"http://checkstyle.sourceforge.net/checks.html\" rel=\"nofollow\">CheckStyle (7.1)</a> (older versions have the same problem) for a Kotlin program running with Gradle (2.14.1).</p>\n\n<p>The normal modules/checks (ex <code>NewlineAtEndOfFile</code>, <code>FileTabCharacter</code>, ...) work like a charm, but none of the submodules of <code>TreeWalker</code> (ex <code>AvoidStarImport</code>) do.</p>\n\n<p>The <code>gradle test</code> finishes <code>BUILD SUCCESSFUL</code> (and I'm 200% sure there should be style errors), and there are xx files but 0 errors in the <code>build/reports/checkstyle/main.html</code> file.</p>\n\n<p>Does TreeWalker not work with Kotlin? I can't find any information about this :/</p>\n\n<p>The configuration in the <code>build.gradle</code> file:</p>\n\n<pre><code>...\n\napply plugin: 'checkstyle'\n\n...\n\ncheckstyle {\n    toolVersion = \"7.1\"\n    configFile = new File(rootDir, \"checkstyle.xml\")\n    checkstyleMain.source = \"src/main/kotlin\"\n    checkstyleMain.ignoreFailures = false\n    checkstyleMain.showViolations = true\n}\n\n...\n</code></pre>\n"}, {"tags": ["javafx", "rx-java", "kotlin", "backpressure", "rx-kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1471817990, "post_id": 39061873, "comment_id": 65487146, "body": "This feels closer to the solution, but still getting a delay before any emissions happen..."}, {"owner": {"reputation": 10442, "user_id": 942224, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/4d2Mj.png?s=128&g=1", "display_name": "Sanket Kachhela", "link": "https://stackoverflow.com/users/942224/sanket-kachhela"}, "reply_to_user": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 1, "creation_date": 1471825200, "post_id": 39061873, "comment_id": 65488325, "body": "Nice :) now it seems you have found solution .!! As you have answered."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 1, "creation_date": 1471837252, "post_id": 39061873, "comment_id": 65490442, "body": "Thanks for your help though. It got me started, and I decided to tackle learning backpressure for the first time tonight."}], "tags": [], "owner": {"reputation": 10442, "user_id": 942224, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/4d2Mj.png?s=128&g=1", "display_name": "Sanket Kachhela", "link": "https://stackoverflow.com/users/942224/sanket-kachhela"}, "is_accepted": false, "score": 0, "last_activity_date": 1471780787, "last_edit_date": 1471780787, "creation_date": 1471764567, "answer_id": 39061873, "question_id": 39057409, "link": "https://stackoverflow.com/questions/39057409/rxjava-backpressuring-keyboard-inputs/39061873#39061873", "title": "RxJava - Backpressuring keyboard inputs?", "body": "<p>You can use <a href=\"http://reactivex.io/documentation/operators/sample.html\" rel=\"nofollow\">throttleLast</a> instead of denounce. </p>\n\n<p>throttleLast will emit the most recent items emitted by an Observable within periodic time intervals</p>\n\n<p>throttleLast o/p console </p>\n\n<pre><code>H\nHel\nHello\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "is_accepted": true, "score": 0, "last_activity_date": 1471821229, "creation_date": 1471821229, "answer_id": 39069635, "question_id": 39057409, "link": "https://stackoverflow.com/questions/39057409/rxjava-backpressuring-keyboard-inputs/39069635#39069635", "title": "RxJava - Backpressuring keyboard inputs?", "body": "<p>Got it! I figured out that I actually don't want <code>buffer()</code>, but rather a <code>switchMap()</code> and a <code>scan()</code> inside of it. I use a multicast to drive both the timer reset emission pushed into <code>switchMap()</code>, and the <code>scan()</code> which will infinitely concatenate typed characters until the <code>switchMap()</code> kills it for resetting.</p>\n\n<pre><code>val burstyMulticast = events(KeyEvent.KEY_TYPED).publish().refCount().map { it.character }\n\nburstyMulticast.throttleLast(1000, TimeUnit.MILLISECONDS).startWith(\"\")\n        .switchMap {\n            burstyMulticast.scan { x,y -&gt; x + y }\n        }.subscribe { println(it) }\n</code></pre>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 39069635, "answer_count": 2, "score": 0, "last_activity_date": 1471837364, "creation_date": 1471717527, "last_edit_date": 1471837364, "question_id": 39057409, "link": "https://stackoverflow.com/questions/39057409/rxjava-backpressuring-keyboard-inputs", "title": "RxJava - Backpressuring keyboard inputs?", "body": "<p>Here's a fun RxJava problem. </p>\n\n<p>I want to use RxJava backpressure operators to quickly lookup a typed input while each character is being typed, much like Google does on its search page. I went through the <a href=\"https://github.com/ReactiveX/RxJava/wiki/Backpressure\" rel=\"nofollow\">Backpressure</a> documentation and I came up with this (I am using RxJavaFX/RxKotlinFX to leverage JavaFX). </p>\n\n<pre><code>val myControl: Node = ...\nval burstyMulticast = myControl.events(KeyEvent.KEY_TYPED).publish().refCount()\nval burstyDebounced = burstyMulticast.debounce(200, TimeUnit.MILLISECONDS)\nval burstyBuffered = burstyMulticast.buffer(burstyDebounced)\n\nburstyBuffered\n        .flatMap { it.toObservable().map { it.character }.reduce(\"\") { x,y -&gt; x + y } }\n        .subscribe { println(it) }\n</code></pre>\n\n<p>This works great. If I type \"Hello\" against the control it will emit the <code>String</code> \"Hello\" after 200 ms of no typing. But if I want this to truly be more responsive, I should actually have some sort of rolling accumulation for each keystroke input.  Then my console output should really look like this:</p>\n\n<pre><code>H\nHe\nHel\nHell\nHello\n</code></pre>\n\n<p>Those should be all my emissions when I type the word \"Hello\", and the 200ms defines how much time should elapse before the accumulation resets. How do I do this?</p>\n"}, {"tags": ["kotlin", "self-documenting-code"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 7, "last_activity_date": 1471660503, "creation_date": 1471660503, "answer_id": 39049920, "question_id": 39049330, "link": "https://stackoverflow.com/questions/39049330/does-kotlin-have-method-call-labels/39049920#39049920", "title": "Does Kotlin have method-CALL labels?", "body": "<p>As far as I know, there's no compiler option to force this syntax, but you can still use it in your code, see the docs: <a href=\"https://kotlinlang.org/docs/reference/functions.html#named-arguments\">Named arguments</a>.</p>\n\n<p>To say it short, the syntax for your function is</p>\n\n<pre><code>drawCircle(inRect = myRect, antialiased = false)\n</code></pre>\n\n<p>You can even change function arguments order in a call using named arguments.</p>\n\n<pre><code>drawCircle(antialiased = false, inRect = myRect)\n</code></pre>\n\n<p>The limitations are:</p>\n\n<ul>\n<li><p>You cannot call Java methods with this syntax because Java bytecode does not always preserve parameter names;</p></li>\n<li><p>Mixing positioned (unnamed) and named arguments is limited: all the named arguments should go after the positioned ones:</p>\n\n<pre><code>fun f(x: Int, y: Int, z: Int) = 0\n\nf(x = 0, y = 0, z = 0) // OK\nf(0, y = 0, z = 0) // OK\nf(0, z = 0, y = 0) // OK\nf(x = 0, 0, 0) // Error\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 39049920, "answer_count": 1, "score": 2, "last_activity_date": 1471671304, "creation_date": 1471652756, "last_edit_date": 1471671304, "question_id": 39049330, "link": "https://stackoverflow.com/questions/39049330/does-kotlin-have-method-call-labels", "title": "Does Kotlin have method-CALL labels?", "body": "<p>I'm moving from Swift to Kotlin, and loving it so far. However, I'm used to declaring methods like this (pretend the referenced methods exist and work):</p>\n\n<pre class=\"lang-Swift prettyprint-override\"><code>// Swift method declaration\nfunc drawCircle(inRect rect: CGRect, antialiased: Bool) {\n    super.antialiased = antialiased\n    super.drawCircle(inRect: rect)\n}\n</code></pre>\n\n<p>and calling them like this:</p>\n\n<pre class=\"lang-Swift prettyprint-override\"><code>drawCircle(inRect:myRect, antialiased: false)\n</code></pre>\n\n<p>which is beautifully self-documenting and reads like English. However, in Kotlin, a similar method like this:</p>\n\n<pre class=\"lang-Kotlin prettyprint-override\"><code>fun drawCircle(inRect: Rectangle, antialiased: Boolean) {\n    super.antialiased = antialiased\n    super.drawCircle(inRect)\n}\n</code></pre>\n\n<p>which already starts to sound odd using a variable named <code>inRect</code>. But then it gets worse when I call it:</p>\n\n<pre class=\"lang-Kotlin prettyprint-override\"><code>drawCircle(myRect, false)\n</code></pre>\n\n<p>and here we see the biggest problem: One can likely guess by reading this line alone that <code>myRect</code> is a rectangle in which the circle will be drawn. However, what is <code>true</code>? It could be antialiasing, yes, but it could also be whether to draw it opaquely, or some toggle about whether to draw it at all! Anyway, I could cite more reasons why Swift and Objective-C programmers love their labels with method calls, but I've made my point.</p>\n\n<p><strong>Is there any way to enable labels on method <em>call</em> in Kotlin?</strong></p>\n"}, {"tags": ["hibernate", "spring-boot", "kotlin", "spring-data-jpa"], "answers": [{"tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 0, "last_activity_date": 1471588320, "creation_date": 1471588320, "answer_id": 39032485, "question_id": 39031013, "link": "https://stackoverflow.com/questions/39031013/kotlin-orphanremoval-not-working/39032485#39032485", "title": "KOTLIN orphanRemoval not working", "body": "<p>There's a blog post that explains what might be the cause of such exception: <a href=\"http://www.onkarjoshi.com/blog/188/hibernateexception-a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance/\" rel=\"nofollow\">http://www.onkarjoshi.com/blog/188/hibernateexception-a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance/</a></p>\n\n<blockquote>\n  <p>You are setting a new collection via the setter thus leaving the original collection unreferenced by the Parent entity. This doesn\u2019t fly well with Hibernate and leaves it confused about what to do.</p>\n</blockquote>\n\n<p><code>books</code> is <code>var</code>, not <code>val</code> so I assume that in some place in your code, you are setting it to the desired value. Assuming the reasoning from the blog post is valid here, using <code>final</code> field of mutable type should be way to go, </p>\n\n<pre><code>val books: MutableList&lt;BOOK&gt; = mutableListOf()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 810, "user_id": 1537029, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zvYNG.jpg?s=128&g=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/1537029/kim"}, "is_accepted": true, "score": 0, "last_activity_date": 1473068623, "last_edit_date": 1473068623, "creation_date": 1473054834, "answer_id": 39324612, "question_id": 39031013, "link": "https://stackoverflow.com/questions/39031013/kotlin-orphanremoval-not-working/39324612#39324612", "title": "KOTLIN orphanRemoval not working", "body": "<pre><code>@OneToMany(cascade = arrayOf(CascadeType.ALL), orphanRemoval = true, fetch = FetchType.EAGER)\n@JoinColumn(name = \"categoryId\", nullable = false)\nvar books: MutableList&lt;BOOK&gt; = mutableListOf()\n    set(value) {\n        field.clear()\n        field.addAll(value)\n    }\n</code></pre>\n"}], "owner": {"reputation": 810, "user_id": 1537029, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zvYNG.jpg?s=128&g=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/1537029/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 39324612, "answer_count": 2, "score": 1, "last_activity_date": 1526715027, "creation_date": 1471580099, "last_edit_date": 1526715027, "question_id": 39031013, "link": "https://stackoverflow.com/questions/39031013/kotlin-orphanremoval-not-working", "title": "KOTLIN orphanRemoval not working", "body": "<p>Is any one having the similar issue of removing child records but fail to use orphanRemoval annotation ?</p>\n\n<p>Below is my code sample in Model Class constructor: </p>\n\n<pre><code>@OneToMany(orphanRemoval = true, cascade = arrayOf(CascadeType.ALL))\n@JoinColumn(name = \"categoryId\", nullable = false)\nvar books: List&lt;BOOK&gt; = emptyList()\n</code></pre>\n\n<p>The CRUD with the <strong><em>cascade = arrayOf(CascadeType.ALL)</em></strong> is work perfectly, but when adding <strong><em>orphanRemoval = true</em></strong> into \"ONE-TO-MANY\" annotation, it could not work any more and throw the exception as below: </p>\n\n<blockquote>\n  <p>org.hibernate.HibernateException: A collection with\n  cascade=\"all-delete-orphan\" was no longer referenced by the owning\n  entity instance:</p>\n</blockquote>\n\n<p>the purpose of adding orphanRemoval to remove the child record permanently from database. </p>\n"}, {"tags": ["android", "kotlin", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 2, "creation_date": 1471612101, "post_id": 39032307, "comment_id": 65429266, "body": "In addition to the explanation above I suggest adding an example using <code>validatorFunc: EditText.(showError: Boolean) -&gt; Boolean</code>. e.g.: <code>editText.setupTextChangeListener(EditText::validateEmailForm&zwnj;&#8203;at)</code>"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1471834295, "post_id": 39032307, "comment_id": 65489891, "body": "Love it absolutely!"}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": true, "score": 7, "last_activity_date": 1471587609, "creation_date": 1471587609, "answer_id": 39032307, "question_id": 39030260, "link": "https://stackoverflow.com/questions/39030260/can-i-send-extension-function-through-function-parameter/39032307#39032307", "title": "Can I send extension function through function parameter", "body": "<p><strong>Some theory</strong></p>\n\n<p>Signature of extension functions is bit more complicated than in may look at first. The extension needs to have some reference to object of this class to be able to act upon it.</p>\n\n<p>In fact the extension method </p>\n\n<pre><code>fun EditText.validateEmailFormat(showError: Boolean = true): Boolean\n</code></pre>\n\n<p>after decompiling to plain old java, looks like this:</p>\n\n<pre><code>public static final boolean validateEmailFormat(@NotNull EditText $receiver, boolean showError)\n</code></pre>\n\n<p>As it's (almost) impossible to change already-compiled Java class. So Kotlin (and quite possibly other languages that have concept of extension methods) uses static methods, with first parameter being receiver of extending class, to make it work.</p>\n\n<p><strong>Back to the business</strong></p>\n\n<p>Your <code>validateEmailFormat</code> is in fact of type <code>EditText.(Boolean) -&gt; Boolean</code> and at the same time is of type <code>(EditText, Boolean) -&gt; Boolean</code>. So you need to do either of two things:</p>\n\n<p>First you can make <code>EditText.setupTextChangeListener</code> accept <code>validatorFunc</code> as  <code>EditText.(Boolean) -&gt; Boolean</code> or <code>(EditText, Boolean) -&gt; Boolean</code> instead of <code>(Boolean) -&gt; Boolean</code>.</p>\n\n<p>Or you refrain from extending <code>EditText</code> in <code>fun EditText.validateEmailFormat(Boolean)</code> and make it plain Kotlin function, e.g. something like this <code>fun validateEmailFormat(String, Boolean)</code>.</p>\n\n<p>As you are extensively using extension functions, I assume the first option is correct solution for you.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 39032307, "answer_count": 1, "score": 4, "last_activity_date": 1471587609, "creation_date": 1471573970, "question_id": 39030260, "link": "https://stackoverflow.com/questions/39030260/can-i-send-extension-function-through-function-parameter", "title": "Can I send extension function through function parameter", "body": "<p>I have some extension functions function below.</p>\n\n<pre><code>fun EditText.setEmailValidationListener(): TextWatcher {\n    val textWatcher = object : TextWatcher {\n        override fun beforeTextChanged(text: CharSequence?, start: Int, count: Int, after: Int) { }\n        override fun onTextChanged(text: CharSequence?, start: Int, before: Int, count: Int) { }\n        override fun afterTextChanged(text: Editable?) { validateEmail() }\n\n        private fun validateEmail(): Boolean {\n            if (validateEmailFormat(showError = false)) {\n                getParentInputLayout()?.isErrorEnabled = false\n                return true\n            }\n            return false\n        }\n    }\n    addTextChangedListener(textWatcher)\n\n    return textWatcher\n\n}\n\nfun EditText.setPasswordValidationListener(): TextWatcher {\n    val textWatcher = object : TextWatcher {\n        override fun beforeTextChanged(text: CharSequence?, start: Int, count: Int, after: Int) { }\n        override fun onTextChanged(text: CharSequence?, start: Int, before: Int, count: Int) { }\n        override fun afterTextChanged(text: Editable?) { validateEmpty() }\n\n        private fun validatePasswordText(): Boolean {\n            if (validateEmptyText(showError = false)) {\n                getParentInputLayout()?.isErrorEnabled = false\n                return true\n            }\n            return false\n        }\n    }\n\n    addTextChangedListener(textWatcher)\n\n    return textWatcher\n}\n\nfun EditText.validateEmailFormat(showError: Boolean = true): Boolean \n{\n    // Do something checking the Email\n    return false\n}\n\nfun EditText.validatePasswordText(showError: Boolean = true): Boolean     \n{\n    // Do something checking the Password\n    return false\n}\n\nprivate fun EditText.getParentInputLayout(): TextInputLayout? {\n    if (parent is TextInputLayout) {\n        return parent as TextInputLayout\n    }\n    return null\n}\n</code></pre>\n\n<p>Both <code>setEmailValidationListener</code> and <code>setPasswordValidationListener</code> are identical, except for the validation function they use respectively i.e. <code>validateEmailFormat</code> and <code>validatePasswordFormat</code>. </p>\n\n<p>So I plan to refactor the two function common code into a common function as below</p>\n\n<pre><code>fun EditText.setupTextChangeListener(validatorFunc : (showError: Boolean) -&gt; Boolean): TextWatcher {\n    val textWatcher = object : TextWatcher {\n        override fun beforeTextChanged(text: CharSequence?, start: Int, count: Int, after: Int) { }\n        override fun onTextChanged(text: CharSequence?, start: Int, before: Int, count: Int) { }\n        override fun afterTextChanged(text: Editable?) { validateEmpty() }\n\n        private fun validateEmpty(): Boolean {\n            if (validatorFunc(false)) {\n                getParentInputLayout()?.isErrorEnabled = false\n                return true\n            }\n            return false\n        }\n    }\n\n    addTextChangedListener(textWatcher)\n\n    return textWatcher\n}\n</code></pre>\n\n<p>... where it basically just to send in <code>validationFunc</code> as parameter to it. </p>\n\n<p>However, I can't find any way of sending the <code>EditText.validateEmailFormat</code> and <code>EditText.validatePasswordFormat</code> into the <code>validationFunc</code> function parameter.</p>\n\n<p>How could I achieve that?</p>\n"}, {"tags": ["java", "chromium", "kotlin", "jxbrowser"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1471558368, "post_id": 39028025, "comment_id": 65407262, "body": "You might want to insert a line-break after the if conditionals in your first code block (I&#39;m not familiar with the syntax so I didn&#39;t want to somehow break the code). On my computer the code following the second if conditional can&#39;t be seen unless you scroll right, making it seem as though you want to <code>return true</code> if that conditional is true."}], "answers": [{"tags": [], "owner": {"reputation": 2295, "user_id": 459345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0379d2750938b3e1f4516df467022401?s=128&d=identicon&r=PG", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/459345/vladimir"}, "is_accepted": true, "score": 2, "last_activity_date": 1472465449, "creation_date": 1472465449, "answer_id": 39203700, "question_id": 39028025, "link": "https://stackoverflow.com/questions/39028025/jxbrowser-strategy-for-efficiently-retrieving-favicon/39203700#39203700", "title": "JxBrowser strategy for efficiently retrieving favicon", "body": "<p>Right now JxBrowser API doesn't provide functionality that allows downloading the <code>favicon.ico</code> file. I recommend that you use standard Java API and the approach with <code>http://&lt;domain&gt;/favicon.ico</code>. For example:</p>\n\n<pre><code>URL url = new URL(\"http://stackoverflow.com/favicon.ico\");\nInputStream in = new BufferedInputStream(url.openStream());\nOutputStream out = new BufferedOutputStream(new FileOutputStream(\"D:/favicon.ico\"));\nfor ( int i; (i = in.read()) != -1; ) {\n    out.write(i);\n}\nin.close();\nout.close();\n</code></pre>\n"}], "owner": {"reputation": 19032, "user_id": 153865, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9fa6f7a31b3eff530dd627927011ddf7?s=128&d=identicon&r=PG", "display_name": "Hassan Syed", "link": "https://stackoverflow.com/users/153865/hassan-syed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 1, "accepted_answer_id": 39203700, "answer_count": 1, "score": 3, "last_activity_date": 1472465449, "creation_date": 1471556921, "last_edit_date": 1471558242, "question_id": 39028025, "link": "https://stackoverflow.com/questions/39028025/jxbrowser-strategy-for-efficiently-retrieving-favicon", "title": "JxBrowser strategy for efficiently retrieving favicon", "body": "<p>As far as I can tell there is no infrastructure for favicons in JxBrowser. Shouldn't the favicon be a part of the title event ? I'm thinking my best bet is to just go for <code>http://&lt;domain&gt;/favicon.ico</code> but this is going to be so much redundant work (http client and caching mechanism). </p>\n\n<p>Is there any way I can use the JxBrowser to take care of this elegantly? </p>\n\n<p>I've tried two strategies for trying to reliably get a hold of the resources, it's not reliable enough though: </p>\n\n<p>Event based url acquisition (<code>ResourceType.FAVICON</code> is never seen): </p>\n\n<pre><code>browser.context.networkService.resourceHandler = object : ResourceHandler {\n    override fun canLoadResource(p0: ResourceParams?): Boolean {\n        if (p0!!.resourceType == ResourceType.FAVICON) println(p0!!.url)\n        if (p0!!.resourceType == ResourceType.IMAGE &amp;&amp; p0.url.contains(\"favicon\")) println(\"found favicon url: ${p0.url}\")\n        return true\n    }\n}\n</code></pre>\n\n<p>// xpath based approach</p>\n\n<pre><code>browser.addLoadListener(object : LoadListener {\n    override fun onDocumentLoadedInMainFrame(p0: LoadEvent) {\n        p0.inSwingThread {\n            val res = it.browser.document.findElements(By.xpath(\"//link[@rel=\\\"icon\\\" or @rel=\\\"shortcut icon\\\"]\"))\n            res.forEach {\n                println(\"----------\")\n                it.attributes.forEach { println(it.key + \" \" + it.value) }\n            }\n        }\n    }\n    // ...\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 1, "creation_date": 1471552421, "post_id": 39024716, "comment_id": 65405003, "body": "check: <a href=\"http://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\" title=\"in kotlin what is the idiomatic way to deal with nullable values referencing o\">stackoverflow.com/questions/34498562/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 7, "last_activity_date": 1471545271, "creation_date": 1471545271, "answer_id": 39025249, "question_id": 39024716, "link": "https://stackoverflow.com/questions/39024716/is-there-any-better-way-to-access-nullable-property/39025249#39025249", "title": "Is there any better way to access nullable property?", "body": "<p>Use the argument provided by <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html\"><code>let</code></a> which will be non-null:</p>\n\n<pre><code>sound.id?.let {\n    soundPool.play(it, 1F, 1F, 1, 0, 1F)\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sound.id?.let { id -&gt;\n    soundPool.play(id, 1F, 1F, 1, 0, 1F)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1471545383, "post_id": 39025260, "comment_id": 65401311, "body": "FYI: In this example, <code>it</code> is not a <i>receiver</i>. If it were then you would need to use <code>this</code> instead of <code>it</code>."}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 0, "last_activity_date": 1471546038, "last_edit_date": 1471546038, "creation_date": 1471545294, "answer_id": 39025260, "question_id": 39024716, "link": "https://stackoverflow.com/questions/39024716/is-there-any-better-way-to-access-nullable-property/39025260#39025260", "title": "Is there any better way to access nullable property?", "body": "<p><code>let{}</code> is the solution here.</p>\n\n<p>Just write it like this:</p>\n\n<pre><code>sound.id?.let {\n    soundPool.play(it, 1F, 1F, 1, 0, 1F)\n}\n</code></pre>\n\n<p>--edit--</p>\n\n<p><code>it</code> is an argument here that is of type <code>Int</code> (not <code>Int?</code>) - thanks @mfulton26 for pointing that out</p>\n"}], "owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 39025249, "answer_count": 2, "score": 0, "last_activity_date": 1471815870, "creation_date": 1471543183, "question_id": 39024716, "link": "https://stackoverflow.com/questions/39024716/is-there-any-better-way-to-access-nullable-property", "title": "Is there any better way to access nullable property?", "body": "<p>What is the best way to convert <strong>sound.id</strong> property from nullable to nonnulable and pass it as param of play method?</p>\n\n<pre><code>class Sound() {\nvar id: Int? = null\n}\n\nval sound = Sound()\n...\n//smarcat imposible becouse 'sound.id' is mutable property that\n//could have changed by this time\nif(sound.id != null)\n    soundPool.play(sound.id, 1F, 1F, 1, 0, 1F)\n\n//smarcat imposible becouse 'sound.id' is mutable property that\n//could have changed by this time\nsound.id?.let {\n    soundPool.play(sound.id, 1F, 1F, 1, 0, 1F)\n}\n</code></pre>\n"}, {"tags": ["oop", "interface", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1471544026, "post_id": 39024834, "comment_id": 65400610, "body": "Nice idea. You could also use reflection to list the component functions instead of creating nullable componentN methods."}, {"owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "edited": false, "score": 0, "creation_date": 1471552156, "post_id": 39024834, "comment_id": 65404857, "body": "This is a good idea, but what I was looking for was a way to get exhaustive <code>when</code>. E.g. providing functions of how to tell if an arbitrary type is &quot;empty&quot;. (<code>isBlank()</code> for Strings, <code>isEmpty()</code> for Collections and so on)\u2026"}], "tags": [], "owner": {"reputation": 2222, "user_id": 1574133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YypZZ.jpg?s=128&g=1", "display_name": "rafal", "link": "https://stackoverflow.com/users/1574133/rafal"}, "is_accepted": false, "score": 3, "last_activity_date": 1471543708, "creation_date": 1471543708, "answer_id": 39024834, "question_id": 39023950, "link": "https://stackoverflow.com/questions/39023950/union-types-extension-interfaces/39024834#39024834", "title": "Union types / extension interfaces", "body": "<p>It's kinda hacky but should work.\nEvery <code>data class</code> creates set of method per each constructor parameters. They're called <code>componentN()</code> (where <code>N</code> is number starting from <code>1</code> indicating constructor parameter).</p>\n\n<p>You can put such methods in your interface and make <code>data class</code> implicitly implement them. See example below:</p>\n\n<pre><code>data class Order(var consumer: String, var pdfs: List) : Form\n\ndata class SomethingElse(var str: String, var set: Set) : Form\n\ninterface Form {\n    val isEmpty: Boolean\n        get() = checkEmpty(component1(), component2())\n\n    fun  checkEmpty(vararg fields: T): Boolean {\n        for (f in fields) {\n            when (f) {\n                is Collection -> if (!f.isEmpty()) return false\n                is CharSequence -> if (!f.isBlank()) return false\n            }\n        }\n        return true;\n    }\n\n    fun component1(): Any? = null\n    fun component2(): Any? = null\n}\n</code></pre>\n\n<p>You can also add <code>fun component3(): Any? = null</code> etc... to handle cases with more that 2 fields in <code>data class</code> (e.g. <code>NullObject</code> pattern or handling <code>null</code>s directly in your <code>checkEmpty()</code> method.</p>\n\n<p>As I said, it's kinda hacky but maybe will work for you.</p>\n"}, {"comments": [{"owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "edited": false, "score": 0, "creation_date": 1471552230, "post_id": 39024986, "comment_id": 65404900, "body": "That way I lose a lot of null-safety in my code that uses these classes. I&#39;d have to remember to set <code>List</code>s to null when they&#39;re empty and so on\u2026"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1471544357, "creation_date": 1471544357, "answer_id": 39024986, "question_id": 39023950, "link": "https://stackoverflow.com/questions/39023950/union-types-extension-interfaces/39024986#39024986", "title": "Union types / extension interfaces", "body": "<p>You can use <code>null</code> to mean \"unspecified\":</p>\n\n<pre><code>data class Order(var consumer: String?, var pdfs: List&lt;URI&gt;?) : Form {\n    override val isEmpty: Boolean\n        get() = checkEmpty(consumer, pdfs)\n}\n\ndata class SomethingElse(var str: String?, var set: Set&lt;String&gt;?) : Form {\n    override val isEmpty: Boolean\n        get() = checkEmpty(str, set)\n}\n\ninterface Form {\n    val isEmpty: Boolean\n    fun &lt;T&gt; checkEmpty(vararg fields: T): Boolean = fields.all { field -&gt; field == null }\n}\n</code></pre>\n\n<p>The idea here is the same as that of an <code>Optional&lt;T&gt;</code> in Java but without the extra object, etc.</p>\n\n<p>You now have to worry about <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow\">null safety</a> but if your fields are meant to have a concept of absent/empty then this seems appropriate (<a href=\"https://github.com/google/guava/wiki/UsingAndAvoidingNullExplained\" rel=\"nofollow\">UsingAndAvoidingNullExplained \u00b7 google/guava Wiki</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "edited": false, "score": 0, "creation_date": 1471767334, "post_id": 39041857, "comment_id": 65473338, "body": "Still not entirely satisfied, cause it&#39;s very verbose, but I&#39;m going to accept this answer. Thanks."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 2, "last_activity_date": 1471618533, "last_edit_date": 1471618533, "creation_date": 1471617738, "answer_id": 39041857, "question_id": 39023950, "link": "https://stackoverflow.com/questions/39023950/union-types-extension-interfaces/39041857#39041857", "title": "Union types / extension interfaces", "body": "<p>If all you are doing is checking for <code>isEmpty</code>/<code>isBlank</code>/<code>isZero</code>/etc. then you probably don't need a generic <code>checkEmpty</code> function, etc.:</p>\n\n<pre><code>data class Order(var consumer: String, var pdfs: List&lt;URI&gt;) : Form {\n    override val isEmpty: Boolean\n        get() = consumer.isEmpty() &amp;&amp; pdfs.isEmpty()\n}\n\ndata class SomethingElse(var str: String, var set: Set&lt;String&gt;) : Form {\n    override val isEmpty: Boolean\n        get() = str.isEmpty() &amp;&amp; set.isEmpty()\n}\n\ninterface Form {\n    val isEmpty: Boolean\n}\n</code></pre>\n\n<p>However, if you are actually do something a bit more complex then based on your added clarification I believe that \"abstracting every property into some kind of <code>Field</code>-type\" is exactly what you want just don't make the <code>Field</code> instances part of each <code>data class</code> but instead create a list of them when needed:</p>\n\n\n\n<pre><code>data class Order(var consumer: String, var pdfs: List&lt;URI&gt;) : Form {\n    override val fields: List&lt;Field&lt;*&gt;&gt;\n        get() = listOf(consumer.toField(), pdfs.toField())\n}\n\ndata class SomethingElse(var str: String, var set: Set&lt;String&gt;) : Form {\n    override val fields: List&lt;Field&lt;*&gt;&gt;\n        get() = listOf(str.toField(), set.toField())\n}\n\ninterface Form {\n    val isEmpty: Boolean\n        get() = fields.all(Field&lt;*&gt;::isEmpty)\n\n    val fields: List&lt;Field&lt;*&gt;&gt;\n}\n\nfun String.toField(): Field&lt;String&gt; = StringField(this)\nfun &lt;C : Collection&lt;*&gt;&gt; C.toField(): Field&lt;C&gt; = CollectionField(this)\n\ninterface Field&lt;out T&gt; {\n    val value: T\n    val isEmpty: Boolean\n}\n\ndata class StringField(override val value: String) : Field&lt;String&gt; {\n    override val isEmpty: Boolean\n        get() = value.isEmpty()\n}\n\ndata class CollectionField&lt;out C : Collection&lt;*&gt;&gt;(override val value: C) : Field&lt;C&gt; {\n    override val isEmpty: Boolean\n        get() = value.isEmpty()\n}\n</code></pre>\n\n<p>This gives you type-safety without changing your <code>data class</code> components, etc. and allows you to \"get exhaustive <code>when</code>\".</p>\n"}], "owner": {"reputation": 5494, "user_id": 342947, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a737f13056e480e90f1b8bb943bc3cb1?s=128&d=identicon&r=PG", "display_name": "Fabian Zeindl", "link": "https://stackoverflow.com/users/342947/fabian-zeindl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39041857, "answer_count": 3, "score": 3, "last_activity_date": 1471618533, "creation_date": 1471540392, "last_edit_date": 1471600605, "question_id": 39023950, "link": "https://stackoverflow.com/questions/39023950/union-types-extension-interfaces", "title": "Union types / extension interfaces", "body": "<p>I have several <code>data class</code> with fields, which are used in forms and need  them to have a method return <code>true</code> if any of the fields has been filled.</p>\n\n<p>I don't want to rewrite this for all the classes, so I'm doing it like this at the moment:</p>\n\n<pre><code>data class Order(var consumer: String, var pdfs: List&lt;URI&gt;): Form  {\n\n    override val isEmpty(): Boolean\n         get() = checkEmpty(consumer, pdfs)\n}\n\ndata class SomethingElse(var str: String, var set: Set&lt;String&gt;): Form  {\n\n    override val isEmpty(): Boolean\n         get() = checkEmpty(str, set)\n}\n\n\ninterface Form {\n    val isEmpty: Boolean\n\n    fun &lt;T&gt; checkEmpty(vararg fields: T): Boolean {\n        for (f in fields) {\n            when (f) {\n                is Collection&lt;*&gt; -&gt; if (!f.isEmpty()) return false\n                is CharSequence -&gt; if (!f.isBlank()) return false\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n\n<p>This is obviously not very pretty nor type-safe. </p>\n\n<p>What's a more idiomatic way of doing this, without abstracting every property into some kind of <code>Field</code>-type?</p>\n\n<p><strong>Clarification:</strong> What I'm looking for is a way to get exhaustive <code>when</code>, for example by providing all the allowed types (<code>String</code>, <code>Int</code>, <code>List</code>, <code>Set</code>) and a function for each to tell if they're empty. Like an \"extension-interface\" with a method <code>isEmptyFormField</code>.</p>\n"}, {"tags": ["java", "c#", "generics", "kotlin", "type-erasure"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1471496421, "post_id": 39010222, "comment_id": 65372139, "body": "Java generic types aren&#39;t available at runtime. You have to pass them as parameters if the method needs to know them. And the <code>class.java</code> is a well-documented Kotlin compatibility construct."}, {"owner": {"reputation": 687, "user_id": 4943554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XX3gaqGzkLo/AAAAAAAAAAI/AAAAAAAABDw/867NkBm6ipM/photo.jpg?sz=128", "display_name": "Andreas Brunnet", "link": "https://stackoverflow.com/users/4943554/andreas-brunnet"}, "edited": false, "score": 0, "creation_date": 1471496460, "post_id": 39010222, "comment_id": 65372146, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4453349/what-is-the-class-object-java-lang-class\">what is the Class object (java.lang.Class)?</a>"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "reply_to_user": {"reputation": 687, "user_id": 4943554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XX3gaqGzkLo/AAAAAAAAAAI/AAAAAAAABDw/867NkBm6ipM/photo.jpg?sz=128", "display_name": "Andreas Brunnet", "link": "https://stackoverflow.com/users/4943554/andreas-brunnet"}, "edited": false, "score": 1, "creation_date": 1471496488, "post_id": 39010222, "comment_id": 65372152, "body": "@AndreasBrunnet Not a relevant duplicate; the question is about generic erasure."}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1471496714, "post_id": 39010222, "comment_id": 65372217, "body": "@chrylis Thank you. That answers my question about the need for the <code>Class&lt;T&gt;</code> parameter. What&#39;s <code>class.java</code>? I&#39;ve updated the question to include another snippet, this time in Kotlin."}, {"owner": {"reputation": 687, "user_id": 4943554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XX3gaqGzkLo/AAAAAAAAAAI/AAAAAAAABDw/867NkBm6ipM/photo.jpg?sz=128", "display_name": "Andreas Brunnet", "link": "https://stackoverflow.com/users/4943554/andreas-brunnet"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1471496763, "post_id": 39010222, "comment_id": 65372227, "body": "@chrylis So I should ignore his question? <b>What&#39;s class.java?</b>"}, {"owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "reply_to_user": {"reputation": 687, "user_id": 4943554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XX3gaqGzkLo/AAAAAAAAAAI/AAAAAAAABDw/867NkBm6ipM/photo.jpg?sz=128", "display_name": "Andreas Brunnet", "link": "https://stackoverflow.com/users/4943554/andreas-brunnet"}, "edited": false, "score": 0, "creation_date": 1471496917, "post_id": 39010222, "comment_id": 65372259, "body": "@AndreasBrunnet The question you linked to simply confirms my suspicion that the <code>Class</code> class in Java is the equivalent of the <code>System.Type</code> in the CLR. It doesn&#39;t answer the whole question."}], "answers": [{"tags": [], "owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "is_accepted": true, "score": 7, "last_activity_date": 1471496913, "creation_date": 1471496913, "answer_id": 39010378, "question_id": 39010222, "link": "https://stackoverflow.com/questions/39010222/could-you-please-explain-this-piece-of-code-in-terms-of-c-code/39010378#39010378", "title": "Could you please explain this piece of code in terms of C# code?", "body": "<p>Java has <em>generic type erasure</em>: The actual type <code>T</code> is not available to code at runtime. Since Gson needs to know what the target deserialization type is, passing the <code>Class&lt;T&gt;</code> explicitly identifies it.</p>\n\n<p>Kotlin, on the other hand, has a somewhat stronger type system than Java, and since the function there is inlined, the compiler knows what the generic type actually is (the <code>reified</code> keyword). The construct <code>T::class.java</code> tells the Kotlin compiler to determine what the appropriate type <code>T</code> is and then inline the class reference to <code>T</code>.</p>\n\n<p>This inline redefinition is essentially syntactic sugar for Kotlin, allowing Kotlin users to delegate the hardcoded specification of the destination type to the compiler's inference.</p>\n"}], "owner": {"reputation": 28755, "user_id": 303685, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uXNpf.jpg?s=128&g=1", "display_name": "Water Cooler v2", "link": "https://stackoverflow.com/users/303685/water-cooler-v2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 39010378, "answer_count": 1, "score": 5, "last_activity_date": 1471496913, "creation_date": 1471495855, "last_edit_date": 1471496601, "question_id": 39010222, "link": "https://stackoverflow.com/questions/39010222/could-you-please-explain-this-piece-of-code-in-terms-of-c-code", "title": "Could you please explain this piece of code in terms of C# code?", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/idioms.html#convenient-form-for-a-generic-function-that-requires-the-generic-type-information\">Kotlin documentation</a> page:</p>\n\n<pre><code>//  public final class Gson {\n//     ...\n//     public &lt;T&gt; T fromJson(JsonElement json, \n//                           Class&lt;T&gt; classOfT) \n//                           throws JsonSyntaxException {\n//     ...\n</code></pre>\n\n<p>In the code snippet above, I understand everything except that <code>Class&lt;T&gt;</code> thing. I assume it is the C# equivalent of the following:</p>\n\n<pre><code>public sealed class Gson\n{\n  public T FromJson&lt;T&gt;(JsonElement json, \n                       System.Type Type)\n  {\n  }\n}\n</code></pre>\n\n<p>And the client code would say something like:</p>\n\n<pre><code>var gson = new Gson();\nvar customer = gson.FromJson&lt;Customer&gt;(json, typeof(Customer));\n</code></pre>\n\n<p>But I can't be sure because that whole <code>System.Type</code> parameter seems redundant in the face of the generic type parameter <code>T</code> in the method definition.</p>\n\n<p>Also, at the same location on that page, what's that <code>class.java</code> in the following snippet?</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; Gson.fromJson(json): \n                T = this.fromJson(json, T::class.java)\n</code></pre>\n\n<p>I assume that the class <code>Class</code> in Java is similar to <code>System.Type</code> so if you wanted to say, <code>typeof(Customer)</code>, you'd say <code>Customer.class</code>? Is that correct?</p>\n\n<p>What's <code>class.java</code>?</p>\n"}]