[{"tags": ["android", "android-asynctask", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455736119, "post_id": 35464421, "comment_id": 58626694, "body": "The Kotlin library Kovenant has a very easy model for this, by using promises (simply <code>task { ... }</code>) and then combining them allows you to create a compound promise that can then continue when some or all complete.  <a href=\"http://kovenant.komponents.nl/\" rel=\"nofollow noreferrer\">kovenant.komponents.nl</a>  ... and it supports Android out of the box, only needing a special small addon if you want automatic callbacks on the UI thread.  <a href=\"http://kovenant.komponents.nl/addons/ui/\" rel=\"nofollow noreferrer\">kovenant.komponents.nl/addons/ui</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455736312, "post_id": 35464421, "comment_id": 58626805, "body": "Whatever answer is in stack overflow for Java doing the same, will work for Kotlin.  Therefore this question is a dupe if you aren&#39;t looking for something like a Kotlin library to replace the async tasks.  <a href=\"http://stackoverflow.com/questions/17418194/multiple-callback-waiting-in-android-java\" title=\"multiple callback waiting in android java\">stackoverflow.com/questions/17418194/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/25608795/android-how-to-detect-when-multiple-http-requests-complete\" title=\"android how to detect when multiple http requests complete\">stackoverflow.com/questions/25608795/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/16504352/running-multiple-services-at-one-time-in-android\" title=\"running multiple services at one time in android\">stackoverflow.com/questions/16504352/&hellip;</a> ... and others"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455736385, "post_id": 35464421, "comment_id": 58626871, "body": "more with this tag: <a href=\"http://stackoverflow.com/questions/tagged/android-asynctask\">stackoverflow.com/questions/tagged/android-asynctask</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455736532, "post_id": 35464421, "comment_id": 58626975, "body": "You can also just have them all in a list of the resulting <code>AsyncTask</code> objects and loop it calling <code>get()</code>, it&#39;ll pause on any not done and when it passes through them all, they all must be done."}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455737391, "post_id": 35465549, "comment_id": 58627525, "body": "It also doesn&#39;t indicate which thread is doing the final callback work, here a random thread from the async pool continues on to the next task, or maybe is the UI thread yes?  Not necessarily an error in the code, but something to consider which thread should continue onwards and which thread is actually making the call."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455737703, "post_id": 35465549, "comment_id": 58627749, "body": "Maybe CountDownLatch could be used.  Another answer in to similar question:  stackoverflow.com/a/17418772/3679676"}], "tags": [], "owner": {"reputation": 979, "user_id": 3742122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iSooQ.png?s=128&g=1", "display_name": "cherif", "link": "https://stackoverflow.com/users/3742122/cherif"}, "is_accepted": true, "score": 1, "last_activity_date": 1455736145, "creation_date": 1455736145, "answer_id": 35465549, "question_id": 35464421, "link": "https://stackoverflow.com/questions/35464421/android-wait-for-multiple-tasks-complete/35465549#35465549", "title": "Android: Wait for multiple tasks complete", "body": "<p>You can call a <code>synchronized</code> common method which count the number of <code>asyncTask</code> that already finished. Something like this:</p>\n\n<pre><code>private static final int NUMBER_ASYNCTASK = 4;\nprivate static int counter = 0;\n\npublic static synchronized void asyncTaskCompleted() {\n   counter++; \n    if(counter == NUMBER_ASYNCTASK)\n       //start new activity\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1455737898, "last_edit_date": 1455737898, "creation_date": 1455736648, "answer_id": 35465721, "question_id": 35464421, "link": "https://stackoverflow.com/questions/35464421/android-wait-for-multiple-tasks-complete/35465721#35465721", "title": "Android: Wait for multiple tasks complete", "body": "<p>I would use the <a href=\"http://kovenant.komponents.nl/\" rel=\"nofollow\">Kovenant</a> library instead, it has support on Android, is tiny, and makes this type of thing very easy using <a href=\"http://kovenant.komponents.nl/api/core_usage/#all\" rel=\"nofollow\">all()</a>, <a href=\"http://kovenant.komponents.nl/api/combine_usage/\" rel=\"nofollow\">combine()</a> or <a href=\"http://kovenant.komponents.nl/api/combine_usage/#and\" rel=\"nofollow\">and()</a>.  </p>\n\n<p>Kovenant is a Promise library for Kotlin.  And if you are moving to Kotlin it is a good chance to checkout things that make life easier. For callbacks on the UI thread, you can use the <a href=\"http://kovenant.komponents.nl/addons/ui/\" rel=\"nofollow\">UI Module</a>.  </p>\n\n<p>Then no matter if on Android or back-end JVM programming you can use the same library, the same semantics, and have an easier programming model.</p>\n"}], "owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3169, "favorite_count": 0, "closed_date": 1455970529, "accepted_answer_id": 35465549, "answer_count": 2, "score": 2, "last_activity_date": 1455737898, "creation_date": 1455732568, "last_edit_date": 1455736316, "question_id": 35464421, "link": "https://stackoverflow.com/questions/35464421/android-wait-for-multiple-tasks-complete", "closed_reason": "Duplicate", "title": "Android: Wait for multiple tasks complete", "body": "<p>I have 4 async tasks which load data from internet. In same time I show activity with animation, when tasks complete I need to start another activty with loaded data. </p>\n\n<p>My async methods on Kotlin (same as async tasks written on java)</p>\n\n<pre><code>private fun getArtistData(name: String) {\n    val getArtistDataAsync = object : AsyncTask&lt;String, Void, Artist&gt;() {\n\n        override fun doInBackground(vararg args: String?): Artist? {\n            Log.i(TAG, \"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            Caller.getInstance().cache = null\n            return Artist.getInfo(args[0], \"26cc2ebf6da38bc646733f661bfc6268\");\n        }\n\n        override fun onPostExecute(result: Artist?) {\n            super.onPostExecute(result)\n            Log.i(TAG, \"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0438\u0437 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            CommonUtilities.artistInstance = result as Artist;\n        }\n    }\n\n    val getTopTracksAsync = object : AsyncTask&lt;String,Void,ArrayList&lt;Track&gt;&gt;(){\n        override fun doInBackground(vararg args: String?): ArrayList&lt;Track&gt;? {\n            Log.i(TAG, \"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0441\u0435\u043d \u0432 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            Caller.getInstance().cache = null\n            return Artist.getTopTracks(args[0], \"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Track&gt;;\n        }\n\n        override fun onPostExecute(result: ArrayList&lt;Track&gt;?) {\n            super.onPostExecute(result)\n            Log.i(TAG, \"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0441\u0435\u043d \u0438\u0437 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            CommonUtilities.trackListInstance = result;\n        }\n    }\n\n    val getSimilarBandsAsync = object : AsyncTask&lt;String,Void,ArrayList&lt;Artist&gt;&gt;(){\n        override fun doInBackground(vararg args: String?): ArrayList&lt;Artist&gt;? {\n            Log.i(TAG, \"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u0433\u0440\u0443\u043f\u043f \u0432 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            Caller.getInstance().cache = null\n            return Artist.getSimilar(args[0], \"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Artist&gt;?\n        }\n\n        override fun onPostExecute(result: ArrayList&lt;Artist&gt;?) {\n            super.onPostExecute(result)\n            Log.i(TAG, \"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u0433\u0440\u0443\u043f\u043f \u0438\u0437 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            CommonUtilities.artistListInstance = result;\n        }\n    }\n\n    val getTopAlbumsAsync = object : AsyncTask&lt;String,Void, ArrayList&lt;Album&gt;&gt;(){\n        override fun doInBackground(vararg p0: String?): ArrayList&lt;Album&gt;? {\n            Log.i(TAG, \"\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043b\u044c\u0431\u043e\u043c\u043e\u0432 \u0432 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            Caller.getInstance().cache = null\n            return Artist.getTopAlbums(p0[0],\"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Album&gt;?;\n        }\n\n        override fun onPostExecute(result: ArrayList&lt;Album&gt;?) {\n            super.onPostExecute(result)\n            Log.i(TAG, \"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u043b\u044c\u0431\u043e\u043c\u043e\u0432 \u0438\u0437 AsyncTask \u0434\u043b\u044f $mArtistName\")\n            CommonUtilities.albumListInstance = result;\n        }\n    }\n</code></pre>\n\n<p>I trying to invoke my methods here:</p>\n\n<pre><code>val runAllTasks = object : AsyncTask&lt;Void,Void,Void&gt;(){\n        override fun doInBackground(vararg p0: Void?): Void? {\n            getArtistDataAsync.executeOnExecutor(AsyncTask.SERIAL_EXECUTOR, name)\n            getSimilarBandsAsync.executeOnExecutor(AsyncTask.SERIAL_EXECUTOR, name)\n            getTopTracksAsync.executeOnExecutor(AsyncTask.SERIAL_EXECUTOR, name)\n            getTopAlbumsAsync.executeOnExecutor(AsyncTask.SERIAL_EXECUTOR, name)\n            return null\n        }\n\n        override fun onPostExecute(result: Void?) {\n            super.onPostExecute(result)\n\n            startActivity(Intent(applicationContext, DetailsActivity::class.java))\n        }\n    }\n\n    runAllTasks.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR)\n</code></pre>\n"}, {"tags": ["mongodb", "jackson", "kotlin", "jongo", "jackson-modules"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455726370, "post_id": 35461960, "comment_id": 58620641, "body": "You don&#39;t include the call to Jackson object mapper, can you show that please."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455726431, "post_id": 35461960, "comment_id": 58620682, "body": "And note that your <code>_id</code> field is not the same as <code>id</code> no?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455726930, "post_id": 35461960, "comment_id": 58621037, "body": "Is there any way to report the JSON that mongodb is sending to Jackson for deserialization?  It can&#39;t be the JSON from the error message, so they must modify it slightly."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455726972, "post_id": 35461960, "comment_id": 58621067, "body": "Is the stack trace include Jackson, or is it MongoDb only?  Maybe the are doing some processing ahead of the Jackson module that is rejecting the class?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455727001, "post_id": 35461960, "comment_id": 58621092, "body": "Are you sure the MongoDB is using a <code>ObjectMapper</code> that has the Jackson-Kotlin module registered?  You might get this error otherwise."}, {"owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455727077, "post_id": 35461960, "comment_id": 58621142, "body": "It seems that this boils down to Kotlin version in this case and Jackson-Kotlin not being (completely) compatible with Kotlin 1.0.0. It seems that things work fine when I run my tests from Gradle that uses last RC version versus running tests from IDEA which uses the newly released 1.0.0."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455727285, "post_id": 35461960, "comment_id": 58621279, "body": "See notes about this in my updated answer below."}], "answers": [{"comments": [{"owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "edited": false, "score": 0, "creation_date": 1455728848, "post_id": 35462594, "comment_id": 58622311, "body": "The issue was that update of IDEA increased Kotlin version and tests run from IDE where run with Kotlin version that was mismatched form Jackson-Kotlin. Point number 1 in Jayson answer resolved the issue."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1455727515, "last_edit_date": 1455727515, "creation_date": 1455727143, "answer_id": 35462594, "question_id": 35461960, "link": "https://stackoverflow.com/questions/35461960/in-kotlin-why-jackson-fails-unmarshalling-non-annotated-object-in-some-cases-an/35462594#35462594", "title": "In Kotlin, why Jackson fails unmarshalling non-annotated object in some cases and not in others", "body": "<p>You would get this error if MongoDB is using an <code>ObjectMapper</code> that does not have the Jackson-Kotlin module registered into it.  Your <code>JsonProperty</code> annotations are basically doing the same as what the module does implicitly.  But if it is not present, you would receive about the same error message.  </p>\n\n<p>Things to look at:  </p>\n\n<ul>\n<li><p>You have compatible version of Jackson-Kotlin module that matches your version of the Kotlin code.  For RC 1050 or newer, you need the latest releases of Jackson module mentioned in the <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow\">README.MD file on GitHub</a>. </p>\n\n<blockquote>\n  <p>Older versions of the Jackson-Kotlin module are not compatible with Kotlin 1.0.0.  You must update or you will have silent failures (the module cannot recognize a Kotlin class, so ignores it).  Releases for Kotlin 1.0.0 will be available on Maven Central shortly.  In the meantime use the EAP repository:</p>\n\n<pre><code>maven {\n   url  \"http://dl.bintray.com/jaysonminard/kohesive\"\n}\n</code></pre>\n  \n  <p>For Kotlin 1.0.0, use one of:</p>\n  \n  <ul>\n  <li>release <code>2.7.1-1</code> (for Jackson <code>2.7.x</code>)</li>\n  <li>release <code>2.6.5-2</code> (for Jackson <code>2.6.x</code>)</li>\n  <li>release <code>2.5.5-2</code> (for Jackson <code>2.5.x</code>)</li>\n  </ul>\n  \n  <p>Later this will move back to Maven Central.</p>\n</blockquote></li>\n<li><p>what is the actual JSON being sent to Jackson</p></li>\n<li>is this error from MongoDB in the stacktrace, or is Jackson involved for sure (did it preprocess and determine an error before calling Jackson)?</li>\n<li>how is MongoDB getting its ObjectMapper and how did you try to configure that?</li>\n</ul>\n"}], "owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 0, "accepted_answer_id": 35462594, "answer_count": 1, "score": 1, "last_activity_date": 1455729170, "creation_date": 1455725432, "last_edit_date": 1455729170, "question_id": 35461960, "link": "https://stackoverflow.com/questions/35461960/in-kotlin-why-jackson-fails-unmarshalling-non-annotated-object-in-some-cases-an", "title": "In Kotlin, why Jackson fails unmarshalling non-annotated object in some cases and not in others", "body": "<p>I'm using Kotlin with Jongo to access MongoDB. Jongo uses Jackson to serialize/deserialize objects in order to save and read them from MongoDB. I use Jackson-Kotlin module to help serialize Kotlin data classes using constructors.</p>\n\n<p>Here's an example of a dataclass that serializes just fine:</p>\n\n<pre><code>data class Workflow (\n    @field:[MongoId MongoObjectId] @param:MongoId\n    var id: String? = null,\n\n    val name: String,\n    val states: Map&lt;String, State&gt;\n)\n</code></pre>\n\n<p>Here's an example of a similar class that fails to deserialize:</p>\n\n<pre><code>data class Session (\n    @field:[MongoObjectId MongoId] @param:MongoId\n    var id: String? = null,\n\n    var status: CallStatus,\n    var currentState: String,\n    var context: MutableMap&lt;String, Any?&gt;,\n    val events: MutableMap&lt;String, Event&gt;\n)\n</code></pre>\n\n<p>Following exception is thrown by Jongo because Jackson deserialization fails:</p>\n\n<pre><code>org.jongo.marshall.MarshallingException: Unable to unmarshall result to class example.model.Session from content { \"_id\" : { \"$oid\" : \"56c4976aceb2503bf3cd92c2\"} , \"status\" : \"Ongoing\" , \"currentState\" : \"Start\" , \"context\" : { } , \"events\" : { }}\n... bunch of stack trace entries ...\nCaused by: java.lang.IllegalArgumentException: Argument #1 of constructor [constructor for example.model.Session, annotations: [null]] has no property name annotation; must have name when multiple-parameter constructor annotated as Creator\n</code></pre>\n\n<p>It does work if I fully annotate the Session data class like this:</p>\n\n<pre><code>data class Session (\n    @field:[MongoObjectId MongoId] @param:MongoId\n    var id: String? = null,\n\n    @JsonProperty(\"status\")\n    var status: CallStatus,\n\n    @JsonProperty(\"currentState\")\n    var currentState: String,\n\n    @JsonProperty(\"context\")\n    var context: MutableMap&lt;String, Any?&gt;,\n\n    @JsonProperty(\"events\")\n    val events: MutableMap&lt;String, Event&gt;\n}\n</code></pre>\n\n<p>My question is, why does it work for Workflow? What's the subtle difference that makes unmarshalling fail for Session data class, when it's not fully annotated?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Difference was that I tested Workflow test case running it from Gradle, which used different version of Kotlin then the Session test case that I run from IDEA IDE. Update of IDEA's Kotlin plugin also updated Kotlin version that IDEA uses to run test cases, which I didn't notice. This resulted in mismatched versions of Kotlin and Jackson-Kotlin library. Accepted answer below pointed out what needs to be configured in order get things working again. </p>\n"}, {"tags": ["findbugs", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455739276, "post_id": 35461819, "comment_id": 58628789, "body": "That will only catch some Kotlin classes that are created by the compiler, not all.  Unless they have common package names, or different module output paths, this would be tough to do."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455776491, "post_id": 35461819, "comment_id": 58643123, "body": "For sure Source is better"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1455725073, "creation_date": 1455725073, "answer_id": 35461819, "question_id": 35461310, "link": "https://stackoverflow.com/questions/35461310/how-to-avoid-kotlin-files-with-findbugs/35461819#35461819", "title": "How to avoid kotlin files with Findbugs", "body": "<p>I think filter should help in many cases:</p>\n\n<pre><code>&lt;FindBugsFilter&gt;\n    &lt;Match&gt;\n        &lt;Class name=\"*Kt\"/&gt;\n    &lt;/Match&gt;\n&lt;/FindBugsFilter&gt;\n</code></pre>\n\n<p>I'm not sure that this filter is right, but you should got idea.</p>\n\n<p><a href=\"http://findbugs.sourceforge.net/manual/filter.html\" rel=\"nofollow\">Documentation.</a></p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 12, "last_activity_date": 1455797869, "last_edit_date": 1455797869, "creation_date": 1455739571, "answer_id": 35466679, "question_id": 35461310, "link": "https://stackoverflow.com/questions/35461310/how-to-avoid-kotlin-files-with-findbugs/35466679#35466679", "title": "How to avoid kotlin files with Findbugs", "body": "<p>Filter based on the <code>&lt;Source&gt;</code> filter type.</p>\n\n<blockquote>\n  <p>This element matches warnings associated with a particular source file. The name attribute is used to specify the exact or regex match pattern for the source file name.</p>\n</blockquote>\n\n\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;FindBugsFilter&gt;\n    &lt;Match&gt;\n        &lt;Source name=\"~.*\\.kt\"/&gt;\n    &lt;/Match&gt;\n&lt;/FindBugsFilter&gt;\n</code></pre>\n\n<p>See:  <a href=\"http://findbugs.sourceforge.net/manual/filter.html\" rel=\"noreferrer\">documentation for FindBugs filters</a>\nand  <a href=\"http://findbugs.sourceforge.net/manual/filter.html#d0e2197\" rel=\"noreferrer\">name matching details</a></p>\n"}], "owner": {"reputation": 3175, "user_id": 1277555, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71b4edb678001f55b47bdde0741a0ff5?s=128&d=identicon&r=PG", "display_name": "F&#225;bio Carballo", "link": "https://stackoverflow.com/users/1277555/f%c3%a1bio-carballo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1872, "favorite_count": 0, "accepted_answer_id": 35466679, "answer_count": 2, "score": 11, "last_activity_date": 1455797869, "creation_date": 1455723850, "question_id": 35461310, "link": "https://stackoverflow.com/questions/35461310/how-to-avoid-kotlin-files-with-findbugs", "title": "How to avoid kotlin files with Findbugs", "body": "<p>I'm integrating findbugs in a mixed java/kotlin project. However, as findbugs acts on the generated jar it is finding bugs related to classes generated through kotlin file.</p>\n\n<p>Is there any way to avoid checks on these classes?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 706, "user_id": 1708459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dVQTJ.jpg?s=128&g=1", "display_name": "Jagu", "link": "https://stackoverflow.com/users/1708459/jagu"}, "is_accepted": false, "score": 0, "last_activity_date": 1455721816, "creation_date": 1455721816, "answer_id": 35460455, "question_id": 35460253, "link": "https://stackoverflow.com/questions/35460253/why-public-class-cant-extend-private-class/35460455#35460455", "title": "Why public class can&#39;t extend private class?", "body": "<p><strong>only make it abstract class</strong></p>\n\n<p><em>Definition:</em>\nAn abstract class is a class that is declared abstract\u2014it may or may not include abstract methods. Abstract classes cannot be instantiated, but they can be subclassed.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 11, "last_activity_date": 1455723107, "creation_date": 1455723107, "answer_id": 35461004, "question_id": 35460253, "link": "https://stackoverflow.com/questions/35460253/why-public-class-cant-extend-private-class/35461004#35461004", "title": "Why public class can&#39;t extend private class?", "body": "<p>The class and its ancestors must <strong>all</strong> be accessible from the using class.  Otherwise it would be an violation when loading the ancestor class, not just calling its methods or using its functionality.  Kotlin is very clean and clear about this in all cases where accessibility is present.   </p>\n\n<p>Opening it up a little would allow things that could cause real JVM access violations later, like an <code>inline</code> function in the public class, inlined into another class, calling the private non accessible <em>something</em> of the ancestor.  There are many holes you aren't considering if you feel it is ok to do a mixed model of accessibility like this.  The matrix of considerations is larger than only the desire to hide some classes from instantiation.  </p>\n\n<p>With the class being abstract, it cannot be used directly other than as an ancestor, so you have some protection already.  If you want to block use as an  ancestor outside of your module, make its constructor <code>private</code> or <code>internal</code> and that will solve that problem:</p>\n\n<pre><code>abstract class BasicRepositoryImpl private constructor() { ... }\n</code></pre>\n\n<p>Now you have protected direct instantiation (<code>abstract</code>) or use as a base class (by using <code>abstract</code> and private constructors) so the last things to do is give it a good name like <code>AbstractBaseRepository</code> and people will by convention leave it alone.</p>\n\n<p>If you want to discuss <em>\"why\"</em> this is the design decision, or technical limitation, or protective rule ... then try the <a href=\"https://discuss.kotlinlang.org/\" rel=\"noreferrer\">discussion forums</a>, a feature or language change suggestion in <a href=\"https://youtrack.jetbrains.com\" rel=\"noreferrer\">YouTrack</a>.  But beware things are not as simple as they first appear to be.  These rules are there for reasons (<em>even if other languages dangerously allow</em>).</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2448, "favorite_count": 0, "accepted_answer_id": 35461004, "answer_count": 2, "score": 9, "last_activity_date": 1455723107, "creation_date": 1455721354, "last_edit_date": 1455722792, "question_id": 35460253, "link": "https://stackoverflow.com/questions/35460253/why-public-class-cant-extend-private-class", "title": "Why public class can&#39;t extend private class?", "body": "<p>I have a following class hierarchy:</p>\n\n<pre><code>interface Repository\n\n// This class contains some common stuff for LocalRepository and RemoteRepository. I'm never going to use this class outside this file, so I make it private\nprivate abstract  class BasicRepositoryImpl\n\n// these classes are designed to be instantiated in other files    \nclass LocalRepository : BasicRepositoryImpl(), Repository // error\n\nclass RemoteRepository : BasicRepositoryImpl(), Repository // error\n</code></pre>\n\n<p>But I get the following error: </p>\n\n<blockquote>\n  <p>Subclass effective visibility 'public' should be the same or less\n  permissive than its superclass effective visibility 'private'</p>\n</blockquote>\n\n<p>I don't want to use <code>BasicRepositoryImpl</code> anywhere else, so it's declared <code>private</code>, and I want to use <code>LocalRepository</code> and <code>RemoteRepository</code> in other files like this:</p>\n\n<pre><code>class Presenter(val repo: Repository)\n\nval p = Presenter(LocalRepository())\n</code></pre>\n\n<p>But that error prevents me to create such a hierarchy. Why? What's wrong with it?</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1455719453, "post_id": 35459317, "comment_id": 58615184, "body": "Because of the &#39;blinding highlight&#39;."}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1455719503, "post_id": 35459317, "comment_id": 58615228, "body": "shouldn&#39;t it be enough to just remove the <code>private var ...</code> lines? you already defined the fields in the constructor. you should also get rid of the second constructor by using an optional parameter"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455724479, "post_id": 35459803, "comment_id": 58619173, "body": "I think he still needs a default constructor @Lovis for his given framework, so not a choice he can make."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455725005, "post_id": 35459803, "comment_id": 58619609, "body": "you have the accepted answer, feel free to update it even if it takes ideas from the other answer.  Make your accepted the best possible."}], "tags": [], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "is_accepted": true, "score": 4, "last_activity_date": 1455784022, "last_edit_date": 1455784022, "creation_date": 1455720198, "answer_id": 35459803, "question_id": 35459317, "link": "https://stackoverflow.com/questions/35459317/what-is-the-correct-way-to-deal-with-fields-in-kotlin/35459803#35459803", "title": "What is the correct way to deal with fields in Kotlin?", "body": "<p>I'm assuming you want something like this:</p>\n\n<pre><code>class PaperDay (private var date: Date, \n                private var weather: Weather = Weather.SUNNY) : Day {\n    init {\n        this.date = truncate(date)\n    }\n\n    private fun truncateTimeFromDate(date1: Date): Date {\n        return date1\n    }\n}\n</code></pre>\n\n<p>You should try to use optional parameters (<code>var weather: Weather = Weather.SUNNY</code>) wherever you can, since it increases readability a lot.</p>\n\n<p>To avoid the (somewhat ugly) <code>init</code> block you can also pass only one of the two properties as a constructor parameter (thanks to Jayson Minard), and calculate the other property in it's declaration by using a \"normal\" paramter:</p>\n\n<pre><code>class PaperDay (dateWithTime: Date, \n                private val weather: Weather = Weather.SUNNY): Day {\n\n    private val date: Date = truncateTimeFromDate(dateWithTime)\n\n    ...\n}\n</code></pre>\n\n<p>Note that this is also using <code>val</code> instead of <code>var</code> since immutability is usually the better option.</p>\n\n<p>If you need to have the empty constructor as well, you can add this (although I don't think it's a good practice and it's an indicator for \"bad\" \ndesign:</p>\n\n<pre><code> constructor() : this(Date())\n</code></pre>\n\n<p>Alternatively, adding a default value for <em>all</em> parameters in the constructor will implicitly create an empty constructor as well.</p>\n\n<p>if you really want the nullability define your properties using <code>?</code>. E.g.:</p>\n\n<pre><code>class PaperDay (private var date: Date?, private var weather: Weather? = Weather.SUNNY)\n</code></pre>\n\n<p>you can then also change the other constructor to <code>constructor() : this(null)\n</code></p>\n\n<hr>\n\n<p>Additionally, it's IMHO also a good idea to add the <code>truncate...</code> method as an <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow\">extension function</a> for the Date class instead of heaving it in this class:</p>\n\n<pre><code>fun Date.truncateTimeFromDate() {\n  Calendar calendar = Calendar.getInstance()\n\n  calendar.setTime(this)\n\n  calendar.set(Calendar.HOUR_OF_DAY, 0)\n  calendar.set(Calendar.MINUTE, 0)\n  ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1455724117, "post_id": 35461202, "comment_id": 58618909, "body": "<code>private val date: Date = truncateTimeFromDate(dateWithTime)</code> didn&#39;t think about that. Cool! Also <i>&quot;default parameters for each constructor parameter also gives you a default () constructor&quot;</i> is pretty smart"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 1, "creation_date": 1455724766, "post_id": 35461202, "comment_id": 58619412, "body": "Kotlin has many nice things :-) , I updated this to have a custom setter to enforce the date truncation if set later."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1455724590, "last_edit_date": 1455724590, "creation_date": 1455723581, "answer_id": 35461202, "question_id": 35459317, "link": "https://stackoverflow.com/questions/35459317/what-is-the-correct-way-to-deal-with-fields-in-kotlin/35461202#35461202", "title": "What is the correct way to deal with fields in Kotlin?", "body": "<p>Similar to @Lovis but avoiding the use of <code>var</code> which should be a \"last resort\":</p>\n\n<pre><code>class PaperDay (dateWithTime: Date = Date(), private val weather: Weather = Weather.SUNNY): Day {\n    private val date: Date = truncateTimeFromDate(dateWithTime)\n\n    private fun truncateTimeFromDate(dateWithTime : Date) : Date {\n        ...\n    }\n}\n</code></pre>\n\n<p>In this version, the constructor has <em>one parameter</em> that is not a class property, and the other is a property.  Later in the class body, the property is declared and set to the truncated date.</p>\n\n<p>If you have a default value for each constructor parameter, Kotlin will automatically create a default constructor that uses those defaults.  No need to add it separately.</p>\n\n<p>If your framework must instantiate with default constructor and then set the values after the fact, you'll want to do something more like the following and go back to using <code>var</code>:</p>\n\n<pre><code>class PaperDay (dateWithTime: Date = Date(), private var weather: Weather = Weather.SUNNY): Day {\n    private var date: Date = truncateTimeFromDate(dateWithTime)\n       set(value) { field = truncateTimeFromDate(value) }\n\n    private fun truncateTimeFromDate(dateWithTime : Date) : Date {\n        return dateWithTime\n    }\n}\n</code></pre>\n\n<p>Now we have ensured we never have a invalid date being stored in the property by having a custom setter.</p>\n\n<p>If you want interoperability for all variations of the constructor available from Java, you can use the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#overloads-generation\" rel=\"nofollow\"><code>@JvmOverloads</code> annotation</a> on the constructor to generate other permutations of using default parameter values.</p>\n\n<p>And as @Lovis points out, move the <code>truncateTimeFromDate</code> to an extension function on the <code>Date</code> class.  It can be local to the file, to the module, to the class, and in all those cases it will read better.</p>\n"}], "owner": {"reputation": 4102, "user_id": 1727589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/U1bCC.jpg?s=128&g=1", "display_name": "Hadi Satrio", "link": "https://stackoverflow.com/users/1727589/hadi-satrio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1407, "favorite_count": 0, "accepted_answer_id": 35459803, "answer_count": 2, "score": 0, "last_activity_date": 1455784022, "creation_date": 1455719024, "last_edit_date": 1495541983, "question_id": 35459317, "link": "https://stackoverflow.com/questions/35459317/what-is-the-correct-way-to-deal-with-fields-in-kotlin", "title": "What is the correct way to deal with fields in Kotlin?", "body": "<p>How should I handle the migration from a Java class with fields to Kotlin properly?</p>\n\n<p>A couple of reading into Kotlin's docs reveal that their classes can't have fields defined within them. Being the rebel that I am, actually trying to convert my existing Java code to its Kotlin counterpart (using Android Studio's Java to Kotlin converter feature) also marks \"fields\" with an <a href=\"https://stackoverflow.com/questions/28945392/how-to-change-kotlins-this-property-has-a-backing-field-code-editor-highlight\">unpleasantly blinding highlight</a>.</p>\n\n<p>This is my Java class:</p>\n\n<pre><code>  public final class PaperDay implements Day {\n    private Date date;\n    private Weather weather;\n\n    PaperDay() {\n      // Obligatory empty ctor for Paper.\n    }\n\n    PaperDay(Date date) {\n      this.date = truncateTimeFromDate(date);\n      this.weather = Weather.SUNNY; // Default to SUNNY, 'cos sunny is good!\n    }\n\n    PaperDay(Date date, Weather weather) {\n      this.date = truncateTimeFromDate(date);\n      this.weather = weather;\n    }\n\n    private Date truncateTimeFromDate(Date date) {\n      Calendar calendar = Calendar.getInstance();\n\n      calendar.setTime(date);\n\n      calendar.set(Calendar.HOUR_OF_DAY, 0);\n      calendar.set(Calendar.MINUTE, 0);\n      ...\n</code></pre>\n\n<p>..and this is what it looks like converted into a .kt:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UvdvM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UvdvM.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I do this the Kotlin way?</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1455694385, "post_id": 35450393, "comment_id": 58597850, "body": "Normally you <code>apply plugin: &#39;kotlin-android&#39;</code> after &#39;com.android.application&#39;."}, {"owner": {"reputation": 229, "user_id": 656381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e10d7a91c2c0e4fd285537140cd1dc4e?s=128&d=identicon&r=PG", "display_name": "art-o-nawa", "link": "https://stackoverflow.com/users/656381/art-o-nawa"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1455696250, "post_id": 35450393, "comment_id": 58598792, "body": "You were right, man! Thanks!"}], "owner": {"reputation": 229, "user_id": 656381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e10d7a91c2c0e4fd285537140cd1dc4e?s=128&d=identicon&r=PG", "display_name": "art-o-nawa", "link": "https://stackoverflow.com/users/656381/art-o-nawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "closed_date": 1455696561, "answer_count": 0, "score": 2, "last_activity_date": 1455696195, "creation_date": 1455694164, "last_edit_date": 1592644375, "question_id": 35450393, "link": "https://stackoverflow.com/questions/35450393/java-code-cannot-access-kotlins-package-since-kotlin-1-0-0", "closed_reason": "Duplicate", "title": "Java code cannot access Kotlin&#39;s package since Kotlin 1.0.0", "body": "<p>I'm using Kotlin along with Java in my gradle project. But since I've updated Kotlin (and kotlin-gradle-pludin) to 1.0.0 strange things began to happen. There's a Java class that uses Kotlin objects:</p>\n<pre><code>import com.myapp.android.entities.CategoryEntity;\nimport com.myapp.android.entities.CommentEntity;\n\n\npublic class Contract {\n\n    private static final Class[] MODEL_CLASSES = new Class[]{\n        CommentEntity.class,\n        CategoryEntity.class\n    };\n\n}\n</code></pre>\n<p>CategoryEntity and CommentEntity are written in Kotlin. This code was compiling and working well until 1.0.0 but now I got the following errors:</p>\n<blockquote>\n<p>Error:(3, 1) error: package com.myapp.android.entities does not exist</p>\n<p>Error:(19, 13) error: cannot find symbol class CommentEntity</p>\n<p>Error:(20, 13) error: cannot find symbol class CategoryEntity</p>\n</blockquote>\n<p>The code wasn't modified after update and what's interesting - Android Studio static analyzer threats this code as working, but not compiler.</p>\n<p>I'm wonder - if I missed anything in the Release notes of Kotlin 1.0.0 or it's a bug in the compiler?</p>\n<p>P.S. I've tried to put entities to the same package as the Contract class but &quot;cannot find symbol class&quot; errors didn't gone.</p>\n<p>Here's a portion of the build.gradle of my app module</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.0.0'\n    repositories {\n        jcenter()\n        mavenCentral()\n        &lt;...&gt;\n    }\n    dependencies {\n        classpath &quot;org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version&quot;\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        &lt;...&gt;\n    }\n}\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android-extensions'\n\n&lt;...&gt;\n\nrepositories {\n    jcenter()\n    mavenCentral()\n    &lt;...&gt;\n}\n\ndependencies {\n    compile &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\n    compile 'com.android.support:appcompat-v7:23.1.1'\n    compile 'com.android.support:recyclerview-v7:23.1.1'\n    compile 'com.android.support:cardview-v7:21.0.+'\n    &lt;...&gt;\n}\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion &quot;23.0.2&quot;\n\n    dexOptions {\n        javaMaxHeapSize &quot;2g&quot;\n    }\n\n    &lt;...&gt;\n\n    defaultConfig {\n        applicationId &quot;com.myapp.android&quot;\n        minSdkVersion 15\n        targetSdkVersion 22\n        versionCode 4\n        versionName &quot;0.0.4&quot;\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_7\n        targetCompatibility JavaVersion.VERSION_1_7\n    }\n    buildTypes {\n        &lt;...&gt;\n        debug {\n            minifyEnabled false\n        }\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    packagingOptions {\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/NOTICE.txt'\n    }\n}\n</code></pre>\n<p>SOLUTION:</p>\n<p>As <a href=\"https://stackoverflow.com/users/807126/doug-stevenson\">Doug Stevenson</a> pointed - there should be</p>\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n<p>in the build.gradle. Looks like I've accidentally replaced it with</p>\n<pre><code>apply plugin: 'kotlin-android-extensions'\n</code></pre>\n<p>instead of adding the new one. Now, when I returned kotlin-android plugin line everything works well.</p>\n"}, {"tags": ["android", "singleton", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1455689476, "post_id": 35449075, "comment_id": 58595579, "body": "Kotlin has not changed substantially since that question you referenced was written."}, {"owner": {"reputation": 375, "user_id": 1169953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a45037f2e4ef7031ba2085396b308a?s=128&d=identicon&r=PG", "display_name": "Danilo Carvalho", "link": "https://stackoverflow.com/users/1169953/danilo-carvalho"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1455722293, "post_id": 35449075, "comment_id": 58617408, "body": "@DougStevenson thanks, man. Do you know another way of doing this other than the two answers I mentioned?"}, {"owner": {"reputation": 375, "user_id": 1169953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a45037f2e4ef7031ba2085396b308a?s=128&d=identicon&r=PG", "display_name": "Danilo Carvalho", "link": "https://stackoverflow.com/users/1169953/danilo-carvalho"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1455722423, "post_id": 35449075, "comment_id": 58617498, "body": "@nhaarman I understand this question has been asked before, but I do say in my question that the answers provided there don&#39;t completely satisfy my requirements. I would have appreciated if my question had stayed at least a few days to see if anyone else could provide a different answer."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1455723513, "post_id": 35449075, "comment_id": 58618383, "body": "There are no substantial changes since that question, as Doug mentioned. The linked question and answer acknowledges the limitation and better answers can still be given there - like you said, it&#39;s the same question."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455740389, "post_id": 35449075, "comment_id": 58629480, "body": "Idiomatic is what is in the other answers, there is no new magic answer.  You cannot inject yourself into the lifecycle of an <code>Object</code> instance being created, you can only inject a value into its members as they are initialized using something that can &quot;grab&quot; the value (i.e. the injection library answer)"}, {"owner": {"reputation": 7090, "user_id": 2570623, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E4XUp.jpg?s=128&g=1", "display_name": "Jim Pekarek", "link": "https://stackoverflow.com/users/2570623/jim-pekarek"}, "edited": false, "score": 1, "creation_date": 1462564991, "post_id": 35449075, "comment_id": 61705821, "body": "For an actual answer to your question, in your application subclass:  override fun onCreate(){ super.onCreate() context = this }  companion object{ lateinit var context: Context    private set }  Then you can just do App.context wherever you want the application context  ***** edit sorry about the formatting. This question is flagged as a duplicate, and really shouldn&#39;t be, so I can&#39;t post it as an actual answer."}, {"owner": {"reputation": 375, "user_id": 1169953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a45037f2e4ef7031ba2085396b308a?s=128&d=identicon&r=PG", "display_name": "Danilo Carvalho", "link": "https://stackoverflow.com/users/1169953/danilo-carvalho"}, "reply_to_user": {"reputation": 7090, "user_id": 2570623, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E4XUp.jpg?s=128&g=1", "display_name": "Jim Pekarek", "link": "https://stackoverflow.com/users/2570623/jim-pekarek"}, "edited": false, "score": 1, "creation_date": 1463529171, "post_id": 35449075, "comment_id": 62100900, "body": "@Amagi82 thanks, I ended up just using a regular class for the singleton (instead of a Kotlin object) and doing the instance checking myself, so I just pass the context to the &quot;getInstance()&quot;  companion method. But your suggestion is very interesting. Will try that. And yeah, I specifically say that I don&#39;t want to use the answer to the &quot;duplicate&quot; question but they marked it as duplicate anyway and only 2 hours after I posted my question. They could&#39;ve at least waited a few days to see if anyone came up with an alternative."}], "owner": {"reputation": 375, "user_id": 1169953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a45037f2e4ef7031ba2085396b308a?s=128&d=identicon&r=PG", "display_name": "Danilo Carvalho", "link": "https://stackoverflow.com/users/1169953/danilo-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "closed_date": 1455696622, "answer_count": 0, "score": 0, "last_activity_date": 1455689063, "creation_date": 1455689063, "last_edit_date": 1495542239, "question_id": 35449075, "link": "https://stackoverflow.com/questions/35449075/kotlin-object-singleton-with-an-android-application-context", "closed_reason": "Duplicate", "title": "Kotlin object (singleton) with an Android Application Context", "body": "<p>I've been looking into Android development using Kotlin and I ran into a situation. I'm trying to figure out how to create a singleton using the recommended Kotlin \"object\" and pass it an Android Context, more specifically the context from the Context.getApplicationContext() method.</p>\n\n<p>It's essentially the same question as <a href=\"https://stackoverflow.com/questions/33128024/singleton-with-argument-in-kotlin\">here</a>, but since Kotlin was in beta until just a few days ago, I was wondering if the answer might have changed for V1.0.0.</p>\n\n<p>I'd rather not use the accepted answer in the referred question (use a setter to set the context) because it would mean I'd have to (re)set the context to make sure it's not null before using the singleton. Not a big deal, but it feels like there should be a better way. It might also raise issues when setting the context from different threads at the same time...? Or maybe not, since the Context would always be the same Application Context.</p>\n\n<p>Using an injection library as suggested in the other answer to that question would work, but I'm looking for a more \"idiomatic\" way of doing this since I'm trying to learn the language.</p>\n\n<p>Anyone know another way?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "android", "multithreading", "asynchronous", "kotlin"], "comments": [{"owner": {"reputation": 13854, "user_id": 1666116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae4cc3a400aff3a7c5e80767854980c?s=128&d=identicon&r=PG", "display_name": "323go", "link": "https://stackoverflow.com/users/1666116/323go"}, "edited": false, "score": 1, "creation_date": 1455679184, "post_id": 35447204, "comment_id": 58592207, "body": "Ask <i>one</i> question at a time, please."}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1455680109, "post_id": 35447204, "comment_id": 58592495, "body": "I would use <code>RxJava</code> but for you, <code>RxKotlin</code> here: <a href=\"https://github.com/ReactiveX/RxKotlin\" rel=\"nofollow noreferrer\">github.com/ReactiveX/RxKotlin</a>. Create 3 <code>Observables</code> and use <code>.zip</code> to keep them together."}, {"owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "edited": false, "score": 0, "creation_date": 1455680972, "post_id": 35447204, "comment_id": 58592725, "body": "Thanks for reply. Can you show me example in java? I dont use RX before."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455740182, "post_id": 35447204, "comment_id": 58629348, "body": "Google.  Search Stack Overflow."}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455740164, "post_id": 35464251, "comment_id": 58629336, "body": "Is this an update to your question?  it does not appear to be an answer."}], "tags": [], "owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "is_accepted": true, "score": -1, "last_activity_date": 1455731986, "creation_date": 1455731986, "answer_id": 35464251, "question_id": 35447204, "link": "https://stackoverflow.com/questions/35447204/android-run-4-async-tasks-which-works-with-rest-api-wait-and-start-another-a/35464251#35464251", "title": "Android: Run 4 async tasks (which works with Rest API), wait and start another activity after complete all tasks", "body": "<p>Required to paste this line to all async tasks which using last.fm library methods\n<code>Caller.getInstance().cache = null</code></p>\n\n<p><a href=\"http://www.last.fm/group/Last.fm+Android/forum/114391/_/2057961\" rel=\"nofollow\">Same issue</a></p>\n\n<p><a href=\"http://www.programcreek.com/java-api-examples/index.php?api=de.umass.lastfm.Caller\" rel=\"nofollow\">Solution</a></p>\n"}], "owner": {"reputation": 33, "user_id": 886891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8d271969f9e143ab8e53dc04fa963f?s=128&d=identicon&r=PG", "display_name": "Damon Shine", "link": "https://stackoverflow.com/users/886891/damon-shine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1455970475, "accepted_answer_id": 35464251, "answer_count": 1, "score": -2, "last_activity_date": 1455731986, "creation_date": 1455678784, "last_edit_date": 1455679240, "question_id": 35447204, "link": "https://stackoverflow.com/questions/35447204/android-run-4-async-tasks-which-works-with-rest-api-wait-and-start-another-a", "closed_reason": "Duplicate", "title": "Android: Run 4 async tasks (which works with Rest API), wait and start another activity after complete all tasks", "body": "<p>I have some problem with async tasks. I've trying to run 4 async tasks which fetching data from last.fm rest api.</p>\n\n<p><strong>My task points:</strong></p>\n\n<ol>\n<li>Run 4 tasks (count doesn't matter, but must be greater than 1) asynchronously or parallel</li>\n<li>Fetch data from last.fm rest api (for fetching data from last.fm api i've using de.umass.lastfm java library)</li>\n<li>Wait for complete all tasks</li>\n<li>Start another activity with fetched data</li>\n</ol>\n\n<p>Function where invokes async tasks:</p>\n\n<pre><code>&lt;pre&gt;override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_animation)\n\n        initViewElements();\n        mArtistName = intent.getStringExtra(\"ARTIST_NAME\");\n        Log.i(TAG, mArtistName);\n        setAnimationData();\n\n        getArtistData(mArtistName);\n\n        startActivity(Intent(this, DetailsActivity::class.java))\n\n    }&lt;/pre&gt;\n</code></pre>\n\n<p>Function where introduced my tasks\n</p>\n\n<pre><code>    &lt;pre&gt;\nprivate fun getArtistData(name: String) {\n        val getArtistDataAsync = object : AsyncTask&lt;String, Void, Artist&gt;() {\n\n            override fun doInBackground(vararg args: String?): Artist? {\n\n                return Artist.getInfo(args[0], \"26cc2ebf6da38bc646733f661bfc6268\");\n            }\n\n            override fun onPostExecute(result: Artist?) {\n                super.onPostExecute(result)\n\n                CommonUtilities.artistInstance = result as Artist;\n            }\n        }\n\n        val getTopTracksAsync = object : AsyncTask&lt;String,Void,ArrayList&lt;Track&gt;&gt;(){\n            override fun doInBackground(vararg args: String?): ArrayList&lt;Track&gt;? {\n\n                return Artist.getTopTracks(args[0], \"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Track&gt;;\n            }\n\n            override fun onPostExecute(result: ArrayList&lt;Track&gt;?) {\n                super.onPostExecute(result)\n\n                CommonUtilities.trackListInstance = result;\n            }\n        }\n\n        val getSimilarBandsAsync = object : AsyncTask&lt;String,Void,ArrayList&lt;Artist&gt;&gt;(){\n            override fun doInBackground(vararg args: String?): ArrayList&lt;Artist&gt;? {\n\n                return Artist.getSimilar(args[0], \"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Artist&gt;?\n            }\n\n            override fun onPostExecute(result: ArrayList&lt;Artist&gt;?) {\n                super.onPostExecute(result)\n\n                CommonUtilities.artistListInstance = result; //Instance Messenger Pattern\n\n\n            }\n        }\n\n        val getTopAlbumsAsync = object : AsyncTask&lt;String,Void, ArrayList&lt;Album&gt;&gt;(){\n            override fun doInBackground(vararg p0: String?): ArrayList&lt;Album&gt;? {\n\n                return Artist.getTopAlbums(p0[0],\"26cc2ebf6da38bc646733f661bfc6268\") as ArrayList&lt;Album&gt;?;\n            }\n\n            override fun onPostExecute(result: ArrayList&lt;Album&gt;?) {\n                super.onPostExecute(result)\n\n                CommonUtilities.albumListInstance = result; //Instance Messenger Pattern\n            }\n        }\n\n        getArtistDataAsync.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, name)\n        getSimilarBandsAsync.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, name)\n        getTopTracksAsync.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, name)\n        getTopAlbumsAsync.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, name)\n\n    }\n&lt;/pre&gt;\n</code></pre>\n\n<p>Stack trace:</p>\n\n<pre><code>&lt;pre&gt;\nE/AndroidRuntime: FATAL EXCEPTION: AsyncTask #4\n                                                                     Process: pw.osin.musicexpert, PID: 17334\n                                                                     java.lang.RuntimeException: An error occured while executing doInBackground()\n                                                                         at android.os.AsyncTask$3.done(AsyncTask.java)\n                                                                         at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:355)\n                                                                         at java.util.concurrent.FutureTask.setException(FutureTask.java:222)\n                                                                         at java.util.concurrent.FutureTask.run(FutureTask.java:242)\n                                                                         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\n                                                                         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\n                                                                         at java.lang.Thread.run(Thread.java:841)\n                                                                      Caused by: de.umass.lastfm.CallException: Caching/Reloading failed\n                                                                         at de.umass.lastfm.Caller.call(Caller.java:246)\n                                                                         at de.umass.lastfm.Caller.call(Caller.java:189)\n                                                                         at de.umass.lastfm.Caller.call(Caller.java:185)\n                                                                         at de.umass.lastfm.Artist.getSimilar(Artist.java:144)\n                                                                         at de.umass.lastfm.Artist.getSimilar(Artist.java:132)\n                                                                         at pw.osin.musicexpert.activities.AnimationActivity$getArtistData$getSimilarBandsAsync$1.doInBackground(AnimationActivity.kt:120)\n                                                                         at pw.osin.musicexpert.activities.AnimationActivity$getArtistData$getSimilarBandsAsync$1.doInBackground(AnimationActivity.kt:117)\n                                                                         at android.os.AsyncTask$2.call(AsyncTask.java)\n                                                                         at java.util.concurrent.FutureTask.run(FutureTask.java:237)\n                                                                         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)\u00a0\n                                                                         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)\u00a0\n                                                                         at java.lang.Thread.run(Thread.java:841)\u00a0\n02-17 05:49:05.636 17334-17432/pw.osin.musicexpert W/dalvikvm: threadid=13: thread exiting with uncaught exception (group=0x4179ed58)\n&lt;/pre&gt;\n</code></pre>\n\n<ol>\n<li>So how can i fix this error?</li>\n<li>How wait for tasks completed?</li>\n<li>Where need to invoke startActivity method?</li>\n</ol>\n\n<p>I've using Kotlin, but task methods is java similar. If u can show me how I need to write my code using java will be awesome too.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["kotlin", "file-writing"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1455727710, "post_id": 35444264, "comment_id": 58621581, "body": "I added more variations in a new answer for fun, to give you more ideas of things you can do."}], "answers": [{"tags": [], "owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "is_accepted": false, "score": 5, "last_activity_date": 1455662578, "creation_date": 1455662578, "answer_id": 35444457, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/35444457#35444457", "title": "How do I write to a file in Kotlin?", "body": "<p>It mostly looks ok to me. The only thing different I would do is use the \"<a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/io/ReadWrite.kt\" rel=\"noreferrer\" title=\"use\">use</a>\" extension defined in ReadWrite to auto close the writer.</p>\n\n<pre><code>PrintWriter(\"file.txt\").use {\n  for ((member, originalInput) in history) {  // history: Map&lt;Member, String&gt;\n    it.append(\"$member, $originalInput\\n\")\n  }    \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3374, "user_id": 1470257, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Jxn44.png?s=128&g=1", "display_name": "yiwei", "link": "https://stackoverflow.com/users/1470257/yiwei"}, "edited": false, "score": 1, "creation_date": 1455729052, "post_id": 35445704, "comment_id": 58622432, "body": "thanks for this and the other more &quot;fun&quot; variations! +1"}, {"owner": {"reputation": 310, "user_id": 4371442, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jQoD9196iKo/AAAAAAAAAAI/AAAAAAAAAlc/NlQckTQTgJY/photo.jpg?sz=128", "display_name": "Istvan Nagy", "link": "https://stackoverflow.com/users/4371442/istvan-nagy"}, "edited": false, "score": 1, "creation_date": 1455789138, "post_id": 35445704, "comment_id": 58650027, "body": "it may an other possible solution: File(fileName).writeText(Iterable&lt;Any&gt;.joinToString(), Charsets.UTF_8)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 310, "user_id": 4371442, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jQoD9196iKo/AAAAAAAAAAI/AAAAAAAAAlc/NlQckTQTgJY/photo.jpg?sz=128", "display_name": "Istvan Nagy", "link": "https://stackoverflow.com/users/4371442/istvan-nagy"}, "edited": false, "score": 0, "creation_date": 1455797140, "post_id": 35445704, "comment_id": 58655408, "body": "@IstvanNagy depending on the size of the iterable and if you want to materialize the full string before writing.  I&#39;ll add it to the alternative answer, it is nice and short!"}, {"owner": {"reputation": 1417, "user_id": 2430555, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OenB4.jpg?s=128&g=1", "display_name": "Pedro Paulo Amorim", "link": "https://stackoverflow.com/users/2430555/pedro-paulo-amorim"}, "edited": false, "score": 1, "creation_date": 1521135616, "post_id": 35445704, "comment_id": 85614074, "body": "One of the best answers here in StackOverflow."}, {"owner": {"reputation": 749, "user_id": 6854489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5cb66e283a222e78f3fe5f45e1eb0406?s=128&d=identicon&r=PG&f=1", "display_name": "takanuva15", "link": "https://stackoverflow.com/users/6854489/takanuva15"}, "edited": false, "score": 0, "creation_date": 1528644767, "post_id": 35445704, "comment_id": 88576974, "body": "For reference, since I spent about an hour trying to figure this out, if you&#39;re going to be opening and closing a file multiple times for appending text, use <code>FileWriter(&quot;output.txt&quot;, true).use {</code> for the 1st line. (Otherwise, the textfile is cleared each time you open it)"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 99, "last_activity_date": 1455797835, "last_edit_date": 1495540970, "creation_date": 1455668978, "answer_id": 35445704, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/35445704#35445704", "title": "How do I write to a file in Kotlin?", "body": "<p>A bit more idiomatic.  For PrintWriter, this example:</p>\n\n\n\n<pre><code>File(\"somefile.txt\").printWriter().use { out -&gt;\n    history.forEach {\n        out.println(\"${it.key}, ${it.value}\")\n    }\n}\n</code></pre>\n\n<p>The <code>for</code> loop, or <code>forEach</code> depends on your style.  No reason to use <code>append(x)</code> since that is basically <code>write(x.toString())</code> and you already give it a string.  And <code>println(x)</code> basically does <code>write(x)</code> after converting a <code>null</code> to <code>\"null\"</code>.  And <code>println()</code> does the correct line ending.</p>\n\n<p>If you are using <code>data</code> classes of Kotlin, they can already be output because they have a nice <code>toString()</code> method already.  </p>\n\n<p>Also, in this case if you wanted to use <code>BufferedWriter</code> it would produce the same results:</p>\n\n<pre><code>File(\"somefile.txt\").bufferedWriter().use { out -&gt;\n    history.forEach {\n        out.write(\"${it.key}, ${it.value}\\n\")\n    }\n}\n</code></pre>\n\n<p>Also you can use <code>out.newLine()</code> instead of <code>\\n</code> if you want it to be correct for the current operating system in which it is running.  And if you were doing that all the time, you would likely create an extension function:</p>\n\n<pre><code>fun BufferedWriter.writeLn(line: String) {\n    this.write(line)\n    this.newLine()\n}\n</code></pre>\n\n<p>And then use that instead:</p>\n\n<pre><code>File(\"somefile.txt\").bufferedWriter().use { out -&gt;\n    history.forEach {\n        out.writeLn(\"${it.key}, ${it.value}\")\n    }\n}\n</code></pre>\n\n<p>And that's how Kotlin rolls.  Change things in API's to make them how you want them to be.</p>\n\n<p>Wildly different flavours for this are in another answer: <a href=\"https://stackoverflow.com/a/35462184/3679676\">https://stackoverflow.com/a/35462184/3679676</a></p>\n"}, {"comments": [{"owner": {"reputation": 2283, "user_id": 320911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/adCJz.jpg?s=128&g=1", "display_name": "Arto Bendiken", "link": "https://stackoverflow.com/users/320911/arto-bendiken"}, "edited": false, "score": 0, "creation_date": 1502638573, "post_id": 35462184, "comment_id": 78281696, "body": "<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file/write-text.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/java.io.-file&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 28, "last_activity_date": 1455797748, "last_edit_date": 1455797748, "creation_date": 1455726034, "answer_id": 35462184, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/35462184#35462184", "title": "How do I write to a file in Kotlin?", "body": "<p><strong>Other fun variations</strong> so you can see the power of Kotlin:</p>\n\n<p>A quick version by creating the string to write all at once:</p>\n\n\n\n<pre><code>File(\"somefile.txt\").writeText(history.entries.joinToString(\"\\n\") { \"${it.key}, ${it.value}\" })\n// or just use the toString() method without transform:\nFile(\"somefile.txt\").writeText(x.entries.joinToString(\"\\n\"))\n</code></pre>\n\n<p>Or assuming you might do other functional things like filter lines or take only the first 100, etc. You could go this route:</p>\n\n<pre><code>File(\"somefile.txt\").printWriter().use { out -&gt;\n    history.map { \"${it.key}, ${it.value}\" }\n           .filter { ... }\n           .take(100)\n           .forEach { out.println(it) }\n}\n</code></pre>\n\n<p><strong>Or given an <code>Iterable</code>, allow writing it to a file</strong> using a transform to a string, by creating extension functions (similar to <code>writeText()</code> version above, but streams the content instead of materializing a big string first):</p>\n\n<pre><code>fun &lt;T: Any&gt; Iterable&lt;T&gt;.toFile(output: File, transform: (T)-&gt;String = {it.toString()}) {\n    output.bufferedWriter().use { out -&gt;\n        this.map(transform).forEach { out.write(it); out.newLine() }\n    }\n}\n\nfun &lt;T: Any&gt; Iterable&lt;T&gt;.toFile(outputFilename: String, transform: (T)-&gt;String = {it.toString()}) {\n    this.toFile(File(outputFilename), transform)\n}\n</code></pre>\n\n<p>used as any of these:</p>\n\n<pre><code>history.entries.toFile(File(\"somefile.txt\")) {  \"${it.key}, ${it.value}\" }\n\nhistory.entries.toFile(\"somefile.txt\") {  \"${it.key}, ${it.value}\" }\n</code></pre>\n\n<p>or use default toString() on each item:</p>\n\n<pre><code>history.entries.toFile(File(\"somefile.txt\")) \n\nhistory.entries.toFile(\"somefile.txt\") \n</code></pre>\n\n<p><strong>Or given a <code>File</code>, allow filling it from an <code>Iterable</code></strong>, by creating this extension function:</p>\n\n<pre><code>fun &lt;T: Any&gt; File.fillWith(things: Iterable&lt;T&gt;, transform: (T)-&gt;String = {it.toString()}) {\n    this.bufferedWriter().use { out -&gt;\n        things.map(transform).forEach { out.write(it); out.newLine() }\n    }\n}\n</code></pre>\n\n<p>with usage of:</p>\n\n<pre><code>File(\"somefile.txt\").fillWith(history.entries) { \"${it.key}, ${it.value}\" }\n</code></pre>\n\n<p>or use default toString() on each item:</p>\n\n<pre><code>File(\"somefile.txt\").fillWith(history.entries) \n</code></pre>\n\n<p>which if you had the other <code>toFile</code> extension already, you could rewrite having one extension call the other:</p>\n\n<pre><code>fun &lt;T: Any&gt; File.fillWith(things: Iterable&lt;T&gt;, transform: (T)-&gt;String = {it.toString()}) {\n    things.toFile(this, transform)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": false, "score": 1, "last_activity_date": 1495562690, "last_edit_date": 1495562690, "creation_date": 1495541458, "answer_id": 44134468, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/44134468#44134468", "title": "How do I write to a file in Kotlin?", "body": "<p>Some Kotlin magic allows to omit referencing the stream on each read or write call:</p>\n\n<pre><code>fun &lt;T : Closeable, R&gt; T.useWith(block: T.() -&gt; R): R = use { with(it, block) }\n\nFile(\"a.in\").bufferedReader().useWith {\n    File(\"a.out\").printWriter().useWith {\n        val (a, b) = readLine()!!.split(' ').map(String::toInt)\n        println(a + b)\n    }\n}\n\nScanner(File(\"b.in\")).useWith {\n    PrintWriter(\"b.out\").useWith {\n        val a = nextInt()\n        val b = nextInt()\n        println(a + b)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 378, "user_id": 2841217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmiwo.jpg?s=128&g=1", "display_name": "Ajay Prajapati", "link": "https://stackoverflow.com/users/2841217/ajay-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1550562238, "creation_date": 1550562238, "answer_id": 54761049, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/54761049#54761049", "title": "How do I write to a file in Kotlin?", "body": "<pre><code>try{\n      val fileWriter = FileWriter(\"test.txt\", true)\n      fileWriter.write(string+ \"\\n\")\n      fileWriter.close()\n    } catch (exception: Exception){\n        println(exception.message)\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 2536992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d69b1602e209ca1e0f53bf2b185fa4ff?s=128&d=identicon&r=PG", "display_name": "Kristopher Noronha", "link": "https://stackoverflow.com/users/2536992/kristopher-noronha"}, "is_accepted": false, "score": 3, "last_activity_date": 1558360895, "last_edit_date": 1558360895, "creation_date": 1555429741, "answer_id": 55712106, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/55712106#55712106", "title": "How do I write to a file in Kotlin?", "body": "<p>At the very minimum, you could use:</p>\n\n<p><code>FileWriter(filename).use { it.write(text) }</code></p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html\" rel=\"nofollow noreferrer\">FileWriter</a> is a convenience class for writing character files (provided by Java, and hence available in Kotlin). It extends Closeable, and hence can be used by Kotlin's \".use\" extension method.</p>\n\n<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html\" rel=\"nofollow noreferrer\">.use</a> extension method automatically closes the calling object once the block exits, thus providing an idiomatic way to close the file after it's written.</p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 10317975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61e7c10e489fa25e1f363eb5d63b1697?s=128&d=identicon&r=PG&f=1", "display_name": "Infomaster", "link": "https://stackoverflow.com/users/10317975/infomaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1604052242, "creation_date": 1604052242, "answer_id": 64606245, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin/64606245#64606245", "title": "How do I write to a file in Kotlin?", "body": "<p>Example as easy</p>\n<pre><code>val path = context!!.filesDir.absolutePath // =&gt; /data/user/0/com.example.test/files\nFile(&quot;$path/filename.txt&quot;).writeText(&quot;hello&quot;)\n</code></pre>\n"}], "owner": {"reputation": 3374, "user_id": 1470257, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Jxn44.png?s=128&g=1", "display_name": "yiwei", "link": "https://stackoverflow.com/users/1470257/yiwei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46251, "favorite_count": 7, "accepted_answer_id": 35445704, "answer_count": 7, "score": 52, "last_activity_date": 1604052242, "creation_date": 1455661740, "last_edit_date": 1455794835, "question_id": 35444264, "link": "https://stackoverflow.com/questions/35444264/how-do-i-write-to-a-file-in-kotlin", "title": "How do I write to a file in Kotlin?", "body": "<p>I can't seem to find this question yet, but what is the simplest, most-idiomatic way of opening/creating a file, writing to it, and then closing it? Looking at the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/index.html\" rel=\"noreferrer\">kotlin.io</a> reference and the Java documentation I managed to get this:</p>\n\n<pre><code>fun write() {\n    val writer = PrintWriter(\"file.txt\")  // java.io.PrintWriter\n\n    for ((member, originalInput) in history) {  // history: Map&lt;Member, String&gt;\n        writer.append(\"$member, $originalInput\\n\")\n    }\n\n    writer.close()\n}\n</code></pre>\n\n<p>This works, but I was wondering if there was a \"proper\" Kotlin way of doing this?</p>\n"}, {"tags": ["rx-java", "kotlin"], "comments": [{"owner": {"reputation": 11951, "user_id": 1126273, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/XqyXV.png?s=128&g=1", "display_name": "Bal&#225;zs &#201;des", "link": "https://stackoverflow.com/users/1126273/bal%c3%a1zs-%c3%89des"}, "edited": false, "score": 0, "creation_date": 1455652491, "post_id": 35441280, "comment_id": 58581521, "body": "I think, this is the issue tracker they are using: <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a> . You are much more likely to receive confirmation / explanation from the creators of the language, if you create a bug report"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1455781578, "post_id": 35441280, "comment_id": 58645472, "body": "The team confirmed it is a bug. The issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-11108\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11108</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6210, "user_id": 650288, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/J4Qag.jpg?s=128&g=1", "display_name": "bclymer", "link": "https://stackoverflow.com/users/650288/bclymer"}, "edited": false, "score": 0, "creation_date": 1455652859, "post_id": 35441860, "comment_id": 58581722, "body": "Accepted this. Well researched and presented. That makes sense. I&#39;ll probably start being more explicit by assigning the value before returning it like in the 2nd example. I want all the type safety I can get."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1455654380, "post_id": 35441860, "comment_id": 58582525, "body": "That&#39;s weird. Assignment without a type declaration should not change a thing."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1455781585, "post_id": 35441860, "comment_id": 58645477, "body": "The team confirmed it is a bug. The issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-11108\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11108</a>"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1455785875, "post_id": 35441860, "comment_id": 58647802, "body": "@voddan interesting!"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 10, "last_activity_date": 1455795941, "last_edit_date": 1455795941, "creation_date": 1455652524, "answer_id": 35441860, "question_id": 35441280, "link": "https://stackoverflow.com/questions/35441280/kotlin-rxjava-nullable-bug/35441860#35441860", "title": "Kotlin RxJava Nullable Bug", "body": "<p>The signature of the <code>flatMap</code> function is as follows when used in Kotlin:</p>\n\n<pre><code>public final fun &lt;R: Any!, T: Any!&gt; \n    Observable&lt;T&gt;.flatMap(\n      func: ((T) -&gt; Observable&lt;out R!&gt;!)!\n    ) : Observable&lt;R!&gt;!\n</code></pre>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p>Any reference in Java may be <code>null</code>, which makes Kotlin\u2019s requirements\n  of strict null-safety impractical for objects coming from Java. Types\n  of Java declarations are treated specially in Kotlin and called\n  platform types. Null-checks are relaxed for such types, so that safety\n  guarantees for them are the same as in Java</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><code>T!</code> means \u201c<code>T</code> or <code>T?</code>\u201d</p>\n</blockquote>\n\n<p>This means that the Kotlin compiler can regard the return type of the <code>flatMap</code> function as either <code>Observable&lt;TestUser&gt;</code> or <code>Observable&lt;TestUser?&gt;</code>, or even <code>Observable&lt;TestUser&gt;?</code>. The relaxation part says so much as, \"we don't want to bother you with these unknown types, you probably know better\".</p>\n\n<p>Since the return type is explicitly given in <code>getTestUser()</code>, it uses the first. Since the type of <code>observable</code> is <em>not</em> explicitly given, it infers it to <code>Observable&lt;TestUser?&gt;</code>, based on the <code>getUser()</code> function.</p>\n\n<hr>\n\n<p>As @voddan commented, there is an open issue discussing this problem: <a href=\"https://youtrack.jetbrains.com/issue/KT-11108\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-11108</a></p>\n"}], "owner": {"reputation": 6210, "user_id": 650288, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/J4Qag.jpg?s=128&g=1", "display_name": "bclymer", "link": "https://stackoverflow.com/users/650288/bclymer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 1, "accepted_answer_id": 35441860, "answer_count": 1, "score": 11, "last_activity_date": 1455795941, "creation_date": 1455650491, "question_id": 35441280, "link": "https://stackoverflow.com/questions/35441280/kotlin-rxjava-nullable-bug", "title": "Kotlin RxJava Nullable Bug", "body": "<p>I've run into an issue in my Android app using Kotlin and RxJava. It's presented below.</p>\n\n<pre><code>import rx.Observable\n\ndata class TestUser(val name: String)\n\nfun getTestUser(): Observable&lt;TestUser&gt; {\n    return Observable.just(TestUser(\"Brian\")).flatMap { getUser() } // this compiles\n}\n\nfun getTestUser2(): Observable&lt;TestUser&gt; {\n    val observable = Observable.just(TestUser(\"Brian\")).flatMap { getUser() }\n    return observable // this does not compile\n}\n\nfun getUser(): Observable&lt;TestUser?&gt; {\n    return Observable.just(null)\n}\n</code></pre>\n\n<p>In <code>getTestUser2</code>, the compiler infers the final return type as <code>Observable&lt;TestUser?&gt;</code> and doesn't compile. However in <code>getTestUser</code> the code does compile, and when it's run, any subscriber to that observable may be in for a surprise when the <code>TestUser</code> comes back <code>null</code>.</p>\n\n<p>I'm guessing it's something to do with going back and forth between Kotlin and Java. But, the fact that the compiler <em>can</em> see the difference in <code>getTestUser2</code> makes me think this could be fixable.</p>\n\n<p>Edit</p>\n\n<p>This is on Kotlin 1.0, the final version released just yesterday (Feb 15, 2016).</p>\n"}, {"tags": ["immutability", "kotlin", "circular-reference"], "answers": [{"tags": [], "owner": {"reputation": 512, "user_id": 2959223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eff14c64172608b9b87a40ad809e62b2?s=128&d=identicon&r=PG&f=1", "display_name": "sargunv", "link": "https://stackoverflow.com/users/2959223/sargunv"}, "is_accepted": false, "score": 2, "last_activity_date": 1455644416, "last_edit_date": 1592644375, "creation_date": 1455644416, "answer_id": 35439422, "question_id": 35439421, "link": "https://stackoverflow.com/questions/35439421/circular-references-with-vals-in-kotlin/35439422#35439422", "title": "Circular references with vals in Kotlin", "body": "<p>Answered by Dmitry Jemerov on the kotlinlang Slack group:</p>\n<blockquote>\n<p>The only possibility is to use reflection. Pass a dummy B instance to the constructor of A, then create a real instance of B passing the A instance as a parameter, and then use reflection to change the value of \u201cf\u201d field in the A instance to the B instance.</p>\n<p>But I would strongly suggest you to not do that, and instead to reconsider your data model.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1455645279, "creation_date": 1455645279, "answer_id": 35439720, "question_id": 35439421, "link": "https://stackoverflow.com/questions/35439421/circular-references-with-vals-in-kotlin/35439720#35439720", "title": "Circular references with vals in Kotlin", "body": "<p>Not exactly what you want but should work:</p>\n\n<pre><code>interface A {\n  val f: B\n}\n\ninterface B {\n  val f: A\n}\n\ndata class AImpl(override var f: B) : A\n\ndata class BImpl(override var f: A) : B\n\nfun &lt;T&gt; uninitialized(): T = null as T\n\nfun foo() {\n  var aImpl = AImpl(uninitialized())\n  var bImpl = BImpl(aImpl)\n  aImpl.f = bImpl\n  val a: A = aImpl\n  val b: B = bImpl\n}\n</code></pre>\n\n<p>If you do not care about data class properties being <code>val</code>s, you can get rid of interfaces and use just implementation classes.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5937033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27404e41c1a24822b359a49a83fbbd7f?s=128&d=identicon&r=PG", "display_name": "fretheo", "link": "https://stackoverflow.com/users/5937033/fretheo"}, "is_accepted": false, "score": 1, "last_activity_date": 1455656484, "last_edit_date": 1455656484, "creation_date": 1455655139, "answer_id": 35442503, "question_id": 35439421, "link": "https://stackoverflow.com/questions/35439421/circular-references-with-vals-in-kotlin/35442503#35442503", "title": "Circular references with vals in Kotlin", "body": "<p>Passing an object which is not constructed yet as argument seems to be impossible. So, I think such cross-reference initialization is not possible with original data classes. </p>\n\n<p>But some workaround could be done though:</p>\n\n<pre><code>data class A(val f: A.() -&gt; B)\ndata class B(val f: B.() -&gt; A)\n\nval A.b: B get() = f(this)\nval B.a: A get() = f(this)\n\nfun test() {\n    val O = object {\n        val refA: A = A { refB }\n        val refB: B = B { refA }\n    }\n\n    var a = O.refA\n    var b = O.refB\n\n    // validating cross-refs\n    require( a === b.a )\n    require( b === a.b )\n    require( b === b.a.b )\n    require( a === a.b.a )\n\n    println(\"Done.\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 56647, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/e1oXP.png?s=128&g=1", "display_name": "Ulrik Rasmussen", "link": "https://stackoverflow.com/users/56647/ulrik-rasmussen"}, "is_accepted": false, "score": 1, "last_activity_date": 1582106893, "creation_date": 1582106893, "answer_id": 60297780, "question_id": 35439421, "link": "https://stackoverflow.com/questions/35439421/circular-references-with-vals-in-kotlin/60297780#60297780", "title": "Circular references with vals in Kotlin", "body": "<p>You can do it if you explicitly declare your self-referential <code>val</code> as <code>Lazy</code>:</p>\n\n<pre><code>sealed class MyData {\n    data class A(val x: Int) : MyData()\n    data class B(val x : Int, val rb: Lazy&lt;MyData&gt;) : MyData() {\n        val r: MyData by rb\n    }\n}\n\nfun &lt;A : Any&gt; rec(body: (Lazy&lt;A&gt;) -&gt; A): A {\n    lateinit var a: A\n    a = body(lazy { a })\n    return a\n}\n\nfun MyData.print(gas: Int): String = if (gas &lt;= 0) \"...\" else\n    when(this) {\n        is MyData.A -&gt; \"A(x=$x)\"\n        is MyData.B -&gt; {\n            val rbString = \n                if (rb.isInitialized()) \n                    r.print(gas - 1)\n                else \n                    \"&lt;thunk&gt;\"\n            \"B(x=$x, rb=$rbString)\" \n        }\n    }\n\nfun main() {\n    val a = MyData.A(42)\n    val b1 = MyData.B(1, lazy { a })\n    println(b1.r) // Force value\n    println(b1)\n    val b2 = rec&lt;MyData.B&gt; { b2 -&gt; MyData.B(1, b2) }\n    println(b2.r.print(4))\n}\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>A(x=42)\nB(x=1, rb=A(x=42))\nB(x=1, rb=B(x=1, rb=B(x=1, rb=B(x=1, rb=...))))\n</code></pre>\n"}], "owner": {"reputation": 512, "user_id": 2959223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eff14c64172608b9b87a40ad809e62b2?s=128&d=identicon&r=PG&f=1", "display_name": "sargunv", "link": "https://stackoverflow.com/users/2959223/sargunv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 1, "accepted_answer_id": 35439720, "answer_count": 4, "score": 3, "last_activity_date": 1582106893, "creation_date": 1455644416, "question_id": 35439421, "link": "https://stackoverflow.com/questions/35439421/circular-references-with-vals-in-kotlin", "title": "Circular references with vals in Kotlin", "body": "<p>In Kotlin, say I have <code>data class A (val f: B)</code> and <code>data class B (val f: A)</code>. I want to initialize local <code>var a: A</code> and <code>var b: B</code> such that <code>a.f</code> is <code>b</code> and <code>b.f</code> is <code>a</code>. <code>A.f</code> and <code>B.f</code> must remain vals. Is this circular instantiation possible?</p>\n\n<pre><code>data class A(val f: B)\n\ndata class B(val f: A)\n\nfun foo() {\n    var a: A\n    var b: B\n    // instantiate a and b here with a.f == b and b.f == a ??\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "edited": false, "score": 1, "creation_date": 1455631380, "post_id": 35432092, "comment_id": 58567259, "body": "here is an interesting discussion on these matters: <a href=\"https://discuss.kotlinlang.org/t/this-type/1421/9\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/this-type/1421/9</a>"}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1455631508, "post_id": 35432092, "comment_id": 58567364, "body": "I think overriding the function to explicitly return a C instead of B, calling super.b() should work. But then you have to always override it."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 8, "last_activity_date": 1455695943, "last_edit_date": 1455695943, "creation_date": 1455625838, "answer_id": 35432682, "question_id": 35432092, "link": "https://stackoverflow.com/questions/35432092/chained-calls-and-inheritance/35432682#35432682", "title": "Chained calls and inheritance", "body": "<p>Smart cast is not applicable here, since compiler has no way to understand that <code>B#b()</code> returns an instance of <code>C</code>.</p>\n\n<p>The fact that the returned <code>B</code> instance is a <code>C</code> is obvious for us, humans, but only after we see the implementation of the method. Type inference can only work with function signatures, so all it sees is <code>fun b(): B = ...</code></p>\n\n<p>A simple solution for your case would be to make <code>b()</code> a generic extension:</p>\n\n<pre><code>open class B \n\nfun &lt;T: B&gt; T.b() = this\n\nopen class C : B() {\n    fun c() = 0\n}\n</code></pre>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 35432682, "answer_count": 1, "score": 3, "last_activity_date": 1455695943, "creation_date": 1455624141, "last_edit_date": 1495542668, "question_id": 35432092, "link": "https://stackoverflow.com/questions/35432092/chained-calls-and-inheritance", "title": "Chained calls and inheritance", "body": "<p>I have a following class hierarchy</p>\n\n<pre><code>open class B {\n    fun b() = this\n}\n\nopen class C : B() {\n    fun c() = 0\n}\n</code></pre>\n\n<p>and I would like to do something like this:</p>\n\n<pre><code>fun test(c: C) {\n    c.b().c() // error: c.b() returns B, not C\n}\n</code></pre>\n\n<p>I understand why such problem <a href=\"https://stackoverflow.com/questions/13333127/chained-calls-to-an-object-and-inheritance-in-java\">exists in Java</a>, but Kotlin has smart casts, so why compiler can't smart cast <code>c.b()</code> to <code>C</code> in this situation? </p>\n\n<p>Are there any workarounds <a href=\"https://stackoverflow.com/a/13333209/190148\">better than the Java ones</a> in Kotlin to make chained calls work correctly with inheritance?</p>\n"}, {"tags": ["generics", "overriding", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1455623959, "post_id": 35431249, "comment_id": 58561976, "body": "what line throws the error?"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 8, "last_activity_date": 1455634390, "last_edit_date": 1455634390, "creation_date": 1455625476, "answer_id": 35432554, "question_id": 35431249, "link": "https://stackoverflow.com/questions/35431249/kotlin-override-generic-property-within-subtype/35432554#35432554", "title": "Kotlin: override generic property within subtype", "body": "<p>First, <code>SubtypeA&lt;B&gt;</code> is a subtype of <code>BaseA&lt;B&gt;</code>, so the problem is in the generics parameters subtyping.</p>\n\n<p>The answer lies in <a href=\"https://kotlinlang.org/docs/reference/generics.html#variance\" rel=\"noreferrer\">Kotlin generics variance</a>, which is similar to <a href=\"https://dzone.com/articles/covariance-and-contravariance\" rel=\"noreferrer\">that of Java</a>.</p>\n\n<blockquote>\n  <p>Why doesn't <code>SubtypeA&lt;SubtypeB&gt;</code> count as subtype of <code>BaseA&lt;BaseB&gt;</code>?</p>\n</blockquote>\n\n<p>The generics are invariant by default, which means that, even in simpler case, for a class <code>A&lt;T&gt;</code>, <code>A&lt;SubtypeB&gt;</code> and <code>A&lt;BaseB&gt;</code> are not subtypes of each other unless otherwise is specified by variance modifiers <code>in</code> and <code>out</code> (or <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html\" rel=\"noreferrer\">Java wildcards</a>).</p>\n\n<p>Two cases are possible: </p>\n\n<ul>\n<li><p>If you want only to <em>take</em> <code>T</code> instances out of instances of your class <code>A</code>, then you can use <code>out</code> modifier: <code>A&lt;out T&gt;</code>.</p>\n\n<p>Here <code>A&lt;SubtypeB&gt;</code> becomes a subtype of <code>A&lt;BaseB&gt;</code>, because from <code>A&lt;SubtypeB&gt;</code> you can obviously take instances of <code>BaseB</code>, and not vice versa.</p></li>\n<li><p>If you want only to <em>pass</em> <code>T</code> into your class' methods, then use <code>in</code> modifier in your class declaration: <code>A&lt;in T&gt;</code>.</p>\n\n<p>And here <code>A&lt;BaseB&gt;</code> is a subtype of <code>A&lt;SubtypeB&gt;</code>, because every instance of <code>A&lt;BaseB&gt;</code> can also receive <code>SubtypeB</code> into the methods, but not vice versa.</p></li>\n</ul>\n\n<p>If you both pass and take <code>T</code> to/from your class <code>A&lt;T&gt;</code>, then the only option for <code>T</code> it is to be invariant, so that neither <code>A&lt;SubB&gt;</code> nor <code>A&lt;SuperB&gt;</code> are subtypes of <code>A&lt;B&gt;</code>: otherwise would lead to a contradiction to the above.</p>\n\n<p>And this is exactly the case: in your <code>BaseP&lt;B&gt;</code>, you are both taking items of <code>V</code> and putting ones into <code>view</code> property, so <code>V</code> can only be invariant, and <code>BaseP&lt;SubF&gt;</code> is not a subtype of <code>BaseP&lt;BaseF&gt;</code>, neither is <code>SubP&lt;SubF&gt;</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 2008405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b6dcecd95960968b7f25400ecd0d78?s=128&d=identicon&r=PG", "display_name": "Alex Bubnov", "link": "https://stackoverflow.com/users/2008405/alex-bubnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2569, "favorite_count": 0, "accepted_answer_id": 35432554, "answer_count": 1, "score": 7, "last_activity_date": 1455634390, "creation_date": 1455621854, "last_edit_date": 1455627077, "question_id": 35431249, "link": "https://stackoverflow.com/questions/35431249/kotlin-override-generic-property-within-subtype", "title": "Kotlin: override generic property within subtype", "body": "<p>I trying to write some generic code, but can't get rid of <code>Type of 'PROPERTY' is not a subtype of the overridden property</code> error. </p>\n\n<p>Simplified version of my code:</p>\n\n<pre><code>abstract class BaseP&lt;V&gt; {\n    var view: V? = null\n}\n\nabstract class BaseF {\n    fun smth() {\n        pp.view = this\n    }\n    abstract val pp: BaseP&lt;BaseF&gt;\n}\n\nabstract class SubF: BaseF() {\n    abstract override val pp: BaseP&lt;SubF&gt;\n    // Error:(20, 30) Type of 'pp' is not a subtype of the overridden property 'public abstract val pp: BaseP&lt;BaseF&gt; defined in BaseF'\n}\n</code></pre>\n\n<p>I found that error can be <code>@Suppress</code>-ed, but I doubt it is best and only way. Is there something better?</p>\n\n<p>And after all I can't understand, why <code>subtypeA&lt;subtypeB&gt;</code> doesn't count as subtype of <code>baseA&lt;baseB&gt;</code>, can someone explain this?</p>\n"}, {"tags": ["java", "java-stream", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455626706, "post_id": 35427463, "comment_id": 58563858, "body": "<code>stream()</code> equivalents in Kotlin:  <a href=\"http://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr\" title=\"what java 8 stream collect equivalents are available in the standard kotlin libr\">stackoverflow.com/questions/34642254/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1455617650, "last_edit_date": 1495542668, "creation_date": 1455612609, "answer_id": 35427807, "question_id": 35427463, "link": "https://stackoverflow.com/questions/35427463/lazy-stream-operations-and-unresolved-reference-for-stream/35427807#35427807", "title": "Lazy stream operations and unresolved reference for stream()", "body": "<ol>\n<li><p>Kotlin does not use Java 8 Streams, instead there is lazy <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/index.html\" rel=\"nofollow noreferrer\"><code>Sequence&lt;T&gt;</code></a>. It has API mostly unified with <code>Iterable&lt;T&gt;</code>, so you can learn more about its usage <a href=\"https://stackoverflow.com/questions/34642254/what-java-8-stream-collect-equivalents-are-available-in-the-standard-kotlin-libr\">here</a>.</p>\n\n<p><code>Sequence&lt;T&gt;</code> is similar to <code>Stream&lt;T&gt;</code>, but it offers more when it comes to sequential data (e.g. <code>takeWhile</code>), though it has no parallel operations support at the moment*.</p>\n\n<p>Another reason for introducing a replacement for Stream API is that Kotlin targets Java 6, which has no Streams, so they <a href=\"http://blog.jetbrains.com/kotlin/2015/06/kotlin-evolves-how-to-keep-your-code-up/\" rel=\"nofollow noreferrer\">were dropped</a> from Kotlin stdlib in favor of <code>Sequence&lt;T&gt;</code>.</p></li>\n<li><p>A <code>Sequence&lt;T&gt;</code> can be created from an <code>Iterable&lt;T&gt;</code> (which every <code>Collection&lt;T&gt;</code> is) with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"nofollow noreferrer\"><code>asSequence()</code></a> method:</p>\n\n<pre><code>val l = ArrayList&lt;String&gt;()\nval sequence = l.asSequence()\n</code></pre>\n\n<p>This is equivalent to <code>.stream()</code> in Java and will let you process a collection lazily. Otherwise, transformations are eagerly applied to a collection.</p></li>\n</ol>\n\n<hr>\n\n<p><sub>* If you need it, the workaround is to rollback to Java 8 Streams:</p>\n\n<p><code>(collection as java.lang.Collection&lt;T&gt;).parallelStream()</code></sub></p>\n"}], "owner": {"reputation": 166, "user_id": 1293630, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71710642f31a543b7c6aea54807d9fc?s=128&d=identicon&r=PG", "display_name": "Alexey Pomelov", "link": "https://stackoverflow.com/users/1293630/alexey-pomelov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 35427807, "answer_count": 1, "score": 4, "last_activity_date": 1455617650, "creation_date": 1455611592, "question_id": 35427463, "link": "https://stackoverflow.com/questions/35427463/lazy-stream-operations-and-unresolved-reference-for-stream", "title": "Lazy stream operations and unresolved reference for stream()", "body": "<p>I'm developing some log analyzing tool with kotlin. I have a large amount of incoming logs so it impossible to load them all into the memory, I need to process them in \"pipeline\" manner.\nAnd I found out two things disappointing me:</p>\n\n<ol>\n<li>As I understand all stream-like methods for kotlin collections (<code>filter</code>, <code>map</code> and so on) are not lazy. E.g. I have 1 GB of logs and want to get lengths of first ten lines that are matches the given regexp. If I write it as is, filtering and transforming will be applied to whole gigabyte of strings in memory.</li>\n<li>I can't write <code>l.stream()</code>, where l defined as <code>val l = ArrayList&lt;String&gt;()</code>. Compiler says: \"Unresolved reference: stream\".</li>\n</ol>\n\n<p>So the questions are: are you going to make collection functions lazy? And why can't I access the <code>stream()</code> method?</p>\n"}, {"tags": ["exec", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455626336, "post_id": 35421699, "comment_id": 58563621, "body": "This is the same as in Java.  You will find many examples for Java that you can use as-is for Kotlin with small syntax changes (maybe).  There are even libraries that do this to handle cases like capturing stdout and more.  What did you try already, do you have code you tried to share?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455626484, "post_id": 35421699, "comment_id": 58563697, "body": "<a href=\"http://stackoverflow.com/questions/9657038/how-can-java-execute-batch-file-in-separate-process-tree\" title=\"how can java execute batch file in separate process tree\">stackoverflow.com/questions/9657038/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455626517, "post_id": 35421699, "comment_id": 58563720, "body": "<a href=\"http://stackoverflow.com/questions/931536/how-do-i-launch-a-completely-independent-process-from-a-java-program\" title=\"how do i launch a completely independent process from a java program\">stackoverflow.com/questions/931536/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455626566, "post_id": 35421699, "comment_id": 58563757, "body": "<a href=\"http://stackoverflow.com/questions/31201250/execute-or-run-application-with-java-runtime-or-process-builder\" title=\"execute or run application with java runtime or process builder\">stackoverflow.com/questions/31201250/&hellip;</a>"}, {"owner": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455723713, "post_id": 35421699, "comment_id": 58618553, "body": "basically I want execute a command from with kotlin and capture the output (stdio/stderr) ..."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455724012, "post_id": 35421699, "comment_id": 58618821, "body": "Then go read how to do that in Java from the many examples on Google and on StackOverflow, then change the syntax to Kotlin.  It is not a Kotlin topic, but a JVM and Java stdlib topic.  And it has been exhaustively covered already.  This is a dupe."}, {"owner": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455731244, "post_id": 35421699, "comment_id": 58623821, "body": "I know how to do it in Java, thank you. However, I find it&#39;s non-trivial to convert Java solution to a concise Kotlin one."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455735884, "post_id": 35421699, "comment_id": 58626553, "body": "Try it, and if you have issues or specific questions, show your code.  You can also write it as Java, then ask IntelliJ IDEA to do the conversion and work from there.  It is likely trivial, I think you are setting expectations wrong.  And in Stack Overflow it is assumed the question asker makes a good attempt before asking, and shows their work.  (I see close votes collecting on the question, probably due to being too generic &quot;write this for me&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "edited": false, "score": 1, "creation_date": 1455644818, "post_id": 35421899, "comment_id": 58576866, "body": "can I have complete kotlin code piece (imports) that I can try?"}, {"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "reply_to_user": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "edited": false, "score": 0, "creation_date": 1455660968, "post_id": 35421899, "comment_id": 58586251, "body": "That is actually the complete Kotlin code you need. You don&#39;t need any extra imports because Runtime is in the java.lang package which is always in scope."}, {"owner": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "edited": false, "score": 0, "creation_date": 1455667473, "post_id": 35421899, "comment_id": 58588875, "body": "then, how to get output of stdout and stderr ?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "edited": false, "score": 0, "creation_date": 1455770693, "post_id": 35421899, "comment_id": 58640949, "body": "@BigTummy same way you would in Java.  It is NO different."}, {"owner": {"reputation": 561, "user_id": 2007487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/51f996eb890659a93d41fe083a039ad6?s=128&d=identicon&r=PG", "display_name": "kls", "link": "https://stackoverflow.com/users/2007487/kls"}, "edited": false, "score": 2, "creation_date": 1537862142, "post_id": 35421899, "comment_id": 91926997, "body": "Simply running this will cause a big risk of command not completing if it has output to stdout. See <a href=\"https://stackoverflow.com/questions/5483830/process-waitfor-never-returns\" title=\"process waitfor never returns\">stackoverflow.com/questions/5483830/&hellip;</a>."}], "tags": [], "owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "is_accepted": false, "score": 29, "last_activity_date": 1455621350, "last_edit_date": 1455621350, "creation_date": 1455584567, "answer_id": 35421899, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/35421899#35421899", "title": "How to invoke external command from within Kotlin code?", "body": "<p>If you're running on the JVM you can just use Java Runtime <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String)\" rel=\"noreferrer\"><code>exec</code> method</a>.\ne.g.</p>\n\n<pre><code>Runtime.getRuntime().exec(\"mycommand.sh\")\n</code></pre>\n\n<p>You will need to have security permission to execute commands.</p>\n"}, {"comments": [{"owner": {"reputation": 2901, "user_id": 227779, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/04b9cea001c22cc62e650a3180a1123a?s=128&d=identicon&r=PG", "display_name": "Per Lundberg", "link": "https://stackoverflow.com/users/227779/per-lundberg"}, "edited": false, "score": 26, "creation_date": 1529774315, "post_id": 41495542, "comment_id": 89000402, "body": "This answer gets the bonus points since it tries to do what the OP asked, namely to <i>do this in Kotlin</i> (or, in a way natural to Kotlin) - instead of just saying &quot;this is the same as in Java&quot;, this answer tries to find a way within &quot;idiomatic Kotlin&quot; to achieve this."}, {"owner": {"reputation": 784, "user_id": 2771562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2GYrS.jpg?s=128&g=1", "display_name": "Michael_H", "link": "https://stackoverflow.com/users/2771562/michael-h"}, "edited": false, "score": 0, "creation_date": 1574160123, "post_id": 41495542, "comment_id": 104123491, "body": "I&#39;m using the code from 2. Capturing output as a String. My IDE suggests two imports for IOException. Should I use IOException (java.io) or IOException (ktlinx.io.errors) ?"}, {"owner": {"reputation": 23746, "user_id": 510017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/acdea246313ec67505a196fff761e514?s=128&d=identicon&r=PG", "display_name": "jkschneider", "link": "https://stackoverflow.com/users/510017/jkschneider"}, "reply_to_user": {"reputation": 784, "user_id": 2771562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2GYrS.jpg?s=128&g=1", "display_name": "Michael_H", "link": "https://stackoverflow.com/users/2771562/michael-h"}, "edited": false, "score": 3, "creation_date": 1574191948, "post_id": 41495542, "comment_id": 104141532, "body": "@Michael_H <code>java.io.IOException</code>"}, {"owner": {"reputation": 10814, "user_id": 891242, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5719e9d6125bf8f75501a83e68b11412?s=128&d=identicon&r=PG", "display_name": "ZakTaccardi", "link": "https://stackoverflow.com/users/891242/zaktaccardi"}, "edited": false, "score": 1, "creation_date": 1605234145, "post_id": 41495542, "comment_id": 114595470, "body": "note - this actually hides the errorStream. You need <code>val errorStream = proc.errorStream.bufferedReader().readText()</code> to do something with it"}], "tags": [], "owner": {"reputation": 23746, "user_id": 510017, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/acdea246313ec67505a196fff761e514?s=128&d=identicon&r=PG", "display_name": "jkschneider", "link": "https://stackoverflow.com/users/510017/jkschneider"}, "is_accepted": false, "score": 143, "last_activity_date": 1484162744, "last_edit_date": 1484162744, "creation_date": 1483653920, "answer_id": 41495542, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/41495542#41495542", "title": "How to invoke external command from within Kotlin code?", "body": "<p>Example of running a git diff by shelling out:</p>\n\n<p><code>\"git diff\".runCommand(gitRepoDir)</code></p>\n\n<p>Here are two implementations of the <code>runCommand</code> extension function:</p>\n\n<h2>1. Redirect to stdout/stderr</h2>\n\n<p>This wires any output from the subprocess to regular stdout and stderr:</p>\n\n<pre><code>fun String.runCommand(workingDir: File) {\n    ProcessBuilder(*split(\" \").toTypedArray())\n                .directory(workingDir)\n                .redirectOutput(Redirect.INHERIT)\n                .redirectError(Redirect.INHERIT)\n                .start()\n                .waitFor(60, TimeUnit.MINUTES)\n}\n</code></pre>\n\n<h2>2. Capturing output as a String</h2>\n\n<p>An alternative implementation redirecting to <code>Redirect.PIPE</code> instead allows you to capture output in a <code>String</code>:</p>\n\n<pre><code>fun String.runCommand(workingDir: File): String? {\n    try {\n        val parts = this.split(\"\\\\s\".toRegex())\n        val proc = ProcessBuilder(*parts.toTypedArray())\n                .directory(workingDir)\n                .redirectOutput(ProcessBuilder.Redirect.PIPE)\n                .redirectError(ProcessBuilder.Redirect.PIPE)\n                .start()\n\n        proc.waitFor(60, TimeUnit.MINUTES)\n        return proc.inputStream.bufferedReader().readText()\n    } catch(e: IOException) {\n        e.printStackTrace()\n        return null\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3270, "user_id": 727184, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/xARBY.png?s=128&g=1", "display_name": "GarouDan", "link": "https://stackoverflow.com/users/727184/garoudan"}, "edited": false, "score": 0, "creation_date": 1592086570, "post_id": 51853078, "comment_id": 110299988, "body": "Where can we find the definition of this function in the repository? How can we get the output or the error returned by the command? Like we do with the inputStream and errorStream for jvm?"}, {"owner": {"reputation": 1302, "user_id": 420412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd48725d80ea0268e4011a520a89c7?s=128&d=identicon&r=PG", "display_name": "gildor", "link": "https://stackoverflow.com/users/420412/gildor"}, "edited": false, "score": 0, "creation_date": 1602471286, "post_id": 51853078, "comment_id": 113721225, "body": "I <a href=\"https://stackoverflow.com/a/64311102/420412\">posted an example for Kotlin/Native</a> which returns output and throws exception with error"}], "tags": [], "owner": {"reputation": 853, "user_id": 3311219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f955689be0073f63d093f084465a37da?s=128&d=identicon&r=PG", "display_name": "Tarek360", "link": "https://stackoverflow.com/users/3311219/tarek360"}, "is_accepted": false, "score": 16, "last_activity_date": 1534308191, "creation_date": 1534308191, "answer_id": 51853078, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/51853078#51853078", "title": "How to invoke external command from within Kotlin code?", "body": "<p>For Kotlin Native:</p>\n\n<pre><code>platform.posix.system(\"git status\")\n</code></pre>\n\n<p>For JVM</p>\n\n<pre><code>Runtime.getRuntime().exec(\"git status\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2753, "user_id": 57624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0f525bca56fcb7107eb4c1138fb57c?s=128&d=identicon&r=PG", "display_name": "Michael Rush", "link": "https://stackoverflow.com/users/57624/michael-rush"}, "edited": false, "score": 0, "creation_date": 1539038941, "post_id": 52441962, "comment_id": 92348227, "body": "Only, I think <code>TimeUnit.SECONDS</code> was intended for the <code>timeoutUnit</code> default."}, {"owner": {"reputation": 8032, "user_id": 1414809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63e622128f1f2b74858a10c1a60707fb?s=128&d=identicon&r=PG", "display_name": "Ebrahim Byagowi", "link": "https://stackoverflow.com/users/1414809/ebrahim-byagowi"}, "reply_to_user": {"reputation": 2753, "user_id": 57624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0f525bca56fcb7107eb4c1138fb57c?s=128&d=identicon&r=PG", "display_name": "Michael Rush", "link": "https://stackoverflow.com/users/57624/michael-rush"}, "edited": false, "score": 0, "creation_date": 1540309124, "post_id": 52441962, "comment_id": 92813626, "body": "Applied, SECONDS makes more sense :)"}, {"owner": {"reputation": 1753, "user_id": 3429015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3i3YN.png?s=128&g=1", "display_name": "Danon", "link": "https://stackoverflow.com/users/3429015/danon"}, "edited": false, "score": 0, "creation_date": 1599757494, "post_id": 52441962, "comment_id": 112880271, "body": "Just throw another exception, if IOException is thrown."}], "tags": [], "owner": {"reputation": 8032, "user_id": 1414809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63e622128f1f2b74858a10c1a60707fb?s=128&d=identicon&r=PG", "display_name": "Ebrahim Byagowi", "link": "https://stackoverflow.com/users/1414809/ebrahim-byagowi"}, "is_accepted": false, "score": 11, "last_activity_date": 1619092099, "last_edit_date": 1619092099, "creation_date": 1537526504, "answer_id": 52441962, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/52441962#52441962", "title": "How to invoke external command from within Kotlin code?", "body": "<p>Based on @jkschneider answer but a little more Kotlin-ified:</p>\n<pre><code>fun String.runCommand(\n    workingDir: File = File(&quot;.&quot;),\n    timeoutAmount: Long = 60,\n    timeoutUnit: TimeUnit = TimeUnit.SECONDS\n): String? = runCatching {\n    ProcessBuilder(&quot;\\\\s&quot;.toRegex().split(this))\n        .directory(workingDir)\n        .redirectOutput(ProcessBuilder.Redirect.PIPE)\n        .redirectError(ProcessBuilder.Redirect.PIPE)\n        .start().also { it.waitFor(timeoutAmount, timeoutUnit) }\n        .inputStream.bufferedReader().readText()\n}.onFailure { it.printStackTrace() }.getOrNull()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44415, "user_id": 356895, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/022ac4ee5fc9f2474d60c9a1a6dd16f5?s=128&d=identicon&r=PG", "display_name": "JJD", "link": "https://stackoverflow.com/users/356895/jjd"}, "edited": false, "score": 2, "creation_date": 1568884472, "post_id": 54620293, "comment_id": 102419733, "body": "Side note: Sadly <code>command.split(&#39; &#39;)</code> produces a wrong list as soon as you use commands such as <code>git log --pretty=&quot;%D %s&quot;</code> which can contain a space character - as you point out in your leading comment."}], "tags": [], "owner": {"reputation": 1547, "user_id": 1020871, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2af0b561054a608a7f1877deaeb3f748?s=128&d=identicon&r=PG", "display_name": "Love", "link": "https://stackoverflow.com/users/1020871/love"}, "is_accepted": false, "score": 6, "last_activity_date": 1549827929, "creation_date": 1549827929, "answer_id": 54620293, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/54620293#54620293", "title": "How to invoke external command from within Kotlin code?", "body": "<p>I wanted a few changes from <a href=\"https://stackoverflow.com/a/41495542/1020871\">the solution of jkschneider</a>, as it didn't catch the error codes I got from the executed commands. Also I did a few refactorings to get this:</p>\n\n<pre><code>directory exec \"git status\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>directory.execute(\"git\", \"commit\", \"-m\", \"A message\")\n</code></pre>\n\n<p>I also opted to throw exceptions for error codes and shortened the wait, but that can easily be altered according to taste.</p>\n\n<pre><code>/**\n * Shorthand for [File.execute]. Assumes that all spaces are argument separators,\n * so no argument may contain a space.\n * ```kotlin\n *  // Example\n *  directory exec \"git status\"\n *\n *  // This fails since `'A` and `message'` will be considered as two arguments\n *  directory exec \"git commit -m 'A message'\"\n * ```\n */\ninfix fun File.exec(command: String): String {\n    val arguments = command.split(' ').toTypedArray()\n    return execute(*arguments)\n}\n\n/**\n * Executes command. Arguments may contain strings. More appropriate than [File.exec]\n * when using dynamic arguments.\n * ```kotlin\n *  // Example\n *  directory.execute(\"git\", \"commit\", \"-m\", \"A message\")\n * ```\n */\nfun File.execute(vararg arguments: String): String {\n    val process = ProcessBuilder(*arguments)\n        .directory(this)\n        .start()\n        .also { it.waitFor(10, TimeUnit.SECONDS) }\n\n    if (process.exitValue() != 0) {\n        throw Exception(process.errorStream.bufferedReader().readText())\n    }\n    return process.inputStream.bufferedReader().readText()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 176, "user_id": 8651748, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LkQCVfzSNlg/AAAAAAAAAAI/AAAAAAAAAAs/tnR2NGifmB4/photo.jpg?sz=128", "display_name": "Daniel Connelly", "link": "https://stackoverflow.com/users/8651748/daniel-connelly"}, "edited": false, "score": 1, "creation_date": 1598035909, "post_id": 59771204, "comment_id": 112337586, "body": "Best answer as far as I am concerned.. I did not need to change a thing. For future users though, if on Windows, escape use <code>&quot;</code> instead of <code>&#39;</code>."}], "tags": [], "owner": {"reputation": 2697, "user_id": 3968618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e30a2d6578dac01e13ed70412a499fcf?s=128&d=identicon&r=PG&f=1", "display_name": "leondepeon", "link": "https://stackoverflow.com/users/3968618/leondepeon"}, "is_accepted": false, "score": 3, "last_activity_date": 1579188384, "last_edit_date": 1579188384, "creation_date": 1579182951, "answer_id": 59771204, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/59771204#59771204", "title": "How to invoke external command from within Kotlin code?", "body": "<p>As this is the first google result when searching for how to run commands in kotlin, I found my self struggeling to extend it to get basic standard input working, as the Pipe \"|\" is not supported for the ProcessBuilder. I've found out how to do it, and thought I'd share.\nI've converted jkschneider's answer to be run as a simple function, now with optional stdin and output capturing.\nIt's a little less pretty, but more flexible.\nYou can run it like this:</p>\n\n<pre><code>exec(\"someCommandWithUserInput\", stdIn = \"yes\")\n</code></pre>\n\n<pre><code>/** Run a system-level command.\n * Note: This is a system independent java exec (e.g. | doesn't work). For shell: prefix with \"bash -c\"\n * Inputting the string in stdIn (if any), and returning stdout and stderr as a string. */\nfun exec(cmd: String, stdIn: String = \"\", captureOutput:Boolean = false, workingDir: File = File(\".\")): String? {\n    try {\n        val process = ProcessBuilder(*cmd.split(\"\\\\s\".toRegex()).toTypedArray())\n            .directory(workingDir)\n            .redirectOutput(if (captureOutput) ProcessBuilder.Redirect.PIPE else ProcessBuilder.Redirect.INHERIT)\n            .redirectError(if (captureOutput) ProcessBuilder.Redirect.PIPE else ProcessBuilder.Redirect.INHERIT)\n            .start().apply {\n                if (stdIn != \"\") {\n                    outputStream.bufferedWriter().apply {\n                        write(stdIn)\n                        flush()\n                        close()\n                    }\n                }\n                waitFor(60, TimeUnit.SECONDS)\n            }\n        if (captureOutput) {\n            return process.inputStream.bufferedReader().readText()\n        }\n    } catch (e: IOException) {\n        e.printStackTrace()\n    }\n    return null\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1302, "user_id": 420412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97dd48725d80ea0268e4011a520a89c7?s=128&d=identicon&r=PG", "display_name": "gildor", "link": "https://stackoverflow.com/users/420412/gildor"}, "is_accepted": false, "score": 0, "last_activity_date": 1602472045, "last_edit_date": 1602472045, "creation_date": 1602471168, "answer_id": 64311102, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code/64311102#64311102", "title": "How to invoke external command from within Kotlin code?", "body": "<p>For Kotlin/Native I use this posix-based implementation:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import kotlinx.cinterop.*\nimport platform.posix.*\n\nfun executeCommand(\n    command: String,\n    trim: Boolean = true,\n    redirectStderr: Boolean = true\n): String {\n    val commandToExecute = if (redirectStderr) &quot;$command 2&gt;&amp;1&quot; else command\n    val fp = popen(commandToExecute, &quot;r&quot;) ?: error(&quot;Failed to run command: $command&quot;)\n\n    val stdout = buildString {\n        val buffer = ByteArray(4096)\n        while (true) {\n            val input = fgets(buffer.refTo(0), buffer.size, fp) ?: break\n            append(input.toKString())\n        }\n    }\n\n    val status = pclose(fp)\n    if (status != 0) {\n        error(&quot;Command `$command` failed with status $status${if (redirectStderr) &quot;: $stdout&quot; else &quot;&quot;}&quot;)\n    }\n\n    return if (trim) stdout.trim() else stdout\n}\n</code></pre>\n"}], "owner": {"reputation": 721, "user_id": 5932543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9577b24089249935056df0c6e4f665cb?s=128&d=identicon&r=PG&f=1", "display_name": "Big Tummy", "link": "https://stackoverflow.com/users/5932543/big-tummy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33479, "favorite_count": 18, "answer_count": 7, "score": 68, "last_activity_date": 1619092099, "creation_date": 1455583153, "last_edit_date": 1613697104, "question_id": 35421699, "link": "https://stackoverflow.com/questions/35421699/how-to-invoke-external-command-from-within-kotlin-code", "title": "How to invoke external command from within Kotlin code?", "body": "<p>I want to invoke an external command from Kotlin code.</p>\n<ul>\n<li>In C/Perl, I would use the <code>system()</code> function.</li>\n<li>In Python, I would use the subprocess module.</li>\n<li>In Go, I would use os/exec, and etc.</li>\n</ul>\n<p>But how do I do this in Kotlin?</p>\n"}, {"tags": ["kotlin", "name-collision"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1455543781, "post_id": 35409242, "comment_id": 58522503, "body": "You&#39;re probably confused with what modules are, please check that your <code>Module1.kt</code> and <code>Module2.kt</code> are actually in different modules according to <a href=\"http://stackoverflow.com/questions/35271413/what-is-a-kotlin-module\">this question</a>. I tried this with multiple modules and didn&#39;t have a redeclaration error."}], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 13, "last_activity_date": 1456408420, "last_edit_date": 1456408420, "creation_date": 1455543600, "answer_id": 35410882, "question_id": 35409242, "link": "https://stackoverflow.com/questions/35409242/cant-create-private-classes-with-same-name-in-different-modules/35410882#35410882", "title": "Can&#39;t create private classes with same name in different modules", "body": "<p>\"A module is a set of Kotlin files compiled together\" (<a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"noreferrer\">Visibility Modifiers - Kotlin Programming Language</a>).</p>\n\n<p>In your example, <code>Module1.kt</code> and <code>Module2.kt</code> are separate source files and despite their names they are not necessarily part of separate modules:</p>\n\n<ul>\n<li>If they are compiled together then they are part of the same module.</li>\n<li>If they are compiled separately from one another then they will be part of different modules and each can define their own <code>private class A</code>.</li>\n</ul>\n\n<p>Keep in mind that visibility is different from identity. Even if a <code>class</code> is not visible elsewhere it doesn't mean that it does not exist. Loading multiple class declarations with the same fully-qualified name can (and likely will) cause issues at run-time.</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3450, "favorite_count": 1, "accepted_answer_id": 35410882, "answer_count": 1, "score": 7, "last_activity_date": 1456408420, "creation_date": 1455538782, "question_id": 35409242, "link": "https://stackoverflow.com/questions/35409242/cant-create-private-classes-with-same-name-in-different-modules", "title": "Can&#39;t create private classes with same name in different modules", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"noreferrer\">Official docs</a> on visibility modifiers in Kotlin say that package-level elements marked <code>private</code> are be visible only in the module in which they are declared. </p>\n\n<p>So class <code>A</code> declared in <code>Module1.kt</code> isn't visible in <code>Module2.kt</code>. But if I try to add to <code>Module2.kt</code> it's own class <code>A</code> I get the <code>Redeclaration: A</code> error. </p>\n\n<p>Since I can't access in <code>Module2.kt</code> to <code>Module1</code>'s <code>A</code> class, why isn't the name <code>A</code> free to use?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 3, "creation_date": 1455618536, "post_id": 35397230, "comment_id": 58558379, "body": "Also consider using <code>import java.lang.Double as JDouble</code> to turn <code>java.lang.Double</code> into <code>JDouble</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 22, "last_activity_date": 1554910833, "last_edit_date": 1554910833, "creation_date": 1455479614, "answer_id": 35397230, "question_id": 35397116, "link": "https://stackoverflow.com/questions/35397116/convert-double-to-bytearray-or-arraybyte-kotlin/35397230#35397230", "title": "Convert Double to ByteArray or Array&lt;Byte&gt; Kotlin", "body": "<p>You can still use Java <code>Double</code>'s methods, though you will have to use full qualified names:</p>\n\n<pre><code>val double = 1.2345\nval long = java.lang.Double.doubleToLongBits(double)\n</code></pre>\n\n<p>Then convert it to <code>ByteArray</code> in <a href=\"https://stackoverflow.com/questions/4485128/how-do-i-convert-long-to-byte-and-back-in-java\">any way that works in Java</a>, such as</p>\n\n<pre><code>val bytes = ByteBuffer.allocate(java.lang.Long.BYTES).putLong(long).array()\n</code></pre>\n\n<p><sup>(note the full qualified name again)</sup></p>\n\n<hr>\n\n<p>You can then make an <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">extension function</a> for this:</p>\n\n<pre><code>fun Double.bytes() = \n    ByteBuffer.allocate(java.lang.Long.BYTES)\n        .putLong(java.lang.Double.doubleToLongBits(this))\n        .bytes()\n</code></pre>\n\n<p>And the usage:</p>\n\n<pre><code>val bytes = double.bytes()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1234, "user_id": 777420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3175c39b83e61797285535c1c2ad487?s=128&d=identicon&r=PG", "display_name": "firen", "link": "https://stackoverflow.com/users/777420/firen"}, "is_accepted": false, "score": 3, "last_activity_date": 1589753643, "creation_date": 1589753643, "answer_id": 61859511, "question_id": 35397116, "link": "https://stackoverflow.com/questions/35397116/convert-double-to-bytearray-or-arraybyte-kotlin/61859511#61859511", "title": "Convert Double to ByteArray or Array&lt;Byte&gt; Kotlin", "body": "<p>It looks like some convinient methods were added since your answer and you can achieve the same with</p>\n\n<pre><code>val double = 1.2345\nByteBuffer.allocate(java.lang.Double.BYTES)\n     .putDouble(double).array()\n</code></pre>\n"}], "owner": {"reputation": 629, "user_id": 2104648, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422a99817d5df8fce3ed70457ffbe79d?s=128&d=identicon&r=PG", "display_name": "Caelum", "link": "https://stackoverflow.com/users/2104648/caelum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9851, "favorite_count": 1, "accepted_answer_id": 35397230, "answer_count": 2, "score": 13, "last_activity_date": 1589753643, "creation_date": 1455478370, "last_edit_date": 1455488306, "question_id": 35397116, "link": "https://stackoverflow.com/questions/35397116/convert-double-to-bytearray-or-arraybyte-kotlin", "title": "Convert Double to ByteArray or Array&lt;Byte&gt; Kotlin", "body": "<p>Given a Double</p>\n\n<pre><code>val double = 1.2345\n</code></pre>\n\n<p>How can I convert that to a Kotlin <code>ByteArray</code>, and/or <code>Array&lt;Byte&gt;</code>?</p>\n\n<p>Whose content would look like the following after converting 1.2345</p>\n\n<pre><code>00111111 11110011 11000000 10000011\n00010010 01101110 10010111 10001101\n</code></pre>\n\n<p>In Java, there is a sollution that involves <code>Double.doubleToLongBits()</code>(A static method of java.lang.Double), but in Kotlin, Double refers to <code>Kotlin.Double</code>, which has no such (or any other useful in this situation) method.</p>\n\n<p>I don't mind if a sollution yields <code>Kotlin.Double</code> inaccessible in this file. :)</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1455420136, "post_id": 35387970, "comment_id": 58480313, "body": "There&#39;s an update available to the Kotlin IDE plugin.  Perhaps you should update it along with your Kotlin compile dependency?"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1455432870, "creation_date": 1455432870, "answer_id": 35389193, "question_id": 35387970, "link": "https://stackoverflow.com/questions/35387970/android-studio-1-5-with-kotlin-plugin-got-exception-when-is-in-debugger-mode-h/35389193#35389193", "title": "Android Studio 1.5 with Kotlin Plugin got exception, when is in debugger mode. How to fix it?", "body": "<p>This exception is fixed in Kotlin 1.0-rc. Please update your plugin and the version of Kotlin in your build.gradle.</p>\n"}, {"tags": [], "owner": {"reputation": 3721, "user_id": 376680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5012b2e9db5468ca91d34196155f756a?s=128&d=identicon&r=PG", "display_name": "mraaroncruz", "link": "https://stackoverflow.com/users/376680/mraaroncruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1487842842, "creation_date": 1487842842, "answer_id": 42411950, "question_id": 35387970, "link": "https://stackoverflow.com/questions/35387970/android-studio-1-5-with-kotlin-plugin-got-exception-when-is-in-debugger-mode-h/42411950#42411950", "title": "Android Studio 1.5 with Kotlin Plugin got exception, when is in debugger mode. How to fix it?", "body": "<p>This happened to me because I had some kind of circular dependency on an interface inside my class.</p>\n\n<p>I solved it by just looking for errors in my code and fixing them.</p>\n\n<p>This is a kind of tricky one because the error sounds like it is an error in the Kotlin plugin. It is likely just a coding error. So look for the red squigglies and fix them.</p>\n"}], "owner": {"reputation": 2313, "user_id": 188784, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8d01c8770c1bc401180156b3bbf9d3b0?s=128&d=identicon&r=PG", "display_name": "Gohan", "link": "https://stackoverflow.com/users/188784/gohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "accepted_answer_id": 35389193, "answer_count": 2, "score": 2, "last_activity_date": 1492276845, "creation_date": 1455419775, "last_edit_date": 1492276845, "question_id": 35387970, "link": "https://stackoverflow.com/questions/35387970/android-studio-1-5-with-kotlin-plugin-got-exception-when-is-in-debugger-mode-h", "title": "Android Studio 1.5 with Kotlin Plugin got exception, when is in debugger mode. How to fix it?", "body": "<p><code>\n10:57:54 AM Plugin Error: Kotlin threw an uncaught UnsupportedOperationException. Disable Plugin\n10:57:54 AM UnsupportedOperationException: null\n</code></p>\n\n<p>looks the Kotlin plugin got Exception when encounter the Android studio shows the java stackframe.</p>\n\n<p>Update: I <strong>did</strong> update the kotlin <strong>many days ago</strong>, but the Exception still exists. (don't know the downvotes reasons)</p>\n\n<p>I think maybe <code>ext version</code> in gradle build file still using <code>beta</code> version, I'll try to change the version in gradle</p>\n\n<h1>Solved</h1>\n\n<p>Actually it is associate with <code>gradle build file</code>, the IDE error only make me to update the IDE's plugin, not the kotlin extension itself. After change buildscript <code>ext.kotlin_version = '1.0.0-beta-4589'</code>, the problem gone</p>\n\n<p><a href=\"https://i.stack.imgur.com/00u5n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/00u5n.png\" alt=\"Bug\"></a>\n<a href=\"https://i.stack.imgur.com/qI3fg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qI3fg.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1455293052, "post_id": 35366354, "comment_id": 58439946, "body": "What&#39;s a stacktrace after these lines?"}, {"owner": {"reputation": 31, "user_id": 1617725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea0992f40dfe1e654bdc92fd5f2e612?s=128&d=identicon&r=PG", "display_name": "jtrofe", "link": "https://stackoverflow.com/users/1617725/jtrofe"}, "reply_to_user": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1455293617, "post_id": 35366354, "comment_id": 58440344, "body": "@Michael That&#39;s all logcat says after it crashes"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455308013, "post_id": 35368288, "comment_id": 58448744, "body": "You can edit your own question to indicate that it was resolved and is not really open."}], "tags": [], "owner": {"reputation": 31, "user_id": 1617725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea0992f40dfe1e654bdc92fd5f2e612?s=128&d=identicon&r=PG", "display_name": "jtrofe", "link": "https://stackoverflow.com/users/1617725/jtrofe"}, "is_accepted": true, "score": 2, "last_activity_date": 1455297783, "last_edit_date": 1455297783, "creation_date": 1455296672, "answer_id": 35368288, "question_id": 35366354, "link": "https://stackoverflow.com/questions/35366354/fatal-exception-when-not-connected-to-internet/35368288#35368288", "title": "Fatal Exception When Not Connected to Internet", "body": "<p>The view observable's subscriber needed to implement onError as well</p>\n"}], "owner": {"reputation": 31, "user_id": 1617725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea0992f40dfe1e654bdc92fd5f2e612?s=128&d=identicon&r=PG", "display_name": "jtrofe", "link": "https://stackoverflow.com/users/1617725/jtrofe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 35368288, "answer_count": 1, "score": 0, "last_activity_date": 1455305642, "creation_date": 1455291055, "last_edit_date": 1455305642, "question_id": 35366354, "link": "https://stackoverflow.com/questions/35366354/fatal-exception-when-not-connected-to-internet", "title": "Fatal Exception When Not Connected to Internet", "body": "<p>I'm trying to learn <code>Kotlin</code> and <code>rxjava</code>. I have a very simple app with just a <code>button</code> that you click that fetches some data from a website.</p>\n\n<p>Everything works fine unless I turn off of my cellular data, in which case I get a fatal exception with no explanation of why.</p>\n\n<blockquote>\n  <p>My code:</p>\n</blockquote>\n\n<pre><code>// In the activity's onCreate\nViewObservable.clicks(button)\n        .observeOn(Schedulers.io())\n        .subscribe{\n            fetchTest().observeOn(AndroidSchedulers.mainThread())\n                    .subscribe{ s:String -&gt; \n                        textView.text = s\n                    }      \n        }\n\n// Elsewhere in the activity code\n@Throws(IOException::class)\nprivate fun fetchTest(): Observable&lt;String&gt; {\n    val url = URL(MY_URL)\n    val httpConnection = url.openConnection()\n\n    var stream = httpConnection.inputStream\n\n    val reader = BufferedReader(InputStreamReader(stream))\n\n    val response = reader.readLines().reduce { x, y -&gt; x + y }\n    stream?.close()\n\n    return Observable.just(response)\n}\n</code></pre>\n\n<blockquote>\n  <p>When I'm in debug mode, the error occurs here:</p>\n</blockquote>\n\n<pre><code>var stream = httpConnection.inputStream\n</code></pre>\n\n<p>And the logcat is entirely unhelpful:</p>\n\n<pre><code>02-12 10:13:37.748    8616-8645/com.example.app E/AndroidRuntime\ufe55 FATAL EXCEPTION: RxCachedThreadScheduler-1\nProcess: com.example.app, PID: 8616\n</code></pre>\n\n<p>I know the error is because there's no network connection, but adding a try/catch can't catch it so I don't know what to do</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "edited": false, "score": 0, "creation_date": 1455287668, "post_id": 35364878, "comment_id": 58436071, "body": "Thanks! But AFAIK companion object methods is Kotlin analog to Java&#39;s static methods. And we can easily reference static methods in Java. So is this going to be supported in Kotlin?"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "edited": false, "score": 2, "creation_date": 1455287785, "post_id": 35364878, "comment_id": 58436166, "body": "No, they are not static actually. A companion object in an instance of a corresponding companion class and its methods are instance methods. If you want to make a method of a companion object static, you need to add <code>@JvmStatic</code> annotation to this method."}, {"owner": {"reputation": 338, "user_id": 1453345, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/48cba601d02383b98c71c6c1e24e86a8?s=128&d=identicon&r=PG", "display_name": "user1453345", "link": "https://stackoverflow.com/users/1453345/user1453345"}, "edited": false, "score": 1, "creation_date": 1455441072, "post_id": 35364878, "comment_id": 58484110, "body": "What is the difference between () and A.Factory.()?"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 1, "creation_date": 1455442035, "post_id": 35364878, "comment_id": 58484399, "body": "Both are function without arguments, but the latter has <code>this</code> implicit argument of type <code>A.Factory</code>."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1455286858, "creation_date": 1455286858, "answer_id": 35364878, "question_id": 35363831, "link": "https://stackoverflow.com/questions/35363831/unable-to-reference-companion-object-methods/35364878#35364878", "title": "Unable to reference companion object methods", "body": "<p>Syntactically it would be <code>A.Factory:bb</code> but it will not work. At first, <code>bb</code> is a <code>A.Factory.() -&gt; Int</code> while <code>() -&gt; Int</code> is required.</p>\n\n<p>Secondly, callable references to object members are not supported at the moment as the Kotlin compiler says. Here's a parent task for all callable members tasks: <a href=\"https://youtrack.jetbrains.com/issue/KT-1183\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-1183</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "is_accepted": false, "score": 7, "last_activity_date": 1608551361, "last_edit_date": 1608551361, "creation_date": 1551207199, "answer_id": 54892280, "question_id": 35363831, "link": "https://stackoverflow.com/questions/35363831/unable-to-reference-companion-object-methods/54892280#54892280", "title": "Unable to reference companion object methods", "body": "<p>In Kotlin 1.4+ you can use <code>process(A::bb)</code>.</p>\n<p>In 1.1.2+ you can use <code>process(A.Factory::bb)</code> or <code>process((A)::bb)</code>.</p>\n<hr />\n<p>Not so long after this question was asked Kotlin 1.1 was released with support for bound callable references:</p>\n<ul>\n<li><a href=\"https://github.com/JetBrains/kotlin/blob/master/ChangeLog.md#11-m01-eap-1\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlin/blob/master/ChangeLog.md#11-m01-eap-1</a></li>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2016/07/first-glimpse-of-kotlin-1-1-coroutines-type-aliases-and-more/</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/whatsnew11.html#bound-callable-references\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/whatsnew11.html#bound-callable-references</a></li>\n<li><a href=\"http://kotlinlang.org/docs/reference/reflection.html#bound-function-and-property-references-since-11\" rel=\"nofollow noreferrer\">http://kotlinlang.org/docs/reference/reflection.html#bound-function-and-property-references-since-11</a></li>\n</ul>\n<p>Kotlin 1.1.2 came with a fix for <a href=\"https://youtrack.jetbrains.com/issue/KT-15951\" rel=\"nofollow noreferrer\">KT-15951</a>, meaning that since then you can call <code>process(A.Factory::bb)</code>.</p>\n<p>There is also <a href=\"https://youtrack.jetbrains.com/issue/KT-13934\" rel=\"nofollow noreferrer\">KT-13934</a> targeted for Kotlin 1.4, to support <code>process(A::bb)</code>.</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3804, "favorite_count": 1, "accepted_answer_id": 35364878, "answer_count": 2, "score": 10, "last_activity_date": 1608551361, "creation_date": 1455283654, "question_id": 35363831, "link": "https://stackoverflow.com/questions/35363831/unable-to-reference-companion-object-methods", "title": "Unable to reference companion object methods", "body": "<p>I have the following code:</p>\n\n<pre><code>fun process(call: () -&gt; Int) {\n}\n\nfun aa() = 5\n\nclass A {\n    companion object Factory {\n        fun bb() = 6\n    }\n}\n\nfun test() {\n    process(::aa)   // OK\n    process(::A.bb) // Overload resolution ambiguity\n}\n</code></pre>\n\n<p>When I try to call <code>process(::A.bb)</code> I get the following error: </p>\n\n<pre><code>Error:Overload resolution ambiguity:\npublic constructor A() defined in ru.netimen.hitch_hikingstats.A\npublic companion object Factory defined in ru.netimen.hitch_hikingstats.A\n</code></pre>\n\n<p>Is there any way to reference companion object methods?</p>\n"}, {"tags": ["annotations", "jackson", "kotlin", "jongo"], "answers": [{"comments": [{"owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "edited": false, "score": 0, "creation_date": 1455280704, "post_id": 35362799, "comment_id": 58431446, "body": "Ah.. I somehow missed that part even though I was actively looking for it. This explains why mapping doesn&#39;t work without specifying @field. MongoId doesn&#39;t have TARGET, and property annotations are not visible to Java. Since Jongo uses Jackson which expects annotation on field or getter, it cannot see the annotation."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "edited": false, "score": 0, "creation_date": 1455307904, "post_id": 35362799, "comment_id": 58448698, "body": "@KresimirNesek you want it on the getter for Jackson, so <code>@get:SomeAnnotation</code> for the property."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1455280458, "creation_date": 1455280458, "answer_id": 35362799, "question_id": 35361162, "link": "https://stackoverflow.com/questions/35361162/what-is-the-default-target-for-an-annotation-when-annotating-property-in-kotlin/35362799#35362799", "title": "What is the default target for an annotation when annotating property in Kotlin?", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\">reference</a> says:</p>\n\n<blockquote>\n  <p>If you don\u2019t specify a use-site target, the target is chosen according\n  to the <code>@Target</code> annotation of the annotation being used. If there are\n  multiple applicable targets, the first applicable target from the\n  following list is used:</p>\n  \n  <ul>\n  <li><code>param</code> (constructor parameter)</li>\n  <li><code>property</code> (annotations with this target are not visible to Java)</li>\n  <li><code>field</code></li>\n  </ul>\n</blockquote>\n\n<p>So if your annotation has <code>@Target({ElementType.FIELD})</code>, the annotation in Kotlin will target <code>@field:</code>. </p>\n\n<p>If it has no <code>@Target</code> specified, it may be used on any program element: the <code>@property:</code> target is also applicable and is chosen by default.</p>\n"}], "owner": {"reputation": 4582, "user_id": 2092870, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0398348b6867339df2e7853109846ab?s=128&d=identicon&r=PG", "display_name": "Kre\u0161imir Nesek", "link": "https://stackoverflow.com/users/2092870/kre%c5%a1imir-nesek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2041, "favorite_count": 2, "accepted_answer_id": 35362799, "answer_count": 1, "score": 3, "last_activity_date": 1455367876, "creation_date": 1455275564, "last_edit_date": 1455367876, "question_id": 35361162, "link": "https://stackoverflow.com/questions/35361162/what-is-the-default-target-for-an-annotation-when-annotating-property-in-kotlin", "title": "What is the default target for an annotation when annotating property in Kotlin?", "body": "<p>Annotations in Kotlin can have different use-site targets as explained here: <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets</a></p>\n\n<p>My question is: When use-site is not explicitly defined, what is the default target when annotating property in a class like in the example below?</p>\n\n<pre><code>class Test {\n  @SomeAnnotation\n  var someProperty: String? = null\n}\n</code></pre>\n\n<p><strong>Background</strong></p>\n\n<p>I'm trying Jongo as MongoDB client in Kotlin and have problems annotating id field. Jongo does not map id property correctly when it's annotated like this:</p>\n\n<pre><code>@MongoId @MongoObjectId var id: String? = null\n</code></pre>\n\n<p>The annotations in question are just meta-annotations for Jackson. However it seems to work when I annotate the property like this, indicating use-site problem:</p>\n\n<pre><code>@field:[MongoId MongoObjectId]\nvar id: String? = null\n</code></pre>\n\n<p>I would expect that <code>@field</code> is default use-site, but it seems that it isn't.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "edited": false, "score": 0, "creation_date": 1455278498, "post_id": 35360630, "comment_id": 58430031, "body": "I found, I think, better way to define <code>processEmpty</code> function: <code>fun &lt;T&gt; processEmpty(t: T, call: () -&gt; Unit) = process(t, {call()}, {}) </code>"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1455279039, "post_id": 35360630, "comment_id": 58430382, "body": "Yes, <code>{ call() }</code> is a correct function of one argument (implicit <code>it</code>), thus it can be passed as <code>(Unit) -&gt; Unit</code>."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 36, "last_activity_date": 1455307278, "last_edit_date": 1455307278, "creation_date": 1455275921, "answer_id": 35361278, "question_id": 35360630, "link": "https://stackoverflow.com/questions/35360630/whats-the-difference-between-unit-and-unit-unit-types/35361278#35361278", "title": "What&#39;s the difference between () -&gt; Unit and (Unit) -&gt; Unit types?", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/\" rel=\"noreferrer\"><code>Unit</code></a> is actually a <a href=\"https://en.wikipedia.org/wiki/Unit_type\" rel=\"noreferrer\">type that has exactly one value</a> (the value is <code>Unit</code> itself; also, this is why it is named <code>Unit</code>). It corresponds to <code>void</code> in Java, but it's not the same. </p>\n\n<p>Kotlin compiler treats functions with no declared return value as <a href=\"https://kotlinlang.org/docs/reference/functions.html#unit-returning-functions\" rel=\"noreferrer\"><code>Unit</code>-returning functions</a>, and <code>return Unit</code> can also be omitted. This is why <code>{ }</code> is a Unit-returning function.</p>\n\n<p>But this is not applied to arguments. To be strict, when you declare a function with <code>Unit</code> argument or <code>(Unit) -&gt; Unit</code> function variable, you have to pass an argument of type <code>Unit</code> at call site. The only value to pass is <code>Unit</code>.</p>\n\n<p>A lambda with no specified arguments like <code>{ doSomething() }</code> is treated both as a function with no arguments and as a function with single implicit argument <code>it</code>. You can use <code>{ }</code> both as <code>() -&gt; Unit</code> and <code>(Unit) -&gt; Unit</code>.</p>\n\n<p>As to the call site, as said above, <code>Unit</code> has to be passed:</p>\n\n<pre><code>val f: (Unit) -&gt; Unit = { println(\"Hello\") }\n\nf(Unit) // the only valid call\n</code></pre>\n\n<p>Whereas <code>() -&gt; Unit</code> functions do not need an argument to be passed:</p>\n\n<pre><code>val f: () -&gt; Unit = { println(\"Hello\") }\n\nf() // valid call\n</code></pre>\n\n<p><hr>\nIn your example, type inference happens as follows: </p>\n\n<pre><code>fun &lt;T, U&gt; process(t: T, call: (U) -&gt; Unit, map: (T) -&gt; U) = call(map(t))\n\nfun &lt;T&gt; processEmpty(t: T, call: () -&gt; Unit) = process(t, call, {}) // error\n</code></pre>\n\n<ol>\n<li><code>map: (T) -&gt; U = { }</code>, thus a replacement for <code>U</code> is <code>Unit</code> returned from <code>{ }</code>.</li>\n<li>Therefore <code>call</code> should be <code>(Unit) -&gt; Unit</code>.</li>\n<li><code>call: () -&gt; Unit</code> which is not the same to <code>(Unit) -&gt; Unit</code>, as stated above. Error.</li>\n</ol>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9152, "favorite_count": 2, "accepted_answer_id": 35361278, "answer_count": 1, "score": 16, "last_activity_date": 1455307278, "creation_date": 1455274058, "question_id": 35360630, "link": "https://stackoverflow.com/questions/35360630/whats-the-difference-between-unit-and-unit-unit-types", "title": "What&#39;s the difference between () -&gt; Unit and (Unit) -&gt; Unit types?", "body": "<p>I have following functions: </p>\n\n<pre><code>fun &lt;T, U&gt; process(t: T, call: (U) -&gt; Unit, map: (T) -&gt; U) = call(map(t))\n\nfun &lt;T&gt; processEmpty(t: T, call: () -&gt; Unit) = process(t, call, {}) // error\n</code></pre>\n\n<p>but the <code>processEmpty</code> is not compiling. The error message is <code>Type mismatch: inferred type is () -&gt; kotlin.Unit but (kotlin.Unit) -&gt; kotlin.Unit was expected</code>. But if I change this function to </p>\n\n<pre><code>fun &lt;T&gt; processEmpty2(t: T, call: (Unit) -&gt; Unit) = process(t, call, {}) // OK\n</code></pre>\n\n<p>So what's the difference between <code>() -&gt; Unit</code> and <code>(Unit) -&gt; Unit</code> types? Why first version of <code>processEmpty</code> isn't compiling?</p>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "kotlin"], "comments": [{"owner": {"reputation": 1276, "user_id": 4594990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMg6W.jpg?s=128&g=1", "display_name": "vigilancer", "link": "https://stackoverflow.com/users/4594990/vigilancer"}, "edited": false, "score": 0, "creation_date": 1455228962, "post_id": 35345702, "comment_id": 58409582, "body": "it&#39;s not obvious that kapt is a problem in your case. try to revise your code, since first RC most (if not all) deprecated features became errors. also now kotlin is aware of @Nullable etc annotations."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1455247234, "post_id": 35345702, "comment_id": 58415339, "body": "run with <code>--info</code> parameter for gradle, or <code>--stacktrace</code> to see more details, then you will know more, and can share more here."}, {"owner": {"reputation": 225, "user_id": 3920311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oxwve.jpg?s=128&g=1", "display_name": "Yiyo Castillo", "link": "https://stackoverflow.com/users/3920311/yiyo-castillo"}, "edited": false, "score": 0, "creation_date": 1455281847, "post_id": 35345702, "comment_id": 58432198, "body": "You are right, I updated the question adding more error details in a gist"}], "owner": {"reputation": 225, "user_id": 3920311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oxwve.jpg?s=128&g=1", "display_name": "Yiyo Castillo", "link": "https://stackoverflow.com/users/3920311/yiyo-castillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479110413, "creation_date": 1455210540, "last_edit_date": 1479110413, "question_id": 35345702, "link": "https://stackoverflow.com/questions/35345702/kotlin-1-0-0-rc-1036-problems-with-annotation-processing", "title": "Kotlin 1.0.0-rc-1036 problems with Annotation Processing", "body": "<p>I have an Android App using <strong>Raizlabs DBFlow 2.2.1</strong> and I updated my kotlin version to <strong>1.0.0-rc-1036</strong> but now when I try to run the app it gives me the following error:</p>\n\n<p><a href=\"https://gist.github.com/yiyocx/3cc9cf594121eba7ab0e\" rel=\"nofollow\">https://gist.github.com/yiyocx/3cc9cf594121eba7ab0e</a></p>\n\n<p>I tried doing a clean and run againt but this just works for the first launch, in the following launches I receive the same error as above. I think that error is due to a problem with Annotations, I'm using <strong>kapt</strong>.</p>\n\n<p>These are my DBFlow dependencies in app/build.gradle:</p>\n\n<pre><code>dependencies {\n    kapt 'com.raizlabs.android:DBFlow-Compiler:2.2.1'\n    compile \"com.raizlabs.android:DBFlow-Core:2.2.1\"\n    compile \"com.raizlabs.android:DBFlow:2.2.1\"\n}\n\nkapt {\n    generateStubs = true\n}\n</code></pre>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 3614, "user_id": 415755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c8e4bd926a878cb7c0d89f22fe6d4f?s=128&d=identicon&r=PG", "display_name": "Elias M&#229;rtenson", "link": "https://stackoverflow.com/users/415755/elias-m%c3%a5rtenson"}, "edited": false, "score": 1, "creation_date": 1455207181, "post_id": 35343902, "comment_id": 58395993, "body": "I had a similar problem. I had Android Studio show this error, but the build still worked. It turns out that the AS database was out of sync. You can try deleting caches and restarting."}, {"owner": {"reputation": 3601, "user_id": 4110778, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/moSwJ.png?s=128&g=1", "display_name": "Gudin", "link": "https://stackoverflow.com/users/4110778/gudin"}, "reply_to_user": {"reputation": 3614, "user_id": 415755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02c8e4bd926a878cb7c0d89f22fe6d4f?s=128&d=identicon&r=PG", "display_name": "Elias M&#229;rtenson", "link": "https://stackoverflow.com/users/415755/elias-m%c3%a5rtenson"}, "edited": false, "score": 0, "creation_date": 1455208877, "post_id": 35343902, "comment_id": 58397304, "body": "It actually compiled with that error. After deleting caches and restarting AS was still showing errors. Also, all kotlinx imports broke too, so I gave up and reverted to 1.0.0-beta-4589 and now everything it&#39;s working :/"}, {"owner": {"reputation": 1276, "user_id": 4594990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMg6W.jpg?s=128&g=1", "display_name": "vigilancer", "link": "https://stackoverflow.com/users/4594990/vigilancer"}, "edited": false, "score": 1, "creation_date": 1455229175, "post_id": 35343902, "comment_id": 58409690, "body": "@Gudin, first - for kotlinx add <code>apply plugin: &#39;kotlin-android-annotation&#39;</code> in build.gradle, it is necessary for RC-1036. second - provide some code to understand your original problem, because <code>::class.java</code> syntax should work without <code>reflect</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455247441, "post_id": 35343902, "comment_id": 58415395, "body": "It is likely you have some mix of library versions and kotlin plugin versions that all do not line up.  If you check all of your dependencies you will find one is old, and therefore ignored by Kotlin (it actually is giving you a message somewhere that you are not seeing)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1455247461, "post_id": 35343902, "comment_id": 58415404, "body": "Someone asks this in kotlin slack every day, and it is the same answer, and 100% of the time a mismatch."}, {"owner": {"reputation": 3601, "user_id": 4110778, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/moSwJ.png?s=128&g=1", "display_name": "Gudin", "link": "https://stackoverflow.com/users/4110778/gudin"}, "edited": false, "score": 0, "creation_date": 1455294412, "post_id": 35343902, "comment_id": 58440902, "body": "<code>apply plugin: &#39;kotlin-android-extensions&#39;</code> fixed the kotlinx, there&#39;s no <code>&#39;kotlin-android-annotation&#39;</code> plugin. <code>::class.java</code> is still shown as error, but it compiles and works"}], "owner": {"reputation": 3601, "user_id": 4110778, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/moSwJ.png?s=128&g=1", "display_name": "Gudin", "link": "https://stackoverflow.com/users/4110778/gudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 723, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1500622070, "creation_date": 1455205890, "question_id": 35343902, "link": "https://stackoverflow.com/questions/35343902/configure-kotlin-reflection-class-java-doesnt-work", "title": "Configure kotlin reflection, class.java doesn&#39;t work", "body": "<p>So I update kotlin to 1.0.0-rc-1036, and reflection is broken.</p>\n\n<p>This code worked for me in beta:</p>\n\n<pre><code>ApiInterface::class.java\n</code></pre>\n\n<p>but now I get unresolved reference .java.</p>\n\n<p>I found at documentation that kotlin-reflect is not part of standard library (I guess they moved it recently, but i didn't find anything in release notes). </p>\n\n<p>So I added compile and classpath 'org.jetbrains.kotlin:kotlin-reflect:1.0.0-rc-1036' but it's still not working. How to fix this?</p>\n"}, {"tags": ["java", "maven", "jenkins", "kotlin"], "comments": [{"owner": {"reputation": 115475, "user_id": 1743880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wcXBB.png?s=128&g=1", "display_name": "Tunaki", "link": "https://stackoverflow.com/users/1743880/tunaki"}, "edited": false, "score": 0, "creation_date": 1455195353, "post_id": 35339749, "comment_id": 58387016, "body": "What is the difference with those questions: <a href=\"http://stackoverflow.com/q/6513479/1743880\">stackoverflow.com/q/6513479/1743880</a>, or <a href=\"http://stackoverflow.com/q/7597950/1743880\">stackoverflow.com/q/7597950/1743880</a>, or <a href=\"http://stackoverflow.com/q/16662830/1743880\">stackoverflow.com/q/16662830/1743880</a>?"}, {"owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "reply_to_user": {"reputation": 115475, "user_id": 1743880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wcXBB.png?s=128&g=1", "display_name": "Tunaki", "link": "https://stackoverflow.com/users/1743880/tunaki"}, "edited": false, "score": 1, "creation_date": 1455195823, "post_id": 35339749, "comment_id": 58387324, "body": "@Tunaki: No Kotlin. Specifically, I (wrongly) assumed that the Kotlin compiler would also compile Java classes for me."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 2, "creation_date": 1455247315, "post_id": 35339749, "comment_id": 58415360, "body": "@LukasEder Kotlin only uses the Java classes to generate stubs for Kotlin to compile against, then Kotlin is compiled before Java, later SOMETHING ELSE compiles Java."}], "answers": [{"tags": [], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "is_accepted": false, "score": 5, "last_activity_date": 1455194762, "creation_date": 1455194762, "answer_id": 35339750, "question_id": 35339749, "link": "https://stackoverflow.com/questions/35339749/error-generics-are-not-supported-in-source-1-3-when-compiling-java-code-with-k/35339750#35339750", "title": "error: generics are not supported in -source 1.3 when compiling Java code with Kotlin", "body": "<p>I've noticed that in this particular Kotlin project, the Java compiler and specifically the Java version were not specified. This resulted in some machine default having been chosen, which is Java 1.8 for my local machine, but Java 1.3 on the Jenkins CI server. Adding an explicit reference to the <code>maven-compiler-plugin</code> solved the issue for me:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}], "owner": {"reputation": 179634, "user_id": 521799, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb96efa7a5664ba1c4ebf586abd4121f?s=128&d=identicon&r=PG", "display_name": "Lukas Eder", "link": "https://stackoverflow.com/users/521799/lukas-eder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1455195929, "creation_date": 1455194762, "last_edit_date": 1495535333, "question_id": 35339749, "link": "https://stackoverflow.com/questions/35339749/error-generics-are-not-supported-in-source-1-3-when-compiling-java-code-with-k", "title": "error: generics are not supported in -source 1.3 when compiling Java code with Kotlin", "body": "<p>I'm using Maven and the <code>kotlin-maven-plugin</code> to compile code.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;version&gt;${kotlin.version}&lt;/version&gt;\n\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;compile&lt;/id&gt;\n            &lt;phase&gt;process-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;sourceDirs&gt;\n                    &lt;source&gt;src/main/kotlin&lt;/source&gt;\n                    &lt;source&gt;src/main/resources&lt;/source&gt;\n                    &lt;source&gt;target/generated-sources/jooq-h2&lt;/source&gt;\n                &lt;/sourceDirs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n\n        &lt;execution&gt;\n            &lt;id&gt;test-compile&lt;/id&gt;\n            &lt;phase&gt;process-test-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;test-compile&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;sourceDirs&gt;\n                    &lt;source&gt;src/test/kotlin&lt;/source&gt;\n                &lt;/sourceDirs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>The <code>target/generated-sources/jooq-h2</code> directory contains Java source files. I'm following the <a href=\"https://kotlinlang.org/docs/reference/using-maven.html#compiling-kotlin-and-java-sources\" rel=\"nofollow noreferrer\">Kotlin manual</a> and other <a href=\"https://stackoverflow.com/a/34438270/521799\">people's recommendation</a> by putting the Kotlin complation in <code>&lt;phase&gt;process-sources&lt;/phase&gt;</code> rather than <code>&lt;phase&gt;compile&lt;/phase&gt;</code>. I'm (probably wrongly?) assuming that the Kotlin compiler also takes care of compiling those Java files for me.</p>\n\n<p>However, on some servers (e.g. Jenkins CI), I got strange compilation error messages, such as:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[ERROR] /var/lib/jenkins/jobs/jooq-build/workspace/jOOQ-examples/jOOQ-kotlin-example/target/generated-sources/jooq-h2/org/jooq/example/db/h2/tables/Author.java:[35,37] \n        error: generics are not supported in -source 1.3\n</code></pre>\n\n<p>Why is that?</p>\n"}]