[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "edited": false, "score": 4, "creation_date": 1485385893, "post_id": 41861449, "comment_id": 70910484, "body": "Kotlin has to create a function object to be passed into <code>json { ... }</code>, so the &quot;create no extra objects&quot; problem is flawed from the start. The JVM is quite efficient in optimizing short lived objects anyways. Unless you benchmarked your code and are 100% sure that creating <code>JSONObjectBuilder </code> instances is bottlenecking your performance, I wouldn&#39;t worry about this at all. (Personal note: I would make your builder an interface and hide the actual implementation in a private class, so you don&#39;t expose the json field.)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1485417148, "post_id": 41861449, "comment_id": 70919778, "body": "Yep, <code>json { ... }</code> should probably be <code>inline</code>"}, {"owner": {"reputation": 7683, "user_id": 590437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oehge.jpg?s=128&g=1", "display_name": "Holger Brandl", "link": "https://stackoverflow.com/users/590437/holger-brandl"}, "edited": false, "score": 0, "creation_date": 1553542796, "post_id": 41861449, "comment_id": 97415334, "body": "Did you create an artefact for these bits?"}, {"owner": {"reputation": 7683, "user_id": 590437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oehge.jpg?s=128&g=1", "display_name": "Holger Brandl", "link": "https://stackoverflow.com/users/590437/holger-brandl"}, "edited": false, "score": 0, "creation_date": 1554408600, "post_id": 41861449, "comment_id": 97752513, "body": "See github.com/holgerbrandl/jsonbuilder for a small DSL to create json with kotlin"}], "answers": [{"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1485465101, "post_id": 41863640, "comment_id": 70948353, "body": "I love stacks, but doesn&#39;t this suffer from exactly the same issue (i.e. it creates a JSONObjectBuilder and JSONObject on every call to <code>json()</code>)? I think you&#39;re on the right track though - you&#39;d just need to remember the result of the last call to <code>JSONObject.put()</code> so you could call <code>put()</code> on <i>that</i> for nested fields instead of creating a new <code>JSONObject</code>. I hope that makes sense! :)"}, {"owner": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "edited": false, "score": 0, "creation_date": 1485496913, "post_id": 41863640, "comment_id": 70957742, "body": "The example above creates only one JsonObjectBuilder and two JSONObject(s) which is far more better than the solution that I come up with.  The only thing is the final json string is in reversed order."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1485527437, "post_id": 41863640, "comment_id": 70974711, "body": "@HoundDog, In the <code>org.json.JSONObject</code> API you have to create a new <code>JSONObject</code> in order to nest it inside another so I do not believe there are any additional objects here. I hope that makes sense. :-)"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "edited": false, "score": 0, "creation_date": 1485527593, "post_id": 41863640, "comment_id": 70974801, "body": "@ilkinulas I printed my solution and it came out the same as your example output in your question. I do not believe that <code>JSONObject</code> maintains the ordering of keys though so from run-to-run you may get different ordering of keys. JSON keys are not ordered (think <code>HashMap</code> and not <code>LinkedHashMap</code>)."}, {"owner": {"reputation": 436, "user_id": 2699805, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8725bb7aaf28a7cb2ebb6fb1d247cb6e?s=128&d=identicon&r=PG&f=1", "display_name": "qwert_ukg", "link": "https://stackoverflow.com/users/2699805/qwert-ukg"}, "edited": false, "score": 1, "creation_date": 1503983154, "post_id": 41863640, "comment_id": 78820323, "body": "Great! put it to Maven repo plz :)"}, {"owner": {"reputation": 7683, "user_id": 590437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oehge.jpg?s=128&g=1", "display_name": "Holger Brandl", "link": "https://stackoverflow.com/users/590437/holger-brandl"}, "edited": false, "score": 0, "creation_date": 1554408562, "post_id": 41863640, "comment_id": 97752493, "body": "I&#39;ve improved the solution and put it on github and jcenter, see github.com/holgerbrandl/jsonbuilder"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 23, "last_activity_date": 1485527500, "last_edit_date": 1485527500, "creation_date": 1485387213, "answer_id": 41863640, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/41863640#41863640", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>You can use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html\" rel=\"noreferrer\">Deque</a> as a stack to track your current <code>JSONObject</code> context with a single <code>JsonObjectBuilder</code>:</p>\n\n<pre><code>fun json(build: JsonObjectBuilder.() -&gt; Unit): JSONObject {\n    return JsonObjectBuilder().json(build)\n}\n\nclass JsonObjectBuilder {\n    private val deque: Deque&lt;JSONObject&gt; = ArrayDeque()\n\n    fun json(build: JsonObjectBuilder.() -&gt; Unit): JSONObject {\n        deque.push(JSONObject())\n        this.build()\n        return deque.pop()\n    }\n\n    infix fun &lt;T&gt; String.To(value: T) {\n        deque.peek().put(this, value)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val jsonObject =\n            json {\n                \"name\" To \"ilkin\"\n                \"age\" To 37\n                \"male\" To true\n                \"contact\" To json {\n                    \"city\" To \"istanbul\"\n                    \"email\" To \"xxx@yyy.com\"\n                }\n            }\n    println(jsonObject)\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\"contact\":{\"city\":\"istanbul\",\"email\":\"xxx@yyy.com\"},\"name\":\"ilkin\",\"age\":37,\"male\":true}\n</code></pre>\n\n<p>Calling <code>json</code> and <code>build</code> across multiple threads on a single <code>JsonObjectBuilder</code> would be problematic but that shouldn't be a problem for your use case.</p>\n"}, {"comments": [{"owner": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "edited": false, "score": 2, "creation_date": 1485409420, "post_id": 41866867, "comment_id": 70917324, "body": "I agree, this version is already looking like a DSL. But it creates temp arrays  and pairs."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1485527776, "post_id": 41866867, "comment_id": 70974910, "body": "I really like this solution for creating JSON in Java becuase it uses Kotlin&#39;s already clean DSL for creating JSON-like data but it has the same overhead as the example in the question. Each <code>mapOf</code> creates a new <code>Map</code> which is then copied and discarded for each <code>JSONObject</code> (including the nested <code>JSONObject</code> inside the top-level one)."}], "tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": false, "score": 19, "last_activity_date": 1485404706, "creation_date": 1485404706, "answer_id": 41866867, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/41866867#41866867", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>Do you need a DSL? You lose the ability to enforce <code>String</code> keys, but vanilla Kotlin isn't that bad :)</p>\n\n<pre><code>JSONObject(mapOf(\n        \"name\" to \"ilkin\",\n        \"age\" to 37,\n        \"male\" to true,\n        \"contact\" to mapOf(\n                \"city\" to \"istanbul\",\n                \"email\" to \"xxx@yyy.com\"\n        )\n))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "edited": false, "score": 0, "creation_date": 1485494839, "post_id": 41871175, "comment_id": 70957078, "body": "This is an interesting solution, but types are lost in the final json string. Every value is transformed to string."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "edited": false, "score": 0, "creation_date": 1485528747, "post_id": 41871175, "comment_id": 70975560, "body": "@ilkinulas You can replace <code>\\&quot;$value\\&quot;</code> with <code>${JSONObject.valueToString(value)}</code> to retain the types."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1485442816, "last_edit_date": 1485442816, "creation_date": 1485425655, "answer_id": 41871175, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/41871175#41871175", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>Yes, it is possible if you don't need any intermediate representation of the nodes, and if the context is always the same (the recursive calls are no different from each other). This can be done by writing the output immediately.</p>\n\n<p>However, this severely increases code complexity, because you have to process your DSL calls right away without storing them anywhere (again, to avoid redundant objects). </p>\n\n<p>Example (see its demo <a href=\"http://try.kotlinlang.org/#/UserProjects/k0lhmvdsvi29vipprunfrcccdh/6q8kkgb5815j5spuvjfsli21g4\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>class JsonContext internal constructor() {\n    internal val output = StringBuilder()\n\n    private var indentation = 4\n\n    private fun StringBuilder.indent() = apply {\n        for (i in 1..indentation)\n            append(' ')\n    }\n\n    private var needsSeparator = false\n\n    private fun StringBuilder.separator() = apply { \n        if (needsSeparator) append(\",\\n\")\n    }\n\n    infix fun String.to(value: Any) {\n        output.separator().indent().append(\"\\\"$this\\\": \\\"$value\\\"\")\n        needsSeparator = true\n    }\n\n    infix fun String.toJson(block: JsonContext.() -&gt; Unit) {\n        output.separator().indent().append(\"\\\"$this\\\": {\\n\")\n        indentation += 4\n        needsSeparator = false\n        block(this@JsonContext)\n        needsSeparator = true\n        indentation -= 4\n        output.append(\"\\n\").indent().append(\"}\")\n    }\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>fun json(block: JsonContext.() -&gt; Unit) = JsonContext().run {\n    block()\n    \"{\\n\" + output.toString() + \"\\n}\"\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>val j = json {\n    \"a\" to 1\n    \"b\" to \"abc\"\n    \"c\" toJson {\n        \"d\" to 123\n        \"e\" toJson {\n            \"f\" to \"g\"\n        }\n    }\n}\n</code></pre>\n\n<p>If you don't need indentation but only valid JSON, this can be easily simplified, though.</p>\n\n<p>You can make the <code>json { }</code> and <code>.toJson { }</code> functions <code>inline</code> to get rid even of the lambda classes and thus you achieve almost zero object overhead (one <code>JsonContext</code> and the <code>StringBuilder</code> with its buffers are still allocated), but that would require you to change the visibility modifiers of the members these functions use: public inline functions can only access <code>public</code> or <code>@PublishedApi internal</code> members.</p>\n"}, {"comments": [{"owner": {"reputation": 1623, "user_id": 2627343, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2e35455d88ed1d6d1107198ab81f9774?s=128&d=identicon&r=PG", "display_name": "Greyshack", "link": "https://stackoverflow.com/users/2627343/greyshack"}, "edited": false, "score": 0, "creation_date": 1506265248, "post_id": 44894592, "comment_id": 79740013, "body": "this is very elegant"}, {"owner": {"reputation": 1743, "user_id": 6370015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9435959218e88c7e313311a7441898f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Donga", "link": "https://stackoverflow.com/users/6370015/kishan-donga"}, "edited": false, "score": 0, "creation_date": 1534271255, "post_id": 44894592, "comment_id": 90648734, "body": "your answer looks good but what about JSONArray I&#39;m a beginner in the kotlin so, can you explain to me how to handle JSONArray in the kotlin"}, {"owner": {"reputation": 2384, "user_id": 452486, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/a8k4V.jpg?s=128&g=1", "display_name": "Arst", "link": "https://stackoverflow.com/users/452486/arst"}, "reply_to_user": {"reputation": 1743, "user_id": 6370015, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9435959218e88c7e313311a7441898f8?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Donga", "link": "https://stackoverflow.com/users/6370015/kishan-donga"}, "edited": false, "score": 0, "creation_date": 1534299261, "post_id": 44894592, "comment_id": 90656850, "body": "@KishanDonga I am not sure what you want to achieve. I updated my answer, you can assign JSONArray as well."}], "tags": [], "owner": {"reputation": 2384, "user_id": 452486, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/a8k4V.jpg?s=128&g=1", "display_name": "Arst", "link": "https://stackoverflow.com/users/452486/arst"}, "is_accepted": false, "score": 6, "last_activity_date": 1534299192, "last_edit_date": 1534299192, "creation_date": 1499121165, "answer_id": 44894592, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/44894592#44894592", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>I am not sure if I get the question correctly. You don't want a builder?</p>\n\n<pre><code>import org.json.JSONArray\nimport org.json.JSONObject\n\nclass Json() {\n\n    private val json = JSONObject()\n\n    constructor(init: Json.() -&gt; Unit) : this() {\n        this.init()\n    }\n\n    infix fun String.to(value: Json) {\n        json.put(this, value.json)\n    }\n\n    infix fun &lt;T&gt; String.to(value: T) {\n        json.put(this, value)\n    }\n\n    override fun toString(): String {\n        return json.toString()\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    val json = Json {\n        \"name\" to \"Roy\"\n        \"body\" to Json {\n            \"height\" to 173\n            \"weight\" to 80\n        }\n        \"cars\" to JSONArray().apply {\n            put(\"Tesla\")\n            put(\"Porsche\")\n            put(\"BMW\")\n            put(\"Ferrari\")\n        }\n    }\n\n    println(json)\n\n}\n</code></pre>\n\n<p>You will get </p>\n\n<pre><code>{\n  \"name\": \"Roy\",\n  \"body\": {\n    \"weight\": 80,\n    \"height\": 173\n  },\n  \"cars\": [\n    \"Tesla\",\n    \"Porsche\",\n    \"BMW\",\n    \"Ferrari\"\n  ]\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 4333811, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iaoiB.jpg?s=128&g=1", "display_name": "Alex Misiulia", "link": "https://stackoverflow.com/users/4333811/alex-misiulia"}, "is_accepted": false, "score": 1, "last_activity_date": 1521623520, "last_edit_date": 1521623520, "creation_date": 1516258433, "answer_id": 48315411, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/48315411#48315411", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>Found another solution. You can just inherit <code>JSONObject</code> class without need to create other objects. \n</p>\n\n<pre><code>class Json() : JSONObject() {\n\n    constructor(init: Json.() -&gt; Unit) : this() {\n        this.init()\n    }\n\n    infix fun &lt;T&gt; String.To(value: T) {\n        put(this, value)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val jsonObject =\n            Json {\n                \"name\" To \"ilkin\"\n                \"age\" To 37\n                \"male\" To true\n                \"contact\" To Json {\n                    \"city\" To \"istanbul\"\n                    \"email\" To \"xxx@yyy.com\"\n                }\n            }\n    println(jsonObject)\n}\n</code></pre>\n\n<p>The output of code will be the same.</p>\n\n<pre><code>{\"contact\":{\"city\":\"istanbul\",\"email\":\"xxx@yyy.com\"},\"name\":\"ilkin\",\"age\":37,\"male\":true}\n</code></pre>\n\n<p><strong>UPD</strong>: If you use gson library you can look at this <a href=\"https://github.com/SalomonBrys/Kotson\" rel=\"nofollow noreferrer\">awesome library</a>. It doesn't create any garbage, source code is easy to read and understand.</p>\n"}, {"tags": [], "owner": {"reputation": 7683, "user_id": 590437, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oehge.jpg?s=128&g=1", "display_name": "Holger Brandl", "link": "https://stackoverflow.com/users/590437/holger-brandl"}, "is_accepted": false, "score": 1, "last_activity_date": 1605375168, "creation_date": 1605375168, "answer_id": 64836696, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage/64836696#64836696", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>You could use a library such as <a href=\"https://github.com/holgerbrandl/jsonbuilder\" rel=\"nofollow noreferrer\">https://github.com/holgerbrandl/jsonbuilder</a> to build json with</p>\n<pre><code>val myJson = json {\n        &quot;size&quot; to 0\n        &quot;array&quot; to arrayOf(1,2,3)\n        &quot;aggs&quot; to {\n            &quot;num_destinations&quot; to {\n                &quot;cardinality&quot; to {\n                    &quot;field&quot; to &quot;DestCountry&quot;\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Disclaimer: I'm the author of the library.</p>\n"}], "owner": {"reputation": 3115, "user_id": 20365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cee28ad2f2324fd3a02d78014e3944f7?s=128&d=identicon&r=PG", "display_name": "ilkinulas", "link": "https://stackoverflow.com/users/20365/ilkinulas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12304, "favorite_count": 6, "accepted_answer_id": 41863640, "answer_count": 6, "score": 20, "last_activity_date": 1605375168, "creation_date": 1485377538, "question_id": 41861449, "link": "https://stackoverflow.com/questions/41861449/kotlin-dsl-for-creating-json-objects-without-creating-garbage", "title": "Kotlin DSL for creating json objects (without creating garbage)", "body": "<p>I am trying to create a DSL for creating JSONObjects. Here is a builder class and a sample usage:</p>\n\n<pre><code>import org.json.JSONObject\n\nfun json(build: JsonObjectBuilder.() -&gt; Unit): JSONObject {\n    val builder = JsonObjectBuilder()\n    builder.build()\n    return builder.json\n}\n\nclass JsonObjectBuilder {\n    val json = JSONObject()\n\n    infix fun &lt;T&gt; String.To(value: T) {\n        json.put(this, value)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val jsonObject =\n            json {\n                \"name\" To \"ilkin\"\n                \"age\" To 37\n                \"male\" To true\n                \"contact\" To json {\n                    \"city\" To \"istanbul\"\n                    \"email\" To \"xxx@yyy.com\"\n                }\n            }\n    println(jsonObject)\n}\n</code></pre>\n\n<p>The output of the above code is :</p>\n\n<pre><code>{\"contact\":{\"city\":\"istanbul\",\"email\":\"xxx@yyy.com\"},\"name\":\"ilkin\",\"age\":37,\"male\":true}\n</code></pre>\n\n<p>It works as expected. But it creates an additional JsonObjectBuilder instance every time it creates a json object. Is it possible to write a DSL for creating json objects without extra garbage?</p>\n"}, {"tags": ["java", "kotlin", "single-instance"], "answers": [{"comments": [{"owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "edited": false, "score": 0, "creation_date": 1485384384, "post_id": 41860434, "comment_id": 70909926, "body": "Thanks for Yurii Kyrylchuk answer, after add @JvmField, in java code, I have to use &quot;SingleKotlin.getInstance()&quot;"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1485395843, "post_id": 41860434, "comment_id": 70913178, "body": "<code>@JvmField</code> cannot be applied to a delegated property, however <code>@JvmStatic</code> can. It would make the getter of that property exposed in the static scope of the containing class, so you have to call that getter as <code>SingleKotlin.getInstance()</code>"}, {"owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "edited": false, "score": 1, "creation_date": 1485445951, "post_id": 41860434, "comment_id": 70936946, "body": "Sorry, I made a mistake, after added @JvmStatic, I use SingleKotlin.getInstance()&quot;"}], "tags": [], "owner": {"reputation": 769, "user_id": 2793494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SZOih.jpg?s=128&g=1", "display_name": "Yurii Kyrylchuk", "link": "https://stackoverflow.com/users/2793494/yurii-kyrylchuk"}, "is_accepted": true, "score": 6, "last_activity_date": 1515798860, "last_edit_date": 1515798860, "creation_date": 1485373912, "answer_id": 41860434, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol/41860434#41860434", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>Just add @JvmStatic annotation above field (as said in this documentation <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-fields\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-fields</a>)</p>\n\n<p>So, your code should be like this:</p>\n\n<pre><code>class SingleKotlin private constructor(){\n    companion object {\n        @JvmStatic\n        val instance by lazy {\n            SingleKotlin()\n        }\n    }\n}\n</code></pre>\n\n<p>And now you can call it like</p>\n\n<pre><code>SingleKotlin.instance\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 3, "last_activity_date": 1485376540, "last_edit_date": 1495542317, "creation_date": 1485376540, "answer_id": 41861197, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol/41861197#41861197", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>In addition to <a href=\"https://stackoverflow.com/users/2793494/yurii-kyrylchuk\">@YuriiKyrylchuk</a>'s answer: another option (and the only option if you don't have control over the Kotlin code) is to refer to <code>MyClass.Companion</code> from Java. Example:</p>\n\n<pre><code>class MyClass {\n    companion object {\n        val x: Int = 0\n    }\n}\n</code></pre>\n\n<p>And in Java:</p>\n\n<pre><code>MyClass.Companion.getX();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1485396144, "creation_date": 1485396144, "answer_id": 41864828, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol/41864828#41864828", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>If your <code>SingleKotlin</code> object has a single private constructor without parameters, you can use <code>object</code> instead:</p>\n\n<pre><code>object SingleKotlin {\n    // some members of SingleKotlin\n    val x = 42\n}\n</code></pre>\n\n<p>Then in Java you reference it through the <code>INSTANCE</code> static field:</p>\n\n<pre><code>SingleKotlin single = SingleKotlin.INSTANCE;\n// or\nSingleKotlin.INSTANCE.getX();\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user961376"}, "is_accepted": false, "score": 0, "last_activity_date": 1489156391, "creation_date": 1489156391, "answer_id": 42720849, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol/42720849#42720849", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>You need to call the method from Java like this:<br>\n<code>AppUIUtils.Companion.yourMethod()</code></p>\n"}, {"tags": [], "owner": {"reputation": 311, "user_id": 1483448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71088e04f83a3eeb756f88bf55412491?s=128&d=identicon&r=PG", "display_name": "polis", "link": "https://stackoverflow.com/users/1483448/polis"}, "is_accepted": false, "score": 0, "last_activity_date": 1508856349, "creation_date": 1508856349, "answer_id": 46913585, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol/46913585#46913585", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>In additional to Ilya answer you can use @JvmStatic annotation </p>\n\n<pre><code>object SingleKotlin {\n    // some members of SingleKotlin\n\n    @JvmStatic val x = 42\n}\n</code></pre>\n\n<p>Then in Java</p>\n\n<pre><code>SingleKotlin.getX();\n</code></pre>\n"}], "owner": {"reputation": 1441, "user_id": 3239558, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100002152175824/picture?type=large", "display_name": "user3239558", "link": "https://stackoverflow.com/users/3239558/user3239558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3743, "favorite_count": 0, "accepted_answer_id": 41860434, "answer_count": 5, "score": 7, "last_activity_date": 1515798860, "creation_date": 1485373673, "question_id": 41860373, "link": "https://stackoverflow.com/questions/41860373/kotlin-java-cant-resolve-kotlin-symbol", "title": "Kotlin: Java can&#39;t resolve Kotlin Symbol?", "body": "<p>I have a Kotlin Code just like the below, <code>SingleKotlin.instance</code> can be called by the other Kotlin files</p>\n\n<pre><code>class SingleKotlin private constructor(){\n    companion object {\n        val instance by lazy {\n            SingleKotlin()\n        }\n    }\n\n}\n</code></pre>\n\n<p>However, when I try to call <code>SingleKotlin.instance</code> from java, it shows can't resolve symbol 'instance'</p>\n\n<p>I don't understand why, anybody can explian and how can I solve this problem?</p>\n"}, {"tags": ["java", "android", "user-interface", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1485361958, "post_id": 41850369, "comment_id": 70897260, "body": "Thanks for the detailed answer, I will try that today :)"}, {"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1485366550, "post_id": 41850369, "comment_id": 70900339, "body": "Ok, what I can&#39;t wrap my head around is: what to do if one of these edges change, I can&#39;t simply remove it and add the new value, because it could possibly remove the edge of another component that had the same value. Do I need to rebuild all maps/sets from ground up if anything changes?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 1, "creation_date": 1485368033, "post_id": 41850369, "comment_id": 70901220, "body": "@Benjoyo, the easiest workaround to avoid that, I think, is to have a <code>TreeMap&lt;Int, HashSet&lt;View&gt;&gt;</code> instead of <code>TreeMap&lt;Int, View&gt;</code>, so that you can check and update the <code>HashSet</code> corresponding to an edge value. This, however, adds code complexity and performance overhead. Another option is to use, for example, a <code>TreeSet&lt;View&gt;(compareBy&lt;View&gt; { it.leftEdge() }.thenBy { it.id })</code> where <code>id</code> is unique. This <i>allows</i> multiple values for a certain edge value, but queries to such a map require you to construct a fake <code>View</code> with the desired left edge value and then call  e.g. <code>set.floor(fakeView)</code>"}, {"owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1485380702, "post_id": 41850369, "comment_id": 70908154, "body": "Thank you, it&#39;s working smoothly with 40+ views, all I need :)"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "edited": false, "score": 0, "creation_date": 1485383552, "post_id": 41850369, "comment_id": 70909563, "body": "@Benjoyo, glad that I could help!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1485361931, "last_edit_date": 1485361931, "creation_date": 1485343413, "answer_id": 41850369, "question_id": 41849830, "link": "https://stackoverflow.com/questions/41849830/algorithm-for-alignment-guidelines-snapping-found-in-gui-builders/41850369#41850369", "title": "Algorithm for alignment guidelines/snapping found in GUI builders", "body": "<p>A more efficient approach would be to reduce the <em>O(n)</em> loop which iterates over all the views to a <em>O(log n)</em> search for the nearest edge in some sorted representation like a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\"><code>TreeSet</code></a> or a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\"><code>TreeMap</code></a>, which are <a href=\"https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree\" rel=\"nofollow noreferrer\">balanced binary search trees</a>. This, of course, requires you to store four separate sorted representations for each of <code>leftEdge</code>, <code>rightEdge</code>, <code>topEdge</code>, and <code>bottomEdge</code>.</p>\n\n<p>A simple example would be (showing only <code>leftEdge</code>, the others are similar):</p>\n\n<pre><code>val viewsByLeftEdge = TreeMap&lt;Int, View&gt;()\n</code></pre>\n\n<p>To add a view into the map, just use:</p>\n\n<pre><code>viewsByLeftEdge[view.leftEdge()] = view\n</code></pre>\n\n<p><sup>(note that if several views have the same left edge value, only the last one will be stored in this map)</sup></p>\n\n<p>And after that, instead of iterating over all the views, you can find the nearest left edge to a given <code>left</code> coordinate:</p>\n\n<pre><code>val floorL = viewsByLeftEdge.floorKey(left)\nval ceilingL = viewsByLeftEdge.ceilingKey(left)\nval nearestL = when {\n    floorL == null -&gt; ceilingL\n    ceilingL == null -&gt; floorL\n    ceilingL - left &lt; left - floorL -&gt; ceilingL\n    else -&gt; floorL\n}\n\nif (nearestL in left - 50 .. left + 50)\n    x = nearestL\n</code></pre>\n\n<p>Here, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#floorKey(K)\" rel=\"nofollow noreferrer\"><code>.floorKey(x)</code></a> returns the highest edge coordinate in the map that is less than or equal to <code>x</code>, or <code>null</code> if there's no such coordinate. Similarly, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#ceilingKey(K)\" rel=\"nofollow noreferrer\"><code>.ceilingKey(x)</code></a> returns the lowest coordinate in the map that is greater that <code>x</code>, or <code>null</code>.</p>\n\n<p>This takes <em>O(log n)</em> time and will be faster than iterating over all the views for any significant number of views. If you don't need to get the view by its edge, simplify the code by replacing the <code>TreeMap&lt;Int, View&gt;</code> with <code>TreeSet&lt;Int&gt;</code> (the functions then are <code>floor(x)</code> and <code>ceiling(x)</code>.</p>\n\n<p>It is up to you to place the maps in your code, fill them with your <code>View</code>s and compose the functions for the four edges that would fit better into your code design.</p>\n"}], "owner": {"reputation": 343, "user_id": 4260896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30c818bacde77f942af6432861a53783?s=128&d=identicon&r=PG&f=1", "display_name": "Benjoyo", "link": "https://stackoverflow.com/users/4260896/benjoyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "accepted_answer_id": 41850369, "answer_count": 1, "score": 2, "last_activity_date": 1485362058, "creation_date": 1485341977, "last_edit_date": 1485362058, "question_id": 41849830, "link": "https://stackoverflow.com/questions/41849830/algorithm-for-alignment-guidelines-snapping-found-in-gui-builders", "title": "Algorithm for alignment guidelines/snapping found in GUI builders", "body": "<p>I try to implement a behavior that is similar to many GUI builders: Currently dragged components should snap in alignment with another component if they are almost on a horizontal or vertical line with it.\nMy current approach is to iterate over all placed components and check if any of the four edges are (almost) aligned with an edge of the dragged component:</p>\n\n<pre><code>for (v in rootView.relativeLayout.children()) {\n    // x\n    val left = event.rawX - dXInit\n    val right = event.rawX - dXInit + view.width\n    val leftEdgeRange = (v.leftEdge() - 50 .. v.leftEdge() + 50)\n    val rightEdgeRange = (v.rightEdge() - 50 .. v.rightEdge() + 50)\n\n    when (left) {\n        in leftEdgeRange -&gt; x = v.leftEdge()\n        in rightEdgeRange -&gt; x = v.rightEdge()\n    }\n    when (right) {\n        in leftEdgeRange -&gt; x = v.leftEdge() - view.width\n        in rightEdgeRange -&gt; x = v.rightEdge() - view.width\n    }\n    // y\n    val top = event.rawY - dYInit\n    val bottom = event.rawY - dYInit + view.height\n    val topEdgeRange = (v.topEdge() - 50 .. v.topEdge() + 50)\n    val bottomEdgeRange = (v.bottomEdge() - 50 .. v.bottomEdge() + 50)\n\n    when (top) {\n        in topEdgeRange -&gt; y = v.topEdge()\n        in bottomEdgeRange -&gt; y = v.bottomEdge()\n    }\n    when (bottom) {\n        in topEdgeRange -&gt; y = v.topEdge() - view.height\n        in bottomEdgeRange -&gt; y = v.bottomEdge() - view.height\n    }\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>fun View.topEdge() = y\nfun View.bottomEdge() = y + height\nfun View.leftEdge() = x\nfun View.rightEdge() = x + width\n</code></pre>\n\n<p>But this seems inefficient because this is called in <strong>onTouch</strong>, so this loop is run pretty often. Is there a better approach? General or Java answers are welcome.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions", "anko"], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 1870447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5obdQ.jpg?s=128&g=1", "display_name": "Antek", "link": "https://stackoverflow.com/users/1870447/antek"}, "is_accepted": false, "score": 2, "last_activity_date": 1491831994, "creation_date": 1491831994, "answer_id": 43324964, "question_id": 41846377, "link": "https://stackoverflow.com/questions/41846377/using-anko-getting-type-mismatch-error-required-ankocontextviewgroup-found-ank/43324964#43324964", "title": "Using Anko getting type Mismatch error required AnkoContext&lt;ViewGroup&gt; Found AnkoContext&lt;Context&gt;", "body": "<p>Sorry for late answer, but just browsing through my code for recyclerView adapter with Anko I noticed that there are creators for <code>AnkoContext</code> with following signatures only:</p>\n\n<pre><code>AnkoContext.create(ctx: Context, owner: ViewGroup, setContentView: Boolean = false)\nAnkoContext.create(ctx: Context, setContentView: Boolean = false)\n</code></pre>\n\n<p>IDE (Android Studio) underlines the line when you're mistaken. I used the first one:</p>\n\n<pre><code>AnkoContext.create(parent!!.context, parent)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6517307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-LYqaO69Gb_c/AAAAAAAAAAI/AAAAAAAAAF4/LRZ5nHHN4L0/photo.jpg?sz=128", "display_name": "Ankul Jain", "link": "https://stackoverflow.com/users/6517307/ankul-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491831994, "creation_date": 1485331809, "question_id": 41846377, "link": "https://stackoverflow.com/questions/41846377/using-anko-getting-type-mismatch-error-required-ankocontextviewgroup-found-ank", "title": "Using Anko getting type Mismatch error required AnkoContext&lt;ViewGroup&gt; Found AnkoContext&lt;Context&gt;", "body": "<p>I am using Anko in a basic Android app where I am implementing recyclerView. In the <code>onCreateViewHolder()</code> method I am getting a compile time error saying type Mismatch. Everything else is fine in the below code.</p>\n\n<pre><code>class ListAdapter(val arrayList: ArrayList&lt;String&gt; = ArrayList&lt;String&gt;()) : RecyclerView.Adapter&lt;Holder&gt;() {\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): Holder? {\n\n        //type Mismatch error required AnkoContext&lt;ViewGroup&gt; Found AnkoContext&lt;Context&gt;\n        return Holder(ItemUI().createView(AnkoContext.create(parent!!.context)))\n\n    }\n\n    override fun onBindViewHolder(holder: Holder, position: Int) {\n        val item = arrayList.get(position)\n        holder.bind(item)\n    }\n\n    override fun getItemCount(): Int {\n        return arrayList.size\n    }\n\n}\n\nclass ItemUI : AnkoComponent&lt;ViewGroup&gt; {\n    override fun createView(ui: AnkoContext&lt;ViewGroup&gt;): View {\n        return with(ui) {\n\n            verticalLayout {\n                lparams(width = matchParent, height = dip(48))\n                horizontalPadding = dip(16)\n\n                var name=textView {\n                    id = 7\n                    singleLine = true\n                    textSize = 16f\n                }\n                name.onClick {\n                    toast(\"Hi,  ${name.text}!\")\n                }\n            }\n        }\n    }\n}\n\nclass Holder(itemView: View) : RecyclerView.ViewHolder(itemView){\n    val name: TextView = itemView.find(1)\n\n    fun bind(nm: String) {\n        name.text = nm\n    }\n}\n</code></pre>\n\n<p>Please let me know if I am using a wrong Syntax or the implementation of the <code>recyclerview</code> is erroneous</p>\n"}, {"tags": ["guice", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 74510, "user_id": 43582, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e5ac1db48e4a7ef1b192cc6b5e7fbf0?s=128&d=identicon&r=PG", "display_name": "Bombe", "link": "https://stackoverflow.com/users/43582/bombe"}, "edited": false, "score": 0, "creation_date": 1485338136, "post_id": 41846282, "comment_id": 70880947, "body": "When using <code>private val injector = Guice.createInjector(Module { it.bind(Context::class.java).toProvider { context } })</code> it finally behaves the way I intended to. Thanks!"}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 2, "last_activity_date": 1485335051, "last_edit_date": 1485335051, "creation_date": 1485331363, "answer_id": 41846282, "question_id": 41845083, "link": "https://stackoverflow.com/questions/41845083/injecting-an-instance-fails-with-kotlin-guice/41846282#41846282", "title": "Injecting an Instance Fails with Kotlin &amp; Guice", "body": "<p>Guice automatically injects instances passed to <code>toInstance()</code> in a bind statement, so <code>@Inject</code> annotations on <code>Context</code> are relevant. </p>\n\n<p>In your example, Guice is not creating a new instance of <code>Context</code>, but injects the field of the instance with an empty string.</p>\n\n<p>When you annotate the property, Kotlin puts the annotation on the field. When you annotate the getter, Guice ignores it.</p>\n"}], "owner": {"reputation": 74510, "user_id": 43582, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3e5ac1db48e4a7ef1b192cc6b5e7fbf0?s=128&d=identicon&r=PG", "display_name": "Bombe", "link": "https://stackoverflow.com/users/43582/bombe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1547, "favorite_count": 1, "accepted_answer_id": 41846282, "answer_count": 1, "score": 4, "last_activity_date": 1485335051, "creation_date": 1485326660, "question_id": 41845083, "link": "https://stackoverflow.com/questions/41845083/injecting-an-instance-fails-with-kotlin-guice", "title": "Injecting an Instance Fails with Kotlin &amp; Guice", "body": "<p>I have the following code:</p>\n\n<pre><code>class Test {\n\n  private val context = Context().apply {\n    property = \"foo\"\n  }\n\n  private val injector = Guice.createInjector(Module { it.bind(Context::class.java).toInstance(context) })\n\n  @Test\n  fun `service received correct context`() {\n    assertThat(injector.getInstance(Service::class.java).context.property, equalTo(\"foo\"))\n  }\n\n}\n\nclass Service @Inject constructor(val context: Context)\n\nclass Context {\n  @Inject lateinit var property: String\n}\n</code></pre>\n\n<p>When running it, the test fails, complaining (rightfully) that an empty string is not \u201cfoo.\u201d But why is Guice not using the instance I painstakingly created and supplied to the injector in form a <code>Module</code>? (That\u2019s the first question.)</p>\n\n<p>However, if I change the <code>Context</code> to look like this:</p>\n\n<pre><code>class Context {\n  @get:Inject lateinit var property: String\n}\n</code></pre>\n\n<p>the test is suddenly succeeding. I don\u2019t really understand why Guice is looking at <code>Context</code>\u2019s annotations at all if I have bound the <code>Context</code> class to the instance I created. Can anybody tell me what is going on here?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 10, "creation_date": 1485327047, "post_id": 41844910, "comment_id": 70874623, "body": "I&#39;d probably simplify to <code>Planets.values().any { it.name == &quot;EARTH&quot; }</code> (you want it to stop looking once its found a match instead of looking through the  whole list)"}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": false, "score": 9, "last_activity_date": 1554880249, "last_edit_date": 1554880249, "creation_date": 1485325948, "answer_id": 41844910, "question_id": 41844080, "link": "https://stackoverflow.com/questions/41844080/kotlin-how-to-check-if-enum-contains-a-given-string-without-messing-with-except/41844910#41844910", "title": "Kotlin: How to check if enum contains a given String without messing with Exceptions?", "body": "<p>You can just take <code>values</code> Array of your enum and use contains over it. For example:</p>\n\n<pre><code>Planets.values().map { it.name }.contains(\"EARTH\")\n</code></pre>\n\n<p>But for this you need to have correct string value so you might uppercase it before search.</p>\n\n<p>If you want to find enum by its value take a look at the <a href=\"https://stackoverflow.com/a/37795810/2392960\">Reverse Lookup</a> for enums.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>As @JamesBassett suggested you can optimize it to stop looking once it finds a match.</p>\n\n<pre><code>Planets.values().any { it.name == \"EARTH\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "is_accepted": false, "score": 3, "last_activity_date": 1485326568, "creation_date": 1485326568, "answer_id": 41845064, "question_id": 41844080, "link": "https://stackoverflow.com/questions/41844080/kotlin-how-to-check-if-enum-contains-a-given-string-without-messing-with-except/41845064#41845064", "title": "Kotlin: How to check if enum contains a given String without messing with Exceptions?", "body": "<p>You could do something like this:</p>\n\n<pre><code>fun &lt;T : Enum&lt;*&gt;&gt; KClass&lt;T&gt;.contains(value: String): Boolean {\n    return this.java.enumConstants.any { it.name == value }\n}\n\nMyEnum::class.contains(\"some string\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 2, "creation_date": 1485383946, "post_id": 41855007, "comment_id": 70909732, "body": "Yeah that&#39;s much better using <code>reified</code> (having an extension function on KClass isn&#39;t very pretty!).  On a semi-related side note, along with <code>enumConstants</code>, 1.1 is bringing a whole bag of <a href=\"https://github.com/JetBrains/kotlin/commit/ed1490dbc43f88696f82e5307df43269ecbb32b1\" rel=\"nofollow noreferrer\">reflection goodies</a>!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 43, "last_activity_date": 1485357044, "last_edit_date": 1495541806, "creation_date": 1485357044, "answer_id": 41855007, "question_id": 41844080, "link": "https://stackoverflow.com/questions/41844080/kotlin-how-to-check-if-enum-contains-a-given-string-without-messing-with-except/41855007#41855007", "title": "Kotlin: How to check if enum contains a given String without messing with Exceptions?", "body": "<h2><code>enumContains</code></h2>\n\n<p>You can create an <code>enumContains</code> function similar to <a href=\"https://stackoverflow.com/users/1068649/hound-dog\">Hound Dog</a>'s <a href=\"https://stackoverflow.com/a/41845064/3255152\">answer</a> but using <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">reified type parameters</a> instead.</p>\n\n<p>You cannot create a JVM independent solution in Kotlin 1.0 but you can in Kotlin 1.1 using <a href=\"https://blog.jetbrains.com/kotlin/2017/01/kotlin-1-1-beta-is-here/\" rel=\"noreferrer\"><code>enumValues</code></a>.</p>\n\n<h3>Kotlin 1.1</h3>\n\n<pre><code>/**\n * Returns `true` if enum T contains an entry with the specified name.\n */\ninline fun &lt;reified T : Enum&lt;T&gt;&gt; enumContains(name: String): Boolean {\n    return enumValues&lt;T&gt;().any { it.name == name}\n}\n</code></pre>\n\n<h3>Kotlin 1.0</h3>\n\n<pre><code>/**\n * Returns `true` if enum T contains an entry with the specified name.\n */\ninline fun &lt;reified T : Enum&lt;T&gt;&gt; enumContains(name: String): Boolean {\n    return T::class.java.enumConstants.any { it.name == name}\n}\n</code></pre>\n\n<h3>Usage</h3>\n\n<pre><code>enumContains&lt;MyEnum&gt;(\"some string\") // returns true or false\n</code></pre>\n\n<h2><code>enumValueOfOrNull</code></h2>\n\n<p>If you also need the actual enum entry then you might consider creating an <code>enumValueOfOrNull</code> function instead.</p>\n\n<h3>Kotlin 1.1</h3>\n\n<pre><code>/**\n * Returns an enum entry with the specified name or `null` if no such entry was found.\n */\ninline fun &lt;reified T : Enum&lt;T&gt;&gt; enumValueOfOrNull(name: String): T? {\n    return enumValues&lt;T&gt;().find { it.name == name }\n}\n</code></pre>\n\n<h3>Kotlin 1.0</h3>\n\n<pre><code>/**\n * Returns an enum entry with the specified name or `null` if no such entry was found.\n */\ninline fun &lt;reified T : Enum&lt;T&gt;&gt; enumValueOfOrNull(name: String): T? {\n    return T::class.java.enumConstants.find { it.name == name }\n}\n</code></pre>\n\n<h3>Usage</h3>\n\n<pre><code>enumValueOfOrNull&lt;MyEnum&gt;(\"some string\")\n</code></pre>\n"}], "owner": {"reputation": 9320, "user_id": 7045114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9OfXY.jpg?s=128&g=1", "display_name": "Maksim Ostrovidov", "link": "https://stackoverflow.com/users/7045114/maksim-ostrovidov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13889, "favorite_count": 0, "accepted_answer_id": 41855007, "answer_count": 3, "score": 16, "last_activity_date": 1554880249, "creation_date": 1485322140, "question_id": 41844080, "link": "https://stackoverflow.com/questions/41844080/kotlin-how-to-check-if-enum-contains-a-given-string-without-messing-with-except", "title": "Kotlin: How to check if enum contains a given String without messing with Exceptions?", "body": "<p>Why there is no <code>contains</code> method in enum classes (as well as in Java)? And how to implement it elegantly? Now I'm using this ugly approach:</p>\n\n<pre><code>val contains: Boolean = \n    try {\n        MyEnum.valueOf(\"some string\")\n        true\n    } catch (e: IllegalArgumentException) {\n        false\n    }\n</code></pre>\n"}, {"tags": ["unit-testing", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1485327393, "post_id": 41840883, "comment_id": 70874779, "body": "The question duplicate covers mocking of <code>final</code> elements, while this question is about mocking a property. Thus, it shouldn&#39;t be closed for that reason. For that matter, if you apply <code>open</code> to the class so Mockito allows you to mock it, you can do <code>when(mockUserRepository.loggedInUser).thenReturn(someValue)</code>."}, {"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1485361885, "post_id": 41840883, "comment_id": 70897215, "body": "I marked as duplicate since the other question is related and the answer fix this too."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1485362590, "post_id": 41840883, "comment_id": 70897686, "body": "@caipivaira Fair enough."}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "closed_date": 1485305053, "answer_count": 0, "score": 1, "last_activity_date": 1485361681, "creation_date": 1485300833, "last_edit_date": 1485361681, "question_id": 41840883, "link": "https://stackoverflow.com/questions/41840883/how-to-mock-kotlin-attribute-get-with-mockito", "closed_reason": "Duplicate", "title": "How to mock Kotlin attribute get with mockito", "body": "<p>With </p>\n\n<blockquote>\n  <ul>\n  <li>Kotlin 1.0.6</li>\n  <li>Mockito 2.6.3</li>\n  </ul>\n</blockquote>\n\n<p>If I have a class like:</p>\n\n<pre><code>class UserRepository {\n   var loggedInUser: User?\n       get() = //...\n}\n</code></pre>\n\n<p>How can I mock the get of <code>loggedInUser</code> with mockito?</p>\n"}, {"tags": ["android", "kotlin", "anko"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 1870447, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5obdQ.jpg?s=128&g=1", "display_name": "Antek", "link": "https://stackoverflow.com/users/1870447/antek"}, "edited": false, "score": 0, "creation_date": 1499073534, "post_id": 42361244, "comment_id": 76741863, "body": "Kotlin&#39;s got named parametres, no need to keep the order if you name them (as in the question)"}], "tags": [], "owner": {"reputation": 1, "user_id": 7597072, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZNOs.jpg?s=128&g=1", "display_name": "Nhemesy", "link": "https://stackoverflow.com/users/7597072/nhemesy"}, "is_accepted": false, "score": -1, "last_activity_date": 1487662632, "creation_date": 1487662632, "answer_id": 42361244, "question_id": 41832267, "link": "https://stackoverflow.com/questions/41832267/anko-equivalent-to-style-attr-in-xml/42361244#42361244", "title": "Anko equivalent to style attr in xml", "body": "<p>The order is wrong. Try this:</p>\n\n<pre><code>button(\"Your text\", android.support.design.R.style.Base_Widget_AppCompat_Button_Borderless_Colored) {\n  //your params\n }\n</code></pre>\n\n<p>This works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": false, "score": 0, "last_activity_date": 1492769370, "creation_date": 1492769370, "answer_id": 43539887, "question_id": 41832267, "link": "https://stackoverflow.com/questions/41832267/anko-equivalent-to-style-attr-in-xml/43539887#43539887", "title": "Anko equivalent to style attr in xml", "body": "<p>Try using third constructor parameter, which accepts <code>attr</code> resource:</p>\n\n<pre><code>addView(Button(activity, null, R.attr.borderlessButtonStyle))\n</code></pre>\n\n<p>Also, you can declare it as a DSL component:</p>\n\n<pre><code>fun ViewManager.borderlessButton(textRes: Int = 0) =\n        borderlessButton(textRes) { }\n\nfun ViewManager.borderlessButton(textRes: Int = 0, init: Button.()-&gt;Unit) =\n        ankoView({ Button(it, null, R.attr.borderlessButtonStyle) }, 0) {\n            if (textRes != 0) setText(textRes)\n            init()\n        }\n</code></pre>\n\n<p>Then, your call-site may look like this:</p>\n\n<pre><code>borderlessButton(android.R.string.ok)\n</code></pre>\n\n<p>You may look at Anko's <code>horizontalProgressBar</code> method and <a href=\"https://github.com/Kotlin/anko/blob/cd2b30d0dc54ff8998a1c3a2159967515ac45498/anko/library/static/platform/src/CustomViews.kt#L41\" rel=\"nofollow noreferrer\"><code>HORIZONTAL_PROGRESS_BAR_FACRTORY</code></a> which are declared in similar way.</p>\n"}], "owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1559, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1507197399, "creation_date": 1485272464, "question_id": 41832267, "link": "https://stackoverflow.com/questions/41832267/anko-equivalent-to-style-attr-in-xml", "title": "Anko equivalent to style attr in xml", "body": "<p>I need to create borderless button. The easyest way in xml to set <code>Widget.AppCompat.Button.Borderless</code>. I'm trying to do this using <code>Anko</code></p>\n\n<pre><code>button(theme = R.style.Widget_AppCompat_Button_Borderless_Colored, text = \"Send\") {\n    horizontalGravity = Gravity.END\n    lparams(wrapContent, wrapContent)\n}\n</code></pre>\n\n<p>But there is no effect. What am I doing wrong?</p>\n"}, {"tags": ["android", "android-support-library", "kotlin", "android-support-design", "anko"], "comments": [{"owner": {"reputation": 1559, "user_id": 2759296, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OoPGq.jpg?s=128&g=1", "display_name": "anthonymonori", "link": "https://stackoverflow.com/users/2759296/anthonymonori"}, "edited": false, "score": 0, "creation_date": 1514889610, "post_id": 41825295, "comment_id": 83091098, "body": "Any specific reason why you are not using the latest support libraries? Also, do you have any custom theme defines under values/styles.xml ?"}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1525131711, "post_id": 41825295, "comment_id": 87236465, "body": "Screenshot 1 - the bottom bar is not too large. It&#39;s supposed to extend behind the navigation bar if it&#39;s translucent. /// Try wrapping the Toolbar in an AppBarLayout with fitsSystemWindows instead."}], "owner": {"reputation": 1437, "user_id": 5353755, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a5058688cd795df29df251d1d91b603e?s=128&d=identicon&r=PG&f=1", "display_name": "Near1999", "link": "https://stackoverflow.com/users/5353755/near1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 483, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1485257192, "creation_date": 1485252401, "last_edit_date": 1485257192, "question_id": 41825295, "link": "https://stackoverflow.com/questions/41825295/seems-to-be-a-bug-in-support-design-library", "title": "Seems to be a bug in support design library", "body": "<p>I'm trying to create an application with similar to <code>Google Photos</code> app UI. Support Libary Version = 25.1.0. </p>\n\n<p>The problem in that with translucent status and navigation bars, widgets inside <code>CoorinatorLayout</code> looks not as expected. Setting <code>fitsSystemWindows=true</code> attribute for the <code>BottomNavigationView</code> makes it too large (screenshot 1) and <code>SnakBar</code> in that case appears behind navigation bar, not above <code>BottomNavView</code> or nav bar as expected. If I add <code>fitsSystemWindows=true</code> in <code>Toolbar</code> (screenshot 2) then BottomNavigationView looses it's <code>fitsSystemWindows</code> attribute and <code>Toolbar</code> content gone somewhere. It looks as a support library bug, but I'm not sure in that.</p>\n\n<p>Here is my DSL code:</p>\n\n<pre><code>       coordinatorLayout {\n\n                customToolbar {\n                    id = TOOLBAR\n//                  fitsSystemWindows = true\n                    title = createTitle(ctx)\n                    lparams(matchParent, dip(48))\n                }\n\n                frameLayout {\n                    id = CONTENT_FRAME\n                    backgroundResource = R.color.colorBackground\n                    lparams(matchParent, matchParent)\n                }\n\n                bottomNavigationView(R.style.Base_ThemeOverlay_AppCompat_Dark) {\n                    id = BOTTOM_NAVIGATION_VIEW\n\n                    fitsSystemWindows = true\n                    itemIconTintList = ContextCompat.getColorStateList(ctx, R.drawable.nav_item_color_state)\n                    itemTextColor = ContextCompat.getColorStateList(ctx, R.drawable.nav_item_color_state)\n                    backgroundResource = R.color.colorAccent\n                    inflateMenu(R.menu.menu_drawer_2)\n                    lparams(matchParent) {\n                        anchorGravity = Gravity.BOTTOM\n                        anchorId = CONTENT_FRAME\n                    }\n                }\n            }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Fj0UQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fj0UQ.jpg\" alt=\"enter image description here\"></a><a href=\"https://i.stack.imgur.com/0ZrO8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0ZrO8.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["generics", "annotations", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485251477, "post_id": 41824912, "comment_id": 70836993, "body": "I guess you can just give the type parameter a name: <code>fun &lt;T : Bar&gt; value(): Class&lt;T&gt;</code>."}, {"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485252728, "post_id": 41824912, "comment_id": 70837886, "body": "@marstran Please notice this is an <b>annotation</b> and kotlin annotations even can&#39;t have a class body."}], "answers": [{"comments": [{"owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "edited": false, "score": 1, "creation_date": 1485256484, "post_id": 41825588, "comment_id": 70840402, "body": "I actually confused with scala, I tried both postfixing and prefixing the type with a plus(<code>+</code>), and, well, of course it yields some weird compliant error."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 3, "last_activity_date": 1485253230, "creation_date": 1485253230, "answer_id": 41825588, "question_id": 41824912, "link": "https://stackoverflow.com/questions/41824912/what-is-the-kotlin-equivlant-to-java-annotation-field-with-bounded-wildcard-type/41825588#41825588", "title": "What is the kotlin equivlant to Java annotation field with bounded wildcard type?", "body": "<p>Kotlin annotations cannot have method-definitions. They can, however, have constructor parameters. I think this works like you want it to:</p>\n\n<pre><code>import kotlin.reflect.KClass\n\ninterface Bar\nclass Foo : Bar\n\n@Target(AnnotationTarget.FUNCTION)\nannotation class Test(val value: KClass&lt;out Bar&gt;)\n\n@Test(Foo::class)\nfun testAnnotation() {\n    println(\"Test\")\n}\n</code></pre>\n\n<p>Notice the <strong>out</strong> modifier on the <code>KClass</code> type parameter. It makes the type parameter <em>covariant</em>, meaning it can be of type <code>Bar</code> or any type that implements <code>Bar</code>.</p>\n"}], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "accepted_answer_id": 41825588, "answer_count": 1, "score": 1, "last_activity_date": 1485253230, "creation_date": 1485251295, "question_id": 41824912, "link": "https://stackoverflow.com/questions/41824912/what-is-the-kotlin-equivlant-to-java-annotation-field-with-bounded-wildcard-type", "title": "What is the kotlin equivlant to Java annotation field with bounded wildcard type?", "body": "<p>Say I have an annotation in Java like this:</p>\n\n<pre><code>public @interface Foo {\n    Class&lt;? extends Bar&gt; value();\n}\n\npublic interface Bar {}\n</code></pre>\n\n<p>How should I translate <code>Foo</code> into kotlin? Is it true that I could only switch back to Java in such situation?</p>\n"}, {"tags": ["javafx", "kotlin", "testfx", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 11373502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a6a596c0dec14509997c012e983c7c?s=128&d=identicon&r=PG&f=1", "display_name": "Mosch", "link": "https://stackoverflow.com/users/11373502/mosch"}, "is_accepted": true, "score": 1, "last_activity_date": 1559627741, "creation_date": 1559627741, "answer_id": 56438054, "question_id": 41824115, "link": "https://stackoverflow.com/questions/41824115/tornadofx-with-testfx-close-the-view-after-every-testcase/56438054#56438054", "title": "TornadoFX with TestFX close the View after every TestCase", "body": "<p>You can add property which you can edit at any time at you App() class.</p>\n\n<pre><code>class MyMainApp: App() {\n    override val primaryView: KClass&lt;out View&gt; = primaryViewMyApp\n\n    companion object {\n        var primaryViewMyApp: KClass&lt;out View&gt; = MyMainAppView::class\n    }\n\n    init {\n        importStylesheet(&lt;your stylesheet&gt;)\n    }\n\n    override fun start(stage: Stage) {\n        super.start(stage)\n    }\n\n    override fun stop() {\n        super.stop()\n    }\n}\n</code></pre>\n\n<p>and in the test you can than use any view you want to use. I didnt try to implement something for Fragment so far...</p>\n\n<pre><code>    override fun init() {\n        FxToolkit.registerStage { Stage() }\n    }\n\n    override fun start(stage: Stage) {\n        MyMainApp.primaryViewGoApp = &lt;your view&gt;::class\n        MyMainApp().start(stage)\n    }\n\n    override fun stop() {\n        FxToolkit.cleanupStages()\n        MyMainApp().stop()\n    }\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 2147234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eda37aa3cd03335e2c0dccc6890e32e1?s=128&d=identicon&r=PG", "display_name": "mercy123", "link": "https://stackoverflow.com/users/2147234/mercy123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 56438054, "answer_count": 1, "score": 3, "last_activity_date": 1559627741, "creation_date": 1485248986, "question_id": 41824115, "link": "https://stackoverflow.com/questions/41824115/tornadofx-with-testfx-close-the-view-after-every-testcase", "title": "TornadoFX with TestFX close the View after every TestCase", "body": "<p>I am trying to test a basic loginscreen (created using tornadofx) with the testfx framework.    </p>\n\n<p>I have added 3 test cases which runs fine but the problem is they use the previous stage rather than creating a new one. I want the testcases to run independently.  </p>\n\n<p>I am testing a View() and not an App(). If I use MyMainApp().start(stage) and then MyMainApp().stop(), I get the required behaviour.<br>\nBut how to do this for Views and Fragments.   </p>\n\n<p>Below is the code:  </p>\n\n<pre><code>class LoginScreenFeatureTest : ApplicationTest() {\n\n    override fun init() {\n        FxToolkit.registerStage { Stage() }\n    }\n\n    override fun start(stage: Stage) {\n        LoginScreen().openWindow()\n        //MyMainApp().start(stage)\n    }\n\n    override fun stop() {\n        FxToolkit.cleanupStages()\n        //FxToolkit.toolkitContext().registeredStage.close()\n        //MyMainApp().stop()\n    }\n\n    @Test fun should_contain_button() {\n        // expect:\n        verifyThat(\"#submitBut\", hasText(\"SUBMIT\"))\n    }\n\n    @Test fun should_click_on_button_and_pass_login() {\n        //init\n        //Why do I always need to erase text. I want a new stage for every test case.\n        clickOn(\"#username\").eraseText(10).write(\"validUser\")\n        clickOn(\"#password\").eraseText(10).write(\"validPwd\")\n        clickOn(\"#orgId\").eraseText(10).write(\"validOrg\")\n\n        // when:\n        clickOn(\"#submitBut\")\n\n        // then:\n        //verify success \n    }\n\n    @Test fun should_click_on_button_and_fail_login() {\n        //init\n        clickOn(\"#username\").eraseText(10).write(\"anyuser\")\n        clickOn(\"#password\").eraseText(10).write(\"anypwd\")\n        clickOn(\"#orgId\").eraseText(10).write(\"anyorg\")\n\n        // when:\n        clickOn(\"#submitBut\")\n\n        // then:\n        //verify fail \n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 1394, "user_id": 1977565, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ac047109a8e899f0a5b8e14cb6e51d4a?s=128&d=identicon&r=PG", "display_name": "UneXp", "link": "https://stackoverflow.com/users/1977565/unexp"}, "edited": false, "score": 0, "creation_date": 1485248436, "post_id": 41810179, "comment_id": 70835080, "body": "I&#39;d like to recommend you to use more complex names for your IDs :) It prevents from &quot;playing&quot; with imports in my case as well."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1485252814, "post_id": 41810179, "comment_id": 70837944, "body": "Not sure if this answers your question, but the synthetic calls are translated to calls to <code>findviewById</code> and because every id <b>name</b> is mapped to a unique value, it doesn&#39;t matter <i>which</i> import you use as long as you use one with the correct name."}, {"owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "edited": false, "score": 0, "creation_date": 1485259783, "post_id": 41810179, "comment_id": 70842540, "body": "I imagined, but actually it is working bad. I have an activity with a txtTitle, inside of this activity there is a fragment with a RecyclerView: inside of the RecyclerView there are views with a txtTitle. I&#39;m just seeing what I wrote: when I use the txtTitle inside of the activity it does not produce the expected result (it does not set the TextView&#39;s text); instead, if I use findViewById() from the activity it works correctly..."}, {"owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "edited": false, "score": 0, "creation_date": 1485775482, "post_id": 41810179, "comment_id": 71049587, "body": "Honestly I don&#39;t think each call to a synthetic property is translated to a findViewById, it would be terrible for performances. I hope they will solve this bug in the next version of the Android extensions"}, {"owner": {"reputation": 868, "user_id": 4970976, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fkqFs.jpg?s=128&g=1", "display_name": "bartonstanley", "link": "https://stackoverflow.com/users/4970976/bartonstanley"}, "edited": false, "score": 0, "creation_date": 1498060854, "post_id": 41810179, "comment_id": 76346377, "body": "According to the book <i>Kotlin for Android Developers</i>:  How does it [synthetic views] work under the hood?  The plugin substitutes any properties call into a function that requests the view, and a caching function that <b>prevents from having to find the view every time a property is called.</b>  So it <b>is</b> translated into findViewById but there is a caching mechanism so that findViewById is called only once for each View."}], "answers": [{"comments": [{"owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "edited": false, "score": 6, "creation_date": 1485248268, "post_id": 41823738, "comment_id": 70834981, "body": "I can&#39;t use the &quot;as&quot; keyword on a multiple import statement, the IDE (Android Studio) warns me with the message &quot;Cannot rename all imported items to one identifier&quot;. Furthermore, in my activity I have not the import of the layout, because it is used by a fragment (attached to the activity), not by the activity."}], "tags": [], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "is_accepted": true, "score": 6, "last_activity_date": 1485247889, "creation_date": 1485247889, "answer_id": 41823738, "question_id": 41810179, "link": "https://stackoverflow.com/questions/41810179/kotlins-synthetic-properties-conflict/41823738#41823738", "title": "Kotlin&#39;s synthetic properties conflict", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/packages.html\" rel=\"noreferrer\">kotlin documentation on imports</a> says</p>\n\n<blockquote>\n  <p>If there is a name clash, we can disambiguate by using <code>as</code> keyword to locally rename the clashing entity</p>\n</blockquote>\n\n<p>So you could try to import the layouts with different aliases:</p>\n\n<pre><code>import kotlinx.android.synthetic.main.&lt;layoutActivity&gt;.* as lActivity\nimport kotlinx.android.synthetic.main.&lt;layoutView&gt;.* as lView\n</code></pre>\n\n<p>And use the textviews with the corresponding qualifier: <code>lActivity.txtTitle</code> and <code>lView.txtTitle</code></p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 1415323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e19768a837823804754f8280009595?s=128&d=identicon&r=PG", "display_name": "Kingsley Adio", "link": "https://stackoverflow.com/users/1415323/kingsley-adio"}, "is_accepted": false, "score": 0, "last_activity_date": 1494756566, "creation_date": 1494756566, "answer_id": 43962706, "question_id": 41810179, "link": "https://stackoverflow.com/questions/41810179/kotlins-synthetic-properties-conflict/43962706#43962706", "title": "Kotlin&#39;s synthetic properties conflict", "body": "<p>Another possible solution to your problem is to just import one and omit the other, assuming all the IDs you need are present in that one.</p>\n\n<p>At the end of the day, similar IDs point to the same thing, and it doesn't really matter whether it was imported from one layout or the other.</p>\n\n<p>Hope that helps</p>\n"}, {"tags": [], "owner": {"reputation": 1420, "user_id": 7333260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KGUpL.png?s=128&g=1", "display_name": "paril", "link": "https://stackoverflow.com/users/7333260/paril"}, "is_accepted": false, "score": 3, "last_activity_date": 1496844720, "last_edit_date": 1496844720, "creation_date": 1496827673, "answer_id": 44408703, "question_id": 41810179, "link": "https://stackoverflow.com/questions/41810179/kotlins-synthetic-properties-conflict/44408703#44408703", "title": "Kotlin&#39;s synthetic properties conflict", "body": "<p>You can try below thing for <code>TextView</code> having same id from different layout.</p>\n\n<pre><code>import kotlinx.android.synthetic.main.activity_main.text_hello as lActivity\n\nimport kotlinx.android.synthetic.main.extra_layout.text_hello as lView\n</code></pre>\n\n<p>use <code>lActivity.text = \"Some text\"</code> for <code>TextView</code> from <code>activity_main</code> and <code>lView.text = \"Some text\"</code> for <code>TextView</code> from <code>extra_layout</code>.</p>\n"}], "owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3189, "favorite_count": 2, "accepted_answer_id": 41823738, "answer_count": 3, "score": 7, "last_activity_date": 1518090937, "creation_date": 1485186210, "last_edit_date": 1518090937, "question_id": 41810179, "link": "https://stackoverflow.com/questions/41810179/kotlins-synthetic-properties-conflict", "title": "Kotlin&#39;s synthetic properties conflict", "body": "<p>I'm new to Kotlin. Among other very interesting things, I've found the Android extensions which, <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html#importing-synthetic-properties\" rel=\"nofollow noreferrer\">according to the documentation</a>, should let me use activities' views without the need of <code>findViewById</code>.</p>\n\n<p>Actually it works very well by adding just this line in my imports:</p>\n\n<pre><code>import kotlinx.android.synthetic.main.&lt;layout&gt;.*\n</code></pre>\n\n<p>The problem is when two different layouts contain a widget with the same id (i.e. the same name for the synthetic property),<br/>\ne.g. two different <code>TextView</code>s with the id <code>txtTitle</code>. Say the first one is on an activity and the second one belongs to the layout used inside of an adapter.</p>\n\n<p>When I try to call a method on the first TextView (the activity's one) I can't see the expected result, as if the call would be done on another view. As confirmation of this, when I call <code>txtTitle.parent</code>, I see the parent and the siblings of the other <code>txtTitle</code> rather than the ones expected.</p>\n\n<p>Am I doing something wrong? The only ways I've found to bypass this issue is to use different names in all my layouts or continue to use <code>findViewById</code>, but it would be a pity to waste this language feature...</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1485174464, "post_id": 41806055, "comment_id": 70800255, "body": "What is the return type of <code>getIndex</code>?"}, {"owner": {"reputation": 5745, "user_id": 777939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4f399c0b34a287ad4c5ae184f2335488?s=128&d=identicon&r=PG", "display_name": "Martin Eden", "link": "https://stackoverflow.com/users/777939/martin-eden"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1485175093, "post_id": 41806055, "comment_id": 70800683, "body": "@hotkey: PrimaryIndex&lt;TModel!, TKey!&gt;!"}, {"owner": {"reputation": 5745, "user_id": 777939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4f399c0b34a287ad4c5ae184f2335488?s=128&d=identicon&r=PG", "display_name": "Martin Eden", "link": "https://stackoverflow.com/users/777939/martin-eden"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1485175991, "post_id": 41806055, "comment_id": 70801273, "body": "This also reproduces the error: <code>val users : PrimaryIndex&lt;Int, User&gt; = store.getPrimaryIndex(Int::class.java, &quot;Int&quot;, User::class.java, &quot;User&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5745, "user_id": 777939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4f399c0b34a287ad4c5ae184f2335488?s=128&d=identicon&r=PG", "display_name": "Martin Eden", "link": "https://stackoverflow.com/users/777939/martin-eden"}, "edited": false, "score": 1, "creation_date": 1485430114, "post_id": 41821777, "comment_id": 70926536, "body": "Thanks! Both of these approaches work - I hadn&#39;t realized you could just leave the type arguments off of class constructors. I am too used to C#, where function type parameters can be derived, but not class parameters. In any case, I have gone for explicitly casting, as I&#39;d rather not have the platform types propagating."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 2, "last_activity_date": 1485240738, "creation_date": 1485240738, "answer_id": 41821777, "question_id": 41806055, "link": "https://stackoverflow.com/questions/41806055/in-kotlin-how-can-i-instantiate-a-generic-class-using-a-native-java-parameter/41821777#41821777", "title": "In Kotlin, how can I instantiate a generic class using a native java parameter?", "body": "<p>The simplest workaround is to cast the types:</p>\n\n<pre><code>ModelStore&lt;User, Int&gt;(getIndex&lt;User, Int&gt;() as PrimaryIndex&lt;User, Int&gt;)\n</code></pre>\n\n<p>Also I would expect it to work without specifying the types:</p>\n\n<pre><code>ModelStore(getIndex&lt;User, Int&gt;())\n</code></pre>\n"}], "owner": {"reputation": 5745, "user_id": 777939, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4f399c0b34a287ad4c5ae184f2335488?s=128&d=identicon&r=PG", "display_name": "Martin Eden", "link": "https://stackoverflow.com/users/777939/martin-eden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 41821777, "answer_count": 1, "score": 1, "last_activity_date": 1485433458, "creation_date": 1485173403, "last_edit_date": 1485433458, "question_id": 41806055, "link": "https://stackoverflow.com/questions/41806055/in-kotlin-how-can-i-instantiate-a-generic-class-using-a-native-java-parameter", "title": "In Kotlin, how can I instantiate a generic class using a native java parameter?", "body": "<p>I am exploring using BDB JE (Berkeley DB Java Edition) with Kotlin. Knowledge of BDB is not necessary to answer this question.</p>\n\n<p>BDB has a method that looks like this:</p>\n\n<pre><code>store.getPrimaryIndex(Int::class.java, \"Int\", Person::class.java, \"Person\")\n</code></pre>\n\n<p>I want to do things generically, so I wrote this</p>\n\n<pre><code>inline fun &lt;reified TModel : Any, reified TKey : Any&gt; getIndex() = \n    return store.getPrimaryIndex(TKey::class.java, TKey::class.simpleName, TModel::class.java, Model::class.simpleName)\n</code></pre>\n\n<p>So far so good. I now want to pass this index object to a class, which looks like this:</p>\n\n<pre><code>class ModelStore&lt;TModel, TKey&gt;(index : PrimaryIndex&lt;TKey, TModel&gt;) {\n    private val index = index\n\n    fun get(key : TKey): TModel = index.get(key)\n    fun put(model : TModel) = index.put(model)\n}\n</code></pre>\n\n<p>But if I try and pass the output from <code>getIndex&lt;User, Int&gt;()</code> to <code>ModelStore&lt;User, Int&gt;</code> I get the following error: </p>\n\n<blockquote>\n  <p>Type inference failed: Expected type mismatch: Inferred type is\n  <code>PrimaryIndex&lt;TModel!, TKey!&gt;!</code> but <code>PrimaryIndex&lt;TModel, TKey&gt;</code> was\n  expected.</p>\n</blockquote>\n\n<p>My question: Can I pass the the index to the <code>ModelStore</code>? How do I convince the type-system that this is kosher?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "edited": false, "score": 1, "creation_date": 1485157044, "post_id": 41797955, "comment_id": 70790329, "body": "With <code>return MyApplication().context</code> you are creating a new MyApplication Object. Then you are accessing the context with <code>.context</code>, which is null because <code>onCreate()</code> does not get called when you manually create your object."}, {"owner": {"reputation": 1139, "user_id": 388065, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0d5510c3c90ef3a040ad3bbd2e38859?s=128&d=identicon&r=PG", "display_name": "Makotosan", "link": "https://stackoverflow.com/users/388065/makotosan"}, "edited": false, "score": 0, "creation_date": 1485209296, "post_id": 41797955, "comment_id": 70821292, "body": "context looks like an instance variable, you&#39;re trying to access an instance variable from a static function which you cannot do.  Move the declaration of context into the companion object to make it static as well."}], "answers": [{"comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1485166551, "post_id": 41798257, "comment_id": 70795249, "body": "In Android you don&#39;t create <code>Context</code> instances yourself, they are created for you."}, {"owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1485216621, "post_id": 41798257, "comment_id": 70823987, "body": "@nhaarman In that case you just need to set the <code>MyApplication.context</code> when you&#39;re given the <code>Context</code>. Presumably this is in the MyApplication constructor?"}, {"owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "reply_to_user": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 1, "creation_date": 1485217012, "post_id": 41798257, "comment_id": 70824106, "body": "Actually looking at the code fragments in the original question it looks like the initialization of the companion object was happening in <code>onCreate</code>, so I&#39;ll just change it to do that too."}], "tags": [], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "is_accepted": true, "score": 4, "last_activity_date": 1485216934, "last_edit_date": 1485216934, "creation_date": 1485136765, "answer_id": 41798257, "question_id": 41797955, "link": "https://stackoverflow.com/questions/41797955/static-like-methods-in-android-application-with-kotlin/41798257#41798257", "title": "Static like methods in Android application with kotlin", "body": "<p>It sounds like you want a global application context object. Now casting aside my dislike for global variables, I think you are pretty close.</p>\n\n<p>I think you just need to add the variable into the <code>MyApplication</code> classes companion object and use that directly. You only need the <code>@JvmField</code> annotation if you're going to access the field from Java. </p>\n\n<pre><code>class MyApplication {\n   companion object {\n      @JvmField\n      var context: Context? = null\n\n      // Not really needed since we can access the variable directly.\n      @JvmStatic fun getMyApplicationContext(): Context? {\n        return context\n      }\n   }\n\n   override fun onCreate() {\n     ...\n     MyApplication.context = appContext\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 4165384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9ZleR.jpg?s=128&g=1", "display_name": "Damien Cooke", "link": "https://stackoverflow.com/users/4165384/damien-cooke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2286, "favorite_count": 0, "accepted_answer_id": 41798257, "answer_count": 1, "score": 1, "last_activity_date": 1485216934, "creation_date": 1485134025, "last_edit_date": 1485136251, "question_id": 41797955, "link": "https://stackoverflow.com/questions/41797955/static-like-methods-in-android-application-with-kotlin", "title": "Static like methods in Android application with kotlin", "body": "<p>I am trying to add a \"static\" method to my MyApplication class in kotlin\nI have added (as a property) the variable : </p>\n\n<pre><code>private var context: Context? = null\n</code></pre>\n\n<p>in method: </p>\n\n<pre><code>override fun onCreate()\n</code></pre>\n\n<p>I added: </p>\n\n<pre><code>context = applicationContext\n</code></pre>\n\n<p>then I add a companion object like this</p>\n\n<pre><code>companion object {\n    @JvmStatic fun getMyApplicationContext(): Context?\n    {\n        return MyApplication().context\n    }\n}\n</code></pre>\n\n<p>when I call this method from other parts of the application like\n<code>MyApplication.getMyApplicationContext()</code> it always returns null. I have gleaned all this from several sources but I am not sure if it is anywhere near correct or not.</p>\n"}, {"tags": ["generics", "kotlin", "infix-notation"], "answers": [{"comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485162784, "post_id": 41802058, "comment_id": 70792885, "body": "But lets say you have a class <code>Int2</code> that extends <code>Int1</code>. Then you have this function: <code>infix inline fun &lt;reified U&gt; U.print(i: Int) = println(&quot;${U::class} $i&quot;)</code>. If you want <code>U</code> to be <code>Int1</code>, you can call it like this: <code>Int2(5).print&lt;Int1&gt;(4)</code>. Is it possible to do this call using infix notation?"}, {"owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485164816, "post_id": 41802058, "comment_id": 70794120, "body": "@marstran Yes, you have to cast it&#39;s argument to expected type  <code>Int2(5) print 4.to(Int1::class)</code>"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485164940, "post_id": 41802058, "comment_id": 70794194, "body": "That doesn&#39;t work. That argument is a normal <code>Int</code>. It&#39;s the receiver of type <code>U</code> which is the problem. Would I have to cast that instead? Seems a little weird that I have to use a cast only when dealing with infix functions."}, {"owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485166255, "post_id": 41802058, "comment_id": 70795023, "body": "@marstran sorry, I misunderstand you but now I think I get it: you want <code>Int2(5).print&lt;Int1&gt;(4)</code> to print <code>Int1 4</code> right? So you have to cast caller to <code>Int1</code> type: <code>(Int2(5) as Int1) print 4</code>"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485166428, "post_id": 41802058, "comment_id": 70795147, "body": "That&#39;s right. :) I find it weird that I can&#39;t write it like <code>Int2(5) print&lt;Int1&gt; 4</code> though. Kinda seems like a workaround to do the cast."}, {"owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "reply_to_user": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485166971, "post_id": 41802058, "comment_id": 70795553, "body": "Not at all. If methods <code>Int1#print</code> and <code>Int2#print</code> are different (if not, why do you want explicitly pass <code>Int1</code>?) and you want <code>Int2#print</code> work like <code>Int1#print</code> but for <code>Int2</code> argument, I&#39;d say it&#39;s conceptual problem"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 0, "creation_date": 1485167447, "post_id": 41802058, "comment_id": 70795872, "body": "But if I take the example one step further (it does get kinda ridiculous now though). How can you call this function using infix notation? <code>infix inline fun &lt;reified U&gt; Int.print(i: Int) = println(&quot;$this ${U::class} $i&quot;)</code>. Calling it using normal notation works fine: <code>5.print&lt;String&gt;(4)</code> prints <code>5 class kotlin.String 4</code>."}, {"owner": {"reputation": 151, "user_id": 6731207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313d2cb8eb9602a0c61618e3e4c99ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy L", "link": "https://stackoverflow.com/users/6731207/jeremy-l"}, "edited": false, "score": 0, "creation_date": 1485168854, "post_id": 41802058, "comment_id": 70796778, "body": "thank you for the interesting replies! marstran you are in aligned with my question : my initial question was a bit wierd because &lt;U&gt; was unused... but you must imagine it is the case :) but U do not appears in signature"}], "tags": [], "owner": {"reputation": 1920, "user_id": 4261472, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Rhz3p.jpg?s=128&g=1", "display_name": "Sergei Voitovich", "link": "https://stackoverflow.com/users/4261472/sergei-voitovich"}, "is_accepted": false, "score": 4, "last_activity_date": 1485161071, "last_edit_date": 1485161071, "creation_date": 1485160718, "answer_id": 41802058, "question_id": 41796484, "link": "https://stackoverflow.com/questions/41796484/can-we-use-infix-generic-methods-in-kotlin/41802058#41802058", "title": "Can we use infix generic methods in Kotlin ?", "body": "<p>TL;DR yes, we can</p>\n\n<p>First, there's no point in parameterizing such method</p>\n\n<pre><code>infix fun &lt;U&gt; Int.foo(i: Int) = ...\n</code></pre>\n\n<p>because <strong>foo</strong> never use type parameter <strong>U</strong>, both caller and arguments types are defined</p>\n\n<p>When you parameterize a method you connect a type from it's <a href=\"https://en.wikipedia.org/wiki/Type_signature\" rel=\"nofollow noreferrer\">signature</a> with generic parameter like</p>\n\n<pre><code>infix fun &lt;U&gt; U.foo (other: U) = ...\n</code></pre>\n\n<p>or at least one of them</p>\n\n<pre><code>infix fun &lt;U&gt; Int.foo (other: U) = ...\ninfix fun &lt;U&gt; U.foo (other: Int) = ...\n</code></pre>\n\n<p>Compiler will guess type of <strong>U</strong> by argument and/or caller object types</p>\n\n<p>In your case compiler can't guess <strong>U</strong> type because it's not connected neither to caller nor to argument</p>\n"}], "owner": {"reputation": 151, "user_id": 6731207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313d2cb8eb9602a0c61618e3e4c99ba8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeremy L", "link": "https://stackoverflow.com/users/6731207/jeremy-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1485161071, "creation_date": 1485121487, "question_id": 41796484, "link": "https://stackoverflow.com/questions/41796484/can-we-use-infix-generic-methods-in-kotlin", "title": "Can we use infix generic methods in Kotlin ?", "body": "<p>Compiler accept infix+generic methods, but what is the syntax to use it ?\nExample, given those 2 identical methods (modulo arbitrary generic type) :</p>\n\n<pre><code>infix inline fun Int1.plus1(i: Int1) = Int1(this.value + i.value)\ninfix inline fun &lt;U&gt; Int1.plus2(i: Int1) = Int1(this.value + i.value)\n</code></pre>\n\n<p>I can write :</p>\n\n<pre><code>Int1(3).plus1(Int1(4))\nInt1(3) plus1 Int1(4)\nInt1(3).plus2&lt;Int&gt;(Int1(4))\n</code></pre>\n\n<p>but this call is invalid :</p>\n\n<pre><code>Int1(3) plus2&lt;Int&gt; Int1(4)\n</code></pre>\n\n<p>Someone can explain me why ?</p>\n"}, {"tags": ["kotlin", "build.gradle", "gradle-kotlin-dsl", "build.gradle.kts"], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1485202839, "post_id": 41795221, "comment_id": 70817953, "body": "Not working, in the first line <code>import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar</code>, <code>ShadowJar</code> is unresolved.."}, {"owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1486670996, "post_id": 41795221, "comment_id": 71458151, "body": "Have you tried my answer since? I have it tested and working. I think the original problem was that the() required an extension class."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1486671981, "post_id": 41795221, "comment_id": 71458708, "body": "I tried it again <a href=\"http://imgur.com/qUozPd2\" rel=\"nofollow noreferrer\">right now</a>, on the <code>tasks</code> it says <code>[DELEGATE_SPECIAL_FUNCTION_MISSING] Missing &#39;getValue(Build_gradle, KProperty&lt;*&gt;)&#39; method on delegate of type &#39;TaskContainer!&#39;</code>"}, {"owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1486687247, "post_id": 41795221, "comment_id": 71465465, "body": "Hm, are you on the latest GSK for sure? Compiler and plugin too?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1486715225, "post_id": 41795221, "comment_id": 71475004, "body": "I am on the last one <a href=\"https://repo.gradle.org/gradle/dist-snapshots/\" rel=\"nofollow noreferrer\">here</a>. How can I check compiler and plugin? Could you give a try yourself <a href=\"https://github.com/java-graphics/assimp\" rel=\"nofollow noreferrer\">here</a>? I don&#39;t know, maybe I am missing some basic step somewhere.."}, {"owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1487028576, "post_id": 41795221, "comment_id": 71592083, "body": "I took a look and saw that you weren&#39;t on the newest dev version of GSK, but rather the most recent stable version. To take advantage of task delegation as outlined above, you&#39;ll need to update your gradle distributionUrl.  Once I cloned your repo and updated that, it all worked. You can find the latest releases for GSK here: <a href=\"https://github.com/gradle/gradle-script-kotlin/releases\" rel=\"nofollow noreferrer\">github.com/gradle/gradle-script-kotlin/releases</a>"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1489050191, "post_id": 41795221, "comment_id": 72504434, "body": "Just tried once again, GSK 0.8.0, <a href=\"http://imgur.com/VvfCPWq\" rel=\"nofollow noreferrer\">same result</a>"}], "tags": [], "owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "is_accepted": false, "score": 7, "last_activity_date": 1487028786, "last_edit_date": 1487028786, "creation_date": 1485113268, "answer_id": 41795221, "question_id": 41794914, "link": "https://stackoverflow.com/questions/41794914/how-to-create-the-fat-jar-with-gradle-kotlin-script/41795221#41795221", "title": "How to create the fat jar with gradle kotlin script", "body": "<p>You could use the <a href=\"https://github.com/johnrengelman/shadow\" rel=\"noreferrer\">ShadowJar plugin</a> to build a fat jar:</p>\n\n<pre><code>import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar\n\nbuildscript {\n    repositories {\n        mavenCentral()\n        gradleScriptKotlin()\n    }\n    dependencies {\n        classpath(kotlinModule(\"gradle-plugin\"))\n        classpath(\"com.github.jengelman.gradle.plugins:shadow:1.2.3\")\n    }\n}\n\napply {\n    plugin(\"kotlin\")\n    plugin(\"com.github.johnrengelman.shadow\")\n}\n\nrepositories {\n    mavenCentral()\n}\n\nval shadowJar: ShadowJar by tasks\nshadowJar.apply {\n    manifest.attributes.apply {\n        put(\"Implementation-Title\", \"Gradle Jar File Example\")\n        put(\"Implementation-Version\" version)\n        put(\"Main-Class\", \"com.mkyong.DateUtils\")\n    }\n\n    baseName = project.name + \"-all\"\n}\n</code></pre>\n\n<p>Simply run the task with 'shadowJar'.</p>\n\n<p>NOTE: This assumes you're using <a href=\"https://github.com/gradle/gradle-script-kotlin/releases/tag/v0.7.0\" rel=\"noreferrer\">GSK 0.7.0</a> (latest as of 02/13/2017).</p>\n"}, {"comments": [{"owner": {"reputation": 925, "user_id": 6243347, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bjcXEoVtdGs/AAAAAAAAAAI/AAAAAAAABGQ/u8xNvatZnVM/photo.jpg?sz=128", "display_name": "Mitchell Tracy", "link": "https://stackoverflow.com/users/6243347/mitchell-tracy"}, "edited": false, "score": 4, "creation_date": 1513028006, "post_id": 43998029, "comment_id": 82484948, "body": "He&#39;s not kidding. This should be added somewhere in <a href=\"https://github.com/gradle/kotlin-dsl/tree/master/samples\" rel=\"nofollow noreferrer\">github.com/gradle/kotlin-dsl/tree/master/samples</a>"}, {"owner": {"reputation": 4588, "user_id": 4126843, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/4r8yp.png?s=128&g=1", "display_name": "PHPirate", "link": "https://stackoverflow.com/users/4126843/phpirate"}, "edited": false, "score": 21, "creation_date": 1545242047, "post_id": 43998029, "comment_id": 94561276, "body": "Note that in Gradle 5 you will have to replace <code>configurations.runtime.map</code> with <code>configurations.runtime.get().map</code> to avoid <code>unresolved reference: isDirectory</code>. See discussion <a href=\"https://github.com/gradle/kotlin-dsl/issues/1082#issuecomment-433037363\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1555447855, "post_id": 43998029, "comment_id": 98113285, "body": "And also note that for Gradle 5.4 you will need to replace <code>with(tasks[&quot;jar&quot;] as CopySpec)</code> with <code>with(getByName(&quot;jar&quot;) as CopySpec)</code>"}, {"owner": {"reputation": 87, "user_id": 2769014, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f2c6f392c1d4b86b8f3d00e029de7310?s=128&d=identicon&r=PG&f=1", "display_name": "t-h-", "link": "https://stackoverflow.com/users/2769014/t-h"}, "reply_to_user": {"reputation": 1244, "user_id": 1296641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwXEQ.png?s=128&g=1", "display_name": "Laurence", "link": "https://stackoverflow.com/users/1296641/laurence"}, "edited": false, "score": 0, "creation_date": 1555863486, "post_id": 43998029, "comment_id": 98239709, "body": "@Laurence using Gradle 5.4 your suggested modification actually broke it for me. I got an error: <code>Cause: null cannot be cast to non-null type org.gradle.api.file.CopySpec</code>"}, {"owner": {"reputation": 496, "user_id": 1102761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QTyHf.jpg?s=128&g=1", "display_name": "jtonic", "link": "https://stackoverflow.com/users/1102761/jtonic"}, "edited": false, "score": 0, "creation_date": 1557505511, "post_id": 43998029, "comment_id": 98801082, "body": "In gradle 5.4.1 I had to replace <code>with(tasks[&quot;jar&quot;] as CopySpec)</code> with <code>val jar: CopySpec by getting(Jar::class); with(jar)</code>"}, {"owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "edited": false, "score": 1, "creation_date": 1564248151, "post_id": 43998029, "comment_id": 100971301, "body": "I also had to  <code>exclude(&quot;META-INF&#47;*.RSA&quot;, &quot;META-INF&#47;*.SF&quot;, &quot;META-INF&#47;*.DSA&quot;, &quot;META-INF&#47;INDEX.LIST&quot;)</code> for the main class to be found in the jar"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1566699110, "post_id": 43998029, "comment_id": 101736958, "body": "Have to use <code>duplicatesStrategy = DuplicatesStrategy.EXCLUDE</code> inside the <code>fatJar</code> task or exclude some files to avoid failure - <code>LICENSE.txt</code> inside each <code>jar</code> dependency was getting included, which caused some errors."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1569981057, "post_id": 43998029, "comment_id": 102767446, "body": "Make sure that you also exclude <code>**.kotlin_metadata</code> if you want others to consume the fat JAR and receive IDE support. Otherwise the IDE will be unable to resolve references inside the fat JAR: <a href=\"https://youtrack.jetbrains.com/issue/KT-25709\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-25709</a>"}, {"owner": {"reputation": 75, "user_id": 8299065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f509cb147e7d0a248c661cd7517d7b5b?s=128&d=identicon&r=PG&f=1", "display_name": "mustofa.id", "link": "https://stackoverflow.com/users/8299065/mustofa-id"}, "edited": false, "score": 0, "creation_date": 1583131375, "post_id": 43998029, "comment_id": 106999168, "body": "For who facing deprecated warning on <code>baseName</code> and <code>version</code> , use <code>archiveBaseName.set(&quot;&quot;)</code> and <code>archiveVersion</code> instead."}, {"owner": {"reputation": 6197, "user_id": 74651, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bf888894a4c60e6658c85f18f07ba87e?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/74651/chris"}, "edited": false, "score": 0, "creation_date": 1615751338, "post_id": 43998029, "comment_id": 117782506, "body": "This does not work anymore for gradle 6.8"}, {"owner": {"reputation": 1079, "user_id": 2020901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SfWp2.jpg?s=128&g=1", "display_name": "FrontierPsychiatrist", "link": "https://stackoverflow.com/users/2020901/frontierpsychiatrist"}, "reply_to_user": {"reputation": 6197, "user_id": 74651, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bf888894a4c60e6658c85f18f07ba87e?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/74651/chris"}, "edited": false, "score": 0, "creation_date": 1616398372, "post_id": 43998029, "comment_id": 117979239, "body": "@Chris Try it with <code>attributes[&quot;Implementation-Version&quot;] = archiveVersion</code> instead"}], "tags": [], "owner": {"reputation": 1079, "user_id": 2020901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SfWp2.jpg?s=128&g=1", "display_name": "FrontierPsychiatrist", "link": "https://stackoverflow.com/users/2020901/frontierpsychiatrist"}, "is_accepted": false, "score": 45, "last_activity_date": 1557735633, "last_edit_date": 1557735633, "creation_date": 1494928139, "answer_id": 43998029, "question_id": 41794914, "link": "https://stackoverflow.com/questions/41794914/how-to-create-the-fat-jar-with-gradle-kotlin-script/43998029#43998029", "title": "How to create the fat jar with gradle kotlin script", "body": "<p>Here is a version that does not use a plugin, more like the Groovy version.</p>\n\n<pre><code>import org.gradle.jvm.tasks.Jar\n\nval fatJar = task(\"fatJar\", type = Jar::class) {\n    baseName = \"${project.name}-fat\"\n    manifest {\n        attributes[\"Implementation-Title\"] = \"Gradle Jar File Example\"\n        attributes[\"Implementation-Version\"] = version\n        attributes[\"Main-Class\"] = \"com.mkyong.DateUtils\"\n    }\n    from(configurations.runtime.map({ if (it.isDirectory) it else zipTree(it) }))\n    with(tasks[\"jar\"] as CopySpec)\n}\n\ntasks {\n    \"build\" {\n        dependsOn(fatJar)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://techdev.io/de/developer-blog/building-a-fat-jar-with-gradle-script-kotlin\" rel=\"noreferrer\">Also explained here</a></p>\n\n<hr>\n\n<p>Some commenters pointed out that this does not work anymore with newer Gradle versions.\nUpdate tested with Gradle 5.4.1:</p>\n\n<pre><code>import org.gradle.jvm.tasks.Jar\n\nval fatJar = task(\"fatJar\", type = Jar::class) {\n    baseName = \"${project.name}-fat\"\n    manifest {\n        attributes[\"Implementation-Title\"] = \"Gradle Jar File Example\"\n        attributes[\"Implementation-Version\"] = version\n        attributes[\"Main-Class\"] = \"com.mkyong.DateUtils\"\n    }\n    from(configurations.runtimeClasspath.get().map({ if (it.isDirectory) it else zipTree(it) }))\n    with(tasks.jar.get() as CopySpec)\n}\n\ntasks {\n    \"build\" {\n        dependsOn(fatJar)\n    }\n}\n</code></pre>\n\n<p>Note the difference in <code>configurations.runtimeClasspath.get()</code> and <code>with(tasks.jar.get() as CopySpec)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1128, "user_id": 2550940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/188596724cddd5444ae629042981be73?s=128&d=identicon&r=PG", "display_name": "gunslingor", "link": "https://stackoverflow.com/users/2550940/gunslingor"}, "is_accepted": false, "score": 6, "last_activity_date": 1593805630, "last_edit_date": 1593805630, "creation_date": 1593805061, "answer_id": 62721759, "question_id": 41794914, "link": "https://stackoverflow.com/questions/41794914/how-to-create-the-fat-jar-with-gradle-kotlin-script/62721759#62721759", "title": "How to create the fat jar with gradle kotlin script", "body": "<p>Here is how to do it as of Gradle 6.5.1, Kotlin/Kotlin-Multiplatform 1.3.72, utilizing a build.gradle.kts file and without using an extra plugin which does seem unnecessary and problematic with multiplatform;</p>\n<p>Note: in reality, few plugins work well with the multiplatform plugin from what I can tell, which is why I suspect its design philosophy is so verbose itself. It's actually fairly elegant IMHO, but not flexible or documented enough so it takes a ton of trial and error to setup even WITHOUT additional plugins.</p>\n<p>Hope this helps others.</p>\n<pre><code>kotlin {\n    jvm {\n        compilations {\n            val main = getByName(&quot;main&quot;)\n            tasks {\n                register&lt;Jar&gt;(&quot;fatJar&quot;) {\n                    group = &quot;application&quot;\n                    manifest {\n                        attributes[&quot;Implementation-Title&quot;] = &quot;Gradle Jar File Example&quot;\n                        attributes[&quot;Implementation-Version&quot;] = archiveVersion\n                        attributes[&quot;Main-Class&quot;] = &quot;[[mainClassPath]]&quot;\n                    }\n                    archiveBaseName.set(&quot;${project.name}-fat&quot;)\n                    from(main.output.classesDirs, main.compileDependencyFiles)\n                    with(jar.get() as CopySpec)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20955, "favorite_count": 12, "answer_count": 3, "score": 47, "last_activity_date": 1616400197, "creation_date": 1485111369, "last_edit_date": 1504920760, "question_id": 41794914, "link": "https://stackoverflow.com/questions/41794914/how-to-create-the-fat-jar-with-gradle-kotlin-script", "title": "How to create the fat jar with gradle kotlin script", "body": "<p>As titled, I'd like to know how to modify the <code>gradle.build.kts</code> in order to have a task to create a unique <code>jar</code> with all the dependencies (kotlin lib included) inside.</p>\n\n<p>I found this sample in Groovy:</p>\n\n<pre><code>//create a single Jar with all dependencies\ntask fatJar(type: Jar) {\n    manifest {\n        attributes 'Implementation-Title': 'Gradle Jar File Example',\n            'Implementation-Version': version,\n            'Main-Class': 'com.mkyong.DateUtils'\n    }\n    baseName = project.name + '-all'\n    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\n    with jar\n}\n</code></pre>\n\n<p>But I have no idea how I could write that in kotlin, other than:</p>\n\n<pre><code>task(\"fatJar\") {\n\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "is_accepted": true, "score": 2, "last_activity_date": 1485088616, "creation_date": 1485088616, "answer_id": 41790958, "question_id": 41790690, "link": "https://stackoverflow.com/questions/41790690/kotlin-jpa-how-to-deal-with-onetoone-initialization/41790958#41790958", "title": "Kotlin JPA: How to deal with @OneToOne initialization", "body": "<p>This works:</p>\n\n<pre><code>class User {\n    var profile = Profile(this)\n}\n\n\nclass Profile(var user: User?) {\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3822, "user_id": 4725496, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/BYQOo.jpg?s=128&g=1", "display_name": "Feeco", "link": "https://stackoverflow.com/users/4725496/feeco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 41790958, "answer_count": 1, "score": 0, "last_activity_date": 1485088616, "creation_date": 1485086827, "question_id": 41790690, "link": "https://stackoverflow.com/questions/41790690/kotlin-jpa-how-to-deal-with-onetoone-initialization", "title": "Kotlin JPA: How to deal with @OneToOne initialization", "body": "<p>In Java I was doing this:</p>\n\n<pre><code>public class User {\n\n    //one-to-one\n    private Profile profile = new Profile(this);        \n\n}\n\npublic class Profile {\n\n    private User user;\n\n    public Profile(User user) {\n        user.setProfile(this);\n        this.user = user;\n    }\n\n}\n</code></pre>\n\n<p>So I just was creating a user and profile was creating <em>automatically</em>. Now\nI cannot understand how to do it with Kotlin's primary constructor:</p>\n\n<pre><code>class User(\n\n    var profile: Profile = Profile(this) //error, since `this` is not in that context\n\n)\n\nclass Profile (\n\n    var user: User?\n\n) {\n\n    constructor(user: User): this(user)\n\n}\n</code></pre>\n\n<p>How would you deal with this?</p>\n"}, {"tags": ["android", "android-softkeyboard", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3132, "user_id": 5364583, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/67aed09085b954ecc27caed47ae20969?s=128&d=identicon&r=PG", "display_name": "J&#233;w&#244;m&#39;", "link": "https://stackoverflow.com/users/5364583/j%c3%a9w%c3%b4m"}, "edited": false, "score": 0, "creation_date": 1521359252, "post_id": 41791472, "comment_id": 85691029, "body": "which Anko lib we have to use ? because it&#39;s not working with me"}, {"owner": {"reputation": 3132, "user_id": 5364583, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/67aed09085b954ecc27caed47ae20969?s=128&d=identicon&r=PG", "display_name": "J&#233;w&#244;m&#39;", "link": "https://stackoverflow.com/users/5364583/j%c3%a9w%c3%b4m"}, "edited": false, "score": 0, "creation_date": 1521359340, "post_id": 41791472, "comment_id": 85691043, "body": "inputMethodManager is not founded"}], "tags": [], "owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "is_accepted": false, "score": 4, "last_activity_date": 1485091692, "creation_date": 1485091692, "answer_id": 41791472, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/41791472#41791472", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>You can use Anko to make life easier, so the line would be:</p>\n\n<pre><code>inputMethodManager.hideSoftInputFromWindow(view.windowToken, 0)\n</code></pre>\n\n<p>or maybe better to create extension function:</p>\n\n<pre><code>fun View.hideKeyboard(inputMethodManager: InputMethodManager) {\n    inputMethodManager.hideSoftInputFromWindow(windowToken, 0)\n}\n</code></pre>\n\n<p>and call it like this:</p>\n\n<pre><code>view?.hideKeyboard(activity.inputMethodManager)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 9140698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Sv6s.jpg?s=128&g=1", "display_name": "chandani c patel", "link": "https://stackoverflow.com/users/9140698/chandani-c-patel"}, "edited": false, "score": 0, "creation_date": 1515048267, "post_id": 44500926, "comment_id": 83154369, "body": "i want to add this method in one utility class , then how to call this method from activity/fragment/adapter ??"}, {"owner": {"reputation": 888, "user_id": 3880171, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/62c55637600a1d9f32874c8a177563fc?s=128&d=identicon&r=PG&f=1", "display_name": "AndroLife", "link": "https://stackoverflow.com/users/3880171/androlife"}, "edited": false, "score": 1, "creation_date": 1542028246, "post_id": 44500926, "comment_id": 93409984, "body": "well use for example <code>editText.hideKeybord()</code> editText can be replaced with any view."}, {"owner": {"reputation": 2246, "user_id": 1195473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjmQQ.png?s=128&g=1", "display_name": "svguerin3", "link": "https://stackoverflow.com/users/1195473/svguerin3"}, "edited": false, "score": 0, "creation_date": 1557945331, "post_id": 44500926, "comment_id": 98940490, "body": "Is there a way to put this in a separate class so that it&#39;s accessible throughout the app?"}], "tags": [], "owner": {"reputation": 955, "user_id": 1723235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9034912bbe2910c424355661686fb417?s=128&d=identicon&r=PG", "display_name": "P&#233;ter Sz\u0171cs", "link": "https://stackoverflow.com/users/1723235/p%c3%a9ter-sz%c5%b1cs"}, "is_accepted": false, "score": 76, "last_activity_date": 1594951463, "last_edit_date": 1594951463, "creation_date": 1497274901, "answer_id": 44500926, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/44500926#44500926", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>I think we can improve <a href=\"https://stackoverflow.com/a/41791472/7487335\">Viktor's answer</a> a little. Based on it always being attached to a <code>View</code>, there will be context, and if there is context then there is <code>InputMethodManager</code>:</p>\n<pre><code>fun View.hideKeyboard() {\n    val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n    imm.hideSoftInputFromWindow(windowToken, 0)\n}\n</code></pre>\n<p>In this case the context automatically means the context of the view.\nWhat do you think?</p>\n"}, {"tags": [], "owner": {"reputation": 1941, "user_id": 1725209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1Gpf.jpg?s=128&g=1", "display_name": "michal.z", "link": "https://stackoverflow.com/users/1725209/michal-z"}, "is_accepted": false, "score": 6, "last_activity_date": 1497288779, "creation_date": 1497288779, "answer_id": 44505456, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/44505456#44505456", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Peter's solution solves neatly the problem by extending functionality of View class. Alternative approach could be to extend functionality of Activity class and thus bind operation of hiding keyboard with View's container rather than View itself.</p>\n\n<pre><code>fun Activity.hideKeyboard() {\n    val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n    imm.hideSoftInputFromWindow(findViewById(android.R.id.content).getWindowToken(), 0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 1, "creation_date": 1532467124, "post_id": 45857155, "comment_id": 89984385, "body": "Where would you recommend these three functions live in the application?"}, {"owner": {"reputation": 5323, "user_id": 807110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4311934b00d7a37980696839577f07?s=128&d=identicon&r=PG", "display_name": "Gunhan", "link": "https://stackoverflow.com/users/807110/gunhan"}, "reply_to_user": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 3, "creation_date": 1532515551, "post_id": 45857155, "comment_id": 90002349, "body": "@Dan I keep these functions in ContextExtensions.kt file of mine but you can keep them anywhere you find suitable."}, {"owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 0, "creation_date": 1532614236, "post_id": 45857155, "comment_id": 90049438, "body": "This worked perfectly for me. Funny thing is I only needed this code when the app was running on a physical device. On the simulator (AVD) the keyboard dismissed itself like a good keyboard does."}, {"owner": {"reputation": 2246, "user_id": 1195473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjmQQ.png?s=128&g=1", "display_name": "svguerin3", "link": "https://stackoverflow.com/users/1195473/svguerin3"}, "edited": false, "score": 0, "creation_date": 1557945501, "post_id": 45857155, "comment_id": 98940576, "body": "For some reason when I put these in a ContextExtensions.kt file, I can&#39;t seem to access them from my Fragments, etc..  Is there something special I need to setup in the ContextExtensions class in order to make these accessible across the app?"}, {"owner": {"reputation": 5323, "user_id": 807110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4311934b00d7a37980696839577f07?s=128&d=identicon&r=PG", "display_name": "Gunhan", "link": "https://stackoverflow.com/users/807110/gunhan"}, "reply_to_user": {"reputation": 2246, "user_id": 1195473, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PjmQQ.png?s=128&g=1", "display_name": "svguerin3", "link": "https://stackoverflow.com/users/1195473/svguerin3"}, "edited": false, "score": 0, "creation_date": 1558004200, "post_id": 45857155, "comment_id": 98960476, "body": "@svguerin3 It should work directly. Only thing that I can think of is that if you&#39;re using multi module android project I&#39;m not so sure if you can access Kotlin Extensions which is defined in another module. But also try to clean/rebuild."}, {"owner": {"reputation": 352, "user_id": 7721510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OSWcB.jpg?s=128&g=1", "display_name": "CeH9", "link": "https://stackoverflow.com/users/7721510/ceh9"}, "edited": false, "score": 0, "creation_date": 1572200801, "post_id": 45857155, "comment_id": 103478596, "body": "For Activity: hideKeyboard(currentFocus ?: View(this))"}, {"owner": {"reputation": 5323, "user_id": 807110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4311934b00d7a37980696839577f07?s=128&d=identicon&r=PG", "display_name": "Gunhan", "link": "https://stackoverflow.com/users/807110/gunhan"}, "reply_to_user": {"reputation": 352, "user_id": 7721510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OSWcB.jpg?s=128&g=1", "display_name": "CeH9", "link": "https://stackoverflow.com/users/7721510/ceh9"}, "edited": false, "score": 0, "creation_date": 1572262564, "post_id": 45857155, "comment_id": 103493416, "body": "@CeH9 Yeah, shorter is better"}, {"owner": {"reputation": 187, "user_id": 6471998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eq5kh.jpg?s=128&g=1", "display_name": "Ricky Padilla", "link": "https://stackoverflow.com/users/6471998/ricky-padilla"}, "edited": false, "score": 1, "creation_date": 1600712766, "post_id": 45857155, "comment_id": 113168353, "body": "OMG thanks SO much for this. Coming from iOS, it seems ridiculous to me that this is even a problem but your solution is the cleanest I&#39;ve seen. Thank you!"}, {"owner": {"reputation": 631, "user_id": 4776577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/677911868980798/picture?type=large", "display_name": "Karan Khurana", "link": "https://stackoverflow.com/users/4776577/karan-khurana"}, "edited": false, "score": 0, "creation_date": 1600893105, "post_id": 45857155, "comment_id": 113236296, "body": "not able to use these in functions, any help regarding their calling ?"}, {"owner": {"reputation": 5323, "user_id": 807110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4311934b00d7a37980696839577f07?s=128&d=identicon&r=PG", "display_name": "Gunhan", "link": "https://stackoverflow.com/users/807110/gunhan"}, "edited": false, "score": 0, "creation_date": 1600933562, "post_id": 45857155, "comment_id": 113246789, "body": "They need to be called using an activity, fragment, or context reference if you&#39;re not directly calling them inside fragment or activity."}], "tags": [], "owner": {"reputation": 5323, "user_id": 807110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4311934b00d7a37980696839577f07?s=128&d=identicon&r=PG", "display_name": "Gunhan", "link": "https://stackoverflow.com/users/807110/gunhan"}, "is_accepted": false, "score": 140, "last_activity_date": 1585660553, "last_edit_date": 1585660553, "creation_date": 1503564854, "answer_id": 45857155, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/45857155#45857155", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Use the following utility functions within your Activities, Fragments to hide the soft keyboard.</p>\n\n<p><strong>(*)Update for the latest Kotlin version</strong></p>\n\n<pre><code>fun Fragment.hideKeyboard() {\n    view?.let { activity?.hideKeyboard(it) }\n}\n\nfun Activity.hideKeyboard() {\n    hideKeyboard(currentFocus ?: View(this))\n}\n\nfun Context.hideKeyboard(view: View) {\n    val inputMethodManager = getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager\n    inputMethodManager.hideSoftInputFromWindow(view.windowToken, 0)\n}\n</code></pre>\n\n<p>This will close the keyboard regardless of your code either in dialog fragment and/or activity etc.</p>\n\n<p><strong>Usage in Activity/Fragment:</strong></p>\n\n<pre><code>hideKeyboard()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1861, "user_id": 1452884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f50929325e39c05e7071941d185f16f2?s=128&d=identicon&r=PG", "display_name": "Kavin Varnan", "link": "https://stackoverflow.com/users/1452884/kavin-varnan"}, "is_accepted": false, "score": 1, "last_activity_date": 1509780928, "last_edit_date": 1509780928, "creation_date": 1509778851, "answer_id": 47108336, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/47108336#47108336", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>This works well with API 26. </p>\n\n<pre><code>val view: View = if (currentFocus == null) View(this) else currentFocus\nval inputMethodManager = getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager\ninputMethodManager.hideSoftInputFromWindow(view.windowToken, 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3712, "user_id": 1594309, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2eMZW.jpg?s=128&g=1", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1594309/scooter"}, "is_accepted": false, "score": 2, "last_activity_date": 1522615311, "creation_date": 1522615311, "answer_id": 49602429, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/49602429#49602429", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>I found the answer that worked for me here:  <a href=\"http://programminget.blogspot.com/2017/08/how-to-close-android-soft-keyboard.html\" rel=\"nofollow noreferrer\">http://programminget.blogspot.com/2017/08/how-to-close-android-soft-keyboard.html</a>  </p>\n\n<pre><code>val inputManager:InputMethodManager = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\ninputManager.hideSoftInputFromWindow(currentFocus.windowToken, InputMethodManager.SHOW_FORCED)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1146, "user_id": 10211127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b76fcb38d289a2261fc1cd8430ef7d9?s=128&d=identicon&r=PG&f=1", "display_name": "jo jo", "link": "https://stackoverflow.com/users/10211127/jo-jo"}, "is_accepted": false, "score": 0, "last_activity_date": 1536572821, "creation_date": 1536572821, "answer_id": 52255077, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/52255077#52255077", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>You can use from bellow code, I write bellow code in my fragment:</p>\n\n<pre><code>private val myLayout = ViewTreeObserver.OnGlobalLayoutListener {\n    yourTextView.isCursorVisible = KeyboardTool.isSoftKeyboardShown(myRelativeLayout.rootView)\n}\n</code></pre>\n\n<p>Then in <code>onViewCreated</code> of <code>fragment</code>:</p>\n\n<pre><code>......\nsuper.onViewCreated(view, savedInstanceState)\nmyRelativeLayout.viewTreeObserver.addOnGlobalLayoutListener(myLayout)\n......\n</code></pre>\n\n<p>And in <code>onDestroyView</code> use too:</p>\n\n<pre><code>override fun onDestroyView() {\n    super.onDestroyView()\n myRelativeLayout.viewTreeObserver.removeOnGlobalLayoutListener(myLayout)\n}\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>object KeyboardTool {\n    fun isSoftKeyboardShown(rootView: View): Boolean {\n        val softKeyboardHeight = 100\n        val rect = Rect()\n\n        rootView.getWindowVisibleDisplayFrame(rect)\n\n        val dm = rootView.resources.displayMetrics\n        val heightDiff = rootView.bottom - rect.bottom\n        return heightDiff &gt; softKeyboardHeight * dm.density\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 11157537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c200845fe5d1056f84a47c1a4e56b9?s=128&d=identicon&r=PG&f=1", "display_name": "Paulami Biswas", "link": "https://stackoverflow.com/users/11157537/paulami-biswas"}, "is_accepted": false, "score": 4, "last_activity_date": 1551849759, "last_edit_date": 1551849759, "creation_date": 1551847660, "answer_id": 55015759, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/55015759#55015759", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Make an object class named Utils:</p>\n\n<pre><code>object Utils {\n\n    fun hideSoftKeyBoard(context: Context, view: View) {\n        try {\n            val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n            imm?.hideSoftInputFromWindow(view.windowToken, InputMethodManager.HIDE_NOT_ALWAYS)\n        } catch (e: Exception) {\n            // TODO: handle exception\n            e.printStackTrace()\n        }\n\n    }\n}\n</code></pre>\n\n<p>You can use this method in any class where you want to hide the soft input keyboard. I am using this in my <code>BaseActivity</code>.</p>\n\n<p>Here the view is any view that you use in your layout:</p>\n\n<pre><code>Utils.hideSoftKeyBoard(this@BaseActivity, view )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 6761436, "user_type": "registered", "profile_image": "https://graph.facebook.com/1035886293191010/picture?type=large", "display_name": "Zeeshan Ayaz", "link": "https://stackoverflow.com/users/6761436/zeeshan-ayaz"}, "is_accepted": false, "score": 18, "last_activity_date": 1579155316, "last_edit_date": 1579155316, "creation_date": 1556294458, "answer_id": 55871217, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/55871217#55871217", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Simply override this method in your activity. It will automatically works in its child fragments as well.....</p>\n\n<p><strong>In JAVA</strong></p>\n\n<pre><code>@Override\npublic boolean dispatchTouchEvent(MotionEvent ev) {\n    if (getCurrentFocus() != null) {\n        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\n        imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);\n    }\n    return super.dispatchTouchEvent(ev);\n}\n</code></pre>\n\n<p><strong>In Kotlin</strong></p>\n\n<pre><code>override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {\n        if (currentFocus != null) {\n            val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n            imm.hideSoftInputFromWindow(currentFocus!!.windowToken, 0)\n        }\n        return super.dispatchTouchEvent(ev)\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1331, "user_id": 7639019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3gzc1.jpg?s=128&g=1", "display_name": "Seddiq Sorush", "link": "https://stackoverflow.com/users/7639019/seddiq-sorush"}, "is_accepted": false, "score": 5, "last_activity_date": 1564465682, "creation_date": 1564465682, "answer_id": 57265044, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/57265044#57265044", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>In your Activity or Fragment create a function as:</p>\n\n<pre><code>fun View.hideKeyboard() {\n val inputManager = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n      inputManager.hideSoftInputFromWindow(windowToken, 0)\n}\n</code></pre>\n\n<p>suppose you have a button with an id <code>your_button_id</code> in XML file related to this Activity or Fragment, so, on button click event:</p>\n\n<pre><code>    your_button_id.setOnClickListener{\n       it.hideKeyboard()\n     }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4434509, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003712706498/picture?type=large", "display_name": "Georgy  Ivanov", "link": "https://stackoverflow.com/users/4434509/georgy-ivanov"}, "is_accepted": false, "score": 3, "last_activity_date": 1579155387, "last_edit_date": 1579155387, "creation_date": 1565594264, "answer_id": 57457020, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/57457020#57457020", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Here is my solution in Kotlin for Fragment. Place it inside <code>setOnClickListener</code> of the button.</p>\n\n<pre><code>val imm = context?.getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager?\nimm?.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 931, "user_id": 5153846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c22f755fe80cea8160159bd63bdd990?s=128&d=identicon&r=PG&f=1", "display_name": "Akbolat SSS", "link": "https://stackoverflow.com/users/5153846/akbolat-sss"}, "is_accepted": false, "score": 1, "last_activity_date": 1578550160, "creation_date": 1578550160, "answer_id": 59658115, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/59658115#59658115", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Thanks to @Zeeshan Ayaz\nHere is a little improved version</p>\n\n<p>Because 'currentFocus' is nullable we better check it using Kotlin's ?.let</p>\n\n<pre><code>override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {\n    currentFocus?.let { currFocus -&gt;\n        val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n        imm.hideSoftInputFromWindow(currFocus.windowToken, 0)\n    }\n    return super.dispatchTouchEvent(ev)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13875995, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gibw6d_26XwATlt4o1FWVZQkGndWzxQX9O09zGTnA=k-s128", "display_name": "Chienmin Lee", "link": "https://stackoverflow.com/users/13875995/chienmin-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1594024602, "creation_date": 1594024602, "answer_id": 62752208, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/62752208#62752208", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Kotlin\nI use bellow code:</p>\n<p>import splitties.systemservices.inputMethodManager</p>\n<p>inputMethodManager.hideSoftInputFromWindow(view?.windowToken, 0)</p>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 10148810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RgO3y.jpg?s=128&g=1", "display_name": "MRazaImtiaz", "link": "https://stackoverflow.com/users/10148810/mrazaimtiaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1607329510, "creation_date": 1607329510, "answer_id": 65178221, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin/65178221#65178221", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>Although there are many answers but this answer is related to a best practice in <strong>KOTLIN</strong> by opening and closing the keyboard with life cycle and extension function.</p>\n<p><strong>1). Create Extension Functions</strong> create a file <em>EditTextExtension.kt</em> and paste the below code</p>\n<pre><code>fun EditText.showKeyboard(\n ) {\n  requestFocus()\n  val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as \n  InputMethodManager\n  imm.showSoftInput(this, InputMethodManager.SHOW_IMPLICIT)\n }\n\nfun EditText.hideKeyboard(\n) {\n val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as \n InputMethodManager\n imm.hideSoftInputFromWindow(this.windowToken, 0)\n }\n</code></pre>\n<p><strong>2). Create LifeCycleObserver Class</strong> Create a class <em>EditTextKeyboardLifecycleObserver.kt</em> and paste the code below</p>\n<pre><code>class EditTextKeyboardLifecycleObserver(\n private val editText: WeakReference&lt;EditText&gt;\n ) :\n LifecycleObserver {\n\n @OnLifecycleEvent(\n     Lifecycle.Event.ON_RESUME\n )\n fun openKeyboard() {\n     editText.get()?.postDelayed({ editText.get()?.showKeyboard() }, 50)\n }\n fun hideKeyboard() {\n     editText.get()?.postDelayed({ editText.get()?.hideKeyboard() }, 50)\n }\n}\n</code></pre>\n<p><strong>3).</strong> Then use the below code in <strong>onViewCreated / onCreateView</strong></p>\n<pre><code>lifecycle.addObserver(\n         EditTextKeyboardLifecycleObserver(\n             WeakReference(mEditText) //mEditText is the object(EditText)\n         )\n     )\n</code></pre>\n<p>The Keyboard will open when the user opens the fragment or activity.</p>\n<p>if you occur any problems, following the solution feel free to ask in the comment.</p>\n"}], "owner": {"reputation": 811, "user_id": 6265477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caeacb670fd8879694a48b2b15fceddf?s=128&d=identicon&r=PG", "display_name": "Eugene Trifonov", "link": "https://stackoverflow.com/users/6265477/eugene-trifonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61561, "favorite_count": 19, "answer_count": 14, "score": 71, "last_activity_date": 1607329510, "creation_date": 1485084775, "last_edit_date": 1495542818, "question_id": 41790357, "link": "https://stackoverflow.com/questions/41790357/close-hide-the-android-soft-keyboard-with-kotlin", "title": "Close/hide the Android Soft Keyboard with Kotlin", "body": "<p>I'm trying to write a simple Android app in Kotlin. I have an EditText and a Button in my layout. After writing in the edit field and clicking on the Button, I want to hide the virtual keyboard. </p>\n\n<p>There is a <strong>popular question</strong> <a href=\"https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard\">Close/hide the Android Soft Keyboard</a> about doing it in Java, but as far as I understand, there should be an alternative version for Kotlin. How should I do it?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 6, "last_activity_date": 1485082359, "last_edit_date": 1485082359, "creation_date": 1485078647, "answer_id": 41789483, "question_id": 41789232, "link": "https://stackoverflow.com/questions/41789232/in-tornadofx-how-can-i-separate-layouts-to-different-classes-and-then-use-them/41789483#41789483", "title": "In TornadoFX, how can I separate layouts to different classes and then use them in builder?", "body": "<p>On a general basis you add the root node from another <code>View</code> with the <code>add</code> command:</p>\n\n<pre><code>add(SomeView::class)\n</code></pre>\n\n<p>You can also inject a <code>View</code> and add it:</p>\n\n<pre><code>val someView: SomeView by inject()\n\noverride val root: borderpane {\n    center {\n        add(someView)\n    }\n}\n</code></pre>\n\n<p><code>add</code> is the same as doing <code>this += someView</code>. What happens here is that the framework find the <code>root</code> node of the View and appends it to the <code>children</code> property of the parent Node. It also knows about special containers like the <code>BorderPane</code>, so it does the right thing when you add something inside the <code>center</code> builder etc.</p>\n\n<p>The <code>TabPane</code> however, takes <code>Tab</code> instances, which are not nodes. You need to add the tab using the <code>tab</code> builder and assign some content to it. The builders are smart enought to understand that if you do <code>add</code> inside a Tab, it should assign to the <code>content</code> property of the Tab. Therefore you can write:</p>\n\n<pre><code>tab(\"My First Tab\") {\n    add(MyFirstTab::class)\n}\n</code></pre>\n\n<p>Or if you already have an instance of the content you'd like to assign:</p>\n\n<pre><code>tab(\"My First Tab\") {\n    add(myFirstTab)\n}\n</code></pre>\n\n<p>The <code>MyFirstTab</code> class must be a <code>View</code> or <code>Fragment</code>.</p>\n"}], "owner": {"reputation": 1363, "user_id": 1640235, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Zmgq9.jpg?s=128&g=1", "display_name": "Aleksandar Stefanovi\u0107", "link": "https://stackoverflow.com/users/1640235/aleksandar-stefanovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 41789483, "answer_count": 1, "score": 2, "last_activity_date": 1485082359, "creation_date": 1485076789, "question_id": 41789232, "link": "https://stackoverflow.com/questions/41789232/in-tornadofx-how-can-i-separate-layouts-to-different-classes-and-then-use-them", "title": "In TornadoFX, how can I separate layouts to different classes and then use them in builder?", "body": "<p>For example, I want to have a TabPane, but I want to have tabs each in its separate class. Is there a way to make this work with the builder? I want to do something like this:</p>\n\n<pre><code>tabpane {\n    MyFirstTab()\n    MySecondTab()\n    etc.\n}\n</code></pre>\n"}, {"tags": ["intellij-idea", "gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "is_accepted": true, "score": 1, "last_activity_date": 1485063109, "creation_date": 1485063109, "answer_id": 41787695, "question_id": 41787686, "link": "https://stackoverflow.com/questions/41787686/intellij-autocompletion-for-included-gradle-script-kotlin-files/41787695#41787695", "title": "IntelliJ autocompletion for included gradle script kotlin files", "body": "<p>It turns out that I wasn't using the correct filenames. The current version of the kotlin intellij plugin at time of writing seems to complete correctly any file that ends with <code>.gradle.kts</code>. My included files just had a <code>.kts</code> extension without the <code>.gradle.</code></p>\n"}], "owner": {"reputation": 3962, "user_id": 2789327, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/819a89b05f92171a5bb1e3e20f0832ae?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/2789327/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 41787695, "answer_count": 1, "score": 0, "last_activity_date": 1485063109, "creation_date": 1485063010, "question_id": 41787686, "link": "https://stackoverflow.com/questions/41787686/intellij-autocompletion-for-included-gradle-script-kotlin-files", "title": "IntelliJ autocompletion for included gradle script kotlin files", "body": "<p>I'm trying to use <a href=\"https://github.com/gradle/gradle-script-kotlin/\" rel=\"nofollow noreferrer\"><code>gradle-script-kotlin</code></a> to automate a complicated build process, using IntelliJ as an editor. Following the advice found in <a href=\"https://stackoverflow.com/questions/38966625/configure-intellij-auto-completion-for-gradle-script-in-kotlin\">a previous question</a>, a colleague has gotten proper syntax highlighting in the <code>build.gradle.kts</code> file, however, because of its complexity, I'm trying to split it up into a number of smaller files using the <a href=\"https://github.com/gradle/gradle-script-kotlin/blob/947cc32c288633223909269b0c111667599cfb66/samples/modularity/build.gradle.kts\" rel=\"nofollow noreferrer\">apply from</a> example:</p>\n\n<pre><code>apply { \n    for (script in otherKotlinScripts)\n        from(\"buildscripts/$script.kts\") \n} \n</code></pre>\n\n<p>Alas, the completion only seems to actually work on <code>build.gradle.kts</code>. On other kotlin-script files, free functions and anything that I <code>import</code> work just fine, but gradle-specific things such as this <code>task</code> closure:</p>\n\n<pre><code>task(\"foo\") {\n    // intelliJ can't seem to figure out what the receiver is here,\n    // task itself gets highlighted in red, and its members fail\n    // to complete.\n}\n</code></pre>\n\n<p>Is there a way to allow intellij to detect included files as gradle scripts?</p>\n"}, {"tags": ["android", "list", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": true, "score": 7, "last_activity_date": 1485025961, "creation_date": 1485025961, "answer_id": 41783373, "question_id": 41782779, "link": "https://stackoverflow.com/questions/41782779/how-do-we-remove-elements-from-a-mutablelist-in-kotlin/41783373#41783373", "title": "How do we remove elements from a MutableList in Kotlin", "body": "<p>Since you are iterating through the whole list, simplest way would be to call <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/clear.html\" rel=\"noreferrer\">clear method</a> of <code>MutableList</code> after you process all items.</p>\n\n<pre><code>mutableList.clear()\n</code></pre>\n\n<p>Other option could be method <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/remove.html\" rel=\"noreferrer\">remove</a> to remove given element or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/remove-at.html\" rel=\"noreferrer\">removeAt</a> to remove element at given index. Both are again methods of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/index.html\" rel=\"noreferrer\">MutableList</a> class. In practice it would look like this.</p>\n\n<pre><code>val list = listOf(\"a\", \"b\", \"c\")\nval mutableList = list.toMutableList()\nfor (i in list.indices) {\n    println(i)\n    println(list[i])\n    mutableList.removeAt(0)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 1814802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v1hYO.jpg?s=128&g=1", "display_name": "mbStavola", "link": "https://stackoverflow.com/users/1814802/mbstavola"}, "is_accepted": false, "score": 1, "last_activity_date": 1485127272, "creation_date": 1485127272, "answer_id": 41797286, "question_id": 41782779, "link": "https://stackoverflow.com/questions/41782779/how-do-we-remove-elements-from-a-mutablelist-in-kotlin/41797286#41797286", "title": "How do we remove elements from a MutableList in Kotlin", "body": "<p>Is there a reason you can't just map and filter the initial immutable collection? You are already making a copy when you call \"List#toMutableList()\", so I don't quite see what you're trying to accomplish by avoiding it.</p>\n\n<pre><code>val unprocessedItems = myImmutableList.asSequence().mapIndexed { index, item -&gt;\n    // If this item's position is a multiple of four, we can process it\n    // The let extension method allows us to run a block and return a value\n    // We can use this and null-safe access + the elvis operator to map our values\n    row?.getChildAt(index % 4)?.let {\n        val label = it.findViewById(android.R.id.text1) as TextView\n\n        label.text = item.name\n        val icon = it.findViewById(android.R.id.icon) as ImageView\n\n        picasso.load(item.icon).into(icon)\n\n        // Since it's processed, let's remove it from the list\n        null\n    } ?: item // If we weren't able to process it, leave it in the list\n}.filterNotNull().toList()\n</code></pre>\n\n<p>Again, not quite sure what you're going for with this. I think there might be a better approach given more detail.</p>\n"}], "owner": {"reputation": 1558, "user_id": 490923, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/398418b98d3b90b26ed4ba1a428f5420?s=128&d=identicon&r=PG", "display_name": "MR Mido", "link": "https://stackoverflow.com/users/490923/mr-mido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14992, "favorite_count": 0, "accepted_answer_id": 41783373, "answer_count": 2, "score": 5, "last_activity_date": 1485127272, "creation_date": 1485022501, "question_id": 41782779, "link": "https://stackoverflow.com/questions/41782779/how-do-we-remove-elements-from-a-mutablelist-in-kotlin", "title": "How do we remove elements from a MutableList in Kotlin", "body": "<p>I have the following code where I need to display the elements of a list in view and then remove those items from the list. I have been looking into filter vs map in kotlin but no luck finding a solution.</p>\n\n<pre><code>var mutableList: MutableList&lt;Object&gt; = myImmutableList.toMutableList()\nfor (x in mutableList.indices)\n{\n    val tile = row!!.getChildAt(x % 4)\n    val label = tile.findViewById(android.R.id.text1) as TextView\n    label.text = mutableList[x].name\n    val icon = tile.findViewById(android.R.id.icon) as ImageView\n    picasso.load(mutableList[x].icon).into(icon)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1485037130, "last_edit_date": 1485037130, "creation_date": 1485036711, "answer_id": 41785106, "question_id": 41778180, "link": "https://stackoverflow.com/questions/41778180/define-retrofit-return-type-using-interface-instead-of-class/41785106#41785106", "title": "Define Retrofit return type using interface instead of class", "body": "<p>Yes, that is definitely possible, but requires you to add a custom deserializer for the interface. This is done through registering a custom type deserializer for the deserializing tool you use. </p>\n\n<p>With Jackson (which I would recommend to use for working with Kotlin classes, after all), this is done through adding a <code>Module</code> to the <code>ObjectMapper</code>. Here are the steps I made to do this with <a href=\"https://github.com/FasterXML/jackson-module-kotlin\" rel=\"nofollow noreferrer\"><code>jackson-module-kotlin</code></a>:</p>\n\n<ol>\n<li><p>Create a custom <code>Module</code> with a <code>JsonDeserializer</code> added for your interface:</p>\n\n<pre><code>fun trendingMovieModule(): Module = SimpleModule().apply {\n    val deserializer: JsonDeserializer&lt;TrendingMovie&gt; = object : JsonDeserializer&lt;TrendingMovie&gt;() {\n        override fun deserialize(p: JsonParser, ctxt: DeserializationContext): TrendingMovie {\n            val node = p.codec.readTree&lt;JsonNode&gt;(p)\n\n            return object : TrendingMovie { // Your anonymous class here, for example:\n                val name = node[\"movie\"][\"title\"]\n                val watchers = node[\"watchers\"].intValue()\n\n                override fun toString(): String = \"$name, watchers: $watchers\"\n            }\n        }\n    }\n\n    addDeserializer(TrendingMovie::class.java, deserializer)\n}\n</code></pre></li>\n<li><p>Register the module with the <code>ObjectMapper</code> you use for the <code>Retrofit</code> builder:</p>\n\n<pre><code>val mapper = jacksonObjectMapper()\n        .registerModule(trendingMovieModule())\n</code></pre></li>\n<li><p>Use the <code>mapper</code> in the <code>Retrofit</code> builder:</p>\n\n<pre><code>val r = Retrofit.Builder()\n        // other necessary configuration omitted, e.g. custom OkHttpClient\n        .baseUrl(\"https://api.trakt.tv\")\n        .addConverterFactory(JacksonConverterFactory.create(mapper))\n        .build().create(Movies::class.java)\n</code></pre>\n\n<p><sup>The <code>JacksonConverterFactory</code> requires dependency: <a href=\"https://mvnrepository.com/artifact/com.squareup.retrofit2/converter-jackson\" rel=\"nofollow noreferrer\"><code>converter-jackson</code></a>.</sup></p></li>\n<li><p>Done! It should work now:</p>\n\n<pre><code>r.trending().flatMap { Observable.from(it) }.forEach(::println)\n</code></pre>\n\n<p>Complete source file: <a href=\"https://gist.github.com/h0tk3y/462be52d8e1aca1d4b2575ef6c8cf4f2\" rel=\"nofollow noreferrer\">(here)</a></p></li>\n</ol>\n"}], "owner": {"reputation": 1656, "user_id": 1211920, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3f037af7c4795183b297f6fdaeb24922?s=128&d=identicon&r=PG", "display_name": "Igor Wojda", "link": "https://stackoverflow.com/users/1211920/igor-wojda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485037130, "creation_date": 1484994169, "question_id": 41778180, "link": "https://stackoverflow.com/questions/41778180/define-retrofit-return-type-using-interface-instead-of-class", "title": "Define Retrofit return type using interface instead of class", "body": "<p>Having simple Retrofit interface </p>\n\n<pre><code>interface Movies {\n    @GET(\"movies/trending\")\n    fun trending(): Observable&lt;List&lt;TrendingMovie&gt;&gt;\n}\n</code></pre>\n\n<p>Is it possible to define TrendingMovie as interface (result would be Observable emititng list of of anonymous classes implementing this interface)?</p>\n\n<p>(I tried do do this, but I got java.lang.IllegalArgumentException: No JsonAdapter for interface com.test.TrendingMovie)</p>\n"}, {"tags": ["java", "kotlin", "proxy-classes"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1484958841, "post_id": 41774450, "comment_id": 70740393, "body": "<code>wrong number of arguments</code>: did you look at the arguments in either case? Can you <code>assert</code> the length of the array before the call?"}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1484961860, "post_id": 41774450, "comment_id": 70740940, "body": "Hi @9000, both case &#39;args&#39; is null before the print statement"}], "answers": [{"comments": [{"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1484961817, "post_id": 41774675, "comment_id": 70740929, "body": "Thanks for the knowledge, however if I just replace args with &#39;null&#39;, I&#39;m getting the same Exception ? Any thoughts on that?"}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1484962022, "post_id": 41774675, "comment_id": 70740972, "body": "@EugenPechanec same result :("}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 2, "creation_date": 1484962670, "post_id": 41774675, "comment_id": 70741063, "body": "@EugenPechanec Interestingly <code>*arrayOfNulls&lt;String&gt;(0) </code> worked! But why? Why is null not enough"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 2, "creation_date": 1484962741, "post_id": 41774675, "comment_id": 70741076, "body": "@WenChao, it&#39;s just the same: because <code>null</code> as passed is <i>one</i> argument, while <code>*arrayOfNulls&lt;String&gt;(0)</code> is spread into none. :)"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1484962787, "post_id": 41774675, "comment_id": 70741083, "body": "Also, updated the answer with an example proxy implementation."}, {"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1484962980, "post_id": 41774675, "comment_id": 70741106, "body": "I tried the code in the question using <code>*args</code> instead of just <code>args</code>. The latter produced an <code>IllegalArgumentException</code>, the former a <code>NullPointerException</code>.  This only happens when the function you&#39;re proxying is a void function, in whose case it looks like the array in question will be null."}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1484962989, "post_id": 41774675, "comment_id": 70741109, "body": "@hotkey Yeah, in your example you have params in the function of the interface, mine doesn&#39;t have any param. So I can&#39;t use <code>*args</code> it will throw exception saying <code>Parameter specified as non-null is null</code>"}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "reply_to_user": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1484963026, "post_id": 41774675, "comment_id": 70741122, "body": "@EdwinDalorzo you are right, I&#39;m proxying a void function with no params"}, {"owner": {"reputation": 69512, "user_id": 697630, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/40769e88c0dc93d387a9e368c332fdf9?s=128&d=identicon&r=PG", "display_name": "Edwin Dalorzo", "link": "https://stackoverflow.com/users/697630/edwin-dalorzo"}, "edited": false, "score": 0, "creation_date": 1484963094, "post_id": 41774675, "comment_id": 70741131, "body": "I think @hokey&#39;s answer is the right one. I will upvote now. It is just that in this case Kotlin&#39;s code will be more verbose, because we cannot spread a null array. Right?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1484963381, "post_id": 41774675, "comment_id": 70741179, "body": "Thanks to everyone, I&#39;ve updated the answer with the corner case of <code>args == null</code> explanation."}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 1, "creation_date": 1484963493, "post_id": 41774675, "comment_id": 70741196, "body": "@hotkey I guess that&#39;s probably the only solution for this now, does that mean Kotlin null is not the same as Java null at certain situation?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1484964052, "post_id": 41774675, "comment_id": 70741262, "body": "@WenChao, yes, it is not the same for varargs. For example, compare Java <code>varargFunction(null)</code> (<code>null</code> array reference is passed) with Kotlin <code>varargFunction(null)</code> (single item <code>null</code> is wrapped into an array and passed)."}, {"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1484964643, "post_id": 41774675, "comment_id": 70741356, "body": "@hotkey Thanks ! You are really helpful"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1484964292, "last_edit_date": 1484964292, "creation_date": 1484960345, "answer_id": 41774675, "question_id": 41774450, "link": "https://stackoverflow.com/questions/41774450/why-is-kotlin-throw-illegalargumentexception-when-using-proxy/41774675#41774675", "title": "Why is Kotlin throw IllegalArgumentException when using Proxy", "body": "<p>When you pass <code>args</code> into <code>method!!.invoke(obj, args)</code> in Kotlin, it is actually a single argument of array type, and by default <strong>it is not decomposed into its elements</strong> as separate arguments.</p>\n\n<p>To achieve that behavior instead, use the <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">spread operator</a>: <code>*args</code></p>\n\n<pre><code>val ret = method!!.invoke(obj, *args)\n</code></pre>\n\n<p>With this syntax, <code>args</code> will be passed in the same way as in Java varargs. For example, these lines of code are equivalent:</p>\n\n<pre><code>someVarargsFunction(\"a\", \"b\", \"c\", \"d\", \"e\")\nsomeVarargsFunction(\"a\", \"b\", *arrayOf(\"c\", \"d\"), \"e\")\n</code></pre>\n\n<p><strong>Note:</strong> if a method doesn't have any parameters, <code>args</code> will be <code>null</code>, and spreading it in Kotlin would result into a <code>NullPointerException</code>. As a workaround, use <code>*(args ?: arrayOfNulls&lt;Any&gt;(0))</code>, and in the described corner case the right part is chosen and spread into <em>zero</em> arguments.</p>\n\n<hr>\n\n<p>My example proxy implementation:</p>\n\n<pre><code>interface SomeInterface {\n    fun f(a: Int, b: Int): Int\n}\n\nval obj = object : SomeInterface {\n    override fun f(a: Int, b: Int) = a + b\n}\n</code></pre>\n\n<p><sup></sup></p>\n\n<pre><code>val a = Proxy.newProxyInstance(\n        SomeInterface::class.java.classLoader,\n        arrayOf(SomeInterface::class.java)) { proxy, method, args -&gt;\n    println(\"Before; args: \" + args?.contentToString())\n    val ret = method!!.invoke(obj, *(args ?: arrayOfNulls&lt;Any&gt;(0)))\n    println(\"After; result: $ret\")\n    ret\n} as SomeInterface\n\nprintln(a.f(1, 2))\n</code></pre>\n\n<p>And the output is:</p>\n\n<blockquote>\n<pre><code>Before; args: [1, 2]\nAfter; result: 3\n3\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1875, "favorite_count": 0, "accepted_answer_id": 41774675, "answer_count": 1, "score": 3, "last_activity_date": 1484964292, "creation_date": 1484958265, "question_id": 41774450, "link": "https://stackoverflow.com/questions/41774450/why-is-kotlin-throw-illegalargumentexception-when-using-proxy", "title": "Why is Kotlin throw IllegalArgumentException when using Proxy", "body": "<p>This is the Kotlin equivalent of Java code using <code>InvocationHandler</code>:</p>\n\n<pre><code>override fun invoke(proxy: Any?, method: Method?, args: Array&lt;out Any&gt;?): Any {\n    println(\"before httprequest---&gt;\" + args)\n    val ret = method!!.invoke(obj, args)\n    println(\"after httprequest---&gt;\")\n    return ret\n}\n</code></pre>\n\n<p>Java code:</p>\n\n<pre><code>public Object invoke(Object o, Method method, Object[] args) throws Throwable {\n    System.out.println(\"jdk---------&gt;http\" + args);\n    Object  result=method.invoke(target, args);\n    System.out.println(\"jdk---------&gt;http\");\n    return result;\n}\n</code></pre>\n\n<p>In both case <code>args</code> is null , But if I run it, Kotlin code is giving Exception</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalArgumentException: wrong number of arguments\n</code></pre>\n\n<p>What is the cause of this as Kotlin is using the standard Java class?</p>\n"}, {"tags": ["int", "kotlin", "tostring", "ordinals"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1484956874, "post_id": 41772666, "comment_id": 70739935, "body": "Well, it is usually hard to prove that something doesn&#39;t exist. :) But I&#39;m almost sure there&#39;s no such function in stdlib or anything that can be immediately adapted for it. Moreover, stdlib doesn&#39;t contain anything locale-specific, and you should actually resort to some third-party software or implement your own solution."}, {"owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1484957136, "post_id": 41772666, "comment_id": 70739997, "body": "@hotkey  Sounds like an answer to me!"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1484959156, "post_id": 41772666, "comment_id": 70740443, "body": "Okay then, posted this as an answer. :)"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 2868017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dFFUc.png?s=128&g=1", "display_name": "TakingItCasual", "link": "https://stackoverflow.com/users/2868017/takingitcasual"}, "edited": false, "score": 2, "creation_date": 1560167401, "post_id": 41774548, "comment_id": 99635323, "body": "The <code>Int</code> class could also be extended, for example: <code>fun Int.asOrdinal() ...</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 9, "last_activity_date": 1484959131, "last_edit_date": 1495540896, "creation_date": 1484959131, "answer_id": 41774548, "question_id": 41772666, "link": "https://stackoverflow.com/questions/41772666/does-kotlin-have-a-standard-way-to-format-a-number-as-an-english-ordinal/41774548#41774548", "title": "Does Kotlin have a standard way to format a number as an English ordinal?", "body": "<p>Well, it is usually hard to prove that something doesn't exist. But I have never come across any function in <code>kotlin-stdlib</code> that would do this or could be immediately adapted for this. Moreover, <code>kotlin-stdlib</code> doesn't seem to contain anything locale-specific (which number ordinals certainly are).</p>\n\n<p>I guess you should actually resort to some third-party software or implement your own solution, which might be something as simple as this:</p>\n\n<pre><code>fun ordinalOf(i: Int) = \"$i\" + if (i % 100 in 11..13) \"th\" else when (i % 10) {\n    1 -&gt; \"st\"\n    2 -&gt; \"nd\"\n    3 -&gt; \"rd\"\n    else -&gt; \"th\"\n}\n</code></pre>\n\n<p>Also, solutions in Java: <a href=\"https://stackoverflow.com/questions/6810336/is-there-a-way-in-java-to-convert-an-integer-to-its-ordinal\">(here)</a></p>\n"}], "owner": {"reputation": 25726, "user_id": 453435, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SjPwA.jpg?s=128&g=1", "display_name": "Ben Leggiero", "link": "https://stackoverflow.com/users/453435/ben-leggiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "accepted_answer_id": 41774548, "answer_count": 1, "score": 1, "last_activity_date": 1484959131, "creation_date": 1484947872, "question_id": 41772666, "link": "https://stackoverflow.com/questions/41772666/does-kotlin-have-a-standard-way-to-format-a-number-as-an-english-ordinal", "title": "Does Kotlin have a standard way to format a number as an English ordinal?", "body": "<p>In Swift, I can do something like this:</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>let ordinalFormatter = NumberFormatter()\nordinalFormatter.numberStyle = .ordinal\n\nprint(ordinalFormatter.string(from: NSNumber(value: 3))) // 3rd\n</code></pre>\n\n<p>but I don't see any way to do this so easily in Kotlin. Is there such a way, or will I have to use 3rd-party libraries or write my own?</p>\n"}, {"tags": ["java", "android", "android-activity", "kotlin", "back-stack"], "answers": [{"tags": [], "owner": {"reputation": 53550, "user_id": 1083957, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/vIOTT.jpg?s=128&g=1", "display_name": "azizbekian", "link": "https://stackoverflow.com/users/1083957/azizbekian"}, "is_accepted": false, "score": 1, "last_activity_date": 1484946906, "creation_date": 1484946906, "answer_id": 41772446, "question_id": 41771290, "link": "https://stackoverflow.com/questions/41771290/how-to-synthetically-add-activity-to-back-stack-before-starting-another-one/41772446#41772446", "title": "How to synthetically add activity to back stack before starting another one?", "body": "<p>What you may do is override <code>onBackPressed()</code> in Activity <code>B</code>, from where you will launch activity <code>C</code> and finish activity <code>B</code>. From user's perspective he will see:</p>\n\n<p>A -> B -> (back press event) -> C</p>\n\n<p>In backstack:</p>\n\n<p>A -> AB -> AC</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    super.onBackPressed();\n\n    Intent intent = new Intent(this, ActivityC.class);\n    startActivity(intent);\n    finish();\n}\n</code></pre>\n"}], "owner": {"reputation": 7426, "user_id": 2352699, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/31ae4bf741b75887315c2c218d46c702?s=128&d=identicon&r=PG", "display_name": "Fred Porci&#250;ncula", "link": "https://stackoverflow.com/users/2352699/fred-porci%c3%bancula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485188087, "creation_date": 1484941819, "last_edit_date": 1485188087, "question_id": 41771290, "link": "https://stackoverflow.com/questions/41771290/how-to-synthetically-add-activity-to-back-stack-before-starting-another-one", "title": "How to synthetically add activity to back stack before starting another one?", "body": "<p>Let's say I'm in activity A. I want to start activity B, but I want the user to be taken to activity C if they press back on activity B.</p>\n\n<p>So even though the user sees A -> B, I want it to be A -> C -> B.</p>\n\n<p>I know I could use <code>TaskStackBuilder</code> and synthetically create the ABC stack. However, sometimes A isn't simply one activity; there might be some previous navigation the user did that I don't want to lose and that would be too much trouble to synthetically recreate with <code>TaskStackBuilder</code>.</p>\n\n<p>Is there a way to use <code>TaskStackBuilder</code> keeping the current back stack? Or is there any other way to synthetically add an activity to the back stack before starting another one?</p>\n"}, {"tags": ["android", "android-gradle-plugin", "realm", "kotlin"], "comments": [{"owner": {"reputation": 1482, "user_id": 2168085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PtwwM.jpg?s=128&g=1", "display_name": "CodyEngel", "link": "https://stackoverflow.com/users/2168085/codyengel"}, "edited": false, "score": 0, "creation_date": 1484946650, "post_id": 41770801, "comment_id": 70736214, "body": "Can you include your entire gradle build script, both for the app module and the project."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1482, "user_id": 2168085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PtwwM.jpg?s=128&g=1", "display_name": "CodyEngel", "link": "https://stackoverflow.com/users/2168085/codyengel"}, "edited": false, "score": 0, "creation_date": 1484947105, "post_id": 41770801, "comment_id": 70736439, "body": "Update: someone suggested downgrading to 2.2.2 which instantly fixed it, so apparently it&#39;s some obscure issue with the 2.3.0 release."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 1482, "user_id": 2168085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PtwwM.jpg?s=128&g=1", "display_name": "CodyEngel", "link": "https://stackoverflow.com/users/2168085/codyengel"}, "edited": false, "score": 0, "creation_date": 1484947444, "post_id": 41770801, "comment_id": 70736605, "body": "I also added the Gradle files, in case someone can spot the mistake in them."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1484948475, "post_id": 41770801, "comment_id": 70737025, "body": "This is the pull request that altered kapt-based projects although I don&#39;t see a reason why it shouldn&#39;t work... <a href=\"https://github.com/realm/realm-java/pull/4022\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/pull/4022</a>"}, {"owner": {"reputation": 370, "user_id": 976138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/358791a9c91e7615ffe62c7c6e02e470?s=128&d=identicon&r=PG", "display_name": "zaki50", "link": "https://stackoverflow.com/users/976138/zaki50"}, "edited": false, "score": 4, "creation_date": 1485156162, "post_id": 41770801, "comment_id": 70789992, "body": "Adding <code>apply plugin: &#39;kotlin-kapt&#39;</code> to <code>app&#47;build.gradle</code> solves this? This issue is tracked by <a href=\"https://github.com/realm/realm-java/issues/4087\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/4087</a>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1485171794, "post_id": 41770801, "comment_id": 70798599, "body": "That does indeed solve it, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 8927, "user_id": 2767703, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/nj9nV.png?s=128&g=1", "display_name": "Kevin van Mierlo", "link": "https://stackoverflow.com/users/2767703/kevin-van-mierlo"}, "is_accepted": true, "score": 4, "last_activity_date": 1485421699, "creation_date": 1485421699, "answer_id": 41870017, "question_id": 41770801, "link": "https://stackoverflow.com/questions/41770801/applying-realm-plugin-in-kotlin-project-results-in-compilation-error/41870017#41870017", "title": "Applying Realm plugin in Kotlin project results in compilation error", "body": "<p>To close this question:\nThe comment @zaki50 wrote worked for me which is:</p>\n\n<p>Adding <code>apply plugin: 'kotlin-kapt'</code> to app/build.gradle. \nI added it right after <code>apply plugin: 'kotlin-android'</code>.</p>\n\n<p>This issue is tracked by <a href=\"https://github.com/realm/realm-java/issues/4087\" rel=\"nofollow noreferrer\">https://github.com/realm/realm-java/issues/4087</a></p>\n"}], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "accepted_answer_id": 41870017, "answer_count": 1, "score": 3, "last_activity_date": 1485421699, "creation_date": 1484939546, "last_edit_date": 1484947421, "question_id": 41770801, "link": "https://stackoverflow.com/questions/41770801/applying-realm-plugin-in-kotlin-project-results-in-compilation-error", "title": "Applying Realm plugin in Kotlin project results in compilation error", "body": "<p>I'm trying to add Realm to an Android project, I've added the project level <code>classpath</code> dependency, but putting the\n<code>apply plugin: 'realm-android'</code>\nline in my module's <code>build.gradle</code> file results in the following build error:</p>\n\n<p><code>Error:Execution failed for task ':data:compileDebugAndroidTestJavaWithJavac'.\n java.lang.NoClassDefFoundError:\norg/jetbrains/kotlin/annotation/AnnotationProcessorWrapper</code></p>\n\n<p>Without that line, the application builds and runs fine, there is no Realm code in it yet.</p>\n\n<p>Project level build.gradle:</p>\n\n<pre><code>allprojects {\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n}\n\nbuildscript {\n    ext.kotlin_version = '1.0.6'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.3'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"io.realm:realm-gradle-plugin:2.3.0\"\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>Module build.gradle:</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'realm-android'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.2\"\n\n    defaultConfig {\n        minSdkVersion 15\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n\n        test {\n            java.srcDirs = ['src/test/kotlin']\n        }\n    }\n}\n\nbuildscript {\n    ext.kotlin_version = '1.0.6'\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {  \n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile project(path: ':domain')\n\n    compile 'org.jetbrains.kotlin:kotlin-stdlib:1.0.6'\n\n    compile 'io.reactivex:rxjava:1.1.6'\n    compile 'io.reactivex:rxkotlin:0.60.0'\n\n    compile 'javax.inject:javax.inject:1'\n\n    testCompile 'junit:junit:4.12'\n    testCompile 'org.mockito:mockito-core:2.6.3'\n    testCompile 'com.nhaarman:mockito-kotlin:1.1.0'\n}\n</code></pre>\n"}, {"tags": ["javascript", "maven", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1484920966, "post_id": 41761338, "comment_id": 70722152, "body": "Did you take a look at the browser examples under <a href=\"https://github.com/JetBrains/kotlin/tree/master/libraries/examples\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/tree/master/libraries/examples</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "edited": false, "score": 0, "creation_date": 1484921904, "post_id": 41765712, "comment_id": 70722799, "body": "If you don&#39;t want war file, you can use <code>maven-assembly-plugin</code>, but <code>maven-war-plugin</code> is recognized by all major IDEs, so you won&#39;t even need to configure your IDE to put <code>html</code> file to a corresponding location."}, {"owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "edited": false, "score": 0, "creation_date": 1484921999, "post_id": 41765712, "comment_id": 70722849, "body": "Also, you won&#39;t need to rebuild Maven project every time. IDE configures itself from Maven and will always copy generated JS file to corresponding directory in servlet container."}], "tags": [], "owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "is_accepted": true, "score": 2, "last_activity_date": 1484922167, "last_edit_date": 1484922167, "creation_date": 1484921816, "answer_id": 41765712, "question_id": 41761338, "link": "https://stackoverflow.com/questions/41761338/where-to-put-index-html-in-a-kotlin-js-project/41765712#41765712", "title": "Where to put index.html in a Kotlin-js project?", "body": "<p>You can try to apply <code>war</code> packaging. Configure <code>maven-war-plugin</code> to use additional resource directory and <code>kotlin-maven-plugin</code> to put <code>js</code> file into this directory, i.e.:</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.4&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;webResources&gt;\n        &lt;resource&gt;\n          &lt;directory&gt;${project.build.directory}/kotlin-js/&lt;/directory&gt;\n        &lt;/resource&gt;\n      &lt;/webResources&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n  &lt;plugin&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n      &lt;phase&gt;compile&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;js&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;output&gt;${project.build.directory}/kotlin-js/&lt;/output&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/plugin&gt;\n</code></pre>\n\n<p>as for <code>index.html</code> it's simple: put it into <code>src/main/webapp/</code></p>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 41765712, "answer_count": 1, "score": 1, "last_activity_date": 1484922167, "creation_date": 1484908052, "question_id": 41761338, "link": "https://stackoverflow.com/questions/41761338/where-to-put-index-html-in-a-kotlin-js-project", "title": "Where to put index.html in a Kotlin-js project?", "body": "<p>I'm testing out compiling Kotlin to JavaScript with Maven. I successfuly compiled it to .js files and now I'm looking for a way to generate a working example launched from HTML file. Is there a way to achive that with Maven?</p>\n\n<p>Similar functionality, I think, is present in Intellj plugin. </p>\n"}, {"tags": ["android", "kotlin", "android-espresso"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 6856875, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/34c2329a5e41bcfdf5de9732b7518d47?s=128&d=identicon&r=PG&f=1", "display_name": "Inkognito", "link": "https://stackoverflow.com/users/6856875/inkognito"}, "edited": false, "score": 0, "creation_date": 1485169241, "post_id": 41801829, "comment_id": 70797058, "body": "<code>java.lang.NullPointerException: Attempt to invoke virtual method &#39;int android.view.View.getId()&#39; on a null object reference</code> when i resolve something like this `        val idlingResource = ViewVisibilityIdlingResource(mActivityTestRule.activity.find&zwnj;&#8203;ViewById(R.id.titleT&zwnj;&#8203;extView), 2000)`"}, {"owner": {"reputation": 6296, "user_id": 2980933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsBgO.jpg?s=128&g=1", "display_name": "denys", "link": "https://stackoverflow.com/users/2980933/denys"}, "reply_to_user": {"reputation": 187, "user_id": 6856875, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/34c2329a5e41bcfdf5de9732b7518d47?s=128&d=identicon&r=PG&f=1", "display_name": "Inkognito", "link": "https://stackoverflow.com/users/6856875/inkognito"}, "edited": false, "score": 0, "creation_date": 1485181689, "post_id": 41801829, "comment_id": 70805250, "body": "View you are looking for belongs probably to different activity then <code>mActivityTestRule.activity</code>. You should get latest activity displayed on the screen. See this link - <a href=\"http://qathread.blogspot.ch/2014/09/discovering-espresso-for-android-how-to.html\" rel=\"nofollow noreferrer\">qathread.blogspot.ch/2014/09/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6296, "user_id": 2980933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsBgO.jpg?s=128&g=1", "display_name": "denys", "link": "https://stackoverflow.com/users/2980933/denys"}, "is_accepted": false, "score": 1, "last_activity_date": 1485161217, "last_edit_date": 1485161217, "creation_date": 1485159706, "answer_id": 41801829, "question_id": 41759873, "link": "https://stackoverflow.com/questions/41759873/timeout-in-espresso-tests-test-doesn-t-run/41801829#41801829", "title": "Timeout in espresso tests, test doesn t run", "body": "<p>Sorry, but your IdlingResource looks like super complicated wait functionality.</p>\n\n<p>This code snippet works for me - <a href=\"https://gist.github.com/vaughandroid/e2fda716c7cf6853fa79\" rel=\"nofollow noreferrer\">github link</a>. You just have to provide needed parameters to ViewVisibilityIdlingResource constructor. One of them is <code>int viewId</code> and another <code>int visibility</code>. For example if you provide any <code>viewId</code> from inside the dialog layout and visibility <code>View.GONE</code> then this resource will block Espresso tests until view is visible or until dialog is displayed to the user.</p>\n"}, {"tags": [], "owner": {"reputation": 542, "user_id": 3767877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281244803/picture?type=large", "display_name": "Amit Kaushik", "link": "https://stackoverflow.com/users/3767877/amit-kaushik"}, "is_accepted": false, "score": 0, "last_activity_date": 1485645579, "creation_date": 1485645579, "answer_id": 41915983, "question_id": 41759873, "link": "https://stackoverflow.com/questions/41759873/timeout-in-espresso-tests-test-doesn-t-run/41915983#41915983", "title": "Timeout in espresso tests, test doesn t run", "body": "<p>Did not catch the syntax for kotlin though.</p>\n\n<p>isIdle() is always executed on main thread which should be non blocking. So rather than calling isDialogRunning() in isIdle(), \ncall it in a separate thread and update the state of idlingResource(if view matched or timed out) which can then be checked by isIdle().</p>\n\n<p>Hope it helps :)</p>\n"}], "owner": {"reputation": 187, "user_id": 6856875, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/34c2329a5e41bcfdf5de9732b7518d47?s=128&d=identicon&r=PG&f=1", "display_name": "Inkognito", "link": "https://stackoverflow.com/users/6856875/inkognito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1485645579, "creation_date": 1484903614, "last_edit_date": 1485433967, "question_id": 41759873, "link": "https://stackoverflow.com/questions/41759873/timeout-in-espresso-tests-test-doesn-t-run", "title": "Timeout in espresso tests, test doesn t run", "body": "<p>There is an auxiliary class DialogIdlingResource, by which I try to run my tests. The tests take place, except this one. After pressing the button, everything stops.</p>\n\n<pre><code>AcceptanceHelper.clickOnButtonInLayout(R.id.mainSignButton, R.string.common_signin_button_text, R.id.inputLayout)\n</code></pre>\n\n<p>Code snippet with two helper methods:</p>\n\n<pre><code> @Test\nfun signInUserWithInvalidEmail() {\n    goToSignIn()\n    AcceptanceHelper.updateValidationTextView(R.string.ui_data_attribute_email, \"kokojambo@mail.ru\")\n    AcceptanceHelper.updateValidationTextView(R.string.ui_data_attribute_password, VALID_PASSWORD)\n    AcceptanceHelper.clickOnButtonInLayout(R.id.mainSignButton, R.string.common_signin_button_text, R.id.inputLayout)\n    val idlingResource = DialogIdlingResource()\n    registerDialogIdlingResource()\n    unregisterDialogIdlingResource()\n}\n    private fun registerDialogIdlingResource() {\n    val instrumentation = InstrumentationRegistry.getInstrumentation()\n    idlingResource = DialogIdlingResource()\n    Espresso.registerIdlingResources(idlingResource)\n}\n\n\nprivate fun unregisterDialogIdlingResource() {\n    Espresso.unregisterIdlingResources(idlingResource)\n}\n</code></pre>\n\n<p>Probable that the error due to the two methods of regester and unregister (idlingResource)</p>\n\n<p>But in fact it should work, but may be somewhere that probably made a mistake, an auxiliary class code:</p>\n\n<pre><code>class DialogIdlingResource(private val waitTimeSeconds: Int = 5) : \n\nIdlingResource {\nprivate var resourceCallback: IdlingResource.ResourceCallback? = null\nprivate var startTime = -1L\n\noverride fun getName(): String {\n    return DialogIdlingResource::class.java.name\n}\n\noverride fun isIdleNow(): Boolean {\n    if (startTime &lt; 0) {\n        startTime = System.currentTimeMillis()\n    }\n    val timeOut = System.currentTimeMillis() - waitTimeSeconds * 1000 &gt; startTime\n    if (timeOut)\n        throw TimeoutException(\"error\")\n    val idle = !isDialogRunning\n    if (idle &amp;&amp; resourceCallback != null) {\n        resourceCallback!!.onTransitionToIdle()\n    }\n    return idle\n}\n\noverride fun registerIdleTransitionCallback(resourceCallback: IdlingResource.ResourceCallback) {\n    this.resourceCallback = resourceCallback\n}\n\nprivate val isDialogRunning: Boolean\n    get() {\n        try {\n            onView(Matchers.allOf(withId(R.id.titleTextView), ViewMatchers.withText(\"Warning\")))\n                    .check(ViewAssertions.matches(isDisplayed()))\n        } catch (e: NoMatchingViewException) {\n            e.printStackTrace()\n            System.out.println(\"some text\")\n        }\n        return true\n    }\n</code></pre>\n\n<p><strong>ALSO</strong> try to resolve problem with next <a href=\"http://matgom.com/tutorial/2016/02/21/IdlingResource.html\" rel=\"nofollow noreferrer\"><strong>solution</strong></a>. And when i run just one of my test, all works is good. But if i start all my tests, i catch error. Beacause test hasn t time to check for example text in my dialog, he opened dialog and that is all.</p>\n\n<p>IdlingResource class:</p>\n\n<pre><code>class ElapsedTimeIdlingResource(private val activity: SignActivity?) : IdlingResource {\nprivate var callback: IdlingResource.ResourceCallback? = null\n\noverride fun getName(): String {\n    return \"SignInScreenTest\"\n}\n\noverride fun isIdleNow(): Boolean {\n    val idle = isIdle\n    if (idle) callback!!.onTransitionToIdle()\n    return idle\n}\n\nval isIdle: Boolean\n    get() = activity != null &amp;&amp; callback != null\n\noverride fun registerIdleTransitionCallback(resourceCallback: IdlingResource.ResourceCallback) {\n    this.callback = resourceCallback\n}\n</code></pre>\n\n<p>}</p>\n\n<p>in my test</p>\n\n<pre><code>val activity = mActivityTestRule.getActivity()\n    val idlingResource = ElapsedTimeIdlingResource(activity)\n    Espresso.registerIdlingResources(idlingResource)\n    AcceptanceHelper.checkTextView(R.id.titleTextView, \"Warning\")\n</code></pre>\n\n<p>And i repeat, just when i start all my tests, i need to put sleep between registerIdlingResources and checktextView\nsomethinng like this:</p>\n\n<pre><code>SystemClock.sleep(5000)\n</code></pre>\n\n<p>Please help to resolve this problem. And sorry for my english.</p>\n"}, {"tags": ["classloader", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "edited": false, "score": 0, "creation_date": 1484854783, "post_id": 41749633, "comment_id": 70692903, "body": "Oh thank you, though I have another problem with it.. If you use lambdas in a class method function, they get compiled as FileName$method_lambda_is_being_called_in$number_of_lambda.c&zwnj;&#8203;lass. How would I dynamically check (and load after) for those, if there is a way?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "edited": false, "score": 0, "creation_date": 1484855632, "post_id": 41749633, "comment_id": 70693411, "body": "@Aurieh, I guess you have to override something like <code>loadClass</code> in your <code>ClassLoader</code> implementation. Once the function using the lambda is called, I see the call to <code>loadClass(name: String?)</code> with <code>name</code> <code>com.example.FileName$f$x$1</code>, i.e. the lambda class name. This comes closer to the concept of class paths: you might want to make your class loader able to load classes from certain paths by their name, and once the class is first used, your implementation will load it."}, {"owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "edited": false, "score": 0, "creation_date": 1484855764, "post_id": 41749633, "comment_id": 70693485, "body": "Oh, I current have a very dirty implementation of going over all classes at that path, and checking if it starts with my class name plus $, then loading it.. I mean, it works, but its super dirty.. I will take a look at how I could implement your way. But for now, I&#39;m marking this as an answer, thank you!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1484852400, "creation_date": 1484852400, "answer_id": 41749633, "question_id": 41748943, "link": "https://stackoverflow.com/questions/41748943/kotlin-class-reloading-with-companion-objects-functions/41749633#41749633", "title": "Kotlin class reloading with companion objects/functions", "body": "<p>Basically, top-level functions are not compiled into any of the classes defined in the file. Instead, a separate class is created for the top-level members: <code>FileNameKt</code> (if the file is named <code>FileName.kt</code>). </p>\n\n<p>So, to make your class load correctly (i.e. without any unsatisfied links), you have to load the <code>FileNameKt</code> class first:</p>\n\n<pre><code>val bytes1 = File(\"../classes/path/to/class/FileNameKt.class\").readBytes()\nval bytes2 = File(\"../classes/path/to/class/FileName.class\").readBytes()\nval reloader = Reloader()\nreloader.load(\"FileNameKt\", bytes1, 0, bytes1.size)\nreloader.load(\"FileName\", bytes2, 0, bytes2.size).newInstance()\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 6509176, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/a092J.png?s=128&g=1", "display_name": "aaa", "link": "https://stackoverflow.com/users/6509176/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1103, "favorite_count": 0, "accepted_answer_id": 41749633, "answer_count": 1, "score": 1, "last_activity_date": 1484852400, "creation_date": 1484849879, "last_edit_date": 1484850880, "question_id": 41748943, "link": "https://stackoverflow.com/questions/41748943/kotlin-class-reloading-with-companion-objects-functions", "title": "Kotlin class reloading with companion objects/functions", "body": "<p>I'm experimenting with Kotlin class reloading, but I recently got stuck with something close to this:</p>\n\n<pre><code>package com.aurieh.reloading\nfun doSomething(): String { // a function that does not belong to the class,\n    // so it gets compiled as FileName$doSomething$...\n}\n\nclass FileName {\n    // do things with doSomething\n}\n</code></pre>\n\n<p>And if I reload this class (with <code>ImplClassLoader.defineClass</code> and <code>ByteArray</code>), and try do invoke methods that call doSomething internally, I get an error similar to:</p>\n\n<pre><code>java.lang.IllegalAccessError: tried to access method com.aurieh.reloading.FileName.doSomething$default()Ljava/lang/String; from class com.aurieh.ares.reloading.FileName`\n</code></pre>\n\n<p>I would interpret this as if the reloaded class does not have doSomething attached..\nSo my question would be, how would I resolve this error? By somehow attaching doSomething to reloading classloader?</p>\n\n<p>For reference, my class reloading code:</p>\n\n<pre><code>class Reloader : ClassLoader() {\n    fun load(name: String, bytes: ByteArray, offset: Int, len: Int): Class&lt;*&gt; {\n        return defineClass(\"com.aurieh.reloading.$name\", bytes, offset, len)\n    }\n}\n</code></pre>\n\n<p>And for loading:</p>\n\n<pre><code>val bytes = File(\"../classes/path/to/class/FileName.class\").readBytes()\nReloader().load(\"FileName\", bytes, 0, bytes.size).newInstance()\n</code></pre>\n"}, {"tags": ["gradle", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 2459062, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ykJa6.gif?s=128&g=1", "display_name": "Klunk", "link": "https://stackoverflow.com/users/2459062/klunk"}, "is_accepted": false, "score": 0, "last_activity_date": 1484841954, "creation_date": 1484841954, "answer_id": 41746423, "question_id": 41743447, "link": "https://stackoverflow.com/questions/41743447/building-an-executable-fat-jar-with-gradle-script-kotlin/41746423#41746423", "title": "Building an executable fat jar with gradle-script-kotlin", "body": "<p>The Application plugin is not the right place, this is used for the generation of run scripts. In order to set the main class in the jar you need to use the following:</p>\n\n<pre><code>import org.gradle.jvm.tasks.Jar\n</code></pre>\n\n<p>and</p>\n\n<pre><code>val jar: Jar by tasks\njar.apply {\n    manifest.attributes.apply {\n        put(\"Main-Class\", \"com.sixrq.kaxb.main.SchemaGenerator\")\n    }\n}\n</code></pre>\n\n<p>in the Kotlin Script build file</p>\n"}], "owner": {"reputation": 719, "user_id": 2459062, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ykJa6.gif?s=128&g=1", "display_name": "Klunk", "link": "https://stackoverflow.com/users/2459062/klunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 623, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484841954, "creation_date": 1484833850, "question_id": 41743447, "link": "https://stackoverflow.com/questions/41743447/building-an-executable-fat-jar-with-gradle-script-kotlin", "title": "Building an executable fat jar with gradle-script-kotlin", "body": "<p>I have just moved my build script over to use gradle-script-kotlin, using the gradle 3.4 and gradle-script-kotlin 0.6.</p>\n\n<p>I can get the build script to produce a jar, but the manifest does not include the main class name. I have tried the main class name with Kt and KT at the end based on other posts I have found.</p>\n\n<p>The build script is as follows:</p>\n\n<pre><code> /*\n *    Copyright 2017 SixRQ Ltd.\n *\n *    Licensed under the Apache License, Version 2.0 (the \"License\");\n *    you may not use this file except in compliance with the License.\n *    You may obtain a copy of the License at\n *\n *        http://www.apache.org/licenses/LICENSE-2.0\n *\n *    Unless required by applicable law or agreed to in writing, software\n *    distributed under the License is distributed on an \"AS IS\" BASIS,\n *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *    See the License for the specific language governing permissions and\n *    limitations under the License.\n */\n\ngroup = \"com.sixrq\"\nversion = \"1.0-SNAPSHOT\"\n\nbuildscript {\n    repositories {\n        maven { setUrl(\"http://dl.bintray.com/kotlin/kotlin-eap-1.1\")  } \n        gradleScriptKotlin()\n    } \n\n    dependencies {\n        classpath(kotlinModule(\"gradle-plugin\"))\n    }\n}\n\nplugins {\n    application\n    groovy\n    java\n}\n\napply {\n    plugin(\"kotlin\")\n}\n\nrepositories {\n    maven { setUrl(\"http://dl.bintray.com/kotlin/kotlin-eap-1.1\") }\n    mavenCentral() \n}\n\ndependencies {\n    compile(kotlinModule(\"stdlib\"))\n    compile(\"org.jetbrains.kotlin:kotlin-gradle-plugin:1.1-M04\")\n    compile(\"org.codehaus.groovy:groovy-all:2.3.11\")\n    compile(\"com.fasterxml.jackson.module:jackson-module-kotlin:2.7.4\")\n    testCompile(\"org.spockframework:spock-core:1.0-groovy-2.4\")\n    testCompile(\"junit:junit:4.11\")\n}\n\nconfigure&lt;ApplicationPluginConvention&gt; {\n    mainClassName = \"com.sixrq.kaxb.main.SchemaGenerator\"\n}\n</code></pre>\n\n<p>I also want to create a fat jar with the runtime dependencies included, I can see plenty of examples of this for a groovy build script but nothing for gradle-script-kotlin, any suggestions?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["intellij-idea", "kotlin", "breakpoints"], "answers": [{"tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": false, "score": 2, "last_activity_date": 1484829577, "creation_date": 1484829577, "answer_id": 41742043, "question_id": 41741206, "link": "https://stackoverflow.com/questions/41741206/breakpoint-not-getting-hit-inside-kotlin-callback-in-intellij/41742043#41742043", "title": "Breakpoint not getting hit inside Kotlin callback in Intellij", "body": "<p>Your function <code>xxx</code> uses <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"nofollow noreferrer\">Object Expression</a> to create an object of anonymous class inheriting from <code>dummyInterface</code>. Problem is that you are not using this object anywhere, neither are you storing its reference so it's just created and never called.</p>\n\n<p>For debug to stop at your breakpoint you have to actually call the method.</p>\n\n<pre><code>val obj = object : dummyInterface {\n    override fun bbb() {\n        println(\"yoyo\")\n    }\n}\nobj.bbb()\n</code></pre>\n"}], "owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484829805, "creation_date": 1484826952, "last_edit_date": 1484829805, "question_id": 41741206, "link": "https://stackoverflow.com/questions/41741206/breakpoint-not-getting-hit-inside-kotlin-callback-in-intellij", "title": "Breakpoint not getting hit inside Kotlin callback in Intellij", "body": "<p>In the code below I put a breakpoint on the line where it says <code>println(\"yoyo\")</code>, but it's not getting hit. This is on IntelliJ IDEA 2016.2.5\nBuild #IC-162.2228.15, built on October 14, 2016. How can I fix this?</p>\n\n<pre><code>class XxxTest {\n    @Test\n    fun xxx(){\n        object : dummyInterface{\n            override fun bbb() {\n                println(\"yoyo\")\n            }\n\n        }\n    }\n\n    interface dummyInterface{\n        fun bbb()\n    }\n}\n</code></pre>\n"}]