[{"tags": ["kotlin", "mapper"], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": false, "score": 0, "last_activity_date": 1543461545, "creation_date": 1543461545, "answer_id": 53531361, "question_id": 53529192, "link": "https://stackoverflow.com/questions/53529192/convert-mutablelistany-to-mutablelistobject/53531361#53531361", "title": "Convert MutableList&lt;Any&gt; to MutableList&lt;Object&gt;", "body": "<p>What is the issue with casting the list?</p>\n\n<p>Another way you might be able to achieve this is to filter the instance</p>\n\n<pre><code>val summaryOrder2 = dataTable.data?.filterIsInstance&lt;SummaryOrder&gt;()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1543482098, "creation_date": 1543482098, "answer_id": 53535188, "question_id": 53529192, "link": "https://stackoverflow.com/questions/53529192/convert-mutablelistany-to-mutablelistobject/53535188#53535188", "title": "Convert MutableList&lt;Any&gt; to MutableList&lt;Object&gt;", "body": "<p>What you are showing is a cast... what you probably want is either a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-is-instance.html\" rel=\"nofollow noreferrer\"><code>filterIsInstance</code></a>.</p>\n\n<p><strong>Why is casting here a bad idea?</strong> Because generic type information is erased at runtime... you can even do <code>mutableListOf&lt;Apple&gt;() as List&lt;Orange&gt;</code> and will probably be shocked at runtime ;-) (note: such casts are therefore also mentioned as \"unchecked casts\")</p>\n\n<p><strong>Why <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a>?</strong> Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a> if you need to transform the contents of the <code>data</code>-list to those objects... Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a> (or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-is-instance.html\" rel=\"nofollow noreferrer\"><code>filterIsInstance</code></a>) to filter out all those entries that match your criteria/predicate.</p>\n\n<p>You may want to look up the referenced documentation.</p>\n\n<p>So the possible solutions demonstrated:</p>\n\n<pre><code>data?.filterIsInstance&lt;SummaryOrder&gt;()\n\ndata?.filterIsInstance&lt;SomeTransformable&gt;()\n    ?.map { it.toSummaryOrder() /* or whatever makes those instances a SummaryOrder */ }\n</code></pre>\n\n<p>Some more recommendations:</p>\n\n<ul>\n<li>try to omit nullable list types (doesn't it suffice to have an empty or non-empty list?)</li>\n<li>try to omit <code>Any</code> as list type; otherwise you need to use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-is-instance.html\" rel=\"nofollow noreferrer\"><code>filterIsInstance</code></a> for anything you do with it</li>\n</ul>\n"}], "owner": {"reputation": 761, "user_id": 3348549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38327be7b020812e6c5c7377128053a1?s=128&d=identicon&r=PG&f=1", "display_name": "dasuma", "link": "https://stackoverflow.com/users/3348549/dasuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1556785547, "creation_date": 1543444829, "last_edit_date": 1556785547, "question_id": 53529192, "link": "https://stackoverflow.com/questions/53529192/convert-mutablelistany-to-mutablelistobject", "title": "Convert MutableList&lt;Any&gt; to MutableList&lt;Object&gt;", "body": "<p>Actually I have this data class where data is a mutableList ,</p>\n\n<pre><code>data class DataTable (\n    var total: Long = 0,\n\n    @JsonProperty(\"data\")\n    var data: MutableList&lt;Any&gt;? = null )\n</code></pre>\n\n<p>my idea is that when that data arrives I can map it to a very important entity as I could do and tried to do this</p>\n\n<pre><code> val summaryOrder2= dataTable.data as  MutableList&lt;SummaryOrder&gt;\n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "kotlin-android-extensions", "androidx"], "owner": {"reputation": 307, "user_id": 9893256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1rrfL.jpg?s=128&g=1", "display_name": "AlexF", "link": "https://stackoverflow.com/users/9893256/alexf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543441656, "creation_date": 1543441656, "question_id": 53528624, "link": "https://stackoverflow.com/questions/53528624/kotlin-android-extension-synthetic-properties-are-not-available-inside-support", "title": "Kotlin Android extension - synthetic properties are not available inside support fragments", "body": "<p>I have an Android project with such dependencies</p>\n\n<pre><code>implementation 'com.android.support:appcompat-v7:28.0.0'\nimplementation 'com.android.support:design:28.0.0'\nimplementation 'com.android.support:recyclerview-v7:28.0.0'\nimplementation 'com.android.support.constraint:constraint-layout:1.1.3'\n</code></pre>\n\n<p>The project is being written in Kotlin with the usage of synthetic properties for view elements. Fragment implementations in my project extend Fragment from package android.support.v4.app. I've met with a problem that inside my fragments I can't access to my views through synthetics - I'm getting message like this:</p>\n\n<blockquote>\n  <p>Unresolved reference. None of the following candidates is applicable\n  because \n      of receiver type mismatch: public val Activity.detailButton: Button! defined \n      in kotlinx.android.synthetic.main.fragment_welcome public val \n      Dialog.detailButton: Button! defined in \n      kotlinx.android.synthetic.main.fragment_welcome public val android.app.Fragment.detailButton: Button! defined in\n  kotlinx.android.synthetic.main.fragment_welcome public val\n  androidx.fragment.app.Fragment.detailButton: Button! defined in\n  kotlinx.android.synthetic.main.fragment_welcome public val\n  LayoutContainer.detailButton: Button! defined in\n  kotlinx.android.synthetic.main.fragment_welcome</p>\n</blockquote>\n\n<p>The only way to fix the problem is to extend fragment from androidx.fragment but I need fragments only from Support Libraries! In other parts of project (for example ViewHolder with LayoutContainer) synthetic property feature works fine. So I need a help to resolve this issue.</p>\n\n<p>Recently, in Android Studio I've made a migration to AndroidX with \"Refactor-Migrate to AndroidX\" feature. But it was made on backuped project. Maybe it could influence on my situation</p>\n"}, {"tags": ["hibernate", "jpa", "kotlin", "criteria"], "answers": [{"comments": [{"owner": {"reputation": 37043, "user_id": 173149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e43539b3257049bef7885c9f193b364d?s=128&d=identicon&r=PG", "display_name": "gavenkoa", "link": "https://stackoverflow.com/users/173149/gavenkoa"}, "edited": false, "score": 0, "creation_date": 1618414130, "post_id": 54355362, "comment_id": 118595407, "body": "The correct diamond syntax is <code>updateEntity.&lt;Timestamp&gt;get(&quot;deletedOn&quot;)</code>"}], "tags": [], "owner": {"reputation": 1193, "user_id": 9698467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HWMy7a1rTHU/AAAAAAAAAAI/AAAAAAAAAGo/1VCmolljn88/photo.jpg?sz=128", "display_name": "Stefan Zhelyazkov", "link": "https://stackoverflow.com/users/9698467/stefan-zhelyazkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1548364372, "creation_date": 1548364372, "answer_id": 54355362, "question_id": 53528572, "link": "https://stackoverflow.com/questions/53528572/jpa-hibernate-currenttimestamp-did-not-match-expected-type/54355362#54355362", "title": "JPA + Hibernate currentTimestamp() did not match expected type", "body": "<p>I found that using this line will make it work.</p>\n\n<pre><code>query.set(updateEntity.get&lt;Timestamp&gt;(\"deletedOn\"), cb.currentTimestamp())\n</code></pre>\n"}], "owner": {"reputation": 1193, "user_id": 9698467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HWMy7a1rTHU/AAAAAAAAAAI/AAAAAAAAAGo/1VCmolljn88/photo.jpg?sz=128", "display_name": "Stefan Zhelyazkov", "link": "https://stackoverflow.com/users/9698467/stefan-zhelyazkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 54355362, "answer_count": 1, "score": 0, "last_activity_date": 1548364372, "creation_date": 1543441391, "question_id": 53528572, "link": "https://stackoverflow.com/questions/53528572/jpa-hibernate-currenttimestamp-did-not-match-expected-type", "title": "JPA + Hibernate currentTimestamp() did not match expected type", "body": "<p>I have the following code that throws <code>java.lang.IllegalArgumentException: Parameter value [org.hibernate.query.criteria.internal.expression.function.CurrentTimestampFunction@30cb223b] did not match expected type [java.util.Date (n/a)]</code></p>\n\n<pre><code>@Transactional\nopen fun delete(entity: E) {\n    val cb = em.criteriaBuilder\n\n    // create update query\n    val query = cb.createCriteriaUpdate(Entity::class.java)\n    val updateEntity = query.from(Entity::class.java)\n\n    // set update and where clause\n    query.set(\"deletedOn\", cb.currentTimestamp()) // &lt;- problem exhibited due to this line\n    query.where(cb.equal(updateEntity.get&lt;Long&gt;(\"id\"), entity.id))\n\n    // perform update\n    em.createQuery(query).executeUpdate()\n}\n</code></pre>\n\n<p>The error is due to when I use CriteriaBuilder's <code>currentTimestamp()</code>. In Hibernate's <code>QueryParameterBindingValidator</code> in <code>validate(Type paramType, Object bind, TemporalType temporalType)</code> there's this line</p>\n\n<pre><code>final Class parameterType = paramType.getReturnedClass();\n</code></pre>\n\n<p>The entity's <code>deletedOn</code> is of type <code>Timestamp</code>. <code>paramType</code> refers to that field and is of type <code>TimestampType</code> (coming from Hibernate). When <code>getReturnedClass()</code> is called, it returns <code>java.util.Date</code> (I guess because that's the base type?). Unfortunately then the type mismatch occurs with the expression <code>cb.currentTimestamp()</code> and the error is thrown.</p>\n\n<p>I could not find a working example online of how to use <code>currentTimestamp()</code> from CriteriaBuilder to achieve this task.</p>\n\n<p>Any help would be appreciated! Thanks!</p>\n"}, {"tags": ["ios", "kotlin", "ios-frameworks", "bitcode", "kotlin-multiplatform"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 5, "last_activity_date": 1543438623, "last_edit_date": 1543438623, "creation_date": 1543438104, "answer_id": 53527866, "question_id": 53527386, "link": "https://stackoverflow.com/questions/53527386/kotlin-multiplatform-library-for-ios-with-bitcode/53527866#53527866", "title": "Kotlin Multiplatform library for iOS with bitcode", "body": "<p>Currently, all of the binary link tasks for the same iOS target share the compiler and linker options, so there's no way to setup the options for them separately. Please follow <a href=\"https://youtrack.jetbrains.com/issue/KT-26887\" rel=\"noreferrer\">KT-26887</a> for updates.</p>\n\n<p>If you can afford running several builds with different options, you can set the options conditionally and run the build with a flag:</p>\n\n<pre><code>compilations.main.outputKinds('FRAMEWORK')\n\nif (project.findProperty(\"releaseFramework\") == \"true\")\n    compilations.main.extraOpts '-Xembed-bitcode' // for release binaries\nelse\n    compilations.main.extraOpts '-Xembed-bitcode-marker'//  for debug binaries\n</code></pre>\n\n<p>Then run the build with or without the flag, respectively:</p>\n\n<pre><code>./gradlew linkDebugFrameworkIOS\n</code></pre>\n\n<p>and</p>\n\n<pre><code>./gradlew linkReleaseFrameworkIOS -PreleaseFramework=true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 4051774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b982c02454a9d3e76fa62730f6239681?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/4051774/pavel"}, "edited": false, "score": 0, "creation_date": 1556025099, "post_id": 54339820, "comment_id": 98290850, "body": "How can I disable bitcode generation using groovy in 1.3.20?"}], "tags": [], "owner": {"reputation": 161, "user_id": 9422800, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ilya Matveev", "link": "https://stackoverflow.com/users/9422800/ilya-matveev"}, "is_accepted": false, "score": 7, "last_activity_date": 1548307305, "creation_date": 1548307305, "answer_id": 54339820, "question_id": 53527386, "link": "https://stackoverflow.com/questions/53527386/kotlin-multiplatform-library-for-ios-with-bitcode/54339820#54339820", "title": "Kotlin Multiplatform library for iOS with bitcode", "body": "<p>Since Kotlin 1.3.20 bitcode embedding for iOS frameworks works out of the box. You also can configure embedding manually if you need:</p>\n\n<pre><code>kotlin {\n    iosArm64(\"ios\") {\n        binaries {\n            framework {\n                // The following embedding modes are available:\n                //   - \"marker\"  - Embed placeholder LLVM IR data as a marker.\n                //                 Has the same effect as '-Xembed-bitcode-marker.'\n                //   - \"bitcode\" - Embed LLVM IR bitcode as data.\n                //                 Has the same effect as the '-Xembed-bitcode'.\n                //   - \"disable\" - Don't embed LLVM IR bitcode.\n                embedBitcode(\"marker\")\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3545, "user_id": 263808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/210ec6dea124f308c7a39dc399ad286e?s=128&d=identicon&r=PG", "display_name": "JP Illanes", "link": "https://stackoverflow.com/users/263808/jp-illanes"}, "edited": false, "score": 0, "creation_date": 1611579731, "post_id": 59777159, "comment_id": 116489259, "body": "This is not completely correct, Xcode will set <code>ENABLE_BITCODE</code> for both debug and release builds, you should use <code>bitcode</code> only for release builds as it will slow down your compilation process, and <code>mark</code> for debug builds. If <code>ENABLE_BITCODE</code> is false (or not there) you should use <code>disable</code>, instead."}, {"owner": {"reputation": 3545, "user_id": 263808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/210ec6dea124f308c7a39dc399ad286e?s=128&d=identicon&r=PG", "display_name": "JP Illanes", "link": "https://stackoverflow.com/users/263808/jp-illanes"}, "edited": false, "score": 0, "creation_date": 1611579891, "post_id": 59777159, "comment_id": 116489337, "body": "You can use the env var <code>CONFIGURATION</code> to know if is a debug or release build."}, {"owner": {"reputation": 3545, "user_id": 263808, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/210ec6dea124f308c7a39dc399ad286e?s=128&d=identicon&r=PG", "display_name": "JP Illanes", "link": "https://stackoverflow.com/users/263808/jp-illanes"}, "edited": false, "score": 0, "creation_date": 1611580067, "post_id": 59777159, "comment_id": 116489429, "body": "(By default there are 2 possible values for <code>CONFIGURATION</code>, &quot;Debug&quot; or &quot;Release&quot; but you can add more through Xcode, so check your project config...)"}], "tags": [], "owner": {"reputation": 18715, "user_id": 1979703, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c1f76cdf2001aaf3ca7d8e0cc79f324e?s=128&d=identicon&r=PG", "display_name": "Niklas", "link": "https://stackoverflow.com/users/1979703/niklas"}, "is_accepted": false, "score": 0, "last_activity_date": 1579205734, "creation_date": 1579205734, "answer_id": 59777159, "question_id": 53527386, "link": "https://stackoverflow.com/questions/53527386/kotlin-multiplatform-library-for-ios-with-bitcode/59777159#59777159", "title": "Kotlin Multiplatform library for iOS with bitcode", "body": "<p>I only want to use Bitcode when it's actually needed. Xcode passes down an environment variable <code>ENABLE_BITCODE</code> which we can use to conditionally embed bitcode.</p>\n\n<pre><code>kotlin {\n  iosArm64(\"ios\") {\n    binaries {\n      framework {\n        embedBitcode(\"YES\".equals(System.getenv(\"ENABLE_BITCODE\")) ? \"bitcode\" : \"marker\")\n      }\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 4752155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08745f5530d1b6646b5007b01ba12eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Vario", "link": "https://stackoverflow.com/users/4752155/vario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 4, "answer_count": 3, "score": 9, "last_activity_date": 1579205734, "creation_date": 1543435994, "last_edit_date": 1543437007, "question_id": 53527386, "link": "https://stackoverflow.com/questions/53527386/kotlin-multiplatform-library-for-ios-with-bitcode", "title": "Kotlin Multiplatform library for iOS with bitcode", "body": "<p>we use Kotlin to share a library between Android and iOS.</p>\n\n<p>We set up everything, but on iOS i need Bitcode enabled.\nAfter a research I found solution:</p>\n\n<pre><code>kotlin {\ntargets {\n    fromPreset(presets.jvm, 'jvm') {\n        mavenPublication {\n            artifactId = 'my-lib-name'\n        }\n    }\n    // Switch here to presets.iosArm64 to build library for iPhone device || iosX64 for emulator\n    fromPreset(presets.iosArm64, 'iOS') {\n        compilations.main.outputKinds('FRAMEWORK')\n        compilations.main.extraOpts '-Xembed-bitcode' // for release binaries\n        compilations.main.extraOpts '-Xembed-bitcode-marker'//  for debug binaries\n    }\n  }\n}\n</code></pre>\n\n<p>But the question is now, do I have and if yes, how do I separate between release and debug binaries and the specific flags?\nCan i simply add both flags without any drawbacks?</p>\n\n<p>Maybe somebody can enlighten me\nthanks</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1543461891, "post_id": 53526556, "comment_id": 93930886, "body": "I am trying to build a diagram (or an animation) of how things work internally, something that looks like this --- <a href=\"https://en.wikipedia.org/wiki/Thread_pool#/media/File:Thread_pool.svg\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Thread_pool#/media/File:Thread_pool.sv&zwnj;&#8203;g</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1543461777, "post_id": 53526731, "comment_id": 93930866, "body": "So, when I use <code>Dispatchers.IO</code> for a suspending fun, then it will spawn a new thread and process it on an IO thread right? After processing the suspending fun, the IO thread is stopped, and the <code>Continuation</code> resumes from where it left, on the <code>Main</code> thread or a thread which is defined by the <code>CoroutineContext</code>. Is that correct?"}, {"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1543461830, "post_id": 53526731, "comment_id": 93930875, "body": "I am trying to prepare a diagram (or an animation) of how things work internally, something that looks like this --- <a href=\"https://en.wikipedia.org/wiki/Thread_pool#/media/File:Thread_pool.svg\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Thread_pool#/media/File:Thread_pool.sv&zwnj;&#8203;g</a>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 1, "creation_date": 1543475174, "post_id": 53526731, "comment_id": 93934712, "body": "I guess you mean when you use <code>withContext(Dispatchers.IO) { ... work ... }</code>. You would use this for a <i>non-suspending</i> fun to avoid it blocking your current thread. The Runtime will suspend your current coroutine and resume it on a background thread. When the <code>withContext()</code> block is done, it will again suspend and resume on your initial thread. So it will be the same coroutine all the time, just jumping from thread to thread (just like a thread can jump from core to core)."}, {"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1543483793, "post_id": 53526731, "comment_id": 93939019, "body": "So basically a coroutine is a collection of many <code>Continuation</code>s, and a <code>Continuation</code> is just like a <b>callback</b> [under the hood], which is being executed by other suspending functions after their work is done. And a <b>Dispatcher</b> is responsible for scheduling these <code>Continuation</code>s by placing them into a concurrent queue (either <code>main</code> or <code>IO</code> based on the developer&#39;s preference). Right?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 1, "creation_date": 1543484166, "post_id": 53526731, "comment_id": 93939232, "body": "Continuation is a callback <i>above the hood</i>, its clients use it as such. Internally it&#39;s an optimized implementation that allows to reuse the same callback object to resume from any suspension point within a function body. A coroutine is associated with a <i>linked list</i> of continuations which mimics the call stack. Once a <code>suspend fun</code> completes, it resumes the continuation of its caller with the result. This is the essence of the &quot;continuation-passing style&quot;."}, {"owner": {"reputation": 1853, "user_id": 1388943, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/26584dd4a526d6f441abef793bfb0dcc?s=128&d=identicon&r=PG", "display_name": "stdout", "link": "https://stackoverflow.com/users/1388943/stdout"}, "edited": false, "score": 0, "creation_date": 1559814468, "post_id": 53526731, "comment_id": 99540300, "body": "One point that I still want to clarify. Assuming no threads are stopped and restarted, there are always potentially few threads up and running which they check that concurrent queue constantly for a piece work to run when they&#39;re are in READY state, right?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1559845861, "post_id": 53526731, "comment_id": 99556756, "body": "There are different strategies a given event loop implementation can use. Two basic ones are exponential backoff, where you go to sleep for progressively longer times (but always a limited time), and the <code>wait-notify</code> mechanism, where you go to sleep until the producer thread sends you a signal."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 44, "last_activity_date": 1587021376, "last_edit_date": 1587021376, "creation_date": 1543433277, "answer_id": 53526731, "question_id": 53526556, "link": "https://stackoverflow.com/questions/53526556/how-do-kotlin-coroutines-work-internally/53526731#53526731", "title": "How do Kotlin coroutines work internally?", "body": "<p>Coroutines are a completely separate thing from any scheduling policy that you describe. A coroutine is basically a call chain of <code>suspend fun</code>s. Suspension is totally under your control: you just have to call <code>suspendCoroutine</code>. You'll get a callback object so you can call its <code>resume</code> method and get back to where you suspended.</p>\n\n<p>Here's some code where you can see that suspension is a very direct and trasparent mechanism, fully under your control:</p>\n\n<pre><code>import kotlin.coroutines.*\nimport kotlinx.coroutines.*\n\nvar continuation: Continuation&lt;String&gt;? = null\n\nfun main(args: Array&lt;String&gt;) {\n    val job = GlobalScope.launch(Dispatchers.Unconfined) {\n        while (true) {\n            println(suspendHere())\n        }\n    }\n    continuation!!.resume(\"Resumed first time\")\n    continuation!!.resume(\"Resumed second time\")\n}\n\nsuspend fun suspendHere() = suspendCancellableCoroutine&lt;String&gt; {\n    continuation = it\n}\n</code></pre>\n\n<p>All the code above executes on the same, main thread. There is no multithreading at all going on.</p>\n\n<p>The coroutine you <code>launch</code> suspends itself each time it calls <code>suspendHere()</code>. It writes the continuation callback to the <code>continuation</code> property, and then you explicitly use that continuation to resume the coroutine.</p>\n\n<p>The code uses the <code>Unconfined</code> coroutine dispatcher which does no dispatching to threads at all, it just runs the coroutine code right there where you invoke <code>continuation.resume()</code>.</p>\n\n<hr>\n\n<p>With that in mind, let's revisit your diagram:</p>\n\n<pre><code>GlobalScope.launch {       &lt;---- (A)\n    val y = loadData()     &lt;---- (B)  // suspend fun loadData() \n    println(y)             &lt;---- (C)\n    delay(1000)            &lt;---- (D)\n    println(\"completed\")   &lt;---- (E)\n}\n</code></pre>\n\n<blockquote>\n  <ol>\n  <li>Kotlin has a pre-defined <code>ThreadPool</code> at the beginning. </li>\n  </ol>\n</blockquote>\n\n<p>It may or may not have a thread pool. A UI dispatcher works with a single thread. </p>\n\n<p>The prerequisite for a thread to be the target of a coroutine dispatcher is that there is a concurrent queue associated with it and the thread runs a top-level loop that takes <code>Runnable</code> objects from this queue and executes them. A coroutine dispatcher simply puts the continuation on that queue.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>At <code>(A)</code>, Kotlin starts executing  the coroutine in the next available free thread (Say <code>Thread01</code>).</li>\n  </ol>\n</blockquote>\n\n<p>It can also be the same thread where you called <code>launch</code>.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>At <code>(B)</code>, Kotlin stops executing the current thread, and starts the suspending function <code>loadData()</code> in the next available free thread (<code>Thread02</code>).</li>\n  </ol>\n</blockquote>\n\n<p>Kotlin has no need to stop any threads in order to suspend a coroutine. In fact, the main point of coroutines is that threads <em>don't</em> get started or stopped. The thread's top-level loop will go on and pick another runnable to run.</p>\n\n<p>Furthermore, the mere fact that you're calling a <code>suspend fun</code> has no significance. The coroutine will only suspend itself when it explicitly calls <code>suspendCoroutine</code>. The function may also simply return without suspension.</p>\n\n<p>But let's assume it did call  <code>suspendCoroutine</code>. In that case the coroutine is no longer running <em>on any thread</em>. It is suspended and can't continue until some code, somewhere, calls <code>continuation.resume()</code>. That code could be running on any thread, any time in the future.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>When <code>(B)</code> returns after execution, Kotlin continues the coroutine <strong>in the next available free thread</strong> (<code>Thread03</code>).</li>\n  </ol>\n</blockquote>\n\n<p><code>B</code> doesn't \"return after execution\", the coroutine resumes while still inside its body. It may suspend and resume any number of times before returning.</p>\n\n<blockquote>\n  <ol start=\"5\">\n  <li><code>(C)</code> executes on <code>Thread03</code>.</li>\n  <li>At <code>(D)</code>, the <code>Thread03</code> is stopped.</li>\n  <li>After 1000ms, <code>(E)</code> is executed on the next free thread, say <code>Thread01</code>.</li>\n  </ol>\n</blockquote>\n\n<p>Again, no threads are being stopped. The coroutine gets suspended and a mechanism, usually specific to the dispatcher, is used to schedule its resumption after 1000 ms. At that point it will be added to the run queue associated with the dispatcher.</p>\n\n<hr>\n\n<p>For specificity, let's see some examples of what kind of code it takes to dispatch a coroutine.</p>\n\n<p>Swing UI dispatcher:</p>\n\n<pre><code>EventQueue.invokeLater { continuation.resume(value) }\n</code></pre>\n\n<p>Android UI dispatcher:</p>\n\n<pre><code>mainHandler.post { continuation.resume(value) }\n</code></pre>\n\n<p>ExecutorService dispatcher:</p>\n\n<pre><code>executor.submit { continuation.resume(value) } \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 1, "creation_date": 1543463591, "post_id": 53527848, "comment_id": 93931216, "body": "That essentially means that a coroutine is internally divided into several cases of a switch. Continuations will be executed like <code>executeCase(1)</code>, <code>executeCase(2)</code>, <code>executeCase(N)</code>. Correct?"}, {"owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "reply_to_user": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "edited": false, "score": 0, "creation_date": 1543478914, "post_id": 53527848, "comment_id": 93936341, "body": "The state is updated by the <code>doResume</code> method by modifying a field in <code>CoroutineImpl</code> it inherits. Then control is returned to the caller (the scheduler) and it resumes at a later point, maybe it first does something else or resumes immediately."}], "tags": [], "owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "is_accepted": false, "score": 16, "last_activity_date": 1588263510, "last_edit_date": 1588263510, "creation_date": 1543438038, "answer_id": 53527848, "question_id": 53526556, "link": "https://stackoverflow.com/questions/53526556/how-do-kotlin-coroutines-work-internally/53527848#53527848", "title": "How do Kotlin coroutines work internally?", "body": "<p>Coroutines work by creating a switch over possible resume points:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass$Coroutine extends CoroutineImpl {\n    public Object doResume(Object o, Throwable t) {\n        switch(super.state) {\n        default:\n                throw new IllegalStateException(\"call to \\\"resume\\\" before \\\"invoke\\\" with coroutine\");\n        case 0:  {\n             // code before first suspension\n             state = 1; // or something else depending on your branching\n             break;\n        }\n        case 1: {\n            ...\n        }\n        }\n        return null;\n    }\n}\n</code></pre>\n\n<p>The resulting code executing this coroutine is then creating that instance and calls the <code>doResume()</code> function everytime it needs to resume execution, how that is handled depends on the scheduler used for execution.</p>\n\n<p>Here is an example compilation for a simple coroutine:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>launch {\n    println(\"Before\")\n    delay(1000)\n    println(\"After\")\n}\n</code></pre>\n\n<p>Which compiles to this bytecode</p>\n\n<pre><code>private kotlinx.coroutines.experimental.CoroutineScope p$;\n\npublic final java.lang.Object doResume(java.lang.Object, java.lang.Throwable);\nCode:\n   0: invokestatic  #18                 // Method kotlin/coroutines/experimental/intrinsics/IntrinsicsKt.getCOROUTINE_SUSPENDED:()Ljava/lang/Object;\n   3: astore        5\n   5: aload_0\n   6: getfield      #22                 // Field kotlin/coroutines/experimental/jvm/internal/CoroutineImpl.label:I\n   9: tableswitch   { // 0 to 1\n                 0: 32\n                 1: 77\n           default: 102\n      }\n  32: aload_2\n  33: dup\n  34: ifnull        38\n  37: athrow\n  38: pop\n  39: aload_0\n  40: getfield      #24                 // Field p$:Lkotlinx/coroutines/experimental/CoroutineScope;\n  43: astore_3\n  44: ldc           #26                 // String Before\n  46: astore        4\n  48: getstatic     #32                 // Field java/lang/System.out:Ljava/io/PrintStream;\n  51: aload         4\n  53: invokevirtual #38                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V\n  56: sipush        1000\n  59: aload_0\n  60: aload_0\n  61: iconst_1\n  62: putfield      #22                 // Field kotlin/coroutines/experimental/jvm/internal/CoroutineImpl.label:I\n  65: invokestatic  #44                 // Method kotlinx/coroutines/experimental/DelayKt.delay:(ILkotlin/coroutines/experimental/Continuation;)Ljava/lang/Object;\n  68: dup\n  69: aload         5\n  71: if_acmpne     85\n  74: aload         5\n  76: areturn\n  77: aload_2\n  78: dup\n  79: ifnull        83\n  82: athrow\n  83: pop\n  84: aload_1\n  85: pop\n  86: ldc           #46                 // String After\n  88: astore        4\n  90: getstatic     #32                 // Field java/lang/System.out:Ljava/io/PrintStream;\n  93: aload         4\n  95: invokevirtual #38                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V\n  98: getstatic     #52                 // Field kotlin/Unit.INSTANCE:Lkotlin/Unit;\n 101: areturn\n 102: new           #54                 // class java/lang/IllegalStateException\n 105: dup\n 106: ldc           #56                 // String call to \\'resume\\' before \\'invoke\\' with coroutine\n 108: invokespecial #60                 // Method java/lang/IllegalStateException.\"&lt;init&gt;\":(Ljava/lang/String;)V\n 111: athrow\n</code></pre>\n\n<p><em>I compiled this with kotlinc 1.2.41</em></p>\n\n<p>From 32 to 76 is the code for printing <code>Before</code> and calling <code>delay(1000)</code> which suspends.</p>\n\n<p>From 77 to 101 is the code for printing <code>After</code>.</p>\n\n<p>From 102 to 111 is error handling for illegal resume states, as denoted by the <code>default</code> label in the switch table.</p>\n\n<p>So as a summary, the coroutines in kotlin are simply state-machines that are controlled by some scheduler.</p>\n"}], "owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8559, "favorite_count": 28, "accepted_answer_id": 53526731, "answer_count": 2, "score": 36, "last_activity_date": 1588263510, "creation_date": 1543432502, "last_edit_date": 1552980422, "question_id": 53526556, "link": "https://stackoverflow.com/questions/53526556/how-do-kotlin-coroutines-work-internally", "title": "How do Kotlin coroutines work internally?", "body": "<p>How does Kotlin implement coroutines internally?</p>\n\n<p>Coroutines are said to be a \"lighter version\" of threads, and I understand that they use threads internally to execute coroutines.</p>\n\n<p>What happens when I start a coroutine using any of the builder functions? </p>\n\n<p>This is my understanding of running this code: </p>\n\n<pre><code>GlobalScope.launch {       &lt;---- (A)\n    val y = loadData()     &lt;---- (B)  // suspend fun loadData() \n    println(y)             &lt;---- (C)\n    delay(1000)            &lt;---- (D)\n    println(\"completed\")   &lt;---- (E)\n}\n</code></pre>\n\n<ol>\n<li>Kotlin has a pre-defined <code>ThreadPool</code> at the beginning. </li>\n<li>At <code>(A)</code>, Kotlin starts executing  the coroutine in the next available free thread (Say <code>Thread01</code>).</li>\n<li>At <code>(B)</code>, Kotlin stops executing the current thread, and starts the suspending function <code>loadData()</code> in the next available free thread (<code>Thread02</code>).</li>\n<li>When <code>(B)</code> returns after execution, Kotlin continues the coroutine <strong>in the next available free thread</strong> (<code>Thread03</code>).</li>\n<li><code>(C)</code> executes on <code>Thread03</code>.</li>\n<li>At <code>(D)</code>, the <code>Thread03</code> is stopped.</li>\n<li>After 1000ms, <code>(E)</code> is executed on the next free thread, say <code>Thread01</code>.</li>\n</ol>\n\n<p>Am I understanding this correctly? Or are coroutines implemented in a different way?</p>\n"}, {"tags": ["android", "android-intent", "android-activity", "kotlin"], "comments": [{"owner": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "edited": false, "score": 0, "creation_date": 1543432729, "post_id": 53525819, "comment_id": 93922043, "body": "What are you trying to accomplish? Do you want the TestResultActivityDetails to know the index of the item from which it was started?"}, {"owner": {"reputation": 21, "user_id": 10614583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V_GO_C1X40E/AAAAAAAAAAI/AAAAAAAAQjU/i9r-dhXNt98/photo.jpg?sz=128", "display_name": "sahithi DK", "link": "https://stackoverflow.com/users/10614583/sahithi-dk"}, "reply_to_user": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "edited": false, "score": 0, "creation_date": 1543434362, "post_id": 53525819, "comment_id": 93922806, "body": "I want to know how to pass the Index to TestResultActivityDetails to launch the Activity, since there are multiple Screens/Pages with the same Activity Name."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10614583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V_GO_C1X40E/AAAAAAAAAAI/AAAAAAAAQjU/i9r-dhXNt98/photo.jpg?sz=128", "display_name": "sahithi DK", "link": "https://stackoverflow.com/users/10614583/sahithi-dk"}, "edited": false, "score": 0, "creation_date": 1543524336, "post_id": 53527190, "comment_id": 93961182, "body": "Thanks for the solution, I will try this out and update!"}], "tags": [], "owner": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "is_accepted": false, "score": 0, "last_activity_date": 1543435087, "creation_date": 1543435087, "answer_id": 53527190, "question_id": 53525819, "link": "https://stackoverflow.com/questions/53525819/how-to-launch-an-android-activity-when-multiple-pages-of-the-app-have-same-activ/53527190#53527190", "title": "How to launch an Android Activity when multiple pages of the App have Same Activity name in Kotlin?", "body": "<p>To pass data to an Activity you need to use Intent extras. Your posted code would become as this:</p>\n\n<pre><code>val intent = Intent(TestResultActivityDetails::class.java).apply {\n    /* You pass data as extras, with a key and the actual value.\n     *         KEY            VALUE */\n    putExtras(\"clickedIndex\", index)\n}\n\nstartActivity(intent)\n</code></pre>\n\n<p>Then, in TestResultActivityDetails you would do:</p>\n\n<pre><code>override fun onCreate(saveInstance: Bundle?) {\n    ...\n\n    /* You get your data back from the Intent extras, using previous key.\n     *                                 KEY               FALLBACK if not found */\n    val index = intent.extras?.getInt(\"clickedIndex\") ?: -1\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10614583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V_GO_C1X40E/AAAAAAAAAAI/AAAAAAAAQjU/i9r-dhXNt98/photo.jpg?sz=128", "display_name": "sahithi DK", "link": "https://stackoverflow.com/users/10614583/sahithi-dk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543435087, "creation_date": 1543429534, "question_id": 53525819, "link": "https://stackoverflow.com/questions/53525819/how-to-launch-an-android-activity-when-multiple-pages-of-the-app-have-same-activ", "title": "How to launch an Android Activity when multiple pages of the App have Same Activity name in Kotlin?", "body": "<p>I have a screen consisting list of Results. Clicking on each of the result takes me to different item but with the same Activity Name(TestResultActivityDetails).\nHow can I launch each Result as different Activity Launcher?\nIs there any option to use index on list items to launch Activity?</p>\n\n<pre><code>val intent = Intent(TestResultActivityDetails::class.java)\nstartActivity(intent)\n</code></pre>\n\n<p>Here, TestResultActivityDetails::class.java is the activity name which is shared with all the list of Results.</p>\n"}, {"tags": ["apache-spark", "intellij-idea", "kotlin", "maven-plugin"], "comments": [{"owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "edited": false, "score": 0, "creation_date": 1543426909, "post_id": 53525096, "comment_id": 93919296, "body": "Do you mean <code>get(path = &quot;&#47;hello&quot;)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1543426728, "creation_date": 1543426728, "answer_id": 53525156, "question_id": 53525096, "link": "https://stackoverflow.com/questions/53525096/kotlin-get-path-unresolved-reference-path/53525156#53525156", "title": "Kotlin: get( path: . . .) Unresolved Reference: path", "body": "<p>If you're copying the code from a video, \"path:\" is a parameter name hint inserted by the IDE. It's not part of the source text, and you should not type it in when you copy the code.</p>\n"}, {"comments": [{"owner": {"reputation": 72, "user_id": 3200355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Njriz.jpg?s=128&g=1", "display_name": "Louis Preston Thornton III", "link": "https://stackoverflow.com/users/3200355/louis-preston-thornton-iii"}, "edited": false, "score": 0, "creation_date": 1543442893, "post_id": 53525254, "comment_id": 93926403, "body": "Wow, deleted the &quot;path:&quot; the system immediately populated it.  Thank you @yole and Geno Chen."}], "tags": [], "owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "is_accepted": false, "score": 1, "last_activity_date": 1543427148, "creation_date": 1543427148, "answer_id": 53525254, "question_id": 53525096, "link": "https://stackoverflow.com/questions/53525096/kotlin-get-path-unresolved-reference-path/53525254#53525254", "title": "Kotlin: get( path: . . .) Unresolved Reference: path", "body": "<p>As @yole said, this <code>path:</code> is a parameter name hint. Then you can just ignore that,</p>\n\n<pre><code>get(\"/hello\") { req, res -&gt; \"Hello World\" }\n</code></pre>\n\n<p>or explicitly specify the parameter name.</p>\n\n<pre><code>get(path = \"/hello\") { req, res -&gt; \"Hello World\" }\n</code></pre>\n"}], "owner": {"reputation": 72, "user_id": 3200355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Njriz.jpg?s=128&g=1", "display_name": "Louis Preston Thornton III", "link": "https://stackoverflow.com/users/3200355/louis-preston-thornton-iii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 53525156, "answer_count": 2, "score": 1, "last_activity_date": 1543427148, "creation_date": 1543426422, "question_id": 53525096, "link": "https://stackoverflow.com/questions/53525096/kotlin-get-path-unresolved-reference-path", "title": "Kotlin: get( path: . . .) Unresolved Reference: path", "body": "<p>I am new to Kotlin and I walking through and example of such . . .</p>\n\n<pre><code>package com.example.lambda1\n\nimport spark.Spark.get\n\nfun main(args: Array&lt;String&gt;) {\n    println(\"Hello, World\")\n    get( path: \"/hello\") { req, res -&gt; \"Hello World\" } }\n</code></pre>\n\n<p>I am using IntellJ Community Edition </p>\n\n<pre><code>IntelliJ IDEA 2018.3 (Community Edition)\nBuild #IC-183.4284.148, built on November 20, 2018\nJRE: 1.8.0_152-release-1343-b15 amd64\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nWindows 10 10.0\n</code></pre>\n\n<p>When creating the new project, I selected \"Maven\" from within \"IJ\" and click on \"Create from archtype\" and selected \"org.jetbrains.kotlin-archetype-jvm\".</p>\n\n<p>POM File have been updated to . . .</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;kotlin.version&gt;1.3.10&lt;/kotlin.version&gt;\n    &lt;kotlin.code.style&gt;official&lt;/kotlin.code.style&gt;\n    &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n    &lt;spark.version&gt;2.6.0&lt;/spark.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>I add the \"spark.version\" here.  Not sure of the version consider the recording of the video creation date.</p>\n\n<p>And I added the following </p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.sparkjava&lt;/groupId&gt;\n        &lt;artifactId&gt;spark-core&lt;/artifactId&gt;\n        &lt;version&gt;${spark.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>It seems to be a \"maven/spark\" issue, for I run a kotlin hello world app just fine.  </p>\n"}, {"tags": ["kotlin", "jodatime", "android-jodatime"], "comments": [{"owner": {"reputation": 4833, "user_id": 4934937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EQFIL.jpg?s=128&g=1", "display_name": "maio290", "link": "https://stackoverflow.com/users/4934937/maio290"}, "edited": false, "score": 0, "creation_date": 1543424462, "post_id": 53524509, "comment_id": 93917969, "body": "val lastMonday = monday.minusDays(7);?"}, {"owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "reply_to_user": {"reputation": 4833, "user_id": 4934937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EQFIL.jpg?s=128&g=1", "display_name": "maio290", "link": "https://stackoverflow.com/users/4934937/maio290"}, "edited": false, "score": 0, "creation_date": 1543424544, "post_id": 53524509, "comment_id": 93918015, "body": "@maio290 it sounds good but I need an function dynamic"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "is_accepted": true, "score": 0, "last_activity_date": 1543425046, "creation_date": 1543425046, "answer_id": 53524735, "question_id": 53524509, "link": "https://stackoverflow.com/questions/53524509/get-monday-of-last-week-with-jodatime/53524735#53524735", "title": "Get Monday of last week with JodaTime", "body": "<p>I get it!</p>\n\n<pre><code>DateTime().withWeekOfWeekyear(\n                 DateTime().weekOfWeekyear-1)\n          .withDayOfWeek(DateTimeConstants.MONDAY)\n</code></pre>\n\n<p>I only have to get the week of the year and subtract one week and that is all</p>\n"}], "owner": {"reputation": 47, "user_id": 4724451, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7rQ4ENQ8J4/AAAAAAAAAAI/AAAAAAAAAJE/tdB1m-xtiG0/photo.jpg?sz=128", "display_name": "Erick Daniel Juarez Gil", "link": "https://stackoverflow.com/users/4724451/erick-daniel-juarez-gil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "accepted_answer_id": 53524735, "answer_count": 1, "score": 0, "last_activity_date": 1543425046, "creation_date": 1543424296, "last_edit_date": 1592644375, "question_id": 53524509, "link": "https://stackoverflow.com/questions/53524509/get-monday-of-last-week-with-jodatime", "title": "Get Monday of last week with JodaTime", "body": "<p>I need get Monday of last week E.g</p>\n<blockquote>\n<p>Today is 28/11/18 (wednesday)</p>\n<p>I need get 19/11/18 (monday)</p>\n</blockquote>\n<p>I know that I can obtain Monday of the current week with</p>\n<pre><code>val monday = DateTime().withDayOfWeek(DateTimeConstants.MONDAY)\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3870, "user_id": 8761, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f19deda65d9c1c9f265c118b9dbff556?s=128&d=identicon&r=PG", "display_name": "AlanKley", "link": "https://stackoverflow.com/users/8761/alankley"}, "edited": false, "score": 0, "creation_date": 1580416061, "post_id": 53524017, "comment_id": 106100573, "body": "Was value for an enum deprecated?   This worked for me but I had to change it.value to it.ordinal"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 3870, "user_id": 8761, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f19deda65d9c1c9f265c118b9dbff556?s=128&d=identicon&r=PG", "display_name": "AlanKley", "link": "https://stackoverflow.com/users/8761/alankley"}, "edited": false, "score": 2, "creation_date": 1584806260, "post_id": 53524017, "comment_id": 107552786, "body": "@AlanKley <code>it.value</code> is supposed to refer to the name defined in the constructor. In this case, it&#39;s <code>val value: Int</code>. Ordinal is something entirely different; it&#39;s the placement of the enum in the list. See <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-enum/ordinal.html\" rel=\"nofollow noreferrer\">this</a>. <code>it.ordinal</code>  is NOT the same as referencing a custom-defined value, which is what&#39;s done here. If you put in 2 for an instance, you get FOO_BAR, because it&#39;s at values[2]. FOO_BAR&#39;s <code>ordinal</code> is 2, but the <code>value</code>  is 3."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 36, "last_activity_date": 1584806267, "last_edit_date": 1584806267, "creation_date": 1543422502, "answer_id": 53524017, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/53524017#53524017", "title": "How do I create an enum from a Int in Kotlin?", "body": "<pre><code>enum class Types(val value: Int) {\n    FOO(1),\n    BAR(2),\n    FOO_BAR(3);\n\n    companion object {\n        fun fromInt(value: Int) = Types.values().first { it.value == value }\n    }\n}\n</code></pre>\n\n<p>You may want to add a safety check for the range and return null.</p>\n"}, {"tags": [], "owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "is_accepted": false, "score": 2, "last_activity_date": 1543423087, "last_edit_date": 1543423087, "creation_date": 1543422538, "answer_id": 53524028, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/53524028#53524028", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>A naive way can be:</p>\n\n<pre><code>enum class Types(val value: Int) {\n    FOO(1),\n    BAR(2),\n    FOO_BAR(3);\n\n    companion object {\n        fun valueOf(value: Int) = Types.values().find { it.value == value }\n    }\n}\n</code></pre>\n\n<p>Then you can use </p>\n\n<pre><code>var bar = Types.valueOf(2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 574, "user_id": 201664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7868eb447490b94068f75a68b85692?s=128&d=identicon&r=PG", "display_name": "Anthony Chatellier", "link": "https://stackoverflow.com/users/201664/anthony-chatellier"}, "edited": false, "score": 0, "creation_date": 1603366924, "post_id": 53524077, "comment_id": 114018086, "body": "In kotlin everything is intented to be immutable, so everything is a copy of a copy of a copy. There are instructions like &quot;let&quot;, &quot;filter&quot;, &quot;map&quot; everywhere in your code and each one of them is leaking unused objects behind. Caching enum values sounds like micro-optimisation to me."}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 574, "user_id": 201664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7868eb447490b94068f75a68b85692?s=128&d=identicon&r=PG", "display_name": "Anthony Chatellier", "link": "https://stackoverflow.com/users/201664/anthony-chatellier"}, "edited": false, "score": 0, "creation_date": 1603367889, "post_id": 53524077, "comment_id": 114018515, "body": "@AnthonyChatellier That is technically incorrect, and that bases itself in how Java works. Might not be true for Kotlin Native, but Native wasn&#39;t in the scope. See <a href=\"https://stackoverflow.com/a/32799324/6296561\">stackoverflow.com/a/32799324/6296561</a> - caching may not have much of an impact depending on how often the method is used, but if it&#39;s used frequently enough, it has a fairly decent impact. You&#39;re free to not include caching though"}, {"owner": {"reputation": 574, "user_id": 201664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7868eb447490b94068f75a68b85692?s=128&d=identicon&r=PG", "display_name": "Anthony Chatellier", "link": "https://stackoverflow.com/users/201664/anthony-chatellier"}, "edited": false, "score": 0, "creation_date": 1603455801, "post_id": 53524077, "comment_id": 114050179, "body": "I don&#39;t know what was technically incorrect but I agree with you, caching may not have much of an impact depending on how often the method is used. For example, on my laptop calling getByValue 6 000 000 000 times in 20 seconds did not even consume 1% of CPU for garbage collecting. So regarding this result, even if it is one line of code, I don&#39;t really know if it is worth it, it sound like micro-optmisation to me."}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 31, "last_activity_date": 1615384583, "last_edit_date": 1615384583, "creation_date": 1543422749, "answer_id": 53524077, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/53524077#53524077", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p><a href=\"https://stackoverflow.com/a/604426/6296561\"><code>Enum#valueOf</code> is based on name</a>. Which means in order to use that, you'd need to use <code>valueof(&quot;FOO&quot;)</code>. The <code>valueof</code> method also takes a String, which explains the error. A String isn't an Int; types matter. The reason I mentioned what it does too, is so you know this isn't the method you're looking for.</p>\n<p>If you want to grab one based on an int value, you need to define your own function to do so. You can get the values in an enum using <code>values()</code>, which returns an <code>Array&lt;Types&gt;</code> in this case. You can use <code>firstOrNull</code> as a safe approach, or <code>first</code> if you prefer an exception over null.</p>\n<p>So add a companion object (which are static relative to the enum, so you can call <code>Types.getByValue(1234)</code> (<code>Types.COMPANION.getByValue(1234)</code> from Java) over <code>Types.FOO.getByValue(1234)</code>.</p>\n<pre><code>companion object {\n    private val VALUES = values()\n    fun getByValue(value: Int) = VALUES.firstOrNull { it.value == value }\n}\n</code></pre>\n<p><code>values()</code> returns a new Array every time it's called, which means you should cache it locally to avoid re-creating one every single time you call <code>getByValue</code>. If you call <code>values()</code> when the method is called, you risk re-creating it repeatedly (depending on how many times you actually call it though), which is a waste of memory.</p>\n<p>The function could also be expanded and check based on multiple parameters, if that's something you want to do. These types of functions aren't limited to one argument.</p>\n<p><sub>Naming of the function is entirely up to you though. It doesn't have to be <code>getByValue</code>.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 12218, "user_id": 1540818, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oZ1EX.jpg?s=128&g=1", "display_name": "Joffrey", "link": "https://stackoverflow.com/users/1540818/joffrey"}, "is_accepted": false, "score": 5, "last_activity_date": 1543426975, "last_edit_date": 1543426975, "creation_date": 1543426088, "answer_id": 53525027, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/53525027#53525027", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>It really depends on what you actually want to do.</p>\n\n<ul>\n<li>If you need a specific hardcoded enum value, then you can directly use <code>Types.FOO</code></li>\n<li>If you are receiving the value dynamically from somewhere else in your code, you should try to use the enum type directly in order not to have to perform this kind of conversions</li>\n<li>If you are receiving the value from a webservice, there should be something in your deserialization tool to allow this kind of conversion (like Jackson's <code>@JsonValue</code>)</li>\n<li>If you want to get the enum value based on one of its properties (like the <code>value</code> property here), then I'm afraid you'll have to implement your own conversion method, as @Zoe pointed out.</li>\n</ul>\n\n<p>One way to implement this custom conversion is by adding a companion object with the conversion method:</p>\n\n<pre><code>enum class Types(val value: Int) {\n    FOO(1),\n    BAR(2),\n    FOO_BAR(3);\n\n    companion object {\n        private val types = values().associate { it.value to it }\n\n        fun findByValue(value: Int) = types[value]\n    }\n}\n</code></pre>\n\n<p>Companion objects in Kotlin are meant to contain members that belong to the class but that are not tied to any instance (like Java's <code>static</code> members).\nImplementing the method there allows you to access your value by calling:</p>\n\n<pre><code>var bar = Types.findByValue(2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1543427498, "post_id": 53525133, "comment_id": 93919555, "body": "Minor suggestion: replace <code>.map { ... }.toMap()</code> with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/associate.html\" rel=\"nofollow noreferrer\"><code>.associate { ... }</code></a>."}, {"owner": {"reputation": 2483, "user_id": 1729005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a471f843e0b60ef6683f2671d3fb9fe?s=128&d=identicon&r=PG", "display_name": "axblount", "link": "https://stackoverflow.com/users/1729005/axblount"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1543503502, "post_id": 53525133, "comment_id": 93950462, "body": "@hotkey very nice!"}, {"owner": {"reputation": 2147, "user_id": 2259391, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/po2T4.jpg?s=128&g=1", "display_name": "Florian Moser", "link": "https://stackoverflow.com/users/2259391/florian-moser"}, "edited": false, "score": 0, "creation_date": 1564045666, "post_id": 53525133, "comment_id": 100904870, "body": "even shorter; replace <code>.associate { it.value to it }</code> with <code>.associateBy { it.value }</code>"}], "tags": [], "owner": {"reputation": 2483, "user_id": 1729005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a471f843e0b60ef6683f2671d3fb9fe?s=128&d=identicon&r=PG", "display_name": "axblount", "link": "https://stackoverflow.com/users/1729005/axblount"}, "is_accepted": false, "score": 0, "last_activity_date": 1543503533, "last_edit_date": 1543503533, "creation_date": 1543426607, "answer_id": 53525133, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/53525133#53525133", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>I would build the 'reverse' map ahead of time. Probably not a big improvement, but also not much code.</p>\n\n<pre><code>enum class Test(val value: Int) {\n    A(1),\n    B(2);\n\n    companion object {\n        val reverseValues: Map&lt;Int, Test&gt; = values().associate { it.value to it }\n        fun valueFrom(i: Int): Test = reverseValues[i]!!\n    }\n}\n</code></pre>\n\n<p>Edit: <code>map</code>...<code>toMap()</code> changed to <code>associate</code> per @hotkey's suggestion.</p>\n"}, {"comments": [{"owner": {"reputation": 2194, "user_id": 1146089, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/1XtJn.png?s=128&g=1", "display_name": "Giuseppe Garassino", "link": "https://stackoverflow.com/users/1146089/giuseppe-garassino"}, "edited": false, "score": 0, "creation_date": 1580322454, "post_id": 59973107, "comment_id": 106063018, "body": "Hi Hani, welcome to stackoverflow. I suggest to elaborate your answer, while your code should be correct, it is a good idea to explain why and what you are doing there. Thank you."}], "tags": [], "owner": {"reputation": 86, "user_id": 10896830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29b74a135fae0a9be08bcf1791b1ba5?s=128&d=identicon&r=PG", "display_name": "Hani", "link": "https://stackoverflow.com/users/10896830/hani"}, "is_accepted": false, "score": 0, "last_activity_date": 1580321224, "creation_date": 1580321224, "answer_id": 59973107, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/59973107#59973107", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>try this...</p>\n\n<pre><code>companion object{\n    fun FromInt(v:Int):Type{\n        return  Type::class.java.constructors[0].newInstance(v) as Type\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 972, "user_id": 5762040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7b128fabc7c7d39e0c69410511b40f?s=128&d=identicon&r=PG", "display_name": "Michal Zhradnk Nono3551", "link": "https://stackoverflow.com/users/5762040/michal-zhradnk-nono3551"}, "is_accepted": false, "score": 13, "last_activity_date": 1587654564, "creation_date": 1587654564, "answer_id": 61390569, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/61390569#61390569", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>If you are using integer value only to maintain order, which you need to access correct value, then you don't need any extra code. You can use build in value <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-enum/ordinal.html\" rel=\"noreferrer\">ordinal</a>. Ordinal represents position of value in enum declaration.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>enum class Types {\n    FOO,               //Types.FOO.ordinal == 0 also position == 0\n    BAR,               //Types.BAR.ordinal == 1 also position == 1\n    FOO_BAR            //Types.FOO_BAR.ordinal == 2 also position == 2\n}\n</code></pre>\n\n<p>You can access ordinal value simply calling:</p>\n\n<pre><code>Types.FOO.ordinal\n</code></pre>\n\n<p>To get correct value of enum you can simply call:</p>\n\n<pre><code>Types.values()[0]      //Returns FOO\nTypes.values()[1]      //Returns BAR\nTypes.values()[2]      //Returns FOO_BAR\n</code></pre>\n\n<p>Types.values() returns enum values in order accordingly to declaration.</p>\n\n<p>Summary:</p>\n\n<pre><code>Types.values(Types.FOO.ordinal) == Types.FOO //This is true\n</code></pre>\n\n<p>If integer values don't match order (int_value != enum.ordinal) or you are using different type (string, float...), than you need to iterate and compare your custom values as it was already mentioned in this thread.</p>\n"}, {"comments": [{"owner": {"reputation": 11526, "user_id": 235671, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xKXSM.png?s=128&g=1", "display_name": "t3chb0t", "link": "https://stackoverflow.com/users/235671/t3chb0t"}, "edited": false, "score": 1, "creation_date": 1616930313, "post_id": 64156633, "comment_id": 118151449, "body": "By far the coolest solution."}], "tags": [], "owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1617375845, "last_edit_date": 1617375845, "creation_date": 1601559645, "answer_id": 64156633, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin/64156633#64156633", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>For those who wants to avoid declaring a <code>companion object{ ... }</code> for each type then use it's <code>fromInt(...)</code> here's a way:</p>\n<p>EnumCaster class:</p>\n<pre><code>class EnumCaster private constructor() {\n    companion object {\n        inline fun &lt;reified E : Enum&lt;E&gt;&gt; fromInt(value: Int): E {\n            return enumValues&lt;E&gt;().first { it.toString().toInt() == value }\n        }\n    }\n}\n</code></pre>\n<p>Enum example:</p>\n<pre><code>enum class EMotorcycleType(val value: Int){\n    Unknown(0),\n    Sport(1),\n    SportTouring(2),\n    Touring(3),\n    Naked(4),\n    Enduro(5),\n    SuperMoto(6),\n    Chopper(7),\n    CafeRacer(8),\n\n    .....\n    Count(9999);\n\n    override fun toString(): String = value.toString()\n}\n</code></pre>\n<p>Usage example 1: Kotlin enum to jni and back</p>\n<pre><code>fun getType(): EMotorcycleType = EnumCaster.fromInt(nGetType())\nprivate external fun nGetType(): Int\n\nfun setType(type: EMotorcycleType) = nSetType(type.value)\nprivate external fun nSetType(value: Int)\n</code></pre>\n<p>Usage example 2: Assign to val</p>\n<pre><code>val type = EnumCaster.fromInt&lt;EMotorcycleType&gt;(aValidTypeIntValue)\nval typeTwo : EMotorcycleType = EnumCaster.fromInt(anotherValidTypeIntValue)\n</code></pre>\n"}], "owner": {"reputation": 10612, "user_id": 3701102, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/b67Ex.jpg?s=128&g=1", "display_name": "pableiros", "link": "https://stackoverflow.com/users/3701102/pableiros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19363, "favorite_count": 6, "accepted_answer_id": 53524077, "answer_count": 8, "score": 34, "last_activity_date": 1617375845, "creation_date": 1543422290, "question_id": 53523948, "link": "https://stackoverflow.com/questions/53523948/how-do-i-create-an-enum-from-a-int-in-kotlin", "title": "How do I create an enum from a Int in Kotlin?", "body": "<p>I have this <code>enum</code>:</p>\n\n<pre><code>enum class Types(val value: Int) {\n    FOO(1)\n    BAR(2)\n    FOO_BAR(3)\n}\n</code></pre>\n\n<p>How do I create an instance of that <code>enum</code> using an <code>Int</code>?</p>\n\n<p>I tried doing something like this:</p>\n\n<pre><code>val type = Types.valueOf(1)\n</code></pre>\n\n<p>And I get the error:</p>\n\n<blockquote>\n  <p>Integer literal does not conform to the expected type String</p>\n</blockquote>\n"}, {"tags": ["android", "arrays", "kotlin", "bitmap"], "owner": {"reputation": 2571, "user_id": 3734457, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de6e5134d8a12fdcbd9cd3b204d70203?s=128&d=identicon&r=PG", "display_name": "Jan Slominski", "link": "https://stackoverflow.com/users/3734457/jan-slominski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543505502, "creation_date": 1543421690, "last_edit_date": 1543505502, "question_id": 53523771, "link": "https://stackoverflow.com/questions/53523771/how-to-convert-2d-array-of-integers-into-8-bit-greyscale-bitmap", "title": "How to convert 2d array of integers into 8-bit greyscale bitmap?", "body": "<p>I need to convert a two dimensional array of integers (containing values from 0 to 255) to 8bit greyscale bitmap. I'm using <a href=\"https://github.com/badpx/IndexedBitmap\" rel=\"nofollow noreferrer\">IndexedBitmap</a> library, which is supposed to support this:</p>\n\n<blockquote>\n  <p>This library can be used to create 8BPP(8-bits per pixel) indexed\n  color bitmap, so it takes up storage space is a quarter of the same\n  dimension 32-bit bitmap(like ARGB8888).</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>fun convertTwoDimensionalArrayToBitmap(inputArray: Array&lt;IntArray&gt;): Bitmap {\n    val height = inputArray.size\n    val width = inputArray[0].size\n    val byteArray = ByteArray(height * width)\n    var index = 0\n    for (i in 0 until height) {\n        for (j in 0 until width) {\n            val byte = inputArray[i][j].toByte()\n            byteArray[index] = byte\n            index++\n        }\n    }\n\n    val palette = PaletteFactory.getGrayPalette()\n    return IndexBitmapFactory.createBitmap(\n            byteArray, palette, 0, 0, width, height, false)\n}\n</code></pre>\n\n<p>And I'm getting following error when I try to use it (in this case I'm passing 256 by 256 2d array):</p>\n\n<pre><code>&gt; 2018-11-28 16:03:46.913\n&gt; 23154-23175/com.my.package.test D/IndexBitmap: Raw\n&gt; buffer length = 66596 2018-11-28 16:03:46.913\n&gt; 23154-23175/com.my.package.test D/Bitmap:\n&gt; Bitmap_createFromParcel: Serialized SkColorSpace is larger than\n&gt; expected: 256 bytes 2018-11-28 16:03:46.913\n&gt; 23154-23175/com.my.package.test W/System.err:\n&gt; java.lang.RuntimeException: Failed to unparcel Bitmap 2018-11-28\n&gt; 16:03:46.914 23154-23175/com.my.package.test\n&gt; W/System.err:     at\n&gt; android.graphics.Bitmap$1.createFromParcel(Bitmap.java:1781)\n&gt; 2018-11-28 16:03:46.914\n&gt; 23154-23175/com.my.package.test W/System.err:     at\n&gt; android.graphics.Bitmap$1.createFromParcel(Bitmap.java:1772)\n&gt; 2018-11-28 16:03:46.914\n&gt; 23154-23175/com.my.package.test W/System.err:     at\n&gt; com.badpx.indexbitmap.graphics.IndexBitmapFactory.createBitmap(IndexBitmapFactory.java:97)\n&gt; 2018-11-28 16:03:46.914\n&gt; 23154-23175/com.my.package.test W/System.err:     at\n&gt; com.badpx.indexbitmap.graphics.IndexBitmapFactory.createBitmap(IndexBitmapFactory.java:78)\n</code></pre>\n\n<p>Am I using this library in a wrong way? Is there any other way of converting 2d array to 8bit bitmap on Android?</p>\n"}, {"tags": ["generics", "kotlin", "kotlin-contracts"], "comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1549200673, "post_id": 53523441, "comment_id": 95810678, "body": "what&#39;s wrong with Alexey&#39;s answer?"}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543423253, "post_id": 53524072, "comment_id": 93917289, "body": "You mean interface methd parameter?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543423441, "post_id": 53524072, "comment_id": 93917402, "body": "<code>fun &lt;T&gt; print(obj: T) { println(obj!!) }</code> - here <code>T</code> is called type parameter, because for this function it is a parameter that can be specified on invocation and only accept some <b>type</b>. &quot;The type parameter section, delimited by angle brackets (&lt;&gt;), follows the class name. It specifies the type parameters (also called type variables) T1, T2, ..., and Tn.&quot;: <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/types.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/generics/types.html</a>"}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543427450, "post_id": 53524072, "comment_id": 93919529, "body": "I always try to avoid <code>!!</code>, it will throw NPE sooner or later. Beyond this it won&#39;t work. It&#39;s not possible to store null in nonnull reference, that&#39;s why I&#39;m asking about <code>contract</code>"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543427586, "post_id": 53524072, "comment_id": 93919597, "body": "<code>fun callback&lt;T : Any&gt;(model: Model&lt;T&gt;, action: Action&lt;T&gt;)</code> won&#39;t work?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543427802, "post_id": 53524072, "comment_id": 93919683, "body": "That&#39;s because <code>Model</code> is specified to receive nullable parameter at it&#39;s declaration site, though nullability specification can be shipped via type parameter itself (<code>callback&lt;MyType?&gt;(...)</code>). It will work if you&#39;ll remove a question mark near to type of <code>data</code>."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543428136, "post_id": 53524072, "comment_id": 93919846, "body": "And that&#39;s why compilation error is actually a contract that <code>action</code> won&#39;t be executed with nullable parameter. If you want to retain nullability of <code>T</code> in <code>Model</code>, then null check ( <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/null-safety.html</a> ) is the only option."}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543428546, "post_id": 53524072, "comment_id": 93920026, "body": "<code>T : Any</code> won&#39;t even compile :). <code>Model</code> will never be null. It&#39;s single read object. Data is nullified after first read. <code>Let</code> won&#39;t help also. There is one nullcheck already :&gt;"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543428812, "post_id": 53524072, "comment_id": 93920148, "body": "Almost all of these examples do not compile (for instance, because type params declaration comes after <code>fun</code> keyword, which is in <code>&lt;T, R&gt; fun Action&lt;T&gt;.map(mapper:T-&gt;R)</code>). If you could provide valid definitions of all the elements then I could reproduce the error and probably create a null-safe implementation..."}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543429401, "post_id": 53524072, "comment_id": 93920432, "body": "I&#39;ve made fixes. Sorry for bugs."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543429513, "post_id": 53524072, "comment_id": 93920479, "body": "If you also could provide the complete definition of <code>Action</code> - it would be just perfect!"}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543429623, "post_id": 53524072, "comment_id": 93920529, "body": "Missing keywords are added, it&#39;s complete :&gt;"}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543436806, "post_id": 53524072, "comment_id": 93923921, "body": "Action interface has to be in java. I mentioned about this."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543438884, "post_id": 53524072, "comment_id": 93924826, "body": "<code>Model</code> returns just some object typed with <code>T</code>, whereas <code>map</code> function expects a <b>function type</b> which receives object of some type <code>T1</code> and returns object of some type <code>T2</code>. Worth mentioning, also, that <code>Action</code> <b>does not produce anything</b>, then <code>map</code> function is pointless for it. I get the next error: &quot;Type inference failed: Not enough information to infer parameter R in <code>fun &lt;T, R&gt; Action&lt;T&gt;.map(mapper: (R) \u2192 T): Action&lt;R&gt;</code>Please specify it explicitly.&quot;, which means that here is type issue, not nullability..."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543438914, "post_id": 53524072, "comment_id": 93924839, "body": "Why <code>fun &lt;T : Any&gt; callback(model: Model&lt;T&gt;, action: Action&lt;T&gt;) {     action.execute(model.data) }</code> and <code>class Model&lt;T : Any&gt;(val data: T)</code> does not fit you? Here nullability is excluded by upper bound of <code>Any</code> instead of default <code>Any?</code>"}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543468099, "post_id": 53524072, "comment_id": 93932274, "body": "As I said <code>data</code> is set to null after first read. It is requirement. Action doesn&#39;t have to produce anything. <code>map</code> function just allow to execute action with diferent parameter than expected, but it still came under kotlin generic nulability. I&#39;m looking a clear and safe way to warkaround this problem, and that is the case."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543478619, "post_id": 53524072, "comment_id": 93936229, "body": "&quot;Contract&quot; for this situation is non-nullable type, and if you explicitly specify that argument is nullable, how it is possible to omit null checks, then? It is, also, more complicated because it is Java interface and <code>platform type</code> comes into play: <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a> ."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543478622, "post_id": 53524072, "comment_id": 93936233, "body": "The only thing that can be done here is just making code more declarative and concise using Kotlin features, such as <code>fun &lt;T&gt; callback(model: Model&lt;T&gt;, action: Action&lt;T&gt;) {     model.data?.let(action::execute) }</code>. Here action won&#39;t be executed unless data is not null."}, {"owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543484388, "post_id": 53524072, "comment_id": 93939389, "body": "It would work. But code I provided is only sample which show how mechanism works. In app <code>execute</code> function is called at low level where I can&#39;t make such nullcheck. Gues it can&#39;t be done as I would like. @Andrey Ilyunin Thanks for help :)"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "edited": false, "score": 0, "creation_date": 1543484643, "post_id": 53524072, "comment_id": 93939553, "body": "Did all I could... I hope that may be someone smarter will get here and will be able to help you:)"}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 0, "last_activity_date": 1543422729, "creation_date": 1543422729, "answer_id": 53524072, "question_id": 53523441, "link": "https://stackoverflow.com/questions/53523441/kotlin-contract-with-high-order-functions/53524072#53524072", "title": "Kotlin contract with high order functions", "body": "<p>All type parameters are shipped as <strong>nullable</strong> by default if unbounded (in other words, they are derived from <code>Any?</code>). Easy way to fix this is just to specify non-null bound on type parameter: <code>&lt;T : Any&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1543508606, "creation_date": 1543508606, "answer_id": 53543410, "question_id": 53523441, "link": "https://stackoverflow.com/questions/53523441/kotlin-contract-with-high-order-functions/53543410#53543410", "title": "Kotlin contract with high order functions", "body": "<p>I have created <code>Action</code> interface implementation dedicated for this usage as below:</p>\n\n<pre><code>class ModelAction&lt;T&gt;(val action: Action&lt;T&gt;) : Action&lt;T?&gt; {\n    override fun execute(param: T?) {\n        param?.let {\n            action.execute(it)\n        }\n    }\n}\n\nfun callback&lt;T&gt;(model: Model&lt;T&gt;, action: Action&lt;T&gt;){\n    ModelAction(action)\n    .map{ it.getData() } \n    .execute(model)\n}\n</code></pre>\n\n<p>This idea may help somebody with similar problem, but it isn't fit my expectations and I still count on solution based on higher-order function.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1543513174, "last_edit_date": 1543513174, "creation_date": 1543512478, "answer_id": 53544523, "question_id": 53523441, "link": "https://stackoverflow.com/questions/53523441/kotlin-contract-with-high-order-functions/53544523#53544523", "title": "Kotlin contract with high order functions", "body": "<p><code>ModelAction</code> in your own answer simply provides the correct signature for <code>ifNotNull()</code>: </p>\n\n<pre><code>fun &lt;T&gt; Action&lt;T&gt;.ifNotNull(): Action&lt;T?&gt; {\n    return Action { if(it != null) execute(it) }\n} \n</code></pre>\n\n<p>Then you've got the order of operations wrong:</p>\n\n<pre><code>fun &lt;T&gt; callback(model: Model&lt;T&gt;, action: Action&lt;T&gt;){\n    action\n    .ifNotNull() // Action&lt;T?&gt;\n    .map { model: Model&lt;T&gt; -&gt; model.data } // Action&lt;Model&lt;T&gt;&gt;\n    .execute(model)\n}\n</code></pre>\n\n<p>Note that the compiler won't be able to infer <code>R</code> for this <code>map</code> usage. You could also write it as</p>\n\n<pre><code>fun &lt;T&gt; modelAction(action: Action&lt;T&gt;): Action&lt;Model&lt;T&gt;&gt; {\n    return action\n    .ifNotNull()\n    .map { it.data }\n}\n</code></pre>\n\n<p>As a side note, the argument is the \"wrong way around\" for <code>map</code>; such functions are more commonly called <a href=\"https://stackoverflow.com/questions/15457015/explain-contramap\"><code>contramap</code></a>.</p>\n"}], "owner": {"reputation": 957, "user_id": 5991493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a80594869af32aa62a442e25e1c1572?s=128&d=identicon&r=PG&f=1", "display_name": "Karol Kulbaka", "link": "https://stackoverflow.com/users/5991493/karol-kulbaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 1, "accepted_answer_id": 53544523, "answer_count": 3, "score": 1, "last_activity_date": 1549200154, "creation_date": 1543420679, "last_edit_date": 1549200154, "question_id": 53523441, "link": "https://stackoverflow.com/questions/53523441/kotlin-contract-with-high-order-functions", "title": "Kotlin contract with high order functions", "body": "<p>I have problem with Kotlin nullability and I'm wondering am I able to resolve it with contracts.\nFor such <code>Java</code> interface: <code>interface Action&lt;T&gt;{ void execute(T param); }</code> there is two extensions:</p>\n\n<pre><code>fun &lt;T, R&gt; Action&lt;T&gt;.map(mapper:(R)-&gt;T): Action&lt;R&gt; {\n   return Action{ execute(mapper(it)) }\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>fun &lt;T&gt; Action&lt;T&gt;.ifNotNull(): Action&lt;T&gt; {\n  return Action { if(it != null) execute(it) }\n} \n</code></pre>\n\n<p>There is also a generic model with nullable data:</p>\n\n<pre><code>class Model&lt;T&gt;(val data: T?)\n</code></pre>\n\n<p>Now I have created function which take <code>Action</code> interface as argument. Case is to execute action argument only when <code>param != null</code>, so it looks like below:</p>\n\n<pre><code>fun &lt;T&gt; callback(model: Model&lt;T&gt;, action: Action&lt;T&gt;){\n    action\n    .map{ it.getData() } //compilation error: getData return T? when action require T\n    .ifNotNull() //execute only when data!=null\n    .execute(model)\n}\n</code></pre>\n\n<p>So now, is there any option to use Kotlin contract to ensure compiler that <code>action</code> will not execute with null parameter?</p>\n"}, {"tags": ["android", "kotlin", "stringbuilder"], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "edited": false, "score": 0, "creation_date": 1543420810, "post_id": 53523380, "comment_id": 93915797, "body": "This is perfect. I just tested and is working. Thank you!"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 3, "last_activity_date": 1543420860, "last_edit_date": 1543420860, "creation_date": 1543420454, "answer_id": 53523380, "question_id": 53523365, "link": "https://stackoverflow.com/questions/53523365/build-a-string-based-on-an-object-with-null-values/53523380#53523380", "title": "Build a String based on an Object with null values", "body": "<pre><code>listOfNotNull(observation.country, observation.group, observation.locality)\n             .joinToString(\" - \")\n</code></pre>\n\n<p>which may be simplifiable to:</p>\n\n<pre><code>val myString = with(observation) {\n  listOfNotNull(country, group, locality).joinToString(\" - \")\n}\n</code></pre>\n\n<p>It's probably the easiest to just use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/list-of-not-null.html\" rel=\"nofollow noreferrer\"><code>listOfNotNull</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/join-to-string.html\" rel=\"nofollow noreferrer\"><code>joinToString</code></a> for this.</p>\n"}], "owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53523380, "answer_count": 1, "score": 1, "last_activity_date": 1543420860, "creation_date": 1543420397, "last_edit_date": 1543420473, "question_id": 53523365, "link": "https://stackoverflow.com/questions/53523365/build-a-string-based-on-an-object-with-null-values", "title": "Build a String based on an Object with null values", "body": "<p>I have my custom Object \"Obersvation\". This object has some values that could be null. Now I want to create a String based on those values, ignoring the null ones.</p>\n\n<p>Right now I am doing something like this:</p>\n\n<pre><code>val myList = arrayListOf&lt;String&gt;()\n\nif (observation.country != null) myList.add(observation.country)\nif (observation.group != null) myList.add(observation.group)\nif (observation.locality != null) myList.add(observation.locality)\n\nval myString = TextUtils.join(\" - \", myList)\n</code></pre>\n\n<p>This way, I check which values are null and only if they are not null I add it to my list. Then I proceed to separate all values with a dash. It is producing what I want, but I am afraid that doing like this is bad for performance since I am doing a lot of \"ifs\" in my code.</p>\n\n<p>Any way to improve this?</p>\n"}, {"tags": ["android", "kotlin", "nsd", "google-pixel", "nsdmanager"], "comments": [{"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543419426, "post_id": 53522708, "comment_id": 93914812, "body": "Have you tried with pure TCP, without &quot;test_service&quot;?"}, {"owner": {"reputation": 597, "user_id": 2010496, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f92df7dc2bf05395f5f5768046ab2195?s=128&d=identicon&r=PG", "display_name": "user2010496", "link": "https://stackoverflow.com/users/2010496/user2010496"}, "reply_to_user": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543501146, "post_id": 53522708, "comment_id": 93949015, "body": "Yep but I don&#39;t find any services on the network"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543501240, "post_id": 53522708, "comment_id": 93949065, "body": "I was looking for printers inside the same WiFi network and it worked okay. Are you sure that devices you are looking for are in the same network?"}, {"owner": {"reputation": 597, "user_id": 2010496, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f92df7dc2bf05395f5f5768046ab2195?s=128&d=identicon&r=PG", "display_name": "user2010496", "link": "https://stackoverflow.com/users/2010496/user2010496"}, "reply_to_user": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543563940, "post_id": 53522708, "comment_id": 93972045, "body": "Yep. I&#39;ve tried several times with different devices other than the ones mentioned. Sony phones works but the NsdManager gives up after a while of starting/stopping discoveries. But the Google Pixel 3 still never finds any devices. Are there certain routers that the Pixel 3 doesn&#39;t support?"}, {"owner": {"reputation": 597, "user_id": 2010496, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f92df7dc2bf05395f5f5768046ab2195?s=128&d=identicon&r=PG", "display_name": "user2010496", "link": "https://stackoverflow.com/users/2010496/user2010496"}, "reply_to_user": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543587999, "post_id": 53522708, "comment_id": 93984222, "body": "Tried with jmDNS but did not work on the Google Pixel 3 either."}, {"owner": {"reputation": 761, "user_id": 78356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f449c3a58a30e6e5961bbab80edbb50?s=128&d=identicon&r=PG&f=1", "display_name": "mph", "link": "https://stackoverflow.com/users/78356/mph"}, "edited": false, "score": 0, "creation_date": 1564130871, "post_id": 53522708, "comment_id": 100937285, "body": "See workaround to the Pixel behavior here: <a href=\"https://stackoverflow.com/a/53630778/78356\">stackoverflow.com/a/53630778/78356</a>"}], "owner": {"reputation": 597, "user_id": 2010496, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/f92df7dc2bf05395f5f5768046ab2195?s=128&d=identicon&r=PG", "display_name": "user2010496", "link": "https://stackoverflow.com/users/2010496/user2010496"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1546954734, "creation_date": 1543418336, "question_id": 53522708, "link": "https://stackoverflow.com/questions/53522708/nsdmanager-never-discover-any-services-on-google-pixel-3-pie", "title": "NsdManager never discover any services on Google Pixel 3 (Pie)", "body": "<p>Same code works on Samsung S8 and Sony XZ, but not on Google Pixel 3. </p>\n\n<p>I start the discovery with NsdManager with:</p>\n\n<pre><code>nsdManager.discoverServices(\"_test_service._tcp.\", NsdManager.PROTOCOL_DNS_SD, discoveryListener)\n</code></pre>\n\n<p>The discoveryListener gives onDiscoveryStarted callback with same serviceType as specified. I sit on same wifi as my service, I wait and wait but no onServiceFound callback comes. The onServiceFound callback comes milliseoncds after starting discovery on Samsung S8 and Sony XZ.</p>\n\n<p>Are there any known issues regarding the NsdManager for Google Pixel 3?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "rx-java2", "rx-binding"], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1543417725, "creation_date": 1543417725, "answer_id": 53522499, "question_id": 53522083, "link": "https://stackoverflow.com/questions/53522083/constructor-of-inner-class-viewholder-can-be-called-only-with-receiver-of-contai/53522499#53522499", "title": "Constructor of inner class ViewHolder can be called only with receiver of containing class", "body": "<p>I think you just need to change this line:</p>\n\n<p><code>return TraceAdapter.ViewHolder(view)</code></p>\n\n<p>to this:</p>\n\n<p><code>return ViewHolder(view)</code></p>\n\n<p>As you've explicitly marked it as an inner class, it requires an instance of the outer class, which you get by default because you're constructing it from within the outer class.  However only if you don't prefix it with the outer class type, as shown above.</p>\n\n<p>The distinction between inner and nested classes is a bit different in Kotlin and Java (Java uses the term <code>static</code> for nested classes that don't have an instance of the outer class).  It's explained in more detail <a href=\"https://kotlinlang.org/docs/reference/nested-classes.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 54, "user_id": 10167463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7egP.jpg?s=128&g=1", "display_name": "EliodeBeirut", "link": "https://stackoverflow.com/users/10167463/eliodebeirut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 53522499, "answer_count": 1, "score": 1, "last_activity_date": 1543417725, "creation_date": 1543416380, "question_id": 53522083, "link": "https://stackoverflow.com/questions/53522083/constructor-of-inner-class-viewholder-can-be-called-only-with-receiver-of-contai", "title": "Constructor of inner class ViewHolder can be called only with receiver of containing class", "body": "<p>I want to set a  listener on RecyclerView items using RxJava2. The items are checkboxes. I want to listen to each item separately.\nSo I am getting an error Constructor of inner class ViewHolder can be called only with receiver of containing class in the</p>\n\n<blockquote>\n  <p>return TraceAdapter.ViewHolder(view)</p>\n</blockquote>\n\n<pre><code>class TraceAdapter(private var checkList: List&lt;TraceViewModelRow&gt; = listOf()) :\n    RecyclerView.Adapter&lt;TraceAdapter.ViewHolder&gt;() {\n\nprivate val publishSubject = PublishSubject.create&lt;Event&gt;()\nval events: Observable&lt;Event&gt; = publishSubject\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): TraceAdapter.ViewHolder {\n    val view = LayoutInflater.from(parent.context).inflate(R.layout.item_trace_task, parent, false)\n    return TraceAdapter.ViewHolder(view)\n}\n\noverride fun getItemCount(): Int = checkList.size\n\noverride fun onBindViewHolder(holder: TraceAdapter.ViewHolder, position: Int) {\n\n    holder.bindTraceList(checkList[position])\n\n}\n\noverride fun onViewRecycled(holder: ViewHolder) {\n    super.onViewRecycled(holder)\n}\n\ninner class ViewHolder(override val containerView: View) : RecyclerView.ViewHolder(containerView), LayoutContainer {\n\n    fun bindTraceList(trace: TraceViewModelRow) {\n        with(trace) {\n            checkbox_itemText.clicks()\n                    .map { checkList[layoutPosition] }\n                    .subscribe { publishSubject }\n\n            checkbox_itemText.text = description\n            checkbox_itemText.isChecked = isChecked\n        }\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-camera"], "comments": [{"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1543421923, "post_id": 53521417, "comment_id": 93916526, "body": "Please don&#39;t post apks, zips and whatnot, just try to explain clearly what is your problem"}, {"owner": {"reputation": 93, "user_id": 9181343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64wp2.png?s=128&g=1", "display_name": "leeyang", "link": "https://stackoverflow.com/users/9181343/leeyang"}, "reply_to_user": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1543463668, "post_id": 53521417, "comment_id": 93931243, "body": "Okay. I will post code and question only."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10611538, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xIkSO4tNQLg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbD2hoQj3NacifLweCeGDiSueGjR3Q/mo/photo.jpg?sz=128", "display_name": "Gurvinder Singh", "link": "https://stackoverflow.com/users/10611538/gurvinder-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1544251791, "last_edit_date": 1544251791, "creation_date": 1543471679, "answer_id": 53532820, "question_id": 53521417, "link": "https://stackoverflow.com/questions/53521417/camera-issue-on-pixel-3-based-with-android-kotlin-project/53532820#53532820", "title": "Camera issue on Pixel 3, based with Android Kotlin Project", "body": "<p>Sorry Guys, this is not possible because some devices hardware doesn't support this. Some devices support both side Camera hardware streaming.</p>\n"}], "owner": {"reputation": 93, "user_id": 9181343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/64wp2.png?s=128&g=1", "display_name": "leeyang", "link": "https://stackoverflow.com/users/9181343/leeyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544251791, "creation_date": 1543414360, "last_edit_date": 1543464073, "question_id": 53521417, "link": "https://stackoverflow.com/questions/53521417/camera-issue-on-pixel-3-based-with-android-kotlin-project", "title": "Camera issue on Pixel 3, based with Android Kotlin Project", "body": "<p>My app is using camera feature and has video Streaming logic. \nIt shows both camera streaming simultaneously and works well in Pixel 2 XL and Pixel 2.\nBut unfortunately it is not working well with Pixel 3.\nI thought it is due to Android SDK version but pixel 2 has already android 9  and we have also tested app in android 8 on our motorola device.</p>\n\n<p>My question is that Google Pixel 3 is Android 9.0 version?\nAlmost of Google pixel 2 is Android 8.0 SDK version?</p>\n\n<p><a href=\"https://i.stack.imgur.com/RKm6r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RKm6r.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, blank part should show back camera streaming actually but not working.</p>\n\n<p>Is it impossible to show both camera screen on Google pixel 3?\nI have used MediaProjectionmanager for screen Capture.</p>\n\n<p>Here are the code parts to record video and capture screens.</p>\n\n<pre><code>private fun setupComponents() {\n    Hawk.init(this).build()\n    initDagger()\n    initViewModel()\n\n    altSavingMode = Hawk.get(Constants.SettingsOptions().SWITCH_SAVING_MODE, false)\n\n    mediaProjectionManager = getSystemService(Context.MEDIA_PROJECTION_SERVICE) as MediaProjectionManager\n\n    val metrics = DisplayMetrics()\n    windowManager.defaultDisplay.getMetrics(metrics)\n\n    screenDensity = metrics.densityDpi\n\n    val display = windowManager.defaultDisplay\n    val size = Point()\n    display.getSize(size)\n\n    displayWidth = size.x\n    displayHeight = size.y\n\n    mMediaRecorder = MediaRecorder()\n}\n\nprivate fun startRecording() {\n\n    Log.d(tag, \"StartRecording Executed\")\n\n    setupFilePath()\n\n    Log.d(tag, \"AltSavingModeValue - $altSavingMode\")\n\n    initRecorder()\n    prepareRecorder()\n\n    isScreenRecordingGranted = Hawk.get(\"isScreenRecordingGranted\", false)\n\n    Log.d(TAG, \"startRecording: isScreenRecordingGranted - $isScreenRecordingGranted\")\n\n    if (mediaProjection == null) {\n        Log.d(TAG, \"startRecording: init mediaprojection\")\n        startActivityForResult(mediaProjectionManager?.createScreenCaptureIntent(), VIDEO_PERMISSION_CODE)\n        return\n    } else {\n        virtualDisplay = createVirtualDisplay()\n        mMediaRecorder?.start()\n\n        isRecording = true\n        Hawk.put(\"isRecording\", isRecording)\n        updateRecordingLabel()\n\n        navigationBar?.visibility = View.GONE\n        recordButton.setImageDrawable(this.getDrawable(R.drawable.ic_stop))\n        blinkRec()\n    }\n}\n\nprivate fun stopRecording() {\n\n    Log.d(tag, \"stopRecording Executed\")\n\n    isRecording = false\n    updateRecordingLabel()\n    Hawk.put(\"isRecording\", isRecording)\n\n    if (!altSavingMode) {\n\n        mMediaRecorder?.stop()\n        mMediaRecorder?.reset()\n\n        if (virtualDisplay == null) {\n            return\n        }\n\n        virtualDisplay?.release()\n        addVideoToGallery()\n    }\n    getLocation()\n    getDate()\n}\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543414190, "post_id": 53521260, "comment_id": 93911339, "body": "@alex-mamo It&#39;s not a duplicate, cause I am not able to complete or add a listener to the method declaration due to the fact that the method is fixed inside the android os."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543414256, "post_id": 53521260, "comment_id": 93911380, "body": "You cannot return something from the database as a result of a method. You need to create a custom callback for that."}, {"owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543414315, "post_id": 53521260, "comment_id": 93911424, "body": "I am aware of that. But, how do I have to do it in the Preferences then? Is there any way to let the android OS wait until the callback has been called?"}, {"owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543414441, "post_id": 53521260, "comment_id": 93911503, "body": "I don&#39;t get it why you have marked the question as a duplicate. It clearly isn&#39;t a duplicate at all."}, {"owner": {"reputation": 101, "user_id": 11656240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebe235ce8eec7f9188d15f9e54e243c?s=128&d=identicon&r=PG&f=1", "display_name": "rusty1996", "link": "https://stackoverflow.com/users/11656240/rusty1996"}, "edited": false, "score": 0, "creation_date": 1610223825, "post_id": 53521260, "comment_id": 116067126, "body": "Anyone ever figure this out?"}, {"owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "reply_to_user": {"reputation": 101, "user_id": 11656240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebe235ce8eec7f9188d15f9e54e243c?s=128&d=identicon&r=PG&f=1", "display_name": "rusty1996", "link": "https://stackoverflow.com/users/11656240/rusty1996"}, "edited": false, "score": 0, "creation_date": 1610356659, "post_id": 53521260, "comment_id": 116096962, "body": "@rusty1996 i don&#39;t understand why my question was marked as a dupilcate because of that.."}, {"owner": {"reputation": 101, "user_id": 11656240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebe235ce8eec7f9188d15f9e54e243c?s=128&d=identicon&r=PG&f=1", "display_name": "rusty1996", "link": "https://stackoverflow.com/users/11656240/rusty1996"}, "edited": false, "score": 1, "creation_date": 1610497519, "post_id": 53521260, "comment_id": 116151533, "body": "@romaneso I didn&#39;t mark it as duplicate. An answer for this would greatly benefit me too..."}, {"owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "reply_to_user": {"reputation": 101, "user_id": 11656240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebe235ce8eec7f9188d15f9e54e243c?s=128&d=identicon&r=PG&f=1", "display_name": "rusty1996", "link": "https://stackoverflow.com/users/11656240/rusty1996"}, "edited": false, "score": 0, "creation_date": 1610528129, "post_id": 53521260, "comment_id": 116159230, "body": "@rusty1996 yeah i know. it got flagged imediately after posting the question, which, in my opinion, doesn&#39;t make sense at all."}], "owner": {"reputation": 847, "user_id": 3836294, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab7f3902084f168bc6c437c80bb45f12?s=128&d=identicon&r=PG&f=1", "display_name": "romaneso", "link": "https://stackoverflow.com/users/3836294/romaneso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "closed_date": 1543414058, "answer_count": 0, "score": 2, "last_activity_date": 1543414053, "creation_date": 1543413885, "last_edit_date": 1543414053, "question_id": 53521260, "link": "https://stackoverflow.com/questions/53521260/using-preferencedatastore-with-firebase-database", "closed_reason": "Duplicate", "title": "Using PreferenceDataStore with Firebase Database", "body": "<p>I want to use <code>PreferenceDataStore</code> to fetch the settings of the user that are being saved in a Firebase database. </p>\n\n<p>The set- function works like a charm, because there is no listener:</p>\n\n<pre><code>override fun putString(key: String?, value: String?) {\n    if(key != null &amp;&amp; value != null){\n        val userId = UserUtils.getCurrentUser()?.uid.orEmpty()\n        val preferencesReference = database.getReference(\"users/$userId/preferences\")\n\n        preferencesReference.updateChildren(HashMap&lt;String,String&gt;().apply {\n            this.put(key,value)\n        }.toMap())\n    }\n}\n</code></pre>\n\n<p>The get- function is a more complicated, because, as you may know, the firebase databaes gives us a callback method where the data is being returned. Is there  still a way to get the values? Do you have any ideas?</p>\n\n<pre><code>override fun getString(key: String?, defValue: String?): String? {\n    if(key == null){\n        return defValue\n    }\n\n    val userId = UserUtils.getCurrentUser()?.uid.orEmpty()\n    database.getReference(\"users/$userId/preferences/$key\").addListenerForSingleValueEvent(object: ValueEventListener{\n        override fun onDataChange(p0: DataSnapshot) {\n           //the return value is here, but i am not able to return it cause it's a listener\n\n        }\n\n        override fun onCancelled(p0: DatabaseError) {}\n    })\n\n    return \"wot\";\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1543414673, "creation_date": 1543414673, "answer_id": 53521507, "question_id": 53521240, "link": "https://stackoverflow.com/questions/53521240/kotlin-return-map-of-asyncstart-coroutinestart-lazy/53521507#53521507", "title": "Kotlin: return map of async(start = CoroutineStart.LAZY)", "body": "<p><code>withContext</code> doesn't complete until all the coroutines launched within it complete. You can simplify your case to this:</p>\n\n<pre><code>fun main() {\n    runBlocking {\n        withContext(Dispatchers.Default) {\n            launch(start = CoroutineStart.LAZY) { 1 }\n        }\n        println(\"not happening\")\n    }\n}\n</code></pre>\n\n<p>It doesn't complete either. The reason you got into this is that you used <code>withContext</code> inappropriately. Your <code>getMap()</code> has no reason to be a <code>suspend fun</code>. </p>\n\n<p>What you need instead of <code>withContext</code> is setting a coroutine scope for these <code>async</code> calls. For example, this will work:</p>\n\n<pre><code>fun getMap(): Map&lt;String, Deferred&lt;Any&gt;&gt; =\n        linkedMapOf&lt;String, Deferred&lt;Any&gt;&gt;().also { map -&gt;\n            with(GlobalScope) {\n                map[\"1\"] = async(start = CoroutineStart.LAZY) { 1 }\n                map[\"2\"] = async(start = CoroutineStart.LAZY) { 2 }\n            }\n        }\n\nfun main() {\n    val map = getMap()\n    println(\"now it's happening\")\n}\n</code></pre>\n\n<p>Here you're using the global coroutine scope so you don't get any automatic cancellation. If you want to take care of that concern, replace it with something else.</p>\n"}], "owner": {"reputation": 1786, "user_id": 2419207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c78050166e151a98887f8e98169e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "iljau", "link": "https://stackoverflow.com/users/2419207/iljau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 53521507, "answer_count": 1, "score": 2, "last_activity_date": 1552980430, "creation_date": 1543413805, "last_edit_date": 1552980430, "question_id": 53521240, "link": "https://stackoverflow.com/questions/53521240/kotlin-return-map-of-asyncstart-coroutinestart-lazy", "title": "Kotlin: return map of async(start = CoroutineStart.LAZY)", "body": "<p>I'd like to return map of lazily-started coroutines and use them (start/cancel) in another function.</p>\n\n<p>Problem is that getMap() function in following hangs. Why is that and is it possible to return such map from function?</p>\n\n<pre><code>import kotlinx.coroutines.*\n\nsuspend fun getMap(): LinkedHashMap&lt;String, Deferred&lt;Any&gt;&gt; {\n    return withContext(Dispatchers.Default) {\n        val map = linkedMapOf&lt;String, Deferred&lt;Any&gt;&gt;()\n        map[\"1\"] = async(start = CoroutineStart.LAZY) { 1 }\n        map[\"2\"] = async(start = CoroutineStart.LAZY) { 2 }\n        map;\n    }\n}\n\nfun main() {\n    runBlocking {\n        val map = getMap()\n        println(\"not happening\")\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "proguard"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543427408, "post_id": 53521118, "comment_id": 93919513, "body": "Are you getting a runtime error, if so please post the error and stack trace as part of your question."}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543556817, "post_id": 53521118, "comment_id": 93969522, "body": "No it is not run time error, It is a compile time error. While trying to build my project I am getting error as Unresolved reference : USER_NAME."}, {"owner": {"reputation": 10122, "user_id": 527533, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9cf51c8acb0daff517ba6f3c5815a54c?s=128&d=identicon&r=PG", "display_name": "Jan Vladimir Mostert", "link": "https://stackoverflow.com/users/527533/jan-vladimir-mostert"}, "edited": false, "score": 0, "creation_date": 1543560029, "post_id": 53521118, "comment_id": 93970565, "body": "Would annotating with <code>@JvmStatic</code>  not help in this case?"}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1543642552, "post_id": 53521118, "comment_id": 94001539, "body": "I have tried adding that but I guess we need to add some rule in proguard related to @JvmStatic in this case. I tried finding it but couldn&#39;t."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543703187, "post_id": 53521118, "comment_id": 94015491, "body": "What does the code look like that is referencing the variable, and what is the exact error message from the compiler, these are important details to add to your question."}, {"owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "edited": false, "score": 0, "creation_date": 1543731306, "post_id": 53521118, "comment_id": 94019586, "body": "The problem is resolved by using <code>@Keep</code> before the companion object."}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 4974603, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F9Mwx.jpg?s=128&g=1", "display_name": "Android", "link": "https://stackoverflow.com/users/4974603/android"}, "edited": false, "score": 0, "creation_date": 1613861353, "post_id": 53863656, "comment_id": 117208270, "body": "I also needed to add @Keep above the class, adding it just for the companion object did not solve the problem."}], "tags": [], "owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "is_accepted": true, "score": 8, "last_activity_date": 1545288254, "creation_date": 1545288254, "answer_id": 53863656, "question_id": 53521118, "link": "https://stackoverflow.com/questions/53521118/unable-to-access-companion-object-used-in-kotlin-class-after-enabling-proguard/53863656#53863656", "title": "Unable to access companion object used in kotlin class after enabling proguard", "body": "<p>Problem resolved using <code>@Keep</code> before companion object</p>\n\n<pre><code>class Test{    \n    ......    \n    @Keep companion object {    \n        const val USER_NAME = \"user_name\"    \n        .....    \n  }    \n  .....    \n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34680, "user_id": 376789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3c11edfcea93ed27b17942a46cefd0?s=128&d=identicon&r=PG", "display_name": "jmar777", "link": "https://stackoverflow.com/users/376789/jmar777"}, "is_accepted": false, "score": 5, "last_activity_date": 1566349171, "creation_date": 1566349171, "answer_id": 57583169, "question_id": 53521118, "link": "https://stackoverflow.com/questions/53521118/unable-to-access-companion-object-used-in-kotlin-class-after-enabling-proguard/57583169#57583169", "title": "Unable to access companion object used in kotlin class after enabling proguard", "body": "<p>The accepted answer uses the <code>@Keep</code> annotation. If that works for you, then great, but in our case it didn't make a difference.</p>\n\n<p>For anyone else in the same boat, here's the solution that worked for us (add to your proguard rules):</p>\n\n<pre><code>-keepclassmembers class com.example.some.package.SomeClass {\n    public static ** Companion;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 13941777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gjpi5KuyJzlbraOc3edwdnugL781gZIAV3QwabocA=k-s128", "display_name": "Marina Tros", "link": "https://stackoverflow.com/users/13941777/marina-tros"}, "is_accepted": false, "score": 2, "last_activity_date": 1594900119, "last_edit_date": 1594900119, "creation_date": 1594899756, "answer_id": 62933944, "question_id": 53521118, "link": "https://stackoverflow.com/questions/53521118/unable-to-access-companion-object-used-in-kotlin-class-after-enabling-proguard/62933944#62933944", "title": "Unable to access companion object used in kotlin class after enabling proguard", "body": "<p>After many struggles with it the thing that worked best for me is:</p>\n<pre><code> -keep class &lt;class&gt;$Companion { *; }\n</code></pre>\n<p>no annotations needed.</p>\n"}], "owner": {"reputation": 593, "user_id": 7793478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0f8c2cd7071c3aedabb6e087c4765e?s=128&d=identicon&r=PG&f=1", "display_name": "Surbhi Aggarwal", "link": "https://stackoverflow.com/users/7793478/surbhi-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2813, "favorite_count": 1, "accepted_answer_id": 53863656, "answer_count": 3, "score": 5, "last_activity_date": 1594900119, "creation_date": 1543413419, "last_edit_date": 1543556786, "question_id": 53521118, "link": "https://stackoverflow.com/questions/53521118/unable-to-access-companion-object-used-in-kotlin-class-after-enabling-proguard", "title": "Unable to access companion object used in kotlin class after enabling proguard", "body": "<p>I have a Kotlin class with some variables in companion object. After enabling proguard, The variables are not getting accessed.</p>\n\n<pre><code>class Test{    \n    ......    \n    companion object {    \n        const val USER_NAME = \"user_name\"    \n        .....    \n  }    \n  .....    \n}  \n</code></pre>\n\n<p>Proguard rules include:-</p>\n\n<pre><code>-keep class kotlin.** { *; }    \n-keep class kotlin.Metadata { *; }    \n-dontwarn kotlin.**    \n-keepclassmembers class **$WhenMappings {    \n    &lt;fields&gt;;    \n}    \n-keepclassmembers class kotlin.Metadata {    \n    public &lt;fields&gt;;    \n    public &lt;methods&gt;;    \n}    \n\n-keepclassmembers class * {    \n    static final % *;    \n    static final java.lang.String *;    \n}    \n</code></pre>\n"}, {"tags": ["php", "android", "json", "kotlin", "rx-java"], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 4151099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H5914.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/4151099/marco"}, "is_accepted": true, "score": 1, "last_activity_date": 1543420361, "creation_date": 1543420361, "answer_id": 53523353, "question_id": 53520613, "link": "https://stackoverflow.com/questions/53520613/android-problem-to-sendusing-retrofit-in-kotlin-or-to-receive-from-php-a-jso/53523353#53523353", "title": "Android : Problem to send(using Retrofit in Kotlin) or to receive from php a json file", "body": "<p>At the moment, (in your php file) you are checking if there is any field with key==<code>json</code>.\nBut if you look closely at your <code>sendPost()</code> function, you do never add a <code>json</code> field to the body, hence the response will not be the expected one.</p>\n\n<p>The <strong>solution</strong> could be</p>\n\n<pre><code>val jsonObject = JSONObject()\njsonObject.put(\"type\", type)\njsonObject.put(\"tsagk\",tsagk)\n\nval body = JSONObject()\nbody.put(\"json\", jsonObject)\n</code></pre>\n\n<p>and then passing the <code>body</code> value to your post request.</p>\n"}], "owner": {"reputation": 33, "user_id": 10544986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sj-ngXVrcxw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBjR13nZoZZci09CY2e5pITCoZNWw/mo/photo.jpg?sz=128", "display_name": "michalis chaviaras", "link": "https://stackoverflow.com/users/10544986/michalis-chaviaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 53523353, "answer_count": 1, "score": 0, "last_activity_date": 1543484813, "creation_date": 1543411844, "last_edit_date": 1543484813, "question_id": 53520613, "link": "https://stackoverflow.com/questions/53520613/android-problem-to-sendusing-retrofit-in-kotlin-or-to-receive-from-php-a-jso", "title": "Android : Problem to send(using Retrofit in Kotlin) or to receive from php a json file", "body": "<p>I am developing and android application in Kotlin and I encounter a problem to send with 'POST' a json object.</p>\n\n<p>The problem is that I take as response the following : </p>\n\n<pre><code>Post{username='null',pass='null',latitude=null,longitude=null,id=2}\n</code></pre>\n\n<p>As we conclude because the <strong>id=2</strong> in the above \"message\" the json data is not null but the fields are. <em>So the problem is that I can't properly decode and read the json data</em> and is seen by the above message because the username,pass,latitude,longitude are null. The php that sends the above message is the  following and I found it on the internet ( <a href=\"http://eosrei.net/articles/2011/12/basic-json-requestresponse-php\" rel=\"nofollow noreferrer\">http://eosrei.net/articles/2011/12/basic-json-requestresponse-php</a> ) and modified it.</p>\n\n<pre><code>&lt;?php\nif (_REQUEST['json']) {\n    $data = file_get_contents('php://input');\n    $json_data = json_decode($data , true);\n    if (is_null($json_data)) {  \n        $response = array(\n            'username' =&gt; json_data['username'],\n            'pass' =&gt; json_data['pass'],\n            'latitude' =&gt; json_data['latitude'],\n            'longitude' =&gt; json_data['longitude'],\n            'id' =&gt; 1\n            );\n    }\n    else {\n        $response = array(\n            'username' =&gt; $json_data-&gt;username,\n            'pass' =&gt; $json_data-&gt;pass,\n            'latitude' =&gt; $json_data-&gt;latitude,\n            'longitude' =&gt; $json_data-&gt;longitude,\n            'id' =&gt; 2\n            );  \n    }\n}\nelse {\n        $response = array(\n            'type' =&gt; 'error',\n            'tsagk' =&gt; 'TSAGK',\n            'value' =&gt; 'No JSON value set',\n            );\n}\n$encoded = json_encode($response);\nheader('Content-type: application/json');\nexit($encoded);\n?&gt;\n</code></pre>\n\n<p>I also have the following APIService in my android : </p>\n\n<p>interface APIService {</p>\n\n<pre><code>@POST(\"json.php\")\n@Headers(\"Content-Type: application/json;charset=utf-8\", \"Accept: application/json;charset=utf-8\", \"Cache-Control: max-age=640000\")\nfun savePost(\n        @Body jsonObject: JSONObject\n): Observable&lt;Post&gt;\n}\n</code></pre>\n\n<p>Inside the MainActivity I have the sendPost : </p>\n\n<pre><code>fun sendPost(user: String, pwd: String) {\n    writeOnDebugger(\"sendPost()\")\n    val jsonObject = JSONObject()\n    jsonObject.put(\"username\", user)\n    jsonObject.put(\"pass\",pwd)\n    jsonObject.put(\"latitude\",35.5)\n    jsonObject.put(\"longitude\",36.5)\n\n    writeOnDebugger(jsonObject.toString())\n\n    // RxJava\n\n    mAPIService?.savePost(jsonObject)?.subscribeOn(Schedulers.io())?.observeOn(AndroidSchedulers.mainThread())\n            ?.subscribe(object : Subscriber&lt;Post&gt;() {\n                override fun onCompleted() {\n                    writeOnDebugger(\"onCompleted()\")\n                }\n\n                override fun onError(e: Throwable) {\n                    writeOnDebugger(\"onError()\")\n                }\n\n                override fun onNext(post: Post) {\n                    writeOnDebugger(\"onNext()\")\n                    showResponse(post.toString())\n                }\n            })\n}\n\nfun showResponse(response: String) {\n    writeOnDebugger(\"showResponse()\")\n    if (mResponseTv?.getVisibility() === View.GONE) {\n        mResponseTv?.setVisibility(View.VISIBLE)\n    }\n    mResponseTv?.setText(response)\n}\n</code></pre>\n\n<p>I have a post class : </p>\n\n<pre><code>class Post {\n\n@SerializedName(\"username\")\n@Expose\nvar username: String? = null\n@SerializedName(\"pass\")\n@Expose\nvar pass: String? = null\n@SerializedName(\"latitude\")\n@Expose\nvar latitude: Double? = null\n@SerializedName(\"longitude\")\n@Expose\nvar longitude: Double? = null\n@SerializedName(\"id\")\n@Expose\nvar id: Int? = null\n\noverride fun toString(): String {\n    return \"Post{\" +\n            \"username='\" + username + '\\''.toString() +\n            \", pass='\" + pass + '\\''.toString() +\n            \", latitude=\" + latitude +\n            \", longitude=\" + longitude +\n            \", id=\" + id +\n            '}'.toString()\n}\n}\n</code></pre>\n\n<p>RetrofitClient : </p>\n\n<pre><code>object RetrofitClient {\n\nprivate var retrofit: Retrofit? = null\n//    var gson = GsonBuilder()\n//            .setLenient()\n//            .create()\nfun getClient(baseUrl: String): Retrofit? {\n    if (retrofit == null) {\n        retrofit = Retrofit.Builder()\n                .baseUrl(baseUrl)\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n                .addConverterFactory(GsonConverterFactory.create(/*gson*/))\n                .build()\n    }\n    return retrofit\n}\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1543619588, "post_id": 53520246, "comment_id": 93998112, "body": "<code>val</code> needs to be <code>var</code> in order to resign it."}], "answers": [{"tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": true, "score": 4, "last_activity_date": 1543781737, "last_edit_date": 1543781737, "creation_date": 1543619099, "answer_id": 53566105, "question_id": 53520246, "link": "https://stackoverflow.com/questions/53520246/gradle-5-0-causes-error-val-cannot-be-reassigned-when-using-kotlin-dsl-in-buid-g/53566105#53566105", "title": "Gradle 5.0 causes error Val cannot be reassigned when using Kotlin DSL in buid.gradle.kts", "body": "<p>Let's look at <a href=\"https://github.com/gradle/gradle/blob/master/subprojects/jacoco/src/main/java/org/gradle/testing/jacoco/tasks/JacocoReportBase.java#L121-L138\" rel=\"nofollow noreferrer\">the source code</a>:</p>\n\n<pre><code>/**\n * Source sets that coverage should be reported for.\n */\n@PathSensitive(PathSensitivity.RELATIVE)\n@InputFiles\npublic ConfigurableFileCollection getClassDirectories() {\n    return classDirectories;\n}\n\n/**\n * Classes that coverage should be reported for.\n * @deprecated Use {@code getClassDirectories().setFrom(...)}\n */\n@Deprecated\npublic void setClassDirectories(FileCollection classDirectories) {\n    DeprecationLogger.nagUserOfDiscontinuedMethod(\"JacocoReportBase.setClassDirectories(FileCollection)\", \"Use getClassDirectories().from(...)\");\n    this.classDirectories.setFrom(classDirectories);\n}\n</code></pre>\n\n<p>As you see, <code>getClassDirectories</code> has return type of <code>ConfigurableFileCollection</code> and <code>setClassDirectories</code> accepts <code>FileCollection</code>. So this is not a valid Java Beans property, because getter and setter operate on different types. So only getter is seen by Kotlin and it is, actually, a <code>val</code>.</p>\n\n<p>You can either try to call <code>setClassDirectories</code> directly (<code>setClassDirectories(\u2026)</code> instead of <code>classDirectories = \u2026</code>), or to use <code>classDirectories.setFrom</code>, as suggested by the Javadocs.</p>\n\n<p>It worked in 4.10.2 because it <a href=\"https://github.com/gradle/gradle/blob/v4.10.2/subprojects/jacoco/src/main/java/org/gradle/testing/jacoco/tasks/JacocoReportBase.java#L108-L119\" rel=\"nofollow noreferrer\">was a property at that time</a> (getter and setter types were the same). Things changed in <a href=\"https://github.com/gradle/gradle/commit/76fecd4f823a1108f0044a2269aad92383a6660e\" rel=\"nofollow noreferrer\">this commit</a>.</p>\n"}], "owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "accepted_answer_id": 53566105, "answer_count": 1, "score": 4, "last_activity_date": 1543781737, "creation_date": 1543410601, "last_edit_date": 1543411354, "question_id": 53520246, "link": "https://stackoverflow.com/questions/53520246/gradle-5-0-causes-error-val-cannot-be-reassigned-when-using-kotlin-dsl-in-buid-g", "title": "Gradle 5.0 causes error Val cannot be reassigned when using Kotlin DSL in buid.gradle.kts", "body": "<p>This error did <strong>NOT</strong> occur in gradle version 4.10.2</p>\n\n<p>The line <code>classDirectories = files(filesToCover)</code> causes gradle to throw an error: </p>\n\n<pre><code>* What went wrong:\nScript compilation error:\n\n  Line 80:             classDirectories = files(filesToCover)\n                       ^ Val cannot be reassigned\n</code></pre>\n\n<p>But when you look at the underlying Java class <code>JacocoReportBase</code> you can clearly see that there's a setter and the class property is not final.</p>\n\n<pre><code>public abstract class JacocoReportBase extends JacocoBase {\n    private FileCollection executionData;\n    private FileCollection sourceDirectories;\n    private FileCollection classDirectories;\n    private FileCollection additionalClassDirs;\n    private FileCollection additionalSourceDirs;\n\n    ...\n\n    public void setClassDirectories(FileCollection classDirectories) {\n        this.classDirectories = classDirectories;\n    }\n</code></pre>\n\n<p><strong>build.gradle.kts</strong></p>\n\n<pre><code>tasks {\n    withType&lt;KotlinCompile&lt;KotlinJvmOptions&gt;&gt; {\n        kotlinOptions.freeCompilerArgs = listOf(\"-Xjsr305=strict\")\n        kotlinOptions.jvmTarget = \"1.8\"\n    }\n\n    withType&lt;JacocoReport&gt; {\n        reports {\n            xml.isEnabled = false\n            csv.isEnabled = false\n            html.destination = file(\"$buildDir/jacocoHtml\")\n        }\n\n        afterEvaluate {\n            val filesToAvoidForCoverage = listOf(\n                    \"/dto\",\n                    \"/config\",\n                    \"AuthenticationMicroServiceKt.class\"\n            )\n            val filesToCover = mutableListOf&lt;String&gt;()\n            File(\"build/classes/kotlin/main/app/example/core/\")\n                    .walkTopDown()\n                    .mapNotNull { file -&gt;\n                        var match = false\n                        filesToAvoidForCoverage.forEach {\n                            if (file.absolutePath.contains(it)) {\n                                match = true\n                            }\n                        }\n                        return@mapNotNull if (!match) {\n                            file.absolutePath\n                        } else {\n                            null\n                        }\n                    }\n                    .filter { it.contains(\".class\") }\n                    .toCollection(filesToCover)\n\n            classDirectories = files(filesToCover) // error\n        }\n    }\n}\n</code></pre>\n\n<p>I have also posted an issue in Github <a href=\"https://github.com/gradle/kotlin-dsl/issues/1265\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["android", "kotlin", "fragment", "toolbar"], "comments": [{"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "edited": false, "score": 0, "creation_date": 1543411212, "post_id": 53520131, "comment_id": 93909381, "body": "check my comment and replace it with your  &lt;androidx.appcompat.widget.Toolbar"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411318, "post_id": 53520224, "comment_id": 93909432, "body": "That&#39;s working for the first page where I want my title to be &quot;Grateful&quot;. But on the second page the grateful is staying. And I can&#39;t access to my toolbar as it&#39;s in my mainActivity and if I want to change it, it&#39;s from a fragment.  In fact with the navigation library, there is no need of defining the android:text. I mean you don&#39;t have to hardcode this as it&#39;s dynamically changed and use the label defined in my navigation graph."}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411407, "post_id": 53520224, "comment_id": 93909488, "body": "you can control to use 1 main tool bar for whole app or each activity to have different toolbar thats up to you"}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411491, "post_id": 53520224, "comment_id": 93909538, "body": "Try to create new XML layout put toolbar in it and than call it with  &lt;include             android:id=&quot;@+id/mainBar&quot;             layout=&quot;@layoutapp_bar_main&quot;             android:layout_width=&quot;match_parent&quot;             android:layout_height=&quot;wrap_content&quot; /&gt;"}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411690, "post_id": 53520224, "comment_id": 93909657, "body": "ya if your app have 1 main activity and you replace fragments on top of the activity, you can send broadcast everytime you visit new page to change the title , or make static method and call it from anywhere but i dont recommend using static when it come to the view"}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411789, "post_id": 53520224, "comment_id": 93909714, "body": "Toolbar toolbar = binding.appBar.findViewById(R.id.toolbar);         setSupportActionBar(toolbar);         toolbarTittle = binding.appBar.findViewById(R.id.toolbarTittle); and than use this method   public void setTittle(String tittle) {         toolbarTittle.setText(tittle);     }  that you can call from anywhere"}, {"owner": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543411831, "post_id": 53520224, "comment_id": 93909753, "body": "I will try it !"}, {"owner": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543412908, "post_id": 53520224, "comment_id": 93910508, "body": "So doing like you said cause some issue. If I use toolbarTitle from my fragment ofc it returns &quot;must not be null&quot; If I define toolbarTitle in mainActivity and use a method to change the title on it that cause property toolbarTitle has not been initialized even if the toolbarTitle is initialized in the onCreate function of the main activity."}, {"owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "reply_to_user": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "edited": false, "score": 0, "creation_date": 1543413292, "post_id": 53520224, "comment_id": 93910762, "body": "if you change this method to static you can call it this way MainActivity.setTittle(&quot;&quot;); or use broadcast"}], "tags": [], "owner": {"reputation": 679, "user_id": 10662432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TYi2T.png?s=128&g=1", "display_name": "Hossam Hassan", "link": "https://stackoverflow.com/users/10662432/hossam-hassan"}, "is_accepted": true, "score": 3, "last_activity_date": 1543410531, "creation_date": 1543410531, "answer_id": 53520224, "question_id": 53520131, "link": "https://stackoverflow.com/questions/53520131/any-possibility-to-centre-the-title-within-a-toolbar/53520224#53520224", "title": "Any possibility to centre the title within a toolbar?", "body": "<p>In your <code>XML</code> you can use custom <code>toolbar</code> </p>\n\n<pre><code>   &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/toolbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"?attr/actionBarSize\"\n        android:background=\"?attr/colorPrimary\"\n        app:popupTheme=\"@style/AppTheme.PopupOverlay\"&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/toolbarlin\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:orientation=\"horizontal\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/toolbarTittle\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_centerInParent=\"true\"\n                android:maxWidth=\"150dp\"\n                android:singleLine=\"true\"\n                android:text=\"@string/app_name\"\n                android:textColor=\"@color/white\" /&gt;\n\n        &lt;/RelativeLayout&gt;\n\n    &lt;/android.support.v7.widget.Toolbar&gt;\n</code></pre>\n\n<p>And dont forget to change your activity theme to <code>parent=\"Theme.AppCompat.Light.NoActionBar\"</code></p>\n"}], "owner": {"reputation": 51, "user_id": 10716457, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-U4UFjma_n8A/AAAAAAAAAAI/AAAAAAAABOo/HJy0NDrme4w/photo.jpg?sz=128", "display_name": "Martichou", "link": "https://stackoverflow.com/users/10716457/martichou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "closed_date": 1543490615, "accepted_answer_id": 53520224, "answer_count": 1, "score": 0, "last_activity_date": 1543419907, "creation_date": 1543410233, "last_edit_date": 1543419907, "question_id": 53520131, "link": "https://stackoverflow.com/questions/53520131/any-possibility-to-centre-the-title-within-a-toolbar", "closed_reason": "Duplicate", "title": "Any possibility to centre the title within a toolbar?", "body": "<p>I'm developing a little Android app written in Kotlin with the use of Jetpack.\nI'm facing a little issue, I wanted to center my toolbar title but I didn't manage to figure out how. I saw that some recommend using a custom toolbar layout, but doing that isn't possible for me as I want my first page to be named \"Grateful\", and the second page named \"Details\" without having any code like</p>\n\n<pre><code>toolbar.setTitle(\"Details\")\n</code></pre>\n\n<p>I already tried to set layout_gravity and gravity and all those things on the toolbar layout or even the appbar. But without any success.</p>\n\n<p>Here is my actual layout for my main_Activity</p>\n\n<pre><code>&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;com.google.android.material.appbar.AppBarLayout\n        android:id=\"@+id/app_bar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:theme=\"@style/AppTheme.AppBarOverlay\"\n        app:elevation=\"0dp\"&gt;\n\n        &lt;androidx.appcompat.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?attr/actionBarSize\"\n            android:background=\"@color/primary\"\n            android:theme=\"@style/AppTheme.PopupOverlay\"\n            app:layout_scrollFlags=\"scroll|snap\"\n            app:titleTextAppearance=\"@style/TextAppearanceH5\"/&gt;\n\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n    &lt;fragment\n        android:id=\"@+id/main_notes_nav_fragment\"\n        android:name=\"androidx.navigation.fragment.NavHostFragment\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:defaultNavHost=\"true\"\n        app:navGraph=\"@navigation/main_nav_notes\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I'm using the Navigation library shipped by Google with their Jetpack Dev kit.</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 249, "user_id": 10484014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd4bd703ba8834799a0e0024823ff6b5?s=128&d=identicon&r=PG&f=1", "display_name": "kuber singh", "link": "https://stackoverflow.com/users/10484014/kuber-singh"}, "edited": false, "score": 0, "creation_date": 1543409273, "post_id": 53519718, "comment_id": 93908199, "body": "not sure, but try this one.. this@ActivityName.fragment..."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1543409680, "post_id": 53519718, "comment_id": 93908457, "body": "Simply get rid of <code>also</code> and put the body of the lambda directly into the method where this code is contained."}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 2318948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ef4105f7e05ed49002bb617e1e01d9?s=128&d=identicon&r=PG", "display_name": "Deepan", "link": "https://stackoverflow.com/users/2318948/deepan"}, "is_accepted": false, "score": 0, "last_activity_date": 1543410352, "creation_date": 1543410352, "answer_id": 53520169, "question_id": 53519718, "link": "https://stackoverflow.com/questions/53519718/access-val-in-inner-method/53520169#53520169", "title": "Access Val in inner method", "body": "<p>fragment is used within its assignment statement.\ni.e. fragment does not exist until the assignment is over.\nsplit the declaration/assignment and usage separately, that should fix the code.</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 5057663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4585151d7ef8125ff49cd2d927d8e3?s=128&d=identicon&r=PG&f=1", "display_name": "naqi", "link": "https://stackoverflow.com/users/5057663/naqi"}, "is_accepted": false, "score": 0, "last_activity_date": 1543410730, "creation_date": 1543410730, "answer_id": 53520284, "question_id": 53519718, "link": "https://stackoverflow.com/questions/53519718/access-val-in-inner-method/53520284#53520284", "title": "Access Val in inner method", "body": "<p>Make a fragment object a class variable like this</p>\n\n<pre><code>private val fragment = FragmenLogin()\n</code></pre>\n\n<p>or use lateinit initialization </p>\n\n<pre><code>private lateinit var fragment: FragmentLogin\n</code></pre>\n\n<p>then you can use fragment object anywhere in the class (after it get initialized) </p>\n\n<p>for more detail on lateinit see <a href=\"https://stackoverflow.com/a/36623703/5057663\">https://stackoverflow.com/a/36623703/5057663</a></p>\n"}, {"tags": [], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "is_accepted": true, "score": 0, "last_activity_date": 1543500287, "creation_date": 1543500287, "answer_id": 53540797, "question_id": 53519718, "link": "https://stackoverflow.com/questions/53519718/access-val-in-inner-method/53540797#53540797", "title": "Access Val in inner method", "body": "<p>Instead of : </p>\n\n<pre><code>val fragment = supportFragmentManager.findFragmentById(R.id.fragment_container)\n                as SearchFragment? ?: searchFragment.also {\n            addFragmentToActivity(it, R.id.fragment_container)\n            ...\n}\n</code></pre>\n\n<p>I should use :</p>\n\n<pre><code>val fragment = supportFragmentManager.findFragmentById(R.id.fragment_container)\n                    as SearchFragment? ?: searchFragment.also {\n                addFragmentToActivity(it, R.id.fragment_container)\n             }\n    ... // Continue of code\n</code></pre>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53540797, "answer_count": 3, "score": 0, "last_activity_date": 1543500287, "creation_date": 1543408814, "question_id": 53519718, "link": "https://stackoverflow.com/questions/53519718/access-val-in-inner-method", "title": "Access Val in inner method", "body": "<p>I have following code : </p>\n\n<pre><code>val fragment = supportFragmentManager.findFragmentById(R.id.fragment_container)\n                as SearchFragment? ?: searchFragment.also {\n            addFragmentToActivity(it, R.id.fragment_container)\n\n            search_view.setOnQueryTextListener(object : android.widget.SearchView.OnQueryTextListener {\n                override fun onQueryTextSubmit(query: String): Boolean {\n                    fragment.searchViewClicked(query)\n                    return true\n                }\n\n                override fun onQueryTextChange(query: String): Boolean {\n                    if (query.isEmpty()) {\n                        fragment.clearList()\n                    } else {\n                        fragment.searchViewClicked(query)\n                    }\n                    return true\n                }\n            })\n</code></pre>\n\n<p>As you see I want to access <code>fragment</code> variable in <code>onQueryTextSubmit</code> and <code>onQueryTextChange</code>. But with current code I get <code>unresolved reference</code> error on fragment.</p>\n\n<p>Could you let me know how should I fix the code? </p>\n"}, {"tags": ["android", "google-maps", "kotlin", "google-directions-api"], "answers": [{"tags": [], "owner": {"reputation": 11935, "user_id": 6950238, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JysE9.jpg?s=128&g=1", "display_name": "Andrii Omelchenko", "link": "https://stackoverflow.com/users/6950238/andrii-omelchenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1545385749, "last_edit_date": 1545385749, "creation_date": 1543437328, "answer_id": 53527669, "question_id": 53519420, "link": "https://stackoverflow.com/questions/53519420/how-to-plot-current-traffic-data-to-google-map-on-specific-poly-line-that-have-b/53527669#53527669", "title": "How to plot current traffic data to google map on specific poly line that have been drawn by Google Direction API", "body": "<p>There is no reasonably easy and convenient way to get the Google Maps traffic data along particular poly line only. But, if you get Directions API <a href=\"https://developers.google.com/maps/documentation/directions/start#Legs\" rel=\"nofollow noreferrer\">JSON response</a> then you can parse <code>\"legs\"</code> and <code>\"steps\"</code> tags:</p>\n\n<pre><code> ... \n \"legs\" : [\n        {\n           \"distance\" : {\n              \"text\" : \"35.9 mi\",\n              \"value\" : 57824\n           },\n           \"duration\" : {\n              \"text\" : \"51 mins\",\n              \"value\" : 3062\n           },\n  ...\n       \"steps\" : [\n              {\n                 \"distance\" : {\n                    \"text\" : \"67 m\",\n                    \"value\" : 67\n                 },\n                 \"duration\" : {\n                    \"text\" : \"1 min\",\n                    \"value\" : 8\n                 },\n  ...\n</code></pre>\n\n<p>and get <code>\"distance\"</code> and <code>\"duration\"</code> values from them. Then you can calculate <code>speed = distance / duration</code> and interpret leg/step <code>speed</code> as traffic indicator.</p>\n\n<p>Also take a look at <a href=\"https://stackoverflow.com/q/4600656/6950238\">this</a> question of <a href=\"https://stackoverflow.com/users/116858/tejaswi-yerukalapudi\">Tejaswi Yerukalapudi</a> and answers.</p>\n\n<p>Also check <a href=\"https://cloud.google.com/maps-platform/terms/\" rel=\"nofollow noreferrer\">Google Maps Platform Terms of Service</a>.</p>\n"}], "owner": {"reputation": 353, "user_id": 6394263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3czB9.jpg?s=128&g=1", "display_name": "Abhishek Chaniyara", "link": "https://stackoverflow.com/users/6394263/abhishek-chaniyara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1575541585, "creation_date": 1543407833, "last_edit_date": 1575541585, "question_id": 53519420, "link": "https://stackoverflow.com/questions/53519420/how-to-plot-current-traffic-data-to-google-map-on-specific-poly-line-that-have-b", "title": "How to plot current traffic data to google map on specific poly line that have been drawn by Google Direction API", "body": "<p>I am making an app in Android with some function same to Google Map find direction to specific location.</p>\n\n<p>I had draw route(polyline) from one place to another place received by google direction API. Here my question is that I want to put current traffic data on that particular poly line only.</p>\n\n<p>If we are finding direction from web than we are not getting any traffic data but if we are finding it from Google Map App from mobile then we can see it.</p>\n\n<p>Does anyone know how any solution? Please give me a clue!</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 480, "user_id": 8793928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e4a87116ee745bf8fa001a6c4bf2523?s=128&d=identicon&r=PG&f=1", "display_name": "Android Geek", "link": "https://stackoverflow.com/users/8793928/android-geek"}, "is_accepted": false, "score": 0, "last_activity_date": 1543408686, "creation_date": 1543408686, "answer_id": 53519679, "question_id": 53519055, "link": "https://stackoverflow.com/questions/53519055/android-studio-user-login/53519679#53519679", "title": "Android studio - user login", "body": "<p>Your code execution might be redirecting to the onFailure part of retrofit code..</p>\n\n<p>Put Log or Toast in onFailure section and run or debug!</p>\n"}], "owner": {"reputation": 11, "user_id": 8886746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21df0d7ffe43367c5c730fce4698c8c3?s=128&d=identicon&r=PG&f=1", "display_name": "podlas15", "link": "https://stackoverflow.com/users/8886746/podlas15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543410289, "creation_date": 1543406567, "last_edit_date": 1543410289, "question_id": 53519055, "link": "https://stackoverflow.com/questions/53519055/android-studio-user-login", "title": "Android studio - user login", "body": "<p>I have one problem on login user in library retrofit. \nI write an app in kotlin. When I clicked button login, make nothing. I don't know How to make a problem. </p>\n\n<pre><code> buttonLogin.setOnClickListener{\n                //val intent = Intent(this, MainActivity::class.java);\n                //startActivity(intent);\n                val email = editTextLogin.text.toString().trim();\n                val password = editTextPassword.text.toString().trim();\n\n\n                val call : retrofit2.Call&lt;User&gt; = RetrofitClient.create().login(email, password)\n                call.enqueue(object : retrofit2.Callback&lt;User&gt;{\n                    override fun onFailure(call: retrofit2.Call&lt;User&gt;?, t:Throwable?){\n\n                    }\n\n                    override fun onResponse(call:retrofit2.Call&lt;User&gt;?, response: Response&lt;User&gt;){\n\n\n                        if(response.isSuccessful){\n\n                            val user: User = response.body()!!\n\n                            if(user.success.equals(\"true\")){\n                                Log.d(\"\", \"onResponse()\");\n\n\n                }\n                                else {\n                                    Log.d(\"\", \"onFail()\");\n                                }\n                            }\n                      }\n                    })\n</code></pre>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<pre><code>@FormUrlEncoded\n        @POST(\"/login\")\n        fun login(@Field(\"email\") email: String,\n                  @Field(\"password\") password: String)\n                : retrofit2.Call&lt;User&gt;;\n        //fun  login(@Query(\"login\")login: String, @Query(\"password\")password:String) : retrofit2.Call&lt;User&gt;\n</code></pre>\n\n<p>`</p>\n\n<blockquote>\n  <p>Blockquote</p>\n</blockquote>\n\n<pre><code>class User {\n    var success : String = \"\";\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1543409575, "creation_date": 1543409575, "answer_id": 53519943, "question_id": 53518655, "link": "https://stackoverflow.com/questions/53518655/strange-kotlin-null-safe-behavior/53519943#53519943", "title": "Strange Kotlin null-safe behavior", "body": "<p>The error in your reasoning is that you're analyzing the behavior of Kotlin code by looking at the decompiler output and not at the bytecode. The Kotlin compiler generates patterns of bytecode which are not used by javac, so the decompiler (which was designed to decompile javac output) can only provide an approximate representation of the actual logic.</p>\n\n<p>If you look at the actual bytecode, it looks like this:</p>\n\n<pre><code>ALOAD 0\nGETFIELD raceLoadJob : LRaceLoadJob;\nDUP\nIFNULL L1\nASTORE 2\n</code></pre>\n\n<p>It shows that the value being checked for null is exactly the same that is being used in subsequent computations.</p>\n"}], "owner": {"reputation": 2094, "user_id": 3858030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/213edfb3b091fb865caa70bde8c43763?s=128&d=identicon&r=PG", "display_name": "Ufkoku", "link": "https://stackoverflow.com/users/3858030/ufkoku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 53519943, "answer_count": 1, "score": 3, "last_activity_date": 1543409575, "creation_date": 1543405361, "question_id": 53518655, "link": "https://stackoverflow.com/questions/53518655/strange-kotlin-null-safe-behavior", "title": "Strange Kotlin null-safe behavior", "body": "<p>If global property is defined as <code>private var raceLoadJob: Job? = null</code> then Kotlin will ask you to do something like this in your method</p>\n\n<pre><code>if (raceLoadJob != null){\n    if (raceLoadJob!!.isActive) return // null assertation\n}\n</code></pre>\n\n<p>Kotlin will ask for assertation, because raceLoadJob value can be changed. The first thing I thought about is multi-threading.</p>\n\n<p>So you can change code to</p>\n\n<pre><code>raceLoadJob?.let {\n    if (it.isActive) return\n}\n</code></pre>\n\n<p>But if you decompile this part of code you will see</p>\n\n<pre><code>Job var10000 = this.raceLoadJob;\nif (this.raceLoadJob != null) {\n   Job var1 = var10000;\n   if (var1.isActive()) {\n      return;\n   }\n}\n</code></pre>\n\n<p>You can see, that condition is <code>this.raceLoadJob != null</code>, but not <code>var10000 != null</code>. It means that in theory this code can fail because of <code>raceLoadJob</code> value is assigned, but var10000 is <code>null</code>.</p>\n\n<p>Is this an issue or I have an error in my reasoning?</p>\n"}, {"tags": ["kotlin", "properties", "getter", "upcasting"], "comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543406952, "post_id": 53518583, "comment_id": 93906833, "body": "Inside the class you are not working with the property. You are using field. I mean, you are not calling <code>getSettings().setValue(...)</code> which will not compile IMO, but you are calling <code>settings.setValue(...)</code> you can do this, because <code>settings</code> is of type <code>MutableLiveData</code> whereas <code>getSettings()</code> is not. I have the same use-case as you with <code>LiveData</code> and I am using the combination of <code>_private</code> and <code>public</code> variables, as you suggest in your post."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 1, "creation_date": 1543407926, "post_id": 53518583, "comment_id": 93907408, "body": "Sure, I&#39;m just talking about convenience if I could, for example, write something like <code>val someObject = Implementation()</code> and <code>get(): SomeInterface</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543406033, "post_id": 53518741, "comment_id": 93906279, "body": "Sorry, I&#39;ve updated the question: it is not what I want, because inside the <code>Test</code> class I cannot treat <code>member</code> as a <code>Implementation</code> type"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543407307, "post_id": 53518741, "comment_id": 93907055, "body": "It will sure work with early binding and covariance trick, but the question is in upcasting without inheritance and abstract method declaration. But anyway, you have confirmed that it is impossible. Thank you!"}], "tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 2, "last_activity_date": 1543406795, "last_edit_date": 1543406795, "creation_date": 1543405624, "answer_id": 53518741, "question_id": 53518583, "link": "https://stackoverflow.com/questions/53518583/is-it-possible-to-change-kotlins-property-getter-type/53518741#53518741", "title": "Is it possible to change Kotlin&#39;s property getter type?", "body": "<p>I think (if I've understood your question correctly) that explicitly declaring the type of <code>member</code> will do what you want, e.g.</p>\n\n<pre><code>interface SomeInterface\n\nclass Implementation : SomeInterface\n\nclass Test {\n    val member: SomeInterface = Implementation()\n}\n</code></pre>\n\n<p><strong>UPDATE</strong>: after question updated to clarify that in the Test class <code>member</code> should be of type <code>Implementation</code>, not <code>SomeInterface</code>...</p>\n\n<p>I don't think what you're trying to do can be done without having a member variable, as you suggest in your question.  However, if you have a base class which defines what your <code>member</code> should be, you <strong>can</strong> kind of do what you want:</p>\n\n<pre><code>interface SomeInterface\n\nclass Implementation : SomeInterface\n\nabstract class Super {\n    abstract val member: SomeInterface\n}\n\nclass Test : Super() {\n    override val member = Implementation()  \n    // declared as Implementation, but does correctly implement superclass which wants this to be a SomeInterface.\n    // In this class, member is of type Implementation.\n}\n\nfun test() {\n    val test1 = Test()\n    val member1 = test1.member  // member1 is an Implementation object\n\n    val test2: Super = Test()\n    val member2 = test2.member  // member2 is a SomeInterface object\n}\n</code></pre>\n\n<p>What's shown above is that you can have a <code>member</code> which is available in your class as an <code>Implementation</code>, but is visible outside the class as a <code>SomeInterface</code>. But only if, when you're working with it outside the class, you're working with it as an instance of the superclass which defines <code>member</code> as being of type <code>SomeInterface</code>.</p>\n"}], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 53518741, "answer_count": 1, "score": 1, "last_activity_date": 1543407831, "creation_date": 1543405127, "last_edit_date": 1543407831, "question_id": 53518583, "link": "https://stackoverflow.com/questions/53518583/is-it-possible-to-change-kotlins-property-getter-type", "title": "Is it possible to change Kotlin&#39;s property getter type?", "body": "<p>Is it possible to upcast properties getter type?</p>\n\n<p>For example, inside class declaration I have <code>val member = Implementation()</code>, but I want for the <strong>public</strong> getter to return a reference typed with <code>SomeInterface</code> assuming that <code>Implementation</code> is a subtype of <code>SomeInterface</code>, whereas inside the class declaration this type will be used as a <code>Implementation</code> instance.</p>\n\n<p>Here is a complete example in Java to give a clear picture:</p>\n\n<pre><code>public class MyViewModel extends ViewModel {\n    private final MutableLiveData&lt;Settings&gt; settings = new MutableLiveData&lt;&gt;();\n\n    public LiveData&lt;Settings&gt; getSettings() {\n        return settings;\n    }\n\n    public void updateSettings() {\n        settings.setValue(new Settings());\n    }\n}\n</code></pre>\n\n<p>Here this \"property\" is visible outside as a <code>LiveData</code> (supertype of <code>MutableLiveData</code>), but inside the class it is possible to use it as <code>MutableLiveData</code>.</p>\n\n<p>I would say it sounds natural, but seems that Kotlin doesn't allow this. Am I missing something? Or creating <code>private val _private = Implementation()</code> and <code>val _public: SomeInterface = _private</code> or implementing a custom method with getter semantics and modified name having <code>SomeInterface</code> return type is the only way to achieve this?</p>\n"}, {"tags": ["android", "kotlin", "android-datepicker"], "comments": [{"owner": {"reputation": 591, "user_id": 10340976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65b981a1f3c1ad89b5992e8986a5ae09?s=128&d=identicon&r=PG&f=1", "display_name": "Raza", "link": "https://stackoverflow.com/users/10340976/raza"}, "edited": false, "score": 0, "creation_date": 1543405258, "post_id": 53518249, "comment_id": 93905802, "body": "<a href=\"https://github.com/wdullaer/MaterialDateTimePicker\" rel=\"nofollow noreferrer\">github.com/wdullaer/MaterialDateTimePicker</a> this library has the view as you require"}, {"owner": {"reputation": 370, "user_id": 6427740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49b7G.jpg?s=128&g=1", "display_name": "Szuler", "link": "https://stackoverflow.com/users/6427740/szuler"}, "reply_to_user": {"reputation": 591, "user_id": 10340976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65b981a1f3c1ad89b5992e8986a5ae09?s=128&d=identicon&r=PG&f=1", "display_name": "Raza", "link": "https://stackoverflow.com/users/10340976/raza"}, "edited": false, "score": 0, "creation_date": 1543406481, "post_id": 53518249, "comment_id": 93906524, "body": "I am not sure, but i think it is possible to achieve without external library"}, {"owner": {"reputation": 591, "user_id": 10340976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65b981a1f3c1ad89b5992e8986a5ae09?s=128&d=identicon&r=PG&f=1", "display_name": "Raza", "link": "https://stackoverflow.com/users/10340976/raza"}, "edited": false, "score": 0, "creation_date": 1543406610, "post_id": 53518249, "comment_id": 93906615, "body": "okay , let me check again"}], "answers": [{"tags": [], "owner": {"reputation": 352, "user_id": 9981067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVl3M.png?s=128&g=1", "display_name": "fatemeh fallahi arezoudar", "link": "https://stackoverflow.com/users/9981067/fatemeh-fallahi-arezoudar"}, "is_accepted": false, "score": -1, "last_activity_date": 1543407809, "creation_date": 1543407809, "answer_id": 53519409, "question_id": 53518249, "link": "https://stackoverflow.com/questions/53518249/change-datepickerdialog-buttons-to-text/53519409#53519409", "title": "Change DatePickerDialog buttons to text", "body": "<p>as listed in this <a href=\"https://android--code.blogspot.com/2015/08/android-datepickerdialog-theme.html\" rel=\"nofollow noreferrer\">link</a>\nyou can use this theme </p>\n\n<pre><code>DatePickerDialog dpd = new DatePickerDialog(getActivity(),\n                    AlertDialog.THEME_DEVICE_DEFAULT_LIGHT,this,year,month,day); \n</code></pre>\n\n<p>to achieve what you want </p>\n"}, {"tags": [], "owner": {"reputation": 370, "user_id": 6427740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49b7G.jpg?s=128&g=1", "display_name": "Szuler", "link": "https://stackoverflow.com/users/6427740/szuler"}, "is_accepted": false, "score": 18, "last_activity_date": 1543498170, "creation_date": 1543498170, "answer_id": 53540167, "question_id": 53518249, "link": "https://stackoverflow.com/questions/53518249/change-datepickerdialog-buttons-to-text/53540167#53540167", "title": "Change DatePickerDialog buttons to text", "body": "<p>So i finally found the solution. I added extra fields in <code>MyDatePickerDialogTheme</code> and extra style for buttons used in <code>DatePicker</code>. Solution looks like that:</p>\n\n<pre><code>&lt;style name=\"MyDatePickerDialogTheme\" parent=\"Theme.AppCompat.Light.Dialog\"&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"android:buttonBarPositiveButtonStyle\"&gt;@style/DatePickerButtonStyle&lt;/item&gt;\n    &lt;item name=\"android:buttonBarNegativeButtonStyle\"&gt;@style/DatePickerButtonStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"DatePickerButtonStyle\" parent=\"Base.Widget.AppCompat.Button.Borderless\"&gt;\n    &lt;item name=\"android:textColor\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"android:backgroundTint\"&gt;@color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 3894304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G3i2N.jpg?s=128&g=1", "display_name": "Marcel Hofgesang", "link": "https://stackoverflow.com/users/3894304/marcel-hofgesang"}, "is_accepted": false, "score": 2, "last_activity_date": 1588775367, "creation_date": 1588775367, "answer_id": 61637783, "question_id": 53518249, "link": "https://stackoverflow.com/questions/53518249/change-datepickerdialog-buttons-to-text/61637783#61637783", "title": "Change DatePickerDialog buttons to text", "body": "<p>When you're working with MaterialDesign you could use this.</p>\n\n<pre><code>final SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd.MM.yyyy\");\nfinal Calendar calendar = Calendar.getInstance(parent.getResources().getConfiguration().locale);\n\nDatePickerDialog datePickerDialog = new DatePickerDialog(parent.getContext(), \n(view, year, monthOfYear, dayOfMonth) -&gt; {\n     Calendar selectedDate = Calendar.getInstance();\n     selectedDate.set(year, monthOfYear, dayOfMonth);\n     }, \ncalendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH));\ndatePicker.show();\n</code></pre>\n\n<p>styles.xml: </p>\n\n<pre><code>&lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light.NoActionBar\"&gt;\n    &lt;item name=\"android:datePickerStyle\"&gt;@style/DatePicker&lt;/item&gt;\n    &lt;item name=\"android:datePickerDialogTheme\"&gt;@style/DatePicker&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"DatePicker\" parent=\"ThemeOverlay.MaterialComponents.Dialog\"&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/blue&lt;/item&gt;\n    &lt;item name=\"android:datePickerStyle\"&gt;@style/DatePickerStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"DatePickerStyle\" parent=\"@android:style/Widget.Material.Light.DatePicker\"&gt;\n    &lt;item name=\"android:headerBackground\"&gt;@color/darkblue&lt;/item&gt;\n    &lt;item name=\"android:yearListSelectorColor\"&gt;@color/darkgray&lt;/item&gt;\n    &lt;item name=\"android:datePickerMode\"&gt;calendar&lt;/item&gt;\n    &lt;item name=\"android:minDate\"&gt;01/01/2000&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>This style will lead to have no outlined or filled box buttons. Your cancel and confirm buttons will appear in colorAccents color.</p>\n"}, {"tags": [], "owner": {"reputation": 555, "user_id": 3566013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VFqQr.jpg?s=128&g=1", "display_name": "qwertyfinger", "link": "https://stackoverflow.com/users/3566013/qwertyfinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1615205178, "creation_date": 1615205178, "answer_id": 66529573, "question_id": 53518249, "link": "https://stackoverflow.com/questions/53518249/change-datepickerdialog-buttons-to-text/66529573#66529573", "title": "Change DatePickerDialog buttons to text", "body": "<p>The current most voted answer changes the default <code>minHeight</code> and <code>minWidth</code> of buttons compared to the default date picker.<br />\nTo correct this I had to specify these attributes in the custom style.<br />\nI was able to find the standard attribute for <code>minWidth</code>, but default <code>minHeight</code> has <code>54dp</code> value in the runtime and I couldn't find this value anywhere among standard Android values.<br />\nThis example uses Material themes directly.</p>\n<pre><code>&lt;style name=&quot;Theme.AppTheme&quot; parent=&quot;Theme.MaterialComponents.DayNight.NoActionBar&quot;&gt;\n  .....\n  &lt;item name=&quot;android:datePickerDialogTheme&quot;&gt;@style/DatePickerDialogTheme&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=&quot;DatePickerDialogTheme&quot; parent=&quot;android:Theme.Material.Light.Dialog&quot;&gt;\n  &lt;item name=&quot;android:colorAccent&quot;&gt;@color/colorPrimary&lt;item&gt;\n  &lt;item name=&quot;android:buttonBarPositiveButtonStyle&quot;&gt;@style/DatePickerButtonStyle&lt;/item&gt;\n  &lt;item name=&quot;android:buttonBarNegativeButtonStyle&quot;&gt;@style/DatePickerButtonStyle&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=&quot;DatePickerButtonStyle&quot; parent=&quot;android:Widget.Material.Button.Borderless&quot;&gt;\n  &lt;item name=&quot;android:minHeight&quot;&gt;54dp&lt;/item&gt;\n  &lt;item name=&quot;android:minWidth&quot;&gt;@dimen/mtrl_btn_dialog_btn_min_width&lt;/item&gt;\n  &lt;item name=&quot;android:textColor&quot;&gt;@color/colorPrimary&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 6427740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49b7G.jpg?s=128&g=1", "display_name": "Szuler", "link": "https://stackoverflow.com/users/6427740/szuler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3356, "favorite_count": 1, "answer_count": 4, "score": 9, "last_activity_date": 1615205178, "creation_date": 1543403981, "last_edit_date": 1543404486, "question_id": 53518249, "link": "https://stackoverflow.com/questions/53518249/change-datepickerdialog-buttons-to-text", "title": "Change DatePickerDialog buttons to text", "body": "<p>Hi i want to adjust my <code>DatePickerDialog</code>, and instead of buttons at the bottom (displayed on image below) i just want to make blue text.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OlYXv.png\" rel=\"noreferrer\">\n<img src=\"https://i.stack.imgur.com/OlYXv.png\" width=\"250\"/></a></p>\n\n<p>Here is how i created DatePickerDialog</p>\n\n<pre><code>private val birthdayDate by lazy {\n    Calendar.getInstance()\n}\nprivate val datePicker by lazy {\n    DatePickerDialog(\n        context,\n        R.style.MyDatePickerDialogTheme,\n        this,\n        birthdayDate.get(Calendar.YEAR),\n        birthdayDate.get(Calendar.MONTH),\n        birthdayDate.get(Calendar.DAY_OF_MONTH)\n    ).also {\n        it.datePicker.maxDate = Calendar.getInstance().timeInMillis\n    }\n}\n</code></pre>\n\n<p>Then i just call show method to display the dialog. I think problem is somewhere in my <code>style</code>, but i can not find where. Any help will be highly appreciated.</p>\n\n<pre><code>&lt;style name=\"MyDatePickerDialogTheme\" parent=\"Theme.AppCompat.Light.Dialog\"&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/colorPrimary&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1543404615, "post_id": 53517497, "comment_id": 93905443, "body": "Use <code>suspendCancellableCoroutine</code> and find a way to propagate the cancellation to <code>cont.cancel()</code>."}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1543415316, "post_id": 53517497, "comment_id": 93912109, "body": "Ty for the pointer. <code>cont.invokeOnCancellation</code> from <code>suspendCancellableCoroutine</code> does the job"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5938671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TdQbk.jpg?s=128&g=1", "display_name": "Alexander L.", "link": "https://stackoverflow.com/users/5938671/alexander-l"}, "edited": false, "score": 0, "creation_date": 1618235616, "post_id": 53520496, "comment_id": 118533861, "body": "Is there a way to make it with Flow?"}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "reply_to_user": {"reputation": 85, "user_id": 5938671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TdQbk.jpg?s=128&g=1", "display_name": "Alexander L.", "link": "https://stackoverflow.com/users/5938671/alexander-l"}, "edited": false, "score": 0, "creation_date": 1618236021, "post_id": 53520496, "comment_id": 118534085, "body": "If I read <a href=\"https://kotlinlang.org/docs/flow.html#flows\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/flow.html#flows</a> correctly you can unregister in the <code>collect</code> function of the flow. But this might leak the wifi reciever so you should probably use <code>try&#47;catch</code> <a href=\"https://kotlinlang.org/docs/flow.html#flow-completion\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/flow.html#flow-completion</a>"}, {"owner": {"reputation": 85, "user_id": 5938671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TdQbk.jpg?s=128&g=1", "display_name": "Alexander L.", "link": "https://stackoverflow.com/users/5938671/alexander-l"}, "edited": false, "score": 0, "creation_date": 1618305152, "post_id": 53520496, "comment_id": 118555184, "body": "I&#39;ve created another question to decribe better <a href=\"https://stackoverflow.com/questions/67071830/wrap-broadcast-receiver-into-flow-coroutine\" title=\"wrap broadcast receiver into flow coroutine\">stackoverflow.com/questions/67071830/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": true, "score": 8, "last_activity_date": 1557223799, "last_edit_date": 1557223799, "creation_date": 1543411485, "answer_id": 53520496, "question_id": 53517497, "link": "https://stackoverflow.com/questions/53517497/coroutine-unregister-reciever-on-cancel/53520496#53520496", "title": "Coroutine unregister reciever on cancel", "body": "<p>The answer was indeed to use <code>suspendCancellableCoroutine</code> and define <code>cont.invokeOnCancellation</code> as written below:</p>\n\n<pre><code>suspend fun getCurrentScanResult(): List&lt;ScanResult&gt; =\n        suspendCancellableCoroutine { cont -&gt;\n            //define broadcast reciever\n            val wifiScanReceiver = object : BroadcastReceiver() {\n                override fun onReceive(c: Context, intent: Intent) {\n                    if (intent.action?.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION) == true) {\n                        context.unregisterReceiver(this)\n                        cont.resume(wifiManager.scanResults)\n                    }\n                }\n            }\n            //setup cancellation action on the continuation\n            cont.invokeOnCancellation {\n                context.unregisterReceiver(wifiScanReceiver)\n            }\n            //register broadcast reciever\n            context.registerReceiver(wifiScanReceiver, IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION))\n            //kick off scanning to eventually receive the broadcast\n            wifiManager.startScan()\n        }\n</code></pre>\n"}], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "accepted_answer_id": 53520496, "answer_count": 1, "score": 1, "last_activity_date": 1557223799, "creation_date": 1543401602, "last_edit_date": 1543416392, "question_id": 53517497, "link": "https://stackoverflow.com/questions/53517497/coroutine-unregister-reciever-on-cancel", "title": "Coroutine unregister reciever on cancel", "body": "<p>My coroutine leaks a broadcast receiver, when the service is stopped. This is because the service stops, before the callback is finished. How can I cancel coroutine in a way that lets me unregister the reciever?</p>\n\n<p>The <code>Service</code> works like this:</p>\n\n<pre><code>class DataCollectorService : Service(){\n    var job : Job? = null\n\n    override fun onStartCommand(...){\n        job = GlobalScope.launch {\n            val location = async { wifiScanner.getCurrentLocation() }\n            //other asynchronous jobs\n            location.await() \n            //do something with location\n        }\n    }\n\n    override fun onDestroy(){\n         job?.cancel()\n    }\n}\n</code></pre>\n\n<p>Here is the class where the <code>BroadcastReciever</code> is not unregistered properly in  <code>onDestroy</code>:</p>\n\n<pre><code>class WifiScanner(val context: ContextWrapper) {\n    val wifiManager: WifiManager\n\n    init {\n        wifiManager = context.baseContext.getSystemService(Context.WIFI_SERVICE) as WifiManager\n    }\n\n    suspend fun getCurrentScanResult(): List&lt;ScanResult&gt; =\n        suspendCoroutine { cont -&gt;\n            val wifiScanReceiver = object : BroadcastReceiver() {\n                override fun onReceive(c: Context, intent: Intent) {\n                    if (intent.action?.equals(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION) == true) {\n                        context.unregisterReceiver(this)\n                        cont.resume(wifiManager.scanResults)\n                    }\n                }\n            }\n            context.registerReceiver(wifiScanReceiver, IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION))\n            wifiManager.startScan()\n        }\n}\n</code></pre>\n\n<p>Example stacktrace: </p>\n\n<pre><code>de.leo.smartTrigger E/ActivityThread: Service de.leo.smartTrigger.datacollector.datacollection.DataCollectorService has leaked IntentReceiver de.leo.smartTrigger.datacollector.datacollection.sensors.WifiScanner$getCurrentScanResult$$inlined$suspendCoroutine$lambda$1@6febc2f that was originally registered here. Are you missing a call to unregisterReceiver()?\n        android.app.IntentReceiverLeaked: Service de.leo.smartTrigger.datacollector.datacollection.DataCollectorService has leaked IntentReceiver de.leo.smartTrigger.datacollector.datacollection.sensors.WifiScanner$getCurrentScanResult$$inlined$suspendCoroutine$lambda$1@6febc2f that was originally registered here. Are you missing a call to unregisterReceiver()?\n            at android.app.LoadedApk$ReceiverDispatcher.&lt;init&gt;(LoadedApk.java:1355)\n            at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:1120)\n            at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1428)\n            at android.app.ContextImpl.registerReceiver(ContextImpl.java:1401)\n            at android.app.ContextImpl.registerReceiver(ContextImpl.java:1389)\n            at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:622)\n            at de.leo.smartTrigger.datacollector.datacollection.sensors.WifiScanner.getCurrentScanResult(WifiScanner.kt:35)\n            at de.leo.smartTrigger.datacollector.datacollection.DataCollectorService.getWifi(DataCollectorService.kt:219)\n            at de.leo.smartTrigger.datacollector.datacollection.DataCollectorService$uploadDataSet$1$wifi$1.invokeSuspend(DataCollectorService.kt:273)\n            at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:32)\n            at kotlinx.coroutines.DispatchedTask$DefaultImpls.run(Dispatched.kt:221)\n            at kotlinx.coroutines.DispatchedContinuation.run(Dispatched.kt:67)\n            at ...\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 2, "last_activity_date": 1543401153, "creation_date": 1543401153, "answer_id": 53517360, "question_id": 53517169, "link": "https://stackoverflow.com/questions/53517169/mocking-framework-in-kotlin/53517360#53517360", "title": "Mocking framework in Kotlin", "body": "<p><a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">MockK</a> introduces itself as a \"mocking library for Kotlin\".</p>\n\n<p><a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a> states \"Tasty mocking framework for unit tests in Java\" (and as a side-note: Mockito existed already before Kotlin).</p>\n\n<p>So, already on the first page you have the most important difference. That being said, if you want to use mocks and you are using Kotlin, I would suggest you look up MockK... if the issues there do not affect you, you are relatively safe. If you are familiar with Mockito and it isn't too cumbersome for you to use with Kotlin (e.g. try to use <code>when</code>), then that might be ok too.</p>\n\n<p>(Finally... I don't use mocks anymore... most of the time I find too many things are mocked, that shouldn't even be mocked at all... but those are just my 2 cents here)</p>\n"}], "owner": {"reputation": 509, "user_id": 7125886, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-vWvMnOGg0wQ/AAAAAAAAAAI/AAAAAAAAADg/4UvzmeD5J3M/photo.jpg?sz=128", "display_name": "Jelle", "link": "https://stackoverflow.com/users/7125886/jelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "closed_date": 1543535566, "answer_count": 1, "score": 0, "last_activity_date": 1543401153, "creation_date": 1543400557, "question_id": 53517169, "link": "https://stackoverflow.com/questions/53517169/mocking-framework-in-kotlin", "closed_reason": "Opinion-based", "title": "Mocking framework in Kotlin", "body": "<p>There are enough posts about how to use MockK and Mockito, but what's the import difference between them, what's your preference when using a Mocking framework in Kotlin and why?</p>\n"}, {"tags": ["android", "kotlin", "android-sensors"], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543399642, "creation_date": 1543399642, "question_id": 53516861, "link": "https://stackoverflow.com/questions/53516861/rotation-vector-sensor-keeps-reporting-high-accuracy-even-when-clearly-wrong", "title": "Rotation Vector sensor keeps reporting high accuracy even when clearly wrong", "body": "<p>I'm using a rotation vector sensor like this:</p>\n\n<pre><code>val sensor = sensorManager.getDefaultSensor(TYPE_ROTATION_VECTOR)\n</code></pre>\n\n<p>I register a <code>SensorEventListener</code> on it:</p>\n\n<pre><code>private class OrientationListener : SensorEventListener {\n    private val rotationMatrix = FloatArray(9)\n\n    override fun onSensorChanged(event: SensorEvent) {\n        if (event.sensor.type != TYPE_ROTATION_VECTOR) return\n        SensorManager.getRotationMatrixFromVector(rotationMatrix, event.values)\n        val easting = rotationMatrix[0]\n        val northing = rotationMatrix[3]\n        val azimuth = -atan2(northing, easting)\n        val azimuthAccuracy = event.accuracy\n            debug { \"Azimuth changed to ${azimuth}, accuracy ${azimuthAccuracy}\" }\n        }\n    }\n\n    override fun onAccuracyChanged(sensor: Sensor, accuracy: Int) {\n        if (sensor.type == TYPE_ROTATION_VECTOR) {\n            info { \"Azimuth accuracy changed to $accuracy\" }\n        }\n    }\n}\n</code></pre>\n\n<p>I have never observed this code report anything but <code>SENSOR_STATUS_ACCURACY_HIGH</code>, even at times when it was obviously wrong (inside the car, for example). Yet Google Maps and other applications show low accuracy in these situations.</p>\n\n<p>What are these other apps using to find out the actual accuracy of the compass orientation?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 3, "creation_date": 1543398629, "post_id": 53516345, "comment_id": 93901919, "body": "Can you provide an example, why would you like to have an instance of that Activity? I am asking cause it doesn&#39;t sound like a good practice given that the background Activity can be in an undefined state (might have been destroyed by the system, etc.) and this sounds like a leak."}, {"owner": {"reputation": 1107, "user_id": 4387738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-0UXaIMSWOZw/AAAAAAAAAAI/AAAAAAAAAg8/_GpHXz985U8/photo.jpg?sz=128", "display_name": "A Maharaja", "link": "https://stackoverflow.com/users/4387738/a-maharaja"}, "edited": false, "score": 0, "creation_date": 1543398769, "post_id": 53516345, "comment_id": 93901999, "body": "check this link --&gt; <a href=\"https://medium.com/@peterekeneeze/passing-data-between-activities-2d0ef122f19d\" rel=\"nofollow noreferrer\">medium.com/@peterekeneeze/&hellip;</a>   //created a static variable companion object {  }"}, {"owner": {"reputation": 304, "user_id": 3201926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b748e08b3583b0add9780f5066fbbcc0?s=128&d=identicon&r=PG&f=1", "display_name": "Dogcat", "link": "https://stackoverflow.com/users/3201926/dogcat"}, "reply_to_user": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543399674, "post_id": 53516345, "comment_id": 93902552, "body": "@Maro\u0161\u0160eleng thank you for being the voice of reason here."}], "answers": [{"tags": [], "owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "is_accepted": true, "score": 3, "last_activity_date": 1543398363, "creation_date": 1543398363, "answer_id": 53516483, "question_id": 53516345, "link": "https://stackoverflow.com/questions/53516345/how-to-get-previous-activity-in-android-kotlin/53516483#53516483", "title": "How to get previous activity in android Kotlin", "body": "<blockquote>\n  <p>Now as how can I access the instance of MainActivity inside DepositActivity</p>\n</blockquote>\n\n<p><strong>AFAIK</strong> That is not possible to access instance of one activity in other Activity</p>\n\n<p>if you have this type of requirement than Try to manage using  <a href=\"https://developer.android.com/guide/components/fragments\" rel=\"nofollow noreferrer\"><strong><code>Fragments</code></strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 2058, "user_id": 4310861, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0bcd1009a856e95940622c9f4d38b0e7?s=128&d=identicon&r=PG&f=1", "display_name": "Exigente05", "link": "https://stackoverflow.com/users/4310861/exigente05"}, "is_accepted": false, "score": 0, "last_activity_date": 1543400194, "last_edit_date": 1543400194, "creation_date": 1543399373, "answer_id": 53516772, "question_id": 53516345, "link": "https://stackoverflow.com/questions/53516345/how-to-get-previous-activity-in-android-kotlin/53516772#53516772", "title": "How to get previous activity in android Kotlin", "body": "<p>You need to declare as <strong>companion object</strong> variable and method  in MainActivity. Static type of variables and methods are declared as <strong>companion object</strong> in Kotlin.</p>\n\n<p>Look at below example,</p>\n\n<p>Declare variables and methods in MainActivity,</p>\n\n<pre><code>val value : String = \"hello from Main\"\n\ncompanion object {\n\n    lateinit var instance : MainActivity\n\n    fun getInstancem() : MainActivity {\n\n        return instance\n    }\n}\n</code></pre>\n\n<p>Use this instance and print value in <strong>DepositActivity</strong> like,</p>\n\n<pre><code>Log.d(\"log_in_second_activity\", \"message \" + MainActivity.getInstancem().value)\n</code></pre>\n\n<p>You can see log message.</p>\n\n<p>Hope this will give you hint.</p>\n"}, {"comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543401096, "post_id": 53516882, "comment_id": 93903394, "body": "I&#39;m glad that you put &quot;Not recommended&quot; in bold, but my opinion is that you shouldn&#39;t have posted it at all. Moreover, you should not rely on <code>onDestroy()</code> being called, cause <a href=\"https://developer.android.com/reference/android/app/Activity.html#onDestroy()\" rel=\"nofollow noreferrer\">There are situations where the system will simply kill the activity&#39;s hosting process without calling this method (or any others) in it...</a>, thus <b>StaticFieldLeak</b> lint warning that you suppress."}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1543408996, "last_edit_date": 1543408996, "creation_date": 1543399687, "answer_id": 53516882, "question_id": 53516345, "link": "https://stackoverflow.com/questions/53516345/how-to-get-previous-activity-in-android-kotlin/53516882#53516882", "title": "How to get previous activity in android Kotlin", "body": "<ol>\n<li><p>If you want to retrieve some result from <code>DepositActivity</code> use <code>startActivityForResult(..., DepositActivity::class.java)</code> method. In <code>MainActivity</code> override <code>onActivityResult</code> method:</p>\n\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    // retrieve data using 'data' variable\n}\n</code></pre>\n\n<p>In <code>DepositActivity</code> you need to set data using method <code>setResult()</code> before finishing <code>DepositActivity</code>.</p></li>\n<li><p>If you want to pass some data to <code>DepositActivity</code> use <code>intent</code> for that, for example:</p>\n\n<pre><code>val intent = Intent(this, DepositActivity::class.java)\nintent.putExtra(\"Extra_Name\", /*Some Data*/)\nstartActivity(intent)\n</code></pre></li>\n<li><p><strong>Not Recommended</strong>: Use static reference to <code>MainActivity</code> (don't forget to delete it in <code>onDestroy()</code> method):</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n   companion object {\n        @SuppressLint(\"StaticFieldLeak\")\n        @JvmStatic\n        var instance: MainActivity? = null\n   }\n\n   override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        instance = this\n   }\n\n   override fun onDestroy() {\n       instance = null\n       super.onDestroy()\n   }\n}\n</code></pre>\n\n<p>In <code>DepositActivity</code> you can access it like this:</p>\n\n<pre><code>MainActivity.instance?./* call some method or property */\n</code></pre>\n\n<p><strong>But you should not rely on <code>onDestroy()</code> being called, cause <a href=\"https://developer.android.com/reference/android/app/Activity#onDestroy()\" rel=\"nofollow noreferrer\">there are situations where the system will simply kill the activity's hosting process without calling this method (or any others) in it...</a> So you can have memory leak</strong></p></li>\n</ol>\n"}], "owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2018, "favorite_count": 0, "accepted_answer_id": 53516483, "answer_count": 3, "score": 1, "last_activity_date": 1543408996, "creation_date": 1543397904, "last_edit_date": 1543398527, "question_id": 53516345, "link": "https://stackoverflow.com/questions/53516345/how-to-get-previous-activity-in-android-kotlin", "title": "How to get previous activity in android Kotlin", "body": "<p>Lets say my default activity is <code>MainActivity</code> and I start another activity <code>DepositActivity</code> <strong>without</strong> using <code>finish()</code> in <code>MainActivity</code></p>\n\n<p>Now how can I access the instance of <code>MainActivity</code> inside <code>DepositActivity</code></p>\n"}, {"tags": ["android", "dependency-injection", "kotlin", "dagger-2", "dagger"], "comments": [{"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1543397709, "post_id": 53516204, "comment_id": 93901310, "body": "where are you injecting <code>ViewModelFactory</code> ?"}, {"owner": {"reputation": 768, "user_id": 5346051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZG8t.jpg?s=128&g=1", "display_name": "Mohammed Mahmoud", "link": "https://stackoverflow.com/users/5346051/mohammed-mahmoud"}, "reply_to_user": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1543397872, "post_id": 53516204, "comment_id": 93901408, "body": "I&#39;m injecting ViewModelFactory at DeliveriesListFragment"}, {"owner": {"reputation": 148364, "user_id": 501696, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/shkBF.png?s=128&g=1", "display_name": "Blackbelt", "link": "https://stackoverflow.com/users/501696/blackbelt"}, "edited": false, "score": 0, "creation_date": 1543398072, "post_id": 53516204, "comment_id": 93901559, "body": "that&#39;s the problem. Accordingly to what you posted <code>DeliveryListUseCase</code> is provided by <code>DeliveriesModule</code> which is a module of <code>DeliveriesActivity</code>"}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 5346051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZG8t.jpg?s=128&g=1", "display_name": "Mohammed Mahmoud", "link": "https://stackoverflow.com/users/5346051/mohammed-mahmoud"}, "is_accepted": true, "score": 0, "last_activity_date": 1543494572, "last_edit_date": 1543494572, "creation_date": 1543399417, "answer_id": 53516785, "question_id": 53516204, "link": "https://stackoverflow.com/questions/53516204/dagger-2-error-dependency-cannot-be-provided-without-an-provides-annotated-me/53516785#53516785", "title": "Dagger 2 error: dependency \u201ccannot be provided without an @Provides-annotated method&quot;", "body": "<p>Seems like I've figured out what was wrong</p>\n\n<p>the problem. the DeliveriesModule which is a module of DeliveriesActivity so i have to make another Module for DeliveriesListFragment and provide the DeliveryListUseCase </p>\n\n<p>Thank you, @Blackbelt, for giving me a hint</p>\n"}], "owner": {"reputation": 768, "user_id": 5346051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZG8t.jpg?s=128&g=1", "display_name": "Mohammed Mahmoud", "link": "https://stackoverflow.com/users/5346051/mohammed-mahmoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 53516785, "answer_count": 1, "score": 0, "last_activity_date": 1543494572, "creation_date": 1543397522, "last_edit_date": 1543397766, "question_id": 53516204, "link": "https://stackoverflow.com/questions/53516204/dagger-2-error-dependency-cannot-be-provided-without-an-provides-annotated-me", "title": "Dagger 2 error: dependency \u201ccannot be provided without an @Provides-annotated method&quot;", "body": "<p>I've started using Dagger 2 with Android Injector and faced an  issue </p>\n\n<p>I have 5 modules, that are composed into one component</p>\n\n<pre><code>@Singleton\n@Component(modules = [AndroidInjectionModule::class,\n    ActivityBuilder::class,\n    AndroidSupportInjectionModule::class\n    , ApplicationModule::class,NetworkModule::class])\n\ninterface ApplicationComponent {\n\n    @Component.Builder\n    interface Builder {\n        @BindsInstance\n        fun application(application: Application): Builder\n\n        fun build(): ApplicationComponent\n    }\n    fun inject(app: DeliveryApplication)\n    fun service(): DeliveryApi\n\n}\n</code></pre>\n\n<p>Network Module look like</p>\n\n<pre><code>@Module\nclass NetworkModule  {\n\n    @Singleton\n    @Provides\n    fun providesDeliveryApi(retrofit: Retrofit):DeliveryApi = retrofit.create(DeliveryApi::class.java)\n\n    @Singleton\n    @Provides\n    fun providesRetrofit(okHttpClient: OkHttpClient):Retrofit =\n            Retrofit.Builder()\n                    .baseUrl(BASE_URL)\n                    .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n                    .addConverterFactory(GsonConverterFactory.create())\n                    .client(okHttpClient)\n                    .build()\n\n\n    @Singleton\n    @Provides\n    fun providesOkHttpClient(context:Context): OkHttpClient {\n       /* val logging = HttpLoggingInterceptor().apply {\n            level = HttpLoggingInterceptor.Level.BODY\n        }*/\n        val cacheSize = (5 * 1024 * 1024).toLong()\n        val myCache = Cache(context.cacheDir, cacheSize)\n\n        val okHttpClient = OkHttpClient.Builder()\n                .cache(myCache)\n                .addInterceptor { chain -&gt;\n                    var request = chain.request()\n                    request = if (hasNetwork(context)!!)\n                        // setting  5 Mb Cabacity\n                        request.newBuilder().header(\"Cache-Control\", \"public, max-age=\" + 5).build()\n                    else\n                        request.newBuilder().header(\"Cache-Control\", \"public, only-if-cached, max-stale=\" + 60 * 60 * 24 * 7).build()\n                    chain.proceed(request)\n                }\n                .build()\n\n        return okHttpClient\n    }\n\n\n    @Singleton\n    @Provides\n    fun provideImageLoader(context: Context) : ImageLoader {\n        return PicassoImageLoader(Picasso.with(context))\n    }\n</code></pre>\n\n<p>application Module look like </p>\n\n<pre><code>const val SCHEDULER_MAIN_THREAD = \"mainThread\"\nconst val SCHEDULER_IO = \"io\"\n\n@Module\nclass ApplicationModule {\n    @Provides\n    @Named(SCHEDULER_MAIN_THREAD)\n    fun provideAndroidMainThreadScheduler() : Scheduler = AndroidSchedulers.mainThread()\n    @Provides\n    @Named(SCHEDULER_IO)\n    fun provideIoScheduler() : Scheduler = Schedulers.io()\n\n    @Provides\n    @Singleton\n    fun provideContext(application: Application): Context {\n        return application\n    }\n}\n</code></pre>\n\n<p>ActivityBuilder is pretty simple: just combination of modules for Activities \n   and FragmentsModule  for fragments </p>\n\n<pre><code>@Module\nabstract class ActivityBuilder {\n    @PerActivity\n    @ContributesAndroidInjector(modules = [FragmentsModule::class, DeliveriesModule::class])\n    abstract fun bindMainActivity(): DeliveriesActivity\n\n    @PerActivity\n    @ContributesAndroidInjector(modules = [FragmentsModule::class, DeliveriesDetailsModule::class])\n    abstract fun bindDeliveryDetailsActivity(): DeliveryDetailsActivity\n}\n\n\n@Module\n abstract class FragmentsModule {\n    @ContributesAndroidInjector\n    abstract fun provideDeliveriesListFragment(): DeliveriesListFragment\n    @ContributesAndroidInjector\n    abstract fun provideDeliveryDetailsFragment(): DeliveryDetailsFragment\n}\n</code></pre>\n\n<p>Delivery Module which used to provide all instances of the DeliveryActivity</p>\n\n<pre><code>@Module\nclass DeliveriesModule {\n\n\n    @Provides\n    @PerActivity\n    fun providesDeliveryRepository(deliveryApi: DeliveryApi): DeliveryRepository {\n        return  DeliveryDownloader(deliveryApi)\n    }\n\n\n    @Provides\n    @PerActivity\n    fun providesDeliveryListUseCases(deliveryRepository: DeliveryRepository): DeliveryListUseCase {\n        return DeliveryListInteractor(deliveryRepository)\n    }\n\n\n\n    @Provides\n    @PerActivity\n    fun provideDeliveriesListFragment(): DeliveriesListFragment {\n        return DeliveriesListFragment()\n    }\n\n}\n</code></pre>\n\n<p>ViewModelFactory  where the problem here, the compiler says that DeliveryListUseCase cannot be provided without an @Provides-annotated method</p>\n\n<pre><code>class ViewModelFactory @Inject constructor(private val application: Application,\n                                           @Named(SCHEDULER_IO) val subscribeOnScheduler: Scheduler,\n                                           @Named(SCHEDULER_MAIN_THREAD) val observeOnScheduler: Scheduler,\n        private val deliveryListUseCase: DeliveryListUseCase) : ViewModelProvider.NewInstanceFactory() {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n\n        return when {\n            modelClass.isAssignableFrom(DeliveryListViewModel::class.java)  -&gt;\n                DeliveryListViewModel(application,deliveryListUseCase,subscribeOnScheduler,observeOnScheduler) as T\n            else -&gt; BaseViewModel(application) as T\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit2", "moshi"], "comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543397635, "post_id": 53515678, "comment_id": 93901262, "body": "Did you use Kotlin version of moshi?"}, {"owner": {"reputation": 780, "user_id": 2667925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/305f7d3d31e1355c8d2a9bf41678ee1a?s=128&d=identicon&r=PG", "display_name": "h.kelidari", "link": "https://stackoverflow.com/users/2667925/h-kelidari"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543398402, "post_id": 53515678, "comment_id": 93901778, "body": "@Joshua I use MoshiConverterFactory for retrofit"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543399427, "post_id": 53515678, "comment_id": 93902408, "body": "I read you question again. I realize <code>name</code> is <code>String?</code>, so moshi works as intended. You should change it to <code>String</code> if <code>null</code>  is not a valid value."}, {"owner": {"reputation": 780, "user_id": 2667925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/305f7d3d31e1355c8d2a9bf41678ee1a?s=128&d=identicon&r=PG", "display_name": "h.kelidari", "link": "https://stackoverflow.com/users/2667925/h-kelidari"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543400326, "post_id": 53515678, "comment_id": 93902936, "body": "@Joshua i want name set default value when server send null value for that. if change String? to String, error none-null Value &#39;name&#39; was null"}, {"owner": {"reputation": 1225, "user_id": 4438470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfUMz.png?s=128&g=1", "display_name": "Vitor Hugo Schwaab", "link": "https://stackoverflow.com/users/4438470/vitor-hugo-schwaab"}, "edited": false, "score": 1, "creation_date": 1543883874, "post_id": 53515678, "comment_id": 94070426, "body": "This is an expected behavior. You see, the default value would be used if the field wasn&#39;t present. Null is different from absent.  In other words: {&quot;foo&quot;: &quot;bar&quot;, &quot;fizz&quot;: null} is different from {&quot;foo&quot;: &quot;bar&quot;}.  Fizz&#39;s default value would only be used on the second case, when absent."}, {"owner": {"reputation": 1225, "user_id": 4438470, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfUMz.png?s=128&g=1", "display_name": "Vitor Hugo Schwaab", "link": "https://stackoverflow.com/users/4438470/vitor-hugo-schwaab"}, "edited": false, "score": 0, "creation_date": 1543883929, "post_id": 53515678, "comment_id": 94070440, "body": "Also, see if you are using the kotlin version of Moshi. There is Moshi and Moshi-Kotlin. If I remember correctly, default values only work on the latter."}], "answers": [{"tags": [], "owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "is_accepted": true, "score": 1, "last_activity_date": 1543883431, "creation_date": 1543883431, "answer_id": 53603992, "question_id": 53515678, "link": "https://stackoverflow.com/questions/53515678/default-value-in-kotlin-data-class-not-work-when-server-send-null-for-that-value/53603992#53603992", "title": "default value in kotlin data class not work when server send null for that value in moshi", "body": "<p>This is working as intended because the null literal as a value for a key in JSON is semantically different than the absence of the key and value.</p>\n\n<p>You can make a custom JsonAdapter for your use case.</p>\n\n<pre><code>@JsonClass(generateAdapter = true)\ndata class Reference(\n  @Name val name: String = \"-\",\n  val value: Double,\n  val change: Double,\n  val percentChange: Double? = -10.0\n) {\n  @Retention(RUNTIME)\n  @JsonQualifier\n  annotation class Name\n\n  companion object {\n    @Name @FromJson fun fromJson(reader: JsonReader, delegate: JsonAdapter&lt;String&gt;): String {\n      if (reader.peek() == JsonReader.Token.NULL) {\n        reader.nextNull&lt;Unit&gt;()\n        return \"-\"\n      }\n      return delegate.fromJson(reader)!!\n    }\n\n    @ToJson fun toJson(@Name name: String): String {\n      return name\n    }\n  }\n}\n\n@Test fun reference() {\n  val moshi = Moshi.Builder()\n      .add(Reference)\n      .build()\n  val adapter = moshi.adapter(Reference::class.java)\n  val decoded = Reference(\"-\", 130_000.toDouble(), (-2_500).toDouble(), null)\n  assertThat(adapter.fromJson(\n      \"\"\"{\"percentChange\": null,\"change\": \"-2500.00\",\"value\": \"130000\"}\"\"\"))\n      .isEqualTo(decoded)\n  assertThat(adapter.fromJson(\n      \"\"\"{\"percentChange\": null,\"change\": \"-2500.00\",\"value\": \"130000\",\"name\": null}\"\"\"))\n      .isEqualTo(decoded)\n}\n</code></pre>\n"}], "owner": {"reputation": 780, "user_id": 2667925, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/305f7d3d31e1355c8d2a9bf41678ee1a?s=128&d=identicon&r=PG", "display_name": "h.kelidari", "link": "https://stackoverflow.com/users/2667925/h-kelidari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2804, "favorite_count": 2, "accepted_answer_id": 53603992, "answer_count": 1, "score": 9, "last_activity_date": 1543883431, "creation_date": 1543395866, "question_id": 53515678, "link": "https://stackoverflow.com/questions/53515678/default-value-in-kotlin-data-class-not-work-when-server-send-null-for-that-value", "title": "default value in kotlin data class not work when server send null for that value in moshi", "body": "<p>I use Moshi for parse json from server. if server send null for item default value not set! but server not send that item default value set.</p>\n\n<p>json:</p>\n\n<pre><code>{\"percentChange\": null,\"change\": \"-2500.00\",\"value\": \"130000\",\"name\": null}\n</code></pre>\n\n<p>data class:</p>\n\n<pre><code>@JsonClass(generateAdapter = true) data class Reference(val name:String? = \"-\",val value: Double,val change: Double,val percentChange: Double? = -10.0,)\n</code></pre>\n\n<p>but data for name and percentChange is null that should \"-\" for name and \"-10.0\" for percentChange. if server not send name and percentChange, default value work, but if send that null default value not work!</p>\n\n<p>I use converter-moshi:2.4.0 and retrofit:2.4.0</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "listadapter", "androidx"], "comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543397502, "post_id": 53515603, "comment_id": 93901189, "body": "What is the exception message?"}, {"owner": {"reputation": 909, "user_id": 5341424, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f6A_mP9T33A/AAAAAAAAAAI/AAAAAAAAAQ0/B1i7GyePaw8/photo.jpg?sz=128", "display_name": "Bmuig", "link": "https://stackoverflow.com/users/5341424/bmuig"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543397711, "post_id": 53515603, "comment_id": 93901312, "body": "I am talking about the ListAdapter in <code>androidx.recyclerview.widget.ListAdapter</code>, not the old one..."}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1543398197, "post_id": 53515603, "comment_id": 93901642, "body": "I mean please includes the <b>FULL</b>  message in you question."}, {"owner": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "edited": false, "score": 1, "creation_date": 1547472944, "post_id": 53515603, "comment_id": 95193402, "body": "I had similar issue, maybe there some bug with getItemCount() method. When I remove this method it works but when I override this method it crashes with error message: IndexOutOfBoundsException..."}, {"owner": {"reputation": 135, "user_id": 2941291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DBBwq.jpg?s=128&g=1", "display_name": "Daniel Ben", "link": "https://stackoverflow.com/users/2941291/daniel-ben"}, "reply_to_user": {"reputation": 1391, "user_id": 4308897, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X67wO4XjVAE/AAAAAAAAAAI/AAAAAAAAADw/NacwJv67gHI/photo.jpg?sz=128", "display_name": "Ercan", "link": "https://stackoverflow.com/users/4308897/ercan"}, "edited": false, "score": 0, "creation_date": 1559652023, "post_id": 53515603, "comment_id": 99481640, "body": "@ErcanDuman This was my problem. I removed this and everything started to work well again. I believe it is because the <code>ListAdapter</code> is maintaining its own list and if you should update your own list and then use your list as the source of the <code>itemsCount</code>, it might cause some inconsistencies which then causes the error."}], "owner": {"reputation": 909, "user_id": 5341424, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f6A_mP9T33A/AAAAAAAAAAI/AAAAAAAAAQ0/B1i7GyePaw8/photo.jpg?sz=128", "display_name": "Bmuig", "link": "https://stackoverflow.com/users/5341424/bmuig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1543398622, "creation_date": 1543395588, "last_edit_date": 1543398622, "question_id": 53515603, "link": "https://stackoverflow.com/questions/53515603/recyclerview-listadapter-crashes-when-changing-data", "title": "RecyclerView.ListAdapter crashes when changing data", "body": "<p>I decided to play around with the new <strong>RecyclerView.ListAdapter</strong> and try out if this can be used in production.</p>\n\n<p>My plan was to display a placeholder (skeleton) item while the listitems are loaded and then switch to the normal itemlist once the client receives the data. The way I handle this in the <strong>adapter</strong> is that I pass a 'null' to <em>submitList()</em> (that way I know the data is not loaded yet).</p>\n\n<p>The first part of this works very well, the <strong>ListAdapter</strong> starts up and displays the skeleton item, but once the 'real' list is loaded the app crashes. The reason for the crash is that the <strong>adapter</strong> goes directly to <em>onBindViewHolder()</em> without calling <em>onCreateViewHolder()</em> first and because of that tries to bind data to fields of the normal item that do not exist in the skeleton item.</p>\n\n<p>So far I have not been able to find out why it skips the <em>onCreateViewHolder()</em> part for the first item and goes directly into binding. I checked if there maybe was some problem with the <strong>diffUtils</strong>, but the two items (the skeleton item and the 'real' item) are clearly different. \n(A short side note here: for some reason the breakpoints in the two <strong>diffUtils</strong> function never trigger at all .. I am not sure if this is also part of the problem or if this is just an <strong>Android Studio</strong> problem.)</p>\n\n<p>The main classes that are of importance:</p>\n\n<p>The ListAdapter</p>\n\n<pre><code>class VIPSimilarAdsAdapter(context: Context, presenterInterface: BaseVIPContract.MVPAdapterPresenter) : ListAdapter&lt;Ad, AdViewHolderFactory.AdBaseViewHolder&gt;(SimilarAdsDiffCallback()) {\n\n    private val presenterInterface: WeakReference&lt;BaseVIPContract.MVPAdapterPresenter&gt; = WeakReference(presenterInterface)\n    private var showLoadingInidicator = true\n\n    override fun submitList(list: List&lt;Ad&gt;?) {\n        showLoadingInidicator = list == null\n        super.submitList(list)\n    }\n\n    override fun getItemCount(): Int {\n        return when (showLoadingInidicator) {\n            true -&gt; 1\n            else -&gt; super.getItemCount()\n        }\n    }\n\n    override fun onBindViewHolder(@NonNull holder: AdViewHolderFactory.AdBaseViewHolder, position: Int) {\n        if (!showLoadingInidicator) {\n            getItem(position)?.let { safeAd -&gt;\n                CommonViewBinder.bindCommonFields(holder as AdViewHolderFactory.AdViewHolder, safeAd)\n                AdViewBinder.bindAdFields(holder, safeAd)\n                holder.itemView.setOnClickListener {\n                    presenterInterface.get()?.onUserEventSimilarAdClicked(safeAd, position)\n                }\n            }\n        }\n    }\n\n    @NonNull\n    override fun onCreateViewHolder(@NonNull parent: ViewGroup, viewType: Int): AdViewHolderFactory.AdBaseViewHolder {\n        return (when (showLoadingInidicator) {\n            true -&gt; AdViewHolderFactory.SkeletonViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.grid_item_skeleton, parent, false), ITEM_VIEW_TYPE_SKELETON)\n            else -&gt; AdViewHolderFactory.AdViewHolder(LayoutInflater.from(parent.context).inflate(R.layout.grid_item_ad_basic, parent, false))\n        })\n    }\n}\n</code></pre>\n\n<p>The DiffUtil Callback</p>\n\n<pre><code>class SimilarAdsDiffCallback : DiffUtil.ItemCallback&lt;Ad&gt;() {\n    override fun areItemsTheSame(oldItem: Ad, newItem: Ad): Boolean {\n        return oldItem == newItem\n    }\n\n    override fun areContentsTheSame(oldItem: Ad, newItem: Ad): Boolean {\n        return oldItem.id == newItem.id\n    }\n}\n</code></pre>\n\n<p>The <strong>adapter</strong> is simply called with</p>\n\n<pre><code>adAdapterSimilarAds.submitList(null)\n</code></pre>\n\n<p>at the start of the activity and later with </p>\n\n<pre><code>adAdapterSimilarAds.submitList(list)\n</code></pre>\n\n<p>once we have loaded the data.</p>\n\n<p>Hope anybody has run into this problem before and can help me...</p>\n\n<hr>\n\n<p>Edit:\nhere is the stacktrace of the crash</p>\n\n<pre><code>java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid view holder adapter positionViewHolder{4e5bcfd position=6 id=-1, oldPos=0, pLpos:0 scrap [attachedScrap] tmpDetached no parent} androidx.recyclerview.widget.RecyclerView{3d89e2f VFED..... ......ID 0,1953-1080,2289 #7f090302 app:id/similar_ads_after_pos_1}, adapter:ebk.vip.similar_ads.VIPSimilarAdsAdapter@ac7dc3c, layout:androidx.recyclerview.widget.GridLayoutManager@e9b3dc5, context:ebk.vip.vip_core.VIPActivity@ecfbcc3\n        at androidx.recyclerview.widget.RecyclerView$Recycler.validateViewHolderForOffsetPosition(RecyclerView.java:5715)\n        at androidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:5898)\n        at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5858)\n        at androidx.recyclerview.widget.RecyclerView$Recycler.getViewForPosition(RecyclerView.java:5854)\n        at androidx.recyclerview.widget.LinearLayoutManager$LayoutState.next(LinearLayoutManager.java:2230)\n        at androidx.recyclerview.widget.GridLayoutManager.layoutChunk(GridLayoutManager.java:557)\n        at androidx.recyclerview.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1517)\n        at androidx.recyclerview.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:612)\n        at androidx.recyclerview.widget.GridLayoutManager.onLayoutChildren(GridLayoutManager.java:171)\n        at androidx.recyclerview.widget.RecyclerView.dispatchLayoutStep1(RecyclerView.java:3875)\n        at androidx.recyclerview.widget.RecyclerView.onMeasure(RecyclerView.java:3330)\n        at android.view.View.measure(View.java:19857)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1464)\n        at android.widget.LinearLayout.measureVertical(LinearLayout.java:758)\n        at android.widget.LinearLayout.onMeasure(LinearLayout.java:640)\n        at android.view.View.measure(View.java:19857)\n        at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:715)\n        at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)\n        at android.view.View.measure(View.java:19857)\n        at androidx.core.widget.NestedScrollView.measureChildWithMargins(NestedScrollView.java:1502)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n        at androidx.core.widget.NestedScrollView.onMeasure(NestedScrollView.java:556)\n        at android.view.View.measure(View.java:19857)\n        at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:715)\n        at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)\n        at android.view.View.measure(View.java:19857)\n        at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:715)\n        at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)\n        at android.view.View.measure(View.java:19857)\n        at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:715)\n        at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)\n        at android.view.View.measure(View.java:19857)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n        at androidx.appcompat.widget.ContentFrameLayout.onMeasure(ContentFrameLayout.java:143)\n        at android.view.View.measure(View.java:19857)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n        at android.view.View.measure(View.java:19857)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n        at android.widget.FrameLayout.onMeasure(FrameLayout.java:185)\n        at android.view.View.measure(View.java:19857)\n        at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:6083)\n        at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1464)\n        at android.widget.LinearLayout.measureVertical(LinearLayout.java:758)\n        at android.widget.LinearLayout.onMeasure(LinearLayout.java:640)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1543395710, "post_id": 53514638, "comment_id": 93900140, "body": "that might be even simplifiable to: <code>inline fun &lt;reified T : Parcelable&gt; Parcel.readObject() : T = readParcelable(T::class.java.classLoader)</code>..."}], "tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 4, "last_activity_date": 1543391747, "creation_date": 1543391747, "answer_id": 53514638, "question_id": 53514541, "link": "https://stackoverflow.com/questions/53514541/retrieve-class-of-return-value-in-extension-function/53514638#53514638", "title": "Retrieve class of return value in extension function", "body": "<p>You could accomplish that by using the <code>reified</code> keyword as follows:</p>\n\n<pre><code>inline fun &lt;reified T : Parcelable&gt; Parcel.readObject(): T {\n    return this.readParcelable(T::class.java.classLoader) as T\n}\n</code></pre>\n\n<p>You can read more about <code>reified</code> parameters in the <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">docs</a></p>\n"}], "owner": {"reputation": 583, "user_id": 6932415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21eb39eb48004add7a1ac82b85632170?s=128&d=identicon&r=PG&f=1", "display_name": "Michiel", "link": "https://stackoverflow.com/users/6932415/michiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 53514638, "answer_count": 1, "score": 1, "last_activity_date": 1543391747, "creation_date": 1543391419, "question_id": 53514541, "link": "https://stackoverflow.com/questions/53514541/retrieve-class-of-return-value-in-extension-function", "title": "Retrieve class of return value in extension function", "body": "<p>I want to replace this function:</p>\n\n<pre><code>fun &lt;T : Parcelable&gt; Parcel.readObject(result: Parcelable.Creator&lt;T&gt;): T {\n    return this.readParcelable(result::class.java.classLoader) as T\n}\n</code></pre>\n\n<p>with a function like:</p>\n\n<pre><code>fun &lt;T : Parcelable&gt; Parcel.readObject(): T {\n    return this.readParcelable(T::class.java.classLoader) as T\n}\n</code></pre>\n\n<p>So I want it to retrieve the class of the return value and get the classLoader of that class. Is this possible?</p>\n"}, {"tags": ["javafx", "kotlin", "kotlinx.coroutines", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 2, "last_activity_date": 1543391026, "last_edit_date": 1543391026, "creation_date": 1543390486, "answer_id": 53514327, "question_id": 53514159, "link": "https://stackoverflow.com/questions/53514159/getting-java-lang-nosuchmethodexception-javafx-application-platform-startupjav/53514327#53514327", "title": "Getting java.lang.NoSuchMethodException: javafx.application.Platform.startup(java.lang.Runnable)", "body": "<p>This is a <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/816\" rel=\"nofollow noreferrer\">known bug</a>. Either wait for <code>1.0.2</code> where it is hopefully fixed or downgrade to <code>1.0.0</code> at the moment where it still works. I did the latter and it suffices to update all the other stuff that needs to be updated (coroutines, etc.), in case you are coming from a pre-1.3-version.</p>\n"}], "owner": {"reputation": 2339, "user_id": 120599, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/21f83b8b8bea4a758ea590515d90fe6f?s=128&d=identicon&r=PG", "display_name": "Kevin Jones", "link": "https://stackoverflow.com/users/120599/kevin-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 53514327, "answer_count": 1, "score": 3, "last_activity_date": 1544377051, "creation_date": 1543389850, "last_edit_date": 1544377051, "question_id": 53514159, "link": "https://stackoverflow.com/questions/53514159/getting-java-lang-nosuchmethodexception-javafx-application-platform-startupjav", "title": "Getting java.lang.NoSuchMethodException: javafx.application.Platform.startup(java.lang.Runnable)", "body": "<p>I have a tornadofx app that I've moved from an earlier version of Kotlin and Kotlin Coroutines to the latest (1.3 and 1.0.1) When I run it I get the above exception on this line</p>\n\n<pre><code>button(\"Click to calculate\") {\n}.setOnAction {\n    GlobalScope.launch(Dispatchers.UI) { }\n}\n</code></pre>\n\n<p>It's the call to 'launch' that causes the exception. This all worked in the release I was running on previously. </p>\n\n<p>Any help would be appreciated</p>\n"}, {"tags": ["java", "c++", "kotlin", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 594, "user_id": 3152652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBSmp.jpg?s=128&g=1", "display_name": "SlaneR", "link": "https://stackoverflow.com/users/3152652/slaner"}, "edited": false, "score": 0, "creation_date": 1543386284, "post_id": 53513305, "comment_id": 93895727, "body": "I mean, without jmethodID or something."}, {"owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "reply_to_user": {"reputation": 594, "user_id": 3152652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBSmp.jpg?s=128&g=1", "display_name": "SlaneR", "link": "https://stackoverflow.com/users/3152652/slaner"}, "edited": false, "score": 1, "creation_date": 1543386348, "post_id": 53513305, "comment_id": 93895744, "body": "You can&#39;t call java method without &quot;jmethodID or something&quot; :)"}, {"owner": {"reputation": 594, "user_id": 3152652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBSmp.jpg?s=128&g=1", "display_name": "SlaneR", "link": "https://stackoverflow.com/users/3152652/slaner"}, "edited": false, "score": 0, "creation_date": 1543386356, "post_id": 53513305, "comment_id": 93895751, "body": "I also found about <code>CallXXXMethod</code>, but it should be target method defined in native call wrapping class.  I wonder is it possible to invoke delegate by passing it. Sorry for my bad English."}, {"owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "reply_to_user": {"reputation": 594, "user_id": 3152652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBSmp.jpg?s=128&g=1", "display_name": "SlaneR", "link": "https://stackoverflow.com/users/3152652/slaner"}, "edited": false, "score": 0, "creation_date": 1543386520, "post_id": 53513305, "comment_id": 93895815, "body": "All <code>CallXXXMethod</code> work the same way. Only difference is type of called method."}], "tags": [], "owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "is_accepted": true, "score": 1, "last_activity_date": 1543386117, "creation_date": 1543386117, "answer_id": 53513305, "question_id": 53512917, "link": "https://stackoverflow.com/questions/53512917/jni-kotlin-is-it-possible-to-pass-delegate-to-jni/53513305#53513305", "title": "JNI/Kotlin: Is it possible to pass delegate to JNI?", "body": "<p>Yes it is possible.</p>\n\n<p>Type of your <code>MessageReceived</code> should be <code>jobject</code>.</p>\n\n<p>To invoke delegate you need:</p>\n\n<ul>\n<li>find <code>MessageReceived</code> class by <code>GetObjectClass</code></li>\n<li>find method (I'm not sure what is method name here) by <code>GetMethodID</code></li>\n<li>invoke it using <code>CallVoidMethod</code></li>\n</ul>\n\n<p>You can find example <a href=\"http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/method.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 594, "user_id": 3152652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBSmp.jpg?s=128&g=1", "display_name": "SlaneR", "link": "https://stackoverflow.com/users/3152652/slaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 53513305, "answer_count": 1, "score": 0, "last_activity_date": 1543386117, "creation_date": 1543384068, "question_id": 53512917, "link": "https://stackoverflow.com/questions/53512917/jni-kotlin-is-it-possible-to-pass-delegate-to-jni", "title": "JNI/Kotlin: Is it possible to pass delegate to JNI?", "body": "<p>I'm working JNI and I wonder is it possible to communicate via <code>delegate</code>.</p>\n\n<p>for example:</p>\n\n<p><strong>Kotlin</strong></p>\n\n<pre><code>typealias MessageReceived = (msg: String) -&gt; Unit\n\nexternal fun RegisterCallback(callback: MessageReceived)\n</code></pre>\n\n<p><br /></p>\n\n<p><strong>C++ (JNI)</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>JNIEXPORT void Java_some_package_name_Foo_RegisterCallback(JNIEnv* env, jobject, void (*MessageReceived)(jstring msg)) {\n    if (MessageReceived != nullptr) {\n        char buffer[260] = {0};\n        sprintf(buffer, \"Callback registered!\");\n        jstring messageJStr = env-&gt;NewStringUTF(buffer);\n        MessageReceived(messageJStr);\n        env-&gt;DeleteLocalRef(messageJStr);\n    }\n}\n</code></pre>\n\n<p>is it impossible?</p>\n\n<p>When I ran this code, I can't access and get SIGSEGV (address access protected).</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/9630134/jni-how-to-callback-from-c-or-c-to-java\">this</a>, but it seems to complicated to me.</p>\n\n<p>Thank you for your interest</p>\n"}, {"tags": ["android", "kotlin", "android-livedata", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 8, "last_activity_date": 1543385972, "creation_date": 1543385972, "answer_id": 53513277, "question_id": 53512752, "link": "https://stackoverflow.com/questions/53512752/kotlin-coroutine-with-live-data-or-only-coroutines/53513277#53513277", "title": "Kotlin: Coroutine with Live Data or only Coroutines?", "body": "<p>I'm voting for (1), using <code>LiveData</code> for that final step of moving the data from the <code>ViewModel</code> to the View. </p>\n\n<p>Here's why: if you start a coroutine in the UI which fetches the data through your <code>ViewModel</code>...</p>\n\n<ol>\n<li>You'll end up with a suspending call like <code>getData()</code> in the View. Whether that's a <code>Fragment</code> or an <code>Activity</code>, that coroutine will deliver the result to only that specific instance. If it gets recreated due to a configuration change, you'll need to fetch again in the new instance.</li>\n<li>If you're handling cancellation for your coroutines (which you probably should be), a configuration change will mean that any work you've already done in the <code>ViewModel</code> and around the network will be lost (e.g. any progress on a long running network call), since your coroutine is cancelled when your View is destroyed.</li>\n<li>If you're not cancelling your coroutines when the View is destroyed, your data fetching function may attempt to update the UI in a View that doesn't exist any more if when completes.</li>\n</ol>\n\n<p>In comparison, if you start coroutines in your <code>ViewModel</code> and then place the result in a <code>LiveData</code>:</p>\n\n<ol>\n<li>Your fetches can continue across configuration changes due to the ViewModel's longer lifespan.</li>\n<li>You can cancel coroutines when your screen is closed for good (in <code>onCleared</code>) instead of at configuration changes.</li>\n<li><code>LiveData</code> observers will only be called when the View exists and is in an active (foreground) state, so you don't have to worry about getting results when your View isn't ready for it (or doesn't exist anymore).</li>\n<li>When your View is recreated, the new instance can start observing the <code>LiveData</code> and receive the value that's already loaded. Or, if your data is still loading, it will even eventually receive the result of the network call that was started for a previous View instance.</li>\n</ol>\n"}], "owner": {"reputation": 3742, "user_id": 1540297, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/HhRRD.jpg?s=128&g=1", "display_name": "Sourabh Saldi", "link": "https://stackoverflow.com/users/1540297/sourabh-saldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 1, "accepted_answer_id": 53513277, "answer_count": 1, "score": 4, "last_activity_date": 1543385972, "creation_date": 1543383232, "question_id": 53512752, "link": "https://stackoverflow.com/questions/53512752/kotlin-coroutine-with-live-data-or-only-coroutines", "title": "Kotlin: Coroutine with Live Data or only Coroutines?", "body": "<p>which is better between these two</p>\n\n<p>1) Using coroutines in Viewmodel to fetch data from network and updating View using live data?</p>\n\n<p>2) Using coroutine from View to call suspend function in viewmodel that fetches data from network?</p>\n\n<p>Another question</p>\n\n<p>Should we be using livedata for use cases where we need to update UI only once from backend, like data won't be changing while user is on that screen</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2555, "user_id": 3132015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XwC0.jpg?s=128&g=1", "display_name": "Abdul-Aziz-Niazi", "link": "https://stackoverflow.com/users/3132015/abdul-aziz-niazi"}, "edited": false, "score": 1, "creation_date": 1543382590, "post_id": 53512575, "comment_id": 93894463, "body": "Can you share the original java function as well?"}, {"owner": {"reputation": 1837, "user_id": 1097125, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P71Nk.jpg?s=128&g=1", "display_name": "januprasad", "link": "https://stackoverflow.com/users/1097125/januprasad"}, "reply_to_user": {"reputation": 2555, "user_id": 3132015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XwC0.jpg?s=128&g=1", "display_name": "Abdul-Aziz-Niazi", "link": "https://stackoverflow.com/users/3132015/abdul-aziz-niazi"}, "edited": false, "score": 0, "creation_date": 1543382823, "post_id": 53512575, "comment_id": 93894530, "body": "<a href=\"https://gist.github.com/januprasad/8e4f2a8f520e0f8839bbe8e23496ac04\" rel=\"nofollow noreferrer\">gist.github.com/januprasad/8e4f2a8f520e0f8839bbe8e23496ac04</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 1097125, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P71Nk.jpg?s=128&g=1", "display_name": "januprasad", "link": "https://stackoverflow.com/users/1097125/januprasad"}, "edited": false, "score": 0, "creation_date": 1543384881, "post_id": 53512813, "comment_id": 93895193, "body": "Yeah, I heard of Extensions. Great Good Answer."}], "tags": [], "owner": {"reputation": 2555, "user_id": 3132015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3XwC0.jpg?s=128&g=1", "display_name": "Abdul-Aziz-Niazi", "link": "https://stackoverflow.com/users/3132015/abdul-aziz-niazi"}, "is_accepted": false, "score": 1, "last_activity_date": 1543385682, "last_edit_date": 1543385682, "creation_date": 1543383530, "answer_id": 53512813, "question_id": 53512575, "link": "https://stackoverflow.com/questions/53512575/how-to-convert-a-string-sentence-to-arraylist-in-kotlin/53512813#53512813", "title": "how to convert a String sentence to arraylist in Kotlin", "body": "<p>You don't need scopes, the redundant <code>\"\".toRegex()</code> and the last expression.\nYou can do something like this:</p>\n\n<pre><code>private fun stringToWords(mnemonic: String): List&lt;String&gt; {\n    val words = ArrayList&lt;String&gt;()\n    for (w in mnemonic.trim(' ').split(\" \")) {\n        if (w.isNotEmpty()) {\n            words.add(w)\n        }\n    }\n    return words\n}\n</code></pre>\n\n<hr>\n\n<p>Additionally,\nIf you use this method a lot in this project, you can make it an extension in string class. Paste this method in a separate file(outside a classes or add it in classless .kt file) so it has a global access.\nand then you can use it with any string like\n<code>myString.toWords()</code> anywhere in the project\nThe method will look like this </p>\n\n<pre><code>inline fun String.toWords(): List&lt;String&gt; {\n    val words = ArrayList&lt;String&gt;()\n    for (w in this.trim(' ').split(\" \")) {\n        if (w.isNotEmpty()) {\n            words.add(w)\n        }\n    }\n    return words\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 3, "last_activity_date": 1543386958, "last_edit_date": 1543386958, "creation_date": 1543385196, "answer_id": 53513123, "question_id": 53512575, "link": "https://stackoverflow.com/questions/53512575/how-to-convert-a-string-sentence-to-arraylist-in-kotlin/53513123#53513123", "title": "how to convert a String sentence to arraylist in Kotlin", "body": "<p>It's easier than you think:</p>\n\n<pre><code>fun stringToWords(mnemonic: String) = mnemonic.replace(\"\\\\s+\".toRegex(), \" \").trim().split(\" \")\n</code></pre>\n\n<p>Remove multiple spaces, trim start and the end, split. <br/>\nLike an extention:</p>\n\n<pre><code>fun String.toWords() = replace(\"\\\\s+\".toRegex(), \" \").trim().split(\" \")\n</code></pre>\n\n<p>After Roland's suggestion:</p>\n\n<pre><code>fun String.toWords() = trim().split(\"\\\\s+\".toRegex())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1837, "user_id": 1097125, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P71Nk.jpg?s=128&g=1", "display_name": "januprasad", "link": "https://stackoverflow.com/users/1097125/januprasad"}, "edited": false, "score": 0, "creation_date": 1543392968, "post_id": 53513163, "comment_id": 93898679, "body": "I Liked it very much because you&#39;re doing in Kotlin Way."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 13, "last_activity_date": 1543386637, "last_edit_date": 1543386637, "creation_date": 1543385392, "answer_id": 53513163, "question_id": 53512575, "link": "https://stackoverflow.com/questions/53512575/how-to-convert-a-string-sentence-to-arraylist-in-kotlin/53513163#53513163", "title": "how to convert a String sentence to arraylist in Kotlin", "body": "<p>I would go for the following:</p>\n\n<pre><code>fun stringToWords(s : String) = s.trim().splitToSequence(' ')\n    .filter { it.isNotEmpty() } // or: .filter { it.isNotBlank() }\n    .toList()\n</code></pre>\n\n<p>Note that you probably want to adjust that filter, e.g. to filter out blank entries too... I put that variant in the comment... (if you use that one, you do not require an initial <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/trim.html\" rel=\"noreferrer\"><code>trim()</code></a> though)</p>\n\n<p>If you rather want to work with the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/index.html\" rel=\"noreferrer\"><code>Sequence</code></a> you can do so by just omitting the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/to-list.html\" rel=\"noreferrer\"><code>.toList()</code></a> at the end.</p>\n\n<p>And as also Abdul-Aziz-Niazi said: same is also possible via extension function, if you require it more often:</p>\n\n<pre><code>fun String.toWords() = trim().splitToSequence(' ').filter { it.isNotEmpty() }.toList()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6797703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1236779083041739/picture?type=large", "display_name": "Shivesh Karan Mehta", "link": "https://stackoverflow.com/users/6797703/shivesh-karan-mehta"}, "is_accepted": false, "score": 3, "last_activity_date": 1543385783, "creation_date": 1543385783, "answer_id": 53513238, "question_id": 53512575, "link": "https://stackoverflow.com/questions/53512575/how-to-convert-a-string-sentence-to-arraylist-in-kotlin/53513238#53513238", "title": "how to convert a String sentence to arraylist in Kotlin", "body": "<p>You can do it like this.. Just make a function of return type list.</p>\n\n<pre><code> val s = \"This is a sample sentence.\"\n\n val words:Array&lt;String&gt;  = s.split(\"\\\\s+\".toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()\n    for (i in words.indices) {\n        // You may want to check for a non-word character before blindly\n        // performing a replacement\n        // It may also be necessary to adjust the character class\n        words[i] = words[i].replace(\"[^\\\\w]\".toRegex(), \"\")\n    }\n</code></pre>\n\n<p>May this will help you :-)</p>\n"}], "owner": {"reputation": 1837, "user_id": 1097125, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/P71Nk.jpg?s=128&g=1", "display_name": "januprasad", "link": "https://stackoverflow.com/users/1097125/januprasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7056, "favorite_count": 3, "accepted_answer_id": 53513163, "answer_count": 4, "score": 4, "last_activity_date": 1543393002, "creation_date": 1543382125, "last_edit_date": 1543393002, "question_id": 53512575, "link": "https://stackoverflow.com/questions/53512575/how-to-convert-a-string-sentence-to-arraylist-in-kotlin", "title": "how to convert a String sentence to arraylist in Kotlin", "body": "<p>I have this function to convert string sentence to list words. I created this function in Java and converted to Kotlin using default Kotlin conversion in Android Studio, but I believe there can be many ways to shorten this code in Awesome Kotlin. I will be good if you can share your piece of code and help me(and all) to improve our knowledge in Kotlin.    </p>\n\n<pre><code>private fun stringToWords(mnemonic: String): List&lt;String&gt; {\n    val words = ArrayList&lt;String&gt;()\n    for (word in mnemonic.trim { it &lt;= ' ' }.split(\" \".toRegex()).dropLastWhile { it.isEmpty() }.toTypedArray()) {\n        if (word.isNotEmpty()) {\n            words.add(word)\n        }\n    }\n    return words\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "branch.io"], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 6504296, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iySlkOLyZ8s/AAAAAAAAAAI/AAAAAAAADkU/MtafuXyajvY/photo.jpg?sz=128", "display_name": "Deepti Pandey", "link": "https://stackoverflow.com/users/6504296/deepti-pandey"}, "is_accepted": true, "score": 0, "last_activity_date": 1543394281, "creation_date": 1543394281, "answer_id": 53515241, "question_id": 53512494, "link": "https://stackoverflow.com/questions/53512494/branch-io-referral-integration-in-android/53515241#53515241", "title": "(Branch.io) Referral integration in Android", "body": "<p>You could use the <a href=\"https://docs.branch.io/pages/apps/api/#referral-history\" rel=\"nofollow noreferrer\">Branch Referral History API</a> to check if the referred user got credited the reward</p>\n\n<blockquote>\n  <p>curl -XGET\n  '<a href=\"https://api.branch.io/v1/credithistory?branch_key=key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Swt&amp;identity=steve\" rel=\"nofollow noreferrer\">https://api.branch.io/v1/credithistory?branch_key=key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Swt&amp;identity=steve</a>'</p>\n</blockquote>\n\n<p>For any further questions, reach out to integrations@branch.io and we would be happy to help you out.</p>\n"}], "owner": {"reputation": 33, "user_id": 6797703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1236779083041739/picture?type=large", "display_name": "Shivesh Karan Mehta", "link": "https://stackoverflow.com/users/6797703/shivesh-karan-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 53515241, "answer_count": 1, "score": 0, "last_activity_date": 1543398933, "creation_date": 1543381594, "last_edit_date": 1543398933, "question_id": 53512494, "link": "https://stackoverflow.com/questions/53512494/branch-io-referral-integration-in-android", "title": "(Branch.io) Referral integration in Android", "body": "<p>I need assistance with if- </p>\n\n<p><strong>1-</strong> If I refer someone than he will get 10 coins and I will get 5 coins.</p>\n\n<p><strong>2-</strong> After 5 successful referral I want activate some feature for user.  </p>\n\n<blockquote>\n  <p>So my problem is how can I know that user has successfully achieved 5\n  referral?</p>\n</blockquote>\n\n<p>I have integrated how to get credits and redeem credits but I have stuck how to know that i successfully referred five person.</p>\n\n<p><a href=\"https://i.stack.imgur.com/h5ejt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h5ejt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3161, "user_id": 10510491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4QsPKELpII/AAAAAAAAAAI/AAAAAAAAV14/3oA6QmFw68U/photo.jpg?sz=128", "display_name": "Aaron", "link": "https://stackoverflow.com/users/10510491/aaron"}, "is_accepted": true, "score": 2, "last_activity_date": 1543377169, "creation_date": 1543377169, "answer_id": 53511855, "question_id": 53511716, "link": "https://stackoverflow.com/questions/53511716/how-can-i-save-function-calls-in-a-list-and-call-them-one-by-one-in-android/53511855#53511855", "title": "How can I save function calls in a list and call them one by one in Android", "body": "<p>You should be able to store your functions in a <code>List&lt;() -&gt; Unit&gt;</code>:</p>\n\n<pre><code>val listOfFun: MutableList&lt;() -&gt; Unit&gt; = mutableListOf()\n\nlistOfFun += { myFunction(\"Ali\", \"ali@test.com\") }\nlistOfFun += { myFunction(\"AnotherPerson\", \"another_person@test.com\") }\n</code></pre>\n\n<p>And execute your functions from the list:</p>\n\n<pre><code>listOfFun.forEach { it() }\n</code></pre>\n"}], "owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 53511855, "answer_count": 1, "score": 0, "last_activity_date": 1543377868, "creation_date": 1543376072, "last_edit_date": 1543377868, "question_id": 53511716, "link": "https://stackoverflow.com/questions/53511716/how-can-i-save-function-calls-in-a-list-and-call-them-one-by-one-in-android", "title": "How can I save function calls in a list and call them one by one in Android", "body": "<p>I am saving my function call like this</p>\n\n<pre><code>val savedFun = { myFunction(\"Ali\", \"ali@test.com\") }\n</code></pre>\n\n<p>I can call it latter like this <code>savedFun()</code> and its working perfectly fine.\nBut I want to save multiple calls in a list and then call them one by one. How can I achieve that?</p>\n"}, {"tags": ["android", "kotlin", "memory-leaks", "android-handler"], "comments": [{"owner": {"reputation": 4470, "user_id": 1506104, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ff2356dd71fc703ae08d21f5d4f137f6?s=128&d=identicon&r=PG&f=1", "display_name": "user1506104", "link": "https://stackoverflow.com/users/1506104/user1506104"}, "edited": false, "score": 0, "creation_date": 1543380497, "post_id": 53511227, "comment_id": 93893898, "body": "&#39;this&#39; == your activity? Sorry I&#39;m not a kotlin person. I just want to know which line causes the leak."}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1543395453, "post_id": 53511227, "comment_id": 93900002, "body": "non static inner classes hold a reference to an activity. As such, if the inner class stays alive then so will the activity. Make the inner class static and try to hold a WeakReference to the Activity."}, {"owner": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1543395510, "post_id": 53511227, "comment_id": 93900039, "body": "Example: <a href=\"https://medium.com/android-stars/this-asynctask-class-should-be-static-or-leaks-might-occur-2254f3a0f18\" rel=\"nofollow noreferrer\">medium.com/android-stars/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 1383, "user_id": 3999808, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/BVpV8.png?s=128&g=1", "display_name": "Zun", "link": "https://stackoverflow.com/users/3999808/zun"}, "edited": false, "score": 0, "creation_date": 1543490081, "post_id": 53511227, "comment_id": 93942848, "body": "thanks  @ZUNJAE  , can you explain with respect to my code? will be really helpful and I can mark it as the correct answer"}], "answers": [{"comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 1, "creation_date": 1543585751, "post_id": 53556660, "comment_id": 93983011, "body": "That will make a leak smaller, but if the internal object leaked so will the separate class.  The right answer is to figure out where the reference that caused it to leak was, and either get rid of that reference totally, or at least when the object should go out of scope"}], "tags": [], "owner": {"reputation": 3600, "user_id": 1494902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y088H.jpg?s=128&g=1", "display_name": "Piotr Aleksander Chmielowski", "link": "https://stackoverflow.com/users/1494902/piotr-aleksander-chmielowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1543577277, "creation_date": 1543577277, "answer_id": 53556660, "question_id": 53511227, "link": "https://stackoverflow.com/questions/53511227/how-to-avoid-memory-leaks-due-to-custom-static-handler-class/53556660#53556660", "title": "How to avoid memory leaks due to custom static handler class?", "body": "<p>Anonymous classes (like yours) are non static. You can replace anonymous class with the normal class (just create class extending RetryCallback) and pass all needed objects as constructor arguments.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543602850, "post_id": 53558762, "comment_id": 93991816, "body": "wont let me offer you this bounty for the next 16 hours, will give it to you then"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543602888, "post_id": 53558762, "comment_id": 93991839, "body": "btw do you happen to know how to solve this : <a href=\"https://stackoverflow.com/questions/53547984/content-inside-webview-popup-is-hidden-behind-keyboardunique-case-please-read?noredirect=1#comment93963353_53547984\" title=\"content inside webview popup is hidden behind keyboardunique case please read\">stackoverflow.com/questions/53547984/&hellip;</a>"}], "tags": [], "owner": {"reputation": 413, "user_id": 1392654, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/MC2Xb.jpg?s=128&g=1", "display_name": "While True", "link": "https://stackoverflow.com/users/1392654/while-true"}, "is_accepted": true, "score": 1, "last_activity_date": 1543589650, "last_edit_date": 1543589650, "creation_date": 1543585458, "answer_id": 53558762, "question_id": 53511227, "link": "https://stackoverflow.com/questions/53511227/how-to-avoid-memory-leaks-due-to-custom-static-handler-class/53558762#53558762", "title": "How to avoid memory leaks due to custom static handler class?", "body": "<p>The Android Studio complaining is pretty reasonable. The problem is that anonymous classes capture reference to the parent class that they were created in.</p>\n\n<p>There are basically two solutions the \"not pretty\" and the ugly.) Both of them are about WeakReference. </p>\n\n<p><strong>#1</strong> The not pretty solution is to make a class that will take a weak ref</p>\n\n<pre><code>class ApiRetryCallback(activity: Activity): RetryCallback(NUMBER, DELAY) {\n\n    private val weakActivity = WeakReference(activity)\n\n    override fun onRetry(retryCount: Int) {\n\n        weakActivity.get()!!.mySdkApi.applicationStartup(this) //or weakThis.get()? to swallow null cases\n    }\n\n    override fun onCompleted(): Boolean {\n        weakActivity.get()!!.updateStatus(Callback.Status.StartUpSDK)\n\n        return true\n    }\n\n    override fun onFailed(e: MyException?) {\n        weakActivity.get()!!.updateStatus(Callback.Status.StartUpSDK, \"\", e)\n    }\n}\n</code></pre>\n\n<p>In activity:</p>\n\n<pre><code>private val startupCallback = ApiRetryCallback(this) //this is MainActivity here\n</code></pre>\n\n<p><strong>#2</strong> The ugly solution is based on a fact that lambdas should capture parent reference, only where there is a direct usage of it. So I came up with this substitution and I didn't see strong references in a debugger but you should check that:</p>\n\n<pre><code>private val startupCallback = {\n    val weakActivity = WeakReference(this@MainActivity)\n\n    object : RetryCallback(NUMBER, DELAY) { //returned as last expression\n\n        override fun onRetry(retryCount: Int) {\n\n            weakActivity.get()!!.mySdkApi.applicationStartup(this) //or weakThis.get()? to swallow null cases\n        }\n\n        //....else methods....\n    }\n\n}()\n</code></pre>\n\n<p>Here the lambda will be called immediately and will capture only the weak reference inside the object, also it will return the last expression wich is object.</p>\n\n<p><strong>#3</strong> While I was writing, I came up with a third solution, which is close to <strong>#2</strong></p>\n\n<pre><code>private val startupCallback = WeakReference(this).let { //this here is MainActivity\n    val weakActivity = it //it of let scope wich is WeakReference\n\n    object : RetryCallback(NUMBER, DELAY) { //returned as last expression\n\n        override fun onRetry(retryCount: Int) {\n\n            weakActivity.get()!!.mySdkApi.applicationStartup(this) //or weakThis.get()? to swallow null cases\n        }\n\n        //....else methods....\n    }\n\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 53558762, "answer_count": 2, "score": 5, "last_activity_date": 1543589650, "creation_date": 1543372185, "last_edit_date": 1543576947, "question_id": 53511227, "link": "https://stackoverflow.com/questions/53511227/how-to-avoid-memory-leaks-due-to-custom-static-handler-class", "title": "How to avoid memory leaks due to custom static handler class?", "body": "<p>I have certain memory leaks happening in my custom handler class ,but not sure how to fix it. checkedout a couple of examples online but nothing is specific to my code so not sure how to go about it :</p>\n\n<pre><code>private val startupCallback = object: RetryCallback(NUMBER, DELAY) {\n        override fun onRetry(retryCount: Int) {\n\n            mySdkApi.applicationStartup(this)\n        }\n\n        override fun onCompleted(): Boolean {\n            updateStatus(Callback.Status.StartUpSDK)\n\n            return true\n        }\n\n        override fun onFailed(e: MyException?) {\n            updateStatus(Callback.Status.StartUpSDK, \"\", e)\n        }\n    }\n</code></pre>\n\n<p>Android studio keeps prompting \"This handler class should be static or leaks might occur\".Any ideas how to go about it?</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1543388228, "post_id": 53511209, "comment_id": 93896540, "body": "So it basically works as you wanted with the extension function? the only problem is the missing IDE support for the import? if so: file a bug at the IDEs issue tracker..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1543388615, "post_id": 53511209, "comment_id": 93896709, "body": "by the way... a simple workaround for that: just write <code>.invoke()</code> and then the quick fix will import the extension function... the next quick fix applied on the <code>invoke</code> itself will then replace it with the direct call..."}], "answers": [{"comments": [{"owner": {"reputation": 411, "user_id": 9300117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47869377f0f460366061f5a9a74281c?s=128&d=identicon&r=PG", "display_name": "Spheniscine", "link": "https://stackoverflow.com/users/9300117/spheniscine"}, "edited": false, "score": 0, "creation_date": 1543390278, "post_id": 53511636, "comment_id": 93897439, "body": "Not quite. I should&#39;ve clarified. I actually wanted to <code>doSomething(Unit)</code> when Foo.invoke() is called (yes, including the Unit). But the particular thing I was trying to do didn&#39;t work anyway, so this question is mostly for academic curiosity now"}], "tags": [], "owner": {"reputation": 1, "user_id": 10288427, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991485100914577/picture?type=large", "display_name": "Vorawut Manawmoo", "link": "https://stackoverflow.com/users/10288427/vorawut-manawmoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1543375381, "creation_date": 1543375381, "answer_id": 53511636, "question_id": 53511209, "link": "https://stackoverflow.com/questions/53511209/kotlin-problem-with-invoke-and-parameterized-classes/53511636#53511636", "title": "Kotlin: Problem with invoke() and parameterized classes", "body": "<p>You try.</p>\n\n<pre><code>class Foo&lt;T&gt; {\n     fun invoke(value: T, listener: () -&gt; Unit){\n          // doSomething defined elsewhere\n\n          listener.invoke()\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 9300117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47869377f0f460366061f5a9a74281c?s=128&d=identicon&r=PG", "display_name": "Spheniscine", "link": "https://stackoverflow.com/users/9300117/spheniscine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543375381, "creation_date": 1543372058, "question_id": 53511209, "link": "https://stackoverflow.com/questions/53511209/kotlin-problem-with-invoke-and-parameterized-classes", "title": "Kotlin: Problem with invoke() and parameterized classes", "body": "<p>So I have an interesting problem. I have a parameterized class, Foo:</p>\n\n<pre><code>class Foo&lt;T&gt; {\n    operator fun invoke(value: T) = doSomething(value) // doSomething defined elsewhere\n}\n</code></pre>\n\n<p>And I want to be able to also define <code>invoke()</code> with no value if and only if T is Unit, which will call <code>invoke(Unit)</code>. I have tried defining an extension function operator fun <code>Foo&lt;Unit&gt;.invoke() = this.invoke(Unit)</code> outside the class, but it requires me to include an import statement wherever this extension is used, and the IDE I'm using (Android Studio) can't recognize when that extension is called using the shortcut <code>foo()</code> (it complains that <code>value</code> is missing), thus forcing me to include that import manually. Is there a better way to do this?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543364260, "post_id": 53510119, "comment_id": 93890252, "body": "<code>my_text_view</code> is an extension property created automatically by Kotlin View Binding"}], "answers": [{"comments": [{"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543364592, "post_id": 53510198, "comment_id": 93890326, "body": "It seems to me that <code>if (isAdded)</code> is by fact same as <code>my_text_view</code> null-checking (see my question edit)"}, {"owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 0, "creation_date": 1543364726, "post_id": 53510198, "comment_id": 93890362, "body": "If I move business logic to a viewmodel, should I unsubscribe the listener when fragment is closed?"}, {"owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "reply_to_user": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "edited": false, "score": 1, "creation_date": 1543364808, "post_id": 53510198, "comment_id": 93890372, "body": "If you use a ViewModel then you can listen to the viewmodel&#39;s data using LiveData, which handles the fragment lifecycle automatically, so you do not have to worry about subscribe/unsubscribe, happens automatically."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1543364004, "creation_date": 1543364004, "answer_id": 53510198, "question_id": 53510119, "link": "https://stackoverflow.com/questions/53510119/kotlin-view-binding-java-lang-illegalstateexception-view-must-not-be-null-insid/53510198#53510198", "title": "Kotlin View Binding java.lang.IllegalStateException: view must not be null inside listener", "body": "<p>You can check in your callback if the fragment is still added to its host activity,</p>\n\n<pre><code>FirebaseFirestore.getInstance()\n.collection(\"users\")\n.document(\"1\")\n.get()\n.addOnSuccessListener { doc -&gt;\n    if (isAdded) {\n        my_text_view.text = doc[\"name\"] as String\n    }\n}\n</code></pre>\n\n<p>However, a better solution would be to move your business logic to a viewmodel.</p>\n"}], "owner": {"reputation": 3252, "user_id": 6131611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3789df5ff075b7a2bfa71c8e2dccd18d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/6131611/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 1, "accepted_answer_id": 53510198, "answer_count": 1, "score": 4, "last_activity_date": 1543400259, "creation_date": 1543363466, "last_edit_date": 1543400259, "question_id": 53510119, "link": "https://stackoverflow.com/questions/53510119/kotlin-view-binding-java-lang-illegalstateexception-view-must-not-be-null-insid", "title": "Kotlin View Binding java.lang.IllegalStateException: view must not be null inside listener", "body": "<p>I'm using <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html#view-binding\" rel=\"nofollow noreferrer\">View Binding</a> from Kotlin Android Extensions:</p>\n\n<pre><code>import kotlinx.android.synthetic.main.fragment_user_profile.*\n</code></pre>\n\n<p>I want to display a value from Cloud Firestore in a <strong>fragment</strong>:</p>\n\n<pre><code>FirebaseFirestore.getInstance()\n    .collection(\"users\")\n    .document(\"1\")\n    .get()\n    .addOnSuccessListener { doc -&gt;\n        my_text_view.text = doc[\"name\"] as String\n    }\n</code></pre>\n\n<p>It works if the fragment is still shown when data is received. But if user close the fragment (pressing back) <em>before</em> data is received, it crashes:</p>\n\n<pre><code>java.lang.IllegalStateException: my_text_view must not be null\n</code></pre>\n\n<p>How do I avoid this?</p>\n\n<hr>\n\n<p>Of course I can use <code>my_text_view?.text = ...</code> but</p>\n\n<ul>\n<li><p>Someday I can forget to put <code>?</code></p></li>\n<li><p>It doesn't solve the problem that the listener stays alive after the fragment is destroyed</p></li>\n</ul>\n\n<p>I think I want something like <a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/Task.html#addOnSuccessListener(android.app.Activity,%20com.google.android.gms.tasks.OnSuccessListener%3C?%20super%20TResult%3E)\" rel=\"nofollow noreferrer\"><code>addOnSuccessListener(Activity, OnSuccessListener)</code></a> but for Fragment instead Activity</p>\n"}, {"tags": ["kotlin", "spring-data"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543363685, "post_id": 53510047, "comment_id": 93890101, "body": "Of course it must be mutable. The principle of JPA is to deal with managed entities, that you can modify, and whose state is tracked and automatcally made persistent. Using a data class is a poor choice for an entity, too: its equals() and hashCode() implementations wouldn&#39;t be correct and entities need a no-arg constructor."}, {"owner": {"reputation": 587, "user_id": 1144896, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/852a0c261ea9ff7ec2fda5ed437bde26?s=128&d=identicon&r=PG", "display_name": "tabiul", "link": "https://stackoverflow.com/users/1144896/tabiul"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543365443, "post_id": 53510047, "comment_id": 93890526, "body": "The no-arg part is resolved by kotlin compiler plugin <code>&quot;kotlin-jpa&quot;</code>. As for equals and hashcode, yep you do have a point there"}, {"owner": {"reputation": 587, "user_id": 1144896, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/852a0c261ea9ff7ec2fda5ed437bde26?s=128&d=identicon&r=PG", "display_name": "tabiul", "link": "https://stackoverflow.com/users/1144896/tabiul"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543365906, "post_id": 53510047, "comment_id": 93890620, "body": "Interestingly so many articles on the net uses data classes <a href=\"https://www.baeldung.com/kotlin-jpa\" rel=\"nofollow noreferrer\">baeldung.com/kotlin-jpa</a>, <a href=\"https://blog.codecentric.de/en/2017/06/kotlin-spring-working-jpa-data-classes/\" rel=\"nofollow noreferrer\">blog.codecentric.de/en/2017/06/&hellip;</a>. One article <a href=\"https://kotlinexpertise.com/hibernate-with-kotlin-spring-boo\" rel=\"nofollow noreferrer\">kotlinexpertise.com/hibernate-with-kotlin-spring-boo</a> talks about the hashcode issue but it also uses <code>val</code>, so not sure how the update works"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543366350, "post_id": 53510047, "comment_id": 93890718, "body": "The thing is if you make your entities immutable, you lose the huge advantage that JPA has: automatically persisting the state of the entities. Instead of relying on JPA to do it, you need to track which entities have been &quot;modified&quot; (i.e. copied), and remember to all save them at the end. And, even if it works, you&#39;re actually lying to yourself by claiming all these properties are val, since they need to be modified by Hibernate. You thus end up with vals which are effectively mutable. I much prefer to keep the dirty-checking of JPA, and to declare my vars as vars."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543366443, "post_id": 53510047, "comment_id": 93890740, "body": "What I use, though, is lateinit vars for non-null properties: it&#39;s my responsibility to initialize them before reading them when creating new entities, and I know JPA will always initialized them before I read them when loading them. That still gives me the benefit of never-null Kotlin properties."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543366568, "post_id": 53510047, "comment_id": 93890773, "body": "I think many bloggers are so excited about the conciseness of data classes that they abuse them, and don&#39;t really think about all their generated code, that doesn&#39;t fit with JPA. Or they simply don&#39;t master JPA enough."}, {"owner": {"reputation": 587, "user_id": 1144896, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/852a0c261ea9ff7ec2fda5ed437bde26?s=128&d=identicon&r=PG", "display_name": "tabiul", "link": "https://stackoverflow.com/users/1144896/tabiul"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543367134, "post_id": 53510047, "comment_id": 93890902, "body": "Thanks @JBNizet for your comments. Reading more, yes you are right on the dirt checking part also. I guess my usage is always explicitly calling the <code>save</code> method to save updated data and not depending on dirty check is the reason why I never faced this issue. I guess it all boils down to how you use it, if you use it t just read and write via repository then I guess no issue using data classes but if you depend on dirty check or you store in hasmap or set then yep using data classes is not right"}, {"owner": {"reputation": 587, "user_id": 1144896, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/852a0c261ea9ff7ec2fda5ed437bde26?s=128&d=identicon&r=PG", "display_name": "tabiul", "link": "https://stackoverflow.com/users/1144896/tabiul"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543367469, "post_id": 53510047, "comment_id": 93890972, "body": "One interesting thing I noticed is for some reason even when the <code>hashCode</code> is not same for before and after saving into db, the <code>equals</code> is true, which I have no idea why"}], "owner": {"reputation": 587, "user_id": 1144896, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/852a0c261ea9ff7ec2fda5ed437bde26?s=128&d=identicon&r=PG", "display_name": "tabiul", "link": "https://stackoverflow.com/users/1144896/tabiul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 960, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543362922, "creation_date": 1543362922, "question_id": 53510047, "link": "https://stackoverflow.com/questions/53510047/idiomatic-way-for-updating-repository-in-kotlin", "title": "Idiomatic Way for Updating Repository in Kotlin", "body": "<p>I am using Kotlin with my spring boot application and I am using Spring-JPA. I have defined my entities as such</p>\n\n<pre><code>@Entity\n@Table(name = \"customer\")\ndata class Customer(\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    val id: Long? = null,\n\n    @NotNull\n    @Size(max = 255)\n    @Column\n    val firstName: String,\n\n    @NotNull\n    @Size(max = 255)\n    @Column\n    val lastName: String,\n\n    @NotNull\n    @Size(max = 255)\n    @Column\n    val email: String,\n\n    @NotNull\n    @Temporal(TemporalType.TIMESTAMP)\n    val createdAt: Date,\n\n    @Temporal(TemporalType.TIMESTAMP)\n    val updatedAt: Date? = null\n)\n\n@Repository\ninterface CustomerRepository : CrudRepository&lt;Customer, Long&gt; {\n   fun findById(id: Long): Customer\n}\n\n@Service\nclass MyService(private val repository: CustomerRepository) {\n\n\n   fun update(id: Long, firstName: String, lastName: String, email: String):Customer {\n       val customer = repository.findById(id)\n       return repository.save(customer.copy(firstName=firstName, lastName=lastName, email=email)) // the reason for the copy as the attributes are val\n   }\n}\n</code></pre>\n\n<p>The example above is one way the update can be handled. The other way would be to make the Entity to use <code>var</code> instead of <code>val</code> so that it can be modified. What would be the recommended way to do this in Kotlin?</p>\n"}, {"tags": ["kotlin", "apache-kafka", "event-sourcing", "axon"], "comments": [{"owner": {"reputation": 47, "user_id": 5765113, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101618082062476/picture?type=large", "display_name": "Mishka", "link": "https://stackoverflow.com/users/5765113/mishka"}, "edited": false, "score": 0, "creation_date": 1543373536, "post_id": 53510017, "comment_id": 93892317, "body": "I&#39;ve reproduced the problem where you can observe the source: (<a href=\"https://github.com/mishkaechoes/axon-demo\" rel=\"nofollow noreferrer\">github.com/mishkaechoes/axon-demo</a>)"}, {"owner": {"reputation": 5093, "user_id": 2215649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pf7YD.jpg?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/2215649/steven"}, "edited": false, "score": 0, "creation_date": 1543396529, "post_id": 53510017, "comment_id": 93900610, "body": "So, you&#39;ve established that the event has been put on the topic, that&#39;s good. Have you also verified it&#39;s received by the component in Service B? I&#39;d add some debugging logic to figure that out.  If not, something might be wrong in the configuration of the receiving side of your application, thus Service B. Additionally, if you&#39;d use the (free) AxonServer plan, you do not have to bother with any configuration like this. It&#39;ll do the routing quite easily actually."}, {"owner": {"reputation": 47, "user_id": 5765113, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101618082062476/picture?type=large", "display_name": "Mishka", "link": "https://stackoverflow.com/users/5765113/mishka"}, "reply_to_user": {"reputation": 5093, "user_id": 2215649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pf7YD.jpg?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/2215649/steven"}, "edited": false, "score": 2, "creation_date": 1543433083, "post_id": 53510017, "comment_id": 93922205, "body": "Resolved. Going to upload a solution."}, {"owner": {"reputation": 10456, "user_id": 290425, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TnCaZ.jpg?s=128&g=1", "display_name": "Jan Galinski", "link": "https://stackoverflow.com/users/290425/jan-galinski"}, "edited": false, "score": 0, "creation_date": 1543997701, "post_id": 53510017, "comment_id": 94115393, "body": "@Mishka: Once you did, please answer your own question, I would be interested as well. Thanks"}, {"owner": {"reputation": 47, "user_id": 5765113, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101618082062476/picture?type=large", "display_name": "Mishka", "link": "https://stackoverflow.com/users/5765113/mishka"}, "reply_to_user": {"reputation": 10456, "user_id": 290425, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TnCaZ.jpg?s=128&g=1", "display_name": "Jan Galinski", "link": "https://stackoverflow.com/users/290425/jan-galinski"}, "edited": false, "score": 0, "creation_date": 1547229172, "post_id": 53510017, "comment_id": 95134450, "body": "@JanGalinski My recommendation is to create a shared jar with Event definitions removing the risk of different namespaces for the events. That&#39;s requirement number 1.  The second trick is to add <code>@ProcessingGroup(&quot;serviceB&quot;)</code> around the component you wish to <code>@EventHandler</code>.  In the` application.yml or properties have the following: <code>eventhandling:     processors:       serviceB:         mode: tracking         source: kafkaMessageSource</code> So you define the processor and then decorate a component with it."}], "owner": {"reputation": 47, "user_id": 5765113, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101618082062476/picture?type=large", "display_name": "Mishka", "link": "https://stackoverflow.com/users/5765113/mishka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543362680, "creation_date": 1543362680, "question_id": 53510017, "link": "https://stackoverflow.com/questions/53510017/axon-4-0-with-kafka-event-not-processed-second-service", "title": "Axon 4.0 with Kafka. Event not processed second service", "body": "<p>As stated above we are using Axon (AxonFramework 4.0) with Kafka.\nWe have two services:</p>\n\n<blockquote>\n  <p>ServiceA</p>\n  \n  <p>ServiceB</p>\n</blockquote>\n\n<p>A common library was created to hold <code>events</code>\nIn this case just one simple POJO</p>\n\n<p><code>@Revision(1.0)\nclass DummyEvent(val id: String, val value: String)</code></p>\n\n<p>This library <code>common.jar</code> is a dependency to both <code>ServiceA</code> and <code>ServiceB</code></p>\n\n<p>application.yml for both is nearly identical</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>axon:\r\n  kafka:\r\n    default-topic: axon-events\r\n    producer:\r\n      retries: 5\r\n      bootstrap-servers: localhost:9092\r\n      transaction-id-prefix: efcstx\r\n    consumer:\r\n      group-id: external-sync-group\r\n      bootstrap-servers: localhost:9092\r\n  distributed:\r\n    enabled: true\r\n  serializer:\r\n    messages: jackson\r\n  eventhandling:\r\n    processors:\r\n      common:\r\n        mode: tracking\r\n        source: kafkaMessageSource</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>When DummyEvent is fired from ServiceA we can see it published to Kafka and it can be consumed by @EventHandler in ServiceA. ServiceB fails to handle the event. </p>\n\n<p>Same behavior is observed when the event is fired from ServiceB. The event is successfully published to Kafka and can be consumed by @EventHandler in ServiceB but fails to be processed in ServiceA.</p>\n\n<p>We've tried multiple serialization approaches including the one seen above. Please advise any way you can.</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-android", "rx-kotlin"], "answers": [{"tags": [], "owner": {"reputation": 737, "user_id": 10715642, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QRLDtnm1-IE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ipSlUb1x7ARbIjnOaLC_Y9VX2jNQ/mo/photo.jpg?sz=128", "display_name": "Damon Baker", "link": "https://stackoverflow.com/users/10715642/damon-baker"}, "is_accepted": true, "score": 1, "last_activity_date": 1543392337, "creation_date": 1543392337, "answer_id": 53514768, "question_id": 53509536, "link": "https://stackoverflow.com/questions/53509536/mapping-custom-data-rxandroid-with-kotlin/53514768#53514768", "title": "mapping custom data RxAndroid with Kotlin", "body": "<p>The return value of a lambda in Kotlin is always the last expression in the block. </p>\n\n<p>So in this case the result of</p>\n\n<pre><code>.map { it.note = it.note.toUpperCase() }\n</code></pre>\n\n<p>is not returning a meaningful value.</p>\n\n<p>What you should do instead is this</p>\n\n<pre><code>.map { \n    it.note = it.note.toUpperCase()\n    it\n}\n</code></pre>\n\n<p>Which returns a type of Note instead of Unit.</p>\n"}], "owner": {"reputation": 114, "user_id": 8230672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9ad1d1b54adb583614231b28c4c2e?s=128&d=identicon&r=PG&f=1", "display_name": "FIL201121", "link": "https://stackoverflow.com/users/8230672/fil201121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 53514768, "answer_count": 1, "score": 0, "last_activity_date": 1543392337, "creation_date": 1543359575, "question_id": 53509536, "link": "https://stackoverflow.com/questions/53509536/mapping-custom-data-rxandroid-with-kotlin", "title": "mapping custom data RxAndroid with Kotlin", "body": "<p>I am trying to convert examples from <a href=\"https://www.androidhive.info/RxJava/android-getting-started-with-reactive-programming/#example5\" rel=\"nofollow noreferrer\">this article</a> from Java to Kotlin.\nI get error from picture at Exmaple 5:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vhp81.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vhp81.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I noticed, that without map() function I don't get this error</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZOVsj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZOVsj.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, what the point of this error and how to write it right?</p>\n"}, {"tags": ["android", "kotlin", "architecture", "clean-architecture"], "answers": [{"comments": [{"owner": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 0, "creation_date": 1543425618, "post_id": 53509766, "comment_id": 93918648, "body": "That looks nice! Only problem I can see in my case is that I would like to use some android type objects at least on presentation layer objects, like LatLng. My domain gradle module is kotlin only, so I can not use android stuff there."}, {"owner": {"reputation": 1828, "user_id": 6386664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d05db73070c86bfb908b2684794f633?s=128&d=identicon&r=PG", "display_name": "Fredy Mederos", "link": "https://stackoverflow.com/users/6386664/fredy-mederos"}, "reply_to_user": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 0, "creation_date": 1543428019, "post_id": 53509766, "comment_id": 93919790, "body": "Well, yo can allways use extension functions to accomplish that. In your presentation:    fun Building.getPositionLatLon() = LatLon(location.lat,location.lon)  It is just a proposal, if it becomes to complex you can allways create a mapper ;)"}, {"owner": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 0, "creation_date": 1543429142, "post_id": 53509766, "comment_id": 93920306, "body": "Yeh, thanks! Im already using extension functions to convert my models to another, they are pretty handy."}, {"owner": {"reputation": 1828, "user_id": 6386664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d05db73070c86bfb908b2684794f633?s=128&d=identicon&r=PG", "display_name": "Fredy Mederos", "link": "https://stackoverflow.com/users/6386664/fredy-mederos"}, "reply_to_user": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 0, "creation_date": 1543430445, "post_id": 53509766, "comment_id": 93920910, "body": "Yes they are awasome. I hope you can find a good use for domain models as interfaces as I did. Cheers"}, {"owner": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 1, "creation_date": 1543683069, "post_id": 53509766, "comment_id": 94010307, "body": "Now when i progressed a bit using this patter, I faced problem when passing my model to another activity via intent. So my model needs to implement Parcable, but as the model (interface) is defined in data layer (pure kotlin module), I can not use Parcable there. Maybe I just implement Parcable in data layer models, and just cast the interfaces in presentation layer to Parcable. This sounds bit hackish though."}, {"owner": {"reputation": 1828, "user_id": 6386664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d05db73070c86bfb908b2684794f633?s=128&d=identicon&r=PG", "display_name": "Fredy Mederos", "link": "https://stackoverflow.com/users/6386664/fredy-mederos"}, "reply_to_user": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "edited": false, "score": 0, "creation_date": 1543705528, "post_id": 53509766, "comment_id": 94015953, "body": "Hum you are right, I haven&#39;t faced that issue since I only send ids via intent but sometimes you need to send full models. Nevertheless your solution sounds good to me. I will look deeper in that issue.  Cheers"}], "tags": [], "owner": {"reputation": 1828, "user_id": 6386664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d05db73070c86bfb908b2684794f633?s=128&d=identicon&r=PG", "display_name": "Fredy Mederos", "link": "https://stackoverflow.com/users/6386664/fredy-mederos"}, "is_accepted": true, "score": 7, "last_activity_date": 1543361036, "creation_date": 1543361036, "answer_id": 53509766, "question_id": 53508484, "link": "https://stackoverflow.com/questions/53508484/clean-architecture-share-same-models-entities-with-different-layers/53509766#53509766", "title": "Clean architecture: share same models/entities with different layers", "body": "<p>In my domain module I have my models as interfaces (Kotlin allow us to have vals inside interfaces), the implemenations in data module and no models in presentation at all.</p>\n\n<p>Take a look at this small sample:</p>\n\n<p>domain:</p>\n\n<pre><code>interface IUserModel {\n    val id: String\n    val name: String\n}\n\ninterface UserRepository {\n    fun getUserDetails(id: String): IUserModel\n}\n</code></pre>\n\n<p>data:</p>\n\n<pre><code>@Entity\ndata class UserEntity(\n    @SerializedName(\"userId\")\n    override val id: String,\n    override val name: String\n) : IUserModel\n\nclass UserRepositoryImpl(val userDao: UserDao) : UserRepository {\n\n    override fun getUserDetails(id: String): IUserModel {\n        return userDao.getUser(id) //userDao.getUser returns a UserEntity\n    }\n}\n</code></pre>\n\n<p>presentation:</p>\n\n<pre><code>class UserDetailsViewModel(val userId: String, val userRepository: UserRepository) : ViewModel() {\n    val userData: LiveData&lt;IUserModel&gt; = MutableLiveData()\n    fun getUserData() {\n        (userData as MutableLiveData).postValue(userRepository.getUserDetails(userId))\n    }\n}\n</code></pre>\n\n<p>No mappers, no tons of data classes. </p>\n\n<p>I have a couple of projects with this sctructure and sometimes a mapper is needed (convert network models to database entities) but the verbosity is widely reduced using interfaces as models in domain.</p>\n"}, {"tags": [], "owner": {"reputation": 860, "user_id": 2048060, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e1d5df41134fb6497c5555bbd81c2835?s=128&d=identicon&r=PG", "display_name": "gts13", "link": "https://stackoverflow.com/users/2048060/gts13"}, "is_accepted": false, "score": 1, "last_activity_date": 1584127678, "creation_date": 1584127678, "answer_id": 60676232, "question_id": 53508484, "link": "https://stackoverflow.com/questions/53508484/clean-architecture-share-same-models-entities-with-different-layers/60676232#60676232", "title": "Clean architecture: share same models/entities with different layers", "body": "<p>I know this is an old question, but I would like to contribute a bit.</p>\n\n<p>So, yes this is clean architecture by the book. If you want to \"break\" the architecture, then I would suggest you to drop the Presentation Models, and use the Domain models instead.</p>\n\n<p>However, there are cases that a data model(entity) contains information that is not needed in the presentation layer. There you need a different model in the domain, and presentation layer. Do not pass information that is not needed!</p>\n"}, {"comments": [{"owner": {"reputation": 244, "user_id": 1835021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0hsQ.jpg?s=128&g=1", "display_name": "Malba", "link": "https://stackoverflow.com/users/1835021/malba"}, "edited": false, "score": 0, "creation_date": 1590105747, "post_id": 61239073, "comment_id": 109562438, "body": "Finding the balance between what is required for the project and what is the &quot;recommended way&quot; of doing something is an art in itself. But it is an important aspect of development. It is finding that balance between doing it quickly and correctly."}, {"owner": {"reputation": 91, "user_id": 7915392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGsoF.jpg?s=128&g=1", "display_name": "Ercan Akk&#246;k", "link": "https://stackoverflow.com/users/7915392/ercan-akk%c3%b6k"}, "edited": false, "score": 0, "creation_date": 1618543451, "post_id": 61239073, "comment_id": 118638368, "body": "Hi, thanks for the explanation. I totally agree with you but I have a question about mappers. My domain module consumes the data module to retrieve data from cache or remote and I have separate models for those modules. I need only one mapper to map entity to domain model, so which module should I put that mapper in?"}, {"owner": {"reputation": 413, "user_id": 6185975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c970d20395df0dc1d7c3dbad66928ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lenin", "link": "https://stackoverflow.com/users/6185975/lenin"}, "edited": false, "score": 0, "creation_date": 1618833026, "post_id": 61239073, "comment_id": 118713894, "body": "Domain module should not know any other module so the mappers should be in data module (as it knows both entities).  Just as clarification be careful with dependencies. If you are using Android you can divide project in modules and specify in gradle which module depends on each other. That way you will not put any dependency in domain module so you will not be able to put mappers in it even if you want to."}], "tags": [], "owner": {"reputation": 413, "user_id": 6185975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c970d20395df0dc1d7c3dbad66928ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lenin", "link": "https://stackoverflow.com/users/6185975/lenin"}, "is_accepted": false, "score": 2, "last_activity_date": 1586986745, "creation_date": 1586986745, "answer_id": 61239073, "question_id": 53508484, "link": "https://stackoverflow.com/questions/53508484/clean-architecture-share-same-models-entities-with-different-layers/61239073#61239073", "title": "Clean architecture: share same models/entities with different layers", "body": "<p>Actually, it's right the way you are doing it. To make an app totally Clean you should have different representations of you entities in each layer, and convert them with mappers. This allow you to only change the mappers when you need to change some entity.</p>\n\n<p>For example you may receive some data from the server that you don't want to be shown in UI, so you don't have it in your presentation entity. Another example would be if you want to change an argument name in the data entity. If you access it directly from presentation, you will need to change all the accesses. Instead, if you have mappers, the only thing you have to do is to change the mapper.</p>\n\n<p>Obviously, Clean Architecture is a complex one, that get more sense in big and long time projects, where changes may arise more often. So, it's okay if you want to get rid of doing lot of code if you are doing a little app. In this case i will advice you to use the same entity for Domain and Presentation, and keep mappers for data ones, because as data depends on API, that changes doesn't depend on you, and you would get some benefits from mappers.</p>\n"}], "owner": {"reputation": 2925, "user_id": 2051647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/be495a7b8069eb4c4017643c7a0a5f99?s=128&d=identicon&r=PG", "display_name": "devha", "link": "https://stackoverflow.com/users/2051647/devha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2104, "favorite_count": 4, "accepted_answer_id": 53509766, "answer_count": 3, "score": 5, "last_activity_date": 1586986745, "creation_date": 1543354341, "question_id": 53508484, "link": "https://stackoverflow.com/questions/53508484/clean-architecture-share-same-models-entities-with-different-layers", "title": "Clean architecture: share same models/entities with different layers", "body": "<p>In my clean architecture Android app setup, I have own Gradle module for each layer (data, domain, presentation). I also have own models/entities for each layers, which are converted from one layer to another using mappers. This leads to situation where I have a lot of kotlin data classes, representing basically same thing, but in different layer. This does not sound right to me.</p>\n\n<p>Simple example:</p>\n\n<p><strong>Data layer</strong> - Android library module</p>\n\n<pre><code>@JsonClass(generateAdapter = true)\ndata class BuildingEntity(\n    @Json(name = \"u_id\")\n    val id: String,\n\n    val name: String,\n\n    val latitude: Double,\n\n    val longitude: Double,\n\n    @Json(name = \"current_tenants\")\n    val tenants: List&lt;TenantEntity&gt;? = null\n)\n</code></pre>\n\n<p><strong>Domain layer</strong> - Pure Kotlin module</p>\n\n<pre><code>data class Building(\n\n    val id: String,\n\n    val name: String,\n\n    val location: CoordinatePoint,\n\n    val tenants: List&lt;Tenant&gt;? = null\n</code></pre>\n\n<p><strong>Presentation layer</strong> Android app module</p>\n\n<pre><code>data class BuildingModel(\n\n    val id: String,\n\n    val name: String,\n\n    val location: LatLng,\n\n    val tenants: List&lt;TenantModel&gt; = listOf()\n)\n</code></pre>\n\n<p><code>BuildingEntity</code> is fetched from external network api.</p>\n\n<p>This nicely separates each modules from each other, but in my app I have a lot of different entities with nested structures. So I end up writing a lot of kotlin data classes and mappers.</p>\n\n<p>How I can simplify this? Can I remove <code>Building</code> class and use <code>BuildingEntity</code> on data and domain layer? Just convert <code>BuildingEntity</code> to <code>BuildingModel</code> on presentation layer?</p>\n\n<p>Im trying find practical answers, how people are solving this kind of problem, not ending up to writing tons of data classes and mappers?</p>\n"}, {"tags": ["kotlin", "rx-android"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1543365408, "post_id": 53508367, "comment_id": 93890518, "body": "The return type deduced for the <code>map</code> call is <code>Observable&lt;in Unit!&gt;</code>. Try to return <code>it</code> in the <code>map</code> function parameter."}], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 8230672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9ad1d1b54adb583614231b28c4c2e?s=128&d=identicon&r=PG&f=1", "display_name": "FIL201121", "link": "https://stackoverflow.com/users/8230672/fil201121"}, "is_accepted": true, "score": 1, "last_activity_date": 1543433335, "creation_date": 1543433335, "answer_id": 53526743, "question_id": 53508367, "link": "https://stackoverflow.com/questions/53508367/disposableobserver-is-not-subtype-of-observer/53526743#53526743", "title": "DisposableObserver&lt;&gt; is not subtype of Observer&lt;&gt;", "body": "<p>All that I needed was return statement (from picture below)\nThanks for <a href=\"https://stackoverflow.com/a/53514768/8230881\">answer</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/w3fxY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w3fxY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 114, "user_id": 8230672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab9ad1d1b54adb583614231b28c4c2e?s=128&d=identicon&r=PG&f=1", "display_name": "FIL201121", "link": "https://stackoverflow.com/users/8230672/fil201121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 53526743, "answer_count": 1, "score": 0, "last_activity_date": 1543433335, "creation_date": 1543353873, "question_id": 53508367, "link": "https://stackoverflow.com/questions/53508367/disposableobserver-is-not-subtype-of-observer", "title": "DisposableObserver&lt;&gt; is not subtype of Observer&lt;&gt;", "body": "<p>I am trying to convert <a href=\"https://www.androidhive.info/RxJava/android-getting-started-with-reactive-programming/#example5\" rel=\"nofollow noreferrer\">this RxJava/RxAndroid lesson</a> to RxKotlin/RxAndroid.\nAt the method at Example5 I get error from picture </p>\n\n<p><a href=\"https://i.stack.imgur.com/pY21K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pY21K.png\" alt=\"error\"></a></p>\n\n<p>My getNotesObservable() function is:</p>\n\n<pre><code>fun getNotesObservable(): Observable&lt;Note&gt;{\n    val notes: List&lt;Note&gt; = prepareNotes()\n    return Observable.create {\n        for (note in notes) {\n            if (!it.isDisposed){ // onNext only if observable is not disposed\n                it.onNext(note)\n            }\n        }\n\n        if (!it.isDisposed) {\n            it.onComplete()\n        }\n    }\n}\n</code></pre>\n\n<p>and part with error is: </p>\n\n<pre><code>disposable.add(\n        getNotesObservable().subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .map{\n                it.note = it.note.toUpperCase()\n            }\n            .subscribeWith(getNotesObserver())\n    )\n</code></pre>\n\n<p>So, what's should I change in my code? </p>\n"}, {"tags": ["java", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1543363386, "post_id": 53508186, "comment_id": 93890024, "body": "Use a builder in the component with a BindsInstance, @BindsInstance abstract fun presenter()( presenter : StriSplashScreenContract.Presenterg ) : Builder"}, {"owner": {"reputation": 921, "user_id": 5326910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07bd35bd9f4786345b3b1b479e0351c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Aleksic", "link": "https://stackoverflow.com/users/5326910/aleksander-aleksic"}, "reply_to_user": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 0, "creation_date": 1543391894, "post_id": 53508186, "comment_id": 93898202, "body": "But this will require me to provide the presenter when building the component. Let&#39;s say the presenter has some dependencies, can I use BindInstance then?"}, {"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1543397100, "post_id": 53508186, "comment_id": 93900946, "body": "Dagger does not know how to either create (add <code>@Inject</code> on the constructor) or find (add a <code>@Provides</code> annotated method to a module) <code>SplashScreenPresenter</code>. You probably want constructor injection here, but you need to supply the presenter <i>somehow</i>. Please also <a href=\"https://stackoverflow.com/q/44912080/1837367\">see the more general information here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 921, "user_id": 5326910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07bd35bd9f4786345b3b1b479e0351c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Aleksic", "link": "https://stackoverflow.com/users/5326910/aleksander-aleksic"}, "edited": false, "score": 0, "creation_date": 1543390886, "post_id": 53510241, "comment_id": 93897751, "body": "Did not help, But why would I need the @Inject constructor if I&#39;m not injecting anything to the presenter?"}, {"owner": {"reputation": 968, "user_id": 5511947, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BDYhnOYieM0/AAAAAAAAAAI/AAAAAAAAC7M/UTSsQXWNTj4/photo.jpg?sz=128", "display_name": "Vairavan", "link": "https://stackoverflow.com/users/5511947/vairavan"}, "edited": false, "score": 1, "creation_date": 1543416461, "post_id": 53510241, "comment_id": 93912773, "body": "@Inject when used in constructor also works as Provides. Tells Dagger to use that constructor to create an instance when needed."}], "tags": [], "owner": {"reputation": 12970, "user_id": 2741273, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/71f8f37ebda905a8fffeb75e91b87a89?s=128&d=identicon&r=PG&f=1", "display_name": "Francesc", "link": "https://stackoverflow.com/users/2741273/francesc"}, "is_accepted": false, "score": 0, "last_activity_date": 1543364391, "creation_date": 1543364391, "answer_id": 53510241, "question_id": 53508186, "link": "https://stackoverflow.com/questions/53508186/presenter-cannot-be-provided-without-an-provides-annotated-method/53510241#53510241", "title": "Presenter cannot be provided without an @Provides-annotated method", "body": "<p>You need the @Inject annotation,</p>\n\n<pre><code>class SplashScreenPresenter @Inject constructor() : SplashScreenContract.Presenter { ... }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 921, "user_id": 5326910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07bd35bd9f4786345b3b1b479e0351c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Aleksic", "link": "https://stackoverflow.com/users/5326910/aleksander-aleksic"}, "is_accepted": false, "score": 0, "last_activity_date": 1543782547, "creation_date": 1543782547, "answer_id": 53584319, "question_id": 53508186, "link": "https://stackoverflow.com/questions/53508186/presenter-cannot-be-provided-without-an-provides-annotated-method/53584319#53584319", "title": "Presenter cannot be provided without an @Provides-annotated method", "body": "<p>It was a silly mistake by me..</p>\n\n<p>I annotated <code>SplashScreenScope</code> as <code>@Qualifier</code> instead of <code>@Scope</code></p>\n"}], "owner": {"reputation": 921, "user_id": 5326910, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/07bd35bd9f4786345b3b1b479e0351c9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Aleksic", "link": "https://stackoverflow.com/users/5326910/aleksander-aleksic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543782547, "creation_date": 1543353068, "question_id": 53508186, "link": "https://stackoverflow.com/questions/53508186/presenter-cannot-be-provided-without-an-provides-annotated-method", "title": "Presenter cannot be provided without an @Provides-annotated method", "body": "<p>I'm struggling seeing why I get this error: <code>Presenter cannot be provided without an @Provides-annotated method.</code></p>\n\n<p>I have even tried to just strip out everything and make it as simple as possible, but I still get the error. What am I doing wrong?</p>\n\n<p>Component:</p>\n\n<pre><code>@Component(modules = [SplashScreenModule::class])\ninterface SplashScreenComponent {\n   fun presenter() : SplashScreenContract.Presenter\n}\n</code></pre>\n\n<p>Module:</p>\n\n<pre><code>@Module\nabstract class SplashScreenModule {\n\n   @Binds\n   @SplashScreenScope\n   abstract fun providesSplashScreenPresenter(presenter: SplashScreenPresenter) : SplashScreenContract.Presenter\n}\n</code></pre>\n\n<p>Presenter:</p>\n\n<pre><code>class SplashScreenPresenter : SplashScreenContract.Presenter { ... }\n</code></pre>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543355717, "post_id": 53508161, "comment_id": 93887397, "body": "src/main/resources is for resources that must be bundled into your application jar, and that the application needs to read at runtime (like properties files, or images, or sounds). Not for libraries that must be in the compileclasspath of the application at build time. That&#39;s what the <code>implementation</code> configuration is for. Also, the source property of the JavaCompile task, <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html#org.gradle.api.tasks.compile.JavaCompile:source\" rel=\"nofollow noreferrer\">as documented</a>, is read-only, and contains the file tree of the Java source files to compile"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543355995, "post_id": 53508161, "comment_id": 93887533, "body": "You don&#39;t have any Java source file to compile, since you&#39;re using Kotlin, and a jar file is not a Java source file. The traditional way of using a library in an application is to publish the library in a repository, and to download this library from the repository. if you really want to use it from the file system, read <a href=\"https://docs.gradle.org/current/userguide/declaring_dependencies.html#sec:declaring_file_dependency\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543381549, "post_id": 53508161, "comment_id": 93894187, "body": "@JBNizet kindly see my update. thanks"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543387638, "post_id": 53508161, "comment_id": 93896289, "body": "You must not create another configuration. The jar should be added to the existing implementation configuration, in order to be added to the compile classpath: <code>dependencies { implementation(files(&quot;src&#47;main&#47;libs&#47;blogiclib.jar&quot;)) }</code>."}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543392324, "post_id": 53508161, "comment_id": 93898400, "body": "Thanks @JBNizet, the librry itself is feasible now as <code>import blogiclib.Library</code> not as <code>import blogiclib.LibraryKt</code>, but getting error upon calling its function <code>someLibraryMethod()</code> as unresolved reference!"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543395654, "post_id": 53508161, "comment_id": 93900112, "body": "someLibraryMethod() is a method of the class Library. You need to create an instance of the Library class and call the method on the created object."}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543396369, "post_id": 53508161, "comment_id": 93900511, "body": "@JBNizet how to do so, execuse me I&#39;m new to Java and Kotlin"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543397859, "post_id": 53508161, "comment_id": 93901397, "body": "Same as what you do with App: you cal its constructor: <code>Library().someLibraryMethod()</code>"}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543398519, "post_id": 53508161, "comment_id": 93901856, "body": "Thanks alot @JBNizet, it is working now."}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1543398589, "post_id": 53508161, "comment_id": 93901897, "body": "Can you advice if I&#39;ve to do the same if I want to call native library <code>lib.so</code> or that is completly different, any guide/reference?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1543417999, "post_id": 53508161, "comment_id": 93913800, "body": "AFAIK, Kotlin doesn&#39;t have any specific support for using native libraries. That&#39;s the kind of thing you try to avoid in general, and Java has a hude ecosystem. My last experience of doing that was literally 20 years ago, with JNI, and I have no idea what the best way of doing that is nowadays."}], "answers": [{"tags": [], "owner": {"reputation": 106555, "user_id": 597657, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0h5ec.jpg?s=128&g=1", "display_name": "Eng.Fouad", "link": "https://stackoverflow.com/users/597657/eng-fouad"}, "is_accepted": true, "score": 7, "last_activity_date": 1561940902, "creation_date": 1561940902, "answer_id": 56828958, "question_id": 53508161, "link": "https://stackoverflow.com/questions/53508161/how-can-i-add-local-resources-using-gradle-kotlin-dsl/56828958#56828958", "title": "How can I add local resources using Gradle Kotlin-DSL", "body": "<p>You can include all jar files in some folders as follows:</p>\n\n<pre><code>dependencies {\n    implementation(fileTree(\"libs/compile\"))\n    compileOnly(fileTree(\"libs/provided\"))\n}\n</code></pre>\n\n<p>Alternatively, select specific files:</p>\n\n<pre><code>repositories {\n    flatDir {\n        dirs(\"libs/compile\")\n        dirs(\"libs/provided\")\n    }\n}\n\ndependencies {\n    implementation(\":gson-2.8.5\")\n    compileOnly(\":javaee-api-8.0\")\n}\n</code></pre>\n"}], "owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4480, "favorite_count": 2, "accepted_answer_id": 56828958, "answer_count": 1, "score": 5, "last_activity_date": 1561940902, "creation_date": 1543352935, "last_edit_date": 1543381521, "question_id": 53508161, "link": "https://stackoverflow.com/questions/53508161/how-can-i-add-local-resources-using-gradle-kotlin-dsl", "title": "How can I add local resources using Gradle Kotlin-DSL", "body": "<p>I'm trying to test gradle 5 using kotlin DSL.</p>\n\n<p>I created a lib, and built it as below:</p>\n\n<pre><code>Hasans-Air:blogiclib h_ajsf$ gradle init --type=kotlin-library\n\nStarting a Gradle Daemon, 1 busy Daemon could not be reused, use --status for details\n\nSelect build script DSL:\n\n1: groovy\n\n2: kotlin\n\nEnter selection (default: kotlin) [1..2] 2\n\nProject name (default: blogiclib):\u00a0\n\nSource package (default: blogiclib):\u00a0\n\n**BUILD SUCCESSFUL** in 16s\n\n2 actionable tasks: 2 executed\n\nHasans-Air:blogiclib h_ajsf$ ls\n\nbuild.gradle.kts gradlew settings.gradle.kts\n\ngradle gradlew.bat src\n\nHasans-Air:blogiclib h_ajsf$ code .\n\nHasans-Air:blogiclib h_ajsf$ gradle build\n</code></pre>\n\n<p>Then I got the output file generated as: <code>build\\libs\\blogiclib.jar</code></p>\n\n<p>The <code>Library.kt</code> file generated is:</p>\n\n<pre><code>package blogiclib\n\nclass Library {\n    fun someLibraryMethod(): Boolean {\n        return true\n    }\n}\n</code></pre>\n\n<p>And the <code>build.gradle.kts</code> generated is:</p>\n\n<pre><code>plugins {\n    id(\"org.jetbrains.kotlin.jvm\").version(\"1.3.10\")\n}\n\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test\")\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test-junit\")\n}\n</code></pre>\n\n<p>Then I generated a kotlin app and tested it as below:</p>\n\n<pre><code>Hasans-Air:gradle h_ajsf$ gradle init --type=kotlin-application\n\nStarting a Gradle Daemon (subsequent builds will be faster)\n\nSelect build script DSL:\n\n1: groovy\n\n2: kotlin\n\nEnter selection (default: kotlin) [1..2] 2\n\nProject name (default: gradle): blogic\n\nSource package (default: blogic):\u00a0\n\n**BUILD SUCCESSFUL** in 25s\n\n2 actionable tasks: 2 executed\n\nHasans-Air:gradle h_ajsf$ ls\n\nbuild.gradle.kts gradlew settings.gradle.kts\n\ngradle gradlew.bat src\n\nHasans-Air:gradle h_ajsf$ code .\n\nHasans-Air:gradle h_ajsf$ gradle run\n**BUILD SUCCESSFUL** in 6m 4s\n\n3 actionable tasks: 3 executed\n\nHasans-Air:gradle h_ajsf$ gradle run\n\n**&amp;gt; Task :run**\n\nHello world.\n</code></pre>\n\n<p>Then I added the previously generated lib <code>blogiclib.jar</code> to the folder: <code>main\\resources</code></p>\n\n<p>And made my <code>App.kt</code> file as:</p>\n\n<pre><code>package blogic\n\nimport blogiclib.LibraryKt\n\nclass App {\n    val greeting: String\n        get() {\n            return \"Hello world.\"\n        }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    println(\"${App().greeting} = someLibraryMethod()\")\n}\n</code></pre>\n\n<p>And its <code>build.gradle.kts</code> based on my understanding from <a href=\"https://docs.gradle.org/current/userguide/working_with_files.html\" rel=\"noreferrer\">here</a> as:</p>\n\n<pre><code>plugins {\n    id(\"org.jetbrains.kotlin.jvm\").version(\"1.3.10\")\n    application\n}\n\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test\")\n    testImplementation(\"org.jetbrains.kotlin:kotlin-test-junit\")\n\n}\n\napplication {\n    mainClassName = \"blogic.AppKt\"\n}\n\ntask&lt;JavaCompile&gt;(\"compile\") {\n    source = fileTree(file(\"src/main/resources/blogiclib.jar\"))\n}\n</code></pre>\n\n<p>But at compiling I got the below error:</p>\n\n<blockquote>\n<pre><code>Hasans-Air:gradle h_ajsf$ gradle run\n\ne: /Users/h_ajsf/Documents/gradle/src/main/kotlin/blogic/App.kt: (6, 8): Unresolved reference: blogiclib\n\n**&amp;gt; Task :compileKotlin** FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\n\nExecution failed for task ':compileKotlin'.\n\n&amp;gt; Compilation error. See log for more details\n\n* Try:\n\nRun with **--stacktrace** option to get the stack trace. Run with **--info** or **--debug** option to get more log output. Run with **--scan** to get full insights.\n\n* Get more help at **https://help.gradle.org**\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\n\nUse '--warning-mode all' to show the individual deprecation warnings.\n\nSee https://docs.gradle.org/5.0/userguide/command_line_interface.html#sec:command_line_warnings\n\n**BUILD FAILED** in 1s\n\n2 actionable tasks: 2 executed\n</code></pre>\n</blockquote>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In reference to the comments received, I did the below:</p>\n\n<ol>\n<li>Moved the library file to folder <code>src/main/libs</code>: </li>\n<li><p>Added the below code to the <code>build.gradle.kts</code>:</p>\n\n<p>configurations {\n    create(\"externalLibs\")\n}</p>\n\n<p>dependencies {\n    \"externalLibs\"(files(\"src/main/libs/blogiclib.jar\"))\n}</p></li>\n</ol>\n\n<p>instead of:</p>\n\n<pre><code>task&lt;JavaCompile&gt;(\"compile\") {\n    source = fileTree(file(\"src/main/resources/blogiclib.jar\"))\n}\n</code></pre>\n\n<p>but still getting the same error :(</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 221545, "user_id": 535871, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/nhcvo.jpg?s=128&g=1", "display_name": "Ted Hopp", "link": "https://stackoverflow.com/users/535871/ted-hopp"}, "edited": false, "score": 0, "creation_date": 1543352601, "post_id": 53508043, "comment_id": 93886038, "body": "Can you provide an example of what you&#39;re trying to accomplish? It&#39;s not clear what you&#39;re asking."}], "answers": [{"comments": [{"owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "edited": false, "score": 0, "creation_date": 1543372588, "post_id": 53508093, "comment_id": 93892109, "body": "Perfect Solution! Exactly what I was looking for, Thanks"}, {"owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "edited": false, "score": 0, "creation_date": 1543374110, "post_id": 53508093, "comment_id": 93892406, "body": "Can you please guide me how I can save multiple function calls in a list and then call them one by one?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 7, "last_activity_date": 1543353827, "last_edit_date": 1543353827, "creation_date": 1543352567, "answer_id": 53508093, "question_id": 53508043, "link": "https://stackoverflow.com/questions/53508043/how-can-i-save-function-call-in-android-and-use-it-latter-again-android/53508093#53508093", "title": "How can I save function call in android and use it latter again Android", "body": "<p>Wrap the function call itself into a new function and save it by assigning it to a variable:</p>\n\n<pre><code>val savedFun = { myFunction(\"Ali\", \"ali@test.com\") }\n</code></pre>\n\n<p>Then call it whenever you need it: <code>savedFun()</code></p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1543524619, "creation_date": 1543524619, "answer_id": 53547368, "question_id": 53508043, "link": "https://stackoverflow.com/questions/53508043/how-can-i-save-function-call-in-android-and-use-it-latter-again-android/53547368#53547368", "title": "How can I save function call in android and use it latter again Android", "body": "<p>Since the question came up in the comments:</p>\n\n<blockquote>\n  <p>How I can save multiple function calls in a list and then call them one by one?</p>\n</blockquote>\n\n<p>If you don't want to pass in any parameters to your lambdas and don't care for the return value you can do something like this:</p>\n\n<pre><code>val functionList = listOf(\n    { myFunction(\"Ali\", \"ali@test.com\") },\n    { myFunction(\"John\", \"john@doe.com\") },\n    { println(\"hello\") }\n)\n\nfunctionList.forEach{ it() } // invoke them one by one\n</code></pre>\n\n<p>In case you are interested, the inferred type of functionList is <code>List&lt;() -&gt; Unit&gt;</code></p>\n"}], "owner": {"reputation": 4738, "user_id": 5361964, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/mh6DJ.jpg?s=128&g=1", "display_name": "Zohab Ali", "link": "https://stackoverflow.com/users/5361964/zohab-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 53508093, "answer_count": 2, "score": 3, "last_activity_date": 1543524619, "creation_date": 1543352300, "last_edit_date": 1543427586, "question_id": 53508043, "link": "https://stackoverflow.com/questions/53508043/how-can-i-save-function-call-in-android-and-use-it-latter-again-android", "title": "How can I save function call in android and use it latter again Android", "body": "<p>Lets say I have a function <code>fun myFunction(name:String, email:String){}</code> and when I call this function <code>myFunction('Ali', 'ali@test.com')</code> how can I save this call and use it later same exactly call with same parameters?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1543349864, "post_id": 53507232, "comment_id": 93884770, "body": "This is actually the implementation of the extension function MutableCollection.removeAll(). You&#39;re not supposed to call it that way, but instead as if it was an instance method of MutableCollection: mutableCollection.removeAll(otherCollection)"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1543351755, "post_id": 53507232, "comment_id": 93885613, "body": "this looks like Java, you won&#39;t import <code>CollectionsKt</code> in Kotlin code"}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 1, "creation_date": 1543352123, "post_id": 53507232, "comment_id": 93885814, "body": "just use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll(java.util.Collection)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 6431114, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C9TXpiBFOkg/AAAAAAAAAAI/AAAAAAAAIWs/3kOXl0MXaJg/photo.jpg?sz=128", "display_name": "defvs Daniel", "link": "https://stackoverflow.com/users/6431114/defvs-daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1598530776, "creation_date": 1598530776, "answer_id": 63615849, "question_id": 53507232, "link": "https://stackoverflow.com/questions/53507232/what-does-collectionskt-removeall-do/63615849#63615849", "title": "What does CollectionsKt.removeAll do?", "body": "<p><code>kotlin.collections.CollectionsKt</code> is that Java class for interoperability by Kotlin.\nIn Kotlin, you should use <code>x.removeAll(y)</code> instead.</p>\n<p>removeAll is a extension function, see the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/remove-all.html\" rel=\"nofollow noreferrer\">documentation on it</a></p>\n<p>From the documentation :</p>\n<blockquote>\n<p>Removes all of this collection's elements that are also contained in the specified collection.</p>\n</blockquote>\n<p>It will return x with every content of y removed from it.</p>\n<hr />\n<p>Coming back to CollectionsKt.removeAll, you can use it in your kotlin code although it shoudln't be used, where x is the collection on which it is executed. So it will return x minus the contents of y.</p>\n"}], "owner": {"reputation": 14007, "user_id": 1061426, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/25168a6bb2e34ea3c822ab2fdfa33b5b?s=128&d=identicon&r=PG", "display_name": "bharal", "link": "https://stackoverflow.com/users/1061426/bharal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1598530776, "creation_date": 1543348807, "last_edit_date": 1543349313, "question_id": 53507232, "link": "https://stackoverflow.com/questions/53507232/what-does-collectionskt-removeall-do", "title": "What does CollectionsKt.removeAll do?", "body": "<p>I'm converting some kotlin code to java. </p>\n\n<p>I have</p>\n\n<pre><code>import kotlin.collections.CollectionsKt; \n...\nCollectionsKt.removeAll(x, y);\n</code></pre>\n\n<p>I don't find the kotlin documentation very useful however - i can see that this</p>\n\n<blockquote>\n  <p>Removes all of this collection's elements that are also contained in the specified collection.</p>\n</blockquote>\n\n<p>But I am unsure if the operation, at the end, leaves </p>\n\n<ol>\n<li>x less anything in y. </li>\n<li>y less anything in x.</li>\n</ol>\n\n<p>What is the action here?</p>\n"}, {"tags": ["android-studio", "kotlin"], "comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 3, "creation_date": 1543347055, "post_id": 53506632, "comment_id": 93883374, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3285412/limit-text-length-of-edittext-in-android\">Limit text length of EditText in Android</a>"}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 1, "last_activity_date": 1543352957, "last_edit_date": 1543352957, "creation_date": 1543352249, "answer_id": 53508030, "question_id": 53506632, "link": "https://stackoverflow.com/questions/53506632/how-to-set-limit-to-edit-text-limit-in-kotlinlang/53508030#53508030", "title": "how to set limit to edit text limit in kotlinlang", "body": "<p>You need 2 attributes for each <code>EditText</code>:</p>\n\n<pre><code>android:maxLength=\"3\"\nandroid:inputType=\"number\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10713298, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/---7zxywj-tA/AAAAAAAAAAI/AAAAAAAAACI/BtmgxDlDfLk/photo.jpg?sz=128", "display_name": "Muhammad Yousef Seddighi", "link": "https://stackoverflow.com/users/10713298/muhammad-yousef-seddighi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 53508030, "answer_count": 1, "score": 0, "last_activity_date": 1543352957, "creation_date": 1543346046, "last_edit_date": 1543347237, "question_id": 53506632, "link": "https://stackoverflow.com/questions/53506632/how-to-set-limit-to-edit-text-limit-in-kotlinlang", "title": "how to set limit to edit text limit in kotlinlang", "body": "<p><em>hi i want set limit for my text edit in</em> <strong>kotlin</strong><br>\n<strong>please help...!</strong><br><br>\n<a href=\"https://i.stack.imgur.com/D2J8O.jpg\" rel=\"nofollow noreferrer\">i want set 3 digit number for each of this inputs</a></p>\n\n<pre><code>        var num1=edt_no.text\n        var num2=edt_ntw.text\n        var num3=edt_nth.text\n        var num4=edt_f.text\n        when{\n            edt_no.text.isEmpty() -&gt; txt_res.text=\"First is empty\"\n            edt_ntw.text.isEmpty() -&gt; txt_res.text=\"second is empty\"\n            edt_nth.text.isEmpty() -&gt; txt_res.text=\"third is empty\"\n            edt_f.text.isEmpty() -&gt; txt_res.text=\"Fourth is empty\"\n            else -&gt; calc(num1,num2,num3,num4)\n        }\n</code></pre>\n"}, {"tags": ["android", "http", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "edited": false, "score": 0, "creation_date": 1543351021, "post_id": 53505490, "comment_id": 93885291, "body": "Now it waits for a response, however it doesn&#39;t send the file. Do you have any idea why?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "edited": false, "score": 0, "creation_date": 1543351219, "post_id": 53505490, "comment_id": 93885364, "body": "maybe your <code>post</code> method works incorrectly, or file doesn&#39;t exists. Did it work before?"}, {"owner": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "edited": false, "score": 0, "creation_date": 1543351719, "post_id": 53505490, "comment_id": 93885592, "body": "I ran the whole app on a test server in my local network and it did work. Since then I deployed the server on a cloud and it hasn&#39;t been working since."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "edited": false, "score": 0, "creation_date": 1543351875, "post_id": 53505490, "comment_id": 93885683, "body": "do you see some errors in the logs when you are sending file? Is <code>response</code> being initialized? what do you see in <code>image_desc</code> TextView"}, {"owner": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "edited": false, "score": 0, "creation_date": 1543353122, "post_id": 53505490, "comment_id": 93886277, "body": "No matter, I mistakenly uploaded old server code. Thank you anyway for you help with coroutines!"}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": true, "score": 1, "last_activity_date": 1543341708, "last_edit_date": 1543341708, "creation_date": 1543341383, "answer_id": 53505490, "question_id": 53505345, "link": "https://stackoverflow.com/questions/53505345/how-to-wait-for-khttp-kotlin-response-in-android/53505490#53505490", "title": "How to wait for khttp (kotlin) response in Android", "body": "<p>Try next code:</p>\n\n<pre><code>val job = GlobalScope.launch(Dispatchers.Main) {\n    val postOperation = async(Dispatchers.IO) { // &lt;- extension on launch scope, launched in IO dispatcher\n        // blocking I/O operation\n        post(SERVER_URL, files = listOf(File(path).fileLike(name = \"Image.jpg\")))\n    }\n    response = postOperation.await() // wait for result of I/O operation without blocking the main thread\n    findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Image contains: ${response?.text}\"\n}\n</code></pre>\n\n<p>Also add next line to app's <code>build.gradle</code> dependency:</p>\n\n<pre><code>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.0.1'\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5812695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57526b2693e3891fa0cd20bcf39265b0?s=128&d=identicon&r=PG&f=1", "display_name": "nyenyu", "link": "https://stackoverflow.com/users/5812695/nyenyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 0, "accepted_answer_id": 53505490, "answer_count": 1, "score": 0, "last_activity_date": 1543341708, "creation_date": 1543340830, "question_id": 53505345, "link": "https://stackoverflow.com/questions/53505345/how-to-wait-for-khttp-kotlin-response-in-android", "title": "How to wait for khttp (kotlin) response in Android", "body": "<p>I've been trying to use khttp to send an .jpg file in an android activity but haven't been able to make it work. </p>\n\n<pre><code>fun sendImage(view: View) {\n\n    try {\n        var bmp = (imageView?.drawable as BitmapDrawable).bitmap\n        var bos = ByteArrayOutputStream()\n        bmp.compress(Bitmap.CompressFormat.JPEG, 0, bos)\n        var response: Response? = null\n        findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Connecting to \" + SERVER_URL;\n\n        try {\n            val job=GlobalScope.launch {\n                response = post(SERVER_URL, files = listOf(File(path).fileLike(name = \"Image.jpg\")))\n            }\n\n            findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Image contains: ${response?.text}\"\n        } catch (e: Exception) {\n            findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Connection failed - please check fields are valid\"\n            findViewById&lt;TextView&gt;(R.id.image_desc).text = e.toString()\n        }\n\n    } catch (e: UnknownHostException) {\n        findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Unknown host :(\"\n        e.printStackTrace()\n    } catch (e: IOException) {\n        findViewById&lt;TextView&gt;(R.id.image_desc).text = \"IO exceptiion :(\"\n        e.printStackTrace()\n    } catch (e: Exception) {\n        findViewById&lt;TextView&gt;(R.id.image_desc).text = \"Other exception :(\"\n        e.printStackTrace()\n    }\n}\n</code></pre>\n\n<p>As soon as i send the image, image_desc textView's text change to Image contains: null. I'm sure the server isn't the problem, since when I test it with this python code:</p>\n\n<pre><code>import requests\n\nurl=...\nfiles = {'file': open('./test/cat.jpg', 'rb')}\nr=requests.post(url,files=files)\nprint (r.text)\n</code></pre>\n\n<p>I get the desired response after a short delay. I've tried turning sendImage to a suspend func and writing job.join() but that crashes the app. How should  fix this?</p>\n"}, {"tags": ["kotlin", "kdoc"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 3, "creation_date": 1543340984, "post_id": 53505330, "comment_id": 93880266, "body": "Why do you want to document something that&#39;s already visible in the method signature? There&#39;s also no syntax for documenting that a method is public or protected, for the same reason."}, {"owner": {"reputation": 12398, "user_id": 572635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1201ee68557b4ff23db59f300946c86?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/572635/dtech"}, "edited": false, "score": 2, "creation_date": 1543343051, "post_id": 53505330, "comment_id": 93881434, "body": "What&#39;s wrong with adding an explanation of the default to the <code>@property</code> or <code>@param</code> documentation?"}, {"owner": {"reputation": 3716, "user_id": 3334862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QlVz8.jpg?s=128&g=1", "display_name": "DevNebulae", "link": "https://stackoverflow.com/users/3334862/devnebulae"}, "edited": false, "score": 0, "creation_date": 1543418652, "post_id": 53505330, "comment_id": 93914248, "body": "I find that there is nothing wrong with documenting defaults. However, don&#39;t overdo it. In this case, I find that it is a bit too much, but I would recommend it if you have certain defaults that are set due to a certain reason."}], "owner": {"reputation": 4037, "user_id": 3124227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/efoMa.jpg?s=128&g=1", "display_name": "Feedforward", "link": "https://stackoverflow.com/users/3124227/feedforward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1543340764, "creation_date": 1543340764, "question_id": 53505330, "link": "https://stackoverflow.com/questions/53505330/how-to-document-default-argument-with-kdoc", "title": "How to document default argument with KDoc", "body": "<p>Is there a syntax to documenting default arguments with KDoc, or should I do it manually?</p>\n\n<pre><code>/**\n * A group of *members*.\n *\n * This class has no useful logic; it's just a documentation example.\n *\n * @property name the name of this group. Default -\"NoName\"\n * @constructor Creates an empty group.\n */\nclass Group(val name: String = \"NoName\") {\n    /**\n     * Adds a [member] (default - NoMember) to this group.\n     * @return the new size of the group.\n     */\n    fun add(member: String = \"NoMember\"): Int { ... }\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1543337280, "post_id": 53504284, "comment_id": 93878189, "body": "<code>I know that this component is for Java,</code> well, it was written in Java, but there&#39;s absolutely nothing wrong with using it in Kotlin, nor does it in any way limit you. It doesn&#39;t break because you use Kotlin instead of Java"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1543337492, "post_id": 53504284, "comment_id": 93878314, "body": "Are you running your console application from IntelliJ IDEA or from a real terminal?"}, {"owner": {"reputation": 101, "user_id": 9104437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b69089a0094b480a420cd7c94c20fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Madoery", "link": "https://stackoverflow.com/users/9104437/federico-madoery"}, "edited": false, "score": 0, "creation_date": 1543339002, "post_id": 53504284, "comment_id": 93879224, "body": "In both. In real console is much worse. In IntelliJ IDEA only does the blink effect."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 9104437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b69089a0094b480a420cd7c94c20fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Madoery", "link": "https://stackoverflow.com/users/9104437/federico-madoery"}, "is_accepted": true, "score": 0, "last_activity_date": 1543344970, "creation_date": 1543344970, "answer_id": 53506377, "question_id": 53504284, "link": "https://stackoverflow.com/questions/53504284/how-to-use-several-times-a-progress-bar-in-console-kotlin/53506377#53506377", "title": "How to use several times a progress bar in console? - Kotlin", "body": "<p>After reading the different methods of the <code>ProgressBar</code> class. <br>\nI discovered that, after completing the use of each progress bar, you need to do <code>.close()</code>, if it is not done it is as if you had several instalations in simultaneous.</p>\n"}], "owner": {"reputation": 101, "user_id": 9104437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b69089a0094b480a420cd7c94c20fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Federico Madoery", "link": "https://stackoverflow.com/users/9104437/federico-madoery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 53506377, "answer_count": 1, "score": 0, "last_activity_date": 1543344970, "creation_date": 1543336903, "last_edit_date": 1543339933, "question_id": 53504284, "link": "https://stackoverflow.com/questions/53504284/how-to-use-several-times-a-progress-bar-in-console-kotlin", "title": "How to use several times a progress bar in console? - Kotlin", "body": "<p>I'm working with <code>Kotlin</code> to make a Java console application, which processes some data and using  <a href=\"https://github.com/ctongfei/progressbar\" rel=\"nofollow noreferrer\">https://github.com/ctongfei/progressbar</a> to show in console the progres of a loop.</p>\n\n<p>My code:</p>\n\n<pre><code>val pb =  ProgressBar(\"Test Fitness \" + fitnessId , maxValueIterator)\nfor (i in 1..maxValueIterator) {\n  ... // Some code not related with the bar\n  pb.step(); \n}\n</code></pre>\n\n<blockquote>\n  <p>I know that this component is for Java, but Kotlin allows the use of\n  these because it transpiles to java when compiling (correct me if I'm\n  wrong).</p>\n</blockquote>\n\n<hr>\n\n<p><strong>The problem:</strong></p>\n\n<p>The problem occurs when the loop is rerun. <br> \nThe progress bar, is stepped on (<em>Like a blink with one and another</em>) with the previous one (<em>That was already over, and it's 100%</em>) and sometimes prints many lines with one or the other, both errors happen when the percentage of the current bar increases. <br>\nI am not able to identify where the error is, the documentation shows the same way to use.</p>\n\n<p>Example of error (print many lines simultaneously):</p>\n\n<pre><code>Test Fitness 372 100% [==========... // This \"Fitness 372\" was finished and continues to appear\nTest Fitness 299 100% [==========... // The same with this\nTest Fitness 921 82% [==========... // This \"Fitness 921\" is the one that is running\n</code></pre>\n"}, {"tags": ["java", "jpa", "kotlin", "lazy-loading", "many-to-one"], "comments": [{"owner": {"reputation": 23, "user_id": 7814131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d15fbe32f6d45ec093be88e8d2b0545?s=128&d=identicon&r=PG&f=1", "display_name": "M&#225;rton Osv&#225;th", "link": "https://stackoverflow.com/users/7814131/m%c3%a1rton-osv%c3%a1th"}, "edited": false, "score": 0, "creation_date": 1545124354, "post_id": 53504230, "comment_id": 94507597, "body": "I think my problem was similar: <a href=\"https://stackoverflow.com/questions/53816797/kotlin-hibernate-jpa-lazy-fetch-not-working-through-the-controller\" title=\"kotlin hibernate jpa lazy fetch not working through the controller\">stackoverflow.com/questions/53816797/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 7043526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dGfqe.jpg?s=128&g=1", "display_name": "Jango", "link": "https://stackoverflow.com/users/7043526/jango"}, "is_accepted": false, "score": -1, "last_activity_date": 1572505691, "last_edit_date": 1572505691, "creation_date": 1570478795, "answer_id": 58276448, "question_id": 53504230, "link": "https://stackoverflow.com/questions/53504230/kotlin-jpa-lazy-restapi-not-respected/58276448#58276448", "title": "Kotlin JPA Lazy RestAPI not respected", "body": "<p>Because kotlin data class is final so that hibernate cant generate proxy for the lazy fetching entity.\nyou may fefine TipoSituacao as normal class to make lazy fetching work.</p>\n\n<hr>\n\n<p>Sorry about my curtness. There are some detail I don't mentioned.\nTalk is cheap and let me show you the code.<a href=\"https://github.com/javaisgood/spring-kotlin-jpa-problem\" rel=\"nofollow noreferrer\">https://github.com/javaisgood/spring-kotlin-jpa-problem</a></p>\n\n<p>Let's take a look what I have done.</p>\n\n<ol>\n<li>Change data class to normal class and open it as well as its properties.</li>\n</ol>\n\n<pre><code>@Entity\n@Table(name = \"TIPOSITUACAO\")\nopen class TipoSituacao(\n        @Id\n        @Column(name = \"ID\")\n        open val id: Long? = null,\n\n        @Column(name = \"DESCRICAO\")\n        open val descricao: String? = null\n)\n</code></pre>\n\n<ol start=\"2\">\n<li>Add two methods to EndPoints which one doesn't trigger the lazy fetching and another does.</li>\n</ol>\n\n<pre><code>@RequestMapping(\"/api\")\n@RestController\nclass EndPoints {\n    @Autowired\n    private val situacaoRepository: SituacaoRepository? = null\n\n    @GetMapping(value = [\"/hello\"])\n    fun hello() = \"hello!\".also {\n        situacaoRepository!!.findAll().forEach {\n            println(\"situacaoId:${it.id}\")\n            println()\n        }\n    }\n\n    @GetMapping(value = [\"/hello2\"])\n    fun hello2() = \"hello!\".also {\n        situacaoRepository!!.findAll().forEach {\n            println(\"situacaoId:${it.id}\")\n            println(\"tipoSituacaoDescricao:${it.tipoSituacao?.descricao}\")\n            println()\n        }\n    }\n}\n</code></pre>\n\n<p>Start the application.<br>\nCall 'hello'.<br>\nThen call 'hello2'.<br>\nThe cosole print detail:</p>\n\n<pre><code>Hibernate: select situacao0_.id as id1_0_, situacao0_.descricao as descrica2_0_, situacao0_.tiposituacao_id as tipositu3_0_ from situacao situacao0_\nsituacaoId:1\n\nsituacaoId:2\n\nsituacaoId:3\n\nHibernate: select situacao0_.id as id1_0_, situacao0_.descricao as descrica2_0_, situacao0_.tiposituacao_id as tipositu3_0_ from situacao situacao0_\nsituacaoId:1\nHibernate: select tiposituac0_.id as id1_1_0_, tiposituac0_.descricao as descrica2_1_0_ from tiposituacao tiposituac0_ where tiposituac0_.id=?\ntipoSituacaoDescricao:TIPO SITUACAO 1\n\nsituacaoId:2\ntipoSituacaoDescricao:TIPO SITUACAO 1\n\nsituacaoId:3\nHibernate: select tiposituac0_.id as id1_1_0_, tiposituac0_.descricao as descrica2_1_0_ from tiposituacao tiposituac0_ where tiposituac0_.id=?\ntipoSituacaoDescricao:TIPO SITUACAO 2\n</code></pre>\n\n<p>Now you will see the lazy fetching worked.</p>\n"}, {"tags": [], "owner": {"reputation": 2710, "user_id": 997977, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/11f4273f8fdfee80802942d444b4571c?s=128&d=identicon&r=PG", "display_name": "Juan Rada", "link": "https://stackoverflow.com/users/997977/juan-rada"}, "is_accepted": false, "score": 0, "last_activity_date": 1597102481, "creation_date": 1597102481, "answer_id": 63349465, "question_id": 53504230, "link": "https://stackoverflow.com/questions/53504230/kotlin-jpa-lazy-restapi-not-respected/63349465#63349465", "title": "Kotlin JPA Lazy RestAPI not respected", "body": "<p>The problem here is your data class gets autogenerated toString, equals and hashcode methods which trigger property loading so hibernate execute extra required queries for that.</p>\n<p>Data classes are not encouraged to be used with JPA.</p>\n"}], "owner": {"reputation": 1, "user_id": 8722583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CoMVi4V1xJM/AAAAAAAAAAI/AAAAAAAABm4/JAcSkaYP-z8/photo.jpg?sz=128", "display_name": "Maximiliano Brizolla", "link": "https://stackoverflow.com/users/8722583/maximiliano-brizolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1597102481, "creation_date": 1543336695, "question_id": 53504230, "link": "https://stackoverflow.com/questions/53504230/kotlin-jpa-lazy-restapi-not-respected", "title": "Kotlin JPA Lazy RestAPI not respected", "body": "<p>I have a project in Java and i am converting to Kotlin, but the entities with relations and mapping @ManytoOne they are with problems. The entities they are using mapping fecht type LAZY, aren't they respecting the LAZY and executing the query.</p>\n\n<p>Exemple:</p>\n\n<p>Entity father: </p>\n\n<pre><code>@Entity\n@Table(name = \"TIPOSITUACAO\")\ndata class TipoSituacao (\n    @Id\n    @Column(name = \"ID\")\n    val id: Long? = null,\n\n    @Column(name = \"DESCRICAO\")\n    val descricao: String? = null\n)\n</code></pre>\n\n<p>Entity son:</p>\n\n<pre><code>@Entity\n@Table(name = \"SITUACAO\")\ndata class Situacao (\n\n    @Id\n    @Column(name = \"ID\")\n    val id: Long,\n\n    @Column(name = \"DESCRICAO\")\n    val descricao: String = \"\",\n\n    @Column(name = \"TIPOSITUACAO_ID\")\n    val tipoSituacaoId: Long? = null,\n\n    @ManyToOne(fetch = FetchType.LAZY, optional = true)\n    @JoinColumn(name = \"TIPOSITUACAO_ID\", referencedColumnName = \"ID\", insertable = false, updatable = false)\n    val tipoSituacao: TipoSituacao? = null\n)\n</code></pre>\n\n<p>My endpoint: </p>\n\n<pre><code>@RequestMapping(\"/api\")\n@RestController\nclass EndPoints {\n    @Autowired\n    private val situacaoRepository: SituacaoRepository? = null\n\n   val situacao: List&lt;Situacao&gt;\n        @GetMapping(value = [\"/situacao\"])\n        get() = situacaoRepository!!.findAll()\n}\n</code></pre>\n\n<p>return:</p>\n\n<pre><code>[\n    {\n        \"id\": 1,\n        \"descricao\": \"SITUACAO 1.1\",\n        \"tipoSituacaoId\": 1,\n        \"tipoSituacao\": {\n            \"id\": 1,\n            \"descricao\": \"TIPO SITUACAO 1\"\n        }\n    },\n    {\n        \"id\": 2,\n        \"descricao\": \"SITUACAO 1.2\",\n        \"tipoSituacaoId\": 1,\n        \"tipoSituacao\": {\n            \"id\": 1,\n            \"descricao\": \"TIPO SITUACAO 1\"\n        }\n    },\n    {\n        \"id\": 3,\n        \"descricao\": \"SITUACAO 2.1\",\n        \"tipoSituacaoId\": 2,\n        \"tipoSituacao\": {\n            \"id\": 2,\n            \"descricao\": \"TIPO SITUACAO 2\"\n        }\n    }\n]\n</code></pre>\n\n<p>Queries: </p>\n\n<pre><code>Hibernate: select situacao0_.id as id1_0_, situacao0_.descricao as descrica2_0_, situacao0_.tiposituacao_id as tipositu3_0_ from situacao situacao0_\nHibernate: select tiposituac0_.id as id1_1_0_, tiposituac0_.descricao as descrica2_1_0_ from tiposituacao tiposituac0_ where tiposituac0_.id=?\nHibernate: select tiposituac0_.id as id1_1_0_, tiposituac0_.descricao as descrica2_1_0_ from tiposituacao tiposituac0_ where tiposituac0_.id=?\n</code></pre>\n\n<p>If i use <strong><em>@JsonIgnore</em></strong>, <strong><em>@JsonManageReference</em></strong> or <strong><em>@JsonBackReference</em></strong> o son tipoSituacao until not return , but the query continue executing. </p>\n\n<p>I tried using the DTO, but the same problem.</p>\n\n<p>Every time i use situacaoRepository.find ou findAll the query is executed.</p>\n\n<p>Project link with problem: <a href=\"https://github.com/maxbrizolla/spring-kotlin-jpa-problem\" rel=\"nofollow noreferrer\">https://github.com/maxbrizolla/spring-kotlin-jpa-problem</a></p>\n\n<p>Can someone can help me? </p>\n"}, {"tags": ["spring", "kotlin", "multipart", "exceptionhandler"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 6593892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ca62bd35379b9f2aa4fc2b71666d103?s=128&d=identicon&r=PG&f=1", "display_name": "Erion", "link": "https://stackoverflow.com/users/6593892/erion"}, "is_accepted": false, "score": 1, "last_activity_date": 1543433133, "creation_date": 1543433133, "answer_id": 53526703, "question_id": 53503452, "link": "https://stackoverflow.com/questions/53503452/springboot-kotlin-multipart-maxuploadsizeexceededexception-handler-does-not-fir/53526703#53526703", "title": "SpringBoot/Kotlin: Multipart MaxUploadSizeExceededException handler does not fire", "body": "<p>Found the issue. I'm posting it for anyone else who might have the same issue in the future.</p>\n\n<pre><code>@ControllerAdvice\nclass ExceptionHandlers():ResponseEntityExceptionHandler() {\n\n    @ExceptionHandler(MaxUploadSizeExceededException::class)\n    fun handleException(e: MultipartException, request:WebRequest): ResponseEntity&lt;Any&gt; {\n        return handleExceptionInternal(e, Result(message = \"File is too large.\"), HttpHeaders(), HttpStatus.PAYLOAD_TOO_LARGE, request)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6593892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ca62bd35379b9f2aa4fc2b71666d103?s=128&d=identicon&r=PG&f=1", "display_name": "Erion", "link": "https://stackoverflow.com/users/6593892/erion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543433133, "creation_date": 1543334157, "question_id": 53503452, "link": "https://stackoverflow.com/questions/53503452/springboot-kotlin-multipart-maxuploadsizeexceededexception-handler-does-not-fir", "title": "SpringBoot/Kotlin: Multipart MaxUploadSizeExceededException handler does not fire", "body": "<p>Please excuse any horrible mistakes, I literally picked up Kotlin fully and some Spring about a week ago, due to a project requirement. I am trying to create a simple RESTful API with an endpoint that can accept a file via Multipart. Later on, there will be a few pages outside the API that will display HTML, I am using <a href=\"https://github.com/lukasjapan/koreander\" rel=\"nofollow noreferrer\">Koreander</a> for that. From what I can see, and based on Java tutorials, exception handling should work like this.</p>\n\n<p>For the API, my defined exception handler for MaxUploadSizeExceededException, however, does not fire at all. My application.kt:</p>\n\n<pre><code>@SpringBootApplication\n@EnableConfigurationProperties(StorageProperties::class)\nclass JaApplication {\n\n    @Bean fun koreanderViewResolver(): ViewResolver = KoreanderViewResolver()\n}\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;JaApplication&gt;(*args)\n}\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\n@EnableAutoConfiguration\nclass APIController {\n\n    @PostMapping(\n        value = \"/convert\",\n        produces = arrayOf(MediaType.APPLICATION_JSON_VALUE)\n    )\n    fun convert(@RequestParam(\"file\") multipartFile: MultipartFile): Result {\n        return Result(status = 0, message = \"You have uploaded: ${multipartFile.getOriginalFilename()}.\")\n    }\n}\n\n@ControllerAdvice\nclass ExceptionHandlers {\n\n    @ExceptionHandler(MultipartException::class)\n    fun handleException(e: MultipartException): String = Result(status = 1, message = \"File is too large.\")\n    }\n}\n</code></pre>\n\n<p>When I am attempting to post a large file via curl, I get a JSON reply:</p>\n\n<pre><code>curl -F 'file=@path-to-large-file' http://localhost:8080/api/convert\n\n{\"timestamp\":\"2018-11-27T15:47:31.907+0000\",\"status\":500,\"error\":\"Internal Serve\nr Error\",\"message\":\"Maximum upload size exceeded; nested exception is java.lang.\nIllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$Siz\neLimitExceededException: the request was rejected because its size (4294967496)\nexceeds the configured maximum (529530880)\",\"path\":\"/api/convert\"}\n</code></pre>\n\n<p>Is it possible that Tomcat does not pass this exception to Spring? If yes, how may I go about catching this? It also works if I can set the size to unlimited and check for file size at upload time, though I would need to do that before the server starts receiving the file, and I assume by the time I get to the <em>/api/convert</em> endpoint, it is too late.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 743, "user_id": 5091033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d0737443a012e096ab556ef60a197f?s=128&d=identicon&r=PG&f=1", "display_name": "simo-r", "link": "https://stackoverflow.com/users/5091033/simo-r"}, "edited": false, "score": 0, "creation_date": 1543334252, "post_id": 53503355, "comment_id": 93876361, "body": "It&#39;s quite common to have an utility class ( usually singleton) or you just go for a static method."}, {"owner": {"reputation": 3043, "user_id": 10300673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17821ef80e645b03b63bc87a23152d0d?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos Hidalgo", "link": "https://stackoverflow.com/users/10300673/nikos-hidalgo"}, "edited": false, "score": 0, "creation_date": 1543334326, "post_id": 53503355, "comment_id": 93876404, "body": "Usually, I organise my reusable methods in a utils class and let the activities call them. If you feel like the class is getting big, try to split it down into smaller classes based on functionality or theme."}, {"owner": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 1, "creation_date": 1543334430, "post_id": 53503355, "comment_id": 93876484, "body": "In Kotlin You can use <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow noreferrer\">Delegation Pattern</a> or <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow noreferrer\">Interface with default implementation</a> depending on your use case."}, {"owner": {"reputation": 751, "user_id": 152962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4d0b951cd698a6648180851f0d0beaf1?s=128&d=identicon&r=PG", "display_name": "WillW", "link": "https://stackoverflow.com/users/152962/willw"}, "reply_to_user": {"reputation": 10456, "user_id": 9241978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7f9d2a03452f74bfd802e36d50b7db?s=128&d=identicon&r=PG&f=1", "display_name": "Pawel", "link": "https://stackoverflow.com/users/9241978/pawel"}, "edited": false, "score": 0, "creation_date": 1543404904, "post_id": 53503355, "comment_id": 93905613, "body": "@pawel Interface with default implementation does actually seem to be a good language level approach. The headless fragment approach below probably works a little better in this particular case as the event passing when using multiple helpers will work automatically rather than having to be implemented in the activity, but I learned from your answers so thank you."}], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 1, "last_activity_date": 1543335638, "creation_date": 1543335638, "answer_id": 53503930, "question_id": 53503355, "link": "https://stackoverflow.com/questions/53503355/how-should-i-share-activity-related-code-between-multiple-activities/53503930#53503930", "title": "How should I share Activity related code between multiple activities?", "body": "<p>Given that you need to override certain framework methods, I think this actually would be a great case for using a headless <code>Fragment</code>. Using a <code>Fragment</code>, you can start <code>Activity</code>s, request permissions, handle the results, etc. Using this pattern, this <code>Fragment</code> can be attached to any <code>Activity</code> (or even another <code>Fragment</code> as a child). You of course could break down further classes that this headless <code>Fragment</code> relies on internally, but I would definitely suggest looking into a <code>Fragment</code>-based approach. </p>\n\n<p>For example:</p>\n\n<pre><code>private const val REQUEST_CODE_PERMISSION: Int = 1\n\nclass MyUtilityFragment : Fragment() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        if (savedInstanceState == null) {\n            // do permission request\n        }\n    }\n\n    override fun onRequestPermissionsResult(\n        requestCode: Int,\n        permissions: Array&lt;out String&gt;,\n        grantResults: IntArray\n    ): {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n        // handle your permission result here\n    }\n}\n</code></pre>\n\n<p>Then in your <code>Activity</code>, you can just attach it in <code>onCreate()</code> and let it do its thing:</p>\n\n<pre><code>class MyActivity: AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        if (savedInstanceState == null) {\n            supportFragmentManager.beginTransaction()\n                .add(MyUtilityFragment(), \"utility_fragment\")\n                .commitNow()\n        }\n    }\n}\n</code></pre>\n\n<p>If you need to provide results back to the host, you can just designate an interface in your <code>Fragment</code>, and have the hosting parent <code>Fragment</code> or <code>Activity</code> implement that interface, and then retrieve it from the headless <code>Fragment</code> when needed:</p>\n\n<pre><code>private fun getCallback() : MyCallbackInterface {\n    parentFragment?.takeIf { it is MyCallbackInterface }?.let { return it as MyCallbackInterface }\n    return requireActivity() as MyCallbackInterface\n}\n</code></pre>\n"}], "owner": {"reputation": 751, "user_id": 152962, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4d0b951cd698a6648180851f0d0beaf1?s=128&d=identicon&r=PG", "display_name": "WillW", "link": "https://stackoverflow.com/users/152962/willw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 53503930, "answer_count": 1, "score": 0, "last_activity_date": 1543427600, "creation_date": 1543333854, "last_edit_date": 1543427600, "question_id": 53503355, "link": "https://stackoverflow.com/questions/53503355/how-should-i-share-activity-related-code-between-multiple-activities", "title": "How should I share Activity related code between multiple activities?", "body": "<p>I have several bits of functionality that I need in multiple activities in my app. They need to be able to access Activity methods, and in some cases override methods (e.g. I have some shared functionality to choose pictures from the Gallery that needs to handle <code>onRequestPermissionsResult</code>).</p>\n\n<p>Any one of these is simple - I can create a XXXBase class, and then my Activity can derive from it. If I need more than one of these in my Activity though, I am limited by inheritance mechanics.</p>\n\n<p>I could put all of this extra functionality in one common Base class that is used repeatedly, but that class could end up getting quite big and unwieldy.</p>\n\n<p>Is there an alternative approach that I'm missing? I'm using Kotlin, if that opens up any extra possibilities.</p>\n"}, {"tags": ["authentication", "kotlin", "synchronization", "rx-java"], "answers": [{"tags": [], "owner": {"reputation": 1152, "user_id": 2632709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/097f7f7caf2c2794497ab735ed7880d8?s=128&d=identicon&r=PG", "display_name": "Roni Castro", "link": "https://stackoverflow.com/users/2632709/roni-castro"}, "is_accepted": false, "score": 0, "last_activity_date": 1543859912, "creation_date": 1543859912, "answer_id": 53599274, "question_id": 53503229, "link": "https://stackoverflow.com/questions/53503229/how-to-make-a-sync-call-using-rxjava/53599274#53599274", "title": "How to make a sync call using RxJava", "body": "<p>I haven't found a way to make a sync call using RxJava, but I can make it by using kotlin coutorine runBlocking, which will block the thread until the request is finished:</p>\n\n<pre><code>synchronized(this) {\n    runBlocking {\n        val subscription = ApolloReauthenticator.signInGraphQl() // await until it's finished\n          subscription.unsubscribe()\n     }\n}\n\n\nfun signInGraphQl(): Subscription {\n   return repository.refreshToken()\n     .subscribe(\n       { Observable.just(EmptyResult()) },\n       { Observable.just(EmptyResult()) }\n     )\n }\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 2632709, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/097f7f7caf2c2794497ab735ed7880d8?s=128&d=identicon&r=PG", "display_name": "Roni Castro", "link": "https://stackoverflow.com/users/2632709/roni-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543859912, "creation_date": 1543333474, "last_edit_date": 1543355645, "question_id": 53503229, "link": "https://stackoverflow.com/questions/53503229/how-to-make-a-sync-call-using-rxjava", "title": "How to make a sync call using RxJava", "body": "<p>I need to make a sync call to reauthenticate the user and get a new token, but I haven't found a way that works. The code below blocks the thread and it is never unblocked, ie. I have an infinite loop</p>\n\n<pre><code>class ApolloAuthenticator(private val authenticated: Boolean) : Authenticator {\n\n  @Throws(IOException::class)\n  override fun authenticate(route: Route, response: Response): Request? {\n    // Refresh your access_token using a synchronous api request\n\n    if (response.request().header(HEADER_KEY_APOLLO_AUTHORIZATION) != null) {\n      return null  //if you've tried to authorize and failed, give up\n    }\n\n    synchronized(this) {\n\n      refreshTokenSync() // This is blocked and never unblocked\n      val newToken = getApolloTokenFromSharedPreference()\n      return response.request().newBuilder()\n        .header(HEADER_KEY_APOLLO_AUTHORIZATION, newToken)\n        .build()\n    }\n\n    private fun refreshTokenSync(): EmptyResult {\n      //Refresh token, synchronously\n      val repository = Injection.provideSignInRepository()\n      return repository\n        .signInGraphQL()\n        .toBlocking()\n        .first()\n\n   }\n\n   fun signInGraphQL() : Observable&lt;EmptyResult&gt; =\nsharedPreferencesDataSource.identifier\n  .flatMap { result -&gt; graphqlAuthenticationDataSource.getAuth(result) }\n  .flatMap { result -&gt; sharedPreferencesDataSource.saveApolloToken(result) }\n  .onErrorReturn { EmptyResult() }\n\n}\n</code></pre>\n\n<p>---------- Use of it</p>\n\n<pre><code> val apollAuthenticator = ApolloAuthenticator(authenticated)\n    val okHttpBuilder =\n      OkHttpClient.Builder()\n        .authenticator(apollAuthenticator)\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 1, "creation_date": 1543333121, "post_id": 53503053, "comment_id": 93875546, "body": "Start with the <a href=\"https://firebase.google.com/docs/database/android/read-and-write\" rel=\"nofollow noreferrer\">official documentation</a>."}, {"owner": {"reputation": 5619, "user_id": 608312, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/OGtxB.jpg?s=128&g=1", "display_name": "Jake Lee", "link": "https://stackoverflow.com/users/608312/jake-lee"}, "edited": false, "score": 0, "creation_date": 1543333566, "post_id": 53503053, "comment_id": 93875852, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/38219139/firebase-database-retrieve-data-from-database\">Firebase database - Retrieve data from database</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "edited": false, "score": 0, "creation_date": 1543333698, "post_id": 53503053, "comment_id": 93875955, "body": "Hi Sir Alex! I want to learn retrieving using kotlin, and the documentation is using java, i dont know how to convert java to kotlin yet. Thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543342717, "post_id": 53503053, "comment_id": 93881248, "body": "@AlexMamo Hi! can you help me"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543342857, "post_id": 53503053, "comment_id": 93881330, "body": "@GianRoniDelaRosa What do you want to search and what is the expected result?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543343472, "post_id": 53503053, "comment_id": 93881665, "body": "@AlexMamo I already did the connection and all, now Im writing the code to retrieve the data from firebase and the HashMap and snapshot seems not recognized. I just want the data from my firebase to be displayed on that activity as a result sir. Thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543379312, "post_id": 53503053, "comment_id": 93893617, "body": "@AlexMamo edited, how can I get the id and limit the data that will be retrieved."}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1543397800, "post_id": 53503053, "comment_id": 93901366, "body": "Abot what id are you talking about and how do you want to limit?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "edited": false, "score": 0, "creation_date": 1543336598, "post_id": 53503558, "comment_id": 93877777, "body": "Hi, there s no tab like that here <a href=\"https://firebase.google.com/docs/database/android/read-and-write\" rel=\"nofollow noreferrer\">firebase.google.com/docs/database/android/read-and-write</a>"}, {"owner": {"reputation": 2755, "user_id": 5634470, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/883k1.png?s=128&g=1", "display_name": "RoCk RoCk", "link": "https://stackoverflow.com/users/5634470/rock-rock"}, "edited": false, "score": 0, "creation_date": 1543337832, "post_id": 53503558, "comment_id": 93878546, "body": "@GianRoniDelaRosa - I updated my answer.  It seems it is not updated from the docs, you can reference here and download the sample code as reference - <a href=\"https://www.raywenderlich.com/5114-firebase-tutorial-for-android-getting-started\" rel=\"nofollow noreferrer\">raywenderlich.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2755, "user_id": 5634470, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/883k1.png?s=128&g=1", "display_name": "RoCk RoCk", "link": "https://stackoverflow.com/users/5634470/rock-rock"}, "is_accepted": false, "score": 0, "last_activity_date": 1543338128, "last_edit_date": 1543338128, "creation_date": 1543334468, "answer_id": 53503558, "question_id": 53503053, "link": "https://stackoverflow.com/questions/53503053/retrieving-data-from-firebase-to-android-studio-using-kotlin-depending-on-text-v/53503558#53503558", "title": "Retrieving data from firebase to android studio using kotlin depending on text value", "body": "<p>You can visit Google Developer recommended training here \n<a href=\"https://codelabs.developers.google.com/?cat=Android\" rel=\"nofollow noreferrer\">Codelabs - Android</a></p>\n\n<ul>\n<li>I filter <code>Android</code> category for you. You can find Web / Mobile quick training here or demo to follow along.</li>\n</ul>\n\n<p>It is written on <code>Java</code> , but the idea is still there. </p>\n\n<p>And you can quickly convert your code to <code>Kotlin</code> on Android Studio and study them later if your not familiar with <code>Kotlin</code> that much. From your <code>Refactor</code> menu (If I'm not mistaken for late version below 3.2.1).  </p>\n\n<p><a href=\"https://i.stack.imgur.com/P4OkU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P4OkU.png\" alt=\"Codelab Dashboard\"></a>\n.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qJQA9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qJQA9.png\" alt=\"Android Studio 3.2.1 Code tab\"></a>\n.</p>\n\n<p>From <a href=\"https://firebase.google.com/docs/storage/android/start\" rel=\"nofollow noreferrer\">Firebase Docs</a> don't forget to change the tab to <code>Kotlin</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VC36T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VC36T.png\" alt=\"Kotlin\"></a></p>\n\n<p>.\nIf there is no <code>Kotlin</code> tab from the documentation, try the <code>Firebase</code> from your tool, and select the <code>Realtime Database</code>. It will show you the basic code. Since I'm using <code>Java</code> , it is showing Java code. Since your default lang is <code>Kotlin</code>, \nmaybe it will show <code>Kotlin</code> code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fJO2H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fJO2H.png\" alt=\"Kotlin\"></a></p>\n\n<p>.</p>\n\n<p><a href=\"https://grokonez.com/android/kotlin-firebase-realtime-database-readwrite-data-example-android\" rel=\"nofollow noreferrer\">Kotlination - Firebase </a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10635891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543379214, "creation_date": 1543332892, "last_edit_date": 1543379214, "question_id": 53503053, "link": "https://stackoverflow.com/questions/53503053/retrieving-data-from-firebase-to-android-studio-using-kotlin-depending-on-text-v", "title": "Retrieving data from firebase to android studio using kotlin depending on text value", "body": "<p>how to get the id of data retrieved from the firebase so I can limit the data being retrieved from the firebase depending on the id.</p>\n\n<p>here is my current code, it retrieves all the data from child \"beetle\" on my firebase database, I want to limit that so it will show only 1 data depending on what the id is.</p>\n\n<pre><code>    lateinit var listView: ListView\nlateinit var ref: DatabaseReference\nlateinit var beetleList:MutableList&lt;Beetle&gt;\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_classify)\n\n    val capturedImage = intent.extras.getParcelable(\"captured_image\") as Bitmap?\n    val beetleName=intent.getStringExtra(\"Beetle\")\n\n\n    imageCaptured2.setImageBitmap(capturedImage)\n    textBeetleName.setText(beetleName)\n\n    listView = findViewById(R.id.beetle_list)\n    beetleList = mutableListOf()\n    ref = FirebaseDatabase.getInstance().getReference(\"beetle\")\n\n    ref.addValueEventListener(object : ValueEventListener{\n        override fun onCancelled(p0: DatabaseError) {\n\n        }\n\n        override fun onDataChange(p0: DataSnapshot) {\n            if(p0!!.exists()){\n                beetleList.clear()\n                for (e in p0.children){\n                    val beetle = e.getValue(Beetle::class.java)\n                    beetleList.add(beetle!!)\n                }\n                val adapter = BeetleCardAdapter(this@classify,R.layout.beetle_card_item,beetleList)\n                listView.adapter = adapter\n            }\n        }\n    })\n</code></pre>\n\n<p>here is my firebase structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/X762j.png\" rel=\"nofollow noreferrer\">firebase database</a></p>\n"}, {"tags": ["collections", "filter", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 0, "last_activity_date": 1543333301, "last_edit_date": 1543333301, "creation_date": 1543332224, "answer_id": 53502842, "question_id": 53502611, "link": "https://stackoverflow.com/questions/53502611/filter-an-arraylist-using-multiple-object-fields-multiple-conditions/53502842#53502842", "title": "Filter an ArrayList using multiple object fields/multiple conditions", "body": "<p>If you want to keep values, cache all routes and then filter them:</p>\n\n<pre><code>val allRoutes = ... // somewhere initialized\nval filtered = allRoutes.filter {\n    it.monthlyPrice != null\n}\n// use filtered routes, but keep reference to allRoutes\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 60, "user_id": 3575990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9J7K1.png?s=128&g=1", "display_name": "A91G", "link": "https://stackoverflow.com/users/3575990/a91g"}, "edited": false, "score": 0, "creation_date": 1543417477, "post_id": 53505083, "comment_id": 93913437, "body": "Much thanks for the help, I&#39;ll probably end up refactoring my code to use your method above which is probably better for performance."}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 5, "last_activity_date": 1543339788, "creation_date": 1543339788, "answer_id": 53505083, "question_id": 53502611, "link": "https://stackoverflow.com/questions/53502611/filter-an-arraylist-using-multiple-object-fields-multiple-conditions/53505083#53505083", "title": "Filter an ArrayList using multiple object fields/multiple conditions", "body": "<p>One approach would be to generate a list of filters, e.g. <code>List&lt;(Route) -&gt; Boolean&gt;</code>, and then just invalidate your view whenever the list of filters change. </p>\n\n<p>So for example you have something like:</p>\n\n<pre><code>// Use your own logic based on user selection here\nprivate fun generateFilters() = listOf&lt;(Route) -&gt; Boolean&gt;(\n    { it.id != 0 },\n    { it.weeklyPrice != null }\n)\n</code></pre>\n\n<p>Then, your view is generated based on this set of filter, i.e.:</p>\n\n<pre><code>private fun filterRoutes(routes: List&lt;Route&gt;, filters: List&lt;(Route) -&gt; Boolean&gt;) =\n    routes.filter { route -&gt; filters.all { filter -&gt; filter(route) } \n</code></pre>\n\n<p>You could even add an extension function on <code>List&lt;T&gt;</code> to provide a <code>filterAll</code> functionality, something like:</p>\n\n<pre><code>private fun &lt;T&gt; List&lt;T&gt;.filterAll(filters: List&lt;(T) -&gt; Boolean&gt;) =\n    filter { item -&gt; filters.all { filter -&gt; filter(item) } }\n</code></pre>\n\n<p>Then your view logic just becomes:</p>\n\n<pre><code>routers.filterAll(generateFilters())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 60, "user_id": 3575990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9J7K1.png?s=128&g=1", "display_name": "A91G", "link": "https://stackoverflow.com/users/3575990/a91g"}, "is_accepted": false, "score": 0, "last_activity_date": 1543417667, "creation_date": 1543417667, "answer_id": 53522486, "question_id": 53502611, "link": "https://stackoverflow.com/questions/53502611/filter-an-arraylist-using-multiple-object-fields-multiple-conditions/53522486#53522486", "title": "Filter an ArrayList using multiple object fields/multiple conditions", "body": "<p>Ok, here's what I ended up doing.. which I did before seeing @kcoppock's answer above.</p>\n\n<p>I used a MutableSet to hold all routes that I actively want to show to the user and used the following code to listen for all CheckedChanged events for each box:</p>\n\n<pre><code>view.cb_weekly.setOnCheckedChangeListener { _, isChecked -&gt;\n    weeklyIncluded = isChecked\n    if (weeklyIncluded) {\n        activeRoutes.addAll(routes.filter { route -&gt;\n            route.weeklyPrice != null\n        })\n    } else {\n        activeRoutes.removeAll(routes.filter { route -&gt;\n            route.weeklyPrice != null &amp;&amp; route.monthlyPrice == null &amp;&amp; route.seasonalPrice == null\n        })\n        if (!monthlyIncluded &amp;&amp; seasonalIncluded) {\n            activeRoutes.removeAll(routes.filter { route -&gt;\n                (route.weeklyPrice != null || route.monthlyPrice != null) &amp;&amp; route.seasonalPrice == null\n            })\n        } else if (!seasonalIncluded &amp;&amp; monthlyIncluded) {\n            activeRoutes.removeAll(routes.filter { route -&gt;\n                (route.weeklyPrice != null || route.seasonalPrice != null) &amp;&amp; route.monthlyPrice == null\n            })\n        } else if (!seasonalIncluded &amp;&amp; !monthlyIncluded) {\n            activeRoutes.clear()\n        }\n    }\n    drawRoutes(activeRoutes)\n}\n</code></pre>\n\n<p>Bear in mind, the answer I marked as correct (not this one) is probably the better way to do this.</p>\n"}], "owner": {"reputation": 60, "user_id": 3575990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9J7K1.png?s=128&g=1", "display_name": "A91G", "link": "https://stackoverflow.com/users/3575990/a91g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2408, "favorite_count": 1, "accepted_answer_id": 53505083, "answer_count": 3, "score": 2, "last_activity_date": 1543417667, "creation_date": 1543331462, "question_id": 53502611, "link": "https://stackoverflow.com/questions/53502611/filter-an-arraylist-using-multiple-object-fields-multiple-conditions", "title": "Filter an ArrayList using multiple object fields/multiple conditions", "body": "<p>So I have an interesting problem with filtering collections, I have a data class as follows:</p>\n\n<pre><code>data class Route(\n    val id: Int,\n    val name: String,\n    val weeklyPrice: Double?,\n    val monthlyPrice: Double?,\n    val seasonalPrice: Double?,\n)\n</code></pre>\n\n<p>I'm displaying an ArrayList in the UI and the user has the ability to filter the list based on whether the route has \"weekly/monthly/seasonal\" prices, bear in mind I'm using checkboxes not radio buttons so the user can filter using multiple options. ie. only weekly, or both weekly and monthly and so on.</p>\n\n<p>My issue is that using the filter function and a predicate I can only filter based on one attribute at a time like so:</p>\n\n<pre><code>routes.filter {\n    it.weeklyPrice != null\n}\n</code></pre>\n\n<p>But sometimes I'd actually filter out values I wanted to keep based on another condition, for example a user doesn't want routes with weekly prices, so I filter those out but he wants ones with monthly ones but some of them were already filtered out based on the fact that they had weekly prices as well.</p>\n\n<p>Any help would be appreciated, I'm sure it can be done I just haven't figured out how, maybe the problem is in how the data is represented in the first place? I'm not sure.</p>\n\n<p>Much thanks in advance.</p>\n"}, {"tags": ["unit-testing", "kotlin", "mocking", "mockk"], "answers": [{"tags": [], "owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "is_accepted": false, "score": 0, "last_activity_date": 1543335870, "last_edit_date": 1543335870, "creation_date": 1543333980, "answer_id": 53503403, "question_id": 53502043, "link": "https://stackoverflow.com/questions/53502043/mockk-mock-spy-top-level-extension-method-being-called-on-top-level-val/53503403#53503403", "title": "MockK - mock / spy top level extension method being called on top level val", "body": "<p>Instead of using an initialiser, use a <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-properties\" rel=\"nofollow noreferrer\">backing (private) property</a> and use <code>get()</code> for the <code>val</code> to be mocked:</p>\n\n<pre><code>private val _theVal = Foo()\nval theVal get() = _theVal\n</code></pre>\n\n<p>Using a getter instead of initialiser creates a getter method without a static backing field. You can check the bytecode to see this:</p>\n\n<p>Kotlin:</p>\n\n<pre><code>package com.example\n\n@JvmField // See also: https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#instance-fields\nval thisIsAField = \"I'm static!\"\n\nval thisIsAValWithInitialiser = \"I'm a static field too!\"\n\nval thisIsAValWithGetter get() = \"I'm hardcoded in the getter method!\"\n</code></pre>\n\n<p>Bytecode (I've removed much of the clutter so that my point becomes easier to see):</p>\n\n<pre><code>public final static Ljava/lang/String; thisIsAField\n\nprivate final static Ljava/lang/String; thisIsAValWithInitialiser\n\npublic final static getThisIsAValWithInitialiser()Ljava/lang/String;\nL0\nLINENUMBER 6 L0\nGETSTATIC com/example/FooBarTestKt.thisIsAValWithInitialiser : Ljava/lang/String;\nARETURN\nL1\n\npublic final static getThisIsAValWithGetter()Ljava/lang/String;\nL0\nLINENUMBER 8 L0\nLDC \"I'm hardcoded in the getter method!\"\nARETURN\nL1\n\nstatic &lt;clinit&gt;()V\nL0\nLINENUMBER 4 L0\nLDC \"I'm static!\"\nPUTSTATIC com/example/FooBarTestKt.thisIsAField : Ljava/lang/String;\nL1\nLINENUMBER 6 L1\nLDC \"I'm a static field too!\"\nPUTSTATIC com/example/FooBarTestKt.thisIsAValWithInitialiser : Ljava/lang/String;\nRETURN\n</code></pre>\n\n<p>What can you see here? There is an important similarity between <code>thisIsAField</code> and <code>thisIsAValWithInitialiser</code>, being that they are backed by static fields. The getter method of <code>thisIsAValWithInitialiser</code> just returns that value. The value is <code>private</code>.</p>\n\n<p>The similarity between <code>thisIsAValWithInitialiser</code> and <code>thisIsAValWithGetter</code> is that they are both public getter methods, but the difference is that the return value of <code>thisIsAValWithGetter</code> is hardcoded in the method body. This is simply a public method that MockK can override (even though it is final).</p>\n\n<p>I guess (as I don't know the internals) that MockK cannot overrule <code>GETSTATIC com/example/FooBarTestKt.thisIsAValWithInitialiser : Ljava/lang/String;</code>, which is why a <code>val</code> initialiser cannot be mocked.</p>\n"}, {"tags": [], "owner": {"reputation": 1494, "user_id": 3742196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXFwn.jpg?s=128&g=1", "display_name": "oleksiyp", "link": "https://stackoverflow.com/users/3742196/oleksiyp"}, "is_accepted": true, "score": 3, "last_activity_date": 1543378578, "creation_date": 1543378578, "answer_id": 53512045, "question_id": 53502043, "link": "https://stackoverflow.com/questions/53502043/mockk-mock-spy-top-level-extension-method-being-called-on-top-level-val/53512045#53512045", "title": "MockK - mock / spy top level extension method being called on top level val", "body": "<p>Oh it is really madness when it comes to static and object mockks, and extension functions. To survive just think of extension functions as static functions with an argument.</p>\n\n<p>Check, this is working because <code>fooInstance</code> is just an object passed as the first argument:</p>\n\n<pre><code>    mockkStatic(\"kot.TestFileKt\")\n\n    baz()\n\n    val fooInstance = theVal\n\n    verify { fooInstance.bar() }\n</code></pre>\n\n<p>Combining it doesn't work:</p>\n\n<pre><code>    verify { theVal.bar() }\n</code></pre>\n\n<p>because it is as well verified.</p>\n\n<p>This will also work(as I said <code>Foo</code> is just first argument to static method) as well:</p>\n\n<pre><code>    mockkStatic(\"kot.TestFileKt\")\n\n    baz()\n\n    verify { any&lt;Foo&gt;().bar() }\n</code></pre>\n"}], "owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4075, "favorite_count": 0, "accepted_answer_id": 53512045, "answer_count": 2, "score": 2, "last_activity_date": 1543378578, "creation_date": 1543329358, "last_edit_date": 1543335222, "question_id": 53502043, "link": "https://stackoverflow.com/questions/53502043/mockk-mock-spy-top-level-extension-method-being-called-on-top-level-val", "title": "MockK - mock / spy top level extension method being called on top level val", "body": "<p>In the MWE below I'm trying to verify that calling <code>baz()</code> also calls a method on another object. However, I can't seem to mock / spy on that object.</p>\n\n<p>MWE:</p>\n\n<pre><code>package com.example\n\nimport io.mockk.every\nimport io.mockk.mockkStatic\nimport io.mockk.spyk\nimport io.mockk.verify\nimport org.junit.jupiter.api.Test\n\nclass FooBarTest {\n    @Test\n    fun `top level fun baz() calls theVal_bar()`() {\n        mockkStatic(\"com.example.FooBarTestKt\")\n        val spy = spyk(theVal, name = \"Hello, Spy!\")\n\n        every { theVal } returns spy\n\n        // Should call bar() on the spy, but note that the spy's name is not printed\n        baz()\n\n        verify { spy.bar() }\n    }\n}\n\nclass Foo\n\nfun Foo.bar() = println(\"Foo.bar! name = $this\")\n\nval theVal = Foo()\n\nfun baz() = theVal.bar()\n</code></pre>\n\n<p>This fails, because the call to <code>theVal.bar()</code> gets the <code>val</code> initialiser value instead of the mocked value <code>spy</code>.</p>\n\n<p>How can I enforce the spy being used without changing the top level property definitions? In other words: I need a top level 'constant', but I want to mock it too. I could use <code>val theVal get() = Foo()</code>, which solves the issue, but it changes the code significantly, as it would replace the <code>Foo</code> instance every time.</p>\n\n<p>Versions used:\n - Kotlin 1.3.10\n - MockK 1.8.13.kotlin13\n - JUnit 5.3.1</p>\n\n<p>The error:</p>\n\n<pre><code>java.lang.AssertionError: Verification failed: call 1 of 1: class com.example.FooBarTestKt.bar(eq(Foo(Hello, Spy!#1)))). Only one matching call to FooBarTestKt(static FooBarTestKt)/bar(Foo) happened, but arguments are not matching:\n[0]: argument: com.example.Foo@476b0ae6, matcher: eq(Foo(Hello, Spy!#1)), result: -\n</code></pre>\n"}, {"tags": ["android", "testing", "kotlin", "signature"], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 1, "last_activity_date": 1543341071, "creation_date": 1543341071, "answer_id": 53505396, "question_id": 53501818, "link": "https://stackoverflow.com/questions/53501818/mock-packageinfo-signatures-by-sha1-fingerprint-string/53505396#53505396", "title": "Mock PackageInfo.signatures by SHA1 fingerprint string", "body": "<p>I wouldn't recommend mocking the framework classes as that will be fragile. Instead, just create your own interface for providing the signatures and have an implementation used in the real application that relies on the framework. For example:</p>\n\n<pre><code>interface SignatureProvider {\n    val signatures: List&lt;String&gt;\n}\n\nclass AndroidSignatureProvider(private val packageManager: PackageManager): SignatureProvider {\n    private val flags = PackageManager.GET_META_DATA or PackageManager.GET_SIGNATURES\n\n    override val signatures: List&lt;String&gt;\n        get() = packageManager.getInstalledPackages(flags)\n           .flatMap { it.packageInfo.signatures.toList() }\n           .map { it.toCharsString() }\n}\n</code></pre>\n\n<p>Then in your tests, you can just mock a <code>SignatureProvider</code> to return the different signature strings that you want to test against:</p>\n\n<pre><code>private lateinit var signatureProvider: SignatureProvider\n\n@Before fun setup() {\n    signatureProvider = mock(SignatureProvider::class.java)\n    doReturn(listOf(\"sigA\", \"sigB\")).`when`(signatureProvider)`.signatures\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 914, "user_id": 4768512, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pN5JM.jpg?s=128&g=1", "display_name": "Sp4Rx", "link": "https://stackoverflow.com/users/4768512/sp4rx"}, "edited": false, "score": 0, "creation_date": 1609919613, "post_id": 56769206, "comment_id": 115968547, "body": "where is the <code>getPackageInfo()</code> method coming from"}, {"owner": {"reputation": 6277, "user_id": 467900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/F4pyu.jpg?s=128&g=1", "display_name": "mdelolmo", "link": "https://stackoverflow.com/users/467900/mdelolmo"}, "reply_to_user": {"reputation": 914, "user_id": 4768512, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/pN5JM.jpg?s=128&g=1", "display_name": "Sp4Rx", "link": "https://stackoverflow.com/users/4768512/sp4rx"}, "edited": false, "score": 1, "creation_date": 1610625023, "post_id": 56769206, "comment_id": 116194365, "body": "@Sp4Rx I will edit my answer to add that method"}], "tags": [], "owner": {"reputation": 6277, "user_id": 467900, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/F4pyu.jpg?s=128&g=1", "display_name": "mdelolmo", "link": "https://stackoverflow.com/users/467900/mdelolmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1610625197, "last_edit_date": 1610625197, "creation_date": 1561540413, "answer_id": 56769206, "question_id": 53501818, "link": "https://stackoverflow.com/questions/53501818/mock-packageinfo-signatures-by-sha1-fingerprint-string/56769206#56769206", "title": "Mock PackageInfo.signatures by SHA1 fingerprint string", "body": "<p>I believe you can achieve that by doing something like this:</p>\n<pre><code>testPackage() {\n   final ShadowPackageManager packageManager = shadowOf(RuntimeEnvironment.application.getPackageManager());\n   packageManager.installPackage(getPackageInfo(com.yourapp));\n   final PackageInfo packageInfo = packageManager.getInternalMutablePackageInfo(com.yourapp);\n   packageInfo.signatures = new Signature[1];\n   packageInfo.signatures[0] = new Signature(&quot;your_signature&quot;);\n}\n\nprivate static PackageInfo getPackageInfo(String packageName) {\n    final PackageInfoBuilder builder = PackageInfoBuilder.newBuilder();\n    builder.setPackageName(packageName);\n    return builder.build();\n}\n</code></pre>\n<p>The expected format is that produced by <code>Signature#toChars()</code>.</p>\n<p>Now, I would agree with @kcoppock , because operating with signatures and their different representations is cumbersome and error-prone.</p>\n"}], "owner": {"reputation": 613, "user_id": 8195331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8853b2241b7ce73ea2da0f47dffb26?s=128&d=identicon&r=PG&f=1", "display_name": "grasdy", "link": "https://stackoverflow.com/users/8195331/grasdy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 53505396, "answer_count": 2, "score": 2, "last_activity_date": 1610625197, "creation_date": 1543328613, "question_id": 53501818, "link": "https://stackoverflow.com/questions/53501818/mock-packageinfo-signatures-by-sha1-fingerprint-string", "title": "Mock PackageInfo.signatures by SHA1 fingerprint string", "body": "<p>I've implemented the validation for incompatible app in my android application by comparing package name and signature of PackageInfo. I get information about installed packages by:</p>\n\n<p><code>val packages = context.ctx.packageManager.getInstalledPackages(PackageManager.GET_META_DATA or PackageManager.GET_SIGNATURES)</code></p>\n\n<p>and after that just compare strings of package names and signatures. I convert PackageInfo.signatures into Hex by this function:</p>\n\n<pre><code>fun bytesToHex(bytes: ByteArray): String {\n        val hexArray = charArrayOf('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F')\n        val hexChars = CharArray(bytes.size * 2)\n        var v: Int\n        for (j in bytes.indices) {\n            v = bytes[j].toInt() and 0xFF\n            hexChars[j * 2] = hexArray[v.ushr(4)]\n            hexChars[j * 2 + 1] = hexArray[v and 0x0F]\n        }\n        return String(hexChars)\n}\n</code></pre>\n\n<p>and it works fine.</p>\n\n<p>Now I want to implement several unit tests for this functionality and faced difficulties: how can I mock PackageInfo.signatures? How can I translate my SHA1 fingerprint string into android.content.pm.Signature?</p>\n"}, {"tags": ["java", "spring-boot", "testing", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 3924, "user_id": 6722100, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1c741df6363ff4fe3e32eee854821c3?s=128&d=identicon&r=PG&f=1", "display_name": "achAmh&#225;in", "link": "https://stackoverflow.com/users/6722100/achamh%c3%a1in"}, "edited": false, "score": 0, "creation_date": 1543324969, "post_id": 53500689, "comment_id": 93870455, "body": "<a href=\"http://junit.sourceforge.net/javadoc/org/junit/Ignore.html\" rel=\"nofollow noreferrer\">@ignore</a>?"}, {"owner": {"reputation": 876, "user_id": 2003874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pioYk.jpg?s=128&g=1", "display_name": "David Baak", "link": "https://stackoverflow.com/users/2003874/david-baak"}, "edited": false, "score": 2, "creation_date": 1543324973, "post_id": 53500689, "comment_id": 93870457, "body": "Which code coverage tool?"}, {"owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "edited": false, "score": 0, "creation_date": 1543325170, "post_id": 53500689, "comment_id": 93870592, "body": "It would be the default that comes with <code>org.springframework.boot:spring-boot-starter-test</code>. Not sure how I can dig into this package further in IntelliJ"}, {"owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "edited": false, "score": 0, "creation_date": 1543325647, "post_id": 53500689, "comment_id": 93870900, "body": "@ignore doesn&#39;t seem to work for me :/"}, {"owner": {"reputation": 84621, "user_id": 1384297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQ01b.jpg?s=128&g=1", "display_name": "Andy Wilkinson", "link": "https://stackoverflow.com/users/1384297/andy-wilkinson"}, "edited": false, "score": 2, "creation_date": 1543327110, "post_id": 53500689, "comment_id": 93871858, "body": "<code>spring-boot-starter-test</code> does not provide anything for measuring code coverage. Perhaps you&#39;re using IntelliJ&#39;s built-in coverage support?"}, {"owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "edited": false, "score": 0, "creation_date": 1543327228, "post_id": 53500689, "comment_id": 93871923, "body": "ah potentially... that&#39;s not good. Won&#39;t work in a CI/CD pipeline. Probably need to look at using a separate package :)"}], "answers": [{"comments": [{"owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "edited": false, "score": 0, "creation_date": 1543407061, "post_id": 53512570, "comment_id": 93906900, "body": "Hey bro this didn&#39;t quite do it for me, but it did lead me down the right track so I&#39;m upvoting your answer :)"}], "tags": [], "owner": {"reputation": 734, "user_id": 9339330, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BWG2MrqpH_c/AAAAAAAAAAI/AAAAAAAAAGE/sT0fA9d9lmQ/photo.jpg?sz=128", "display_name": "Min Hyoung Hong", "link": "https://stackoverflow.com/users/9339330/min-hyoung-hong"}, "is_accepted": false, "score": 1, "last_activity_date": 1543382080, "creation_date": 1543382080, "answer_id": 53512570, "question_id": 53500689, "link": "https://stackoverflow.com/questions/53500689/is-there-an-easy-way-to-exclude-classes-from-test-coverage-using-java-annotation/53512570#53512570", "title": "Is there an easy way to exclude classes from test coverage using Java Annotations in Spring Boot?", "body": "<p>You said that you are using kotlin and gradle. So I assume that you are using jacoco for test coverage.</p>\n\n<p>This is one of the jacoco coverage excludes example.</p>\n\n<pre><code>jacocoTestReport {\n    afterEvaluate {\n        classDirectories = files(classDirectories.files.collect {\n            fileTree(dir: it,\n                    exclude: ['**/*Application**'])\n        })\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "is_accepted": true, "score": 0, "last_activity_date": 1543407033, "creation_date": 1543407033, "answer_id": 53519173, "question_id": 53500689, "link": "https://stackoverflow.com/questions/53500689/is-there-an-easy-way-to-exclude-classes-from-test-coverage-using-java-annotation/53519173#53519173", "title": "Is there an easy way to exclude classes from test coverage using Java Annotations in Spring Boot?", "body": "<p>This is what ended up working for me. Had to write some custom custom filtering logic in a very hacky sort of way, but it did the job.</p>\n\n<p>Upvoting @Min Hyoung Hong's answer for leading me down the right track.</p>\n\n<p><strong>build.gradle.kts</strong></p>\n\n<pre><code>tasks {\n    withType&lt;KotlinCompile&lt;KotlinJvmOptions&gt;&gt; {\n        kotlinOptions.freeCompilerArgs = listOf(\"-Xjsr305=strict\")\n        kotlinOptions.jvmTarget = \"1.8\"\n    }\n\n    withType&lt;JacocoReport&gt; {\n        reports {\n            xml.isEnabled = false\n            csv.isEnabled = false\n            html.destination = file(\"$buildDir/jacocoHtml\")\n        }\n\n        afterEvaluate {\n            val filesToAvoidForCoverage = listOf(\n                    \"/dto\",\n                    \"/config\",\n                    \"MyApplicationKt.class\"\n            )\n            val filesToCover = mutableListOf&lt;String&gt;()\n            File(\"build/classes/kotlin/main/app/example/core/\")\n                    .walkTopDown()\n                    .mapNotNull { file -&gt;\n                        var match = false\n                        filesToAvoidForCoverage.forEach {\n                            if (file.absolutePath.contains(it)) {\n                                match = true\n                            }\n                        }\n                        return@mapNotNull if (!match) {\n                            file.absolutePath\n                        } else {\n                            null\n                        }\n                    }\n                    .filter { it.contains(\".class\") }\n                    .toCollection(filesToCover)\n\n            classDirectories = files(filesToCover)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2971, "user_id": 5561773, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ssUz7.jpg?s=128&g=1", "display_name": "Clement", "link": "https://stackoverflow.com/users/5561773/clement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1414, "favorite_count": 0, "accepted_answer_id": 53519173, "answer_count": 2, "score": 1, "last_activity_date": 1543407033, "creation_date": 1543324872, "last_edit_date": 1543326891, "question_id": 53500689, "link": "https://stackoverflow.com/questions/53500689/is-there-an-easy-way-to-exclude-classes-from-test-coverage-using-java-annotation", "title": "Is there an easy way to exclude classes from test coverage using Java Annotations in Spring Boot?", "body": "<p>I have a (gradle + kotlin) spring boot project with several DTOs, configuration classes, constants etc. that I don't want to be analyzed during test coverage analysis.</p>\n\n<p>Is there a convenient Java notation that I can use?</p>\n"}, {"tags": ["serialization", "kotlin", "constructor", "android", "gson"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1543327989, "post_id": 53500502, "comment_id": 93872377, "body": "given your use of the GSON tag, I added GSON to the title and text to make it clear that this was a GSON specific question."}], "answers": [{"comments": [{"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543324686, "post_id": 53500552, "comment_id": 93870264, "body": "I edited my question Expose and Transient are ignoring my field always, i need to create dynamically json"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543324795, "post_id": 53500552, "comment_id": 93870328, "body": "Have you considered a variant of manual implementation of <code>JsonSerializer</code> then? <a href=\"https://static.javadoc.io/com.google.code.gson/gson/2.6.2/com/google/gson/JsonDeserializer.html\" rel=\"nofollow noreferrer\">static.javadoc.io/com.google.code.gson/gson/2.6.2/com/google&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543324942, "post_id": 53500552, "comment_id": 93870435, "body": "Thank you for yr quick reply. I think, It is a last chance, but i need easy way from developers who have faced already?"}, {"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543325003, "post_id": 53500552, "comment_id": 93870487, "body": "For example in Java, i create multiple constructor then generate gson with constructor fields which i wanted."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543325495, "post_id": 53500552, "comment_id": 93870810, "body": "It&#39;s the same bytecode received from Kotlin source code after compilation as Java&#39;s... Writing secondary constructors didn&#39;t help?"}, {"owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543326672, "post_id": 53500552, "comment_id": 93871575, "body": "is it possible to create two constructor with the same fields i mean <code>constructor(id: Int, description: String): this(description)     constructor(id: Int, picture: String): this(picture) </code>?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "edited": false, "score": 0, "creation_date": 1543329135, "post_id": 53500552, "comment_id": 93873069, "body": "Not with the same signature, of course. But maybe <code>typealias</code> (<a href=\"https://kotlinlang.org/docs/reference/type-aliases.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/type-aliases.html</a>) could help (I&#39;m not sure but it is a thing to consider)."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 1, "last_activity_date": 1543324392, "creation_date": 1543324392, "answer_id": 53500552, "question_id": 53500502, "link": "https://stackoverflow.com/questions/53500502/kotlin-data-class-create-dynamically-json-of-its-fields-using-gson/53500552#53500552", "title": "Kotlin data class create dynamically json of its fields using GSON", "body": "<p>Here is actually a way to ignore fields, that are not marked via <code>@Exposed</code> annotation. In order for this to work, special configuration should be used when instantiating <code>Gson</code>. <a href=\"https://futurestud.io/tutorials/gson-model-annotations-how-to-ignore-fields-with-expose\" rel=\"nofollow noreferrer\">Here</a> is how you can to this.</p>\n\n<p>Easy way is to mark the field as <code>@Transient</code>. Then it would not be either serialized and deserialized.</p>\n"}, {"tags": [], "owner": {"reputation": 12834, "user_id": 1942750, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/cae436a4ce75a6eb9c6d01f4c4ac8f05?s=128&d=identicon&r=PG&f=1", "display_name": "mr.boyfox", "link": "https://stackoverflow.com/users/1942750/mr-boyfox"}, "is_accepted": true, "score": 2, "last_activity_date": 1543336436, "last_edit_date": 1543336436, "creation_date": 1543336113, "answer_id": 53504065, "question_id": 53500502, "link": "https://stackoverflow.com/questions/53500502/kotlin-data-class-create-dynamically-json-of-its-fields-using-gson/53504065#53504065", "title": "Kotlin data class create dynamically json of its fields using GSON", "body": "<p>You can solve this problem with writing custom adapter and with optional types:</p>\n\n<pre><code>import com.google.gson.Gson\nimport com.google.gson.GsonBuilder\nimport com.google.gson.TypeAdapter\nimport com.google.gson.stream.JsonReader\nimport com.google.gson.stream.JsonToken\nimport com.google.gson.stream.JsonWriter\n\ndata class TestModel(\n    val id: Int,\n    val description: String? = \"\",\n    val picture: String? = \"\")\n\nclass TesModelTypeAdapter : TypeAdapter&lt;TestModel&gt;() {\n    override fun read(reader: JsonReader?): TestModel {\n        var id: Int? = null\n        var picture: String? = null\n        var description: String? = null\n\n        reader?.beginObject()\n        while (reader?.hasNext() == true) {\n            val name = reader.nextName()\n\n            if (reader.peek() == JsonToken.NULL) {\n                reader.nextNull()\n                continue\n            }\n\n            when (name) {\n                \"id\" -&gt; id = reader.nextInt()\n                \"picture\" -&gt; picture = reader.nextString()\n                \"description\" -&gt; description = reader.nextString()\n            }\n        }\n        reader?.endObject()\n\n        return when {\n            !picture.isNullOrBlank() &amp;&amp; description.isNullOrBlank() -&gt; TestModel(id = id ?: 0, picture = picture)\n            !description.isNullOrBlank() &amp;&amp; picture.isNullOrBlank() -&gt; TestModel(id = id ?: 0, description = description)\n            else -&gt; TestModel(id ?: 0, picture, description)\n        }\n    }\n\n    override fun write(out: JsonWriter?, value: TestModel?) {\n        out?.apply {\n            beginObject()\n\n            value?.let {\n                when {\n                    !it.picture.isNullOrBlank() &amp;&amp; it.description.isNullOrBlank() -&gt; {\n                        name(\"id\").value(it.id)\n                    name(\"picture\").value(it.picture)\n                    }\n                    !it.description.isNullOrBlank() &amp;&amp; it.picture.isNullOrBlank() -&gt; {\n                        name(\"id\").value(it.id)\n                    name(\"description\").value(it.description)\n                    }\n                    else -&gt; {\n                        name(\"id\").value(it.id)\n                        name(\"picture\").value(it.picture)\n                    name(\"description\").value(it.description)\n                    }\n                }\n            }\n\n            endObject()\n        }\n    }\n}\n\nclass App {\n    companion object {\n        @JvmStatic fun main(args: Array&lt;String&gt;) {\n            val tm = TestModel(12, description = \"Hello desc\")\n            val tm2 = TestModel(23, picture = \"https://www.pexels.com/photo/daylight-forest-glossy-lake-443446/\")\n            val tm3 = TestModel(12, \"Hello desc\", \"https://www.pexels.com/photo/daylight-forest-glossy-lake-443446/\")\n\n            val gson = GsonBuilder().registerTypeAdapter(TestModel::class.java, TesModelTypeAdapter()).create()\n\n            System.out.println(gson.toJson(tm))\n            System.out.println(gson.toJson(tm2))\n            System.out.println(gson.toJson(tm3))\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/N1Nct.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N1Nct.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "is_accepted": false, "score": 1, "last_activity_date": 1543386303, "creation_date": 1543386303, "answer_id": 53513341, "question_id": 53500502, "link": "https://stackoverflow.com/questions/53500502/kotlin-data-class-create-dynamically-json-of-its-fields-using-gson/53513341#53513341", "title": "Kotlin data class create dynamically json of its fields using GSON", "body": "<p>I want to give you alternative ways without manually serialization/deserialization.</p>\n\n<pre><code>data class TestModel(\n    val id: Int,\n    val description: String? = null,\n    val picture: String? = null)\n</code></pre>\n\n<p>When you create json from data class</p>\n\n<pre><code>val params = TestModel(id = 1, description = \"custom text\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val params = TestModel(id = 1, picture = \"picture path\")\n</code></pre>\n\n<blockquote>\n  <p>If one of them field is null of data class GSON skips that field\n  automatically.</p>\n</blockquote>\n"}], "owner": {"reputation": 2904, "user_id": 1597841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/pVMAv.jpg?s=128&g=1", "display_name": "nAkhmedov", "link": "https://stackoverflow.com/users/1597841/nakhmedov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2058, "favorite_count": 0, "accepted_answer_id": 53504065, "answer_count": 3, "score": 3, "last_activity_date": 1543386303, "creation_date": 1543324232, "last_edit_date": 1549310398, "question_id": 53500502, "link": "https://stackoverflow.com/questions/53500502/kotlin-data-class-create-dynamically-json-of-its-fields-using-gson", "title": "Kotlin data class create dynamically json of its fields using GSON", "body": "<p>I have a data class like this:</p>\n\n<pre><code>data class TestModel(\n     val id: Int, \n     val description: String, \n     val picture: String)\n</code></pre>\n\n<p>If I create JSON from this data class using GSON and it generates a result like this</p>\n\n<pre><code>{\"id\":1,\"description\":\"Test\", \"picture\": \"picturePath\"}\n</code></pre>\n\n<p>What to do if I need the following JSON from my data class:</p>\n\n<pre><code>{\"id\":1, \"description\":\"Test\"}\n</code></pre>\n\n<p>And other times: </p>\n\n<pre><code>`{\"id\":1, \"picture\": \"picturePath\"}\n</code></pre>\n\n<p>`\nThanks in advance!</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "adapter"], "comments": [{"owner": {"reputation": 16790, "user_id": 2936153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIaVu.jpg?s=128&g=1", "display_name": "Rohit5k2", "link": "https://stackoverflow.com/users/2936153/rohit5k2"}, "edited": false, "score": 1, "creation_date": 1543323673, "post_id": 53500304, "comment_id": 93869651, "body": "Please show the code from where context is created. Looks like you pass the reference of Application, not the activity."}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 0, "creation_date": 1543329388, "post_id": 53500304, "comment_id": 93873240, "body": "If you need an <code>Activity</code> then just pass an <code>Activity</code> argument, downcasting Context to Activity is a code smell"}, {"owner": {"reputation": 157, "user_id": 7523998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d85aae1541b1583a21cd1c4838e443e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Dimitrov", "link": "https://stackoverflow.com/users/7523998/t-dimitrov"}, "edited": false, "score": 0, "creation_date": 1543329645, "post_id": 53500304, "comment_id": 93873400, "body": "if the context is an activity use just context instead of context.getApplicationContext"}], "answers": [{"tags": [], "owner": {"reputation": 14411, "user_id": 422060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2a06312762581d504ba0a25e5a90def?s=128&d=identicon&r=PG", "display_name": "keyboardsurfer", "link": "https://stackoverflow.com/users/422060/keyboardsurfer"}, "is_accepted": true, "score": 1, "last_activity_date": 1543323893, "creation_date": 1543323893, "answer_id": 53500392, "question_id": 53500304, "link": "https://stackoverflow.com/questions/53500304/kotlin-android-app-application-cannot-be-cast-to-android-app-activity-on-an/53500392#53500392", "title": "Kotlin - &quot;android.app.Application cannot be cast to android.app.Activity&quot; on an Adapter", "body": "<p>You're most likely passing an application context into the adapter, which you then cast to an Activity. So having a crash here is the expected behavior.</p>\n\n<p>It's safer to provide a custom callback from your adapter to the place where it is used. This lets you create the adapter without hard wiring its behavior to the activity. Then your callback implementation can take care of the action to perform.</p>\n"}, {"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 0, "last_activity_date": 1543323950, "creation_date": 1543323950, "answer_id": 53500415, "question_id": 53500304, "link": "https://stackoverflow.com/questions/53500304/kotlin-android-app-application-cannot-be-cast-to-android-app-activity-on-an/53500415#53500415", "title": "Kotlin - &quot;android.app.Application cannot be cast to android.app.Activity&quot; on an Adapter", "body": "<p>In code where you create an instance of <code>CartaoTipologiaAdapter</code> make sure you pass <code>Activity</code> as the <code>context</code>, not <code>context.applicationContext</code>. If you create the instance of <code>CartaoTipologiaAdapter</code> in activity, pass activity as <code>context</code>:</p>\n\n<pre><code>val adapter = CartaoTipologiaAdapter(yourList, this@YourActivity)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 7344185, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kozGW6rmYL4/AAAAAAAAAAI/AAAAAAAAAH0/mRpoRtpHESs/photo.jpg?sz=128", "display_name": "Manu Garg", "link": "https://stackoverflow.com/users/7344185/manu-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1543324529, "creation_date": 1543324529, "answer_id": 53500597, "question_id": 53500304, "link": "https://stackoverflow.com/questions/53500304/kotlin-android-app-application-cannot-be-cast-to-android-app-activity-on-an/53500597#53500597", "title": "Kotlin - &quot;android.app.Application cannot be cast to android.app.Activity&quot; on an Adapter", "body": "<p>you have to pass [your current Activity].this </p>\n"}], "owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 53500392, "answer_count": 3, "score": -2, "last_activity_date": 1543324529, "creation_date": 1543323588, "question_id": 53500304, "link": "https://stackoverflow.com/questions/53500304/kotlin-android-app-application-cannot-be-cast-to-android-app-activity-on-an", "title": "Kotlin - &quot;android.app.Application cannot be cast to android.app.Activity&quot; on an Adapter", "body": "<p>I'm trying to call an intent when select an item of a bottomNavigationView: </p>\n\n<pre><code> R.id.nova_foto_barra_cartao -&gt; {\n      val intent = CameraView.buildIntent(context.applicationContext, Constants.ULCERS)\n      (context as Activity).startActivityForResult(intent, 0)\n }\n</code></pre>\n\n<p>The code is written inside of an Adapter:</p>\n\n<pre><code>class CartaoTipologiaAdapter(private val cartoesTipologia: List&lt;CartaoTipologia&gt;, private val context: Context) : Adapter&lt;CartaoTipologiaAdapter.ViewHolder&gt;()\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1543321797, "post_id": 53499729, "comment_id": 93868577, "body": "make it a data class"}, {"owner": {"reputation": 14474, "user_id": 620053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c02287164d255c153ad13d2b1a83f90c?s=128&d=identicon&r=PG", "display_name": "Rafael T", "link": "https://stackoverflow.com/users/620053/rafael-t"}, "edited": false, "score": 0, "creation_date": 1543322258, "post_id": 53499729, "comment_id": 93868852, "body": "I&#39;m not familiar with kotlin, but what exactly hinders you writing custom methods?"}, {"owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "reply_to_user": {"reputation": 14474, "user_id": 620053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c02287164d255c153ad13d2b1a83f90c?s=128&d=identicon&r=PG", "display_name": "Rafael T", "link": "https://stackoverflow.com/users/620053/rafael-t"}, "edited": false, "score": 0, "creation_date": 1543322905, "post_id": 53499729, "comment_id": 93869230, "body": "@RafaelT Custom methods for what?"}], "answers": [{"comments": [{"owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323074, "post_id": 53500048, "comment_id": 93869320, "body": "I&#39;m currently using the @Parcelize decorator. Should I override CREATOR?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323181, "post_id": 53500048, "comment_id": 93869360, "body": "If you use <code>@Parcelize</code>, then making this class a data class (<code>data class Time(var hour: Int, var minute: Int) : Comparable&lt;Time&gt;, Parcelable</code>) would be enough."}, {"owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323262, "post_id": 53500048, "comment_id": 93869406, "body": "How do you modify setter?"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323524, "post_id": 53500048, "comment_id": 93869546, "body": "You mean overriding default setter with custom implementation? Here&#39;s how you can do it: <a href=\"https://stackoverflow.com/questions/38492103/override-getter-for-kotlin-data-class\" title=\"override getter for kotlin data class\">stackoverflow.com/questions/38492103/&hellip;</a>"}, {"owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323619, "post_id": 53500048, "comment_id": 93869607, "body": "Yes. I have to override default setter."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 1, "creation_date": 1543323712, "post_id": 53500048, "comment_id": 93869673, "body": "It is not recommended to contain processing logic inside data classes, so I would recommend either to wrap <code>Time</code> data class instance with another object that knows how to parse, or making <code>Time</code> not data class and implement mentioned methods yourself."}, {"owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "edited": false, "score": 0, "creation_date": 1543323880, "post_id": 53500048, "comment_id": 93869777, "body": "I guess wrapping it would be the best solution. Thanks for your help."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 2, "last_activity_date": 1543323097, "last_edit_date": 1543323097, "creation_date": 1543322739, "answer_id": 53500048, "question_id": 53499729, "link": "https://stackoverflow.com/questions/53499729/how-to-add-setter-and-getter-to-member-variables-of-a-parcelable-class/53500048#53500048", "title": "How to add setter and getter to member variables of a Parcelable class", "body": "<p>Kotlin's properties are already shipped with getters and setters. Every time you say <code>time.hour = 5</code> or <code>val currentTime = time.hour</code> - <strong>corresponding setter or getter is invoked</strong>.</p>\n\n<p>The problem here is not with constructor, but with <code>CREATOR</code> that parcelable requires.</p>\n\n<p>The complete example would look like this:</p>\n\n<pre><code>class Time(var hour: Int, var minute: Int) : Comparable&lt;Time&gt;, Parcelable {\n\n    override fun writeToParcel(dest: Parcel?, flags: Int) {\n        dest!!.writeInt(hour)\n        dest.writeInt(minute)\n    }\n\n    override fun describeContents(): Int = 0\n\n    override fun compareTo(other: Time): Int {\n        // your comparsion logic\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;Time&gt; {\n        override fun createFromParcel(parcel: Parcel): Time {\n            return Time(parcel.readInt(), parcel.readInt())\n        }\n\n        override fun newArray(size: Int): Array&lt;Time?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 916, "user_id": 8471995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50d0d9424eb5d315a2c1962e3f87b801?s=128&d=identicon&r=PG", "display_name": "Inyoung Kim \uae40\uc778\uc601", "link": "https://stackoverflow.com/users/8471995/inyoung-kim-%ea%b9%80%ec%9d%b8%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543323293, "creation_date": 1543321747, "last_edit_date": 1543323293, "question_id": 53499729, "link": "https://stackoverflow.com/questions/53499729/how-to-add-setter-and-getter-to-member-variables-of-a-parcelable-class", "title": "How to add setter and getter to member variables of a Parcelable class", "body": "<p>Below is a class that I'm currently working on</p>\n\n<pre><code>@Parcelize\nclass Time(var hour:Int, var minute:Int):Comparable&lt;Time&gt;,Parcelable\n</code></pre>\n\n<p>I want to add a setter to member variables hour and minute so that they would stay in time format. And the class has to be passed through intent, so it implements Parcelable. But it says that a Parcelable class should have a primary constructor so I'm having problem with adding setters. \nCan anyone please tell me why and a solution? Thank you. </p>\n"}, {"tags": ["generics", "kotlin", "jackson"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543321975, "post_id": 53499407, "comment_id": 93868690, "body": "Have you tried this without your type factory call, and let the <code>readValue</code> extension function just infer the reified type?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543324389, "post_id": 53499407, "comment_id": 93870081, "body": "What version of Jackson are you using?  what version of the Jackson-Kotlin module are you using? what version of Kotlin?"}, {"owner": {"reputation": 6870, "user_id": 1041442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG", "display_name": "Jilles van Gurp", "link": "https://stackoverflow.com/users/1041442/jilles-van-gurp"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543331365, "post_id": 53499407, "comment_id": 93874470, "body": "2.9.7 of both, type inference does not work here because jackson has no way of knowing what the type is. Also Java 8, kotlin 1.3.10"}], "answers": [{"comments": [{"owner": {"reputation": 6870, "user_id": 1041442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG", "display_name": "Jilles van Gurp", "link": "https://stackoverflow.com/users/1041442/jilles-van-gurp"}, "edited": false, "score": 0, "creation_date": 1543331293, "post_id": 53500663, "comment_id": 93874429, "body": "Thanks for looking into this. I tried doing what you do with some variations of object mapper config and your nicer stringify but I always get this weird exception: java.lang.reflect.GenericSignatureFormatError: Signature Parse error: expected &#39;&lt;&#39; or &#39;;&#39; but got   \tRemaining input:  handle generics$Outer&lt;Lio/inbot/common/ObjectMapperTest$should handle generics$Inner;&gt;;&gt;;  Deserializing to a non generic class works, i.e. nothing wrong with the string.  So what&#39;s different on your setup? Java 8/kotlin 1.3.10 here."}, {"owner": {"reputation": 6870, "user_id": 1041442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG", "display_name": "Jilles van Gurp", "link": "https://stackoverflow.com/users/1041442/jilles-van-gurp"}, "edited": false, "score": 0, "creation_date": 1543331755, "post_id": 53500663, "comment_id": 93874701, "body": "I figured out the difference, putting the data class defiinitions in the test method as I did does not work. Moving them outside the function scope fixes things. Even my original version works that way. So it matters where you put the class definitions for deserialization."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1543325131, "last_edit_date": 1543325131, "creation_date": 1543324805, "answer_id": 53500663, "question_id": 53499407, "link": "https://stackoverflow.com/questions/53499407/deserialize-generic-class-using-jackson-module-kotlin/53500663#53500663", "title": "deserialize generic class using jackson-module-kotlin", "body": "<p>Using <code>2.9.6</code> of Jackson and then also the master branch <code>2.9.8</code> of Jackson along with the current Jackson-Kotlin module, I added this test case which passes for both your version of the code, and the cleaner idiomatic version of the code.  </p>\n\n<p>Note that I updated the <code>stringify</code> method to be more idiomatic as well, but this would not affect the test.</p>\n\n<p>Your call to <code>readValue</code> is also more complicated than neccessary.  Change:</p>\n\n\n\n<pre><code>val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized, objectMapper.typeFactory.constructParametricType(Outer::class.java, Inner::class.java))\n</code></pre>\n\n<p>to simply: </p>\n\n<pre><code>val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized)    \n</code></pre>\n\n<p>This is the full passing tests:</p>\n\n<pre><code>class TestStackOverflow53499407 {\n    data class Inner(val meaningOfLife: Int)\n    data class Outer&lt;T&gt;(val inner: T)\n\n    fun &lt;T&gt; ObjectMapper.stringify(value: T, pretty: Boolean = false): String {\n        StringWriter().use { writer -&gt;\n            if (pretty) {\n                writerWithDefaultPrettyPrinter().writeValue(writer, value)\n            } else {\n                writeValue(writer, value)\n            }\n            return writer.toString()\n        }\n    }\n\n    @Test\n    fun test53499407_cleanTest() {\n        val outer = Outer(Inner(42))\n        val objectMapper = jacksonObjectMapper()\n\n        val serialized = objectMapper.stringify(outer, true)\n        println(serialized)\n\n        val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized)\n        assertEquals(42, parsed.inner.meaningOfLife)\n    }\n\n    @Test\n    fun test53499407_idiomatic_tweek() {\n        val outer = Outer(Inner(42))\n\n        val jsonFactory = JsonFactory()\n        jsonFactory.configure(JsonGenerator.Feature.AUTO_CLOSE_TARGET, false)\n        jsonFactory.configure(JsonParser.Feature.IGNORE_UNDEFINED, true)\n\n        val objectMapper = ObjectMapper(jsonFactory)\n        objectMapper.findAndRegisterModules()\n        objectMapper.propertyNamingStrategy = PropertyNamingStrategy.SnakeCaseStrategy()\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL)\n\n        val serialized = objectMapper.stringify(outer, true)\n        println(serialized)\n\n        // This line changed to be idiomatic\n        val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized)\n        assertEquals(42, parsed.inner.meaningOfLife)\n    }\n\n    @Test\n    fun test53499407_as_written_in_stackoverflow() {\n        val outer = Outer(Inner(42))\n\n        val jsonFactory = JsonFactory()\n        jsonFactory.configure(JsonGenerator.Feature.AUTO_CLOSE_TARGET, false)\n        jsonFactory.configure(JsonParser.Feature.IGNORE_UNDEFINED, true)\n\n        val objectMapper = ObjectMapper(jsonFactory)\n        objectMapper.findAndRegisterModules()\n        objectMapper.propertyNamingStrategy = PropertyNamingStrategy.SnakeCaseStrategy()\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL)\n\n        val serialized = objectMapper.stringify(outer, true)\n        println(serialized)\n\n        // deserializing does not work using:\n        // https://stackoverflow.com/questions/11664894/jackson-deserialize-using-generic-class\n        val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized, objectMapper.typeFactory.constructParametricType(Outer::class.java, Inner::class.java))\n        assertEquals(42, parsed.inner.meaningOfLife)\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MInQ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MInQ7.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 6870, "user_id": 1041442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/99d5dced06046bd68560dc8eb4caa61f?s=128&d=identicon&r=PG", "display_name": "Jilles van Gurp", "link": "https://stackoverflow.com/users/1041442/jilles-van-gurp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3220, "favorite_count": 0, "accepted_answer_id": 53500663, "answer_count": 1, "score": 0, "last_activity_date": 1543332097, "creation_date": 1543320660, "last_edit_date": 1543332097, "question_id": 53499407, "link": "https://stackoverflow.com/questions/53499407/deserialize-generic-class-using-jackson-module-kotlin", "title": "deserialize generic class using jackson-module-kotlin", "body": "<p>I'm trying to use the jackson-kotlin integration. Mostly it works nice but I'm having trouble with deserializing generic types. I tried to adapt the answer to this question: <a href=\"https://stackoverflow.com/questions/11664894/jackson-deserialize-using-generic-class\">Jackson - Deserialize using generic class</a></p>\n\n<pre><code>    // create an object mapper\n    val jsonFactory = JsonFactory()\n    jsonFactory.configure(JsonGenerator.Feature.AUTO_CLOSE_TARGET, false)\n    jsonFactory.configure(JsonParser.Feature.IGNORE_UNDEFINED, true)\n\n    val objectMapper = ObjectMapper(jsonFactory)\n    objectMapper.findAndRegisterModules()\n    objectMapper.propertyNamingStrategy = PropertyNamingStrategy.SnakeCaseStrategy()\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL)\n\n    // simple generic type\n    data class Inner(val meaningOfLife: Int)\n    data class Outer&lt;T&gt;(val inner: T)\n\n    val outer = Outer(Inner(42))\n\n    val serialized = objectMapper.stringify(outer, true)\n    println(serialized)\n\n    // deserializing does not work using:\n    // https://stackoverflow.com/questions/11664894/jackson-deserialize-using-generic-class\n    val parsed = objectMapper.readValue&lt;Outer&lt;Inner&gt;&gt;(serialized, objectMapper.typeFactory.constructParametricType(Outer::class.java,Inner::class.java))\n</code></pre>\n\n<p>This throws an exception:</p>\n\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Cannot deserialize Class io.inbot.common.ObjectMapperTest$should handle generics$Outer (of type local/anonymous) as a Bean\n at [Source: (String)\"{\n  \"inner\" : {\n    \"meaning_of_life\" : 42\n  }\n}\"; line: 1, column: 1]\n\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:306)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:268)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCacheValueDeserializer(DeserializerCache.java:244)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache.findValueDeserializer(DeserializerCache.java:142)\n    at com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:477)\n    at com.fasterxml.jackson.databind.ObjectMapper._findRootDeserializer(ObjectMapper.java:4190)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4009)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3042)\n    at io.inbot.common.ObjectMapperTest.should handle generics(ObjectMapperTest.kt:22)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)\n    at org.testng.internal.Invoker.invokeMethod(Invoker.java:580)\n    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:716)\n    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:988)\n    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)\n    at org.testng.TestRunner.privateRun(TestRunner.java:648)\n    at org.testng.TestRunner.run(TestRunner.java:505)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:455)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:450)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:415)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:364)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:84)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1208)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1137)\n    at org.testng.TestNG.runSuites(TestNG.java:1049)\n    at org.testng.TestNG.run(TestNG.java:1017)\n    at org.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:72)\n    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:123)\nCaused by: java.lang.IllegalArgumentException: Cannot deserialize Class io.inbot.common.ObjectMapperTest$should handle generics$Outer (of type local/anonymous) as a Bean\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.isPotentialBeanType(BeanDeserializerFactory.java:877)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerFactory.createBeanDeserializer(BeanDeserializerFactory.java:131)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer2(DeserializerCache.java:411)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createDeserializer(DeserializerCache.java:349)\n    at com.fasterxml.jackson.databind.deser.DeserializerCache._createAndCache2(DeserializerCache.java:264)\n    ... 31 more\n</code></pre>\n\n<p>Obviously the jackson plugin for kotlin does not handle this. Is there a workaround for this or a different way of doing this?</p>\n\n<p>BTW. the stringify function is a simple extension function I added for ObjectMapper that takes care of the boilerplate code:</p>\n\n<pre><code>/**\n * Serializes [value] to a string. Pretty prints if [pretty] is set.\n */\nfun &lt;T&gt; ObjectMapper.stringify(value: T, pretty: Boolean = false): String {\n    val bos = ByteArrayOutputStream()\n    val writer = OutputStreamWriter(bos, StandardCharsets.UTF_8)\n    if(pretty) {\n        writerWithDefaultPrettyPrinter().writeValue(writer,value)\n    } else {\n        writeValue(writer, value)\n    }\n    writer.flush()\n    bos.flush()\n    return bos.toByteArray().toString(StandardCharsets.UTF_8)\n}\n</code></pre>\n\n<p><strong>UPDATE</strong> The code in the answer by @jayson-minard works. It turns out that the key difference with my code was that I defined the data classes inside the test method. Moving them outside to the top level fixes things. Putting a dataclass in a function was a bad idea to begin with.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1543321269, "post_id": 53499335, "comment_id": 93868255, "body": "wait... your second one does not really give the same result as the first, right?"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1543321437, "post_id": 53499335, "comment_id": 93868362, "body": "your title is misleading... at least it does not look like that you transform a <code>Map&lt;Key, Value&gt;</code> to <code>Map&lt;Key, List&lt;Value&gt;&gt;</code> but rather it looks like you want to create a <code>Map&lt;Key, List&lt;Value&gt;&gt;</code> from something like <code>Sequence&lt;Pair&lt;Key, Value&gt;&gt;</code>.... could you please confirm or deny and update the question accordingly?"}], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 3, "last_activity_date": 1543325386, "last_edit_date": 1543325386, "creation_date": 1543320899, "answer_id": 53499486, "question_id": 53499335, "link": "https://stackoverflow.com/questions/53499335/kotlin-convert-mapkey-value-to-mapkey-listvalue/53499486#53499486", "title": "Kotlin convert Map&lt;Key, Value&gt; to Map&lt;key, List&lt;Value&gt;&gt;", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/group-by.html\" rel=\"nofollow noreferrer\"><code>groupBy</code></a> supports a second parameter which can be used to immediately transform the values, so you only need the following (note: also integrated the <code>map</code>-call into the key selector):</p>\n\n<pre><code>someArray.groupBy({ it.first.id }, { it.second })\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 7990631, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6713e0e3c848ec94430152b774c31947?s=128&d=identicon&r=PG&f=1", "display_name": "MrNetroful", "link": "https://stackoverflow.com/users/7990631/mrnetroful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53499486, "answer_count": 1, "score": -1, "last_activity_date": 1543325386, "creation_date": 1543320424, "question_id": 53499335, "link": "https://stackoverflow.com/questions/53499335/kotlin-convert-mapkey-value-to-mapkey-listvalue", "title": "Kotlin convert Map&lt;Key, Value&gt; to Map&lt;key, List&lt;Value&gt;&gt;", "body": "<p>Is there any way to create Map of ?\nBelow I'm showing what I got for now. First solution is much cleaner but requires to get another object what I don't need (functional programming).</p>\n\n<pre><code>    val result: MutableMap&lt;key, MutableList&lt;Int&gt;&gt; = mutableMapOf()\n\n    someArray.onEach { (key, int) -&gt;\n        result\n            .computeIfAbsent(key.id) { mutableListOf() }\n            .add(int)\n    }\n\n    return list\n</code></pre>\n\n<p>I got something like this which is not so clean</p>\n\n<pre><code>    return someArray\n        .map { (key, int) -&gt;\n            key.id to int\n        }\n        .groupBy { it.first }\n        .map { (k, v) -&gt;\n            k to v.filter { it.first == k }\n                .map { it.second }\n        }\n</code></pre>\n"}, {"tags": ["android", "lambda", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 8306, "user_id": 10271334, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2ijZhRVumwM/AAAAAAAAAAI/AAAAAAAACes/Tjw_JgqObGI/photo.jpg?sz=128", "display_name": "Jeel Vankhede", "link": "https://stackoverflow.com/users/10271334/jeel-vankhede"}, "edited": false, "score": 0, "creation_date": 1543320807, "post_id": 53499307, "comment_id": 93867971, "body": "can you explain a bit how you implement your Rx function call?"}, {"owner": {"reputation": 1022, "user_id": 4433302, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-JOonmcR4xYk/AAAAAAAAAAI/AAAAAAAAAE8/ujGMOOYVFAg/photo.jpg?sz=128", "display_name": "Surender Kumar", "link": "https://stackoverflow.com/users/4433302/surender-kumar"}, "edited": false, "score": 0, "creation_date": 1543321219, "post_id": 53499307, "comment_id": 93868222, "body": "Have you added JAVA8 compileOptions to your gradle?"}], "answers": [{"comments": [{"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543322118, "post_id": 53499547, "comment_id": 93868767, "body": "Where did you declare <code>result</code>?"}, {"owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "reply_to_user": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543324844, "post_id": 53499547, "comment_id": 93870362, "body": "<code>result</code> is just an object. Please check the answer."}, {"owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "edited": false, "score": 0, "creation_date": 1543326404, "post_id": 53499547, "comment_id": 93871398, "body": "Now it looks better. I was just saying that in your original answer, you were using an undeclared variable. Moreover, <code>subscribeBy</code> is an extensions function from <code>RxKotlin</code> thus it is not present in &quot;pure&quot; <code>RxJava</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543336284, "post_id": 53499547, "comment_id": 93877609, "body": "I get a warning that result of subscribeby is not used? cant this be done with existing .subscribe instead of subscribeby? will there be any difference"}, {"owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "edited": false, "score": 0, "creation_date": 1543337757, "post_id": 53499547, "comment_id": 93878509, "body": "@MarissaNicholas <code>result of subscribeby is not used</code> is coming because you also need to dispose the <code>observable</code>. Check this <a href=\"https://stackoverflow.com/questions/49522619/the-result-of-subscribe-is-not-used\" title=\"the result of subscribe is not used\">stackoverflow.com/questions/49522619/&hellip;</a> for more detail. And I have updated the answer with <code>subscribe</code> also. Please check."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543355533, "post_id": 53499547, "comment_id": 93887322, "body": "i am just using subscribe from your answer and it seems to be syntactically correct . also using that in kotlin, will there be any issues?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543355652, "post_id": 53499547, "comment_id": 93887374, "body": "crashes with a   nullpointerexception at    compositeDisposable!!.add(disposable)"}, {"owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "edited": false, "score": 0, "creation_date": 1543374393, "post_id": 53499547, "comment_id": 93892448, "body": "@MarissaNicholas <code>subscribe</code> will work fine in <code>kotlin</code>. There won&#39;t be any issues. For <code>nullpointerexception </code> please check that <code>compositeDisposable</code> is initialized properly. Please refer to some documentation/example on who to dispose an observable. You can also refer to this article <a href=\"https://medium.com/@vanniktech/rxjava-2-disposable-under-the-hood-f842d2373e64\" rel=\"nofollow noreferrer\">medium.com/@vanniktech/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543375131, "post_id": 53499547, "comment_id": 93892609, "body": "I initialize it as : val compositeDisposable:CompositeDisposable ?=null is that right?"}, {"owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "edited": false, "score": 0, "creation_date": 1543384357, "post_id": 53499547, "comment_id": 93895017, "body": "@MarissaNicholas You have to initialize it as  <code>val compositeDisposable:CompositeDisposable? = null</code> then <code>compositeDisposable = CompositeDisposable()</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543403540, "post_id": 53499547, "comment_id": 93904830, "body": "thanks! I will try it out in a few hours and let you know!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1543420554, "post_id": 53499547, "comment_id": 93915614, "body": "also, do you happen to have any idea about : <a href=\"https://stackoverflow.com/questions/53511227/how-to-avoid-memory-leaks-due-to-custom-static-handler-class?noredirect=1#comment93900039_53511227\" title=\"how to avoid memory leaks due to custom static handler class\">stackoverflow.com/questions/53511227/&hellip;</a>"}, {"owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "edited": false, "score": 0, "creation_date": 1543422682, "post_id": 53499547, "comment_id": 93916951, "body": "Thank you. Glad it helped :) I will check on another question and revert over that thread."}], "tags": [], "owner": {"reputation": 2424, "user_id": 6744566, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-g0XIGRZM7Z4/AAAAAAAAAAI/AAAAAAAAACU/NT6IsxgWGVs/photo.jpg?sz=128", "display_name": "Prithvi Bhola", "link": "https://stackoverflow.com/users/6744566/prithvi-bhola"}, "is_accepted": true, "score": 1, "last_activity_date": 1543564898, "last_edit_date": 1543564898, "creation_date": 1543321122, "answer_id": 53499547, "question_id": 53499307, "link": "https://stackoverflow.com/questions/53499307/how-do-i-convert-my-code-to-a-lambda-expression/53499547#53499547", "title": "How do I convert my code to a lambda expression?", "body": "<p>If you are using Kotlin you can do</p>\n\n<pre><code>    val compositeDisposable = CompositeDisposable()\n    var result: MYEntry? = null\n\n    val disposable = myvar.observe(MyEntry::class.java)\n                    .one(entryId)\n                    .applySchedulers()\n                    .applyOpBeforeAfter(showProgress, hideProgress)\n                    .subscribeBy(\n                       onNext = {\n                           result = it \n                       },\n                       onError = {\n                           Timber.e(e)\n                       },\n                       onComplete = {\n                           result?.let {\n                                        val something = Something(title = it.getField&lt;String&gt;(MyConstants.TITLE_KEY),\n                                                somethingImageAsset = it.getField&lt;MyAsset&gt;(MyConstants.IMAGE_KEY),\n                                                bodyText = it.getField&lt;String&gt;(MyConstants.BODY_TEXT_KEY))\n                                        view?.updateMySpace(something)\n                                    }\n                       }\n                    )\n    compositeDisposable.add(disposable)\n    compositeDisposable.dispose() // Dispose it in onStop() or onDestroy()\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<pre><code>val compositeDisposable = CompositeDisposable();\nvar result: MYEntry? = null\n\nval disposable = myvar.observe(MyEntry::class.java)\n                        .one(entryId)\n                        .applySchedulers()\n                        .applyOpBeforeAfter(showProgress, hideProgress)\n                        .subscribe(\n                           {\n                               result = it \n                           },\n                           {\n                            Timber.e(e)   \n                           },\n                           {\n                               result?.let {\n                                            val something = Something(title = it.getField&lt;String&gt;(MyConstants.TITLE_KEY),\n                                                    somethingImageAsset = it.getField&lt;MyAsset&gt;(MyConstants.IMAGE_KEY),\n                                                    bodyText = it.getField&lt;String&gt;(MyConstants.BODY_TEXT_KEY))\n                                            view?.updateMySpace(something)\n                                        }\n                           }\n                        )\ncompositeDisposable.add(disposable)\ncompositeDisposable.dispose() // Dispose it in onStop() or onDestroy()\n</code></pre>\n\n<p><strong>For CompositeDisposable:</strong></p>\n\n<pre><code>private var compositeDisposable = CompositeDisposable()\n\n    fun getCompositeDisposable(): CompositeDisposable {\n        if (compositeDisposable.isDisposed)\n            compositeDisposable = CompositeDisposable()\n        return compositeDisposable\n    }\n\n    fun addDisposable(disposable: Disposable) {\n        getCompositeDisposable().add(disposable)\n    }\n\n    fun dispose() {\n        getCompositeDisposable().dispose()\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7595208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636b0286d04768481fb29c06adb4104a?s=128&d=identicon&r=PG", "display_name": "Benjamin Kusicky", "link": "https://stackoverflow.com/users/7595208/benjamin-kusicky"}, "is_accepted": false, "score": 0, "last_activity_date": 1543328722, "creation_date": 1543328722, "answer_id": 53501855, "question_id": 53499307, "link": "https://stackoverflow.com/questions/53499307/how-do-i-convert-my-code-to-a-lambda-expression/53501855#53501855", "title": "How do I convert my code to a lambda expression?", "body": "<p>You can achieve this by pressing Alt + Enter. The rest of the work is done by IntelliJ.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 53499547, "answer_count": 2, "score": 0, "last_activity_date": 1543564898, "creation_date": 1543320320, "question_id": 53499307, "link": "https://stackoverflow.com/questions/53499307/how-do-i-convert-my-code-to-a-lambda-expression", "title": "How do I convert my code to a lambda expression?", "body": "<p>I am using the following code in my function such that it's a part of an Rxjava code where I subscribe. Is there a way I can convert this code to a lambda expression? </p>\n\n<pre><code> object : Mysubscriber&lt;MyEntry&gt;() {\n                                var result: MYEntry? = null\n\n                                override fun onComplete() {\n                                    result?.let {\n                                        val something = Something(title = it.getField&lt;String&gt;(MyConstants.TITLE_KEY),\n                                                somethingImageAsset = it.getField&lt;MyAsset&gt;(MyConstants.IMAGE_KEY),\n                                                bodyText = it.getField&lt;String&gt;(MyConstants.BODY_TEXT_KEY))\n                                        view?.updateMySpace(something)\n                                    }\n                                }\n\n                                override fun onError(e: Throwable) {\n                                    Timber.e(e)\n                                }\n\n                                override fun onNext(entry: MyEntry) {\n                                    result = entry\n                                }\n                            }\n</code></pre>\n\n<p>Just FYI, the RXjava function for the above code is :</p>\n\n<pre><code>myvar.observe(MyEntry::class.java)\n                .one(entryId)\n                .applySchedulers()\n                .applyOpBeforeAfter(showProgress, hideProgress)\n                .subscribe(\n                  \"above code\" )\n</code></pre>\n\n<p>Any ideas how to easily convert it to lambda expression? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "dialog", "dialogfragment"], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "is_accepted": false, "score": 0, "last_activity_date": 1543328184, "creation_date": 1543328184, "answer_id": 53501693, "question_id": 53499285, "link": "https://stackoverflow.com/questions/53499285/repositioned-dialogfragment-hit-area-for-setcanceledontouchoutside-has-an-unexpe/53501693#53501693", "title": "Repositioned DialogFragment hit area for setCanceledOnTouchOutside has an unexpected margin", "body": "<p>Converting to a PopupWindow has provided an acceptable solution.</p>\n\n<pre><code>override fun showSortDialog(yPositionToDrawDialog: Int) {\n    val popup = PopupWindow(\n        layoutInflater.inflate(R.layout.sort_view, null),\n        context?.resources?.getDimension(R.dimen.sort_view_tablet_min_width)?.toInt() \n            ?: DEFAULT_SORT_POPUP_WIDTH,\n        ConstraintLayout.LayoutParams.WRAP_CONTENT,\n        true\n    )\n\n    popup.showAsDropDown(sort_icon, 0, 0, (Gravity.TOP or Gravity.END))\n\n    val container = popup.contentView.parent as View\n    val windowManager = context?.getSystemService(Context.WINDOW_SERVICE) as WindowManager?\n    val layoutParams = container.layoutParams as WindowManager.LayoutParams\n\n    layoutParams.flags = layoutParams.flags or WindowManager.LayoutParams.FLAG_DIM_BEHIND\n    layoutParams.dimAmount = 0.6f\n    windowManager?.updateViewLayout(container, layoutParams)\n}\n</code></pre>\n"}], "owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543328184, "creation_date": 1543320244, "last_edit_date": 1543320857, "question_id": 53499285, "link": "https://stackoverflow.com/questions/53499285/repositioned-dialogfragment-hit-area-for-setcanceledontouchoutside-has-an-unexpe", "title": "Repositioned DialogFragment hit area for setCanceledOnTouchOutside has an unexpected margin", "body": "<p>I am using a dialog for a filter option. The design for tablet involves the dialog appearing below the image button that made it appear. I feel the user expectation would be that they could click the button again to hide the dialog. The problem I see is that the dialog fragment seems to have a margin around it that does not respond to clicks in the dimmed area by cancelling the dialog. </p>\n\n<p>This is what it currently looks like. </p>\n\n<p><a href=\"https://i.stack.imgur.com/eNEWW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eNEWW.png\" alt=\"Positioning of dialog\"></a></p>\n\n<p>This looks like the designs. Clicking to dismiss the dialog works on the top of the three lines in the filter icon (top right) but not on either of the bottom two. </p>\n\n<p>Here is the style I am using for the dialog.</p>\n\n<pre><code>&lt;style name=\"SortDialogTheme\" parent=\"Theme.AppCompat.Light.Dialog\"&gt;\n    &lt;item name=\"android:windowNoTitle\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowBackground\"&gt;@android:color/transparent&lt;/item&gt;\n    &lt;item name=\"android:windowFullscreen\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowIsFloating\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:background\"&gt;@android:color/white&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And the code at the point of calling the dialog fragment to show (from a Fragment). </p>\n\n<pre><code>override fun showSortDialog(yPositionToDrawDialog: Int) {\n    activity?.supportFragmentManager?.let { supportFragmentManager -&gt;\n        val fragmentTransaction = supportFragmentManager.beginTransaction()\n        val prev = supportFragmentManager.findFragmentByTag(SortBelowButtonDialogFragment.TAG)\n        if (prev != null) {\n            fragmentTransaction.remove(prev)\n        }\n        fragmentTransaction.addToBackStack(null)\n        val sortDialog = SortBelowButtonDialogFragment.newInstance(yPositionToDrawDialog)\n        if (!supportFragmentManager.isStateSaved &amp;&amp; !sortDialog.isAdded) {\n            sortDialog.setStyle(DialogFragment.STYLE_NO_FRAME, R.style.SortDialogTheme)\n            sortDialog.show(fragmentTransaction, SortBelowButtonDialogFragment.TAG)\n        }\n    }\n}\n</code></pre>\n\n<p>Here is the logic to reposition the dialog (from the DialogFragment).</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    moveDialogToExtrasY()\n    return inflater.inflate(R.layout.sort_view, container, false)\n}\n\nprivate fun moveDialogToExtrasY() {\n    val window = dialog.window\n    window.setGravity(Gravity.TOP or Gravity.END)\n    window.setLayout(WindowManager.LayoutParams.WRAP_CONTENT, WindowManager.LayoutParams.WRAP_CONTENT)\n\n    val windowLayoutParams = window.attributes\n    windowLayoutParams.y = arguments?.getInt(Y_POSITION_OF_DIALOG, DEFAULT_Y_POSITION) ?: DEFAULT_Y_POSITION\n    windowLayoutParams.x = context?.resources?.getDimension(R.dimen.sort_view_margin)?.toInt() ?: DEFAULT_PADDING\n    windowLayoutParams.width = context?.resources?.getDimension(R.dimen.sort_view_tablet_min_width)?.toInt()\n            ?: DEFAULT_WIDTH\n\n    window.attributes = windowLayoutParams\n}\n</code></pre>\n\n<p>Here is a simplified version of the layout for the dialog fragment that has the same issue. </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                             xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n                                             android:id=\"@+id/sort_dialog\"\n                                             android:layout_width=\"wrap_content\"\n                                             android:layout_height=\"wrap_content\"\n                                             android:clickable=\"true\"\n                                             android:focusable=\"true\"\n                                             android:minWidth=\"300dp\"&gt;\n\n    &lt;TextView\n            android:id=\"@+id/filter_header\"\n            android:text=\"Filter\"\n            android:padding=\"20dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"0dp\"\n            app:layout_constraintBottom_toTopOf=\"@+id/filter_option\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_chainStyle=\"packed\"/&gt;\n\n    &lt;TextView\n            android:id=\"@+id/filter_option\"\n            android:text=\"Option\"\n            android:padding=\"20dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_width=\"0dp\"\n            app:layout_constraintTop_toBottomOf=\"@+id/filter_header\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintVertical_chainStyle=\"packed\"/&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>I change <code>android:windowIsFloating</code> to <code>true</code> it then looks like this, which is further from the button than the designs specify. However, clicking anywhere on the filter icon will cancel the dialog. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Xjike.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xjike.png\" alt=\"Repositioned with windowIsFloating true\"></a></p>\n\n<p>Is there a way to specify the size of the hit area on a DialogFragment?</p>\n"}, {"tags": ["android", "mvvm", "kotlin"], "comments": [{"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1545803218, "post_id": 53499202, "comment_id": 94697021, "body": "Dear @farhana, regarding <a href=\"https://stackoverflow.com/review/low-quality-posts/21764432\">this review</a>, please note that Stack Overflow has a policy regarding <a href=\"https://meta.stackoverflow.com/questions/tagged/link-only-answers\">link-only-answers</a>, and even a predefined comment to deal with such cases. See <a href=\"https://meta.stackoverflow.com/a/251613/1033581\">&quot;<i><b>any link-only answer should be deleted.</b> It is not an answer.</i>&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320379, "post_id": 53499258, "comment_id": 93867719, "body": "I&#39;m exactly doing as the tutorial do and as answer tells. can you please explain where I&#39;m doing wrong?"}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320514, "post_id": 53499258, "comment_id": 93867799, "body": "you just missed assign default parameter, see my edited answer."}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320619, "post_id": 53499258, "comment_id": 93867865, "body": "if i arrange parameter in order , and context would be first then it will be okay."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320628, "post_id": 53499258, "comment_id": 93867877, "body": "But in your case I think there is no reason to create RowSubTShirtViewModel with default parameters, because they should be initialized in the top layer (where the instance of RowSubTShirtViewModel is created)"}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320739, "post_id": 53499258, "comment_id": 93867939, "body": "what does the top layer mean?"}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320897, "post_id": 53499258, "comment_id": 93868041, "body": "I arranged parameters and context is  first and I pass context and i have not sent rest of the parameters  then still it is asking for parameters."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320925, "post_id": 53499258, "comment_id": 93868056, "body": "I mean function where the instance of RowSubTShirtViewModel is created"}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543321054, "post_id": 53499258, "comment_id": 93868125, "body": "I created the object in the method of <code>Activity</code> and this class is of Adapter&#39;s <code>view model</code>."}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543321217, "post_id": 53499258, "comment_id": 93868220, "body": "if I made a secondary constructor with no parameter then still will ask for <code>primary call expected</code>."}, {"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "reply_to_user": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543321372, "post_id": 53499258, "comment_id": 93868323, "body": "I edited my answer, please check, maybe it will work for you"}], "tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 2, "last_activity_date": 1543321307, "last_edit_date": 1543321307, "creation_date": 1543320154, "answer_id": 53499258, "question_id": 53499202, "link": "https://stackoverflow.com/questions/53499202/default-value-in-constructor-showing-error-in-kotlin/53499258#53499258", "title": "Default value in Constructor showing error in Kotlin", "body": "<p>You need explicitly pass parameters to primary constructor:</p>\n\n<pre><code>//init params\nval subTShirtAdapter = ...\nval context = ...\nval tShirtBean = ...\nval parentPosition = ...\nval position = ...\n\n//init viewModel\nval vm = RowSubTShirtViewModel(subTShirtAdapter, context, tShirtBean, parentPosition, position)\n</code></pre>\n\n<p>Unless you assign default values to params, e.g.:</p>\n\n<pre><code>class RowSubTShirtViewModel(private val subTShirtAdapter = YourAdapter(),...)\n</code></pre>\n\n<p>In your case you can do something like this:</p>\n\n<pre><code>class RowSubTShirtViewModel(val context: TShirtActivity, \n    private val subTShirtAdapter: SubTShirtAdapter, \n    val tShirtBean: CommonItemBean, \n    private val parentPosition: Int = 0, \n    private val position: Int = 0) : BaseObservable(), TShirtActivity.setSelectionSubRow {}\n\n// and then create an instance\nval vm = RowSubTShirtViewModel(yourContext, yourAdapter, yourShirtBean)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543320615, "post_id": 53499284, "comment_id": 93867862, "body": "if I arrange parameter in order, and context would be first then it will be okay."}, {"owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "edited": false, "score": 0, "creation_date": 1543322134, "post_id": 53499284, "comment_id": 93868783, "body": "I made default argument function for that class showing no compile time error but on runtime showing KNP. my aim to call interface method from activity and that class has implemented the interface."}], "tags": [], "owner": {"reputation": 4037, "user_id": 3124227, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/efoMa.jpg?s=128&g=1", "display_name": "Feedforward", "link": "https://stackoverflow.com/users/3124227/feedforward"}, "is_accepted": false, "score": 0, "last_activity_date": 1543320243, "creation_date": 1543320243, "answer_id": 53499284, "question_id": 53499202, "link": "https://stackoverflow.com/questions/53499202/default-value-in-constructor-showing-error-in-kotlin/53499284#53499284", "title": "Default value in Constructor showing error in Kotlin", "body": "<p>You are not using <a href=\"https://kotlinlang.org/docs/reference/functions.html#default-arguments\" rel=\"nofollow noreferrer\">default arguments</a> in your constructor. If you like to use, it should look like</p>\n\n<pre><code>class RowSubTShirtViewModel(\n    private val subTShirtAdapter: SubTShirtAdapter = defaultSubTShirtAdapter,\n    val context: TShirtActivity = defultContext,\n    val tShirtBean: CommonItemBean = defaultTShirtBean,\n    private val parentPosition: Int = defaultParentPosition,\n    private val position: Int = defaultPosition) : BaseObservable(), TShirtActivity.setSelectionSubRow {}\n</code></pre>\n"}], "owner": {"reputation": 8174, "user_id": 7357920, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tutNS.jpg?s=128&g=1", "display_name": "Farhana Naaz Ansari", "link": "https://stackoverflow.com/users/7357920/farhana-naaz-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543321307, "creation_date": 1543319961, "question_id": 53499202, "link": "https://stackoverflow.com/questions/53499202/default-value-in-constructor-showing-error-in-kotlin", "title": "Default value in Constructor showing error in Kotlin", "body": "<p>I'm doing same as from <a href=\"https://stackoverflow.com/questions/52601611/kotlin-default-constructor\">here</a> and <a href=\"https://www.callicoder.com/kotlin-classes-objects-constructors-initializers/#default-values-in-the-constructor\" rel=\"nofollow noreferrer\">here</a> but showing error</p>\n\n<p>this is my class with its <code>primary constructor</code> with no <code>secondary constructor</code> no <code>init</code> block.</p>\n\n<pre><code>class RowSubTShirtViewModel(private val subTShirtAdapter: SubTShirtAdapter, val context: TShirtActivity,\n                            val tShirtBean: CommonItemBean, private val parentPosition: Int, private val position: Int) : BaseObservable(), TShirtActivity.setSelectionSubRow {}\n</code></pre>\n\n<p>creating object like <code>val vm=RowSubTShirtViewModel()</code> giving error </p>\n\n<blockquote>\n  <ul>\n  <li>Create abstract function 'RowSubTShirtViewModel' </li>\n  <li>Create function 'RowSubTShirtViewModel'</li>\n  <li>Create secondary constructor </li>\n  <li>No value passed for parameter</li>\n  </ul>\n</blockquote>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1543319099, "creation_date": 1543319099, "answer_id": 53498937, "question_id": 53498228, "link": "https://stackoverflow.com/questions/53498228/can-model-in-mvc-rollback-to-last-valid-state/53498937#53498937", "title": "Can model in MVC rollback to last valid state?", "body": "<p>When you call <code>rollback()</code> on an <code>ItemViewModel</code>, it will roll back to the data found in the underlying <code>item</code>, or blank values if you never backed your <code>ItemViewModel</code> with an item.</p>\n\n<p>In your case, that means you need to assign a <code>Customer</code> to the <code>item</code> property of your <code>CustomerModel</code>. After you have done that, you can call <code>rollback()</code> and the <code>CustomerModel</code> will show the state from the <code>Customer</code> it is backing.</p>\n\n<p>If you get the same state when you reopen the Wizard, that means that you have reopened the exact same Wizard instance. A Wizard extends <code>View</code>, which makes it a singleton within it's scope, so if you just call <code>find()</code> to locate the Wizard without specifying a scope, the second attempt will get you the same instance as the first.</p>\n\n<p>You didn't post your Wizard init code, but generally you should create a new scope for the Wizard if you want to avoid this. If you want the wizard to edit a specific customer instance, you should do:</p>\n\n<pre><code>val model = CustomermerModel()\nmodel.item = myCustomer\nfind&lt;CustomerWizard&gt;(Scope(model).openModal()\n</code></pre>\n\n<p>It is for this reason normal to let the view model accept an instance in the constructor, which you pass on to the <code>ItemViewModel</code> constructor, so that the item is assigned for you automatically:</p>\n\n<pre><code>class CustomerModel(customer: Customer? = null) : ItemViewModel&lt;Customer&gt;(customer)\n</code></pre>\n\n<p>Not that I made sure to allow a no-args constructor for the CustomerModel, to support inject in cases where there is no CustomerModel in scope already. In that case a new CustomerModel (not supporting any customer item) will be created, so this situation requires a no-args constructor.</p>\n\n<p>With that in place, the wizard init code becomes:</p>\n\n<pre><code>find&lt;CustomerWizard&gt;(Scope(CustomerModel(myCustomer)).openModal()\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 348, "user_id": 3312628, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67366fe7e0e9c13492a9fec689b87736?s=128&d=identicon&r=PG&f=1", "display_name": "Leder", "link": "https://stackoverflow.com/users/3312628/leder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53498937, "answer_count": 1, "score": 0, "last_activity_date": 1543324107, "creation_date": 1543316558, "last_edit_date": 1543324107, "question_id": 53498228, "link": "https://stackoverflow.com/questions/53498228/can-model-in-mvc-rollback-to-last-valid-state", "title": "Can model in MVC rollback to last valid state?", "body": "<p>I am following TornadoFX Guide from here, trying to run the sample wizard:\n<a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/part2/Wizard.html\" rel=\"nofollow noreferrer\">Wizard</a> </p>\n\n<p>I am having the following trouble, see item 3):</p>\n\n<p>1) When I press <code>Cancel</code> the values are rolled back to empty values on \n  next open</p>\n\n<p>2) When I press <code>Finish</code> the values are still in the wizard on next open</p>\n\n<p>3) When I now press <code>Cancel</code> changes are not rolled back to 2) but to \n  1), i. e. empty fields</p>\n\n<p>How do I get different <code>Cancel</code> behaviour: rolling back the CustomerModel to the last valid state?</p>\n\n<p>This is my updated <code>CustomerWizard.kt</code>:</p>\n\n<pre><code>package com.example.demo.view\n\nimport com.example.demo.app.Customer\nimport com.example.demo.app.CustomerModel\nimport tornadofx.*\nclass CustomerWizard : Wizard(\"Create customer\", \"Provide customer information\") {\n    val customer: CustomerModel by inject()\n\n    override val canGoNext = currentPageComplete\n    override val canFinish = allPagesComplete\n\n    override fun onCancel() {\n        super.onCancel()\n        customer.rollback()\n\n    }\n\n    override fun onSave() {\n        super.onSave()\n        customer.commit()\n\n        println(\"customer.name=\" + customer.name)\n        println(\"customer.type=\" + customer.type)\n        println(\"customer.zip=\" + customer.zip)\n        println(\"customer.city=\" + customer.city)\n    }\n\n    init {\n        graphic = resources.imageview(\"/graphics/customer.png\")\n        add(BasicData::class)\n        add(AddressInput::class)\n    }\n}\n\nclass BasicData : View(\"Basic Data\") {\n    val customer: CustomerModel by inject()\n\n    override val complete = customer.valid(customer.name)\n\n    override val root = form {\n        fieldset(title) {\n            field(\"Type\") {\n                combobox(customer.type, Customer.Type.values().toList())\n            }\n            field(\"Name\") {\n                textfield(customer.name).required()\n            }\n        }\n    }\n}\n\nclass AddressInput : View(\"Address\") {\n    val customer: CustomerModel by inject()\n\n    override val complete = customer.valid(customer.zip, customer.city)\n\n    override val root = form {\n        fieldset(title) {\n            field(\"Zip/City\") {\n                textfield(customer.zip) {\n                    prefColumnCount = 5\n                    required()\n                }\n                textfield(customer.city).required()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This is my <code>CustomerModel.kt</code>:</p>\n\n<pre><code>package com.example.demo.app\n\nimport tornadofx.*\n\nclass CustomerModel(customer: Customer? = null) : ItemViewModel&lt;Customer&gt;(customer) {\n    val name = bind(Customer::nameProperty, autocommit = true)\n    val zip  = bind(Customer::zipProperty, autocommit = true)\n    val city = bind(Customer::cityProperty, autocommit = true)\n    val type = bind(Customer::typeProperty, autocommit = true)\n}\n</code></pre>\n\n<p>This is my <code>MainView.kt</code>:</p>\n\n<pre><code>package com.example.demo.view\n\nimport com.example.demo.app.Customer\nimport com.example.demo.app.CustomerModel\nimport com.example.demo.app.Styles\nimport javafx.geometry.Pos\nimport javafx.scene.layout.Priority\nimport javafx.scene.paint.Color\nimport tornadofx.*\n\nclass MainView : View(\"Hello TornadoFX\") {\n\n    private val myCustomer: Customer? = Customer(\"test\", 12345, \"\", Customer.Type.Private)\n    override val root = drawer {\n            item(\"Generate &amp; sign\", expanded = true) {\n                button(\"Add Customer\").action {\n                    find&lt;CustomerWizard&gt;(Scope(CustomerModel(myCustomer))).openModal()\n                }\n            }\n            item(\"Verify\") {\n                borderpane {\n                    top = label(\"TOP\") {\n                        useMaxWidth = true\n                        alignment = Pos.CENTER\n                        style {\n                            backgroundColor += Color.RED\n                        }\n                    }\n\n                    bottom = label(\"BOTTOM\") {\n                        useMaxWidth = true\n                        alignment = Pos.CENTER\n                        style {\n                            backgroundColor += Color.BLUE\n                        }\n                    }\n\n                    left = label(\"LEFT\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        style {\n                            backgroundColor += Color.GREEN\n                        }\n                    }\n\n                    right = label(\"RIGHT\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        style {\n                            backgroundColor += Color.PURPLE\n                        }\n                    }\n\n                    center = label(\"CENTER\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        alignment = Pos.CENTER\n\n                        style {\n                            backgroundColor += Color.YELLOW\n                        }\n                    }\n                }\n            }\n            item(\"Sign next\") {\n                borderpane {\n                    top = label(\"TOP\") {\n                        useMaxWidth = true\n                        alignment = Pos.CENTER\n                        style {\n                            backgroundColor += Color.RED\n                        }\n                    }\n\n                    bottom = label(\"BOTTOM\") {\n                        useMaxWidth = true\n                        alignment = Pos.CENTER\n                        style {\n                            backgroundColor += Color.BLUE\n                        }\n                    }\n\n                    left = label(\"LEFT\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        style {\n                            backgroundColor += Color.GREEN\n                        }\n                    }\n\n                    right = label(\"RIGHT\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        style {\n                            backgroundColor += Color.PURPLE\n                        }\n                    }\n\n                    center = label(\"CENTER\") {\n                        useMaxWidth = true\n                        useMaxHeight = true\n                        alignment = Pos.CENTER\n\n                        style {\n                            backgroundColor += Color.YELLOW\n                        }\n                    }\n                }\n            }\n        }\n\n        //class Link(val name: String, val uri: String)\n        //class Person(val name: String, val nick: String)\n\n        // Sample data variables left out (iPhoneUserAgent, TornadoFXScreencastsURI, people and links)\n    }\n</code></pre>\n"}, {"tags": ["android", "performance", "android-recyclerview", "kotlin", "nested"], "comments": [{"owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "reply_to_user": {"reputation": 1745, "user_id": 3086836, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/AHhRH.jpg?s=128&g=1", "display_name": "Aman B", "link": "https://stackoverflow.com/users/3086836/aman-b"}, "edited": false, "score": 0, "creation_date": 1543434090, "post_id": 53497615, "comment_id": 93922670, "body": "Sorry - I did not think that the code would be the big problem, but the concept, since it works fine with only a few items in the inner adapter."}, {"owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "reply_to_user": {"reputation": 1745, "user_id": 3086836, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/AHhRH.jpg?s=128&g=1", "display_name": "Aman B", "link": "https://stackoverflow.com/users/3086836/aman-b"}, "edited": false, "score": 0, "creation_date": 1543434517, "post_id": 53497615, "comment_id": 93922884, "body": "I think that the problem is, that in the inner recyclerview every single item is created immediately even if there are 1000 items and one can only see 5 or 6 on the display and this takes its time."}], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 5585093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--JG2kyWUHM4/AAAAAAAAAAI/AAAAAAAAAbM/7j6rJXW1SIg/photo.jpg?sz=128", "display_name": "Karsh Soni", "link": "https://stackoverflow.com/users/5585093/karsh-soni"}, "is_accepted": true, "score": 1, "last_activity_date": 1543577809, "last_edit_date": 1543577809, "creation_date": 1543435041, "answer_id": 53527179, "question_id": 53497615, "link": "https://stackoverflow.com/questions/53497615/problems-with-nested-recyclerview/53527179#53527179", "title": "Problems with nested recyclerview", "body": "<p>E. Reuter i have been through this situation the thing is the approach is quite correct by using nested Recycler View. Your code seems to be good. but the queries which you are using to query database. I think you should use queries in Background or on the other threas and show result as you get them instead of querying it from OnCreate or from main thread. Because getting this many items in one go can possibly create lag to activity and decreasing performance. try this out if you have not yet and let me know. What happens. Thanks...</p>\n\n<p>I am editing my answer. the other thing you could do is if you have more than certain amount of items then instead of getting them at the first you should use some thing like pagination to load certain amount of items at once to avoid this lag.</p>\n\n<p>Here i am attaching the code to query certain amount of data per load.... </p>\n\n<pre><code>SApp.database!!.resultDao().loadAllUsersByPage(5, 10)\n @Query(\"SELECT * FROM Result LIMIT :limit OFFSET :offset\")\n fun loadAllUsersByPage(limit: Int, offset: Int): List&lt;Result&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "is_accepted": false, "score": 0, "last_activity_date": 1543528532, "creation_date": 1543528532, "answer_id": 53548186, "question_id": 53497615, "link": "https://stackoverflow.com/questions/53497615/problems-with-nested-recyclerview/53548186#53548186", "title": "Problems with nested recyclerview", "body": "<p>Thank you very much for your answer. I think that paging is really a good approach. But I cannot add the pageing directly since I am getting my data from a roomdatabase like this:</p>\n\n<pre><code>@Query(SELECT * FROM users)\nfun getData(): LiveData&lt;List&lt;userWithItems&gt;&gt;\n</code></pre>\n\n<p>and the actual items are added by room because of a relation between user and items I will have to change this behavior.</p>\n\n<p>I will try something like</p>\n\n<pre><code>@Query(SELECT * FROM users)\nfun getUserData(): LiveData&lt;List&lt;Users&gt;&gt;\n</code></pre>\n\n<p>and then try to add an LiveData observer in the outer recyclerview to get the items in a separate query which uses paging.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "is_accepted": false, "score": 0, "last_activity_date": 1543568592, "creation_date": 1543568592, "answer_id": 53554323, "question_id": 53497615, "link": "https://stackoverflow.com/questions/53497615/problems-with-nested-recyclerview/53554323#53554323", "title": "Problems with nested recyclerview", "body": "<p>I solved the problem. When I thought about pagination it came into my mind that the problem could be that the inner recyclerview has a height of wrap_content and so it needs to build all of the items and makes the rv useless. When I make the height of the inner rv 250dp, it works quite even with 2000 items.</p>\n\n<p>So now I just have to figure out a way to always find the optimal height for the inner rv and solve the scrolling problem but the original problem is solved.</p>\n\n<p>Special thanks to Aman B!</p>\n"}], "owner": {"reputation": 49, "user_id": 10710852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/363688ce593d9d28e5b1bfec76e9aff4?s=128&d=identicon&r=PG&f=1", "display_name": "E. Reuter", "link": "https://stackoverflow.com/users/10710852/e-reuter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 805, "favorite_count": 0, "accepted_answer_id": 53527179, "answer_count": 3, "score": -3, "last_activity_date": 1543577809, "creation_date": 1543314531, "last_edit_date": 1543434024, "question_id": 53497615, "link": "https://stackoverflow.com/questions/53497615/problems-with-nested-recyclerview", "title": "Problems with nested recyclerview", "body": "<p>I have a nested recyclerview which should look like in the <a href=\"https://i.stack.imgur.com/OlsHS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OlsHS.png\" alt=\"picture\"></a>. </p>\n\n<p>I implemented it according to <a href=\"https://manticarodrigo.com/nested-android-recyclerview-kotlin/\" rel=\"nofollow noreferrer\">this helpful site</a>.</p>\n\n<p>The problem is, that I sometimes have a user with hundreds of items and in that case, it takes half a minute to open the activity.</p>\n\n<p>I have a room database in the backend with two linked tables with foreign keys (users and items) and I select all users to get a user/item list where the items are a list in the user-table.</p>\n\n<p>class userWithItems: (id: Int, name: String, ... ,List)</p>\n\n<p>and I create the inner recycler view with the List of items in the adapter.</p>\n\n<p>Would it be better to make one List UserItems (userid:Int, username:String, ... itemid:Int, itemList) and group them for the outer rv.</p>\n\n<p>Or is there a possibility to get rid of the nested rv and make the design with just one recyclerview-list?</p>\n\n<p>Or is there another solution to make the nested recyclerview work even if there are many items for a user?</p>\n\n<p>code for the adapters:</p>\n\n<pre><code>// Code in Activity: (oncreate)\n\nval recyclerView = findViewById&lt;RecyclerView&gt;(R.id.rv_users)\nval adapter = UserAdapter(this)\nrecyclerView.adapter = adapter\nrecyclerView.layoutManager = LinearLayoutManager(this)\n\nmainViewModel = ViewModelProviders.of(this, PassIntViewModelFactory(this.application, online_id)).get(MainViewModel::class.java!!)\nmainViewModel.userList.observe(this, Observer {\n    it?.let {\n        adapter.setUserList(it)\n    }\n})\n</code></pre>\n\n<p>data class UsersWithItems(</p>\n\n<pre><code>    val id:Int, val username: String, val address, // fields from user table\n    val items: List&lt;Items&gt;   // list of items for current user\n</code></pre>\n\n<p>)</p>\n\n<p>data class Items (\n        val id: Int, val itemtext: String, val itemlocation: String, val image: String // ...\n)</p>\n\n<p>// UserAdapter (outside)</p>\n\n<p>class UserAdapter internal constructor(\n        context: Context\n) : RecyclerView.Adapter() {</p>\n\n<pre><code>private val inflater: LayoutInflater = LayoutInflater.from(context)\nprivate var userList = emptyList&lt;UsersWithItems&gt;()\n\ninner class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    val username: TextView = itemView.findViewById(R.id.user_name)\n    val num_pos: TextView = itemView.findViewById(R.id.user_num_pos)\n    val address: TextView = itemView.findViewById(R.id.user_addr)\n    val rv:RecyclerView = itemView.findViewById(R.id.rv_user_items)\n}\n\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n    val myItemView = inflater.inflate(R.layout.rv_row_user, parent, false)\n    return MyViewHolder(myItemView)\n}\n\noverride fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n    val current = userList[position]\n    holder.username.text=\"${current.user?.username}\"\n    holder.num_pos.text=\"${current.items?.size}\"\n    holder.address.text = \"${current.user?.address}\"\n\n    val adapter = UserItemAdapter(holder.rv.context)\n    adapter.setItems(current.items!!)\n    holder.rv.adapter = adapter\n    holder.rv.layoutManager = LinearLayoutManager(holder.rv.context,LinearLayout.VERTICAL,false)\n\n}\ninternal fun setUserList(userList: List&lt;UsersWithItems&gt;){\n    this.userList=userList\n    notifyDataSetChanged()\n}\noverride fun getItemCount() = userList.size\n</code></pre>\n\n<p>}</p>\n\n<p>class UserItemAdapter internal constructor(\n        context: Context\n) : RecyclerView.Adapter() {</p>\n\n<pre><code>private val inflater: LayoutInflater = LayoutInflater.from(context)\nprivate var itemList = emptyList&lt;Items&gt;()\n\ninner class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    val itemtext: TextView = itemView.findViewById(R.id.item_text)\n    val itemlocation:TextView = itemView.findViewById(R.id.item_location)\n    val image: ImageView = itemView.findViewById(R.id.item_image)\n}\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n    val myItemView = inflater.inflate(R.layout.rv_row_user_items, parent, false)\n    return MyViewHolder(myItemView)\n}\n\noverride fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n    val current = itemList[position]\n    holder.itemtext.text=\"${current.itemtext}\"\n    holder.itemlocation.text = current.itemlocation\n    if (current.image.length&gt;0) {\n        val image = Base64.decode(current.image, 0)\n        val bitmap = BitmapFactory.decodeByteArray(image, 0, image.size)\n        holder.image.setImageBitmap(bitmap)\n    }\n}\ninternal fun setItems(items: List&lt;Items&gt;){\n    this.itemList=items\n    notifyDataSetChanged()\n}\n\noverride fun getItemCount() = itemList.size\n</code></pre>\n\n<p>} </p>\n"}, {"tags": ["android", "view", "kotlin", "android-navigation", "onlongclicklistener"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 4475206, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JEpYR.jpg?s=128&g=1", "display_name": "Roar Gr&#248;nmo", "link": "https://stackoverflow.com/users/4475206/roar-gr%c3%b8nmo"}, "edited": false, "score": 0, "creation_date": 1543314835, "post_id": 53497611, "comment_id": 93864598, "body": "You got me !! (Didn&#39;t see your response until I answered mine, you wil get the credit )"}], "tags": [], "owner": {"reputation": 640, "user_id": 5127363, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-OiVf7uM8x2E/AAAAAAAAAAI/AAAAAAAAADw/WrAuqc12M24/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/5127363/hello-world"}, "is_accepted": true, "score": 2, "last_activity_date": 1543314515, "creation_date": 1543314515, "answer_id": 53497611, "question_id": 53497487, "link": "https://stackoverflow.com/questions/53497487/findnavcontroller-navigatedirection-does-not-work-for-view-onlongclicklisten/53497611#53497611", "title": "findNavController().navigate(direction) does not work for View.OnLongClickListener, but it works for View.OnClickListener", "body": "<p>View.OnLongClickListener need return type as Boolean</p>\n\n<p>Example:</p>\n\n<pre><code>val longClick = View.OnLongClickListener {\n\n        return@OnLongClickListener true\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 4475206, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JEpYR.jpg?s=128&g=1", "display_name": "Roar Gr&#248;nmo", "link": "https://stackoverflow.com/users/4475206/roar-gr%c3%b8nmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1543314717, "creation_date": 1543314717, "answer_id": 53497680, "question_id": 53497487, "link": "https://stackoverflow.com/questions/53497487/findnavcontroller-navigatedirection-does-not-work-for-view-onlongclicklisten/53497680#53497680", "title": "findNavController().navigate(direction) does not work for View.OnLongClickListener, but it works for View.OnClickListener", "body": "<p>Found an answer. The OnLongClickListener actually needs a response if the request is handled: </p>\n\n<pre><code>private fun createOnLongClickListener(stationId: String, kindId: String): View.OnLongClickListener\n{\n    return View.OnLongClickListener {\n        val direction = StationListFragmentDirections.ActionStationListFragmentToUpdatePriceFragment(stationId,kindId)\n        it.findNavController().navigate(direction)\n        true   // &lt;--- Add true here to confirm it is handled\n    }\n}\n</code></pre>\n\n<p>...wonders of kotlin... ;)</p>\n"}], "owner": {"reputation": 855, "user_id": 4475206, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JEpYR.jpg?s=128&g=1", "display_name": "Roar Gr&#248;nmo", "link": "https://stackoverflow.com/users/4475206/roar-gr%c3%b8nmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1128, "favorite_count": 0, "accepted_answer_id": 53497611, "answer_count": 2, "score": 0, "last_activity_date": 1543314717, "creation_date": 1543314130, "question_id": 53497487, "link": "https://stackoverflow.com/questions/53497487/findnavcontroller-navigatedirection-does-not-work-for-view-onlongclicklisten", "title": "findNavController().navigate(direction) does not work for View.OnLongClickListener, but it works for View.OnClickListener", "body": "<p>Android Developer Canary 3.4, kotlin. </p>\n\n<p>Found that View.OnLongClickListener gives a type mismatch. Isn't View.OnLongClickListener not taken into consideration for the new Navigation Graph in Android ?</p>\n\n<pre><code>private fun createOnClickListener(stationId: String): View.OnClickListener\n{\n    return View.OnClickListener {\n        val direction = StationListFragmentDirections.ActionStationListFragmentToStationDetailFragment(stationId)\n        it.findNavController().navigate(direction)\n    }\n}\n\nprivate fun createOnLongClickListener(stationId: String, kindId: String): View.OnLongClickListener\n{\n    return View.OnLongClickListener {\n        val direction = StationListFragmentDirections.ActionStationListFragmentToUpdatePriceFragment(stationId,kindId)\n        it.findNavController().navigate(direction)   // &lt;--- Gives error here\n    }\n}\n</code></pre>\n\n<p>The above two functions should behave the same, but the lower (createOnLongClickListener) gives a 'Type mismatch' error for the 'direction'. </p>\n\n<p>Isn't support for navigation added for View.OnLongClickListener ?</p>\n"}, {"tags": ["java", "maven", "intellij-idea", "kotlin", "java-9"], "comments": [{"owner": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 4, "creation_date": 1543314584, "post_id": 53497454, "comment_id": 93864419, "body": "Please file a bug at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a> and share the sample project to reproduce (privately)."}, {"owner": {"reputation": 550, "user_id": 217420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GWn59.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/217420/dax"}, "reply_to_user": {"reputation": 348241, "user_id": 104891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff652685122f4500dd4f3c21fb32da2?s=128&d=identicon&r=PG", "display_name": "CrazyCoder", "link": "https://stackoverflow.com/users/104891/crazycoder"}, "edited": false, "score": 1, "creation_date": 1543328578, "post_id": 53497454, "comment_id": 93872709, "body": "As a workaround, I disabled the Kotlin plugin in IntelliJ. I have to check if I&#39;m allowed to share the project..."}, {"owner": {"reputation": 619, "user_id": 1155759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d591b4b4bd1aad63c0e3fc49187816?s=128&d=identicon&r=PG", "display_name": "Osmund Francis", "link": "https://stackoverflow.com/users/1155759/osmund-francis"}, "edited": false, "score": 0, "creation_date": 1570737791, "post_id": 53497454, "comment_id": 103018539, "body": "I&#39;ve submitted a bug report under IntelliJ IDEA: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-224595\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-224595</a>"}, {"owner": {"reputation": 619, "user_id": 1155759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d591b4b4bd1aad63c0e3fc49187816?s=128&d=identicon&r=PG", "display_name": "Osmund Francis", "link": "https://stackoverflow.com/users/1155759/osmund-francis"}, "edited": false, "score": 0, "creation_date": 1570780252, "post_id": 53497454, "comment_id": 103029572, "body": "Submitted issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-27458\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-27458</a>"}], "answers": [{"comments": [{"owner": {"reputation": 550, "user_id": 217420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GWn59.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/217420/dax"}, "edited": false, "score": 6, "creation_date": 1543328683, "post_id": 53497693, "comment_id": 93872776, "body": "Thanks for the answer, but I do not want to add any requirements to my project to things I do not need..."}, {"owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "reply_to_user": {"reputation": 550, "user_id": 217420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GWn59.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/217420/dax"}, "edited": false, "score": 1, "creation_date": 1543328965, "post_id": 53497693, "comment_id": 93872958, "body": "@dax I do understand that, and that&#39;s why have used the first word <i>Meanwhile</i>. Better solution would the IDE fixing this, which is where you can report a bug as CrazyCoder pointed out."}], "tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": false, "score": 1, "last_activity_date": 1543315204, "last_edit_date": 1543315204, "creation_date": 1543314779, "answer_id": 53497693, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/53497693#53497693", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>Meanwhile, this can be fixed using the <code>kotlin-stdlib.jar</code> available in Kotlin JavaRuntime:</p>\n\n<pre><code>module kotlin.test {\n    requires kotlin.stdlib;\n}\n</code></pre>\n\n<p>where <code>kotlin.test</code> should be replaced with your module name.</p>\n\n<p>Just in case the details matter, I am using </p>\n\n<blockquote>\n<pre><code>IntelliJ IDEA 2018.3 (Community Edition)\nBuild #IC-183.4284.148, built on November 21, 2018\n</code></pre>\n</blockquote>\n\n<p>and the Kotlin JavaRunTime mentioned above has sources from the path  <code>Contents/plugins/Kotlin/kotlinc/lib</code> within the IntelliJ <code>.app</code> which includes <code>kotlin-stdlib.jar</code> as one of them.</p>\n"}, {"comments": [{"owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "edited": false, "score": 0, "creation_date": 1551212151, "post_id": 54893094, "comment_id": 96555858, "body": "it doesn&#39;t answer the question, I think. Since author mentions that some workaround helps for some time, the goal is to have stable successful build, not just to build once."}, {"owner": {"reputation": 179, "user_id": 1253663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1758f78c537e007ab43a0ff86e6e9d9?s=128&d=identicon&r=PG", "display_name": "sigirisetti", "link": "https://stackoverflow.com/users/1253663/sigirisetti"}, "edited": false, "score": 0, "creation_date": 1559886735, "post_id": 54893094, "comment_id": 99566403, "body": "I got above error when I created javafx project using maven archetypes and ran app using intellij run configuration. Rebuild however fixed it"}], "tags": [], "owner": {"reputation": 41, "user_id": 5707855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d5bfc280fa5ce85051d2931166c65b?s=128&d=identicon&r=PG&f=1", "display_name": "Yury Savchuk", "link": "https://stackoverflow.com/users/5707855/yury-savchuk"}, "is_accepted": false, "score": 3, "last_activity_date": 1551210855, "creation_date": 1551210855, "answer_id": 54893094, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/54893094#54893094", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>Try to rebuild the module using Ctrl+Shift+F9 or right click on the module and select \"Rebuild \" in menu.</p>\n"}, {"comments": [{"owner": {"reputation": 5859, "user_id": 4970079, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/E7H9q.png?s=128&g=1", "display_name": "GOXR3PLUS", "link": "https://stackoverflow.com/users/4970079/goxr3plus"}, "edited": false, "score": 0, "creation_date": 1583400361, "post_id": 56582276, "comment_id": 107105661, "body": "@dax If the above answer is a solution for you , please mark as an answer :)"}], "tags": [], "owner": {"reputation": 5859, "user_id": 4970079, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/E7H9q.png?s=128&g=1", "display_name": "GOXR3PLUS", "link": "https://stackoverflow.com/users/4970079/goxr3plus"}, "is_accepted": false, "score": 32, "last_activity_date": 1560434587, "creation_date": 1560434587, "answer_id": 56582276, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/56582276#56582276", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>Even in <strong>2019.1.3</strong> that error is there .</p>\n\n<p>A solution that always works for me is :</p>\n\n<p><code>Build menu =&gt; Rebuild Project</code></p>\n\n<p>Tested with JDK 12.0.1</p>\n\n<hr>\n\n<p>That should be fixed though by IntelliJ team as soon as possible as more and more Java projects are passing to JDK 11 ++</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 7953908, "user_type": "registered", "profile_image": "https://graph.facebook.com/1349195875134034/picture?type=large", "display_name": "Gilian Marques", "link": "https://stackoverflow.com/users/7953908/gilian-marques"}, "edited": false, "score": 1, "creation_date": 1585492889, "post_id": 59628873, "comment_id": 107772088, "body": "that worked for me too!  first   disable the  &#39;Enable migrations detection&#39;    and     then rebuild project."}], "tags": [], "owner": {"reputation": 4053, "user_id": 2350799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CaaDE.png?s=128&g=1", "display_name": "xcesco", "link": "https://stackoverflow.com/users/2350799/xcesco"}, "is_accepted": false, "score": 10, "last_activity_date": 1579677227, "last_edit_date": 1579677227, "creation_date": 1578401790, "answer_id": 59628873, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/59628873#59628873", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>I had the same problem. I worked in a pure Java project managed with Maven. Till some days ago I applied the solution \"rebuild\" the project, but sometimes the error came back again.</p>\n\n<p>After more investigation, I found that after <strong>disable</strong> \"Enable migration detection\" menu, the problem disappears.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RggsW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RggsW.png\" alt=\"disable menu Enable migration detection\"></a></p>\n\n<p>I hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 12839885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/405ea5a341ed518f039c1162e3e064df?s=128&d=identicon&r=PG&f=1", "display_name": "yeye", "link": "https://stackoverflow.com/users/12839885/yeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1583239372, "creation_date": 1583239372, "answer_id": 60507534, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/60507534#60507534", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>i had the same problem i deleted the file and start all over again, and its work fine after it</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12165830, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCRQdur1jb7kaJhJs-WuRqKmDHO8Y2j-St4QsWE=k-s128", "display_name": "mpho shai", "link": "https://stackoverflow.com/users/12165830/mpho-shai"}, "is_accepted": false, "score": -1, "last_activity_date": 1592139588, "last_edit_date": 1592139588, "creation_date": 1592132018, "answer_id": 62371508, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/62371508#62371508", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>I had the same issue. Here is what worked:</p>\n\n<ol>\n<li>On IntellijIDEA go to 'Tools' menu at the top of the application: <img src=\"https://i.stack.imgur.com/ykKyr.png\" alt=\"IntelliJ IDEA IDE\">.</li>\n<li>Then scroll down to 'Kotlin'.</li>\n<li>Click 'Configure Kotlin in Project'.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1896730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb71d765912ecc327a8dbcd80259f20?s=128&d=identicon&r=PG", "display_name": "JyotiKumarPoddar", "link": "https://stackoverflow.com/users/1896730/jyotikumarpoddar"}, "is_accepted": false, "score": 0, "last_activity_date": 1592211806, "creation_date": 1592211806, "answer_id": 62384801, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/62384801#62384801", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p><strong>I fixed this error by disabling Kotlin plugin since I am not using it and the problem is solved</strong></p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 13906204, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZIInl-HlXw/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucneBDZ_PORTe3nttpZJ1lx4YOdSGw/photo.jpg?sz=128", "display_name": "p91java", "link": "https://stackoverflow.com/users/13906204/p91java"}, "is_accepted": false, "score": 0, "last_activity_date": 1595040727, "creation_date": 1595040727, "answer_id": 62964131, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project/62964131#62964131", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>Update your module-info.java file</p>\n<pre><code>requires javafx.fxml;\nrequires javafx.controls;\nrequires javafx.graphics;\nrequires javafx.web;\n\nopens sample;\n\nopens sample.controller;\n</code></pre>\n<p>It opens the package (eg. sample) which contains your Launcher file and opens package conatinsyoyr controllers and its corresponding fxml files (eg. sample.controller)</p>\n"}], "owner": {"reputation": 550, "user_id": 217420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GWn59.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/217420/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9373, "favorite_count": 5, "answer_count": 8, "score": 25, "last_activity_date": 1595040727, "creation_date": 1543314043, "question_id": 53497454, "link": "https://stackoverflow.com/questions/53497454/intellij-idea-ultimate-2018-3-thinks-my-java-9-project-is-a-kotlin-project", "title": "IntelliJ IDEA Ultimate 2018.3 thinks my Java 9 Project is a Kotlin Project", "body": "<p>I have an IntelliJ project composing several subprojects which are all Java 9 modules. I use Maven as a build system. My project has no \"Facets\". My run configuration looks like this:\n<a href=\"https://i.stack.imgur.com/yu80J.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yu80J.png\" alt=\"Run Configuration\"></a></p>\n\n<p>My project settings look like this:\n<a href=\"https://i.stack.imgur.com/kb0cS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kb0cS.png\" alt=\"Project Settings\"></a></p>\n\n<p>I can build everything with Maven just fine. However, when I try to compile with IntelliJ, it somehow thinks that my project is a Kotlin project and can't compile it:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JuFid.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JuFid.png\" alt=\"Error message\"></a></p>\n\n<blockquote>\n  <p>Error:Kotlin: The Kotlin standard library is not found in the module graph. Please ensure you have the 'requires kotlin.stdlib' clause in your module definition</p>\n</blockquote>\n\n<p>Has anyone any idea how to fix this? I already tried deleting the run configuration and recreated it. This fixes the problem for some time, but then it reappears randomly.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1543316104, "post_id": 53497396, "comment_id": 93865324, "body": "As an aside consider throwing away the long outmoded and notoriously troublesome <code>SimpleDateFormat</code> and friends, and adding <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a> to your Android project in order to use <code>java.time</code>, the modern Java date and time API. It is so much nicer to work with."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 8748206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yk2DT.jpg?s=128&g=1", "display_name": "Jurgiele", "link": "https://stackoverflow.com/users/8748206/jurgiele"}, "is_accepted": false, "score": 0, "last_activity_date": 1543315237, "creation_date": 1543315237, "answer_id": 53497821, "question_id": 53497396, "link": "https://stackoverflow.com/questions/53497396/trying-to-get-time-in-searched-city-but-getting-time-in-current-location/53497821#53497821", "title": "Trying to get time in searched city but getting time in current location", "body": "<p>Wrong pattern val <code>format = \"yyyy-MM-dd'T'hh:mm:ss+|-hh:mm\"</code>, shouldn't include <code>+|-hh:mm</code>.\nI was using format from <a href=\"http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003169814.htm\" rel=\"nofollow noreferrer\">http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003169814.htm</a></p>\n"}], "owner": {"reputation": 75, "user_id": 8748206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yk2DT.jpg?s=128&g=1", "display_name": "Jurgiele", "link": "https://stackoverflow.com/users/8748206/jurgiele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543315237, "creation_date": 1543313857, "last_edit_date": 1543314214, "question_id": 53497396, "link": "https://stackoverflow.com/questions/53497396/trying-to-get-time-in-searched-city-but-getting-time-in-current-location", "title": "Trying to get time in searched city but getting time in current location", "body": "<p>Example of what I'm trying to achieve:\nsearch City-> pass timestamp from APi -> get current time in this city(such as Tokyo 17:00)\nRight now I'm getting time in my current location.\nHere is timestampConverter function:</p>\n\n<pre><code>fun timestampConverter(num: Long): String {\n    var format = \"HH:mm\"\n    val formatter = SimpleDateFormat(format)\n    val calendar = Calendar.getInstance()\n    calendar.timeInMillis = num * 1000\n    return formatter.format(calendar.time)\n}\n</code></pre>\n\n<p>Also I've tried to get hour by converting string</p>\n\n<pre><code>fun time(string: String): String{\n    val format = \"yyyy-MM-dd'T'hh:mm:ss+|-hh:mm\"\n    val expectedFormat = \"hh:mm\"\n    val dateFormat = SimpleDateFormat(format)\n    var date: Date? = null\n    var convertedDate: String? = null\n    try {\n        date = dateFormat.parse(string)\n        val simpleDateFormat = SimpleDateFormat(expectedFormat)\n        convertedDate = simpleDateFormat.format(date)\n        return convertedDate!!\n    } catch (e: Exception) {\n        e.printStackTrace()\n        return \"\"\n    }\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>java.text.ParseException: Unparseable date: \"2018-11-27T05:00:00-05:00\"\n        at java.text.DateFormat.parse(DateFormat.java:362)\n</code></pre>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543318566, "post_id": 53496317, "comment_id": 93866679, "body": "I tried your build file in an empty directory with both Gradle 4.10.x and 5.0 and both work fine.  Are you running Gradle with a specific JDK? are you running the version of Gradle you think you are?  Are you running Gradle with specific tasks?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543318588, "post_id": 53496317, "comment_id": 93866690, "body": "Do you have a settings.gradle file?  a gradle.properties file?  Can you show those as well please?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543319039, "post_id": 53496317, "comment_id": 93866940, "body": "1.8. I guess I&#39;m running 5.0 because I can see new outputs I never saw before: &quot;Deprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.&quot; Sure, I just <a href=\"https://github.com/kotlin-graphics/kotlin-unsigned/tree/gradle5.0\" rel=\"nofollow noreferrer\">pushed</a>, <code>gradle5.0</code> branch. Ps: using Idea 2018.3"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543320521, "post_id": 53496317, "comment_id": 93867803, "body": "You have something else environmental on your machine because that branch runs fine and fails on a unit test."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543320671, "post_id": 53496317, "comment_id": 93867904, "body": "I just noticed that myself. Funny thing is that <code>master</code> with <code>4.10.2</code> works flawless"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543320919, "post_id": 53496317, "comment_id": 93868051, "body": "Check env variables you are setting, anything with Gradle, Groovy, JAVA_HOME, that could cause something else to come into play here.  Your top level gradle.property file as well.  It is something outside of this code."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543321003, "post_id": 53496317, "comment_id": 93868104, "body": "Clear your Gradle cache dir.  Run using <code>.&#47;gradlew</code> in case you have maybe an RC Gradle 5 in your path."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322370, "post_id": 53496317, "comment_id": 93868920, "body": "Is this an ERROR or a WARNING you are getting, your comments below now make it sound like a WARNING but your question above makes this sound like more of a serious ERROR (although it says &quot;error/warning&quot; which is unclear).  Also SHOW the actual message with the word &quot;error&quot; or &quot;warning&quot; as displayed in the output, don&#39;t just indicate it exists."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322681, "post_id": 53496317, "comment_id": 93869099, "body": "Ok, so you have no WARNING really, you have an IDE static analysis pop-up hint in the editor showing you a fake message that does not affect running of Gradle in any way, it is a bad message from the IDE.  You should not change your build file.  It runs correctly yes, and Gradle shows no warning yes?  then this is a non issue."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322853, "post_id": 53496317, "comment_id": 93869205, "body": "Ok, modified once again to use the right syntax"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323086, "post_id": 53496317, "comment_id": 93869327, "body": "If you want IDE help that is perfect, move away from Groovy based <code>build.gradle</code> to the Kotlin based build script, it is fully type safe and fully correct when used in the IDE.  A Groovy file sometimes is misinterpreted."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323127, "post_id": 53496317, "comment_id": 93869345, "body": "I updated my answer below to be clearer about what is going on."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323200, "post_id": 53496317, "comment_id": 93869369, "body": "Believe me, I&#39;d really love to do that, but I tried quickly yesterday evening and it was a nightmare.. I guess I&#39;ll create again another branch and try there"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323329, "post_id": 53496317, "comment_id": 93869449, "body": "You don&#39;t need to do it, but until you do, ignore Groovy static analysis hints on a Gradle build file that might be incorrect.  You will see many.  If you do not see the error or warning when running under Gradle you are likely OK."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323591, "post_id": 53496317, "comment_id": 93869589, "body": "IN the future, please include the full information without an interpretation of the information.  Sometimes this causes people to go down the wrong path.  instead of &quot;I have a Gradle warning/error that says ...&quot; it was &quot;When editing my build.gradle file I see this popup hint that worries me, but does not affect running my build.  Is it a problem?&quot;"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323901, "post_id": 53496317, "comment_id": 93869787, "body": "Yeah sure, I always try to describe at best the problem, however sometime what I think is clear isnt for others. But there is absolute no problem on my side, I&#39;m totally open to suggestion and critics to improve my answer :)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543325168, "post_id": 53496317, "comment_id": 93870591, "body": "All good, we got it figured out!"}], "answers": [{"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543321647, "post_id": 53499461, "comment_id": 93868485, "body": "The classpath issues come from the <a href=\"https://gist.github.com/elect86/b386011f5a97e73ab3d54dc29dea8c80\" rel=\"nofollow noreferrer\">kotlintest dependency</a>"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543321861, "post_id": 53499461, "comment_id": 93868622, "body": "Also, just to be clear, <a href=\"https://imgur.com/kshzC4P\" rel=\"nofollow noreferrer\">this</a> is what I mean by warnings. Note that I also experience those failed test with <code>5.0</code>."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543322295, "post_id": 53499461, "comment_id": 93868877, "body": "You should update your question to say &quot;error&quot; or &quot;warning&quot; because &quot;error/warning&quot; is far from clear.  Also, show the actual error or warning instead of just indicating there is one.   You have a problem here you should resolve, both for the dependencies including two versions of Kotlin library, and also your system producing an unusual message that shouldn&#39;t be happening."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543322486, "post_id": 53499461, "comment_id": 93868974, "body": "Ok, I updated the question removing <code>error</code> and also setting the screenshot on <code>warning</code> to show clearly what is my problem. Regarding the dependency issue I just replied two comments early, it&#39;s outside my reaching area (or at least it seems so)."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543322572, "post_id": 53499461, "comment_id": 93869033, "body": "@elect you can force the version on the Kotlin libraries to the current version, it is within your area.  Just add the dependencies to yours with the correct version number and that will force them to yours.  It shouldn&#39;t affect that test library."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543323043, "post_id": 53499461, "comment_id": 93869301, "body": "It seems indeed that an explicit <code>implementation &quot;org.jetbrains.kotlin:kotlin-reflect&quot;</code> solved the classpath warnings. Thanks"}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 0, "last_activity_date": 1543323161, "last_edit_date": 1543323161, "creation_date": 1543320847, "answer_id": 53499461, "question_id": 53496317, "link": "https://stackoverflow.com/questions/53496317/annoying-pop-up-hint-after-updating-to-gradle-5-0/53499461#53499461", "title": "Annoying pop-up hint after updating to Gradle 5.0", "body": "<p><strong>You have no actual real issue to worry about.</strong>  Based on your updated question and screenshots, you have an IDE static analysis hint popping up that is incorrect.  You do not have any error or warning message from Gradle.  You have something in your text editor that is misleading.  </p>\n\n<p>This happens at times when the code you are showing, for example, your <code>build.gradle</code> which is Groovy code, cannot be fully interpreted to know what the correct types are.  In this case, nothing is wrong.  This is a red herring and should be ignored.  </p>\n\n<p>You can safely ignore this IDE message, you will receive other misleading ones at times on <code>build.gradle</code> files.  If you want correct IDE help with writing a build file, switch to the fully type safe Kotlin version of gradle build files.  The Groovy version is never perfect in the IDE for messages you receive.</p>\n\n<p>Testing your <code>build.gradle</code> on empty dir:</p>\n\n<pre><code>$ ./gradlew build\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/5.0/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD SUCCESSFUL in 0s\n7 actionable tasks: 2 executed, 5 up-to-date\n</code></pre>\n\n<p>And testing it directly from your GitHub repo: (<em>note: you have some dangerous classpath issues there in a warning that should be resolved</em>)</p>\n\n<pre><code>$ ./gradlew clean build\nw: Runtime JAR files in the classpath should have the same version. These files were found in the classpath:\n    /Users/xyz/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-reflect/1.2.50/9fab8887f91c8e17cce1a7522f45dc25976e57b9/kotlin-reflect-1.2.50.jar (version 1.2)\n    /Users/xyz/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.2.31/95d6a67e8787280a82a2059e54e4db7ac6cfe74/kotlin-stdlib-jdk7-1.2.31.jar (version 1.2)\n    /Users/xyz/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.3.10/b178c1501609c6e4ee8be635513cb023a466457d/kotlin-stdlib-1.3.10.jar (version 1.3)\n    /Users/xyz/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-common/1.3.10/1b19d99229dcedad7caf50534dce38fe82845269/kotlin-stdlib-common-1.3.10.jar (version 1.3)\nw: Consider providing an explicit dependency on kotlin-reflect 1.3 to prevent strange errors\nw: Some runtime JAR files in the classpath have an incompatible version. Consider removing them from the classpath\n\n&gt; Task :test FAILED\n\nunsigned.Ubyte test &gt; ubyte FAILED\n    org.opentest4j.AssertionFailedError at ubyte.kt:35\n\nunsigned.Uint test &gt; uint FAILED\n    org.opentest4j.AssertionFailedError at uint.kt:32\n\nunsigned.Ulong test &gt; ulong FAILED\n    org.opentest4j.AssertionFailedError at ulong.kt:29\n\nunsigned.Ushort test &gt; ushort FAILED\n    org.opentest4j.AssertionFailedError at ushort.kt:30\n\n6 tests completed, 4 failed\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':test'.\n&gt; There were failing tests. See the report at: file:///Users/xyz/.../kotlin-unsigned/build/reports/tests/test/index.html\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/5.0/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 5s\n10 actionable tasks: 10 executed\n</code></pre>\n\n<p>Notice that Gradle is <strong>not</strong> reporting any messages or errors.  Only your IDE was.</p>\n"}, {"comments": [{"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543322105, "post_id": 53499777, "comment_id": 93868763, "body": "This seems to be the reason. Also, this is better: <code>implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;.toStrin&zwnj;&#8203;g()</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322132, "post_id": 53499777, "comment_id": 93868781, "body": "This is not a good suggestion to use non-idiomatic code to remove the warning. ."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322227, "post_id": 53499777, "comment_id": 93868830, "body": "If you notice, when run on a clean system, these errors or warnings do not appear."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322262, "post_id": 53499777, "comment_id": 93868857, "body": "@JaysonMinard while it avoids the issue, this is perfectly fine. there&#39;s no need to get religious about it."}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "edited": false, "score": 0, "creation_date": 1543322317, "post_id": 53499777, "comment_id": 93868889, "body": "I edited directly the answer, tell me guys if this is fine and makes everybody happy now :)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543322862, "post_id": 53499777, "comment_id": 93869209, "body": "The updated question now shows clearly that your suggestion here is invalid.  There is no actual error in Gradle.  The message is an IDE static analysis tip that doesn&#39;t know enough about the build file to give correct information.  So this suggested change is silly, and isn&#39;t needed.  Gradle reports absolutely no problem, only the editor reports a false static analysis tip."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543323280, "post_id": 53499777, "comment_id": 93869413, "body": "So given only your answer, the person asking the question would think he has a Gradle problem and then litter his future <code>build.gradle</code> files with silly <code>toString()</code> calls for no reason.  There is no change required in the <code>build.gradle</code> file, if you now read the fully debugged version of what was happening."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1543383932, "post_id": 53499777, "comment_id": 93894852, "body": "have replaced it with the my version again, because it did not avoid the use of <code>GString</code> anymore, which I&#39;d consider vandalism because the code did not match the meta information provided. and not to use static version numbers is purely a personal preference - and hardly anything authoritative. all across Google&#39;s SDK documentation one can find that... and Gradle documentation also does not suggest or outlaw anything - therefore I&#39;d consider it a lame argument. if you wish &quot;a better answer&quot;, edit your&#39;s."}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": true, "score": -1, "last_activity_date": 1543383441, "last_edit_date": 1543383441, "creation_date": 1543321904, "answer_id": 53499777, "question_id": 53496317, "link": "https://stackoverflow.com/questions/53496317/annoying-pop-up-hint-after-updating-to-gradle-5-0/53499777#53499777", "title": "Annoying pop-up hint after updating to Gradle 5.0", "body": "<p>replace it with:</p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-stdlib:1.3.10\"\n</code></pre>\n\n<p>then there is no <a href=\"http://docs.groovy-lang.org/2.4.7/html/gapi/groovy/lang/GString.html\" rel=\"nofollow noreferrer\">GString</a> being used.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8688950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ipYhX.jpg?s=128&g=1", "display_name": "Vixb", "link": "https://stackoverflow.com/users/8688950/vixb"}, "is_accepted": false, "score": 0, "last_activity_date": 1543479878, "creation_date": 1543479878, "answer_id": 53534614, "question_id": 53496317, "link": "https://stackoverflow.com/questions/53496317/annoying-pop-up-hint-after-updating-to-gradle-5-0/53534614#53534614", "title": "Annoying pop-up hint after updating to Gradle 5.0", "body": "<p>You need to change warning mode to all or none to avoid the hint.</p>\n\n<p>Add <code>org.gradle.warning.mode=all</code> or <code>org.gradle.warning.mode=none</code> to your <code>gradle.properties</code></p>\n"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "accepted_answer_id": 53499777, "answer_count": 3, "score": 3, "last_activity_date": 1543479878, "creation_date": 1543310421, "last_edit_date": 1543322792, "question_id": 53496317, "link": "https://stackoverflow.com/questions/53496317/annoying-pop-up-hint-after-updating-to-gradle-5-0", "title": "Annoying pop-up hint after updating to Gradle 5.0", "body": "<p>Just updated to Gradle 5.0 and now I get this <a href=\"https://imgur.com/kshzC4P\" rel=\"nofollow noreferrer\">pop-up hints</a>:</p>\n\n<pre><code>buildscript {\n\n    ext.kotlin_version = '1.3.10'\n\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\" // 'classpath' in 'org.gradle.api.artifacts.dsl.DependencyHandler' cannot be applied to '(groovy.lang.GString)'\n        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.4'\n        classpath \"org.junit.platform:junit-platform-gradle-plugin:1.2.0\"\n    }\n}\n\nplugins {\n    id 'maven'\n    id \"org.jetbrains.kotlin.jvm\" version \"1.3.10\"\n    id \"com.github.johnrengelman.shadow\" version \"2.0.4\"\n}\n\next.moduleName = 'com.github.kotlin_graphics.kotlin_unsigned'\n\ndependencies {\n\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"  // 'implementation' in 'org.gradle.api.artifacts.dsl.DependencyHandler' cannot be applied to '(groovy.lang.GString)'\n\n    testImplementation 'io.kotlintest:kotlintest-runner-junit5:3.1.10'\n}\n\nrepositories {\n    mavenCentral()\n    maven { url = \"https://dl.bintray.com/kotlin/kotlin-eap\" }\n    maven { url = \"https://jitpack.io\" }\n}\n\ntask sourcesJar(type: Jar, dependsOn: classes) {\n    classifier = 'sources'\n    from sourceSets.main.allSource\n}\n\ntask javadocJar(type: Jar, dependsOn: javadoc) {\n    classifier = 'javadoc'\n    from javadoc.destinationDir\n}\n\nartifacts {\n    archives sourcesJar\n    archives javadocJar\n}\n\njar {\n    inputs.property(\"moduleName\", moduleName)\n    manifest {  // here\n        attributes('Automatic-Module-Name': moduleName)\n    }\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n\n<p>Why? And how may I solve?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543311030, "post_id": 53496149, "comment_id": 93862356, "body": "So data can either <b>be</b> emitted or not, right?"}, {"owner": {"reputation": 73, "user_id": 10666741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cbb7e809ec04303ee49013a564e6015?s=128&d=identicon&r=PG&f=1", "display_name": "peefartpoop", "link": "https://stackoverflow.com/users/10666741/peefartpoop"}, "reply_to_user": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543311081, "post_id": 53496149, "comment_id": 93862376, "body": "Yes, it downloads something if the condition is true or does nothing if it&#39;s false."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "edited": false, "score": 0, "creation_date": 1543311687, "post_id": 53496149, "comment_id": 93862716, "body": "Worth mentioning that it is kind of opinion-based question..."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10666741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cbb7e809ec04303ee49013a564e6015?s=128&d=identicon&r=PG&f=1", "display_name": "peefartpoop", "link": "https://stackoverflow.com/users/10666741/peefartpoop"}, "edited": false, "score": 0, "creation_date": 1543312291, "post_id": 53496692, "comment_id": 93863082, "body": "Thanks, that works exactly as I wanted and makes more sense! I&#39;ll check if Maybe would fit better too."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": true, "score": 4, "last_activity_date": 1543311641, "creation_date": 1543311641, "answer_id": 53496692, "question_id": 53496149, "link": "https://stackoverflow.com/questions/53496149/how-do-i-start-an-rxjava-chain-conditionally-with-a-completable-into-a-flowable/53496692#53496692", "title": "How do I start an RxJava chain conditionally with a Completable into a Flowable?", "body": "<p><code>Completable.create(...)</code> can be used here, so you can encapsulate data loading logic inside the flow.</p>\n\n<pre><code>fun getThings(): Flowable&lt;List&lt;Task&gt;&gt; {\n    Completable.create {\n        if (condition) { downloadThings() }\n        it.onComplete()\n    }.andThen(getCachedThings())\n}\n</code></pre>\n\n<p>That's if it is about refactoring without logic corruption. Otherwise, it is considerable to analyze if <a href=\"http://reactivex.io/RxJava/javadoc/io/reactivex/Maybe.html\" rel=\"nofollow noreferrer\"><code>Maybe</code></a> fits your logic.</p>\n"}], "owner": {"reputation": 73, "user_id": 10666741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cbb7e809ec04303ee49013a564e6015?s=128&d=identicon&r=PG&f=1", "display_name": "peefartpoop", "link": "https://stackoverflow.com/users/10666741/peefartpoop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 53496692, "answer_count": 1, "score": 1, "last_activity_date": 1543311641, "creation_date": 1543309842, "question_id": 53496149, "link": "https://stackoverflow.com/questions/53496149/how-do-i-start-an-rxjava-chain-conditionally-with-a-completable-into-a-flowable", "title": "How do I start an RxJava chain conditionally with a Completable into a Flowable?", "body": "<p>How would I go about starting a chain with a <code>Completable</code> based on a condition?</p>\n\n<p>I have the code below in <code>getThings()</code> which works, but it doesn't feel like correct usage of RxJava based on the examples I've seen. The content of <code>downloadThings()</code> and <code>getCachedThings()</code> doesn't matter for this example, but the return types do.</p>\n\n<pre><code>fun downloadThings(): Completable {\n    ...\n}\n\nfun getCachedThings(): Flowable&lt;List&lt;Task&gt;&gt; {\n    ...\n}\n\nfun getThings(): Flowable&lt;List&lt;Task&gt;&gt; {\n   return if (condition) {\n               downloadThings()\n           } else {\n               Completable.complete()\n           }.andThen(getCachedThings())\n}\n</code></pre>\n\n<p>My understanding of RxJava is lacking so I can't explain it well, but it looks like the condition is \"outside\" the stream.</p>\n\n<p>Is there a more correct way to do this, or is the way I'm doing it alright?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["kotlin", "gradle-kotlin-dsl", "kotlin-dsl"], "answers": [{"comments": [{"owner": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "edited": false, "score": 0, "creation_date": 1543994345, "post_id": 53501295, "comment_id": 94113854, "body": "Thanks for your comprehensive answer. It&#39;s a bit difference with what I asked. The question is not relative to writing gradle kotlin dsl script. I would like to implicitly import classes for self-created kotlin dsl. Looks like gradle is good example as reference for how to implicitly importing classes in kotlin dsl script."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "edited": false, "score": 0, "creation_date": 1544062536, "post_id": 53501295, "comment_id": 94146334, "body": "You just want Kotlin-script implied imports?  That is supported by Kotlin script and is documented.  &quot;Kotlin-dsl script&quot; isn&#39;t something that exists, other than the Kotlin DSL for Gradle (using that terminology).  So you want any Kotlin Script to have implied imports?"}, {"owner": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "edited": false, "score": 0, "creation_date": 1544087785, "post_id": 53501295, "comment_id": 94154427, "body": "Yes. I&#39;m creating my own dsl script not writing gradle script. I would like to implicitly imports in my dsl script."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1543327578, "last_edit_date": 1543327578, "creation_date": 1543326887, "answer_id": 53501295, "question_id": 53495350, "link": "https://stackoverflow.com/questions/53495350/how-to-ignore-explicitly-importing-classes-like-gradle-kotlin-script-when-writin/53501295#53501295", "title": "How to ignore explicitly importing classes like gradle kotlin script when writing custom kotlin-dsl", "body": "<p>Gradle defines a list of implicit imports that has no mechanism for extending this list.  This is the same as for <code>build.gradle</code> and Groovy versions as it is for the Kotlin versions.</p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/18984034/automatic-imports-in-gradle-plugin\">Automatic imports in Gradle plugin</a></p>\n\n<p>Which still holds true as of today.  There is a TODO remaining in the Kotlin Gradle Script <a href=\"https://github.com/gradle/kotlin-dsl/blob/9d4f2465571b3b8c30a3009951a85824018ca36f/subprojects/provider/src/main/kotlin/org/gradle/kotlin/dsl/support/ImplicitImports.kt#L39\" rel=\"nofollow noreferrer\">source code</a> (<em>master branch as-of Nov 22, 2018</em>) related to this:</p>\n\n<blockquote>\n  <p>// TODO: let this be contributed by :plugins</p>\n</blockquote>\n"}], "owner": {"reputation": 7375, "user_id": 390513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db85dd6e3b1972fafa2c36e6df3abfb?s=128&d=identicon&r=PG", "display_name": "Kane", "link": "https://stackoverflow.com/users/390513/kane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 53501295, "answer_count": 1, "score": 1, "last_activity_date": 1543327578, "creation_date": 1543306690, "question_id": 53495350, "link": "https://stackoverflow.com/questions/53495350/how-to-ignore-explicitly-importing-classes-like-gradle-kotlin-script-when-writin", "title": "How to ignore explicitly importing classes like gradle kotlin script when writing custom kotlin-dsl", "body": "<p>In the gradle's kotlin build script, we don't need explicitly import classes or functions like <code>plugins</code>, <code>repositories</code> or <code>dependencies</code> in build script <strong>build.gradle.kts</strong>.</p>\n\n<pre><code>plugins {\n    val kotlinVersion = \"1.3.10\"\n    val springBootVersion = \"2.1.0.RELEASE\"\n    val detektVersion = \"1.0.0-RC10\"\n\n    id(\"org.springframework.boot\") version springBootVersion\n    id(\"org.jetbrains.kotlin.jvm\") version kotlinVersion\n    id(\"org.jetbrains.kotlin.plugin.spring\") version kotlinVersion\n    id(\"io.spring.dependency-management\") version \"1.0.6.RELEASE\"\n    id(\"io.gitlab.arturbosch.detekt\") version detektVersion\n}\n\n\nrepositories {\n    mavenLocal()\n\n    mavenCentral()\n    maven(url = uri(\"https://dl.bintray.com/s1m0nw1/KtsRunner\"))\n}\n\ndependencies {\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    implementation(\"org.jetbrains.kotlin:kotlin-reflect\")\n    implementation(\"org.jetbrains.kotlin:kotlin-script-runtime\")\n    implementation(\"org.jetbrains.kotlin:kotlin-compiler-embeddable\")\n    implementation(\"org.jetbrains.kotlin:kotlin-script-util\")\n\n    implementation(\"org.springframework.boot:spring-boot-starter-webflux\")\n    implementation(\"org.springframework.boot:spring-boot-starter-actuator\")\n    implementation(\"com.fasterxml.jackson.module:jackson-module-kotlin\")\n    implementation(\"cn.pilipa:pilipa-spring-boot-starter-logging:2.0.10\")\n\n    implementation(\"de.swirtz:ktsRunner:0.0.5\")\n\n    testImplementation(\"org.springframework.boot:spring-boot-starter-test\"){\n        exclude(module = \"junit\")\n    }\n    testImplementation(\"io.projectreactor:reactor-test\")\n    testImplementation(\"org.springframework.cloud:spring-cloud-stream-test-support\")\n    testImplementation(\"org.junit.jupiter:junit-jupiter-api\")\n    testRuntime(\"org.junit.jupiter:junit-jupiter-engine\")\n    testCompile(\"io.kotlintest:kotlintest-runner-junit5:${kotlinTestVersion}\")\n    testCompile(\"io.kotlintest:kotlintest-extensions-spring:${kotlinTestVersion}\")\n\n    detektPlugins(\"io.gitlab.arturbosch.detekt:detekt-formatting:${detektVersion}\")\n}\n</code></pre>\n\n<p>How to implement this similar feature in the custom kotlin-dsl script to implicitly import classes in kotlin-dsl script?</p>\n"}, {"tags": ["android", "kotlin", "mockk"], "comments": [{"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "edited": false, "score": 1, "creation_date": 1543307834, "post_id": 53494879, "comment_id": 93860650, "body": "Don&#39;t know how to do that with MockK but if you end up mocking private methods, chances are that you have badly designed classes in your hands."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1543319932, "post_id": 53494879, "comment_id": 93867466, "body": "Do you have a full stack trace and any other information from the exception?"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 9858578, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_k3sPAUWFak/AAAAAAAAAAI/AAAAAAAAADM/flgMFg2y98Q/photo.jpg?sz=128", "display_name": "Vikas Jain", "link": "https://stackoverflow.com/users/9858578/vikas-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1569837604, "last_edit_date": 1569837604, "creation_date": 1569837165, "answer_id": 58165436, "question_id": 53494879, "link": "https://stackoverflow.com/questions/53494879/how-mock-private-method-with-nullable-args/58165436#58165436", "title": "How mock private method with nullable args", "body": "<p>Use this:</p>\n\n<pre><code>every { loginPresenter[\"trySaveLogin\"](any&lt;Session&gt;(), any&lt;String&gt;(), any&lt;String&gt;(), any&lt;String&gt;(), any&lt;UserInfo&gt;())  as Unit } just Runs\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7743328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b54d7b9862d11a1799d52f036ecc4bf?s=128&d=identicon&r=PG&f=1", "display_name": "darjke", "link": "https://stackoverflow.com/users/7743328/darjke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569837604, "creation_date": 1543304511, "question_id": 53494879, "link": "https://stackoverflow.com/questions/53494879/how-mock-private-method-with-nullable-args", "title": "How mock private method with nullable args", "body": "<p>I'm use MockK for unit test. How i can mockk private call with nullable and not nullable args? </p>\n\n<p>My  method: </p>\n\n<pre><code>private fun trySaveLogin(session: Session, login: String, passwordHash: String?, passwordHashNoSalt: String?, userInfo: UserInfo) { // doWork}\n</code></pre>\n\n<p>Already tried:</p>\n\n<pre><code>every { loginPresenter[\"trySaveLogin\"](allAny&lt;Any&gt;())  } just Runs\nevery { loginPresenter[\"trySaveLogin\"](any&lt;String&gt;(), any&lt;String&gt;(), any&lt;String&gt;(), any&lt;String&gt;(), any&lt;UserInfo&gt;()) } just Runs\n</code></pre>\n\n<p>Everything return error : </p>\n\n<pre><code>io.mockk.MockKException: can't find function trySaveLogin(-4d6de1423b10ebb8, ...) for dynamic call\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543302962, "post_id": 53494413, "comment_id": 93858519, "body": "do this <code>PreferenceTool(this@UIHome, getString(R.string.IsBackgroundName) , false)</code> inside <code>OnCraete()</code>"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543303122, "post_id": 53494413, "comment_id": 93858597, "body": "Thanks! How can I do?"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543303216, "post_id": 53494413, "comment_id": 93858629, "body": "I need to use the var <code>isBackgroundWindow</code> outside Oncreate()"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543305069, "post_id": 53494413, "comment_id": 93859393, "body": "Means assign value to your <code>isBackgroundWindow</code> inside <code>OnCraete()</code> method"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543305656, "post_id": 53494413, "comment_id": 93859648, "body": "Could you give me a full code?"}, {"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543307568, "post_id": 53494413, "comment_id": 93860508, "body": "Try this <code>private lateinit var isBackgroundWindow: Boolean</code> than in <code>onCreate()</code> method  <code>isBackgroundWindow=PreferenceTool(this@UIHome, getString(R.string.IsBackgroundName) , false)</code>"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543308666, "post_id": 53494413, "comment_id": 93861057, "body": "Sorry, your code is wrong"}, {"owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1543308700, "post_id": 53494413, "comment_id": 93861079, "body": "&#39;lateinit&#39; modifier is not allowed on properties of primitive types"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "closed_date": 1543302616, "answer_count": 0, "score": 0, "last_activity_date": 1543625641, "creation_date": 1543302508, "last_edit_date": 1543625641, "question_id": 53494413, "link": "https://stackoverflow.com/questions/53494413/why-does-isbackgroundwindow-return-error-when-i-use-delegate-in-kotlin", "closed_reason": "Duplicate", "title": "Why does isBackgroundWindow return error when I use delegate in Kotlin?", "body": "<p>I hope to set a value for var <code>isBackgroundWindow</code>, but <code>private var isBackgroundWindow: Boolean by PreferenceTool(this@UIHome, getString(R.string.IsBackgroundName) , false)</code> cause null error, why?</p>\n\n<p>BTW, the <em>Code 0</em> and <em>Code 1</em> are wrong.</p>\n\n<p><strong>Code 0</strong></p>\n\n<pre><code>   private lateinit  var isBackgroundWindow: Boolean\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.layout_home)  \n\n        isBackgroundWindow= PreferenceTool(this, getString(R.string.IsBackgroundName) , false)\n    }\n</code></pre>\n\n<p><strong>Code 1</strong></p>\n\n<pre><code>private var isBackgroundWindow: Boolean by lazy {\n        PreferenceTool&lt;Boolean&gt;(this@UIHome, getString(R.string.IsBackgroundName), false)\n    }\n</code></pre>\n\n<p><strong>Code  A</strong></p>\n\n<pre><code>class UIHome : AppCompatActivity() {\n    private var isBackgroundWindow: Boolean by PreferenceTool(this@UIHome, getString(R.string.IsBackgroundName) , false)\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.layout_home)\n        isBackgroundWindow=true\n    }\n}\n</code></pre>\n\n<p><strong>Code B</strong></p>\n\n<pre><code>class PreferenceTool&lt;T&gt;(private val context: Context, private val name: String,  private val default: T) {\n\n    private val prefs: SharedPreferences by lazy {      \n        context.defaultSharedPreferences     \n    }\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = findPreference(name, default)\n\n    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) {\n        putPreference(name, value)\n    }\n\n    @Suppress(\"UNCHECKED_CAST\")\n    private fun findPreference(name: String, default: T): T = with(prefs) {\n        val res: Any = when (default) {\n            is Long -&gt; getLong(name, default)\n            is String -&gt; getString(name, default)\n            is Int -&gt; getInt(name, default)\n            is Boolean -&gt; getBoolean(name, default)\n            is Float -&gt; getFloat(name, default)\n            else -&gt; throw IllegalArgumentException(\"This type can be saved into Preferences\")\n        }\n\n        res as T\n    }\n\n    @SuppressLint(\"CommitPrefEdits\")\n    private fun putPreference(name: String, value: T) = with(prefs.edit()) {\n        when (value) {\n            is Long -&gt; putLong(name, value)\n            is String -&gt; putString(name, value)\n            is Int -&gt; putInt(name, value)\n            is Boolean -&gt; putBoolean(name, value)\n            is Float -&gt; putFloat(name, value)\n            else -&gt; throw IllegalArgumentException(\"This type can't be saved into Preferences\")\n        }.apply()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "google-search", "android-slices"], "comments": [{"owner": {"reputation": 7305, "user_id": 1268507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/pW5el.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1268507/alex"}, "edited": false, "score": 2, "creation_date": 1543304771, "post_id": 53494116, "comment_id": 93859252, "body": "The slices is still not live for users, you can only test them with Slice Viewer"}, {"owner": {"reputation": 2182, "user_id": 139412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fHwOZ.png?s=128&g=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/139412/pavel"}, "edited": false, "score": 0, "creation_date": 1552467119, "post_id": 53494116, "comment_id": 97015765, "body": "Does anyone know when slices are going to be available to the wide audience?"}, {"owner": {"reputation": 51, "user_id": 6629824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd571a2c26eed7cd4a84a0b187749f0?s=128&d=identicon&r=PG&f=1", "display_name": "Soe Thiha", "link": "https://stackoverflow.com/users/6629824/soe-thiha"}, "edited": false, "score": 3, "creation_date": 1591098637, "post_id": 53494116, "comment_id": 109920868, "body": "Hello, how about android slices in 2020? I am asked to do some demos to show our app slices in google search. But, I am finding no slice in Google Search yet even though the docs says <i>Slices are UI templates that can display rich, dynamic, and interactive content from your app from within the <b>Google Search app</b> and also in other places like the Google Assistant.</i>"}], "owner": {"reputation": 412, "user_id": 7789575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xxbOV.jpg?s=128&g=1", "display_name": "Nagendra Hari Karthick", "link": "https://stackoverflow.com/users/7789575/nagendra-hari-karthick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1543301025, "creation_date": 1543301025, "question_id": 53494116, "link": "https://stackoverflow.com/questions/53494116/integrating-slices-in-android-google-search", "title": "Integrating Slices in Android Google Search", "body": "<p>I have implemented slices from <a href=\"https://developer.android.com/guide/slices/getting-started\" rel=\"noreferrer\">Google android developers tutorial</a>. My code is working exactly fine in SliceViewer App.But I don't know how to show this with google search app result.Can someone tell me how to integrate this operation and how will the google search know when to display my slice data?</p>\n"}, {"tags": ["android", "kotlin", "retrofit"], "comments": [{"owner": {"reputation": 131, "user_id": 10209025, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7LTwdOg3ZcU/AAAAAAAAAAI/AAAAAAAAACM/gZkrkx3NOig/photo.jpg?sz=128", "display_name": "Sreedev P R", "link": "https://stackoverflow.com/users/10209025/sreedev-p-r"}, "edited": false, "score": 0, "creation_date": 1543293814, "post_id": 53492348, "comment_id": 93855449, "body": "Pass an interface object in fun getSomeData"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "edited": false, "score": 0, "creation_date": 1543296137, "post_id": 53492708, "comment_id": 93856046, "body": "Thanks a lot for your help @Vikash but I cannot replicate your logic into my code, seems like the logic is for one endpoint, what happened when you have more than one or more than ten, that&#39;s a lot of code. I was trying to replicate your logic into my code but I had some problems since I&#39;m implementing my own BaseCallback.kt (put code above) and is not working, keep saying that I have to implement extension function."}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "reply_to_user": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "edited": false, "score": 0, "creation_date": 1543302745, "post_id": 53492708, "comment_id": 93858435, "body": "@Andrew So you send calls to different apis ?"}, {"owner": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "edited": false, "score": 0, "creation_date": 1543330680, "post_id": 53492708, "comment_id": 93874057, "body": "Same Api, but different endpoint, if I put everything into <code>companion object{}</code> will be a huge static class."}, {"owner": {"reputation": 339, "user_id": 8268774, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvUZGIvv-2k/AAAAAAAAAAI/AAAAAAAAAB4/Lucr39fKaas/photo.jpg?sz=128", "display_name": "Vikash Bijarniya", "link": "https://stackoverflow.com/users/8268774/vikash-bijarniya"}, "reply_to_user": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "edited": false, "score": 0, "creation_date": 1543385913, "post_id": 53492708, "comment_id": 93895577, "body": "@Andrew you can avoid <code>companion object{}</code> by using object class, and for different endpoints you have to use separate code, obviously. Or you have any other approach? want to know that too :)"}, {"owner": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "edited": false, "score": 0, "creation_date": 1543418332, "post_id": 53492708, "comment_id": 93914031, "body": "I solve the problem using Observables from RxJava, seems to work fine, I need to find the way to use BaseCallBack&lt;T&gt;. But that&#39;s another history."}], "tags": [], "owner": {"reputation": 339, "user_id": 8268774, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nvUZGIvv-2k/AAAAAAAAAAI/AAAAAAAAAB4/Lucr39fKaas/photo.jpg?sz=128", "display_name": "Vikash Bijarniya", "link": "https://stackoverflow.com/users/8268774/vikash-bijarniya"}, "is_accepted": false, "score": 3, "last_activity_date": 1543292452, "creation_date": 1543292452, "answer_id": 53492708, "question_id": 53492348, "link": "https://stackoverflow.com/questions/53492348/handle-retrofit-callback-using-kotlin/53492708#53492708", "title": "Handle Retrofit Callback using Kotlin", "body": "<p>Put below code in AppRepository.kt file</p>\n\n<pre><code>companion object { \n\nfun getServiceDetails(map: Map&lt;String, String&gt;, callback: ApiCallback&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt;) {\n        val retrofit = ApiClient.retrofit\n        val callGet = retrofit?.create&lt;ApiService.ServiceDetails&gt;(ApiService.ServiceDetails::class.java)?.getServiceDetails(map, ApiConstants.API_KEY, ApiConstants.API_LANG)\n\n        callGet?.enqueue(object : Callback&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt; {\n            override fun onFailure(call: Call&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt;?, t: Throwable?) {\n                callback.onError(t.toString())\n            }\n\n            override fun onResponse(call: Call&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt;?, response: Response&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt;?) {\n                if (response?.isSuccessful!!) {\n                    callback.onSuccess(response.body()!!)\n                } else {\n                    setError(callback, response)\n                }\n            }\n\n        })\n    }\n</code></pre>\n\n<p>ApiCallBack.kt interface file has the code:</p>\n\n<pre><code>interface ApiCallback&lt;T&gt; {\nfun onException(error: Throwable)\n\nfun onError(error: String)\n\nfun onSuccess(t: T)\n</code></pre>\n\n<p>}</p>\n\n<p>ApiService.kt file has the code:</p>\n\n<pre><code> interface ApiService {\n\ninterface ServiceDetails {\n    @GET(\"api/path/here/\")\n    fun getServiceDetails(@QueryMap map: Map&lt;String, String&gt;, @Header(ApiConstants.KEY_X_API) apiKey: String, @Header(ApiConstants.KEY_ACCEPT_LANGUAGE) language: String): Call&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt;\n}\n</code></pre>\n\n<p>Now call api using :</p>\n\n<pre><code>AppRepository.getServiceDetails(map, object : ApiCallback&lt;ServiceDetailsDataClass.ServiceDetailsResponse&gt; {\n        override fun onException(error: Throwable) {\n            serviceDetailsResponse.value = error\n        }\n\n        override fun onError(error: String) {\n            serviceDetailsResponse.value = error\n        }\n\n        override fun onSuccess(t: ServiceDetailsDataClass.ServiceDetailsResponse) {\n            serviceDetailsResponse.value = t\n\n        }\n\n    })\n</code></pre>\n\n<p>Hope it helps you.</p>\n"}], "owner": {"reputation": 43, "user_id": 8484567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJl3zCY4Ij0/AAAAAAAAAAI/AAAAAAAACNg/PNX45ISlSHA/photo.jpg?sz=128", "display_name": "Andrew", "link": "https://stackoverflow.com/users/8484567/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6832, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543295861, "creation_date": 1543289669, "last_edit_date": 1543295861, "question_id": 53492348, "link": "https://stackoverflow.com/questions/53492348/handle-retrofit-callback-using-kotlin", "title": "Handle Retrofit Callback using Kotlin", "body": "<p>Maybe this is a very easy topic but I cannot find the correct answer.</p>\n\n<p>This is the deal, I was using this logic for handle API's into my current android project:</p>\n\n<ul>\n<li><p>class SampleApi </p></li>\n<li><p>interface ISampleApi</p></li>\n<li><p>interface SampleClient</p></li>\n<li><p>class GetUserData </p></li>\n</ul>\n\n<p>Now that I'm moving to Kotlin, I cannot replicate the <code>enqueue()</code> function from retrofit into my Api class. This is an example of my code:</p>\n\n<p>GetUserData.java:</p>\n\n<pre><code>class GetUserData {\nprivate void tryGetData() {\n    sampleApi.getSomeData(userId, new Callback&lt;Data&gt;() {\n        @Override\n        public void onResponse(final Call&lt;Data&gt; call, final Response&lt;Data&gt; response) {\n            ......Do Something\n        }\n\n        @Override\n        public void onFailure(final Call&lt;Data&gt; call, final Throwable t) {\n            ......Do Something\n        }\n    });\n</code></pre>\n\n<p>I'm using a interface in order to declare the methods to be implemented into the API class:</p>\n\n<pre><code>public interface ISampleApi {\n\nvoid getSomeData(@NonNull String userId,\n                     @NonNull Callback&lt;Data&gt; callback);\n\n}\n</code></pre>\n\n<p>This is my API class:</p>\n\n<pre><code>public class SampleApi implements ISampleApi {\n............\n  @Override\n  public void getSomeData(@NonNull final String userId,\n                            @NonNull final Callback&lt;Data&gt; callback) {\n    myClient.getSomeData(userId).enqueue(callback);\n  }\n}\n</code></pre>\n\n<p>And this is MyClient using Retrofit:</p>\n\n<pre><code>public interface SampleClient {\n  @GET(\"user/data/{userId}\")\n  Call&lt;Data&gt; getSomeData(@NonNull @Path(\"userId\") String userId);\n}\n</code></pre>\n\n<p>All the code above works fine, that's what I'm using in my app without problem.</p>\n\n<p>Now, this is the problem when move to Kotlin, I'm try to create the enqueue callback into SampleApi and I need to return the response to the class where the callback was created, in Kotlin should be something like this:</p>\n\n<pre><code>fun getSomeData(userId: String, callback: CallBack&lt;Data&gt;) {\n  client?.getSomeData(userId).enqueue(callback)\n}\n</code></pre>\n\n<p>But when try to do that, Android Studio tell me that I have to create a extension function, I create the extension function, and after more suggestion from Android Studio and some research the result is something like this:</p>\n\n<pre><code>override fun getSomeData(@NonNull userId: String,\n                             @NonNull callback: Callback&lt;Data&gt;) {//Neve using this callback\n    client?.getSomeData(userId).enqueue {\n      success = {\n       success -&gt; Do Something\n      }\n      failure = {\n        failure -&gt; Do Something\n      }\n    }\n}\n\nfun&lt;T&gt; Call&lt;T&gt;.enqueue(callback: BaseCallback&lt;T&gt;.() -&gt; Unit) {\n    val callbackBk = BaseCallback&lt;T&gt;()\n    callback.invoke(callbackBk)\n    this.enqueue(callbackBk)\n\n}\n\nclass BaseCallback&lt;T&gt;: Callback&lt;T&gt; {\n    var success: ((Response&lt;T&gt;) -&gt; Unit)? = null\n    var failure: ((t: Throwable?) -&gt; Unit)? = null\n\n    override fun onFailure(call: Call&lt;T&gt;, t: Throwable) {\n        failure?.invoke(t)\n    }\n\n    override fun onResponse(call: Call&lt;T&gt;, response: Response&lt;T&gt;) {\n        success?.invoke(response)\n    }\n}\n</code></pre>\n\n<p>BaseCallback.kt</p>\n\n<pre><code>open class BaseCallback&lt;T: Validatable&gt;(): Callback&lt;BaseResponseBody&lt;T&gt;&gt; {\nvar success: ((T) -&gt; Unit)? = null\nvar failure: ((networkingError: NetworkingError?) -&gt; Unit)? = null\noverride fun onResponse(call: Call&lt;BaseResponseBody&lt;T&gt;&gt;, response: Response&lt;BaseResponseBody&lt;T&gt;&gt;) {\n\n    if (response?.code() != null\n            &amp;&amp; response.isSuccessful\n            &amp;&amp; response.body() != null\n            &amp;&amp; response.body().containsValidSuccess()) run {\n\n        onSuccessfulResponse(response.body().data!!)\n    } else if (response != null\n            &amp;&amp; response.isSuccessful\n            &amp;&amp; response.body() != null) {\n\n        onSuccessfulResponse()\n    } else {\n        onNonSessionErrorEncountered(networkingError)\n    }\n}\n\noverride fun onFailure(call: Call&lt;BaseResponseBody&lt;T&gt;&gt;, throwable: Throwable) {\n    onNonSessionErrorEncountered(NetworkStateError(throwable))\n}\n\n@VisibleForTesting(otherwise = PROTECTED)\nfun onSuccessfulResponse(responseValue: T) {\n    success?.invoke(responseValue)\n}\n\n@VisibleForTesting(otherwise = PROTECTED)\nfun onSuccessfulResponse() {\n    // This method intentionally left blank.\n}\n\nfun onSessionErrorEncountered() {\n    // This method intentionally left blank.\n}\n\n@VisibleForTesting(otherwise = PROTECTED)\nfun onNonSessionErrorEncountered(networkingError: NetworkingError) {\n    failure?.invoke(networkingError)\n}\n}\n</code></pre>\n\n<p>This code works fine here, I can receive the data, but I need to receive the response inside the class that call this endpoint, since I need to change the UI. </p>\n\n<p>I really appreciate a lot some help, I have been stuck with this for a while and I need to solve the issue to move on with the app.</p>\n"}, {"tags": ["android", "performance", "kotlin", "garbage-collection"], "answers": [{"comments": [{"owner": {"reputation": 60, "user_id": 2300057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66f7f28393cae8f789cd90c2a77a220?s=128&d=identicon&r=PG", "display_name": "Wilson Castiblanco", "link": "https://stackoverflow.com/users/2300057/wilson-castiblanco"}, "edited": false, "score": 0, "creation_date": 1543359108, "post_id": 53493756, "comment_id": 93888808, "body": "@AndreyLlyunin thank you for answering! well, so, having the class decompiled, the static reference to <code>FooInteractorFactory</code> make it not eligible for garbage collection, BUT, having in mind that <code>FooInteractorFactory</code> is being used (not referenced, not assigned) inside another class which is <code>FooImpl</code> this class is gonna be removed, so their members and usages as well? (FooInteractorFactory)"}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 60, "user_id": 2300057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66f7f28393cae8f789cd90c2a77a220?s=128&d=identicon&r=PG", "display_name": "Wilson Castiblanco", "link": "https://stackoverflow.com/users/2300057/wilson-castiblanco"}, "edited": false, "score": 0, "creation_date": 1543401122, "post_id": 53493756, "comment_id": 93903422, "body": "Talking about <b>instances</b> - they will be collected if aren&#39;t referenced directly or transitively by local references of static references of <code>Class</code> objects that are contained in PermGen or Metaspace already (let&#39;s forget about JNI and threads here). So, assuming that <code>val foompl = FooImpl()</code> will be used only in the context of <code>onCreate</code> method of <code>MainActivity</code>, then it will be collected in a few GC cycles after this method execution will be finished."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 60, "user_id": 2300057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66f7f28393cae8f789cd90c2a77a220?s=128&d=identicon&r=PG", "display_name": "Wilson Castiblanco", "link": "https://stackoverflow.com/users/2300057/wilson-castiblanco"}, "edited": false, "score": 0, "creation_date": 1543401381, "post_id": 53493756, "comment_id": 93903570, "body": "BUT (!) because <code>FooImpl</code> requested a class <code>FooInteractorFactory</code> and invoked a static method which initializes the factory with a reference to itself (to <code>FooImpl</code>), than static reference which will point to a <code>FooInteractorFactory</code> object (that won&#39;t be GC-collected until this object will be <b>unreferenced</b>, for instance, by future invocation of <code>initialize</code> method), than this <code>FooImpl</code> instance will be available from two GC-roots: static reference on <code>FooInteractorFactory</code> which contains <code>FooImpl</code> object as a member, and local variable <code>val foompl = ...</code> in <code>onCreate</code>."}, {"owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "reply_to_user": {"reputation": 60, "user_id": 2300057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66f7f28393cae8f789cd90c2a77a220?s=128&d=identicon&r=PG", "display_name": "Wilson Castiblanco", "link": "https://stackoverflow.com/users/2300057/wilson-castiblanco"}, "edited": false, "score": 1, "creation_date": 1543402004, "post_id": 53493756, "comment_id": 93903976, "body": "As a summary: <code>FooImpl</code> instance won&#39;t be lost until two events will happen: 1. <code>onCreate</code> method execution will be finished and local reference <code>foompl</code> that points to the instance will be lost (assuming that it won&#39;t be passed to an object with bigger lifetime inside this method) 2. Reference <code>fooFactory</code> that points to <code>FooInteractorFactory</code> (that stores the instance of <code>FooImpl</code> that was passed from the <code>init</code> block of <code>FooImpl</code>) will change it&#39;s value due to another <code>initialize</code> method invocation of <code>FooInteractorFactory</code>&#39;s <code>companion object</code>."}], "tags": [], "owner": {"reputation": 2845, "user_id": 7884542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IHDzC.jpg?s=128&g=1", "display_name": "nyarian", "link": "https://stackoverflow.com/users/7884542/nyarian"}, "is_accepted": false, "score": 0, "last_activity_date": 1543299190, "creation_date": 1543299190, "answer_id": 53493756, "question_id": 53492118, "link": "https://stackoverflow.com/questions/53492118/this-kotlin-singleton-implementation-will-become-elegible-for-garbage-collectio/53493756#53493756", "title": "This Kotlin Singleton implementation, will become elegible for Garbage Collection?", "body": "<p>AFAIK LeakCanary detects only leaked activities, so it is not designed to detect all memory leaks (finally, how should it now which instance should be garbage collected and which is not?).</p>\n\n<p>Also, what you've attached as a quote is about <code>Class&lt;?&gt;</code>, not about instance. I mean, it says about whole <code>Class</code> definitions, that are being stored in Permanent Generation or Metaspace (depends on Java version).</p>\n\n<p>And about your question: garbage collector usually works in the next way - it starts from references named GC roots, then goes through all the objects via references from these roots, marks them as \"alive\", and reclaims memory from all the objects that were not marked as alive (I mean, that are not available through GC-roots). References known as GC-roots are :</p>\n\n<ol>\n<li>Local variables</li>\n<li><code>static</code> variables</li>\n<li>Active <code>Thread</code>s</li>\n<li>JNI references</li>\n</ol>\n\n<p>I doubt any of <code>Class</code> objects that you have mentioned are going to be unloaded from JVM in case you haven't define your own <code>ClassLoader</code> or messed with their lifecycle.\nTalking about instances: </p>\n\n<blockquote>\n  <p>I have this class acting like a singleton (the instance is not being secured to be recreated again)</p>\n</blockquote>\n\n<p>If comanion's object <code>fooFactory</code> reference referred object <code>A</code> and then was reassigned with object <code>B</code>, then if <code>A</code> is not referenced with any other GC-roots or intermediate references that are available through GC-roots, than in few GC cycles this intance will be garbage collected.</p>\n\n<p>The same goes for all the other instances.</p>\n"}], "owner": {"reputation": 60, "user_id": 2300057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66f7f28393cae8f789cd90c2a77a220?s=128&d=identicon&r=PG", "display_name": "Wilson Castiblanco", "link": "https://stackoverflow.com/users/2300057/wilson-castiblanco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543358893, "creation_date": 1543287816, "last_edit_date": 1543358893, "question_id": 53492118, "link": "https://stackoverflow.com/questions/53492118/this-kotlin-singleton-implementation-will-become-elegible-for-garbage-collectio", "title": "This Kotlin Singleton implementation, will become elegible for Garbage Collection?", "body": "<p>I have this class acting like a singleton (the instance is not being secured to be recreated again):</p>\n\n<pre><code>class FooInteractorFactory(private val someEvent: SomeEvent) {\n\n    companion object {\n\n        lateinit var fooFactory: FooInteractorFactory\n\n        fun initialize(someEvent: SomeEvent) {\n            fooFactory = FooInteractorFactory(someEvent)\n        }\n    }\n\n    fun createSomeObject(): SomeObject {\n        return SomeObject(someEvent)\n    }\n\n}\n</code></pre>\n\n<p>That \"singleton\" is being initialized inside this class:</p>\n\n<pre><code>class FooImpl : SomeEvent {\n\n    init {\n        FooInteractorFactory.initialize(this)\n    }\n\n    ...\n}\n</code></pre>\n\n<p>And <code>FooImpl</code> is being instantiated inside a lifecycle function <code>onCreate()</code> in an Activity:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n       val foompl = FooImpl()\n    }\n\n    ...\n\n}\n</code></pre>\n\n<p>My question here is <code>FooInteractorFactory</code>, <code>SomeEvent</code> or <code>SomeObject</code> some of them will be leaked or not eligible for Garbage Collection? </p>\n\n<p>As the documentation says, </p>\n\n<blockquote>\n  <p>A class or interface may be unloaded if and only if its defining class loader may be reclaimed by the garbage collector.</p>\n</blockquote>\n\n<p>this is gonna be eligible, BUT, I'm not sure. I just add to the app LeakCanary, but, the Leak never happened.</p>\n\n<p>I want to be sure based on the experience of each of you.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This is how the <code>FooInteractorFactory</code> looks in decompiled java code:</p>\n\n<pre><code>public final class FooInteractorFactory {\n   private final SomeEvent someEvent;\n   @NotNull\n   public static FooInteractorFactory fooFactory;\n\n   @NotNull\n   public final FooInteractorFactory createSomeObject() {\n      return new SomeObject(this.someEvent);\n   }\n\n   public FooInteractorFactory(@NotNull SomeEvent someEvent) {\n      this.someEvent = someEvent;\n   }\n\n\n   public static final class Companion {\n      @NotNull\n      public final FooInteractorFactory getFooFactory() {\n         return FooInteractorFactory.access$getFooFactory$cp();\n      }\n\n      public final void setFooFactory(@NotNull FooInteractorFactory var1) {\n         FooInteractorFactory.fooFactory = var1;\n      }\n\n      public final void initialize(@NotNull SomeEvent someEvent) {\n         ((FooInteractorFactory.Companion)this).setFooFactory(new FooInteractorFactory(someEvent));\n      }\n  }\n\n}\n</code></pre>\n\n<p><code>FooInteractorFactory</code> is a static reference of the same class.</p>\n"}, {"tags": ["arraylist", "kotlin", "split", "slice"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 796107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187305471d7b0fdaca6bd53470f15ee8?s=128&d=identicon&r=PG", "display_name": "Patrick McCullagh", "link": "https://stackoverflow.com/users/796107/patrick-mccullagh"}, "edited": false, "score": 0, "creation_date": 1543301440, "post_id": 53492282, "comment_id": 93857873, "body": "I have actually managed it with a rough version of sublist but it&#39;s very messy. I thought there might be a cleaner way. Btw than you for the reply,"}], "tags": [], "owner": {"reputation": 21, "user_id": 4827007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152945288514541/picture?type=large", "display_name": "Benjamin Doyle", "link": "https://stackoverflow.com/users/4827007/benjamin-doyle"}, "is_accepted": false, "score": 2, "last_activity_date": 1543289120, "creation_date": 1543289120, "answer_id": 53492282, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index/53492282#53492282", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>You could definitely use .sublist function of arrayList here:</p>\n\n<pre><code>fun subList(fromIndex: Int, toIndex: Int): MutableList&lt;E&gt;\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/sub-list.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-array-list/sub-list.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": false, "score": 0, "last_activity_date": 1543305476, "last_edit_date": 1543305476, "creation_date": 1543301877, "answer_id": 53494272, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index/53494272#53494272", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>You can use a combination of collection functions to solve your problem.\nFirst you should find the indexes with empty strings (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-indexed-not-null.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-indexed-not-null.html</a>):</p>\n\n<pre><code>val splitPoints =\n    myarrayList.mapIndexedNotNull() { idx, str -&gt; if (str.isEmpty()) idx else null }\n</code></pre>\n\n<p>Next you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/windowed.html\" rel=\"nofollow noreferrer\"><code>windowed</code></a> to get two consecutively items from the list. To get the first and last part of your list, you need to add the -1 and the size of your <code>ArrayList</code>. Now you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/sub-list.html\" rel=\"nofollow noreferrer\"><code>sublist</code></a> and extract the indivdiual parts:</p>\n\n<pre><code>val splittedList =\n    (listOf(-1)  + splitPoints + myarrayList.size)\n        .windowed(2, 1)\n        .map { (start, end) -&gt; myarrayList.subList(start + 1, end) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 796107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187305471d7b0fdaca6bd53470f15ee8?s=128&d=identicon&r=PG", "display_name": "Patrick McCullagh", "link": "https://stackoverflow.com/users/796107/patrick-mccullagh"}, "is_accepted": false, "score": 0, "last_activity_date": 1543329469, "creation_date": 1543329469, "answer_id": 53502073, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index/53502073#53502073", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>I am pretty new to Kotlin /Anko and realize that your answer involves RXKotlin. I had never heard of windowed but looked it up. Its more to learn. I have however been able to achieve the same with the following code. I do thank everyone for your help</p>\n\n<blockquote>\n  <p>fun main() {</p>\n</blockquote>\n\n<pre><code>var myarrayList= ArrayList&lt;String&gt;()\nvar emptyIndexes= ArrayList&lt;Int&gt;()\nemptyIndexes.add(0)\n\n\n\nmyarrayList.add(\"+23\")\nmyarrayList.add(\"-25\")\nmyarrayList.add(\"+125\")\nmyarrayList.add(\"+455\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"*230\")\nmyarrayList.add(\"-293\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"+293\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"+21\")\n\nfor (index in 0..myarrayList.size-1){\n    print (index)\n    print (\" = \")\n    print (myarrayList.get(index))\n    print (\"\\n\")\n\n    ///find empty index\n    if (myarrayList.get(index)==\"\"){\n       emptyIndexes.add(index)\n\n     }\n\n\n}\n emptyIndexes.add(myarrayList.size)\n\n print(\"\\n\")\n\n    for (item in emptyIndexes){\n\n    print (\"empty index \"+ item +\" \")\n}\n\n\n\n\nfor (index in 0..emptyIndexes.size-1){\n\n        //println (\"start index \" +index) \n        if (index==emptyIndexes.size-1){break}\n        //println (\"end index \"+ (index+1) )\n\n       // print(\"\\n\\nemptyIndixes size)\"+ emptyIndexes.size +\"\\n\\n\")\n\n        var subCals=myarrayList.subList(emptyIndexes[index],emptyIndexes[(index+1)])\n        //println (subCals )\n        var stToCal=\"\"\n        for (items in subCals){\n\n            stToCal=stToCal+items.toString()\n\n\n\n        }\n\n\n     }\n</code></pre>\n\n<p>}</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 796107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187305471d7b0fdaca6bd53470f15ee8?s=128&d=identicon&r=PG", "display_name": "Patrick McCullagh", "link": "https://stackoverflow.com/users/796107/patrick-mccullagh"}, "edited": false, "score": 0, "creation_date": 1543416727, "post_id": 53521477, "comment_id": 93912951, "body": "Thank you Roland for your very clear answer. I had thought about using a JoinToString and I think it is probably the cleanest method. I&#39;m not actually using just single numbers  in the example above. It&#39;s for a kind of calculator app with a running list as in the the old style desktop with a paper roll. And each row in the Arraylist will represent a line in the calculation. i. e  a data class      rowItem (lineNos, value, note)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 31, "user_id": 796107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187305471d7b0fdaca6bd53470f15ee8?s=128&d=identicon&r=PG", "display_name": "Patrick McCullagh", "link": "https://stackoverflow.com/users/796107/patrick-mccullagh"}, "edited": false, "score": 0, "creation_date": 1543417601, "post_id": 53521477, "comment_id": 93913515, "body": "well... most readable probably, but also a work-around if you do not need the concatenated string in the first place ;-)"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1543414566, "creation_date": 1543414566, "answer_id": 53521477, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index/53521477#53521477", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>I couldn't imagine that there isn't a simpler way to do this... and there are so many ways to solve it actually, but all have one or the other \"flaw\" (e.g. you need to add some index in front or the end... or you need to take care that you do not lose the last entry as there is no final <code>\"\"</code>, etc.). If you wouldn't need a list of lists in the first place, it could just be as easy as:</p>\n\n<pre><code>myarrayList.joinToString(\"\") {\n  if (it == \"\") \"\\n\" else it\n}\n</code></pre>\n\n<p>which basically just returns a <code>String</code> as follows:</p>\n\n<pre><code>+23-25+125+455\n*230-293/6\n+293\n+21\n</code></pre>\n\n<p>and maybe that gives you a hint, what else might be already possible with the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/join-to-string.html\" rel=\"nofollow noreferrer\"><code>joinToString</code></a>... now still using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/join-to-string.html\" rel=\"nofollow noreferrer\"><code>joinToString</code></a> but just splitting it accordingly (clearly a workaround):</p>\n\n<pre><code>myarrayList.joinToString(\"|\") {\n  if (it == \"\") \"FORM_END\" else it\n}.splitToSequence(\"|FORM_END|\") // use split if List&lt;*&gt; is ok for you\n    .map {\n      it.splitToSequence(\"|\")   // use split if *&lt;List&lt;String&gt;&gt; is ok for you\n    }\n</code></pre>\n\n<p>This will now basically give you a sequence of sequences. Adding <code>.map { it.toList() }.forEach(::println)</code> will give the following result:</p>\n\n<pre><code>[+23, -25, +125, +455]\n[*230, -293, /6]\n[+293]\n[+21]\n</code></pre>\n\n<p>Another approach, without the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/join-to-string.html\" rel=\"nofollow noreferrer\"><code>joinToString</code></a>-workaround, but rather using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map-indexed-not-null.html\" rel=\"nofollow noreferrer\"><code>mapIndexedNotNull</code></a> with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/zip-with-next.html\" rel=\"nofollow noreferrer\"><code>zipWithNext</code></a> which prints the same as before:</p>\n\n<pre><code>myarrayList.mapIndexedNotNull { i, s -&gt; i.takeIf { s == \"\" } }\n    .let {\n      listOf(-1) + it + myarrayList.size // ugly, but we need beginning and end too, not only the delimiting indices\n    }\n    .asSequence()\n    .zipWithNext { from, upto -&gt; myarrayList.subList(from + 1, upto) }\n    .forEach(::println)\n</code></pre>\n\n<p>You may also build something with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\"><code>fold</code></a> in place... but then just be sure to also collect the last entry of the list ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 239, "user_id": 8996373, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pX-I1MzteY8/AAAAAAAAAAI/AAAAAAAAus8/UUAjx-RJP08/photo.jpg?sz=128", "display_name": "Piotr Prus", "link": "https://stackoverflow.com/users/8996373/piotr-prus"}, "edited": false, "score": 1, "creation_date": 1615901474, "post_id": 61957548, "comment_id": 117830983, "body": "This should be an accepted answer. I have added a nullable separator: fun &lt;E&gt; List&lt;E&gt;.split(separator: E?): List&lt;List&lt;E&gt;&gt;. Now, you can use it to separate list at null elements. For example: val list = listOf(1, 2, null, 4, 5, 6) list.split(null) print : [ [1, 2], [4, 5, 6] ]"}], "tags": [], "owner": {"reputation": 2004, "user_id": 1120728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b17b2ec9c96457e923d67caa582640c?s=128&d=identicon&r=PG", "display_name": "Giorgos Kylafas", "link": "https://stackoverflow.com/users/1120728/giorgos-kylafas"}, "is_accepted": false, "score": 1, "last_activity_date": 1590158575, "creation_date": 1590158575, "answer_id": 61957548, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index/61957548#61957548", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>I was searching for the same thing and I ended up creating my own extension function for <code>List</code>.</p>\n\n<pre><code>fun &lt;E&gt; List&lt;E&gt;.split(separator: E): List&lt;List&lt;E&gt;&gt; =\n    mutableListOf&lt;List&lt;E&gt;&gt;().also { result -&gt;\n        var end = -1\n        var remaining = this\n\n        while (end &lt; remaining.size) {\n            remaining = remaining.drop(end + 1)\n            end = remaining.indexOf(separator).let {\n                if (it == -1) remaining.size else it\n            }\n            result.add(remaining.subList(0, end))\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 796107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187305471d7b0fdaca6bd53470f15ee8?s=128&d=identicon&r=PG", "display_name": "Patrick McCullagh", "link": "https://stackoverflow.com/users/796107/patrick-mccullagh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3422, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1590158575, "creation_date": 1543283372, "question_id": 53491622, "link": "https://stackoverflow.com/questions/53491622/kotlin-splitting-an-arraylist-into-parts-at-more-than-one-index", "title": "Kotlin splitting an Arraylist into parts at more than one Index", "body": "<p>Say I have an an Arraylist</p>\n\n<blockquote>\n<pre><code>fun main() {\nvar myarrayList= ArrayList&lt;String&gt;()\n\nmyarrayList.add(\"+23\")\nmyarrayList.add(\"-25\")\nmyarrayList.add(\"+125\")\nmyarrayList.add(\"+455\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"*230\")\nmyarrayList.add(\"-293\")\nmyarrayList.add(\"/6\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"+293\")\nmyarrayList.add(\"\")\nmyarrayList.add(\"+21\")\n\nfor (index in 0..myarrayList.size-1){\n    print (index)\n    print (\" = \")\n    print (myarrayList.get(index))\n    print (\"\\n\")\n\n\n} }\n</code></pre>\n</blockquote>\n\n<p>I want to split it into smaller Arraylists at every index where the value = \"\". I know I can use the indexOf() and lastIndexOf to slice it but I can only get 2 slices. I need to split into multiple arrays</p>\n"}, {"tags": ["android", "view", "kotlin"], "comments": [{"owner": {"reputation": 2301, "user_id": 3448879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/y7XPi.png?s=128&g=1", "display_name": "Jairo Lozano", "link": "https://stackoverflow.com/users/3448879/jairo-lozano"}, "edited": false, "score": 0, "creation_date": 1543346115, "post_id": 53491537, "comment_id": 93882963, "body": "Well, it&#39;s not exactly a solution but for some unknown reason if I use half the actual width and height the pointer movement is reproduced at the exact position it should..."}], "answers": [{"comments": [{"owner": {"reputation": 2301, "user_id": 3448879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/y7XPi.png?s=128&g=1", "display_name": "Jairo Lozano", "link": "https://stackoverflow.com/users/3448879/jairo-lozano"}, "edited": false, "score": 0, "creation_date": 1543291133, "post_id": 53491785, "comment_id": 93854883, "body": "Thanks, I understand that and will definitely update my code to subtract half the circle radius. But my offset is far greater than that, I mean, my circle has a radius of 5px and when positioned half of the screen it ends up even outside the drawing area. I think I&#39;ll start playing with the hardcoded width and height to see if I can find any correlations on the offset..."}, {"owner": {"reputation": 2301, "user_id": 3448879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/y7XPi.png?s=128&g=1", "display_name": "Jairo Lozano", "link": "https://stackoverflow.com/users/3448879/jairo-lozano"}, "edited": false, "score": 0, "creation_date": 1546028430, "post_id": 53491785, "comment_id": 94765499, "body": "I will accept this as a correct answer since it&#39;s the right way to position the circle at the exact desired coordinates. Thanks for your time @Khalid Taha"}], "tags": [], "owner": {"reputation": 2667, "user_id": 1475574, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3yzJl.jpg?s=128&g=1", "display_name": "Khalid Taha", "link": "https://stackoverflow.com/users/1475574/khalid-taha"}, "is_accepted": true, "score": 0, "last_activity_date": 1543284737, "creation_date": 1543284737, "answer_id": 53491785, "question_id": 53491537, "link": "https://stackoverflow.com/questions/53491537/how-do-i-move-a-custom-view-through-the-whole-layout-of-android-app/53491785#53491785", "title": "How do I move a custom view through the whole layout of android app?", "body": "<p>making the x and y of the circle in the half of your screen width and height respectively will not work because your circle's x and y are the top left of your circle not the center of the circle. The solution is to subtract half of the width from the x, and half of height from y such as:</p>\n\n<pre><code>int left = screenWidth / 2 - circleWidth / 2\nint top = screenHeight / 2 - circleHeight / 2\nyourCircle.setX(left);\nyourCircle.setY(top);\n</code></pre>\n"}], "owner": {"reputation": 2301, "user_id": 3448879, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/y7XPi.png?s=128&g=1", "display_name": "Jairo Lozano", "link": "https://stackoverflow.com/users/3448879/jairo-lozano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 53491785, "answer_count": 1, "score": 0, "last_activity_date": 1543284737, "creation_date": 1543282657, "question_id": 53491537, "link": "https://stackoverflow.com/questions/53491537/how-do-i-move-a-custom-view-through-the-whole-layout-of-android-app", "title": "How do I move a custom view through the whole layout of android app?", "body": "<p>I'm trying to move a custom view (a small circle) over the whole application layout by using proportional x and y values. Let's say for example, that I want to move the circle to exactly the middle of the screen, so I'll send (0.5f, 0.5f) and then multiply each value by my current screen width and height respectively. But for some reason the circle ends up somewhere else, like (0.5, 0.5) ending up at the bottom right of the screen, just as if I where using wrong and larger resolution values, which I'm not, since I've even hardcoded my device resolution to make sure that's not the problem.</p>\n\n<p>Here is my custom view current implementation:</p>\n\n<pre><code>class CirclePointer(context: Context, attrs: AttributeSet) :View(context, attrs){\n\n override fun onDraw(canvas: Canvas?) {\n     super.onDraw(canvas)\n\n     canvas.apply {\n         this!!.drawCircle(x, y, 5f, mCirclePointerPaint)\n     }\n }\n\n private val mCirclePointerPaint = Paint().apply {\n }\n\n fun move(newX: Float, newY: Float){\n     x = newX * 1280// hardcoded width\n     y = newY * 720// hardcoded height\n\n     invalidate()\n     requestLayout()\n }// end of move\n\n override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {\n     super.onSizeChanged(w, h, oldw, oldh)\n }\n\n}\n</code></pre>\n\n<p>And my activity xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;RelativeLayout \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/heading\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;my.package.annotation_views.CirclePointer\n    android:id=\"@+id/circlePointer\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>I've just leant how to implement my own custom View so I'm pretty sure I'm missing something. So any help would be appreciated.</p>\n\n<p><strong>What I've tried</strong></p>\n\n<ul>\n<li>Setting my CirclePointer width and height to match_parent instead of wrap_content</li>\n</ul>\n\n<p><strong>Observations</strong></p>\n\n<p>I'm using Android Studio 3.2 and macOS Mojave</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["android", "kotlin", "observable", "android-livedata"], "comments": [{"owner": {"reputation": 611, "user_id": 3698170, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7bb9870ae150c48d6d20f9203675031?s=128&d=identicon&r=PG&f=1", "display_name": "FutureShocked", "link": "https://stackoverflow.com/users/3698170/futureshocked"}, "edited": false, "score": 0, "creation_date": 1607108472, "post_id": 53491279, "comment_id": 115178195, "body": "For anyone coming to this question now: I&#39;d suggest using coroutine <code>Flow</code>s instead. They&#39;re quite easy to transform into <code>LiveData</code> if you need to above the model layer."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 3698170, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7bb9870ae150c48d6d20f9203675031?s=128&d=identicon&r=PG&f=1", "display_name": "FutureShocked", "link": "https://stackoverflow.com/users/3698170/futureshocked"}, "edited": false, "score": 0, "creation_date": 1543338699, "post_id": 53492385, "comment_id": 93879064, "body": "This does look potentially useful in my specific case. The question was phrased slightly more around <i>just</i> observing livedata from a non-lifecycle owner whereas <code>MediatorLiveData</code> seems geared more towards observing <i>and</i> republishing."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 611, "user_id": 3698170, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7bb9870ae150c48d6d20f9203675031?s=128&d=identicon&r=PG&f=1", "display_name": "FutureShocked", "link": "https://stackoverflow.com/users/3698170/futureshocked"}, "edited": false, "score": 0, "creation_date": 1543367240, "post_id": 53492385, "comment_id": 93890925, "body": "You really can&#39;t observe a <code>LiveData</code> without a lifecycle. It&#39;s the whole point of <code>LiveData</code>."}], "tags": [], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "is_accepted": false, "score": 2, "last_activity_date": 1543290029, "creation_date": 1543290029, "answer_id": 53492385, "question_id": 53491279, "link": "https://stackoverflow.com/questions/53491279/using-livedata-without-lifecycleobserver/53492385#53492385", "title": "Using LiveData without LifecycleObserver", "body": "<p>You probably should be using <a href=\"https://developer.android.com/reference/android/arch/lifecycle/MediatorLiveData\" rel=\"nofollow noreferrer\">MediatorLiveData</a> instead.</p>\n\n<p><code>MediatorLiveData</code> accepts another <code>LiveData</code> as source of events by adding it to the <code>MediatorLiveData</code>.</p>\n\n<p>You could use something like,</p>\n\n<pre><code>val mediatorLiveData = MediatorLiveData&lt;Item&gt;().apply {\n    addSource(yourLiveData) {\n        // do something here\n    }\n}\n</code></pre>\n\n<p>You could also look at <a href=\"https://developer.android.com/reference/android/arch/lifecycle/Transformations\" rel=\"nofollow noreferrer\">Transformations</a>.</p>\n\n<p><code>Transformations</code> has methods such as <code>Transformation.map()</code> and <code>Transformation.switchMap()</code> which simply uses <code>MediatorLiveData</code> under the hood.</p>\n"}], "owner": {"reputation": 611, "user_id": 3698170, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a7bb9870ae150c48d6d20f9203675031?s=128&d=identicon&r=PG&f=1", "display_name": "FutureShocked", "link": "https://stackoverflow.com/users/3698170/futureshocked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543290029, "creation_date": 1543280123, "question_id": 53491279, "link": "https://stackoverflow.com/questions/53491279/using-livedata-without-lifecycleobserver", "title": "Using LiveData without LifecycleObserver", "body": "<p>I'm writing an app which is (attempting) to adhere to the MVVM design pattern. I'd like to observe changes to the model layer from other parts of that layer. For example</p>\n\n<p>Let's say I'm exposing a list of objects from my database using room:</p>\n\n<pre><code>@Dao\ninterface MyDao {\n    @Query(\"SELECT * FROM myTable\")\n    fun getAllElements(): LiveData&lt;List&lt;Element&gt;&gt;\n}\n</code></pre>\n\n<p>I'd like to be able to observe changes like I normally would using a lifecycle owner using <code>LiveData.observeForever().</code> Something like:</p>\n\n<pre><code>class BusinessLogicPartOfTheModel(private val myDao: MyDao) {\n    private var allElements = listOf&lt;Element&gt;()\n\n    init {\n        myDao.getAllElements().observeForever { observedElements -&gt;\n            allElements = observedElements\n        }\n}\n</code></pre>\n\n<p>However, I'm finding that if I register an observer like that <em>as well as</em> a more standard observer in a ViewModel and Fragment like this:</p>\n\n<pre><code>class MyViewModel(private val myDao: MyDao) : ViewModel() {\n    fun getAllElements(): LiveData&lt;List&lt;Elements&gt;&gt; {\n        myDao.getAllElements()\n    }\n}\n\nclass MyFragment : Fragment() {\n    private val myDao /* initialized here */\n    private val myViewModel /* initialized here */\n    private val logic = BusinessLogicPartOfTheModel(myDao)\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        val obs = Observer&lt;List&lt;Element&gt;&gt; {\n             // do a thing\n        }\n        myViewModel.getAllElements.observe(viewLifeCycleOwner, obs)\n    }\n}\n</code></pre>\n\n<p>Only the observer in the fragment is called, and not the observer in the business logic object. I can successfully observe updates in the fragment and pass the events back down to the business logic, but that seems like an incredibly unnecessary level of indirection. Am I missing a step here or is this just unlikely to function the way I want it to?</p>\n"}, {"tags": ["kotlin", "concurrency", "android-lifecycle", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1543312267, "creation_date": 1543312267, "answer_id": 53496896, "question_id": 53490674, "link": "https://stackoverflow.com/questions/53490674/globalscope-vs-lifecycleownercoroutinescope/53496896#53496896", "title": "GlobalScope vs LifecycleOwner:CoroutineScope", "body": "<p>The <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.channels/produce.html\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n\n<blockquote>\n  <p>The running coroutine is cancelled when its receive channel is cancelled.</p>\n</blockquote>\n\n<p>Additionally, it states</p>\n\n<blockquote>\n  <p><strong>Note: This is an experimental api.</strong> Behaviour of producers that work as children in a parent scope with respect to cancellation and error handling may change in the future.</p>\n</blockquote>\n\n<p>Conclusion: the behavior when the parent scope is cancelled is unspecified and liable to change in the future.</p>\n\n<p>This is why it's the best option to use <code>GlobalScope</code> for the producer and use the returned <code>ReceiveChannel</code> to explicitly control the lifecycle. The channel won't get automatically closed/cancelled.</p>\n"}], "owner": {"reputation": 1576, "user_id": 1163940, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pvAaY.jpg?s=128&g=1", "display_name": "xst", "link": "https://stackoverflow.com/users/1163940/xst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 53496896, "answer_count": 1, "score": 2, "last_activity_date": 1543312267, "creation_date": 1543275326, "question_id": 53490674, "link": "https://stackoverflow.com/questions/53490674/globalscope-vs-lifecycleownercoroutinescope", "title": "GlobalScope vs LifecycleOwner:CoroutineScope", "body": "<p>assuming that CoroutineScope is implemented by some lifecycle-aware component like <code>Presenter</code>.\nwhen is it preferable to use GlobalScope.produce vs CoroutineScope.produce; </p>\n\n<pre><code>interface IPresenter, CoroutineScope {\n  fun state(): ReceiveChannel&lt;Event&gt;\n}\n\nclass Presenter(\n  override val coroutineContext: CoroutineContext\n): IPresenter, DefaultLifecycleObserver {\n  fun state(): ReceiveChannel&lt;Event&gt; = GlobalScope.produce {\n    send( SomeEvent() )\n  }\n\n  fun someOperation() = produce {\n    send( SomeEvent() )\n  }\n\n  override fun onDestroy(owner: LifecycleOwner) {\n    coroutineContext.cancel()\n    owner.lifecycle.removeObserver(this)\n  } \n}\n</code></pre>\n\n<p>when is the ReceiveChannel returned by <code>state()</code> cancelled? is this a memory leak?</p>\n"}, {"tags": ["kotlin", "android-room", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543274632, "post_id": 53490553, "comment_id": 93851299, "body": "But I thought room would never return a null object to LiveData observers? It is a very typical use case where I have a Room dao return a LiveData for a query. Here is the query in fact: <code>@Query(&quot;SELECT * FROM cats LIMIT 1&quot;)</code>"}, {"owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "reply_to_user": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543274911, "post_id": 53490553, "comment_id": 93851387, "body": "I can&#39;t speak to the Room library specifically, but perhaps the <code>LIMIT 1</code> causes it to return a &quot;Cat&quot; rather than a list of cats? Not sure what the implied type of <code>it</code> is in your use case. If that&#39;s the case though, then I would think it may be normal to get a null initial value if it returns no result. Looking at the overview <a href=\"https://developer.android.com/topic/libraries/architecture/livedata#use_livedata_with_room\" rel=\"nofollow noreferrer\">here</a>, I don&#39;t see any indication that a non-null value is guaranteed -- instead all of the observers declare the parameter type as nullable."}, {"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 1, "creation_date": 1543275930, "post_id": 53490553, "comment_id": 93851675, "body": "Yeah, it looks like the first time Room returns, if there is nothing, then it&#39;s null."}], "tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 2, "last_activity_date": 1543274345, "creation_date": 1543274345, "answer_id": 53490553, "question_id": 53490395, "link": "https://stackoverflow.com/questions/53490395/livedata-is-passing-null-to-observer/53490553#53490553", "title": "LiveData is passing null to observer", "body": "<p><code>LiveData</code> definitely allows <code>null</code> to be sent through to the observers if it's specifically posted. You can see that the method signature for <code>android.arch.lifecycle.Observer.onChanged</code> explicitly marks the data parameter as <code>@Nullable</code>. </p>\n\n<p>If you don't wish to handle a null type, you can simply use the <code>?</code> operator to safely handle it:</p>\n\n<pre><code>myViewModel.catLiveData.observe(this, Observer { it?.let(::doWork) })\n</code></pre>\n\n<p>Alternatively, you could create your own custom <code>Observer</code> that handles it for you, e.g. </p>\n\n<pre><code>class Observer2&lt;T&gt;(private val block: (T) -&gt; Unit) : Observer&lt;T&gt; {\n    override fun onChanged(data: T?) {\n        data?.let(block)\n    }\n}\n</code></pre>\n\n<p>Which would allow you to write:</p>\n\n<pre><code>myViewModel.catLiveData.observe(this, Observer2(::doWork))\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2410, "favorite_count": 0, "accepted_answer_id": 53490553, "answer_count": 1, "score": 0, "last_activity_date": 1543274345, "creation_date": 1543273231, "question_id": 53490395, "link": "https://stackoverflow.com/questions/53490395/livedata-is-passing-null-to-observer", "title": "LiveData is passing null to observer", "body": "<p>I have the following code</p>\n\n<pre><code>myViewModel.catLiveData.observe(this,Observer{\n  if(it==null){\n      Log.d(TAG,\"the object returned is null! How is that possible?\")\n  }else{ doWork(it) }\n})\n</code></pre>\n\n<p>How is it possible that I am getting null? I thought LiveData is not supposed to pass null to the observer? This LiveData is listening to Room Entity, by the way.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 2, "last_activity_date": 1543294101, "creation_date": 1543294101, "answer_id": 53492932, "question_id": 53489963, "link": "https://stackoverflow.com/questions/53489963/class-subclass-type-with-a-public-method/53492932#53492932", "title": "Class subclass type with a public method", "body": "<p>Your question is why does the following code appear to call a public method <code>ViewHolder</code> within <code>RecylcerView</code>.  Here is your code, with a slight rename to make things clearer:</p>\n\n<pre><code>class MyClass(itemView: View) : RecyclerView.ViewHolder(itemView)\n</code></pre>\n\n<p>And what is missing from your description is showing the outer class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class RecyclerView {                           // outer/containing class\n    static class ViewHolder {                  // nested class\n         public ViewHolder(ViewItem view) {    // constructor\n              // ... constructor body\n         }\n    }\n}\n</code></pre>\n\n<p>Now looking at that nesting, to talk about the <code>ViewHolder</code> class you need to reference it as <code>RecyclerView.ViewHolder</code>.  Then if you want to construct an instance of that you must add the constructor parameters, for example in Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>new RecyclerView.ViewHolder(view);\n</code></pre>\n\n<p>In Kotin when you descend from a class, your constructor must call the super constructor and the short hand for that is to do it in the declaration.</p>\n\n<pre><code>class MyClass(ViewItem view) : RecyclerView.ViewHolder(view) {\n    // ...class body\n}\n</code></pre>\n\n<p>This says <code>MyClass</code> descends from <code>ViewHolder</code> which is a nested class of <code>RecyclerView</code> and the constructor parameter coming into <code>MyClass</code> constructor is being passed into the super constructor of <code>ViewHolder</code>.</p>\n\n<p>This is the same as Java:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass extends RecyclerView.ViewHolder {\n    public MyClass(ViewItem view) {\n        super(view);\n    }\n}\n</code></pre>\n\n<p>You can also import the nested static class directly, then drop the <code>RecyclerView</code> prefix, but it is a bit clearer to leave it.</p>\n"}], "owner": {"reputation": 6331, "user_id": 1180728, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/084d4d7d1538d5178043fdaccee79c5a?s=128&d=identicon&r=PG", "display_name": "Blazej SLEBODA", "link": "https://stackoverflow.com/users/1180728/blazej-sleboda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53492932, "answer_count": 1, "score": 0, "last_activity_date": 1543294101, "creation_date": 1543270634, "question_id": 53489963, "link": "https://stackoverflow.com/questions/53489963/class-subclass-type-with-a-public-method", "title": "Class subclass type with a public method", "body": "<p>I don't understand why in Subclass definition a public method is involved</p>\n\n<pre><code>class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n</code></pre>\n\n<p><strong>Source code of the RecyclerView.ViewHolder</strong></p>\n\n<pre><code>public abstract static class ViewHolder {\n\n\n    public ViewHolder(View itemView) {\n        if (itemView == null) {\n            throw new IllegalArgumentException(\"itemView may not be null\");\n        }\n        this.itemView = itemView;\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room", "android-architecture-components"], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543276081, "post_id": 53489388, "comment_id": 93851712, "body": "thanks for replying. Your answer should definitely work, but I found a simpler solution, which I am providing as an answer as well. Thanks! +1"}, {"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543611010, "post_id": 53489388, "comment_id": 93995247, "body": "I finally got a chance to test this code and it actually doesn&#39;t work. Here is the version that works: <code>var toys = toysField \\*\\n*&#47;     private set(value){  \\*\\n*&#47;         toysField = value  \\*\\n*&#47;     }  \\*\\n*&#47;     get()=toysField</code>"}, {"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "reply_to_user": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543611801, "post_id": 53489388, "comment_id": 93995527, "body": "What part does not work and how does adding the getter change that?"}], "tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 2, "last_activity_date": 1543267923, "creation_date": 1543267923, "answer_id": 53489388, "question_id": 53489171, "link": "https://stackoverflow.com/questions/53489171/how-to-make-a-setter-private-in-kotlin-for-non-final-variables/53489388#53489388", "title": "How to make a setter private in Kotlin for non-final variables?", "body": "<p>You can do this by using the property of the constructor as backing field for the <code>toys</code> property:</p>\n\n<pre><code>data class Cat(val type: String, private var toysField: Int = 3 ):Animal(){\n\n    var toys = toysField\n    private set(value){\n        toysField = value\n    }\n\n    fun addQuota(){toys += 4}\n\n}\n\nabstract class Animal\n</code></pre>\n\n<p>I hope this works with room.</p>\n\n<p>Source <a href=\"https://discuss.kotlinlang.org/t/private-setter-for-var-in-primary-constructor/3640/10\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/private-setter-for-var-in-primary-constructor/3640/10</a></p>\n"}, {"comments": [{"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 0, "creation_date": 1543323568, "post_id": 53490565, "comment_id": 93869573, "body": "it works, but it&#39;s not really idiomatic. the solution with <code>private set</code> is preferred"}, {"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "reply_to_user": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "edited": false, "score": 1, "creation_date": 1543343404, "post_id": 53490565, "comment_id": 93881628, "body": "Hmmm. If the simplest solution is not idiomatic then the idiom is what&#39;s wanting not the solution, wouldn&#39;t you say? Unless there is a better explanation for why I should use the convoluted <code>toysField</code> and then <code>toys</code> and then <code>set(value)</code>"}], "tags": [], "owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "is_accepted": false, "score": 0, "last_activity_date": 1543274398, "creation_date": 1543274398, "answer_id": 53490565, "question_id": 53489171, "link": "https://stackoverflow.com/questions/53489171/how-to-make-a-setter-private-in-kotlin-for-non-final-variables/53490565#53490565", "title": "How to make a setter private in Kotlin for non-final variables?", "body": "<p>It turns out the following works:</p>\n\n<pre><code>data class Cat(private var toys:Int=3, val type:String):Animal(){\n    ...\n    fun getToys()=toys\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543521963, "post_id": 53542746, "comment_id": 93960089, "body": "I like this one, except it doesn&#39;t work for data class"}, {"owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "reply_to_user": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543561880, "post_id": 53542746, "comment_id": 93971255, "body": "I believe the only difference between <code>data</code> class and usual that data class have inbuilt <code>toString</code> and <code>equals</code> methods, which you can generate via IDE. Moreover Animal class also can&#39;t be data class"}, {"owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "edited": false, "score": 0, "creation_date": 1543611620, "post_id": 53542746, "comment_id": 93995449, "body": "Try it with room without <code>data</code>. Android studio still complains."}], "tags": [], "owner": {"reputation": 2904, "user_id": 1159507, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e23948e15e918c710ec34483c65d1b93?s=128&d=identicon&r=PG", "display_name": "anber", "link": "https://stackoverflow.com/users/1159507/anber"}, "is_accepted": false, "score": 0, "last_activity_date": 1543506432, "creation_date": 1543506432, "answer_id": 53542746, "question_id": 53489171, "link": "https://stackoverflow.com/questions/53489171/how-to-make-a-setter-private-in-kotlin-for-non-final-variables/53542746#53542746", "title": "How to make a setter private in Kotlin for non-final variables?", "body": "<p>I saw that you already have found solution that satisfy you, but maybe you can consider this one:</p>\n\n<pre><code>class Cat(toys: Int = 3, val type: String) : Animal() {\n\n    var toys = toys\n        private set\n\n    fun addQuota() {\n        toys += 4\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 8549166, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ce5d0ac4f0d1d4a98871f90d51d4f662?s=128&d=identicon&r=PG&f=1", "display_name": "salyela", "link": "https://stackoverflow.com/users/8549166/salyela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1543506432, "creation_date": 1543266891, "question_id": 53489171, "link": "https://stackoverflow.com/questions/53489171/how-to-make-a-setter-private-in-kotlin-for-non-final-variables", "title": "How to make a setter private in Kotlin for non-final variables?", "body": "<p>I need to create a data class like so</p>\n\n<pre><code>data class Cat(var toys:Int=3, val type:String):Animal(){\n    ...\n}\n</code></pre>\n\n<p>Animal is an abstract class with fields for eyes and legs,etc.</p>\n\n<p>I don't want callers to be able to set toys directly. But I want to be able to do some work with toys such as </p>\n\n<pre><code>fun addQuota(){toys+=4}\n</code></pre>\n\n<p>how do I complish this cleanly? I still want a public getter, a private settter, but I don't want the variable to be final. And also, this data class is an Entity for Room.</p>\n"}, {"tags": ["tomcat", "kotlin", "ktor"], "comments": [{"owner": {"reputation": 125, "user_id": 2573467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7107babe18745c230f483334837b6ea5?s=128&d=identicon&r=PG", "display_name": "OverMind", "link": "https://stackoverflow.com/users/2573467/overmind"}, "edited": false, "score": 0, "creation_date": 1543272507, "post_id": 53487260, "comment_id": 93850577, "body": "The problem seems to happen when the app is not the root application, and is in a folder inside webapps. When i try in local, is the root (and only) application, but not in the remote server"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11264999, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mQj6x1E1VBU/AAAAAAAAAAI/AAAAAAAAwoA/ygNQDICg-mk/photo.jpg?sz=128", "display_name": "&#193;lvaro V", "link": "https://stackoverflow.com/users/11264999/%c3%81lvaro-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1553680548, "last_edit_date": 1553680548, "creation_date": 1553677869, "answer_id": 55373415, "question_id": 53487260, "link": "https://stackoverflow.com/questions/53487260/ktor-and-remote-tomcat-deploying/55373415#55373415", "title": "Ktor and remote tomcat deploying", "body": "<p>Ktor people is improving now this functionality (<a href=\"https://github.com/ktorio/ktor/issues/738\" rel=\"nofollow noreferrer\">https://github.com/ktorio/ktor/issues/738</a>), but is not implemented yet.\nTo solve this problem, you need to add the name of the FILEWAR.war, before of compile, on the routes:</p>\n\n<pre><code>route(FILEWAR) {\n    get(\"/foo\") { ...\n</code></pre>\n\n<p>Solution: <a href=\"https://github.com/ktorio/ktor/issues/487\" rel=\"nofollow noreferrer\">https://github.com/ktorio/ktor/issues/487</a></p>\n"}], "owner": {"reputation": 125, "user_id": 2573467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7107babe18745c230f483334837b6ea5?s=128&d=identicon&r=PG", "display_name": "OverMind", "link": "https://stackoverflow.com/users/2573467/overmind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553680548, "creation_date": 1543258074, "question_id": 53487260, "link": "https://stackoverflow.com/questions/53487260/ktor-and-remote-tomcat-deploying", "title": "Ktor and remote tomcat deploying", "body": "<p>Has someone successfully deployed a Ktor project in a remote Tomcat server?</p>\n\n<p>I am working on a project, and when i try it in local deployment for testing everything is ok, but when i try to generate the .war and deploy on my remote tomcat server, i always get a 404 when trying to access the servlet.</p>\n\n<p>The deployment seems to be ok, everything works without errors, bu i can't communicate with my servlet.</p>\n\n<p>I have read a lot of guides, but all the people try it in local.</p>\n\n<p>Regards</p>\n"}, {"tags": ["android", "kotlin", "google-play-services", "sms-verification"], "answers": [{"comments": [{"owner": {"reputation": 1804, "user_id": 1016367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234b685ab36dc50727bfcfd3b2a6b019?s=128&d=identicon&r=PG", "display_name": "Denis Nek", "link": "https://stackoverflow.com/users/1016367/denis-nek"}, "edited": false, "score": 0, "creation_date": 1544832455, "post_id": 53538498, "comment_id": 94428334, "body": "Thanks! You saved me so much debugging time"}, {"owner": {"reputation": 1804, "user_id": 1016367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/234b685ab36dc50727bfcfd3b2a6b019?s=128&d=identicon&r=PG", "display_name": "Denis Nek", "link": "https://stackoverflow.com/users/1016367/denis-nek"}, "edited": false, "score": 0, "creation_date": 1544832875, "post_id": 53538498, "comment_id": 94428386, "body": "Official doc said: &gt;Be no longer than 140 bytes <a href=\"https://developers.google.com/identity/sms-retriever/verify\" rel=\"nofollow noreferrer\">developers.google.com/identity/sms-retriever/verify</a>"}, {"owner": {"reputation": 480, "user_id": 9173778, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d1287388b32653f2caccbe8416b8bc14?s=128&d=identicon&r=PG&f=1", "display_name": "Dror Bar", "link": "https://stackoverflow.com/users/9173778/dror-bar"}, "edited": false, "score": 0, "creation_date": 1559032735, "post_id": 53538498, "comment_id": 99281858, "body": "140 bytes is a deceptively short message. And it&#39;s not like we can easily measure that, you kind of need to experiment"}], "tags": [], "owner": {"reputation": 2060, "user_id": 313870, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eeb6068005e32b9bc1c57051ac3e2fa5?s=128&d=identicon&r=PG", "display_name": "Demonick", "link": "https://stackoverflow.com/users/313870/demonick"}, "is_accepted": true, "score": 3, "last_activity_date": 1543492527, "creation_date": 1543492527, "answer_id": 53538498, "question_id": 53487081, "link": "https://stackoverflow.com/questions/53487081/sms-verification-with-android-smsretrieverclient-not-parsing-message/53538498#53538498", "title": "SMS verification with Android SmsRetrieverClient not parsing message", "body": "<p>The solution was to shorten the message, although it seemed to not be over 140 bytes. After making the SMS text to ~30 characters auto-read of SMS works without other changes.</p>\n"}], "owner": {"reputation": 2060, "user_id": 313870, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/eeb6068005e32b9bc1c57051ac3e2fa5?s=128&d=identicon&r=PG", "display_name": "Demonick", "link": "https://stackoverflow.com/users/313870/demonick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2038, "favorite_count": 0, "accepted_answer_id": 53538498, "answer_count": 1, "score": 4, "last_activity_date": 1543492527, "creation_date": 1543257216, "question_id": 53487081, "link": "https://stackoverflow.com/questions/53487081/sms-verification-with-android-smsretrieverclient-not-parsing-message", "title": "SMS verification with Android SmsRetrieverClient not parsing message", "body": "<p>Tried to implement SMS auto-reading for verification following the steps here:\n<a href=\"https://developers.google.com/identity/sms-retriever/request\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sms-retriever/request</a></p>\n\n<p>1) declared </p>\n\n<pre><code>lateinit var smsRetrieverClient: SmsRetrieverClient\nprivate lateinit var smsReceiver: SmsBrReceiver\n</code></pre>\n\n<p>2) Initialised and registered them in login Activity onCreate</p>\n\n<pre><code>smsRetrieverClient = SmsRetriever.getClient(this)\nsmsReceiver = SmsBrReceiver()\n\nval intentFilter = IntentFilter()\nintentFilter.addAction(SmsRetriever.SMS_RETRIEVED_ACTION)\napplicationContext.registerReceiver(smsReceiver, intentFilter)\n\nval task = smsRetrieverClient.startSmsRetriever()\ntask.addOnSuccessListener(OnSuccessListener&lt;Void&gt; {\n    smsReceiver.setTimeout()\n})\ntask.addOnFailureListener(OnFailureListener { e -&gt;\n    showCodeInput()\n})\n</code></pre>\n\n<p>3) Made BroadcastReceiver for SmsRetriever</p>\n\n<pre><code>inner class SmsBrReceiver : BroadcastReceiver() {\n    var h = Handler()\n    var r: Runnable = Runnable { doTimeout() }\n\n    fun setTimeout() {\n        h.postDelayed(r, 600000)\n    }\n\n    override fun onReceive(context: Context, intent: Intent?) {\n\n        val action = intent.action\n\n        if (SmsRetriever.SMS_RETRIEVED_ACTION == action) {\n\n            cancelTimeout()\n            val extras = intent.extras\n            val status = extras!!.get(SmsRetriever.EXTRA_STATUS) as Status\n            when (status.statusCode) {\n                CommonStatusCodes.SUCCESS -&gt; { // not called\n</code></pre>\n\n<p>4) The SMS comes in format </p>\n\n<pre><code>\\u200b\\u200bPlease enter code: 1111 /appKeyXf56\n</code></pre>\n\n<p>And the app key at the end of SMS matches what the installed app signing key gives for generation as described here:\n<a href=\"https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sms-retriever/verify#computing_your_apps_hash_string</a></p>\n\n<p>CommonStatusCodes.SUCCESS does not get called after SMS is received, but CommonStatusCodes.TIMEOUT does get called after 5 minutes.</p>\n\n<p>What is missing? Just in case gradle declarations for phone auth are:</p>\n\n<pre><code>com.google.android.gms:play-services-auth-api-phone:16.0.0\nclasspath \"com.google.gms:google-services:4.2.0\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1543257206, "post_id": 53486690, "comment_id": 93843767, "body": "Can you call <code>setContentView </code> before <code>setupSectionsAdapter</code>?"}, {"owner": {"reputation": 57, "user_id": 4084070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2015c1070e631c46f019c6b87d186e11?s=128&d=identicon&r=PG&f=1", "display_name": "Manbbo", "link": "https://stackoverflow.com/users/4084070/manbbo"}, "reply_to_user": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 0, "creation_date": 1543272430, "post_id": 53486690, "comment_id": 93850540, "body": "Hi Ali, I did it but doesn&#39;t seem to be the problem. I still not having the tabs shown :("}], "owner": {"reputation": 57, "user_id": 4084070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2015c1070e631c46f019c6b87d186e11?s=128&d=identicon&r=PG&f=1", "display_name": "Manbbo", "link": "https://stackoverflow.com/users/4084070/manbbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543255430, "creation_date": 1543255430, "question_id": 53486690, "link": "https://stackoverflow.com/questions/53486690/problem-with-tabs-not-being-added-to-page", "title": "Problem with tabs not being added to Page", "body": "<p><br>I'm creating a project where I need to get 5 tabs to be shown at the front page of my app and navigate through them. \n<br>I was following this tutorial from this two links and adapting at my way <a href=\"https://medium.com/@eijaz/getting-started-with-tablayout-in-android-kotlin-bb7e21783761\" rel=\"nofollow noreferrer\">https://medium.com/@eijaz/getting-started-with-tablayout-in-android-kotlin-bb7e21783761</a> and <a href=\"https://www.youtube.com/watch?v=bNpWGI_hGGg&amp;t=68s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=bNpWGI_hGGg&amp;t=68s</a> (adapting this one to Kotlin), but when I compile and run it, it just shows the screen without the tabs, like a blank page. How can I proceed? I really couldn't find the error.</p>\n\n<p><br></p>\n\n<h2>This is the Adapter I used</h2>\n\n<p>\n<br></p>\n\n<pre><code>class SectionsAdapter(fm: FragmentManager?) : FragmentPagerAdapter(fm) {\n    private val listOfTabs = mutableListOf&lt;Fragment&gt;()\n\n    private val listOfTabsTitle = mutableListOf&lt;String&gt;()\n\n    fun addFragment(fragment: Fragment, title: String ) {\n        listOfTabs.add(fragment)\n        listOfTabsTitle.add(title)\n    }\n\n    override fun getPageTitle(position: Int): CharSequence {\n        return listOfTabsTitle[position]\n    }\n\n    override fun getItem(position: Int): Fragment? {\n        return listOfTabs[position]\n    }\n\n    override fun getCount(): Int {\n        return listOfTabs.size\n    }\n</code></pre>\n\n<p></p>\n\n<p><br></p>\n\n<h2>This is what I have into the main class</h2>\n\n<p><br></p>\n\n<pre><code>private fun setupSectionsAdapter() {\n        var adapter = SectionsAdapter(supportFragmentManager)\n\n        with(adapter) {\n            addFragment(Tab1Fragment(), \"Tab1\")\n            addFragment(Tab2Fragment(), \"Tab2\")\n            addFragment(Tab3Fragment(), \"Tab3\")\n            addFragment(Tab4Fragment(), \"Tab4\")\n            addFragment(Tab5Fragment(), \"Tab5\")\n        }\n\n        container.adapter = adapter\n        tabs.setupWithViewPager(container as ViewPager)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setupSectionsAdapter()\n        container.addOnPageChangeListener(TabLayout.TabLayoutOnPageChangeListener(tabs))\n        tabs.addOnTabSelectedListener(TabLayout.ViewPagerOnTabSelectedListener(container))\n\n        setContentView(R.layout.activity_list_of_items)    \n    }\n</code></pre>\n\n<p></p>\n\n<p><br></p>\n\n<h2>The fragment class</h2>\n\n<p><br></p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater?.inflate(R.layout.fragment_tab1, container, false)\n\n        return view\n    }\n\n    companion object {\n        /**\n         * The fragment argument representing the section number for this\n         * fragment.\n         */\n        private val ARG_SECTION_NUMBER = \"section_number\"\n\n        /**\n         * Returns a new instance of this fragment for the given section\n         * number.\n         */\n        fun newInstance(sectionNumber: Int): Tab1Fragment {\n            val fragment = Tab1Fragment()\n            val args = Bundle()\n            args.putInt(ARG_SECTION_NUMBER, sectionNumber)\n            fragment.arguments = args\n            return fragment\n        }\n    }\n</code></pre>\n\n<p></p>\n\n<p><br></p>\n\n<h2>This is the XML for the fragment</h2>\n\n<p><br></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\" android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:text=\"AJASDAJSD\"/&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p><br></p>\n\n<h2>This is the XML for the page I'm trying to implement the tabs</h2>\n\n<p><br></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/main_content\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:fitsSystemWindows=\"true\"\n    tools:context=\".ListOfItems\"&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:id=\"@+id/appbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:paddingTop=\"@dimen/appbar_padding_top\"\n        android:theme=\"@style/AppTheme.AppBarOverlay\"&gt;\n\n\n\n        &lt;android.support.design.widget.TabLayout\n            android:id=\"@+id/tabs\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"&gt;\n        &lt;/android.support.design.widget.TabLayout&gt;\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n\n    &lt;android.support.v4.view.ViewPager\n        android:id=\"@+id/container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>Do you know what am I missing? Upfront, sorry if it is doubled, but I couldn't find anything similar to my problem here.\nThank you!</p>\n"}, {"tags": ["android", "scroll", "kotlin", "bottomnavigationview"], "comments": [{"owner": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1543255527, "post_id": 53486621, "comment_id": 93843046, "body": "why not using the &#39;setUserVisibleHint&#39; method in each fragment and scroll in there?"}, {"owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "reply_to_user": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1543257146, "post_id": 53486621, "comment_id": 93843734, "body": "Hi @Raykud I think that will bring more code or you are thinkin&#39; better than me. To do that I would have to put BottomNavigation in each fragment_layout and create 3 similiar function... What you think?"}, {"owner": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1543259687, "post_id": 53486621, "comment_id": 93844944, "body": "no, on each fragment you will only have to override that setUserVisibleHint method and put the &#39;scrollTo&#39; call as the scrolls are in the fragment already.. that setUserVisibleHint method gets called when the fragment gets visible to the user."}, {"owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "reply_to_user": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1543267228, "post_id": 53486621, "comment_id": 93848369, "body": "@Raykud Ok, and then what i put next to &quot; R.id.topo -&gt; {&quot;. I&#39;m sorry, I&#39;m confused now."}, {"owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "reply_to_user": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1543313959, "post_id": 53486621, "comment_id": 93864059, "body": "Hi @Raykud I&#39;ve tried to call setUserVisibleHint inside R.id.topo, but nothing worked. There is another way to call it? Thank you."}], "owner": {"reputation": 529, "user_id": 9866847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efcab95a4db46c1cc923f4f19ba153e7?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Relvas", "link": "https://stackoverflow.com/users/9866847/pedro-relvas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543266639, "creation_date": 1543255131, "last_edit_date": 1543266639, "question_id": 53486621, "link": "https://stackoverflow.com/questions/53486621/button-in-bottomnavgationview-doesnt-work-properly", "title": "Button in BottomNavgationView doesn&#39;t work properly", "body": "<p>I have a <code>BottomNavigationView</code> with 3 buttons/items. The middle one makes my 3 <code>NestedScrollView</code> (each one in each fragment of a <code>viewpager</code>) scroll to the top of the view. Until here everything is ok. The problem beggins when I check all the three, because suddenly the button stops react. I tryed the debuggin and it passes all the steps... I don't know what the problem is, can you help me? Here's the code:</p>\n\n<pre><code>private val mOnNavigationItemSelectedListener = BottomNavigationView.OnNavigationItemSelectedListener { item -&gt;\n    when (item.itemId) {\n        R.id.lista_utentes -&gt; {\n            onBackPressed()\n            return@OnNavigationItemSelectedListener true\n        }\n\n        R.id.topo -&gt; {\n            when (viewpager_tabs_tipo.currentItem) {\n                0 -&gt; container_feridas.scrollTo(0, 0)\n                1 -&gt; container_sinais.scrollTo(0, 0)\n                2 -&gt; container_analises.scrollTo(0, 0)\n            }\n\n        }\n        R.id.new_foto -&gt; {\n            return@OnNavigationItemSelectedListener true\n        }\n    }\n    false\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1543256861, "last_edit_date": 1543256861, "creation_date": 1543255741, "answer_id": 53486768, "question_id": 53486239, "link": "https://stackoverflow.com/questions/53486239/kotlin-deprecated-companion-instance/53486768#53486768", "title": "Kotlin deprecated companion instance", "body": "<p>The <code>@Deprecated</code> annotation is placed as an intermediate solution to avoid breaking binary compatibility when a compiler bug was fixed. The field wasn't supposed to be generated as public when the companion object is private, but due to an oversight it was. In Kotlin 1.4, it will be marked as private.</p>\n\n<p>See <a href=\"https://youtrack.jetbrains.com/issue/KT-11567\" rel=\"nofollow noreferrer\">this issue</a> for more information.</p>\n"}], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 53486768, "answer_count": 1, "score": 2, "last_activity_date": 1543256861, "creation_date": 1543253429, "last_edit_date": 1543255052, "question_id": 53486239, "link": "https://stackoverflow.com/questions/53486239/kotlin-deprecated-companion-instance", "title": "Kotlin deprecated companion instance", "body": "<p>When creating a <code>private companion object</code> in Kotlin, why is the  <code>Companion</code> static variable marked as <code>@Deprecated public</code> in the bytecode? Is that just a workaround to \"simulate\" a <code>private</code> behaviour discouraging developers from using that field (since a public companion object doesn't get marked as deprecated)?</p>\n\n<p>Example:</p>\n\n<h2>Kotlin</h2>\n\n<pre><code>class MyClassWithCompanion {\n    private companion object {\n        private val FOO = \"FOO\"\n    }\n}\n</code></pre>\n\n<h2>Bytecode</h2>\n\n<pre><code>// DEPRECATED\n// access flags 0x20019\npublic final static LMyClassWithCompanion$Companion; Companion\n@Ljava/lang/Deprecated;()\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-volley", "kotlin-coroutines", "coroutine"], "answers": [{"comments": [{"owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "edited": false, "score": 0, "creation_date": 1543261313, "post_id": 53486222, "comment_id": 93845623, "body": "how can I use that in the context of updating the textView.text? Let&#39;s say in the onclick listener in my example above, how will I be able to use this suspend function to get the data and update the textview?"}, {"owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "reply_to_user": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "edited": false, "score": 1, "creation_date": 1543263147, "post_id": 53486222, "comment_id": 93846512, "body": "Extended my answer with an application of the <code>getData()</code> function"}, {"owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "edited": false, "score": 0, "creation_date": 1543264050, "post_id": 53486222, "comment_id": 93846911, "body": "That worked, thanks Rene. Does that mean that I have to implement coroutinescope in every activity that I&#39;m going to use coroutine with?"}, {"owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "reply_to_user": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "edited": false, "score": 1, "creation_date": 1543264495, "post_id": 53486222, "comment_id": 93847119, "body": "Yes you have. That is the reason, why a base class (see link) is useful."}], "tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 11, "last_activity_date": 1543263102, "last_edit_date": 1543263102, "creation_date": 1543253345, "answer_id": 53486222, "question_id": 53486087, "link": "https://stackoverflow.com/questions/53486087/how-can-i-use-coroutines-with-volley-so-that-my-code-can-be-written-like-sychron/53486222#53486222", "title": "How can I use coroutines with volley so that my code can be written like sychronous?", "body": "<p>You can use <code>suspendCoroutine</code>, see <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/suspend-coroutine.html\" rel=\"noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/suspend-coroutine.html</a></p>\n\n<pre><code>suspend fun getData() = suspendCoroutine&lt;String&gt; { cont -&gt;\n    val queue = Volley.newRequestQueue(this)\n    val url = \"http://www.google.com/\"\n\n    val stringRequest = StringRequest(Request.Method.GET, url,\n        Response.Listener&lt;String&gt; { response -&gt;       \n            cont.resume(\"Response is: ${response.substring(0, 500)}\")      \n        },\n        Response.ErrorListener { cont.resume(\"Something went wrong!\") })\n\n    queue.add(stringRequest)\n}\n</code></pre>\n\n<p>You should implement your activity like described here: <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md#structured-concurrency-lifecycle-and-coroutine-parent-child-hierarchy\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md#structured-concurrency-lifecycle-and-coroutine-parent-child-hierarchy</a></p>\n\n<pre><code>class MainActivity: AppCompatActivity(), CoroutineScope {\n    protected lateinit var job: Job\n    override val coroutineContext: CoroutineContext \n        get() = job + Dispatchers.Main\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        job = Job()\n        ...\n        button.setOnClickListener({\n             launch {\n                 val data = getData()                     \n                 textView.text = data\n             }\n         })\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        job.cancel()\n    } \n}\n</code></pre>\n"}], "owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3260, "favorite_count": 3, "accepted_answer_id": 53486222, "answer_count": 1, "score": 7, "last_activity_date": 1613743471, "creation_date": 1543252785, "last_edit_date": 1613743471, "question_id": 53486087, "link": "https://stackoverflow.com/questions/53486087/how-can-i-use-coroutines-with-volley-so-that-my-code-can-be-written-like-sychron", "title": "How can I use coroutines with volley so that my code can be written like sychronous?", "body": "<p>Here's an example from developer.android.com</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nlateinit var textView:TextView\nlateinit var button:Button\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    textView = findViewById(R.id.textView)\n    button = findViewById(R.id.button)\n\n    button.setOnClickListener({\n        getData()\n    })\n}\n\nfun getData(){\n    val queue = Volley.newRequestQueue(this)\n    val url = \"http://www.google.com/\"\n\n    val stringRequest = StringRequest(Request.Method.GET, url,\n        Response.Listener&lt;String&gt; { response -&gt;             \n            textView.text = \"Response is: ${response.substring(0, 500)}\"\n        },\n        Response.ErrorListener { textView.text = \"Something went wrong!\" })\n\n    queue.add(stringRequest)\n}\n}\n</code></pre>\n\n<p>How can I take advantage of coroutines so I can write my code in this manner:</p>\n\n<pre><code>val data = getData()\ntextView.text = data\n</code></pre>\n"}]