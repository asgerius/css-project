[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11395, "user_id": 3195526, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/YXwke.jpg?s=128&g=1", "display_name": "Paul Hicks", "link": "https://stackoverflow.com/users/3195526/paul-hicks"}, "edited": false, "score": 1, "creation_date": 1513209975, "post_id": 47803265, "comment_id": 82569455, "body": "You also can&#39;t do this from class A&#39;s companion object."}, {"owner": {"reputation": 719, "user_id": 2812818, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/22268e400d674650d72826aa9835bf70?s=128&d=identicon&r=PG", "display_name": "Droid Teahouse", "link": "https://stackoverflow.com/users/2812818/droid-teahouse"}, "edited": false, "score": 1, "creation_date": 1536868303, "post_id": 47803265, "comment_id": 91589221, "body": "&quot;can&#39;t &quot; may not be the entire story, you probably shouldn&#39;t.  You could pass an instance of the parent class into a method in the companion object and then call the instance method from there, but it is awkward.  Better to create an instance method and call companion object stuff from there."}], "answers": [{"tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": true, "score": 9, "last_activity_date": 1513206367, "creation_date": 1513206367, "answer_id": 47803462, "question_id": 47803265, "link": "https://stackoverflow.com/questions/47803265/how-can-i-call-a-parent-method-from-a-companion-object-in-kotlin/47803462#47803462", "title": "How can I call a parent method from a companion object in kotlin", "body": "<p>You can't.</p>\n\n<p>The companion object is a rough equivalent of the static keyword in Java. \nThe <code>doStuff()</code> function of class <code>A</code>(and its subclasses) can only be called from an actual object of that class (like <code>A().doStuff()</code> or <code>B().doStuff()</code>)</p>\n\n<p>When trying to call that function from <code>B</code>'s companion object, there is no such object of <code>A</code> (or <code>B</code>) on which you could call that function, since you're in a static context. </p>\n\n<p>If you'd write the Java equivalent of what you posted, you'd receive the error </p>\n\n<blockquote>\n  <p>non-static method cannot be referenced from a static context</p>\n</blockquote>\n\n<p>which is more descriptive than what you're probably getting from Kotlin's compiler and is well explained <a href=\"https://stackoverflow.com/questions/290884/what-is-the-reason-behind-non-static-method-cannot-be-referenced-from-a-static\">here</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 860, "user_id": 6145406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbYUy.jpg?s=128&g=1", "display_name": "S.Bozzoni", "link": "https://stackoverflow.com/users/6145406/s-bozzoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1613859919, "creation_date": 1613859919, "answer_id": 66297173, "question_id": 47803265, "link": "https://stackoverflow.com/questions/47803265/how-can-i-call-a-parent-method-from-a-companion-object-in-kotlin/66297173#66297173", "title": "How can I call a parent method from a companion object in kotlin", "body": "<p>You have to make two class A1 and B1 where B1 inherits from A1 and then inherit A companion object from A1 and inherit B companion Object from B1, then you can call methods of A1 class from B companion object . Note that method of A1 class are also methods of A class.</p>\n"}], "owner": {"reputation": 877, "user_id": 4735549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0bf594e5d927ca4ee3057f93fd3d5ae6?s=128&d=identicon&r=PG&f=1", "display_name": "DanielD", "link": "https://stackoverflow.com/users/4735549/danield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4311, "favorite_count": 0, "accepted_answer_id": 47803462, "answer_count": 2, "score": 2, "last_activity_date": 1613859919, "creation_date": 1513205242, "question_id": 47803265, "link": "https://stackoverflow.com/questions/47803265/how-can-i-call-a-parent-method-from-a-companion-object-in-kotlin", "title": "How can I call a parent method from a companion object in kotlin", "body": "<p>I have a Super class:</p>\n\n<pre><code>open class A {\n    fun doStuff() {\n\n    }\n}\n</code></pre>\n\n<p>and then I have a sub Class which extends that:</p>\n\n<pre><code>class B: A() {\n   companion object {\n        doStuff() //compile error\n   }\n}\n</code></pre>\n\n<p>How can I call my doStuff() method from the companion object?</p>\n"}, {"tags": ["kotlin", "drawing", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 1953567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/27051cd066d4a5a0a2aa4d972e2312a6?s=128&d=identicon&r=PG", "display_name": "Simon Marynissen", "link": "https://stackoverflow.com/users/1953567/simon-marynissen"}, "is_accepted": true, "score": 0, "last_activity_date": 1513288459, "creation_date": 1513288459, "answer_id": 47822671, "question_id": 47802015, "link": "https://stackoverflow.com/questions/47802015/drawing-lines-from-viewmodel-tornadofx/47822671#47822671", "title": "Drawing lines from ViewModel TornadoFX", "body": "<p>A simple bindChildren fixes it:</p>\n\n<pre><code>stackpane {\n    group {\n        bindChildren(model.segments) { segment -&gt;\n            line(segment.first.x, segment.first.y, segment.second.x, segment.second.y)\n        }\n    }\n}\n</code></pre>\n\n<p>In the model, the declaration of the segments:</p>\n\n<pre><code>val segments: ObservableList&lt;Segment&gt; = FXCollections.observableArrayList&lt;Segment&gt;()\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 1953567, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/27051cd066d4a5a0a2aa4d972e2312a6?s=128&d=identicon&r=PG", "display_name": "Simon Marynissen", "link": "https://stackoverflow.com/users/1953567/simon-marynissen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 47822671, "answer_count": 1, "score": 0, "last_activity_date": 1513288459, "creation_date": 1513198762, "question_id": 47802015, "link": "https://stackoverflow.com/questions/47802015/drawing-lines-from-viewmodel-tornadofx", "title": "Drawing lines from ViewModel TornadoFX", "body": "<p>So I got a ViewModel containing Lines (that is 2 point objects that both have an x and y double property). I want to bind this to some canvas or something a like. Furthermore, it could be that lines are not added incrementally to the ViewModel, but all in one time (e.g. when loading an external file that contains a lot of lines data).</p>\n\n<p>How can you solve this with TornadoFX? Moreover, how to make it run smoothly even with a lot of line data. Is it possible with gui builders?</p>\n"}, {"tags": ["function", "reflection", "kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 5, "creation_date": 1513198509, "post_id": 47801838, "comment_id": 82565172, "body": "This isn&#39;t possible at all, unless you copy it into a file and invoke <a href=\"https://kotlinlang.org/docs/tutorials/command-line.html\" rel=\"nofollow noreferrer\"><code>kotlinc</code></a> on it. Kotlin isn&#39;t interpreted. You could write a parser in ANTLR using the <a href=\"https://kotlinlang.org/docs/reference/grammar.html\" rel=\"nofollow noreferrer\">Kotlin grammar</a> but I don&#39;t think what you&#39;re asking for is possible."}, {"owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513199514, "post_id": 47801838, "comment_id": 82565647, "body": "I am using ANTLR4, but when extending the generated BaseListener, there issues are starting, as some variables are not defined when parsing the file, but should only be defined when the Kotlin code will need it. So, finally, I think it is impossible."}], "owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513197953, "creation_date": 1513197953, "question_id": 47801838, "link": "https://stackoverflow.com/questions/47801838/instantiate-a-function-from-a-string", "title": "Instantiate a function from a string?", "body": "<p>I have a function defined in a string, and need a way to instantiate it :</p>\n\n<pre><code>val myFunction = \"\"\"fun (file:Int, rank:Int, playerHasWhite: Boolean): Boolean {\n    val a = file + 3\n    val b = rank - 2\n    if (playerHasWhite) a&gt;b else a&lt;b\n}\n\"\"\"\n</code></pre>\n\n<p>So, is there a simple way, by reflection, to instantiate myFunction ?\n(I've noticed I may need the jar kotlin-reflect)</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "mapbox"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1513196671, "post_id": 47801544, "comment_id": 82564296, "body": "You can use the same API as you&#39;d use in Java. You can even copy and paste Java code into your Kotlin files and have the plugin convert it for you."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513196688, "post_id": 47801544, "comment_id": 82564306, "body": "&quot;I can only find answers on S/O with Java&quot; The two languages should be/are extremely similar. Additionally, Kotlin is completely interoperable with Java. <a href=\"https://www.jetbrains.com/help/idea/converting-a-java-file-to-kotlin-file.html\" rel=\"nofollow noreferrer\">You can even use IntelliJ to convert it automatically</a>."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1513197500, "post_id": 47801544, "comment_id": 82564709, "body": "feel free to do some research of your own and try some stuff before you ask us to do it for you. SO is not the only resource you know"}], "answers": [{"comments": [{"owner": {"reputation": 2060, "user_id": 3524475, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Q4zUo.jpg?s=128&g=1", "display_name": "ghita", "link": "https://stackoverflow.com/users/3524475/ghita"}, "edited": false, "score": 0, "creation_date": 1551252751, "post_id": 47801814, "comment_id": 96567995, "body": "have a crash with &#39;ActivityCompat.requestPermissions(this, permissions,0)&#39; on android 6.0 with nothing in log"}], "tags": [], "owner": {"reputation": 803, "user_id": 6319070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f77a7238ca12d2224769d07383c1c0d1?s=128&d=identicon&r=PG&f=1", "display_name": "aboodrak", "link": "https://stackoverflow.com/users/6319070/aboodrak"}, "is_accepted": true, "score": 21, "last_activity_date": 1513197839, "creation_date": 1513197839, "answer_id": 47801814, "question_id": 47801544, "link": "https://stackoverflow.com/questions/47801544/kotlin-how-do-i-request-access-to-access-fine-location-from-simulator/47801814#47801814", "title": "Kotlin: How do I request access to ACCESS_FINE_LOCATION from simulator?", "body": "<p>in your manifest write this line for requesting the location permission </p>\n\n<pre><code>    &lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n</code></pre>\n\n<p>since the permission you are trying to request is labeled as Dangerous permission , you have to request it in runtime </p>\n\n<p><a href=\"https://developer.android.com/guide/topics/permissions/requesting.html#normal-dangerous\" rel=\"noreferrer\">https://developer.android.com/guide/topics/permissions/requesting.html#normal-dangerous</a></p>\n\n<p>in onCreate in your activity or fragment write this </p>\n\n<pre><code>  override fun onCreate(savedInstanceState: Bundle?) {\n     val permissions = arrayOf(android.Manifest.permission.ACCESS_FINE_LOCATION)\n    ActivityCompat.requestPermissions(this, permissions,0)\n\n        }\n</code></pre>\n\n<p>the above code is not recommended in production ready app , it's just ok for testing propose , in production ready app you have to consider this scenarios when you request the runtime permissions  :- </p>\n\n<ul>\n<li>handle the configuration changes in the middle of permission request process .</li>\n<li>handle the case if the user rejected the permission request first time , and second time .</li>\n<li>show the dialog explaining the reason why you need the permission  or the benefit for user if he grand the permission to you</li>\n</ul>\n\n<p>if you need handle all the above cases , you can try this library \n<a href=\"https://github.com/permissions-dispatcher/PermissionsDispatcher\" rel=\"noreferrer\">https://github.com/permissions-dispatcher/PermissionsDispatcher</a></p>\n\n<p>or you could do it manually.</p>\n"}], "owner": {"reputation": 1368, "user_id": 6406541, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/bxYMU.png?s=128&g=1", "display_name": "Daniel Dramond", "link": "https://stackoverflow.com/users/6406541/daniel-dramond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13729, "favorite_count": 0, "closed_date": 1513201302, "accepted_answer_id": 47801814, "answer_count": 1, "score": 1, "last_activity_date": 1513197839, "creation_date": 1513196619, "question_id": 47801544, "link": "https://stackoverflow.com/questions/47801544/kotlin-how-do-i-request-access-to-access-fine-location-from-simulator", "closed_reason": "Needs more focus", "title": "Kotlin: How do I request access to ACCESS_FINE_LOCATION from simulator?", "body": "<p>I'm working with a maps and when running it on the simulator, the map will not work. In my logs, I get an error telling me that I have to grant access to ACCESS_FINE_LOCATION. How do I do this in KOTLIN? I can only find answers on S/O with Java. The error I get is:</p>\n\n<p><strong><em>location provider requires ACCESS_FINE_LOCATION permission</em></strong></p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 8, "last_activity_date": 1513188799, "creation_date": 1513188799, "answer_id": 47799660, "question_id": 47799636, "link": "https://stackoverflow.com/questions/47799636/whats-different-between-two-constructors/47799660#47799660", "title": "What&#39;s different between two constructors?", "body": "<p>The second class not only declares a constructor that takes a <code>Context</code>, but it also has a property named <code>context</code> where it saves the value passed into the constructor. You can then access this like so:</p>\n\n<pre><code>val colorsArray = ColorsArray(context)\nprintln(colorsArray.context)\n</code></pre>\n\n<p>Since you've declared it as a <code>var</code> and not a <code>val</code>, this can also be reassigned.</p>\n\n<pre><code>colorsArray.context = someOtherContext\n</code></pre>\n\n<p>Properties declared in the primary constructor are covered in the docs <a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 5901877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc74af4b180a5ab4af2230f2860c6faa?s=128&d=identicon&r=PG", "display_name": "code_x386", "link": "https://stackoverflow.com/users/5901877/code-x386"}, "is_accepted": false, "score": 0, "last_activity_date": 1513332096, "creation_date": 1513332096, "answer_id": 47829881, "question_id": 47799636, "link": "https://stackoverflow.com/questions/47799636/whats-different-between-two-constructors/47829881#47829881", "title": "What&#39;s different between two constructors?", "body": "<p>In the first case constructor takes a <code>context</code> parameter and does nothing with it.  </p>\n\n<p>In the second case the code example provided:</p>\n\n\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ColorsArray(var context: Context) { }\n</code></pre>\n\n<p>is a shortcut for:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class ColorsArray(context: Context) {\n    var context: Context = context\n}\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 47799660, "answer_count": 2, "score": 2, "last_activity_date": 1513334504, "creation_date": 1513188680, "last_edit_date": 1513334504, "question_id": 47799636, "link": "https://stackoverflow.com/questions/47799636/whats-different-between-two-constructors", "title": "What&#39;s different between two constructors?", "body": "<p>What different between this type of constructor?</p>\n\n<pre><code>class ColorsArray(context: Context) {}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class ColorsArray(var context: Context){}\n</code></pre>\n"}, {"tags": ["kotlin", "retrofit", "kotlin-native"], "comments": [{"owner": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "edited": false, "score": 0, "creation_date": 1513354170, "post_id": 47799445, "comment_id": 82635550, "body": "No, there is isn&#39;t any such library, yet."}], "answers": [{"comments": [{"owner": {"reputation": 4030, "user_id": 8448886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vfqrw.jpg?s=128&g=1", "display_name": "Abhishek kumar", "link": "https://stackoverflow.com/users/8448886/abhishek-kumar"}, "edited": false, "score": 1, "creation_date": 1519210271, "post_id": 48901225, "comment_id": 84813444, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/18887451\">From Review</a>"}, {"owner": {"reputation": 22313, "user_id": 1739882, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Li4nC.jpg?s=128&g=1", "display_name": "Chintan Soni", "link": "https://stackoverflow.com/users/1739882/chintan-soni"}, "reply_to_user": {"reputation": 4030, "user_id": 8448886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Vfqrw.jpg?s=128&g=1", "display_name": "Abhishek kumar", "link": "https://stackoverflow.com/users/8448886/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1539178647, "post_id": 48901225, "comment_id": 92407802, "body": "@Abhishekkumar Which has happened now. Link is not working."}], "tags": [], "owner": {"reputation": 547, "user_id": 8214382, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7qW7kcTPFrw/AAAAAAAAAAI/AAAAAAAAAAs/HZb3KjbYlFs/photo.jpg?sz=128", "display_name": "Nikolay Igotti", "link": "https://stackoverflow.com/users/8214382/nikolay-igotti"}, "is_accepted": false, "score": 2, "last_activity_date": 1539266589, "last_edit_date": 1539266589, "creation_date": 1519201849, "answer_id": 48901225, "question_id": 47799445, "link": "https://stackoverflow.com/questions/47799445/kotlin-native-equivalent-of-retrofit/48901225#48901225", "title": "Kotlin native equivalent of Retrofit", "body": "<p>At the moment wrapping some C library, like CURL is the best option. See <a href=\"https://github.com/JetBrains/kotlinconf-spinner/tree/master/kurl\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/kotlinconf-spinner/tree/master/kurl</a> for example of how it could be done.</p>\n\n<p>In this example we provide interoperability library matching CURL directly, and more Kotlin'ish wrapper, which calls (somewhat confusing) CURL APIs in more easy to use manner. </p>\n"}, {"comments": [{"owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "edited": false, "score": 2, "creation_date": 1540393590, "post_id": 52971494, "comment_id": 92851005, "body": "This does seem like the best solution currently.  However, I would not say it is as simple and as few lines of code as Retrofit.  Also there appears to be some difficulty with Serialization of certain types (root lists for example)."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1554242257, "post_id": 52971494, "comment_id": 97677894, "body": "Is this better than Retrofit?"}], "tags": [], "owner": {"reputation": 2392, "user_id": 2338613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f6eca831ed23df5de1f76b834aa7c3d?s=128&d=identicon&r=PG", "display_name": "thoutbeckers", "link": "https://stackoverflow.com/users/2338613/thoutbeckers"}, "is_accepted": false, "score": 10, "last_activity_date": 1540391194, "creation_date": 1540391194, "answer_id": 52971494, "question_id": 47799445, "link": "https://stackoverflow.com/questions/47799445/kotlin-native-equivalent-of-retrofit/52971494#52971494", "title": "Kotlin native equivalent of Retrofit", "body": "<p>I've just published an example project where I use <a href=\"https://ktor.io/clients/index.html\" rel=\"noreferrer\">ktor-client</a> in a Kotlin project with both iOS and Android. </p>\n\n<p><a href=\"https://github.com/thoutbeckers/kotlin-mpp-example\" rel=\"noreferrer\">https://github.com/thoutbeckers/kotlin-mpp-example</a></p>\n"}, {"comments": [{"owner": {"reputation": 26443, "user_id": 648313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VeomZ.png?s=128&g=1", "display_name": "Idolon", "link": "https://stackoverflow.com/users/648313/idolon"}, "edited": false, "score": 1, "creation_date": 1585243092, "post_id": 56680106, "comment_id": 107699152, "body": "Fuel is not a Kotlin Multiplatform library, thus it doesn&#39;t support Kotlin Native"}], "tags": [], "owner": {"reputation": 1, "user_id": 11674198, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PKyY8Xxni1A/AAAAAAAAAAI/AAAAAAAAAOw/6WOo2kya8p4/photo.jpg?sz=128", "display_name": "Chenggong Huang", "link": "https://stackoverflow.com/users/11674198/chenggong-huang"}, "is_accepted": false, "score": -2, "last_activity_date": 1561012419, "last_edit_date": 1561012419, "creation_date": 1561011766, "answer_id": 56680106, "question_id": 47799445, "link": "https://stackoverflow.com/questions/47799445/kotlin-native-equivalent-of-retrofit/56680106#56680106", "title": "Kotlin native equivalent of Retrofit", "body": "<p>There is a nice and easy to use http networking library called \"fuel\" which is written in Kotlin.\n<a href=\"https://github.com/kittinunf/Fuel\" rel=\"nofollow noreferrer\">https://github.com/kittinunf/Fuel</a>\nIt also supports RxJava and coroutines.</p>\n"}, {"tags": [], "owner": {"reputation": 740, "user_id": 2443773, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ItMAA.jpg?s=128&g=1", "display_name": "Edu", "link": "https://stackoverflow.com/users/2443773/edu"}, "is_accepted": false, "score": 0, "last_activity_date": 1601075806, "last_edit_date": 1601075806, "creation_date": 1593283023, "answer_id": 62614064, "question_id": 47799445, "link": "https://stackoverflow.com/questions/47799445/kotlin-native-equivalent-of-retrofit/62614064#62614064", "title": "Kotlin native equivalent of Retrofit", "body": "<p>I've made a library just for this purpose, actually I'm using it in some projects. <a href=\"https://github.com/eduayuso/konet\" rel=\"nofollow noreferrer\">https://github.com/eduayuso/konet</a>.</p>\n<p>On the other hand you have an alternative which inspired me to make this library, but it not exactly what you want: <a href=\"https://github.com/icerockdev/moko-network\" rel=\"nofollow noreferrer\">https://github.com/icerockdev/moko-network</a>.</p>\n"}], "owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6292, "favorite_count": 4, "answer_count": 4, "score": 15, "last_activity_date": 1601075806, "creation_date": 1513187839, "question_id": 47799445, "link": "https://stackoverflow.com/questions/47799445/kotlin-native-equivalent-of-retrofit", "title": "Kotlin native equivalent of Retrofit", "body": "<p>With Kotlin native giving us the promise of cross platform development and native executables, is there an equivalent of the Java lib Retrofit for Kotlin Native?  IOW is there a pure Kotlin networking library that makes creating http client code simple, and quick as Retrofit does for Java?</p>\n"}, {"tags": ["android", "unit-testing", "kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 2, "creation_date": 1513182868, "post_id": 47797729, "comment_id": 82556807, "body": "Maybe the test code would help"}, {"owner": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513183839, "post_id": 47797729, "comment_id": 82557510, "body": "Sorry, don&#39;t have the code right now. But the main line in the test is basically <code>val dataflow = DataFlow { &quot;test&quot; } dataflow.bindTo(mock(), true, { result = it })</code>"}], "answers": [{"comments": [{"owner": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "edited": false, "score": 0, "creation_date": 1513185553, "post_id": 47798727, "comment_id": 82558647, "body": "Thank you! It is a very handy trick to use fake classes. But after thinking  about the code I guess it is just a bad implementation and <code>bindTo</code> should be a member function of ViewKontroller and lifecycle callbacks can be just functions in DataFlow which later can be easily tested."}, {"owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "reply_to_user": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "edited": false, "score": 1, "creation_date": 1513185621, "post_id": 47798727, "comment_id": 82558681, "body": "Better design insights as a result of testing is what TDD is about ;)"}], "tags": [], "owner": {"reputation": 14536, "user_id": 2463035, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wWsJR.jpg?s=128&g=1", "display_name": "Vasiliy", "link": "https://stackoverflow.com/users/2463035/vasiliy"}, "is_accepted": false, "score": 1, "last_activity_date": 1513185069, "creation_date": 1513185069, "answer_id": 47798727, "question_id": 47797729, "link": "https://stackoverflow.com/questions/47797729/how-to-test-a-class-with-anonymous-listener-that-is-set-inside-a-function/47798727#47798727", "title": "How to test a class with anonymous listener that is set inside a function?", "body": "<p>What you want to check in the test is probably at least this:</p>\n\n<ol>\n<li><code>LifecycleListener</code> added to <code>ViewKontroller</code></li>\n<li>When <code>onPostAttach</code> is called by <code>ViewKontroller</code> something happens</li>\n<li>When <code>preDestroyView</code> is called by <code>ViewKontroller</code> something else happens</li>\n</ol>\n\n<p>So, the test double of <code>ViewKontroller</code> that you pass into constructor needs to \"tell\" you whether a listener was registered, and also to delegate method calls to that listener.</p>\n\n<p>In such cases, when the test double object needs to have some actual functionality, it is best to implement a fake than using a mock.</p>\n\n<p>In your case, just implement <code>FakeViewKontroller</code> that extends <code>ViewKontroller</code> and pass it to system under test instead of mock. </p>\n\n<p>In that class you can expose additional methods that will allow you to ensure that <code>LifecycleListener</code> was added, and call methods on that listener in test cases.</p>\n"}], "owner": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513185069, "creation_date": 1513181925, "question_id": 47797729, "link": "https://stackoverflow.com/questions/47797729/how-to-test-a-class-with-anonymous-listener-that-is-set-inside-a-function", "title": "How to test a class with anonymous listener that is set inside a function?", "body": "<p>I am just getting into unit testing on Android and I ran into some difficulties when I tried to test <code>bindTo()</code> function of this class.</p>\n\n<pre><code>class DataFlow&lt;T&gt; (produce: DataFlowProducer&lt;T&gt;): BaseDataFlow&lt;T&gt;(produce) {\n    var updateOnAttach: Boolean = true\n\n    fun bindTo(viewKontroller: ViewKontroller, updateImmediately: Boolean, updateUi: (data: T) -&gt; Unit) {\n        this.updateUi = updateUi\n        if (updateImmediately)\n            flow()\n        viewKontroller.addLifecycleListener(object : Controller.LifecycleListener() {\n            override fun postAttach(controller: Controller, view: View) {\n                if (updateOnAttach) flow()\n            }\n            override fun preDestroyView(controller: Controller, view: View) {\n                viewKontroller.removeLifecycleListener(this)\n                this@DataFlow.updateUi = null\n            }\n        })\n    }\n}\n</code></pre>\n\n<p>If I mock my ViewKontroller test still crashes with NPE on line <code>viewKontroller.addLifecycleListener</code>. </p>\n\n<p>So what am I doing wrong?</p>\n"}, {"tags": ["kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1513179954, "post_id": 47797005, "comment_id": 82554893, "body": "Scroll up on the error, there should be more specific error logs if it is dagger related"}, {"owner": {"reputation": 71, "user_id": 8594928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55S_1bnE3wU/AAAAAAAAAAI/AAAAAAAAACg/XrLyMQoRnZo/photo.jpg?sz=128", "display_name": "\u97e9\u5efa\u98de", "link": "https://stackoverflow.com/users/8594928/%e9%9f%a9%e5%bb%ba%e9%a3%9e"}, "reply_to_user": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "edited": false, "score": 0, "creation_date": 1513181309, "post_id": 47797005, "comment_id": 82555758, "body": "Yes, there are too many error info. It seems they are related to lombok and data binding"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8594928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55S_1bnE3wU/AAAAAAAAAAI/AAAAAAAAACg/XrLyMQoRnZo/photo.jpg?sz=128", "display_name": "\u97e9\u5efa\u98de", "link": "https://stackoverflow.com/users/8594928/%e9%9f%a9%e5%bb%ba%e9%a3%9e"}, "edited": false, "score": 0, "creation_date": 1513181531, "post_id": 47797249, "comment_id": 82555910, "body": "and I figure out a error : ``` /Users/jafir/Documents/Base/app/build/tmp/kapt3/stubs/stagin&zwnj;&#8203;gDebug/com/jafir/bas&zwnj;&#8203;e/ui/activity/base/M&zwnj;&#8203;enuActivity.java:7: \u9519\u8bef: Dagger does not support injection into private fields e:   e:     private com.jafir.base.ui.presenter.MenuPresenter presenter; ```` here is my code: ``` abstract class MenuActivity : BaseFragmentActivity() {     @Inject     internal var presenter: MenuPresenter? = null ``` it seems the presenter is private. How can it be not private ?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 71, "user_id": 8594928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55S_1bnE3wU/AAAAAAAAAAI/AAAAAAAAACg/XrLyMQoRnZo/photo.jpg?sz=128", "display_name": "\u97e9\u5efa\u98de", "link": "https://stackoverflow.com/users/8594928/%e9%9f%a9%e5%bb%ba%e9%a3%9e"}, "edited": false, "score": 0, "creation_date": 1513186561, "post_id": 47797249, "comment_id": 82559239, "body": "@\u97e9\u5efa\u98de better add the code for <code>MenuActivity</code> to your question directly."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1513180502, "creation_date": 1513180502, "answer_id": 47797249, "question_id": 47797005, "link": "https://stackoverflow.com/questions/47797005/how-can-we-use-dagger2-with-kotlin/47797249#47797249", "title": "How can we use Dagger2 with kotlin?", "body": "<p>Like you assumed already, <em>Lombok</em> is the problem. <em>Kapt</em> runs before <em>Lombok</em> and thus some relevant classes or at least parts of it don't exist yet. Therefore compilation fails.</p>\n\n<p>In our case we replaced <em>Lombok</em> with <em>Kotlin</em> data classes in one go. Alternatively you can move all these classes to a separate module which builds before you run <em>Kapt</em> the first time. If you don't have to many classes you could also de-lombok these or implement what you need manually.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 8594928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55S_1bnE3wU/AAAAAAAAAAI/AAAAAAAAACg/XrLyMQoRnZo/photo.jpg?sz=128", "display_name": "\u97e9\u5efa\u98de", "link": "https://stackoverflow.com/users/8594928/%e9%9f%a9%e5%bb%ba%e9%a3%9e"}, "is_accepted": false, "score": 0, "last_activity_date": 1513225598, "creation_date": 1513225598, "answer_id": 47805933, "question_id": 47797005, "link": "https://stackoverflow.com/questions/47797005/how-can-we-use-dagger2-with-kotlin/47805933#47805933", "title": "How can we use Dagger2 with kotlin?", "body": "<p>Thank you all,\nI have solved this.</p>\n\n<p>make </p>\n\n<pre><code>@Inject\ninternal var presenter: MenuPresenter? = null\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@Inject\nlateinit var presenter: MenuPresenter? = null\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8594928, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-55S_1bnE3wU/AAAAAAAAAAI/AAAAAAAAACg/XrLyMQoRnZo/photo.jpg?sz=128", "display_name": "\u97e9\u5efa\u98de", "link": "https://stackoverflow.com/users/8594928/%e9%9f%a9%e5%bb%ba%e9%a3%9e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513239493, "creation_date": 1513179757, "last_edit_date": 1513239493, "question_id": 47797005, "link": "https://stackoverflow.com/questions/47797005/how-can-we-use-dagger2-with-kotlin", "title": "How can we use Dagger2 with kotlin?", "body": "<p>I want use Dagger2 with kotlin. But then I use this setting for dagger2 with kotlin by the way on the internet, it occurs a problem.</p>\n\n<pre><code>//build.gradle\napply plugin: 'kotlin-kapt'\nkapt {\n    generateStubs = true\n}\n...\ndependencies {\ncompile 'com.google.dagger:dagger-android:2.11'\ncompile 'com.google.dagger:dagger-android-support:2.11'\nkapt  'com.google.dagger:dagger-android-processor:2.11'\nkapt 'com.google.dagger:dagger-compiler:2.11'\n}\n</code></pre>\n\n<p>Here a problem, I am using Lombok too. Is this the problem?</p>\n\n<pre><code>e: java.lang.IllegalStateException: failed to analyze: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.analyzer.AnalysisResult.throwIfError(AnalysisResult.kt:57)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:137)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:158)\n    at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:61)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:107)\n    at org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.java:51)\n    at org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:92)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:386)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$compile$1$2.invoke(CompileServiceImpl.kt:96)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:892)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl$doCompile$$inlined$ifAlive$lambda$2.invoke(CompileServiceImpl.kt:96)\n    at org.jetbrains.kotlin.daemon.common.DummyProfiler.withMeasure(PerfUtils.kt:137)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.checkedCompile(CompileServiceImpl.kt:919)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.doCompile(CompileServiceImpl.kt:891)\n    at org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:385)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:346)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)\n    at sun.rmi.transport.Transport$1.run(Transport.java:197)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.jetbrains.kotlin.kapt3.diagnostic.KaptError: Error while annotation processing\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing(annotationProcessing.kt:90)\n    at org.jetbrains.kotlin.kapt3.AnnotationProcessingKt.doAnnotationProcessing$default(annotationProcessing.kt:42)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.runAnnotationProcessing(Kapt3Extension.kt:205)\n    at org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:166)\n    at org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:82)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM$analyzeFilesWithJavaIntegration$2.invoke(TopDownAnalyzerFacadeForJVM.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:106)\n    at org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:83)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:376)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:67)\n    at org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:96)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:367)\n    at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.kt:132)\n    ... 30 more\n\n\n:app:kaptStagingDebugKotlin FAILED\n\nFAILURE: Build failed with an exception.\n</code></pre>\n\n<p>MenuActivity</p>\n\n<pre><code>abstract class MenuActivity : BaseFragmentActivity() {\n    @Inject\n    internal var presenter: MenuPresenter? = null\n\n    override fun baseFragmentWithTag(): Map&lt;String, Class&lt;out BaseManagerFragment&gt;&gt; {\n        val map = HashMap&lt;String, Class&lt;out BaseManagerFragment&gt;&gt;()\n        for (tag in MenuScreensTag.values())\n            map.put(tag.getTag(), tag.getFragmentClazz())\n\n        return map\n    }\n\n    @JvmOverloads\n    fun switchTag(screensTag: MenuScreensTag, clearCurrentStack: Boolean = false) {\n        val tag = screensTag.getTag()\n        switchToStackByTag(tag, clearCurrentStack)\n    }\n\n    public override fun inject(appComponent: AppComponent) {\n        val component = DaggerMenuComponent.builder()\n                .appComponent(appComponent)\n                .menuModule(MenuModule(this))\n                .build()\n        component.injectFragment(this)\n        component.injectPresenter(presenter!!)\n    }\n}\n</code></pre>\n\n<p>Here is the <code>MenuActivity</code> code. \nI just use kotlin plugin to convert java to kotlin directly. Then the error occurs.</p>\n"}, {"tags": ["android", "kotlin", "android-adapter", "baseadapter"], "comments": [{"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1513179974, "post_id": 47796838, "comment_id": 82554903, "body": "<code>@Suppress(&quot;UNCHECKED_CAST&quot;)</code> if you know what you are doing ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 17779, "user_id": 1303324, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ArFzi.jpg?s=128&g=1", "display_name": "Krzysztof At\u0142asik", "link": "https://stackoverflow.com/users/1303324/krzysztof-at%c5%82asik"}, "is_accepted": false, "score": 1, "last_activity_date": 1513199550, "creation_date": 1513199550, "answer_id": 47802186, "question_id": 47796838, "link": "https://stackoverflow.com/questions/47796838/is-this-the-right-way-to-cast/47802186#47802186", "title": "Is this the right way to cast", "body": "<p>You can handle it elegantly and functionally with pattern matching:</p>\n\n<pre><code>val itemView = when(view) {\n    is ItemView -&gt; view\n    else -&gt; factory()\n}\n</code></pre>\n"}], "owner": {"reputation": 1142, "user_id": 3723306, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/1515773058/picture?type=large", "display_name": "JaviOverflow", "link": "https://stackoverflow.com/users/3723306/javioverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513199550, "creation_date": 1513179256, "question_id": 47796838, "link": "https://stackoverflow.com/questions/47796838/is-this-the-right-way-to-cast", "title": "Is this the right way to cast", "body": "<p>\nWhat is the best way to cast an object to a certain type of object if it's not null (otherwise, a factory method is called). This is happening inside a BaseAdapter. What's the best way to do it?</p>\n\n\n\n<pre><code>val itemView = view as? ItemView ?: factory()\n</code></pre>\n\n\n\n<p>\nI'm getting the following warning in Android Studio</p>\n\n<blockquote>\n  <p>Unchecked cast: View? to ItemView</p>\n</blockquote>\n"}, {"tags": ["generics", "kotlin", "kotlin-generics"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1513178298, "creation_date": 1513178298, "answer_id": 47796513, "question_id": 47796336, "link": "https://stackoverflow.com/questions/47796336/generic-function-in-interface-to-return-concrete-implementation/47796513#47796513", "title": "Generic function in interface to return concrete implementation", "body": "<p>Typically this is done by parameterizing the <code>Content</code> interface as well, as follows:</p>\n\n<pre><code>interface Content&lt;T : Content&lt;T&gt;&gt; {\n    fun cloneMe(): T\n}\n</code></pre>\n\n<p>And the implementation:</p>\n\n<pre><code>class Music : Content&lt;Music&gt; {\n    override fun cloneMe(): Music {\n        return Music()\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5612, "user_id": 9279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32ae698b36d5de067710811fec3094b?s=128&d=identicon&r=PG", "display_name": "Tim Keating", "link": "https://stackoverflow.com/users/9279/tim-keating"}, "edited": false, "score": 0, "creation_date": 1529081008, "post_id": 47796839, "comment_id": 88761455, "body": "This offloads the responsibility for downcasting onto the caller, the avoidance of which it seems to me is the implied intent of the original question."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 5612, "user_id": 9279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32ae698b36d5de067710811fec3094b?s=128&d=identicon&r=PG", "display_name": "Tim Keating", "link": "https://stackoverflow.com/users/9279/tim-keating"}, "edited": false, "score": 0, "creation_date": 1529109618, "post_id": 47796839, "comment_id": 88770145, "body": "@TimKeating how so? The return type of <code>Music.cloneMe()</code> is actually <code>Music</code>. The only advantage of having Generics here is the checking of the proper return type if the class is defined properly."}, {"owner": {"reputation": 5612, "user_id": 9279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32ae698b36d5de067710811fec3094b?s=128&d=identicon&r=PG", "display_name": "Tim Keating", "link": "https://stackoverflow.com/users/9279/tim-keating"}, "edited": false, "score": 0, "creation_date": 1530580923, "post_id": 47796839, "comment_id": 89275185, "body": "Not true. The return type of <code>cloneMe()</code> is <code>Content</code>, regardless of the fact that you call it from a <code>Music</code> and it returns a <code>Music</code> instance. You can&#39;t, for example, call a hypothetical <code>setVolume()</code> method on your cloned object without explicitly casting it to a <code>Music</code>. You can easily verify this in the REPL."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 5612, "user_id": 9279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32ae698b36d5de067710811fec3094b?s=128&d=identicon&r=PG", "display_name": "Tim Keating", "link": "https://stackoverflow.com/users/9279/tim-keating"}, "edited": false, "score": 2, "creation_date": 1530601186, "post_id": 47796839, "comment_id": 89280675, "body": "@TimKeating it depends on the type of your variable. If you call <code>cloneMe()</code> on a <code>Content</code> instance, you&#39;ll only get a <code>Content</code> returned. The same holds true for <code>Content&lt;*&gt;</code>. If you have a <code>Content&lt;Music&gt;</code> or <code>Music</code> variable, you&#39;ll get a <code>Music</code> returned. For both cases you need to know about the <code>Music</code> definition. Using the generic supertype won&#39;t yield anything."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "edited": false, "score": 0, "creation_date": 1599073913, "post_id": 47796839, "comment_id": 112664080, "body": "This won&#39;t work if you&#39;re using the <code>Content</code> interface as a generic type parameter in other functions."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 1, "last_activity_date": 1513179260, "creation_date": 1513179260, "answer_id": 47796839, "question_id": 47796336, "link": "https://stackoverflow.com/questions/47796336/generic-function-in-interface-to-return-concrete-implementation/47796839#47796839", "title": "Generic function in interface to return concrete implementation", "body": "<p>What you're trying to achieve is not necessary related to any Generics. Instead you could just use the type directly and implement a more detailed override.</p>\n\n<pre><code>interface Content {\n    fun cloneMe(): Content\n}\n\nclass Music : Content {\n    override fun cloneMe() = Music()\n}\n</code></pre>\n"}], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2153, "favorite_count": 2, "accepted_answer_id": 47796513, "answer_count": 2, "score": 5, "last_activity_date": 1513205714, "creation_date": 1513177822, "last_edit_date": 1513205714, "question_id": 47796336, "link": "https://stackoverflow.com/questions/47796336/generic-function-in-interface-to-return-concrete-implementation", "title": "Generic function in interface to return concrete implementation", "body": "<p>To an interface, I want to add a function that returns an object of the concrete implementation. </p>\n\n<p>So with the interface: </p>\n\n<pre><code>interface Content {\n        fun &lt;???&gt; cloneMe(): ?\n}\n</code></pre>\n\n<p>and the classes </p>\n\n<pre><code>class Music: Content\nclass Video: Content\n</code></pre>\n\n<p>the function <code>cloneMe()</code> of the <code>Music</code> class should return a <code>Music</code> object and the the  function <code>cloneMe()</code> of the <code>Video</code> class should return a <code>Video</code> object. </p>\n\n<p>The closest I've come is: </p>\n\n<pre><code>interface Content {\n    fun &lt;T: Content&gt; cloneMe(): T\n}\n\nclass Music : Content {\n    override fun &lt;T : Content&gt; cloneMe(): T {\n        return Music() as T\n    }\n}\n</code></pre>\n\n<p>then I can do </p>\n\n<pre><code>val music: Music = Music().cloneMe&lt;Music&gt;()\n</code></pre>\n\n<p>The problem here is that I have to do an unchecked cast, which 'allows me' (i.e. will compile) to do </p>\n\n<pre><code>class Music : Content {\n        override fun &lt;T : Content&gt; cloneMe(): T {\n            return Video() as T\n        }\n}\n</code></pre>\n\n<p>which is problematic. </p>\n\n<p>What's the best way to achieve this?</p>\n"}, {"tags": ["java", "android", "animation", "kotlin", "scale"], "owner": {"reputation": 1751, "user_id": 6241054, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/qV7vO.jpg?s=128&g=1", "display_name": "Jocky Doe", "link": "https://stackoverflow.com/users/6241054/jocky-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1513350441, "creation_date": 1513176552, "last_edit_date": 1513183273, "question_id": 47795878, "link": "https://stackoverflow.com/questions/47795878/determining-a-scaleanimation-pivot", "title": "Determining a ScaleAnimation pivot", "body": "<p>I have a view that I am scaling over list that simulates list item scaling vertically to fullscreen.</p>\n\n<p>Here's example github <strong><a href=\"https://github.com/kidwon24/ItemList\" rel=\"noreferrer\">project</a></strong> to play with <strong>the animation code is <a href=\"https://github.com/kidwon24/ItemList/blob/master/app/src/main/java/mom/example/itemlist/adapters/ItemListRecycleViewAdapter.kt\" rel=\"noreferrer\">here</a></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/uJJng.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uJJng.png\" alt=\"enter image description here\"></a> </p>\n\n<p>the code looks like this:</p>\n\n<pre><code>&lt;FrameLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;View\n        android:id=\"@+id/growView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1dp\"\n        android:background=\"@color/fiftyBlack\" /&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>view.setOnClickListener {\n\n    val listItemHeight = it.measuredHeight\n    val toolBarHeight = (it.parent as RecyclerView).y\n    val scalingView = it.rootView.findViewById&lt;View&gt;(R.id.growView)\n    val screenHeight = (scalingView.parent as FrameLayout).measuredHeight\n\n    // Position the view exactly over the list item\n    scalingView.y = it.y + toolBarHeight\n    scalingView.layoutParams.height = listItemHeight\n    scalingView.layoutParams = scalingView.layoutParams\n\n    /* \n      pivots[0] scales example animation for the first item of the list \n      for xxhdpi: 1080p device\n      for the rest of the visible items the pivots are: 1.954f, 3.131f .... +1.177 (no scroll)\n    */ \n    val pivots = arrayListOf(0.777f)\n    val itemScale = screenHeight.toFloat()/listItemHeight\n\n\n    val scaleAnime = ScaleAnimation(1f, 1f, 1f, itemScale,\n            Animation.RELATIVE_TO_SELF, 0f, Animation.RELATIVE_TO_SELF, pivots[0])\n    scaleAnime.setDuration(400);\n    scaleAnime.setFillAfter(true);\n    scalingView.startAnimation(scaleAnime);\n</code></pre>\n\n<p>As you may see the problem is in determining the y pivot point for each item:</p>\n\n<pre><code>val scaleAnime = ScaleAnimation( /.....* Dynamic vertical pivot */)\n</code></pre>\n\n<p>I am struggling a few days to determine the pivot point but can't figure out on what it depends.</p>\n\n<p>Any ideas what it might be?</p>\n"}, {"tags": ["functional-programming", "stream", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 3, "last_activity_date": 1513171260, "last_edit_date": 1513171260, "creation_date": 1513170450, "answer_id": 47793804, "question_id": 47793469, "link": "https://stackoverflow.com/questions/47793469/how-best-to-find-an-element-in-nested-lists/47793804#47793804", "title": "How best to find an element in nested lists?", "body": "<p>If you just want to reduce codes and you don't care much about efficiency, try this.</p>\n\n<pre><code>list.flatten().find { your pred here }\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>list.flatMap { it }.find { your pred }\n</code></pre>\n\n<p>Or create a useful utility which doesn't create new lists (faster/lower memory taken):</p>\n\n<pre><code>inline fun &lt;T&gt; Iterable&lt;Iterable&lt;T&gt;&gt;.forEachEach(f: (T) -&gt; Unit) =\n    forEach { it.forEach(f) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": false, "score": 4, "last_activity_date": 1513170763, "last_edit_date": 1592644375, "creation_date": 1513170452, "answer_id": 47793806, "question_id": 47793469, "link": "https://stackoverflow.com/questions/47793469/how-best-to-find-an-element-in-nested-lists/47793806#47793806", "title": "How best to find an element in nested lists?", "body": "<p>You could <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/flatten.html\" rel=\"nofollow noreferrer\"><code>flatten</code></a> the list:</p>\n<blockquote>\n<p><code>fun &lt;T&gt; Iterable&lt;Iterable&lt;T&gt;&gt;.flatten(): List&lt;T&gt;</code> (<a href=\"https://github.com/JetBrains/kotlin/blob/1.2.0/libraries/stdlib/src/kotlin/collections/Iterables.kt#L77\" rel=\"nofollow noreferrer\">source</a>)</p>\n<p>Returns a single list of all elements from all collections in the given collection.</p>\n</blockquote>\n<pre><code>val data = listOf(listOf(1, 2, 3), listOf(3, 4, 5, 6), listOf(), listOf(6, 7, 8))\ndata.flatten().find { n -&gt; n &gt; 4 &amp;&amp; n &lt; 6 }\n</code></pre>\n<p>This will return a single list with the elements of the sublists in order. Then you can use <code>find</code> as usual.</p>\n<p>In your example,</p>\n<pre><code>{{1, 2, 3}, {3, 4, 5, 6}, {}, {6, 7, 8}}\n</code></pre>\n<p>becomes</p>\n<pre><code>{1, 2, 3, 3, 4, 5, 6, 6, 7, 8}\n</code></pre>\n<p>and the result of <code>find</code> on this list is <code>5</code>.</p>\n<p>However, this will create a new list. Take a look at the source of <code>flatten</code>:</p>\n<pre><code>/**\n * Returns a single list of all elements from all collections in the given collection.\n */\npublic fun &lt;T&gt; Iterable&lt;Iterable&lt;T&gt;&gt;.flatten(): List&lt;T&gt; {\n    val result = ArrayList&lt;T&gt;()\n    for (element in this) {\n        result.addAll(element)\n    }\n    return result\n}\n</code></pre>\n<p>If you want to save memory, create a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/index.html\" rel=\"nofollow noreferrer\"><code>Sequence</code></a> from your list first:</p>\n<pre><code>data.asSequence()\n</code></pre>\n<p>and then perform your operations on this sequence:</p>\n<pre><code>data.asSequence().flatten().find { n -&gt; n &gt; 4 &amp;&amp; n &lt; 6 }\n</code></pre>\n<hr />\n<p>Side note: your predicate, <code>n &gt; 4 &amp;&amp; n &lt; 6</code>, is simply equivalent to <code>n == 5</code>.</p>\n"}], "owner": {"reputation": 20110, "user_id": 472245, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/395b65e986e8aca7c1af4643d162012e?s=128&d=identicon&r=PG", "display_name": "towi", "link": "https://stackoverflow.com/users/472245/towi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513171260, "creation_date": 1513169418, "question_id": 47793469, "link": "https://stackoverflow.com/questions/47793469/how-best-to-find-an-element-in-nested-lists", "title": "How best to find an element in nested lists?", "body": "<p>Kotlin provides some usingful extension functions allow stream-like programming.</p>\n\n<p>For example, if I look for an element in a list I can use <code>find</code>:</p>\n\n<pre><code>return list.find { n -&gt; n&gt;4 &amp;&amp; n&lt;6 }\n</code></pre>\n\n<p>But when I have a have nested lists this seems not practical for me. I have tu use <code>forEach</code> then -- luckyly I can return from an inner Lambda with Kotlin:</p>\n\n<pre><code>private fun findUsingForEach(data: List&lt;List&lt;Int&gt;&gt;, pred : (Int) -&gt; Boolean) : Optional&lt;Int&gt; {\n    data.forEach { list -&gt;\n        list.forEach { n -&gt;\n            if( pred(n) ) return Optional.of(n)\n        }\n    }\n    return Optional.empty()\n}\n</code></pre>\n\n<p>It seems fo me that <code>forEach</code> is not the right tool for that. Is there a more functional way to du this? <code>filter</code> comes to mind, but the nesting causes problems.</p>\n\n<p>That follwing is the test I use for the function abouve:</p>\n\n<pre><code>@Test\nopen fun findTest() {\n    val data = listOf( listOf(1,2,3), listOf(3,4,5,6), listOf(), listOf(6,7,8) )\n    val e = findUsingForEach( data, { n -&gt; n&gt;4 &amp;&amp; n &lt; 6 } )\n    assertEquals(5, e.get())\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-interop", "kotlin-native"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8854949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69965e456e56fbf3e33eb32de7ddcff3?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bisarahalli", "link": "https://stackoverflow.com/users/8854949/manoj-bisarahalli"}, "edited": false, "score": 0, "creation_date": 1513173148, "post_id": 47793958, "comment_id": 82550215, "body": "Thank you @ice1000 for this answer. It made my understanding of the topic way more clearer. But w.r.t to the spinner app, they have never used <b>expect</b> or <b>actual</b> keywords anywhere. Also what resources are they accessing in the common module with the <b>readResources</b> function?  I am trying to create a todo app which will run on both IOS and android so what should be in my common module?"}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 81, "user_id": 8854949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69965e456e56fbf3e33eb32de7ddcff3?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bisarahalli", "link": "https://stackoverflow.com/users/8854949/manoj-bisarahalli"}, "edited": false, "score": 0, "creation_date": 1513174287, "post_id": 47793958, "comment_id": 82550979, "body": "Oh I see. It&#39;s not the standard kotlin approach for creating multiplatform project. It&#39;s a trick on gradle. There&#39;s a <code>readResources</code> function that implements differently on platforms but of the same signature, and gradle will decide which <code>Kommon.kt</code> should be compiled with the client projects."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 81, "user_id": 8854949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69965e456e56fbf3e33eb32de7ddcff3?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bisarahalli", "link": "https://stackoverflow.com/users/8854949/manoj-bisarahalli"}, "edited": false, "score": 0, "creation_date": 1513174341, "post_id": 47793958, "comment_id": 82551008, "body": "<code>readResources</code> and <code>randomInit</code> should be marked as <code>actual</code>, and there should be a &quot;common module&quot; that has &quot;expect&quot;ed those two functions :D"}, {"owner": {"reputation": 81, "user_id": 8854949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69965e456e56fbf3e33eb32de7ddcff3?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bisarahalli", "link": "https://stackoverflow.com/users/8854949/manoj-bisarahalli"}, "edited": false, "score": 0, "creation_date": 1513245072, "post_id": 47793958, "comment_id": 82581786, "body": "Thank You @ice1000"}], "tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": true, "score": 1, "last_activity_date": 1513174453, "last_edit_date": 1513174453, "creation_date": 1513170933, "answer_id": 47793958, "question_id": 47793359, "link": "https://stackoverflow.com/questions/47793359/can-anyone-here-explain-the-kotlin-native-spinner-app-project-structure-in-detai/47793958#47793958", "title": "Can anyone here explain the Kotlin/Native spinner app project structure in detail? Also the specifics on how different modules work", "body": "<p>This is easy. I suspect you're talking about Kotlin multiplatform modules.<br>\nConsider <code>print</code> and <code>println</code>.</p>\n\n<p>In the common module we can <code>expect</code> a print function:</p>\n\n<pre><code>expect fun print(a: String)\n</code></pre>\n\n<p>But we don't know how was it implemented, because the common module doesn't know anything about Java's <code>System.out</code>, as well as JavaScript's <code>console</code>.<br>\nBut the common module can <code>expect</code> such function that prints a <code>String</code> on screen, without providing an implementation.</p>\n\n<p>Since we have <code>print</code>, we can implement <code>println</code>:</p>\n\n<pre><code>fun println(a: String) = print(\"$a\\n\")\n</code></pre>\n\n<p>All codes above are inside the common module.<br>\nAnd all you have to do is to to implement <code>print</code> for JVM/JS spererately.</p>\n\n<p>For JVM:</p>\n\n<pre><code>actual fun print(a: String) = System.out.println(a)\n</code></pre>\n\n<p>For JS:</p>\n\n<pre><code>actual fun print(a: String) = console.log(a)\n</code></pre>\n\n<p>(Maybe) For Native:</p>\n\n<pre><code>actual fun print(a: String) = printf(a)\n</code></pre>\n\n<p>The three code blocks above are inside client modules.</p>\n\n<p>Consider you've designed a data format, you have encoding and decoding code. Those codes are used in your Android device (JVM), your backend server (JVM), your frontend webpage (JS), your native app (Native).<br>\nYou use Kotlin in all those sub projects but you want to write the encoder/decoder only once. Kotlin multiplatform module solves this probelm.</p>\n\n<h2>About the spinner app</h2>\n\n<p>It's not using the standard kotlin approach for creating multiplatform project. It's a trick on gradle.<br>\nThere's a <code>readResources</code> (and <code>randomInit</code> as well, for osx/linux) function that implements differently on platforms but of the same signature, and gradle will decide which <code>Kommon.kt</code> should be compiled with the client projects.</p>\n\n<p><code>readResources</code> and <code>randomInit</code> should be marked as <code>actual</code>, and there should be a \"common module\" that has \"expect\"ed those two functions.<br>\nThey didn't do this probably because Kotlin 1.2 (which brings stable multiplatform support) isn't out when KotlinConf holds.</p>\n"}], "owner": {"reputation": 81, "user_id": 8854949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69965e456e56fbf3e33eb32de7ddcff3?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bisarahalli", "link": "https://stackoverflow.com/users/8854949/manoj-bisarahalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 47793958, "answer_count": 1, "score": 1, "last_activity_date": 1513174453, "creation_date": 1513169057, "question_id": 47793359, "link": "https://stackoverflow.com/questions/47793359/can-anyone-here-explain-the-kotlin-native-spinner-app-project-structure-in-detai", "title": "Can anyone here explain the Kotlin/Native spinner app project structure in detail? Also the specifics on how different modules work", "body": "<p>I would like to specifically know how the <strong>common</strong> module is used by the individual <strong>client</strong> modules. Which are the truly common parts that is shared by all the clients and the server.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["generics", "kotlin"], "comments": [{"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "edited": false, "score": 5, "creation_date": 1513165506, "post_id": 47791566, "comment_id": 82545393, "body": "To call <code>getX()</code> on a generic <code>R</code> type, it would have to implement some interface. A generic type with no bound will not have a <code>getX</code> method. You could just have the parameter to <code>Generic</code> be of that interface type directly: <code>class Generic&lt;T&gt;(thingy: RInterface) { ... }</code>."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1513168187, "post_id": 47792037, "comment_id": 82546984, "body": "You can also use <code>operator invoke</code>."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 2, "creation_date": 1513168511, "post_id": 47792037, "comment_id": 82547190, "body": "And the standard library also has <code>public inline fun &lt;T&gt; MutableList(size: Int, init: (index: Int) -&gt; T): MutableList&lt;T&gt;</code>."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 7, "last_activity_date": 1513244743, "last_edit_date": 1513244743, "creation_date": 1513164932, "answer_id": 47792037, "question_id": 47791566, "link": "https://stackoverflow.com/questions/47791566/can-you-have-a-generic-primary-constructor-in-kotlin/47792037#47792037", "title": "Can you have a generic primary constructor in Kotlin?", "body": "<p>That is not possible directly.</p>\n\n<p>You can however achieve a desired result by using a factory method:</p>\n\n<pre><code>interface HasX&lt;out V&gt; {\n    val x: V\n}\n\nclass Generic&lt;T&gt;(val x: Int) {\n    companion object {\n        fun &lt;T, R : HasX&lt;Int&gt;&gt; create(thingy: R) = Generic&lt;T&gt;(thingy.x)\n    }\n}\n\nval result: Generic&lt;String&gt; = Generic.create(object : HasX&lt;Int&gt; {\n    override val x: Int = 12\n})\n</code></pre>\n\n<p>Typically factory methods start with lower case ( e.g. <code>mutableList</code>) there is nothing stopping you from doing it differently:</p>\n\n<pre><code>fun &lt;T, X : HasX&lt;Int&gt;&gt; Generic(thingy: X):Generic&lt;T&gt; = Generic(thingy.x)\n\nval result: Generic&lt;String&gt; = Generic(object : HasX&lt;Int&gt; {\n    override val x: Int = 12\n})\n</code></pre>\n\n<p>As noted by <a href=\"https://stackoverflow.com/users/9204/alexey-romanov\">@Alexey Romanow</a> parts of the Kotlin stdlib use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html#functions\" rel=\"nofollow noreferrer\">this approach</a>.</p>\n"}], "owner": {"reputation": 11622, "user_id": 1097451, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1516b785b675ba751aacdc05ae31764b?s=128&d=identicon&r=PG", "display_name": "Martin Drozdik", "link": "https://stackoverflow.com/users/1097451/martin-drozdik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4013, "favorite_count": 1, "accepted_answer_id": 47792037, "answer_count": 1, "score": 4, "last_activity_date": 1513244743, "creation_date": 1513163327, "question_id": 47791566, "link": "https://stackoverflow.com/questions/47791566/can-you-have-a-generic-primary-constructor-in-kotlin", "title": "Can you have a generic primary constructor in Kotlin?", "body": "<p>This would work:</p>\n\n<pre><code>class Generic&lt;T, R&gt;(thingy: R)\n{\n    val x = thingy.getX()\n}\n</code></pre>\n\n<p>But the parameter <code>R</code> should really not be a part of the class signature. It is relevant only at construction time. The same way a type parameter of a generic method has nothing to do with the type parameters of the class.</p>\n\n<p>However, this does not work:</p>\n\n<pre><code>class Generic&lt;T&gt;(thingy: R)\n{\n    val x = thingy.getX()\n}\n</code></pre>\n\n<p>neither does this:</p>\n\n<pre><code>class Generic&lt;T&gt;&lt;R&gt;(thingy: R)\n{\n    val x = thingy.getX()\n}\n</code></pre>\n\n<p>and I did not find the answer in the <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"noreferrer\">documentation</a>.</p>\n"}, {"tags": ["android", "build", "continuous-integration", "kotlin", "gitlab"], "comments": [{"owner": {"reputation": 1374, "user_id": 9037725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b4798fb7cc61e665b93dbd93e07a1?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Oberoi", "link": "https://stackoverflow.com/users/9037725/shivam-oberoi"}, "edited": false, "score": 0, "creation_date": 1513162447, "post_id": 47791227, "comment_id": 82543468, "body": "have you enables mutlidex true and added library for mutlidex?"}, {"owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "reply_to_user": {"reputation": 1374, "user_id": 9037725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2b4798fb7cc61e665b93dbd93e07a1?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam Oberoi", "link": "https://stackoverflow.com/users/9037725/shivam-oberoi"}, "edited": false, "score": 0, "creation_date": 1513162833, "post_id": 47791227, "comment_id": 82543718, "body": "yes, i&#39;ve edited the question"}, {"owner": {"reputation": 10624, "user_id": 4018207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4ef16a792fd139987cef521ec4fad50d?s=128&d=identicon&r=PG", "display_name": "AndiGeeky", "link": "https://stackoverflow.com/users/4018207/andigeeky"}, "edited": false, "score": 0, "creation_date": 1513444069, "post_id": 47791227, "comment_id": 82660379, "body": "@m.myalkin Found any solution?"}, {"owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "reply_to_user": {"reputation": 10624, "user_id": 4018207, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4ef16a792fd139987cef521ec4fad50d?s=128&d=identicon&r=PG", "display_name": "AndiGeeky", "link": "https://stackoverflow.com/users/4018207/andigeeky"}, "edited": false, "score": 1, "creation_date": 1513548666, "post_id": 47791227, "comment_id": 82684611, "body": "@AndiGeeky, no, exception did not appear several days"}, {"owner": {"reputation": 868, "user_id": 4970976, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fkqFs.jpg?s=128&g=1", "display_name": "bartonstanley", "link": "https://stackoverflow.com/users/4970976/bartonstanley"}, "edited": false, "score": 2, "creation_date": 1513639529, "post_id": 47791227, "comment_id": 82721714, "body": "I am seeing this issue on buddybuild but on my local development machine it works fine.  Any ideas are appreciated.  I tried enabling multidexing but it didn&#39;t change anything."}, {"owner": {"reputation": 1711, "user_id": 2699739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gLtnY.jpg?s=128&g=1", "display_name": "ashraful", "link": "https://stackoverflow.com/users/2699739/ashraful"}, "edited": false, "score": 0, "creation_date": 1516804631, "post_id": 47791227, "comment_id": 83839673, "body": "Delete app/build file and then run the app"}, {"owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "reply_to_user": {"reputation": 1711, "user_id": 2699739, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gLtnY.jpg?s=128&g=1", "display_name": "ashraful", "link": "https://stackoverflow.com/users/2699739/ashraful"}, "edited": false, "score": 0, "creation_date": 1516835676, "post_id": 47791227, "comment_id": 83857805, "body": "@ashraful I run it at CI server, there is no build directory because every build is clean"}], "answers": [{"comments": [{"owner": {"reputation": 1246, "user_id": 8769330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LegKQ.png?s=128&g=1", "display_name": "Fenil Patel", "link": "https://stackoverflow.com/users/8769330/fenil-patel"}, "reply_to_user": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "edited": false, "score": 0, "creation_date": 1513167486, "post_id": 47792726, "comment_id": 82546544, "body": "Have you added multidex dependencies, as per I wrote in code?"}, {"owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "edited": false, "score": 0, "creation_date": 1513167977, "post_id": 47792726, "comment_id": 82546870, "body": "yes, of course, I used <code>com.android.support:multidex:1.0.2</code>"}, {"owner": {"reputation": 1246, "user_id": 8769330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LegKQ.png?s=128&g=1", "display_name": "Fenil Patel", "link": "https://stackoverflow.com/users/8769330/fenil-patel"}, "reply_to_user": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "edited": false, "score": 0, "creation_date": 1513168170, "post_id": 47792726, "comment_id": 82546972, "body": "Ok, please follow this steps  <a href=\"https://developer.android.com/studio/build/multidex.html\" rel=\"nofollow noreferrer\">developer.android.com/studio/build/multidex.html</a>"}], "tags": [], "owner": {"reputation": 1246, "user_id": 8769330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LegKQ.png?s=128&g=1", "display_name": "Fenil Patel", "link": "https://stackoverflow.com/users/8769330/fenil-patel"}, "is_accepted": false, "score": -4, "last_activity_date": 1513167077, "creation_date": 1513167077, "answer_id": 47792726, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/47792726#47792726", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>please find here the solution of this problem,</p>\n\n<pre><code> defaultConfig {\n        ...\n        minSdkVersion 14\n        targetSdkVersion 21\n        ...\n\n        // Enabling multidex support.\n        multiDexEnabled true\n    }\ndependencies {\n  compile 'com.android.support:multidex:1.0.0'\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 868, "user_id": 4970976, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fkqFs.jpg?s=128&g=1", "display_name": "bartonstanley", "link": "https://stackoverflow.com/users/4970976/bartonstanley"}, "is_accepted": false, "score": 1, "last_activity_date": 1516383764, "last_edit_date": 1516383764, "creation_date": 1513807865, "answer_id": 47915091, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/47915091#47915091", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>Configuring for multidexing did not solve this issue for me.</p>\n\n<p>However I did come up with a resolution...of sorts.  Basically it involved creating a pull request for a second branch on the same commit as the build that was failing.  The build for this pull request succeeded, and then Bitbucket thought that the original pull request was ok and allowed us to merge, even though we had made no changes on that branch.  There is some unexplained weirdness there but the technique worked.</p>\n\n<p>Here's how I did it:</p>\n\n<p>Assume that the branch that is failing is called <code>bad-branch</code>.</p>\n\n<p>I created a new branch called <code>bad-branch-copy</code> on the commit that was common between <code>bad-branch</code> and <code>develop</code>.  Then I merged <code>bad-branch</code> into <code>bad-branch-copy</code>.  The end result of this was a fast forward such that <code>bad-branch-copy</code> ended up on the same commit as <code>bad-branch</code>.  I was expecting a separate commit so this result surprised me, but I was grasping at straws anyway so I kept going.</p>\n\n<p>I then pushed <code>bad-branch-copy</code> to GitHub and created a pull request from <code>bad-branch-copy</code> to <code>develop</code>.  This triggered a build on <code>bad-branch-copy</code> -> <code>develop</code>, which was successful.</p>\n\n<p>At that point, buddybuild showed a successful build on <code>bad-branch-copy</code> -> <code>develop</code> and still showed a failure on <code>bad-branch</code> -> <code>develop</code>.  However, Bitbucket showed a successful build on the pull request for <code>bad-branch</code>.  Yes, that's right: buddybuild showed a failure but Bitbucket said it was ok.  </p>\n\n<p>We were then able to merge the <code>bad-branch</code> pull request and all was well with the world.  Please don't ask me why, I will not answer. :)</p>\n\n<p>I think the same thing could be accomplished with</p>\n\n<pre><code>git checkout bad-build\ngit checkout -b bad-build-copy\ngit push origin bad-build-copy\n</code></pre>\n\n<p>followed by creating a pull request for bad-build-copy.</p>\n"}, {"tags": [], "owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "is_accepted": true, "score": 9, "last_activity_date": 1514223489, "creation_date": 1514223489, "answer_id": 47970777, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/47970777#47970777", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>It seems I found the solution.\nAt the build moment gradle was showing warnings for me:</p>\n\n<pre><code>Configuration 'compile' in project ':app' is deprecated. Use 'implementation' instead.\n\napp: 'androidProcessor' dependencies won't be recognized as kapt annotation processors. Please change the configuration name to 'kapt' for these artifacts: 'com.arello-mobile:moxy-compiler:1.5.3' and apply the kapt plugin: \"apply plugin: 'kotlin-kapt'\".\n</code></pre>\n\n<p>I made a misspelling and forgot to remove unnecessary annotationProcessor for library:</p>\n\n<pre><code>annotationProcessor \"com.arello-mobile:moxy-compiler:$moxyVersion\"\nkapt \"com.arello-mobile:moxy-compiler:$moxyVersion\"\n</code></pre>\n\n<p>So I removed first line.</p>\n\n<p>After that I applied kapt plugin <code>apply plugin: 'kotlin-kapt'</code> and fixed some build errors in code after it.</p>\n\n<p>After all I realized that I forgot to replace <code>compile</code> to <code>implementation</code> in some places. It is weird but without it build didn't work.</p>\n\n<p>This changes fix my error build.</p>\n"}, {"comments": [{"owner": {"reputation": 6208, "user_id": 558094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/459c338b7562d41ef6ab7a667891ebf6?s=128&d=identicon&r=PG", "display_name": "Vinayak Garg", "link": "https://stackoverflow.com/users/558094/vinayak-garg"}, "edited": false, "score": 2, "creation_date": 1521109839, "post_id": 48232296, "comment_id": 85595937, "body": "No need to clean build and waste time. Better to just restart Android Studio."}, {"owner": {"reputation": 54793, "user_id": 226958, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/F5gLZ.png?s=128&g=1", "display_name": "Nicolas Raoul", "link": "https://stackoverflow.com/users/226958/nicolas-raoul"}, "reply_to_user": {"reputation": 6208, "user_id": 558094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/459c338b7562d41ef6ab7a667891ebf6?s=128&d=identicon&r=PG", "display_name": "Vinayak Garg", "link": "https://stackoverflow.com/users/558094/vinayak-garg"}, "edited": false, "score": 1, "creation_date": 1529399171, "post_id": 48232296, "comment_id": 88848234, "body": "@VinayakGarg: The asker mentions they are building via gitlab ci, so Android Studio is irrelevant here."}, {"owner": {"reputation": 4319, "user_id": 2027237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6457db0676be7f14f63e0f45aec333d?s=128&d=identicon&r=PG", "display_name": "anneb", "link": "https://stackoverflow.com/users/2027237/anneb"}, "edited": false, "score": 6, "creation_date": 1532441296, "post_id": 48232296, "comment_id": 89969724, "body": "in a cordova project use <code>.&#47;platforms&#47;android&#47;gradlew clean</code>"}, {"owner": {"reputation": 1163, "user_id": 4034886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6450adeaa279566979a73b0c5fe2e3a1?s=128&d=identicon&r=PG&f=1", "display_name": "Pierrick Martelli&#232;re", "link": "https://stackoverflow.com/users/4034886/pierrick-martelli%c3%a8re"}, "edited": false, "score": 57, "creation_date": 1532715751, "post_id": 48232296, "comment_id": 90094059, "body": "Or in a cordova project use <code>cordova clean</code>"}, {"owner": {"reputation": 1281, "user_id": 2151779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bdde59d8e2de9cdbcf6c033f8cbceb?s=128&d=identicon&r=PG", "display_name": "ymerdrengene", "link": "https://stackoverflow.com/users/2151779/ymerdrengene"}, "edited": false, "score": 1, "creation_date": 1561054222, "post_id": 48232296, "comment_id": 99948755, "body": "Or in Flutter use <code>flutter clean</code>"}], "tags": [], "owner": {"reputation": 22594, "user_id": 746347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e5298acfce9a53921a374667104e3b95?s=128&d=identicon&r=PG", "display_name": "mixel", "link": "https://stackoverflow.com/users/746347/mixel"}, "is_accepted": false, "score": 111, "last_activity_date": 1515782739, "creation_date": 1515782739, "answer_id": 48232296, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/48232296#48232296", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p><code>./gradlew clean</code> fixed the same error for me.</p>\n"}, {"comments": [{"owner": {"reputation": 23192, "user_id": 2684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/Z9oZ0.jpg?s=128&g=1", "display_name": "Martin Marconcini", "link": "https://stackoverflow.com/users/2684/martin-marconcini"}, "edited": false, "score": 0, "creation_date": 1522340452, "post_id": 48265240, "comment_id": 86129609, "body": "Rebuild does it for me."}], "tags": [], "owner": {"reputation": 195, "user_id": 3911287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adabdc175ea73667766067667bfc980?s=128&d=identicon&r=PG&f=1", "display_name": "dazed", "link": "https://stackoverflow.com/users/3911287/dazed"}, "is_accepted": false, "score": 1, "last_activity_date": 1516027477, "creation_date": 1516027477, "answer_id": 48265240, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/48265240#48265240", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>I was able to get the problem to go away by closing and restarting Android Studio.  Perhaps even a Rebuild Project would have done it as well (did not try that though).</p>\n"}, {"tags": [], "owner": {"reputation": 6844, "user_id": 2535875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2KNqN.png?s=128&g=1", "display_name": "Md Imran Choudhury", "link": "https://stackoverflow.com/users/2535875/md-imran-choudhury"}, "is_accepted": false, "score": 4, "last_activity_date": 1516978566, "creation_date": 1516978566, "answer_id": 48463887, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/48463887#48463887", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>Above answer is mostly right but in my case, i get this exception when i crate same name <strong>java</strong> and <strong>kotlin</strong> file then deletes one of them. </p>\n\n<p>Solutions are: just <strong>Build -> Clean Project</strong>  my project and it works. And my project also enabled <strong>multiDex</strong>.</p>\n\n<pre><code>defaultConfig {\n        ...\n        // Enabling multidex support.\n        multiDexEnabled true\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 6080373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jZyJ1.png?s=128&g=1", "display_name": "oshurmamadov", "link": "https://stackoverflow.com/users/6080373/oshurmamadov"}, "is_accepted": false, "score": 4, "last_activity_date": 1539183070, "last_edit_date": 1539183070, "creation_date": 1524216000, "answer_id": 49938254, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/49938254#49938254", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>As mentioned above by @mixel cleaning gets the job done. But as an option not to do it manually just add the gradle 'clean' task into app run configuration so it will be done all the time before launch. Of cource, it can slow down the whole process a bit.</p>\n"}, {"tags": [], "owner": {"reputation": 572, "user_id": 3774425, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6232e60d3c5c9e28e8b4a60c64894baf?s=128&d=identicon&r=PG&f=1", "display_name": "JenniferG", "link": "https://stackoverflow.com/users/3774425/jenniferg"}, "is_accepted": false, "score": 0, "last_activity_date": 1551997147, "last_edit_date": 1551997147, "creation_date": 1525846566, "answer_id": 50246656, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/50246656#50246656", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>What resolved the issue for me was manually adding all the conflicting files manually. For example in my gradle file I had:</p>\n\n<pre><code>implementation 'com.android.support:support-compat:27.1.1'\n</code></pre>\n\n<p>it was underlined with red. I hovered over the line and android studio said there was a conflict with another file using a lower version. The error was similar to</p>\n\n<blockquote>\n  <p>come.android.support:support-annotations:26.0.1 conflicts/mix versions with 27.1.1.</p>\n</blockquote>\n\n<p>It gave me the names of the files and I manually added them with the corresponding version so they would all match</p>\n\n<pre><code>compile 'com.android.support:support-annotations:27.1.1'\ncompile 'com.android.support:support-compat:27.1.1'\ncompile 'com.android.support:support-core-ui:27.1.1'\ncompile 'com.android.support:animated-vector-drawable:27.1.1'\ncompile 'com.android.support:appcompat-v7:27.1.1'\ncompile 'com.android.support:design:27.1.1'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589, "user_id": 1026038, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b51d51e7549cc3e84367c5d66ef56a1d?s=128&d=identicon&r=PG", "display_name": "TheTC", "link": "https://stackoverflow.com/users/1026038/thetc"}, "edited": false, "score": 3, "creation_date": 1558717260, "post_id": 54731769, "comment_id": 99205983, "body": "Yep, this is the fix for Cordova projects. You can also just clean android side by adding <code>android</code> at the end of that command."}], "tags": [], "owner": {"reputation": 3948, "user_id": 3452348, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/75gGH.jpg?s=128&g=1", "display_name": "w3spi", "link": "https://stackoverflow.com/users/3452348/w3spi"}, "is_accepted": false, "score": 57, "last_activity_date": 1550395368, "creation_date": 1550395368, "answer_id": 54731769, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/54731769#54731769", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>For <strong>Cordova</strong> developers,</p>\n\n<p>If you get this build error in your project, as said <a href=\"https://stackoverflow.com/users/4034886/pierrick-martelli%c3%a8re\">Pierrick Martelli\u00e8re</a> in the comments of <a href=\"https://stackoverflow.com/a/48232296/3452348\">this answer</a>, in you project folder use :</p>\n\n<pre><code>cordova clean\n</code></pre>\n\n<p>It makes a cleaning and a build immediately</p>\n"}, {"tags": [], "owner": {"reputation": 916, "user_id": 2874418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NhGuM.jpg?s=128&g=1", "display_name": "Diego Malone", "link": "https://stackoverflow.com/users/2874418/diego-malone"}, "is_accepted": false, "score": 0, "last_activity_date": 1554322241, "creation_date": 1554322241, "answer_id": 55503519, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/55503519#55503519", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>None of the current solutions worked for me and it was fixed by simply disabling <code>Instant Run</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 790, "user_id": 3808178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6aadb872e7409e237cf04aa6d07982bc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Claude", "link": "https://stackoverflow.com/users/3808178/maxime-claude"}, "is_accepted": false, "score": 1, "last_activity_date": 1556653634, "creation_date": 1556653634, "answer_id": 55927790, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/55927790#55927790", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>Currently using <strong>Android Studio 3.3.2</strong> I just disabled the instant run and it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 7765900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u86np.jpg?s=128&g=1", "display_name": "Shashwat Gupta", "link": "https://stackoverflow.com/users/7765900/shashwat-gupta"}, "is_accepted": false, "score": 9, "last_activity_date": 1562411897, "creation_date": 1562411897, "answer_id": 56913598, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for/56913598#56913598", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<blockquote>\n  <p>Simple Solution</p>\n</blockquote>\n\n<p>For Ionic and Cordove Projects</p>\n\n<pre><code>cordova clean\n</code></pre>\n"}], "owner": {"reputation": 920, "user_id": 3901000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33e25456410624cde2ed9657fcf0d12d?s=128&d=identicon&r=PG", "display_name": "m.myalkin", "link": "https://stackoverflow.com/users/3901000/m-myalkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38499, "favorite_count": 8, "accepted_answer_id": 47970777, "answer_count": 12, "score": 55, "last_activity_date": 1562411897, "creation_date": 1513162311, "last_edit_date": 1513162762, "question_id": 47791227, "link": "https://stackoverflow.com/questions/47791227/java-lang-illegalstateexception-dex-archives-setting-dex-extension-only-for", "title": "java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files", "body": "<p>I build the project at gitlab ci </p>\n\n<pre><code>./gradlew assembleDebug --stacktrace\n</code></pre>\n\n<p>and sometimes it throws an error:</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n* What went wrong:\nExecution failed for task ':app:transformClassesWithDexBuilderForDebug'.\n&gt; com.android.build.api.transform.TransformException: java.lang.IllegalStateException: Dex archives: setting .DEX extension only for .CLASS files\n</code></pre>\n\n<p>At my local pc it works correctly.</p>\n\n<p>kotlin version is 1.2</p>\n\n<p>multidex is enabled</p>\n\n<p>What is the reason of this error?</p>\n"}, {"tags": ["java", "c#", "kotlin"], "comments": [{"owner": {"reputation": 4573, "user_id": 395685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/506a37c8660a6faa6382086e4a538811?s=128&d=identicon&r=PG", "display_name": "Nyerguds", "link": "https://stackoverflow.com/users/395685/nyerguds"}, "edited": false, "score": 0, "creation_date": 1513163263, "post_id": 47791219, "comment_id": 82544020, "body": "Java doesn&#39;t have output parameters..."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 115, "user_id": 5039091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da57d9a5bd8838e5fe7b6768cd4b5098?s=128&d=identicon&r=PG&f=1", "display_name": "Duke", "link": "https://stackoverflow.com/users/5039091/duke"}, "edited": false, "score": 0, "creation_date": 1513168616, "post_id": 47791432, "comment_id": 82547245, "body": "Note &quot;JVM-based&quot;."}, {"owner": {"reputation": 115, "user_id": 5039091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da57d9a5bd8838e5fe7b6768cd4b5098?s=128&d=identicon&r=PG&f=1", "display_name": "Duke", "link": "https://stackoverflow.com/users/5039091/duke"}, "edited": false, "score": 0, "creation_date": 1513169529, "post_id": 47791432, "comment_id": 82547827, "body": "Understood. I thought this &quot;and I don&#39;t know of any language which does&quot; was generic."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1513162903, "creation_date": 1513162903, "answer_id": 47791432, "question_id": 47791219, "link": "https://stackoverflow.com/questions/47791219/interface-generics-overload/47791432#47791432", "title": "Interface Generics Overload", "body": "<p>JVM doesn't allow overloading interfaces, classes, or methods on number of generic parameters. </p>\n\n<p>A JVM-based language could allow this by giving different names to these two interfaces in bytecode, but neither Java nor Kotlin do (and I don't know of any language which does).</p>\n"}], "owner": {"reputation": 115, "user_id": 5039091, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da57d9a5bd8838e5fe7b6768cd4b5098?s=128&d=identicon&r=PG&f=1", "display_name": "Duke", "link": "https://stackoverflow.com/users/5039091/duke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 47791432, "answer_count": 1, "score": 1, "last_activity_date": 1513162957, "creation_date": 1513162283, "last_edit_date": 1513162957, "question_id": 47791219, "link": "https://stackoverflow.com/questions/47791219/interface-generics-overload", "title": "Interface Generics Overload", "body": "<p>I can do the following in c#. Is it possible to do the same in kotlin or java?</p>\n\n<pre><code>public interface IFactory&lt;in TModel, out TOutModel&gt;\n{\n    TOutModel Create(TModel model1);\n}\n\npublic interface IFactory&lt;in TModel1, in TModel2, out TOutModel&gt;\n{\n    TOutModel Create(TModel1 model1, TModel2 model2);\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2652, "user_id": 3007180, "user_type": "registered", "accept_rate": 13, "profile_image": "https://i.stack.imgur.com/4rPnk.jpg?s=128&g=1", "display_name": "Hardik Chauhan", "link": "https://stackoverflow.com/users/3007180/hardik-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513167189, "creation_date": 1513167189, "answer_id": 47792764, "question_id": 47790342, "link": "https://stackoverflow.com/questions/47790342/add-language-to-keyboard-without-opening-settings/47792764#47792764", "title": "Add language to keyboard without opening settings", "body": "<p>You can try to change the phone's Locale programmatically by this,</p>\n\n<pre><code>Locale locale = new Locale(language);\nLocale.setDefault(locale);\n</code></pre>\n\n<p>But it will only work above API level 16.\nAn also after changing that you might need to change the screen configuration to apply the changes to your app.</p>\n"}], "owner": {"reputation": 200, "user_id": 6668935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMbfx.jpg?s=128&g=1", "display_name": "Sayed El-Abady", "link": "https://stackoverflow.com/users/6668935/sayed-el-abady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1513167189, "creation_date": 1513159789, "last_edit_date": 1513166229, "question_id": 47790342, "link": "https://stackoverflow.com/questions/47790342/add-language-to-keyboard-without-opening-settings", "title": "Add language to keyboard without opening settings", "body": "<p>There's application which restricts users from opening the settings, if they tries to open settings it show login screen which he'll need to put password for managers of the app.\nNow I need to add feature that makes him able to add <code>language</code> without opening settings. Specifically add Arabic language to the <code>keyboard</code>.</p>\n\n<p>All I got from search that I can translate the app to another <code>language</code> or start intent to the specific page of adding <code>language</code> which is restricted as it belongs to settings package.</p>\n\n<p>There's possible way to do that? by writing directly to the settings?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 2, "creation_date": 1513158156, "post_id": 47789779, "comment_id": 82540653, "body": "Are you trying to make this into an extension on <code>Activity</code>? What did you try so far?"}, {"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1513158185, "post_id": 47789779, "comment_id": 82540681, "body": "<code>hideKeyboard(activity: Activity)</code> =&gt; <code>Activity.hideKeyboard()</code> and <code>activity</code> =&gt; <code>this</code> ?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1513158258, "post_id": 47789779, "comment_id": 82540727, "body": "@Selvin it could be an extension on <code>Activity?</code> as well so that the null check still makes sense"}, {"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1513158301, "post_id": 47789779, "comment_id": 82540762, "body": "I didn&#39;t wrote a line in Kotlin :)"}], "answers": [{"comments": [{"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1513158415, "post_id": 47789863, "comment_id": 82540844, "body": "<code>val view: View = currentFocus</code> could cause a NPE. It should be declared as nullable"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 4, "last_activity_date": 1513158283, "creation_date": 1513158283, "answer_id": 47789863, "question_id": 47789779, "link": "https://stackoverflow.com/questions/47789779/how-can-i-write-extension-functions-in-kotlin/47789863#47789863", "title": "How can I write Extension Functions in Kotlin?", "body": "<p>You can even do that with an automatic refactoring provided by the IDE: place the cursor on the parameter that you want to convert to receiver, press <kbd>Alt</kbd>+<kbd>Enter</kbd> and select <strong>Convert parameter to receiver</strong>. </p>\n\n<p>The result is:</p>\n\n<pre><code>fun Activity.hideKeyboard() {\n    if (this != null) { // Note: this check is redundant, since the type is not-null\n        window?.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_SATE_HIDDEN)\n        val view: View = currentFocus\n        if (true) run {\n            val imm = getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n            imm.hideSoftInputFromWindow(view.windowToken, 0)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1387, "user_id": 651377, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/537563472e02359f184f0d4a5da446a5?s=128&d=identicon&r=PG", "display_name": "Alok Gupta", "link": "https://stackoverflow.com/users/651377/alok-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1592735365, "creation_date": 1592735365, "answer_id": 62497295, "question_id": 47789779, "link": "https://stackoverflow.com/questions/47789779/how-can-i-write-extension-functions-in-kotlin/62497295#62497295", "title": "How can I write Extension Functions in Kotlin?", "body": "<p><em><strong>How to create Extension Function</strong></em> (Object Class) :</p>\n<pre><code>object ViewExtension{\n\n fun CustomSpinner.validate(): Boolean  {\n    if(!this.isSelected){\n        this.setHintTextColor(ContextCompat.getColor(this.context,android.R.color.holo_red_light))\n        this.setSpinnerHint(this.context.getString(R.string.please_select))\n        return false\n    }\n    return true\n }\n\n fun TextInputLayout.validate(): Boolean{\n    if(TextUtils.isEmpty(editText?.text)){\n        this.error =  this.context.getString(R.string.required)\n        return false\n    }\n    return true\n }\n}\n</code></pre>\n<p><em><strong>How to use extension funtion</strong></em></p>\n<pre><code>fun validateFields(): Boolean{\n    var allfieldsSelected = true\n\n    textViewDetails.validate().apply {\n        if(!this)\n            allfieldsSelected = false\n    }\n    \n    priority_spinner.validate().apply {\n        if(!this)\n            allfieldsSelected = false\n    }\n\n }\n</code></pre>\n<p>Also another important part is we have import the validate method before we use it :</p>\n<pre><code>import com.example.activities.ViewExtension.validate\n</code></pre>\n"}], "owner": {"reputation": 1246, "user_id": 8769330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LegKQ.png?s=128&g=1", "display_name": "Fenil Patel", "link": "https://stackoverflow.com/users/8769330/fenil-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1592735365, "creation_date": 1513157998, "last_edit_date": 1514961417, "question_id": 47789779, "link": "https://stackoverflow.com/questions/47789779/how-can-i-write-extension-functions-in-kotlin", "title": "How can I write Extension Functions in Kotlin?", "body": "<p>I just want to convert my normal function to extension function in Kotlin. </p>\n\n<p>Here is my function,</p>\n\n<pre><code>fun hideKeyboard(activity: Activity) {\n  if (activity != null) {\n    activity.window?.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_SATE_HIDDEN)\n    val view: View = activity.currentFocus\n        if (true) run {\n           val imm = activity.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n           imm.hideSoftInputFromWindow(view.windowToken, 0)\n                }\n            }\n        }\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "code-completion"], "answers": [{"tags": [], "owner": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "is_accepted": true, "score": 7, "last_activity_date": 1513172641, "last_edit_date": 1513172641, "creation_date": 1513154237, "answer_id": 47788669, "question_id": 47788312, "link": "https://stackoverflow.com/questions/47788312/kotlin-auto-complete-overrides-in-android-studio/47788669#47788669", "title": "Kotlin auto complete overrides in Android Studio", "body": "<p><code>SimpleOnGestureListener</code> is a non-abstract class. Hence the IDE doesn't show the <code>Implement methods</code> options by default. The IDE shows this option only when there is at least one method that's not implemented in the class.</p>\n\n<p>If you want to show the <code>Override methods</code> option, then place the cursor inside the braces and choose <code>Code -&gt; Override Methods...</code> (<kbd>Ctrl</kbd>+<kbd>O</kbd>), or if you already know the methods that you want to override, just start typing the method name and it will show up in auto complete.</p>\n"}, {"comments": [{"owner": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "edited": false, "score": 1, "creation_date": 1513172712, "post_id": 47788791, "comment_id": 82549923, "body": "I didn&#39;t mention the shortcut key coz I didn&#39;t know it for Windows. Seems it&#39;s Ctrl + O for windows as well. Anyways, thanks, I updated my answer."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "reply_to_user": {"reputation": 16154, "user_id": 4747587, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/VdsH3.png?s=128&g=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/4747587/henry"}, "edited": false, "score": 0, "creation_date": 1513173701, "post_id": 47788791, "comment_id": 82550579, "body": "@Henry don&#39;t worry :D"}], "tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 8, "last_activity_date": 1513155528, "last_edit_date": 1513155528, "creation_date": 1513154663, "answer_id": 47788791, "question_id": 47788312, "link": "https://stackoverflow.com/questions/47788312/kotlin-auto-complete-overrides-in-android-studio/47788791#47788791", "title": "Kotlin auto complete overrides in Android Studio", "body": "<p>You can use <kbd>Ctrl</kbd>+<kbd>O</kbd> inside the <code>object : Xxx</code> block to open a dialog to see methods to override, and <kbd>Ctrl</kbd>+<kbd>I</kbd> to see methods to implement.</p>\n\n<p>This is nearly the same as Henry's answer, but he uses mouse, I use keyboard.</p>\n\n<p>Click or press enter on some methods to generate empty implementations, and type letters to do text-based search.</p>\n\n<p>If you didn't find what you expected, you're probably overriding the wrong class/interface.</p>\n\n<p>If you have abstract methods not overriden, you'll see red wave line under <code>object</code>. <kbd>Alt</kbd>+<kbd>Enter</kbd> will help you solve problem in such situation.</p>\n"}], "owner": {"reputation": 13035, "user_id": 305135, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/cf9b63f6e0e2d709993723d9b9be79cf?s=128&d=identicon&r=PG", "display_name": "AVEbrahimi", "link": "https://stackoverflow.com/users/305135/avebrahimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2782, "favorite_count": 0, "accepted_answer_id": 47788669, "answer_count": 2, "score": 5, "last_activity_date": 1513172641, "creation_date": 1513152763, "last_edit_date": 1513154730, "question_id": 47788312, "link": "https://stackoverflow.com/questions/47788312/kotlin-auto-complete-overrides-in-android-studio", "title": "Kotlin auto complete overrides in Android Studio", "body": "<p>I have this variable defined in a Kotlin file, but Android Studio doesn't suggest implementing methods, am I missing something :</p>\n\n<pre><code>private val mGestureListener = object : GestureDetector.SimpleOnGestureListener() {\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 0, "creation_date": 1513146644, "post_id": 47785973, "comment_id": 82534777, "body": "I&#39;m not 100% sure, but if your fields look like <code>@Inject lateinit var</code>, they might not wind up as <code>@Inject</code>-annotated fields in the class file. I&#39;m still trying to wrap my brain around <a href=\"https://kotlinlang.org/docs/reference/annotations.html\" rel=\"nofollow noreferrer\">how Kotlin handles annotations</a>, but try <code>@field:Inject</code> just in case, and definitely use it for <code>@Named</code> and other qualifier annotations per <a href=\"https://stackoverflow.com/q/36199796/1426891\">this SO answer</a>. Also, please post the ViewHolder code: for now it looks like Dagger can&#39;t find any <code>@Inject</code> fields and until we see it I can&#39;t do much better."}], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1513152973, "creation_date": 1513152973, "answer_id": 47788356, "question_id": 47785973, "link": "https://stackoverflow.com/questions/47785973/dagger-2-cant-inject-from-subcomponent/47788356#47788356", "title": "Dagger 2 can&#39;t inject from subcomponent", "body": "<p>The <em>Kotlin</em> proptery itself is not known to <em>Dagger</em>. What you are trying to achieve could be handled as a field or setter injection. Since a setter is generated with any property I usually go for <code>@set:Inject</code>.</p>\n\n<pre><code>@set:Inject lateinit var myVar: Type\n</code></pre>\n\n<p>Alternatively you can consider constructor injections. Like this you can define the properties as <code>val</code> and private.</p>\n"}, {"comments": [{"owner": {"reputation": 2540, "user_id": 3456952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a42b2c66c6ca8051bf42e5b8be0d52a8?s=128&d=identicon&r=PG&f=1", "display_name": "TheHebrewHammer", "link": "https://stackoverflow.com/users/3456952/thehebrewhammer"}, "edited": false, "score": 0, "creation_date": 1513183855, "post_id": 47788614, "comment_id": 82557528, "body": "Thanks, this clears it up. I moved my <code>mapOf</code> into a new dagger module that creates a map using <code>@Binds @IntoMap @IntKey(R.layout.view_holder_layout_id)</code> now everything is working!"}], "tags": [], "owner": {"reputation": 31520, "user_id": 1837367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v8XDk.jpg?s=128&g=1", "display_name": "David Medenjak", "link": "https://stackoverflow.com/users/1837367/david-medenjak"}, "is_accepted": true, "score": 1, "last_activity_date": 1513153993, "creation_date": 1513153993, "answer_id": 47788614, "question_id": 47785973, "link": "https://stackoverflow.com/questions/47785973/dagger-2-cant-inject-from-subcomponent/47788614#47788614", "title": "Dagger 2 can&#39;t inject from subcomponent", "body": "<p><code>inject(viewHolder: RecyclerView.ViewHolder)</code> will always be a no-op, because framework classes (or most libraries in this case) don't have any <code>@Inject</code> annotated fields. Dagger will only generate code for the class named in your <code>inject(MyClass instance)</code> methods, <strong>not for any of its sub-types</strong>.</p>\n\n<p>So if you have a <code>ErrorViewHolder : RecyclerView.ViewHolder</code>, then you have to use a component that has a <code>inject(ErrorViewHolder instance)</code> method to generate code to inject <code>ErrorViewHolder</code>.<br>\nTo clarify, because it's generated code&mdash;and not dynamic reflection at runtime&mdash;calling <code>inject(viewHolder: RecyclerView.ViewHolder)</code> like you do with an <code>viewHolder : ErrorViewHolder</code> will still try to inject fields for <code>RecyclerView.ViewHolder</code>, not <code>ErrorViewHolder</code>. And <code>RecyclerView.ViewHolder</code> will always be a no-op as mentioned.</p>\n\n<p>You will have to modify your setup quite a bit so that you can provide a specific subcomponent that can inject a specific viewholder, you can't use one \"generic\" component for different types. You could create a base class between <code>RecyclerView.ViewHolder</code> and <code>ErrorViewHolder</code>, but then again, you could only inject fields declared (and <code>@Inject</code> annotated) in your base class, not the specific child.</p>\n"}], "owner": {"reputation": 2540, "user_id": 3456952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a42b2c66c6ca8051bf42e5b8be0d52a8?s=128&d=identicon&r=PG&f=1", "display_name": "TheHebrewHammer", "link": "https://stackoverflow.com/users/3456952/thehebrewhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "accepted_answer_id": 47788614, "answer_count": 2, "score": 4, "last_activity_date": 1529490248, "creation_date": 1513142270, "last_edit_date": 1529490248, "question_id": 47785973, "link": "https://stackoverflow.com/questions/47785973/dagger-2-cant-inject-from-subcomponent", "title": "Dagger 2 can&#39;t inject from subcomponent", "body": "<p>I know that generally it shouldn't make a difference that this is using Kotlin, but I've run into odd cases where the <code>@Named</code> qualifier needed a scope in Kotlin.</p>\n\n<p>I have a <code>ViewHolderFactory</code> class that allows me to create a simple mapping of view type -> view holder class:</p>\n\n<pre><code>@Singleton\nclass ViewHolderFactoryImpl @Inject constructor(\n        private val viewHolderComponentProvider: Provider&lt;ViewHolderSubcomponent.Builder&gt;\n): ViewHolderFactory(mapOf(\n        R.layout.view_error to ErrorViewHolder::class.java,\n        R.layout.view_soft_error to SoftErrorViewHolder::class.java,\n        R.layout.view_empty to EmptyViewHolder::class.java,\n        R.layout.view_loading to LoadingViewHolder::class.java,\n        R.layout.item_got_it to GotItViewHolder::class.java)) {\n\n    override fun createViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder {\n        val viewHolder = super.createViewHolder(parent, viewType)\n        if (viewHolder is Injectable) {\n            viewHolderComponentProvider.get()\n                    .viewHolder(viewHolder)\n                    .build()\n                    .inject(viewHolder)\n        }\n        return viewHolder\n    }\n}\n</code></pre>\n\n<p>The ViewHolderSubcomponent is defined below, the goal is to be able to create one subcomponent for each view holder and inject a few things:</p>\n\n<pre><code>@ViewHolderScope\n@Subcomponent(modules = [ViewHolderModule::class])\ninterface ViewHolderSubcomponent {\n\n    fun inject(viewHolder: RecyclerView.ViewHolder)\n\n    fun viewHolder(): RecyclerView.ViewHolder\n\n    @Subcomponent.Builder\n    interface Builder {\n        @BindsInstance\n        fun viewHolder(viewHolder: RecyclerView.ViewHolder): Builder\n        fun build(): ViewHolderSubcomponent\n    }\n}\n</code></pre>\n\n<p>The ViewHolderModule is defined as:</p>\n\n<pre><code>@Module\nclass ViewHolderModule {\n    @Provides @ViewHolderScope\n    fun provideSectionTitleViewHolder(viewHolder: RecyclerView.ViewHolder): SectionTitleViewHolder =\n            SectionTitleViewHolder(viewHolder.itemView)\n}\n</code></pre>\n\n<p>When I run the app I find that the injection didn't work, my <code>@Inject lateinit var</code> values are null. Looking at the generated code I can see why:</p>\n\n<pre><code>@Override\npublic void inject(RecyclerView.ViewHolder viewHolder) {\n  MembersInjectors.&lt;RecyclerView.ViewHolder&gt;noOp().injectMembers(viewHolder);\n}\n</code></pre>\n\n<p>There's no <code>MembersInjectors&lt;RecyclerView.ViewHolder&gt;</code> created for this subcomponent. I can't figure out how to get this to work. I know that I should be able to inject into objects not created by dagger, I just can't quite figure out what I'm missing here.</p>\n\n<p>Oh, if it helps any, I did make sure to include the <code>ViewHolderSubcomponent</code> in my <code>AppModule</code>'s list of <code>subcomponents</code></p>\n"}, {"tags": ["kotlin", "actor", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 2, "last_activity_date": 1513237655, "creation_date": 1513237655, "answer_id": 47808295, "question_id": 47783982, "link": "https://stackoverflow.com/questions/47783982/how-can-i-connect-a-producer-to-an-actor/47808295#47808295", "title": "How can I connect a Producer to an Actor?", "body": "<p>Assuming the following definitions:</p>\n\n<pre><code>val producer = produce&lt;T&gt; { ... }\nval actor = actor&lt;T&gt; { ... }\n</code></pre>\n\n<p>You can write the following code to launch a helper coroutine that sends all produced messages to your actor:</p>\n\n<pre><code>launch { producer.toChannel(actor) }\n</code></pre>\n\n<p>If you want to wait until this copying job is done, you can simply use <code>producer.toChannel(actor)</code> for your coroutine. <code>toChannel</code> is a terminal operation that waits until the processing is complete.</p>\n"}], "owner": {"reputation": 530, "user_id": 1061085, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/8ea55e594616b6270a273976beb5b190?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/1061085/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 47808295, "answer_count": 1, "score": 4, "last_activity_date": 1513237655, "creation_date": 1513126749, "question_id": 47783982, "link": "https://stackoverflow.com/questions/47783982/how-can-i-connect-a-producer-to-an-actor", "title": "How can I connect a Producer to an Actor?", "body": "<p>How can I connect a producer, created with the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental.channels/produce.html\" rel=\"nofollow noreferrer\"><code>produce</code> </a> coroutine builder, to an actor, created with the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental.channels/actor.html\" rel=\"nofollow noreferrer\"><code>actor</code></a> coroutine builder?</p>\n\n<p>Basically, I'd like the send channel of the <code>producer</code> to be the receive channel of the <code>actor</code>. Is there a simple way to do that?</p>\n\n<p>I couldn't find anything in the documentation allowing me to explicitly specify the channel to be used by the producer or actor.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513151180, "post_id": 47783929, "comment_id": 82536737, "body": "FYI what you propose is considered to be a code smell, e.i. it is strongly recommended not to replace <code>if</code> with chaining scoping  functions"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513167991, "post_id": 47783929, "comment_id": 82546879, "body": "Good input @voddan, I&#39;m just thinking if there&#39;s way I could get rid of the <code>!= null</code> comparison. It makes me feel like one is comparing <code>if (x != true)</code> type of feeling."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513169946, "post_id": 47783929, "comment_id": 82548098, "body": "I see what you mean. There is no skipping <code>!= null</code> in Kotlin , and it is on purpose. Since in Kotlin most types are non-null, the <code>null</code> value looses its meaning as universal <code>false</code>. I got used to typing it, and it is not so bad. Besides it speeds up reading the code"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513170016, "post_id": 47783929, "comment_id": 82548148, "body": "BTW, <code>if (x != true)</code> is a legitimate code if <code>x</code> is <code>Boolean?</code>. Go figure ))"}, {"owner": {"reputation": 832, "user_id": 5009459, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f726d0f8972102c15733fff4a01d61dc?s=128&d=identicon&r=PG", "display_name": "JBarros35", "link": "https://stackoverflow.com/users/5009459/jbarros35"}, "edited": false, "score": 0, "creation_date": 1600957129, "post_id": 47783929, "comment_id": 113258699, "body": "what is the problem with old plain IF THEN ELSE? why so many effort for just a plain and simple stuff like that?"}], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1513127375, "post_id": 47784031, "comment_id": 82529433, "body": "Ya, agree for simple if-else, it&#39;s good. I just don&#39;t like to see the <code>!= null</code> comparison."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1513137168, "post_id": 47784031, "comment_id": 82531805, "body": "In addition, you can <code>variable?.let(::doSomething) ?: doOtherThing()</code> :D"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513151035, "post_id": 47784031, "comment_id": 82536636, "body": "What if <code>doSomething(it)</code> returns <code>null</code>?"}, {"owner": {"reputation": 3852, "user_id": 7079453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35f4fd1c0eaa060ffdc533c89b481e9?s=128&d=identicon&r=PG&f=1", "display_name": "F. George", "link": "https://stackoverflow.com/users/7079453/f-george"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513151801, "post_id": 47784031, "comment_id": 82537055, "body": "As @voddan stated, this is NOT the same as the original code. <code>doOtherThing()</code> will be invoked if <code>doSomething()</code> has a nullable return type and returns null."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513167778, "post_id": 47784031, "comment_id": 82546746, "body": "Nice catch @voddan!"}, {"owner": {"reputation": 1495, "user_id": 15789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/76c867c8e089ac1059e1b5f2a0eba0a6?s=128&d=identicon&r=PG", "display_name": "RuntimeException", "link": "https://stackoverflow.com/users/15789/runtimeexception"}, "edited": false, "score": 1, "creation_date": 1583939195, "post_id": 47784031, "comment_id": 107281875, "body": "I am not really sure if such constructs are more readable than if else. Instead of reading code vertically, we spend the same time reading it horizontally."}], "tags": [], "owner": {"reputation": 1022, "user_id": 3638966, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/720326815f0a1d2d4e35d159c163b93b?s=128&d=identicon&r=PG&f=1", "display_name": "diesieben07", "link": "https://stackoverflow.com/users/3638966/diesieben07"}, "is_accepted": false, "score": 3, "last_activity_date": 1513127165, "creation_date": 1513127165, "answer_id": 47784031, "question_id": 47783929, "link": "https://stackoverflow.com/questions/47783929/kotlin-nullability-check-if-else-functional-approach-how/47784031#47784031", "title": "Kotlin nullability check if-else functional approach...How?", "body": "<p>You can use the elvis-operator <code>?:</code> like so:</p>\n\n<pre><code>variable?.let { doSomething(it) } ?: doOtherThing()\n</code></pre>\n\n<p>However personally I think that this gets quite unreadable very quickly. There is nothing wrong with an if-expression.</p>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1513167696, "post_id": 47788326, "comment_id": 82546682, "body": "I like the if-else style. I just don&#39;t like the <code>!= null</code> explicit check. <code>?.let</code> allow us to get away from using <code>!= null</code>, but that only applies to when we handle the positive condition, not both."}, {"owner": {"reputation": 303, "user_id": 2363767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2b73eed24f9a4f51f1c9c50c7f6ecd?s=128&d=identicon&r=PG", "display_name": "jasiek.miko", "link": "https://stackoverflow.com/users/2363767/jasiek-miko"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1513335608, "post_id": 47788326, "comment_id": 82624573, "body": "I understand the aversion to explicitly using <code>null</code>s - since they are such a plague in Java, but I think it&#39;s still worth using when the it&#39;s the clearest way to show the intent of the code. And in the case of a piece of procedural code conditioned on the value being null or not, I&#39;d argue that is clearest.  The fact that kotlin doesn&#39;t come with an <code>Optional</code> type (or equivalent) hints that <code>null</code> is a first-class citizen, under its strong null safety mechanism. Don&#39;t be afraid to use it as such."}], "tags": [], "owner": {"reputation": 303, "user_id": 2363767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2b73eed24f9a4f51f1c9c50c7f6ecd?s=128&d=identicon&r=PG", "display_name": "jasiek.miko", "link": "https://stackoverflow.com/users/2363767/jasiek-miko"}, "is_accepted": false, "score": 1, "last_activity_date": 1513152830, "creation_date": 1513152830, "answer_id": 47788326, "question_id": 47783929, "link": "https://stackoverflow.com/questions/47783929/kotlin-nullability-check-if-else-functional-approach-how/47788326#47788326", "title": "Kotlin nullability check if-else functional approach...How?", "body": "<p>Another approach which might ring well with functional style is the use of when, which is very close to pattern matching:</p>\n\n<pre><code>when(variable) {\n    null -&gt; doOtherThingSomething()\n    else -&gt; doSomething(variable)\n}\n</code></pre>\n\n<p>I would argue, however, that you should be careful with abandoning the classic <code>if</code> statement, if what you're after is its natural purpose - conditional execution. If you're calculating a value in two different ways and then using it in the same way, this approach makes sense. But if your code paths diverge at this point and don't meet again, then <code>if</code> provides a clearer intent.</p>\n"}, {"tags": [], "owner": {"reputation": 1246, "user_id": 8769330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LegKQ.png?s=128&g=1", "display_name": "Fenil Patel", "link": "https://stackoverflow.com/users/8769330/fenil-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1513165170, "last_edit_date": 1513165170, "creation_date": 1513164528, "answer_id": 47791922, "question_id": 47783929, "link": "https://stackoverflow.com/questions/47783929/kotlin-nullability-check-if-else-functional-approach-how/47791922#47791922", "title": "Kotlin nullability check if-else functional approach...How?", "body": "<p>You can map null-able value if not null by using ternary operator to check not null condition with If...Else Statements.</p>\n\n<p>Here, I had wrote some code snippet to check value null or not , </p>\n\n<blockquote>\n  <p>Case 1: value initialized</p>\n</blockquote>\n\n<pre><code>  fun main(args: Array&lt;String&gt;) {\n\n   val value:Int ?= 10\n\n   val mapped = value?.let { \"Value is == $value\" } ?: \"Value not initialized...\"\n\n   println(mapped)\n}\n</code></pre>\n\n<p>You gotta result: Value is == 10</p>\n\n<blockquote>\n  <p>Case 2: value set remains null</p>\n</blockquote>\n\n<pre><code>  fun main(args: Array&lt;String&gt;) {\n\n   val value:Int ?= null\n\n   val mapped = value?.let { \"Value is == $value\" } ?: \"Value not initialized...\"\n\n   println(mapped)\n}\n</code></pre>\n\n<p>You gotta result: Value not initialized...</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2858, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1593764690, "creation_date": 1513126354, "last_edit_date": 1593764690, "question_id": 47783929, "link": "https://stackoverflow.com/questions/47783929/kotlin-nullability-check-if-else-functional-approach-how", "title": "Kotlin nullability check if-else functional approach...How?", "body": "<p>For simple check like</p>\n\n<pre><code>if (variable != null) {\n   doSomething(variable)\n}\n</code></pre>\n\n<p>We could change to </p>\n\n<pre><code>variable?.let { doSometing(it) }\n</code></pre>\n\n<p>However for a case with else</p>\n\n<pre><code>if (variable != null) {\n   doSomething(variable)\n} else {\n   doOtherThing()\n}\n</code></pre>\n\n<p>Is there a way of doing so in a single function? Is there something like either?</p>\n"}, {"tags": ["java", "ssl", "https", "kotlin"], "comments": [{"owner": {"reputation": 5633, "user_id": 4033292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/TwIH9.jpg?s=128&g=1", "display_name": "Derrops", "link": "https://stackoverflow.com/users/4033292/derrops"}, "edited": false, "score": 1, "creation_date": 1513121594, "post_id": 47783200, "comment_id": 82527919, "body": "You will need to import your keystore into your jvm runtime. A self signed certificate will just give you a warning in the browser that you will have to trust that signed cert yourself. I have seen this be a massive issue in enterprise environments with companies having security policies which prevent this."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1513121786, "post_id": 47783200, "comment_id": 82527968, "body": "Why? What is the point of HTTPS to the localhost?"}, {"owner": {"reputation": 4026, "user_id": 1117848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1215059/picture?type=large", "display_name": "Benjamin H", "link": "https://stackoverflow.com/users/1117848/benjamin-h"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1513123453, "post_id": 47783200, "comment_id": 82528437, "body": "@ejp I would like to load a HTML file from a SSL-protected web server that (optionally) includes a javascript file served locally.  When I attempted to serve the js file from a non-SSL <a href=\"http://localhost/thefile.js\" rel=\"nofollow noreferrer\">localhost/thefile.js</a> the browser correctly blocked it."}, {"owner": {"reputation": 4026, "user_id": 1117848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1215059/picture?type=large", "display_name": "Benjamin H", "link": "https://stackoverflow.com/users/1117848/benjamin-h"}, "reply_to_user": {"reputation": 5633, "user_id": 4033292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/TwIH9.jpg?s=128&g=1", "display_name": "Derrops", "link": "https://stackoverflow.com/users/4033292/derrops"}, "edited": false, "score": 0, "creation_date": 1513123517, "post_id": 47783200, "comment_id": 82528453, "body": "@Snickers3192 drat!  I was afraid of that.  I was hoping that &quot;localhost&quot; got a pass with the error, but if not... bummer."}, {"owner": {"reputation": 5633, "user_id": 4033292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/TwIH9.jpg?s=128&g=1", "display_name": "Derrops", "link": "https://stackoverflow.com/users/4033292/derrops"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1513123862, "post_id": 47783200, "comment_id": 82528543, "body": "Like @EJP says there isn&#39;t any point of ssl within localhost, but I&#39;ve seen it for testing purposes because of policies or politics. Pretty much to get around it you just put a proxy in front which goes Browser-&gt;HTTP-&gt;Proxy-&gt;HTTPS-&gt;Server, if you need to."}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "reply_to_user": {"reputation": 5633, "user_id": 4033292, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/TwIH9.jpg?s=128&g=1", "display_name": "Derrops", "link": "https://stackoverflow.com/users/4033292/derrops"}, "edited": false, "score": 0, "creation_date": 1513129927, "post_id": 47783200, "comment_id": 82530092, "body": "@Snickers3192 - .... except that you 1) need to use a real IP for the proxy and 2) provide it with a real cert, and 3) bind, open ports, etc to allow the proxy to talk to the &quot;minimal&quot; server."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5873843, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-SBq3E-RUC-Y/AAAAAAAAAAI/AAAAAAAAACI/LDaeXfKANAU/photo.jpg?sz=128", "display_name": "JpersaudCodezit", "link": "https://stackoverflow.com/users/5873843/jpersaudcodezit"}, "edited": false, "score": 0, "creation_date": 1550106878, "post_id": 47784605, "comment_id": 96152592, "body": "First of all +1 for the explination .Follow up question if i created a secure cookie while using my local host, would this be sent to the localhost if it is running HTTP and not HTTPS? If so then secure cookies can be configured to be sent to non HTTPS connections which shouldn&#39;t be the case; If not then the localhost is not secure as you pointed out in your answer.. Please explain"}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "reply_to_user": {"reputation": 133, "user_id": 5873843, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-SBq3E-RUC-Y/AAAAAAAAAAI/AAAAAAAAACI/LDaeXfKANAU/photo.jpg?sz=128", "display_name": "JpersaudCodezit", "link": "https://stackoverflow.com/users/5873843/jpersaudcodezit"}, "edited": false, "score": 1, "creation_date": 1550124601, "post_id": 47784605, "comment_id": 96156640, "body": "There is no good solution to that ... apart from not setting <code>secure</code> on cookies if your app is designed to talk to localhost.  See <a href=\"https://softwareengineering.stackexchange.com/questions/310720/make-browser-allow-secure-cookie-over-http\" title=\"make browser allow secure cookie over http\">softwareengineering.stackexchange.com/questions/310720/&hellip;</a>"}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "reply_to_user": {"reputation": 133, "user_id": 5873843, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-SBq3E-RUC-Y/AAAAAAAAAAI/AAAAAAAAACI/LDaeXfKANAU/photo.jpg?sz=128", "display_name": "JpersaudCodezit", "link": "https://stackoverflow.com/users/5873843/jpersaudcodezit"}, "edited": false, "score": 1, "creation_date": 1550124866, "post_id": 47784605, "comment_id": 96156732, "body": "Actually, my answer didn&#39;t say localhost is not secure.  What I said / implied was that if someone (i.e. a hacker) was able to intercept traffic on the loopback device, then that is probably the least of your worries.  (And they could probably intercept the traffic if you were using https.  On any interface!)"}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "reply_to_user": {"reputation": 133, "user_id": 5873843, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-SBq3E-RUC-Y/AAAAAAAAAAI/AAAAAAAAACI/LDaeXfKANAU/photo.jpg?sz=128", "display_name": "JpersaudCodezit", "link": "https://stackoverflow.com/users/5873843/jpersaudcodezit"}, "edited": false, "score": 1, "creation_date": 1550125333, "post_id": 47784605, "comment_id": 96156902, "body": "Finally, if you feel you need to use https for 127.0.0.1, your only real option is a self-signed cert.  You could set up your own private CA and issue a cert for 127.0.0.1, but that is potentially dangerous.   The cert + private key would work on any host that trusts your private CA.  Someone in your organization with access to a machine where the cert + key are installed could co-opt it for evil purposes."}], "tags": [], "owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "is_accepted": false, "score": 4, "last_activity_date": 1550125006, "last_edit_date": 1550125006, "creation_date": 1513132182, "answer_id": 47784605, "question_id": 47783200, "link": "https://stackoverflow.com/questions/47783200/java-https-localhost-ssl-possible-without-installing-certs-on-client/47784605#47784605", "title": "java https://localhost (SSL) - possible without installing certs on client?", "body": "<p>There are two common approaches to getting a secure connection between a client (browser) and server via HTTPS:</p>\n\n<ol>\n<li><p>You can obtain SSL certificate for the server that is signed by a Root Certification Authority (CA) that is trusted by the user's web browser by default.</p></li>\n<li><p>You can generate a self-signed SSL certificate, and have the user import it into their web browser as a trusted cert.</p></li>\n</ol>\n\n<p>What you have done so far seems to be to generate a server-side keystore with a self-signed cert in it and (more or less) configured the Kotlin server to use it.  The problem is the client (browser).  There is no safe way to get the browser to trust the self-signed cert without the involvement of the user or the user's sysadmin.  (Safe ... as in safe for the user!)</p>\n\n<p>And no legitimate CA should ever issue an SSL cert for \"localhost\"; e.g. <a href=\"https://www.ssl2buy.com/wiki/how-to-get-ssl-certificate-for-web-applications-that-runs-on-localhost\" rel=\"nofollow noreferrer\">https://www.ssl2buy.com/wiki/how-to-get-ssl-certificate-for-web-applications-that-runs-on-localhost</a></p>\n\n<p>Impasse.</p>\n\n<p>OK, so lets step back. The purpose of using HTTPS / SSL is to ensure that:</p>\n\n<ol>\n<li><p>The user's web browser is talking to the correct server, and not some other server that is impersonating it.</p></li>\n<li><p>The connection between the browser and the server is encrypted so that no third party can snoop on the traffic.</p></li>\n</ol>\n\n<p>But you are trying to do this for a <code>localhost</code> connection.  The <code>localhost</code> IP address is a loopback address.  Unless the OS kernel is compromised, you are guaranteed that network packets sent via a loopback connection will not leave the host.</p>\n\n<ol>\n<li><p>You can dismiss the \"impersonation\" problem.  Assuming that the user's machine has not been compromised, nobody else can launch a \"fake\" server on the user's machine.</p></li>\n<li><p>You can dismiss the  \"snooping\" problem.  Assuming that the user's machine has not been compromised:</p>\n\n<ul>\n<li>The packets won't go off-host, so they can't be snooped on any \"external\" networks.</li>\n<li>The only person who can \"snoop\" the packets on the loopback network is the user him / herself.</li>\n</ul></li>\n</ol>\n\n<p>So, the solution is simple.  Use \"http\" for your \"localhost\" connection.  It should be secure ... assuming that the user's machine has not been compromised. </p>\n\n<p>Note: if the user's machine <em>has been compromised</em>, then the bad guys have other ways to intercept the traffic that SSL won't protect against.</p>\n"}], "owner": {"reputation": 4026, "user_id": 1117848, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/1215059/picture?type=large", "display_name": "Benjamin H", "link": "https://stackoverflow.com/users/1117848/benjamin-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2958, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1550125006, "creation_date": 1513121082, "question_id": 47783200, "link": "https://stackoverflow.com/questions/47783200/java-https-localhost-ssl-possible-without-installing-certs-on-client", "title": "java https://localhost (SSL) - possible without installing certs on client?", "body": "<p>After reading the following, I'm still stuck on making the barest-minimum <strong>https</strong>://localhost stand-alone install-free webserver java app.  It needs to be library-free, use Java 8, and accept connections from the browser without first installing any special client certs.  I'm unclear if this is <strong>at all possible with self-signed certs</strong> because it only has to work for \"localhost\".</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30498206/how-make-ssl-server-socket-support-both-http-https-in-java\">How make SSL server socket support both http &amp; https in java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24172449/my-simple-java-https-server-only-works-for-localhost\">My simple java HTTPS server only works for localhost</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2308479/simple-java-https-server\">Simple Java HTTPS server</a></li>\n</ul>\n\n<p>So far I've generated some key files using</p>\n\n<pre><code>openssl genrsa -aes128 -out privkey.pem 2048  # makes privkey.pem\nopenssl req -new -x509 -key privkey.pem # makes cert.crt\n</code></pre>\n\n<p>and I've cobbled together the bare minimum Kotlin setup function</p>\n\n<pre><code>private fun ssl():SSLServerSocketFactory {\n    val password = \"MYPASSWORD\".toCharArray()\n    val kmf = KeyManagerFactory.getInstance(\"SunX509\")\n    val tmf = TrustManagerFactory.getInstance(\"SunX509\")\n    val sslContext = SSLContext.getInstance(\"TLS\")\n\n    // initialise the keystore\n    KeyStore.getInstance(\"JKS\").let { ks-&gt;\n        FileInputStream(\"lig.keystore\").use {\n            ks.load(it, password)\n        }\n        kmf.init(ks, password)\n        tmf.init(ks)\n    }\n\n    // setup the HTTPS context and parameters\n    sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null)\n    return sslContext.serverSocketFactory\n}\nssl().createServerSocket().use { serverSocket -&gt;\n            serverSocket.reuseAddress = true\n            serverSocket.bind(InetSocketAddress(port))\n            logger.info { \"WebServer ready and listening on ${serverSocket.localPort}\" }\n</code></pre>\n\n<p>But I'm having trouble how to finish it off: Do I need to make a <code>lig.keystore</code> file?  Can this even be done without installing certs on the client's browser?</p>\n"}, {"tags": ["android", "exception", "kotlin", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "edited": false, "score": 1, "creation_date": 1513152824, "post_id": 47787503, "comment_id": 82537570, "body": "I had tried <code>async</code> with <code>await</code> before but it complains that <code>Suspend function await should only be called from a coroutine or another suspend function.</code> However, wrapping it all in <code>runBlocking</code> works without disrupting the asynchronous running of the code. <code>runBlocking</code> is a confusing name as I was expecting it to block until the coroutines inside completed. In my case meaning that if you rapidly clicked the buttonI expected that you would get the number incrementing every second rather than rapidly. I&#39;ll mark this as answer but put my fixed code in another answer."}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "edited": false, "score": 0, "creation_date": 1513153805, "post_id": 47787503, "comment_id": 82538073, "body": "Looking more closely, I can see that <code>runBlocking</code> is blocking the UI thread in this case, which is not what I want. I&#39;ll have to try using a callback."}, {"owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "edited": false, "score": 0, "creation_date": 1513155063, "post_id": 47787503, "comment_id": 82538819, "body": "Using the kotlinx <code>Continuation</code> here is just giving me ugly callback hell so far."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1513149448, "creation_date": 1513149448, "answer_id": 47787503, "question_id": 47783141, "link": "https://stackoverflow.com/questions/47783141/kotlin-coroutine-swallows-exception/47787503#47787503", "title": "Kotlin coroutine swallows exception", "body": "<p>When using <code>async</code>, you should <code>await</code> the result somewhere so you don't lose any exceptions.</p>\n"}, {"comments": [{"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1532101166, "post_id": 47788371, "comment_id": 89862276, "body": "This doesn&#39;t print the exceptions"}], "tags": [], "owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "is_accepted": false, "score": 1, "last_activity_date": 1513418910, "last_edit_date": 1513418910, "creation_date": 1513153012, "answer_id": 47788371, "question_id": 47783141, "link": "https://stackoverflow.com/questions/47783141/kotlin-coroutine-swallows-exception/47788371#47788371", "title": "Kotlin coroutine swallows exception", "body": "<p>Here is code that catches the exception based on Alexey Romanov's answer. With a bit more work I've got it working with launch. Adding <code>Log.d(\"thread\", Thread.currentThread().name)</code> shows that the delays are not blocking UI. </p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val text = findViewById&lt;TextView&gt;(R.id.thing_text)\n        val button = findViewById&lt;Button&gt;(R.id.thing_button)\n\n        var count = 0\n\n        button.setOnClickListener {\n            launch {\n                val job = async {\n                    count++\n\n                    val string = delayedStringOfInt(count)\n                    updateTextView(text, string)\n                }\n\n                try {\n                    job.await()\n                } catch (e: IOException) {\n                    makeToastFromException(e)\n                }\n            }\n        }\n    }\n\n    fun makeToastFromException(e: Exception) {\n        runOnUiThread {\n            Toast.makeText(this@MainActivity, e.localizedMessage, Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    fun updateTextView(text: TextView, string: String) {\n        runOnUiThread { text.text = string }\n    }\n\n    suspend fun delayedStringOfInt(int: Int): String {\n        delay(2000)\n        if (int % 4 == 0) throw IOException(\"Boom\")\n        return int.toString()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2982, "user_id": 2832027, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/27e09d018c90e9c6bdebedcabf655257?s=128&d=identicon&r=PG&f=1", "display_name": "TTransmit", "link": "https://stackoverflow.com/users/2832027/ttransmit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2207, "favorite_count": 0, "accepted_answer_id": 47787503, "answer_count": 2, "score": 5, "last_activity_date": 1513418959, "creation_date": 1513120777, "last_edit_date": 1513418959, "question_id": 47783141, "link": "https://stackoverflow.com/questions/47783141/kotlin-coroutine-swallows-exception", "title": "Kotlin coroutine swallows exception", "body": "<p>I'm very confused about how Exception handling works with coroutines. </p>\n\n<p>I was hoping that it would be possible to have a chain of suspend functions that would pass Exceptions between themselves like synchronous code. So if say Retrofit threw an IOException, I could handle that exception at the beginning of the chain of suspend functions such as in a presenter to show an error to a user. </p>\n\n<p>I made this simple example to try out coroutines but if I uncomment either <code>throw Exception</code> call the code after the Exception fails to run but the Exception does not crash the app. </p>\n\n<pre><code>package com.example.myapplication\n\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport android.widget.Button\nimport android.widget.TextView\nimport kotlinx.coroutines.experimental.delay\nimport kotlinx.coroutines.experimental.launch\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val text = findViewById&lt;TextView&gt;(R.id.thing_text)\n        val button = findViewById&lt;Button&gt;(R.id.thing_button)\n\n        var count = 0\n\n        button.setOnClickListener {\n            launch {\n                count++\n//                throw Exception(\"Boom\")\n                val string = delayedStringOfInt(count)\n                runOnUiThread { text.text = string }\n            }\n        }\n    }\n\n    suspend fun delayedStringOfInt(int: Int): String {\n        delay(1000)\n//        throw Exception(\"Boom\")\n        return int.toString()\n    }\n}\n</code></pre>\n\n<p>I have tried using <code>async</code> and <code>CoroutineExceptionHandler</code>.</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "android-bluetooth", "rx-java2"], "comments": [{"owner": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513160829, "post_id": 47782390, "comment_id": 82542394, "body": "Please add some log in your BluetoothAdapter. Like `      Thread.currentThread().name`  to indicate that your current operating thread."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "reply_to_user": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513161309, "post_id": 47782390, "comment_id": 82542721, "body": "I get: V/BluetoothThread: Running on: main"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "reply_to_user": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513161389, "post_id": 47782390, "comment_id": 82542777, "body": "@PhoenixWang  I log this in the BluetoothAdapter.LeScanCallback {bluetoothDevice, rssi, -&gt; Log,v(&quot;BluetoothThread&quot;, &quot;running on: &quot; + Thread.currentThread().name). So how to resolve it?"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "reply_to_user": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513161792, "post_id": 47782390, "comment_id": 82543060, "body": "@PhoenixWang please, check my update"}, {"owner": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513161981, "post_id": 47782390, "comment_id": 82543162, "body": "That&#39;s make sense. BluetoothAdapter.LeScanCallback run in mainthread because of his implementation. Observable/RxJava can&#39;t change it. You better check the <code>bluetoothAdapter.startLeScan(scanCallback)</code> &#39;s implementation to solve the problem"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "reply_to_user": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "edited": false, "score": 0, "creation_date": 1513162162, "post_id": 47782390, "comment_id": 82543276, "body": "@PhoenixWang Yes, i&#39;ve done even this: Observable.fromCallable{ bluetoothAdapter.startLeScan(scanCallback)}.subscribeOn(Sche&zwnj;&#8203;dulers.newThread()).&zwnj;&#8203;subscribe(). But still running on main"}], "answers": [{"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513156527, "post_id": 47782467, "comment_id": 82539655, "body": "Hey, I&#39;ve  also tried your solution, but i guess it is not that simple. Maybe you can just check my code and see what can be the problem? It is like after 2 minutes of scanning the app is rather freezing. In the logs of course appearing I/Choreographer: Skipped 54 frames!  The application may be doing too much work on its main thread."}], "tags": [], "owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "is_accepted": false, "score": 1, "last_activity_date": 1513117169, "creation_date": 1513117169, "answer_id": 47782467, "question_id": 47782390, "link": "https://stackoverflow.com/questions/47782390/why-my-rxjava-setup-is-blocking-my-ui-thread-working-with-bluetoothadapter-star/47782467#47782467", "title": "Why my RxJava setup is blocking my UI thread? Working with BluetoothAdapter.startLeScan callback", "body": "<p>RxJava is synchronous by default. In your case, it runs on the caller thread which is the <strong>main thread</strong> of Android</p>\n\n<p>You have to specify what thread you want the subscription to happen.</p>\n\n<pre><code>Observable.fromCallable(whatever())\n        .subscribeOn(Schedulers.newThread()).subscribe()\n</code></pre>\n\n<p>read more <a href=\"http://reactivex.io/documentation/scheduler.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513152469, "post_id": 47785100, "comment_id": 82537375, "body": "Of course I&#39;ve tried it. It will be better if you check my code yourself, maybe then you can find what is wrong"}], "tags": [], "owner": {"reputation": 3278, "user_id": 3282461, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/v6pSx.png?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/3282461/ankit-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1513136193, "creation_date": 1513136193, "answer_id": 47785100, "question_id": 47782390, "link": "https://stackoverflow.com/questions/47782390/why-my-rxjava-setup-is-blocking-my-ui-thread-working-with-bluetoothadapter-star/47785100#47785100", "title": "Why my RxJava setup is blocking my UI thread? Working with BluetoothAdapter.startLeScan callback", "body": "<pre><code> .subscribeOn(Schedulers.io())\n .observeOn(AndroidSchedulers.mainThread())\n</code></pre>\n\n<p>Add .subscribeOn(Schedulers.io()) along with .observeOn(AndroidSchedulers.mainThread()) like above. Try this. Should work.</p>\n"}, {"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513162754, "post_id": 47791331, "comment_id": 82543653, "body": "Yes, I&#39;ve tried this and it not helped actually. Can you help me with the implementation?"}, {"owner": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513163051, "post_id": 47791331, "comment_id": 82543878, "body": "@okset Sorry I can&#39;t. You should check your code inside your BluetoothAdapter. There are maybe something like <code>runOnUiThread()</code>, <code>handler.post()</code>, or <code>AsyncTask</code>s those normal gateway back to your Ui Thread. Or You could just post all of your code of BluetoothAdapter, not yuor Observables."}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513163168, "post_id": 47791331, "comment_id": 82543955, "body": "What do you mean by this last sentence? Can you provide an example?"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513164075, "post_id": 47791331, "comment_id": 82544567, "body": "I am getting the BluetoothAdapter like this: fun Context.getBluetoothAdapter(): BluetoothAdapter = (getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager).adapter"}, {"owner": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "reply_to_user": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1513172570, "post_id": 47791331, "comment_id": 82549844, "body": "@okset So that could be the problem of Android BlueTooth itself. RxJava can&#39;t help you with that."}], "tags": [], "owner": {"reputation": 2307, "user_id": 6527510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iRInSyzvnkY/AAAAAAAAAAI/AAAAAAAAAD4/rGS1YnMznYA/photo.jpg?sz=128", "display_name": "Phoenix Wang", "link": "https://stackoverflow.com/users/6527510/phoenix-wang"}, "is_accepted": false, "score": 1, "last_activity_date": 1513163621, "last_edit_date": 1513163621, "creation_date": 1513162647, "answer_id": 47791331, "question_id": 47782390, "link": "https://stackoverflow.com/questions/47782390/why-my-rxjava-setup-is-blocking-my-ui-thread-working-with-bluetoothadapter-star/47791331#47791331", "title": "Why my RxJava setup is blocking my UI thread? Working with BluetoothAdapter.startLeScan callback", "body": "<p>To be more clear. I make a answer but can not solve your problem .\nYour code:</p>\n\n<pre><code> Observable.fromCallable{ bluetoothAdapter.startLeScan(scanCallback)}.subscribeOn(Sche\u200c\u200bdulers.newThread()).\u200c\u200bsubscribe().\n</code></pre>\n\n<p>means that your <code>bluetoothAdapter.startLeScan(scanCallback)</code> is run in the newThread. But not how bluetoothAdapter call you back.</p>\n\n<p>So in the implementation of your startLeScan. It can start a new thread or run in other thread depends on it's implementation.</p>\n\n<p>Same idea with your Observable.create(//your stuff)</p>\n\n<p>They are guaranteed running on your specified scheduler. But it can also start a new thread inside of it. That's why I mentioned in comment to check the implementation of your BluetoothAdapter.</p>\n\n<p><strong>Update</strong></p>\n\n<p>To be more clear, an example implementation of BluetoothAdapter that can block your UI Thread.</p>\n\n<pre><code>class BluetoothAdapter {\n\n    fun startLeScan(callback: LeScanCallback) {\n        val handler = Handler(Looper.getMainLooper())\n        handler.post {\n            // here you back to your UI Thread. \n            callback.onSuccess(1)\n        }\n    }\n\n    interface LeScanCallback {\n        fun onSuccess(result: Int)\n    }\n}\n</code></pre>\n\n<p>So if your implementation of BluetoothAdapter will change the thread back to UI thread. You eventually will block your UI thread no matter what thread of your Observable. That what I mean <strong><em>Check the implementation of your BluetoothAdapter</em></strong></p>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1513163621, "creation_date": 1513116802, "last_edit_date": 1513163373, "question_id": 47782390, "link": "https://stackoverflow.com/questions/47782390/why-my-rxjava-setup-is-blocking-my-ui-thread-working-with-bluetoothadapter-star", "title": "Why my RxJava setup is blocking my UI thread? Working with BluetoothAdapter.startLeScan callback", "body": "<p>I am struggling to find the specific action which is blocking my UI thread, i've tried several Scheduler operators, but I'm not sure how to make it work.</p>\n\n<p>I have a UI with button, which onClicked is starting bluetooth scan and updates the textView with strings like a log(it shows what is happening at the moment).</p>\n\n<p>So here is my MainActivity:</p>\n\n<pre><code> lateinit var disposable: Disposable\nval textDataService = TextDataService()\n\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_scan_test)\n\n\n    buttonScanTestStart.setOnClickListener {\n        if (isBluetoothEnabled()) {\n            textViewLog.text = \"\"\n\n            buttonScanTestStop.visibility = View.VISIBLE\n            buttonExportScanTestRaportSummary.visibility = View.GONE\n            buttonExportScanTestRaportFull.visibility = View.GONE\n            buttonScanTestStart.visibility = View.GONE\n\n            disposable=\n                    Scanner()\n                            .discoverSingleDevice(this, \"   \", textViewLog)\n                            .doOnError {\n                                setText(\"General error: ${it.message ?: it::class.java}\", textViewLog)\n                                setLogText(\"General error: ${it.message ?: it::class.java}\")\n                            }\n                            .repeat(1)\n                            .doOnComplete {\n                                buttonScanTestStop.visibility = View.GONE\n                            }\n                            .doOnDispose {\n                                log(\"TEST DISPOSED\")\n                            }\n                            .subscribe()\n        } else {\n            Toast.makeText(this, \"Please, enable bluetooth to start test.\", Toast.LENGTH_SHORT).show()\n        }\n    }\n\n    buttonScanTestStop.setOnClickListener {\n        disposable.dispose()\n        buttonScanTestStop.visibility = View.GONE\n        buttonScanTestStart.visibility = View.VISIBLE\n        buttonExportScanTestRaportSummary.visibility = View.VISIBLE\n        buttonExportScanTestRaportFull.visibility = View.VISIBLE\n\n        textDataService.generateScanGeneralStatisticsLogText(textViewLog)\n    }\n</code></pre>\n\n<p>Here is the Scanner class:</p>\n\n<pre><code>class Scanner {\n\n\nprivate fun scan(context: Context, textView: TextView) = Observable.create&lt;ScannedItem&gt; { emitter -&gt;\n    val bluetoothAdapter = context.getBluetoothAdapter()\n    if (bluetoothAdapter.isEnabled) {\n\n        val scanCallback = BluetoothAdapter.LeScanCallback { bluetoothDevice, rssi, _ -&gt;\n\n            if(bluetoothDevice.name == null){\n                    bluetoothRawLog(\"Scanned Item -&gt; ${bluetoothDevice.logText()} | rssi = $rssi | time: = ${getCurrentTime()}\")\n                    scannedOtherDevices.add(bluetoothDevice.address)\n            }\n            else{\n                if(!scannedDevices.contains(bluetoothDevice.name)){\n                        setText(\"Scanned Item -&gt; ${bluetoothDevice.logText()} | rssi = $rssi | time: = ${getCurrentTime()}\\n\", textView)\n\n                    setLogText(\"Scanned Item -&gt; ${bluetoothDevice.logText()} | rssi = $rssi | time: = ${getCurrentTime()}\\n\")\n                }\n                scannedDevices.add(bluetoothDevice.name)\n\n\n            }\n            bluetoothRawLog(\"Scanned Item -&gt; ${bluetoothDevice.logText()} | rssi = $rssi\")\n\n\n            bluetoothDevice.name?.let {\n                emitter.onNext(ScannedItem(it, bluetoothDevice.address))\n            }\n        }\n\n        emitter.setCancellable { bluetoothAdapter.stopLeScan(scanCallback) }\n        bluetoothAdapter.startLeScan(scanCallback)\n\n    } else\n        emitter.onError(IllegalStateException(\"Bluetooth turned off\"))\n}\n        .doOnNext { log(\"Scanned -&gt; $it\") }\n        .timeout(12, TimeUnit.SECONDS)\n        .observeOn(AndroidSchedulers.mainThread())\n        .doOnError { if (it is TimeoutException) setLogText(\"Scanner -&gt; no named devices for 12 seconds: resetting...\") }\n        .retry { t -&gt; t is TimeoutException }\n\n\n  fun discoverSingleDevice(context: Context, searchName: String, textView: TextView): Observable&lt;ScannedItem&gt; = scan(context, textView)\n        .filter { it.name.contains(searchName) }\n        .take(1)\n</code></pre>\n\n<p>And here is my Kotlin extension functions, which i am using to set Text:</p>\n\n<pre><code>fun setLogText(text: String) {\n    logBuffer.append(text)\n}\n\nfun setText(text: String, textView: TextView) {\n    textView.append(text)\n}\n</code></pre>\n\n<p>Here is also my layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;LinearLayout\n    android:layout_margin=\"16dp\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:orientation=\"horizontal\"&gt;\n\n    &lt;Button\n        android:layout_weight=\"1\"\n        android:id=\"@+id/buttonScanTestStart\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"Start Test\" /&gt;\n    &lt;Button\n        android:layout_weight=\"1\"\n        android:visibility=\"gone\"\n        android:id=\"@+id/buttonScanTestStop\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"Stop Test\" /&gt;\n    &lt;Button\n        android:layout_weight=\"1\"\n        android:id=\"@+id/buttonExportScanTestRaportFull\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"Export raport\"\n        android:visibility=\"gone\" /&gt;\n\n    &lt;Button\n        android:layout_weight=\"1\"\n        android:id=\"@+id/buttonExportScanTestRaportSummary\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        android:text=\"Export summary\"\n        android:visibility=\"gone\" /&gt;\n&lt;/LinearLayout&gt;\n\n&lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:visibility=\"gone\"\n        android:id=\"@+id/scanTestStartedLinearLayout\"\n        android:gravity=\"center\"\n        android:orientation=\"horizontal\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n        &lt;TextView\n            android:text=\"Test running...\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\" /&gt;\n        &lt;ProgressBar\n            android:id=\"@+id/scanTestProgressBar\"\n            android:layout_width=\"16dp\"\n            android:layout_height=\"16dp\" /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;TextView\n        android:id=\"@+id/textViewScanTestLog\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"16dp\"\n        android:gravity=\"center\" /&gt;\n\n    &lt;ScrollView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_margin=\"16dp\"\n        android:gravity=\"center\"&gt;\n\n        &lt;LinearLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"vertical\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/textViewLog\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\" /&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/ScrollView&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>So the text is appearing in my textView pretty smooth, everything is OK.\nHowever, when there is more amount of available devices to scan i can't stop the test by clicking the button. It is just freezed and responding like way too late when i try to click it.</p>\n\n<p>The discoverSingleDevice function is will be run forever, because i filter to have the search name from my editText(which i hardcoded with \"  \") to make it run forever and i want to only stop this by clicking the stop button in my layout. As a second parameter i passed to it textViewLog from my layout(Kotlin is smart enough to find it by id)</p>\n\n<p>So how to prevent blocking the UI with this setup?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>As WenChao suggested, I've done something like this:</p>\n\n<pre><code>       val observable = Scanner()\n                    .discoverSingleDevice(this, \"   \", textViewLog)\n                    .doOnError {\n                        nexoSetText(\"General error: ${it.message ?: it::class.java}\", textViewLog)\n                        nexoSetLogText(\"General error: ${it.message ?: it::class.java}\")\n                    }\n                    .repeat(1)\n                    .doOnComplete {\n                        buttonScanTestStop.visibility = View.GONE\n                    }\n                    .doOnDispose {\n                        nexoLog(\"TEST DISPOSED\")\n                    }\n\n         disposable =  observable\n                    .subscribeOn(Schedulers.newThread()).subscribe()\n</code></pre>\n\n<p>However, it not helped, it is not that simple. Again, I've tried several things with other operators.\n<strong>Please, be specific to my case - I provided code.</strong></p>\n\n<p>It is like after 2 minutes of scanning the app is rather freezing. In the logs of course appearing I/Choreographer: Skipped 54 frames! The application may be doing too much work on its main thread. </p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>As PhoenixWang suggested, I've log to check on which thread the BluetoothAdapter runs. So I've done it like this in my scan method in the Scanner class:</p>\n\n<pre><code>  private fun scan(context: Context, textView: TextView) = Observable.create&lt;ScannedItem&gt; { emitter -&gt;\n    val bluetoothAdapter = context.getBluetoothAdapter()\n    if (bluetoothAdapter.isEnabled) {\n\n        val scanCallback = BluetoothAdapter.LeScanCallback { bluetoothDevice, rssi, _ -&gt;\n            Log.v(\"BluetoothThread\", \"Running on: \" + Thread.currentThread().name)\n///the rest of the code\n</code></pre>\n\n<p>So how to already fix this? I've thought that it will actually run on the separate thread(not main) because i've done the naive fix, which is visible in my first Update. Can you help?</p>\n\n<p><strong>UPDATE 3:</strong></p>\n\n<p>So the problem is with the BluetoothAdapter.leScan - it is running on main thread, even if i do something like this:</p>\n\n<pre><code>Observable.fromCallable{ bluetoothAdapter.startLeScan(scanCallback)}.subscribeOn(Schedulers.newThread()).subscribe()\n</code></pre>\n\n<p>As PhoenixWang suggesting, BluetoothAdapter.LeScanCallback run in mainthread because of his implementation. Observable/RxJava can't change it. \nSo how to resolve my problem?</p>\n"}, {"tags": ["android", "performance", "kotlin", "generic-programming"], "comments": [{"owner": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1513116857, "post_id": 47782332, "comment_id": 82526120, "body": "extract <code>delete</code> to an interface and let all your class implement that interface and pass in that interface as a second parameter of your method"}, {"owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "reply_to_user": {"reputation": 3166, "user_id": 1570171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HiuC7.jpg?s=128&g=1", "display_name": "WenChao", "link": "https://stackoverflow.com/users/1570171/wenchao"}, "edited": false, "score": 0, "creation_date": 1513117497, "post_id": 47782332, "comment_id": 82526366, "body": "I&#39;m not quite sure what do you mean with &quot;pass in that interface as second parameter&quot;. I rarely work with interfaces, so I&#39;m not sure how they work. Could you provide an example?"}, {"owner": {"reputation": 769, "user_id": 2793494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SZOih.jpg?s=128&g=1", "display_name": "Yurii Kyrylchuk", "link": "https://stackoverflow.com/users/2793494/yurii-kyrylchuk"}, "edited": false, "score": 2, "creation_date": 1513119298, "post_id": 47782332, "comment_id": 82527143, "body": "You also can add a type to a method. Something like this:   <code>inline fun &lt;reified T&gt; save(data: JSONArray) {        val list = Select.from(T::class.java).list()     }</code>  And then call it like <code>save&lt;Video&gt;(data)</code>"}, {"owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "edited": false, "score": 0, "creation_date": 1513135374, "post_id": 47782332, "comment_id": 82531387, "body": "Extracting to a common method will only work if the T you define has an &#39;id&#39; method and a &#39;delete&#39; method. So all your Model objects must extend a common interface/class that has those.  You can then do as Yurii suggested BUT remember that this inlines all the code, so it isn&#39;t really extracted in the final bytecode.  I believe you can also do what you suggested yourself with type: Class&lt;T&gt; as then <code>item as T</code> but I haven&#39;t verified in compiler."}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1513137248, "post_id": 47782332, "comment_id": 82531826, "body": "You may use a for loop to replace the iterator. For-ins are compiled as iterator operations in Kotlin."}], "answers": [{"tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": true, "score": 1, "last_activity_date": 1513139036, "last_edit_date": 1513139036, "creation_date": 1513137483, "answer_id": 47785249, "question_id": 47782332, "link": "https://stackoverflow.com/questions/47782332/create-method-with-generic-parameter-for-repeated-actions/47785249#47785249", "title": "Create method with generic parameter for repeated actions", "body": "<p>You need to extract an interface and use a <code>reified</code> generic.</p>\n\n<pre><code>interface Blabla {\n    fun delete()\n    val id: Int\n}\n\ninline fun &lt;reified T : Blabla&gt;saveVideos(data: JSONArray) {\n    var active = String()\n    for (i in 0..data.length().minus(1)) // create string\n\n    val list = Select.from(T::class.java).list()\n\n    val iterator = list.iterator()\n    while (iterator.hasNext()) {\n        val item = iterator.next() as T\n        if (Regex(item.id.toString()) !in active) item.delete()\n    }\n}\n</code></pre>\n\n<p>This should work.</p>\n\n<p>Also, I highly recommend you to use the Kotlin collection library, like this.</p>\n\n<pre><code>inline fun &lt;reified T : Blabla&gt;saveVideos(data: JSONArray) {\n    val active = \"\"\n    for (i in 0 until data.length()) {} // create string\n\n    val list = Select.from(T::class.java).list()\n\n    list\n            .map { it as T }\n            .filter { Regex(it.id.toString()) !in active }\n            .forEach { it.delete() }\n}\n</code></pre>\n\n<p>And you can even replace <code>forEach { it.delete() }</code> with <code>forEach(T::delete)</code></p>\n"}], "owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47785249, "answer_count": 1, "score": 0, "last_activity_date": 1513139036, "creation_date": 1513116484, "question_id": 47782332, "link": "https://stackoverflow.com/questions/47782332/create-method-with-generic-parameter-for-repeated-actions", "title": "Create method with generic parameter for repeated actions", "body": "<p>I have the following methods on my code:</p>\n\n<pre><code>fun saveArticles(data: JSONArray) {\n    var active = String()\n    for (i in 0..data.length().minus(1)) // create string\n\n    val articles = Select.from(Article::class.java).list()\n\n    val iterator = articles.iterator()\n    while (iterator.hasNext()) {\n        val article = iterator.next() as Article\n        if (!active.contains(Regex(article.id.toString()))) article.delete()\n    }\n}\n\nfun saveDossiers(data: JSONArray) {\n    var active = String()\n    for (i in 0..data.length().minus(1)) // create string\n\n    val dossiers = Select.from(Dossier::class.java).list()\n\n    val iterator = dossiers.iterator()\n    while (iterator.hasNext()) {\n        val dossier = iterator.next() as Dossier\n        if (!active.contains(Regex(dossier.id.toString()))) dossier.delete()\n    }\n}\n\nfun saveVideos(data: JSONArray) {\n    var active = String()\n    for (i in 0..data.length().minus(1)) // create string\n\n    val videos = Select.from(Video::class.java).list()\n\n    val iterator = videos.iterator()\n    while (iterator.hasNext()) {\n        val video = iterator.next() as Video\n        if (!active.contains(Regex(video.id.toString()))) video.delete()\n    }\n}\n</code></pre>\n\n<p>As you can see, all the methods do exactly the same thing. The only difference is the Class type of the object I'm working at the moment. Can I somehow create a single method with a parameter of Class type, and depending of the type change the class I need to work? Something like this:</p>\n\n<pre><code>fun saveVideos(data: JSONArray, type: Class) {\n    var active = String()\n    for (i in 0..data.length().minus(1)) // create string\n\n    val list = Select.from(type).list()\n\n    val iterator = list.iterator()\n    while (iterator.hasNext()) {\n        val item = iterator.next() as type\n        if (!active.contains(Regex((item as type).id.toString()))) item.delete()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "is_accepted": true, "score": 6, "last_activity_date": 1513156907, "last_edit_date": 1513156907, "creation_date": 1513113033, "answer_id": 47781588, "question_id": 47781377, "link": "https://stackoverflow.com/questions/47781377/unit-testing-coroutines-on-ui-thread/47781588#47781588", "title": "Unit testing coroutines on UI thread", "body": "<p>If you want to make things clean and consider using MVP architecture in the future you should understand that CourutineContext is external dependency, that should be injected via DI, or passed to your presenter. <a href=\"https://proandroiddev.com/android-coroutine-recipes-33467a4302e9\" rel=\"noreferrer\">More details on topic</a>.</p>\n\n<p>The answer for your question is simple, you should use only Unconfined CourutineContext for your tests. (<a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#unconfined-vs-confined-dispatcher\" rel=\"noreferrer\">more</a>)\nTo make things simple create an object e.g. Injection with:</p>\n\n<pre><code>package com.example\n\nobject Injection {\n    val uiContext : CourutineContext = UI\n    val bgContext : CourutineContext = CommonPool\n}\n</code></pre>\n\n<p>and in <strong>test package</strong> create absolutely the same object but change to:</p>\n\n<pre><code>package com.example\n\nobject Injection {\n    val uiContext : CourutineContext = Unconfined\n    val bgContext : CourutineContext = Unconfined\n}\n</code></pre>\n\n<p>and inside your class it will be something like:</p>\n\n<pre><code>val data = async(Injection.bgContext) {service?.getData()}.await()\n</code></pre>\n"}], "owner": {"reputation": 604, "user_id": 2113970, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BsCjm.jpg?s=128&g=1", "display_name": "Derek Fredrickson", "link": "https://stackoverflow.com/users/2113970/derek-fredrickson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 0, "accepted_answer_id": 47781588, "answer_count": 1, "score": 2, "last_activity_date": 1513156907, "creation_date": 1513112096, "last_edit_date": 1513112499, "question_id": 47781377, "link": "https://stackoverflow.com/questions/47781377/unit-testing-coroutines-on-ui-thread", "title": "Unit testing coroutines on UI thread", "body": "<p>I'm using coroutines to do an asynchronous call on pull to refresh like so:</p>\n\n<pre><code>class DataFragment : Fragment(), SwipeRefreshLayout.OnRefreshListener {\n\n    // other functions here\n\n    override fun onRefresh() {\n        loadDataAsync()\n    }\n\n    private fun loadDataAsync() = async(UI) {\n        swipeRefreshLayout?.isRefreshing = true\n        progressLayout?.showContent()\n\n        val data = async(CommonPool) {\n            service?.getData() // suspending function\n        }.await()\n\n        when {\n            data == null -&gt; showError()\n            data.isEmpty() -&gt; progressLayout?.showEmpty(null, parentActivity?.getString(R.string.no_data), null)\n            else -&gt; {\n                dataAdapter?.updateData(data)\n                dataAdapter?.notifyDataSetChanged()\n                progressLayout?.showContent()\n            }\n        }\n\n        swipeRefreshLayout?.isRefreshing = false\n    }\n}\n</code></pre>\n\n<p>Everything here works fine when I actually put it on a device. My error, empty, and data states are all handled well and the performance is good. However, I'm also trying to unit test it with Spek. My Spek test looks like this:</p>\n\n<pre><code>@RunWith(JUnitPlatform::class)\nclass DataFragmentTest : Spek({\n\n    describe(\"The DataFragment\") {\n\n        var uut: DataFragment? = null\n\n        beforeEachTest {\n            uut = DataFragment()\n        }\n\n        // test other functions\n\n        describe(\"when onRefresh\") {\n            beforeEachTest {\n                uut?.swipeRefreshLayout = mock()\n                uut?.onRefresh()\n            }\n\n            it(\"sets swipeRefreshLayout.isRefreshing to true\") {\n                verify(uut?.swipeRefreshLayout)?.isRefreshing = true // says no interaction with mock\n            }\n        }\n    }           \n}\n</code></pre>\n\n<p>The test is failing because it says that there was no interaction with the <code>uut?.swipeRefreshLayout</code> mock. After some experimenting, it seems this is because I'm using the UI context via <code>async(UI)</code>. If I make it just be a regular async, I can get the test to pass but then the app crashes because I'm modifying views outside of the UI thread.</p>\n\n<p>Any ideas why this might be occurring? Also, if anyone has any better suggestions for doing this which will make it more testable, I'm all ears.</p>\n\n<p>Thanks.</p>\n\n<p><strong>EDIT:</strong> Forgot to mention that I also tried wrapping the <code>verify</code> and the <code>uut?.onRefresh()</code> in a <code>runBlocking</code>, but I still had no success.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1513108014, "post_id": 47780324, "comment_id": 82522033, "body": "<i>However, the &quot;remove&quot; function doesn&#39;t exist for a hashmap in Kotlin</i> Yes it does (but of course, just like in Java, it doesn&#39;t take any argument). Post a complete minimal example reproducing the problem. Here&#39;s mine: <a href=\"https://gist.github.com/jnizet/e28de17572b6370e4171d311ea5db780\" rel=\"nofollow noreferrer\">gist.github.com/jnizet/e28de17572b6370e4171d311ea5db780</a>"}, {"owner": {"reputation": 54, "user_id": 4392311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a0d7c971eb58c8f1ed9659beb950df4?s=128&d=identicon&r=PG&f=1", "display_name": "thePanthurr", "link": "https://stackoverflow.com/users/4392311/thepanthurr"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1516844658, "post_id": 47780324, "comment_id": 83860289, "body": "Ah, I completely tweaked on that one. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 2806800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbjAi.png?s=128&g=1", "display_name": "Ruslan Berozov", "link": "https://stackoverflow.com/users/2806800/ruslan-berozov"}, "edited": false, "score": 0, "creation_date": 1591907535, "post_id": 58520319, "comment_id": 110242023, "body": "&quot;removeIf&quot; requires API &gt;= 24, because it&#39;s from java.util.Collection. We should use &quot;removeAll(predicate: (T) -&gt; Boolean)&quot; from kotlin.collections."}], "tags": [], "owner": {"reputation": 343, "user_id": 5040314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dqh4Y.png?s=128&g=1", "display_name": "KollKode", "link": "https://stackoverflow.com/users/5040314/kollkode"}, "is_accepted": false, "score": 0, "last_activity_date": 1571824933, "creation_date": 1571824933, "answer_id": 58520319, "question_id": 47780324, "link": "https://stackoverflow.com/questions/47780324/equivalent-of-iterator-remove-in-kotlin-hashmap/58520319#58520319", "title": "Equivalent of Iterator.Remove in Kotlin HashMap?", "body": "<p>In Kotlin you can use <code>removeIf</code> on mutable map entries without accessing the iterator explicitly.</p>\n\n<pre><code>val entrySet = HashMap&lt;String, String&gt;()\nentrySet.entries.removeIf { \n  // some predicate \n}\n</code></pre>\n\n<p>will remove all entries that match the predicate</p>\n"}, {"tags": [], "owner": {"reputation": 2243, "user_id": 3466808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pr9RU.jpg?s=128&g=1", "display_name": "Sam Chen", "link": "https://stackoverflow.com/users/3466808/sam-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1604638571, "creation_date": 1604638571, "answer_id": 64709081, "question_id": 47780324, "link": "https://stackoverflow.com/questions/47780324/equivalent-of-iterator-remove-in-kotlin-hashmap/64709081#64709081", "title": "Equivalent of Iterator.Remove in Kotlin HashMap?", "body": "<pre><code>val addedItems = HashMap&lt;String, Int&gt;()\n\nfun main() {\n    addedItems[&quot;Apple&quot;] = 3\n    addedItems[&quot;Lemon&quot;] = 4\n\n    println(addedItems)\n\n    addedItems.values.removeAll { it == 4 }        //or remove by keys &quot;.keys.removeAll{}\n    println(addedItems)\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>{Apple=3, Lemon=4}\n{Apple=3}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 4392311, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8a0d7c971eb58c8f1ed9659beb950df4?s=128&d=identicon&r=PG&f=1", "display_name": "thePanthurr", "link": "https://stackoverflow.com/users/4392311/thepanthurr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1604638571, "creation_date": 1513107573, "question_id": 47780324, "link": "https://stackoverflow.com/questions/47780324/equivalent-of-iterator-remove-in-kotlin-hashmap", "title": "Equivalent of Iterator.Remove in Kotlin HashMap?", "body": "<p>Sorry if this is a dumb question-- but in java I am used to doing something like the following:</p>\n\n<pre><code>Iterator whatever = entrySet.iterator()\nwhile (whatever.hasNext()) {\n    for (int i = 0; i &lt; 4; i++) {\n        if (i == 3) {\n            whatever.remove(whatever.next().key)\n        }\n    }\n}\n</code></pre>\n\n<p>(Pseudocode and the logic makes no sense)</p>\n\n<p>However, the \"remove\" function doesn't exist for a hashmap in Kotlin. I understand you can use removeIf for a single condition, but I want to loop through a bunch of different conditions before I decide what to remove-- all without dodging a concurrent modification exception.</p>\n\n<p>What is the way to do this in Kotlin?</p>\n\n<p>Thank you for your time!</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2041, "user_id": 2686502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5ceabeb502f0e33b63ea337f618649?s=128&d=identicon&r=PG&f=1", "display_name": "jayeshsolanki93", "link": "https://stackoverflow.com/users/2686502/jayeshsolanki93"}, "edited": false, "score": 0, "creation_date": 1513163983, "post_id": 47779683, "comment_id": 82544506, "body": "Also, try changing the device/network"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9077261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mG5Ze.jpg?s=128&g=1", "display_name": "L.Hure", "link": "https://stackoverflow.com/users/9077261/l-hure"}, "is_accepted": true, "score": 0, "last_activity_date": 1513630841, "last_edit_date": 1513630841, "creation_date": 1513172861, "answer_id": 47794567, "question_id": 47779683, "link": "https://stackoverflow.com/questions/47779683/unable-to-resolve-host-pokeapi/47794567#47794567", "title": "Unable to resolve host pokeAPI", "body": "<p>I have read <a href=\"https://stackoverflow.com/questions/19951466/java-net-unknownhostexception-unable-to-resolve-host-url-no-address-associ\">this</a> and I have to add this permission in my manifest : </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>It's work now . Thanks for your responses.</p>\n"}], "owner": {"reputation": 13, "user_id": 9077261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mG5Ze.jpg?s=128&g=1", "display_name": "L.Hure", "link": "https://stackoverflow.com/users/9077261/l-hure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "closed_date": 1513172917, "accepted_answer_id": 47794567, "answer_count": 1, "score": 0, "last_activity_date": 1513630841, "creation_date": 1513104929, "question_id": 47779683, "link": "https://stackoverflow.com/questions/47779683/unable-to-resolve-host-pokeapi", "closed_reason": "Duplicate", "title": "Unable to resolve host pokeAPI", "body": "<p>I want to get datas from pokeAPI for my android API.  I have followed the instructions into this page <a href=\"https://github.com/PokeAPI/pokekotlin\" rel=\"nofollow noreferrer\">https://github.com/PokeAPI/pokekotlin</a>.</p>\n\n<p>I have add in bluid.gradle(module:app) dependencies :</p>\n\n<pre><code>compile 'me.sargunvohra.lib:pokekotlin:2.3.0'\n</code></pre>\n\n<p>In build.gradle(Project):</p>\n\n<pre><code>allprojects {\nrepositories {\n    google()\n    jcenter()\n    maven { url 'http://jcenter.bintray.com' }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I have add this permission in manifest :</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>The code for get pokemon species is in a asynctask :</p>\n\n<pre><code> private class DownloadPokeAPIData extends AsyncTask&lt;Integer,Void,PokemonSpecies&gt; {\n\n    protected PokemonSpecies doInBackground(Integer...numbers){\n        PokeApi pokeApi = new PokeApiClient();\n        try {\n            return pokeApi.getPokemonSpecies(numbers[0].intValue());\n        }catch(Exception e){\n            Log.e(\"AsyncTask error\",e.getMessage());\n        }\n        return null;\n    }\n\n    protected void onPostExecute(PokemonSpecies result) {\n        if(result != null) ((TextView)findViewById(R.id.pokemon)).setText(result.getName());\n    }\n\n\n}\n</code></pre>\n\n<p>The call of DownloadPokeAPIData is in onCreate of MainActivity: <code>new DownloadPokeAPIData().execute(new Integer(1));</code></p>\n\n<p>But i still get this message: </p>\n\n<pre><code>AsyncTask\u00a0error: Unable to resolve host \"pokeapi.co\": No address associated with hostname\n</code></pre>\n\n<p>Do you know where the problem came from ?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "google-play-services", "build.gradle"], "comments": [{"owner": {"reputation": 1012, "user_id": 3934789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75fd741413808af5f876df9ba2582bd?s=128&d=identicon&r=PG", "display_name": "Cliabhach", "link": "https://stackoverflow.com/users/3934789/cliabhach"}, "edited": false, "score": 1, "creation_date": 1513103706, "post_id": 47779243, "comment_id": 82519835, "body": "Is that the entire error message? In the &#39;Gradle Console&#39; view, there should be more info - like, in <a href=\"https://stackoverflow.com/q/46053902/3934789\">stackoverflow.com/q/46053902/3934789</a> &#39;s case, there were multiple copies of the same class."}, {"owner": {"reputation": 16, "user_id": 9090281, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M69BysZF-Jg/AAAAAAAAAAI/AAAAAAAADUs/rZu_gMrHrnA/photo.jpg?sz=128", "display_name": "Danilo Furtado", "link": "https://stackoverflow.com/users/9090281/danilo-furtado"}, "reply_to_user": {"reputation": 1012, "user_id": 3934789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75fd741413808af5f876df9ba2582bd?s=128&d=identicon&r=PG", "display_name": "Cliabhach", "link": "https://stackoverflow.com/users/3934789/cliabhach"}, "edited": false, "score": 0, "creation_date": 1513109103, "post_id": 47779243, "comment_id": 82522654, "body": "What is written on the gradle console is this here:   <code>FAILURE: Build failed with an exception.  * What went wrong: Execution failed for task &#39;: app: transformDexArchiveWithExternalLibsDexMergerForDebug&#39;. &gt; java.lang.RuntimeException: java.lang.RuntimeException: com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex  * Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.  * Get more help at https:&#47;&#47;help.gradle.org  BUILD FAILED in 39s  38 actionable tasks: 19 executed, 19 up-to-date</code>"}, {"owner": {"reputation": 1012, "user_id": 3934789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75fd741413808af5f876df9ba2582bd?s=128&d=identicon&r=PG", "display_name": "Cliabhach", "link": "https://stackoverflow.com/users/3934789/cliabhach"}, "edited": false, "score": 0, "creation_date": 1513118108, "post_id": 47779243, "comment_id": 82526641, "body": "Hm. Is the <code>--stacktrace</code> in that message clickable? That should force it to re-run with more information about the error. You could also open up the terminal and run <code>gradlew assembleDebug --stacktrace</code> (if you&#39;re on Windows) or <code>.&#47;gradlew assembleDebug --stacktrace</code> (if you&#39;re on anything else). If you get more info this way, add it to your question so I can read it easier."}], "answers": [{"tags": [], "owner": {"reputation": 66307, "user_id": 599346, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=128&d=identicon&r=PG", "display_name": "tyczj", "link": "https://stackoverflow.com/users/599346/tyczj"}, "is_accepted": false, "score": 0, "last_activity_date": 1513103535, "creation_date": 1513103535, "answer_id": 47779296, "question_id": 47779243, "link": "https://stackoverflow.com/questions/47779243/java-lang-runtimeexception-java-lang-runtimeexception-com-android-builder-dexi/47779296#47779296", "title": "java.lang.RuntimeException: java.lang.RuntimeException: com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex", "body": "<p>When this happens to me I comment out <code>multiDexEnabled true</code> then do a clean/build/run.</p>\n\n<p>If you application does not hit the 65k method limit you dont need to enable multidex</p>\n"}, {"tags": [], "owner": {"reputation": 914, "user_id": 3417649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692ebc669ee8c698c3d39c3fbb833a7e?s=128&d=identicon&r=PG&f=1", "display_name": "gbixahue", "link": "https://stackoverflow.com/users/3417649/gbixahue"}, "is_accepted": false, "score": 0, "last_activity_date": 1513106970, "creation_date": 1513106970, "answer_id": 47780167, "question_id": 47779243, "link": "https://stackoverflow.com/questions/47779243/java-lang-runtimeexception-java-lang-runtimeexception-com-android-builder-dexi/47780167#47780167", "title": "java.lang.RuntimeException: java.lang.RuntimeException: com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex", "body": "<p>A haved same problem and i sloved it by two tricks\nIf you already enabled the multiDex, try to exclude annotation package from kotlin</p>\n\n<pre><code>implementation (\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"){\n  exclude group: 'org.jetbrains', module: 'annotations'\n}\n</code></pre>\n\n<p>It's solution help me</p>\n"}], "owner": {"reputation": 16, "user_id": 9090281, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-M69BysZF-Jg/AAAAAAAAAAI/AAAAAAAADUs/rZu_gMrHrnA/photo.jpg?sz=128", "display_name": "Danilo Furtado", "link": "https://stackoverflow.com/users/9090281/danilo-furtado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513106970, "creation_date": 1513103363, "question_id": 47779243, "link": "https://stackoverflow.com/questions/47779243/java-lang-runtimeexception-java-lang-runtimeexception-com-android-builder-dexi", "title": "java.lang.RuntimeException: java.lang.RuntimeException: com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex", "body": "<p>My project is in Kotlin on Android Studio 3.0.1\nthis is my design gradle</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.0'\n    ext.anko_version='0.10.3'\n    repositories {\n        jcenter()\n        mavenCentral()\n        google()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.0.1'\n        classpath 'com.google.gms:google-services:3.1.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\nallprojects {\n    repositories {\n        google()\n        jcenter()\n        mavenCentral()\n    }\n}\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>In this app I'm creating a library, in this library I have the following gradient file.</p>\n\n<pre><code>apply plugin: 'com.android.library'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\n\nandroid {\n    compileSdkVersion 26\n    buildToolsVersion '26.0.2'\n\n    defaultConfig {\n        minSdkVersion 15\n        targetSdkVersion 26\n        versionCode 1\n        versionName \"1.0\"\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation('com.google.api-client:google-api-client-android:1.22.0') {\n        exclude group: 'org.apache.httpcomponents'\n        exclude group: 'com.google.code.findbugs'\n    }\n    implementation('com.google.apis:google-api-services-gmail:v1-rev66-1.22.0') {\n        exclude group: 'org.apache.httpcomponents'\n    }\n\n    implementation 'com.android.support:appcompat-v7:26.1.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.android.support:design:26.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n\n    testImplementation 'com.greghaskins:spectrum:1.2.0'\n\n    implementation 'com.squareup.retrofit2:retrofit:2.3.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.3.0'\n    implementation 'com.jakewharton.retrofit:retrofit2-rxjava2-adapter:1.0.0'\n    implementation 'com.google.code.gson:gson:2.8.0'\n    implementation 'io.reactivex.rxjava2:rxjava:2.0.2'\n    implementation 'io.reactivex.rxjava2:rxandroid:2.0.1'\n\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation \"org.jetbrains.anko:anko-commons:$anko_version\"\n    implementation 'com.android.support:multidex:1.0.2'\n\n    implementation 'com.google.android.gms:play-services-location:11.6.2'\n    implementation 'com.google.android.gms:play-services-gcm:11.6.2'\n    implementation 'com.google.android.gms:play-services-auth:11.6.2'\n\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>So far so good, the project compiles normally, but when I go build, to run the app via usb on my cell phone happens the following error that I still can not solve.</p>\n\n<blockquote>\n  <p>Error: Execution failed for task ': app:\n  transformDexArchiveWithExternalLibsDexMergerForDebug'.</p>\n  \n  <blockquote>\n    <p>java.lang.RuntimeException: java.lang.RuntimeException: com.android.builder.dexing.DexArchiveMergerException: Unable to merge\n    dex</p>\n  </blockquote>\n</blockquote>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["android", "architecture", "kotlin", "mosby"], "comments": [{"owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1513098019, "post_id": 47777688, "comment_id": 82516783, "body": "maybe <a href=\"http://hannesdorfmann.com/android/mosby3-mvi-7\" rel=\"nofollow noreferrer\">this</a> will help"}, {"owner": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "reply_to_user": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "edited": false, "score": 0, "creation_date": 1513113427, "post_id": 47777688, "comment_id": 82524719, "body": "This not helps, it is just a workaround for snackbar only and not some general solution I&#39;m looking for."}], "answers": [{"comments": [{"owner": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "edited": false, "score": 0, "creation_date": 1513173254, "post_id": 47793299, "comment_id": 82550282, "body": "Thanks for such a big answer. That double state emitting one right after another looks like a good generic solution for these situations. How do you think it should be done, our presenter has scan which emits only one ViewState, we need something like two consecutive Actions/PartialStates whatever, first one to start doing something flag, second one to clear this flag, right? But there is still possible gap between these emits where some other state change can happen, isn&#39;t it?"}, {"owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "reply_to_user": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "edited": false, "score": 0, "creation_date": 1513175516, "post_id": 47793299, "comment_id": 82551780, "body": "Theoretically yes, but the state reducer (<code>scan()</code> operator) takes care that at the end you get the correct viewstate out."}, {"owner": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "edited": false, "score": 0, "creation_date": 1513176278, "post_id": 47793299, "comment_id": 82552292, "body": "I mean in the end it doesn&#39;t matter, yes, but if we have Toast showing on some &quot;showError&quot; bool flag from our state equals true and another action will lead to new state before clear action reduced then two Toasts will be shown which is obviously not looks right."}, {"owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "reply_to_user": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "edited": false, "score": 1, "creation_date": 1513177449, "post_id": 47793299, "comment_id": 82553193, "body": "zour scan() gets the &quot;showError action&quot; and the output is a ViewState with showError = true. Next &quot;another action&quot; comes (before &quot;clear error action&quot; is handled): In that case the scan() operator know that ViewState.showError == true and set it to false. that prevents the second toast to appear on screen. Next the &quot;clear error action&quot; is handled by the scan() operator and since showError is already set to false,output is still a ViewState with showError == false. That is the beauty of a state reducer: It ensures that you get the correct state as output regardless of the order the inputs happen"}, {"owner": {"reputation": 61, "user_id": 4965786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88662aa1c4ba22fbe8f0ed967780d519?s=128&d=identicon&r=PG&f=1", "display_name": "ldulcic", "link": "https://stackoverflow.com/users/4965786/ldulcic"}, "edited": false, "score": 0, "creation_date": 1560182731, "post_id": 47793299, "comment_id": 99643019, "body": "@sockeqwe why would you even need &quot;clear error action&quot; when state reducer will know that it needs to clear error flag?"}], "tags": [], "owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "is_accepted": true, "score": 7, "last_activity_date": 1513168868, "creation_date": 1513168868, "answer_id": 47793299, "question_id": 47777688, "link": "https://stackoverflow.com/questions/47777688/single-time-events-in-mvi-architecture/47793299#47793299", "title": "Single time events in MVI architecture", "body": "<p>1) Notes App:\nIn a perfect world: yes your ViewState would have an <code>text</code> changes whenever the user inserts the text and renders. Regarding the recursion: I might be wrong but I think that RxBindings somewhere offers an Observable that not only contains the changed text, but also a boolean flag if this change has been caused by user input or by programmatically setting the text. Anyways, I think you could also workaround the recursion if you check <code>if (editText.text != viewState.text)</code> and only set the text in case that they are different (keep in mind that you may have to use the TextWatcher callback that is triggered afterward text has been changed to start the intent, not \"before is going to be changed\").</p>\n\n<p>With that said, on Android we are not living in a perfect world. As you have already said, the text will be restore automatically by android. Therefore it makes sense to not make text part of the ViewState.</p>\n\n<p>So it sounds that in that case the ViewState is just an enum like this:</p>\n\n<pre><code>enum ViewState {\n   // The user can type typing text\n   IDLING,\n\n   // The app is saving the note\n   PROCESSING,\n\n   // After having saved (PROCESSING) the note, CLEARED means, show a new empty note  \n   CLEARED\n}\n</code></pre>\n\n<p>So the initial state is <code>IDLING</code>. Then once the note should be saved the next emitted ViewState is <code>PROCESSING</code>. Once this was successful, your business logic immediately fires a <code>CLEARED</code> followed immediately by  <code>IDLING</code> so at the end the user sees an empty note again and can start typing the new note.</p>\n\n<p>Don't use <code>doOnNext()</code> for manipulating the view. ViewState is the single source of truth for the view.</p>\n\n<p>Regarding RecyclerView: RecyclerView restores it's scroll position automatically, if not (you set the LayoutManager and  / or adapter to late, after state has been restored). Nevertheless, if you would like to model the scroll position in ViewState, which again in a perfect world would be the best solution I guess, you should consider not update the scroll position in your ViewState on each pixel scrolled but rather do it once the user is not scrolling anymore / fling has finished. </p>\n\n<p>2) Github app:</p>\n\n<blockquote>\n  <ol>\n  <li>We should show progressBar and disable okButton while loading. We\n  should have like loading/content/error sealed class(lets call it\n  ContentState) and have its instance in our ViewState. View knows how\n  to render ContentState.loading and shows progressBar and disables\n  okButton. Am I right?</li>\n  </ol>\n</blockquote>\n\n<p>Yes</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>How to handle navigation then? </li>\n  </ol>\n</blockquote>\n\n<p>For me, handling this as a side effect works well: I have a class <code>Navigator</code> that is injected into the presenter and used in <code>doOnNext { navigator.goToX() }</code> . The Navigator then dispatches that to another component that can be temporarily attached / detached. So this other component is observing the Navigator for \"navigation events\" The reason why I would do that is that then this component is not leaking activity / fragment context. \"This component\" can be directly the Activity or Fragment or whatever, but I tend to have a dedicated class, let's call it <code>Router</code> that observes the <code>Navigator</code> for navigation events and does the  <code>FragmentTransactions</code> or whatever you use in your app.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Toast - is there something in state or we consider this as side effect? Same problems.</li>\n  </ol>\n</blockquote>\n\n<p>This can be handled similar to what you can do with <code>Snackbar</code> (see <a href=\"http://hannesdorfmann.com/android/mosby3-mvi-7\" rel=\"noreferrer\">here</a>). Toast doesn't have an API to hide a Toast. So instead of a timer you can immediately fire two ViewState one after another: the first one with the error flag set (which then causes the Toast do be displayed on screen) and the second one where you \"clear\" this flag. Something like this:</p>\n\n<pre><code>Observable.just( ViewState(error = true, ...), new ViewState( error = false, ... )\n</code></pre>\n\n<p>I hope that clarifies some things, but as always: Don't take them as a silverbullet. Do whatever works best for your app and use case. Don't be super religious, it's always a case by case decision.</p>\n"}], "owner": {"reputation": 980, "user_id": 552246, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/T0jeO.jpg?s=128&g=1", "display_name": "pavelkorolevxyz", "link": "https://stackoverflow.com/users/552246/pavelkorolevxyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 0, "accepted_answer_id": 47793299, "answer_count": 1, "score": 5, "last_activity_date": 1513168868, "creation_date": 1513097447, "question_id": 47777688, "link": "https://stackoverflow.com/questions/47777688/single-time-events-in-mvi-architecture", "title": "Single time events in MVI architecture", "body": "<p>Trying new architecture paradigm where presenter creates immutable state(model) stream and view just renders it.</p>\n\n<p>Can't understand how to handle situations where we need to make some event for the one time only. There are couple examples.</p>\n\n<p>1) Notes app. We have <code>editText</code> and <code>saveButton</code>. User clicks <code>saveButton</code>, some processing happens and editText should be cleared. Could you guys please describe what will be in our <code>ViewState</code> here and approximate logic flow?</p>\n\n<p>Questions and pitfalls I see now:</p>\n\n<ol>\n<li>We subscribe to <code>editText.textChanges()</code> in presenter. If we will have <code>text</code> in our <code>ViewState</code> and render it each render call then we will fall into recursion because it will emit new textChange and will update state and render again.</li>\n<li>Do we need <code>text</code> in <code>ViewState</code> to restore it on orientation text or process kill/restore, looks like it works out of box here. But imagine <code>recyclerView</code>s scroll position. We definitely need to save it to restore. We can't restore it on each render call cause it looks weird, isn't it?</li>\n<li>If we consider such logic as side effect and will call <code>.doOnNext{ view.clearText() }</code> it makes sense, but do we have reference to view in canonical MVI implementation? Mosby doesn't have it as I see. </li>\n<li>It makes sense but there is possibility of view being dead in the moment of <code>doOnNext</code> call. MVI should help us with this but only if it's the part of <code>ViewState</code>, right? </li>\n</ol>\n\n<p>2) Github app. First screen(Org): <code>orgEditText</code>, <code>okButton</code>, <code>progressBar</code>. Second screen (Repos): <code>recyclerView</code>. When user enters organization into <code>orgEditText</code> and clicks <code>okButton</code> app should make request to API and on success navigate to Repos screen on success or show toast on failure. Again could you please describe <code>ViewState</code> for Org screen and what logic should look like?</p>\n\n<p>Questions and pitfalls I see now:</p>\n\n<ol>\n<li>We should show <code>progressBar</code> and disable <code>okButton</code> while loading. We should have like loading/content/error sealed class(lets call it <code>ContentState</code>) and have its instance in our <code>ViewState</code>. View knows how to render <code>ContentState.loading</code> and shows <code>progressBar</code> and disables <code>okButton</code>. Am I right?</li>\n<li>How to handle navigation then? The same questions as 1.3 and 1.4.</li>\n<li>I've seen opinions that navigation should be considered as side effect, but again 1.4. </li>\n<li>Toast - is there something in state or we consider this as side effect? Same problems. </li>\n</ol>\n\n<p>Google suggests <code>SingleLiveEvent</code> solution, but it looks weird and then there should be as much <code>LiveData&lt;SingleLiveEvent&gt;</code> streams as we have such things, not really a single source of truth.\nOthers suggest new intent generated from render func which is better but there is a possibility that some async operations will change state again and we'll get second Toast while first is showing and so on. </p>\n"}, {"tags": ["java", "kotlin", "kotlin-interop", "java-interop"], "answers": [{"comments": [{"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1513099095, "post_id": 47775950, "comment_id": 82517376, "body": "It seems like a lot of work and code reuse just to achieve a  java-interop"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1513113899, "post_id": 47775950, "comment_id": 82524919, "body": "<code>inline</code> modifier doesn&#39;t hide a function from Java"}, {"owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "reply_to_user": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1513135681, "post_id": 47775950, "comment_id": 82531468, "body": "@Gil The java interop is there from the beginning with no work. Yes, the parameter name is not intuitive, but it works just fine.  The extra work is only required because you don&#39;t want to see $receiver as the parameter name when doing completion in Java. Unfortunately, there isn&#39;t an annotation to accomplish what you want, so you have a choice to make. Live with the ugly name, add an extra method, or convert the caller to Kotlin ;)"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 9, "last_activity_date": 1561034903, "last_edit_date": 1561034903, "creation_date": 1513091976, "answer_id": 47775950, "question_id": 47775870, "link": "https://stackoverflow.com/questions/47775870/changing-kotlin-extension-function-receiver-jvm-name/47775950#47775950", "title": "Changing kotlin extension function receiver JVM name", "body": "<p><code>@JvmName</code> can only be applied to functions, property accessors and top-level package facades for files. Parameter names are not supported.</p>\n\n<p>Basically, you can define two functions, one taking a simple parameter and another one with receiver:</p>\n\n<pre><code>fun toPx(value: Int) { /* implementation */ }\n\nfun Int.toPx() = toPx(this)\n</code></pre>\n\n<p>But, expectedly enough, this won't compile because the two functions would have the same JVM signatures. So, to disambiguate them, add <code>@JvmName(\"...\")</code> to the extension and (optionally) mark the extension as <code>inline</code>:</p>\n\n<pre><code>fun toPx(value: Int) { /* implementation */ }\n\n@JvmName(\"toPxExtension\") @Suppress(\"nothing_to_inline\")\ninline fun Int.toPx() = toPx(this)\n</code></pre>\n\n<p><sup>To hide the extension function from Java, you can also <a href=\"https://stackoverflow.com/questions/41022275/whats-the-intended-use-of-jvmsynthetic-in-kotlin\">annotate it with <code>@JvmSynthetic</code></a>.</sup></p>\n\n<p>The downside of this solution is the top-level function <code>toPx</code> leaking into the IDE completion scope of the files that see the package.</p>\n"}, {"comments": [{"owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "edited": false, "score": 0, "creation_date": 1533804540, "post_id": 51762310, "comment_id": 90484021, "body": "It&#39;s an option but I don&#39;t think it&#39;s an equivalent conversion/option, I feel like it could be fixed by the Kotlin team and make the Java-interop seem less"}], "tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 1, "last_activity_date": 1533804020, "last_edit_date": 1533804020, "creation_date": 1533803602, "answer_id": 51762310, "question_id": 47775870, "link": "https://stackoverflow.com/questions/47775870/changing-kotlin-extension-function-receiver-jvm-name/51762310#51762310", "title": "Changing kotlin extension function receiver JVM name", "body": "<p>The parameter name is only relevant in Java regarding documentation (as a method signature hint in the IDE, when you call a method). Unlike in Kotlin, it is never part of the calling code.</p>\n\n<p>If you define extension methods on existing types, I've found that a good approach is to name the file in a way that describes the receiver. While this doesn't matter for Kotlin (as extension methods will be called without the file name), it does for other JVM languages. Thus, the receiver type/meaning is not expressed by the parameter name, but by the class name.</p>\n\n<p>You're already aware of <code>@file:JvmName</code>, so use it to your advantage:</p>\n\n<pre><code>@file:JvmName(\"Ints\")\n\nfun Int.toPx() { ... }\n</code></pre>\n\n<p>In Kotlin:</p>\n\n<pre><code>val value = 328\nval px = value.toPx()\n</code></pre>\n\n<p>In Java, the code is very close to the Kotlin counterpart:</p>\n\n<pre><code>int value = 328;\nPixel px = Ints.toPx(value);\n</code></pre>\n\n<p>Can of course be a longer name such as <code>IntExtensions</code>if that helps readability.</p>\n\n<p>Note that in Kotlin, it is explicitly allowed to reuse the same class name in <code>@file:JvmName</code> across multiple files, and the extensions functions will be combined in a single JVM class (see also <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#package-level-functions\" rel=\"nofollow noreferrer\">here</a>). You need the annotation <code>@file:JvmMultifileClass</code> for this.</p>\n\n<p>Thus, you could also have an <code>Int</code> extension completely unrelated to pixels in another file, yet it would still end up in the same Java class <code>Ints</code>.</p>\n"}], "owner": {"reputation": 1583, "user_id": 5362029, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yMl70.jpg?s=128&g=1", "display_name": "Gil Goldzweig", "link": "https://stackoverflow.com/users/5362029/gil-goldzweig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1244, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1561034903, "creation_date": 1513091697, "question_id": 47775870, "link": "https://stackoverflow.com/questions/47775870/changing-kotlin-extension-function-receiver-jvm-name", "title": "Changing kotlin extension function receiver JVM name", "body": "<p>This is a general question.\nLet's say I have an extension function written in kotlin which converts DP to PX and return a NonNull Int</p>\n\n<pre><code>fun Int.toPx() {  /** implementation */ }\n</code></pre>\n\n<p>The function in java will look something like this</p>\n\n<pre><code>public int toPx(int $receiver) {  /** implementation */ }\n</code></pre>\n\n<p>In my opinion the <code>$receiver</code> makes the Java-interop feels generated and uninviting.</p>\n\n<p>I know that you can use the <code>@JvmName</code> annotation with some combinations like <code>@file:JvmName</code> to change the name in java.</p>\n\n<p>When i'm trying to use <code>@JvmName</code> with the <code>receiver</code> site target it says </p>\n\n<p>\"This annotation is not applicable to target <code>type usage</code> and use site target <code>@receiver</code>\"  </p>\n\n<p>Is there a way to overcome that and change the name of the receiver and if not what is the best alternative.</p>\n"}, {"tags": ["kotlin", "aws-lambda", "serverless-framework"], "comments": [{"owner": {"reputation": 528, "user_id": 3224432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FejSy.png?s=128&g=1", "display_name": "DrEigelb", "link": "https://stackoverflow.com/users/3224432/dreigelb"}, "edited": false, "score": 0, "creation_date": 1513237092, "post_id": 47775785, "comment_id": 82577438, "body": "Does the problem persist over long periods of time (&gt;15-30min) or does it repeat itself eradically? This could be a clue as to this being linked to the same container-instance. It might be a problem, where the container instance is still running with a combination of some form of caching that results in this behavior."}, {"owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "reply_to_user": {"reputation": 528, "user_id": 3224432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FejSy.png?s=128&g=1", "display_name": "DrEigelb", "link": "https://stackoverflow.com/users/3224432/dreigelb"}, "edited": false, "score": 0, "creation_date": 1513247882, "post_id": 47775785, "comment_id": 82583738, "body": "After 2 hours execution is still incrementing the number of &quot;hello world&quot;... I thought about that too, but can&#39;t explain why since lambda should be stateless..."}, {"owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "reply_to_user": {"reputation": 528, "user_id": 3224432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FejSy.png?s=128&g=1", "display_name": "DrEigelb", "link": "https://stackoverflow.com/users/3224432/dreigelb"}, "edited": false, "score": 0, "creation_date": 1513358804, "post_id": 47775785, "comment_id": 82637961, "body": "Ok @DrEigelb , this issued is linked with the container-instance lifetime. When it&#39;s re-created, it will start from the beginning. Any hint about this?"}, {"owner": {"reputation": 528, "user_id": 3224432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FejSy.png?s=128&g=1", "display_name": "DrEigelb", "link": "https://stackoverflow.com/users/3224432/dreigelb"}, "edited": false, "score": 0, "creation_date": 1513379482, "post_id": 47775785, "comment_id": 82646245, "body": "Just as I thought, @abierto. I dont&#39;t know very much Kotlin, but I suspect there might be some funky stuff going on in the companion object where you call the <code>getlogger</code>. Try instantiating the logger (and the logging logic) outside the <code>Handler</code> class if you want to use your logger. There is also some tips from AWS on logging in Java, which might help (<a href=\"http://docs.aws.amazon.com/lambda/latest/dg/java-logging.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/java-logging.html</a>). Cheers"}], "answers": [{"tags": [], "owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "is_accepted": true, "score": 1, "last_activity_date": 1513674922, "creation_date": 1513674922, "answer_id": 47883517, "question_id": 47775785, "link": "https://stackoverflow.com/questions/47775785/unexpected-behaviour-with-aws-lambda/47883517#47883517", "title": "Unexpected behaviour with AWS Lambda", "body": "<p>I resolved this issue by changing the logging dependency to:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.symphonia&lt;/groupId&gt;\n    &lt;artifactId&gt;lambda-logging&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I've found a very useful article here: <a href=\"https://blog.symphonia.io/a-love-letter-to-lambda-logging-974b0eb49273\" rel=\"nofollow noreferrer\">https://blog.symphonia.io/a-love-letter-to-lambda-logging-974b0eb49273</a></p>\n"}], "owner": {"reputation": 1325, "user_id": 1285611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5938707880c06c25f0d789961f0aebeb?s=128&d=identicon&r=PG", "display_name": "abierto", "link": "https://stackoverflow.com/users/1285611/abierto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 47883517, "answer_count": 1, "score": 1, "last_activity_date": 1513674922, "creation_date": 1513091409, "question_id": 47775785, "link": "https://stackoverflow.com/questions/47775785/unexpected-behaviour-with-aws-lambda", "title": "Unexpected behaviour with AWS Lambda", "body": "<p><strong>What I've done</strong> </p>\n\n<p>I've created a project using Serverless cli, from <code>aws-kotlin-jvm-maven</code> template. After that I've edited my serverless.yml template this way:</p>\n\n<pre><code>service: test\nprovider:\n  name: aws\n  runtime: java8\n  region: eu-west-1\npackage:\n  artifact: target/test-1.0.0.jar\nfunctions:\n  hello:\n    handler: com.example.Handler\n    events:\n      - schedule: rate(2 minutes)\n</code></pre>\n\n<p>And I've edited my Handler this way:</p>\n\n<pre><code>class Handler:RequestHandler&lt;Map&lt;String, Any&gt;, ApiGatewayResponse&gt; {\n    override fun handleRequest(input:Map&lt;String, Any&gt;, context:Context):ApiGatewayResponse {\n        BasicConfigurator.configure()\n        LOG.info(\"Hello, World!\")\n        return ApiGatewayResponse()\n    }\n    companion object {\n        private val LOG = Logger.getLogger(Handler::class.java)\n    }\n}\n</code></pre>\n\n<p>I was expecting my Lambda to run every 2 minutes, logging a \"Hello, World!\" on CloudWatch, every 2 minutes. </p>\n\n<p><strong>My problem</strong> </p>\n\n<p>What I found on cloudWatch logs is the following:</p>\n\n<p>1st run: \n\"Hello, World!\"</p>\n\n<p>2nd run: \n\"Hello, World!\"\n\"Hello, World!\"</p>\n\n<p>3rd run: \n\"Hello, World!\"\n\"Hello, World!\"\n\"Hello, World!\"</p>\n\n<p>...and so on.</p>\n\n<p>Any suggestion on what's happening here? </p>\n"}, {"tags": ["android-studio", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": true, "score": 1, "last_activity_date": 1513085121, "creation_date": 1513085121, "answer_id": 47773786, "question_id": 47773697, "link": "https://stackoverflow.com/questions/47773697/run-android-studio-2-3-3-kotlin-project-in-android-studio-3-0-1-after-update/47773786#47773786", "title": "run android studio 2.3.3 kotlin project in android studio 3.0.1 after update", "body": "<p>Android Studio 3 still requires the Kotlin plugin, the difference is that it's now bundled by default. To update the plugin, navigate to the Tools -> Kotlin -> Configure Kotlin Plugin Updates menu, and click \"Check for updates\" in the dialog that appears.</p>\n"}], "owner": {"reputation": 201, "user_id": 5991631, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24679fdd3a8aba05cf6ca9434f2f0a05?s=128&d=identicon&r=PG&f=1", "display_name": "msdev16", "link": "https://stackoverflow.com/users/5991631/msdev16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 47773786, "answer_count": 1, "score": 0, "last_activity_date": 1513085121, "creation_date": 1513084834, "question_id": 47773697, "link": "https://stackoverflow.com/questions/47773697/run-android-studio-2-3-3-kotlin-project-in-android-studio-3-0-1-after-update", "title": "run android studio 2.3.3 kotlin project in android studio 3.0.1 after update", "body": "<p>i have updated AS 2.3.3 to 3.0.1 using a patch .jar \nthe update was successful however android studio keeps reminding me that i need to update Kotlin plugin. This Kotlin plugin was installed in the 2.3.3 version but think that android studio 3.0.1 doesn't require a Kotlin \nplugin.\nSo my question is what should i do in the old project so that it works fine in AS 3.0.1</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "edited": false, "score": 0, "creation_date": 1513083443, "post_id": 47773118, "comment_id": 82507223, "body": "Did you try debugging to check <code>user</code> value to make sure it match <code>users</code> variable in MainActivity?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6008330"}, "reply_to_user": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "edited": false, "score": 0, "creation_date": 1513084387, "post_id": 47773118, "comment_id": 82507850, "body": "The variable is the same, since it is the one that is explicit in XML. But how could I know? Values are changed in the Handler class"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6008330"}, "edited": false, "score": 0, "creation_date": 1513084439, "post_id": 47773403, "comment_id": 82507889, "body": "I changed it as you mentioned, but it did not work, there&#39;s something I&#39;m doing wrong."}, {"owner": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "edited": false, "score": 0, "creation_date": 1513084528, "post_id": 47773403, "comment_id": 82507957, "body": "@HenriqueMendes I forgot to give the full approach: <a href=\"https://www.bignerdranch.com/blog/two-way-data-binding-on-android-observing-your-view-with-xml/\" rel=\"nofollow noreferrer\">bignerdranch.com/blog/&hellip;</a>."}, {"owner": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "edited": false, "score": 0, "creation_date": 1513084627, "post_id": 47773403, "comment_id": 82508036, "body": "I just show you that you think your POJO can &quot;auto update&quot; value for you, but it&#39;s not, that answered your question, right? Btw you should follow one in three standard approach which recommended by Google in the document."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6008330"}, "edited": false, "score": 0, "creation_date": 1513084859, "post_id": 47773403, "comment_id": 82508185, "body": "I read the document. My observable class has to be UserProfile, is that correct?"}, {"owner": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "edited": false, "score": 0, "creation_date": 1513085103, "post_id": 47773403, "comment_id": 82508349, "body": "@HenriqueMendes Yes! Your UserProfile model class is called POJO (in Java)."}], "tags": [], "owner": {"reputation": 8787, "user_id": 5282585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/817632218354985/picture?type=large", "display_name": "nhoxbypass", "link": "https://stackoverflow.com/users/5282585/nhoxbypass"}, "is_accepted": true, "score": 2, "last_activity_date": 1513084488, "last_edit_date": 1513084488, "creation_date": 1513083928, "answer_id": 47773403, "question_id": 47773118, "link": "https://stackoverflow.com/questions/47773118/why-texts-are-not-changing-in-activity/47773403#47773403", "title": "Why texts are not changing in activity?", "body": "<p>It behave the right way. From the <a href=\"https://developer.android.com/topic/libraries/data-binding/index.html#data_objects\" rel=\"nofollow noreferrer\">document</a>:</p>\n\n<blockquote>\n  <p>Any plain old Java object (POJO) may be used for data binding, but\n  modifying a POJO will not cause the UI to update. The real power of\n  data binding can be used by giving your data objects the ability to\n  notify when data changes. There are three different data change notification mechanisms, Observable objects, observable fields, and observable collections.</p>\n</blockquote>\n\n<p>Or you can try two-way data binding using <a href=\"https://www.bignerdranch.com/blog/two-way-data-binding-on-android-observing-your-view-with-xml/\" rel=\"nofollow noreferrer\">this</a> quick and dirty approach:</p>\n\n<p>Your  tag <code>android:text</code> is missing a <code>=</code>, after the <code>@:</code>. It should be <code>android:text=\"@={user.firstName}\"</code>. The <code>@={}</code> means \"two way data binding\". The <code>@{}</code> is one way data binding.</p>\n\n<p>Ex:</p>\n\n<pre><code>&lt;TextView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginBottom=\"10dp\"\n    android:text=\"@={user.firstName}\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 4727432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ca061f55238f6dba1e1815db6a48b1f6?s=128&d=identicon&r=PG", "display_name": "hluhovskyi", "link": "https://stackoverflow.com/users/4727432/hluhovskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1513085060, "creation_date": 1513085060, "answer_id": 47773767, "question_id": 47773118, "link": "https://stackoverflow.com/questions/47773118/why-texts-are-not-changing-in-activity/47773767#47773767", "title": "Why texts are not changing in activity?", "body": "<p>You can't just assign new value to variable and observe changes on UI. You should notify \"DataBinding\" somehow. There are few ways to do it.</p>\n\n<p>First one is to make UserProfile extend <code>BaseObservable</code> and notify when some property is changed:</p>\n\n<pre><code>class UserProfile : BaseObservable {\n\n    @get:Bindable\n    var firstName: String = \"\"\n        set(value) {\n            notifyPropertyChanged(BR.firstName)\n        }\n\n    @get:Bindable\n    var lastName: String = \"\"\n        set(value) {\n            notifyPropertyChanged(BR.lastName)\n        }\n\n    ... do same for other fields ...\n\n    constructor(firstNames: String, lastNames: String, statuss: String, isOnlines: Boolean) {\n\n        this.firstName = firstNames\n        this.lastName = lastNames\n        this.status = statuss\n        this.isOnline = isOnlines\n    }\n}\n</code></pre>\n\n<p>Second one is assigning new <code>UserProfile</code> to <code>ActivityMainBinding</code> after changes: </p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    val users = UserProfile(\"First Name\",\"Last Name\",\"Off\",false)\n    lateinit var handlerbtn: HandlerButtonClick\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val binding: ActivityMainBinding = DataBindingUtil.setContentView(this,R.layout.activity_main)\n        binding.user = users\n        handlerbtn = HandlerButtonClick(binding)\n        binding.handler = handlerbtn\n    }\n}\n</code></pre>\n\n<p>Then you should change <code>HandlerButtonClick</code> class:</p>\n\n<pre><code>class HandlerButtonClick(val binding: ActivityMainBinding) {\n    fun onClickButton(view: View, user: UserProfile) {\n        var msg = \"\"\n        if(!user.isOnline){\n            //changes\n        }else{\n            //changes   \n        }\n        binding.users = user\n        Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show()\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6008330"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 47773403, "answer_count": 2, "score": 1, "last_activity_date": 1513088653, "creation_date": 1513083050, "last_edit_date": 1513088653, "question_id": 47773118, "link": "https://stackoverflow.com/questions/47773118/why-texts-are-not-changing-in-activity", "title": "Why texts are not changing in activity?", "body": "<p>By studying <code>databinding</code>, I created a simple activity to start exercising.\nAnd have the following codes:</p>\n\n<p><strong>MainActivity:</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    val users = UserProfile(\"First Name\",\"Last Name\",\"Off\",false)\n    val handlerbtn = HandlerButtonClick()\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val binding: ActivityMainBinding = DataBindingUtil.setContentView(this,R.layout.activity_main)\n        binding.user = users\n        binding.handler = handlerbtn\n\n    }\n}\n</code></pre>\n\n<p><strong>Class for click:</strong></p>\n\n<pre><code>class HandlerButtonClick {\n    fun onClickButton(view: View, user: UserProfile) {\n        var msg = \"\"\n        if(!user.isOnline){\n            msg = \"Online\"\n            user.firstName = \"Henrique\"\n            user.lastName = \"Mendes\"\n            user.status = \"Online\"\n            user.isOnline = true\n\n        }else{\n            msg = \"Offline\"\n            user.firstName = \"First Name\"\n            user.lastName = \"Last Name\"\n            user.status = \"Offline\"\n            user.isOnline = false\n        }\n\n        Toast.makeText(view.context, msg, Toast.LENGTH_SHORT).show()\n    }\n}\n</code></pre>\n\n<p><strong>UserProfile Class:</strong></p>\n\n<pre><code>class UserProfile {\n    var firstName: String = \"\"\n    var lastName: String = \"\"\n    var status: String = \"\"\n    var isOnline: Boolean = false\n\n    constructor(firstNames: String, lastNames: String, statuss: String, isOnlines: Boolean) {\n        this.firstName = firstNames\n        this.lastName = lastNames\n        this.status = statuss\n        this.isOnline = isOnlines\n    }\n}\n</code></pre>\n\n<p><strong>XML:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;data&gt;\n\n        &lt;variable\n            name=\"user\"\n            type=\"com.dev.bob.testdatabinding2.UserProfile\" /&gt;\n        &lt;variable\n            name=\"handler\"\n            type=\"com.dev.bob.testdatabinding2.HandlerButtonClick\" /&gt;\n    &lt;/data&gt;\n\n    &lt;LinearLayout xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        tools:context=\"com.dev.bob.testdatabinding2.MainActivity\"&gt;\n\n        &lt;View\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"1.0dp\"\n            android:layout_marginBottom=\"10dp\"\n            android:layout_marginTop=\"10dp\"\n            android:background=\"@{user.isOnline?@color/colorGreen : @color/colorAccent}\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"10dp\"\n            android:text=\"@{user.firstName}\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"10dp\"\n            android:text=\"@{user.lastName}\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"10dp\"\n            android:text=\"@{user.status}\" /&gt;\n\n        &lt;Button\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:onClick=\"@{(view)-&gt; handler.onClickButton(view, user)}\"/&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>The toast works fine, that is, the variable <code>msg</code> changes. But my texts on the screen do not change. What should I do to make them change according to what is placed in each condition (<code>If</code> / <code>else</code>)?</p>\n\n<p>What I say is, by clicking the button, <code>firstName</code> does not change to Henry or First Name (again)</p>\n"}, {"tags": ["android", "kotlin", "android-custom-view"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1513082312, "post_id": 47772588, "comment_id": 82506496, "body": "The setup of the helper looks good, are you calling the methods on the <code>mOnClickListener</code> property somewhere in the class?"}, {"owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1513149959, "post_id": 47772588, "comment_id": 82536175, "body": "Thanks for the input on the helper. For the mOnclickListener I&#39;m using butterknife to handle the onClick events and triggering the mOnClickListener method, but nothing gets triggered. I&#39;ve edited the question to show the actual code."}, {"owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1513158356, "post_id": 47772588, "comment_id": 82540802, "body": "Butterknife obviously doesn&#39;t work as expected when used with kotlin. Will probably have to find some other way to create a binding to a OnClickListener."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1513159035, "post_id": 47772588, "comment_id": 82541220, "body": "Are you using <code>kapt</code> in your <code>build.gradle</code> file for annotation processing?"}, {"owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1513159796, "post_id": 47772588, "comment_id": 82541694, "body": "Yes I&#39;m using kapt."}], "answers": [{"tags": [], "owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "is_accepted": true, "score": 0, "last_activity_date": 1513173542, "creation_date": 1513173542, "answer_id": 47794815, "question_id": 47772588, "link": "https://stackoverflow.com/questions/47772588/dsl-like-onclick-listener-for-a-custom-view-using-kotlin-in-android/47794815#47794815", "title": "DSL-like OnClick-listener for a custom view using kotlin in Android", "body": "<p>Was just about to start crying when I finally found the solution - OMG.</p>\n\n<p>The problem was the SwipeRefreshLayout in the layout file for the dialogfragment, which can be seen here:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;android.support.v7.widget.Toolbar\n        android:id=\"@+id/dialog_worklist_toolbar\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentTop=\"true\"\n        android:background=\"@color/colorPrimary\"\n        android:elevation=\"4dp\"\n        android:minHeight=\"?android:attr/actionBarSize\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\" /&gt;\n\n    &lt;com.conhea.smartgfr.ui.examination.layouts.ErrorMessageView\n        android:id=\"@+id/dialog_worklist_errorview\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n       app:layout_constraintTop_toBottomOf=\"@+id/dialog_worklist_toolbar\" /&gt;\n\n    &lt;ProgressBar\n        android:id=\"@+id/dialog_worklist_progressbar\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:visibility=\"gone\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@id/dialog_worklist_toolbar\" /&gt;\n\n    &lt;android.support.v4.widget.SwipeRefreshLayout\n        android:id=\"@+id/dialog_worklist_swiperefreshlayout\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n         app:layout_constraintTop_toBottomOf=\"@id/dialog_worklist_toolbar\"&gt;\n\n        &lt;android.support.v7.widget.RecyclerView\n            android:id=\"@+id/dialog_worklist_recyclerview\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@android:color/transparent\" /&gt;\n    &lt;/android.support.v4.widget.SwipeRefreshLayout&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>The SwipeRefreshLayout was blocking the custom ErrorMessageView from being clickable.</p>\n\n<p>After adding <code><b>mView?.dialog_worklist_swiperefreshlayout?.isEnabled = false</b></code> to the below in my DialogFragment everything started working:</p>\n\n<pre><code>override fun setWorklistNotEnabledMessage(showMessage: Boolean) {\n    if (showMessage) {\n        mView?.dialog_worklist_recyclerview?.visibility = View.GONE\n        mView?.dialog_worklist_swiperefreshlayout?.isEnabled = false\n        mView?.dialog_worklist_errorview?.apply {\n            visibility = View.VISIBLE\n            setErrorDrawable(R.drawable.ic_worklist_disabled_black_24dp)\n            setPrimaryText(R.string.global_worklist_disabled_error)\n            setSecondaryText(R.string.dialog_worklist_worklist_disabled_error_secondary_text)\n            setOnErrorMessageViewClickListener {\n                onSecondaryTextClick { Timber.d(\"Test secondary click\") }\n                onPrimaryTextClick { Timber.d(\"Test primary click\") }\n                onImageClick { Timber.d(\"Test image click\") }\n            }\n        }\n\n    } else {\n        mView?.dialog_worklist_errorview?.apply {\n            visibility = View.GONE\n            setErrorDrawable(null)\n            setPrimaryText(\"\")\n            setSecondaryText(\"\")\n            setOnErrorMessageViewClickListener(null)\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3828, "user_id": 1495686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mQMVJ.png?s=128&g=1", "display_name": "Bohsen", "link": "https://stackoverflow.com/users/1495686/bohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "accepted_answer_id": 47794815, "answer_count": 1, "score": 1, "last_activity_date": 1513173542, "creation_date": 1513081430, "last_edit_date": 1513149860, "question_id": 47772588, "link": "https://stackoverflow.com/questions/47772588/dsl-like-onclick-listener-for-a-custom-view-using-kotlin-in-android", "title": "DSL-like OnClick-listener for a custom view using kotlin in Android", "body": "<p>I'm trying to create an DSL-like OnClick-listener (in kotlin) for a custom view that I'm using several places in the Android project I'm currently working on. The view has an ImageView, a primary textview and a secondary textview. I'm trying to create a listener-helper that allows you to only override specific methods of an interface instead of all of them (inspired by <a href=\"https://antonioleiva.com/listeners-several-functions-kotlin/?utm_source=twitter.com&amp;utm_medium=social&amp;utm_campaign=listeners-with-several-functions-in-kotl&amp;utm_content=14003943\" rel=\"nofollow noreferrer\">this article</a>). But I can't get it working. Actually it doesn't even work using regular OnClick listeners.</p>\n\n<p>Here's my ErrorMessageView:</p>\n\n<pre><code>class ErrorMessageView @JvmOverloads constructor(\n    context: Context,\n    attrs: AttributeSet? = null,\n    defStyle: Int = 0,\n    defStyleRes: Int = 0\n    ) : FrameLayout(context, attrs, defStyle, defStyleRes) {\n\n    private var mOnClickListener: OnErrorMessageViewClickListener? = null\n\n    init {\n        LayoutInflater.from(context).inflate(\n            R.layout.custom_errorview,\n            this,\n            true)\n        ButterKnife.bind(this)\n    }\n\n    interface OnErrorMessageViewClickListener {\n        fun onImageClick()\n        fun onPrimaryTextClick()\n        fun onSecondaryTextClick()\n    }\n\n    ... left out for brevity ...\n\n    fun setOnErrorMessageViewClickListener(\n        onViewClickListener: OnErrorMessageViewClickListener?) {\n        this.mOnClickListener = onViewClickListener\n    }\n\n\n    fun setOnErrorMessageViewClickListener(init: ErrorMessageViewClickListenerHelper.() -&gt; Unit) {\n        val listener = ErrorMessageViewClickListenerHelper()\n        listener.init()\n    mOnClickListener = listener\n}\n\n    @OnClick(R.id.image_container)\n    internal fun onImageViewClick() {\n        Timber.d(\"Clicked image view\")\n        mOnClickListener?.onImageClick()\n    }\n\n    @OnClick(R.id.primary_text_container)\n    internal fun onPrimaryTextViewClick() {\n        Timber.d(\"Clicked primary textview\")\n        mOnClickListener?.onPrimaryTextClick()\n    }\n\n    @OnClick(R.id.secondary_text_container)\n    internal fun onSecondaryTextViewClick() {\n        Timber.d(\"Clicked secondary textview\")\n        mOnClickListener?.onSecondaryTextClick()\n    }\n\n}\n</code></pre>\n\n<p>And here's my helper class:</p>\n\n<pre><code>private typealias ErrorViewClickListener = () -&gt; Unit\n\nopen class ErrorMessageViewClickListenerHelper : ErrorMessageView.OnErrorMessageViewClickListener {\n\n    private var mImageClick: ErrorViewClickListener? = null\n\n    fun onImageClick(onImageClick: ErrorViewClickListener?) {\n        mImageClick = onImageClick\n    }\n\n    override fun onImageClick() {\n        mImageClick?..invoke()\n    }\n\n    private var mPrimaryTextClick: ErrorViewClickListener? = null\n\n    fun onPrimaryTextClick(onPrimaryTextClick: ErrorViewClickListener?) {\n        mPrimaryTextClick = onPrimaryTextClick\n    }\n\n    override fun onPrimaryTextClick() {\n        mPrimaryTextClick?.invoke()\n    }\n\n    private var mSecondaryTextClick: ErrorViewClickListener? = null\n\n    fun onSecondaryTextClick(onSecondaryTextClick: ErrorViewClickListener?) {\n        mSecondaryTextClick = onSecondaryTextClick\n    }\n\n    override fun onSecondaryTextClick() {\n        mSecondaryTextClick?.invoke()\n    }\n}\n</code></pre>\n\n<p>My layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"24dp\"\n    android:layout_marginEnd=\"24dp\"&gt;\n\n    &lt;android.support.v7.widget.AppCompatImageView\n        android:id=\"@+id/image_container\"\n        android:layout_width=\"@dimen/dialog_worklist_image_size\"\n        android:layout_height=\"@dimen/dialog_worklist_image_size\"\n        android:layout_centerVertical=\"true\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        tools:ignore=\"ContentDescription\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/primary_text_container\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_marginEnd=\"24dp\"\n        android:layout_marginStart=\"24dp\"\n        android:layout_marginTop=\"8dp\"\n        android:textSize=\"16sp\"\n        android:clickable=\"true\"\n        android:focusable=\"true\"\n        app:layout_constraintEnd_toEndOf=\"@+id/image_container\"\n        app:layout_constraintStart_toStartOf=\"@+id/image_container\"\n        app:layout_constraintTop_toBottomOf=\"@id/image_container\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/secondary_text_container\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_marginEnd=\"24dp\"\n        android:layout_marginStart=\"24dp\"\n        android:textSize=\"16sp\"\n        android:clickable=\"true\"\n        android:focusable=\"true\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@id/primary_text_container\" /&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>I'm using the helper in my code like this, but nothing gets logged (It's almost as if no clicklistener can be attached):</p>\n\n<pre><code>override fun setWorklistNotEnabledMessage(showMessage: Boolean) {\n    if (showMessage) {\n        mView?.dialog_worklist_recyclerview?.visibility = View.GONE\n        mView?.dialog_worklist_errorview?.apply {\n            visibility = View.VISIBLE\n            setSecondaryTextClickListener(View.OnClickListener { Timber.d(\"Test secondary click\") })\n            setErrorDrawable(R.drawable.ic_worklist_disabled_black_24dp)\n            setPrimaryText(R.string.global_worklist_disabled_error)\n            setSecondaryText(R.string.dialog_worklist_worklist_disabled_error_secondary_text)\n            setOnErrorMessageViewClickListener {\n                onSecondaryTextClick { Timber.d(\"Test secondary click\") }\n                onPrimaryTextClick { Timber.d(\"Test primary click\") }\n                onImageClick { Timber.d(\"Test image click\") }\n                // . this@WorklistDialog\n            }\n        }\n\n    } else {\n        mView?.dialog_worklist_errorview?.apply {\n            visibility = View.GONE\n            setErrorDrawable(null)\n            setPrimaryText(\"\")\n            setSecondaryText(\"\")\n            setOnErrorMessageViewClickListener(null)\n        }\n    }\n}\n</code></pre>\n\n<p>Does anyone have a suggestion to what is wrong with my code?</p>\n\n<p>Btw. the above code is used in a DialogFragment - that is why you might notice the mView?. as a bit awkward. But that is the way to get a handle on the views in a dialog.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513078032, "post_id": 47771139, "comment_id": 82503731, "body": "Consider using top-level function without an explicit class"}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 355534, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1a400a98758be3a0f09dfb9314a8d9f6?s=128&d=identicon&r=PG", "display_name": "Anil", "link": "https://stackoverflow.com/users/355534/anil"}, "edited": false, "score": 0, "creation_date": 1513077867, "post_id": 47771319, "comment_id": 82503612, "body": "out of above two ways, which one is best considering my requirements."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 225, "user_id": 355534, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1a400a98758be3a0f09dfb9314a8d9f6?s=128&d=identicon&r=PG", "display_name": "Anil", "link": "https://stackoverflow.com/users/355534/anil"}, "edited": false, "score": 1, "creation_date": 1513078634, "post_id": 47771319, "comment_id": 82504134, "body": "I don&#39;t think you need a companion object here at all, you can just use a regular one. If you need to call these functions from Java too, you can still annotate them with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/\" rel=\"nofollow noreferrer\"><code>@JvmStatic</code></a>, just like in a companion."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 5, "last_activity_date": 1513085722, "last_edit_date": 1513085722, "creation_date": 1513077423, "answer_id": 47771319, "question_id": 47771139, "link": "https://stackoverflow.com/questions/47771139/java-math-like-classes-in-kotlin/47771319#47771319", "title": "Java Math like classes in Kotlin", "body": "<p>You can just use a simple <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-declarations\" rel=\"nofollow noreferrer\"><code>object</code> declaration</a> to achieve that syntax:</p>\n\n<pre><code>object Math {\n    fun add(x: Int, y: Int) = x + y\n}\n</code></pre>\n\n<p>This creates a singleton class, with only one instance at runtime, and you can call the methods on this instance with the <code>Math.add(1, 4)</code> syntax.</p>\n\n<hr>\n\n<p>Companion objects are just special cases of these <code>object</code> declarations nested inside classes, with their members accessible through the container class's identifier, similarly to static functions in Java. </p>\n\n<p>You can actually nest any object inside a class, the <code>companion</code> keyword just lets you create them without an explicit name.</p>\n\n<p>Example of named nested objects:</p>\n\n<pre><code>class A {\n    fun a() {}\n    object B {\n        fun b() {}\n    }\n    companion object {\n        fun o() {}\n    }\n}\n</code></pre>\n\n<p>These functions can then be called like this:</p>\n\n<pre><code>A().a()          // this call of course needs an instance of A\nA.B.b()\nA.Companion.o()\nA.o()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513079659, "post_id": 47771558, "comment_id": 82504735, "body": "What is the benefit of putting this object inside another class? Can&#39;t it work on its own?"}, {"owner": {"reputation": 175, "user_id": 442988, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b50044c9b0da04be0bdfb46c5ba93bd1?s=128&d=identicon&r=PG", "display_name": "Umair Khan", "link": "https://stackoverflow.com/users/442988/umair-khan"}, "edited": false, "score": 0, "creation_date": 1513085820, "post_id": 47771558, "comment_id": 82508854, "body": "As you have asked for Math.add() that&#39;s why it&#39;s is being placed inside Math class else it can work."}], "tags": [], "owner": {"reputation": 175, "user_id": 442988, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b50044c9b0da04be0bdfb46c5ba93bd1?s=128&d=identicon&r=PG", "display_name": "Umair Khan", "link": "https://stackoverflow.com/users/442988/umair-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513078167, "creation_date": 1513078167, "answer_id": 47771558, "question_id": 47771139, "link": "https://stackoverflow.com/questions/47771139/java-math-like-classes-in-kotlin/47771558#47771558", "title": "Java Math like classes in Kotlin", "body": "<p>You can do this like </p>\n\n<pre><code>    class Math {\n        companion object {\n            fun add(val x: Int, val y: Int): Int {\n                return x+y\n            }\n            fun subtract(val x: Int, val y: Int): Int {\n                return x-y\n            }\n            fun multiply(val x: Int, val y: Int): Int {\n                return x*y\n            }\n            ...\n        }\n     }\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 355534, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1a400a98758be3a0f09dfb9314a8d9f6?s=128&d=identicon&r=PG", "display_name": "Anil", "link": "https://stackoverflow.com/users/355534/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 47771319, "answer_count": 2, "score": 0, "last_activity_date": 1513085722, "creation_date": 1513076893, "last_edit_date": 1513077932, "question_id": 47771139, "link": "https://stackoverflow.com/questions/47771139/java-math-like-classes-in-kotlin", "title": "Java Math like classes in Kotlin", "body": "<p>How we can create <code>Java</code> Math like Util classes in <code>Kotlin</code>. So that I can call something like <code>Math.add()</code>.\nI try to do using companion object. Let me know if there is another way to do it.</p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 5, "creation_date": 1513075127, "post_id": 47770447, "comment_id": 82501992, "body": "Note that data classes can still have var members."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513075411, "post_id": 47770447, "comment_id": 82502161, "body": "Also, as an anecdote, I often find myself needing to create non-data-class subtypes of a sealed class simply because Kotlin doesn&#39;t support zero-member data classes :/"}, {"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513077536, "post_id": 47770447, "comment_id": 82503439, "body": "@OliverCharlesworth Thank you for pointing that out. I presume I would then have to check whether all members are defined as &#39;val&#39; as well."}, {"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513077725, "post_id": 47770447, "comment_id": 82503544, "body": "@OliverCharlesworth The second point you make (no zero-member data classes possible) is not a concern to me, as my abstract class includes an interface which needs to be implemented (not shown in the reduced code sample), thus every deriving member is guaranteed to have members."}, {"owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513078090, "post_id": 47770447, "comment_id": 82503767, "body": "Apparently my previously posted code was incorrect (exactly because of the zero-member issue), so I have now included the abstract member in the abstract class."}], "answers": [{"tags": [], "owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "is_accepted": false, "score": 0, "last_activity_date": 1513078980, "creation_date": 1513078980, "answer_id": 47771788, "question_id": 47770447, "link": "https://stackoverflow.com/questions/47770447/determine-whether-an-instance-is-an-instance-of-a-data-class/47771788#47771788", "title": "Determine whether an instance is an instance of a data class", "body": "<p>Using <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">reflection</a>, the Kotlin class description (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/\" rel=\"nofollow noreferrer\">KClass</a>) can be obtained using the <code>::class</code> syntax on the instance you want to investigate (in your case, <code>this::class</code> in the initializer block of the abstract class). This gives you access to <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/is-data.html\" rel=\"nofollow noreferrer\"><code>isData</code></a>:</p>\n\n<blockquote>\n  <p>true if this class is a data class.</p>\n</blockquote>\n\n<p>However, as <a href=\"https://stackoverflow.com/questions/47770447/determine-whether-an-instance-is-an-instance-of-a-data-class#comment82501992_47770447\">Oliver points out</a>, data classes can still contain <code>var</code> members, so you likely also want to check whether all member variables (and their member variables recursively) are defined as <code>val</code> to ensure immutability of all deriving classes.</p>\n"}], "owner": {"reputation": 15609, "user_id": 590790, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2648f806f3af808a2ed537c8e745558e?s=128&d=identicon&r=PG", "display_name": "Steven Jeuris", "link": "https://stackoverflow.com/users/590790/steven-jeuris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513078980, "creation_date": 1513074903, "last_edit_date": 1513078026, "question_id": 47770447, "link": "https://stackoverflow.com/questions/47770447/determine-whether-an-instance-is-an-instance-of-a-data-class", "title": "Determine whether an instance is an instance of a data class", "body": "<p>Given the following classes</p>\n\n<pre><code>abstract class SomeAbstractClass { abstract val name: String }\ndata class DataClass( override val name: String ) : SomeAbstractClass()\nclass NoDataClass( override val name: String ) : SomeAbstractClass()\n</code></pre>\n\n<p>For any instance of <code>SomeAbstractClass</code>, can I determine whether it is a <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">data class</a> without relying on type checking?</p>\n\n<p>Some background: this seemed the best way of combining inheritance and data classes to me, <a href=\"https://stackoverflow.com/a/45756617/590790\">as suggested in a different answer</a>. Now, within the initializer block of <code>SomeAbstractClass</code>, I want to throw an exception in case the derived type is not a data class to ensure 'correct' (immutable) implementations of derived types.</p>\n"}, {"tags": ["android", "data-binding", "kotlin", "rx-kotlin"], "comments": [{"owner": {"reputation": 3069, "user_id": 4613320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/STVAg.jpg?s=128&g=1", "display_name": "Malik Motani", "link": "https://stackoverflow.com/users/4613320/malik-motani"}, "edited": false, "score": 0, "creation_date": 1513078797, "post_id": 47770059, "comment_id": 82504238, "body": "try <a href=\"https://stackoverflow.com/questions/37268572/how-can-we-implement-data-binding-for-switch-button-for-oncheckedchagelistener-e/39840609#39840609\">this</a>"}, {"owner": {"reputation": 838, "user_id": 8618875, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b22b449bde41ff43cda11ecb7bf737b?s=128&d=identicon&r=PG&f=1", "display_name": "clauub", "link": "https://stackoverflow.com/users/8618875/clauub"}, "edited": false, "score": 0, "creation_date": 1555066420, "post_id": 47770059, "comment_id": 97988676, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37268572/how-to-use-data-binding-for-switch-oncheckedchagelistener-event\">How to use data binding for Switch onCheckedChageListener event?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1600714550, "post_id": 47805994, "comment_id": 113169106, "body": "While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/47805994/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 3278, "user_id": 3282461, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/v6pSx.png?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/3282461/ankit-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1600700611, "last_edit_date": 1600700611, "creation_date": 1513226093, "answer_id": 47805994, "question_id": 47770059, "link": "https://stackoverflow.com/questions/47770059/how-to-implement-switch-using-data-binding-in-android/47805994#47805994", "title": "how to implement Switch using Data binding in android", "body": "<pre><code>android:onCheckedChanged=&quot;@={notificationViewModel.executeOnChanged()}&quot;\nandroid:isChecked=&quot;@={notificationViewModel.isChecked}&quot;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13137642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213d0afa5ac707cc35d488c059e3d1a6?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza Maqsood", "link": "https://stackoverflow.com/users/13137642/hamza-maqsood"}, "is_accepted": false, "score": 0, "last_activity_date": 1614341907, "last_edit_date": 1614341907, "creation_date": 1614341582, "answer_id": 66385646, "question_id": 47770059, "link": "https://stackoverflow.com/questions/47770059/how-to-implement-switch-using-data-binding-in-android/66385646#66385646", "title": "how to implement Switch using Data binding in android", "body": "<p>You need to do it like this:</p>\n<p>Inside xml:</p>\n<pre><code>android:onCheckedChanged=&quot;@{viewModel::executeOnStatusChanged}&quot;\nandroid:checked=&quot;@={viewModel.isChecked()}&quot;\n</code></pre>\n<p>Inside Your view model:</p>\n<pre><code>@Bindable\nval isChecked: MutableLiveData&lt;Boolean&gt; = MutableLiveData()\n\nfun executeOnStatusChanged(switch: CompoundButton, isChecked: Boolean) {\n     Timber.d(&quot;Status changed&quot;)\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7108422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9516fd8368587b498f40d4dd49f35e1?s=128&d=identicon&r=PG&f=1", "display_name": "Deven Dcostra", "link": "https://stackoverflow.com/users/7108422/deven-dcostra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2804, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1614341907, "creation_date": 1513073672, "last_edit_date": 1513077622, "question_id": 47770059, "link": "https://stackoverflow.com/questions/47770059/how-to-implement-switch-using-data-binding-in-android", "title": "how to implement Switch using Data binding in android", "body": "<p>\nthis is my xml :</p>\n\n<pre><code>&lt;data&gt;\n\n    &lt;variable\n        name=\"notificationViewmodel\"\n        type=\"com.kdcos.contsync.viewmodel.notification.NotificationViewModel\"&gt;&lt;/variable&gt;\n\n&lt;/data&gt;\n\n\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/colorpalegrey\"&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/header\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentTop=\"true\"\n        android:layout_gravity=\"center\"\n        android:background=\"#689F38\"\n        android:gravity=\"center\"&gt;\n\n        &lt;include\n            android:id=\"@+id/layout_toolbar\"\n            layout=\"@layout/toolbar_white_bg\" /&gt;\n    &lt;/RelativeLayout&gt;\n\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_below=\"@+id/header\"\n        android:layout_marginTop=\"20dp\"\n        android:background=\"@drawable/topbottomborder\"\n        android:orientation=\"vertical\"&gt;\n\n\n        &lt;RelativeLayout\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"18dp\"\n            android:paddingBottom=\"20dp\"\n            android:paddingLeft=\"@dimen/margin_20dp\"&gt;\n\n\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:fontFamily=\"sans-serif-medium\"\n                android:lineSpacingExtra=\"30sp\"\n                android:text=\"@={notificationViewmodel.getText()}\"\n                android:textColor=\"@color/colorDusk\"\n                android:textSize=\"16sp\"\n                android:textStyle=\"normal\" /&gt;\n\n            &lt;Switch\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_alignParentRight=\"true\"\n                android:paddingRight=\"10dp\"\n                android:onCheckedChanged=\"@={notificationViewmodel.checked}\"\n                android:textColor=\"@android:color/black\" /&gt;\n\n        &lt;/RelativeLayout&gt;\n    &lt;/LinearLayout&gt;\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>this is my View Model</p>\n\n<pre><code>class NotificationViewModel(val context: Context, val bus: Bus, val manager: CNotificationManager) : BaseObservable() {\n    private var checked: Boolean = false\n    fun getToolbarTitle(): String? {\n        return manager.getToolbarTitle()\n    }\n\n    fun setToolbarTextColor(): Int {\n        return ContextCompat.getColor(context, R.color.colorDusk)\n    }\n\n    fun isChecked(): Boolean {\n        return checked\n    }\n\n    fun setChecked(checked: Boolean) {\n        this.checked = checked\n    }\n\n    fun getText(): String {\n        if (isChecked()) {\n            return \"Notfication On\"\n        } else {\n            return \"Notification Off\"\n        }\n        notifyChange()\n    }\n}\n</code></pre>\n\n<p>I want to apply data binding in <code>switch</code> so that when I on <code>switch</code> then  <code>textView</code> should display Notification off and checked value should set to true when I off then it <code>textview</code> should display  notification off and checked Boolean variable should set false. please suggest me how I will implement using Data-binding .</p>\n"}, {"tags": ["android", "android-gradle-plugin", "kotlin", "twilio"], "comments": [{"owner": {"reputation": 765, "user_id": 9019332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbcaN.jpg?s=128&g=1", "display_name": "global_warming", "link": "https://stackoverflow.com/users/9019332/global-warming"}, "edited": false, "score": 0, "creation_date": 1513073017, "post_id": 47769717, "comment_id": 82500689, "body": "do you have anything under libs folder?"}, {"owner": {"reputation": 681, "user_id": 7557205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84f3a9c7d5d14ef29e3394928a244e?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin P Ashok", "link": "https://stackoverflow.com/users/7557205/aswin-p-ashok"}, "edited": false, "score": 0, "creation_date": 1513073156, "post_id": 47769717, "comment_id": 82500774, "body": "Invalidate caches/restart?"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "reply_to_user": {"reputation": 765, "user_id": 9019332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbcaN.jpg?s=128&g=1", "display_name": "global_warming", "link": "https://stackoverflow.com/users/9019332/global-warming"}, "edited": false, "score": 0, "creation_date": 1513073299, "post_id": 47769717, "comment_id": 82500867, "body": "@global_warming, no, it seems I don&#39;t have the libs directory in the project structure"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "reply_to_user": {"reputation": 681, "user_id": 7557205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84f3a9c7d5d14ef29e3394928a244e?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin P Ashok", "link": "https://stackoverflow.com/users/7557205/aswin-p-ashok"}, "edited": false, "score": 0, "creation_date": 1513073328, "post_id": 47769717, "comment_id": 82500887, "body": "@AswinPAshok, tried restart, no result :("}, {"owner": {"reputation": 681, "user_id": 7557205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84f3a9c7d5d14ef29e3394928a244e?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin P Ashok", "link": "https://stackoverflow.com/users/7557205/aswin-p-ashok"}, "edited": false, "score": 0, "creation_date": 1513075116, "post_id": 47769717, "comment_id": 82501982, "body": "I think you have conflicting dependencies. You have included <code>com.android.support:appcompat-v7:27.0.2</code> in your Gradle, but turbolinks library is <a href=\"https://github.com/turbolinks/turbolinks-android/blob/master/turbolinks/build.gradle\" rel=\"nofollow noreferrer\">compiled with  support library <code>25.1.1</code></a>. So try compiling without turbolink library. Still not sure it is the reason for your problem. Read <a href=\"https://blog.mindorks.com/avoiding-conflicts-in-android-gradle-dependencies-28e4200ca235\" rel=\"nofollow noreferrer\">this</a> to avoid dependancy conflicts"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "reply_to_user": {"reputation": 681, "user_id": 7557205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e84f3a9c7d5d14ef29e3394928a244e?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin P Ashok", "link": "https://stackoverflow.com/users/7557205/aswin-p-ashok"}, "edited": false, "score": 0, "creation_date": 1513078136, "post_id": 47769717, "comment_id": 82503799, "body": "@AswinPAshok it seems I found the point when the problem has appeared, and it&#39;s not turbolinks configuring"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "edited": false, "score": 0, "creation_date": 1513076058, "post_id": 47770278, "comment_id": 82502560, "body": "Well, I have added <code>multiDexEnabled true</code> and <code>compile &#39;com.android.support:multidex:1.0.1&#39;</code>, but it doesn&#39;t help, I see the first error: <code>Execution failed for task &#39;:app:transformDexArchiveWithExternalLibsDexMergerForDebug&#39;. &gt; com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex</code>"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "edited": false, "score": 0, "creation_date": 1513076066, "post_id": 47770278, "comment_id": 82502565, "body": "But I&#39;m sorry, I didn&#39;t understand about .aar files, it seems I don&#39;t have any .aar files in the project structure"}, {"owner": {"reputation": 481, "user_id": 5364392, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/943a661de58571adca434a585c54c233?s=128&d=identicon&r=PG&f=1", "display_name": "matrix", "link": "https://stackoverflow.com/users/5364392/matrix"}, "reply_to_user": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "edited": false, "score": 0, "creation_date": 1513076358, "post_id": 47770278, "comment_id": 82502733, "body": "ok do this. Go to the home directory &quot;C:\\Users\\your user\\.gradle\\ and delete the entire cache folder. The go to the project folder and delete the .gradle folder. Then open Android Studio and try to sync"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "edited": false, "score": 0, "creation_date": 1513076963, "post_id": 47770278, "comment_id": 82503111, "body": "I did it all, Android Studio had successful sync, but when I run the project I see the same error"}, {"owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "edited": false, "score": 0, "creation_date": 1513078179, "post_id": 47770278, "comment_id": 82503836, "body": "It seems I found the point when this problem has appeared. I have edited the post"}], "tags": [], "owner": {"reputation": 481, "user_id": 5364392, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/943a661de58571adca434a585c54c233?s=128&d=identicon&r=PG&f=1", "display_name": "matrix", "link": "https://stackoverflow.com/users/5364392/matrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1513074412, "creation_date": 1513074412, "answer_id": 47770278, "question_id": 47769717, "link": "https://stackoverflow.com/questions/47769717/android-application-on-gradle-unable-to-merge-dex/47770278#47770278", "title": "Android application on Gradle: Unable to merge dex", "body": "<p>Use this in your <code>build.gradle</code> in app Module if you want to read an <code>.aar</code> file\nfor your libs dir:</p>\n\n<pre><code>repositories{\n      flatDir{\n              dirs 'libs'\n       }\n }\n\ndependencies {\n   compile(name:'nameOfYourAARFileWithoutExtension', ext:'aar')\n}\n</code></pre>\n\n<p>But it seems that your problem is multidex(means that you have more than 65K methods in your project so use this:</p>\n\n<pre><code>android {\n    defaultConfig {\n        multiDexEnabled true\n    }\n}\n</code></pre>\n\n<p>and if your minSdk &lt; 20 then use this as well:</p>\n\n<pre><code>compile 'com.android.support:multidex:1.0.1'\n</code></pre>\n\n<p>Hope it helps!!!</p>\n"}], "owner": {"reputation": 301, "user_id": 7866324, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/a40uV.jpg?s=128&g=1", "display_name": "NaSt", "link": "https://stackoverflow.com/users/7866324/nast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1513078005, "creation_date": 1513072634, "last_edit_date": 1513078005, "question_id": 47769717, "link": "https://stackoverflow.com/questions/47769717/android-application-on-gradle-unable-to-merge-dex", "title": "Android application on Gradle: Unable to merge dex", "body": "<p>I have an error with my app in Android studio:</p>\n\n<pre><code>Execution failed for task \n':app:transformDexArchiveWithExternalLibsDexMergerForDebug'.\n&gt; com.android.builder.dexing.DexArchiveMergerException: Unable to merge dex\n</code></pre>\n\n<p>I use Gradle and Kotlin.   </p>\n\n<pre><code>Android Studio 3.0.1.  \nWindows 10 Pro 64. \n</code></pre>\n\n<p>I have research this theme on SO and I have tried some solution from <a href=\"https://stackoverflow.com/questions/46267621/unable-to-merge-dex\">here</a>, like that:</p>\n\n<ol>\n<li>Clean and rebuild project. No changes.  </li>\n<li>Change 'compile' in gradle to 'implementation'. No changes. </li>\n<li>Delete <code>.gradle</code> and <code>build</code> directories. No changes.</li>\n<li><p>Add <code>multiDexEnabled true</code> in <code>defaultConfig</code> in gradle. In this case, I have another error:</p>\n\n<pre><code> Execution failed for task ':app:transformClassesWithMultidexlistForDebug'. \n &gt; java.io.IOException: Can't write [G:\\work\\myapp\\app\\build\\intermediates\\multi-dex\\debug\\componentClasses.jar] \n  (Can't read [C:\\Users\\Public\\.gradle\\caches\\transforms-1\\files-1.1\\support-core-utils-27.0.2.aar\\e1c9881d763269b67bf59dc03d19c305\\jars\\classes.jar(;;;;;;**.class)]\n  (Duplicate zip entry [classes.jar:android/support/v4/content/PermissionChecker$PermissionResult.class]))\n</code></pre></li>\n</ol>\n\n<p>My <strong>build.gradle</strong>:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n   compileSdkVersion 27\n    defaultConfig {\n       multiDexEnabled true\n       applicationId \"myapp\"\n       minSdkVersion 19\n       targetSdkVersion 27\n       versionCode 1\n       versionName \"1.0\"\n       testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n}\nbuildTypes {\n    debug {\n        applicationIdSuffix \".dev\"\n    }\n    staging {\n        debuggable true\n        applicationIdSuffix \".sta\"\n    }\n    preproduction {\n        applicationIdSuffix \".pre\"\n    }\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n}\n\nrepositories {\n    jcenter()\n    mavenCentral()\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:27.0.2'\n    implementation 'com.basecamp:turbolinks:1.0.7'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n    // The Client SDK resides on jCenter\n    implementation 'com.twilio:client-android:1.2.21'\n}\n</code></pre>\n\n<p>My <strong>AndroidManifest</strong>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\npackage=\"com.tunnll.passenger\"&gt;\n\n&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.READ_SMS\"/&gt;\n&lt;uses-permission android:name=\"android.permission.RECEIVE_SMS\"/&gt;\n\n&lt;application\n    android:allowBackup=\"true\"\n    android:icon=\"@mipmap/ic_launcher\"\n    android:label=\"@string/app_name\"\n    android:roundIcon=\"@mipmap/ic_launcher_round\"\n    android:supportsRtl=\"true\"\n    android:theme=\"@style/AppTheme\"&gt;\n    &lt;activity android:name=\".MainActivity\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n    &lt;service android:name=\"com.twilio.client.TwilioClientService\" \n                           android:exported=\"false\" android:stopWithTask=\"true\"/&gt;   \n&lt;/application&gt;\n</code></pre>\n\n<p></p>\n\n<p>What am I missing?</p>\n\n<p><strong>UPD</strong><br>\nIt seems I found out the point after that the problem has appeared. It was after adding Twilio configuration. I used this manual: <a href=\"https://www.twilio.com/docs/api/client/android\" rel=\"nofollow noreferrer\">Twilio and Android</a></p>\n\n<p>This is all changes that have been done:</p>\n\n<ol>\n<li><p>Add to <code>build.gradle</code>:</p>\n\n<pre><code>  implementation 'com.twilio:client-android:1.2.21'\n</code></pre></li>\n<li><p>Add to <code>AndroidManifest</code>:</p>\n\n<pre><code>  &lt;service android:name=\"com.twilio.client.TwilioClientService\" \n               android:exported=\"false\" android:stopWithTask=\"true\"/&gt;\n</code></pre></li>\n<li><p>Add to <code>proguard-rules.pro</code></p>\n\n<pre><code>  # Twilio Client\n  -keep class com.twilio.** { *; }\n\n  # Apache HttpClient\n  -dontwarn org.apache.http.**\n</code></pre></li>\n</ol>\n\n<p>That's all. Before this changes I didn't have this error</p>\n"}, {"tags": ["android", "memory-leaks", "kotlin"], "comments": [{"owner": {"reputation": 12808, "user_id": 1544790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ALkTz.jpg?s=128&g=1", "display_name": "chancyWu", "link": "https://stackoverflow.com/users/1544790/chancywu"}, "edited": false, "score": 2, "creation_date": 1513072935, "post_id": 47769639, "comment_id": 82500641, "body": "Can you post your <code>BaseActivity</code>?"}, {"owner": {"reputation": 43, "user_id": 7098482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772d1b43211c130593fd61583edcc4e?s=128&d=identicon&r=PG&f=1", "display_name": "\u53f6\u4e59\u4f5c", "link": "https://stackoverflow.com/users/7098482/%e5%8f%b6%e4%b9%99%e4%bd%9c"}, "reply_to_user": {"reputation": 12808, "user_id": 1544790, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ALkTz.jpg?s=128&g=1", "display_name": "chancyWu", "link": "https://stackoverflow.com/users/1544790/chancywu"}, "edited": false, "score": 0, "creation_date": 1513076574, "post_id": 47769639, "comment_id": 82502876, "body": "I  post my BaseActivity. Maybe it not be the reason."}, {"owner": {"reputation": 1142, "user_id": 3815805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a2e72915dd34c50aa9da97ab8a9f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Petr Kub&#225;\u010d", "link": "https://stackoverflow.com/users/3815805/petr-kub%c3%a1%c4%8d"}, "edited": false, "score": 2, "creation_date": 1513080366, "post_id": 47769639, "comment_id": 82505203, "body": "It is possible this might not be caused by your application, but it might be a platform leak refferenced here in this issue... <a href=\"https://github.com/square/leakcanary/issues/890\" rel=\"nofollow noreferrer\">github.com/square/leakcanary/issues/890</a>"}], "owner": {"reputation": 43, "user_id": 7098482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2772d1b43211c130593fd61583edcc4e?s=128&d=identicon&r=PG&f=1", "display_name": "\u53f6\u4e59\u4f5c", "link": "https://stackoverflow.com/users/7098482/%e5%8f%b6%e4%b9%99%e4%bd%9c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513077626, "creation_date": 1513072413, "last_edit_date": 1513077626, "question_id": 47769639, "link": "https://stackoverflow.com/questions/47769639/kotlin-activity-memory-leak", "title": "Kotlin Activity memory leak", "body": "<p>I just write a Activity use Kotlin,it's very sample,The code below:</p>\n\n<pre><code>package com.chiquedoll.chiquedoll.view.activity\nimport android.os.Bundle\nimport com.chiquedoll.chiquedoll.R\nimport kotlinx.android.synthetic.main.view_normal_toolbar.*\n\n/**\n * Created by super-zuo on 17-12-12.\n * Description:\n */\nclass TestActivity : BaseActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_edit_profile)\n        tv_title.text = getString(R.string.edit_profile)\n        tv_right.text = getString(R.string.save)\n    }\n}\n</code></pre>\n\n<p>Here is my BaseActivity code:</p>\n\n<pre><code>public class BaseActivity extends AppCompatActivity {\n    private ActivityModule activityModule;\n    private ViewDataBinding indicatorBinding;\n    private ProgressDialog dialog;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (savedInstanceState != null) {\n            BaseApplication.mSession = (MSession) savedInstanceState.getSerializable(\"mSession\");\n            if (BaseApplication.mSession != null &amp;&amp; BaseApplication.mSession.customer != null) {\n                HeadInterceptor.setUserId(BaseApplication.mSession.customer.id);\n                HeadInterceptor.setAccessToken(BaseApplication.mSession.getAccessToken());\n            }\n        }\n        getApplicationComponent().inject(this);\n    }\n\n    protected ApplicationComponent getApplicationComponent() {\n        return ((BaseApplication) getApplication()).getApplicationComponent();\n    }\n\n    protected ActivityModule getActivityModule() {\n        if (activityModule == null) {\n            return new ActivityModule(this);\n        }\n        return activityModule;\n    }\n\n    @Override\n    protected void onRestoreInstanceState(Bundle savedInstanceState) {\n        super.onRestoreInstanceState(savedInstanceState);\n        if (savedInstanceState != null) {\n            BaseApplication.mSession = (MSession) savedInstanceState.getSerializable(\"mSession\");\n            if (BaseApplication.mSession != null &amp;&amp; BaseApplication.mSession.customer != null) {\n                HeadInterceptor.setUserId(BaseApplication.mSession.customer.id);\n                HeadInterceptor.setAccessToken(BaseApplication.mSession.getAccessToken());\n            }\n        }\n    }\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        Log.e(\"SaveInstanceState\", \"yes\");\n        outState.putSerializable(\"mSession\", BaseApplication.mSession);\n        super.onSaveInstanceState(outState);\n    }\n\n}\n</code></pre>\n\n<p>When i close the activity,the LeakCanary tell me the activity has been leaked. some one can help me? When I use EditText, TextInputEditText will also leak Activity.\n<a href=\"https://i.stack.imgur.com/XHSE2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XHSE2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "rx-java2", "android-room"], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 5, "last_activity_date": 1513074614, "creation_date": 1513074614, "answer_id": 47770352, "question_id": 47769274, "link": "https://stackoverflow.com/questions/47769274/incorrect-behavior-of-maybelistt-in-room/47770352#47770352", "title": "Incorrect behavior of Maybe&lt;List&lt;T&gt;&gt; in Room?", "body": "<p>An empty list seems to be an appropriate result. Even if it might be better to have an empty <code>Maybe</code> instead, you can achieve this easily using <code>filter()</code>:</p>\n\n<pre><code>boxJobDao.getAll()\n         .filter { !it.isEmpty() }\n         .map { boxJobMapper.entityListToTaskList(it) }\n         .switchIfEmpty(syncTasks())\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 1120398, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fkXs3.jpg?s=128&g=1", "display_name": "Fyodor Sherstobitov", "link": "https://stackoverflow.com/users/1120398/fyodor-sherstobitov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 47770352, "answer_count": 1, "score": 3, "last_activity_date": 1513074823, "creation_date": 1513071209, "last_edit_date": 1513074823, "question_id": 47769274, "link": "https://stackoverflow.com/questions/47769274/incorrect-behavior-of-maybelistt-in-room", "title": "Incorrect behavior of Maybe&lt;List&lt;T&gt;&gt; in Room?", "body": "<p>I have the following query method definition:</p>\n\n<pre><code>@Query(\"SELECT * FROM box_jobs\")\nfun getAll(): Maybe&lt;List&lt;BoxJob&gt;&gt;\n</code></pre>\n\n<p>I want to return the result of this query if it's not empty or the result of the REST API call otherwise. This is my code for this logic:</p>\n\n<pre><code>override fun loadTasks(): Maybe&lt;List&lt;Task&gt;&gt; {\n    Log.d(TAG, \"Searching tasks in database\")\n    return boxJobDao.getAll()\n            .map { boxJobs -&gt; boxJobMapper.entityListToTaskList(boxJobs) }\n            .switchIfEmpty(syncTasks())\n}\n\nprivate fun syncTasks(): Maybe&lt;List&lt;Task&gt;&gt; {\n    Log.d(TAG, \"Loading tasks from server\")\n    return api.boxJobs(DEVICE_ID)\n            .doOnSuccess({ boxJobDtoList -&gt;\n                Log.d(TAG, \"${boxJobDtoList.size} box jobs loaded from server\")\n                saveToDb(boxJobDtoList)\n            })\n            .doOnError({ error -&gt; Log.d(TAG, \"Error during tasks loading\", error) })\n            .map { boxJobDtoList -&gt; boxJobMapper.dtoListToTaskList(boxJobDtoList) }\n            .toMaybe()\n}\n</code></pre>\n\n<p>The problem is that on empty database <code>Maybe</code> returned by <code>getAll()</code> always calls <code>onSuccess()</code> with empty <code>List&lt;BoxJob&gt;</code>, so <code>switchIfEmpty()</code> operator doesn't work.</p>\n\n<p>I think that this is incorrect behavior. Am I right or am I doing something wrong? Is there a workaround for this problem?</p>\n"}, {"tags": ["android", "kotlin", "moshi"], "comments": [{"owner": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1513070647, "post_id": 47767997, "comment_id": 82499212, "body": "There is similar issue on github <a href=\"https://github.com/square/moshi/issues/309\" rel=\"nofollow noreferrer\">github.com/square/moshi/issues/309</a> You can take a look at the PR"}, {"owner": {"reputation": 1091, "user_id": 4495634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-MBhozX9313Y/AAAAAAAAAAI/AAAAAAAAAPQ/s5bsosmke-I/photo.jpg?sz=128", "display_name": "ZaidRehman", "link": "https://stackoverflow.com/users/4495634/zaidrehman"}, "edited": false, "score": 0, "creation_date": 1513070818, "post_id": 47767997, "comment_id": 82499311, "body": "try with using <code>Any?</code> instead of <code>Any</code>"}, {"owner": {"reputation": 2516, "user_id": 8258130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b3104803b9c1f33541962147c6c660cb?s=128&d=identicon&r=PG&f=1", "display_name": "iori24", "link": "https://stackoverflow.com/users/8258130/iori24"}, "reply_to_user": {"reputation": 1091, "user_id": 4495634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-MBhozX9313Y/AAAAAAAAAAI/AAAAAAAAAPQ/s5bsosmke-I/photo.jpg?sz=128", "display_name": "ZaidRehman", "link": "https://stackoverflow.com/users/4495634/zaidrehman"}, "edited": false, "score": 0, "creation_date": 1513072793, "post_id": 47767997, "comment_id": 82500551, "body": "@zaid Yes tried already. same error"}], "answers": [{"tags": [], "owner": {"reputation": 7292, "user_id": 1696171, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/LRC6m.jpg?s=128&g=1", "display_name": "Eric Cochran", "link": "https://stackoverflow.com/users/1696171/eric-cochran"}, "is_accepted": false, "score": 6, "last_activity_date": 1513125542, "creation_date": 1513125542, "answer_id": 47783831, "question_id": 47767997, "link": "https://stackoverflow.com/questions/47767997/moshi-expected-a-class-parameterizedtype-or-genericarraytype-but-null-is-o/47783831#47783831", "title": "Moshi: Expected a Class, ParameterizedType, or GenericArrayType, but &lt;null&gt; is of type null", "body": "<p>You want <code>@JvmSuppressWildcards</code> on the Map parameters.\n<a href=\"https://github.com/square/moshi/issues/410#issuecomment-351131524\" rel=\"noreferrer\">https://github.com/square/moshi/issues/410#issuecomment-351131524</a></p>\n\n<p>Hopefully, a better error message will show up in the next version of Moshi.</p>\n"}, {"tags": [], "owner": {"reputation": 2516, "user_id": 8258130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b3104803b9c1f33541962147c6c660cb?s=128&d=identicon&r=PG&f=1", "display_name": "iori24", "link": "https://stackoverflow.com/users/8258130/iori24"}, "is_accepted": true, "score": 2, "last_activity_date": 1513136851, "creation_date": 1513136851, "answer_id": 47785186, "question_id": 47767997, "link": "https://stackoverflow.com/questions/47767997/moshi-expected-a-class-parameterizedtype-or-genericarraytype-but-null-is-o/47785186#47785186", "title": "Moshi: Expected a Class, ParameterizedType, or GenericArrayType, but &lt;null&gt; is of type null", "body": "<p>Just need to do this:</p>\n\n<pre><code>class Model1 {\n    &lt;... other fields here ...&gt;\n    @JvmSuppressWildcards var attributes: Map&lt;String, Any&gt;? = null\n    &lt;... other fields here ...&gt;\n}\n</code></pre>\n\n<p><a href=\"https://github.com/square/moshi/issues/410#issuecomment-351131524\" rel=\"nofollow noreferrer\">https://github.com/square/moshi/issues/410#issuecomment-351131524</a></p>\n"}], "owner": {"reputation": 2516, "user_id": 8258130, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b3104803b9c1f33541962147c6c660cb?s=128&d=identicon&r=PG&f=1", "display_name": "iori24", "link": "https://stackoverflow.com/users/8258130/iori24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 858, "favorite_count": 0, "accepted_answer_id": 47785186, "answer_count": 2, "score": 3, "last_activity_date": 1513136851, "creation_date": 1513066578, "question_id": 47767997, "link": "https://stackoverflow.com/questions/47767997/moshi-expected-a-class-parameterizedtype-or-genericarraytype-but-null-is-o", "title": "Moshi: Expected a Class, ParameterizedType, or GenericArrayType, but &lt;null&gt; is of type null", "body": "<p>I have this model:</p>\n\n<pre><code>class Model1 {\n    &lt;... other fields here ...&gt;\n    var attributes: Map&lt;String, Any&gt;? = null\n    &lt;... other fields here ...&gt;\n}\n</code></pre>\n\n<p>I expect a list of these models.</p>\n\n<p>Sample JSON:</p>\n\n<pre><code>[\n    {\n        \"attributes\": {\n            \"title\": \"New Year's Day\",\n            \"country\": \"SG\"\n        }\n    },\n    {\n        \"attributes\": {\n            \"staff_id\": 320011,\n            \"title\": \"Labor day\",\n            \"date_joined\": \"2017-01-10 00:00:00\",\n            \"years\": 1\n        }\n    }\n]\n</code></pre>\n\n<p>Then I get this error during deserialization:</p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Expected a Class, ParameterizedType, or GenericArrayType, but &lt;null&gt; is of type null\n    at com.squareup.moshi.Types.getRawType(Types.java:165)\n    at com.squareup.moshi.ClassJsonAdapter$1.createFieldBindings(ClassJsonAdapter.java:82)\n    at com.squareup.moshi.ClassJsonAdapter$1.create(ClassJsonAdapter.java:74)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:99)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:57)\n    at com.squareup.moshi.MapJsonAdapter.&lt;init&gt;(MapJsonAdapter.java:46)\n    at com.squareup.moshi.MapJsonAdapter$1.create(MapJsonAdapter.java:37)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:99)\n    at com.squareup.moshi.ClassJsonAdapter$1.createFieldBindings(ClassJsonAdapter.java:90)\n    at com.squareup.moshi.ClassJsonAdapter$1.create(ClassJsonAdapter.java:74)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:99)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:57)\n    at com.squareup.moshi.CollectionJsonAdapter.newArrayListAdapter(CollectionJsonAdapter.java:51)\n    at com.squareup.moshi.CollectionJsonAdapter$1.create(CollectionJsonAdapter.java:35)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:99)\n    at com.squareup.moshi.ClassJsonAdapter$1.createFieldBindings(ClassJsonAdapter.java:90)\n    at com.squareup.moshi.ClassJsonAdapter$1.create(ClassJsonAdapter.java:74)\n    at com.squareup.moshi.Moshi.adapter(Moshi.java:99)\n    at retrofit2.converter.moshi.MoshiConverterFactory.responseBodyConverter(MoshiConverterFactory.java:91)\n    at retrofit2.Retrofit.nextResponseBodyConverter(Retrofit.java:330)\n    at retrofit2.Retrofit.responseBodyConverter(Retrofit.java:313)\n    at retrofit2.ServiceMethod$Builder.createResponseConverter(ServiceMethod.java:736)\n        ... 65 more\n</code></pre>\n\n<p>I need the field attribute to be a map. The data inside could be any type and any value</p>\n"}, {"tags": ["gradle", "jvm", "kotlin", "build.gradle"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 8611987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cce8186bd3b39c03fe5028e9d6c2cc7?s=128&d=identicon&r=PG&f=1", "display_name": "petarkolaric", "link": "https://stackoverflow.com/users/8611987/petarkolaric"}, "edited": false, "score": 2, "creation_date": 1513060695, "post_id": 47766495, "comment_id": 82494388, "body": "Options 1 and 2 work, but I think option 3 is what I&#39;d prefer. When I try it, however, it appears that gradle can no longer find the main method:  <code>Error: Main method not found in class com.petarkolaric.helloworld.Main, please define the main method as: public static void main(String[] args)</code>  Do you have any idea why this is?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 10, "creation_date": 1513061697, "post_id": 47766495, "comment_id": 82494734, "body": "Because the class name changes: it will be <code>MainKt</code> if your file is called <code>Main.kt</code>."}, {"owner": {"reputation": 337, "user_id": 8611987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cce8186bd3b39c03fe5028e9d6c2cc7?s=128&d=identicon&r=PG&f=1", "display_name": "petarkolaric", "link": "https://stackoverflow.com/users/8611987/petarkolaric"}, "edited": false, "score": 0, "creation_date": 1513068286, "post_id": 47766495, "comment_id": 82497818, "body": "I see - top level functions are compiled into their own class which you need to reference from the build.gradle. Thanks!"}, {"owner": {"reputation": 1455, "user_id": 969478, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mLNKv.jpg?s=128&g=1", "display_name": "Giszmo", "link": "https://stackoverflow.com/users/969478/giszmo"}, "edited": false, "score": 2, "creation_date": 1548709874, "post_id": 47766495, "comment_id": 95631638, "body": "For your example 3) it is worth mentioning that you can omit the <code>class Main {}</code> part and what Alexey said of course."}], "tags": [], "owner": {"reputation": 8621, "user_id": 5247292, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/fQKn3.png?s=128&g=1", "display_name": "guenhter", "link": "https://stackoverflow.com/users/5247292/guenhter"}, "is_accepted": true, "score": 18, "last_activity_date": 1513059940, "creation_date": 1513059940, "answer_id": 47766495, "question_id": 47766179, "link": "https://stackoverflow.com/questions/47766179/kotlin-application-with-gradle-application-plugin/47766495#47766495", "title": "Kotlin Application with Gradle application plugin", "body": "<p>As the error says, your main method is not static. You have the following options:</p>\n\n<p>1) Put the main into the <code>companion object</code> and make it <code>JvmStatic</code></p>\n\n<pre><code>class Main {\n    companion object {\n        @JvmStatic\n        fun main(args : Array&lt;String&gt;) {\n            println(\"Hello, World!\")\n        }\n    }\n}\n</code></pre>\n\n<p>2) Change your <code>class</code> to <code>object</code> - than you more or less have a singleton <code>class</code> and make it <code>JvmStatic</code></p>\n\n<pre><code>object Main {\n    @JvmStatic\n    fun main(args : Array&lt;String&gt;) {\n        println(\"Hello, World!\")\n    }\n}\n</code></pre>\n\n<p>3) Place the main outside the class</p>\n\n<pre><code>fun main(args : Array&lt;String&gt;) {\n    println(\"Hello, World!\")\n}\nclass Main {\n}\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 8611987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cce8186bd3b39c03fe5028e9d6c2cc7?s=128&d=identicon&r=PG&f=1", "display_name": "petarkolaric", "link": "https://stackoverflow.com/users/8611987/petarkolaric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4414, "favorite_count": 1, "accepted_answer_id": 47766495, "answer_count": 1, "score": 8, "last_activity_date": 1513059940, "creation_date": 1513058307, "question_id": 47766179, "link": "https://stackoverflow.com/questions/47766179/kotlin-application-with-gradle-application-plugin", "title": "Kotlin Application with Gradle application plugin", "body": "<p>I am trying to create a simple HelloWorld application using <code>kotlin</code>, <code>gradle</code>, and the gradle <code>application</code> plugin. When I run it with the below setup I get the following error:</p>\n\n<pre><code>Error: Main method is not static in class com.petarkolaric.helloworld.Main, please define the main method as:\npublic static void main(String[] args)\n</code></pre>\n\n<p>My <code>build.gradle</code>:</p>\n\n<pre><code>group 'helloworld'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.2.0'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'application'\n\nmainClassName = \"com.petarkolaric.helloworld.Main\"\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>My <code>src/main/kotlin/com/petarkolaric/helloworld/Main.kt</code>:</p>\n\n<pre><code>package com.petarkolaric.helloworld\n\nclass Main {\n\n    fun main(args : Array&lt;String&gt;) {\n        println(\"Hello, World!\")\n    }\n}\n</code></pre>\n\n<p>According to <a href=\"http://zweifisch.github.io/kotlin-with-gradle.html#sec-3-2\" rel=\"noreferrer\">this blog post</a> I should be able to use the application plugin this way.</p>\n\n<p>What do I need to change to allow the <code>application</code> plugin to run my main function when I run <code>gradle run</code>?</p>\n"}, {"tags": ["android", "if-statement", "kotlin"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user180100"}, "edited": false, "score": 1, "creation_date": 1513027499, "post_id": 47761631, "comment_id": 82484702, "body": "use some &quot;list&quot;/&quot;set&quot; and contains?"}, {"owner": {"reputation": 81, "user_id": 9077951, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1PC3SeEOANE/AAAAAAAAAAI/AAAAAAAAAIo/FGxUcxusdHE/photo.jpg?sz=128", "display_name": "maurice bruijn", "link": "https://stackoverflow.com/users/9077951/maurice-bruijn"}, "edited": false, "score": 0, "creation_date": 1513027600, "post_id": 47761631, "comment_id": 82484747, "body": "Store everything in an array and check the array"}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 2, "creation_date": 1513028092, "post_id": 47761631, "comment_id": 82484990, "body": "FWIW: Just because it &quot;can&quot; be done in a &quot;slightly shorter one-line&quot; doesn&#39;t mean it ought to be.. clean code in many case is actually the result of breaking up such &quot;one lines&quot;, especially when such increases self-documentation clarity and overall maintainability."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1513028148, "post_id": 47761631, "comment_id": 82485021, "body": "As written in comments to answers, I&#39;d recommend considering <code>if (knownCategory(categoryName)) ..</code>. Then there can be an if/switch/list-contains etc inside the method and not have to &quot;worry&quot;. This makes the original line shorter and arguably increases the clarity/self-documentation and maintainability (eg. adding a new category or changing how the category is classified)."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1513028201, "post_id": 47761631, "comment_id": 82485049, "body": "I&#39;d argue <code>categoryName in listOf(&quot;SomeName1&quot;, &quot;SomeName2&quot;, ...)</code> is short and clear. It works for Python at least. Too long a list can still make that suitable for a separate list variable, though."}], "answers": [{"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1513027847, "post_id": 47761707, "comment_id": 82484865, "body": "I would pull the asList to a variable/field: <code>if (knownCategories.contains(categoryName)) ..</code> it really does not add much benefit if left inline. Could get about the same effect with a shorter variable name. And in both cases could just pull the condition into a method: <code>if (knownCategory(categoryName)) ..</code>"}, {"owner": {"reputation": 8242, "user_id": 3982755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/05Rrh.jpg?s=128&g=1", "display_name": "Bentaye", "link": "https://stackoverflow.com/users/3982755/bentaye"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1513027937, "post_id": 47761707, "comment_id": 82484908, "body": "He wants short so I give a one-liner :) Could even use IntStream and anyMatch if there are more than 6 elements with all the same pattern."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1513071042, "post_id": 47761707, "comment_id": 82499458, "body": "Not very Kotlin-specific, is it?"}, {"owner": {"reputation": 8242, "user_id": 3982755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/05Rrh.jpg?s=128&g=1", "display_name": "Bentaye", "link": "https://stackoverflow.com/users/3982755/bentaye"}, "edited": false, "score": 1, "creation_date": 1513076142, "post_id": 47761707, "comment_id": 82502610, "body": "Ho I did not see the Kotlin tag, assumed it was java as the syntax is the same. I guess I will remove the java8 example then."}, {"owner": {"reputation": 15891, "user_id": 5382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3eFh.jpg?s=128&g=1", "display_name": "Mikezx6r", "link": "https://stackoverflow.com/users/5382/mikezx6r"}, "edited": false, "score": 1, "creation_date": 1513088826, "post_id": 47761707, "comment_id": 82510840, "body": "Downvoted because this is Java code, and not Kotlin code. I know they interop, but I do not think this is the best answer. See voddan&#39;s answer, using <code>setOf</code> and <code>in</code> operator. That is Kotlin."}, {"owner": {"reputation": 8242, "user_id": 3982755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/05Rrh.jpg?s=128&g=1", "display_name": "Bentaye", "link": "https://stackoverflow.com/users/3982755/bentaye"}, "edited": false, "score": 0, "creation_date": 1513088871, "post_id": 47761707, "comment_id": 82510869, "body": "I commented already on his answer and said it was probably better."}], "tags": [], "owner": {"reputation": 8242, "user_id": 3982755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/05Rrh.jpg?s=128&g=1", "display_name": "Bentaye", "link": "https://stackoverflow.com/users/3982755/bentaye"}, "is_accepted": true, "score": 4, "last_activity_date": 1561042634, "last_edit_date": 1561042634, "creation_date": 1513027678, "answer_id": 47761707, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement/47761707#47761707", "title": "Make a short if statement", "body": "<p><strong>Quick and dirty</strong></p>\n\n<pre><code>if (Arrays.asList(\"SomeName1\", \"SomeName2\", \"SomeName3\", \n                  \"SomeName4\", \"SomeName5\", \"SomeName6\")\n          .contains(categoryName)) {\n    // Do something\n}\n</code></pre>\n\n<p><strong>Better</strong></p>\n\n<pre><code>val myList = Arrays.asList(\"SomeName1\", \"SomeName2\", \"SomeName3\", \n                           \"SomeName4\", \"SomeName5\", \"SomeName6\");\nif (myList.contains(categoryName)) {\n    // Do something\n}\n</code></pre>\n\n<p><strong>EDIT</strong>\nVoddan's answer using <code>setOf</code> is better.</p>\n"}, {"comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1513028281, "post_id": 47761714, "comment_id": 82485092, "body": "I would consider using a <code>switch</code> <i>inside</i> a method. Then it&#39;s easy to abstract: <code>if (knownCategory(categoryName)) ..</code> where the switch/return sequence is entirely in knownCategory method."}, {"owner": {"reputation": 1091, "user_id": 4495634, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-MBhozX9313Y/AAAAAAAAAAI/AAAAAAAAAPQ/s5bsosmke-I/photo.jpg?sz=128", "display_name": "ZaidRehman", "link": "https://stackoverflow.com/users/4495634/zaidrehman"}, "edited": false, "score": 0, "creation_date": 1513053708, "post_id": 47761714, "comment_id": 82492172, "body": "Question is for Kotlin , so it should be <code>when</code> expression not <code>switch</code> statement."}], "tags": [], "owner": {"reputation": 3655, "user_id": 1364723, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3b65bceb58c0ce4c769debaac0d33185?s=128&d=identicon&r=PG", "display_name": "Jim B.", "link": "https://stackoverflow.com/users/1364723/jim-b"}, "is_accepted": false, "score": 3, "last_activity_date": 1513027720, "creation_date": 1513027720, "answer_id": 47761714, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement/47761714#47761714", "title": "Make a short if statement", "body": "<p>How about a switch statement?</p>\n\n<pre><code>switch(categoryName) {\n    case \"SomeName1\":\n    case \"SomeName2\":\n    case \"SomeName3\":\n    case \"SomeName4\":\n    case \"SomeName5\":\n    case \"SomeName6\":\n        // Do something\n        break;\n    default: \n        // Do something else\n        break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 188291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2e74cfcc8ac58504f8e47fad5251690?s=128&d=identicon&r=PG", "display_name": "tweitzel", "link": "https://stackoverflow.com/users/188291/tweitzel"}, "is_accepted": false, "score": 3, "last_activity_date": 1513028823, "creation_date": 1513028823, "answer_id": 47761984, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement/47761984#47761984", "title": "Make a short if statement", "body": "<p>You might consider using a regular expression:</p>\n\n<pre><code>if (categoryName.matches(Regex(\"SomeName[1-6]\"))) {\n    // Do something\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": false, "score": 5, "last_activity_date": 1513037861, "creation_date": 1513037861, "answer_id": 47763525, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement/47763525#47763525", "title": "Make a short if statement", "body": "<p>You can use a <code>when</code> statement. The syntax kind of looks like what you were asking for:</p>\n\n<pre><code>when (categoryName) {\n    \"SomeName1\", \"SomeName2\",  \"SomeName3\", \"SomeName4\", \"SomeName5\", \"SomeName6\" -&gt; // Do something\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8242, "user_id": 3982755, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/05Rrh.jpg?s=128&g=1", "display_name": "Bentaye", "link": "https://stackoverflow.com/users/3982755/bentaye"}, "edited": false, "score": 0, "creation_date": 1513076944, "post_id": 47769196, "comment_id": 82503096, "body": "I think this is better than my solution."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1513077391, "last_edit_date": 1513077391, "creation_date": 1513070972, "answer_id": 47769196, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement/47769196#47769196", "title": "Make a short if statement", "body": "<p>The most Kotlin-ish solution IMO:</p>\n\n<pre><code>val names = setOf(\"SomeName1\", \"SomeName2\", \"SomeName3\", \"SomeName4\", \"SomeName5\", \"SomeName6\")\n\nif (categoryName in names) {\n    // Do something\n}\n</code></pre>\n\n<p>It utilizes searching in a hash set, so it may also be the fastest solution under certain conditions.</p>\n"}], "owner": {"reputation": 738, "user_id": 5503898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/95c4825378d97ab1d08f897764190365?s=128&d=identicon&r=PG&f=1", "display_name": "Ravers", "link": "https://stackoverflow.com/users/5503898/ravers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 47761707, "answer_count": 5, "score": 2, "last_activity_date": 1561042634, "creation_date": 1513027352, "question_id": 47761631, "link": "https://stackoverflow.com/questions/47761631/make-a-short-if-statement", "title": "Make a short if statement", "body": "<p>In my code I have this if statement:</p>\n\n<pre><code>if (categoryName == \"SomeName1\" || categoryName == \"SomeName2\" || \n    categoryName == \"SomeName3\" || categoryName == \"SomeName4\" || \n    categoryName == \"SomeName5\" || categoryName == \"SomeName6\") {\n    // Do something\n}\n</code></pre>\n\n<p>I was wondering if I could shorten this if. Something like:</p>\n\n<pre><code>if (categoryName == \"SomeName1\" and \"SomeName2\" and \"SomeName3\" ...) {\n    // Do something\n}\n</code></pre>\n\n<p>Is there any aproach to do something like this in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "rx-java2"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1513025891, "post_id": 47761113, "comment_id": 82483900, "body": "<a href=\"https://stackoverflow.com/questions/26543131/how-to-implement-endless-list-with-recyclerview\" title=\"how to implement endless list with recyclerview\">stackoverflow.com/questions/26543131/&hellip;</a> this is the main idea, simply add your logic to the <code>onScrolled</code> event"}, {"owner": {"reputation": 2570, "user_id": 4142266, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rMCN5.png?s=128&g=1", "display_name": "mschmidt", "link": "https://stackoverflow.com/users/4142266/mschmidt"}, "edited": false, "score": 0, "creation_date": 1513028468, "post_id": 47761113, "comment_id": 82485196, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26543131/how-to-implement-endless-list-with-recyclerview\">How to implement endless list with RecyclerView?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3123, "user_id": 2424415, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/573bc7d4a25d71a48f0e0aa9e5667ce7?s=128&d=identicon&r=PG", "display_name": "elmorabea", "link": "https://stackoverflow.com/users/2424415/elmorabea"}, "is_accepted": false, "score": 0, "last_activity_date": 1513026241, "creation_date": 1513026241, "answer_id": 47761373, "question_id": 47761113, "link": "https://stackoverflow.com/questions/47761113/how-to-signal-an-observable-to-produce-more-data/47761373#47761373", "title": "How to signal an Observable to produce more data", "body": "<p>Assuming you have already some sort of a back-pressured data source.</p>\n\n<p>You can use <a href=\"http://reactivex.io/RxJava/javadoc/rx/Subscriber.html#request-long-\" rel=\"nofollow noreferrer\">request(n)</a> to let your data source know that you are ready for more items.</p>\n"}, {"tags": [], "owner": {"reputation": 5972, "user_id": 261363, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9965204e5fcfc7437ad7c7a1039df909?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/261363/calin"}, "is_accepted": false, "score": 0, "last_activity_date": 1513064740, "creation_date": 1513064740, "answer_id": 47767529, "question_id": 47761113, "link": "https://stackoverflow.com/questions/47761113/how-to-signal-an-observable-to-produce-more-data/47767529#47767529", "title": "How to signal an Observable to produce more data", "body": "<p>What you can do is have an Observer that emits page scrool events, let's call it paginator.</p>\n\n<p>On each emission you can switch to another observer that brings more data, </p>\n\n<pre><code>            paginator\n                    .onBackpressureDrop()\n                    .map { lastVisibleIndex -&gt; (lastVisibleIndex + 2) / PAGE_SIZE + 1 }\n                    .distinct()\n                    .concatMap { page -&gt; getCollectionsObservable(page, pageSize)\n                    }\n                    .subscribeWith(GetCollectionObserver())\n    )\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7949086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1441997939196508/picture?type=large", "display_name": "Victor Oliveira", "link": "https://stackoverflow.com/users/7949086/victor-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513064740, "creation_date": 1513025074, "question_id": 47761113, "link": "https://stackoverflow.com/questions/47761113/how-to-signal-an-observable-to-produce-more-data", "title": "How to signal an Observable to produce more data", "body": "<p>Is there any way to signal an Observable to produce more data?</p>\n\n<p>I have a buffered Observable that produces 10 items and i want it to continue producing more items only when i want to.</p>\n\n<p>To be more specific, i have an infinite scrolling Recycler View, i want to produce more items only when i continue scrolling to the end.</p>\n"}, {"tags": ["kotlin", "byte", "assign"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 3, "creation_date": 1513022830, "post_id": 47760571, "comment_id": 82482416, "body": "<code>array[i] = 0xE0.toByte()</code>?"}, {"owner": {"reputation": 14221, "user_id": 1212960, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3f39c683b5fbe30dfed80b8782d0195?s=128&d=identicon&r=PG", "display_name": "Greg Kopff", "link": "https://stackoverflow.com/users/1212960/greg-kopff"}, "edited": false, "score": 0, "creation_date": 1513022912, "post_id": 47760571, "comment_id": 82482448, "body": "<a href=\"https://kotlinlang.org/docs/reference/basic-types.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/basic-types.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": false, "score": 7, "last_activity_date": 1513038791, "creation_date": 1513038791, "answer_id": 47763644, "question_id": 47760571, "link": "https://stackoverflow.com/questions/47760571/how-do-i-assign-byte-in-kotlin/47763644#47763644", "title": "How do I assign byte in kotlin?", "body": "<p>It's a simple assignment. You just need to be sure the value you want to assign is in the byte range:</p>\n\n<pre><code>array[i] = -32\n</code></pre>\n\n<p>or</p>\n\n<pre><code>array[i] = 0xE0.toByte()\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>array[i] = 224.toByte()\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7555077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjkZY.jpg?s=128&g=1", "display_name": "conan tannous", "link": "https://stackoverflow.com/users/7555077/conan-tannous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3984, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544732744, "creation_date": 1513022745, "last_edit_date": 1544732744, "question_id": 47760571, "link": "https://stackoverflow.com/questions/47760571/how-do-i-assign-byte-in-kotlin", "title": "How do I assign byte in kotlin?", "body": "<p>I am trying to assign byes in a ByteArray in Kotlin, I just don't know the syntax of assigning a byte.</p>\n\n<p>for example in c if I want to assign a char I would do:\n<code>char c = 'a';</code></p>\n\n<p>But what is the syntax for assigning a byte in a byte type variable in Kotlin language ? I just can't find an example, let's say I want to assign the byte E0 in array[i], how do I do it?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1513022791, "post_id": 47760507, "comment_id": 82482400, "body": "The object <code>does not implement abstract   base class member public abstract fun onTick(p0: Long): Unit defined in  android.os.CountDownTimer</code>. CountDownTimer needs both methods, onFinish and onTick."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1513023170, "post_id": 47760507, "comment_id": 82482567, "body": "Are you sure CountDownTimer is the right tool? You need to stop the recording <i>once after 60 seconds passed</i>. You don&#39;t need to execute something <i>once every second for one minute</i>."}, {"owner": {"reputation": 65, "user_id": 5648104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3720c8f2692df3292262456df1e056f?s=128&d=identicon&r=PG&f=1", "display_name": "Ceridoglu", "link": "https://stackoverflow.com/users/5648104/ceridoglu"}, "reply_to_user": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 0, "creation_date": 1513024030, "post_id": 47760507, "comment_id": 82482933, "body": "@EugenPechanec thank you bro i solved the error on object. But i&#39;m not sure the CountdownTimer is the right tool or not.. Actually CountDownTimer is just showing the users how many times they have but how can i stopped the taking record automatically after 60 sec."}], "owner": {"reputation": 65, "user_id": 5648104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3720c8f2692df3292262456df1e056f?s=128&d=identicon&r=PG&f=1", "display_name": "Ceridoglu", "link": "https://stackoverflow.com/users/5648104/ceridoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513023016, "creation_date": 1513022436, "last_edit_date": 1513023016, "question_id": 47760507, "link": "https://stackoverflow.com/questions/47760507/kotlin-after-60-second-stopping-the-taking-voice-record", "title": "Kotlin After 60 Second stopping the taking voice record", "body": "<p>I'm trying a take record in maximum 60 second in kotlin</p>\n\n<pre><code>object :  CountDownTimer(60000,1000) {\n    override fun onFinish(){\n        timeText.text = \"Time's F\u0130nish!\"\n\n        handler.removeCallbacks(runnbale)\n        for (button2 in runnable ){\n            button2.stop()\n        }\n    }\n}\n</code></pre>\n\n<p>I'm getting the error on object and runnable</p>\n\n<pre><code>Error:(70, 13) Object is not abstract and does not implement abstract \n    base class member public abstract fun onTick(p0: Long): Unit defined in \n    android.os.CountDownTimer\nError:(75, 37) Unresolved reference: runnable\n</code></pre>\n"}, {"tags": ["kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1513016393, "post_id": 47758949, "comment_id": 82479146, "body": "There is a link to an explanation of <code>componentN</code> literally in the first mention of <code>componentN</code> in the docs you linked to :/"}, {"owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1513016569, "post_id": 47758949, "comment_id": 82479234, "body": "Banging my head. Yes i just saw the link."}], "answers": [{"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513019368, "post_id": 47759571, "comment_id": 82480659, "body": "About <code>componentN</code> functions, this explanation is not generally correct, (in this case yes) but they are really just used for destructuring of any type. Also, you might want to note that <code>component1</code> should be an <code>operator fun</code>."}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513024711, "post_id": 47759571, "comment_id": 82483276, "body": "Thanks for pointing to that, I wasn&#39;t too clear about it. but, in other hand, an <code>operator fun</code> must have a single parameter, <code>componentN</code> are just normal functions. These helps to generate the code for the destructuring declaration (<a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html#destructuring-declarations\" rel=\"nofollow noreferrer\">doc</a>)."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513025795, "post_id": 47759571, "comment_id": 82483858, "body": "That is not true, it is even in the documentation link you sent: &quot;Note that the <code>componentN()</code> functions need to be marked with the <code>operator</code> keyword to allow using them in a destructuring declaration.&quot;"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1513026983, "post_id": 47759571, "comment_id": 82484437, "body": "You are right, I&#39;m mixing concepts, the data class auto-generates these operators. I don&#39;t know how to clarify this in order to the OP question. Feel free to add another answer pointing to that."}], "tags": [], "owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "is_accepted": false, "score": 0, "last_activity_date": 1513027067, "last_edit_date": 1513027067, "creation_date": 1513018628, "answer_id": 47759571, "question_id": 47758949, "link": "https://stackoverflow.com/questions/47758949/kotlin-data-classes-contains-open-functions/47759571#47759571", "title": "Kotlin data classes contains open functions", "body": "<blockquote>\n  <p>1) What is componentN() functions ?</p>\n</blockquote>\n\n<p>They are operator functions corresponding to the properties in their order of declaration.</p>\n\n<p>Example: </p>\n\n<pre><code> data class Person(name: String, age: Int)\n</code></pre>\n\n<p>the class above will have a <code>component1</code> and a <code>component2</code> function, allowing the <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">access through destructuring declaration</a> to name and age, in that order.<br>\nTake in consideration that <code>componentN</code> function is just to reference 1st, 2nd, 3rd, ..., Nth component. The <code>componentN</code> function itself is never generated.</p>\n\n<blockquote>\n  <p>2) Does the data class override the open function automatically ?</p>\n</blockquote>\n\n<p>In data class, you are extending from <code>Any</code> class, you aren't overriding automatically any function. <code>componentN</code> functions are generated at compile time.</p>\n\n<blockquote>\n  <p>3) Is following code correct ?</p>\n</blockquote>\n\n<pre><code>open class SuperDataClass {\n    open fun componentN() {\n        println(\"from super class\")\n    }\n}\n\ndata class DataClassExample (var name: String): SuperDataClass() {\n    //\n}\n</code></pre>\n\n<p>Yes, it will compile and will run correctly. But this is only because, as I said before, <code>componentN</code> isn't generated for data classes.<br>\n However, in this case a <code>component1</code> is generated for the property <code>name</code> of <code>DataClassExample</code>. As the quote of the documentation you posted says: if you try this code, you will have an error.</p>\n\n<pre><code>open class SuperDataClass {\n    open fun component1() {//&lt;-- note this\n        println(\"from super class\")\n    }\n}\n\ndata class DataClassExample (var name: String): SuperDataClass() {\n    //\n}\n</code></pre>\n\n<p>The specific error is:</p>\n\n<pre><code>[DATA_CLASS_OVERRIDE_CONFLICT] Function 'component1' generated for the data class conflicts with member of supertype 'SuperDataClass'\n</code></pre>\n"}], "owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1389, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513027067, "creation_date": 1513016287, "question_id": 47758949, "link": "https://stackoverflow.com/questions/47758949/kotlin-data-classes-contains-open-functions", "title": "Kotlin data classes contains open functions", "body": "<p>I was reading kotlin official tutorial, Under the <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">data class topic</a>, I came up with a following point.</p>\n\n<blockquote>\n  <p>If a supertype has the componentN() functions that are open and return compatible types, the corresponding functions are generated for the data class and override those of the supertype. If the functions of the supertype cannot be overridden due to incompatible signatures or being final, an error is reported;</p>\n</blockquote>\n\n<p>My Questions are,</p>\n\n<p>1) What is <code>componentN()</code> functions ?</p>\n\n<p>2) Does the data class override the open function automatically ?</p>\n\n<p>3) Is following code correct ?</p>\n\n<pre><code>open class SuperDataClass {\n\n  open fun componentN() {\n     println(\"from super class\")\n  }\n}\n\ndata class DataClassExample (var name: String): SuperDataClass() {\n  //\n}\n</code></pre>\n"}, {"tags": ["java", "kotlin", "junit5"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1513015910, "post_id": 47758766, "comment_id": 82478896, "body": "Well, the <a href=\"http://junit.org/junit5/docs/current/user-guide/\" rel=\"nofollow noreferrer\">docs</a> certainly don&#39;t make this clear :/"}], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 1431016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GU1Dw.png?s=128&g=1", "display_name": "Sormuras", "link": "https://stackoverflow.com/users/1431016/sormuras"}, "is_accepted": true, "score": 6, "last_activity_date": 1513022984, "last_edit_date": 1513022984, "creation_date": 1513022652, "answer_id": 47760557, "question_id": 47758766, "link": "https://stackoverflow.com/questions/47758766/where-are-the-three-test-containers-coming-from/47760557#47760557", "title": "Where are the three test containers coming from?", "body": "<p>3 containers = <em>JUnit Jupiter Engine</em> + <code>KotlinTest.class</code> + <code>JavaTest.class</code></p>\n\n<p>An engine, an implementation of <code>TestEngine</code>, is also considered being a container. Next level is the class containing <code>@Test</code>-annotated methods. Look at the example copied from the <a href=\"http://junit.org/junit5/docs/current/user-guide/#running-tests-console-launcher\" rel=\"noreferrer\">user-guide</a>:</p>\n\n<pre><code>\u251c\u2500 JUnit Vintage\n\u2502  \u2514\u2500 example.JUnit4Tests\n\u2502     \u2514\u2500 standardJUnit4Test \u2714\n\u2514\u2500 JUnit Jupiter\n   \u251c\u2500 StandardTests\n   \u2502  \u251c\u2500 succeedingTest() \u2714\n   \u2502  \u2514\u2500 skippedTest() \u21b7 for demonstration purposes\n   \u2514\u2500 A special test case\n      \u251c\u2500 Custom test name containing spaces \u2714\n      \u251c\u2500 \u256f\u00b0\u25a1\u00b0\uff09\u256f \u2714\n      \u2514\u2500 \ud83d\ude31 \u2714\n\nTest run finished after 64 ms\n[         5 containers found      ]\n[         0 containers skipped    ]\n[         5 containers started    ]\n[         0 containers aborted    ]\n[         5 containers successful ]\n[         0 containers failed     ]\n[         6 tests found           ]\n[         1 tests skipped         ]\n[         5 tests started         ]\n[         0 tests aborted         ]\n[         5 tests successful      ]\n[         0 tests failed          ]\n</code></pre>\n\n<p>Here you see five containers, namely:</p>\n\n<ol>\n<li><strong>JUnit Vintage</strong> engine</li>\n<li><strong>example.JUnit4Tests</strong> class</li>\n<li><strong>JUnit Jupiter</strong> engine</li>\n<li><strong>StandardTests</strong> class</li>\n<li><strong>A special test case</strong> class</li>\n</ol>\n\n<p>All six leaves are tests.</p>\n\n<p>To see a similar <a href=\"https://github.com/junit-team/junit5/blob/master/documentation/documentation.gradle#L20\" rel=\"noreferrer\">tree</a> rendered for your test plan run, add <code>details 'tree'</code> to the Gradle <code>junitPlatform</code> task.</p>\n"}], "owner": {"reputation": 238, "user_id": 2491459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4yEW.jpg?s=128&g=1", "display_name": "varcharmander", "link": "https://stackoverflow.com/users/2491459/varcharmander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 1, "accepted_answer_id": 47760557, "answer_count": 1, "score": 5, "last_activity_date": 1513022984, "creation_date": 1513015531, "question_id": 47758766, "link": "https://stackoverflow.com/questions/47758766/where-are-the-three-test-containers-coming-from", "title": "Where are the three test containers coming from?", "body": "<p>I put together a demo JUnit5 project to try out the framework. The project consists of Gradle (4.4), Java (8) and Kotlin (1.2.0) with 4 test cases. I have the following Gradle build script (I've removed most of the boilerplate to keep only the important stuff):</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'kotlin'\napply plugin: 'org.junit.platform.gradle.plugin'\n\nrepositories {\n    mavenCentral()\n}\n\nbuildscript {\n    ext.kotlin_version = '1.2.0'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\nconfigurations {\n    all {\n        exclude group: 'junit', module: 'junit'\n    }\n}\n\nproject.ext {\n    junitPlatformVersion = '1.0.2'\n    junitJupiterVersion = '5.0.2'\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n    testCompile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n    testCompile \"org.junit.jupiter:junit-jupiter-api:${junitJupiterVersion}\"\n    testRuntime \"org.junit.jupiter:junit-jupiter-engine:${junitJupiterVersion}\"\n}\n\njunitPlatform {\n    platformVersion '1.0.2'\n    filters {\n        engines {\n            include 'junit-jupiter'\n        }\n    }\n}\n</code></pre>\n\n<p>I also have a KotlinTest.kt and a JavaTest.java that have the equivalent test cases:</p>\n\n<pre><code>@Test\nfun junit5TestPasses() {\n    assertTrue(true)\n}\n\n@Test\nfun junit5TestFails() {\n    assertTrue(false)\n}\n</code></pre>\n\n<p>When I run my tests with <code>gradlew junitPlatformTest</code>, I correctly see 2 tests passing and 2 tests failing. However, I also see \"3 containers found\". My question is why are there 3 containers found? What are they? I can't seem to find a direct answer about test containers in the JUnit5 user guide that pertains to this scenario.</p>\n"}, {"tags": ["android", "object", "kotlin", "singleton", "abstract"], "answers": [{"comments": [{"owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "edited": false, "score": 0, "creation_date": 1513030620, "post_id": 47759671, "comment_id": 82486134, "body": "Thank you very much for the detailed answer, I&#39;m gonna keep myself updated on the issue to see how it is resolved."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1513030704, "last_edit_date": 1513030704, "creation_date": 1513019119, "answer_id": 47759671, "question_id": 47757454, "link": "https://stackoverflow.com/questions/47757454/kotlin-override-abstract-val-behavior-object-vs-class/47759671#47759671", "title": "Kotlin override abstract val behavior, object vs class", "body": "<p>The difference in the behavior that you observe is caused by how backing fields are generated for properties in classes and objects, and also by how those are initialized.</p>\n\n<ul>\n<li><p>When a class overrides a property using a backing field, under the hood, there is a separate instance field in the derived class, and the overridden getter returns the value of that field. </p>\n\n<p>So, when you access the property from inside the super class constructor, it's the overridden getter that is called, which returns the <code>null</code> value of the field (it is uninitialized at that moment, since the super constructor is called before the class' own initialization logic).</p></li>\n<li><p>On contrary, when you define an <code>object</code> overriding a class, then the underlying class <code>Object</code> has its backing fields defined as JVM <code>static</code> fields.</p>\n\n<p>The <code>Object</code> class has an instance as well (it can even be accessed in Java as <code>Object.INSTANCE</code>), and this instance is initialized at some point in time and calls the super constructor.</p>\n\n<p>Now the interesting part: when the class <code>Object</code> class is loaded by the JVM, its static fields that are be initialized by constant values already contain those values, even before the <code>PUTSTATIC</code> instruction in the <code>Object</code>'s <code>&lt;clinit&gt;</code> is executed.</p>\n\n<p>If you change the <code>testString</code> initializer to a non-constant value, it will not be initialized by the time it is accessed, e.g. <code>override val testString: String = \"test\".also { println(it) }</code></p>\n\n<p><sup><a href=\"https://gist.github.com/h0tk3y/546bf65837f65c27f7ab8e0926b2074e\" rel=\"nofollow noreferrer\">Here's a gist</a> with the bytecode of such a singleton with a few marks made by me.\nNote that the field is accessed by the constructor of the abstract class before the value is put in the <code>&lt;clinit&gt;</code> of <code>Object</code>.</sup></p></li>\n</ul>\n\n<p>I'm not sure it's actually a bug, but at least the behavior is inconsistent. I've reported this inconsistency to the issue tracker: <a href=\"https://youtrack.jetbrains.com/issue/KT-21764\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-21764</a></p>\n"}], "owner": {"reputation": 10413, "user_id": 1724097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8d7280f1bbcfcca4a0989d6b86350e0?s=128&d=identicon&r=PG", "display_name": "Rawa", "link": "https://stackoverflow.com/users/1724097/rawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4896, "favorite_count": 0, "accepted_answer_id": 47759671, "answer_count": 1, "score": 6, "last_activity_date": 1513030704, "creation_date": 1513010531, "question_id": 47757454, "link": "https://stackoverflow.com/questions/47757454/kotlin-override-abstract-val-behavior-object-vs-class", "title": "Kotlin override abstract val behavior, object vs class", "body": "<p>I've just started using and started messing with abstract classes, override val's and singeltons. But, I've just encountered a really odd behaviour. My goal was to have an abstract class, and then create several singeltons that extends that abstract class. Since i want to require certain variables i created abstract val that then could be overridden in the subclasses (Instead of passing them through the constructor).</p>\n\n<p>So i got 4 classes:</p>\n\n<p><strong>MainActivity:</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val instance = Instance()\n        Log.d(\"MainActivity\", \"instance randObject: ${instance.randObject}\")\n        Log.d(\"MainActivity\", \"instance randObject: ${instance.randObject.myProp}\")\n        Log.d(\"MainActivity\", \"instance randObject: ${instance.randObject.myProp2}\")\n\n        Log.d(\"MainActivity\", \"singleton randObject: ${Object.randObject}\")\n        Log.d(\"MainActivity\", \"singleton randObject: ${Object.randObject.myProp}\")\n        Log.d(\"MainActivity\", \"singleton randObject: ${Object.randObject.myProp2}\")    \n    }\n}\n</code></pre>\n\n<p><strong>Instance:</strong></p>\n\n<pre><code>class Instance: AClass(){\n    override val testString: String = \"test\"\n    override val testUriString: String = \"https://www.google.se\"\n    override val testUri: Uri = Uri.parse(testUriString)!!\n    override val randObject: RandomObject = RandomObject(\"Herp\")\n}\n</code></pre>\n\n<p><strong>Object</strong></p>\n\n<pre><code>object Object : AClass(){\n    override val testString: String = \"test\"\n    override val testUriString: String = \"https://www.google.se\"\n    override val testUri: Uri = Uri.parse(testUriString)!!\n    override val randObject: RandomObject = RandomObject(\"Herp\")\n}\n</code></pre>\n\n<p><strong>AClass:</strong></p>\n\n<pre><code>abstract class AClass{\n    abstract val testString: String\n    abstract val testUriString: String\n    abstract val testUri: Uri\n    abstract val randObject: RandomObject\n\n    init {\n        Log.d(\"AClass\", \"testString: $testString\")\n        Log.d(\"AClass\", \"testUriString: $testUriString\")\n        Log.d(\"AClass\", \"testUri: $testUri\")\n        Log.d(\"AClass\", \"randObject: $randObject\")\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>D/AClass: testString: null\nD/AClass: testUriString: null\nD/AClass: testUri: null\nD/AClass: randObject: null\nD/MainActivity: instance randObject: com.technocreatives.abstracttest.RandomObject@4455b26\nD/MainActivity: instance randObject: derp\nD/MainActivity: instance randObject: Herp\n\nD/AClass: testString: test\nD/AClass: testUriString: https://www.google.se\nD/AClass: testUri: null\nD/AClass: randObject: null\nD/MainActivity: singleton randObject: com.technocreatives.abstracttest.RandomObject@8b19367\nD/MainActivity: singleton randObject: derp\nD/MainActivity: singleton randObject: Herp\n</code></pre>\n\n<p>After this I came to the realization that overridden probably are not initialized until after the <code>init{}</code> has been executed. But then I saw what happened when i created a singleton. The value <code>testUriString</code> is set in the <code>init</code>. Why is this the case? Is it a bug? What is the expected behaviour of singleton and override val?</p>\n\n<p>I tried searching for the documentation but have not found any information about this in the documentation.</p>\n"}, {"tags": ["java", "kotlin", "reactive-programming", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "is_accepted": false, "score": 1, "last_activity_date": 1513012370, "creation_date": 1513012370, "answer_id": 47757957, "question_id": 47756750, "link": "https://stackoverflow.com/questions/47756750/convert-maybe-to-single-from-another-source-if-maybe-completes/47757957#47757957", "title": "Convert Maybe to Single from another source if Maybe completes", "body": "<p>When you need to perform RxJava operations using metadata (absence of cached result), you may have to transform your observer chain into a metadata stream, using <code>materialize()</code>.</p>\n\n<p>(Apologies for my lack of fluency in Kotlin)</p>\n\n<pre><code>fun getSomething(): Single&lt;Something&gt; {\n  return cache.getSomething()\n    .toObservable()\n    .materialize()\n    .take(1)\n    .flatMap( it.hasValue() ? Single.just( it.getValue() )\n              : Single.fromCallable( apiCall() )\n      );\n}\n</code></pre>\n\n<p>The <code>materialize()</code> operator turns the observer stream into a stream of <code>Notification</code>s. You can then inspect the first notification, and if it has a value, use that. Otherwise, make your network call.</p>\n"}, {"tags": [], "owner": {"reputation": 1530, "user_id": 2633359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5Rkdc.png?s=128&g=1", "display_name": "enyciaa", "link": "https://stackoverflow.com/users/2633359/enyciaa"}, "is_accepted": true, "score": 8, "last_activity_date": 1513077379, "creation_date": 1513077379, "answer_id": 47771304, "question_id": 47756750, "link": "https://stackoverflow.com/questions/47756750/convert-maybe-to-single-from-another-source-if-maybe-completes/47771304#47771304", "title": "Convert Maybe to Single from another source if Maybe completes", "body": "<p>Here are two fairly simple options you could use. The first I find more explicit. The second has the benefit that you will call the network on any error in the cache.</p>\n\n<p>These assume a Maybe is returned from the cache. For example if no value is found in the cache, return Maybe.empty()</p>\n\n<p>1) If there is an empty in the stream, switchIfEmpty() will use the alternate observable which calls the network. If no empty is in the stream, the network will never be called.</p>\n\n<pre><code>override fun getSomething(): Single&lt;Something&gt; {\n      return cache.getSomething()\n        .switchIfEmpty(\n          Maybe.defer {\n            feed.getSomething().toMaybe()\n          }\n        )\n        .toSingle()\n  }\n</code></pre>\n\n<p>2) An empty maybe will return an error when cast toSingle(), triggering the network call.</p>\n\n<pre><code>override fun getSomething(): Single&lt;Something&gt; {\n      return cache.getSomething()\n        .toSingle()\n        .onErrorResumeNext {\n           feed.getSomething()\n        }\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 3183202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d9b4192b65c0e0b3e686caae76914aa?s=128&d=identicon&r=PG&f=1", "display_name": "guest", "link": "https://stackoverflow.com/users/3183202/guest"}, "is_accepted": false, "score": 0, "last_activity_date": 1615760913, "creation_date": 1615760913, "answer_id": 66630189, "question_id": 47756750, "link": "https://stackoverflow.com/questions/47756750/convert-maybe-to-single-from-another-source-if-maybe-completes/66630189#66630189", "title": "Convert Maybe to Single from another source if Maybe completes", "body": "<p>Use the following flatMap call with 3 params for Maybe</p>\n<pre><code>public final &lt;R&gt; Maybe&lt;R&gt; flatMap(\n        Function&lt;? super T, ? extends MaybeSource&lt;? extends R&gt;&gt; onSuccessMapper,\n        Function&lt;? super Throwable, ? extends MaybeSource&lt;? extends R&gt;&gt; onErrorMapper,\n        Callable&lt;? extends MaybeSource&lt;? extends R&gt;&gt; onCompleteSupplier)\n</code></pre>\n<p>Example</p>\n<pre><code>class Repository (\n    private val cache: Cache,\n    private val service: Service\n) {\n\n    fun getSomething(): Single&lt;Something&gt; {\n      return cache.getSomething()\n                .flatMap(\n                    Function {\n                        Single.just(it) // onSuccess\n                    },\n                    Function {\n                        Single.error(it) // onError\n                    },\n                    Callable {\n                        feed.getSomething() // onComplete\n                    }\n                \n    }\n</code></pre>\n<p>Or</p>\n<pre><code>class Repository (\n    private val cache: Cache,\n    private val service: Service\n) {\n\n    fun getSomething(): Single&lt;Something&gt; {\n      return cache.getSomething()\n                .flatMap(\n                    {\n                        Single.just&lt;Something&gt;(it) // onSuccess\n                    },\n                    {\n                        Single.error(it) // onError\n                    },\n                    {\n                        feed.getSomething() // onComplete\n                    }\n                \n    }\n}    \n</code></pre>\n"}], "owner": {"reputation": 3737, "user_id": 3286569, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1E9y6.jpg?s=128&g=1", "display_name": "JDurstberger", "link": "https://stackoverflow.com/users/3286569/jdurstberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6432, "favorite_count": 2, "accepted_answer_id": 47771304, "answer_count": 3, "score": 11, "last_activity_date": 1615760913, "creation_date": 1513008144, "last_edit_date": 1513009015, "question_id": 47756750, "link": "https://stackoverflow.com/questions/47756750/convert-maybe-to-single-from-another-source-if-maybe-completes", "title": "Convert Maybe to Single from another source if Maybe completes", "body": "<p>I would like to build a <code>Repository</code> class that returns a <code>Single&lt;Something&gt;</code>.</p>\n\n<p>The class should first look in a <code>Cache</code> which returns <code>Maybe&lt;Something&gt;</code> and if the <code>Maybe</code> completes go off to my <code>Service</code> that returns <code>Single&lt;Something&gt;</code> </p>\n\n<pre><code>interface Cache {\n    fun getSomething(): Maybe&lt;Something&gt;   \n}\n\ninterface Service {\n    fun getSomething(): Single&lt;Something&gt;   \n}\n\nclass Repository (\n    private val cache: Cache,\n    private val service: Service\n) {\n\n    fun getSomething(): Single&lt;Something&gt; {\n      return cache.getSomething()\n               .????(feed.getSomething()) //onCompleteTransformToSingle() or similar\n    }\n}    \n</code></pre>\n\n<p>I have searched through the JavaDoc but it does not seem that a transformer for this scenario exists.  </p>\n\n<p>Is there a nice way of handling this?  </p>\n"}, {"tags": ["android", "kotlin", "picasso", "android-image", "android-databinding"], "comments": [{"owner": {"reputation": 2767, "user_id": 2290950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8iIm5.png?s=128&g=1", "display_name": "Viktor Yakunin", "link": "https://stackoverflow.com/users/2290950/viktor-yakunin"}, "edited": false, "score": 0, "creation_date": 1513440971, "post_id": 47756256, "comment_id": 82659325, "body": "Maybe you should cancel previous request, before calling new one: Picasso.with(context).cancelRequest(imageView);"}], "answers": [{"comments": [{"owner": {"reputation": 16317, "user_id": 1866373, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cafdE.jpg?s=128&g=1", "display_name": "Daniel Wilson", "link": "https://stackoverflow.com/users/1866373/daniel-wilson"}, "edited": false, "score": 0, "creation_date": 1513623915, "post_id": 47847539, "comment_id": 82715017, "body": "Thanks I was thinking it&#39;s unlikely little old me had spotted something incorrect going down in Picasso but I have noticed it&#39;s not an issue on a Marshmallow emulator (issue was spotted on an Oreo avd),. will do some more digging tomorrow :)"}], "tags": [], "owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "is_accepted": false, "score": 2, "last_activity_date": 1513440405, "creation_date": 1513440405, "answer_id": 47847539, "question_id": 47756256, "link": "https://stackoverflow.com/questions/47756256/picasso-binding-adapter-a-connection-was-leaked-message/47847539#47847539", "title": "Picasso binding adapter &#39;a connection was leaked&#39; message", "body": "<p>Under the hood Picasso is using okhttp3 for handling its network requests. See here the code for Picasso's NetworkRequestHandler class: <a href=\"https://github.com/square/picasso/blob/0728bb1c619746001c60296d975fbc6bd92a05d2/picasso/src/main/java/com/squareup/picasso/NetworkRequestHandler.java\" rel=\"nofollow noreferrer\">https://github.com/square/picasso/blob/0728bb1c619746001c60296d975fbc6bd92a05d2/picasso/src/main/java/com/squareup/picasso/NetworkRequestHandler.java</a></p>\n\n<p>There is a load function that handles an okhttp Request:</p>\n\n<pre><code>@Override public Result load(Request request, int networkPolicy) throws IOException {\n    okhttp3.Request downloaderRequest = createRequest(request, networkPolicy);\n    Response response = downloader.load(downloaderRequest);\n    ResponseBody body = response.body();\n\n    if (!response.isSuccessful()) {\n      body.close();\n      throw new ResponseException(response.code(), request.networkPolicy);\n    }\n\n    // Cache response is only null when the response comes fully from the network. Both completely\n    // cached and conditionally cached responses will have a non-null cache response.\n    Picasso.LoadedFrom loadedFrom = response.cacheResponse() == null ? NETWORK : DISK;\n\n    // Sometimes response content length is zero when requests are being replayed. Haven't found\n    // root cause to this but retrying the request seems safe to do so.\n    if (loadedFrom == DISK &amp;&amp; body.contentLength() == 0) {\n      body.close();\n      throw new ContentLengthException(\"Received response with 0 content-length header.\");\n    }\n    if (loadedFrom == NETWORK &amp;&amp; body.contentLength() &gt; 0) {\n      stats.dispatchDownloadFinished(body.contentLength());\n    }\n    InputStream is = body.byteStream();\n    return new Result(is, loadedFrom);\n  }\n</code></pre>\n\n<p>I am not too familiar with the Picasso project, but it seems like the response body object is not closed in all cases. You may have spotted a bug in Picasso and may want to file an issue at picasso's github </p>\n"}, {"tags": [], "owner": {"reputation": 6487, "user_id": 1677824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/QkEqX.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1677824/akhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1513798601, "creation_date": 1513798601, "answer_id": 47913225, "question_id": 47756256, "link": "https://stackoverflow.com/questions/47756256/picasso-binding-adapter-a-connection-was-leaked-message/47913225#47913225", "title": "Picasso binding adapter &#39;a connection was leaked&#39; message", "body": "<p><strong>Wild guess</strong>, if it has to do anything with the leaking of the <strong>context</strong> of your activity. Try with <strong>applicationContext</strong></p>\n\n<pre><code>Picasso.with(imageView.context.applicationContext).load(url).into(imageView)\n</code></pre>\n"}], "owner": {"reputation": 16317, "user_id": 1866373, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cafdE.jpg?s=128&g=1", "display_name": "Daniel Wilson", "link": "https://stackoverflow.com/users/1866373/daniel-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1513798601, "creation_date": 1513006484, "question_id": 47756256, "link": "https://stackoverflow.com/questions/47756256/picasso-binding-adapter-a-connection-was-leaked-message", "title": "Picasso binding adapter &#39;a connection was leaked&#39; message", "body": "<p>I am using a binding adapter to load images in a recycler view. Images appear fine. While fast scrolling I noticed sometimes I was getting a 'connection leaked' message from Picasso.</p>\n\n<p>The problem comes from dead image links, hardcoding all of my image urls to point nowhere produces the error for every image <em>after scrolling the first couple off the screen</em>.</p>\n\n<pre><code>W/OkHttpClient: A connection to https://s3-eu-west-1.amazonaws.com/ was leaked. Did you forget to close a response body?\n</code></pre>\n\n<p>The code is basically identical <a href=\"https://android.jlelse.eu/loading-images-with-data-binding-and-picasso-555dad683fdc\" rel=\"noreferrer\">to this sample</a>.</p>\n\n<p>BindingUtils.kt</p>\n\n<pre><code>object BindingUtils {\n\n@BindingAdapter(\"imageUrl\")\n@JvmStatic\nfun setImageUrl(imageView: ImageView, url: String) {\n    Picasso.with(imageView.context).load(url).into(imageView)\n}\n</code></pre>\n\n<p>xml</p>\n\n<pre><code>&lt;ImageView\nandroid:id=\"@+id/imageview_merchant_background\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:background=\"@color/primary\"\nandroid:scaleType=\"centerCrop\"\napp:imageUrl=\"@{viewModel.background}\"/&gt;\n</code></pre>\n\n<p>gradle</p>\n\n<pre><code>implementation \"com.squareup.retrofit2:retrofit:$rootProject.retrofitVersion\"\nimplementation \"com.squareup.retrofit2:adapter-rxjava2:$rootProject.retrofitVersion\"\nimplementation \"com.squareup.retrofit2:converter-gson:$rootProject.retrofitVersion\"\nimplementation \"com.squareup.okhttp3:logging-interceptor:$rootProject.okhttpLoggingVersion\"\nimplementation \"com.squareup.picasso:picasso:$rootProject.picassoVersion\"\n\nretrofitVersion = '2.3.0'\nokhttpLoggingVersion = '3.6.0'\npicassoVersion = '2.5.2'\n</code></pre>\n\n<p>I can see several references to people needing to closing connections for standard Okhttp requests but seeing as that Picasso load call is a one-liner how can this be leaking? </p>\n"}, {"tags": ["android", "kotlin", "realm", "rx-java2"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1513005530, "post_id": 47755913, "comment_id": 82472776, "body": "rxjava won&#39;t make your code faster. You should probably take a step back and think about what the actual requirement is here, and rework the logic. I don&#39;t think this code with 10 if&#39;s is what you really want. Perhaps you could do with &quot;or&quot; queries"}, {"owner": {"reputation": 39, "user_id": 8820429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fUHYfuN82sE/AAAAAAAAAAI/AAAAAAAABws/W4itjjPvXEE/photo.jpg?sz=128", "display_name": "Igor Kluev", "link": "https://stackoverflow.com/users/8820429/igor-kluev"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1513006813, "post_id": 47755913, "comment_id": 82473628, "body": "could you give me an example for &quot;or queries&quot; i never worked with realm before"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1513007527, "post_id": 47755913, "comment_id": 82474107, "body": "No, read the docs"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1513017277, "post_id": 47755913, "comment_id": 82479635, "body": "that won&#39;t be faster, but you could possibly put an index on field <code>MKT</code> and index on <code>UPC</code> to make it faster; just beware the migration"}, {"owner": {"reputation": 39, "user_id": 8820429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fUHYfuN82sE/AAAAAAAAAAI/AAAAAAAABws/W4itjjPvXEE/photo.jpg?sz=128", "display_name": "Igor Kluev", "link": "https://stackoverflow.com/users/8820429/igor-kluev"}, "edited": false, "score": 0, "creation_date": 1513159385, "post_id": 47755913, "comment_id": 82541446, "body": "well Tim even if you are not the nicest person on StackOverflow but atleast you sorta awnsered my question ill post an edit of the way i made the code 200% times faster using only .or()"}], "owner": {"reputation": 39, "user_id": 8820429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fUHYfuN82sE/AAAAAAAAAAI/AAAAAAAABws/W4itjjPvXEE/photo.jpg?sz=128", "display_name": "Igor Kluev", "link": "https://stackoverflow.com/users/8820429/igor-kluev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513159599, "creation_date": 1513005289, "last_edit_date": 1513159599, "question_id": 47755913, "link": "https://stackoverflow.com/questions/47755913/android-multiple-realm-queries-with-rxjava", "title": "android multiple realm queries with RXJava", "body": "<p>I'm maintaining an app that I didn't make myself.</p>\n\n<p>The app is running on special android device that can read barcodes using a laser beam and once a barcode was entered the app starts checking through lal of the Realms Data base if such code exists, thing is that search queries are many because the app needs to search for both all small letter and all capital letters barcodes.</p>\n\n<p>Each database item contains 3 barcodes and once UPC code which the search method needs to iterate on all of them and return an answer. </p>\n\n<p>Code below</p>\n\n<pre><code>fun readItemByMKTorUPC(Value : String,callback:NewCountingPresenter.findItem{\n    doAsync {\n    val realm =  Realm.getDefaultInstance()\n    var findVal : ItemRealmSearchOnly? = ItemRealmSearchOnly()\n\n    //--------------------MKT-------------------------------\n    //search for MKT\n    findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT\",Value)?.findFirst()\n\n\n    //if not found search for UPC Upper\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"UPC\",Value)?.findFirst()\n    }\n\n    //if not found search for MKT Lower Case\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toLowerCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT\",Value)?.findFirst()\n    }\n\n\n    //if not found search for MKT UPPER Case\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT\",Value)?.findFirst()\n    }\n\n    //--------------------UPC-------------------------------\n    //if not found search for UPC\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"UPC\",Value)?.findFirst()\n    }\n\n    //if not found search for UPC Lower\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toLowerCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"UPC\",Value)?.findFirst()\n    }\n\n\n   //--------------------MKT 2-------------------------------\n    //if not found search for MKT 2\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value;\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT2\",Value)?.findFirst()\n    }\n    //if not found search for MKT 2 Upper\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT2\",Value)?.findFirst()\n    }\n    //if not found search for MKT 2 lower\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toLowerCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT2\",Value)?.findFirst()\n    }\n    //--------------------MKT3-------------------------------\n    //if not found search for MKT 3\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT3\",Value)?.findFirst()\n    }\n\n    //if not found search for MKT 3 Upper\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT3\",Value)?.findFirst()\n    }\n\n\n    //if not found search for MKT 3 lower\n    if(findVal?.MKT.isNullOrEmpty()){\n        val Value :String = Value.toUpperCase();\n        findVal = realm.where(ItemRealmSearchOnly::class.java).contains(\"company_id\",MyApplication.instance.company.companyNameId)?.equalTo(\"MKT3\",Value)?.findFirst()\n    }\n\n    var item : ItemRealm = ItemRealm();\n    item.MKT = findVal?.MKT;\n    item.MKT2 = findVal?.MKT2;\n    item.MKT3 = findVal?.MKT3;\n    item.UPC = findVal?.UPC;\n    item.AMOUNT = findVal?.AMOUNT;\n    uiThread {\n\n            callback.clickHere(item);\n        }\n\n    }\n}\n</code></pre>\n\n<p>The issue with this method is that it takes long time to iterate on each of those queries and return an answer to the user </p>\n\n<p>I thought of integrating RxJava 2 method for this code but couldn't find any useful tips how to do it online.</p>\n\n<p>Edit:</p>\n\n<p>I Found a solution thanks to <strong>Tim Castelijns</strong> hinting in the comments</p>\n\n<pre><code>        MyApplication.instance.printLog(\"scanner start: MKT\");\n        findVal = realm.where(ItemRealmSearchOnly::class.java)\n                .contains(\"company_id\",MyApplication.instance.company.companyNameId)\n                ?.equalTo(\"MKT\",Value)\n                ?.or()?.equalTo(\"MKT\",Value.toUpperCase())\n                ?.or()?.equalTo(\"MKT\",Value.toLowerCase())\n                ?.or()?.equalTo(\"UPC\",Value)\n                ?.or()?.equalTo(\"UPC\",Value.toLowerCase())\n                ?.or()?.equalTo(\"UPC\",Value.toUpperCase())\n                ?.or()?.equalTo(\"MKT2\",Value)\n                ?.or()?.equalTo(\"MKT2\",Value.toLowerCase())\n                ?.or()?.equalTo(\"MKT2\",Value.toUpperCase())\n                ?.or()?.equalTo(\"MKT3\",Value)\n                ?.or()?.equalTo(\"MKT3\",Value.toLowerCase())\n                ?.or()?.equalTo(\"MKT3\",Value.toUpperCase())\n                ?.findFirst();\n        MyApplication.instance.printLog(\"scanner end: MKT\");\n</code></pre>\n\n<p>which improved the search time by atleast 200% than the old method</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "android-lifecycle"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 1, "creation_date": 1513001556, "post_id": 47754736, "comment_id": 82470157, "body": "<a href=\"https://stackoverflow.com/a/9822607/115145\">stackoverflow.com/a/9822607/115145</a>"}, {"owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1513002087, "post_id": 47754736, "comment_id": 82470449, "body": "@CommonsWare for sure it&#39;s a good practice for security but I want it to be blurry, it&#39;s not my choice"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1513002113, "post_id": 47754736, "comment_id": 82470468, "body": "AFAIK, &quot;blurry&quot; isn&#39;t an option."}, {"owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1513002181, "post_id": 47754736, "comment_id": 82470515, "body": "@CommonsWare how about showing a simple screen instead? Like app&#39;s logo on plain background?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1513002266, "post_id": 47754736, "comment_id": 82470571, "body": "AFAIK, that is not possible. You do not control the timing of when the screenshot is taken, to make any changes to your UI that would somehow affect that screenshot."}, {"owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "reply_to_user": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 0, "creation_date": 1513002357, "post_id": 47754736, "comment_id": 82470620, "body": "@CommonsWare I&#39;ve seen some banking applications doing this"}, {"owner": {"reputation": 143, "user_id": 866080, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2895a5da7f7ecf908431f7bfb5b9e395?s=128&d=identicon&r=PG", "display_name": "aida", "link": "https://stackoverflow.com/users/866080/aida"}, "edited": false, "score": 0, "creation_date": 1580893011, "post_id": 47754736, "comment_id": 106243477, "body": "did you find any solution? i have the same problem and need to blur or make it black activity when it goes at background"}], "answers": [{"comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1513002635, "post_id": 47754877, "comment_id": 82470811, "body": "Test this method by using a plain color foreground first, which is fast. Then delve into something comparably slower and more complex such as blurring images."}], "tags": [], "owner": {"reputation": 204, "user_id": 3626503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/MkWpc.jpg?s=128&g=1", "display_name": "Alen Zarkovic", "link": "https://stackoverflow.com/users/3626503/alen-zarkovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1513001828, "creation_date": 1513001828, "answer_id": 47754877, "question_id": 47754736, "link": "https://stackoverflow.com/questions/47754736/how-to-make-activity-blurry-when-it-goes-background/47754877#47754877", "title": "How to make Activity blurry when it goes background?", "body": "<p>Gonna go risky here with this answer since i am not 100% that android handles the background stack this way, but i believe that background \"image\" of activity is created as a screenshot of the app going to the background after onPause is called. So basically all you should do is blur the current state of your app before it exits to the background and the background image should be blurred. Or, if blurring all elements is too heavy or unacceptable in any way, perhaps you could take a ss of your app, show it in modal(fullscreen modal) and blur the ss itself.</p>\n\n<p>Here are some advanced blurring techniques:\n<a href=\"http://trickyandroid.com/advanced-blurring-techniques/\" rel=\"nofollow noreferrer\">http://trickyandroid.com/advanced-blurring-techniques/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2067955/fast-bitmap-blur-for-android-sdk/10028267#10028267\">Or as answered here (bitmap blur)</a></p>\n"}, {"comments": [{"owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "edited": false, "score": 0, "creation_date": 1513582021, "post_id": 47756351, "comment_id": 82692467, "body": "This is not a proper solution, when the app calls onPause, background becomes visible for a second then again you see the Activity&#39;s regular view on background."}], "tags": [], "owner": {"reputation": 10501, "user_id": 4070469, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OKYPb.png?s=128&g=1", "display_name": "Mauker", "link": "https://stackoverflow.com/users/4070469/mauker"}, "is_accepted": false, "score": 1, "last_activity_date": 1513006815, "creation_date": 1513006815, "answer_id": 47756351, "question_id": 47754736, "link": "https://stackoverflow.com/questions/47754736/how-to-make-activity-blurry-when-it-goes-background/47756351#47756351", "title": "How to make Activity blurry when it goes background?", "body": "<p>You could try to put a View on top of everything on your Activity, and listen to <code>onPause()</code> to toggle its visibility. You could make this view have a solid color background with the app logo on the center, for example.</p>\n\n<p>Make it visible every time the app is paused, and hide it on <code>onResume()</code>. I think this could mimic what Paypal and some other apps do.</p>\n"}, {"comments": [{"owner": {"reputation": 2580, "user_id": 5147817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77c197aa47cb78595a252f479872e9f2?s=128&d=identicon&r=PG&f=1", "display_name": "Stepan Maksymov", "link": "https://stackoverflow.com/users/5147817/stepan-maksymov"}, "edited": false, "score": 0, "creation_date": 1564090652, "post_id": 48090734, "comment_id": 100927179, "body": "this is not proper solution coz app screenshot is already done before this delegates are called.."}], "tags": [], "owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "is_accepted": true, "score": 1, "last_activity_date": 1515051602, "creation_date": 1515051602, "answer_id": 48090734, "question_id": 47754736, "link": "https://stackoverflow.com/questions/47754736/how-to-make-activity-blurry-when-it-goes-background/48090734#48090734", "title": "How to make Activity blurry when it goes background?", "body": "<p>First of all, calling lifecycle methods doesn't work since they are called when the activity changes and so on.</p>\n\n<p>So this is how I resolved this:</p>\n\n<p>I created a class that extends from LifecycleObserver (this is pretty new)</p>\n\n<pre><code>class ForegroundBackgroundListener : LifecycleObserver {\n\n@OnLifecycleEvent(Lifecycle.Event.ON_START)\n    fun appStarted() {\n        Timber.d(\"App is on foreground\")\n       //Todo visibility: gone\n    }\n\n    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)\n    fun appStopped() {\n        Timber.d(\"App is on background\")\n        //Todo visibility: visible\n}\n</code></pre>\n\n<p>And then in my Application class:</p>\n\n<pre><code>class ForegroundBackgroundApp : Application() {\n\n    private lateinit var appObserver: ForegroundBackgroundListener\n\n        override fun onCreate() {\n            super.onCreate()\n\n            ProcessLifecycleOwner.get()\n                    .lifecycle\n                    .addObserver(\n                            ForegroundBackgroundListener()\n                                    .also { appObserver = it })\n        }\n    }\n</code></pre>\n\n<p>As you see I can detect foreground/background changes and do something accordingly.</p>\n"}], "owner": {"reputation": 4902, "user_id": 6683139, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EOrQR.jpg?s=128&g=1", "display_name": "Ege Kuzubasioglu", "link": "https://stackoverflow.com/users/6683139/ege-kuzubasioglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 0, "accepted_answer_id": 48090734, "answer_count": 3, "score": 1, "last_activity_date": 1515051670, "creation_date": 1513001346, "last_edit_date": 1515051670, "question_id": 47754736, "link": "https://stackoverflow.com/questions/47754736/how-to-make-activity-blurry-when-it-goes-background", "title": "How to make Activity blurry when it goes background?", "body": "<p>I couldn't find anything about this kind of feature online. So basically what I'm trying to achieve is when the user clicks <code>Home</code> button (in other words <code>onPause()</code> method called) I want to make the <code>activity</code> invisible or blurry on back stack for maximum security.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DivAl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DivAl.jpg\" alt=\"here is what I meant\"></a></p>\n\n<p>I want this for not just one activity but every activity, what's the easiest way to achieve this?</p>\n"}, {"tags": ["properties", "thread-safety", "kotlin"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1512999111, "post_id": 47754024, "comment_id": 82468644, "body": "If you have a lot of these you could save some typing by creating a delegate: <a href=\"https://www.reddit.com/r/Kotlin/comments/6r01v5/kotlin_and_property_thread_safety/dl1kelw/\" rel=\"nofollow noreferrer\">reddit.com/r/Kotlin/comments/6r01v5/&hellip;</a>"}], "owner": {"reputation": 95, "user_id": 8213964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9988b7b7a1a036157b6a40dcfc124ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Oleinik D", "link": "https://stackoverflow.com/users/8213964/oleinik-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1512998841, "creation_date": 1512998841, "question_id": 47754024, "link": "https://stackoverflow.com/questions/47754024/what-is-the-simplest-way-to-get-thread-safe-property-in-kotlin", "title": "What is the simplest way to get thread-safe property in Kotlin?", "body": "<p>Is it the simplest way to get thread-safe property of Double type in Kotlin?</p>\n\n<pre><code>class SomeClass {\n    @Volatile\n    var someProp : Double? = null\n        @Synchronized get\n        @Synchronized set\n\n}\n</code></pre>\n"}, {"tags": ["libgdx", "kotlin"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1512987988, "post_id": 47750113, "comment_id": 82461800, "body": "You also need to <a href=\"https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/ui/TextField.html#setPasswordCharacter-char-\" rel=\"nofollow noreferrer\">set the password character</a> to a character in the font. The default is 149 (bullet) which your font might not have."}, {"owner": {"reputation": 4388, "user_id": 369313, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/66XP0.jpg?s=128&g=1", "display_name": "Burf2000", "link": "https://stackoverflow.com/users/369313/burf2000"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512990925, "post_id": 47750113, "comment_id": 82463557, "body": "Epic dude can you post as solution as it worked"}], "answers": [{"tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 4, "last_activity_date": 1513003430, "last_edit_date": 1513003430, "creation_date": 1513002328, "answer_id": 47755028, "question_id": 47750113, "link": "https://stackoverflow.com/questions/47750113/libgdx-setpasswordmode-not-working/47755028#47755028", "title": "LIBGDX : setPasswordMode not working", "body": "<p><code>setPasswordMode</code> will enable the password display mode of a text field.</p>\n\n<p>How it works is that it replaces each character with a predefined character.\nBy default, this is the bullet \"\u2022\", which some fonts may not have.</p>\n\n<p>Change the password character to something else your font does have, like \"*\" for example:</p>\n\n<pre><code>password.setPasswordCharacter('*')\n</code></pre>\n\n<p>Note that you cannot do</p>\n\n<pre><code>password.passwordCharacter = '*'\n</code></pre>\n\n<p>because there is no corresponding <code>getPasswordCharacter</code> method, so no Kotlin property is generated.</p>\n"}], "owner": {"reputation": 4388, "user_id": 369313, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/66XP0.jpg?s=128&g=1", "display_name": "Burf2000", "link": "https://stackoverflow.com/users/369313/burf2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 1, "accepted_answer_id": 47755028, "answer_count": 1, "score": 3, "last_activity_date": 1513003430, "creation_date": 1512985735, "question_id": 47750113, "link": "https://stackoverflow.com/questions/47750113/libgdx-setpasswordmode-not-working", "title": "LIBGDX : setPasswordMode not working", "body": "<p>So I am building a game in LibGDX (Kotlin) and trying to setup a username and password field.</p>\n\n<p>I create my TextField</p>\n\n<pre><code>password = TextField(\"\", Gui.skin)\n</code></pre>\n\n<p>I set </p>\n\n<pre><code>password.isPasswordMode = true (Kotin changes setter and getters, under the hode this is calling setPasswordMode)\n</code></pre>\n\n<p>However the text still appears when I enter it in the box.  I am using LibGDX 1.9.6 </p>\n"}, {"tags": ["android", "unit-testing", "kotlin", "rx-java"], "comments": [{"owner": {"reputation": 11742, "user_id": 5730321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/6yX7D.jpg?s=128&g=1", "display_name": "Leo Droidcoder", "link": "https://stackoverflow.com/users/5730321/leo-droidcoder"}, "edited": false, "score": 1, "creation_date": 1536077354, "post_id": 47749483, "comment_id": 91291096, "body": "P.S. instead of ugly `when` you can use built-in extension <b>whenever()</b>"}], "answers": [{"tags": [], "owner": {"reputation": 7666, "user_id": 1241193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0331e5e748a0ac3860b68f6cac130ef1?s=128&d=identicon&r=PG", "display_name": "Bob Dalgleish", "link": "https://stackoverflow.com/users/1241193/bob-dalgleish"}, "is_accepted": false, "score": 0, "last_activity_date": 1513012695, "creation_date": 1513012695, "answer_id": 47758044, "question_id": 47749483, "link": "https://stackoverflow.com/questions/47749483/testing-rxjava-infinite-interval/47758044#47758044", "title": "Testing RxJava infinite interval", "body": "<p>You will have problems running your tests in the way that you have fashioned.</p>\n\n<ol>\n<li>Make your schedulers into class parameters, so that they can be injected in the proper fashion, both during testing and production.</li>\n<li>Use test schedulers instead of <code>Schedulers.immediate()</code> because you can end up in a deadlock.</li>\n<li>Always have your timed operations (<code>interval()</code>, <code>timeout()</code>, etc) operate on explicit schedulers, usually ones that you have injected.</li>\n</ol>\n"}], "owner": {"reputation": 637, "user_id": 5072705, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e314002ad8fd2bd391ad27d3bca155c3?s=128&d=identicon&r=PG&f=1", "display_name": "\u0415\u0432\u0433\u0435\u043d\u0438\u0439 \u041a\u0440\u0430\u0432\u0446\u043e\u0432", "link": "https://stackoverflow.com/users/5072705/%d0%95%d0%b2%d0%b3%d0%b5%d0%bd%d0%b8%d0%b9-%d0%9a%d1%80%d0%b0%d0%b2%d1%86%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1513012695, "creation_date": 1512983548, "last_edit_date": 1512986160, "question_id": 47749483, "link": "https://stackoverflow.com/questions/47749483/testing-rxjava-infinite-interval", "title": "Testing RxJava infinite interval", "body": "<p>I have a simple view that displays currencies as list. App fetches currencies from web service every 1 second. So I have following method in my ViewModel:</p>\n\n<pre><code>fun onViewAppeared() {\n    currenciesViewStateUpdates.onNext(CurrenciesViewState(true, null))\n    Flowable.interval(1, TimeUnit.SECONDS)\n    .flatMapSingle { _ -&gt; currenciesService.calculateCurrencies(Currency(\"EUR\", 10.0)) }\n    .doOnError { error -&gt; Log.d(\"LOG\", error.message) }\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe { currencies -&gt;\n        currenciesViewStateUpdates.onNext(CurrenciesViewState(false, currencies))\n    }\n}\n</code></pre>\n\n<p>Now I need to unit test this behavior:</p>\n\n<pre><code>@Test\nfun viewAppearedAndCurrenciesRequestSucceeded_currenciesDisplayed() {\n    val currencies = listOf(Currency(\"\", 0.0))\n    Mockito.`when`(currenciesServiceMock.calculateCurrencies(anyCurrency())).thenReturn(Single.just(currencies))\n    viewModel.getViewStateUpdates().subscribe(testObserver)\n\n    viewModel.onViewAppeared()\n\n    testObserver.assertSubscribed()\n    testObserver.assertNoErrors()\n    testObserver.assertValueCount(2)\n    assertFalse(testObserver.values()[1].loading)\n    assertNotNull(testObserver.values()[1].currencies)\n    testObserver.values()[1].currencies?.let { assertTrue(it.isNotEmpty()) }\n}\n</code></pre>\n\n<p>All RxSchedulers set up for immediate. Problem: with test awaits forever when observable finishes subscription, but it will never finish cause it is infinite interval. How can I test it?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-lint"], "comments": [{"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "edited": false, "score": 0, "creation_date": 1512980605, "post_id": 47748808, "comment_id": 82457745, "body": "I am struggling for the same thing, probably it is a bug in Kotlin or the IDE itself."}, {"owner": {"reputation": 3123, "user_id": 2424415, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/573bc7d4a25d71a48f0e0aa9e5667ce7?s=128&d=identicon&r=PG", "display_name": "elmorabea", "link": "https://stackoverflow.com/users/2424415/elmorabea"}, "edited": false, "score": 0, "creation_date": 1512983030, "post_id": 47748808, "comment_id": 82458859, "body": "Have you tried adding this word to IDE&#39;s dictionary? it should be in the suggestion list to fix it"}, {"owner": {"reputation": 27144, "user_id": 477415, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/iBHq6.jpg?s=128&g=1", "display_name": "Ollie C", "link": "https://stackoverflow.com/users/477415/ollie-c"}, "reply_to_user": {"reputation": 3123, "user_id": 2424415, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/573bc7d4a25d71a48f0e0aa9e5667ce7?s=128&d=identicon&r=PG", "display_name": "elmorabea", "link": "https://stackoverflow.com/users/2424415/elmorabea"}, "edited": false, "score": 0, "creation_date": 1512992537, "post_id": 47748808, "comment_id": 82464581, "body": "@elmorabea As I said in the question, I need a solution that does NOT involve putting the text in the dictionary."}, {"owner": {"reputation": 27144, "user_id": 477415, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/iBHq6.jpg?s=128&g=1", "display_name": "Ollie C", "link": "https://stackoverflow.com/users/477415/ollie-c"}, "edited": false, "score": 3, "creation_date": 1513178574, "post_id": 47748808, "comment_id": 82553977, "body": "This appears to be Kotlin-specific. The @SuppressWarnings(&quot;SpellCheckingInspection&quot;) annotation does suppress the spelling warning, but only in Java and not Kotlin. I&#39;ve reported it as a bug. <a href=\"https://issuetracker.google.com/issues/70615542\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/70615542</a>  Please star the bug if you see the same issue."}, {"owner": {"reputation": 2775, "user_id": 2102748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1adcb8ed924ecd1045fd6252a7df18?s=128&d=identicon&r=PG", "display_name": "milosmns", "link": "https://stackoverflow.com/users/2102748/milosmns"}, "reply_to_user": {"reputation": 3123, "user_id": 2424415, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/573bc7d4a25d71a48f0e0aa9e5667ce7?s=128&d=identicon&r=PG", "display_name": "elmorabea", "link": "https://stackoverflow.com/users/2424415/elmorabea"}, "edited": false, "score": 0, "creation_date": 1523220663, "post_id": 47748808, "comment_id": 86458683, "body": "Ollie - This doesn&#39;t work in latest IntelliJ with raw Kotlin (no Android). Also, @elmorabea if you have stuff in your tests (like testing Base64 encoded values), then you don&#39;t want to add each encoded string to the dictionary, I&#39;m guessing that&#39;s the case with OP too."}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 7792518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85dd4f7b706dfc017d6101f47b28c3f5?s=128&d=identicon&r=PG", "display_name": "gundrabur", "link": "https://stackoverflow.com/users/7792518/gundrabur"}, "edited": false, "score": 0, "creation_date": 1569444716, "post_id": 52442257, "comment_id": 102603503, "body": "That works, but I have to repeat this line before every Class, that is annoying, is there a way to suppress spell checking globally for a whole project?"}, {"owner": {"reputation": 144, "user_id": 5846933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Izs5os6gy5s/AAAAAAAAAAI/AAAAAAAAOjY/_f3Dp9ylLuY/photo.jpg?sz=128", "display_name": "Borja Quevedo", "link": "https://stackoverflow.com/users/5846933/borja-quevedo"}, "reply_to_user": {"reputation": 563, "user_id": 7792518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85dd4f7b706dfc017d6101f47b28c3f5?s=128&d=identicon&r=PG", "display_name": "gundrabur", "link": "https://stackoverflow.com/users/7792518/gundrabur"}, "edited": false, "score": 1, "creation_date": 1570645136, "post_id": 52442257, "comment_id": 102981614, "body": "You can disable spellchecking in Android Studio or IntelliJ in <code>Preferences</code> - <code>Editor</code> - <code>Inspections</code>"}], "tags": [], "owner": {"reputation": 144, "user_id": 5846933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Izs5os6gy5s/AAAAAAAAAAI/AAAAAAAAOjY/_f3Dp9ylLuY/photo.jpg?sz=128", "display_name": "Borja Quevedo", "link": "https://stackoverflow.com/users/5846933/borja-quevedo"}, "is_accepted": false, "score": 5, "last_activity_date": 1537527510, "creation_date": 1537527510, "answer_id": 52442257, "question_id": 47748808, "link": "https://stackoverflow.com/questions/47748808/how-to-suppress-spellcheck-on-a-string-constant-in-android-kotlin/52442257#52442257", "title": "How to suppress spellcheck on a string constant in Android Kotlin?", "body": "<p>In Kotlin you can suppress this warning using <code>@Suppress</code> instead of <code>@SuppressWarnings</code> with the following annotation</p>\n\n<pre><code>@Suppress(\"SpellCheckingInspection\")\n</code></pre>\n"}], "owner": {"reputation": 27144, "user_id": 477415, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/iBHq6.jpg?s=128&g=1", "display_name": "Ollie C", "link": "https://stackoverflow.com/users/477415/ollie-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1537527510, "creation_date": 1512980323, "question_id": 47748808, "link": "https://stackoverflow.com/questions/47748808/how-to-suppress-spellcheck-on-a-string-constant-in-android-kotlin", "title": "How to suppress spellcheck on a string constant in Android Kotlin?", "body": "<p>Android Lint picks up the string constant in this code sample as a spelling error on \"dWQGSCDx\". According to the docs I should use @SupressLint(\"Typos\") to suppress it but that doesn't achieve that. I see others have suggested using @SuppressWarnings but that is not working either.</p>\n\n<pre><code>/**\n * Constants.kt\n */\n\nimport android.annotation.SuppressLint\n\n@SuppressLint(\"Typos\")\n@SuppressWarnings(\"SpellCheckingInspection\")    \nconst val SOME_STRING_VALUE = \"...dWQGSCDx...\"\n</code></pre>\n\n<p>Note this is a file-scoped global constant, it is not inside a class so an annotation cannot be placed on a containing class.</p>\n\n<p>How do I suppress spell-checking of this constant definition without disabling spellcheck entirely and without adding the \"mispelt\" text to the dictionary?</p>\n"}, {"tags": ["android", "animation", "android-recyclerview", "kotlin", "transition"], "owner": {"reputation": 1751, "user_id": 6241054, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/qV7vO.jpg?s=128&g=1", "display_name": "Jocky Doe", "link": "https://stackoverflow.com/users/6241054/jocky-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1512945114, "creation_date": 1512945114, "question_id": 47744184, "link": "https://stackoverflow.com/questions/47744184/make-recyclerview-item-grow-to-fullscreen-with-transition-animation", "title": "Make RecyclerView item grow to fullscreen with transition/animation", "body": "<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center_vertical\"\n    android:padding=\"5dp\"&gt;\n\n    ........\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I want to make an item grow to fullscreen on click but transition just grows in size as element from the list:</p>\n\n<pre><code>view.setOnClickListener {\n    TransitionManager.beginDelayedTransition(it as ViewGroup)\n    it.layoutParams.height = ViewGroup.LayoutParams.MATCH_PARENT\n    it.requestLayout()\n}\n</code></pre>\n\n<p>How to achieve it to scale fullscreen and occupy the screen as independent element nevermind the recyclerview?</p>\n"}, {"tags": ["android", "broadcastreceiver", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "edited": false, "score": 0, "creation_date": 1512946993, "post_id": 47742774, "comment_id": 82448934, "body": "Thanks for your answer, but on it&#39;s own that doesn&#39;t really make a  lot of sense (I&#39;m a beginner with Kotlin). Could you go into any more detail, on specifically what to register in the <code>onStart()</code> and how that can still access functions that manipulate the UI?"}, {"owner": {"reputation": 146, "user_id": 3091893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bzTz5.jpg?s=128&g=1", "display_name": "C2H6O", "link": "https://stackoverflow.com/users/3091893/c2h6o"}, "reply_to_user": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "edited": false, "score": 0, "creation_date": 1512958314, "post_id": 47742774, "comment_id": 82451223, "body": "This should work for you: <a href=\"https://stackoverflow.com/questions/22241705/calling-a-activity-method-from-broadcastreceiver-in-android\" title=\"calling a activity method from broadcastreceiver in android\">stackoverflow.com/questions/22241705/&hellip;</a>"}, {"owner": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "edited": false, "score": 0, "creation_date": 1512994830, "post_id": 47742774, "comment_id": 82466004, "body": "That&#39;s in Java, which is what the issue was in the first place...?"}, {"owner": {"reputation": 146, "user_id": 3091893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bzTz5.jpg?s=128&g=1", "display_name": "C2H6O", "link": "https://stackoverflow.com/users/3091893/c2h6o"}, "reply_to_user": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "edited": false, "score": 0, "creation_date": 1513037176, "post_id": 47742774, "comment_id": 82488269, "body": "You can&#39;t mix Kotlin and Java in the same file. Your Class must either be fully in Java or fully in Kotlin. You can mix Kotlin and Java classes in the same project, but you can&#39;t have Java/Kotlin code intermixed in the same class. Was that the root of your question?"}, {"owner": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "edited": false, "score": 0, "creation_date": 1513073720, "post_id": 47742774, "comment_id": 82501132, "body": "I know!! That&#39;s what I&#39;m saying- my project is fully Kotlin, but the link you shared is Java!"}], "tags": [], "owner": {"reputation": 146, "user_id": 3091893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bzTz5.jpg?s=128&g=1", "display_name": "C2H6O", "link": "https://stackoverflow.com/users/3091893/c2h6o"}, "is_accepted": false, "score": 0, "last_activity_date": 1512935291, "creation_date": 1512935291, "answer_id": 47742774, "question_id": 47742474, "link": "https://stackoverflow.com/questions/47742474/kotlin-call-a-function-to-update-ui-from-broadcastreceiver-onreceive/47742774#47742774", "title": "Kotlin: Call a function to update UI from BroadcastReceiver onReceive", "body": "<p>The onReceive(...) method runs on the main thread. You can register your Activity in onStart() and unregister it in onStop(), which will guarantee that your UI is present when the event is received.</p>\n"}, {"comments": [{"owner": {"reputation": 526, "user_id": 1885415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lEaOM.jpg?s=128&g=1", "display_name": "Srishti Roy", "link": "https://stackoverflow.com/users/1885415/srishti-roy"}, "edited": false, "score": 0, "creation_date": 1530690334, "post_id": 49875754, "comment_id": 89319654, "body": "how do I update the ui if the broadcastreceiver is a separate file"}], "tags": [], "owner": {"reputation": 1002, "user_id": 2967875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e55218f9daf6c7d82aa3050eb05148?s=128&d=identicon&r=PG", "display_name": "zzas11", "link": "https://stackoverflow.com/users/2967875/zzas11"}, "is_accepted": false, "score": 3, "last_activity_date": 1523961016, "creation_date": 1523961016, "answer_id": 49875754, "question_id": 47742474, "link": "https://stackoverflow.com/questions/47742474/kotlin-call-a-function-to-update-ui-from-broadcastreceiver-onreceive/49875754#49875754", "title": "Kotlin: Call a function to update UI from BroadcastReceiver onReceive", "body": "<p>Sharing the info to register BroadcastReceiver in Kotlin</p>\n\n<p>Step 1. Create BroadcastReceiver in MainActivity.kt</p>\n\n<pre><code>private val mPlugInReceiver = object : BroadcastReceiver() {\n    override fun onReceive(context: Context?, intent: Intent?) {\n        when (intent?.action) {\n            Intent.ACTION_POWER_CONNECTED -&gt; {\n                //update your main background color\n                updateBackgroundColor()\n            }\n            Intent.ACTION_POWER_DISCONNECTED -&gt; {\n                //update your main background color\n                updateBackgroundColor()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Step 2. Create IntentFilter</p>\n\n<pre><code>private fun getIntentFilter(): IntentFilter {\n    val iFilter = IntentFilter()\n    iFilter.addAction(Intent.ACTION_POWER_CONNECTED)\n    iFilter.addAction(Intent.ACTION_POWER_DISCONNECTED)\n    return iFilter\n}\n</code></pre>\n\n<p>Step 3. Register receiver at onStart()</p>\n\n<pre><code>override fun onStart() {\n    super.onStart()\n    registerReceiver(mPlugInReceiver, getIntentFilter())\n}\n</code></pre>\n\n<p>Step 4. Unregister receiver at onStop()</p>\n\n<pre><code>override fun onStop() {\n    super.onStop()\n    unregisterReceiver(mPlugInReceiver)\n}\n</code></pre>\n\n<p>If you have custom BroadcastReceiver, you can register using <code>LocalBroadcastManager</code> and create your local <code>IntentFilter</code></p>\n\n<pre><code>private val mLocalBroadcastReceiver = object : BroadcastReceiver() {\n    override fun onReceive(context: Context?, intent: Intent?) {\n        when (intent?.action) {\n            AnyService.UPDATE_ANY -&gt; {\n\n            }\n        }\n    }\n}\n\nprivate fun getLocalIntentFilter(): IntentFilter {\n    val iFilter = IntentFilter()\n    iFilter.addAction(AnyService.UPDATE_ANY)\n    return iFilter\n}\n</code></pre>\n\n<p>Register local receiver\n<code>LocalBroadcastManager.getInstance(applicationContext).registerReceiver(mLocalBroadcastReceiver, getLocalIntentFilter())</code></p>\n\n<p>Unregister local receiver <code>LocalBroadcastManager.getInstance(applicationContext).unregisterReceiver(mLocalBroadcastReceiver)</code></p>\n"}, {"tags": [], "owner": {"reputation": 409, "user_id": 4891241, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-GQpCKvKrW54/AAAAAAAAAAI/AAAAAAAAAKI/Z1wgGcJ6xAs/photo.jpg?sz=128", "display_name": "Jaume Colom Ferrer", "link": "https://stackoverflow.com/users/4891241/jaume-colom-ferrer"}, "is_accepted": false, "score": 1, "last_activity_date": 1523962023, "creation_date": 1523962023, "answer_id": 49876086, "question_id": 47742474, "link": "https://stackoverflow.com/questions/47742474/kotlin-call-a-function-to-update-ui-from-broadcastreceiver-onreceive/49876086#49876086", "title": "Kotlin: Call a function to update UI from BroadcastReceiver onReceive", "body": "<p>The best way to achieve that is to create an abstract method in the BroadcastReceiver, and when onReceive() method is called, you can invoke that method that will be implemented by your activity.</p>\n\n<p>BroadcastReceiver example:</p>\n\n<pre><code>abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {\n\noverride fun onReceive(context: Context, intent: Intent) {\n     //Do the checks or whatever you want\n     var isConnected = true\n\n    broadcastResult(isConnected)\n}\n\nprotected abstract fun broadcastResult(connected: Boolean)\n</code></pre>\n\n<p>}</p>\n\n<p>And the code in your activity (in the onCreate or onStart for example). Here you register the broadcast receiver with the method implementation, and here you can update the UI:</p>\n\n<pre><code>    var connectionBroadcastReceiver = object : ConnectionBroadcastReceiver() {\n        override fun broadcastResult(connected: Boolean) {\n            if(isConnected){\n                refreshList()\n            }\n        }\n    }\n    val intentFilter = IntentFilter()\n    intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION)\n    this.registerReceiver(connectionBroadcastReceiver, intentFilter)\n</code></pre>\n\n<p>Don't forget to unregister the receiver in (onPause||onStop||onDestroy), but it's not strictly necessary.</p>\n"}], "owner": {"reputation": 2681, "user_id": 979052, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BWcqy.jpg?s=128&g=1", "display_name": "Alicia", "link": "https://stackoverflow.com/users/979052/alicia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4167, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1523962023, "creation_date": 1512933232, "last_edit_date": 1512994795, "question_id": 47742474, "link": "https://stackoverflow.com/questions/47742474/kotlin-call-a-function-to-update-ui-from-broadcastreceiver-onreceive", "title": "Kotlin: Call a function to update UI from BroadcastReceiver onReceive", "body": "<p>I am new to Kotlin, and it seems awesome! Though today, I've been trying to do something that in Java was super simple, but I've got totally stuck. </p>\n\n<p>I am using a broadcast receiver to determine when the device is connected/ disconnected from a power source. And all I need to do it update my UI accordingly.</p>\n\n<hr>\n\n<h3>My Code</h3>\n\n<p>Here's my <code>BroadcastReceiver</code> classs, and it seems to work fine.</p>\n\n<pre><code>class PlugInReceiver : BroadcastReceiver() {\n    override fun onReceive(context: Context, intent: Intent) {\n        val action = intent.action\n\n        if (action == Intent.ACTION_POWER_CONNECTED) {\n            // Do stuff when power connected\n        } \n        else if (action == Intent.ACTION_POWER_DISCONNECTED) {\n            // Do more stuff when power disconnected\n        }\n    }\n}\n</code></pre>\n\n<p>Now in my <code>MainActivity</code> (but somewhere else, later on), I want to update my UI when the intent is fired, for example in the function below, the background color changes.</p>\n\n<pre><code>private fun updateBackgroundColor( newBgColorId: Int = R.color.colorAccent){\n    val mainLayout = findViewById&lt;View&gt;(R.id.mainLayout)\n    val colorFade = ObjectAnimator.ofObject(\n            mainLayout, \"backgroundColor\", ArgbEvaluator(), oldBgColor, newBgColor)\n    colorFade.start()\n}\n</code></pre>\n\n<hr>\n\n<h3>The Question</h3>\n\n<blockquote>\n  <p>How can I call a function on the MainActivity, or update my UI when the <code>BroadcastReceiver</code> fires an event?</p>\n</blockquote>\n\n<hr>\n\n<h3>What I've tried so far</h3>\n\n<ul>\n<li><p>I looked into having a static variable somewhere, storing the result of the BroadcastReciever, then an observable in my UI class, watching and calling appropriate function accordingly. Though after Googling how to do this, looks like that's not really a good approach in Kotlin.</p></li>\n<li><p>Considered trying to run the BroadcastReciever on the UI thread, but that sounds like a terrible idea.</p></li>\n<li><p>Tried mixing a Java implementation with my Kotlin class, but couldn't get it to work.</p></li>\n</ul>\n\n<p>Frustratingly I found several very similar questions on SO. However their implementations seem to all use Java-specific features: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22869928/android-broadcastreceiver-onreceive-update-textview-in-mainactivity\">Android BroadcastReceiver onReceive Update TextView in MainActivity</a></li>\n<li><a href=\"https://stackoverflow.com/questions/14643385/how-to-update-ui-in-a-broadcastreceiver\">How to update UI in a BroadcastReceiver</a>  </li>\n<li><a href=\"https://stackoverflow.com/questions/22241705/calling-a-activity-method-from-broadcastreceiver-in-android\">Calling a Activity method from BroadcastReceiver in Android</a></li>\n<li><a href=\"https://stackoverflow.com/questions/44476995/how-to-update-ui-from-broadcastreceiver-after-screenshot\">How to update UI from BroadcastReceiver after screenshot</a></li>\n</ul>\n\n<hr>\n\n<p>I'm sure this is a trivial question for most Android developers, but I am lost! Let me know if you need any more details. Thanks very much in advance!</p>\n"}, {"tags": ["android", "kotlin", "android-nestedscrollview"], "comments": [{"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 0, "creation_date": 1515770164, "post_id": 47739617, "comment_id": 83440055, "body": "I just had the same problem, in Kotlin as well, but do you think it is actually related to Kotlin? Wouldn&#39;t the same happen in Java?"}], "answers": [{"tags": [], "owner": {"reputation": 529, "user_id": 9316168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HUaOF.jpg?s=128&g=1", "display_name": "gmk57", "link": "https://stackoverflow.com/users/9316168/gmk57"}, "is_accepted": false, "score": 1, "last_activity_date": 1518993460, "creation_date": 1518993460, "answer_id": 48857359, "question_id": 47739617, "link": "https://stackoverflow.com/questions/47739617/android-nestedscrollview-smoothscrollby-scrolling-too-far/48857359#48857359", "title": "Android NestedScrollView.smoothScrollBy() scrolling too far", "body": "<p>The same happens in Java. This is a bug in Support Library since version 26.0.0, discussed <a href=\"https://stackoverflow.com/questions/46156882/nestedscrollviews-fullscrollview-focus-up-not-working-properly\">here</a> and on Google <a href=\"https://issuetracker.google.com/issues/68366782\" rel=\"nofollow noreferrer\">Issue</a> <a href=\"https://issuetracker.google.com/issues/70310373\" rel=\"nofollow noreferrer\">Tracker</a>.</p>\n"}], "owner": {"reputation": 2771, "user_id": 5963279, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10207102799463401/picture?type=large", "display_name": "Thomas Cook", "link": "https://stackoverflow.com/users/5963279/thomas-cook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1518993460, "creation_date": 1512914618, "last_edit_date": 1512917894, "question_id": 47739617, "link": "https://stackoverflow.com/questions/47739617/android-nestedscrollview-smoothscrollby-scrolling-too-far", "title": "Android NestedScrollView.smoothScrollBy() scrolling too far", "body": "<p>I've got the following Kotlin code:</p>\n\n<pre><code>val scrollView = parent as? NestedScrollView\nscrollView?.let {\n    it.smoothScrollTo(0, 500)\n}\n</code></pre>\n\n<p>The first time this code is called the scroll views scrollY is 0, and it successfully scrolls the view by 500 in the y. However, when this is called a second time it scrolls it another 500 (rather than scrolling it to 500 in the y, it will now be at 1000 and so on for consecutive calls.</p>\n\n<p>Any idea what's going on here? When I drilled down into the code for <code>NestedScrollView</code> (and eventually down into <code>OverScroller's</code> <code>startScroll</code> method that is ultimately called I can see the <code>distance</code> parameter for that call on the y axis is 0 - as it should be for any other time than the first that my code is called).</p>\n\n<p>EDIT: Important info - I tried with a <code>ScrollView</code> rather than a <code>NestedScrollView</code> and it worked as expected, however because my <code>ScrollView</code> needs to be inside a <code>SwipeRefreshLayout</code> I need it to be a <code>NestedScrollView</code> else pulling down always refreshes rather than scrolling.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "reply_to_user": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1513189841, "post_id": 47738436, "comment_id": 82560863, "body": "Kotlin has something called <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">Extension functions</a> the receiver is the Object that the extension function is invoked on."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512906266, "post_id": 47738468, "comment_id": 82437156, "body": "Thank you! I&#39;m an idiot and thought that didn&#39;t work because of another error in my code. (I&#39;ll accept your answer when I can!)"}, {"owner": {"reputation": 4435, "user_id": 812598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad6c769fb4cb6525f4ea6c6e7bf8983a?s=128&d=identicon&r=PG", "display_name": "GoRoS", "link": "https://stackoverflow.com/users/812598/goros"}, "edited": false, "score": 0, "creation_date": 1512907319, "post_id": 47738468, "comment_id": 82437444, "body": "There&#39;s no issue at all to use a method reference like <code>StringBuilder::append</code> as I pointed out in my answer. In fact, it&#39;s a clearer way to do that for this particular case."}, {"owner": {"reputation": 999, "user_id": 1794549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dCovU.jpg?s=128&g=1", "display_name": "Marko Devcic", "link": "https://stackoverflow.com/users/1794549/marko-devcic"}, "edited": false, "score": 0, "creation_date": 1512914154, "post_id": 47738468, "comment_id": 82439253, "body": "Correct, what the answer is missing that the signatures of functions don&#39;t match."}], "tags": [], "owner": {"reputation": 999, "user_id": 1794549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/dCovU.jpg?s=128&g=1", "display_name": "Marko Devcic", "link": "https://stackoverflow.com/users/1794549/marko-devcic"}, "is_accepted": false, "score": 2, "last_activity_date": 1512914206, "last_edit_date": 1512914206, "creation_date": 1512906090, "answer_id": 47738468, "question_id": 47738436, "link": "https://stackoverflow.com/questions/47738436/how-can-i-create-a-foreach-that-returns-an-object-that-is-a-receiver-to-the-co/47738468#47738468", "title": "How can I create a &quot;forEach&quot; that returns an object that is a receiver to the consuming function?", "body": "<p>You are trying to use a method reference with a different signature for a receiver function. You can make it work with supplying a lambda instead. Or as other answers point out, changing the signature of your receiver function.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    \"test1, test2, test3\".split(\", \")\n            .toCustomString(StringBuilder(), { item -&gt; append(item) })\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512989155, "post_id": 47738618, "comment_id": 82462489, "body": "Thank you so much! Now I feel like I understand the background why it dosen&#39;t work. I&#39;ve now changed the signature of the function to <code>R.(T) -&gt; Any?</code> so that it works with the <code>StringBuilder::append</code> aswell as a anonym function like <code>{append(it)}</code>"}], "tags": [], "owner": {"reputation": 4435, "user_id": 812598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad6c769fb4cb6525f4ea6c6e7bf8983a?s=128&d=identicon&r=PG", "display_name": "GoRoS", "link": "https://stackoverflow.com/users/812598/goros"}, "is_accepted": true, "score": 1, "last_activity_date": 1512907223, "creation_date": 1512907223, "answer_id": 47738618, "question_id": 47738436, "link": "https://stackoverflow.com/questions/47738436/how-can-i-create-a-foreach-that-returns-an-object-that-is-a-receiver-to-the-co/47738618#47738618", "title": "How can I create a &quot;forEach&quot; that returns an object that is a receiver to the consuming function?", "body": "<p>There's no problem to use a method reference in that case and it should work perfectly.</p>\n\n<p>Just ensure you use kotlin class <code>StringBuilder</code> an change this:</p>\n\n<p><code>fun &lt;T, R&gt;Iterable&lt;T&gt;.toCustomString(obj: R, thing: R.(T) -&gt; Unit)</code></p>\n\n<p>by this one:</p>\n\n<p><code>fun &lt;T, R&gt;Iterable&lt;T&gt;.toCustomString(obj: R, thing: R.(T) -&gt; R)</code></p>\n"}, {"comments": [{"owner": {"reputation": 4435, "user_id": 812598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad6c769fb4cb6525f4ea6c6e7bf8983a?s=128&d=identicon&r=PG", "display_name": "GoRoS", "link": "https://stackoverflow.com/users/812598/goros"}, "edited": false, "score": 0, "creation_date": 1512907930, "post_id": 47738639, "comment_id": 82437618, "body": "Yeap, <code>R.(T) -&gt; R</code> fix is what I answered in my answer before. However I don&#39;t understand your second part of the answer. <code>toCustomString</code> extension method does what it does, it&#39;s up to the caller to handle the result or not, but it makes sense. Another thing is what he does in his dummy <code>main</code> test function, which should make sense and it doesn&#39;t. In a real app use that extension could be helpful and IMHO the function reference is the clearer way to do that. No need to reinvent the wheel if the <code>fun</code> it&#39;s already implemented."}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "reply_to_user": {"reputation": 4435, "user_id": 812598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad6c769fb4cb6525f4ea6c6e7bf8983a?s=128&d=identicon&r=PG", "display_name": "GoRoS", "link": "https://stackoverflow.com/users/812598/goros"}, "edited": false, "score": 0, "creation_date": 1512910572, "post_id": 47738639, "comment_id": 82438351, "body": "What I mean is that the return value from <code>obj.thing(it)</code> is not handled. So, I suppose that <code>thing()</code> is a mutating function. Due to this, I think <code>R.(T) -&gt; Unit</code> is more appropriate because most of the mutating function have return type <code>Unit</code> instead of the receiver type."}], "tags": [], "owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "is_accepted": false, "score": 1, "last_activity_date": 1512907404, "creation_date": 1512907404, "answer_id": 47738639, "question_id": 47738436, "link": "https://stackoverflow.com/questions/47738436/how-can-i-create-a-foreach-that-returns-an-object-that-is-a-receiver-to-the-co/47738639#47738639", "title": "How can I create a &quot;forEach&quot; that returns an object that is a receiver to the consuming function?", "body": "<p>In order to use <code>StringBuilder::append</code> as a function reference, <code>thing</code> should have type <code>R.(T) -&gt; R</code> instead of <code>R.(T) -&gt; Unit</code> because  <code>StringBuilder.append(String)</code> will return <code>StringBuilder</code>. However, since <code>toCustomString</code> does not handle the return value from <code>StringBuilder.append</code>, what @Marko suggested is more appropriate.</p>\n\n<p>FYR, here is an alternative way to do it without an extra extension function:</p>\n\n<pre><code>val customString = StringBuilder().apply {\n    \"test1, test2, test3\"\n            .split(\", \")\n            .forEach { this.append(it) }\n}\n</code></pre>\n"}], "owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 47738618, "answer_count": 3, "score": 3, "last_activity_date": 1513190016, "creation_date": 1512905798, "last_edit_date": 1513190016, "question_id": 47738436, "link": "https://stackoverflow.com/questions/47738436/how-can-i-create-a-foreach-that-returns-an-object-that-is-a-receiver-to-the-co", "title": "How can I create a &quot;forEach&quot; that returns an object that is a receiver to the consuming function?", "body": "<p>I'm trying to do something like this in a long chain of \"stream\" operations.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    \"test1, test2, test3\".split(\", \")\n            .toCustomString(StringBuilder(), StringBuilder::append)\n}\n\nfun &lt;T, R&gt;Iterable&lt;T&gt;.toCustomString(obj: R, thing: R.(T) -&gt; Unit): R {\n    this.forEach {\n        obj.thing(it)\n    }\n    return obj\n}\n</code></pre>\n\n<p>But this doesn't work it says none of the functions found for <code>StringBuilder::append</code> can't be applied here. Is there a way I can make something like this work?</p>\n"}, {"tags": ["arrays", "swift", "kotlin", "immutability"], "comments": [{"owner": {"reputation": 69864, "user_id": 421018, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/e8lcr.jpg?s=128&g=1", "display_name": "Fogmeister", "link": "https://stackoverflow.com/users/421018/fogmeister"}, "edited": false, "score": 0, "creation_date": 1512905176, "post_id": 47738269, "comment_id": 82436868, "body": "FYI you can drop <code>self.</code> in most of this. You only need it for the init method."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1513011383, "post_id": 47738269, "comment_id": 82476516, "body": "Actually the best practice in Kotlin is to use two separate properties. The example in the accepted answer works, but it&#39;s not the recommended style."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512906095, "post_id": 47738442, "comment_id": 82437114, "body": "I&#39;d like to not have additional copy of the list"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 1, "creation_date": 1512907631, "post_id": 47738442, "comment_id": 82437534, "body": "I am curious because don&#39;t know Kotlin: Do those solutions really add an element to  the <code>cards</code> property, or just to a mutable copy?"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512908317, "post_id": 47738442, "comment_id": 82437723, "body": "@AndreaMugnaini - this seems better now. One more question - how can implement the constructor? It needs to take one argument <code>cards: List&lt;Card&gt;</code>"}, {"owner": {"reputation": 8840, "user_id": 2450755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwZ73.png?s=128&g=1", "display_name": "Andrea Mugnaini", "link": "https://stackoverflow.com/users/2450755/andrea-mugnaini"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1512908862, "post_id": 47738442, "comment_id": 82437888, "body": "@Martin R as far as I know solution1 is creating a copy of the array, instead solution2 should only expose the mutable state"}, {"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1512908986, "post_id": 47738442, "comment_id": 82437927, "body": "@AndreaMugnaini: But doesn&#39;t that mean that any user of the class can mutate the property using the same technique, thus bypassing the read-only restriction?"}, {"owner": {"reputation": 8840, "user_id": 2450755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwZ73.png?s=128&g=1", "display_name": "Andrea Mugnaini", "link": "https://stackoverflow.com/users/2450755/andrea-mugnaini"}, "reply_to_user": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1512909054, "post_id": 47738442, "comment_id": 82437947, "body": "@Martin R In theory yes"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512909396, "post_id": 47738442, "comment_id": 82438036, "body": "@AndreaMugnaini - what if the List in the constructor is not MutableList? Then the casting later will fail. I&#39;d guess that the constructor needs to take <code>cards: List&lt;Card&gt;</code> argument but create a mutable copy and assign it to the cards property. However if Deck is data class then how it should look like?"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512911489, "post_id": 47738442, "comment_id": 82438588, "body": "@AndreaMugnaini - if replace <code>var cards:List&lt;Card&gt; = listOf()</code> in main method than it crashes because of the cast in <code>add</code>. Need to copy the cards in the constructor to mutable list. However if make the class to be data class and it fails compiling. Do you have any idea if can fix this ?"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512912617, "post_id": 47738442, "comment_id": 82438901, "body": "@AndreaMugnaini - I&#39;d like to create a Deck with list of cards. The deck internally can modify itself but as API it should be able to be constructed with any collection of cards so there is no need this list to be mutable at all for the outside world"}, {"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 1, "creation_date": 1512912829, "post_id": 47738442, "comment_id": 82438947, "body": "FYI, Kotlin&#39;s collections are read-only but not immutable. Refers to: <a href=\"https://stackoverflow.com/questions/33727657/kotlin-and-immutable-collections\" title=\"kotlin and immutable collections\">stackoverflow.com/questions/33727657/&hellip;</a>"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512913201, "post_id": 47738442, "comment_id": 82439024, "body": "@AndreaMugnaini - this is what the client of Deck will decide. I&#39;d guess it can be listOf&lt;Card&gt;(Card(), Card(), ...). The Deck should not be aware of this. All the Deck want is this list of cards in the constructor and it should not matter if this list is mutable, immutable, readonly or whatever."}, {"owner": {"reputation": 8840, "user_id": 2450755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwZ73.png?s=128&g=1", "display_name": "Andrea Mugnaini", "link": "https://stackoverflow.com/users/2450755/andrea-mugnaini"}, "edited": false, "score": 0, "creation_date": 1512913407, "post_id": 47738442, "comment_id": 82439078, "body": "The fact is: doesn&#39;t exist the true &quot;immutability&quot;. You can choose between List which is readonly or MutableList which is mutable. So if you really want something immutable you might look at Guava (<a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">github.com/google/guava</a>)"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 0, "creation_date": 1512913858, "post_id": 47738442, "comment_id": 82439176, "body": "@AndreaMugnaini - let me rephrase my question. Do you know if it is possible in Kotlin to have a data class with primary constructor and property with the same name as the name of the primary constructor argument. And when the object is created to initialise the property using the argument in the constructor and some custom code?"}, {"owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "edited": false, "score": 1, "creation_date": 1512914528, "post_id": 47738442, "comment_id": 82439352, "body": "Let&#39;s say 99% satisfying. Thanks for the help."}], "tags": [], "owner": {"reputation": 8840, "user_id": 2450755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwZ73.png?s=128&g=1", "display_name": "Andrea Mugnaini", "link": "https://stackoverflow.com/users/2450755/andrea-mugnaini"}, "is_accepted": true, "score": 0, "last_activity_date": 1516864455, "last_edit_date": 1516864455, "creation_date": 1512905834, "answer_id": 47738442, "question_id": 47738269, "link": "https://stackoverflow.com/questions/47738269/swift-to-kotlin-manage-immutable-list/47738442#47738442", "title": "Swift to Kotlin, manage immutable list", "body": "<p>Since the read-only <code>List</code> is \"under the hood\" also a <a href=\"https://stackoverflow.com/a/37936456/2450755\">mutable list</a>, you may want to leverage on casting to a <code>MutableList</code>, doing so:</p>\n\n<pre><code>class Card {\n}\n\nclass Deck(cards:List&lt;Card&gt;){\n    var cards:List&lt;Card&gt;\n\n    init {\n       this.cards = cards\n    }\n\n    public fun add(card:Card) {\n      (cards as MutableList&lt;Card&gt;).add(card)\n   }\n}\n\nfun main(args: Array&lt;String&gt;) {    \n   var cards:List&lt;Card&gt; = arrayListOf()\n   // here I can't modify cards\n   var deck = Deck(cards)\n   deck.add(Card())\n   print(deck.cards.count()) // printing 1\n}\n</code></pre>\n\n<p>to be able to test it, copy and paste <a href=\"https://try.kotlinlang.org/#/Kotlin%20in%20Action/Chapter%201/1.1/1.1_ATasteOfKotlin.kt\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 611, "user_id": 2151732, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0115f5550479078a73146f77b185b1a3?s=128&d=identicon&r=PG", "display_name": "plamkata__", "link": "https://stackoverflow.com/users/2151732/plamkata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "accepted_answer_id": 47738442, "answer_count": 1, "score": 0, "last_activity_date": 1516868461, "creation_date": 1512904584, "last_edit_date": 1516868461, "question_id": 47738269, "link": "https://stackoverflow.com/questions/47738269/swift-to-kotlin-manage-immutable-list", "title": "Swift to Kotlin, manage immutable list", "body": "<p>I am trying to port an existing Swift code to Kotlin and I'd like to use best practice for the following Swift code:</p>\n\n<pre><code>struct Deck {\n\n    private(set) var cards: [Card]\n\n    var cardsCount: Int {\n        return self.cards.count\n    }\n\n    init(cards: [Card] = []) {\n        self.cards = cards\n    }\n\n    mutating func add(card: Card) {\n        self.cards.append(card)\n    }\n}\n</code></pre>\n\n<p>The design goals are:</p>\n\n<ol>\n<li><p><code>cards</code> property is not modifiable outside of the class so its type should be <code>List&lt;Card&gt;</code></p></li>\n<li><p><code>fun add(card: Card)</code> should modify the internal <code>cards</code> list</p></li>\n</ol>\n\n<p>Is there a way to achieve this in Kotlin without using two separate properties - one <code>private var mutableCards: MutableList&lt;Card&gt;</code> and one computed property <code>val cards: List&lt;Card&gt; get() = this.mutableCards</code></p>\n\n<p>I need some best practice for such situation.</p>\n"}, {"tags": ["android", "kotlin", "jwt"], "comments": [{"owner": {"reputation": 11400, "user_id": 3166417, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/i3rUx.jpg?s=128&g=1", "display_name": "itzhar", "link": "https://stackoverflow.com/users/3166417/itzhar"}, "edited": false, "score": 0, "creation_date": 1512908540, "post_id": 47738202, "comment_id": 82437779, "body": "that&#39;s not the way to make a request in our generation ;) use retrofit: <a href=\"http://square.github.io/retrofit/\" rel=\"nofollow noreferrer\">square.github.io/retrofit</a> it solved all you issues"}, {"owner": {"reputation": 1171, "user_id": 1384170, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2abd33e72e108169bde84b01290531a?s=128&d=identicon&r=PG", "display_name": "Moses Liao GZ", "link": "https://stackoverflow.com/users/1384170/moses-liao-gz"}, "reply_to_user": {"reputation": 11400, "user_id": 3166417, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/i3rUx.jpg?s=128&g=1", "display_name": "itzhar", "link": "https://stackoverflow.com/users/3166417/itzhar"}, "edited": false, "score": 0, "creation_date": 1512973649, "post_id": 47738202, "comment_id": 82455011, "body": "@itzhar how would you do it? I see the documentation there are no examples of using JWT"}, {"owner": {"reputation": 11400, "user_id": 3166417, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/i3rUx.jpg?s=128&g=1", "display_name": "itzhar", "link": "https://stackoverflow.com/users/3166417/itzhar"}, "edited": false, "score": 0, "creation_date": 1512973784, "post_id": 47738202, "comment_id": 82455059, "body": "Pass the JWT in some @Header"}], "answers": [{"tags": [], "owner": {"reputation": 4447, "user_id": 3050249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yz2yy.jpg?s=128&g=1", "display_name": "Miha_x64", "link": "https://stackoverflow.com/users/3050249/miha-x64"}, "is_accepted": true, "score": 1, "last_activity_date": 1512978900, "creation_date": 1512978900, "answer_id": 47748512, "question_id": 47738202, "link": "https://stackoverflow.com/questions/47738202/how-to-pass-jwt-token-from-one-activity-to-another/47748512#47748512", "title": "How to pass JWT token from one activity to another?", "body": "<h1>Straightly answering question</h1>\n\n<p>Put data into Intent with <a href=\"https://developer.android.com/reference/android/content/Intent.html#putExtra(java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">putExtra(\"token\", token)</a>.</p>\n\n<p>Take it on the other side with getIntent().<a href=\"https://developer.android.com/reference/android/content/Intent.html#getStringExtra(java.lang.String)\" rel=\"nofollow noreferrer\">getStringExtra(\"token\")</a>.</p>\n\n<h1>But...</h1>\n\n<p>You may want to save token persistently. For example, into SharedPreferences.</p>\n"}], "owner": {"reputation": 1171, "user_id": 1384170, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2abd33e72e108169bde84b01290531a?s=128&d=identicon&r=PG", "display_name": "Moses Liao GZ", "link": "https://stackoverflow.com/users/1384170/moses-liao-gz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 47748512, "answer_count": 1, "score": 1, "last_activity_date": 1512978900, "creation_date": 1512904144, "question_id": 47738202, "link": "https://stackoverflow.com/questions/47738202/how-to-pass-jwt-token-from-one-activity-to-another", "title": "How to pass JWT token from one activity to another?", "body": "<p>I have the following onCreate class in MainActivity and proven to be able to work with my server. It is able to extract out the JWT token</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    setSupportActionBar(toolbar)\n    submitButton = findViewById&lt;Button&gt;(R.id.btn_submit)\n\n    // Volley code is here\n    val url = \"http://192.168.1.8:4000\"\n\n    submitButton.setOnClickListener({\n        val pinCode = pin_code.text.toString()\n        queue = Volley.newRequestQueue(this)\n        val params = HashMap&lt;String, String&gt;()\n        params.put(\"pin_code\", pinCode)\n        val request = object : JsonObjectRequest(Request.Method.POST, url + \"/api/employees/token\", JSONObject(params),\n                Response.Listener&lt;JSONObject&gt; { response -&gt;\n                    val token = response\n                            .getJSONObject(\"data\")\n                            .getString(\"token\")\n\n                    val myIntent = Intent(this, SiteActivity::class.java)\n                    startActivityForResult(myIntent, 0)\n                },\n                Response.ErrorListener {\n                    Toast.makeText(this, \"That didn't work!\", Toast.LENGTH_SHORT).show()\n                }){\n            @Throws(AuthFailureError::class)\n            override fun getHeaders(): MutableMap&lt;String, String&gt; {\n                val headers = HashMap&lt;String, String&gt;()\n                headers.put(\"Accept\", \"application/json\")\n                headers.put(\"Content-Type\", \"application/json; charset=utf-8\")\n                return headers\n            }\n        }\n        queue.add(request)\n        queue.start()\n    })\n}\n</code></pre>\n\n<p>Unfortunately I have not figured out a way to add the JWT token into the authorized bearer Header for the next SiteActivity. Any suggestion how to make this work? Should I pass the token directly to the next activity or should I use a singleton? Thanks!</p>\n"}, {"tags": ["java", "annotations", "jvm", "kotlin", "throws"], "comments": [{"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1512903572, "post_id": 47737623, "comment_id": 82436450, "body": "Try to implement a getter or setter actually throwing this exception. If your code is safe, you do not have to redeclare the <code>throws</code> declarations of what you override. Maybe <i>Kotlin</i> is just clever with its <code>@Throws</code> annotation."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1512904000, "post_id": 47737623, "comment_id": 82436564, "body": "@tynn I will edit my question."}], "answers": [{"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512982016, "post_id": 47748693, "comment_id": 82458354, "body": "No, I addressed both parts in my question, putting <code>@Throws</code> directly onto <i>any</i> getter, even if it does not throw, adds a <code>throws</code> clause. Putting <code>@get:Throws</code> onto <i>any</i> property (even if it <i>does</i> throw) has no effect. If I do as you suggest and put <code>val string: String @Throws(IOException::class) get() = &quot;Foo&quot;</code>, &quot;the compiler is smart enough to see that there&#39;s nothing in the getter that would throw an IOException&quot; is impossible, because a throws clause is still generated."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 1, "creation_date": 1513006979, "post_id": 47748693, "comment_id": 82473738, "body": "Ooh, I had forgotten about that possibility. I agree that it seems like the use-site annotation should work, I&#39;ll do that when I can. Thanks!"}], "tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": true, "score": 2, "last_activity_date": 1513003432, "last_edit_date": 1513003432, "creation_date": 1512979734, "answer_id": 47748693, "question_id": 47737623, "link": "https://stackoverflow.com/questions/47737623/throws-has-no-effect-when-the-target-is-a-property/47748693#47748693", "title": "@Throws has no effect when the target is a property", "body": "<p>I believe @tynn suggests you do the following:</p>\n\n<pre><code>override val string: String\n        @Throws(FileNotFoundException::class) get() = BufferedReader(FileReader(\"file.txt\")).readText()\n</code></pre>\n\n<p>This should give you the proper Java version with <code>throws</code> in the signature. I guess the reasoning is that if you just do this:</p>\n\n<pre><code>@get:Throws(IOException::class)\nval foo: String = \"foo\"\n</code></pre>\n\n<p>the compiler is smart enough to see that there's nothing in the getter that would throw an <code>IOException</code>, since you've never overridden it, so it won't produce the <code>throws</code> section. When the getter is overridden, the compiler has no way to know if the code you've supplied can throw, so it obeys the annotation and will always output the <code>throws</code> part.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The following seems to generate correct bytecode:</p>\n\n<pre><code>abstract class KotlinAbstractClass {\n\n    abstract var string: String\n        @Throws(IOException::class) get\n        @Throws(IOException::class) set\n}\n</code></pre>\n\n<p>After taking a closer look at it, I see no reason for <code>@get:Throws(IOException::class)</code> not to work in this case. You might file an issue on the YouTrack for Kotlin and see what the team members have to say about it.</p>\n"}], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 47748693, "answer_count": 1, "score": 4, "last_activity_date": 1513003432, "creation_date": 1512899213, "last_edit_date": 1512904196, "question_id": 47737623, "link": "https://stackoverflow.com/questions/47737623/throws-has-no-effect-when-the-target-is-a-property", "title": "@Throws has no effect when the target is a property", "body": "<p>While taking a look at <a href=\"https://stackoverflow.com/q/47737288/7366707\">this question</a>, I noticed that applying <code>@Throws</code> to a <code>get</code> or <code>set</code> use-site has no effect.</p>\n\n<p>Additionally, <em>the only valid targets</em> for <code>@Throws</code> are <code>AnnotationTarget.FUNCTION</code>, <code>AnnotationTarget.PROPERTY_GETTER</code>, <code>AnnotationTarget.PROPERTY_SETTER</code>, and <code>AnnotationTarget.CONSTRUCTOR</code>.</p>\n\n<p>Other annotations, such as the JPA annotations and <code>Deprecated</code> work fine and are properly applied to the method!</p>\n\n<p>This is strange behavior.</p>\n\n<p>To demonstrate, I created a simple abstract class in Java, with one constructor, one method and one get method.</p>\n\n<pre><code>public abstract class JavaAbstractClass {\n\n    @Deprecated\n    @NotNull public abstract String getString() throws IOException;\n    public abstract void setString(@NotNull String string) throws IOException;\n\n    public abstract void throwsFunction() throws IOException;\n\n    public JavaAbstractClass() throws IOException {\n    }\n\n}\n</code></pre>\n\n<p>As you can see, every method/constructor is marked as throwing <code>IOException</code>.</p>\n\n<p>However, when I try to write an equivalent class in Kotlin, and mark the appropriate methods with <code>throws</code> for interop, the generated <code>getString</code> and <code>setString</code> methods have no <code>throws</code> clause.</p>\n\n<pre><code>abstract class KotlinAbstractClass @Throws(IOException::class) constructor() {\n\n    @get:Deprecated(\"Deprecated\")\n    @get:Throws(IOException::class)\n    @set:Throws(IOException::class)\n    abstract var string: String\n\n    @Throws(IOException::class)\n    abstract fun throwsFunction()\n\n}\n</code></pre>\n\n<p>The decompiled code:</p>\n\n<pre><code>@Metadata(Some metadata here)\npublic abstract class KotlinAbstractClass {\n   /** @deprecated */\n   @Deprecated(\n      message = \"Deprecated\"\n   ) // @Deprecated made it through!\n   @NotNull\n   public abstract String getString(); // Nothing here!\n\n   public abstract void setString(@NotNull String var1); // Nothing here!\n\n   public abstract void throwsFunction() throws IOException;\n\n   public KotlinAbstractClass() throws IOException {\n   }\n}\n</code></pre>\n\n<p>To me, it seems to be because these internal annotations must be handled specially by the compiler, instead of being applied directly to the method.</p>\n\n<p>Additionally, applying it to the getter of a non-abstract property:</p>\n\n<pre><code>val string: String\n@Throws(IOException::class) get() = \"Foo\"\n</code></pre>\n\n<p><em>does</em> generate a method with the signature <code>public final String getString() throws IOException</code>!</p>\n\n<p>Perhaps this case wasn't handled properly?</p>\n\n<p>Is this a bug?</p>\n\n<hr>\n\n<p>Note: This doesn't have anything to do with whether the method actually throws this exception.</p>\n\n<p>If I do:</p>\n\n<pre><code>@get:Throws(IOException::class)\nval string: String\n    get() = BufferedReader(FileReader(\"file.txt\")).readText()\n</code></pre>\n\n<p>The compiled code is still</p>\n\n<pre><code>@NotNull\npublic final String getString() {\n    return TextStreamsKt.readText((Reader)(new BufferedReader((Reader)(new FileReader(\"file.txt\")))));\n}\n</code></pre>\n\n<p>despite the fact that the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html#FileReader(java.io.File)\" rel=\"nofollow noreferrer\"><code>FileReader</code> constructor</a> throws a <code>FileNotFoundException</code>.</p>\n\n<p>Additionally, this shouldn't matter for abstract methods anyway, as they can't have an implementation and still can have a <code>throws</code> clause.</p>\n\n<p>If I do as <a href=\"https://stackoverflow.com/users/3385212/tynn\">@tynn</a> suggests and add a concrete implementation:</p>\n\n<pre><code>class ConcreteClass : KotlinAbstractClass() {\n\n    override val string: String\n        get() = BufferedReader(FileReader(\"file.txt\")).readText()\n\n    ...\n\n}\n</code></pre>\n\n<p>I still get the same result.</p>\n"}, {"tags": ["kotlin", "dagger-2"], "answers": [{"tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": true, "score": 1, "last_activity_date": 1512908165, "creation_date": 1512908165, "answer_id": 47738729, "question_id": 47737337, "link": "https://stackoverflow.com/questions/47737337/dagger-classes-showing-up-as-red-but-still-builds/47738729#47738729", "title": "Dagger Classes showing up as red but still builds", "body": "<p>I think that there's an issue with the configured folders in Android Studio. In particular, in your <code>build.gradle</code> file you should have something like this (I used it in my IntelliJ Idea projects, but it should work also in Android Studio):</p>\n\n<pre><code>// Configure Dagger generated files\nideaModule.module.generatedSourceDirs += file(\"$buildDir/generated/source/kapt/main\")\n</code></pre>\n\n<p>In this way, you are telling your IDE to mark as \"generated sources\", the source files under that folder (which is where Kapt puts generated files like your <code>DaggerMainComponent</code>)</p>\n"}], "owner": {"reputation": 4388, "user_id": 369313, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/66XP0.jpg?s=128&g=1", "display_name": "Burf2000", "link": "https://stackoverflow.com/users/369313/burf2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 47738729, "answer_count": 1, "score": 0, "last_activity_date": 1512908165, "creation_date": 1512896520, "question_id": 47737337, "link": "https://stackoverflow.com/questions/47737337/dagger-classes-showing-up-as-red-but-still-builds", "title": "Dagger Classes showing up as red but still builds", "body": "<p>I am new to Dagger2 and I am trying to use it in my Kotlin project (1.1.51).  I followed a few tutorials and all is good.</p>\n\n<p>I have these in my gradle file and I am using Android Studio 3.01, I have to use gradle-3.3</p>\n\n<pre><code>apply plugin: 'kotlin'\napply plugin: 'kotlin-allopen'\napply plugin: 'kotlin-kapt'\n\n compile 'com.google.dagger:dagger:2.11'\n kapt 'com.google.dagger:dagger-compiler:2.11'\n\nkapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>I can successfully run my project and Dagger2 seems to be working.  The only annoying issue is that the Dagger created classes always come up as red on the import list. e.g DaggerMainComponent.</p>\n\n<p>import com.burfdevelopment.hack24.Dagger.MainComponent\nimport com.burfdevelopment.hack24.Dagger.MainModule\nimport com.burfdevelopment.hack24.Dagger.<strong>DaggerMainComponent</strong></p>\n\n<p>So if do a code tidy which removes unused imports it always removes it even though its being used. If I click on the DaggerMainComponent, it does go to the generated class.</p>\n"}, {"tags": ["java", "kotlin", "rmi"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1512901788, "post_id": 47737288, "comment_id": 82435962, "body": "Prefer functions over properties when the method throws."}, {"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 1, "creation_date": 1512902154, "post_id": 47737288, "comment_id": 82436046, "body": "<a href=\"https://github.com/JetBrains/kotlin-web-site/blob/yole/styleguide/pages/docs/reference/coding-conventions.md#functions-vs-properties\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin-web-site/blob/yole/styleguide/pa&zwnj;&#8203;ges/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1512898162, "post_id": 47737378, "comment_id": 82435161, "body": "So, how should the interface be written?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1512898207, "post_id": 47737378, "comment_id": 82435170, "body": "<code>@get:Throws(exception types)</code> should annotate the property"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1512898312, "post_id": 47737378, "comment_id": 82435189, "body": "1. Why don&#39;t you write the complete code in your answer? Note though that it doesn&#39;t seem to work here: If I do that and try calling Foo.getBar() from Java code, the compiler doesn&#39;t force me to handle RemoteException."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1512898417, "post_id": 47737378, "comment_id": 82435208, "body": "@JBNizet I am aware of this and believe this is could be a bug. The <code>get</code> target is clearly the getter method, and yet strangely no throws clause is generated. All other targets work (<code>FUNCTION</code>, <code>CONSTRUCTOR</code>), I tried it myself and am trying to take a closer look at this."}], "tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 4, "last_activity_date": 1512899817, "last_edit_date": 1512899817, "creation_date": 1512896993, "answer_id": 47737378, "question_id": 47737288, "link": "https://stackoverflow.com/questions/47737288/how-to-specify-throws-for-a-property-in-interface/47737378#47737378", "title": "How to specify @Throws for a property in interface", "body": "<p>Well, if you look at <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-throws/index.html\" rel=\"nofollow noreferrer\"><code>@Throws</code></a>:</p>\n\n<p>If there is a specific getter that does not use the backing field, simply annotate it directly:</p>\n\n<pre><code>val bar: Bar\n    @Throws(RemoteException::class) get() = doSomething()\n</code></pre>\n\n<p>The valid targets for <code>@Throws</code> are</p>\n\n<pre><code>AnnotationTarget.FUNCTION,\nAnnotationTarget.PROPERTY_GETTER,\nAnnotationTarget.PROPERTY_SETTER,\nAnnotationTarget.CONSTRUCTOR\n</code></pre>\n\n<p>So in other cases, you need to target the getter itself and not the property:</p>\n\n<pre><code>@get:Throws(RemoteException::class)\n</code></pre>\n\n<blockquote>\n  <p><a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">The full list of supported use-site targets</a> is:</p>\n  \n  <ul>\n  <li>file;</li>\n  <li>property (annotations with this target are not visible to Java);</li>\n  <li>field;</li>\n  <li>get (property getter);</li>\n  <li>set (property setter);</li>\n  <li>receiver (receiver parameter of an extension function or property);</li>\n  <li>param (constructor parameter);</li>\n  <li>setparam (property setter parameter);</li>\n  <li>delegate (the field storing the delegate instance for a delegated property).</li>\n  </ul>\n</blockquote>\n\n<p><code>@get</code> specifies that this annotation will be applied to the getter.</p>\n\n<p>Your full interface would be</p>\n\n<pre><code>interface Foo: Remote {\n    @get:Throws(RemoteException::class)\n    val bar: Bar\n}\n</code></pre>\n\n<p>Here's a problem though - in the generated code, there <em>is</em> no <code>throws</code> clause generated. I feel like this may be a bug, as the annotation is clearly marked as targeting these four use-sites. <code>CONSTRUCTOR</code> and <code>FUNCTION</code> definitely work, it's just the property ones that have none generated.</p>\n\n<hr>\n\n<p>I took a look at the Kotlin compiler trying to find a possible reason, and I found <a href=\"https://github.com/JetBrains/kotlin/blob/25d2cc02794dce8b8a18f809b2f566830ba63943/compiler/daemon/daemon-common/src/org/jetbrains/kotlin/daemon/common/ReplStateFacade.kt\" rel=\"nofollow noreferrer\">this</a>:</p>\n\n<pre><code>interface ReplStateFacade : Remote {\n\n    @Throws(RemoteException::class)\n    fun getId(): Int\n\n    ...\n}\n</code></pre>\n\n<p>Which interestingly avoids properties in order to use <code>@Throws</code>.\nMaybe this is a known workaround?</p>\n"}], "owner": {"reputation": 2371, "user_id": 4140668, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/50c0905a6e33a9fa6f7e050c09ed1277?s=128&d=identicon&r=PG", "display_name": "lz96", "link": "https://stackoverflow.com/users/4140668/lz96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 0, "accepted_answer_id": 47737378, "answer_count": 1, "score": 2, "last_activity_date": 1512899817, "creation_date": 1512896042, "question_id": 47737288, "link": "https://stackoverflow.com/questions/47737288/how-to-specify-throws-for-a-property-in-interface", "title": "How to specify @Throws for a property in interface", "body": "<p>I am currently porting some Java RMI code to Kotlin. The legacy interface in Java is:</p>\n\n<pre><code>interface Foo: Remote {\n    Bar getBar() throws RemoteException\n}\n</code></pre>\n\n<p>After running the auto-migration tool, the field <code>bar</code> is changed into a property:</p>\n\n<pre><code>interface Foo: Remote {\n    val bar: Bar\n}\n</code></pre>\n\n<p>However, in the migrated program, <code>getBar</code> is no longer marked as <code>throws RemoteException</code>, which causes <code>illegal remote method encountered</code> error in a RMI call.</p>\n\n<p>I was wondering is there any way to mark <code>@Throws</code> for a property?</p>\n"}, {"tags": ["android", "html", "webview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2279, "user_id": 3451344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqk5E.jpg?s=128&g=1", "display_name": "Sangeet Suresh", "link": "https://stackoverflow.com/users/3451344/sangeet-suresh"}, "is_accepted": false, "score": -1, "last_activity_date": 1512891004, "creation_date": 1512891004, "answer_id": 47736796, "question_id": 47736431, "link": "https://stackoverflow.com/questions/47736431/android-webview-with-kotlin-not-working-input-type-file/47736796#47736796", "title": "Android webview with kotlin. not working input type=file", "body": "<p>You could get answer from below link </p>\n\n<p><a href=\"https://stackoverflow.com/questions/5907369/file-upload-in-webview\">File Upload in WebView</a></p>\n\n<p>Then you can convert java code to kotlin by yourself or using android studio.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 2971381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a224b0c6fcc4c021afb7a5e66adaf75?s=128&d=identicon&r=PG", "display_name": "R kanojia", "link": "https://stackoverflow.com/users/2971381/r-kanojia"}, "is_accepted": false, "score": -1, "last_activity_date": 1572926728, "last_edit_date": 1572926728, "creation_date": 1528170798, "answer_id": 50691743, "question_id": 47736431, "link": "https://stackoverflow.com/questions/47736431/android-webview-with-kotlin-not-working-input-type-file/50691743#50691743", "title": "Android webview with kotlin. not working input type=file", "body": "<p>Try this code its working for me</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    private val url = \"http://tutorial.eyehunts.com/\"\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // Get the web view settings instance\n        val setting = webview.settings;\n\n        // Enable java script in web view\n        setting.javaScriptEnabled = true\n\n        webview.loadUrl(url)\n\n    }\n}\n</code></pre>\n\n<p>screenshot\n<a href=\"https://i.stack.imgur.com/U1Rgs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U1Rgs.png\" alt=\"webview in android - kotlin\"></a></p>\n\n<p>check this : <a href=\"http://tutorial.eyehunt.in/android/android-webview-app-example-in-kotlin/\" rel=\"nofollow noreferrer\">Android WebView app Example in Kotlin</a></p>\n"}], "owner": {"reputation": 197, "user_id": 6433808, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-Aj9BD9CYEv4/AAAAAAAAAAI/AAAAAAABQUw/V954hpYA8oA/photo.jpg?sz=128", "display_name": "rluisr", "link": "https://stackoverflow.com/users/6433808/rluisr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3787, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1572926728, "creation_date": 1512886756, "question_id": 47736431, "link": "https://stackoverflow.com/questions/47736431/android-webview-with-kotlin-not-working-input-type-file", "title": "Android webview with kotlin. not working input type=file", "body": "<p>I want to show my web site as android app.\nIn my code, doesn't work <code>input type=file</code></p>\n\n<p>I googled \"android webview input type file not working\".<br>\nBut only java solution. I want to solve this problem with kotlin.</p>\n\n<p>Anyone has know how to solve this problem?</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    loadWebpage()\n}\n\n@Throws(UnsupportedOperationException::class)\nfun buildUrl(authority: String) : Uri {\n    val builder = Uri.Builder()\n    builder.scheme(\"https\")\n            .authority(authority)\n    return builder.build()\n}\n\nfun loadWebpage() {\n  try {\n        val url = buildUrl(\"uploader.xzy.pw\")\n        webview.loadUrl(url.toString())\n    } catch(e: UnsupportedOperationException) {\n        e.printStackTrace()\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5563565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3675bf938408bbba9eb629aec05448f?s=128&d=identicon&r=PG&f=1", "display_name": "KingSpnk", "link": "https://stackoverflow.com/users/5563565/kingspnk"}, "edited": false, "score": 0, "creation_date": 1512920180, "post_id": 47736515, "comment_id": 82440968, "body": "Thanks for leading me to the right resolution Alexey! I tried Optional.ofNullable and it said it couldn&#39;t be resolved. Then I tried Optional.fromNullable and it worked perfectly."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 13, "user_id": 5563565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3675bf938408bbba9eb629aec05448f?s=128&d=identicon&r=PG&f=1", "display_name": "KingSpnk", "link": "https://stackoverflow.com/users/5563565/kingspnk"}, "edited": false, "score": 0, "creation_date": 1512942050, "post_id": 47736515, "comment_id": 82447631, "body": "Oops, you are using the Guava Optional, not the standard Java 8. Didn&#39;t spot that."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1512887751, "creation_date": 1512887751, "answer_id": 47736515, "question_id": 47736411, "link": "https://stackoverflow.com/questions/47736411/expected-type-does-not-accept-nulls-in-java-but-the-value-may-be-null-in-kotlin/47736515#47736515", "title": "Expected type does not accept nulls in Java, but the value may be null in Kotlin", "body": "<p><code>Optional.of</code> doesn't accept <code>null</code> (it'll throw an exception if it gets one), but use of <code>?.</code> means <code>submission</code> can be <code>null</code>. Use <code>Optional.ofNullable</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 1264, "user_id": 7813290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcbe552141510b2f519018d4cf1a5ae4?s=128&d=identicon&r=PG&f=1", "display_name": "Jamin", "link": "https://stackoverflow.com/users/7813290/jamin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512978981, "last_edit_date": 1512978981, "creation_date": 1512889290, "answer_id": 47736648, "question_id": 47736411, "link": "https://stackoverflow.com/questions/47736411/expected-type-does-not-accept-nulls-in-java-but-the-value-may-be-null-in-kotlin/47736648#47736648", "title": "Expected type does not accept nulls in Java, but the value may be null in Kotlin", "body": "<p>Use <code>?</code> next to the variable datatype to allow it to accept a null value.  Have an <code>if</code> statement within the <code>getCachedSubmission</code> function (which also has <code>?</code>) to control the flow of information if the variable is <code>null</code>.</p>\n\n<p>In this example, I create a <code>argument</code> variable of type <code>String?</code> to allow it to later be changed to null.  In the try/catch block (which I put as extra layer of exception handling just in case) I pass an argument to <code>getCachedSubmission</code>, and within the function the information is handled to change what is displayed if the argument passed is <code>null</code>.</p>\n\n<p>To see what happens when the argument passed is <code>null</code> uncomment the <code>argument = null;</code> line of code.</p>\n\n<pre><code>var argument: String? = \"abc\"; \nfun main(args: Array&lt;String&gt;) {\n    try\n    {\n        //uncomment me below\n        //argument = null;\n        argument = getCachedSubmission(argument);\n        println(argument);\n    }\n    catch(e: Exception)\n    {\n        //Some sort of exception encountered\n        println(\"do nothing\");\n    }\n\n}\nfun getCachedSubmission(parameter: String?): String\n{\n    var flow = \"normal\";\n    println(parameter);\n    if(parameter == null)\n    {\n        flow = \"not normal\"\n        return flow;\n    }\n\n    return flow;\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 13, "user_id": 5563565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3675bf938408bbba9eb629aec05448f?s=128&d=identicon&r=PG&f=1", "display_name": "KingSpnk", "link": "https://stackoverflow.com/users/5563565/kingspnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 0, "accepted_answer_id": 47736515, "answer_count": 2, "score": 1, "last_activity_date": 1512978981, "creation_date": 1512886507, "question_id": 47736411, "link": "https://stackoverflow.com/questions/47736411/expected-type-does-not-accept-nulls-in-java-but-the-value-may-be-null-in-kotlin", "title": "Expected type does not accept nulls in Java, but the value may be null in Kotlin", "body": "<p>I am building a sports app and ran into a problem during compilation. The submission variable inside the getCachedSubmission function is null and seems to require a null handle, but I'm not sure. This is the code below:</p>\n\n<pre><code>import com.bluebeam.premierleaguego.features.model.SubmissionWrapper\nimport com.bluebeam.premierleaguego.data.reddit.RedditAuthentication\nimport com.bluebeam.premierleaguego.data.service.RedditService\nimport com.google.common.base.Optional\nimport io.reactivex.Single\nimport net.dean.jraw.models.CommentSort\nimport net.dean.jraw.models.Submission\nimport java.util.*\nimport javax.inject.Inject\nimport javax.inject.Singleton\nimport javax.annotation.Nullable\n\n/**\n * Implementation of the [SubmissionRepository] interface. Stores [SubmissionWrapper]s in a map\n * keyed by their id.\n * TODO: should there be a limit to how many submissions are cached?\n */\n@Singleton\nclass SubmissionRepositoryImpl\n@Inject constructor(\n    val redditAuthentication: RedditAuthentication,\n    val redditService: RedditService) : SubmissionRepository {\n  private val idToSubmissionMap = HashMap&lt;String, SubmissionWrapper&gt;()\n\n  override fun getSubmission(\n      id: String,\n      sort: CommentSort,\n      forceReload: Boolean): Single&lt;SubmissionWrapper&gt; {\n    // Use submission in cache if available and has the right comment sorting.\n    if (!forceReload &amp;&amp; idToSubmissionMap[id] != null &amp;&amp; idToSubmissionMap[id]?.sort == sort) {\n      return Single.just(idToSubmissionMap[id])\n    }\n    return redditService.getSubmission(redditAuthentication.redditClient, id, sort)\n        .flatMap { s: Submission -&gt;\n          val wrapper = SubmissionWrapper(s)\n          wrapper.sort = sort\n          idToSubmissionMap[wrapper.id] = wrapper\n          Single.just(wrapper)\n        }\n  }\n\n\n  override fun getCachedSubmission(id: String): Optional&lt;Submission&gt; {\n    val submission = idToSubmissionMap[id]?.submission\n    return Optional.of(submission)\n  }\n\n\n  override fun saveSubmission(submissionWrapper: SubmissionWrapper) {\n    idToSubmissionMap[submissionWrapper.id] = submissionWrapper\n  }\n\n  override fun reset() = idToSubmissionMap.clear()\n}\n</code></pre>\n\n<p>The error that I continue to get from the getCachedSubmission function is:\nExpected type does not accept nulls in Java, but the value may be null in Kotlin. If there are any suggestions on how to resolve this that would be helpful. Thanks!</p>\n"}, {"tags": ["kotlin", "kotlin-android-extensions", "kotlin-extension"], "comments": [{"owner": {"reputation": 5492, "user_id": 8343333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e781624e6d5d0676c54e73ad6227f?s=128&d=identicon&r=PG", "display_name": "BakaWaii", "link": "https://stackoverflow.com/users/8343333/bakawaii"}, "edited": false, "score": 0, "creation_date": 1512878783, "post_id": 47735750, "comment_id": 82431957, "body": "Related: <a href=\"https://stackoverflow.com/questions/47588670/what-is-the-purpose-of-empty-class-in-kotlin\" title=\"what is the purpose of empty class in kotlin\">stackoverflow.com/questions/47588670/&hellip;</a>"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1512994822, "post_id": 47735750, "comment_id": 82465997, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47588670/what-is-the-purpose-of-empty-class-in-kotlin\">What is the purpose of empty class in Kotlin?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4769, "user_id": 2722870, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d32c53a4179206fb284e383dd67af4a3?s=128&d=identicon&r=PG&f=1", "display_name": "ThanosFisherman", "link": "https://stackoverflow.com/users/2722870/thanosfisherman"}, "edited": false, "score": 0, "creation_date": 1521628159, "post_id": 47736498, "comment_id": 85808663, "body": "How can you find out that <code>firstMethod</code> is declared inside <code>Example.kt</code> file?"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 2, "last_activity_date": 1512887519, "creation_date": 1512887519, "answer_id": 47736498, "question_id": 47735750, "link": "https://stackoverflow.com/questions/47735750/kotlin-classes-without-curly-braces/47736498#47736498", "title": "Kotlin classes without curly braces", "body": "<p>Empty classes have been discussed in <a href=\"https://stackoverflow.com/questions/47588670/what-is-the-purpose-of-empty-class-in-kotlin\">What is the purpose of empty class in Kotlin?</a> already.</p>\n\n<p>Regarding your <code>firstMethod</code>: in Kotlin, we have so called top-level functions. These can be defined in any file without an enclosing class. Another example for this is <code>main</code> which is defined top-level in most cases.</p>\n\n<p><strong>How to call top-level functions?</strong></p>\n\n<p>You can simply import the function into other files and call them. For instance, if <code>firstMethod</code> were defined in <code>com/x/Example.kt</code> (package com.x), you may import <code>com.x.firstMethod</code> in other Kotlin files and call that method. </p>\n\n<p>For Java, it\u2019s important to know, that top-level functions are compiled into a class as <code>static</code> members. As for the example above, you can call <code>com.x.ExampleKt.firstMethod</code> from Java.</p>\n"}], "owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1473, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512994760, "creation_date": 1512878678, "last_edit_date": 1512994760, "question_id": 47735750, "link": "https://stackoverflow.com/questions/47735750/kotlin-classes-without-curly-braces", "title": "Kotlin classes without curly braces", "body": "<p>I have noticed that we can create classes in Kotlin without curly braces like below.</p>\n\n<pre><code>//Example classFile.kt\nclass Empty\n\nclass SecondEmpty\n\nfun firstMethod() {\n\n}\n</code></pre>\n\n<p>My question is, why we need such feature? in which situation we can use this? </p>\n\n<p>In the above example, I have written a method called <code>firstMethod()</code> how can I call that from the other objects?</p>\n"}, {"tags": ["kotlin", "rx-java", "rx-kotlin"], "comments": [{"owner": {"reputation": 8840, "user_id": 2450755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwZ73.png?s=128&g=1", "display_name": "Andrea Mugnaini", "link": "https://stackoverflow.com/users/2450755/andrea-mugnaini"}, "edited": false, "score": 2, "creation_date": 1512880434, "post_id": 47735111, "comment_id": 82432172, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47595813/rxkotlin-groupby-is-not-working\">rxkotlin groupby is not working</a>"}, {"owner": {"reputation": 3278, "user_id": 3282461, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/v6pSx.png?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/3282461/ankit-kumar"}, "edited": false, "score": 0, "creation_date": 1513070821, "post_id": 47735111, "comment_id": 82499313, "body": "Show your code what you have done so far?"}], "answers": [{"tags": [], "owner": {"reputation": 3278, "user_id": 3282461, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/v6pSx.png?s=128&g=1", "display_name": "Ankit Kumar", "link": "https://stackoverflow.com/users/3282461/ankit-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1513755193, "creation_date": 1513755193, "answer_id": 47900911, "question_id": 47735111, "link": "https://stackoverflow.com/questions/47735111/i-cant-get-map-from-groupby-in-rxkotlin/47900911#47900911", "title": "I can&#39;t get map from groupby in rxkotlin", "body": "<pre><code>doAsync { val groupedTransactions = accountTransactions.transactions ?.groupBy { it.effectiveDate } ....\n</code></pre>\n\n<p>Try this</p>\n"}], "owner": {"reputation": 33, "user_id": 1820178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88136b5c3a1c9931bcc289e35e96778?s=128&d=identicon&r=PG", "display_name": "user1820178", "link": "https://stackoverflow.com/users/1820178/user1820178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 47900911, "answer_count": 1, "score": -3, "last_activity_date": 1513755193, "creation_date": 1512870839, "question_id": 47735111, "link": "https://stackoverflow.com/questions/47735111/i-cant-get-map-from-groupby-in-rxkotlin", "title": "I can&#39;t get map from groupby in rxkotlin", "body": "<p>could you please help me for this <a href=\"https://stackoverflow.com/questions/47595813/rxkotlin-groupby-is-not-working\">rxkotlin groupby is not working</a>? working in rxjava but not kotlin. highly apreciate your help</p>\n"}, {"tags": ["java", "exception", "exception-handling", "kotlin"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 5, "creation_date": 1512858714, "post_id": 47733803, "comment_id": 82428361, "body": "<a href=\"https://kotlinlang.org/docs/reference/exceptions.html#checked-exceptions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512891531, "post_id": 47733803, "comment_id": 82433970, "body": "Kotlin has no checked exceptions, as in C# and other languages"}, {"owner": {"reputation": 768, "user_id": 882813, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e49c05b5c0bf93ef572175bcae5c84e8?s=128&d=identicon&r=PG", "display_name": "user882813", "link": "https://stackoverflow.com/users/882813/user882813"}, "edited": false, "score": 1, "creation_date": 1512905382, "post_id": 47733803, "comment_id": 82436920, "body": "The aim of Kotlin creators is to make <i>popular</i> language. So they add a bunch of syntactical sugar and sacrifice everything that can confuse beginner. And checked exceptions often annoys beginners That&#39;s why."}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512961039, "post_id": 47733803, "comment_id": 82451736, "body": "Kotlin tries to get rid of boilerplate code whenever possible"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 9077942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2096ab932df95c2d69af390a8ec6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Nour Eldin Ahmed", "link": "https://stackoverflow.com/users/9077942/nour-eldin-ahmed"}, "edited": false, "score": 1, "creation_date": 1512895080, "post_id": 47734017, "comment_id": 82434621, "body": "So what would be the appropriate way to handle those exceptions if i didn&#39;t know that they will occur in advance?"}, {"owner": {"reputation": 2497, "user_id": 4280615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/vNe8H.png?s=128&g=1", "display_name": "Nate Vaughan", "link": "https://stackoverflow.com/users/4280615/nate-vaughan"}, "reply_to_user": {"reputation": 193, "user_id": 9077942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2096ab932df95c2d69af390a8ec6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Nour Eldin Ahmed", "link": "https://stackoverflow.com/users/9077942/nour-eldin-ahmed"}, "edited": false, "score": 1, "creation_date": 1512921310, "post_id": 47734017, "comment_id": 82441283, "body": "In the case of Java classes used in Kotlin, you can simply check the interface method signature or Javadoc. There may be some exceptions that you want to recover from and others that you want to let kill your thread. As mentioned above, <code>FileOutputStream(File(&quot;path&quot;)).use{ ... }</code> is most likely what you are looking for."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 1, "creation_date": 1521193239, "post_id": 47734017, "comment_id": 85635960, "body": "@NateVaughan If it&#39;s a Kotlin interface, it won&#39;t have any exceptions declared. And what if there is no Javadoc or it&#39;s incomplete?"}, {"owner": {"reputation": 2497, "user_id": 4280615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/vNe8H.png?s=128&g=1", "display_name": "Nate Vaughan", "link": "https://stackoverflow.com/users/4280615/nate-vaughan"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 0, "creation_date": 1542388309, "post_id": 47734017, "comment_id": 93563836, "body": "@Malcolm If you really don\u2019t trust the code, or know what exceptions it throws, you will handle any exceptions the same way you handle runtime exceptions: using catch(Exception e)"}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 3, "creation_date": 1542492647, "post_id": 47734017, "comment_id": 93589599, "body": "@NateVaughan Then how am I supposed to recover from them if I don&#39;t know which ones I can get? This is so-called Pokemon exception handling (catch-em-all). Catch any and very helpfully say to the user that something is wrong, but I don&#39;t know what? That&#39;s precisely the problem with exceptions in Kotlin."}, {"owner": {"reputation": 2497, "user_id": 4280615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/vNe8H.png?s=128&g=1", "display_name": "Nate Vaughan", "link": "https://stackoverflow.com/users/4280615/nate-vaughan"}, "reply_to_user": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 1, "creation_date": 1542555228, "post_id": 47734017, "comment_id": 93601679, "body": "@Malcolm You have exactly the same problem with libraries that throw RuntimeExceptions, have throws Exception in their method signatures, or wrap a specific exception in a generic one (e.g. KryoException). The problem as you describe it exists only with code you do not control that throws thoughtful, detailed exceptions that somehow did not make it into any documentation, which I think you&#39;ll find is very rare."}, {"owner": {"reputation": 38714, "user_id": 45668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d4288118e4836464de401d53b60466dd?s=128&d=identicon&r=PG", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/45668/malcolm"}, "edited": false, "score": 3, "creation_date": 1542578025, "post_id": 47734017, "comment_id": 93608208, "body": "@NateVaughan Even discerning an <code>IOException</code> from <code>Exception</code> helps, there&#39;s nothing &quot;thoughtful, detailed&quot; in this. And exceptions can be missing from documentation for the same simple reason that the library authors don&#39;t have any compiler help when writing documentation either. Also I don&#39;t understand why this is supposed to happen only with the code you don&#39;t control. In my own code I often forget which methods can throw which exceptions either, and I&#39;d rather have compiler tell me than writing all this stuff out by hand in comments (which you can also forget to check)."}], "tags": [], "owner": {"reputation": 2497, "user_id": 4280615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/vNe8H.png?s=128&g=1", "display_name": "Nate Vaughan", "link": "https://stackoverflow.com/users/4280615/nate-vaughan"}, "is_accepted": false, "score": 2, "last_activity_date": 1552582053, "last_edit_date": 1552582053, "creation_date": 1512859580, "answer_id": 47734017, "question_id": 47733803, "link": "https://stackoverflow.com/questions/47733803/why-doesnt-kotlin-require-try-and-catch-explicitly/47734017#47734017", "title": "Why doesn&#39;t Kotlin require try and catch explicitly", "body": "<p>Kotlin does away with Java's checked exceptions. Exceptions checked at compile time and declared in method signatures, though familiar to Java developers, are widely considered a failed experiment <a href=\"http://radio-weblogs.com/0122027/stories/2003/04/01/JavasCheckedExceptionsWereAMistake.html\" rel=\"nofollow noreferrer\">outside</a> and to some degree <a href=\"https://dzone.com/articles/checked-exceptions-i-love-you\" rel=\"nofollow noreferrer\">inside</a> the Java community.</p>\n\n<p>So Kotlin did away with them, and with some of the boilerplate associated with using resources (like <code>FileOutputStream</code>) with the <a href=\"https://stackoverflow.com/questions/26969800/try-with-resources-in-kotlin#26979481\">.use</a> method shorthand for Java 7's <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1308, "user_id": 2581809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33afb2c1d879183a3b1e0f9418dd3195?s=128&d=identicon&r=PG", "display_name": "Ekeko", "link": "https://stackoverflow.com/users/2581809/ekeko"}, "is_accepted": false, "score": 2, "last_activity_date": 1512985632, "creation_date": 1512985632, "answer_id": 47750089, "question_id": 47733803, "link": "https://stackoverflow.com/questions/47733803/why-doesnt-kotlin-require-try-and-catch-explicitly/47750089#47750089", "title": "Why doesn&#39;t Kotlin require try and catch explicitly", "body": "<p>It can be difficult to answer without letting some opinions interfere. I will just say that Kotlin is aimed at large software projects and give you what the Kotlin team claims regarding checked exceptions (from <a href=\"https://kotlinlang.org/docs/reference/exceptions.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/exceptions.html</a>):</p>\n\n<blockquote>\n  <p><strong>Checked Exceptions</strong></p>\n  \n  <p>Kotlin does not have checked exceptions. There are many reasons for\n  this, but we will provide a simple example.</p>\n  \n  <p>The following is an example interface of the JDK implemented by\n  StringBuilder class:</p>\n  \n  <p>Appendable append(CharSequence csq) throws IOException; What does this\n  signature say? It says that every time I append a string to something\n  (a StringBuilder, some kind of a log, a console, etc.) I have to catch\n  those IOExceptions. Why? Because it might be performing IO (Writer\n  also implements Appendable)\u2026 So it results into this kind of code all\n  over the place:</p>\n\n<pre><code>try {\n    log.append(message)\n}\ncatch (IOException e) {\n    // Must be safe\n}\n</code></pre>\n  \n  <p>And this is no good, see <a href=\"http://www.oracle.com/technetwork/java/effectivejava-136174.html\" rel=\"nofollow noreferrer\">Effective Java</a>, Item 65: <em>Don't ignore\n  exceptions.</em></p>\n  \n  <p>Bruce Eckel says in <a href=\"http://www.mindview.net/Etc/Discussions/CheckedExceptions\" rel=\"nofollow noreferrer\">Does Java need Checked Exceptions?</a>:</p>\n  \n  <blockquote>\n    <p>Examination of small programs leads to the conclusion that requiring\n    exception specifications could both enhance developer productivity and\n    enhance code quality, but experience with large software projects\n    suggests a different result \u2013 decreased productivity and little or no\n    increase in code quality.</p>\n  </blockquote>\n  \n  <p>Other citations of this sort:</p>\n  \n  <p><a href=\"http://radio-weblogs.com/0122027/stories/2003/04/01/JavasCheckedExceptionsWereAMistake.html\" rel=\"nofollow noreferrer\">Java's checked exceptions were a mistake</a> (Rod Waldhoff)</p>\n  \n  <p><a href=\"http://www.artima.com/intv/handcuffs.html\" rel=\"nofollow noreferrer\">The Trouble with Checked Exceptions</a> (Anders Hejlsberg)</p>\n</blockquote>\n"}], "owner": {"reputation": 193, "user_id": 9077942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a2096ab932df95c2d69af390a8ec6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Nour Eldin Ahmed", "link": "https://stackoverflow.com/users/9077942/nour-eldin-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3130, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1552582053, "creation_date": 1512857961, "last_edit_date": 1512994981, "question_id": 47733803, "link": "https://stackoverflow.com/questions/47733803/why-doesnt-kotlin-require-try-and-catch-explicitly", "title": "Why doesn&#39;t Kotlin require try and catch explicitly", "body": "<p>For example: </p>\n\n<pre><code>FileOutputStream(\"file\") \n</code></pre>\n\n<p>would compile in Kotlin, but in Java it would give a compiler error. Why?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5344, "user_id": 304330, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9870979082e499f65eef8bf29c85539d?s=128&d=identicon&r=PG", "display_name": "Big Rich", "link": "https://stackoverflow.com/users/304330/big-rich"}, "is_accepted": false, "score": 0, "last_activity_date": 1526400785, "creation_date": 1526400785, "answer_id": 50354836, "question_id": 47733744, "link": "https://stackoverflow.com/questions/47733744/how-do-i-add-create-react-kotlin-app-as-a-module-to-kotlin-multiplatform-project/50354836#50354836", "title": "How do I add create-react-kotlin-app as a module to kotlin-multiplatform project?", "body": "<p>Why not use the, rather nifty looking ;-) , <a href=\"https://github.com/srs/gradle-node-plugin\" rel=\"nofollow noreferrer\">Gradle-node-plugin</a>?  </p>\n\n<p>You can create NPM and Yarn task wrappers, and NPM is <em>not</em> required to be installed, Gradle and dependency management takes care of that:</p>\n\n<p>*<a href=\"https://github.com/srs/gradle-node-plugin/blob/master/docs/node.md\" rel=\"nofollow noreferrer\">Node plugin documentation</a><br>\n*<a href=\"https://github.com/srs/gradle-node-plugin/blob/master/docs/node.md#executing-yarn-tasks\" rel=\"nofollow noreferrer\">Execute NPM Tasks</a></p>\n\n<p>So, just <code>gradle --init</code> in the ReactJS project's root folder, then add the plugin and NPM tasks to your new <code>build.gradle</code> file.</p>\n"}], "owner": {"reputation": 2632, "user_id": 1416976, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9f7cc757550be374e3d3b452016070c3?s=128&d=identicon&r=PG", "display_name": "oleg.semen", "link": "https://stackoverflow.com/users/1416976/oleg-semen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 1, "closed_date": 1566313238, "answer_count": 1, "score": 7, "last_activity_date": 1526400785, "creation_date": 1512857577, "question_id": 47733744, "link": "https://stackoverflow.com/questions/47733744/how-do-i-add-create-react-kotlin-app-as-a-module-to-kotlin-multiplatform-project", "closed_reason": "Not suitable for this site", "title": "How do I add create-react-kotlin-app as a module to kotlin-multiplatform project?", "body": "<p>Kotlin-multiplatform project works only with gradle modules but create-react-kotlin-app does not have one?\nCould someone assist me with some guidance on how to make them work together, please.</p>\n"}, {"tags": ["android", "kotlin", "android-source", "android-studio-3.0"], "answers": [{"tags": [], "owner": {"reputation": 2271, "user_id": 2638235, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvEcL.png?s=128&g=1", "display_name": "Prags", "link": "https://stackoverflow.com/users/2638235/prags"}, "is_accepted": true, "score": 1, "last_activity_date": 1512850304, "creation_date": 1512850304, "answer_id": 47732717, "question_id": 47732676, "link": "https://stackoverflow.com/questions/47732676/could-not-find-kotlin-classes-in-feature-module-from-another-module/47732717#47732717", "title": "Could not find Kotlin classes in feature module from another module", "body": "<p>With reference to <a href=\"https://issuetracker.google.com/issues/62653553\" rel=\"nofollow noreferrer\">Google issue tracker</a>, it has been fixed with Android SDK Built-Tools to 27.0.2 </p>\n\n<p>Please update your Android SDK Built-Tools to 27.0.2 And ensure you are on Android Studio 3.0.1 or newer.</p>\n\n<p>If any issue persists, please report at <a href=\"https://issuetracker.google.com/issues/62653553\" rel=\"nofollow noreferrer\">Google issue tracker</a> they will re-open to examine. Thanks!</p>\n"}], "owner": {"reputation": 49, "user_id": 8939875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QW24J.jpg?s=128&g=1", "display_name": "androiddeveloper", "link": "https://stackoverflow.com/users/8939875/androiddeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 47732717, "answer_count": 1, "score": 0, "last_activity_date": 1512850304, "creation_date": 1512850007, "question_id": 47732676, "link": "https://stackoverflow.com/questions/47732676/could-not-find-kotlin-classes-in-feature-module-from-another-module", "title": "Could not find Kotlin classes in feature module from another module", "body": "<p>Could not find Kotlin classes in a module with <code>com.android.feature</code> plugin from another feature module. For example, in Android Instant Apps, Kotlin classes in \"base\" feature can't be referenced from any feature module.</p>\n\n<ul>\n<li>Gradle Version: 4.0-20170417000025+0000-all</li>\n<li>Android Plugin Version: 3.0.0-alpha3</li>\n<li>Module Compile Sdk Version: 25</li>\n<li>Module Build Tools Version: 26.0.0</li>\n<li>Android SDK Tools Version: 26.0.2</li>\n<li>Kotlin Version: 1.1.2-5</li>\n</ul>\n"}, {"tags": ["kotlin", "kotlin-android-extensions", "kotlin-extension", "rx-kotlin", "kotlin-interop"], "answers": [{"comments": [{"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512839498, "post_id": 47731024, "comment_id": 82422567, "body": "double bang to the rescue :-)"}, {"owner": {"reputation": 1333, "user_id": 1412900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DVEJj.jpg?s=128&g=1", "display_name": "Anuj Jindal", "link": "https://stackoverflow.com/users/1412900/anuj-jindal"}, "edited": false, "score": 0, "creation_date": 1512839811, "post_id": 47731024, "comment_id": 82422690, "body": "getOrDefault need minimum API level 24 in android so not that much useful anyways thanks"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1512839389, "creation_date": 1512839389, "answer_id": 47731024, "question_id": 47730952, "link": "https://stackoverflow.com/questions/47730952/required-object-and-found-object/47731024#47731024", "title": "Required &lt;Object&gt; and found &lt;Object&gt;?", "body": "<p><code>LRUMap</code> implements the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html\" rel=\"nofollow noreferrer\"><code>Map</code></a> interface, the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/get.html\" rel=\"nofollow noreferrer\"><code>get</code></a> method of which in Kotlin returns a <code>V?</code>, as it returns <code>null</code> when no element is present for the given key. </p>\n\n<p>As you've already done the checking beforehand in this case, you can be reasonably sure (assuming no other threads are modifying the map at the same time) that this value won't be null, and force a conversion to the non-nullable type with the <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#the--operator\" rel=\"nofollow noreferrer\"><code>!!</code> operator</a>:</p>\n\n<pre><code>return repoByTask[taskData.taskId]!!\n</code></pre>\n\n<p>For other ways to handle a missing key when reading from a <code>Map</code>, see the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/get-or-default.html\" rel=\"nofollow noreferrer\"><code>getOrDefault</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/get-or-else.html\" rel=\"nofollow noreferrer\"><code>getOrElse</code></a> methods.</p>\n"}], "owner": {"reputation": 1333, "user_id": 1412900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DVEJj.jpg?s=128&g=1", "display_name": "Anuj Jindal", "link": "https://stackoverflow.com/users/1412900/anuj-jindal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 47731024, "answer_count": 1, "score": 2, "last_activity_date": 1512841866, "creation_date": 1512838945, "last_edit_date": 1512841866, "question_id": 47730952, "link": "https://stackoverflow.com/questions/47730952/required-object-and-found-object", "title": "Required &lt;Object&gt; and found &lt;Object&gt;?", "body": "<pre><code>class TaskRepo(taskData: TaskData) {\n\ncompanion object {\n    private val repoByTask: LRUMap&lt;String, OrderFormRepo&gt; = LRUMap(2, 10);\n\n     fun getInstance(taskData: TaskData): OrderFormRepo {\n        if (notFoundObject(taskData.taskId)) {\n            repoByTask[taskData.taskId] = OrderFormRepo(taskData);\n        }\n        return repoByTask[taskData.taskId];//PROBLEM HERE\n    }\n\n    private fun notFoundObject(taskId: String): Boolean {\n        if (repoByTask.containsKey(taskId) &amp;&amp; repoByTask[taskId] != null) {\n            return false\n        }\n        return true\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>in getInstance method of companion object I am getting compile time <strong>error:</strong>\n<strong>Required TaskRepo and found TaskRepo?</strong></p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1512835784, "post_id": 47730421, "comment_id": 82421492, "body": "<a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/data-classes.html</a>: <i>componentN() functions corresponding to the properties in their order of declaration;</i>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 4, "creation_date": 1512835815, "post_id": 47730421, "comment_id": 82421498, "body": "If you don&#39;t know the number of properties, you&#39;ll need reflection, see <a href=\"https://stackoverflow.com/a/38688203/4465208\">stackoverflow.com/a/38688203/4465208</a>"}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 1, "creation_date": 1512967493, "post_id": 47730421, "comment_id": 82453140, "body": "You can use destruct declaration like <code>val (a, b, c) = Triple(meow1, meow2, meow3)</code>"}, {"owner": {"reputation": 601, "user_id": 6382484, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-WeuQ98-xtxk/AAAAAAAAAAI/AAAAAAAAABc/cugEXnf1jwY/photo.jpg?sz=128", "display_name": "Steven Waterman", "link": "https://stackoverflow.com/users/6382484/steven-waterman"}, "edited": false, "score": 0, "creation_date": 1552998750, "post_id": 47730421, "comment_id": 97215037, "body": "Is there a reason you don&#39;t want to use reflection? Reflection was created specifically to do this, because there&#39;s no other way. Any alternative that you find will either use reflection under-the-hood or be even more hacky than reflection. As others have mentioned, there are solutions if you are happy to manually update the code every time the fields change."}], "answers": [{"comments": [{"owner": {"reputation": 961, "user_id": 4592448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-_DP3LTfLMXw/AAAAAAAAAAI/AAAAAAAAAHk/dzYHVVdXUnE/photo.jpg?sz=128", "display_name": "Fortran", "link": "https://stackoverflow.com/users/4592448/fortran"}, "edited": false, "score": 0, "creation_date": 1611770447, "post_id": 55678950, "comment_id": 116559874, "body": "Failed to resolve: com.github.LunarWatcher:KClassUnpacker:v1.0.2 Show in Project Structure dialog Affected Modules: app"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "reply_to_user": {"reputation": 961, "user_id": 4592448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-_DP3LTfLMXw/AAAAAAAAAAI/AAAAAAAAAHk/dzYHVVdXUnE/photo.jpg?sz=128", "display_name": "Fortran", "link": "https://stackoverflow.com/users/4592448/fortran"}, "edited": false, "score": 0, "creation_date": 1611775831, "post_id": 55678950, "comment_id": 116562165, "body": "@Fortran did you add the JitPack repo? JitPack&#39;s console indicates it should be fine. All the code is also in the answer (as well as the linked repo) if all else fails. Haven&#39;t touched the code in a while though, new changes may have broken stuff since. (I don&#39;t use Java, Kotlin, or Android anymore)"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": false, "score": 10, "last_activity_date": 1557239435, "last_edit_date": 1557239435, "creation_date": 1555268446, "answer_id": 55678950, "question_id": 47730421, "link": "https://stackoverflow.com/questions/47730421/is-there-any-way-to-iterate-all-fields-of-a-data-class-without-using-reflection/55678950#55678950", "title": "Is there any way to iterate all fields of a data class without using reflection?", "body": "<p>There are two ways. The first is relatively easy, and is essentially what's mentioned in the comments: assuming you know how many fields there are, you can unpack it and throw that into a list, and iterate over those. Or alternatively use them directly:</p>\n\n<pre><code>data class Test(val x: String, val y: String) {\n    fun getData() : List&lt;Any&gt; = listOf(x, y)\n}\n</code></pre>\n\n<pre><code>data class Test(val x: String, val y: String) \n...\n\nval (x, y) = Test(\"x\", \"y\")\n// And optionally throw those in a list\n</code></pre>\n\n<p>Although iterating like this is a slight extra step, this is at least one way you can relatively easy unpack a data class. </p>\n\n<hr>\n\n<p>If you don't know how many fields there are (or you don't want to refactor), you have two options:</p>\n\n<p>The first is using reflection. But as you mentioned, you don't want this. </p>\n\n<p>That leaves a second, somewhat more complicated preprocessing option: annotations. <strong>Note that this only works with data classes you control</strong> - beyond that, you're stuck with reflection or implementations from the library/framework coder.</p>\n\n<p>Annotations can be used for several things. One of which is metadata, but also code generation. This is a somewhat complicated alternative, and requires an additional module in order to get compile order right. If it isn't compiled in the right order, you'll end up with unprocessed annotations, which kinda defeats the purpose. </p>\n\n<p>I've also created a version you can use with Gradle, but that's at the end of the post and it's a shortcut to implementing it yourself. </p>\n\n<p><strong>Note that I have only tested this with a pure Kotlin project</strong> - I've personally had problems with annotations between Java and Kotlin (although that was with Lombok), so I do not guarantee this will work at compile time if called from Java. Also note that this is complex, but avoids runtime reflection.</p>\n\n<hr>\n\n<h1>Explanation</h1>\n\n<p>The main issue here is a certain memory concern. This will create a new list every time you call the method, which makes it very similar to <a href=\"https://stackoverflow.com/a/13659231/6296561\">the method used by enums</a>.</p>\n\n<p>Local testing over 10000 iterations also show a general consistency of ~200 milliseconds to execute my approach, versus roughly 600 for reflection. However, for one iteration, mine uses ~20 milliseconds, where as reflection uses between 400 and 500 milliseconds. On one run, reflection took 1500 (!) milliseconds, while my approach took 18 milliseconds. </p>\n\n<p>See also <a href=\"https://stackoverflow.com/a/1392412/6296561\">Java Reflection: Why is it so slow?</a>. This appears to affect Kotlin as well.\nThe memory impact of creating a new list every time it's called can be noticeable though, but it'll also be collected so it shouldn't be that big a problem. </p>\n\n<p>For reference, the code used for benchmarking (this will make sense after the rest of the post):</p>\n\n<pre><code>@AutoUnpack data class ExampleDataClass(val x: String, val y: Int, var m: Boolean)\n\nfun main(a: Array&lt;String&gt;) {\n    var mine = 0L\n    var reflect = 0L\n    // for(i in 0 until 10000) {\n        var start = System.currentTimeMillis()\n        val cls = ExampleDataClass(\"example\", 42, false)\n        for (field in cls) {\n            println(field)\n        }\n        mine += System.currentTimeMillis() - start\n\n        start = System.currentTimeMillis()\n        for (prop in ExampleDataClass::class.memberProperties) {\n            println(\"${prop.name} = ${prop.get(cls)}\")\n        }\n        reflect += System.currentTimeMillis() - start\n    // }\n    println(mine)\n    println(reflect)\n}\n</code></pre>\n\n<h1>Setting up from scratch</h1>\n\n<p>This bases itself around two modules: a consumer module, and a processor module. <strong><em>The processor HAS to be in a separate module</em></strong>. It needs to be compiled separately from the consumer for the annotations to work properly. </p>\n\n<p>First of all, your consumer project needs the annotation processor:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>Additionally, you need to add stub generation. It complains it's unused while compiling, but without it, the generator seems to break for me:</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n</code></pre>\n\n<p>Now that that's in order, create a new module for the unpacker. Add the Kotlin plugin if you didn't already. You do not need the annotation processor Gradle plugin in this project. That's only needed by the consumer. You do, however, need <a href=\"https://github.com/square/kotlinpoet\" rel=\"noreferrer\">kotlinpoet</a>:</p>\n\n<pre><code>implementation \"com.squareup:kotlinpoet:1.2.0\"\n</code></pre>\n\n<p>This is to simplify aspects of the code generation itself, which is the important part here.</p>\n\n<p>Now, create the annotation:</p>\n\n<pre><code>@Retention(AnnotationRetention.SOURCE)\n@Target(AnnotationTarget.CLASS)\nannotation class AutoUnpack\n</code></pre>\n\n<p>This is pretty much all you need. The retention is set to source because it has no value at runtime, and it only targets compile time.</p>\n\n<p>Next, there's the processor itself. This is somewhat complicated, so bear with me. For reference, this uses the <code>javax.*</code> packages for annotation processing. Android note: this might work assuming you can plug in a Java module on a <code>compileOnly</code> scope without getting the Android SDK restrictions. As I mentioned earlier, this is mainly for pure Kotlin; Android might work, but I haven't tested that.</p>\n\n<p>Anyways, the generator:</p>\n\n<p>Because I couldn't find a way to generate the method into the class without touching the rest (and because according to <a href=\"https://stackoverflow.com/a/54150530/6296561\">this</a>, that isn't possible), I'm going with an extension function generation approach. </p>\n\n<p>You'll need a <code>class UnpackCodeGenerator : AbstractProcessor()</code>. In there, you'll first need two lines of boilerplate:</p>\n\n<pre><code>override fun getSupportedAnnotationTypes(): MutableSet&lt;String&gt; = mutableSetOf(AutoUnpack::class.java.name)\noverride fun getSupportedSourceVersion(): SourceVersion = SourceVersion.latest()\n</code></pre>\n\n<p>Moving on, there's the processing. Override the process function:</p>\n\n<pre><code>override fun process(annotations: MutableSet&lt;out TypeElement&gt;, roundEnv: RoundEnvironment): Boolean {\n    // Find elements with the annotation\n    val annotatedElements = roundEnv.getElementsAnnotatedWith(AutoUnpack::class.java)\n    if(annotatedElements.isEmpty()) {\n        // Self-explanatory\n        return false;\n    }\n    // Iterate the elements\n    annotatedElements.forEach { element -&gt;\n        // Grab the name and package \n        val name = element.simpleName.toString()\n        val pkg = processingEnv.elementUtils.getPackageOf(element).toString()\n        // Then generate the class\n        generateClass(name,\n            if (pkg == \"unnamed package\") \"\" else pkg, // This is a patch for an issue where classes in the root \n                                                       // package return package as \"unnamed package\" rather than empty, \n                                                       // which breaks syntax because \"package unnamed package\" isn't legal. \n            element)\n    }\n    // Return true for success\n    return true;\n}\n</code></pre>\n\n<p>This just sets up some of the later framework. The real magic happens in the <code>generateClass</code> function:</p>\n\n<pre><code>private fun generateClass(className: String, pkg: String, element: Element){\n    val elements = element.enclosedElements\n    val classVariables = elements\n        .filter {\n            val name = if (it.simpleName.contains(\"\\$delegate\"))\n                it.simpleName.toString().substring(0, it.simpleName.indexOf(\"$\"))\n            else it.simpleName.toString()\n            it.kind == ElementKind.FIELD // Find fields\n                    &amp;&amp; Modifier.STATIC !in it.modifiers // that aren't static (thanks to sebaslogen for issue #1: https://github.com/LunarWatcher/KClassUnpacker/issues/1)\n                    // Additionally, we have to ignore private fields. Extension functions can't access these, and accessing\n                    // them is a bad idea anyway. Kotlin lets you expose get without exposing set. If you, by default, don't\n                    // allow access to the getter, there's a high chance exposing it is a bad idea.\n                    &amp;&amp; elements.any { getter -&gt; getter.kind == ElementKind.METHOD // find methods\n                            &amp;&amp; getter.simpleName.toString() ==\n                                    \"get${name[0].toUpperCase().toString() + (if (name.length &gt; 1) name.substring(1) else \"\")}\" // that matches the getter name (by the standard convention)\n                            &amp;&amp; Modifier.PUBLIC in getter.modifiers // that are marked public\n                    }\n        } // Grab the variables\n        .map {\n            // Map the name now. Also supports later filtering\n            if (it.simpleName.endsWith(\"\\$delegate\")) {\n                // Support by lazy\n                it.simpleName.subSequence(0, it.simpleName.indexOf(\"$\"))\n            } else it.simpleName\n        }\n    if (classVariables.isEmpty()) return; // Self-explanatory\n    val file = FileSpec.builder(pkg, className)\n        .addFunction(FunSpec.builder(\"iterator\") // For automatic unpacking in a for loop\n            .receiver(element.asType().asTypeName().copy()) // Add it as an extension function of the class\n            .addStatement(\"return listOf(${classVariables.joinToString(\", \")}).iterator()\") // add the return statement. Create a list, push an iterator.\n            .addModifiers(KModifier.PUBLIC, KModifier.OPERATOR) // This needs to be public. Because it's an iterator, the function also needs the `operator` keyword\n            .build()\n        ).build()\n    // Grab the generate directory.\n    val genDir = processingEnv.options[\"kapt.kotlin.generated\"]!!\n    // Then write the file.\n    file.writeTo(File(genDir, \"$pkg/${element.simpleName.replace(\"\\\\.kt\".toRegex(), \"\")}Generated.kt\"))\n}\n</code></pre>\n\n<p>All of the relevant lines have comments explaining use, in case you're not familiar with what this does. </p>\n\n<p>Finally, in order to get the processor to process, you need to register it. In the module for the generator, add a file called <code>javax.annotation.processing.Processor</code> under <code>main/resources/META-INF/services</code>. In there you write:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>com.package.of.UnpackCodeGenerator\n</code></pre>\n\n<p>From here, you need to link it using <code>compileOnly</code> and <code>kapt</code>. If you added it as a module to your project, you can do:</p>\n\n<pre><code>kapt project(\":ClassUnpacker\")\ncompileOnly project(\":ClassUnpacker\")\n</code></pre>\n\n<h1>Alternative source setup:</h1>\n\n<p>Like I mentioned earlier, I bundled this into a jar for convenience. It's under the same license as SO uses (CC-BY-SA 3.0), and it contains the exact same code as in the answer (although compiled into a single project). </p>\n\n<p>If you want to use this one, just add the Jitpack repo:</p>\n\n<pre><code>repositories {\n    // Other repos here\n    maven { url 'https://jitpack.io' }\n}\n</code></pre>\n\n<p>And hook it up with:</p>\n\n<pre><code>kapt 'com.github.LunarWatcher:KClassUnpacker:v1.0.1'\ncompileOnly \"com.github.LunarWatcher:KClassUnpacker:v1.0.1\"\n</code></pre>\n\n<p>Note that the version here may not be up to date: the up to date list of versions is available <a href=\"https://github.com/LunarWatcher/KClassUnpacker/releases\" rel=\"noreferrer\">here</a>. The code in the post still aims to reflect the repo, but versions aren't really important enough to edit every time.</p>\n\n<h1>Usage</h1>\n\n<p>Regardless of which way you ended up using to get the annotations, the usage is relatively easy:</p>\n\n<pre><code>@AutoUnpack data class ExampleDataClass(val x: String, val y: Int, var m: Boolean)\n\nfun main(a: Array&lt;String&gt;) {\n    val cls = ExampleDataClass(\"example\", 42, false)\n    for(field in cls) {\n        println(field)\n    }\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>example\n42\nfalse\n</code></pre>\n\n<p>Now you have a reflection-less way of iterating fields. </p>\n\n<p>Note that local testing has been done partially with IntelliJ, but IntelliJ doesn't seem to like me - I've had various failed builds where <code>gradlew clean &amp;&amp; gradlew build</code> from a command line oddly works fine. I'm not sure whether this is a local problem, or if this is a general problem, but you might have some issues like this if you build from IntelliJ. </p>\n\n<p>Also, you might get errors if the build fails. The IntelliJ linter builds on top of the build directory for some sources, so if the build fails and the file with the extension function isn't generated, that'll cause it to appear as an error. Building usually fixes this when I tested (with both modules and from Jitpack).</p>\n\n<p>You'll also likely have to enable the annotation processor setting if you use <a href=\"https://stackoverflow.com/a/55550219/6296561\">Android Studio</a> or <a href=\"https://stackoverflow.com/a/25505166/6296561\">IntelliJ</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "is_accepted": false, "score": 1, "last_activity_date": 1612987610, "last_edit_date": 1612987610, "creation_date": 1578693524, "answer_id": 59689550, "question_id": 47730421, "link": "https://stackoverflow.com/questions/47730421/is-there-any-way-to-iterate-all-fields-of-a-data-class-without-using-reflection/59689550#59689550", "title": "Is there any way to iterate all fields of a data class without using reflection?", "body": "<p>here is another idea, that i came up with, but am not satisfied with...but it has some pros and cons:</p>\n<ul>\n<li>pros:\n<ul>\n<li>adding/removing fields to/from the data class causes compiler errors at field-iteration sites</li>\n<li>no boiler-plate code needed</li>\n</ul>\n</li>\n<li>cons:\n<ul>\n<li>won't work if default values are defined for arguments</li>\n</ul>\n</li>\n</ul>\n<p>declaration:</p>\n<pre><code>data class Memento(\n    val testType: TestTypeData,\n    val notes: String,\n    val examinationTime: MillisSinceEpoch?,\n    val administeredBy: String,\n    val signature: SignatureViewHolder.SignatureData,\n    val signerName: String,\n    val signerRole: SignerRole\n) : Serializable\n</code></pre>\n<p>iterating through all fields (can use this directly at call sites, or apply the Visitor pattern, and use this in the <code>accept</code> method to call all the visit methods):</p>\n<pre><code>val iterateThroughAllMyFields: Memento = someValue\nMemento(\n    testType = iterateThroughAllMyFields.testType.also { testType -&gt;\n        // do something with testType\n    },\n    notes = iterateThroughAllMyFields.notes.also { notes -&gt;\n        // do something with notes\n    },\n    examinationTime = iterateThroughAllMyFields.examinationTime.also { examinationTime -&gt;\n        // do something with examinationTime\n    },\n    administeredBy = iterateThroughAllMyFields.administeredBy.also { administeredBy -&gt;\n        // do something with administeredBy\n    },\n    signature = iterateThroughAllMyFields.signature.also { signature -&gt;\n        // do something with signature\n    },\n    signerName = iterateThroughAllMyFields.signerName.also { signerName -&gt;\n        // do something with signerName\n    },\n    signerRole = iterateThroughAllMyFields.signerRole.also { signerRole -&gt;\n        // do something with signerRole\n    }\n)\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 4608434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49093fb2c083dfc2d60c20c8ddba7271?s=128&d=identicon&r=PG&f=1", "display_name": "King Dinve", "link": "https://stackoverflow.com/users/4608434/king-dinve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7849, "favorite_count": 1, "answer_count": 2, "score": 23, "last_activity_date": 1612987610, "creation_date": 1512835479, "last_edit_date": 1547483028, "question_id": 47730421, "link": "https://stackoverflow.com/questions/47730421/is-there-any-way-to-iterate-all-fields-of-a-data-class-without-using-reflection", "title": "Is there any way to iterate all fields of a data class without using reflection?", "body": "<p>I know an alternative of reflection which is using javassist, but using javassist is a little bit complex. And because of lambda or some other features in koltin, the javassist doesn't work well sometimes. So is there any other way to iterate all fields of a data class without using reflection.</p>\n"}, {"tags": ["android", "callback", "kotlin"], "comments": [{"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512832559, "post_id": 47729893, "comment_id": 82420502, "body": "Not enough info. Provide us with <code>FlipFragment</code> code"}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512832707, "post_id": 47729893, "comment_id": 82420553, "body": "@DimaRostopira added all code of this class"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512833177, "post_id": 47729893, "comment_id": 82420674, "body": "<code>getInstance()</code> looks strange... Show code, where you add fragment"}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512833847, "post_id": 47729893, "comment_id": 82420864, "body": "@DimaRostopira I have changed MainActivity description and add FragmentPagerAdapter.class"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512834433, "post_id": 47729893, "comment_id": 82421040, "body": "I was asking for code, where you attach fragment to activity. Do you use <code>fragmentManager</code> or this fragment is included in <code>R.layout.activity_main</code>?"}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "reply_to_user": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512834660, "post_id": 47729893, "comment_id": 82421108, "body": "@DimaRostopira i attach fragmentManager     var adapter = TabsPagerFragmentAdapter(supportFragmentManager)     mViewPager.adapter = adapter"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512834713, "post_id": 47729893, "comment_id": 82421131, "body": "I see you only create instance of fragment, but don&#39;t see where you use it"}, {"owner": {"reputation": 301, "user_id": 2759449, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Se1o2.jpg?s=128&g=1", "display_name": "victorldavila", "link": "https://stackoverflow.com/users/2759449/victorldavila"}, "edited": false, "score": 0, "creation_date": 1512834952, "post_id": 47729893, "comment_id": 82421209, "body": "Why are you not using onAttach to get the listener instance from context? i think this is the right form to get the listener."}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "edited": false, "score": 0, "creation_date": 1512834983, "post_id": 47729893, "comment_id": 82421219, "body": "I attach it in tabInit and try to add listener in OnCreate method to the image which situated at the FlipFragment"}, {"owner": {"reputation": 8164, "user_id": 5593959, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/9StDn.jpg?s=128&g=1", "display_name": "Dima Rostopira", "link": "https://stackoverflow.com/users/5593959/dima-rostopira"}, "edited": false, "score": 0, "creation_date": 1512835114, "post_id": 47729893, "comment_id": 82421264, "body": "In <code>onCreate</code> you are creating <b>local</b> variable <code>var flip = FlipFragment()</code>, attaching listener to it, and then it disappears (if you attached whole <code>onCreate</code>)"}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512835280, "post_id": 47729893, "comment_id": 82421319, "body": "What is the point of the &quot;OnClickInterface&quot;? You already have an OnClickListener attached to your image and it works, why make things more complicated?"}, {"owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "reply_to_user": {"reputation": 301, "user_id": 2759449, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Se1o2.jpg?s=128&g=1", "display_name": "victorldavila", "link": "https://stackoverflow.com/users/2759449/victorldavila"}, "edited": false, "score": 0, "creation_date": 1512835370, "post_id": 47729893, "comment_id": 82421344, "body": "@victorldavila It is good idea, but I don`t know how to do it. I&#39;ll try search about it."}, {"owner": {"reputation": 301, "user_id": 2759449, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Se1o2.jpg?s=128&g=1", "display_name": "victorldavila", "link": "https://stackoverflow.com/users/2759449/victorldavila"}, "edited": false, "score": 0, "creation_date": 1512835838, "post_id": 47729893, "comment_id": 82421508, "body": "maybe this link can help you @VadimMarchenko <a href=\"https://stackoverflow.com/questions/47513664/triggering-an-interface-in-kotlin-for-android\" title=\"triggering an interface in kotlin for android\">stackoverflow.com/questions/47513664/&hellip;</a>"}], "owner": {"reputation": 581, "user_id": 7809349, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-xxj8AcvmCrU/AAAAAAAAAAI/AAAAAAAAF_o/XRDsjNGm0QE/photo.jpg?sz=128", "display_name": "manwhotrycoding", "link": "https://stackoverflow.com/users/7809349/manwhotrycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 575, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512833799, "creation_date": 1512831789, "last_edit_date": 1512833799, "question_id": 47729893, "link": "https://stackoverflow.com/questions/47729893/why-l-cant-set-listener-in-kotlin", "title": "Why l can`t set listener in Kotlin?", "body": "<p>I have OnClickInterface (with method fun onClickShape()) Main.class, and FlipFragment.class and ImageView (which called image in my code). My goal is make listener for image.</p>\n\n<pre><code>interface OnClickInterface {\n  fun onClickShape()\n}\n</code></pre>\n\n<p>MainActivity</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    initTabs()\n    var flip = FlipFragment()\n    flip.listener = object : OnClickInterface {\n      override fun onClickShape() {\n        Log.d(\"MainActivity\", \"Shape Pressed\")\n        ToastUtils.showSuccessMessage(baseContext, \"sometext\")\n      }\n\n    } \n  }\n\n  fun initTabs() {\n    var adapter = TabsPagerFragmentAdapter(supportFragmentManager)\n    mViewPager.adapter = adapter\n    mTabLayout.setupWithViewPager(mViewPager)\n  }\n}\n</code></pre>\n\n<p>onCreate in FlipFragment</p>\n\n<pre><code>var image = view.findViewById&lt;ImageView&gt;(R.id.fShapeView)\n    image.setOnClickListener(View.OnClickListener {\n      Log.d(\"FlipFragment\", \"PRESSED\")\n      if (listener != null)\n        listener!!.onClickShape()\n    })\n</code></pre>\n\n<p>App was loading well, without errors. But when I pressed in the image I show in my log FlipFragment: PRESSED that's mean that my application call method from FragmentFlip, not override method from MainActivity. Why?</p>\n\n<p>I searched error . My app show NPE here.</p>\n\n<pre><code> flip.listener = object : OnClickInterface {\n              override fun onClickShape() {\n                Log.d(\"MainActivity\", \"Shape Pressed\")\n                ToastUtils.showSuccessMessage(baseContext, \"someText\")\n              }}\n</code></pre>\n\n<p>Why listener = null . I defined it with anonymous class.</p>\n\n<p>All code in FlipFragment</p>\n\n<pre><code>class FlipFragment : Fragment() {\n  private var layout = R.layout.view_flip\n  var listener: OnClickInterface? = null\n\n  override fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?,\n      savedInstanceState: Bundle?): View? {\n    var view: View\n    view = inflater!!.inflate(layout, container, false)\n    var image = view.findViewById&lt;ImageView&gt;(R.id.fShapeView)\n    image.setOnClickListener(View.OnClickListener {\n      Log.d(\"FlipFragment\", \"PRESSED\")\n        if (listener != null){\n         listener!!.onClickShape()}\n    })\n    return view\n  }\n\n  companion object {\n    fun getInstanse(): FlipFragment {\n      var args = Bundle()\n      var flipFragment = FlipFragment()\n      flipFragment.arguments = args\n      return flipFragment\n    }\n\n  }\n\n\n}\n</code></pre>\n\n<p>If you need all code it is FragmentPagerAdapter.class</p>\n\n<pre><code>class TabsPagerFragmentAdapter(fm: FragmentManager?) : FragmentPagerAdapter(fm) {\n  var tabs: Array&lt;String&gt; = arrayOf(\"Flip\", \"Multi\")\n\n  override fun getItem(position: Int) = when(position){\n      0 -&gt; FlipFragment.getInstanse()\n      1 -&gt; Mulit.getInstanse() //it is empty now\n    else -&gt; FlipFragment.getInstanse()\n    }\n\n\n  override fun getPageTitle(position: Int) = tabs[position]\n\n\n  override fun getCount() = tabs.size\n}\n</code></pre>\n"}, {"tags": ["kotlin", "double-click-advertising"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 2, "creation_date": 1512830789, "post_id": 47729259, "comment_id": 82419936, "body": "You don&#39;t need those <code>!!</code> operators. The value will never be null."}], "answers": [{"tags": [], "owner": {"reputation": 1072, "user_id": 3673299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/rFyKe.jpg?s=128&g=1", "display_name": "songoku1610", "link": "https://stackoverflow.com/users/3673299/songoku1610"}, "is_accepted": true, "score": 1, "last_activity_date": 1512829101, "creation_date": 1512829101, "answer_id": 47729495, "question_id": 47729259, "link": "https://stackoverflow.com/questions/47729259/doubleclick-use-kotlin-programmatically-face-issue-val-cannot-reassigned/47729495#47729495", "title": "DoubleClick use Kotlin programmatically face issue val cannot reassigned", "body": "<p>Share for someone face same problem<br>\nAfter researching, I saw <code>adsize</code> only delegate for <code>getAdSize</code> so I use this code instead </p>\n\n<pre><code>adView!!.setAdSizes(AdSize.BANNER)\n</code></pre>\n"}], "owner": {"reputation": 1072, "user_id": 3673299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/rFyKe.jpg?s=128&g=1", "display_name": "songoku1610", "link": "https://stackoverflow.com/users/3673299/songoku1610"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 47729495, "answer_count": 1, "score": 0, "last_activity_date": 1512829101, "creation_date": 1512827549, "question_id": 47729259, "link": "https://stackoverflow.com/questions/47729259/doubleclick-use-kotlin-programmatically-face-issue-val-cannot-reassigned", "title": "DoubleClick use Kotlin programmatically face issue val cannot reassigned", "body": "<p>I integrate doubleclick to my android app by follow  <a href=\"https://developers.google.com/mobile-ads-sdk/docs/dfp/android/banner\" rel=\"nofollow noreferrer\">link</a></p>\n\n<pre><code>val adView = PublisherAdView(this)\nadView.adSize = AdSize.BANNER\nadView.adUnitId = \"/6499/example/banner\"\n</code></pre>\n\n<p>But I faced error <code>val cannot be reassigned</code> as below, please help me how to fix it\n<a href=\"https://i.stack.imgur.com/NNrTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NNrTY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2"], "comments": [{"owner": {"reputation": 16339, "user_id": 1584654, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/ZmAL8.jpg?s=128&g=1", "display_name": "GVillani82", "link": "https://stackoverflow.com/users/1584654/gvillani82"}, "edited": false, "score": 1, "creation_date": 1512826033, "post_id": 47729021, "comment_id": 82418532, "body": "So, why are you using the <code>PublishSubject</code> then? you can just remove it."}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1512826444, "post_id": 47729021, "comment_id": 82418634, "body": "Just use a <code>Observable.defer()</code> it will only subscribe to the chain once you subscribe to the <code>Observable</code>"}, {"owner": {"reputation": 1151, "user_id": 783570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b568186883af726f2d8b52f92f177092?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/783570/ben"}, "edited": false, "score": 0, "creation_date": 1512826531, "post_id": 47729021, "comment_id": 82418662, "body": "I&#39;m trying to keep a reference to my Observable and be able to &quot;refresh&quot; my data by just calling getData rather than creating a new subscription"}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1512826637, "post_id": 47729021, "comment_id": 82418690, "body": "so you need a reference to the <code>Subject</code> in order to &quot;push&quot; <code>onNext()</code> calls then. I recommend you use something like <code>.startWith(Any())</code> in your chain for initial call."}, {"owner": {"reputation": 1151, "user_id": 783570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b568186883af726f2d8b52f92f177092?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/783570/ben"}, "edited": false, "score": 0, "creation_date": 1512826890, "post_id": 47729021, "comment_id": 82418769, "body": "Thanks Mark, I&#39;ve tried adding startWith(Any()) at the beginning of my chain already and it doesn&#39;t seem to be starting it and therefore doesn&#39;t start the chain"}, {"owner": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1512827069, "post_id": 47729021, "comment_id": 82418818, "body": "because you&#39;re returning <code>dataSubject</code> - you should return the chain i.e. return dataSubject.flatmap ...etc Obseravble are immutable, so you&#39;re chain executes only within the context of the method, but nothign is acually subscribed to it ..."}, {"owner": {"reputation": 1151, "user_id": 783570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b568186883af726f2d8b52f92f177092?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/783570/ben"}, "edited": false, "score": 0, "creation_date": 1512828311, "post_id": 47729021, "comment_id": 82419172, "body": "Mmh I actually have the same issue returning the chain directly."}, {"owner": {"reputation": 1151, "user_id": 783570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b568186883af726f2d8b52f92f177092?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/783570/ben"}, "reply_to_user": {"reputation": 7365, "user_id": 4252352, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6nZz0.jpg?s=128&g=1", "display_name": "Mark Keen", "link": "https://stackoverflow.com/users/4252352/mark-keen"}, "edited": false, "score": 0, "creation_date": 1512829178, "post_id": 47729021, "comment_id": 82419431, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/160848/discussion-between-ben-and-mark-keen\">continue this discussion in chat</a>."}], "owner": {"reputation": 1151, "user_id": 783570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b568186883af726f2d8b52f92f177092?s=128&d=identicon&r=PG", "display_name": "ben", "link": "https://stackoverflow.com/users/783570/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512825692, "creation_date": 1512825692, "question_id": 47729021, "link": "https://stackoverflow.com/questions/47729021/rxjava-subject-listen-to-different-type-that-the-one-it-emits", "title": "RxJava Subject: Listen to different type that the one it emits", "body": "<p>I've been poking around with chaining Rx events and am having a bit of trouble getting what I want to work.</p>\n\n<p>I'm basically requesting a user permission, requesting the user's location if it's been granted and then requesting data from an API. The code below is from a <code>ViewModel</code> and I want my <code>View</code> (technically a <code>Fragment</code>) to listen. My issue with the code below is that (obviously), my first flatmap isn't getting called as no initial event is triggering my <code>Subject</code>. I've been trying a few variants of this code but can't find the right syntax for what I'm trying to achieve.</p>\n\n<p>Any help would be greatly appreciated. </p>\n\n<pre><code>var dataSubject = PublishSubject.create&lt;Array&lt;Data&gt;&gt;()\n\nfun getData() : Observable&lt;Array&lt;Data&gt;&gt; {\n\n    dataSubject\n            .flatMap { permissions.request(Manifest.permission.ACCESS_COARSE_LOCATION) }\n            .flatMap { granted: Boolean -&gt;\n                if (granted) {\n                    locationProvider.lastKnownLocation\n                } else {\n                    throw Error()\n                }\n            }\n            .flatMap { location: Location -&gt;\n                dataRepository.getData(location.latitude, location.longitude)\n            }\n\n    return dataSubject\n\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-databinding", "android-architecture-components", "android-mvvm"], "comments": [{"owner": {"reputation": 5596, "user_id": 7365866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iNhGH.png?s=128&g=1", "display_name": "Ben Butterworth", "link": "https://stackoverflow.com/users/7365866/ben-butterworth"}, "edited": false, "score": 0, "creation_date": 1611752342, "post_id": 47727211, "comment_id": 116550806, "body": "The proper way of using data binding with live data is now in the documentation of data binding: <a href=\"https://developer.android.com/topic/libraries/data-binding/architecture#livedata\" rel=\"nofollow noreferrer\">Use LiveData to notify the UI about data changes</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 737972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KjwD7.jpg?s=128&g=1", "display_name": "kyurkchyan", "link": "https://stackoverflow.com/users/737972/kyurkchyan"}, "edited": false, "score": 0, "creation_date": 1523891995, "post_id": 47930515, "comment_id": 86736737, "body": "Can you provide an example how to do that?"}, {"owner": {"reputation": 2740, "user_id": 1025379, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/W87aD.png?s=128&g=1", "display_name": "Changhoon", "link": "https://stackoverflow.com/users/1025379/changhoon"}, "reply_to_user": {"reputation": 2034, "user_id": 737972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KjwD7.jpg?s=128&g=1", "display_name": "kyurkchyan", "link": "https://stackoverflow.com/users/737972/kyurkchyan"}, "edited": false, "score": 6, "creation_date": 1538063920, "post_id": 47930515, "comment_id": 92021728, "body": "@kyurkchyan add this <code>binding.setLifecycleOwner(this);</code>  <a href=\"https://developer.android.com/topic/libraries/data-binding/architecture#java\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/data-binding/&hellip;</a>"}], "tags": [], "owner": {"reputation": 985, "user_id": 6100078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7oT9.jpg?s=128&g=1", "display_name": "Igor Escodro", "link": "https://stackoverflow.com/users/6100078/igor-escodro"}, "is_accepted": true, "score": 14, "last_activity_date": 1513879976, "last_edit_date": 1592644375, "creation_date": 1513879976, "answer_id": 47930515, "question_id": 47727211, "link": "https://stackoverflow.com/questions/47727211/using-livedata-with-data-binding/47930515#47930515", "title": "Using LiveData with Data Binding", "body": "<p>The Android Studio 3.1 (currently in Canary 6) will fix this issue, since <code>LiveData</code> can be used as <code>observable field</code>:</p>\n<blockquote>\n<p>Updates to Data Binding:</p>\n<p>You can now use a LiveData object as an observable field in data binding expressions. The ViewDataBinding class now includes a new setLifecycle method that you need to use to use to observe LiveData objects.</p>\n</blockquote>\n<p>Source: <a href=\"https://androidstudio.googleblog.com/2017/12/android-studio-31-canary-6-is-now.html\" rel=\"noreferrer\">Android Studio 3.1 Canary 6 is now available</a></p>\n"}, {"tags": [], "owner": {"reputation": 4459, "user_id": 2318632, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/kd7KQ.jpg?s=128&g=1", "display_name": "Sir Codesalot", "link": "https://stackoverflow.com/users/2318632/sir-codesalot"}, "is_accepted": false, "score": 30, "last_activity_date": 1569261266, "last_edit_date": 1569261266, "creation_date": 1525847245, "answer_id": 50246793, "question_id": 47727211, "link": "https://stackoverflow.com/questions/47727211/using-livedata-with-data-binding/50246793#50246793", "title": "Using LiveData with Data Binding", "body": "<p>For those who came across this question looking for an example like I did, here's one:</p>\n\n<p>In layout <code>.xml</code> put the <code>LiveData</code> element with it's type:</p>\n\n<pre><code>&lt;layout&gt;\n    &lt;data&gt;\n        &lt;variable\n            name=\"myString\"\n            type=\"android.arch.lifecycle.MutableLiveData&amp;lt;String&amp;gt;\"/&gt;\n    &lt;/data&gt;\n\n    ...\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text='@{myString}'\n        ...\n     /&gt;\n\n    ...\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>In your code set it's value and the lifecycle owner:</p>\n\n<pre><code>MutableLiveData&lt;String&gt; myString = new MutableLiveData&lt;&gt;();\n\n...\n\nbinding.setLifecycleOwner(this);\nbinding.setMyString(myString);\n</code></pre>\n\n<p>That's it :)</p>\n\n<p>Note that the default value of <code>LiveData</code> elements is <code>null</code> so assign initial values to make sure you get the desired effect right away or use <a href=\"https://stackoverflow.com/questions/46488442/is-it-possible-to-enforce-non-nullability-of-livedata-values/50154853#50154853\">this</a> to enforce nullability.</p>\n\n<p><strong>EDIT</strong>:\nUse <code>androidx.lifecycle.MutableLiveData&amp;lt;String&amp;gt;</code> as type if you use <code>androidx</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1856, "user_id": 6352712, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/83NBP.jpg?s=128&g=1", "display_name": "Serg Burlaka", "link": "https://stackoverflow.com/users/6352712/serg-burlaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1568231414, "last_edit_date": 1568231414, "creation_date": 1549397333, "answer_id": 54542260, "question_id": 47727211, "link": "https://stackoverflow.com/questions/47727211/using-livedata-with-data-binding/54542260#54542260", "title": "Using LiveData with Data Binding", "body": "<p>For androidx will be:</p>\n\n<blockquote>\n  <p>androidx.lifecycle.MutableLiveData</p>\n</blockquote>\n\n<pre><code>&lt;layout&gt;\n    &lt;data&gt;\n        &lt;variable\n            name=\"myString\"\n            type=\"androidx.lifecycle.MutableLiveData&amp;lt;String&amp;gt;\"/&gt;\n    &lt;/data&gt;\n\n    ...\n\n    &lt;TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text='@{myString}'\n        ...\n     /&gt;\n\n    ...\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>And for Kotlin:</p>\n\n<pre><code>  val myStr = MutableLiveData&lt;String&gt;()\n\n...\n\n binding.apply {\n            setLifecycleOwner(this)\n            this.myString = myStr\n        }\n</code></pre>\n\n<p>Good luck! :)</p>\n"}, {"tags": [], "owner": {"reputation": 1406, "user_id": 1886484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V55rW.jpg?s=128&g=1", "display_name": "Ali Kazi", "link": "https://stackoverflow.com/users/1886484/ali-kazi"}, "is_accepted": false, "score": 1, "last_activity_date": 1592825339, "creation_date": 1592825339, "answer_id": 62513384, "question_id": 47727211, "link": "https://stackoverflow.com/questions/47727211/using-livedata-with-data-binding/62513384#62513384", "title": "Using LiveData with Data Binding", "body": "<p>The accepted answer does not give an example. So here's one I've tested and it works.</p>\n<p>In layout:</p>\n<pre><code>&lt;layout&gt;\n    &lt;data&gt;\n        &lt;variable\n            name=&quot;viewmodel&quot;\n            type=&quot;com.abc.xyz.viewmodels.MyViewModel&quot;/&gt;\n    &lt;/data&gt;\n\n    ...\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text='@{viewmodel.myString}'\n        ...\n     /&gt;\n\n    ...\n\n&lt;/layout&gt;\n</code></pre>\n<p>In fragment:</p>\n<pre><code>override fun onCreateView(inflater: LayoutInflater, \n         container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val binding: FragmentAlbumBinding = DataBindingUtil.inflate(\n            inflater, R.layout.fragment_album, container, false)\n        binding.apply {\n            fragment = this\n            viewModel = albumViewModel\n            lifecycleOwner = this\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 985, "user_id": 6100078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7oT9.jpg?s=128&g=1", "display_name": "Igor Escodro", "link": "https://stackoverflow.com/users/6100078/igor-escodro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16589, "favorite_count": 7, "accepted_answer_id": 47930515, "answer_count": 4, "score": 28, "last_activity_date": 1592825339, "creation_date": 1512812061, "question_id": 47727211, "link": "https://stackoverflow.com/questions/47727211/using-livedata-with-data-binding", "title": "Using LiveData with Data Binding", "body": "<p>With the stabilization of Android Architecture Components I started updating all my basic <code>ViewModel</code>s to the new implementation of<a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel.html\" rel=\"noreferrer\"><code>ViewModel</code></a>. In my understanding, the usage of <a href=\"https://developer.android.com/topic/libraries/architecture/livedata.html\" rel=\"noreferrer\"><code>LiveData</code></a> is recommended to hold the <code>Model</code> class since it handles the lifecycle better.</p>\n\n<p>I like using <code>Data Binding</code> because it makes the code clearer in Java/Kotlin side and it is not needed to \"watch\" the value changes to update the UI. However the layout using <code>Data Binding</code> only watch data changes if the <code>Model</code> (or the ViewModel) extends <a href=\"https://developer.android.com/reference/android/databinding/BaseObservable.html\" rel=\"noreferrer\"><code>BaseObservable</code></a> and <code>LiveData</code> does not. I understand the one of the main objectives of <code>LiveData</code> is to be observed and updates the UI programmatically but for simple updates, <code>Data Binding</code> is very useful.</p>\n\n<p>This issue was already reported (<a href=\"https://github.com/googlesamples/android-architecture-components/issues/34#issuecomment-305991529\" rel=\"noreferrer\">GitHub</a> and <a href=\"https://stackoverflow.com/questions/44077566/how-to-combine-architecture-components-with-data-binding-on-android#comment82259306_44178060\">Stack Overflow</a>) and first was said that the version 1.0 would have it and now is said that this feature is in development.</p>\n\n<p>In order to use both <code>LiveData</code> and <code>Data Binding</code>, I created a very simple implementation of class that extends <code>BaseObservable</code>:</p>\n\n<pre><code>import android.arch.lifecycle.LiveData\nimport android.arch.lifecycle.MutableLiveData\nimport android.databinding.BaseObservable\n\nclass ObservableMutableLiveData&lt;T&gt;() : BaseObservable() {\n\n    private var data: MutableLiveData&lt;T&gt; = MutableLiveData()\n\n    constructor(data: T) : this() {\n        this.data.value = data\n    }\n\n    public fun set(value: T) {\n        if (value != data.value) {\n            data.value = value\n            notifyChange()\n        }\n    }\n\n    public fun get(): T? {\n        return data.value\n    }\n\n    public fun getObservable(): LiveData&lt;T&gt; {\n        return data\n    }\n}\n</code></pre>\n\n<p>So basically my <code>ObservableMutableLiveData</code> is a copy of <a href=\"https://android.googlesource.com/platform/frameworks/data-binding/+/c9a5d6f140f732ca0ff279a4b1ee315072e1c422/library/src/main/java/android/databinding/ObservableField.java\" rel=\"noreferrer\"><code>ObservableField</code></a> using <code>LiveData</code> to store the model and with this implementation, the layout updates after every model update.</p>\n\n<p>The questions are:</p>\n\n<ul>\n<li>Is this a bad implementation of <code>LiveData</code>? Does this wrapper \"breaks\" the functionalities of <code>LiveData</code>, such as be lifecycle-aware?</li>\n<li>In my understanding, <code>LiveData</code> is the new <code>ObservableField</code>. Is this correct?</li>\n</ul>\n"}, {"tags": ["kotlin", "vert.x", "vertx-verticle"], "comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1512847575, "post_id": 47726496, "comment_id": 82425101, "body": "The problem is probably not with this part, but with what you do in &quot;PersistLayer&quot; listener. Could you please post it too?"}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "reply_to_user": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1512910156, "post_id": 47726496, "comment_id": 82438245, "body": "@AlexeySoshin But the PersistLayer code is too simple to be problematic. I added the code."}, {"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 0, "creation_date": 1512940590, "post_id": 47726496, "comment_id": 82447184, "body": "Thanks. At a glance your code looks good. Maybe something in between Quasar-&gt;VertX Sync-&gt;Kotlin misbehaves then. I&#39;ll try to reproduce this in a day or two."}, {"owner": {"reputation": 6331, "user_id": 2133695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba99aebb0acd409215e7cdbfb561b7f?s=128&d=identicon&r=PG", "display_name": "tsegismont", "link": "https://stackoverflow.com/users/2133695/tsegismont"}, "edited": false, "score": 0, "creation_date": 1512984588, "post_id": 47726496, "comment_id": 82459750, "body": "<a href=\"http://vertx.io/docs/vertx-lang-kotlin-coroutines/kotlin/\" rel=\"nofollow noreferrer\">Vert.x supports Kotlin coroutines</a>. Why use Vert.x Sync if not programming in Java?"}, {"owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "reply_to_user": {"reputation": 6331, "user_id": 2133695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba99aebb0acd409215e7cdbfb561b7f?s=128&d=identicon&r=PG", "display_name": "tsegismont", "link": "https://stackoverflow.com/users/2133695/tsegismont"}, "edited": false, "score": 0, "creation_date": 1512988248, "post_id": 47726496, "comment_id": 82461949, "body": "@tsegismont Do u call it coroutine support? it is same as Sync with &#39;launch&#39; function added! It is a very poor support! Leave it! Bullshit!"}], "answers": [{"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1514143474, "creation_date": 1514143474, "answer_id": 47963445, "question_id": 47726496, "link": "https://stackoverflow.com/questions/47726496/vertx-sync-code-runs-multiple-times/47963445#47963445", "title": "Vertx Sync code runs multiple times", "body": "<p>I think I managed to reproduce and solve your problem.<br>\nWonder why you didn't receive a lot of exceptions from Quasar though. It should have alerted that something is not instrumented.</p>\n\n<p>The problem is in this line:</p>\n\n<pre><code>router.post(\"/layers\").handler(fiberHandler { routingContext -&gt; ...\n</code></pre>\n\n<p><code>fiberHandler</code> actually receives a handler, which you implement here implicitly. </p>\n\n<pre><code>// That's what you actually do\nclass SomeHandler : Handler&lt;RoutingContext&gt; {\n    override fun handle(event: RoutingContext?) {            \n    }\n}\n</code></pre>\n\n<p>But that class is missing <code>@Suspendable</code> annotation on <code>handle</code> method.</p>\n\n<p>So, instead of specifying a block, create a separate class, preferably in a separate file, that looks something like this:</p>\n\n<pre><code>class MyHandler(private val vertx: Vertx) : Handler&lt;RoutingContext&gt; {\n\n    @Suspendable\n    override fun handle(req: RoutingContext?) {\n        val result = Sync.awaitResult&lt;Message&lt;String&gt;&gt;({\n            vertx.eventBus().send(\"someAddress\", \"Hi\", it)\n        })\n        println(\"Got response\")\n        val result2 = Sync.awaitResult&lt;Message&lt;String&gt;&gt;({\n            vertx.eventBus().send(\"someAddress\", \"Hi\", it)\n        })\n        println(\"Got second response\")\n        req?.response()?.end(result.body() + result2.body())\n    }\n}\n</code></pre>\n\n<p>Not as nice as original one, but that should not confuse Quasar though.</p>\n"}], "owner": {"reputation": 1602, "user_id": 3105524, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5b169766a0453f1ace846e5d425c940b?s=128&d=identicon&r=PG", "display_name": "Kamyar", "link": "https://stackoverflow.com/users/3105524/kamyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1514143474, "creation_date": 1512805670, "last_edit_date": 1512910189, "question_id": 47726496, "link": "https://stackoverflow.com/questions/47726496/vertx-sync-code-runs-multiple-times", "title": "Vertx Sync code runs multiple times", "body": "<p>I am writing a web service project using Vertx web and verticles with Kotlin language. When I try to switch to Vertx Sync to stop getting into callback hell, some parts of my code run more than once without a reason. When using old callback structure there is no such problem. This is some sample code:</p>\n\n<pre><code>router.post(\"/layers\").handler(fiberHandler { routingContext -&gt;\n        val request = routingContext.request()\n        val response = request.response()\n        response.putHeader(\"content-type\", \"application/json\")\n        val layer = gson.fromJson&lt;Layer&gt;(routingContext.bodyAsString, Layer::class.java)\n        val layerResult = awaitResult&lt;Message&lt;UUID&gt;&gt; { vert.eventBus().send(\"PersistLayer\", layer, it) }\n        val viewResult = awaitResult&lt;Message&lt;Long&gt;&gt; { vert.eventBus().send(\"CreateView\", layerResult.body(), it) }\n        response.isChunked = true\n        response.write(gson.toJson(viewResult.body()))\n        response.statusCode = 201\n    })\n</code></pre>\n\n<p>As soon as I put \"PersisLayer\" line the next line runs multiple times. When omitting  this line, the next line runs once.</p>\n\n<p>Here is PersistLayer code:</p>\n\n<pre><code>        vert.eventBus().consumer&lt;Layer&gt;(\"PersistLayer\").handler {\n\n        val layer = it.body()\n\n        layer.sid = Generators.timeBasedGenerator().generate()\n\n        entityManager.apply {\n            transaction.begin()\n            persist(layer)\n            transaction.commit()\n        }\n\n        it.reply(layer.sid)\n    }\n</code></pre>\n"}, {"tags": ["inheritance", "documentation", "kotlin", "gradle-plugin", "kotlin-dokka"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512803860, "post_id": 47725439, "comment_id": 82413079, "body": "Hmm. Apparently the function <a href=\"https://stackoverflow.com/a/35838071/7366707\">should have documentation</a>."}, {"owner": {"reputation": 4197, "user_id": 1911388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58854a18f41a5a9ae701cc0fed31f9f2?s=128&d=identicon&r=PG&f=1", "display_name": "0xbe5077ed", "link": "https://stackoverflow.com/users/1911388/0xbe5077ed"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512813567, "post_id": 47725439, "comment_id": 82415190, "body": "I don&#39;t understand your comment... What do you mean &quot;should&quot; and why is that apparent from the link?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512814474, "post_id": 47725439, "comment_id": 82415478, "body": "From the post: &quot;Dokka always copies the documentation from a base member to an inherited one if the inherited member does not have its own documentation.&quot; Implying that the overridden member is documented. Also from the post: there is nothing similar to <code>@inheritdoc</code> in Java."}, {"owner": {"reputation": 4197, "user_id": 1911388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58854a18f41a5a9ae701cc0fed31f9f2?s=128&d=identicon&r=PG&f=1", "display_name": "0xbe5077ed", "link": "https://stackoverflow.com/users/1911388/0xbe5077ed"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512815714, "post_id": 47725439, "comment_id": 82415758, "body": "Hmmm, indeed. But I&#39;m not asking about what Dokka does in terms of inserting inherited documentation. I&#39;m asking how to make it stop polluting my build logs with pointless warning messages."}], "answers": [{"comments": [{"owner": {"reputation": 7096, "user_id": 3990767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a5741a212e3b0e6bd46a8a1e6d76a4a?s=128&d=identicon&r=PG", "display_name": "SOFe", "link": "https://stackoverflow.com/users/3990767/sofe"}, "edited": false, "score": 1, "creation_date": 1543745354, "post_id": 48252817, "comment_id": 94021932, "body": "This doesn&#39;t really solve the problem though. The real problem is in that Dokka is unable to inherit the Kotlin stdlib docs. An alternative way to look at this is to suppress overridden properties and funs automatically."}], "tags": [], "owner": {"reputation": 1075, "user_id": 1478655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7edc2f58f86eb3465da1f4047588f4c?s=128&d=identicon&r=PG", "display_name": "Archibald", "link": "https://stackoverflow.com/users/1478655/archibald"}, "is_accepted": false, "score": 2, "last_activity_date": 1543746506, "last_edit_date": 1543746506, "creation_date": 1515954631, "answer_id": 48252817, "question_id": 47725439, "link": "https://stackoverflow.com/questions/47725439/suppress-dokka-complaints-about-no-documentation-for-com-foo-bartostring/48252817#48252817", "title": "Suppress Dokka complaints about &quot;No documentation for com.foo.Bar$toString()&quot;?", "body": "<p>For your specific case use <strong>@suppress</strong></p>\n\n<pre><code>class MyAndroidActivity: Activity {\n\n    /** @suppress */\n    override fun onCreate(savedInstanceState: Bundle?) {\n        ...\n    }\n\n}\n</code></pre>\n\n<p>This way you will exclude the overridden function from the documentation completely. </p>\n\n<p>However, if you want to retain a reference to the API call in the documentation simply add an empty one-line docstring close to the element (it will disable the warning):</p>\n\n<pre><code>class MyAndroidActivity: Activity {\n\n    /***/\n    override fun onCreate(savedInstanceState: Bundle?) {\n        ...\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1920, "user_id": 3392274, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/TNMt4.jpg?s=128&g=1", "display_name": "Tulsiram Rathod", "link": "https://stackoverflow.com/users/3392274/tulsiram-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1548073506, "last_edit_date": 1548073506, "creation_date": 1548071646, "answer_id": 54289436, "question_id": 47725439, "link": "https://stackoverflow.com/questions/47725439/suppress-dokka-complaints-about-no-documentation-for-com-foo-bartostring/54289436#54289436", "title": "Suppress Dokka complaints about &quot;No documentation for com.foo.Bar$toString()&quot;?", "body": "<p>Probably You need to add below: </p>\n\n<pre><code>// No default documentation link to kotlin-stdlib\n  noStdlibLink = false\n</code></pre>\n\n<p>final could is like:</p>\n\n<pre><code>dokka {\n        // refer https://github.com/Kotlin/dokka#output-formats\n        outputFormat = 'html'\n        outputDirectory = \"$buildDir/javadoc\"\n        // Do not create index pages for empty packages\n        skipEmptyPackages = true\n        // No default documentation link to kotlin-stdlib\n        noStdlibLink = false\n    }\n</code></pre>\n\n<p>As <strong>noStdlibLink = false</strong> will be generate document for inherited function by providing link to <strong>kotlin-stdlib</strong>. you can refer more <a href=\"https://github.com/Kotlin/dokka/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I have used dokka version <strong>0.9.17</strong>.</p>\n\n<p>Output will be:</p>\n\n<blockquote>\n  <p>Task :app:dokka UP-TO-DATE</p>\n</blockquote>\n\n<pre><code>BUILD SUCCESSFUL in 1m 13s\n104 actionable tasks: 35 executed, 69 up-to-date\n5:53:38 PM: Task execution finished 'dokka'.\n</code></pre>\n"}], "owner": {"reputation": 4197, "user_id": 1911388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58854a18f41a5a9ae701cc0fed31f9f2?s=128&d=identicon&r=PG&f=1", "display_name": "0xbe5077ed", "link": "https://stackoverflow.com/users/1911388/0xbe5077ed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1548073506, "creation_date": 1512795183, "question_id": 47725439, "link": "https://stackoverflow.com/questions/47725439/suppress-dokka-complaints-about-no-documentation-for-com-foo-bartostring", "title": "Suppress Dokka complaints about &quot;No documentation for com.foo.Bar$toString()&quot;?", "body": "<p>I'm using the Gradle Dokka plugin version 0.9.16-eap-1 to generate documentation for some Kotlin code.</p>\n\n<p>I'm a no broken windows kind of person and consequently a bit frustrated that the plugin generates a tonne of messages for classes for which I haven't explicitly documented an overridden method which is adequately documented in the base class, <em>eg</em>:</p>\n\n<pre><code>package com.foo\n/**\n * A silly class to demonstrate silliness.\n */\nclass Bar : java.io.InputStream() {\n    override fun read() = -1\n    override fun toString() = \"BAZ!\"\n}\n</code></pre>\n\n<p>For this class Dokka reprimands:</p>\n\n<pre><code>No documentation for com.foo.Bar$read() (Bar.kt:6)\nNo documentation for com.foo.Bar$toString() (Bar.kt:7)\n</code></pre>\n\n<p>This is slightly tedious, as I don't want to have to redundantly redundantly document everything with copy-paste documentation.</p>\n\n<p>Looking at the <a href=\"https://github.com/Kotlin/dokka/blob/master/README.md\" rel=\"nofollow noreferrer\">Dokka README.md</a>, the only relevant configuration options I see are:</p>\n\n<pre><code>dokka {\n    ...\n    // Emit warnings about not documented members. Applies globally, also can be overridden by packageOptions\n    reportNotDocumented = true \n    ...\n    // Allows to customize documentation generation options on a per-package basis\n    // Repeat for multiple packageOptions\n    packageOptions {\n        ...\n        reportUndocumented = true // Emit warnings about not documented members \n        ...\n    }\n}\n</code></pre>\n\n<p>But I don't want to suppress warnings about undocumented stuff. That would be just as bad. All I want to do is suppress warnings about undocumented <code>override</code> funs on the assumption I'm deliberately not repeating myself not repeating myself.</p>\n\n<p>Does anyone know if there's an option to switch off the warnings just for <code>override fun</code>?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1512790545, "post_id": 47725006, "comment_id": 82410829, "body": "It&#39;s not clear to me what problem you&#39;re having. What kind of simplification are you looking for?"}, {"owner": {"reputation": 10489, "user_id": 346741, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a6d0a3771b08d19c92ca8c8edb262fb0?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/346741/rob"}, "edited": false, "score": 2, "creation_date": 1512790706, "post_id": 47725006, "comment_id": 82410842, "body": "There is no question here. One of the police will be along momentarily to tell you that and suggest closing this. You are asking for a code review. There is another SE for that."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8589667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1397b5fa2e6f0e2e908cd67aac1e7a86?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Lee", "link": "https://stackoverflow.com/users/8589667/yuri-lee"}, "is_accepted": true, "score": 0, "last_activity_date": 1513240892, "last_edit_date": 1513240892, "creation_date": 1512790852, "answer_id": 47725098, "question_id": 47725006, "link": "https://stackoverflow.com/questions/47725006/how-to-simplify-the-default-implementation-of-a-kotlin-function/47725098#47725098", "title": "How to simplify the default implementation of a kotlin function", "body": "<blockquote>\n  <p>Oh,yeah.I simplified a bit of code.</p>\n</blockquote>\n\n<pre><code>fun paidMore(amount: Int, employee: Employee,\n                     predicate: (Int, Employee) -&gt; Boolean = { _, _ -&gt; employee.salary &gt; amount }\n        ): Boolean = predicate(amount, employee)\n</code></pre>\n\n<blockquote>\n  <p>now,I simplified the code again</p>\n</blockquote>\n\n<pre><code>import org.jetbrains.spek.api.Spek\nimport org.jetbrains.spek.api.dsl.describe\nimport org.jetbrains.spek.api.dsl.it\nimport kotlin.test.assertFalse\nimport kotlin.test.assertTrue\n\nobject ClosureSpec : Spek({\n    describe(\"Test, add a default implementation to the function\") {\n        data class Employee(val name: String, val salary: Int) //the model used to test\n\n        fun paidMore(amount: Int, employee: Employee,\n                     predicate: (Int) -&gt; Boolean = { _ -&gt; employee.salary &gt; amount }\n        ): Boolean = predicate(amount)\n\n        it(\"judging employee's salary level\") {\n            fun isHighPaid(employee: Employee): Boolean = paidMore(100, employee)\n            fun isHighPaid2(employee: Employee): Boolean = paidMore(100, employee) {amount -&gt;\n                employee.salary &gt; amount * 2\n            }\n\n            val employee = Employee(\"yuri\", 101)\n            assertTrue(isHighPaid(employee))\n            assertFalse(isHighPaid2(employee))\n\n            assertTrue(isHighPaid2(Employee(\"peter\", 201)))\n            assertFalse(isHighPaid2(Employee(\"jerry\", 200)))\n        }\n    }\n\n})\n</code></pre>\n\n<blockquote>\n  <p>or else</p>\n</blockquote>\n\n<pre><code>import org.jetbrains.spek.api.Spek\nimport org.jetbrains.spek.api.dsl.describe\nimport org.jetbrains.spek.api.dsl.it\nimport kotlin.test.assertFalse\nimport kotlin.test.assertTrue\n\nobject ClosureSpec : Spek({\n    describe(\"Test, add a default implementation to the function\") {\n        data class Employee(val name: String, val salary: Int) //the model used to test\n\n        //judging employee's salary level\n        fun Employee.paidMore(amount: Int, predicate: (Int) -&gt; Boolean = { \n            this.salary &gt; it \n        }): Boolean = predicate(amount)\n\n        on(\"use the default implementation\") {\n            val amount = 100\n            fun Employee.isHighPaid() = paidMore(amount)\n\n            it(\"should all be passed\") {\n                assertTrue(Employee(\"Alice\", amount + 1).isHighPaid())\n                assertFalse(Employee(\"Alice\", amount - 1).isHighPaid())\n            }\n        }\n\n        on(\"override the default implementation\") {\n            val amount = 100\n            fun Employee.isHighPaid() = paidMore(amount) {\n                this.salary &gt; it * 2\n            }\n\n            it(\"should all be passed\") {\n                assertTrue(Employee(\"Bob\", amount * 2 + 1).isHighPaid())\n                assertFalse(Employee(\"Bob\", amount * 2 - 1).isHighPaid())\n            }\n        }\n    }\n})\n</code></pre>\n\n<blockquote>\n  <p>Which one is better? something else? Looking forward to your good idea</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 8589667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1397b5fa2e6f0e2e908cd67aac1e7a86?s=128&d=identicon&r=PG&f=1", "display_name": "Yuri Lee", "link": "https://stackoverflow.com/users/8589667/yuri-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 47725098, "answer_count": 1, "score": -5, "last_activity_date": 1513240892, "creation_date": 1512789848, "last_edit_date": 1512808227, "question_id": 47725006, "link": "https://stackoverflow.com/questions/47725006/how-to-simplify-the-default-implementation-of-a-kotlin-function", "title": "How to simplify the default implementation of a kotlin function", "body": "<blockquote>\n  <p>The following code, I always feel a bit long-winded.</p>\n</blockquote>\n\n<pre><code>//judging employee's salary level,  and set a default implemention of the function:whether it &gt; amount\nfun paidMore(amount: Int, employee: Employee,\n     predicate: (Int, Employee) -&gt; Boolean = { amount, employee -&gt; employee.salary &gt; amount }\n): Boolean = predicate(amount, employee)\n</code></pre>\n\n<blockquote>\n  <p>I think I can simplify the code like this\uff1a</p>\n</blockquote>\n\n<pre><code>fun paidMore(amount: Int, employee: Employee, \n      predicate: (Int, Employee) -&gt; Boolean = employee.salary &gt; amount\n): Boolean = predicate(amount, employee)\n</code></pre>\n\n<p>Of course, I am self-righteous. It can not run. </p>\n\n<pre><code>//This code is treated as a Boolean expression, not a function.\nemployee.salary &gt; amount\n</code></pre>\n\n<blockquote>\n  <p>why? what should I do to simplify the code? </p>\n</blockquote>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 6459, "user_id": 1820644, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ca7cb3fa8045dcc37490bcb4cbb09cef?s=128&d=identicon&r=PG", "display_name": "kirtan403", "link": "https://stackoverflow.com/users/1820644/kirtan403"}, "edited": false, "score": 0, "creation_date": 1543386446, "post_id": 47722788, "comment_id": 93895794, "body": "Any solution? I&#39;m having the same issue.."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4671727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7tNBMg_B7o/AAAAAAAAAAI/AAAAAAAAJmc/ASs1QET_N3U/photo.jpg?sz=128", "display_name": "toteto", "link": "https://stackoverflow.com/users/4671727/toteto"}, "edited": false, "score": 0, "creation_date": 1512775478, "post_id": 47723456, "comment_id": 82407871, "body": "My Resource class is already <code>Resource&lt;out T&gt;</code>, however LiveData is Java class coming from Google and i cannot change it. It is declared as: <code>public abstract class LiveData&lt;T&gt;</code>"}], "tags": [], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "is_accepted": false, "score": 1, "last_activity_date": 1512774672, "creation_date": 1512774672, "answer_id": 47723456, "question_id": 47722788, "link": "https://stackoverflow.com/questions/47722788/kotlin-type-missmatch-expected-any-received-myobject/47723456#47723456", "title": "Kotlin type missmatch. Expected Any received MyObject", "body": "<p>Your Resource (and/or LiveData) class should be defined with generic covariance in order to make it work. Like so:</p>\n\n<pre><code>class Resource&lt;out T&gt; // &lt;- out marks generic type as covariant\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1512837835, "post_id": 47730629, "comment_id": 82421998, "body": "All <code>T</code>&#39;s are bounded to <code>Any</code> if they don&#39;t extend other class. There is no need to bound to <code>Any</code>."}, {"owner": {"reputation": 13, "user_id": 4671727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7tNBMg_B7o/AAAAAAAAAAI/AAAAAAAAJmc/ASs1QET_N3U/photo.jpg?sz=128", "display_name": "toteto", "link": "https://stackoverflow.com/users/4671727/toteto"}, "edited": false, "score": 0, "creation_date": 1512850856, "post_id": 47730629, "comment_id": 82426102, "body": "I have also tried this. While this allowed me to call <code>LiveResource.addResource(myResource)</code>, I was getting type mismatch on the <code>mediatorLiveData.addSource(source, resourceObserver)</code>"}, {"owner": {"reputation": 1260, "user_id": 714249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7d56398e3e55f20b3b5afdb30d3e9f?s=128&d=identicon&r=PG", "display_name": "Splash", "link": "https://stackoverflow.com/users/714249/splash"}, "reply_to_user": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "edited": false, "score": 0, "creation_date": 1512851066, "post_id": 47730629, "comment_id": 82426152, "body": "@Nikola Despotoski all T are bounded to<code>Any?</code>, not same as <code>Any</code>"}, {"owner": {"reputation": 1668, "user_id": 4761359, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j4tZfcd7b-Q/AAAAAAAAAAI/AAAAAAAACPo/jJ3n99V4ccM/photo.jpg?sz=128", "display_name": "Jorge Barroso", "link": "https://stackoverflow.com/users/4761359/jorge-barroso"}, "edited": false, "score": 0, "creation_date": 1582257449, "post_id": 47730629, "comment_id": 106723093, "body": "This worked for me in a more general example where I wanted to pass String::class instead of String::class.java"}], "tags": [], "owner": {"reputation": 1260, "user_id": 714249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7d56398e3e55f20b3b5afdb30d3e9f?s=128&d=identicon&r=PG", "display_name": "Splash", "link": "https://stackoverflow.com/users/714249/splash"}, "is_accepted": false, "score": 1, "last_activity_date": 1512836877, "creation_date": 1512836877, "answer_id": 47730629, "question_id": 47722788, "link": "https://stackoverflow.com/questions/47722788/kotlin-type-missmatch-expected-any-received-myobject/47730629#47730629", "title": "Kotlin type missmatch. Expected Any received MyObject", "body": "<p>Haven't tried it, but I think this would work</p>\n\n<p><code>fun &lt;T:Any&gt; addResource(source: LiveData&lt;Resource&lt;T&gt;&gt;)</code></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4671727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7tNBMg_B7o/AAAAAAAAAAI/AAAAAAAAJmc/ASs1QET_N3U/photo.jpg?sz=128", "display_name": "toteto", "link": "https://stackoverflow.com/users/4671727/toteto"}, "edited": false, "score": 0, "creation_date": 1512846566, "post_id": 47730731, "comment_id": 82424804, "body": "I want to make <code>LiveResource</code> don&#39;t care what kind of <code>LiveData&lt;Resource&lt;&gt;&gt;</code> is holding. Just to monitor the ERROR, and LOADING state of the Resource and change it&#39;s value.  I needed to wrap the <code>MediatorLiveData</code> so when i add new data sources to it, not to pass in observer of that change."}], "tags": [], "owner": {"reputation": 46728, "user_id": 557179, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7KJPr.jpg?s=128&g=1", "display_name": "Nikola Despotoski", "link": "https://stackoverflow.com/users/557179/nikola-despotoski"}, "is_accepted": true, "score": 0, "last_activity_date": 1512837586, "creation_date": 1512837586, "answer_id": 47730731, "question_id": 47722788, "link": "https://stackoverflow.com/questions/47722788/kotlin-type-missmatch-expected-any-received-myobject/47730731#47730731", "title": "Kotlin type missmatch. Expected Any received MyObject", "body": "<p>You should generify the classes to accept <code>Resource&lt;T&gt;</code> i.e <code>LiveData&lt;Resource&lt;T&gt;&gt;</code>. <code>Any</code> is the covariance of any object passed, but I think you are not trying to achieve that.</p>\n\n<p>Another friendly advice is that you don't need to add another abstraction on top of <code>MediatorLiveData</code> that solely does the same you have implemented. </p>\n"}], "owner": {"reputation": 13, "user_id": 4671727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7tNBMg_B7o/AAAAAAAAAAI/AAAAAAAAJmc/ASs1QET_N3U/photo.jpg?sz=128", "display_name": "toteto", "link": "https://stackoverflow.com/users/4671727/toteto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 47730731, "answer_count": 3, "score": 1, "last_activity_date": 1512837683, "creation_date": 1512770416, "last_edit_date": 1512837683, "question_id": 47722788, "link": "https://stackoverflow.com/questions/47722788/kotlin-type-missmatch-expected-any-received-myobject", "title": "Kotlin type missmatch. Expected Any received MyObject", "body": "<p>I am making a list of observable <code>LiveData</code> objects, that should contain <code>Resource</code> object (<a href=\"https://developer.android.com/topic/libraries/architecture/guide.html#addendum\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/guide.html#addendum</a>). I don't care what type of data that <code>Resource</code> object is containing.</p>\n\n<pre><code>abstract class LiveResources : LiveData&lt;Resource&lt;Any&gt;&gt;() {\n  private val mediatorLiveData = MediatorLiveData&lt;Resource&lt;Any&gt;&gt;()\n  protected val resources = HashSet&lt;LiveData&lt;Resource&lt;Any&gt;&gt;&gt;()\n\n  fun addResource(source: LiveData&lt;Resource&lt;Any&gt;&gt;) {\n    resources.add(source)\n    mediatorLiveData.addSource(source, resourceObserver)\n  }\n\n  fun removeResource(source: LiveData&lt;Resource&lt;Any&gt;&gt;) {\n    resources.remove(source)\n    mediatorLiveData.removeSource(source)\n  }\n\n  private val resourceObserver = Observer&lt;Resource&lt;Any&gt;&gt; {\n    onSourceChange()\n  }\n\n  abstract fun onSourceChange()\n}\n</code></pre>\n\n<p>Unfortunately when I try to use <code>LiveResources.addResource()</code> with <code>LiveData&lt;Resource&lt;List&lt;String&gt;&gt;&gt;</code> I get TypeMismatch error in my IDE, saying that <code>LiveData&lt;Resource&lt;Any&gt;&gt;</code> was expected.</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 22, "last_activity_date": 1561366469, "last_edit_date": 1561366469, "creation_date": 1512766024, "answer_id": 47721915, "question_id": 47721854, "link": "https://stackoverflow.com/questions/47721854/difference-between-lock-withlock-and-synchronized-in-kotlin/47721915#47721915", "title": "Difference between Lock.withLock and synchronized in Kotlin", "body": "<p>The extension <code>withLock</code> works on <code>Lock</code> instances like <code>ReentrantLock</code>, whereas <code>synchronized</code> may be used with any object. </p>\n\n<pre><code>val lock = ReentrantLock()\nfun syncWithLockTest(): Int = lock.withLock { 123 }\n\nval anyLock = Any()\nfun syncWithArbitraryObjTest(): Int = synchronized(anyLock) { 123 }\n\n</code></pre>\n\n<p>Note that <code>synchronized</code> is a function in Kotlin which returns a value. This makes it more powerful than Java's synchronized keyword.\nTechnically it doesn\u2019t make a difference on which object you lock, as long as you use the same object for all relevant code blocks that need be synchronized with each other and don't expose it publicly.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 3, "last_activity_date": 1549008422, "last_edit_date": 1592644375, "creation_date": 1549008422, "answer_id": 54475308, "question_id": 47721854, "link": "https://stackoverflow.com/questions/47721854/difference-between-lock-withlock-and-synchronized-in-kotlin/54475308#54475308", "title": "Difference between Lock.withLock and synchronized in Kotlin", "body": "<p>It's worth adding to @s1m0nw1's answer explicitly that they can have different semantics, depending on what lock you use. Quoting <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"nofollow noreferrer\">the <code>Lock</code> documentation</a>:</p>\n<blockquote>\n<p>A Lock class can also provide behavior and semantics that is quite different from that of the implicit monitor lock, such as guaranteed ordering, non-reentrant usage, or deadlock detection. If an implementation provides such specialized semantics then the implementation must document those semantics.</p>\n<p>Note that Lock instances are just normal objects and can themselves be used as the target in a synchronized statement. Acquiring the monitor lock of a Lock instance has no specified relationship with invoking any of the lock() methods of that instance. It is recommended that to avoid confusion you never use Lock instances in this way, except within their own implementation.</p>\n</blockquote>\n"}], "owner": {"reputation": 4012, "user_id": 1458374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f32cdceddfafef803455c819ad6fe030?s=128&d=identicon&r=PG", "display_name": "EvenLisle", "link": "https://stackoverflow.com/users/1458374/evenlisle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10251, "favorite_count": 2, "accepted_answer_id": 47721915, "answer_count": 2, "score": 20, "last_activity_date": 1561366469, "creation_date": 1512765668, "question_id": 47721854, "link": "https://stackoverflow.com/questions/47721854/difference-between-lock-withlock-and-synchronized-in-kotlin", "title": "Difference between Lock.withLock and synchronized in Kotlin", "body": "<p>Is there a difference (other than preference) between</p>\n\n<pre><code>someLock.withLock {\n    sharedResource.operation()\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>synchronized(someLock) {\n    sharedResource.operation()\n}\n</code></pre>\n\n<p>in Kotlin?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4012, "user_id": 1458374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f32cdceddfafef803455c819ad6fe030?s=128&d=identicon&r=PG", "display_name": "EvenLisle", "link": "https://stackoverflow.com/users/1458374/evenlisle"}, "edited": false, "score": 0, "creation_date": 1512766188, "post_id": 47721819, "comment_id": 82404436, "body": "Cool, cheers! Wasn&#39;t able to use it like this, but <code>intrinsicSync { sharedResource.operation() }</code> worked fine. Am I just doing it wrong or is this how it&#39;ll have to be? 100% Kotlin newbie"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 4012, "user_id": 1458374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f32cdceddfafef803455c819ad6fe030?s=128&d=identicon&r=PG", "display_name": "EvenLisle", "link": "https://stackoverflow.com/users/1458374/evenlisle"}, "edited": false, "score": 0, "creation_date": 1512766366, "post_id": 47721819, "comment_id": 82404520, "body": "@EvenLislea ah, yes, <code>intrinsicSync(sharedResource.operation())</code> would pass the result of <code>operation</code> to the function. <code>{ sharedResource.operation() }</code> is a lambda expression/&quot;function object&quot; that returns the result once it is executed. I assumed <code>operation</code> returned a lambda, since this same syntax was used in your question - I&#39;ll edit my answer"}], "tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 2, "last_activity_date": 1512766389, "last_edit_date": 1512766389, "creation_date": 1512765525, "answer_id": 47721819, "question_id": 47721719, "link": "https://stackoverflow.com/questions/47721719/can-i-access-the-enclosing-object-for-an-inlined-function-call-in-kotlin/47721819#47721819", "title": "Can I access the &quot;enclosing&quot; object for an inlined function call in Kotlin?", "body": "<p>The most you can do is give the function a receiver (i.e. make it an extension function):</p>\n\n<pre><code>public inline fun &lt;T&gt; Any.intrinsicSync(crossinline block: () -&gt; T): T {\n                   // ^ within this function, `this` refers to the receiver\n    return synchronized(this, block)\n}\n</code></pre>\n\n<p>and then in a <em>member function</em>, you can do</p>\n\n<pre><code>this.intrinsicSync { sharedResource.operation() }\n</code></pre>\n\n<p>and since <code>this</code> is inferred you should be able to shorten this to</p>\n\n<pre><code>intrinsicSync { sharedResource.operation() }\n</code></pre>\n\n<hr>\n\n<p>Keep in mind that extension functions <em>cannot</em> shadow member functions, so if this object has another function with the same signature, it won't choose the extension function.</p>\n\n<p>In your case, though, this seems unlikely.</p>\n"}], "owner": {"reputation": 4012, "user_id": 1458374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f32cdceddfafef803455c819ad6fe030?s=128&d=identicon&r=PG", "display_name": "EvenLisle", "link": "https://stackoverflow.com/users/1458374/evenlisle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 47721819, "answer_count": 1, "score": 1, "last_activity_date": 1512766389, "creation_date": 1512765007, "question_id": 47721719, "link": "https://stackoverflow.com/questions/47721719/can-i-access-the-enclosing-object-for-an-inlined-function-call-in-kotlin", "title": "Can I access the &quot;enclosing&quot; object for an inlined function call in Kotlin?", "body": "<p>Idea: Make an inlined convenience function to synchronize a function call on the \"inlining\" object's intrinsic lock:</p>\n\n<pre><code>public inline fun &lt;T&gt; intrinsicSync(block: () -&gt; T): T {\n    return synchronized(intrinsicLockOfTheObjectUsingTheFunction) {\n        block()\n    }\n}\n\nfun someFunction(parameter: SomeClass) {\n    intrinsicSync(sharedResource.operation(parameter))\n}\n</code></pre>\n\n<p>Is this possible? If not, is there a different but equally convenient way? I concede that</p>\n\n<pre><code>fun someFunction(parameter: SomeClass) {\n    synchronized(this) {\n        sharedResource.operation(parameter)\n    }\n}\n</code></pre>\n\n<p>isn't the biggest hassle in the world, but I'd still like to know if it's possible to do something similar to what I imagined.</p>\n"}, {"tags": ["kotlin", "kotlin-multiplatform"], "comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512764677, "post_id": 47721483, "comment_id": 82403829, "body": "This is an invalid main method signature"}, {"owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512769140, "post_id": 47721483, "comment_id": 82405640, "body": "@1blustone I got the same, though I changed it to be <code>fun main(args: Array&lt;String&gt;) {     println(&quot;kotlin!&quot;) }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5826, "user_id": 14379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77ca2a8cac1b10c9ef94c42e1263ac6?s=128&d=identicon&r=PG", "display_name": "seanf", "link": "https://stackoverflow.com/users/14379/seanf"}, "is_accepted": true, "score": 1, "last_activity_date": 1513230020, "creation_date": 1513230020, "answer_id": 47806546, "question_id": 47721483, "link": "https://stackoverflow.com/questions/47721483/setting-up-a-multiplatform-project/47806546#47806546", "title": "Setting Up a Multiplatform Project", "body": "<p>With Kotlin 1.2, common modules don't generate binaries (like .class files), only metadata files. This is true <strong>even if you don't use the <code>expect</code> keyword anywhere</strong>.</p>\n\n<p>So you have to create another module which includes something like this:</p>\n\n<pre><code>apply plugin: 'kotlin-platform-jvm'\n</code></pre>\n\n<p>The JVM modules will also need an <code>expectedBy</code> entry in <code>dependencies</code> for your common module. Plus you'll probably want a corresponding JS module of course.</p>\n\n<p>It's probably best to let IntelliJ create the whole multiplatform project for you and then edit the Gradle files to suit, but this page lists the manual steps: <a href=\"https://kotlinlang.org/docs/reference/multiplatform.html#setting-up-a-multiplatform-project\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/multiplatform.html#setting-up-a-multiplatform-project</a></p>\n"}], "owner": {"reputation": 15416, "user_id": 2441637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z8fpp.jpg?s=128&g=1", "display_name": "Hasan A Yousef", "link": "https://stackoverflow.com/users/2441637/hasan-a-yousef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 1, "accepted_answer_id": 47806546, "answer_count": 1, "score": 0, "last_activity_date": 1513230020, "creation_date": 1512763828, "question_id": 47721483, "link": "https://stackoverflow.com/questions/47721483/setting-up-a-multiplatform-project", "title": "Setting Up a Multiplatform Project", "body": "<p>considering <code>Kotlin 1.2</code> introduced <code>kotlin-platform-common</code> I'm trying to build my first common <code>.class</code> file, so I did the below:</p>\n\n<p><code>main.kt</code>:</p>\n\n<pre><code>package hello\n\nfun main() {\n    println(\"kotlin!\")\n} \n</code></pre>\n\n<p><code>gradle.build</code>:</p>\n\n<pre><code>group 'h'\nversion 'prn'\n\nbuildscript {\n    ext.kotlin_version = '1.2.0'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin-platform-common'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib-common:$kotlin_version\"\n}\n\nsourceSets {\n    main.kotlin.srcDirs += 'src/kotlin'\n    main.resources.srcDirs += 'src/resources'\n}\n\njar {\n    manifest {\n        attributes 'Main-Class': 'hello.MainKt'\n    }\n    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\n}\n</code></pre>\n\n<p>Then I run <code>gradle build</code></p>\n\n<p>Q1- I coud not find any <code>.class</code> file generated? how to get it generated and where should I find it?</p>\n\n<p>Q2- I got a <code>.jar</code> file generated, but once I tried to run it, I got an error:</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class hello.MainKt</p>\n</blockquote>\n\n<p>I tried to run it using the below 2 option, but got the same error for bot:</p>\n\n<p>Option 1:</p>\n\n<pre><code>kotlin -cp &lt;filename&gt;.jar hello.MainKt\n</code></pre>\n\n<p>Option 2:</p>\n\n<pre><code>java -jar &lt;filename&gt;.jar\n</code></pre>\n\n<p>Project structure, and errors are as in this pic below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Osljj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Osljj.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "edited": false, "score": 0, "creation_date": 1512762290, "post_id": 47720999, "comment_id": 82402886, "body": "Moved my extension function out of the class. Still no luck."}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "edited": false, "score": 0, "creation_date": 1512762320, "post_id": 47720999, "comment_id": 82402898, "body": "@ZumryMohamed Are you sure? My first code snippet works for me, and it prints &quot;Value is null&quot;. <a href=\"https://ideone.com/AiJbG8\" rel=\"nofollow noreferrer\">Here&#39;s an ideone link</a>."}, {"owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "edited": false, "score": 0, "creation_date": 1512794612, "post_id": 47720999, "comment_id": 82411463, "body": "Great answer anyway. Even though your first answer was failed, second edit has given me good understanding. I love your explanation. I will buzz you for my other questions too. Thanks."}], "tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 6, "last_activity_date": 1512763791, "last_edit_date": 1592644375, "creation_date": 1512761491, "answer_id": 47720999, "question_id": 47720935, "link": "https://stackoverflow.com/questions/47720935/kotlin-extension-any-tostring/47720999#47720999", "title": "Kotlin Extension Any?.toString()", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">Extension functions</a> have <a href=\"https://kotlinlang.org/docs/reference/extensions.html#scope-of-extensions\" rel=\"nofollow noreferrer\">scopes</a>. This is why it is not accessible outside of the <code>ExtensionExample</code> class.</p>\n<p>Usually, extension functions are defined as top-level functions. That is, they tend to belong <em>outside of a class</em>.</p>\n<p>Your <code>toString</code> extension is defined within <code>ExtensionExample</code>. <a href=\"https://kotlinlang.org/docs/reference/extensions.html#declaring-extensions-as-members\" rel=\"nofollow noreferrer\">This is possible</a>, but it means <strong>it is only available in the scope of this class, and this class only</strong>.</p>\n<p>Your <code>main</code> method is likely a top-level function (and not a member of that class), so it doesn't have access to this extension function.</p>\n<p>Only other members can access this extension function:</p>\n<pre><code>class ExtensionExample {\n\n    var name: String? = null\n\n    fun Any?.toString(): String {\n        return if (this == null) &quot;Value is null&quot; else &quot;Value is not null&quot;\n    }\n\n    fun foo() {\n        println(name.toString())\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    ExtensionExample().foo()\n}\n</code></pre>\n<p>prints <code>&quot;Value is null&quot;</code></p>\n<p><a href=\"https://ideone.com/jqQBh0\" rel=\"nofollow noreferrer\">Try it online!</a></p>\n<p>The reason why it compiles is that the <code>toString</code> method that is being called is the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to-string.html\" rel=\"nofollow noreferrer\"><code>Any?.toString</code></a> method from the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"nofollow noreferrer\">kotlin-stdlib</a>. That is, <em>this method already exists</em>.</p>\n<blockquote>\n<p><code>fun Any?.toString(): String</code></p>\n<p>Returns a string representation of the object. Can be called with a null receiver, in which case it returns the string &quot;null&quot;.</p>\n</blockquote>\n<p><strong>Move your extension function out of the class</strong>. Your extension function will then <em>hide</em> the stdlib's extension, and any invocation in the same package not explicitly importing <code>kotlin.toString</code> will use your function.</p>\n<p><strong>Here is a working version of your code</strong>:</p>\n<pre><code>class ExtensionExample {\n\n    var name: String? = null\n\n}\n\nfun Any?.toString(): String {\n    return if (this == null) &quot;Value is null&quot; else &quot;Value is not null&quot;\n}\n\nfun main(args: Array&lt;String&gt;) {\n    println(ExtensionExample().name.toString())\n}\n</code></pre>\n<p>prints <code>&quot;Value is null&quot;</code>, as you wanted.</p>\n<p><a href=\"https://ideone.com/AiJbG8\" rel=\"nofollow noreferrer\">Try it online!</a></p>\n<hr />\n<p>Note that you cannot hide a member function using an extension function. That is,</p>\n<pre><code>class Test {\n\n    fun a() {\n        println(&quot;a&quot;)\n    }\n\n}\n\nfun Test.a() {\n    println(&quot;b&quot;)\n}\n\n...\nTest().a()\n</code></pre>\n<p>will result in &quot;a&quot; being printed.</p>\n<p>The only reason why your <code>Any?.toString</code> works (after being moved out of the class) is that <strong><code>Any?</code> has no members</strong> as it is not a class, but a nullable type with the class <code>Any</code>. The already existing <code>toString</code> method is also an extension, so yours is not hidden by any members.</p>\n"}, {"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512762398, "post_id": 47721069, "comment_id": 82402930, "body": "Correct me if I am wrong, but the extension function isn&#39;t shadowing <code>Any.toString</code> (nor is it in scope at all)."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512764078, "post_id": 47721069, "comment_id": 82403591, "body": "Hmm. That is correct. Not only can it not shadow it, it&#39;s also not in scope. Thanks for the correction!"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 0, "last_activity_date": 1512761770, "creation_date": 1512761770, "answer_id": 47721069, "question_id": 47720935, "link": "https://stackoverflow.com/questions/47720935/kotlin-extension-any-tostring/47721069#47721069", "title": "Kotlin Extension Any?.toString()", "body": "<blockquote>\n  <p>If a class has a member function, and an extension function is defined which has the same receiver type, the same name and is applicable to given arguments, the member always wins.</p>\n</blockquote>\n\n<p>Your extension method can't shadow the built-in <code>toString</code> method on the <code>Any</code> (<code>Object</code>) class.</p>\n\n<p>As for calling <code>toString</code> on a nullable type, this method is already in the Kotlin runtime:</p>\n\n<pre><code>/**\n * Returns a string representation of the object. Can be called with a null receiver, in which case\n * it returns the string \"null\".\n */\npublic fun Any?.toString(): String\n</code></pre>\n\n<p>See also the <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">docs</a> about the resolution of extensions.</p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1512763742, "last_edit_date": 1512763742, "creation_date": 1512763328, "answer_id": 47721377, "question_id": 47720935, "link": "https://stackoverflow.com/questions/47720935/kotlin-extension-any-tostring/47721377#47721377", "title": "Kotlin Extension Any?.toString()", "body": "<p><strong>Defining an extension function inside a class:</strong></p>\n\n<p>If you want to leave the definition of <code>toString()</code> within <code>ExtensionExample</code>, you can <strong>only</strong> use it from there:</p>\n\n<pre><code>class ExtensionExample() {\n    var name: String? = null\n\n    // uses the toString() extension function defined in ExtensionExample\n    fun useToString() = name.toString()\n\n    fun Any?.toString(): String {\n\n        if (this == null) {\n            return \"inside: Value is null\"\n        }\n        return \"inside: Value is not null\"\n    }\n}\n</code></pre>\n\n<p>This</p>\n\n<pre><code>// uses the version of toString() defined in the Kotlin Standard library\nprintln(ExtensionExample().name.toString()) \n\n// uses the inside version of toString()\nprintln(ExtensionExample().useToString())\n</code></pre>\n\n<p>will print</p>\n\n<blockquote>\n  <p>null<br>\n  inside: Value is null</p>\n</blockquote>\n\n<p><strong>Defining an extension function outside a class:</strong></p>\n\n<p>But if you want to use it outside, you have to move it outside:</p>\n\n<pre><code>class ExtensionExample() {\n    var name: String? = null\n\n    // uses the toString() extension function defined in ExtensionExample\n    fun useToString() = name.toString()\n\n    fun Any?.toString(): String {\n\n        if (this == null) {\n            return \"inside: Value is null\"\n        }\n        return \"inside: Value is not null\"\n    }\n}\n\nfun Any?.toString(): String {\n\n    if (this == null) {\n        return \"outside: Value is null\"\n    }\n    return \"outside: Value is not null\"\n}\n</code></pre>\n\n<p>This</p>\n\n<pre><code>// uses the outside version of toString() which overrides the one from the Kotlin Standard library\nprintln(ExtensionExample().name.toString())  \n\n// uses the inside version of toString()\nprintln(ExtensionExample().useToString())\n</code></pre>\n\n<p>will print:</p>\n\n<blockquote>\n  <p>outside: Value is null<br>\n  inside: Value is null</p>\n</blockquote>\n"}], "owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2742, "favorite_count": 0, "accepted_answer_id": 47720999, "answer_count": 3, "score": 3, "last_activity_date": 1512763791, "creation_date": 1512761215, "last_edit_date": 1512762865, "question_id": 47720935, "link": "https://stackoverflow.com/questions/47720935/kotlin-extension-any-tostring", "title": "Kotlin Extension Any?.toString()", "body": "<p>I have been trying to use extension functions in Kotlin.</p>\n\n<pre><code>class ExtensionExample() {\n\n   var name: String? = null\n\n   fun Any?.toString() : String {\n\n       if (this == null) {\n           return \"Value is null\"\n       }\n\n       return \"Value is not null\"\n   }\n}\n</code></pre>\n\n<p>When I print the name variable like below </p>\n\n<pre><code>println(ExtensionExample().name.toString())\n</code></pre>\n\n<p>It should print like </p>\n\n<pre><code>Value is null\n</code></pre>\n\n<p>But it doesn't print like I expected. It only prints <code>null</code>.</p>\n\n<p>Can someone explain please?</p>\n"}, {"tags": ["android", "asynchronous", "kotlin", "progress"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 4111264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6eNho.jpg?s=128&g=1", "display_name": "lucas.mdo", "link": "https://stackoverflow.com/users/4111264/lucas-mdo"}, "edited": false, "score": 0, "creation_date": 1512822920, "post_id": 47727620, "comment_id": 82417641, "body": "Cheers mate, we&#39;ve followed a similar approach!"}], "tags": [], "owner": {"reputation": 6188, "user_id": 172690, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3759fa3ad04a0fd20729382956f24a3?s=128&d=identicon&r=PG", "display_name": "Grzegorz Adam Hankiewicz", "link": "https://stackoverflow.com/users/172690/grzegorz-adam-hankiewicz"}, "is_accepted": true, "score": -1, "last_activity_date": 1512815566, "creation_date": 1512815566, "answer_id": 47727620, "question_id": 47719891, "link": "https://stackoverflow.com/questions/47719891/how-to-properly-show-progress-of-async-tasks-used-by-google-room/47727620#47727620", "title": "How to properly show progress of async tasks used by Google Room", "body": "<p>To prevent the user from using the app while the fetch is working you can use a library like <a href=\"https://github.com/Kaopiz/KProgressHUD\" rel=\"nofollow noreferrer\">KProgressHUD</a> to display a modal, user interface blocking HUD, which can optionally include a progress indicator. You only need to replace the <code>show progress indicator here</code> comment with the modal HUD creation and <code>//dismiss progress indicator here</code> with removal of the HUD on the UI thread.</p>\n\n<p>With regards to progress, you have to manually update the HUD progress inside your <code>execute</code> code. First you need to split your dao <code>findAll()</code> call into one that returns the number of elements you have in total (some <code>SELECT COUNT(*)</code> query) to know how long the total progress bar might be. Then, instead of <code>findAll()</code> you would need to create batched/paged calls to the database, fetching N records in a loop. Inside this loop you can then update the HUD with the percentage of your current loop progress vs the total count you got before starting.</p>\n\n<p>I'm not familiar with the Room API, so I can't provide any pseudo code on such a loop, but usually it all boils down to opening an SQL cursor and keep fetching batches of data in a loop until it is exhausted, keeping track of how many have items have you read and accumulating them in a list.</p>\n"}], "owner": {"reputation": 299, "user_id": 4111264, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6eNho.jpg?s=128&g=1", "display_name": "lucas.mdo", "link": "https://stackoverflow.com/users/4111264/lucas-mdo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 1, "accepted_answer_id": 47727620, "answer_count": 1, "score": 0, "last_activity_date": 1512815566, "creation_date": 1512756175, "question_id": 47719891, "link": "https://stackoverflow.com/questions/47719891/how-to-properly-show-progress-of-async-tasks-used-by-google-room", "title": "How to properly show progress of async tasks used by Google Room", "body": "<p>I'm using Google Room to implement persistence of data in my Android app (Kotlin code). Room demands all the operations (queries to and from the database) to be async. I would like the user to wait for the operation to execute, preventing him from interacting with components that would not be configured properly before the end of the query. How can I achieve this, since I can't access the UI thread from a async task?</p>\n\n<p>PS: I also do some calls to an API where the progress/loading indicator would be nice to have. I'm using RxJava in those calls, but I'm fairly new to this technology, and I'm not sure how to properly structure it.</p>\n\n<p>Sample of a db operation:</p>\n\n<pre><code>private fun getDataFromCache() {\n  //show progress indicator here\n        execute({\n            try {\n                //Get items from cache\n                val entities = daoData.findAll()\n\n                if (entities.isNotEmpty()) {\n                    //do something\n                } else {\n                    //do something else\n                }\n            }\n            catch (e: Exception){\n                Log.e(\"error\", e.toString())\n            }\n            finally{\n                //dismiss progress indicator here\n            }\n        })\n    }\n</code></pre>\n"}, {"tags": ["android", "android-intent", "google-drive-api", "kotlin", "android-file"], "comments": [{"owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1512928415, "post_id": 47719350, "comment_id": 82443493, "body": "You may want to check this <a href=\"https://stackoverflow.com/questions/35503195/infinite-choose-an-account-loop-when-using-google-drive-api\">SO post</a>. It stated that it might happen if you did not create the credentials for your app. You may also check this related thread if it works: <a href=\"https://stackoverflow.com/questions/41676982/google-drive-api-cant-connect-authorize-to-google-account\">Google Drive Api can&#39;t connect/authorize to google account</a>."}], "owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512753951, "creation_date": 1512753951, "question_id": 47719350, "link": "https://stackoverflow.com/questions/47719350/uploading-local-files-to-google-drive-using-drive-application-and-without-apis", "title": "Uploading local files to Google Drive using Drive application and without APIs", "body": "<p>I am trying to upload local files to Google drive using installed Drive application.\nCode:</p>\n\n<pre><code>    driveIntent.`package` = \"com.google.android.apps.docs\"\n    driveIntent.action = Intent.ACTION_VIEW\n    val fileId = File(this.cacheDir.path + \"/SensorReport.pdf\")\n    val url = \"https://docs.google.com/file/d/\" + fileId\n    driveIntent.data = Uri.parse(url)\n    driveIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)\n    startActitivty(driveIntent)\n</code></pre>\n\n<p>Problem is that it only shows \"Google account selector\" dialog box and when an account is selected, the dialog is dismissed and there is no notification or Drive application screen.</p>\n"}, {"tags": ["gradle", "kotlin"], "comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 1, "creation_date": 1512783240, "post_id": 47719272, "comment_id": 82409606, "body": "Looks like this should work - are you sure your internet connection is working properly? The error indicates a problem with this"}, {"owner": {"reputation": 51, "user_id": 7415529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e5041013d84a8fbda5abab53c1f8cd?s=128&d=identicon&r=PG&f=1", "display_name": "schizoid90", "link": "https://stackoverflow.com/users/7415529/schizoid90"}, "reply_to_user": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1512983353, "post_id": 47719272, "comment_id": 82459041, "body": "Yes definitely connected to the internet and I am able to wget the repo.maven.appache.org link from the OP"}], "answers": [{"tags": [], "owner": {"reputation": 1469, "user_id": 3849039, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wDC1c.jpg?s=128&g=1", "display_name": "AnupamChugh", "link": "https://stackoverflow.com/users/3849039/anupamchugh"}, "is_accepted": false, "score": 1, "last_activity_date": 1515342377, "creation_date": 1515342377, "answer_id": 48139174, "question_id": 47719272, "link": "https://stackoverflow.com/questions/47719272/gradle-build-for-kotlin-code/48139174#48139174", "title": "gradle build for kotlin code", "body": "<p>Try this. It works:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.10'\n\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7415529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e5041013d84a8fbda5abab53c1f8cd?s=128&d=identicon&r=PG&f=1", "display_name": "schizoid90", "link": "https://stackoverflow.com/users/7415529/schizoid90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1520226223, "creation_date": 1512753597, "question_id": 47719272, "link": "https://stackoverflow.com/questions/47719272/gradle-build-for-kotlin-code", "title": "gradle build for kotlin code", "body": "<p>I'm trying to set up a project building Kotlin code with Gradle. I've followed instructions <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">here</a> on how to set up the build.gradle file but am receiving an error</p>\n\n\n\n<pre><code>buildscript {\n    repositories {\n        mavenCentral()\n        jcenter()\n    }\n    dependencies {\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.0'\n    }\n}\n\napply plugin: 'kotlin'\n</code></pre>\n\n<p>With this I get the error:</p>\n\n<blockquote>\n  <p>FAILURE: Build failed with an exception.</p>\n  \n  <ul>\n  <li>What went wrong:\n  A problem occurred configuring root project 'kjsonparser'.\n  Could not resolve all files for configuration ':classpath'.\n  Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.0.\n   Required by:\n       project :\n  Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.2.0.\n  Could not get resource '<a href=\"https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.2.0/kotlin-gradle-plugin-1.2.0.pom\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.2.0/kotlin-gradle-plugin-1.2.0.pom</a>'.\n  Could not GET '<a href=\"https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.2.0/kotlin-gradle-plugin-1.2.0.pom\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.2.0/kotlin-gradle-plugin-1.2.0.pom</a>'.\n  java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty</li>\n  </ul>\n</blockquote>\n\n<p>I've also tried the \"newer\" way of specifing the plugin</p>\n\n<pre><code>plugins {\n    id \"org.jetbrains.kotlin.jvm\" version \"1.2.0\"\n}\n</code></pre>\n\n<p>Which gives this error:</p>\n\n<blockquote>\n  <ul>\n  <li>What went wrong:\n  Plugin [id: 'org.jetbrains.kotlin.jvm', version: '1.2.0'] was not found in any >of the following sources:</li>\n  </ul>\n  \n  <p>Gradle Core Plugins (plugin is not in 'org.gradle' namespace)\n  - Plugin Repositories (could not resolve plugin artifact >'org.jetbrains.kotlin.jvm:org.jetbrains.kotlin.jvm.gradle.plugin:1.2.0')\n   Searched in the following repositories:\n     Gradle Central Plugin Repository</p>\n</blockquote>\n\n<p>Version of Gradle </p>\n\n<pre><code>gradle -version\n\n------------------------------------------------------------\nGradle 4.4\n</code></pre>\n\n<p>Kotlin (and openjdk)\n    kotlin -version\n    Kotlin version 1.2.0 (JRE 1.8.0_151-8u151-b12-0ubuntu0.17.10.2-b12)</p>\n\n<p>Running on Ubuntu 17.10</p>\n\n<p>I've never worked with Gradle before so not sure if I'm missing anything in the build file</p>\n"}, {"tags": ["spring", "tomcat", "kotlin"], "comments": [{"owner": {"reputation": 363, "user_id": 241808, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bb3e44ae35d113d6ab67cccfe7c7be6?s=128&d=identicon&r=PG", "display_name": "jawath", "link": "https://stackoverflow.com/users/241808/jawath"}, "edited": false, "score": 0, "creation_date": 1512751324, "post_id": 47717948, "comment_id": 82397470, "body": "please provide the controller mapping"}, {"owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "reply_to_user": {"reputation": 363, "user_id": 241808, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bb3e44ae35d113d6ab67cccfe7c7be6?s=128&d=identicon&r=PG", "display_name": "jawath", "link": "https://stackoverflow.com/users/241808/jawath"}, "edited": false, "score": 0, "creation_date": 1512752062, "post_id": 47717948, "comment_id": 82397868, "body": "Updated me question"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "edited": false, "score": 0, "creation_date": 1512984029, "post_id": 47718908, "comment_id": 82459423, "body": "I have the same problem. I use /proxynator/ because it&#39;s my application on remote server. On local server it&#39;s working like you wrote."}, {"owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "edited": false, "score": 0, "creation_date": 1512984985, "post_id": 47718908, "comment_id": 82459992, "body": "And You can try to do it, because it&#39;s open port, if You can see anything, except index.html text &quot;Hello World&quot; on link &quot;<a href=\"http://109.206.178.66:8080/proxynator/\" rel=\"nofollow noreferrer\">109.206.178.66:8080/proxynator</a>&quot;, tell me, please."}, {"owner": {"reputation": 363, "user_id": 241808, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bb3e44ae35d113d6ab67cccfe7c7be6?s=128&d=identicon&r=PG", "display_name": "jawath", "link": "https://stackoverflow.com/users/241808/jawath"}, "reply_to_user": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "edited": false, "score": 0, "creation_date": 1512985399, "post_id": 47718908, "comment_id": 82460223, "body": "what is you web xml configuration"}, {"owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "edited": false, "score": 0, "creation_date": 1512986327, "post_id": 47718908, "comment_id": 82460816, "body": "I don&#39;t have it"}], "tags": [], "owner": {"reputation": 363, "user_id": 241808, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bb3e44ae35d113d6ab67cccfe7c7be6?s=128&d=identicon&r=PG", "display_name": "jawath", "link": "https://stackoverflow.com/users/241808/jawath"}, "is_accepted": false, "score": 0, "last_activity_date": 1512806087, "last_edit_date": 1512806087, "creation_date": 1512752353, "answer_id": 47718908, "question_id": 47717948, "link": "https://stackoverflow.com/questions/47717948/dont-have-access-to-spring-boot-controller-but-have-access-to-index-html/47718908#47718908", "title": "Don&#39;t have access to Spring boot controller, but have access to index.html", "body": "<p>your api access url is wrong  access using <a href=\"http://109.206.178.66:8080/countries\" rel=\"nofollow noreferrer\">http://109.206.178.66:8080/countries</a> this is the correct path for your rest mapping,  not <a href=\"http://109.206.178.66:8080/proxynator/countries\" rel=\"nofollow noreferrer\">http://109.206.178.66:8080/proxynator/countries</a></p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "is_accepted": true, "score": 0, "last_activity_date": 1513001842, "creation_date": 1513001842, "answer_id": 47754882, "question_id": 47717948, "link": "https://stackoverflow.com/questions/47717948/dont-have-access-to-spring-boot-controller-but-have-access-to-index-html/47754882#47754882", "title": "Don&#39;t have access to Spring boot controller, but have access to index.html", "body": "<p>To solve this problem I was edit my Application class.</p>\n\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\nopen class Application: SpringBootServletInitializer(){\n\n    @Override\n    override fun configure(application: SpringApplicationBuilder?): \n    SpringApplicationBuilder {\n        return super.configure(application)\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    SpringApplication.run(Application::class.java, *args)\n}\n</code></pre>\n\n<p>I was override configure method, and all is working!\nHope it will save time for anybody!</p>\n"}], "owner": {"reputation": 153, "user_id": 8783870, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d2871c3db4316ba297ca59fb84ff3a00?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/8783870/vadym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 47754882, "answer_count": 2, "score": 0, "last_activity_date": 1513001842, "creation_date": 1512748839, "last_edit_date": 1513000387, "question_id": 47717948, "link": "https://stackoverflow.com/questions/47717948/dont-have-access-to-spring-boot-controller-but-have-access-to-index-html", "title": "Don&#39;t have access to Spring boot controller, but have access to index.html", "body": "<p>I have a Spring Boot project, what I deployed on remote server. When I call <code>http://109.206.178.66:8080/proxynator/</code> - I can see an <code>index.html</code>, but when I call rest controller by url <code>http://109.206.178.66:8080/proxynator/countries</code> - I have an error 404 whith</p>\n\n<blockquote>\n  <p>Description: The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.</p>\n</blockquote>\n\n<p>It's strangely, because when I start this project on my local machine, all working right. Project structure is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/USj1C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/USj1C.png\" alt=\"project structure\"></a></p>\n\n<p>Line from <code>catalina.out</code> file:</p>\n\n<blockquote>\n  <p>SEVERE [http-nio-8080-exec-19] org.apache.tomcat.util.descriptor.web.WebXmlParser.parseWebXml Parse error in application web.xml file at [file:/opt/tomcat/webapps/proxynator/WEB-INF/web.</p>\n</blockquote>\n\n<p>My controller:</p>\n\n<pre><code>@RestController\nclass MainController(val proxyRepo: ProxyRepo, val countryRepo: \nCountryRepo) {\n\n@GetMapping(\"/countries\")\nfun findCountries(): List&lt;Country&gt; = countryRepo.findAll()\n\n@GetMapping(\"/proxies\")\n@ResponseBody\nfun findProxies(@RequestParam countryid: Int): List&lt;Proxy&gt; = \nproxyRepo.findAllByCountryid(countryid)\n}\n</code></pre>\n\n<h2>UPD</h2>\n\n<p>I added configuration class on the root package</p>\n\n<pre><code>@Configuration\nopen class RestConfiguration {\n    @Bean\n    open fun mainController():MainController\n            = MainController()\n}\n</code></pre>\n\n<p>But it does not working. I don't understand, why I can see <code>index.html</code> by irl <code>http://109.206.178.66:8080/proxynator/</code>, but can't get access to my controllers. When I package my project I have some files:\n<a href=\"https://i.stack.imgur.com/UJaSz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UJaSz.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any advice?</p>\n"}, {"tags": ["javascript", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1512748466, "post_id": 47717743, "comment_id": 82395886, "body": "I think its less difficult to merge the whole project in one step"}, {"owner": {"reputation": 51, "user_id": 6856347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bd9fce322cd5a2dcb2fde4df6cff0a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Cochran", "link": "https://stackoverflow.com/users/6856347/j-cochran"}, "reply_to_user": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1512749214, "post_id": 47717743, "comment_id": 82396341, "body": "The project is large and there are a lot of javascript files.  So I know in my question is if you can include 1 file but I will most likely be including a lot more.  I just want to know if it is possible."}], "answers": [{"tags": [], "owner": {"reputation": 2796, "user_id": 200841, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3fcce8448e3ceef9419ac86f6bb3fcb?s=128&d=identicon&r=PG", "display_name": "Gregor Petrin", "link": "https://stackoverflow.com/users/200841/gregor-petrin"}, "is_accepted": false, "score": 0, "last_activity_date": 1512811910, "creation_date": 1512811910, "answer_id": 47727186, "question_id": 47717743, "link": "https://stackoverflow.com/questions/47717743/including-javascript-files-not-module-in-kotlin/47727186#47727186", "title": "Including Javascript Files (not module) in Kotlin", "body": "<p>You can use Gradle's Ant integration for that. Here's an example from <a href=\"https://discuss.gradle.org/t/concatenate-more-than-100-files/12014/4\" rel=\"nofollow noreferrer\">Gradle forums</a>:</p>\n\n<pre><code>task concat(type: SourceTask) {\n    source 'src'\n    include '**/*.txt'\n    outputs.file new File(buildDir, \"full.txt\")\n\n    doLast {\n        ant.concat(destfile: outputs.files.singleFile) {\n            source.addToAntBuilder(ant, 'fileset', FileCollection.AntType.FileSet)\n        }\n    }\n}\n</code></pre>\n\n<p>This will concatenate a bunch of files into a single <code>full.txt</code> file - adapt it to your specific case and have the task execute prior to assembling your final build artifact.</p>\n\n<p>I have to say that for Javascript builds Gradle's integration with tools like Gulp and Grunt (via plugins) may be an even better match for you - those tools can naturally handle simple JS file concatenation, but they also offer many more tasks useful for working with web technologies.</p>\n"}], "owner": {"reputation": 51, "user_id": 6856347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75bd9fce322cd5a2dcb2fde4df6cff0a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Cochran", "link": "https://stackoverflow.com/users/6856347/j-cochran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1512811910, "creation_date": 1512748183, "question_id": 47717743, "link": "https://stackoverflow.com/questions/47717743/including-javascript-files-not-module-in-kotlin", "title": "Including Javascript Files (not module) in Kotlin", "body": "<p>I have two Javascript files. I have some Kotlin code that generates a Javascript file.  I also have a file (call it file.js) that depends on the generated javascript file from Kotlin.   </p>\n\n<p>Is there a way for me to include file.js in the Kotlin generated Javascript file using Gradle?  Is there a setting that can append resource Javascript files into the generated output?</p>\n\n<p>My motivation is to slowly transition my Javascript project into Kotlin, and due to the structure of the project, I cannot create a module.  Just want to know if it is possible to do this and how.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512753335, "post_id": 47719143, "comment_id": 82398618, "body": "Huh, interesting. So I probably found a bug in the kotlin Compiler?"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512753443, "post_id": 47719143, "comment_id": 82398679, "body": "@usbpc102 It seems like you have, though it does seem odd that this would occur"}, {"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512753521, "post_id": 47719143, "comment_id": 82398710, "body": "I just checked and your assumption <a href=\"https://stackoverflow.com/questions/45763075/what-is-the-inlineonly-annotation\">why it is private is correct</a>"}, {"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "reply_to_user": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512753604, "post_id": 47719143, "comment_id": 82398765, "body": "@usbpc102 ah, thank you for the reference :) So it seems the intent is indeed to only allow inlining of the method. Since this does not occur here I think it is safe to call this a bug."}, {"owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "edited": false, "score": 0, "creation_date": 1512754098, "post_id": 47719143, "comment_id": 82399030, "body": "Thanks a lot! I&#39;m on my way reporting it to jetbrains :)"}], "tags": [], "owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "is_accepted": true, "score": 4, "last_activity_date": 1513112896, "last_edit_date": 1513112896, "creation_date": 1512753195, "answer_id": 47719143, "question_id": 47717542, "link": "https://stackoverflow.com/questions/47717542/kotlin-illegalaccesserror-with-and-for-delegated-interface/47719143#47719143", "title": "Kotlin IllegalAccessError with += and -= for delegated Interface", "body": "<p>Edit: yes, this is a bug, it has been merged with <a href=\"https://youtrack.jetbrains.com/issue/KT-14227\" rel=\"nofollow noreferrer\">KT-14227</a>:</p>\n\n<blockquote>\n  <p>Incorrect code is generated when using <code>MutableMap.set</code> with <code>plusAssign</code> operator</p>\n</blockquote>\n\n<hr>\n\n<p>After compilation (or decompilation, in this case), <code>MapsKt.set</code> is turned into a <code>private</code> method:</p>\n\n<pre><code>@InlineOnly\nprivate static final void set(@NotNull Map $receiver, Object key, Object value) {\n    Intrinsics.checkParameterIsNotNull($receiver, \"$receiver\");\n    $receiver.put(key, value);\n}\n</code></pre>\n\n<p>This explains the <code>IllegalAccessError</code>.</p>\n\n<p><s>Now, as to why it is private, I'm only speculating, but I feel like it may be due to this:</s></p>\n\n<p><a href=\"https://stackoverflow.com/users/4284268/usbpc102\">@usbpc102</a> pointed out that <a href=\"https://discuss.kotlinlang.org/t/how-does-synchronized-work/1528/2\" rel=\"nofollow noreferrer\"><code>@InlineOnly</code> is indeed the reason for the method being <code>private</code></a>.</p>\n\n<p><code>@InlineOnly</code> specifies that the method should never be called directly:</p>\n\n<blockquote>\n  <p>Specifies that this function should not be called directly without inlining</p>\n</blockquote>\n\n<p>so I feel like this is a case where the call to <code>set</code> <em>should</em> have been inlined, but it was not.</p>\n\n<p>Had the call been inlined, you would have ended up with compiled code that is practically identical to the working version, since the method only contains a call to <code>put</code>.</p>\n\n<p>I suspect this is due to a compiler bug.</p>\n"}], "owner": {"reputation": 846, "user_id": 4284268, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/30b644609ddad0c9648857d5c04cdb3b?s=128&d=identicon&r=PG&f=1", "display_name": "usbpc102", "link": "https://stackoverflow.com/users/4284268/usbpc102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 47719143, "answer_count": 1, "score": 8, "last_activity_date": 1513112896, "creation_date": 1512747561, "last_edit_date": 1512762902, "question_id": 47717542, "link": "https://stackoverflow.com/questions/47717542/kotlin-illegalaccesserror-with-and-for-delegated-interface", "title": "Kotlin IllegalAccessError with += and -= for delegated Interface", "body": "<p>I've defined this class:</p>\n\n<pre><code>class NeverNullMap&lt;K, V&gt;(private val backing: MutableMap&lt;K, V&gt; = mutableMapOf(), val default: () -&gt; V): MutableMap&lt;K, V&gt; by backing {\n    override operator fun get(key: K): V = backing.getOrPut(key, default)\n}\n</code></pre>\n\n<p>And I can use it perfectly fine like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val myMap = NeverNullMap&lt;String, Int&gt; {0}\n    println(myMap[\"test\"])\n    myMap[\"test\"] = myMap[\"test\"] + 10\n    println(myMap[\"test\"])\n}\n</code></pre>\n\n<p>as expected the output is:</p>\n\n<pre><code>0\n10\n</code></pre>\n\n<p>But when I try to change it to:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val myMap = NeverNullMap&lt;String, Int&gt; {0}\n    println(myMap[\"test\"])\n    myMap[\"test\"] += 10\n    println(myMap[\"test\"])\n}\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.IllegalAccessError: tried to access method kotlin.collections.MapsKt__MapsKt.set(Ljava/util/Map;Ljava/lang/Object;Ljava/lang/Object;)V from class Day08Kt\n    at Day08Kt.main(Day08.kt:10)\n</code></pre>\n\n<p>Why is this happening?</p>\n\n<p>Edit:</p>\n\n<p>Digging a bit into decompiled code both get compiled to completly diffrent code. </p>\n\n<p>In the working version without the <code>+=</code> it gets compiled to:</p>\n\n<pre><code>  Map var2 = (Map)myMap;\n  String var3 = \"test\";\n  Integer var4 = ((Number)myMap.get(\"test\")).intValue() + 10;\n  var2.put(var3, var4);\n</code></pre>\n\n<p>The non working version gets compiled to:</p>\n\n<pre><code>MapsKt.set(myMap, \"test\", ((Number)myMap.get(\"test\")).intValue() + 10);\n</code></pre>\n\n<p>So it calles this function: <a href=\"https://github.com/JetBrains/kotlin/blob/1.2.0/libraries/stdlib/src/kotlin/collections/Maps.kt#L175\" rel=\"noreferrer\">https://github.com/JetBrains/kotlin/blob/1.2.0/libraries/stdlib/src/kotlin/collections/Maps.kt#L175</a></p>\n\n<p>I still have no idea why that produces the Error, just why the first version behaves diffrently.</p>\n\n<p>Edit: <a href=\"https://youtrack.jetbrains.com/issue/KT-21724\" rel=\"noreferrer\">YouTrack link to the report</a></p>\n"}, {"tags": ["android", "sqlite", "listview", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 6779428, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7iHZep3Vy2M/AAAAAAAAAAI/AAAAAAAAAKE/EdwihPWotOo/photo.jpg?sz=128", "display_name": "Aniket Bhoite", "link": "https://stackoverflow.com/users/6779428/aniket-bhoite"}, "is_accepted": false, "score": 0, "last_activity_date": 1512756428, "creation_date": 1512756428, "answer_id": 47719949, "question_id": 47716267, "link": "https://stackoverflow.com/questions/47716267/how-to-get-db-id-only-after-clicking-imagebutton-in-listview-item-with-kotlin/47719949#47719949", "title": "how to get DB id only after clicking imageButton in listView item with kotlin", "body": "<p>You are using cursor adapter, you should use ArrayAdapter.  <a href=\"http://www.gustekdev.com/2013/05/custom-cursoradapter-and-why-not-use.html\" rel=\"nofollow noreferrer\">Here is why custom-cursoradapter-and-why-not-use</a>\nand <a href=\"https://www.journaldev.com/10416/android-listview-with-custom-adapter-example-tutorial\" rel=\"nofollow noreferrer\">example of ArrayAdapter</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5614997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057695e58d294c1a6be457dcad48ea10?s=128&d=identicon&r=PG&f=1", "display_name": "kfir", "link": "https://stackoverflow.com/users/5614997/kfir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1512756428, "creation_date": 1512743019, "question_id": 47716267, "link": "https://stackoverflow.com/questions/47716267/how-to-get-db-id-only-after-clicking-imagebutton-in-listview-item-with-kotlin", "title": "how to get DB id only after clicking imageButton in listView item with kotlin", "body": "<p>i have a customAdapter class and a listView. i made the single_row layout with 3 textviews and one imageButton.\nnow my question is how can i get the DB id field, only from clicking on the imageButton and ignore clicks on the entire row?\nI know i can get the id with:</p>\n\n<pre><code>mListView.onItemClickListener = AdapterView.OnItemClickListener { adapterView, view, position, id -&gt;\n               view.delete.setOnClickListener(){\n                   Toast.makeText(context,\"\"+id,Toast.LENGTH_SHORT).show()\n              }\n</code></pre>\n\n<p>but this is working only if i click the entire row.\nI tried <code>android:descendantFocusability=\"blocksDescendants\"</code> in the root of the xml and <code>android:focusable=\"false\"</code> in the imageButton node, and the imageButton is not recognized anyway while the entire row is recognized. only if i using <code>button.onClickListener()...</code>\nthe click is recognized. but that way i don't know how to get the id.</p>\n\n<p>my adapter class code:</p>\n\n<pre><code>class MyAdapter(activity: Activity, context: Context, cursor: Cursor) : CursorAdapter(context, cursor, true) {\n\n    var inflater: LayoutInflater\n    lateinit var mListView: ListView\n\n    init {\n        this.inflater = LayoutInflater.from(context)\n        mListView = activity.listView\n    }\n\n    override fun newView(context: Context?, cursor: Cursor?, parent: ViewGroup?): View {\n        val view = LayoutInflater.from(context).inflate(R.layout.single_row, parent, false)\n\n        return view;\n    }\noverride fun bindView(view: View, context: Context, cursor: Cursor) {\n        val latitude = view.findViewById(R.id.latitude) as TextView\n        val longtitude = view.findViewById(R.id.longtitude) as TextView\n        val date = view.findViewById(R.id.date) as TextView\n        val asu = view.findViewById(R.id.asu) as TextView\n\n        latitude.setText(cursor.getString(cursor.getColumnIndex(Constants.Signal.LATITUDE)))\n        longtitude.setText(cursor.getString(cursor.getColumnIndex(Constants.Signal.LONGTITUDE)))\n        date.setText(cursor.getString(cursor.getColumnIndex(Constants.Signal.DATE)))\n        asu.setText(cursor.getString(cursor.getColumnIndex(Constants.Signal.ASU)))\n\n    }\n}\n</code></pre>\n\n<p>my single_row layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"horizontal\" android:layout_width=\"match_parent\"\n    android:id=\"@+id/list_item\"\n    android:layout_height=\"match_parent\"\n    android:descendantFocusability=\"blocksDescendants\"&gt;\n\n\n    &lt;TextView\n        android:id=\"@+id/latitude\"\n        android:layout_width=\"23dp\"\n        android:layout_height=\"53dp\"\n        android:layout_weight=\"0.20\"\n        android:text=\"latitude\"\n        android:gravity=\"center\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/longtitude\"\n        android:layout_width=\"23dp\"\n        android:layout_height=\"53dp\"\n        android:layout_weight=\"0.20\"\n        android:text=\"longtitude\"\n        android:gravity=\"center\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/date\"\n        android:layout_width=\"23dp\"\n        android:layout_height=\"53dp\"\n        android:layout_weight=\"0.20\"\n        android:gravity=\"center\"\n        android:text=\"date\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/asu\"\n        android:layout_width=\"23dp\"\n        android:layout_height=\"53dp\"\n        android:layout_weight=\"0.20\"\n        android:gravity=\"center\"\n        android:focusable=\"false\"\n        android:text=\"asu\"/&gt;\n\n    &lt;ImageButton\n        android:id=\"@+id/delete\"\n        android:layout_width=\"0.23dp\"\n        android:layout_height=\"53dp\"\n        android:layout_weight=\"0.20\"\n        android:focusable=\"false\"\n        android:src=\"@android:drawable/ic_menu_delete\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 1, "creation_date": 1512735470, "post_id": 47713611, "comment_id": 82388364, "body": "On JVM there is <code>java.lang.Character.getNumericValue()</code>: <a href=\"https://stackoverflow.com/questions/4968323/java-parse-int-value-from-a-char/21441921#21441921\" title=\"java parse int value from a char\">stackoverflow.com/questions/4968323/&hellip;</a>"}, {"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 1, "creation_date": 1512735637, "post_id": 47713611, "comment_id": 82388449, "body": "I think that the linked dup question is more specific and is unappropriately titled to close this one as duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 3, "creation_date": 1512735123, "post_id": 47713612, "comment_id": 82388160, "body": "This is technically incorrect because <code>isDigit</code> will return <code>true</code> for characters which are not necessarily <code>0-9</code>. <code>\u0661</code>, the character <code>&#39;ARABIC-INDIC DIGIT ONE&#39; (U+0661)</code>, <b>is a digit</b>, but <code>toInt() - 48</code> will return 1585 instead. You may want to use <code>this in &#39;0&#39;..&#39;9&#39;</code> instead."}, {"owner": {"reputation": 1885, "user_id": 948942, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RVb6e.png?s=128&g=1", "display_name": "Incinerator", "link": "https://stackoverflow.com/users/948942/incinerator"}, "reply_to_user": {"reputation": 9411, "user_id": 7366707, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EtdGg.png?s=128&g=1", "display_name": "Moira", "link": "https://stackoverflow.com/users/7366707/moira"}, "edited": false, "score": 0, "creation_date": 1512740526, "post_id": 47713612, "comment_id": 82391199, "body": "Thanks, updated the answer according to your feedback."}], "tags": [], "owner": {"reputation": 1885, "user_id": 948942, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RVb6e.png?s=128&g=1", "display_name": "Incinerator", "link": "https://stackoverflow.com/users/948942/incinerator"}, "is_accepted": false, "score": 7, "last_activity_date": 1512740239, "last_edit_date": 1512740239, "creation_date": 1512732947, "answer_id": 47713612, "question_id": 47713611, "link": "https://stackoverflow.com/questions/47713611/how-do-i-convert-a-digit-char-0-9-to-its-numeric-value/47713612#47713612", "title": "How do I convert a digit Char (0-9) to its numeric value?", "body": "<p>Answer:</p>\n\n<p>You can create an extension on the Char class which substracts 48 from the ASCII code returned by <code>toInt()</code>. This will give you the proper numerical value of the character!</p>\n\n<pre><code>fun Char.getNumericValue(): Int {\n    if (this !in '0'..'9') {\n        throw NumberFormatException()\n    }\n    return this.toInt() - '0'.toInt()\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1885, "user_id": 948942, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RVb6e.png?s=128&g=1", "display_name": "Incinerator", "link": "https://stackoverflow.com/users/948942/incinerator"}, "edited": false, "score": 1, "creation_date": 1512740384, "post_id": 47713784, "comment_id": 82391119, "body": "Indeed, but I suspect it&#39;s not as efficient if I need to run the operation a large number of times? Please correct me if I&#39;m wrong!"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 3, "last_activity_date": 1512733561, "creation_date": 1512733561, "answer_id": 47713784, "question_id": 47713611, "link": "https://stackoverflow.com/questions/47713611/how-do-i-convert-a-digit-char-0-9-to-its-numeric-value/47713784#47713784", "title": "How do I convert a digit Char (0-9) to its numeric value?", "body": "<p>You could also convert it to a <code>String</code> and then use <code>toInt()</code> which might be more obvious.</p>\n\n<pre><code>fun Char.getNumericValue(): Int {\n    if (!isDigit()) {\n        throw NumberFormatException()\n    }\n    return this.toString().toInt()\n}\n</code></pre>\n"}], "owner": {"reputation": 1885, "user_id": 948942, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/RVb6e.png?s=128&g=1", "display_name": "Incinerator", "link": "https://stackoverflow.com/users/948942/incinerator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2070, "favorite_count": 0, "closed_date": 1512735175, "answer_count": 2, "score": 1, "last_activity_date": 1512740239, "creation_date": 1512732947, "question_id": 47713611, "link": "https://stackoverflow.com/questions/47713611/how-do-i-convert-a-digit-char-0-9-to-its-numeric-value", "closed_reason": "Duplicate", "title": "How do I convert a digit Char (0-9) to its numeric value?", "body": "<p><code>Char.toInt()</code> returns the ASCII code of the character, rather than its numeric value. So how do I convert the Char to an integer with the correct numeric value instead? </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 272, "user_id": 5400569, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/GIAAp.jpg?s=128&g=1", "display_name": "BarmanInfo", "link": "https://stackoverflow.com/users/5400569/barmaninfo"}, "edited": false, "score": 0, "creation_date": 1512732431, "post_id": 47713210, "comment_id": 82386658, "body": "This portion Not working... actionBar.setDisplayHomeAsUpEnabled(true); actionBar.setHomeAsUpIndicator(R.drawable.hamburger_icon);"}], "tags": [], "owner": {"reputation": 435, "user_id": 3320207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCc99.jpg?s=128&g=1", "display_name": "Yash Soni", "link": "https://stackoverflow.com/users/3320207/yash-soni"}, "is_accepted": true, "score": 2, "last_activity_date": 1512731560, "creation_date": 1512731560, "answer_id": 47713210, "question_id": 47712491, "link": "https://stackoverflow.com/questions/47712491/hamburger-icon-not-showing/47713210#47713210", "title": "Hamburger Icon Not showing", "body": "<p>This is expected behaviour, it won't automatically change when you are doing: <code>\nactionBar.setDisplayHomeAsUpEnabled(true);</code></p>\n\n<p>One solution would be to handle it for yourself. Just change the icon manually\n<code>\nactionBar.setDisplayHomeAsUpEnabled(true);\nactionBar.setHomeAsUpIndicator(R.drawable.back);</code></p>\n\n<p>and on back pressed, change it to hamburger icon:\n<code>\nactionBar.setDisplayHomeAsUpEnabled(true);\nactionBar.setHomeAsUpIndicator(R.drawable.hamburger_icon);</code></p>\n\n<p>Hope this helps. Cheers.</p>\n"}], "owner": {"reputation": 272, "user_id": 5400569, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/GIAAp.jpg?s=128&g=1", "display_name": "BarmanInfo", "link": "https://stackoverflow.com/users/5400569/barmaninfo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 47713210, "answer_count": 1, "score": 1, "last_activity_date": 1512731560, "creation_date": 1512729196, "last_edit_date": 1512731183, "question_id": 47712491, "link": "https://stackoverflow.com/questions/47712491/hamburger-icon-not-showing", "title": "Hamburger Icon Not showing", "body": "<p>When I use to change Hamburger Icon to Back Icon while add a new fragment it's Perfectly working. Here is my code </p>\n\n<pre><code>supportActionBar!!.setDisplayHomeAsUpEnabled(true)\nsupportActionBar!!.setDisplayShowHomeEnabled(true) \n</code></pre>\n\n<p>But when I press back button and close the fragment then it not change to hamburger icon</p>\n\n<pre><code>supportActionBar!!.setDisplayHomeAsUpEnabled(false)\nsupportActionBar!!.setDisplayShowHomeEnabled(false) \n</code></pre>\n\n<p>NOTE: I dont have drawer layout. I use this library: yarolegovich/SlidingRootNav</p>\n"}, {"tags": ["java", "macros", "kotlin", "lombok", "scala-macros"], "answers": [{"comments": [{"owner": {"reputation": 9089, "user_id": 293147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ce1ecd6cce2377ff3194386362392?s=128&d=identicon&r=PG", "display_name": "SK-logic", "link": "https://stackoverflow.com/users/293147/sk-logic"}, "edited": false, "score": 0, "creation_date": 1512983777, "post_id": 47717470, "comment_id": 82459292, "body": "This is just wrong. There is nothing inherently broken with macros and IDE support."}], "tags": [], "owner": {"reputation": 6188, "user_id": 172690, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3759fa3ad04a0fd20729382956f24a3?s=128&d=identicon&r=PG", "display_name": "Grzegorz Adam Hankiewicz", "link": "https://stackoverflow.com/users/172690/grzegorz-adam-hankiewicz"}, "is_accepted": true, "score": 2, "last_activity_date": 1512983552, "last_edit_date": 1512983552, "creation_date": 1512747305, "answer_id": 47717470, "question_id": 47712318, "link": "https://stackoverflow.com/questions/47712318/macros-support-in-tooling/47717470#47717470", "title": "Macros support in tooling", "body": "<p>Tooling can mean many different things, right from the low level of the binary code which implements macro transformations, up to the high level of the IDE where you are implementing or using your macro, which is what abreslav is mentioning. Since macros can change the meaning of the code they encompass, you start having <em>problems</em> like deciding which kind of source code you want to show to the user.</p>\n\n<p>Imagine having a macro which prefixes all the properties with a string, uppercasing <em>naturally</em> the original variable during concatenation of the identifier:</p>\n\n<pre><code>someclass {\n    prefix(\"longPrefix\") {\n        val a: String = \"\"\n    }\n\n    fun bar() {\n        println(\"Look at $longPrefixA\")\n    }\n}\n</code></pre>\n\n<p>Imagining that this compiled and worked, you have difficult to answer design decisions, because you are displaying the original source <em>before</em> the macro transformation\u2026 but wouldn't it be useful to also see the code <em>after</em>? Also, part of the source code depends on the macro being run, which in turn means that the IDE has to actually compile and run your code while you are typing to validate that the reference to <code>$longPrefixA</code> is valid. In a way, you would need a <em>compilation time</em> debugger for the compiler/IDE just like you have your usual debugger for the runtime, if you are writing the macro in first place.</p>\n\n<p>There are even more troubles when you think about control flow macros and such where the compilation abstract syntax tree is modified in non obvious ways, which is also one of the reasons macros get bad reputation for <em>hiding</em> the program (though I argue that comes mainly from our C textual preprocessor biased history). Even when you look at other programming languages with built in macro support, their tooling tends to be lackluster, in a way perpetuating the meme.</p>\n"}, {"comments": [{"owner": {"reputation": 9089, "user_id": 293147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ce1ecd6cce2377ff3194386362392?s=128&d=identicon&r=PG", "display_name": "SK-logic", "link": "https://stackoverflow.com/users/293147/sk-logic"}, "reply_to_user": {"reputation": 95, "user_id": 8639175, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ba7e4d0f9ad84b4bd7c9944fb6c52e79?s=128&d=identicon&r=PG&f=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/8639175/axel"}, "edited": false, "score": 0, "creation_date": 1512993921, "post_id": 47749531, "comment_id": 82465462, "body": "@Axel, of   course - see Common Lisp with Slime for example. Or JetBrains MPS."}], "tags": [], "owner": {"reputation": 9089, "user_id": 293147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247ce1ecd6cce2377ff3194386362392?s=128&d=identicon&r=PG", "display_name": "SK-logic", "link": "https://stackoverflow.com/users/293147/sk-logic"}, "is_accepted": false, "score": 0, "last_activity_date": 1512983720, "creation_date": 1512983720, "answer_id": 47749531, "question_id": 47712318, "link": "https://stackoverflow.com/questions/47712318/macros-support-in-tooling/47749531#47749531", "title": "Macros support in tooling", "body": "<p>Macros are not hard to support in IDEs when they're done the right way.</p>\n\n<p>The key is to use <em>the same</em> compiler for semantic features in an IDE.</p>\n"}], "owner": {"reputation": 95, "user_id": 8639175, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ba7e4d0f9ad84b4bd7c9944fb6c52e79?s=128&d=identicon&r=PG&f=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/8639175/axel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 47717470, "answer_count": 2, "score": -1, "last_activity_date": 1512983720, "creation_date": 1512728651, "question_id": 47712318, "link": "https://stackoverflow.com/questions/47712318/macros-support-in-tooling", "title": "Macros support in tooling", "body": "<p><a href=\"https://www.reddit.com/r/Kotlin/comments/7hoytl/kotlin_team_ama_ask_us_anything/dqt56nv/\" rel=\"nofollow noreferrer\">https://www.reddit.com/r/Kotlin/comments/7hoytl/kotlin_team_ama_ask_us_anything/dqt56nv/</a></p>\n\n<blockquote>\n  <p>Traditional macros are very hard to support well in the tooling</p>\n</blockquote>\n\n<p>In Java we already have Lombok @Data what generate methods, almost the same as macros.\n<a href=\"https://projectlombok.org/features/Data\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/Data</a></p>\n\n<p>Why macros are hard to support in tooling?</p>\n"}, {"tags": ["android", "eclipse", "package", "kotlin"], "comments": [{"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 4, "creation_date": 1512723226, "post_id": 47710649, "comment_id": 82381209, "body": "If you have the choice, use IntelliJ for Kotlin development!"}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512726515, "post_id": 47710649, "comment_id": 82383171, "body": "What is package &quot;puni&quot; about?"}, {"owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "reply_to_user": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512728454, "post_id": 47710649, "comment_id": 82384373, "body": "@donfuxx it&#180;s just the main package of this project ... take a look on the left upper site of the screenshot"}, {"owner": {"reputation": 10656, "user_id": 2399024, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JjSNR.jpg?s=128&g=1", "display_name": "donfuxx", "link": "https://stackoverflow.com/users/2399024/donfuxx"}, "edited": false, "score": 0, "creation_date": 1512734683, "post_id": 47710649, "comment_id": 82387897, "body": "Ah ok.. well, maybe eclipse is autosuggesting something. just try to import the package and see what classes are in it :-)"}], "owner": {"reputation": 265, "user_id": 4336990, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d59bdf84a70517cf6fec4d65023df19?s=128&d=identicon&r=PG&f=1", "display_name": "Punika", "link": "https://stackoverflow.com/users/4336990/punika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512735845, "creation_date": 1512723019, "last_edit_date": 1512735845, "question_id": 47710649, "link": "https://stackoverflow.com/questions/47710649/what-is-this-kotlinrulezzz-package-all-about", "title": "What is this &quot;KotlinRulezzz&quot; package all about?", "body": "<p><code>Eclipse</code> suggests a package named <em>\"KotlinRulezzz\"</em>.</p>\n\n<p>What is this package all about? Is this some kind of Easter egg?</p>\n\n<p><a href=\"https://i.stack.imgur.com/8Imgq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Imgq.png\" alt=\"KotlinRulezz\"></a></p>\n"}]