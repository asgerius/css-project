[{"tags": ["list", "lambda", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 1, "creation_date": 1460583753, "post_id": 36608538, "comment_id": 60816886, "body": "Is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/flat-map.html\" rel=\"nofollow noreferrer\">flatMap()</a> what you are looking for?"}], "answers": [{"tags": [], "owner": {"reputation": 4021, "user_id": 3830108, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/elcXQ.jpg?s=128&g=1", "display_name": "Cortwave", "link": "https://stackoverflow.com/users/3830108/cortwave"}, "is_accepted": false, "score": 3, "last_activity_date": 1460585494, "creation_date": 1460585494, "answer_id": 36610482, "question_id": 36608538, "link": "https://stackoverflow.com/questions/36608538/kotlin-list-within-a-list-filtering/36610482#36610482", "title": "Kotlin - List within a List filtering", "body": "<p>You can use flatMap for this, it works as map, but merges all your mapped collections to one:</p>\n\n<pre><code>val result = routeTypes  // List&lt;RouteType&gt;\n                .filter { it.type in filter.keys }\n                .flatMap {\n                    routeType -&gt; routeType.items.filter { it.id in filter[routeType.type]!! }\n                }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 4589262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c3a92f6a88836917ecaa3b432f2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4589262/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1460619716, "creation_date": 1460619716, "answer_id": 36616682, "question_id": 36608538, "link": "https://stackoverflow.com/questions/36608538/kotlin-list-within-a-list-filtering/36616682#36616682", "title": "Kotlin - List within a List filtering", "body": "<p>I suppose, creation of a new object within <code>.map</code> is the only way to get it.</p>\n\n<pre><code>val result = routeTypes\n            .filter { it.type in filter.keys }\n            .map {\n                routeType -&gt; RouteType(\n                    routeType.type,\n                    routeType.items.filter { it.id in filter[routeType.type]!! })\n            }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 177, "user_id": 4589262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c3a92f6a88836917ecaa3b432f2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4589262/michael"}, "edited": false, "score": 0, "creation_date": 1460729222, "post_id": 36642970, "comment_id": 60892096, "body": "Welcome! Not sure about using <code>it</code> everywhere. For me it is fine here, but feel free to specify names as you see fitted"}, {"owner": {"reputation": 1615, "user_id": 1724533, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/JMOVQ.jpg?s=128&g=1", "display_name": "SathishKumar", "link": "https://stackoverflow.com/users/1724533/sathishkumar"}, "edited": false, "score": 0, "creation_date": 1566825896, "post_id": 36642970, "comment_id": 101767050, "body": "what is it here"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1566907780, "post_id": 36642970, "comment_id": 101795758, "body": "&quot;it&quot; in lambdas: <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 14, "last_activity_date": 1460711603, "creation_date": 1460711603, "answer_id": 36642970, "question_id": 36608538, "link": "https://stackoverflow.com/questions/36608538/kotlin-list-within-a-list-filtering/36642970#36642970", "title": "Kotlin - List within a List filtering", "body": "<p>Since your data is immutable (that's a good thing) you need to copy it while filtering. Use <code>copy</code> to make it more extensible:</p>\n\n<pre><code>val result = routeTypes\n        .filter { it.type in filter.keys }\n        .map { it.copy(items = it.items.filter { it.id in filter[routeType.type]!! }) }\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 4589262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79c3a92f6a88836917ecaa3b432f2fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4589262/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20664, "favorite_count": 3, "accepted_answer_id": 36642970, "answer_count": 3, "score": 8, "last_activity_date": 1460729299, "creation_date": 1460578014, "last_edit_date": 1460729299, "question_id": 36608538, "link": "https://stackoverflow.com/questions/36608538/kotlin-list-within-a-list-filtering", "title": "Kotlin - List within a List filtering", "body": "<p>I have those data classes:</p>\n\n<pre><code>data class RouteType(\n\n            @SerializedName(\"type\")\n            val type: String,\n\n            @SerializedName(\"items\")\n            val items: List&lt;RouteItem&gt;)\n\n\ndata class RouteItem(\n\n            @SerializedName(\"id\")\n            val id: String,\n\n            @SerializedName(\"route\")\n            private val route: List&lt;DoubleArray&gt;)\n</code></pre>\n\n<p>I want to filter list of RouteType by type and filter list of RouteItem in it by id.</p>\n\n<p>My code now:</p>\n\n<pre><code>// val filter: HashMap&lt;String, List&lt;String&gt;&gt;\n\nval result = routeTypes  // List&lt;RouteType&gt;\n                .filter { it.type in filter.keys }\n                .map {\n                    routeType -&gt; routeType.items.filter { it.id in filter[routeType.type]!! }\n                }\n</code></pre>\n\n<p>How to make <code>.map</code> return list with filtered list in it? Or maybe there's another way?</p>\n\n<h2>EDIT</h2>\n\n<p>Thanks, but <code>flatmap</code> not exactly what I need, I think. <code>flatmap</code> returns nested list(<code>List&lt;RouteItem&gt;</code>), but I want <code>List&lt;RouteType&gt;</code>.</p>\n\n<p>I got it by this code:</p>\n\n<pre><code>val result = routeTypes\n                .filter { it.type in filter.keys }\n                .map {\n                    routeType -&gt; RouteType(\n                        routeType.type,\n                        routeType.items.filter { it.id in filter[routeType.type]!! })\n                }\n</code></pre>\n\n<p>Is there another way to get it?</p>\n"}, {"tags": ["properties", "delegates", "kotlin", "delegation"], "answers": [{"comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1460562212, "post_id": 36602770, "comment_id": 60803778, "body": "I read the documentation, but was having a hard time figuring out what I needed to do. This made it perfectly clear. Thanks!"}, {"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 0, "creation_date": 1460566896, "post_id": 36602770, "comment_id": 60806993, "body": "I ended up using the first option (without the auto-conversion) to allow supporting JavaFX style CSS: <code>var fontSize: Any? by map(properties, &quot;-fx-font-size&quot;)</code>"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 8, "last_activity_date": 1460574891, "last_edit_date": 1460574891, "creation_date": 1460560503, "answer_id": 36602770, "question_id": 36602379, "link": "https://stackoverflow.com/questions/36602379/kotlin-how-to-make-a-property-delegate-by-map-with-a-custom-name/36602770#36602770", "title": "Kotlin - How to make a property delegate by map with a custom name?", "body": "<p>The documentation on <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow\">the delegated properties</a> is a good source of information on the topic. It probably is a bit longer read than the following examples:</p>\n\n<pre><code>fun &lt;T, TValue&gt; T.map(properties: MutableMap&lt;String, TValue&gt;, key: String): ReadOnlyProperty&lt;T, TValue&gt; {\n    return object : ReadOnlyProperty&lt;T, TValue&gt; {\n        override fun getValue(thisRef: T, property: KProperty&lt;*&gt;) = properties[key]!!\n    }\n}\n\nclass MyClass {\n    val properties = mutableMapOf&lt;String, Any&gt;()\n    val fontSize: Any by map(properties, \"font-size\")\n}\n</code></pre>\n\n<p>You can ease up things a little bit and avoid typing the CSS property name by converting Kotlin property names to CSS attributes equivalents like so:</p>\n\n<pre><code>fun &lt;T, TValue&gt; map(properties: Map&lt;String, TValue&gt;, naming:(String)-&gt;String): ReadOnlyProperty&lt;T, TValue?&gt; {\n    return object : ReadOnlyProperty&lt;T, TValue?&gt; {\n        override fun getValue(thisRef: T, property: KProperty&lt;*&gt;) = properties[naming(property.name)]\n    }\n}\n\nobject CamelToHyphen : (String)-&gt;String {\n    override fun invoke(camelCase: String): String {\n        return CaseFormat.LOWER_CAMEL.to(CaseFormat.LOWER_HYPHEN, camelCase)\n    }\n}\n\nfun &lt;T, TValue&gt; T.cssProperties(properties: Map&lt;String,TValue&gt;) = map(properties, CamelToHyphen)\n\nclass MyClass {\n    val properties = mutableMapOf&lt;String, Any&gt;()\n    val fontSize: Any? by cssProperties(properties)\n}\n</code></pre>\n\n<p>The above sample uses Guava's <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/CaseFormat.html#LOWER_HYPHEN\" rel=\"nofollow\"><code>CaseFormat</code></a>. </p>\n\n<p>If you'd like to have mutable property your delegate will have to implement setter method:</p>\n\n<pre><code>fun &lt;T, TValue&gt; map(properties: MutableMap&lt;String, TValue?&gt;, naming: (String) -&gt; String): ReadWriteProperty&lt;T, TValue?&gt; {\n    return object : ReadWriteProperty&lt;T, TValue?&gt; {\n        override fun setValue(thisRef: T, property: KProperty&lt;*&gt;, value: TValue?) {\n            properties[naming(property.name)] = value\n        }\n\n        override fun getValue(thisRef: T, property: KProperty&lt;*&gt;) = properties[naming(property.name)]\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2023, "favorite_count": 0, "accepted_answer_id": 36602770, "answer_count": 1, "score": 3, "last_activity_date": 1460574891, "creation_date": 1460559600, "question_id": 36602379, "link": "https://stackoverflow.com/questions/36602379/kotlin-how-to-make-a-property-delegate-by-map-with-a-custom-name", "title": "Kotlin - How to make a property delegate by map with a custom name?", "body": "<p>I'm trying to get my head around property delegates, and I have an interesting use case. Is it possible to have something like this:</p>\n\n<pre><code>class MyClass {\n    val properties = mutableMapOf&lt;String, Any&gt;()\n    val fontSize: Any by MapDelegate(properties, \"font-size\")\n}\n</code></pre>\n\n<p>That would allow me to store <code>fontSize</code> using the map as a delegate, but with a custom key (i.e. \"font-size\").</p>\n\n<p>The specific use case if for storing things like CSS property tags that can be accessed through variables (<code>fontSize</code>) for use in code, but can be rendered properly when iterating through the map (<code>font-size: 18px;</code>).</p>\n"}, {"tags": ["java", "android", "multiple-inheritance", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1460556062, "post_id": 36598804, "comment_id": 60798523, "body": "Could you please confirm that the issue persists after manual removal of <code>build</code> folders?"}, {"owner": {"reputation": 31, "user_id": 2590183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5c02e50b30959848e77951ed35f484?s=128&d=identicon&r=PG", "display_name": "Tudor Dragan", "link": "https://stackoverflow.com/users/2590183/tudor-dragan"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1460556457, "post_id": 36598804, "comment_id": 60798861, "body": "I can confirm that I tried <code>clean</code>, deleting the build folder manually, etc. And it persists"}, {"owner": {"reputation": 141, "user_id": 2477412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPS13.jpg?s=128&g=1", "display_name": "John Michael Pirie", "link": "https://stackoverflow.com/users/2477412/john-michael-pirie"}, "edited": false, "score": 0, "creation_date": 1465130896, "post_id": 36598804, "comment_id": 62763931, "body": "Have run into the same issue and would like to know if you have found a resolution.  Any insight would be greatly appreciated."}, {"owner": {"reputation": 31, "user_id": 2590183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5c02e50b30959848e77951ed35f484?s=128&d=identicon&r=PG", "display_name": "Tudor Dragan", "link": "https://stackoverflow.com/users/2590183/tudor-dragan"}, "edited": false, "score": 1, "creation_date": 1465317723, "post_id": 36598804, "comment_id": 62846848, "body": "<b>Yes, I have fixed the issue</b> and posted it on the <a href=\"https://discuss.kotlinlang.org/t/kotlin-custom-view-class-implements-an-interface-that-cannot-be-resolved-in-app-compiledebugkotlinafterjava-identical-java-version-works-fine/1594/3\" rel=\"nofollow noreferrer\">Kotlin Discuss forum</a>. Please confirm that it solved your problem too."}, {"owner": {"reputation": 620, "user_id": 394317, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fb974bdc0bd68fa59f433541f3b474cc?s=128&d=identicon&r=PG", "display_name": "Gagege", "link": "https://stackoverflow.com/users/394317/gagege"}, "edited": false, "score": 3, "creation_date": 1469202560, "post_id": 36598804, "comment_id": 64455174, "body": "@TudorDragan This did not fix the issue for me."}], "owner": {"reputation": 31, "user_id": 2590183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b5c02e50b30959848e77951ed35f484?s=128&d=identicon&r=PG", "display_name": "Tudor Dragan", "link": "https://stackoverflow.com/users/2590183/tudor-dragan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4066, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1460617885, "creation_date": 1460551452, "last_edit_date": 1460617885, "question_id": 36598804, "link": "https://stackoverflow.com/questions/36598804/kotlin-custom-view-class-implements-an-interface-that-cannot-be-resolved-in-ap", "title": "Kotlin Custom View class implements an interface that cannot be resolved in `:app:compileDebugKotlinAfterJava`. Identical Java version works fine", "body": "<p>I have an Android project which contains an <code>aar library module</code> with generic classes that are being used as a foundation for several apps. Everything is written in Kotlin and no Java code has been used (except third party libraries). </p>\n\n<p>The issue occurs when trying to assemble the app for running. I get the following error when trying to run my application:</p>\n\n<pre><code>:app:compileDebugKotlinAfterJava\ne: Supertypes of the following classes cannot be resolved. Please make sure you have the required dependencies in the classpath:\n    class com.test.app.view.ECMKotlinTextView, unresolved supertypes: com.test.lib.localization.Localizable\n</code></pre>\n\n<p>For the purpose of this question, I have written two separate versions of the a custom TextView that extends the <code>android.widget.TextView</code> class and implements an interface let's say <code>Localizable</code>; one in <code>Java</code> and the other one in <code>Kotlin</code>.</p>\n\n<p><strong><em>ECMJavaTextView.java</em></strong></p>\n\n<pre><code>package com.test.lib.view;\n\nimport android.annotation.TargetApi;\nimport android.content.Context;\nimport android.os.Build;\nimport android.util.AttributeSet;\nimport android.widget.TextView;\n\nimport com.test.lib.localization.Localizable;\n\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\nimport java.util.Map;\n\n\npublic class ECMJavaTextView extends TextView implements Localizable{\n    public ECMJavaTextView(Context context) {\n        super(context);\n    }\n\n    public ECMJavaTextView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public ECMJavaTextView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    public ECMJavaTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\n        super(context, attrs, defStyleAttr, defStyleRes);\n    }\n\n    @Nullable\n    @Override\n    public String getTextId() {\n        return \"JAVA TEXT ID\";\n    }\n\n    @Override\n    public void setTextId(@Nullable String s) {\n\n    }\n\n    @Nullable\n    @Override\n    public Map&lt;String, String&gt; getTextArgs() {\n        return null;\n    }\n\n    @Override\n    public void setTextArgs(@Nullable Map&lt;String, String&gt; map) {\n\n    }\n\n    @Override\n    public void updateText(@NotNull String text) {\n\n    }\n}\n</code></pre>\n\n<p><strong><em>ECMKotlinTextView.kt</em></strong></p>\n\n<pre><code>package com.test.lib.view\n\nimport android.annotation.TargetApi\nimport android.content.Context\nimport android.graphics.Canvas\nimport android.os.Build\nimport android.util.AttributeSet\nimport android.util.Log\nimport android.widget.TextView\nimport com.test.lib.localization.Localizable\nimport com.test.lib.localization.updateText\n\nclass ECMKotlinTextView : TextView , Localizable {\n\n       override var textId: String? = \"textID\"\n        get() = field\n        set(value) {\n            field = value\n        }\n    override var textArgs: Map&lt;String, String&gt;? = null\n        get() = field\n        set(value) {\n            field = value\n        }\n\n    override fun updateText(text: String) {\n\n    }\n    constructor(context: Context?) : super(context){\n\n    }\n    constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) {\n\n    }\n    constructor(context: Context?, attrs: AttributeSet?, defStyle: Int) : super(context, attrs, defStyle) {\n\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    constructor(context: Context?, attrs: AttributeSet?, defStyle: Int, defStyleRes: Int) : super(context, attrs, defStyle, defStyleRes) {\n\n    }\n\n    override fun onDraw(canvas: Canvas?) {\n        super.onDraw(canvas)\n    }\n\n}\n</code></pre>\n\n<p>Both have xml layouts in the library module and I include them into the <code>main_activity.xml</code> file. I managed to isolate the problem down to the <code>findViewbyId()</code> method (here I use the <code>kotlin-extensions</code> library to get the views; tried with both).</p>\n\n<p><strong>MainActivity.kt</strong></p>\n\n<pre><code>import kotlinx.android.synthetic.main.content_main.*\n\nclass MainActivity : BaseActivity(), NavigationView.OnNavigationItemSelectedListener {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        var java_textV = demo_java_text_view as ECMJavaTextView\n        Log.d(\"JAVA\", \"${java_textV.textId}\")\n\n        var kotlin_textV = demo_kotlin_text_view as ECMKotlinTextView\n        Log.d(\"Kotlin\", \"${kotlin_textV.textId}\")\n    }\n...\n</code></pre>\n\n<p>The <strong>second cast</strong> always gives the error mentioned above, but if I remove the cast (<code>ECMKotlinTextView</code>) I do not have access to the <code>Localizable</code> methods that I need. A more interesting point is that the <strong>JAVA</strong> class works as expected. </p>\n\n<p>Don't know for sure if it's something that I'm missing or haven't setup or if it's currently a bug in the Kotlin plugins. Can somebody help me with this? Some insight would be much appreciated.</p>\n"}, {"tags": ["rx-java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 22, "last_activity_date": 1460491181, "last_edit_date": 1460491181, "creation_date": 1460490867, "answer_id": 36582860, "question_id": 36582425, "link": "https://stackoverflow.com/questions/36582425/explicit-type-argument-kotlin-and-rxjava/36582860#36582860", "title": "Explicit Type Argument Kotlin and RxJava", "body": "<p><code>Observable.compose</code> is a workaround for the lack of extension functions in Java. There is no need to use <code>Observable.compose</code> in Kotlin because it supports extension functions out of the box:</p>\n\n<pre><code>// default schedulers\nfun &lt;T&gt; Observable&lt;T&gt;.applySchedulers(): Observable&lt;T&gt; {\n  return subscribeOn(Schedulers.computation()).observeOn(AndroidSchedulers.mainThread())\n}\n\n// custom transformer\nfun &lt;T&gt; Observable&lt;T&gt;.applySchedulers(transformer: ThreadTransformer): Observable&lt;T&gt; {\n  return compose(transformer.applySchedulers&lt;T&gt;())\n}\n\noverride fun call(): Observable&lt;MyType&gt; {\n  return Observable.just(getData()).applySchedulers()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8490546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxsMu.jpg?s=128&g=1", "display_name": "Fentino", "link": "https://stackoverflow.com/users/8490546/fentino"}, "is_accepted": false, "score": 2, "last_activity_date": 1508829830, "last_edit_date": 1508829830, "creation_date": 1508318319, "answer_id": 46806732, "question_id": 36582425, "link": "https://stackoverflow.com/questions/36582425/explicit-type-argument-kotlin-and-rxjava/46806732#46806732", "title": "Explicit Type Argument Kotlin and RxJava", "body": "<p>Based on Vladimir Mironov's answer. Extend this to your needs:</p>\n\n<pre><code>//Observable\nfun &lt;T&gt; Observable&lt;T&gt;.applyIoScheduler() = applyScheduler(Schedulers.io())\nfun &lt;T&gt; Observable&lt;T&gt;.applyComputationScheduler() = applyScheduler(Schedulers.computation())\nprivate fun &lt;T&gt; Observable&lt;T&gt;.applyScheduler(scheduler: Scheduler) =\n                subscribeOn(scheduler).observeOn(AndroidSchedulers.mainThread())\n\n//Single\nfun &lt;T&gt; Single&lt;T&gt;.applyIoScheduler() = applyScheduler(Schedulers.io())\nfun &lt;T&gt; Single&lt;T&gt;.applyComputationScheduler() = applyScheduler(Schedulers.computation())\nprivate fun &lt;T&gt; Single&lt;T&gt;.applyScheduler(scheduler: Scheduler) =\n            subscribeOn(scheduler).observeOn(AndroidSchedulers.mainThread())\n\n//Completable\n//..\n</code></pre>\n"}], "owner": {"reputation": 55477, "user_id": 397991, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zZTWl.jpg?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/397991/eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1669, "favorite_count": 0, "accepted_answer_id": 36582860, "answer_count": 2, "score": 4, "last_activity_date": 1508829830, "creation_date": 1460489499, "question_id": 36582425, "link": "https://stackoverflow.com/questions/36582425/explicit-type-argument-kotlin-and-rxjava", "title": "Explicit Type Argument Kotlin and RxJava", "body": "<p>Is this the only possible way of using RxJava's <code>compose</code> with <code>ThreadTransformer</code> in Kotlin? I just don't like the <code>&lt;MyType&gt;</code> part in <code>compose</code> function. Is it possible to omit it? </p>\n\n<pre><code>  override fun call(): Observable&lt;MyType&gt; {\n    return Observable.just(getData())\n        .compose(threadTransformer.applySchedulers&lt;MyType&gt;())\n  }\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 5076, "user_id": 264177, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4bec61fe6165806be5ec752ba87245dd?s=128&d=identicon&r=PG", "display_name": "JanKanis", "link": "https://stackoverflow.com/users/264177/jankanis"}, "is_accepted": true, "score": 1, "last_activity_date": 1460471424, "creation_date": 1460471424, "answer_id": 36576335, "question_id": 36576334, "link": "https://stackoverflow.com/questions/36576334/how-do-i-select-which-java-overload-to-override-in-a-kotlin-derived-class/36576335#36576335", "title": "How do I select which Java overload to override in a Kotlin derived class?", "body": "<p>Turns out that very last sentence was the clue. There is some compiler shenanigans going on in that it thinks I'm implementing <code>MutableList&lt;Int&gt;</code>. And <code>MutableList&lt;E&gt;</code> defines a <code>removeAt(element: E): Boolean</code> which silently compiles into a <code>remove</code> method, changing the name. When I override <code>removeAt</code> everything works.</p>\n"}], "owner": {"reputation": 5076, "user_id": 264177, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/4bec61fe6165806be5ec752ba87245dd?s=128&d=identicon&r=PG", "display_name": "JanKanis", "link": "https://stackoverflow.com/users/264177/jankanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36576335, "answer_count": 1, "score": 1, "last_activity_date": 1460471424, "creation_date": 1460471424, "question_id": 36576334, "link": "https://stackoverflow.com/questions/36576334/how-do-i-select-which-java-overload-to-override-in-a-kotlin-derived-class", "title": "How do I select which Java overload to override in a Kotlin derived class?", "body": "<p>I'm trying to implement in Kotlin an <code>MyIntList</code> extending <code>java.util.AbstractList&lt;Int&gt;</code>. <code>AbstractList&lt;E&gt;</code> defines both a <code>E remove(int index)</code> and a <code>boolean remove(Object o)</code>. I use the following code:</p>\n\n<pre><code>class IntList() : AbstractList&lt;Int&gt;() {\n    ....\n    override fun remove(index: Int): Int {\n        ....\n    }\n}\n</code></pre>\n\n<p>but this gives an <code>error: return type of 'remove' is not a subtype of the return type of the overridden member 'public open fun remove(element: kotlin.Int!): kotlin.Boolean defined in java.util.AbstractList'\n    override fun remove(index: Int): Int {</code></p>\n\n<p>How do I tell Kotlin that I'm trying to override <code>E remove(int index)</code>? (And where does it get that <code>remove(Int):Boolean</code> overload from?)</p>\n"}, {"tags": ["list", "generics", "casting", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 4, "last_activity_date": 1460456850, "creation_date": 1460456850, "answer_id": 36570542, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot/36570542#36570542", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>In case of generic classes casts cannot be checked because type information is erased in runtime. But you check that all objects in the list are <code>Waypoint</code>s so you can just suppress the warning with <code>@Suppress(\"UNCHECKED_CAST\")</code>.</p>\n\n<p>To avoid such warnings you have to pass a <code>List</code> of objects convertible to <code>Waypoint</code>. When you're using <code>*</code> but trying to access this list as a typed list you'll always need a cast and this cast will be unchecked.</p>\n"}, {"comments": [{"owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "edited": false, "score": 7, "creation_date": 1460462809, "post_id": 36570969, "comment_id": 60744046, "body": "Great Answer! I choose list.filterIsInstance&lt;Waypoint&gt;() solution because I think it&#39;s the cleanest solution."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 4, "creation_date": 1460468727, "post_id": 36570969, "comment_id": 60749169, "body": "Note that if you use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-is-instance.html\" rel=\"nofollow noreferrer\"><code>filterIsInstance</code></a> and the original list contains elements of a different type your code will silently filter them out. Sometimes this is what you want but sometimes you might rather have an <code>IllegalStateException</code> or similar thrown. If the later is the case then you can create your own method to check and then cast: <code>inline fun &lt;reified R&gt; Iterable&lt;*&gt;.mapAsInstance() = map { it.apply { check(this is R) } as R }</code>"}, {"owner": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "edited": false, "score": 4, "creation_date": 1515437435, "post_id": 36570969, "comment_id": 83291654, "body": "Note that <code>.apply</code> does not return the return value of the lambda, it returns the receive object.  You probably want to use <code>.takeIf</code> if you want the option to return a null."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 226, "last_activity_date": 1460477873, "last_edit_date": 1495540486, "creation_date": 1460457943, "answer_id": 36570969, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot/36570969#36570969", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>In Kotlin, there's no way to check the generic parameters at runtime in general case (like just checking the items of a <code>List&lt;T&gt;</code>, which is only a special case), so casting a generic type to another with different generic parameters will raise a warning unless the cast lies within <a href=\"https://kotlinlang.org/docs/reference/generics.html#variance\" rel=\"noreferrer\">variance bounds</a>.</p>\n\n<p>There are different solutions, however:</p>\n\n<ul>\n<li><p>You have checked the type and you are quite sure that the cast is safe. Given that, you can <a href=\"https://stackoverflow.com/questions/36221405/how-can-i-suppress-unchecked-cast-warnings/36221525#36221525\">suppress the warning</a> with <code>@Suppress(\"UNCHECKED_CAST\")</code>.</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nval waypointList = list as? List&lt;Waypoint&gt; ?: return null\n</code></pre></li>\n<li><p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-is-instance.html\" rel=\"noreferrer\"><code>.filterIsInstance&lt;T&gt;()</code></a> function, which checks the item types and returns a list with the items of the passed type:</p>\n\n<pre><code>val waypointList: List&lt;Waypoint&gt; = list.filterIsInstance&lt;Waypoint&gt;()\n\nif (waypointList.size != list.size)\n    return null\n</code></pre>\n\n<p>or the same in one statement:</p>\n\n<pre><code>val waypointList = list.filterIsInstance&lt;Waypoint&gt;()\n    .apply { if (size != list.size) return null }\n</code></pre>\n\n<p>This will create a new list of the desired type (thus avoiding unchecked cast inside), introducing a little overhead, but in the same time it saves you from iterating through the <code>list</code> and checking the types (in <code>list.foreach { ... }</code> line), so it won't be noticeable.</p></li>\n<li><p>Write a utility function that checks the type and returns the same list if the type is correct, thus encapsulating the cast (still unchecked from the compiler's point of view) inside it:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\ninline fun &lt;reified T : Any&gt; List&lt;*&gt;.checkItemsAre() =\n        if (all { it is T })\n            this as List&lt;T&gt;\n        else null\n</code></pre>\n\n<p>With the usage:</p>\n\n<pre><code>val waypointList = list.checkItemsAre&lt;Waypoint&gt;() ?: return null\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 924, "user_id": 2939453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feCOq.jpg?s=128&g=1", "display_name": "Adam Kis", "link": "https://stackoverflow.com/users/2939453/adam-kis"}, "is_accepted": false, "score": 13, "last_activity_date": 1557916727, "creation_date": 1557916727, "answer_id": 56147348, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot/56147348#56147348", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>To improve @hotkey's answer here's my solution:</p>\n\n<pre><code>val waypointList = list.filterIsInstance&lt;Waypoint&gt;().takeIf { it.size == list.size }\n</code></pre>\n\n<p>This gives you the <code>List&lt;Waypoint&gt;</code> if all the items can be casted, null otherwise.</p>\n"}, {"comments": [{"owner": {"reputation": 567, "user_id": 4638257, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FCCV5.png?s=128&g=1", "display_name": "daviscodesbugs", "link": "https://stackoverflow.com/users/4638257/daviscodesbugs"}, "edited": false, "score": 0, "creation_date": 1567617895, "post_id": 57522249, "comment_id": 102019604, "body": "Was looking for a solution like this, but this errors: <code>Cannot access &#39;Serializable&#39;: it is internal in &#39;kotlin.io&#39;</code>"}, {"owner": {"reputation": 961, "user_id": 4592448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-_DP3LTfLMXw/AAAAAAAAAAI/AAAAAAAAAHk/dzYHVVdXUnE/photo.jpg?sz=128", "display_name": "Fortran", "link": "https://stackoverflow.com/users/4592448/fortran"}, "edited": false, "score": 0, "creation_date": 1606729000, "post_id": 57522249, "comment_id": 115039169, "body": "solution: In android to pass a user-defined object around, your class should implements Parcelable instead of Serializable interface."}], "tags": [], "owner": {"reputation": 21, "user_id": 4378576, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004085778380/picture?type=large", "display_name": "Samiami Jankis", "link": "https://stackoverflow.com/users/4378576/samiami-jankis"}, "is_accepted": false, "score": 1, "last_activity_date": 1565948132, "creation_date": 1565948132, "answer_id": 57522249, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot/57522249#57522249", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>I made a little variation to @hotkey answer when used to check Serializable to List  objects : </p>\n\n<pre><code>    @Suppress(\"UNCHECKED_CAST\")\n    inline fun &lt;reified T : Any&gt; Serializable.checkSerializableIsListOf() =\n        if (this is List&lt;*&gt; &amp;&amp; this.all { it is T })\n          this as List&lt;T&gt;\n        else null\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7705490, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154483351007817/picture?type=large", "display_name": "Ludvig Linse", "link": "https://stackoverflow.com/users/7705490/ludvig-linse"}, "is_accepted": false, "score": 1, "last_activity_date": 1568731065, "last_edit_date": 1568731065, "creation_date": 1568725184, "answer_id": 57974779, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot/57974779#57974779", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>Instead of </p>\n\n<pre><code>myGenericList.filter { it is AbstractRobotTurn } as List&lt;AbstractRobotTurn&gt;\n</code></pre>\n\n<p>I like doing </p>\n\n<pre><code>myGenericList.filter { it is AbstractRobotTurn }.map { it as AbstractRobotTurn }\n</code></pre>\n\n<p>Not sure how performant this is, but no warnings at least.</p>\n"}], "owner": {"reputation": 6473, "user_id": 2660462, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e7866e763430b8848f14ffdacb61b99f?s=128&d=identicon&r=PG", "display_name": "Lukas Lechner", "link": "https://stackoverflow.com/users/2660462/lukas-lechner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56050, "favorite_count": 30, "accepted_answer_id": 36570969, "answer_count": 5, "score": 126, "last_activity_date": 1568731065, "creation_date": 1460454086, "last_edit_date": 1534438904, "question_id": 36569421, "link": "https://stackoverflow.com/questions/36569421/kotlin-how-to-work-with-list-casts-unchecked-cast-kotlin-collections-listkot", "title": "Kotlin: How to work with List casts: Unchecked Cast: kotlin.collections.List&lt;Kotlin.Any?&gt; to kotlin.colletions.List&lt;Waypoint&gt;", "body": "<p>I want to write a function that returns every item in a <code>List</code> that is not the first or the last item (a via point). The function gets a generic <code>List&lt;*&gt;</code> as input. A result should only be returned if the elements of the list are of the type <code>Waypoint</code>:</p>\n\n<pre><code>fun getViaPoints(list: List&lt;*&gt;): List&lt;Waypoint&gt;? {\n\n    list.forEach { if(it !is Waypoint ) return null }\n\n    val waypointList = list as? List&lt;Waypoint&gt; ?: return null\n\n    return waypointList.filter{ waypointList.indexOf(it) != 0 &amp;&amp; waypointList.indexOf(it) != waypointList.lastIndex}\n}\n</code></pre>\n\n<p>When casting the <code>List&lt;*&gt;</code> to <code>List&lt;Waypoint&gt;</code>, I get the warning: </p>\n\n<blockquote>\n  <p>Unchecked Cast: kotlin.collections.List\n  to kotlin.colletions.List</p>\n</blockquote>\n\n<p>I can't figure out a way to implement it otherwise. What's the right way to implement this function without this warning?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 8, "last_activity_date": 1460452958, "last_edit_date": 1460452958, "creation_date": 1460451041, "answer_id": 36568115, "question_id": 36567826, "link": "https://stackoverflow.com/questions/36567826/kotlin-smart-cast-the-second-value-of-a-pair-with-filter/36568115#36568115", "title": "Kotlin smart cast the second value of a pair with filter", "body": "<p>Kotlin's smart cast is usually not applicable outside method boundaries. However, there are a couple of ways you can achieve your goal anyway.</p>\n\n<p>First, you can simply tell the compiler that the second value of the pair is never null by using the <code>!!</code> operator like so:</p>\n\n<pre><code>ids.map { id: String -&gt; Pair(id, ints[id]) }\n        .filter { pair -&gt; pair.second != null }\n        .map { pair: Pair&lt;String, Int?&gt; -&gt; func(pair.second!!) }\n</code></pre>\n\n<p>Second, you can reverse the order of <code>filter</code> and <code>map</code> and apply the <code>!!</code> operator earlier:</p>\n\n<pre><code>ids.filter { id: String -&gt; ints[id] != null }\n        .map { id: String -&gt; id to ints[id]!! } //equivalent to Pair(id, ints[id]!!)\n        .map { pair: Pair&lt;String, Int&gt; -&gt; func(pair.second) }\n</code></pre>\n\n<p>Finally, you can make it work without the <code>!!</code> operator by combining the filtering and the mapping in one step using the <code>mapNotNull</code> extension method:</p>\n\n<pre><code>ids.mapNotNull { id: String -&gt; ints[id]?.let { id to it } }\n        .map { pair: Pair&lt;String, Int&gt; -&gt; func(pair.second) }\n</code></pre>\n"}], "owner": {"reputation": 1108, "user_id": 2386187, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53bb844fdcd267690bb1e84b904f7a15?s=128&d=identicon&r=PG", "display_name": "Corey Wu", "link": "https://stackoverflow.com/users/2386187/corey-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 0, "accepted_answer_id": 36568115, "answer_count": 1, "score": 5, "last_activity_date": 1460452958, "creation_date": 1460450263, "question_id": 36567826, "link": "https://stackoverflow.com/questions/36567826/kotlin-smart-cast-the-second-value-of-a-pair-with-filter", "title": "Kotlin smart cast the second value of a pair with filter", "body": "<p>I'm trying to write a function that maps a String and Int? into a pair, then filters for non null second values in the pair, before continuing to map.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>val ids: List&lt;String&gt; = listOf(\"a\", \"b\", \"c\")\nval ints: Map&lt;String, Int?&gt; = mapOf(\"a\" to 1, \"b\" to 2, \"c\" to null)\n\nids.map { id: String -&gt;\n    Pair(id, ints[id])\n}.filter { pair -&gt; pair.second != null}.map { pair: Pair&lt;String, Int&gt; -&gt;\n    func(id, pair.second)  \n}\n</code></pre>\n\n<p>The problem is that the second map has the error: </p>\n\n<pre><code>Type inference failed: Cannot infer type parameter T in \n                       inline fun &lt;T, R&gt; kotlin.collections.Iterable&lt;T&gt;.map ( transform (T) -&gt; R ): kotlin.collections.List&lt;R&gt;\n</code></pre>\n\n<p>This looks like because the compiler does not know to smart cast my <code>Iterable&lt;Pair&lt;String, Int?&gt;&gt;</code> into an <code>Iterable&lt;Pair&lt;String, Int&gt;&gt;</code> after my <code>filter</code>. What can I do instead to solve this?</p>\n"}, {"tags": ["scala", "generics", "kotlin", "contravariance", "subtyping"], "comments": [{"owner": {"reputation": 30739, "user_id": 1804599, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/v91P3.jpg?s=128&g=1", "display_name": "rightfold", "link": "https://stackoverflow.com/users/1804599/rightfold"}, "edited": false, "score": 0, "creation_date": 1460409698, "post_id": 36559021, "comment_id": 60719434, "body": "You really want to just use <code>Tree[Unit]</code> for untyped trees. It prevents more bugs (compile-time vs runtime error) and doesn&#39;t require you to work around the type checker (hey that&#39;s funny isn&#39;t it). Odersky was just Oderskying here."}], "answers": [{"comments": [{"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1460409906, "post_id": 36559464, "comment_id": 60719540, "body": "Interesting, <code>@unsafeVariance</code> appears to be <a href=\"https://blog.jetbrains.com/kotlin/2015/10/kotlin-1-0-beta-candidate-is-out/\" rel=\"nofollow noreferrer\">a relatively recent feature</a>. Thanks!"}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 10, "last_activity_date": 1460409651, "creation_date": 1460409651, "answer_id": 36559464, "question_id": 36559021, "link": "https://stackoverflow.com/questions/36559021/uncheckedvariance-in-kotlin/36559464#36559464", "title": "@uncheckedVariance in Kotlin?", "body": "<p>Kotlin has an <code>@UnsafeVariance</code> annotation which is an equivalent to <code>@uncheckedVariance</code> in scala:</p>\n\n<pre><code>abstract class Tree&lt;in T&gt; {\n  abstract fun tpe(): @UnsafeVariance T\n  abstract fun withType(t: Type): Tree&lt;Type&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 2, "accepted_answer_id": 36559464, "answer_count": 1, "score": 12, "last_activity_date": 1460409651, "creation_date": 1460407979, "question_id": 36559021, "link": "https://stackoverflow.com/questions/36559021/uncheckedvariance-in-kotlin", "title": "@uncheckedVariance in Kotlin?", "body": "<p>In his talk <a href=\"https://www.youtube.com/watch?v=WxyyJyB_Ssc&amp;t=27m23s\">Compilers are Databases</a>, Martin Odersky presents an interesting variance corner case:</p>\n\n<pre><code>class Tree[-T] {\n  def tpe: T @uncheckedVariance\n  def withType(t: Type): Tree[Type]\n}\n</code></pre>\n\n<p><code>T</code> is defined to be contravariant, because it is useful to think of a typed tree (<code>Tree[Type]</code>) as a subtype of an untyped tree (<code>Tree[Nothing]</code>), but not the other way around.</p>\n\n<p>Normally, the Scala compiler would complain about <code>T</code> appearing as the return type of the <code>tpe</code> method. That's why Martin shuts up the compiler with an <code>@uncheckedVariance</code> annotion.</p>\n\n<p>Here is the example translated to Kotlin:</p>\n\n<pre><code>abstract class Tree&lt;in T&gt; {\n    abstract fun tpe(): T\n    abstract fun withType(t: Type): Tree&lt;Type&gt;\n}\n</code></pre>\n\n<p>As expected, the Kotlin compiler complains about <code>T</code> appearing in an 'out' position.\nDoes Kotlin have something similar to <code>@uncheckedVariance</code>?\nOr is there a better way to solve this particular problem?</p>\n"}, {"tags": ["android", "kotlin", "jetbrains-ide", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1460451440, "post_id": 36555104, "comment_id": 60735831, "body": "If you want to make the <code>TokenHelper</code> a singleton, simply declare it as <code>object</code> and drop the <code>instance</code> property alltogether. The compiler will take care of the boilerplate for you."}, {"owner": {"reputation": 1509, "user_id": 3105453, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c040b7dc425de024463a069c06972540?s=128&d=identicon&r=PG&f=1", "display_name": "user3105453", "link": "https://stackoverflow.com/users/3105453/user3105453"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1460639690, "post_id": 36555104, "comment_id": 60844406, "body": "@KirillRakhman I believe your comment is the real answer. Now it&#39;s an object and I use it like <code>TokenHelper.INSTANCE.getToken()</code> (in a Java class)."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1460640324, "post_id": 36555104, "comment_id": 60844915, "body": "I added it as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 1509, "user_id": 3105453, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c040b7dc425de024463a069c06972540?s=128&d=identicon&r=PG&f=1", "display_name": "user3105453", "link": "https://stackoverflow.com/users/3105453/user3105453"}, "edited": false, "score": 1, "creation_date": 1460395694, "post_id": 36555181, "comment_id": 60711014, "body": "Thanks. I just googled &quot;Kotlin Singleton&quot; and came up with this solution (<a href=\"https://medium.com/@adinugroho/singleton-in-kotlin-502f80fd8a63#.64ssyu1by\" rel=\"nofollow noreferrer\">medium.com/@adinugroho/&hellip;</a>):  <code>private object Holder {         val INSTANCE = TokenHelper()     }  companion object {         val instance: TokenHelper by lazy { Holder.INSTANCE }     }</code>  Do you think that&#39;s Kotlin compliant too?  Btw: My initial code was generated by AS upon raising the &quot;Convert to Kotlin&quot; command."}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 1509, "user_id": 3105453, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c040b7dc425de024463a069c06972540?s=128&d=identicon&r=PG&f=1", "display_name": "user3105453", "link": "https://stackoverflow.com/users/3105453/user3105453"}, "edited": false, "score": 1, "creation_date": 1460396088, "post_id": 36555181, "comment_id": 60711276, "body": "Yes it is compliant. The IDE converter works well for very simple cases - it&#39;s outputs should always be reviewed before use."}, {"owner": {"reputation": 1129, "user_id": 5869837, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-K4DuMP0kysM/AAAAAAAAAAI/AAAAAAAAABc/INRwlep4S7g/photo.jpg?sz=128", "display_name": "Paulo Linhares - Packapps", "link": "https://stackoverflow.com/users/5869837/paulo-linhares-packapps"}, "edited": false, "score": 0, "creation_date": 1515281006, "post_id": 36555181, "comment_id": 83242904, "body": "saved me! Thanks ."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 8, "last_activity_date": 1460395157, "creation_date": 1460395157, "answer_id": 36555181, "question_id": 36555104, "link": "https://stackoverflow.com/questions/36555104/stackoverflowerror-using-singleton-in-kotlin/36555181#36555181", "title": "StackOverflowError using Singleton in Kotlin", "body": "<p>You're calling <code>instance</code> getter method recursively. Change you getter definition to use <a href=\"https://kotlinlang.org/docs/reference/properties.html#backing-fields\"><code>field</code></a> instead:</p>\n\n<pre><code>var instance: TokenHelper? = null\n    get() {\n        if (field == null) {\n            field = TokenHelper()\n        }\n        return field\n    }\n</code></pre>\n\n<p>The relevant excerpt from the documentation:</p>\n\n<blockquote>\n  <p>Classes in Kotlin cannot have fields. However, sometimes it is\n  necessary to have a backing field when using custom accessors. For\n  these purposes, Kotlin provides an automatic backing field which can\n  be accessed using the field identifier:</p>\n\n<pre><code>var counter = 0 // the initializer value is written directly to the backing field\n  set(value) {\n    if (value &gt;= 0)\n      field = value\n  }\n</code></pre>\n  \n  <p>The field identifier can only be used in the accessors of the property.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 1, "last_activity_date": 1460640305, "creation_date": 1460640305, "answer_id": 36624533, "question_id": 36555104, "link": "https://stackoverflow.com/questions/36555104/stackoverflowerror-using-singleton-in-kotlin/36624533#36624533", "title": "StackOverflowError using Singleton in Kotlin", "body": "<p>Adapted from a comment on the original answer:</p>\n\n<p>In Kotlin, you don't need all the boilerplate to declare a singleton. When declaring your class, simply make it an <code>object</code> like so:</p>\n\n<pre><code>object TokenHelper {\n    var token: String? = null\n    var appId: String? = null\n    var installationId: String? = null\n    var userId: String? = null\n}\n</code></pre>\n\n<p>Then access it as follows: <code>TokenHelper.token</code> or from Java <code>TokenHelper.INSTANCE.getToken()</code>.</p>\n"}], "owner": {"reputation": 1509, "user_id": 3105453, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c040b7dc425de024463a069c06972540?s=128&d=identicon&r=PG&f=1", "display_name": "user3105453", "link": "https://stackoverflow.com/users/3105453/user3105453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1751, "favorite_count": 0, "accepted_answer_id": 36624533, "answer_count": 2, "score": 4, "last_activity_date": 1460640305, "creation_date": 1460394923, "question_id": 36555104, "link": "https://stackoverflow.com/questions/36555104/stackoverflowerror-using-singleton-in-kotlin", "title": "StackOverflowError using Singleton in Kotlin", "body": "<p>Can anyone tell, why I'm getting a <code>java.lang.StackOverflowError</code> using this Kotlin class? Line 41 is <code>if (instance == null) {</code></p>\n\n<pre><code>class TokenHelper protected constructor() {\n    var token: String? = null\n    var appId: String? = null\n    var installationId: String? = null\n    var userId: String? = null\n\n    companion object {\n        var instance: TokenHelper? = null\n            get() {\n                if (instance == null) {\n                    instance = TokenHelper()\n                }\n                return instance\n            }\n    }\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>04-11 19:07:42.188 16142-16142/com.foo.bar.debug E/AndroidRuntime: FATAL EXCEPTION: main\n  Process: com.foo.bar.debug, PID: 16142\n  java.lang.StackOverflowError: stack size 8MB\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:0)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n      at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n    at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41\n04-11 19:07:42.271 16142-16142/com.foo.bar.debug D/Error: ERR: exClass=java.lang.StackOverflowError\n04-11 19:07:42.271 16142-16142/com.foo.bar.debug D/Error: ERR: exMsg=stack size 8MB\n04-11 19:07:42.271 16142-16142/com.foo.bar.debug D/Error: ERR: file=TokenHelper.kt\n04-11 19:07:42.271 16142-16142/com.foo.bar.debug D/Error: ERR: class=com.foo.bar.helper.TokenHelper$Companion\n04-11 19:07:42.271 16142-16142/com.foo.bar.debug D/Error: ERR: method=getInstance line=0\n04-11 19:07:42.282 16142-16142/com.foo.bar.debug D/Error: ERR: stack=java.lang.StackOverflowError: stack size 8MB\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:0)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n  at com.foo.bar.helper.TokenHelper$Companion.getInstance(TokenHelper.kt:41)\n    at com.foo.bar.helper.TokenHelper$Companion.getInstance(\n04-11 19:07:42.283 16142-16142/com.foo.bar.debug D/Error: ERR: TOTAL BYTES WRITTEN: 880768\n04-11 19:07:45.527 16142-16142/com.foo.bar.debug D/Process: killProcess, pid=16142\n04-11 19:07:45.528 16142-16142/com.foo.bar.debug D/Process: com.android.internal.os.RuntimeInit$UncaughtHandler.uncaughtException:113 java.lang.ThreadGroup.uncaughtException:693 java.lang.ThreadGroup.uncaughtException:690 \n</code></pre>\n\n<p>Android Studio 2.0, Kotlin 1.0.1-2</p>\n"}, {"tags": ["reflection", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 2792899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKn1r.png?s=128&g=1", "display_name": "Jonas Franz", "link": "https://stackoverflow.com/users/2792899/jonas-franz"}, "edited": false, "score": 0, "creation_date": 1460395121, "post_id": 36554859, "comment_id": 60710673, "body": "Thank you. I already tried this but my IDE said that &quot;javaClass&quot; is an unresolved reference but if I compile it it will works fine. I&#39;m going to report this bug to JetBrains. Screenshot: <a href=\"https://www.dropbox.com/s/aucyqadcu0j0xsc/Screenshot%202016-04-11%2019.17.37.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/aucyqadcu0j0xsc/&hellip;</a>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1460394026, "creation_date": 1460394026, "answer_id": 36554859, "question_id": 36554728, "link": "https://stackoverflow.com/questions/36554728/getting-current-class/36554859#36554859", "title": "Getting current class", "body": "<p>Use <code>javaClass</code> to get a <code>Class</code> instance for <code>this</code> object. If you want to get a <code>Class</code> object for a particular class literal use <code>Dog::class.java</code>.</p>\n"}], "owner": {"reputation": 448, "user_id": 2792899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKn1r.png?s=128&g=1", "display_name": "Jonas Franz", "link": "https://stackoverflow.com/users/2792899/jonas-franz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36554859, "answer_count": 1, "score": 1, "last_activity_date": 1460394026, "creation_date": 1460393560, "question_id": 36554728, "link": "https://stackoverflow.com/questions/36554728/getting-current-class", "title": "Getting current class", "body": "<p>how can I get the current class in Kotlin. For example if there are the abstract class \"Animal\" and the child-class \"Dog\" (witch is a child of \"Animal\") how can I get the class of \"Dog\" in \"Animal\". I don't now witch classes will use \"Animal\"</p>\n\n<p>I already tried to use:</p>\n\n<pre><code>this::class\n</code></pre>\n\n<p>(what could be in Java):</p>\n\n<pre><code>this.getClass()\n</code></pre>\n\n<p>But this method is according to my IDE not available.</p>\n\n<p>Best regards </p>\n\n<p>Jonas Franz</p>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 1, "creation_date": 1460371270, "post_id": 36545587, "comment_id": 60693585, "body": "Ilia, maybe you can create sample project on github, it&#39;s will really help people to answer on your question."}, {"owner": {"reputation": 63, "user_id": 6187485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5a2e40e107efc4f0f40f24f1d8d4d2?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u043b\u044c\u044f \u0420\u044f\u0431\u0447\u0443\u043a", "link": "https://stackoverflow.com/users/6187485/%d0%98%d0%bb%d1%8c%d1%8f-%d0%a0%d1%8f%d0%b1%d1%87%d1%83%d0%ba"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1460374629, "post_id": 36545587, "comment_id": 60695825, "body": "@IRus i have a project that has a same error <a href=\"https://github.com/ilya-rb/Photo-Map\" rel=\"nofollow noreferrer\">link</a>.  I already tried to create a new project and make it work, but still same error"}], "answers": [{"tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 2, "last_activity_date": 1460385559, "last_edit_date": 1460385559, "creation_date": 1460379153, "answer_id": 36549250, "question_id": 36545587, "link": "https://stackoverflow.com/questions/36545587/kotlin-dagger2-cannot-find-symbol-applicationmodule-provideapplicationfactory/36549250#36549250", "title": "Kotlin Dagger2 cannot find symbol ApplicationModule_ProvideApplicationFactory", "body": "<p>Looking through your project I noticed some of your dagger <code>Module</code>s have providing methods with similar names like <code>providesContext()</code>. Dagger 2 (or kapt) may have a problem with it, which results in your error. Please try renaming them, so that all <code>@Provides</code> methods have unique names.</p>\n\n<p>Also annotations have the runtime retention in Kotlin by default, so you don't need to use <code>@Retention(AnnotationRetention.RUNTIME)</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 6187485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5a2e40e107efc4f0f40f24f1d8d4d2?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u043b\u044c\u044f \u0420\u044f\u0431\u0447\u0443\u043a", "link": "https://stackoverflow.com/users/6187485/%d0%98%d0%bb%d1%8c%d1%8f-%d0%a0%d1%8f%d0%b1%d1%87%d1%83%d0%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1902, "favorite_count": 0, "accepted_answer_id": 36549250, "answer_count": 1, "score": 6, "last_activity_date": 1460385559, "creation_date": 1460369097, "last_edit_date": 1592644375, "question_id": 36545587, "link": "https://stackoverflow.com/questions/36545587/kotlin-dagger2-cannot-find-symbol-applicationmodule-provideapplicationfactory", "title": "Kotlin Dagger2 cannot find symbol ApplicationModule_ProvideApplicationFactory", "body": "<p>I'm trying to use Dagger2 with Kotlin but today trying to compile got this error:</p>\n<blockquote>\n<p>Error:Execution failed for task ':app:compileDebugJavaWithJavac'.</p>\n<p>Error:(5, 43) error: cannot find symbol class ApplicationModule_ProvideApplicationFactory</p>\n</blockquote>\n<p><strong>(App) Build.gradle</strong></p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion &quot;23.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.ilyarb.geotags&quot;\n        minSdkVersion 15\n        targetSdkVersion 23\n        versionCode 1\n        versionName &quot;1.0&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n    dexOptions {\n        javaMaxHeapSize &quot;2048M&quot;\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\n\n    final SUPPORT_LIBRARY_VERSION = &quot;23.3.0&quot;\n    final PLAY_SERVICES_VERSION = &quot;8.4.0&quot;\n\n    compile &quot;com.android.support:appcompat-v7:$SUPPORT_LIBRARY_VERSION&quot;\n    compile &quot;com.android.support:design:$SUPPORT_LIBRARY_VERSION&quot;\n\n    // Dagger 2\n    compile 'com.google.dagger:dagger:2.0.2'\n    kapt 'com.google.dagger:dagger-compiler:2.0.2'\n    provided 'org.glassfish:javax.annotation:10.0-b28'\n\n    compile &quot;com.google.android.gms:play-services-maps:$PLAY_SERVICES_VERSION&quot;\n    compile &quot;com.google.android.gms:play-services-location:$PLAY_SERVICES_VERSION&quot;\n\n    compile 'com.jakewharton.timber:timber:4.1.0'\n    compile 'com.jakewharton.byteunits:byteunits:0.9.1'\n\n    debugCompile 'com.squareup.leakcanary:leakcanary-android:1.3.1'\n    releaseCompile 'com.squareup.leakcanary:leakcanary-android-no-op:1.3.1'\n\n    testCompile 'junit:junit:4.12'\n}\n\nrepositories {\n    mavenCentral()\n}\n\nbuildscript {\n    ext.kotlin_version = '1.0.1-2'\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n}\n}\n</code></pre>\n<p><strong>root build.gradle</strong></p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:1.5.0'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><strong>Application class</strong></p>\n<pre><code>package com.ilyarb.geotags\n\nimport android.app.Application\nimport com.google.android.gms.common.api.GoogleApiClient\nimport com.ilyarb.geotags.injection.component.ApplicationComponent\nimport com.ilyarb.geotags.injection.component.DaggerApplicationComponent\nimport com.ilyarb.geotags.injection.module.ApplicationModule\nimport com.squareup.leakcanary.LeakCanary\nimport timber.log.Timber\nimport javax.inject.Inject\n\nclass GeotagApp : Application() {\n\n    @Inject lateinit var mGoogleApiClient: GoogleApiClient\n\n    companion object {\n        @JvmStatic lateinit var mApplicationComponent: ApplicationComponent\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        LeakCanary.install(this)\n\n        if (BuildConfig.DEBUG) {\n            Timber.plant(Timber.DebugTree())\n        }\n\n        mApplicationComponent = DaggerApplicationComponent.builder()\n            .applicationModule(ApplicationModule(this))\n            .build()\n\n        mApplicationComponent.inject(this)\n    }\n\n}\n</code></pre>\n<p><strong>Application Component</strong></p>\n<pre><code>package com.ilyarb.geotags.injection.component\n\nimport android.app.Application\nimport com.ilyarb.geotags.injection.module.ApplicationModule\nimport dagger.Component\nimport javax.inject.Singleton\n\n@Singleton\n@Component(modules = arrayOf(ApplicationModule::class))\ninterface ApplicationComponent {\n\n    fun inject(application: Application)\n\n}\n</code></pre>\n<p><strong>Application Module</strong></p>\n<pre><code>package com.ilyarb.geotags.injection.module\n\nimport android.app.Application\nimport com.google.android.gms.common.api.GoogleApiClient\nimport com.google.android.gms.location.LocationServices\nimport dagger.Module\nimport dagger.Provides\nimport javax.inject.Singleton\n\n@Module\nclass ApplicationModule(private val mApplication: Application) {\n\n    @Provides\n    @Singleton\n    fun provideGoogleApiClient() : GoogleApiClient {\n        return GoogleApiClient.Builder(mApplication)\n            .addApi(LocationServices.API)\n            .build()\n    }\n\n}\n</code></pre>\n<p>It generates DaggerApplicationComponent but when i try to run application it fails with this error.</p>\n<p>I've already tried to clean and rebuild the project but it didn't work.</p>\n<p>Any help will be greatly appreciated.</p>\n"}, {"tags": ["unit-testing", "mocking", "mockito", "kotlin"], "comments": [{"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 1, "creation_date": 1460343189, "post_id": 36536727, "comment_id": 60680434, "body": "You could make it implement an interface and mock that instead."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1460346574, "post_id": 36536727, "comment_id": 60681194, "body": "Thanks @AndroidEx. If you could elaborate and provide an working example of that, that would really help. Thanks!"}, {"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 1, "creation_date": 1460352408, "post_id": 36536727, "comment_id": 60682742, "body": "Take a look at <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">github.com/nhaarman/mockito-kotlin</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1473264059, "post_id": 36536727, "comment_id": 66077163, "body": "There is another easy solution for mockito for mocking final classes, see <a href=\"http://stackoverflow.com/a/39367070/3679676\">stackoverflow.com/a/39367070/3679676</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460368609, "post_id": 36543645, "comment_id": 60691731, "body": "Thanks Michael. So for every class we need to test, we need to implement an interface instead? That sounds like more code change than &#39;open&#39; the class, Or did I miss something..."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460371232, "post_id": 36543645, "comment_id": 60693556, "body": "Sure, but it&#39;s a big step towards a better architecture :)"}, {"owner": {"reputation": 15221, "user_id": 2326914, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5be766827c5f7d3c077e92f75b7f9104?s=128&d=identicon&r=PG", "display_name": "Rog&#233;rio", "link": "https://stackoverflow.com/users/2326914/rog%c3%a9rio"}, "edited": false, "score": 5, "creation_date": 1460387595, "post_id": 36543645, "comment_id": 60705741, "body": "Creating a separate interface without a valid reason (from an OO or API design standpoint) is over-enginneering as it only adds complexity. It&#39;s even worse than making a class unnecessarily <code>open</code>. (And, no, not creating the interface does <i>not</i> violate GoF&#180;s principle of &quot;program to an interface, not an implementation&quot;.)"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 1, "creation_date": 1460388503, "post_id": 36543645, "comment_id": 60706378, "body": "The question is too general to have a single correct answer, but in my opinion classes that need to be mocked are usually injected as dependencies and have other dependencies injected into them. In this case creating a separate interface for such classes is a good idea as it helps to make the system loosely coupled and unit testing easier or even possible. That&#39;s quite a valid reason for me."}, {"owner": {"reputation": 10135, "user_id": 553941, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0f03959a2b71242aa003a38b3453c7f?s=128&d=identicon&r=PG", "display_name": "Pijusn", "link": "https://stackoverflow.com/users/553941/pijusn"}, "edited": false, "score": 2, "creation_date": 1464236625, "post_id": 36543645, "comment_id": 62404247, "body": "It&#39;s getting a bit off-topic but wanted to point out that using interfaces does not necessarily reduce coupling. You always rely on the contract. If you simply move all public methods to an interface, you do not affect coupling, you just make more code lines. A class has an interface + implementation but when you pass an object around, it&#39;s just the interface (<i>the contract</i>) that everything relies on."}, {"owner": {"reputation": 5417, "user_id": 842697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8616a682a42637b1327b765c6618fd63?s=128&d=identicon&r=PG", "display_name": "Brais Gabin", "link": "https://stackoverflow.com/users/842697/brais-gabin"}, "edited": false, "score": 0, "creation_date": 1520443408, "post_id": 36543645, "comment_id": 85320446, "body": "There is another option: You can use <a href=\"https://engineering.21buttons.com/mocking-kotlin-classes-with-mockito-the-fast-way-631824edd5ba\" rel=\"nofollow noreferrer\">all-open compiler plugin from kotlin</a> in your test builds."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 8, "last_activity_date": 1460363706, "creation_date": 1460363706, "answer_id": 36543645, "question_id": 36536727, "link": "https://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class/36543645#36543645", "title": "Is it possible to use Mockito with Kotlin without open the class?", "body": "<p>There're three ways I'm aware of how you can mock Kotlin classes:</p>\n\n<ol>\n<li><p>Use interfaces instead of classes. In this case you replace all usages of a particular class with the corresponding interface. And in testing code you mock the interface.</p>\n\n<pre><code>interface Something { /* ... */ }\n\nclass SomethingImpl : Something { /* ... */ }\n\nfun processSomething(something: Something) { /* ... */ }\n\nval something = mock(Something::class.java)\nprocessSomething(mock)\n</code></pre></li>\n<li><p>Make classes open, which is not very convenient.</p></li>\n<li><p>Use <a href=\"https://github.com/jayway/powermock\" rel=\"noreferrer\">PowerMock</a> instead of Mockito. Using its <code>ClassLoader</code> you can do much more than with Mockito.</p></li>\n</ol>\n\n<p>I prefer the first approach because it's a good idea to work with interfaces instead of classes even if you don't use mocking frameworks. </p>\n"}, {"comments": [{"owner": {"reputation": 707, "user_id": 263423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575ce5192b49886a361a1e75d0e46759?s=128&d=identicon&r=PG", "display_name": "Aleksei Potapkin", "link": "https://stackoverflow.com/users/263423/aleksei-potapkin"}, "edited": false, "score": 0, "creation_date": 1481553394, "post_id": 39915352, "comment_id": 69410492, "body": "Is it working with dexmaker? For Android Instrumentation tests?"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 707, "user_id": 263423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/575ce5192b49886a361a1e75d0e46759?s=128&d=identicon&r=PG", "display_name": "Aleksei Potapkin", "link": "https://stackoverflow.com/users/263423/aleksei-potapkin"}, "edited": false, "score": 0, "creation_date": 1481636378, "post_id": 39915352, "comment_id": 69448674, "body": "@folkyatina no idea, sorry"}, {"owner": {"reputation": 1057, "user_id": 3460025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f82b7b0bdcb321515e823c9f00c07a?s=128&d=identicon&r=PG&f=1", "display_name": "amitavk", "link": "https://stackoverflow.com/users/3460025/amitavk"}, "edited": false, "score": 0, "creation_date": 1503298678, "post_id": 39915352, "comment_id": 78539562, "body": "This doesn&#39;t work for me either, and is apparently not supported for Android: <a href=\"https://github.com/mockito/mockito/pull/648\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/pull/648</a>"}, {"owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "reply_to_user": {"reputation": 1057, "user_id": 3460025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f82b7b0bdcb321515e823c9f00c07a?s=128&d=identicon&r=PG&f=1", "display_name": "amitavk", "link": "https://stackoverflow.com/users/3460025/amitavk"}, "edited": false, "score": 0, "creation_date": 1503309658, "post_id": 39915352, "comment_id": 78546144, "body": "@amitav13 yeah unfortunately. however, the question is not tagged <code>android</code>. but I&#39;ll update the answer to make this more clear"}, {"owner": {"reputation": 176, "user_id": 4018922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hUnYI.png?s=128&g=1", "display_name": "stedi", "link": "https://stackoverflow.com/users/4018922/stedi"}, "edited": false, "score": 0, "creation_date": 1522316585, "post_id": 39915352, "comment_id": 86112721, "body": "For Android Instrumentation tests we can use <a href=\"https://github.com/tmurakami/dexopener\" rel=\"nofollow noreferrer\">dexopener</a>, which opens final classes without necessity to modify them or add annotations."}], "tags": [], "owner": {"reputation": 7351, "user_id": 1096567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ateKI.jpg?s=128&g=1", "display_name": "Lovis", "link": "https://stackoverflow.com/users/1096567/lovis"}, "is_accepted": true, "score": 10, "last_activity_date": 1503309739, "last_edit_date": 1503309739, "creation_date": 1475836938, "answer_id": 39915352, "question_id": 36536727, "link": "https://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class/39915352#39915352", "title": "Is it possible to use Mockito with Kotlin without open the class?", "body": "<p><a href=\"https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2\" rel=\"noreferrer\">Mockito2</a> can now mock final classes as well.</p>\n\n<p>However, this feature is <strong>opt-in</strong>, so you need to enable it manually.<br>\nTo do so, you need to define a file <code>/mockito-extensions/org.mockito.plugins.MockMaker</code> containing the line <code>mock-maker-inline</code></p>\n\n<p>See e.g.<br>\n<a href=\"http://hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito/\" rel=\"noreferrer\">http://hadihariri.com/2016/10/04/Mocking-Kotlin-With-Mockito/</a> or \n <a href=\"https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#unmockable\" rel=\"noreferrer\">https://github.com/mockito/mockito/wiki/What%27s-new-in-Mockito-2#unmockable</a><br>\nfor a quick introduction </p>\n\n<p>on a side note, this currently <a href=\"https://github.com/mockito/mockito/pull/648#issuecomment-321699294\" rel=\"noreferrer\">doesn't work for android</a></p>\n"}, {"comments": [{"owner": {"reputation": 2509, "user_id": 2754856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6300549551749f2522a6b3a2c6f5b822?s=128&d=identicon&r=PG&f=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/2754856/fabio"}, "edited": false, "score": 2, "creation_date": 1499686400, "post_id": 44284452, "comment_id": 76995160, "body": "I liked this solution for being the least intrusive and the one that offers most control over the alternatives."}], "tags": [], "owner": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "is_accepted": false, "score": 11, "last_activity_date": 1496232600, "creation_date": 1496232600, "answer_id": 44284452, "question_id": 36536727, "link": "https://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class/44284452#44284452", "title": "Is it possible to use Mockito with Kotlin without open the class?", "body": "<p>The MockMaker plugin doesn't seem to work when running espresso tests. Therefore, you can use Kotlin's <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html#all-open-compiler-plugin\" rel=\"noreferrer\">all-open pugin</a> instead.</p>\n\n<p>Add the plugin in build.gradle:</p>\n\n<pre><code>buildscript {\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-allopen:$kotlin_version\"\n    }\n}\n\napply plugin: \"kotlin-allopen\"\n</code></pre>\n\n<p>Specify the annotation that will make the class open:</p>\n\n<pre><code>allOpen {\n    annotation(\"com.my.MyMockable\")\n}\n</code></pre>\n\n<p>Create your annotation which can be used to annotate classes:</p>\n\n<pre><code>@Target(AnnotationTarget.CLASS)\nannotation class MyMockable\n</code></pre>\n\n<p>Then, in order to make your class and its public methods Mockable (open), annotate it with your annotation:</p>\n\n<pre><code>@MyMockable\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5777, "favorite_count": 1, "accepted_answer_id": 39915352, "answer_count": 3, "score": 14, "last_activity_date": 1503309739, "creation_date": 1460330592, "last_edit_date": 1460371347, "question_id": 36536727, "link": "https://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class", "title": "Is it possible to use Mockito with Kotlin without open the class?", "body": "<p>As we probably know, by default Kotlin class once defined, it is final, unless it is explicitly declared <code>open</code>. </p>\n\n<p>This would post a challenge when we want to Mock it using Mockito. We need to explicitly declare it as <code>open</code>. Is there a way we could avoid declaring it as <code>open</code> while able to Mock it for our testing?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 0, "creation_date": 1460354096, "post_id": 36536438, "comment_id": 60683393, "body": "The repository <a href=\"https://github.com/TinyMission/kara/blob/master/README.md\" rel=\"nofollow noreferrer\">README.md</a> says: &quot;Check out karaframework.com to get a quick overview of the project. (<b>Caution:</b> Some contents are outdated.)&quot;. I don&#39;t think there is a <code>kara</code> script anymore. Downloading from the Build Server is also unavailable. Maybe the project is dead (?) and you should consider alternatives."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1460364863, "post_id": 36536438, "comment_id": 60689111, "body": "From <a href=\"https://github.com/TinyMission/kara\" rel=\"nofollow noreferrer\">github.com/TinyMission/kara</a> :  &gt; Download the repository, load the project in IntelliJ IDEA (can take a while), then choose the &quot;Sample Server&quot; configuration in the toolbar and run it."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1460467917, "post_id": 36536438, "comment_id": 60748458, "body": "Kara is not dead, but it&#39;s really not in a state where it can be used by someone getting started with Web development. Please consider using a more mature framework, such as Spring Boot."}], "owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460353760, "creation_date": 1460328411, "last_edit_date": 1460353760, "question_id": 36536438, "link": "https://stackoverflow.com/questions/36536438/how-to-install-and-configure-kara-web-framework", "title": "How to install and configure Kara Web Framework?", "body": "<p>I want to get started with web development, but I am having trouble installing Kara on my computer. The web site states that the Github repository includes a bash script for Mac OS-X, but I cannot find the script anywhere, just .iml files and the source code. There is very little information on the web site about how to configure Kara on my machine. Any pointers or advice would be appreciated.</p>\n"}, {"tags": ["java", "spring", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1460384397, "post_id": 36543430, "comment_id": 60703331, "body": "In the meantime you can write this one class in Java."}, {"owner": {"reputation": 284, "user_id": 235668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35a0783ffebe5bbe1c724bee40901a34?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/235668/arthur"}, "edited": false, "score": 0, "creation_date": 1460394100, "post_id": 36543430, "comment_id": 60710096, "body": "Thanks for the info!"}, {"owner": {"reputation": 541, "user_id": 1117181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce29746f3ada533be47b21dbb5f8a4aa?s=128&d=identicon&r=PG", "display_name": "JasonMing", "link": "https://stackoverflow.com/users/1117181/jasonming"}, "edited": false, "score": 1, "creation_date": 1557989419, "post_id": 36543430, "comment_id": 98952340, "body": "This problem is fixed now, can use the <code>@get:</code> use-site target."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 7, "last_activity_date": 1460362951, "creation_date": 1460362951, "answer_id": 36543430, "question_id": 36535688, "link": "https://stackoverflow.com/questions/36535688/kotlin-spring-aliasfor/36543430#36543430", "title": "Kotlin + Spring AliasFor", "body": "<p>That's a bug in Kotlin, which is not fixed at the moment: <a href=\"https://youtrack.jetbrains.com/issue/KT-11475\" rel=\"noreferrer\">KT-11475</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8230051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2553a1bd0395b755713425aaea365bcc?s=128&d=identicon&r=PG&f=1", "display_name": "Pazkooda", "link": "https://stackoverflow.com/users/8230051/pazkooda"}, "is_accepted": false, "score": 1, "last_activity_date": 1541501002, "last_edit_date": 1592644375, "creation_date": 1541500560, "answer_id": 53170161, "question_id": 36535688, "link": "https://stackoverflow.com/questions/36535688/kotlin-spring-aliasfor/53170161#53170161", "title": "Kotlin + Spring AliasFor", "body": "<p>Issue seems to has been fixed within scope of <a href=\"https://youtrack.jetbrains.com/issue/KT-25287\" rel=\"nofollow noreferrer\">KT-25287</a> i.e. snippet from question should work for <em>Kotlin 1.3+</em>.</p>\n"}], "owner": {"reputation": 284, "user_id": 235668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35a0783ffebe5bbe1c724bee40901a34?s=128&d=identicon&r=PG", "display_name": "Arthur", "link": "https://stackoverflow.com/users/235668/arthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 1, "accepted_answer_id": 36543430, "answer_count": 2, "score": 4, "last_activity_date": 1541501002, "creation_date": 1460323235, "question_id": 36535688, "link": "https://stackoverflow.com/questions/36535688/kotlin-spring-aliasfor", "title": "Kotlin + Spring AliasFor", "body": "\n\n<p>I've been trying to use Springs <code>@AliasFor</code> annotation in a Kotlin project but it seems that the annotation on the annotation parameter isn't visible at runtime (hence it's not picked up by Spring).</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(method = arrayOf(RequestMethod.POST))\nannotation class PostMapping(\n    @get:AliasFor(annotation = RequestMapping::class, attribute = \"value\")\n    vararg val value: String = arrayOf())\n</code></pre>\n\n<p>And...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Returns empty array instead of array with the @AliasFor annotation\nPostMapping::class.java.methods[0].annotations\n</code></pre>\n\n<p>Is there something I'm missing?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "edited": false, "score": 0, "creation_date": 1460301333, "post_id": 36531501, "comment_id": 60666814, "body": "I apologize if I rambled. I am sick and was up all night last night."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "edited": false, "score": 0, "creation_date": 1460333297, "post_id": 36533881, "comment_id": 60678300, "body": "Thank you. Any pointers on where I could go to learn about kotlinx.html? Seems like it&#39;s hard to come by resources for learning these frameworks since Kotlin is newer."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "edited": false, "score": 0, "creation_date": 1460348138, "post_id": 36533881, "comment_id": 60681601, "body": "Never heard of a tutorial on the thing or something. It looks very much like a normal HTML, and where it doesn&#39;t, code completion in IDE usually helps."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1460313365, "creation_date": 1460313365, "answer_id": 36533881, "question_id": 36531501, "link": "https://stackoverflow.com/questions/36531501/kotlin-web-programming-without-using-intelli-j-ultimate/36533881#36533881", "title": "Kotlin Web Programming without Using Intelli-J Ultimate?", "body": "<p>Intelij IDEA Community Edition supports HTML/CSS/JS etc all right. I believe there is no special support for Kara (and no plans for it) since Kotlin code highlighting and completion do the job.</p>\n\n<p>You are right that advanced frameworks like JSP need Ultimate Edition, but since you probably do not have a fixed stack, try to choose some other alternatives. I use <code>kotlinx.html</code> with any rooting framework for HTML templating.</p>\n"}], "owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 1, "accepted_answer_id": 36533881, "answer_count": 1, "score": 2, "last_activity_date": 1460313365, "creation_date": 1460301304, "question_id": 36531501, "link": "https://stackoverflow.com/questions/36531501/kotlin-web-programming-without-using-intelli-j-ultimate", "title": "Kotlin Web Programming without Using Intelli-J Ultimate?", "body": "<p>I am a Java developer who has fallen in love with Kotlin.I am very new to it, but it is a Great language. I just have one problem: I also love web development. It makes it very difficult to do web development in Kotlin since every tutorial out there is in Intelli-J Ultimate Edition and I just can't swallow the cost right now. There is already not quite as much support for Kotlin online, being such a new language. Are there alternative IDE's and/or ways to use Intelli-J CE to develop Web Apps (JSP-like, Kara, HML builder) with Kotlin? The cost of Intelli-J Ultimate is forcing me to do all of my development in Intelli-J except Kotlin web development, which is annoying. And I cannot seem to find any really good alternative anyway.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460301599, "post_id": 36531428, "comment_id": 60666910, "body": "The Kotlin HTML builder, AFAIK, is just an example of how builders can be used with Kotlin to create a DSL. I wouldn&#39;t advise it to use it in any real use-case. Use your preferred web framework (Spring-MVC, plain servlets/JSPs, whatever), and just write your classes in Kotlin rather than Java."}, {"owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460301803, "post_id": 36531428, "comment_id": 60666989, "body": "That explains a lot. Haha. Thanks for the help."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1460311840, "post_id": 36531428, "comment_id": 60670777, "body": "What is the problem with InteliJ Community Edition? It is free and OOS <a href=\"https://www.jetbrains.com/idea/download/\" rel=\"nofollow noreferrer\">jetbrains.com/idea/download</a>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460312631, "post_id": 36531428, "comment_id": 60671071, "body": "@JBNizet <code>kotlinx.html</code> is a well working solution, and arguably better than JSP templates"}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1460312714, "creation_date": 1460312714, "answer_id": 36533740, "question_id": 36531428, "link": "https://stackoverflow.com/questions/36531428/running-kotlin-html-builder-in-the-browser/36533740#36533740", "title": "Running Kotlin HTML Builder in the Browser", "body": "<p>When you use Kotlin html builders <code>kotlinx.html</code> or any other of that sort, you need to, well, <strong>build</strong> them in order to get HTML for the browser.</p>\n\n<p>There are no such thing as \"Kotlin builder files\". Those constructs are plain Kotlin code, so you write them inside your (server?) codebase, <em>compile</em> them and then <em>invoke</em> them to generate HTML responses. This also means you need a (normal Java) router framework, like <code>Spark</code> for example.</p>\n\n<p>To sum up, html-builders are a way to generate HTML strings, so they do not include a way to ship the HTML elsewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "is_accepted": false, "score": 1, "last_activity_date": 1461674904, "creation_date": 1461674904, "answer_id": 36865449, "question_id": 36531428, "link": "https://stackoverflow.com/questions/36531428/running-kotlin-html-builder-in-the-browser/36865449#36865449", "title": "Running Kotlin HTML Builder in the Browser", "body": "<p>Kotlinx itself doesn't have any utilities to send the result to the user's browser. It's just a regular Kotlin code which can create HTML string. You need a way to send it to the user. There are some.</p>\n\n<p>The simplest one is plain old <a href=\"http://www.concretepage.com/java-ee/jsp-servlet/how-to-create-servlet-without-web-xml-webservlet-annotation-in-servlet-3\" rel=\"nofollow\"><strong>Java servlets</strong></a>. Anybody still using them?</p>\n\n<pre><code>@WebServlet(urlPatterns = arrayOf(\"/servlet\"), loadOnStartup = 1)\nclass KotlinxHtmlServlet : HttpServlet() {\n    override fun doGet(request: HttpServletRequest?, response: HttpServletResponse?) {\n        response!!.setContentType(\"text/html\")\n        response!!.writer.appendHTML(true).html {\n            head {\n                title = \"Hello from kotlinx.html + Servlets\"\n            }\n            body {\n                h1 { +\"Kotlin is awesome\" }\n                p {\n                    +\"Read more about \"\n                    a(\"http://kotlinlang.org\") {\n                        target = ATarget.blank\n                        +\"it\"\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"http://projects.spring.io/spring-boot/\" rel=\"nofollow\"><strong>Spring Boot</strong></a> is very popular today. However, this <code>@Controller</code> will work in vanilla Spring too:</p>\n\n<pre><code>@Controller\nclass KotlinxHtmlController {\n    @ResponseBody\n    @RequestMapping(path = arrayOf(\"controller\"), method = arrayOf(RequestMethod.GET))\n    fun doGet(): String {\n        return createHTML(true).html {\n            head {\n                title = \"Hello from kotlinx.html + Servlets\"\n            }\n            body {\n                h1 { +\"Kotlin is awesome\" }\n                p {\n                    +\"Read more about \"\n                    a(\"http://kotlinlang.org\") {\n                        target = ATarget.blank\n                        +\"it\"\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"http://sparkjava.com/\" rel=\"nofollow\"><strong>SparkJava</strong></a> is one of the plenty of young Java micro-frameworks. Note, that in case of SparkJava you can just write routes inside your <code>main</code>:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;): Unit {\n    get(\"spark\", { request: Request, response: Response -&gt;\n        createHTML(true).html {\n            head {\n                title = \"Hello from kotlinx.html + Servlets\"\n            }\n            body {\n                h1 { +\"Kotlin is awesome\" }\n                p {\n                    +\"Read more about \"\n                    a(\"http://kotlinlang.org\") {\n                        target = ATarget.blank\n                        +\"it\"\n                    }\n                }\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>I'm leaving dependency management, running the app and guessing the correct URLs to access generated pages to you. All of the above examples will result in this HTML:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head title=\"Hello from kotlinx.html + Servlets\"&gt;&lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Kotlin is awesome&lt;/h1&gt;\n    &lt;p&gt;Read more about &lt;a href=\"http://kotlinlang.org\" target=\"_blank\"&gt;it&lt;/a&gt;&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>You can also try <a href=\"http://www.dropwizard.io/\" rel=\"nofollow\">Dropwizard</a> or <a href=\"http://www.ninjaframework.org/\" rel=\"nofollow\">Ninja</a> frameworks.</p>\n\n<p>Also, you can take a look at <a href=\"http://karaframework.com/\" rel=\"nofollow\">Kara</a> \u2013 a web frameworks especially designed for Kotlin \u2013 but it is still in alpha stage.</p>\n"}, {"tags": [], "owner": {"reputation": 1453, "user_id": 2141659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FfmvC.jpg?s=128&g=1", "display_name": "innov8", "link": "https://stackoverflow.com/users/2141659/innov8"}, "is_accepted": false, "score": 0, "last_activity_date": 1498734693, "creation_date": 1498734693, "answer_id": 44823537, "question_id": 36531428, "link": "https://stackoverflow.com/questions/36531428/running-kotlin-html-builder-in-the-browser/44823537#44823537", "title": "Running Kotlin HTML Builder in the Browser", "body": "<p>I may be missing something here, but if using kotlinx.html javascript version, the resultant js code does perform as a DOM builder ... can add more if this is what is required.</p>\n"}], "owner": {"reputation": 245, "user_id": 5890894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1f10f7d280acbf47fdcf5269ba74fa7?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick S.", "link": "https://stackoverflow.com/users/5890894/patrick-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1356, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1498734693, "creation_date": 1460300914, "question_id": 36531428, "link": "https://stackoverflow.com/questions/36531428/running-kotlin-html-builder-in-the-browser", "title": "Running Kotlin HTML Builder in the Browser", "body": "<p>I am a Java developer that is very new to Kotlin. I love the language though, and I like how easily web applications can be done with it. The problem is that I cannot figure out how to run Kotlin HTML builder files in the browser, so that I can create a basic web page skeleton in kotlin. I can output it in the IDE, but it is silly how hard it seems to be to get it to run in my browser. This may be a dumb question and I'm missing something very obvious, but I can't seem to find the answer online. </p>\n\n<p>Keep in mind that I'm not using the Intelli-J IDE. Would love to, but can't afford to pay out the nose just to do web development in Kotlin. Been using Eclipse. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["java", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460283840, "post_id": 36528515, "comment_id": 60661135, "body": "What do you mean by &quot;handle the IOException&quot;? All exceptions are runtime exceptions in Kotlin, and thus don&#39;t need to be declared in the throws clause. And actually, even the Java code doesn&#39;t need to declare the IOException in its throws clause, since it never throws any IOException."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 116, "last_activity_date": 1615600123, "last_edit_date": 1615600123, "creation_date": 1460285663, "answer_id": 36528811, "question_id": 36528515, "link": "https://stackoverflow.com/questions/36528515/throws-exception-in-a-method-with-kotlin/36528811#36528811", "title": "throws Exception in a method with Kotlin", "body": "<p>In Kotlin, <a href=\"https://kotlinlang.org/docs/reference/exceptions.html#checked-exceptions\" rel=\"nofollow noreferrer\">there's no checked exceptions</a>, no exceptions have to be declared and you aren't forced to catch any exception, though, of course, you can. Even when deriving from a Java class, you don't have to declare exceptions that a method <code>throws</code>.</p>\n<p><a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#checked-exceptions\" rel=\"nofollow noreferrer\"><code>@Throws(SomeException::class)</code></a> is just intended for Java interoperability, which allows one to write a function with <code>throws</code> in Java signature, so that in Java it will be possible (and necessary) to handle the exception.</p>\n<p>Instead, public API exceptions should be documented in <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html#block-tags\" rel=\"nofollow noreferrer\">KDoc with <code>@throws</code> tag</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1562, "user_id": 5853262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i5x6Y.png?s=128&g=1", "display_name": "Mahdi Moqadasi", "link": "https://stackoverflow.com/users/5853262/mahdi-moqadasi"}, "edited": false, "score": 0, "creation_date": 1605090762, "post_id": 54327060, "comment_id": 114543805, "body": "I did it in okHttp interceptor. but it didn&#39;t force the java callers to catch the IOException. could you please tell me how can I throw exceptions in interceptors?"}], "tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": false, "score": 51, "last_activity_date": 1572244045, "last_edit_date": 1572244045, "creation_date": 1548245743, "answer_id": 54327060, "question_id": 36528515, "link": "https://stackoverflow.com/questions/36528515/throws-exception-in-a-method-with-kotlin/54327060#54327060", "title": "throws Exception in a method with Kotlin", "body": "<p>In <strong>Java</strong> your functions are something like this </p>\n\n<pre><code>void foo() throws IOException{\n    throw new IOException();\n}\n</code></pre>\n\n<p>But in <strong>Kotlin</strong> you can add annotation like below to force other Java classes to catch it. However, as other answers have pointed out, it doesn't have any meaning among Kotlin classes.</p>\n\n<pre><code>@Throws(IOException::class)\nfun foo() {\n    throw IOException()\n}\n</code></pre>\n\n<p>Source <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#checked-exceptions\" rel=\"noreferrer\">kotlinlang.org</a></p>\n"}], "owner": {"reputation": 13958, "user_id": 689723, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rQNO2.jpg?s=128&g=1", "display_name": "cesards", "link": "https://stackoverflow.com/users/689723/cesards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50312, "favorite_count": 4, "accepted_answer_id": 36528811, "answer_count": 2, "score": 64, "last_activity_date": 1615600123, "creation_date": 1460283687, "last_edit_date": 1574136827, "question_id": 36528515, "link": "https://stackoverflow.com/questions/36528515/throws-exception-in-a-method-with-kotlin", "title": "throws Exception in a method with Kotlin", "body": "<p>I'm trying to convert this Java code to Kotlin:</p>\n\n<pre><code>public class HeaderInterceptor implements Interceptor {\n  @Override public Response intercept(Chain chain) throws IOException {\n    return null;\n  }\n}\n</code></pre>\n\n<p>The problem is, when I implement the methods, I get something like</p>\n\n<pre><code>class JsonHeadersInterceptor : Interceptor {\n    override fun intercept(chain: Interceptor.Chain?): Response? {\n        throw UnsupportedOperationException()\n    }\n}\n</code></pre>\n\n<p>The only info I've found talking about throwing exceptions in Kotlin is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-throws/\" rel=\"noreferrer\">THIS</a>.</p>\n\n<p>Apart from removing the question mark, because it's not necessary, why it doesn't handle the <code>IOException</code> the same way? What is the best approach to handle this situation?</p>\n"}, {"tags": ["android", "android-view", "kotlin"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460268188, "post_id": 36526371, "comment_id": 60657170, "body": "how do you know <code>onGlobalLayout not being called</code>? because <code>f()</code> not being called?"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460268335, "post_id": 36526371, "comment_id": 60657196, "body": "Ya, the provided function is not called, and the picture is not loaded."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1460268427, "post_id": 36526371, "comment_id": 60657218, "body": "try to <code>Log.d</code> in the beginning of <code>onGlobalLayout</code> so that it is called everytime <code>onGlobalLayout</code> is called, not inside some conditional <code>if</code>"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460268779, "post_id": 36526371, "comment_id": 60657301, "body": "You&#39;re right, it was called but I guess my condition is not met. How do I ensure that my height and width are bigger than 0 and this get called again?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460268881, "post_id": 36526371, "comment_id": 60657322, "body": "i have no idea what <code>measuredWidth</code> &amp;&amp; <code>measuredHeight</code> are, and where they are set"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460269101, "post_id": 36526371, "comment_id": 60657360, "body": "measureHeight is from getMeasuredHeight and measureWidth is from getMeasuredWidth. In Kotlin, we could access the getter removing the get* keyword and different access it. It is essentially getMeasuredHeight() and getMeasureWidth(). The reason we use onGlobalLayout is to ensure the layout is done, and hence the width and height are now greater than 0. Is my assumption correct?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460269288, "post_id": 36526371, "comment_id": 60657394, "body": "ok so you call getMeasureWidth() &amp;&amp; getMeasuredHeight(), but on what View? BTW is it really easier to use kotlin instead of good old java?"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460269404, "post_id": 36526371, "comment_id": 60657415, "body": "That&#39;s on the ImageView. Using Kotlin so far so good. I have two apps working. Feel free to chat with me on if you like on Kotlin, would be nice to have someone to discuss with. Cheers."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460269607, "post_id": 36526371, "comment_id": 60657466, "body": "i just heard about kotlin but never used it, is it just enough to install kotlin plugin in android studio to use it in the android development?"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1460269738, "post_id": 36526371, "comment_id": 60657498, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108733/discussion-between-elye-and-pskink\">continue this discussion in chat</a>."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1460287172, "post_id": 36526371, "comment_id": 60662032, "body": "Where is actMinistryImage being defined and assigned?"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460287972, "post_id": 36526371, "comment_id": 60662279, "body": "<code>actMinistryImage</code> is the id of the ImageView. Right after <code>setContentView(R.layout.activity_ministry)</code>, then it get instantiated. It&#39;s essentially similar to findViewById(R.id.actMinistryImage)."}], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460329099, "post_id": 36531770, "comment_id": 60676646, "body": "Thanks. Removing <code>measuredWidth &gt; 0 &amp;&amp; measuredHeight &gt; 0)</code> works for me, and this is now working fine."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1460302672, "creation_date": 1460302672, "answer_id": 36531770, "question_id": 36526371, "link": "https://stackoverflow.com/questions/36526371/kotlin-ongloballayout-not-being-called/36531770#36531770", "title": "Kotlin: onGlobalLayout not being called", "body": "<p>First, you should compare <code>width</code> and <code>height</code> instead of <code>measuredWidth</code> and <code>measuredHeight</code>. The latter size is used only during the measure/layout process.</p>\n\n<p>Second, you should make sure that <code>ImageView</code> is described properly in the layout. That is its <code>layout_width</code> and <code>layout_height</code> must not be <code>wrap_content</code>. Moreover, other views must not result in this <code>ImageView</code> has <code>0</code> size.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 3, "accepted_answer_id": 36531770, "answer_count": 1, "score": 2, "last_activity_date": 1460302672, "creation_date": 1460267720, "question_id": 36526371, "link": "https://stackoverflow.com/questions/36526371/kotlin-ongloballayout-not-being-called", "title": "Kotlin: onGlobalLayout not being called", "body": "<p>I'm using Kotlin, and using onGlobalLayout to load an image view. through loadUrl. Without using afterMeasured, my image is loaded well, but at times due to the height is 0, it crashes. So I'm thinking using onGlobalLayout which I defined in my extension function afterMeasured as below. However somehow the onGlobalLayout never get called at all. What could be wrong with my code?</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_ministry)\n    actionBar?.setDisplayHomeAsUpEnabled(true)\n    model = intent.getSerializableExtra(Constants.ACTIVITY_NAVIGATE_MINISTRY) as Model.Ministries\n    actMinistryImage.loadUrl(model.photo)\n}\n\nfun ImageView.loadUrl(url: String?, placeholder: Int = R.drawable.ministries_blank) {\n    this.afterMeasured {\n        val transformation = FixRatioTransformation(this, true)\n        Picasso.with(context).load(url).error(placeholder).transform(transformation)\n                .placeholder(placeholder).into(this)\n    }\n}\n\n\ninline fun &lt;T: View&gt; T.afterMeasured(crossinline f: T.() -&gt; Unit) {\n    viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            if (measuredWidth &gt; 0 &amp;&amp; measuredHeight &gt; 0) {\n                viewTreeObserver.removeOnGlobalLayoutListener(this)\n                f()\n            }\n        }\n    })\n}\n</code></pre>\n\n<p>Perhaps this is not Kotlin specific, but more to invoking onGlobalLayout is not done correctly on my side?</p>\n"}, {"tags": ["java", "akka", "type-inference", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "is_accepted": true, "score": 2, "last_activity_date": 1460266548, "creation_date": 1460266548, "answer_id": 36526238, "question_id": 36525910, "link": "https://stackoverflow.com/questions/36525910/kotlin-type-inference-compile-error-when-using-akka-java-api/36526238#36526238", "title": "Kotlin type inference compile error when using Akka java API", "body": "<p>Well, the error message may be a bit unclear because of a lot of Scala stuff and <code>&lt;no name provided&gt;</code>, but it clearly defines the point of the error: your function should accept an <code>Any</code>, not an <code>Object</code>. The following codes compiles without any problems:</p>\n\n<pre><code>val future: Future&lt;Any&gt; = ask(sender, MyActor.Greeting(\"Saeed\"), 5000)\n\nfuture.onComplete(object : OnComplete&lt;Any?&gt;() {\n    override fun onComplete(failure: Throwable?, success: Any?) {\n        throw UnsupportedOperationException()\n    }\n}, context.dispatcher())\n</code></pre>\n"}], "owner": {"reputation": 8732, "user_id": 170664, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/db0f64b06c0aff85294ec0a3e76592a1?s=128&d=identicon&r=PG", "display_name": "Saeed Zarinfam", "link": "https://stackoverflow.com/users/170664/saeed-zarinfam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1904, "favorite_count": 0, "accepted_answer_id": 36526238, "answer_count": 1, "score": 2, "last_activity_date": 1460266548, "creation_date": 1460263706, "last_edit_date": 1460265370, "question_id": 36525910, "link": "https://stackoverflow.com/questions/36525910/kotlin-type-inference-compile-error-when-using-akka-java-api", "title": "Kotlin type inference compile error when using Akka java API", "body": "<p>I want to use Akka java API in a Kotlin program. When i want to set <code>onComplete</code> callback for a akka <code>Future</code>, i encounter the Kotlin compiler error, while the java equivalent work nice:</p>\n\n<pre><code>val future: Future&lt;Any&gt; = ask(sender, MyActor.Greeting(\"Saeed\"), 5000)\n\nfuture.onComplete(object : OnComplete&lt;Object&gt;() {\n    override fun onComplete(failure: Throwable?, success: Object?) {\n        throw UnsupportedOperationException()\n    }\n}, context.dispatcher())\n</code></pre>\n\n<p>The java code:</p>\n\n<pre><code>Future&lt;Object&gt; future = ask(sender(), new MyActor.Greeting(\"Saeed\"), 5000);\n\nfuture.onComplete(new OnComplete&lt;Object&gt;() {\n    public void onComplete(Throwable failure, Object result) {\n        if (failure != null) {\n            System.out.println(\"We got a failure, handle it here\");\n        } else {\n            System.out.println(\"result = \"+(String) result);\n        }\n    }\n},context().dispatcher());\n</code></pre>\n\n<p>The Kotlin compiler error:</p>\n\n<pre><code>Error:(47, 24) Kotlin: Type inference failed: \nfun &lt;U : kotlin.Any!&gt; onComplete(p0: scala.Function1&lt;scala.util.Try&lt;kotlin.Any!&gt;!, U!&gt;!, p1: scala.concurrent.ExecutionContext!): \nkotlin.Unit cannot be applied to (&lt;no name provided&gt;,scala.concurrent.ExecutionContextExecutor!)\nError:(47, 35) Kotlin: Type mismatch: inferred type is &lt;no name provided&gt; but scala.Function1&lt;scala.util.Try&lt;kotlin.Any!&gt;!, scala.runtime.BoxedUnit!&gt;! was expected\n</code></pre>\n\n<p>I pushed the project to <a href=\"https://github.com/zarinfam/akka-sample-kotlin\" rel=\"nofollow\">github</a>.</p>\n"}, {"tags": ["intellij-idea", "gradle", "kotlin", "yeoman-generator"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1460218980, "post_id": 36518481, "comment_id": 60644090, "body": "Do you have jre/jdk installed on your machine?"}, {"owner": {"reputation": 3656, "user_id": 3481183, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/00a2964412d3d17ef394caa2c93b2fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Believe2014", "link": "https://stackoverflow.com/users/3481183/believe2014"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1460242331, "post_id": 36518481, "comment_id": 60652088, "body": "yes, I installed java via     brew install ant     brew install maven     brew install gradle     brew install android-sdk     brew install android-ndk     brew cask install java"}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 1320841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p1RiE.jpg?s=128&g=1", "display_name": "jcdenton", "link": "https://stackoverflow.com/users/1320841/jcdenton"}, "is_accepted": false, "score": 1, "last_activity_date": 1460667113, "creation_date": 1460667113, "answer_id": 36633756, "question_id": 36518481, "link": "https://stackoverflow.com/questions/36518481/cannot-generate-new-project-using-yeoman-generator-gradlekotlin/36633756#36633756", "title": "Cannot generate new project using yeoman generator Gradle+Kotlin", "body": "<p>I've just fixed it. </p>\n\n<p>It was an OSX-specific bug in the generator logic, a rather stupid one: it incorrectly detected the platform and tried to call <code>./gradlew.bat</code>, it didn't even realize it's a .bat file, the reason for EACCES error actually was that this .bat didn't have +x permission. Just update the generator to 1.1.1 and it should be fine.</p>\n"}], "owner": {"reputation": 3656, "user_id": 3481183, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/00a2964412d3d17ef394caa2c93b2fb8?s=128&d=identicon&r=PG&f=1", "display_name": "Believe2014", "link": "https://stackoverflow.com/users/3481183/believe2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460667113, "creation_date": 1460213890, "question_id": 36518481, "link": "https://stackoverflow.com/questions/36518481/cannot-generate-new-project-using-yeoman-generator-gradlekotlin", "title": "Cannot generate new project using yeoman generator Gradle+Kotlin", "body": "<p>I installed Android Studio on Mac using <code>brew install Caskroom/cask/android-studio</code></p>\n\n<p>Then, I run <code>yo gradle-kotlin</code>, and got the following error. What can I do to make my first Hello World work?</p>\n\n<p>Thank you</p>\n\n<pre><code>\u2714 /Volumes/Git/android/kotlin-hello-world \n10:53 $ yo gradle-kotlin\n\n     _-----_\n    |       |    .--------------------------.\n    |--(o)--|    |      Welcome to the      |\n   `---------\u00b4   | incredible Gradle+Kotlin |\n    ( _\u00b4U`_ )    |        generator!        |\n    /___A___\\    '--------------------------'\n     |  ~  |     \n   __'.___.'__   \n \u00b4   `  |\u00b0 \u00b4 Y ` \n\n  Detecting installed Gradle version...\n  Fetching latest Kotlin version from Maven Central...\n\u2714 Fetched latest Kotlin version: 1.0.1-2\n\u2714 Detected installed Gradle version: 2.12\n? What's your project name? kotlin hello world\n? What Gradle version would you like to use? 2.12\n? What Kotlin version would you like to use? 1.0.1-2\n? Do you want to use Kotlin Reflection? Yes\n? Would you like to use IDEA Gradle plugin? Yes\nidentical .gitignore\nidentical src/main/kotlin/.gitkeep\nidentical src/test/kotlin/.gitkeep\nidentical build.gradle\nidentical gradle.properties\nidentical settings.gradle\n  Executing 'gradle wrapper' command...\n\n\u2714 Done executing 'gradle wrapper' command.\n  Executing Gradle tasks: idea build\ninternal/child_process.js:298\n    throw errnoException(err, 'spawn');\n    ^\n\nError: spawn EACCES\n  at exports._errnoException (util.js:856:11)\n  at ChildProcess.spawn (internal/child_process.js:298:11)\n  at Object.exports.spawn (child_process.js:362:9)\n  at Function.spawn (/usr/local/lib/node_modules/generator-gradle-kotlin/node_modules/cross-spawn-async/index.js:13:18)\n  at spawn (/usr/local/lib/node_modules/generator-gradle-kotlin/node_modules/cross-spawn/index.js:34:23)\n  at GradleKotlinGenerator.spawnCommand (/usr/local/lib/node_modules/generator-gradle-kotlin/node_modules/yeoman-generator/lib/actions/spawn_command.js:20:10)\n  at ChildProcess.&lt;anonymous&gt; (/usr/local/lib/node_modules/generator-gradle-kotlin/generators/app/gradle-kotlin.coffee:78:8)\n  at emitTwo (events.js:100:13)\n  at ChildProcess.emit (events.js:185:7)\n  at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)\n</code></pre>\n"}, {"tags": ["java", "javafx", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 4966704, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bKzTZ18ERhc/AAAAAAAAAAI/AAAAAAAABM0/DNvwLJVkrZ8/photo.jpg?sz=128", "display_name": "Alexandre Liscia", "link": "https://stackoverflow.com/users/4966704/alexandre-liscia"}, "is_accepted": true, "score": 3, "last_activity_date": 1460202940, "creation_date": 1460202940, "answer_id": 36516407, "question_id": 36516330, "link": "https://stackoverflow.com/questions/36516330/from-java-to-kotlin/36516407#36516407", "title": "From Java to Kotlin", "body": "<p>Ok, actually it was so simple that I couldn't guess. I can run the code directly in the EventHandler. Now everything works just fine !</p>\n\n<p>The 3 methods should be like this :</p>\n\n<pre><code>private fun makeOperandButton(button: Button, triggerOp: ObjectProperty&lt;Op&gt;) {\n    button.onAction = EventHandler {\n        curOp = triggerOp.get()\n    }\n}\n\nprivate fun makeNumericButton(s: String, button: Button) {\n    button.onAction = EventHandler {\n        if (curOp == Op.NOOP) {\n            value.set(value.get() * 10 + Integer.parseInt(s))\n        } else {\n            stackValue.set(value.get())\n            value.set(java.lang.Double.parseDouble(s))\n            stackOp = curOp\n            curOp = Op.NOOP\n        }\n    }\n}\n\nprivate fun makeClearButton(button: Button) {\n    button.onAction = EventHandler {\n        value.set(0.0)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 4966704, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bKzTZ18ERhc/AAAAAAAAAAI/AAAAAAAABM0/DNvwLJVkrZ8/photo.jpg?sz=128", "display_name": "Alexandre Liscia", "link": "https://stackoverflow.com/users/4966704/alexandre-liscia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1764, "favorite_count": 0, "accepted_answer_id": 36516407, "answer_count": 1, "score": 2, "last_activity_date": 1460202940, "creation_date": 1460202510, "question_id": 36516330, "link": "https://stackoverflow.com/questions/36516330/from-java-to-kotlin", "title": "From Java to Kotlin", "body": "<p>I'm tring to translate a simple JavaFX calc written in java into Kotlin code. <a href=\"https://gist.github.com/jewelsea/4344564\" rel=\"nofollow\">https://gist.github.com/jewelsea/4344564</a> -> The java source.</p>\n\n<p>Which I translated by this in Kotlin :</p>\n\n<pre><code>import Model.Math\nimport javafx.application.Application\nimport javafx.beans.binding.Bindings\nimport javafx.beans.property.*\nimport javafx.event.ActionEvent\nimport javafx.event.EventHandler\nimport javafx.geometry.Pos\nimport javafx.scene.Scene\nimport javafx.scene.control.*\nimport javafx.scene.input.KeyEvent\nimport javafx.scene.layout.*\nimport javafx.stage.Stage\nimport javafx.stage.StageStyle\n\nimport java.util.HashMap\n\n// A simple Kotlin, JavaFX application\nclass KotlinCode : Application() {\n\n    private val accelerators = HashMap&lt;String, Button&gt;()\n\n    private val stackValue = SimpleDoubleProperty()\n    private val value = SimpleDoubleProperty()\n\n    enum class Op {\n        NOOP, ADD, SUBTRACT, MULTIPLY, DIVIDE\n    }\n\n    private var curOp = Op.NOOP\n    private var stackOp = Op.NOOP\n\n    private val template = arrayOf(arrayOf(\"7\", \"8\", \"9\", \"/\"), arrayOf(\"4\", \"5\", \"6\", \"*\"), arrayOf(\"1\", \"2\", \"3\", \"-\"), arrayOf(\"0\", \"c\", \"=\", \"+\"))\n\n    override fun start(stage: Stage) {\n        val screen = createScreen()\n        val buttons = createButtons()\n\n        stage.title = \"Calc\"\n        stage.initStyle(StageStyle.UTILITY)\n        stage.isResizable = false\n        stage.scene = Scene(createLayout(screen, buttons))\n        stage.show()\n    }\n\n    private fun createLayout(screen: TextField, buttons: TilePane): VBox {\n        val layout = VBox(20.0)\n        layout.alignment = Pos.CENTER\n        layout.style = \"-fx-background-color: chocolate; -fx-padding: 20; -fx-font-size: 20;\"\n        layout.children.setAll(screen, buttons)\n        handleAccelerators(layout)\n        screen.prefWidthProperty().bind(buttons.widthProperty())\n        return layout\n    }\n\n    private fun handleAccelerators(layout: VBox) {\n        layout.addEventFilter(KeyEvent.KEY_PRESSED) { keyEvent -&gt;\n            val activated = accelerators[keyEvent.text]\n            activated?.fire()\n        }\n    }\n\n    private fun createScreen(): TextField {\n        val screen = TextField()\n        screen.style = \"-fx-background-color: aquamarine;\"\n        screen.alignment = Pos.CENTER_RIGHT\n        screen.isEditable = false\n        screen.textProperty().bind(Bindings.format(\"%.0f\", value))\n        return screen\n    }\n\n    private fun createButtons(): TilePane {\n        val buttons = TilePane()\n        buttons.vgap = 7.0\n        buttons.hgap = 7.0\n        buttons.prefColumns = template[0].size\n        for (r in template) {\n            for (s in r) {\n                buttons.children.add(createButton(s))\n            }\n        }\n        return buttons\n    }\n\n    private fun createButton(s: String): Button {\n        val button = makeStandardButton(s)\n\n        if (s.matches(\"[0-9]\".toRegex())) {\n            makeNumericButton(s, button)\n            //this.javaCode.makeNumericButton(s, button, curOp, value, stackValue, stackOp)\n        } else {\n            val triggerOp = determineOperand(s)\n            if (triggerOp.get() != Op.NOOP) {\n                //this.javaCode.makeOperandButton(button, triggerOp, this.curOp)\n                makeOperandButton(button, triggerOp)\n            } else if (\"c\" == s) {\n                //this.javaCode.makeClearButton(button, value)\n                makeClearButton(button)\n            } else if (\"=\" == s) {\n                makeEqualsButton(button)\n            }\n        }\n\n        return button\n    }\n\n    private fun determineOperand(s: String): ObjectProperty&lt;Op&gt; {\n        val triggerOp = SimpleObjectProperty(Op.NOOP)\n        when (s) {\n            \"+\" -&gt; triggerOp.set(Op.ADD)\n            \"-\" -&gt; triggerOp.set(Op.SUBTRACT)\n            \"*\" -&gt; triggerOp.set(Op.MULTIPLY)\n            \"/\" -&gt; triggerOp.set(Op.DIVIDE)\n        }\n        return triggerOp\n    }\n\n    private fun makeStandardButton(s: String): Button {\n        val button = Button(s)\n        button.style = \"-fx-base: beige;\"\n        accelerators.put(s, button)\n        button.setMaxSize(java.lang.Double.MAX_VALUE, java.lang.Double.MAX_VALUE)\n        return button\n    }\n\n    private fun makeEqualsButton(button: Button) {\n        button.style = \"-fx-base: ghostwhite;\"\n        button.setOnAction { actionEvent -&gt;\n            // On instancie notre objet Kotlin\n            val math = Math()\n            when (stackOp) {\n                Op.NOOP -&gt; {\n                }\n                Op.ADD -&gt; value.set(math.adition(stackValue.get(), value.get()))\n                Op.SUBTRACT -&gt; value.set(math.substraction(stackValue.get(), value.get()))\n                Op.MULTIPLY -&gt; value.set(math.multiplication(stackValue.get(), value.get()))\n                Op.DIVIDE -&gt; value.set(math.division(stackValue.get(), value.get()))\n            }\n        }\n    }\n\n    private fun makeOperandButton(button: Button, triggerOp: ObjectProperty&lt;Op&gt;) {\n        button.onAction = EventHandler {\n            fun handle(actionEvent: ActionEvent) {\n                curOp = triggerOp.get()\n            }\n        }\n    }\n\n    private fun makeNumericButton(s: String, button: Button) {\n        button.onAction = EventHandler {\n            fun handle(actionEvent: ActionEvent) {\n                if (curOp == Op.NOOP) {\n                    value.set(value.get() * 10 + Integer.parseInt(s))\n                } else {\n                    stackValue.set(value.get())\n                    value.set(java.lang.Double.parseDouble(s))\n                    stackOp = curOp\n                    curOp = Op.NOOP\n                }\n            }\n        }\n    }\n\n    private fun makeClearButton(button: Button) {\n        button.onAction = EventHandler {\n            fun handle(actionEvent: ActionEvent) {\n                value.set(0.0)\n            }\n        }\n    }\n\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            launch(KotlinCode::class.java)\n        }\n    }\n}\n</code></pre>\n\n<p>Now the calc start up but there is no action binded to the button. Anyone have a clue ?</p>\n\n<p>My guess is that in <strong>makeOperandButton</strong>, <strong>makeNumericButton</strong> and <strong>makeClearButton</strong> the handle function is never triggered. But I don't get why.</p>\n\n<p>Thanks a lot and have a great day !</p>\n"}, {"tags": ["spring", "spring-mvc", "kotlin"], "comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460228032, "post_id": 36515094, "comment_id": 60647508, "body": "You&#39;re saying that Spring needs a parameterless constructor but the working code still has just a single parameter constructor."}, {"owner": {"reputation": 1654, "user_id": 2138356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b5cfbdd95128b8feefe8c49299022af9?s=128&d=identicon&r=PG", "display_name": "fasth", "link": "https://stackoverflow.com/users/2138356/fasth"}, "reply_to_user": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460347733, "post_id": 36515094, "comment_id": 60681507, "body": "Yes, you&#39;re right. Edited."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 109946, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc77b66963757ab1079b5cbacfdba1d6?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/109946/scott"}, "edited": false, "score": 1, "creation_date": 1516676846, "post_id": 36521309, "comment_id": 83774883, "body": "Curiously, how&#39;d you come up with that?  Reflection on the resulting data model?"}, {"owner": {"reputation": 963, "user_id": 2686419, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/06af2fff390576033b0f47727c334b91?s=128&d=identicon&r=PG&f=1", "display_name": "uesports135", "link": "https://stackoverflow.com/users/2686419/uesports135"}, "edited": false, "score": 1, "creation_date": 1536524352, "post_id": 36521309, "comment_id": 91444568, "body": "Idk how Michael found this but there&#39;s some references to the issue <a href=\"https://jira.spring.io/browse/SPR-16297\" rel=\"nofollow noreferrer\">jira.spring.io/browse/SPR-16297</a> and <a href=\"https://github.com/spring-projects/spring-boot/issues/11343#issuecomment-351430911\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/&hellip;</a>"}, {"owner": {"reputation": 365, "user_id": 7568890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4382278535a5c74ac4e4d05c22d2d62c?s=128&d=identicon&r=PG&f=1", "display_name": "AloDev", "link": "https://stackoverflow.com/users/7568890/alodev"}, "edited": false, "score": 1, "creation_date": 1536756303, "post_id": 36521309, "comment_id": 91538583, "body": "Finally, I have found this solution. I&#39;d tried so many solutions but only this works! Thank you!"}, {"owner": {"reputation": 145, "user_id": 2421688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fca1c18e1935b1fc741d340e6033f432?s=128&d=identicon&r=PG", "display_name": "Riddhish Ojha", "link": "https://stackoverflow.com/users/2421688/riddhish-ojha"}, "edited": false, "score": 1, "creation_date": 1549381008, "post_id": 36521309, "comment_id": 95877245, "body": "Thanks <a href=\"https://stackoverflow.com/users/170842/michael\">@Micheal</a> for this solution and description."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 96, "last_activity_date": 1460228380, "creation_date": 1460228380, "answer_id": 36521309, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/36521309#36521309", "title": "kotlin and @Valid Spring annotation", "body": "<p>Seems Spring needs these annotations to be applied to a field. But Kotlin will apply these annotations to the constructor parameter. Use <code>field:</code> specifier when applying an annotation to make it apply to a field. The following code should work fine for you.</p>\n\n<pre><code>class SomeInfo(\n    @field:NotNull\n    @field:Pattern(regexp = Constraints.EMAIL_REGEX)\n    var value: String\n) {\n    var id: Long? = null\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3494, "user_id": 1012689, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/86068c785381765448d41a37f7db85e6?s=128&d=identicon&r=PG", "display_name": "ttt", "link": "https://stackoverflow.com/users/1012689/ttt"}, "edited": false, "score": 0, "creation_date": 1516889710, "post_id": 43172824, "comment_id": 83881445, "body": "I tried it and didn&#39;t get it working. Do I need some extra configuration or it just works?"}, {"owner": {"reputation": 178, "user_id": 7802705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5LQYht72taE/AAAAAAAAAAI/AAAAAAAAABA/eas2d1Y6qGU/photo.jpg?sz=128", "display_name": "Andreas Sahlbach", "link": "https://stackoverflow.com/users/7802705/andreas-sahlbach"}, "reply_to_user": {"reputation": 3494, "user_id": 1012689, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/86068c785381765448d41a37f7db85e6?s=128&d=identicon&r=PG", "display_name": "ttt", "link": "https://stackoverflow.com/users/1012689/ttt"}, "edited": false, "score": 0, "creation_date": 1516960278, "post_id": 43172824, "comment_id": 83910717, "body": "No, should work out of the box. I am using it in a spring project, so I have the spring-kotlin package which essential modifies spring classes to be automatically &quot;open&quot; classes and &quot;open methods&quot; if they are spring annotated. That might be a site effect that kicks in."}], "tags": [], "owner": {"reputation": 178, "user_id": 7802705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5LQYht72taE/AAAAAAAAAAI/AAAAAAAAABA/eas2d1Y6qGU/photo.jpg?sz=128", "display_name": "Andreas Sahlbach", "link": "https://stackoverflow.com/users/7802705/andreas-sahlbach"}, "is_accepted": false, "score": 11, "last_activity_date": 1491162635, "creation_date": 1491162635, "answer_id": 43172824, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/43172824#43172824", "title": "kotlin and @Valid Spring annotation", "body": "<p>As an alternative to Michal's answer, annotating the getter also works.</p>\n\n<pre><code>class SomeInfo(\n    @get:NotNull\n    @get:Pattern(regexp = Constraints.EMAIL_REGEX)\n    var value: String\n) {\n    var id: Long? = null\n}\n</code></pre>\n\n<p>The annoying part is, that not using @get: or @field: will annotate the constructor parameter. This is still valid kotlin code (so you don't get an error). It's just useless in these use cases.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12415560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HYfpL.png?s=128&g=1", "display_name": "usr42", "link": "https://stackoverflow.com/users/12415560/usr42"}, "is_accepted": false, "score": 3, "last_activity_date": 1574511424, "last_edit_date": 1574511424, "creation_date": 1574422188, "answer_id": 58993385, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/58993385#58993385", "title": "kotlin and @Valid Spring annotation", "body": "<p>If you use IntelliJ to convert Java to Kotlin, the <code>@Valid</code> annotation in the Spring Controller method may eventually be attached to the type, instead of the variable. This would break the validation.</p>\n\n<p>For example, the convertion could result in</p>\n\n<pre><code>@PostMapping\npublic Id create(@RequestBody someInfo: @Valid SomeInfo) {\n    ...\n}\n</code></pre>\n\n<p>This is not validating. The <code>@Valid</code> has to be moved to a variable like this:</p>\n\n<pre><code>@PostMapping\npublic Id create(@RequestBody @Valid someInfo: SomeInfo) {\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 10983605, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i1fq1NFJOvI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPlZOGzUMSKnxdkRLmBorc0EcZk-g/mo/photo.jpg?sz=128", "display_name": "\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432 \u041b\u0438\u0441\u0442\u0440\u0430\u0442\u0435\u043d\u043a\u043e", "link": "https://stackoverflow.com/users/10983605/%d0%a1%d1%82%d0%b0%d0%bd%d0%b8%d1%81%d0%bb%d0%b0%d0%b2-%d0%9b%d0%b8%d1%81%d1%82%d1%80%d0%b0%d1%82%d0%b5%d0%bd%d0%ba%d0%be"}, "is_accepted": false, "score": 1, "last_activity_date": 1600769258, "creation_date": 1600769258, "answer_id": 64007510, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/64007510#64007510", "title": "kotlin and @Valid Spring annotation", "body": "<p>Also your rest controller should be marked by <code>@Validated</code> annotation</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 15460302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fba61c7b758a9e3b93d78e9772c76a7?s=128&d=identicon&r=PG&f=1", "display_name": "kimakunc", "link": "https://stackoverflow.com/users/15460302/kimakunc"}, "is_accepted": false, "score": 0, "last_activity_date": 1616498865, "creation_date": 1616498865, "answer_id": 66762239, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/66762239#66762239", "title": "kotlin and @Valid Spring annotation", "body": "<p>If you are validating email addresses you could also write it like so:</p>\n<pre><code>import javax.validation.constraints.Email\nimport javax.validation.constraints.Size\n\ndata class User(\n    val id: Long,\n    @field:Size(min = 2)\n    val firstName: String,\n    @field:Size(min = 2)\n    val lastName: String,\n    @field:Email\n    val email: String,\n   ..)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 2203760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KQLZQ.jpg?s=128&g=1", "display_name": "Zatara7", "link": "https://stackoverflow.com/users/2203760/zatara7"}, "is_accepted": false, "score": 0, "last_activity_date": 1617140703, "creation_date": 1617140703, "answer_id": 66878867, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation/66878867#66878867", "title": "kotlin and @Valid Spring annotation", "body": "<p>For function validation of primitives:</p>\n<pre><code>@Validated\nclass MyClass() {\n    fun myFun(@Valid @NotEmpty @Size(min = 3, max = 30) name: String) {\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1654, "user_id": 2138356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b5cfbdd95128b8feefe8c49299022af9?s=128&d=identicon&r=PG", "display_name": "fasth", "link": "https://stackoverflow.com/users/2138356/fasth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13579, "favorite_count": 9, "accepted_answer_id": 36521309, "answer_count": 6, "score": 39, "last_activity_date": 1617140703, "creation_date": 1460194750, "last_edit_date": 1460347714, "question_id": 36515094, "link": "https://stackoverflow.com/questions/36515094/kotlin-and-valid-spring-annotation", "title": "kotlin and @Valid Spring annotation", "body": "<p>I have an entity:</p>\n\n<pre><code>class SomeInfo(\n        @NotNull @Pattern(regexp = Constraints.EMAIL_REGEX) var value: String) {\n    var id: Long? = null\n}\n</code></pre>\n\n<p>And controller method:</p>\n\n<pre><code>@RequestMapping(value = \"/some-info\", method = RequestMethod.POST)\npublic Id create(@Valid @RequestBody SomeInfo someInfo) {\n       ...\n    }\n</code></pre>\n\n<p><code>@Valid</code> annotation doesn't work.</p>\n\n<p>It seems Spring needs a default parameterless constructor and fancy code above becomes in something ugly (but working) like this:</p>\n\n<pre><code>class SomeInfo() {\n\n    constructor(value: String) {\n            this.value = value\n        }\n\n        @NotNull @Pattern(regexp = Constraints.EMAIL_REGEX) \n        lateinit var value: String\n\n        var id: Long? = null\n    }\n</code></pre>\n\n<p>Any good practice to make it less wordy?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460171000, "post_id": 36512062, "comment_id": 60630822, "body": "Nice! If we call without the parenthesis, why does Kotlin allow that syntactically? Does it meant to achieve some other thing?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1460171667, "post_id": 36512062, "comment_id": 60630942, "body": "@Elye, in Kotlin, statements consisting of single expression can call getters of properties (<a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/properties.html</a>). But probably there might be a warning for definitely useless statements."}], "tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 4, "last_activity_date": 1460169436, "last_edit_date": 1495542251, "creation_date": 1460169051, "answer_id": 36512062, "question_id": 36512029, "link": "https://stackoverflow.com/questions/36512029/kotlin-function-parameters-sent-in-but-not-executed/36512062#36512062", "title": "Kotlin: function parameters sent in but not executed?", "body": "<p>You forgot to actually invoke your lambdas with <code>()</code>:</p>\n\n<pre><code>...\naction1()\nToast.makeText(ctx, \"hello-again1\", Toast.LENGTH_SHORT).show()\n...\n</code></pre>\n\n<p>For the additional information on why lambdas need to be invoked: cannot explain it better than @hotkey <a href=\"https://stackoverflow.com/a/36037443/4096987\">did</a>.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 36512062, "answer_count": 1, "score": 1, "last_activity_date": 1460169436, "creation_date": 1460168654, "question_id": 36512029, "link": "https://stackoverflow.com/questions/36512029/kotlin-function-parameters-sent-in-but-not-executed", "title": "Kotlin: function parameters sent in but not executed?", "body": "<p>I have the following code that pass in an Integer and two functions.</p>\n\n<pre><code>choseNavigation(childPos, {Toast.makeText(ctx, \"hello1\", Toast.LENGTH_SHORT).show()},\n                                {Toast.makeText(ctx, \"hello2\", Toast.LENGTH_SHORT).show()})\n</code></pre>\n\n<p>The function definition as below:</p>\n\n<pre><code>private fun choseNavigation(pos: Int, action1: () -&gt; Unit, action2: () -&gt; Unit) {\n    when(pos) {\n        0-&gt; {\n            action1\n            Toast.makeText(ctx, \"hello-again1\", Toast.LENGTH_SHORT).show()\n        }\n        1-&gt;{\n            action2\n            Toast.makeText(ctx, \"hello-again2\", Toast.LENGTH_SHORT).show()\n        }\n    }\n}\n</code></pre>\n\n<p>When my childPost is 0, I expect it to Toast <code>hello1</code> and <code>hello-again1</code>. And when it is 1, I expect it to Toast <code>hello2</code> and <code>hello-again2</code>.</p>\n\n<p>However, when I run the function, it only toast <code>hello-again1</code> or <code>hello-again2</code>. The sent in function is not being activated at all. Did I miss anything?</p>\n"}, {"tags": ["sorting", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1460154012, "post_id": 36507266, "comment_id": 60627062, "body": "The first solution with <code>toInt()</code> can be rewritten as <code>a.sortBy { it.toInt() }</code>."}, {"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1460226737, "post_id": 36507266, "comment_id": 60647012, "body": "@Michael I am slightly confused with implementing it (very new to kotlin) I added the kotlin port Now to call it I should use     Collections.sort(directions.sortWith(AlphanumComparator())  or something slightly different?"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1460226997, "post_id": 36507266, "comment_id": 60647104, "body": "@AnthonyTaylor You don&#39;t need <code>Collections.sort()</code>. Just call <code>directions.sortWith(AlphanumComparator())</code>."}, {"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1460227261, "post_id": 36507266, "comment_id": 60647221, "body": "I tried that buy I am getting errors during build  Error:(46, 24) Unresolved reference. None of the following candidates is applicable because of receiver type mismatch:  public fun &lt;T&gt; kotlin.Array&lt;out kotlin.String&gt;.sortWith(comparator: java.util.Comparator&lt;in kotlin.String&gt;): kotlin.Unit defined in kotlin.collections public fun &lt;T&gt; kotlin.Array&lt;out kotlin.String&gt;.sortWith(comparator: java.util.Comparator&lt;in kotlin.String&gt;, fromIndex: kotlin.Int = ..., toIndex: kotlin.Int = ...): kotlin.Unit defined in kotlin.collections public fun &lt;T&gt;"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1460227358, "post_id": 36507266, "comment_id": 60647256, "body": "@hotkey Thank you, that&#39;s a good point. However, your implementation is not exactly the same as mine as it does additional autoboxing of <code>Int</code> But your implementation looks much better. I&#39;ll add it to the answer."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1460227459, "post_id": 36507266, "comment_id": 60647293, "body": "@AnthonyTaylor What&#39;s the type of <code>directions</code>?"}, {"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "edited": false, "score": 0, "creation_date": 1460227566, "post_id": 36507266, "comment_id": 60647333, "body": "@Michael I do believe string off the top of my head <b>edit</b>    fun getDirectionsForRoute(routeId: Int) : Observable&lt;List&lt;Direction&gt;&gt;   fun getDirection(routeId: Int, directionId: Int) : Observable&lt;Direction&gt;   So int it seems (Im working off someone else&#39;s code, sorry for the lack of knowledge of it."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460227720, "post_id": 36507266, "comment_id": 60647394, "body": "Your list is immutable. In this case you can do the following: <code>val sortedDirections = directions.sortedWith(AlphanumComparator())</code>."}, {"owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "reply_to_user": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460227894, "post_id": 36507266, "comment_id": 60647468, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108719/discussion-between-anthony-taylor-and-michael\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 8, "last_activity_date": 1460227601, "last_edit_date": 1495539206, "creation_date": 1460141878, "answer_id": 36507266, "question_id": 36506899, "link": "https://stackoverflow.com/questions/36506899/sorting-strings-by-character-and-length/36507266#36507266", "title": "Sorting Strings by Character and Length", "body": "<p>If you need just a simple number comparison you can do it like that.</p>\n\n<pre><code>directions.sortWith(Comparator { lhs, rhs -&gt;\n  val i1 = lhs.toInt()\n  val i2 = rhs.toInt()\n  when {\n    i1 &lt; i2 -&gt; -1\n    i1 &gt; i2 -&gt; 1\n    else -&gt; 0\n  }\n})\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/users/2196460/hotkey\">hotkey</a> pointed out the code above can be replaced with almost identical implementation that looks much simplier.</p>\n\n<pre><code>directions.sortBy { it.toInt() }\n</code></pre>\n\n<p>The general version of this algorithm is called alphanum sorting and described in details <a href=\"http://www.davekoelle.com/alphanum.html\" rel=\"noreferrer\">here</a>. I made a Kotlin port of this algorithm, which you can use. It's more complicated than what you need, but it will solve your problem.</p>\n\n<pre><code>class AlphanumComparator : Comparator&lt;String&gt; {\n  override fun compare(s1: String, s2: String): Int {\n    var thisMarker = 0\n    var thatMarker = 0\n    val s1Length = s1.length\n    val s2Length = s2.length\n\n    while (thisMarker &lt; s1Length &amp;&amp; thatMarker &lt; s2Length) {\n      val thisChunk = getChunk(s1, s1Length, thisMarker)\n      thisMarker += thisChunk.length\n\n      val thatChunk = getChunk(s2, s2Length, thatMarker)\n      thatMarker += thatChunk.length\n\n      // If both chunks contain numeric characters, sort them numerically.\n      var result: Int\n      if (isDigit(thisChunk[0]) &amp;&amp; isDigit(thatChunk[0])) {\n        // Simple chunk comparison by length.\n        val thisChunkLength = thisChunk.length\n        result = thisChunkLength - thatChunk.length\n        // If equal, the first different number counts.\n        if (result == 0) {\n          for (i in 0..thisChunkLength - 1) {\n            result = thisChunk[i] - thatChunk[i]\n            if (result != 0) {\n              return result\n            }\n          }\n        }\n      } else {\n        result = thisChunk.compareTo(thatChunk)\n      }\n\n      if (result != 0) {\n        return result\n      }\n    }\n\n    return s1Length - s2Length\n  }\n\n  private fun getChunk(string: String, length: Int, marker: Int): String {\n    var current = marker\n    val chunk = StringBuilder()\n    var c = string[current]\n    chunk.append(c)\n    current++\n    if (isDigit(c)) {\n      while (current &lt; length) {\n        c = string[current]\n        if (!isDigit(c)) {\n          break\n        }\n        chunk.append(c)\n        current++\n      }\n    } else {\n      while (current &lt; length) {\n        c = string[current]\n        if (isDigit(c)) {\n          break\n        }\n        chunk.append(c)\n        current++\n      }\n    }\n    return chunk.toString()\n  }\n\n  private fun isDigit(ch: Char): Boolean {\n    return '0' &lt;= ch &amp;&amp; ch &lt;= '9'\n  }\n}\n</code></pre>\n\n<p>To use this <code>Comparator</code> just call</p>\n\n<pre><code>directions.sortWith(AlphanumComparator())\n</code></pre>\n\n<p>If you don't need it to be coded in Kotlin you can just take an original Java version on <a href=\"http://www.davekoelle.com/files/AlphanumComparator.java\" rel=\"noreferrer\">Dave Koelle's page</a>. And the Kotlin version of the algorithm can be also found on <a href=\"https://gist.github.com/MichaelRocks/1b94bb44c7804e999dbf31dac86955ec\" rel=\"noreferrer\">GitHub</a>.</p>\n"}], "owner": {"reputation": 2320, "user_id": 1770210, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/736bfbf12db08b5e24b4bbc7b8bd40fd?s=128&d=identicon&r=PG", "display_name": "Anthony Taylor", "link": "https://stackoverflow.com/users/1770210/anthony-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4304, "favorite_count": 0, "accepted_answer_id": 36507266, "answer_count": 1, "score": 8, "last_activity_date": 1460227601, "creation_date": 1460140638, "last_edit_date": 1460142384, "question_id": 36506899, "link": "https://stackoverflow.com/questions/36506899/sorting-strings-by-character-and-length", "title": "Sorting Strings by Character and Length", "body": "<p>In my Android app, I am trying to sort Bus route tags in order 1, 2, 3..etc.</p>\n\n<p>For that I am using this</p>\n\n<pre><code>Collections.sort(directions, Comparator { lhs, rhs -&gt;\n        var obj1 = lhs.short_names.firstOrNull() ?: \"\"\n        var obj2 = rhs.short_names.firstOrNull() ?: \"\"\n\n        if (obj1 === obj2) {\n            obj1 = lhs.headsigns.firstOrNull() ?: \"\"\n            obj2 = rhs.headsigns.firstOrNull() ?: \"\"\n            if (obj1 === obj2) {\n                return@Comparator 0\n            }\n            obj1.compareTo(obj2)\n        } else {\n            obj1.compareTo(obj2)\n        }\n</code></pre>\n\n<p>The issue I am having is this sorts them, but will run into the issue of\n1, 2, 3, 30, 31, 4, 5</p>\n\n<p>How should I change this to get the correct ordering. </p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 29, "user_id": 13019972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iAgxt.jpg?s=128&g=1", "display_name": "Mehmet Agah Balbay", "link": "https://stackoverflow.com/users/13019972/mehmet-agah-balbay"}, "edited": false, "score": 0, "creation_date": 1584978071, "post_id": 36506155, "comment_id": 107600944, "body": "You can look question this answer Referance : <a href=\"https://stackoverflow.com/questions/26422860/android-studio-library-error-package-does-not-exist/60816713#60816713\" title=\"android studio library error package does not exist\">stackoverflow.com/questions/26422860/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1820, "user_id": 1898043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39b7f648c5ed9fcaef55d99df97fd36?s=128&d=identicon&r=PG", "display_name": "Nahuel Barrios", "link": "https://stackoverflow.com/users/1898043/nahuel-barrios"}, "edited": false, "score": 0, "creation_date": 1563044999, "post_id": 36506382, "comment_id": 100574525, "body": "For others with the same error, note that if your library is a pure Java library then they have to use <code>apply plugin: &#39;kotlin&#39;</code> instead"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1591184374, "post_id": 36506382, "comment_id": 109957399, "body": "If you use Gradle Kotlin DSL, you have to add <code>kotlin(&quot;android&quot;)</code> to your <code>plugins {}</code>"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 14, "last_activity_date": 1460138679, "creation_date": 1460138679, "answer_id": 36506382, "question_id": 36506155, "link": "https://stackoverflow.com/questions/36506155/cant-call-kotlin-module-from-java-module/36506382#36506382", "title": "can&#39;t call kotlin module from java module", "body": "<p>A few things:</p>\n\n<ol>\n<li><p>Apply the kotlin-android plugin to your library module build.gradle (<a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"noreferrer\">see the docs</a>):</p>\n\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n\n<p>As it stands now, you're not even telling gradle to compile Kotlin files.</p></li>\n<li><p>Your buildscript block should probably be at the top-level build.gradle rather than the module build.gradle.</p></li>\n<li><p>Consider updating the fully released version of Kotlin 1.0.1-2</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2133, "user_id": 7436566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VxBgdn2E0Qk/AAAAAAAAAAI/AAAAAAAAAIg/H8mCkOR8q_k/photo.jpg?sz=128", "display_name": "OhhhThatVarun", "link": "https://stackoverflow.com/users/7436566/ohhhthatvarun"}, "is_accepted": false, "score": 0, "last_activity_date": 1616566967, "creation_date": 1616566967, "answer_id": 66775725, "question_id": 36506155, "link": "https://stackoverflow.com/questions/36506155/cant-call-kotlin-module-from-java-module/66775725#66775725", "title": "can&#39;t call kotlin module from java module", "body": "<p>For that, you need to add</p>\n<pre><code>buildscript {\next.kotlin_version = '1.4.30' &lt;-- This line\n    repositories {\n        google()\n        jcenter()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot; &lt;-- This line\n    }\n}\n</code></pre>\n<p>In the gradle.build (project)</p>\n<p>and then add the</p>\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n<p>In the gradle.build (App)</p>\n"}], "owner": {"reputation": 537, "user_id": 5207721, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/686783f7f5ad8284b8c1491775db498c?s=128&d=identicon&r=PG&f=1", "display_name": "gesuwall", "link": "https://stackoverflow.com/users/5207721/gesuwall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8531, "favorite_count": 1, "accepted_answer_id": 36506382, "answer_count": 2, "score": 7, "last_activity_date": 1616566967, "creation_date": 1460137830, "question_id": 36506155, "link": "https://stackoverflow.com/questions/36506155/cant-call-kotlin-module-from-java-module", "title": "can&#39;t call kotlin module from java module", "body": "<p>I want to have an android app in java, but one library module in kotlin. However when I try to run the app in my phone, there's an error saying that it can't find my Kotlin class. This is my kotlin class:</p>\n\n<pre><code>    package com.example.mylibrary\n\n    import android.util.Log\n\n    class A {\n        fun helloWorld(){\n            Log.d(\"Kotlin\", \"Hello World!\")\n        }\n    }\n</code></pre>\n\n<p>and gradle file for my kotlin module:</p>\n\n<pre><code>apply plugin: 'com.android.library'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.1\"\n\n    defaultConfig {\n        minSdkVersion 11\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.2.1'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\nbuildscript {\n    ext.kotlin_version = '0.6.+'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n\n<p>Here's my main activity:</p>\n\n<pre><code>package com.example.uisample;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\n\nimport com.example.mylibrary.A;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        A obj = new A();\n        obj.helloWorld();\n\n    }\n\n}\n</code></pre>\n\n<p>Notice how android studio imports <code>com.example.mylibrary.A</code> instead of <code>com.example.mylibrar.Akt</code> as the reference says. Android studio reports no errors before compiling.</p>\n\n<p>Gradle file for app:</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"23.0.1\"\n\n    defaultConfig {\n        applicationId \"com.example.uisample\"\n        minSdkVersion 11\n        targetSdkVersion 23\n        versionCode 1\n        versionName \"1.0\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:23.2.1'\n    compile project(':mylibrary')\n}\n</code></pre>\n\n<p>After running the project, gradle throws this error: \"cannot find symbol class A\". What am I doing wrong?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "reply_to_user": {"reputation": 3, "user_id": 4000228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f32a7739f63579ca22bc7d17063e167?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Olson", "link": "https://stackoverflow.com/users/4000228/andrew-olson"}, "edited": false, "score": 1, "creation_date": 1595947925, "post_id": 36502482, "comment_id": 111646921, "body": "@AndrewOlson: Please don&#39;t add large comments like this that add significantly to the meaning in a post. (Summarising comments for example is fine, but just adding a load of stuff that wasn&#39;t previously mentioned isn&#39;t good.) I was surprised the edit was accepted at all, to be honest. It would have been better to add a comment indicating what else you&#39;d like to see in the answer."}], "tags": [], "owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "is_accepted": true, "score": 58, "last_activity_date": 1595947825, "last_edit_date": 1595947825, "creation_date": 1460126410, "answer_id": 36502482, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin/36502482#36502482", "title": "Extension fields in Kotlin", "body": "<p>No - the <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"noreferrer\">documentation</a> explains this:</p>\n<blockquote>\n<p>Extensions do not actually modify classes they extend. By defining an extension, you do not insert new members into a class, but merely make new functions callable with the dot-notation on instances of this class.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>Note that, since extensions do not actually insert members into classes, there\u2019s no efficient way for an extension property to have a backing field. This is why initializers are not allowed for extension properties. Their behavior can only be defined by explicitly providing getters/setters.</p>\n</blockquote>\n<p>Thinking about extension functions/properties as just syntactic sugar for calling a static function and passing in a value hopefully makes this clear.</p>\n<p>However, if you <em>really, really</em> want to do something like this...</p>\n<p>As stated above regarding efficiency, an additional backing field added directly to the class is the best way to store data non-derivable from existing non-private members from the class. However, if you don't control the implementation of the class and are dead-set on creating a new property that can store new data, it <em>can</em> be done in a way that is not abysmally <em>inefficient</em> by using separate external tables.  Use a separate map that keys on object instances of this class with values that map directly to the value you want to add then define an extension getter and/or setter for this property which uses your external table to store the data associated with each instance.</p>\n<pre><code>val externalMap = mutableMapOf&lt;ExistingClass, Int&gt;()\n\nvar ExistingClass.newExtensionProperty : Int\n    get() = externalMap[this] ?: 0\n    set(value:Int) { externalMap[this] = value }\n</code></pre>\n<p>The additional map lookups will cost you - and you need to consider memory leaks, or using appropriately GC-aware types, but it does work.</p>\n"}, {"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 54, "last_activity_date": 1460126660, "creation_date": 1460126660, "answer_id": 36502562, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin/36502562#36502562", "title": "Extension fields in Kotlin", "body": "<p>You can create an extension property with overridden getter and setter:</p>\n\n<pre><code>var A.someProperty: Int\n  get() = /* return something */\n  set(value) { /* do something */ }\n</code></pre>\n\n<p>But you cannot create an extension property with a backing field because you cannot add a field to an existing class.</p>\n"}, {"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 11, "last_activity_date": 1460126767, "creation_date": 1460126767, "answer_id": 36502605, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin/36502605#36502605", "title": "Extension fields in Kotlin", "body": "<p>You can't add a field, but you can add a property, that delegates to other properties/methods of the object to implement its accessor(s). For example suppose you want to add a <code>secondsSinceEpoch</code> property to the <code>java.util.Date</code> class, you can write</p>\n\n<pre><code>var Date.secondsSinceEpoch: Long \n    get() = this.time / 1000\n    set(value) {\n        this.time = value * 1000\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 776, "user_id": 2092892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaaacf8c315659ade024b24a537b13bb?s=128&d=identicon&r=PG&f=1", "display_name": "MadDeveloper", "link": "https://stackoverflow.com/users/2092892/maddeveloper"}, "edited": false, "score": 0, "creation_date": 1504428840, "post_id": 36511438, "comment_id": 79002930, "body": "this is a very nice creative hack. You could add a licence file to the github. Thanks!"}, {"owner": {"reputation": 8351, "user_id": 1817031, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/MnimI.png?s=128&g=1", "display_name": "Steve M", "link": "https://stackoverflow.com/users/1817031/steve-m"}, "edited": false, "score": 0, "creation_date": 1588714584, "post_id": 36511438, "comment_id": 109004957, "body": "What&#39;s a <code>WeakIdentityHashMap</code>?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1588765514, "post_id": 36511438, "comment_id": 109022947, "body": "This is an implementaiton of an object-to-value mapping that uses the identity, not <code>equals()</code>/<code>hashCode()</code>, and does not prevent an object from being deleted when it is no more reachable through other references. There&#39;s no more built-in implementation of such a mapping. The link to a third-party implementation that I posted seems to be broken now. Here&#39;s another link: <a href=\"https://github.com/archnetltd/castafioreframework/blob/master/casta-dependencies/src/hibernate-source/org/hibernate/search/util/WeakIdentityHashMap.java\" rel=\"nofollow noreferrer\">github.com/archnetltd/castafioreframework/blob/master/&hellip;</a>"}, {"owner": {"reputation": 5388, "user_id": 4466472, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dVZL1m5gSbk/AAAAAAAAAAI/AAAAAAAAAo4/d9rgwRgqTFk/photo.jpg?sz=128", "display_name": "Stoycho Andreev", "link": "https://stackoverflow.com/users/4466472/stoycho-andreev"}, "edited": false, "score": 0, "creation_date": 1612463209, "post_id": 36511438, "comment_id": 116781764, "body": "Brilliant for testing purposes +1"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 23, "last_activity_date": 1482229393, "last_edit_date": 1495541433, "creation_date": 1460162414, "answer_id": 36511438, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin/36511438#36511438", "title": "Extension fields in Kotlin", "body": "<p>There's <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-properties\" rel=\"noreferrer\">no way to add extension properties with backing fields</a> to classes, because extensions <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"noreferrer\">do not actually modify a class</a>. </p>\n\n<p>You can only define an extension property with custom getter (and setter for <code>var</code>) or a <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"noreferrer\">delegated property</a>.\n<hr>\nHowever, if you need to define an extension property which <em>would behave as if it had</em> a backing field, delegated properties come in handy.\nThe idea is to create a property delegate that would store the <em>object-to-value</em> mapping:</p>\n\n<ul>\n<li><p>using the identity, not <code>equals()</code>/<code>hashCode()</code>, to actually store values for each object, like <code>IdentityHashMap</code> does;</p></li>\n<li><p>not preventing the <em>key</em> objects from being garbage collected (using <a href=\"https://stackoverflow.com/questions/299659/what-is-the-difference-between-a-soft-reference-and-a-weak-reference-in-java\">weak references</a>), like <code>WeakHashMap</code> does.</p></li>\n</ul>\n\n<p>Unfortunately, there is no <code>WeakIdentityHashMap</code> in JDK, so you have to implement your own (or take a <a href=\"http://www.grepcode.com/file_/repository.jboss.org/nexus/content/repositories/releases/org.hibernate/hibernate-search/3.3.0.CR2/org/hibernate/search/util/WeakIdentityHashMap.java/?v=source\" rel=\"noreferrer\">complete implementation</a>).</p>\n\n<p>Then, based on this mapping you can create a delegate class satisfying the <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#property-delegate-requirements\" rel=\"noreferrer\">property delegates requirements</a>. Here's an example non-thread-safe implementation:</p>\n\n<pre><code>class FieldProperty&lt;R, T : Any&gt;(\n    val initializer: (R) -&gt; T = { throw IllegalStateException(\"Not initialized.\") }\n) {    \n    private val map = WeakIdentityHashMap&lt;R, T&gt;()\n\n    operator fun getValue(thisRef: R, property: KProperty&lt;*&gt;): T =\n            map[thisRef] ?: setValue(thisRef, property, initializer(thisRef))\n\n    operator fun setValue(thisRef: R, property: KProperty&lt;*&gt;, value: T): T {\n        map[thisRef] = value\n        return value\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Usage example:</p>\n\n<pre><code>var Int.tag: String by FieldProperty { \"$it\" }\n\nfun main(args: Array&lt;String&gt;) {\n    val x = 0\n    println(x.tag) // 0\n\n    val z = 1\n    println(z.tag) // 1\n    x.tag = \"my tag\"\n    z.tag = x.tag\n    println(z.tag) // my tag\n}\n</code></pre>\n\n<p>When defined inside a class, the mapping can be stored independently for instances of the class or in a shared delegate object:</p>\n\n<pre><code>private val bATag = FieldProperty&lt;Int, String&gt; { \"$it\" }\n\nclass B() {\n    var A.someCounter: Int by FieldProperty { 0 } // independent for each instance of B\n    var A.tag: String by bATag // shared between the instances, but usable only inside B\n}\n</code></pre>\n\n<p>Also, please note that identity <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#representation\" rel=\"noreferrer\">is not guaranteed</a> for Java's primitive types due to boxing.</p>\n\n<p>And I suspect the performance of this solution to be significantly worse than that of regular fields, most probably close to normal <code>Map</code>, but that needs further testing.</p>\n\n<p>For nullable properties support and thread-safe implementation please refer to <a href=\"https://github.com/h0tk3y/kotlin-fun/blob/master/src/main/kotlin/com/github/h0tk3y/kotlinFun/FieldProperty.kt\" rel=\"noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2626, "user_id": 4495175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zycJD.jpg?s=128&g=1", "display_name": "Letfar", "link": "https://stackoverflow.com/users/4495175/letfar"}, "edited": false, "score": 0, "creation_date": 1594369604, "post_id": 62820943, "comment_id": 111107536, "body": "Now it&#39;s hard to believe that this question was asked at a time when no one even thought that Kotlin would become the official language for Android :)"}], "tags": [], "owner": {"reputation": 4174, "user_id": 925135, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/QSJJI.jpg?s=128&g=1", "display_name": "Renetik", "link": "https://stackoverflow.com/users/925135/renetik"}, "is_accepted": false, "score": 0, "last_activity_date": 1594317627, "creation_date": 1594317627, "answer_id": 62820943, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin/62820943#62820943", "title": "Extension fields in Kotlin", "body": "<p>If you are extending View you can do it quite easily like this...\nThis is example how I create some my custom class Event property in EditText class extension:</p>\n<p>Define id for key :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;item name=&quot;EditTextEventOnClearTagKey&quot; type=&quot;id&quot; /&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>Define one reusable extension like this:</p>\n<pre><code>fun &lt;T : Any&gt; View.tagProperty(@IdRes key: Int, onCreate: () -&gt; T): T {\n    @Suppress(&quot;UNCHECKED_CAST&quot;)\n    var value = getTag(key) as? T\n    if (value.isNull) {\n        value = onCreate()\n        setTag(key, value)\n    }\n    return value!!\n}\n</code></pre>\n<p>Use it in wherever View extension you need:</p>\n<pre><code>val EditText.eventClear get() = tagProperty(R.id.EditTextEventOnClearTagKey) { event&lt;Unit&gt;() }\n</code></pre>\n"}], "owner": {"reputation": 2626, "user_id": 4495175, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/zycJD.jpg?s=128&g=1", "display_name": "Letfar", "link": "https://stackoverflow.com/users/4495175/letfar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22518, "favorite_count": 7, "accepted_answer_id": 36502482, "answer_count": 5, "score": 55, "last_activity_date": 1595947825, "creation_date": 1460126256, "question_id": 36502413, "link": "https://stackoverflow.com/questions/36502413/extension-fields-in-kotlin", "title": "Extension fields in Kotlin", "body": "<p>It's easy to write extension methods in Kotlin:</p>\n\n<pre><code>class A { }\nclass B {\n    fun A.newFunction() { ... }\n}\n</code></pre>\n\n<p>But is there some way to create extension variable? Like:</p>\n\n<pre><code>class B {\n    var A.someCounter: Int = 0\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": false, "score": 1, "last_activity_date": 1463433474, "creation_date": 1463433474, "answer_id": 37263417, "question_id": 36496477, "link": "https://stackoverflow.com/questions/36496477/replacing-sam-constructor-with-lambda-with-covariant-type/37263417#37263417", "title": "Replacing SAM-constructor with lambda with covariant type", "body": "<p>It is a compiler bug. You can track it here: <a href=\"https://youtrack.jetbrains.com/issue/KT-12238\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-12238</a>.</p>\n"}], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1934, "favorite_count": 2, "answer_count": 1, "score": 9, "last_activity_date": 1463433474, "creation_date": 1460108797, "last_edit_date": 1460451903, "question_id": 36496477, "link": "https://stackoverflow.com/questions/36496477/replacing-sam-constructor-with-lambda-with-covariant-type", "title": "Replacing SAM-constructor with lambda with covariant type", "body": "<p>I have got the following Java interfaces:</p>\n\n<pre><code>interface Action1&lt;T&gt; {\n\n    void call(T t);\n}\n\ninterface Test&lt;T&gt; {\n\n    void test(Action1&lt;? super T&gt; action)\n}\n</code></pre>\n\n<p>And the following Kotlin class:</p>\n\n<pre><code>interface A {\n    fun go()\n}\n\nabstract class Main {\n\n    abstract fun a(): Test&lt;out A&gt;\n\n    fun main() {\n        a().test(Action1 { it.go() })\n        a().test { it.go() }\n    }\n}\n</code></pre>\n\n<p>Now in the function <code>main</code>, the first statement compiles, but IntelliJ gives a warning that the SAM-constructor can be replaced with a lambda.\nThis would result in the second statement.</p>\n\n<p>However, this second statement does not compile, because <code>it</code> has type <code>Any?</code>, not <code>A</code>. Removing the <code>out</code> modifier makes it compile again.</p>\n\n<p>Why does this happen?</p>\n\n<hr>\n\n<p>The use case of this is when the implementing class of <code>Main</code> needs to return <code>Test&lt;B&gt;</code> for the function <code>a()</code>, where <code>B</code> implements <code>A</code>:</p>\n\n<pre><code>class B : A {\n\n    override fun go() {\n        TODO()\n    }\n}\n\nclass MainImp : Main() {\n    override fun a(): Test&lt;out A&gt; {\n        val value: Test&lt;B&gt; = object : Test&lt;B&gt; {\n            override fun test(action: Action1&lt;in B&gt;?) {\n                TODO()\n            }\n        };\n\n        return value\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "android-gradle-plugin", "google-play-services", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1460083518, "post_id": 36490519, "comment_id": 60589757, "body": "You have <code>kapt</code> configuration setup correctly. You are using the latest dagger 2 and kotlin versions correctly. I do not think you should compile with JDK8 unless you are using the Jack compiler or retrolambda. Also, it looks like you are missing <code>provided &#39;org.glassfish:javax.annotation:10.0-b28&#39;</code>, see here <a href=\"https://github.com/damianpetla/kotlin-dagger-example/blob/master/app/build.gradle#L55\" rel=\"nofollow noreferrer\">github.com/damianpetla/kotlin-dagger-example/blob/master/app&zwnj;&#8203;/&hellip;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 7141, "user_id": 447934, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f5f97443bdc1acd60990006fb0c946a?s=128&d=identicon&r=PG", "display_name": "Josh Kovach", "link": "https://stackoverflow.com/users/447934/josh-kovach"}, "edited": false, "score": 0, "creation_date": 1460087587, "post_id": 36490676, "comment_id": 60590732, "body": "Downgraded to use JDK7, which did highlight an spot I missed since getting rid of retrolambda, but that didn&#39;t change anything. Added glassfish in just to test things out and that doesn&#39;t help either. As of Dagger 2.1, it&#39;s no longer required: <a href=\"https://github.com/google/dagger/commit/0488c9d339031eacaa8eda39e761930e4532c259\" rel=\"nofollow noreferrer\">github.com/google/dagger/commit/&hellip;</a>"}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "reply_to_user": {"reputation": 7141, "user_id": 447934, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f5f97443bdc1acd60990006fb0c946a?s=128&d=identicon&r=PG", "display_name": "Josh Kovach", "link": "https://stackoverflow.com/users/447934/josh-kovach"}, "edited": false, "score": 0, "creation_date": 1460087665, "post_id": 36490676, "comment_id": 60590754, "body": "I have this kotlin + dagger working in a project of mine. Can you push yours to github?"}, {"owner": {"reputation": 7141, "user_id": 447934, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f5f97443bdc1acd60990006fb0c946a?s=128&d=identicon&r=PG", "display_name": "Josh Kovach", "link": "https://stackoverflow.com/users/447934/josh-kovach"}, "edited": false, "score": 0, "creation_date": 1460087917, "post_id": 36490676, "comment_id": 60590800, "body": "Private repo, so I can&#39;t push it to you, sorry. The weird thing is it works for all the other modules, but only this one is broken."}], "tags": [], "owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "is_accepted": false, "score": 1, "last_activity_date": 1460083568, "last_edit_date": 1592644375, "creation_date": 1460083568, "answer_id": 36490676, "question_id": 36490519, "link": "https://stackoverflow.com/questions/36490519/dagger-skips-factory-generation-for-google-services-module-when-using-kapt/36490676#36490676", "title": "Dagger skips Factory generation for Google Services module when using kapt", "body": "<h1>Correct:</h1>\n<ul>\n<li>You have <code>kapt</code> configuration setup correctly</li>\n<li>You are using the latest Dagger 2 and Kotlin versions correctly.</li>\n</ul>\n<h1>Things to look at:</h1>\n<ul>\n<li>I do not think you should compile with JDK8 unless you are using the Jack compiler or Retrolambda.</li>\n<li>It looks like you are missing <code>provided 'org.glassfish:javax.annotation:10.0-b28'</code>, see here <a href=\"https://github.com/damianpetla/kotlin-dagger-example/blob/master/app/build.gradle#L55\" rel=\"nofollow noreferrer\">https://github.com/damianpetla/kotlin-dagger-example/blob/master/app/build.gradle#L55</a>.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1460234084, "post_id": 36500466, "comment_id": 60649574, "body": "Can you please post a code example to go a long with your question and mark this correct if this is the case?"}], "tags": [], "owner": {"reputation": 7141, "user_id": 447934, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f5f97443bdc1acd60990006fb0c946a?s=128&d=identicon&r=PG", "display_name": "Josh Kovach", "link": "https://stackoverflow.com/users/447934/josh-kovach"}, "is_accepted": true, "score": 0, "last_activity_date": 1460342712, "last_edit_date": 1460342712, "creation_date": 1460121015, "answer_id": 36500466, "question_id": 36490519, "link": "https://stackoverflow.com/questions/36490519/dagger-skips-factory-generation-for-google-services-module-when-using-kapt/36500466#36500466", "title": "Dagger skips Factory generation for Google Services module when using kapt", "body": "<p>I figured out the issue. After attempting to split out the different parts of the <code>GoogleApiModule</code> into different modules, a different module was getting skipped, so I looked into it and found that two different modules had methods named the same, but returning different types and accepting different arguments. Changing the names so they wouldn't clash fixed the issue.</p>\n\n<p>Edit:</p>\n\n<p>I had another module that provided an application Analytics Tracker that relied on the Google Analytics Tracker. The two different modules both had a method called <code>provideAnalyticsTracker</code>. They had different method signatures and return types, but kapt had a problem compiling it, despite not reporting any meaningful errors. Apt with Java could handle the naming collision.</p>\n"}], "owner": {"reputation": 7141, "user_id": 447934, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/0f5f97443bdc1acd60990006fb0c946a?s=128&d=identicon&r=PG", "display_name": "Josh Kovach", "link": "https://stackoverflow.com/users/447934/josh-kovach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 553, "favorite_count": 1, "accepted_answer_id": 36500466, "answer_count": 2, "score": 1, "last_activity_date": 1460342712, "creation_date": 1460082598, "question_id": 36490519, "link": "https://stackoverflow.com/questions/36490519/dagger-skips-factory-generation-for-google-services-module-when-using-kapt", "title": "Dagger skips Factory generation for Google Services module when using kapt", "body": "<p>I have an Android app that I've been converting to Kotlin, and I've run into a roadblock with Dagger when it comes to a particular module.</p>\n\n<p>In my project <code>build.gradle</code>, I have:</p>\n\n<pre><code>buildscript {\n  ext.kotlin_version = \"1.0.1-2\"\n\n  repositories {\n    jcenter()\n  }\n\n  dependencies {\n    classpath 'com.android.tools.build:gradle:2.1.0-alpha5'\n    classpath 'com.google.gms:google-services:2.0.0-rc3'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n  }\n}\n\nallprojects {\n  repositories {\n    jcenter()\n  }\n}\n\ntask clean(type: Delete) {\n  delete rootProject.buildDir\n}\n</code></pre>\n\n<p>And in <code>app/build.gradle</code>, I have the following relevant setup:</p>\n\n<pre><code>apply plugin: \"nebula.dependency-lock\"\napply plugin: \"com.android.application\"\napply plugin: 'kotlin-android'\napply plugin: \"kotlin-android-extensions\"\napply plugin: \"com.getkeepsafe.dexcount\"\n\n// ...\n\nandroid {\n  compileSdkVersion 23\n  buildToolsVersion '23.0.2'\n\n  // ...\n\n  defaultConfig {\n    applicationId \"com.myapp\"\n    minSdkVersion 16\n    targetSdkVersion 23\n    // ...\n  }\n\n  buildTypes {\n    debug {\n      applicationIdSuffix \".debug\"\n      // ...\n    }\n\n    release {\n      // ...\n    }\n  }\n\n  compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n  }\n\n  sourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n    debug.java.srcDirs += 'src/debug/kotlin'\n    release.java.srcDirs += 'src/release/kotlin'\n    androidTest.java.srcDirs += 'src/androidTest/kotlin'\n    test.java.srcDirs += 'src/test/kotlin'\n  }\n}\n\nkapt {\n  generateStubs = true\n}\n\ndependencies {\n  compile fileTree(include: [\"*.jar\"], dir: \"libs\")\n\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n  compile \"com.google.android.gms:play-services-gcm:$playServicesVersion\"\n  compile \"com.google.android.gms:play-services-analytics:$playServicesVersion\"\n\n  compile \"com.google.dagger:dagger:$daggerVersion\"\n  kapt \"com.google.dagger:dagger-compiler:$daggerVersion\"\n}\n\nbuildscript {\n  ext.daggerVersion = \"2.2\"\n  ext.playServicesVersion = \"8.4.0\"\n\n  dependencies {\n    classpath 'com.netflix.nebula:gradle-dependency-lock-plugin:4.2.0'\n    classpath 'com.getkeepsafe.dexcount:dexcount-gradle-plugin:0.4.4'\n    classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n  }\n\n  repositories {\n    mavenCentral()\n  }\n}\n\nrepositories {\n  mavenCentral()\n  jcenter()\n  maven { url \"https://oss.sonatype.org/content/repositories/snapshots\" }\n}\n\napply plugin: \"com.google.gms.google-services\"\n</code></pre>\n\n<p>I have an application component:</p>\n\n<pre><code>@Singleton\n@Component(\n        modules = arrayOf(\n                DebugApplicationModule::class,\n                DataModule::class,\n                DebugApiModule::class,\n                GoogleApiModule::class,\n                DebugSystemServicesModule::class\n        )\n)\ninterface ApplicationComponent : DebugApplicationGraph\n</code></pre>\n\n<p>And the <code>GoogleApiModule</code>:</p>\n\n<pre><code>@Module\n@Singleton\nclass GoogleApiModule {\n    @Provides\n    @Singleton\n    fun provideGoogleApiAvailability(): GoogleApiAvailability {\n        return GoogleApiAvailability.getInstance()\n    }\n\n    @Provides\n    @Singleton\n    fun provideGcmRegistrationManager(\n            context: Context,\n            preferences: AppPreferences,\n            googleApiAvailability: GoogleApiAvailability,\n            apiService: ApiService): GCMRegistrationManager {\n\n        return GCMRegistrationManager(context, preferences, googleApiAvailability, apiService)\n    }\n\n    @Provides\n    @Singleton\n    fun provideGoogleAnalytics(context: Context): GoogleAnalytics {\n        val analytics = GoogleAnalytics.getInstance(context)\n        analytics.setDryRun(BuildConfig.DEBUG)\n        return analytics\n    }\n\n    @Provides\n    @Singleton\n    fun provideAnalyticsTracker(analytics: GoogleAnalytics): Tracker {\n        val tracker = analytics.newTracker(BuildConfig.GOOGLE_ANALYTICS_TRACKING_ID)\n        tracker.enableExceptionReporting(true)\n        tracker.enableAutoActivityTracking(true)\n        return tracker\n    }\n}\n</code></pre>\n\n<p>When I build the application, I get the following errors coming from the generated `DaggerApplicationComponent, saying it can't find the symbols for these classes:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nk1H7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nk1H7.png\" alt=\"DaggerApplicationComponent\"></a></p>\n\n<p>There don't appear to be any other errors in any of my other modules (there are plenty), and all the other modules in <code>main</code> for that component appear to work as well.</p>\n\n<p>What I don't understand is what would be causing this to fail building the factories for this module, but not others, and why it's failing so silently. Same structure builds fine in the Java version of the application.</p>\n\n<p>I've tried using <code>provided</code> instead of <code>kapt</code> for <code>dagger-compiler</code>, but that seems to skip dagger compilation entirely.</p>\n\n<p>I've tried any number of configuration changes to get this working but I always get the same results.</p>\n\n<p>Sometimes, but not always, I'll also get this message printed before the errors:</p>\n\n<pre><code>Note: Generating a MembersInjector for com.myapp.services.GCMMessageListenerService. \nPrefer to run the dagger processor over that class instead.\n</code></pre>\n\n<p>I'm not sure what that means, and I'm not sure if it's related to the missing compilations, nor do I know how to fix it if it was.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 4, "creation_date": 1460079875, "post_id": 36489883, "comment_id": 60588907, "body": "This is definitely a bug, could you please file an issue at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>?"}, {"owner": {"reputation": 185, "user_id": 5161091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SUrUkZd7Blo/AAAAAAAAAAI/AAAAAAAADkQ/Kccc3I9abS8/photo.jpg?sz=128", "display_name": "tatsuyuki", "link": "https://stackoverflow.com/users/5161091/tatsuyuki"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 2, "creation_date": 1460194197, "post_id": 36489883, "comment_id": 60635670, "body": "I post issue at <a href=\"https://youtrack.jetbrains.com/issue/KT-11846\" rel=\"nofollow noreferrer\">KT-11846</a>"}], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 7221823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3757b5f6ae7d3fb325066fcf8e2df3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Melnyk", "link": "https://stackoverflow.com/users/7221823/yevhenii-melnyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1486057525, "creation_date": 1486057525, "answer_id": 42008954, "question_id": 36489883, "link": "https://stackoverflow.com/questions/36489883/inner-class-create-fail-in-kotlin/42008954#42008954", "title": "Inner class create fail in Kotlin", "body": "<p>The example provided refers to <a href=\"https://youtrack.jetbrains.com/issue/KT-11833\" rel=\"nofollow noreferrer\">KT-11833</a> and now compiles. Checked it with Kotlin version 1.1.0-beta-22.</p>\n"}], "owner": {"reputation": 185, "user_id": 5161091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SUrUkZd7Blo/AAAAAAAAAAI/AAAAAAAADkQ/Kccc3I9abS8/photo.jpg?sz=128", "display_name": "tatsuyuki", "link": "https://stackoverflow.com/users/5161091/tatsuyuki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1486057525, "creation_date": 1460077974, "last_edit_date": 1460080311, "question_id": 36489883, "link": "https://stackoverflow.com/questions/36489883/inner-class-create-fail-in-kotlin", "title": "Inner class create fail in Kotlin", "body": "<p>This code sample cannot be compiled and shows an internal error.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>open class TestClass {\n    open inner class Back {\n        open fun dd() { }\n    }\n}\n\nclass Manager: TestClass() {\n    private val test = object : Back() {\n        override fun dd() { }\n    }\n}\n</code></pre>\n\n<p>Cause: </p>\n\n<blockquote>\n  <p>Error generating constructors of class null with kind IMPLEMENTATION</p>\n</blockquote>\n\n<p>What does it mean?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1460057844, "post_id": 36481337, "comment_id": 60580581, "body": "I&#39;m confused as to why you would want this. A correctly implemented <code>equals</code> method would always return <code>false</code> for a companion object except for when compared with itself (which is the default/inherited behavior)."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 4, "last_activity_date": 1460080802, "last_edit_date": 1495540933, "creation_date": 1460078606, "answer_id": 36489970, "question_id": 36481337, "link": "https://stackoverflow.com/questions/36481337/equals-overloading-in-kotlin/36489970#36489970", "title": "Equals overloading in Kotlin", "body": "<p>Defining <code>equals</code> and <code>hashCode</code> is considered somewhat useless on <code>object</code> declarations that have no explicit supertype, according to <a href=\"https://youtrack.jetbrains.com/issue/KT-9778\" rel=\"nofollow noreferrer\">this issue</a>. Probably correct <code>equals</code>+<code>hashCode</code> implementations on <code>object</code>s have few use cases.</p>\n\n<p>There's even an IDE inspection that shows a warning when you try to do so:</p>\n\n<p><a href=\"https://i.stack.imgur.com/d7gYE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d7gYE.png\" alt=\"IDE warning screenshot\"></a>\n<sup><br>The warning is not there when the object has a declared supertype.</sup></p>\n\n<p>However, I don't think that some technical reason stops Kotlin from resolving the overloaded operator, and the whole behaviour is strange, so I filed <a href=\"https://youtrack.jetbrains.com/issue/KT-11827\" rel=\"nofollow noreferrer\">an issue</a> in Kotlin issue tracker.</p>\n\n<p>As for now (Kotlin 1.0.2 EAP), even with declared supertype you can only check <code>object</code>'s equality with instances of <em>exactly the same <strong>declared</strong> type</em> which it has as a supertype:</p>\n\n<pre><code>object SomeObject : List&lt;Int&gt; by listOf() { ... }\nSomeObject == listOf(1, 2, 3) // OK\nSomeObject == arrayListOf(1, 2, 3) // not resolved (why?)\n\nobject MyObject : Any() { ... }\nMyObject == 1 // error\nMyObject == 1 as Any // OK o_O\n\nobject AnotherObject { ... }\nAnotherObject == 1 as Any // works! Probably Any is supertype here\n</code></pre>\n\n<p>As to defining <code>equals</code> as an extension function: no, you can't do it because <strong><a href=\"https://kotlinlang.org/docs/reference/extensions.html#extensions-are-resolved-statically\" rel=\"nofollow noreferrer\">extensions are resolved statically</a></strong> and are shadowed by members (there's a similar <a href=\"https://stackoverflow.com/questions/35970957/how-to-extend-a-dataclass-with-tostring\">question about <code>toString</code></a>).</p>\n"}, {"tags": [], "owner": {"reputation": 987, "user_id": 1136074, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c07my.jpg?s=128&g=1", "display_name": "gor", "link": "https://stackoverflow.com/users/1136074/gor"}, "is_accepted": false, "score": 0, "last_activity_date": 1578294482, "last_edit_date": 1578294482, "creation_date": 1578294176, "answer_id": 59607952, "question_id": 36481337, "link": "https://stackoverflow.com/questions/36481337/equals-overloading-in-kotlin/59607952#59607952", "title": "Equals overloading in Kotlin", "body": "<p>i think your implementation is the right approach </p>\n\n<p>consider this:</p>\n\n<pre><code>class MyClass {\n    companion object {\n         private val NUMBER: Int = 5\n         private val STRING: String = \"foo\"\n\n         override fun equals(other: Any?): Boolean {\n                  when(other){\n                     is MyClass -&gt; {\n                        return this.NUMBER == other.NUMBER &amp;&amp;\n                               this.STRING == other.STRING\n                      }\n                     else -&gt; return false\n                 }\n      }\n}\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 2459628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP8TV.jpg?s=128&g=1", "display_name": "IvBaranov", "link": "https://stackoverflow.com/users/2459628/ivbaranov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5196, "favorite_count": 1, "accepted_answer_id": 36489970, "answer_count": 2, "score": 9, "last_activity_date": 1578294482, "creation_date": 1460044412, "last_edit_date": 1460045736, "question_id": 36481337, "link": "https://stackoverflow.com/questions/36481337/equals-overloading-in-kotlin", "title": "Equals overloading in Kotlin", "body": "<p>I was trying to overload <code>compareTo</code> and <code>equals</code> operators for my class.</p>\n\n<p>There is no problem with compare operator. It works well both as member and as an extension function.</p>\n\n<p>The equals operator must be a member and override equals fun.</p>\n\n<pre><code>class MyClass {\n    companion object {\n        private val NUMBER: Int = 5\n\n        operator fun compareTo(value: Int) = NUMBER - value\n\n        override operator fun equals(other: Any?) =\n                when (other) {\n                    is Int -&gt; NUMBER == other\n                    else -&gt; throw Exception(\"\")\n                }\n    }\n}\n\nfun test() {\n    if (MyClass &lt; 10) {\n        //ok\n    }\n\n    //Operator '==' cannot be applied to 'MyClass.companion' and kotlin.Int\n    if (MyClass == 5) {\n    }\n}\n</code></pre>\n\n<p><strong>Edit:</strong> How to overload '==' properly?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 1, "creation_date": 1460033651, "post_id": 36476691, "comment_id": 60563628, "body": "Aren&#39;t you concerned about it being a cyclical reference or something?"}, {"owner": {"reputation": 327, "user_id": 770835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/5wDtg.jpg?s=128&g=1", "display_name": "GeneralOfTheFelixLegions", "link": "https://stackoverflow.com/users/770835/generalofthefelixlegions"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1460033881, "post_id": 36476691, "comment_id": 60563845, "body": "Should I be? The idea behind it that this Runnable should be executed each 5s. Or am I missing something very obvious?!"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 21, "last_activity_date": 1460040955, "last_edit_date": 1495541422, "creation_date": 1460035009, "answer_id": 36477398, "question_id": 36476691, "link": "https://stackoverflow.com/questions/36476691/variable-runnable-must-be-initialized/36477398#36477398", "title": "Variable &#39;runnable&#39; must be initialized", "body": "<p>Kotlin considers a property uninitialized until the end of its initializer, therefore it cannot be used inside its own initializer, even in lambdas. This semantics is similar to the limitation of <a href=\"https://stackoverflow.com/questions/35049850/unresolved-reference-inside-anonymous-kotlin-listener/35050722#35050722\">local variable usage inside its initializer</a>. </p>\n\n<p>There are several workarounds:</p>\n\n<ul>\n<li><p>Use <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"noreferrer\">object expression</a> which lets you reference <code>this</code> of the declared object:</p>\n\n<pre><code>private var runnable: Runnable = object : Runnable {\n    override fun run() {\n        /* Do something very important */\n        handler.postDelayed(this, 5000)\n    }\n}\n</code></pre>\n\n<p>This works well only for interfaces as a replacement for lambdas and is not very pretty altogether.</p></li>\n<li><p>Use <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\"><code>lateinit var</code></a> or a <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"noreferrer\">delegated property</a> with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/not-null.html\" rel=\"noreferrer\"><code>Delegates.notNull()</code></a>:</p>\n\n<pre><code>private lateinit var runnable: Runnable\ninit {\n    runnable = Runnable { \n        /* Do something very important */\n        handler.postDelayed(runnable, 5000)\n    }\n}\n</code></pre>\n\n<p>The same initializer will work with this declaration:</p>\n\n<pre><code>private var runnable: Runnable by Delegates.notNull()\n</code></pre></li>\n<li><p>Implement and use <a href=\"https://stackoverflow.com/questions/35100389/writing-a-kotlin-util-function-which-provides-self-reference-in-initializer\">self-reference for initializers</a> on your own:</p>\n\n<pre><code>class SelfReference&lt;T&gt;(val initializer: SelfReference&lt;T&gt;.() -&gt; T) {\n    val self: T by lazy {\n        inner ?: throw IllegalStateException(\"Do not use `self` until initialized.\")\n    }\n\n    private val inner = initializer()\n}\n\nfun &lt;T&gt; selfReference(initializer: SelfReference&lt;T&gt;.() -&gt; T): T {\n    return SelfReference(initializer).self\n}\n</code></pre>\n\n<p>And then you can write something like</p>\n\n<pre><code>private var runnable: Runnable = selfReference { \n    Runnable {\n        /* Do something very important */\n        handler.postDelayed(self, 5000)\n    } \n}\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 2037482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba816c4b8fc9b4cdd6887a395503d37b?s=128&d=identicon&r=PG", "display_name": "Jan Heinrich Reimer", "link": "https://stackoverflow.com/users/2037482/jan-heinrich-reimer"}, "edited": false, "score": 0, "creation_date": 1506714341, "post_id": 42457613, "comment_id": 79946424, "body": "Instead of a function you could also use a read-only property: <code>private val runnableCopy get() = runnable</code>"}], "tags": [], "owner": {"reputation": 416, "user_id": 7051875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa1d447e29cc41ce81809d7156c05de5?s=128&d=identicon&r=PG&f=1", "display_name": "tango24", "link": "https://stackoverflow.com/users/7051875/tango24"}, "is_accepted": false, "score": 2, "last_activity_date": 1488034725, "creation_date": 1488034725, "answer_id": 42457613, "question_id": 36476691, "link": "https://stackoverflow.com/questions/36476691/variable-runnable-must-be-initialized/42457613#42457613", "title": "Variable &#39;runnable&#39; must be initialized", "body": "<p>You can also use </p>\n\n<pre><code>private var runnable: Runnable = Runnable {\n    /* Do something very important */\n    handler.postDelayed(runnable(), 5000)\n}\n\nprivate fun runnable() = runnable\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 770835, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/5wDtg.jpg?s=128&g=1", "display_name": "GeneralOfTheFelixLegions", "link": "https://stackoverflow.com/users/770835/generalofthefelixlegions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5117, "favorite_count": 3, "accepted_answer_id": 36477398, "answer_count": 2, "score": 17, "last_activity_date": 1488034725, "creation_date": 1460033300, "last_edit_date": 1460034082, "question_id": 36476691, "link": "https://stackoverflow.com/questions/36476691/variable-runnable-must-be-initialized", "title": "Variable &#39;runnable&#39; must be initialized", "body": "<p>Why does Kotlin complains about this:</p>\n\n<pre><code>class MyActivity : Activity {\n  private var handler:Handler = Handler()\n\n  private var runnable: Runnable = Runnable {\n    /* Do something very important */\n    handler.postDelayed(this@MyActivity.runnable, 5000)\n  }\n}\n</code></pre>\n\n<p>Compiler complains that <code>Variable 'runnable' must be initialized</code> in the Line were it's posted again by handler.\nThis does work in plain Java:</p>\n\n<pre><code>private Handler handler = new Handler();\n\nprivate Runnable runnable = new Runnable() {\n    @Override\n    public void run() {\n        handler.postDelayed(runnable, 5000);\n    }\n};\n</code></pre>\n"}, {"tags": ["proguard", "kotlin", "android-proguard", "data-class"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1460006127, "post_id": 36467166, "comment_id": 60545566, "body": "Do you get <code>java.lang.ClassNotFoundException</code> or <code>java.lang.NoSuchMethodError</code>? If not it&#39;s most likely not Proguard&#39;s fault in your case."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1460006795, "post_id": 36467166, "comment_id": 60545827, "body": "Didn&#39;t really get anything. It just silently run and my program still works. But the data are null. Perhaps I need to scan through the log messages."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1460009169, "post_id": 36467166, "comment_id": 60546873, "body": "Check through the log, not seeing any of such messages. Given that this is a release build, all debug log is not shown perhaps. If I change to debug build, then this error no longer exhibit, so no trace of issue in debug build."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1460468186, "post_id": 36467166, "comment_id": 60748694, "body": "How exactly are you storing data in your model? Are you using reflection?"}], "answers": [{"tags": [], "owner": {"reputation": 349, "user_id": 1967672, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Ej0he.png?s=128&g=1", "display_name": "tibbi", "link": "https://stackoverflow.com/users/1967672/tibbi"}, "is_accepted": false, "score": 1, "last_activity_date": 1472113678, "creation_date": 1472113678, "answer_id": 39140260, "question_id": 36467166, "link": "https://stackoverflow.com/questions/36467166/kotlin-need-to-proguard-kotlin-data-class/39140260#39140260", "title": "Kotlin: Need to proguard Kotlin Data Class?", "body": "<p>as far as I can tell, that behavior is expected. It might be related to them being serializable or so. I also have to add the model classes to proguard.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2414, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1472113678, "creation_date": 1460005842, "last_edit_date": 1464703257, "question_id": 36467166, "link": "https://stackoverflow.com/questions/36467166/kotlin-need-to-proguard-kotlin-data-class", "title": "Kotlin: Need to proguard Kotlin Data Class?", "body": "<p>I have a data class defined as below</p>\n\n<pre><code>package com.mypackage.model\n\nobject Model {\n    data class News(val photo: String, val title: String, val description: String)\n}\n</code></pre>\n\n<p>When I compile it using Proguard (i.e. release build), the data I received and store in the model all becomes null. They are still there i.e. ArrayList listOfNews does have the expected retrieved size. However all their content is null.</p>\n\n<p>Debug build this is okay. To solve this, I use this proguard rules, and it resolve the problem.</p>\n\n<pre><code>-keep class com.mypackage.model.** { *; }\n</code></pre>\n\n<p>Is this expected? i.e. all Data Class should be pro-guarded?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1459998306, "post_id": 36465971, "comment_id": 60543304, "body": "I like this Elvis operator. This is what I&#39;m looking for. Great! Thanks!"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 17, "creation_date": 1460017045, "post_id": 36465971, "comment_id": 60551608, "body": "You can also write <code>subscriber?.isUnsubscribed == true</code> which I find clearer."}, {"owner": {"reputation": 4835, "user_id": 870853, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ZKsMj.jpg?s=128&g=1", "display_name": "Arturs Vancans", "link": "https://stackoverflow.com/users/870853/arturs-vancans"}, "edited": false, "score": 0, "creation_date": 1567236196, "post_id": 36465971, "comment_id": 101911256, "body": "I specifically created <code>.flat()</code> extension function for optional booleans to flatten it to a <code>false</code>."}], "tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 40, "last_activity_date": 1459998336, "last_edit_date": 1459998336, "creation_date": 1459998131, "answer_id": 36465971, "question_id": 36465626, "link": "https://stackoverflow.com/questions/36465626/kotlin-required-kotlin-boolean-found-kotlin-boolean/36465971#36465971", "title": "Kotlin: Required: kotlin.Boolean. Found: kotlin.Boolean?", "body": "<p>I usually resolve this situation with the <code>?:</code> operator:</p>\n\n<pre><code>if (subsriber?.isUnsubscribed ?: false &amp;&amp; isDataEmpty()) {\n    loadData()\n}\n</code></pre>\n\n<p>This way, if <code>subscriber</code> is <code>null</code>, <code>subsriber?.isUnsubscribed</code> is also <code>null</code> and <code>subsriber?.isUnsubscribed ?: false</code> evaluates to <code>false</code>, which is hopefully the intended result, otherwise switch to <code>?: true</code>.</p>\n\n<p>Also casting a nullable type with <code>as Boolean</code> is <a href=\"https://kotlinlang.org/docs/reference/typecasts.html\" rel=\"noreferrer\">unsafe</a> and will throw an exception if <code>null</code> is encountered.</p>\n"}, {"comments": [{"owner": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1565777306, "post_id": 46493948, "comment_id": 101454895, "body": "I don&#39;t see why <code>something?.isEmpty()</code> doesn&#39;t work but <code>something?.isEmpty() == true</code> is working."}, {"owner": {"reputation": 4401, "user_id": 5980046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzzMj.jpg?s=128&g=1", "display_name": "PsychedelicSubstance", "link": "https://stackoverflow.com/users/5980046/psychedelicsubstance"}, "reply_to_user": {"reputation": 1384, "user_id": 7175708, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/QJYJM.png?s=128&g=1", "display_name": "Lechucico", "link": "https://stackoverflow.com/users/7175708/lechucico"}, "edited": false, "score": 0, "creation_date": 1565778147, "post_id": 46493948, "comment_id": 101455335, "body": "@Lechucico that simple. In kotlin when you have ? it means that it can return null. So you have 3 outcomes, true, false, null (cus you said by ? sign that can be null) Now if you are interested in only one outcome, like empty, you have to do isEmpty, which will return true, if it exists and its empty. If it doesn&#39;t exists it will return nulll, so NULL !=  true. It&#39;s not what you were looking for, and you still get proper validation. In other words. Pass only on true, null and false are rejected by this logical validation."}], "tags": [], "owner": {"reputation": 4401, "user_id": 5980046, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KzzMj.jpg?s=128&g=1", "display_name": "PsychedelicSubstance", "link": "https://stackoverflow.com/users/5980046/psychedelicsubstance"}, "is_accepted": false, "score": 11, "last_activity_date": 1559146962, "last_edit_date": 1559146962, "creation_date": 1506705603, "answer_id": 46493948, "question_id": 36465626, "link": "https://stackoverflow.com/questions/36465626/kotlin-required-kotlin-boolean-found-kotlin-boolean/46493948#46493948", "title": "Kotlin: Required: kotlin.Boolean. Found: kotlin.Boolean?", "body": "<p>Also is you have just <strong>Required: kotlin.Boolean. Found: kotlin.Boolean</strong>? you can do this:</p>\n\n<pre><code>when(something?.isEmpty()) {\n    true -&gt;  {  }\n    false -&gt; {  }\n    null -&gt;  {  }\n}\n</code></pre>\n\n<p>Also if you are interested only in <strong>one simple conditional statement</strong></p>\n\n<pre><code>if(something?.isEmpty() == true){\n  this will only worked if not null &amp;&amp; empty\n}\n</code></pre>\n\n<p><em>i know it's answered question but for future viewers can be helpful</em></p>\n"}, {"tags": [], "owner": {"reputation": 1252, "user_id": 5292296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/647286b53000cb6d6b2bd55d9d916958?s=128&d=identicon&r=PG", "display_name": "SapuSeven", "link": "https://stackoverflow.com/users/5292296/sapuseven"}, "is_accepted": false, "score": 7, "last_activity_date": 1534357042, "creation_date": 1534357042, "answer_id": 51864252, "question_id": 36465626, "link": "https://stackoverflow.com/questions/36465626/kotlin-required-kotlin-boolean-found-kotlin-boolean/51864252#51864252", "title": "Kotlin: Required: kotlin.Boolean. Found: kotlin.Boolean?", "body": "<p>Another way to resolve this issue is to explicitly check if the expression is <code>true</code>:</p>\n\n<pre><code>if (subsriber?.isUnsubscribed == true &amp;&amp; isDataEmpty()) {\n    loadData()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1534359781, "creation_date": 1534359781, "answer_id": 51864873, "question_id": 36465626, "link": "https://stackoverflow.com/questions/36465626/kotlin-required-kotlin-boolean-found-kotlin-boolean/51864873#51864873", "title": "Kotlin: Required: kotlin.Boolean. Found: kotlin.Boolean?", "body": "<p><em>If</em> <code>subscriber</code> is <code>val</code>, </p>\n\n<pre><code>subscriber != null &amp;&amp; subscriber.isUnsubscribed &amp;&amp; isDataEmpty()\n</code></pre>\n\n<p>will work. As a bonus, <code>subscriber != null</code> will be known inside the <code>if</code> block and you can call methods on <code>subscriber</code> without <code>?.</code> or <code>!!.</code>.</p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14103, "favorite_count": 3, "accepted_answer_id": 36465971, "answer_count": 4, "score": 17, "last_activity_date": 1559146962, "creation_date": 1459995878, "question_id": 36465626, "link": "https://stackoverflow.com/questions/36465626/kotlin-required-kotlin-boolean-found-kotlin-boolean", "title": "Kotlin: Required: kotlin.Boolean. Found: kotlin.Boolean?", "body": "<p>I wrote a condition as below</p>\n\n<pre><code>    if (subsriber?.isUnsubscribed &amp;&amp; isDataEmpty()) {\n        loadData()\n    }\n</code></pre>\n\n<p>As my subscriber could be null. The above title error displayed. So I cast it as below</p>\n\n<pre><code>    if (subsriber?.isUnsubscribed as Boolean &amp;&amp; isDataEmpty()) {\n        loadData()\n    }\n</code></pre>\n\n<p>It looks not as nice. Is there a better way of doing this?</p>\n"}]