[{"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 3456, "user_id": 1484621, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n3L70.jpg?s=128&g=1", "display_name": "Yu Jiaao", "link": "https://stackoverflow.com/users/1484621/yu-jiaao"}, "edited": false, "score": 0, "creation_date": 1490224836, "post_id": 42964397, "comment_id": 73022986, "body": "Just use java <code>getter</code>, in which you check if it is initialized, if not create one"}], "answers": [{"comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1490247839, "post_id": 42964999, "comment_id": 73029508, "body": "<code>UninitializedPropertyAccessException</code> is also a runtime exception."}], "tags": [], "owner": {"reputation": 181, "user_id": 4422974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05db05ef70294ec8f30f10d51530a3aa?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Jani", "link": "https://stackoverflow.com/users/4422974/sagar-jani"}, "is_accepted": false, "score": 0, "last_activity_date": 1490228185, "creation_date": 1490228185, "answer_id": 42964999, "question_id": 42964397, "link": "https://stackoverflow.com/questions/42964397/kotlin-lateinit-correspondent-java/42964999#42964999", "title": "Kotlin lateinit correspondent java", "body": "<p>There is no such property in Java which delays the initialization of property. But I think the behavior in Kotlin and Java are quite similar. </p>\n\n<p>Here are my two cents :</p>\n\n<p>In Kotlin accessing a lateinit property before it has been initialized throws a special exception that clearly identifies the property being accessed and the fact that it hasn't been initialized. (Reference : <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/properties.html</a>). </p>\n\n<p>In Java also, NullPointerException(NPE) is thrown that indicated that property being accessed is Null. </p>\n\n<p>The only difference could be that, NPE is a runtime exception.</p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 14, "last_activity_date": 1490249715, "last_edit_date": 1490249715, "creation_date": 1490249381, "answer_id": 42968459, "question_id": 42964397, "link": "https://stackoverflow.com/questions/42964397/kotlin-lateinit-correspondent-java/42968459#42968459", "title": "Kotlin lateinit correspondent java", "body": "<p><code>lateinit</code> in Kotlin is there so that you can have non-nullable types on variables that you can't initialize at the moment the class containing them is created.</p>\n\n<p>Using your example, if you didn't use <code>lateinit</code>, you'd have to make the <code>subject</code> nullable, since it has to be initialized with a value.</p>\n\n<pre><code>public class MyTest {\n    var subject: TestSubject? = null\n}\n</code></pre>\n\n<p>This would force you to do null checks every time you use it, which is ugly, so you can mark it as <code>lateinit</code> instead.</p>\n\n<hr>\n\n<p>In Java, you don't really have this problem, since everything is nullable, and declaring an uninitialized field is nothing special:</p>\n\n<pre><code>public class JavaTest {\n    TestSubject subject;\n}\n</code></pre>\n\n<p>This initializes <code>subject</code> to <code>null</code>, so it's practically equivalent to the non-<code>lateinit</code> Kotlin example.</p>\n\n<p>The only real difference between the <code>lateinit</code> version in Kotlin and the Java version is that you get a more specific exception when trying to access an uninitialized property in Kotlin, namely, a <code>UninitializedPropertyAccessException</code>, which will make debugging it easier than having to look for the cause of a generic <code>NullPointerException</code>. </p>\n\n<hr>\n\n<p>If you really wanted this slightly different behavior, you could wrap your Java properties in some sort of wrappers, but I don't think it would be worth the syntactic overhead to do so. A very basic (not thread safe, for example) way to do this would be:</p>\n\n<p>Have a generic wrapper class for properties:</p>\n\n<pre><code>public class Property&lt;T&gt; {\n\n    private T value = null;\n\n    public T get() {\n        if (value == null)\n            throw new UninitializedPropertyAccessException(\"Property has not been initialized\");\n        return value;\n    }\n\n    public void set(T value) {\n        if (value == null)\n            throw new IllegalArgumentException(\"Value can't be null\");\n        this.value = value;\n    }\n\n}\n</code></pre>\n\n<p>Use this wrapper in your classes:</p>\n\n<pre><code>public class JavaTest {\n    Property&lt;TestSubject&gt; subject = new Property&lt;&gt;();\n}\n</code></pre>\n\n<p>And then this usage would give you the uninitialized exception:</p>\n\n<pre><code>JavaTest test = new JavaTest();\ntest.subject.get();\n</code></pre>\n\n<p>And this one would run fine:</p>\n\n<pre><code>JavaTest test = new JavaTest();\ntest.subject.set(new TestSubject());\ntest.subject.get();\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> this is very similar to how <code>lateinit</code> works in Kotlin, if you decompile the bytecode of your example to Java, this is what you get:</p>\n\n<pre><code>public final class MyTest {\n   @NotNull\n   public TestSubject subject;\n\n   @NotNull\n   public final TestSubject getSubject() {\n      TestSubject var10000 = this.subject;\n      if(this.subject == null) {\n         Intrinsics.throwUninitializedPropertyAccessException(\"subject\");\n      }\n      return var10000;\n   }\n\n   public final void setSubject(@NotNull TestSubject var1) {\n      Intrinsics.checkParameterIsNotNull(var1, \"&lt;set-?&gt;\");\n      this.subject = var1;\n   }\n}\n</code></pre>\n\n<p>Basically, the compiler puts the code for checking the property access inside the class itself (+ uses some helper methods) instead of using a wrapper, which is more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 2546, "user_id": 2477084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b306fbe92f324ae9717c03ec7651116?s=128&d=identicon&r=PG", "display_name": "Tomas Bjerre", "link": "https://stackoverflow.com/users/2477084/tomas-bjerre"}, "is_accepted": false, "score": 0, "last_activity_date": 1534864752, "creation_date": 1534864752, "answer_id": 51951899, "question_id": 42964397, "link": "https://stackoverflow.com/questions/42964397/kotlin-lateinit-correspondent-java/51951899#51951899", "title": "Kotlin lateinit correspondent java", "body": "<p>There are many <a href=\"https://github.com/tomasbjerre/yet-another-kotlin-vs-java-comparison\" rel=\"nofollow noreferrer\">examples here</a>. In your case:</p>\n\n<pre><code>public class MyTest {\n    lateinit var subject: TestSubject\n}\n</code></pre>\n\n<p>It compiles to the following Java code:</p>\n\n<pre><code>import kotlin.jvm.internal.Intrinsics;\nimport org.jetbrains.annotations.NotNull;\n\npublic final class MyTest {\n  @NotNull public TestSubject subject;\n\n  @NotNull\n  public final TestSubject getSubject() {\n    TestSubject testSubject = this.subject;\n    if (testSubject == null) {\n      Intrinsics.throwUninitializedPropertyAccessException((String) \"subject\");\n    }\n    return testSubject;\n  }\n\n  public final void setSubject(@NotNull TestSubject testSubject) {\n    Intrinsics.checkParameterIsNotNull((Object) testSubject, (String) \"&lt;set-?&gt;\");\n    this.subject = testSubject;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 7726362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb7594fd9cada42708ae87a7ed502a5b?s=128&d=identicon&r=PG&f=1", "display_name": "undervoid", "link": "https://stackoverflow.com/users/7726362/undervoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7933, "favorite_count": 1, "accepted_answer_id": 42968459, "answer_count": 3, "score": 6, "last_activity_date": 1534864752, "creation_date": 1490224440, "last_edit_date": 1490248013, "question_id": 42964397, "link": "https://stackoverflow.com/questions/42964397/kotlin-lateinit-correspondent-java", "title": "Kotlin lateinit correspondent java", "body": "<p>Hello when I use Kotlin to program Android I have seen <code>lateinit</code> in the code. What is the equivalent in java\uff1f How can I change this code from Kotlin to Java?\n</p>\n\n<pre><code>public class MyTest {\n    lateinit var subject: TestSubject\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "edited": false, "score": 3, "creation_date": 1490225599, "post_id": 42964077, "comment_id": 73023244, "body": "I guess you could do <code>var sql = getResource(object {}.javaClass, &quot;foo.sql&quot;)</code>. Haven&#39;t tested though. Why not reference a known class in that package?"}], "answers": [{"comments": [{"owner": {"reputation": 460, "user_id": 2331319, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/0Wwzg.jpg?s=128&g=1", "display_name": "Lamberto Basti", "link": "https://stackoverflow.com/users/2331319/lamberto-basti"}, "edited": false, "score": 0, "creation_date": 1530375719, "post_id": 42976027, "comment_id": 89219272, "body": "Did you test it?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 460, "user_id": 2331319, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/0Wwzg.jpg?s=128&g=1", "display_name": "Lamberto Basti", "link": "https://stackoverflow.com/users/2331319/lamberto-basti"}, "edited": false, "score": 0, "creation_date": 1530482822, "post_id": 42976027, "comment_id": 89239639, "body": "@lamberto-basti I did. Did you?"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1490271982, "creation_date": 1490271982, "answer_id": 42976027, "question_id": 42964077, "link": "https://stackoverflow.com/questions/42964077/load-resource-from-local-directory-with-no-class/42976027#42976027", "title": "Load resource from local directory with no class", "body": "<p>The JDK does not define a static <code>getResource</code> method so I am not certain what library you are using to load resources this way but I suspect it is <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a>. If not, I recommend using it as it has two <code>getResource</code> methods: one that takes a class as an argument and one that uses the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html?is-external=true#getContextClassLoader--\" rel=\"nofollow noreferrer\">context class loader</a>. Using the <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/io/Resources.html#getResource-java.lang.String-\" rel=\"nofollow noreferrer\">latter</a> you can do the following:</p>\n\n<pre><code>import com.google.common.io.Resources.getResource\n\nval sql = getResource(\"foo.sql\")\n</code></pre>\n"}], "owner": {"reputation": 1858, "user_id": 4690711, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh4.googleusercontent.com/-OyIsivw15Ww/AAAAAAAAAAI/AAAAAAAAAWw/wDgQJ3UYMhw/photo.jpg?sz=128", "display_name": "Dave Ford", "link": "https://stackoverflow.com/users/4690711/dave-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1490271982, "creation_date": 1490222925, "question_id": 42964077, "link": "https://stackoverflow.com/questions/42964077/load-resource-from-local-directory-with-no-class", "title": "Load resource from local directory with no class", "body": "<p>I frequently use code like this:</p>\n\n<pre><code>val sql = getResource(this.javaClass, \"foo.sql\")\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>val sql = getResource(::MyClass.javaClass, \"foo.sql\")\n</code></pre>\n\n<p>But with Kotlin, I find myself using <em>top-level</em> functions quite often where there is no object or class.</p>\n\n<p>How would I do such a thing with a top-level function?</p>\n"}, {"tags": ["android", "kotlin", "google-signin"], "comments": [{"owner": {"reputation": 34634, "user_id": 2444099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ad5Vz.jpg?s=128&g=1", "display_name": "Eugen Pechanec", "link": "https://stackoverflow.com/users/2444099/eugen-pechanec"}, "edited": false, "score": 4, "creation_date": 1490207042, "post_id": 42958916, "comment_id": 73014006, "body": "fields != properties. You&#39;re on JVM, what you see in the debugger are obfuscated fields. The getters are public and retain original names. Java <code>.getDisplayName()</code> = <code>.displayName</code> in Kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 1216713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cc574e709e802726855897cc147cd5?s=128&d=identicon&r=PG", "display_name": "Julian Cuevas", "link": "https://stackoverflow.com/users/1216713/julian-cuevas"}, "edited": false, "score": 0, "creation_date": 1490276757, "post_id": 42977256, "comment_id": 73047640, "body": "Thanks for the answer and the clarification @EugenPechanec, however, I already tried that and it doesn&#39;t work, doing the following: <code>account?.idToken</code> (the kotlin getter) or <code>account?.getIdToken()</code> (the Java getter) both return null, that&#39;s why I think I&#39;m doing something wrong but I can&#39;t figure out what it is"}], "tags": [], "owner": {"reputation": 5305, "user_id": 5818889, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6b8df2f6af3fd32042982001fac8407b?s=128&d=identicon&r=PG&f=1", "display_name": "glee8e", "link": "https://stackoverflow.com/users/5818889/glee8e"}, "is_accepted": true, "score": 1, "last_activity_date": 1490275160, "creation_date": 1490275160, "answer_id": 42977256, "question_id": 42958916, "link": "https://stackoverflow.com/questions/42958916/kotlin-obfuscated-property-names/42977256#42977256", "title": "Kotlin - Obfuscated Property Names", "body": "<p><em>The following content is originally posted by @EugenPechanec as a comment to the question body. Some modification is applied to promote reading experience.</em></p>\n\n<hr>\n\n<p><em>Fields</em>, a term from JVM, is not <em>properties</em>, which is a Kotlin term. You're on JVM, and what you see in the debugger are obfuscated fields backing the Kotlin properties. The getters are public and retain original names. Java <code>.getDisplayName()</code> is <em>.displayName</em> in Kotlin. </p>\n"}], "owner": {"reputation": 35, "user_id": 1216713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cc574e709e802726855897cc147cd5?s=128&d=identicon&r=PG", "display_name": "Julian Cuevas", "link": "https://stackoverflow.com/users/1216713/julian-cuevas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 42977256, "answer_count": 1, "score": 1, "last_activity_date": 1490275160, "creation_date": 1490204221, "question_id": 42958916, "link": "https://stackoverflow.com/questions/42958916/kotlin-obfuscated-property-names", "title": "Kotlin - Obfuscated Property Names", "body": "<p>I'm developing a Kotlin Android app and I'm having an issue integrating Google Sign In, when I get the GoogleSignInAccount in order to extract properties, the property names seem to be obfuscated (or otherwise jumbled up), here's a screenshot of the way the properties look on AS 2.3 debugger:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KJUcS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KJUcS.png\" alt=\"Debugger\"></a></p>\n\n<p>Here's the snippet of code that tries to access those properties:</p>\n\n<pre><code> private fun googleSignInResult(data : GoogleSignInResult) {\n    if (data.isSuccess) {\n        if (data.signInAccount != null) {\n            val account = data.signInAccount\n            val authData = HashMap&lt;String, String&gt;()\n\n            authData[\"id_token\"] = account?.idToken.let { it } ?: return\n            authData[\"id\"] = account?.id.let { it } ?: return\n\n            val task = ParseUser.logInWithInBackground(\"google\", authData)\n\n            task.continueWith { user -&gt;\n                if (task.isCancelled) {\n                    Log.d(TAG, \"User cancelled Google login\")\n                } else if (task.isFaulted) {\n                    Log.d(TAG, \"Failed: \" + task.error)\n                } else {\n                    this.user = task.result\n                    this.user?.put(\"email\", account?.email)\n                    this.user?.put(\"name\", account?.displayName)\n                    this.user?.put(\"firstName\", account?.displayName)\n\n                    this.user?.saveInBackground({ error -&gt;\n                        if(error != null) {\n                            Log.d(TAG, \"Error: \" + error.message)\n                            this.user?.deleteInBackground()\n                            ParseUser.logOutInBackground()\n                        } else {\n                            //Logged in successfully\n                        }\n                    })\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Can anyone shed some light on why is it that properties look like that?, when I try to access idToken or id they're always null, however, the property names that are \"obfuscated\" can't be accessed, is this a kotlin bug or is it my error?</p>\n\n<p>Any help will be much appreciated!</p>\n"}, {"tags": ["eclipse-rcp", "kotlin", "eclipse-pde"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 4103578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mh0zo.png?s=128&g=1", "display_name": "Xavier Bouclet", "link": "https://stackoverflow.com/users/4103578/xavier-bouclet"}, "edited": false, "score": 0, "creation_date": 1502251567, "post_id": 45581405, "comment_id": 78122235, "body": "I did a mistake because the kotlin_bin doesn&#39;t exist outside of eclipse. Seems the way to go is to add the bin directory as a source folder in the build.properties and exclude the <i>.kt and **/</i>.kt files from the source folder."}], "tags": [], "owner": {"reputation": 851, "user_id": 4103578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mh0zo.png?s=128&g=1", "display_name": "Xavier Bouclet", "link": "https://stackoverflow.com/users/4103578/xavier-bouclet"}, "is_accepted": false, "score": 1, "last_activity_date": 1502250710, "creation_date": 1502250710, "answer_id": 45581405, "question_id": 42957468, "link": "https://stackoverflow.com/questions/42957468/eclipse-rcp-pde-export-and-kotlin/45581405#45581405", "title": "Eclipse RCP: PDE export and Kotlin", "body": "<p>I had both the kt file and the class file in the exported jar. You can try to remove the kt file in the bin folder. I haven't had any success when using a different source folder for my kt files.</p>\n\n<p>Anyway no problem using the jar with the kt file in it.</p>\n\n<p>I tried excluding the kt file and adding the kotlin_bin folder in my source folders without success either.</p>\n\n<p>I am going to try with Maven and tycho-compiler-plugin.</p>\n\n<p>The only trouble I really had was that I had to add the kotlin-runtime.jar to the exported product to make it work.</p>\n"}], "owner": {"reputation": 3892, "user_id": 599575, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ob4mZ.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/599575/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1502250710, "creation_date": 1490199983, "question_id": 42957468, "link": "https://stackoverflow.com/questions/42957468/eclipse-rcp-pde-export-and-kotlin", "title": "Eclipse RCP: PDE export and Kotlin", "body": "<p>I have an Eclipse RCP application and added a class written in Kotlin (I added the Kotlin Eclipse plugin, the Kotlin libraries etc.) So far everything works great and I can call the Kotlin class from another Java class when I start the application inside of Eclipse (via <a href=\"http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Flaunchers%2Feclipse_application_launcher.htm\" rel=\"nofollow noreferrer\">Launch an Eclipse Application</a>).</p>\n\n<p>Now, I want to export the application using the PDE export wizard (Export > Plugin-Development > Eclipse Product). However, this does not export compiled Kotlin class but exports it like a normal package resource (so <code>mypackage/MyClass.kt</code> instead of <code>mypackage/MyClass.class</code>).</p>\n\n<p>Can I configure the PDE Build / Export so that it exports the compiled Kotlin classes?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "edited": false, "score": 0, "creation_date": 1490216029, "post_id": 42955873, "comment_id": 73019011, "body": "Neat, Kotlin has that already built-in, I did not know that. Thank you very much."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1490619663, "post_id": 42955873, "comment_id": 73178458, "body": "You need to make <code>TComponent</code> <code>reified</code> (and <code>attachedComponents</code> <code>public</code>) or use <code>filterIsInstance(type.java)</code> in order to make this compile."}, {"owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1490627506, "post_id": 42955873, "comment_id": 73184550, "body": "@mfulton26 Ah yes, forgot that <code>filterIsInstance</code> requires a reified parameter. Thanks, answer updated."}], "tags": [], "owner": {"reputation": 8458, "user_id": 786388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69de0a32836e6068a2f0baba75627b00?s=128&d=identicon&r=PG", "display_name": "ean5533", "link": "https://stackoverflow.com/users/786388/ean5533"}, "is_accepted": true, "score": 8, "last_activity_date": 1490627504, "last_edit_date": 1490627504, "creation_date": 1490196059, "answer_id": 42955873, "question_id": 42952814, "link": "https://stackoverflow.com/questions/42952814/kotlin-how-to-find-and-cast-an-element-by-its-type/42955873#42955873", "title": "Kotlin - How to find and cast an element by its type", "body": "<p>This should work for you:</p>\n\n<pre><code>open class GameObjectImpl : GameObject {\n    val attachedComponents = mutableSetOf&lt;Component&gt;()\n\n    override inline fun &lt;reified TComponent : Component&gt; getComponent(type: KClass&lt;TComponent&gt;): TComponent? {\n         return attachedComponents.filterIsInstance&lt;TComponent&gt;().firstOrNull()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1870, "user_id": 4837112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da93bd05b13630b7642656d7dd34918f?s=128&d=identicon&r=PG&f=1", "display_name": "danielspaniol", "link": "https://stackoverflow.com/users/4837112/danielspaniol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 42955873, "answer_count": 1, "score": 1, "last_activity_date": 1490627504, "creation_date": 1490188698, "question_id": 42952814, "link": "https://stackoverflow.com/questions/42952814/kotlin-how-to-find-and-cast-an-element-by-its-type", "title": "Kotlin - How to find and cast an element by its type", "body": "<p>I have a collection of objects which inherit <code>Component</code> and I want a function which finds an object by its concrete class and return it.<br>\nBut Kotlin does not like the cast I do, and adding <code>@Suppress(\"UNCHECKED_CAST\")</code> is ugly.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>open class GameObjectImpl : GameObject {\n    private val attachedComponents = mutableSetOf&lt;Component&gt;()\n\n    @Suppress(\"UNCHECKED_CAST\")\n    override fun &lt;TComponent : Component&gt; getComponent(type: KClass&lt;TComponent&gt;): TComponent? {\n         return attachedComponents.find { type.isInstance(it) } as? TComponent\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 3, "creation_date": 1490183581, "post_id": 42950812, "comment_id": 72996672, "body": "Yes, it is except for negative numbers, they will have the minus sign counted in the length."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1490184135, "post_id": 42950812, "comment_id": 72997059, "body": "Some solution using &#39;log` would work too."}, {"owner": {"reputation": 1142, "user_id": 1010443, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QWELy.png?s=128&g=1", "display_name": "khcpietro", "link": "https://stackoverflow.com/users/1010443/khcpietro"}, "edited": false, "score": 2, "creation_date": 1564038936, "post_id": 42950812, "comment_id": 100901078, "body": "Since Kotlin 1.2, you can use <code>absoluteValue</code>. This covers negative numbers.   <code>number.absoluteValue.toString().length</code>"}, {"owner": {"reputation": 1142, "user_id": 1010443, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QWELy.png?s=128&g=1", "display_name": "khcpietro", "link": "https://stackoverflow.com/users/1010443/khcpietro"}, "edited": false, "score": 0, "creation_date": 1564039388, "post_id": 42950812, "comment_id": 100901296, "body": "The only wrong case is when the <code>number</code> is <code>Int.MIN_VALUE</code>"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1595414754, "post_id": 42950812, "comment_id": 111464333, "body": "While the numeric solutions from answers below are better for performance, the original code in the question can be simplified to <code>&quot;$number&quot;.length</code>, which, in my opinion, looks more conciese. I wouldn&#39;t advise to use this in a real code, though."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1490185273, "post_id": 42951252, "comment_id": 72997856, "body": "I wonder why this wasn&#39;t included in standard lib. Btw, what is this condition checking for &#39;Int.MIN_VALUE -&gt; 10&#39; ?"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 1, "creation_date": 1490185530, "post_id": 42951252, "comment_id": 72998063, "body": "Because <code>Math.abs(Int.MIN_VALUE)</code> overflows, I just hardcoded it in. <code>Int.MIN_VALUE</code> is equal to <code>-2147483648</code>, which is 10 digits long."}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 3, "creation_date": 1490194303, "post_id": 42951252, "comment_id": 73004914, "body": "You can get rid of the <code>Int.MIN_VALUE</code> special case if you convert to double first and then compute the absolute value: <code>else -&gt; Math.log10(Math.abs(toDouble())).toInt() + 1</code>"}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1490257673, "post_id": 42951252, "comment_id": 73033845, "body": "@fredoverflow Ah, nice. Edited."}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1490286150, "post_id": 42951252, "comment_id": 73055432, "body": "And you can get rid of the <code>0 -&gt; 1</code> special case by rounding the number up to the nearest odd number first: <code>fun Int.length() = Math.log10(Math.abs(or(1).toDouble())).toInt() + 1</code>, but this probably requires more lines of comment than lines of code saved..."}, {"owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "edited": false, "score": 1, "creation_date": 1572007851, "post_id": 42951252, "comment_id": 103436788, "body": "Some comments about this solution that are differently done in my answer: 1. I wouldn&#39;t use <code>java.lang.Math</code> methods, but <code>kotlin.math</code> functions, then it is independent from the underlying runtime. 2. I would use an extension property, not an extension function. 3. The second example is wrong, it will print <code>-4</code> as you calculate <code>1234.length()</code> and then negate the result, you need to put the <code>-1234</code> in parentheses like <code>println((-1234).length())</code>."}, {"owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "reply_to_user": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "edited": false, "score": 0, "creation_date": 1572174509, "post_id": 42951252, "comment_id": 103472548, "body": "@Vampire Thanks, fixed the problem. The <code>kotlin.math</code> functions didn&#39;t exist when I wrote this answer. It was introduced in Kotlin 1.2, which was released 6 months after I wrote this answer. For number 2, I think this is kind of stylistic. I prefer using a function in this case, because we are actually performing a calculation."}], "tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": true, "score": 23, "last_activity_date": 1572174374, "last_edit_date": 1572174374, "creation_date": 1490184584, "answer_id": 42951252, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin/42951252#42951252", "title": "Count number of digits in Kotlin", "body": "<p>You can use the standard Java-math library in <code>java.lang.Math</code> (edit: since Kotlin 1.2, use <code>kotlin.math</code>). The <code>log10</code> function will give you the length of the number minus 1 (with some exceptions). This function works with doubles though, so you have to convert back and forth. </p>\n\n<p>A <code>length</code> function could be written like this in Kotlin:</p>\n\n<pre><code>fun Int.length() = when(this) {\n    0 -&gt; 1\n    else -&gt; log10(abs(toDouble())).toInt() + 1\n}\n</code></pre>\n\n<p>Then you can call it like this:</p>\n\n<pre><code>println(829.length()) // Prints 3\nprintln((-1234).length()) // Prints 4 (it disregards the minus sign)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1490194178, "post_id": 42954807, "comment_id": 73004803, "body": "I&#39;m sure others may find it useful, but for my purposes it&#39;s a little bit overkill. I was just searching for one liners. Nevertheless, thanks for the feedback."}, {"owner": {"reputation": 7735, "user_id": 300797, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/328e4d651b4e1c7a97bd86f3d7c84073?s=128&d=identicon&r=PG", "display_name": "thecoshman", "link": "https://stackoverflow.com/users/300797/thecoshman"}, "edited": false, "score": 0, "creation_date": 1490261681, "post_id": 42954807, "comment_id": 73036521, "body": "For number of digits in a negative number, don&#39;t you simply needs to take the absolute value? Seems like a trivial thing to do... or am I missing something here?"}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "reply_to_user": {"reputation": 7735, "user_id": 300797, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/328e4d651b4e1c7a97bd86f3d7c84073?s=128&d=identicon&r=PG", "display_name": "thecoshman", "link": "https://stackoverflow.com/users/300797/thecoshman"}, "edited": false, "score": 0, "creation_date": 1490285782, "post_id": 42954807, "comment_id": 73055157, "body": "@thecoshman <code>Math.abs(Int.MIN_VALUE)</code> is still negative... a classic :)"}, {"owner": {"reputation": 7735, "user_id": 300797, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/328e4d651b4e1c7a97bd86f3d7c84073?s=128&d=identicon&r=PG", "display_name": "thecoshman", "link": "https://stackoverflow.com/users/300797/thecoshman"}, "edited": false, "score": 1, "creation_date": 1490373590, "post_id": 42954807, "comment_id": 73099020, "body": "@fredoverflow that actually makes perfect sense. Think of 4-bit twos-compliment numbers. The smallest number would be -8 whilst 7 would be the largest (that&#39;s 1000 and 0111 in binary of course). The absolute value of -8 is 8; it&#39;s binary value <i>should</i> be <code>1000</code>, but we have twos-compliment, so it get&#39;s interpreted as itself. Yay computers!"}], "tags": [], "owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "is_accepted": false, "score": 1, "last_activity_date": 1490193557, "creation_date": 1490193557, "answer_id": 42954807, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin/42954807#42954807", "title": "Count number of digits in Kotlin", "body": "<p>If for some reason you don't want to resort to strings or doubles, you can use binary search on an array of integers:</p>\n\n<pre><code>private val limits = arrayOf(-1, 9, 99, 999, 9999, 99999, 999999, 9999999, 99999999, 999999999)\n\nfun countDigits(x: Int): Int {\n    assert(x &gt;= 0)\n    val result = limits.binarySearch(x)\n    return result.xor(result.shr(31))   // one's complement absolute value\n}\n</code></pre>\n\n<p>Of course, you could hard-code binary search for this specific use case if you wanted it to be really efficient, and/or you got paid by lines of code:</p>\n\n<pre><code>fun countDigits(x: Int): Int {\n    assert(x &gt;= 0)\n    if (x &lt;= 99999) {\n        if (x &lt;= 99) {\n            if (x &lt;= 9) {\n                return 1\n            } else {\n                return 2\n            }\n        } else {\n            if (x &lt;= 999) {\n                return 3\n            } else {\n                if (x &lt;= 9999) {\n                    return 4\n                } else {\n                    return 5\n                }\n            }\n        }\n    } else {\n        if (x &lt;= 9999999) {\n            if (x &lt;= 999999) {\n                return 6\n            } else {\n                return 7\n            }\n        } else {\n            if (x &lt;= 99999999) {\n                return 8\n            } else {\n                if (x &lt;= 999999999) {\n                    return 9\n                } else {\n                    return 10\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Either way, make sure you got all those boundary cases right:</p>\n\n<pre><code>class CountDigitsTest {\n    @Test fun oneDigit() {\n        assertEquals(1, countDigits(0))\n        assertEquals(1, countDigits(9))\n    }\n\n    @Test fun twoDigits() {\n        assertEquals(2, countDigits(10))\n        assertEquals(2, countDigits(99))\n    }\n\n    @Test fun threeDigits() {\n        assertEquals(3, countDigits(100))\n        assertEquals(3, countDigits(999))\n    }\n\n    @Test fun fourDigits() {\n        assertEquals(4, countDigits(1000))\n        assertEquals(4, countDigits(9999))\n    }\n\n    @Test fun fiveDigits() {\n        assertEquals(5, countDigits(10000))\n        assertEquals(5, countDigits(99999))\n    }\n\n    @Test fun sixDigits() {\n        assertEquals(6, countDigits(100000))\n        assertEquals(6, countDigits(999999))\n    }\n\n    @Test fun sevenDigits() {\n        assertEquals(7, countDigits(1000000))\n        assertEquals(7, countDigits(9999999))\n    }\n\n    @Test fun eightDigits() {\n        assertEquals(8, countDigits(10000000))\n        assertEquals(8, countDigits(99999999))\n    }\n\n    @Test fun nineDigits() {\n        assertEquals(9, countDigits(100000000))\n        assertEquals(9, countDigits(999999999))\n    }\n\n    @Test fun tenDigits() {\n        assertEquals(10, countDigits(1000000000))\n        assertEquals(10, countDigits(Int.MAX_VALUE))\n    }\n}\n</code></pre>\n\n<p>All of this assumes that you don't care about negative integers. If you do, and you have trouble adapting the code, feel free to ask for help.</p>\n"}, {"tags": [], "owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "is_accepted": false, "score": 1, "last_activity_date": 1572007609, "creation_date": 1572007609, "answer_id": 58558816, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin/58558816#58558816", "title": "Count number of digits in Kotlin", "body": "<p>I would create an extension property using a base-10 logarithm.</p>\n\n<p>If you want the <code>-</code> counted too for negative numbers it would be:</p>\n\n<pre><code>import kotlin.math.log10\n\nval Int.length get() = when {\n    this == 0 -&gt; 1\n    this &lt; 0 -&gt; log10(-toFloat()).toInt() + 2\n    else -&gt; log10(toFloat()).toInt() + 1\n}\n</code></pre>\n\n<p>If you want to count only the digits counted and the <code>-</code> for negative numbers ignored it would be:</p>\n\n<pre><code>import kotlin.math.absoluteValue\nimport kotlin.math.log10\n\nval Int.length get() = when(this) {\n    0 -&gt; 1\n    else -&gt; log10(toFloat().absoluteValue).toInt() + 1\n}\n</code></pre>\n\n<p>You can then just do</p>\n\n<pre><code>println(1234.length)\nprintln((-1234).length)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1572048550, "creation_date": 1572048550, "answer_id": 58567020, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin/58567020#58567020", "title": "Count number of digits in Kotlin", "body": "<p>This task could be solved recursively as following:</p>\n\n<ul>\n<li>check it the number fits in the range <code>-9..9</code>. If that's true, the result is 1.</li>\n<li>otherwise divide the number by 10, count digits in the result, and add 1 to that count.</li>\n</ul>\n\n<pre><code>fun numberOfDigits(n: Int): Int = \n    when (n) {\n        in -9..9 -&gt; 1\n        else -&gt; 1 + numberOfDigits(n / 10)\n    } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 4095239, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hIkvL.jpg?s=128&g=1", "display_name": "Kirill Podlivaev", "link": "https://stackoverflow.com/users/4095239/kirill-podlivaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1590760095, "creation_date": 1590760095, "answer_id": 62087474, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin/62087474#62087474", "title": "Count number of digits in Kotlin", "body": "<p>If there are not only digits.\nFor example: \"-11.345F\" </p>\n\n<pre><code>fun countDigits(str: String): Int = str.filter{ Character.isDigit(it) }.count()\n\n// countDigits(\"-11.345F\") == 5\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10477, "favorite_count": 2, "accepted_answer_id": 42951252, "answer_count": 5, "score": 18, "last_activity_date": 1616932236, "creation_date": 1490183409, "question_id": 42950812, "link": "https://stackoverflow.com/questions/42950812/count-number-of-digits-in-kotlin", "title": "Count number of digits in Kotlin", "body": "<p>I'm currently counting number of digits using simple string.length approach:</p>\n\n<pre><code>val number = 829\nval length = number.toString().length\n</code></pre>\n\n<p>I wonder whether this is a good way or there is a more appropriate way to do that in Kotlin.</p>\n"}, {"tags": ["java", "android", "realm", "kotlin"], "comments": [{"owner": {"reputation": 4342, "user_id": 4191629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c23fe6635504cf8a1894ff1e520e76d?s=128&d=identicon&r=PG&f=1", "display_name": "maciekjanusz", "link": "https://stackoverflow.com/users/4191629/maciekjanusz"}, "edited": false, "score": 0, "creation_date": 1490176393, "post_id": 42947367, "comment_id": 72991501, "body": "I had this problem some time ago (different realm version). See if this helps: <a href=\"https://github.com/realm/realm-java/issues/2491\" rel=\"nofollow noreferrer\">github.com/realm/realm-java/issues/2491</a>"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 4, "creation_date": 1490178153, "post_id": 42947367, "comment_id": 72992816, "body": "Apply <code>kotlin-android</code> and <code>kotlin-android-extensinos</code> <b>before</b> <code>realm-android</code>"}, {"owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "edited": false, "score": 0, "creation_date": 1490178637, "post_id": 42947367, "comment_id": 72993157, "body": "u are genius  &lt;3 thanks, it works"}], "answers": [{"comments": [{"owner": {"reputation": 4169, "user_id": 1149398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KWIoS.jpg?s=128&g=1", "display_name": "sud007", "link": "https://stackoverflow.com/users/1149398/sud007"}, "edited": false, "score": 1, "creation_date": 1537640243, "post_id": 42949396, "comment_id": 91861250, "body": "Nope this too doesn&#39;t work. Realm by now has wasted around 2 hours in this issue, no solution yet!"}], "tags": [], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "is_accepted": true, "score": 11, "last_activity_date": 1490179670, "creation_date": 1490179670, "answer_id": 42949396, "question_id": 42947367, "link": "https://stackoverflow.com/questions/42947367/object-is-not-part-of-the-schema-for-this-realm/42949396#42949396", "title": "&quot;Object&quot; is not part of the schema for this Realm", "body": "<p>The issue where in gradle file.The problem where just an ordering rules of applying plugins, thanks to the @EpicPandaForce's comment, the problem has been solved, I'm writing answer, for helping others, if they miss the commented answer from @EpicPandaForce </p>\n\n<p>I changed the ordering of </p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'realm-android'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n\n<p>to</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'realm-android'\n</code></pre>\n\n<p>That's all, now everything works fine</p>\n"}], "owner": {"reputation": 4143, "user_id": 6882303, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ynTch.jpg?s=128&g=1", "display_name": "Jemo Mgebrishvili", "link": "https://stackoverflow.com/users/6882303/jemo-mgebrishvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3064, "favorite_count": 0, "accepted_answer_id": 42949396, "answer_count": 1, "score": 4, "last_activity_date": 1490179670, "creation_date": 1490174701, "last_edit_date": 1490175459, "question_id": 42947367, "link": "https://stackoverflow.com/questions/42947367/object-is-not-part-of-the-schema-for-this-realm", "title": "&quot;Object&quot; is not part of the schema for this Realm", "body": "<p>When I call the <code>realm.where(MessageEventModel::class.java).findAll()</code></p>\n\n<p>it throws excepiton:\nthis is error </p>\n\n<pre><code>java.lang.IllegalArgumentException: MessageEventModel is not part of the schema for this Realm\n                                                                          at io.realm.internal.modules.CompositeMediator.getMediator(CompositeMediator.java:172)\n                                                                     at io.realm.internal.modules.CompositeMediator.getTableName(CompositeMediator.java:90)\n</code></pre>\n\n<p>this is my Application class</p>\n\n<pre><code>class MyApp : Application() {\n\noverride fun onCreate() {\n    super.onCreate()\n    Realm.init(this)\n    val realmConfiguration = RealmConfiguration.Builder()\n            .deleteRealmIfMigrationNeeded()\n            .name(\"my_db\")\n            .build()\n    Realm.setDefaultConfiguration(realmConfiguration)\n}\n}\n</code></pre>\n\n<p>this is my Realm Model</p>\n\n<pre><code>class MessageEventModel : RealmObject{\n  constructor()\n  var message = \"\"\n  constructor(message: String) : this(){\n    this.message = message\n  }\n}\n</code></pre>\n\n<p>And here is where I'm trying to retrieve models</p>\n\n<pre><code>class AwesomeChatFragment : Fragment() {\n\nprivate val realm: Realm by lazy { Realm.getDefaultInstance() }\nprivate var notifications: RealmResults&lt;MessageEventModel&gt;? = null\n\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val view = inflater?.inflate(R.layout.activity_awesome_chat, container, false)\n    notifications = realm.where(MessageEventModel::class.java).findAll()\n    return view\n}\n}\n</code></pre>\n\n<p>gradle configuration:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'realm-android'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\n\nbuildscript {\n    ext.kotlin_version = '1.1.1'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath 'com.android.tools.build:gradle:2.3.0'\n        classpath 'com.google.gms:google-services:3.0.0'\n        classpath \"io.realm:realm-gradle-plugin:3.0.0\"\n    }\n}\n</code></pre>\n\n<p>I tried everything what I could found on stack: \n<strong>clean build, rebuild project, enable annotation processor, reinstaling apk, invalidate caches / restart</strong> </p>\n"}, {"tags": ["json", "rest", "gradle", "kotlin", "spark-java"], "answers": [{"comments": [{"owner": {"reputation": 984, "user_id": 3923525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d90a45bd3413a35bcc6286225d97c8b5?s=128&d=identicon&r=PG&f=1", "display_name": "jmm", "link": "https://stackoverflow.com/users/3923525/jmm"}, "edited": false, "score": 0, "creation_date": 1490235218, "post_id": 42962435, "comment_id": 73025990, "body": "Thanks for the answer, I guess the example I posted doesn&#39;t work, since it uses code a little different. I&#39;ll try to use Jackson"}], "tags": [], "owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "is_accepted": false, "score": 0, "last_activity_date": 1490215928, "creation_date": 1490215928, "answer_id": 42962435, "question_id": 42941543, "link": "https://stackoverflow.com/questions/42941543/cannot-post-body-to-spark-rest-api-using-kotlin/42962435#42962435", "title": "Cannot post body to Spark REST API using Kotlin", "body": "<p><code>JSONObject</code> resides in <code>org.json:json</code>, you might want to add that package. </p>\n\n<p>If you want to use Jackson instead, have a look at e.g. <a href=\"http://www.journaldev.com/2324/jackson-json-java-parser-api-example-tutorial\" rel=\"nofollow noreferrer\">http://www.journaldev.com/2324/jackson-json-java-parser-api-example-tutorial</a> (to actually use Jackson, you need at least <code>com.fasterxml.jackson.core:jackson-core</code>, and also <code>com.fasterxml.jackson.core:jackson-databind</code>).</p>\n"}], "owner": {"reputation": 984, "user_id": 3923525, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d90a45bd3413a35bcc6286225d97c8b5?s=128&d=identicon&r=PG&f=1", "display_name": "jmm", "link": "https://stackoverflow.com/users/3923525/jmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490215928, "creation_date": 1490149015, "last_edit_date": 1495541845, "question_id": 42941543, "link": "https://stackoverflow.com/questions/42941543/cannot-post-body-to-spark-rest-api-using-kotlin", "title": "Cannot post body to Spark REST API using Kotlin", "body": "<p>I'm trying to follow <a href=\"https://sparktutorials.github.io/2017/01/28/using-spark-with-kotlin.html\" rel=\"nofollow noreferrer\">this Spark tutorial to create a REST API using Kotlin</a>, and I'm struggling to post data on the JSON body</p>\n\n<p>I would like to post the data in the body, like this:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -X POST -d '{\"token\" : \"eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vdHJ1c3R5YXBwLmNvbS8iLCJzdWIiOiJ1c2Vycy8xMzAwODE5MzgwIiwiZXhwIjoxNDg5OTgwNTI2fQ.5ZJG9GyhG-OCXg0C510MBFs9EQHdE909s4hpNxnM6LU\"}' http://localhost:4567/tokens\n</code></pre>\n\n<p>However this would get a null value in my Kotlin file, line 20</p>\n\n<pre><code>/**\n * REST API for getting tokens\n * Created by juanma on 15/3/17.\n */\n\nimport spark.Spark.get\nimport spark.Spark.post\nimport spark.Spark.*\nimport com.fasterxml.jackson.module.kotlin.jacksonObjectMapper\n\nfun main(args: Array&lt;String&gt;) {\n    get(\"/hello\") { req, res -&gt; \"Hello World\" }\n    path(\"/tokens\") {\n        get(\"\") { req, res -&gt;\n            createToken()\n        }\n        // TODO check this instead, so I can get the params from the body\n        // https://stackoverflow.com/a/30113863/3923525\n        post(\"\") { req, res -&gt;\n            val token = req.queryParams(\"token\")\n            val verifiedToken = retrieveToken(token)\n            res.type(\"application/json\")\n            jacksonObjectMapper().writeValueAsString(verifiedToken)\n        }\n    }\n}\n\nfun createToken(): String {\n    val jwtProvider: JwtProvider = JwtProvider()\n    val jwt: String = jwtProvider.createJwt()\n    return jwt\n}\n\nfun retrieveToken(jwt: String): String {\n    val jwtProvider: JwtProvider = JwtProvider()\n    return jwtProvider.verifyJwt(jwt)\n}\n</code></pre>\n\n<p>Setting the token in the URL seems to work, but this isn't what I'm trying to do:</p>\n\n<pre><code>curl -X POST 'http://localhost:4567/tokens' -d 'token=eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vdHJ1c3R5YXBwLmNvbS8iLCJzdWIiOiJ1c2Vycy8xMzAwODE5MzgwIiwiZXhwIjoxNDg5OTgwNTI2fQ.5ZJG9GyhG-OCXg0C510MBFs9EQHdE909s4hpNxnM6LU'\n</code></pre>\n\n<p>I'm using Gradle, and here's my <code>build.gradle</code>, just in case:</p>\n\n<pre><code>group 'com.github.juanmougan'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlin_version = '1.1.1'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.1\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n\napply plugin: 'java'\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:1.0.1\"\n    compile group: 'com.sparkjava', name: 'spark-core', version: '2.5.5'\n    compile 'io.jsonwebtoken:jjwt:0.7.0'\n    compile group: 'com.fasterxml.jackson.module', name: 'jackson-module-kotlin', version: '2.8.7'\n    testCompile group: 'junit', name: 'junit', version: '4.11'\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\nsourceSets {\n    main.java.srcDirs += 'src/main/kotlin'\n}\n</code></pre>\n\n<p>I came across <a href=\"https://stackoverflow.com/questions/17742633/how-read-data-sent-by-client-with-spark/30113863#30113863\">this answer</a>, which uses Spark and Java and parses the body manually. So I tried to use this in a sample, brand new Spark/Maven/Java project, but it wouldn't even compile. In this line</p>\n\n<pre><code>JSONObject json = JSONObject.fromObject(element);\n</code></pre>\n\n<p>the class <code>JSONObject</code> cannot be imported. So I guess this is a loose end.</p>\n\n<p>Any ideas would be greatly appreciated.<br>\nThanks in advance</p>\n"}, {"tags": ["android", "gradle", "kotlin", "kapt"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1490128024, "post_id": 42936257, "comment_id": 72971961, "body": "Do you have any notable customizations in your <code>build.gradle</code>? Could you please share them?"}, {"owner": {"reputation": 3495, "user_id": 923820, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/49c33d2b536b9d15e46920a9026f4a2a?s=128&d=identicon&r=PG", "display_name": "Alexey Dmitriev", "link": "https://stackoverflow.com/users/923820/alexey-dmitriev"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1490180501, "post_id": 42936257, "comment_id": 72994522, "body": "Posted <code>build.gradle</code> files."}], "answers": [{"tags": [], "owner": {"reputation": 3495, "user_id": 923820, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/49c33d2b536b9d15e46920a9026f4a2a?s=128&d=identicon&r=PG", "display_name": "Alexey Dmitriev", "link": "https://stackoverflow.com/users/923820/alexey-dmitriev"}, "is_accepted": true, "score": 0, "last_activity_date": 1490697460, "creation_date": 1490697460, "answer_id": 43067311, "question_id": 42936257, "link": "https://stackoverflow.com/questions/42936257/kapt3-java-io-file-cannot-be-cast-to-java-lang-string/43067311#43067311", "title": "Kapt3: java.io.File cannot be cast to java.lang.String", "body": "<p>It turns out that I've been mis-applying Realm plugin, so that the issue is in order of plugin application. Realm's plugin should be applied <em>after</em> Kotlin's ones:</p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'realm-android'\n</code></pre>\n\n<p>That solved the issue for me.</p>\n"}], "owner": {"reputation": 3495, "user_id": 923820, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/49c33d2b536b9d15e46920a9026f4a2a?s=128&d=identicon&r=PG", "display_name": "Alexey Dmitriev", "link": "https://stackoverflow.com/users/923820/alexey-dmitriev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1168, "favorite_count": 0, "accepted_answer_id": 43067311, "answer_count": 1, "score": 1, "last_activity_date": 1490697460, "creation_date": 1490123748, "last_edit_date": 1490180470, "question_id": 42936257, "link": "https://stackoverflow.com/questions/42936257/kapt3-java-io-file-cannot-be-cast-to-java-lang-string", "title": "Kapt3: java.io.File cannot be cast to java.lang.String", "body": "<p>There is an exception when using <code>apply plugin: 'kotlin-kapt'</code> and running Gradle to build my app:</p>\n\n<pre><code>Caused by: java.lang.ClassCastException: java.io.File cannot be cast to java.lang.String\n        at org.jetbrains.kotlin.gradle.internal.Kapt3KotlinGradleSubplugin.disableAnnotationProcessingInJavaTask(Kapt3KotlinGradleSubplugin.kt:293)\n        at org.jetbrains.kotlin.gradle.internal.Kapt3KotlinGradleSubplugin.buildOptions(Kapt3KotlinGradleSubplugin.kt:156)\n        at org.jetbrains.kotlin.gradle.internal.Kapt3KotlinGradleSubplugin.createKaptKotlinTask(Kapt3KotlinGradleSubplugin.kt:246)\n        at org.jetbrains.kotlin.gradle.internal.Kapt3KotlinGradleSubplugin.apply(Kapt3KotlinGradleSubplugin.kt:136)\n        at org.jetbrains.kotlin.gradle.internal.Kapt3KotlinGradleSubplugin.apply(Kapt3KotlinGradleSubplugin.kt:48)\n        at org.jetbrains.kotlin.gradle.plugin.SubpluginEnvironment.addSubpluginOptions(KotlinPlugin.kt:685)\n        at org.jetbrains.kotlin.gradle.plugin.KotlinAndroidPlugin.processVariantData(KotlinPlugin.kt:452)\n        at org.jetbrains.kotlin.gradle.plugin.KotlinAndroidPlugin.access$processVariantData(KotlinPlugin.kt:326)\n        at org.jetbrains.kotlin.gradle.plugin.KotlinAndroidPlugin$apply$2.execute(KotlinPlugin.kt:370)\n        at org.jetbrains.kotlin.gradle.plugin.KotlinAndroidPlugin$apply$2.execute(KotlinPlugin.kt:326)\n        at org.gradle.internal.event.BroadcastDispatch$ActionInvocationHandler.dispatch(BroadcastDispatch.java:93)\n        at org.gradle.internal.event.BroadcastDispatch$ActionInvocationHandler.dispatch(BroadcastDispatch.java:82)\n        at org.gradle.internal.event.AbstractBroadcastDispatch.dispatch(AbstractBroadcastDispatch.java:44)\n        at org.gradle.internal.event.BroadcastDispatch.dispatch(BroadcastDispatch.java:79)\n        at org.gradle.internal.event.BroadcastDispatch.dispatch(BroadcastDispatch.java:30)\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\n        at com.sun.proxy.$Proxy15.afterEvaluate(Unknown Source)\n        at org.gradle.configuration.project.LifecycleProjectEvaluator.notifyAfterEvaluate(LifecycleProjectEvaluator.java:82)\n        ... 56 more\n</code></pre>\n\n<p>This exception happens on configuration phase:</p>\n\n<pre><code>org.gradle.api.ProjectConfigurationException: A problem occurred configuring project ':app'.\n</code></pre>\n\n<p>More info:</p>\n\n<ul>\n<li>using Android Gradle Plugin 2.2.0 (tried 2.3.0, 2.+)</li>\n<li>using Kotlin 1.1.1 (tried 1.0.4 - 1.0.5-3)</li>\n<li>using Dagger 2.2 (tried 2.7)</li>\n<li>using Realm 1.0 (tried newest version as well)</li>\n<li>using Android Data Binding 2.2.0</li>\n<li>using Retrolambda</li>\n<li>not using Android-apt</li>\n</ul>\n\n<p>Root <code>build.gradle</code>:</p>\n\n<pre><code>buildscript {\n    ext.kotlinVersion = '1.1.1'\n    ext.supportLibraryVersion = '23.2.1'\n    ext.androidPluginVersion = '2.2.0'\n    ext.testSupportLibraryVersion = '0.5'\n    ext.newRelicAgentLibraryVersion = '5.11.0'\n    ext.spekLibraryVersion = '1.0.89'\n    ext.okhttpVersion = '3.6.0'\n    ext.packetZoomVersion = '3.2.25'\n    ext.mockitoLibraryVersion = '1.10.19'\n    ext.powermockLibraryVersion = '1.6.2'\n\n    repositories {\n        jcenter()\n        mavenCentral()\n        maven {\n            url 'https://maven.fabric.io/public'\n        }\n    }\n\n    dependencies {\n        classpath \"com.android.tools.build:gradle:$androidPluginVersion\"\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n        classpath 'me.tatarka:gradle-retrolambda:3.3.0'\n        classpath 'io.fabric.tools:gradle:1.21.6'\n        classpath \"io.realm:realm-gradle-plugin:1.0.0\"\n        classpath \"com.newrelic.agent.android:agent-gradle-plugin:$newRelicAgentLibraryVersion\"\n        classpath 'com.google.gms:google-services:3.0.0'\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n        maven {\n            url 'https://oss.sonatype.org/content/repositories/snapshots/'\n        }\n        maven {\n            url 'https://maven.fabric.io/public'\n        }\n        maven {\n            url \"https://s3.amazonaws.com/repo.commonsware.com\"\n        }\n        maven {\n            url \"http://repository.jetbrains.com/all\"\n        }\n        mavenLocal()\n    }\n}\n</code></pre>\n\n<p><code>build.gradle</code> for module <code>app</code>:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'me.tatarka.retrolambda'\napply plugin: 'realm-android'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\napply plugin: 'io.fabric'\napply plugin: 'newrelic'\n\nandroid {\n    compileSdkVersion 23\n    buildToolsVersion \"25.0.2\"\n\n    dataBinding {\n        enabled = true\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    signingConfigs {\n        config\n    }\n\n    defaultConfig {\n        applicationId \"com.example.android\"\n        targetSdkVersion 23\n        signingConfig signingConfigs.config\n        multiDexEnabled true\n\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n\n    dexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n\n    productFlavors {\n        dev {\n            // dev utilizes minSDKVersion = 21 to allow the Android gradle plugin\n            // to pre-dex each module and produce an APK that can be tested on\n            // Android Lollipop without time consuming dex merging processes.\n            minSdkVersion 21\n        }\n        prod {\n            // The actual minSdkVersion for the application.\n            minSdkVersion 16\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFile 'proguard-support.pro'\n            proguardFile 'proguard-retrofit.pro'\n            proguardFile 'proguard-butterknife.pro'\n            proguardFile 'proguard-retrolambda.pro'\n            proguardFile 'proguard-crashlytics.pro'\n            proguardFile 'proguard-newrelic.pro'\n            proguardFile 'proguard-duktape.pro'\n            proguardFile 'proguard-packetzoom.pro'\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    retrolambda {\n        jvmArgs '-noverify'\n    }\n\n    if (project.hasProperty('releaseKeyStore') &amp;&amp;\n            project.hasProperty('releaseKeyPassword') &amp;&amp;\n            project.hasProperty('releaseKeyStorePassword') &amp;&amp;\n            project.hasProperty('releaseKeyAlias')) {\n        android.signingConfigs.config.keyAlias = releaseKeyAlias\n        android.signingConfigs.config.storeFile = file(releaseKeyStore)\n        android.signingConfigs.config.storePassword = releaseKeyStorePassword\n        android.signingConfigs.config.keyPassword = releaseKeyPassword\n    } else {\n        android.signingConfigs.config.keyAlias \"\"\n        android.signingConfigs.config.storeFile null\n        android.signingConfigs.config.storePassword \"\"\n        android.signingConfigs.config.keyPassword \"\"\n    }\n\n    testOptions {\n        unitTests.returnDefaultValues = true\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n        test.java.srcDirs += 'src/test/kotlin'\n        androidTest.java.srcDirs += 'src/androidTest/kotlin'\n    }\n}\n\nkapt {\n    generateStubs = true\n}\n\ndependencies {\n    kapt 'com.github.hotchemi:permissionsdispatcher-processor:2.0.8'\n    kapt 'com.google.dagger:dagger-compiler:2.2'\n    kapt \"com.android.databinding:compiler:$androidPluginVersion\"\n    kapt \"io.realm:realm-annotations:1.0.0\"\n    kapt \"io.realm:realm-annotations-processor:1.0.0\"\n    kapt 'com.jakewharton:butterknife:6.1.0'\n    kapt 'com.github.lukaspili.autodagger2:autodagger2-compiler:1.1'\n    provided 'org.glassfish:javax.annotation:10.0-b28'\n    compile 'com.android.support:multidex:1.0.1'\n    compile \"com.android.support:appcompat-v7:$supportLibraryVersion\"\n    compile \"com.android.support:recyclerview-v7:$supportLibraryVersion\"\n    compile \"com.android.support:design:$supportLibraryVersion\"\n    compile \"com.android.support:percent:$supportLibraryVersion\"\n    compile \"com.android.support:gridlayout-v7:$supportLibraryVersion\"\n    compile \"com.android.support:cardview-v7:$supportLibraryVersion\"\n    compile \"com.android.support:customtabs:$supportLibraryVersion\"\n    compile 'com.android.support.constraint:constraint-layout:1.0.0-beta4'\n    compile 'io.reactivex:rxandroid:1.2.0'\n    compile 'io.reactivex:rxjava:1.1.4'\n    compile 'com.jakewharton.rxbinding:rxbinding:0.1.0'\n    compile 'com.trello:rxlifecycle:0.5.0'\n    compile 'com.trello:rxlifecycle-components:0.5.0'\n    compile 'com.trello:rxlifecycle-kotlin:0.5.0'\n    compile 'com.google.code.gson:gson:2.3.1'\n    compile 'com.google.dagger:dagger:2.2'\n    compile 'com.jakewharton:butterknife:6.1.0'\n    compile 'com.squareup.picasso:picasso:2.5.2'\n    compile 'me.relex:circleindicator:1.1.3@aar'\n    compile 'com.jakewharton.timber:timber:3.0.2'\n    compile 'com.cocosw:bottomsheet:1.+@aar'\n    compile \"com.newrelic.agent.android:android-agent:$newRelicAgentLibraryVersion\"\n    compile \"com.newrelic.agent.android:class-rewriter:$newRelicAgentLibraryVersion\"\n    compile 'me.tatarka:bindingcollectionadapter:0.15'\n    compile 'me.tatarka:bindingcollectionadapter-recyclerview:0.15'\n    compile 'com.github.pwittchen:reactivenetwork:0.1.3'\n    compile 'org.apmem.tools:layouts:1.10@aar'\n    compile 'com.sothree.slidinguppanel:library:3.2.1'\n    compile 'com.squareup.duktape:duktape-android:0.9.5'\n    compile 'com.commonsware.cwac:provider:0.4.1'\n    compile \"com.squareup.okhttp3:logging-interceptor:$okhttpVersion\"\n    compile 'com.squareup.retrofit2:retrofit:2.0.2'\n    compile 'com.squareup.retrofit2:converter-gson:2.0.2'\n    compile 'com.squareup.retrofit2:converter-scalars:2.0.2'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.2'\n    compile \"com.packetzoom:pz-android-sdk:$packetZoomVersion\"\n    compile \"com.packetzoom:pz-okhttp3-interceptor:$packetZoomVersion\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n    compile 'org.jetbrains.kotlinx:kotlinx-support-jdk7:0.1'\n    compile('com.crashlytics.sdk.android:crashlytics:2.5.5@aar') {\n        transitive = true;\n    }\n    compile 'com.github.lukaspili.autodagger2:autodagger2:1.1'\n    compile 'com.google.firebase:firebase-messaging:9.4.0'\n    compile 'com.google.android.gms:play-services-analytics:9.4.0'\n    compile 'com.google.android.gms:play-services-gcm:9.4.0'\n    compile 'com.squareup.flow:flow:1.0.0-alpha2-SNAPSHOT'\n\n    testCompile 'junit:junit:4.12'\n    testCompile 'pl.pragmatists:JUnitParams:1.0.4'\n    testCompile \"org.mockito:mockito-core:$mockitoLibraryVersion\"\n    testCompile \"org.powermock:powermock-api-mockito:$powermockLibraryVersion\"\n    testCompile \"org.powermock:powermock-module-junit4:$powermockLibraryVersion\"\n    testCompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\n    testCompile \"org.jetbrains.spek:spek-api:$spekLibraryVersion\"\n    testCompile \"org.jetbrains.spek:spek-junit-platform-engine:$spekLibraryVersion\"\n    testCompile 'org.junit.platform:junit-platform-runner:1.0.0-M2'\n    testCompile \"org.jetbrains.kotlin:kotlin-test:$kotlinVersion\"\n    testCompile 'com.natpryce:hamkrest:1.2.3.0'\n    androidTestCompile \"com.android.support.test:runner:$testSupportLibraryVersion\"\n    androidTestCompile \"com.android.support.test:rules:$testSupportLibraryVersion\"\n    androidTestCompile 'com.google.dexmaker:dexmaker:1.2'\n    androidTestCompile 'com.google.dexmaker:dexmaker-mockito:1.2'\n    androidTestCompile \"org.mockito:mockito-core:$mockitoLibraryVersion\"\n    androidTestCompile 'org.hamcrest:hamcrest-integration:1.3'\n    androidTestCompile 'org.hamcrest:hamcrest-core:1.3'\n    androidTestCompile 'org.hamcrest:hamcrest-library:1.3'\n    androidTestCompile \"com.android.support:support-annotations:$supportLibraryVersion\"\n}\n\n// Plugin declared at the bottom of the build.gradle file according to requirements described in documentation:\n// https://developers.google.com/android/guides/google-services-plugin#introduction\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>How do I fix the issue?</p>\n"}, {"tags": ["java", "android", "json", "parsing", "kotlin"], "comments": [{"owner": {"reputation": 9227, "user_id": 2412816, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/wIkan.png?s=128&g=1", "display_name": "dsharew", "link": "https://stackoverflow.com/users/2412816/dsharew"}, "edited": false, "score": 0, "creation_date": 1490108450, "post_id": 42930646, "comment_id": 72958923, "body": "my comment here is having the classes is not bad it makes your code more structured but if you want easy way of serializing and deserializing your classes I can suggest a solution."}, {"owner": {"reputation": 9227, "user_id": 2412816, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/wIkan.png?s=128&g=1", "display_name": "dsharew", "link": "https://stackoverflow.com/users/2412816/dsharew"}, "edited": false, "score": 0, "creation_date": 1490108568, "post_id": 42930646, "comment_id": 72959018, "body": "And I think it is also possible to avoid creating these data classes if you want"}, {"owner": {"reputation": 3967, "user_id": 2736039, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pWFP5.png?s=128&g=1", "display_name": "Ultimo_m", "link": "https://stackoverflow.com/users/2736039/ultimo-m"}, "reply_to_user": {"reputation": 9227, "user_id": 2412816, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/wIkan.png?s=128&g=1", "display_name": "dsharew", "link": "https://stackoverflow.com/users/2412816/dsharew"}, "edited": false, "score": 0, "creation_date": 1490110188, "post_id": 42930646, "comment_id": 72960304, "body": "any solution is welcomed :)"}, {"owner": {"reputation": 17929, "user_id": 166589, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l9PYX.jpg?s=128&g=1", "display_name": "Lyubomyr Shaydariv", "link": "https://stackoverflow.com/users/166589/lyubomyr-shaydariv"}, "edited": false, "score": 0, "creation_date": 1490258147, "post_id": 42930646, "comment_id": 73034103, "body": "And your question is ..? It seems like you want to skip mapping for the <code>data</code> and <code>metadata</code> fields, however still obtain the value under the <code>data</code> properties as if the given JSON were just <code>{&quot;name&quot;:&quot;Start&quot;,&quot;pid&quot;:&quot;1&quot;,&quot;position&quot;:{&quot;x&quot;:&quot;31&quot;,&quot;y&quot;:&quot;330&quot;}}</code>?"}, {"owner": {"reputation": 3967, "user_id": 2736039, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pWFP5.png?s=128&g=1", "display_name": "Ultimo_m", "link": "https://stackoverflow.com/users/2736039/ultimo-m"}, "edited": false, "score": 0, "creation_date": 1490261709, "post_id": 42930646, "comment_id": 73036541, "body": "No my idea is to find a solution that avoids me to create an extra class(that has data and metadata) for every model, but I want to have all the data that the JSON provides. In my opinion sounds like I am doing repetitive code and this way I have doubled the number of classes."}, {"owner": {"reputation": 17929, "user_id": 166589, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/l9PYX.jpg?s=128&g=1", "display_name": "Lyubomyr Shaydariv", "link": "https://stackoverflow.com/users/166589/lyubomyr-shaydariv"}, "edited": false, "score": 0, "creation_date": 1490266523, "post_id": 42930646, "comment_id": 73040094, "body": "@Ultimo_m I don&#39;t see anything wrong of doubling, because you <b>cannot</b> do what you want with static mappings (how could one break the fundamentals?). You must have both values types along with their respective DTO types (your classes with <code>data</code> and <code>metadata</code>). Or try to switch to dynamic mappings based on dynamic structures like maps to hold both strongly-typed <code>data</code> and <code>metadata</code> (if it&#39;s possible with mixed typing though)."}, {"owner": {"reputation": 2029, "user_id": 3554832, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8AvjO.jpg?s=128&g=1", "display_name": "Iman", "link": "https://stackoverflow.com/users/3554832/iman"}, "edited": false, "score": 0, "creation_date": 1490650446, "post_id": 42930646, "comment_id": 73198069, "body": "May I suggest to post it to [Code Review]?"}, {"owner": {"reputation": 3967, "user_id": 2736039, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pWFP5.png?s=128&g=1", "display_name": "Ultimo_m", "link": "https://stackoverflow.com/users/2736039/ultimo-m"}, "edited": false, "score": 0, "creation_date": 1490650814, "post_id": 42930646, "comment_id": 73198211, "body": "thanks for the suggestion, I have posted there before posting here :D <a href=\"http://codereview.stackexchange.com/questions/158379/java-json-parsing\" title=\"java json parsing\">codereview.stackexchange.com/questions/158379/java-json-pars&zwnj;&#8203;ing</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4683, "user_id": 3870025, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a0fd762141547dc47fbf1fd5b9b389fc?s=128&d=identicon&r=PG&f=1", "display_name": "solidak", "link": "https://stackoverflow.com/users/3870025/solidak"}, "is_accepted": false, "score": 0, "last_activity_date": 1491910300, "creation_date": 1491910300, "answer_id": 43344693, "question_id": 42930646, "link": "https://stackoverflow.com/questions/42930646/java-kotlin-json-parsing-improvement/43344693#43344693", "title": "Java/Kotlin JSON parsing improvement", "body": "<p>I don't think your request is possible. If there is a solution, then it would just create intermediate classes that would do pretty much the same as what you're doing. </p>\n\n<p>In Kotlin, I'd do the above like this. Feel free to even put it in one <code>.kt</code> file:</p>\n\n<pre><code>data class MResponse(@SerializedName(\"data\") val user: User,\n                     val metadata: String)\n\ndata class User(val name: String,\n                val pid: String,\n                @SerializedName(\"position\") val positionData: PositionData)\n\n\ndata class PositionData(@SerializedName(\"position\") val position: Position,\n                        val metadata: String)\n\ndata class Position(val x: String, val y: String)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3967, "user_id": 2736039, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pWFP5.png?s=128&g=1", "display_name": "Ultimo_m", "link": "https://stackoverflow.com/users/2736039/ultimo-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1491987303, "creation_date": 1491987303, "answer_id": 43364823, "question_id": 42930646, "link": "https://stackoverflow.com/questions/42930646/java-kotlin-json-parsing-improvement/43364823#43364823", "title": "Java/Kotlin JSON parsing improvement", "body": "<p>Well the solution that I was asking for was quite simple in my opinion, I just didn't know it in the beginning.</p>\n\n<p>Based on source code of <code>Retrofit</code> and some other related answers about <code>Java generics</code> this was the answer for my problem:</p>\n\n<pre><code>public class DataResponse&lt;T, R&gt; {\n\n    public T data;\n\n    @SerializedName(\"meta\")\n    public R metadata;\n}\n</code></pre>\n\n<p>and this is an example how I can use it:</p>\n\n<pre><code>Observable&lt;DataResponse&lt;User, BaseMeta&gt;&gt; getUser()\n</code></pre>\n\n<p>For me this was the solution. If there are better solution out there, I am ready to accept them.</p>\n"}], "owner": {"reputation": 3967, "user_id": 2736039, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/pWFP5.png?s=128&g=1", "display_name": "Ultimo_m", "link": "https://stackoverflow.com/users/2736039/ultimo-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 2, "accepted_answer_id": 43364823, "answer_count": 2, "score": 7, "last_activity_date": 1491987693, "creation_date": 1490108173, "last_edit_date": 1492087237, "question_id": 42930646, "link": "https://stackoverflow.com/questions/42930646/java-kotlin-json-parsing-improvement", "title": "Java/Kotlin JSON parsing improvement", "body": "<p>I consume an API which gives me this type of JSON:</p>\n\n<pre><code>{\n  \"data\": {\n    \"name\": \"Start\",\n    \"pid\": \"1\",\n    \"position\": {\n      \"data\": {\n        \"x\": \"31\",\n        \"y\": \"330\"\n      },\n      \"metadata\": \"empty\"\n    }\n  },\n  \"metadata\": \"empty\"\n}\n</code></pre>\n\n<p>I have created the classes with objects with the same structure as the above JSON. I use the <code>retrofit</code> lib in Android which inside uses <code>GSON</code> for parsing the JSON.</p>\n\n<p>My model classes would be like this:</p>\n\n<p><strong>MResponse.class</strong></p>\n\n<pre><code>public class MResponse {\n\n    @SerializedName(\"data\")\n    public User user;\n\n    String metadata;\n}\n</code></pre>\n\n<p><strong>User.class</strong></p>\n\n<pre><code>public class User {\n\n    public String name;\n\n    public String pid;\n\n    @SerializedName(\"position\")\n    public PositionData positionData;\n}\n</code></pre>\n\n<p><strong>PositionData.class</strong></p>\n\n<pre><code>public class PositionData {\n\n    @SerializedName(\"data\")\n    public Position position;\n\n    public String metadata;\n}\n</code></pre>\n\n<p><strong>Position.class</strong></p>\n\n<pre><code>public class Position {\n\n    public String x;\n\n    public String y;\n}\n</code></pre>\n\n<p>Now this works fine for me. But as you can see for every model I have to create a parent which will have the same structure just changes the child. This fact doubles the classes that I use for my models. I would like to ask if there is a better way to avoid all these classes.</p>\n\n<p>I don't want to use inner classes. I was thinking that the guys that have done the JSON like this must have had a reason why they did it like this and also a way to make the parsing more easier.</p>\n\n<p>Usually I was used to parse this kind of JSON structure:</p>\n\n<pre><code>{\n  \"data\": {\n    \"name\": \"Start\",\n    \"pid\": \"1\",\n    \"position\": {\n      \"x\": \"31\",\n      \"y\": \"330\"\n    }\n  }\n}\n</code></pre>\n\n<p>And here it's easier if I would follow the solution above.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also any solution in Kotlin is welcomed</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Solution for Kotlin <a href=\"https://codereview.stackexchange.com/questions/158379/java-kotlin-json-parsing-improvement/\">here</a></p>\n"}, {"tags": ["android", "android-gradle-plugin", "kotlin", "android-studio-2.3"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1490114754, "post_id": 42929909, "comment_id": 72963871, "body": "Try building using Gradle on the command line?"}, {"owner": {"reputation": 9320, "user_id": 7045114, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9OfXY.jpg?s=128&g=1", "display_name": "Maksim Ostrovidov", "link": "https://stackoverflow.com/users/7045114/maksim-ostrovidov"}, "edited": false, "score": 0, "creation_date": 1490142904, "post_id": 42929909, "comment_id": 72978051, "body": "I&#39;ve cloned the repo and built project without problems (Android Studio 2.3 and Kotlin Plugin 1.1.1 installed)"}, {"owner": {"reputation": 705, "user_id": 1924086, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-gzGar3aqecs/AAAAAAAAAAI/AAAAAAAAENU/Z0aSfVbMMTk/photo.jpg?sz=128", "display_name": "gustavogbc", "link": "https://stackoverflow.com/users/1924086/gustavogbc"}, "edited": false, "score": 0, "creation_date": 1490144591, "post_id": 42929909, "comment_id": 72978537, "body": "OK. I&#39;ll try to edit the post describing each step I took."}], "answers": [{"tags": [], "owner": {"reputation": 705, "user_id": 1924086, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-gzGar3aqecs/AAAAAAAAAAI/AAAAAAAAENU/Z0aSfVbMMTk/photo.jpg?sz=128", "display_name": "gustavogbc", "link": "https://stackoverflow.com/users/1924086/gustavogbc"}, "is_accepted": true, "score": 1, "last_activity_date": 1490234542, "creation_date": 1490234542, "answer_id": 42965937, "question_id": 42929909, "link": "https://stackoverflow.com/questions/42929909/cant-build-project-with-android-studio-2-3-and-gradle/42965937#42965937", "title": "Cant build project with Android Studio 2.3 and Gradle", "body": "<p>I figured out what was wrong...</p>\n\n<p>The project's build.gradle file had a mistake...</p>\n\n<p>The original says:</p>\n\n<pre><code>buildscript {\n    //other stuff\n    dependencies {\n        //something else\n        classpath \"org.jetbrains.dokka:dokka-android-gradle-plugin:${dokka_version}\"\n    }\n}\n</code></pre>\n\n<p>But it should be:</p>\n\n<pre><code>buildscript {\n    //other stuff\n    dependencies {\n        //something else\n        classpath \"org.jetbrains.dokka:dokka-gradle-plugin:${dokka_version}\"\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4204341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8fd94dd8d42215559a82c052f7148b?s=128&d=identicon&r=PG&f=1", "display_name": "SaEeD Gholami Z", "link": "https://stackoverflow.com/users/4204341/saeed-gholami-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1491923269, "creation_date": 1491923269, "answer_id": 43349763, "question_id": 42929909, "link": "https://stackoverflow.com/questions/42929909/cant-build-project-with-android-studio-2-3-and-gradle/43349763#43349763", "title": "Cant build project with Android Studio 2.3 and Gradle", "body": "<p>do it:</p>\n\n<ol>\n<li>download latest version of gradle from <a href=\"https://gradle.org/releases\" rel=\"nofollow noreferrer\">https://gradle.org/releases</a></li>\n<li>extract that to '<code>C:\\Program Files\\Android\\Android Studio\\gradle</code>'</li>\n<li>open android studio and go to '<code>File&gt;Setting&gt;Build, Execution,Deployment&gt;Gradle</code>' and choose latest gradle folder from <code>Gradle Home</code> directory</li>\n<li>Restart Android Studio and enjoy it.</li>\n</ol>\n\n<p>Good luck</p>\n"}, {"tags": [], "owner": {"reputation": 11567, "user_id": 2533290, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/zp2v0.jpg?s=128&g=1", "display_name": "Martin Pfeffer", "link": "https://stackoverflow.com/users/2533290/martin-pfeffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1496995107, "creation_date": 1496995107, "answer_id": 44452394, "question_id": 42929909, "link": "https://stackoverflow.com/questions/42929909/cant-build-project-with-android-studio-2-3-and-gradle/44452394#44452394", "title": "Cant build project with Android Studio 2.3 and Gradle", "body": "<p>open <em>prjectdir/gradle/gradle-wrapper.properties</em></p>\n\n<p>and set </p>\n\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-3.3-all.zip\n</code></pre>\n\n<p>open the project gradle (not gradle inside the module) and set </p>\n\n<pre><code>    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.0+'\n}\n</code></pre>\n\n<p>And also check the <a href=\"https://developer.android.com/studio/releases/gradle-plugin.html\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 705, "user_id": 1924086, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh6.googleusercontent.com/-gzGar3aqecs/AAAAAAAAAAI/AAAAAAAAENU/Z0aSfVbMMTk/photo.jpg?sz=128", "display_name": "gustavogbc", "link": "https://stackoverflow.com/users/1924086/gustavogbc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3820, "favorite_count": 0, "accepted_answer_id": 42965937, "answer_count": 3, "score": 0, "last_activity_date": 1496995107, "creation_date": 1490106411, "last_edit_date": 1490232265, "question_id": 42929909, "link": "https://stackoverflow.com/questions/42929909/cant-build-project-with-android-studio-2-3-and-gradle", "title": "Cant build project with Android Studio 2.3 and Gradle", "body": "<p>I've cloned project <a href=\"https://github.com/mpcjanssen/simpletask-android.git\" rel=\"nofollow noreferrer\">https://github.com/mpcjanssen/simpletask-android.git</a> but when I try to open it on Android Studio 2.3 (recently updated) it just wont buid the project.</p>\n\n<p>I'll try to eaplain in steps:</p>\n\n<p><strong>1)</strong> Deleted everything in folder \"..../simpletask-android\" from my hard drive.<br>\n<strong>2)</strong> Started Android Studio and selected New Project from Github<br>\n<strong>3)</strong> After downloading the source code from Github Android Studio showed me the following screen and I adopted a Next-Next-Finish behavior, without changing anything.\n<a href=\"https://i.stack.imgur.com/N7EiQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N7EiQ.png\" alt=\"enter image description here\"></a><br>\n<strong>4)</strong> Next, AS started building the project according to settings.gradle found in the project's root folder. There is a small dialog on the picture showing this.<br>\n<strong>5)</strong> Suddenly AS requested me to choose a gradle project data to import (?!) as shown in the image<br>\n<a href=\"https://i.stack.imgur.com/nqYHF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqYHF.png\" alt=\"enter image description here\"></a><br>\n<strong>6)</strong> Next message I got was this in the image below.  Project 'simpletask-android' is not a Gradle-based project<br>\n<a href=\"https://i.stack.imgur.com/ibHp5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ibHp5.png\" alt=\"enter image description here\"></a><br>\n<strong>7)</strong> Next point is gradle breaking and telling me<br>\n  \"Error:A problem occurred configuring project ':app'.\"  and</p>\n\n<p>\"22:22 Gradle sync failed: A problem occurred configuring project ':app'.\n            Consult IDE log for more details (Help | Show Log)\"    </p>\n\n<p><a href=\"https://i.stack.imgur.com/nyXZ1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nyXZ1.png\" alt=\"enter image description here\"></a>  </p>\n\n<p>I tried to update Kotlin's version as it says in the Event Log but nothing happened...</p>\n\n<p>I also tried to check the Log as it says and this is what I had:  </p>\n\n<p>2017-03-21 22:22:54,418 [1045087]   WARN - nal.AbstractExternalSystemTask - A problem occurred configuring project ':app'. \ncom.intellij.openapi.externalSystem.model.ExternalSystemException: A problem occurred configuring project ':app'.<br>\n...  </p>\n\n<p>Caused by: org.gradle.api.ProjectConfigurationException: A problem occurred configuring project ':app'.<br>\n...  </p>\n\n<p>Caused by: kotlin.KotlinNullPointerException<br>\n... 64 more  </p>\n\n<p>2017-03-21 22:22:54,423 [1045092]   WARN - ect.sync.idea.ProjectSetUpTask -<br>\n2017-03-21 22:22:54,423 [1045092]   INFO - ect.sync.idea.ProjectSetUpTask - A problem occurred configuring project ':app'.  </p>\n\n<p>How can I fix this?</p>\n\n<p>UPDATE: I uninstalled AS 2.3 and installed 2.2\nEverything worked just fine. Then I thought it was solved and updated AS again into 2.3... So silly... I'm back to the start of this problem, guys...</p>\n"}, {"tags": ["spring", "maven", "kotlin"], "comments": [{"owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 0, "creation_date": 1490175887, "post_id": 42925351, "comment_id": 72991145, "body": "Could you please post the part of the file where the error is occuring?"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "reply_to_user": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 0, "creation_date": 1490176294, "post_id": 42925351, "comment_id": 72991423, "body": "Sorry not sure what file you mean? I get these errors when the kotlin-compiler runs after calling mvn clean install"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "reply_to_user": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 0, "creation_date": 1490179650, "post_id": 42925351, "comment_id": 72993903, "body": "I&#39;ve managed to fix this for now by rolling back to the current release version of Spring. 4.3.7.RELEASE. No idea why I can&#39;t get 5.0 to work though"}, {"owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 0, "creation_date": 1490181255, "post_id": 42925351, "comment_id": 72995054, "body": "<code>[ERROR] (file location):[7,12] Unresolved reference: springframework</code> This error I meant -- what&#39;s on the line where this occurs?"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "reply_to_user": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "edited": false, "score": 0, "creation_date": 1490182882, "post_id": 42925351, "comment_id": 72996175, "body": "Ah right. It was just          import org.springframework.context.annotation.Bean;  There is one of those errors for every reference to a spring object in the code."}, {"owner": {"reputation": 4483, "user_id": 5185646, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vpj4X.jpg?s=128&g=1", "display_name": "Dmitry Senkovich", "link": "https://stackoverflow.com/users/5185646/dmitry-senkovich"}, "edited": false, "score": 0, "creation_date": 1499774744, "post_id": 42925351, "comment_id": 77041614, "body": "@Plog I tried your configuration and it works for me. Could you provide some more details: maven version, project structure? May I take a look at your project?"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "edited": false, "score": 0, "creation_date": 1499778462, "post_id": 42925351, "comment_id": 77044742, "body": "I moved on to use an older version of Spring but the project can be found here: <a href=\"https://github.com/TLDC/KotlinMVCSeleniumShowcase\" rel=\"nofollow noreferrer\">github.com/TLDC/KotlinMVCSeleniumShowcase</a>. Just changing the Spring version in the pom for the kotlin-mvc module back to 5.0.0.M5 gives me the same issue though."}, {"owner": {"reputation": 4483, "user_id": 5185646, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vpj4X.jpg?s=128&g=1", "display_name": "Dmitry Senkovich", "link": "https://stackoverflow.com/users/5185646/dmitry-senkovich"}, "edited": false, "score": 0, "creation_date": 1499931458, "post_id": 42925351, "comment_id": 77121028, "body": "@Plog I&#39;ve checked out your master, changed spring version in the kotlin-mvc project and it built and even started"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "edited": false, "score": 0, "creation_date": 1499940027, "post_id": 42925351, "comment_id": 77127089, "body": "That is... very odd. Something funny must be going on in my local Maven repo"}, {"owner": {"reputation": 4483, "user_id": 5185646, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vpj4X.jpg?s=128&g=1", "display_name": "Dmitry Senkovich", "link": "https://stackoverflow.com/users/5185646/dmitry-senkovich"}, "edited": false, "score": 0, "creation_date": 1499953524, "post_id": 42925351, "comment_id": 77137583, "body": "@Plog What Maven version are you using? Could you please try to drop you local maven repo? And could you answer with <code>@</code> symbol mentioning my name?:)"}, {"owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "reply_to_user": {"reputation": 4483, "user_id": 5185646, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vpj4X.jpg?s=128&g=1", "display_name": "Dmitry Senkovich", "link": "https://stackoverflow.com/users/5185646/dmitry-senkovich"}, "edited": false, "score": 0, "creation_date": 1500367096, "post_id": 42925351, "comment_id": 77291424, "body": "@DmitrySenkovich sorry I didnt know about the @ oops! I really appreciate your help. You helped me realise it was nothing wrong with my pom. I added an answer after investigating. Wont let me award the bounty but I will pay you back in other ways!"}, {"owner": {"reputation": 4483, "user_id": 5185646, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vpj4X.jpg?s=128&g=1", "display_name": "Dmitry Senkovich", "link": "https://stackoverflow.com/users/5185646/dmitry-senkovich"}, "edited": false, "score": 0, "creation_date": 1500367611, "post_id": 42925351, "comment_id": 77291795, "body": "@Plog That&#39;s very nice of you :) glad I was helpful, good luck!"}], "answers": [{"tags": [], "owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "is_accepted": true, "score": 2, "last_activity_date": 1500366986, "creation_date": 1500366986, "answer_id": 45161549, "question_id": 42925351, "link": "https://stackoverflow.com/questions/42925351/kotlin-compiler-returning-unresolved-reference-springframework-in-spring-5-0/45161549#45161549", "title": "Kotlin compiler returning: Unresolved reference: springframework in Spring 5.0", "body": "<p>After help from @DmitrySenkovich in narrowing down that it was not an issue with my pom I investigated what could be going wrong in my local maven repository. I checked out the jars in my .m2 folder and they seemed a bit wrong and missing certain things. I tried wiping the maven repo but they kept being pulled back the same.</p>\n\n<p>This issue was on a corporate machine and after doing some investigation it seems our maven settings.xml were configured to pull down dependencies from a company wide Artifactory and not maven central/any other repo.</p>\n\n<p>Dependencies are supposed to be pulled down into this Arifactory from other repositories as required but for whatever reason (I assume because they were being pulled down from a repo other than maven central) the jars for the milestone Spring builds were not pulling down correctly. By removing these and manually adding the jars to Artifactory I was able to finally resolve the issue.</p>\n"}], "owner": {"reputation": 7635, "user_id": 1722882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3nr6N.png?s=128&g=1", "display_name": "Plog", "link": "https://stackoverflow.com/users/1722882/plog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3054, "favorite_count": 1, "accepted_answer_id": 45161549, "answer_count": 1, "score": 9, "last_activity_date": 1500366986, "creation_date": 1490094489, "last_edit_date": 1592644375, "question_id": 42925351, "link": "https://stackoverflow.com/questions/42925351/kotlin-compiler-returning-unresolved-reference-springframework-in-spring-5-0", "title": "Kotlin compiler returning: Unresolved reference: springframework in Spring 5.0", "body": "<p>I'm trying to start playing around with using Kotlin together with Spring 5.0 however I am having issues with the Kotlin compiler not recognising any reference to Spring:</p>\n<blockquote>\n<p>[ERROR] Failed to execute goal\norg.jetbrains.kotlin:kotlin-maven-plugin:1.1.1:compile (compile) on\nproject kotlin-mvc-project: Compilation failure: Compilation failure:</p>\n<p>[ERROR] (file location):[7,12] Unresolved reference: springframework</p>\n</blockquote>\n<p>I'm using the spring milestone version Spring 5.0.0.M5 and Kotlin version 1.1.1 (on both my kotlin-compiler and IntelliJ Kotlin plugin). There are no compile errors highlighted by the IDE in any of my Kotlin files but running the kotlin-compiler it seems to not see Spring 5.0 at all.</p>\n<p>Does anyone have any ideas how to fix this? I'm using Maven for this project, I've attached my POM for reference:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;kotlin-mvc-project&lt;/groupId&gt;\n&lt;artifactId&gt;kotlin-mvc-project&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n&lt;properties&gt;\n    &lt;kotlin.version&gt;1.1.1&lt;/kotlin.version&gt;\n    &lt;spring.version&gt;5.0.0.M5&lt;/spring.version&gt;\n&lt;/properties&gt;\n\n&lt;repositories&gt;\n&lt;repository&gt;\n    &lt;id&gt;spring-milestones&lt;/id&gt;\n    &lt;name&gt;Spring Milestones&lt;/name&gt;\n    &lt;url&gt;https://repo.spring.io/libs-milestone&lt;/url&gt;\n    &lt;snapshots&gt;\n        &lt;enabled&gt;false&lt;/enabled&gt;\n    &lt;/snapshots&gt;\n&lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-compiler&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\n    &lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;goals&gt; &lt;goal&gt;compile&lt;/goal&gt; &lt;/goals&gt;\n                &lt;/execution&gt;\n\n                &lt;execution&gt;\n                    &lt;id&gt;test-compile&lt;/id&gt;\n                    &lt;goals&gt; &lt;goal&gt;test-compile&lt;/goal&gt; &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 757, "user_id": 4633354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7c290c24f88566771b594bb7c18c0b71?s=128&d=identicon&r=PG&f=1", "display_name": "metis", "link": "https://stackoverflow.com/users/4633354/metis"}, "edited": false, "score": 0, "creation_date": 1582881813, "post_id": 42916801, "comment_id": 106937104, "body": "In addition to other answers, return types are not added to signature of a method, in Java."}], "answers": [{"comments": [{"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1490064574, "post_id": 42917231, "comment_id": 72933821, "body": "But then why does the first Kotlin example compile without this annotation? Does the JVM recognize methods with different return types? According to <a href=\"http://stackoverflow.com/a/16149445/1772342\">this answer</a>, the return type is not part of a method&#39;s signature."}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 0, "creation_date": 1490064913, "post_id": 42917231, "comment_id": 72933911, "body": "Ah, I see. Perhaps Java does not allow identical name/parameter methods with different return types during compilation, but the JVM recognizes them?"}, {"owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "reply_to_user": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 4, "creation_date": 1490069357, "post_id": 42917231, "comment_id": 72935137, "body": "@breandan well yes, the return type is part of the signature, but in the first case it is different for the two methods, (even though the parameter erased type is the same) so the signatures are different. They&#39;re <code>foo(Ljava&#47;util&#47;List;)Ljava&#47;lang&#47;String;</code> and <code>foo(Ljava&#47;util&#47;List;)Ljava&#47;lang&#47;Integer;</code> respectively. Java only considers the parameter types and method name in name clash check so the first example in Java is not compiling. This is more about overloading and anot type erasure and can be easily fixed in the language (like Kotlin did)"}, {"owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "edited": false, "score": 1, "creation_date": 1491151570, "post_id": 42917231, "comment_id": 73415486, "body": "I don&#39;t think Kotlin considers a method&#39;s return type as part of its type signature. For example, it will not allow two methods, <code>@JvmName(&quot;barInt&quot;) fun bar(foo: List&lt;String&gt;): Int</code> and <code>@JvmName(&quot;barString&quot;) fun bar(foo: List&lt;String&gt;): String</code> to be defined inside the same class, even though their JVM signatures are different (<code>barInt(Ljava&#47;util&#47;List;)Ljava&#47;lang&#47;Integer;</code> and <code>barString(Ljava&#47;util&#47;List;)Ljava&#47;lang&#47;String;</code> respectively). However, it will allow <code>@JvmName(&quot;barInt&quot;) fun bar(foo: List&lt;Int&gt;): Int</code> and <code>@JvmName(&quot;barString&quot;) fun bar(foo: List&lt;String&gt;): String</code> in the same class."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 2, "creation_date": 1529001158, "post_id": 42917231, "comment_id": 88730051, "body": "That&#39;s because overload resolution could never choose one of these methods over another (it doesn&#39;t take return type into account), and so neither method could ever be called."}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": true, "score": 19, "last_activity_date": 1490062363, "creation_date": 1490062363, "answer_id": 42917231, "question_id": 42916801, "link": "https://stackoverflow.com/questions/42916801/how-does-erasure-work-in-kotlin/42917231#42917231", "title": "How does erasure work in Kotlin?", "body": "<p>Actually Kotlin knows the difference between the two methods in your example, but jvm will not. That's why it's a \"platform\" clash.</p>\n\n<p>You can make your second example compile by using the <code>@JvmName</code> annotation:</p>\n\n<pre><code>class Foo {\n  @JvmName(\"barString\") fun bar(foo: List&lt;String&gt;): String {\n    return \"\"\n  }\n\n  @JvmName(\"barInt\") fun bar(foo: List&lt;Int&gt;): String {\n    return \"2\";\n  }\n}\n</code></pre>\n\n<p>This annotation exists for this very reason. You can read more in the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#handling-signature-clashes-with-jvmname\" rel=\"noreferrer\">interop documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1535573392, "post_id": 51653302, "comment_id": 91120968, "body": "are you saying that overloaded methods <i>by return type only</i> are allowed in kotlin? cause if you do than this <code>fun go(): String = &quot;&quot;; fun go(): Int = 12;</code> must compile, and it does not"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1535616115, "post_id": 51653302, "comment_id": 91133823, "body": "No, I didn&#39;t want to say that... I rather meant &quot;the constellation shown in the first sample&quot; with &#39;it is allowed&#39;... I will reformulate that one.... Kotlin really has a special way to deal with generics... I don&#39;t get why the following works: <code>fun go() : String = &quot;&quot;; fun &lt;T&gt; go() : Int = 12</code>... I mean... I do not even use <code>T</code> in the second one... on the other hand... if that is valid, why shouldn&#39;t the samples you provided work?"}, {"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 1, "creation_date": 1535616193, "post_id": 51653302, "comment_id": 91133864, "body": "that example with <code>&lt;T&gt;</code> is a question I am working on... :)"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1535616364, "post_id": 51653302, "comment_id": 91133968, "body": "adapted my answer... just let me know whether it is clearer now"}, {"owner": {"reputation": 101145, "user_id": 1059372, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/W6OMC.png?s=128&g=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/1059372/eugene"}, "edited": false, "score": 0, "creation_date": 1535616516, "post_id": 51653302, "comment_id": 91134069, "body": "I don&#39;t have an explanation for it, thus working on the question... probably will post it today"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 5, "last_activity_date": 1540904275, "last_edit_date": 1540904275, "creation_date": 1533211813, "answer_id": 51653302, "question_id": 42916801, "link": "https://stackoverflow.com/questions/42916801/how-does-erasure-work-in-kotlin/51653302#51653302", "title": "How does erasure work in Kotlin?", "body": "<p>While @Streloks answer is correct, I wanted to dig deeper regarding why it works.</p>\n\n<p>The reason why the first variant works, is that it is not prohibited within the Java Byte code. While the Java compiler complains about it, i.e. the <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-8.html#jls-8.4.2\" rel=\"nofollow noreferrer\">Java language specification does not allow it</a>, the Byte code does, as was also documented in <a href=\"https://community.oracle.com/docs/DOC-983207\" rel=\"nofollow noreferrer\">https://community.oracle.com/docs/DOC-983207</a> and in <a href=\"https://www.infoq.com/articles/Java-Bytecode-Bending-the-Rules\" rel=\"nofollow noreferrer\">https://www.infoq.com/articles/Java-Bytecode-Bending-the-Rules</a>. In the Byte code every method call refers the actual return type of the method, which isn't that way when you write the code.</p>\n\n<p>Unfortunately I couldn't find the actual source, why it is that way. </p>\n\n<p>The document regarding <a href=\"https://github.com/JetBrains/kotlin/blob/master/spec-docs/NameResolution.adoc\" rel=\"nofollow noreferrer\">Kotlins name resolution</a> contains some interesting points, but I did not see your actual case there.</p>\n\n<p>What really helped me understand it, was the <a href=\"https://stackoverflow.com/a/52093560/6202869\">answer from @Yole</a> to <a href=\"https://stackoverflow.com/questions/52092214/kotlin-type-erasure-what-is-compilable-and-what-not-and-why\">Kotlin type erasure - why are functions differing only in generic type compilable while those only differing in return type are not?</a>, more precisely that the kotlin compiler will not take the type of the variable into account when deciding which method to call.</p>\n\n<p>So, it was a deliberate design decision that specifying the type on a variable will not influence which method is the one to be called but rather the other way around, i.e. the called method (with or without generic information) influences the type to be used. </p>\n\n<p>Applying the rule on the following samples then makes sense:</p>\n\n<pre><code>fun bar(foo: List&lt;String&gt;) = \"\"    (1)\nfun bar(foo: List&lt;Int&gt;) = 2        (2)\n\nval x = bar(listOf(\"\")) --&gt; uses (1), type of x becomes String\nval y = bar(listOf(2))  --&gt; uses (2), type of y becomes Int\n</code></pre>\n\n<p>Or having a method supplying a generic type but not even using it:</p>\n\n<pre><code>fun bar(foo: List&lt;*&gt;) = \"\"         (3)\nfun &lt;T&gt; bar(foo: List&lt;*&gt;) = 2      (4)\n\nval x = bar(listOf(null))          --&gt; uses (3) as no generic type was specified when calling the method, type of x becomes String\nval y = bar&lt;String&gt;(listOf(null))  --&gt; uses (4) as the generic type was specified, type of y becomes Int\n</code></pre>\n\n<p>And that's also the reason why the following will not work:</p>\n\n<pre><code>fun bar(foo: List&lt;*&gt;) = \"\"\nfun bar(foo: List&lt;*&gt;) = 2\n</code></pre>\n\n<p>This is not compilable as it leads to a conflicting overload as the type of the assigned variable itself is not taken into consideration when trying to identify the method to be called:</p>\n\n<pre><code>val x : String = bar(listOf(null)) // ambiguous, type of x is not relevant\n</code></pre>\n\n<p>Now regarding that name clash: as soon as you use the same name, the same return type and the same parameters (whose generic types are erased), you will actually get the very same method signature in the byte code. That's why <code>@JvmName</code> becomes necessary. With that you actually ensure that there are no name clashes in the byte code.</p>\n"}], "owner": {"reputation": 1561, "user_id": 1772342, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/pvNgt.jpg?s=128&g=1", "display_name": "breandan", "link": "https://stackoverflow.com/users/1772342/breandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3154, "favorite_count": 5, "accepted_answer_id": 42917231, "answer_count": 2, "score": 25, "last_activity_date": 1540904275, "creation_date": 1490059189, "last_edit_date": 1490143743, "question_id": 42916801, "link": "https://stackoverflow.com/questions/42916801/how-does-erasure-work-in-kotlin", "title": "How does erasure work in Kotlin?", "body": "<p>In Kotlin, the following code compiles:</p>\n\n<pre><code>class Foo {\n    fun bar(foo: List&lt;String&gt;): String {\n        return \"\"\n    }\n\n    fun bar(foo: List&lt;Int&gt;): Int {\n        return 2;\n    }\n}\n</code></pre>\n\n<p>This code, however, does not: </p>\n\n<pre><code>class Foo {\n    fun bar(foo: List&lt;String&gt;): String {\n        return \"\"\n    }\n\n    fun bar(foo: List&lt;Int&gt;): String {\n        return \"2\";\n    }\n}\n</code></pre>\n\n<p>Compiling this will cause the following error:</p>\n\n<pre><code>Error:(8, 5) Kotlin: Platform declaration clash: The following declarations have the same JVM signature (foo(Ljava/util/List;)Ljava/lang/String;):\n    fun foo(layout: List&lt;Int&gt;): String\n    fun foo(layout: List&lt;String&gt;): String\n</code></pre>\n\n<p>In Java, neither example will compile: </p>\n\n<pre><code>class Foo {\n    String bar(List&lt;Integer&gt; foo) {\n        return \"\";\n    }\n\n    Integer bar(List&lt;String&gt; foo) {\n        return 2;\n    }\n}\n\nclass Foo {\n    String bar(List&lt;Integer&gt; foo) {\n        return \"\";\n    }\n\n    String bar(List&lt;String&gt; foo) {\n        return \"2\";\n    }\n}\n</code></pre>\n\n<p>Unsurprisingly, both of the prior snippets generate the familiar compiler error:</p>\n\n<pre><code>Error:(13, 12) java: name clash: bar(java.util.List&lt;java.lang.String&gt;) and bar(java.util.List&lt;java.lang.Integer&gt;) have the same erasure\n</code></pre>\n\n<p>What surprises me is that the first Kotlin example works at all, and second, if it works, why does the second Kotlin example fail? Does Kotlin consider a method's return type as part of its signature? Furthermore, why do method signatures in Kotlin respect the full parameter type, in contrast with Java?</p>\n"}, {"tags": ["kotlin", "type-inference"], "answers": [{"comments": [{"owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "edited": false, "score": 0, "creation_date": 1490054742, "post_id": 42915811, "comment_id": 72931252, "body": "Interesting, how is it that you found &quot;smart casts&quot; are determined by the intersection of the types?"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 5, "last_activity_date": 1490052449, "creation_date": 1490052449, "answer_id": 42915811, "question_id": 42914434, "link": "https://stackoverflow.com/questions/42914434/type-inference-for-lambda-parameter-types/42915811#42915811", "title": "Type inference for lambda parameter types", "body": "<p>The type of <code>accumulator</code> here is inferred only from the initial value argument, which is <code>null</code>. That <code>null</code> has type <code>Nothing?</code>. After checking that the type of <code>accumulator</code> is <code>Int</code>, you get its type smartcasted to the intersection of <code>Nothing?</code> and <code>Int</code>, which results in <code>Nothing</code>.</p>\n\n<p>The solution here is to specify either the function type parameters explicitly, or to specify the type of the argument:</p>\n\n<pre><code>a.foldIndexed(null as Int?) { ...\n// or\na.foldIndexed&lt;Int?&gt;(null) { ...\n</code></pre>\n"}], "owner": {"reputation": 8020, "user_id": 823282, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xBNDh.png?s=128&g=1", "display_name": "activedecay", "link": "https://stackoverflow.com/users/823282/activedecay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 42915811, "answer_count": 1, "score": 1, "last_activity_date": 1490092624, "creation_date": 1490045918, "last_edit_date": 1490092624, "question_id": 42914434, "link": "https://stackoverflow.com/questions/42914434/type-inference-for-lambda-parameter-types", "title": "Type inference for lambda parameter types", "body": "<p>Kotlin fails to compile this code because, as the compiler states \"Error: Smart cast to 'Nothing' is impossible, because 'accumulator' is a complex expression\"</p>\n\n<p>Ye olde function is called what you'd expect, i.e., I want to return the indexOfMax -- but what's more important is understanding why the \"smart cast\" failed to cast to <code>accumulator</code> an <code>Int</code></p>\n\n<pre><code>fun indexOfMax(a: IntArray): Int? {\n    return a.foldIndexed(null) { index, accumulator, element -&gt;\n        return if (accumulator is Int) {\n            var i:Int = accumulator\n            return if (accumulator == null) index\n                   else if (element &gt; a[i]) index\n                   else accumulator\n        } else accumulator\n    }\n}\n</code></pre>\n\n<h1>edit</h1>\n\n<p>yes, the accepted answer works! Here's the solution:</p>\n\n<pre><code>fun indexOfMax(a: IntArray): Int? {\n    return a.foldIndexed(null as Int?) { index, accumulator, element -&gt;\n        if (accumulator == null) index\n            else if (element &gt;= a[accumulator]) index\n            else accumulator\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "edited": false, "score": 0, "creation_date": 1490045743, "post_id": 42914018, "comment_id": 72927999, "body": "Thanks for the explanation, that&#39;s exactly what I needed. I do use this quite often, so provided extension function comes very handy."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1490076314, "post_id": 42914018, "comment_id": 72937297, "body": "BTW, the provided explanation is exactly right. Scala maps a set to a set, and it causes bugs if used carelessly"}], "tags": [], "owner": {"reputation": 1693, "user_id": 1044947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1b904f2666dbec4a2715bb62c485bf?s=128&d=identicon&r=PG", "display_name": "Jon Nichols", "link": "https://stackoverflow.com/users/1044947/jon-nichols"}, "is_accepted": true, "score": 23, "last_activity_date": 1490044271, "creation_date": 1490044271, "answer_id": 42914018, "question_id": 42913816, "link": "https://stackoverflow.com/questions/42913816/implicitly-map-to-set-in-kotlin/42914018#42914018", "title": "Implicitly map to set in Kotlin", "body": "<p>Looking at the library code, the only other way to do this would be to call <code>mapTo</code> which takes a destination collection:</p>\n\n<pre><code>oldSet.mapTo(HashSet&lt;String&gt;()) { getNewStringFromOld(id) }\n</code></pre>\n\n<p>I'm not sure the default is wrong. The problem is that <code>map</code> might be used in a way that results in a list of non-unique values. If there was a special version of <code>Set.map()</code> that returned a set, you couldn't use map in that way - any non-unique value would replace the value in the result. I could certainly see the case being made that <code>map</code> should always result in a collection that is the same size as the source collection, and if <code>map</code> created a <code>Set</code>, this wouldn't always be the case.</p>\n\n<p>If you do this often, perhaps just create your own extension function:</p>\n\n<pre><code>public inline fun &lt;T, R&gt; Iterable&lt;T&gt;.mapToSet(transform: (T) -&gt; R): Set&lt;R&gt; {\n  return mapTo(HashSet&lt;R&gt;(), transform)\n}\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 3805929, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g8jRs.jpg?s=128&g=1", "display_name": "arslancharyev31", "link": "https://stackoverflow.com/users/3805929/arslancharyev31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4728, "favorite_count": 1, "accepted_answer_id": 42914018, "answer_count": 1, "score": 19, "last_activity_date": 1490044271, "creation_date": 1490043380, "last_edit_date": 1490043769, "question_id": 42913816, "link": "https://stackoverflow.com/questions/42913816/implicitly-map-to-set-in-kotlin", "title": "Implicitly map to set in Kotlin", "body": "<p>After I map through one Set, I have to explicitly cast it back to Set. For example:</p>\n\n<pre><code>fun getNewSet(oldSet: Set&lt;String&gt;): Set&lt;String&gt; {\nreturn oldSet\n        .map{ getNewStringFromOld(it) }\n        .toSet()\n}\n</code></pre>\n\n<p>What is the proper way to map through the set without explicitly casting it back to Set?</p>\n"}, {"tags": ["reflection", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1490033421, "post_id": 42910791, "comment_id": 72921086, "body": "Please check if this answer helps: <a href=\"http://stackoverflow.com/a/41774675/2196460\">(link)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 5953541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-OAQNSAIo5W8/AAAAAAAAAAI/AAAAAAAAACU/XVjEV5Nia4I/photo.jpg?sz=128", "display_name": "Fawfulcopter", "link": "https://stackoverflow.com/users/5953541/fawfulcopter"}, "edited": false, "score": 1, "creation_date": 1490034379, "post_id": 42910965, "comment_id": 72921594, "body": "I feel like an idiot now because I remember this operator existing but it completely slipped my mind. Sometimes a guy just needs a little push. Thank you."}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 5, "last_activity_date": 1490033730, "last_edit_date": 1490033730, "creation_date": 1490033409, "answer_id": 42910965, "question_id": 42910791, "link": "https://stackoverflow.com/questions/42910791/idiomatic-way-to-invoke-methods-through-reflection-in-kotlin/42910965#42910965", "title": "Idiomatic way to invoke methods through reflection in Kotlin", "body": "<p>You need to add the spread operator <code>*</code> to your call:</p>\n\n<pre><code>fooMethod.invoke(fooClass, *arguments)\n</code></pre>\n\n<p>Using <code>arguments</code> without prefixing it with <code>*</code> will cause a new array of length 1 containing <code>arguments</code> as its single element to be created and passed as <code>args</code> to <code>invoke</code>. Prefixing it with the spread operator causes the <code>arguments</code> array to be passed to <code>invoke</code> as <code>args</code>.</p>\n\n<p>See <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"noreferrer\">Variable number of arguments (Varargs) - Functions - Kotlin Programming Language</a> for more details.</p>\n"}], "owner": {"reputation": 251, "user_id": 5953541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-OAQNSAIo5W8/AAAAAAAAAAI/AAAAAAAAACU/XVjEV5Nia4I/photo.jpg?sz=128", "display_name": "Fawfulcopter", "link": "https://stackoverflow.com/users/5953541/fawfulcopter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3824, "favorite_count": 0, "accepted_answer_id": 42910965, "answer_count": 1, "score": 3, "last_activity_date": 1490033730, "creation_date": 1490032835, "question_id": 42910791, "link": "https://stackoverflow.com/questions/42910791/idiomatic-way-to-invoke-methods-through-reflection-in-kotlin", "title": "Idiomatic way to invoke methods through reflection in Kotlin", "body": "<p>I have a piece of Kotlin code that is trying to reflectively invoke a method using Java's Reflection package:</p>\n\n<pre><code>val arguments = arrayOfNulls&lt;Any&gt;(numberOfParams)\n\n// Populate arguments\n\ntry {\n    fooMethod.invoke(fooClass, arguments)\n} catch (e: Exception) {\n    // Panic\n}\n</code></pre>\n\n<p>It keeps failing with an IllegalArgumentException of \"wrong number of parameters\".</p>\n\n<p>I did some reading on the issue and it seems the spread operator of the <code>invoke()</code> method refuses to unpack <code>Array&lt;Any&gt;</code> because it's not equivalent to <code>Object[]</code>. I could try to use a standard <code>Object[]</code> from Java, but it makes me wonder, is this the only way? Is it the best way? Is there some way I can do this with Kotlin's types?</p>\n\n<p>What is the most idomatic way to achieve what I want in Kotlin?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1490019540, "post_id": 42905011, "comment_id": 72911515, "body": "Sound like the problem from this issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-16888\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-16888</a> (already fixed in Kotlin 1.1.2)."}, {"owner": {"reputation": 882, "user_id": 2300810, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb1bf99983af1b449d0bffcc96facfa?s=128&d=identicon&r=PG", "display_name": "zhywu", "link": "https://stackoverflow.com/users/2300810/zhywu"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1490022802, "post_id": 42905011, "comment_id": 72913979, "body": "@yanex, I&#39;ve tried the dev build with the fix, I&#39;m still getting the same error"}, {"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 0, "creation_date": 1490037479, "post_id": 42905011, "comment_id": 72923417, "body": "Anyway, it sounds like a bug. Can you please create a new issue with some additional details in our bug tracker (<a href=\"http://kotl.in/issue\" rel=\"nofollow noreferrer\">kotl.in/issue</a>)?"}, {"owner": {"reputation": 882, "user_id": 2300810, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb1bf99983af1b449d0bffcc96facfa?s=128&d=identicon&r=PG", "display_name": "zhywu", "link": "https://stackoverflow.com/users/2300810/zhywu"}, "reply_to_user": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 1, "creation_date": 1490088561, "post_id": 42905011, "comment_id": 72943543, "body": "@yanex, <a href=\"https://youtrack.jetbrains.com/issue/KT-16965\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-16965</a>"}], "owner": {"reputation": 882, "user_id": 2300810, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb1bf99983af1b449d0bffcc96facfa?s=128&d=identicon&r=PG", "display_name": "zhywu", "link": "https://stackoverflow.com/users/2300810/zhywu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490016916, "creation_date": 1490016916, "question_id": 42905011, "link": "https://stackoverflow.com/questions/42905011/errorkotlin-multiple-values-are-not-allowed-for-plugin-option-org-jetbrains-ko", "title": "Error:Kotlin: Multiple values are not allowed for plugin option org.jetbrains.kotlin.kapt:output", "body": "<p>I have a fairly big project used kotlin version 1.0.5 and dagger1, this is the error that I'm getting after kotlin upgrade to 1.1.1 when I build the project from within the intellij IDE by clicking the <strong><em>build project</em></strong> button:</p>\n\n<pre><code>Error:Kotlin: Multiple values are not allowed for plugin option org.jetbrains.kotlin.kapt:output\nPlugin \"org.jetbrains.kotlin.kapt\" usage:\n  annotations &lt;path&gt;         Annotation filter regular expressions, separated by commas\n  output &lt;path&gt;              File in which annotated declarations will be placed\n  stubs &lt;path&gt;               Output path for stubs\n  inherited &lt;true/false&gt;     True if collecting Kotlin class names for inherited annotations is needed\n</code></pre>\n\n<p>Strangely the command line gradle build works just fine without any complains.</p>\n\n<p>Is it a intellij kotlin plugin bug?</p>\n"}, {"tags": ["list", "insert", "kotlin", "prepend", "cons"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1489957575, "post_id": 42892197, "comment_id": 72885715, "body": "Are lists linked? It can be an expensive operation to prepend if the structure isn&#39;t made for it."}, {"owner": {"reputation": 323, "user_id": 4673253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Aqn3B-sdak/AAAAAAAAAAI/AAAAAAAAABI/5Ik85KlgIpw/photo.jpg?sz=128", "display_name": "Columpio", "link": "https://stackoverflow.com/users/4673253/columpio"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1489958068, "post_id": 42892197, "comment_id": 72885891, "body": "@Carcigenicate They should be <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html\" rel=\"nofollow noreferrer\">Kotlin Standart Library</a>."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1489982401, "post_id": 42892197, "comment_id": 72891969, "body": "@Columpio &quot;They should be [linked lists]&quot; - why do you think so? Kotlin&#39;s stdlib uses linked lists very rarely. The link you provided has no info on the issue."}, {"owner": {"reputation": 79, "user_id": 10784151, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IRF8ewUvTIE/AAAAAAAAAAI/AAAAAAAAABI/eQBIqHaMffU/photo.jpg?sz=128", "display_name": "TOUSIF AHAMMAD", "link": "https://stackoverflow.com/users/10784151/tousif-ahammad"}, "edited": false, "score": 0, "creation_date": 1615976277, "post_id": 42892197, "comment_id": 117856235, "body": "check this for the mutable list: <a href=\"https://stackoverflow.com/a/66668823/10784151\">stackoverflow.com/a/66668823/10784151</a>"}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 4673253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Aqn3B-sdak/AAAAAAAAAAI/AAAAAAAAABI/5Ik85KlgIpw/photo.jpg?sz=128", "display_name": "Columpio", "link": "https://stackoverflow.com/users/4673253/columpio"}, "edited": false, "score": 0, "creation_date": 1489958147, "post_id": 42892284, "comment_id": 72885923, "body": "<b>prepend</b> an element, not append"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1489958165, "post_id": 42892284, "comment_id": 72885927, "body": "Ya, this doesn&#39;t really answer the question."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1489982021, "post_id": 42892284, "comment_id": 72891890, "body": "In Haskell the most efficient operation is prepending, so that is what people do. In Kotlin appending is more efficient in most cases, that&#39;s why it is much more common."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1489982201, "post_id": 42892284, "comment_id": 72891919, "body": "I don&#39;t see a big philosophical difference between prepending and appending. If you use a list as a stack (as you do in Haskell), then you get the same result regardless of the end of the list you use. The order changes, but who cares."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": -4, "last_activity_date": 1489957670, "creation_date": 1489957670, "answer_id": 42892284, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/42892284#42892284", "title": "Kotlin prepend element", "body": "<p>I'm not entirely sure what you want to do, so please try one of the following.</p>\n\n<p>Mutating list:</p>\n\n<pre><code>val list = mutableListOf(3, 2)\nlist.add(1)\n</code></pre>\n\n<p>Copping an immutable list:</p>\n\n<pre><code>var list = listOf(3, 2)\nlist = list + 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 323, "user_id": 4673253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Aqn3B-sdak/AAAAAAAAAAI/AAAAAAAAABI/5Ik85KlgIpw/photo.jpg?sz=128", "display_name": "Columpio", "link": "https://stackoverflow.com/users/4673253/columpio"}, "edited": false, "score": 0, "creation_date": 1489960503, "post_id": 42892605, "comment_id": 72886718, "body": "Is there any method to actually <i>return</i> new List? <code>push</code> will change the list, I don&#39;t want that"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 323, "user_id": 4673253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Aqn3B-sdak/AAAAAAAAAAI/AAAAAAAAABI/5Ik85KlgIpw/photo.jpg?sz=128", "display_name": "Columpio", "link": "https://stackoverflow.com/users/4673253/columpio"}, "edited": false, "score": 0, "creation_date": 1489975917, "post_id": 42892605, "comment_id": 72890504, "body": "@Columpio For now you have to use third-party collection library to get efficient immutable collections"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 9, "last_activity_date": 1489959872, "last_edit_date": 1489959872, "creation_date": 1489959481, "answer_id": 42892605, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/42892605#42892605", "title": "Kotlin prepend element", "body": "<p>Any class which implements <code>Deque</code> will suitable for you, for example <code>LinkedList</code>:</p>\n\n<pre><code>val linkedList = LinkedList(listOf(2, 3))\nlinkedList.push(1)\nprintln(linkedList) // [1, 2, 3]\n</code></pre>\n\n<p>Creating lists throught constructor <code>LinkedList(listOf(2, 3))</code> in many places can be annoying, so feel free to write factory method:</p>\n\n<pre><code>fun &lt;T&gt; linkedListOf(vararg elements: T): LinkedList&lt;T&gt; {\n    return LinkedList&lt;T&gt;(elements.toList())\n}\n\n// Usage:\nval list = linkedListOf(2, 3)\nlist.push(1)\nprintln(list) // [1, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "edited": false, "score": 0, "creation_date": 1529598823, "post_id": 42893371, "comment_id": 88943268, "body": "Beware that performance would suffer as Kotlin lists are not optimized for such operations unlike Scala ones."}], "tags": [], "owner": {"reputation": 45871, "user_id": 2788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28acae7d7979a1cd603921a198532e7d?s=128&d=identicon&r=PG", "display_name": "Strelok", "link": "https://stackoverflow.com/users/2788/strelok"}, "is_accepted": false, "score": 19, "last_activity_date": 1489965266, "last_edit_date": 1495540443, "creation_date": 1489964406, "answer_id": 42893371, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/42893371#42893371", "title": "Kotlin prepend element", "body": "<p>I think the easiest would be to write:</p>\n\n<pre><code>var list = listOf(2,3)\nprintln(list) // [2, 3]\nlist = listOf(1) + list\nprintln(list) // [1, 2, 3]\n</code></pre>\n\n<p>There is no specific <code>tail</code> implementation, but you can call .drop(1) to get the same. You can make this <code>head\\tail</code> more generic by writing these extension properties:</p>\n\n<pre><code>val &lt;T&gt; List&lt;T&gt;.tail: List&lt;T&gt;\n  get() = drop(1)\n\nval &lt;T&gt; List&lt;T&gt;.head: T\n  get() = first()\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>val list = listOf(1, 2, 3)\nval head = list.head\nval tail = list.tail\n</code></pre>\n\n<p>Some more info: <a href=\"https://stackoverflow.com/questions/35808022/kotlin-list-tail-function\">Kotlin List tail function</a></p>\n"}, {"tags": [], "owner": {"reputation": 2416, "user_id": 168722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2733344efeaed9e345f76193f94e9ca7?s=128&d=identicon&r=PG", "display_name": "xap4o", "link": "https://stackoverflow.com/users/168722/xap4o"}, "is_accepted": false, "score": 0, "last_activity_date": 1490036402, "last_edit_date": 1490036402, "creation_date": 1490034173, "answer_id": 42911198, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/42911198#42911198", "title": "Kotlin prepend element", "body": "<p>To be as close to Lisp as possible consider using immutable linked list.</p>\n\n<p>You can use <a href=\"https://github.com/hrldcpr/pcollections\" rel=\"nofollow noreferrer\" title=\"pcollections\">pcollections</a></p>\n\n<pre><code>val list = ConsPStack.from(listOf(2, 3))\nval newList = list + 1\nprintln(list)  // [2, 3]\nprintln(newList) // [1, 2, 3]\n</code></pre>\n\n<p>Head:</p>\n\n<pre><code>list.first() // 1\nlist[0] // 1\n</code></pre>\n\n<p>(unfortunately this thing needs one allocation)</p>\n\n<p>Tail: </p>\n\n<pre><code>list - 0 // [2, 3]\nlist.subList(1) // [2, 3]  \n</code></pre>\n\n<p>Looks rather ugly. </p>\n\n<p>Hopefully we'll get better API when <a href=\"https://github.com/Kotlin/kotlinx.collections.immutable\" rel=\"nofollow noreferrer\" title=\"kotlinx.collections.immutable\">kotlinx.collections.immutable</a> will be ready. It's an effort to create standard Kotlin immutable collections (not just read-only ones that we currently have). As of now this project is still at very early stage (I was unable to find structure that supports efficient prepend/head/tail there)   </p>\n"}, {"tags": [], "owner": {"reputation": 617, "user_id": 7850685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/778dee53b5ec97bfe389db257054adef?s=128&d=identicon&r=PG&f=1", "display_name": "Luzian", "link": "https://stackoverflow.com/users/7850685/luzian"}, "is_accepted": false, "score": 5, "last_activity_date": 1529578971, "creation_date": 1529578971, "answer_id": 50966931, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/50966931#50966931", "title": "Kotlin prepend element", "body": "<p>Simple, just wrap the element to prepend in a <code>List</code> and then use the <code>+</code> operator (or <code>List.plus()</code>) to concatenate the two <code>Lists</code>:</p>\n\n<pre><code>val list1 = listOf(2, 3)        // [2, 3]\nval list2 = listOf(1) + list1   // [1, 2, 3]\n</code></pre>\n\n<p>For your second question, in Kotlin 1.2 there are:</p>\n\n<pre><code>List.first()\nList.last()\n</code></pre>\n\n<p>Both are O(1)</p>\n"}, {"comments": [{"owner": {"reputation": 36742, "user_id": 413414, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g59ew.jpg?s=128&g=1", "display_name": "Christopher Perry", "link": "https://stackoverflow.com/users/413414/christopher-perry"}, "edited": false, "score": 0, "creation_date": 1604252642, "post_id": 54923010, "comment_id": 114284285, "body": "This is really nice and what I was expecting Kotlin to have since I also know Scala. It seems like a very natural way to write code being able to append / prepend a single item to a collection."}], "tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1551441234, "last_edit_date": 1551441234, "creation_date": 1551348253, "answer_id": 54923010, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/54923010#54923010", "title": "Kotlin prepend element", "body": "<p>If you do that often in your code for some reason, consider adding an extension operator method such as:</p>\n\n<pre><code>operator fun &lt;T&gt; T.plus(tail: List&lt;T&gt;): List&lt;T&gt; {\n    val list = ArrayList&lt;T&gt;(1 + tail.size)\n\n    list.add(this)\n    list.addAll(tail)\n\n    return list\n}\n</code></pre>\n\n<p>Then your code could work Scala-like: <code>1 + listOf(2, 3)</code></p>\n\n<p>Another way to achieve the same behaviour, shorter but sacrifices some memory:</p>\n\n<pre><code>operator fun &lt;T&gt; T.plus(tail: List&lt;T&gt;): List&lt;T&gt; {\n    return mutableListOf(this).apply {\n        addAll(tail)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 686, "user_id": 9620805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bpcth.jpg?s=128&g=1", "display_name": "Fatih", "link": "https://stackoverflow.com/users/9620805/fatih"}, "is_accepted": false, "score": 4, "last_activity_date": 1571651696, "creation_date": 1571651696, "answer_id": 58483847, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element/58483847#58483847", "title": "Kotlin prepend element", "body": "<p>This could be done easily with extension functions as below</p>\n\n<h2>Prepending element</h2>\n\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.prepend(element: T) {\n    add(0, element)\n}\n</code></pre>\n\n<h2>Prepending list</h2>\n\n<pre><code>fun &lt;T&gt; MutableList&lt;T&gt;.prependAll(elements: List&lt;T&gt;) {\n    addAll(0, elements)\n}\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 4673253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_Aqn3B-sdak/AAAAAAAAAAI/AAAAAAAAABI/5Ik85KlgIpw/photo.jpg?sz=128", "display_name": "Columpio", "link": "https://stackoverflow.com/users/4673253/columpio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15215, "favorite_count": 3, "accepted_answer_id": 42892605, "answer_count": 7, "score": 22, "last_activity_date": 1586876579, "creation_date": 1489957219, "last_edit_date": 1489958300, "question_id": 42892197, "link": "https://stackoverflow.com/questions/42892197/kotlin-prepend-element", "title": "Kotlin prepend element", "body": "<p>I am searching for Kotlin alternative to:<br>\n    <code>(cons 1 '(2 3))</code> in lisp or<br>\n    <code>1 : [2, 3]</code> in haskell or<br>\n    <code>1 :: List(2, 3)</code> in scala,<br>\n<strong>(which all result in sth like [1, 2, 3])</strong><br>\nso I can prepend an element to a <code>List&lt;T&gt;</code> (or any other list you can offer).</p>\n\n<p>It will also be fine if one could provide O(1) <code>head</code> and <code>tail</code> Kotlin alternatives (I've found just <code>first()</code>)</p>\n"}, {"tags": ["lambda", "kotlin", "data-class"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 5, "last_activity_date": 1512453962, "last_edit_date": 1512453962, "creation_date": 1489943170, "answer_id": 42889478, "question_id": 42889438, "link": "https://stackoverflow.com/questions/42889438/function-to-lambda-expression/42889478#42889478", "title": "Function to lambda expression", "body": "<p>I think you're looking for the <code>map</code> operation:</p>\n\n<pre><code>data.map { a -&gt; a[key].asString }\n</code></pre>\n\n<p>Or you can use the default parameter name <code>it</code>:</p>\n\n<pre><code>data.map { it[key].asString }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 4671053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8ccda64628e742a41c7bcf36fee1c0bb?s=128&d=identicon&r=PG&f=1", "display_name": "allnex", "link": "https://stackoverflow.com/users/4671053/allnex"}, "edited": false, "score": 1, "creation_date": 1489944550, "post_id": 42889512, "comment_id": 72881166, "body": "Thank you very much too!"}], "tags": [], "owner": {"reputation": 26172, "user_id": 49746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0IAAg.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/49746/todd"}, "is_accepted": false, "score": 3, "last_activity_date": 1489943339, "creation_date": 1489943339, "answer_id": 42889512, "question_id": 42889438, "link": "https://stackoverflow.com/questions/42889438/function-to-lambda-expression/42889512#42889512", "title": "Function to lambda expression", "body": "<p>If you use the <code>map</code> function, you can write this as a single expression...</p>\n\n<pre><code>private fun arrayToList(data: JsonArray, key: String): List&lt;String&gt; = \n    data.map { it[key].asString }\n</code></pre>\n\n<p>The <code>map</code> function takes an argument of one type and turns it into another. I'm also taking advantage of the fact that the default element name in Kotlin is called <code>it</code>, so I don't have to define something explicitly like I would in (say) Java. So what this says is \"for each object in <code>data</code>, get the <code>key</code> value and call <code>.asString</code> on it. This is automatically converted to a <code>List</code>.</p>\n"}], "owner": {"reputation": 195, "user_id": 4671053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8ccda64628e742a41c7bcf36fee1c0bb?s=128&d=identicon&r=PG&f=1", "display_name": "allnex", "link": "https://stackoverflow.com/users/4671053/allnex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 42889478, "answer_count": 2, "score": 2, "last_activity_date": 1512453962, "creation_date": 1489942945, "last_edit_date": 1489948953, "question_id": 42889438, "link": "https://stackoverflow.com/questions/42889438/function-to-lambda-expression", "title": "Function to lambda expression", "body": "<p>I have a data class and I need to initialize some <code>List&lt;String&gt;</code>. I need to get the values of a JsonArray (I'm using Gson).</p>\n\n<p>I made this function:</p>\n\n<pre><code>private fun arrayToList(data: JsonArray, key: String): List&lt;String&gt; {\n    val list = mutableListOf&lt;String&gt;()\n\n    data.forEach { a -&gt;\n        list.add(a[key].asString)\n    }\n\n    return list\n}\n</code></pre>\n\n<p>How can I convert to work as a lambda expression?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["kotlin", "kotlin-reflect"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 4, "last_activity_date": 1489840252, "creation_date": 1489840252, "answer_id": 42874438, "question_id": 42874190, "link": "https://stackoverflow.com/questions/42874190/reference-to-kotlin-class-property-setter-as-function/42874438#42874438", "title": "Reference to Kotlin class property setter as function", "body": "<p>The return type of <code>t::x</code> is <code>KMutableProperty0&lt;String&gt;</code>, which has a <code>setter</code> property, so you can do this:</p>\n\n<pre><code>val setter: (String) -&gt; Unit = t::x.setter\nsetter(\"B\")\nprintln(getter()) // prints B now\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 1, "creation_date": 1489840893, "post_id": 42874442, "comment_id": 72853301, "body": "Interestingly, this requires an additional dependency - <code>kotlin-reflect</code>"}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1489841296, "post_id": 42874442, "comment_id": 72853425, "body": "Is the code generated from <code>val getter: () -&gt; String = t::x</code> differs from <code>val getter: () -&gt; String = t::x.getter</code>"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489842041, "post_id": 42874442, "comment_id": 72853669, "body": "It is different, the latter has an extra method invocation on the <code>KMutableProperty0</code> interface (as you&#39;d expect, this is what the code says). You can check this yourself by using <code>Show Kotlin bytecode</code> in IntelliJ (it&#39;s the <code>Tools -&gt; Kotlin</code> menu)."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1489843447, "post_id": 42874442, "comment_id": 72854117, "body": "Shame about asymmetry between ref to getter and ref to setter"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 1, "creation_date": 1489849644, "post_id": 42874442, "comment_id": 72856042, "body": "For the record, see the suggested usage here <a href=\"https://kotlinlang.org/docs/reference/reflection.html#bound-function-and-property-references-since-11\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a> , which is symmetrical."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489957896, "post_id": 42874442, "comment_id": 72885830, "body": "Thank you @zsmb13 , in my example <code>t::x</code> is already a bound property  .I don&#39;t see how the link you provided makes the usage symmetrical."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489958198, "post_id": 42874442, "comment_id": 72885936, "body": "Well, as in the example uses <code>set</code> and <code>get</code> on the bound property instead of storing the getter and setter in a variable."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 10, "last_activity_date": 1489840267, "creation_date": 1489840267, "answer_id": 42874442, "question_id": 42874190, "link": "https://stackoverflow.com/questions/42874190/reference-to-kotlin-class-property-setter-as-function/42874442#42874442", "title": "Reference to Kotlin class property setter as function", "body": "<p>Use <code>t::x.setter</code>, it returns a <code>MutableProperty0.Setter&lt;T&gt;</code>, which can be used as a function:</p>\n\n<pre><code>val setter = t::x.setter\nsetter(\"abc\")\n</code></pre>\n"}], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1842, "favorite_count": 1, "accepted_answer_id": 42874442, "answer_count": 2, "score": 11, "last_activity_date": 1544623064, "creation_date": 1489838692, "last_edit_date": 1544623064, "question_id": 42874190, "link": "https://stackoverflow.com/questions/42874190/reference-to-kotlin-class-property-setter-as-function", "title": "Reference to Kotlin class property setter as function", "body": "<p>In the example below, <code>t::x</code> returns a reference to a property getter. How do I obtain the same for a setter? </p>\n\n<pre><code>class Test(var x: String) {}\n\nfun main(args: Array&lt;String&gt;) {\n    val t = Test(\"A\")\n\n    val getter: () -&gt; String = t::x\n    println(getter()) // prints A\n\n    val setter: (String) -&gt; Unit = ????\n}\n</code></pre>\n"}, {"tags": ["java", "functional-programming", "hashmap", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 6825, "user_id": 1262865, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1c93afaf48cdb37ee73b67acb533e63c?s=128&d=identicon&r=PG", "display_name": "john16384", "link": "https://stackoverflow.com/users/1262865/john16384"}, "is_accepted": false, "score": 0, "last_activity_date": 1489829840, "creation_date": 1489829840, "answer_id": 42872702, "question_id": 42872407, "link": "https://stackoverflow.com/questions/42872407/how-do-i-use-filtervalues-on-nested-hashmap-iteration-in-kotlin/42872702#42872702", "title": "How do I use `filterValues` on Nested Hashmap Iteration in Kotlin?", "body": "<p>The problem here is that this is a stateful filter, meaning that the decision to put an element in the final result depends on previous elements processed.  Functional filters should be stateless, so the decision to add an element is the same regardless of the order the elements are processed.</p>\n\n<p>However, I think the whole logic is a bit verbose.</p>\n\n<p>You could rewrite the Java version like this:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; pairs = new LinkedHashMap&lt;&gt;();\n\nfor (Map.Entry&lt;String, Integer&gt; oldImages : startingImageMap.entrySet()) {\n  Integer oldImageVal = oldImages.getValue();\n  Integer newImageVal = finalImageMap.get(oldImages.getKey());\n\n  if (newImageVal != null) {\n    boolean containsNewType = pairs.containsKey(newImageVal) &amp;&amp;\n        pairs.get(newImageVal).intValue() == oldImageVal.intValue();\n\n    if (!containsNewType) {\n      pairs.put(oldImageVal, newImageVal);\n    }\n  }\n}\n\nreturn pairs;\n</code></pre>\n\n<p>Which is much shorter and does the same thing.</p>\n\n<p>It is however still stateful due the external map <code>pairs</code> being checked with <code>containsKey</code>.</p>\n\n<p>I'm wondering though what the expected output of the function will be in this case:</p>\n\n<pre><code>   old       new\n  A: 1       A: 5\n  B: 2       B: 2\n  C: 3       C: 3\n  D: 4       E: 8\n  H: 9       F: 9\n             G: 3\n</code></pre>\n\n<p>Could you add the expected result?  I have the impression the function is flawed.</p>\n"}], "owner": {"reputation": 5176, "user_id": 923920, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/j5nnb.jpg?s=128&g=1", "display_name": "Phileo99", "link": "https://stackoverflow.com/users/923920/phileo99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 584, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1489943619, "creation_date": 1489827894, "last_edit_date": 1489943619, "question_id": 42872407, "link": "https://stackoverflow.com/questions/42872407/how-do-i-use-filtervalues-on-nested-hashmap-iteration-in-kotlin", "title": "How do I use `filterValues` on Nested Hashmap Iteration in Kotlin?", "body": "<p>I am trying to iterate through a nested Hashmap in a more functional style using Kotlin.  In particular, I have two HashMap instances (both of type <code>Map&lt;String, Integer&gt;</code>) and I want to match up their values based on some criteria.  Here is the Java method of what I want to achieve:</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; pairs = new LinkedHashMap&lt;&gt;();\nfor (Map.Entry&lt;String, Integer&gt; oldImages : startingImageMap.entrySet()) {\n    for (Map.Entry&lt;String, Integer&gt; newImages : finalImageMap.entrySet()) {\n        Integer oldImageVal = oldImages.getValue();\n        Integer newImageVal = newImages.getValue();\n\n        boolean containsNewType = pairs.containsKey(newImageVal) &amp;&amp;\n                pairs.get(newImageVal).intValue() == oldImageVal.intValue();\n\n        boolean urlsMatch = newImages.getKey().equals(oldImages.getKey());\n\n        if (!containsNewType &amp;&amp; urlsMatch) {\n            pairs.put(oldImageVal, newImageVal);\n        }\n    }\n}\n\nreturn pairs;\n</code></pre>\n\n<p>Here is my attempt at functional equivalent in Kotlin:</p>\n\n<pre><code>private val swapPairs: Map&lt;Int, Int&gt;\n    get() {\n        val pairs = LinkedHashMap&lt;Int, Int&gt;()\n\n        startingImageMap.forEach {\n            val finalImageMap = finalImageMap.filterValues {\n                val containsNewType = pairs.containsKey(it) &amp;&amp; pairs[it] == startingImageMap[it]\n                val urlMatch = it == startingImageMap[it]\n\n                return !containsNewType &amp;&amp; urlsMatch\n            }.values.first()     \n        }\n        return pairs\n    }\n</code></pre>\n\n<p>I am stuck on how to do this properly using <code>filterValues</code>.\nWhat does the correct solution look like in Kotlin?</p>\n"}, {"tags": ["android", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1489797751, "post_id": 42869086, "comment_id": 72844374, "body": "Could you also specify, what version of Kotlin do you use?"}, {"owner": {"reputation": 1513, "user_id": 2762990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ApyxK.png?s=128&g=1", "display_name": "rolandl", "link": "https://stackoverflow.com/users/2762990/rolandl"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1489797795, "post_id": 42869086, "comment_id": 72844386, "body": "I am using Kotlin 1.1.1. I have edited my post."}, {"owner": {"reputation": 24739, "user_id": 1790644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f1a2a40ddbc52508d5b53e9879961251?s=128&d=identicon&r=PG", "display_name": "Matt Clark", "link": "https://stackoverflow.com/users/1790644/matt-clark"}, "edited": false, "score": 0, "creation_date": 1489798125, "post_id": 42869086, "comment_id": 72844454, "body": "Can you post more context, like your includes and variable definitions? Can you, somehow fetch the version in code before the crash? If you are getting a no class-def error, you are either distributing your binary without the required dependencies, or are running with a different version then you built with."}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 776388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b95e97a36a099404882a1c7ee439a01?s=128&d=identicon&r=PG", "display_name": "iscariot", "link": "https://stackoverflow.com/users/776388/iscariot"}, "edited": false, "score": 0, "creation_date": 1533895033, "post_id": 42869245, "comment_id": 90524808, "body": "also, you need to disable instant run!"}, {"owner": {"reputation": 1051, "user_id": 1439489, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/938c2fb421b08ae42c89f97e2a7c86a2?s=128&d=identicon&r=PG", "display_name": "dvkch", "link": "https://stackoverflow.com/users/1439489/dvkch"}, "edited": false, "score": 0, "creation_date": 1536838624, "post_id": 42869245, "comment_id": 91572717, "body": "does anybody knows of a compiler flag that would throw an error or at least a warning when using the BiConsumer function from Java 8 instead of the Kotlin one? It adds crashes in my app and I&#39;d like to make sure that I never use the wrong version again"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 1051, "user_id": 1439489, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/938c2fb421b08ae42c89f97e2a7c86a2?s=128&d=identicon&r=PG", "display_name": "dvkch", "link": "https://stackoverflow.com/users/1439489/dvkch"}, "edited": false, "score": 0, "creation_date": 1536870833, "post_id": 42869245, "comment_id": 91590424, "body": "@dvkch That <code>forEach</code> function from Java 8 should be caught by linter in Android Studio starting from 3.2. See this issue <a href=\"https://issuetracker.google.com/issues/80464232\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/80464232</a>"}, {"owner": {"reputation": 1051, "user_id": 1439489, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/938c2fb421b08ae42c89f97e2a7c86a2?s=128&d=identicon&r=PG", "display_name": "dvkch", "link": "https://stackoverflow.com/users/1439489/dvkch"}, "edited": false, "score": 0, "creation_date": 1536934187, "post_id": 42869245, "comment_id": 91614381, "body": "@ilya it is indeed underlined in red but doesn&#39;t prevent compilation in 3.2 RC3. that&#39;s a start, probably have to enable something somewhere. thanks for the tip!"}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 74, "last_activity_date": 1489802662, "last_edit_date": 1489802662, "creation_date": 1489798487, "answer_id": 42869245, "question_id": 42869086, "link": "https://stackoverflow.com/questions/42869086/java-lang-noclassdeffounderror-inlinedforeachlambda1-in-kotlin/42869245#42869245", "title": "java.lang.NoClassDefFoundError $$inlined$forEach$lambda$1 in Kotlin", "body": "<p>After reading Dan Lew's <a href=\"http://blog.danlew.net/2017/03/16/kotlin-puzzler-whose-line-is-it-anyways/\" rel=\"noreferrer\">post</a> a couple days ago, I'll make a suggestion that this can be caused by using <code>Map.forEach { k, v -&gt; }</code> method from Java 8, which may be unavailable in Android runtime.</p>\n\n<p>You could try to use another <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/for-each.html\" rel=\"noreferrer\">forEach</a> with the single entry parameter that comes from the Kotlin standard library:</p>\n\n<pre><code>mapOfreminders.forEach { (_, finalReminders) -&gt; }\n</code></pre>\n\n<p>Here the <em>parentheses</em> are used to destructure entry parameter into two variables: ignored key and <code>finalReminders</code> value.</p>\n"}, {"tags": [], "owner": {"reputation": 451, "user_id": 5390707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eMri2.jpg?s=128&g=1", "display_name": "theThapa", "link": "https://stackoverflow.com/users/5390707/thethapa"}, "is_accepted": false, "score": 1, "last_activity_date": 1554924953, "last_edit_date": 1554924953, "creation_date": 1523642701, "answer_id": 49822820, "question_id": 42869086, "link": "https://stackoverflow.com/questions/42869086/java-lang-noclassdeffounderror-inlinedforeachlambda1-in-kotlin/49822820#49822820", "title": "java.lang.NoClassDefFoundError $$inlined$forEach$lambda$1 in Kotlin", "body": "<p>Seems like this particular error doesn't happen on all phones. I faced a similar issue with Samsung Galaxy S7, where the app was crashing with ClassNotFoundError. This solution works if we still want to use lambda. \nElse replacing the lambda with <code>for ((key, value) in map) { ... }</code>also works. </p>\n"}, {"tags": [], "owner": {"reputation": 971, "user_id": 8293583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NvoEO.jpg?s=128&g=1", "display_name": "zhangliang", "link": "https://stackoverflow.com/users/8293583/zhangliang"}, "is_accepted": false, "score": 12, "last_activity_date": 1531879930, "last_edit_date": 1531879930, "creation_date": 1531878339, "answer_id": 51392397, "question_id": 42869086, "link": "https://stackoverflow.com/questions/42869086/java-lang-noclassdeffounderror-inlinedforeachlambda1-in-kotlin/51392397#51392397", "title": "java.lang.NoClassDefFoundError $$inlined$forEach$lambda$1 in Kotlin", "body": "<p>I encountered this problem<code>java.lang.NoClassDefFoundError</code> on Android 6.0 and 6.0.1 by using</p>\n\n<pre><code>Map.forEach {key ,value -&gt; }\n</code></pre>\n\n<p>this call java 8 api.</p>\n\n<p>And then, I solved this problem by adding brackets to parameter:</p>\n\n<pre><code>Map.forEach {(key ,value) -&gt; }\n</code></pre>\n\n<p>this call kotlin api</p>\n"}], "owner": {"reputation": 1513, "user_id": 2762990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ApyxK.png?s=128&g=1", "display_name": "rolandl", "link": "https://stackoverflow.com/users/2762990/rolandl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4208, "favorite_count": 7, "accepted_answer_id": 42869245, "answer_count": 3, "score": 36, "last_activity_date": 1554924953, "creation_date": 1489797014, "last_edit_date": 1489797810, "question_id": 42869086, "link": "https://stackoverflow.com/questions/42869086/java-lang-noclassdeffounderror-inlinedforeachlambda1-in-kotlin", "title": "java.lang.NoClassDefFoundError $$inlined$forEach$lambda$1 in Kotlin", "body": "<p>I am currently working on an Android application with Kotlin in version 1.1.1</p>\n\n<p>In my code, I have imbrication of several <code>forEach</code> structures in order to read several <code>MutableList</code> and <code>MutableMap</code>.</p>\n\n<p>Unfortunately, my app crashes with the following stacktrace :</p>\n\n<blockquote>\n  <p>java.lang.NoClassDefFoundError:\n  com.package.fragment.ReminderAddFragment$onRetrieveBusinessObjects$$inlined$forEach$lambda$1\n  at\n  com.package.fragment.ReminderAddFragment.onRetrieveBusinessObjects(ReminderAddFragment.kt:275)\n  at\n  com.smartnsoft.droid4me.app.Droid4mizer.onRetrieveBusinessObjects(Droid4mizer.java:552)\n  at\n  com.smartnsoft.droid4me.app.Droid4mizer.onRetrieveBusinessObjectsInternal(Droid4mizer.java:606)\n  at\n  com.smartnsoft.droid4me.app.Droid4mizer.access$000(Droid4mizer.java:46)\n  at com.smartnsoft.droid4me.app.Droid4mizer$1.run(Droid4mizer.java:197)\n  at\n  java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)\n  at java.util.concurrent.FutureTask.run(FutureTask.java:237)    at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)\n  at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)\n  at java.lang.Thread.run(Thread.java:818)</p>\n</blockquote>\n\n<p>Here the code </p>\n\n<pre><code>tutorialCategories.forEach { (_, _, _, _, _, tutorials) -&gt;\n  tutorials.forEach { tutorial -&gt;\n    if (tutorial.id == simpleReminderFromExtra.tutorialId)\n    {\n      //...\n      val mapOfreminders = mutableMapOf&lt;Int, MutableList&lt;Reminder&gt;&gt;()\n      val reminders = ReminderServices.getReminderByTutorialId(simpleReminderFromExtra.tutorialId)\n\n      reminders.forEach { reminder -&gt;\n        //...\n      }\n\n      mapOfreminders.forEach { _, finalReminders -&gt;\n        //...\n\n        finalReminders.forEach { reminder -&gt;\n          //...\n        }\n\n        //...\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Where :</p>\n\n<ul>\n<li><code>tutorialCategories</code> is a <code>List</code> ;</li>\n<li><code>tutorials</code> is a <code>List</code> ;</li>\n<li><code>reminders</code> is a <code>List</code> ;</li>\n</ul>\n\n<p>The line 275 of the code is <code>mapOfreminders.forEach { _, finalReminders -&gt;</code>.</p>\n\n<p>In the debugger, I can evaluate the <code>mapOfreminders</code> variable and everything seems to be alright.</p>\n\n<p>If someone can help to resolve this issue !</p>\n"}, {"tags": ["gradle", "kotlin", "maven-central"], "owner": {"reputation": 1036, "user_id": 3562927, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b46d85f27384a8b58999ad329e4ec4a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stevey", "link": "https://stackoverflow.com/users/3562927/stevey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1489833543, "creation_date": 1489783827, "question_id": 42866862, "link": "https://stackoverflow.com/questions/42866862/gradle-cannot-resolve-kotlin-gradle-plugin-1-1-1-invalidalgorithmparameterexce", "title": "Gradle cannot resolve kotlin gradle plugin 1.1.1 - InvalidAlgorithmParameterException", "body": "<p>I recently added Kotlin 1.1.1 to my project, which worked fine on OS X.  I synced it over to an Ubuntu box, and trying to run any gradle command on my build results in:</p>\n\n<pre><code>A problem occurred configuring root project 'myproject'.\n&gt; Could not resolve all dependencies for configuration ':classpath'.\n   &gt; Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.1.\n     Required by:\n         project :\n      &gt; Could not resolve org.jetbrains.kotlin:kotlin-gradle-plugin:1.1.1.\n         &gt; Could not get resource 'https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.1.1/kotlin-gradle-plugin-1.1.1.pom'.\n            &gt; Could not HEAD 'https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.1.1/kotlin-gradle-plugin-1.1.1.pom'.\n               &gt; java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty\n</code></pre>\n\n<p>I have tried both ways to configure it, including:</p>\n\n<pre><code>buildscript {\n   ext.kotlin_version = '1.1.1'\n\n   repositories {\n     mavenCentral()\n   }\n\n   dependencies {\n     classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n   }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>plugins {\n  id \"org.jetbrains.kotlin.jvm\" version \"1.1.1\"\n}\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["reflection", "kotlin", "kotlin-reflect"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 17, "last_activity_date": 1495808676, "last_edit_date": 1495808676, "creation_date": 1489773032, "answer_id": 42864129, "question_id": 42862966, "link": "https://stackoverflow.com/questions/42862966/how-to-obtain-a-ktype-in-kotlin/42864129#42864129", "title": "How to obtain a KType in Kotlin?", "body": "<p>From your description, sounds like your function should take a <code>KClass</code> parameter, not a <code>KType</code>, and check the incoming objects with <code>isSubclass</code>, not <code>isSubtype</code>.</p>\n\n<p>Types (represented by <code>KType</code> in <code>kotlin-reflect</code>) usually come from signatures of declarations in your code; they denote a broad set of values which functions take as parameters or return. A type consists of the class, generic arguments to that class, and nullability. The problem with types at runtime on JVM is that because of erasure, it's impossible to determine the exact type of a variable of a generic class. For example if you have a list, you cannot determine the generic type of that list at runtime, i.e. you cannot differentiate between <code>List&lt;String&gt;</code> and <code>List&lt;Throwable&gt;</code>.</p>\n\n<p>To answer your initial question though, you can create a <code>KType</code> out of a <code>KClass</code> with <code>createType()</code>:</p>\n\n<pre><code>val type: KType = Any::class.createType()\n</code></pre>\n\n<p>Note that if the class is generic, you need to pass type projections of generic arguments. In simple cases (all type variables can be replaced with star projections), <code>starProjectedType</code> will also work. For more info on <code>createType</code> and <code>starProjectedType</code>, <a href=\"https://stackoverflow.com/a/44203910/288456\">see this answer</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 6, "last_activity_date": 1573389291, "creation_date": 1573389291, "answer_id": 58788716, "question_id": 42862966, "link": "https://stackoverflow.com/questions/42862966/how-to-obtain-a-ktype-in-kotlin/58788716#58788716", "title": "How to obtain a KType in Kotlin?", "body": "<p>Since Kotlin 1.3.40, you can use the experimental function <code>typeOf&lt;T&gt;()</code> to obtain the <code>KType</code> of any type:</p>\n\n<pre><code>val int: KType = typeOf&lt;Int&gt;()\n</code></pre>\n\n<p>In contrast to <code>T::class.createType()</code>, this supports nested generic arguments:</p>\n\n<pre><code>val listOfString: KType = typeOf&lt;List&lt;String&gt;&gt;()\n</code></pre>\n\n<p>The <code>typeOf&lt;T&gt;()</code> function is particularly useful when you want to obtain a <code>KType</code> from a reified type parameter:</p>\n\n<pre><code>inline fun &lt;reified T&gt; printType() {\n    val type = typeOf&lt;T&gt;()\n    println(type.toString())\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    printType&lt;Map&lt;Int, String&gt;&gt;()\n    // prints:   kotlin.collections.Map&lt;kotlin.Int, kotlin.String&gt;\n}\n</code></pre>\n\n<p>Since this feature is still in experimental status, you need to opt-in with <code>@UseExperimental(ExperimentalStdlibApi::class)</code> around your function that uses <code>typeOf&lt;T&gt;()</code>. As the feature becomes more stable (possibly in Kotlin 1.4), this can be omitted. Also, at this time it is only available for Kotlin/JVM, not Kotlin/Native or Kotlin/JS.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://blog.jetbrains.com/kotlin/2019/06/kotlin-1-3-40-released/\" rel=\"noreferrer\">Release announcement</a></li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/type-of.html\" rel=\"noreferrer\">API Doc</a> (very sparse currently)</li>\n</ul>\n"}], "owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7030, "favorite_count": 0, "accepted_answer_id": 42864129, "answer_count": 2, "score": 8, "last_activity_date": 1573389291, "creation_date": 1489769125, "question_id": 42862966, "link": "https://stackoverflow.com/questions/42862966/how-to-obtain-a-ktype-in-kotlin", "title": "How to obtain a KType in Kotlin?", "body": "<p>I'm experimenting with the reflection functionality in Kotlin, but I can't seem to understand how to obtain a KType value.</p>\n\n<p>Suppose I have a class that maps phrases to object factories. In case of ambiguity, the user can supply a <code>type</code> parameter that narrows the search to only factories that return that type of object (or some sub-type).</p>\n\n<pre><code>fun mapToFactory(phrase: Phrase,\n          type: KType = Any::class): Any {...}\n</code></pre>\n\n<p><code>type</code> needs to accept just about anything, including <code>Int</code>, which from my experience seems to be treated somewhat specially. By default, it should be something like <code>Any</code>, which means \"do not exclude any factories\".</p>\n\n<p>How do I assign a default value (or any value) to <code>type</code>?</p>\n"}, {"tags": ["unit-testing", "kotlin", "powermock"], "comments": [{"owner": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1489848050, "post_id": 42861972, "comment_id": 72855511, "body": "I would remove Robolectric tag since it is question about Kotlin and reflection only."}, {"owner": {"reputation": 2540, "user_id": 3456952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a42b2c66c6ca8051bf42e5b8be0d52a8?s=128&d=identicon&r=PG&f=1", "display_name": "TheHebrewHammer", "link": "https://stackoverflow.com/users/3456952/thehebrewhammer"}, "reply_to_user": {"reputation": 18638, "user_id": 981715, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6d6386f73f30139271b8f38facf57776?s=128&d=identicon&r=PG", "display_name": "Eugen Martynov", "link": "https://stackoverflow.com/users/981715/eugen-martynov"}, "edited": false, "score": 0, "creation_date": 1489858327, "post_id": 42861972, "comment_id": 72858925, "body": "Fair enough, I wasn&#39;t sure if the class loader had anything to do with it."}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1527784065, "post_id": 42931717, "comment_id": 88267645, "body": "Three days with this, and this totally helped. THANKS!"}], "tags": [], "owner": {"reputation": 2540, "user_id": 3456952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a42b2c66c6ca8051bf42e5b8be0d52a8?s=128&d=identicon&r=PG&f=1", "display_name": "TheHebrewHammer", "link": "https://stackoverflow.com/users/3456952/thehebrewhammer"}, "is_accepted": true, "score": 5, "last_activity_date": 1490110787, "creation_date": 1490110787, "answer_id": 42931717, "question_id": 42861972, "link": "https://stackoverflow.com/questions/42861972/mocking-companion-object-function-in-kotlin/42931717#42931717", "title": "Mocking companion object function in kotlin", "body": "<p>What I ended up doing...</p>\n\n<p>Instead of mocking the static method I ended up using PowerMockito's <code>whenNew</code> function to return a mocked instance of <code>MockableClass</code>. The final code looks something like this:</p>\n\n<pre><code>@RunWith(RobolectricTestRunner::class)\n@Config(manifest = \"src/main/AndroidManifest.xml\",\n        constants = BuildConfig::class,\n        sdk = intArrayOf(23))\n@PowerMockIgnore(\"org.mockito.*\", \"org.robolectric.*\", \"android.*\")\n@PrepareForTest(MockableClass::class)\nclass MyTest {\n\n    private lateinit var context: Context\n\n    @JvmField\n    @Rule\n    var rule = PowerMockRule()\n\n    @Before\n    fun setUp() {\n        context = RuntimeEnvironment.application as Context\n    }\n\n    @Test\n    fun test() {\n        val instance = mock(MockableClass::class.java)\n        instance.isValid = true\n        whenNew&lt;MockableClass&gt;(\"com.example.MockableClass\")\n                .withAnyArguments()\n                .thenReturn(instance)\n        assertEquals(instance, MockableClass.getInstance(context))\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2540, "user_id": 3456952, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a42b2c66c6ca8051bf42e5b8be0d52a8?s=128&d=identicon&r=PG&f=1", "display_name": "TheHebrewHammer", "link": "https://stackoverflow.com/users/3456952/thehebrewhammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8112, "favorite_count": 2, "accepted_answer_id": 42931717, "answer_count": 1, "score": 9, "last_activity_date": 1490110787, "creation_date": 1489766076, "last_edit_date": 1489858346, "question_id": 42861972, "link": "https://stackoverflow.com/questions/42861972/mocking-companion-object-function-in-kotlin", "title": "Mocking companion object function in kotlin", "body": "<p>I'm using PowerMock and Roboelectric and would like to mock a companion object function for a class. When I do this I get an error:</p>\n\n<pre><code>org.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n</code></pre>\n\n<p>What I have is basically this:</p>\n\n<pre><code>open class MockableClass private constructor(context: Context) {\n\n    companion object {\n\n        private val INSTANCE_LOCK = Any()\n        private var sInstance: MockableClass? = null\n\n        @JvmStatic\n        fun getInstance(context: Context): MockableClass? {\n            synchronized(INSTANCE_LOCK) {\n                sInstance = (sInstance ?: MockableClass(context).let {\n                    if (it.isValid) it\n                    else null\n                }\n            }\n            return sInstance\n        }\n    }\n\n    init {\n        // Do some initialization using context...\n        // Set isValid to true/false depending on success\n    }\n\n    val isValid: Boolean\n}\n</code></pre>\n\n<p>When I go to test this I will assume it will always work and would like to have getInstance just return a mocked version of the <code>MockableClass</code>.</p>\n\n<pre><code>@RunWith(RobolectricTestRunner::class)\n@Config(manifest = \"src/main/AndroidManifest.xml\",\n        constants = BuildConfig::class,\n        sdk = intArrayOf(23))\n@PowerMockIgnore(\"org.mockito.*\", \"org.robolectric.*\", \"android.*\")\n@PrepareForTest(MockableClass::class)\nclass MyTest {\n\n    private lateinit var context: Context\n\n    @get:Rule\n    val rule = PowerMockRule()\n\n    @Before\n    fun setUp() {\n        context = RuntimeEnvironment.application as Context\n    }\n\n    @Test\n    fun test() {\n        val instance = mock(MockableClass::class.java)\n        mockStatic(MockableClass::class.java)\n        `when`(MockableClass.getInstance(Matchers.isA(Context::class.java)))\n                .thenReturn(instance)\n        assertEquals(instance,\n                MockableClass.getInstance(RuntimeEnvironment.application as Context))\n    }\n}\n</code></pre>\n\n<p>I've also tried mocking MockableClass.Companion::class.java with no luck.</p>\n\n<p>Does anyone know what I need to do to be able to mock out this <code>getInstance</code> function?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 164, "user_id": 4872322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/skMDP.jpg?s=128&g=1", "display_name": "Eugene Stepanov", "link": "https://stackoverflow.com/users/4872322/eugene-stepanov"}, "edited": false, "score": 0, "creation_date": 1493317362, "post_id": 42843996, "comment_id": 74377555, "body": "you solve you problem? what was wrong?"}, {"owner": {"reputation": 884, "user_id": 5891893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea573624f7f8a8ccb33d772831d6e2a?s=128&d=identicon&r=PG&f=1", "display_name": "Sally", "link": "https://stackoverflow.com/users/5891893/sally"}, "edited": false, "score": 1, "creation_date": 1498144367, "post_id": 42843996, "comment_id": 76389534, "body": "Open <code>Gradle Console</code> then click in to <code>Run with --stacktrace </code> to show more log ( more details about the error)"}], "answers": [{"comments": [{"owner": {"reputation": 2503, "user_id": 1461568, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/06c71fd1a954d783e9be11cc7eecd5d0?s=128&d=identicon&r=PG", "display_name": "LunaVulpo", "link": "https://stackoverflow.com/users/1461568/lunavulpo"}, "edited": false, "score": 0, "creation_date": 1529317619, "post_id": 43065678, "comment_id": 88814574, "body": "&#39;kapt.generateStubs&#39; is not used by the &#39;kotlin-kapt&#39; plugin"}], "tags": [], "owner": {"reputation": 4834, "user_id": 3275253, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/jSMeb.jpg?s=128&g=1", "display_name": "voghDev", "link": "https://stackoverflow.com/users/3275253/voghdev"}, "is_accepted": false, "score": 19, "last_activity_date": 1563173626, "last_edit_date": 1563173626, "creation_date": 1490693114, "answer_id": 43065678, "question_id": 42843996, "link": "https://stackoverflow.com/questions/42843996/android-kotlin-error-unresolved-reference-daggerappcomponent/43065678#43065678", "title": "Android Kotlin : Error Unresolved reference: DaggerAppComponent", "body": "<p>I was getting the same error message, but my case was different than yours. The unresolved reference appeared only when generating signed APK. This is how I solved it:</p>\n\n<p><strong>app/build.gradle</strong></p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n\ndependencies {\n    //...\n    implementation 'com.google.dagger:dagger:2.9'\n    kapt 'com.google.dagger:dagger-compiler:2.9'\n}\n</code></pre>\n\n<p>I can now deploy my signed APK without errors</p>\n"}, {"tags": [], "owner": {"reputation": 14968, "user_id": 3994630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/EsfVg.png?s=128&g=1", "display_name": "Pablo Cegarra", "link": "https://stackoverflow.com/users/3994630/pablo-cegarra"}, "is_accepted": true, "score": 69, "last_activity_date": 1546498576, "last_edit_date": 1546498576, "creation_date": 1502873952, "answer_id": 45709244, "question_id": 42843996, "link": "https://stackoverflow.com/questions/42843996/android-kotlin-error-unresolved-reference-daggerappcomponent/45709244#45709244", "title": "Android Kotlin : Error Unresolved reference: DaggerAppComponent", "body": "<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'   \n</code></pre>\n\n<p>And in your dependencies:</p>\n\n<pre><code>implementation \"com.google.dagger:dagger:2.x\"\nimplementation \"com.google.dagger:dagger-android:2.x\"\nimplementation \"com.google.dagger:dagger-android-support:2.x\"\nkapt \"com.google.dagger:dagger-compiler:2.x\"\nkapt \"com.google.dagger:dagger-android-processor:2.x\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5623634, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lkJcCiussXY/AAAAAAAAAAI/AAAAAAAAACk/sQcAoza3MKI/photo.jpg?sz=128", "display_name": "ghozi mahdi", "link": "https://stackoverflow.com/users/5623634/ghozi-mahdi"}, "is_accepted": false, "score": -3, "last_activity_date": 1539238888, "last_edit_date": 1539238888, "creation_date": 1539218392, "answer_id": 52750548, "question_id": 42843996, "link": "https://stackoverflow.com/questions/42843996/android-kotlin-error-unresolved-reference-daggerappcomponent/52750548#52750548", "title": "Android Kotlin : Error Unresolved reference: DaggerAppComponent", "body": "<p>Do not use private for inject dagger in Kotlin, use it like this for Kotlin</p>\n\n<pre><code>@Inject\n     internal lateinit\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11880, "user_id": 334270, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aOhek.jpg?s=128&g=1", "display_name": "Zsolt Safrany", "link": "https://stackoverflow.com/users/334270/zsolt-safrany"}, "edited": false, "score": 4, "creation_date": 1566606687, "post_id": 56238046, "comment_id": 101721573, "body": "Don&#39;t downvote this; after doing the other steps, this is what I was missing lol."}], "tags": [], "owner": {"reputation": 127, "user_id": 2935843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5f974ce7a3166fed31ad0161007d85?s=128&d=identicon&r=PG&f=1", "display_name": "zgr", "link": "https://stackoverflow.com/users/2935843/zgr"}, "is_accepted": false, "score": 5, "last_activity_date": 1558440800, "creation_date": 1558440800, "answer_id": 56238046, "question_id": 42843996, "link": "https://stackoverflow.com/questions/42843996/android-kotlin-error-unresolved-reference-daggerappcomponent/56238046#56238046", "title": "Android Kotlin : Error Unresolved reference: DaggerAppComponent", "body": "<p>At first, It gives an error after rebuild:</p>\n\n<blockquote>\n  <p>Unresolved reference: DaggerAppComponent</p>\n</blockquote>\n\n<p>You should try to import (Alt + Enter) that component.</p>\n"}], "owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23779, "favorite_count": 8, "accepted_answer_id": 45709244, "answer_count": 4, "score": 33, "last_activity_date": 1563173626, "creation_date": 1489695432, "question_id": 42843996, "link": "https://stackoverflow.com/questions/42843996/android-kotlin-error-unresolved-reference-daggerappcomponent", "title": "Android Kotlin : Error Unresolved reference: DaggerAppComponent", "body": "<p>I have installed Kotlin plugin today into an existing project with Dagger 2. Before Kotlin was installed I had no issues with Dagger.  However, now the compiler complains :</p>\n\n<pre><code>Error:(5, 32) Unresolved reference: DaggerAppComponent\nError:Execution failed for task ':app:compileDebugKotlinAfterJava'.\n&gt; Compilation error. See log for more details\nError:(12, 21) Unresolved reference: DaggerAppComponent\n</code></pre>\n\n<p>Project gradle:</p>\n\n<pre><code>ext.kotlin_version = '1.1.1'\n\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.2.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"org.jetbrains.kotlin:kotlin-android-extensions:$kotlin_version\"\n</code></pre>\n\n<p>Module gradle:</p>\n\n<pre><code>kapt {\n    generateStubs = true\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.0.1'\n    testCompile 'junit:junit:4.12'\n\n    compile 'com.google.dagger:dagger:2.7'\n    kapt 'com.google.dagger:dagger-compiler:2.7'\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n\n\n}\n</code></pre>\n\n<p>The DaggerAppComponent file IS auto generated, so I'm confused as to why there is an un resolved reference error thrown.</p>\n"}, {"tags": ["android", "kotlin", "android-gradle-plugin"], "comments": [{"owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "edited": false, "score": 2, "creation_date": 1489726837, "post_id": 42843441, "comment_id": 72806873, "body": "Post your project level <code>gradle</code>"}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1507645525, "post_id": 42843441, "comment_id": 80286864, "body": "This is how you add Kotlin support for Android: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/using-gradle.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4200, "user_id": 2552290, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/7fT1c.gif?s=128&g=1", "display_name": "Don Hatch", "link": "https://stackoverflow.com/users/2552290/don-hatch"}, "edited": false, "score": 24, "creation_date": 1514405303, "post_id": 42849588, "comment_id": 82964396, "body": "An answer that specifies a magic version to use, without explanation, is not all that helpful and becomes even less helpful over time.  Are you suggesting upgrading from a lower version?  Or downgrading from a higher version because the higher version has a bug?"}, {"owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "reply_to_user": {"reputation": 4200, "user_id": 2552290, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/7fT1c.gif?s=128&g=1", "display_name": "Don Hatch", "link": "https://stackoverflow.com/users/2552290/don-hatch"}, "edited": false, "score": 3, "creation_date": 1514435401, "post_id": 42849588, "comment_id": 82971669, "body": "@DonHatch this answer was given in March for android studio 2.2 which was getting error mention above in the question. It is not for android studio 3.0 or above."}, {"owner": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "edited": false, "score": 0, "creation_date": 1548174066, "post_id": 42849588, "comment_id": 95444884, "body": "@0xalihn answer below has a correct solution without magic version number"}, {"owner": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 0, "creation_date": 1559884255, "post_id": 42849588, "comment_id": 99565777, "body": "@PatelPinkal can you update your answer for latest android studio version."}, {"owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "reply_to_user": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 0, "creation_date": 1559886322, "post_id": 42849588, "comment_id": 99566287, "body": "@Arbaz.in try to install and use a new version of kotlin. May its help you. Also, note that your studio should be the latest version if you are using latest kotlin version."}, {"owner": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 0, "creation_date": 1559886586, "post_id": 42849588, "comment_id": 99566357, "body": "@PatelPinkal Sure ill do same"}, {"owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "edited": false, "score": 0, "creation_date": 1559886916, "post_id": 42849588, "comment_id": 99566459, "body": "Ok, If it&#39;s working then edit this post or provide your answer here. So, others can have solutions."}, {"owner": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 1, "creation_date": 1559902155, "post_id": 42849588, "comment_id": 99573367, "body": "i updated answer as per latest version of Android studio"}, {"owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "reply_to_user": {"reputation": 1164, "user_id": 5995648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5lHmZ.jpg?s=128&g=1", "display_name": "Arbaz.in", "link": "https://stackoverflow.com/users/5995648/arbaz-in"}, "edited": false, "score": 0, "creation_date": 1559912245, "post_id": 42849588, "comment_id": 99578384, "body": "@Arbaz.in I can&#39;t see any update in answer. Please post your answer in a comment"}], "tags": [], "owner": {"reputation": 6568, "user_id": 7235539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/SJIPO.jpg?s=128&g=1", "display_name": "Patel Pinkal", "link": "https://stackoverflow.com/users/7235539/patel-pinkal"}, "is_accepted": false, "score": 33, "last_activity_date": 1560149872, "last_edit_date": 1560149872, "creation_date": 1489727018, "answer_id": 42849588, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/42849588#42849588", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>In Project level <code>build.gradle</code> use only this version  </p>\n\n<blockquote>\n  <p>ext.kotlin_version = '1.3.31'</p>\n</blockquote>\n\n<p>Remove other versions</p>\n\n<p>This will only work with the latest version of android studio 3.4</p>\n\n<blockquote>\n  <p><strong>UPDATE:</strong> Try to use the latest version of kotlin with latest Android studio to avoid an error.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 4200, "user_id": 2552290, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/7fT1c.gif?s=128&g=1", "display_name": "Don Hatch", "link": "https://stackoverflow.com/users/2552290/don-hatch"}, "edited": false, "score": 3, "creation_date": 1514405484, "post_id": 42853438, "comment_id": 82964462, "body": "Thank you for explaining.  Several answers say use 1.1.1 without explanation, which will make the answers rapidly become useless in the future."}], "tags": [], "owner": {"reputation": 410, "user_id": 2129040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad84ed22b4c3c262a4766a2be3aa6ca1?s=128&d=identicon&r=PG", "display_name": "skalarproduktraum", "link": "https://stackoverflow.com/users/2129040/skalarproduktraum"}, "is_accepted": false, "score": 21, "last_activity_date": 1489742232, "creation_date": 1489742232, "answer_id": 42853438, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/42853438#42853438", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>The split of <code>kotlin-stdlib</code> into <code>kotlin-stdlib-jre7</code> and <code>kotlin-stdlib-jre8</code> was only introduced with Kotlin 1.1, that's why the dependency cannot be resolved, the package version simply does not exist. </p>\n\n<p>It looks like the update to your project files failed at some point and set the Kotlin version to 1.0.7. If this is a new project and there's nothing holding you back from using 1.1.1, I'd switch to that. Your problem should be gone after doing this.</p>\n"}, {"tags": [], "owner": {"reputation": 1179, "user_id": 6694077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8iT1X.png?s=128&g=1", "display_name": "Mihail Salari", "link": "https://stackoverflow.com/users/6694077/mihail-salari"}, "is_accepted": false, "score": 12, "last_activity_date": 1491072139, "last_edit_date": 1491072139, "creation_date": 1491064102, "answer_id": 43159281, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/43159281#43159281", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>In \"build.gradle\" file, change current Kotlin version that line and press synk:</p>\n\n<pre><code>ext.kotlin_version = '1.1.1'\n</code></pre>\n\n<p>/// That will look like:</p>\n\n<p>// Top-level build file where you can add configuration options common to all sub-projects/modules.</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.1'\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.0'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8056898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bed21159243f9f755b0e0b5dca8dcc1?s=128&d=identicon&r=PG&f=1", "display_name": "user8056898", "link": "https://stackoverflow.com/users/8056898/user8056898"}, "is_accepted": false, "score": 1, "last_activity_date": 1495610572, "last_edit_date": 1495610572, "creation_date": 1495594654, "answer_id": 44148210, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/44148210#44148210", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<ol>\n<li><p>Please check current version of your Kotlin in below path,</p>\n\n<p>C:\\Program Files\\Android\\Android Studio\\gradle\\m2repository\\org\\jetbrains\\kotlin\\kotlin-stdlib\\1.0.5</p></li>\n</ol>\n\n<p>change to that version <code>(1.0.5)</code> in project level gradle file.</p>\n\n<p>You can see in your above path does not mentioned any Java - <code>jre version</code>, so remove in your app level gradle file as below,</p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16195, "user_id": 3806413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MgI5b.jpg?s=128&g=1", "display_name": "0xAliHn", "link": "https://stackoverflow.com/users/3806413/0xalihn"}, "is_accepted": false, "score": 9, "last_activity_date": 1520175199, "creation_date": 1520175199, "answer_id": 49096658, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/49096658#49096658", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>Starting with Kotlin 1.1.2, the dependencies with group <code>org.jetbrains.kotlin</code> are by default resolved with the version taken from the applied plugin. You can provide the version manually using the full dependency notation like:</p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n</code></pre>\n\n<p>If you're targeting JDK 7 or JDK 8, you can use extended versions of the Kotlin standard library which contain additional extension functions for APIs added in new JDK versions. Instead of kotlin-stdlib, use one of the following dependencies:</p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk7\"\ncompile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2356, "user_id": 1333493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78023162714c2799f0f8cafcfba109c7?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/1333493/nemo"}, "edited": false, "score": 0, "creation_date": 1522479419, "post_id": 49584960, "comment_id": 86178168, "body": "You could elaborate on how this improves Mihail Salari&#39;s answer, on which it seems to be based."}], "tags": [], "owner": {"reputation": 91, "user_id": 7721746, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EhTStecb_ZA/AAAAAAAAAAI/AAAAAAAAFRY/q_aDJ0S6pvY/photo.jpg?sz=128", "display_name": "chirag khandla", "link": "https://stackoverflow.com/users/7721746/chirag-khandla"}, "is_accepted": false, "score": 5, "last_activity_date": 1580738509, "last_edit_date": 1580738509, "creation_date": 1522477983, "answer_id": 49584960, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/49584960#49584960", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<pre><code>buildscript {\n    **ext.kotlin_version = '1.1.1'**  //Add this line\n    repositories {\n        **jcenter()**                 //Add this line\n        google()\n    }\n    dependencies {\n//        classpath 'com.android.tools.build:gradle:3.0.1'\n        classpath 'com.android.tools.build:gradle:3.1.0'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        **jcenter()**                 //Add this line\n        google()\n        maven { url \"https://jitpack.io\" }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 639, "user_id": 8434246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6323857bf37a3c0d3781c71630f9aa18?s=128&d=identicon&r=PG&f=1", "display_name": "Olusola Omosola", "link": "https://stackoverflow.com/users/8434246/olusola-omosola"}, "is_accepted": false, "score": 2, "last_activity_date": 1530786434, "last_edit_date": 1530786434, "creation_date": 1530785323, "answer_id": 51188593, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/51188593#51188593", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>This is what worked for me:\nUsing Gradle 4.8.1</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.1.1' \nrepositories {\n    jcenter()\n    google()\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.1.0'}\n}\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        google()\n        maven {\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    maven {\n            url 'https://dl.bintray.com/kotlin/kotlin-dev/'\n    }\n  }\n}   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1167, "user_id": 3175098, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tB3Yw.jpg?s=128&g=1", "display_name": "andreikashin", "link": "https://stackoverflow.com/users/3175098/andreikashin"}, "is_accepted": false, "score": 2, "last_activity_date": 1541634363, "last_edit_date": 1541634363, "creation_date": 1540539147, "answer_id": 53003660, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/53003660#53003660", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>I have solved this issue using deselection of the <strong>Offline work</strong> option in <code>Settings</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/9jrz0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9jrz0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 1214383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73c07001fe483a530f721ad22f3f4e40?s=128&d=identicon&r=PG", "display_name": "Mohamed ElSawaf", "link": "https://stackoverflow.com/users/1214383/mohamed-elsawaf"}, "is_accepted": false, "score": 7, "last_activity_date": 1542013461, "creation_date": 1542013461, "answer_id": 53258821, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/53258821#53258821", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>A new solution if you use Android Studio 3.2, I solved this issue by added mavenCentral() to build.gradle of the project:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.3.0'\n    repositories {\n        mavenCentral()\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.2.1'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n    }\n}\n\nallprojects {\n    repositories {\n        mavenCentral()\n        google()\n        jcenter()\n    }\n}\n</code></pre>\n\n<p>You should add the line as this order, the credited is for <a href=\"https://stackoverflow.com/a/49552433\">this answer</a></p>\n"}, {"comments": [{"owner": {"reputation": 17055, "user_id": 164966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c72f100bc09518cd468b9fe146f1f22?s=128&d=identicon&r=PG", "display_name": "R0MANARMY", "link": "https://stackoverflow.com/users/164966/r0manarmy"}, "edited": false, "score": 1, "creation_date": 1544939511, "post_id": 53358817, "comment_id": 94448754, "body": "Some helpful information in the <a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#kotlin-standard-library-artifacts-and-split-packages\" rel=\"nofollow noreferrer\">docs</a> about jdk and jre."}, {"owner": {"reputation": 2085, "user_id": 5636313, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/igjep.jpg?s=128&g=1", "display_name": "Farid", "link": "https://stackoverflow.com/users/5636313/farid"}, "edited": false, "score": 0, "creation_date": 1548494680, "post_id": 53358817, "comment_id": 95568014, "body": "I believe one day Android team will make things a little easier not much just a little or at least they will write major changes in changelog with bold instead of burying it deep into the website to be mined out :))"}, {"owner": {"reputation": 1175, "user_id": 2657646, "user_type": "registered", "profile_image": "https://graph.facebook.com/1238571/picture?type=large", "display_name": "James Wang", "link": "https://stackoverflow.com/users/2657646/james-wang"}, "edited": false, "score": 15, "creation_date": 1552680698, "post_id": 53358817, "comment_id": 97118323, "body": "It took me a full minute of staring to see the difference between <code>jre</code> and <code>jdk</code>\u2014I must be getting old."}], "tags": [], "owner": {"reputation": 2250, "user_id": 5830551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Utrc.jpg?s=128&g=1", "display_name": "leoelstin", "link": "https://stackoverflow.com/users/5830551/leoelstin"}, "is_accepted": true, "score": 181, "last_activity_date": 1602320595, "last_edit_date": 1602320595, "creation_date": 1542526766, "answer_id": 53358817, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/53358817#53358817", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>replace</p>\n<pre><code>implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version&quot;\n</code></pre>\n<p>with</p>\n<pre><code>implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n</code></pre>\n<p>Since the version with jre is absolute , just replace and sync the project</p>\n<p>Official Documentation <a href=\"http://kotlinlang.org/docs/reference/whatsnew12.html#kotlin-standard-library-artifacts-and-split-packages\" rel=\"noreferrer\">here</a> Thanks for the link @ <a href=\"https://stackoverflow.com/users/164966/r0manarmy\">ROMANARMY</a></p>\n<p>Happy Coding :)</p>\n"}, {"tags": [], "owner": {"reputation": 1093, "user_id": 786434, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a09afc97177408a422b81de4ed58fec8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/786434/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1547219937, "creation_date": 1547219937, "answer_id": 54149310, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/54149310#54149310", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>In case a (transitive) dependency still uses the <code>jre</code> variant of the Kotlin library, you can force the use of the <code>jdk</code> variant with the help of a resolution strategy:</p>\n\n<pre><code>configurations.all {\n    resolutionStrategy {\n        eachDependency { DependencyResolveDetails details -&gt;\n            details.requested.with {\n                if (group == \"org.jetbrains.kotlin\" &amp;&amp; name.startsWith(\"kotlin-stdlib-jre\")) {\n                    details.useTarget(group: group, name: name.replace(\"jre\", \"jdk\"), version: version)\n                    details.because(\"Force use of 'kotlin-stdlib-jdk' in favor of deprecated 'kotlin-stdlib-jre'.\")\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 1066935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680549e8fbe281d61d6ae2473d702015?s=128&d=identicon&r=PG", "display_name": "vikas", "link": "https://stackoverflow.com/users/1066935/vikas"}, "is_accepted": false, "score": 3, "last_activity_date": 1553769409, "last_edit_date": 1553769409, "creation_date": 1553768200, "answer_id": 55395065, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/55395065#55395065", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>If you are using Android Studio 3.2 &amp; above,then issue will be solved by adding google() &amp; jcenter() to build.gradle of the project:</p>\n\n<pre><code>repositories {\n        google()\n        jcenter()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 8541577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53381e30c3aa409aea80034b90daa165?s=128&d=identicon&r=PG&f=1", "display_name": "Azhar Husain Raeisi", "link": "https://stackoverflow.com/users/8541577/azhar-husain-raeisi"}, "is_accepted": false, "score": -1, "last_activity_date": 1558681583, "creation_date": 1558681583, "answer_id": 56287453, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/56287453#56287453", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>Simple Steps:</p>\n\n<ol>\n<li><p>Click File > Project Structure</p></li>\n<li><p>Click Dependencies >\n    Find and Click org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.21 (or whatever your current version is)</p></li>\n<li><p>Under Details > update section, click [update variable][update\ndependencies]</p></li>\n<li>Click Ok</li>\n</ol>\n\n<p>Best Regards</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7477271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UzDB6-0_ygk/AAAAAAAAAAI/AAAAAAAAACQ/yzE0KLzVGLc/photo.jpg?sz=128", "display_name": "Kevin Kulothungan", "link": "https://stackoverflow.com/users/7477271/kevin-kulothungan"}, "is_accepted": false, "score": 0, "last_activity_date": 1572933451, "creation_date": 1572933451, "answer_id": 58705297, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/58705297#58705297", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>After fixing the build.gradle version, It started working\n4.0.0 to 3.5.0</p>\n"}, {"tags": [], "owner": {"reputation": 17453, "user_id": 5279996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf8327567575d69a46bd8afe8db4466e?s=128&d=identicon&r=PG", "display_name": "Braian Coronel", "link": "https://stackoverflow.com/users/5279996/braian-coronel"}, "is_accepted": false, "score": 1, "last_activity_date": 1590292064, "creation_date": 1590292064, "answer_id": 61981410, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/61981410#61981410", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<h2>build.gradle (Project)</h2>\n\n<pre><code>buildScript {\n    ...\n    dependencies {\n        ...\n        classpath 'com.android.tools.build:gradle:4.0.0-rc01'\n    }\n} \n</code></pre>\n\n<h2>gradle/wrapper/gradle-wrapper.properties</h2>\n\n<pre><code>...\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip\n</code></pre>\n\n<hr>\n\n<p>Some libraries require the <strong>updated gradle</strong>. Such as: </p>\n\n<pre><code>androidTestImplementation \"org.jetbrains.kotlinx:kotlinx-coroutines-test:$coroutines\"\n</code></pre>\n\n<p>GL</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14637201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4ee90c7a6624478ec74ab3e7456fb0?s=128&d=identicon&r=PG&f=1", "display_name": "deniz12", "link": "https://stackoverflow.com/users/14637201/deniz12"}, "is_accepted": false, "score": 0, "last_activity_date": 1610624407, "creation_date": 1610624407, "answer_id": 65718298, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7/65718298#65718298", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>Reload sdk maybe the problem is solved</p>\n"}], "owner": {"reputation": 4741, "user_id": 517733, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e0b5b9443d08bdacd6087648dab3e0c?s=128&d=identicon&r=PG", "display_name": "Mike6679", "link": "https://stackoverflow.com/users/517733/mike6679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137303, "favorite_count": 8, "accepted_answer_id": 53358817, "answer_count": 16, "score": 112, "last_activity_date": 1610624407, "creation_date": 1489693356, "last_edit_date": 1592644375, "question_id": 42843441, "link": "https://stackoverflow.com/questions/42843441/kotlin-error-could-not-find-org-jetbrains-kotlinkotlin-stdlib-jre71-0-7", "title": "Kotlin Error : Could not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7", "body": "<p>I installed the Kotlin plugin into my app (v. v1.1.1-release-Studio2.2-1) and then selected &quot;Configure Kotlin in Project&quot;   I selected compiler and runtime version of 1.0.7. Kotlin updated my Gradle files. Now when I try to build in I get:</p>\n<blockquote>\n<p>Error: A problem occurred configuring project ':app'.\nCould not resolve all dependencies for configuration ':app:_debugApkCopy'.\nCould not find org.jetbrains.kotlin:kotlin-stdlib-jre7:1.0.7.\nRequired by:</p>\n<p>MyApplication:app:unspecified</p>\n</blockquote>\n<p>I'm not sure what I'm missing here.</p>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "jogl"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1489685869, "post_id": 42841075, "comment_id": 72791338, "body": "I am a little confused about the different solutions you attempted and what results you got for each one. What happens when you add the <code>compile</code> dependency to your build.gradle file?"}, {"owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1489692301, "post_id": 42841075, "comment_id": 72795115, "body": "I edited the question trying to make it clearer (let me know if it&#39;s fine). I basically end up having always the same <code>UnsatisfiedLinkError</code> exception"}], "owner": {"reputation": 5577, "user_id": 1047713, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bd4a6e80c7c52685a465ef6fd4ebde3?s=128&d=identicon&r=PG", "display_name": "elect", "link": "https://stackoverflow.com/users/1047713/elect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1489692225, "creation_date": 1489685687, "last_edit_date": 1495541367, "question_id": 42841075, "link": "https://stackoverflow.com/questions/42841075/is-there-a-way-to-load-runtime-libraries-other-than-put-them-under-src-main-jnil", "title": "Is there a way to load runtime libraries other than put them under src/main/jniLibs?", "body": "<p>I am attempting to write an hello triangle for opengl es 2 on Android.</p>\n\n<p>The only working solution I found it to have native jogl libraries under <code>app/src/main/jniLibs/</code>, in <a href=\"https://github.com/java-opengl-labs/hello-droid/tree/master/hello-triangle-es2/src/main/jniLibs\" rel=\"nofollow noreferrer\">this way</a>:</p>\n\n<pre><code>app/\n |--&gt; src/\n       |--&gt; main/\n             |--&gt; jniLibs/\n                    |--&gt; lib*.so\n</code></pre>\n\n<p>On my corresponding <a href=\"https://github.com/java-opengl-labs/helloTriangle\" rel=\"nofollow noreferrer\">hello desktop project</a>, I simply have in my <code>build.gradle</code></p>\n\n<pre><code>def joglVersion = '2.3.2'\n\ncompile \"org.jogamp.gluegen:gluegen-rt-main:$joglVersion\"\ncompile \"org.jogamp.jogl:jogl-all-main:$joglVersion\"\n</code></pre>\n\n<p>and it work flawless, on runtime, libraries get extracted and provided.</p>\n\n<p>One alternative to this solution is to extract them manually and put them under <code>project/natives</code>. They both work.</p>\n\n<p>On android, I never got it working like on the desktop way, a simple <code>build.gradle</code>. The only way is, as I said at begin, extract them manually from the jars where they were and put them under <code>jniLibs/</code></p>\n\n<p>No matter wherever I put the plaind directory <code>natives/android-armv6</code> (not compress, <code>.jar</code> or <code>.apk</code>), it always fails:</p>\n\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n                  Process: org.helloTriangle_es2, PID: 9735\n                  java.lang.UnsatisfiedLinkError: dlopen failed: library \"//natives/android-armv6//libgluegen-rt.so\" not found\n                      at java.lang.Runtime.load(Runtime.java:332)\n                      at java.lang.System.load(System.java:1069)\n                      at com.jogamp.common.jvm.JNILibLoaderBase.loadLibraryInternal(JNILibLoaderBase.java:624)\n                      at com.jogamp.common.jvm.JNILibLoaderBase.access$000(JNILibLoaderBase.java:63)\n                      at com.jogamp.common.jvm.JNILibLoaderBase$DefaultAction.loadLibrary(JNILibLoaderBase.java:106)\n                      at com.jogamp.common.jvm.JNILibLoaderBase.loadLibrary(JNILibLoaderBase.java:487)\n                      at com.jogamp.common.os.DynamicLibraryBundle$GlueJNILibLoader.loadLibrary(DynamicLibraryBundle.java:421)\n                      at com.jogamp.common.os.Platform$1.run(Platform.java:317)\n                      at java.security.AccessController.doPrivileged(AccessController.java:45)\n                      at com.jogamp.common.os.Platform.&lt;clinit&gt;(Platform.java:287)\n                      at com.jogamp.common.os.Platform.initSingleton(Platform.java:355)\n                      at com.jogamp.opengl.GLProfile.&lt;clinit&gt;(GLProfile.java:147)\n                      at org.helloTriangle_es2.MainActivity.onCreate(MainActivity.java:23)\n                      at android.app.Activity.performCreate(Activity.java:6322)\n                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1113)\n                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2519)\n                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2654)\n                      at android.app.ActivityThread.-wrap11(ActivityThread.java)\n                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1488)\n                      at android.os.Handler.dispatchMessage(Handler.java:111)\n                      at android.os.Looper.loop(Looper.java:207)\n                      at android.app.ActivityThread.main(ActivityThread.java:5728)\n                      at java.lang.reflect.Method.invoke(Native Method)\n                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)\n                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:679)\nI/Process: Sending signal. PID: 9735 SIG: 9\nApplication terminated.\n</code></pre>\n\n<p>Looking around, I read <a href=\"https://stackoverflow.com/a/28953134/1047713\">this answer</a>, where they say that basically <code>apk files</code> is the (sort of) runtime..</p>\n\n<p>I tried that, adding for :</p>\n\n<pre><code>provided files('libs/gluegen-rt-natives-android-armv6.jar')\nprovided files('libs/jogl-all-natives-android-armv6.jar')\n</code></pre>\n\n<p>but no way. Also trying <code>compile</code>/<code>provided</code> instead of <code>provided</code> made no difference... always the same exception</p>\n\n<p>Am I doing something wrong or extract them manually under <code>src/main/jniLibs/armeabi</code> is really the only solution?</p>\n"}, {"tags": ["format", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8470, "user_id": 1245622, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/V7rHB.jpg?s=128&g=1", "display_name": "linqu", "link": "https://stackoverflow.com/users/1245622/linqu"}, "edited": false, "score": 2, "creation_date": 1489688478, "post_id": 42840792, "comment_id": 72792920, "body": "thanks @zsmb13, clever idea to use the bytecode for inspection."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 9, "last_activity_date": 1489685167, "last_edit_date": 1489685167, "creation_date": 1489684826, "answer_id": 42840792, "question_id": 42837477, "link": "https://stackoverflow.com/questions/42837477/which-locale-is-used-for-kotlins-string-templates/42840792#42840792", "title": "Which locale is used for kotlin&#39;s string templates?", "body": "<p>TL;DR: you can not adjust it.</p>\n\n<p>If you look at the bytecode when you use string interpolation, you'll see that it uses <code>StringBuilder</code> under the hood (which is the same as what modern Java compilers do with <code>+</code> concatenation).</p>\n\n<p>Just as an example, if you take this code:</p>\n\n<pre><code>val kt = \"Kotlin\"\nprintln(\"hello $kt\")\n</code></pre>\n\n<p>The string template operation looks like this in the bytecode (which is moderately legible):</p>\n\n<pre><code>LINENUMBER 8 L2\nNEW java/lang/StringBuilder\nDUP\nINVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\nLDC \"hello \"\nINVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\nALOAD 1\nINVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\nINVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\nASTORE 2\n</code></pre>\n\n<p>Back to the point. So now the question is what <code>StringBuilder</code> uses when you append a <code>double</code> to it. If you look up the documentation, it uses the <code>String.valueOf(double)</code> method, which in turn uses <code>Double.toString(double)</code>, for which you can find the documentation <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString(double)\" rel=\"noreferrer\">here</a> to see how it formats the values given to it. Short summary: it uses <code>.</code> as the decimal separator, and gives you exponential notation with <code>E</code> for very small and very large numbers.</p>\n\n<p>The documentation in the last link suggests to use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html\" rel=\"noreferrer\"><code>NumberFormat</code></a> if you want to format it differently. I'd also suggest <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.util.Locale,%20java.lang.String,%20java.lang.Object...)\" rel=\"noreferrer\"><code>String.format</code></a>, which you can pass a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\" rel=\"noreferrer\"><code>Locale</code></a> to.</p>\n"}], "owner": {"reputation": 8470, "user_id": 1245622, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/V7rHB.jpg?s=128&g=1", "display_name": "linqu", "link": "https://stackoverflow.com/users/1245622/linqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 42840792, "answer_count": 1, "score": 4, "last_activity_date": 1537520493, "creation_date": 1489675888, "last_edit_date": 1537520493, "question_id": 42837477, "link": "https://stackoverflow.com/questions/42837477/which-locale-is-used-for-kotlins-string-templates", "title": "Which locale is used for kotlin&#39;s string templates?", "body": "<p>The <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#string-templates\" rel=\"nofollow noreferrer\">documentation</a> does not cover which locale is used to convert variables to strings. An example:</p>\n\n<pre><code>val d = 0.1234\nval s = \"$d\"\n</code></pre>\n\n<p>Will <code>s</code> be <code>0.1234</code> or <code>0,1234</code> which reflects my machine's local (<code>de_AT</code>)?</p>\n\n<p>Any means to adjust it?</p>\n"}, {"tags": ["android", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489669834, "post_id": 42835012, "comment_id": 72779288, "body": "Do you have the same Kotlin version specified in both modules?"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1489670014, "post_id": 42835012, "comment_id": 72779420, "body": "@zsmb13 I only have 1 Kotlin library defined on the project, both modules import this one."}, {"owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "edited": false, "score": 0, "creation_date": 1489932836, "post_id": 42835012, "comment_id": 72877183, "body": "Could you post your Kotlin <code>build.gradle</code> files?"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "reply_to_user": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "edited": false, "score": 0, "creation_date": 1490047059, "post_id": 42835012, "comment_id": 72928599, "body": "@Ritave No Gradle, I&#39;m using IntelliJ build."}], "answers": [{"tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": true, "score": 0, "last_activity_date": 1490182893, "creation_date": 1490182893, "answer_id": 42950629, "question_id": 42835012, "link": "https://stackoverflow.com/questions/42835012/multiple-values-are-not-allowed-for-plugin-option-org-jetbrains-kotlin-androidp/42950629#42950629", "title": "Multiple values are not allowed for plugin option org.jetbrains.kotlin.android:package", "body": "<p>It is a bug on Kotlin plugin (<a href=\"https://youtrack.jetbrains.com/issue/KT-16888\" rel=\"nofollow noreferrer\">YouTrack reported issue</a>).</p>\n\n<blockquote>\n  <p>Sharing these settings for reading/writing between different module\n  during JPS build may lead to compiler settings (plugionOptions, in\n  particular) of several modules to be mixed</p>\n</blockquote>\n\n<p>Fixed on commit <a href=\"https://github.com/jetbrains/kotlin/commit/505a6bcbf2f3a9d697861bf8025c85b0b52c122b\" rel=\"nofollow noreferrer\">505a6bcbf2f3a9d697861bf8025c85b0b52c122b</a>.</p>\n"}], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 42950629, "answer_count": 1, "score": 1, "last_activity_date": 1490182893, "creation_date": 1489669742, "last_edit_date": 1489675391, "question_id": 42835012, "link": "https://stackoverflow.com/questions/42835012/multiple-values-are-not-allowed-for-plugin-option-org-jetbrains-kotlin-androidp", "title": "Multiple values are not allowed for plugin option org.jetbrains.kotlin.android:package", "body": "<p>I'm using IntelliJ IDEA for Android development with Kotlin. I have 5 Android modules in the project: 3 are Java, 2 are Kotlin.</p>\n\n<p>Everything was working fine but after a \"Rebuild Project\" suddenly I'm getting this error:</p>\n\n<pre><code>Information:Kotlin: Kotlin JPS plugin version 1.1.1\nInformation:Kotlin: Plugin loaded: KotlinAndroidJpsPlugin\nInformation:Kotlin: Using kotlin-home = /home/user/.IdeaIC2016.3/config/plugins/Kotlin/kotlinc\nInformation:Kotlin: Kotlin Compiler version 1.1.1\nInformation:javac 1.8.0_91 was used to compile java sources\nInformation:3/16/17 2:13 PM - Compilation completed with 1 error and 0 warnings in 4s 716ms\nError:Kotlin: Multiple values are not allowed for plugin option org.jetbrains.kotlin.android:package\nPlugin \"org.jetbrains.kotlin.android\" usage:\n  variant &lt;name;path&gt;        Android build variant (required, multiple)\n  package &lt;fq name&gt;          Application package (required)\n</code></pre>\n\n<p>If I remove any Kotlin module, the error goes away.</p>\n\n<hr>\n\n<p>EDIT: building the Kotlin modules separately doesn't throw this error, so I guess this is a Kotlin plugin bug.</p>\n"}, {"tags": ["android", "kotlin", "anko"], "comments": [{"owner": {"reputation": 1091, "user_id": 3423539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99231e6fe7118c7409fdbcedd6d3afcc?s=128&d=identicon&r=PG", "display_name": "yanex", "link": "https://stackoverflow.com/users/3423539/yanex"}, "edited": false, "score": 1, "creation_date": 1489686602, "post_id": 42834533, "comment_id": 72791789, "body": "Why do you want to mock <code>AnkoContext</code>? You can create it normally in tests using the <code>AnkoContext.create()</code> function."}], "owner": {"reputation": 1509, "user_id": 375830, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/43aa4c0ca13734c632d1691d859aa5f7?s=128&d=identicon&r=PG", "display_name": "codysehl", "link": "https://stackoverflow.com/users/375830/codysehl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1489668410, "creation_date": 1489668410, "question_id": 42834533, "link": "https://stackoverflow.com/questions/42834533/testing-ankocomponents-and-mocking-ankocontext", "title": "Testing AnkoComponents and mocking AnkoContext", "body": "<p>I'm writing an Android application in Kotlin.\nI also use the <a href=\"https://github.com/Kotlin/anko\" rel=\"nofollow noreferrer\">Anko</a> view library to replace xml with programmatic view creations.</p>\n\n<p>I'd like to write specs for my views  (which are AnkoComponents).</p>\n\n<p>Is there an accepted methodology for doing this?\nI can't seem to find any information on specs + anko by googling or looking at the Anko docs.</p>\n\n<p>Specifically, I'd like to test the <code>createView(ui : AnkoContext&lt;T&gt;)</code> method.</p>\n\n<p>More specifically (and what I'm hoping will be answered by asking this question), is how do I mock out an <code>AnkoContext&lt;T&gt;</code> which I can pass to <code>createView</code> in my test?</p>\n"}, {"tags": ["android", "kotlin", "async-await", "coroutine", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 20308, "user_id": 1051598, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f9c354e780ce562daea0e21b99bfdc0d?s=128&d=identicon&r=PG", "display_name": "Roman  Elizarov", "link": "https://stackoverflow.com/users/1051598/roman-elizarov"}, "is_accepted": true, "score": 9, "last_activity_date": 1514488099, "last_edit_date": 1514488099, "creation_date": 1489659904, "answer_id": 42831291, "question_id": 42829575, "link": "https://stackoverflow.com/questions/42829575/is-there-a-way-to-reuse-a-job-instance/42831291#42831291", "title": "Is there a way to reuse a Job instance?", "body": "<p>A <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/-job/index.html\" rel=\"noreferrer\">Job</a> has a very simple life-cycle by design. Its \"Completed\" state is <em>final</em>, very much similar to the \"Destroyed\" state of the Android <code>Activity</code>. So, a parent <code>Job</code> is best to be associated with an <code>Activity</code>, as explained in the guide. You should cancel a parent job if and only if the activity is destroyed. Because a destroyed activity cannot be reused, you'll never run into the need to reuse its job.</p>\n\n<p>The recommended approach to starting the work on each click is by using actors, because they help you avoid unneccesary concurrency. The guide shows how to start them on each click, but it does not show how to cancel a currently running action. </p>\n\n<p>You will need a fresh instance of <code>Job</code> in a combination with <code>withContext</code> to make a block of code cancellable separately from everything else:</p>\n\n<pre><code>fun View.onClick(action: suspend () -&gt; Unit) {\n    var currentJob: Job? = null // to keep a reference to the currently running job\n    // launch one actor as a parent of the context job\n    // actor prevent concurrent execution of multiple actions\n    val eventActor = actor&lt;Unit&gt;(contextJob + UI, capacity = Channel.CONFLATED) {\n        for (event in channel) {\n            currentJob = Job(contextJob) // create a new job for this action\n            try {\n                // run an action within its own job\n                withContext(currentJob!!) { action() }\n            } catch (e: CancellationException) {\n                // we expect it to be cancelled and just need to continue\n            }\n        }\n    }\n    // install a listener to send message to this actor\n    setOnClickListener {\n        currentJob?.cancel() // cancel whatever job we were doing now (if any)\n        eventActor.offer(Unit) // signal to start next action when possible\n    }\n}\n</code></pre>\n\n<p>An actor is always active until its parent job (attached to an activity) is cancelled. An actor waits for clicks and starts an <code>action</code> on each click. However, each invocation of an <code>action</code> is wrapped into its own <code>Job</code> using <code>withContext</code> block, so that it can be cancelled separately from its parent job.</p>\n\n<p>Note, that this code gracefully works for actions that are non-cancellable or just take some time to cancel. An action might need to cleanup its resources when it is cancelled, and, because this code uses an actor, it ensures that the cleanup of the previous action is finished before the next one is started. </p>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2990, "favorite_count": 4, "accepted_answer_id": 42831291, "answer_count": 1, "score": 10, "last_activity_date": 1552981902, "creation_date": 1489655361, "last_edit_date": 1552981902, "question_id": 42829575, "link": "https://stackoverflow.com/questions/42829575/is-there-a-way-to-reuse-a-job-instance", "title": "Is there a way to reuse a Job instance?", "body": "<p>I'm exploring the use of co-routines in the context of Android UI thread. I implemented <code>contextJob</code> as described in the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md#using-coroutine-parent-child-hierarchy\" rel=\"nofollow noreferrer\">Coroutines Guide UI</a>. Background work is stared from GUI and I want to re-start it on every click (stop the currently running one and start it again). </p>\n\n<p>But a job once canceled cannot be reused so even creating a child-job:</p>\n\n<pre><code> val job = Job(contextJob)\n</code></pre>\n\n<p>and cancelling it does not help because it has to be-reassigned. </p>\n\n<p>Is there a way to reuse a Job instance?</p>\n"}]