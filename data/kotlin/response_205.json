[{"tags": ["android", "multithreading", "kotlin", "coroutine", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 749, "user_id": 2790016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c732b2e41421012ba51b6707713a620?s=128&d=identicon&r=PG&f=1", "display_name": "Beto", "link": "https://stackoverflow.com/users/2790016/beto"}, "edited": false, "score": 0, "creation_date": 1544717118, "post_id": 53756174, "comment_id": 94383435, "body": "thanks for that! I am curious about you second point. How come that it does not make sense to have await on one line? I did see android studio suggested using withContext() but I wasn&#39;t sure why"}, {"owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "reply_to_user": {"reputation": 749, "user_id": 2790016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c732b2e41421012ba51b6707713a620?s=128&d=identicon&r=PG&f=1", "display_name": "Beto", "link": "https://stackoverflow.com/users/2790016/beto"}, "edited": false, "score": 2, "creation_date": 1544724667, "post_id": 53756174, "comment_id": 94387375, "body": "With <code>async()</code> you start a new coroutine and it will return a <code>Deferred</code>. The <code>Deferred</code> has the <code>await</code> function to resolve the result of the other coroutine. Typically you use <code>async&#47;await</code> to start multiple tasks that should run in parallel. At the end you collect the result of all tasks. The <code>withContext</code> function is used to switch the dispatcher/thread for some subtasks, but you still need to run the (sub)tasks sequentially.  Therefor <code>async&#47;await</code> in one statement is the same as <code>withContext</code>, but does not communicate your intend."}], "tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 7, "last_activity_date": 1544682709, "creation_date": 1544682709, "answer_id": 53756174, "question_id": 53752991, "link": "https://stackoverflow.com/questions/53752991/is-await-blocking-the-ui-thread-on-android/53756174#53756174", "title": "Is await blocking the UI thread on android?", "body": "<p>Coroutines will not block the thread on suspending. The Kotlin compiler generates a state machine that detaches and attaches the coroutines from the thread, see <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md\" rel=\"noreferrer\">https://github.com/Kotlin/kotlinx.coroutines/blob/master/ui/coroutines-guide-ui.md</a>.</p>\n\n<p>In your case <code>GlobalScope.launch(Dispatchers.Main)</code> starts a new coroutine confined to the UI thread. Then <code>async()</code> starts a new coroutine confined to another dispatcher. The invocation of <code>await()</code> is a suspending function and will detach the first coroutine from the UI thread, waiting for the completion of the <code>async</code>-coroutine. </p>\n\n<p>BTW:\nYou should not use <code>async</code> and <code>await</code> in one statement. That makes no sense. \nWhat you really want is to run the <code>queryDevices()</code>-function from another dispatcher, but not asynchronously from the perspective of coroutines. In this case you should use <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/with-context.html\" rel=\"noreferrer\"><code>withContext()</code></a></p>\n"}], "owner": {"reputation": 749, "user_id": 2790016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7c732b2e41421012ba51b6707713a620?s=128&d=identicon&r=PG&f=1", "display_name": "Beto", "link": "https://stackoverflow.com/users/2790016/beto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 53756174, "answer_count": 1, "score": 1, "last_activity_date": 1544682709, "creation_date": 1544657693, "last_edit_date": 1544670615, "question_id": 53752991, "link": "https://stackoverflow.com/questions/53752991/is-await-blocking-the-ui-thread-on-android", "title": "Is await blocking the UI thread on android?", "body": "<p>I have been wrapping my head around coroutines and I was wondering about the following code. \nI have the following operation on my <strong>onCreate()</strong>. </p>\n\n<pre><code>asyncJob = GlobalScope.launch(Dispatchers.Main) {\n    val name = async(Dispatchers.Default) { queryDevices() }.await()\n    mDeviceName.text = deviceName\n}\n</code></pre>\n\n<p>Printing this out the order of execution seems to be before \"name\" is\non UI thread and after name is set, it is on the UI thread as well. \nThe <strong>queryDevicesMethod()</strong> is in a background thread as expected. </p>\n\n<p>But I wanted to know what <strong>await()</strong> is actually doing when calling it on the UI thread?\nIs it blocking theUI thread until await returns?</p>\n"}, {"tags": ["java", "android", "charts", "kotlin", "mpandroidchart"], "comments": [{"owner": {"reputation": 1040, "user_id": 7595401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf2a6fe53a1b998b64eafeb228f1e6b2?s=128&d=identicon&r=PG", "display_name": "pavi2410", "link": "https://stackoverflow.com/users/7595401/pavi2410"}, "edited": false, "score": 0, "creation_date": 1544656843, "post_id": 53752205, "comment_id": 94358562, "body": "Please remove the Java tag"}], "answers": [{"tags": [], "owner": {"reputation": 2041, "user_id": 4117756, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/541584706/picture?type=large", "display_name": "Alberto Crespo", "link": "https://stackoverflow.com/users/4117756/alberto-crespo"}, "is_accepted": true, "score": 2, "last_activity_date": 1545110672, "last_edit_date": 1545110672, "creation_date": 1545109215, "answer_id": 53826644, "question_id": 53752205, "link": "https://stackoverflow.com/questions/53752205/marker-view-not-showing-with-mpchartandroid-library/53826644#53826644", "title": "Marker view not showing with MPChartAndroid library", "body": "<p>I had the same issue. I solved passing the <code>activity</code> to my <code>MyMarkerView</code> instance, passing the <code>super.contentRefresh()</code> in my <code>MyMarkerView</code> and then I made a few changes in the <code>xml</code>.</p>\n\n<p>So: \n<code>pieChart.setMarker(new MyMarkerView(MyActivity.this, R.layout.marker_chart_popup));</code></p>\n\n<p><code>MyMarkerView</code> code:\npublic class MyMarkerView extends MarkerView {</p>\n\n<pre><code>    private TextView tvContent;\n\n    public MyMarkerView (Context context, int layoutResource) {\n        super(context, layoutResource);\n\n        tvContent = (TextView) findViewById(R.id.tvContent);\n    }\n\n    @Override\n    public void refreshContent(Entry e, Highlight highlight) {\n        tvContent.setText(\"my value \" + e.getY()));             \n        super.refreshContent(e, highlight); // &lt;----- IMPORTANT\n\n    }\n\n}\n</code></pre>\n\n<p>and my custom layout <code>marker_chart_popup</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:minHeight=\"20dp\"\n    android:minWidth=\"60dp\"\n    android:background=\"@android:color/black\"\n    &gt;\n\n    &lt;TextView\n        android:id=\"@+id/tvContent\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_centerVertical=\"true\"\n        android:text=\"test\"\n        android:textSize=\"20dp\"\n        android:layout_margin=\"5dp\"\n        android:textColor=\"@android:color/white\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>I worked for me, i hope it helps you.</p>\n"}], "owner": {"reputation": 401, "user_id": 10778725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91a11510a77e8ebeb72867ee941142eb?s=128&d=identicon&r=PG&f=1", "display_name": "Jos&#233; Nobre", "link": "https://stackoverflow.com/users/10778725/jos%c3%a9-nobre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 53826644, "answer_count": 1, "score": 1, "last_activity_date": 1545110672, "creation_date": 1544652947, "last_edit_date": 1544653716, "question_id": 53752205, "link": "https://stackoverflow.com/questions/53752205/marker-view-not-showing-with-mpchartandroid-library", "title": "Marker view not showing with MPChartAndroid library", "body": "<p>I am facing an issue where I am building a custom marker but the marker does not appear. This is my code from the char activity. Could it be that the problem is from the <code>getEntryForIndex(index).icon</code>?</p>\n\n<p><strong>This is my main activity</strong></p>\n\n<pre><code> class Main2Activity : AppCompatActivity(), OnChartValueSelectedListener {\n\n\n    lateinit var dataSet : LineDataSet\n\n    @RequiresApi(Build.VERSION_CODES.LOLLIPOP)\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        /**\n         * Get the first year value from the API and to the logic here for each here\n         */\n        var fistYearValue = 9\n        var secondYearValue = 10\n        var thirdYearValue = 11\n        var fourthYearValue = 12\n        var fifthYearValue = 13\n        var sixthYearValue = 14\n        var sevenearValue = 15\n        var eigthYearValue = 16\n\n\n        val numArr = intArrayOf(fistYearValue, secondYearValue, thirdYearValue, fourthYearValue, fifthYearValue,\n            sixthYearValue,sevenearValue,eigthYearValue)\n\n        val numMap = HashMap&lt;Int, Any&gt;()\n\n        /**\n         * TODO get current year and increment by 8\n         */\n        numMap[fistYearValue] = \"2018\"\n        numMap[secondYearValue] = \"2019\"\n        numMap[thirdYearValue] = \"2020\"\n        numMap[fourthYearValue] = \"2021\"\n        numMap[fifthYearValue] = \"2022\"\n        numMap[sixthYearValue] = \"2023\"\n        numMap[sevenearValue] = \"2024\"\n        numMap[eigthYearValue] = \"2025\"\n        val entries1 = ArrayList&lt;Entry&gt;()\n\n\n        /**\n         * Define xAxix variable\n         */\n        var xAxis = linechart.xAxis\n\n\n        /**\n         * Configure xAxix\n         */\n        xAxis.setDrawGridLines(false)\n        xAxis.axisLineColor = Color.TRANSPARENT\n        xAxis.position = XAxis.XAxisPosition.BOTTOM\n\n        linechart.setOnChartValueSelectedListener(this)\n\n\n\n        for (num in numArr)\n        {\n            entries1.add(Entry(num.toFloat(), num.toFloat()))\n        }\n        dataSet = LineDataSet(entries1, \"Numbers\")\n\n\n        /**\n         * Configure data set\n         */\n        dataSet.setDrawFilled(true)\n        val drawable = ContextCompat.getDrawable(this, R.drawable.chart_background)\n        dataSet.fillDrawable = drawable\n\n\n        /**\n         * Hide grid layout\n         */\n        linechart.axisLeft.setDrawGridLines(false)\n        linechart.axisRight.setDrawGridLines(false)\n        linechart.isHighlightPerTapEnabled = true\n        linechart.axisRight.setDrawLabels(false)\n        linechart.axisRight.isEnabled = false\n        linechart.axisLeft.setDrawLabels(false)\n        linechart.axisLeft.isEnabled = false\n        linechart.legend.isEnabled = false\n        linechart.description.text = \"\"\n\n\n        //dataSet.getEntryForIndex(0).icon = getDrawable(R.drawable.ic_group_7)\n        /**\n         * Zooming and pinching functions\n         */\n        linechart.setScaleEnabled(false)\n        linechart.setPinchZoom(false)\n\n\n        linechart.setDrawMarkers(true)\n        dataSet.setDrawHorizontalHighlightIndicator(false)\n        dataSet.highLightColor = Color.parseColor(\"#4e4e4e\")\n        dataSet.color = Color.BLACK\n        dataSet.setDrawCircles(false)\n        dataSet.setDrawValues(false)\n\n\n        val data = LineData(dataSet)\n        xAxis = linechart.xAxis\n        xAxis.valueFormatter = IAxisValueFormatter { value, axis -&gt; numMap.get(value.toInt()).toString() }\n        linechart.data = data\n        linechart.invalidate()\n\n    }\n\n\n    override fun onNothingSelected() {}\n\n    @RequiresApi(Build.VERSION_CODES.LOLLIPOP)\n    override fun onValueSelected(e: Entry?, h: Highlight?) {\n\n        var previousIndex  = PreferenceManager.getDefaultSharedPreferences(applicationContext)\n            .getInt(\"INDEX\", 0)\n\n        dataSet.getEntryForIndex(previousIndex).icon = null\n\n\n        //save current position\n        var index = dataSet.getEntryIndex(e)\n        PreferenceManager.getDefaultSharedPreferences(applicationContext).edit()\n            .putInt(\"INDEX\", index).apply()\n\n        //set current position\n        dataSet.getEntryForIndex(index).icon = getDrawable(R.drawable.ic_group_7)\n        var x = linechart.xAxis.valueFormatter.getFormattedValue(e?.x!!, linechart.xAxis)\n        var y = linechart.xAxis.valueFormatter.getFormattedValue(e.y, linechart.xAxis)\n\n        var mv =  MyMarkerView(this, R.layout.marker)\n        mv.chartView = linechart\n\n    }\n\n    inner class MyMarkerView(context: Context, layoutResource: Int) : MarkerView(context, layoutResource) {\n\n        private val tvContent: TextView = findViewById&lt;TextView&gt;(R.id.tvContent)\n\n\n        override fun refreshContent(e: Entry?, highlight: Highlight?) {\n            tvContent.text = \"3\"\n        }\n\n        override fun getX(): Float {\n            return (-(width / 2)).toFloat()\n        }\n\n\n        override fun getY(): Float {\n            return (-height).toFloat()\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>This is my marker.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"40dp\" &gt;\n\n    &lt;TextView\n            android:id=\"@+id/tvContent\"\n            android:layout_width=\"40dp\"\n            android:layout_height=\"40dp\"\n            android:layout_centerHorizontal=\"true\"\n            android:text=\"\"\n            android:textSize=\"12dp\"\n            android:textColor=\"@android:color/black\"\n            android:ellipsize=\"end\"\n            android:singleLine=\"true\"\n            android:textAppearance=\"?android:attr/textAppearanceSmall\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "dependencies", "android-databinding"], "comments": [{"owner": {"reputation": 3400, "user_id": 83253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97967c54aa974a80ae15434f32a112a?s=128&d=identicon&r=PG", "display_name": "Michael B.", "link": "https://stackoverflow.com/users/83253/michael-b"}, "edited": false, "score": 0, "creation_date": 1544652860, "post_id": 53751558, "comment_id": 94357152, "body": "What version of Android Studio and Android tools are you using ?"}, {"owner": {"reputation": 13, "user_id": 10663366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b5e7a2cddf480fd4173da6c155157f9?s=128&d=identicon&r=PG&f=1", "display_name": "ced3eals", "link": "https://stackoverflow.com/users/10663366/ced3eals"}, "reply_to_user": {"reputation": 3400, "user_id": 83253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97967c54aa974a80ae15434f32a112a?s=128&d=identicon&r=PG", "display_name": "Michael B.", "link": "https://stackoverflow.com/users/83253/michael-b"}, "edited": false, "score": 0, "creation_date": 1544654234, "post_id": 53751558, "comment_id": 94357699, "body": "I&#39;m using  Android Studio 3.2.1 JRE: 1.8.0_152-release-1136-b06 amd64 JVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o Windows 10 10.0"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 7701297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KxrmjavhI_4/AAAAAAAAAAI/AAAAAAAAH4A/2C8XKXtONcU/photo.jpg?sz=128", "display_name": "bam bam", "link": "https://stackoverflow.com/users/7701297/bam-bam"}, "is_accepted": true, "score": 1, "last_activity_date": 1544660247, "creation_date": 1544660247, "answer_id": 53753299, "question_id": 53751558, "link": "https://stackoverflow.com/questions/53751558/compiling-problem-after-adding-databinding-in-android-studio/53753299#53753299", "title": "Compiling problem after adding databinding in android studio", "body": "<p>If you are using data binding with kotlin, you need to add this in your <code>build.gradle</code></p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n\ndependencies {\n    kapt \"com.android.databinding:compiler:3.2.1\" // this version must like com.android.tools.build:gradle version\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10663366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b5e7a2cddf480fd4173da6c155157f9?s=128&d=identicon&r=PG&f=1", "display_name": "ced3eals", "link": "https://stackoverflow.com/users/10663366/ced3eals"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 53753299, "answer_count": 1, "score": 1, "last_activity_date": 1544660247, "creation_date": 1544649743, "question_id": 53751558, "link": "https://stackoverflow.com/questions/53751558/compiling-problem-after-adding-databinding-in-android-studio", "title": "Compiling problem after adding databinding in android studio", "body": "<p>When I'm trying to compile my Android project using dataBinding ressouce, I get this error message</p>\n\n<pre><code>w: warning: The following options were not recognized by any processor: \n'[android.databinding.artifactType, android.databinding.printEncodedErrors, \nandroid.databinding.minApi, android.databinding.isTestVariant, \nandroid.databinding.enableDebugLogs, android.databinding.sdkDir, \nandroid.databinding.bindingBuildFolder, android.databinding.enableForTests, \nandroid.databinding.modulePackage, kapt.kotlin.generated, \nandroid.databinding.generationalFileOutDir, android.databinding.xmlOutDir]'\n</code></pre>\n\n<p>In the app build.gradle:</p>\n\n<pre><code>android {\n    dataBinding{\n        enabled=true\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "nfc"], "comments": [{"owner": {"reputation": 173, "user_id": 6469835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mTzvnYaxmaA/AAAAAAAAAAI/AAAAAAAAAQs/W9GqL7Bx8YI/photo.jpg?sz=128", "display_name": "Volodymyr Bereziuk", "link": "https://stackoverflow.com/users/6469835/volodymyr-bereziuk"}, "edited": false, "score": 0, "creation_date": 1544645749, "post_id": 53750615, "comment_id": 94354087, "body": "Try this  Log.v(&quot;processIntent&quot;, ndefRecord.payload)"}], "answers": [{"tags": [], "owner": {"reputation": 128160, "user_id": 321697, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/FHlMy.jpg?s=128&g=1", "display_name": "Kevin Coppock", "link": "https://stackoverflow.com/users/321697/kevin-coppock"}, "is_accepted": true, "score": 0, "last_activity_date": 1544650408, "creation_date": 1544650408, "answer_id": 53751687, "question_id": 53750615, "link": "https://stackoverflow.com/questions/53750615/unexpected-text-from-the-nfc-tag/53751687#53751687", "title": "unexpected text from the NFC tag", "body": "<p>In this case, <code>ndefRecord.payload</code> is a <code>ByteArray</code>, so what you're seeing is the default printout of an <code>Object</code> type (<code>[B</code> for byte array; <code>@82162f9</code> for the memory address). </p>\n\n<p>You'll need to convert it to a <code>String</code>. This depends on how the tag data is encoded which will be up to the tag creator. However, assuming it's either UTF-8 or ASCII, you can just use the <code>String</code> constructor:</p>\n\n<pre><code>val payloadString = String(ndefRecord.payload, StandardCharsets.US_ASCII)\nval payloadString = String(ndefRecord.payload, StandardCharsets.UTF_8)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": false, "score": 0, "last_activity_date": 1544651138, "creation_date": 1544651138, "answer_id": 53751858, "question_id": 53750615, "link": "https://stackoverflow.com/questions/53750615/unexpected-text-from-the-nfc-tag/53751858#53751858", "title": "unexpected text from the NFC tag", "body": "<p>for example:</p>\n\n<pre><code>if (rawMessages != null) {\n    val messages = arrayOfNulls&lt;NdefMessage?&gt;(rawMessages.size)\n    for (i in rawMessages.indices) {\n        messages[i] = rawMessages[i] as NdefMessage;\n    }         \n    processNdefMessages(messages)\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>private fun processNdefMessages(ndefMessages: Array&lt;NdefMessage?&gt;) {\n    for (curMsg in ndefMessages) {\n        if (curMsg != null) {\n\n            logMessage(\"Message\", curMsg.toString())\n            logMessage(\"Records\", curMsg.records.size.toString())\n\n            for (curRecord in curMsg.records) {\n                if (curRecord.toUri() != null) {\n                    logMessage(\"- URI\", curRecord.toUri().toString())\n                } else {\n                    logMessage(\"- Contents\", curRecord.payload.contentToString())\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10547458, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VXyeasXMXzc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAoekKugpbUSF921-pfCV1xhWKVjQ/mo/photo.jpg?sz=128", "display_name": "Adrian27045", "link": "https://stackoverflow.com/users/10547458/adrian27045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53751687, "answer_count": 2, "score": 0, "last_activity_date": 1544651138, "creation_date": 1544645332, "question_id": 53750615, "link": "https://stackoverflow.com/questions/53750615/unexpected-text-from-the-nfc-tag", "title": "unexpected text from the NFC tag", "body": "<p>I am making a app with NFC first time.\nIn my tag I have got data MimeType record type ( application/json<br>\nData: \"My text\" ).</p>\n\n<p>This is my code:</p>\n\n<pre><code>private fun processIntent(checkIntent: Intent) {\n\n    if (checkIntent.action == NfcAdapter.ACTION_NDEF_DISCOVERED) {\n\n        // pobieranie wiadomo\u015bci NDEF z taga NFC\n        val rawMessages = checkIntent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES)\n\n        // wiadomo\u015b\u0107 NDEF zawiera wszystkie rekordy z tagu NFC\n        var ndefMsg = rawMessages[0] as NdefMessage\n\n        // pojedynczy 1 rekord z tagu NFC ( indeks 0 to 1 rekord, indeks 1 to 2 rekord itd. )\n        var ndefRecord = ndefMsg.records[0]\n\n        // je\u015bli 1 rekord nie jest pusty to pobierz PAYLOAD ( dane ) i wy\u015bwietl go\n        // je\u015bli 1 rekord jest pusty wy\u015bwietl b\u0142\u0105d\n        if(ndefRecord.toMimeType() != null)\n        {\n            Log.v(\"processIntent\", ndefRecord.payload.toString())\n            var payload = ndefRecord.payload.toString()\n\n\n            textView.text = payload\n            var i = 2\n        }\n        else\n        {\n            Log.e(\"processIntent\", \"ERROR A1\")\n        }\n\n    }\n}\n</code></pre>\n\n<p>In LogCat I have got this:</p>\n\n<pre><code>V/processIntent: [B@82162f9\n</code></pre>\n\n<p>How I can make a my text message from this ( Should be \"My text\" )?</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "kotlin-android-extensions"], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 10707475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3W5M.jpg?s=128&g=1", "display_name": "Jo.........", "link": "https://stackoverflow.com/users/10707475/jo"}, "edited": false, "score": 0, "creation_date": 1544645538, "post_id": 53750508, "comment_id": 94354000, "body": "Thanks @Onur D for your response but my app crashed after the above changes and below is the error.  2018-12-12 13:10:52.742 16606-16606/com.kodechamp.bottomnavigationwithfragmentsinkot&zwnj;&#8203;lin E/AndroidRuntime: FATAL EXCEPTION: main     Process: com.kodechamp.bottomnavigationwithfragmentsinkotlin, PID: 16606     java.lang.IllegalStateException: recyclerView must not be null         at com.kodechamp.bottomnavigationwithfragmentsinkotlin.HomeFrag&zwnj;&#8203;ment.onCreateView(Ho&zwnj;&#8203;meFragment.kt:46)"}, {"owner": {"reputation": 319, "user_id": 8354184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59455048f2e2107501eaf626640004c7?s=128&d=identicon&r=PG&f=1", "display_name": "Onur D.", "link": "https://stackoverflow.com/users/8354184/onur-d"}, "reply_to_user": {"reputation": 120, "user_id": 10707475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3W5M.jpg?s=128&g=1", "display_name": "Jo.........", "link": "https://stackoverflow.com/users/10707475/jo"}, "edited": false, "score": 0, "creation_date": 1544646354, "post_id": 53750508, "comment_id": 94354346, "body": "I did not notice that you also did not hold a reference to your recycler view in your code. Please add this <code>val recyclerView = view.findViewById(R.id.your_recycler_view_id)</code> I also edited my answer."}, {"owner": {"reputation": 120, "user_id": 10707475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3W5M.jpg?s=128&g=1", "display_name": "Jo.........", "link": "https://stackoverflow.com/users/10707475/jo"}, "edited": false, "score": 1, "creation_date": 1544647176, "post_id": 53750508, "comment_id": 94354688, "body": "@You are awesome. It worked for me. I changed the hold reference value of recycler as per kotlin syntax. Thanks for your help once again."}, {"owner": {"reputation": 319, "user_id": 8354184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59455048f2e2107501eaf626640004c7?s=128&d=identicon&r=PG&f=1", "display_name": "Onur D.", "link": "https://stackoverflow.com/users/8354184/onur-d"}, "reply_to_user": {"reputation": 120, "user_id": 10707475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3W5M.jpg?s=128&g=1", "display_name": "Jo.........", "link": "https://stackoverflow.com/users/10707475/jo"}, "edited": false, "score": 0, "creation_date": 1544647561, "post_id": 53750508, "comment_id": 94354848, "body": "@JoshvaJo glad I could help!"}], "tags": [], "owner": {"reputation": 319, "user_id": 8354184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59455048f2e2107501eaf626640004c7?s=128&d=identicon&r=PG&f=1", "display_name": "Onur D.", "link": "https://stackoverflow.com/users/8354184/onur-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1544647589, "last_edit_date": 1544647589, "creation_date": 1544644781, "answer_id": 53750508, "question_id": 53750275, "link": "https://stackoverflow.com/questions/53750275/no-adapter-attached-in-bottom-navigation/53750508#53750508", "title": "No Adapter attached in Bottom Navigation", "body": "<p>The first thing you do in your HomeFragment's onCreateView() is returning your inflated layout. So all of your code inside onCreateView method is untouchable. Instead just hold a reference to your inflated layout and return it at the end.</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,savedInstanceState: Bundle?): View? {\n\n     val view = inflater.inflate(R.layout.fragment_home, container, false)\n        val recyclerView = view.findViewById&lt;RecyclerView&gt;(R.id.recyclerView)\n\n        personList=ArrayList&lt;Person&gt;()\n        layoutManager= LinearLayoutManager(this.context)\n        adapter= PersonListAdapter(personList, this.context!!)\n\n       recyclerView.layoutManager=layoutManager\n        recyclerView.adapter=adapter\n\n        for (i in 0..16) {\n            val person = Person()\n            person.name=\"Hello\" + i\n            person.age = 20 + i\n            personList!!.add(person)\n\n        }\n        adapter!!.notifyDataSetChanged()\n\n        return view\n}\n</code></pre>\n"}], "owner": {"reputation": 120, "user_id": 10707475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o3W5M.jpg?s=128&g=1", "display_name": "Jo.........", "link": "https://stackoverflow.com/users/10707475/jo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 53750508, "answer_count": 1, "score": 0, "last_activity_date": 1544647589, "creation_date": 1544643746, "question_id": 53750275, "link": "https://stackoverflow.com/questions/53750275/no-adapter-attached-in-bottom-navigation", "title": "No Adapter attached in Bottom Navigation", "body": "<p>I am trying to display items in bottom navigation activity using recycler view but I am not getting the item values.</p>\n\n<p>I have three layouts in my project activity_main.xml, list_row.xml and fragment_home.xml. Recycler view is in fragment_home.xml and list_row.xml contains two text views. I am not seeing any error in the code but in the log, I am getting No adapter attached message. Your help is highly appreciated. </p>\n\n<pre><code>    Error:\n    E/RecyclerView: No adapter attached; skipping layout\n\n    Below is the HomeFragment.kt code.\n\n    class HomeFragment : Fragment() {\n\n        private var adapter:PersonListAdapter?=null\n        private var personList:ArrayList&lt;Person&gt;?=null\n        private var layoutManager: RecyclerView.LayoutManager?=null\n\n\n        override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,savedInstanceState: Bundle?): View? {\n\n         return inflater.inflate(R.layout.fragment_home, container, false)\n\n            personList=ArrayList&lt;Person&gt;()\n            layoutManager= LinearLayoutManager(this.context)\n            adapter= PersonListAdapter(personList, this.context!!)\n\n           recyclerView.layoutManager=layoutManager\n            recyclerView.adapter=adapter\n\n            for (i in 0..16) {\n                val person = Person()\n                person.name=\"Hello\" + i\n                person.age = 20 + i\n                personList!!.add(person)\n\n            }\n            adapter!!.notifyDataSetChanged()\n        }\n    }\n\n    MainActivity.kt code\n\n    class MainActivity : AppCompatActivity() {\n\n        private var adapter:PersonListAdapter?=null\n        private var personList:ArrayList&lt;Person&gt;?=null\n        private var layoutManager: RecyclerView.LayoutManager?=null\n\n        private val mOnNavigationItemSelectedListener = BottomNavigationView.OnNavigationItemSelectedListener {item-&gt;\n            when(item.itemId){\n                R.id.home -&gt; {\n                    println(\"home pressed\")\n                    replaceFragment(HomeFragment())\n                    return@OnNavigationItemSelectedListener true\n                }\n                 }\n\n            false\n\n        }\n\n\n        override fun onCreate(savedInstanceState: Bundle?) {\n            super.onCreate(savedInstanceState)\n            setContentView(R.layout.activity_main)\n\n            bottomNavigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n            replaceFragment(HomeFragment())\n\n\n        }\n\n\n        private fun replaceFragment(fragment: Fragment){\n            val fragmentTransaction = supportFragmentManager.beginTransaction()\n            fragmentTransaction.replace(R.id.fragmentContainer, fragment)\n            fragmentTransaction.commit()\n        }\n    }\nData Class:\nclass PersonListAdapter(private val list: ArrayList&lt;Person&gt;?, private val context: Context): RecyclerView.Adapter&lt;PersonListAdapter.ViewHolder&gt;()\n{\n    override fun getItemCount(): Int {\n\n        return list!!.size\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, position: Int): ViewHolder {\n        val view= LayoutInflater.from(context).inflate(R.layout.list_row,parent,false)\n        return ViewHolder(view)\n    }\n    override fun onBindViewHolder(p0: ViewHolder, p1: Int) {\n        p0?.bindItem(list?.get(p1))\n    }\n    class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n    {\n        fun bindItem(person: Person?)\n        {\n            var name: TextView =itemView.findViewById(R.id.name) as TextView\n            var age: TextView =itemView.findViewById(R.id.age) as TextView\n            name.text=person!!.name\n            age.text = person.age.toString()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin", "set", "cartesian-product", "idioms"], "answers": [{"comments": [{"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1544686329, "post_id": 53750303, "comment_id": 94366104, "body": "Nice to see that Arrow has this feature. You&#39;d expect that from a functional programming lib. I prefer not to add an additional dependency just to be able to do this. This answer is great for users of Arrow, or looking for a reason to use Arrow. I&#39;ll await a different answer that might shed light on the problem with either some nifty Kotlin construct, or just a plain: no, it can&#39;t be done without ugly code. ;)"}, {"owner": {"reputation": 559, "user_id": 1916413, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b96269945e9426825bdbba067eb3eaed?s=128&d=identicon&r=PG", "display_name": "Danilo Pianini", "link": "https://stackoverflow.com/users/1916413/danilo-pianini"}, "edited": false, "score": 0, "creation_date": 1617980293, "post_id": 53750303, "comment_id": 118471293, "body": "As of Arrow 0.12.0 this method is deprecated, and it does not work anymore with Arrow 0.13.0. Very unfortunate, I found it elegant and succinct."}], "tags": [], "owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "is_accepted": false, "score": 8, "last_activity_date": 1565610664, "last_edit_date": 1592644375, "creation_date": 1544643851, "answer_id": 53750303, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of/53750303#53750303", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>I would recommend using <a href=\"https://arrow-kt.io/\" rel=\"noreferrer\"><code>Arrow-kt</code></a>'s <a href=\"https://arrow-kt.io/docs/arrow/typeclasses/applicative/\" rel=\"noreferrer\">Applicative</a> on <code>List</code>. See the example:</p>\n<pre><code>val ints = listOf(1, 2, 3, 4)\nval strings = listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)\nval booleans = listOf(true, false)\n\nval combined = ListK.applicative()\n    .tupled(ints.k(), strings.k(), booleans.k())\n    .fix()\n\n// or use the shortcut `arrow.instances.list.applicative.tupled`\n// val combined = tupled(ints, strings, booleans)\n\ncombined.forEach { (a, b, c) -&gt; println(&quot;a=$a, b=$b, c=$c&quot;) }\n</code></pre>\n<p>Which produces the <strong>Cartesian product</strong></p>\n<blockquote>\n<p>a=1, b=a, c=true</p>\n<p>a=1, b=b, c=true</p>\n<p>a=1, b=c, c=true</p>\n<p>a=2, b=a, c=true</p>\n<p>a=2, b=b, c=true</p>\n<p>a=2, b=c, c=true</p>\n<p>a=3, b=a, c=true</p>\n<p>a=3, b=b, c=true</p>\n<p>a=3, b=c, c=true</p>\n<p>a=4, b=a, c=true</p>\n<p>a=4, b=b, c=true</p>\n<p>a=4, b=c, c=true</p>\n<p>a=1, b=a, c=false</p>\n<p>a=1, b=b, c=false</p>\n<p>a=1, b=c, c=false</p>\n<p>a=2, b=a, c=false</p>\n<p>a=2, b=b, c=false</p>\n<p>a=2, b=c, c=false</p>\n<p>a=3, b=a, c=false</p>\n<p>a=3, b=b, c=false</p>\n<p>a=3, b=c, c=false</p>\n<p>a=4, b=a, c=false</p>\n<p>a=4, b=b, c=false</p>\n<p>a=4, b=c, c=false</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1544714560, "post_id": 53763936, "comment_id": 94381851, "body": "With this answer there is still the issue of type variance, because the star projections don&#39;t know or care about the types in the sets that are passed to this functions. This can later result in issues when using the types, because they now have type <code>Any?</code> and have to be downcasted."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1544716180, "post_id": 53763936, "comment_id": 94382965, "body": "^ I was just about to mention this, you lose not only type inference, but also can make mistakes like <code>cartesianProduct(setOf(1, 2), setOf(&quot;a&quot;, &quot;b&quot;)).forEach { (a, b, c) -&gt; println(&quot;a=$a, b=$b, c=$c&quot;) }</code> an it will compile fine but crash at runtime"}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1544716547, "post_id": 53763936, "comment_id": 94383159, "body": "Also the returned value is a <code>List</code> not a product type like <code>TupleN</code> or an <i>heterogeneous list</i> which can bring other issues (i.e. mistakely sort the list)"}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1544718745, "post_id": 53763936, "comment_id": 94384422, "body": "Ah, I hadn&#39;t thought about sorting yet. In my specific use case the order doesn&#39;t matter, so it wasn&#39;t an issue. Although, on my Gist there is one test that asserts equality, which fails for a different order. This doesn&#39;t guarantee the order isn&#39;t touched, though. But my implementation should have a stable order. I&#39;m still looking into a way to improve this implementation with knowledge about types and the number of elements. If you have ideas, feel free to contribute to my answer or elsewhere."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1544720764, "post_id": 53763936, "comment_id": 94385454, "body": "The only way I see it it to have a function of each arity, like:  <code>fun &lt;A, B&gt; cartesianProduct(a: List&lt;A&gt;, b: List&lt;B&gt;): List&lt;Pair&lt;A, B&gt;&gt; = TODO()</code>  <code>fun &lt;A, B, C&gt; cartesianProduct(a: List&lt;A&gt;, b: List&lt;B&gt;, c: List&lt;C&gt;): List&lt;Triple&lt;A, B, C&gt;&gt; = TODO()</code>"}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 1, "creation_date": 1544792460, "post_id": 53763936, "comment_id": 94411640, "body": "You&#39;re right. Looking at Arrow&#39;s source, they have data class definitions for tuples from two through twenty-two elements. Any larger amount of arguments is unlikely and probably is too computationally heavy. I&#39;ll leave my answer for reference as a naive implementation in which type information is erased, which still can be useful for whomever doesn&#39;t want Arrow as an extra dependency."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1545036989, "post_id": 53763936, "comment_id": 94471707, "body": "I&#39;ve found another way, editing and updating the answer right now."}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1545065655, "post_id": 53763936, "comment_id": 94487868, "body": "Your solution still lacks type safety, and will crash at runtime if the function passed as parameter  is not the same arity or signature (i.e <code>fun abc(a: String, b: String, c: String)</code>"}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1588149986, "post_id": 53763936, "comment_id": 108786074, "body": "A slight improvement to this implementation would be to not define it for zero or one input arguments: you cannot create the cartesian product of zero or one set; it&#39;s always two or more. Furthermore, it should be possible to also define the product operator for two sets, so that in code the cartesian product can be created by simply calling <code>val cartesianProduct = setA * setB</code>."}, {"owner": {"reputation": 107, "user_id": 2997623, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1551dbb11c9f96c10dd831dc09e1f9ae?s=128&d=identicon&r=PG&f=1", "display_name": "Al A", "link": "https://stackoverflow.com/users/2997623/al-a"}, "edited": false, "score": 0, "creation_date": 1591111010, "post_id": 53763936, "comment_id": 109928184, "body": "If one of the sets is empty, this will not work. A quick workaround is:                  if (set.isEmpty())                     acc                 else                     acc.flatMap { list -&gt; set.map{ element -&gt; list + element } }"}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 107, "user_id": 2997623, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1551dbb11c9f96c10dd831dc09e1f9ae?s=128&d=identicon&r=PG&f=1", "display_name": "Al A", "link": "https://stackoverflow.com/users/2997623/al-a"}, "edited": false, "score": 0, "creation_date": 1591129285, "post_id": 53763936, "comment_id": 109937820, "body": "@AlA you are, unfortunately, incorrect, because <i>by definition</i> the cartesian product of any set with the empty set is the empty set. That is what my solution does return, so there is no need for a workaround."}], "tags": [], "owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "is_accepted": true, "score": 13, "last_activity_date": 1591132147, "last_edit_date": 1591132147, "creation_date": 1544710791, "answer_id": 53763936, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of/53763936#53763936", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>I've created a solution myself, so I don't have to add a dependency as suggested by <a href=\"https://stackoverflow.com/a/53750303/3169029\">Omar's answer</a>.</p>\n\n<p>I created a function that takes two or more sets of any size:</p>\n\n<pre><code>fun cartesianProduct(a: Set&lt;*&gt;, b: Set&lt;*&gt;, vararg sets: Set&lt;*&gt;): Set&lt;List&lt;*&gt;&gt; =\n    (setOf(a, b).plus(sets))\n        .fold(listOf(listOf&lt;Any?&gt;())) { acc, set -&gt;\n            acc.flatMap { list -&gt; set.map { element -&gt; list + element } }\n        }\n        .toSet()\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>val a = setOf(1, 2)\nval b = setOf(3, 4)\nval c = setOf(5)\nval d = setOf(6, 7, 8)\n\nval abcd: Set&lt;List&lt;*&gt;&gt; = cartesianProduct(a, b, c, d)\n\nprintln(abcd)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[1, 3, 5, 6], [1, 3, 5, 7], [1, 3, 5, 8], [1, 4, 5, 6], [1, 4, 5, 7], [1, 4, 5, 8], [2, 3, 5, 6], [2, 3, 5, 7], [2, 3, 5, 8], [2, 4, 5, 6], [2, 4, 5, 7], [2, 4, 5, 8]]\n</code></pre>\n\n<p>The function <code>cartesianProduct</code> returns a set of lists. There's a number of problems with these lists:</p>\n\n<ul>\n<li>Any type information is lost, because the returned set contains lists that contain the union of types of the input sets. The returned type of these lists' elements is <code>Any?</code>. The function returns a <code>Set&lt;List&lt;*&gt;&gt;</code>, i.e. <code>Set&lt;List&lt;Any?&gt;&gt;</code>.</li>\n<li>By definition, the size of the lists isn't known; they are not like a Kotlin <code>Pair</code> or <code>Triple</code>, where the size is a constant by definition. However, the size of these lists/tuples should be equal to the number of input sets, i.e. 4 in the example above.</li>\n</ul>\n\n<p>However, using reflection, we can solve these problems. The action we want to take with every list can be written as a function (e.g. a constructor of some class, which is also just a function):</p>\n\n<pre><code>data class Parameters(val number: Int, val maybe: Boolean?) {\n    override fun toString() = \"number = $number, maybe = $maybe\"\n}\n\nval e: Set&lt;Int&gt; = setOf(1, 2)\nval f: Set&lt;Boolean?&gt; = setOf(true, false, null)\n\nval parametersList: List&lt;Parameters&gt; = cartesianProduct(e, f).map { ::Parameters.call(*it.toTypedArray()) }\n\nprintln(parametersList.joinToString(\"\\n\"))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>number = 1, maybe = true\nnumber = 1, maybe = false\nnumber = 1, maybe = null\nnumber = 2, maybe = true\nnumber = 2, maybe = false\nnumber = 2, maybe = null\n</code></pre>\n\n<p>The signature of the transform (<code>::Parameters</code> in the example) specifies the contract for the lists' contents.</p>\n\n<p>Because <code>map { ::Parameters.call(*it.toTypedArray()) }</code> is not very nice, I've created a second extension function that does it for me:</p>\n\n<pre><code>fun &lt;T&gt; Set&lt;List&lt;*&gt;&gt;.map(transform: KFunction&lt;T&gt;) = map { transform.call(*it.toTypedArray()) }\n</code></pre>\n\n<p>With that, the code becomes quite idiomatic:</p>\n\n<pre><code>val parametersList: List&lt;Parameters&gt; = cartesianProduct(e, f).map(::Parameters)\n</code></pre>\n\n<p>The code is available from <a href=\"https://gist.github.com/erikhuizinga/d2ca2b501864df219fd7f25e4dd000a4\" rel=\"noreferrer\">this GitHub Gist</a>, where I will update it if I ever improve it. There are also tests: the cartesian product that includes any empty set returns the empty set, <a href=\"https://en.wikipedia.org/w/index.php?title=Cartesian_product&amp;oldid=872517904#Non-commutativity_and_non-associativity\" rel=\"noreferrer\">as is mathematically expected</a>. I'm neither saying that this is an optimal solution, nor that it is mathematically sound (not every mathematical property is explicitly implemented and tested), but it works for the question's purpose.</p>\n"}, {"comments": [{"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1588158916, "post_id": 61499008, "comment_id": 108790753, "body": "<code>operator fun &lt;T, U&gt; Set&lt;T&gt;.times(ys: Set&lt;U&gt;): Set&lt;Set&lt;*&gt;&gt;</code> must return <code>Set&lt;List&lt;*&gt;&gt;</code>, because e.g. <code>setOf(1, 2) * setOf(1, 2) must return (among other values) two (not one) lists (not sets) containing </code>1` and <code>2</code>."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1588159258, "post_id": 61499008, "comment_id": 108790952, "body": "Wait, that&#39;s an incorrect example in my previous comment. The return type must be <code>Set&lt;List&lt;*&gt;&gt;</code>, but the example sets were incorrect. A correct example: <code>setOf(1) * setOf(1)</code> must return two ones <code>setOf(listOf(1, 1))</code>, i.e. <code>[[1, 1]]</code>, but in your answer you return just one one (<code>[[1]]</code>) in the resulting <code>setOf(setOf(1))</code>."}], "tags": [], "owner": {"reputation": 129, "user_id": 2827089, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/747896240/picture?type=large", "display_name": "Cam Hashemi", "link": "https://stackoverflow.com/users/2827089/cam-hashemi"}, "is_accepted": false, "score": 1, "last_activity_date": 1588154351, "last_edit_date": 1588154351, "creation_date": 1588154034, "answer_id": 61499008, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of/61499008#61499008", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>Here's another way to do it with an arbitrary combiner function:</p>\n\n<pre><code>fun &lt;T, U, V&gt; product(xs: Collection&lt;T&gt;, ys: Collection&lt;U&gt;, combiner: (T, U) -&gt; V): Collection&lt;V&gt; =\n    xs.flatMap { x -&gt;\n        ys.map { y -&gt;\n            combiner(x, y)\n        }\n    }\n\noperator fun &lt;T, U&gt; Set&lt;T&gt;.times(ys: Set&lt;U&gt;): Set&lt;Set&lt;*&gt;&gt; =\n    product(this, ys) { x, y -&gt;\n        if (x is Set&lt;*&gt;) x + y // keeps the result flat\n        else setOf(x, y)\n    }.toSet()\n\noperator fun &lt;T, U&gt; List&lt;T&gt;.times(ys: List&lt;U&gt;): List&lt;List&lt;*&gt;&gt; =\n    product(this, ys) { x, y -&gt;\n        if (x is List&lt;*&gt;) x + y // keeps the result flat\n        else listOf(x, y)\n    }.toList()\n\n// then you can do\n\nlistOf(1, 2, 3) * listOf(true, false)\n\n// or\n\nsetOf(1, 2, 3) * setOf(true, false)\n\n// you can also use product's combiner to create arbitrary result objects, e.g. data classes\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 6550350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KQS_2wFEWKE/AAAAAAAAAAI/AAAAAAAAHJM/PoBI2PELEps/photo.jpg?sz=128", "display_name": "Anton Kushch", "link": "https://stackoverflow.com/users/6550350/anton-kushch"}, "is_accepted": false, "score": 0, "last_activity_date": 1591827718, "last_edit_date": 1591827718, "creation_date": 1591648049, "answer_id": 62270662, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of/62270662#62270662", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>Solution which lazily generates a sequence of results. It takes lists though not sets.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T&gt; product(vararg iterables: List&lt;T&gt;): Sequence&lt;List&lt;T&gt;&gt; = sequence {\n\n    require(iterables.map { it.size.toLong() }.reduce(Long::times) &lt;= Int.MAX_VALUE) {\n        \"Cartesian product function can produce result whose size does not exceed Int.MAX_VALUE\"\n    }\n\n    val numberOfIterables = iterables.size\n    val lstLengths = ArrayList&lt;Int&gt;()\n    val lstRemaining = ArrayList(listOf(1))\n\n    iterables.reversed().forEach {\n        lstLengths.add(0, it.size)\n        lstRemaining.add(0, it.size * lstRemaining[0])\n    }\n\n    val nProducts = lstRemaining.removeAt(0)\n\n    (0 until nProducts).forEach { product -&gt;\n        val result = ArrayList&lt;T&gt;()\n        (0 until numberOfIterables).forEach { iterableIndex -&gt;\n            val elementIndex = product / lstRemaining[iterableIndex] % lstLengths[iterableIndex]\n            result.add(iterables[iterableIndex][elementIndex])\n        }\n        yield(result.toList())\n    }\n}\n</code></pre>\n\n<p>All the credits for the algorithm go to <a href=\"https://stackoverflow.com/users/949624/per-l\">Per L</a> and his answer <a href=\"https://stackoverflow.com/a/7450757/6550350\">here.</a>\nTested with generating 5x5 2-d arrays with char, on my 2 core machine takes ~4.4 seconds to generate 33554432 products.</p>\n"}, {"comments": [{"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1592205019, "post_id": 62378736, "comment_id": 110329969, "body": "Thanks for you contribution. I think this only maintains type safety because this is... typed by <code>T</code>. However, not all <code>Iterable&lt;T&gt;</code> in the receiving <code>Collection</code> need to be of the same type! E.g. see my example inputs with <code>String</code>, <code>Int</code> and <code>Boolean</code>: their common super type is <code>Any</code>. Your solution probably works (I haven&#39;t tested it), but mine would just as well if typed by just <code>T</code>. The downside is that it only takes one type, i.e. <code>T</code>. The upside is that this is a preferable implementation if you only have one type <code>T</code> in your input iterables."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1592205250, "post_id": 62378736, "comment_id": 110330061, "body": "AFAIK the only fully generic and type-safe solution for a type system like Kotlin&#39;s at this time is to implement generic n-tuples (like <code>Pair</code> and <code>Triple</code>) (like Arrow-kt provides) for various values of n. And then define a cartesian product on them."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1592205467, "post_id": 62378736, "comment_id": 110330161, "body": "What&#39;s nice about this answer is that it can be chained in functional style. However, note that the input collection might be empty or contain just one iterable and the cartesian product is, mathematically, only defined for two or more input sets. That&#39;s difficult to grasp in a receiver. Also, again mathematically, the input collection should be of sets, not iterables, and the output a list of sets. And then there&#39;s also the option to put the inputs in an array, so that would be a suggestion to add this function for, too."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 1, "creation_date": 1592226269, "post_id": 62378736, "comment_id": 110340633, "body": "@Erik This doesn&#39;t enforce the inputs to be of the same type. Kotlin will infer the nearest common type, which could be <code>Any</code> or <code>Any?</code>. If they are of the same type, you get the benefit of the output already having that type, but even if they&#39;re not, a type of <code>&lt;out Any&gt;</code> is more useful than <code>&lt;*&gt;</code>, which won&#39;t let you inspect the contents. If you wanted to be strict about the mathematical definition, you could throw an <code>IllegalArgumentException</code> when the size is less than 2, which I know isn&#39;t ideal, but is the only way to prevent it for this extension function pattern. See my edit."}, {"owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "reply_to_user": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 0, "creation_date": 1592226513, "post_id": 62378736, "comment_id": 110340771, "body": "This works: <code>val result: Set&lt;List&lt;Any?&gt;&gt; = cartesianProduct(setOf(1), setOf(&quot;x&quot;), setOf(2.toShort(), null))</code>"}], "tags": [], "owner": {"reputation": 37861, "user_id": 506796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e648659dd573c1161a370efa0f5e10d6?s=128&d=identicon&r=PG", "display_name": "Tenfour04", "link": "https://stackoverflow.com/users/506796/tenfour04"}, "is_accepted": false, "score": 1, "last_activity_date": 1592226927, "last_edit_date": 1592226927, "creation_date": 1592172049, "answer_id": 62378736, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of/62378736#62378736", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>Here's an adaptation of @Erik's answer that maintains type safety and can be used in a functional chain:</p>\n\n<pre><code>fun &lt;T&gt; Collection&lt;Iterable&lt;T&gt;&gt;.getCartesianProduct(): Set&lt;List&lt;T&gt;&gt; =\n    if (isEmpty()) emptySet()\n    else drop(1).fold(first().map(::listOf)) { acc, iterable -&gt;\n        acc.flatMap { list -&gt; iterable.map(list::plus) }\n    }.toSet()\n</code></pre>\n\n<p>Here's how I'd rewrite that solution for type safety if we wanted to maintain the requirement for an input size of at least two:</p>\n\n<pre><code>fun &lt;T&gt; cartesianProduct(a: Set&lt;T&gt;, b: Set&lt;T&gt;, vararg sets: Set&lt;T&gt;): Set&lt;List&lt;T&gt;&gt; =\n    (setOf(a, b).plus(sets))\n        .fold(listOf(listOf&lt;T&gt;())) { acc, set -&gt;\n            acc.flatMap { list -&gt; set.map { element -&gt; list + element } }\n        }\n        .toSet()\n</code></pre>\n"}], "owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3974, "favorite_count": 2, "accepted_answer_id": 53763936, "answer_count": 5, "score": 10, "last_activity_date": 1592226927, "creation_date": 1544639900, "question_id": 53749357, "link": "https://stackoverflow.com/questions/53749357/idiomatic-way-to-create-n-ary-cartesian-product-combinations-of-several-sets-of", "title": "Idiomatic way to create n-ary cartesian product (combinations of several sets of parameters)", "body": "<p>To create all possible combinations of two sets of parameters and perform an action on them, you can do:</p>\n\n<pre><code>setOf(foo, bar, baz).forEach { a -&gt;\n    setOf(0, 1).forEach { b -&gt;\n        /* use a and b */\n    }\n}\n</code></pre>\n\n<p>However, if you have (potentially many) more parameters, this quickly turns into a <a href=\"https://en.wikipedia.org/wiki/Pyramid_of_doom_(programming)\" rel=\"noreferrer\">pyramid of doom</a>:</p>\n\n<pre><code>setOf(foo, bar, baz).forEach { a -&gt;\n    setOf(0, 1).forEach { b -&gt;\n        setOf(true, false, null).forEach { c -&gt;\n            setOf(\"Hello,\", \"World!\").forEach { d -&gt;\n                /* use a, b, c and d */\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>You could write this similarly with <code>for</code> loops, or differently like so:</p>\n\n<pre><code>val dAction = { d: String -&gt; /* use a, b, c and d */ }\nval cAction = { c: Boolean? -&gt; setOf(\"Hello,\", \"World!\").forEach(dAction) }\nval bAction = { b: Int -&gt; setOf(true, false, null).forEach(cAction) }\nval aAction = { a: Any? -&gt; setOf(0, 1).forEach(bAction) }\nsetOf(foo, bar, baz).forEach(aAction)\n</code></pre>\n\n<p>But I don't think that's any better, because there are some readability issues here: d, c, b and a's actions are written in reverse. Their type specifications cannot be inferred, so they must be specified. It's reversed sequentially compared to the pyramid of doom. The order of the sets providing the possible values should not matter, but it does: you just want to create any combinations from a bunch of sets, however, in this code every line depends on the previous.</p>\n\n<p>It would be very nice to have an idiomatic way of doing something like <a href=\"https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions\" rel=\"noreferrer\">Python's</a> or <a href=\"https://wiki.haskell.org/List_comprehension\" rel=\"noreferrer\">Haskell's</a> comprehensions, in which you (<a href=\"https://en.wikipedia.org/wiki/Cartesian_product#n-ary_Cartesian_product\" rel=\"noreferrer\">almost like the mathematical notation</a>) can do something like:</p>\n\n<pre><code>{ /* use a, b, c and d */\n    for a in setOf(foo, bar, baz),\n    for b in setOf(0, 1),\n    for c in setOf(true, false, null),\n    for d in setOf(\"Hello,\", \"World!\")\n}\n</code></pre>\n\n<p>Which is very easy to read: there is no excessive indentation, the action you're interested in goes first, the data sources are very clearly defined, etc.</p>\n\n<p>Side note: similar problems occur with <code>flatMap</code>-<code>flatMap</code>-...-<code>flatMap</code>-<code>map</code>.</p>\n\n<p>Any ideas about how to neatly create n-ary cartesian products in Kotlin?</p>\n"}, {"tags": ["android", "kotlin", "android-audiomanager", "audiotrack", "android-audiorecord"], "comments": [{"owner": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 0, "creation_date": 1544637890, "post_id": 53748708, "comment_id": 94350288, "body": "you should not call audiotrack play/stop everytime write. move the play/stop out from the loop!"}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 0, "creation_date": 1544639000, "post_id": 53748708, "comment_id": 94350831, "body": "@lucky1928 I tried it but it didn&#39;t work. On further observation, I can say that the ringing sound is the result of multiple echoes from the previous output."}, {"owner": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 1, "creation_date": 1544645398, "post_id": 53748708, "comment_id": 94353939, "body": "Did you try to use headset? if you use speaker in phone, then the speaker output will be feed into mic also then cause echo definitely. If you need to use speaker, then you need to apply Echo Cancellation logic!"}, {"owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "reply_to_user": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 0, "creation_date": 1544673248, "post_id": 53748708, "comment_id": 94362182, "body": "@lucky1928 It worked. I don&#39;t know how I took this thing for granted. Thanks a lot. By the way what is echo cancellation logic."}, {"owner": {"reputation": 6246, "user_id": 1914781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/466ea7ff3957320de91dd7a2bc0ad4f9?s=128&d=identicon&r=PG", "display_name": "lucky1928", "link": "https://stackoverflow.com/users/1914781/lucky1928"}, "edited": false, "score": 0, "creation_date": 1544717644, "post_id": 53748708, "comment_id": 94383754, "body": "It&#39;s a technology mostly used in voice communication. you can refer to <a href=\"https://stackoverflow.com/questions/3981280/using-androids-build-in-acoustic-echo-cancellation\" title=\"using androids build in acoustic echo cancellation\">stackoverflow.com/questions/3981280/&hellip;</a>"}], "owner": {"reputation": 667, "user_id": 6321700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ThyXm4Te_Hc/AAAAAAAAAAI/AAAAAAAAAPc/5IYlDo3xh5k/photo.jpg?sz=128", "display_name": "Mandar Sadye", "link": "https://stackoverflow.com/users/6321700/mandar-sadye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544675248, "creation_date": 1544637126, "last_edit_date": 1544675248, "question_id": 53748708, "link": "https://stackoverflow.com/questions/53748708/how-to-reduce-latency-when-repeating-the-input-audio-from-a-microphone-as-the-ou", "title": "How to Reduce latency when repeating the input audio from a microphone as the output audio to the speaker in Android App", "body": "<p>Just as an experiment I am trying to create an app that can repeat the input audio from a microphone as the output audio to the speaker. Till now I am able to do it with a latency of around 0.5 to 1 seconds. So if anyone has any idea about how to improve the code below to reduce latency.</p>\n\n<p>From <a href=\"https://www.youtube.com/watch?v=F2ZDp-eNrh4&amp;t=446s\" rel=\"nofollow noreferrer\">Android high-performance audio - Google I/O 2016</a> I saw that in-out latency can be as low as 20ms which is way lesser than what I am getting.</p>\n\n<p>I tried searching on google and other questions on StackOverflow but most of the methods used there are deprecated in API level 26.</p>\n\n<pre><code>private fun recordAndPlay(){\n\n    val audioManager = this.getSystemService(Context.AUDIO_SERVICE) as AudioManager\n    val rate = audioManager.getProperty(AudioManager.PROPERTY_OUTPUT_SAMPLE_RATE)\n\n    val RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO\n    val RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT\n    val RECORDER_SAMPLERATE = rate.toInt()\n    val bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE, RECORDER_CHANNELS, RECORDER_AUDIO_ENCODING)\n    val BytesPerElement = 2\n\n\n    val recorder = AudioRecord(MediaRecorder.AudioSource.MIC,\n            RECORDER_SAMPLERATE, RECORDER_CHANNELS,\n            RECORDER_AUDIO_ENCODING, bufferSize * BytesPerElement)\n    Log.e(\"Buffer , sample rate\",\"*********** ${recorder.sampleRate}\")\n\n    recorder.startRecording()\n\n    val audioAttributes = AudioAttributes.Builder().setUsage(AudioAttributes.USAGE_MEDIA)\n            .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC).build()\n    val audioFormat = AudioFormat.Builder().setEncoding(RECORDER_AUDIO_ENCODING)\n            .setSampleRate(RECORDER_SAMPLERATE).setChannelMask(AudioFormat.CHANNEL_OUT_MONO).build()\n\n    val recordingThread = Thread(Runnable {\n        try {\n            val sData = ByteArray(bufferSize)\n            var at : AudioTrack? = AudioTrack.Builder()\n                    .setAudioAttributes(audioAttributes)\n                    .setAudioFormat(audioFormat)\n                    .setBufferSizeInBytes(bufferSize*2)\n                    .build()\n            while (true) {\n                recorder.read(sData, 0, bufferSize)  //isRecording = false; onStop button\n                at.play()\n                if (at != null) {\n                    at.write(sData, 0, sData.size)\n                }\n                at.stop()\n            }\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }, \"AudioRecorder Thread\")\n\n    recordingThread.start()\n}\n</code></pre>\n\n<p>Thank you in advance.</p>\n\n<hr>\n\n<p>Note: This question previously also addressed the issue of repeated echoing of the input sound. This issue was because of using the speaker of the phone rather than headphone causing feedback loop as mentioned in comments by lucky1928. That echoing was the fault of me overlooking the surrounding rather than any android related issue, so that part question has been removed. So when testing the above code please use headphones. </p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 994450, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7b0579216ea363f2dfdcbd2ee534368?s=128&d=identicon&r=PG", "display_name": "Nathaniel Bennett", "link": "https://stackoverflow.com/users/994450/nathaniel-bennett"}, "edited": false, "score": 0, "creation_date": 1544637509, "post_id": 53748096, "comment_id": 94350090, "body": "Thank you. This saved me alot of time. I&#39;ll look more into inline functions as then I don&#39;t need the entirety of the reflections library."}], "tags": [], "owner": {"reputation": 3472, "user_id": 4072509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16VK8.jpg?s=128&g=1", "display_name": "apetranzilla", "link": "https://stackoverflow.com/users/4072509/apetranzilla"}, "is_accepted": true, "score": 0, "last_activity_date": 1544635988, "last_edit_date": 1544635988, "creation_date": 1544634702, "answer_id": 53748096, "question_id": 53747748, "link": "https://stackoverflow.com/questions/53747748/how-to-implement-a-getcomponent-class-method-for-video-game-in-kotlin/53748096#53748096", "title": "How to implement a getComponent(/*Class*/) method for video game in kotlin", "body": "<p>You have a <code>KClass</code> instance, which is a runtime object representing a type, used for reflection. You have two main options here. You can use <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"nofollow noreferrer\">reified generics</a>, like so, which allows you to avoid using reflection entirely:</p>\n\n<pre><code>inline fun &lt;reified T : Component&gt; getComponent() : T? {\n    for(component in components) {\n        if(component is T) {\n            return component\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>This method can be invoked like so:</p>\n\n<pre><code>getComponent&lt;SomeClass&gt;()\n</code></pre>\n\n<p>Alternatively, you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/is-instance.html\" rel=\"nofollow noreferrer\">KClass.isInstance</a>:</p>\n\n<pre><code>fun getComponent(clazz : KClass&lt;*&gt;) : Component? {\n    for(component in components) {\n        if(clazz.isInstance(component)) {\n            return component\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>You can make this a little bit more convenient with generics and casting as well:</p>\n\n<pre><code>fun &lt;T : Component&gt; getComponent(clazz : KClass&lt;*&gt;) : T? {\n    for(component in components) {\n        if(clazz.isInstance(component)) {\n            return component as T\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>For both of these, the usage is the same:</p>\n\n<pre><code>getComponent(SomeClass::class)\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 994450, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a7b0579216ea363f2dfdcbd2ee534368?s=128&d=identicon&r=PG", "display_name": "Nathaniel Bennett", "link": "https://stackoverflow.com/users/994450/nathaniel-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 53748096, "answer_count": 1, "score": 0, "last_activity_date": 1544635988, "creation_date": 1544633482, "question_id": 53747748, "link": "https://stackoverflow.com/questions/53747748/how-to-implement-a-getcomponent-class-method-for-video-game-in-kotlin", "title": "How to implement a getComponent(/*Class*/) method for video game in kotlin", "body": "<p>I'm writing in kotlin, developing a text based RPG game for android.\nI'm currently at the development of my object system going with a strategy / entity component design.\nI'm stuck on the getComponent function and have no clue what I'm doing</p>\n\n<p>I need a method that accepts a reference to a Class type and then compares that to all the component instance's class types. </p>\n\n<p>I've tried using generics, KClass, Java Type but can't find the answer.</p>\n\n<p>My main issue is the \"as\" operator. I have no clue what it accepts.</p>\n\n<p>All I got so far is :</p>\n\n<pre><code>fun getComponent(clazz : KClass&lt;*&gt;) : Component? {\n    for(component in components) {\n        if(component is clazz) {\n            return component\n        }\n    }\n    return null\n}\n</code></pre>\n\n<p>This code is wrong. IntelliJ alerts me that clazz does not exist as it's not ann actual Class.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-gradle-plugin", "android-databinding"], "comments": [{"owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "edited": false, "score": 0, "creation_date": 1544634452, "post_id": 53747663, "comment_id": 94348408, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46521478/android-kotlin-error-unresolved-reference-databinding-activitymainbinding\">android-kotlin error : unresolved reference databinding &amp; ActivityMainBinding</a>"}], "owner": {"reputation": 124, "user_id": 7427630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/feb474d42ff20d6c243934c3491db5c8?s=128&d=identicon&r=PG&f=1", "display_name": "4 R4C81D", "link": "https://stackoverflow.com/users/7427630/4-r4c81d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 447, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544633190, "creation_date": 1544633190, "question_id": 53747663, "link": "https://stackoverflow.com/questions/53747663/why-do-i-get-unresolved-reference-bind-error-in-android-studio", "title": "Why do i get &quot;Unresolved reference: bind&quot; error in Android Studio?", "body": "<p>I keep getting the error \"Unresolved reference: bind\" that bind is not resolved althought i added it in the gradle files.</p>\n\n<p>App gradle:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\nandroid {\n  ...\n  ...\n  dataBinding {\n    enabled = true\n  }\n}\n\n\ndependencies {\n  implementation fileTree(include: ['*.jar'], dir: 'libs')\n  //kotlin\n  implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n  //support\n  implementation 'com.android.support:design:27.1.1'\n  implementation 'com.android.support:appcompat-v7:27.1.1'\n  kapt \"com.android.databinding:compiler:3.1.3\"\n}\n\nkapt {\n  generateStubs = true\n}\n</code></pre>\n\n<p>Example of code i get error on:</p>\n\n<pre><code>private val currentStatusTextView: TextView by bind(R.id.text_current_status)\n</code></pre>\n\n<p>How can i fix this please?</p>\n"}, {"tags": ["kotlin", "io", "functional-programming", "either", "arrow-kt"], "comments": [{"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 1, "creation_date": 1544630791, "post_id": 53746818, "comment_id": 94346394, "body": "Monad transformers to the rescue: <a href=\"https://arrow-kt.io/docs/arrow/data/eithert/\" rel=\"nofollow noreferrer\"><code>EitherT</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "is_accepted": true, "score": 8, "last_activity_date": 1544635335, "last_edit_date": 1544635335, "creation_date": 1544634129, "answer_id": 53747937, "question_id": 53746818, "link": "https://stackoverflow.com/questions/53746818/for-comprehensions-with-kotlin-and-arrow-kt-library/53747937#53747937", "title": "For comprehensions with kotlin and arrow-kt library", "body": "<h2>Background</h2>\n\n<p>First I should mention that <a href=\"https://stackoverflow.com/questions/33149471/why-do-monads-not-compose-in-scala\">Monads don't compose</a>, that's why you need a <a href=\"http://eed3si9n.com/learning-scalaz/Monad+transformers.html\" rel=\"noreferrer\">Monad transformer</a>, in your case <a href=\"https://arrow-kt.io/docs/arrow/data/eithert/\" rel=\"noreferrer\"><code>EitherT</code></a> is the guy that can help you.</p>\n\n<h2>Example</h2>\n\n<pre><code>object Error\n\nfun one() = IO { Right(1) }\nfun two() = IO { Right(\"2\") }\nfun toInt(str: String) = IO { Try { str.toInt() }.toEither { Error } }\n\nval result: IO&lt;Either&lt;Error, Int&gt;&gt; =\n    EitherT.monad&lt;ForIO, Error&gt;(IO.monad()).binding {\n        val oneInt = EitherT(one()).bind()\n        val twoString = EitherT(two()).bind()\n        val twoInt = EitherT(toInt(twoString)).bind()\n        oneInt + twoInt\n    }.value().fix()\n\nprintln(result.unsafeRunSync()) // Just for demonstration, don't do this ever\n</code></pre>\n\n<blockquote>\n  <p>Right(b=3)</p>\n</blockquote>\n"}], "owner": {"reputation": 962, "user_id": 5473669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36798d3580a2113bd6babeeb2f0c666b?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/5473669/maxg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 53747937, "answer_count": 1, "score": 6, "last_activity_date": 1544635335, "creation_date": 1544630339, "last_edit_date": 1544633029, "question_id": 53746818, "link": "https://stackoverflow.com/questions/53746818/for-comprehensions-with-kotlin-and-arrow-kt-library", "title": "For comprehensions with kotlin and arrow-kt library", "body": "<p>I use arrow-kt library and I'm trying to employ <code>Either</code> and <code>IO</code> within the same for comprehension.</p>\n\n<p>Say I have the next piece of code:</p>\n\n<pre><code>IO.monad().binding {\n    val ans: Either&lt;Error, Data&gt; = someFunctionThatReturnsEitherWrappedInIO().bind()\n}\n</code></pre>\n\n<p>Now, I'd like to use binding on the <code>ans</code>:</p>\n\n<pre><code>val data: Data = ans.bind() // My intent\n</code></pre>\n\n<p>Is it possible to do It whithin the scope of the first piece of code?</p>\n\n<p>Currently I'm trying to nest an <code>Either</code> binding within the scope of the IO binding, but I'm not sure this is a good practice:</p>\n\n<pre><code>IO.monad().binding {\n    val ans: Either&lt;Error, Data&gt; = someFunctionThatReturnsEitherWrappedInIO().bind()\n    val ansB: Either&lt;Error, OtherData&gt; = someOtherFunctionThatReturnsEitherWrappedInIO().bind()\n\n    val newData: Either&lt;Any, NewData&gt; = Either.monad&lt;Any&gt;().binding {\n        val data: Data = ans.bind()\n        val otherData: OtherData = ansB.bind()\n        NewData(data.a, otherData.lala)\n    }.fix()\n}\n</code></pre>\n"}, {"tags": ["foreach", "kotlin", "return", "infinite"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "reply_to_user": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "edited": false, "score": 0, "creation_date": 1544627549, "post_id": 53744744, "comment_id": 94344341, "body": "It says I can do that in two days"}], "tags": [], "owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "is_accepted": false, "score": 1, "last_activity_date": 1544623322, "creation_date": 1544623322, "answer_id": 53744744, "question_id": 53744422, "link": "https://stackoverflow.com/questions/53744422/return-break-out-of-infinite-foreach-in-kotlin/53744744#53744744", "title": "Return/break out of infinite foreach in kotlin", "body": "<p>I think I found the solution myself:</p>\n\n<pre><code>        val checkSet = mutableSetOf&lt;Int&gt;()\n        generateSequence{ Random.nextInt(n)}.first { !checkSet.add(it) }\n        sum += checkSet.size\n</code></pre>\n\n<p>Basically use the function first() and keep returning false until you want to get out of the loop. And just drop the return of the function first()</p>\n"}, {"comments": [{"owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "edited": false, "score": 0, "creation_date": 1544627693, "post_id": 53745991, "comment_id": 94344427, "body": "the while loop is definitely a more elegant solution as it produces no unused sequence or reference."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "edited": false, "score": 0, "creation_date": 1544628076, "post_id": 53745991, "comment_id": 94344627, "body": "that&#39;s true and while it works quite well for this specific example it may not in other cases where a real ~return is wanted.... (although I don&#39;t know any such cases that really require a goto-label-construct, that aren&#39;t also solveable using other means)"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 2, "last_activity_date": 1544628459, "last_edit_date": 1544628459, "creation_date": 1544627444, "answer_id": 53745991, "question_id": 53744422, "link": "https://stackoverflow.com/questions/53744422/return-break-out-of-infinite-foreach-in-kotlin/53745991#53745991", "title": "Return/break out of infinite foreach in kotlin", "body": "<p>Alternatives you may want to consider instead of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/first.html#first\" rel=\"nofollow noreferrer\"><code>first</code></a>:</p>\n\n<ul>\n<li><p>using a simple <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#while-loops\" rel=\"nofollow noreferrer\"><code>while</code></a> without body:</p>\n\n<pre><code>while (checkSet.add(Random.nextInt(n))); // &lt;- that semicolon is required! otherwise you execute what is coming next within the while\n</code></pre></li>\n<li><p>using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html#run\" rel=\"nofollow noreferrer\"><code>run</code></a> with a label:</p>\n\n<pre><code>run outForeach@{\n  generateSequence{ Random.nextInt(n)}.forEach {\n    if(!checkSet.add(it)) {\n      return@outForeach\n    }\n  }\n}\n</code></pre></li>\n<li><p>maybe also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-while.html#takewhile\" rel=\"nofollow noreferrer\"><code>takeWhile</code></a> might be helpful. In this specific case however it is surely not (as it would check against the <code>checkSet</code> and leave us with a sequence that isn't consumed... but if the condition would be different, it may make sense to consider something like <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take.html\" rel=\"nofollow noreferrer\"><code>take</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-while.html#takewhile\" rel=\"nofollow noreferrer\"><code>takeWhile</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/take-last.html\" rel=\"nofollow noreferrer\"><code>takeLast</code></a>, etc.):</p>\n\n<pre><code>generateSequence { Random.nextInt(n) }\n    .takeWhile(checkSet::add) // as said: for this specific condition it doesn't make sense... \n    .forEach { /* do nothing except consume the sequence */ } // the same values you added to the set would be available in this step of course\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 423, "user_id": 6849045, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ba8cc095ecdee411223b06f5cfef4f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Typhaon", "link": "https://stackoverflow.com/users/6849045/typhaon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2468, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1544628459, "creation_date": 1544622268, "question_id": 53744422, "link": "https://stackoverflow.com/questions/53744422/return-break-out-of-infinite-foreach-in-kotlin", "title": "Return/break out of infinite foreach in kotlin", "body": "<p>For class I have to make a program that calculates the birthday problem\nNow I'm having trying to learn kotlin at the same time and I'm having trouble with a little snippet of code:</p>\n\n<pre><code>        val checkSet = mutableSetOf&lt;Int&gt;()\n        generateSequence{ Random.nextInt(n)}.forEach {\n            if(!checkSet.add(it)) {\n                return@outForeach\n            }\n        }\n        outForeach@\n        sum += checkSet.size\n</code></pre>\n\n<p>As you can see I'm trying to do this with an infinite sequence. Kotlin doesn't accept this as outForeach is an unresolved reference. But this doesn't work either:</p>\n\n<pre><code>        val checkSet = mutableSetOf&lt;Int&gt;()\n        generateSequence{ Random.nextInt(n)}.forEach {\n            if(!checkSet.add(it)) {\n                return@forEach\n            }\n        }\n        sum += checkSet.size\n</code></pre>\n\n<p>This will just start the forEach loop again. Is there a way to implement something as a forEachUntil or so?</p>\n\n<p>p.s. I'm aware that this looks a lot like this question: <a href=\"https://stackoverflow.com/questions/48056994/return-doesnt-jump-out-of-foreach-in-kotlin\">&#39;return&#39; doesn&#39;t jump out of forEach in Kotlin</a> It's just that I don't really get the answers and I don't know if its applicable here. Also a way to implement forEachUntil seems for me to be far more elegant</p>\n"}, {"tags": ["android", "mvvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6463910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24209c508bebba89fbdc1f0f9442ebd1?s=128&d=identicon&r=PG&f=1", "display_name": "Batz", "link": "https://stackoverflow.com/users/6463910/batz"}, "edited": false, "score": 0, "creation_date": 1544651006, "post_id": 53745894, "comment_id": 94356297, "body": "Thank you for this workaround! This worked but is this the best practice for this type of problem? Thanks!"}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 1, "last_activity_date": 1544627156, "creation_date": 1544627156, "answer_id": 53745894, "question_id": 53744324, "link": "https://stackoverflow.com/questions/53744324/livedata-observer-still-observing-when-going-back-to-the-fragment/53745894#53745894", "title": "LiveData Observer still observing when going back to the fragment", "body": "<p>The field <code>viewModel.loginState</code> is like it's named a state which lives within the <code>viewModel</code>. When you navigate to the navigation, the observation will be suspended, but also restarted after you navigate back. Since you don't change the state itself, maybe only dismiss the dialog, you'll end up with the same screen as before.</p>\n\n<p>So just update the state to a more relevant value when you dismiss the dialog.</p>\n"}], "owner": {"reputation": 69, "user_id": 6463910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/24209c508bebba89fbdc1f0f9442ebd1?s=128&d=identicon&r=PG&f=1", "display_name": "Batz", "link": "https://stackoverflow.com/users/6463910/batz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 53745894, "answer_count": 1, "score": 1, "last_activity_date": 1544627156, "creation_date": 1544621917, "last_edit_date": 1544622847, "question_id": 53744324, "link": "https://stackoverflow.com/questions/53744324/livedata-observer-still-observing-when-going-back-to-the-fragment", "title": "LiveData Observer still observing when going back to the fragment", "body": "<p>So I have this code that when i press a button</p>\n\n<pre><code>btnLogin.setOnClickListener {\n    val user = UserLogin(etUsername.text.toString(), etPassword.text.toString())\n    viewModel.login(user)\n}\n</code></pre>\n\n<p>I will observe this</p>\n\n<pre><code>fun login(user: UserLogin) {\n    loginGateway.loginBuyer(user)\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .doOnSubscribe { _loginState.postValue(LoginLoading) }\n            .subscribe({\n                if(it.data != null)\n                    _loginState.postValue(LoginSuccess(it.data))\n                else\n                    _loginState.postValue(LoginFailed(it.message))\n            }, {\n                _loginState.postValue(LoginError(it.localizedMessage))\n            })\n            .addTo(disposable)\n}\n</code></pre>\n\n<p>and here is the observer</p>\n\n<pre><code>        viewModel.loginState.observe(this, Observer {it -&gt;\n        when (it) {\n            LoginLoading -&gt; {\n                dialog.show()\n            }\n\n            is LoginSuccess -&gt; {\n                dialog.dismiss()\n                if (cbRemember.isChecked)\n                    viewModel.saveUsername(etUsername.text!!.toString())\n                viewModel.saveFirstname(it.user.firstName)\n                findNavController().navigate(R.id.toMain)\n            }\n\n            is LoginFailed -&gt; {\n                dialog.dismiss()\n                showErrorDialog(this.context!!, \"Login Failed\", it.message)\n            }\n\n            is LoginError -&gt; {\n                dialog.dismiss()\n                showErrorDialog(this.context!!, \"Login Error\", it.message)\n            }\n\n        }\n   })\n</code></pre>\n\n<hr>\n\n<p>So this is the problem when I have failed a login so it will show a dialog and when dismissed and when I go to register page and go back to login the same dialog still appears.</p>\n\n<p>I tried doing like putting <code>removeObservers(this)</code> on the onPause() and onDestroy() but its still the same. I'm not quite sure if the problem lies with the fragment lifecycle if not please help me understand whats happening. I'm new with kotlin and mvvm so please. Thanks :)</p>\n"}, {"tags": ["android", "kotlin", "colors", "emoji"], "answers": [{"comments": [{"owner": {"reputation": 1087, "user_id": 10677384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20cd17ae012ab8e45dfdd92db0c537cf?s=128&d=identicon&r=PG&f=1", "display_name": "SK7", "link": "https://stackoverflow.com/users/10677384/sk7"}, "edited": false, "score": 0, "creation_date": 1544793449, "post_id": 53773187, "comment_id": 94412190, "body": "I need to add some more emojis too so this link is really helpful \ud83d\udc4d\ud83c\udffd"}], "tags": [], "owner": {"reputation": 501, "user_id": 8023278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nqm8d.jpg?s=128&g=1", "display_name": "Matt Smith", "link": "https://stackoverflow.com/users/8023278/matt-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1544758651, "creation_date": 1544758651, "answer_id": 53773187, "question_id": 53742992, "link": "https://stackoverflow.com/questions/53742992/emoji-colour-google-play-store-application/53773187#53773187", "title": "Emoji Colour Google Play Store Application", "body": "<p>While emoji are standardised the actual appearance on a particular device is up to the manufacturer, so a smiling emoji \ud83d\ude00 will look different on a Samsung phone than it does on an iPhone, or in your case different between your Mac and an Android phone.</p>\n\n<p>This site shows all the differences \n<a href=\"http://unicode.org/emoji/charts/full-emoji-list.html\" rel=\"nofollow noreferrer\">http://unicode.org/emoji/charts/full-emoji-list.html</a></p>\n\n<p>There is no way to stop this behaviour of different looking emoji so in your case, for the Google Play listing, I would suggest selecting any emoji you would like to use on an Android device so you see the same thing users will see (although bear in mind there will be differences between Google and Samsung phones and differences when viewed on the web).</p>\n"}], "owner": {"reputation": 1087, "user_id": 10677384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20cd17ae012ab8e45dfdd92db0c537cf?s=128&d=identicon&r=PG&f=1", "display_name": "SK7", "link": "https://stackoverflow.com/users/10677384/sk7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "accepted_answer_id": 53773187, "answer_count": 1, "score": 1, "last_activity_date": 1544758651, "creation_date": 1544617504, "last_edit_date": 1544722022, "question_id": 53742992, "link": "https://stackoverflow.com/questions/53742992/emoji-colour-google-play-store-application", "title": "Emoji Colour Google Play Store Application", "body": "<p>I've just uploaded my first Kotlin project to the Google Play Store but the red emoji used from my mac is showing up black on some android devices. Does anyone know how to ensure the emoji used keeps its colour?</p>\n"}, {"tags": ["android", "canvas", "kotlin", "ondraw"], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 6180827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wwwQa.jpg?s=128&g=1", "display_name": "Khojiakbar", "link": "https://stackoverflow.com/users/6180827/khojiakbar"}, "edited": false, "score": 0, "creation_date": 1544619520, "post_id": 53743497, "comment_id": 94339644, "body": "Already tried, it rounds the center point of the arc. What I need is rounded edges on the sides."}], "tags": [], "owner": {"reputation": 65, "user_id": 9515390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74a9e9e889ded1a61c2cae4f9c04898b?s=128&d=identicon&r=PG&f=1", "display_name": "aslam khan", "link": "https://stackoverflow.com/users/9515390/aslam-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544619249, "creation_date": 1544619249, "answer_id": 53743497, "question_id": 53742257, "link": "https://stackoverflow.com/questions/53742257/draw-an-arc-with-rounded-corners-on-canvas/53743497#53743497", "title": "Draw an arc with rounded corners on Canvas", "body": "<p>Try to set Stroke Cap of paint.</p>\n\n<pre><code>mPaint.setStrokeCap(Paint.Cap.ROUND);\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 6180827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wwwQa.jpg?s=128&g=1", "display_name": "Khojiakbar", "link": "https://stackoverflow.com/users/6180827/khojiakbar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544619249, "creation_date": 1544614836, "last_edit_date": 1544615180, "question_id": 53742257, "link": "https://stackoverflow.com/questions/53742257/draw-an-arc-with-rounded-corners-on-canvas", "title": "Draw an arc with rounded corners on Canvas", "body": "<p>I'm trying to implement a pie chart as shown in pictures below, where corners of the arc should be rounded. </p>\n\n<p><a href=\"https://i.stack.imgur.com/cDBql.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cDBql.jpg\" alt=\"Arc with rounded corners\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/qKXKd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qKXKd.jpg\" alt=\"Arc with rounded corners\"></a></p>\n\n<p>I've tried to use <code>CornerPathEffect()</code>, but it seems to work only on the intersection of two lines (<code>path.lineTo()</code>). Nothing changes if I use this method for arc (<code>path.arcTo()</code>).</p>\n"}, {"tags": ["android", "kotlin", "notifications"], "comments": [{"owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1544614610, "post_id": 53742088, "comment_id": 94336846, "body": "check this <a href=\"https://stackoverflow.com/a/51472673/7666442\">stackoverflow.com/a/51472673/7666442</a>"}, {"owner": {"reputation": 81, "user_id": 7185806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-13pUxZiY9gE/AAAAAAAAAAI/AAAAAAAAAD8/jyY5UjkOQh0/photo.jpg?sz=128", "display_name": "Muhammad Ahsan", "link": "https://stackoverflow.com/users/7185806/muhammad-ahsan"}, "edited": false, "score": 0, "creation_date": 1544614650, "post_id": 53742088, "comment_id": 94336878, "body": "getActiveNotifications() then you can just do a plus 1 in id . the new notification will have new id"}, {"owner": {"reputation": 11886, "user_id": 446461, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9HaOK.jpg?s=128&g=1", "display_name": "mreichelt", "link": "https://stackoverflow.com/users/446461/mreichelt"}, "reply_to_user": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "edited": false, "score": 0, "creation_date": 1544621334, "post_id": 53742088, "comment_id": 94340609, "body": "@NileshRathod Your solution uses a date as a notificationId, which is a similar approach to my option 1 (random)."}, {"owner": {"reputation": 11886, "user_id": 446461, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9HaOK.jpg?s=128&g=1", "display_name": "mreichelt", "link": "https://stackoverflow.com/users/446461/mreichelt"}, "reply_to_user": {"reputation": 81, "user_id": 7185806, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-13pUxZiY9gE/AAAAAAAAAAI/AAAAAAAAAD8/jyY5UjkOQh0/photo.jpg?sz=128", "display_name": "Muhammad Ahsan", "link": "https://stackoverflow.com/users/7185806/muhammad-ahsan"}, "edited": false, "score": 0, "creation_date": 1544621415, "post_id": 53742088, "comment_id": 94340660, "body": "@MuhammadAhsan I could do that, but then I would have to check all existing notifications every time I would show a new notification. I&#39;m not so sure that is the way to go."}], "owner": {"reputation": 11886, "user_id": 446461, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9HaOK.jpg?s=128&g=1", "display_name": "mreichelt", "link": "https://stackoverflow.com/users/446461/mreichelt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544614215, "creation_date": 1544614215, "question_id": 53742088, "link": "https://stackoverflow.com/questions/53742088/android-notifications-which-tag-id-pairs-to-use-to-ensure-all-notifications-are", "title": "Android Notifications: which tag/id pairs to use to ensure all notifications are shown?", "body": "<p>In an app I get different messages from the backend, which I want to show as UI Android notifications.</p>\n\n<p>But when I use the same notification ID, e.g. <code>123</code>, a new notification would update the old one. I want all notifications to show instead.</p>\n\n<p>So there is a <code>tag: String</code> that we can use to assign an additional tag to a notification. But if I would use the same tag I would get the same behaviour as before: A new notification would update the old one, and not show up as a second notification.</p>\n\n<p>So what's the right tag to use in this case? Here some variants:</p>\n\n<pre><code>val notificationManager = NotificationManagerCompat.from(context)\n\n// option 1: use some random tag\nnotificationManager.notify(UUID.randomUUID().toString(), 123, notification)\n\n// option 2: use toString as tag - but same data will not show notification twice\nnotificationManager.notify(someData.toString(), 123, notification)\n\n// option 3: use hashCode as tag\nnotificationManager.notify(someData.hashCode().toString(), 123, notification)\n\n// or something else?\n</code></pre>\n\n<p>For now I don't plan to cancel the notifications programatically - but it would be nice to have possibility to do so.</p>\n\n<p>What's do you use as <code>tag</code> in notifications? How do you ensure all notifications are shown?</p>\n"}, {"tags": ["arrays", "string", "kotlin", "hashmap"], "comments": [{"owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "edited": false, "score": 0, "creation_date": 1544614376, "post_id": 53742074, "comment_id": 94336697, "body": "At some point of time <code>splitFormule</code> contains only one element. Check it."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1544614438, "post_id": 53742074, "comment_id": 94336737, "body": "what did you expect? you may want to debug it and you will see the problem... could it be that your string doesn&#39;t contain any ` = `?"}, {"owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544614804, "post_id": 53742074, "comment_id": 94336964, "body": "Yes @Rolan, it was that. It forgot to add this condition. Thanks, I feel kind of stupid ^^&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 1, "last_activity_date": 1544615986, "creation_date": 1544615986, "answer_id": 53742570, "question_id": 53742074, "link": "https://stackoverflow.com/questions/53742074/kotlin-string-to-array-to-key-value/53742570#53742570", "title": "Kotlin : string to array to key value", "body": "<p>As you already said, you forgot a condition to check whether your string even contains a <code>=</code>. </p>\n\n<p>Some furter notes: you can replace your <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/element-at.html\" rel=\"nofollow noreferrer\"><code>elementAt</code></a> also with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/get.html\" rel=\"nofollow noreferrer\"><code>get</code></a> or with the <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#indexed\" rel=\"nofollow noreferrer\">indexing operator</a> (e.g. <code>splitFormule[0]</code>).</p>\n\n<p>You may also be interested in <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">destructuring</a>, e.g. your split could also be written as follows:</p>\n\n<pre><code>val (key, value) = it.split(\" = \") // no need to extract the values from the array, if you know how the splitted data looks like\n// you may even want to use the following if there could potentially be more than 1 '=' in the value part\nval (key, value) = it.split(\" = \", limit = 2) // at most 2 parts\n</code></pre>\n\n<p>Finally another variant, which skips keys if there aren't any values associated to them:</p>\n\n<pre><code>val yourMap = formules.splitToSequence(\"&lt;br /&gt;\")\n    .filter { it.contains(\"=\") }\n    .map { it.split(\"\"\"\\s*=\\s*\"\"\".toRegex(), limit = 2) }\n    .map { (key, value) -&gt; key to value } // destructuring\n    .toMap()\n\n// or: instead of filtering do a takeif and if you require those keys, do something appropriate there (e.g. set a default value instead)\nval yourMap = formules.splitToSequence(\"&lt;br /&gt;\")\n    .map { it.split(\"\"\"\\s*=\\s*\"\"\".toRegex(), limit = 2) }\n    .mapNotNull { it.takeIf { it.size == 2 } } // this discards now the entries without any value\n    .map { (key, value) -&gt; key to value } // destructuring\n    .toMap()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1544621874, "post_id": 53743817, "comment_id": 94340924, "body": "you may want to use <code>splitToSequence</code> instead of <code>split</code> otherwise you create a new list on each <code>map</code>-call, which you basically discard all when you call <code>toMap</code>..."}, {"owner": {"reputation": 1094, "user_id": 4030765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/1DXNv.png?s=128&g=1", "display_name": "Tagas", "link": "https://stackoverflow.com/users/4030765/tagas"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 1, "creation_date": 1544622765, "post_id": 53743817, "comment_id": 94341496, "body": "Thank you very much @Roland! I was not aware of that. Made me read this interesting article about collections vs. sequences: <a href=\"https://blog.kotlin-academy.com/effective-kotlin-use-sequence-for-bigger-collections-with-more-than-one-processing-step-649a15bb4bf\" rel=\"nofollow noreferrer\">blog.kotlin-academy.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1094, "user_id": 4030765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/1DXNv.png?s=128&g=1", "display_name": "Tagas", "link": "https://stackoverflow.com/users/4030765/tagas"}, "is_accepted": false, "score": 2, "last_activity_date": 1544622906, "last_edit_date": 1544622906, "creation_date": 1544620286, "answer_id": 53743817, "question_id": 53742074, "link": "https://stackoverflow.com/questions/53742074/kotlin-string-to-array-to-key-value/53743817#53743817", "title": "Kotlin : string to array to key value", "body": "<p>Be careful that your input is correct. Whitespaces are relevant. <code>&lt;br /&gt;</code> is different \n from <code>&lt;br/&gt;</code> and <code>=</code> is different from <code>&lt;space&gt;=&lt;space&gt;</code>. Assuming your input looks like this:</p>\n\n<pre><code>foo = 3&lt;br /&gt;bar = 5&lt;br /&gt;baz = 9000\n</code></pre>\n\n<p>Then you can create a map using this simple expression:</p>\n\n<pre><code>val map = formules\n    .splitToSequence (\"&lt;br /&gt;\") // returns sequence of strings: [foo = 3, bar = 5, baz = 9000]\n    .map { it.split(\" = \") } // returns list of lists: [[foo, 3 ], [bar, 5 ], [baz, 9000]]\n    .map { it[0] to it[1] } // return list of pairs: [(foo, 3), (bar, 5), (baz, 9000)]\n    .toMap() // creates a map from your pairs\n</code></pre>\n"}], "owner": {"reputation": 267, "user_id": 10429466, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w8tbdscu__c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWqPX9CJdAYvNscm11o8i9c82gFDg/mo/photo.jpg?sz=128", "display_name": "Projet Sin", "link": "https://stackoverflow.com/users/10429466/projet-sin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2321, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544622906, "creation_date": 1544614134, "question_id": 53742074, "link": "https://stackoverflow.com/questions/53742074/kotlin-string-to-array-to-key-value", "title": "Kotlin : string to array to key value", "body": "<p>I'm trying to create a key => value Hashmap. </p>\n\n<p>First, I have a string delimited by <strong><code>&lt;br /&gt;</code></strong>. Then, I split it with <strong>split()</strong> (to get each string independently). </p>\n\n<p>Then, I need to split each result with <strong>\"=\"</strong>. The first part will be the key (I need it to be a string) and the second one will be the value (an int)</p>\n\n<p>For now I have </p>\n\n<pre><code>val formules = objInput.getString(Constants.formules)\nval hashmap = HashMap&lt;String, Int&gt;()\nval resSplit = formules.split(\"&lt;br /&gt;\")\n    resSplit.forEach {\n      val splitFormule = it.split(\" = \")\n      val key = splitFormule.elementAt(0)\n      val value = splitFormule.elementAt(1)\n      Log.i(TAG, \"$key\")\n}\n</code></pre>\n\n<p>I have this error when I'm trying to display the value : </p>\n\n<blockquote>\n  <p>Index: 1, Size: 1</p>\n</blockquote>\n"}, {"tags": ["kotlin", "dagger-2"], "answers": [{"tags": [], "owner": {"reputation": 796, "user_id": 1697536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c43be27a40acbc73a5d268d1649978?s=128&d=identicon&r=PG", "display_name": "EgorD", "link": "https://stackoverflow.com/users/1697536/egord"}, "is_accepted": false, "score": 0, "last_activity_date": 1544615547, "creation_date": 1544615547, "answer_id": 53742450, "question_id": 53741748, "link": "https://stackoverflow.com/questions/53741748/cannot-be-provided-without-an-inject-constructor-or-an-provides-annotated-meth/53742450#53742450", "title": "cannot be provided without an @Inject constructor or an @Provides-annotated method", "body": "<p>You need to annotate your <code>CompositeDisposable</code>'s with <code>@Named</code> in <code>AppComponent</code> and <code>AverageViewModel</code> classes, like this:</p>\n\n<pre><code>public interface AppComponent {\n    ...\n    @Named(\"activity\") CompositeDisposable getCompositeDisposable();\n    @Named(\"vm\") CompositeDisposable getVMCompositeDisposable(); \n}\n\n\nclass AverageViewModel @Inject constructor(\n    ...\n    @Named(\"vm\") val compositeDisposable: CompositeDisposable\n) : BaseViewModel&lt;AverageInteractor.view&gt;(){\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10124413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb332e544c4218dce8a2263c4b02a2b?s=128&d=identicon&r=PG&f=1", "display_name": "saruchi", "link": "https://stackoverflow.com/users/10124413/saruchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544615547, "creation_date": 1544613043, "question_id": 53741748, "link": "https://stackoverflow.com/questions/53741748/cannot-be-provided-without-an-inject-constructor-or-an-provides-annotated-meth", "title": "cannot be provided without an @Inject constructor or an @Provides-annotated method", "body": "<p>This my App Component class</p>\n\n<pre><code> @Singleton\n @Component(dependencies = {}, modules = {AppModule.class,RoomModule.class, NetworkModule.class})\npublic interface AppComponent {\n\nvoid inject(CSATApplication applicationController);\nvoid inject(AverageScoreActivity averageScoreActivity);\n\n\n\n\nCsatDao csaatdao();\n\nCSATDatabase csatDatabase();\n\nRemoteRepositoryImpl getRemoteRepo();\n\nLocalRepositoryImpl getLocalRepo();\n\nApplication application();\n\nBaseUrlHolder provideBaseUrlHolder();\n\nRetrofit getRetrofit();\nCompositeDisposable getCompositeDisposable();\nCompositeDisposable getVMCompositeDisposable();\n</code></pre>\n\n<p>}</p>\n\n<p>@Module\npublic class RoomModule {</p>\n\n<pre><code>private CSATDatabase CSATDatabase;\n\n\npublic RoomModule(Application mApplication) {\n    CSATDatabase = Room.databaseBuilder(mApplication, CSATDatabase.class, AppConstants.DATABASE_NAME).build();\n}\n\n@Singleton\n@Provides\nCSATDatabase providesRoomDatabase() {\n    return CSATDatabase;\n}\n\n@Singleton\n@Provides\nCsatDao providesCsatDao(CSATDatabase CSATDatabase) {\n    return CSATDatabase.getCsatDao();\n}\n\n@Singleton\n@Provides\npublic RemoteRepository getRemoteRepo(NetworkService networkService){\n    return new RemoteRepositoryImpl(networkService);\n}\n@Singleton\n@Provides\npublic LocalRepository getLocalRepo(CsatDao csatDao, Executor exec){\n    return new LocalRepositoryImpl(csatDao, exec);\n}\n\n@Provides\n@Named(\"activity\")\npublic CompositeDisposable getCompositeDisposable(){\n    return new CompositeDisposable();\n}\n\n@Provides\n@Named(\"vm\")\npublic CompositeDisposable getVMCompositeDisposable(){\n    return new CompositeDisposable();\n}\n</code></pre>\n\n<p>Injecting in  activity </p>\n\n<pre><code>@Inject @field:Named(\"activity\")\nlateinit var compositeDisposable: CompositeDisposable\n@Inject\nlateinit var averageViewModelFactory: AverageViewModelFactory\n@Inject\nlateinit var averageViewModel: AverageViewModel\n</code></pre>\n\n<p>Injecting In View Model Factory</p>\n\n<pre><code>        class AverageViewModelFactory @Inject\n       constructor() : @JvmSuppressWildcards  ViewModelProvider.Factory {\n\n@Inject\nlateinit var localRepository: LocalRepository\n@Inject\nlateinit  var remoteRepository: RemoteRepository\n\n@Inject @field:Named(\"vm\")\nlateinit var compositeDisposable: CompositeDisposable\n\n@Override\noverride fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n    if (modelClass.isAssignableFrom(AverageViewModel::class.java)) {\n        return AverageViewModel(localRepository, remoteRepository, compositeDisposable) as T\n    }\n    throw IllegalArgumentException(\"Wrong ViewModel class\")\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>     class AverageViewModel @Inject constructor(\n  val localRepository: LocalRepository,\n  val remoteRepository: RemoteRepository,\n  val compositeDisposable: CompositeDisposable\n   ) : BaseViewModel&lt;AverageInteractor.view&gt;(){\n</code></pre>\n\n<p>Gradel </p>\n\n<pre><code>      //Dependencies injection\n     implementation 'com.google.dagger:dagger:2.19'\n      implementation 'com.google.dagger:dagger-android:2.19'\n       kapt 'com.google.dagger:dagger-compiler:2.19'\n        annotationProcessor 'com.google.dagger:dagger-compiler:2.19'\n      kapt 'com.google.dagger:dagger-android-processor:2.19'\n          compileOnly 'javax.annotation:jsr250-api:1.0'\n</code></pre>\n\n<hr>\n\n<p>Error\nerror: [Dagger/MissingBinding] io.reactivex.disposables.CompositeDisposable cannot be provided without an @Inject constructor or an @Provides-annotated method.\npublic interface AppComponent {\n       ^\n      io.reactivex.disposables.CompositeDisposable is provided at\n          com.sisindia.csat.deps.AppComponent.getCompositeDisposable()\n  It is also requested at:\n      com.sisindia.csat.projectmodules.score.AverageViewModel(\u2026, compositeDisposable)\n  The following other entry points also depend on it:\n      com.sisindia.csat.deps.AppComponent.inject(com.sisindia.csat.projectmodules.score.AverageScoreActivity)\n      com.sisindia.csat.deps.AppComponent.getVMCompositeDisposable()</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 10638252, "user_type": "registered", "profile_image": "https://graph.facebook.com/2155251237840357/picture?type=large", "display_name": "Vitalii Pshenychniuk", "link": "https://stackoverflow.com/users/10638252/vitalii-pshenychniuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1544709108, "creation_date": 1544709108, "answer_id": 53763391, "question_id": 53741660, "link": "https://stackoverflow.com/questions/53741660/save-restore-retrofit2-response-in-android/53763391#53763391", "title": "Save/Restore Retrofit2 response in Android", "body": "<p>I found a solution.</p>\n\n<p>My new <strong>onResume</strong> code:</p>\n\n<pre><code>override fun onResume() {\n    super.onResume()\n    repos?.clone()?.enqueue(obj)\n    recyclerClick()\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10638252, "user_type": "registered", "profile_image": "https://graph.facebook.com/2155251237840357/picture?type=large", "display_name": "Vitalii Pshenychniuk", "link": "https://stackoverflow.com/users/10638252/vitalii-pshenychniuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 53763391, "answer_count": 1, "score": 0, "last_activity_date": 1544709108, "creation_date": 1544612752, "question_id": 53741660, "link": "https://stackoverflow.com/questions/53741660/save-restore-retrofit2-response-in-android", "title": "Save/Restore Retrofit2 response in Android", "body": "<p>I have an application which connects to GitHub API. It load and show a list of repositories of certain user. And when I click on name of repositorium I switch to another fragment with WebView. When I return back to list, list has items but they are just a string items, not clickable. How can I save Retrofit response and then refresh list with this?</p>\n\n<p><strong>Fragment</strong>, where I show a list:</p>\n\n<pre><code>class MainFragment : Fragment() {\n\nlateinit var mRecyclerView: RecyclerView\nlateinit var name:String\nlateinit var service: GitHubService\nvar responseSave:List&lt;GitHubPOJO&gt; = ArrayList()\nvar posts: MutableList&lt;GitHubPOJO&gt; = ArrayList()\nprivate lateinit var btn:Button\n\noverride fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?): View? {\n\n    val view = inflater.inflate(R.layout.fragment_main, container, false)\n\n    btn = view.findViewById(R.id.button)\n    btn.setOnClickListener (onClick)\n\n    return view\n}\n\nval onClick = View.OnClickListener {\n    posts = ArrayList()\n\n    mRecyclerView = view!!.findViewById(R.id.posts_recycle_view)\n    val layoutManager = LinearLayoutManager(this.activity!!)\n    mRecyclerView.layoutManager = layoutManager\n\n    val adapter = PostsAdapter(posts)\n    mRecyclerView.adapter = adapter\n\n    hideKeyboard()\n    name = view!!.findViewById&lt;EditText&gt;(R.id.txt_user_name).text.toString()\n    if (name.isEmpty()){\n        Toast.makeText(activity!!,\"You do not entered User's name\",Toast.LENGTH_LONG).show()\n    };else{\n        if (isInternet()) {\n            serverConnect()\n            recyclerClick()\n        };else {\n            Toast.makeText(activity!!,\"Please, check your internet connection!\",Toast.LENGTH_LONG).show()\n        }\n    }\n}\n\nprivate fun serverConnect(){\n    service = Retrofit.Builder()\n        .baseUrl(\"https://api.github.com/\") // CHANGE API\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n        .create(GitHubService::class.java)\n    service.retrieveRepositories(name)\n        .enqueue(object : Callback&lt;List&lt;GitHubPOJO&gt;&gt; {\n            override fun onResponse(call: Call&lt;List&lt;GitHubPOJO&gt;&gt;, response: Response&lt;List&lt;GitHubPOJO&gt;&gt;) {\n                responseSave = response.body()!!\n                posts.addAll(responseSave)\n                mRecyclerView.adapter?.notifyDataSetChanged()\n                response.body()?.forEach { println(\"TAG_: $it\") }\n            }\n\n            override fun onFailure(call: Call&lt;List&lt;GitHubPOJO&gt;&gt;, t: Throwable) {\n            }\n        })\n}\n\nprivate fun recyclerClick(){\n    mRecyclerView.addOnItemTouchListener(ClickListener(this.activity!!, mRecyclerView, object : ClickListener.OnItemClickListener {\n        override fun onLongItemClick(view: View?, position: Int) {\n        }\n\n        override fun onItemClick(view: View, position: Int) {\n            val url = posts[position].htmlUrl\n            println(\"URL =  $url\")\n            view.findNavController().navigate(MainFragmentDirections.actionMainFragmentToWebFragment(url))\n                }\n            }\n        )\n    )\n}\n\n@Suppress(\"DEPRECATION\")\nfun isInternet():Boolean{\n    val cm = context!!.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n    val activeNetwork = cm.activeNetworkInfo\n    return activeNetwork!=null\n}\n\nfun hideKeyboard(){\n    val inputMethodManager = this.activity!!.getSystemService(Activity.INPUT_METHOD_SERVICE) as InputMethodManager\n    if (activity!!.currentFocus != null) {\n        inputMethodManager.hideSoftInputFromWindow(this.activity!!.currentFocus!!.windowToken, 0)\n    }\n}\n</code></pre>\n\n<p>There I have my <strong>onResume</strong> code. It can show me a list, but list items not clickable.</p>\n\n<pre><code>override fun onResume() {\n    super.onResume()\n    mRecyclerView = view!!.findViewById(R.id.posts_recycle_view)\n    val layoutManager = LinearLayoutManager(this.activity!!)\n    mRecyclerView.layoutManager = layoutManager\n    val adapter = PostsAdapter(posts)\n    mRecyclerView.adapter = adapter\n    adapter.updateAdapterList(responseSave.toMutableList())\n    println(\"RESUME\")\n    responseSave.forEach { println(\"TAG_: $it\") }\n}\n</code></pre>\n"}, {"tags": ["android", "android-studio", "kotlin", "live-templates"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1544622440, "post_id": 53741142, "comment_id": 94341282, "body": "You can&#39;t use a live template for that; you need to write a small plugin."}], "answers": [{"tags": [], "owner": {"reputation": 1338, "user_id": 5468990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qJoVJ.png?s=128&g=1", "display_name": "dj_frunza", "link": "https://stackoverflow.com/users/5468990/dj-frunza"}, "is_accepted": false, "score": 0, "last_activity_date": 1545065452, "creation_date": 1545065452, "answer_id": 53819675, "question_id": 53741142, "link": "https://stackoverflow.com/questions/53741142/android-studio-live-templates/53819675#53819675", "title": "Android Studio Live Templates", "body": "<p>You can create a groovy script in which you can do any logic you want with your file and after that link that groovy script with the newly created Live template:<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000661530-Advanced-Live-Templates-with-Groovy-scripting\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000661530-Advanced-Live-Templates-with-Groovy-scripting</a></p>\n\n<p>But yes, maybe it is better and faster to write a small plugin.</p>\n"}], "owner": {"reputation": 5780, "user_id": 1245166, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MTfiX.jpg?s=128&g=1", "display_name": "Volodymyr", "link": "https://stackoverflow.com/users/1245166/volodymyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545065452, "creation_date": 1544611078, "question_id": 53741142, "link": "https://stackoverflow.com/questions/53741142/android-studio-live-templates", "title": "Android Studio Live Templates", "body": "<p>I have <code>KotlinData</code> and want to generate <code>val domain</code> with getter function. There can be a different amount of the variables.\nI want to create Live Template for code generation but I can't find how to manage dynamic variables count. </p>\n\n<p>What can I use in \"Live Templates\" for dynamic class variables?</p>\n\n<pre><code>data class KotlinData(\n    private val val1: Int,\n    private val val2: Double,\n    private val val3: String,\n    ....\n    private val valN: String \n) {\n    val domain\n        get() = KotlinDataDomain(\n            val1 = val1,\n            val2 = val2,\n            val3 = val3,\n            ....\n            valN = valN\n        )\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 1, "creation_date": 1544610387, "post_id": 53740906, "comment_id": 94334392, "body": "you are call api into fragment why you are sending data activity to fragment"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "reply_to_user": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1544610525, "post_id": 53740906, "comment_id": 94334453, "body": "@AndroidTeam i use special method for retrofit calls as you can see in My Retrofit call can you provide me retrofit call Code ?"}, {"owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1544610978, "post_id": 53740906, "comment_id": 94334751, "body": "you want pass data from activity to fragment"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "reply_to_user": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "edited": false, "score": 0, "creation_date": 1544611789, "post_id": 53740906, "comment_id": 94335251, "body": "@AndroidTeam data is in ArrayList"}], "answers": [{"comments": [{"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1544693345, "post_id": 53741272, "comment_id": 94369425, "body": "please check your link"}, {"owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "edited": false, "score": 0, "creation_date": 1544698671, "post_id": 53741272, "comment_id": 94372452, "body": "My friend used this code to transfer i have special retrofit setting for it"}], "tags": [], "owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "is_accepted": true, "score": 3, "last_activity_date": 1544695024, "last_edit_date": 1544695024, "creation_date": 1544611539, "answer_id": 53741272, "question_id": 53740906, "link": "https://stackoverflow.com/questions/53740906/get-data-in-fragment-through-retrofit/53741272#53741272", "title": "Get Data in Fragment through Retrofit", "body": "<p>You can define an interface in your activity and let the fragment implement the interface. You can follow this example on my github: <a href=\"https://github.com/ngallazzi/ActivityToFragmentCommunicationExample\" rel=\"nofollow noreferrer\">ActivityToFragmentCommunication</a></p>\n\n<p>Basically, in your activity define:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  public interface DataLoadedListener {\n        public void onDataLoaded(ArrayList&lt;Post&gt; posts);\n    }\n</code></pre>\n\n<p>Then, make your fragment implement the interface like below:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ExampleFragment extends Fragment implements MainActivity.DataLoadedListener {\n\n  // your fragment code\n}\n</code></pre>\n\n<p>Finally in the onCreate() method of your activity:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Create new fragment and transaction\n        mExampleFragment = new ExampleFragment();\n        // setting mExampleFragment as data load listener\n        mDataLoadedListener = (DataLoadedListener) mExampleFragment;\n        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();\n        // Replace whatever is in the fragment_container view with this fragment,\n        // and add the transaction to the back stack if needed\n        transaction.replace(R.id.flContainer, mExampleFragment);\n        transaction.addToBackStack(null);\n        // Commit the transaction\n        transaction.commit();\n\n        // load data after click\n        btLoadData.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                loadData();\n                // notify attached fragment\n                mDataLoadedListener.onDataLoaded(myStrings);\n            }\n        });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 621, "user_id": 6875716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqr0O.jpg?s=128&g=1", "display_name": "Tariqul Islam", "link": "https://stackoverflow.com/users/6875716/tariqul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1544612816, "creation_date": 1544612816, "answer_id": 53741689, "question_id": 53740906, "link": "https://stackoverflow.com/questions/53740906/get-data-in-fragment-through-retrofit/53741689#53741689", "title": "Get Data in Fragment through Retrofit", "body": "<p>First check <code>currentFragment</code> in your activity class. You will get the <strong>fragment reference object</strong> in your activity class . so the example will like below:</p>\n\n<p>Suppose you have a fragment called <code>DataFragment</code> and you have a reference <code>mDataFragment</code> in your activity class. now when you get data in your activity class you will call <code>((DataFragment)mDataFragment).passData(yourDataList).</code> Remember <code>passData()</code> is a public method in your fragment class. Then you can add data in <code>adapter</code> and call <code>notifyDataSetChanged()</code></p>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 4258156, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wfwHtmrdazo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ozD7Eh1fy8CB8enQy4_IxIxcNzdQ/mo/photo.jpg?sz=128", "display_name": "Bram Sinke", "link": "https://stackoverflow.com/users/4258156/bram-sinke"}, "is_accepted": false, "score": 0, "last_activity_date": 1544612831, "creation_date": 1544612831, "answer_id": 53741695, "question_id": 53740906, "link": "https://stackoverflow.com/questions/53740906/get-data-in-fragment-through-retrofit/53741695#53741695", "title": "Get Data in Fragment through Retrofit", "body": "<p>Since you are working on Android, I would recommend the ViewModel component which makes it really easy to communicate between a activity and it's fragments.</p>\n\n<p>First add the package to your app</p>\n\n<pre><code>    implementation 'androidx.lifecycle:lifecycle-extensions:2.0.0'\n</code></pre>\n\n<p>Then create a ViewModel class</p>\n\n<pre><code>public class MyViewModel extends ViewModel {\n    public MutableLiveData&lt;ArrayList&lt;Post&gt;&gt; posts = new MutableLiveData&lt;ArrayList&lt;Post&gt;&gt;();\n}\n</code></pre>\n\n<p>Now in the fragment subscribe to it.</p>\n\n<pre><code> public class DetailFragment extends Fragment {\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);\n        model.posts.observe(this, { posts -&gt;\n           // Update the UI.\n        });\n    }\n }\n</code></pre>\n\n<p>Then set the value in your MainActivity as shown below and voila you have the data in your fragment. You can read more about it <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel#java\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>public class MyActivity extends AppCompatActivity {\n    public void onCreate(Bundle savedInstanceState) {\n        // Create a ViewModel the first time the system calls an activity's onCreate() method.\n        // Re-created activities receive the same MyViewModel instance created by the first activity.\n\n        MyViewModel model = ViewModelProviders.of(this).get(MyViewModel.class);\n        model.users.setValue(posts);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5935, "user_id": 10182897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PuvGT.jpg?s=128&g=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/10182897/ashish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3668, "favorite_count": 0, "accepted_answer_id": 53741272, "answer_count": 3, "score": 2, "last_activity_date": 1546951207, "creation_date": 1544610314, "last_edit_date": 1546951207, "question_id": 53740906, "link": "https://stackoverflow.com/questions/53740906/get-data-in-fragment-through-retrofit", "title": "Get Data in Fragment through Retrofit", "body": "<p>In this problem I want to get Data from My API</p>\n\n<p>In which I get Data from Retrofit</p>\n\n<p>I want to show data in RecyclerView in Fragment Tabs but how can I send data from activity to Fragment</p>\n\n<p>This is all I have tried </p>\n\n<p><strong>Retrofit call which provide me ArrayList of my posts</strong></p>\n\n<pre><code>getMainApp().swiftAPI.getPosts().enqueue(object : Callback&lt;ArrayList&lt;Post&gt;&gt;{\n            override fun onFailure(call: Call&lt;ArrayList&lt;Post&gt;&gt;?, t: Throwable?) {\n                Toast.makeText(this@DashboardActivity, t?.message, Toast.LENGTH_SHORT)\n            }\n\n            override fun onResponse(call: Call&lt;ArrayList&lt;Post&gt;&gt;?, response: Response&lt;ArrayList&lt;Post&gt;&gt;?) {\n                if (response?.isSuccessful!!){\n\n                }\n            }\n</code></pre>\n\n<p><strong>PagesFragment</strong></p>\n\n<pre><code>val rootView = inflater.inflate(R.layout.fragment_page, container, false)\n        val video_recyclerview = rootView.findViewById(R.id.pages_rcv) as RecyclerView // Add this\n        video_recyclerview.layoutManager = LinearLayoutManager(activity)\n        video_recyclerview.adapter = PagesAdapter()\n        return rootView\n</code></pre>\n\n<p>I want to Know if there is any way possible to send ArrayList to fragment cause my data is in ArrayList\n<a href=\"https://i.stack.imgur.com/CJnMy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CJnMy.png\" alt=\"As shown in Picture\"></a></p>\n"}, {"tags": ["java", "android", "kotlin", "mapbox", "mapbox-android"], "comments": [{"owner": {"reputation": 2014, "user_id": 6895166, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/N5CEX.jpg?s=128&g=1", "display_name": "SamHoque", "link": "https://stackoverflow.com/users/6895166/samhoque"}, "edited": false, "score": 0, "creation_date": 1544609860, "post_id": 53740720, "comment_id": 94334033, "body": "Uh why is java tagged? your code is kotlin"}, {"owner": {"reputation": 11, "user_id": 10710596, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WcPjMlcEIsM/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gQ86fKNpr_Nff2Yfz0vOmcegd4QA/mo/photo.jpg?sz=128", "display_name": "Ryosuke Sato", "link": "https://stackoverflow.com/users/10710596/ryosuke-sato"}, "reply_to_user": {"reputation": 2014, "user_id": 6895166, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/N5CEX.jpg?s=128&g=1", "display_name": "SamHoque", "link": "https://stackoverflow.com/users/6895166/samhoque"}, "edited": false, "score": 0, "creation_date": 1544610076, "post_id": 53740720, "comment_id": 94334191, "body": "There is no particular meaning. I tagged java because I can accept either kotlin or java."}, {"owner": {"reputation": 792, "user_id": 12469165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb405330cf5be20e24b36e41fde133?s=128&d=identicon&r=PG&f=1", "display_name": "Amit pandey", "link": "https://stackoverflow.com/users/12469165/amit-pandey"}, "edited": false, "score": 0, "creation_date": 1586495804, "post_id": 53740720, "comment_id": 108153377, "body": "hello sir i m stuck in same issue can you please help me out thanks"}], "owner": {"reputation": 11, "user_id": 10710596, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WcPjMlcEIsM/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gQ86fKNpr_Nff2Yfz0vOmcegd4QA/mo/photo.jpg?sz=128", "display_name": "Ryosuke Sato", "link": "https://stackoverflow.com/users/10710596/ryosuke-sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549707184, "creation_date": 1544609703, "last_edit_date": 1544610272, "question_id": 53740720, "link": "https://stackoverflow.com/questions/53740720/get-geojson-parameter-from-mapbox-layer-android", "title": "Get geoJSON parameter from Mapbox Layer - android", "body": "<p>I followed the Mapbox Android tutorial to draw Polygons with geoJSON: <a href=\"https://www.mapbox.com/android-docs/maps/overview/data-driven-styling/#geojson\" rel=\"nofollow noreferrer\">https://www.mapbox.com/android-docs/maps/overview/data-driven-styling/#geojson</a></p>\n\n<p>It works, but I thought that I could not call \"the Polygon's id\" in geoJSON from a layer.</p>\n\n<p>I want to call this for detecting that I stand on the Polygons with smartphone location.</p>\n\n<p>How can I call \"the Polygon's id\" in geoJSON from a layer?</p>\n\n<p><strong>Here are my codes(I wrote in Kotlin, and I know Android Java):</strong></p>\n\n<pre><code>// draw polygon from geoJSON\nprivate fun drawPolygon(map: MapboxMap) {\n    val source = GeoJsonSource(\"sourceId\", GEOJSON_STRING) //following\n    map.addSource(source)\n    val layer = FillLayer(\"layerId\", \"sourceId\")\n    map.addLayer(layer)\n\n    findPolygonId(layer)\n}\n\n// find polygon id from layer\nfindPolygonId(layer: Layer) {\n    val id = layer.find(geoJSON.id) &lt;--- unknown code\n}\n</code></pre>\n\n<p><strong>GEOJSON_STRING is following:</strong></p>\n\n<pre><code>{\n  \"type\": \"FeatureCollection\",\n  \"features\": [\n    {\n      \"type\": \"Feature\",\n      \"id\": 1, &lt;-----------------I want call this!\n      \"properties\": {\n        \"stroke\": \"#000000\",\n        \"stroke-width\": 3.3,\n        \"stroke-opacity\": 0,\n        \"fill\": \"#000000\",\n        \"fill-opacity\": 1\n      },\n      \"geometry\": {\n        \"type\": \"Polygon\",\n        \"coordinates\": [\n          [\n            [\n              Lng1,\n              Lat1\n            ],\n            [\n              Lng2,\n              Lat1\n            ],\n            [\n              Lng2,\n              Lat3\n            ],\n            [\n              Lng1,\n              Lat3\n            ],\n            [\n              Lng1,\n              Lat1\n            ]\n          ]\n        ]\n      }\n    },\n    {\n      \"type\": \"Feature\",\n      \"id\": 2, &lt;-----------------I want call this!\n      \"properties\": {\n        \"stroke\": \"#000000\",\n        \"stroke-width\": 3.3,\n        \"stroke-opacity\": 0,\n        \"fill\": \"#000000\",\n        \"fill-opacity\": 1\n      },\n      \"geometry\": {\n        \"type\": \"Polygon\",\n        \"coordinates\": [\n          [\n          [\n            [\n              Lng4,\n              Lat4\n            ],\n            [\n              Lng5,\n              Lat4\n            ],\n            [\n              Lng5,\n              Lat6\n            ],\n            [\n              Lng4,\n              Lat6\n            ],\n            [\n              Lng4,\n              Lat4\n            ]\n          ]\n        ]\n      }\n    }\n  ]\n}\n</code></pre>\n"}, {"tags": ["math", "kotlin", "rounding", "number-formatting"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544618614, "post_id": 53740617, "comment_id": 94339131, "body": "my suggestion: never ever use float or double if you want exact numbers to show up ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 2, "creation_date": 1544617366, "post_id": 53742238, "comment_id": 94338454, "body": "The documentation says: <i>&quot;...in which case round up&quot;</i>"}, {"owner": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "edited": false, "score": 0, "creation_date": 1544617531, "post_id": 53742238, "comment_id": 94338536, "body": "Unfortunately (and obviuosly) UP gives 0,01 for 0.002, for example :( It seems (and I hope) the problem is actual for only numbers close to zero."}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "reply_to_user": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 0, "creation_date": 1544618645, "post_id": 53742238, "comment_id": 94339149, "body": "@forpas oops! I copied the documentation from the enum value below. Thanks for spotting!"}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "reply_to_user": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "edited": false, "score": 1, "creation_date": 1544618873, "post_id": 53742238, "comment_id": 94339264, "body": "@Alexey, did you link I provided? It doesn&#39;t happen with numbers close to zero, it happens will all floating point numbers."}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544619115, "post_id": 53742238, "comment_id": 94339402, "body": "@Roland depends what you want. I&#39;ve updated my code with something which probably is what you wanted though"}, {"owner": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "edited": false, "score": 0, "creation_date": 1544624990, "post_id": 53742238, "comment_id": 94342758, "body": "@ErikPragt Using <code>BigDecimal</code> works fine. But I not too much like conversions sequence Float-&gt;String-&gt;BigDecimal-&gt;String. Tried <code>BigDecimal(0.005.toDouble())</code> - also does not work, gives 0. So the only solution seems to be <code>f.format(BigDecimal(0.005.toString()))</code>"}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "reply_to_user": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "edited": false, "score": 0, "creation_date": 1544651978, "post_id": 53742238, "comment_id": 94356751, "body": "@Alexey if you don&#39;t want loss of precision, BigDecimal is the way forward."}], "tags": [], "owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "is_accepted": false, "score": 1, "last_activity_date": 1544619062, "last_edit_date": 1544619062, "creation_date": 1544614745, "answer_id": 53742238, "question_id": 53740617, "link": "https://stackoverflow.com/questions/53740617/decimalformat-with-roundingmode-half-up/53742238#53742238", "title": "DecimalFormat with RoundingMode.HALF_UP", "body": "<p>What the documentation says about <code>RoundingMode.HALF_UP</code> is:</p>\n\n<blockquote>\n  <p>Rounding mode to round towards \"nearest neighbor\" unless both neighbors are equidistant, in which case round up.</p>\n</blockquote>\n\n<p>While that might look like the behavior you're looking for, these are decimal floats, and they have a hard time being represented in memory. There's a great read on it on <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">the Oracle site</a>.</p>\n\n<p>So, it seems that -0.005 and -0.015 both are closer (nearest neighbor) to -0.01 than anything else, so they both are formatted as -0.01. To make your code do what you want it do to, is to change your rounding mode to: </p>\n\n<pre><code>roundingMode = RoundingMode.UP\n</code></pre>\n\n<p>The output of running that is:</p>\n\n<pre><code>-0.03\n-0.02\n-0.01\n0.01\n0.02\n0.03\n</code></pre>\n\n<p>Which is exactly what you expected. If you do want your code to work, you can use the following approach though:</p>\n\n<pre><code>import java.math.BigDecimal\nimport java.math.RoundingMode\nimport java.text.DecimalFormat\n\nfun main(args: Array&lt;String&gt;) {\n    val f = DecimalFormat(\"#.##\").apply { roundingMode = RoundingMode.HALF_UP }\n    println(f.format( BigDecimal(\"-1000.045\")))\n    println(f.format( BigDecimal(\"-1000.035\")))\n    println(f.format( BigDecimal(\"-1000.025\")))\n    println(f.format( BigDecimal(\"-1000.015\")))\n    println(f.format( BigDecimal(\"-1000.005\")))\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1544619161, "post_id": 53743379, "comment_id": 94339441, "body": "My apologies, I have a similar solution as what you provided!"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1544619179, "last_edit_date": 1544619179, "creation_date": 1544618865, "answer_id": 53743379, "question_id": 53740617, "link": "https://stackoverflow.com/questions/53740617/decimalformat-with-roundingmode-half-up/53743379#53743379", "title": "DecimalFormat with RoundingMode.HALF_UP", "body": "<p>Never ever use <code>float</code> or <code>double</code> if you want exact numbers to show up. If you round and want the rounding to happen on a solid base, you don't want <code>float</code> or <code>double</code> neither ;-)</p>\n\n<p>Your sample using <code>double</code> would also give wrong results. Your sample using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> will give the results you expect. So... stick with <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a> if you want to be safe(r).</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n  val f = DecimalFormat(\"#.##\").apply { roundingMode = RoundingMode.HALF_UP }\n  println(f.format(BigDecimal(\"-0.025\")))\n  println(f.format(BigDecimal(\"-0.015\")))\n  println(f.format(BigDecimal(\"-0.005\")))\n  println(f.format(BigDecimal(\"0.005\")))\n  println(f.format(BigDecimal(\"0.015\")))\n  println(f.format(BigDecimal(\"0.025\")))\n}\n</code></pre>\n"}], "owner": {"reputation": 2270, "user_id": 3375151, "user_type": "registered", "accept_rate": 15, "profile_image": "https://graph.facebook.com/100001056706994/picture?type=large", "display_name": "Alexey", "link": "https://stackoverflow.com/users/3375151/alexey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544626062, "creation_date": 1544609375, "last_edit_date": 1592644375, "question_id": 53740617, "link": "https://stackoverflow.com/questions/53740617/decimalformat-with-roundingmode-half-up", "title": "DecimalFormat with RoundingMode.HALF_UP", "body": "<p>Having a simple code</p>\n<pre><code>import java.math.RoundingMode\nimport java.text.DecimalFormat\n  \nfun main(args: Array&lt;String&gt;) {\n  val f = DecimalFormat(&quot;#.##&quot;).apply { roundingMode = RoundingMode.HALF_UP }\n  println(f.format(-0.025f))\n  println(f.format(-0.015f))\n  println(f.format(-0.005f))\n  println(f.format(0.005f))\n  println(f.format(0.015f))\n  println(f.format(0.025f))\n}\n</code></pre>\n<p>I got the following output:</p>\n<blockquote>\n<p>-0,03 &lt;-- ok</p>\n<p>-0,01 &lt;-- expecting -0,02</p>\n<p>-0 &lt;-- expecting -0,01</p>\n<p>0 &lt;-- expecting 0,01</p>\n<p>0,01 &lt;--- expecting 0,02</p>\n<p>0,03 &lt;-- ok</p>\n</blockquote>\n<p>Do I correctly understand <code>RoundingMode.HALF_UP</code> meaning?</p>\n<p><strong>P.S.</strong>\nI had found, that using doubles instead of floats solve the problem. So <code>println(f.format(0.005.toDouble()))</code> works, giving expected <code>0.1</code>.</p>\n"}, {"tags": ["json", "android-studio", "kotlin", "retrofit"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 9493704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd69b5827f8d1e31750fd718b33c8b?s=128&d=identicon&r=PG&f=1", "display_name": "tore", "link": "https://stackoverflow.com/users/9493704/tore"}, "edited": false, "score": 0, "creation_date": 1544617699, "post_id": 53741610, "comment_id": 94338617, "body": "Thanks you for helping me out @Erik! I tried your code but it keeps crashing. I think it has do do with synchronicity. Please see my updated post if there is some solution to this. Oddly, there&#39;s no error message..."}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "reply_to_user": {"reputation": 369, "user_id": 9493704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd69b5827f8d1e31750fd718b33c8b?s=128&d=identicon&r=PG&f=1", "display_name": "tore", "link": "https://stackoverflow.com/users/9493704/tore"}, "edited": false, "score": 0, "creation_date": 1544618525, "post_id": 53741610, "comment_id": 94339066, "body": "Hi @tore , I&#39;ve updated the example to be more complete. I&#39;ve tried running, and it works for me."}, {"owner": {"reputation": 369, "user_id": 9493704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd69b5827f8d1e31750fd718b33c8b?s=128&d=identicon&r=PG&f=1", "display_name": "tore", "link": "https://stackoverflow.com/users/9493704/tore"}, "edited": false, "score": 0, "creation_date": 1544735486, "post_id": 53741610, "comment_id": 94392074, "body": "I&#39;m running it from <code>onCreate</code> on main thread. Perhaps that is why it keeps crashing, no? Error message: E/AndroidRuntime: FATAL EXCEPTION: main                   Process: com.android.slothmode.jsonexexercise, PID: 5954                   java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.slothmode.jsonexexercise/com.andro&zwnj;&#8203;id.slothmode.jsonexe&zwnj;&#8203;xercise.MainActivity&zwnj;&#8203;}: android.os.NetworkOnMainThreadException            Are you calling <code>fun main(args: Array&lt;String&gt;)</code> from <code>onCreate</code>? What is that parameter <code>args</code> ? Think I&#39;m missing something. Will play around a bit.."}], "tags": [], "owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "is_accepted": false, "score": 0, "last_activity_date": 1544618459, "last_edit_date": 1544618459, "creation_date": 1544612601, "answer_id": 53741610, "question_id": 53740329, "link": "https://stackoverflow.com/questions/53740329/how-do-i-get-json-data-from-retrofit-using-kotlin-android-studio/53741610#53741610", "title": "How do I get Json data from Retrofit using Kotlin? (Android Studio)", "body": "<p>You're on the right way, almost there. Now that you have the <code>myRetrofit</code>, you need to use it. You can use it by doing this:</p>\n\n<pre><code>val repository = myRetrofit.create(RetrofitCalls::class.java)\n</code></pre>\n\n<p>Once you have the <code>repository</code>, you can call the methods on it. You don't have any methods in your interface, so I'm not sure if your construct works. What works for me, is the following:</p>\n\n<pre><code>interface RetrofitCalls {\n    @GET(\"lnjb8\")\n    fun findPosts(): Call&lt;List&lt;RetrofitVariables&gt;&gt;\n}\n</code></pre>\n\n<p>I've used <code>Call</code>, but probably <code>Observable</code> works just as well if you want to do async calls.</p>\n\n<p>If you want the full version of how to use the repository:</p>\n\n<pre><code>import retrofit2.Call\nimport retrofit2.Retrofit\nimport retrofit2.converter.gson.GsonConverterFactory\nimport retrofit2.http.GET\n\ndata class RetrofitVariables(var name: String, var age: Int, var vehicle: String)\n\ninterface RetrofitCalls {\n    @GET(\"lnjb8\")\n    fun findPosts(): Call&lt;List&lt;RetrofitVariables&gt;&gt;\n}\n\nvar myRetrofit = Retrofit.Builder()\n        .baseUrl(\"https://api.myjson.com/bins/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n\nval repository = myRetrofit.create(RetrofitCalls::class.java)\n\nfun main(args: Array&lt;String&gt;) {\n    val call = repository.findPosts()\n    val variables = call.execute().body()\n\n    variables?.forEach {\n        println(it)\n    }\n}\n</code></pre>\n\n<p>Produces the following output:</p>\n\n<pre><code>RetrofitVariables(name=John, age=30, vehicle=bicycle)\nRetrofitVariables(name=Bob, age=32, vehicle=walking)\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 9493704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66dd69b5827f8d1e31750fd718b33c8b?s=128&d=identicon&r=PG&f=1", "display_name": "tore", "link": "https://stackoverflow.com/users/9493704/tore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 869, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544618459, "creation_date": 1544608558, "last_edit_date": 1544617593, "question_id": 53740329, "link": "https://stackoverflow.com/questions/53740329/how-do-i-get-json-data-from-retrofit-using-kotlin-android-studio", "title": "How do I get Json data from Retrofit using Kotlin? (Android Studio)", "body": "<p>Trying to wrap my head around Retrofit. I'm new to this so I find it confusing even though I have watched videos and read about it here on <code>SO</code>. I have added some <code>JSON</code> test data that looks like this:</p>\n\n<pre><code>[\n    {\"name\":\"John\",\"age\":30,\"vehicle\":\"bicycle\"}, \n    {\"name\":\"Bob\",\"age\":32,\"vehicle\":\"walking\"}\n]\n</code></pre>\n\n<p>It has been validated and is found on this adress: <code>https://api.myjson.com/bins/lnjb8</code></p>\n\n<p>Have added internet permission in <code>manifest</code> and <code>gradle</code> implementations.</p>\n\n<p>My <code>interface</code> looks like this:</p>\n\n<pre><code>interface RetrofitCalls {\n\n    @get:GET(\"lnjb8\")\n    val posts:Observable&lt;List&lt;RetrofitVariables&gt;&gt;\n}\n</code></pre>\n\n<p>I have a class to deserialise the <code>Json</code> data in the <code>constructor</code>:</p>\n\n<pre><code>class RetrofitVariables(var name: String, var age: Int, var vehicle: String) {}\n</code></pre>\n\n<p>Then in my main class my builder looks like this:</p>\n\n<pre><code>var myRetrofit = Retrofit.Builder()\n        .baseUrl(\"https://api.myjson.com/bins/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n</code></pre>\n\n<p>But from here I'm completely clueless on how to get the <code>Json</code> data. So my questions are, how do I use the interface to display the raw <code>Json</code> data (console is fine), and how do I deserialise the <code>Json</code> data?</p>\n\n<p><strong><em>UPDATE</em></strong>\nI added this:\nIn the <code>interface</code>:</p>\n\n<pre><code>@GET(\"lnjb8\")\nfun findPosts(): Call&lt;List&lt;RetrofitVariables&gt;&gt;\n</code></pre>\n\n<p>And in <code>main</code> class:</p>\n\n<pre><code>var repository = myRetrofit.create(RetrofitCalls::class.java)\n\nval jsonVariables = repository.findPosts().execute().body()\n\njsonVariables!!.forEach { println(\"TAG \" + it) }\n</code></pre>\n\n<p>Is this correct? It keeps crashing, and I think it has to do with it being a synchronous call rather than an asynchronous call. I saw somewhere that it's possible to use <code>.enqueue()</code> as in <code>jasonVariables.enqueue()</code> but I'm unsure how to use it.</p>\n"}, {"tags": ["kotlin", "ktor"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 10779793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ba03b6afd74345b525621fb4cc2f37?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Yanez", "link": "https://stackoverflow.com/users/10779793/jay-yanez"}, "edited": false, "score": 1, "creation_date": 1544650614, "post_id": 53741893, "comment_id": 94356107, "body": "Erik, your solution works!!! I modified it to work with ktor. I will add the updated code in a few minutes. Thank you !"}], "tags": [], "owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "is_accepted": true, "score": 7, "last_activity_date": 1544613466, "creation_date": 1544613466, "answer_id": 53741893, "question_id": 53739245, "link": "https://stackoverflow.com/questions/53739245/ktor-client-https-request-with-self-signed-certificate/53741893#53741893", "title": "ktor client https request with self-signed certificate", "body": "<p>You need to configure Apache HttpClient to ignore self signed certificates, and pass that to KTor. Based on the information <a href=\"https://memorynotfound.com/ignore-certificate-errors-apache-httpclient/\" rel=\"noreferrer\">here</a>, you can ignore self signed certificate validation with the following code:</p>\n\n<pre><code>// use the TrustSelfSignedStrategy to allow Self Signed Certificates\nval sslContext = SSLContextBuilder\n        .create()\n        .loadTrustMaterial(TrustSelfSignedStrategy())\n        .build()\n\nval allowAllHosts = NoopHostnameVerifier()\nval connectionFactory = SSLConnectionSocketFactory(sslContext, allowAllHosts)\n\nval client = HttpClients\n        .custom()\n        .setSSLSocketFactory(connectionFactory)\n        .build() \n</code></pre>\n\n<p>The last thing you have to do is to use the client in your KTor code. I haven't tried that myself yet, but let me see know how you go.</p>\n"}, {"comments": [{"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 1, "creation_date": 1544652061, "post_id": 53751861, "comment_id": 94356800, "body": "Thanks for sharing this solution, I&#39;m sure it will come handy in the future!"}], "tags": [], "owner": {"reputation": 439, "user_id": 10779793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ba03b6afd74345b525621fb4cc2f37?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Yanez", "link": "https://stackoverflow.com/users/10779793/jay-yanez"}, "is_accepted": false, "score": 10, "last_activity_date": 1544651161, "creation_date": 1544651161, "answer_id": 53751861, "question_id": 53739245, "link": "https://stackoverflow.com/questions/53739245/ktor-client-https-request-with-self-signed-certificate/53751861#53751861", "title": "ktor client https request with self-signed certificate", "body": "<p><strong>Based on Erik answer this is how I made Ktor Apache Client to accept a self-signed certificate:</strong> </p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking {\n    val client = HttpClient(Apache) {\n        install(JsonFeature) {\n            serializer = GsonSerializer()\n        }\n        engine {\n            customizeClient {\n                setSSLContext(\n                    SSLContextBuilder\n                        .create()\n                        .loadTrustMaterial(TrustSelfSignedStrategy())\n                        .build()\n                )\n                setSSLHostnameVerifier(NoopHostnameVerifier())\n            }\n        }\n    }\n\n    val job = GlobalScope.launch {\n        try {\n            val sslGetResult = client.get&lt;String&gt;(\"https://10.0.0.11:8443/get-my-services\")\n            println(\"${sslGetResult}\")\n        } catch (e: Exception) {\n            println(\"Error: ${e.message}\")\n        }\n    }\n\n    job.join()\n}\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 10779793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ba03b6afd74345b525621fb4cc2f37?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Yanez", "link": "https://stackoverflow.com/users/10779793/jay-yanez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3142, "favorite_count": 0, "accepted_answer_id": 53741893, "answer_count": 2, "score": 3, "last_activity_date": 1544651161, "creation_date": 1544604837, "last_edit_date": 1544605698, "question_id": 53739245, "link": "https://stackoverflow.com/questions/53739245/ktor-client-https-request-with-self-signed-certificate", "title": "ktor client https request with self-signed certificate", "body": "<p>I have a Ktor server application (rest api) running with a self signed certificate. </p>\n\n<p>It works fine from a browser (after a warning and a confirmation) port 80 is redirected to 8443. </p>\n\n<p>But if I try this from a Ktor Apache Client:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) = runBlocking {\n\n    val client = HttpClient(Apache) {\n        install(JsonFeature) {\n            serializer = GsonSerializer()\n        }\n    }\n\n    val job = GlobalScope.launch {\n        try {\n            //self-signed certificate\n            val resultWillFail = client.get&lt;String&gt;(\"https://10.0.0.11:8443/get-my-services\")\n            println(\"${resultWillFail}\")\n            val resultOk = client.get&lt;String&gt;(\"https://en.wikipedia.org/wiki/Main_Page\") //ok\n            println(\"${resultOk}\")\n        } catch (e: Exception) {\n            println(\"Error: ${e.message}\")\n        }\n    }\n\n    job.join()\n}\n</code></pre>\n\n<p>My request to <a href=\"https://10.0.0.11:8443/get-my-services\" rel=\"nofollow noreferrer\">https://10.0.0.11:8443/get-my-services</a> will fail:</p>\n\n<blockquote>\n  <p><strong>Error: General SSLEngine problem</strong></p>\n</blockquote>\n\n<p>I also tried the same using curl:</p>\n\n<blockquote>\n  <p><strong>curl: (77) schannel: next InitializeSecurityContext failed: SEC_E_UNTRUSTED_ROOT (0x80090325) - The certificate chain was issued\n  by an authority that is not trusted.</strong></p>\n</blockquote>\n\n<p>So my question would be: How to use a self signed certificate with ktor client (Apache) ?</p>\n\n<p>Thanks,\nJ</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544603776, "post_id": 53738900, "comment_id": 94330459, "body": "Are your sure the list you are passing contains any value?"}, {"owner": {"reputation": 257, "user_id": 5118200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6u3gkHPgMf8/AAAAAAAAAAI/AAAAAAAAAFQ/rmT3UGMoKjA/photo.jpg?sz=128", "display_name": "Mohsen Hatami", "link": "https://stackoverflow.com/users/5118200/mohsen-hatami"}, "reply_to_user": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544604019, "post_id": 53738900, "comment_id": 94330569, "body": "@Dennis Yeah I&#39;m sure. I checked it 2 times"}, {"owner": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544604263, "post_id": 53738900, "comment_id": 94330713, "body": "Try printing <code>list[i].name</code> in console, do you see anything?"}, {"owner": {"reputation": 257, "user_id": 5118200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6u3gkHPgMf8/AAAAAAAAAAI/AAAAAAAAAFQ/rmT3UGMoKjA/photo.jpg?sz=128", "display_name": "Mohsen Hatami", "link": "https://stackoverflow.com/users/5118200/mohsen-hatami"}, "reply_to_user": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544604431, "post_id": 53738900, "comment_id": 94330789, "body": "@Dennis Yeah, I can see all 4 items in list when I debug it. I&#39;m steel wondering why s array does not fill just like java method"}, {"owner": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544604631, "post_id": 53738900, "comment_id": 94330887, "body": "I mean did you explicitly <code>println(list[i].name)</code> ? I mean what if it&#39;s returning a null value?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1544606783, "post_id": 53738900, "comment_id": 94332195, "body": "In Java, you use <code>getPersonalityTypeName</code>, in Kotlin you use <code>.name</code> which corresponds to Java <code>getName</code>. If you use the same method, you should see the same result, because code is otherwise equivalent."}], "answers": [{"tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 4, "last_activity_date": 1544609780, "last_edit_date": 1544609780, "creation_date": 1544603870, "answer_id": 53739023, "question_id": 53738900, "link": "https://stackoverflow.com/questions/53738900/how-to-fill-string-array-in-kotlin/53739023#53739023", "title": "How to fill String[] array in Kotlin", "body": "<p>With <code>map</code> and <code>toTypedArray()</code>:</p>\n\n<pre><code>private fun getNameOfPersonalityType(list: List&lt;PersonalityType&gt;) = list.map { it.name }.toTypedArray()\n</code></pre>\n\n<p>I guess it's <code>Type</code> and not <code>Tpye</code><br/>\nJust check the <code>size</code> after. If it is <code>0</code> then the list was empty.<br/>\nIf the list passed as parameter may contain <code>null</code> values, then change to this:</p>\n\n<pre><code>private fun getNameOfPersonalityType(list: List&lt;PersonalityType?&gt;) = list.mapNotNull { it?.name }.toTypedArray()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2810, "user_id": 2325929, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/f8057b78c5e5665878dd52fc5b1f00e5?s=128&d=identicon&r=PG", "display_name": "theanilpaudel", "link": "https://stackoverflow.com/users/2325929/theanilpaudel"}, "is_accepted": false, "score": 2, "last_activity_date": 1544604565, "creation_date": 1544604565, "answer_id": 53739169, "question_id": 53738900, "link": "https://stackoverflow.com/questions/53738900/how-to-fill-string-array-in-kotlin/53739169#53739169", "title": "How to fill String[] array in Kotlin", "body": "<p>This is working perfectly fine</p>\n\n<pre><code>private fun check(){\n        val list = ArrayList&lt;String&gt;()\n        list.add(\"json\")\n        list.add(\"statham\")\n        println(\"value from array \"+getNameOfPersonalityTpye(list)[1]) //prints statham\n    }\n\n    private fun getNameOfPersonalityTpye(list:List&lt;String&gt;): Array&lt;String?&gt;{\n        val s=  arrayOfNulls&lt;String&gt;(list.size)\n        for(i in s.indices){\n            s[i] = list[i]\n        }\n        return s\n    }\n</code></pre>\n\n<p>So this <code>list[i].name;</code> in your code might be <code>null</code>. Otherwise everything is fine.</p>\n"}, {"tags": [], "owner": {"reputation": 2014, "user_id": 6895166, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/N5CEX.jpg?s=128&g=1", "display_name": "SamHoque", "link": "https://stackoverflow.com/users/6895166/samhoque"}, "is_accepted": false, "score": 0, "last_activity_date": 1544605480, "creation_date": 1544605480, "answer_id": 53739403, "question_id": 53738900, "link": "https://stackoverflow.com/questions/53738900/how-to-fill-string-array-in-kotlin/53739403#53739403", "title": "How to fill String[] array in Kotlin", "body": "<p>You can do the following with <code>Stream</code></p>\n\n<pre><code>private fun getNameOfPersonalityTpye(list: List&lt;PersonalityTpye&gt;): Array&lt;String&gt; {\n    return list.stream().map&lt;Any&gt; { e -&gt; e.getPersonalityTypeName() }.toArray() as Array&lt;String&gt;\n}\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 5118200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6u3gkHPgMf8/AAAAAAAAAAI/AAAAAAAAAFQ/rmT3UGMoKjA/photo.jpg?sz=128", "display_name": "Mohsen Hatami", "link": "https://stackoverflow.com/users/5118200/mohsen-hatami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2864, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1544610192, "creation_date": 1544603334, "question_id": 53738900, "link": "https://stackoverflow.com/questions/53738900/how-to-fill-string-array-in-kotlin", "title": "How to fill String[] array in Kotlin", "body": "<p>I have a method in java just like this and I want to convert it to kotlin. I wrote a method in kotlin but array does not fill and I have null array in return. how can I fix that? Thank in Advance.</p>\n\n<p><strong>Java code</strong></p>\n\n<pre><code>private String[] getNameOfPersonalityTpye(List&lt;PersonalityTpye&gt; list){\n        String[] s = new String[list.size()];\n        for(int i = 0; i &lt; list.size(); i++){\n            s[i] = list.get(i).getPersonalityTypeName();\n        }\n        return s;\n    }\n</code></pre>\n\n<p><strong>Kotlin code</strong></p>\n\n<pre><code>private fun getNameOfPersonalityTpye(list: List&lt;PersonalityTpye&gt;): Array&lt;String?&gt;{\n        val s=  arrayOfNulls&lt;String&gt;(list.size);\n        for(i in list.indices){\n            s[i] = list[i].name;\n        }\n        return s;\n    }\n</code></pre>\n"}, {"tags": ["kotlin", "cryptojs"], "comments": [{"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1544613543, "post_id": 53738684, "comment_id": 94336234, "body": "Hi Pranav, it would help us solve your issue a bit more if you provide some code, and maybe an error you run into. Thanks!"}, {"owner": {"reputation": 79, "user_id": 1502114, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f3782ee31be835b919addac8d14ebb4?s=128&d=identicon&r=PG", "display_name": "Pranav kirtani", "link": "https://stackoverflow.com/users/1502114/pranav-kirtani"}, "reply_to_user": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1544632839, "post_id": 53738684, "comment_id": 94347575, "body": "@ErikPragt:  I am using the following js library to sign <a href=\"https://www.npmjs.com/package/jsontokens\" rel=\"nofollow noreferrer\">npmjs.com/package/jsontokens</a> and the following java library to verify    <a href=\"https://stackoverflow.com/questions/10900643/how-can-i-construct-a-java-security-publickey-object-from-a-base64-encoded-strin\" title=\"how can i construct a java security publickey object from a base64 encoded strin\">stackoverflow.com/questions/10900643/&hellip;</a>     The error I am seeing is invalid key format"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 1502114, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f3782ee31be835b919addac8d14ebb4?s=128&d=identicon&r=PG", "display_name": "Pranav kirtani", "link": "https://stackoverflow.com/users/1502114/pranav-kirtani"}, "is_accepted": false, "score": 0, "last_activity_date": 1569306472, "creation_date": 1569306472, "answer_id": 58074252, "question_id": 53738684, "link": "https://stackoverflow.com/questions/53738684/verifying-a-signature-signed-in-javascript-inside-a-kotlin-application/58074252#58074252", "title": "Verifying a signature signed in javascript inside a Kotlin application", "body": "<p>I solved the issue using jrassign library . the issue is due to the fact that keys are encoded differently in java and javascript. java follows ASN 1 standard while there appears to be no fixed standard in javascript</p>\n"}], "owner": {"reputation": 79, "user_id": 1502114, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7f3782ee31be835b919addac8d14ebb4?s=128&d=identicon&r=PG", "display_name": "Pranav kirtani", "link": "https://stackoverflow.com/users/1502114/pranav-kirtani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569306472, "creation_date": 1544602470, "question_id": 53738684, "link": "https://stackoverflow.com/questions/53738684/verifying-a-signature-signed-in-javascript-inside-a-kotlin-application", "title": "Verifying a signature signed in javascript inside a Kotlin application", "body": "<p>I have a code that signs a payload in Javascript and I want to verify the Signaure on the same inside another application written in Kotlin. I am using the 'secp256k' library .I can sign it on the js side but verification fails on Kotlin side</p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "is_accepted": true, "score": 2, "last_activity_date": 1544602247, "creation_date": 1544602247, "answer_id": 53738635, "question_id": 53738597, "link": "https://stackoverflow.com/questions/53738597/is-it-possible-to-return-outer-method-from-inner-method/53738635#53738635", "title": "Is it possible to return outer method from inner method?", "body": "<p>Not directly.</p>\n\n<p>You can return a value from the inner method indicating that the outer method should return, and check that in the outer method:</p>\n\n<pre><code>  void firstMethod(){\n      if (secondMethod()) return;\n      Log.d(\"log\",\"hello!\"); \n  }\n\n  boolean secondMethod(){\n      return true; // Than, I dont want to see log message \"hello!\".\n  }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10756464, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ednFl3WDLIY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hRiKXnS28IqoxsqJlSDuj4S4_mhg/mo/photo.jpg?sz=128", "display_name": "hanyluv", "link": "https://stackoverflow.com/users/10756464/hanyluv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 53738635, "answer_count": 1, "score": 0, "last_activity_date": 1544602247, "creation_date": 1544602079, "question_id": 53738597, "link": "https://stackoverflow.com/questions/53738597/is-it-possible-to-return-outer-method-from-inner-method", "title": "Is it possible to return outer method from inner method?", "body": "<p>Is it possible to return outer method from inner method?</p>\n\n<pre><code>class TempProjectClass {\n\n  void firstMethod(){\n      secondMethod();\n      Log.d(\"log\",\"hello!\"); \n  }\n\n  void secondMethod(){\n      return; // Than, I dont want to see log message \"hello!\".\n  }\n}\n</code></pre>\n\n<p>I want to make secondMethod able to finish firstMethod.\nIs there no way I make it?</p>\n"}, {"tags": ["kotlin", "kotlin-contracts"], "comments": [{"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 1, "creation_date": 1544613673, "post_id": 53738456, "comment_id": 94336299, "body": "are you asking if it&#39;s possible to change the type of the path to String based on runtime constraints?"}, {"owner": {"reputation": 12398, "user_id": 572635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1201ee68557b4ff23db59f300946c86?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/572635/dtech"}, "reply_to_user": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1544636255, "post_id": 53738456, "comment_id": 94349424, "body": "@ErikPragt yes, see my edit. I want to smartcast <code>url</code> to <code>URL</code> from <code>URL?</code> when <code>path</code> is proven not null, and <code>path</code> to <code>String</code> from <code>String?</code> if <code>url</code> is proven not null."}], "answers": [{"tags": [], "owner": {"reputation": 12398, "user_id": 572635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1201ee68557b4ff23db59f300946c86?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/572635/dtech"}, "is_accepted": true, "score": 1, "last_activity_date": 1544640659, "creation_date": 1544640659, "answer_id": 53749539, "question_id": 53738456, "link": "https://stackoverflow.com/questions/53738456/kotlin-contracts-link-not-null-of-two-properties/53749539#53749539", "title": "Kotlin contracts: link not-null of two properties", "body": "<p>This does not seem possible in Kotlin 1.3, because contracts can only be on top-level functions, so not on methods.</p>\n\n<p>For example</p>\n\n<pre><code>@ExperimentalContracts\ndata class NullableString(val s: String?) {\n\n    fun isNotNull(): Boolean {\n        contract {\n            returns(true) implies (this@path != null)\n        }\n        return path != null\n    }\n}\n</code></pre>\n\n<p>does not compile:</p>\n\n<pre><code>Error:(16, 8) Contracts are allowed only for top-level functions\nError:(17, 39) Unresolved reference: @path\nError:(19, 15) Unresolved reference: path\n</code></pre>\n"}], "owner": {"reputation": 12398, "user_id": 572635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a1201ee68557b4ff23db59f300946c86?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/572635/dtech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "accepted_answer_id": 53749539, "answer_count": 1, "score": 1, "last_activity_date": 1544640659, "creation_date": 1544601522, "last_edit_date": 1544638971, "question_id": 53738456, "link": "https://stackoverflow.com/questions/53738456/kotlin-contracts-link-not-null-of-two-properties", "title": "Kotlin contracts: link not-null of two properties", "body": "<p>Say I have a class like this:</p>\n\n<pre><code>data class URLAndPath(\n   val baseUrl: URL,\n   val path: String?\n) {\n    val url get(): URL? =\n        try { path?.let { URL(baseUrl, it) } }\n        catch(_: Exception) { null }\n\n    init { require(path == null || url != null) { \"Invalid URL $baseUrl$path\" } } \n}\n</code></pre>\n\n<p>This class ensures that if <code>path != null</code> if and only if <code>url != null</code></p>\n\n<p><a href=\"https://github.com/Kotlin/KEEP/blob/master/proposals/kotlin-contracts.md\" rel=\"nofollow noreferrer\">Kotlin contracts</a> seems the way to tell the compiler about these kinds of relations. Is the above invariant possible to model with Kotlin contracts?</p>\n\n<p>My end result is to let code like the following compile:</p>\n\n<pre><code>val x = URLAndPath(URL(\"http://example.org/\"), \"index.html\")\nif(x.path != null) {\n    // currently: Error: Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type URL?\n    println(x.url.toURI())\n}\n</code></pre>\n"}, {"tags": ["apache-spark", "kotlin"], "comments": [{"owner": {"reputation": 4114, "user_id": 1059915, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6c5bf533354c7cdcd85ad8cb090473b6?s=128&d=identicon&r=PG", "display_name": "alpert", "link": "https://stackoverflow.com/users/1059915/alpert"}, "edited": false, "score": 0, "creation_date": 1544603290, "post_id": 53738073, "comment_id": 94330247, "body": "What is the kotlin version? Btw you need to add <code>}</code> at the and to close function body."}, {"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1544610320, "post_id": 53738073, "comment_id": 94334346, "body": "What is the <code>-ib</code> flag?  My kotlinc doesn&#39;t seem to have it.  I&#39;d suggest trying <code>-cp</code> instead \u2014 and putting that (and its jar file) <i>before</i> the file you&#39;re compiling."}, {"owner": {"reputation": 31, "user_id": 10481979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qllffJTFOOQ/AAAAAAAAAAI/AAAAAAAAA-A/ZlNrHOzZoXA/photo.jpg?sz=128", "display_name": "chafidz0000000", "link": "https://stackoverflow.com/users/10481979/chafidz0000000"}, "edited": false, "score": 0, "creation_date": 1544611868, "post_id": 53738073, "comment_id": 94335307, "body": "It&#39;s kotlin-native-linux-1.3.11, <code>-ib</code> is <code>-include-binary</code>, there is no <code>-include-runtime</code> or <code>-classpath</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10481979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qllffJTFOOQ/AAAAAAAAAAI/AAAAAAAAA-A/ZlNrHOzZoXA/photo.jpg?sz=128", "display_name": "chafidz0000000", "link": "https://stackoverflow.com/users/10481979/chafidz0000000"}, "edited": false, "score": 0, "creation_date": 1544771267, "post_id": 53745604, "comment_id": 94401101, "body": "I&#39;ve changed from native to experimental the error is still the same even with <code>kotlinc SparkApp.kt -cp $SPARK_HOME&#47;jars -include-runtime -d SparkApp.jar</code>, any idea?"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1544628260, "last_edit_date": 1544628260, "creation_date": 1544626185, "answer_id": 53745604, "question_id": 53738073, "link": "https://stackoverflow.com/questions/53738073/kotlin-compile-from-cli-unresolved-reference/53745604#53745604", "title": "Kotlin compile from cli - unresolved reference", "body": "<p>You can't use JVM libraries as Kotlin/Native dependencies. Kotlin/Native can only use <code>*.klib</code> Kotlin libraries and inter-operate with native libraries by the means of the CInterop tool. </p>\n\n<p>The JVM libraries can only be used by Kotlin/JVM, and neither Kotlin/JS nor Kotlin/Native can use the JVM bytecode libraries as dependencies.</p>\n\n<p>If you want to compile the program for the JVM instead, then you are definitely using the wrong command line tool, as <code>kotlin-native-linux-...</code> is a Kotlin/Native compiler. Use either <code>kotlin-compiler-...</code> or <code>experimental-kotlin-compiler-linux-...</code> for Kotlin/JVM. And, of course, pass the JVM library as <code>-cp</code>, not <code>-ib</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 10481979, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qllffJTFOOQ/AAAAAAAAAAI/AAAAAAAAA-A/ZlNrHOzZoXA/photo.jpg?sz=128", "display_name": "chafidz0000000", "link": "https://stackoverflow.com/users/10481979/chafidz0000000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1544632402, "creation_date": 1544599945, "last_edit_date": 1544632402, "question_id": 53738073, "link": "https://stackoverflow.com/questions/53738073/kotlin-compile-from-cli-unresolved-reference", "title": "Kotlin compile from cli - unresolved reference", "body": "<p>I'm new to Kotlin. My goal is to run spark functions written in Kotlin for Streaming and Transforming. I have downloaded the Kotlin native compiler and have written this simple spark function with vim:</p>\n\n<pre><code>import org.apache.spark.SparkConf\nimport org.apache.spark.api.java.JavaSparkContext\n\nfun main(args: Array&lt;String&gt;) {\n\nval conf = SparkConf()\n        .setMaster(\"yarn\")\n        .setAppName(\"Kotlin Spark Test\")\n\nval sc = JavaSparkContext(conf)\n}\n</code></pre>\n\n<p>I then save it as SparkApp.kt and run the compiler with the following command:</p>\n\n<pre><code>kotlinc SparkApp.kt -ib $SPARK_HOME/jars/spark-core_2.11-2.3.1.jar -o SparkApp.jar\n</code></pre>\n\n<p>which spectacularly fails with errors:</p>\n\n<blockquote>\n  <p>error: unresolved reference: org\n  and so on</p>\n</blockquote>\n\n<p>Did I miss something?</p>\n"}, {"tags": ["java", "kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "is_accepted": true, "score": 3, "last_activity_date": 1544595299, "creation_date": 1544595299, "answer_id": 53737098, "question_id": 53736980, "link": "https://stackoverflow.com/questions/53736980/can-i-use-a-library-built-with-kotlin-coroutines-in-plain-java-project/53737098#53737098", "title": "Can I use a library built with Kotlin coroutines in plain java project?", "body": "<p>Yes. You can. You may want to have interface adopted to java guidelines, but there is no technical restriction that prevent it.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 5831946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72cb1cd9b58d2a86d551dfe54ed80f64?s=128&d=identicon&r=PG&f=1", "display_name": "Madhu Sudhan Reddy", "link": "https://stackoverflow.com/users/5831946/madhu-sudhan-reddy"}, "edited": false, "score": 0, "creation_date": 1544607139, "post_id": 53738377, "comment_id": 94332424, "body": "Yes, the plan is to expose only normal public methods which internally launch a coroutine and call the other suspending functions."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1544608631, "last_edit_date": 1544608631, "creation_date": 1544601227, "answer_id": 53738377, "question_id": 53736980, "link": "https://stackoverflow.com/questions/53736980/can-i-use-a-library-built-with-kotlin-coroutines-in-plain-java-project/53738377#53738377", "title": "Can I use a library built with Kotlin coroutines in plain java project?", "body": "<p>Your library can internally use coroutines, but you can't expose any <code>suspend fun</code>s to the Java client. It is almost impossible to call a <code>suspend fun</code> from Java because its signature refers to internal classes.</p>\n\n<p>The recommended way to expose non-blocking Kotlin code to Java is via the <code>CompletableFuture</code>, using the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/integration/kotlinx-coroutines-jdk8\" rel=\"nofollow noreferrer\"><code>kotlinx-coroutines-jdk8</code></a> module.</p>\n"}], "owner": {"reputation": 57, "user_id": 5831946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72cb1cd9b58d2a86d551dfe54ed80f64?s=128&d=identicon&r=PG&f=1", "display_name": "Madhu Sudhan Reddy", "link": "https://stackoverflow.com/users/5831946/madhu-sudhan-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 53737098, "answer_count": 2, "score": 1, "last_activity_date": 1544608631, "creation_date": 1544594691, "question_id": 53736980, "link": "https://stackoverflow.com/questions/53736980/can-i-use-a-library-built-with-kotlin-coroutines-in-plain-java-project", "title": "Can I use a library built with Kotlin coroutines in plain java project?", "body": "<p>I am planning to build a library which uses Kotlin coroutines to make the HTTP calls to REST services using retrofit2.\nThe final output jar will include all the retrofit and Kotlin coroutines dependencies, can we use this final jar in plain java projects?</p>\n"}, {"tags": ["kotlin", "coroutine", "kotlinx.coroutines", "backpressure"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544601465, "post_id": 53736571, "comment_id": 94329381, "body": "Unless you use a custom blocking queue for the thread pool, ypu won&#39;t have any backpressure, either. It takes detailed work at every step."}, {"owner": {"reputation": 1372, "user_id": 3929917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0b49fc1a1f89e276d98919474fb8d431?s=128&d=identicon&r=PG&f=1", "display_name": "silent-box", "link": "https://stackoverflow.com/users/3929917/silent-box"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544657410, "post_id": 53736571, "comment_id": 94358754, "body": "@MarkoTopolnik ThreadPoolExecutor has an embedded queue, and you can use CallerRunsPolicy to gracefully reject over-capacity tasks. This basically gives you backpressure out of the box"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1544683232, "post_id": 53736571, "comment_id": 94364832, "body": "You have to specifically supply a bounded queue to it. The default, if constructed via <code>Executors</code>, is an unbounded queue. Also, &quot;caller runs&quot; policy is a blocking one; since you&#39;re into coroutines I thought you were after non-blocking behavior."}], "answers": [{"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": true, "score": 3, "last_activity_date": 1551429360, "creation_date": 1551429360, "answer_id": 54940779, "question_id": 53736571, "link": "https://stackoverflow.com/questions/53736571/kotlin-coroutines-concurrent-execution-throttling/54940779#54940779", "title": "Kotlin coroutines: concurrent execution throttling", "body": "<p>One way to solve the issue, is to create a <code>Channel</code> and <code>send</code> your data onto it. Other threads can put a <code>consumeEach</code> on the channel to receive data from it. The channel's capacity can be tweaked to your threading needs.</p>\n\n<p>Fan-out and Fan-in examples in the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/docs/channels.md#fan-out\" rel=\"nofollow noreferrer\">coroutines docs</a> can be helpful too.</p>\n"}], "owner": {"reputation": 1372, "user_id": 3929917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0b49fc1a1f89e276d98919474fb8d431?s=128&d=identicon&r=PG&f=1", "display_name": "silent-box", "link": "https://stackoverflow.com/users/3929917/silent-box"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "accepted_answer_id": 54940779, "answer_count": 1, "score": 3, "last_activity_date": 1551429360, "creation_date": 1544592347, "question_id": 53736571, "link": "https://stackoverflow.com/questions/53736571/kotlin-coroutines-concurrent-execution-throttling", "title": "Kotlin coroutines: concurrent execution throttling", "body": "<p>Imagine we are reading messages from a message queue and on receive pushing them for processing into a threadpool. There are limited number of threads, so if all the threads are busy, we'll have natural backpressure.</p>\n\n<p>How this can be solved in Kotlin coroutine world? If we'll create a coroutine for each incoming message, we can very fast end up with Out of memory errors (e.g if each task requires to load some data from DB) and other issues.</p>\n\n<p>Are there any mechanisms or patterns to solve this problem?</p>\n"}, {"tags": ["function", "lambda", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "edited": false, "score": 0, "creation_date": 1544595374, "post_id": 53736648, "comment_id": 94327040, "body": "Thanks for the answer, sorry if this is a silly question but, why is this considered a &quot;dirty&quot; solution?"}, {"owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "reply_to_user": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "edited": false, "score": 1, "creation_date": 1544595861, "post_id": 53736648, "comment_id": 94327178, "body": "@oznecro Because I think there may be a &quot;pure&quot; solution that just take the input <code>albums</code> once, and pass them through the whole function, but my solution takes it twice. (However, this maybe a misunderstanding of &quot;pure&quot; in &quot;pure functional programming&quot; by myself.) Besides, using <code>.apply {}</code> can avoid this, but I consider if that it is not so clear."}], "tags": [], "owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1544594054, "last_edit_date": 1544594054, "creation_date": 1544592948, "answer_id": 53736648, "question_id": 53736412, "link": "https://stackoverflow.com/questions/53736412/kotlin-transform-a-list-of-objects-into-a-map-of-object-properties/53736648#53736648", "title": "Kotlin: transform a list of objects into a map of object properties", "body": "<p>A dirty solution:</p>\n\n<pre><code>val map = albums.map {\n    it.photos.map { it.id } // get all photos in all album\n}.flatten() // into a single list (instead of 2-d list)\n    .toSet() // remove duplicates\n    .associate { photo -&gt;\n        photo to albums.filter { it.photos.contains(Photo(photo)) } // for each photo, find its existance in all albums\n            .map { it.id }.toSet() // output album ids\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "edited": false, "score": 1, "creation_date": 1544596198, "post_id": 53737229, "comment_id": 94327303, "body": "Wow, a better solution (clap)! Consider the relation (of photo and album) instead of the object (photo)!"}, {"owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "edited": false, "score": 0, "creation_date": 1544658141, "post_id": 53737229, "comment_id": 94358948, "body": "Thank you for this solution!"}], "tags": [], "owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "is_accepted": true, "score": 4, "last_activity_date": 1544596439, "last_edit_date": 1544596439, "creation_date": 1544595935, "answer_id": 53737229, "question_id": 53736412, "link": "https://stackoverflow.com/questions/53736412/kotlin-transform-a-list-of-objects-into-a-map-of-object-properties/53737229#53737229", "title": "Kotlin: transform a list of objects into a map of object properties", "body": "<p>Cleaner solution</p>\n\n<pre><code>val grouped = albums\n    .flatMap { album -&gt; album.photos.map { photo -&gt; Pair(photo.id, album.id) } }\n    .groupBy( { (photoId, _) -&gt; photoId }, { (_, albumId) -&gt; albumId } )\n    .mapValues { it.value.toSet() }\n</code></pre>\n\n<p>And check the correctness</p>\n\n<pre><code>val map = mapOf(\n    Pair(\"1\", setOf(\"1\", \"2\")),\n    Pair(\"2\", setOf(\"1\", \"2\")),\n    Pair(\"3\", setOf(\"1\"))\n)\n\ncheck(map == grouped) // Success\n</code></pre>\n\n<h3>A bit of explanation</h3>\n\n<ul>\n<li><p>With the first <code>flatMap</code> we transform the <em>albums</em> list (<code>List&lt;Album&gt;</code>) in a <code>List&lt;Pair&lt;String, String&gt;&gt;</code> (<code>photo.id</code> to <code>album.id</code>).</p></li>\n<li><p>With the <code>groupBy</code> we transform the second list into <code>Map&lt;String, List&lt;String&gt;&gt;</code> where the key is <code>photo.id</code> and grouped by <code>album..id</code></p></li>\n<li><p>With <code>mapValues</code> we transform the map into <code>Map&lt;String, Set&lt;String&gt;&gt;</code></p></li>\n</ul>\n"}], "owner": {"reputation": 337, "user_id": 5179960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/b2a6f79107c343c309aadcbda9597f56?s=128&d=identicon&r=PG&f=1", "display_name": "oznecro", "link": "https://stackoverflow.com/users/5179960/oznecro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2669, "favorite_count": 0, "accepted_answer_id": 53737229, "answer_count": 2, "score": 3, "last_activity_date": 1544596439, "creation_date": 1544591251, "question_id": 53736412, "link": "https://stackoverflow.com/questions/53736412/kotlin-transform-a-list-of-objects-into-a-map-of-object-properties", "title": "Kotlin: transform a list of objects into a map of object properties", "body": "<p>With the data classes below: </p>\n\n<pre><code>data class Photo(val id: String)\ndata class Album(val id: String, val photos: List&lt;Photo&gt;)\n</code></pre>\n\n<p>I want to be able to turn a list of <code>Albums</code> into a Map of <code>Map&lt;photoId, Set&lt;albumId&gt;&gt;</code></p>\n\n<p>for example: </p>\n\n<pre><code>val albums = listOf(\n    Album(\"1\", listOf(\n        Photo(\"1\"),\n        Photo(\"2\"),\n        Photo(\"3\")\n    )),\n    Album(\"2\", listOf(\n        Photo(\"1\"),\n        Photo(\"2\")\n    ))\n)\n</code></pre>\n\n<p>will transform into:</p>\n\n<pre><code>val map = mapOf(\n    Pair(\"1\", setOf(\"1\", \"2\")),\n    Pair(\"2\", setOf(\"1\", \"2\")),\n    Pair(\"3\", setOf(\"1\")\n)\n</code></pre>\n\n<p>is there a way to do this using the kotlin transformations functions/lambdas? eg, groupBy, flatMap? </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1544591522, "post_id": 53736380, "comment_id": 94325812, "body": "@BoristheSpider sorry for asking a stupid question but literally would want to learn. I got no one to ask, can you elaborate on that please? :("}, {"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 1, "creation_date": 1544591873, "post_id": 53736380, "comment_id": 94325915, "body": "The real question is why do you need a singleton? It&#39;s a commonly recognised anti-pattern that makes code inextensible and untestable."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1544592253, "post_id": 53736380, "comment_id": 94326023, "body": "@BoristheSpider Stateless singletons are still sensible. In this case they&#39;re usually best written as enums in Java, though."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1544592276, "post_id": 53736380, "comment_id": 94326028, "body": "This is more of a curiosity question. I am trying to learn proper android programming by looking at an app called &quot;Plaid&quot; (<a href=\"https://github.com/nickbutcher/plaid/blob/master/core/src/main/java/io/plaidapp/core/designernews/data/comments/CommentsRepository.kt\" rel=\"nofollow noreferrer\">github.com/nickbutcher/plaid/blob/master/core/src/main/java&zwnj;&#8203;/io/&hellip;</a>) In here they create all the &quot;Repository&quot; and &quot;DataSource&quot; classes as a Singleton. Now that I think about it again, my question should have been why those classes are made to have single instance."}, {"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 2, "creation_date": 1544592515, "post_id": 53736380, "comment_id": 94326090, "body": "@chrylis not convinced. It&#39;s impossible to mock a singleton out for testing as you&#39;ve baked the DI strategy into the code. Even with a stateless singleton, it will have logic; and you&#39;ve just made the dependant class untestable. If the singleton contains only constants then that may be workable; but as soon as you need different values between prod/dev/test you&#39;ve again shot yourself in the foot."}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1544592570, "post_id": 53736380, "comment_id": 94326100, "body": "@BoristheSpider Enums can implement interfaces."}, {"owner": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1544592608, "post_id": 53736380, "comment_id": 94326111, "body": "@chrylis I&#39;m well aware. What&#39;s your point? All of what I said above holds - using an <code>enum</code> is an implementation detail."}, {"owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "edited": false, "score": 0, "creation_date": 1544592688, "post_id": 53736380, "comment_id": 94326135, "body": "I think what you guys are talking about is too advance for me, do you have any article I could read to understand all you guys are talking about? :("}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "reply_to_user": {"reputation": 54008, "user_id": 2071828, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/R8AYO.jpg?s=128&g=1", "display_name": "Boris the Spider", "link": "https://stackoverflow.com/users/2071828/boris-the-spider"}, "edited": false, "score": 0, "creation_date": 1550171286, "post_id": 53736380, "comment_id": 96181981, "body": "@BoristheSpider MockK can mock Kotlin objects, i.e. singletons, so no problem there."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 1, "creation_date": 1550171391, "post_id": 53736380, "comment_id": 96182038, "body": "@ArchieG.Qui&#241;ones I see one clear difference between the two code snippets, one being that the first <code>SomeClass</code> constructor requires a parameter (<code>someValue</code>) and that the second doesn&#39;t depend on parameters. Because that constructor doesn&#39;t exist in the first snippet, this code won&#39;t compile."}, {"owner": {"reputation": 3254, "user_id": 3169029, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0af57d5b6e070c3e08a536505210f610?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/3169029/erik"}, "edited": false, "score": 1, "creation_date": 1550171598, "post_id": 53736380, "comment_id": 96182121, "body": "I also think that the example you link to, the Plaid app with its singleton implementations through <code>@Volatile private var INSTANCE: X? = null</code> is a bad idea given that Kotlin has the very simple, understandable and idiomatic <code>object X</code>."}], "owner": {"reputation": 5737, "user_id": 9291997, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GyQRY.jpg?s=128&g=1", "display_name": "Archie G. Qui&#241;ones", "link": "https://stackoverflow.com/users/9291997/archie-g-qui%c3%b1ones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544620916, "creation_date": 1544591033, "last_edit_date": 1544594202, "question_id": 53736380, "link": "https://stackoverflow.com/questions/53736380/kotlin-singleton-vs-java-singleton", "title": "Kotlin Singleton vs Java Singleton", "body": "<p>My Question is what is the difference between these two:</p>\n\n<pre><code>@Volatile private var INSTANCE: SomeClass? = null\n\nfun getInstance(someValue: SomeType): SomeClass{\n    return INSTANCE ?: synchronized(this) {\n        INSTANCE ?: SomeClass(someValue).also { INSTANCE = it }\n    }\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>object SomeClass {\n    ....\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1704, "user_id": 5909412, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CczFB.png?s=128&g=1", "display_name": "P.Juni", "link": "https://stackoverflow.com/users/5909412/p-juni"}, "edited": false, "score": 0, "creation_date": 1544593996, "post_id": 53736361, "comment_id": 94326536, "body": "Initialize the timer somewhere, maybe in onCreate, it\u2019s lateinit so you use it in fabs clicks, for ex. timer.cancel() but it\u2019s only decalred, not initialized like timer = new CountDownTimer(); even if it is later initialized on start click there is some use where it\u2019s null"}], "answers": [{"tags": [], "owner": {"reputation": 2850, "user_id": 5676318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCZ7Y.png?s=128&g=1", "display_name": "GianhTran", "link": "https://stackoverflow.com/users/5676318/gianhtran"}, "is_accepted": false, "score": 2, "last_activity_date": 1544598644, "creation_date": 1544598644, "answer_id": 53737772, "question_id": 53736361, "link": "https://stackoverflow.com/questions/53736361/kotlin-countdowntimer-lateinit-property-has-not-been-initialized-and-corecompone/53737772#53737772", "title": "Kotlin CountDownTimer lateinit property has not been initialized and CoreComponentFactory not found", "body": "<p>Why you must define timer as <code>lateinit</code> field, change this LOC to</p>\n\n<pre><code>private var timer: CountDownTimer? = null\n</code></pre>\n\n<p>So now you can handle timer clearly.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 9572652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc292b935d17eac99d32e8faf404a0a?s=128&d=identicon&r=PG&f=1", "display_name": "bobocanobo", "link": "https://stackoverflow.com/users/9572652/bobocanobo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544621597, "creation_date": 1544621597, "answer_id": 53744229, "question_id": 53736361, "link": "https://stackoverflow.com/questions/53736361/kotlin-countdowntimer-lateinit-property-has-not-been-initialized-and-corecompone/53744229#53744229", "title": "Kotlin CountDownTimer lateinit property has not been initialized and CoreComponentFactory not found", "body": "<p>I ended up figuring out that it was because I am telling it to cancel, even if it isn't running. To solve it I just added an if statement in case it it wasn't running:</p>\n\n<pre><code>    but_pomodoro.setOnClickListener{v -&gt;\n        if (timerState == TimerState.Running) {\n            timer.cancel()\n        }\n        PrefUtil.setTimerLength(25)\n        onTimerFinished()\n    }\n</code></pre>\n\n<p>Thank you for the help, it pointed me in the right direction!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12137826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4SsCOozTQD0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfT5aY6aYGNHO4kwNsIULrQ_TvzLw/photo.jpg?sz=128", "display_name": "ankit mishra", "link": "https://stackoverflow.com/users/12137826/ankit-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1591360900, "creation_date": 1591360900, "answer_id": 62215612, "question_id": 53736361, "link": "https://stackoverflow.com/questions/53736361/kotlin-countdowntimer-lateinit-property-has-not-been-initialized-and-corecompone/62215612#62215612", "title": "Kotlin CountDownTimer lateinit property has not been initialized and CoreComponentFactory not found", "body": "<p>In my case, I made the timer property nullable and initialized it in the init block of the view model.</p>\n\n<pre><code>private var timer:CountDownTimer?\n\ninit{\ntimer=NULL\n}\n</code></pre>\n\n<p>`</p>\n"}], "owner": {"reputation": 21, "user_id": 9572652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc292b935d17eac99d32e8faf404a0a?s=128&d=identicon&r=PG&f=1", "display_name": "bobocanobo", "link": "https://stackoverflow.com/users/9572652/bobocanobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1736, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1591360900, "creation_date": 1544590916, "last_edit_date": 1544602506, "question_id": 53736361, "link": "https://stackoverflow.com/questions/53736361/kotlin-countdowntimer-lateinit-property-has-not-been-initialized-and-corecompone", "title": "Kotlin CountDownTimer lateinit property has not been initialized and CoreComponentFactory not found", "body": "<p>I am trying to create a pomodoro timer app.  It was working previously, but after changing some things, it breaking and then trying to recreate the working code. I can't figure out what is wrong.  </p>\n\n<p>In <code>Logcat</code> I am getting both </p>\n\n<blockquote>\n  <p>Didn't find \"android.support.v4.app.CoreComponentFactory</p>\n</blockquote>\n\n<p>a while after failing and closing, and </p>\n\n<blockquote>\n  <p>'kotlin.UninitializedPropertyAccessException: lateinit property timer\n  has not been initialized'</p>\n</blockquote>\n\n<p>directly after failing.  I've tried changing the <code>gradle</code> file as suggested in other late-init code problems but that doesn't seem to be what it is.</p>\n\n<pre><code>package com.bignerdranch.android.carrottimer\n\nimport android.os.Bundle\nimport android.os.CountDownTimer\nimport android.support.design.widget.Snackbar\nimport android.support.v7.app.AppCompatActivity\nimport android.text.Editable\nimport android.text.TextWatcher\nimport android.view.Menu\nimport android.view.MenuItem\nimport android.widget.EditText\nimport android.widget.Switch\nimport android.widget.TextView\nimport android.widget.Toast\nimport com.bignerdranch.android.carrottimer.util.PrefUtil\n\nimport kotlinx.android.synthetic.main.activity_timer.*\nimport kotlinx.android.synthetic.main.content_timer.*\nimport java.util.*\n\nclass TimerActivity : AppCompatActivity() {\n\nenum class TimerState{\n    Stopped, Paused, Running\n}\n\nprivate lateinit var timer: CountDownTimer\nprivate var timerLengthSeconds: Long = 0\nprivate var timerState = TimerState.Stopped\n\nvar secondsRemaining: Long = 0\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_timer)\n    supportActionBar?.setIcon(R.drawable.ic_timer)\n    supportActionBar?.title = \"    Carrot Timer\"\n\n    val sw = findViewById&lt;Switch&gt;(R.id.switch1)\n    sw?.setOnCheckedChangeListener { _, isChecked -&gt;\n        val msg = if (isChecked) \"ON\" else \"OFF\"\n        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show()\n        sw.text = msg\n    }\n\n    but_pomodoro.setOnClickListener{v -&gt;\n        timer.cancel()\n        PrefUtil.setTimerLength(25)\n        onTimerFinished()\n    }\n\n    but_short.setOnClickListener{v -&gt;\n        timer.cancel()\n        PrefUtil.setTimerLength(5)\n        onTimerFinished()\n    }\n\n    but_long.setOnClickListener{v -&gt;\n        timer.cancel()\n        PrefUtil.setTimerLength(10)\n        onTimerFinished()\n    }\n\n    fab_start.setOnClickListener{v -&gt;\n        startTimer()\n        timerState =  TimerState.Running\n        updateButtons()\n    }\n\n    fab_pause.setOnClickListener { v -&gt;\n        timer.cancel()\n        timerState = TimerState.Paused\n        updateButtons()\n    }\n\n    fab_stop.setOnClickListener { v -&gt;\n        timer.cancel()\n        onTimerFinished()\n    }\n}\n\noverride fun onResume() {\n    super.onResume()\n\n    initTimer()\n}\n\noverride fun onPause() {\n    super.onPause()\n\n    if (timerState == TimerState.Running){\n        timer.cancel()\n    }\n\n    PrefUtil.setPreviousTimerLengthSeconds(timerLengthSeconds, this)\n    PrefUtil.setSecondsRemaining(secondsRemaining, this)\n    PrefUtil.setTimerState(timerState, this)\n}\n\nprivate fun initTimer(){\n    timerState = PrefUtil.getTimerState(this)\n\n    if (timerState == TimerState.Stopped)\n        setNewTimerLength()\n    else\n        setPreviousTimerLength()\n\n    secondsRemaining = if (timerState == TimerState.Running || timerState == TimerState.Paused)\n        PrefUtil.getSecondsRemaining(this)\n    else\n        timerLengthSeconds\n\n    if (timerState == TimerState.Running)\n        startTimer()\n\n    updateButtons()\n    updateCountdownUI()\n}\n\nprivate fun onTimerFinished(){\n    timerState = TimerState.Stopped\n\n    setNewTimerLength()\n\n    PrefUtil.setSecondsRemaining(timerLengthSeconds, this)\n    secondsRemaining = timerLengthSeconds\n\n    updateButtons()\n    updateCountdownUI()\n}\n\nprivate fun startTimer(){\n    timerState = TimerState.Running\n\n    timer = object : CountDownTimer(secondsRemaining * 1000, 1000) {\n        override fun onFinish() = onTimerFinished()\n\n        override fun onTick(millisUntilFinished: Long) {\n            secondsRemaining = millisUntilFinished / 1000\n            updateCountdownUI()\n        }\n    }.start()\n}\n\nprivate fun setNewTimerLength(){\n    val lengthInMinutes = PrefUtil.getTimerLength(this)\n    timerLengthSeconds = (lengthInMinutes * 60L)\n}\n\nprivate fun setPreviousTimerLength(){\n    timerLengthSeconds = PrefUtil.getPreviousTimerLengthSeconds(this)\n}\n\nprivate fun updateCountdownUI(){\n    val minutesUntilFinished = secondsRemaining / 60\n    val secondsInMinuteUntilFinished = secondsRemaining - minutesUntilFinished * 60\n    val secondsStr = secondsInMinuteUntilFinished.toString()\n    textView_countdown.text = \"$minutesUntilFinished:${if (secondsStr.length == 2) secondsStr else \"0\" + secondsStr}\"\n}\n\nprivate fun updateButtons(){\n    when (timerState) {\n        TimerState.Running -&gt;{\n            fab_start.isEnabled = false\n            fab_pause.isEnabled = true\n            fab_stop.isEnabled = true\n        }\n        TimerState.Stopped -&gt; {\n            fab_start.isEnabled = true\n            fab_pause.isEnabled = false\n            fab_stop.isEnabled = false\n        }\n        TimerState.Paused -&gt; {\n            fab_start.isEnabled = true\n            fab_pause.isEnabled = false\n            fab_stop.isEnabled = true\n        }\n    }\n}\n\n\noverride fun onCreateOptionsMenu(menu: Menu): Boolean {\n    menuInflater.inflate(R.menu.menu_timer, menu)\n    return true\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    return super.onOptionsItemSelected(item)\n}\n}\n</code></pre>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["android", "kotlin", "okhttp", "kotlinx.coroutines", "socketchannel"], "comments": [{"owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 1, "creation_date": 1544592666, "post_id": 53736127, "comment_id": 94326127, "body": "Work in progress might give you some ideas: <a href=\"https://github.com/square/okio/compare/jwilson.1101.coroutines\" rel=\"nofollow noreferrer\">github.com/square/okio/compare/jwilson.1101.coroutines</a>"}, {"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "reply_to_user": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 0, "creation_date": 1551972328, "post_id": 53736127, "comment_id": 96844849, "body": "@JesseWilson Is it production ready now?"}, {"owner": {"reputation": 33145, "user_id": 40013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/92c80ad799d0788de9ec7a4e3a26f98d?s=128&d=identicon&r=PG", "display_name": "Jesse Wilson", "link": "https://stackoverflow.com/users/40013/jesse-wilson"}, "edited": false, "score": 0, "creation_date": 1552090954, "post_id": 53736127, "comment_id": 96893157, "body": "Nope, not production ready."}], "answers": [{"comments": [{"owner": {"reputation": 22959, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 2, "creation_date": 1551972675, "post_id": 53748391, "comment_id": 96845071, "body": "What is the solution?"}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1544636195, "last_edit_date": 1544636195, "creation_date": 1544635855, "answer_id": 53748391, "question_id": 53736127, "link": "https://stackoverflow.com/questions/53736127/how-to-implement-nio-socket-client-using-kotlin-coroutines-in-java-code/53748391#53748391", "title": "How to implement NIO Socket (client) using Kotlin coroutines in Java Code?", "body": "<pre><code>// I what to suspend(NOT block) current Java Thread, until connect is success\njob.await()\n</code></pre>\n\n<p>This is not a realistic expectation. From the perspective of Java, a <code>suspend fun</code> suspends its execution by returning a special constant, <code>COROUTINE_SUSPENDED</code>. You need the Kotlin compiler to hide that from you and allow you to write regular-looking code that's suspendable.</p>\n\n<p>Your code falls short of non-blocking suspension even from the Kotlin perspective because it uses a blocking call to connect. Submitting that call to another thread doesn't make it non-blocking.</p>\n\n<p>What your code does is completely equivalent to submitting a job to a Java executor service and then awaiting on its result. You can for example use <code>CompletableFuture.supplyAsync</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1581838833, "post_id": 54034684, "comment_id": 106565321, "body": "For any case <a href=\"https://github.com/Kotlin/kotlinx.coroutines/issues/601\" rel=\"nofollow noreferrer\">here is a link to issue</a> in Kotlin repo which contains link to Nio.kt file where this approach was implemented for other async methods."}], "tags": [], "owner": {"reputation": 451, "user_id": 936119, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/47a3cd741fbe2a7eb98ea833bfdfb1e7?s=128&d=identicon&r=PG", "display_name": "PatTheGamer", "link": "https://stackoverflow.com/users/936119/patthegamer"}, "is_accepted": false, "score": 7, "last_activity_date": 1546586839, "creation_date": 1546586839, "answer_id": 54034684, "question_id": 53736127, "link": "https://stackoverflow.com/questions/53736127/how-to-implement-nio-socket-client-using-kotlin-coroutines-in-java-code/54034684#54034684", "title": "How to implement NIO Socket (client) using Kotlin coroutines in Java Code?", "body": "<p>As Marko pointed out your code will still end up blocking a thread even when that blocking operation is in the async coroutine.  To truly get the asynchronous behavior you desire with Java and Kotlin you need to use the Async version of <a href=\"https://developer.android.com/reference/java/nio/channels/AsynchronousSocketChannel\" rel=\"noreferrer\">Socket Channel</a></p>\n\n<p>With this, you get true asynchronous socket handling.  With that class and Kotlin's <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/suspend-coroutine.html\" rel=\"noreferrer\">suspendCoroutine</a> builder method, you can turn the async handlers into suspendable calls.</p>\n\n<p>Here is an example of implementing it for read:</p>\n\n<pre><code>class TcpSocket(private val socket: AsynchronousSocketChannel) {\n    suspend fun read(buffer: ByteBuffer): Int {\n        return socket.asyncRead(buffer)\n    }\n\n    fun close() {\n        socket.close()\n    }\n\n    private suspend fun AsynchronousSocketChannel.asyncRead(buffer: ByteBuffer): Int {\n        return suspendCoroutine { continuation -&gt;\n           this.read(buffer, continuation, ReadCompletionHandler)\n        }\n    }\n\n    object ReadCompletionHandler : CompletionHandler&lt;Int, Continuation&lt;Int&gt;&gt; {\n        override fun completed(result: Int, attachment: Continuation&lt;Int&gt;) {\n            attachment.resume(result)\n        }\n\n        override fun failed(exc: Throwable, attachment: Continuation&lt;Int&gt;) {\n            attachment.resumeWithException(exc)\n        }\n    }\n}\n</code></pre>\n\n<p>You could choose to remove the wrapping that I'm doing here and just expose an <code>asyncRead</code> method on AsynchronousSocketChannel like so:</p>\n\n<pre><code>suspend fun AsynchronousSocketChannel.asyncRead(buffer: ByteBuffer): Int {\n    return suspendCoroutine { continuation -&gt;\n       this.read(buffer, continuation, ReadCompletionHandler)\n    }\n}\n\nobject ReadCompletionHandler : CompletionHandler&lt;Int, Continuation&lt;Int&gt;&gt; {\n    override fun completed(result: Int, attachment: Continuation&lt;Int&gt;) {\n        attachment.resume(result)\n    }\n\n    override fun failed(exc: Throwable, attachment: Continuation&lt;Int&gt;) {\n        attachment.resumeWithException(exc)\n    }\n}\n</code></pre>\n\n<p>It's all a matter of taste and what exactly your design goals are.  You should be able to implement a similar method for the initial connect as I did here for read.</p>\n"}], "owner": {"reputation": 81, "user_id": 6798800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd1c2a573439baafceaf3c248df9f0eb?s=128&d=identicon&r=PG&f=1", "display_name": "haha", "link": "https://stackoverflow.com/users/6798800/haha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6128, "favorite_count": 3, "answer_count": 2, "score": 8, "last_activity_date": 1546586839, "creation_date": 1544589176, "last_edit_date": 1544598628, "question_id": 53736127, "link": "https://stackoverflow.com/questions/53736127/how-to-implement-nio-socket-client-using-kotlin-coroutines-in-java-code", "title": "How to implement NIO Socket (client) using Kotlin coroutines in Java Code?", "body": "<p>I want to use Kotlin(v1.3.0) <strong>coroutines</strong> &amp; java.nio.channels.<strong>SocketChannel</strong> (NIO) to replace Socket <code>connect</code> (blocking IO) in Android. because this can save many number of threads.</p>\n\n<p>The code below can't run because of <code>job.await()</code> is suspending function in Kotlin, It just can be called in Ktolin coroutines block. like <code>launch{..}</code>, <code>async{..}</code>.</p>\n\n<pre><code>// this function will be called by Java Code\nfun connect(address: InetSocketAddress, connectTimeout: Int): SocketChannel {\n\n    // Start a new connection\n    // Create a non-blocking socket channel\n    val socketChannel = SocketChannel.open()\n    socketChannel.configureBlocking(false)\n\n    // async calls NIO connect function\n    val job = GlobalScope.async(oneThreadCtx) {\n        aConnect(socketChannel, address)\n    }\n\n    // I what to suspend(NOT block) current Java Thread, until connect is success\n    job.await()\n\n    return socketChannel\n}\n</code></pre>\n\n<p>But, I tried to use <code>runBlocking{..}</code> make this function as normal function in Java. but <code>job.await</code> blocked current Java Thread, <strong>Not suspend</strong>. </p>\n\n<p>so, how should I implement this function with Kotlin(v1.3.0) coroutines?</p>\n"}, {"tags": ["java", "string", "kotlin"], "comments": [{"owner": {"reputation": 33492, "user_id": 7212686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ey8ll.png?s=128&g=1", "display_name": "azro", "link": "https://stackoverflow.com/users/7212686/azro"}, "edited": false, "score": 0, "creation_date": 1544587400, "post_id": 53735814, "comment_id": 94324872, "body": "Can you share the code ?"}, {"owner": {"reputation": 81, "user_id": 9238103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6980987f67d26d96f833eb229fe0dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "XC.xc", "link": "https://stackoverflow.com/users/9238103/xc-xc"}, "reply_to_user": {"reputation": 33492, "user_id": 7212686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ey8ll.png?s=128&g=1", "display_name": "azro", "link": "https://stackoverflow.com/users/7212686/azro"}, "edited": false, "score": 0, "creation_date": 1544594005, "post_id": 53735814, "comment_id": 94326538, "body": "@azro  Yes, I have added my code in the question."}, {"owner": {"reputation": 28506, "user_id": 9223839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29dcd6d8b4c4a0720ee253013c91d3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Joakim Danielson", "link": "https://stackoverflow.com/users/9223839/joakim-danielson"}, "edited": false, "score": 0, "creation_date": 1544594417, "post_id": 53735814, "comment_id": 94326688, "body": "Add the ? yourself."}, {"owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "edited": false, "score": 0, "creation_date": 1544621218, "post_id": 53735814, "comment_id": 94340552, "body": "I&#39;ve added a bit of info below, but if you expect the converter to be smart enough to figure out if types should be nullable or not, well, sometimes you might be lucky."}], "answers": [{"tags": [], "owner": {"reputation": 11714, "user_id": 323221, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/036bc6990a7ba39ac82cbfa266b7d326?s=128&d=identicon&r=PG", "display_name": "Erik Pragt", "link": "https://stackoverflow.com/users/323221/erik-pragt"}, "is_accepted": false, "score": 0, "last_activity_date": 1544621113, "creation_date": 1544621113, "answer_id": 53744059, "question_id": 53735814, "link": "https://stackoverflow.com/questions/53735814/how-can-i-convert-java-lang-string-to-kotlin-string-when-click-convert-java-fi/53744059#53744059", "title": "how can I convert java.lang.String to kotlin.String? when click &quot;convert java file to kotlin file&quot;", "body": "<p>There's a difference between <code>String</code> in Java and <code>String</code> in Kotlin. The difference might not be so obvious, but:</p>\n\n<ul>\n<li><code>String</code> in Java means: all Strings, including <code>null</code>. </li>\n<li><code>String</code> in Kotlin means: all Strings, <em>excluding</em> <code>null</code></li>\n</ul>\n\n<p>You're trying to assign a null value to a Kotlin String, which you have defined as non-nullable (because you only defined it as <code>String</code>). If you want it to also accept null values, you need to change the type from <code>String</code> to <code>String?</code>, so, including a question mark. This tells Kotlin that the String can also be null.</p>\n"}], "owner": {"reputation": 81, "user_id": 9238103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6980987f67d26d96f833eb229fe0dd9e?s=128&d=identicon&r=PG&f=1", "display_name": "XC.xc", "link": "https://stackoverflow.com/users/9238103/xc-xc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1502, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544766922, "creation_date": 1544586789, "last_edit_date": 1544766922, "question_id": 53735814, "link": "https://stackoverflow.com/questions/53735814/how-can-i-convert-java-lang-string-to-kotlin-string-when-click-convert-java-fi", "title": "how can I convert java.lang.String to kotlin.String? when click &quot;convert java file to kotlin file&quot;", "body": "<p>when click  \"convert java file to kotlin\" ,I found the type \"java.lang.String\" convert to \"kotlin.String\".But it maybe null,and throws Exception : \"java.lang.IllegalArgumentException: Parameter specified as non-null is null\".</p>\n\n<p>for example:\nMy java code:</p>\n\n<pre><code>public void test(String arg) {\n    if (!TextUtils.isEmpty(arg)) {\n        Log.d(\"test\", arg);\n    }\n}\n</code></pre>\n\n<p>After convert java file to kotlin file:</p>\n\n<pre><code>fun test(arg: String) {\n    if (!TextUtils.isEmpty(arg)) {\n        Log.d(\"test\", arg)\n    }\n}\n</code></pre>\n\n<p>My expected Type for the parmeter \u201carg\u201d is \"String?\" instead of \"String\".</p>\n\n<p>Although I realized that was very difficult for converter to figure out if types should be nullable or not, I still wondered if there is any way to configure this behavior.Force convert \"java.lang.String\" to \"kotlin.String?\".</p>\n"}, {"tags": ["performance", "kotlin"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1544566430, "post_id": 53733129, "comment_id": 94320115, "body": "They result in identical bytecode."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1544566603, "post_id": 53733129, "comment_id": 94320186, "body": "<a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#indexed\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/operator-overloading.html#inde&zwnj;&#8203;xed</a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/get.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "edited": false, "score": 0, "creation_date": 1544567600, "post_id": 53733129, "comment_id": 94320539, "body": "For safety you could use as well <code>getOrElse</code> and <code>getOrNull</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1094, "user_id": 4030765, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/1DXNv.png?s=128&g=1", "display_name": "Tagas", "link": "https://stackoverflow.com/users/4030765/tagas"}, "is_accepted": false, "score": 3, "last_activity_date": 1544568128, "creation_date": 1544568128, "answer_id": 53733456, "question_id": 53733129, "link": "https://stackoverflow.com/questions/53733129/whats-difference-between-get-and-in-kotlin/53733456#53733456", "title": "What&#39;s difference between get and [] in Kotlin?", "body": "<p>It is the exact same thing. In Kotlin, you can <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html#indexed\" rel=\"nofollow noreferrer\">override operators</a>. <code>[]</code> <em>is</em> the <code>get</code> operator, so the resulting jvm byte code will be exactly alike.</p>\n\n<p>You can do the same thing with other operators, e.g. <code>plus</code>:</p>\n\n<pre><code>val x = 3 + 2\n</code></pre>\n\n<p>is the same thing as </p>\n\n<pre><code>val x = 3.plus(2)\n</code></pre>\n\n<p>If you are using an IDE like IntelliJ, you can CTRL-click on the <code>[]</code> or the <code>+</code> operator and on the <code>get()</code> and <code>plus()</code> function respectively and you will see that you end up at the same place.</p>\n"}], "owner": {"reputation": 761, "user_id": 3348549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38327be7b020812e6c5c7377128053a1?s=128&d=identicon&r=PG&f=1", "display_name": "dasuma", "link": "https://stackoverflow.com/users/3348549/dasuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544569783, "creation_date": 1544566373, "question_id": 53733129, "link": "https://stackoverflow.com/questions/53733129/whats-difference-between-get-and-in-kotlin", "title": "What&#39;s difference between get and [] in Kotlin?", "body": "<p>I currently have an element</p>\n\n<p><code>val test: map &lt;int, List &lt;string&gt;</code></p>\n\n<p>I have a question which is the best way to obtain an element if</p>\n\n<pre><code>test.get (100) or test [100]\n</code></pre>\n\n<p>What is the difference, which has the best performance?</p>\n"}, {"tags": ["android", "json", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 4907950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Iy8zG.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/4907950/justin"}, "edited": false, "score": 1, "creation_date": 1574585653, "post_id": 53733243, "comment_id": 104278777, "body": "Answer doesn&#39;t help if you&#39;ve got an actual JSONArray and want to convert to an Array&lt;String&gt;"}, {"owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "reply_to_user": {"reputation": 548, "user_id": 4907950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Iy8zG.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/4907950/justin"}, "edited": false, "score": 0, "creation_date": 1574592026, "post_id": 53733243, "comment_id": 104280049, "body": "@Justin could you please elaborate, JSONArray implements <code>length()</code> from <code>List</code> and has <code>getString(int)</code> method to retrieve a String element at nth position, how isn&#39;t this working for you?"}, {"owner": {"reputation": 548, "user_id": 4907950, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Iy8zG.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/4907950/justin"}, "edited": false, "score": 0, "creation_date": 1574674251, "post_id": 53733243, "comment_id": 104301403, "body": "Thank you for your reply. I&#39;ve actually got this working now. I was just commenting on the fact that it wasn&#39;t working for me, using the json library. I ended up using the iterator and looping through and copying to an array."}], "tags": [], "owner": {"reputation": 12672, "user_id": 1527232, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n5xGm.png?s=128&g=1", "display_name": "lelloman", "link": "https://stackoverflow.com/users/1527232/lelloman"}, "is_accepted": true, "score": 6, "last_activity_date": 1544567368, "last_edit_date": 1544567368, "creation_date": 1544566929, "answer_id": 53733243, "question_id": 53732936, "link": "https://stackoverflow.com/questions/53732936/android-kotlin-convert-jsonarray-to-arraystring/53733243#53733243", "title": "Android Kotlin - convert jsonArray to Array&lt;String&gt;", "body": "<p><code>Array&lt;String&gt;</code> and <code>ArrayList&lt;String&gt;</code> are 2 different types. </p>\n\n<p>What you need to provide is <code>Array&lt;String&gt;</code> but what you are actually providing is <code>ArrayList&lt;String&gt;</code>.</p>\n\n<pre><code>val list = Array(pics.length()) {\n    pics.getString(it)\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 10697801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FHX4C12vDV4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g8_rPQu83Iwz2pwMT-HxK2agKcmw/mo/photo.jpg?sz=128", "display_name": "King Dingeling", "link": "https://stackoverflow.com/users/10697801/king-dingeling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6113, "favorite_count": 2, "accepted_answer_id": 53733243, "answer_count": 1, "score": 2, "last_activity_date": 1544588912, "creation_date": 1544565470, "last_edit_date": 1544588912, "question_id": 53732936, "link": "https://stackoverflow.com/questions/53732936/android-kotlin-convert-jsonarray-to-arraystring", "title": "Android Kotlin - convert jsonArray to Array&lt;String&gt;", "body": "<p>I get an array from an API:</p>\n\n<pre><code>val pics = response.getJSONArray(\"pics\")\n</code></pre>\n\n<p><code>pics</code> contains like:</p>\n\n<pre><code>[\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/19\\/55\\/497173801955.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/10\\/34\\/242830811034.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/86\\/23\\/808728238623.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/90\\/41\\/146747399041.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/47\\/41\\/672475854741.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/63\\/94\\/771076926394.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/36\\/42\\/182330463642.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/29\\/96\\/948397532996.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/82\\/54\\/761385508254.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/41\\/42\\/142837364142.jpg\",\"https:\\/\\/www.bla.com\\/extern\\/v\\/pics\\/mitte\\/66\\/25\\/215324906625.jpg\"]\n</code></pre>\n\n<p>I need to get that into an <code>ArrayList&lt;String&gt;</code></p>\n\n<p>This is one of multiple tries after converting JAVA solutions to kotlin:</p>\n\n<pre><code>val list = ArrayList&lt;String&gt;()\nfor (i in 0 until pics.length()) {\n   list.add(pics.getJSONObject(i).getString(\"name\"))\n}\n</code></pre>\n\n<p>And then when I try to use <code>list</code> in ViewPager then I get type mismatch:</p>\n\n<pre><code>Required: Array&lt;String&gt;\n\nFound:kotlin.collections.ArrayList&lt;String\n</code></pre>\n\n<p>How to do this??</p>\n\n<p>Why can't it be all just simple array() like in PHP smh this is all beyond annoying</p>\n"}, {"tags": ["html", "regex", "iframe", "kotlin"], "comments": [{"owner": {"reputation": 78750, "user_id": 2827823, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1pdiw.png?s=128&g=1", "display_name": "Ason", "link": "https://stackoverflow.com/users/2827823/ason"}, "edited": false, "score": 1, "creation_date": 1544561047, "post_id": 53731618, "comment_id": 94317900, "body": "<code>document.querySelector(&quot;iframe[src*=&#39;specical.com&#39;]&quot;)</code> ...the attribute selector, read more here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors</a>"}, {"owner": {"reputation": 78750, "user_id": 2827823, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1pdiw.png?s=128&g=1", "display_name": "Ason", "link": "https://stackoverflow.com/users/2827823/ason"}, "edited": false, "score": 0, "creation_date": 1544561279, "post_id": 53731618, "comment_id": 94317999, "body": "Hmm, that one might not work in <code>kotlin</code> though...so you need to check it out, but leave the comment for other use cases"}, {"owner": {"reputation": 7206, "user_id": 5741643, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27485d5a049481e18d6aeb3f18480447?s=128&d=identicon&r=PG&f=1", "display_name": "Poul Bak", "link": "https://stackoverflow.com/users/5741643/poul-bak"}, "edited": false, "score": 0, "creation_date": 1544561409, "post_id": 53731618, "comment_id": 94318063, "body": "Use: &#39;&lt;iframe.*src=\\&quot;([^?\\&quot;]*)&#39; then group1 will contain the url."}], "answers": [{"tags": [], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "is_accepted": false, "score": 0, "last_activity_date": 1544562192, "creation_date": 1544562192, "answer_id": 53732303, "question_id": 53731618, "link": "https://stackoverflow.com/questions/53731618/kotlin-how-to-find-a-match-of-iframe-tag-with-special-src-in-html/53732303#53732303", "title": "kotlin, how to find a match of iframe tag with special src in html", "body": "<p>this seems working:</p>\n\n<pre><code>val patternString = \"(?:&lt;iframe\\\\s)(?:[^&lt;]*)(?:src=\\\\s*)(?:\\\"\\\\/\\\\/specical\\\\.com/external\\\\/widget\\\\/api.php?\\\\s*?)(?:[^&gt;]*)&gt;\"\nval pattern = Pattern.compile(patternString)\nval matcher = pattern.matcher(str) \n</code></pre>\n\n<p>i'm sure there is better one</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 1, "last_activity_date": 1544564811, "last_edit_date": 1544564811, "creation_date": 1544563183, "answer_id": 53732505, "question_id": 53731618, "link": "https://stackoverflow.com/questions/53731618/kotlin-how-to-find-a-match-of-iframe-tag-with-special-src-in-html/53732505#53732505", "title": "kotlin, how to find a match of iframe tag with special src in html", "body": "<p>Also, this works  </p>\n\n<p><code>&lt;iframe(?=\\s)(?=(?:[^&gt;\"']|\"[^\"]*\"|'[^']*')*?\\ssrc\\s*=\\s*(?:(['\"])(?:(?!\\1)[\\S\\s])*?(?:specical\\.com/external/widget/api\\.php?)(?:(?!\\1)[\\S\\s])*?\\1))\\s+(?:\"[\\S\\s]*?\"|'[\\S\\s]*?'|[^&gt;]*?)+&gt;</code></p>\n\n<p><a href=\"https://regex101.com/r/gUEfvy/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/gUEfvy/1</a></p>\n\n<pre><code> &lt; iframe\n (?= \\s )\n (?=                           # Asserttion for:  src  (a pseudo atomic group)\n      (?: [^&gt;\"'] | \" [^\"]* \" | ' [^']* ' )*?\n      \\s src \\s* = \\s* \n      (?:\n           ( ['\"] )                      # (1)\n           (?:\n                (?! \\1 )\n                [\\S\\s] \n           )*?\n           (?:                           # \n                specical\\.com/external/widget/api\\.php? \n           )\n           (?:\n                (?! \\1 )\n                [\\S\\s] \n           )*?\n           \\1 \n      )\n )\n                               # Have the src attribute, just match the rest of tag\n \\s+ \n (?: \" [\\S\\s]*? \" | ' [\\S\\s]*? ' | [^&gt;]*? )+\n\n &gt;                             # End  tag\n</code></pre>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 53732505, "answer_count": 2, "score": 0, "last_activity_date": 1544564811, "creation_date": 1544558951, "last_edit_date": 1544560890, "question_id": 53731618, "link": "https://stackoverflow.com/questions/53731618/kotlin-how-to-find-a-match-of-iframe-tag-with-special-src-in-html", "title": "kotlin, how to find a match of iframe tag with special src in html", "body": "<p>Would like detect from a html content for an iframe tag with special src</p>\n\n<pre><code>&lt;iframe width=\"100% !important\" height=\"800px\" src=\"//specical.com/external/widget/api.php?height=800px&amp;amp;width=640px&amp;amp; blablabal\" ...... &gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>the only part in concern is: </p>\n\n<p>it is an iframe and has the src=\"//specical.com/external/widget/api.php?, and the src part could be placed in different place of the iframe string.<br>\nDont care about what else is within the iframe.</p>\n\n<p>how to use regex in kotlin to find a match?</p>\n\n<p>I made one:</p>\n\n<pre><code>val patternString = \"(?:&lt;iframe\\\\s)(?:[^&lt;]*)(?:src=\\\\s*)(?:\\\"//specical.com/external/widget/api.php\\\"\\\\s*)(?:[^&gt;]*)&gt;\"\n</code></pre>\n\n<p>seems not working.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "edited": false, "score": 0, "creation_date": 1544557305, "post_id": 53731215, "comment_id": 94316156, "body": "Could you please explain what these methods do, as in parameters, annotations, and return types? This is most likely related to nullability of the parameters."}, {"owner": {"reputation": 2464, "user_id": 753633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/16d15e8b2767f7da4c2147f61e7df0bd?s=128&d=identicon&r=PG", "display_name": "LEO", "link": "https://stackoverflow.com/users/753633/leo"}, "reply_to_user": {"reputation": 3743, "user_id": 10630900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ece5V.png?s=128&g=1", "display_name": "Minn", "link": "https://stackoverflow.com/users/10630900/minn"}, "edited": false, "score": 0, "creation_date": 1544558053, "post_id": 53731215, "comment_id": 94316512, "body": "I pasted a link to the repo. I didn&#39;t want to answer your question and muddy the question itself."}], "answers": [{"comments": [{"owner": {"reputation": 2464, "user_id": 753633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/16d15e8b2767f7da4c2147f61e7df0bd?s=128&d=identicon&r=PG", "display_name": "LEO", "link": "https://stackoverflow.com/users/753633/leo"}, "edited": false, "score": 0, "creation_date": 1544563583, "post_id": 53731540, "comment_id": 94318970, "body": "Interesting. Learn something new every day. In regards to the Mockito-Kotlin, it looks like it hasn&#39;t been updated in a while...was hesitant to use it."}], "tags": [], "owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "is_accepted": true, "score": 6, "last_activity_date": 1545204134, "last_edit_date": 1545204134, "creation_date": 1544558511, "answer_id": 53731540, "question_id": 53731215, "link": "https://stackoverflow.com/questions/53731215/why-must-i-cast-in-kotlin-but-not-java/53731540#53731540", "title": "Why must I cast in Kotlin but not Java?", "body": "<p>In Java, your expressions have the following types:</p>\n\n<ul>\n<li><code>Observable.class</code> -> <code>Class&lt;Observable&gt;</code></li>\n<li><code>any(Observable.class)</code> -> <code>Observable</code></li>\n</ul>\n\n<p>Likewise in Kotlin:</p>\n\n<ul>\n<li><code>Observable::class.java</code> -> <code>Class&lt;Observable&lt;*&gt;&gt;</code></li>\n<li><code>any(Observable::class.java)</code> -> <code>Observable&lt;*&gt;</code></li>\n</ul>\n\n<p>In Java, <code>Observable</code> is a raw type; you should expect your compiler/IDE to highlight a warning when you implicitly convert to <code>Observable&lt;Action&gt;</code>.  For backward-compatibility with a pre-generics world, this doesn't fail to compile.</p>\n\n<p>Kotlin tries to be smarter about how it handles generics, plus the backward-compatibility thing doesn't apply.  So it forces you to be explicit about your intent here.</p>\n\n<hr>\n\n<p><em>On a tangent, if you're using Mockito in Kotlin I highly recommend the <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">Mockito-Kotlin bindings</a>, as they make this substantially less verbose (it would just be <code>any()</code> in this case).</em></p>\n"}], "owner": {"reputation": 2464, "user_id": 753633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/16d15e8b2767f7da4c2147f61e7df0bd?s=128&d=identicon&r=PG", "display_name": "LEO", "link": "https://stackoverflow.com/users/753633/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 53731540, "answer_count": 1, "score": 2, "last_activity_date": 1545204134, "creation_date": 1544557153, "last_edit_date": 1544557988, "question_id": 53731215, "link": "https://stackoverflow.com/questions/53731215/why-must-i-cast-in-kotlin-but-not-java", "title": "Why must I cast in Kotlin but not Java?", "body": "<p><strong>Question</strong>: Why must I cast the type in Kotlin but not in Java?</p>\n\n<p>I have a java method:</p>\n\n<pre><code>processAction(Observable&lt;Action&gt; actions)\n</code></pre>\n\n<p>I call it in test (Java):</p>\n\n<pre><code>when(myMock.processAction(any(Observable.class))).thenAnswer(...)\n</code></pre>\n\n<p>I call it in test (Kotlin):</p>\n\n<pre><code>when(myMock.processAction(any(Observable::class.java) as Observable&lt;Action&gt;).thenAnswer(...)\n</code></pre>\n\n<p><a href=\"https://github.com/HIFILEO/ReactiveArchitectureKotlin/blob/master/app/src/main/java/com/example/reactivearchitecture/nowplaying/interactor/NowPlayingInteractor.java#L165\" rel=\"nofollow noreferrer\">Repo Here</a></p>\n"}, {"tags": ["android", "android-studio", "kotlin", "usagestatsmanager"], "comments": [{"owner": {"reputation": 578, "user_id": 10325630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H3fu.jpg?s=128&g=1", "display_name": "Tanjim Khan", "link": "https://stackoverflow.com/users/10325630/tanjim-khan"}, "edited": false, "score": 1, "creation_date": 1589540435, "post_id": 53730599, "comment_id": 109341182, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/61615457/how-can-i-get-my-app-screen-time-on-a-hourly-basis\">How can I get my app screen time on a hourly basis?</a>"}, {"owner": {"reputation": 246, "user_id": 10777220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea601949efa706cbeb1d0097f021afe6?s=128&d=identicon&r=PG&f=1", "display_name": "itsam", "link": "https://stackoverflow.com/users/10777220/itsam"}, "reply_to_user": {"reputation": 578, "user_id": 10325630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3H3fu.jpg?s=128&g=1", "display_name": "Tanjim Khan", "link": "https://stackoverflow.com/users/10325630/tanjim-khan"}, "edited": false, "score": 0, "creation_date": 1590511251, "post_id": 53730599, "comment_id": 109704575, "body": "Yes it does. Event based method is pretty accurate and can be used for the same purpose. But the relevance of userStatsManager remains and it needs to be fixed."}], "answers": [{"tags": [], "owner": {"reputation": 3293, "user_id": 1853785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TJlNB.jpg?s=128&g=1", "display_name": "Omar Mainegra", "link": "https://stackoverflow.com/users/1853785/omar-mainegra"}, "is_accepted": false, "score": 1, "last_activity_date": 1544567081, "last_edit_date": 1544567081, "creation_date": 1544566449, "answer_id": 53733145, "question_id": 53730599, "link": "https://stackoverflow.com/questions/53730599/how-to-get-usage-stats-for-current-day-using-usagestatsmanager-in-android-kot/53733145#53733145", "title": "How to get usage stats for &quot;current day&quot; using usageStatsManager in android (kotlin)", "body": "<p>I noticed several problems with your approach.</p>\n\n<ul>\n<li>You are missing <code>time.set(Calendar.SECOND,0)</code> and <code>time.set(Calendar.MILLISECOND,0)</code></li>\n<li>Precision is lost in the division <code>ft=value.totalTimeInForeground/60000</code></li>\n</ul>\n\n<p>I would recommend <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><em>Java Time (ThreeTenBP)</em></a> to handle <em>DateTime</em> and <em>Duration</em> more accurately. I create a new function to compare and indeed the results are different.</p>\n\n<pre><code>fun showtime2(){\n    val start = LocalDate.now().atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()\n    val end = ZonedDateTime.now().toInstant().toEpochMilli()\n\n    val usageStatsManager = getSystemService(Context.USAGE_STATS_SERVICE) as UsageStatsManager\n    val stats = usageStatsManager.queryAndAggregateUsageStats(start, end)\n\n    val total = Duration.ofMillis(stats.values.map { it.totalTimeInForeground }.sum())\n    println(\"YOU SPENT ${total.toMinutes()} mins.\")\n}\n</code></pre>\n\n<p><strong>Your output</strong></p>\n\n<p>YOU SPENT 577 mins.</p>\n\n<p><strong>My output</strong></p>\n\n<p>YOU SPENT 582 mins.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 10375027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bc241d54cc334f8a3a0c7c083ace68c?s=128&d=identicon&r=PG&f=1", "display_name": "BBB", "link": "https://stackoverflow.com/users/10375027/bbb"}, "is_accepted": false, "score": 2, "last_activity_date": 1545050967, "creation_date": 1545050967, "answer_id": 53815618, "question_id": 53730599, "link": "https://stackoverflow.com/questions/53730599/how-to-get-usage-stats-for-current-day-using-usagestatsmanager-in-android-kot/53815618#53815618", "title": "How to get usage stats for &quot;current day&quot; using usageStatsManager in android (kotlin)", "body": "<p>I actually experience a similar problem:</p>\n\n<p>According to my understanding of the documentation <code>firstTimeStamp</code> and <code>lastTimeStamp</code> should give the \"beginning (end) of the time range this UsageStats represents\".</p>\n\n<p>They differ however from what I give as an argument in <code>queryAndAggregateUsageStats</code> as <code>beginTime</code> and <code>endTime</code>.</p>\n\n<p>Also the result for the <code>totalTimeInForeground</code>seems  rather give back a result for the timespan given by <code>firstTimeStamp</code> / <code>lastTimeStamp</code> than for the requested one.</p>\n\n<p>I filled a bug with google for this, please have a look at <a href=\"https://issuetracker.google.com/issues/118564471\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/118564471</a>.</p>\n"}], "owner": {"reputation": 246, "user_id": 10777220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea601949efa706cbeb1d0097f021afe6?s=128&d=identicon&r=PG&f=1", "display_name": "itsam", "link": "https://stackoverflow.com/users/10777220/itsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1545050967, "creation_date": 1544554355, "last_edit_date": 1544625291, "question_id": 53730599, "link": "https://stackoverflow.com/questions/53730599/how-to-get-usage-stats-for-current-day-using-usagestatsmanager-in-android-kot", "title": "How to get usage stats for &quot;current day&quot; using usageStatsManager in android (kotlin)", "body": "<p>Objective:<br> \nNeed to get the usage stats for today (total time for which the device was used today) ie. 12.00 am to current time.</p>\n\n<p>Problem:<br>\n1.I get today's time + some other non explainable time<br>\n2.Non explainable time stamps(start and end of the usage stats as retrieved by the getTimestamp methods)\n<br>The time bucket is not relevant. I give the start time as 12.00 am and the end time as current time, but I get completely irrelevant \".firstTimeStamp\" and \".lastTimeStamp\" (which supposedly return the beginning and end of the usage stats data) for the usage statistics.</p>\n\n<p>*already done the permission granting part, here is the function I'm using to get total time in minutes.</p>\n\n<pre><code>fun showtime(){\n\n    val time=Calendar.getInstance()\n    time.set(Calendar.HOUR_OF_DAY,0)\n    time.set(Calendar.MINUTE,0)\n\n    val start=time.timeInMillis\n    val end= System.currentTimeMillis()\n\n    val usageStatsManager = getSystemService(Context.USAGE_STATS_SERVICE) as UsageStatsManager\n    var stats = usageStatsManager.queryAndAggregateUsageStats(start,end)\n\n    var x:Long=0\n    var ft:Long=0\n    var v:Long=0\n    var l:Long=0\n\n    for ((key,value) in stats) {\n        ft=value.totalTimeInForeground/60000\n          textField1.append(\"$key = $ft mins\")\n            textField1.append(\"\\n\")\n            x=x+ft\n        v=value.firstTimeStamp\n        l=value.lastTimeStamp\n    }\n\n    textView.setText(\"YOU SPENT $x mins.\")\n    textView2.setText(\"${Date(v)} to \\n${Date(l)}\")\n}\n</code></pre>\n\n<p>As an example, when the above code runs at Wed 12 Dec 12.40 am, the result is:<br>\n(in textView):<br>YOU SPENT 90 mins<br>\n(in textView2):<br>Tue 11 Dec 16:23:19 GMT +05:30 2018 to<br>Tue 11 Dec 19:38:45 GMT +05:30 2018</p>\n\n<p>How can I use my phone for 90 mins in just 40 mins?<br>\nAnd what does those apparently irrelevant timestamps mean?<br>\nAm I doing something wrong to achieve my objective?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3472, "user_id": 4072509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16VK8.jpg?s=128&g=1", "display_name": "apetranzilla", "link": "https://stackoverflow.com/users/4072509/apetranzilla"}, "edited": false, "score": 1, "creation_date": 1544552124, "post_id": 53729287, "comment_id": 94313757, "body": "You can override the <code>finalize</code> method. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#finalize()\" rel=\"nofollow noreferrer\">Javadoc</a>"}], "owner": {"reputation": 155, "user_id": 10357253, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ekmwus2NLYg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMkWGTsez1-cLI1_F4Whz0ofUSEAg/mo/photo.jpg?sz=128", "display_name": "Stanislas Heili", "link": "https://stackoverflow.com/users/10357253/stanislas-heili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1259, "favorite_count": 0, "closed_date": 1544550108, "answer_count": 0, "score": 2, "last_activity_date": 1544549120, "creation_date": 1544549120, "last_edit_date": 1592644375, "question_id": 53729287, "link": "https://stackoverflow.com/questions/53729287/is-there-a-kotlin-equivalent-to-swift-deinit", "closed_reason": "Duplicate", "title": "Is there a Kotlin equivalent to Swift deinit?", "body": "<p>Swift provides a deinit function for every object and I am wondering if Kotlin has an equivalent function</p>\n<p>Here is how it works in Swift (Apple Doc):</p>\n<blockquote>\n<p>A deinitializer is called immediately before a class instance is deallocated. You write deinitializers with the deinit keyword, similar to how intializers are written with the init keyword. Deinitializers are only available on class types.</p>\n<p>Typically you don\u2019t need to perform manual clean-up when your instances are deallocated. However, when you are working with your own resources, you might need to perform some additional clean-up yourself. For example, if you create a custom class to open a file and write some data to it, you might need to close the file before the class instance is deallocated.</p>\n</blockquote>\n"}, {"tags": ["spring", "postgresql", "hibernate", "jpa", "kotlin"], "comments": [{"owner": {"reputation": 431, "user_id": 5878215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87d14d1c1f1b2ac977cbf915704caf80?s=128&d=identicon&r=PG", "display_name": "Zorglube", "link": "https://stackoverflow.com/users/5878215/zorglube"}, "edited": false, "score": 0, "creation_date": 1544548400, "post_id": 53729053, "comment_id": 94311948, "body": "You might use sequence in your database to provide you your Ids."}, {"owner": {"reputation": 431, "user_id": 5878215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87d14d1c1f1b2ac977cbf915704caf80?s=128&d=identicon&r=PG", "display_name": "Zorglube", "link": "https://stackoverflow.com/users/5878215/zorglube"}, "edited": false, "score": 0, "creation_date": 1544548538, "post_id": 53729053, "comment_id": 94312016, "body": "Something like <code>@Id \t@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;id_sequence_name&quot;) \t@SequenceGenerator(name = &quot;id_sequence_name&quot;, sequenceName = &quot;id_sequence_sql_name&quot;, allocationSize = 1) \t@Column(name = &quot;id&quot;, updatable = false) \tprivate Long id;</code>"}], "owner": {"reputation": 65, "user_id": 10396560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YiDdm.jpg?s=128&g=1", "display_name": "CMarker", "link": "https://stackoverflow.com/users/10396560/cmarker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544548141, "creation_date": 1544548141, "question_id": 53729053, "link": "https://stackoverflow.com/questions/53729053/why-is-the-ids-in-my-jpa-hibernate-postgres-database-skipping-id-values", "title": "Why is the ids in my jpa hibernate postgres database skipping id values?", "body": "<p>I have these tables that are autogenerated by JPA and Hibernate on startup with these spring configuration.</p>\n\n<p>This is my application.yml config:</p>\n\n<pre><code>spring:\n  datasource:\n    url: \"jdbc:postgresql://postgres-cinema:5432/postgres\"\n    username: \"postgres\"\n    password: \"\"\n    driver-class-name: \"org.postgresql.Driver\"\n  jpa:\n    database: \"postgresql\"\n    hibernate:\n      ddl-auto: \"update\"\n</code></pre>\n\n<p>These are my Entity classes:</p>\n\n<pre><code>@Entity\nclass Cinema(\n\n    @get:Id @get:GeneratedValue\n    var id: Long? = null,\n\n    @get:NotBlank @get:Size(max = 128)\n    var name: String,\n\n    @get:NotBlank @get:Size(max = 128)\n    var location: String? = null,\n\n    @get:OneToMany(mappedBy = \"cinema\", cascade = [CascadeType.ALL], fetch = FetchType.EAGER)\n    var rooms: MutableSet&lt;Room&gt; = mutableSetOf()\n)\n\n@Entity\nclass Room(\n\n    @get:Id @get:GeneratedValue\n    var id: Long? = null,\n\n    @get:NotBlank @get:Size(max = 128)\n    var name: String,\n\n    @get:ElementCollection\n    @get:NotNull\n    var seats: MutableSet&lt;String&gt;,\n\n    @get:ManyToOne(fetch = FetchType.EAGER)\n    @get:JoinColumn(name = \"cinema_id\")\n    var cinema: Cinema? = null\n)\n</code></pre>\n\n<p>When i'm creating a new Cinema it gets the id of 1\nNext i'm creating a new Room, and it gets the id of 2.</p>\n\n<p>Am i doing something rong with the entity tables? and aren't these supposed to be independent table with their own ids?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2207, "user_id": 4101826, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BrRYa.jpg?s=128&g=1", "display_name": "Mitesh Vanaliya", "link": "https://stackoverflow.com/users/4101826/mitesh-vanaliya"}, "edited": false, "score": 0, "creation_date": 1544547756, "post_id": 53728726, "comment_id": 94311620, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39208509/how-to-display-alert-message-when-back-button-is-pressed\">How to display Alert Message when back button is Pressed?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "is_accepted": true, "score": 0, "last_activity_date": 1544547610, "creation_date": 1544547610, "answer_id": 53728920, "question_id": 53728726, "link": "https://stackoverflow.com/questions/53728726/how-to-show-custom-dialog-when-user-click-back-button-in-kotlin/53728920#53728920", "title": "How to show custom dialog when user click back button in Kotlin", "body": "<p>Delete super.onBackPressed() from your onBackPressed() callback. This way you'll avoid your super class to call its onBackPressed() method and your activity will not be destroyed.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onBackPressed() {\n    creatAlertDialog()\n    // whatever you want here\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10668074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990ef0ec9f1b767c1d422cd8e9413082?s=128&d=identicon&r=PG&f=1", "display_name": "younes abid", "link": "https://stackoverflow.com/users/10668074/younes-abid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 53728920, "answer_count": 1, "score": -1, "last_activity_date": 1544547610, "creation_date": 1544546822, "last_edit_date": 1544547132, "question_id": 53728726, "link": "https://stackoverflow.com/questions/53728726/how-to-show-custom-dialog-when-user-click-back-button-in-kotlin", "title": "How to show custom dialog when user click back button in Kotlin", "body": "<p>I'd like to show a custom dialog when a user clicks back button in Kotlin.</p>\n\n<p>I tried this code but it doesn't work, when I click the back button the custom dialog shows and then disappears</p>\n\n<pre><code>override fun onBackPressed() {\n    super.onBackPressed()\n\n    onPause()\n    creatAlertDialog()\n\n}\n\n\n\nfun creatAlertDialog() {\n\n\n    var dialogs = Dialog(this@MainActivity)\n    dialogs.requestWindowFeature(Window.FEATURE_NO_TITLE)\n    dialogs.setCancelable(false)\n    dialogs.setContentView(R.layout.back_press)\n\n    dialogs.btn_yes.setOnClickListener {\n        finish()\n    }\n\n    dialogs.btn_no.setOnClickListener {\n        dialogs.dismiss()\n    }\n\n    dialogs.show()\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "google-calendar-api", "android-calendar"], "comments": [{"owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1544545792, "post_id": 53728392, "comment_id": 94310495, "body": "<a href=\"https://developer.android.com/guide/topics/providers/calendar-provider\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/providers/calendar-provid&zwnj;&#8203;er</a>"}, {"owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1544545801, "post_id": 53728392, "comment_id": 94310500, "body": "<a href=\"https://developers.google.com/calendar/\" rel=\"nofollow noreferrer\">developers.google.com/calendar</a>"}, {"owner": {"reputation": 25778, "user_id": 4467208, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/H3QRx.jpg?s=128&g=1", "display_name": "Murat Karag&#246;z", "link": "https://stackoverflow.com/users/4467208/murat-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1544545818, "post_id": 53728392, "comment_id": 94310513, "body": "How did you search? There are lot of android developer guides.."}], "owner": {"reputation": 263, "user_id": 5133518, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10207082355687899/picture?type=large", "display_name": "Genaro Alberto Cancino Herrera", "link": "https://stackoverflow.com/users/5133518/genaro-alberto-cancino-herrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544545614, "creation_date": 1544545614, "question_id": 53728392, "link": "https://stackoverflow.com/questions/53728392/android-show-information-in-a-specific-day-on-calendar", "title": "Android show information in a specific day on calendar", "body": "<p>Not a problem per se but I am figuring out how to do something. In my app, I shall save some workout for every specific client. Any workout will be doing different from week to week; i.e: rep scheme in the week one shall be different from the week two, and so on.</p>\n\n<p>So, how to show the user that in the calendar? Should I save in every workout the day it should be performed and then see if it's the same day and show it? Or how to implement this? The only way I thought to implement this is save in every workout the day that it should be performed and show it in a textview and all the info behind relationated with the workout without calendar use but don't know if this approach would be the best</p>\n\n<p>I have searched on the web but found nothing. If you could give me a hint would be awesome.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "post", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "edited": false, "score": 0, "creation_date": 1544546335, "post_id": 53728232, "comment_id": 94310816, "body": "Tip: use a data class for UserAccount: this is much less verbose because it doesn&#39;t need a constructor and it generates equals/hashcode functions. You can call <code>.copy(</code> on data classes, after which you should have no problems with keeping the values immutable (<code>val</code>)."}, {"owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "reply_to_user": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "edited": false, "score": 0, "creation_date": 1544547914, "post_id": 53728232, "comment_id": 94311710, "body": "my onResponse is called before i send the answer by postman. I think its other problem."}, {"owner": {"reputation": 12184, "user_id": 3544839, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/PH19M.jpg?s=128&g=1", "display_name": "Moinkhan", "link": "https://stackoverflow.com/users/3544839/moinkhan"}, "edited": false, "score": 0, "creation_date": 1544587124, "post_id": 53728232, "comment_id": 94324806, "body": "@Fl&#225;vioCosta have you log the response?"}], "answers": [{"comments": [{"owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "edited": false, "score": 0, "creation_date": 1544547295, "post_id": 53728482, "comment_id": 94311388, "body": "I do that and i got the same problem, but now i have 2 empty objects. UserAccount and BackendError"}], "tags": [], "owner": {"reputation": 6305, "user_id": 389649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fc842fef375d0c258c3762684d149d1?s=128&d=identicon&r=PG", "display_name": "Cristan", "link": "https://stackoverflow.com/users/389649/cristan"}, "is_accepted": false, "score": -1, "last_activity_date": 1544546347, "last_edit_date": 1544546347, "creation_date": 1544545970, "answer_id": 53728482, "question_id": 53728232, "link": "https://stackoverflow.com/questions/53728232/empty-response-body-on-retrofit-call/53728482#53728482", "title": "Empty response body on retrofit call", "body": "<p>Your response contains elements named \"userAccount\" and \"error\". Your UserAccount class has neither which is causing the issue. Therefore, use Retrofit with a class like this:</p>\n\n<pre><code>data class UserResponse(val userAccount: UserAccount, val error: BackendError)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "is_accepted": true, "score": 0, "last_activity_date": 1544619100, "creation_date": 1544619100, "answer_id": 53743453, "question_id": 53728232, "link": "https://stackoverflow.com/questions/53728232/empty-response-body-on-retrofit-call/53743453#53743453", "title": "Empty response body on retrofit call", "body": "<p>I found!</p>\n\n<p>Its a problem with my postman. For any reason my AVD cant access the mock server. now i solve my problem with a simple restful api node.js.</p>\n\n<p>Thx for the help guys.</p>\n"}], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 53743453, "answer_count": 2, "score": 0, "last_activity_date": 1544645657, "creation_date": 1544545075, "last_edit_date": 1544645657, "question_id": 53728232, "link": "https://stackoverflow.com/questions/53728232/empty-response-body-on-retrofit-call", "title": "Empty response body on retrofit call", "body": "<p>I have a app whos call a service POST (postman test) and get some information from that call.</p>\n\n<p>My retrofit initializer:</p>\n\n<pre><code>class RetrofitInitializer {\n\n    private val retrofit = Retrofit.Builder()\n        .baseUrl(\"https://bank-app-test.herokuapp.com/api/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n\n    fun loginApiContract() : LoginApiContract{\n        return retrofit.create(LoginApiContract::class.java)\n    }\n}\n</code></pre>\n\n<p>the interface:</p>\n\n<pre><code>interface LoginApiContract {\n\n    @POST(\"login\")\n    fun login() : Call&lt;UserAccount&gt;\n\n    @GET(\"statements\")\n    fun getStatements()\n}\n</code></pre>\n\n<p>and finally the call:</p>\n\n<pre><code>val call = RetrofitInitializer().loginApiContract().login()\n\ncall.enqueue(object: Callback&lt;UserAccount&gt; {\n    override fun onResponse(call: Call&lt;UserAccount?&gt;?,\n    response: Response&lt;UserAccount?&gt;?) {\n        response?.body()?.let {\n            val myUserAccount: UserAccount = it\n            loginView.doLogin(myUserAccount)\n        }\n    }\n\n    override fun onFailure(call: Call&lt;UserAccount?&gt;?,\n    t: Throwable?) {\n        Log.e(\"onFailure error\", t?.message)\n    }\n})\n</code></pre>\n\n<p>I got response code 200, but response body is empty.</p>\n\n<p>This is my postman response:</p>\n\n<pre><code>{\n\"userAccount\": {\n    \"userId\": 1,\n    \"name\": \"Jose da Silva Teste\",\n    \"bankAccount\": \"2050\",\n    \"agency\": \"012314564\",\n    \"balance\": 3.3445\n},\n\"error\": {}\n}\n</code></pre>\n\n<p>and this is my model:</p>\n\n<pre><code>class UserAccount constructor(var userId: Int, var name: String, var bankAccount: String, var agency: String, var balance: Double){\n\n    init{\n\n        this.userId = userId\n        this.name = name\n        this.bankAccount = bankAccount\n        this.agency = agency\n        this.balance = balance\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "visibility", "lifecycle"], "comments": [{"owner": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "edited": false, "score": 1, "creation_date": 1544553456, "post_id": 53726690, "comment_id": 94314416, "body": "My guess is, when the bug occurs, you&#39;ve accidentally added two <code>RelativeLayouts</code> to the activity. Then, you&#39;re successfully hiding one, but the original remains. When you do <code>relativeLayout.visibility = VIew.GONE</code>, you may want to print <code>relativeLayout.toString()</code> and verify that it is, in fact, the same one you&#39;re seeing on the view hierarchy."}, {"owner": {"reputation": 56, "user_id": 3551963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GMFb.jpg?s=128&g=1", "display_name": "Davidaz", "link": "https://stackoverflow.com/users/3551963/davidaz"}, "reply_to_user": {"reputation": 4328, "user_id": 6759241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6142c6522e970d8de69ec8add2ae1214?s=128&d=identicon&r=PG&f=1", "display_name": "greeble31", "link": "https://stackoverflow.com/users/6759241/greeble31"}, "edited": false, "score": 0, "creation_date": 1544600811, "post_id": 53726690, "comment_id": 94329096, "body": "Nice guess, I didn&#39;t thought about this possible issue... I will try to reproduce it and comment back with the results looking for that view. Thank you!!"}], "owner": {"reputation": 56, "user_id": 3551963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GMFb.jpg?s=128&g=1", "display_name": "Davidaz", "link": "https://stackoverflow.com/users/3551963/davidaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1544539967, "creation_date": 1544539967, "question_id": 53726690, "link": "https://stackoverflow.com/questions/53726690/view-added-programatically-not-changing-visibility-after-a-long-time-not-used", "title": "View added programatically not changing visibility after a long time not used", "body": "<p>I have a problem I have not yet been able to understand, nor solve.</p>\n\n<p>On my android project, I have a BaseActivity. There, among other functions, I decided to add a function to show or hide a loading view when necessary. It works as intended, but sometimes an error happens. </p>\n\n<p>I will try to raise some important info about my project I think can be useful. My app is integrated with an external login app. I call it when the services I call need to refresh it's token. When the user logs in on the app, it calls a listener and give me back control on mine. </p>\n\n<p>The problem is the next one: </p>\n\n<p>I come to an activity that needs to call a service and I have the token all right, but then I lock the phone. After a long period of time, I unlock the phone and, from the same activity, I call again the service. My activity shows de loader as intended and, as my token is expired, I call the login app from it's SDK. </p>\n\n<p>When I come back to my app, and I call the service I wanted successfully, the app tries to hide the loader. This is where the fail comes, as I can't change the visibility to <code>GONE</code>. I looked for it on the view hierarchy and find it, but with <code>visibility = VISIBLE</code>.</p>\n\n<p>Here is the piece of code from the loader, hope someone can find where I'm making the mistake!</p>\n\n<pre><code>abstract class BaseActivity : DaggerAppCompatActivity(){\n    // These are the IDS of the Views I'm adding to the activity, so I can track them and change their visibility\n    var imgLoadingID = -1\n    var rvLoadingID = -1\n\n    fun showLoading() {\n        // If the views are added I show them\n        if (imgLoadingID &gt; 0 &amp;&amp; rvLoadingID &gt; 0) {\n            val imageView = findViewById&lt;ImageView&gt;(imgLoadingID)\n            val relativeLayout = findViewById&lt;RelativeLayout&gt;(rvLoadingID)\n            relativeLayout.visibility = View.VISIBLE\n            imageView.visibility = VISIBLE\n            imageView.isClickable = false\n            imageView.isFocusable = false\n        } else {\n            // else I create them and show them\n            val imgLoading = ImageView(this)\n            imgLoading.id = View.generateViewId()\n            imgLoadingID = imgLoading.id\n\n            val maxpx = CustomUtils.ViewUtils.converIntToDps(65, this)\n            Glide.with(this).asGif().load(R.mipmap.loading).into(imgLoading)\n            val relativeLayout = RelativeLayout(this)\n            relativeLayout.id = View.generateViewId()\n            rvLoadingID = relativeLayout.id\n\n            var params = RelativeLayout.LayoutParams(maxpx, WRAP_CONTENT)\n            params.addRule(RelativeLayout.CENTER_IN_PARENT)\n            relativeLayout.addView(imgLoading, params)\n            relativeLayout.background = getDrawable(R.color.pure_white_97)\n            relativeLayout.isClickable = true\n            relativeLayout.isFocusable = true\n\n            findViewById&lt;ViewGroup&gt;(android.R.id.content).addView(relativeLayout, RelativeLayout.LayoutParams(MATCH_PARENT,  MATCH_PARENT))\n\n            imgLoading.visibility = VISIBLE\n        }\n        // I lock the back button so people don't cancel my requests\n        esBackPressedBlocked = true\n    }\n\n    // Here I find the views and change their visibility.\n    fun hideLoading(){\n\n        if(imgLoadingID &gt; 0 &amp;&amp; rvLoadingID &gt; 0) {\n            val imageView = findViewById&lt;ImageView&gt;(imgLoadingID)\n            val relativeLayout = findViewById&lt;RelativeLayout&gt;(rvLoadingID)\n            relativeLayout.visibility = View.GONE\n            imageView.visibility = View.GONE\n        }\n\n        esBackPressedBlocked = false\n    }\n}\n</code></pre>\n\n<p>I deleted some logs I added to the whole function, but when it fails, it enters on the <code>hideLoading()</code> function, even on the <code>relativeLayout.visibility = View.GONE</code> part. </p>\n\n<p>The function used to be with the Views as an whole object instead of their ids, but I found it more reliable this way, and saving the views instead of their Id's had the same problem.</p>\n\n<p>My main concern is how Android manages my application while the phone is locked for this period of time (the fails happened after 8-10 hours of inactivity). I think something there can be creating this issue. I thought also about the external Login app, since it's sdk is launching their app's intent and calling me from a listener when coming back, but, since my code is being executed, I think Android it's managing my views on an strange way. Or maybe I try to hide the loading view before I'm on the resumed activity... I don't really know.</p>\n\n<p>BTW, I know there are easier solutions on showing a loader, but I wanted to create it the cleanest way. If you have any cleaner approach I'm open to any solution.</p>\n\n<p>If there is anything unclear let me know in the comments, and I hope my English was clear enough to express myself, it's a tricky problem that I can't understand, so it's difficult for me to explain it.</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["kotlin", "teamcity", "dsl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8706970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f3fa46b4e26dec0895a9dfd9a8ad02?s=128&d=identicon&r=PG&f=1", "display_name": "mobikop", "link": "https://stackoverflow.com/users/8706970/mobikop"}, "edited": false, "score": 1, "creation_date": 1544546021, "post_id": 53727811, "comment_id": 94310627, "body": "I know about &quot;Create project from URL&quot; feature, but I need to create TeamCity project from REST client passing existed Kotlin DSL script. Is it possible?  This is my workflow:  1. I have different Kotlin DSL scripts 2. Depends on conditions I create TeamCity projects from chosen Kotlin DSL script 3. I run auto generated projects by TeamCity REST API"}, {"owner": {"reputation": 2141, "user_id": 45202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806a24dcc74a3c07785d6ef033e9f38a?s=128&d=identicon&r=PG", "display_name": "Pavel Sher", "link": "https://stackoverflow.com/users/45202/pavel-sher"}, "reply_to_user": {"reputation": 1, "user_id": 8706970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f3fa46b4e26dec0895a9dfd9a8ad02?s=128&d=identicon&r=PG&f=1", "display_name": "mobikop", "link": "https://stackoverflow.com/users/8706970/mobikop"}, "edited": false, "score": 1, "creation_date": 1544706212, "post_id": 53727811, "comment_id": 94376614, "body": "At the moment REST API does not support it. As a workaround you can take a look what HTTP requests are sent by create from URL page and emulate them in your scripts."}, {"owner": {"reputation": 1, "user_id": 8706970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f3fa46b4e26dec0895a9dfd9a8ad02?s=128&d=identicon&r=PG&f=1", "display_name": "mobikop", "link": "https://stackoverflow.com/users/8706970/mobikop"}, "edited": false, "score": 0, "creation_date": 1544707837, "post_id": 53727811, "comment_id": 94377595, "body": "Pavel Sher, thanks for the advice. I will try... I also think about teamcity plugin which will have endpoint to receive a kotlin dsl to create a project - is it possible to do now with Open API?"}], "tags": [], "owner": {"reputation": 2141, "user_id": 45202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/806a24dcc74a3c07785d6ef033e9f38a?s=128&d=identicon&r=PG", "display_name": "Pavel Sher", "link": "https://stackoverflow.com/users/45202/pavel-sher"}, "is_accepted": false, "score": -1, "last_activity_date": 1544543711, "creation_date": 1544543711, "answer_id": 53727811, "question_id": 53726196, "link": "https://stackoverflow.com/questions/53726196/creating-teamcity-project-by-importing-kotlin-dsl/53727811#53727811", "title": "Creating TeamCIty project by importing Kotlin DSL", "body": "<p>Action \"Create project from URL\" analyzes repository and if it founds .teamcity there it will offer to import project from there.</p>\n\n<p>You can try to import this project as an example: <a href=\"https://github.com/JetBrains/teamcity-test-metadata-demo\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/teamcity-test-metadata-demo</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8706970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08f3fa46b4e26dec0895a9dfd9a8ad02?s=128&d=identicon&r=PG&f=1", "display_name": "mobikop", "link": "https://stackoverflow.com/users/8706970/mobikop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1544543711, "creation_date": 1544538304, "question_id": 53726196, "link": "https://stackoverflow.com/questions/53726196/creating-teamcity-project-by-importing-kotlin-dsl", "title": "Creating TeamCIty project by importing Kotlin DSL", "body": "<p>I am trying to create TeamCity project/build configuration using REST API. I am curious if it's possible by importing Kotlin DSL script?</p>\n\n<p>My goal is to create project/build configurations dynamically by existed Kotlin DSL scripts and TeamCity REST API. How can I achieve it? Thanks!</p>\n"}, {"tags": ["kotlin", "nullable"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544537539, "post_id": 53725656, "comment_id": 94305252, "body": "just as a further side-note... you need <code>?.</code>, but you probably do not need <code>let</code> here... if it&#39;s just printing what you want, you could do: <code>myNewNullableInt?.run(::println)</code> (or same with <code>?.also</code>)... You only need <code>let</code> if you actually want to return or set a value which is calculated and returned within the given body..."}, {"owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "reply_to_user": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544538195, "post_id": 53725656, "comment_id": 94305631, "body": "Thanks Roland this was just a simplified example from something more complex I was doing."}], "answers": [{"comments": [{"owner": {"reputation": 9417, "user_id": 10134209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XvJ8z.png?s=128&g=1", "display_name": "gidds", "link": "https://stackoverflow.com/users/10134209/gidds"}, "edited": false, "score": 0, "creation_date": 1544570870, "post_id": 53725782, "comment_id": 94321534, "body": "Perhaps this answer could be clearer that it only smart-casts the value to a non-nullable type if it isn&#39;t actually null!  If it <b>is</b> null, then the safe-call <code>?.</code> operator will bypass the <code>let</code> block entirely.  Often that&#39;s what you want; but it&#39;s always worth thinking through the what-ifs."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 5, "last_activity_date": 1544537029, "creation_date": 1544537029, "answer_id": 53725782, "question_id": 53725656, "link": "https://stackoverflow.com/questions/53725656/why-does-let-not-give-me-a-non-nullable-integer-in-this-case/53725782#53725782", "title": "Why does let not give me a non nullable integer in this case", "body": "<p><code>let {}</code> doesn't change the type of the variable. What you want to do is making it null-safe. This is done with the <code>?.</code> access</p>\n\n<pre><code>myNewNullableInt?.let{\n    printAnInteger(it)\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1544537712, "post_id": 53725891, "comment_id": 94305343, "body": "The link and more information (comes with the edit)."}], "tags": [], "owner": {"reputation": 5302, "user_id": 4265739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19cd59393a5b86c48f0da7bd5504c5b8?s=128&d=identicon&r=PG&f=1", "display_name": "leonardkraemer", "link": "https://stackoverflow.com/users/4265739/leonardkraemer"}, "is_accepted": false, "score": 1, "last_activity_date": 1544539199, "last_edit_date": 1544539199, "creation_date": 1544537350, "answer_id": 53725891, "question_id": 53725656, "link": "https://stackoverflow.com/questions/53725656/why-does-let-not-give-me-a-non-nullable-integer-in-this-case/53725891#53725891", "title": "Why does let not give me a non nullable integer in this case", "body": "<p>See <a href=\"https://kotlinlang.org/docs/reference/null-safety.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/null-safety.html</a></p>\n\n<p>You have to use the safe call operator, written <code>?.</code></p>\n\n<blockquote>\n  <p>To perform a certain operation only for non-null values, you can use\n  the safe call operator together with let:</p>\n\n<pre><code>val listWithNulls: List&lt;String?&gt; = listOf(\"Kotlin\", null)\nfor (item in listWithNulls) {   \n    item?.let { println(it) } // prints A and ignores null\n}\n</code></pre>\n</blockquote>\n\n<hr>\n\n<h2>Other options:</h2>\n\n<p>As second option you can use the !!-operator (use with care, it will throw a NPE if it is null)</p>\n\n<pre><code>val myNewNullableInt: Int? =6\nmyNewNullableInt!!.let{ //throws if myNewNullableInt == null\n    printAnInteger(it)\n}\n</code></pre>\n\n<p>Because you are using a non-mutable <code>val</code> you can also use `if(myNewNullableInt != null). Kotlin will recognize the null-check and auto-cast to the non-nullable type. You can see the smart-cast by the green marking of AndroidStudio or Idea.</p>\n\n<pre><code>val myNewNullableInt: Int? =6\n   if(myNewNullableInt != null) {\n           printAnInteger(myNewNullableInt )\n   }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Te2JFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Te2JFm.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 5056, "user_id": 1196988, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Ih3Vl.jpg?s=128&g=1", "display_name": "Chris Nevill", "link": "https://stackoverflow.com/users/1196988/chris-nevill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 53725782, "answer_count": 2, "score": -1, "last_activity_date": 1544539199, "creation_date": 1544536680, "question_id": 53725656, "link": "https://stackoverflow.com/questions/53725656/why-does-let-not-give-me-a-non-nullable-integer-in-this-case", "title": "Why does let not give me a non nullable integer in this case", "body": "<p>Fairly new to Kotlin - I'm slightly confused by why\nwhen using let in this example 'it' is still nullable?\nAs a result the example fails to compile</p>\n\n<blockquote>\n  <p>Error:(9, 20) Type mismatch: inferred type is Int? but Int was\n  expected</p>\n</blockquote>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val myNewNullableInt: Int? =6\n    myNewNullableInt.let{\n        printAnInteger(it)\n    }\n\n}\n\nfun printAnInteger (integerToPrint: Int){\n    println(integerToPrint)\n}\n</code></pre>\n\n<p>Example:\n<a href=\"https://try.kotlinlang.org/#/UserProjects/fnlicstrn4tbmk8gs071vmv4ka/9dd72cr92ikggh3g9qg981h01o\" rel=\"nofollow noreferrer\">https://try.kotlinlang.org/#/UserProjects/fnlicstrn4tbmk8gs071vmv4ka/9dd72cr92ikggh3g9qg981h01o</a></p>\n"}, {"tags": ["serialization", "kotlin", "xodus", "xodus-dnq"], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 6869836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDAzh.jpg?s=128&g=1", "display_name": "lehvolk", "link": "https://stackoverflow.com/users/6869836/lehvolk"}, "is_accepted": true, "score": 0, "last_activity_date": 1544543158, "creation_date": 1544543158, "answer_id": 53727664, "question_id": 53725167, "link": "https://stackoverflow.com/questions/53725167/a-proper-way-to-serialize-deserialize-xodus-dnq-entity/53727664#53727664", "title": "A proper way to serialize/deserialize Xodus-dnq entity", "body": "<p>Serializing XdUser to JSON you should be sure that serializer won't process <code>XdUser#entity</code> and other public links which can expose large amount of unnecessary data. Deserialization brings another problems because deserializator should be informed about how to instantiate a class from json using constructor <code>XdUser(entity: Entity)</code>.</p>\n\n<p>From my prospective better choice there is to have another level for rest API. It brings ability to control amount of exposed data, control permissions (if your have them) and the way of how entities will be updated.</p>\n\n<p>Rest api level be implemented like this: </p>\n\n<pre><code>open class EntityVO&lt;T: XdEntity&gt;(xdId: String?) {\n}\n\nclass UserVO(xdId: String?): EntityVO&lt;XdUser&gt;(xdId: String?) {\n\n    var someName by delegateTo(XdUser::someName)\n    var someNumber by delegateTo(XdUser::someNumber)\n\n}\n</code></pre>\n\n<p>and <code>delegateTo</code> should provide delegate which will lookup XdUser by xdId and do get/set value using specified XdUser property. For link/links logic will be more complex but idea can be the same.</p>\n"}], "owner": {"reputation": 77, "user_id": 2625272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eac2f226ee9d8c8cacec3d435a3e12ad?s=128&d=identicon&r=PG", "display_name": "Rundom", "link": "https://stackoverflow.com/users/2625272/rundom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 53727664, "answer_count": 1, "score": 0, "last_activity_date": 1544543158, "creation_date": 1544534943, "last_edit_date": 1544535872, "question_id": 53725167, "link": "https://stackoverflow.com/questions/53725167/a-proper-way-to-serialize-deserialize-xodus-dnq-entity", "title": "A proper way to serialize/deserialize Xodus-dnq entity", "body": "<p>For example - I've got this entity:</p>\n\n<pre><code>class XdUser(entity: Entity) : XdEntity(entity) {\n\n    var someName by xdStringProp()\n    var someNumber by xdIntProp()\n}\n</code></pre>\n\n<p>What is the proper way to serialize/deserialize it from/to json?\nI have to create data class which just duplicates my entity's fields and then propagate values to XdUser? Or there is other way?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1544531390, "post_id": 53724204, "comment_id": 94301811, "body": "did you try to call any <code>@Query</code> annotated method after <code>@Insert</code>?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1544531455, "post_id": 53724204, "comment_id": 94301854, "body": "Aren&#39;t you missing a <code>INSTANCE == null</code> check inside the synchronized block?"}, {"owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1544531931, "post_id": 53724204, "comment_id": 94302124, "body": "@pskink No, I haven&#39;t. Would it change anything (It&#39;s my first time with Room)?"}, {"owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1544532114, "post_id": 53724204, "comment_id": 94302213, "body": "@EpicPandaForce I&#39;m still learning about synchronization, locks and such when it comes to dbs. Should I check for null INSIDE the block?"}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1544532409, "post_id": 53724204, "comment_id": 94302353, "body": "Why are you looking for a database file? as @pskink asked, just <code>@Query</code> or do any other DB related work. It should work."}, {"owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "reply_to_user": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1544532541, "post_id": 53724204, "comment_id": 94302421, "body": "@musooff Since it&#39;s my first time dealing with Room, I thought the easiest way to make sure what I&#39;m doing is working would be to check the db file itself."}, {"owner": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 0, "creation_date": 1544533031, "post_id": 53724204, "comment_id": 94302654, "body": "I guess it&#39;s how SQLite works. You won&#39;t be able to see the changes immediately. But your operations will be completed."}, {"owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "reply_to_user": {"reputation": 4510, "user_id": 8412192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vaBoM.jpg?s=128&g=1", "display_name": "musooff", "link": "https://stackoverflow.com/users/8412192/musooff"}, "edited": false, "score": 1, "creation_date": 1544533445, "post_id": 53724204, "comment_id": 94302844, "body": "@musooff I see... I queried the db and my records are there, as you said they&#39;d be. I&#39;ll have to look into sqlite databases to understand it better, than. Thanks!"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1544540709, "post_id": 53724204, "comment_id": 94307204, "body": "@bernardo.g you should check against null twice: once outside the block and once inside the block"}], "answers": [{"tags": [], "owner": {"reputation": 4533, "user_id": 10648865, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FZ5ePNXHoPg/AAAAAAAAAAI/AAAAAAAAOGs/HY80R-CL6D4/photo.jpg?sz=128", "display_name": "dglozano", "link": "https://stackoverflow.com/users/10648865/dglozano"}, "is_accepted": true, "score": 8, "last_activity_date": 1544550075, "last_edit_date": 1544550075, "creation_date": 1544534420, "answer_id": 53725034, "question_id": 53724204, "link": "https://stackoverflow.com/questions/53724204/calling-insert-in-a-room-database-does-not-complete-the-transaction/53725034#53725034", "title": "Calling &#39;insert&#39; in a room database does not complete the transaction", "body": "<hr>\n\n<h2><strong>TL;DR</strong></h2>\n\n<p>Your code seems to be working fine. Don't get confused by the temporary files SQLite creates to operate.</p>\n\n<ol>\n<li>The WAL and SHM files are temporary internal files that you shouldn't worry about.</li>\n<li>If you are checking if the data is present examining the <code>db</code> file directly, the data might not be there yet. Wait until you close the connection.</li>\n<li>Use a SQLiteBrowser to see if the data is present or not. You can check <a href=\"https://sqlitebrowser.org/\" rel=\"noreferrer\">SQLiteBrowser</a> or <a href=\"https://github.com/amitshekhariitbhu/Android-Debug-Database\" rel=\"noreferrer\">Android Debug Database</a></li>\n<li>Instead of using a SQLiteBrowser, you can simple check if the data is present from your Android app using a SELECT query.</li>\n</ol>\n\n<hr>\n\n<h2><strong>WAL and SHM files</strong></h2>\n\n<p>As you have noticed, in your db directory you can find three generated files:</p>\n\n<pre><code>your-database-name\nyour-database-name-shm\nyour-database-name-wal\n</code></pre>\n\n<p>However, the only important for you, where the data really is, is <code>your-database-name</code>.</p>\n\n<p>The <code>wal</code> file is used as a replacement of the <a href=\"https://www.sqlite.org/fileformat2.html#the_rollback_journal\" rel=\"noreferrer\">Rollback Journal</a>. </p>\n\n<blockquote>\n  <p>Beginning with version 3.7.0 (2010-07-21), SQLite supports a new transaction control mechanism called \"write-ahead log\" or \"WAL\". When a database is in WAL mode, all connections to that database must use the WAL. A particular database will use either a rollback journal or a WAL, but not both at the same time. The WAL is always located in the same directory as the database file and has the same name as the database file but with the string \"-wal\" appended.</p>\n</blockquote>\n\n<p>What you mention about not being able to see the data in your database file while the <code>wal</code> file is still there, and then you close the connection and the <code>wal</code> file is gone and the data is finally persisted in the database, <strong>is the proper behavior while using the <code>wal</code> mechanism.</strong></p>\n\n<p><em>WAL dissapears</em></p>\n\n<blockquote>\n  <p>The WAL file exists for as long as any database connection has the database open. Usually, the WAL file is deleted automatically when the last connection to the database closes. <a href=\"https://www.sqlite.org/wal.html#walfile\" rel=\"noreferrer\">(More here)</a></p>\n</blockquote>\n\n<p><em>Transaction not being written immediately to database file</em></p>\n\n<blockquote>\n  <p>The traditional rollback journal works by writing a copy of the original unchanged database content into a separate rollback journal file and then writing changes directly into the database file. In the event of a crash or ROLLBACK, the original content contained in the rollback journal is played back into the database file to revert the database file to its original state. The COMMIT occurs when the rollback journal is deleted.</p>\n  \n  <p>The WAL approach inverts this. The original content is preserved in\n  the database file and the changes are appended into a separate WAL\n  file. A COMMIT occurs when a special record indicating a commit is\n  appended to the WAL. <strong>Thus a COMMIT can happen without ever writing to\n  the original database, which allows readers to continue operating from\n  the original unaltered database while changes are simultaneously being\n  committed into the WAL</strong>. Multiple transactions can be appended to the\n  end of a single WAL file. </p>\n  \n  <p>Of course, one wants to eventually transfer all the transactions that are appended in the WAL file back into the original database.\n  <strong>Moving the WAL file transactions back into the database is called a\n  \"checkpoint\".</strong></p>\n  \n  <p><strong>By default, SQLite does a checkpoint automatically when the WAL file\n  reaches a threshold size of 1000 pages</strong>. (The\n  SQLITE_DEFAULT_WAL_AUTOCHECKPOINT compile-time option can be used to\n  specify a different default.) <strong>Applications using WAL do not have to do\n  anything in order to for these checkpoints to occur</strong>. But if they want\n  to, applications can adjust the automatic checkpoint threshold. Or\n  they can turn off the automatic checkpoints and run checkpoints during\n  idle moments or in a separate thread or process. <a href=\"https://www.sqlite.org/wal.html\" rel=\"noreferrer\">(More here)</a></p>\n</blockquote>\n\n<p>The <strong>SHM</strong> is just a temporary shared memory file, related to the WAL mechanism, whose only purpose is:</p>\n\n<blockquote>\n  <p>The shared-memory file contains no persistent content. The only purpose of the shared-memory file is to provide a block of shared memory for use by multiple processes all accessing the same database in WAL mode. <a href=\"https://www.sqlite.org/tempfiles.html#shared_memory_files\" rel=\"noreferrer\">(More here)</a></p>\n</blockquote>\n"}], "owner": {"reputation": 427, "user_id": 1860130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/847dc1cc346e1e7150c0cb924c836edc?s=128&d=identicon&r=PG", "display_name": "bernardo.g", "link": "https://stackoverflow.com/users/1860130/bernardo-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 2, "accepted_answer_id": 53725034, "answer_count": 1, "score": 3, "last_activity_date": 1544550075, "creation_date": 1544531141, "last_edit_date": 1544533615, "question_id": 53724204, "link": "https://stackoverflow.com/questions/53724204/calling-insert-in-a-room-database-does-not-complete-the-transaction", "title": "Calling &#39;insert&#39; in a room database does not complete the transaction", "body": "<p>I'm having a problem with a simple <code>@insert</code> operation in a Room database. These are my classes:</p>\n\n<p>The model class</p>\n\n<pre><code>@Entity(tableName = \"my_model\")\ndata class MyModel(\n    @PrimaryKey @ColumnInfo(name = \"id_model\") var uid: Int,\n    @ColumnInfo(name = \"name\") var firstName: String,\n    @ColumnInfo(name = \"last_name\") var lastName: String\n)\n</code></pre>\n\n<p>The DAO interface</p>\n\n<pre><code>interface MyModelDAO {\n    @Insert\n    fun createMyModel(myModel: MyModel)\n}\n</code></pre>\n\n<p>The database</p>\n\n<pre><code>@Database(\n    entities = [(MyModel::class)],\n    version = 1,\n    exportSchema = false\n)\nabstract class MyDb : RoomDatabase() {\n\n    companion object {\n        private var INSTANCE: MyDb? = null\n\n        fun getInstance(context: Context): MyDb? {\n            if (INSTANCE == null) {\n                synchronized(MyDb::class) {\n                    INSTANCE = Room.databaseBuilder(context.applicationContext,\n                        MyDb::class.java, \"mydb.db\")\n                        .allowMainThreadQueries()//for testing purposes only\n                        .build()\n                }\n            }\n            return INSTANCE\n        }\n\n        fun destroyInstance() {\n            INSTANCE = null\n        }\n    }\n\n\n    abstract fun getMyModelDao(): MyModelDAO\n}\n</code></pre>\n\n<p>And this is how I'm trying to insert an object.</p>\n\n<pre><code>val db = MinhaDb.getInstance(this)\ndb?.getMyModelDao()?.createMyModel(MyModel(111, \"john\", \"doe\"))\n</code></pre>\n\n<p>The thing is, the operation is not persisted in the db file. If I go into the <code>databases</code> folder, there is a <code>mydb</code> file, a <code>wal</code> and a <code>shm</code> file, and no tables are created in <code>mydb</code>.\nHowever, if i call <code>db?.close()</code> after the insert operation, the operation happens as its supposed to (the table is created and populated) and the <code>wal</code> and <code>shm</code> files are not there.</p>\n\n<p>What am I missing here? I'm pretty sure I shouldn't have to call <code>close()</code> on the database. I've tried surrounding the insert call with a <code>beginTransaction()</code> and a <code>endTransaction()</code> calls to see if it changed anything, but it didn't.</p>\n\n<p><strong>UPDATE:</strong>\nAs @musooff explained in the comments, apparently that's how sqlite dbs work. I queried the database after the insert calls and, indeed, the records where returned, even though the file itself seems empty.</p>\n"}, {"tags": ["android", "kotlin", "crashlytics", "google-fabric", "crashlytics-android"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544534365, "post_id": 53723215, "comment_id": 94303306, "body": "Have you checked <a href=\"https://stackoverflow.com/questions/42255778/crashlyticsandroid-clear-log-before-next-crash\">this</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544630745, "post_id": 53723215, "comment_id": 94346376, "body": "I did but didnt provide any userful info. In one of my classes where I am pulling the profile. I am setting the username/identifier etc for crashlytics. Upon logout how do I clean out these values or data?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544648002, "post_id": 53723215, "comment_id": 94355040, "body": "I updated my question in the hopes it will give clearer explanation"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544678481, "post_id": 53723215, "comment_id": 94363321, "body": "I think this <i>CrashlyticsCore.getInstance().setUserIdentifier(null)</i> should be worked."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544702699, "post_id": 53723215, "comment_id": 94374687, "body": "should i also clearout logexception or thats not necessary?  CrashlyticsCore.getInstance.logexception(null)"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544702742, "post_id": 53723215, "comment_id": 94374715, "body": "No. That&#39;s not necessary."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544704510, "post_id": 53723215, "comment_id": 94375598, "body": "also are you sure settng to null is a good idea and will clear out the data?"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544704639, "post_id": 53723215, "comment_id": 94375669, "body": "I don&#39;t think so. But as i know if we save our data in Shared preference and we want to clear data on logout then we can set empty value for that particular key. You can check <i>does it works or not?</i>. If we get good recommend way then we can implement that !"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544704954, "post_id": 53723215, "comment_id": 94375838, "body": "After using <i>CrashlyticsCore.getInstance().setUserIdentifier(null)</i>  did it work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544719641, "post_id": 53723215, "comment_id": 94384884, "body": "Ideally it is supposed to, but haven&#39;t tried. You never get any crashes when you need. do you happen to know if this 100% works or if theres a better solution"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1545037332, "post_id": 53723215, "comment_id": 94471919, "body": "What did the work ?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1544727201, "post_id": 53767237, "comment_id": 94388504, "body": "empty strings as in CrashlyticsCore.getInstance().setUserEmail(String.EMPTY)? or null will suffice"}, {"owner": {"reputation": 510, "user_id": 1180091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zDG4C.png?s=128&g=1", "display_name": "gicci", "link": "https://stackoverflow.com/users/1180091/gicci"}, "edited": false, "score": 0, "creation_date": 1544727383, "post_id": 53767237, "comment_id": 94388583, "body": "Reading the description I understand CrashlyticsCore.getInstance().setUserEmail(&quot;&quot;)"}], "tags": [], "owner": {"reputation": 510, "user_id": 1180091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zDG4C.png?s=128&g=1", "display_name": "gicci", "link": "https://stackoverflow.com/users/1180091/gicci"}, "is_accepted": true, "score": 2, "last_activity_date": 1544722252, "creation_date": 1544722252, "answer_id": 53767237, "question_id": 53723215, "link": "https://stackoverflow.com/questions/53723215/how-do-i-clear-out-my-data-on-app-signout-from-crashlytics/53767237#53767237", "title": "How do I clear out my data on app signout from crashlytics", "body": "<p>You should refer to the Firebase documentation for Crashlytics, as it is currently merged with Google's Firebase while the SDK has been left unchanged.\nThis specific functionality is documented <a href=\"https://firebase.google.com/docs/crashlytics/customize-crash-reports#android\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<blockquote>\n  <p>If you ever need to clear a user identifier after you set it, reset the value to a blank string. Clearing a user identifier does not remove existing Crashlytics records. If you need to delete records associated with a user ID, contact Firebase support.</p>\n</blockquote>\n\n<p>So you shall set the user identifiers to the empty string, to avoid new crash reports to contain the previously logged user data. Existing ones cannot be modified.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "accepted_answer_id": 53767237, "answer_count": 1, "score": 3, "last_activity_date": 1544722252, "creation_date": 1544527716, "last_edit_date": 1544647981, "question_id": 53723215, "link": "https://stackoverflow.com/questions/53723215/how-do-i-clear-out-my-data-on-app-signout-from-crashlytics", "title": "How do I clear out my data on app signout from crashlytics", "body": "<p>I am using fabric/crashlytics for log reporting. I am usually setting username, email,id etc once a user signs into my app. I was wondering if there is a way I can clear out my user data on app signout. I tried looking for a way /function to clear data on crashlytics but no luck. Any ideas?</p>\n\n<p>Currently I am setting username, email etc on my user profile page once a user signs in:</p>\n\n<pre><code>CrashlyticsCore.getInstance().setUserEmail(it.email)\n                        CrashlyticsCore.getInstance().setUserName(it.firstName)\n                        CrashlyticsCore.getInstance().setUserIdentifier(it.username)\n</code></pre>\n\n<p>and also once the app is launched I set this in my \"application\" class :</p>\n\n<pre><code>Fabric.with(this, CrashlyticsCore())\n</code></pre>\n\n<p>I want to keep the crashlytics running for the app but the user specific data cleared out upon logout. do I simply set it to null such that?</p>\n\n<pre><code>CrashlyticsCore.getInstance().setUserIdentifier(null) etc., \n</code></pre>\n\n<p>or is there some clearuser data param I can use in my logout function? </p>\n"}, {"tags": ["java", "junit", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 0, "creation_date": 1544526950, "post_id": 53722837, "comment_id": 94299387, "body": "IMHO, I don\u2019t think you should worry if b gets called. Instead focus on the conditions that lead to b being called (the negative of \u2018something\u2019 conditional) and then verify that you get the results you expected. The point of mocking is to allow you to simplify/control your dependency/coupling to the classes not under test. Additionally, you should, even though you don\u2019t want to, migrate the tests to focus on b that need to focus on b."}, {"owner": {"reputation": 948, "user_id": 8919323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792111867490136/picture?type=large", "display_name": "Micha\u0142 Pow\u0142oka", "link": "https://stackoverflow.com/users/8919323/micha%c5%82-pow%c5%82oka"}, "reply_to_user": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 0, "creation_date": 1544527559, "post_id": 53722837, "comment_id": 94299758, "body": "@JasonArmstrong Hey, this is a way but there are many many conditions that may lead to b() being called. In my real example it is more like &quot;if some argument is null, then give a quick answer and in any other case get b()&#39;s result&quot;. b() will response in a variety of ways, depending on given arguments. So to check this with returned value instead of checking if b() was called I would have to test multiple scenarios and this is basically copying b()&#39;s tests..."}, {"owner": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 0, "creation_date": 1544527916, "post_id": 53722837, "comment_id": 94299935, "body": "I understand what you\u2019re saying, but what are you really <b>unit</b> testing at that point a or b?"}, {"owner": {"reputation": 948, "user_id": 8919323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792111867490136/picture?type=large", "display_name": "Micha\u0142 Pow\u0142oka", "link": "https://stackoverflow.com/users/8919323/micha%c5%82-pow%c5%82oka"}, "reply_to_user": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 0, "creation_date": 1544527971, "post_id": 53722837, "comment_id": 94299968, "body": "I want to unit test a(). And requirement for a is to &quot;if some arguments are null then calculate something, other way call b()&quot;."}, {"owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "reply_to_user": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 1, "creation_date": 1544528089, "post_id": 53722837, "comment_id": 94300035, "body": "@JasonArmstrong While I agree with what you are saying in principle, there are times when we have to test difficult legacy code. That is what partial mocking was made for."}, {"owner": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "reply_to_user": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "edited": false, "score": 1, "creation_date": 1544528362, "post_id": 53722837, "comment_id": 94300191, "body": "@Dean I hear you and I agree, sometimes we have to choose an undesirable path, I was just wanted to call attention to it so when others come see this question they can make an informed choice."}, {"owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "reply_to_user": {"reputation": 878, "user_id": 10528457, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gwt129Pqj9o/AAAAAAAAAAI/AAAAAAAACBI/xmBemN7ifM8/photo.jpg?sz=128", "display_name": "Jason Armstrong", "link": "https://stackoverflow.com/users/10528457/jason-armstrong"}, "edited": false, "score": 0, "creation_date": 1544528424, "post_id": 53722837, "comment_id": 94300234, "body": "@JasonArmstrong Yes, you are right to do so."}], "answers": [{"comments": [{"owner": {"reputation": 948, "user_id": 8919323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792111867490136/picture?type=large", "display_name": "Micha\u0142 Pow\u0142oka", "link": "https://stackoverflow.com/users/8919323/micha%c5%82-pow%c5%82oka"}, "edited": false, "score": 0, "creation_date": 1544531371, "post_id": 53722934, "comment_id": 94301803, "body": "Thanks! It works and I voted up. I gave correct answer to @Dean because his answer was closer to question and for bringing up .thenCallRealMethod(), but your way works as well!"}], "tags": [], "owner": {"reputation": 38504, "user_id": 1602555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sjqZ.jpg?s=128&g=1", "display_name": "Karol Dowbecki", "link": "https://stackoverflow.com/users/1602555/karol-dowbecki"}, "is_accepted": false, "score": 2, "last_activity_date": 1544526864, "creation_date": 1544526864, "answer_id": 53722934, "question_id": 53722837, "link": "https://stackoverflow.com/questions/53722837/how-to-verify-with-mockito-that-another-public-method-of-sut-was-called-during-t/53722934#53722934", "title": "How to verify with Mockito that another public method of SUT was called during test", "body": "<p>You can make <code>A</code> a spy with <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.23.4/org/mockito/Spy.html\" rel=\"nofollow noreferrer\"><code>@Spy</code></a> or <code>Mockito.spy()</code>. This will allow you to invoke and test <code>a()</code> method logic but also replace <code>b()</code> with an invariant. This can be illustrated with a list:</p>\n\n<pre><code>List list = new LinkedList();\nList spy = Mockito.spy(list);\n\n// Impossible: real method is called so spy.get(0) throws IndexOutOfBoundsException (the list is yet empty)\nwhen(spy.get(0)).thenReturn(\"foo\");\n\n// You have to use doReturn() for stubbing\ndoReturn(\"foo\").when(spy).get(0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 948, "user_id": 8919323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792111867490136/picture?type=large", "display_name": "Micha\u0142 Pow\u0142oka", "link": "https://stackoverflow.com/users/8919323/micha%c5%82-pow%c5%82oka"}, "edited": false, "score": 0, "creation_date": 1544531319, "post_id": 53722963, "comment_id": 94301781, "body": "Hey, thanks! I had little troubles making it work, but only because of using Kotlin instead of Java. It is exactly what I needed :)"}], "tags": [], "owner": {"reputation": 1081, "user_id": 9080066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5hYG0.jpg?s=128&g=1", "display_name": "Dean", "link": "https://stackoverflow.com/users/9080066/dean"}, "is_accepted": true, "score": 3, "last_activity_date": 1544541444, "last_edit_date": 1544541444, "creation_date": 1544526937, "answer_id": 53722963, "question_id": 53722837, "link": "https://stackoverflow.com/questions/53722837/how-to-verify-with-mockito-that-another-public-method-of-sut-was-called-during-t/53722963#53722963", "title": "How to verify with Mockito that another public method of SUT was called during test", "body": "<p>Mockito and other kotlin mocking libraries provide partial mocking or similar functionality. You can specify real methods to be called, while the other methods remain stubs:</p>\n\n<p>Mockito java example:</p>\n\n<pre><code>A classUnderTest = mock(A.class);\nwhen(classUnderTest.a()).thenCallRealMethod();\n\nclassUnderTest.a();\nverify(classUnderTest).b()\n</code></pre>\n\n<p>See the mockito <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.23.4/org/mockito/Mockito.html#16\" rel=\"nofollow noreferrer\">Documentation</a> on partial mocking. Partial mocking is not encouraged because it does not fit good OOP design, but in your case it fit its intended purpose, which is to test difficult legacy code.</p>\n\n<p>Kotlin example with vanilla Mockito:</p>\n\n<pre><code>val classUnderTest = mock(A::class.java)\n`when`(classUnderTest.a()).thenCallRealMethod()\n\nclassUnderTest.a()\nverify(classUnderTest).b()\n</code></pre>\n\n<p><a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">mockito-kotlin</a> provides extensions that allow you to use mockito in a more kotlin idiomatic way. Unfortunately there does not appear to be a way to do partial mocking in a kotlin idiomatic way, but it can be achieved in mockito-kotlin like so:</p>\n\n<pre><code>val classUnderTest = mock&lt;A&gt;()\ndoCallRealMethod().whenever(classUnderTest).a()\n\nclassUnderTest.a()\nverify(classUnderTest).b()\n</code></pre>\n\n<p><a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">MockK</a>, an idiomatic kotlin mocking library, allows for this functionality with spys. After creating a <code>spy</code> of the class you can choose to stub methods:</p>\n\n<pre><code>val classUnderTest = spyk&lt;A&gt;()\nevery { classUnderTest.b() } returns 1L\n\nclassUnderTest.a()\nverify { classUnderTest.b() }\n</code></pre>\n"}], "owner": {"reputation": 948, "user_id": 8919323, "user_type": "registered", "profile_image": "https://graph.facebook.com/1792111867490136/picture?type=large", "display_name": "Micha\u0142 Pow\u0142oka", "link": "https://stackoverflow.com/users/8919323/micha%c5%82-pow%c5%82oka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 53722963, "answer_count": 2, "score": 0, "last_activity_date": 1544541444, "creation_date": 1544526502, "last_edit_date": 1544527895, "question_id": 53722837, "link": "https://stackoverflow.com/questions/53722837/how-to-verify-with-mockito-that-another-public-method-of-sut-was-called-during-t", "title": "How to verify with Mockito that another public method of SUT was called during test", "body": "<p>I am aware of duplicate, bo no answer about actual question was given there.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12429157/how-to-verify-if-method-is-called-on-system-under-test-not-a-mock\">How to verify if method is called on System under test (not a mock)</a></p>\n\n<p>I have a class:</p>\n\n<pre><code>class A {\n\n    public long a() {\n        if(something) {\n            return quicklyCalculatedResult\n        } else {\n            return b() run on separate thread, with this one blocked\n        }\n    }\n\n    public long b() {} //doStuffOnCurrentThread;\n\n}\n</code></pre>\n\n<p>I have a complete set of tests for b(), which does the heavy lifting. Unfortunately I have to make an ugly think like a() (legacy code) and I don't want to copy all the tests. Of method b(). Also, both of these need to be public.</p>\n\n<p>I want to verify that under certain circumstances a() calls b(), but I cannot do that, beacause tested class is not a mock. I need a way to verify that method was called on a real object, not only a mock.</p>\n"}, {"tags": ["kotlin", "hashmap"], "owner": {"reputation": 201, "user_id": 10357947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cf92af0e0b2ef672c98299da216b0a4?s=128&d=identicon&r=PG&f=1", "display_name": "Luja93", "link": "https://stackoverflow.com/users/10357947/luja93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1544523791, "answer_count": 0, "score": 1, "last_activity_date": 1544523352, "creation_date": 1544523352, "question_id": 53721901, "link": "https://stackoverflow.com/questions/53721901/cant-remove-items-from-kotlin-hashmap-after-the-items-have-been-modified", "closed_reason": "Duplicate", "title": "Can&#39;t remove items from Kotlin HashMap after the items have been modified", "body": "<p>I've created a HashMap in Kotlin, putting in the custom class types as the keys and the values. The HashMap is being stored in the presenter and updated by selecting and unselecting items from the adapter. </p>\n\n<p>It all works well until items in the adapter have been updated due to an API call. At that point, I am no longer able to remove items from the HashMap.</p>\n\n<p>The case is next: I select a couple of items and then update their attribute by making an API call. Adapter list is being refreshed and then, when I try to unselect an item, the change is not applied (item does not remove) in the HashMap in the presenter.</p>\n\n<p>That's why I am finding the HashMap Key by ID, which does not change at any time! The strange thing is that I am able to find the key using the Kotlin's <strong>find</strong> statement, but when I check if the HashMap <strong>contains</strong> the specific key, the result is <strong><em>false</em></strong>.</p>\n\n<p>*Note: addition and removal of items in the HashMap works well before updating the items in the adapter. Also, I solved the problem with a different approach, but I am interested in the background of it so if anyone has a clue what's going on here, bring it on! :-) </p>\n\n<pre><code>private val myHashMap: HashMap&lt;Class1, Class2&gt;) = hashMapOf()\nprivate val value: Class2 = Class2()\n\noverride fun updateHashMap(key: Class1, isAdded: Boolean) {\n        if (isAdded) myHashMap[key] = value\n        else {\n            // Finds the correct item.\n            val mKey = myHashMap.keys.find { it.id == key.id }\n            // Logs false.\n            Log.d(\"Does the key exist?\", \"${myHashMap.contains(mKey)}\")\n\n            // The removal should be applied..\n        }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-edittext", "focus", "back-button"], "comments": [{"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544523776, "post_id": 53721883, "comment_id": 94297551, "body": "<i>back button</i> means navigation back button?"}, {"owner": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544523900, "post_id": 53721883, "comment_id": 94297638, "body": "yes i mean the navigation button. Already updated my question"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544524358, "post_id": 53721883, "comment_id": 94297896, "body": "Might be it cause the focus issue. What have you set <i>softWindowInput</i>?"}, {"owner": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544524440, "post_id": 53721883, "comment_id": 94297942, "body": "android:windowSoftInputMode=&quot;adjustResize&quot;"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544524558, "post_id": 53721883, "comment_id": 94298019, "body": "Check with <i>adjustPan</i>"}, {"owner": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "reply_to_user": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "edited": false, "score": 0, "creation_date": 1544524706, "post_id": 53721883, "comment_id": 94298116, "body": "adjustPan does not work too"}, {"owner": {"reputation": 23894, "user_id": 1844392, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/2jBjo.png?s=128&g=1", "display_name": "Piyush", "link": "https://stackoverflow.com/users/1844392/piyush"}, "reply_to_user": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "edited": false, "score": 0, "creation_date": 1544524770, "post_id": 53721883, "comment_id": 94298152, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185061/discussion-between-piyush-and-sabina\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "is_accepted": true, "score": 2, "last_activity_date": 1544528445, "creation_date": 1544528445, "answer_id": 53723413, "question_id": 53721883, "link": "https://stackoverflow.com/questions/53721883/android-focus-navigation-back-button/53723413#53723413", "title": "Android - focus navigation back button", "body": "<p>I found the problem. When the user manually closes the keyboard the focus is still on the current edit text. So when he then presses the navigation back button the onKey event is fired, but i didn't handle the back key event. \nSo i just added following code and everything works fine:</p>\n\n<pre><code>else if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; event.action != KeyEvent.ACTION_DOWN){\n     activity?.onBackPressed()\n}\n</code></pre>\n"}], "owner": {"reputation": 268, "user_id": 9958517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e7TBA.jpg?s=128&g=1", "display_name": "Sabina", "link": "https://stackoverflow.com/users/9958517/sabina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 53723413, "answer_count": 1, "score": 4, "last_activity_date": 1544528445, "creation_date": 1544523305, "last_edit_date": 1544523870, "question_id": 53721883, "link": "https://stackoverflow.com/questions/53721883/android-focus-navigation-back-button", "title": "Android - focus navigation back button", "body": "<p>I have the following view:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rhBdR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rhBdR.png\" alt=\"Verification View\"></a></p>\n\n<p>when I click on one of the edit texts a soft keyboard appears. After closing this keyboard my navigation back button doesn't react when i click it. Before I click on one of the edit texts my back button works fine.</p>\n\n<p>The code of my \"verification\" fragment:</p>\n\n<pre><code>class VerifyPhoneFragment : Fragment() {\n\nlateinit var appContext: Context\nprivate var editTexts: ArrayList&lt;EditText&gt; = ArrayList()\nprivate var focusedElement: Int = 0\nprivate var verifyButton: TextView? = null\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                          savedInstanceState: Bundle?): View? {\n    val view = inflater.inflate(R.layout.fragment_verify_phone, container, false)\n\n    val backButton = view.findViewById&lt;TextView&gt;(R.id.backButtonAbout)\n    backButton.setOnClickListener {\n        activity!!.onBackPressed()\n    }\n\n    verifyButton = view.findViewById(R.id.btn_verify)\n    verifyButton?.setOnClickListener {\n        val dataConnection = DataConnection()\n        var code: String = \"\"\n        editTexts.forEach {\n            code += it.text.toString()\n        }\n\n        dataConnection.doGet(\"/phone/verification\",\n                hashMapOf(\"token\" to code),\n                { result: Any?, message: String -&gt;\n                    activity!!.runOnUiThread {\n                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()\n                        if(result != null &amp;&amp; result is Boolean &amp;&amp; result)\n                            activity!!.onBackPressed()\n                    }\n\n                }, Boolean::class.java)\n    }\n\n\n    editTexts.add(view.findViewById(R.id.editText1))\n    editTexts.add(view.findViewById(R.id.editText2))\n    editTexts.add(view.findViewById(R.id.editText3))\n    editTexts.add(view.findViewById(R.id.editText4))\n    editTexts.add(view.findViewById(R.id.editText5))\n    editTexts.add(view.findViewById(R.id.editText6))\n\n    editTexts.forEach { et -&gt;\n        et.isEnabled = false\n        et.setOnKeyListener(object : View.OnKeyListener {\n            override fun onKey(v: View, keyCode: Int, event: KeyEvent): Boolean {\n                if (keyCode == KeyEvent.KEYCODE_DEL &amp;&amp; event.action !=KeyEvent.ACTION_DOWN) {\n                    if((focusedElement &gt; 0 &amp;&amp; focusedElement != 5) || (focusedElement == 5 &amp;&amp; editTexts[focusedElement].text.toString().length == 0)) {\n                        focusedElement--\n                        editTexts[focusedElement].isEnabled = true\n                        editTexts[focusedElement].requestFocus()\n                        editTexts[focusedElement].setText(\"\")\n                        editTexts[focusedElement+1].isEnabled = false\n                    }\n                    else if(focusedElement == 5 &amp;&amp; editTexts[focusedElement].text.toString().length != 0){\n                        editTexts[focusedElement].setText(\"\")\n                    }\n                }\n                else if(keyCode &gt;= 7 &amp;&amp; keyCode &lt;= 16 &amp;&amp; event.action !=KeyEvent.ACTION_DOWN){\n                    if(focusedElement &lt; 5)\n                    {\n                        editTexts[focusedElement].setText((keyCode - 7).toString())\n                        focusedElement++\n                        editTexts[focusedElement].isEnabled = true\n                        editTexts[focusedElement].requestFocus()\n                        editTexts[focusedElement-1].isEnabled = false\n                    }\n                    else {\n                        editTexts[focusedElement].setText((keyCode - 7).toString())\n                        editTexts[focusedElement].clearFocus()\n                        hideKeyboard(editTexts[focusedElement])\n                    }\n                }\n                checkIfVerifyShouldBeEnabled()\n                return true\n            }\n        })\n    }\n    editTexts[focusedElement].isEnabled = true\n\n    return view\n}\n\nprivate fun hideKeyboard(view: View) {\n    val imm = view.context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n    imm.hideSoftInputFromWindow(view.windowToken, 0)\n}\n\nprivate fun checkIfVerifyShouldBeEnabled(){\n    if(editTexts[5].text.toString().length &gt; 0) {\n        verifyButton?.isEnabled = true\n        verifyButton?.setTextColor(resources.getColor(R.color.white))\n    }\n    else{\n        verifyButton?.isEnabled = false\n        verifyButton?.setTextColor(resources.getColor(R.color.grey))\n    }\n\n}\n\noverride fun onAttach(context: Context?) {\n    super.onAttach(context)\n    appContext = context!!\n}\n}\n</code></pre>\n\n<p>The code of my layout for this fragment:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\nandroid:orientation=\"vertical\"\nandroid:background=\"@drawable/background_payment_1\"&gt;\n\n&lt;android.support.v7.widget.Toolbar\n    android:id=\"@+id/toolbar6\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"?attr/actionBarSize\"\n    app:contentInsetStart=\"0dp\"&gt;\n\n    &lt;android.support.constraint.ConstraintLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/backButtonAbout\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_marginStart=\"10dp\"\n            android:includeFontPadding=\"false\"\n            android:text=\"@string/cancel\"\n            android:textColor=\"@color/white\"\n            android:textSize=\"19sp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_bias=\"0.3\" /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/btn_verify\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"center\"\n            android:layout_marginEnd=\"10dp\"\n            android:includeFontPadding=\"false\"\n            android:text=\"@string/verify\"\n            android:textColor=\"@color/grey\"\n            android:textSize=\"19sp\"\n            android:enabled=\"false\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintVertical_bias=\"0.3\" /&gt;\n\n    &lt;/android.support.constraint.ConstraintLayout&gt;\n&lt;/android.support.v7.widget.Toolbar&gt;\n\n&lt;TextView\n    android:id=\"@+id/textView3\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"8dp\"\n    android:layout_marginBottom=\"80dp\"\n    android:text=\"@string/verification_code\"\n    android:textColor=\"@color/white\"\n    style=\"@style/ToolBarHeaderText\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintHorizontal_bias=\"0.5\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:layout_constraintVertical_bias=\"0.49\"\n    app:layout_constraintVertical_chainStyle=\"spread\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/textView4\"\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"8dp\"\n    android:text=\"@string/message_phone_verification\"\n    android:textAlignment=\"center\"\n    android:textSize=\"18sp\"\n    android:textColor=\"@color/white\"\n    app:layout_constraintEnd_toEndOf=\"@+id/linearLayout\"\n    app:layout_constraintStart_toStartOf=\"@+id/linearLayout\"\n    app:layout_constraintTop_toBottomOf=\"@+id/textView3\" /&gt;\n\n&lt;android.support.constraint.ConstraintLayout\n    android:id=\"@+id/linearLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"45dp\"\n    android:layout_marginTop=\"30dp\"\n    android:layout_marginEnd=\"45dp\"\n    android:orientation=\"horizontal\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/textView4\"&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv1\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toStartOf=\"@+id/cv2\"\n        app:layout_constraintHorizontal_chainStyle=\"spread_inside\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText1\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv2\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toStartOf=\"@+id/cv3\"\n        app:layout_constraintStart_toEndOf=\"@+id/cv1\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText2\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv3\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toStartOf=\"@+id/cv4\"\n        app:layout_constraintStart_toEndOf=\"@+id/cv2\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText3\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv4\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toStartOf=\"@+id/cv5\"\n        app:layout_constraintStart_toEndOf=\"@+id/cv3\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText4\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv5\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toStartOf=\"@+id/cv6\"\n        app:layout_constraintStart_toEndOf=\"@+id/cv4\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"\n        android:inputType=\"number\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText5\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n    &lt;android.support.v7.widget.CardView\n        android:id=\"@+id/cv6\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"50dp\"\n        android:backgroundTint=\"#76FFFFFF\"\n        android:textColor=\"@color/white\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toEndOf=\"@+id/cv5\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:cardCornerRadius=\"5dp\"\n        app:cardElevation=\"0dp\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/editText6\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:textColor=\"@color/white\"\n            android:background=\"@color/transparent\"\n            android:textAlignment=\"center\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/android.support.v7.widget.CardView&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>So my question is, how do I get the focus of my navigation back button? Or is it a focus problem at all? \nBtw, the cancel button always works fine!</p>\n"}, {"tags": ["function", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10573904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXayysZUgvs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbALM2XECSLGBrgZwWj5aydumuU8Ig/mo/photo.jpg?sz=128", "display_name": "Mugong", "link": "https://stackoverflow.com/users/10573904/mugong"}, "edited": false, "score": 0, "creation_date": 1544521923, "post_id": 53719699, "comment_id": 94296433, "body": "fun start2(msg: String) = this::showLoadingDialog\uff0cI write this method , compile ok ! there is no <code>override</code> !"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 3, "user_id": 10573904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXayysZUgvs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbALM2XECSLGBrgZwWj5aydumuU8Ig/mo/photo.jpg?sz=128", "display_name": "Mugong", "link": "https://stackoverflow.com/users/10573904/mugong"}, "edited": false, "score": 0, "creation_date": 1544522378, "post_id": 53719699, "comment_id": 94296734, "body": "@Mugong This is because <code>start</code> require a return type of <code>Unit</code> and you override it, it cannot be changed. <code>start2</code> is not a override function. If you mouse over <code>start2</code>, you can see the return type is <code>KFunction0&lt;Unit&gt;</code> because Kotlin can detect the type for you even you did not write it. If you state <code>fun start2(msg: String): Unit = this::showLoadingDialog</code>, then there will be error."}, {"owner": {"reputation": 3, "user_id": 10573904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXayysZUgvs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbALM2XECSLGBrgZwWj5aydumuU8Ig/mo/photo.jpg?sz=128", "display_name": "Mugong", "link": "https://stackoverflow.com/users/10573904/mugong"}, "edited": false, "score": 0, "creation_date": 1544522616, "post_id": 53719699, "comment_id": 94296885, "body": "thanks ! I know ! no <code>override </code> kotlin use Type inference determine the result type!"}, {"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "reply_to_user": {"reputation": 3, "user_id": 10573904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXayysZUgvs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbALM2XECSLGBrgZwWj5aydumuU8Ig/mo/photo.jpg?sz=128", "display_name": "Mugong", "link": "https://stackoverflow.com/users/10573904/mugong"}, "edited": false, "score": 0, "creation_date": 1544522715, "post_id": 53719699, "comment_id": 94296951, "body": "@Mugong Well, almost in every language if you override a function, it needs to have same arguments and return the same type. Also, please mark this as answer if it solved your problem. :)"}], "tags": [], "owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "is_accepted": true, "score": 3, "last_activity_date": 1544515199, "creation_date": 1544515199, "answer_id": 53719699, "question_id": 53718415, "link": "https://stackoverflow.com/questions/53718415/what-diffrence-between-override-method-and-general-method-in-kotlin/53719699#53719699", "title": "what diffrence between override method and general method in kotlin?", "body": "<p>This is incorrect because <code>start</code> is not a variable but it is a function.</p>\n\n<pre><code>override fun start(msg: String) = showMethod\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>override fun start(msg: String) {\n    return showMethod\n}\n</code></pre>\n\n<p>which is incorrect. <code>start</code> should return <code>Unit</code> instead of <code>(String) -&gt; Unit</code></p>\n\n<p>What you are trying to do is </p>\n\n<pre><code>override fun start(msg: String) {\n    return showMethod(msg)\n}\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>override fun start(msg: String) = showMethod(msg)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10573904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gXayysZUgvs/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbALM2XECSLGBrgZwWj5aydumuU8Ig/mo/photo.jpg?sz=128", "display_name": "Mugong", "link": "https://stackoverflow.com/users/10573904/mugong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53719699, "answer_count": 1, "score": 0, "last_activity_date": 1544515199, "creation_date": 1544508926, "last_edit_date": 1544514945, "question_id": 53718415, "link": "https://stackoverflow.com/questions/53718415/what-diffrence-between-override-method-and-general-method-in-kotlin", "title": "what diffrence between override method and general method in kotlin?", "body": "<p><img src=\"https://i.stack.imgur.com/yxwQv.png\" alt=\"Screen Shot\"></p>\n\n<pre><code>val showMethod:(String) -&gt; Unit = this::showLoadingDialog\noverride fun start(msg: String) = showMethod\n</code></pre>\n\n<p>I want to use start method = this::showLoadingDialog ,\nbut get a compile error! the method is not a subtype of overridden ***!</p>\n\n<p>why? how can I do?</p>\n"}, {"tags": ["kotlin", "documentation", "ktor", "kdoc"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1544521925, "creation_date": 1544521925, "answer_id": 53721453, "question_id": 53717450, "link": "https://stackoverflow.com/questions/53717450/documenting-ktor-routes-with-kdoc/53721453#53721453", "title": "Documenting Ktor routes with KDoc", "body": "<p>Dokka has no support for Ktor routes, and I'm not aware of any plans to add such support, so there's no way to include information about routes into the generated documentation.</p>\n"}], "owner": {"reputation": 503, "user_id": 9893963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hJRnA.jpg?s=128&g=1", "display_name": "NathanPB", "link": "https://stackoverflow.com/users/9893963/nathanpb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 53721453, "answer_count": 1, "score": 4, "last_activity_date": 1544521925, "creation_date": 1544503081, "last_edit_date": 1544520336, "question_id": 53717450, "link": "https://stackoverflow.com/questions/53717450/documenting-ktor-routes-with-kdoc", "title": "Documenting Ktor routes with KDoc", "body": "<p>Does anyone know whats the correct way to document Ktor routes, aiming to show it on KDoc?\nExample:</p>\n\n<pre><code>route(DogoBot.data.API.ROUTE){\n    route(\"token\"){\n        route(\"add\"){\n            get(\"fromdiscord\") { ... }\n            get { ... }\n        }\n    }\n    route(\"user\"){\n        route(\"{id}\") {\n            get { ... }\n        }\n    }\n    route(\"guild\"){\n        route(\"{id}\") {\n            get { ... }\n        }\n     }\n}\n</code></pre>\n\n<p>Well, if is it possible, how do I do this? Which type of information should I put in it? How do I implement that Ktor compatibility in other things? (I have another router made by my own for other things)</p>\n"}, {"tags": ["kotlin", "synchronized"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544495228, "post_id": 53716187, "comment_id": 94287113, "body": "<code>Thread.interrupt</code> may return before the thread is stopped. Here I don&#39;t see a reason why the threads would stop at all. Does the program really terminate normally?"}, {"owner": {"reputation": 23, "user_id": 10773471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RxOk-VSt7nQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h_Fu8Z7trgDDrNvKd_FV68sFdAiw/mo/photo.jpg?sz=128", "display_name": "Volodymyr Shykun", "link": "https://stackoverflow.com/users/10773471/volodymyr-shykun"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544496817, "post_id": 53716187, "comment_id": 94287405, "body": "@MichaelButscher hm, threads really don&#39;t stop working after <code>Thread.interrupt</code>. Is there a better approach to stop threads?"}, {"owner": {"reputation": 23, "user_id": 10773471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RxOk-VSt7nQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h_Fu8Z7trgDDrNvKd_FV68sFdAiw/mo/photo.jpg?sz=128", "display_name": "Volodymyr Shykun", "link": "https://stackoverflow.com/users/10773471/volodymyr-shykun"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1544497033, "post_id": 53716187, "comment_id": 94287451, "body": "@MichaelButscher just tried <code>Thread.stop</code>. It now stops threads, but this method is deprecated and output is still wrong"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1544498944, "post_id": 53716187, "comment_id": 94287814, "body": "Try to replace <code>while(true)</code> with <code>while(!Thread.interrupted())</code>, use <code>thread.interrupt()</code> again instead of <code>stop()</code> and <code>thread.join()</code> after that to wait for termination."}], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": true, "score": 1, "last_activity_date": 1544523169, "creation_date": 1544523169, "answer_id": 53721842, "question_id": 53716187, "link": "https://stackoverflow.com/questions/53716187/kotlin-synchronized-doesnt-work-properly/53721842#53721842", "title": "Kotlin synchronized doesn&#39;t work properly", "body": "<p>I think it might be better to manually signal to the thread that it should finish its work by having it contain some flag that it refers to in order to know when to quit the loop. For example:</p>\n\n<pre><code>class Impurity(var currentCell: Int) {\n    ...\n    private var _continue = true\n\n    fun startMoving() {\n        thread = Thread {\n            while (_continue) {\n        }\n    }\n\n    ...\n\n    fun stopMoving() {\n        _continue = false\n    }\n}\n</code></pre>\n\n<p>Additionally, you might also want to wait till the actual thread itself dies as part of the call to <code>stopMoving</code>. This will ensure that all the threads have definitely received the signal and quit their loops, before you call <code>Cells.printCells</code>. For example you could add this method to the <code>Impurity</code> class:</p>\n\n<pre><code>fun waitForEnded() = thread.join()\n</code></pre>\n\n<p>And you could update <code>stopMoving</code> in the main class to call this method after signaling to each thread to stop:</p>\n\n<pre><code>private fun stopMoving(impurities: ArrayList&lt;Impurity&gt;) {\n    for (impurity in impurities)\n        impurity.stopMoving()\n    impurities.forEach(Impurity::waitForEnded)\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10773471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RxOk-VSt7nQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h_Fu8Z7trgDDrNvKd_FV68sFdAiw/mo/photo.jpg?sz=128", "display_name": "Volodymyr Shykun", "link": "https://stackoverflow.com/users/10773471/volodymyr-shykun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 53721842, "answer_count": 1, "score": 1, "last_activity_date": 1544523169, "creation_date": 1544492560, "question_id": 53716187, "link": "https://stackoverflow.com/questions/53716187/kotlin-synchronized-doesnt-work-properly", "title": "Kotlin synchronized doesn&#39;t work properly", "body": "<p>I'm trying to create a simple program, which is model of Brownian motion using concurrency (impurities randomly move left and right in cells). I have Impurity and Cells classes. Cell class contains cell array which mean how many impurities in each cell at the moment. Each Impurity object changes cell array in Cells in own thread. I'm starting threads and they are running in infinite loop for 1 seconds. But before and after this I print sum of impurities in cells and these values not equal, which means I do something wrong with synchronisation. Here is code: </p>\n\n<p>Cells class:</p>\n\n<pre><code>object Cells {\n    var cell = Array(N) { 0 }\n\n    fun addImpurity(impurity: Impurity) {\n        cell[impurity.currentCell]++\n    }\n\n    @Synchronized\n    fun move(impurity: Impurity, direction: Direction) {\n            if (direction == Direction.LEFT &amp;&amp; impurity.currentCell &gt; 0) {\n                cell[impurity.currentCell]--\n                cell[impurity.currentCell - 1]++\n\n                impurity.currentCell--\n            } else if (direction == Direction.RIGHT &amp;&amp; impurity.currentCell &lt; N - 1) {\n                cell[impurity.currentCell]--\n                cell[impurity.currentCell + 1]++\n\n                impurity.currentCell++\n            }\n            Unit\n    }\n\n    fun printCells() {\n        for (c in cell)\n            print(\"$c \")\n    }\n}\n\nenum class Direction {\n    LEFT, RIGHT\n}\n</code></pre>\n\n<p>Impurity class:</p>\n\n<pre><code>class Impurity(var currentCell: Int) {\n    private lateinit var thread: Thread\n\n    init {\n        Cells.addImpurity(this)\n    }\n\n    fun startMoving() {\n        thread = Thread {\n            while (true) {\n                if (random() &gt; P)\n                    Cells.move(this, Direction.RIGHT)\n                else\n                    Cells.move(this, Direction.LEFT)\n            }\n        }\n\n        thread.start()\n\n    }\n\n    fun stopMoving() = thread.interrupt()\n}\n</code></pre>\n\n<p>and Main:</p>\n\n<pre><code>const val N = 10\nconst val K = 15\nconst val P = 0.5\n\nfun main(args: Array&lt;String&gt;) {\n    val impurities = ArrayList&lt;Impurity&gt;()\n\n    for (i in 1..K)\n        impurities.add(Impurity(0))\n\n    println(Cells.cell.sum())\n\n    startMoving(impurities)\n\n    Thread.sleep(1000)\n\n    stopMoving(impurities)\n\n    Cells.printCells()\n\n    println(Cells.cell.sum())\n}\n\nprivate fun startMoving(impurities: ArrayList&lt;Impurity&gt;) {\n    for (impurity in impurities)\n        impurity.startMoving()\n}\n\nprivate fun stopMoving(impurities: ArrayList&lt;Impurity&gt;) {\n    for (impurity in impurities)\n        impurity.stopMoving()\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "dagger-2"], "comments": [{"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 1, "creation_date": 1544494187, "post_id": 53715548, "comment_id": 94286911, "body": "Hello! I think this is a good question\u2014you&#39;ve done research and provided a lot of code. Per <a href=\"https://meta.stackoverflow.com/q/303812/1426891\">this meta discussion</a>, can you please copy and paste your code to make it more searchable and accessible instead of including it in images/screenshots? This would also help answerers copy/paste your example so they can diagnose your problem and test their answers. Thank you!"}, {"owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544512130, "post_id": 53715548, "comment_id": 94291513, "body": "also provide your ViewModelFactory class"}, {"owner": {"reputation": 172, "user_id": 8473860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WYkpg.png?s=128&g=1", "display_name": "Sergey Grishin", "link": "https://stackoverflow.com/users/8473860/sergey-grishin"}, "reply_to_user": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 0, "creation_date": 1544714015, "post_id": 53715548, "comment_id": 94381492, "body": "@JeffBowman, I updated my question see it , please"}, {"owner": {"reputation": 172, "user_id": 8473860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WYkpg.png?s=128&g=1", "display_name": "Sergey Grishin", "link": "https://stackoverflow.com/users/8473860/sergey-grishin"}, "reply_to_user": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544714191, "post_id": 53715548, "comment_id": 94381611, "body": "@ShwetaChauhan, I updated my question, see it, please"}, {"owner": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 0, "creation_date": 1544716383, "post_id": 53715548, "comment_id": 94383065, "body": "@Sergey I don&#39;t know the answer; I upvoted shortly after the edit. I&#39;m unfamiliar with Kotlin, and I have a hunch that Kotlin&#39;s type transformations are interfering with Dagger&#39;s multibindings here. The code otherwise looks pretty reasonable."}, {"owner": {"reputation": 172, "user_id": 8473860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WYkpg.png?s=128&g=1", "display_name": "Sergey Grishin", "link": "https://stackoverflow.com/users/8473860/sergey-grishin"}, "reply_to_user": {"reputation": 73871, "user_id": 1426891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gFJE8.png?s=128&g=1", "display_name": "Jeff Bowman", "link": "https://stackoverflow.com/users/1426891/jeff-bowman"}, "edited": false, "score": 1, "creation_date": 1544724291, "post_id": 53715548, "comment_id": 94387156, "body": "@JeffBowman, all in all, thank you for spending time to my question. You made a good advice: try to rewrite this to Java. To be honest, I don&#39;t know, will this help, but try"}, {"owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544760299, "post_id": 53715548, "comment_id": 94398230, "body": "@SergeyGrishin : I want to suggest you to change in ViewModelFactory but I don&#39;t know that help you or not just want to try it. Change ViewModelFactory like this : <a href=\"https://gist.github.com/tinmegali/899aca5d240d3a92efd060f87831a32e\" rel=\"nofollow noreferrer\">gist.github.com/tinmegali/899aca5d240d3a92efd060f87831a32e</a>"}, {"owner": {"reputation": 172, "user_id": 8473860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WYkpg.png?s=128&g=1", "display_name": "Sergey Grishin", "link": "https://stackoverflow.com/users/8473860/sergey-grishin"}, "reply_to_user": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544766058, "post_id": 53715548, "comment_id": 94399441, "body": "@ShwetaChauhan, thank you, I will try it and describe results"}, {"owner": {"reputation": 453, "user_id": 9312502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djkqo.png?s=128&g=1", "display_name": "denizs", "link": "https://stackoverflow.com/users/9312502/denizs"}, "edited": false, "score": 0, "creation_date": 1555588972, "post_id": 53715548, "comment_id": 98167988, "body": "i have same problem with kotlin 1.3.30 version. wh? downgrade to 1.3.21 it&#39;s work"}, {"owner": {"reputation": 2242, "user_id": 2184088, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/6l6Ci.png?s=128&g=1", "display_name": "Juan Mendez", "link": "https://stackoverflow.com/users/2184088/juan-mendez"}, "edited": false, "score": 0, "creation_date": 1558563602, "post_id": 53715548, "comment_id": 99147711, "body": "Yes, the same issue happened to me in 1.3.30, and the downgrade prevented it"}, {"owner": {"reputation": 799, "user_id": 5040556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1773b4cecf543a7e334240f46fd6d113?s=128&d=identicon&r=PG&f=1", "display_name": "Daniele", "link": "https://stackoverflow.com/users/5040556/daniele"}, "edited": false, "score": 0, "creation_date": 1591613558, "post_id": 53715548, "comment_id": 110112659, "body": "Please check at this <a href=\"https://stackoverflow.com/questions/55669810/dagger-missingbinding-java-util-mapjava-lang-class-extends-viewmodel-provide/62260147#62260147\" title=\"dagger missingbinding java util mapjava lang class extends viewmodel provide\">stackoverflow.com/questions/55669810/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1660, "user_id": 1240502, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf81a316fcdf35926634e64732781211?s=128&d=identicon&r=PG", "display_name": "Aaron Thompson", "link": "https://stackoverflow.com/users/1240502/aaron-thompson"}, "reply_to_user": {"reputation": 453, "user_id": 9312502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/djkqo.png?s=128&g=1", "display_name": "denizs", "link": "https://stackoverflow.com/users/9312502/denizs"}, "edited": false, "score": 0, "creation_date": 1556005767, "post_id": 55710101, "comment_id": 98280757, "body": "Yes, dagger 2.21 and Kotlin 1.3.30"}], "tags": [], "owner": {"reputation": 1660, "user_id": 1240502, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf81a316fcdf35926634e64732781211?s=128&d=identicon&r=PG", "display_name": "Aaron Thompson", "link": "https://stackoverflow.com/users/1240502/aaron-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1555423443, "creation_date": 1555423443, "answer_id": 55710101, "question_id": 53715548, "link": "https://stackoverflow.com/questions/53715548/dagger-cant-provide-mapjava-lang-class-extends-android-arch-lifecycle-viewm/55710101#55710101", "title": "Dagger: Can&#39;t provide Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt; without an @Provides-annotated method", "body": "<p>I fixed the same issue I was having by switching the ViewModelFactory.kt and ViewModelsFactoryModule.kt to java.</p>\n\n<p>ViewModelFactory.java</p>\n\n<pre><code>@Singleton\npublic class ViewModelFactory implements ViewModelProvider.Factory {\n    private final Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators;\n\n    @Inject\n    ViewModelFactory(Map&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; creators) {\n        this.creators = creators;\n    }\n\n    @NonNull\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\n        Provider&lt;? extends ViewModel&gt; creator = creators.get(modelClass);\n        if (creator == null) {\n            for (Map.Entry&lt;Class&lt;? extends ViewModel&gt;, Provider&lt;ViewModel&gt;&gt; entry : creators.entrySet()) {\n                if (modelClass.isAssignableFrom(entry.getKey())) {\n                    creator = entry.getValue();\n                    break;\n                }\n            }\n        }\n        if (creator == null) {\n            throw new IllegalArgumentException(\"unknown model class \" + modelClass);\n        }\n        try {\n            return (T) creator.get();\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>ViewModelsFactoryModule.java</p>\n\n<pre><code>@Module\nabstract class ViewModelModule {\n\n    @NonNull\n    @Binds\n    @IntoMap\n    @ViewModelKey(StoreViewModelImpl.class)\n    abstract ViewModel bindLauncherViewModel(StoreViewModelImpl viewModel);\n\n    @NonNull\n    @Binds\n    abstract ViewModelProvider.Factory bindViewModelFactory(ViewModelFactory viewModelFactory);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2242, "user_id": 2184088, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/6l6Ci.png?s=128&g=1", "display_name": "Juan Mendez", "link": "https://stackoverflow.com/users/2184088/juan-mendez"}, "is_accepted": false, "score": 0, "last_activity_date": 1558565736, "last_edit_date": 1558565736, "creation_date": 1558564814, "answer_id": 56265871, "question_id": 53715548, "link": "https://stackoverflow.com/questions/53715548/dagger-cant-provide-mapjava-lang-class-extends-android-arch-lifecycle-viewm/56265871#56265871", "title": "Dagger: Can&#39;t provide Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt; without an @Provides-annotated method", "body": "<p>You don't have to switch to Java, and simply use <code>kotlin 1.3.31</code> to have it fixed. <a href=\"https://github.com/google/dagger/issues/1478#issuecomment-486712176\" rel=\"nofollow noreferrer\">https://github.com/google/dagger/issues/1478#issuecomment-486712176</a></p>\n\n<p>include the following Jvm annotation</p>\n\n<pre><code>Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1079, "user_id": 7787620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0yDI8.jpg?s=128&g=1", "display_name": "yash786", "link": "https://stackoverflow.com/users/7787620/yash786"}, "is_accepted": false, "score": 0, "last_activity_date": 1562242831, "creation_date": 1562242831, "answer_id": 56887833, "question_id": 53715548, "link": "https://stackoverflow.com/questions/53715548/dagger-cant-provide-mapjava-lang-class-extends-android-arch-lifecycle-viewm/56887833#56887833", "title": "Dagger: Can&#39;t provide Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt; without an @Provides-annotated method", "body": "<pre><code>No need to use @JvmSuppressWildcards. As the day of my Post my Kotlin version\n is : '1.3.40'\n\n Use dagger dependency in build.gradle\n\n apply plugin: 'kotlin-kapt'\n\n //Dagger dependencies\nimplementation 'com.google.dagger:dagger:2.22.1'\nkapt 'com.google.dagger:dagger-compiler:2.22.1'\n\nimplementation 'com.google.dagger:dagger-android:2.22'\nimplementation 'com.google.dagger:dagger-android-support:2.22' // if you use the support libraries\nkapt 'com.google.dagger:dagger-android-processor:2.22'\n\n\nAnd for Java use the following dagger dependency\n\n //Dagger dependencies\nimplementation 'com.google.dagger:dagger:2.22.1'\nannotationProcessor 'com.google.dagger:dagger-compiler:2.22.1'\n\nimplementation 'com.google.dagger:dagger-android:2.22'\nimplementation 'com.google.dagger:dagger-android-support:2.22' // if you use the support libraries\nannotationProcessor 'com.google.dagger:dagger-android-processor:2.22'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 627, "user_id": 12397978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8yN1Y.jpg?s=128&g=1", "display_name": "USMAN osman", "link": "https://stackoverflow.com/users/12397978/usman-osman"}, "is_accepted": false, "score": 0, "last_activity_date": 1576568830, "creation_date": 1576568830, "answer_id": 59369672, "question_id": 53715548, "link": "https://stackoverflow.com/questions/53715548/dagger-cant-provide-mapjava-lang-class-extends-android-arch-lifecycle-viewm/59369672#59369672", "title": "Dagger: Can&#39;t provide Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt; without an @Provides-annotated method", "body": "<p>Your dependency version might be different, for instance your core/compiler versions are 2.22 or some other but your android versions are 2.16 this might be causing the exception as well, just do this:<br/>\nfrom this</p>\n\n<pre><code>    implementation 'com.google.dagger:dagger:2.22'\n    kapt 'com.google.dagger:dagger-compiler:2.22'\n    // For android\n    implementation 'com.google.dagger:dagger-android:2.16'\n    implementation 'com.google.dagger:dagger-android-support:2.16'\n    // if you use the support libraries\n    kapt 'com.google.dagger:dagger-android-processor:2.16'\n</code></pre>\n\n<p>to this</p>\n\n<pre><code> //Dagger 2\n    implementation 'com.google.dagger:dagger:2.22'\n    kapt 'com.google.dagger:dagger-compiler:2.22'\n    // For android\n    implementation 'com.google.dagger:dagger-android:2.22'\n    implementation 'com.google.dagger:dagger-android-support:2.22'\n    // if you use the support libraries\n    kapt 'com.google.dagger:dagger-android-processor:2.22'\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 8473860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WYkpg.png?s=128&g=1", "display_name": "Sergey Grishin", "link": "https://stackoverflow.com/users/8473860/sergey-grishin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 848, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1576568830, "creation_date": 1544486666, "last_edit_date": 1544532396, "question_id": 53715548, "link": "https://stackoverflow.com/questions/53715548/dagger-cant-provide-mapjava-lang-class-extends-android-arch-lifecycle-viewm", "title": "Dagger: Can&#39;t provide Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt; without an @Provides-annotated method", "body": "<p>I've tried, to create several components. First will store main parts of app, like ViewModel's Fabric, Context, other settings. Other components -- component per screen. So, f.ex. I have FirstScreen. I've tried to create component with its ViewModel:</p>\n\n<pre><code>@Subcomponent(modules = [StoreModule::class])\n@StoreScope\ninterface StoreComponent {\n\n    fun inject(activity: MainActivity)\n\n    fun inject(fragment: StoreFragment)\n\n    @Subcomponent.Builder\n    interface Builder {\n\n        fun build(): StoreComponent\n\n    }\n\n}\n</code></pre>\n\n<p>So, StoreViewModel, as its dependency, StoreRepository, builds in module of StoreComponent:</p>\n\n<pre><code>@Module\nabstract class StoreModule {\n\n    @Binds\n    @IntoMap\n    @ViewModelKey(StoreViewModelImpl::class)\n    abstract fun getStoreViewModel(viewModel: StoreViewModelImpl): ViewModel\n\n    @Binds\n    @StoreScope\n    abstract fun getStoreRepository(repository: StoreRepositoryImpl): StoreRepository\n\n}\n</code></pre>\n\n<p>And this is AppComponent:</p>\n\n<pre><code>@Component(modules = [\n    GsonModule::class,\n    RetrofitModule::class,\n    ViewModelsFactoryModule::class,\n    CiceroneModule::class\n])\n@Singleton\ninterface AppComponent {\n\n    fun getStoreComponentBuilder(): StoreComponent.Builder\n\n}\n</code></pre>\n\n<p>Here buildes ViewModel's Factory:</p>\n\n<pre><code>@Module\nabstract class ViewModelsFactoryModule {\n\n    @Target(AnnotationTarget.FUNCTION,\n            AnnotationTarget.PROPERTY_GETTER,\n            AnnotationTarget.PROPERTY_SETTER\n    )\n    @Retention(AnnotationRetention.RUNTIME)\n    @MapKey\n    internal annotation class ViewModelKey(val value: KClass&lt;out ViewModel&gt;)\n\n\n    @Binds\n    abstract fun getViewModelFactory(factory: ViewModelFactory): ViewModelProvider.Factory\n\n}\n</code></pre>\n\n<p>But, when I try to build project, I have en error, that dagger can't provide <code>Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;</code> into ViewModelFactory-class without @Provides-annonated method.</p>\n\n<pre><code>error: [com.sagrishin.smartreader.di.components.StoreComponent.inject(com.sagrishin.smartreader.presentation.fragments.StoreFragment)] java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; cannot be provided without an @Provides-annotated method.\npublic abstract interface AppComponent {\n                ^\n      java.util.Map&lt;java.lang.Class&lt;? extends android.arch.lifecycle.ViewModel&gt;,javax.inject.Provider&lt;android.arch.lifecycle.ViewModel&gt;&gt; is injected at\n          com.sagrishin.smartreader.presentation.viewmodels.factory.ViewModelFactory.&lt;init&gt;(creators)\n      com.sagrishin.smartreader.presentation.viewmodels.factory.ViewModelFactory is injected at\n          com.sagrishin.smartreader.presentation.fragments.StoreFragment.viewModelsFactory\n      com.sagrishin.smartreader.presentation.fragments.StoreFragment is injected at\n          com.sagrishin.smartreader.di.components.StoreComponent.inject(fragment)\n</code></pre>\n\n<p>UPD: viewmodel factory:</p>\n\n<pre><code>typealias ViewModelsProvidersMap =\n        Map&lt;Class&lt;out ViewModel&gt;, @JvmSuppressWildcards Provider&lt;ViewModel&gt;&gt;\n\n\n@Singleton\nclass ViewModelFactory : ViewModelProvider.Factory {\n\n    private val creators: ViewModelsProvidersMap\n\n    @Inject\n    constructor(creators: ViewModelsProvidersMap) {\n        this.creators = creators\n    }\n\n    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        var creator: Provider&lt;out ViewModel&gt;? = creators[modelClass]\n        if (creator == null) {\n            for ((key, value) in creators) {\n                if (modelClass.isAssignableFrom(key)) {\n                    creator = value\n                    break\n                }\n            }\n        }\n        if (creator == null) {\n            throw IllegalArgumentException(\"unknown model class $modelClass\")\n        }\n        try {\n            return creator.get() as T\n        } catch (e: Exception) {\n            throw RuntimeException(e)\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["gradle", "npm", "kotlin", "jar", "kotlin-js"], "answers": [{"tags": [], "owner": {"reputation": 17624, "user_id": 360811, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/M35XG.jpg?s=128&g=1", "display_name": "shabunc", "link": "https://stackoverflow.com/users/360811/shabunc"}, "is_accepted": false, "score": 1, "last_activity_date": 1548331007, "creation_date": 1548331007, "answer_id": 54346121, "question_id": 53715402, "link": "https://stackoverflow.com/questions/53715402/how-to-pack-javascript-dependencies-into-kotlin-js-project-jar/54346121#54346121", "title": "How to pack javascript dependencies into Kotlin JS project JAR?", "body": "<p>Well actually you have a lot of options but the simplest one is to copy all you need in <code>processResources</code> task, something like:</p>\n\n<pre><code>processResources {\n  from ('/some/js/resources') {\n    include '**/*.js'\n  }\n}\n</code></pre>\n\n<p>This way any file will end up in the jar. However, keep in mind that as of now this won't affect running configurations in IntelliJ IDEA. That said, if you have running configuration even if it is based on gradle build this files still will be missed and this problem should be address differently. </p>\n\n<p>The other useful technique is store this dependencies in a separate jar (possibly even in a different subproject) and have this jar as a runtime dependency. </p>\n"}], "owner": {"reputation": 3788, "user_id": 2067157, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wZBy6.jpg?s=128&g=1", "display_name": "Allan Veloso", "link": "https://stackoverflow.com/users/2067157/allan-veloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1548331007, "creation_date": 1544485598, "question_id": 53715402, "link": "https://stackoverflow.com/questions/53715402/how-to-pack-javascript-dependencies-into-kotlin-js-project-jar", "title": "How to pack javascript dependencies into Kotlin JS project JAR?", "body": "<p>I am making some kotlin JS wrappers for Firebase Javascript SDK. So I created the project with the external keyword and @file:JsModule annotation, something like that:</p>\n\n<pre><code>@file:JsModule(\"@firebase/messaging-types\")\npackage my.package.firebase.messaging\n\nimport kotlin.js.Promise\n\nexternal class FirebaseMessaging {\n    fun getToken(): Promise&lt;String?&gt;\n    ...\n}\n</code></pre>\n\n<p>I can publish it to my local maven repository with this in my gradle:</p>\n\n<pre><code>task sourcesJar(type: Jar, dependsOn: classes) {\n    classifier = 'sources'\n    from sourceSets.main.allSource\n}\nartifacts {\n    archives sourcesJar\n}\npublishing {\n    publications {\n        mavenJava(MavenPublication) {\n            groupId = project.group\n            artifactId = 'firebase-wrappers'\n            version = project.version\n            from components.java\n            artifact sourcesJar\n        }\n    }\n}\n</code></pre>\n\n<p>How can I add NPM dependencies and make sure it will be available on the generated JAR file?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 410, "user_id": 5132200, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hFdHBn-PeJE/AAAAAAAAAAI/AAAAAAAABx0/DMeo7WYu3Nw/photo.jpg?sz=128", "display_name": "Janos Breuer", "link": "https://stackoverflow.com/users/5132200/janos-breuer"}, "edited": false, "score": 0, "creation_date": 1544553198, "post_id": 53715359, "comment_id": 94314298, "body": "This message seems to be coming from the Javascript console log within the webview. Please include the whole content of the webpage, especially the contents of the file in the <code>source: https:&#47;&#47;...</code> url. (Provided you excluded the url for simplicity only)"}], "owner": {"reputation": 151, "user_id": 6447690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hGyiI.png?s=128&g=1", "display_name": "Jo&#227;o Gouveia", "link": "https://stackoverflow.com/users/6447690/jo%c3%a3o-gouveia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544485325, "creation_date": 1544485325, "question_id": 53715359, "link": "https://stackoverflow.com/questions/53715359/webview-wont-load-only-on-api-23-uncaught-syntaxerror-unexpected-token", "title": "WebView wont load only on API 23 &quot;Uncaught SyntaxError: Unexpected token =&gt;&quot;", "body": "<p>Page loads o older and newer apis, but on api 23 i just get this and it will never load <code>I/chromium: [INFO:CONSOLE(27)] \"Uncaught SyntaxError: Unexpected token =&gt;\", source: https:/...</code>     </p>\n\n<pre><code>    webView.settings.javaScriptEnabled = true\n    webView.settings.domStorageEnabled = true\n    webView.settings.setSupportMultipleWindows(true)\n\n    webView.webViewClient = object : WebViewClient() {\n        ...\n    }\n\n    webView.webChromeClient = object : WebChromeClient() {\n        ...\n    }\n\n    webView.loadUrl(url)\n</code></pre>\n"}, {"tags": ["android", "inheritance", "kotlin", "overloading"], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 8874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/depb8.jpg?s=128&g=1", "display_name": "iFanie", "link": "https://stackoverflow.com/users/8874071/ifanie"}, "is_accepted": false, "score": 1, "last_activity_date": 1544479301, "creation_date": 1544479301, "answer_id": 53714337, "question_id": 53714218, "link": "https://stackoverflow.com/questions/53714218/how-do-i-inherit-a-function-from-another-class-into-an-activity-in-kotlin/53714337#53714337", "title": "How do I inherit a function from another class into an activity in kotlin?", "body": "<p>You can't inherit from more than one super classes, so assuming <code>ManagerListener</code> is an interface, what you have written is correct. As for super calling, it's same in kotlin but in your case you don't need it since you are overriding interface methods without any <code>super</code> implementations.</p>\n\n<p>Also, just something for you to look at since it does not really apply here, in kotlin you can also use the concept of delegation, which means that you allow an instance of class implementing an interface to give your class the attributes of that interface.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1544492668, "post_id": 53715207, "comment_id": 94286581, "body": "This Managerlistener class is basically an interface which has the above 3 functions, cant I use that interface and implement it from my activity and then implement those functions? seems to work for now, however, those functions dont seem to be called/triggered when i run it thru the debugger. Also,I have these implemented in another class where they work, I wanted to inherit the code from within there + add new code in the  same functions implemented in the activity"}, {"owner": {"reputation": 317, "user_id": 1449917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da6e89855125f43f1716a6a827d5aa0?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1449917/charles"}, "edited": false, "score": 0, "creation_date": 1544545106, "post_id": 53715207, "comment_id": 94310034, "body": "If ManagerListener is an interface, then yes you can implement it in your activity and define the methods. It is hard for me to tell you why the methods would not be called without seeing actual code. However, what I can say is that most of the times, the issue is that the listener has not properly been set on the object that should call the methods. Also if you want to extend your methods, the default interface methods from Java 8 and Kotlin let you do just that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "edited": false, "score": 0, "creation_date": 1544549898, "post_id": 53715207, "comment_id": 94312692, "body": "I was actually able to implement it in activity. It works like a charm, only thing I was missing was reference to the function such as function3(reader,opentype,,,) inside the derived function in activity and most importantly i forgot to register the listener on create. Works well now"}], "tags": [], "owner": {"reputation": 317, "user_id": 1449917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da6e89855125f43f1716a6a827d5aa0?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/1449917/charles"}, "is_accepted": true, "score": 0, "last_activity_date": 1544484268, "creation_date": 1544484268, "answer_id": 53715207, "question_id": 53714218, "link": "https://stackoverflow.com/questions/53714218/how-do-i-inherit-a-function-from-another-class-into-an-activity-in-kotlin/53715207#53715207", "title": "How do I inherit a function from another class into an activity in kotlin?", "body": "<p>Let me add a bit on top of iFanie's answer.</p>\n\n<p>What he says is true. In Java as in Kotlin, multiple inheritance is not allowed. A class can only extend 1 class but can implement many interfaces.</p>\n\n<p>Since Activity is a class and not an interface, you are not allowed to extend a second class from your activity.</p>\n\n<p>You have 2 approaches to solve this problem</p>\n\n<ol>\n<li>You can add an interface that will force your activity to implement its methods.</li>\n<li>You can make a new parent class that will extend Activity. This parent class will contain the methods you want</li>\n</ol>\n\n<p>You would have something like this :</p>\n\n<p>Activity &lt;--- CustomParentActivity {doSomething(), doSomethingElse()} &lt;--- YourActualActivity</p>\n\n<p>Another insteresting thing to look at is the default implementations in interfaces.\nWith Java 8, you can provide a default implementation in an interface that may be enough for your needs.</p>\n\n<p>In Kotlin you have the equivalent if you look at <a href=\"https://kotlinlang.org/docs/reference/interfaces.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/interfaces.html</a></p>\n\n<pre><code>interface MyInterface {\n    val prop: Int // abstract\n\n    val propertyWithImplementation: String\n        get() = \"foo\"\n\n    fun foo() {\n        print(prop)\n    }\n}\n\nclass Child : MyInterface {\n    override val prop: Int = 29\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2386226"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 53715207, "answer_count": 2, "score": 0, "last_activity_date": 1544484268, "creation_date": 1544478774, "question_id": 53714218, "link": "https://stackoverflow.com/questions/53714218/how-do-i-inherit-a-function-from-another-class-into-an-activity-in-kotlin", "title": "How do I inherit a function from another class into an activity in kotlin?", "body": "<p>I have my custom SDK code where I have a manager class which has a couple of functions say \"function1(abc,def) \" , function2(abc,def) and function3 (abc,def).\nNow I have an activity in which I am trying to use these functions from my SDK. How do I inherit the functions already used in the managers functions + define my own? </p>\n\n<p>here's my code in manager:</p>\n\n<pre><code> override fun function1(reader: Reader?, openType: OpeningType?) {\n   some code \n}\n override fun function2(reader: Reader?, openingResult: OpeningResult?) {\n some code \n}\n override fun function3(reader: Reader?, openType: OpeningType?, openingStatus: OpeningStatus?) {\nsome code\n}\n</code></pre>\n\n<p>Now I have an activity where I use this SDK as a dependency, and I would like to use these functions such that </p>\n\n<pre><code>class MyActivity : AppCompatActivity(),Managerlistener {\n override fun function1(reader: Reader?, openType: OpeningType?) {\n// super. some code? \n     }\n     override fun function2(reader: Reader?, openingResult: OpeningResult?) {\n// super. some code? \n\n    }\n     override fun function3(reader: Reader?, openType: OpeningType?, openingStatus: OpeningStatus?) {\n// super. some code? \n\n    }\n\n\n...\n}\n</code></pre>\n\n<p>Now, you may have noticed I hav e super.some code commented out, thats because its the java way of doing things, not sure how to go about inheriting the code in kotlin(super equivalent in kotlin? ) so I can inherit that code and on top of that add my additional code. How do I go about the same? Pretty new to kotlin and not sure about the constructs used.</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544478959, "post_id": 53714194, "comment_id": 94283060, "body": "this uses java getter and setters, I need kotlin syntax"}, {"owner": {"reputation": 356, "user_id": 10619013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cfe73e0c9ba245b899a77fbd08eafe?s=128&d=identicon&r=PG&f=1", "display_name": "BBurchfield", "link": "https://stackoverflow.com/users/10619013/bburchfield"}, "reply_to_user": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544479052, "post_id": 53714194, "comment_id": 94283093, "body": "Oops! Right you are. Edited!"}, {"owner": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 1, "creation_date": 1544479368, "post_id": 53714194, "comment_id": 94283210, "body": "So this should suffice in my case: <code>dateTv.text = (article.publishedAt).toDate().formatTo(&quot;dd MMM yyyy&quot;)</code>?"}, {"owner": {"reputation": 356, "user_id": 10619013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cfe73e0c9ba245b899a77fbd08eafe?s=128&d=identicon&r=PG&f=1", "display_name": "BBurchfield", "link": "https://stackoverflow.com/users/10619013/bburchfield"}, "reply_to_user": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544479592, "post_id": 53714194, "comment_id": 94283300, "body": "Provided your String is something that the date formatter can process, it should be what you need."}, {"owner": {"reputation": 356, "user_id": 10619013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cfe73e0c9ba245b899a77fbd08eafe?s=128&d=identicon&r=PG&f=1", "display_name": "BBurchfield", "link": "https://stackoverflow.com/users/10619013/bburchfield"}, "reply_to_user": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544479775, "post_id": 53714194, "comment_id": 94283371, "body": "Of course, you&#39;d also want to add the actual time in your format template, as well."}], "tags": [], "owner": {"reputation": 356, "user_id": 10619013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cfe73e0c9ba245b899a77fbd08eafe?s=128&d=identicon&r=PG&f=1", "display_name": "BBurchfield", "link": "https://stackoverflow.com/users/10619013/bburchfield"}, "is_accepted": true, "score": 16, "last_activity_date": 1544479115, "last_edit_date": 1544479115, "creation_date": 1544478660, "answer_id": 53714194, "question_id": 53713934, "link": "https://stackoverflow.com/questions/53713934/kotlin-convert-utc-to-local-time/53714194#53714194", "title": "Kotlin - convert UTC to local time", "body": "<p>Try using Extension Functions</p>\n\n<pre><code>fun String.toDate(dateFormat: String = \"yyyy-MM-dd HH:mm:ss\", timeZone: TimeZone = TimeZone.getTimeZone(\"UTC\")): Date {\nval parser = SimpleDateFormat(dateFormat, Locale.getDefault())\nparser.timeZone = timeZone\nreturn parser.parse(this)\n}\n\nfun Date.formatTo(dateFormat: String, timeZone: TimeZone = TimeZone.getDefault()): String {\nval formatter = SimpleDateFormat(dateFormat, Locale.getDefault())\nformatter.timeZone = timeZone\nreturn formatter.format(this)\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>\"2018-09-10 22:01:00\".toDate().formatTo(\"dd MMM yyyy\")\n</code></pre>\n\n<p>Output: \"11 Sep 2018\"</p>\n"}], "owner": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12420, "favorite_count": 2, "accepted_answer_id": 53714194, "answer_count": 1, "score": 9, "last_activity_date": 1544479115, "creation_date": 1544477454, "question_id": 53713934, "link": "https://stackoverflow.com/questions/53713934/kotlin-convert-utc-to-local-time", "title": "Kotlin - convert UTC to local time", "body": "<p>I'm trying to convert a UTC string date to local time, so it's in a more readable format. \nI have a <code>textView</code> that in my activity layout:</p>\n\n<pre><code>&lt;TextView\n    android:id=\"@+id/dateTv\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginTop=\"8dp\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/titleTv\"\n    tools:text=\"Published Date\" /&gt;\n</code></pre>\n\n<p>In my activity: </p>\n\n<pre><code>class FullArticleActivity : AppCompatActivity() {\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_full_article)\n\n    val articleJson = intent.getStringExtra(ARTICLE_KEY)\n\n\n    if(!articleJson.isNullOrBlank()) {\n      val article = Gson().fromJson&lt;Article&gt;(articleJson, Article::class.java)\n\n        val formatter = SimpleDateFormat(\"yyyy-MM-dd HH:mm:ssZ\", Locale.getDefault())\n        formatter.timeZone = TimeZone.getTimeZone(\"UTC\")\n        val formattedDate = formatter.parse(article.publishedAt)\n\n      titleTv.text = article.title\n      //UTC string\n      dateTv.text = article.publishedAt\n      contentTv.text = article.content\n</code></pre>\n\n<p>The <code>publishedAt</code> string is in this format from the api call <code>\"2018-12-10T19:48:39Z\"</code>. How can I convert this ZULU time format to local time?</p>\n"}, {"tags": ["gradle", "kotlin", "build.gradle", "gradle-plugin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1544477289, "post_id": 53713859, "comment_id": 94282325, "body": "There is no plugin with ID &quot;kotlin&quot;. Here&#39;s the documentation: <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/using-gradle.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 1413900, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2147c68b7ec5d32424a717c801525d56?s=128&d=identicon&r=PG", "display_name": "Travis Well", "link": "https://stackoverflow.com/users/1413900/travis-well"}, "edited": false, "score": 0, "creation_date": 1544478815, "post_id": 53713975, "comment_id": 94283010, "body": "The <code>id</code> line fails with: &quot;argument list must be exactly 1 literal non empty string&quot; <a href=\"https://paste.fedoraproject.org/paste/I39ips1wsE3dkQMdTdrhAA\" rel=\"nofollow noreferrer\">paste.fedoraproject.org/paste/I39ips1wsE3dkQMdTdrhAA</a>"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 769, "user_id": 1413900, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2147c68b7ec5d32424a717c801525d56?s=128&d=identicon&r=PG", "display_name": "Travis Well", "link": "https://stackoverflow.com/users/1413900/travis-well"}, "edited": false, "score": 0, "creation_date": 1544479616, "post_id": 53713975, "comment_id": 94283315, "body": "You cannot use variables there. The version must be a constant and literal string. No other statements are allowed; their presence will cause a compilation error. <a href=\"https://docs.gradle.org/current/userguide/plugins.html#sec:constrained_syntax\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 2, "last_activity_date": 1544477605, "creation_date": 1544477605, "answer_id": 53713975, "question_id": 53713859, "link": "https://stackoverflow.com/questions/53713859/gradle-cant-resolve-kotlin-plugin-am-i-missing-the-correct-maven-repository/53713975#53713975", "title": "Gradle can&#39;t resolve &#39;kotlin&#39; plugin. Am I missing the correct maven repository?", "body": "<p><em>Kotlin</em> is not a core plugin, therefore you have to include the version. Also the name is different, when using the <code>plugins</code> configuration:</p>\n\n<pre><code>plugins {\n    id \"org.jetbrains.kotlin.jvm\" version \"1.3.11\"\n}\n</code></pre>\n\n<p>If you use the <code>apply</code> function, you could still use the simple name:</p>\n\n<pre><code>apply plugin: \"kotlin\"\n</code></pre>\n\n<p>You'll find this information on <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#targeting-the-jvm\" rel=\"nofollow noreferrer\">Targeting the JVM</a>.</p>\n"}], "owner": {"reputation": 769, "user_id": 1413900, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/2147c68b7ec5d32424a717c801525d56?s=128&d=identicon&r=PG", "display_name": "Travis Well", "link": "https://stackoverflow.com/users/1413900/travis-well"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 0, "accepted_answer_id": 53713975, "answer_count": 1, "score": 1, "last_activity_date": 1544477605, "creation_date": 1544477092, "question_id": 53713859, "link": "https://stackoverflow.com/questions/53713859/gradle-cant-resolve-kotlin-plugin-am-i-missing-the-correct-maven-repository", "title": "Gradle can&#39;t resolve &#39;kotlin&#39; plugin. Am I missing the correct maven repository?", "body": "<p><code>gradle tasks</code> fails telling me it can't find the plugin 'kotlin'. My <code>build.gradle</code> file starts with:</p>\n\n<pre><code>buildscript {\n  ext.kotlin_version = '1.3.11'\n  repositories {\n    mavenLocal()\n    mavenCentral()\n    jcenter()\n    maven { url \"https://dl.bintray.com/kotlin/kotlin-dev/\" }\n    maven { url \"http://central.maven.org/maven2/\" }\n  }\n  dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n  }\n}\n\nplugins {\n  id 'kotlin'\n  id 'application'\n}\n</code></pre>\n\n<p>WRT maven repositories, I'm clearly just trying to redundantly add all the kitchen sinks I can find. I have tried none, and commenting out some. Which one am I missing?\nFrom the log:</p>\n\n<pre><code>12:55:04.419 [DEBUG] [org.gradle.launcher.daemon.server.exec.ReturnResult] Daemon is dispatching the build result: Failure[value=org.gradle.initialization.Repor\ntedException: org.gradle.internal.exceptions.LocationAwareException: Build file '/home/_/workspace/_/build.gradle' line: 18\nPlugin [id: 'kotlin'] was not found in any of the following sources:\n\n- Gradle Core Plugins (not a core plugin, please see https://docs.gradle.org/5.0/userguide/standard_plugins.html for available core plugins)\n- Plugin Repositories (plugin dependency must include a version number for this source)]\n</code></pre>\n\n<p>I have also tried version 1.3.10 because it matches what's listed in gradle version info:</p>\n\n<pre><code>------------------------------------------------------------\nGradle 5.0\n------------------------------------------------------------\n\nBuild time:   2018-11-26 11:48:43 UTC\nRevision:     7fc6e5abf2fc5fe0824aec8a0f5462664dbcd987\n\nKotlin DSL:   1.0.4\nKotlin:       1.3.10\nGroovy:       2.5.4\nAnt:          Apache Ant(TM) version 1.9.13 compiled on July 10 2018\nJVM:          1.8.0_181 (Oracle Corporation 25.181-b13)\nOS:           Linux 4.19.6-200.fc28.x86_64 amd64\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit", "okhttp3"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1544475071, "post_id": 53712891, "comment_id": 94281452, "body": "those array indexes which you&#39;d expect make me wonder - just alike the actual output is obviously not a valid query-string... <a href=\"https://restful-api-design.readthedocs.io/en/latest/resources.html\" rel=\"nofollow noreferrer\">restful-api-design.readthedocs.io/en/latest/resources.html</a> ...this question cannot be answered, without the actual documentation of the parameters, which are being expected by the API; what you&#39;d expect is rather irrelevant here."}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1544826815, "post_id": 53712891, "comment_id": 94427037, "body": "a proper API might accept that as <code>JSON</code> posted as the body... because query-string is a) limited in length and b) it looks quite messy (far more complicated than it would need to be). however, the API dictates the outcome."}, {"owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1544827084, "post_id": 53712891, "comment_id": 94427108, "body": "@MartinZeitler these array indexes are optional, with or without array indexes are both valid HTTP get request parameters, here is an example stackoverflow.com/a/3980336/1244597  You are correct about JSON in body as a POST request, but I cannot change my situation where I have to use a GET request, so my content-type cannot be JSON"}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1544827155, "post_id": 53712891, "comment_id": 94427132, "body": "it might indeed be theoretically &quot;valid&quot; ...but the API design is below standards (as the complicated way of building the requests might already hint for). if you have a chance to change the API, this might be a X/Y problem - if not, there&#39;s nothing to do about it."}, {"owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "reply_to_user": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1544827482, "post_id": 53712891, "comment_id": 94427226, "body": "in iOS I used Alamofire and SwiftHTTP, both libraries offer this functionality out of the box, this is really a common situation, here is a link of the above named libraries having this functionality <a href=\"https://github.com/daltoniam/SwiftHTTP/blob/master/Source/Request.swift\" rel=\"nofollow noreferrer\">github.com/daltoniam/SwiftHTTP/blob/master/Source/Request.sw&zwnj;&#8203;ift</a> look for <code>extension Array: HTTPParameterProtocol::createPairs</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "edited": false, "score": 0, "creation_date": 1544482714, "post_id": 53713861, "comment_id": 94284410, "body": "Thanks for the overview on Retrofit&#39;s behavior. This will create <i>different keys for each single parameter</i>, I also need the ability to delete an parameter from <code>Map</code>, e.g. deleting <code>p1</code> will remove all its elements, BTW I have updated my question, these array indexes are not necessary. Thanks for your response!"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "edited": false, "score": 0, "creation_date": 1544519077, "post_id": 53713861, "comment_id": 94294684, "body": "Depending on the server setup these actually become necessary. Might be better to have. Especially when you use these as map keys. You could try to create a flat mapping you only apply in the end. Making your map into one with my values."}, {"owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "edited": false, "score": 0, "creation_date": 1544519255, "post_id": 53713861, "comment_id": 94294779, "body": "I did not quite understand what you meant <i>You could try to create a flat mapping you only apply in the end. Making your map into one with my values.</i> if possible can you provide a short example to start with, Thanks again for your response"}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 0, "last_activity_date": 1544527734, "last_edit_date": 1544527734, "creation_date": 1544477101, "answer_id": 53713861, "question_id": 53712891, "link": "https://stackoverflow.com/questions/53712891/retrofit-generates-wrong-get-request-parameters-from-mapstring-any/53713861#53713861", "title": "Retrofit generates wrong GET request parameters from Map&lt;String : Any&gt;", "body": "<p><em>Retrofit</em> just calls <code>toString()</code> on the value of the <code>Map&lt;String, Any&gt;</code>. To achieve what you intend, you have to define it directly</p>\n\n<pre><code>var dict: Map&lt;String, Any&gt; = listOf()\ndict[\"p1[0]\"] = 1\ndict[\"p1[1]\"] = 3\ndict[\"p2[0]\"] = \"\"\ndict[\"p2[1]\"] = 2.1\ndict[\"p3\"] = 1\n</code></pre>\n\n<p>You could map the map simply by just flattening it</p>\n\n<pre><code>fun Map&lt;String, Any&gt;.queryArgs(): Map&lt;String, Any&gt; {\n    val map = mutableMapOf&lt;String, Any&gt;()\n    forEach { (key, value) -&gt;\n        if (value !is Iterable&lt;*&gt;) {\n            map[key] = value\n        } else value.forEachIndexed { index, value -&gt;\n            map[\"$key[$index]\"] = value ?: \"\"\n        }\n    }\n    return map\n}\n</code></pre>\n\n<p>This assumes only one level of lists at most.</p>\n"}, {"tags": [], "owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "is_accepted": true, "score": 0, "last_activity_date": 1544826470, "creation_date": 1544826470, "answer_id": 53787695, "question_id": 53712891, "link": "https://stackoverflow.com/questions/53712891/retrofit-generates-wrong-get-request-parameters-from-mapstring-any/53787695#53787695", "title": "Retrofit generates wrong GET request parameters from Map&lt;String : Any&gt;", "body": "<p>Here is my solution that offers</p>\n\n<hr>\n\n<ul>\n<li><p>Original keys in HashMap, so that updating/deleting is possible, such as</p>\n\n<pre><code>dict.remove(\"p1\")\ndict[\"p1\"] = new value\n</code></pre></li>\n<li><p>Ability to have nested arrays, such as</p>\n\n<pre><code>[\n  0: [coord1, coord2, coord3],\n  1: [coord1, coord2, coord3]\n]\n</code></pre></li>\n</ul>\n\n<hr>\n\n<pre><code>data class URL(val params: MutableMap&lt;String, Any&gt; = mutableMapOf&lt;String, Any&gt;()) {\n\n    override fun toString(): String = params.map {\n        val value = it.value\n        if (value !is Iterable&lt;*&gt;) {\n            it.key + \"=\" + it.value.toString()\n        } else {\n            createPairs(it.key, value)\n        }\n    }.joinToString(\"&amp;\")\n\n    fun createPairs(key: String, value: Iterable&lt;*&gt;): String {\n        return value.mapIndexed { idx, value -&gt;\n            val useKey = key + \"[\" + idx + \"]\"\n            if (value !is Iterable&lt;*&gt;) {\n                useKey + \"=\" + (value?.toString() ?: \"\")\n            } else\n                createPairs(useKey, value)\n\n        }.joinToString(\"&amp;\")\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>val url = URL()\nurl.params[\"p1\"] = listOf(1, 3)\nurl.params[\"p2\"] = listOf(null, 2.1)\nurl.params[\"p3\"] = 1\n\nval polygon1 = listOf(\"p1-coord1\", \"p1-coord2\")\nval polygon2 = listOf(\"p2-coord1\", \"p2-coord2\", \"p2-coord3\")\nval polygon3 = listOf(\"p3-coord1\", \"p3-coord2\")\nurl.params[\"bbox\"] = listOf(polygon1, polygon2, polygon3)\n\nprintln(url.toString())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>p1[0]=1&amp;p1[1]=3&amp;\np2[0]=&amp;p2[1]=2.1&amp;\np3=1&amp;\nbbox[0][0]=p1-coord1&amp;bbox[0][1]=p1-coord2&amp;\nbbox[1][0]=p2-coord1&amp;bbox[1][1]=p2-coord2&amp;bbox[1][2]=p2-coord3&amp;\nbbox[2][0]=p3-coord1&amp;bbox[2][1]=p3-coord2\n</code></pre>\n"}], "owner": {"reputation": 9247, "user_id": 1244597, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d927eef460680a02a1d551e390f80ee?s=128&d=identicon&r=PG&f=1", "display_name": "AamirR", "link": "https://stackoverflow.com/users/1244597/aamirr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 53787695, "answer_count": 2, "score": 2, "last_activity_date": 1545157465, "creation_date": 1544472537, "last_edit_date": 1545157465, "question_id": 53712891, "link": "https://stackoverflow.com/questions/53712891/retrofit-generates-wrong-get-request-parameters-from-mapstring-any", "title": "Retrofit generates wrong GET request parameters from Map&lt;String : Any&gt;", "body": "<p>I have following data:</p>\n\n<pre><code>var dict: Map&lt;String, Any&gt; = listOf()\ndict[\"p1\"] = listOf(1, 3)\ndict[\"p2\"] = listOf(null, 2.1)\ndict[\"p3\"] = 1\n</code></pre>\n\n<p>When I pass this data to following function:</p>\n\n<pre><code>@GET(\"uri?staticKey=staticValue\")\nfun testApi(@QueryMap(encoded = true) params: @JvmSuppressWildcards Map&lt;String, Any&gt;): Call&lt;ResponseBody&gt;\n</code></pre>\n\n<p>I expect the request URL to be:</p>\n\n<pre><code>uri?staticKey=staticValue&amp;\n    p1[0]=1&amp;p1[1]=3&amp;\n    p2[0]=&amp;p2[1]=2.1&amp;\n    p3=1\n</code></pre>\n\n<p>But here is what it produces:</p>\n\n<pre><code>uri?staticKey=staticValue&amp;\n    p1=[1, 3]&amp;\n    p2=[null, 2.1]&amp;\n    p3=1\n</code></pre>\n\n<p>Am I doing something wrong? I have just started with Kotlin and Android development, so I am not sure if this is supported by Retrofit/okhttp library.</p>\n\n<p><strong>Note</strong> I need such feature as <code>Map&lt;String, Any&gt;</code> in order to easily add/delete query params.</p>\n"}, {"tags": ["android", "kotlin", "android-jetpack", "android-workmanager"], "comments": [{"owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1544472429, "post_id": 53712530, "comment_id": 94280179, "body": "Does your Worker ever return <code>Result.failure()</code>? Because a failed work chain can&#39;t be appended to."}, {"owner": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "reply_to_user": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "edited": false, "score": 0, "creation_date": 1544483604, "post_id": 53712530, "comment_id": 94284649, "body": "@ianhanniballake No, it&#39;s either retry or success. But what result is going to be stored if the app process is killed?"}], "answers": [{"tags": [], "owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "is_accepted": false, "score": 0, "last_activity_date": 1544569280, "creation_date": 1544569280, "answer_id": 53733638, "question_id": 53712530, "link": "https://stackoverflow.com/questions/53712530/workmanager-does-not-execute-unique-jobs-with-append-policy/53733638#53733638", "title": "Workmanager does not execute unique jobs with APPEND policy", "body": "<p>One important information that is missing in your description is the Android version that you're using in these tests.<br>\nWorkManager schedule workers using the JobScheduler API on Android Marshmallow (6.0, API Level 23) and newer, and it schedules a maximum amount of workers using this API at any time (<a href=\"https://developer.android.com/reference/androidx/work/Configuration#MIN_SCHEDULER_LIMIT\" rel=\"nofollow noreferrer\">default is 20</a>, <a href=\"https://developer.android.com/reference/androidx/work/Configuration.Builder#setMaxSchedulerLimit(int)\" rel=\"nofollow noreferrer\">maximum is 50</a>). The threshold you're seeing may be linked to this value.</p>\n\n<p>Another important point, is that WorkManager keeps tracks of your workers for you so, if the application is killed while the worker is running, WorkManager automatically restart the worker. You don't need to do anything.</p>\n\n<p>What is not clear to me, is what are you trying to achieve appending a new job every time at the application startup.</p>\n\n<p>Last point, the backoff criteria of 1 second seems a bit aggressive to me. <a href=\"https://github.com/aosp-mirror/platform_frameworks_support/blob/androidx-master-dev/work/workmanager/src/main/java/androidx/work/WorkRequest.java#L37\" rel=\"nofollow noreferrer\">The current default value, looking into the source code, is 30 seconds and the maximum is 5 hours</a>.</p>\n\n<p>However, if you think that there're something wrong (or documented incorrectly) I suggest you to open a bug on <a href=\"https://issuetracker.google.com/issues/new?component=409906&amp;template=1094197\" rel=\"nofollow noreferrer\">WorkManager's public issuetracker</a>.,</p>\n"}], "owner": {"reputation": 504, "user_id": 7314061, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-EbVFOsQugNY/AAAAAAAAAAI/AAAAAAAAKxs/NA57Ppg6ZcE/photo.jpg?sz=128", "display_name": "Arnis Shaykh", "link": "https://stackoverflow.com/users/7314061/arnis-shaykh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 749, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544569280, "creation_date": 1544470943, "question_id": 53712530, "link": "https://stackoverflow.com/questions/53712530/workmanager-does-not-execute-unique-jobs-with-append-policy", "title": "Workmanager does not execute unique jobs with APPEND policy", "body": "<p>I've found this weird behaviour of work manger (alpha-12) that it does not execute a job after it was enqueued. The code to enqueue the work is below.</p>\n\n<pre><code>fun enqueue(phoneNumber: String?,priorityId: String? = null): ListenableFuture&lt;WorkInfo&gt; {\n    return WorkManager.getInstance().run {\n        val work = OneTimeWorkRequestBuilder&lt;ContentDownloaderWork&gt;()\n            .addTag(TIMESTAMP)\n            .setInputData(workDataOf(PHONE to phoneNumber, PRIORITY_ID to priorityId))\n            .setBackoffCriteria(BackoffPolicy.EXPONENTIAL, 1, TimeUnit.SECONDS)\n            .setConstraints(Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build())\n            .build()\n        beginUniqueWork(TIMESTAMP + priorityId.orEmpty(), ExistingWorkPolicy.APPEND, work).enqueue()\n        getWorkInfoById(work.id)\n    }\n}\n</code></pre>\n\n<p>I enqueue this work each time on app startup. And what I am doing is killing my app in the middle of the work process that is downloading files from server. It successfully restart every time I reopen my app but for limited number of times.</p>\n\n<p>It seems like it has some sort of queue which gets filled up and does not allow any more jobs to be enqueued. When I check all available jobs by tag it show me that some are canceled and some succeeded but when I try to enqueue a new work it does nothing. </p>\n\n<p>So is it a bug in workmanager or am I doing something wrong?</p>\n"}, {"tags": ["java", "android", "android-studio", "kotlin", "intellij-idea"], "answers": [{"comments": [{"owner": {"reputation": 3547, "user_id": 2289835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/0MQ72.jpg?s=128&g=1", "display_name": "Rumit Patel", "link": "https://stackoverflow.com/users/2289835/rumit-patel"}, "edited": false, "score": 0, "creation_date": 1598863687, "post_id": 53711069, "comment_id": 112584749, "body": "You can have a look at <a href=\"https://www.jetbrains.com/help/idea/scratches.html\" rel=\"nofollow noreferrer\">this doc.</a>"}], "tags": [], "owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "is_accepted": true, "score": 18, "last_activity_date": 1591622362, "last_edit_date": 1591622362, "creation_date": 1544464372, "answer_id": 53711069, "question_id": 53711068, "link": "https://stackoverflow.com/questions/53711068/how-to-use-scratch-files-in-android-studio/53711069#53711069", "title": "How to use Scratch Files in Android Studio?", "body": "<p>It's a cool feature that lets you save your code that you want to look at later or just for reference.</p>\n\n<p>See <a href=\"https://medium.com/@mayank_1513/using-scratch-files-in-android-studio-3912f668615b\" rel=\"noreferrer\">this post</a></p>\n\n<p>Say you are creating a class and you decide to change a section of code. You can create a new scratch file by right clicking on the navigation bar and selection New, and then scratch file. Copy and save the code in the scratch file. This file is not a part of your android studio project.</p>\n\n<p>You can find this file under scratches scope or Scratches folder under Scratches and Consoles folder in Project Scope.</p>\n\n<p>Hope this will interest you guys and help speeding up development. </p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 8743629, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-R7PCir8SPhA/AAAAAAAAAAI/AAAAAAAAAAk/R8xUi7yjlzE/photo.jpg?sz=128", "display_name": "Ali", "link": "https://stackoverflow.com/users/8743629/ali"}, "is_accepted": false, "score": 6, "last_activity_date": 1584588447, "last_edit_date": 1584588447, "creation_date": 1555481119, "answer_id": 55720915, "question_id": 53711068, "link": "https://stackoverflow.com/questions/53711068/how-to-use-scratch-files-in-android-studio/55720915#55720915", "title": "How to use Scratch Files in Android Studio?", "body": "<p>Sometimes you may need to create temporary notes or draft up some code outside of the project context. Instead of switching to a different application for this purpose, you can use scratch files and scratch buffers. </p>\n\n<p>To create a scratch file, you can use <code>ALT+CTRL+SHIFT+insert</code></p>\n\n<p>or on OS X use <code>Command+SHIFT+N</code></p>\n\n<p>you can read more about it here: <a href=\"https://www.jetbrains.com/help/idea/scratches.html\" rel=\"nofollow noreferrer\">docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 345759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93cc233a7ba996c9806495d1b5eda95?s=128&d=identicon&r=PG&f=1", "display_name": "Gunnar Forsgren - Mobimation", "link": "https://stackoverflow.com/users/345759/gunnar-forsgren-mobimation"}, "is_accepted": false, "score": 1, "last_activity_date": 1572076226, "creation_date": 1572076226, "answer_id": 58568999, "question_id": 53711068, "link": "https://stackoverflow.com/questions/53711068/how-to-use-scratch-files-in-android-studio/58568999#58568999", "title": "How to use Scratch Files in Android Studio?", "body": "<p>It is the same metaphor as a \"scratch book\", a place to note down useful code fragments or ideas that can be useful to return to later on.</p>\n"}], "owner": {"reputation": 4343, "user_id": 9640177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pca0Z.jpg?s=128&g=1", "display_name": "mayank1513", "link": "https://stackoverflow.com/users/9640177/mayank1513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5069, "favorite_count": 4, "accepted_answer_id": 53711069, "answer_count": 3, "score": 16, "last_activity_date": 1612023799, "creation_date": 1544464372, "last_edit_date": 1612023799, "question_id": 53711068, "link": "https://stackoverflow.com/questions/53711068/how-to-use-scratch-files-in-android-studio", "title": "How to use Scratch Files in Android Studio?", "body": "<p>Recently I came across a cool feature in Android Studio called scratch files. Just wanted to share it in Q and A Style.</p>\n\n<p>What are scratch files and how to use them?</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 473, "user_id": 5945316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9dadd5efaad635890746ae31f1efc85?s=128&d=identicon&r=PG", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/5945316/alvaro"}, "edited": false, "score": 0, "creation_date": 1544461755, "post_id": 53710314, "comment_id": 94275316, "body": "can you copy the error?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1544462002, "post_id": 53710314, "comment_id": 94275428, "body": "You perform the <code>isNotBlank</code> check after you call <code>toInt</code>, which is too late."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10771894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvVb4xPMolE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU_6TL9a-RyfGaWeTKtX0GtPIjGIA/mo/photo.jpg?sz=128", "display_name": "Backfisch Inderjemmel", "link": "https://stackoverflow.com/users/10771894/backfisch-inderjemmel"}, "edited": false, "score": 0, "creation_date": 1544462245, "post_id": 53710480, "comment_id": 94275560, "body": "Thanks, that helped. So my app crashed at the val num = Input.text.toString().toInt() right?"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "reply_to_user": {"reputation": 3, "user_id": 10771894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvVb4xPMolE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU_6TL9a-RyfGaWeTKtX0GtPIjGIA/mo/photo.jpg?sz=128", "display_name": "Backfisch Inderjemmel", "link": "https://stackoverflow.com/users/10771894/backfisch-inderjemmel"}, "edited": false, "score": 0, "creation_date": 1544462329, "post_id": 53710480, "comment_id": 94275623, "body": "Your app would crash at <code>Input.text.toString().toInt()</code> when Input was empty or contained other characters than numeric."}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": true, "score": 0, "last_activity_date": 1544462034, "creation_date": 1544462034, "answer_id": 53710480, "question_id": 53710314, "link": "https://stackoverflow.com/questions/53710314/check-if-input-is-empty-doesnt-work-kotlin/53710480#53710480", "title": "Check if Input is empty doesnt work Kotlin", "body": "<p>First you check if the <code>EditText</code> is empty and then try to convert to <code>Int</code>:</p>\n\n<pre><code>if(!Input.text.toString().trim().isEmpty()) {\n    val num = Input.text.toString().toInt()\n    var hilf = 1\n\n    for (i in 1..num) {\n        hilf *= i\n    }\n    Output.text = hilf.toString()\n}\n</code></pre>\n\n<p>Also you don't need </p>\n\n<pre><code>num.toString().toInt()\n</code></pre>\n\n<p>you can just use</p>\n\n<pre><code>1..num\n</code></pre>\n\n<p>because <code>num</code>'s type is <code>Int</code></p>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 3670439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d95ac0c99c28f54a90c8cc40e4bbca?s=128&d=identicon&r=PG&f=1", "display_name": "Keheira", "link": "https://stackoverflow.com/users/3670439/keheira"}, "is_accepted": false, "score": 0, "last_activity_date": 1544462091, "creation_date": 1544462091, "answer_id": 53710503, "question_id": 53710314, "link": "https://stackoverflow.com/questions/53710314/check-if-input-is-empty-doesnt-work-kotlin/53710503#53710503", "title": "Check if Input is empty doesnt work Kotlin", "body": "<p>you want to use the following:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val Button = findViewById&lt;Button&gt;(R.id.button)\n    val Output = findViewById&lt;TextView&gt;(R.id.Output)\n    val Input = findViewById&lt;TextView&gt;(R.id.Input)\n\n    Button.setOnClickListener {\n        val num = Input.text.toString().toInt()\n        if(!Input.text.toString().isEmpty()) {\n            var hilf = 1\n            for (i in 1..num.toString().toInt()) {\n                hilf *= i\n            }\n            Output.text = hilf.toString()\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10771894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zvVb4xPMolE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU_6TL9a-RyfGaWeTKtX0GtPIjGIA/mo/photo.jpg?sz=128", "display_name": "Backfisch Inderjemmel", "link": "https://stackoverflow.com/users/10771894/backfisch-inderjemmel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 53710480, "answer_count": 2, "score": 0, "last_activity_date": 1544462091, "creation_date": 1544461300, "question_id": 53710314, "link": "https://stackoverflow.com/questions/53710314/check-if-input-is-empty-doesnt-work-kotlin", "title": "Check if Input is empty doesnt work Kotlin", "body": "<p>Hey guys i just started playing around with android studio and wanted to make an app that calculates the faculty of an input value. It works if i give it an Input Value but if not it crashes, so i tried to check if the input is empty but that didn\u00b4t solve the error. Here\u00b4s the code:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val Button = findViewById&lt;Button&gt;(R.id.button)\n    val Output = findViewById&lt;TextView&gt;(R.id.Output)\n    val Input = findViewById&lt;TextView&gt;(R.id.Input)\n\n    Button.setOnClickListener {\n\n\n        val num = Input.text.toString().toInt()\n        if(num.toString().isNotBlank()) {\n\n\n\n\n            var hilf = 1\n\n            for (i in 1..num.toString().toInt()) {\n                hilf *= i\n\n            }\n            Output.text = hilf.toString()\n        }\n\n\n\n    }\n}\n</code></pre>\n\n<p>Do you guys have any idea how i could fix the problem?</p>\n"}, {"tags": ["spring", "kotlin", "properties-file"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1544461941, "post_id": 53710263, "comment_id": 94275407, "body": "If you can initialize the variable, simply remove the <code>lateinit</code> modifier."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544509971, "post_id": 53710263, "comment_id": 94290695, "body": "if you are wondering why it is that way: <a href=\"https://stackoverflow.com/questions/38761294/why-doesnt-kotlin-allow-to-use-lateinit-with-primitive-types/38762276\">Why doesn&#39;t Kotlin allow to use lateinit with primitive types?</a>... so what should the default value be of that variable if it is never initialized? if it is <code>false</code>, use: <code>private var myBooleanEnabled : Boolean = false</code> and set it to the system property, if it is there.... problem solved?"}], "answers": [{"comments": [{"owner": {"reputation": 997, "user_id": 6158542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pVudd.jpg?s=128&g=1", "display_name": "JonyD", "link": "https://stackoverflow.com/users/6158542/jonyd"}, "edited": false, "score": 0, "creation_date": 1544461744, "post_id": 53710369, "comment_id": 94275312, "body": "Your suggestion does not work. I get &quot;&#39;lateinit&#39; modifier is not allowed on properties of nullable types&quot;"}, {"owner": {"reputation": 997, "user_id": 6158542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pVudd.jpg?s=128&g=1", "display_name": "JonyD", "link": "https://stackoverflow.com/users/6158542/jonyd"}, "edited": false, "score": 1, "creation_date": 1544462158, "post_id": 53710369, "comment_id": 94275505, "body": "but lateinit is desired here"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1544462536, "post_id": 53710369, "comment_id": 94275708, "body": "Why do you think the <code>lateinit</code> is desired? What are you trying to accomplish by using it?"}, {"owner": {"reputation": 997, "user_id": 6158542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pVudd.jpg?s=128&g=1", "display_name": "JonyD", "link": "https://stackoverflow.com/users/6158542/jonyd"}, "edited": false, "score": 1, "creation_date": 1544462624, "post_id": 53710369, "comment_id": 94275754, "body": "the value will come from a container environment variable"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1544464141, "post_id": 53710369, "comment_id": 94276482, "body": "So why does it have to be lateinit? You can still assign it from the container variable, while providing a default value as a normal initializer."}, {"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1550662357, "post_id": 53710369, "comment_id": 96349090, "body": "@yole, lateinit matters when you don&#39;t have a default value at compile time and the actual value comes at runtime. The good example is a <code>@ConfigurationProperties</code> class that gets values from properties file."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "edited": false, "score": 0, "creation_date": 1551195839, "post_id": 53710369, "comment_id": 96547509, "body": "@WallTearer So what exactly prevents you from initializing the value with 0 at compile time? The correct value will still get injected through <code>@ConfigurationProperties</code>."}, {"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1551197182, "post_id": 53710369, "comment_id": 96548318, "body": "@yole initializing with invalid value is not a good idea. What if some developer forgets to set some value in properties, or a production system will not have a proper configuration? Having no value assigned at all would be better, because the system will fail fast, as opposed to having invalid default value and weird behavior down the line."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "edited": false, "score": 0, "creation_date": 1551198794, "post_id": 53710369, "comment_id": 96549235, "body": "@WallTearer If you want to support setting the field via <code>@ConfigurationProperties</code>, there is no way to provide the fail-fast <code>lateinit</code> semantics that you want. The injection will set the field via reflection, so there will be no way for the Kotlin runtime to track whether it has been set, and there is also no value that can be used to mark an uninitialized value of a primitive type."}, {"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1551203926, "post_id": 53710369, "comment_id": 96552001, "body": "@yole, yes, failing fast on compilation or startup will not be possible. But by &quot;failing fast&quot; in my example I meant &quot;failing when value is accessed&quot;, so it&#39;s of course not as fast as failing on compilation or startup, but still faster and better then having invalid value and potentially causing damage to the system without seeing any error (or some very confusing error in a completely different place)."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1551204152, "post_id": 53710369, "comment_id": 96552122, "body": "Failing when the value is accessed will also be impossible: there is no way to distinguish whether a value of a primitive type is completely unset or set via reflection."}, {"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1551265755, "post_id": 53710369, "comment_id": 96575276, "body": "@yole, I&#39;m repeating once again: having invalid value is worse than no value (proved by lots of prod apps) - this is the main problem that should be addressed, and I don&#39;t know why you ignore it. In any case, <code>lateinit</code> works for non-primitive types (e.g. Strings), which is already one part of the fix and is better than no fix. And handling of primitive values could be done like <code>var testBool: Boolean by Delegates.notNull()</code> - here you get a second part of the fix."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "edited": false, "score": 0, "creation_date": 1551267824, "post_id": 53710369, "comment_id": 96576488, "body": "@WallTearer I&#39;m not ignoring the problem, I&#39;m saying it&#39;s impossible to solve. If you want injection to work, you cannot use <code>Delegates.notNull()</code> or an equivalent approach because the type of the field will be different, and frameworks will not be able to inject the value into the field (unless you update all frameworks to make them specificially aware of Kotlin&#39;s lateinit implementation)."}, {"owner": {"reputation": 2379, "user_id": 519035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f372079010c5f7b9728c0e5c5635f9c7?s=128&d=identicon&r=PG&f=1", "display_name": "AbstractVoid", "link": "https://stackoverflow.com/users/519035/abstractvoid"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1551269479, "post_id": 53710369, "comment_id": 96577423, "body": "@yole please check your facts, because <code>Delegates.notNull()</code> does work at least in Spring for <code>@ConfigurationProperties</code> on primitive types. And the exception will be triggered when accessing a value if it is not set in properties. And type will be correct if value is given. See also this answer - <a href=\"https://stackoverflow.com/a/44386513/519035\">stackoverflow.com/a/44386513/519035</a>"}], "tags": [], "owner": {"reputation": 2850, "user_id": 6375041, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/251807625186795/picture?type=large", "display_name": "Sergei Rybalkin", "link": "https://stackoverflow.com/users/6375041/sergei-rybalkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1544462031, "last_edit_date": 1544462031, "creation_date": 1544461567, "answer_id": 53710369, "question_id": 53710263, "link": "https://stackoverflow.com/questions/53710263/lateinit-modifier-is-not-allowed-on-properties-of-primitive-types-kotlin/53710369#53710369", "title": "&#39;lateinit&#39; modifier is not allowed on properties of primitive types - Kotlin", "body": "<p>The simplest thing is to define <code>myBooleanEnabled</code> as nullable and remove <code>lateinit</code></p>\n\n<pre><code>private var myBooleanEnabled: Boolean? = null\n</code></pre>\n\n<p>In this case, it will not be interpreted as a primitive <code>boolean</code> in bytecode.</p>\n\n<p>However, in your case, I'd suggest a constructor injection.</p>\n"}, {"tags": [], "owner": {"reputation": 14735, "user_id": 45112, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2155c92be66863c4634778bf522efe14?s=128&d=identicon&r=PG", "display_name": "armandino", "link": "https://stackoverflow.com/users/45112/armandino"}, "is_accepted": false, "score": 0, "last_activity_date": 1544550545, "creation_date": 1544550545, "answer_id": 53729684, "question_id": 53710263, "link": "https://stackoverflow.com/questions/53710263/lateinit-modifier-is-not-allowed-on-properties-of-primitive-types-kotlin/53729684#53729684", "title": "&#39;lateinit&#39; modifier is not allowed on properties of primitive types - Kotlin", "body": "<p>You can use constructor injection as shown below. If you're using Spring 4.3+ you don't need the <code>@Autowired</code> annotation. Spring documentation has some guidelines on this:</p>\n\n<p><a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/languages.html#injecting-dependencies\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/languages.html#injecting-dependencies</a></p>\n\n<pre><code>@Component\nclass MyService(\n    private val someService: SomeService,\n    @Value(\"\\${my.property.from.properties.file}\")\n    private val myBooleanEnabled: Boolean)\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 6158542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pVudd.jpg?s=128&g=1", "display_name": "JonyD", "link": "https://stackoverflow.com/users/6158542/jonyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4086, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1544550545, "creation_date": 1544461113, "question_id": 53710263, "link": "https://stackoverflow.com/questions/53710263/lateinit-modifier-is-not-allowed-on-properties-of-primitive-types-kotlin", "title": "&#39;lateinit&#39; modifier is not allowed on properties of primitive types - Kotlin", "body": "<p>I'm getting an error while trying to assign a environment variable value to a <code>lateinit</code> variable.\nThe error is <strong>\"'lateinit' modifier is not allowed on properties of primitive types\"</strong>.</p>\n\n<p>My application.properties (reading the environment variable)</p>\n\n<pre><code>my.property.from.properties.file=true\n</code></pre>\n\n<p>MyService class:</p>\n\n<pre><code>@Component\nclass MyService @Autowired constructor(\n    private val someService: SomeService) {\n\n    @Value(\"\\${my.property.from.properties.file}\")\n    private lateinit var myBooleanEnabled: Boolean\n</code></pre>\n\n<p>Assigning a value to it does not solve the problem. For example, with </p>\n\n<pre><code>private lateinit var myBooleanEnabled: Boolean = true\n</code></pre>\n\n<p>I get 2 errors:</p>\n\n<ul>\n<li><strong>'lateinit' modifier is not allowed on properties of primitive types</strong> </li>\n<li><strong>'lateinit' modifier is not allowed on properties with initializer</strong></li>\n</ul>\n\n<p>For what I read, I need a Delegated (<a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/delegated-properties.html</a>) but I could not grasp it fully. Also, I don't want to have to write another method to set the property if there is a \"cleaner\" solution.\nAny ideas?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 1485, "user_id": 2323833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f47a42072b8edc84a9bf81c58fa52e?s=128&d=identicon&r=PG", "display_name": "Maxim Tulupov", "link": "https://stackoverflow.com/users/2323833/maxim-tulupov"}, "edited": false, "score": 1, "creation_date": 1544460007, "post_id": 53709857, "comment_id": 94274356, "body": "I think you should also attach LoginApiContract sources."}, {"owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "reply_to_user": {"reputation": 1485, "user_id": 2323833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f47a42072b8edc84a9bf81c58fa52e?s=128&d=identicon&r=PG", "display_name": "Maxim Tulupov", "link": "https://stackoverflow.com/users/2323833/maxim-tulupov"}, "edited": false, "score": 0, "creation_date": 1544460264, "post_id": 53709857, "comment_id": 94274504, "body": "now you can see (:"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 3, "creation_date": 1544460811, "post_id": 53709857, "comment_id": 94274784, "body": "Please make sure that the import statement for Callback references the correct Callback class. Looks like you&#39;ve accidentally imported a class with the same name from a different package."}, {"owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "edited": false, "score": 0, "creation_date": 1544460895, "post_id": 53709857, "comment_id": 94274832, "body": "you are right!! sorry for the newbie question hehe and thx for the help."}, {"owner": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 0, "creation_date": 1544460989, "post_id": 53709857, "comment_id": 94274876, "body": "I thought you might have taken care of import statements, so didn&#39;t bother mentioning it. Lol"}], "answers": [{"comments": [{"owner": {"reputation": 2557, "user_id": 8164116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41EGb.jpg?s=128&g=1", "display_name": "Daksh Gargas", "link": "https://stackoverflow.com/users/8164116/daksh-gargas"}, "edited": false, "score": 2, "creation_date": 1544461026, "post_id": 53710229, "comment_id": 94274899, "body": "Hi, he fixed it. It was some problem with imports"}], "tags": [], "owner": {"reputation": 1485, "user_id": 2323833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45f47a42072b8edc84a9bf81c58fa52e?s=128&d=identicon&r=PG", "display_name": "Maxim Tulupov", "link": "https://stackoverflow.com/users/2323833/maxim-tulupov"}, "is_accepted": false, "score": 1, "last_activity_date": 1544461000, "creation_date": 1544461000, "answer_id": 53710229, "question_id": 53709857, "link": "https://stackoverflow.com/questions/53709857/problems-on-call-retrofit/53710229#53710229", "title": "Problems on call retrofit", "body": "<p>Best practice with kotlin - use rxjava calladapter factory.</p>\n\n<p>Try to add dependency</p>\n\n<p>compile \"com.squareup.retrofit2:adapter-rxjava2:\"</p>\n\n<p>and add call adapter factory</p>\n\n<pre><code>private val retrofit = Retrofit.Builder()\n        .baseUrl(\"http://192.168.0.23:8080/\")\n.addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 1792343, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/737cbb991a74e12f6fbfb437a8194ef0?s=128&d=identicon&r=PG", "display_name": "Fl&#225;vio Costa", "link": "https://stackoverflow.com/users/1792343/fl%c3%a1vio-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1544461000, "creation_date": 1544459655, "last_edit_date": 1544460623, "question_id": 53709857, "link": "https://stackoverflow.com/questions/53709857/problems-on-call-retrofit", "title": "Problems on call retrofit", "body": "<p>I newbie on kotlin, its my firts app test. I trying to do a retrofit call (POST) but i get sintax error on create code.</p>\n\n<p>My syntax error: no type arguments expected for CallBack</p>\n\n<p>this is my doLogin function on presenter layer (i got error here):</p>\n\n<pre><code>override fun doLogin() {\n    val call = RetrofitInitializer().loginApiContract().login()\n\n    call.enqueue(object: Callback&lt;UserAccount&gt; {\n        override fun onResponse(call: Call&lt;UserAccount&gt;?,\n                                response: Response&lt;UserAccount) {\n        }\n\n        override fun onFailure(call: Call&lt;UserAccount&gt;?,\n                               t: Throwable?) {\n        }\n    })\n}\n</code></pre>\n\n<p>and that is my retrofit initializer:</p>\n\n<pre><code>class RetrofitInitializer {\n\n    private val retrofit = Retrofit.Builder()\n        .baseUrl(\"http://192.168.0.23:8080/\")\n        .addConverterFactory(GsonConverterFactory.create())\n        .build()\n\n    fun loginApiContract() : LoginApiContract{\n        return retrofit.create(LoginApiContract::class.java)\n    }\n\n}\n</code></pre>\n\n<p>that is my interface of call:</p>\n\n<pre><code>interface LoginApiContract {\n\n    @POST(\"login\")\n    fun login() : Call&lt;UserAccount&gt;\n\n    @GET(\"statements\")\n    fun getStatements()\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 1664659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5ce42343188b363f611b10829127cf?s=128&d=identicon&r=PG", "display_name": "manu", "link": "https://stackoverflow.com/users/1664659/manu"}, "edited": false, "score": 0, "creation_date": 1544503619, "post_id": 53712958, "comment_id": 94288813, "body": "Thanks. So, if I do not know the amount of messages ahead of time, then I need to use unlimited capacity."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 153, "user_id": 1664659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5ce42343188b363f611b10829127cf?s=128&d=identicon&r=PG", "display_name": "manu", "link": "https://stackoverflow.com/users/1664659/manu"}, "edited": false, "score": 0, "creation_date": 1544506209, "post_id": 53712958, "comment_id": 94289577, "body": "That, or change the logic. E.g. with normal ping-pong, you only send first ping immediately, the rest are in reply to pongs. Then you wouldn&#39;t run into this problem."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1544472804, "creation_date": 1544472804, "answer_id": 53712958, "question_id": 53709207, "link": "https://stackoverflow.com/questions/53709207/kotlin-actors-goes-to-dead-lock-when-capacity-is-less-than-number-of-messages/53712958#53712958", "title": "Kotlin actors goes to dead lock when capacity is less than number of messages", "body": "<blockquote>\n  <p>It only progressed to completion only when I made capacity size same as number of messages.</p>\n</blockquote>\n\n<p>You can check that 50 capacity (for both actors) is actually enough. Let's see what happens with 10:</p>\n\n<ol>\n<li><code>pinger</code> receives the <code>Start</code> message, </li>\n<li><code>pinger</code> tries to send 100 messages to <code>ponger</code>. 10 are sent, 11th blocks until there's more space in the queue. </li>\n<li><code>ponger</code> handles the messages and sends 10 replies.</li>\n<li><code>pinger</code> can now send 10 more messages.</li>\n<li><code>ponger</code> tries to handle the 11th <code>Ping</code>, but blocks when sending the reply, because there are 10 messages in <code>pinger</code>'s mailbox.</li>\n</ol>\n\n<p>Note that <code>pinger</code> doesn't get to ever handling replies because it's still handling the <code>Start</code> message. </p>\n"}], "owner": {"reputation": 153, "user_id": 1664659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e5ce42343188b363f611b10829127cf?s=128&d=identicon&r=PG", "display_name": "manu", "link": "https://stackoverflow.com/users/1664659/manu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 53712958, "answer_count": 1, "score": 2, "last_activity_date": 1544472804, "creation_date": 1544457309, "question_id": 53709207, "link": "https://stackoverflow.com/questions/53709207/kotlin-actors-goes-to-dead-lock-when-capacity-is-less-than-number-of-messages", "title": "Kotlin actors goes to dead lock when capacity is less than number of messages", "body": "<p>I wanted to benchmark akka actors with kotlin actors. With some very basic understanding of kotlin, I tried simple test with ping pong and program got stuck. It only progressed to completion only when I made capacity size same as number of messages. With my understanding both actors should continue doing its work and should not depend on capacity.</p>\n\n<pre><code>import kotlinx.coroutines.CompletableDeferred\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.channels.SendChannel\nimport kotlinx.coroutines.channels.actor\nimport kotlinx.coroutines.runBlocking\n\nsealed class Message\nclass Ping(val replyTo: SendChannel&lt;Message&gt;) : Message()\nobject Pong : Message()\n\nobject Start : Message()\n\nfun CoroutineScope.PingActor() = actor&lt;Message&gt;(capacity = 10) {\n    for (msg in channel) { \n        when (msg) {\n            is Ping -&gt;\n                msg.replyTo.send(Pong)\n        }\n    }\n}\n\nfun CoroutineScope.PongActor(pinger: SendChannel&lt;Message&gt;, count: Int, done: CompletableDeferred&lt;Unit&gt;) =\n    actor&lt;Message&gt; (capacity = 10){\n        var counter = count \n\n        for (msg in channel) { \n            when (msg) {\n                is Start -&gt;\n                    for (i in 1..count) {\n                        pinger.send(Ping(this.channel))\n                    }\n\n                is Pong -&gt; {\n                    counter -= 1\n                    if (counter == 0) {\n                        done.complete(Unit)\n                    }\n                }\n            }\n\n        }\n    }\n\nfun main() = runBlocking&lt;Unit&gt; {\n\n    val response = CompletableDeferred&lt;Unit&gt;()\n    val pinger = PingActor() \n    val ponger = PongActor(pinger, 100, response) \n    val startTime = System.nanoTime()\n\n    ponger.send(Start)\n    response.await()\n\n    println(\"total time taken is ${System.nanoTime() - startTime}\")\n    pinger.close() \n    ponger.close()\n}\n</code></pre>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 12318, "user_id": 1731626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CMaR1.gif?s=128&g=1", "display_name": "Sergey", "link": "https://stackoverflow.com/users/1731626/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1544460779, "creation_date": 1544460779, "answer_id": 53710169, "question_id": 53708709, "link": "https://stackoverflow.com/questions/53708709/kotlin-coroutines-return-string/53710169#53710169", "title": "Kotlin coroutines return String", "body": "<p>One of the possible ways to solve it is to use <code>GlobalScope.async</code> builder:</p>\n\n<pre><code>fun getCompressedVideo() = GlobalScope.async {\n    val outputFile: String = \"\" \n\n    // ... compress video\n\n    outputFile\n}\n\n// Calling getCompressedVideo() from outside\nfun compressVideoAsync() {\n    GlobalScope.launch(Dispatchers.Main) {\n        val compression = getCompressedVideo()\n        val outputFile = compression.await() // wait for result of compression operation without blocking the main thread\n\n        // outputFile is ready to use\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 748, "user_id": 2871826, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/36dad86f4c16612ef574ba82e37c2ebb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/2871826/greg"}, "is_accepted": false, "score": 1, "last_activity_date": 1544460891, "creation_date": 1544460891, "answer_id": 53710197, "question_id": 53708709, "link": "https://stackoverflow.com/questions/53708709/kotlin-coroutines-return-string/53710197#53710197", "title": "Kotlin coroutines return String", "body": "<p>You can specify a Kotlin <a href=\"https://kotlinlang.org/docs/reference/functions.html\" rel=\"nofollow noreferrer\">function</a> return type like so:</p>\n\n<pre><code>override fun getCompressedVideo(context: Context, video: Uri): String {\n</code></pre>\n\n<p>However you still can't because it's asynchronous, a function is synchronous.</p>\n\n<p>To return from the method it would have to wait until it is complete, which goes against the whole purpose of doing it asynchronously.</p>\n\n<p>You can instead use a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"nofollow noreferrer\">high-order function</a> to specify what to do with the data once the async task has been completed.</p>\n\n<pre><code>override fun getCompressedVideo(context:Context ,video: Uri, action: (String?) -&gt; Unit) {\n\n    GlobalScope.launch(Dispatchers.Main) {\n\n        val inputFile = video.getRealPathFromVideoUri(context)\n        val loadJNI: LoadJNI = LoadJNI();\n        try {\n\n            val workFolder: String = context.filesDir.absolutePath\n\n            val outputFile: String = getFileFullName(\n                FilesConstants.VIDEO_FOLDER,\n                String.format(FilesConstants.VIDEO_NAME_FILE_FORMAT, System.currentTimeMillis())\n            );\n\n            val complexCommand = arrayOf (\n                \"ffmpeg\", \"-y\"\n                , \"-i\", inputFile\n                , \"-strict\", \"experimental\"\n                , \"-s\", \"320x240\"\n                , \"-r\", \"25\"\n                , \"-aspect\", \"4:3\"\n                , \"-ab\", \"48000\"\n                , \"-ac\", \"2\"\n                , \"-vcodec\", \"mpeg4\"\n                , \"-movflags\", \"+faststart\"\n                , \"-ar\", \"22050\"\n                , \"-b\", \"2097k\"\n                , outputFile);\n\n            loadJNI.run(complexCommand, workFolder, context);\n            action(outputFile)\n\n        } catch (th: Throwable) {\n            action(null)\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544524754, "post_id": 53710772, "comment_id": 94298141, "body": "what should I return in the catch , there will not be value to return, please check my edit above and tell me if that is what you meant or not"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544525337, "post_id": 53710772, "comment_id": 94298460, "body": "In your new code you return nothing from <code>getCompressedVideo</code> in any case. I&#39;m not sure what your goal is if you did it like that. My version shows a function that returns <code>String</code> and throws any exceptions that occur in the block. You can use the plain-old <code>try-catch</code> on the call site to catch them, or if you prefer, you can catch them inside the function and return whatever you like. Just like you would in plain code."}, {"owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544525473, "post_id": 53710772, "comment_id": 94298548, "body": "this method should be used to take video uri and read it and compress it using ffmpeg and save it to memory and return the new uri of the compressed video"}, {"owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544525536, "post_id": 53710772, "comment_id": 94298586, "body": "so what you mean that I need to change the method and make it return String value, in the try I should return outputfile and in catch I should return null for example, is that you mean ?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544525837, "post_id": 53710772, "comment_id": 94298751, "body": "Yes, <code>null</code> if that works for you. But oftentimes exceptions are better for the case where something doesn&#39;t succeed. The main point is that the choices you have are identical as if it was a plain, non-suspendable function. Both on the call side and on the implementation side."}, {"owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544528249, "post_id": 53710772, "comment_id": 94300117, "body": "please check my Edit 2"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "edited": false, "score": 0, "creation_date": 1544531925, "post_id": 53710772, "comment_id": 94302120, "body": "Yes, something like that, but see my updated answer. You don&#39;t need the <code>return</code> statement, nor do you need to assign the result of <code>withContext</code> to a variable. What you <i>do</i> need to do is implement structured concurrency and avoid calling <code>GlobalScope.launch</code>. This was already covered in my answer."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1544531837, "last_edit_date": 1544531837, "creation_date": 1544463273, "answer_id": 53710772, "question_id": 53708709, "link": "https://stackoverflow.com/questions/53708709/kotlin-coroutines-return-string/53710772#53710772", "title": "Kotlin coroutines return String", "body": "<p>If you expect this function</p>\n\n<pre><code>override fun getCompressedVideo(context: Context, video: Uri)\n</code></pre>\n\n<p>to return when the compression is already done, this is not how it can work. Your code launches a concurrent task that will complete at some arbitrary time after your <code>getCompressedVideo</code> has returned.</p>\n\n<p>Instead, I think you should approach it as follows:</p>\n\n<pre><code>override suspend fun getCompressedVideo(\n        context: Context, video: Uri\n): String? = withContext(Dispatchers.IO) {\n    try {\n        val inputFile = video.getRealPathFromVideoUri(context)\n        val loadJNI = LoadJNI()\n        val workFolder: String = context.filesDir.absolutePath\n        val outputFile: String = getFileFullName(\n                FilesConstants.VIDEO_FOLDER,\n                String.format(FilesConstants.VIDEO_NAME_FILE_FORMAT,\n                        System.currentTimeMillis())\n        )\n        val complexCommand = arrayOf(\"-i\", inputFile, \"other-params\")\n        loadJNI.run(complexCommand, workFolder, context);\n        outputFile\n    } catch (t: Throwable) {\n        null\n    }\n}\n</code></pre>\n\n<p>As you can see, this means changing the declaration of <code>getCompressedVideo</code> to a <code>suspend fun</code>. You can't call it directly from an Android callback. So, at the call site, write</p>\n\n<pre><code>this.launch {\n    val videoFile = ffmpegfacade.getCompressedVideo(context, Uri.parse(\"example.org/video\"))\n    // continue processing on the UI thread using videoFile\n}\n</code></pre>\n\n<p>Here take note that we call <code>launch</code> with <code>this</code> as the receiver. The receiver of <code>launch</code> must be a <code>CoroutineScope</code> and you should implement it in your <code>MainActivity</code> or whatever is the context you're calling it from. See <a href=\"https://kotlinlang.org/docs/reference/coroutines/basics.html#structured-concurrency\" rel=\"nofollow noreferrer\">structured concurrency</a> for an explanation.</p>\n"}], "owner": {"reputation": 8214, "user_id": 458700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0aae22509915fa4da811f48e757f4860?s=128&d=identicon&r=PG&f=1", "display_name": "Amira Elsayed Ismail", "link": "https://stackoverflow.com/users/458700/amira-elsayed-ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3610, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1544531837, "creation_date": 1544455540, "last_edit_date": 1544528538, "question_id": 53708709, "link": "https://stackoverflow.com/questions/53708709/kotlin-coroutines-return-string", "title": "Kotlin coroutines return String", "body": "<p>I am trying to convert a method from java to kotlin and replace <code>AsyncTask</code> with coroutines, but I do not know how to return value from coroutines</p>\n\n<p>This is my method</p>\n\n<pre><code>override fun getCompressedVideo(context:Context ,video: Uri) {\n\n        GlobalScope.launch(Dispatchers.Main) {\n\n            val inputFile = video.getRealPathFromVideoUri(context)\n            val loadJNI: LoadJNI = LoadJNI();\n            try {\n\n                val workFolder: String = context.filesDir.absolutePath\n\n                val outputFile: String = getFileFullName(\n                    FilesConstants.VIDEO_FOLDER,\n                    String.format(FilesConstants.VIDEO_NAME_FILE_FORMAT, System.currentTimeMillis())\n                );\n\n                val complexCommand = arrayOf (\n                    \"ffmpeg\", \"-y\"\n                    , \"-i\", inputFile\n                    , \"-strict\", \"experimental\"\n                    , \"-s\", \"320x240\"\n                    , \"-r\", \"25\"\n                    , \"-aspect\", \"4:3\"\n                    , \"-ab\", \"48000\"\n                    , \"-ac\", \"2\"\n                    , \"-vcodec\", \"mpeg4\"\n                    , \"-movflags\", \"+faststart\"\n                    , \"-ar\", \"22050\"\n                    , \"-b\", \"2097k\"\n                    , outputFile);\n\n                loadJNI.run(complexCommand, workFolder, context);\n                return outputFile\n\n            } catch (th: Throwable) {\n                return@launch\n            }\n        }\n    }\n</code></pre>\n\n<p>the line of <strong>return outputFile</strong> makes compilation error, can anyone please help, it is my first time to use coroutines</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>here is the method after using suspend, but now I do not know how I can return value if any problem happen </p>\n\n<pre><code>override suspend fun getCompressedVideo(context: Context, video: Uri) {\n\n        val outputFile = withContext(Dispatchers.IO) {\n\n            val inputFile = video.getRealPathFromVideoUri(context)\n            val loadJNI: LoadJNI = LoadJNI();\n            try {\n\n                val workFolder: String = context.filesDir.absolutePath\n\n                val outputFile: String = getFileFullName(\n                    FilesConstants.VIDEO_FOLDER,\n                    String.format(FilesConstants.VIDEO_NAME_FILE_FORMAT, System.currentTimeMillis())\n                );\n\n                val complexCommand = arrayOf(\n                    \"ffmpeg\", \"-y\"\n                    , \"-i\", inputFile\n                    , \"-strict\", \"experimental\"\n                    , \"-s\", \"320x240\"\n                    , \"-r\", \"25\"\n                    , \"-aspect\", \"4:3\"\n                    , \"-ab\", \"48000\"\n                    , \"-ac\", \"2\"\n                    , \"-vcodec\", \"mpeg4\"\n                    , \"-movflags\", \"+faststart\"\n                    , \"-ar\", \"22050\"\n                    , \"-b\", \"2097k\"\n                    , outputFile\n                );\n\n                loadJNI.run(complexCommand, workFolder, context)\n            }catch (th: Throwable) {\n            }\n        }\n    }\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>you mean like this </p>\n\n<pre><code>override suspend fun getCompressedVideo(context: Context, video: Uri) : String {\n\n        try {\n            val retValue = withContext(Dispatchers.IO) {\n\n                val inputFile = video.getRealPathFromVideoUri(context)\n                val loadJNI: LoadJNI = LoadJNI()\n\n                val workFolder: String = context.filesDir.absolutePath\n\n                val outputFile: String = getFileFullName(\n                    FilesConstants.VIDEO_FOLDER,\n                    String.format(FilesConstants.VIDEO_NAME_FILE_FORMAT, System.currentTimeMillis())\n                )\n\n                val complexCommand = arrayOf(\n                    \"ffmpeg\", \"-y\"\n                    , \"-i\", inputFile\n                    , \"-strict\", \"experimental\"\n                    , \"-s\", \"320x240\"\n                    , \"-r\", \"25\"\n                    , \"-aspect\", \"4:3\"\n                    , \"-ab\", \"48000\"\n                    , \"-ac\", \"2\"\n                    , \"-vcodec\", \"mpeg4\"\n                    , \"-movflags\", \"+faststart\"\n                    , \"-ar\", \"22050\"\n                    , \"-b\", \"2097k\"\n                    , outputFile\n                )\n\n                loadJNI.run(complexCommand, workFolder, context)\n            }\n\n            return retValue.toString()\n        } catch (th: Throwable) {\n            return \"\"\n        }\n    }\n</code></pre>\n\n<p>and call it like</p>\n\n<pre><code>GlobalScope.launch {\n            val retValue = ffmpegFacade.getCompressedVideo(this@TestActivity, Uri.parse(\"\"))\n        }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544516059, "post_id": 53708701, "comment_id": 94293129, "body": "Can you share code where you obtain <code>DevicesViewModel</code> and use it?"}, {"owner": {"reputation": 1004, "user_id": 5437363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Bz3VZ.png?s=128&g=1", "display_name": "Ahmad Sattout", "link": "https://stackoverflow.com/users/5437363/ahmad-sattout"}, "reply_to_user": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544541503, "post_id": 53708701, "comment_id": 94307709, "body": "@ConstOrVar added"}, {"owner": {"reputation": 1720, "user_id": 8490194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/003116725d07e12e51de7c159bd2f218?s=128&d=identicon&r=PG&f=1", "display_name": "ConstOrVar", "link": "https://stackoverflow.com/users/8490194/constorvar"}, "edited": false, "score": 0, "creation_date": 1544602894, "post_id": 53708701, "comment_id": 94330044, "body": "It looks strange. Don&#39;t see any errors in your code - surviving of view model during config change should work."}], "answers": [{"tags": [], "owner": {"reputation": 2583, "user_id": 9248718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WzbRd.png?s=128&g=1", "display_name": "Some random IT boy", "link": "https://stackoverflow.com/users/9248718/some-random-it-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1546700306, "creation_date": 1546700306, "answer_id": 54053187, "question_id": 53708701, "link": "https://stackoverflow.com/questions/53708701/using-android-viewmodel-not-working-as-expected/54053187#54053187", "title": "Using Android ViewModel not working as expected", "body": "<p>I would need to see a bit further deep in your code, but your code is probably not working because you're passing <code>this</code> and you should pass <code>this.activity</code> to the <code>ViewModelProvider</code>, like so:</p>\n\n<pre><code>myviewModel = ViewModelProvider.of(this.activity).get(MyViewModel::class.java)\nmyviewmodel.data({this.lifecycle}, { data -&gt; Log.d(\"NEWDATA\", data) }\n</code></pre>\n\n<p>Assuming that <code>data</code> is a <code>LiveData</code> object.\nThis should be done to every ViewModelProvider where you want to share data, for instance if you're sharing data between two different fragments that are bound to the same activity, then you should call <code>ViewModelProvider.of(this.activity)</code> on both of them</p>\n"}], "owner": {"reputation": 1004, "user_id": 5437363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Bz3VZ.png?s=128&g=1", "display_name": "Ahmad Sattout", "link": "https://stackoverflow.com/users/5437363/ahmad-sattout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546700306, "creation_date": 1544455507, "last_edit_date": 1544541494, "question_id": 53708701, "link": "https://stackoverflow.com/questions/53708701/using-android-viewmodel-not-working-as-expected", "title": "Using Android ViewModel not working as expected", "body": "<p>When using this code to get the devices data, it works well. But when doing any configuration change (orientation change), the loading starts again instead of delivering the already loaded data.</p>\n\n<pre><code>class DevicesViewModel(app: Application) : AndroidViewModel(app) {\n    val data = DevicesLiveData()\n\n    inner class DevicesLiveData : LiveData&lt;List&lt;Device&gt;&gt;() {\n        init {\n            SpecsUtils.devicesListLimit { value = it }\n        }\n    }\n}\n</code></pre>\n\n<p>Am I doing something wrong? I followed some tutorial on Medium.</p>\n\n<p>As I recall, ViewModel and LiveData is designed to survive configuration changes and lifecycle events, so the data should be loaded only once.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I'm aquiring the ViewModel like this</p>\n\n<pre><code>ViewModelProviders.of(this).get&lt;DevicesViewModel&gt;().data.observe(this, Observer {\n    adapter.devices = it\n})\n</code></pre>\n"}, {"tags": ["android", "kotlin", "constraint-layout-chains"], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 6997537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3edddaf2df3627c1c597786df46c07f?s=128&d=identicon&r=PG", "display_name": "Tweety B", "link": "https://stackoverflow.com/users/6997537/tweety-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1545217717, "creation_date": 1545217717, "answer_id": 53849989, "question_id": 53708616, "link": "https://stackoverflow.com/questions/53708616/constraintlayout-by-code-set-constraint-too-soon/53849989#53849989", "title": "ConstraintLayout by Code - Set Constraint too soon", "body": "<p>I have found a better way.</p>\n\n<p>It seems that the constraints creation must be ensured to be done on the UI Thread. This is why it does work with the <code>timeout</code>.</p>\n\n<p>So, I have changed the <code>timeout</code> call by the Anko call:</p>\n\n<pre><code>doAsync {\n  uiThread {\n    resetCardLayout()\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6997537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3edddaf2df3627c1c597786df46c07f?s=128&d=identicon&r=PG", "display_name": "Tweety B", "link": "https://stackoverflow.com/users/6997537/tweety-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545217717, "creation_date": 1544455203, "last_edit_date": 1544493544, "question_id": 53708616, "link": "https://stackoverflow.com/questions/53708616/constraintlayout-by-code-set-constraint-too-soon", "title": "ConstraintLayout by Code - Set Constraint too soon", "body": "<p>Good day,</p>\n\n<p>I need to show a list of fidelity cards, one on the others with a small border margin, and while clicking on it, it reveal it completely while sliding.</p>\n\n<p>In a fragment, I use a <code>ConstraintLayout</code> somewhere in the screen that I populate by code. \nI add all child's (total known after WS called) into the ConstraintLayout, then I am using <code>ConstraintSet</code> to set the initial constraints.</p>\n\n<p>But at the initial fragment creation, I have found out that <strong>I must apply a TimeOut</strong> between the <code>ConstraintLayout</code> population and creating the <code>Constraints</code> (disgusting, right?)</p>\n\n<p>adding each card...</p>\n\n<pre><code>val card = FrequencyCardView()\nfid_card_container.addView(card as View)\nlistCard.add(card)\n</code></pre>\n\n<p>Then create the constraints:</p>\n\n<pre><code>val set = ConstraintSet()\nval containerId = fid_card_container.id\nset.clone(fid_card_container)\n\nlistCard.forEachIndexed { index, card -&gt;\n    val marginTop = when (index) {\n        0 -&gt; 0\n        else -&gt; (listCard[index -1] as ViewGroup).height / 4\n    }\n\n    val rootId = if (index == 0) containerId else (index - 1)\n\n    set.connect(card.getId(), TOP, rootId, TOP, marginTop)\n    set.connect(card.getId(), ConstraintSet.START, containerId, ConstraintSet.START, 0)\n    set.connect(card.getId(), ConstraintSet.END, containerId, ConstraintSet.END, 0)\n    card.setOpen(false)\n}\n\n// Apply the changes\nset.applyTo(fid_card_container)\n</code></pre>\n\n<p>Any idea, why I need to apply any timeout between adding the Childs into the ConstraintLayout and then add the Constraints?</p>\n\n<p>Any better solution, that this ugly TimeOut?\nThanks</p>\n"}, {"tags": ["android", "kotlin", "cryptography", "bouncycastle", "ecdsa"], "answers": [{"comments": [{"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1544714066, "post_id": 53708061, "comment_id": 94381531, "body": "Maybe you can help me again here? <a href=\"https://stackoverflow.com/questions/53764831/how-to-construct-private-key-from-generated-previously-ecdsa-key-pair\" title=\"how to construct private key from generated previously ecdsa key pair\">stackoverflow.com/questions/53764831/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": false, "score": 2, "last_activity_date": 1544453238, "creation_date": 1544453238, "answer_id": 53708061, "question_id": 53706767, "link": "https://stackoverflow.com/questions/53706767/how-to-reconstruct-33-byte-compressed-nist-p-256-public-key-from-33-bytes/53708061#53708061", "title": "How to reconstruct 33-byte compressed NIST P-256 public key from 33 bytes?", "body": "<p>The primary problem is that your <code>publicEncoded</code> is not an encoded public key, but an encoded <code>ECPoint</code> (<code>publicKey.q</code>).\nThis means you need to first reconstruct the point and then provide the appropriate curve to reconstruct the key to obtain the correct <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/spec/ECPublicKeySpec.html\" rel=\"nofollow noreferrer\"><code>ECPublicKeySpec</code></a>.</p>\n\n<ol>\n<li>First re-obtain the chosen curve spec with <code>ECNamedCurveTable.getParameterSpec(\"secp256r1\")</code>. You can then use <code>ecSpec.curve.decodePoint(publicEncoded)</code> to reconstruct the BC <code>ECPoint</code> instance.</li>\n<li>Turn the BouncyCastle <code>ECNamedCurveParameterSpec</code> into the <code>java.security.spec.ECParameterSpec</code> and the BouncyCastle <code>ECPoint</code> into the java <code>java.security.spec.ECPoint</code>. Then construct the appropriate <code>ECPublicKeySpec</code> which can then be used by the <code>ECDSA</code> key generator to recreate the complete <code>PublicKey</code>.</li>\n</ol>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://people.eecs.berkeley.edu/~jonah/lcrypto/org/bouncycastle/math/ec/ECPoint.html#getEncoded()\" rel=\"nofollow noreferrer\"><code>ECPoint.getEncoded()</code></a> / <a href=\"https://people.eecs.berkeley.edu/~jonah/lcrypto/org/bouncycastle/math/ec/ECCurve.html#decodePoint(byte[])\" rel=\"nofollow noreferrer\"><code>ECCurve.decodePoint(byte[])</code></a></li>\n<li><a href=\"http://people.eecs.berkeley.edu/~jonah/bc/org/bouncycastle/jce/spec/ECNamedCurveParameterSpec.html\" rel=\"nofollow noreferrer\"><code>ECNamedCurveParameterSpec</code></a> / <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/spec/ECParameterSpec.html\" rel=\"nofollow noreferrer\"><code>ECPublicKeySpec</code></a></li>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/spec/ECPublicKeySpec.html\" rel=\"nofollow noreferrer\"><code>ECPublicKeySpec(ECPoint, ECParameterSpec)</code></a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1544629283, "post_id": 53730794, "comment_id": 94345415, "body": "You&#39;d need to properly convert <code>point</code> and <code>ecSpec</code> since the types returned by <code>ECNamedCurveTable</code> are not compatible."}, {"owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "reply_to_user": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1544640660, "post_id": 53730794, "comment_id": 94351675, "body": "@Kiskae There is no need for conversion as long as you use the Bouncy Castle versions of the classes instead of the jce versions."}], "tags": [], "owner": {"reputation": 45782, "user_id": 5542, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/qSMgT.jpg?s=128&g=1", "display_name": "Rasmus Faber", "link": "https://stackoverflow.com/users/5542/rasmus-faber"}, "is_accepted": true, "score": 1, "last_activity_date": 1544640597, "last_edit_date": 1544640597, "creation_date": 1544555206, "answer_id": 53730794, "question_id": 53706767, "link": "https://stackoverflow.com/questions/53706767/how-to-reconstruct-33-byte-compressed-nist-p-256-public-key-from-33-bytes/53730794#53730794", "title": "How to reconstruct 33-byte compressed NIST P-256 public key from 33 bytes?", "body": "<p>This should do the job:</p>\n\n<pre><code>import org.bouncycastle.jce.ECNamedCurveTable\nimport org.bouncycastle.jce.spec.ECPublicKeySpec\n\nfun publicKeyFromCompressed(compressedPublicKey: ByteArray): PublicKey {\n    val ecSpec = ECNamedCurveTable.getParameterSpec(\"secp256r1\")\n    val point = ecSpec.curve.decodePoint(compressedPublicKey)\n    val publicKeySpec = ECPublicKeySpec(point, ecSpec)\n    val keyFactory = KeyFactory.getInstance(\"ECDSA\")\n    val publicKey = keyFactory.generatePublic(publicKeySpec)\n    return publicKey\n}\n</code></pre>\n"}], "owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 53730794, "answer_count": 2, "score": 0, "last_activity_date": 1544640597, "creation_date": 1544448754, "last_edit_date": 1544449090, "question_id": 53706767, "link": "https://stackoverflow.com/questions/53706767/how-to-reconstruct-33-byte-compressed-nist-p-256-public-key-from-33-bytes", "title": "How to reconstruct 33-byte compressed NIST P-256 public key from 33 bytes?", "body": "<p>Supposed that the 33 bytes encoded Public Key can be created like this:</p>\n\n<pre><code>Security.addProvider(provider)\nval generator = KeyPairGenerator.getInstance(\"ECDSA\")\nval ecSpec = ECNamedCurveTable.getParameterSpec(\"secp256r1\")\ngenerator.initialize(ecSpec)\nval keyPair = generator.generateKeyPair()\nval privateKey = keyPair.private as ECPrivateKey\nval publicKey = keyPair.public as ECPublicKey\nval publicEncoded = publicKey.q.getEncoded(true)\n</code></pre>\n\n<p>How can I reconstruct it again on the other side (when I am having only the 33 bytes sent from here)?</p>\n\n<p>I was trying below code:</p>\n\n<pre><code>val publicKey =KeyFactory.getInstance(\"EC\").generatePublic(X509EncodedKeySpec(publicEncoded))\n</code></pre>\n\n<p>But I guess this is totally wrong, as I am getting the:</p>\n\n<blockquote>\n  <p>java.security.spec.InvalidKeySpecException: java.lang.RuntimeException: error:0c000079:ASN.1 encoding routines:OPENSSL_internal:HEADER_TOO_LONG</p>\n</blockquote>\n\n<p>I was trying also:</p>\n\n<pre><code>val generator = KeyPairGenerator.getInstance(\"ECDSA\")\nval ecPublicKey = generator\n        .generatePublic(X509EncodedKeySpec((publicEncoded))) as ECPublicKey\n</code></pre>\n\n<p>But the error is:</p>\n\n<blockquote>\n  <p>java.security.spec.InvalidKeySpecException: encoded key spec not recognised</p>\n</blockquote>\n\n<p>How to achieve my goal?</p>\n"}, {"tags": ["kotlin", "code-duplication", "kotlin-extension", "spannablestringbuilder"], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1544518011, "post_id": 53705978, "comment_id": 94294033, "body": "thanks for the answer @maro\u0161-\u0160eleng, I really appreciate it!  I&#39;m gonna try it tonight."}], "tags": [], "owner": {"reputation": 1385, "user_id": 4971561, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-YIQlI2oeD5Q/AAAAAAAAAAI/AAAAAAAAAGA/jJHvlu2yYaI/photo.jpg?sz=128", "display_name": "Maro\u0161 \u0160eleng", "link": "https://stackoverflow.com/users/4971561/maro%c5%a1-%c5%a0eleng"}, "is_accepted": true, "score": 4, "last_activity_date": 1544446043, "creation_date": 1544446043, "answer_id": 53705978, "question_id": 53705717, "link": "https://stackoverflow.com/questions/53705717/kotlin-create-custom-ext-function-for-spannablestringbuilder-without-duplicate/53705978#53705978", "title": "Kotlin - Create custom ext function for SpannableStringBuilder without duplicate arguments when declaring start, end &amp; flasg for setSpans()", "body": "<p>You can use extensions included in <code>core-ktx</code> which simplify using, more specifically, building <code>SpannedString</code> in kotlin as so:</p>\n\n<pre><code>buildSpannedString {\n    bold {\n        append(\"hitherejoe\")\n    }\n}\n</code></pre>\n\n<p>I guess you would use it like this:</p>\n\n<pre><code>buildSpannedString {\n    bold {\n        inSpans(ForegroundColorSpan(ContextCompat.getColor(textView.context, R.color.mainGreen))) {\n            append(\"string\")\n        }\n    }\n}\n</code></pre>\n\n<p>See <a href=\"https://android.github.io/android-ktx/core-ktx/androidx.text/index.html\" rel=\"nofollow noreferrer\">androidx.text</a> package for reference.</p>\n\n<p>I took the example from <a href=\"https://medium.com/exploring-android/exploring-ktx-for-android-13a369795b51\" rel=\"nofollow noreferrer\">this</a> Medium post by Joe Birch.</p>\n"}], "owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1979, "favorite_count": 1, "accepted_answer_id": 53705978, "answer_count": 1, "score": 1, "last_activity_date": 1544446043, "creation_date": 1544445057, "question_id": 53705717, "link": "https://stackoverflow.com/questions/53705717/kotlin-create-custom-ext-function-for-spannablestringbuilder-without-duplicate", "title": "Kotlin - Create custom ext function for SpannableStringBuilder without duplicate arguments when declaring start, end &amp; flasg for setSpans()", "body": "<p>this is MainActivity.kt before</p>\n\n<pre><code>var spannable = SpannableStringBuilder(\"$noColorText$coloredText\")\nspannable.setSpan(\n    ForegroundColorSpan(ContextCompat.getColor(textView.context, R.color.mainGreen)),\n    noColorText.length, spannable.length,\n    Spannable.SPAN_EXCLUSIVE_INCLUSIVE\n)\nspannable.setSpan(\n    StyleSpan(BOLD),\n    noColorText.length, spannable.length,\n    Spannable.SPAN_EXCLUSIVE_INCLUSIVE\n)\ntextView.text = spannable\n</code></pre>\n\n<p>Here's my approach so far.</p>\n\n<p>Extension.kt</p>\n\n<pre><code>// TODO: e.g: \"string\".putSpans(start, end, flags) { ForgroundColorSpan(color), StyleSpan(BOLD) }\nfun String.putSpans(vararg flags: Int.() -&gt; Unit, spanBuilder: SpannableStringBuilder.() -&gt; Unit):\n    SpannableStringBuilder = SpannableStringBuilder(this).apply(spanBuilder)\n</code></pre>\n\n<p>MainActivity.kt</p>\n\n<pre><code>// TODO: Change SpannableBuilder to be modular (without, reinput duplicate args)\nval resultSpan = \"$noColorText$coloredText \".putSpans {\n    setSpan(ForegroundColorSpan(ContextCompat.getColor(textView.context, R.color.mainGreen)),\n        noColorText.length, this.length, // this is duplicate\n        Spannable.SPAN_EXCLUSIVE_INCLUSIVE) // this is duplicate\n    setSpan(StyleSpan(BOLD),\n        noColorText.length, this.length, // this is duplicate\n        Spannable.SPAN_EXCLUSIVE_INCLUSIVE) // this is duplicate\n    }\n\ntextView.text = resultSpan\n</code></pre>\n\n<p>Is this possible to create extension like this </p>\n\n<pre><code>\"string\".putSpans(start, end, flags) { ForgroundColorSpan(color), StyleSpan(BOLD) }\n</code></pre>\n\n<p>so we don't have to use duplicate start, end, also flags argument, but open for modification, e.g:</p>\n\n<pre><code>\"string\".putSpans(start, end, flags) { // for default value\n span(ForgroundColorSpan(color), diffStart, diffEnd), \n span(StyleSpan(BOLD), diffFlags) \n}\n</code></pre>\n"}, {"tags": ["java", "android", "string", "kotlin", "long-integer"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 6, "creation_date": 1544443241, "post_id": 53705231, "comment_id": 94265022, "body": "<code>countryCode.getCode().toString()</code>"}, {"owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1544443568, "post_id": 53705231, "comment_id": 94265181, "body": "@yole : There none of public method allow you pars long value to string in Kotlin.  Basically, Kotlin does not have long value. Only Long"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1544443637, "post_id": 53705231, "comment_id": 94265226, "body": "Before telling me that my solution does not work, could you please try it first?"}, {"owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1544443968, "post_id": 53705231, "comment_id": 94265398, "body": "Thank you! Let me try it"}, {"owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1544497208, "post_id": 53705231, "comment_id": 94287482, "body": "@yole Thank you man ! It works . Kotlin auto cast long to Long so we can convert to String by toString()"}], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 2, "last_activity_date": 1544445605, "creation_date": 1544445605, "answer_id": 53705854, "question_id": 53705231, "link": "https://stackoverflow.com/questions/53705231/parsing-java-long-value-to-string-in-kotlin/53705854#53705854", "title": "Parsing java long value to String in Kotlin", "body": "<p>The <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html\" rel=\"nofollow noreferrer\"><code>kotlin.Long</code></a> type</p>\n\n<blockquote>\n  <p>Represents a 64-bit signed integer. On the JVM, non-nullable values of this type are represented as values of the primitive type <code>long</code>.</p>\n</blockquote>\n\n<p>While <code>Long?</code> would be represented as <code>java.lang.Long</code>.</p>\n\n<p>You'll find a <code>toString()</code> method within the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/to-string.html\" rel=\"nofollow noreferrer\">documentation</a> as well.</p>\n"}], "owner": {"reputation": 812, "user_id": 951917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Bogl2.jpg?s=128&g=1", "display_name": "Bulma", "link": "https://stackoverflow.com/users/951917/bulma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4241, "favorite_count": 0, "accepted_answer_id": 53705854, "answer_count": 1, "score": -1, "last_activity_date": 1544445605, "creation_date": 1544443149, "question_id": 53705231, "link": "https://stackoverflow.com/questions/53705231/parsing-java-long-value-to-string-in-kotlin", "title": "Parsing java long value to String in Kotlin", "body": "<p>I have a Java class that is generate by ApolloClient framework.<br>\nIn generally , all of my code is written in Kotlin.<br>\nThere is a problem that long value in Java can not parsed to String( or Long) in Kotlin.  </p>\n\n<p>Here is the snippet code:<br>\n(Java code)<br>\nCountryCode.java  </p>\n\n<pre><code>public class CountryCode {\n    private long code;\n\n    public long getCode(){\n      return code;\n    }\n}\n</code></pre>\n\n<p>(Kotlin code)<br>\nCountryUseCase.kt</p>\n\n<pre><code>fun getCode(countryCode: CountryCode) : String {\n    return countryCode.getCode()   // We have to convert long to String here !!!\n}\n</code></pre>\n\n<p>How to convert long value of Java class to String in Kotlin class ?</p>\n"}, {"tags": ["android", "collections", "kotlin", "mutablelist"], "comments": [{"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1544442560, "post_id": 53704981, "comment_id": 94264684, "body": "&quot;I have an error&quot;: would you reveal which one?"}, {"owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "reply_to_user": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1544443148, "post_id": 53704981, "comment_id": 94264986, "body": "at first, I must find a way to convert it.title to mutable list. because Collections.sort need that. I don&#39;t know how to push all it.title from a model into a mutable list and then I think I must use return before Collections.sort for fixing .sortedBy"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544445158, "post_id": 53704981, "comment_id": 94266051, "body": "don&#39;t mix <code>Collections.sort</code> and <code>sortedBy</code>. You may want to have a look at <code>sortWith</code> instead.... also: <code>sortedBy</code> and <code>sortedWith</code> are similar (they return a new list), whereas <code>sortWith</code> operates on the current list..."}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1544541574, "post_id": 53704981, "comment_id": 94307758, "body": "how can the accepted answer be <b>the</b> answer to your problem? it is way too complicated than any other answer, it uses <code>Observable</code>/<code>Subscriber</code>, something you didn&#39;t..."}], "answers": [{"tags": [], "owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "is_accepted": false, "score": 2, "last_activity_date": 1544442957, "creation_date": 1544442957, "answer_id": 53705191, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin/53705191#53705191", "title": "Sorting Strings that contains number in kotlin", "body": "<p>A possible solution based on the data you posted:</p>\n\n<pre><code>sortedBy { \"s(\\\\d+)\".toRegex().matchEntire(it)?.groups?.get(1)?.value?.toInt() }\n</code></pre>\n\n<p>Of course I would move the regex out of the lambda, but it is a more concise answer this way.</p>\n"}, {"comments": [{"owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "edited": false, "score": 0, "creation_date": 1544444126, "post_id": 53705194, "comment_id": 94265484, "body": "how I must push all it.title into a list and use in sortData ?"}, {"owner": {"reputation": 3285, "user_id": 575772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/418952c15563c7fc60d08becd9a69753?s=128&d=identicon&r=PG", "display_name": "hakim", "link": "https://stackoverflow.com/users/575772/hakim"}, "reply_to_user": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "edited": false, "score": 0, "creation_date": 1544446433, "post_id": 53705194, "comment_id": 94266674, "body": "@MehrdadDolatkhah I update my sample, hopefully it can give you the idea how to solve your problem, how to access title (attribute). change class <code>Test</code> with your <code>MyModel</code> class"}], "tags": [], "owner": {"reputation": 3285, "user_id": 575772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/418952c15563c7fc60d08becd9a69753?s=128&d=identicon&r=PG", "display_name": "hakim", "link": "https://stackoverflow.com/users/575772/hakim"}, "is_accepted": false, "score": 5, "last_activity_date": 1544446385, "last_edit_date": 1544446385, "creation_date": 1544442990, "answer_id": 53705194, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin/53705194#53705194", "title": "Sorting Strings that contains number in kotlin", "body": "<p>you can use <code>sortWith</code> instead of sortBy\nfor example:</p>\n\n<pre><code>class Test(val title:String) {\n  override fun toString(): String {\n    return \"$title\"\n  }\n}\n\nval list = listOf&lt;Test&gt;(Test(\"s1\"), Test(\"s101\"),\nTest(\"s131\"), Test(\"s321\"), Test(\"s23\"), Test(\"s21\"), Test(\"s22\"))\nval sortData = list.sortedWith( object : Comparator&lt;Test&gt; {\noverride fun compare(o1: Test, o2: Test): Int {\n    return extractInt(o1) - extractInt(o2)\n}\n\nfun extractInt(s: Test): Int {\n    val num = s.title.replace(\"\\\\D\".toRegex(), \"\")\n    // return 0 if no digits found\n    return if (num.isEmpty()) 0 else Integer.parseInt(num)\n}\n</code></pre>\n\n<p>})</p>\n\n<p>will give output:\n<code>\n[s1, s21, s22, s23, s101, s131, s321]\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1544444273, "last_edit_date": 1544444273, "creation_date": 1544443105, "answer_id": 53705221, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin/53705221#53705221", "title": "Sorting Strings that contains number in kotlin", "body": "<p>As you state that you need a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-list/index.html\" rel=\"nofollow noreferrer\"><code>MutableList</code></a>, but don't have one yet, you should use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by.html\" rel=\"nofollow noreferrer\"><code>sortedBy</code></a> or <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-with.html\" rel=\"nofollow noreferrer\"><code>sortedWith</code></a> (in case you want to work with a comparator) instead and you get just a (new) list out of your current one, e.g.:</p>\n\n<pre><code>val yourMutableSortedList = reversedData.sortedBy {\n  pattern.find(it)?.value?.toInt() ?: 0\n}.toMutableList() // now calling toMutableList only because you said you require one... so why don't just sorting it into a new list and returning a mutable list afterwards?\n</code></pre>\n\n<p>You may want to take advantage of <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.comparisons/compare-by.html\" rel=\"nofollow noreferrer\"><code>compareBy</code></a> (or Javas <code>Comparator.comparing</code>) for <code>sortedWith</code>.</p>\n\n<p>If you just want to sort an existing mutable list use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort-with.html\" rel=\"nofollow noreferrer\"><code>sortWith</code></a> (or <code>Collections.sort</code>):</p>\n\n<pre><code>reversedData.sortWith(compareBy {\n  pattern.find(it)?.value?.toInt() ?: 0\n})\n\n// or using Java imports:\nCollections.sort(reversedData, Compatarator.comparingInt {\n  pattern.find(it)?.value?.toInt() ?: 0 // what would be the default for non-matching ones?\n})\n</code></pre>\n\n<p>Of course you can also play around with other comparator helpers (e.g. mixing nulls last, or similar), e.g.:</p>\n\n<pre><code>reversedData.sortWith(nullsLast(compareBy {\n  pattern.find(it)?.value\n}))\n</code></pre>\n\n<p>For the samples above I used the following <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex/index.html#kotlin.text.Regex\" rel=\"nofollow noreferrer\"><code>Regex</code></a>:</p>\n\n<pre><code>val pattern = \"\"\"\\d+\"\"\".toRegex()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1545822759, "post_id": 53718137, "comment_id": 94703041, "body": "Use Kotlin&#39;s regex extensions, they&#39;re shorter and simpler. Check my answer for an example."}], "tags": [], "owner": {"reputation": 26, "user_id": 7955966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c2ac2b460c532cee4192c4e1f2f56ac?s=128&d=identicon&r=PG&f=1", "display_name": "alireza davari", "link": "https://stackoverflow.com/users/7955966/alireza-davari"}, "is_accepted": true, "score": 1, "last_activity_date": 1544507452, "creation_date": 1544507452, "answer_id": 53718137, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin/53718137#53718137", "title": "Sorting Strings that contains number in kotlin", "body": "<p>A possible solution can be this:</p>\n\n<pre><code>  reversedData.toObservable()\n                    .sorted { o1, o2 -&gt;\n                        val pattern = Pattern.compile(\"\\\\d+\")\n                        val matcher = pattern.matcher(o1.title)\n                        val matcher2 = pattern.matcher(o2.title)\n\n                        if (matcher.find()) {\n                            matcher2.find()\n                            val o1Num = matcher.group(0).toInt()\n                            val o2Num = matcher2.group(0).toInt()\n\n                            return@sorted o1Num - o2Num\n                        } else {\n                            return@sorted o1.title?.compareTo(o2.title ?: \"\") ?: 0\n                        }\n                    }\n                    .toList()\n                    .subscribeBy(\n                        onError = {\n                            it\n                        },\n                        onSuccess = {\n                            reversedData = it\n                        }\n                    )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3317, "user_id": 2557258, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBgdF.jpg?s=128&g=1", "display_name": "Yazon2006", "link": "https://stackoverflow.com/users/2557258/yazon2006"}, "edited": false, "score": 0, "creation_date": 1597261468, "post_id": 55624950, "comment_id": 112078684, "body": "So adapt your comparator and share adapted version please."}], "tags": [], "owner": {"reputation": 1194, "user_id": 9023855, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd191c69fcbab7943d35091f60d1c8ce?s=128&d=identicon&r=PG", "display_name": "Polv", "link": "https://stackoverflow.com/users/9023855/polv"}, "is_accepted": false, "score": -1, "last_activity_date": 1554958381, "creation_date": 1554958381, "answer_id": 55624950, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin/55624950#55624950", "title": "Sorting Strings that contains number in kotlin", "body": "<p>I wrote a custom comparator for my JSON sorting. It can be adapted from bare String/Number/Null</p>\n\n<pre><code>fun getComparator(sortBy: String, desc: Boolean = false): Comparator&lt;SearchResource.SearchResult&gt; {\n    return Comparator { o1, o2 -&gt;\n        val v1 = getCompValue(o1, sortBy)\n        val v2 = getCompValue(o2, sortBy)\n\n        (if (v1 is Float &amp;&amp; v2 is Float) {\n            v1 - v2\n        } else if (v1 is String &amp;&amp; v2 is String) {\n            v1.compareTo(v2).toFloat()\n        } else {\n            getCompDefault(v1) - getCompDefault(v2)\n        }).sign.toInt() * (if (desc) -1 else 1)\n    }\n}\n\nprivate fun getCompValue(o: SearchResource.SearchResult, sortBy: String): Any? {\n    val sorter = gson.fromJson&lt;JsonObject&gt;(gson.toJson(o))[sortBy]\n    try {\n        return sorter.asFloat\n    } catch (e: ClassCastException) {\n        try {\n            return sorter.asString\n        } catch (e: ClassCastException) {\n            return null\n        }\n    }\n}\n\nprivate fun getCompDefault(v: Any?): Float {\n    return if (v is Float) v else if (v is String) Float.POSITIVE_INFINITY else Float.NEGATIVE_INFINITY\n}\n</code></pre>\n"}], "owner": {"reputation": 600, "user_id": 4312860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b605c132d5e3b2c917b0a7b0ac6e11ad?s=128&d=identicon&r=PG", "display_name": "Mehrdad Dolatkhah", "link": "https://stackoverflow.com/users/4312860/mehrdad-dolatkhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3002, "favorite_count": 0, "accepted_answer_id": 53718137, "answer_count": 5, "score": 3, "last_activity_date": 1554958381, "creation_date": 1544442209, "last_edit_date": 1544444782, "question_id": 53704981, "link": "https://stackoverflow.com/questions/53704981/sorting-strings-that-contains-number-in-kotlin", "title": "Sorting Strings that contains number in kotlin", "body": "<p>I wanna sort some strings that contain numbers but after a sort, it becomes like this <code>[\"s1\", \"s10\", \"s11\", ... ,\"s2\", \"s21\", \"s22\"]</code>. after i search i fount this <a href=\"https://stackoverflow.com/questions/13973503/sorting-strings-that-contains-number-in-java\">question</a> with same problem. but in my example, I have <code>mutableList&lt;myModel&gt;</code>, and I must put all string in <code>myModel.title</code> for example into a mutable list and place into under code:</p>\n\n<pre><code>   val sortData = reversedData.sortedBy {\n          //pattern.matcher(it.title).matches()\n             Collections.sort(it.title, object : Comparator&lt;String&gt; {\n                override fun compare(o1: String, o2: String): Int {\n                    return extractInt(o1) - extractInt(o2)\n                }\n\n                 fun extractInt(s: String): Int {\n                     val num = s.replace(\"\\\\D\".toRegex(), \"\")\n                     // return 0 if no digits found\n                     return if (num.isEmpty()) 0 else Integer.parseInt(num)\n                 }\n            })\n        }\n</code></pre>\n\n<p>I have an error in <code>.sortedBy</code> and <code>Collections.sort(it.title)</code>, may please help me to fix this.</p>\n"}, {"tags": ["android", "kotlin", "android-chips"], "comments": [{"owner": {"reputation": 2860, "user_id": 5996106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wmCYB.png?s=128&g=1", "display_name": "karanatwal.github.io", "link": "https://stackoverflow.com/users/5996106/karanatwal-github-io"}, "edited": false, "score": 0, "creation_date": 1555069645, "post_id": 53703999, "comment_id": 97990472, "body": "For <b>AndroidX</b> <a href=\"https://github.com/karanatwal/MaterialChipsInput\" rel=\"nofollow noreferrer\">github.com/karanatwal/MaterialChipsInput</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5308, "user_id": 7542765, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FBTZO.jpg?s=128&g=1", "display_name": "Levon Petrosyan", "link": "https://stackoverflow.com/users/7542765/levon-petrosyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1553890155, "creation_date": 1553890155, "answer_id": 55424852, "question_id": 53703999, "link": "https://stackoverflow.com/questions/53703999/add-filterchips-programmatically-in-android/55424852#55424852", "title": "Add FilterChips programmatically in Android", "body": "<p>You can define separate layout for <code>Chip</code> and setting all the attributes you want in <code>XML</code>, then inflate the layout.</p>\n\n<pre><code> val chip = layoutInflater.inflate(R.layout.chip_layout, view!!.parent.parent as ViewGroup, false) as Chip\n</code></pre>\n\n<p><strong>chip_layout.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.chip.Chip xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    style=\"@style/Widget.MaterialComponents.Chip.Filter\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:textAppearance=\"@style/chipTextAppearance\"\n    android:textColor=\"@android:color/black\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 344, "user_id": 6764161, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-BScG2eXod70/AAAAAAAAAAI/AAAAAAAACLg/n8o7u0LM2HU/photo.jpg?sz=128", "display_name": "KhanStan99", "link": "https://stackoverflow.com/users/6764161/khanstan99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1827, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1608425618, "creation_date": 1544438580, "last_edit_date": 1573637196, "question_id": 53703999, "link": "https://stackoverflow.com/questions/53703999/add-filterchips-programmatically-in-android", "title": "Add FilterChips programmatically in Android", "body": "<p>I am trying to make a Chip Selection which will have multiple choices. In my case I will have choices dynamically so I will have to create chips dynamically. I was successfully able to create it dynamically. But as multi selection needs a property called <code>style=\"@style/Widget.MaterialComponents.Chip.Filter\"</code>\nI am able to pass this in XML but not in kotlin code.\nI tried to do like this but didn't succeed:</p>\n\n<pre><code>val chip = Chip(chapManager.context, null, android.widget.Filter)\n</code></pre>\n\n<p>It says: <code>Classifier 'Filter' does not have a companion object, and thus must be initialized here</code></p>\n\n<p>Everything else works fine, just I'm not able to pass style to my chip.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544436151, "post_id": 53703261, "comment_id": 94261275, "body": "Why use <code>val _other</code>? Remove the <code>val</code> keyword"}, {"owner": {"reputation": 13, "user_id": 10770021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AHElzl2inPU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iXCQ6HnF3yQmQ9jL7TuivWeUbHRw/mo/photo.jpg?sz=128", "display_name": "Benjamin Ingberg", "link": "https://stackoverflow.com/users/10770021/benjamin-ingberg"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544436611, "post_id": 53703261, "comment_id": 94261532, "body": "@Zoe That gives the error &quot;data class primary constructor must have only property val/var parameters&quot;"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544436692, "post_id": 53703261, "comment_id": 94261587, "body": "So don&#39;t use a data class."}, {"owner": {"reputation": 13, "user_id": 10770021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AHElzl2inPU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iXCQ6HnF3yQmQ9jL7TuivWeUbHRw/mo/photo.jpg?sz=128", "display_name": "Benjamin Ingberg", "link": "https://stackoverflow.com/users/10770021/benjamin-ingberg"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544437624, "post_id": 53703261, "comment_id": 94262036, "body": "Thank you for your feedback, however, for my purposes I need the functionality of a data class like equals and copy and I would prefer not to have make the property nullable and/or implementing the functionality manually."}], "answers": [{"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1544443010, "post_id": 53703743, "comment_id": 94264904, "body": "It isn&#39;t possible in this specific way, but my answer shows how to achieve the same result."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1544437701, "creation_date": 1544437701, "answer_id": 53703743, "question_id": 53703261, "link": "https://stackoverflow.com/questions/53703261/how-do-you-initialize-a-non-nullable-property-as-a-this-pointer-in-a-kotlin-data/53703743#53703743", "title": "How do you initialize a non-nullable property as a this pointer in a kotlin data class?", "body": "<p>This is not possible. You cannot access <code>this</code> before it is constructed. But that's just how the default constructor parameter would work.</p>\n\n<pre><code>Cannot access '&lt;this&gt;' before superclass constructor has been called\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10770021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AHElzl2inPU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iXCQ6HnF3yQmQ9jL7TuivWeUbHRw/mo/photo.jpg?sz=128", "display_name": "Benjamin Ingberg", "link": "https://stackoverflow.com/users/10770021/benjamin-ingberg"}, "edited": false, "score": 0, "creation_date": 1544441811, "post_id": 53703988, "comment_id": 94264277, "body": "Thank you for the improved solution and the clarification regarding how the automatic copy/equals work. I assume from your answer that my prefered solution is not possible to express but your workaround at least solves most problems. In the actual code I use more than one property so component1() returning _other is regretable but thanks anyway."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1544442839, "last_edit_date": 1544442839, "creation_date": 1544438550, "answer_id": 53703988, "question_id": 53703261, "link": "https://stackoverflow.com/questions/53703261/how-do-you-initialize-a-non-nullable-property-as-a-this-pointer-in-a-kotlin-data/53703988#53703988", "title": "How do you initialize a non-nullable property as a this pointer in a kotlin data class?", "body": "<blockquote>\n  <p>Thank you for your feedback, however, for my purposes I need the functionality of a data class like equals and copy and I would prefer not to have make the property nullable and/or implementing the functionality manually.</p>\n</blockquote>\n\n<p>You'd still have to: <code>equals</code> and <code>copy</code> will care only about <code>_other</code> and ignore <code>other</code> (just as they would ignore all other properties defined in the body of the class). That <code>other</code> is a <code>var</code> just makes it worse: reassigning it will have no effect on data class functionality. </p>\n\n<p>But you can come closer:</p>\n\n<pre><code>data class Node(private var _other: Node? = null) {\n    var other: Node\n        get() = _other ?: this\n        set(value) {\n            _other = if (value != this) value else null\n        }\n}\n</code></pre>\n\n<p>The only problem remaining is that <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\"><code>component1()</code></a> will return <code>_other</code>. In this case you have a single property so it shouldn't matter.</p>\n\n<p>EDIT: after thinking a bit more, </p>\n\n<pre><code>data class Node(private var _other: Node? = null) {\n    init {\n        this._other = _other ?: this\n    }\n\n    var other: Node\n        get() = _other!! // safe\n        set(value) {\n            _other = value\n        }\n}\n</code></pre>\n\n<p>seems to effectively be what you want. You can see difference here:</p>\n\n<pre><code>val node1 = Node()\nval node2 = node1.copy(node1)\nprintln(node1 == node2)\n</code></pre>\n\n<p>prints <code>false</code> with the first solution, <code>true</code> with the second one (as it should if <code>this</code> was the default parameter). </p>\n"}], "owner": {"reputation": 13, "user_id": 10770021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AHElzl2inPU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iXCQ6HnF3yQmQ9jL7TuivWeUbHRw/mo/photo.jpg?sz=128", "display_name": "Benjamin Ingberg", "link": "https://stackoverflow.com/users/10770021/benjamin-ingberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53703988, "answer_count": 2, "score": 1, "last_activity_date": 1544442839, "creation_date": 1544436064, "question_id": 53703261, "link": "https://stackoverflow.com/questions/53703261/how-do-you-initialize-a-non-nullable-property-as-a-this-pointer-in-a-kotlin-data", "title": "How do you initialize a non-nullable property as a this pointer in a kotlin data class?", "body": "<p>Given a Kotlin data class, how do you initialize a non-nullable property as a pointer to self? I.e something like the following pseudocode.</p>\n\n<pre><code>data class Node(var other: Node = this)\n</code></pre>\n\n<p>Currently I have a solution that introduces temporary properties</p>\n\n<pre><code>data class Node(val _other: Node? = null) {\n    var other: Node = _other ?: this\n}\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "android-studio-3.2"], "comments": [{"owner": {"reputation": 3559, "user_id": 3111877, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/aJpSK.jpg?s=128&g=1", "display_name": "D_Alpha", "link": "https://stackoverflow.com/users/3111877/d-alpha"}, "edited": false, "score": 0, "creation_date": 1544425826, "post_id": 53700966, "comment_id": 94256687, "body": "add your build.gradle file.(both the app level and project level)"}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1544426002, "post_id": 53700966, "comment_id": 94256754, "body": "<a href=\"https://stackoverflow.com/questions/49788977/faced-with-org-gradle-api-projectconfigurationexception-error-on-my-gradle-bu\" title=\"faced with org gradle api projectconfigurationexception error on my gradle bu\">stackoverflow.com/questions/49788977/&hellip;</a> try this answer"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544435765, "post_id": 53700966, "comment_id": 94261073, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "reply_to_user": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1544512129, "post_id": 53700966, "comment_id": 94291512, "body": "@Choxmi: that answer doesn&#39;t solves this issue."}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1544521760, "post_id": 53700966, "comment_id": 94296319, "body": "@SumitT : It looks like a bug in 3.2 <a href=\"https://issuetracker.google.com/u/0/issues/72872257\" rel=\"nofollow noreferrer\">issuetracker.google.com/u/0/issues/72872257</a> . Try adding <code>android.enableD8.desugaring=true</code> to your gradle properties."}, {"owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "reply_to_user": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1544557224, "post_id": 53700966, "comment_id": 94316112, "body": "@Choxmi: I tried adding &quot;android.enableD8.desugaring=true&quot; into my project&#39;s gradle properties but didn&#39;t worked for me."}, {"owner": {"reputation": 1294, "user_id": 4905918, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ODGnx.png?s=128&g=1", "display_name": "Choxmi", "link": "https://stackoverflow.com/users/4905918/choxmi"}, "edited": false, "score": 0, "creation_date": 1544569461, "post_id": 53700966, "comment_id": 94321089, "body": "@SumitT : I&#39;m out of options. According to the issue tracker, Java 9 cause this issue. If you are not using java 9&#39;s specific features, try downgrading to <i>VERSION_1_7 or JDK 8</i>. That should definitely fix the issue."}], "owner": {"reputation": 1123, "user_id": 1964609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/JvVsS.jpg?s=128&g=1", "display_name": "Sumit T", "link": "https://stackoverflow.com/users/1964609/sumit-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544512381, "creation_date": 1544425619, "last_edit_date": 1544512381, "question_id": 53700966, "link": "https://stackoverflow.com/questions/53700966/android-studio-3-2-project-creation-issue", "title": "Android Studio 3.2 project creation issue", "body": "<p>I am creating new project with Android Studio 3.2, every time I create a new project either as blank activity, tabbed activity or any other type of project, project runs in error. I tried clean build or invalidating project &amp; restarting android studio. Below are the logs attached: </p>\n\n<pre><code>org.gradle.api.ProjectConfigurationException: A problem occurred configuring root project 'SampleApp'.\n        at org.gradle.configuration.project.LifecycleProjectEvaluator.addConfigurationFailure(LifecycleProjectEvaluator.java:94)\n        at org.gradle.configuration.project.LifecycleProjectEvaluator.doConfigure(LifecycleProjectEvaluator.java:66)\n        at org.gradle.configuration.project.LifecycleProjectEvaluator.access$100(LifecycleProjectEvaluator.java:34)\n        at org.gradle.configuration.project.LifecycleProjectEvaluator$ConfigureProject.run(LifecycleProjectEvaluator.java:110)\n\n.......\n\nCaused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all artifacts for configuration ':classpath'. ........\n\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve org.apache.httpcomponents:httpmime:4.5.2. Required by:\n    project : &gt; com.android.tools.build:gradle:3.2.0 &gt; com.android.tools.analytics-library:crash:26.2.0\n    project : &gt; com.android.tools.build:gradle:3.2.0 &gt; com.android.tools.build:builder:3.2.0 &gt; com.android.tools:sdklib:26.2.0  at org.gradle.api.internal.artifacts.ivyservice.ivyresolve ...........\n\nCaused by: org.gradle.internal.resolve.ModuleVersionResolveException: Could not resolve org.apache.httpcomponents:httpmime:4.5.2. ......\n\n\nCaused by: org.gradle.api.internal.artifacts.ivyservice.ivyresolve.parser.MetaDataParseException: Could not parse POM https://jcenter.bintray.com/org/apache/httpcomponents/httpmime/4.5.2/httpmime-4.5.2.pom ......\n</code></pre>\n\n<p>There is long list of error popping up. </p>\n\n<p>Here is my app level build.gradle:</p>\n\n<hr>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.sample.example.sampleapp\"\n        minSdkVersion 15\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n}\n</code></pre>\n\n<p>Here is my project level gradle: </p>\n\n<hr>\n\n<pre><code>buildscript {\n\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.2.0'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "retrofit", "coroutine"], "comments": [{"owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544422905, "post_id": 53700414, "comment_id": 94255661, "body": "Why you are using experimental version?"}, {"owner": {"reputation": 434, "user_id": 4397653, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VBd7y-CxOQA/AAAAAAAAAAI/AAAAAAAAAE0/QBGdrrTPUqs/photo.jpg?sz=128", "display_name": "Hemendra Gangwar", "link": "https://stackoverflow.com/users/4397653/hemendra-gangwar"}, "reply_to_user": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "edited": false, "score": 0, "creation_date": 1544423113, "post_id": 53700414, "comment_id": 94255745, "body": "I tried with ext.kotlin_version = &#39;1.3.0&#39; but still i got same error for Deferred,  The api service is :  @Headers(&quot;Content-Type: application/json&quot;) @GET(ApiClient.POSTS_URL) fun getPosts(): Deferred&lt;Response&lt;List&lt;Posts&gt;&gt;&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 5408, "user_id": 6021469, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Slrs.jpg?s=128&g=1", "display_name": "Shweta Chauhan", "link": "https://stackoverflow.com/users/6021469/shweta-chauhan"}, "is_accepted": false, "score": 13, "last_activity_date": 1544423343, "creation_date": 1544423343, "answer_id": 53700513, "question_id": 53700414, "link": "https://stackoverflow.com/questions/53700414/java-lang-classnotfoundexception-didnt-find-class-kotlinx-coroutines-experime/53700513#53700513", "title": "java.lang.ClassNotFoundException: Didn&#39;t find class &quot;kotlinx.coroutines.experimental.Deferred&quot;", "body": "<blockquote>\n  <p>Add this dependency in your build.gradle : (remove experimental dependency for coroutine)</p>\n</blockquote>\n\n<pre><code>dependencies {\n    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.0.0'\n    implementation 'com.jakewharton.retrofit:retrofit2-kotlin-coroutines-adapter:0.9.2'\n}\n</code></pre>\n\n<blockquote>\n  <p>And add CoroutineCallAdapterFactory() for retrofit</p>\n</blockquote>\n\n<pre><code>addCallAdapterFactory(CoroutineCallAdapterFactory())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1571490748, "post_id": 56547427, "comment_id": 103263364, "body": "But then we do not add the addCallAdapterFactory anymore?"}, {"owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "reply_to_user": {"reputation": 15987, "user_id": 4385913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ijSum.png?s=128&g=1", "display_name": "Skizo-oz\u1d09\u029eS", "link": "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es"}, "edited": false, "score": 0, "creation_date": 1571667099, "post_id": 56547427, "comment_id": 103306737, "body": "I believe there is no need for that, retrofit calls will just have suspend modifier and you can  launch them normally. Not sure why people would still want to add another library and adapter factory to your project if it works out of the box :)"}, {"owner": {"reputation": 784, "user_id": 2911667, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qZsBH.jpg?s=128&g=1", "display_name": "Tarun Sharma", "link": "https://stackoverflow.com/users/2911667/tarun-sharma"}, "edited": false, "score": 1, "creation_date": 1585244723, "post_id": 56547427, "comment_id": 107699884, "body": "nothing more upgrade to latest retrofit and bang .... problem resolve ... thanks alot dude"}], "tags": [], "owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "is_accepted": false, "score": 1, "last_activity_date": 1560268060, "creation_date": 1560268060, "answer_id": 56547427, "question_id": 53700414, "link": "https://stackoverflow.com/questions/53700414/java-lang-classnotfoundexception-didnt-find-class-kotlinx-coroutines-experime/56547427#56547427", "title": "java.lang.ClassNotFoundException: Didn&#39;t find class &quot;kotlinx.coroutines.experimental.Deferred&quot;", "body": "<p>I am facing the same problem, it is the Jake Warton's library problem. It is using experimental references internally.</p>\n\n<p>Using <code>implementation 'com.jakewharton.retrofit:retrofit2-kotlin-coroutines-experimental-adapter:1.0.0'</code></p>\n\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: Lkotlinx/coroutines/experimental/Deferred;\n    at com.jakewharton.retrofit2.adapter.kotlin.coroutines.experimental.CoroutineCallAdapterFactory.get\n</code></pre>\n\n<p>This library is <strong>deprecated</strong> . Here is the solution from the library's page on git</p>\n\n<blockquote>\n  <p>This library is deprecated. Please migrate to Retrofit 2.6.0 or newer and its built-in suspend support</p>\n</blockquote>\n"}], "owner": {"reputation": 434, "user_id": 4397653, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VBd7y-CxOQA/AAAAAAAAAAI/AAAAAAAAAE0/QBGdrrTPUqs/photo.jpg?sz=128", "display_name": "Hemendra Gangwar", "link": "https://stackoverflow.com/users/4397653/hemendra-gangwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4296, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1560268060, "creation_date": 1544422741, "question_id": 53700414, "link": "https://stackoverflow.com/questions/53700414/java-lang-classnotfoundexception-didnt-find-class-kotlinx-coroutines-experime", "title": "java.lang.ClassNotFoundException: Didn&#39;t find class &quot;kotlinx.coroutines.experimental.Deferred&quot;", "body": "<p>I am facing this issue when using coroutine with retrofit, can you please let me know why i am getting this error</p>\n\n<p><strong>java.lang.ClassNotFoundException: Didn't find class \"kotlinx.coroutines.experimental.Deferred\" on path: DexPathList[[zip file \"/data/app/com.coroutines.retrofit.kotlin-1/base.apk\"],nativeLibraryDirectories=[/vendor/lib64, /system/lib64]]</strong></p>\n\n<p>while i am using the below dependencies,</p>\n\n<p>implementation 'com.jakewharton.retrofit:retrofit2-kotlin-coroutines-experimental-adapter:1.0.0'</p>\n\n<p>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.0.1'\nimplementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.0.1'</p>\n\n<p>and the kotlin version is :\next.kotlin_version = '1.3.10'</p>\n"}, {"tags": ["kotlin", "osgi"], "comments": [{"owner": {"reputation": 2192, "user_id": 1934317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b1922893de6094def1ca29690123b9?s=128&d=identicon&r=PG&f=1", "display_name": "awd", "link": "https://stackoverflow.com/users/1934317/awd"}, "edited": false, "score": 1, "creation_date": 1544427039, "post_id": 53699647, "comment_id": 94257158, "body": "is <code>kotlin-osgi-bundle</code> installed on your osgi runtime?"}, {"owner": {"reputation": 957, "user_id": 2501333, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18cd174b715cba90515137a97766618c?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2501333/jerry"}, "reply_to_user": {"reputation": 2192, "user_id": 1934317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b1922893de6094def1ca29690123b9?s=128&d=identicon&r=PG&f=1", "display_name": "awd", "link": "https://stackoverflow.com/users/1934317/awd"}, "edited": false, "score": 0, "creation_date": 1544485630, "post_id": 53699647, "comment_id": 94285129, "body": "@awd it isn&#39;t installed on the runtime, that&#39;s why I thought if I include the dependency in the bundle it would work."}, {"owner": {"reputation": 2192, "user_id": 1934317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b1922893de6094def1ca29690123b9?s=128&d=identicon&r=PG&f=1", "display_name": "awd", "link": "https://stackoverflow.com/users/1934317/awd"}, "edited": false, "score": 0, "creation_date": 1544496669, "post_id": 53699647, "comment_id": 94287377, "body": "you need it on your osgi server, after its installed and active, no need to create a fat jar with kotlin embedded."}], "answers": [{"tags": [], "owner": {"reputation": 22947, "user_id": 318921, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/SuVaR.png?s=128&g=1", "display_name": "Neil Bartlett", "link": "https://stackoverflow.com/users/318921/neil-bartlett"}, "is_accepted": true, "score": 1, "last_activity_date": 1544546065, "creation_date": 1544546065, "answer_id": 53728515, "question_id": 53699647, "link": "https://stackoverflow.com/questions/53699647/osgi-project-with-kotlin-dependency/53728515#53728515", "title": "OSGi project with Kotlin dependency", "body": "<p>Your bundle simply has a dependency on the <code>kotlin</code> package and you need to ensure that this dependency is satisfied.</p>\n\n<p>Breaking this down, it means that your bundle has <code>Import-Package: kotlin</code>, which has been derived from the fact that classfiles in the bundle have dependencies on the <code>kotlin</code> package. I know very little about Kotlin but clearly the <code>kotlin</code> package contains the standard library.</p>\n\n<p>Where you have a bundle that imports a package there must be another bundle that exports that package. This simply means you need to find a bundle that has <code>Export-Package: kotlin</code> and ensure that it is deployed into your OSGi Framework alongside your own bundle.</p>\n\n<p>An alternative \"solution\" is to embed the dependency in your own bundle but as you have discovered, this usually creates far more problems than it solves.</p>\n"}], "owner": {"reputation": 957, "user_id": 2501333, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/18cd174b715cba90515137a97766618c?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/2501333/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 1, "accepted_answer_id": 53728515, "answer_count": 1, "score": 0, "last_activity_date": 1544546065, "creation_date": 1544417218, "question_id": 53699647, "link": "https://stackoverflow.com/questions/53699647/osgi-project-with-kotlin-dependency", "title": "OSGi project with Kotlin dependency", "body": "<p>I'm converting a Java project to Kotlin that gets deployed as an OSGi bundle.  I've included the <code>kotlin-osgi-bundle</code> and <code>kotlin-stdlib-jdk8</code> dependencies:</p>\n\n<pre><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-osgi-bundle&lt;/artifactId&gt;\n    &lt;version&gt;1.3.11&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n    &lt;version&gt;1.3.11&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>I've also included the <code>kotlin-maven-plugin</code>, and I can successfully package-up the project.</p>\n\n<p>However, when deployed, I get the following error:</p>\n\n<pre><code>Error while starting bundle: file:/D:/Esri/ArcGIS/Server/GeoEvent/deploy/test-0.0.1.jar\norg.osgi.framework.BundleException: Unresolved constraint in bundle com.sample.test [464]: Unable to resolve 464.0: missing requirement [464.0] osgi.wiring.package; (&amp;(osgi.wiring.package=kotlin)(version&gt;=1.3.0)(!(version&gt;=2.0.0)))\n    at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3974)[org.apache.felix.framework-4.2.1.jar:]\n    at org.apache.felix.framework.Felix.startBundle(Felix.java:2037)[org.apache.felix.framework-4.2.1.jar:]\n    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:955)[org.apache.felix.framework-4.2.1.jar:]\n    at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundle(DirectoryWatcher.java:1245)[16:org.apache.felix.fileinstall:3.4.2]\n    at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundles(DirectoryWatcher.java:1217)[16:org.apache.felix.fileinstall:3.4.2]\n    at org.apache.felix.fileinstall.internal.DirectoryWatcher.doProcess(DirectoryWatcher.java:509)[16:org.apache.felix.fileinstall:3.4.2]\n    at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:358)[16:org.apache.felix.fileinstall:3.4.2]\n    at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:310)[16:org.apache.felix.fileinstall:3.4.2]\n</code></pre>\n\n<p>I have tried specifying the Kotlin dependency in the <code>maven-bundle-plugin</code>:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.felix&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-bundle-plugin&lt;/artifactId&gt;\n  &lt;extensions&gt;true&lt;/extensions&gt;\n  &lt;configuration&gt;\n    &lt;instructions&gt;\n      &lt;Embed-Dependency&gt;kotlin-osgi-bundle&lt;/Embed-Dependency&gt;\n    &lt;/instructions&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>This generates a fairly large JAR (4MB) compared to the original Java project (35KB), and when deployed I get the following error:</p>\n\n<pre><code>INFO  | curator-framework - 3.1.0 | New config event received: [115, 101, 114, 118, 101, 114, 46, 49, 61, 76, 69, 65, 45, 51, 48, 53, 48, 57, 51, 46, 83, 69, 82, 86, 73, 67, 69, 83, 46, 69, 83, 82, 73, 65, 85, 83, 84, 82, 65, 76, 73, 65, 46, 67, 79, 77, 46, 65, 85, 58, 50, 49, 56, 50, 58, 50, 49, 57, 48, 58, 112, 97, 114, 116, 105, 99, 105, 112, 97, 110, 116, 59, 48, 46, 48, 46, 48, 46, 48, 58, 50, 49, 56, 49, 10, 118, 101, 114, 115, 105, 111, 110, 61, 49, 48, 48, 48, 48, 48, 48, 48, 48]\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-framework - 3.1.0 | State change: SUSPENDED\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-framework - 3.1.0 | State change: RECONNECTED\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nINFO  | curator-framework - 3.1.0 | New config event received: [115, 101, 114, 118, 101, 114, 46, 49, 61, 76, 69, 65, 45, 51, 48, 53, 48, 57, 51, 46, 83, 69, 82, 86, 73, 67, 69, 83, 46, 69, 83, 82, 73, 65, 85, 83, 84, 82, 65, 76, 73, 65, 46, 67, 79, 77, 46, 65, 85, 58, 50, 49, 56, 50, 58, 50, 49, 57, 48, 58, 112, 97, 114, 116, 105, 99, 105, 112, 97, 110, 116, 59, 48, 46, 48, 46, 48, 46, 48, 58, 50, 49, 56, 49, 10, 118, 101, 114, 115, 105, 111, 110, 61, 49, 48, 48, 48, 48, 48, 48, 48, 48]\nINFO  | curator-client - 3.1.0 | Connection string changed to: LAPTOP-3050:2181\nERROR | com.esri.ges.persistence.zookeeper.zk-persistenceutility - 10.5.1 | KeeperErrorCode = ConnectionLoss for /geoevent/config/clusters/default/deploy/test-0.0.1.jar\norg.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /geoevent/config/clusters/default/deploy/test-0.0.1.jar\n    at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)[23:org.apache.zookeeper.zookeeper-geoevent:3.5.0]\n    at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)[23:org.apache.zookeeper.zookeeper-geoevent:3.5.0]\n    at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:1155)[23:org.apache.zookeeper.zookeeper-geoevent:3.5.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl$17.call(CreateBuilderImpl.java:1040)[386:curator-framework:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl$17.call(CreateBuilderImpl.java:1023)[386:curator-framework:3.1.0]\n    at org.apache.curator.connection.StandardConnectionHandlingPolicy.callWithRetry(StandardConnectionHandlingPolicy.java:67)[387:curator-client:3.1.0]\n    at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:99)[387:curator-client:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:1020)[386:curator-framework:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:501)[386:curator-framework:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:491)[386:curator-framework:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl$4.forPath(CreateBuilderImpl.java:367)[386:curator-framework:3.1.0]\n    at org.apache.curator.framework.imps.CreateBuilderImpl$4.forPath(CreateBuilderImpl.java:309)[386:curator-framework:3.1.0]\n    at com.esri.ges.fabric.internal.ZKPersistenceUtility.copyInputStreamToPath(ZKPersistenceUtility.java:338)[77:com.esri.ges.persistence.zookeeper.zk-persistenceutility:10.5.1]\n    at Proxy73615e00_3b42_4973_8167_02adcb1d58c6.copyInputStreamToPath(Unknown Source)[:]\n    at Proxyca093291_fc2b_46b8_8c21_c244986150ba.copyInputStreamToPath(Unknown Source)[:]\n    at com.esri.ges.registry.deploy.internal.DeployFolderRegistryImpl.copyIntoZooKeeper(DeployFolderRegistryImpl.java:73)[169:com.esri.ges.registry.internal-deploy-registry:10.5.1]\n    at com.esri.ges.registry.deploy.internal.DeployFolderRegistryImpl.access$500(DeployFolderRegistryImpl.java:37)[169:com.esri.ges.registry.internal-deploy-registry:10.5.1]\n    at com.esri.ges.registry.deploy.internal.DeployFolderRegistryImpl$LookForChanges.run(DeployFolderRegistryImpl.java:141)[169:com.esri.ges.registry.internal-deploy-registry:10.5.1]\n    at java.lang.Thread.run(Thread.java:745)[:1.8.0_121]\n</code></pre>\n\n<p>This gets repeated a number of times.</p>\n\n<p>Am I missing something, or does this simply mean that the application (Esri ArcGIS GeoEvent) doesn't support OSGi bundles written in Kotlin?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1544411699, "post_id": 53699002, "comment_id": 94253152, "body": "Do you really need to pass it? Can&#39;t you just <code>getSystemService()</code> in the <code>Fragment</code>? It&#39;s the same system service everywhere."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 1, "creation_date": 1544413269, "post_id": 53699002, "comment_id": 94253419, "body": "You really don&#39;t. <code>Fragment</code> has access to a <code>Context</code> as soon as it&#39;s attached, and that&#39;s all you need to get a system service. Why can&#39;t you get the <code>ClipboardManager</code> in the <code>Fragment</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2850, "user_id": 5676318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCZ7Y.png?s=128&g=1", "display_name": "GianhTran", "link": "https://stackoverflow.com/users/5676318/gianhtran"}, "is_accepted": true, "score": 1, "last_activity_date": 1544415841, "creation_date": 1544415841, "answer_id": 53699466, "question_id": 53699002, "link": "https://stackoverflow.com/questions/53699002/how-can-i-pass-a-var-of-clipboardmanager-to-fragment-in-kotlin/53699466#53699466", "title": "How can I pass a var of ClipboardManager to Fragment in Kotlin?", "body": "<p>You don't need to pass, you can get this in your fragment, but anw, you can pass <code>mClipboardManager</code> from your activity into you fragment by 2 way</p>\n\n<p><strong><em>1</strong>. Set value from your activity.</em></p>\n\n<p>First, get fragment instance using <code>getFragmentManager().findFragmentByTag(\"YourFragmentTag\")</code></p>\n\n<p>in your fragment, create a method</p>\n\n<pre><code>public void setClipboardManager(ClipboardManager clipboardManager) {\n  // here you get an instance of clipboardManager, do anything you want\n}\n</code></pre>\n\n<p>and call this method in your activity:</p>\n\n<pre><code>fragment.setClipboardManager(mClipboardManager)\n</code></pre>\n\n<p><strong><em>2</strong>. Get the value of <code>mClipboardManager</code> from you fragment</em></p>\n\n<p>First, create a method in your activity</p>\n\n<pre><code>public ClipboardManager getClipboardManager() {\n   return mClipboardManager;\n}\n</code></pre>\n\n<p>then, in </p>\n\n<pre><code>@Override public void onAttach(Context context) {\n        super.onAttach(context);\n        if (getActivity() instanceof YourActivity) {\n            ((YourAcitivity) getActivity()).getClipboardManager()\n            // here you get an instance of clipboardManger, do anything you want\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 828896, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YA33S.jpg?s=128&g=1", "display_name": "HelloCW", "link": "https://stackoverflow.com/users/828896/hellocw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 53699466, "answer_count": 1, "score": 1, "last_activity_date": 1544415841, "creation_date": 1544411490, "question_id": 53699002, "link": "https://stackoverflow.com/questions/53699002/how-can-i-pass-a-var-of-clipboardmanager-to-fragment-in-kotlin", "title": "How can I pass a var of ClipboardManager to Fragment in Kotlin?", "body": "<p>I have read the artical <a href=\"https://stackoverflow.com/questions/46551228/how-to-pass-and-get-value-from-fragment-and-activity-android-kotlin\">How to pass and get value from fragment and activity android kotlin</a></p>\n\n<p>I have to pass a  var mClipboardManager (see Code A) in a  activity to Fragment. </p>\n\n<p>How can I pass the var ? and how get the var in Fragment? </p>\n\n<p><strong>Code A</strong></p>\n\n<pre><code>   private lateinit var mClipboardManager: ClipboardManager \n\n    private val aPrimaryClipChangedListener = ClipboardManager.OnPrimaryClipChangedListener {\n        if (mClipboardManager.hasPrimaryClip() &amp;&amp; mClipboardManager.primaryClipDescription.hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN) ) {\n            var pasteData: String = \"\"\n            val item = mClipboardManager.primaryClip.getItemAt(0)\n            pasteData = item.text.toString().trim()\n            addClipboardRecord(pasteData)\n        }\n    }\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569544261, "post_id": 53698928, "comment_id": 102640484, "body": "While the answers are explaining why it&#39;s allowed and how it works, none of them gave the correct answer: you should <i>not</i> do that in the first place. Your <code>foo</code> property is not a property, but a function with side effects. By doing something like that, you&#39;re breaking all the assumptions that users of your property can make."}, {"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569567897, "post_id": 53698928, "comment_id": 102646074, "body": "Using either <code>var</code> or <code>val</code> should only affect <code>foo</code>, not anything else. You should <i>not</i> use that, and that&#39;s why you have this question in the first place. Saying &quot;I wanted to use <code>var</code>&quot; is just wanting to go against the idioms of the language."}, {"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569618031, "post_id": 53698928, "comment_id": 102668769, "body": "That&#39;s exactly my point. There&#39;s nothing wrong in implementing <code>List.size</code> as a property, because it doesn&#39;t have any side effects. Implementing <code>List.pop</code> as a property, on the other hand, wouldn&#39;t make any sense, because it does alter the state of the list just by reading it. Which is exactly what you&#39;re describing here: reading <code>foo</code> would change <code>counter</code>."}, {"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569654743, "post_id": 53698928, "comment_id": 102673792, "body": "I obviously can&#39;t speak for the language designers, but something like <code>DateTime.now</code> would be fine as a property, in my opinion. The difference between this and <code>foo</code> in your question being that while <code>DateTime.now</code>&#39;s value change over time, it&#39;s not altered by the fact that you read it or not (in addition to not changing anything else either, which is even worse)."}, {"owner": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569805448, "post_id": 53698928, "comment_id": 102702950, "body": "I think from your comment that what you&#39;re looking for might be a lazy property or the <code>lateinit</code> keyword. (I think that this conversation might actually have some value to any potential reader confused about val, var, and properties in general)"}, {"owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "reply_to_user": {"reputation": 6340, "user_id": 775894, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/20eefa46efacbb8718dec81fd7db7baa?s=128&d=identicon&r=PG", "display_name": "Marc Plano-Lesay", "link": "https://stackoverflow.com/users/775894/marc-plano-lesay"}, "edited": false, "score": 0, "creation_date": 1569805731, "post_id": 53698928, "comment_id": 102702995, "body": "@MarcPlano-Lesay <code>lateinit</code> modifier is not allowed on properties with a custom getter or setter; <code>lazy</code> would only execute once so the value will not change on subsequent calls. I still don&#39;t think this whole wall of texts will help further readers. I will delete all mine and you can leave a more concise comment if you would like."}], "answers": [{"comments": [{"owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "edited": false, "score": 0, "creation_date": 1544412074, "post_id": 53699029, "comment_id": 94253215, "body": "KT-16681 talks about reassigning the backing field in a getter, e.g. <code>field = &quot;changed&quot;</code>. But in my example, no one is reassigning the backing field. The <code>counter++</code> statement could as well happen in <code>main()</code> function or any other parts of the program."}, {"owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "reply_to_user": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "edited": false, "score": 0, "creation_date": 1544413671, "post_id": 53699029, "comment_id": 94253481, "body": "@user1032613 I updated my answer, but I am not sure if this update fits your question."}], "tags": [], "owner": {"reputation": 3800, "user_id": 9035237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34bf4b56e66db99e1e713299fa0df413?s=128&d=identicon&r=PG&f=1", "display_name": "Geno Chen", "link": "https://stackoverflow.com/users/9035237/geno-chen"}, "is_accepted": false, "score": 2, "last_activity_date": 1544414875, "last_edit_date": 1544414875, "creation_date": 1544411689, "answer_id": 53699029, "question_id": 53698928, "link": "https://stackoverflow.com/questions/53698928/kotlin-custom-getter-makes-val-and-var-confusing/53699029#53699029", "title": "Kotlin custom Getter makes `val` and `var` confusing?", "body": "<p>This is already reported in YouTrack, as <a href=\"https://youtrack.jetbrains.com/issue/KT-16681\" rel=\"nofollow noreferrer\">KT-16681</a>, \"kotlin allows mutating the field of read-only property\".</p>\n\n<p>As you can see in the reply in KT-16681, the custom getter is compiled into another function, which makes field <code>foo</code> and method <code>getFoo()</code> become two unrelated things.</p>\n\n<p>Also from the reply in KT-16681, this kind of violation (Reassignment of read-only property via backing field) will produce an error since Kotlin 1.3.</p>\n\n<p><strong>Update:</strong> In comment, the original poster mentioned that <code>KT-16681</code> is different from this question. However, inspired from that issue, we can see Kotlin bytecode there by <code>Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode</code> (removed metadata etc.):</p>\n\n<pre><code>public final class Test53699029Kt {\n\n\n  // access flags 0xA\n  private static I counter\n\n  // access flags 0x19\n  public final static getCounter()I\n   L0\n    LINENUMBER 3 L0\n    GETSTATIC Test53699029Kt.counter : I\n    IRETURN\n   L1\n    MAXSTACK = 1\n    MAXLOCALS = 0\n\n  // access flags 0x19\n  public final static setCounter(I)V\n   L0\n    LINENUMBER 3 L0\n    ILOAD 0\n    PUTSTATIC Test53699029Kt.counter : I\n    RETURN\n   L1\n    LOCALVARIABLE &lt;set-?&gt; I L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x19\n  public final static getFoo()Ljava/lang/String;\n  @Lorg/jetbrains/annotations/NotNull;() // invisible\n   L0\n    LINENUMBER 7 L0\n    GETSTATIC Test53699029Kt.counter : I\n    DUP\n    ISTORE 0\n    ICONST_1\n    IADD\n    PUTSTATIC Test53699029Kt.counter : I\n   L1\n    LINENUMBER 8 L1\n    NEW java/lang/StringBuilder\n    DUP\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\n    LDC \"val\"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    GETSTATIC Test53699029Kt.counter : I\n    INVOKEVIRTUAL java/lang/StringBuilder.append (I)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    ARETURN\n   L2\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n  // access flags 0x19\n  public final static main()V\n   L0\n    LINENUMBER 12 L0\n    INVOKESTATIC Test53699029Kt.getFoo ()Ljava/lang/String;\n    ASTORE 0\n   L1\n    LINENUMBER 13 L1\n    INVOKESTATIC Test53699029Kt.getFoo ()Ljava/lang/String;\n    ASTORE 1\n   L2\n    LINENUMBER 14 L2\n    INVOKESTATIC Test53699029Kt.getFoo ()Ljava/lang/String;\n    ASTORE 2\n   L3\n    LINENUMBER 15 L3\n    NEW java/lang/StringBuilder\n    DUP\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\n    LDC \"we got: \"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    ALOAD 0\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    BIPUSH 32\n    INVOKEVIRTUAL java/lang/StringBuilder.append (C)Ljava/lang/StringBuilder;\n    ALOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    BIPUSH 32\n    INVOKEVIRTUAL java/lang/StringBuilder.append (C)Ljava/lang/StringBuilder;\n    ALOAD 2\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    ASTORE 3\n   L4\n    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;\n    ALOAD 3\n    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/Object;)V\n   L5\n   L6\n    LINENUMBER 17 L6\n    RETURN\n   L7\n    LOCALVARIABLE c Ljava/lang/String; L3 L7 2\n    LOCALVARIABLE b Ljava/lang/String; L2 L7 1\n    LOCALVARIABLE a Ljava/lang/String; L1 L7 0\n    MAXSTACK = 2\n    MAXLOCALS = 4\n\n  // access flags 0x1009\n  public static synthetic main([Ljava/lang/String;)V\n    INVOKESTATIC Test53699029Kt.main ()V\n    RETURN\n    MAXSTACK = 0\n    MAXLOCALS = 1\n</code></pre>\n\n<p>As we can see, there is no field for <code>foo</code>, just a <code>getFoo()</code>, comparing for a normal <code>val</code> declaration:</p>\n\n<pre><code>public final class Test53699029Kt {\n\n\n  // access flags 0xA\n  private static I counter\n\n  // access flags 0x19\n  public final static getCounter()I\n   L0\n    LINENUMBER 1 L0\n    GETSTATIC Test53699029Kt.counter : I\n    IRETURN\n   L1\n    MAXSTACK = 1\n    MAXLOCALS = 0\n\n  // access flags 0x19\n  public final static setCounter(I)V\n   L0\n    LINENUMBER 1 L0\n    ILOAD 0\n    PUTSTATIC Test53699029Kt.counter : I\n    RETURN\n   L1\n    LOCALVARIABLE &lt;set-?&gt; I L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n\n  // access flags 0x1A\n  private final static Ljava/lang/String; foo = \"aaa\"\n  @Lorg/jetbrains/annotations/NotNull;() // invisible\n\n  // access flags 0x19\n  public final static getFoo()Ljava/lang/String;\n  @Lorg/jetbrains/annotations/NotNull;() // invisible\n   L0\n    LINENUMBER 3 L0\n    GETSTATIC Test53699029Kt.foo : Ljava/lang/String;\n    ARETURN\n   L1\n    MAXSTACK = 1\n    MAXLOCALS = 0\n\n  // access flags 0x19\n  public final static main()V\n   L0\n    LINENUMBER 6 L0\n    GETSTATIC Test53699029Kt.foo : Ljava/lang/String;\n    ASTORE 0\n   L1\n    LINENUMBER 7 L1\n    GETSTATIC Test53699029Kt.foo : Ljava/lang/String;\n    ASTORE 1\n   L2\n    LINENUMBER 8 L2\n    GETSTATIC Test53699029Kt.foo : Ljava/lang/String;\n    ASTORE 2\n   L3\n    LINENUMBER 9 L3\n    NEW java/lang/StringBuilder\n    DUP\n    INVOKESPECIAL java/lang/StringBuilder.&lt;init&gt; ()V\n    LDC \"we got: \"\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    ALOAD 0\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    BIPUSH 32\n    INVOKEVIRTUAL java/lang/StringBuilder.append (C)Ljava/lang/StringBuilder;\n    ALOAD 1\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    BIPUSH 32\n    INVOKEVIRTUAL java/lang/StringBuilder.append (C)Ljava/lang/StringBuilder;\n    ALOAD 2\n    INVOKEVIRTUAL java/lang/StringBuilder.append (Ljava/lang/String;)Ljava/lang/StringBuilder;\n    INVOKEVIRTUAL java/lang/StringBuilder.toString ()Ljava/lang/String;\n    ASTORE 3\n   L4\n    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;\n    ALOAD 3\n    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/Object;)V\n   L5\n   L6\n    LINENUMBER 11 L6\n    RETURN\n   L7\n    LOCALVARIABLE c Ljava/lang/String; L3 L7 2\n    LOCALVARIABLE b Ljava/lang/String; L2 L7 1\n    LOCALVARIABLE a Ljava/lang/String; L1 L7 0\n    MAXSTACK = 2\n    MAXLOCALS = 4\n\n  // access flags 0x1009\n  public static synthetic main([Ljava/lang/String;)V\n    INVOKESTATIC Test53699029Kt.main ()V\n    RETURN\n    MAXSTACK = 0\n    MAXLOCALS = 1\n\n  // access flags 0x8\n  static &lt;clinit&gt;()V\n   L0\n    LINENUMBER 3 L0\n    LDC \"aaa\"\n    PUTSTATIC Test53699029Kt.foo : Ljava/lang/String;\n    RETURN\n    MAXSTACK = 1\n    MAXLOCALS = 0\n</code></pre>\n\n<p>using <code>val foo = \"aaa\"</code> will produce a normal <code>final static String foo</code> field and <code>final static String getFoo()</code> method, but using <code>val foo: String</code> with <code>get()</code> will not produce that field, just produce a method. This getter function is generated by Kotlin, I believe the lost of field comes from the lost of initial assignment in declaration of <code>val</code>, but I can't find the real documentation of that, in question like <a href=\"https://stackoverflow.com/questions/37906607/getters-and-setters-in-kotlin\">Getters and Setters in Kotlin</a> just directly use this conclusion.</p>\n\n<p>So, this seems a bypass for modification of <code>final static</code>.</p>\n\n<p>Problems occur when an immutable field referenced a mutable field. <code>val</code> is not re-assignable, but it referenced a <code>var</code>, a re-assignable field, this results in the modification of <code>val</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 5, "last_activity_date": 1544430740, "creation_date": 1544430740, "answer_id": 53701961, "question_id": 53698928, "link": "https://stackoverflow.com/questions/53698928/kotlin-custom-getter-makes-val-and-var-confusing/53701961#53701961", "title": "Kotlin custom Getter makes `val` and `var` confusing?", "body": "<blockquote>\n  <p>In Kotlin, var is mutable and val should be assigned only once.</p>\n</blockquote>\n\n<p>For local variables, yes. For properties, not really: <code>val</code> means \"only has a getter\", <code>var</code> means \"has both a getter and a setter\". This getter (and setter) is allowed to do pretty much anything. You could just return a random value each time, for example.</p>\n\n<p>An exception is reassigning the backing field for a <code>val</code>:</p>\n\n<pre><code>val foo: Int = 0\n  get(){\n    field++\n    return field\n  }\n</code></pre>\n\n<p>won't compile.</p>\n"}], "owner": {"reputation": 16930, "user_id": 1032613, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/h4jzP.jpg?s=128&g=1", "display_name": "user1032613", "link": "https://stackoverflow.com/users/1032613/user1032613"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 1, "accepted_answer_id": 53701961, "answer_count": 2, "score": 8, "last_activity_date": 1544430740, "creation_date": 1544410767, "question_id": 53698928, "link": "https://stackoverflow.com/questions/53698928/kotlin-custom-getter-makes-val-and-var-confusing", "title": "Kotlin custom Getter makes `val` and `var` confusing?", "body": "<p>In Kotlin, <code>var</code> is mutable and <code>val</code> should be assigned only once.</p>\n\n<p>However, consider <code>val foo</code> in the following example:</p>\n\n<pre><code>var counter = 0\n\nval foo: String\n  get(){\n    counter++\n    return \"val$counter\"\n  }\n\nfun main(): String {\n    val a = foo\n    val b = foo\n    val c = foo\n    return \"we got: $a $b $c\"\n    // output: we got: val1 val2 val3\n}\n</code></pre>\n\n<p>The <code>get()</code> method is executed each time we try to access <code>foo</code>, resulting <strong>different values for val</strong>.</p>\n\n<p>Since the value of <code>foo</code> is changing, I tried to use <code>var</code>. The compiler then complained about \"Property must be initialized\". So I had to give it a default value:</p>\n\n<pre><code>var foo: String = \"default value that will never be used\"\n  get(){\n    counter++\n    return \"val$counter\"\n  }\n</code></pre>\n\n<p>I don't like either approach here. What's the correct practice?</p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 165, "user_id": 5201222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-y2yw7pd3QlI/AAAAAAAAAAI/AAAAAAAADW4/M5oE81101Xk/photo.jpg?sz=128", "display_name": "Refael Sheinker", "link": "https://stackoverflow.com/users/5201222/refael-sheinker"}, "edited": false, "score": 0, "creation_date": 1579036699, "post_id": 53698297, "comment_id": 105632106, "body": "I have the same problem."}, {"owner": {"reputation": 13274, "user_id": 419761, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3719d63417e1d046ab9cf6a0a53d22b7?s=128&d=identicon&r=PG", "display_name": "l33t", "link": "https://stackoverflow.com/users/419761/l33t"}, "edited": false, "score": 0, "creation_date": 1580095692, "post_id": 53698297, "comment_id": 105972451, "body": "No update on this? Will the new <code>View binding</code> (in <code>Android Studio 3.6</code>) be of help here?"}], "owner": {"reputation": 4787, "user_id": 862300, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/N2p1n.jpg?s=128&g=1", "display_name": "pezcode", "link": "https://stackoverflow.com/users/862300/pezcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1544404058, "creation_date": 1544404058, "question_id": 53698297, "link": "https://stackoverflow.com/questions/53698297/android-data-binding-to-fragment", "title": "Android data binding to fragment", "body": "<p>Is it possible to have data binding give me a reference to a fragment inside an activity layout?</p>\n\n<p>My activity has a fragment within a FrameLayout, and I get the data binding like this:</p>\n\n<pre><code>fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val binding: ActivityUxBinding = DataBindingUtil.setContentView(this, R.layout.activity_ux)\n</code></pre>\n\n<p>The auto-generated ActivityUxBinding contains no member for the fragment so I still have to do this:</p>\n\n<pre><code>arFragment = supportFragmentManager.findFragmentById(R.id.ux_fragment) as ArFragment\n</code></pre>\n\n<p>Is there a way to get a member uxFragment of the type specified in the layout?</p>\n\n<p>For reference, the activity's layout:</p>\n\n<pre><code>&lt;layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;FrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n        &lt;fragment android:name=\"edu.htw.cd.ar.objectdetect.sceneform.ArFragmentWithoutInstructions\"\n            android:id=\"@+id/ux_fragment\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" /&gt;\n        &lt;com.google.android.material.floatingactionbutton.FloatingActionButton\n            android:id=\"@+id/search_fab\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_gravity=\"bottom|end\"\n            android:layout_margin=\"16dp\"\n            app:srcCompat=\"@drawable/ic_search\"\n            app:elevation=\"6dp\" /&gt; &lt;!-- https://material.io/design/environment/elevation.html --&gt;\n    &lt;/FrameLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n"}, {"tags": ["sqlite", "kotlin", "android-cursorloader", "anko"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6305028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V1xzqGemjvc/AAAAAAAAAAI/AAAAAAAAAN4/NoFG-AJpA74/photo.jpg?sz=128", "display_name": "Bob33700", "link": "https://stackoverflow.com/users/6305028/bob33700"}, "is_accepted": true, "score": 0, "last_activity_date": 1544546705, "last_edit_date": 1544546705, "creation_date": 1544545850, "answer_id": 53728452, "question_id": 53696245, "link": "https://stackoverflow.com/questions/53696245/anko-sqlite-populate-listview-asynchronously-from-database/53728452#53728452", "title": "AnKo SQLite : populate listview asynchronously from database?", "body": "<p>OK, here is my solution... I don't know if it is the best :</p>\n\n<ol>\n<li>create a new kotlin class \"MyCursorLoader\" that extends CursorLoader</li>\n<li><p>set the primary constructor like this :</p>\n\n<p><code>class MyCursorLoader( \n    mContext: Context,\n    val mTableName: String,\n    var mProjection: Array&lt;String&gt;? = null,\n    var mSelection: String = \"1\",\n    var mSelectionArgs: Array&lt;String&gt; = emptyArray(),\n    var mGroupBy: String = MySqlHelper.ID,\n    var mHaving: String = \"\",\n    var mSortOrder: String = \"${MySqlHelper.ID} ASC\",\n    var mLimit: String = \"\",\n    var mDistinct: Boolean = true\n): CursorLoader(mContext) {\nval mObserver: Loader&lt;Cursor&gt;.ForceLoadContentObserver = Loader&lt;Cursor&gt;(mContext).ForceLoadContentObserver()\nvar mCancellationSignal: CancellationSignal? = null</code></p></li>\n<li><p>override the OnLoadInBackground method with te same code than built-in one, just replacing the <code>val cursor = ContentResolverCompat.query(...</code> line with :</p>\n\n<pre><code>val cursor = MySqlHelper.instance.readableDatabase.query(\n    mDistinct, mTableName, mProjection, mSelection, mSelectionArgs, mGroupBy, mHaving, mSortOrder, mLimit, mCancellationSignal)\n</code></pre></li>\n</ol>\n\n<p>So no need to recreate a dataprovider in manifest, no need to deal with Uri's... I can use MyCursorLoader exactly like built-in CursorLoader, calling it like this :</p>\n\n<pre><code>    override fun onCreateLoader(id: Int, args: Bundle?): Loader&lt;Cursor&gt; {\n        when (id) {\n            DAY_HEADER_LOADER -&gt;\n                return MyCursorLoader(mContext, TABLE_EVENTS, arrayOf(ID, DAY), mGroupBy = DAY, mSortOrder = \"$DAY  DESC\")\n        ...\n        }\n    }\n</code></pre>\n\n<p>Let me know if ther is a better solution.</p>\n\n<p>Hope that can help.</p>\n"}], "owner": {"reputation": 21, "user_id": 6305028, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V1xzqGemjvc/AAAAAAAAAAI/AAAAAAAAAN4/NoFG-AJpA74/photo.jpg?sz=128", "display_name": "Bob33700", "link": "https://stackoverflow.com/users/6305028/bob33700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 53728452, "answer_count": 1, "score": 0, "last_activity_date": 1544546705, "creation_date": 1544386350, "question_id": 53696245, "link": "https://stackoverflow.com/questions/53696245/anko-sqlite-populate-listview-asynchronously-from-database", "title": "AnKo SQLite : populate listview asynchronously from database?", "body": "<p>I'm trying to translate my app from Java to Kotlin.\nI'm managing database with AnKo SQLite</p>\n\n<p>All is OK except listviews with CursorLoaders : I can't find how to replace CursorLoader while using AnKo SQLite.\n(and same problem with expandableListViews)</p>\n\n<p>Can somebody help me please?</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 1374991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b8c7e78224658d9d022df3ddc83834?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1374991/alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1544387121, "creation_date": 1544387121, "answer_id": 53696352, "question_id": 53696176, "link": "https://stackoverflow.com/questions/53696176/kotlin-android-studio-handle-button-click-inside-recyclerview-adapter/53696352#53696352", "title": "Kotlin Android Studio - handle button click inside recyclerView adapter", "body": "<p>I suppose you should add an extension lister. Here's <a href=\"https://dzone.com/articles/click-listener-for-recyclerview-adapter\" rel=\"nofollow noreferrer\">https://dzone.com/articles/click-listener-for-recyclerview-adapter</a>.\nAlso, you must add the custom lister for the save button.</p>\n\n<pre><code>override fun onBindViewHolder(holder: ArticleViewHolder, position: Int) {\n\n  val article: Article = controller.articles[position]\n\n  if(article.title.length &gt; 100) {\n    holder.itemView.titleTv.text = \"${article.title.substring(0, 99)}...\"\n  } else {\n    holder.itemView.titleTv.text = article.title\n  }\n\n  holder.itemView.authorTv.text = article.author\n\n\n  *holder.btnSave.setOnClickListener(){_ -&gt;\n    **yourCustomListener**.OnClick(data/position) }*\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544399118, "post_id": 53696435, "comment_id": 94250994, "body": "<code>setOnClickListener</code> still seems to be unresolved reference"}, {"owner": {"reputation": 1159, "user_id": 6329985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26042e2e619f77144b8d947e3d2b671?s=128&d=identicon&r=PG&f=1", "display_name": "DawidJ", "link": "https://stackoverflow.com/users/6329985/dawidj"}, "reply_to_user": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "edited": false, "score": 0, "creation_date": 1544449976, "post_id": 53696435, "comment_id": 94268702, "body": "You have to take it from ArticleViewHolder, I don&#39;t know what is the proper name of your view."}], "tags": [], "owner": {"reputation": 1159, "user_id": 6329985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26042e2e619f77144b8d947e3d2b671?s=128&d=identicon&r=PG&f=1", "display_name": "DawidJ", "link": "https://stackoverflow.com/users/6329985/dawidj"}, "is_accepted": false, "score": 1, "last_activity_date": 1544408337, "last_edit_date": 1544408337, "creation_date": 1544387757, "answer_id": 53696435, "question_id": 53696176, "link": "https://stackoverflow.com/questions/53696176/kotlin-android-studio-handle-button-click-inside-recyclerview-adapter/53696435#53696435", "title": "Kotlin Android Studio - handle button click inside recyclerView adapter", "body": "<p>You have to handle it in <code>onBindViewHolder()</code> but logic which is responsible for creating and showing <code>AlertDialog</code> shouldn't be located in RecyclerView. You need to create an interface,  which will be responsible for passing <code>onClick()</code> event information from your adapter to activity/fragment, and there you should show <code>AlertDialog</code>.</p>\n\n<pre><code>class ArticleAdapter(private val controller: IController) : RecyclerView.Adapter&lt;ArticleViewHolder&gt;() {\n\noverride fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ArticleViewHolder {\n    val view = LayoutInflater.from(parent.context).inflate(R.layout.articlerecycler_item, parent, false)\n    return ArticleViewHolder(view)\n}\n\noverride fun getItemCount(): Int {\n    return controller.articles.size\n}\n\noverride fun onBindViewHolder(holder: ArticleViewHolder, position: Int) {\n    val article: Article = controller.articles[position]\n\n    if(article.title.length &gt; 100) {\n        holder.itemView.titleTv.text = \"${article.title.substring(0, 99)}...\"\n    } else {\n        holder.itemView.titleTv.text = article.title\n    }\n\n    btnSave.setOnClickListener {\n        listener?.onSaveButtonClick()\n    }\n\n    holder.itemView.authorTv.text = article.author\n}\n\nprivate var listener: OnClickListener? = null\n\nfun setListener(listener: OnClickListener) {\n    this.listener = listener\n}\n\n}\n\ninterface OnClickListener {\n    fun onSaveButtonClick()\n}\n\nclass ArticleViewHolder(view: View?) : RecyclerView.ViewHolder(view)\n</code></pre>\n\n<p>Now pass the instance of <code>OnClickListener</code> from your activity to your adapter by <code>setListener()</code> method. </p>\n"}, {"comments": [{"owner": {"reputation": 1855, "user_id": 6126461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJok9.jpg?s=128&g=1", "display_name": "Kurt Acosta", "link": "https://stackoverflow.com/users/6126461/kurt-acosta"}, "edited": false, "score": 1, "creation_date": 1544402155, "post_id": 53696717, "comment_id": 94251503, "body": "How about putting the listener in the constructor to force it to always implement the button click listener?"}, {"owner": {"reputation": 1430, "user_id": 4035036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OtQfl.jpg?s=128&g=1", "display_name": "Mosius", "link": "https://stackoverflow.com/users/4035036/mosius"}, "reply_to_user": {"reputation": 1855, "user_id": 6126461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QJok9.jpg?s=128&g=1", "display_name": "Kurt Acosta", "link": "https://stackoverflow.com/users/6126461/kurt-acosta"}, "edited": false, "score": 0, "creation_date": 1544423860, "post_id": 53696717, "comment_id": 94256005, "body": "@KurtAcosta Depending on the situation it could be a better approach."}], "tags": [], "owner": {"reputation": 1430, "user_id": 4035036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OtQfl.jpg?s=128&g=1", "display_name": "Mosius", "link": "https://stackoverflow.com/users/4035036/mosius"}, "is_accepted": false, "score": 4, "last_activity_date": 1544389898, "creation_date": 1544389898, "answer_id": 53696717, "question_id": 53696176, "link": "https://stackoverflow.com/questions/53696176/kotlin-android-studio-handle-button-click-inside-recyclerview-adapter/53696717#53696717", "title": "Kotlin Android Studio - handle button click inside recyclerView adapter", "body": "<p>A good solution to handle the items click of an adapter is to pass them to the activity or fragment which has created them.</p>\n\n<p>With kotlin you can use function definition instead of an interface for this simple work, so inside your adapter class add a <code>var</code> of a function type:</p>\n\n<pre><code>private var listener: ((item: DataClass) -&gt; Unit)? = null\n\nfun setOnItemClickListener(listener: (item: DataClass) -&gt; Unit) {\n    this.listener = listener\n}\n</code></pre>\n\n<p>And inside the <code>ViewHolder</code> class set the listener, something like below:</p>\n\n<pre><code>class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n    init {\n        itemView.btn_save.setOnClickListener { listener?.invoke(data[adapterPosition]) }\n    }\n\n    // ...\n}\n</code></pre>\n\n<p>Finally inside your activity or fragment you can easily access the items by adding  a new listener:</p>\n\n<pre><code>adapter.setOnItemClickListener { it -&gt; TODO() }\n</code></pre>\n\n<p>Notice that setting listeners inside <code>ViewHolder</code> constructor(<code>init</code>) is more efficient as it is not necessary to set a listener for every data binding.</p>\n"}], "owner": {"reputation": 1351, "user_id": 6386779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5e59ced1c50dde5c5a11dfdeaf3f62d5?s=128&d=identicon&r=PG&f=1", "display_name": "DJ2", "link": "https://stackoverflow.com/users/6386779/dj2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5311, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1544408337, "creation_date": 1544385795, "question_id": 53696176, "link": "https://stackoverflow.com/questions/53696176/kotlin-android-studio-handle-button-click-inside-recyclerview-adapter", "title": "Kotlin Android Studio - handle button click inside recyclerView adapter", "body": "<p>I have a recyclerView adapter named <code>ArticleAdapter</code></p>\n\n<pre><code>import kotlinx.android.synthetic.main.articlerecycler_item.view.*\n\n\nclass ArticleAdapter(private val controller: IController) : RecyclerView.Adapter&lt;ArticleViewHolder&gt;() {\n\n  override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ArticleViewHolder {\n      val view = LayoutInflater.from(parent.context).inflate(R.layout.articlerecycler_item, parent, false)\n      return ArticleViewHolder(view)\n\n\n  }\n    // How implement a button click for `btnSave`\n    /** Called when the user taps the Save button  */\n     btnSave.setOnClickListener(){\n        (R.layout.articlerecycler_item)\n        AlertDialog.Builder(this)\n                .setMessage(\"Article Saved.\")\n                .create()\n                .show()\n        // Do something in response to button click\n    }\n\n  override fun getItemCount(): Int {\n      return controller.articles.size\n  }\n\n  override fun onBindViewHolder(holder: ArticleViewHolder, position: Int) {\n\n      val article: Article = controller.articles[position]\n\n      if(article.title.length &gt; 100) {\n        holder.itemView.titleTv.text = \"${article.title.substring(0, 99)}...\"\n      } else {\n        holder.itemView.titleTv.text = article.title\n      }\n\n      holder.itemView.authorTv.text = article.author\n  }\n\n}\nclass ArticleViewHolder(view: View?) : RecyclerView.ViewHolder(view)\n</code></pre>\n\n<p>Then in my recyclerView layout I have a button </p>\n\n<pre><code>&lt;Button\n    android:id=\"@+id/btnSave\"\n    android:layout_width=\"70dp\"\n    android:layout_height=\"40dp\"\n    android:onClick=\"btnSave\"\n    android:text=\"@string/save\"\n    android:textAlignment=\"center\" /&gt;\n</code></pre>\n\n<p>Do I handle the event inside <code>onBindViewHolder</code>? I'm not sure how to implement the listener within my recyclerView adapter</p>\n"}, {"tags": ["android", "kotlin", "android-recyclerview"], "comments": [{"owner": {"reputation": 921, "user_id": 9662401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jk9UU.jpg?s=128&g=1", "display_name": "Dr4ke the b4dass", "link": "https://stackoverflow.com/users/9662401/dr4ke-the-b4dass"}, "edited": false, "score": 0, "creation_date": 1544375974, "post_id": 53694594, "comment_id": 94244827, "body": "What about when you click on shopping and not shopping?"}, {"owner": {"reputation": 399, "user_id": 8272646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1568957546511246/picture?type=large", "display_name": "Ahmed Rajab", "link": "https://stackoverflow.com/users/8272646/ahmed-rajab"}, "reply_to_user": {"reputation": 921, "user_id": 9662401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jk9UU.jpg?s=128&g=1", "display_name": "Dr4ke the b4dass", "link": "https://stackoverflow.com/users/9662401/dr4ke-the-b4dass"}, "edited": false, "score": 0, "creation_date": 1544376038, "post_id": 53694594, "comment_id": 94244849, "body": "@Dr4ketheb4dass also the same problem occures when clicking shopping/notshopping"}, {"owner": {"reputation": 399, "user_id": 8272646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1568957546511246/picture?type=large", "display_name": "Ahmed Rajab", "link": "https://stackoverflow.com/users/8272646/ahmed-rajab"}, "reply_to_user": {"reputation": 921, "user_id": 9662401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jk9UU.jpg?s=128&g=1", "display_name": "Dr4ke the b4dass", "link": "https://stackoverflow.com/users/9662401/dr4ke-the-b4dass"}, "edited": false, "score": 0, "creation_date": 1544378943, "post_id": 53694594, "comment_id": 94245701, "body": "no i do not think so@Dr4ketheb4dass"}], "answers": [{"tags": [], "owner": {"reputation": 2792, "user_id": 4853835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDbHU.jpg?s=128&g=1", "display_name": "ygngy", "link": "https://stackoverflow.com/users/4853835/ygngy"}, "is_accepted": false, "score": 1, "last_activity_date": 1544389775, "last_edit_date": 1544389775, "creation_date": 1544382700, "answer_id": 53695740, "question_id": 53694594, "link": "https://stackoverflow.com/questions/53694594/changing-visibility-of-a-recyclerview-item-changes-other-items-visibility/53695740#53695740", "title": "changing visibility of a recyclerview item changes other item&#39;s visibility", "body": "<p>only <strong>use bind for setting item content</strong> in every item and <strong>move listeners from bind method to holder class</strong>:</p>\n\n<pre><code>inner class ItemViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        var liked = false\n        var shopped = false\n        val like=itemView.findViewById&lt;ImageView&gt;(R.id.like)\n        val unlike=itemView.findViewById&lt;ImageView&gt;(R.id.unlike)\n        val shopping=itemView.findViewById&lt;ImageView&gt;(R.id.shopping)\n        val notshopping=itemView.findViewById&lt;ImageView&gt;(R.id.notShopping)\n\n        init{\n\n           like?.setOnClickListener{\n                 liked = true\n                 like.visibility=View.GONE\n                 unlike.visibility=View.VISIBLE\n           }\n           unlike?.setOnClickListener{\n                  liked = false\n                  unlike.visibility=View.GONE\n                  like.visibility=View.VISIBLE\n           }\n           shopping?.setOnClickListener{\n                  shopped = true \n                  shopping.visibility=View.GONE\n                  notshopping.visibility=View.VISIBLE\n           }\n           notshopping?.setOnClickListener{\n                  shopped = false\n                  notshopping.visibility=View.GONE\n                  shopping.visibility=View.VISIBLE\n           }\n       }\n\n       fun bind(){// call this from onBind method of adapter\n         if(liked) like?.performClick() else unlike?.performClick()\n         if(shopped) shopping?.performClick() else notshopping?.performClick()\n       }\n\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 583, "user_id": 6010005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KnJ6RaW7cnw/AAAAAAAAAAI/AAAAAAAAAFI/4KjE56Xiy-4/photo.jpg?sz=128", "display_name": "Wasim Abuzaher", "link": "https://stackoverflow.com/users/6010005/wasim-abuzaher"}, "edited": false, "score": 0, "creation_date": 1544383006, "post_id": 53695757, "comment_id": 94246899, "body": "Use proper Kotlin way of setting and getting (I don&#39;t think .set and .get is the right way, I guess you should do .isLiked=true and .isLiked)"}], "tags": [], "owner": {"reputation": 583, "user_id": 6010005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KnJ6RaW7cnw/AAAAAAAAAAI/AAAAAAAAAFI/4KjE56Xiy-4/photo.jpg?sz=128", "display_name": "Wasim Abuzaher", "link": "https://stackoverflow.com/users/6010005/wasim-abuzaher"}, "is_accepted": true, "score": 0, "last_activity_date": 1544382834, "creation_date": 1544382834, "answer_id": 53695757, "question_id": 53694594, "link": "https://stackoverflow.com/questions/53694594/changing-visibility-of-a-recyclerview-item-changes-other-items-visibility/53695757#53695757", "title": "changing visibility of a recyclerview item changes other item&#39;s visibility", "body": "<p>That happens because its a recycler view (so the view gets recycled as you scroll and the visibility of the like or unlike sticks there.</p>\n\n<p>Modify your item object to include a boolean <code>isLiked</code> and set that to true or false on the onClick:</p>\n\n<pre><code>holder.like.setOnClickListener{\n            item.setIsLiked(true);\n        }\n\nholder.unlike.setOnClickListener{\n            item.setIsLiked(false);\n        }\n</code></pre>\n\n<p>and set the view visibility based on that:</p>\n\n<pre><code>holder.like.visibility=item.getIsLiked() ? View.VISIBLE : View.GONE; \nholder.unlike.visibility=item.getIsLiked() ? View.GONE : View.VISIBLE;\n</code></pre>\n\n<p><strong>note</strong>: setIsLiked(boolean like) and getIsLiked() could be different names if you use auto-generated getters and setters;</p>\n\n<p>do same for shopping notshopping</p>\n"}], "owner": {"reputation": 399, "user_id": 8272646, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1568957546511246/picture?type=large", "display_name": "Ahmed Rajab", "link": "https://stackoverflow.com/users/8272646/ahmed-rajab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1261, "favorite_count": 0, "accepted_answer_id": 53695757, "answer_count": 2, "score": 2, "last_activity_date": 1544389775, "creation_date": 1544374757, "last_edit_date": 1544380234, "question_id": 53694594, "link": "https://stackoverflow.com/questions/53694594/changing-visibility-of-a-recyclerview-item-changes-other-items-visibility", "title": "changing visibility of a recyclerview item changes other item&#39;s visibility", "body": "<p>I have a recyclerView with an adapter... the recyclerview has items with a like,unlike buttons. when i click (like) button the (unlike) should become invisibile and vise versa..every thing is working fine but when i click (like) in an item the (unlike) in other items is also becoming invisible as if I am clicking the same button in other views\nI already tried this answer but it did not work <a href=\"https://stackoverflow.com/questions/37363068/android-changing-visibility-of-a-view-in-recyclerview\">Android: Changing visibility of a view in recyclerView</a>\nhere is the adapter code :</p>\n\n<pre><code>    package com.example.user.myapplication;\n\nimport android.app.Activity\nimport android.content.Context\nimport android.content.Intent\nimport android.content.SharedPreferences\nimport android.opengl.Visibility\nimport android.support.v4.widget.SwipeRefreshLayout\nimport android.support.v7.widget.RecyclerView\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.view.animation.*\nimport android.widget.*\nimport kotlinx.android.synthetic.main.activity_main.*\nimport kotlinx.android.synthetic.main.activity_main.view.*\nimport kotlinx.android.synthetic.main.item.view.*\nimport kotlinx.android.synthetic.main.itemm.view.*\nimport java.io.BufferedReader\nimport java.io.File\nimport java.io.FileReader\n\n/**\n * Created by Ahmed on 10/14/2018.\n */\n\nclass ItemmAdapter(private val mItems: Array&lt;File&gt;,private val activity:Activity) : RecyclerView.Adapter&lt;ItemmAdapter.ItemViewHolder&gt;() {\n\n    lateinit var parent:ViewGroup\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ItemViewHolder {\n        val view = LayoutInflater.from(parent.context).inflate(R.layout.itemm, parent, false)\n        this.parent=parent\n        return ItemViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: ItemViewHolder, position: Int) {\n\n        val item = mItems[position]\n        holder.itemView.layoutParams=RecyclerView.LayoutParams(parent.context.resources.displayMetrics.widthPixels/2,RecyclerView.LayoutParams.MATCH_PARENT)\n\n\n\n        //holder.itemView.findViewById&lt;ImageView&gt;(R.id.image).setImageResource(R.drawable.icons8_cycling_104)\n        //holder.itemView.findViewById&lt;TextView&gt;(R.id.description).text=\"abcdefghijklmnopqrstuvwxyz\u0636\u0635\u062b\u0642\u0641\u063a\u0639\u0647\u062e\u062d\u062c\u062f\u0637\u0643\u0645\u0646\u062a\u0627\u0644\u0628\u064a\u0633\u0634\u0630\u0626\u0621\u0624\u0631\u0644\u0627\u0649\u0629\"\n        //holder.itemView.findViewById&lt;TextView&gt;(R.id.price).text=\"10000$\"\n        holder.like.setOnClickListener{\n            holder.like.visibility=View.GONE\n            holder.unlike.visibility=View.VISIBLE\n        }\n        holder.unlike.setOnClickListener{\n            holder.unlike.visibility=View.GONE\n            holder.like.visibility=View.VISIBLE\n        }\n        holder.shopping.setOnClickListener{\n            holder.shopping.visibility=View.GONE\n            holder.notshopping.visibility=View.VISIBLE\n        }\n        holder.notshopping.setOnClickListener{\n            holder.notshopping.visibility=View.GONE\n            holder.shopping.visibility=View.VISIBLE\n        }\n    }\n\n    override fun getItemCount(): Int {\n        return mItems.size\n    }\n\n    inner class ItemViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        val like=itemView.findViewById&lt;ImageView&gt;(R.id.like)\n        val unlike=itemView.findViewById&lt;ImageView&gt;(R.id.unlike)\n        val shopping=itemView.findViewById&lt;ImageView&gt;(R.id.shopping)\n        val notshopping=itemView.findViewById&lt;ImageView&gt;(R.id.notShopping)\n\n\n    }\n\n}\n</code></pre>\n\n<p>help me please</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin", "firebase-authentication"], "answers": [{"comments": [{"owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "edited": false, "score": 0, "creation_date": 1545309495, "post_id": 53865889, "comment_id": 94584678, "body": "I am trying to link the account as per google document and that works , but it breaks the link if I relogin using email after this if I relogin using phone"}, {"owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "edited": false, "score": 0, "creation_date": 1545309562, "post_id": 53865889, "comment_id": 94584714, "body": "I am not sure your method will work since above mentioned issue was accepted by firebase support team as they could reproduce it , this surely is an issue with firebase ."}, {"owner": {"reputation": 500, "user_id": 7672400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fce51cb5b28f705153324d40d87725e?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Pardhiye", "link": "https://stackoverflow.com/users/7672400/ashish-pardhiye"}, "reply_to_user": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "edited": false, "score": 0, "creation_date": 1545851678, "post_id": 53865889, "comment_id": 94712440, "body": "@vishaldharankar This happens due to security reasons. I&#39;ve researched a year ago  on the same issue. Since email accounts are considered as primary authentication source. If you tried doing the same procedure with fb and after that google auth with same account. It will create two different accounts. I&#39;m just searching for the reference where i&#39;ve read the answer"}, {"owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "edited": false, "score": 0, "creation_date": 1545855283, "post_id": 53865889, "comment_id": 94713483, "body": "there has to be some solution for that"}], "tags": [], "owner": {"reputation": 500, "user_id": 7672400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fce51cb5b28f705153324d40d87725e?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish Pardhiye", "link": "https://stackoverflow.com/users/7672400/ashish-pardhiye"}, "is_accepted": false, "score": 3, "last_activity_date": 1545298575, "creation_date": 1545298575, "answer_id": 53865889, "question_id": 53694493, "link": "https://stackoverflow.com/questions/53694493/phone-authentication-creates-new-account-and-breaks-link-on-firebase/53865889#53865889", "title": "Phone authentication creates new account and breaks link on firebase", "body": "<p>You are planning for two step authentication in app with phone and email. Please see this question and answer <a href=\"https://stackoverflow.com/a/44966449/7672400\">https://stackoverflow.com/a/44966449/7672400</a> .\nI've implemented the same. It might help you</p>\n"}], "owner": {"reputation": 7066, "user_id": 939501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TVE2.png?s=128&g=1", "display_name": "vishal dharankar", "link": "https://stackoverflow.com/users/939501/vishal-dharankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1545298575, "creation_date": 1544374083, "last_edit_date": 1544374912, "question_id": 53694493, "link": "https://stackoverflow.com/questions/53694493/phone-authentication-creates-new-account-and-breaks-link-on-firebase", "title": "Phone authentication creates new account and breaks link on firebase", "body": "<p>I am linkning an email with phone authenticated user account on firebase as per code given. I am first creating a new user using phone sms authentication, after that trying to associate an email with this user since I want to also let user login using email. For email I am using email link verification. Linking takes place and I can see two authentication methods for a user in dashboard. Now when I logout and try to login using email link authentication firebase creates a new user and now I have two user one by phone and other by email. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code> val credential:AuthCredential = EmailAuthProvider.getCredential(email,link)\r\nmAuth!!.currentUser?.linkWithCredential(credential)?.addOnCompleteListener(this) { task -&gt;\r\nif (task.isSuccessful) {\r\n       Log.d(TAG, \"linkWithCredential:success\")\r\n       val user = task.result?.user\r\n\r\n} else {\r\n       Log.w(TAG, \"linkWithCredential:failure\", task.exception)\r\n       Toast.makeText(baseContext, \"Authentication failed.\",\r\n       Toast.LENGTH_SHORT).show()\r\n\r\n}\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have been banging my head on Firebase documents since hours now but not clue why this is happening . Neither could I find any post related to this.\nAny pointers are appreciated.</p>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-gradle-plugin"], "comments": [{"owner": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544386790, "post_id": 53694306, "comment_id": 94247949, "body": "It&#39;s seems that your Android Studio cannot connect to internet. Are you under a corporate firewall? If yes, ask your admin to check why your Android Studio are not able to access internet. If not: are you on OSX or Windows? Do you use a VPN proxy?"}, {"owner": {"reputation": 1, "user_id": 10438227, "user_type": "registered", "profile_image": "https://graph.facebook.com/180608422835112/picture?type=large", "display_name": "AjaX", "link": "https://stackoverflow.com/users/10438227/ajax"}, "reply_to_user": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544465536, "post_id": 53694306, "comment_id": 94277092, "body": "I am running windows 10 64bit , Android studio was running perfectly in the ast few days ive made some changes in the firewall but i dont quite remmember. I tried disabling the anstivirus and windows firewall as well but nothing changed (and yes i have access to internet)"}, {"owner": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544469254, "post_id": 53694306, "comment_id": 94278748, "body": "Have you tried to unistall and reinstall it? Are you able to try on a different PC?"}, {"owner": {"reputation": 1, "user_id": 10438227, "user_type": "registered", "profile_image": "https://graph.facebook.com/180608422835112/picture?type=large", "display_name": "AjaX", "link": "https://stackoverflow.com/users/10438227/ajax"}, "reply_to_user": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544538491, "post_id": 53694306, "comment_id": 94305811, "body": "I Re-installed it twice but still getting the error, I already have Android Studio installed on my main Desktop and Its running fine even offline."}, {"owner": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544540723, "post_id": 53694306, "comment_id": 94307216, "body": "Did you also try to start Window in safe mode and run AS? It really seems something that prevents AS to do something (seems starting an internal HTTP server). And try to think what&#39;s the difference between your main desktop and this PC in term of SW and Services installed."}, {"owner": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544540833, "post_id": 53694306, "comment_id": 94307290, "body": "You said you already tried also that <a href=\"https://stackoverflow.com/questions/19889503/android-studio-cannot-start-internal-http-server\" title=\"android studio cannot start internal http server\">stackoverflow.com/questions/19889503/&hellip;</a>, ain&#39;t it?"}, {"owner": {"reputation": 1, "user_id": 10438227, "user_type": "registered", "profile_image": "https://graph.facebook.com/180608422835112/picture?type=large", "display_name": "AjaX", "link": "https://stackoverflow.com/users/10438227/ajax"}, "reply_to_user": {"reputation": 10161, "user_id": 4677951, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fnR1Z.png?s=128&g=1", "display_name": "shadowsheep", "link": "https://stackoverflow.com/users/4677951/shadowsheep"}, "edited": false, "score": 0, "creation_date": 1544544095, "post_id": 53694306, "comment_id": 94309448, "body": "They are suggesting to disable the firewall but it is not the same case for me, also i tried running AS as Administrator but still, I ve restored the default settings for both the firewall and the the Network."}], "owner": {"reputation": 1, "user_id": 10438227, "user_type": "registered", "profile_image": "https://graph.facebook.com/180608422835112/picture?type=large", "display_name": "AjaX", "link": "https://stackoverflow.com/users/10438227/ajax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544372766, "creation_date": 1544372728, "last_edit_date": 1544372766, "question_id": 53694306, "link": "https://stackoverflow.com/questions/53694306/gradle-build-error-protocol-family-unavailable", "title": "Gradle build error : Protocol Family Unavailable", "body": "<p>Hey guys i have been struggling to fix the problem on my Android Studio 3.0 because  every time i try to start a new projects its gives me this error while building it \n<strong>Protocol Family Unavailable</strong> and along with this error i also have this:</p>\n\n<pre><code>4:08 PM Cannot start internal HTTP server. Git integration, JavaScript debugger and LiveEdit may operate with errors. Please check your firewall settings and restart Android Studio\n</code></pre>\n\n<p>I already tried all the possible fixes given in this forum but none worked for me.</p>\n"}, {"tags": ["android", "kotlin", "rx-kotlin2"], "answers": [{"tags": [], "owner": {"reputation": 10570, "user_id": 6401241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mduJJ.png?s=128&g=1", "display_name": "Radesh", "link": "https://stackoverflow.com/users/6401241/radesh"}, "is_accepted": true, "score": 0, "last_activity_date": 1544369201, "creation_date": 1544369201, "answer_id": 53693797, "question_id": 53693673, "link": "https://stackoverflow.com/questions/53693673/android-rxkotlin-crash-in-subcribe-combinelatest/53693797#53693797", "title": "Android rxKotlin crash in subcribe combineLatest", "body": "<p>Try this </p>\n\n<pre><code>runOnUiThread(new Runnable() {\n        @Override\n        public void run() {\n            if (btnAddItem.isEnabled != it){\n               btnAddItem.isEnabled = it\n            }\n        }\n});\n</code></pre>\n"}], "owner": {"reputation": 18, "user_id": 1559039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28cb614c220987b670f8b99006e5846?s=128&d=identicon&r=PG", "display_name": "Tu\u1ea5n Ho&#224;ng", "link": "https://stackoverflow.com/users/1559039/tu%e1%ba%a5n-ho%c3%a0ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53693797, "answer_count": 1, "score": 0, "last_activity_date": 1544425643, "creation_date": 1544368164, "last_edit_date": 1544425643, "question_id": 53693673, "link": "https://stackoverflow.com/questions/53693673/android-rxkotlin-crash-in-subcribe-combinelatest", "title": "Android rxKotlin crash in subcribe combineLatest", "body": "<p>I want <code>enable/disable</code> button when code &amp; name is not empty.</p>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>btnAddItem.isEnabled = false\n\n    val codeIsValid = RxTextView.textChanges(txvCode)\n        .debounce(350, TimeUnit.MILLISECONDS)\n        .map { code -&gt;\n            code.isNotEmpty()\n        }\n\n    val nameIsValid = RxTextView.textChanges(edtName)\n        .debounce(350, TimeUnit.MILLISECONDS)\n        .map { name -&gt;\n            name.isNotEmpty()\n        }\n\n    disposableEnableButtonSave = Observables.combineLatest(codeIsValid, nameIsValid) \n        { b1, b2 -&gt; b1 &amp;&amp; b2 }\n        .subscribe {\n            if (btnAddItem.isEnabled != it){\n                btnAddItem.isEnabled = it //crash here.\n            }\n        }\n</code></pre>\n\n<p>But it error when run:</p>\n\n<p><strong>Logcat:</strong></p>\n\n<blockquote>\n  <p>io.reactivex.exceptions.OnErrorNotImplementedException: Animators may only be run on Looper threads<br>\n  android.util.AndroidRuntimeException: Animators may only be run on <code>Looper</code> threads</p>\n</blockquote>\n\n<p>code crash is <code>enable/disable</code> button.</p>\n\n<pre><code>btnAddItem.isEnabled = it\n</code></pre>\n"}, {"tags": ["android", "android-intent", "kotlin"], "comments": [{"owner": {"reputation": 5219, "user_id": 4562287, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-q6oUlSeB8Xo/AAAAAAAAAAI/AAAAAAAAAFg/NB15_H7Q0eo/photo.jpg?sz=128", "display_name": "Vivek Mishra", "link": "https://stackoverflow.com/users/4562287/vivek-mishra"}, "edited": false, "score": 0, "creation_date": 1544368101, "post_id": 53693641, "comment_id": 94242674, "body": "<code>Get_year_input - getCurrentYear</code>. Current year will be greater than year input"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1544368120, "post_id": 53693641, "comment_id": 94242680, "body": "Why are you launching two intents?"}, {"owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "edited": false, "score": 1, "creation_date": 1544368151, "post_id": 53693641, "comment_id": 94242686, "body": "Put both extras to 1 intent"}, {"owner": {"reputation": 11, "user_id": 10767156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xnkck4ouDdw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ik26Teg4u7LT5qnwA6v1A0kxDG6A/mo/photo.jpg?sz=128", "display_name": "AmR GaMeR", "link": "https://stackoverflow.com/users/10767156/amr-gamer"}, "edited": false, "score": 0, "creation_date": 1544368285, "post_id": 53693641, "comment_id": 94242730, "body": "how ? i tried .. should i use StartActivites with array"}, {"owner": {"reputation": 736, "user_id": 8614565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223dd9dad7b32ac3a1881be17469e545?s=128&d=identicon&r=PG&f=1", "display_name": "KYHSGeekCode", "link": "https://stackoverflow.com/users/8614565/kyhsgeekcode"}, "edited": false, "score": 0, "creation_date": 1544368324, "post_id": 53693641, "comment_id": 94242744, "body": "// Send Data val i = Intent(applicationContext, Second::class.java)  i.putExtra(&quot;Month&quot;, finish_month_input) i.putExtra(&quot;Year&quot;, finish_year_input)  startActivity(i)"}], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 8614565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223dd9dad7b32ac3a1881be17469e545?s=128&d=identicon&r=PG&f=1", "display_name": "KYHSGeekCode", "link": "https://stackoverflow.com/users/8614565/kyhsgeekcode"}, "is_accepted": false, "score": 0, "last_activity_date": 1544368858, "last_edit_date": 1544368858, "creation_date": 1544368784, "answer_id": 53693739, "question_id": 53693641, "link": "https://stackoverflow.com/questions/53693641/android-kotlin-get-data-intent-for-age-calculate/53693739#53693739", "title": "Android Kotlin - get data intent for age calculate", "body": "<p>In the first file:</p>\n\n<pre><code> val Get_year_input = age_year_input.text.toString().toInt()\n val getCurrentYear = Calendar.getInstance().get(Calendar.YEAR)\n val finish_year_input = Get_year_input - getCurrentYear\n val Get_month_input = age_month_input.text.toString().toInt()\n val getCurrentMonth = Calendar.getInstance().get(Calendar.MONTH)\n val finish_month_input = age_month_input.text.toString().toInt() - getCurrentMonth\n // Send Data\n val i = Intent(applicationContext, Second::class.java)\n i.putExtra(\"Month\", finish_month_input) \n i.putExtra(\"Year\", finish_year_input)\n startActivity(i)\n</code></pre>\n\n<p>You only need <strong>one</strong> intent. You are already using the key \"Month\" and \"Year\" to specify the name of the data, so need not use two intents.</p>\n"}], "owner": {"reputation": 11, "user_id": 10767156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xnkck4ouDdw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-ik26Teg4u7LT5qnwA6v1A0kxDG6A/mo/photo.jpg?sz=128", "display_name": "AmR GaMeR", "link": "https://stackoverflow.com/users/10767156/amr-gamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544368858, "creation_date": 1544367958, "question_id": 53693641, "link": "https://stackoverflow.com/questions/53693641/android-kotlin-get-data-intent-for-age-calculate", "title": "Android Kotlin - get data intent for age calculate", "body": "<p>the app should work like this : when i insert the year and month give me the result like : 2000 , 8 = 18 , 4 .. it's just give the month but the year not i think the problem is from startActivity i don't know what can i do am so beginner                </p>\n\n<pre><code>// Get month and year birth\n\n        val Get_year_input = age_year_input.text.toString().toInt()\n        val getCurrentYear = Calendar.getInstance().get(Calendar.YEAR)\n        val finish_year_input = Get_year_input - getCurrentYear\n        val Get_month_input = age_month_input.text.toString().toInt()\n        val getCurrentMonth = Calendar.getInstance().get(Calendar.MONTH)\n        val finish_month_input = age_month_input.text.toString().toInt() - getCurrentMonth\n\n\n        // Send Data\n        val i_month = Intent(applicationContext, Second::class.java)\n        val i_year = Intent(applicationContext, Second::class.java)\n        i_month.putExtra(\"Month\", finish_month_input)\n        i_year.putExtra(\"Year\", finish_year_input)\n\n        startActivity(i_month)\n        startActivity(i_year)\n</code></pre>\n\n<p>Second Activity :</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_second)\n\n    val finishMonthInput = intent.getIntExtra(\"Month\", -1)\n    val finishYearInput = intent.getIntExtra(\"Year\", -2)\n\n    viewYear.text = finishYearInput.toString()\n    viewMonth.text = finishMonthInput.toString()\n\n}\n\nfun get_age_again(view: View){\n\n    var backIntent = Intent(\"android.intent.action.MAIN\")\n    startActivity(backIntent)\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 6331, "user_id": 1180728, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/084d4d7d1538d5178043fdaccee79c5a?s=128&d=identicon&r=PG", "display_name": "Blazej SLEBODA", "link": "https://stackoverflow.com/users/1180728/blazej-sleboda"}, "edited": false, "score": 0, "creation_date": 1544371432, "post_id": 53693638, "comment_id": 94243606, "body": "override was generated by Android Studio. So it looks like a bug of Android Studio"}], "tags": [], "owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "is_accepted": true, "score": 2, "last_activity_date": 1544367943, "creation_date": 1544367943, "answer_id": 53693638, "question_id": 53693478, "link": "https://stackoverflow.com/questions/53693478/override-oncreateanimation-fatal-exception-to-java-lang-illegalstateexception/53693638#53693638", "title": "override onCreateAnimation FATAL EXCEPTION to java.lang.IllegalStateException : must not be null", "body": "<p><code>java.lang.IllegalStateException : must not be null</code> is thrown when an @NotNull parameter or variable is null, or if a @NotNull function returns null. <code>onCreateAnimation</code> returns null by default.</p>\n\n<p>If you decompile your class, you'll see the Java version of the function:</p>\n\n<pre><code>@NotNull\npublic Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {\n   Animation var10000 = super.onCreateAnimation(transit, enter, nextAnim);\n   Intrinsics.checkExpressionValueIsNotNull(var10000, \"super.onCreateAnimation(transit, enter, nextAnim)\");\n   return var10000;\n}\n</code></pre>\n\n<p><code>onCreateAnimation</code> returns null and therefore throws an exception because the return value is marked as @NotNull. Either override the method and return non-null, or change the return type to <code>Animation?</code>. But since you don't do anything with it, you can remove it entirely. You don't have to override it, it's not abstract.</p>\n\n<p>For the record, this is the decompiled Java code if you make the return type nullable:</p>\n\n<pre><code>@Nullable\npublic Animation onCreateAnimation(int transit, boolean enter, int nextAnim) {\n   return super.onCreateAnimation(transit, enter, nextAnim);\n}\n</code></pre>\n"}], "owner": {"reputation": 6331, "user_id": 1180728, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/084d4d7d1538d5178043fdaccee79c5a?s=128&d=identicon&r=PG", "display_name": "Blazej SLEBODA", "link": "https://stackoverflow.com/users/1180728/blazej-sleboda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 1, "accepted_answer_id": 53693638, "answer_count": 1, "score": 0, "last_activity_date": 1544367943, "creation_date": 1544366827, "question_id": 53693478, "link": "https://stackoverflow.com/questions/53693478/override-oncreateanimation-fatal-exception-to-java-lang-illegalstateexception", "title": "override onCreateAnimation FATAL EXCEPTION to java.lang.IllegalStateException : must not be null", "body": "<p>I have overrided the onCreateAnimation method of the Fragment class with default implementation and this leads to FATAL EXCEPTION. Why?</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to start activity\n  ComponentInfo{com.developer.pocviewmodel/com.developer.pocviewmodel.MainActivity}:\n  java.lang.IllegalStateException: super.onCreateAnimation(transit,\n  enter, nextAnim) must not be null</p>\n</blockquote>\n\n<pre><code>class MainFragment : Fragment() {\n\n    companion object {\n        fun newInstance() = MainFragment()\n    }\n\n    private lateinit var viewModel: MainViewModel\n\n    override fun onCreateView(\n        inflater: LayoutInflater, container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View {\n        return inflater.inflate(R.layout.main_fragment, container, false)\n    }\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n        viewModel = ViewModelProviders.of(this).get(MainViewModel::class.java)\n        // TODO: Use the ViewModel\n    }\n\n     override fun onCreateAnimation(transit: Int, enter: Boolean, nextAnim: Int): Animation {\n        return super.onCreateAnimation(transit, enter, nextAnim)\n    }\n\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 1, "creation_date": 1544366840, "post_id": 53693385, "comment_id": 94242315, "body": "You could use lateinit, but that would require manually setting it (and taking it out of the primary constructor). <code>by lazy</code> might also be an option, but AFAIK, it can&#39;t be used in the primary constructor either"}, {"owner": {"reputation": 2879, "user_id": 1405720, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732cc3ab1a92b652670d8220f421c58b?s=128&d=identicon&r=PG", "display_name": "mjohnsonengr", "link": "https://stackoverflow.com/users/1405720/mjohnsonengr"}, "reply_to_user": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1544368236, "post_id": 53693385, "comment_id": 94242716, "body": "Aha! lateinit seems to be the way to go.  See my answer -- I came up with a pretty overhead-heavy way of doing this but lateinit reduces each property back down to 1 line.  I&#39;ll happily upvote/accept as answer if you post that as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 2879, "user_id": 1405720, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732cc3ab1a92b652670d8220f421c58b?s=128&d=identicon&r=PG", "display_name": "mjohnsonengr", "link": "https://stackoverflow.com/users/1405720/mjohnsonengr"}, "is_accepted": false, "score": 0, "last_activity_date": 1544368035, "creation_date": 1544368035, "answer_id": 53693651, "question_id": 53693385, "link": "https://stackoverflow.com/questions/53693385/force-a-null-into-non-nullable-type/53693651#53693651", "title": "Force a null into non-nullable type", "body": "<p>I can create properties with null-able backing fields.</p>\n\n<pre><code>data class Node(val value: Int) {\n  private var _prev: Node? = null\n  var prev: Node\n    get() = _prev!!\n    set(value) {\n      _prev = value\n    }\n\n  private var _next: Node? = null\n  var next: Node\n    get() = _next!!\n    set(value) {\n      _next = value\n    }\n\n  constructor(prev: Node, next: Node, value: Int) : this(value) {\n    this.prev = prev\n    this.next = next\n    prev.next = this\n    next.prev = this\n  }\n}\n</code></pre>\n\n<p>This can then be initialized via</p>\n\n<pre><code>val node0 = Node(0)\nval node1 = Node(node0, node0, 1)\n</code></pre>\n\n<p>I'm hoping to learn the overhead can be reduced a little bit, but this is better than null-able next/prev.</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 5771177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f66c6628f434a7998195c89f2af5427b?s=128&d=identicon&r=PG&f=1", "display_name": "suffi", "link": "https://stackoverflow.com/users/5771177/suffi"}, "is_accepted": false, "score": 0, "last_activity_date": 1544370176, "creation_date": 1544370176, "answer_id": 53693941, "question_id": 53693385, "link": "https://stackoverflow.com/questions/53693385/force-a-null-into-non-nullable-type/53693941#53693941", "title": "Force a null into non-nullable type", "body": "<p>You could abstract the way a <code>Node</code> holds its references by providing an interface or a <code>sealed class</code> e.g.</p>\n\n<pre><code>data class Node(val ref: Reference, val value: Int)\n\nsealed class Reference {\n    class Forward(val next: Node): Reference()\n    class Backward(val prev: Node): Reference()\n    class Bidirection(val prev: Node, val next: Node): Reference()\n}\n</code></pre>\n\n<p>This approach will negate your need for nullable types. It is not very performant, but a declarative way to get compile time type-safety. </p>\n"}, {"comments": [{"owner": {"reputation": 2879, "user_id": 1405720, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732cc3ab1a92b652670d8220f421c58b?s=128&d=identicon&r=PG", "display_name": "mjohnsonengr", "link": "https://stackoverflow.com/users/1405720/mjohnsonengr"}, "edited": false, "score": 0, "creation_date": 1544450576, "post_id": 53697023, "comment_id": 94269039, "body": "<a href=\"https://bitbucket.org/mj3ngr/adventofcode/src/259f569f49ce0392fbe9a8fc5fff5f4e10615d3d/src/mj3ngr/adventofcode/y2018/day9/Day9.kt#lines-15:16\" rel=\"nofollow noreferrer\">Indeed</a> :) -- lateinit seems to be the best approach."}], "tags": [], "owner": {"reputation": 7179, "user_id": 222163, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ldCVf.jpg?s=128&g=1", "display_name": "Paul D&#39;Ambra", "link": "https://stackoverflow.com/users/222163/paul-dambra"}, "is_accepted": true, "score": 1, "last_activity_date": 1544392159, "creation_date": 1544392159, "answer_id": 53697023, "question_id": 53693385, "link": "https://stackoverflow.com/questions/53693385/force-a-null-into-non-nullable-type/53697023#53697023", "title": "Force a null into non-nullable type", "body": "<p>I'm wondering if we're doing the same <a href=\"https://adventofcode.com/2018/day/9\" rel=\"nofollow noreferrer\">adventofcode puzzle</a> in kotlin</p>\n\n<p>I used lateinit properties to allow the marble to change its position as a node in a linked list</p>\n\n<pre><code>class Marble(val marbleNumber: Long) {\n    lateinit var counterClockwiseMarble: Marble\n    lateinit var clockwiseMarble: Marble\n}\n</code></pre>\n\n<p>initially with setters</p>\n\n<pre><code>class Marble(val marbleNumber: Long) {\n    lateinit var counterClockwiseMarble: Marble\n      private set\n\n    lateinit var clockwiseMarble: Marble\n      private set\n\n    fun setCounterClockwise(m: Marble) {\n      this.counterClockwiseMarble = m\n    }\n\n    fun setClockwise(m: Marble) {\n      this.clockwiseMarble = m\n    }\n}\n</code></pre>\n\n<p>but that seemed like a lot of text when usage was controlled enough to be safe</p>\n\n<p>If it is the same puzzle you can <a href=\"https://github.com/pauldambra/adventofcode2018/blob/master/src/main/kotlin/com/dambra/adventofcode2018/day9/Circle.kt\" rel=\"nofollow noreferrer\">see this used in context on github</a> </p>\n"}], "owner": {"reputation": 2879, "user_id": 1405720, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/732cc3ab1a92b652670d8220f421c58b?s=128&d=identicon&r=PG", "display_name": "mjohnsonengr", "link": "https://stackoverflow.com/users/1405720/mjohnsonengr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 53697023, "answer_count": 3, "score": 1, "last_activity_date": 1544392159, "creation_date": 1544366183, "question_id": 53693385, "link": "https://stackoverflow.com/questions/53693385/force-a-null-into-non-nullable-type", "title": "Force a null into non-nullable type", "body": "<p>Is there a way to jam a null into a non-nullable type with some sort of \"I know what I'm doing\"?</p>\n\n<p>I want to make a doubly linked list:</p>\n\n<pre><code>data class Node(var prev: Node, var next: Node, val value: Int)\n</code></pre>\n\n<p>I can guarantee that this list will have at least two elements at all times <em>except</em> during initialization, after the first node has been added but before the second node.  I'd like to make the guarantee that prev and next will never be null.</p>\n\n<p>One thing I thought I'd try is to write a special constructor that initializes both the first and second nodes <code>constructor(v1: Int, v2: Int) : this(Node(this, this, v1), v2)</code>, but that doesn't work because I can't do anything with <code>this</code> before entering the body.</p>\n"}, {"tags": ["java", "unit-testing", "junit", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 103507, "user_id": 270371, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/LSTUa.png?s=128&g=1", "display_name": "davidxxx", "link": "https://stackoverflow.com/users/270371/davidxxx"}, "is_accepted": true, "score": 3, "last_activity_date": 1544363376, "creation_date": 1544363376, "answer_id": 53693005, "question_id": 53692877, "link": "https://stackoverflow.com/questions/53692877/junit-how-set-up-test-class/53693005#53693005", "title": "JUnit how set up test class?", "body": "<p>The default JUnit 4 runner doesn't provide such a feature : <a href=\"https://github.com/junit-team/junit4/wiki/parameterized-tests\" rel=\"nofollow noreferrer\">parameterized tests</a>.<br>\nTo use it, you need to annotate your class with the <code>Parameterized</code> runner class and to define a <code>@Parameterized.Parameters</code> function that sets the parameter values for each scenario.   </p>\n\n<p>For example :   </p>\n\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.junit.runners.Parameterized;\nimport org.junit.runners.Parameterized.Parameters;\n\n@RunWith(Parameterized::class)\nclass HelloTest(val param1: Int, val param2: Int) {\n\n    companion object {\n        @JvmStatic\n        @Parameterized.Parameters\n        fun data() = listOf(\n                arrayOf(1, 2),\n                arrayOf(1, 3)\n        )\n    }\n    @Test\n    fun `first test`() {\n        val sMock = setUpMock(param1, param2)\n        println(sMock.mock.get(1))\n    }\n\n    @Test\n    fun `second test`() {\n        val sMock = setUpMock(param1, param2)\n        println(sMock.mock.get(1))\n        verify(sMock.mock).get(1)\n    }\n}\n</code></pre>\n\n<p>No tested code but you should get the idea.   </p>\n"}, {"tags": [], "owner": {"reputation": 2685, "user_id": 2341815, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/637ab45a810d6286bfa97ff77b505eaa?s=128&d=identicon&r=PG", "display_name": "Ruwanka Madhushan", "link": "https://stackoverflow.com/users/2341815/ruwanka-madhushan"}, "is_accepted": false, "score": 2, "last_activity_date": 1544364232, "creation_date": 1544364232, "answer_id": 53693126, "question_id": 53692877, "link": "https://stackoverflow.com/questions/53692877/junit-how-set-up-test-class/53693126#53693126", "title": "JUnit how set up test class?", "body": "<p>With Junit5 you can achieve it without extra class.</p>\n\n<pre><code>import org.junit.jupiter.api.Test\nimport org.junit.jupiter.params.ParameterizedTest\nimport org.junit.jupiter.params.provider.CsvSource\nimport org.mockito.Mockito.*\nimport kotlin.test.assertEquals\n\ninterface Object {\n    fun get(p: Int): Int\n}\n\nclass HelloTest {\n\n    var mock = mock(Object::class.java)!!\n\n    @Test\n    fun `first test`() {\n        `when`(mock.get(1)).thenReturn(2)\n        assertEquals(2, mock.get(1))\n    }\n\n    @Test\n    fun `second test`() {\n        `when`(mock.get(1)).thenReturn(2)\n        println(mock.get(1))\n        verify(mock).get(1)\n    }\n\n    @CsvSource(\"1,2\",\"3,4\")\n    @ParameterizedTest\n    fun `csv parameterized test`(key: Int, value: Int){\n        `when`(mock.get(key)).thenReturn(value)\n        assertEquals(value, mock.get(key))\n    }\n}\n</code></pre>\n\n<p>Note <code>@CsvSource</code> for parameterized tests. There are several ways of <a href=\"https://blog.codefx.org/libraries/junit-5-parameterized-tests/#Ins-And-Outs-of-Parameterized-Tests\" rel=\"nofollow noreferrer\">writing parameterized tests with junit5.</a> Following dependencies are required.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n    &lt;artifactId&gt;kotlin-test-junit&lt;/artifactId&gt;\n    &lt;version&gt;1.3.11&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.3.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;version&gt;5.3.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n    &lt;version&gt;2.22.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;version&gt;2.22.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n    &lt;version&gt;5.3.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 5558021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/859197464199012/picture?type=large", "display_name": "Dmitry  Sokolov", "link": "https://stackoverflow.com/users/5558021/dmitry-sokolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 53693005, "answer_count": 2, "score": 2, "last_activity_date": 1544364232, "creation_date": 1544362589, "question_id": 53692877, "link": "https://stackoverflow.com/questions/53692877/junit-how-set-up-test-class", "title": "JUnit how set up test class?", "body": "<p>I use constructor of test class for mocking objects. But I want to set parameters for stubs mocking objects from each test methods.\nI tried using constructors parameters of test class, but JUnit limiting this:</p>\n\n<pre><code>java.lang.Exception: Test class should have exactly one public zero-argument constructor\n</code></pre>\n\n<p>What I should use for this purpose?</p>\n\n<p>Now I use different class for store mocks and it not looks nicely</p>\n\n<pre><code>package testci\n\nimport org.junit.Test\nimport org.mockito.Mockito.*\n\ninterface Object {\n    fun get(p: Int): Int\n}\n\nclass setUpMock(val param: Int, val param2: Int) {\n    val mock = mock(Object::class.java)!!\n    init {\n        `when`(mock.get(param)).thenReturn(param2)\n    }\n}\n\nclass HelloTest {\n    @Test\n    fun `first test`() {\n        val sMock = setUpMock(1,2)\n        println(sMock.mock.get(1))\n    }\n\n    @Test\n    fun `second test`() {\n        val sMock = setUpMock(1,3)\n        println(sMock.mock.get(1))\n        verify(sMock.mock).get(1)\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin", "wifi"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "edited": false, "score": 0, "creation_date": 1544424476, "post_id": 53691941, "comment_id": 94256192, "body": "Thank you but it will still try to connect to same network again if user deosn&#39;t kill the app via task manager. While connecting to a network via settings, there is an option to remember or not. Isn&#39;t there an option for this in code?"}, {"owner": {"reputation": 146, "user_id": 10203775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4b2C0.png?s=128&g=1", "display_name": "melianor", "link": "https://stackoverflow.com/users/10203775/melianor"}, "reply_to_user": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "edited": false, "score": 0, "creation_date": 1544426410, "post_id": 53691941, "comment_id": 94256912, "body": "i didn&#39;t understand the problem, when you want to forget the wifi credentials?"}, {"owner": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "edited": false, "score": 0, "creation_date": 1544523996, "post_id": 53691941, "comment_id": 94297687, "body": "I want it to never remember credentials. It should only connect."}, {"owner": {"reputation": 146, "user_id": 10203775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4b2C0.png?s=128&g=1", "display_name": "melianor", "link": "https://stackoverflow.com/users/10203775/melianor"}, "reply_to_user": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "edited": false, "score": 0, "creation_date": 1544545002, "post_id": 53691941, "comment_id": 94309972, "body": "I think it is a system feature and cannot be prevent. However like i said, you can forget that wifi anytime you want. @Salih"}, {"owner": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "edited": false, "score": 0, "creation_date": 1544687042, "post_id": 53691941, "comment_id": 94366419, "body": "Oh okay it looks like so. Thank you very much :)"}], "tags": [], "owner": {"reputation": 146, "user_id": 10203775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4b2C0.png?s=128&g=1", "display_name": "melianor", "link": "https://stackoverflow.com/users/10203775/melianor"}, "is_accepted": true, "score": 1, "last_activity_date": 1544688397, "last_edit_date": 1544688397, "creation_date": 1544355536, "answer_id": 53691941, "question_id": 53691639, "link": "https://stackoverflow.com/questions/53691639/how-to-connect-to-wifi-programmatically-without-remembering-password/53691941#53691941", "title": "How to connect to Wifi programmatically without remembering password?", "body": "<p>You may remove it from saved networks after app is killed. When app is not killed, listen for network changes and remove it when the network is disconnected.</p>\n\n<pre><code>List&lt;WifiConfiguration&gt; networks = wifiManager.getConfiguredNetworks();\nfor( WifiConfiguration wifi : networks) {\n    wifiManager.removeNetwork(wifi.networkId);\n    wifiManager.saveConfiguration();  \n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 9720246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8960903e2e50994f3a96e1ed7bafad49?s=128&d=identicon&r=PG&f=1", "display_name": "Salih", "link": "https://stackoverflow.com/users/9720246/salih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 53691941, "answer_count": 1, "score": 0, "last_activity_date": 1544688397, "creation_date": 1544353397, "question_id": 53691639, "link": "https://stackoverflow.com/questions/53691639/how-to-connect-to-wifi-programmatically-without-remembering-password", "title": "How to connect to Wifi programmatically without remembering password?", "body": "<p>I can connect to Wifi with this code:</p>\n\n<pre><code>fun connectToWifi(ssid: String, password: String) {\n    val wifiConfig = WifiConfiguration()\n    wifiConfig.SSID = String.format(\"\\\"%s\\\"\", ssid)\n    wifiConfig.preSharedKey = String.format(\"\\\"%s\\\"\", password)\n    val wifiManager = applicationContext.getSystemService(Context.WIFI_SERVICE) as WifiManager\n    val netId = wifiManager.addNetwork(wifiConfig)\n    wifiManager.disconnect()\n    wifiManager.enableNetwork(netId, true)\n    AccessPointManager.currentlyConnectedNetId = netId\n    wifiManager.reconnect()\n}\n</code></pre>\n\n<p>But, it remembers password and auto reconnects even when app is killed. I need it to connect only once and forget the password. How can I achieve this? Thanks.</p>\n"}, {"tags": ["android", "firebase", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25774, "user_id": 885028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/xJkDj.jpg?s=128&g=1", "display_name": "aga", "link": "https://stackoverflow.com/users/885028/aga"}, "is_accepted": false, "score": 0, "last_activity_date": 1544362172, "last_edit_date": 1592644375, "creation_date": 1544362172, "answer_id": 53692803, "question_id": 53691116, "link": "https://stackoverflow.com/questions/53691116/how-do-i-know-when-the-firebaseinstanceid-is-refreshed/53692803#53692803", "title": "How do I know when the FirebaseInstanceId is refreshed?", "body": "<p><a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/iid/FirebaseInstanceId\" rel=\"nofollow noreferrer\">Documentation</a> on FirebaseInstanceId states the following:</p>\n<blockquote>\n<p>Instance ID is stable except when:</p>\n<ul>\n<li>App deletes Instance ID</li>\n<li>App is restored on a new device</li>\n<li>User uninstalls/reinstall the app</li>\n<li>User clears app data</li>\n</ul>\n</blockquote>\n<p>So, the way I see it, you should be reasonably safe because that id can be either removed by your own code (via <code>Firebase#deleteInstanceId()</code>) or by the users when they restore/reinstall/uninstall their apps. There're no other cases where this id could be changed throughout the app's life.</p>\n"}], "owner": {"reputation": 587, "user_id": 1125061, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/lMPNz.gif?s=128&g=1", "display_name": "Cookienator", "link": "https://stackoverflow.com/users/1125061/cookienator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544362172, "creation_date": 1544349125, "last_edit_date": 1544360511, "question_id": 53691116, "link": "https://stackoverflow.com/questions/53691116/how-do-i-know-when-the-firebaseinstanceid-is-refreshed", "title": "How do I know when the FirebaseInstanceId is refreshed?", "body": "<p>I'm using the following line of code to retrieve the FirebaseInstanceId:</p>\n\n<pre><code>FirebaseInstanceId.getInstance().id\n</code></pre>\n\n<p>I'm using it as a unique app id and want to know when it changes, because I save it on the server side + I want store it in my shared preferences, so I need to know when it is refreshed.</p>\n\n<ol>\n<li><p>Do I do this in FirebaseMessagingService's onNewToken(token: String), even though this method is meant for the FCM token? To my understanding, this the instance id is tightly coupled with the FCM token, and is in fact the prefix of it. Can there be a situation where the instance id is refreshed, but the FCM token remains the same (or vice versa)?</p></li>\n<li><p>If so, what do I do in case my app doesn't need FCM, but I still want to store it? Implement it anyway?</p></li>\n</ol>\n"}, {"tags": ["javascript", "node.js", "kotlin", "node-modules", "kotlin-coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1544367638, "creation_date": 1544367638, "answer_id": 53693587, "question_id": 53689583, "link": "https://stackoverflow.com/questions/53689583/kotlin-coroutines-with-node-modules/53693587#53693587", "title": "Kotlin Coroutines with Node Modules", "body": "<p>This is what the documentation wanted you to write:</p>\n\n<pre><code>suspend fun comparePass(hash: String, pass: String): Boolean =\n    suspendCancellableCoroutine { continuation -&gt;\n        bcrypt.compare(pass, hash) { err: dynamic, res: dynamic -&gt;\n            continuation.resume(err == null)\n        }\n    }\n</code></pre>\n\n<p>Note that your own callback is now replaced with the <code>Continuation</code>, which is the internal callback that allows the coroutine to resume. Note also that the return value of your <code>comparePass</code> function is now simply <code>Boolean</code> and you call it like a regular function, passing no callbacks of your own.</p>\n\n<p>I don't have first-hand experience with Kotlin-JS, I don't know the semantics of that <code>dynamic</code> type, so I can't know whether this will work.</p>\n"}], "owner": {"reputation": 75, "user_id": 4015028, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Felix Stupp", "link": "https://stackoverflow.com/users/4015028/felix-stupp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 53693587, "answer_count": 1, "score": 4, "last_activity_date": 1552980358, "creation_date": 1544332195, "last_edit_date": 1552980358, "question_id": 53689583, "link": "https://stackoverflow.com/questions/53689583/kotlin-coroutines-with-node-modules", "title": "Kotlin Coroutines with Node Modules", "body": "<p>I'm asking myself how I can use Kotlin's coroutines together with some node modules.\nI'm trying to write a node.js server in Kotlin.</p>\n\n<p>It would be simple to keep using JavaScripts famous callbacks or maybe Promises,\nbut it looks like Kotlin callbacks would be the better option.\nHowever for a node.js server I need to use MySQL or bcrypt libraries only working with callbacks or Promises but not with coroutines because it is not written in Kotlin respectively.</p>\n\n<p>The Kotlin documentation does not help me, JetBrains says I only need to write my method like it is working synchronously and use other Kotlin functions just like they were running synchronously, but the functions written in native JavaScript do not know a keyword like \"suspend\", or should I just ignore this fact?</p>\n\n<p>An example would be following function:</p>\n\n<pre><code>val bcrypt = require(\"bcrypt\") // require by node.js\nfun comparePass(hash: String, pass: String, callback: (Boolean) -&gt; Unit) {\n    bcrypt.compare(pass, hash, { err: dynamic, res: dynamic -&gt;\n        callback(err == null)\n    })\n}\n</code></pre>\n\n<p>How can I write this function using coroutines and this libary?</p>\n"}, {"tags": ["sorting", "kotlin", "enums"], "answers": [{"comments": [{"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 1, "creation_date": 1544334430, "post_id": 53688827, "comment_id": 94235766, "body": "I want to sort the list by the ORDER of the enum not my ascending order. How can your suggested comparator do that? It&#39;s doing lexographic sort. I want enum sorry. Let me know if it&#39;s not possible with sealed class"}, {"owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "reply_to_user": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544379214, "post_id": 53688827, "comment_id": 94245793, "body": "Oh I see. I&#39;m not sure there&#39;s any way to get that order at runtime. Use an enum if that&#39;s something you need."}], "tags": [], "owner": {"reputation": 2840, "user_id": 2565340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fe70113561f37381444c923d22051d?s=128&d=identicon&r=PG", "display_name": "RussHWolf", "link": "https://stackoverflow.com/users/2565340/russhwolf"}, "is_accepted": false, "score": 2, "last_activity_date": 1544321873, "creation_date": 1544321873, "answer_id": 53688827, "question_id": 53688688, "link": "https://stackoverflow.com/questions/53688688/kotlin-sealed-class-how-to-sort-by-sealed-class-similar-to-sorting-by-enum/53688827#53688827", "title": "Kotlin sealed class - how to sort by sealed class similar to sorting by enum", "body": "<p>The quick answer to your question is to switch <code>x</code> and <code>y</code> in your comparator, ie <code>x::class.java.name.compareTo(y::class.java.name)</code></p>\n\n<p>The longer answer is, for your use case, an enum might be better. Sealed classes shine when some subclasses look different than others, and it's meaningful to have multiple instances of them. For example a <code>sealed class Result</code> with subclasses <code>Success</code> and <code>Error</code>, where <code>Success</code> holds data and <code>Error</code> holds an exception. Assuming you want to treat all countries the same, your use case seems like it might be more suited to a traditional enum.</p>\n"}, {"comments": [{"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544507192, "post_id": 53707245, "comment_id": 94289853, "body": "can you show me how to do the sorting. thanks to your help i found the following:  GoodCountries::class.nestedClasses but it gives me the classes in the wrong order"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544509510, "post_id": 53707245, "comment_id": 94290554, "body": "Which version of Kotlin do you use? Since 1.3 there exists <code>sealedSubclasses</code> which you should try instead of <code>nestedClasses</code>.. the sample is actually there in the answer: <code>GoodCountries::class.sealedSubclasses</code>"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544510806, "post_id": 53707245, "comment_id": 94291023, "body": "You may need <code>kotlin-reflect</code>-dependency... <code>sealedSubclasses</code> was also mentioned in the <a href=\"https://kotlinlang.org/docs/reference/whatsnew13.html#sealed-classes-in-reflection\" rel=\"nofollow noreferrer\">What&#39;s New in Kotlin 1.3</a>"}, {"owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544651528, "post_id": 53707245, "comment_id": 94356563, "body": "can you help me to sort it now. i have the following but it says it cant infer the type and indexOf is underlined in red:     Collections.sort(toSortList, object : Comparator&lt;GoodCountries&gt; {             override fun compare(left: GoodCountries, right: GoodCountries): Int {                 return Integer.compare(GoodCountries::class.sealedSubclasses.indexO&zwnj;&#8203;f(left), GoodCountries::class.sealedSubclasses.indexOf(right))             }         })    i updated my question so you can see what i have done so far"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "edited": false, "score": 0, "creation_date": 1544691178, "post_id": 53707245, "comment_id": 94368273, "body": "@j2emanue why do you want to sort the <code>GoodCountries</code> sealed subclasses? if you access the <code>sealedSubclasses</code> the order is the one of their declaration*... but as also stated in the answer, don&#39;t know whether that is deliberate... so take that with a grain of salt... I don&#39;t understand your sample code... if you just want to sort it in ~string-based order, you may just want to do: <code>GoodCountries::class.sealedSubclasses.sortedBy { it.simpleName }</code>... but the way I understood you, you want the order of there declaration... which the answer basically describes ;-)"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 1, "last_activity_date": 1546949117, "last_edit_date": 1546949117, "creation_date": 1544450311, "answer_id": 53707245, "question_id": 53688688, "link": "https://stackoverflow.com/questions/53688688/kotlin-sealed-class-how-to-sort-by-sealed-class-similar-to-sorting-by-enum/53707245#53707245", "title": "Kotlin sealed class - how to sort by sealed class similar to sorting by enum", "body": "<p>Maybe not completely what you are looking for, but maybe it is...</p>\n\n<p>While the sealed classes don't seem to have something like an ordinal, which you've already noticed, there is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/sealed-subclasses.html\" rel=\"nofollow noreferrer\"><code>sealedSubclasses</code></a> on the <code>class</code> itself (i.e. <code>GoodCountries::class.sealedSubclasses</code>). Also, it seems as if the order of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/sealed-subclasses.html\" rel=\"nofollow noreferrer\"><code>sealedSubclasses</code></a> is the one of the defined classes, i.e. <code>Brazil</code> in this list always comes first, <code>USA</code> second, etc. The order is different if they aren't all nested (i.e. if some are outside, they are listed first).</p>\n\n<p>However: the documentation doesn't state that this ordering was chosen deliberately. Neither in the <a href=\"https://kotlinlang.org/docs/reference/sealed-classes.html\" rel=\"nofollow noreferrer\">'Sealed classes' reference documentation</a> nor in the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/sealed-subclasses.html\" rel=\"nofollow noreferrer\"><code>sealedSubclasses</code> (k)documentation</a>.</p>\n\n<p>Regarding your question about sorting entities in the sealed class order, you may want to use something like the following:</p>\n\n<pre><code>val entityList = listOf(Germany(), China(), USA(), Brazil(), Germany())\nentityList.sortedBy { // or use sortedWith(compareBy {\n  GoodCountries::class.sealedSubclasses.indexOf(it::class)\n}.forEach(::println) // or toList...\n</code></pre>\n\n<p>or something like:</p>\n\n<pre><code>GoodCountries::class.sealedSubclasses\n    .asSequence()\n    .flatMap { klazzInOrder -&gt;\n      entityList.asSequence().filter { it::class == klazzInOrder }\n    }\n    .forEach(::println)\n</code></pre>\n\n<p>Both might not be the best choices regarding performance, but I think you get the idea.</p>\n\n<p>The sort samples which I added before (when I didn't realize that you actually want to sort entities instead of the types):</p>\n\n<pre><code>println(\"Listing the sealed classes in the order of their declaration*\")\nGoodCountries::class.sealedSubclasses.forEach(::println)\n\nprintln(\"Listing the sealed classes ordered by their simple name\")\nGoodCountries::class.sealedSubclasses.sortedWith(compareBy(String.CASE_INSENSITIVE_ORDER) { it.simpleName!! })\n  .forEach(::println)\n// same result, but written differently\nGoodCountries::class.sealedSubclasses.sortedBy { it.simpleName?.toLowerCase() }\n  .forEach(::println)\n</code></pre>\n\n<p>You may even want to combine <code>nullsLast</code> and <code>CASE_INSENSITIVE_ORDER</code> (most probably if you are not dealing with sealed classes) in which case you would write something like:</p>\n\n<pre><code>GoodCountries::class.sealedSubclasses.sortedWith(compareBy(nullsLast(String.CASE_INSENSITIVE_ORDER)) { it.simpleName })\n  .forEach(::println)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305, "user_id": 5437033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae8934ac0d0201fb7a2464c8756e521?s=128&d=identicon&r=PG&f=1", "display_name": "Chrispher", "link": "https://stackoverflow.com/users/5437033/chrispher"}, "edited": false, "score": 0, "creation_date": 1613492763, "post_id": 54097229, "comment_id": 117088701, "body": "Or alternatively if you don&#39;t like overriding, you can always do something like this: <a href=\"http://gist.github.com/chriscoomber/c351a2075eeff005f1e6bc4c8143b4af\" rel=\"nofollow noreferrer\">gist.github.com/chriscoomber/c351a2075eeff005f1e6bc4c8143b4a&zwnj;&#8203;f</a> (My personal preference is to avoid OOP where it doesn&#39;t add any obvious value, as it&#39;s usually much more confusing. In my link, we&#39;re just using the sealed class like a sealed trait.)"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 305, "user_id": 5437033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae8934ac0d0201fb7a2464c8756e521?s=128&d=identicon&r=PG&f=1", "display_name": "Chrispher", "link": "https://stackoverflow.com/users/5437033/chrispher"}, "edited": false, "score": 1, "creation_date": 1613495127, "post_id": 54097229, "comment_id": 117089822, "body": "@Chrispher I can only agree. I updated my answer :)"}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 4, "last_activity_date": 1613494989, "last_edit_date": 1613494989, "creation_date": 1546970277, "answer_id": 54097229, "question_id": 53688688, "link": "https://stackoverflow.com/questions/53688688/kotlin-sealed-class-how-to-sort-by-sealed-class-similar-to-sorting-by-enum/54097229#54097229", "title": "Kotlin sealed class - how to sort by sealed class similar to sorting by enum", "body": "<p>You could give your <code>GoodCountries</code> an <code>order</code> property like so:</p>\n<pre><code>sealed class GoodCountries(val order: Int) {\n    class Brazil : GoodCountries(0)\n    class USA : GoodCountries(1)\n    class Germany : GoodCountries(2)\n    class China : GoodCountries(3)\n}\n</code></pre>\n<p>It's not a perfect solution since you have to enumerate by hand, but this way the desired order is guaranteed.</p>\n<p>Doing this would simplify your comparison code dramatically:</p>\n<pre><code>val sorted = toSortList.sortedBy(GoodCountries::order)\nprintln(sorted.map { it::class.simpleName })\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>[Brazil, USA, Germany, China]</p>\n</blockquote>\n<p><strong>Edit:</strong> Updated with great idea of <a href=\"https://stackoverflow.com/users/5437033/chrispher\">Chrispher</a> which made the code even cleaner (having <code>order</code> property in constructor of <code>GoodCountries</code> instead of making it an abstract variable which is overriden by the subclasses).</p>\n"}], "owner": {"reputation": 50744, "user_id": 835883, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/n7jEz.png?s=128&g=1", "display_name": "j2emanue", "link": "https://stackoverflow.com/users/835883/j2emanue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3184, "favorite_count": 0, "accepted_answer_id": 53707245, "answer_count": 3, "score": 3, "last_activity_date": 1613494989, "creation_date": 1544319781, "last_edit_date": 1609767265, "question_id": 53688688, "link": "https://stackoverflow.com/questions/53688688/kotlin-sealed-class-how-to-sort-by-sealed-class-similar-to-sorting-by-enum", "title": "Kotlin sealed class - how to sort by sealed class similar to sorting by enum", "body": "<p>In Java we can easily sort a Collecion by enum with something like this:</p>\n<pre><code>Collections.sort(toSortEnumList, new Comparator&lt;theEnum&gt;() {\n    @Override\n    public int compare(theEnum o1, theEnum o2) {\n        return o1.ordinal().compareTo(o2.ordinal());\n    }\n});\n</code></pre>\n<p>and the <code>toSortEnumList</code> will be ordered ascending. How can I do this with a Kotlin's sealed classes? I tried sorting by the class names but that's not by enum position. There must be some way to sort by enum position:</p>\n<pre><code>sealed class GoodCountries {\n    \n    class Brazil : GoodCountries() {}\n\n    class USA : GoodCountries() {}\n    \n    class Germany : GoodCountries() {}\n    \n    class China : GoodCountries() {}\n}\n\n // later on\n    \n var toSortList = listOf&lt;GoodCountries&gt;(China(), Brazil(), USA(), Germany())\n\n Collections.sort(\n     toSortList,\n     { x: GoodCountries, y: GoodCountries -&gt; y::class.java.name.compareTo(x::class.java.name) }\n )\n\n Log.v(&quot;myTag&quot;, toSortList.toString())\n</code></pre>\n<p>this prints:</p>\n<blockquote>\n<p>USA, Germany, China, Brazil</p>\n</blockquote>\n<p>descending order. Not what I want. I want to sort by sealed class order (like ordinal number in Java's enum) like this:</p>\n<blockquote>\n<p>Brazil, USA, Germany, China</p>\n</blockquote>\n<p>I thought sealed classes are supposed to be better then enums but if I can't do this maybe enums have an advantage.</p>\n<p><strong>UPDATE</strong>: Thanks to Roland's help I was able to find the list of sealed classes. but now I want to sort by it: here is what I have so far:</p>\n<pre><code>Collections.sort(toSortList, object : Comparator&lt;GoodCountries&gt; {\n    override fun compare(left: GoodCountries, right: GoodCountries): Int {\n        return Integer.compare(\n            GoodCountries::class.sealedSubclasses.indexOf(left), \n            GoodCountries::class.sealedSubclasses.indexOf(right)\n        )\n    }\n})\n</code></pre>\n<p>but I get the following error at <code>indexOf</code>:</p>\n<blockquote>\n<p>Type inference failed. The value of the type parameter T should be mentioned in input types (argument type, receiver type or expected type). Try to specify it explicitely.</p>\n</blockquote>\n"}]