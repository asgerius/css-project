[{"tags": ["android", "android-recyclerview", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1621, "user_id": 4311759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9xRdP.png?s=128&g=1", "display_name": "Ardi", "link": "https://stackoverflow.com/users/4311759/ardi"}, "edited": false, "score": 0, "creation_date": 1447269916, "post_id": 33658207, "comment_id": 55090031, "body": "thanks for answer. unfortunately there is no such import, I try to import utils.ImageUtils.load ( import utils.* is not available too). ImageUtils class with its function is public."}, {"owner": {"reputation": 14074, "user_id": 1348215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/iEZX8.jpg?s=128&g=1", "display_name": "Egor Neliuba", "link": "https://stackoverflow.com/users/1348215/egor-neliuba"}, "reply_to_user": {"reputation": 1621, "user_id": 4311759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9xRdP.png?s=128&g=1", "display_name": "Ardi", "link": "https://stackoverflow.com/users/4311759/ardi"}, "edited": false, "score": 2, "creation_date": 1447270671, "post_id": 33658207, "comment_id": 55090467, "body": "@Ardi, are your extension functions inside the <code>ImageUtils</code> class? I&#39;m not sure they can be. Try putting them outside the class."}, {"owner": {"reputation": 1621, "user_id": 4311759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9xRdP.png?s=128&g=1", "display_name": "Ardi", "link": "https://stackoverflow.com/users/4311759/ardi"}, "edited": false, "score": 0, "creation_date": 1447271171, "post_id": 33658207, "comment_id": 55090727, "body": "thanks, it works! I don&#39;t expect absence of the class."}, {"owner": {"reputation": 1621, "user_id": 4311759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9xRdP.png?s=128&g=1", "display_name": "Ardi", "link": "https://stackoverflow.com/users/4311759/ardi"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1447440365, "post_id": 33658207, "comment_id": 55171259, "body": "Check for <code>import your.package.extension</code>, extension of component (ImageView) should be outside of any class @voddan"}], "tags": [], "owner": {"reputation": 14074, "user_id": 1348215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/iEZX8.jpg?s=128&g=1", "display_name": "Egor Neliuba", "link": "https://stackoverflow.com/users/1348215/egor-neliuba"}, "is_accepted": true, "score": 1, "last_activity_date": 1447269546, "creation_date": 1447269546, "answer_id": 33658207, "question_id": 33658164, "link": "https://stackoverflow.com/questions/33658164/kotlin-extension-not-recognized-in-adapter/33658207#33658207", "title": "Kotlin extension not recognized in adapter", "body": "<p>I'm pretty sure your extensions are out of scope (in a different package).\nImport your extensions like so:</p>\n\n<pre><code>import your.package.picasso\nimport your.package.load\n</code></pre>\n\n<p>Take a look at <a href=\"https://kotlinlang.org/docs/reference/extensions.html#scope-of-extensions\" rel=\"nofollow\">the docs</a> for more info.</p>\n"}], "owner": {"reputation": 1621, "user_id": 4311759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/9xRdP.png?s=128&g=1", "display_name": "Ardi", "link": "https://stackoverflow.com/users/4311759/ardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 33658207, "answer_count": 1, "score": 1, "last_activity_date": 1447269546, "creation_date": 1447269397, "question_id": 33658164, "link": "https://stackoverflow.com/questions/33658164/kotlin-extension-not-recognized-in-adapter", "title": "Kotlin extension not recognized in adapter", "body": "<p>I have basic extension util for picasso:</p>\n\n<pre><code>public val Context.picasso: Picasso \nget() = Picasso.with(this)\n\npublic fun ImageView.load(path: String, request: (RequestCreator) -&gt; RequestCreator) {\n    request(context.picasso.load(path)).into(this)\n}\n</code></pre>\n\n<p>And when I try to call it from imageview context in adapter it's not recognized.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iWTcy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iWTcy.png\" alt=\"enter image description here\"></a></p>\n\n<p>Same thing with itemView.context.picasso</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["comparable", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5871, "user_id": 3761545, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uypve.jpg?s=128&g=1", "display_name": "Paul Woitaschek", "link": "https://stackoverflow.com/users/3761545/paul-woitaschek"}, "edited": false, "score": 5, "creation_date": 1484844749, "post_id": 33640865, "comment_id": 70687406, "body": "Note that if you are using multiple lambdas functions (there is an overload with exactly one which inlines), they are <b>not inlined</b>. Which means each call to comapreTo creates a n new objects. To prevent that you could move the selectors to the companion object so the selectors are only allocated once. I created a snipped here: <a href=\"https://gist.github.com/PaulWoitaschek/7f3c4d5310a66ed4984785ee2d6f70ed\" rel=\"nofollow noreferrer\">gist.github.com/PaulWoitaschek/7f3c4d5310a66ed4984785ee2d6f7&zwnj;&#8203;0ed</a>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 5871, "user_id": 3761545, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uypve.jpg?s=128&g=1", "display_name": "Paul Woitaschek", "link": "https://stackoverflow.com/users/3761545/paul-woitaschek"}, "edited": false, "score": 0, "creation_date": 1484906143, "post_id": 33640865, "comment_id": 70712870, "body": "@PaulWoitaschek if the lambdas don&#39;t capture stat, they are compiled to singletons."}, {"owner": {"reputation": 5871, "user_id": 3761545, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uypve.jpg?s=128&g=1", "display_name": "Paul Woitaschek", "link": "https://stackoverflow.com/users/3761545/paul-woitaschek"}, "edited": false, "score": 1, "creation_date": 1484917712, "post_id": 33640865, "comment_id": 70720171, "body": "@KirillRakhman It creates singletons for the functions but still allocates arrays: <code>ANEWARRAY kotlin&#47;jvm&#47;functions&#47;Function1</code>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 5871, "user_id": 3761545, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/uypve.jpg?s=128&g=1", "display_name": "Paul Woitaschek", "link": "https://stackoverflow.com/users/3761545/paul-woitaschek"}, "edited": false, "score": 0, "creation_date": 1486372662, "post_id": 33640865, "comment_id": 71299693, "body": "@PaulWoitaschek I&#39;ve looked at the bytecode and it seems your version allocates an array anyway, because the spread operator will use <code>Arrays.copyOf</code>."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1496847457, "post_id": 33640865, "comment_id": 75831345, "body": "Starting with Kotlin 1.1.3 <code>compareBy</code> with multiple lambdas won&#39;t allocate new array on every <code>compareTo</code> call."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1505121255, "post_id": 33640865, "comment_id": 79265767, "body": "@Ilya could you point me to the relevant changelog or other info for this kind of optimization?"}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1505128688, "post_id": 33640865, "comment_id": 79270328, "body": "@KirillRakhman <a href=\"https://github.com/JetBrains/kotlin/commit/6a15981b3ac5215af5c68eceaf97c1b735caa8e4\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/commit/&hellip;</a>"}, {"owner": {"reputation": 3759, "user_id": 5434346, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/77a6965f12ed6d5082ed4a990f715f59?s=128&d=identicon&r=PG&f=1", "display_name": "K.Os", "link": "https://stackoverflow.com/users/5434346/k-os"}, "edited": false, "score": 0, "creation_date": 1536670032, "post_id": 33640865, "comment_id": 91500145, "body": "@KirillRakhman What about sorting multiple values with same comparator? For example CASE_INSENSITIVE_ORDER)?"}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 154, "last_activity_date": 1496843145, "last_edit_date": 1496843145, "creation_date": 1447194466, "answer_id": 33640865, "question_id": 33640864, "link": "https://stackoverflow.com/questions/33640864/how-to-sort-based-on-compare-multiple-values-in-kotlin/33640865#33640865", "title": "How to sort based on/compare multiple values in Kotlin?", "body": "<p>Kotlin's stdlib offers a number of useful helper methods for this.</p>\n\n<p>First, you can define a comparator using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/compare-by.html\" rel=\"noreferrer\"><code>compareBy()</code></a> method and pass it to the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/sorted-with.html\" rel=\"noreferrer\"><code>sortedWith()</code></a> extension method to receive a sorted copy of the list:</p>\n\n<pre><code>val list: List&lt;Foo&gt; = ...\nval sortedList = list.sortedWith(compareBy({ it.a }, { it.b }, { it.c }))\n</code></pre>\n\n<p>Second, you can let <code>Foo</code> implement <code>Comparable&lt;Foo&gt;</code> using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/compare-values-by.html\" rel=\"noreferrer\"><code>compareValuesBy()</code></a> helper method:</p>\n\n<pre><code>class Foo(val a: String, val b: Int, val c: Date) : Comparable&lt;Foo&gt; {\n    override fun compareTo(other: Foo)\n            = compareValuesBy(this, other, { it.a }, { it.b }, { it.c })\n}\n</code></pre>\n\n<p>Then you can call the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/sorted.html\" rel=\"noreferrer\"><code>sorted()</code></a> extension method without parameters to receive a sorted copy of the list:</p>\n\n<pre><code>val sortedList = list.sorted()\n</code></pre>\n\n<h3>Sorting direction</h3>\n\n<p>If you need to sort ascending on some values and descending on other values, the stdlib also offers functions for that:</p>\n\n<pre><code>list.sortedWith(compareBy&lt;Foo&gt; { it.a }.thenByDescending { it.b }.thenBy { it.c })\n</code></pre>\n\n<h3>Performance considerations</h3>\n\n<p>The <code>vararg</code> version of <code>compareValuesBy</code> is not inlined in the bytecode meaning anonymous classes will be generated for the lambdas. However, if the lambdas themselves don't capture state, singleton instances will be used instead of instantiating the lambdas everytime.</p>\n\n<p>As noted by <a href=\"https://stackoverflow.com/users/3761545/paul-woitaschek\">Paul Woitaschek</a> in the comments, comparing with multiple selectors will instantiate an array for the vararg call everytime. You can't optimize this by extracting the array as it will be copied on every call. What you can do, on the other hand, is extract the logic into a static comparator instance and reuse it:</p>\n\n<pre><code>class Foo(val a: String, val b: Int, val c: Date) : Comparable&lt;Foo&gt; {\n\n    override fun compareTo(other: Foo) = comparator.compare(this, other)\n\n    companion object {\n        // using the method reference syntax as an alternative to lambdas\n        val comparator = compareBy(Foo::a, Foo::b, Foo::c)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "is_accepted": false, "score": 0, "last_activity_date": 1581079465, "creation_date": 1581079465, "answer_id": 60113779, "question_id": 33640864, "link": "https://stackoverflow.com/questions/33640864/how-to-sort-based-on-compare-multiple-values-in-kotlin/60113779#60113779", "title": "How to sort based on/compare multiple values in Kotlin?", "body": "<p>If you want to sort in descending order, you can use the accepted answer:</p>\n\n<pre><code>list.sortedWith(compareByDescending&lt;Foo&gt; { it.a }.thenByDescending { it.b }.thenByDescending { it.c })\n</code></pre>\n\n<p>Or create an extension function like <code>compareBy</code>:</p>\n\n<pre><code>/**\n * Similar to\n * public fun &lt;T&gt; compareBy(vararg selectors: (T) -&gt; Comparable&lt;*&gt;?): Comparator&lt;T&gt;\n *\n * but in descending order.\n */\npublic fun &lt;T&gt; compareByDescending(vararg selectors: (T) -&gt; Comparable&lt;*&gt;?): Comparator&lt;T&gt; {\n    require(selectors.size &gt; 0)\n    return Comparator { b, a -&gt; compareValuesByImpl(a, b, selectors) }\n}\n\nprivate fun &lt;T&gt; compareValuesByImpl(a: T, b: T, selectors: Array&lt;out (T) -&gt; Comparable&lt;*&gt;?&gt;): Int {\n    for (fn in selectors) {\n        val v1 = fn(a)\n        val v2 = fn(b)\n        val diff = compareValues(v1, v2)\n        if (diff != 0) return diff\n    }\n    return 0\n}\n</code></pre>\n\n<p>and use: <code>list.sortedWith(compareByDescending ({ it.a }, { it.b }, { it.c }))</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1597255300, "post_id": 63380860, "comment_id": 112076083, "body": "This is covered in my answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 11921311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ed6UU.png?s=128&g=1", "display_name": "Yago Rey Vi&#241;as", "link": "https://stackoverflow.com/users/11921311/yago-rey-vi%c3%b1as"}, "is_accepted": false, "score": 0, "last_activity_date": 1597249590, "creation_date": 1597249590, "answer_id": 63380860, "question_id": 33640864, "link": "https://stackoverflow.com/questions/33640864/how-to-sort-based-on-compare-multiple-values-in-kotlin/63380860#63380860", "title": "How to sort based on/compare multiple values in Kotlin?", "body": "<p>If you need sort by multiple fields, and some field by descending and others by ascending you could use:</p>\n<pre><code>YOUR_MUTABLE_LIST.sortedWith(compareBy&lt;YOUR_OBJECT&gt; { it.PARAM_1}.thenByDescending { it.PARAM_2}.thenBy { it.PARAM_3})\n</code></pre>\n"}], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30357, "favorite_count": 20, "accepted_answer_id": 33640865, "answer_count": 3, "score": 89, "last_activity_date": 1607794022, "creation_date": 1447194466, "question_id": 33640864, "link": "https://stackoverflow.com/questions/33640864/how-to-sort-based-on-compare-multiple-values-in-kotlin", "title": "How to sort based on/compare multiple values in Kotlin?", "body": "<p>Say I have a <code>class Foo(val a: String, val b: Int, val c: Date)</code> and I want to sort a list of <code>Foo</code>s based on all three properties. How would I go about this?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1447183717, "post_id": 33637835, "comment_id": 55049914, "body": "There are <a href=\"https://youtrack.jetbrains.com/issue/KT-4410\" rel=\"nofollow noreferrer\">plans</a> to add a <code>mapNotNull</code> method which you should be able to use for just filtering nulls."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1447184087, "post_id": 33637835, "comment_id": 55050115, "body": "@Suseika Please see my edit. You don&#39;t need to declare <code>filterNotNull</code> yourself."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": true, "score": 4, "last_activity_date": 1447184054, "last_edit_date": 1447184054, "creation_date": 1447183121, "answer_id": 33637835, "question_id": 33637116, "link": "https://stackoverflow.com/questions/33637116/how-to-translate-arrayt-to-listt/33637835#33637835", "title": "How to translate Array&lt;T?&gt; to List&lt;T&gt;?", "body": "<p>If you're sure that no nulls are in the array you can use a cast:</p>\n\n<pre><code>array.toList() as List&lt;T&gt;\n</code></pre>\n\n<p><del>If there are in fact nulls you need to filter them out:</del></p>\n\n<pre><code>array.filter { it != null } as List&lt;T&gt;\n</code></pre>\n\n<p><del>As you can see, you still need to cast though. You can also write an extension methods that filters out nulls and returns the correct type:</del></p>\n\n<pre><code>fun &lt;T&gt; Array&lt;T?&gt;.filterNotNull(): List&lt;T&gt; {\n    val destination = arrayListOf&lt;T&gt;()\n    for (element in this) {\n        if (element != null) {\n            destination.add(element)\n        }\n    }\n    return destination\n}\n</code></pre>\n\n<p><del>Then you can use it like so:</del></p>\n\n<pre><code>array.filterNotNull()\n</code></pre>\n\n<p>Edit: There is already a <code>filterNotNull</code> method in Kotlin. The IDE didn't suggest it because there is a problem with the type parameter <code>T</code>. <code>T</code> and <code>T?</code> are both nullable. To fix it, change the method signature to <code>fun &lt;T : Any&gt; computeMyThing(): List&lt;T&gt;</code> and you will be able to use <code>array.filterNotNull()</code> without declaring it yourself.</p>\n"}], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "closed_date": 1452445896, "accepted_answer_id": 33637835, "answer_count": 1, "score": 1, "last_activity_date": 1452445889, "creation_date": 1447180609, "last_edit_date": 1447181566, "question_id": 33637116, "link": "https://stackoverflow.com/questions/33637116/how-to-translate-arrayt-to-listt", "closed_reason": "Duplicate", "title": "How to translate Array&lt;T?&gt; to List&lt;T&gt;?", "body": "<p>I tried this:</p>\n\n<pre><code>fun &lt;T&gt; computeMyThing(): List&lt;T&gt; {\n    val array: Array&lt;T?&gt; = computeArray()\n    return array.toList()\n}\n</code></pre>\n\n<p>But, unsurprisingly, it won't compile.</p>\n"}, {"tags": ["kotlin", "kdoc", "kotlin-dokka"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1447248640, "creation_date": 1447248640, "answer_id": 33651609, "question_id": 33636369, "link": "https://stackoverflow.com/questions/33636369/what-is-the-correct-name-for-kotlin-inline-documentation/33651609#33651609", "title": "What is the correct name for Kotlin inline documentation?", "body": "<p>As described <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"noreferrer\">here</a>, KDoc is the language used to write Kotlin documentation comments. Dokka is a tool that understands KDoc comments in Kotlin files and Javadoc comments in Java files, and generates documentation from them. Therefore, \"KDoc comments\" is the correct term to use.</p>\n"}], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 33651609, "answer_count": 1, "score": 3, "last_activity_date": 1457093931, "creation_date": 1447177812, "last_edit_date": 1495541268, "question_id": 33636369, "link": "https://stackoverflow.com/questions/33636369/what-is-the-correct-name-for-kotlin-inline-documentation", "title": "What is the correct name for Kotlin inline documentation?", "body": "<p>Since KDoc documentation generation engine is <a href=\"https://stackoverflow.com/a/28534725/1542343\">abandoned in favor of Dokka</a>, should Kotlin documentation be referred to as \"KDoc comments\", or as \"Dokka comments\"?</p>\n"}, {"tags": ["naming", "kotlin"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1447182572, "post_id": 33636280, "comment_id": 55049279, "body": "I group them by behavior and name the file accordingly. For example, extension methods for collections go to CollectionUtils.kt"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1452213778, "post_id": 33636280, "comment_id": 57081242, "body": "This is totally subjective."}], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 2124006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d3qh8.jpg?s=128&g=1", "display_name": "WangJie", "link": "https://stackoverflow.com/users/2124006/wangjie"}, "is_accepted": false, "score": 18, "last_activity_date": 1447230402, "creation_date": 1447230402, "answer_id": 33646673, "question_id": 33636280, "link": "https://stackoverflow.com/questions/33636280/is-there-a-recommended-naming-convention-for-files-that-contain-only-functions-e/33646673#33646673", "title": "Is there a recommended naming convention for files that contain only functions/extension methods?", "body": "<p><code>StringExt.kt</code> for the file with extension functions of <code>String</code>.</p>\n\n<p><code>CollectionExt.kt</code> for Collections extension functions.</p>\n"}, {"tags": [], "owner": {"reputation": 24593, "user_id": 1071320, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dTt5I.jpg?s=128&g=1", "display_name": "Adil Hussain", "link": "https://stackoverflow.com/users/1071320/adil-hussain"}, "is_accepted": false, "score": 10, "last_activity_date": 1537448228, "last_edit_date": 1537448228, "creation_date": 1537441801, "answer_id": 52423780, "question_id": 33636280, "link": "https://stackoverflow.com/questions/33636280/is-there-a-recommended-naming-convention-for-files-that-contain-only-functions-e/52423780#52423780", "title": "Is there a recommended naming convention for files that contain only functions/extension methods?", "body": "<p>I like WangJie's suggestion of adding a <code>Ext</code> suffix to the filename to communicate that it's a file which contains extensions. (Personally I'd add <code>Extensions</code> instead of <code>Ext</code> but in principle it's the same as what WangJie is suggesting.)</p>\n\n<p>I see by browsing the files in the Kotlin library however that there's a bit of a convention of pluralising the name of the class or type of class for which extensions are being added, e.g. <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Arrays.kt\" rel=\"noreferrer\">Arrays.kt</a>, <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Collections.kt\" rel=\"noreferrer\">Collections.kt</a>, <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/Maps.kt\" rel=\"noreferrer\">Maps.kt</a>, <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/collections/MutableCollections.kt\" rel=\"noreferrer\">MutableCollections.kt</a>, <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/src/kotlin/text/Strings.kt\" rel=\"noreferrer\">Strings.kt</a>. The <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"noreferrer\">Coding Conventions</a> document also alludes to this. Check out the <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#source-file-names\" rel=\"noreferrer\">Source file names</a> section in particular.</p>\n"}, {"tags": [], "owner": {"reputation": 1537, "user_id": 599865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e41d5cecddf9cd0be97b1d3aae6a836?s=128&d=identicon&r=PG", "display_name": "Yoel Gluschnaider", "link": "https://stackoverflow.com/users/599865/yoel-gluschnaider"}, "is_accepted": false, "score": 8, "last_activity_date": 1572884779, "creation_date": 1572884779, "answer_id": 58697436, "question_id": 33636280, "link": "https://stackoverflow.com/questions/33636280/is-there-a-recommended-naming-convention-for-files-that-contain-only-functions-e/58697436#58697436", "title": "Is there a recommended naming convention for files that contain only functions/extension methods?", "body": "<p>As for a file with just extension functions, based on the <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#source-file-organization\" rel=\"noreferrer\">Source files organization</a> section in the docs, you should not create files like this:</p>\n\n<blockquote>\n  <p>Do not create files just to hold \"all extensions of Foo\".</p>\n</blockquote>\n\n<p>Instead you should either put the extensions with the class they extend or in the client of them.\nI personally think this guideline overlooks a pretty fundamental use case: extension functions for classes not owned by you with multiple clients. Also extension functions that have dependencies on classes you don't want to introduce in the module where the extended class is.</p>\n\n<p>In this case it might be good to give a meaningful name instead of <code>FooExt.kt</code> (if all these extension functions have a common purpose). If they don't, it might not make sense to keep them all in the same file (referring to <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#source-file-names\" rel=\"noreferrer\">this</a> guideline where it states: <em>\"If a file contains multiple classes, or only top-level declarations, choose a name describing what the file contains, and name the file accordingly.\"</em>).</p>\n"}], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3925, "favorite_count": 0, "answer_count": 3, "score": 18, "last_activity_date": 1572884779, "creation_date": 1447177527, "last_edit_date": 1447195940, "question_id": 33636280, "link": "https://stackoverflow.com/questions/33636280/is-there-a-recommended-naming-convention-for-files-that-contain-only-functions-e", "title": "Is there a recommended naming convention for files that contain only functions/extension methods?", "body": "<p>In Java, it is simple: file name for a type is the name of a type plus <code>.java</code> suffix.</p>\n\n<p>In Kotlin, you can write files that don't contain classes. Is there any convention to name them?</p>\n\n<p>And also how would you name unit test classes for those functions?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1447141005, "post_id": 33617721, "comment_id": 55023653, "body": "I have to disagree about the anti-pattern. isOdd() could be an overridable method, and the class could use it to implement the template pattern. Java supports such method references just fine, and I think Kotlin should support it. I see that as a step back when coming from pure Java 8. Same as not being able to use a lambda to implement a functional interface defined in Kotlin: not being able to name things is a step backward to me. And the difference between Java interfaces and Kotlin interfaces is bizarre."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1447142218, "post_id": 33617721, "comment_id": 55024148, "body": "@nizet OK, you have your point. I agree that kotlin is a bit strange with functional references. As someone said, functions are not first-class citizens, but lambdas are. I believe that Kotlin must support not less than Java"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451184018, "post_id": 33617721, "comment_id": 56695881, "body": "Functions in Kotlin are first class citizens.  The issue here is that a function that has two parameters (receiver, param0) cannot be used in place of one that expects only one parameter.  What you are looking for there is a method closure, which can turn a method into a function by carrying the reference to the receiver into the call.    The code could easily do this by passing in a lambda that calls the class method.  That would close on the instance of the class as the receiver.  Later Kotlin might do this automatically."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 7, "last_activity_date": 1447142432, "last_edit_date": 1447142432, "creation_date": 1447101136, "answer_id": 33617721, "question_id": 33616464, "link": "https://stackoverflow.com/questions/33616464/function-references-and-lambdas/33617721#33617721", "title": "Function References and lambdas", "body": "<p>That's funny. \"Java strikes back\". Haha</p>\n\n<p>Your problem is simple: you declared <code>isOdd</code> in class <code>Foo</code>, right? Then it is not a <strong>function</strong>, but a <strong>method</strong>. Which means that it requires an instance of <code>Foo</code> to be passed in (the <code>this</code> reference) - that's why it is a function of 2 parameters: <code>Foo.(Int) -&gt; Boolean</code>. And the syntax error shows that - a reference to a method looks like <code>Foo::isOdd</code>.</p>\n\n<p><s>Anyway, declaring a non-static method which does not use the object is an antipattern even in Java, don't you agree?</s></p>\n\n<p>The problem might be solved by declaring a free function without a class or by making it an extension: <code>fun Int.isOdd()</code></p>\n\n<p>P.S. Regarding your second question - that feature is not supported yet. </p>\n"}, {"comments": [{"owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "edited": false, "score": 0, "creation_date": 1447103515, "post_id": 33617751, "comment_id": 55011141, "body": "Would be handy, because of testablity. If I pass a lambda directly there is no real way to unit test the lambda itself. Hence I was looking for a way to use a function, since a function itself is unit testable. As far as I see you can also define a function in a class like this: <code>class Foo{ val isOdd = fun(i : Int) : Boolean { return i % 2 != 0 }  } </code> . Then in the class Foo you can pass <code>isOdd</code> instead of a lambda and isOdd will still be unit testable. However, this seems to be a workaround. Would be pretty nice to have similar function references as java 8 just for unit testing"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1447141951, "post_id": 33617751, "comment_id": 55024029, "body": "@udalov What you mean by a local function? How do you create one? By a lambda?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1447145549, "post_id": 33617751, "comment_id": 55025821, "body": "A local function is the one declared within another function, see <a href=\"https://kotlinlang.org/docs/reference/functions.html#local-functions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/functions.html#local-functions</a>"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 18, "last_activity_date": 1497885364, "last_edit_date": 1497885364, "creation_date": 1447101251, "answer_id": 33617751, "question_id": 33616464, "link": "https://stackoverflow.com/questions/33616464/function-references-and-lambdas/33617751#33617751", "title": "Function References and lambdas", "body": "<p>On the second example: yes, the <a href=\"https://kotlinlang.org/docs/reference/reflection.html#bound-function-and-property-references-since-11\" rel=\"noreferrer\">bound function reference</a> syntax is supported since Kotlin 1.1, so you can write <code>bar::isOdd</code> similarly to Java.</p>\n\n<p>In the first example, the error is trying to say that <code>isOdd</code> is in fact a function of two parameters (of types <code>Foo</code> and <code>Int</code>), and passing a function taking two parameters as an argument whose type is function of one parameter is not allowed. To make the example compile, you can make <code>isOdd</code> a top-level or a local function, which would make it a function of one parameter of type <code>Int</code>. Or, if you use Kotlin 1.1+, use the bound function reference syntax and simply write <code>this::isOdd</code>.</p>\n"}], "owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4918, "favorite_count": 0, "accepted_answer_id": 33617751, "answer_count": 2, "score": 14, "last_activity_date": 1497885364, "creation_date": 1447096498, "question_id": 33616464, "link": "https://stackoverflow.com/questions/33616464/function-references-and-lambdas", "title": "Function References and lambdas", "body": "<p>I'm facing a compile error when trying to use lambdas / function references with kotlin:</p>\n\n<pre><code>class Foo {\n\n    fun getFilteredList(){\n        val numbers = listOf(1, 2, 3)\n        numbers.filter(::isOdd) // prints [1, 3]\n    }\n\n    fun isOdd(x: Int): Boolean = x % 2 != 0\n\n}\n</code></pre>\n\n<p>But I get a compile time error saying a type mismatch: </p>\n\n<blockquote>\n  <p>Error:(18, 16) Gradle: Type inference failed: inline fun \n  kotlin.Iterable.filter(predicate: (T) -> kotlin.Boolean):\n  kotlin.List cannot be applied to receiver: kotlin.List \n  arguments: (kotlin.reflect.KFunction2) Error:(18, 23) Gradle: Type mismatch: inferred type\n  is kotlin.reflect.KFunction2 but\n  (kotlin.Int) -> ??? was expected Error:(18, 23) Gradle: Type mismatch:\n  inferred type is kotlin.reflect.KFunction2 but (kotlin.Int) -> kotlin.Boolean was expected\n  Error:(18, 25) Gradle: Left-hand side of a callable reference with a\n  receiver parameter cannot be empty. Please specify the type of the\n  receiver before '::' explicitly</p>\n</blockquote>\n\n<p>I'm not sure what the error is nor what type I should specify explicitly before '::'</p>\n\n<p>Another question:\nCan I use another objects function as reference in kotlin? Something like this:</p>\n\n<pre><code>class Bar {\n    fun isOdd(x: Int): Boolean = x % 2 != 0\n}\n\nclass Foo {\n\n    fun getFilteredList(){\n        val bar = Bar()\n        val numbers = listOf(1, 2, 3)\n        numbers.filter(bar::isOdd) // Use Bar's method\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1447066578, "post_id": 33604619, "comment_id": 54989696, "body": "What is your use case for obtaining parameter values reflectively?"}, {"owner": {"reputation": 153, "user_id": 777346, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/982898d427f92969b90cca77af20eb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Durow", "link": "https://stackoverflow.com/users/777346/andrey-durow"}, "reply_to_user": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1447136929, "post_id": 33604619, "comment_id": 55022144, "body": "@alexander-udalov I&#39;m new to Java/Kotlin.. Just want to write wrapper over MyBatis: to refactor this lines of code:      <code>fun run_sql(param1, param2) { sql_params.put(&quot;param1&quot;, param1);     sql_params.put(&quot;param2&quot;, param2); }</code> to loop over parameters list"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1447145953, "post_id": 33604619, "comment_id": 55026104, "body": "In that case I think using a class where all those values are listed as properties, and passing an instance of that class would suit you better"}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 8, "last_activity_date": 1539687171, "last_edit_date": 1539687171, "creation_date": 1447066550, "answer_id": 33607599, "question_id": 33604619, "link": "https://stackoverflow.com/questions/33604619/how-to-get-names-and-values-of-methods-parameters/33607599#33607599", "title": "How to get names and values of method&#39;s parameters?", "body": "<p>Parameter names are available through the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-parameter/name.html\" rel=\"nofollow noreferrer\"><code>KParameter.name</code></a> property:</p>\n\n<pre><code>class Greeter() {\n    fun greet(name: String) {\n        val p = Greeter::greet.parameters\n        println(\"Hello, ${p[0].name}\")\n    }\n}\n</code></pre>\n\n<p>Parameter <em>values</em>, on the other hand, cannot be obtained reflectively easily on JVM.</p>\n"}], "owner": {"reputation": 153, "user_id": 777346, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/982898d427f92969b90cca77af20eb4c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Durow", "link": "https://stackoverflow.com/users/777346/andrey-durow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2385, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1539687171, "creation_date": 1447055588, "last_edit_date": 1447062520, "question_id": 33604619, "link": "https://stackoverflow.com/questions/33604619/how-to-get-names-and-values-of-methods-parameters", "title": "How to get names and values of method&#39;s parameters?", "body": "<p>Is there possibility to get names of method's parameters inside method code? Can anyone show example of it?</p>\n\n<p>I found only this solution at this time, but dislike it..:</p>\n\n<pre><code>class Greeter() {\n\n    fun greet(name: String) {\n        val c = Greeter::class;\n        for (m in c.memberFunctions) {\n            if (m.name == \"greet\") {\n                val p = m.parameters\n                println(p.toString())\n            }\n        }\n        println(\"Hello, ${name}\");\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Greeter().greet(\"UserName\")\n}\n</code></pre>\n\n<p>update: i found another solution, but now i have one more question:\nHow to get pairs of ParamName, ParamValue at function greet? </p>\n\n<pre><code>class Greeter() {\n\n    fun greet(name: String) {\n        val p = Greeter::greet.parameters\n        println(p.toString())\n        println(\"Hello, ${name}\");\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    Greeter().greet(\"UserName\")\n}\n</code></pre>\n"}, {"tags": ["design-patterns", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451420265, "post_id": 33602705, "comment_id": 56778034, "body": "Are you asking for someone to write a sample visitor pattern for Kotlin on your behalf?  The question is broad, open ended, and likely should be flagged for closing."}, {"owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451425109, "post_id": 33602705, "comment_id": 56780195, "body": "No, I&#39;m just asking how to idiomatically implement a particular pattern in a language I&#39;m still learning -- that&#39;s all."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451426597, "post_id": 33602705, "comment_id": 56780932, "body": "Post your best guess at it, and let us help you tune it.  Probably you just would pass a lambda to the nodes that would traverse and call back the lambda with the node being visited.  Start there, post code, then we can help from there."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451504266, "post_id": 33602705, "comment_id": 56813805, "body": "Ok, I took a general approach to answering your question given I don&#39;t know anything about your class hierarchy and which problems come into play.  See below."}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 1977529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DKciD.jpg?s=128&g=1", "display_name": "Juangamnik", "link": "https://stackoverflow.com/users/1977529/juangamnik"}, "edited": false, "score": 0, "creation_date": 1468000852, "post_id": 34536070, "comment_id": 63964882, "body": "Using big if-else/when clauses with type checks is what the visitor pattern tries to avoid, isn&#39;t it? Hence only the solution in the second of the related articles (<a href=\"http://amrphd.blogspot.com.uy/2014/12/visitor-design-pattern-vs-lambda.html\" rel=\"nofollow noreferrer\">phd-in</a>) seems to be valid, since the single dispatch is used there. But having an accept-method with n lambdas instead of one visitor object does not sound reasonable either. The issue becomes even more apparent, if you do not have access to the classes to be double-dispatched. Then you use extension methods, which are statically dispatched, either..."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1547410054, "post_id": 34536070, "comment_id": 95174434, "body": "The visitor pattern provides an approach for separating data from logic that acts on that data. Double dispatching is an implementation detail."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 7, "last_activity_date": 1517754754, "last_edit_date": 1517754754, "creation_date": 1451504231, "answer_id": 34536070, "question_id": 33602705, "link": "https://stackoverflow.com/questions/33602705/best-way-to-implement-visitor-pattern-in-kotlin/34536070#34536070", "title": "Best way to implement visitor pattern in Kotlin", "body": "<p>Read <a href=\"https://stackoverflow.com/a/29109591/3679676\">this answer</a> for Java 8, everything it says also applies to Kotlin:</p>\n\n<blockquote>\n  <p>The additions made to the Java language do not render every old concept outdated. In fact, the Visitor pattern is very good at supporting adding of new operations.</p>\n</blockquote>\n\n<p>This holds true for Kotlin.  Like Java 8 it has <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"nofollow noreferrer\">Lambdas</a>, <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"nofollow noreferrer\">SAM conversions</a>, and <a href=\"https://kotlinlang.org/docs/reference/interfaces.html#interfaces\" rel=\"nofollow noreferrer\">interfaces that allow default implementations</a>.  </p>\n\n<p>One change is if you are doing class instance type checking, instead of using a large <code>if</code> statement for each <code>instanceof</code> check, use the <a href=\"https://kotlinlang.org/docs/reference/control-flow.html#when-expression\" rel=\"nofollow noreferrer\"><code>when</code> expression</a> in Kotlin:</p>\n\n<p>On that same Stackoverflow page in a different answer it talks about Lambdas being used and shows <code>if</code> statement in Java deciding which lambda to call.  Instead of their <a href=\"https://stackoverflow.com/a/29090455/3679676\">Java sample</a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>if (animal instanceof Cat) {\n    catAction.accept((Cat) animal);\n} else if (animal instanceof Dog) {\n    dogAction.accept((Dog) animal);\n} else if (animal instanceof Fish) {\n    fishAction.accept((Fish) animal);\n} else if (animal instanceof Bird) {\n    birdAction.accept((Bird) animal);\n} else {\n    throw new AssertionError(animal.getClass());\n}\n</code></pre>\n\n<p>Use this Kotlin:</p>\n\n<pre><code>when (animal) {\n    is Cat -&gt; catAction.accept(animal)\n    is Dog -&gt; dogAction.accept(animal)\n    is Fish -&gt; fishAction.accept(animal)\n    is Bird -&gt; birdAction.accept(animal)\n    else -&gt; throw AssertionError(animal.javaClass)\n}\n</code></pre>\n\n<p>In Kotlin you don't need to cast since a <a href=\"https://kotlinlang.org/docs/reference/typecasts.html#smart-casts\" rel=\"nofollow noreferrer\">smart cast</a> is automatically made when the compiler sees the <code>is</code> check for the instance type.</p>\n\n<p>Also in Kotlin you can use <a href=\"https://kotlinlang.org/docs/reference/classes.html#sealed-classes\" rel=\"nofollow noreferrer\">Sealed Classes</a> to represent your possible options in the hierarchy and then the compiler can determine if you have exhausted all cases meaning you do not need the <code>else</code> in the <code>when</code> statement.</p>\n\n<p>Otherwise what holds true on that page, and other common answers to the same question is good information for Kotlin.  I don't think it is as common to see an actual literal visitor pattern as much in Java 8, Scala or Kotlin, but rather some variation using lambdas and/or pattern matching.</p>\n\n<p><strong><em>Other related articles:</em></strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22737127/visitor-pattern-with-java-8-default-methods\">Visitor pattern with Java 8 default methods</a> (Kotlin has them too)</li>\n<li><a href=\"http://amrphd.blogspot.com.uy/2014/12/visitor-design-pattern-vs-lambda.html\" rel=\"nofollow noreferrer\">Visitor pattern vs. lambda abstractions in Java 8</a> (Kotlin has lambdas too) </li>\n<li><a href=\"http://www.taras-shum.com/2015/01/visitor-pattern-java-8-lambda.html\" rel=\"nofollow noreferrer\">Visitor Pattern Java 8 Lambda implementation</a> (Kotlin has lambdas too, remember to use a <code>when</code> instead of a large <code>if</code>) </li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 9716, "user_id": 1116739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de7dd5d55de3e76fd4ca0916028e2d46?s=128&d=identicon&r=PG", "display_name": "cha0site", "link": "https://stackoverflow.com/users/1116739/cha0site"}, "edited": false, "score": 0, "creation_date": 1557738516, "post_id": 43132012, "comment_id": 98851784, "body": "Why did you need to put a lambda in the companion object for this? It would&#39;ve worked just as well with a regular method in the class itself."}], "tags": [], "owner": {"reputation": 6535, "user_id": 804138, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/813bef5c16481022c426d80bd65e331c?s=128&d=identicon&r=PG", "display_name": "Basel Shishani", "link": "https://stackoverflow.com/users/804138/basel-shishani"}, "is_accepted": false, "score": -2, "last_activity_date": 1490931515, "creation_date": 1490931515, "answer_id": 43132012, "question_id": 33602705, "link": "https://stackoverflow.com/questions/33602705/best-way-to-implement-visitor-pattern-in-kotlin/43132012#43132012", "title": "Best way to implement visitor pattern in Kotlin", "body": "<p>A combination of companion objects and lambdas can be used to achieve dynamic visitation, like so:</p>\n\n<pre><code>interface Visitable { fun visit()}\n\nclass FooOne(): Visitable {\n    val title1 = \"111\"\n    companion object { var visit: (FooOne)-&gt;Unit  = {} }\n    override fun visit() { FooOne.visit(this) }\n}\n\nclass FooTwo(): Visitable {\n    val title2 = \"222\"\n    companion object { var visit: (FooTwo)-&gt;Unit  = {} }\n    override fun visit() { FooTwo.visit(this) }\n}\n\n/* assign visitor functionality based on types */\nfun visitorStars() {\n    FooOne.visit = {println(\"In FooOne: ***${it.title1}***\") }\n    FooTwo.visit = {println(\"In FooTwo: ***${it.title2}***\") }\n}\n\n/* assign different visitor functionality */\nfun visitorHashes() {\n    FooOne.visit = { println(\"In FooOne: ###${it.title1}###\") }\n    FooTwo.visit = {println(\"In FooTwo: ###${it.title2}###\") }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val foos = listOf&lt;Visitable&gt;(FooOne(), FooTwo())\n    visitorStars()\n    foos.forEach {it.visit()}\n    visitorHashes()\n    foos.forEach {it.visit()}\n}\n\n&gt;&gt;&gt;\nIn FooOne: ***111***\nIn FooTwo: ***222***\nIn FooOne: ###111###\nIn FooTwo: ###222###\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "is_accepted": false, "score": 3, "last_activity_date": 1547393124, "creation_date": 1547393124, "answer_id": 54170314, "question_id": 33602705, "link": "https://stackoverflow.com/questions/33602705/best-way-to-implement-visitor-pattern-in-kotlin/54170314#54170314", "title": "Best way to implement visitor pattern in Kotlin", "body": "<p>Here is an implementation that does not do double dispatch but does achieve the separation between the data and the code that acts on it. </p>\n\n<p>The visitor's dispatch is done \"by hand\" using a <code>when</code> expression (that is exhaustive) which requires less boiler plate because there is no need to override the <code>accept()</code> method in all visitees and multiple <code>visit()</code> methods in a visitor. </p>\n\n<pre><code>package visitor.addition\nimport visitor.addition.Expression.*\n\ninterface Visitor {\n    fun visit(expression: Expression)\n}\n\nsealed class Expression {\n    fun accept(visitor: Visitor) = visitor.visit(this)\n\n    class Num(val value: Int) : Expression()\n    class Sum(val left: Expression, val right: Expression) : Expression()\n    class Mul(val left: Expression, val right: Expression) : Expression()\n}\n\nclass PrintVisitor() : Visitor {\n    val sb = StringBuilder()\n\n    override fun visit(e: Expression) {\n        val x = when (e) {\n            is Num -&gt; sb.append(e.value)\n            is Sum -&gt; stringify(\"+\", e.left, e.right)\n            is Mul -&gt; stringify(\"*\", e.left, e.right)\n        }\n    }\n\n    fun stringify(name : String, left: Expression, right: Expression) {\n        sb.append('(')\n        left.accept(this); sb.append(name); right.accept(this)\n        sb.append(')')\n    }\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val exp = Sum(Mul(Num(9), Num(10)), Sum(Num(1), Num(2)))\n    val visitor = PrintVisitor()\n    exp.accept(visitor)\n\n    println(visitor.sb) // prints: ((9*10)+(1+2))\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4684884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9fe2c932f7ee4883c5d29a3f20441ad?s=128&d=identicon&r=PG&f=1", "display_name": "Bart\u0142omiej G&#243;ra", "link": "https://stackoverflow.com/users/4684884/bart%c5%82omiej-g%c3%b3ra"}, "is_accepted": false, "score": 0, "last_activity_date": 1617107754, "last_edit_date": 1617107754, "creation_date": 1616508470, "answer_id": 66764840, "question_id": 33602705, "link": "https://stackoverflow.com/questions/33602705/best-way-to-implement-visitor-pattern-in-kotlin/66764840#66764840", "title": "Best way to implement visitor pattern in Kotlin", "body": "<p>To solve the problem I would use something like this:</p>\n<pre><code>interface Visitable {\n\n    fun accept(visitor: Visitor)\n}\n\n</code></pre>\n<p>Then implementations:</p>\n<pre><code>class House : Visitable {\n\n    override fun accept(visitor: Visitor) {\n         visitor.visit(this)\n    }\n}\n\nclass Car : Visitable {\n\n    override fun accept(visitor: Visitor) {\n         visitor.visit(this)\n    }\n}\n\n</code></pre>\n<p>Visitor itself:</p>\n<pre><code>interface Visitor {\n\n    fun visit(entity: Car)\n\n    fun visit(entity: House)\n}\n</code></pre>\n<p>and implementation:</p>\n<pre><code>class Printer : Visitor {\n\n    override fun visit(entity: Car) {\n         println(&quot;Im in A Car&quot;)\n    }\n\n    override fun visit(entity: House) {\n        println( &quot;I'm in a House&quot;)\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    val list = listOf&lt;Visitable&gt;(House(), Car())\n\n    val printer = Printer()\n\n    list.map { it.accept(printer) }\n}\n\n</code></pre>\n<p>output:</p>\n<pre><code>I'm in a House\nIm in A Car\n</code></pre>\n"}], "owner": {"reputation": 4169, "user_id": 341772, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/250b3c601cbd646bece3d2464b024488?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/341772/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3399, "favorite_count": 2, "accepted_answer_id": 34536070, "answer_count": 4, "score": 5, "last_activity_date": 1617107754, "creation_date": 1447044366, "last_edit_date": 1547409846, "question_id": 33602705, "link": "https://stackoverflow.com/questions/33602705/best-way-to-implement-visitor-pattern-in-kotlin", "title": "Best way to implement visitor pattern in Kotlin", "body": "<p>Are there any tricks or common approaches for implementing the <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow\">visitor pattern</a> in Kotlin? Anything that might be non-obvious to beginners, but leads to more concise or organized code.</p>\n\n<p>EDIT for clarification: I have an <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow\">AST</a> with many (~30) types of nodes in it. Currently each class implements its own <code>print()</code> method, which I want to factor out into a separate Printer class. With the visitor pattern in place it'll be cleaner to add other AST-traversal classes, of which there will be several.</p>\n"}, {"tags": ["kotlin", "kdoc"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1447055920, "post_id": 33601157, "comment_id": 54983961, "body": "i think that&#39;s a bug, since the whole thing is not complited"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1452213900, "post_id": 33601157, "comment_id": 57081273, "body": "Can you try now with current Kotlin, this should be resolved."}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1452213882, "post_id": 33615471, "comment_id": 57081270, "body": "It appears that KT-9946 has been marked as fixed, so this is no longer an problem?"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 3, "last_activity_date": 1452239919, "last_edit_date": 1452239919, "creation_date": 1447092741, "answer_id": 33615471, "question_id": 33601157, "link": "https://stackoverflow.com/questions/33601157/how-to-link-to-a-static-member-of-a-java-class-in-kdoc/33615471#33615471", "title": "How to link to a static member of a Java class in KDoc?", "body": "<p>This is a bug. It has been fixed in more recent versions of the Kotlin IntelliJ plugin: <a href=\"https://youtrack.jetbrains.com/issue/KT-9946\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-9946</a></p>\n"}], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 33615471, "answer_count": 1, "score": 2, "last_activity_date": 1452239919, "creation_date": 1447032477, "last_edit_date": 1447032802, "question_id": 33601157, "link": "https://stackoverflow.com/questions/33601157/how-to-link-to-a-static-member-of-a-java-class-in-kdoc", "title": "How to link to a static member of a Java class in KDoc?", "body": "<p>In KDoc, you can do this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * [Integer.equals] is an instance method.\n */\n</code></pre>\n\n<p>But you can't do this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * [Integer.signum] is a static method.\n */\n</code></pre>\n\n<p>By \"you can't\" I mean that IntelliJ IDEA won't lead you to the declaration of a static member if you use <em>Navigate \u2192 Declaration</em> action on it. Navigating to static fields doesn't work as well.</p>\n\n<p>Is there a way to link to static members of Java classes in KDoc? Is this probably just a bug in IDEA?</p>\n"}, {"tags": ["uml", "kotlin"], "comments": [{"owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "edited": false, "score": 0, "creation_date": 1447047002, "post_id": 33599780, "comment_id": 54981190, "body": "If what you need is not implemented as an IDEA plugin, then I doubt it is implemented in any other way. Kotlin is a young language, not even out of beta, and its syntax can still change a bit. In order to generate UML from source files, you&#39;d need to parse the language syntax, so such a tool isn&#39;t likely to be developed until 1.0 release."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1447055808, "post_id": 33599780, "comment_id": 54983925, "body": "don&#39;t Java tools work? I believe that Java reflection should understand Kotlin&#39;s classes as usual."}, {"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 0, "creation_date": 1447056297, "post_id": 33599780, "comment_id": 54984119, "body": "Suseika: this is what I was afraid of."}, {"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 0, "creation_date": 1447056365, "post_id": 33599780, "comment_id": 54984150, "body": "Vodden: I don&#39;t know about any tool that generates UML from class files, but if you know one, let me know and I&#39;ll give it a try. I think that would work."}], "answers": [{"comments": [{"owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 2, "creation_date": 1447336373, "post_id": 33669845, "comment_id": 55118681, "body": "When do you plan to support this feature fully with Kotlin?"}, {"owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "reply_to_user": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "edited": false, "score": 1, "creation_date": 1447673380, "post_id": 33669845, "comment_id": 55236953, "body": "As far as I know there are no plans for now as everybody is focused on the release and the language finalization. So I wouldn&#39;t expect full support soon however I believe there will nothing bad to open related tickets in the tracker at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>"}], "tags": [], "owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "is_accepted": true, "score": 8, "last_activity_date": 1447325757, "creation_date": 1447325757, "answer_id": 33669845, "question_id": 33599780, "link": "https://stackoverflow.com/questions/33599780/generate-kotlin-class-diagram/33669845#33669845", "title": "Generate Kotlin class diagram", "body": "<p>Actually it works but with limitations: you can click only on a package in the project tree and click \"Show Diagram...\". Also it generates diagram from the Java point of view (shows Java's signatures and facade classes)</p>\n\n<p><a href=\"https://i.stack.imgur.com/uysgE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uysgE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2560, "user_id": 3757113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000391669542/picture?type=large", "display_name": "LordScone", "link": "https://stackoverflow.com/users/3757113/lordscone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7419, "favorite_count": 2, "accepted_answer_id": 33669845, "answer_count": 1, "score": 13, "last_activity_date": 1447325757, "creation_date": 1447021782, "question_id": 33599780, "link": "https://stackoverflow.com/questions/33599780/generate-kotlin-class-diagram", "title": "Generate Kotlin class diagram", "body": "<p>I'm looking for a tool, Intellij Idea plugin, or whatever that is able to generate UML class diagram from Kotlin source files.</p>\n\n<p>Intellij Idea 15's \"Show diagram...\" tool only works for .java files.</p>\n\n<p>Google doesn't help, but I still hope there is a chance to find a tool for this.</p>\n"}, {"tags": ["syntax", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 26, "last_activity_date": 1447047208, "last_edit_date": 1447047208, "creation_date": 1446996851, "answer_id": 33595654, "question_id": 33594930, "link": "https://stackoverflow.com/questions/33594930/how-to-declare-and-initialize-a-mutableset-in-kotlin/33595654#33595654", "title": "How to declare and initialize a MutableSet in Kotlin?", "body": "<p>Kotlin doesn't have its own implementations of collection interfaces. You can use standard Java sets such as <code>HashSet</code> or <code>TreeSet</code>, or any other set implementation out there. HashSet is the most popular one, and the preferred way of creating a HashSet from given elements is using the <code>hashSetOf</code> function:</p>\n\n<pre><code>val set: MutableSet&lt;Int&gt; = hashSetOf(1, 2, 3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 3, "last_activity_date": 1546352752, "creation_date": 1546352752, "answer_id": 53996254, "question_id": 33594930, "link": "https://stackoverflow.com/questions/33594930/how-to-declare-and-initialize-a-mutableset-in-kotlin/53996254#53996254", "title": "How to declare and initialize a MutableSet in Kotlin?", "body": "<p>I would use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/mutable-set-of.html\" rel=\"nofollow noreferrer\">mutableSetOf</a>:</p>\n\n<pre><code>val s = mutableSetOf(1, 2, 3)\n</code></pre>\n\n<p>which is a <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-linked-hash-set/index.html\" rel=\"nofollow noreferrer\">kotlin.collections.LinkedHashSet</a> under the hood.</p>\n"}], "owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7786, "favorite_count": 0, "accepted_answer_id": 33595654, "answer_count": 2, "score": 15, "last_activity_date": 1546352831, "creation_date": 1446992211, "last_edit_date": 1546352831, "question_id": 33594930, "link": "https://stackoverflow.com/questions/33594930/how-to-declare-and-initialize-a-mutableset-in-kotlin", "title": "How to declare and initialize a MutableSet in Kotlin?", "body": "<p>How to declare a <code>MutableSet&lt;Int&gt;</code> with the values 1, 2 and 3?</p>\n"}, {"tags": ["string", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 3, "last_activity_date": 1446997284, "creation_date": 1446997284, "answer_id": 33595713, "question_id": 33593223, "link": "https://stackoverflow.com/questions/33593223/format-kotlin-string-with-multiple-occurrences/33595713#33595713", "title": "Format Kotlin String with multiple occurrences", "body": "<p>String literals in Kotlin are capable of string interpolation, and the dollar sign is the start of a <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#string-templates\" rel=\"nofollow\">string template expression</a>. If you need the literal dollar sign in a string instead, you should escape it using a backslash: <code>\\$</code>. So your template (which I assume you're passing to <code>String.format</code>) becomes:</p>\n\n<pre><code>val template = \"Something %s something else %s. The first was %1\\$s, the second was %2\\$s\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21839, "user_id": 6521116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U2zHq.jpg?s=128&g=1", "display_name": "LF00", "link": "https://stackoverflow.com/users/6521116/lf00"}, "is_accepted": false, "score": 3, "last_activity_date": 1495870654, "creation_date": 1495870654, "answer_id": 44214273, "question_id": 33593223, "link": "https://stackoverflow.com/questions/33593223/format-kotlin-string-with-multiple-occurrences/44214273#44214273", "title": "Format Kotlin String with multiple occurrences", "body": "<p>As <a href=\"https://stackoverflow.com/a/33595713/6521116\">Alexander Udalov's answer</a> say, <code>$</code> can be used for <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#string-templates\" rel=\"nofollow noreferrer\">String Templates</a>.</p>\n\n<p>Apart from use backslash to escape the char <code>$</code>, you also can use <code>${'$'}</code> to escape it. This syntax will be more useful when you want to escape the <code>$</code> in a raw string, where backslash escaping is not supported.</p>\n\n<pre><code>val template = \"Something %s something else %s. The first was %1${'$'}s, the second was %2${'$'}s\"\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 1765147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafb6cbc02c2dd972bbf1120600f2c41?s=128&d=identicon&r=PG", "display_name": "Rico", "link": "https://stackoverflow.com/users/1765147/rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 1, "accepted_answer_id": 33595713, "answer_count": 2, "score": 1, "last_activity_date": 1495870654, "creation_date": 1446980616, "question_id": 33593223, "link": "https://stackoverflow.com/questions/33593223/format-kotlin-string-with-multiple-occurrences", "title": "Format Kotlin String with multiple occurrences", "body": "<p>I've got a String template looking like this:</p>\n\n<pre><code>val template = \"Something %s something else %s. The first was %1$s, the second was  %2$s\"\n</code></pre>\n\n<p>works fine with Java. How do I use this reoccurring String values with Kotlin?\nLooks like <code>%1$s</code> is not possible.</p>\n\n<p>Compiler warning: <code>unresolved reference: s</code></p>\n"}, {"tags": ["java", "intellij-idea", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1446975253, "post_id": 33590646, "comment_id": 54960391, "body": "Did you try <code>Handshake::class.java</code> for the first argument? In any case, try Ctrl + P to view the possible parameters of the function."}, {"owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "edited": false, "score": 1, "creation_date": 1447028754, "post_id": 33590646, "comment_id": 54976805, "body": "<code>Events.handler(Handshake::class) { println(it.sent) }</code> \u2014 this syntax has nothing to do with inline functions"}, {"owner": {"reputation": 2108, "user_id": 1377037, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b5941b2951d33748024848f82e7bf784?s=128&d=identicon&r=PG", "display_name": "Jonathan Beaudoin", "link": "https://stackoverflow.com/users/1377037/jonathan-beaudoin"}, "edited": false, "score": 0, "creation_date": 1447030310, "post_id": 33590646, "comment_id": 54977178, "body": "OP doesn&#39;t understand the meaning of inline functions."}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1447053272, "post_id": 33590646, "comment_id": 54982868, "body": "@cypressious Yes I did try that. I updated the question with the method signatures for <code>handler</code>. @AndreyBreslav @Jonathan-Beaudoin Adjusted the initial question."}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "reply_to_user": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "edited": false, "score": 0, "creation_date": 1447053892, "post_id": 33590646, "comment_id": 54983127, "body": "@AndreyBreslav I noticed you answered a similar question here <a href=\"https://devnet.jetbrains.com/thread/461516\" rel=\"nofollow noreferrer\">devnet.jetbrains.com/thread/461516</a> Are SAM conversion to Kotlin lambdas a project in consideration? Is there anything I can do in my current situation besides use Kotlin lambdas?"}], "answers": [{"comments": [{"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1447086722, "post_id": 33610615, "comment_id": 55001681, "body": "With a little modification I got this to work for my case. Resulting code: <a href=\"http://pastebin.com/tsLfFxnq\" rel=\"nofollow noreferrer\">pastebin.com/tsLfFxnq</a> thanks!"}, {"owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "edited": false, "score": 0, "creation_date": 1447087383, "post_id": 33610615, "comment_id": 55002075, "body": "Also I was able to get it to work with just <code>KClass</code> which can be viewed here: <a href=\"http://pastebin.com/mEWhA5yc\" rel=\"nofollow noreferrer\">pastebin.com/mEWhA5yc</a>"}, {"owner": {"reputation": 13720, "user_id": 393786, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1a06556a2b54632228d999822950f42e?s=128&d=identicon&r=PG&f=1", "display_name": "mhshams", "link": "https://stackoverflow.com/users/393786/mhshams"}, "edited": false, "score": 0, "creation_date": 1449501041, "post_id": 33610615, "comment_id": 56021235, "body": "@andrey, Do we have above feature (using function where ever SAM  is required) in Kotlin now?"}, {"owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "reply_to_user": {"reputation": 13720, "user_id": 393786, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1a06556a2b54632228d999822950f42e?s=128&d=identicon&r=PG&f=1", "display_name": "mhshams", "link": "https://stackoverflow.com/users/393786/mhshams"}, "edited": false, "score": 0, "creation_date": 1449517556, "post_id": 33610615, "comment_id": 56031787, "body": "@mhshams nothing has changed since a month ago"}, {"owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "edited": false, "score": 1, "creation_date": 1449624861, "post_id": 33610615, "comment_id": 56085924, "body": "@AndreyBreslav Nice to hear that type aliases are going to be supported. Is there a publicly available early design document for them? Couldn&#39;t find anything like that at <a href=\"https://github.com/JetBrains/kotlin-spec/\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin-spec</a>"}, {"owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "reply_to_user": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "edited": false, "score": 2, "creation_date": 1449660005, "post_id": 33610615, "comment_id": 56101505, "body": "@Suseika no, there&#39;s not enough design work done to publish anything"}, {"owner": {"reputation": 7210, "user_id": 3533380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d02db8e76f1b27cce4f07e15a52bd07?s=128&d=identicon&r=PG&f=1", "display_name": "Mibac", "link": "https://stackoverflow.com/users/3533380/mibac"}, "edited": false, "score": 4, "creation_date": 1492188919, "post_id": 33610615, "comment_id": 73890388, "body": "@AndreyBreslav now that type aliases are out could you update your answer please?"}, {"owner": {"reputation": 11742, "user_id": 5730321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/6yX7D.jpg?s=128&g=1", "display_name": "Leo Droidcoder", "link": "https://stackoverflow.com/users/5730321/leo-droidcoder"}, "edited": false, "score": 0, "creation_date": 1591025850, "post_id": 33610615, "comment_id": 109893786, "body": "That&#39;s a pity... Seems it is much easier to write a functional interface in Java. Writing an extra extension function for every interface is not what we expect from Kotlin, @AndreyBreslav"}], "tags": [], "owner": {"reputation": 20424, "user_id": 445715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3824489df267d3bf86bbc678b9745ac4?s=128&d=identicon&r=PG", "display_name": "Andrey Breslav", "link": "https://stackoverflow.com/users/445715/andrey-breslav"}, "is_accepted": true, "score": 83, "last_activity_date": 1587131032, "last_edit_date": 1587131032, "creation_date": 1447076962, "answer_id": 33610615, "question_id": 33590646, "link": "https://stackoverflow.com/questions/33590646/kotlin-use-a-lambda-in-place-of-a-functional-interface/33610615#33610615", "title": "Kotlin: Use a lambda in place of a functional interface?", "body": "<p>Assuming below that you really need <code>EventHandler</code> as a separate interface (e.g. for Java interop). If you don't, you can simply use a type alias (since Kotlin 1.1):</p>\n\n<pre><code>typealias EventHandler&lt;T&gt; = (T) -&gt; Unit\n</code></pre>\n\n<p>In this case a simple lambda will work right away.</p>\n\n<p>But if you don't want to use a type alias, the issue still stands. It is that Kotlin only does SAM-conversion for functions defined in Java. Since <code>Events.handler</code> is defined in Kotlin, SAM-conversions do not apply to it.</p>\n\n<p>To support this syntax: </p>\n\n<pre><code>Events.handler(Handshake::class, EventHandler&lt;Handshake&gt; { println(it.sent) })\n</code></pre>\n\n<p>You can define a function named <code>EventHandler</code>:</p>\n\n<pre><code>fun &lt;T&gt; EventHandler(handler: (T) -&gt; Unit): EventHandler&lt;T&gt; \n    = object : EventHandler&lt;T&gt; { \n        override fun handle(event: T) = handler(event) \n    }\n</code></pre>\n\n<p>To support this syntax:</p>\n\n<pre><code>Events.handler(Handshake::class, { println(it.sent) })\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>Events.handler(Handshake::class) { println(it.sent) }\n</code></pre>\n\n<p>You need to overload the <code>handler</code> function to take a function instead of <code>EventHandler</code>:</p>\n\n<pre><code>fun &lt;T&gt; Events.handler(eventType: Class&lt;T&gt;, handler: (T) -&gt; Unit) = EventHandler(handler)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 1771924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c986ffd7d07a2ae1336d5321ae0c6392?s=128&d=identicon&r=PG", "display_name": "iboalali", "link": "https://stackoverflow.com/users/1771924/iboalali"}, "edited": false, "score": 1, "creation_date": 1613325418, "post_id": 62299215, "comment_id": 117034890, "body": "This should be now the accepted answer for kotlin 1.4+"}], "tags": [], "owner": {"reputation": 2989, "user_id": 4751657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-p4iyEZ9SjXU/AAAAAAAAAAI/AAAAAAAAABg/BUQVK9rJJuk/photo.jpg?sz=128", "display_name": "Nikolay Kulachenko", "link": "https://stackoverflow.com/users/4751657/nikolay-kulachenko"}, "is_accepted": false, "score": 21, "last_activity_date": 1591778076, "creation_date": 1591778076, "answer_id": 62299215, "question_id": 33590646, "link": "https://stackoverflow.com/questions/33590646/kotlin-use-a-lambda-in-place-of-a-functional-interface/62299215#62299215", "title": "Kotlin: Use a lambda in place of a functional interface?", "body": "<p>A lot of nice things has happened to Kotlin since @andrey-breslav posted the answer. He mentions:</p>\n\n<blockquote>\n  <p>It is that Kotlin <strong>only does SAM-conversion for functions defined in\n  Java</strong>. Since Events.handler is defined in Kotlin, SAM-conversions do\n  not apply to it.</p>\n</blockquote>\n\n<p>Well, that's no longer the case for <a href=\"https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-4-m1-released/\" rel=\"noreferrer\">Kotlin 1.4+</a>. It can use SAM-conversion for Kotlin functions if you mark an interface as a \"functional\" interface:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>// notice the \"fun\" keyword\nfun interface EventHandler&lt;T&gt; {\n    fun handle(event: T)\n}\n</code></pre>\n\n<p>You can read the YouTrack ticket here: <a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-7770</a>. There's also an explanation why Kotlin needs a marker for such interfaces unlike Java (<code>@FunctionalInterface</code> is only informational and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html\" rel=\"noreferrer\">has no effect on the compiler</a>).</p>\n"}], "owner": {"reputation": 7656, "user_id": 1938929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/OeAme.png?s=128&g=1", "display_name": "Jire", "link": "https://stackoverflow.com/users/1938929/jire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37570, "favorite_count": 12, "accepted_answer_id": 33610615, "answer_count": 2, "score": 59, "last_activity_date": 1591778076, "creation_date": 1446955869, "last_edit_date": 1448806112, "question_id": 33590646, "link": "https://stackoverflow.com/questions/33590646/kotlin-use-a-lambda-in-place-of-a-functional-interface", "title": "Kotlin: Use a lambda in place of a functional interface?", "body": "<p>In Java we can do this\n<code>Events.handler(Handshake.class, hs -&gt; out.println(hs));</code></p>\n\n<p>In Kotlin however I am trying to replicate the behavior to replace this:</p>\n\n<pre><code>Events.handler(Handshake::class, object : EventHandler&lt;Handshake&gt; {\n    override fun handle(event: Handshake) {\n        println(event.sent)\n    }\n})\n</code></pre>\n\n<p>With a more convenient:</p>\n\n<p><code>Events.handler(Handshake::class, EventHandler&lt;Handshake&gt; { println(it.sent) })</code></p>\n\n<p>For some reason in reference to <code>EventHandler</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PYGGz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PYGGz.png\" alt=\"enter image description here\"></a></p>\n\n<p>More preferably however I'd like to use something even shorter like this:\n<code>Events.handler(Handshake::class, { println(it.sent) })</code></p>\n\n<p>Or use the advertised feature to use the method like this:\n<code>Events.handler(Handshake::class) { println(it.sent) }</code></p>\n\n<p>This is my <code>Events</code> object:</p>\n\n<pre><code>import java.util.*\nimport kotlin.reflect.KClass\n\nobject Events {\n\n    private val map = HashMap&lt;Class&lt;*&gt;, Set&lt;EventHandler&lt;*&gt;&gt;&gt;()\n\n    fun &lt;T : Any&gt; handler(eventType: KClass&lt;T&gt;, handler: EventHandler&lt;T&gt;) {\n        handler(eventType.java, handler)\n    }\n\n    fun &lt;T&gt; handler(eventType: Class&lt;T&gt;, handler: EventHandler&lt;T&gt;) = handlers(eventType).add(handler)\n\n    fun post(event: Any) = handlers(event.javaClass).forEach { it.handle(event) }\n\n    operator fun plus(event: Any) = post(event)\n\n    private fun &lt;T&gt; handlers(eventType: Class&lt;T&gt;): HashSet&lt;EventHandler&lt;T&gt;&gt; {\n        var set = map[eventType]\n        if (set == null) {\n            set = HashSet&lt;EventHandler&lt;*&gt;&gt;()\n            map.put(eventType, set)\n        }\n        return set as HashSet&lt;EventHandler&lt;T&gt;&gt;\n    }\n\n}\n</code></pre>\n\n<p>And my <code>EventHandler</code> interface:</p>\n\n<pre><code>@FunctionalInterface\ninterface EventHandler&lt;T&gt; {\n\n    fun handle(event: T)\n\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "java-native-interface", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "is_accepted": true, "score": 4, "last_activity_date": 1446951563, "last_edit_date": 1446951563, "creation_date": 1446951222, "answer_id": 33590219, "question_id": 33590158, "link": "https://stackoverflow.com/questions/33590158/jni-getshortarrayelements-fails-with-sigsegv-segv-accerr/33590219#33590219", "title": "JNI GetShortArrayElements fails with SIGSEGV SEGV_ACCERR", "body": "<p>Oops, you're not using the <code>isCopy</code> argument correctly. It should be:</p>\n\n<pre><code>jboolean isCopy;\njshort* targetArray = env-&gt;GetShortArrayElements(javaArray, &amp;isCopy);\n</code></pre>\n\n<p>That is, <code>isCopy</code> is an \"out parameter\" (to use C# lingo).</p>\n\n<p>If you don't care whether the <code>targetArray</code> is aliased to <code>javaArray</code>, you can also pass <code>nullptr</code> instead, like so:</p>\n\n<pre><code>jshort* targetArray = env-&gt;GetShortArrayElements(javaArray, nullptr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18252, "user_id": 154527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9367d0448b8fc3e6d7f6cd421940ac62?s=128&d=identicon&r=PG", "display_name": "Alain O&#39;Dea", "link": "https://stackoverflow.com/users/154527/alain-odea"}, "is_accepted": false, "score": 3, "last_activity_date": 1446951395, "creation_date": 1446951395, "answer_id": 33590237, "question_id": 33590158, "link": "https://stackoverflow.com/questions/33590158/jni-getshortarrayelements-fails-with-sigsegv-segv-accerr/33590237#33590237", "title": "JNI GetShortArrayElements fails with SIGSEGV SEGV_ACCERR", "body": "<p>Target array should be <strong>jshort</strong> rather than <strong>short</strong>.</p>\n\n<p>Also you need to pass <strong>isCopy</strong> by reference using <strong>&amp;</strong> instead of by value.</p>\n\n<p>More info here:\n<a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp17382\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp17382</a></p>\n"}], "owner": {"reputation": 1154, "user_id": 1394608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f91ee69b0605c513df29a6db38868bf0?s=128&d=identicon&r=PG", "display_name": "sigmabeta", "link": "https://stackoverflow.com/users/1394608/sigmabeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 33590219, "answer_count": 2, "score": 1, "last_activity_date": 1446951563, "creation_date": 1446950528, "question_id": 33590158, "link": "https://stackoverflow.com/questions/33590158/jni-getshortarrayelements-fails-with-sigsegv-segv-accerr", "title": "JNI GetShortArrayElements fails with SIGSEGV SEGV_ACCERR", "body": "<p>I've created a buffer in managed code:</p>\n\n<pre><code>var nativeBuffer = ShortArray(bufferSize)\n</code></pre>\n\n<p>This is Kotlin code, but according to the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-short-array/\" rel=\"nofollow\">stdlib documentation</a>, this syntax is effectively a wrapper that returns a <code>short []</code>.</p>\n\n<p>I would then like to write to this buffer from C++, using JNI:</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_package_class_name_readNext\n    (JNIEnv * env, jclass clazz, jshortArray javaArray)\n{\n    jboolean * isCopy;\n    short * targetArray = env-&gt;GetShortArrayElements(javaArray, isCopy);\n\n    // Do stuff to targetArray\n}\n</code></pre>\n\n<p>The problem is that the <code>GetShortArrayElements</code> call always results in a crash, with the following tombstone:</p>\n\n<pre><code>11-07 21:23:53.610 86-86/? I/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n11-07 21:23:53.610 86-86/? I/DEBUG: Build fingerprint: 'generic/vbox86p/vbox86p:5.1/LMY47D/buildbot06092001:userdebug/test-keys'\n11-07 21:23:53.610 86-86/? I/DEBUG: Revision: '0'\n11-07 21:23:53.610 86-86/? I/DEBUG: ABI: 'x86'\n11-07 21:23:53.610 86-86/? I/DEBUG: pid: 28339, tid: 28477, name: Thread-282  &gt;&gt;&gt; &lt;package-name&gt; &lt;&lt;&lt;\n11-07 21:23:53.610 86-86/? I/DEBUG: signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 0xb3bcfacb\n11-07 21:23:53.613 86-86/? I/DEBUG:     eax b3bcfacb  ebx b3ffcaa4  ecx a2497000  edx b426e480\n11-07 21:23:53.613 86-86/? I/DEBUG:     esi a2497000  edi b3fff440\n11-07 21:23:53.613 86-86/? I/DEBUG:     xcs 00000073  xds 0000007b  xes 0000007b  xfs 000000e7  xss 0000007b\n11-07 21:23:53.613 86-86/? I/DEBUG:     eip b3dcd69c  ebp 9f5a2968  esp 9f5a2880  flags 00210282\n11-07 21:23:53.613 86-86/? I/DEBUG:     #00 pc 002e069c  /system/lib/libart.so (short* art::JNI::GetPrimitiveArray&lt;_jshortArray*, short, art::mirror::PrimitiveArray&lt;short&gt; &gt;(_JNIEnv*, _jshortArray*, unsigned char*)+572)\n11-07 21:23:53.613 86-86/? I/DEBUG:     #01 pc 0010cdad  /system/lib/libart.so (art::CheckJNI::GetShortArrayElements(_JNIEnv*, _jshortArray*, unsigned char*)+125)\n</code></pre>\n\n<p><code>javaArray</code> is not null (usually an address like -1621480864) and <code>nativeBuffer</code> is a static variable, so not likely to be GC'ed. The behavior occurs on Genymotion instances (x86) and on ARM devices, but I've only tested against Android 5.0+. What else could I have missed?</p>\n"}, {"tags": ["android", "intellij-idea", "android-gradle-plugin", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "edited": false, "score": 5, "creation_date": 1447047699, "post_id": 33588611, "comment_id": 54981318, "body": "Please post code as text next time, not as images."}, {"owner": {"reputation": 1772, "user_id": 3781781, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/786051be285f27aac443f8e24d5600f5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/3781781/joe"}, "reply_to_user": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "edited": false, "score": 0, "creation_date": 1447289437, "post_id": 33588611, "comment_id": 55098686, "body": "Will do, not sure why I didn&#39;t :P"}], "answers": [{"tags": [], "owner": {"reputation": 1772, "user_id": 3781781, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/786051be285f27aac443f8e24d5600f5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/3781781/joe"}, "is_accepted": true, "score": 10, "last_activity_date": 1555306778, "last_edit_date": 1555306778, "creation_date": 1446936332, "answer_id": 33588695, "question_id": 33588611, "link": "https://stackoverflow.com/questions/33588611/kotlin-android-extensions-packages-cannot-be-imported/33588695#33588695", "title": "Kotlin android extensions, packages cannot be imported", "body": "<p>You have to specify what view you want or at least put a wildcard.</p>\n\n<p>For example:</p>\n\n<pre><code>import view.*\n</code></pre>\n\n<p>or </p>\n\n<pre><code>import view.some_specific_view\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1333, "user_id": 5890321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f08b0ac8116e1de42e5733c6c67c92a2?s=128&d=identicon&r=PG&f=1", "display_name": "Kenneth Argo", "link": "https://stackoverflow.com/users/5890321/kenneth-argo"}, "is_accepted": false, "score": 0, "last_activity_date": 1598852815, "last_edit_date": 1598852815, "creation_date": 1598851993, "answer_id": 63665286, "question_id": 33588611, "link": "https://stackoverflow.com/questions/33588611/kotlin-android-extensions-packages-cannot-be-imported/63665286#63665286", "title": "Kotlin android extensions, packages cannot be imported", "body": "<p>A more correct answer is:</p>\n<pre><code>import kotlinx.android.synthetic.fragment_new_movie.*\n</code></pre>\n<p>The above answer is somewhat correct but lacking the complete import might cause some confusion.</p>\n<p>An alternative:</p>\n<pre><code>import kotlinx.android.synthetic.fragment_new_movie.view.*\n</code></pre>\n"}], "owner": {"reputation": 1772, "user_id": 3781781, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/786051be285f27aac443f8e24d5600f5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/3781781/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6212, "favorite_count": 0, "accepted_answer_id": 33588695, "answer_count": 2, "score": 1, "last_activity_date": 1598852815, "creation_date": 1446935847, "last_edit_date": 1555309277, "question_id": 33588611, "link": "https://stackoverflow.com/questions/33588611/kotlin-android-extensions-packages-cannot-be-imported", "title": "Kotlin android extensions, packages cannot be imported", "body": "<p>I installed the latest Kotlin android extensions plugin (version 1.0.0-beta-1103) and added the classpath to my Gradle dependencies. It compiles but I am still unable to import a package inside my android fragment.</p>\n\n<p>Here is the relevant portion of the Gradle file:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.0.0-beta-1103'\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n        classpath \"org.jetbrains.kotlin:kotlin-android-extensions:1.0.0-beta-1103\"\n    }\n\n}\n</code></pre>\n\n<p>Here is the import statement that is failing. My IDE states shows the error \"Packages cannot be imported\" </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import kotlinx.android.synthetic.fragment_new_movie.view\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451187482, "post_id": 33583235, "comment_id": 56696385, "body": "I added an answer which addresses the question more directly.  Explains why it happens, and solutions that make sense given the context (you end up with lists, so why no embrace them earlier), and also the hack version to cast the array if you cannot resist."}], "answers": [{"comments": [{"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446906807, "post_id": 33583458, "comment_id": 54944005, "body": "So there is no way to cast Array&lt;String?&gt; to Array&lt;String&gt; ?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1446916334, "post_id": 33583458, "comment_id": 54947104, "body": "You always can cast nullability, but the responsibility is on you."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 1, "last_activity_date": 1446904134, "creation_date": 1446904134, "answer_id": 33583458, "question_id": 33583235, "link": "https://stackoverflow.com/questions/33583235/how-can-i-tell-kotlin-that-an-array-or-collection-cannot-contain-nulls/33583458#33583458", "title": "How can I tell Kotlin that an array or collection cannot contain nulls?", "body": "<p>There is no way to tell this to the compiler. The type of the variable is determined when it is declared. In this case, the variable is declared as an array that can contain nulls.</p>\n\n<p>The fill() method does not declare a new variable, it only modifies the contents of an existing one, so it cannot cause the variable type to change.</p>\n"}, {"comments": [{"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446919530, "post_id": 33585596, "comment_id": 54948143, "body": "I thought that I&#39;d tried <code>as Array&lt;String&gt;</code> and that it didn&#39;t compile, but I see that it does."}, {"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446919646, "post_id": 33585596, "comment_id": 54948181, "body": "The problem I have is that <code>Array(10000, {&quot;string})</code> is running code 10000 times rather than copying a value 1000 times - I can&#39;t believe it&#39;s as quick. Same for <code>map{it!!}</code>, although in both cases I suppose the compiler could be very smart."}, {"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446919823, "post_id": 33585596, "comment_id": 54948229, "body": "When I say <code>as Array&lt;String&gt;</code> IntelliJ warns that the cast can never succeed. If I don&#39;t fill, it&#39;s right, and I get an exception. If I do fill, it&#39;s wrong, I don&#39;t get an exception, but that suggests that the cast has actually checked every element. So all your suggestions I think involve iterating over the array to check something that I know to be true."}, {"owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446920785, "post_id": 33585596, "comment_id": 54948517, "body": "Actually I retract that. IntelliJ warns that this cast can never succeed, but it actually always succeeds. <a href=\"https://gist.github.com/dmcg/c66db992c4b463a72042\" rel=\"nofollow noreferrer\">gist.github.com/dmcg/c66db992c4b463a72042</a> So it isn&#39;t checking the contents of the array before making the cast"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1446921568, "post_id": 33585596, "comment_id": 54948772, "body": "What you observed is a bug in the Kotlin plugin: <a href=\"https://youtrack.jetbrains.com/issue/KT-6391\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-6391</a> You can suppress the warning by using <code>@Suppress(&quot;CAST_NEVER_SUCCEEDS&quot;)</code>"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "edited": false, "score": 0, "creation_date": 1446923448, "post_id": 33585596, "comment_id": 54949384, "body": "@DuncanMcGregor: about the performance of Array(N, {&quot;str&quot;}) - there is no optimisation for lambdas by design. That allows you to put logging\\debug printing anywhere and see what&#39;s going on."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1451184624, "post_id": 33585596, "comment_id": 56695958, "body": "Specifying the types to the left is not what makes the filled array be not nullable strings.  The type is inferred from the lambda AND if you specify a literal type on the function call or to the left of the <code>=</code> they would all have to match.  Changing the type to the left of <code>=</code> if it mismatched the lambda, would be an error."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 2, "last_activity_date": 1446917119, "creation_date": 1446917119, "answer_id": 33585596, "question_id": 33583235, "link": "https://stackoverflow.com/questions/33583235/how-can-i-tell-kotlin-that-an-array-or-collection-cannot-contain-nulls/33585596#33585596", "title": "How can I tell Kotlin that an array or collection cannot contain nulls?", "body": "<p>A rule of thumb: if in doubts, specify the types explicitly (there is a special refactoring for that):</p>\n\n<pre><code>val strings1: Array&lt;String?&gt; = arrayOfNulls&lt;String&gt;(10000)\nval strings2: Array&lt;String&gt;  = Array(10000, {\"string\"})\n</code></pre>\n\n<p>So you see that <code>strings1</code> contains nullable items, while <code>strings2</code> does not. That and only that determines how to work with these arrays:</p>\n\n<pre><code>// You can simply use nullability in you code:\nstrings2[0] = strings1[0]?.toUpperCase ?: \"KOTLIN\"\n\n//Or you can ALWAYS cast the type, if you are confident:\nval casted = strings1 as Array&lt;String&gt;\n\n//But to be sure I'd transform the items of the array:\nval asserted = strings1.map{it!!}\nval defaults = strings1.map{it ?: \"DEFAULT\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 1, "last_activity_date": 1451187401, "last_edit_date": 1451187401, "creation_date": 1451187032, "answer_id": 34477344, "question_id": 33583235, "link": "https://stackoverflow.com/questions/33583235/how-can-i-tell-kotlin-that-an-array-or-collection-cannot-contain-nulls/34477344#34477344", "title": "How can I tell Kotlin that an array or collection cannot contain nulls?", "body": "<p><strong>Why the filled array works fine</strong></p>\n\n<p>The filled array infers the type of the array during the call from the lambda used as the second argument:</p>\n\n<pre><code>val strings = Array(10000, {\"string\"})\n</code></pre>\n\n<p>produces <code>Array&lt;String&gt;</code></p>\n\n<pre><code>val strings  = Array(10000, { it -&gt; if (it % 2 == 0) \"string\" else null })\n</code></pre>\n\n<p>produces <code>Array&lt;String?&gt;</code></p>\n\n<p>Therefore changing the declaration to the left of the <code>=</code> that doesn't match the lambda does not do anything to help.  If there is a conflict, there is an error.</p>\n\n<p><strong>How to make the arrayOfNulls work</strong></p>\n\n<p>For the <code>arrayOfNulls</code> problem, they type you specify to the call <code>arrayOfNulls&lt;String&gt;</code> is used in the function signature as generic type <code>T</code> and the function <code>arrayOfNulls</code> returns <code>Array&lt;T?&gt;</code> which means nullable.  Nothing in your code changes that type.  The <code>fill</code> method only sets values into the existing array.  </p>\n\n<p>To convert this nullable-element array to non-nullable-element list, use:</p>\n\n<pre><code>val nullableStrings = arrayOfNulls&lt;String&gt;(10000).apply { fill(\"hello\") }\nval strings = nullableStrings.filterNotNull()\nval upper = strings.map { it.toUpperCase() } // no !! needed\n</code></pre>\n\n<p>Which is fine because your <code>map</code> call converts to a list anyway, so why not convert beforehand.  Now depending on the size of the array this could be performant or not, the copy might be fast if in CPU cache.  If it is large and no performant, you can make this lazy:</p>\n\n<pre><code>val nullableStrings = arrayOfNulls&lt;String&gt;(10000).apply { fill(\"hello\") }\nval strings = nullableStrings.asSequence().filterNotNull()\nval upper = strings.map { it.toUpperCase() } // no !! needed\n</code></pre>\n\n<p>Or you can stay with arrays by doing a copy, but really this makes no sense because you undo it with the <code>map</code>:</p>\n\n<pre><code>val nullableStrings = arrayOfNulls&lt;String&gt;(10000).apply { fill(\"hello\") }\nval strings: Array&lt;String&gt; = Array(nullableStrings.size, { idx -&gt; nullableStrings[idx]!! })\n</code></pre>\n\n<p>Arrays really are not that common in Java or Kotlin code (JetBrains studied the statistics) unless the code is doing really low level optimization.  It could be better to use lists.</p>\n\n<p>Given that you might end up with lists anyway, maybe start there too and give up the array.</p>\n\n<pre><code>val nullableStrings = listOf(\"a\",\"b\",null,\"c\",null,\"d\")\nval strings =  nullableStrings.filterNotNull()\n</code></pre>\n\n<p><strong>But, if you can't stop the quest to use arrays, and really must cast one without a copy...</strong></p>\n\n<p>You can always write a function that does two things:  First, check that all values are not null, and if so then return the array that is cast as not null. This is a bit hacky, but is safe only because the difference is nullability.</p>\n\n<p>First, create an extension function on <code>Array&lt;T?&gt;</code>:</p>\n\n<pre><code> fun &lt;T: Any&gt; Array&lt;T?&gt;.asNotNull(): Array&lt;T&gt; {\n    if (this.any { it == null }) {\n        throw IllegalStateException(\"Cannot cast an array that contains null\")\n    }\n    @Suppress(\"CAST_NEVER_SUCCEEDS\")\n    return this as Array&lt;T&gt;\n }\n</code></pre>\n\n<p>Then use this function new function to do the conversion (element checked as not null cast):</p>\n\n<pre><code>val nullableStrings = arrayOfNulls&lt;String&gt;(10000).apply { fill(\"hello\") }\nval strings = nullableStrings.asNotNull() // magic!\nval upperStrings = strings.map { it.toUpperCase() } // no error\n</code></pre>\n\n<p>But I feel dirty even talking about this last option.</p>\n"}], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1881, "favorite_count": 0, "accepted_answer_id": 33585596, "answer_count": 3, "score": 3, "last_activity_date": 1451187401, "creation_date": 1446902633, "question_id": 33583235, "link": "https://stackoverflow.com/questions/33583235/how-can-i-tell-kotlin-that-an-array-or-collection-cannot-contain-nulls", "title": "How can I tell Kotlin that an array or collection cannot contain nulls?", "body": "<p>If I create an array, then fill it, Kotlin believes that there may be nulls in the array, and forces me to account for this</p>\n\n<pre><code>val strings = arrayOfNulls&lt;String&gt;(10000)\nstrings.fill(\"hello\")\nval upper = strings.map { it!!.toUpperCase() } // requires it!!\nval lower = upper.map { it.toLowerCase() } // doesn't require !!\n</code></pre>\n\n<p>Creating a filled array doesn't have this problem</p>\n\n<pre><code>val strings = Array(10000, {\"string\"})\nval upper = strings.map { it.toUpperCase() } // doesn't require !!\n</code></pre>\n\n<p>How can I tell the compiler that the result of <code>strings.fill(\"hello\")</code> is an array of NonNull?</p>\n"}, {"tags": ["java", "kotlin", "executor"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1446835592, "post_id": 33572389, "comment_id": 54925005, "body": "Sorry, but what is it that you are trying to achieve? Could you explain or give a working Java code?"}], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "edited": false, "score": 0, "creation_date": 1446832764, "post_id": 33572614, "comment_id": 54923580, "body": "Unit is explained here: <a href=\"https://kotlinlang.org/docs/reference/functions.html#unit-returning-functions\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>."}, {"owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "edited": false, "score": 0, "creation_date": 1446834557, "post_id": 33572614, "comment_id": 54924437, "body": "I read the documentation for the Unit keywork. I understand it now. Your example is fairly good, however, i still struggle bit when i try to imagine that but with arguments and/or return values. Another thing, does <code>createTask()</code> return a closure?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "edited": false, "score": 0, "creation_date": 1446834803, "post_id": 33572614, "comment_id": 54924564, "body": "Yes. But I think the appropriate Kotlin term is a &quot;function literal&quot;, aka lambda expression. It would really become a closure if it &quot;captured&quot; a local variable defined before the function literal, which is not the case here."}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 9, "last_activity_date": 1446834097, "last_edit_date": 1446834097, "creation_date": 1446831864, "answer_id": 33572614, "question_id": 33572389, "link": "https://stackoverflow.com/questions/33572389/understanding-kotlin-executors/33572614#33572614", "title": "Understanding kotlin executors", "body": "<p><code>() -&gt; Unit</code> is a function that takes nothing as argument, and returns nothing. For example, <code>Runnable.run()</code> is such a function. You can see such a function as a task.</p>\n\n<p>So, <code>(() -&gt; Unit) -&gt; Unit</code> is a function that takes such a function as argument, and returns nothing. For example, <code>Executor.execute(Runnable)</code> is such a function. It's thus a function that takes a task as argument (most probably, to execute that task, now, later, once or several times).</p>\n\n<p>Here's an example which defines a function creating what I just called a task, and another function returning an executor, i.e. a function that executes the task:</p>\n\n<pre><code>fun createTask(): () -&gt; Unit {\n    return {\n        println(\"Hello world\")\n    }\n}\n\nfun createExecutor() : (() -&gt; Unit) -&gt; Unit {\n    return { task: () -&gt; Unit -&gt;\n        println(\"I'm going to execute the task...\")\n        task()\n        println(\"I'm going to execute the task a second time...\")\n        task()\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val task = createTask()\n    val executor = createExecutor()\n    executor(task)\n}\n</code></pre>\n\n<p>Note that I'm still learning Kotlin myself, so I still struggle with the syntax and the concepts, too.</p>\n"}], "owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5363, "favorite_count": 0, "accepted_answer_id": 33572614, "answer_count": 1, "score": 2, "last_activity_date": 1446834097, "creation_date": 1446831044, "question_id": 33572389, "link": "https://stackoverflow.com/questions/33572389/understanding-kotlin-executors", "title": "Understanding kotlin executors", "body": "<p>I understand the concept of executors but i am having some trouble understanding executors in kotlin. Maybe it's the syntax not helping. </p>\n\n<p>Let us look at the following example:</p>\n\n<pre><code>     private class AlwaysCallback(private val executor: (() -&gt; Unit) -&gt; Unit,\n                                  private val cb: Progress.() -&gt; Unit) : Callback {\n         override fun execute(progress: Progress) {\n             executor {\n                 progress.cb()\n             }\n         }\n     }\n</code></pre>\n\n<p>If i understood correctly, an executor <code>( () -&gt; Unit ) -&gt; Unit</code> is a vessel for a closure. A block of code that is to be executed. I am not sure if this is true or it is just a vessel for a anonymous function.</p>\n\n<p>Another thing is, could someone explain the syntax:<code>( () -&gt; Unit ) -&gt; Unit</code> ?</p>\n\n<p>I have read the kotlin documentation, read kotlin source code and tried to google it but i am really struggling to understand this. Thank you</p>\n"}, {"tags": ["interface", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 0, "creation_date": 1455028549, "post_id": 33552683, "comment_id": 58299046, "body": "I get <code>Object must be declared abstract or implement abstract member public abstract operator.</code> why?"}, {"owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "reply_to_user": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 2, "creation_date": 1455029057, "post_id": 33552683, "comment_id": 58299475, "body": "@danielgomezrico That must be because your base class/interface (<code>TileSet</code> in my example) declares an abstract method, and you should implement it in your anonymous implementation."}], "tags": [], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "is_accepted": true, "score": 82, "last_activity_date": 1455029106, "last_edit_date": 1455029106, "creation_date": 1446750067, "answer_id": 33552683, "question_id": 33552299, "link": "https://stackoverflow.com/questions/33552299/how-to-create-an-anonymous-implementation-of-an-interface/33552683#33552683", "title": "How to create an anonymous implementation of an interface?", "body": "<p>There are examples in the <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\">documentation</a> for anonymous classes, but not for interfaces.</p>\n\n<p>This is how I created an instance of an interface:</p>\n\n<pre><code>fun TileSet.union(another: TileSet) : TileSet =\n    object : TileSet {\n        override fun contains(x: Int, y: Int) : Boolean =\n            this@union.contains(x, y) || another.contains(x, y)\n    }\n</code></pre>\n\n<p>Notice that, unlike in the example from documentation, there are no parentheses after <code>object : TileSet</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6162, "user_id": 1672027, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/356de98a7af65cf6dd187d3796ba04fd?s=128&d=identicon&r=PG", "display_name": "Matt Klein", "link": "https://stackoverflow.com/users/1672027/matt-klein"}, "edited": false, "score": 2, "creation_date": 1587437597, "post_id": 60104745, "comment_id": 108505126, "body": "Yes, every time I come across this I get annoyed. I get that regular functions are more idiomatic, but when you&#39;re dealing with Dependency Injection Frameworks like old versions of Guice and Spring that don&#39;t work with Kotlin functions then declaring the interfaces is overall easier, except when it comes to creating implementations of these interfaces. Sometimes I just create the Interface in a Java file so I can avoid the Kotlin ceremony..."}], "tags": [], "owner": {"reputation": 9488, "user_id": 1121497, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lKl3g.jpg?s=128&g=1", "display_name": "Ferran Maylinch", "link": "https://stackoverflow.com/users/1121497/ferran-maylinch"}, "is_accepted": false, "score": 4, "last_activity_date": 1581029537, "creation_date": 1581029537, "answer_id": 60104745, "question_id": 33552299, "link": "https://stackoverflow.com/questions/33552299/how-to-create-an-anonymous-implementation-of-an-interface/60104745#60104745", "title": "How to create an anonymous implementation of an interface?", "body": "<p>I was experimenting a little bit, and I was surprised to find that you can implement <strong>Java</strong> functional interfaces using Kotlin lambdas:</p>\n\n<pre><code>// Implementing Java functional interfaces using lambdas\nval greeter = Consumer&lt;String&gt; { println(\"Hi $it\") }\nval dice = Supplier { ThreadLocalRandom.current().nextInt(1, 7) }\n</code></pre>\n\n<p>But when you implement <strong>Kotlin</strong> functional interfaces, you need the full <em>ceremony</em>:</p>\n\n<pre><code>// Implementing a Kotlin functional inteface with lambdas is not possible\nval greeter = object : MyConsumer&lt;String&gt; {\n    override fun accept(x: String) {\n        println(\"Hi $x\")\n    }\n}\n\n@FunctionalInterface\ninterface MyConsumer&lt;T&gt; {\n    fun accept(x:T)\n}\n</code></pre>\n\n<p>I wonder why the full anonymous class syntax is needed when implementing Kotlin intefaces from the very Kotlin!</p>\n\n<p>Maybe they want you to use functions instead? That could be done like this.</p>\n\n<pre><code>// If you want to use lambdas, define a function instead of an interface\nval greeter: MyConsumerFunction&lt;String&gt; = { println(\"Hi $it\") }\n\ntypealias MyConsumerFunction&lt;T&gt; = (T) -&gt; Unit\n</code></pre>\n\n<p>Anyway, if anyone knows anything about this, please let me know! :)</p>\n"}], "owner": {"reputation": 14571, "user_id": 1542343, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0c67fc696612cc6c62a17d8bb2fdd17f?s=128&d=identicon&r=PG", "display_name": "gvlasov", "link": "https://stackoverflow.com/users/1542343/gvlasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26552, "favorite_count": 2, "accepted_answer_id": 33552683, "answer_count": 2, "score": 57, "last_activity_date": 1581029537, "creation_date": 1446748810, "last_edit_date": 1534504495, "question_id": 33552299, "link": "https://stackoverflow.com/questions/33552299/how-to-create-an-anonymous-implementation-of-an-interface", "title": "How to create an anonymous implementation of an interface?", "body": "<p>I have an interface:</p>\n\n<pre><code>interface TileSet {\n    fun contains(x: Int, y: Int) : Boolean\n}\n</code></pre>\n\n<p>I want to be able to create unions of sets of tiles (tile is a pair of x and y integer coordinates):</p>\n\n<pre><code>fun TileSet.union(another: TileSet) : TileSet = \n   // ..\n</code></pre>\n\n<p>In Java 8, I could do it like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@FunctionalInterface\npublic interface TileSet {\n    boolean contains(int x, int y);\n\n    public default TileSet unite(TileSet another) {\n        return (x, y) -&gt; TileSet.this.contains(x, y) &amp;&amp; another.contains(x, y);\n    }\n}\n</code></pre>\n\n<p>So an interface is implemented with a lambda in <code>TileSet#unite()</code>. Or it could be implemented with the old anonymous class approach:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public default TileSet unite(TileSet another) {\n    return new TileSet() {\n         @Override\n         public boolean contains(int x, int y) {\n             return TileSet.this.contains(x, y) &amp;&amp; another.contains(x, y);\n         }\n    }\n}\n</code></pre>\n\n<p>How can I create an anonymous implementation of a single-method interface in Kotlin?</p>\n\n<p>I know how to do it if I use <code>(Int, Int) -&gt; Boolean</code> instead of <code>TileSet</code>, but I want the type to have a descriptive name rather than just a function signature.</p>\n"}, {"tags": ["android", "parcelable", "kotlin"], "comments": [{"owner": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "edited": false, "score": 3, "creation_date": 1446804073, "post_id": 33551972, "comment_id": 54906289, "body": "Did you tried kapt?  <a href=\"http://blog.jetbrains.com/kotlin/2015/06/better-annotation-processing-supporting-stubs-in-kapt/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2015/06/&hellip;</a>"}, {"owner": {"reputation": 2856, "user_id": 835591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f40a853c80ab7320114f4284f81a31e6?s=128&d=identicon&r=PG", "display_name": "thalesmello", "link": "https://stackoverflow.com/users/835591/thalesmello"}, "reply_to_user": {"reputation": 4016, "user_id": 1460833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bc4821b9c16457694f503b42831198f1?s=128&d=identicon&r=PG", "display_name": "Sergey Mashkov", "link": "https://stackoverflow.com/users/1460833/sergey-mashkov"}, "edited": false, "score": 0, "creation_date": 1446845944, "post_id": 33551972, "comment_id": 54930178, "body": "You mean to use AutoParcel with Kotlin? I thought about that, but if there was a way to have data classes Parcelable built in into the language, it would be beautiful. Specially considering a huge part of Kotlin usage will come from Android applications."}], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1446755654, "creation_date": 1446755654, "answer_id": 33554259, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/33554259#33554259", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Unfortunately there is no way in Kotlin to put a real field in an interface, so you can't inherit it from an interface-adapter for free: \n<code>data class Par : MyParcelable</code></p>\n\n<p>You may look at delegation, but it does not help with fields, AFAIK: <a href=\"https://kotlinlang.org/docs/reference/delegation.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/delegation.html</a></p>\n\n<p>So the the only option I see is a fabric function for <code>Parcelable.Creator</code>, which is kind of obvious.</p>\n"}, {"tags": [], "owner": {"reputation": 6712, "user_id": 3212266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KFjJB.jpg?s=128&g=1", "display_name": "Juan Saravia", "link": "https://stackoverflow.com/users/3212266/juan-saravia"}, "is_accepted": false, "score": 0, "last_activity_date": 1453422943, "last_edit_date": 1453422943, "creation_date": 1449953493, "answer_id": 34244848, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/34244848#34244848", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>There is a Plugin but is not always as updated as Kotlin is evolving:\n<a href=\"https://plugins.jetbrains.com/plugin/8086\" rel=\"nofollow\">https://plugins.jetbrains.com/plugin/8086</a></p>\n\n<p><strong>Alternative:</strong>\nI have a working example of a custom data class using <code>Parcelable</code> and lists:</p>\n\n<p><strong>Data classes using Parcelable with Lists:</strong></p>\n\n<blockquote>\n  <p><a href=\"https://gist.github.com/juanchosaravia/0b61204551d4ec815bbf\" rel=\"nofollow\">https://gist.github.com/juanchosaravia/0b61204551d4ec815bbf</a></p>\n</blockquote>\n\n<p>Hope it helps!</p>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 5729581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ba6107afbd2bfab61e94c38714bc110?s=128&d=identicon&r=PG", "display_name": "nekocode", "link": "https://stackoverflow.com/users/5729581/nekocode"}, "is_accepted": false, "score": 49, "last_activity_date": 1451484525, "last_edit_date": 1451484525, "creation_date": 1451458238, "answer_id": 34524412, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/34524412#34524412", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>You can try this plugin:</p>\n\n<p><strong><a href=\"https://plugins.jetbrains.com/plugin/8086\">android-parcelable-intellij-plugin-kotlin</a></strong></p>\n\n<p>It help you generate Android Parcelable boilerplate code for kotlin's data class. And it finally look like this:</p>\n\n<pre><code>data class Model(var test1: Int, var test2: Int): Parcelable {\n\n    constructor(source: Parcel): this(source.readInt(), source.readInt())\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    override fun writeToParcel(dest: Parcel?, flags: Int) {\n        dest?.writeInt(this.test1)\n        dest?.writeInt(this.test2)\n    }\n\n    companion object {\n        @JvmField final val CREATOR: Parcelable.Creator&lt;Model&gt; = object : Parcelable.Creator&lt;Model&gt; {\n            override fun createFromParcel(source: Parcel): Model{\n                return Model(source)\n            }\n\n            override fun newArray(size: Int): Array&lt;Model?&gt; {\n                return arrayOfNulls(size)\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2988, "user_id": 1507512, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/5EsQG.jpg?s=128&g=1", "display_name": "Massimo", "link": "https://stackoverflow.com/users/1507512/massimo"}, "edited": false, "score": 0, "creation_date": 1485950061, "post_id": 35169908, "comment_id": 71135808, "body": "The IDE now says &quot;Data class inheritance from other classes is forbidden&quot;. I think PaperParcel cannot be used anymore with data classes..."}, {"owner": {"reputation": 7190, "user_id": 1584931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/210b97cdd2f03f14ce874e23b7b52c73?s=128&d=identicon&r=PG", "display_name": "Bradley Campbell", "link": "https://stackoverflow.com/users/1584931/bradley-campbell"}, "edited": false, "score": 0, "creation_date": 1486040650, "post_id": 35169908, "comment_id": 71182105, "body": "They never could inherit from other classes, but they can implement interfaces (e.g. PaperParcelable)"}, {"owner": {"reputation": 1233, "user_id": 1740097, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7a1397e879a1e705a0ec816214dc0295?s=128&d=identicon&r=PG", "display_name": "Mr.G", "link": "https://stackoverflow.com/users/1740097/mr-g"}, "edited": false, "score": 1, "creation_date": 1501594022, "post_id": 35169908, "comment_id": 77839238, "body": "@Bradley Campbell  This gives me an error in this line  JvmField val CREATOR = PaperParcelExample.CREATOR cannot create  PaperParcelExample class"}], "tags": [], "owner": {"reputation": 7190, "user_id": 1584931, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/210b97cdd2f03f14ce874e23b7b52c73?s=128&d=identicon&r=PG", "display_name": "Bradley Campbell", "link": "https://stackoverflow.com/users/1584931/bradley-campbell"}, "is_accepted": false, "score": 19, "last_activity_date": 1480235621, "last_edit_date": 1480235621, "creation_date": 1454480616, "answer_id": 35169908, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/35169908#35169908", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Have you tried <a href=\"https://github.com/grandstaish/paperparcel\" rel=\"noreferrer\">PaperParcel</a>? It's an annotation processor which automatically generates the Android <code>Parcelable</code> boilerplate code for you.</p>\n\n<p><strong>Usage:</strong></p>\n\n<p>Annotate your data class with <code>@PaperParcel</code>, implement <code>PaperParcelable</code>, and add a JVM static instance of the generated <code>CREATOR</code> e.g.:</p>\n\n<pre><code>@PaperParcel\ndata class Example(\n  val test: Int,\n  ...\n) : PaperParcelable {\n  companion object {\n    @JvmField val CREATOR = PaperParcelExample.CREATOR\n  }\n}\n</code></pre>\n\n<p>Now your data class is <code>Parcelable</code> and can be passed directly to a <code>Bundle</code> or <code>Intent</code></p>\n\n<p><strong>Edit:</strong> Update with latest API</p>\n"}, {"tags": [], "owner": {"reputation": 1080, "user_id": 520536, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/105d79c43c60b464440ff4a7d6bc9312?s=128&d=identicon&r=PG", "display_name": "gmemario", "link": "https://stackoverflow.com/users/520536/gmemario"}, "is_accepted": false, "score": 4, "last_activity_date": 1456750557, "creation_date": 1456750557, "answer_id": 35700144, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/35700144#35700144", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>I will leave my way of doing in case it might help someone.</p>\n\n<p>What i do is i have a generic <code>Parcelable</code></p>\n\n<pre><code>interface DefaultParcelable : Parcelable {\n    override fun describeContents(): Int = 0\n\n    companion object {\n        fun &lt;T&gt; generateCreator(create: (source: Parcel) -&gt; T): Parcelable.Creator&lt;T&gt; = object: Parcelable.Creator&lt;T&gt; {\n            override fun createFromParcel(source: Parcel): T = create(source)\n\n            override fun newArray(size: Int): Array&lt;out T&gt;? = newArray(size)\n        }\n\n    }\n}\n\ninline fun &lt;reified T&gt; Parcel.read(): T = readValue(T::class.javaClass.classLoader) as T\nfun Parcel.write(vararg values: Any?) = values.forEach { writeValue(it) }\n</code></pre>\n\n<p>And then i create parcelables like this:</p>\n\n<pre><code>data class MyParcelable(val data1: Data1, val data2: Data2) : DefaultParcelable {\n    override fun writeToParcel(dest: Parcel, flags: Int) { dest.write(data1, data2) }\n    companion object { @JvmField final val CREATOR = DefaultParcelable.generateCreator { MyParcelable(it.read(), it.read()) } }\n}\n</code></pre>\n\n<p>Which gets me rid of that boilerplate override.</p>\n"}, {"comments": [{"owner": {"reputation": 712, "user_id": 5451130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf45487fbece48ba001aa5dbfc93637?s=128&d=identicon&r=PG&f=1", "display_name": "PhillyTheThrilly", "link": "https://stackoverflow.com/users/5451130/phillythethrilly"}, "edited": false, "score": 0, "creation_date": 1589306371, "post_id": 42155595, "comment_id": 109239777, "body": "This gives the error &quot;Class &#39;MyClass&#39; is not abstract and does not implement abstract member public abstract fun writeToParcel(dest: Parcel!, flags: Int): Unit defined in android.os.Parcelable"}], "tags": [], "owner": {"reputation": 378, "user_id": 957370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a43470d28feaa2d4847c8907ab6cf653?s=128&d=identicon&r=PG", "display_name": "Jan Rabe", "link": "https://stackoverflow.com/users/957370/jan-rabe"}, "is_accepted": false, "score": 2, "last_activity_date": 1486718199, "creation_date": 1486718199, "answer_id": 42155595, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/42155595#42155595", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>i prefer just using the <a href=\"https://github.com/johncarl81/parceler\" rel=\"nofollow noreferrer\">https://github.com/johncarl81/parceler</a> lib with </p>\n\n<pre><code>@Parcel(Parcel.Serialization.BEAN)\ndata class MyClass(val value)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4405, "user_id": 631814, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4c8f02294f1d1e1c578542deff566367?s=128&d=identicon&r=PG", "display_name": "Stepango", "link": "https://stackoverflow.com/users/631814/stepango"}, "is_accepted": false, "score": 16, "last_activity_date": 1502960384, "last_edit_date": 1502960384, "creation_date": 1495772483, "answer_id": 44193563, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/44193563#44193563", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>The <strong>best</strong> way with <strong>no boilerplate</strong> code at all is <a href=\"https://github.com/nsk-mironov/smuggler\" rel=\"noreferrer\">Smuggler</a> gradle plugin. All you need is just implement AutoParcelable interface like</p>\n\n<pre><code>data class Person(val name:String, val age:Int): AutoParcelable\n</code></pre>\n\n<p>And that's all. Works for sealed classes as well. Also this plugin provides compile time validation for all AutoParcelable classes. </p>\n\n<p><strong>UPD 17.08.2017</strong> Now with <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"noreferrer\">Kotlin 1.1.4 and Kotlin Android extensions plugin</a> you could use <code>@Parcelize</code> annotation. In this case, the example above will look like:</p>\n\n<pre><code>@Parcelize class Person(val name:String, val age:Int): Parcelable\n</code></pre>\n\n<p>No need for <code>data</code> modifier. The biggest downside, for now, is using kotlin-android-extensions plugin which has a lot of other functions that could be unnecessary.</p>\n"}, {"tags": [], "owner": {"reputation": 1970, "user_id": 495673, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e3f66c16ebe27cb83f495d4998f162d1?s=128&d=identicon&r=PG&f=1", "display_name": "argenkiwi", "link": "https://stackoverflow.com/users/495673/argenkiwi"}, "is_accepted": false, "score": 6, "last_activity_date": 1498265577, "last_edit_date": 1498265577, "creation_date": 1498249432, "answer_id": 44729431, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/44729431#44729431", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Using <em>Android Studio</em> and the <em>Kotlin</em> plugin, I found an easy way to convert my old Java <code>Parcelable</code>s with <strong>no extra plugins</strong> (if all you want is to turn a brand new <code>data</code> class into a <code>Parcelable</code>, skip to the 4th code snippet).  </p>\n\n<p>Let's say you have a <code>Person</code> class with all the <code>Parcelable</code> boiler plate:</p>\n\n<pre><code>public class Person implements Parcelable{\n    public static final Creator&lt;Person&gt; CREATOR = new Creator&lt;Person&gt;() {\n        @Override\n        public Person createFromParcel(Parcel in) {\n            return new Person(in);\n        }\n\n        @Override\n        public Person[] newArray(int size) {\n            return new Person[size];\n        }\n    };\n\n    private final String firstName;\n    private final String lastName;\n    private final int age;\n\n    public Person(String firstName, String lastName, int age) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n    }\n\n    protected Person(Parcel in) {\n        firstName = in.readString();\n        lastName = in.readString();\n        age = in.readInt();\n    }\n\n    @Override\n    public void writeToParcel(Parcel dest, int flags) {\n        dest.writeString(firstName);\n        dest.writeString(lastName);\n        dest.writeInt(age);\n    }\n\n    @Override\n    public int describeContents() {\n        return 0;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public int getAge() {\n        return age;\n    }\n}\n</code></pre>\n\n<p>Start by stripping out the <code>Parcelable</code> implementation, leaving a bare-bones, plain, old <em>Java</em> object (properties should be final and set by the constructor):</p>\n\n<pre><code>public class Person {\n    private final String firstName;\n    private final String lastName;\n    private final int age;\n\n    public Person(String firstName, String lastName, int age) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public int getAge() {\n        return age;\n    }\n}\n</code></pre>\n\n<p>Then let the <code>Code &gt; Convert Java file to Kotlin File</code> option do its magic:</p>\n\n<pre><code>class Person(val firstName: String, val lastName: String, val age: Int)\n</code></pre>\n\n<p>Convert this into a <code>data</code> class:</p>\n\n<pre><code>data class Person(val firstName: String, val lastName: String, val age: Int)\n</code></pre>\n\n<p>And finally, let's turn this into a <code>Parcelable</code> again. Hover the class name and Android Studio should give you the option to <code>Add Parcelable Implementation</code>. The result should look like this:</p>\n\n<pre><code>data class Person(val firstName: String, val lastName: String, val age: Int) : Parcelable {\n    constructor(parcel: Parcel) : this(\n            parcel.readString(),\n            parcel.readString(),\n            parcel.readInt()\n    )\n\n    override fun writeToParcel(parcel: Parcel, flags: Int) {\n        parcel.writeString(firstName)\n        parcel.writeString(lastName)\n        parcel.writeInt(age)\n    }\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;Person&gt; {\n        override fun createFromParcel(parcel: Parcel): Person {\n            return Person(parcel)\n        }\n\n        override fun newArray(size: Int): Array&lt;Person?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, the <code>Parcelable</code> implementation is some auto-generated code appended to you <code>data</code> class definition.</p>\n\n<p><strong>Notes:</strong> </p>\n\n<ol>\n<li>Trying to convert a <em>Java</em> <code>Parcelable</code> directly into <em>Kotlin</em> will not produce the same result with the current version of the <em>Kotlin</em> plugin (<code>1.1.3</code>).</li>\n<li>I had to remove some extra curly braces the current <code>Parcelable</code> code generator introduces. Must be a minor bug. </li>\n</ol>\n\n<p>I hope this tip works for you as well as it did for me.</p>\n"}, {"comments": [{"owner": {"reputation": 2856, "user_id": 835591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f40a853c80ab7320114f4284f81a31e6?s=128&d=identicon&r=PG", "display_name": "thalesmello", "link": "https://stackoverflow.com/users/835591/thalesmello"}, "edited": false, "score": 2, "creation_date": 1502824904, "post_id": 45698927, "comment_id": 78358354, "body": "For those who want to check it out: <a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out</a>"}, {"owner": {"reputation": 169, "user_id": 4139773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077736a6ef728e20046021ec140f9d87?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Jain", "link": "https://stackoverflow.com/users/4139773/nitin-jain"}, "edited": false, "score": 3, "creation_date": 1503465344, "post_id": 45698927, "comment_id": 78619582, "body": "why is this no longer data class. Is this example just to show that this could be applied on any generic kotlin class?"}, {"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "reply_to_user": {"reputation": 169, "user_id": 4139773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077736a6ef728e20046021ec140f9d87?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Jain", "link": "https://stackoverflow.com/users/4139773/nitin-jain"}, "edited": false, "score": 0, "creation_date": 1504511449, "post_id": 45698927, "comment_id": 79024938, "body": "@NitinJain, if you read the link posted by @thalesmello, you&#39;ll see that this works on <code>data</code> and non-<code>data</code> classes."}, {"owner": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "edited": false, "score": 11, "creation_date": 1505485200, "post_id": 45698927, "comment_id": 79447433, "body": "compiler complains <code>this calss implements Parcelable but does not provice CREATOR field</code>. Is your answer enough (full)?"}, {"owner": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "edited": false, "score": 0, "creation_date": 1505486629, "post_id": 45698927, "comment_id": 79448306, "body": "<b>Edited:</b> Ok compailer complains, but project Rebuild successfully, and after all it works."}, {"owner": {"reputation": 2354, "user_id": 4087344, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fb68218de627010e4dcb414c1a2814b3?s=128&d=identicon&r=PG&f=1", "display_name": "TOP", "link": "https://stackoverflow.com/users/4087344/top"}, "reply_to_user": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "edited": false, "score": 1, "creation_date": 1505787036, "post_id": 45698927, "comment_id": 79544328, "body": "@murt Did you successfully use Parcelable? I&#39;m facing the compile error because of CREATOR"}, {"owner": {"reputation": 2934, "user_id": 2163045, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/iAIbA.png?s=128&g=1", "display_name": "murt", "link": "https://stackoverflow.com/users/2163045/murt"}, "edited": false, "score": 1, "creation_date": 1505805382, "post_id": 45698927, "comment_id": 79550762, "body": "Yes, do everything in this answer and it will work.   buildscript { ext.kotlin_version = &#39;1.2-M2&#39; ... repositories {... maven { url &quot;<a href=\"https://dl.bintray.com/kotlin/kotlin-dev/\" rel=\"nofollow noreferrer\">dl.bintray.com/kotlin/kotlin-dev</a>&quot;}} dependencies {...         classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;     }}"}, {"owner": {"reputation": 1301, "user_id": 42037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1bfde7bed1cb197c040e0a643cec3a?s=128&d=identicon&r=PG", "display_name": "Dutch Masters", "link": "https://stackoverflow.com/users/42037/dutch-masters"}, "edited": false, "score": 4, "creation_date": 1506741209, "post_id": 45698927, "comment_id": 79953120, "body": "You can use <code>@SuppressLint(&quot;ParcelCreator&quot;)</code> to get rid of the lint warning."}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1509551611, "post_id": 45698927, "comment_id": 81064855, "body": "I got a weird crash when using this feature, after leaving the activity that has it in one of its views: java.lang.NoSuchMethodError: No virtual method writeSerializable(Ljava/util/Date;)V in class Landroid/os/Parcel; or its super classes (declaration of &#39;android.os.Parcel&#39; appears in /system/framework/framework.jar) . Seems it is still not stable : <a href=\"https://stackoverflow.com/q/46592138/878126\">stackoverflow.com/q/46592138/878126</a>"}, {"owner": {"reputation": 794, "user_id": 1407267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5585576e4ddb78815120054f4c8722a9?s=128&d=identicon&r=PG", "display_name": "IvanP", "link": "https://stackoverflow.com/users/1407267/ivanp"}, "edited": false, "score": 0, "creation_date": 1510242001, "post_id": 45698927, "comment_id": 81360495, "body": "Be careful with @Parcelable, it may cause INSTALL_FAILED_UID_CHANGED errors <a href=\"https://discuss.kotlinlang.org/t/parcelize-causes-install-failed-dexopt-on-android-4/4662/2\" rel=\"nofollow noreferrer\">discuss.kotlinlang.org/t/&hellip;</a>"}, {"owner": {"reputation": 107167, "user_id": 878126, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/D5dZW.jpg?s=128&g=1", "display_name": "android developer", "link": "https://stackoverflow.com/users/878126/android-developer"}, "edited": false, "score": 0, "creation_date": 1516180213, "post_id": 45698927, "comment_id": 83579115, "body": "Does this work fine now, with Kotlin version 1.2.10 ?"}, {"owner": {"reputation": 622, "user_id": 819710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Us2AK.jpg?s=128&g=1", "display_name": "Moises Portillo", "link": "https://stackoverflow.com/users/819710/moises-portillo"}, "edited": false, "score": 1, "creation_date": 1530282008, "post_id": 45698927, "comment_id": 89194873, "body": "Don&#39;t Forget @Parcelize annotation on the top of class"}, {"owner": {"reputation": 3323, "user_id": 1533585, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/9q3bh.png?s=128&g=1", "display_name": "NP Developer", "link": "https://stackoverflow.com/users/1533585/np-developer"}, "edited": false, "score": 0, "creation_date": 1551980337, "post_id": 45698927, "comment_id": 96849600, "body": "How to pass array list via Intent putParcelableArrayListExtra ??"}, {"owner": {"reputation": 3826, "user_id": 1803879, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/adc631e70ac262fa5fab8bb81f0db715?s=128&d=identicon&r=PG", "display_name": "Tom Howard", "link": "https://stackoverflow.com/users/1803879/tom-howard"}, "edited": false, "score": 0, "creation_date": 1557950946, "post_id": 45698927, "comment_id": 98942868, "body": "...be forewarned, <code>These features are not considered production ready yet</code>; <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/tutorials/android-plugin.html</a>"}], "tags": [], "owner": {"reputation": 8297, "user_id": 2473302, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/5k6j5.jpg?s=128&g=1", "display_name": "Dhaval Jivani", "link": "https://stackoverflow.com/users/2473302/dhaval-jivani"}, "is_accepted": true, "score": 231, "last_activity_date": 1534651565, "last_edit_date": 1534651565, "creation_date": 1502820769, "answer_id": 45698927, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/45698927#45698927", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p><a href=\"https://blog.jetbrains.com/kotlin/2017/08/kotlin-1-1-4-is-out/\" rel=\"noreferrer\">Kotlin 1.1.4</a> is out</p>\n\n<p>Android Extensions plugin now includes an automatic Parcelable implementation generator. Declare the serialized properties in a primary constructor and add a @Parcelize annotation, and writeToParcel()/createFromParcel() methods will be created automatically:</p>\n\n<pre><code>@Parcelize\nclass User(val firstName: String, val lastName: String) : Parcelable\n</code></pre>\n\n<p>So you need to enable them adding this to you module's <strong>build.gradle</strong>:</p>\n\n<pre><code>apply plugin: 'org.jetbrains.kotlin.android.extensions'\n\nandroid {\n    androidExtensions {\n        experimental = true\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 3, "creation_date": 1548240747, "post_id": 49426012, "comment_id": 95469541, "body": "I used this method, but it has several problems. Sometimes it substitutes a <code>parcel.read...</code> with <code>TODO</code>, if a field is not <code>val&#47;var</code>. If you use <code>List</code> inside a class, your implementation becomes a problem. So I turned to <code>@Parcelize</code> in the accepted answer."}], "tags": [], "owner": {"reputation": 4128, "user_id": 4549577, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-UU2pRkX58oI/AAAAAAAAAAI/AAAAAAAAAHA/utXH88K7lt0/photo.jpg?sz=128", "display_name": "Manish Patiyal", "link": "https://stackoverflow.com/users/4549577/manish-patiyal"}, "is_accepted": false, "score": 25, "last_activity_date": 1521713844, "creation_date": 1521713844, "answer_id": 49426012, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/49426012#49426012", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Just click on the data keyword of your kotlin data class, then press alt+Enter, select the first option saying <code>\"Add Parceable Implementation\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 515, "user_id": 8956093, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pi7hshWLXYA/AAAAAAAAAAI/AAAAAAAAAOU/z_lOOlpN960/photo.jpg?sz=128", "display_name": "Ramakrishna Joshi", "link": "https://stackoverflow.com/users/8956093/ramakrishna-joshi"}, "is_accepted": false, "score": 1, "last_activity_date": 1532250290, "creation_date": 1532250290, "answer_id": 51463532, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/51463532#51463532", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Kotlin has made the entire process of Parcelization in Android damn easy with its @Parcel annotation.</p>\n\n<p>To do that</p>\n\n<p><strong>Step 1.</strong> Add Kotlin extensions in your app module gradle</p>\n\n<p><strong>Step 2.</strong> Add experimental = true since this feature is still in experimentation in gradle.</p>\n\n<blockquote>\n  <p>androidExtensions {\n      experimental = true\n  }</p>\n</blockquote>\n\n<p><strong>Step 3.</strong>  Annonate the data class with @Parcel</p>\n\n<p><strong><a href=\"https://www.linkedin.com/pulse/how-kotlins-parcel-makes-easier-pass-data-between-android-joshi/\" rel=\"nofollow noreferrer\">Here</a></strong> is an simple example on @Parcel usage</p>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 4034678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a988da9738cfc3f950166f35f88d3db4?s=128&d=identicon&r=PG&f=1", "display_name": "Manoj Bhadane", "link": "https://stackoverflow.com/users/4034678/manoj-bhadane"}, "is_accepted": false, "score": 9, "last_activity_date": 1563971247, "creation_date": 1563971247, "answer_id": 57182943, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/57182943#57182943", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<ul>\n<li>Use <strong>@Parcelize</strong> annotation on top of your Model / Data class</li>\n<li>Use latest version of Kotlin</li>\n<li>Use latest version of Kotlin Android Extensions in your app module</li>\n</ul>\n\n<p>Example :</p>\n\n<pre><code>@Parcelize\ndata class Item(\n    var imageUrl: String,\n    var title: String,\n    var description: Category\n) : Parcelable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "is_accepted": false, "score": 4, "last_activity_date": 1586180806, "creation_date": 1586180806, "answer_id": 61061302, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/61061302#61061302", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>You can do it using <code>@Parcelize</code> annotation. It is an automatic Parcelable implementation generator.</p>\n\n<p>First, you need to enable them adding this to your module's build.gradle:</p>\n\n<pre><code>apply plugin: 'org.jetbrains.kotlin.android.extensions'\n</code></pre>\n\n<p>Declare the serialized properties in a primary constructor and add a <code>@Parcelize</code> annotation, and <code>writeToParcel()</code>/<code>createFromParcel()</code> methods will be created automatically:</p>\n\n<pre><code>@Parcelize\nclass User(val firstName: String, val lastName: String) : Parcelable\n</code></pre>\n\n<p>You <strong>DONT</strong> need to add <code>experimental = true</code> inside <code>androidExtensions</code> block.</p>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 9115195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4192cc499e9d7b6a697cdbc28b347b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Dodiya", "link": "https://stackoverflow.com/users/9115195/pratik-dodiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1607627542, "creation_date": 1607627542, "answer_id": 65240850, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/65240850#65240850", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>Below Kotlin code can help you to create Parcelable data classes with Parent and Child Data class</p>\n<p><strong>Parent Data Class - MyPostModel</strong></p>\n<pre><code>data class MyPostModel(\n    @SerializedName(&quot;post_id&quot;) val post_id: String? = &quot;&quot;,\n    @SerializedName(&quot;category_id&quot;) val category_id: String? = &quot;&quot;,\n    @SerializedName(&quot;images&quot;) val images: ArrayList&lt;ImagesModel&gt;? = null\n) : Parcelable {\n    constructor(parcel: Parcel) : this(\n        parcel.readString(),\n        parcel.readString(),\n        parcel.createTypedArrayList(ImagesModel.CREATOR)\n    )\n\n    override fun writeToParcel(parcel: Parcel, flags: Int) {\n        parcel.writeString(post_id)\n        parcel.writeString(category_id)\n        parcel.writeTypedList(images)\n    }\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;MyPostModel&gt; {\n        override fun createFromParcel(parcel: Parcel): MyPostModel {\n            return MyPostModel(parcel)\n        }\n\n        override fun newArray(size: Int): Array&lt;MyPostModel?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n<p><strong>Child Data Class - ImagesModel</strong></p>\n<pre><code>data class ImagesModel(\n    @SerializedName(&quot;image_id&quot;) val image_id: String? = &quot;&quot;,\n    @SerializedName(&quot;image_url&quot;) val image_url: String? = &quot;&quot;\n) : Parcelable {\n    constructor(parcel: Parcel) : this(\n        parcel.readString(),\n        parcel.readString()\n    )\n\n    override fun writeToParcel(parcel: Parcel, flags: Int) {\n        parcel.writeString(image_id)\n        parcel.writeString(image_url)\n    }\n\n    override fun describeContents(): Int {\n        return 0\n    }\n\n    companion object CREATOR : Parcelable.Creator&lt;ImagesModel&gt; {\n        override fun createFromParcel(parcel: Parcel): ImagesModel {\n            return ImagesModel(parcel)\n        }\n\n        override fun newArray(size: Int): Array&lt;ImagesModel?&gt; {\n            return arrayOfNulls(size)\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 13834895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gg8Q010y8-yP5_yXDrjFWG22q5Ty94-8ed2s8CU=k-s128", "display_name": "Andrew Chelix", "link": "https://stackoverflow.com/users/13834895/andrew-chelix"}, "is_accepted": false, "score": 0, "last_activity_date": 1607633702, "creation_date": 1607633702, "answer_id": 65242183, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl/65242183#65242183", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>A simpler and up-to-date method would be to use the <code>@Parcelize</code> annotation which removes the hard word work of implementing the Parcelable</p>\n<p><strong>build.gradle (app module)</strong></p>\n<pre><code>apply plugin: &quot;kotlin-parcelize&quot;\n\n// If you are using the new plugin format use this instead.\nplugins{\n    ...\n    id &quot;kotlin-parcelize&quot;\n}\n</code></pre>\n<p><strong>YourClass.kt</strong></p>\n<pre><code>import kotlinx.parcelize\n\n@Parcelize\nclass User(val firstName: String, val lastName: String, val age: Int): Parcelable\n</code></pre>\n"}], "owner": {"reputation": 2856, "user_id": 835591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f40a853c80ab7320114f4284f81a31e6?s=128&d=identicon&r=PG", "display_name": "thalesmello", "link": "https://stackoverflow.com/users/835591/thalesmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60566, "favorite_count": 30, "accepted_answer_id": 45698927, "answer_count": 15, "score": 141, "last_activity_date": 1607633702, "creation_date": 1446747570, "question_id": 33551972, "link": "https://stackoverflow.com/questions/33551972/is-there-a-convenient-way-to-create-parcelable-data-classes-in-android-with-kotl", "title": "Is there a convenient way to create Parcelable data classes in Android with Kotlin?", "body": "<p>I'm currently using the excellent <a href=\"https://github.com/frankiesardo/auto-parcel\">AutoParcel</a> in my Java project, which facilitates the creation of Parcelable classes.</p>\n\n<p>Now, Kotlin, which I consider for my next project, has this concept of data classes, that automatically generate the equals, hashCode and toString methods.</p>\n\n<p>Is there a convenient way to make a Kotlin data class Parcelable in a convenient way (without implementing the methods manually)?</p>\n"}, {"tags": ["android", "proguard", "kotlin"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 5, "creation_date": 1446742864, "post_id": 33547643, "comment_id": 54880530, "body": "Please provide more information, e.g. which rules you tried, how did that work, what errors did you get, etc."}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1464165703, "post_id": 34159813, "comment_id": 62367481, "body": "I believe a flag for kotlinc sets the policy for null checks. No need for proguard for that."}, {"owner": {"reputation": 927, "user_id": 2015751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29d0313be56df012c70064c768046964?s=128&d=identicon&r=PG", "display_name": "daemontus", "link": "https://stackoverflow.com/users/2015751/daemontus"}, "edited": false, "score": 0, "creation_date": 1484404558, "post_id": 34159813, "comment_id": 70500933, "body": "Where did you find the thing about the flag? I would very much like to try that, but can&#39;t seem to find it anywhere :/"}, {"owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "reply_to_user": {"reputation": 927, "user_id": 2015751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29d0313be56df012c70064c768046964?s=128&d=identicon&r=PG", "display_name": "daemontus", "link": "https://stackoverflow.com/users/2015751/daemontus"}, "edited": false, "score": 0, "creation_date": 1539629646, "post_id": 34159813, "comment_id": 92563213, "body": "@daemontus <code>kotlinc -X</code> yields <code>-Xno-param-assertions</code>, <code>-Xno-receiver-assertions</code> and <code>-Xno-call-assertions</code>; see also <a href=\"https://github.com/JetBrains/kotlin/blob/v1.2.71/compiler/cli/cli-common/src/org/jetbrains/kotlin/cli/common/arguments/K2JVMCompilerArguments.kt#L89-L105\" rel=\"nofollow noreferrer\">source code</a>"}, {"owner": {"reputation": 10444, "user_id": 458668, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3RGgN.jpg?s=128&g=1", "display_name": "WindRider", "link": "https://stackoverflow.com/users/458668/windrider"}, "edited": false, "score": 0, "creation_date": 1582557860, "post_id": 34159813, "comment_id": 106808991, "body": "Kotlin works with Proguard but Proguard is not working effectively with Kotlin yet. Kotlin support in Proguard is still in beta at this moment. E.g. Proguard cannot distinguish <code>internal</code> classes and members from <code>public</code> ones. It sees them as <code>public</code> because they are marked <code>public</code> in the bytecode."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": false, "score": 39, "last_activity_date": 1449588744, "creation_date": 1449588744, "answer_id": 34159813, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard/34159813#34159813", "title": "How to use Kotlin with Proguard", "body": "<p>You don't need to do anything special. Kotlin works with ProGuard out of the box. But you may face some strange errors when processing your application with ProGuard. In this case just add</p>\n\n<pre><code>-dontwarn kotlin.**\n</code></pre>\n\n<p>Also if you want to get rid of null checks at runtime you may use the following rule:</p>\n\n<pre><code>-assumenosideeffects class kotlin.jvm.internal.Intrinsics {\n    static void checkParameterIsNotNull(java.lang.Object, java.lang.String);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 798, "user_id": 1032286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/6RfSS.png?s=128&g=1", "display_name": "Adel Nizamutdinov", "link": "https://stackoverflow.com/users/1032286/adel-nizamutdinov"}, "is_accepted": false, "score": 10, "last_activity_date": 1462788657, "creation_date": 1462788657, "answer_id": 37113076, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard/37113076#37113076", "title": "How to use Kotlin with Proguard", "body": "<p>In Kotlin 1.0.2 EAP proguard strips out when mappings for enums, so I have to keep them explicitly, so</p>\n\n<pre><code>-keepclassmembers class **$WhenMappings {\n    &lt;fields&gt;;\n}\n</code></pre>\n\n<p>is sufficient for correct obfuscation. Although if you want some performance improvements, you can also add</p>\n\n<pre><code>-assumenosideeffects class kotlin.jvm.internal.Intrinsics {\n    static void checkParameterIsNotNull(java.lang.Object, java.lang.String);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 264, "user_id": 2606305, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/cwcY1.jpg?s=128&g=1", "display_name": "TSG anti SO dark forces", "link": "https://stackoverflow.com/users/2606305/tsg-anti-so-dark-forces"}, "is_accepted": false, "score": -3, "last_activity_date": 1528184671, "last_edit_date": 1528184671, "creation_date": 1509099465, "answer_id": 46972749, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard/46972749#46972749", "title": "How to use Kotlin with Proguard", "body": "<p>Check in your <code>build.gradle</code>. Did you include: </p>\n\n<pre><code>implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1934, "user_id": 7877391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1oVvK.png?s=128&g=1", "display_name": "c-an", "link": "https://stackoverflow.com/users/7877391/c-an"}, "edited": false, "score": 0, "creation_date": 1561455960, "post_id": 47237557, "comment_id": 100060062, "body": "Where should I add the first one? in <code>proguard-rules.pro</code>?"}, {"owner": {"reputation": 2697, "user_id": 4650581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hmKpWSd9B4U/AAAAAAAAAAI/AAAAAAAAAK4/xL06IHBoIyo/photo.jpg?sz=128", "display_name": "Misagh", "link": "https://stackoverflow.com/users/4650581/misagh"}, "reply_to_user": {"reputation": 1934, "user_id": 7877391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1oVvK.png?s=128&g=1", "display_name": "c-an", "link": "https://stackoverflow.com/users/7877391/c-an"}, "edited": false, "score": 0, "creation_date": 1561895515, "post_id": 47237557, "comment_id": 100201671, "body": "@c-an yes. Add it to your proguard-rules file"}], "tags": [], "owner": {"reputation": 2697, "user_id": 4650581, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hmKpWSd9B4U/AAAAAAAAAAI/AAAAAAAAAK4/xL06IHBoIyo/photo.jpg?sz=128", "display_name": "Misagh", "link": "https://stackoverflow.com/users/4650581/misagh"}, "is_accepted": false, "score": 19, "last_activity_date": 1510400854, "creation_date": 1510400854, "answer_id": 47237557, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard/47237557#47237557", "title": "How to use Kotlin with Proguard", "body": "<pre><code>-keep class kotlin.** { *; }\n-keep class kotlin.Metadata { *; }\n-dontwarn kotlin.**\n-keepclassmembers class **$WhenMappings {\n    &lt;fields&gt;;\n}\n-keepclassmembers class kotlin.Metadata {\n    public &lt;methods&gt;;\n}\n-assumenosideeffects class kotlin.jvm.internal.Intrinsics {\n    static void checkParameterIsNotNull(java.lang.Object, java.lang.String);\n}\n</code></pre>\n\n<hr>\n\n<p>build gradle :</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/docs/tutorials/kotlin-android.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/tutorials/kotlin-android.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 1267, "user_id": 1514066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FOQOA.jpg?s=128&g=1", "display_name": "Emre G&#252;rses", "link": "https://stackoverflow.com/users/1514066/emre-g%c3%bcrses"}, "is_accepted": false, "score": 0, "last_activity_date": 1590584030, "creation_date": 1590584030, "answer_id": 62043602, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard/62043602#62043602", "title": "How to use Kotlin with Proguard", "body": "<p>if you use android studio, proguards comes with default. But you should on <strong><em>\"Enables code shrinking</em></strong>\" and <strong><em>\"Enables resource shrinking\"</em></strong>  options for your code security and code optimization.</p>\n\n<p>open your gradile file and check below.</p>\n\n<pre><code>android {\n    buildTypes {\n        release {\n            // Enables code shrinking, obfuscation, and optimization for only\n            // your project's release build type.\n            minifyEnabled true\n\n            // Enables resource shrinking, which is performed by the\n            // Android Gradle plugin.\n            shrinkResources true\n\n            // Includes the default ProGuard rules files that are packaged with\n            // the Android Gradle plugin. To learn more, go to the section about\n            // R8 configuration files.\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n</code></pre>\n\n<p>Source : <a href=\"https://developer.android.com/studio/build/shrink-code\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/shrink-code</a></p>\n"}], "owner": {"reputation": 3175, "user_id": 1277555, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71b4edb678001f55b47bdde0741a0ff5?s=128&d=identicon&r=PG", "display_name": "F&#225;bio Carballo", "link": "https://stackoverflow.com/users/1277555/f%c3%a1bio-carballo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24419, "favorite_count": 12, "answer_count": 5, "score": 47, "last_activity_date": 1590584030, "creation_date": 1446735037, "question_id": 33547643, "link": "https://stackoverflow.com/questions/33547643/how-to-use-kotlin-with-proguard", "title": "How to use Kotlin with Proguard", "body": "<p>I'm trying to add Kotlin to my project and I need to use proguard. Which rules should I add to proguard to support Kotlin?</p>\n\n<p>Thank you</p>\n"}]