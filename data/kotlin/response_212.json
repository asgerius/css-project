[{"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 1, "creation_date": 1548892229, "post_id": 54450936, "comment_id": 95711050, "body": "Welcome to stackoverflow! Please read <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> . Show what you have tried yourself. Help community to help you"}, {"owner": {"reputation": 15, "user_id": 10992996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2F7ogHwPOk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMDIGab423xOrt6tfOG9X2-xlO9fg/mo/photo.jpg?sz=128", "display_name": "Rodrigo SA", "link": "https://stackoverflow.com/users/10992996/rodrigo-sa"}, "reply_to_user": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1548930615, "post_id": 54450936, "comment_id": 95724919, "body": "@AlexYu ty, I&#39;ll look into it."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10992996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2F7ogHwPOk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMDIGab423xOrt6tfOG9X2-xlO9fg/mo/photo.jpg?sz=128", "display_name": "Rodrigo SA", "link": "https://stackoverflow.com/users/10992996/rodrigo-sa"}, "edited": false, "score": 0, "creation_date": 1548931125, "post_id": 54454064, "comment_id": 95725214, "body": "Ty, could you explain a bit more about it? Do I need to finish the activity instead of using the back button?"}, {"owner": {"reputation": 368, "user_id": 10954249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7ZJm.png?s=128&g=1", "display_name": "DeePanShu", "link": "https://stackoverflow.com/users/10954249/deepanshu"}, "reply_to_user": {"reputation": 15, "user_id": 10992996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2F7ogHwPOk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMDIGab423xOrt6tfOG9X2-xlO9fg/mo/photo.jpg?sz=128", "display_name": "Rodrigo SA", "link": "https://stackoverflow.com/users/10992996/rodrigo-sa"}, "edited": false, "score": 0, "creation_date": 1548931925, "post_id": 54454064, "comment_id": 95725721, "body": "Please not finish() ActivityA and use this activity as MainActivity, B and C activities can be finish-able"}, {"owner": {"reputation": 15, "user_id": 10992996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2F7ogHwPOk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMDIGab423xOrt6tfOG9X2-xlO9fg/mo/photo.jpg?sz=128", "display_name": "Rodrigo SA", "link": "https://stackoverflow.com/users/10992996/rodrigo-sa"}, "edited": false, "score": 0, "creation_date": 1548939326, "post_id": 54454064, "comment_id": 95730122, "body": "Ty again for the response! That&#39;s what&#39;s confusing me a bit, my activity is not being finished (if I understand correctly), It&#39;s only being paused, but it&#39;s still in the stack."}], "tags": [], "owner": {"reputation": 368, "user_id": 10954249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7ZJm.png?s=128&g=1", "display_name": "DeePanShu", "link": "https://stackoverflow.com/users/10954249/deepanshu"}, "is_accepted": true, "score": 2, "last_activity_date": 1548927156, "last_edit_date": 1548927156, "creation_date": 1548913519, "answer_id": 54454064, "question_id": 54450936, "link": "https://stackoverflow.com/questions/54450936/changing-back-stack-activity-button-state/54454064#54454064", "title": "Changing back stack activity button state", "body": "<p>You can finish all activities after a particular time by starting handler in Activity A:-</p>\n\n<pre><code>private void startTimer(){\n    Handler mHandler = new Handler();\n    mHandler.postDelayed(new Runnable() {\n        @Override\n        public void run() {\n            Intent intent = new Intent(getApplicationContext(), ActivityA.class);\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n            startActivity(intent);\n        }\n\n    }, 10*1000); // timer for 10 secs\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10992996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2F7ogHwPOk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMDIGab423xOrt6tfOG9X2-xlO9fg/mo/photo.jpg?sz=128", "display_name": "Rodrigo SA", "link": "https://stackoverflow.com/users/10992996/rodrigo-sa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54454064, "answer_count": 1, "score": 1, "last_activity_date": 1548927156, "creation_date": 1548889682, "question_id": 54450936, "link": "https://stackoverflow.com/questions/54450936/changing-back-stack-activity-button-state", "title": "Changing back stack activity button state", "body": "<p>I'm trying to change the state of a button (checked or not) from a CountDownTimer.</p>\n\n<ul>\n<li>I start the timer on the first activity.</li>\n<li>Then I'll go to the next activity, wait the timer to finish</li>\n<li>Then I'll go back.</li>\n</ul>\n\n<p>ActivityA -> start timer -> ActivityB -> wait timer to finish -> back to ActivityA. This works.</p>\n\n<p>Now, if I do the same but with one extra activity, like:</p>\n\n<p>ActivityA -> start timer -> ActivityB -> ActivityC -> wait timer to finish -> back to ActivityB -> back to ActivityA. This won't work, the button is still active even tho the timer was supposed to set the button to not active.</p>\n\n<p>I don't know what I'm missing, but appreciate any comments on it.</p>\n"}, {"tags": ["android", "firebase-realtime-database", "kotlin", "firebase-authentication"], "answers": [{"tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": false, "score": 0, "last_activity_date": 1548921866, "creation_date": 1548921866, "answer_id": 54455878, "question_id": 54450577, "link": "https://stackoverflow.com/questions/54450577/when-i-initialize-fire-base-authentication-to-my-class-the-app-stop/54455878#54455878", "title": "when I initialize Fire base authentication to my class the app stop", "body": "<p>You are using old versions for Firebase dependencies and you are missing the Google services plugin. To solve this, please use the following dependencies:</p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support:design:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.support:support-v4:28.0.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    implementation 'com.google.firebase:firebase-auth:16.1.0'\n    implementation 'com.google.firebase:firebase-database:16.0.6'\n    implementation 'com.google.firebase:firebase-storage:16.0.5'\n    implementation 'com.google.firebase:firebase-config:16.1.3'\n    implementation 'com.google.android.gms:play-services-auth:16.0.1'\n}\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>Please also add the following dependency which is now mandatory:</p>\n\n<pre><code>implementation 'com.google.firebase:firebase-core:16.0.6'\n</code></pre>\n\n<blockquote>\n  <p>Your app gradle file now has to explicitly list <code>com.google.firebase:firebase-core</code> as a dependency for Firebase services to work as expected.</p>\n</blockquote>\n\n<p>In your top level <code>build.gradle</code> file please be sure to have the latest version of Google Service plugin:</p>\n\n<pre><code>classpath 'com.google.gms:google-services:4.2.0'\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10587383, "user_type": "registered", "profile_image": "https://graph.facebook.com/491146858054623/picture?type=large", "display_name": "Abdulrahman Alslahi", "link": "https://stackoverflow.com/users/10587383/abdulrahman-alslahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549067730, "creation_date": 1548887598, "last_edit_date": 1549067730, "question_id": 54450577, "link": "https://stackoverflow.com/questions/54450577/when-i-initialize-fire-base-authentication-to-my-class-the-app-stop", "title": "when I initialize Fire base authentication to my class the app stop", "body": "<p>When I initialize Fire base authentication to my class the app stop<br>\nmaybe thw problem in the gradle but a tray every thing</p>\n\n<p>this is my code </p>\n\n<pre><code>class Test : AppCompatActivity() {\n\nlateinit var mAuth: FirebaseAuth\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_test)\n\n    mAuth = FirebaseAuth.getInstance()\n\n}\n}    \n</code></pre>\n\n<p>and this is my gradle</p>\n\n<pre><code>dependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation 'com.android.support:appcompat-v7:28.0.0'\nimplementation 'com.android.support:design:28.0.0'\nimplementation 'com.android.support.constraint:constraint-layout:1.1.3'\nimplementation 'com.android.support:support-v4:28.0.0'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'com.android.support.test:runner:1.0.2'\nandroidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\nimplementation 'com.google.firebase:firebase-auth:16.0.1'\nimplementation 'com.google.firebase:firebase-database:16.0.1'\nimplementation 'com.google.firebase:firebase-storage:16.0.1'\nimplementation 'com.google.firebase:firebase-config:16.0.0'\nimplementation 'com.google.android.gms:play-services-auth:16.0.0'\n\n}\n</code></pre>\n"}, {"tags": ["android", "animation", "kotlin"], "comments": [{"owner": {"reputation": 1967, "user_id": 406290, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/BwcOg.jpg?s=128&g=1", "display_name": "Kevin Hooke", "link": "https://stackoverflow.com/users/406290/kevin-hooke"}, "edited": false, "score": 0, "creation_date": 1548896705, "post_id": 54450406, "comment_id": 95712215, "body": "Can you share what code you have so far, and point to a specific part where you have an issue? This question is currently too generic - see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1250, "user_id": 3808179, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/1657904593/picture?type=large", "display_name": "kristyna", "link": "https://stackoverflow.com/users/3808179/kristyna"}, "is_accepted": true, "score": 0, "last_activity_date": 1548893605, "creation_date": 1548893605, "answer_id": 54451540, "question_id": 54450406, "link": "https://stackoverflow.com/questions/54450406/android-visual-hints-for-the-user/54451540#54451540", "title": "Android: visual hints for the user", "body": "<p>For the pulsing hint you can try to create a hint icon, put a drawable (that you want to animate) below the hint and then just animate it. So something like this would work:</p>\n\n<p>Create a layout with two ImageViews</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/pulse\"\n        android:layout_width=\"50dp\"\n        android:layout_height=\"50dp\"\n        android:src=\"@drawable/grad_pulse\"\n        android:layout_centerInParent=\"true\"/&gt;\n\n    &lt;ImageView\n        android:id=\"@+id/hint\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/ic_info\"\n        android:layout_centerInParent=\"true\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Create desired animation (pulse for example):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;scale xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:duration=\"1000\"\n    android:fromXScale=\"1\"\n    android:fromYScale=\"1\"\n    android:pivotX=\"50%\"\n    android:pivotY=\"50%\"\n    android:repeatCount=\"2\"\n    android:repeatMode=\"reverse\"\n    android:toXScale=\"0.5\"\n    android:toYScale=\"0.5\" /&gt;\n</code></pre>\n\n<p>And then connect all of it in MainActivity.kt</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        animate()\n    }\n\n    private fun animate() {\n        val pulse = findViewById&lt;ImageView&gt;(R.id.pulse)\n        val anim = AnimationUtils.loadAnimation(this, R.anim.pulse)\n        anim.repeatCount = Animation.INFINITE\n        pulse.startAnimation(anim)\n    }\n\n}\n</code></pre>\n\n<p>If you want just the image itself to pulse, you can just use one ImageView and scale the icon itself.</p>\n\n<blockquote>\n  <p>how to check if it's the first time the user has visited the fragment?</p>\n</blockquote>\n\n<p>You can use SharedPreferences. Create a key/value pair that will be set to false by default. If it is false you know it is the first time user opened your app. If that's the case just change the value to true - next time user will enter your fragment the value will be set to true, which means he has been there before.</p>\n\n<p>You can use this <a href=\"https://stackoverflow.com/questions/7217578/check-if-application-is-on-its-first-run\">answer as an inspiration</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10992872, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iQTiIea1OjU/AAAAAAAAAAI/AAAAAAAAAOA/F5gIkDU8e6A/photo.jpg?sz=128", "display_name": "swapdatname", "link": "https://stackoverflow.com/users/10992872/swapdatname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54451540, "answer_count": 1, "score": -1, "last_activity_date": 1548893605, "creation_date": 1548886647, "question_id": 54450406, "link": "https://stackoverflow.com/questions/54450406/android-visual-hints-for-the-user", "title": "Android: visual hints for the user", "body": "<p>My task is to show some on-screen help for users when certain fragment is displayed to them. Specifically, I want to add a pulsating hover (a drawable) over an ImageView to show that it's clickable.</p>\n\n<p>So what is the most optimal way to do that? And in particular, how to check if it's the first time the user has visited the fragment? </p>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-view-invalidate"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1549197560, "post_id": 54449805, "comment_id": 95809815, "body": "Calling a <code>textView.setText(newText)</code> <i>should and does</i> invoke <code>invalidate()</code> on its own (possibly also <code>requestLayout()</code> in certain cases which invokes <code>invalidate()</code>), so you shouldn&#39;t need to manually call <code>postInvalidate()</code> unless you are custom-rendering with a Canvas."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1549202983, "post_id": 54449805, "comment_id": 95811298, "body": "@EpicPandaForce well, my fragments apparently didn&#39;t get the memo."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1549207468, "post_id": 54449805, "comment_id": 95812512, "body": "I think they are not getting <code>setUserVisibilityHint</code>."}, {"owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1549208192, "post_id": 54449805, "comment_id": 95812717, "body": "@EpicPandaForce Yes they are ... otherwise there would never BE a toast at all."}], "owner": {"reputation": 6181, "user_id": 3322533, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/cbbd1b40887d19bc0c8fdd5ef42a05ed?s=128&d=identicon&r=PG", "display_name": "User1291", "link": "https://stackoverflow.com/users/3322533/user1291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548883658, "creation_date": 1548883658, "question_id": 54449805, "link": "https://stackoverflow.com/questions/54449805/how-do-you-invalidate-a-fragment-view", "title": "HOW do you invalidate a fragment view?", "body": "<p>Alright, so I have a fragment that displays user account information.</p>\n\n<p>The way this works is it issues a request that may or may not touch the server, depending on what information is already cached.</p>\n\n<p>When the information is available, there's a callback in which the fragment will update its textfields.</p>\n\n<p>At that point, however, the UI needs be refreshed, so I'd like to issue some kind of <code>invalidate</code>...</p>\n\n<p>Except that does perfectly nothing.</p>\n\n<p>First, I noticed that <code>this.view</code> returns <code>null</code>. So rather than rely on that, I store the view I create in <code>onCreateView</code> explicitly.</p>\n\n<p>Then after I updated the textfields, I call <code>fragmentView.postInvalidate()</code> ... which does nothing.</p>\n\n<p>I also tried <code>doAsync { uiThread { fragmentView.invalidate() } }</code> ... which also does nothing.</p>\n\n<p>Then I found <a href=\"https://stackoverflow.com/a/41279916/3322533\">this answer</a> and tried</p>\n\n<pre><code>    val fragment = this\n    doAsync { uiThread {\n        activity!!.supportFragmentManager.beginTransaction().detach(fragment).commit()\n        activity!!.supportFragmentManager.beginTransaction().attach(fragment).commit()\n    }}\n</code></pre>\n\n<p>... which is even WORSE than not doing anything, because the other two ways will at least update the view if you switch to a different fragment and back, whereas this will perpetually refuse to display any useful information.</p>\n\n<p>So maybe I can \"cheat\" by delaying the call to <code>super::setUserVisibleHint</code> until after I updated the values ... no, I can't.</p>\n\n<p>What I <strong><em>can</em></strong> do, though, is I can force a redraw of the ui by toasting something. So that's what I am currently doing. But still, that can't be the solution.</p>\n\n<p>How do I get a proper ui refresh?</p>\n\n<p>Oh, and this is an <code>android.support.v4.app.Fragment</code> and I'm using an <code>android.support.v4.app.FragmentStatePagerAdapter</code> to switch between fragments, if that matters.</p>\n\n<p>Full fragment code:</p>\n\n<pre><code>class AccountFragment : Fragment() {\n    lateinit var fragmentView: View\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {\n        super.onCreateView(inflater, container, savedInstanceState)\n        val view = inflater.inflate(R.layout.fragment_account, container, false)\n        /*for some reason [this.view] remains null when we later try to use it, so we're explicitly storing a reference*/\n        fragmentView = view\n        return view\n    }\n\n    override fun setUserVisibleHint(isVisibleToUser: Boolean) {\n        if(isVisibleToUser)setAccountInformation()\n        super.setUserVisibleHint(isVisibleToUser)\n    }\n\n    private fun setAccountInformation(){\n        val um = DataConfig.getUserManager()\n        val au = um.getActiveUser()\n\n        um.getUserInfo(au, Callback(\n                onResponse = {when(it){\n                    is SuccessfulAccountGetResponse -&gt; {\n                        val info = it.result\n\n                        usernameText.text = info.name\n                        uuidText.text = info.uuid\n                        adminText.text = if(info.isAdmin) \"YES\" else \"NO\"\n\n                        createdText.text = info.created.toString()\n                        lastLoginText.text = info.lastLogin?.toString() ?: \"-\"\n\n                        //now actually force the new information to show up\n                        refreshUI()\n                    }\n                    else -&gt; doAsync { uiThread{ activity?.longToast(\"could not get information\") } }\n                }},\n                onError = {doAsync { uiThread { activity?.longToast(\"error: $it\") } }}\n        ))\n    }\n\n    /** forces a refresh, making changes visible*/\n    private fun refreshUI(){\n        /*hack: force a redraw by toasting */\n        doAsync { uiThread { activity?.toast(\"updating values\") } }\n\n        //THIS does absolutely nothing: //TODO: figure out why\n//        fragmentView.postInvalidate()\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "is_accepted": false, "score": 3, "last_activity_date": 1548921291, "creation_date": 1548921291, "answer_id": 54455740, "question_id": 54449230, "link": "https://stackoverflow.com/questions/54449230/how-can-i-specify-a-generic-type-parameter-in-a-kotlin-deprecated-annotation/54455740#54455740", "title": "How can I specify a generic type parameter in a Kotlin @Deprecated annotation?", "body": "<p>It looks like I can\u2019t at the moment - proposal to make it possible <a href=\"https://youtrack.jetbrains.com/issue/KT-21195\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-21195</a></p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": true, "score": 1, "last_activity_date": 1581281478, "creation_date": 1581281478, "answer_id": 60141194, "question_id": 54449230, "link": "https://stackoverflow.com/questions/54449230/how-can-i-specify-a-generic-type-parameter-in-a-kotlin-deprecated-annotation/60141194#60141194", "title": "How can I specify a generic type parameter in a Kotlin @Deprecated annotation?", "body": "<p>This is possible now! The <code>ReplaceWith</code> intention saves generic type arguments from Kotlin plugin v1.3.40 on (see <a href=\"https://github.com/JetBrains/kotlin/blob/master/ChangeLog.md#new-features-12\" rel=\"nofollow noreferrer\">change log</a>).</p>\n"}], "owner": {"reputation": 16077, "user_id": 97777, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb95aca1c80de718bbfa01447220633b?s=128&d=identicon&r=PG", "display_name": "Duncan McGregor", "link": "https://stackoverflow.com/users/97777/duncan-mcgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 60141194, "answer_count": 2, "score": 5, "last_activity_date": 1581281478, "creation_date": 1548881012, "question_id": 54449230, "link": "https://stackoverflow.com/questions/54449230/how-can-i-specify-a-generic-type-parameter-in-a-kotlin-deprecated-annotation", "title": "How can I specify a generic type parameter in a Kotlin @Deprecated annotation?", "body": "<p>I want to rename a Kotlin type, leaving a deprecated typealias to allow existing code to compile.</p>\n\n<pre><code>typealias TestContext&lt;F&gt; = ContextBuilder&lt;F&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>@Deprecated(\"TestContext is now ContextBuilder\", \n    replaceWith = ReplaceWith(\"ContextBuilder&lt;F&gt;\"))\n</code></pre>\n\n<p>leads to <code>TextContext&lt;Unit&gt;</code> being replaced with <code>ContextBuilder&lt;F&gt;</code></p>\n\n<pre><code>@Deprecated(\"TestContext is now ContextBuilder\", \n    replaceWith = ReplaceWith(\"ContextBuilder\"))\n</code></pre>\n\n<p>leads to <code>TextContext&lt;Unit&gt;</code> being replaced with <code>ContextBuilder</code></p>\n\n<p>How can I write the replaceWith expression so that IntelliJ replaces <code>TextContext&lt;Unit&gt;</code> with <code>ContextBuilder&lt;Unit&gt;</code>?</p>\n"}, {"tags": ["javafx", "kotlin"], "comments": [{"owner": {"reputation": 67076, "user_id": 2991525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497fb92ca5e55e1eee47b1c4c7043586?s=128&d=identicon&r=PG&f=1", "display_name": "fabian", "link": "https://stackoverflow.com/users/2991525/fabian"}, "edited": false, "score": 1, "creation_date": 1548881217, "post_id": 54449082, "comment_id": 95707283, "body": "Assuming the events work the same way as in java, you should be able to consume the events for the buttons or check the event&#39;s <code>pickResult</code> is one of the <code>Button</code>s or one of their descendants."}], "answers": [{"tags": [], "owner": {"reputation": 783, "user_id": 4672864, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8b39e83fd6dbd1932b93f29f31cd1c60?s=128&d=identicon&r=PG&f=1", "display_name": "user38725", "link": "https://stackoverflow.com/users/4672864/user38725"}, "is_accepted": false, "score": 0, "last_activity_date": 1548883878, "creation_date": 1548883878, "answer_id": 54449844, "question_id": 54449082, "link": "https://stackoverflow.com/questions/54449082/javafx-dragging-undecorated-stage-fallthrough-problem/54449844#54449844", "title": "JavaFX Dragging Undecorated Stage &quot;Fallthrough&quot; Problem", "body": "<p>Checking the pickResult appears to work just fine (thanks fabian):</p>\n\n<pre><code>fun makeDraggable(stage: Stage, byNode: Node) {\n\n    val dragDelta = Delta()\n\n    var validTarget = true\n\n    byNode.setOnMousePressed { e -&gt;\n        if (stage.isFullScreen || stage.isMaximized) {\n            return@setOnMousePressed\n        }\n\n        val pickedNode = e.pickResult.intersectedNode\n\n        if (pickedNode is IconButton) {\n            validTarget = false\n            return@setOnMousePressed\n        }\n        if (pickedNode.parent is IconButton) {\n            validTarget = false\n            return@setOnMousePressed\n        }\n\n        dragDelta.x = stage.x - e.screenX\n        dragDelta.y = stage.y - e.screenY\n    }\n\n    byNode.setOnMouseReleased { e -&gt;\n        if (stage.isFullScreen || stage.isMaximized) {\n            return@setOnMouseReleased\n        }\n        validTarget = true\n    }\n\n    byNode.setOnMouseDragged { e -&gt;\n        if (stage.isFullScreen || stage.isMaximized) {\n            return@setOnMouseDragged\n        }\n\n        if (!validTarget) {\n            return@setOnMouseDragged\n        }\n\n        stage.x = e.screenX + dragDelta.x\n        stage.y = e.screenY + dragDelta.y\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 783, "user_id": 4672864, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/8b39e83fd6dbd1932b93f29f31cd1c60?s=128&d=identicon&r=PG&f=1", "display_name": "user38725", "link": "https://stackoverflow.com/users/4672864/user38725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548883878, "creation_date": 1548880406, "last_edit_date": 1548880624, "question_id": 54449082, "link": "https://stackoverflow.com/questions/54449082/javafx-dragging-undecorated-stage-fallthrough-problem", "title": "JavaFX Dragging Undecorated Stage &quot;Fallthrough&quot; Problem", "body": "<p>I have an undecorated stage, with a custom titlebar in it. This titlebar contains \"IconButtons\", which are just StackPanes holding ImageViews.</p>\n\n<p>I also use this code to make the stage draggable via the titlebar (Kotlin code):</p>\n\n<pre><code>fun makeDraggable(stage: Stage, byNode: Node) {\n\n    val dragDelta = Delta()\n\n    byNode.setOnMousePressed { e -&gt;\n        if (stage.isFullScreen || stage.isMaximized) {\n            return@setOnMousePressed\n        }\n\n        dragDelta.x = stage.x - e.screenX\n        dragDelta.y = stage.y - e.screenY\n    }\n\n    byNode.setOnMouseDragged { e -&gt;\n        if (stage.isFullScreen || stage.isMaximized) {\n            return@setOnMouseDragged\n        }\n\n        stage.x = e.screenX + dragDelta.x\n        stage.y = e.screenY + dragDelta.y\n    }\n}\n</code></pre>\n\n<p>Now, the problem is that the stage is draggable even when the mouse is over one of these \"IconButtons\". With normal JavaFX Buttons this does not seem be a problem. I'm failing to see why this is the case, and how to fix it. </p>\n"}, {"tags": ["android", "kotlin", "dependency-injection", "dagger-2", "androidx"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 13150066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4SPQE.png?s=128&g=1", "display_name": "Lheonair", "link": "https://stackoverflow.com/users/13150066/lheonair"}, "edited": false, "score": 0, "creation_date": 1605285040, "post_id": 54457234, "comment_id": 114612416, "body": "This solved my issue. Weird that Android Studio IDE didn&#39;t hint me to update the dependencies with a lint. Thanks for posting this answer!"}], "tags": [], "owner": {"reputation": 451, "user_id": 10619798, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iLdHXRnFHsM/AAAAAAAAAAI/AAAAAAAAhsQ/EYqzvzD-wWs/photo.jpg?sz=128", "display_name": "Emanuel Amiguinho", "link": "https://stackoverflow.com/users/10619798/emanuel-amiguinho"}, "is_accepted": true, "score": 28, "last_activity_date": 1551100751, "last_edit_date": 1551100751, "creation_date": 1548926742, "answer_id": 54457234, "question_id": 54447703, "link": "https://stackoverflow.com/questions/54447703/dagger-2-androidx-fragment-incompatible-types/54457234#54457234", "title": "Dagger 2 androidx fragment incompatible types", "body": "<p>Fixed this issue by updating all dagger dependencies to 2.21, was missing android-support (was still using 2.16).</p>\n\n<pre><code>implementation 'com.google.dagger:dagger:2.21'\nimplementation 'com.google.dagger:dagger-android:2.21'\nimplementation 'com.google.dagger:dagger-android-support:2.21'\nkapt \"com.google.dagger:dagger-compiler:2.21\"\nkapt \"com.google.dagger:dagger-android-processor:2.21\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 348, "user_id": 4275917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zC7XA.jpg?s=128&g=1", "display_name": "Sergi Mascar&#243;", "link": "https://stackoverflow.com/users/4275917/sergi-mascar%c3%b3"}, "is_accepted": false, "score": 0, "last_activity_date": 1604707506, "last_edit_date": 1604707506, "creation_date": 1604707162, "answer_id": 64723118, "question_id": 54447703, "link": "https://stackoverflow.com/questions/54447703/dagger-2-androidx-fragment-incompatible-types/64723118#64723118", "title": "Dagger 2 androidx fragment incompatible types", "body": "<p>I just had the same problem but with two non-Android classes: EventBus and a wrapper class around Android resources.</p>\n<p>I tried the solution proposed by Emanuel Amiguinho even it had nothing to do with android-support and it got fixed. So I tried to remove the added dependency and retry, and magically built successfully again.</p>\n<p>So I guess in my case it was some caching issue.</p>\n"}], "owner": {"reputation": 451, "user_id": 10619798, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iLdHXRnFHsM/AAAAAAAAAAI/AAAAAAAAhsQ/EYqzvzD-wWs/photo.jpg?sz=128", "display_name": "Emanuel Amiguinho", "link": "https://stackoverflow.com/users/10619798/emanuel-amiguinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2704, "favorite_count": 1, "accepted_answer_id": 54457234, "answer_count": 2, "score": 14, "last_activity_date": 1604707506, "creation_date": 1548874648, "last_edit_date": 1548876351, "question_id": 54447703, "link": "https://stackoverflow.com/questions/54447703/dagger-2-androidx-fragment-incompatible-types", "title": "Dagger 2 androidx fragment incompatible types", "body": "<p>I'm using Dagger 2.21 and when I try to do </p>\n\n<pre><code>@Module\ninternal abstract class FragmentModule {\n    @ContributesAndroidInjector\n    internal abstract fun loginFragment() : LoginFragment\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Singleton\n@Component(modules = [AndroidSupportInjectionModule::class, AppModule::class, ActivityModule::class, ViewModelBuilder::class, ViewModelModule::class, RepositoriesModule::class, ApiModule::class, FragmentModule::class])\ninterface AppComponent : AndroidInjector&lt;PhotocoApplication&gt; {\n    @Component.Builder\n    abstract class Builder : AndroidInjector.Builder&lt;PhotocoApplication&gt;()\n}\n</code></pre>\n\n<p>I get this error: </p>\n\n<blockquote>\n  <p>/app/build/generated/source/kapt/debug/com/photoco/app/injection/module/FragmentModule_LoginFragment$app_debug.java:18: error: incompatible types: Class LoginFragment cannot be converted to Class extends Fragment</p>\n</blockquote>\n\n<p>I have been searching and saw that using 2.21 and setting this gets it to work but no luck yet </p>\n\n<blockquote>\n  <p>android.useAndroidX=true ; android.enableJetifier=true</p>\n</blockquote>\n\n<p>LoginFragment extends:</p>\n\n<blockquote>\n  <p>dagger.android.support.DaggerFragment()</p>\n</blockquote>\n\n<p>With all this setup can't get it to build, am I missing something here? I can make it work with Activities using DaggerActivity but not with Fragments.</p>\n\n<p>PhotocoApplication extends dagger.android.support.DaggerApplication</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["android", "android-studio", "kotlin", "kotlin-android-extensions", "firebase-mlkit"], "answers": [{"tags": [], "owner": {"reputation": 153906, "user_id": 1676363, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44dac57d3bb65805bc3df4409d019c83?s=128&d=identicon&r=PG", "display_name": "ianhanniballake", "link": "https://stackoverflow.com/users/1676363/ianhanniballake"}, "is_accepted": true, "score": 4, "last_activity_date": 1548872046, "creation_date": 1548872046, "answer_id": 54447002, "question_id": 54446908, "link": "https://stackoverflow.com/questions/54446908/how-to-solve-unresolved-reference-arch-from-import-android-arch-lifecycle/54447002#54447002", "title": "How to solve &#39;Unresolved reference: arch&#39; from &quot;import android.arch.lifecycle&quot;?", "body": "<p>You're using <code>androidx</code> artifacts, therefore the classes that used to be in <code>android.arch.lifecycle</code> are now in <code>androidx.lifecycle</code> as per the <a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"nofollow noreferrer\">Migrating to AndroidX documentation</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10955000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NOIiWIM9INw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPXyzaxsETCMbs-vDolub8XcKY8rw/mo/photo.jpg?sz=128", "display_name": "susanins1000", "link": "https://stackoverflow.com/users/10955000/susanins1000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "accepted_answer_id": 54447002, "answer_count": 1, "score": 2, "last_activity_date": 1548872046, "creation_date": 1548871643, "question_id": 54446908, "link": "https://stackoverflow.com/questions/54446908/how-to-solve-unresolved-reference-arch-from-import-android-arch-lifecycle", "title": "How to solve &#39;Unresolved reference: arch&#39; from &quot;import android.arch.lifecycle&quot;?", "body": "<p>In a Kotlin file, I have an 'Unresolved reference: arch'.</p>\n\n<pre><code>import android.arch.lifecycle.Lifecycle\nimport android.arch.lifecycle.LifecycleObserver\nimport android.arch.lifecycle.OnLifecycleEvent\n</code></pre>\n\n<p>I have no experience in programming but I wanted to get started and learn by doing.\nI am trying to replicate an Android app from this article: \n<a href=\"https://heartbeat.fritz.ai/creating-an-android-app-with-snapchat-style-filters-in-7-steps-using-firebases-ml-kit-e79946e99688\" rel=\"nofollow noreferrer\">https://heartbeat.fritz.ai/creating-an-android-app-with-snapchat-style-filters-in-7-steps-using-firebases-ml-kit-e79946e99688</a></p>\n\n<p>I have Android Studio 3.3, Kotlin compiler 1.3 and Gradle 4.10.1.</p>\n\n<p>I have read several threads with similar problems and I have tried:\n1) Clean, Rebuild, Sync with Gradle\n2) Restart computer\n3) Invalidate caches and restart AS\n4) Delete .idea and restart the project\n5) Look for any discrepancies in plugins but to my best of knowledge I have not found them, everything is in the latest stable version.</p>\n\n<p>My project build.gradle:</p>\n\n<pre><code>buildscript {\next.kotlin_version = '1.3.20'\nrepositories {\n    google()\n    jcenter()\n\n}\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.3.0'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    classpath 'com.google.gms:google-services:4.2.0'\n</code></pre>\n\n<p>My app build.gradle:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.zqc.ml.nautilus\"\n        minSdkVersion 21\n        targetSdkVersion 24\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    productFlavors {\n    }\n}\ndependencies {\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n    implementation 'com.google.firebase:firebase-ml-vision:18.0.2'\n    implementation 'android.arch.lifecycle:extensions:1.1.1'\n    implementation 'com.otaliastudios:cameraview:1.5.1'\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'androidx.appcompat:appcompat:1.1.0-alpha01'\n    implementation 'androidx.core:core-ktx:1.1.0-alpha03'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\n}\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>It should run properly but instead build is failed</p>\n\n<pre><code>Execution failed for task ':app:compileDebugKotlin'.\n</code></pre>\n\n<p>Log points to this 'Unresolved reference: arch' and <em>nothing else</em>.</p>\n"}, {"tags": ["android", "kotlin", "androidx"], "answers": [{"tags": [], "owner": {"reputation": 526, "user_id": 10033423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782e2d09356efd094876bb9d5f7e9838?s=128&d=identicon&r=PG&f=1", "display_name": "End User", "link": "https://stackoverflow.com/users/10033423/end-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1548873883, "last_edit_date": 1548873883, "creation_date": 1548873539, "answer_id": 54447392, "question_id": 54446441, "link": "https://stackoverflow.com/questions/54446441/toolbar-click-listener-is-not-applying/54447392#54447392", "title": "Toolbar click listener is not applying", "body": "<pre><code>(activity as AppCompatActivity).setSupportActionBar(toolbar)\n(activity as AppCompatActivity).supportActionBar?.setDisplayHomeAsUpEnabled(true)\n</code></pre>\n\n<p>then in your fragment </p>\n\n<p>override <code>onOptionsItemSelected</code> </p>\n\n<pre><code> override fun onOptionsItemSelected(item: MenuItem?): Boolean {\n\n            when (item?.itemId) {\n\n                android.R.id.home -&gt; {\n                 activity?.onBackPressed()\n                    }\n\n        }\n     return true\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 374, "user_id": 8476690, "user_type": "registered", "profile_image": "https://graph.facebook.com/1760264017320416/picture?type=large", "display_name": "Mohamed Mo&#39;nes", "link": "https://stackoverflow.com/users/8476690/mohamed-mones"}, "is_accepted": false, "score": 0, "last_activity_date": 1548876848, "creation_date": 1548876848, "answer_id": 54448224, "question_id": 54446441, "link": "https://stackoverflow.com/questions/54446441/toolbar-click-listener-is-not-applying/54448224#54448224", "title": "Toolbar click listener is not applying", "body": "<p>Add the toolbar to your fragment xml \nAnd try this code in your onCreateView</p>\n\n<p><code>Toolbar toolbar = view.findViewById(R.id.toolbar); toolbar.setNavigationIcon(R.drawable.ic_back_button); toolbar.setNavigationOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { getActivity().onBackPressed(); } });</code> </p>\n"}, {"tags": [], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "is_accepted": true, "score": 0, "last_activity_date": 1552130270, "last_edit_date": 1552130270, "creation_date": 1549019588, "answer_id": 54478355, "question_id": 54446441, "link": "https://stackoverflow.com/questions/54446441/toolbar-click-listener-is-not-applying/54478355#54478355", "title": "Toolbar click listener is not applying", "body": "<p>Toolbar should not be :</p>\n\n<pre><code>&lt;androidx.appcompat.widget.Toolbar\n                        android:id=\"@+id/toolbar\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:minHeight=\"?attr/actionBarSize\"\n                        app:layout_collapseMode=\"pin\"\n                        app:theme=\"@style/Toolbar\"/&gt;\n</code></pre>\n\n<p>Rather it should be : </p>\n\n<pre><code>&lt;androidx.appcompat.widget.Toolbar\n                        android:id=\"@+id/toolbar\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"?attr/actionBarSize\"\n                        app:layout_collapseMode=\"pin\"\n                        app:theme=\"@style/Toolbar\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 54478355, "answer_count": 3, "score": 0, "last_activity_date": 1552130270, "creation_date": 1548870009, "last_edit_date": 1549019457, "question_id": 54446441, "link": "https://stackoverflow.com/questions/54446441/toolbar-click-listener-is-not-applying", "title": "Toolbar click listener is not applying", "body": "<p>I have following code in my Fragment to setup toolbar :</p>\n\n<pre><code>with(root) {\n            with(activity as AppCompatActivity) {\n                setupActionBar(toolbar) {\n                    setDisplayHomeAsUpEnabled(true)\n                    setDisplayShowHomeEnabled(true)\n                }\n            }\n            toolbar.setNavigationOnClickListener { activity?.finish() }\n        }\n</code></pre>\n\n<p>Here is my setupActionBar method :</p>\n\n<pre><code>fun AppCompatActivity.setupActionBar(toolbar : Toolbar, action: ActionBar.() -&gt; Unit) {\n    setSupportActionBar(toolbar)\n    supportActionBar?.run {\n        action()\n    }\n}\n</code></pre>\n\n<p>And toolbar in my layout : </p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        tools:context=\".ui.detail.DetailFragment\"&gt;\n\n    &lt;data&gt;\n        &lt;variable\n                name=\"artist\"\n                type=\"com.sample.android.lastfm.model.LastFmArtist\"/&gt;\n    &lt;/data&gt;\n\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n        &lt;com.google.android.material.appbar.AppBarLayout\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"&gt;\n\n            &lt;com.google.android.material.appbar.CollapsingToolbarLayout\n                    android:layout_width=\"match_parent\"\n                    android:layout_height=\"300dp\"\n                    app:collapsedTitleTextAppearance=\"@style/CollapsedToolbar\"\n                    app:contentScrim=\"?attr/colorPrimary\"\n                    app:expandedTitleTextAppearance=\"@style/ExpandedToolbar\"\n                    app:layout_scrollFlags=\"scroll|exitUntilCollapsed|snap\"\n                    app:title=\"@{artist.name}\"&gt;\n\n                &lt;ImageView\n                        android:id=\"@+id/movie_poster\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"match_parent\"\n                        android:scaleType=\"centerCrop\"\n                        app:layout_collapseMode=\"parallax\"\n                        app:imageUrl=\"@{artist.images}\"\n                        tools:ignore=\"contentDescription\"/&gt;\n\n                &lt;androidx.appcompat.widget.Toolbar\n                        android:id=\"@+id/toolbar\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"wrap_content\"\n                        android:minHeight=\"?attr/actionBarSize\"\n                        app:layout_collapseMode=\"pin\"\n                        app:theme=\"@style/Toolbar\"/&gt;\n\n                &lt;com.google.android.material.tabs.TabLayout\n                        android:id=\"@+id/tabLayout\"\n                        android:layout_width=\"match_parent\"\n                        android:layout_height=\"@dimen/custom_tab_layout_height\"\n                        app:tabGravity=\"fill\"\n                        app:tabIndicatorColor=\"@color/colorAccent\"\n                        app:tabIndicatorHeight=\"4dp\"\n                        app:tabMode=\"fixed\"/&gt;\n\n            &lt;/com.google.android.material.appbar.CollapsingToolbarLayout&gt;\n\n        &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n        &lt;androidx.viewpager.widget.ViewPager\n                android:id=\"@+id/viewpager\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"match_parent\"\n                app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"/&gt;\n\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n&lt;/layout&gt;\n</code></pre>\n\n<p>When I click on toolbar, it does not navigate me back to previous screen. It seems that it is not clickable.</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1548930589, "post_id": 54445135, "comment_id": 95724903, "body": "Are your suspend functions returning a Deferred?"}, {"owner": {"reputation": 1341, "user_id": 2033800, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2b0936d3f063bc16135077cf51461b7b?s=128&d=identicon&r=PG", "display_name": "nicholasnet", "link": "https://stackoverflow.com/users/2033800/nicholasnet"}, "reply_to_user": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "edited": false, "score": 0, "creation_date": 1548936444, "post_id": 54445135, "comment_id": 95728392, "body": "No I am not returning deferred"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1548940505, "post_id": 54445135, "comment_id": 95730859, "body": "Just disable the warning. It doesn&#39;t apply to you. You might also open a Kotlin issue because it shouldn&#39;t issue this warning for a generic type that just happens to be <code>Deferred</code> in a specific case."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 13319449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd912c467af107d0c68a6efbac64e90?s=128&d=identicon&r=PG&f=1", "display_name": "RayWang", "link": "https://stackoverflow.com/users/13319449/raywang"}, "edited": false, "score": 0, "creation_date": 1586943878, "post_id": 61225662, "comment_id": 108312252, "body": "We name such functions with the &quot;\u2026Async&quot; suffix to highlight the fact that they only start asynchronous computation and one needs to use the resulting deferred value to get the result."}], "tags": [], "owner": {"reputation": 21, "user_id": 13319449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd912c467af107d0c68a6efbac64e90?s=128&d=identicon&r=PG&f=1", "display_name": "RayWang", "link": "https://stackoverflow.com/users/13319449/raywang"}, "is_accepted": false, "score": 2, "last_activity_date": 1586943757, "creation_date": 1586943757, "answer_id": 61225662, "question_id": 54445135, "link": "https://stackoverflow.com/questions/54445135/function-returning-deferred-with-a-name-that-does-not-end-with-async/61225662#61225662", "title": "Function returning Deferred with a name that does not end with async", "body": "<p>function <em>getSite()</em> renamed to <em>getSiteAsync()</em>\uff0cOthers functions are modified in this way.</p>\n"}], "owner": {"reputation": 1341, "user_id": 2033800, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2b0936d3f063bc16135077cf51461b7b?s=128&d=identicon&r=PG", "display_name": "nicholasnet", "link": "https://stackoverflow.com/users/2033800/nicholasnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1586943757, "creation_date": 1548865604, "last_edit_date": 1548936593, "question_id": 54445135, "link": "https://stackoverflow.com/questions/54445135/function-returning-deferred-with-a-name-that-does-not-end-with-async", "title": "Function returning Deferred with a name that does not end with async", "body": "<p>I am trying to learn Kotlin coroutines recently I have noticed that in case of map that returns bunch of <code>async</code> IDE is displaying message saying that <code>Function returning Deferred with a name that does not end with async</code>. This is the code I have </p>\n\n<pre><code>runBlocking {\n    try {\n        val siteDeferred = async { getSite(order) }\n        // Place where I get warning-----------| (Function returning Deferred with a name that does not end with Async)\n        //                                     v\n        val orderLineDeferred = order.line.map { async { getOrderDetail(it) } }\n\n        // Place where I get warning-------------------| (Function returning Deferred with a name that does not end with Async)\n        //                                             v\n        val orderLineProductsDeferred = order.line.map { async { getOrderProductInformation(it.productId) } }\n\n        val site = siteDeferred.await()\n        val orderLine = orderLineDeferred.awaitAll()\n        val orderLineProducts = orderLineProductsDeferred.awaitAll()\n    } catch (e: Throwable) {\n        throw Exception(e.message)\n    }\n}\n\nprivate suspend getOrderDetail(OrderLine orderLine): OrderDetail...\nprivate suspend getSite(Order order): Site ...\nprivate suspend getOrderProductInformation(String productId): Product ...\n</code></pre>\n\n<p>Am I missing anything here. Furthermore, I would like to know whether this is the right way to do exception handling or not and is there a way to clean up <code>try</code> block so that I can get the value directly even if that means I will have to use <code>async</code> in other methods. </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3473, "user_id": 3821287, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/144b17c1457bed92e26e8b1b4ba1425f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas P.", "link": "https://stackoverflow.com/users/3821287/lucas-p"}, "edited": false, "score": 0, "creation_date": 1548937438, "post_id": 54445257, "comment_id": 95728965, "body": "Thank you so much. With your detailed explanation it makes sense! I&#39;ve ended up using FlatMap. I&#39;ll have to dig into the functional stuff a little bit more"}, {"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "reply_to_user": {"reputation": 3473, "user_id": 3821287, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/144b17c1457bed92e26e8b1b4ba1425f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas P.", "link": "https://stackoverflow.com/users/3821287/lucas-p"}, "edited": false, "score": 0, "creation_date": 1548937835, "post_id": 54445257, "comment_id": 95729206, "body": "you are welcome... and you probably already did: <code>reduce</code>/<code>fold</code> will come in handy in (a bit) more complex scenarios... now for your specific scenario <code>flatMap</code> suffices..."}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 5, "last_activity_date": 1548867613, "last_edit_date": 1548867613, "creation_date": 1548865971, "answer_id": 54445257, "question_id": 54445072, "link": "https://stackoverflow.com/questions/54445072/kotlin-how-can-i-reduce-child-arrays-into-a-single-array/54445257#54445257", "title": "Kotlin: How can I reduce child arrays into a single array?", "body": "<p><code>addAll</code> returns a <code>boolean</code>, but the return value of the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/fold.html\" rel=\"nofollow noreferrer\"><code>fold</code></a>-operation should be of same type as the given initial object (in this case <code>ArrayList</code>).\nYou can solve that one easily by just adding <code>result</code> after your <code>addAll</code>-statement, e.g.:</p>\n\n<pre><code>result.addAll(schedule.events)\nresult // this is now the actual return value of the fold-operation\n</code></pre>\n\n<p>Alternatively just use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"nofollow noreferrer\"><code>apply</code></a> or similar instead:</p>\n\n<pre><code>result.apply {\n  addAll(schedule.events)\n} // result is the return value then\n</code></pre>\n\n<p>Note that you can actually simplify altogether using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/flat-map.html\" rel=\"nofollow noreferrer\"><code>flatMap</code></a> to just (side-note: if you use this approach the <code>matches</code> are evaluated only once of course, but <code>flatMap</code> is the star here anyway ;-))):</p>\n\n<pre><code>val matches = timeSlots.flatMap { it.events } // this is a new list! (note, if you do several mappings in a row, you may want to use timeSlots.asSequence().flatMap { }.map { }.toList() / or .toMutableList() instead\n</code></pre>\n\n<p>Alternatively if you really require the <code>matches</code> to be of type <code>ArrayList</code>, use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/flat-map-to.html\" rel=\"nofollow noreferrer\"><code>flatMapTo</code></a> instead:</p>\n\n<pre><code>val matches = timeSlots.flatMapTo(ArrayList()) { it.events }\n</code></pre>\n\n<p>You can of course keep the <code>get()</code> if you must, or just move the getting of the matches to its own function, e.g.:</p>\n\n<pre><code>fun getMatches() = timeSlots.flatMapTo(ArrayList()) { it.events }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3473, "user_id": 3821287, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/144b17c1457bed92e26e8b1b4ba1425f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas P.", "link": "https://stackoverflow.com/users/3821287/lucas-p"}, "edited": false, "score": 0, "creation_date": 1548937496, "post_id": 54445487, "comment_id": 95729002, "body": "You are correct, not crazy, and I thank you very much! I&#39;ve accepted Roland&#39;s answer since it was more detailed."}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 4, "last_activity_date": 1548866692, "creation_date": 1548866692, "answer_id": 54445487, "question_id": 54445072, "link": "https://stackoverflow.com/questions/54445072/kotlin-how-can-i-reduce-child-arrays-into-a-single-array/54445487#54445487", "title": "Kotlin: How can I reduce child arrays into a single array?", "body": "<p>Am I crazy, or can't you just replace the code with</p>\n\n<pre><code>val matches: List&lt;TVMatch&gt;\n    get() = timeSlots.flatMap { schedule -&gt; schedule.events }\n</code></pre>\n\n<p>?</p>\n"}], "owner": {"reputation": 3473, "user_id": 3821287, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/144b17c1457bed92e26e8b1b4ba1425f?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas P.", "link": "https://stackoverflow.com/users/3821287/lucas-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 54445257, "answer_count": 2, "score": 1, "last_activity_date": 1548867613, "creation_date": 1548865421, "question_id": 54445072, "link": "https://stackoverflow.com/questions/54445072/kotlin-how-can-i-reduce-child-arrays-into-a-single-array", "title": "Kotlin: How can I reduce child arrays into a single array?", "body": "<p>I have a pice of code in Swift that reduces a list of <code>TVSchedule</code> objects into an array of <code>TVMatch</code> pobjects. Each TVSchedule, has a property called events, that is a list of <code>TVMatch</code>es.</p>\n\n<p>The code in swift is the following:</p>\n\n<pre><code>var matches: [TVMatch] {\n    let slots = timeSlots.reduce(into: [TVMatch]()) { (result, schedule) in\n        result.append(contentsOf: schedule.events)\n    }\n    return slots\n}\n</code></pre>\n\n<p>I'm trying to do the same reduce in Kotlin and the code I have is the following:</p>\n\n<pre><code>val matches: ArrayList&lt;TVMatch&gt;\n    get() {\n        val slots = timeSlots.fold(arrayListOf&lt;TVMatch&gt;()) { result, schedule -&gt;\n            result.addAll(schedule.events)\n        }\n        return slots\n    }\n</code></pre>\n\n<p>However, the Kotlin code gives me a type error, and does not compile. What is the problem here?</p>\n"}, {"tags": ["android", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 3054, "user_id": 5428997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25a6eccacabcb4c72340589ba414d56?s=128&d=identicon&r=PG", "display_name": "Seven", "link": "https://stackoverflow.com/users/5428997/seven"}, "edited": false, "score": 0, "creation_date": 1558368320, "post_id": 54445006, "comment_id": 99069787, "body": "I like your approach as I also have some parts of my app not specifically tied to a particular ViewModel/Activity/Fragment. Don&#39;t forget to cancel the <code>applicationJob</code> in <code>onTerminate</code>."}, {"owner": {"reputation": 65, "user_id": 5187568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14a9c1f833c99c83a9023082c06260c?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/5187568/jay"}, "reply_to_user": {"reputation": 3054, "user_id": 5428997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25a6eccacabcb4c72340589ba414d56?s=128&d=identicon&r=PG", "display_name": "Seven", "link": "https://stackoverflow.com/users/5428997/seven"}, "edited": false, "score": 0, "creation_date": 1590376032, "post_id": 54445006, "comment_id": 109647701, "body": "@Seven onTerminate() is not called in the production device."}], "owner": {"reputation": 1012, "user_id": 3603386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjd5.jpg?s=128&g=1", "display_name": "Simone", "link": "https://stackoverflow.com/users/3603386/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1548865196, "creation_date": 1548865196, "question_id": 54445006, "link": "https://stackoverflow.com/questions/54445006/kotlin-define-a-coroutine-scope-in-app-class", "title": "Kotlin: define a coroutine scope in App class", "body": "<p>Is it a good practice to declare a coroutine scope inside the <code>App</code> class instead of using a Globascope?</p>\n\n<pre><code>class App : Application() {\n\n    val applicationJob = Job()\n\n    companion object {\n        lateinit var instance: App\n            private set\n\n        lateinit var appDefaultScope: CoroutineScope\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        instance = this@App\n        appDefaultScope = CoroutineScope(Dispatchers.Default + applicationJob)\n    }\n\n}\n</code></pre>\n\n<p>Here I defined a variable <code>appDefaultScope</code> and initialized it in the App's <code>onCreate</code></p>\n\n<p>So anywhere in my code I could always do:</p>\n\n<pre><code>App.appDefaultScope.launch {\n   // some operations\n}\n</code></pre>\n\n<p>The main difference with a GlobalScope that I see is that here I can always cancel the job and shut down all potentially stuck coroutines.</p>\n\n<p><strong>Are there are better alternatives to this?</strong></p>\n\n<p>The reason is that i have some <code>object</code> functions that use coroutines and are not called from an activity (then I cannot provide them with a scope defined inside the activity) but need a scope for their operations.\nAn example of such object function is a Log that writes on a local database that can be called almost everywhere in the App.</p>\n"}, {"tags": ["regex", "kotlin", "stringbuilder"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 10907345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980e913f4fe5054f7a09e4d684e2be34?s=128&d=identicon&r=PG&f=1", "display_name": "rost", "link": "https://stackoverflow.com/users/10907345/rost"}, "edited": false, "score": 0, "creation_date": 1548867320, "post_id": 54445224, "comment_id": 95700527, "body": "This is not what i need. I need the value to change only at the letter after <code>klmn</code>. Like in my pattern <code>&quot;([klmn][aei])&quot;</code>. And then each <code>aei</code> symbol was replaced with the corresponding one in the map <code>val validChars = mapOf(&#39;a&#39; to &#39;o&#39;, &#39;e&#39; to &#39;u&#39;, &#39;i&#39; to &#39;y&#39;)</code>"}], "tags": [], "owner": {"reputation": 114599, "user_id": 10498828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1360dd652f1e970ba098d1d5b63c14d?s=128&d=identicon&r=PG&f=1", "display_name": "forpas", "link": "https://stackoverflow.com/users/10498828/forpas"}, "is_accepted": false, "score": 1, "last_activity_date": 1548868283, "last_edit_date": 1548868283, "creation_date": 1548865883, "answer_id": 54445224, "question_id": 54444757, "link": "https://stackoverflow.com/questions/54444757/how-to-change-different-substrings-in-a-string/54445224#54445224", "title": "How to change different substrings in a string?", "body": "<p>Without any regex:</p>\n\n<pre><code>val validChars = mapOf('a' to 'o', 'e' to 'u', 'i' to 'y')\nval chars = validChars.plus(validChars.map { it.key.toUpperCase() to it.value.toUpperCase() }.toMap())\n\nvar pattern = \"klmn\"\npattern = pattern.plus(pattern.toUpperCase())\n\nval str = \"kotlIn is a functional programming Language\"\nval result = str.mapIndexed { i, c -&gt;\n    if (i &gt; 0) { if (pattern.contains(str[i -1])) chars.getOrDefault(c, c) else c } else c\n}.joinToString(\"\")\nprintln(result)\n</code></pre>\n\n<p>will print:</p>\n\n<blockquote>\n  <p>kotlYn is a functionol programmyng Longuage</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 1, "last_activity_date": 1548882082, "creation_date": 1548882082, "answer_id": 54449470, "question_id": 54444757, "link": "https://stackoverflow.com/questions/54444757/how-to-change-different-substrings-in-a-string/54449470#54449470", "title": "How to change different substrings in a string?", "body": "<p>Try this.</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val str = \"kotlIn is a functional programming Language\"\n    val validChars = mapOf(\"a\" to \"o\", \"e\" to \"u\", \"i\" to \"y\" )\n    val charsRegex = \"(?=(.))([klmn][aei])(?&lt;=(.))\".toRegex(setOf(RegexOption.IGNORE_CASE))\n    val found = charsRegex.findAll(str)\n    var newStr= str\n    found.forEach { f -&gt;\n        val m = f.value.toLowerCase()\n        val idx = f.range\n        val k = m.substring(1)\n        val repStr = m.substring(0,1) + validChars.get(k)?.toUpperCase()\n        newStr= newStr.replaceRange(idx,repStr)\n       // println(\"$m found at indexes: $idx  ${validChars.get(k)} ${newStr}\" )\n     }\n    println( \"NewStr = ${newStr}\")\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>NewStr = kotlYn is a functionOl programmYng lOnguage\n</code></pre>\n\n<p>PS: I'm not that good at Kotlin, but I think you can tweak it a little to get the accurate results.</p>\n"}, {"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1548890070, "creation_date": 1548890070, "answer_id": 54451002, "question_id": 54444757, "link": "https://stackoverflow.com/questions/54444757/how-to-change-different-substrings-in-a-string/54451002#54451002", "title": "How to change different substrings in a string?", "body": "<p>Another idiomatic solution would be to transform the matched string using the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"nofollow noreferrer\"><code>replace(...) { ... }</code></a> overload that accepts a lambda to handle each <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-match-result/index.html#matchresult\" rel=\"nofollow noreferrer\"><code>MatchResult</code></a>:</p>\n\n<pre><code>val charsRegex = \"[klmn][aei]\".toRegex(RegexOption.IGNORE_CASE)\nval validChars = mapOf('a' to 'o', 'e' to 'u', 'i' to 'y')\n\nval result = line.replace(charsRegex) {\n    val vowel = it.value[1]\n    val validLetter = validChars.getValue(vowel.toLowerCase())\n    val validCaseLetter = if (vowel.isLowerCase()) validLetter else validLetter.toUpperCase()\n    it.value.take(1) + validCaseLetter\n}\n</code></pre>\n\n<p><sup><a href=\"https://play.kotlinlang.org/#eyJ2ZXJzaW9uIjoiMS4zLjExIiwicGxhdGZvcm0iOiJqYXZhIiwiYXJncyI6IlNhbXBsZUlucHV0MSBTYW1wbGVJbnB1dDIiLCJqc0NvZGUiOiIiLCJub25lTWFya2VycyI6dHJ1ZSwidGhlbWUiOiJpZGVhIiwiZm9sZGVkQnV0dG9uIjp0cnVlLCJyZWFkT25seSI6ZmFsc2UsImNvZGUiOiJmdW4gbWFpbigpIHtcbiAgICB2YWwgbGluZSA9IFwia290bEluIGlzIGEgZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBMYW5ndWFnZVwiXG5cbiAgICB2YWwgY2hhcnNSZWdleCA9IFwiW2tsbW5dW2FlaV1cIi50b1JlZ2V4KFJlZ2V4T3B0aW9uLklHTk9SRV9DQVNFKVxuICAgIHZhbCB2YWxpZENoYXJzID0gbWFwT2YoJ2EnIHRvICdvJywgJ2UnIHRvICd1JywgJ2knIHRvICd5JylcblxuICAgIHZhbCByZXN1bHQgPSBsaW5lLnJlcGxhY2UoY2hhcnNSZWdleCkge1xuICAgICAgICB2YWwgdm93ZWwgPSBpdC52YWx1ZVsxXVxuICAgICAgICB2YWwgdmFsaWRMZXR0ZXIgPSB2YWxpZENoYXJzLmdldFZhbHVlKHZvd2VsLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIHZhbCB2YWxpZENhc2VMZXR0ZXIgPSBpZiAodm93ZWwuaXNMb3dlckNhc2UoKSkgdmFsaWRMZXR0ZXIgZWxzZSB2YWxpZExldHRlci50b1VwcGVyQ2FzZSgpXG4gICAgICAgIGl0LnZhbHVlLnRha2UoMSkgKyB2YWxpZENhc2VMZXR0ZXJcbiAgICB9XG5cbiAgICBwcmludGxuKHJlc3VsdClcbn0iLCJ0byI6IiIsImZyb20iOiIifQ==\" rel=\"nofollow noreferrer\">(runnable sample)</a></sup></p>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548896327, "last_edit_date": 1548896327, "creation_date": 1548893264, "answer_id": 54451476, "question_id": 54444757, "link": "https://stackoverflow.com/questions/54444757/how-to-change-different-substrings-in-a-string/54451476#54451476", "title": "How to change different substrings in a string?", "body": "<p>I would use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/replace.html\" rel=\"nofollow noreferrer\">replace</a> which takes a transform lambda as hotkey proposed as well. But I would change the regex to have two groups. </p>\n\n<ul>\n<li>The first group is a positive lookbehind which means that it will be matched but not captured, since the first letter does not have to be replaced</li>\n<li>The second group will be captured, since the second letter has to be replaced by another character</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>fun replaceInvalidPairs(line: String): String {\n    val charsRegex = \"(?&lt;=[klmn])([aei])\".toRegex(setOf(RegexOption.IGNORE_CASE))\n    val validChars = mapOf('a' to 'o', 'e' to 'u', 'i' to 'y')\n\n    return charsRegex.replace(line) {\n        val secondLetter = it.groupValues.first().first()\n        val replacement = validChars[secondLetter.toLowerCase()]!!\n        (if (secondLetter.isUpperCase()) replacement.toUpperCase() else replacement).toString()\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>kotlYn is a functionol programmyng Longuage</p>\n</blockquote>\n"}], "owner": {"reputation": 337, "user_id": 10907345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980e913f4fe5054f7a09e4d684e2be34?s=128&d=identicon&r=PG&f=1", "display_name": "rost", "link": "https://stackoverflow.com/users/10907345/rost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 1, "accepted_answer_id": 54451002, "answer_count": 4, "score": 0, "last_activity_date": 1548896327, "creation_date": 1548864435, "question_id": 54444757, "link": "https://stackoverflow.com/questions/54444757/how-to-change-different-substrings-in-a-string", "title": "How to change different substrings in a string?", "body": "<p>I have a file with a certain number of lines.\nI need to find all double letters and change the second letter to the one that corresponds to it in the map.<br/>\nCase of replaced letters should be kept.<br/>\nExample: <br/><code>\"kotlIn is a functional programming Language\"</code><br/> should become <br/><code>\"kotlYn is a functionol programmyng Longuage\"</code></p>\n\n<pre><code>fun changeChar(inputFileName: String, outputFileName: String) {\n    val outputStream = File(outputFileName).bufferedWriter()\n    val charsRegex = \"([klmn][aei])\".toRegex(setOf(RegexOption.IGNORE_CASE))\n    val validChars = mapOf('a' to 'o', 'e' to 'u', 'i' to 'y')\n    File(inputFileName).forEachLine { line -&gt;\n        val sb = StringBuilder(line).replace(charsRegex, /*here is my difficulty*/)\n        outputStream.write(sb)\n        outputStream.newLine()\n    }\n    outputStream.close()\n}\n</code></pre>\n\n<p>I spent many hours, but could not find solutions on the Internet and the standard Kotlin library.</p>\n"}, {"tags": ["android", "kotlin", "android-imageview", "selected"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 8577077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ee7e89036612852ee003ee76c929e3?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Perdomo", "link": "https://stackoverflow.com/users/8577077/diego-perdomo"}, "edited": false, "score": 0, "creation_date": 1548866792, "post_id": 54444849, "comment_id": 95700217, "body": "Thank you very much! It works very well, I create a white border for the unselected images, now, could you explain me why I have to use notifyDataSetChange of some of those methods in this case?"}, {"owner": {"reputation": 189, "user_id": 8577077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ee7e89036612852ee003ee76c929e3?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Perdomo", "link": "https://stackoverflow.com/users/8577077/diego-perdomo"}, "edited": false, "score": 0, "creation_date": 1548867189, "post_id": 54444849, "comment_id": 95700440, "body": "I think this is just to force a refresh on the views, is like the setState method on React am I right?"}, {"owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "reply_to_user": {"reputation": 189, "user_id": 8577077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ee7e89036612852ee003ee76c929e3?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Perdomo", "link": "https://stackoverflow.com/users/8577077/diego-perdomo"}, "edited": false, "score": 0, "creation_date": 1548867356, "post_id": 54444849, "comment_id": 95700547, "body": "@DiegoPerdomo yes. If you make any change in an item of list, you should tell the adapter: <code>hey adapter, let updates your view</code> by those methods."}], "tags": [], "owner": {"reputation": 7362, "user_id": 972671, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d60679aa1bf8f8400d3953e7dc78d2db?s=128&d=identicon&r=PG", "display_name": "Kingfisher Phuoc", "link": "https://stackoverflow.com/users/972671/kingfisher-phuoc"}, "is_accepted": true, "score": 2, "last_activity_date": 1548864714, "creation_date": 1548864714, "answer_id": 54444849, "question_id": 54444603, "link": "https://stackoverflow.com/questions/54444603/select-just-one-imageview-at-a-time-inside-recyclerview-adapter/54444849#54444849", "title": "Select just one ImageView at a time inside RecyclerView Adapter", "body": "<p>you should have a global field to hold your <code>selected</code> position like below:</p>\n\n<pre><code>var selectedPos = -1 // hold selected position in your adapter\n// in your bindView, because your view will be reused, you should always check the selected position to set the suitable background\nholder.accountImage.setBackgroundResource(if(selectedPos == position) yourImageHightlight else yourNormalImage)\n\nholder.accountImage.setOnClickListener {\n    selectedPos = position\n    notifyDataSetChanged()// or something like notifyItemChanged()...\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8577077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ee7e89036612852ee003ee76c929e3?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Perdomo", "link": "https://stackoverflow.com/users/8577077/diego-perdomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 54444849, "answer_count": 1, "score": 0, "last_activity_date": 1548864714, "creation_date": 1548863922, "question_id": 54444603, "link": "https://stackoverflow.com/questions/54444603/select-just-one-imageview-at-a-time-inside-recyclerview-adapter", "title": "Select just one ImageView at a time inside RecyclerView Adapter", "body": "<p>I have a RecyclerView filled with different images, when the user click one of then i apply a border to highlight the image. Everything is working fine, however, the user can click multiple images and all of then get highlighted, i want to select only one at a time. I have search over multiples sites and posts however none of them have a solution that works for me. Here is an image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/1xQpV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1xQpV.png\" alt=\"Image selected\"></a></p>\n\n<p>I am using a ImageView click listener, not an ItemClickListener.</p>\n\n<p>Here is the adapter code:</p>\n\n<pre><code>import android.content.Context\nimport android.support.v7.widget.RecyclerView\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.ImageView\n\nclass AccountViewHolder(view: View) : RecyclerView.ViewHolder(view) {\n    var accountImage: ImageView = \n        view.findViewById(R.id.account_image_placeholder)\n}\n\nclass AddEditAccountAdapter(private var context: Context, private var \n    accountImages: ArrayList&lt;String&gt;) :\n    RecyclerView.Adapter&lt;AccountViewHolder&gt;() {\n\n       override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): \nAccountViewHolder {\n    val imageItem = LayoutInflater.from(context).inflate(\n        R.layout.account_image_item,\n        parent, false\n    )\n\n    return AccountViewHolder(imageItem)\n}\n\noverride fun getItemCount(): Int {\n    return accountImages.size\n}\n\noverride fun onBindViewHolder(holder: AccountViewHolder, position: Int) {\n\n    val accountImageId =\n        context.getResources().getIdentifier(accountImages.get(position), \"drawable\", context.getPackageName())\n\n    holder.accountImage.setImageResource(accountImageId)\n\n    holder.accountImage.setOnClickListener {\n\n        holder.accountImage.setBackgroundResource(R.drawable.image_highlight)\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["kotlin", "infix-notation"], "comments": [{"owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "edited": false, "score": 0, "creation_date": 1548863640, "post_id": 54444121, "comment_id": 95698210, "body": "I think you have another problem here... checking whether <code>this</code> is <code>null</code> works on <code>infix</code> functions the way you would expect, even if those extension functions are wrapped in a class. So my guess is, that your <code>JsonNode</code> is probably not <code>null</code>."}, {"owner": {"reputation": 340, "user_id": 8244977, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007678740593/picture?type=large", "display_name": "BingLi224", "link": "https://stackoverflow.com/users/8244977/bingli224"}, "edited": false, "score": 0, "creation_date": 1548863654, "post_id": 54444121, "comment_id": 95698220, "body": "how about testing with <code>this ?. run { .. } ?: run { .. }</code> making sure it&#39;s really <code>null</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 0, "last_activity_date": 1548863654, "creation_date": 1548863654, "answer_id": 54444526, "question_id": 54444121, "link": "https://stackoverflow.com/questions/54444121/how-do-i-properly-check-for-null-on-nullable-infix-receivers/54444526#54444526", "title": "How do I properly check for null on nullable infix receivers?", "body": "<p>That null check is good as is, you're correct that it checks the nullable <code>JsonNode?</code> receiver in this case.</p>\n\n<p>However, the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-t-o-d-o.html\" rel=\"nofollow noreferrer\"><code>TODO</code></a> method in Kotlin is an explosive todo, as in it always throws a <code>NotImplementedException</code> when it's hit. This is why this code is allowed to compile, even though not all branches return a <code>Boolean</code> value from the method.</p>\n"}, {"comments": [{"owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "edited": false, "score": 0, "creation_date": 1548864333, "post_id": 54444542, "comment_id": 95698608, "body": "I came to this conclusion myself after more minutes testing. You beat me to posting a self-answer however, so the checkmark is yours!"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "edited": false, "score": 0, "creation_date": 1548889637, "post_id": 54444542, "comment_id": 95710394, "body": "@Roland correct +1, funny thing is &quot;null&quot; actually comes from toString() :D see my answer"}], "tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": true, "score": 2, "last_activity_date": 1548864081, "last_edit_date": 1548864081, "creation_date": 1548863710, "answer_id": 54444542, "question_id": 54444121, "link": "https://stackoverflow.com/questions/54444121/how-do-i-properly-check-for-null-on-nullable-infix-receivers/54444542#54444542", "title": "How do I properly check for null on nullable infix receivers?", "body": "<p><code>NullNode</code> (<a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.9/index.html?com/fasterxml/jackson/databind/node/NullNode.html\" rel=\"nofollow noreferrer\">jackson-databind-javadoc</a>) is not <code>null</code> ;-) <code>NullNode</code> is actually its own type... So you may rather want to check against that type instead...</p>\n\n<p>Checking whether <code>this</code> is <code>null</code> works on <code>infix</code> functions the way you would expect, even if those extension functions are wrapped in a class.</p>\n\n<p>So to check whether your <code>policy.conditions</code> contains that <code>NullNode</code> you may rather change the condition to the following instead:</p>\n\n<pre><code>if (this is NullNode) return true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548889330, "creation_date": 1548889330, "answer_id": 54450883, "question_id": 54444121, "link": "https://stackoverflow.com/questions/54444121/how-do-i-properly-check-for-null-on-nullable-infix-receivers/54450883#54450883", "title": "How do I properly check for null on nullable infix receivers?", "body": "<p>This is actually a little tricky. Note how conditions value is <code>\"null\"</code> rather than <code>null</code>. This is because</p>\n\n<p><code>toString()</code> of <code>ValueNode</code> calls <code>asText()</code> of <code>NullNode</code> which returns a <code>String</code> of value \"null\", so the receiver <code>JsonNode?</code> actually was not null all along.</p>\n\n<p>So, as Roland already stated, you have to check whether the receiver is of type <code>NullNode</code>.</p>\n"}], "owner": {"reputation": 6580, "user_id": 355682, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c02079e74de8563fdfa7e4ac1d87d76?s=128&d=identicon&r=PG", "display_name": "Raven Dreamer", "link": "https://stackoverflow.com/users/355682/raven-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 54444542, "answer_count": 3, "score": 0, "last_activity_date": 1548889697, "creation_date": 1548862377, "last_edit_date": 1548889697, "question_id": 54444121, "link": "https://stackoverflow.com/questions/54444121/how-do-i-properly-check-for-null-on-nullable-infix-receivers", "title": "How do I properly check for null on nullable infix receivers?", "body": "<p>I have a Kotlin infix function stubbed out thusly:</p>\n\n<pre><code>private fun statementMeetsConditions(policy: PolicyStatement, per: PolicyEnforcementRequest): Boolean {\n    return policy.conditions areMetBy per.attributes\n}\n\nprivate infix fun JsonNode?.areMetBy(attributes: Map&lt;String, String&gt;): Boolean {\n    if (this == null) return true //no conditions, so we pass\n\n    TODO(\"Condition-based policies not implemented\")\n}\n</code></pre>\n\n<p>At runtime, <code>policy.conditions</code> is null.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oiSXP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oiSXP.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would have thought that <code>(this == null)</code> would evaluate to true, however I am triggering a runtime exception as the infix function hits the <code>TODO</code>.</p>\n\n<p>These are both member functions on a class -- so I suspect that \"this\" is evaluating to the instance of the class (<em>not</em> null), rather than the <code>JsonNode?</code> I was expecting. How can I ensure that I'm referencing the <code>JsonNode?</code> instead of the class?</p>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 342, "user_id": 5810310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f38c0865e9f3c0828c6a035b90fc6703?s=128&d=identicon&r=PG&f=1", "display_name": "marcos E.", "link": "https://stackoverflow.com/users/5810310/marcos-e"}, "edited": false, "score": 1, "creation_date": 1552374937, "post_id": 54444101, "comment_id": 96973459, "body": "I implemented it using an entity with @Embebed fields and inner join on the SQL query"}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 5810310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f38c0865e9f3c0828c6a035b90fc6703?s=128&d=identicon&r=PG&f=1", "display_name": "marcos E.", "link": "https://stackoverflow.com/users/5810310/marcos-e"}, "edited": false, "score": 1, "creation_date": 1566467806, "post_id": 57593953, "comment_id": 101668935, "body": "This was a hack / workaround to try to work using Relation annotation with composite primary key, so i could take advantage of @Relation on queries but thats not supported yet. I decided to go for &quot;using an entity with Embebed fields and inner join on the SQL query&quot;."}], "tags": [], "owner": {"reputation": 435, "user_id": 1944515, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/7924360c6a7d84b477cb3cfbe13e059f?s=128&d=identicon&r=PG", "display_name": "Aspiring Dev", "link": "https://stackoverflow.com/users/1944515/aspiring-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1566397930, "creation_date": 1566397930, "answer_id": 57593953, "question_id": 54444101, "link": "https://stackoverflow.com/questions/54444101/room-relation-using-a-composite-index/57593953#57593953", "title": "Room @Relation using a composite index", "body": "<p>You don't have a <code>woItemUsagePk</code> field declared in your entity class. You need to declare a field to hold the value, Room is not going to dynamically declare it for you. </p>\n"}], "owner": {"reputation": 342, "user_id": 5810310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f38c0865e9f3c0828c6a035b90fc6703?s=128&d=identicon&r=PG&f=1", "display_name": "marcos E.", "link": "https://stackoverflow.com/users/5810310/marcos-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 408, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1566397930, "creation_date": 1548862334, "question_id": 54444101, "link": "https://stackoverflow.com/questions/54444101/room-relation-using-a-composite-index", "title": "Room @Relation using a composite index", "body": "<p><strong>Context</strong></p>\n\n<p>Hello, I'm working with 2 tables related by a foreign key, WorkOrderItemUsage and WorkOrderItemUsageLot. Every workOrderItemUsage can have multiple lots, so it's a 1 to n relationship, to make my work easier I'm implementing a helper entity called WorkOrderItemUsageWithLots, it's used to retrieve all the data from both tables in one go using room @Relation.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>I've tried to use @Relation with a single column and it works correctly, but I need to stablish my relation based on a composite key like the foreign key, I understand there's no support for composite keys using @Relation I'm trying to link it using an index, Am I missing something? Do I have to refuse to use @Relation in favor of good ol SQL joins in queries?</p>\n\n<ul>\n<li>error: Cannot find the parent entity column <code>woItemUsagePk</code> in WorkOrderItemUsageWithLots</li>\n<li>Error prints the available columns for @Relation</li>\n<li><p>Options: woIdItemUsage, itemId, itemNumber, itemThirdNumber, itemDescription, quantityMeasure, branchId, branchDescription, locationId, doseQuantity, doseMeasureUnit, itemAction, itemPlague, itemJustification\nprivate java.util.List lotList </p>\n\n<pre><code>@Entity(\nprimaryKeys = [\"itemId\", \"branchId\", \"woIdItemUsage\"],\nforeignKeys = [\n    ForeignKey(entity = WorkOrder::class,\n            parentColumns = [\"woId\"],\n            childColumns = [\"woIdItemUsage\"],\n            onUpdate = ForeignKey.CASCADE,\n            onDelete = ForeignKey.CASCADE)],\nindices = [Index(\"woIdItemUsage\", \"itemId\", \"branchId\", name = \"woItemUsagePk\", unique = true)]\n\n@Entity(\n        primaryKeys = [\"woIdItemUsageLot\", \"itemId\", \"branchId\", \"lotId\"],\n        foreignKeys = [\n            ForeignKey(entity = WorkOrderItemUsage::class,\n                    parentColumns = [\"woIdItemUsage\", \"itemId\", \"branchId\"], \n                    childColumns = [\"woIdItemUsageLot\", \"itemId\", \"branchId\"],\n                    onUpdate = ForeignKey.CASCADE,\n                    onDelete = ForeignKey.CASCADE)],\n        indices = [Index(\"woIdItemUsageLot\", \"itemId\", \"branchId\", name = \"woItemUsageLotPk\", unique = true)])\n\n\n\n\nclass WorkOrderItemUsageWithLots(@Embedded var itemUsage: WorkOrderItemUsage) {\n\n@Relation(parentColumn = \"woItemUsagePk\", entityColumn= \"woItemUsageLotPk\")\nvar lotList: List&lt;WorkOrderItemUsageLot&gt; = emptyList()}\n</code></pre></li>\n</ul>\n"}, {"tags": ["gradle", "kotlin", "kotlin-multiplatform", "kotlin-js"], "answers": [{"tags": [], "owner": {"reputation": 950, "user_id": 1941359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dffbd0bd86e324aff9d04907df88e8b?s=128&d=identicon&r=PG", "display_name": "AlexO", "link": "https://stackoverflow.com/users/1941359/alexo"}, "is_accepted": false, "score": 0, "last_activity_date": 1586961452, "creation_date": 1586961452, "answer_id": 61231479, "question_id": 54443916, "link": "https://stackoverflow.com/questions/54443916/kotlin-1-3-20-with-gradle-5-1-1-compilekotlin2js-execute-hot-reload/61231479#61231479", "title": "Kotlin 1.3.20 with Gradle 5.1.1 compileKotlin2Js execute hot reload", "body": "<p>Answering own question, got Kotlin 1.3.72 multiplatform project working with Gradle 6.3 with Kotlin DSL: <a href=\"https://github.com/alexoooo/sample-multiplatform-boot-react\" rel=\"nofollow noreferrer\">https://github.com/alexoooo/sample-multiplatform-boot-react</a></p>\n\n<p>When developing, there are two processes:</p>\n\n<ol>\n<li>Java back-end from IDE, run with: <code>--server.port=8081</code></li>\n<li>Webpack proxy with hot-reload: <code>gradlew -t :proj-js:run</code></li>\n</ol>\n\n<p>Note that Kotlin multiplatform projects are currently experimental, and some of the details are likely to change as the new IR is introduced: <a href=\"https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-4-m1-released/\" rel=\"nofollow noreferrer\">https://blog.jetbrains.com/kotlin/2020/03/kotlin-1-4-m1-released/</a></p>\n"}], "owner": {"reputation": 950, "user_id": 1941359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dffbd0bd86e324aff9d04907df88e8b?s=128&d=identicon&r=PG", "display_name": "AlexO", "link": "https://stackoverflow.com/users/1941359/alexo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1586961452, "creation_date": 1548861756, "question_id": 54443916, "link": "https://stackoverflow.com/questions/54443916/kotlin-1-3-20-with-gradle-5-1-1-compilekotlin2js-execute-hot-reload", "title": "Kotlin 1.3.20 with Gradle 5.1.1 compileKotlin2Js execute hot reload", "body": "<p>In Kotlin 1.3.20 and Gradle 4.10.2, it is possible to hot reload js files with the following in Gradle:</p>\n\n<pre><code>task watch {\n    inputs.files 'src/main'\n    doLast {\n        compileKotlin2Js.execute()\n    }\n}\n</code></pre>\n\n<p>However, then we get a warning of:</p>\n\n<blockquote>\n  <p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.</p>\n</blockquote>\n\n<p>With Kotlin 1.3.20 / Gradle 5.1.1, the deprecation warning goes away, but the compileKotlin2Js.execute() results in the following error:</p>\n\n<blockquote>\n  <p>Parameter specified as non-null is null: method org.jetbrains.kotlin.gradle.tasks.AbstractKotlinCompile.execute, parameter inputs</p>\n</blockquote>\n\n<p>Is there a way to compileKotlin2Js.execute() for hot-reloading js files with Kotlin 1.3.20 / Gradle 5.1.1?</p>\n"}, {"tags": ["intellij-idea", "kotlin", "kdoc"], "owner": {"reputation": 1665, "user_id": 1101963, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/84c24dec7be50840b7aeaac32358e189?s=128&d=identicon&r=PG", "display_name": "Yuriy Kulikov", "link": "https://stackoverflow.com/users/1101963/yuriy-kulikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1548861108, "creation_date": 1548861108, "question_id": 54443708, "link": "https://stackoverflow.com/questions/54443708/how-do-i-inherit-kdoc-documentation-in-java-class", "title": "How do I inherit KDoc documentation in Java class?", "body": "<p>I have Kotlin classes with KDoc, for example:</p>\n\n<pre><code>abstract class Something {\n  /** # Documentation */\n  abstract fun someFun()\n}\n</code></pre>\n\n<p>This class is extended by Kotlin and Java classes. KDoc is correctly inherited by Kotlin classes. KDoc is shown upon clicking Ctrl+Q in Intellij in the subclass. However, it does not work if the subclass is written in Java. KDoc is not inherited in this case.</p>\n\n<p>How can I inherit the KDoc in Java?</p>\n"}, {"tags": ["android", "generics", "kotlin"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 2, "creation_date": 1548861697, "post_id": 54443600, "comment_id": 95696993, "body": "I am pretty sure that doesn&#39;t work in Java either. A <code>Movement&lt;Cat&gt;</code> is NOT a subtype of <code>Movement&lt;Animal&gt;</code>, the same way a <code>List&lt;String&gt;</code> is NOT a subtype of <code>List&lt;Object&gt;</code>. You might want to read <a href=\"https://kotlinlang.org/docs/reference/generics.html\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548861854, "post_id": 54443600, "comment_id": 95697090, "body": "Should it be <code>out Animal</code>?"}, {"owner": {"reputation": 3504, "user_id": 1348423, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0707614048bf14d83a2e9cc01b36d6d6?s=128&d=identicon&r=PG", "display_name": "Muhammad Ahmed AbuTalib", "link": "https://stackoverflow.com/users/1348423/muhammad-ahmed-abutalib"}, "edited": false, "score": 0, "creation_date": 1548862946, "post_id": 54443600, "comment_id": 95697824, "body": "m0skito you seem to be right."}], "answers": [{"comments": [{"owner": {"reputation": 3504, "user_id": 1348423, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0707614048bf14d83a2e9cc01b36d6d6?s=128&d=identicon&r=PG", "display_name": "Muhammad Ahmed AbuTalib", "link": "https://stackoverflow.com/users/1348423/muhammad-ahmed-abutalib"}, "edited": false, "score": 1, "creation_date": 1548862918, "post_id": 54443863, "comment_id": 95697807, "body": "I can see where my logic is flawed. This and m0skito&#39;s comment under the question perhaps shed some light. I am revisiting the task at hand"}], "tags": [], "owner": {"reputation": 4330, "user_id": 6271180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEiRn.png?s=128&g=1", "display_name": "Benoit", "link": "https://stackoverflow.com/users/6271180/benoit"}, "is_accepted": false, "score": 2, "last_activity_date": 1548861566, "creation_date": 1548861566, "answer_id": 54443863, "question_id": 54443600, "link": "https://stackoverflow.com/questions/54443600/kotlin-generics-anomaly/54443863#54443863", "title": "Kotlin generics anomaly", "body": "<p>I am not an expert of Kotlin, but that seems perfectly normal:</p>\n\n<p>When declared like this:</p>\n\n<pre><code>var animalMovement : Movement&lt;Animal&gt;\n</code></pre>\n\n<p>You can write code:</p>\n\n<pre><code>animalMovement.moveAnimal(dog)\n</code></pre>\n\n<p>But if assigning it like this:</p>\n\n<pre><code>var animalMovement : Movement&lt;Animal&gt; = CatMovementImpl()\n</code></pre>\n\n<p>is allowed, it means that your <code>CatMovementImpl</code> should be able to move a dog ?</p>\n"}, {"comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 1, "creation_date": 1548919235, "post_id": 54450602, "comment_id": 95718626, "body": "I would just add that you can&#39;t call <code>moveAnimal</code> on a <code>Movement&lt;out Animal&gt;</code>, making it pretty useless for this interface in particular."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548935385, "last_edit_date": 1548935385, "creation_date": 1548887781, "answer_id": 54450602, "question_id": 54443600, "link": "https://stackoverflow.com/questions/54443600/kotlin-generics-anomaly/54450602#54450602", "title": "Kotlin generics anomaly", "body": "<p>What <a href=\"https://stackoverflow.com/users/898478/m0skit0\">moskito</a> said in the comments is correct.</p>\n\n<blockquote>\n  <p>I am pretty sure that doesn't work in Java either. A <code>Movement&lt;Cat&gt;</code> is\n  NOT a subtype of <code>Movement&lt;Animal&gt;</code>, the same way a List is NOT\n  a subtype of <code>List&lt;Object&gt;</code>. You might want to read this.</p>\n</blockquote>\n\n<p>But in Kotlin this is possible using type variance.</p>\n\n<pre><code>fun TestGenerics() {\n    var catMovement1: Movement&lt;Cat&gt; = CatMovementImpl()\n    var catMovement2: Movement&lt;out Animal&gt; = CatMovementImpl() // works\n}\n</code></pre>\n\n<p>You basically tell the compiler \"accept all implementations of <code>Movement&lt;Animal&gt;</code> or implementations <code>Movement&lt;S&gt;</code> for which <code>S</code> has <code>Animal</code> as upper bound\".</p>\n\n<p>But, then a problem arises. You cannot invoke </p>\n\n<pre><code>val cat: Cat = /* ... */\ncatMovement2.moveAnimal(cat) // error\n</code></pre>\n\n<p>giving you the error </p>\n\n<blockquote>\n  <p>Out-projected type <code>Movement&lt;out Animal&gt;</code> prohibits the use of [...].</p>\n</blockquote>\n\n<p>because <code>T</code> can only be used as producer (out position) and not as consumer (in position) like this (function made up to demonstrate the point):</p>\n\n<pre><code>val c: Cat = catMovement2.getAnimal() // works\n</code></pre>\n\n<p>This problem becomes clear right away when you  use <code>out</code> at the <code>Movement</code> declaration like this:</p>\n\n<pre><code>interface Movement&lt;out T : Animal&gt; {\n    fun moveAnimal(type: T) // error\n}\n</code></pre>\n\n<hr>\n\n<p>It depends on your use case but maybe you should just let Kotlin infer the type, which would be <code>CatMovementImpl</code>.</p>\n\n<pre><code>var catMovement = CatMovementImpl()\n</code></pre>\n\n<p><sub>Credit goes to <a href=\"https://stackoverflow.com/users/2413303/epicpandaforce\">EpicPandaForce</a> for already suggesting using <code>out</code> in the comments.</sub></p>\n"}], "owner": {"reputation": 3504, "user_id": 1348423, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0707614048bf14d83a2e9cc01b36d6d6?s=128&d=identicon&r=PG", "display_name": "Muhammad Ahmed AbuTalib", "link": "https://stackoverflow.com/users/1348423/muhammad-ahmed-abutalib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548935385, "creation_date": 1548860718, "last_edit_date": 1548887910, "question_id": 54443600, "link": "https://stackoverflow.com/questions/54443600/kotlin-generics-anomaly", "title": "Kotlin generics anomaly", "body": "<p>Ok, so I have three interface types.</p>\n\n<ol>\n<li><code>Movement&lt;T : Animal&gt;</code></li>\n<li><code>Animal</code> with subinterfaces <code>Cat</code>, <code>Dog</code>, <code>Horse</code></li>\n<li><code>AnimalMovement</code> </li>\n</ol>\n\n<p><strong>Movement Interface</strong> </p>\n\n<pre><code>interface  Movement&lt;T : Animal&gt; {\n    fun moveAnimal(type:T)\n}\n</code></pre>\n\n<p><strong>Animal Interfaces</strong></p>\n\n<pre><code>interface Animal {\n    fun takeSteps()\n    fun jump()\n    fun hide()\n}\n\ninterface Cat : Animal\ninterface Dog : Animal\n</code></pre>\n\n<p><strong>AnimalMovement</strong></p>\n\n<pre><code>interface CatMovement : Movement&lt;Cat&gt;\n</code></pre>\n\n<p>I then implement the CatMovement interface</p>\n\n<pre><code>class CatMovementImpl : CatMovement {\n    override fun moveAnimal(type: Cat) {\n        TODO(\"not implemented\")        \n    }\n}\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<pre><code>fun TestGenerics() {\n    var catMovement : Movement&lt;Cat&gt; = CatMovementImpl() // this works\n    var catMovement : Movement&lt;Animal&gt; = CatMovementImpl() // this doesn't?\n}\n</code></pre>\n\n<p>I am sure in Java both lines would have worked fine. However in Kotlin the second line fails to execute. Why would that be? An animal is the base type for cat, so this should have worked right?</p>\n"}, {"tags": ["android", "kotlin", "objectbox"], "comments": [{"owner": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1549285624, "post_id": 54442834, "comment_id": 95836390, "body": "Something like VACUUM should not be required with ObjectBox. It should re-use available space after removing entities. What is it that you actually want to do?"}, {"owner": {"reputation": 31, "user_id": 9467041, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2jt6SYdop04/AAAAAAAAAAI/AAAAAAAAAB0/9sElwwLQzBg/photo.jpg?sz=128", "display_name": "xWeb", "link": "https://stackoverflow.com/users/9467041/xweb"}, "reply_to_user": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1549451342, "post_id": 54442834, "comment_id": 95904228, "body": "I checked, added a few objects with binary fields, and then remembered the size of the database file. After that, I deleted the objects from the database, but the size of the database did not decrease. The database browser shows 0 objects in the database. But the place they continue to occupy, a similar behavior from Sqlite"}, {"owner": {"reputation": 559, "user_id": 9187282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb0d1567c04d9165050afe5286964a8?s=128&d=identicon&r=PG&f=1", "display_name": "Uwe - ObjectBox", "link": "https://stackoverflow.com/users/9187282/uwe-objectbox"}, "edited": false, "score": 0, "creation_date": 1549962274, "post_id": 54442834, "comment_id": 96083846, "body": "Ah, alright. See and thumbs up <a href=\"https://github.com/objectbox/objectbox-java/issues/552\" rel=\"nofollow noreferrer\">github.com/objectbox/objectbox-java/issues/552</a> then."}, {"owner": {"reputation": 719, "user_id": 2709454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4e840bfc397bbb44accac3fdce8bb7?s=128&d=identicon&r=PG&f=1", "display_name": "xpusostomos", "link": "https://stackoverflow.com/users/2709454/xpusostomos"}, "edited": false, "score": 0, "creation_date": 1607145503, "post_id": 54442834, "comment_id": 115186714, "body": "It&#39;s extremely rare for any program, in any field of computer science to shorten files that it&#39;s been working on. They may rewrite them from scratch smaller, but rarely truncate existing files. That&#39;s because, for example, in a database, while you may delete the objects, there could be system blocks, like indexes, or other control information near the end of the file, and rearranging that for the rare possibility of reclaiming space is rarely a consideration."}], "owner": {"reputation": 31, "user_id": 9467041, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2jt6SYdop04/AAAAAAAAAAI/AAAAAAAAAB0/9sElwwLQzBg/photo.jpg?sz=128", "display_name": "xWeb", "link": "https://stackoverflow.com/users/9467041/xweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548860216, "creation_date": 1548858442, "last_edit_date": 1548860216, "question_id": 54442834, "link": "https://stackoverflow.com/questions/54442834/how-to-vacuum-objectbox-database-file", "title": "How to &quot;vacuum&quot; objectbox database file?", "body": "<p>tell me, how can I wait (analogue of VACUUM SQLite) database file? <strong>With saving entity IDs.</strong> I could not find the API. And my code does not work:</p>\n\n<pre><code> val all = boxStore.allEntityClasses\n for ( clazz in all ){\n      val box = boxStore.boxFor( clazz )\n      val box2 = boxStore2.boxFor( clazz )\n      val ids = box.query().build().findIds()\n      for ( id in ids ){\n           val obj = box[id]\n           box2.put( obj )\n      }\n  }\n</code></pre>\n\n<p>java.lang.IllegalArgumentException: ID is higher or equal to internal ID sequence: 1 (vs. 1). Use ID 0 (zero) to insert new entities.</p>\n\n<p>good work:</p>\n\n<pre><code>val obj = box[id]\n(obj as Boxable).id = 0\nbox2.put( obj )\n</code></pre>\n\n<p>but then I lose ID, maybe I should rely on my ID field and not use @Id for link in my app? </p>\n\n<p>Boxable - abstact class for all entitys in Box with @Id</p>\n"}, {"tags": ["mvvm", "kotlin", "android-viewmodel", "android-livedata"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548865293, "post_id": 54441785, "comment_id": 95699223, "body": "I assume because <code>MyFileWatcher</code> is bugged, but we can&#39;t see it can we?"}, {"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548865341, "post_id": 54441785, "comment_id": 95699260, "body": "Actually, it&#39;s working. Tested on Android 9.0"}, {"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548865589, "post_id": 54441785, "comment_id": 95699433, "body": "@EpicPandaForce MyFileObserver is now there."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548866188, "post_id": 54441785, "comment_id": 95699827, "body": "You can use <code>if (event == FileObserver.DELETE)</code>, but apparently that seems correct. Hmm. The code seems correct, so I&#39;d wager there is something up with the FileObserver, but I don&#39;t see why it wouldn&#39;t work atm. :|"}, {"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548867596, "post_id": 54441785, "comment_id": 95700691, "body": "Nothing wrong with the fileObserver, it works well. Run it on your End!"}, {"owner": {"reputation": 1768, "user_id": 1961671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndMhR.jpg?s=128&g=1", "display_name": "joao86", "link": "https://stackoverflow.com/users/1961671/joao86"}, "edited": false, "score": 0, "creation_date": 1548956815, "post_id": 54441785, "comment_id": 95740701, "body": "You are observing a variable. Try to observe a method that returns that variable. It is just an idea, I don&#39;t know if it will work..."}, {"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "edited": false, "score": 0, "creation_date": 1548956943, "post_id": 54441785, "comment_id": 95740772, "body": "and how will I do that?"}, {"owner": {"reputation": 1768, "user_id": 1961671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndMhR.jpg?s=128&g=1", "display_name": "joao86", "link": "https://stackoverflow.com/users/1961671/joao86"}, "edited": false, "score": 0, "creation_date": 1549022782, "post_id": 54441785, "comment_id": 95765166, "body": "so try to observe a method that returns the list of file names. When you delete a file, update the file names list, then when you update the list, the live data will be triggered. I may try to do some code later today or tomorrow, but you can try to do this."}, {"owner": {"reputation": 1768, "user_id": 1961671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndMhR.jpg?s=128&g=1", "display_name": "joao86", "link": "https://stackoverflow.com/users/1961671/joao86"}, "edited": false, "score": 0, "creation_date": 1549023079, "post_id": 54441785, "comment_id": 95765337, "body": "@Micklo_Nerd i think the problem here is that you should be observing the list of file names because that is what it is going to be changed."}, {"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "reply_to_user": {"reputation": 1768, "user_id": 1961671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndMhR.jpg?s=128&g=1", "display_name": "joao86", "link": "https://stackoverflow.com/users/1961671/joao86"}, "edited": false, "score": 0, "creation_date": 1549067885, "post_id": 54441785, "comment_id": 95784242, "body": "@joao86 could you show me in code what you mean?"}], "answers": [{"comments": [{"owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "edited": false, "score": 0, "creation_date": 1550473514, "post_id": 54493889, "comment_id": 96266087, "body": "Thanks for your input. Let me quickly run it."}], "tags": [], "owner": {"reputation": 1768, "user_id": 1961671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndMhR.jpg?s=128&g=1", "display_name": "joao86", "link": "https://stackoverflow.com/users/1961671/joao86"}, "is_accepted": false, "score": 0, "last_activity_date": 1549117774, "last_edit_date": 1549117774, "creation_date": 1549116944, "answer_id": 54493889, "question_id": 54441785, "link": "https://stackoverflow.com/questions/54441785/livedata-not-observing-after-first-call/54493889#54493889", "title": "LiveData not Observing after first Call", "body": "<p>I have here an example @Micklo_Nerd but it does not use your problem of getting the files deleted but it gives you the idea for what you need to do.\nIn my example the user insert a name and after clicking a button, the list is changed.</p>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n&lt;Button\n        android:text=\"Add\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/buttonAdd\"\n        app:layout_constraintStart_toStartOf=\"@+id/filename\"\n        app:layout_constraintEnd_toEndOf=\"@+id/filename\"\n        android:layout_marginTop=\"24dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/filename\"/&gt;\n&lt;EditText\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:inputType=\"textPersonName\"\n        android:ems=\"10\"\n        android:id=\"@+id/filename\"\n        android:layout_marginStart=\"8dp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:layout_marginEnd=\"8dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginTop=\"32dp\"\n        app:layout_constraintTop_toTopOf=\"parent\"/&gt;\n&lt;TextView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/textView\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        android:layout_marginStart=\"8dp\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        android:layout_marginEnd=\"8dp\"\n        android:layout_marginTop=\"16dp\"\n        app:layout_constraintTop_toBottomOf=\"@+id/buttonAdd\"/&gt;\n\n &lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>MyRepository (In your example is the MyLiveData)</strong></p>\n\n<p>In here you must do the work of getting the filenames in the folder, and put the in the MutableLiveData.</p>\n\n<pre><code>class MyRepository {\n\n    fun loadFileNames(liveData : MutableLiveData&lt;MutableList&lt;String&gt;&gt;, filename: String){\n\n       var fileList : MutableList&lt;String&gt;? = liveData.value\n\n       if(test == null)\n           fileList = MutableList(1){ filename }\n       else\n          fileList.add(filename)\n\n       liveData.value = fileList\n     }\n\n}\n</code></pre>\n\n<p><strong>MyViewModel</strong></p>\n\n<p>In here, I have two methods: one to update the list as I click the button and another to get the list of file names. You should probably only need the one that gets the list</p>\n\n<pre><code>class MyViewModel : ViewModel() {\n    val repo: MyRepository\n    var mutableLiveData : MutableLiveData&lt;MutableList&lt;String&gt;&gt;\n\n\n    init {\n       repo = MyRepository()\n       mutableLiveData = MutableLiveData()\n    }\n\n    fun changeList(filename: String){\n\n       repo.loadFileNames(mutableLiveData, filename)\n    }\n\n    fun getFileList() : MutableLiveData&lt;MutableList&lt;String&gt;&gt;{\n\n      return mutableLiveData\n    }\n}\n</code></pre>\n\n<p><strong>MainActivity</strong></p>\n\n<p>In here, you see I am observing the method that returns the list of filenames, which is what you need to do, because that is what is going to change.</p>\n\n<pre><code>class MainActivity : AppCompatActivity(), View.OnClickListener {\n\n   private val TAG = \"MyFragment\"\n\n   private lateinit var viewModel: MyViewModel\n\n   override fun onCreate(savedInstanceState: Bundle?) {\n      super.onCreate(savedInstanceState)\n      setContentView(R.layout.activity_main)\n\n      viewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)\n\n      viewModel.getFileList().observe(this, Observer&lt;MutableList&lt;String&gt;&gt; { fileNames -&gt;\n         Log.d(TAG, \"New Live Data Dispatch\")\n\n         textView.text = \"\"\n\n         for ((index, name) in fileNames!!.withIndex()) {\n            textView.append(\"the element at $index is $name\\n\")\n         }\n      })\n\n      buttonAdd.setOnClickListener(this)\n   }\n\n   override fun onClick(v: View?) {\n      when(v!!.id){\n        R.id.buttonAdd -&gt; {\n\n            viewModel.changeList(filename.text.toString())\n            filename.text.clear()\n        }\n      }\n   }\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 2095, "user_id": 6563022, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/605f45517e866d7be896740ffe219d15?s=128&d=identicon&r=PG&f=1", "display_name": "EdgeDev", "link": "https://stackoverflow.com/users/6563022/edgedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2646, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549117774, "creation_date": 1548855164, "last_edit_date": 1548879617, "question_id": 54441785, "link": "https://stackoverflow.com/questions/54441785/livedata-not-observing-after-first-call", "title": "LiveData not Observing after first Call", "body": "<p>I implemented LiveData &amp; ViewModel to mimic AsyncTaskLoader. </p>\n\n<p>I load file names from the camera directory in DCIM, and then i attach a fileObserver to Observe when a File (picture) is deleted, and then a callback tells the LiveData to re-fetch the fileNames when delete event occurs</p>\n\n<p><strong>The Problem:</strong></p>\n\n<p>The code below should fetch the file Names from DCIM/Pictures asynchronously with the help of LiveData and then a FileObserver is attached to the directory (DCIM/Pictures), to monitor when a file is deleted and a callback is implemented with the LiveData sub-class to reload the files, as demonstrated in code.</p>\n\n<p>okay, it works the first time, that is, the files are loaded the first time, calling <code>setValue()</code> and passing the fileNames triggered onChange to be called in the observing Activity/Fragment. But when a file is deleted, the callback function calls the loadFiles() function to re-load the files again but calling the setValue and passing in the FileNames does not trigger OnChange in the observing Activity/Fragment this time around.</p>\n\n<p>According to the <a href=\"https://developer.android.com/topic/libraries/architecture/livedata\" rel=\"nofollow noreferrer\">official documentation of LiveData</a> </p>\n\n<blockquote>\n  <p>You must call the setValue(T) method to update the LiveData object\n  from the main thread.</p>\n</blockquote>\n\n<p><strong>I am curious to know why LiveData is not updating its value after the first call.</strong></p>\n\n<hr>\n\n<p><strong>The Code</strong></p>\n\n<p><strong>MyLiveData</strong></p>\n\n<pre><code>class MyLiveData() : MutableLiveData&lt;MutableList&lt;String&gt;&gt;(), PictureDelete {\n    override fun onPicDelete() {\n        loadFileNames()\n    }\n\n    val TAG = \"MyLiveData\"\n    val fileNamesList: MutableList&lt;String&gt; = ArrayList()\n    val fileWatcher : MyFileWatcher\n\n    init {\n        loadFileNames()\n        val pathToWatch = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM + \"/Camera\").getAbsolutePath()\n        fileWatcher = MyFileWatcher(pathToWatch, this)\n        fileWatcher.startWatching()\n    }\n\n    private fun loadFileNames() {\n        val fileDir: File\n\n        try {\n            fileDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM + \"/Camera\")\n        } catch (e: Exception) {\n            Log.e(TAG, e.message)\n            return\n        }\n\n        Log.d(TAG, \"Actively Loading Files in Status LiveData\")\n\n        val arrayOfFiles = fileDir.listFiles()\n\n        if (arrayOfFiles == null || arrayOfFiles.size &lt; 1) return\n\n        Log.d(TAG, \"Actively Loading Files. Size: ${arrayOfFiles.size}\")\n\n        setValue(fileNamesList)\n    }\n\n}\n</code></pre>\n\n<p><strong>MyViewModel</strong></p>\n\n<pre><code>class MyViewModel() : ViewModel() {\n    val myLiveData: MyLiveData\n    val TAG = \"WhatsAppFragment-VModel\"\n\n\n    init {\n        myLiveData = MyLiveData()\n    }\n}\n</code></pre>\n\n<p><strong>MyFragment</strong></p>\n\n<pre><code>class MyFragment : Fragment() {\n\n    private val TAG = \"MyFragment\"\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val view = inflater.inflate(R.layout.fragment_layout, container, false)\n        return view\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        val viewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)\n        viewModel.myLiveData.observe(this, androidx.lifecycle.Observer { fileNames -&gt;\n            Log.d(TAG, \"New Live Data Dispatch\")\n            for ((index, name) in fileNames.withIndex()) {\n                Log.d(TAG, \"the element at $index is $name\")\n            }\n        })\n    }\n}\n</code></pre>\n\n<p><strong>MyFileObserver</strong></p>\n\n<pre><code>class MyFileWatcher(pathToWatch: String, val picDelete: PictureDelete) : FileObserver(pathToWatch, DELETE) {\n\n    val TAG = \"MyFileWatcher\"\n\n    init {\n        Log.d(TAG, \"Initialization\")\n    }\n\n    override fun onEvent(event: Int, path: String?) {\n        if (event = FileObserver.DELETE) { // EventCode 512 == Delete\n            Log.d(TAG, \"OnEvent. Event: $event Path: $path\")\n            picDelete.onPicDelete()\n        }\n    }\n}\n</code></pre>\n\n<p><strong>PictureDelete Interface</strong> </p>\n\n<pre><code>interface PictureDelete {\n    fun onPicDelete()\n}\n</code></pre>\n\n<p>What is wrong with my Implementation?</p>\n"}, {"tags": ["spring-mvc", "kotlin", "data-class"], "answers": [{"comments": [{"owner": {"reputation": 5427, "user_id": 1599926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65f285be0b24fdd9516fba584de44f7e?s=128&d=identicon&r=PG", "display_name": "Daniel K.", "link": "https://stackoverflow.com/users/1599926/daniel-k"}, "edited": false, "score": 0, "creation_date": 1548948550, "post_id": 54458813, "comment_id": 95735924, "body": "That&#39;s the answer I was afraid of. Maybe I&#39;ll try to implement a custom HandlerMethodArgumentResolver which does what I want."}, {"owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "reply_to_user": {"reputation": 5427, "user_id": 1599926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65f285be0b24fdd9516fba584de44f7e?s=128&d=identicon&r=PG", "display_name": "Daniel K.", "link": "https://stackoverflow.com/users/1599926/daniel-k"}, "edited": false, "score": 0, "creation_date": 1549118801, "post_id": 54458813, "comment_id": 95793634, "body": "I wouldn&#39;t sweat it. Think about it this way: Spring (or Dropwizard, or whatever) is just a framework and it should not have an effect on how you implement your business logic. Just map the data you receive from the REST endpoint to your domain object which can be immutable. More on the topic here: <a href=\"http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html\" rel=\"nofollow noreferrer\">blog.cleancoder.com/uncle-bob/2012/08/13/&hellip;</a>"}], "tags": [], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "is_accepted": false, "score": 2, "last_activity_date": 1548931619, "creation_date": 1548931619, "answer_id": 54458813, "question_id": 54438791, "link": "https://stackoverflow.com/questions/54438791/using-kotlin-data-class-to-group-path-variables-in-a-spring-requestmapping-anno/54458813#54458813", "title": "Using Kotlin data class to group path variables in a Spring @RequestMapping annotated method", "body": "<p>You can't really do that since Spring won't invoke constructors apart from the default constructor.</p>\n\n<p>Another problem is that you can only bind individual path variables to objects so you can't create a complex object this way.</p>\n\n<p>I'd stick with the version which uses <code>var</code>s since it works properly and create an immutable object after you receive the request.</p>\n\n<p>Another option is to pass a json object as a parameter because Jackson has more thorough support for this kind of deserialization or you can write a deserializer by hand.</p>\n"}], "owner": {"reputation": 5427, "user_id": 1599926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65f285be0b24fdd9516fba584de44f7e?s=128&d=identicon&r=PG", "display_name": "Daniel K.", "link": "https://stackoverflow.com/users/1599926/daniel-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548931619, "creation_date": 1548845381, "question_id": 54438791, "link": "https://stackoverflow.com/questions/54438791/using-kotlin-data-class-to-group-path-variables-in-a-spring-requestmapping-anno", "title": "Using Kotlin data class to group path variables in a Spring @RequestMapping annotated method", "body": "<p>Currently I am trying to reduce the number of parameters on @RequestMapping annotated methods in a class annotation with @RestController using kotlin data classes. Also I don't want to repeat myself on multiple @RequestMapping annotated methods which contain the same path variables.</p>\n\n<p>The code below shows my approach where <code>/multiple/ABC/true/123</code> works as expected but <code>/single/ABC/true/123</code> complains about a missing default constructor. </p>\n\n<pre><code>data class Params(@PathVariable(\"param1\") val param1: String,\n                  @PathVariable(\"param2\") val param2: Boolean,\n                  @PathVariable(\"param3\") val param3: Int)\n\n@RestController\nclass TestController {\n   @RequestMapping(\"/single/{param1}/{param2}/{param3}\")\n   fun single(params: Params) {\n       println(listOf(params.param1, params.param2, params.param3))\n   }\n\n   @RequestMapping(\"/multiple/{param1}/{param2}/{param3}\")\n   fun multiple(@PathVariable(\"param1\") param1: String,\n                @PathVariable(\"param2\") param2: Boolean,\n                @PathVariable(\"param3\") param3: Int) {\n       println(listOf(param1, param2, param3))\n   }\n}\n</code></pre>\n\n<p>When I use the following data class definition instead I get a result but then the instance isn't immutable anymore and may have some fields not updated.</p>\n\n<pre><code>data class Params(@PathVariable(\"param1\") var param1: String = \"\",\n                  @PathVariable(\"param2\") var param2: Boolean = false,\n                  @PathVariable(\"param3\") var param3: Int = 0)\n</code></pre>\n\n<p>Can anyone help me making the first data class definition work?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1548845103, "post_id": 54438414, "comment_id": 95686633, "body": "The warning is not fixable, since the parameter View is mandatory by Android SDK, even if you don&#39;t use it. About the crash, can you please show the View XML definition?"}], "answers": [{"comments": [{"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1548845131, "post_id": 54438708, "comment_id": 95686659, "body": "You only answered half of the question."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1548845769, "post_id": 54438708, "comment_id": 95687057, "body": "His function already has View as parameter <code>fun loginButtonTapped(view: View)</code>..."}, {"owner": {"reputation": 6712, "user_id": 6678991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vT7P5.jpg?s=128&g=1", "display_name": "Mahdi-Malv", "link": "https://stackoverflow.com/users/6678991/mahdi-malv"}, "reply_to_user": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1548845842, "post_id": 54438708, "comment_id": 95687112, "body": "He&#39;s saying when I <b>don&#39;t have it</b>, I get crash, and when I <code>have it</code> I get a warning."}], "tags": [], "owner": {"reputation": 6712, "user_id": 6678991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vT7P5.jpg?s=128&g=1", "display_name": "Mahdi-Malv", "link": "https://stackoverflow.com/users/6678991/mahdi-malv"}, "is_accepted": true, "score": 1, "last_activity_date": 1548845400, "last_edit_date": 1548845400, "creation_date": 1548845098, "answer_id": 54438708, "question_id": 54438414, "link": "https://stackoverflow.com/questions/54438414/how-to-solve-error-when-deleting-view-in-the-onclick-method/54438708#54438708", "title": "how to solve error when deleting &#39;view&#39; in the onClick method?", "body": "<p>This is the way that XML and Java code interact in Android.<br>\nYou must have the view as the function parameter in order to have the instance of the clicked view.</p>\n\n<p>You can try one of the following:</p>\n\n<ul>\n<li>Ignore the lint checking by <strong>suppressing it</strong> (Press the yellow light bulb).</li>\n<li>Use <code>.setOnClickListener()</code> method of view and <em>pass a no param function in the implementation of the Listener</em> <code>onClick(View)</code>.</li>\n</ul>\n\n<pre><code>TextView t;\nt.setOnClickListener(new View.OnClickListener() {\n     @Override\n     public void onClick(View v) {\n         onClickTextData(); // No param\n     }\n});\n</code></pre>\n\n<ul>\n<li>Use <a href=\"http://jakewharton.github.io/butterknife/\" rel=\"nofollow noreferrer\">ButterKnife</a> library.</li>\n</ul>\n\n<pre><code>//All arguments to the listener method are optional.\n\n@OnClick(R.id.submit)\npublic void submit() {\n  // TODO submits data to server...\n}\n</code></pre>\n\n<p>Because the method is called without getting the Button in onCreate. And in order to access that Button, you need to have a view.\nSo to avoid the crash you must add the View instance to the method.</p>\n\n<p>As you can see you have <code>Could not find method loginButtonTapped(View)</code> in the error text. Meaning that this way of implementing <code>onClick</code> needs a function with a <code>view</code> as a parameter.</p>\n"}], "owner": {"reputation": 3875, "user_id": 9101876, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c370f6d96ccaa54d34b81a5eb712f66?s=128&d=identicon&r=PG&f=1", "display_name": "Alexa289", "link": "https://stackoverflow.com/users/9101876/alexa289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 54438708, "answer_count": 1, "score": 1, "last_activity_date": 1548845400, "creation_date": 1548844200, "last_edit_date": 1548844637, "question_id": 54438414, "link": "https://stackoverflow.com/questions/54438414/how-to-solve-error-when-deleting-view-in-the-onclick-method", "title": "how to solve error when deleting &#39;view&#39; in the onClick method?", "body": "<p>so I set the method name when the button is clicked like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/H8GGg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H8GGg.png\" alt=\"enter image description here\"></a></p>\n\n<p>and the in the activity class I set <code>loginButtonTapped</code> method like this:</p>\n\n<pre><code>class LoginActivity : AppCompatActivity(), View.OnTouchListener  {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n    }\n\n    fun loginButtonTapped(view: View) {\n\n    }\n\n}\n</code></pre>\n\n<p>and in the build tab, I have warning, it is said that parameter view is never used:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PaVtT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PaVtT.png\" alt=\"enter image description here\"></a></p>\n\n<p>yes I never used the view arg on that <code>loginButtonTapped</code></p>\n\n<p>and then I try to delete that parameter to be  <code>fun loginButtonTapped() {}</code></p>\n\n<p>but it even worse, I got crash when I run the app:</p>\n\n<blockquote>\n  <p>Process: com.xxxx.lakuinkotlin, PID: 10922\n          java.lang.IllegalStateException: Could not find method loginButtonTapped(View) in a parent or ancestor Context for\n  android:onClick attribute defined on view class\n  android.support.v7.widget.AppCompatButton with id\n  'login_button_loginActivity'</p>\n</blockquote>\n\n<p>so how to avoid that 'Parameter view is never used' and also free from crash ? what went wrong in here?</p>\n"}, {"tags": ["android", "android-studio", "gradle", "kotlin", "android-gradle-plugin"], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 1408421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1b26a9d9a04980f0f366addb50cec23a?s=128&d=identicon&r=PG", "display_name": "ScienceSE", "link": "https://stackoverflow.com/users/1408421/sciencese"}, "edited": false, "score": 0, "creation_date": 1548847411, "post_id": 54438221, "comment_id": 95688109, "body": "Thank you, that makes sense. But if the META-INF is not required, why is it not ignored by default in Android projects? Should it be reported as a bug to Gradle or Android Studio? Also, having <code>pickFirst</code> solved the problem, which means that META-INF has been included in the APK(?), but I may assume that it is ignored, i.e. the one can include is in APK, but it does not have any use there. Did I get it right? Also the duplicates coming from referenced libraries seems to be a bug in referenced libraries, right?"}, {"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "reply_to_user": {"reputation": 575, "user_id": 1408421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1b26a9d9a04980f0f366addb50cec23a?s=128&d=identicon&r=PG", "display_name": "ScienceSE", "link": "https://stackoverflow.com/users/1408421/sciencese"}, "edited": false, "score": 0, "creation_date": 1548847675, "post_id": 54438221, "comment_id": 95688260, "body": "@ScienceSE on Android it&#39;s just <code>META-INF&#47;MANIFEST.MF</code>, <code>META-INF&#47;CERT.SF</code>, <code>META-INF&#47;CERT.RSA</code> ...this is not a bug, but barely based upon the requirement for unique file-names within the package - and trying to package duplicate file-names (it cannot even determine if these are identical files)."}, {"owner": {"reputation": 575, "user_id": 1408421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1b26a9d9a04980f0f366addb50cec23a?s=128&d=identicon&r=PG", "display_name": "ScienceSE", "link": "https://stackoverflow.com/users/1408421/sciencese"}, "edited": false, "score": 0, "creation_date": 1548848918, "post_id": 54438221, "comment_id": 95688990, "body": "Yes, but the thing is: I just created an empty android project (i.e. it shouldn&#39;t contain any duplicates) and then added a library (as described in the library&#39;s README) and it started to throw errors, which were not mentioned in any &quot;getting started&quot; android docs as far as I can remember which is frustrating. It would make sense if android project would ignore the rest of <code>META_INF</code> files by default, IMO that would make things better, wouldn&#39;t it?"}], "tags": [], "owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "is_accepted": true, "score": 4, "last_activity_date": 1548843924, "last_edit_date": 1548843924, "creation_date": 1548843599, "answer_id": 54438221, "question_id": 54438064, "link": "https://stackoverflow.com/questions/54438064/an-error-after-adding-a-library-to-the-android-project-more-than-one-file-was-f/54438221#54438221", "title": "An error after adding a library to the Android project (More than one file was found with OS independent path &#39;META-INF/kotlinx-io.kotlin_module&#39;)", "body": "<p>Android does not require any of these files in the <code>META-INF</code> directory of the APK package.</p>\n\n<p>and these duplicate files in the <code>META-INF</code> directory originate from referenced libraries -</p>\n\n<p>there is nothing else to do about, except to use <code>packagingOptions</code>.</p>\n\n<p>also see: <a href=\"https://stackoverflow.com/questions/70216/whats-the-purpose-of-meta-inf\">What is the purpose of META-INF?</a> (Android <code>APK</code> != Java <code>JAR</code>).</p>\n\n<p>these are indeed similar package formats, but still not exactly the same.</p>\n"}], "owner": {"reputation": 575, "user_id": 1408421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1b26a9d9a04980f0f366addb50cec23a?s=128&d=identicon&r=PG", "display_name": "ScienceSE", "link": "https://stackoverflow.com/users/1408421/sciencese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 0, "accepted_answer_id": 54438221, "answer_count": 1, "score": 3, "last_activity_date": 1548843924, "creation_date": 1548843164, "question_id": 54438064, "link": "https://stackoverflow.com/questions/54438064/an-error-after-adding-a-library-to-the-android-project-more-than-one-file-was-f", "title": "An error after adding a library to the Android project (More than one file was found with OS independent path &#39;META-INF/kotlinx-io.kotlin_module&#39;)", "body": "<p>I've been playing with the \"Hello World\" project created in Android Studio 3.3 (New Empty Project) and decided to <a href=\"https://github.com/ktorio/ktor\" rel=\"nofollow noreferrer\">add a library (ktor)</a> to the project. I followed the README instructions and simply added the required things to the gradle file. As I worked with the websockets, the following lines have been added to the app's gradle build file:</p>\n\n<pre><code>    implementation \"io.ktor:ktor-client-websocket:$ktor_version\"\n    implementation \"io.ktor:ktor-client-cio:$ktor_version\"\n    implementation \"io.ktor:ktor-client-android:$ktor_version\"\n    implementation \"io.ktor:ktor-client-cio:$ktor_version\"\n</code></pre>\n\n<p>Right after adding these the project stopped to compile and I received the following error:</p>\n\n<pre><code>More than one file was found with OS independent path 'META-INF/kotlinx-io.kotlin_module'\n</code></pre>\n\n<p>Could someone please explain why do I get this error? I did not do anything illegal, I just added library to the simple, standard empty project created in Android Studio and somehow after adding a new dependency, things stopped to work well.</p>\n\n<p>I found some similar questions on StackOverflow and GitHub Issues, but I did not find a good explanation why does it happen and how to prevent such errors. I just found a bunch of quick and short answers / solutions, written in a manner \"Add this to your project configuration and it'll work, trust me, I'm an expert\", but I'm not satisfied with it as I think that as a developer I must understand what am I doing and why it works this way and IMO it's not professional just to add things the one does not fully understand, hoping that it'll solve the issue.</p>\n\n<p>So, I tried my best to understand the issue. As far as I understood based on other answers, the issue arises from the fact that I somehow ended up having 2 instances of one library inside my project (?), and so Gradle cannot understand which one to pick. But then I have cannot understand how? (I did not add any other \"external dependencies\")</p>\n\n<p>As for the solution, the most common answer was adding the <code>'META-INF/kotlinx-io.kotlin_module'</code> to the <code>excludePath</code> packaging options, but I don't understand why is it supposed to be correct. For me it sounds like I'm telling the build system \"please exclude these paths from my project / don't scan them for libraries\". But I'm not sure if it's a correct approach, because in this case I effectively exclude several libraries / dependencies from my project which might lead to the runtime exceptions <code>NoClassDefFoundError</code> or something similar in future.</p>\n\n<p>The second most common answer was adding the <code>pickFirst 'META-INF/kotlinx-io.kotlin_module'</code> to the packaging options, which looks a bit better as it tells the build system \"when you have multiple entries of some library, please take the first one you've found\", i.e. the library will be included into my project and so I'm on the safe side, but still I have a concern about this solution as a person coming from C/C++/Rust/System_Programming world: in terms of C (simplified) let's imagine that I ended up having 2 libraries of 2 different versions (1.1, 1.2) and I have a header file which expects that I'm linked against v.1.2 of the library, if I picked up a wrong version library (1.1), but use the header from the newer one and expect that it works, well... it obviously won't work and I assume that the same issue might happen on Android (but I'm not sure about that as I'm not an expert), i.e. the <code>pickFirst</code> seems to be a good solution as long as we can guarantee that \"multiple entries\" of the library we're using, have the same version.</p>\n\n<p>So I tried to use a <code>pickFirst</code> approach for now and ended up having an additional section in my gradle build file:</p>\n\n<pre><code>    packagingOptions {\n        pickFirst 'META-INF/kotlinx-io.kotlin_module'\n        pickFirst 'META-INF/atomicfu.kotlin_module'\n        pickFirst 'META-INF/kotlinx-coroutines-io.kotlin_module'\n    }\n</code></pre>\n\n<p>which did the job, but I'm still not sure if it's the best solution. I think the proper approach would be to understand why the error occurs and combat the root cause of it instead of trying to workaround it with additional packaging options.</p>\n"}, {"tags": ["android", "kotlin", "androidx", "kodein"], "comments": [{"owner": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "edited": false, "score": 1, "creation_date": 1548842799, "post_id": 54437922, "comment_id": 95685246, "body": "Can you share the code here?"}, {"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "reply_to_user": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "edited": false, "score": 0, "creation_date": 1548842844, "post_id": 54437922, "comment_id": 95685269, "body": "@Kartik see Link in original Post. There I have zipped the whole example Android Studio project"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 4, "creation_date": 1548843246, "post_id": 54437922, "comment_id": 95685544, "body": "@Tranquillo It is far better to share code samples directly on Stack Overflow. Think about the time someone who wants to help will lost finding your error if he has to download your whole project, understand the structure, naviguate through your code to find the problem..."}, {"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "reply_to_user": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548843344, "post_id": 54437922, "comment_id": 95685605, "body": "@Ctorres I know. but I dont know what to share?"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548843457, "post_id": 54437922, "comment_id": 95685668, "body": "You can copy/paste your code and format it with the tools in the text editors. Alternatively, you can format the code by adding four spaces before every code lines. You can also enclose a single line code with backquotes (`)."}, {"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "reply_to_user": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548843606, "post_id": 54437922, "comment_id": 95685755, "body": "@Ctorres I know how to paste code. I wouldn&#39;t know which part of code I should share here?"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 1, "creation_date": 1548843655, "post_id": 54437922, "comment_id": 95685786, "body": "Oh sorry, I didn&#39;t read well your comment. I though you were asking how to format the code. You should share the code you suspect to doesn&#39;t work. You can share your XML containing the layouts for example, I don&#39;t know what&#39;s wrong, I can tell you exactly what to share..."}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548843737, "post_id": 54437922, "comment_id": 95685826, "body": "You can share the main components of your application, then if everything seems fine, someone will probably ask you for another part of your code ;)"}, {"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "reply_to_user": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548843778, "post_id": 54437922, "comment_id": 95685856, "body": "@Ctorres I have added the BaseActivity, where I have the layouts resource id. I set that with R.layout.main_layout in the MainActivity."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 0, "creation_date": 1548844960, "post_id": 54437922, "comment_id": 95686552, "body": "But this is not your actual main activity, it is the parent class of your main activity..."}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "edited": false, "score": 0, "creation_date": 1548845151, "post_id": 54438572, "comment_id": 95686676, "body": "Thanks I selected the wrong onCreate(). I javent seen this second parameter at all"}, {"owner": {"reputation": 683, "user_id": 5759716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Df6cHI8KWD4/AAAAAAAAAAI/AAAAAAAAMwc/w97owknFTVk/photo.jpg?sz=128", "display_name": "Maksim Novikov", "link": "https://stackoverflow.com/users/5759716/maksim-novikov"}, "reply_to_user": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "edited": false, "score": 0, "creation_date": 1548845200, "post_id": 54438572, "comment_id": 95686707, "body": "Sometimes happens :D"}], "tags": [], "owner": {"reputation": 683, "user_id": 5759716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Df6cHI8KWD4/AAAAAAAAAAI/AAAAAAAAMwc/w97owknFTVk/photo.jpg?sz=128", "display_name": "Maksim Novikov", "link": "https://stackoverflow.com/users/5759716/maksim-novikov"}, "is_accepted": true, "score": 2, "last_activity_date": 1548844643, "creation_date": 1548844643, "answer_id": 54438572, "question_id": 54437922, "link": "https://stackoverflow.com/questions/54437922/simple-kotlin-project-does-not-show-any-ui/54438572#54438572", "title": "Simple Kotlin Project does not show any UI", "body": "<p>You override the wrong <code>onCreate(savedInstanceState: Bundle?, persistentState: PersistableBundle?)</code> in you activity:\nuse this : <code>onCreate(savedInstanceState: Bundle?)</code></p>\n"}], "owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 54438572, "answer_count": 1, "score": -1, "last_activity_date": 1549887054, "creation_date": 1548842746, "last_edit_date": 1549887054, "question_id": 54437922, "link": "https://stackoverflow.com/questions/54437922/simple-kotlin-project-does-not-show-any-ui", "title": "Simple Kotlin Project does not show any UI", "body": "<p>I have a <a href=\"https://ufile.io/g9fi7\" rel=\"nofollow noreferrer\">very simple Android Project in Kotlin</a>. Just to dig in Kodein. I can not see the two TextViews in the main_layout?</p>\n\n<p>I have used MVP pattern for the only MainActivity I have there..</p>\n\n<p>The app starts without a crash and is show a blank white screen. </p>\n\n<p>Any hints?</p>\n\n<p>BaseActivity:</p>\n\n<pre><code>abstract class BaseActivity&lt;V : BasePresenter.View&gt; : AppCompatActivity(), BasePresenter.View  {\n\n    protected abstract val layoutResourceId : Int\n    protected abstract val presenter : BasePresenter&lt;V&gt;\n\n    val kodeinMu = LazyKodein(appKodein)\n\n    protected abstract fun initUI()\n    protected abstract fun initPresenter()\n\n    override fun onCreate(savedInstanceState: Bundle?, persistentState: PersistableBundle?) {\n        super.onCreate(savedInstanceState, persistentState)\n        setContentView(layoutResourceId)\n\n        initUI()\n        initPresenter()\n    }\n\n    override fun onPause() {\n        super.onPause()\n        presenter.pause()\n    }\n\n    override fun onStop() {\n        super.onStop()\n        presenter.stop()\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        presenter.destroy()\n    }\n\n    protected fun toast(s: String) {\n        System.out.println(\"TAG $s\")\n    }\n}\n</code></pre>\n\n<p>I have read that it is because of API 28 you only can see on API_28 devices or emulators. Either emulator or on real device were also blanked out.</p>\n"}, {"tags": ["android", "kotlin", "retrofit2", "multipartform-data", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "is_accepted": true, "score": 0, "last_activity_date": 1549021644, "creation_date": 1549021644, "answer_id": 54478869, "question_id": 54437913, "link": "https://stackoverflow.com/questions/54437913/multipart-form-data-with-primitive-type-data-along-with-file-in-retrofit/54478869#54478869", "title": "Multipart Form Data with primitive type data along with file in retrofit?", "body": "<p>At first you need to add the Scalar Converter to retrofit so that the data which you sent will be correctly obtained at the back end.</p>\n\n<pre><code>Retrofit.Builder().addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .addConverterFactory(ScalarsConverterFactory.create())\n</code></pre>\n\n<p>For sending primitive data in form data POST request you've to send it like this,</p>\n\n<pre><code>@Multipart\n@POST(AppConstants.Network.CREATE_STORE)\nfun createStore(\n    @Header(\"Authorization\") token: String,\n    @Part imagePath: MultipartBody.Part?,\n    @Part(\"Name\") storeName: String,\n    @Part(\"StoreOwnerName\") storeOwnerName: String,\n    @Part(\"StoreOwnerGender\") storeOwnerGender: String?,\n    @Part(\"IsRegistered\") isRegistered: Boolean?,\n</code></pre>\n\n<p>Calling the request by</p>\n\n<pre><code>apiService.createStore(\n            token = \"bearer \".plus(AppPreferences(context!!).token!!),\n            imagePath = if (imageFilePath.isEmpty()) null else MultipartBody.Part.createFormData(\n                \"ImagePath\",\n                store.imagePathFile!!.name!!,\n                RequestBody.create(MediaType.parse(\"image/*\"), store.imagePathFile)\n            storeName = store.name,\n            storeOwnerName = store.storeOwnerName,\n            storeOwnerGender = store.storeOwnerGender,\n            isRegistered = store.isRegistered,\n</code></pre>\n"}], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 0, "accepted_answer_id": 54478869, "answer_count": 1, "score": 0, "last_activity_date": 1549021644, "creation_date": 1548842725, "question_id": 54437913, "link": "https://stackoverflow.com/questions/54437913/multipart-form-data-with-primitive-type-data-along-with-file-in-retrofit", "title": "Multipart Form Data with primitive type data along with file in retrofit?", "body": "<p><a href=\"https://i.stack.imgur.com/qHCKH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qHCKH.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above request has values type of String, Boolean, Int and an image attachment which is done using multipart.</p>\n\n<pre><code> val retrofit = Retrofit.Builder().addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n            .addConverterFactory(ScalarsConverterFactory.create())\n            .addConverterFactory(GsonConverterFactory.create())\n</code></pre>\n\n<p>I've also added Scalar converters to the request and my API is</p>\n\n<pre><code>@Multipart\n@POST(AppConstants.Network.CREATE_STORE)\nfun createStore(\n   @Header(\"Authorization\") token: String,\n\n   //Step 1\n   @Part imagePath: MultipartBody.Part?,\n   @Part(\"Name\") storeName: RequestBody,\n   @Part(\"StoreOwnerName\") storeOwnerName: RequestBody,\n   @Part(\"StoreOwnerGender\") storeOwnerGender: RequestBody,\n   @Part(\"StoreOwnerDob\") storeOwnerDob: RequestBody,\n   @Part(\"AddressLine1\") addressLine1: RequestBody,\n   @Part(\"AddressLine2\") addressLine2: RequestBody,\n   @Part(\"AddressLine3\") addressLine3: RequestBody,\n   @Part(\"Place\") place: RequestBody,\n   @Part(\"PinCode\") pinCode: Int,\n   @Part(\"ContactNumber\") contactNumber: RequestBody,\n   @Part(\"Email\") email: RequestBody,\n\n   //Step 2\n   @Part(\"IsRegistered\") isRegistered: Boolean,\n   @Part(\"HasGst\") hasGst: Boolean,\n   @Part(\"GSTNumber\") GSTNumber: Int,\n   @Part(\"HasInsurance\") hasInsurance: Boolean,\n   @Part(\"HasBankAccount\") hasBankAccount: Boolean,\n\n   //Step 3\n   @Part(\"StaffSize\") staffSize: Int,\n   @Part(\"StoreSize\") storeSize: Int,\n   @Part(\"RunningFrom\") runningFromDate: RequestBody,\n   @Part(\"StoreTypeId\") storeTypeId: Int,\n   @Part(\"AverageTurnOver\") averageTurnOver: Int,\n   // @Part(\"AverageCustomerVisit\") averageCustomerVisit: String,\n\n   //  @Part(\"HasStaff\") hasStaff: Boolean,\n   @Part(\"OwnerResponseId\") ownerResponseId: Int,\n   @Part(\"Remarks\") remarks: RequestBody\n\n   ): Single&lt;ResponseBody&gt;\n</code></pre>\n\n<p>My api definition is,</p>\n\n<pre><code>   apiService.createStore(\n            \"bearer \".plus(AppPreferences(context!!).token!!),\n            storeName = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            imagePath = MultipartBody.Part.createFormData(\n                \"ImagePath\",\n                store.imagePathFile?.name!!,\n                RequestBody.create(MediaType.parse(\"image/*\"), imageFilePath)\n            ),\n            storeOwnerName = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            storeOwnerGender = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            storeOwnerDob = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            addressLine1 = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            addressLine2 = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            addressLine3 = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            place = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Fsafa\"),\n            pinCode = 642526,\n            contactNumber = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            email = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"etet@gga.co\"),\n            isRegistered = false,\n            hasGst = true,\n            GSTNumber = 23423432,\n            hasBankAccount = false,\n            averageTurnOver = 345346,\n            hasInsurance = false,\n            staffSize = 546,\n            ownerResponseId = 2,\n            remarks = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            runningFromDate = RequestBody.create(MediaType.parse(\"multipart/form-data\"), \"Your Name\"),\n            storeSize = 324,\n            storeTypeId = 2\n        )\n</code></pre>\n"}, {"tags": ["kotlin", "android-room", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 7526521, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mDT90.png?s=128&g=1", "display_name": "KyawLinnThant", "link": "https://stackoverflow.com/users/7526521/kyawlinnthant"}, "edited": false, "score": 0, "creation_date": 1548843836, "post_id": 54437748, "comment_id": 95685904, "body": "Thank you very much, I just going to read the documentation again now, you save me. Cheers!!!!"}, {"owner": {"reputation": 2702, "user_id": 7254873, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jfQVFidpSlo/AAAAAAAAAAI/AAAAAAAAAFM/DBb8C8t0w64/photo.jpg?sz=128", "display_name": "Sumit Shukla", "link": "https://stackoverflow.com/users/7254873/sumit-shukla"}, "edited": false, "score": 0, "creation_date": 1594207725, "post_id": 54437748, "comment_id": 111044188, "body": "What if a list is inserted directly?"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 8, "last_activity_date": 1548842183, "creation_date": 1548842183, "answer_id": 54437748, "question_id": 54437576, "link": "https://stackoverflow.com/questions/54437576/how-can-i-know-insert-of-room-is-completed/54437748#54437748", "title": "How can I know @Insert of Room is completed?", "body": "<p>If the method call succeeded for insert, then it was succesful, otherwise you'd get an exception. </p>\n\n<p>Also, these don't have to be void-returning methods.</p>\n\n<p>You can have <code>@Insert</code> return the type of the primary key in the table, which will be the key of the newly inserted record.</p>\n\n<pre><code>@Insert(onConflict = OnConflictStrategy.IGNORE)\nfun saveProfile(model: Profile): Int\n</code></pre>\n\n<p>In case of <code>@Delete</code>, it will return the number of rows deleted if you return an <code>Int</code>:</p>\n\n<pre><code>@Delete\nfun deleteProfiles(profiles: List&lt;Profile&gt;): Int\n</code></pre>\n\n<p>Same goes for a more manual implementation using <code>@Query</code>, returns the number of rows affected if you return an <code>Int</code>:</p>\n\n<pre><code>@Query(\"DELETE FROM profiles\")\nfun deleteAllProfiles(): Int\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 7526521, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mDT90.png?s=128&g=1", "display_name": "KyawLinnThant", "link": "https://stackoverflow.com/users/7526521/kyawlinnthant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3172, "favorite_count": 0, "accepted_answer_id": 54437748, "answer_count": 1, "score": 3, "last_activity_date": 1548842183, "creation_date": 1548841646, "question_id": 54437576, "link": "https://stackoverflow.com/questions/54437576/how-can-i-know-insert-of-room-is-completed", "title": "How can I know @Insert of Room is completed?", "body": "<blockquote>\n  <p>My scenario</p>\n</blockquote>\n\n<p>I use Coroutines and Room to save my app's user profile data. I have CompleteProfileActivity :in that User fill their information and confirm it( Confirm button ). I send them to server and observe response. If response is success. I save them to my ProfileDatabase. </p>\n\n<blockquote>\n  <p>My question\n  How can I know my database is updated or my insertion is complete, my deletion is completed not by getting the size? @Insert @Delete is void return methods. So how can I know except the database size?</p>\n</blockquote>\n\n<pre><code>@Dao\ninterface ProfileDao {\n@Insert(onConflict = OnConflictStrategy.IGNORE)\nfun saveProfile(model:Profile)\n\n@Query(\"SELECT * FROM profile_table\")\nfun getProfile():Deferred&lt;Profile&gt;\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-softkeyboard"], "comments": [{"owner": {"reputation": 938, "user_id": 4281588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BX6mnICfCjo/AAAAAAAAAAI/AAAAAAAAABM/yJ_tCSunjbM/photo.jpg?sz=128", "display_name": "Vishal G. Gohel", "link": "https://stackoverflow.com/users/4281588/vishal-g-gohel"}, "edited": false, "score": 0, "creation_date": 1548839486, "post_id": 54436789, "comment_id": 95683166, "body": "are you using <i>compile &#39;com.sothree.slidinguppanel:library:3.4.0&#39;</i>"}, {"owner": {"reputation": 665, "user_id": 8106520, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/73k62.jpg?s=128&g=1", "display_name": "Muhammad Saad", "link": "https://stackoverflow.com/users/8106520/muhammad-saad"}, "reply_to_user": {"reputation": 938, "user_id": 4281588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BX6mnICfCjo/AAAAAAAAAAI/AAAAAAAAABM/yJ_tCSunjbM/photo.jpg?sz=128", "display_name": "Vishal G. Gohel", "link": "https://stackoverflow.com/users/4281588/vishal-g-gohel"}, "edited": false, "score": 0, "creation_date": 1548839554, "post_id": 54436789, "comment_id": 95683205, "body": "@VishalG.Gohel yes"}, {"owner": {"reputation": 665, "user_id": 8106520, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/73k62.jpg?s=128&g=1", "display_name": "Muhammad Saad", "link": "https://stackoverflow.com/users/8106520/muhammad-saad"}, "reply_to_user": {"reputation": 938, "user_id": 4281588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BX6mnICfCjo/AAAAAAAAAAI/AAAAAAAAABM/yJ_tCSunjbM/photo.jpg?sz=128", "display_name": "Vishal G. Gohel", "link": "https://stackoverflow.com/users/4281588/vishal-g-gohel"}, "edited": false, "score": 0, "creation_date": 1548840433, "post_id": 54436789, "comment_id": 95683797, "body": "@VishalG.Gohel how will it be resolved?"}, {"owner": {"reputation": 938, "user_id": 4281588, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BX6mnICfCjo/AAAAAAAAAAI/AAAAAAAAABM/yJ_tCSunjbM/photo.jpg?sz=128", "display_name": "Vishal G. Gohel", "link": "https://stackoverflow.com/users/4281588/vishal-g-gohel"}, "edited": false, "score": 0, "creation_date": 1548840597, "post_id": 54436789, "comment_id": 95683889, "body": "ask in github issue section maybe developer of this library can help you."}], "owner": {"reputation": 665, "user_id": 8106520, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/73k62.jpg?s=128&g=1", "display_name": "Muhammad Saad", "link": "https://stackoverflow.com/users/8106520/muhammad-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548851237, "creation_date": 1548838965, "last_edit_date": 1548851237, "question_id": 54436789, "link": "https://stackoverflow.com/questions/54436789/keyboard-lags-sliding-panel", "title": "Keyboard lags sliding panel", "body": "<p>I'm stuck in keyboard issue \nI'm attaching the link below so you can watch the few seconds animation.</p>\n\n<p><a href=\"https://drive.google.com/file/d/17G9xodQ_Z3k5yW_ygwrdn9Wqbcg0Jvqz/view?usp=sharing\" rel=\"nofollow noreferrer\">Click to watch animation</a> </p>\n\n<p>In words:\nwhen keyboard opens and if I slide down the sliding panel. the panel animation lags and it directs collapsed means from top to bottom without any drag animation\nit's been a few days I'm stuck in this issue.\nI'm hiding the keyboard when my sliding panel drags</p>\n\n<p>I'm using <a href=\"https://github.com/umano/AndroidSlidingUpPanel\" rel=\"nofollow noreferrer\">umano sliding panel library</a> </p>\n\n<p>here is code:</p>\n\n<pre><code>    sliding_layout.addPanelSlideListener(object : SlidingUpPanelLayout.PanelSlideListener {\n        override fun onPanelSlide(panel: View?, slideOffset: Float) {\n            if (slideOffset &lt; 1.0) { //offset becomes less then 1 when starting to collapsed \n                  Utils.hideKeyboard(this@DestinationAddressActivity,panel!!)\n\n            }\n        }\n\n        override fun onPanelStateChanged(panel: View?, previousState: SlidingUpPanelLayout.PanelState?, newState: SlidingUpPanelLayout.PanelState?) {\n            if (newState == SlidingUpPanelLayout.PanelState.COLLAPSED) {\n                Utils.hideKeyboard(this@DestinationAddressActivity, etSourceAddr)\n                stopStateHide()\n                calculateLayoutHeight()\n                etSourceAddr.isCursorVisible = false\n                etDestAddr.isCursorVisible = false\n\n                val cameraPosition = CameraPosition.Builder()\n                        .target(selectedLatLng)\n                        .zoom(mMap?.cameraPosition?.zoom!!).build()\n\n                viewMap(cameraPosition, selectedLatLng)\n            } else {\n                stopStateShow()\n                recyclerViewSaved.visibility = View.VISIBLE\n            }\n        }\n\n    })\n\n\n\n //sliding Panel dependency\n implementation 'com.sothree.slidinguppanel:library:3.4.0'\n</code></pre>\n"}, {"tags": ["android", "gradle", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1548839802, "post_id": 54436716, "comment_id": 95683371, "body": "What did you change recently using a list, array or collection ? <code>IndexOutOfBoundsException: Index: 1, Size: 1</code> means you are trying to reach an index that is not in a list. For example, array[4] for a list with 2 elements will cause this error."}, {"owner": {"reputation": 394, "user_id": 2196216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOnwv.png?s=128&g=1", "display_name": "Mubarak Mohideen", "link": "https://stackoverflow.com/users/2196216/mubarak-mohideen"}, "reply_to_user": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 1, "creation_date": 1548842782, "post_id": 54436716, "comment_id": 95685231, "body": "@Elynad error occurring from gradle build not in the class project class"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1548845585, "post_id": 54436716, "comment_id": 95686925, "body": "Are you sure about that ? Could you show us your BaseLayoutModel.kt please ?"}, {"owner": {"reputation": 851, "user_id": 1729227, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0139f7b2ac2177f887d43ce8aea31241?s=128&d=identicon&r=PG", "display_name": "Marco Martinelli", "link": "https://stackoverflow.com/users/1729227/marco-martinelli"}, "edited": false, "score": 0, "creation_date": 1552777839, "post_id": 54436716, "comment_id": 97141845, "body": "@MubarakMohideen I&#39;m experiencing this exact same bug with databinding and I&#39;ve lost 2 days already. As you say the exception is from :app:dataBindingGenBaseClassesDebug and not from the code itself. Have you ever figured this out?"}], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 9987309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vUtsn.jpg?s=128&g=1", "display_name": "iCantC", "link": "https://stackoverflow.com/users/9987309/icantc"}, "edited": false, "score": 0, "creation_date": 1576049308, "post_id": 57132771, "comment_id": 104767719, "body": "Was about to leave any hopes. Debugging DataBinding Error is still a nightmare."}], "tags": [], "owner": {"reputation": 157, "user_id": 4688694, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-UCypm_r3PCA/AAAAAAAAAAI/AAAAAAAAABE/NwwSZkbOCPo/photo.jpg?sz=128", "display_name": "ghiath ", "link": "https://stackoverflow.com/users/4688694/ghiath"}, "is_accepted": false, "score": 3, "last_activity_date": 1563708558, "creation_date": 1563708558, "answer_id": 57132771, "question_id": 54436716, "link": "https://stackoverflow.com/questions/54436716/gradle-build-task-appdatabindinggenbaseclassesshopdevdebug-failed/57132771#57132771", "title": "Gradle Build Task :app:dataBindingGenBaseClassesShopDevDebug Failed", "body": "<p>in my case I was using  <code>&lt;include</code> with databinding and I accidentally used \n <code>android:id</code>  without <code>@+id/</code> </p>\n"}, {"tags": [], "owner": {"reputation": 2417, "user_id": 900246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OBNHv.jpg?s=128&g=1", "display_name": "Andrei Toader", "link": "https://stackoverflow.com/users/900246/andrei-toader"}, "is_accepted": false, "score": 1, "last_activity_date": 1563773454, "creation_date": 1563773454, "answer_id": 57139670, "question_id": 54436716, "link": "https://stackoverflow.com/questions/54436716/gradle-build-task-appdatabindinggenbaseclassesshopdevdebug-failed/57139670#57139670", "title": "Gradle Build Task :app:dataBindingGenBaseClassesShopDevDebug Failed", "body": "<p>I can confirm I fixed this issue by looking at all the xmls and finding one id that was not properly set. It was without \"@+id/\".</p>\n"}], "owner": {"reputation": 394, "user_id": 2196216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOnwv.png?s=128&g=1", "display_name": "Mubarak Mohideen", "link": "https://stackoverflow.com/users/2196216/mubarak-mohideen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1563773454, "creation_date": 1548838753, "question_id": 54436716, "link": "https://stackoverflow.com/questions/54436716/gradle-build-task-appdatabindinggenbaseclassesshopdevdebug-failed", "title": "Gradle Build Task :app:dataBindingGenBaseClassesShopDevDebug Failed", "body": "<p>I am having multiple build variant and also used data binding in my project. issue occurred when i changed structure of package.after build the app during execution of  <code>:app:dataBindingGenBaseClassesShopDevDebug</code> Task gets failed. before it's working fine. after changes happened in package structure. facing a issue. I am sharing my error log below</p>\n\n<pre><code>java.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n    at java.util.Collections$SingletonList.get(Collections.java:4815)\n    at android.databinding.tool.ext.ExtKt.androidId(ext.kt:108)\n    at android.databinding.tool.writer.BaseLayoutModel.readableName(BaseLayoutModel.kt:131)\n    at android.databinding.tool.writer.BaseLayoutModel.fieldName(BaseLayoutModel.kt:103)\n    at android.databinding.tool.writer.BaseLayoutModel$COMPARE_FIELD_NAME$1.compare(BaseLayoutModel.kt:28)\n    at android.databinding.tool.writer.BaseLayoutModel$COMPARE_FIELD_NAME$1.compare(BaseLayoutModel.kt:26)\n    at java.util.TimSort.countRunAndMakeAscending(TimSort.java:355)\n    at java.util.TimSort.sort(TimSort.java:220)\n    at java.util.Arrays.sort(Arrays.java:1438)\n    at kotlin.collections.ArraysKt___ArraysJvmKt.sortWith(_ArraysJvm.kt:1365)\n    at kotlin.collections.CollectionsKt___CollectionsKt.sortedWith(_Collections.kt:886)\n    at android.databinding.tool.writer.BaseLayoutModel.&lt;init&gt;(BaseLayoutModel.kt:75)\n    at android.databinding.tool.BaseDataBinder.generateAll(BaseDataBinder.kt:54)\n    at com.android.build.gradle.internal.tasks.databinding.DataBindingGenBaseClassesTask$CodeGenerator.run(DataBindingGenBaseClassesTask.kt:218)\n    at com.android.build.gradle.internal.tasks.databinding.DataBindingGenBaseClassesTask.writeBaseClasses(DataBindingGenBaseClassesTask.kt:101)\n    at sun.reflect.GeneratedMethodAccessor1320.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n    at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:50)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:131)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:120)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:99)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:101)\n    at org.gradle.api.internal.tasks.execution.FinalizeInputFilePropertiesTaskExecuter.execute(FinalizeInputFilePropertiesTaskExecuter.java:44)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:91)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:62)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:59)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n    at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.run(EventFiringTaskExecuter.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:300)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:292)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:174)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:90)\n    at org.gradle.internal.operations.DelegatingBuildOperationExecutor.run(DelegatingBuildOperationExecutor.java:31)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:46)\n    at org.gradle.execution.taskgraph.LocalTaskInfoExecutor.execute(LocalTaskInfoExecutor.java:42)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:277)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareWorkItemExecutor.execute(DefaultTaskExecutionGraph.java:262)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:135)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.execute(DefaultTaskPlanExecutor.java:200)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.executeWithWork(DefaultTaskPlanExecutor.java:191)\n    at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$ExecutorWorker.run(DefaultTaskPlanExecutor.java:130)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n"}, {"tags": ["dom", "kotlin", "webassembly"], "owner": {"reputation": 445, "user_id": 866889, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b45ab530828a678a470cdb85f8bebe3b?s=128&d=identicon&r=PG", "display_name": "Dmitry Alexandrov", "link": "https://stackoverflow.com/users/866889/dmitry-alexandrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1577821428, "creation_date": 1548838574, "question_id": 54436668, "link": "https://stackoverflow.com/questions/54436668/kotlin-webassembly-access-dom", "title": "Kotlin WebAssembly access DOM", "body": "<p>I've got the following code in Kotlin</p>\n\n<pre><code>import kotlinx.interop.wasm.dom.*\nimport kotlinx.wasm.jsinterop.*\n\nfun main(args: Array&lt;String&gt;) {\n    val veryImportantCalculation = 42\n\n    //access the #wasm in html and append it to the element\n\n}\n</code></pre>\n\n<p>which is compiled to wasmFunctions.wasm,</p>\n\n<p>and an extremely easy HTML:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset='UTF-8'&gt;\n  &lt;script wasm=\"./wasmFunctions.wasm\" src=\"./wasmFunctions.wasm.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;label id='wasm'&gt;&lt;/label&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I need to put the veryImportantCalculation value from Kotlin-to-wasm code in the #wasm label. Is there a way to with the imported dom library?</p>\n"}, {"tags": ["android", "json", "kotlin", "retrofit", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "is_accepted": true, "score": 0, "last_activity_date": 1548836649, "creation_date": 1548836649, "answer_id": 54436109, "question_id": 54436011, "link": "https://stackoverflow.com/questions/54436011/get-arraylist-in-json/54436109#54436109", "title": "Get arraylist in JSON", "body": "<p>Your toast does not use <code>i</code> from the for loop. Try switching to this:\n<code>longToast(i.component1().name.toString())</code></p>\n"}], "owner": {"reputation": 1699, "user_id": 5261462, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kLUcB.jpg?s=128&g=1", "display_name": "Hoo", "link": "https://stackoverflow.com/users/5261462/hoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54436109, "answer_count": 1, "score": 0, "last_activity_date": 1548836649, "creation_date": 1548836274, "question_id": 54436011, "link": "https://stackoverflow.com/questions/54436011/get-arraylist-in-json", "title": "Get arraylist in JSON", "body": "<p>My JSON looked like this</p>\n\n<pre><code>{\"status\":true,\"error_message\":[],\"locations\":[{\"id\":\"12\",\"name\":\"office\"},{\"id\":\"13\",\"name\":\"home\"}]}\n</code></pre>\n\n<p>I'm using coroutine and retrofit to communicate with web service. I would like to get <code>office</code> and <code>home</code> in <code>locations</code> arrayList, but I only able to get <code>office</code>.</p>\n\n<pre><code>fun getLocation(): String {\n                val service = RetrofitFactory.makeRetrofitService()\n                GlobalScope.launch(Dispatchers.Main) {\n                    val request = WebApi.getLocationList(context)\n                    request?.locations.let {\n                        for (i in it!!.iterator()) {\n                           longToast(request?.locations!!.size.toString()) \n\nlongToast(request?.locations!!.component1().name.toString())\n                        }\n                    }\n                }           \n                return \"sss\"\n            }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>2\noffice\n2\noffice\n</code></pre>\n\n<p><strong>Desired output</strong></p>\n\n<pre><code>2\noffine\n2\nhome\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 3502, "user_id": 6880611, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-cZQAEORHS0I/AAAAAAAAAAI/AAAAAAAAAe4/KrGn0vxt7hE/photo.jpg?sz=128", "display_name": "Tejas Pandya", "link": "https://stackoverflow.com/users/6880611/tejas-pandya"}, "edited": false, "score": 0, "creation_date": 1548834744, "post_id": 54435592, "comment_id": 95680669, "body": "have you tried with <code>TextInputLayout::class.java.getDeclaredField(&quot;mFocusedTextCo&zwnj;&#8203;lor&quot;)</code>"}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1548834982, "post_id": 54435592, "comment_id": 95680769, "body": "<code>TextInputLayout</code>&#39;s field names have changed. <code>mFocusedTextColor</code> is now <code>focusedTextColor</code>, and <code>mDefaultTextColor</code> is <code>defaultHintTextColor</code>."}, {"owner": {"reputation": 501, "user_id": 6825339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIV14.jpg?s=128&g=1", "display_name": "Zulqarnain", "link": "https://stackoverflow.com/users/6825339/zulqarnain"}, "edited": false, "score": 0, "creation_date": 1548836149, "post_id": 54435592, "comment_id": 95681291, "body": "Thank you so much, now it&#39;s working after changing &quot;mFocusedTextColor&quot; to focusedTextColor"}], "owner": {"reputation": 501, "user_id": 6825339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PIV14.jpg?s=128&g=1", "display_name": "Zulqarnain", "link": "https://stackoverflow.com/users/6825339/zulqarnain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548834462, "creation_date": 1548834462, "question_id": 54435592, "link": "https://stackoverflow.com/questions/54435592/java-lang-nosuchfieldexception-mfocusedtextcolor-in-setting-up-texthintcolor", "title": "java.lang.NoSuchFieldException: mFocusedTextColor in setting up texthintColor", "body": "<p>I am inflating dynamic TextInputLayout and want to change the texthintColor and use the following but I end up throwing the exception</p>\n\n<pre><code>private fun setInputTextLayoutColor(color: Int, textInputLayout: TextInputLayout) {\n    try {\n        val field = textInputLayout.javaClass.getDeclaredField(\"mFocusedTextColor\")\n        field.isAccessible = true\n        val states = arrayOf(intArrayOf())\n        val colors = intArrayOf(color)\n        val myList = ColorStateList(states, colors)\n        field.set(textInputLayout, myList)\n\n        val fDefaultTextColor = TextInputLayout::class.java.getDeclaredField(\"mDefaultTextColor\")\n        fDefaultTextColor.isAccessible = true\n        fDefaultTextColor.set(textInputLayout, myList)\n\n        val method =\n            textInputLayout.javaClass.getDeclaredMethod(\"updateLabelState\", Boolean::class.javaPrimitiveType)\n        method.isAccessible = true\n        method.invoke(textInputLayout, true)\n\n    } catch (e: Exception) {\n        e.printStackTrace()\n    }\n\n}\nsetInputTextLayoutColor(resources.getColor(R.color.colorPrimary),myTextInputLayout)\n</code></pre>\n\n<p>support library version </p>\n\n<pre><code>    implementation 'com.android.support:design:28.0.0'\n</code></pre>\n\n<p>Exception printStackTrace:</p>\n\n<pre><code>java.lang.NoSuchFieldException: mFocusedTextColor\n</code></pre>\n"}, {"tags": ["android", "kotlin", "sharedpreferences"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1548831664, "post_id": 54434782, "comment_id": 95679150, "body": "You can&#39;t modify the <code>Set</code> returned by <code>getStringSet()</code> and then write that same object back. You need to create a new a <code>Set</code> object first, modify that, and then save that new one back. It&#39;s kinda tricky, and certainly non-obvious, unless you have happened to read the docs for that particular method."}, {"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1548834435, "post_id": 54434782, "comment_id": 95680523, "body": "Please don&#39;t edit to add SOLVED to the title. Also, you don&#39;t need to add the link in the body. It&#39;s already in a banner at the top of your question."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8071468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/459544577727829/picture?type=large", "display_name": "Fuad Pa\u015fayev", "link": "https://stackoverflow.com/users/8071468/fuad-pa%c5%9fayev"}, "edited": false, "score": 0, "creation_date": 1548832629, "post_id": 54434938, "comment_id": 95679630, "body": "it did not work"}, {"owner": {"reputation": 104, "user_id": 7365385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7a6a7f3eca7856b3b8cb293baca59?s=128&d=identicon&r=PG&f=1", "display_name": "manj1790", "link": "https://stackoverflow.com/users/7365385/manj1790"}, "reply_to_user": {"reputation": 21, "user_id": 8071468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/459544577727829/picture?type=large", "display_name": "Fuad Pa\u015fayev", "link": "https://stackoverflow.com/users/8071468/fuad-pa%c5%9fayev"}, "edited": false, "score": 0, "creation_date": 1548833093, "post_id": 54434938, "comment_id": 95679865, "body": "what hashSetOf() returns; I guess hashSetOf() returning initial protocol?."}, {"owner": {"reputation": 21, "user_id": 8071468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/459544577727829/picture?type=large", "display_name": "Fuad Pa\u015fayev", "link": "https://stackoverflow.com/users/8071468/fuad-pa%c5%9fayev"}, "edited": false, "score": 0, "creation_date": 1548833614, "post_id": 54434938, "comment_id": 95680136, "body": "I resolve the solution with creating new <code>HashSet&lt;String&gt;</code> not with direct reference"}], "tags": [], "owner": {"reputation": 104, "user_id": 7365385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcd7a6a7f3eca7856b3b8cb293baca59?s=128&d=identicon&r=PG&f=1", "display_name": "manj1790", "link": "https://stackoverflow.com/users/7365385/manj1790"}, "is_accepted": false, "score": 0, "last_activity_date": 1548831666, "creation_date": 1548831666, "answer_id": 54434938, "question_id": 54434782, "link": "https://stackoverflow.com/questions/54434782/sharedpreferences-not-updating-values/54434938#54434938", "title": "SharedPreferences not updating values", "body": "<p>Try this \nsharedPreferences.edit().putStringSet(\"protocols\", protocols).apply();</p>\n\n<p>You are applying to reference variable</p>\n"}], "owner": {"reputation": 21, "user_id": 8071468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/459544577727829/picture?type=large", "display_name": "Fuad Pa\u015fayev", "link": "https://stackoverflow.com/users/8071468/fuad-pa%c5%9fayev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1548831681, "answer_count": 1, "score": 0, "last_activity_date": 1548834427, "creation_date": 1548830978, "last_edit_date": 1548834427, "question_id": 54434782, "link": "https://stackoverflow.com/questions/54434782/sharedpreferences-not-updating-values", "closed_reason": "Duplicate", "title": "SharedPreferences not updating values", "body": "<p>I save some string values in SharedPreference and it is not updating, where I do mistake?</p>\n\n<p>I try to update SharedPreference value from <code>Timer()</code>.\nI tried to use <code>commit()</code> and <code>apply()</code> after updating <code>SharedPreference.Editor</code> value,but it does not update values.At every step of for loop I add new values to <code>val protocols</code> which is getting own value from <code>SharedPreference</code></p>\n\n<pre><code>val sharedPreferences = activity!!.getSharedPreferences(\"session\",Context.MODE_PRIVATE)\nval protocols = sharedPreferences.getStringSet(\"protocols\",hashSetOf())\nLog.d(\"old protocols\",protocols.toString())\nTimer().scheduleAtFixedRate(object : TimerTask() {\n  override fun run() {    \n    Query(context!!).post(url,params,headers,object:ResponseCallBack{\n      override fun onSuccess(response: String?) {\n        val res = response?.string()\n        val document = Jsoup.parse(res)\n        val bals = document.select(\"#newspaper-b tbody tr\")\n\n        if(!protocols.containsAll(bals.eachText())) {\n           for (bal in bals) {\n             val bprotokol = bal.allElements[5].text()\n             if (!protocols.contains(bprotokol)) {\n               protocols.add(bprotokol)\n               notification()\n              }\n           }\n          val editor = sharedPreferences.edit()\n          editor.putStringSet(\"protocols\", protocols)\n          editor.apply()\n          val updatedProtocols = sharedPreferences.getStringSet(\"protocols\",null)\n          Log.d(\"updated protocols\",updatedProtocols.toString())\n        }\n      }\n    })\n  }\n}, 0, 5000)\n</code></pre>\n\n<p>First <code>Log.d(\"old protocols\")</code> output is <code>{protocols=[MMX6859280]}</code> it is okay first time opening app. In the <code>for loop</code> there are two values <code>MMX6859280</code> and <code>MMX6859281</code>.\nThe second <code>Log.d(\"updated protocols\")</code> output is <code>{protocols=[MMX6859280,MMX6859281]}</code>,it is also okay. But when close app and open again I expected first <code>Log.d</code> output <code>{protocols=[MMX6859280,MMX6859281]}</code> but it returns <code>{protocols=[MMX6859280]}</code>,so it is not updating values. The strange situation is when I add another value to <code>SharedPreference</code> with this updating,I get result what I want,but the second time all is same.</p>\n"}, {"tags": ["android-studio", "kotlin", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1548853873, "post_id": 54433385, "comment_id": 95691789, "body": "Unable to reproduce (using the emulator). Please provide a Minimal, Complete, and Verifiable Example."}, {"owner": {"reputation": 153, "user_id": 1911409, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1cf189f1dc2613ba3f5c3967576ae16d?s=128&d=identicon&r=PG", "display_name": "jsbox", "link": "https://stackoverflow.com/users/1911409/jsbox"}, "edited": false, "score": 0, "creation_date": 1578097242, "post_id": 54433385, "comment_id": 105339986, "body": "I&#39;m having the same problem, only it&#39;s from Java, not Kotlin, and the JNI file is straight C, not C++.  If I take the jstring argument out of everything, it works, and the debugger lets me single-step through the JNI code, with a successful return.  But if I add the jstring argument back in, and adjust the class declaration to provide a string as an argument, I get the same crash with a &quot;art_sigsegv_fault&quot; reported.  The function takes an earlier jint argument, which is what worked without the second jstring argument.  Seems clearly related to the added jstring argument, though it might not."}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 4263285, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80cac0d1314ce19f486381d4867fe162?s=128&d=identicon&r=PG&f=1", "display_name": "scaborski", "link": "https://stackoverflow.com/users/4263285/scaborski"}, "is_accepted": false, "score": 3, "last_activity_date": 1551376700, "creation_date": 1551376700, "answer_id": 54931599, "question_id": 54433385, "link": "https://stackoverflow.com/questions/54433385/art-sigsegv-fault-when-entering-jni-function-in-c-code-within-android-studio/54931599#54931599", "title": "art_sigsegv_fault when entering JNI function in C code within android studio", "body": "<p>Answer is within: <a href=\"https://stackoverflow.com/questions/54523444/different-behavior-of-native-c-android-projects-when-using-java-and-kotlin-as\">Different behavior of Native C++ Android projects when using Java and Kotlin as a base language</a></p>\n\n<p>It looks to be a bug regarding the API Emulator and which version is being used. If the version is downgraded to API 25, no issues. As well, if the application is built on a device rather than an emulator will help with this issue.</p>\n"}], "owner": {"reputation": 105, "user_id": 4263285, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/80cac0d1314ce19f486381d4867fe162?s=128&d=identicon&r=PG&f=1", "display_name": "scaborski", "link": "https://stackoverflow.com/users/4263285/scaborski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1551376700, "creation_date": 1548822640, "last_edit_date": 1548825044, "question_id": 54433385, "link": "https://stackoverflow.com/questions/54433385/art-sigsegv-fault-when-entering-jni-function-in-c-code-within-android-studio", "title": "art_sigsegv_fault when entering JNI function in C code within android studio", "body": "<p>I'm using Kotlin and JNI as I'm looking to port a C program to Android and I'm wondering why I'm currently getting an \"art_sigsegv_fault\" as soon as the JNI function's breakpoint is hit.</p>\n\n<p>Kotlin code:</p>\n\n<pre><code>import com.root.Main\n\nclass SettingsScreenActivity : AppCompatActivity() {\n\n    private val MainC = Main()\n\n    fun startButton(view: View)\n        MainC.callMainFromJNI(\"test\")\n    }\n}\n</code></pre>\n\n<p>MainC.c</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_com_root_hping2_Main_callMainFromJNI(JNIEnv *env, jobject pThis, jstring argument){\n\n    printf(\"Size of char: %ld byte\\n\",sizeof(char));\n    return;\n}\n</code></pre>\n\n<p>Breakpoint is on the printf , however, when I go to debug, I get the \"art_sigsegv_fault\" error and I'm not able to see any of the values of the parameters. This is within Android Studio</p>\n\n<p><strong>EDIT:</strong>\nWhen i remove the jstring argument and don't pass the string into the function, it works correctly. What would the reason for this be?  </p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3082, "user_id": 5507158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VmXxg.png?s=128&g=1", "display_name": "Dewey Reed", "link": "https://stackoverflow.com/users/5507158/dewey-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1548822042, "last_edit_date": 1548822042, "creation_date": 1548821399, "answer_id": 54433240, "question_id": 54433101, "link": "https://stackoverflow.com/questions/54433101/kotlin-behaves-weird-in-identity-of-boxed-and-unboxed-numbers/54433240#54433240", "title": "Kotlin behaves weird in identity of boxed and unboxed numbers", "body": "<p>This is because <code>Integer.valueOf</code> has caches.</p>\n\n<p>When you use <code>===</code> to compare int and Int?, autobox happens and it calls <code>Integer.valueOf</code>.</p>\n\n<pre><code>    public static Integer valueOf(int i) {\n        if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)\n            return IntegerCache.cache[i + (-IntegerCache.low)];\n        return new Integer(i);\n    }\n</code></pre>\n\n<p>From <code>Integer.java</code>. <code>low</code> is -128 and <code>high</code> is 127 by default.</p>\n\n<p>When autobox happens, every number from -128 to 127 will share a same <code>Integer</code> and your result will be true. If a number isn't in that range, a new <code>Integer</code> will be created and your result will be false.</p>\n\n<p>Related design patterns: <a href=\"https://java-design-patterns.com/patterns/flyweight/\" rel=\"nofollow noreferrer\">https://java-design-patterns.com/patterns/flyweight/</a></p>\n"}], "owner": {"reputation": 7914, "user_id": 1348522, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/onFKD.jpg?s=128&g=1", "display_name": "Zumry Mohamed", "link": "https://stackoverflow.com/users/1348522/zumry-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548822042, "creation_date": 1548820224, "question_id": 54433101, "link": "https://stackoverflow.com/questions/54433101/kotlin-behaves-weird-in-identity-of-boxed-and-unboxed-numbers", "title": "Kotlin behaves weird in identity of boxed and unboxed numbers", "body": "<p>In my algorithm, I have been checking identify of the int variable and   nullable int, </p>\n\n<pre><code>var literal_num: Int = 1000\n\nvar literal_num_boxed: Int? = literal_num\n\nprintln(\"***********************************\")\n\nprintln((literal_num === literal_num_boxed)) //print false\n\nprintln(\"***********************************\")\n</code></pre>\n\n<p>but when you change the number to 100 the identity is equal, am i doing wrong here? </p>\n\n<pre><code>var literal_num: Int = 100\n\nvar literal_num_boxed: Int? = literal_num\n\nprintln(\"***********************************\")\n\nprintln((literal_num === literal_num_boxed)) //true\n\nprintln(\"***********************************\")\n</code></pre>\n\n<hr>\n\n<p>I tried the same in the kotlin documentation. its also behaving the same. check the following images.</p>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/ffKgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ffKgh.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>After i edited the number to 100 it behaves the in a different way. </p>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/pQPAE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pQPAE.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10987992, "user_type": "registered", "profile_image": "https://graph.facebook.com/2043532269099817/picture?type=large", "display_name": "TonTangRak", "link": "https://stackoverflow.com/users/10987992/tontangrak"}, "edited": false, "score": 0, "creation_date": 1548824081, "post_id": 54433293, "comment_id": 95676572, "body": "I&#39;m already trying to set maxlines dynamically. The problem is textview doesn&#39;t ellipsize properly even though I set maxlines and ellipsis property as Truncated.END."}], "tags": [], "owner": {"reputation": 171, "user_id": 9454816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9629f90bbe3793a1e389593eb9c44e2f?s=128&d=identicon&r=PG&f=1", "display_name": "shank", "link": "https://stackoverflow.com/users/9454816/shank"}, "is_accepted": false, "score": 1, "last_activity_date": 1548821844, "creation_date": 1548821844, "answer_id": 54433293, "question_id": 54433075, "link": "https://stackoverflow.com/questions/54433075/dynamically-setting-ellipsis-and-maxlines-of-textview-doesnt-working-properly-i/54433293#54433293", "title": "Dynamically setting ellipsis and maxlines of textView doesn&#39;t working properly in recyclerview item", "body": "<p>firstly intialize your TextView         </p>\n\n<pre><code>TextView t = (TextView) findViewById(R.id.your_text);\n</code></pre>\n\n<p>then,you can dynamically set Max lines by passing your Dynamic data to X:</p>\n\n<pre><code>t.setMaxLines(X);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10987992, "user_type": "registered", "profile_image": "https://graph.facebook.com/2043532269099817/picture?type=large", "display_name": "TonTangRak", "link": "https://stackoverflow.com/users/10987992/tontangrak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548822277, "creation_date": 1548819992, "last_edit_date": 1548822277, "question_id": 54433075, "link": "https://stackoverflow.com/questions/54433075/dynamically-setting-ellipsis-and-maxlines-of-textview-doesnt-working-properly-i", "title": "Dynamically setting ellipsis and maxlines of textView doesn&#39;t working properly in recyclerview item", "body": "<p>I need to set maxlines of textview dynamically in some case as 3, or Int.MAX_VALUE(intent to ellipsize automatically when fit view height) in recyclerview.</p>\n\n<p>In result, maxlines set properly but textview doesn't make ellipsis.</p>\n\n<p>For example, I set maxlines as 3 dynamically (ellipsis property is set up as \"end\" at xml file) and set text \"text\\ntext\\ntext\\ntext\"</p>\n\n<p>My intention:   </p>\n\n<blockquote>\n  <p>text  <br>  text <br>   text...</p>\n</blockquote>\n\n<p>Actual Result:   </p>\n\n<blockquote>\n  <p>text  <br>  text <br>   text</p>\n</blockquote>\n\n<p>I tried to set ellipsis property dynamically too, but it still doesn't work.</p>\n\n<p>What should I do to work as I intended?</p>\n"}, {"tags": ["android", "exception", "kotlin", "android-alertdialog"], "comments": [{"owner": {"reputation": 43, "user_id": 5087700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1998d8fd7771d5890fac7695c2426e?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/5087700/frank"}, "reply_to_user": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 0, "creation_date": 1548817442, "post_id": 54432739, "comment_id": 95675140, "body": "My Code works well in most android devices, excepts android 5.1.1"}, {"owner": {"reputation": 8866, "user_id": 9164141, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uiNcT.jpg?s=128&g=1", "display_name": "Gast&#243;n Saill&#233;n", "link": "https://stackoverflow.com/users/9164141/gast%c3%b3n-saill%c3%a9n"}, "edited": false, "score": 0, "creation_date": 1548817569, "post_id": 54432739, "comment_id": 95675168, "body": "where are you calling stopAcc() ?"}], "owner": {"reputation": 43, "user_id": 5087700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f1998d8fd7771d5890fac7695c2426e?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/5087700/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548817333, "creation_date": 1548816911, "last_edit_date": 1548817303, "question_id": 54432739, "link": "https://stackoverflow.com/questions/54432739/how-to-fix-requestfeature-must-be-called-before-adding-content-while-extendi", "title": "How to fix &quot;requestFeature() must be called before adding content&quot; while extending AlertDialog", "body": "<p>I'm trying to create my custom AlertDialog, and get an exception of \"requestFeature() must be called before adding content\"</p>\n\n<p>Is there somebody can help me???</p>\n\n<p>CustomAlertDialog :</p>\n\n<pre><code>class CustomConfirmDialog(\n    internal var context: Context,\n    // val title: String,\n    val msg: String,\n    val listener: OnConfirmListener\n) : AlertDialog(context) {\n    interface OnConfirmListener {\n        fun onConfirmClick()\n        fun onCancelClick()\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        requestWindowFeature(Window.FEATURE_NO_TITLE)\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.confirm_dialog)\n\n        // tvDialogTitle.text = title\n        tvDialogMsg.text = msg\n\n        btnCancel.setOnClickListener {\n            listener.onCancelClick()\n            if (isShowing)\n                dismiss()\n        }\n\n        btnOK.setOnClickListener {\n            listener.onConfirmClick()\n            if (isShowing)\n                dismiss()\n        }\n    }\n\n    fun setButtonText(strConfirm: String, strCancel: String) {\n        btnOK?.text = strConfirm\n        btnCancel?.text = strCancel\n    }\n}\n</code></pre>\n\n<p>Here is the calling code</p>\n\n<pre><code>private fun stopAcc() {\n    val msg = ResUtils.getStringFromRes(R.string.acc_stop_acc_prompt_msg)\n    CustomConfirmDialog(activity!!, msg, listener).apply {\n        setButtonText(\"stopAcc\", \"startGame\")\n        setCancelable(false)\n        show()\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "owner": {"reputation": 19, "user_id": 9324919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5lv3tXTAV38/AAAAAAAAAAI/AAAAAAAAAFM/YpTPdhvJnnw/photo.jpg?sz=128", "display_name": "Ty Viroth", "link": "https://stackoverflow.com/users/9324919/ty-viroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548829455, "creation_date": 1548815683, "last_edit_date": 1548829455, "question_id": 54432589, "link": "https://stackoverflow.com/questions/54432589/query-all-nodes-in-firebase-with-kotlin-android", "title": "Query all nodes in firebase with kotlin android", "body": "<p>I am building an simple chat with firebase. my firebase structure</p>\n\n<pre><code>chats\n     PSTQL2W3qqV8GGu7bjXhYZKrXh92&amp;sCv3CCXOLnYrb38db4V41PoArxD2\n          conversatins\n                      87483\n                           sender: \"sCv3CCXOLnYrb38db4V41PoArxD2\"\n                           time: \"3:08\"\n                           title: \"hey!\"\n                           type: \"text\"\n                      348843\n                           sender: \"sCv3CCXOLnYrb38db4V41PoArxD2\"\n                           time: \"4:33\"\n                           title: \"HI!\"\n                           type: \"text\"\n          last_message: \"Hey!\"\n          last_time: \"23:23 am\"\n</code></pre>\n\n<p>My Model</p>\n\n<pre><code>data class Message(\n    var conversations: ArrayList&lt;Conversations&gt; = ArrayList(),\n    val last_message: String = \"\",\n    val last_time: String = \"\") {\n\ndata class Conversations(\n        var sender: String = \"\",\n        var time: String = \"\",\n        var title: String = \"\",\n        var type: String = \"\")\n}\n</code></pre>\n\n<p>I want to retrieve array object in <strong>conversations</strong>, I've tried </p>\n\n<pre><code>val listenToChild = object : ValueEventListener {\n                 override fun onCancelled(p0: DatabaseError) {\n                 }\n                 override fun onDataChange(p0: DataSnapshot) {\n                         val chat = p0.getValue(Message::class.java)\n                         Log.d(\"message\",${chat?.conversations?.size}\"   \n                 }\n }\n mMessageReference.child(keySnapshot.toString()).addValueEventListener(listenToChild)\n</code></pre>\n\n<p>I get result size 0. Is there any problems with my model?</p>\n"}, {"tags": ["android", "kotlin", "android-room", "android-livedata"], "comments": [{"owner": {"reputation": 1618, "user_id": 7976274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ2OW8p_BQg/AAAAAAAAAAI/AAAAAAAABvc/szbV3qIBtJk/photo.jpg?sz=128", "display_name": "ankuranurag2", "link": "https://stackoverflow.com/users/7976274/ankuranurag2"}, "edited": false, "score": 0, "creation_date": 1548828230, "post_id": 54432424, "comment_id": 95677784, "body": "Could you explain the question a little bit more? You want you DAO to return plain data instead of <code>LiveData</code>?"}, {"owner": {"reputation": 314, "user_id": 6447661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TWUjq.jpg?s=128&g=1", "display_name": "Jure Sencar", "link": "https://stackoverflow.com/users/6447661/jure-sencar"}, "reply_to_user": {"reputation": 1618, "user_id": 7976274, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ2OW8p_BQg/AAAAAAAAAAI/AAAAAAAABvc/szbV3qIBtJk/photo.jpg?sz=128", "display_name": "ankuranurag2", "link": "https://stackoverflow.com/users/7976274/ankuranurag2"}, "edited": false, "score": 0, "creation_date": 1548862827, "post_id": 54432424, "comment_id": 95697760, "body": "Yes, without having to reroute another function through repo. I added example"}], "answers": [{"tags": [], "owner": {"reputation": 22493, "user_id": 61479, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4b507c49efd53570b5c2f384d2aeee84?s=128&d=identicon&r=PG", "display_name": "Ridcully", "link": "https://stackoverflow.com/users/61479/ridcully"}, "is_accepted": false, "score": 0, "last_activity_date": 1548863399, "creation_date": 1548863399, "answer_id": 54444439, "question_id": 54432424, "link": "https://stackoverflow.com/questions/54432424/android-room-can-calling-value-on-livedata-be-used-to-return-plain-data/54444439#54444439", "title": "Android room: Can calling value on LiveData be used to return plain data?", "body": "<p>If you need both variants (LiveData and normal result) ypu should make 2 variants of the method in DAO. Everything else is a hack.</p>\n"}, {"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 1, "last_activity_date": 1548864056, "creation_date": 1548864056, "answer_id": 54444640, "question_id": 54432424, "link": "https://stackoverflow.com/questions/54432424/android-room-can-calling-value-on-livedata-be-used-to-return-plain-data/54444640#54444640", "title": "Android room: Can calling value on LiveData be used to return plain data?", "body": "<blockquote>\n  <p>Is it save (and how is it performance-wise) to use\n  <code>someClassDAO.getForIdLiveData(id).value</code> instead of making a duplicate\n  DAO function which returns just SomeClass?</p>\n</blockquote>\n\n<p>It has nothing to do with \"performance-wise\", it just flat-out <strong><em>wouldn't work</em></strong>.</p>\n\n<p><code>LiveData&lt;T&gt;</code> is evaluated asynchronously when there is an active observer.</p>\n\n<p><code>T</code> is evaluated synchronously and returned immediately (I/O access, blocking).</p>\n\n<p>So you'd just get null and things wouldn't work at all. You do need the two methods.</p>\n\n<p>I prefer to call them <code>getForIdWithChanges</code> instead of <code>getForIdLiveData</code> considering you do know it's a LiveData from the type system.</p>\n"}], "owner": {"reputation": 314, "user_id": 6447661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TWUjq.jpg?s=128&g=1", "display_name": "Jure Sencar", "link": "https://stackoverflow.com/users/6447661/jure-sencar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 54444640, "answer_count": 2, "score": 1, "last_activity_date": 1548864056, "creation_date": 1548814335, "last_edit_date": 1548862774, "question_id": 54432424, "link": "https://stackoverflow.com/questions/54432424/android-room-can-calling-value-on-livedata-be-used-to-return-plain-data", "title": "Android room: Can calling value on LiveData be used to return plain data?", "body": "<p>Let's say I have a room DAO function <code>getForIdLiveData(id: String)</code> which returns <code>LiveData&lt;SomeClass&gt;</code>. </p>\n\n<p>Is it save (and how is it performance-wise) to use <code>someClassDAO.getForIdLiveData(id).value</code> instead of making a duplicate DAO function which returns just <code>SomeClass</code>?</p>\n\n<p>This would save a ton of boilerplate code (as the DAO functions are typically passed on through repository in MVP or MVVM) and it appears to be working so far. I just couldn't find much information of possible future complications which I (of course) want to avoid.</p>\n\n<p>Example:</p>\n\n<p>Can I use this:</p>\n\n<p>In <code>someDataClassDAO</code></p>\n\n<pre><code>    @Query(\"SELECT * FROM my_table WHERE my_id = :id\")\n    fun getForIdLiveData(id: String): LiveData&lt;SomeDataClass&gt;\n</code></pre>\n\n<p>In <code>MyRepo</code> interface</p>\n\n<pre><code>    getMyInfoLiveData(id: String): LiveData&lt;SomeDataClass&gt;\n</code></pre>\n\n<p>In <code>myRepoFactory</code> which implements custom interface <code>MyRepo</code></p>\n\n<pre><code>    @WorkerThread\n    override fun getMyInfoLiveData(id: String)\n        = someDataClassDAO.getForIdLiveData(id)\n</code></pre>\n\n<p>In <code>myViewModel</code> class</p>\n\n<pre><code>    // Provide LiveData for ongoing UI display\n    fun provideMyInfoLiveData(id: String) = myRepo.getMyInfoLiveData(id)\n\n    // Get some parameter for different id (one time)\n    fun getOneParameter(id): Long {\n        val entity = myRepo.getMyInfoLiveData(id).value\n        return entity.someField\n    }\n</code></pre>\n\n<p>Instead of:</p>\n\n<p>In <code>someDataClassDAO</code></p>\n\n<pre><code>    @Query(\"SELECT * FROM my_table WHERE my_id = :id\")\n    fun getForIdLiveData(id: String): LiveData&lt;SomeDataClass&gt;\n\n    @Query(\"SELECT * FROM my_table WHERE my_id = :id\")\n    fun getForId(id: String): SomeDataClass\n</code></pre>\n\n<p>In <code>MyRepo</code> interface</p>\n\n<pre><code>    getMyInfoLiveData(id: String): LiveData&lt;SomeDataClass&gt;\n    getMyInfo(id: String): SomeDataClass\n</code></pre>\n\n<p>In <code>MyRepoFactory</code> which implements <code>MyRepo</code></p>\n\n<pre><code>    @WorkerThread\n    override fun getMyInfoLiveData(id: String)\n        = someDataClassDAO.getForIdLiveData(id)\n\n    @WorkerThread\n    override fun getMyInfo(id: String)\n        = someDataClassDAO.getForId(id)\n</code></pre>\n\n<p>In <code>myViewModel</code> class</p>\n\n<pre><code>    // Provide LiveData for ongoing UI display\n    fun provideMyInfoLiveData(id: String) = myRepo.getMyInfoLiveData(id)\n\n    // Get some parameter for different id (one time)\n    fun getOneParameterForId(id): Long {\n        val entity = myRepo.getMyInfo(id)\n        return entity.someField\n    }\n</code></pre>\n"}, {"tags": ["java", "android", "algorithm", "kotlin", "bitwise-operators"], "comments": [{"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1548814606, "post_id": 54432393, "comment_id": 95674538, "body": "This is not really a higher level problem I meant. What your application does? Does it solves the puzzle automatically or let the user to solve it? In the latter case the performance of <code>isSolved</code> is irrelevant because you only need to call it once per user action and humans are not that fast. If you do automatic solving, then show us the algorithm you use to solve it. This is the higher level problem. It might be easier to make the code faster by checking less combinations than by doing <code>isSolved</code> faster. To sum up: put your <code>isSolved</code> into your real context that shows why it should be fast."}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "reply_to_user": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1548816801, "post_id": 54432393, "comment_id": 95675006, "body": "My code searches for solutions based in a predefined database sequences. I have some sequences saved and I test it all to check what solves the scrambled puzzle. Basically the structure of this search is: put the cube to searchable state -&gt; iterate over sequences -&gt; checks is the puzzle was solved -&gt; continue the search. Is valid to know that my goal is not solve the entire puzzle, but only a single step and, for this reason, I really need use specifically the saved sequences. I&#39;ll update the question with a view of the structure I said and with the view of the method I use to apply a seq."}], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 1, "last_activity_date": 1548830779, "last_edit_date": 1548830779, "creation_date": 1548830390, "answer_id": 54434641, "question_id": 54432393, "link": "https://stackoverflow.com/questions/54432393/how-to-check-if-permuted-hexadecimal-integers-matches-to-another-using-bitwise-o/54434641#54434641", "title": "How to check if permuted hexadecimal integers matches to another using Bitwise operations (performance optimization)", "body": "<p>You can check if two values are cyclic shift of each other with bitwise operations. </p>\n\n<p>Your values are 6-byte (48 bits length) values, so we can pack them in 64-bit <code>long</code>, then make cyclic rotation of low 48 bits for one value and check for coincidence with other one.</p>\n\n<p><a href=\"https://ideone.com/ghaU50\" rel=\"nofollow noreferrer\">Ideone</a></p>\n\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass Ideone\n{\n    public static void main (String[] args) throws java.lang.Exception\n    {\n        long a = (0x011233l) &lt;&lt; 24 | 0x455677;\n        long b = (0x233455l) &lt;&lt; 24 | 0x677011;\n        System.out.printf(\"a: %x   b: %x  \\n\", a, b);\n        if (b == a)\n            System.out.printf(\" bingo at zero digits shift \\n\");\n\n        for (int sh=4; sh&lt;48; sh+=4) {\n            long bb = (b &gt;&gt; sh)|((b &lt;&lt; (64 - sh))&gt;&gt;16); \n            System.out.printf(\"rotated %d bits  bb: %x \\n\", sh, bb);\n            if (bb == a)\n                System.out.printf(\" bingo at %d digits shift \\n\", sh/4);\n        }\n    }\n}\n\na: 11233455677   b: 233455677011  \nrotated 4 bits  bb: 123345567701 \nrotated 8 bits  bb: 112334556770 \nrotated 12 bits  bb: 11233455677 \n  bingo at 3 digits shift \nrotated 16 bits  bb: 701123345567 \nskipped\nrotated 44 bits  bb: 334556770112\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1548830779, "creation_date": 1548814103, "last_edit_date": 1548817065, "question_id": 54432393, "link": "https://stackoverflow.com/questions/54432393/how-to-check-if-permuted-hexadecimal-integers-matches-to-another-using-bitwise-o", "title": "How to check if permuted hexadecimal integers matches to another using Bitwise operations (performance optimization)", "body": "<p>After discussing a little about optimization of a part from my code in a <a href=\"https://stackoverflow.com/questions/54428761/how-to-replace-this-string-operations-with-bitwise-operations\">previous question</a> and getting some low-level improvements, @SergGr suggested me creating a new question to try get a high-level improvement and reach my main goal.</p>\n\n<p>In my code I have to apply some moves in a \"scrambled\" <a href=\"https://en.wikipedia.org/wiki/Square-1_(puzzle)\" rel=\"nofollow noreferrer\">square-1 puzzle</a> object and, after, check if it was solved. As I found a <a href=\"https://github.com/cs0x7f/sq12phase/blob/master/FullCube.java\" rel=\"nofollow noreferrer\">better implementation of a square-1 puzzle object around internet</a> I took it to be used in my Android application.</p>\n\n<p>Then, as you can see, the <a href=\"https://github.com/cs0x7f/sq12phase/blob/master/FullCube.java\" rel=\"nofollow noreferrer\">class</a> is built with four simple numbers (<code>integer</code>) fields:</p>\n\n<pre><code>var ul = 0x011233\nvar ur = 0x455677 //continuation of ul\n\nvar dl = 0x998bba\nvar dr = 0xddcffe //continuation of dl\n</code></pre>\n\n<p>These fields means the \"pieces\" of the square-1 puzzle, where each digit in the <code>hexadecimal</code> representation is one of these pieces (double digits such as <code>11</code>, <code>33</code>, <code>bb</code>... means the same \"piece\" of the cube, wich is a \"big\" piece).</p>\n\n<p>As ou can see, some operations wich represents real actions through the puzzle are made using that numbers, but at the most is permutations through its bits.</p>\n\n<p>In the case of my application I have to check if the puzzle is solved but, for my situation, the solved state is not, necessarly, equals to the raw fields. As we talking about a Rubik's Cube variant the faces could be moved, the we can have a solved state like (ul + \" \" + ur): <code>[112334 556770]</code>, <code>[233455 677011]</code>, <code>[455677 11233*]</code> and so on.</p>\n\n<p><em>Obs.: note to leading zero...</em></p>\n\n<p>Then I thought a simple algorithm to check the solved state by looking for cyclic permutations in a fixed solved sequence, but using <code>Strings</code>. However, after some tests I realized that this work, using <code>Strings</code> as I did, was making my app still so slow, once I have to call this checking thousand times in a big loop.</p>\n\n<h1>Quick explanation about my algorithm using Strings:</h1>\n\n<ul>\n<li>Convert all numbers to <code>String</code> (in this case a hex String);</li>\n<li>A fixed solved state (<code>ul+ur</code>): <code>s = \"011233\"+\"455677\"</code>;</li>\n<li>A state to check if is solved (<code>ul+ur</code>): <code>t = \"233455\"+\"677011\"</code>;</li>\n<li>If we concat <code>s+s</code> we check if we can found <code>t</code> inside: <code>\"011{233455677011}233455677\"</code>, then <code>isSolved()</code> checking returns <code>true</code>.</li>\n</ul>\n\n<h1>Where I have to apply this</h1>\n\n<p>Basically the core code of my app is this and I check if the puzzle is solved like this:</p>\n\n<pre><code>for (sequence in sequences) { //814*814 elements\n    auxCube.applySequence(sequence.seq) //applies the current sequence to the auxiliary cube\n    if (auxCube.isSolved()) { //checks if it was solved\n        searches.add(Search(sequence.seq)) //adds the sucess in a list\n    }\n    auxCube.copy(oldCube) //back test cube to initial state to continue finding sequences\n}\n</code></pre>\n\n<p>As you can see, there are only 2 functions made by me being used here. I'll describe the method <code>applySequence()</code> bellow.</p>\n\n<h1>The <code>applySequence()</code> method</h1>\n\n<p>I made this method by myself to apply formated sequences to the square-1 puzzle object. Once official sequences for this puzzle are composed by some characters (looks like: \"<code>(1, 2) / (6, -3) /</code>\" I did some steps to extract the numbers and, after, move the cube. It looks like:</p>\n\n<pre><code>fun applySequence(sequence: String) {\n    //remove all \"(\", \")\", \",\" and \" \" characters and split in each \"/\"\n    val pairs = sequence.replace(\" \", \"\").replace(\"\\\\(\", \"\").replace(\"\\\\)\", \"\").split(\"/\")\n\n    //if starts with / then perform respective move\n    if (sequence.startsWith(\"/\")) slashMove()\n\n   //iterate over pairs\n    for (pair in pairs) {\n        //checks if pair is not empty\n        if (pair != \"\") {\n            //split pair in the \",\" character\n            val pairMoves = pair.split(\",\")\n\n            //perform top and bottom moves with extracted numbers\n            move(true, Integer.parseInt(pairMoves[0]))\n            move(false, Integer.parseInt(pairMoves[1]))\n            slashMove()\n        }\n    }\n\n    //if sequence not ends with / then applies respective move\n    if (!sequence.endsWith(\"/\")) slashMove()\n}\n</code></pre>\n\n<hr>\n\n<p>This way is so simple but considering it uses <code>String</code> operations like <code>concat()</code> and <code>contains()</code> in a for that loops over 600000 times the performance, in Android, is reduced.</p>\n\n<p>After trying optimize I realized that one the best ways to do it cames with bitwise operations, operations such the author did over his original code, however I couldn't figure it out.</p>\n\n<p>As a extra info about the problem, if I remove the call of my <code>isSolved()</code> method the final time of the search reduces in <code>20~30 seconds</code>.</p>\n\n<p>Then, how to perform <code>isSolved()</code> operation using bitewising to work lighter in a big for loop (targeting Android)?</p>\n"}, {"tags": ["java", "kotlin", "youtube-api", "youtube-data-api"], "comments": [{"owner": {"reputation": 3042, "user_id": 8342742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMVCJ.jpg?s=128&g=1", "display_name": "M\u03b1\u03c0\u03bcQ\u03bc\u03b1\u03c0k\u03b3V\u03c0.0", "link": "https://stackoverflow.com/users/8342742/m%ce%b1%cf%80%ce%bcq%ce%bc%ce%b1%cf%80k%ce%b3v%cf%80-0"}, "edited": false, "score": 0, "creation_date": 1548843454, "post_id": 54431475, "comment_id": 95685666, "body": "You can try the <a href=\"https://github.com/youtube/yt-direct-lite-android\" rel=\"nofollow noreferrer\">YouTube Direct Lite for Android</a>. <i>&quot;The code is a reference implementation for an Android OS application that captures video, uploads it to YouTube, and submits the video to a <a href=\"http://code.google.com/p/youtube-direct-lite/\" rel=\"nofollow noreferrer\">YouTube Direct Lite</a> instance&quot;.</i> Also, there is a sample code in <a href=\"https://stackoverflow.com/questions/23016645/how-to-upload-a-video-to-youtube-from-my-app-android\">this SO post</a> that could help you understand the function you needed."}, {"owner": {"reputation": 21, "user_id": 4237802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54181924975eef4d10f45413c50d2270?s=128&d=identicon&r=PG&f=1", "display_name": "salvador angel", "link": "https://stackoverflow.com/users/4237802/salvador-angel"}, "reply_to_user": {"reputation": 3042, "user_id": 8342742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EMVCJ.jpg?s=128&g=1", "display_name": "M\u03b1\u03c0\u03bcQ\u03bc\u03b1\u03c0k\u03b3V\u03c0.0", "link": "https://stackoverflow.com/users/8342742/m%ce%b1%cf%80%ce%bcq%ce%bc%ce%b1%cf%80k%ce%b3v%cf%80-0"}, "edited": false, "score": 0, "creation_date": 1548865412, "post_id": 54431475, "comment_id": 95699308, "body": "i already saw the app and the post, but is not that i need, i need upload video to our own account not app user account, thank you."}], "owner": {"reputation": 21, "user_id": 4237802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54181924975eef4d10f45413c50d2270?s=128&d=identicon&r=PG&f=1", "display_name": "salvador angel", "link": "https://stackoverflow.com/users/4237802/salvador-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548806540, "creation_date": 1548806540, "question_id": 54431475, "link": "https://stackoverflow.com/questions/54431475/correct-way-to-upload-video-to-youtube-through-api-from-android", "title": "Correct way to upload video to youtube through API from android", "body": "<p>i am working on a mobile app that record a video and upload to our Youtube acount so, i have a token and a refresh token, i can refresh the token when it expires, but i am not able to upload a video, here is a sample how i try :</p>\n\n<pre><code>override fun uploadFile(sourceFileUri: String) {\n    doAsync{\n    val fileName = sourceFileUri\n\n    var conn: HttpURLConnection? = null\n    var dos: DataOutputStream? = null\n    var lineEnd = \"\\r\\n\"\n    var twoHyphens = \"--\"\n    var upLoadServerUri = \"https://www.googleapis.com/upload/youtube/v3/videos\"\n    var boundary = \"*****\"\n    var bytesRead: Int\n    var bytesAvailable: Int\n    var bufferSize: Int\n    var buffer: ByteArray\n    var maxBufferSize = 1 * 1024 * 1024\n    var sourceFile = File(sourceFileUri)\n\n    try {\n\n        // open a URL connection to the Servlet\n        val fileInputStream = FileInputStream(sourceFile)\n        val url = URL(upLoadServerUri)\n\n        // Open a HTTP  connection to  the URL\n        conn = url.openConnection() as HttpURLConnection\n        conn.doInput = true // Allow Inputs\n        conn.doOutput = true // Allow Outputs\n        conn.useCaches = false // Don't use a Cached Copy\n        conn.requestMethod = \"POST\"\n        conn.setRequestProperty(\"Connection\", \"Keep-Alive\")\n        conn.setRequestProperty(\"Authorization\", \"Bearer XXXXXXXXXX\")\n        conn.setRequestProperty(\"Content-Type\", \"application/json\")\n        conn.setRequestProperty(\"X-Upload-Content-Length\", sourceFile.readBytes().size.toString())\n        conn.setRequestProperty(\"X-Upload-Content-Type\", \"video/mp4\")\n\n        conn.setRequestProperty(\"part\", \"snippet,status\")\n        conn.setRequestProperty(\"snippet.categoryId\", \"22\")\n        conn.setRequestProperty(\"snippet.defaultLanguage\", \"\")\n        conn.setRequestProperty(\"snippet.description\", \"Video evidencia carservice\")\n        conn.setRequestProperty(\"snippet.tags[]\", \"\")\n        conn.setRequestProperty(\"snippet.title\", \"Orden: 1500 Frenos\")\n        conn.setRequestProperty(\"status.embeddable\", \"\")\n        conn.setRequestProperty(\"status.license\", \"\")\n        conn.setRequestProperty(\"status.privacyStatus\", \"private\")\n        conn.setRequestProperty(\"status.publicStatsViewable\", \"\")\n\n        dos = DataOutputStream(conn.outputStream);\n\n       // dos.writeBytes(twoHyphens + boundary + lineEnd)\n\n\n        // create a buffer of  maximum size\n        bytesAvailable = fileInputStream.available();\n\n        bufferSize = Math.min(bytesAvailable, maxBufferSize);\n        buffer =  ByteArray(bufferSize);\n\n        // read file and write it into form...\n        bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n\n        while (bytesRead &gt; 0) {\n\n            dos.write(buffer, 0, bufferSize);\n            bytesAvailable = fileInputStream.available();\n            bufferSize = Math.min(bytesAvailable, maxBufferSize);\n            bytesRead = fileInputStream.read(buffer, 0, bufferSize);\n\n        }\n\n        var serverResponseCode = conn.responseCode\n        val serverResponseMessage = conn.responseMessage\n\n        Log.i(\"uploadFile\", \"HTTP Response is : \"\n                + serverResponseMessage + \": \" + serverResponseCode)\n\n        fileInputStream.close();\n        dos.flush();\n        dos.close();\n\n    } catch (e:Exception) {\n        e.printStackTrace()\n    }\n\n    }.execute()\n\n}\n</code></pre>\n\n<p>i am getting: Bad Request: 400</p>\n\n<p>i can't use the java library because these not have an option to upload video to our own acount </p>\n\n<p>well, thanks in advance</p>\n\n<p>i get an example from <a href=\"https://androidexample.com/Upload_File_To_Server_-_Android_Example/index.php?view=article_discription&amp;aid=83\" rel=\"nofollow noreferrer\">here</a> \nand try to adapt these, but i am not sure if is the correct way to do that</p>\n\n<p>P.S. sorry for my bad english...</p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 4426, "user_id": 10835183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G4HMm.jpg?s=128&g=1", "display_name": "JideGuru", "link": "https://stackoverflow.com/users/10835183/jideguru"}, "edited": false, "score": 1, "creation_date": 1548807125, "post_id": 54431462, "comment_id": 95672707, "body": "Is this a question or a tutorial?"}, {"owner": {"reputation": 1251, "user_id": 7056683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9rAX.jpg?s=128&g=1", "display_name": "Mahesh Keshvala", "link": "https://stackoverflow.com/users/7056683/mahesh-keshvala"}, "edited": false, "score": 0, "creation_date": 1548826885, "post_id": 54431462, "comment_id": 95677320, "body": "what is your question ?"}, {"owner": {"reputation": 1, "user_id": 6835982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j3kY1WZUQlU/AAAAAAAAAAI/AAAAAAAAACU/fWiSP_McCeo/photo.jpg?sz=128", "display_name": "Susheel Yarlagadda", "link": "https://stackoverflow.com/users/6835982/susheel-yarlagadda"}, "edited": false, "score": 0, "creation_date": 1548897116, "post_id": 54431462, "comment_id": 95712317, "body": "Sorry it is a question. How can I get compilation error causes by default instead of running <code>.&#47;gradlew assembleDebug --stack trace</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6835982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j3kY1WZUQlU/AAAAAAAAAAI/AAAAAAAAACU/fWiSP_McCeo/photo.jpg?sz=128", "display_name": "Susheel Yarlagadda", "link": "https://stackoverflow.com/users/6835982/susheel-yarlagadda"}, "edited": false, "score": 0, "creation_date": 1548960169, "post_id": 54452140, "comment_id": 95742394, "body": "Build tab on studio doesn&#39;t report any errors. I think the issue is with the Kotlin compilation"}], "tags": [], "owner": {"reputation": 1863, "user_id": 3838901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b60dd0d6855072619355ca3b9e09e1?s=128&d=identicon&r=PG&f=1", "display_name": "Farid Haq", "link": "https://stackoverflow.com/users/3838901/farid-haq"}, "is_accepted": false, "score": 1, "last_activity_date": 1548898651, "creation_date": 1548898651, "answer_id": 54452140, "question_id": 54431462, "link": "https://stackoverflow.com/questions/54431462/android-studio-3-3-doesnt-show-the-exact-error-on-build-failure/54452140#54452140", "title": "Android studio 3.3 doesn&#39;t show the exact error on build failure", "body": "<p>I don't know if that was your problem, but you should find your errors right there.</p>\n\n<p>There is a toggle button just below the build button that will show the verbose build logs</p>\n\n<p>Please check following 2 capture images</p>\n\n<p><a href=\"https://i.stack.imgur.com/ftH1g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ftH1g.png\" alt=\"enter image description here\"></a>\n<br></p>\n\n<p><a href=\"https://i.stack.imgur.com/0HdZc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0HdZc.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 6835982, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j3kY1WZUQlU/AAAAAAAAAAI/AAAAAAAAACU/fWiSP_McCeo/photo.jpg?sz=128", "display_name": "Susheel Yarlagadda", "link": "https://stackoverflow.com/users/6835982/susheel-yarlagadda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548898651, "creation_date": 1548806443, "last_edit_date": 1548896999, "question_id": 54431462, "link": "https://stackoverflow.com/questions/54431462/android-studio-3-3-doesnt-show-the-exact-error-on-build-failure", "title": "Android studio 3.3 doesn&#39;t show the exact error on build failure", "body": "<p>This is happening after upgrading studio where you don't see errors in the build tab when you run the app and studio just says <code>Compilation failed; see the compiler error output for details.</code>\nand then you have to run\n<code>./gradlew assembleDebug --stack trace</code> to see the actual errors.\nso how to get specific compilation errors without running command <code>./gradlew assembleDebug --stack trace</code> in android studio 3.0?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "edited": false, "score": 1, "creation_date": 1548864481, "post_id": 54431369, "comment_id": 95698694, "body": "Yes I think I am wary of terms that Android/Google are using like &#39;production-ready&#39; and &#39;first-class support&#39;, I am overly worried I think.  The Android website said &#39;subset of Java 8&#39; when that support was announced, but it appears Kotlin is &#39;fully supported&#39;.  Thanks!"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "edited": false, "score": 1, "creation_date": 1548867969, "post_id": 54431369, "comment_id": 95700888, "body": "@LouMorda I ported a few apps from java to kotlin. Never had any problems! You are good to go :)"}, {"owner": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "edited": false, "score": 1, "creation_date": 1548960216, "post_id": 54431369, "comment_id": 95742418, "body": "Yeah actually the reason I ask and I should put this in my question is that I work with a group of Java server and JavaFX client developers.  We try to share as much code as possible, so the lack of Java 8 support was a huge disappointment for us.  I&#39;m hoping we can share as much Kotlin code as possible!"}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548805748, "creation_date": 1548805748, "answer_id": 54431369, "question_id": 54431333, "link": "https://stackoverflow.com/questions/54431333/does-android-studio-support-all-kotlin-features-and-apis/54431369#54431369", "title": "Does Android Studio support all Kotlin features and APIs?", "body": "<p>Kotlin is fully supported by Android and Android Studio and even advertised on the Android website:</p>\n\n<blockquote>\n  <p>Kotlin is production-ready for your Android app development.</p>\n</blockquote>\n\n<p><a href=\"https://developer.android.com/kotlin/\" rel=\"nofollow noreferrer\">Source</a></p>\n"}, {"tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 2, "last_activity_date": 1548805761, "creation_date": 1548805761, "answer_id": 54431374, "question_id": 54431333, "link": "https://stackoverflow.com/questions/54431333/does-android-studio-support-all-kotlin-features-and-apis/54431374#54431374", "title": "Does Android Studio support all Kotlin features and APIs?", "body": "<p>Within reason, you control the version of Kotlin that gets used and therefore what features are available.</p>\n\n<p>If you have a Kotlin-enabled Android Studio project, and you look in the top-level <code>build.gradle</code> file, you may see code like this:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n  ext.kotlin_version = '1.3.20'\n  repositories {\n    google()\n    jcenter()\n\n  }\n  dependencies {\n    classpath 'com.android.tools.build:gradle:3.3.0'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n  }\n}\n\nallprojects {\n  repositories {\n    google()\n    jcenter()\n\n  }\n}\n\ntask clean(type: Delete) {\n  delete rootProject.buildDir\n}\n</code></pre>\n\n<p><code>ext.kotlin_version = '1.3.20'</code> controls the Kotlin version that you will use for the Kotlin plugin (via the interpolated string in the <code>classpath</code> directive), and similarly for the Kotlin runtime dependency in a module's <code>build.gradle</code> file.</p>\n\n<p>So, a project with the above code can use Kotlin/JVM features that were supported in Kotlin 1.3.20.</p>\n\n<p>The runtime dependency that we use today is <code>org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version</code>. The <code>jdk7</code> indicates that the runtime does not depend on any Java 8+ stuff that Android lacks.</p>\n\n<p>However, changes in future versions of Kotlin will require you to upgrade the Kotlin version in your project. For example, a project using 1.2.71 might not have access to all Kotlin 1.3 syntax.</p>\n"}], "owner": {"reputation": 4653, "user_id": 914587, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/WNFJV.png?s=128&g=1", "display_name": "Lou Morda", "link": "https://stackoverflow.com/users/914587/lou-morda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 54431374, "answer_count": 2, "score": 0, "last_activity_date": 1548960507, "creation_date": 1548805437, "last_edit_date": 1548960507, "question_id": 54431333, "link": "https://stackoverflow.com/questions/54431333/does-android-studio-support-all-kotlin-features-and-apis", "title": "Does Android Studio support all Kotlin features and APIs?", "body": "<p>I am an Android Developer and have a general Kotlin question.  Does Android Studio support all Kotlin features and APIs?  I am certain that all basic types and operators are fully supported and Android Studio can compile.  Is it safe to also assume that Functions, Lambdas, Coroutines, etc. are fully supported?  For example, when Java 8 support was announced for Android Studio, there was a documentation website explaining which Java 8 features were supported and which were not:</p>\n\n<p><a href=\"https://developer.android.com/studio/write/java8-support#supported_features\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support#supported_features</a></p>\n\n<p>But this does not exist for Kotlin.  I'm assuming if it's a line of standard Kotlin code, it will compile in Android Studio, is that correct?  </p>\n\n<p>The reason for my question is that I work with a group of Java server (mostly spring boot) and JavaFX developers, and we like to share as much code as possible.  The lack of Java 8 compatibility in Android caused some problems for us.  We're looking to convert most of our code into Kotlin now.  I'd like to assume that all of the standard features:</p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/api/latest/jvm/stdlib/index.html</a></p>\n\n<p>And hopefully all of the coroutines features:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/coroutines/coroutines-guide.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/coroutines/coroutines-guide.html</a></p>\n\n<p>Will be fully supported for both let's say an Android app built with Android Studio and a Java desktop app built with IntelliJ.</p>\n"}, {"tags": ["kotlin", "named", "default-parameters"], "comments": [{"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1548845290, "post_id": 54430477, "comment_id": 95686748, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44792787/reflectively-calling-function-and-using-default-parameters\">Reflectively calling function and using default parameters</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 10882244, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vyt41WP8tls/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEas1-IhUah_POqZXh_67f2LweDQ/mo/photo.jpg?sz=128", "display_name": "jadeblack12", "link": "https://stackoverflow.com/users/10882244/jadeblack12"}, "edited": false, "score": 0, "creation_date": 1548807517, "post_id": 54431360, "comment_id": 95672814, "body": "Yup that&#39;s my backup approach if I can&#39;t find anything else."}], "tags": [], "owner": {"reputation": 1694, "user_id": 10172915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgRVP.png?s=128&g=1", "display_name": "Akaki Kapanadze", "link": "https://stackoverflow.com/users/10172915/akaki-kapanadze"}, "is_accepted": false, "score": 0, "last_activity_date": 1548805630, "creation_date": 1548805630, "answer_id": 54431360, "question_id": 54430477, "link": "https://stackoverflow.com/questions/54430477/use-a-variable-for-named-parameter-in-kotlin/54431360#54431360", "title": "Use a variable for named parameter in kotlin", "body": "<p>You can use <code>map</code> to do this:</p>\n\n<pre><code>fun getTypeB(id: String,\n             varsMap: Map&lt;String, TypeA&gt;): TypeB {\n    val valA1: TypeA = varsMap.getOrElse(\"valA1\") { defaultA1 }\n    val valA2: TypeA = varsMap.getOrElse(\"valA2\") { defaultA2 }\n    val valA3: TypeA = varsMap.getOrElse(\"valA3\") { defaultA3 }\n    //\n}\n</code></pre>\n\n<hr>\n\n<pre><code>val args = mapOf(\n        \"valA1\" to someValueOfTypeA,\n        \"valA2\" to someValueOfTypeA)\ngetTypeB(id, args)\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 10882244, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vyt41WP8tls/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcaEas1-IhUah_POqZXh_67f2LweDQ/mo/photo.jpg?sz=128", "display_name": "jadeblack12", "link": "https://stackoverflow.com/users/10882244/jadeblack12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 502, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548805630, "creation_date": 1548800259, "last_edit_date": 1548800530, "question_id": 54430477, "link": "https://stackoverflow.com/questions/54430477/use-a-variable-for-named-parameter-in-kotlin", "title": "Use a variable for named parameter in kotlin", "body": "<p>I have a function defined as follows: </p>\n\n<pre><code>getTypeB(id: String, \n         valA1: TypeA = defaultA1\n         valA2: TypeA = defaultA2,\n         valA3: TypeA = defaultA3 ) : TypeB {}\n</code></pre>\n\n<p>I know using named arguments I can call the above function with only some of the vals, like</p>\n\n<pre><code>getTypeB(id,\n         valA2 = someValueOfTypeA )\n</code></pre>\n\n<p>My question is, is here any way for the literal text <code>valA2</code> to be a variable. I wanted to be able call <code>getTypeB</code> from somewhere else, where they won't know the argument argument names unless they're passed in. So is there a way to use a variable for a named argument? If not, us there any other alternative I can use here?</p>\n"}, {"tags": ["android", "xml", "kotlin"], "comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1548794004, "post_id": 54428824, "comment_id": 95668410, "body": "You can format the code any way you want, but alphabetical is NOT the standard on android. The standard is for the id (if present) to always be first, so you can easily find it.  Then comes layout width/height in that order.  Then any other parameters dealing with the layout (here the layout_constraint parameters, any padding/margin, etc).  Then any other options.  Basically android code prefers grouping by type, rather than grouping by alphabetical order.  Especially since with the use of namespaces you end up with alphabeticals by source which makes no sense at all."}, {"owner": {"reputation": 27, "user_id": 9911470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fz-DSHmV8ck/AAAAAAAAAAI/AAAAAAAAJHY/F8ypd6YNkBE/photo.jpg?sz=128", "display_name": "Daniel Gustavo Leguizamon Rozo", "link": "https://stackoverflow.com/users/9911470/daniel-gustavo-leguizamon-rozo"}, "reply_to_user": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1548794508, "post_id": 54428824, "comment_id": 95668610, "body": "So how could I get the result I want?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9911470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fz-DSHmV8ck/AAAAAAAAAAI/AAAAAAAAJHY/F8ypd6YNkBE/photo.jpg?sz=128", "display_name": "Daniel Gustavo Leguizamon Rozo", "link": "https://stackoverflow.com/users/9911470/daniel-gustavo-leguizamon-rozo"}, "edited": false, "score": 0, "creation_date": 1548859553, "post_id": 54430939, "comment_id": 95695461, "body": "Thank you very much, I knew it was. It turns out that when creating a new project, the defacto IDE is in:SCHEME Project, it had to change it to Default."}], "tags": [], "owner": {"reputation": 416, "user_id": 5736627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s2SZW.jpg?s=128&g=1", "display_name": "Elias Meireles", "link": "https://stackoverflow.com/users/5736627/elias-meireles"}, "is_accepted": false, "score": 3, "last_activity_date": 1548803007, "creation_date": 1548803007, "answer_id": 54430939, "question_id": 54428824, "link": "https://stackoverflow.com/questions/54428824/how-to-format-xml-code-alphabetically-in-android-studio/54430939#54430939", "title": "how to format XML code alphabetically in android studio?", "body": "<p>If you're with Windows or Linux, press CRTL+ALT+S, got to -> Editor->Code Style, there is a dropdown Scheme...\n<a href=\"https://i.stack.imgur.com/T3vxF.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/T3vxF.png</a>\nselect the Default IDE and apply, back to your XML file and press CRTL+ALT+L, this should work, in case of Mac, i don't know yet.</p>\n"}], "owner": {"reputation": 27, "user_id": 9911470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fz-DSHmV8ck/AAAAAAAAAAI/AAAAAAAAJHY/F8ypd6YNkBE/photo.jpg?sz=128", "display_name": "Daniel Gustavo Leguizamon Rozo", "link": "https://stackoverflow.com/users/9911470/daniel-gustavo-leguizamon-rozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548803007, "creation_date": 1548792404, "question_id": 54428824, "link": "https://stackoverflow.com/questions/54428824/how-to-format-xml-code-alphabetically-in-android-studio", "title": "how to format XML code alphabetically in android studio?", "body": "<p>I have this xml code. I want it to be organized alphabetically with Command + alt + L. </p>\n\n<pre><code>&lt;ImageView\n android:id=\"@+id/logoImageView\"\n android:layout_width=\"0dp\"\n android:layout_height=\"150dp\"\n android:scaleType=\"fitCenter\"\n android:src=\"@drawable/ic_logo\"\n app:layout_constraintTop_toTopOf=\"@+id/view\"\n app:layout_constraintStart_toStartOf=\"parent\"\n app:layout_constraintEnd_toEndOf=\"parent\" android:layout_marginTop=\"64dp\"\n android:layout_marginStart=\"32dp\" android:layout_marginEnd=\"32dp\" /&gt;\n</code></pre>\n\n<p>example </p>\n\n<pre><code>&lt;ImageButton\n android:id=\"@+id/logoImageView\"\n android:layout_width=\"0dp\"\n android:layout_height=\"150dp\"\n android:layout_marginStart=\"32dp\"\n android:layout_marginTop=\"32dp\"\n android:layout_marginEnd=\"32dp\"\n android:background=\"@android:color/transparent\"\n android:scaleType=\"fitCenter\"\n app:layout_constraintEnd_toEndOf=\"parent\"\n app:layout_constraintStart_toStartOf=\"parent\"\n app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 3891, "user_id": 3166846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QoxDC.jpg?s=128&g=1", "display_name": "Dan Harms", "link": "https://stackoverflow.com/users/3166846/dan-harms"}, "is_accepted": true, "score": 0, "last_activity_date": 1548793161, "creation_date": 1548793161, "answer_id": 54428987, "question_id": 54428792, "link": "https://stackoverflow.com/questions/54428792/how-to-restart-app-in-android-oreo-and-higher-version-devices/54428987#54428987", "title": "how to restart app in android oreo and higher version devices?", "body": "<p>Within your Activity call <code>recreate();</code> This will cause the activity to be recreated in a new instance. </p>\n\n<p><a href=\"https://developer.android.com/reference/android/app/Activity#recreate%28%29\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 7503, "user_id": 2339405, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/K0wMk.jpg?s=128&g=1", "display_name": "Rainmaker", "link": "https://stackoverflow.com/users/2339405/rainmaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1548793648, "creation_date": 1548793648, "answer_id": 54429094, "question_id": 54428792, "link": "https://stackoverflow.com/questions/54428792/how-to-restart-app-in-android-oreo-and-higher-version-devices/54429094#54429094", "title": "how to restart app in android oreo and higher version devices?", "body": "<p>System.exit(0) is not a best approach as you can't expect status of current threads running under your app, it can lead to corrupted file issue. Try this piece: </p>\n\n<pre><code>Intent intent = new Intent(context, MainActivity.class);\nintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\nstartActivity(intent);\n\nRuntime.getRuntime().exit(0);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8617936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ed8eb1d70f580536e2d943ebd2bc95?s=128&d=identicon&r=PG&f=1", "display_name": "Sajjad Yousefnia", "link": "https://stackoverflow.com/users/8617936/sajjad-yousefnia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 54428987, "answer_count": 2, "score": 0, "last_activity_date": 1548793648, "creation_date": 1548792248, "question_id": 54428792, "link": "https://stackoverflow.com/questions/54428792/how-to-restart-app-in-android-oreo-and-higher-version-devices", "title": "how to restart app in android oreo and higher version devices?", "body": "<p>I can restart app in devices which are below android oreo, My question is that, how  I can perform the restart in oreo and higher version devices, using Kotlin or Java ??</p>\n\n<pre><code>val intent = Intent(applicationContext, MainActivity::class.java)\n    val mPendingIntentId = 1000\n    val mPendingIntent = PendingIntent.getActivity(applicationContext, mPendingIntentId, intent, PendingIntent.FLAG_CANCEL_CURRENT)\n    val mgr = applicationContext.getSystemService(Context.ALARM_SERVICE) as AlarmManager\n    mgr.set(AlarmManager.RTC, System.currentTimeMillis() + 100, mPendingIntent)\n    System.exit(0)\n</code></pre>\n"}, {"tags": ["java", "string", "algorithm", "kotlin", "bitwise-operators"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548796094, "post_id": 54428761, "comment_id": 95669264, "body": "Did you do profiling to know that this is what takes a long time?"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1548796814, "post_id": 54428761, "comment_id": 95669577, "body": "What it the reason of the <code>val solved = Base()</code> in the first line? In other words is it true that <code>solved</code> (and its fields) is actually a constant for a given run?"}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1548801727, "post_id": 54428761, "comment_id": 95671310, "body": "@EpicPandaForce, as I&#39;m running this in a Android Emulator the use of the method increments 20~30 seconds to final time of the iteration. Is valid to say that I&#39;m running this method over a 600000 times loop."}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "reply_to_user": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "edited": false, "score": 0, "creation_date": 1548801828, "post_id": 54428761, "comment_id": 95671345, "body": "@SergGr the <code>solved</code> var is just to get original values to compare with current modified values."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548805834, "post_id": 54429117, "comment_id": 95672400, "body": "I liked your approach, however it didn&#39;t worked. A tried: <code>val kk = 0x011233L hexConcat 0x455677L println(kk containsAsHex 0x455677L)</code>, then got a false result. Is important to know that <code>0x011233L</code> concatenated with <code>0x455677L</code> should result in &quot;<code>011233455677</code>&quot; and, as we can see, the &quot;sequence&quot; 455677 exists inside the concatenated value."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548806281, "post_id": 54429117, "comment_id": 95672511, "body": "@LucasSousa my mistake! the shift has to be done at the end of the loop! fixed it :)"}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548806820, "post_id": 54429117, "comment_id": 95672619, "body": "@LucasSousa in the special case of just checking if the number in question is in the first 6-digits or last 6-digits you can simpliy containsHex altogether. see my edit. the more general solution is below."}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548814766, "post_id": 54429117, "comment_id": 95674567, "body": "Your approach works but it have a problem with the leading zero at the beginning. I think you have to know that <code>ur</code> is the continuation of <code>ul</code> field, then, in the operations of the class its hex values can be permuted. For example, if we test <code>ul</code> is <code>112334</code> and ur <code>556770&quot;</code> (both was rotated 1 digit clock-wise) we get a <code>false</code> result. Anyway, as @SergGr pointed, I created a more detailed question about this problem. Take a look: <a href=\"https://stackoverflow.com/questions/54432393/how-to-check-if-permuted-hexadecimal-integers-matches-to-another-using-bitewise\">question</a>."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548806708, "last_edit_date": 1548806708, "creation_date": 1548793798, "answer_id": 54429117, "question_id": 54428761, "link": "https://stackoverflow.com/questions/54428761/how-to-replace-this-string-operations-with-bitwise-operations/54429117#54429117", "title": "How to replace this String operations with Bitwise operations?", "body": "<p><strong>Concatenating</strong></p>\n\n<p>\"Concatenating\" two hexadecimal 6-digit numbers is actually a left shift of 24 bits (since every hexdecimal digit has 4 bits and the length is 6) of the first number and taking the second number bitwise <code>or</code> the result of the shift.</p>\n\n<pre><code>infix fun Long.hexConcat(num: Long) = num.or(shl(24))\n</code></pre>\n\n<p><strong>Contains</strong> </p>\n\n<p>To check whether a 6-digit hex number is either contained in the first or last 6-digits of a 12-digit hex number, you can bitwise <code>and</code> them both (to test the end). To test if it is at the start you have to first right shift it by 24 bits and then bitwise <code>and</code> it.</p>\n\n<pre><code>infix fun Long.containsAsHex(num: Long) = and(num) == num || shr(24) == num\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>fun main() {\n\n    val a = 0x011233L\n    val b = 0x455677L\n\n    val c = a hexConcat b\n\n    println(c.toString(16)) // 11233455677\n    println(c containsAsHex a) // true\n}\n</code></pre>\n\n<p>Of course you can parametrize <code>hexConcat</code> further to not limit it to 6-digit hexadecimal numbers.</p>\n\n<hr>\n\n<p>In case the 6-digit hex number can be anyhwhere in a 12-digit hex number:</p>\n\n<p>To check whether a hexadecimal number \"contains\" another one you shift it 4 bits to the right until its value is 0 or you found the match which would mean that the shifted number bitwise <code>and</code> the number to test has to equal the number to test.</p>\n\n<pre><code>infix fun Long.containsAsHex(num: Long): Boolean {\n\n    var shifted = this\n\n    while (true) {\n\n        if(shifted.and(num) == num) {\n            return true\n        }\n\n        if(shifted == 0L) {\n            return false\n        }\n\n        shifted = shifted.shr(4) // shift one hex digit\n    }\n\n    @Suppress(\"UNREACHABLE_CODE\")\n    return false\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548808698, "post_id": 54431598, "comment_id": 95673159, "body": "Beatiful solution! And what do you think about it in terms of otimization, comparing with my String approach?"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548809095, "post_id": 54431598, "comment_id": 95673228, "body": "@LucasSousa, I suspect it will be faster but most probably not by much. Frankly I believe you should show us your real high-level problem so we can discuss some algorithm-level improvements first rather than some low-level optimizations. Those optimizations might help but usually you can win much more by using a good algorithm."}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548809175, "post_id": 54431598, "comment_id": 95673246, "body": "Of course. I&#39;ll update my question with more info about what i&#39;m doing, then. Ok?"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548809205, "post_id": 54431598, "comment_id": 95673255, "body": "I think it is better to create a new question for that. This one is already used for your low-level stuff"}, {"owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1548814202, "post_id": 54431598, "comment_id": 95674439, "body": "Well, I just created it <a href=\"https://stackoverflow.com/questions/54432393/how-to-check-if-permuted-hexadecimal-integers-matches-to-another-using-bitewise\">here</a>!"}], "tags": [], "owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "is_accepted": false, "score": 0, "last_activity_date": 1548807513, "creation_date": 1548807513, "answer_id": 54431598, "question_id": 54428761, "link": "https://stackoverflow.com/questions/54428761/how-to-replace-this-string-operations-with-bitwise-operations/54431598#54431598", "title": "How to replace this String operations with Bitwise operations?", "body": "<p>Assuming your target state is fixed and has a fixed size of 12 hex chars, I'd do it a bit differently. I'd first pre-calculated all the rotations of the <code>solved</code> and then checked against them using simple equals. I'm not sure where it makes sense to store that in your application. In this code I pass that as the <code>target</code> parameter.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>class Cubo() {\n\n    var ul: Int = 0x011233\n    var ur: Int = 0x455677\n    var dl: Int = 0x998bba\n    var dr: Int = 0xddcffe\n\n    constructor(ul: Int, ur: Int, dl: Int, dr: Int) : this() {\n        this.ul = ul\n        this.ur = ur\n        this.dl = dl\n        this.dr = dr\n    }\n\n    fun isSolved(target: TargetState): Boolean {\n        return target.checkSolved(this)\n    }\n}\n\n\nclass TargetState(val uRot: AllRotations, val dRot: AllRotations) {\n    constructor(c: Cubo) : this(AllRotations(concat(c.ul, c.ur)), AllRotations(concat(c.dl, c.dr))) {\n    }\n\n    fun checkSolved(c: Cubo): Boolean {\n        val u = concat(c.ul, c.ur)\n        val d = concat(c.dl, c.dr)\n        return uRot.contains(u) and dRot.contains(d)\n    }\n\n    companion object {\n        fun concat(l: Int, r: Int): Long {\n            return l.toLong().shl(AllRotations.singleBitsCount).or(r.toLong())\n        }\n\n    }\n}\n\n\nclass AllRotations(value: Long) {\n\n    val rotatedValues = Array&lt;Long&gt;(doubleDigitsCount) { i -&gt; rotate(value, digitSize * i) }\n\n    fun contains(test: Long): Boolean {\n        for (v in rotatedValues) {\n            if (v == test)\n                return true\n        }\n        return false\n    }\n\n\n    companion object {\n        const val singleDigitsCount = 6\n        const val doubleDigitsCount = 2 * singleDigitsCount\n        const val digitSize = 4\n        const val singleBitsCount = digitSize * singleDigitsCount\n        const val doubleBitsCount = digitSize * doubleDigitsCount\n        const val mask = 1L.shl(doubleBitsCount) - 1\n\n\n        fun rotate(value: Long, shift: Int): Long {\n            val hi = value.shl(shift).and(mask)\n            val lo = value.shr(doubleBitsCount - shift)\n            return hi.or(lo)\n        }\n    }\n}\n</code></pre>\n\n<p>Here is a simple test that it works:</p>\n\n<pre><code>val solved = Cubo(0x011233, 0x455677, 0, 0)\nval targetState = TargetState(solved)\n\nval c1 = Cubo(0x233455, 0x677011, 0, 0)\nval c2 = Cubo(0x455677, 0x011233, 0, 0)\nval cbad = Cubo(0x455677, 0x011233, 1, 0)\n\nprintln(c1.isSolved(targetState))\nprintln(c2.isSolved(targetState))\nprintln(cbad.isSolved(targetState))\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 4563960, "user_type": "registered", "profile_image": "https://graph.facebook.com/884033211659120/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/4563960/lucas-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548807513, "creation_date": 1548792033, "last_edit_date": 1548794000, "question_id": 54428761, "link": "https://stackoverflow.com/questions/54428761/how-to-replace-this-string-operations-with-bitwise-operations", "title": "How to replace this String operations with Bitwise operations?", "body": "<p>Considering I have this fields in a <code>Base</code> object:</p>\n\n<pre><code>//these fields have their bits constantly permuted\n//and have their values defined to \"011233455677...\"\n//to integers acts like Strings\n\nvar ul = 0x011233\nvar ur = 0x455677\nvar dl = 0x998bba\nvar dr = 0xddcffe\n</code></pre>\n\n<p>And considering I have this method which operates those fields as String values:</p>\n\n<pre><code>private fun Cubo.isSolved(): Boolean {             \n    val solved = Base()\n\n    //function to append \"leading zero\" to the hex integer\n    fun fill(s: String) = if (s.length == 5) \"0$s\" else s\n\n    //all these fields are declared at the global escope\n\n    //converted ul, ur, dl, dr from solved obj to hex string\n    a1 = fill(Integer.toHexString(solved.ul))\n    b1 = fill(Integer.toHexString(solved.ur))\n    c1 = fill(Integer.toHexString(solved.dl))\n    d1 = fill(Integer.toHexString(solved.dr))\n\n    //concats the converteds ul and ur into a new one\n    ab1 = a1 + b1\n    //concats the converteds dl and dr into a new one\n    cd1 = c1 + d1\n\n    //do the same with fields of THIS object\n    a2 = fill(Integer.toHexString(this.ul))\n    b2 = fill(Integer.toHexString(this.ur))\n    c2 = fill(Integer.toHexString(this.dl))\n    d2 = fill(Integer.toHexString(this.dr))\n    ab2 = a2 + b2\n    cd2 = c2 + d2\n\n    //checks if concatenated fields from THIS object exists inside the \n    //duplicated [solved] object fields.\n    //This will help me to check if fields from THIS object are \n    //cyclic/circular permutations of the [solved] object.\n    return (ab1 + ab1).contains(ab2) &amp;&amp; (cd1 + cd1).contains(cd2)\n}\n</code></pre>\n\n<p>My goal is to know how to replace that operations with bitwise operations, once the fields are integers?</p>\n\n<p>I'm trying this because my app is so slow and this method is reducing its performance once it is called thousand times in loop, then realized a way of improve my application performance could be using the bitwising operations.</p>\n\n<p>And to simplify the idea of \u200b\u200bthis method, it used just to verify that the field THIS object corresponds to the fields of a \"SOLVED\" object, but this is done considering the possibility that the fields of the test object are cyclically permuted.</p>\n"}, {"tags": ["spring", "spring-boot", "kotlin", "error-handling", "exception-handling"], "comments": [{"owner": {"reputation": 2268, "user_id": 3133286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8eb9502875ead75092230df8fdcf5dd7?s=128&d=identicon&r=PG", "display_name": "ordonezalex", "link": "https://stackoverflow.com/users/3133286/ordonezalex"}, "edited": false, "score": 0, "creation_date": 1548844615, "post_id": 54428353, "comment_id": 95686373, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22548508/exceptionhandler-doesnt-work-with-throwable\">ExceptionHandler doesn&#39;t work with Throwable</a>"}], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 10937507, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gfU8Z3K-1WI/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbkUIfSQdxm5vOOzCfNdhP4v779RQ/mo/photo.jpg?sz=128", "display_name": "Bon", "link": "https://stackoverflow.com/users/10937507/bon"}, "is_accepted": false, "score": -1, "last_activity_date": 1548796515, "creation_date": 1548796515, "answer_id": 54429691, "question_id": 54428353, "link": "https://stackoverflow.com/questions/54428353/controlleradvice-handle-the-exception-but-not-customize-response/54429691#54429691", "title": "@ControllerAdvice handle the exception but not customize response", "body": "<p>You need to annotate your ApiError class with the following:</p>\n\n<pre><code>@Data \n@JsonTypeInfo(\n            include = JsonTypeInfo.As.WRAPPER_OBJECT,\n            use = JsonTypeInfo.Id.CUSTOM, \n            property = \"error\",\n            visible = true\n) \n@JsonTypeIdResolver(LowerCaseClassNameResolver.class)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "is_accepted": false, "score": -1, "last_activity_date": 1548954670, "creation_date": 1548954670, "answer_id": 54465846, "question_id": 54428353, "link": "https://stackoverflow.com/questions/54428353/controlleradvice-handle-the-exception-but-not-customize-response/54465846#54465846", "title": "@ControllerAdvice handle the exception but not customize response", "body": "<p>My workaround was, but is not the correct answer</p>\n\n<p>on <code>application.yaml</code></p>\n\n<pre><code>server:\n  error:\n    include-exception: true\n</code></pre>\n\n<p>on my controller I'm check if email and username exists and throw a custome message to exception</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/register\")\nclass RegisterController: BaseController() {\n\n    @ResponseStatus(HttpStatus.CREATED)\n    @PostMapping(\"/save\")\n    fun register(@RequestBody user: ApplicationUser) {\n        if (userRepository.existsByEmail(user.email)) {\n            throw DataIntegrityViolationException(\"Email already exists\")\n        }\n        if (userRepository.existsByUsername(user.username)) {\n            throw DataIntegrityViolationException(\"Username already exists\")\n        }\n        user.password = bCryptPasswordEncoder.encode(user.password)\n        userRepository.save(user)\n    }\n}\n</code></pre>\n\n<p>and the return worked fine</p>\n\n<pre><code>{\n    \"timestamp\": \"2019-01-31T17:08:40.832+0000\",\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"exception\": \"org.springframework.dao.DataIntegrityViolationException\",\n    \"message\": \"Email already exists\", //here is\n    \"path\": \"/register/save\"\n}\n</code></pre>\n"}], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 995, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548954670, "creation_date": 1548790049, "question_id": 54428353, "link": "https://stackoverflow.com/questions/54428353/controlleradvice-handle-the-exception-but-not-customize-response", "title": "@ControllerAdvice handle the exception but not customize response", "body": "<p>This is my exception handler</p>\n\n<pre><code>@ControllerAdvice(basePackageClasses = [SignUpController::class])\nclass ControllerAdvice: ResponseEntityExceptionHandler() {\n\n    @ExceptionHandler(Exception::class)\n    @ResponseBody\n    fun handleControllerException(request: HttpServletRequest, ex: Throwable): ResponseEntity&lt;*&gt; {\n        val status = HttpStatus.CONFLICT\n        return ResponseEntity&lt;Any&gt;(ApiError(status.value(), ex.message), status)\n    }\n}\n</code></pre>\n\n<p>and my custom class</p>\n\n<pre><code>data class ApiError(val status: Int, val message: String?)\n</code></pre>\n\n<p>The handler work but error is throw like follow</p>\n\n<pre><code>{\n    \"timestamp\": \"2019-01-29T19:17:22.541+0000\",\n    \"status\": 401,\n    \"error\": \"Unauthorized\",\n    \"message\": \"could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\",\n    \"path\": \"/sign-up\"\n}\n</code></pre>\n\n<p>But I'm expected for something like follow</p>\n\n<pre><code>{\n    \"apierror\": {\n        \"status\": ...,\n        \"message\": ...\"\n    }\n}\n</code></pre>\n\n<p>I'm based for this tutorials </p>\n\n<p><a href=\"https://www.toptal.com/java/spring-boot-rest-api-error-handling\" rel=\"nofollow noreferrer\">https://www.toptal.com/java/spring-boot-rest-api-error-handling</a>\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-error-handling\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-error-handling</a>\n<a href=\"https://medium.com/@jovannypcg/understanding-springs-controlleradvice-cd96a364033f\" rel=\"nofollow noreferrer\">https://medium.com/@jovannypcg/understanding-springs-controlleradvice-cd96a364033f</a></p>\n\n<p>What I'm doing wrong? I'm missing any config?</p>\n"}, {"tags": ["kotlin", "spring-webflux", "project-reactor"], "answers": [{"comments": [{"owner": {"reputation": 9495, "user_id": 2145769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CIiA2.png?s=128&g=1", "display_name": "Leonard Br&#252;nings", "link": "https://stackoverflow.com/users/2145769/leonard-br%c3%bcnings"}, "edited": false, "score": 0, "creation_date": 1548936229, "post_id": 54458094, "comment_id": 95728268, "body": "From the logs it looks like the request is done eagerly with <code>.exchange()</code>, I have two <code>Received response</code> log entries with the headers. This also happens if I only <code>take(1)</code>."}], "tags": [], "owner": {"reputation": 20335, "user_id": 1113486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda20bf9d9c85c4390ca7237beba45a2?s=128&d=identicon&r=PG", "display_name": "Simon Basl&#233;", "link": "https://stackoverflow.com/users/1113486/simon-basl%c3%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1548929356, "creation_date": 1548929356, "answer_id": 54458094, "question_id": 54428014, "link": "https://stackoverflow.com/questions/54428014/reactor-lazy-pagination-with-expand/54458094#54458094", "title": "Reactor lazy pagination with expand", "body": "<p>Are you positive that it actually performs the request? <code>fetchCommitInternal</code> being invoked means that <code>WebFlux</code> \"prepared\" the request, not necessarily that it was executed (ie. subscribed).</p>\n\n<p>The following simplification of your use case shows the difference:</p>\n\n<pre><code>private static Tuple2&lt;Integer, Flux&lt;Integer&gt;&gt; nextPage(int index, int pageSize) {\n    System.out.println(\"prepared a request for page \" + index);\n    return Tuples.of(index, Flux.range((pageSize * (index - 1)) + 1, pageSize));\n}\n\n@Test\npublic void expandLimitedRequest() {\n    int pageSize = 5;\n    Flux.just(nextPage(1, pageSize))\n        .doOnSubscribe(sub -&gt; System.out.println(\"requested first page\"))\n        .expand(page -&gt; {\n            int currentPage = page.getT1();\n            if (currentPage &lt; 3) {\n                int nextPage = currentPage + 1;\n                return Flux.just(nextPage(nextPage, pageSize))\n                           .doOnSubscribe(sub -&gt; System.out.println(\"requested page \" + nextPage));\n            }\n            return Flux.empty();\n        })\n        .doOnNext(System.out::println)\n        .flatMap(Tuple2::getT2)\n        .doOnNext(System.out::println)\n        .take(8)\n        .blockLast();\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>prepared a request for page 1\nrequested first page\n[1,FluxRange]\n1\n2\n3\n4\n5\nprepared a request for page 2\nrequested page 2\n[2,FluxRange]\n6\n7\n8\nprepared a request for page 3\n</code></pre>\n\n<p>As you can see, it prepares the request for page 3 but never execute it (because the <code>take</code> downstream cancels the <code>expand</code> before that).</p>\n"}], "owner": {"reputation": 9495, "user_id": 2145769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CIiA2.png?s=128&g=1", "display_name": "Leonard Br&#252;nings", "link": "https://stackoverflow.com/users/2145769/leonard-br%c3%bcnings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1494, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548929356, "creation_date": 1548788608, "question_id": 54428014, "link": "https://stackoverflow.com/questions/54428014/reactor-lazy-pagination-with-expand", "title": "Reactor lazy pagination with expand", "body": "<p>Based on <a href=\"https://stackoverflow.com/questions/53274568/how-to-collect-paginated-api-responses-using-spring-boot-webclient\">How to collect paginated API responses using spring boot WebClient?</a></p>\n\n<p>I created the following crawler class</p>\n\n<pre><code>class GitlabCrawler(private val client: WebClient, private val token: String) {\n\n    fun fetchCommits(project: URI): Flux&lt;Commit&gt; {\n        return fetchCommitsInternal(project).expand { cr: ClientResponse? -&gt;\n                val nextUrl = getNextUrl(cr)\n\n                nextUrl?.let { fetchCommitsInternal(URI.create(it)) }\n                        ?: Mono.empty&lt;ClientResponse&gt;()\n        }.limitRate(1)\n                .flatMap { cr: ClientResponse? -&gt; cr?.bodyToFlux(Commit::class.java) ?: Flux.empty() }\n\n\n    }\n\n    private fun getNextUrl(cr: ClientResponse?):String? {\n        // TODO replace with proper link parsing\n        return cr?.headers()?.header(HttpHeaders.LINK)?.firstOrNull()\n                ?.splitToSequence(\",\")\n                ?.find { it.endsWith(\"rel=\\\"next\\\"\") }\n                ?.let { it.substring(it.indexOf('&lt;') + 1, it.lastIndexOf('&gt;')) }\n    }\n\n    private fun fetchCommitsInternal(url: URI): Mono&lt;ClientResponse&gt; {\n        return client.get()\n                .uri(url)\n                .accept(MediaType.APPLICATION_JSON_UTF8)\n                .header(\"Private-Token\", token)\n                .exchange()\n    }\n}\n\n\ndata class Commit(\n        val id: String,\n        val message: String,\n        @JsonProperty(\"parent_ids\") val parentIds: List&lt;String&gt;,\n        @JsonProperty(\"created_at\") val createdAt: String)\n</code></pre>\n\n<p>I'd like to avoid unnecessary request, but it performs more request than needed to fulfill the request.</p>\n\n<pre><code>gitlabCrawler.fetchCommits(URI.create(\"https://...\")).take(15).collectList().block()\n</code></pre>\n\n<p>Would only need one request as each page contains 20 entries, but it starts the second page request. It seems to always request one more page than necessary. I tried using <code>limitRate</code> but that doesn't seem to have an effect.</p>\n\n<p>Is there a way to make it lazy, i.e., only request the next page when the current is exhausted?</p>\n"}, {"tags": ["android", "firebase", "kotlin", "android-asynctask", "firebase-storage"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10986357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l5-c4BmtWYI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP8sr1G8E87nUgzfX-f_NkdUpEVMg/mo/photo.jpg?sz=128", "display_name": "Bailey Morgan", "link": "https://stackoverflow.com/users/10986357/bailey-morgan"}, "edited": false, "score": 0, "creation_date": 1548912452, "post_id": 54430904, "comment_id": 95715926, "body": "Thanks for the answer, that looks like a great solution that would fix my issue so I&#39;ll mark as the answer. However, I ended up fixing it by using a method to upload one image at a time and in their call backs, recursively call the function for the next image. When the last image was uploaded, I called an on complete listener which was passed along through recursion to be executed in the callback."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 0, "last_activity_date": 1548802735, "creation_date": 1548802735, "answer_id": 54430904, "question_id": 54427428, "link": "https://stackoverflow.com/questions/54427428/firebase-storage-upload-task-continuation-never-fires/54430904#54430904", "title": "Firebase Storage upload task continuation never fires", "body": "<p>Don't ever block the main thread.  This is usually a terrible idea (as you have just discovered) and could cause your app to crash with an ANR.</p>\n\n<p>If you want to register another callback when a bunch of tasks are complete, use one of the variants of <a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/Tasks.html#whenAll(java.util.Collection%3C?%20extends%20com.google.android.gms.tasks.Task%3C?%3E%3E)\" rel=\"nofollow noreferrer\">Tasks.whenAll()</a> and pass it all the tasks you want to complete before moving to the next item of work.</p>\n"}], "owner": {"reputation": 13, "user_id": 10986357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l5-c4BmtWYI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQP8sr1G8E87nUgzfX-f_NkdUpEVMg/mo/photo.jpg?sz=128", "display_name": "Bailey Morgan", "link": "https://stackoverflow.com/users/10986357/bailey-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 54430904, "answer_count": 1, "score": 1, "last_activity_date": 1548802735, "creation_date": 1548786404, "question_id": 54427428, "link": "https://stackoverflow.com/questions/54427428/firebase-storage-upload-task-continuation-never-fires", "title": "Firebase Storage upload task continuation never fires", "body": "<h1>I am working on a project and I need to upload images to Firebase storage and get the download url before I can upload the associated model class to Firestore.</h1>\n\n<p>I am trying to use countdown latches to block the main thread until the upload is complete. I know there are better methods out there and feel free to recommend some but I figured I could just through up a brief load screen. The issue is that the callback for the getDownloadurl task never gets called. I have searched and searched and can't figure it out. Right now my code is straight from the documentation.</p>\n\n<pre><code>fun uploadListing(listing: Listing, images: ArrayList&lt;ByteArray&gt;, onCompleteListener: () -&gt; Unit = {}) {\n            val listingRef = FirebaseFirestore.getInstance().collection(LISTINGS_COLLECTION).document()\n            val storageRef = FirebaseStorage.getInstance().reference\n            listing.id = listingRef.id\n            val countDownLatch = CountDownLatch(images.size)\n\n            var i = 0\n            images.forEach {\n                val imageRef = storageRef.child(\"images/${listing.id}/$i\")\n                val uploadTask = imageRef.putBytes(it)\n                uploadTask.continueWithTask(Continuation&lt;UploadTask.TaskSnapshot, Task&lt;Uri&gt;&gt; { task -&gt;\n                    if (!task.isSuccessful) {\n                        task.exception?.let { exception -&gt;\n                            throw exception\n                        }\n                    }\n                    return@Continuation imageRef.downloadUrl\n                }).addOnCompleteListener { task -&gt;\n                    if (task.isSuccessful) {\n                        listing.images.add(task.result.toString())\n                        countDownLatch.countDown()\n                    } else {\n                        // Handle failures\n                        // ...\n                    }\n                }\n            }\n            countDownLatch.await()\n            listingRef.set(listing).addOnSuccessListener {\n                onCompleteListener()\n            }\n        }\n</code></pre>\n\n<p>My gradle dependencies... </p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.android.support:design:28.0.0'\n    implementation 'com.android.support:support-v4:28.0.0'\n    implementation 'com.google.firebase:firebase-firestore:17.1.5'\n    implementation 'com.google.firebase:firebase-storage:16.0.5'\n    implementation 'com.google.firebase:firebase-auth:16.1.0'\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n    implementation 'com.squareup.picasso:picasso:2.5.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n//    implementation 'org.elasticsearch.client:elasticsearch-rest-high-level-client:6.5.3'\n    implementation 'com.google.code.gson:gson:2.8.5'\n}\n</code></pre>\n"}, {"tags": ["kotlin", "jackson"], "answers": [{"comments": [{"owner": {"reputation": 3909, "user_id": 3067542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf7e520d66249a250a769cc55effd391?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent F", "link": "https://stackoverflow.com/users/3067542/vincent-f"}, "edited": false, "score": 0, "creation_date": 1548849833, "post_id": 54428509, "comment_id": 95689512, "body": "Thanks for your suggestion. Unfortunately, I need my class to be a <code>data</code> class, as I am using heavily the <code>copy</code> method, and I have more fields than in the simplified example I gave."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548791423, "last_edit_date": 1548791423, "creation_date": 1548790747, "answer_id": 54428509, "question_id": 54427405, "link": "https://stackoverflow.com/questions/54427405/deserialize-a-nested-json-field-with-jackon-in-kotlin/54428509#54428509", "title": "Deserialize a nested json field with Jackon in Kotlin", "body": "<p>For the sake of simplicity, I used <code>Int</code> as type for <code>createdAt</code>.</p>\n\n<p>You could do it like this:</p>\n\n<pre><code>class JsonData(createdAt: Int = 0) {\n\n    private var _createdAt: Int = createdAt\n\n    val createdAt: Int\n        get() = _createdAt\n\n    @JsonProperty(\"metadata\")\n    private fun unpackNested(metadata: Map&lt;String, Any&gt;) {\n        _createdAt =  metadata[\"createdAt\"] as Int\n    }\n}\n</code></pre>\n\n<p><code>createdAt</code> will be a parameter with a default value. Since a data classe's constructor can only have properties (<code>var</code>/<code>val</code>) you will loose the advantages of a <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">data class</a> (<code>toString()</code> out of the box etc.).</p>\n\n<p>You will assign this parameter to a <code>private var _createdAt</code> when the class is instantiated.</p>\n\n<p>The only thing that will be exposed to the outside is a property without a backing field <code>createAt</code> (just a getter in Java terms). So, <code>_createdAt</code> cannot be changed after instantiation.</p>\n\n<p>There are two cases now:</p>\n\n<ol>\n<li>If you instantiate the class, <code>_createdAt</code> will be set to the value you specify. </li>\n<li>If Jackson instantiates the class the value of <code>_createdAt</code> will be overwritten by the <code>unpackNested</code> call.</li>\n</ol>\n\n<p>Here is an example:</p>\n\n<pre><code>val jsonStr = \"\"\"{\n    \"metadata\": {\n        \"createdAt\": 1\n    }\n}\n\"\"\".trimIndent()\n\nfun main() {\n    val objectMapper = ObjectMapper()\n\n    // Jackson does instantiation\n    val jsonData = objectMapper.readValue(jsonStr, JsonData::class.java)\n\n    // you do it directly\n    JsonData(5)\n}\n</code></pre>\n"}], "owner": {"reputation": 3909, "user_id": 3067542, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bf7e520d66249a250a769cc55effd391?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent F", "link": "https://stackoverflow.com/users/3067542/vincent-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548791423, "creation_date": 1548786281, "last_edit_date": 1548791024, "question_id": 54427405, "link": "https://stackoverflow.com/questions/54427405/deserialize-a-nested-json-field-with-jackon-in-kotlin", "title": "Deserialize a nested json field with Jackon in Kotlin", "body": "<p>I've already deserialized some nested field in the past in Java, following instructions from <a href=\"https://www.baeldung.com/jackson-nested-values\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-nested-values</a> (section 5) : </p>\n\n<pre><code>@JsonProperty(\"brand\")\nprivate void unpackNested(Map&lt;String,Object&gt; brand) {\n    this.brandName = (String)brand.get(\"name\");\n    Map&lt;String,String&gt; owner = (Map&lt;String,String&gt;)brand.get(\"owner\");\n    this.ownerName = owner.get(\"name\");\n}\n</code></pre>\n\n<p><code>ownerName</code> being a field in the bean.</p>\n\n<p>Now, I need to do something similar in Kotlin, but I am not happy with what I have so far. Assuming I have a <code>MyPojo</code> class that has a <code>createdAt</code> field, but in the JSON that represents it, the field is nested under a <code>metadata</code> attribute:</p>\n\n<pre><code>data class MyPojo(var createdAt: LocalDateTime = LocalDateTime.MIN) {\n\n    @JsonProperty(\"metadata\")\n    private fun unpackNested(metadata: Map&lt;String, Any&gt;) {\n\n        var createdAtAsString = metadata[\"createdAt\"] as String\n\n        this.createdAt = LocalDateTime.parse(createdAtAsString,DateTimeFormatter.ISO_DATE_TIME)\n    }\n}\n</code></pre>\n\n<p>One of the thing I don't like here is that I am forced to make <code>createdAt</code> a <code>var</code>, not a <code>val</code>. </p>\n\n<p>Is there a Kotlin trick to make things overall better here?  </p>\n"}, {"tags": ["android", "mvvm", "kotlin", "rx-java2", "rx-android"], "answers": [{"tags": [], "owner": {"reputation": 102, "user_id": 10197934, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FmFFvVsgTwQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pUe5Jr73rwA94RxTIavFeJyGDpEg/mo/photo.jpg?sz=128", "display_name": "Carson J.", "link": "https://stackoverflow.com/users/10197934/carson-j"}, "is_accepted": true, "score": 0, "last_activity_date": 1548791862, "creation_date": 1548791862, "answer_id": 54428734, "question_id": 54427270, "link": "https://stackoverflow.com/questions/54427270/android-rxjava2-how-to-make-api-call-when-error-is-thrown/54428734#54428734", "title": "Android RxJava2 - How to make api call when error is thrown?", "body": "<p>I figured it out by throwing custom exceptions instead of passing Single.error down and having my final call checked in flatMapCompletable rather than in the subscription. Then I called the logout endpoint in doOnError if the exception isn't a login exception.</p>\n\n<pre><code>dataManager.apiCall1(dataManager.sessionId!!)\n    .subscribeOn(schedulerProvider.io())\n    .observeOn(schedulerProvider.ui())\n    .flatMap{apiCall1Response -&gt;\n        if (apiCall1Response.isSuccessful &amp;&amp; apiCall1Response.body() != null) {\n            // First api call was successful, execute api call 2.\n            return@flatMap dataManager.apiCall2(apiCall1Response.importantVal)\n        } else {\n            // First api call failed \n            throw ApiCall1Exception(\"Api Call 1 failed.\")\n        }\n    }.flatMap{apiCall2Response -&gt;\n        if (apiCall2Response != null &amp;&amp; apiCall2Response.isSuccessful &amp;&amp; apiCall2Response.body() != null) {\n            // Second api call was successful, execute api call 3.\n            return@flatMap dataManager.apiCall3(apiCall2Response.importantVal)\n        } else {\n            // Second api call failed\n            throw Throwable(\"Api call 2 failed.\")\n        }\n    }.flatMapCompletable{apiCall3Response -&gt;\n        if (apiCall3Response.body() != null) {\n            // All api calls were successful!\n            Completable.complete()\n        } else {\n            // Third api call failed.\n            throw Throwable(\"Api call 3 failed.\")\n        }    \n    }.doOnError{throwable -&gt;\n        if (throwable !is ApiCall1Exception) {\n            // Api call 1 was successful, but something else failed, call logout endpoint.\n            dataManager.logout()\n                  .subscribeOn(schedulerProvider.io())\n                  .observeOn(schedulerProvider.ui())\n        }\n    }.subscribe({\n        // Success!\n        navigator?.success()\n    }, {throwable -&gt;\n        // Something failed!\n        navigator?.handleError(throwable)\n    })\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 10197934, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FmFFvVsgTwQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pUe5Jr73rwA94RxTIavFeJyGDpEg/mo/photo.jpg?sz=128", "display_name": "Carson J.", "link": "https://stackoverflow.com/users/10197934/carson-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "accepted_answer_id": 54428734, "answer_count": 1, "score": 0, "last_activity_date": 1548791862, "creation_date": 1548785743, "question_id": 54427270, "link": "https://stackoverflow.com/questions/54427270/android-rxjava2-how-to-make-api-call-when-error-is-thrown", "title": "Android RxJava2 - How to make api call when error is thrown?", "body": "<p>So I am currently chaining API calls together using flatMap and it is working very well for my use cases. If one of my calls return a failing response code, then I pass an error single that contains a throwable with a message that says which call failed and it keeps going. Here is how I'm doing it now:</p>\n\n<pre><code>dataManager.apiCall1(dataManager.sessionId!!)\n        .subscribeOn(schedulerProvider.io())\n        .observeOn(schedulerProvider.ui())\n        .flatMap{apiCall1Response -&gt;\n            if (apiCall1Response.isSuccessful &amp;&amp; apiCall1Response.body() != null) {\n                // First api call was successful, execute api call 2.\n                return@flatMap dataManager.apiCall2(apiCall1Response.importantVal)\n            } else {\n                // First api call failed \n                return@flatMap Single.error&lt;Throwable&gt;(Throwable(\"First api call failed.\"))\n            }\n        }.flatMap{apiCall2Response -&gt;\n            if (apiCall2Response != null &amp;&amp; apiCall2Response.isSuccessful &amp;&amp; apiCall2Response.body() != null) {\n                // Second api call was successful, execute api call 3.\n                return@flatMap dataManager.apiCall3(apiCall2Response.importantVal)\n            } else if (apiCall2Response is Throwable) {\n                // Api Call 1 Failed.\n                return@flatMap Single.error&lt;Throwable&gt;(apiCall2Response)\n            } else {\n                // Second api call failed\n                return@flatMap Single.error&lt;Throwable&gt;(Throwable(\"Second api call failed.\"))\n            }\n        }.subscribe({apiCall3Response -&gt;\n            if (apiCall3Response is Response&lt;*&gt; &amp;&amp; apiCall3Response.body() != null) {\n               // Success!\n               navigator?.successful(response)\n            } else if (apiCall3Response is Throwable) {\n               // Something failed from before.\n               navigator?.handleError(apiCall3Response)\n            } else {\n               // Third api call failed, handle error\n               navigator!!.handleError(Throwable(\"Api call 3 failed.\"))\n            }\n        }, {throwable -&gt;\n            navigator!!.handleError(throwable)\n        })\n</code></pre>\n\n<p>Well, now I am realizing that I need to make a different api call if my first api call is successful and any of my other calls fail. This is a sequence of calls to log a user in, if the login call is successful, but the next call fails, we would need to call the api logout endpoint. I know it is bad practice to create another single inside of the subscribe() method, so I don't want to do that. I would rather pass the logout call through, but the problem is that there is no way of knowing which api call is being returned in the subscribe method since both the logout and apiCall3 return empty bodies. I would also like to call the logout endpoint if apiCall3 fails, but not sure if that is possible. Here is what I am trying to do:</p>\n\n<pre><code>dataManager.apiCall1(dataManager.sessionId!!)\n        .subscribeOn(schedulerProvider.io())\n        .observeOn(schedulerProvider.ui())\n        .flatMap{apiCall1Response -&gt;\n            if (apiCall1Response.isSuccessful &amp;&amp; apiCall1Response.body() != null) {\n                // First api call was successful, execute api call 2.\n                return@flatMap dataManager.apiCall2(apiCall1Response.importantVal)\n            } else {\n                // First api call failed \n                return@flatMap Single.error&lt;Throwable&gt;(Throwable(\"First api call failed.\"))\n            }\n        }.flatMap{apiCall2Response -&gt;\n            if (apiCall2Response != null &amp;&amp; apiCall2Response.isSuccessful &amp;&amp; apiCall2Response.body() != null) {\n                // Second api call was successful, execute api call 3.\n                return@flatMap dataManager.apiCall3(apiCall2Response.importantVal)\n            } else if (apiCall2Response is Throwable) {\n                // Api Call 1 Failed.\n                return@flatMap Single.error&lt;Throwable&gt;(apiCall2Response)\n            } else {\n                // Second api call failed, logout\n                return@flatMap dataManager.logoutApiCall()\n            }\n        }.subscribe({apiCall3OrLogoutResponse -&gt;\n            // I would like to be able to determine which call this response is from. That is the question. \n            if (apiCall3OrLogoutResponse is Response&lt;*&gt; &amp;&amp; apiCall3OrLogoutResponse.body() != null) {\n               // Success!\n               navigator?.successful(response)\n            } else if (apiCall3OrLogoutResponse is Throwable) {\n               // Something failed from before.\n               navigator?.handleError(apiCall3OrLogoutResponse)\n            } else {\n               // Third api call or logout call failed, handle error\n               if (apiCall3OrLogoutResponse is ApiCall3) {\n                  // Api Call 3 failed. \n                  // Somehow call logout api endpoint\n               } else if (apiCall3OrLogoutResponse is LogoutCall {\n                  // Logout call failed.\n                  navigator?.handleError(Throwable(\"Logout failed.\"))  \n               }       \n            }\n        }, {throwable -&gt;\n            navigator!!.handleError(throwable)\n        })\n</code></pre>\n\n<p>Is there a better way to do this? My use cases are making three sequential api calls, if the first one fails, send a throwable to the subscriber, if the first one succeeds and any fail after that, make another api call.</p>\n"}, {"tags": ["android", "kotlin", "androidx"], "comments": [{"owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1548783631, "post_id": 54425933, "comment_id": 95663524, "body": "Have you tried to change <code>Pair&lt;View, String?&gt;</code> to <code>Pair&lt;View!, String!&gt;!</code>?"}, {"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "reply_to_user": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "edited": false, "score": 0, "creation_date": 1548784400, "post_id": 54425933, "comment_id": 95663924, "body": "@MatPag <code>Pair&lt;View!, String!&gt;!</code> does not work for me."}], "answers": [{"comments": [{"owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "edited": false, "score": 1, "creation_date": 1550575482, "post_id": 54427150, "comment_id": 96310412, "body": "I missed : import androidx.core.util.Pair"}], "tags": [], "owner": {"reputation": 29068, "user_id": 2910520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AJ8o4.jpg?s=128&g=1", "display_name": "MatPag", "link": "https://stackoverflow.com/users/2910520/matpag"}, "is_accepted": true, "score": 1, "last_activity_date": 1612363717, "last_edit_date": 1612363717, "creation_date": 1548785218, "answer_id": 54427150, "question_id": 54425933, "link": "https://stackoverflow.com/questions/54425933/makescenetransitionanimation-shows-an-error-when-using-androidx/54427150#54427150", "title": "makeSceneTransitionAnimation shows an error when using AndroidX", "body": "<p>For me it worked in this way:</p>\n<pre><code>//Watchout about this import, it is important!!\nimport androidx.core.util.Pair\n\n//onCreate code avoided here\nval testView = ImageView(this)\n\nval activityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(\n     MainActivity.this,\n     Pair&lt;View, String&gt;(testView, &quot;hi1&quot;),\n     Pair&lt;View, String&gt;(testView, &quot;hi2&quot;)\n)\n// ... startActivity code here\n</code></pre>\n<p>using those 2 dependencies:</p>\n<pre><code>implementation 'androidx.appcompat:appcompat:1.0.2'\nimplementation 'androidx.core:core-ktx:1.0.1'\n</code></pre>\n"}], "owner": {"reputation": 8398, "user_id": 1315447, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/6YH8k.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/1315447/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 54427150, "answer_count": 1, "score": 1, "last_activity_date": 1612363717, "creation_date": 1548780724, "last_edit_date": 1548783548, "question_id": 54425933, "link": "https://stackoverflow.com/questions/54425933/makescenetransitionanimation-shows-an-error-when-using-androidx", "title": "makeSceneTransitionAnimation shows an error when using AndroidX", "body": "<p>I have following method which works properly when I use <code>android.support.v4</code>  </p>\n\n<pre><code>override fun onClick(movie: Movie, poster: ImageView, name: TextView) {\n            val intent = Intent(activity, DetailActivity::class.java).apply {\n                putExtras(Bundle().apply {\n                    putParcelable(EXTRA_MOVIE, movie)\n                })\n            }\n            val activityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(\n                    requireActivity(),\n\n                    // Now we provide a list of Pair items which contain the view we can transitioning\n                    // from, and the name of the view it is transitioning to, in the launched activity\n                    Pair&lt;View, String?&gt;(poster, ViewCompat.getTransitionName(poster)),\n                    Pair&lt;View, String?&gt;(name, ViewCompat.getTransitionName(name)))\n\n            // Now we can start the Activity, providing the activity options as a bundle\n            ActivityCompat.startActivity(requireContext(), intent, activityOptions.toBundle())\n        }\n</code></pre>\n\n<p>Now I want to migrate to <code>androidx.core.app</code>. for some reason it displays an error on <code>makeSceneTransitionAnimation</code> saying that <code>non of the following functions can be called with the arguments supplied</code>.</p>\n\n<p>Anyone faced with such a problem?</p>\n\n<p><a href=\"https://i.stack.imgur.com/121VD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/121VD.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "api", "kotlin", "retrofit"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1548780894, "post_id": 54425224, "comment_id": 95662169, "body": "Probably a silly question but did you check that <code>response</code> or <code>body</code> are not <code>null</code>? In such a case the application would behave as if <code>onResponse</code> was not called (even if it was actually called)"}, {"owner": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1548782325, "post_id": 54425224, "comment_id": 95662922, "body": "At least in postman its returning the json of the data I&#39;ve sent  with code 201. I tried to debug OnResponse but it seams is not reaching there"}, {"owner": {"reputation": 825, "user_id": 8286029, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2b4188ba2c535940200876c2cc665f89?s=128&d=identicon&r=PG&f=1", "display_name": "Elynad", "link": "https://stackoverflow.com/users/8286029/elynad"}, "edited": false, "score": 0, "creation_date": 1548840108, "post_id": 54425224, "comment_id": 95683589, "body": "Check your logcat when you are making this call ! :)"}, {"owner": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "edited": false, "score": 0, "creation_date": 1548955984, "post_id": 54425224, "comment_id": 95740256, "body": "Nothing happens in logcat. Its OnFailure is note been executed too. Server is really receiving the info"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "edited": false, "score": 0, "creation_date": 1548957742, "post_id": 54426610, "comment_id": 95741194, "body": "Thanks for the answer, but it didn&#39;t make difference. Works aswell with that code, but I still can&#39;t get the response"}, {"owner": {"reputation": 41, "user_id": 5646567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQsFpblAKv4/AAAAAAAAAAI/AAAAAAAACLA/fM2zQLLx7nE/photo.jpg?sz=128", "display_name": "Arief Maffrudin", "link": "https://stackoverflow.com/users/5646567/arief-maffrudin"}, "reply_to_user": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "edited": false, "score": 0, "creation_date": 1549112616, "post_id": 54426610, "comment_id": 95792148, "body": "Could you share the logcat ? what is the message in line code here? Log.e(&quot;onFailure error&quot;, t?.message)"}], "tags": [], "owner": {"reputation": 41, "user_id": 5646567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dQsFpblAKv4/AAAAAAAAAAI/AAAAAAAACLA/fM2zQLLx7nE/photo.jpg?sz=128", "display_name": "Arief Maffrudin", "link": "https://stackoverflow.com/users/5646567/arief-maffrudin"}, "is_accepted": false, "score": 0, "last_activity_date": 1548783232, "creation_date": 1548783232, "answer_id": 54426610, "question_id": 54425224, "link": "https://stackoverflow.com/questions/54425224/retrofit-post-request-never-comes-back-to-onresponse/54426610#54426610", "title": "Retrofit POST request never comes back to OnResponse", "body": "<p>have you set okHttp client for HTTP/2 connection?</p>\n\n<pre><code>private val retrofit = Retrofit.Builder()\n    .baseUrl(\"http://myserverurl.com/api/\")\n    .addConverterFactory(GsonConverterFactory.create())\n    .client(okhttpClient)\n    .build()\n\nprivate val okhttpClient = new OkHttpClient();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "is_accepted": true, "score": 0, "last_activity_date": 1549282523, "creation_date": 1549282523, "answer_id": 54515897, "question_id": 54425224, "link": "https://stackoverflow.com/questions/54425224/retrofit-post-request-never-comes-back-to-onresponse/54515897#54515897", "title": "Retrofit POST request never comes back to OnResponse", "body": "<p>Sorry guys. I found the problem. It was returning to OnResponse, but with code 500.\nThere was a problem with one of the field in my API wich didn't showed up in PostMan..\nSo thanks guys!</p>\n"}], "owner": {"reputation": 1, "user_id": 9808070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/henZl.jpg?s=128&g=1", "display_name": "Thiago Rocha", "link": "https://stackoverflow.com/users/9808070/thiago-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 54515897, "answer_count": 2, "score": 0, "last_activity_date": 1549282523, "creation_date": 1548778324, "last_edit_date": 1548781044, "question_id": 54425224, "link": "https://stackoverflow.com/questions/54425224/retrofit-post-request-never-comes-back-to-onresponse", "title": "Retrofit POST request never comes back to OnResponse", "body": "<p>I am trying to do a <code>POST</code> request with <code>Retrofit</code>, which actually works fine, but it never execute <code>OnResponse</code> function.\nThe thing is that with <code>GET</code> works fine, but not with <code>POST</code> request.</p>\n\n<p>I tried changing the request status code from <code>201</code> to <code>200</code> but didn't work.\nInstead of a <code>Toast</code> in <code>OnResponse</code> I tried calling another function, tried to associate the body?.it value, etc but nothing of that works, even in debug mode... So I think <code>OnResponse</code> is never been executed.\n<code>OnFailure</code> is never executed too.</p>\n\n<p>Initializer:</p>\n\n<pre><code>private val retrofit = Retrofit.Builder()\n    .baseUrl(\"http://myserverurl.com/api/\")\n    .addConverterFactory(GsonConverterFactory.create())\n    .build()\nfun orderService    ()  = retrofit.create(OrderService   ::class.java)\n</code></pre>\n\n<p>OrderService.kt</p>\n\n<pre><code>interface OrderService {\n@POST(\"pedido\")\nfun insert(@Body order: OrderEntity, @Header(\"mykey\") myKey:String) : Call&lt;OrderEntity&gt;\n}\n</code></pre>\n\n<p>Call:</p>\n\n<pre><code> val call = RetrofitInitializer().orderService().insert(order, mMyKey)\ncall.enqueue(object : Callback&lt;OrderEntity&gt; {\n    override fun onResponse(call: Call&lt;OrderEntity&gt;?,\n                            response: Response&lt;OrderEntity&gt;?) {\n        response?.body()?.let {\n            Toast.makeText(mContext, \"It works!\", Toast.LENGTH_LONG).show()\n        }\n    }\n    override fun onFailure(call: Call&lt;OrderEntity&gt;?, t: Throwable?) {\n        Log.e(\"onFailure error\", t?.message)\n    }\n})\n</code></pre>\n\n<p>So, remembering that the request works, it saves data on the API Server, just does not come back to <code>OnResponse</code> so I can't know if it finished already or not in my app.</p>\n"}, {"tags": ["sql", "spring", "hibernate", "spring-boot", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 3892213, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f43aabcdeccb30584765e29292b40dff?s=128&d=identicon&r=PG&f=1", "display_name": "best wishes", "link": "https://stackoverflow.com/users/3892213/best-wishes"}, "is_accepted": true, "score": 1, "last_activity_date": 1548778602, "creation_date": 1548778602, "answer_id": 54425321, "question_id": 54425104, "link": "https://stackoverflow.com/questions/54425104/how-to-throw-cause-on-http-request-exception/54425321#54425321", "title": "How to throw CAUSE on http request exception", "body": "<p>You can use ControllerAdvice to handle these kind of exception.\nYou can configure it to catch any exception in the application and then return appropriate response code/message. You can read more about it <a href=\"https://medium.com/@jovannypcg/understanding-springs-controlleradvice-cd96a364033f\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54425321, "answer_count": 1, "score": 0, "last_activity_date": 1548778602, "creation_date": 1548777923, "question_id": 54425104, "link": "https://stackoverflow.com/questions/54425104/how-to-throw-cause-on-http-request-exception", "title": "How to throw CAUSE on http request exception", "body": "<p>I have the follow REST controller</p>\n\n<pre><code>import ...ApplicationUser\nimport org.springframework.http.HttpStatus\nimport org.springframework.web.bind.annotation.*\n\n@RestController\n@RequestMapping(\"/sign-up\")\nclass SignUpController: BaseController() {\n\n    @ResponseStatus(HttpStatus.CREATED)\n    @PostMapping\n    fun signUp(@RequestBody applicationUser: ApplicationUser) {\n        applicationUser.password = bCryptPasswordEncoder.encode(applicationUser.password)\n        applicationUserRepository.save(applicationUser)\n    }\n}\n</code></pre>\n\n<p>and model/entity</p>\n\n<pre><code>import java.util.*\nimport javax.persistence.*\n\n@Entity\nclass ApplicationUser(\n        @Id\n        @GeneratedValue(strategy = GenerationType.AUTO)\n        var id: Long? = null,\n\n        @Column(unique = true)\n        var username: String? = null,\n\n        var password: String? = null\n) {\n    @Column(unique = true)\n    var email: String? = null\n\n    ...\n}\n</code></pre>\n\n<p>So, purposely I'm trying save an <code>user</code> with an existing <code>email</code> and naturally I get the follow throw</p>\n\n<pre><code>{\n    \"timestamp\": \"2019-01-29T15:40:45.784+0000\",\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"message\": \"could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\",\n    \"path\": \"/sign-up\"\n}\n</code></pre>\n\n<p>But this throw has a <strong>CAUSE</strong>, the cause is that (in portuguese, sorry lol)</p>\n\n<blockquote>\n  <p>com.microsoft.sqlserver.jdbc.SQLServerException: Viola\u00e7\u00e3o da restri\u00e7\u00e3o\n  UNIQUE KEY 'UK_cb61p28hanadv7k0nx1ec0n5l'. N\u00e3o \u00e9 poss\u00edvel inserir uma\n  chave duplicada no objeto 'dbo.application_user'. O valor de chave\n  duplicada \u00e9 (admin@email.com).</p>\n</blockquote>\n\n<p>So, how to send/put/join the cause to http's response exception? Something like this</p>\n\n<pre><code>{\n    \"timestamp\": ...,\n    \"status\": ...,\n    \"error\": ...,\n    \"message\": ...,\n    \"cause\": \"here is the cause of all problems\",\n    \"path\": ...\n}\n</code></pre>\n\n<p>It's possible? Thanks for any suggestion!</p>\n"}, {"tags": ["java", "hibernate", "spring-boot", "jpa", "kotlin"], "comments": [{"owner": {"reputation": 7146, "user_id": 7849549, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VfVSu.jpg?s=128&g=1", "display_name": "Shubh", "link": "https://stackoverflow.com/users/7849549/shubh"}, "edited": false, "score": 0, "creation_date": 1548779246, "post_id": 54425100, "comment_id": 95661178, "body": "Can you share the stack trace ofexception you are getting?"}, {"owner": {"reputation": 331, "user_id": 3002471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93d31939effbb3c9ae30837ecc9936c9?s=128&d=identicon&r=PG&f=1", "display_name": "Sairam Cherupally", "link": "https://stackoverflow.com/users/3002471/sairam-cherupally"}, "edited": false, "score": 0, "creation_date": 1548779679, "post_id": 54425100, "comment_id": 95661455, "body": "@Ctorres you are getting duplicate primary key for which entity? Is it for ApplicationUser or Line or Station?"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "reply_to_user": {"reputation": 7146, "user_id": 7849549, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VfVSu.jpg?s=128&g=1", "display_name": "Shubh", "link": "https://stackoverflow.com/users/7849549/shubh"}, "edited": false, "score": 0, "creation_date": 1548779828, "post_id": 54425100, "comment_id": 95661529, "body": "@ShubhDixit I edited my question and added the stacktrace"}, {"owner": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "edited": false, "score": 1, "creation_date": 1548779844, "post_id": 54425100, "comment_id": 95661542, "body": "Isn&#39;t <i>Duplicate entry &#39;1-4&#39; for key &#39;PRIMARY&#39;</i> self explainatory?"}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "reply_to_user": {"reputation": 24588, "user_id": 1527544, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6665878d41d42307eb53e9fae311a471?s=128&d=identicon&r=PG", "display_name": "Antoniossss", "link": "https://stackoverflow.com/users/1527544/antoniossss"}, "edited": false, "score": 0, "creation_date": 1548780305, "post_id": 54425100, "comment_id": 95661821, "body": "@Antoniossss Could you explain me please? I don&#39;t get why the exception is raised at the third call. Maybe you could write an answer if you know how to fix this."}, {"owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "edited": false, "score": 0, "creation_date": 1548845295, "post_id": 54425100, "comment_id": 95686751, "body": "@ordonezalex The line 38 of FavoriteController is a calling of save method from my JpaRepository. I add it to my question if you need."}, {"owner": {"reputation": 2268, "user_id": 3133286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8eb9502875ead75092230df8fdcf5dd7?s=128&d=identicon&r=PG", "display_name": "ordonezalex", "link": "https://stackoverflow.com/users/3133286/ordonezalex"}, "edited": false, "score": 0, "creation_date": 1548845309, "post_id": 54425100, "comment_id": 95686762, "body": "You need to use a debugger and find out when/why entry 1-4 is created in your table. Step through it, keep checking the entries after each step."}], "owner": {"reputation": 396, "user_id": 10663762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiUK.jpg?s=128&g=1", "display_name": "Ctorres", "link": "https://stackoverflow.com/users/10663762/ctorres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1549013710, "creation_date": 1548777893, "last_edit_date": 1549013710, "question_id": 54425100, "link": "https://stackoverflow.com/questions/54425100/why-does-hibernate-saves-my-entities-list-several-times", "title": "Why does Hibernate saves my entities list several times?", "body": "<p>I'm currently working on a Spring-boot application written in Kotlin. I'm writting an API which permits a logged user to add a metro station or a metro line to his favorite (and have informations about it more quickly).<br>\nMy users are represented by the <code>ApplicationUser</code> class with a username, a password, a set of his favorite metro lines, and another set for his favorite metro stations.</p>\n\n<p>I have written a controller to allow <strong>logged in</strong> users adding a line or a station to their favorites. I also have written a function which return the current user. This is how my controller looks like:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/favorites\")\nclass FavoriteController(private val applicationUserRepository: ApplicationUserRepository,\n                         val lineService: LineService,\n                         val stationService: StationService,\n                         private var currentUser: ApplicationUser?) {\n\n    private fun provideCurrentUser() : ApplicationUser? {\n        if(this.currentUser == null) {\n            val currentUsername: String = SecurityContextHolder.getContext().authentication.principal.toString()\n            this.currentUser = this.applicationUserRepository.findByUsername(currentUsername)\n        }\n        return this.currentUser\n    }\n\n\n    @PostMapping\n    fun addFavorite(@RequestParam(value = \"type\", required = true)type: FavoriteType?,\n                    @RequestParam(value = \"id\", required = true)id: Long?) : ResponseEntity&lt;String&gt; {\n        return if(provideCurrentUser() == null || type == null || id == null) {\n            ResponseEntity.status(HttpStatus.UNPROCESSABLE_ENTITY).body(\"You have to be logged and provide the type \" +\n                    \"and the id of the desired entity in order to add it to your favorites list\")\n        } else {\n            when(type) {\n                FavoriteType.STATION -&gt; {provideCurrentUser()?.addToFavorites(this.stationService.findById(id) as Station)\n                    this.applicationUserRepository.save(provideCurrentUser() ?: throw Exception(\"User Not found\"))}\n                FavoriteType.LINE -&gt; {provideCurrentUser()?.addToFavorites(this.lineService.findById(id) as Line)\n                    this.applicationUserRepository.save(provideCurrentUser() ?: throw Exception(\"User Not found\")) }\n                FavoriteType.UNKNOWN -&gt; return ResponseEntity.status(HttpStatus.UNPROCESSABLE_ENTITY).body(\"Unknown entity type\")\n            }\n            ResponseEntity.status(HttpStatus.CREATED).body(\"The $type with id $id has been successfully added to your favorites\")\n        }\n    }\n</code></pre>\n\n<p>I thought it was working but it actually raises an exception after three calls. Both first and second call works fine, but if call this function a third time, an exception is raised due to duplicate primary key in the database. I use JpaRepository functions to manage my entities (save).<br>\ni assume this issue could come from an early closing of the transaction, but I don't know how to check if it's right, or how to fix it...</p>\n\n<p>here is the code of my ApplicationUser class if you need it:</p>\n\n<pre><code>@Entity\nclass ApplicationUser(val username: String = \"\",\n                      var password: String = \"\",\n                      @ManyToMany(cascade= [CascadeType.ALL], fetch = FetchType.EAGER)\n                      @JoinTable(name=\"user_favstation\", joinColumns= [JoinColumn(name=\"user_id\")], inverseJoinColumns=[JoinColumn(name=\"station_id\")])\n                      @CollectionId(\n                              columns = [Column(name=\"COLLECTION_ID\")],\n                              type= Type(type=\"long\"),\n                              generator = \"sequence\"\n                      )\n                      var favoriteStations: MutableList&lt;Station&gt; = mutableListOf(),\n                      @ManyToMany(cascade= [CascadeType.ALL] , fetch = FetchType.EAGER)\n                      @JoinTable(name=\"user_favline\", joinColumns= [JoinColumn(name=\"user_id\")], inverseJoinColumns=[JoinColumn(name=\"line_id\")])\n                      @CollectionId(\n                              columns = [Column(name=\"COLLECTION_ID\")],\n                              type= Type(type=\"long\"),\n                              generator = \"sequence\"\n                      )\n                      var favoriteLines: MutableList&lt;Line&gt; = mutableListOf())\n    : BaseEntity() {\n\n    fun addToFavorites(station: Station): Boolean {\n        return this.favoriteStations.add(station)\n    }\n\n    fun addToFavorites(line: Line): Boolean {\n        return this.favoriteLines.add(line)\n    }\n\n    fun deleteFavorite(station: Station): Boolean {\n        return this.favoriteStations.remove(station)\n    }\n\n    fun deleteFavorite(line: Line): Boolean {\n        return this.favoriteLines.remove(line)\n    }\n}\n</code></pre>\n\n<p>Here is the exception stacktrace:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1-4' for key 'PRIMARY'\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_191]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_191]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_191]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_191]\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:425) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.Util.getInstance(Util.java:408) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3976) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3912) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2530) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2683) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2486) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998) ~[mysql-connector-java-5.1.46.jar:5.1.46]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-2.7.9.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-2.7.9.jar:na]\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.insertRows(AbstractCollectionPersister.java:1567) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.action.internal.CollectionUpdateAction.execute(CollectionUpdateAction.java:85) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:600) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:474) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1437) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:494) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3245) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2451) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:473) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:156) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:231) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:536) ~[spring-orm-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:746) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:714) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:532) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:304) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-2.0.7.RELEASE.jar:2.0.7.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.7.RELEASE.jar:2.0.7.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:99) ~[spring-data-commons-2.0.7.RELEASE.jar:2.0.7.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at com.sun.proxy.$Proxy100.save(Unknown Source) ~[na:na]\n    at fr.asi.controllers.FavoriteController.addFavorite(FavoriteController.kt:38) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_191]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_191]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_191]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_191]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:661) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at fr.asi.security.JWTAuthorizationFilter.doFilterInternal(JWTAuthorizationFilter.kt:34) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_191]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_191]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_191\n</code></pre>\n\n<p><strong>EDIT:</strong> I modified my ApplicationUser class by adding @CollectionId annotation above my two list of favorites. Since this annotation doesn't work with MutableSet, I change them to MutableList. Now my controller doesn't raise any exception BUT I found that every time I try to add a favorite hibernate add EVERY favorites again. After adding <strong>only 4 stations</strong> to my favorites, my favorite stations table looks like this (and I don't know why) :<br>\n<a href=\"https://i.stack.imgur.com/dMLUb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dMLUb.jpg\" alt=\"favorite stations table\"></a></p>\n\n<p>I hope someone can help me, thank you in advance.</p>\n"}, {"tags": ["android", "arraylist", "kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1548776378, "post_id": 54424570, "comment_id": 95659367, "body": "<code>[position].access_role</code>. But it makes no sense to say &quot;role is X&quot; when there is a list of objects that represent roles"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1548776807, "post_id": 54424570, "comment_id": 95659632, "body": "@TimCastelijns Here the sample of JSON  <code>{&quot;user&quot;:{&quot;id&quot;:&quot;16&quot;,&quot;user_organization_accesses&quot;:[{&quot;access_ro&zwnj;&#8203;le&quot;:&quot;Manager&quot;}]}}</code>"}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1548777591, "post_id": 54424570, "comment_id": 95660176, "body": "what am I supposed to do with that"}, {"owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1548777671, "post_id": 54424570, "comment_id": 95660223, "body": "@TimCastelijns I added <code>component1</code>. Not sure is this the solution, but I can get the access role now"}, {"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1548777911, "post_id": 54424570, "comment_id": 95660363, "body": "Use <code>?.</code> instead of <code>!!</code> and your app will not crash if for some reason the <code>user_organization_accesses</code> is null. You may need <code>toString()</code> for the <code>OrganizationAccess</code> to make it look readable in the logs. A <code>data class</code> may be used too, btw. Call something like <code>?.joinToString()</code> if you like to present the <code>OrganizationAccess</code> elements nicely"}], "answers": [{"comments": [{"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1548777983, "post_id": 54425004, "comment_id": 95660407, "body": "It is better to use either <code>data class</code> or implement <code>toString</code> int the <code>OrganizationAccess</code> class.  Also, using <code>!!</code> is dangerous, it is way safe to use <code>?.</code> instead (and check for nulls)"}], "tags": [], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "is_accepted": true, "score": 2, "last_activity_date": 1548777619, "creation_date": 1548777619, "answer_id": 54425004, "question_id": 54424570, "link": "https://stackoverflow.com/questions/54424570/get-item-from-object-arraylist/54425004#54425004", "title": "Get item from Object ArrayList", "body": "<p>I have solved it</p>\n\n<pre><code> longToast(\"Role is \" + mUser.user_organization_accesses!!.component1().access_role)\n</code></pre>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54425004, "answer_count": 1, "score": 1, "last_activity_date": 1548777619, "creation_date": 1548776241, "last_edit_date": 1548776857, "question_id": 54424570, "link": "https://stackoverflow.com/questions/54424570/get-item-from-object-arraylist", "title": "Get item from Object ArrayList", "body": "<p>How can I call the access_role in <code>OrganizationAccess</code> ?</p>\n\n<p>This is the classes</p>\n\n<p><strong>User</strong></p>\n\n<pre><code>class User : Serializable {\n    var id = \"\"\n    var user_organization_accesses: ArrayList&lt;OrganizationAccess&gt;? = null\n}\n</code></pre>\n\n<p><strong>OrganizationAccess</strong></p>\n\n<pre><code>class OrganizationAccess:Serializable {\n\n    var access_role = \"\"\n}\n</code></pre>\n\n<p>What I have tried  </p>\n\n<pre><code>  mUser = intent.getSerializableExtra(ARG_PARAM) as User // receive from previous activity\n  longToast(\"Role is \" + mUser.user_organization_accesses!!.xxx)\n</code></pre>\n\n<p>What should I write for the xxx ?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1548780004, "post_id": 54424413, "comment_id": 95661638, "body": "You probably have <code>setHasFixedSize(true)</code> instead of <code>setHasFixedSize(false)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 72, "user_id": 4700071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0645317509e1d5a05c5cc3fbb81d08e8?s=128&d=identicon&r=PG&f=1", "display_name": "Cyril Niob&#233;", "link": "https://stackoverflow.com/users/4700071/cyril-niob%c3%a9"}, "edited": false, "score": 0, "creation_date": 1548777066, "post_id": 54424520, "comment_id": 95659806, "body": "Yes, I pasted my latest code, but I did try with .height and it&#39;s the same"}], "tags": [], "owner": {"reputation": 297, "user_id": 7070243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e18aee86c735a2d1e69828348253e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine El Murr", "link": "https://stackoverflow.com/users/7070243/antoine-el-murr"}, "is_accepted": false, "score": 0, "last_activity_date": 1548776127, "creation_date": 1548776127, "answer_id": 54424520, "question_id": 54424413, "link": "https://stackoverflow.com/questions/54424413/views-in-recyclerview-still-has-height-of-0-even-when-displayed/54424520#54424520", "title": "Views in RecyclerView still has height of 0 even when displayed", "body": "<p>itemView.measuredHeight android will try to measure your view before display try using itemView.height inside addOnGlobalLayoutListener</p>\n"}], "owner": {"reputation": 72, "user_id": 4700071, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0645317509e1d5a05c5cc3fbb81d08e8?s=128&d=identicon&r=PG&f=1", "display_name": "Cyril Niob&#233;", "link": "https://stackoverflow.com/users/4700071/cyril-niob%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548779270, "creation_date": 1548775791, "last_edit_date": 1548779270, "question_id": 54424413, "link": "https://stackoverflow.com/questions/54424413/views-in-recyclerview-still-has-height-of-0-even-when-displayed", "title": "Views in RecyclerView still has height of 0 even when displayed", "body": "<p>I am confused because in my RecyclerView, some items has their height = 0  (even when they are correctly displayed and visible) and some have their normal height.</p>\n\n<p>How is that possible ?\nIf I monitor the height with addOnGlobalLayoutListener, 90% of item has their correct height calculated, and 10% still have 0.\nAny idea of how android works for this ?</p>\n\n<p>My code is in Kotlin but it doesn\u2019t matter.</p>\n\n<pre><code>init {\n       var heightItemView = 0\n       var currentY = itemView.y\n       var oldY = currentY\n\n       itemView.viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n           override fun onGlobalLayout() {\n               if (itemView.height &gt; 0) {\n                   heightItemView = itemView.height\n                   itemView.viewTreeObserver.removeOnGlobalLayoutListener(this)\n               }\n</code></pre>\n\n<p>I also tried with measuredHeight().</p>\n\n<p>My onCreateViewHolder() from the adapter:</p>\n\n<pre><code>override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): PairMarketAdapter.ViewHolder {\n    val v = android.view.LayoutInflater.from(parent.context)\n            .inflate(R.layout.item_pair_market, parent, false)\n    val holder = PairMarketAdapter.ViewHolder(v)\n\n    holder.itemView.setOnClickListener {\n        listener.onItemAction(holder.adapterPosition)\n    }\n\n    return holder\n}\n</code></pre>\n\n<p>XML of the fragment:</p>\n\n<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout \n  xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n  xmlns:tools=\"http://schemas.android.com/tools\"\n  android:id=\"@+id/lCoordinatorRoot\"\n  android:layout_width=\"match_parent\"\n  android:layout_height=\"match_parent\"\n  android:orientation=\"vertical\"\n &gt;\n\n&lt;LinearLayout\n   android:layout_width=\"match_parent\"\n   android:layout_height=\"match_parent\"\n   android:orientation=\"vertical\"\n  &gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=\"@+id/rvPairMarket\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:clipToPadding=\"false\"\n            android:paddingTop=\"@dimen/spacing_normal\"\n            tools:listitem=\"@layout/item_pair_market\"\n            /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And the item XML:</p>\n\n<pre><code>&lt;LinearLayout \n xmlns:android=\"http://schemas.android.com/apk/res/android\"\n xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n xmlns:tools=\"http://schemas.android.com/tools\"\n android:layout_width=\"match_parent\"\n android:layout_height=\"wrap_content\"\n android:background=\"?selectableItemBackground\"\n android:paddingBottom=\"@dimen/spacing_normal\"\n android:paddingTop=\"@dimen/spacing_small\"\n android:paddingEnd=\"@dimen/spacing_normal\"\n android:paddingStart=\"@dimen/spacing_normal\"\n android:orientation=\"horizontal\"\n &gt;\n\n&lt;LinearLayout\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginStart=\"@dimen/spacing_small\"\n    android:layout_weight=\"1.5\"\n    android:orientation=\"vertical\"\n    &gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        &gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvSymbol\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:maxLines=\"1\"\n            android:textAllCaps=\"true\"\n            android:textColor=\"?android:attr/textColorPrimary\"\n            android:textSize=\"@dimen/font_large\"\n            android:textStyle=\"bold\"\n            tools:text=\"USD\"\n            /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvSymbolBase\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"@dimen/spacing_tiny\"\n            android:maxLines=\"1\"\n            android:textAllCaps=\"true\"\n            android:textColor=\"?android:attr/textColorSecondary\"\n            android:textSize=\"@dimen/font_large\"\n            android:textStyle=\"bold\"\n            tools:text=\"BTC\"\n            /&gt;\n\n        &lt;View\n            android:id=\"@+id/vIsSelected\"\n            android:layout_width=\"10dp\"\n            android:layout_height=\"10dp\"\n            android:layout_gravity=\"center\"\n            android:layout_marginStart=\"@dimen/spacing_small\"\n            android:background=\"@drawable/circle_green_dot\"\n            android:visibility=\"gone\"\n            /&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;TextView\n        android:id=\"@+id/tvExchange\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginTop=\"@dimen/spacing_tiny\"\n        android:maxLines=\"1\"\n        android:textColor=\"?android:attr/textColorSecondary\"\n        android:textSize=\"@dimen/font_normal\"\n        tools:text=\"1. Bitfinex\"\n        /&gt;\n&lt;/LinearLayout&gt;\n\n&lt;LinearLayout\n    android:layout_width=\"0dp\"\n    android:layout_height=\"wrap_content\"\n    android:layout_weight=\"1\"\n    android:orientation=\"vertical\"\n    &gt;\n\n    &lt;TextView\n        android:id=\"@+id/tvPercent\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"end\"\n        android:textColor=\"?android:attr/textColorPrimary\"\n        android:textSize=\"@dimen/font_large\"\n        tools:text=\"55.5%\"\n        /&gt;\n&lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"}, {"tags": ["kotlin", "java-8", "jackson", "jsr310", "java-time"], "comments": [{"owner": {"reputation": 53151, "user_id": 38896, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c9a662be575728ba1c4921d3ba2f8ba?s=128&d=identicon&r=PG", "display_name": "JodaStephen", "link": "https://stackoverflow.com/users/38896/jodastephen"}, "edited": false, "score": 2, "creation_date": 1548840838, "post_id": 54424027, "comment_id": 95684029, "body": "An <code>OffsetDate</code> class was considered for JSR-310, but it was pushed back as having minimal use cases. Using <code>OffsetDateTime</code> is your best option in the JDK. You can parse the format using <code>DateTimeFormatterBuilder</code> and <code>parseDefaulting</code>."}, {"owner": {"reputation": 1518, "user_id": 1770617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/luoHe.jpg?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/1770617/rene"}, "reply_to_user": {"reputation": 53151, "user_id": 38896, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0c9a662be575728ba1c4921d3ba2f8ba?s=128&d=identicon&r=PG", "display_name": "JodaStephen", "link": "https://stackoverflow.com/users/38896/jodastephen"}, "edited": false, "score": 0, "creation_date": 1548857146, "post_id": 54424027, "comment_id": 95693891, "body": "@JodaStephen thank you so much for the clarification! I take your suggestion and create an answer for my question."}], "answers": [{"tags": [], "owner": {"reputation": 1518, "user_id": 1770617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/luoHe.jpg?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/1770617/rene"}, "is_accepted": true, "score": 0, "last_activity_date": 1548857809, "creation_date": 1548857809, "answer_id": 54442635, "question_id": 54424027, "link": "https://stackoverflow.com/questions/54424027/how-to-deserialize-dates-with-offset-2019-01-290100-to-java-time-related/54442635#54442635", "title": "How to deserialize dates with offset (&quot;2019-01-29+01:00&quot;) to `java.time` related classes?", "body": "<p>As @JodaStephen explained in the comments, <em>OffsetDate</em> was not included in <code>java.time</code> to have a minimal set of classes. So, <code>OffsetDateTime</code> is the best option.</p>\n\n<p>He also suggested to use <code>DateTimeFormatterBuilder</code> and <code>parseDefaulting</code> to create a <code>DateTimeFormatter</code> instance, to directly create <code>OffsetDateTime</code> from the formatters parsing result (<code>TemporalAccessor</code>). AFAIK, I still need to create a custom deserializer to use the formatter. Here is code, which solved my problem:</p>\n\n<pre><code>class OffsetDateDeserializer: JsonDeserializer&lt;OffsetDateTime&gt;() {\n\n    private val formatter = DateTimeFormatterBuilder()\n            .append(DateTimeFormatter.ISO_DATE)\n            .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n            .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n            .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\n            .parseDefaulting(ChronoField.MILLI_OF_SECOND, 0)\n            .parseDefaulting(ChronoField.OFFSET_SECONDS, 0)\n            .toFormatter()\n\n\n    override fun deserialize(parser: JsonParser, context: DeserializationContext): OffsetDateTime? {\n        if (parser.hasToken(JsonToken.VALUE_STRING)) {\n            val string = parser.text.trim()\n            if (string.isEmpty()) {\n                return null\n            }\n            try {\n                return OffsetDateTime.from(formatter.parse(string))\n            } catch (e: DateTimeException){\n                throw context.wrongTokenException(parser, OffsetDateTime::class.java, parser.currentToken, \"error while parsing date: ${e.message}\")\n            }\n        }\n        throw context.wrongTokenException(parser, OffsetDateTime::class.java, parser.currentToken, \"date with offset must be contained in string\")\n    }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 1518, "user_id": 1770617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/luoHe.jpg?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/1770617/rene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "accepted_answer_id": 54442635, "answer_count": 1, "score": 1, "last_activity_date": 1548857809, "creation_date": 1548774537, "last_edit_date": 1548857186, "question_id": 54424027, "link": "https://stackoverflow.com/questions/54424027/how-to-deserialize-dates-with-offset-2019-01-290100-to-java-time-related", "title": "How to deserialize dates with offset (&quot;2019-01-29+01:00&quot;) to `java.time` related classes?", "body": "<p>I've refactored some legacy code within Spring Boot (2.1.2) system and migrated from <code>java.util.Date</code> to <code>java.time</code> based classes (jsr310). The system expects the dates in a ISO8601 formated string, whereas some are complete timestamps with time information (e.g. <code>\"2019-01-29T15:29:34+01:00\"</code>) while others are only dates with offset (e.g. <code>\"2019-01-29+01:00\"</code>). Here is the DTO (as Kotlin data class):</p>\n\n<pre><code>data class Dto(\n        // ...\n        @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = \"yyyy-MM-dd'T'HH:mm:ssXXX\")\n        @JsonProperty(\"processingTimestamp\")\n        val processingTimestamp: OffsetDateTime,\n\n        // ...\n        @JsonFormat(shape = JsonFormat.Shape.STRING,  pattern = \"yyyy-MM-ddXXX\")\n        @JsonProperty(\"orderDate\")\n        val orderDate: OffsetDateTime,\n        // ...\n)\n</code></pre>\n\n<p>While Jackson perfectly deserializes <code>processingTimestamp</code>, it fails with <code>orderDate</code>:</p>\n\n<pre><code>Caused by: java.time.DateTimeException: Unable to obtain OffsetDateTime from TemporalAccessor: {OffsetSeconds=32400},ISO resolved to 2018-10-23 of type java.time.format.Parsed\n    at java.time.OffsetDateTime.from(OffsetDateTime.java:370) ~[na:1.8.0_152]\n    at com.fasterxml.jackson.datatype.jsr310.deser.InstantDeserializer.deserialize(InstantDeserializer.java:207) ~[jackson-datatype-jsr310-2.9.8.jar:2.9.8]\n</code></pre>\n\n<p>This makes sense to me, since <code>OffsetDateTime</code> cannot find any time information necessary to construct the instant. If I change to <code>val orderDate: LocalDate</code> Jackson can successfully deserialize, but then the offset information is gone (which I need to convert to <code>Instant</code> later).</p>\n\n<h1>Question</h1>\n\n<p>My current workaround is to use <code>OffsetDateTime</code>, in combination with a custom deserializer (see below). <strong>But I'm wondering, if there is a better solution for this?</strong></p>\n\n<p>Also, I'd wish for a more appropriate data type like <em>OffsetDate</em>, but I cannot find it in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.time</code></a>.</p>\n\n<h3>PS</h3>\n\n<p>I was asking myself if \"2019-01-29+01:00\" is a valid for ISO8601. However, since I found that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_DATE\" rel=\"nofollow noreferrer\"><code>java.time.DateTimeFormatter.ISO_DATE</code></a> is can correctly parse it and I cannot change the format how the clients send data, I put aside this question. </p>\n\n<h3>Workaround</h3>\n\n<pre><code>data class Dto(\n        // ...\n        @JsonFormat(shape = JsonFormat.Shape.STRING,  pattern = \"yyyy-MM-ddXXX\")\n        @JsonProperty(\"catchDate\")\n        @JsonDeserialize(using = OffsetDateDeserializer::class)\n        val orderDate: OffsetDateTime,\n        // ...\n)\n\nclass OffsetDateDeserializer(\n        private val formatter: DateTimeFormatter = DateTimeFormatter.ISO_DATE\n) : JSR310DateTimeDeserializerBase&lt;OffsetDateTime&gt;(OffsetDateTime::class.java, formatter) {\n\n\n    override fun deserialize(parser: JsonParser, context: DeserializationContext): OffsetDateTime? {\n        if (parser.hasToken(JsonToken.VALUE_STRING)) {\n            val string = parser.text.trim()\n            if (string.isEmpty()) {\n                return null\n            }\n\n            val parsed: TemporalAccessor = formatter.parse(string)\n            val offset = if(parsed.isSupported(ChronoField.OFFSET_SECONDS)) ZoneOffset.from(parsed) else ZoneOffset.UTC\n            val localDate = LocalDate.from(parsed)\n            return OffsetDateTime.of(localDate.atStartOfDay(), offset)\n        }\n        throw context.wrongTokenException(parser, _valueClass, parser.currentToken, \"date with offset must be contained in string\")\n    }\n\n    override fun withDateFormat(otherFormatter: DateTimeFormatter?): JsonDeserializer&lt;OffsetDateTime&gt; = OffsetDateDeserializer(formatter)\n}\n</code></pre>\n"}, {"tags": ["android", "audio", "kotlin", "android-mediaplayer", "android-lifecycle"], "answers": [{"tags": [], "owner": {"reputation": 297, "user_id": 7070243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e18aee86c735a2d1e69828348253e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Antoine El Murr", "link": "https://stackoverflow.com/users/7070243/antoine-el-murr"}, "is_accepted": false, "score": 1, "last_activity_date": 1548774897, "creation_date": 1548774897, "answer_id": 54424131, "question_id": 54423895, "link": "https://stackoverflow.com/questions/54423895/keep-sound-playing-within-the-app-but-stop-it-when-app-goes-to-the-background/54424131#54424131", "title": "Keep sound playing within the App but stop it when App goes to the background", "body": "<p>You can create a custom Application class (extends Application) and implement it with LifecycleObserver interface, and create a function within the CustomApplication class and annotate it with @OnLifecycleEvent(Lifecycle.Event.ON_STOP) so when the app is in background the function will be triggered and inside it you will put the logic to stop the mediaPlayer (make it global to access it from different place whiting the app)</p>\n\n<p>In order to use the LifecycleObserver you need to add LifeCycle to your app (it's an Android architecture component) here is the link:\n<a href=\"https://developer.android.com/topic/libraries/architecture/adding-components\" rel=\"nofollow noreferrer\">https://developer.android.com/topic/libraries/architecture/adding-components</a></p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548936056, "post_id": 54424157, "comment_id": 95728161, "body": "Thanks a lot. I use Service to play the sound now. I unbind the service onUserLeaveHint() and prevent the Unbinding in the Intent with the FLAG_ACTIVITY_NO_USER_ACTION. It works fine, so technically this is the accepted answer. My problem now is that I have the same problem as before, just in the new activity: When I use the Home Button there, the sound keeps playing. Any Idea how to unbind the service from the new Activity?"}, {"owner": {"reputation": 3433, "user_id": 6688493, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wHeZJ8Tx7IY/AAAAAAAAAAI/AAAAAAAAAG4/rYEipSHTsag/photo.jpg?sz=128", "display_name": "touhid udoy", "link": "https://stackoverflow.com/users/6688493/touhid-udoy"}, "reply_to_user": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548937059, "post_id": 54424157, "comment_id": 95728736, "body": "one option is, you can use listeners....when app goes to background, pause the sound via a listener"}], "tags": [], "owner": {"reputation": 3433, "user_id": 6688493, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wHeZJ8Tx7IY/AAAAAAAAAAI/AAAAAAAAAG4/rYEipSHTsag/photo.jpg?sz=128", "display_name": "touhid udoy", "link": "https://stackoverflow.com/users/6688493/touhid-udoy"}, "is_accepted": true, "score": 1, "last_activity_date": 1548774970, "creation_date": 1548774970, "answer_id": 54424157, "question_id": 54423895, "link": "https://stackoverflow.com/questions/54423895/keep-sound-playing-within-the-app-but-stop-it-when-app-goes-to-the-background/54424157#54424157", "title": "Keep sound playing within the App but stop it when App goes to the background", "body": "<p>You can't gain such functionality using activity. Activity is highly prone to be destroyed, recreated. You should use Service to attain such functionality, as the service will persist, whether your activity is destroyed or not.</p>\n\n<p>This <a href=\"https://code.tutsplus.com/tutorials/create-a-music-player-on-android-song-playback--mobile-22778\" rel=\"nofollow noreferrer\">article</a> is old and out of date, but can still learn using service with music from it</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548853974, "post_id": 54433734, "comment_id": 95691867, "body": "Thanks a lot. I tried to implement this, but get an <code>unresolved reference: mediaPlayer</code>. In MainActivity I do <code>lateinit var mediaPlayer: MediaPlayer</code> and in onCreate I do <code>mediaPlayer = MediaPlayer()</code> and <code>fun playBordun() { mediaPlayer = MediaPlayer.create(this, R.raw.cbordun) mediaPlayer.isLooping = true mediaPlayer.start() }</code> Is there something else I should be doing?"}, {"owner": {"reputation": 88, "user_id": 7006209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4f5da693f6675e3981569e8c4d771e?s=128&d=identicon&r=PG&f=1", "display_name": "Elam parithi", "link": "https://stackoverflow.com/users/7006209/elam-parithi"}, "reply_to_user": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548858796, "post_id": 54433734, "comment_id": 95694962, "body": "i can&#39;t understand. it seems everything fine in your code. would you plz give more details. when did you face this error?"}, {"owner": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548860694, "post_id": 54433734, "comment_id": 95696285, "body": "I get warned about it when writing the code. Then when trying to compile it throws the same error: <code>C:\\[path]\\CheckLifeCycle.kt: (17, 22): Unresolved reference: mediaPlayer     &gt; Task :app:buildInfoGeneratorDebug</code> To give more details I&#180;ll have to ask a new question or try to answer this one. I&#180;ll tell you here once I&#180;ve done so."}, {"owner": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "edited": false, "score": 0, "creation_date": 1548861857, "post_id": 54433734, "comment_id": 95697094, "body": "I added some details to this question. See above."}], "tags": [], "owner": {"reputation": 88, "user_id": 7006209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae4f5da693f6675e3981569e8c4d771e?s=128&d=identicon&r=PG&f=1", "display_name": "Elam parithi", "link": "https://stackoverflow.com/users/7006209/elam-parithi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548826079, "last_edit_date": 1548826079, "creation_date": 1548825497, "answer_id": 54433734, "question_id": 54423895, "link": "https://stackoverflow.com/questions/54423895/keep-sound-playing-within-the-app-but-stop-it-when-app-goes-to-the-background/54433734#54433734", "title": "Keep sound playing within the App but stop it when App goes to the background", "body": "<p>You can use the <strong>LifecycleObserver</strong> to check whether the application in background or not.</p>\n\n<pre><code>public class CheckLifeCycle extends Application implements LifecycleObserver {\n\n@Override\npublic void onCreate() \n{\n    super.onCreate();\n    ProcessLifecycleOwner.get().getLifecycle().addObserver(this);\n}\n\n@OnLifecycleEvent(Lifecycle.Event.ON_STOP)\npublic void onAppBackground()\n{\n    MainActivity.mediaPlayer.pause();\n}\n\n}\n</code></pre>\n\n<p>and add the class name <strong>CheckLifeCycle</strong> in a manifest</p>\n\n<pre><code>&lt;manifest &gt;\n    ....\n    &lt;application\n        android:name=\".CheckLifeCycle\"\n        ......\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>don't forget to include the basic Support library in gradle.</p>\n\n<pre><code>implementation \"android.arch.lifecycle:extensions:1.1.1\"\nannotationProcessor \"android.arch.lifecycle:compiler:1.1.1\"\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 10858057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3f757af3c67fc9fb3003efaed4a891?s=128&d=identicon&r=PG&f=1", "display_name": "BraveSentry", "link": "https://stackoverflow.com/users/10858057/bravesentry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 54424157, "answer_count": 3, "score": 0, "last_activity_date": 1548861751, "creation_date": 1548774153, "last_edit_date": 1548861751, "question_id": 54423895, "link": "https://stackoverflow.com/questions/54423895/keep-sound-playing-within-the-app-but-stop-it-when-app-goes-to-the-background", "title": "Keep sound playing within the App but stop it when App goes to the background", "body": "<p>So I have a Sound I want to play continuously throughout the whole of my App. But as soon as the App goes to background, the sound should stop. I\u00b4m trying to do this during onStop(). The problem is that onStop() is called every time the activity is stopped, regardless of whether I stay within the app or not. Is there a way to differentiate between those cases? Something like this:</p>\n\n<pre><code>override fun onStop() {\n    if [App is left but not destroyed] {\n        super.onStop()\n        mediaLength = mediaPlayer.currentPosition\n        mediaPlayer.pause()\n    }\n    else { //i.e. activity is left but the new activity is from the same app.\n        super.onStop()\n    }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I tried to implement <a href=\"https://stackoverflow.com/a/54433734/10858057\">this answer</a>, but had to translate it to kotlin. I think I did everything right, but I get an <code>unresolved reference: mediaPlayer</code> in the Lifecycleobserver.</p>\n\n<p>Here\u00b4s the Observer:</p>\n\n<pre><code>package com.example.asdasd.soulfetch\n\nimport android.app.Application\nimport android.arch.lifecycle.Lifecycle\nimport android.arch.lifecycle.LifecycleObserver\nimport android.arch.lifecycle.OnLifecycleEvent\nimport android.arch.lifecycle.ProcessLifecycleOwner\n\n\nclass CheckLifeCycle: Application(), LifecycleObserver {\noverride fun onCreate() {\n    super.onCreate()\n    ProcessLifecycleOwner.get().getLifecycle().addObserver(this)\n}\n@OnLifecycleEvent(Lifecycle.Event.ON_STOP)\nfun onAppBackground() {\n    MainActivity.mediaPlayer.pause()\n}\n}\n</code></pre>\n\n<p>And here are the relevant parts of MainActivity</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\nlateinit var mediaPlayer: MediaPlayer\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    mediaPlayer = MediaPlayer()\n\n    fun playBordun() {\n        mediaPlayer = MediaPlayer.create(this, R.raw.cbordun)\n        mediaPlayer.isLooping = true\n        mediaPlayer.start()\n        }\n    playBordun()\n    }\noverride fun onDestroy() {\n    super.onDestroy()\n    mediaPlayer.stop()\n    mediaPlayer.reset()\n    mediaPlayer.release()\n    }\n</code></pre>\n\n<p>Any idea what I am missing here?</p>\n"}, {"tags": ["android", "android-intent", "kotlin", "flutter", "intentfilter"], "comments": [{"owner": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 1, "creation_date": 1548775013, "post_id": 54423831, "comment_id": 95658514, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50187680/flutter-how-to-call-methods-in-dart-portion-of-the-app-from-the-native-platfor\">Flutter: How to call methods in Dart portion of the app, from the native platform using MethodChannel?</a>"}, {"owner": {"reputation": 1305, "user_id": 9836706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2ehG.jpg?s=128&g=1", "display_name": "Francesco Iapicca", "link": "https://stackoverflow.com/users/9836706/francesco-iapicca"}, "reply_to_user": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1548783365, "post_id": 54423831, "comment_id": 95663412, "body": "I&#39;ll check it out, butvi don&#39;t think bthis is it, tahnks for bring it up"}, {"owner": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1548785719, "post_id": 54423831, "comment_id": 95664572, "body": "If you get stuck using that other answer, update this question or post a new one."}, {"owner": {"reputation": 1305, "user_id": 9836706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2ehG.jpg?s=128&g=1", "display_name": "Francesco Iapicca", "link": "https://stackoverflow.com/users/9836706/francesco-iapicca"}, "reply_to_user": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1548836312, "post_id": 54423831, "comment_id": 95681365, "body": "update at the bottom of the initial post, edit: do you think I should use  PlatformMessages instead?"}, {"owner": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1548849620, "post_id": 54423831, "comment_id": 95689387, "body": "Why wouldn&#39;t you call a method in the Dart portion of the app from the kotlin code, passing the scanner data as a Uint8List? You&#39;ve added the broadcast receiver to your flutter project, right?"}, {"owner": {"reputation": 1305, "user_id": 9836706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2ehG.jpg?s=128&g=1", "display_name": "Francesco Iapicca", "link": "https://stackoverflow.com/users/9836706/francesco-iapicca"}, "reply_to_user": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1549280280, "post_id": 54423831, "comment_id": 95833391, "body": "updated with both flutter and java code, plus error message"}, {"owner": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1549297736, "post_id": 54423831, "comment_id": 95843495, "body": "You are really close, and I can&#39;t immediately see what&#39;s wrong. If you&#39;d like to continue with the <code>EventChannel</code> route, I&#39;d grab a copy of the <code>connectivity</code> plugin <a href=\"https://github.com/flutter/plugins/tree/master/packages/connectivity\" rel=\"nofollow noreferrer\">source</a> and get that working unchanged, then gradually change it to remove the WiFi bits and add your scanner data event. (I&#39;ve never used <code>EventChannel</code> in the main project, only in a plugin, so there&#39;s something obvious we are missing I guess. I see why you want it in the main project, to be close to the definition of the BroadcastReceiver.)"}, {"owner": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1549297889, "post_id": 54423831, "comment_id": 95843584, "body": "The other thing to try is to ditch <code>EventChannel</code> and go back to the original link I sent which allows you to call a Dart method from Java. Create a Dart method <code>onScannerData(Uint8List data)</code> and hook that up as shown. Then call that from java with your scanner data."}, {"owner": {"reputation": 1305, "user_id": 9836706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2ehG.jpg?s=128&g=1", "display_name": "Francesco Iapicca", "link": "https://stackoverflow.com/users/9836706/francesco-iapicca"}, "reply_to_user": {"reputation": 31410, "user_id": 9597706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1204711a75c490c659741ef0c6dcbffc?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Heap", "link": "https://stackoverflow.com/users/9597706/richard-heap"}, "edited": false, "score": 0, "creation_date": 1549629206, "post_id": 54423831, "comment_id": 95981234, "body": "I&#39;ve managed, as soon as I have time I&#39;ll post the solution, thanks everyone for the help and the support"}], "owner": {"reputation": 1305, "user_id": 9836706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2ehG.jpg?s=128&g=1", "display_name": "Francesco Iapicca", "link": "https://stackoverflow.com/users/9836706/francesco-iapicca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1552, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549280230, "creation_date": 1548773926, "last_edit_date": 1549280230, "question_id": 54423831, "link": "https://stackoverflow.com/questions/54423831/receiving-data-from-a-scanner-kotlin-code-and-send-it-to-flutter-via-methodcha", "title": "Receiving data from a scanner [kotlin code] and send it to Flutter via MethodChannel", "body": "<p>[Edit 4th February 2019]<br>\nI gave up Kotlin and I'm really out of my comfort zone using java,\nI think I-m almost there but I-m getting this error</p>\n\n<blockquote>\n  <p>MissingPluginException(No implementation found for method listen on\n  channel scanner)</p>\n</blockquote>\n\n<p>here's my last code, \nI could use some help:</p>\n\n<p>java side</p>\n\n<pre><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\nimport io.flutter.app.FlutterActivity;\nimport io.flutter.plugin.common.EventChannel;\nimport io.flutter.plugin.common.PluginRegistry;\nimport io.flutter.plugins.GeneratedPluginRegistrant;\n\npublic class MainActivity extends FlutterActivity implements EventChannel.StreamHandler {\n\n  static IntentFilter filter = new IntentFilter();\n  static String mAction = \"++++CENSOR++++\";\n  static final String mKey = \"++++CENSOR++++\";\n  static final String mEventCall = \"scanner\";\n  private PluginRegistry.Registrar mRegistrar;\n  private EventChannel.EventSink mEventSink;\n\n  public void registerWith(Registrar registrar) {\n      MainActivity plugin = new MainActivity();\n      final EventChannel channel = new EventChannel(registrar.messenger(),mEventCall);\n      channel.setStreamHandler(plugin);\n  }\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    filter.addCategory(Intent.CATEGORY_DEFAULT);\n    filter.addAction(mAction);\n    registerReceiver(myBroadcastReceiver, filter);\n    GeneratedPluginRegistrant.registerWith(this);\n  }\n\n  @Override\n  protected void onDestroy()\n  {\n    super.onDestroy();\n    unregisterReceiver(myBroadcastReceiver);\n  }\n\n  private BroadcastReceiver myBroadcastReceiver = new BroadcastReceiver() {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n      String action = intent.getAction();\n      if (action.equals(mAction)) {\n        try {\n            String data = intent.getStringExtra(mKey);\n            mEventSink.success(data);\n        } catch (Exception e) {\n        }\n      }\n    }\n  };\n\n    public void onListen(Object o, EventChannel.EventSink eventSink) {\n      mEventSink=eventSink;\n    }\n\n    public void onCancel(Object arguments) {\n      mEventSink=null;\n    }\n}\n</code></pre>\n\n<p>flutter side</p>\n\n<p>scanner.dart</p>\n\n<pre><code>import 'package:flutter/services.dart';\nimport 'dart:async';\n\nclass Scanner {\n  static const String mEventCall = 'scanner';\n  static const EventChannel _eventChannel = const EventChannel(mEventCall);\n  static Stream&lt;String&gt; _readingStream;\n  static Stream&lt;String&gt; get readingStream {\n    if(_readingStream== null){\n      _readingStream =_eventChannel.receiveBroadcastStream().map&lt;String&gt;((value)=&gt; value);\n    }\n    return _readingStream;\n  }\n\n}\n</code></pre>\n\n<p>main.dart</p>\n\n<pre><code>void main() =&gt; runApp(MyApp());\n\nclass MyApp extends StatelessWidget {\n  // This widget is the root of your application.\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Scanner Beta',\n      home: MyHomePage(),\n    );\n  }\n}\n\nclass MyHomePage extends StatelessWidget {\n\n  Stream&lt;String&gt; _stream = Scanner.readingStream;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: Text(\"test\"),\n      ),\n      body: Center(\n        child: StreamBuilder(\n          initialData: \"\",\n          stream: _stream,\n            builder: (BuildContext context, AsyncSnapshot&lt;String&gt; snapshot) {\n            return Text(snapshot.data);\n            }\n        )\n      ),\n    );\n  }\n}\n</code></pre>\n\n<p>[edit: 30th Jan]<br>\nI've checked the <a href=\"https://stackoverflow.com/questions/50187680/flutter-how-to-call-methods-in-dart-portion-of-the-app-from-the-native-platfor\">suggested link</a>, for sure it gives me a better insight\nof a context I'm not yet familiar with, but I believe my problem is of a different nature:<br>\nI try to explain myself better:<br>\n1. (native app on the device) -> broadcast INTENT and ACTION<br>\n2. (my kotlin broadcast receiver) -> receive INTENT and ACTION<br>\n3. (MISSING PART) <strong><em>need to get the data from the intent/action to MethodChannel</em></strong><br>\n4. (my kotlin MethodChannel) -> sen data to Flutter via platform invokeMethod</p>\n\n<p>once again thank you in advance for any help you can give me\nFrancesco   </p>\n\n<p>[original post]<br>\nI'm trying to build an app to read a scanner data (and other stuff with that)\nI (kind of / think I) know how to use a methodChannel \nto pass the data from kotlin to flutter,\nthe scanner doesn't have a real plugin, but I can use a BroadcastReceiver\n+ IntentFilter to listen to the 'scanner action';</p>\n\n<p>my problem is to put both together,\nhow can I make sure that whenever the Br..Receiver 'receive' something\nit will pass it to the method channel \n(WITHOUT touching the screen <a href=\"https://www.gammasolutions.com/wp-content/uploads/2017/11/zebra-tc8000-touch-mobile-computer.jpg\" rel=\"nofollow noreferrer\">this is the device</a>)</p>\n\n<p>Bonus, I'm really out of my comfort zone with this task\nI might (probably) made some mistake, I can really use another pair of eyes</p>\n\n<p>Here is my code:\n//////////////// KOTLIN </p>\n\n<pre><code>// get data from scanner API\nimport android.os.Bundle\nimport io.flutter.plugins.GeneratedPluginRegistrant\nimport android.content.BroadcastReceiver\nimport android.content.Context\nimport android.content.IntentFilter\nimport android.content.Intent;\n\n//send data to flutter\nimport io.flutter.app.FlutterActivity\nimport io.flutter.plugin.common.MethodChannel;\n\nclass MainActivity:FlutterActivity() {\n\n    private var scanData:String? = null\n\n\n    private val SCANNER_ACTION = \"++++censored++++\"\n    private val SCANNER_INTENT_DATA = \"++++censored++++\"\n    private val FLUTTER_CHANNEL = \"scanner.data\"\n    private val FLUTTER_METHOD = \"getScannerData\"\n\n    override fun onCreate(savedInstanceState:Bundle?) {\n\n\n        private const method_flutter = MethodChannel(flutterView, FLUTTER_CHANNEL)\n\n    super.onCreate(savedInstanceState)\n\n        //send intent to flutter\n        GeneratedPluginRegistrant.registerWith(this)\n       method_flutter.setMethodCallHandler{\n            methodCall, result -&gt;\n            if (methodCall.method == FLUTTER_METHOD) {\n                if (scanData!=null) {\n                    result.success(scanData)\n                } else {\n                    result.error(null,null,null)\n                }\n            } else {\n                result.notImplemented()\n            }\n        }\n\n        ///scanner INTENT FILTER\n        val filter = IntentFilter()\n        filter.addCategory(Intent.CATEGORY_DEFAULT)\n        filter.addAction(SCANNER_ACTION)\n        registerReceiver(receiver, filter)\n    }\n\n     // END OF 'onCreate'\n     // SCANNER RECEIVER\n     private val receiver = object : BroadcastReceiver() {\n         override fun onReceive(contxt: Context?, intent: Intent?) {\n             if (intent?.action == SCANNER_ACTION) {\n                scanData = intent.getStringExtra(SCANNER_INTENT_DATA)\n             }\n         }\n     }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        unregisterReceiver(receiver)\n    }\n}\n</code></pre>\n\n<p>////////////////DART</p>\n\n<pre><code>import 'dart:async';\nimport 'package:flutter/services.dart';\n\n    class Plugin {\n      static const platform =  MethodChannel('scanner.data');\n      Future&lt;String&gt; get data async =&gt; await platform.invokeMethod('getScannerData');\n      }\n</code></pre>\n"}, {"tags": ["android", "multithreading", "kotlin", "kotlinx.coroutines"], "comments": [{"owner": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 1, "creation_date": 1548774573, "post_id": 54423748, "comment_id": 95658180, "body": "The background thread of your service is used to deliver notifications from the system. So if you use it for potentially long operations - you will not be able to receive new events from the system. And for that case, you do not need any <code>suspend</code> functions to play with.  The alternative is to offload the execution to a dedicated thread pool, not free the background thread for the text notifications. Here you may prefer <code>launch</code> or <code>async</code> functions instead"}, {"owner": {"reputation": 1012, "user_id": 3603386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjd5.jpg?s=128&g=1", "display_name": "Simone", "link": "https://stackoverflow.com/users/3603386/simone"}, "reply_to_user": {"reputation": 4179, "user_id": 49811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c035544deaf0a3ce993d768ca47b7941?s=128&d=identicon&r=PG", "display_name": "Eugene Petrenko", "link": "https://stackoverflow.com/users/49811/eugene-petrenko"}, "edited": false, "score": 0, "creation_date": 1548777025, "post_id": 54423748, "comment_id": 95659783, "body": "I use the background thread to send data to a webservice and update the app database every x seconds, and the thread needs to run in background for potentially hours (I used IntentService for that purpose). I will edit my question in order to be clearer"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 2, "creation_date": 1548828367, "post_id": 54423748, "comment_id": 95677835, "body": "What&#39;s the point of using coroutines if you plan to block the thread?"}, {"owner": {"reputation": 1012, "user_id": 3603386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjd5.jpg?s=128&g=1", "display_name": "Simone", "link": "https://stackoverflow.com/users/3603386/simone"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1548949630, "post_id": 54423748, "comment_id": 95736641, "body": "@MarkoTopolnik because I need to use some already-defined Kotlin functions that are suspend functions"}], "answers": [{"tags": [], "owner": {"reputation": 2693, "user_id": 450356, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/SOCF1.png?s=128&g=1", "display_name": "Adib Faramarzi", "link": "https://stackoverflow.com/users/450356/adib-faramarzi"}, "is_accepted": true, "score": 3, "last_activity_date": 1551421070, "creation_date": 1551421070, "answer_id": 54938962, "question_id": 54423748, "link": "https://stackoverflow.com/questions/54423748/kotlin-runblocking-on-background-thread/54938962#54938962", "title": "Kotlin runBlocking on background thread", "body": "<p>That is exactly the usage of <code>runBlocking</code>. <code>runBlocking</code> was added to coroutines to create a bridge between the users of <code>coroutines</code> and other places that are executing the code blockingly. If you want a thread to be blocked and wait for the execution of a a coroutine, you should always use <code>runBlocking</code>.</p>\n"}], "owner": {"reputation": 1012, "user_id": 3603386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfjd5.jpg?s=128&g=1", "display_name": "Simone", "link": "https://stackoverflow.com/users/3603386/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 1, "accepted_answer_id": 54938962, "answer_count": 1, "score": 6, "last_activity_date": 1551421070, "creation_date": 1548773688, "last_edit_date": 1548777736, "question_id": 54423748, "link": "https://stackoverflow.com/questions/54423748/kotlin-runblocking-on-background-thread", "title": "Kotlin runBlocking on background thread", "body": "<p>I'm in the process of converting an existing app from Java to Kotlin. \nThe app creates an <strong>IntentService</strong> which runs in a background thread and is tasked to perform some operations which block the thread (e.g. network calls, database interactions) with <code>suspend</code> functions repeatedly and indefinitely. \nSince the \"current thread\" is in fact a background thread I'm not blocking the UI.</p>\n\n<p>Is it a good practice to make use of <code>runBlocking</code> on the current thread to run all the suspending functions? Or there is a better approach?</p>\n"}, {"tags": ["android", "android-layout", "kotlin", "kodein"], "comments": [{"owner": {"reputation": 3111, "user_id": 7337723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edc61b04a0c7e1160cd7227987874927?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Shandilya", "link": "https://stackoverflow.com/users/7337723/kartik-shandilya"}, "edited": false, "score": 0, "creation_date": 1548773064, "post_id": 54423478, "comment_id": 95657094, "body": "Check your Manifest file once and also to set text use <code>textView.setText</code>"}, {"owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "reply_to_user": {"reputation": 3111, "user_id": 7337723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edc61b04a0c7e1160cd7227987874927?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Shandilya", "link": "https://stackoverflow.com/users/7337723/kartik-shandilya"}, "edited": false, "score": 0, "creation_date": 1548773262, "post_id": 54423478, "comment_id": 95657235, "body": "@NovoLucas Ok, what shall I check the manifest for? I code in Kotlin, so I it is preferred to access  <code>.settext(s)</code> per <code>.text=s</code>"}, {"owner": {"reputation": 3111, "user_id": 7337723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edc61b04a0c7e1160cd7227987874927?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Shandilya", "link": "https://stackoverflow.com/users/7337723/kartik-shandilya"}, "edited": false, "score": 0, "creation_date": 1548773600, "post_id": 54423478, "comment_id": 95657468, "body": "Have a look at <a href=\"https://stackoverflow.com/a/25432765/7337723\">stackoverflow.com/a/25432765/7337723</a>"}, {"owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "reply_to_user": {"reputation": 3111, "user_id": 7337723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edc61b04a0c7e1160cd7227987874927?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik Shandilya", "link": "https://stackoverflow.com/users/7337723/kartik-shandilya"}, "edited": false, "score": 0, "creation_date": 1559815638, "post_id": 54423478, "comment_id": 99540947, "body": "@NovoLucas Looks like this is not related, the stack trace is slightly different. Also, it happens not only on beta versions of Android"}, {"owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "edited": false, "score": 0, "creation_date": 1559815797, "post_id": 54423478, "comment_id": 99541033, "body": "This issue could be related - <a href=\"https://issuetracker.google.com/issues/117685087\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/117685087</a>"}], "owner": {"reputation": 185, "user_id": 10546931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13780916e47fbe4805fc58f62063b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tranquillo", "link": "https://stackoverflow.com/users/10546931/tranquillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1757, "favorite_count": 0, "closed_date": 1559828563, "answer_count": 0, "score": 2, "last_activity_date": 1548772868, "creation_date": 1548772868, "question_id": 54423478, "link": "https://stackoverflow.com/questions/54423478/noclassdeffounderror-failed-resolution-of-viewonunhandledkeyeventlistener", "closed_reason": "Duplicate", "title": "NoClassDefFoundError: Failed resolution of: View::OnUnhandledKeyEventListener", "body": "<p>I get following error log, but I can run my app. </p>\n\n<pre><code>com.example.simplekodein I/zygote64: Rejecting re-init on previously-failed class java.lang.Class&lt;androidx.core.view.ViewCompat$OnUnhandledKeyEventListenerWrapper&gt;: java.lang.NoClassDefFoundError: Failed resolution of: Landroid/view/View$OnUnhandledKeyEventListener;\ncom.example.simplekodein I/zygote64:     at void androidx.core.view.ViewCompat.setBackground(android.view.View, android.graphics.drawable.Drawable) (ViewCompat.java:2560)\ncom.example.simplekodein I/zygote64:     at void androidx.appcompat.widget.ActionBarContainer.&lt;init&gt;(android.content.Context, android.util.AttributeSet) (ActionBarContainer.java:62)\ncom.example.simplekodein I/zygote64:     at java.lang.Object java.lang.reflect.Constructor.newInstance0(java.lang.Object[]) (Constructor.java:-2)\ncom.example.simplekodein I/zygote64:     at java.lang.Object java.lang.reflect.Constructor.newInstance(java.lang.Object[]) (Constructor.java:334)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createView(java.lang.String, java.lang.String, android.util.AttributeSet) (LayoutInflater.java:658)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:801)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet) (LayoutInflater.java:741)\ncom.example.simplekodein I/zygote64:     at void android.view.LayoutInflater.rInflate(org.xmlpull.v1.XmlPullParser, android.view.View, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:874)\ncom.example.simplekodein I/zygote64:     at void android.view.LayoutInflater.rInflateChildren(org.xmlpull.v1.XmlPullParser, android.view.View, android.util.AttributeSet, boolean) (LayoutInflater.java:835)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.inflate(org.xmlpull.v1.XmlPullParser, android.view.ViewGroup, boolean) (LayoutInflater.java:515)\n...\ncom.example.simplekodein I/zygote64: Caused by: java.lang.ClassNotFoundException: Didn't find class \"android.view.View$OnUnhandledKeyEventListener\" on path: DexPathList[[zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/base.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_dependencies_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_resources_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_0_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_1_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_2_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_3_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_4_apk.apk\", \n                    zip file \"/data/app/com.example.simplekodein-Vx1MPj54XnjYkszU0hkRBQ==/split_lib_slice_5_apk.apk\", \ncom.example.simplekodein I/zygote64:     at java.lang.Class dalvik.system.BaseDexClassLoader.findClass(java.lang.String) (BaseDexClassLoader.java:125)\ncom.example.simplekodein I/zygote64:     at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String, boolean) (ClassLoader.java:379)\ncom.example.simplekodein I/zygote64:     at java.lang.Class java.lang.ClassLoader.loadClass(java.lang.String) (ClassLoader.java:312)\ncom.example.simplekodein I/zygote64:     at void androidx.core.view.ViewCompat.setBackground(android.view.View, android.graphics.drawable.Drawable) (ViewCompat.java:2560)\ncom.example.simplekodein I/zygote64:     at void androidx.appcompat.widget.ActionBarContainer.&lt;init&gt;(android.content.Context, android.util.AttributeSet) (ActionBarContainer.java:62)\ncom.example.simplekodein I/zygote64:     at java.lang.Object java.lang.reflect.Constructor.newInstance0(java.lang.Object[]) (Constructor.java:-2)\ncom.example.simplekodein I/zygote64:     at java.lang.Object java.lang.reflect.Constructor.newInstance(java.lang.Object[]) (Constructor.java:334)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createView(java.lang.String, java.lang.String, android.util.AttributeSet) (LayoutInflater.java:658)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:801)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.createViewFromTag(android.view.View, java.lang.String, android.content.Context, android.util.AttributeSet) (LayoutInflater.java:741)\ncom.example.simplekodein I/zygote64:     at void android.view.LayoutInflater.rInflate(org.xmlpull.v1.XmlPullParser, android.view.View, android.content.Context, android.util.AttributeSet, boolean) (LayoutInflater.java:874)\ncom.example.simplekodein I/zygote64:     at void android.view.LayoutInflater.rInflateChildren(org.xmlpull.v1.XmlPullParser, android.view.View, android.util.AttributeSet, boolean) (LayoutInflater.java:835)\ncom.example.simplekodein I/zygote64:     at android.view.View android.view.LayoutInflater.inflate(org.xmlpull.v1.XmlPullParser, android.view.ViewGroup, boolean) (LayoutInflater.java:515)\n...\n</code></pre>\n\n<p>I have two simple TextViews, but I can not see them, although I enter something into <code>textView.text= \"dkjlkdsjf\"</code></p>\n\n<p><strong>What am i missing?</strong> </p>\n"}, {"tags": ["spring", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 4444, "user_id": 7122593, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bccc555af56523598173332f6a58a7b5?s=128&d=identicon&r=PG&f=1", "display_name": "Barath", "link": "https://stackoverflow.com/users/7122593/barath"}, "edited": false, "score": 0, "creation_date": 1548773198, "post_id": 54423250, "comment_id": 95657195, "body": "Have you tried creating a custom method with <code>@Query</code> to update the particular field ?. It is very rare you update the primary key of the entity and it is mostly unlikely to happen. I can understand if you want to update the other properties of the entity not the primary key itself."}, {"owner": {"reputation": 423, "user_id": 5887387, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-yIn78hmWorc/AAAAAAAAAAI/AAAAAAAAAKM/sSevwK4QlxA/photo.jpg?sz=128", "display_name": "Nicky Romeijn", "link": "https://stackoverflow.com/users/5887387/nicky-romeijn"}, "reply_to_user": {"reputation": 4444, "user_id": 7122593, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bccc555af56523598173332f6a58a7b5?s=128&d=identicon&r=PG&f=1", "display_name": "Barath", "link": "https://stackoverflow.com/users/7122593/barath"}, "edited": false, "score": 0, "creation_date": 1548776430, "post_id": 54423250, "comment_id": 95659398, "body": "I&#39;m not trying to modify the primary key here, what I want is to access the patch endpoint by supplying the primary key as url parameter then finding the corresponding model, updating attributes en saving it."}, {"owner": {"reputation": 4444, "user_id": 7122593, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bccc555af56523598173332f6a58a7b5?s=128&d=identicon&r=PG&f=1", "display_name": "Barath", "link": "https://stackoverflow.com/users/7122593/barath"}, "edited": false, "score": 0, "creation_date": 1548776587, "post_id": 54423250, "comment_id": 95659496, "body": "Great. in that case you can get the entity using <code>findById(id)</code> and then update the properties and use <code>save()</code> it calls merge instead of persist because its an existing entity. if you dont like doing this way, use custom method with <code>@Query</code> native query option."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 5887387, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-yIn78hmWorc/AAAAAAAAAAI/AAAAAAAAAKM/sSevwK4QlxA/photo.jpg?sz=128", "display_name": "Nicky Romeijn", "link": "https://stackoverflow.com/users/5887387/nicky-romeijn"}, "edited": false, "score": 0, "creation_date": 1548778272, "post_id": 54424198, "comment_id": 95660558, "body": "This would be an option, yes, it&#39;s a shame though I have to wrap the CrudRepository to add this functionality. How would I go about to make this service class example injectable? I&#39;ve tried the structure but I&#39;m getting the error   <code>No qualifying bean of type CompanyService</code>"}, {"owner": {"reputation": 170, "user_id": 5743040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d469892ba62f6b50e904ed248c738?s=128&d=identicon&r=PG", "display_name": "Andrii Vdovychenko", "link": "https://stackoverflow.com/users/5743040/andrii-vdovychenko"}, "reply_to_user": {"reputation": 423, "user_id": 5887387, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-yIn78hmWorc/AAAAAAAAAAI/AAAAAAAAAKM/sSevwK4QlxA/photo.jpg?sz=128", "display_name": "Nicky Romeijn", "link": "https://stackoverflow.com/users/5887387/nicky-romeijn"}, "edited": false, "score": 0, "creation_date": 1548841071, "post_id": 54424198, "comment_id": 95684161, "body": "I forgot annotations like  @Service. Examples you can find <a href=\"https://spring.io/guides/tutorials/spring-boot-kotlin/\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 170, "user_id": 5743040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0d469892ba62f6b50e904ed248c738?s=128&d=identicon&r=PG", "display_name": "Andrii Vdovychenko", "link": "https://stackoverflow.com/users/5743040/andrii-vdovychenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1548840979, "last_edit_date": 1548840979, "creation_date": 1548775076, "answer_id": 54424198, "question_id": 54423250, "link": "https://stackoverflow.com/questions/54423250/updating-a-hibernate-entity-with-crudrepository/54424198#54424198", "title": "Updating a hibernate entity with CrudRepository", "body": "<p>Do you need something like this?</p>\n\n<pre><code> @RestController\n class Controller(private val service: CompanyService) {\n   @PatchMapping(\"/company/{id}\")\n   fun update(@PathVariable id: Long, @RequestBody company: Company): Company {\n     return service.updateCompany(company, id)\n   }\n }\n\n @Service\n class CompanyService (private val repository: CompanyRepository) {\n   @Transactional\n   fun updateCompany(company: Company, id: Long): Company {\n     val companyToUpdate = repository.findOne(id)\n     companyToUpdate.setSomething(company.getSomething)\n     raturn companyToUpdate;\n   }\n }\n\n interface CompanyRepository : CrudRepository&lt;Company, Long&gt;\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 5887387, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-yIn78hmWorc/AAAAAAAAAAI/AAAAAAAAAKM/sSevwK4QlxA/photo.jpg?sz=128", "display_name": "Nicky Romeijn", "link": "https://stackoverflow.com/users/5887387/nicky-romeijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 54424198, "answer_count": 1, "score": 0, "last_activity_date": 1548840979, "creation_date": 1548772144, "question_id": 54423250, "link": "https://stackoverflow.com/questions/54423250/updating-a-hibernate-entity-with-crudrepository", "title": "Updating a hibernate entity with CrudRepository", "body": "<p>I'm currently writing my first spring boot Kotlin application and am trying to create a rest API with JPA persistence. The basics are going fine but I'm struggling with updating a model on a patch endpoint (@patchMapping).</p>\n\n<p>I want to adhere to proper rest standards and for that reason I'm hitting the patch endpoint with <code>@PatchMapping(\"/company/{id}\")</code>. </p>\n\n<p>I would like to be able to call the CrudRepository in a way like this. </p>\n\n<pre><code>  @PatchMapping(\"/company/{id}\")\n  fun update(@PathVariable id: Long, @RequestBody updateRequest: Company) : Company {\n    return repository.update(updateRequest, id)\n  }\n</code></pre>\n\n<p>but it appears as if the spring way to do it is to pass the id of the object you're going to update within the requestBody? e.g.</p>\n\n<pre><code>repository.save(updateRequest)\n</code></pre>\n\n<p>which then auto merges the object. But this conflicts with any sane rest convention...</p>\n\n<p>is there an integrated solution available for what I want to achieve? I'd like to refrain from writing my own logic as I'd hoped spring to have this functionality.</p>\n"}, {"tags": ["kotlin", "companion-object", "extension-function", "kotlin-companion"], "answers": [{"comments": [{"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1548773696, "post_id": 54423269, "comment_id": 95657545, "body": "and where to store constants that would be used in extension function?"}, {"owner": {"reputation": 2691, "user_id": 202059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d7PGT.jpg?s=128&g=1", "display_name": "cmaynard", "link": "https://stackoverflow.com/users/202059/cmaynard"}, "reply_to_user": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1548774843, "post_id": 54423269, "comment_id": 95658380, "body": "If they&#39;re really constants then store them inside the function, if they come from a configuration just load them from the config file into a singleton and reference that singleton using the same pattern as the logger."}, {"owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 0, "creation_date": 1548830745, "post_id": 54423269, "comment_id": 95678732, "body": "Argh, I&#39;ve just found out that &#39;kotlin-logging&#39; takes name of class from the context where it&#39;s initialized. So making a singleton would hide real class name :("}, {"owner": {"reputation": 2691, "user_id": 202059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d7PGT.jpg?s=128&g=1", "display_name": "cmaynard", "link": "https://stackoverflow.com/users/202059/cmaynard"}, "reply_to_user": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "edited": false, "score": 1, "creation_date": 1548849845, "post_id": 54423269, "comment_id": 95689522, "body": "Just give it the class name instead of using the lambda signature <a href=\"https://github.com/MicroUtils/kotlin-logging/blob/master/kotlin-logging-jvm/src/main/kotlin/mu/KLogging.kt#L46\" rel=\"nofollow noreferrer\">github.com/MicroUtils/kotlin-logging/blob/master/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2691, "user_id": 202059, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/d7PGT.jpg?s=128&g=1", "display_name": "cmaynard", "link": "https://stackoverflow.com/users/202059/cmaynard"}, "is_accepted": true, "score": 1, "last_activity_date": 1552051926, "last_edit_date": 1552051926, "creation_date": 1548772195, "answer_id": 54423269, "question_id": 54423143, "link": "https://stackoverflow.com/questions/54423143/companion-object-with-extension-function-in-kotlin/54423269#54423269", "title": "Companion object with extension function in kotlin?", "body": "<p>If you just want you logger to be a singleton you can make an object that contains and instance of the logger and reach it from there.</p>\n\n<pre><code>Object LoggerSingleton( val logger = KotlinLogging.logger{})\n</code></pre>\n\n<p>Then in your extension function</p>\n\n<pre><code>fun String.toFoo(): Foo {\n\nLoggerSingleton.logger.debug { \"Mapping [$this] to Foo\" }\n\nif(MY_CONST.equals(this) { \n }\n</code></pre>\n\n<p>Since an Object in Kotlin is guaranteed to have only one instance you won't have a different logger for each use of toFoo.</p>\n\n<p><strong>EDIT</strong>\nTo keep the desired class name\n<a href=\"https://github.com/MicroUtils/kotlin-logging/blob/master/kotlin-logging-jvm/src/main/kotlin/mu/KLogging.kt#L46\" rel=\"nofollow noreferrer\">Use this signature</a>\nLike so:</p>\n\n<pre><code>Object StringLoggerSingleton( val logger = KotlinLogging.logger(\"String\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17883, "user_id": 6202869, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0242e0540d33913439e284663e1a9300?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/6202869/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1548844497, "last_edit_date": 1548844497, "creation_date": 1548843980, "answer_id": 54438347, "question_id": 54423143, "link": "https://stackoverflow.com/questions/54423143/companion-object-with-extension-function-in-kotlin/54438347#54438347", "title": "Companion object with extension function in kotlin?", "body": "<p>I do not know what you want to accomplish with your logger, but I show you what I did already ;-)</p>\n\n<p>Usually I put extension functions in its own file named similar to what the function is actually extending (e.g. either <code>StringExtensionFunction</code> or if is more related to its purpose and maybe only available if certain dependencies are available, I also did something like, e.g. <code>JsoupExtensionFunctions</code> (where there was a <code>String.toJsoupHtml()</code>, <code>File.toJsoupXml()</code>, etc.)).</p>\n\n<p>If I then need constants I just place them within that file, e.g. by just writing something like:</p>\n\n<pre><code>private const val MY_CONST = \"my_const_value\"\n</code></pre>\n\n<p>No surrounding <code>class</code>, no surrounding <code>object</code>.</p>\n\n<p>Regarding the <code>logger</code>... as loggers are usually tied to a certain name/class, I usually put a logger inside every (important) class or associate some logger to specific names... So I am not completely sure what your intent is here... If it's ok for you that the logger is returning the container of your extension function (maybe <code>StringExtensionFunction.kt</code>), then you can also put a logger-val inside that file similar to what I showed with <code>MY_CONST</code>.</p>\n\n<p>If your intention was rather to reuse the callers logger, that might not work so easily... (the easiest would then probably be to pass it to the function, but usually you do not want that)... and other mechanisms may not really be worth it ;-)</p>\n"}], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1696, "favorite_count": 0, "accepted_answer_id": 54423269, "answer_count": 2, "score": 1, "last_activity_date": 1552051926, "creation_date": 1548771781, "question_id": 54423143, "link": "https://stackoverflow.com/questions/54423143/companion-object-with-extension-function-in-kotlin", "title": "Companion object with extension function in kotlin?", "body": "<p>I would like to have extension function and use logger from <a href=\"https://github.com/MicroUtils/kotlin-logging\" rel=\"nofollow noreferrer\">kotlin-logging</a> and have constants inside companion object.</p>\n\n<p>My function:</p>\n\n<pre><code>fun String.toFoo(): Foo {\n\n    logger.debug { \"Mapping [$this] to Foo\" }\n\n    if(MY_CONST.equals(this) { \n        ...\n}\n</code></pre>\n\n<p>Question is where I should put <code>val logger = KotlinLogging.logger {}</code> and <code>MY_CONST</code> since I cannot use companion object with an extension function?</p>\n"}, {"tags": ["android", "asynchronous", "kotlin"], "comments": [{"owner": {"reputation": 478, "user_id": 5090100, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-w2sezFd9558/AAAAAAAAAAI/AAAAAAAAAuQ/ssJ-a8lK0Dc/photo.jpg?sz=128", "display_name": "K&#233;vin Giacomino", "link": "https://stackoverflow.com/users/5090100/k%c3%a9vin-giacomino"}, "edited": false, "score": 0, "creation_date": 1548766121, "post_id": 54421446, "comment_id": 95652513, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44309241/warning-this-asynctask-class-should-be-static-or-leaks-might-occur\">warning-this-asynctask-class-should-be-static-or-leaks-might&zwnj;&#8203;-occur</a>"}, {"owner": {"reputation": 13530, "user_id": 5496177, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/98e2f1facb002b8c7ab2cb041d48b0a1?s=128&d=identicon&r=PG", "display_name": "TheWanderer", "link": "https://stackoverflow.com/users/5496177/thewanderer"}, "edited": false, "score": 3, "creation_date": 1548766291, "post_id": 54421446, "comment_id": 95652628, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/44309241/warning-this-asynctask-class-should-be-static-or-leaks-might-occur\">Warning: This AsyncTask class should be static or leaks might occur</a>"}, {"owner": {"reputation": 1057, "user_id": 6682721, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1258515337506411/picture?type=large", "display_name": "Tony Merritt", "link": "https://stackoverflow.com/users/6682721/tony-merritt"}, "edited": false, "score": 1, "creation_date": 1548766393, "post_id": 54421446, "comment_id": 95652688, "body": "Hello yhank you for the comments of Duplicate, The duplicate is written for Java. Im not sure how to convert that to Kotlin"}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 1, "creation_date": 1548770454, "post_id": 54421446, "comment_id": 95655325, "body": "It should be pretty easy to convert Java to Kotlin, even Android Studio does that automatically for you, so that is not an excuse, this post is still a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 13671828, "user_type": "registered", "profile_image": "https://graph.facebook.com/1991202917677796/picture?type=large", "display_name": "Matei Marginean", "link": "https://stackoverflow.com/users/13671828/matei-marginean"}, "is_accepted": false, "score": 2, "last_activity_date": 1592312442, "creation_date": 1592312442, "answer_id": 62409129, "question_id": 54421446, "link": "https://stackoverflow.com/questions/54421446/async-should-be-static-error-kotlin-android/62409129#62409129", "title": "Async should be static error, Kotlin, Android", "body": "<p>try doing:</p>\n\n<pre><code>class A {\ncompanion object {\n    class MyAsyncTask: AsyncTask &lt;String?, Void,Intent&gt;(){\n        protected fun doInBackground(vararg params: String): Intent {\n            // do stuff\n        }\n\n        override fun onPostExecute(intent: Intent) {\n           //do stuff\n        }\n\n    }.execute()\n}\nfun doStuff() {\n   MyAsyncTask.execute()\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 1057, "user_id": 6682721, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/1258515337506411/picture?type=large", "display_name": "Tony Merritt", "link": "https://stackoverflow.com/users/6682721/tony-merritt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1592312442, "creation_date": 1548765999, "last_edit_date": 1548766981, "question_id": 54421446, "link": "https://stackoverflow.com/questions/54421446/async-should-be-static-error-kotlin-android", "title": "Async should be static error, Kotlin, Android", "body": "<p>I am getting this error on this function, I am new to Kotlin programming and not sure how I would fix this. the only answewrs I can find on this are for Java and im not sure how i can convert them</p>\n\n<p>I dont know how to make this static or try and take it out of a nested class any help would be appretiated</p>\n\n<blockquote>\n  <p>This AsyncTask class should be static or leaks might occur (anonymous\n  android.os.AsyncTask)\n  less... (\u2318F1)  A static field will leak contexts.</p>\n</blockquote>\n\n<pre><code>private fun detectAndFrame(imageBitmap: Bitmap) {\n        val outputStream = ByteArrayOutputStream()\n        imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream)\n        val inputStream = ByteArrayInputStream(outputStream.toByteArray())\n\n        val detectTask = object : AsyncTask&lt;InputStream, String, Array&lt;Face&gt;&gt;() {\n\n            var exceptionMessage = \"\"\n\n\n            override fun doInBackground(vararg params: InputStream): Array&lt;Face&gt;? {\n                try {\n                    publishProgress(\"Detecting...\")\n                    val result = faceServiceClient.detect(\n                        params[0],\n                        true, // returnFaceId\n                        false, null// returnFaceAttributes:\n                        /* new FaceServiceClient.FaceAttributeType[] {\n           FaceServiceClient.FaceAttributeType.Age,\n           FaceServiceClient.FaceAttributeType.Gender }\n           */\n                    )// returnFaceLandmarks\n                    if (result == null) {\n                        publishProgress(\n                            \"Detection Finished. Nothing detected\"\n                        )\n                        return null\n                    }\n                    publishProgress(\n                        String.format(\n                            \"Detection Finished. %d face(s) detected\",\n                            result.size\n                        )\n                    )\n                    return result\n                } catch (e: Exception) {\n                    exceptionMessage = String.format(\n                        \"Detection failed: %s\", e.message\n                    )\n                    return null\n                }\n            }\n\n            override fun onPreExecute() {\n                //TODO: show progress dialog\n                detectionProgressDialog.show()\n            }\n\n            override fun onProgressUpdate(vararg progress: String) {\n                //TODO: update progress\n                detectionProgressDialog.setMessage(progress[0])\n            }\n\n            override fun onPostExecute(result: Array&lt;Face&gt;) {\n                //TODO: update face frames\n                detectionProgressDialog.dismiss()\n                if (exceptionMessage != \"\") {\n                    showError(exceptionMessage)\n                }\n                if (result == null) return\n                imageTook.setImageBitmap(\n                    drawFaceRectanglesOnBitmap(imageBitmap, result)\n                )\n                imageBitmap.recycle()\n            }\n        }\n\n        detectTask.execute(inputStream)\n    }\n\n\n    private fun drawFaceRectanglesOnBitmap(\n        originalBitmap: Bitmap, faces: Array&lt;Face&gt;?\n    ): Bitmap {\n        val bitmap = originalBitmap.copy(Bitmap.Config.ARGB_8888, true)\n        val canvas = Canvas(bitmap)\n        val paint = Paint()\n        paint.isAntiAlias = true\n        paint.style = Paint.Style.STROKE\n        paint.color = Color.RED\n        paint.strokeWidth = 10f\n        if (faces != null) {\n            for (face in faces) {\n                val faceRectangle = face.faceRectangle\n                canvas.drawRect(\n                    faceRectangle.left.toFloat(),\n                    faceRectangle.top.toFloat(),\n                    (faceRectangle.left + faceRectangle.width).toFloat(),\n                    faceRectangle.top + faceRectangle.height.toFloat(),\n                    paint\n                )\n            }\n        }\n        return bitmap\n    }\n\n\n    private fun showError(message: String) {\n        AlertDialog.Builder(this)\n            .setTitle(\"Error\")\n            .setMessage(message)\n            .setPositiveButton(\"OK\") { dialog, id -&gt; }\n            .create().show()\n    }\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1930, "user_id": 5877937, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/IFiok.jpg?s=128&g=1", "display_name": "Dhaval", "link": "https://stackoverflow.com/users/5877937/dhaval"}, "edited": false, "score": 0, "creation_date": 1548766137, "post_id": 54421322, "comment_id": 95652519, "body": "If you are using showFragment method for replacing navigation drawer items, then maybe you shoudn&#39;t put them in backstack. Because in most cases, there won&#39;t be any case to navigate back user to different drawer item."}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1548770128, "post_id": 54421322, "comment_id": 95655118, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6186433/clear-back-stack-using-fragments\">Clear back stack using fragments</a>"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 6707984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cac5aa7c64ba55a0def1c6655e8e2dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Kannan panneer selvam", "link": "https://stackoverflow.com/users/6707984/kannan-panneer-selvam"}, "is_accepted": false, "score": 3, "last_activity_date": 1548765817, "creation_date": 1548765817, "answer_id": 54421382, "question_id": 54421322, "link": "https://stackoverflow.com/questions/54421322/how-to-clear-stack-back-fragment/54421382#54421382", "title": "How to clear stack back fragment", "body": "<pre><code>FragmentManager manager = getFragmentManager();\nFragmentManager.BackStackEntry first = manager.getBackStackEntryAt(0);\nmanager.popBackStack(first.getId(), FragmentManager.POP_BACK_STACK_INCLUSIVE);\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 3904405, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100001184597325/picture?type=large", "display_name": "Magdalena Dziesi\u0144ska", "link": "https://stackoverflow.com/users/3904405/magdalena-dziesi%c5%84ska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548770172, "creation_date": 1548765646, "last_edit_date": 1548770172, "question_id": 54421322, "link": "https://stackoverflow.com/questions/54421322/how-to-clear-stack-back-fragment", "title": "How to clear stack back fragment", "body": "<p>I have a problem with clean my stack back.\nThis method shows my fragment: </p>\n\n<pre><code>private fun showFragment(fragment: Fragment, titleTag: String) {\n\n    supportFragmentManager.beginTransaction()\n        .replace(R.id.container, fragment, titleTag)\n        .addToBackStack(titleTag)\n        .commit()\n\n    if (drawer_layout.isDrawerOpen(GravityCompat.END)) {\n        drawer_layout.closeDrawer(GravityCompat.END)\n    }\n}\n</code></pre>\n\n<p>I have no idea how to clear my stack. </p>\n"}, {"tags": ["android", "google-maps", "kotlin", "directions"], "comments": [{"owner": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "reply_to_user": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "edited": false, "score": 0, "creation_date": 1548763694, "post_id": 54420561, "comment_id": 95651077, "body": "thank you, i should have read documentations more carefully :) thank you a lot"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "edited": false, "score": 0, "creation_date": 1548764784, "post_id": 54420892, "comment_id": 95651698, "body": "there is another problem, as i posted. Is it even possible to fix ?"}, {"owner": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "reply_to_user": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "edited": false, "score": 0, "creation_date": 1548765107, "post_id": 54420892, "comment_id": 95651882, "body": "This might be because of the lat-long obtained. It is based on the points so I think the points obtained might be such so it has to go out of place."}, {"owner": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "edited": false, "score": 0, "creation_date": 1548766197, "post_id": 54420892, "comment_id": 95652569, "body": "but how to fix that ? i cannot edit JSON which i recieved"}, {"owner": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "reply_to_user": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "edited": false, "score": 0, "creation_date": 1548766225, "post_id": 54420892, "comment_id": 95652586, "body": "You are using which API?"}, {"owner": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "reply_to_user": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "edited": false, "score": 0, "creation_date": 1548767065, "post_id": 54420892, "comment_id": 95653162, "body": "This is great news!!"}], "tags": [], "owner": {"reputation": 404, "user_id": 10752944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93e3744bf53ea9a3bdff18a3d6bdb1f?s=128&d=identicon&r=PG&f=1", "display_name": "Kartik", "link": "https://stackoverflow.com/users/10752944/kartik"}, "is_accepted": true, "score": 1, "last_activity_date": 1548764240, "creation_date": 1548764240, "answer_id": 54420892, "question_id": 54420561, "link": "https://stackoverflow.com/questions/54420561/google-maps-directions-spaces-between-polylines/54420892#54420892", "title": "Google maps directions - spaces between polylines", "body": "<p><code>.jointType(JointType.ROUND)</code> Adding this line should do it for you</p>\n"}], "owner": {"reputation": 145, "user_id": 9535858, "user_type": "registered", "profile_image": "https://graph.facebook.com/1692146914156865/picture?type=large", "display_name": "Tobias", "link": "https://stackoverflow.com/users/9535858/tobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 54420892, "answer_count": 1, "score": 0, "last_activity_date": 1548766839, "creation_date": 1548763135, "last_edit_date": 1548766839, "question_id": 54420561, "link": "https://stackoverflow.com/questions/54420561/google-maps-directions-spaces-between-polylines", "title": "Google maps directions - spaces between polylines", "body": "<p>I am facing this ugly problem, can anyone solve this ? I want to get rid of that ugly spacec between lines. I need to keep the width.<a href=\"https://i.stack.imgur.com/zto4m.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zto4m.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>code(adding polylines) :</p>\n\n<pre><code>thread {\n        val response = getResponse(points[1].location, points[2].location, \"driving21.\").log()\n        when (response) {\n\n            is Result.Failure -&gt; \"Fail\".log()\n\n            is Result.Success -&gt;\n                response.value.routes[0].listOfLegs[0].listOfSteps.forEach { element -&gt;\n                    //                    element.points.log()\n                    val options = PolylineOptions()\n                    options.color(Color.rgb(255, 26, 140))\n                    options.width(50F)\n                    options.addAll(PolyUtil.decode(element.points))\n                    runOnUiThread {\n                        map.addPolyline(options)\n                    }\n                }\n        }\n</code></pre>\n\n<p>EDIT:<a href=\"https://i.stack.imgur.com/UNAeX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UNAeX.jpg\" alt=\"\"></a></p>\n\n<p>after adding <code>.jointType(JointType.ROUND)</code><br>\nthere is another problem</p>\n"}, {"tags": ["android", "mvvm", "kotlin", "viewmodel", "kodein"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1548759878, "post_id": 54419236, "comment_id": 95648834, "body": "see <a href=\"https://android.googlesource.com/platform/frameworks/support/+/master/lifecycle/extensions/src/main/java/androidx/lifecycle/ViewModelProviders.java#84\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://android.googlesource.com/platform/frameworks/support/+/master/lifecycle/extensions/src/main/java/androidx/lifecycle/ViewModelProviders.java#120\" rel=\"nofollow noreferrer\">this</a> - factories are used anyway"}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1548760571, "post_id": 54419236, "comment_id": 95649234, "body": "so then why to create it yourself if it is used anyway?"}], "answers": [{"comments": [{"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "edited": false, "score": 2, "creation_date": 1548762560, "post_id": 54420034, "comment_id": 95650439, "body": "But I am instantiating the repository in the viewmodel itself so the constructor doesn&#39;t have any parameter. Then the question here is if there is an advantage on instantiating the repository in the activity, create the factory to pass the repository to the viewmodel or just instantiate the repository in the viewmodel and use ViewModelProviders without creating your own factory."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 10, "creation_date": 1548762676, "post_id": 54420034, "comment_id": 95650507, "body": "<code>I am instantiating the repository in the viewmodel itself</code> then you are violating DI principles and makes me wonder why you use Kodein."}, {"owner": {"reputation": 1868, "user_id": 10395392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZkM2.jpg?s=128&g=1", "display_name": "Vishal Arora", "link": "https://stackoverflow.com/users/10395392/vishal-arora"}, "edited": false, "score": 4, "creation_date": 1548762687, "post_id": 54420034, "comment_id": 95650512, "body": "For dependency inversion, a class should not create the dependencies it needs. Those dependencies should be supplied to it. Here we have an example of a Constructor Injection where we are injecting our repo through object constructor."}, {"owner": {"reputation": 1868, "user_id": 10395392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZkM2.jpg?s=128&g=1", "display_name": "Vishal Arora", "link": "https://stackoverflow.com/users/10395392/vishal-arora"}, "edited": false, "score": 0, "creation_date": 1548762782, "post_id": 54420034, "comment_id": 95650568, "body": "Read this for more reference and clarity - <a href=\"https://en.wikipedia.org/wiki/Dependency_inversion_principle\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dependency_inversion_principle</a>"}, {"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548763002, "post_id": 54420034, "comment_id": 95650674, "body": "@EpicPandaForce I am instatiating the repository using kodein."}, {"owner": {"reputation": 440, "user_id": 4279735, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lnW8d.jpg?s=128&g=1", "display_name": "getsadzeg", "link": "https://stackoverflow.com/users/4279735/getsadzeg"}, "edited": false, "score": 1, "creation_date": 1557661912, "post_id": 54420034, "comment_id": 98832832, "body": "&quot;ViewModelProviders Utility can not create instance of a ViewModel with argument constructor because it does not know how and what objects to pass in the constructor.&quot;  Could you explain this? Why is <code>ViewModelProviders</code> designed specifically that way to use only factories and not plain constructors for ViewModel creation?"}, {"owner": {"reputation": 71, "user_id": 5466486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rw7lg.jpg?s=128&g=1", "display_name": "Sanket Patel", "link": "https://stackoverflow.com/users/5466486/sanket-patel"}, "edited": false, "score": 0, "creation_date": 1579605904, "post_id": 54420034, "comment_id": 105814185, "body": "do we have to create ViewModelFactory for each viewModel class ?"}, {"owner": {"reputation": 647, "user_id": 2649154, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1b459523f6b56a15ecdba17640b576ce?s=128&d=identicon&r=PG", "display_name": "gioravered", "link": "https://stackoverflow.com/users/2649154/gioravered"}, "reply_to_user": {"reputation": 71, "user_id": 5466486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rw7lg.jpg?s=128&g=1", "display_name": "Sanket Patel", "link": "https://stackoverflow.com/users/5466486/sanket-patel"}, "edited": false, "score": 0, "creation_date": 1583699157, "post_id": 54420034, "comment_id": 107195970, "body": "@SanketPatel - You can use a single ViewModelFactory for ViewModels with no constructor parameters."}, {"owner": {"reputation": 12622, "user_id": 437146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YBwyN.jpg?s=128&g=1", "display_name": "NightFury", "link": "https://stackoverflow.com/users/437146/nightfury"}, "edited": false, "score": 0, "creation_date": 1591549311, "post_id": 54420034, "comment_id": 110092260, "body": "Now this is a perfect answer I have been looking for. Thanks Vishal!"}, {"owner": {"reputation": 2169, "user_id": 7098307, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/CGwUh.jpg?s=128&g=1", "display_name": "Ajith", "link": "https://stackoverflow.com/users/7098307/ajith"}, "edited": false, "score": 0, "creation_date": 1599125156, "post_id": 54420034, "comment_id": 112678765, "body": "Excellent!! you save my day. Thanks a lot"}, {"owner": {"reputation": 42, "user_id": 13165893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WVT3T.jpg?s=128&g=1", "display_name": "Branddd", "link": "https://stackoverflow.com/users/13165893/branddd"}, "edited": false, "score": 0, "creation_date": 1603908292, "post_id": 54420034, "comment_id": 114187760, "body": "thankyou, you just helped me finally go to sleep in sound. &lt;3"}, {"owner": {"reputation": 700, "user_id": 6530785, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205391914477312/picture?type=large", "display_name": "Yousef Gamal", "link": "https://stackoverflow.com/users/6530785/yousef-gamal"}, "reply_to_user": {"reputation": 440, "user_id": 4279735, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/lnW8d.jpg?s=128&g=1", "display_name": "getsadzeg", "link": "https://stackoverflow.com/users/4279735/getsadzeg"}, "edited": false, "score": 0, "creation_date": 1618777413, "post_id": 54420034, "comment_id": 118699455, "body": "@getsadzeg I&#39;m not quite sure about the reason it&#39;s designed that way, but thinking about it, I think it makes sense, if <code>ViewModelProviders</code> will instantiate any <code>ViewModel</code> with any arguments, it means the <code>ViewModelProviders</code> will have to accept unknown and unlimited arguments, which might not be a good design, so a Factory is used so that the ViewModel doesn&#39;t have to care how the <code>ViewModel</code> is instantiated, but just use the instance directly. Maybe reading about &quot;Factory Method Pattern&quot; could explain that in more detail. (that&#39;s my own interpretation)"}], "tags": [], "owner": {"reputation": 1868, "user_id": 10395392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZkM2.jpg?s=128&g=1", "display_name": "Vishal Arora", "link": "https://stackoverflow.com/users/10395392/vishal-arora"}, "is_accepted": true, "score": 74, "last_activity_date": 1548761264, "creation_date": 1548761264, "answer_id": 54420034, "question_id": 54419236, "link": "https://stackoverflow.com/questions/54419236/why-a-viewmodel-factory-is-needed-in-android/54420034#54420034", "title": "Why a viewmodel factory is needed in Android?", "body": "<p>We can not create ViewModel on our own. We need ViewModelProviders utility provided by Android to create ViewModels.</p>\n\n<p>But ViewModelProviders can only instantiate ViewModels with no arg constructor.</p>\n\n<p>So if I have a ViewModel with multiple arguments, then I need to use a Factory that I can pass to ViewModelProviders to use when an instance of MyViewModel is required.</p>\n\n<p>For example - </p>\n\n<pre><code>public class MyViewModel extends ViewModel {\n    private final MyRepo myrepo;\n    public MyViewModel(MyRepo myrepo) {\n         this.myrepo = myrepo;\n    }\n}\n</code></pre>\n\n<p>To instantiate this ViewModel, I need to have a factory which ViewModelProviders can use to create its instance.</p>\n\n<p>ViewModelProviders Utility can not create instance of a ViewModel with argument constructor because it does not know how and what objects to pass in the constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "edited": false, "score": 0, "creation_date": 1548762924, "post_id": 54420403, "comment_id": 95650643, "body": "The thing is that I inject to the viewmodel the repository it needs so I don&#39;t need to create a constructor with arguments, and it respects the lifecycle because it does&#39;t load again everytime I rotate the phone. So it works as if I had a factory but without having to create it."}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "edited": false, "score": 1, "creation_date": 1548764808, "post_id": 54420403, "comment_id": 95651711, "body": "That is no injection, you&#39;re doing a lookup from a global variable. You&#39;re supposed to use constructor argument. In case of Kodein, I would think you&#39;re supposed to have <code>provider { MainViewModel(instance()) }</code> and then invoke the provider inside the <code>ViewModelProviders.Factory</code>."}, {"owner": {"reputation": 27882, "user_id": 383414, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0252c97758708e419523490aa848ded?s=128&d=identicon&r=PG", "display_name": "Richard Le Mesurier", "link": "https://stackoverflow.com/users/383414/richard-le-mesurier"}, "edited": false, "score": 1, "creation_date": 1619013414, "post_id": 54420403, "comment_id": 118776899, "body": "This is the only answer that highlights the importance of setting &quot;initial state&quot; only once, and not on every rotation of the device. That is the essence of why creating a custom factory is important."}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 27, "last_activity_date": 1586436010, "last_edit_date": 1586436010, "creation_date": 1548762587, "answer_id": 54420403, "question_id": 54419236, "link": "https://stackoverflow.com/questions/54419236/why-a-viewmodel-factory-is-needed-in-android/54420403#54420403", "title": "Why a viewmodel factory is needed in Android?", "body": "<blockquote>\n  <p>We have been discussing about this but we don't know the reason of creating a viewmodel factory to create a viewmodel instead of instantiate the viewmodel directly. What is the gain of creating a factory that just creates the viewmodel?</p>\n</blockquote>\n\n<p>Because Android will only give you a new instance if it's not yet created <em>for that specific given ViewModelStoreOwner</em>.</p>\n\n<p>Let's also not forget that ViewModels are kept alive across configuration changes, so if you rotate the phone, you're not supposed to create a new ViewModel.</p>\n\n<p>If you are going back to a previous Activity and you re-open this Activity, then the previous ViewModel should receive <code>onCleared()</code> and the new Activity should have a new ViewModel.</p>\n\n<p>Unless you're doing that yourself, you should probably just trust the <code>ViewModelProviders.Factory</code> to do its job.</p>\n\n<p>(And you need the factory because you typically don't just have a <code>no-arg</code> constructor, your ViewModel has constructor arguments, and the <code>ViewModelProvider</code> must know how to fill out the constructor arguments when you're using a non-default constructor).</p>\n"}, {"tags": [], "owner": {"reputation": 8524, "user_id": 7258332, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1162962850406223/picture?type=large", "display_name": "Santanu Sur", "link": "https://stackoverflow.com/users/7258332/santanu-sur"}, "is_accepted": false, "score": 18, "last_activity_date": 1589299325, "last_edit_date": 1589299325, "creation_date": 1579590117, "answer_id": 59835717, "question_id": 54419236, "link": "https://stackoverflow.com/questions/54419236/why-a-viewmodel-factory-is-needed-in-android/59835717#59835717", "title": "Why a viewmodel factory is needed in Android?", "body": "<p>In short,</p>\n\n<p>if we need to <em>pass</em> some <code>input data</code> to the <code>constructor</code> of the <code>viewModel</code> , we need to create a <code>factory class</code> for viewModel. </p>\n\n<p>Like example :-</p>\n\n<pre><code>class MyViewModelFactory constructor(private val repository: DataRepository): ViewModelProvider.Factory {\n\n     override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {\n        return if (modelClass.isAssignableFrom(MyViewModel::class.java!!)) {\n            MyViewModel(this.repository) as T\n        } else {\n            throw IllegalArgumentException(\"ViewModel Not Found\")\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Reason</strong></p>\n\n<p>We cannot directly create the object of the <code>ViewModel</code> as it <strong>would not</strong> be aware of the <code>lifecyclerOwner</code>. So we use :-</p>\n\n<pre><code>ViewModelProviders.of(this, MyViewModelFactory(repository)).get(MyViewModel::class.java)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 13172802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34069f71aba93875ec48368c9ce8dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Dhrumil Shah", "link": "https://stackoverflow.com/users/13172802/dhrumil-shah"}, "is_accepted": false, "score": -3, "last_activity_date": 1594467380, "creation_date": 1594467380, "answer_id": 62848663, "question_id": 54419236, "link": "https://stackoverflow.com/questions/54419236/why-a-viewmodel-factory-is-needed-in-android/62848663#62848663", "title": "Why a viewmodel factory is needed in Android?", "body": "<p>We can pass arguments in viewmodel through viewmodel factory. Without factory, we can not pass arguments in viewmodel.</p>\n<pre><code>class UserViewModelFactory(private val context: Context) : ViewModelProvider.NewInstanceFactory() {\n \n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        return UserViewModel(context) as T\n    }\n \n}\n</code></pre>\n<pre><code>class UserViewModel(private val context: Context) : ViewModel() {\n \n    private var listData = MutableLiveData&lt;ArrayList&lt;User&gt;&gt;()\n \n    init{\n        val userRepository : UserRepository by lazy {\n            UserRepository\n        }\n        if(context.isInternetAvailable()) {\n            listData = userRepository.getMutableLiveData(context)\n        }\n    }\n \n    fun getData() : MutableLiveData&lt;ArrayList&lt;User&gt;&gt;{\n        return listData\n    }\n}\n</code></pre>\n<p>You can call viewmodel in activity as below</p>\n<pre><code>val userViewModel = ViewModelProviders.of(this,UserViewModelFactory(this)).get(UserViewModel::class.java)\n</code></pre>\n<p>For more reference: <a href=\"https://codingwithdhrumil.com/2020/04/integrating-mvvm-architecture-pattern-with-viewmodel-and-livedata-using-kotlin-in-android-app.html\" rel=\"nofollow noreferrer\">Android MVVM Kotlin Example</a></p>\n"}], "owner": {"reputation": 1926, "user_id": 1734982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e3666b93ef2cfee578f79a7014d45312?s=128&d=identicon&r=PG", "display_name": "Iban Arriola", "link": "https://stackoverflow.com/users/1734982/iban-arriola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26072, "favorite_count": 12, "accepted_answer_id": 54420034, "answer_count": 4, "score": 56, "last_activity_date": 1594467380, "creation_date": 1548758582, "last_edit_date": 1548758713, "question_id": 54419236, "link": "https://stackoverflow.com/questions/54419236/why-a-viewmodel-factory-is-needed-in-android", "title": "Why a viewmodel factory is needed in Android?", "body": "<p>We have been discussing about this but we don't know the reason of creating a viewmodel factory to create a viewmodel instead of instantiate the viewmodel directly. What is the gain of creating a factory that just creates the viewmodel?</p>\n\n<p>I just put a simple example of how I did it without Factory</p>\n\n<p>here is the kodein module:</p>\n\n<pre><code>val heroesRepositoryModel = Kodein {\n    bind&lt;HeroesRepository&gt;() with singleton {\n        HeroesRepository()\n    }\n\n    bind&lt;ApiDataSource&gt;() with singleton {\n        DataModule.create()\n    }\n\n    bind&lt;MainViewModel&gt;() with provider {\n        MainViewModel()\n    }\n}\n</code></pre>\n\n<p>The piece of the Activity where I instantiate the viewmodel without using the factory </p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n    private lateinit var heroesAdapter: HeroAdapter\n    private lateinit var viewModel: MainViewModel\n    private val heroesList = mutableListOf&lt;Heroes.MapHero&gt;()\n    private var page = 0\n    private var progressBarUpdated = false\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        viewModel = ViewModelProviders.of(this)\n                .get(MainViewModel::class.java)\n        initAdapter()\n        initObserver()\n        findHeroes()\n    }\n</code></pre>\n\n<p>The ViewModel where I instantiate the usecase directly without having it in the constructor</p>\n\n<pre><code>class MainViewModel : ViewModel(), CoroutineScope {\n\n    private val heroesRepository: HeroesRepository = heroesRepositoryModel.instance()\n    val data = MutableLiveData&lt;List&lt;Heroes.MapHero&gt;&gt;()\n\n    private var job: Job = Job()\n    override val coroutineContext: CoroutineContext\n        get() = uiContext + job\n\n    fun getHeroesFromRepository(page: Int) {\n        launch {\n            try {\n                val response = heroesRepository.getHeroes(page).await()\n                data.value = response.data.results.map { it.convertToMapHero() }\n            } catch (e: HttpException) {\n                data.value = null\n            } catch (e: Throwable) {\n                data.value = null\n            }\n        }\n    }\n\n    override fun onCleared() {\n        super.onCleared()\n        job.cancel()\n    }\n}\n</code></pre>\n\n<p>So here a example using factory</p>\n\n<pre><code>class ListFragment : Fragment(), KodeinAware, ContactsAdapter.OnContactListener {\n\n    override val kodein by closestKodein()\n\n    private lateinit var adapterContacts: ContactsAdapter\n\n    private val mainViewModelFactory: MainViewModelFactory by instance()\n    private val mainViewModel: MainViewModel by lazy {\n        activity?.run {\n            ViewModelProviders.of(this, mainViewModelFactory)\n                .get(MainViewModel::class.java)\n        } ?: throw Exception(\"Invalid Activity\")\n    }\n\n    override fun onCreateView(\n            inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        return inflater.inflate(R.layout.fragment_list, container, false)\n    }\n</code></pre>\n\n<p>The viewmodelfactory:</p>\n\n<pre><code>class MainViewModelFactory (private val getContacts: GetContacts) : ViewModelProvider.Factory {\n\n    override fun &lt;T : ViewModel?&gt; create(modelClass: Class&lt;T&gt;): T {\n        if (modelClass.isAssignableFrom(MainViewModel::class.java)) {\n            return MainViewModel(getContacts) as T\n        }\n        throw IllegalArgumentException(\"Unknown ViewModel class\")\n    }\n}\n</code></pre>\n\n<p>And the viewmodel:</p>\n\n<pre><code>class MainViewModel(private val getContacts: GetContacts) : BaseViewModel() {\n    lateinit var gamesList: LiveData&lt;PagedList&lt;Contact&gt;&gt;\n    var contactsSelectedData: MutableLiveData&lt;List&lt;Contact&gt;&gt; = MutableLiveData()\n    var contactsSelected: ArrayList&lt;Contact&gt; = ArrayList()\n    private val pagedListConfig by lazy {\n        PagedList.Config.Builder()\n                .setEnablePlaceholders(false)\n                .setInitialLoadSizeHint(PAGES_CONTACTS_SIZE)\n                .setPageSize(PAGES_CONTACTS_SIZE)\n                .setPrefetchDistance(PAGES_CONTACTS_SIZE*2)\n                .build()\n    }\n</code></pre>\n\n<p>Here is the complete first example:</p>\n\n<p><a href=\"https://github.com/ibanarriolaIT/Marvel/tree/mvvm\" rel=\"noreferrer\">https://github.com/ibanarriolaIT/Marvel/tree/mvvm</a></p>\n\n<p>And the complete second example:</p>\n\n<p><a href=\"https://github.com/AdrianMeizoso/Payment-App\" rel=\"noreferrer\">https://github.com/AdrianMeizoso/Payment-App</a></p>\n"}, {"tags": ["javascript", "gradle", "kotlin", "kotlin-js"], "answers": [{"comments": [{"owner": {"reputation": 4441, "user_id": 1716487, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cb7969a127a12e8707cfa9fb95431d58?s=128&d=identicon&r=PG", "display_name": "morpheus05", "link": "https://stackoverflow.com/users/1716487/morpheus05"}, "edited": false, "score": 0, "creation_date": 1583410944, "post_id": 54766279, "comment_id": 107111833, "body": "Isn&#39;t the frontend plugin obsolete?"}], "tags": [], "owner": {"reputation": 313, "user_id": 935509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJIfF.jpg?s=128&g=1", "display_name": "kzm", "link": "https://stackoverflow.com/users/935509/kzm"}, "is_accepted": false, "score": 0, "last_activity_date": 1550579026, "creation_date": 1550579026, "answer_id": 54766279, "question_id": 54418585, "link": "https://stackoverflow.com/questions/54418585/include-js-dependencies-in-kotlin-js/54766279#54766279", "title": "Include js dependencies in kotlin-js", "body": "<p><a href=\"https://github.com/Kotlin/kotlin-frontend-plugin\" rel=\"nofollow noreferrer\">kotlin-frontend-plugin</a> can add npm dependencies from Gradle:</p>\n\n<pre><code>kotlinFrontend {\n    npm {\n        dependency \"style-loader\" // production dependency\n        devDependency \"karma\"     // development dependency\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4662200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008f947bc4e8dbe498d37ef094f0d90d?s=128&d=identicon&r=PG&f=1", "display_name": "henry86", "link": "https://stackoverflow.com/users/4662200/henry86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550579026, "creation_date": 1548756700, "question_id": 54418585, "link": "https://stackoverflow.com/questions/54418585/include-js-dependencies-in-kotlin-js", "title": "Include js dependencies in kotlin-js", "body": "<p>I want to incude javascript dependencies in my kotlinjs project. (concret : <a href=\"https://airbnb.io/polyglot.js/\" rel=\"nofollow noreferrer\">https://airbnb.io/polyglot.js/</a> but others as well).</p>\n\n<p>My kotlinjs Project is a gradle Project, developed in IntelliJ Idea. </p>\n\n<p>I've searched one day now, but I wasn't able to find any clue, how I can add this dependency and work with the methods from the js library.</p>\n\n<p>Is it even possible? It should, shouldn't it?</p>\n"}, {"tags": ["android", "kotlin", "notifications", "height"], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 4224024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-kELgIBdpawA/AAAAAAAAAAI/AAAAAAAAAFY/UXbpB5ymDKc/photo.jpg?sz=128", "display_name": "Liar", "link": "https://stackoverflow.com/users/4224024/liar"}, "is_accepted": false, "score": 2, "last_activity_date": 1548753661, "creation_date": 1548753661, "answer_id": 54417581, "question_id": 54417096, "link": "https://stackoverflow.com/questions/54417096/android-max-size-of-custom-notification/54417581#54417581", "title": "Android max. size of custom notification", "body": "<p><code>Notification</code> (your <code>RemoteView</code>) that you see is created by another process and only that process can know the size</p>\n\n<p>There is no official way to get the max height for custom notification. I think the only way you can do is to reduce the text size</p>\n"}, {"tags": [], "owner": {"reputation": 826, "user_id": 5142776, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AZ6X1.jpg?s=128&g=1", "display_name": "Ahmed na", "link": "https://stackoverflow.com/users/5142776/ahmed-na"}, "is_accepted": false, "score": 0, "last_activity_date": 1585900177, "creation_date": 1585900177, "answer_id": 61007280, "question_id": 54417096, "link": "https://stackoverflow.com/questions/54417096/android-max-size-of-custom-notification/61007280#61007280", "title": "Android max. size of custom notification", "body": "<p>They are cut off because of the actions you are adding \ntry to remove the actions you will get your full 256/64 dp.</p>\n"}], "owner": {"reputation": 61, "user_id": 10983237, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NVbt45NuEFg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOHiPo33rnOFJSYw51b3OKuMf6mIw/mo/photo.jpg?sz=128", "display_name": "Michael Tran", "link": "https://stackoverflow.com/users/10983237/michael-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1658, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1585900177, "creation_date": 1548751994, "last_edit_date": 1548767885, "question_id": 54417096, "link": "https://stackoverflow.com/questions/54417096/android-max-size-of-custom-notification", "title": "Android max. size of custom notification", "body": "<p>I'm trying to create some custom notifications for my app.</p>\n\n<blockquote>\n  <p>Usually collapsed view layouts are limited to 64 dp, and expanded view layouts are limited to 256 dp.</p>\n</blockquote>\n\n<p>Although I considered these restrictions, it seems that the notification is cut off on several phones as you can see in the screenshots below. \nI did some research on that because I thought there are also restrictions depending on different manufacturers or UIs, but couldn't find anything.</p>\n\n<p>That's how it is implemented:</p>\n\n<pre><code>// 64dp is set for height\nval collapsedView = RemoteViews(packageName, R.layout.custom_notification_collapsed)\n// 256dp is set for height\nval expandedView = RemoteViews(packageName, R.layout.custom_notification_expanded)\n\nval customNotification: Notification = NotificationCompat.Builder(this, \"default\")\n        .setSmallIcon(R.drawable.ic_launcher_background)\n        .addAction(R.drawable.ic_map, \"Personal\", PendingIntent.getService(this, 0, personalIntent, PendingIntent.FLAG_UPDATE_CURRENT))\n        .addAction(R.drawable.ic_map, \"Business\", PendingIntent.getService(this, 0, businessIntent, PendingIntent.FLAG_UPDATE_CURRENT))\n        .addAction(R.drawable.ic_map, \"Work\", PendingIntent.getService(this, 0, businessIntent, PendingIntent.FLAG_UPDATE_CURRENT))\n        .setColor(Color.parseColor(\"#00D8FF\"))\n        .setStyle(NotificationCompat.DecoratedCustomViewStyle())\n        .setCustomContentView(collapsedView)\n        .setCustomBigContentView(expandedView)\n        .build()\n\nnotificationManager.notify(4, customNotification)\n</code></pre>\n\n<p>Here's the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qnio2.png\" rel=\"nofollow noreferrer\">Xiaomi Mi Mix2</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZKqH0.jpg\" rel=\"nofollow noreferrer\">Samsung Galaxy Note 8</a></p>\n\n<p>Now the questions are:\nDid I fail the implementation somehow?\nIf not, is there a way to figure out the max. notification height for a current phone programmatically?</p>\n"}, {"tags": ["kotlin", "kotlin-coroutines"], "comments": [{"owner": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 5, "creation_date": 1555861119, "post_id": 54416840, "comment_id": 98239086, "body": "You can go through this article for more details. <a href=\"https://medium.com/@elizarov/coroutine-context-and-scope-c8b255d59055\" rel=\"nofollow noreferrer\">medium.com/@elizarov/coroutine-context-and-scope-c8b255d5905&zwnj;&#8203;5</a>"}, {"owner": {"reputation": 1623, "user_id": 4936616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1IFsX.jpg?s=128&g=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/4936616/jose"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 1, "creation_date": 1555919066, "post_id": 54416840, "comment_id": 98251320, "body": "Thank you @mallaudin for sharing this. Exactly what I was looking for. What else we need if we hear from its makers. ;)"}, {"owner": {"reputation": 20852, "user_id": 544406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/dPN4O.jpg?s=128&g=1", "display_name": "Dmitry Ryadnenko", "link": "https://stackoverflow.com/users/544406/dmitry-ryadnenko"}, "reply_to_user": {"reputation": 4205, "user_id": 2622118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/425bb7d5bd7c5370ba53200dc40f11de?s=128&d=identicon&r=PG", "display_name": "mallaudin", "link": "https://stackoverflow.com/users/2622118/mallaudin"}, "edited": false, "score": 0, "creation_date": 1591176134, "post_id": 54416840, "comment_id": 109952727, "body": "@mallaudin This should be an accepted answer I think."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 8, "last_activity_date": 1548751838, "creation_date": 1548751838, "answer_id": 54417048, "question_id": 54416840, "link": "https://stackoverflow.com/questions/54416840/kotlin-coroutines-scope-vs-coroutine-context/54417048#54417048", "title": "Kotlin: Coroutines scope vs Coroutine context", "body": "<p><code>CoroutineScope</code> has-a <code>CoroutineContext</code>. </p>\n\n<p>For example if you have:</p>\n\n<pre><code>runBlocking { // defines coroutineScope\n\n    launch(Dispatchers.Default) { //inherits coroutineScope but changes context\n\n    }\n}\n</code></pre>\n\n<p><code>runBlocking</code> defines a <code>CoroutineScope</code> (learn about it <a href=\"https://stackoverflow.com/a/53413431/8073652\">here</a>) which <code>launch</code> inherits. The context is being overridden by explicitly specifying a dispatcher here. If you look at the definition of <code>launch</code>, you can see that it takes an optional <code>CoroutineContext</code>:</p>\n\n<pre><code>public fun CoroutineScope.launch(\n    context: CoroutineContext = EmptyCoroutineContext,\n    ...\n)\n</code></pre>\n\n<p>Another part of the context would be the coroutine's name:</p>\n\n<pre><code>launch(CoroutineName(\"launchMe\") + Dispatchers.Default) {\n    println(\"\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 28, "last_activity_date": 1548755948, "last_edit_date": 1548755948, "creation_date": 1548755610, "answer_id": 54418265, "question_id": 54416840, "link": "https://stackoverflow.com/questions/54416840/kotlin-coroutines-scope-vs-coroutine-context/54418265#54418265", "title": "Kotlin: Coroutines scope vs Coroutine context", "body": "<p>They are indeed closely related. You might say that <code>CoroutineScope</code> formalizes the way the <code>CoroutineContext</code> is inherited.</p>\n\n<p><code>CoroutineScope</code> has no data on its own, it just holds a <code>CoroutineContext</code>. Its key role is as the implicit receiver of the block you pass to <code>launch</code>, <code>async</code> etc.</p>\n\n<p>See this example:</p>\n\n<pre><code>runBlocking {\n    val scope0 = this\n    // scope0 is the top-level coroutine scope.\n    scope0.launch {\n        val scope1 = this\n        // scope1 inherits its context from scope0. It replaces the Job field\n        // with its own job, which is a child of the job in scope0.\n        // It retains the Dispatcher field so the launched coroutine uses\n        // the dispatcher created by runBlocking.\n        scope1.launch {\n            val scope2 = this\n            // scope2 inherits from scope1\n        }\n    }\n}\n</code></pre>\n\n<p>You can see how the <code>CoroutineScope</code> mediates the inheritance of coroutine contexts. If you cancel the job in <code>scope1</code>, this will propagate to <code>scope2</code> and will cancel the <code>launch</code>ed job as well.</p>\n\n<p>Note the key syntactical feature: I explicitly wrote <code>scope0.launch</code>, but had I written just <code>launch</code>, it would implicitly mean exactly the same thing. This is how <code>CoroutineScope</code> helps to \"automatically\" propagate the scope.</p>\n"}, {"comments": [{"owner": {"reputation": 25612, "user_id": 423105, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ced7f76fd1b5573ce3bdce2f3392df04?s=128&d=identicon&r=PG", "display_name": "LarsH", "link": "https://stackoverflow.com/users/423105/larsh"}, "edited": false, "score": 3, "creation_date": 1589835504, "post_id": 61154421, "comment_id": 109446647, "body": "I think when you say there are four options for context, what you mean is there are four options for the Dispatcher that you can pass via the context parameter. That parameter can be used for other things besides dispatcher, e.g. job or coroutine name. None of those is a context itself; they are elements of a context (which is used to augment the parent context)."}], "tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 18, "last_activity_date": 1586791684, "last_edit_date": 1586791684, "creation_date": 1586596148, "answer_id": 61154421, "question_id": 54416840, "link": "https://stackoverflow.com/questions/54416840/kotlin-coroutines-scope-vs-coroutine-context/61154421#61154421", "title": "Kotlin: Coroutines scope vs Coroutine context", "body": "<p>Yes, in priciple you are right, here more details.</p>\n\n<p><strong>Scope</strong></p>\n\n<ul>\n<li>a coroutine must run in a scope</li>\n<li>it is a way to keep track of all coroutines that run in it</li>\n<li>all (<a href=\"https://kotlinlang.org/docs/reference/coroutines/cancellation-and-timeouts.html#cancellation-is-cooperative\" rel=\"noreferrer\">cooperative</a>) coroutines can be cancelled via their scope</li>\n<li>scopes get uncaught exceptions</li>\n<li>they are a way to bind coroutines to an application specific lifecycle (e.g. <a href=\"https://developer.android.com/topic/libraries/architecture/coroutines#viewmodelscope\" rel=\"noreferrer\"><code>viewModelScope</code></a> in Android) to avoid leaking</li>\n</ul>\n\n<p><strong>Context</strong></p>\n\n<p>The context determines on which thread the coroutines will run. There are four options:</p>\n\n<ul>\n<li><strong><code>Dispatchers.Default</code></strong> - for CPU intense work (e.g. sorting a big list)</li>\n<li><strong><code>Dispatchers.Main</code></strong> - what this will be depends on what you've added to your programs runtime dependencies (e.g. <a href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/ui/kotlinx-coroutines-android\" rel=\"noreferrer\"><code>kotlinx-coroutines-android</code></a>, for the UI thread in Android)</li>\n<li><strong><code>Dispatchers.Unconfined</code></strong> - runs coroutines unconfined on no specific thread </li>\n<li><strong><code>Dispatchers.IO</code></strong> - for heavy IO work (e.g. long-running database queries) </li>\n</ul>\n\n<p>The following example brings both scope and context together. It creates a new scope in which the coroutines will run (if not changed) on a thread designated for IO work and cancels them via their scope.</p>\n\n<pre><code>val scope = CoroutineScope(context = Dispatchers.IO) \nval job = scope.launch {\n    val result = suspendFunc1()\n    suspendFunc2(result)\n}\n// ...\nscope.cancel() // suspendFunc1() and suspendFunc2() will be cancelled\n</code></pre>\n"}], "owner": {"reputation": 1623, "user_id": 4936616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1IFsX.jpg?s=128&g=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/4936616/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8923, "favorite_count": 5, "answer_count": 3, "score": 33, "last_activity_date": 1586791684, "creation_date": 1548751022, "last_edit_date": 1552906803, "question_id": 54416840, "link": "https://stackoverflow.com/questions/54416840/kotlin-coroutines-scope-vs-coroutine-context", "title": "Kotlin: Coroutines scope vs Coroutine context", "body": "<p>Can anyone explain the difference between them? I think scope provides a reference(e.g. Job) to cancel them and context provides a reference to underlying thread. Is that so?</p>\n"}, {"tags": ["android", "kotlin", "bitmap", "imageview"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 1, "creation_date": 1548750475, "post_id": 54416680, "comment_id": 95643253, "body": "you call <code>decodeFile</code> - a &quot;file&quot; here is something in your local filesystem - not a resource pointed by <code>http:&#47;&#47;xxx</code> uri - you can use <a href=\"http://square.github.io/picasso/\" rel=\"nofollow noreferrer\">picasso</a> in such cases"}, {"owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "edited": false, "score": 1, "creation_date": 1548750531, "post_id": 54416680, "comment_id": 95643271, "body": "try using <code>Glide</code> <a href=\"https://medium.com/@vlonjatgashi/using-glide-with-kotlin-5e345b557547\" rel=\"nofollow noreferrer\">medium.com/@vlonjatgashi/using-glide-with-kotlin-5e345b55754&zwnj;&#8203;7</a>"}, {"owner": {"reputation": 1968, "user_id": 2164363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C8NQn.png?s=128&g=1", "display_name": "Bach Vu", "link": "https://stackoverflow.com/users/2164363/bach-vu"}, "edited": false, "score": 0, "creation_date": 1548750589, "post_id": 54416680, "comment_id": 95643300, "body": "That is an url, so you need to download it first before showing it. Consider using image loader library like <code>Glide</code> to handle these tasks for you"}, {"owner": {"reputation": 9541, "user_id": 1568530, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001179991520/picture?type=large", "display_name": "Vladyslav Matviienko", "link": "https://stackoverflow.com/users/1568530/vladyslav-matviienko"}, "edited": false, "score": 0, "creation_date": 1548750789, "post_id": 54416680, "comment_id": 95643394, "body": "<code>decodeFile</code> can&#39;t handle internet locations"}], "answers": [{"tags": [], "owner": {"reputation": 1090, "user_id": 4224024, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-kELgIBdpawA/AAAAAAAAAAI/AAAAAAAAAFY/UXbpB5ymDKc/photo.jpg?sz=128", "display_name": "Liar", "link": "https://stackoverflow.com/users/4224024/liar"}, "is_accepted": true, "score": 1, "last_activity_date": 1548751103, "creation_date": 1548751103, "answer_id": 54416856, "question_id": 54416680, "link": "https://stackoverflow.com/questions/54416680/image-not-getting-displayed-in-imageview/54416856#54416856", "title": "Image not getting displayed in imageView", "body": "<p><code>BitmapFactory.decodeFile</code> can not handle url</p>\n\n<p>To load image from url you can use <a href=\"https://github.com/bumptech/glide\" rel=\"nofollow noreferrer\">Glide</a>, this library is recommended by Google. From doc:</p>\n\n<blockquote>\n  <p>Note: There are several libraries that follow best practices for\n  loading images. You can use these libraries in your app to load images\n  in the most optimized manner. We recommend the Glide library</p>\n</blockquote>\n\n<p>Add Glide to your project:</p>\n\n<pre><code>dependencies {\n  implementation 'com.github.bumptech.glide:glide:4.8.0'\n  annotationProcessor 'com.github.bumptech.glide:compiler:4.8.0'\n}\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>Glide.with(context)\n.load(obj?.image?.url.toString())\n.into(imagePhoto)\n</code></pre>\n"}], "owner": {"reputation": 10133, "user_id": 5156075, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5z8FN.jpg?s=128&g=1", "display_name": "John Joe", "link": "https://stackoverflow.com/users/5156075/john-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1548751621, "accepted_answer_id": 54416856, "answer_count": 1, "score": 0, "last_activity_date": 1548751658, "creation_date": 1548750361, "question_id": 54416680, "link": "https://stackoverflow.com/questions/54416680/image-not-getting-displayed-in-imageview", "closed_reason": "Duplicate", "title": "Image not getting displayed in imageView", "body": "<p>Why my image not getting displayed in imageView?</p>\n\n<pre><code>    var image : Bitmap?=null\n\n    longToast(obj?.image?.url.toString())\n\n    try {\n        image = BitmapFactory.decodeFile(obj?.image?.url.toString())\n        imagePhoto.setImageBitmap(image)\n        longToast(\"abc\")\n    } catch (e: Exception) {\n        e.message\n    }\n</code></pre>\n\n<p>The image is not null as I saw the <code>toast</code> displayed </p>\n\n<pre><code>https://...../tempory.jpg\n</code></pre>\n"}, {"tags": ["java", "spring-boot", "kotlin", "jooq", "flyway"], "owner": {"reputation": 26106, "user_id": 485337, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/VAz9B.jpg?s=128&g=1", "display_name": "Adam Arold", "link": "https://stackoverflow.com/users/485337/adam-arold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1548759148, "creation_date": 1548749282, "last_edit_date": 1548759148, "question_id": 54416418, "link": "https://stackoverflow.com/questions/54416418/how-to-run-flyway-migrate-before-jooq-code-generation-using-spring-boot", "title": "How to run Flyway migrate before jOOQ code generation using Spring Boot?", "body": "<p>I'm trying to use Flyway and jOOQ together with Spring Boot (<code>spring-boot-starter-jooq</code> and autoconfigured Flyway both handled by Spring)</p>\n\n<p>My problem is that the jOOQ code generation runs before Flyway migrate, so jOOQ doesn't see the changes made by Flyway.</p>\n\n<p>I tried setting <code>dependsOn</code> for the jOOQ generator task to <code>flywayMigrate</code> but as it turns out Flyway is run only on startup. The Flyway Gradle plugin is not applied, so I have no <code>flywayMigrate</code> task.</p>\n\n<p>When I tried adding it to my gradle config following the official Flyway guide:</p>\n\n<pre><code>apply plugin: \"org.flywaydb.flyway\"\n\nflyway {\n    url = 'jdbc:postgresql://localhost:5432/myDb'\n    user = 'myUsr'\n    password = 'mySecretPwd'\n    schemas = ['public']\n}\n</code></pre>\n\n<p>I get an exception:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: org.flywaydb.core.internal.util.jdbc.DriverDataSource\n</code></pre>\n\n<p>What am I doing wrong? How do I set this up so they work together nicely?</p>\n\n<p>Note that I have the PostgreSQL driver and Flyway Core as a dependency:</p>\n\n<pre><code>implementation \"org.postgresql:postgresql:42.2.5\"\nimplementation \"org.flywaydb:flyway-core\"\n</code></pre>\n\n<p>so it should work. This is probably a Gradle vs Flyway vs Spring issue, because Flyway works when I start up my Spring app.</p>\n"}, {"tags": ["javascript", "kotlin"], "comments": [{"owner": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "edited": false, "score": 1, "creation_date": 1548749306, "post_id": 54416192, "comment_id": 95642718, "body": "Kotlin and Javascript are just languages. When you compile kotlin to javascript, it is translated to a javascript file and you can use the javascript file anywhere directly."}, {"owner": {"reputation": 594, "user_id": 1387330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aOvtn.jpg?s=128&g=1", "display_name": "Denis Voloshin", "link": "https://stackoverflow.com/users/1387330/denis-voloshin"}, "reply_to_user": {"reputation": 3155, "user_id": 10317684, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1vZU7dxLnug/AAAAAAAAAAI/AAAAAAAAATs/NO0fprNnb6s/photo.jpg?sz=128", "display_name": "Ricky Mo", "link": "https://stackoverflow.com/users/10317684/ricky-mo"}, "edited": false, "score": 0, "creation_date": 1548753103, "post_id": 54416192, "comment_id": 95644623, "body": "Thanks for replying, my intention was to figure out not how Kotlin is interpreted to JS but what lib it is using when I need to eval JS static code from Kotlin. I don&#39;t believe Kotlin does with it something, I wouldn&#39;t expect to see some JS engine, like Rhino for JAVA"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1548765688, "post_id": 54416192, "comment_id": 95652253, "body": "What do you mean by &quot;eval JS static code from Kotlin&quot;? The js() function supporting inline JavaScript is only available in Kotlin/JS. Kotlin/JVM and Kotlin/Native do not have any features for evaluating JS code."}, {"owner": {"reputation": 594, "user_id": 1387330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aOvtn.jpg?s=128&g=1", "display_name": "Denis Voloshin", "link": "https://stackoverflow.com/users/1387330/denis-voloshin"}, "edited": false, "score": 0, "creation_date": 1548772402, "post_id": 54416192, "comment_id": 95656619, "body": "according to the doc <a href=\"http://kotlinlang.org/docs/reference/whatsnew11.html#javaxscript-support\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a> the javascript could be eval not only using js()"}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 935509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJIfF.jpg?s=128&g=1", "display_name": "kzm", "link": "https://stackoverflow.com/users/935509/kzm"}, "is_accepted": true, "score": 1, "last_activity_date": 1550582273, "creation_date": 1550582273, "answer_id": 54767263, "question_id": 54416192, "link": "https://stackoverflow.com/questions/54416192/kotlin-javascript-engine-implementation/54767263#54767263", "title": "Kotlin JavaScript Engine implementation", "body": "<p>JavaScript engine is provided by JDK. It can be:</p>\n\n<ul>\n<li>Rhino before JDK 8</li>\n<li>Nashorn <a href=\"https://openjdk.java.net/jeps/174\" rel=\"nofollow noreferrer\">since JDK 8</a></li>\n<li>Deprecated <a href=\"https://openjdk.java.net/jeps/335\" rel=\"nofollow noreferrer\">since JDK 11</a></li>\n</ul>\n\n<p>You can find out script engine for your JDK using:</p>\n\n<pre><code>val engine = javax.script.ScriptEngineManager().getEngineByName(\"JavaScript\")\n\nprintln(engine::class) // class jdk.nashorn.api.scripting.NashornScriptEngine\n</code></pre>\n"}], "owner": {"reputation": 594, "user_id": 1387330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aOvtn.jpg?s=128&g=1", "display_name": "Denis Voloshin", "link": "https://stackoverflow.com/users/1387330/denis-voloshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 54767263, "answer_count": 1, "score": 0, "last_activity_date": 1550582273, "creation_date": 1548748327, "question_id": 54416192, "link": "https://stackoverflow.com/questions/54416192/kotlin-javascript-engine-implementation", "title": "Kotlin JavaScript Engine implementation", "body": "<p>Does anyone know which JavaScript engine Kotlin is using to evaluate Javascript? I found the following class</p>\n\n<pre><code>KotlinJsr223ScriptEngineFactoryExamples.kt\n</code></pre>\n\n<p>looking at the class source <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/tools/kotlin-script-util/src/main/kotlin/org/jetbrains/kotlin/script/jsr223/KotlinJsr223ScriptEngineFactoryExamples.kt\" rel=\"nofollow noreferrer\">KotlinJsr223ScriptEngineFactoryExamples.kt</a> could see the following dependency </p>\n\n<pre><code>import javax.script.Bindings\nimport javax.script.ScriptContext\nimport javax.script.ScriptEngine\n</code></pre>\n\n<p>I'm wondering whether Kotlin is based on already existing Javascript Engines like Nashorn or Rhino or it's running its own implementation. I'm considering to port my lib to Korlin, the performance is extremely important for me, base on my tests Hashorn is losing to Rhino. So I want to find out, what engine Kotlin is executing behind the senses.</p>\n\n<p>Thanks in advance </p>\n"}, {"tags": ["kotlin", "arrow-kt"], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 9164471, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IY5Hr42LB7Q/AAAAAAAAAAI/AAAAAAAAAHc/sk_5_2q1nCU/photo.jpg?sz=128", "display_name": "Rene", "link": "https://stackoverflow.com/users/9164471/rene"}, "is_accepted": true, "score": 6, "last_activity_date": 1548743381, "last_edit_date": 1548743381, "creation_date": 1548743075, "answer_id": 54415013, "question_id": 54414769, "link": "https://stackoverflow.com/questions/54414769/are-there-elegant-ways-to-turn-a-list-into-a-nonemptylist-in-kotlin-and-arrow/54415013#54415013", "title": "Are there elegant ways to turn a List into a NonEmptyList in kotlin and arrow?", "body": "<p>There is a companion function <a href=\"https://github.com/arrow-kt/arrow/blob/master/modules/core/arrow-extras/src/main/kotlin/arrow/data/NonEmptyList.kt#L91\" rel=\"noreferrer\"><code>fromList</code></a> that return an <code>Option&lt;NonEmptyList&gt;</code> or if you are sure use <code>fromListUnsafe</code>:</p>\n\n<pre><code>val list = listOf(1, 2, 3, 4, 5)\n\nval nelistOption = NonEmptyList.fromList(list)\n\nval nelist = NonEmptyList.fromListUnsafe(list)\n</code></pre>\n"}], "owner": {"reputation": 1289, "user_id": 6686126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dIaui.jpg?s=128&g=1", "display_name": "galcyurio", "link": "https://stackoverflow.com/users/6686126/galcyurio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 54415013, "answer_count": 1, "score": 0, "last_activity_date": 1548743381, "creation_date": 1548741896, "question_id": 54414769, "link": "https://stackoverflow.com/questions/54414769/are-there-elegant-ways-to-turn-a-list-into-a-nonemptylist-in-kotlin-and-arrow", "title": "Are there elegant ways to turn a List into a NonEmptyList in kotlin and arrow?", "body": "<pre><code>fun main() {\n    val list = listOf(1, 2, 3, 4, 5) \n\n    if (list.isNotEmpty()) {\n        Nel(list[0], list.subList(1, list.lastIndex))\n    }\n}\n</code></pre>\n\n<p>According to arrow documents, it seems be able to do it through <code>Semigroup</code> or <code>Monad binding</code>. \nHowever, there is no code to replace <code>List</code> with <code>NonEmptyList</code>.</p>\n\n<p>Is there a better way to replace <code>List</code> with<code>NonEmptyList</code> without using <code>subList</code>?</p>\n"}, {"tags": ["java", "android", "kotlin", "android-linearlayout"], "answers": [{"comments": [{"owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "edited": false, "score": 0, "creation_date": 1548747091, "post_id": 54414834, "comment_id": 95641699, "body": "No it&#39;s not this linear layout that I want in vertical, it&#39;s the subclass"}], "tags": [], "owner": {"reputation": 1868, "user_id": 10395392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZkM2.jpg?s=128&g=1", "display_name": "Vishal Arora", "link": "https://stackoverflow.com/users/10395392/vishal-arora"}, "is_accepted": false, "score": 0, "last_activity_date": 1548742158, "creation_date": 1548742158, "answer_id": 54414834, "question_id": 54414709, "link": "https://stackoverflow.com/questions/54414709/android-subclass-linearlayout-do-not-set-vertically/54414834#54414834", "title": "Android: Subclass linearLayout do not set vertically", "body": "<p>You need to set orientation to vertical on the following var in your code - </p>\n\n<pre><code>val linearLayout = LinearLayout(context).apply {\n    layoutParams = linearParams\n}\nlinearlayout.orientation = VERTICAL\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1548770351, "post_id": 54418748, "comment_id": 95655259, "body": "Putting it last might solve the problem, but you most certainly did not fix the true issue. I suspect some local val did over-write a <code>this</code> property.."}, {"owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1548770465, "post_id": 54418748, "comment_id": 95655334, "body": "Possible that there is a conflict between the two and that he is confused"}], "tags": [], "owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "is_accepted": true, "score": 0, "last_activity_date": 1548757221, "creation_date": 1548757221, "answer_id": 54418748, "question_id": 54414709, "link": "https://stackoverflow.com/questions/54414709/android-subclass-linearlayout-do-not-set-vertically/54418748#54418748", "title": "Android: Subclass linearLayout do not set vertically", "body": "<p><strong>Solution</strong></p>\n\n<p>It's weird but changing the position of the functions, by calling <code>setLinearLayout()</code> last it works</p>\n\n<p>Code:</p>\n\n<pre><code>fun setup() {\n    floatingBtn()\n    addBtn()\n    setLinearLayout()\n}\n</code></pre>\n"}], "owner": {"reputation": 1685, "user_id": 10512612, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-54XhkqmYEIo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDZmaNhR610yi-CtiuzNW3HEqCCDA/mo/photo.jpg?sz=128", "display_name": "Mickael Belhassen", "link": "https://stackoverflow.com/users/10512612/mickael-belhassen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54418748, "answer_count": 2, "score": 0, "last_activity_date": 1548757221, "creation_date": 1548741597, "question_id": 54414709, "link": "https://stackoverflow.com/questions/54414709/android-subclass-linearlayout-do-not-set-vertically", "title": "Android: Subclass linearLayout do not set vertically", "body": "<p>I want to translate my code xml below, but in code that does not give me the same result, see the picture, left is the result in code, and right is the result in xml:</p>\n\n<p><a href=\"https://i.stack.imgur.com/REbvX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/REbvX.png\" alt=\"Result\"></a></p>\n\n<p>Here is my subclass:</p>\n\n<pre><code>class FloatingButtonMultiple : LinearLayout {\n\nconstructor(context: Context) : super(context) {\n    setup()\n}\n\nconstructor(context: Context, @Nullable attrs: AttributeSet?) : super(context, attrs) {\n    setup()\n}\n\nconstructor(context: Context, @Nullable attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n    setup()\n}\n\n\n// MARK: - Set view\n\nfun setup() {\n    setLinearLayout()\n    floatingBtn()\n    addBtn()\n}\n\nprivate fun setLinearLayout() {\n    val params = RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT).apply {\n        addRule(RelativeLayout.ALIGN_PARENT_BOTTOM)\n    }\n\n    orientation = VERTICAL\n\n    this.layoutParams = params\n}\n\nprivate fun addBtn() {\n    val linearParams = LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT).apply {\n        gravity = Gravity.END\n        orientation = HORIZONTAL\n    }\n\n    val linearLayout = LinearLayout(context).apply {\n        layoutParams = linearParams\n    }\n\n    // CardView\n    val cardParams = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT).apply {\n        topMargin = 8.toDp\n        marginEnd = 10.toDp\n    }\n\n    val cardView = CardView(context).apply {\n        setCardBackgroundColor(Color.parseColor(\"#C4000000\"))\n        layoutParams = cardParams\n    }\n\n    //TextView\n    val txtParams = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT).apply {\n        marginStart = 8.toDp\n        marginEnd = 8.toDp\n    }\n\n    val txt = TextView(context).apply {\n        text = \"AAAAA\"\n        setTextColor(Color.WHITE)\n        layoutParams = txtParams\n    }\n\n    cardView.addView(txt)\n\n    linearLayout.addView(cardView)\n\n    //Btn\n    val btnParams = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT).apply {\n        bottomMargin = 8.toDp\n        marginEnd = 29.toDp\n    }\n\n    val btn = FloatingActionButton(context).apply {\n        size = FloatingActionButton.SIZE_MINI\n        layoutParams = btnParams\n    }\n\n    linearLayout.addView(btn)\n\n    this.addView(linearLayout)\n}\n\nprivate fun floatingBtn() {\n    val params = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT).apply {\n        gravity = Gravity.END\n        marginEnd = 20.toDp\n        bottomMargin = 20.toDp\n    }\n\n    val btn = FloatingActionButton(context).apply {\n        layoutParams = params\n    }\n\n    this.addView(btn)\n}\n</code></pre>\n\n<p>Here my xml code:</p>\n\n<pre><code>    &lt;LinearLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentBottom=\"true\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:gravity=\"end\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;android.support.v7.widget.CardView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"8dp\"\n            android:layout_marginEnd=\"10dp\"\n            app:cardBackgroundColor=\"#C4000000\"&gt;\n\n            &lt;TextView\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:layout_marginStart=\"8dp\"\n                android:layout_marginEnd=\"8dp\"\n                android:text=\"AAAA\"\n                android:textColor=\"#fff\" /&gt;\n\n        &lt;/android.support.v7.widget.CardView&gt;\n\n        &lt;android.support.design.widget.FloatingActionButton\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginEnd=\"29dp\"\n            android:layout_marginBottom=\"8dp\"\n            app:fabSize=\"mini\" /&gt;\n\n    &lt;/LinearLayout&gt;\n\n\n    &lt;android.support.design.widget.FloatingActionButton\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"end\"\n        android:layout_marginEnd=\"20dp\"\n        android:layout_marginBottom=\"20dp\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>I do not understand I think I translated exactly the code xml code? Where is the problem? Why my subclass does not go vertical when I set it in the function <code>setLinearLayout()</code></p>\n"}, {"tags": ["apache-spark", "kotlin", "apache-spark-sql"], "answers": [{"comments": [{"owner": {"reputation": 45645, "user_id": 1056563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bc888aa658ab0e0d2a4d305ad7f69123?s=128&d=identicon&r=PG", "display_name": "StephenBoesch", "link": "https://stackoverflow.com/users/1056563/stephenboesch"}, "edited": false, "score": 0, "creation_date": 1586215991, "post_id": 54416319, "comment_id": 108042355, "body": "Have you created <code>udf</code>s in <code>kotlin</code> for use with <code>DataFrame</code>&#39;s ? that would be quite interesting to see"}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 6, "last_activity_date": 1548748872, "creation_date": 1548748872, "answer_id": 54416319, "question_id": 54414604, "link": "https://stackoverflow.com/questions/54414604/programming-apache-spark-2-0-with-kotlin/54416319#54416319", "title": "Programming Apache spark 2.0 with kotlin", "body": "<blockquote>\n  <p>Is it possible to use Kotlin for programming in Spark 2.0? </p>\n</blockquote>\n\n<p>Yes, it's a JVM language with very good Java interoperation, and Spark can be used from Java.</p>\n\n<blockquote>\n  <p>If yes, How can I do that? </p>\n</blockquote>\n\n<p>Take the Java examples (not the Scala ones) and <a href=\"https://www.jetbrains.com/help/idea/converting-a-java-file-to-kotlin-file.html\" rel=\"noreferrer\">convert them to Kotlin</a>. </p>\n\n<pre><code>SparkSession sc = SparkSession.builder()\n</code></pre>\n\n<p>isn't legal Kotlin (and wouldn't produce the error you give, since it doesn't have any mention of <code>sparkSession</code>). It should be </p>\n\n<pre><code>val sc = ...\n</code></pre>\n\n<p>or </p>\n\n<pre><code>val sc: SparkSession = ...\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10978027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQWne.jpg?s=128&g=1", "display_name": "david_js", "link": "https://stackoverflow.com/users/10978027/david-js"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2365, "favorite_count": 0, "accepted_answer_id": 54416319, "answer_count": 1, "score": 4, "last_activity_date": 1548748872, "creation_date": 1548740934, "question_id": 54414604, "link": "https://stackoverflow.com/questions/54414604/programming-apache-spark-2-0-with-kotlin", "title": "Programming Apache spark 2.0 with kotlin", "body": "<p>I want to use kotlin for programming in Spark 2.0.  </p>\n\n<p>I added spark's jar files and I can use JavaSparkContext in my code but Can not use kotlin in spark 2.0.</p>\n\n<p>when I use SparkSession like this:</p>\n\n<pre><code>SparkSession sc = SparkSession.builder(). ...\n</code></pre>\n\n<p>I get this error: Unresolved refrence: sparkSession</p>\n\n<p>Is it possible to use Kotlin for programming in Spark 2.0? If yes, How can I do that? </p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 945, "user_id": 394842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f635789c47f734898a6e8dd16052dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Genevieve", "link": "https://stackoverflow.com/users/394842/genevieve"}, "edited": false, "score": 0, "creation_date": 1548771831, "post_id": 54413783, "comment_id": 95656249, "body": "Oh thank god, had no idea that&#39;s how enum classes can be used. Works perfectly thanks!!!"}], "tags": [], "owner": {"reputation": 112, "user_id": 5797453, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XS_Huu0veEg/AAAAAAAAAAI/AAAAAAAAAeY/IFkLpl2p3y0/photo.jpg?sz=128", "display_name": "Saurabh Patel", "link": "https://stackoverflow.com/users/5797453/saurabh-patel"}, "is_accepted": true, "score": 1, "last_activity_date": 1548744148, "last_edit_date": 1548744148, "creation_date": 1548735464, "answer_id": 54413783, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter/54413783#54413783", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>enum creates a new class so you can use it as function argument type, as shown below.\nFor functions in kotlin see <a href=\"https://kotlinlang.org/docs/reference/functions.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>fun getHexColor (x : Color)\n{\n    when(x){\n        Color.BLUE -&gt; println(\"Battle\")\n        else -&gt; print(\"otherwise\")\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2796, "user_id": 7508302, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bHYHM.jpg?s=128&g=1", "display_name": "Cililing", "link": "https://stackoverflow.com/users/7508302/cililing"}, "is_accepted": false, "score": 0, "last_activity_date": 1548741993, "creation_date": 1548741993, "answer_id": 54414792, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter/54414792#54414792", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>Enum is actually special kind of class (it is even called <code>enum class</code>). So, use it as normal class and use benefits you get from it.</p>\n\n<p>Example:</p>\n\n<pre><code>enum class X {\n    X, Y\n}\n\nfun check(param: X) {\n    val unit = when (param) {\n        X.X -&gt; println(\"x\")\n        X.Y -&gt; println('y')\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1267, "user_id": 6026222, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/uvycL.jpg?s=128&g=1", "display_name": "aleksandrbel", "link": "https://stackoverflow.com/users/6026222/aleksandrbel"}, "is_accepted": false, "score": 0, "last_activity_date": 1548841336, "last_edit_date": 1548841336, "creation_date": 1548748513, "answer_id": 54416246, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter/54416246#54416246", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>You are able to do it like this with an interface for example:</p>\n\n<pre><code>enum class Color(val rgb: Int): IHexColor {\n\n    RED(0xFF0000){\n        override fun getHexColor() = rgb.toString()\n    },\n    GREEN(0x00FF00){\n        override fun getHexColor(): String = rgb.toString()\n    },\n    BLUE(0x0000FF){\n        override fun getHexColor(): String = rgb.toString()\n    }\n}\n\ninterface IHexColor {\n    fun getHexColor(): String\n}\n\n@Test\nfun testBasic() {\n    val red = Color.RED\n    val green = Color.GREEN\n    val blue = Color.BLUE\n\n    val palette = arrayListOf(red, green, blue)\n\n    palette.forEach {\n        println(\"Color: $it :: hex - ${it.getHexColor()}\")\n    }\n}\n\n// output =&gt; Color: RED :: hex - 16711680, Color: GREEN :: hex - 65280, Color: BLUE :: hex - 255\n</code></pre>\n\n<p>How to use enum class:</p>\n\n<pre><code>fun useColorClass(color: Color){\n    println(color.rgb)\n}\n\n@Test\nfun testColor() {\n    useColorClass(Color.RED)\n    useColorClass(Color.BLUE)\n    useColorClass(Color.GREEN)\n}\n\n// output =&gt; 16711680, 255, 65280\n</code></pre>\n\n<p><strong>An answer for your question:</strong> </p>\n\n<pre><code>fun getHexColor (c: Color): String {\n   return when(x){\n        Color.BLUE -&gt; println(\"Battle\")\n        else -&gt; print(\"otherwise\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 0, "last_activity_date": 1548750987, "creation_date": 1548750987, "answer_id": 54416830, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter/54416830#54416830", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>A function syntax in Kotlin looks like this:</p>\n\n<pre><code>fun double(x: Int): Int {\n    return 2 * x\n}\n</code></pre>\n\n<p>where <code>x</code> is the name of the function parameter of type <code>Int</code>. Your function is not valid since you use <code>Color</code> as the parameter name rather than its type. To fix it do:</p>\n\n<pre><code>fun getHexColor (color: Color) {\n    when(color){\n        Color.BLUE -&gt; println(\"Battle\")\n        else -&gt; print(\"otherwise\")\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1548751006, "creation_date": 1548751006, "answer_id": 54416836, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter/54416836#54416836", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>You have to use the type which is <code>Color</code>:</p>\n\n<pre><code>fun getHexColor (x: Color) {\n    when(x){\n        Color.BLUE -&gt; println(\"Battle\")\n        else -&gt; print(\"otherwise\")\n    }\n}\n</code></pre>\n\n<p>Note that a function prefixed with \"get\" should return something. Since when is an expression you can do it like this:</p>\n\n<pre><code>fun getHexColor (x: Color) = when(x) { // will return a String\n        Color.BLUE -&gt; \"Battle\"\n        else -&gt; \"otherwise\"\n}\n\nprintln(getHexColor(Color.BLUE))\n</code></pre>\n"}], "owner": {"reputation": 945, "user_id": 394842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f635789c47f734898a6e8dd16052dc1?s=128&d=identicon&r=PG&f=1", "display_name": "Genevieve", "link": "https://stackoverflow.com/users/394842/genevieve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1332, "favorite_count": 0, "accepted_answer_id": 54413783, "answer_count": 5, "score": 1, "last_activity_date": 1548841336, "creation_date": 1548734758, "question_id": 54413692, "link": "https://stackoverflow.com/questions/54413692/create-a-function-in-kotlin-that-takes-an-enum-parameter", "title": "Create a function in Kotlin that takes an enum parameter", "body": "<p>I'm creating a function that takes an enum value as a parameter, but I am very new to Kotlin and I can't find any material that covers this specifically.</p>\n\n<p>Example:</p>\n\n<pre><code>enum class Color(val rgb: Int) {\n        RED(0xFF0000),\n        ORANGE(0xffa500),\n        YELLOW(0xffff00),\n        GREEN(0x00FF00),\n        BLUE(0x0000FF),\n        INDIGO(0x4b0082),\n        VIOLET(0x8F5E99)\n}\nfun getHexColor (Color: Enum)\n{\n    when(x){\n        Color.BLUE -&gt; println(\"Battle\")\n        else -&gt; print(\"otherwise\")\n    }\n\n}\n</code></pre>\n\n<p>I get an error that says:</p>\n\n<pre><code>One type argument expected for class Enum&lt;E: Enum&lt;E&gt;&gt;\n</code></pre>\n\n<p>I've looked through Kotlin documentation for over an hour and I've got nothing to show for it... do any of you have an idea of how to use this class as a parameter?</p>\n"}, {"tags": ["java", "spring-boot", "gradle", "junit", "kotlin"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1548733753, "post_id": 54413285, "comment_id": 95637598, "body": "What exactly are you trying to test?"}, {"owner": {"reputation": 478, "user_id": 3850352, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000273936451/picture?type=large", "display_name": "Hung Vi", "link": "https://stackoverflow.com/users/3850352/hung-vi"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1548734711, "post_id": 54413285, "comment_id": 95637825, "body": "The test is related to java reflection. For example, I have set of java class (ClassWhiteList) which is defined in a <code>@Configuration class ApplicationConfiguration</code>. <code>classWhiteList</code> is fixed and it is necessary when creating instance of <code>MyBean</code>. I have function <code>MyBean.isAllowedClass(String className)</code> to check if a class is in the white list."}], "owner": {"reputation": 478, "user_id": 3850352, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000273936451/picture?type=large", "display_name": "Hung Vi", "link": "https://stackoverflow.com/users/3850352/hung-vi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 562, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548747815, "creation_date": 1548731288, "last_edit_date": 1548747815, "question_id": 54413285, "link": "https://stackoverflow.com/questions/54413285/unit-test-in-spring-boot-common-library-project", "title": "Unit test in Spring Boot common library project", "body": "<p>My question is how to configure gradle and spring boot to run the unit test of a common library project without applying <code>org.springframework.boot</code> plugin?</p>\n\n<p>I have a Spring boot common library project that is built with <code>gradle</code>.\nThe problem is:</p>\n\n<ul>\n<li><p>I don't want to apply <code>org.springframework.boot</code> plugin into my project because it should be used for spring boot application but a library project.</p></li>\n<li><p>I need to wire (@Autowired) some bean in my tests.</p></li>\n<li><p>I have tried to configure my <code>build.gradle</code> file as below</p></li>\n</ul>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.0.4.RELEASE'\n        junitPlatformVersion = '1.0.0-M2'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}\")\n        classpath(\"org.jetbrains.kotlin:kotlin-noarg:${kotlinVersion}\")\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'kotlin-spring'\napply plugin: 'eclipse'\n//apply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\njar {\n    baseName = 'my-common-lib'\n    version = '0.0.1-SNAPSHOT'\n}\n\nsourceCompatibility = 1.8\ncompileKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        freeCompilerArgs = [\"-Xjsr305=strict\"]\n        jvmTarget = \"1.8\"\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ntest {\n    useJUnitPlatform()\n}\n\ndependencyManagement {\n    imports {\n        mavenBom \"org.springframework.boot:spring-boot-dependencies:$springBootVersion\"\n    }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web')\n    compile(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    compile(\"org.jetbrains.kotlin:kotlin-reflect\")\n\n    testCompile('org.springframework.boot:spring-boot-starter-test') {\n        exclude module: 'junit'\n    }\n    testCompile group: 'org.assertj', name: 'assertj-core', version: assertjCoreVersion\n\n    testImplementation('org.junit.jupiter:junit-jupiter-api')\n    testRuntimeOnly('org.junit.jupiter:junit-jupiter-engine')\n}\n</code></pre>\n\n<ul>\n<li>My tests as below:</li>\n</ul>\n\n<pre><code>@ExtendWith(SpringExtension::class)\n@SpringBootTest\nclass MyCommonLibraryTest(@Autowired val myBean: MyBean) {\n  @Test\n  ...\n}\n</code></pre>\n\n<ul>\n<li>Finally, I got <code>BeanCreationException</code> thrown when running the test</li>\n</ul>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'anotherBean' defined in class path resource [com/pipedbits/spiralg/templateengine/infrastructure/configuration/TemplateConfiguration.class]: Unexpected exception during bean creation; nested exception is java.lang.IllegalStateException: Resource not found in classpath: kotlin/coroutines/coroutines.kotlin_builtins\n\n</code></pre>\n"}, {"tags": ["kotlin", "google-cloud-firestore", "android-recyclerview", "android-fragmentactivity"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1548750545, "post_id": 54413191, "comment_id": 95643280, "body": "So what are basically trying to achieve? What is the expected result?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1548792367, "post_id": 54413191, "comment_id": 95667715, "body": "Now, what is wrong with this code?"}, {"owner": {"reputation": 1, "user_id": 10548574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9572000c9a4c7f1beae8c711b7b74c78?s=128&d=identicon&r=PG&f=1", "display_name": "c&#233;line07", "link": "https://stackoverflow.com/users/10548574/c%c3%a9line07"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1548792426, "post_id": 54413191, "comment_id": 95667739, "body": "Thanks. I want to display my data from firestore on fragments, but im not sure if  if I&#39;m doing it correctly. do i need three adapter or only one ? Also,  would it be possible to make a single querry for the three fragments with the name of the collection as variable?"}], "owner": {"reputation": 1, "user_id": 10548574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9572000c9a4c7f1beae8c711b7b74c78?s=128&d=identicon&r=PG&f=1", "display_name": "c&#233;line07", "link": "https://stackoverflow.com/users/10548574/c%c3%a9line07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548867585, "creation_date": 1548730501, "last_edit_date": 1548867585, "question_id": 54413191, "link": "https://stackoverflow.com/questions/54413191/display-data-from-firestore-into-three-recyclerview-fragments-in-kotlin-compo", "title": "Display data from Firestore into three recyclerview fragments in KOTLIN ,, compound query", "body": "<p>I am new to Android dev. I develop an application and I have to find a list of producers from firestore in my activity.</p>\n\n<p>I have three specialty and for each specialty I have to display the list in a fragment. So my main activity contains three fragments (viewpager) and each fragment I display list of producers from firestore (I created a collection by specialty) so I have to find data from each collection for each fragment.\nI created a single recycleradapter, do I have to create three?</p>\n\n<p>Also, I have to create three queries where there is a possibility to create a single class then use for each fragment.</p>\n\n<p>I've been blocking for a few days. Can you help me get on the right track?</p>\n\n<p>Thank you so much.</p>\n\n<p>This is my <code>RecyclerAdapter</code> class: </p>\n\n<pre><code>class RecyclerAdapter (val productList: MutableList&lt;Product&gt;, val context: Context) : RecyclerView.Adapter&lt;RecyclerAdapter.ViewHolder&gt;()\n{\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerAdapter.ViewHolder {\n    val view = LayoutInflater.from(parent.context).inflate(R.layout.recycler_productcard_item, parent, false)\n\n    return ViewHolder(view)\n}\n\noverride fun getItemCount(): Int {\n  return productList.size\n}\n\noverride fun onBindViewHolder(holder: RecyclerAdapter.ViewHolder, position: Int) {\n    val product = productList[position]\n\n    holder.speciality.text = product.speciality\n    holder.name.text= product.name\n    holder.codePostale.text = product.codePostale\n    holder.productCity.text = product.productCity\n    holder.adresse.text = product.adresse\n    holder.productEmail.text = product.productEmail\n    holder.phone.text = product.phone\n    holder.post.text = product.post\n\n}\n\ninner class ViewHolder internal constructor(view: View) : RecyclerView.ViewHolder(view){\n\n    internal var speciality : TextView = view.findViewById (R.id.speciality)\n    internal var name : TextView = view.findViewById(R.id.product)\n    internal var codePostale : TextView = view.findViewById(R.id.productCode)\n    internal var productCity : TextView = view.findViewById(R.id.productVille)\n    internal var adresse : TextView = view.findViewById(R.id.adress)\n    internal var productEmail : TextView = view.findViewById(R.id.product_mail)\n    internal var phone : TextView = view.findViewById(R.id.product_tel)\n    internal var post : TextView = view.findViewById(R.id.post)\n }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>data class Product( val speciality:String,\n                val name:String,\n                val codePostale:String,\n                val productCity:String,\n                val adresse:String,\n                val productEmail:String,\n                val phone:String,\n                val post:String\n                )\n\n{\nconstructor(): this (\"\",\"\",\"\",\"\",\"\",\n    \"\",\"\",\"\")\nfun toMap(): Map&lt;String, Any&gt; {\n\n    val result = HashMap&lt;String, Any&gt;()\n    result.put(\"speciality\", speciality)\n    result.put(\"name\", name)\n    result.put(\"codePostale\", codePostale)\n    result.put(\"productCity\", productCity)\n    result.put(\"adresse\", adresse)\n    result.put(\"productEmail\", productEmail)\n    result.put(\"phone\", phone)\n    result.put(\"post\", post)\n\n    return result\n  }\n\n}\n</code></pre>\n\n<p>Example of one fragment</p>\n\n<pre><code>class AgriculteurFragment : Fragment() {\n   override fun onCreateView(\n    inflater: LayoutInflater, container: ViewGroup?,\n    savedInstanceState: Bundle?\n): View? {\n    // Inflate the layout for this fragment\n    return inflater.inflate(R.layout.fragment_agriculteur, container, false)\n }\n}\n</code></pre>\n"}, {"tags": ["firebase", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1548750197, "post_id": 54412791, "comment_id": 95643120, "body": "Are you sure you have the latest Google play services version? Have you also tried to add <code>implementation &#39;com.google.firebase:firebase-messaging:17.3.4&#39;</code>?"}, {"owner": {"reputation": 429, "user_id": 10443788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fae6ec37c80b406fd0d3127bbeac911?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10443788/user"}, "reply_to_user": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1548802984, "post_id": 54412791, "comment_id": 95671675, "body": "@AlexMamo This whole error went away when I ran it on my physical device..."}], "owner": {"reputation": 429, "user_id": 10443788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fae6ec37c80b406fd0d3127bbeac911?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/10443788/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1586, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1574176372, "creation_date": 1548726709, "question_id": 54412791, "link": "https://stackoverflow.com/questions/54412791/e-firebaseinstanceid-token-retrieval-failed-authentication-failed-firebase", "title": "E/FirebaseInstanceId: Token retrieval failed: AUTHENTICATION_FAILED Firebase", "body": "<p>I've tried many solutions but none of them seem to work. I'm trying to setup firebase with my android project but I keep getting an error which states <code>E/FirebaseInstanceId: Token retrieval failed: AUTHENTICATION_FAILED</code>. Note: Google-services.json is installed into my app directory.</p>\n\n<p><strong>App:</strong></p>\n\n<pre><code>dependencies {\n\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation 'com.android.support:appcompat-v7:28.0.0'\nimplementation 'com.android.support.constraint:constraint-layout:1.1.3'\ntestImplementation 'junit:junit:4.12'\nandroidTestImplementation 'com.android.support.test:runner:1.0.2'\nandroidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n\nimplementation 'com.google.firebase:firebase-core:16.0.1'\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p><strong>My App:</strong></p>\n\n<pre><code>dependencies {\n    classpath 'com.android.tools.build:gradle:3.2.1'\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n    classpath 'com.google.gms:google-services:4.0.1'\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n}\n</code></pre>\n"}, {"tags": ["kotlin", "tornadofx"], "comments": [{"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 1, "creation_date": 1548755545, "post_id": 54412557, "comment_id": 95646065, "body": "What do you mean by strange results? Can you post a runnable code sample as well as a screenshot?"}, {"owner": {"reputation": 1138, "user_id": 7644072, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212309749595897/picture?type=large", "display_name": "Robbie Cronin", "link": "https://stackoverflow.com/users/7644072/robbie-cronin"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1548756017, "post_id": 54412557, "comment_id": 95646367, "body": "I&#39;m not sure how to embed a screenshot without uploading to a website so here is the image on my google drive: <a href=\"https://drive.google.com/file/d/1n7OexmLgyHWxDyuwWxIPS0OfZCdHRg4s/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1n7OexmLgyHWxDyuwWxIPS0OfZCdHRg4s/&hellip;</a>"}, {"owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 1, "creation_date": 1548756392, "post_id": 54412557, "comment_id": 95646606, "body": "You can actually just paste the image here and SO will upload to Imgur automatically. I&#39;ve seen these issues often, you might need to manually refresh the tableview. Post a runnable code sample so we can investigate."}, {"owner": {"reputation": 1138, "user_id": 7644072, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212309749595897/picture?type=large", "display_name": "Robbie Cronin", "link": "https://stackoverflow.com/users/7644072/robbie-cronin"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1548761759, "post_id": 54412557, "comment_id": 95649954, "body": "Oh ok, I shall try it out. I will post a runnable sample as soon as I can."}, {"owner": {"reputation": 1138, "user_id": 7644072, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212309749595897/picture?type=large", "display_name": "Robbie Cronin", "link": "https://stackoverflow.com/users/7644072/robbie-cronin"}, "reply_to_user": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "edited": false, "score": 0, "creation_date": 1548807985, "post_id": 54412557, "comment_id": 95672967, "body": "I&#39;m not sure how much code you meant by runnable code, but I have added an image of the result and added code for my whole table. All the style I use is embedded here."}], "answers": [{"tags": [], "owner": {"reputation": 1138, "user_id": 7644072, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212309749595897/picture?type=large", "display_name": "Robbie Cronin", "link": "https://stackoverflow.com/users/7644072/robbie-cronin"}, "is_accepted": false, "score": 0, "last_activity_date": 1548809851, "creation_date": 1548809851, "answer_id": 54431876, "question_id": 54412557, "link": "https://stackoverflow.com/questions/54412557/how-to-disable-resizing-of-columns-in-a-tornadofx-tableview/54431876#54431876", "title": "How to disable resizing of columns in a TornadoFx tableview?", "body": "<p>Looks like I answered my own question: the trick was the TornadoFx method called <code>fixedWidth(200)</code>. Below is my modified code </p>\n\n<pre><code>tableview(model) {\n    smartResize()\n    column(\"DATE\", Model::date) {\n        style {\n            fixedWidth(120)\n        }\n        cellFormat {\n            graphic = cache(rowItem.id) {\n                datepicker(rowItem.dateProperty) \n            }\n        }\n    }\n    column(\"LAME/\\nWCO\", RWADetail::lameWco).makeEditable().style {\n        fixedWidth(120)\n        alignment = Pos.CENTER\n    }\n    column(\"DESCRIPTION\", RWADetail::description).makeEditable().remainingWidth().style {\n        fixedWidth(120)\n        alignment = Pos.CENTER_LEFT\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1138, "user_id": 7644072, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212309749595897/picture?type=large", "display_name": "Robbie Cronin", "link": "https://stackoverflow.com/users/7644072/robbie-cronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548809851, "creation_date": 1548724611, "last_edit_date": 1548807908, "question_id": 54412557, "link": "https://stackoverflow.com/questions/54412557/how-to-disable-resizing-of-columns-in-a-tornadofx-tableview", "title": "How to disable resizing of columns in a TornadoFx tableview?", "body": "<p>I have a few columns in a tableview, and would like their widths to stay constant when the view expands. This seems quite simple with <code>maxWidth = minWidth = 120.px</code>. My problem is I would also like to completely disable the resizing of the columns by the user. This is what I have so far:</p>\n\n<pre><code>tableview(model) {\n    smartResize()\n    column(\"DATE\", Model::date) {\n        isResizable = true // This is where it seems to work\n        style {\n            minWidth = 120.px\n            prefWidth = 120.px\n        }\n        cellFormat {\n            graphic = cache(rowItem.id) {\n                datepicker(rowItem.dateProperty) {\n                    style {\n                        textAlignment = TextAlignment.CENTER\n                            maxWidth = 200.px\n                    }\n                }\n            }\n        }\n    }\n    column(\"LAME/\\nWCO\", RWADetail::lameWco).makeEditable().style {\n        alignment = Pos.CENTER\n    }\n    column(\"DESCRIPTION\", RWADetail::description).makeEditable().remainingWidth().style {\n        alignment = Pos.CENTER_LEFT\n    }\n}\n\n</code></pre>\n\n<p>However this leads to strange result where the empty rows below have different widths. \nThis is a snip of the resulting date column with inconsistent sizing for the empty rows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dO6ZD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dO6ZD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Am I on the right track?</p>\n"}, {"tags": ["oop", "inheritance", "kotlin", "architecture", "polymorphism"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10801734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5ec572fbd768ccc32283c69a0a9936?s=128&d=identicon&r=PG&f=1", "display_name": "maths.js", "link": "https://stackoverflow.com/users/10801734/maths-js"}, "edited": false, "score": 0, "creation_date": 1548777437, "post_id": 54424640, "comment_id": 95660061, "body": "I almost had another day to think about this, and I start to feel like I should go in a similiar direction to what you just described.  About the orthogonality of shared and specific state ... I can&#39;t use &#39;real&#39; static properties for this because it would mean that I have to make a new class for basically every card - because every card is mostly consisting of &#39;shared state&#39;. If you think about what card games usually look like, this makes a lot of sense: Cards with the same name tend to be copies of each other, with differences being stuff like position or modifications such as markers."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "reply_to_user": {"reputation": 33, "user_id": 10801734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5ec572fbd768ccc32283c69a0a9936?s=128&d=identicon&r=PG&f=1", "display_name": "maths.js", "link": "https://stackoverflow.com/users/10801734/maths-js"}, "edited": false, "score": 1, "creation_date": 1548778134, "post_id": 54424640, "comment_id": 95660494, "body": "flyweight/prototype looks appropriate to apply too then."}, {"owner": {"reputation": 33, "user_id": 10801734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5ec572fbd768ccc32283c69a0a9936?s=128&d=identicon&r=PG&f=1", "display_name": "maths.js", "link": "https://stackoverflow.com/users/10801734/maths-js"}, "edited": false, "score": 0, "creation_date": 1548793305, "post_id": 54424640, "comment_id": 95668127, "body": "Gotta try something now. I will eventually update the question.  Thank you for your reply!"}], "tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 1, "last_activity_date": 1548776485, "creation_date": 1548776485, "answer_id": 54424640, "question_id": 54412440, "link": "https://stackoverflow.com/questions/54412440/tips-on-how-to-balance-polymorphism-inheritance-typedata-architecture-with-proto/54424640#54424640", "title": "Tips on how to balance Polymorphism/Inheritance/TypeData architecture with Prototype/Flyweight pattern in a complex card game?", "body": "<p>Just thinking here.</p>\n\n<p>What about creating a BaseCard class with Card low-level common parts, then a class for each category that inherits from BaseCard, named like Category, where you store each category common parts, and then classes CardofSomeType inheriting from its respective Category. So in a CardofSomeType you inherit anything relevant from either class, and you just add new Card(s)ofSomeType(s) to extend your set.</p>\n\n<p>About what data is instance specific or shared in the class, that's orthogonal to this and an implementation detail of each class.</p>\n"}], "owner": {"reputation": 33, "user_id": 10801734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5ec572fbd768ccc32283c69a0a9936?s=128&d=identicon&r=PG&f=1", "display_name": "maths.js", "link": "https://stackoverflow.com/users/10801734/maths-js"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548776485, "creation_date": 1548723435, "last_edit_date": 1548724699, "question_id": 54412440, "link": "https://stackoverflow.com/questions/54412440/tips-on-how-to-balance-polymorphism-inheritance-typedata-architecture-with-proto", "title": "Tips on how to balance Polymorphism/Inheritance/TypeData architecture with Prototype/Flyweight pattern in a complex card game?", "body": "<p>I am trying to develop a card game with Kotlin, but I feel like the complex architecture decisions I feel I have to make are stalling my process.\nI would like to create a solid and flexible foundation for potentially dozens of different cards with different effects, of different types (e.g. spell, vehicle, weapon...).</p>\n\n<p>Intuitively I feel like giving each different <code>Card</code> its own subclass would be ridiculous for several reasons, such as the loss of flexibility (can't (without crazy hacks) create new kinds of cards dynamically) and escalating complexity.</p>\n\n<p>On the other hand, there will be different categories of cards (types) which generally have more in common with each other than cards - so it feels like I should definitely subclass <code>Card</code> because otherwise I would end up with Type enums (SPELL, WEAPON, VEHICLE...) and ugly switch-statements replacing what's usually dealt with by inheritance and polymorphism.</p>\n\n<p>I initially had problems conceiving how to access specific behaviors of subclasses who live in collections of superclasses, but I now understand how I can solve this using the visitor pattern - all fine so far.</p>\n\n<p>My problem now is this architectural approach seems to conflict with other things I have planned and which I consider necessary or at least very worthwhile to have:\nHybrid of Prototype-Flyweight-Pattern:\nI have created a 'cyclopedia' of prototype cards that can be copied. Cards consist of a shared static part and a unique dynamic part:\n<a href=\"https://i.stack.imgur.com/0x2eY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0x2eY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Naturally, I would like to create subinstances of the identifying components in the following manner:\n<a href=\"https://i.stack.imgur.com/J8IWt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J8IWt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Doing this doesn't seem to be possible in a satisfying way no matter how I approach it. There are many solutions but all seem like weak compromises to me:</p>\n\n<ul>\n<li>Doing it the way I described it means subclasses have to save\nmultiple references to their components; a baseclass and one subclass\none for each. It also leads to an ugly situation where type\nattributes are spread over several component-classes all dependent on\neach other.</li>\n<li>Using interfaces instead of inheritance leads to loads of code duplication.</li>\n<li>Subclassing only the components but not card itself hides type information in the innards of cards and also demands ugly reflection\nfor accessing subclass traits.</li>\n<li>Implementing a data-equivalent of type-information instead of subclassing to circumvent the limiting rules of Kotlin inheritance\nhierarchies seems to be hacky and removes IDE support.</li>\n</ul>\n\n<p>I am sure there are even more approaches I have considered over the course of the last two weeks, but these are all I can remember right now.</p>\n\n<p>I know that you probably would require more complete information on what I am planning to do to give me concrete answers, but since it's too complex and I don't know all about where this is going either, I am satisfied with rough ideas in the sense of 'consider this' or 'whatever you are doing, stay away from this' or general advice about how to deal with such a 'design crysis' where things seem so complex you don't know how to start.</p>\n\n<p>Of course I am ready to elaborate or detail parts of my description if it becomes necessary.</p>\n"}, {"tags": ["android", "kotlin", "rx-java", "rx-java2", "clean-architecture"], "comments": [{"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 1, "creation_date": 1548721834, "post_id": 54412084, "comment_id": 95635178, "body": "I bet on <code>db.patientDAO().getAllPatients().isNotEmpty()</code> of course it should be in stack trace which you didn&#39;t provide"}, {"owner": {"reputation": 210, "user_id": 9271756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3465bf85adddeb6a29a9c47ea9b6c2b0?s=128&d=identicon&r=PG&f=1", "display_name": "Petermonteer", "link": "https://stackoverflow.com/users/9271756/petermonteer"}, "reply_to_user": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1548754218, "post_id": 54412084, "comment_id": 95645224, "body": "@Selvin thanks for your answer, yeah I didn&#39;t upload the whole stacktrace but I mentioned where the error happens in the label before the code sample!"}, {"owner": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1548754455, "post_id": 54412084, "comment_id": 95645362, "body": "ok i didn&#39;t noice since I focus on code ... but it obvious <code>db.patientDAO().getAllPatients()</code> is prolly implemented to return <code>List&lt;Patient&gt;</code> so it: does <i>access database on the main thread</i> ..."}, {"owner": {"reputation": 210, "user_id": 9271756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3465bf85adddeb6a29a9c47ea9b6c2b0?s=128&d=identicon&r=PG&f=1", "display_name": "Petermonteer", "link": "https://stackoverflow.com/users/9271756/petermonteer"}, "reply_to_user": {"reputation": 6441, "user_id": 690952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9WfV.png?s=128&g=1", "display_name": "Selvin", "link": "https://stackoverflow.com/users/690952/selvin"}, "edited": false, "score": 0, "creation_date": 1548755379, "post_id": 54412084, "comment_id": 95645963, "body": "Hm, but I execute the use case in the view model subscribing to a new thread, shouldn&#39;t it run all processes off the main thread? Edit: Added whole stacktrace"}, {"owner": {"reputation": 8316, "user_id": 1616317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4533abb0fab9a5a284c2cdcb40512e85?s=128&d=identicon&r=PG&f=1", "display_name": "karan", "link": "https://stackoverflow.com/users/1616317/karan"}, "edited": false, "score": 0, "creation_date": 1548755463, "post_id": 54412084, "comment_id": 95646015, "body": "room also allows to execute your query on main thread but you need to enable it."}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 9271756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3465bf85adddeb6a29a9c47ea9b6c2b0?s=128&d=identicon&r=PG&f=1", "display_name": "Petermonteer", "link": "https://stackoverflow.com/users/9271756/petermonteer"}, "edited": false, "score": 0, "creation_date": 1548755914, "post_id": 54418140, "comment_id": 95646309, "body": "Thanks for your help, that is a way to make it work without a doubt. But why am I calling getAllPatients in the main thread? In the first sample code, I&#39;m executing my use case and subscribing to Schedulers.io(), so all the processes running from there on should be executed off the main thread right?"}, {"owner": {"reputation": 3600, "user_id": 1494902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y088H.jpg?s=128&g=1", "display_name": "Piotr Aleksander Chmielowski", "link": "https://stackoverflow.com/users/1494902/piotr-aleksander-chmielowski"}, "reply_to_user": {"reputation": 210, "user_id": 9271756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3465bf85adddeb6a29a9c47ea9b6c2b0?s=128&d=identicon&r=PG&f=1", "display_name": "Petermonteer", "link": "https://stackoverflow.com/users/9271756/petermonteer"}, "edited": false, "score": 1, "creation_date": 1548756719, "post_id": 54418140, "comment_id": 95646811, "body": "No, the <code>getPatient()</code> is not executed on the IO thread. It is executed on the main thread, but returns <code>Single</code> - and this <code>Single</code> will be subscribed on the IO thread."}], "tags": [], "owner": {"reputation": 3600, "user_id": 1494902, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y088H.jpg?s=128&g=1", "display_name": "Piotr Aleksander Chmielowski", "link": "https://stackoverflow.com/users/1494902/piotr-aleksander-chmielowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1548755297, "creation_date": 1548755297, "answer_id": 54418140, "question_id": 54412084, "link": "https://stackoverflow.com/questions/54412084/error-accessing-room-database-using-rxjava-with-use-cases-and-clean-architecure/54418140#54418140", "title": "Error accessing Room Database using RxJava, with Use Cases and Clean Architecure", "body": "<p>The problem is here: <code>db.patientDAO().getAllPatients()</code>. You are calling <code>getAllPatients()</code> on the UI Thread. You should wrap in in the <code>Single</code> and subscribe on <code>Schedulers.io()</code>.</p>\n\n<p>One of the possible solutions is to rewrite the following code:</p>\n\n<pre><code>val patientDataStore = PatientDataStoreFactory().create()\nreturn patientDataStore.patient()\n</code></pre>\n\n<p>to something like this:</p>\n\n<pre><code>return Single.fromCallable { PatientDataStoreFactory().create() }\n             .flatMap { store -&gt; store.patient() }\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 9271756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3465bf85adddeb6a29a9c47ea9b6c2b0?s=128&d=identicon&r=PG&f=1", "display_name": "Petermonteer", "link": "https://stackoverflow.com/users/9271756/petermonteer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548755664, "creation_date": 1548720473, "last_edit_date": 1548755664, "question_id": 54412084, "link": "https://stackoverflow.com/questions/54412084/error-accessing-room-database-using-rxjava-with-use-cases-and-clean-architecure", "title": "Error accessing Room Database using RxJava, with Use Cases and Clean Architecure", "body": "<p>I'm building an app using clean architecture.\nI'm getting an error when calling an use case from my ViewModel that needs to run a query on my Room Database, telling me I'm accessing it in the main thread. </p>\n\n<pre><code>Caused by: java.lang.IllegalStateException: Cannot access database on the main thread since it may potentially lock the UI for a long period of time.\n    at android.arch.persistence.room.RoomDatabase.assertNotMainThread(RoomDatabase.java:204)\n    at android.arch.persistence.room.RoomDatabase.query(RoomDatabase.java:232)\n    at com.something.data.db.PatientDAO_Impl.getAllPatients(PatientDAO_Impl.java:229)\n    at com.something.data.repositories.dataSource.PatientDataStoreFactory.create(PatientDataStoreFactory.kt:18)\n    at com.something.data.repositories.PatientRepositoryImplementation.getPatient(PatientRepositoryImplementation.kt:97)\n    at com.something.domain.useCases.GetPatientUseCase.execute(GetPatientUseCase.kt:10)\n    at com.something.some_thing.searchForm.SearchFormViewModel.getPatientFromDb(SearchFormViewModel.kt:49)\n    at com.something.some_thing.searchForm.SearchFormFragment.onCreateView(SearchFormFragment.kt:99)\n    at android.support.v4.app.Fragment.performCreateView(Fragment.java:2439)\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1460)\n    at android.support.v4.app.FragmentManagerImpl.moveFragmentToExpectedState(FragmentManager.java:1784)\n    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1852)\n    at android.support.v4.app.BackStackRecord.executeOps(BackStackRecord.java:802)\n    at android.support.v4.app.FragmentManagerImpl.executeOps(FragmentManager.java:2625)\n    at android.support.v4.app.FragmentManagerImpl.executeOpsTogether(FragmentManager.java:2411)\n    at android.support.v4.app.FragmentManagerImpl.removeRedundantOperationsAndExecute(FragmentManager.java:2366)\n    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:2273)\n    at android.support.v4.app.FragmentManagerImpl.dispatchStateChange(FragmentManager.java:3273)\n    at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:3229)\n    at android.support.v4.app.FragmentController.dispatchActivityCreated(FragmentController.java:201)\n    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:620)\n    at android.support.v7.app.AppCompatActivity.onStart(AppCompatActivity.java:178)\n    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1334)\n    at android.app.Activity.performStart(Activity.java:7057)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2819)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2931)\u00a0\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)\u00a0\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1620)\u00a0\n    at android.os.Handler.dispatchMessage(Handler.java:105)\u00a0\n    at android.os.Looper.loop(Looper.java:173)\u00a0\n    at android.app.ActivityThread.main(ActivityThread.java:6698)\u00a0\n    at java.lang.reflect.Method.invoke(Native Method)\u00a0\n    at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\u00a0\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:782)\u00a0\n</code></pre>\n\n<p>Here is some code</p>\n\n<p>My ViewModel call:</p>\n\n<pre><code>fun getPatient(){\n    val disposable = getPatientUseCase.execute()\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(this::getPatientSuccess, this::onError)\n    compositeDisposable.add(disposable)\n}\n</code></pre>\n\n<p>My Use Case: </p>\n\n<pre><code>class GetPatientUseCase(private val patientRepository: PatientRepository){\n\nfun execute(): Single&lt;Patient&gt; {\n    return patientRepository.getPatient()\n}\n</code></pre>\n\n<p>My repository method implementation</p>\n\n<pre><code>override fun getPatient(): Single&lt;Patient&gt; {\n    val patientDataStore = PatientDataStoreFactory().create()\n    return patientDataStore.patient()\n}\n</code></pre>\n\n<p>This is where the crash happens, in My PatientDataStoreFactory, when running db.patientDAO().getAllPatients().isNotEmpty():</p>\n\n<pre><code>@Singleton\nclass PatientDataStoreFactory {\n\n    private val db = DaggerWrapper.getInstance().database()\n\n    fun create(): PatientDataStore {\n\n        return if (db.patientDAO().getAllPatients().isNotEmpty()){\n            LocalPatientDataStore()\n        } else {\n            CloudPatientDataStore()\n        }\n    }\n}\n</code></pre>\n\n<p>In my ViewModel I'm subscribing the use case execution so I dont understand this crash... \nAny ideas?</p>\n"}, {"tags": ["android", "kotlin", "error-handling", "preview", "anko"], "answers": [{"tags": [], "owner": {"reputation": 1525, "user_id": 8309806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dP8rf.png?s=128&g=1", "display_name": "avi12", "link": "https://stackoverflow.com/users/8309806/avi12"}, "is_accepted": false, "score": 2, "last_activity_date": 1548719182, "creation_date": 1548719182, "answer_id": 54411928, "question_id": 54411754, "link": "https://stackoverflow.com/questions/54411754/cannot-preview-in-anko/54411928#54411928", "title": "Cannot preview in Anko", "body": "<p>What seemed to be the problem, is that in <code>build.gradle</code> I had:</p>\n\n<pre><code>dependencies {\n    ...\n    implementation \"org.jetbrains.anko:anko-sdk25:$anko_version\" // sdk15, sdk19, sdk21, sdk23 are also available\n    implementation \"org.jetbrains.anko:anko-appcompat-v7:$anko_version\"\n}\n</code></pre>\n\n<p>And for some reason, this partly fixed the problem (in terms of a successful build, yet still no preview):</p>\n\n<pre><code>dependencies {\n    ...\n    // implementation \"org.jetbrains.anko:anko-sdk25:$anko_version\" // sdk15, sdk19, sdk21, sdk23 are also available\n    implementation \"org.jetbrains.anko:anko-appcompat-v7:$anko_version\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 5063338, "user_type": "registered", "profile_image": "https://graph.facebook.com/920485957993662/picture?type=large", "display_name": "Artur Ex", "link": "https://stackoverflow.com/users/5063338/artur-ex"}, "is_accepted": false, "score": 0, "last_activity_date": 1549802088, "creation_date": 1549802088, "answer_id": 54616425, "question_id": 54411754, "link": "https://stackoverflow.com/questions/54411754/cannot-preview-in-anko/54616425#54616425", "title": "Cannot preview in Anko", "body": "<p>...preview ONLY WORKS IF we define our layout in an external class that implements AnkoComponent interface. Below is how we will modify our activity to define our view in a separate class:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    MainActivityUI().setContentView(this)\n}\n\nclass MainActivityUI : AnkoComponent&lt;MainActivity&gt; {\n    override fun createView(ui: AnkoContext&lt;MainActivity&gt;) = with(ui) {\n        verticalLayout {\n            gravity = Gravity.CENTER\n            padding = dip(20)\n\n            textView {\n                gravity = Gravity.CENTER\n                text = \"Enter your request\"\n                textColor = Color.BLACK\n                textSize = 24f\n            }.lparams(width = matchParent) {\n                margin = dip(20)\n            }\n\n            val name = editText {\n                hint = \"What is your name?\"\n            }\n\n            editText {\n                hint = \"What is your message?\"\n                lines = 3\n            }\n\n            button(\"Enter\") {\n                onClick {\n                    toast( \"Hey ${name.text}! Thank you for contacting us. We will get in touch with you soon.\")\n                }\n            }.lparams(dip(280), sp(80))\n\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I hope it solves the problem, I'll find out shortly...</p>\n"}], "owner": {"reputation": 1525, "user_id": 8309806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/dP8rf.png?s=128&g=1", "display_name": "avi12", "link": "https://stackoverflow.com/users/8309806/avi12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1549802088, "creation_date": 1548717947, "question_id": 54411754, "link": "https://stackoverflow.com/questions/54411754/cannot-preview-in-anko", "title": "Cannot preview in Anko", "body": "<p>I have this problem:\n<img src=\"https://i.stack.imgur.com/R9N4L.png\" alt=\"\"></p>\n\n<p>The error:</p>\n\n<pre><code>C:\\Users\\avi12\\OneDrive\\Documents\\AndroidApps\\WhatsApp Easy Sticker Maker\\app\\src\\main\\java\\com\\avi12\\whatsappeasystickermaker\\MainActivity.kt: (20, 13): Overload resolution ambiguity:\npublic inline fun ViewManager.textView(init: (@AnkoViewDslMarker TextView).() -&gt; Unit): TextView defined in org.jetbrains.anko\npublic inline fun ViewManager.textView(init: (@AnkoViewDslMarker TextView).() -&gt; Unit): TextView defined in org.jetbrains.anko\n</code></pre>\n\n<p>My code, as I just started discovering Anko:</p>\n\n<pre><code>package com.avi12.whatsappeasystickermaker\n\nimport android.os.Bundle\nimport android.support.v7.app.AppCompatActivity\nimport org.jetbrains.anko.design.*\nimport org.jetbrains.anko.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        coordinatorLayout {\n            textView {\n                text = \"Begin by tapping the + button\"\n            }\n            floatingActionButton {\n\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Anko version: <code>0.10.8</code><br>\nAndroid Studio version: <code>3.3</code></p>\n"}, {"tags": ["java", "android", "kotlin", "java-native-interface", "freepascal"], "comments": [{"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1548747839, "post_id": 54411568, "comment_id": 95642071, "body": "This error is very possible: it can mean the classes have different classloaders and so are different objects."}, {"owner": {"reputation": 14732, "user_id": 1501222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a40764e17b8f967052f9600079692f16?s=128&d=identicon&r=PG", "display_name": "BeniBela", "link": "https://stackoverflow.com/users/1501222/benibela"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1548763900, "post_id": 54411568, "comment_id": 95651190, "body": "But when I write <code>newObjectArray(accounts.Count, accountClass, nil)</code> and <code>newObject(accountClass, ...)</code> that is the same class reference <code>accountClass</code>. Unless the reference gets lost somehow"}, {"owner": {"reputation": 3436, "user_id": 2233621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d934405dc8756df0238aa9794c54c679?s=128&d=identicon&r=PG&f=1", "display_name": "kassim", "link": "https://stackoverflow.com/users/2233621/kassim"}, "edited": false, "score": 0, "creation_date": 1553769970, "post_id": 54411568, "comment_id": 97511504, "body": "I&#39;m seeing this error happen on Samsung devices on Android 5 for my own app. During the initialisation of an enum of all things! <code>MyEnum cannot be stored in an array of type MyEnum[]</code> . Did you happen to find a solution?"}, {"owner": {"reputation": 14732, "user_id": 1501222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a40764e17b8f967052f9600079692f16?s=128&d=identicon&r=PG", "display_name": "BeniBela", "link": "https://stackoverflow.com/users/1501222/benibela"}, "reply_to_user": {"reputation": 3436, "user_id": 2233621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d934405dc8756df0238aa9794c54c679?s=128&d=identicon&r=PG&f=1", "display_name": "kassim", "link": "https://stackoverflow.com/users/2233621/kassim"}, "edited": false, "score": 0, "creation_date": 1554549438, "post_id": 54411568, "comment_id": 97798754, "body": "@kassim I did not"}, {"owner": {"reputation": 3436, "user_id": 2233621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d934405dc8756df0238aa9794c54c679?s=128&d=identicon&r=PG&f=1", "display_name": "kassim", "link": "https://stackoverflow.com/users/2233621/kassim"}, "reply_to_user": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1554813983, "post_id": 54411568, "comment_id": 97882856, "body": "so @AlexeyRomanov&#39;s suggestion of multiple classloaders had me thinking that perhaps our modularization of our app was causing it, which, apparently it was (we&#39;re using feature modules and the enum was in one of these modules, though only used by code in that module), after we moved our enum into our base module we didn&#39;t see the crash again - I&#39;m not sure if that piece of info might help you"}], "owner": {"reputation": 14732, "user_id": 1501222, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a40764e17b8f967052f9600079692f16?s=128&d=identicon&r=PG", "display_name": "BeniBela", "link": "https://stackoverflow.com/users/1501222/benibela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548716677, "creation_date": 1548716677, "question_id": 54411568, "link": "https://stackoverflow.com/questions/54411568/myobject-cannot-be-stored-in-an-array-of-type-myobject", "title": "MyObject cannot be stored in an array of type MyObject[]", "body": "<p>I have received the following crash report</p>\n\n<blockquote>\n<pre><code>java.lang.ArrayStoreException: de.benibela.videlibri.jni.Bridge$Account cannot be stored in an array of type de.benibela.videlibri.jni.Bridge$Account[]\n at de.benibela.videlibri.jni.Bridge.VLGetAccounts(Native Method)\n at de.benibela.videlibri.Accounts.refreshAll(Accounts.kt:61)\n at de.benibela.videlibri.VideLibriApp$Companion.initializeAll(VideLibriApp.kt:305)\n at de.benibela.videlibri.VideLibriApp.onCreate(VideLibriApp.kt:49)\n at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1020)\n at android.app.ActivityThread.handleBindApplication(ActivityThread.java:5009)\n</code></pre>\n</blockquote>\n\n<p>from a Samsung SM-G900F Android 5.0 phone.</p>\n\n<p>Is this error not impossible?</p>\n\n<p>I have this Java code</p>\n\n<pre><code>package de.benibela.videlibri.jni;\npublic class Bridge { \n  //...\n  public static class Account implements Serializable{\n    @NotNull public String libId, name, pass, prettyName;\n    public int type;\n    public boolean extend;\n    public int extendDays;\n    public boolean history;\n    public int lastCheckDate;\n    public Account () {\n        libId = name = pass = prettyName = \"\";\n    }\n    public Account (@NotNull String libId, @NotNull String name, @NotNull String pass, @NotNull String prettyName,\n             int type, boolean extend,\n             int extendDays, boolean history,\n             int lastCheckDate) {\n        this.libId = libId;\n        this.name = name;\n        this.pass = pass;\n        this.prettyName = prettyName;\n        this.type = type;\n        this.extend = extend;\n        this.extendDays = extendDays;\n        this.history = history;\n        this.lastCheckDate = lastCheckDate;\n    }\n    //...\n</code></pre>\n\n<p>and this Pascal code to interact with it:</p>\n\n<pre><code>//global variables\nvar accountClass: jobject;\n    accountClassInitWithData: jmethodID;\n    accounts: TAccountList;\n\n\n//...\nwith j do begin\n  accountClass := newGlobalRefAndDelete(getclass('de/benibela/videlibri/jni/Bridge$Account'));\n  accountClassInitWithData := getmethod(accountClass, '&lt;init&gt;', '(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;IZIZI)V');\nend;\n\nfunction accountToJAccount(account: TCustomAccountAccess): jobject;\nvar args: array[0..8] of jvalue;\n  i: Integer;\nbegin\n  with j  do begin\n    args[0].l := stringToJString(account.getLibrary().id);\n    args[1].l := stringToJString(account.getUser());\n    args[2].l := stringToJString(account.passWord);\n    args[3].l := stringToJString(account.prettyName);\n    args[4].i := account.accountType;\n    args[5].z := booleanToJboolean(account.extendType &lt;&gt; etNever);\n    args[6].i := account.extendDays;\n    args[7].z := booleanToJboolean(account.keepHistory);\n    args[8].i := account.lastCheckDate;\n    result := newObject(accountClass, accountClassInitWithData, @args[0]);\n    for i := 0 to 3 do deleteLocalRef(args[i].l);\n  end;\nend;            \nfunction Java_de_benibela_VideLibri_Bridge_VLGetAccounts(env:PJNIEnv; this:jobject): jobject; cdecl;\nvar\n  i: Integer;\nbegin\n  if logging then bbdebugtools.log('de.benibela.VideLibri.Bride.VLGetAccounts (started)');\n  try\n    result := j.newObjectArray(accounts.Count, accountClass, nil);\n    with j do\n      for i := 0 to accounts.Count - 1 do\n        setObjectArrayElementAndDelete(result, i,  accountToJAccount(accounts[i]));\n  except\n    on e: Exception do throwExceptionToJava(e);\n  end;\n  if logging then bbdebugtools.log('de.benibela.VideLibri.Bride.VLGetAccounts (ended)');\nend;\n</code></pre>\n\n<p><code>j</code> is just a simple wrapper around  the JNI env pointer: </p>\n\n<pre><code>type TJavaEnv = record\n  env: PJNIEnv;\n  //...\nend;\nthreadvar j: TJavaEnv; //JNI helper object\n\nfunction TJavaEnv.newObject(c: jclass; m: jmethodID; args: Pjvalue): jobject;\nbegin\n  result := env^^.NewObjectA(env, c, m, args);\nend;\nfunction TJavaEnv.newObjectArray(len: integer; c: jclass; def: jobject): jobject;\nbegin\n  result := env^^.NewObjectArray(env,   len, c, def);\nend;\nfunction TJavaEnv.newGlobalRefAndDelete(obj: jobject): jobject;\nbegin\n  result := env^^.NewGlobalRef(env, obj);\n  deleteLocalRef(obj);\nend;\nfunction TJavaEnv.getclass(n: pchar): jclass;\nvar\n  jn: jobject;\nbegin\n  if jCustomClassLoader &lt;&gt; nil then begin\n    jn := stringToJString(n);\n    result := callObjectMethod(jCustomClassLoader, jCustomClassLoaderFindClassMethod, @jn);\n    if ExceptionCheck then begin\n      env^^.ExceptionClear(env);\n      result := nil;\n    end;\n    deleteLocalRef(jn);\n    if result &lt;&gt; nil then exit;\n  end;\n  result := env^^.FindClass(env, n);\n  checkResult(result, 'class', n, '');\nend;\nfunction TJavaEnv.getmethod(c: jclass; n, sig: pchar): jmethodID;\nbegin\n  result := env^^.GetMethodID(env, c, n, sig);\n  checkResult(result, 'method', n, '');\nend;\nfunction TJavaEnv.ExceptionCheck: boolean;\nbegin\n  result := env^^.ExceptionCheck(env) &lt;&gt; JNI_FALSE\nend;\nfunction TJavaEnv.callObjectMethod(obj: jobject; methodID: jmethodID; args: Pjvalue): jobject;\nbegin\n  result := env^^.CallObjectMethodA(env, obj, methodID, args);\nend;\nprocedure TJavaEnv.setObjectArrayElement(a: jobject; index: integer; v: jobject);\nbegin\n  env^^.SetObjectArrayElement(env, a, index, v);\nend;\nprocedure TJavaEnv.setObjectArrayElementAndDelete(a: jobject; index: integer; v: jobject);\nbegin\n  setObjectArrayElement(a, index, v);\n  deleteLocalRef(v);\nend;\nprocedure TJavaEnv.deleteLocalRef(obj: jobject);\nbegin\n  env^^.DeleteLocalRef(env, obj);\nend;\nfunction TJavaEnv.NewStringUTF(s: string): jobject; inline;\nbegin\n  result := env^^.NewStringUTF(env, pchar(s));\nend;\nfunction TJavaEnv.stringToJString(s: string; conversionMode: TStringConversionMode = scmConvertAndRepairUTF8ToMUTF8): jobject;\nvar ok: integer;\nbegin\n  if (conversionMode = scmAssumeMUTF8) then\n    exit(NewStringUTF(s));\n  ok := isValidModifiedUTF8(s, conversionMode);\n  if ok = 0 then\n    exit(NewStringUTF(s));\n  if (ok = INVALID_UTF8) and (conversionMode = scmConvertValidUTF8ToMUTF8) then\n    raise EAndroidInterfaceException.create('String is invalid utf-8: '+strFromPtr(pointer(s))+':'+inttostr(length(s)));\n  exit(NewStringUTF(repairModifiedUTF8(s)));\nend;\nfunction TJavaEnv.booleanToJboolean(b: boolean): jboolean;\nbegin\n  if b then result := JNI_TRUE\n  else result := JNI_FALSE;\nend;\nprocedure setCustomClassLoaderFromLoadedClass(c: jclass);\nvar classClass, classLoaderClass: jclass;\n  getClassLoaderMethod: jmethodID;\nbegin\n  //see https://stackoverflow.com/questions/13263340/findclass-from-any-thread-in-android-jni\n  with needJ do begin\n    classClass := env^^.GetObjectClass(env, c);\n    getClassLoaderMethod := getmethod(classClass, 'getClassLoader', '()Ljava/lang/ClassLoader;');\n    jCustomClassLoader := newGlobalRefAndDelete(callObjectMethodChecked(c, getClassLoaderMethod));\n\n    classLoaderClass := env^^.FindClass(env, 'java/lang/ClassLoader');\n    jCustomClassLoaderFindClassMethod := getmethod(classLoaderClass, 'findClass', '(Ljava/lang/String;)Ljava/lang/Class;');\n  end;\nend;\n//in JNI_OnLoad\n  setCustomClassLoaderFromLoadedClass(j.env^^.FindClass(j.env, 'de/benibela/videlibri/jni/Bridge'));\n</code></pre>\n"}, {"tags": ["android", "sqlite", "kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548712651, "post_id": 54410454, "comment_id": 95632740, "body": "1.) this is clearly not a <a href=\"https://stackoverflow.com/help/mcve\">minimal verifiable and complete example</a> and 2.) my goodness the author of that tutorial had no idea about Kotlin. You&#39;re not supposed to have to type <code>!!</code>s almost ever. <code>var</code> should be used sparingly. Mutable lists should be constrained to be private (<code>List&lt;T&gt;</code> instead of <code>ArrayList&lt;T&gt;</code>). There is no reason to write <code>constructor() {}</code> block just to do field assignments. And so on. 3.) The code is just generally bad. The author loads the database synchronously on UI thread in <code>onResume()</code> (which runs after loss of window focus)"}, {"owner": {"reputation": 157, "user_id": 7954758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f04e53f607fa47ac10b33d4ac3a34ad?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe43", "link": "https://stackoverflow.com/users/7954758/j-doe43"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548713570, "post_id": 54410454, "comment_id": 95633017, "body": "Thanks for your comment, as you can see, I&#39;m quite a newbie of Kotlin. Are there any similar tutorials you can recommend yourself? The code I have now, despite it being bad, still accomplishes what I want for now except being able to execute a SQL query on MainActivity, is there a way to accomplish that?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 1, "creation_date": 1548714009, "post_id": 54410454, "comment_id": 95633155, "body": "I&#39;m not blaming you, you were following a tutorial you couldn&#39;t have known was bad.  I have a guide for Kotlin: <a href=\"https://github.com/Zhuinden/guide-to-kotlin/wiki/6.)-Anti-Patterns\" rel=\"nofollow noreferrer\">github.com/Zhuinden/guide-to-kotlin/wiki/6.)-Anti-Patterns</a> but I don&#39;t have one &quot;generally for Android development&quot;. As for DB things, you should probably read through <a href=\"https://codelabs.developers.google.com/codelabs/android-persistence/#0\" rel=\"nofollow noreferrer\">codelabs.developers.google.com/codelabs/android-persistence/&zwnj;&#8203;#0</a> and <a href=\"https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0\" rel=\"nofollow noreferrer\">codelabs.developers.google.com/codelabs/&hellip;</a> and <a href=\"https://codelabs.developers.google.com/codelabs/build-app-with-arch-components/index.html/#0\" rel=\"nofollow noreferrer\">codelabs.developers.google.com/codelabs/&hellip;</a> and <a href=\"https://developer.android.com/jetpack/docs/guide\" rel=\"nofollow noreferrer\">developer.android.com/jetpack/docs/guide</a>"}, {"owner": {"reputation": 157, "user_id": 7954758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f04e53f607fa47ac10b33d4ac3a34ad?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe43", "link": "https://stackoverflow.com/users/7954758/j-doe43"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1548716462, "post_id": 54410454, "comment_id": 95633946, "body": "Thanks for the guide and DB links, they should help me a ton!"}], "owner": {"reputation": 157, "user_id": 7954758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7f04e53f607fa47ac10b33d4ac3a34ad?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe43", "link": "https://stackoverflow.com/users/7954758/j-doe43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1548710446, "creation_date": 1548710446, "question_id": 54410454, "link": "https://stackoverflow.com/questions/54410454/android-kotlin-executing-sqlite-query-in-mainactivity", "title": "Android Kotlin Executing SQLite query in MainActivity", "body": "<p>I'm trying to figure out how to execute a SQL query from my MainActivity. I'm currently using a large portion of <a href=\"https://grokonez.com/android/kotlin-sqlite-example-crud-operations-with-listview-android\" rel=\"nofollow noreferrer\">this example</a>. Upon clicking my Acknowledge button, it finds the selected rows, gets the jsonID of said row, then I'm wanting to update a value in my SQLite table of those rows. </p>\n\n<p>So my question is, how do I execute my \"jsonQuery\" string, to my SQLite database upon clicking my Acknowledge button?</p>\n\n<p>Here's the code I have in my MainActivity: </p>\n\n<pre><code>acknowledge.setOnClickListener {\n\n        var jsonData_text: String = \"\"\n\n        for (i in 0 until JSONParser.MrAdapter.public_modelArrayList!!.size) {\n            if (JSONParser.MrAdapter.public_modelArrayList!!.get(i).getSelecteds()) {\n                jsonData_text = jsonData_text + JSONParser.MrAdapter.public_modelArrayList!!.get(i).getJSONID() + \",\"\n            }\n        }\n\n        val jsonSQLQuery = jsonData_text.dropLast(1)\n        val jsonQuery = \"update Notes set acknowledged = 1 WHERE jsonID in (\"+jsonSQLQuery+\")\"\n        Log.d(\"logged_json\", jsonQuery)\n\n    }\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["if-statement", "kotlin", "enums"], "answers": [{"comments": [{"owner": {"reputation": 903, "user_id": 4759182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aeb3a99d91298b5daac0ec647d445b?s=128&d=identicon&r=PG&f=1", "display_name": "rasilvap", "link": "https://stackoverflow.com/users/4759182/rasilvap"}, "edited": false, "score": 0, "creation_date": 1548709595, "post_id": 54409983, "comment_id": 95631504, "body": "I am getting the next message: if over enum entry is not allowed use comparision instead."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "edited": false, "score": 0, "creation_date": 1548747241, "post_id": 54409983, "comment_id": 95641785, "body": "You need to remove <code>is</code>."}], "tags": [], "owner": {"reputation": 5882, "user_id": 1370087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g3ak7.jpg?s=128&g=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/1370087/benjamin"}, "is_accepted": false, "score": 1, "last_activity_date": 1548751578, "last_edit_date": 1548751578, "creation_date": 1548708011, "answer_id": 54409983, "question_id": 54409814, "link": "https://stackoverflow.com/questions/54409814/using-a-kotlin-clause-with-enums-instead-of-multiple-if/54409983#54409983", "title": "Using a kotlin clause with enums instead of multiple if", "body": "<p>Make your input parameter not nullable and change your function to:</p>\n\n<pre><code>override fun presentNativeItem(dcsItem: DCSItem) = when(dcsItem) {\n    NAVMENU -&gt; buildNavMenu(dcsItem)\n    NAVLINK -&gt; buildNavLink(dcsItem)\n    IMAGE -&gt; buildImage(dcsItem)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1694, "user_id": 10172915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dgRVP.png?s=128&g=1", "display_name": "Akaki Kapanadze", "link": "https://stackoverflow.com/users/10172915/akaki-kapanadze"}, "is_accepted": false, "score": 0, "last_activity_date": 1548710184, "creation_date": 1548710184, "answer_id": 54410412, "question_id": 54409814, "link": "https://stackoverflow.com/questions/54409814/using-a-kotlin-clause-with-enums-instead-of-multiple-if/54410412#54410412", "title": "Using a kotlin clause with enums instead of multiple if", "body": "<p>try this:</p>\n\n<pre><code>fun presentNativeItem(dcsItem: DCSItem?): Any {\n    return enumValues&lt;DSCType&gt;().firstOrNull { dcsItem?.type == it.typeName }\n            ?.build(dcsItem)\n            ?: throw IllegalStateException(\"Unknown Type ${dcsItem?.type} of NavItem\")\n}\n\nenum class DSCType(val typeName: String) {\n\n    NAV_MENU(\"NavMenu\") {\n        override fun build(dcsItem: DCSItem?): Any {\n            TODO(\"not implemented\")\n        }\n    },\n\n    NAV_LINK(\"NavLink\") {\n        override fun build(dcsItem: DCSItem?): Any {\n            TODO(\"not implemented\")\n        }\n    },\n\n    IMAGE(\"Image\") {\n        override fun build(dcsItem: DCSItem?): Any {\n            TODO(\"not implemented\")\n        }\n    };\n\n    abstract fun build(dcsItem: DCSItem?): Any\n}\n</code></pre>\n"}], "owner": {"reputation": 903, "user_id": 4759182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8aeb3a99d91298b5daac0ec647d445b?s=128&d=identicon&r=PG&f=1", "display_name": "rasilvap", "link": "https://stackoverflow.com/users/4759182/rasilvap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1548751578, "creation_date": 1548707342, "question_id": 54409814, "link": "https://stackoverflow.com/questions/54409814/using-a-kotlin-clause-with-enums-instead-of-multiple-if", "title": "Using a kotlin clause with enums instead of multiple if", "body": "<p>I am working with the next code: </p>\n\n<pre><code>  override fun presentNativeItem(dcsItem: DCSItem?): Any {\n        if (dcsItem?.type == \"NavMenu\") {\n            return buildNavMenu(dcsItem)\n        } else if (dcsItem?.type == \"NavLink\") {\n            return buildNavLink(dcsItem)\n        } else if (dcsItem?.type == \"Image\") {\n            return buildImage(dcsItem)\n        }\n        else throw IllegalStateException(\"Unknown Type ${dcsItem?.type} of NavItem\")\n    }\n</code></pre>\n\n<p>But instead of using multiple if, I would like to use the next enum: </p>\n\n<pre><code>enum class DSCType {\n    NAVMENU,\n    NAVLINK,\n    IMAGE;\n\n    override fun toString(): String {\n        return this.name.toLowerCase()\n    }\n\n    companion object {\n        fun fromString(value: String?): DSCType? {\n            return when (value?.toLowerCase()) {\n                \"NavMenu\" -&gt; NAVMENU\n                \"NavLink\" -&gt; NAVLINK\n                \"Image\" -&gt; IMAGE\n                else -&gt; null\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Any ideas of how can I achieve that in the kotlin way?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["spring-security", "kotlin", "spring-security-oauth2", "spring-webflux", "csrf-protection"], "answers": [{"tags": [], "owner": {"reputation": 4821, "user_id": 2243324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c50648beed0dbd696b590573785404?s=128&d=identicon&r=PG", "display_name": "jzheaux", "link": "https://stackoverflow.com/users/2243324/jzheaux"}, "is_accepted": true, "score": 1, "last_activity_date": 1549126922, "last_edit_date": 1549126922, "creation_date": 1548715007, "answer_id": 54411308, "question_id": 54408961, "link": "https://stackoverflow.com/questions/54408961/disable-authentication-and-csrf-for-a-given-path-in-spring-weblux/54411308#54411308", "title": "Disable authentication and csrf for a given path in Spring Weblux?", "body": "<p><code>permitAll</code> is a statement about authority only--all the typical web application vulns are still mitigated like XSS and CSRF.</p>\n\n<p>If you are trying to indicate that <code>/devices/**/register</code> should be ignored by Spring Security entirely, then you can do:</p>\n\n<pre><code>http\n    .securityMatcher(new NegatedServerWebExchangeMatcher(\n        pathMatchers(\"/devices/**/register\")))\n    ... omit the permitAll statement\n</code></pre>\n\n<p>But, if you still want that endpoint to get the secure response headers, just not CSRF protection, then you can do:</p>\n\n<pre><code>http\n    .csrf()\n        .requireCsrfProtectionMatcher(new NegatedServerWebExchangeMatcher(\n            pathMatchers(\"/devices/**/register\")))\n    ... keep the permitAll statement\n</code></pre>\n"}], "owner": {"reputation": 21112, "user_id": 296427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8692a55fc3524ed4e7cb85b0b3b4693c?s=128&d=identicon&r=PG", "display_name": "pixel", "link": "https://stackoverflow.com/users/296427/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1674, "favorite_count": 0, "accepted_answer_id": 54411308, "answer_count": 1, "score": 1, "last_activity_date": 1549126969, "creation_date": 1548703654, "last_edit_date": 1549126969, "question_id": 54408961, "link": "https://stackoverflow.com/questions/54408961/disable-authentication-and-csrf-for-a-given-path-in-spring-weblux", "title": "Disable authentication and csrf for a given path in Spring Weblux?", "body": "<p>I would like to enable oauth2 for the whole application except one url.</p>\n\n<p>My configuration:</p>\n\n<pre><code>@EnableWebFluxSecurity\nclass SecurityConfig {\n\n    @Bean\n    fun securityWebFilterChain(http: ServerHttpSecurity) =\n        http\n            .authorizeExchange()\n            .pathMatchers(\"/devices/**/register\").permitAll()\n            .and()\n            .oauth2Login().and()\n            .build()\n}\n</code></pre>\n\n<p>application.yml:</p>\n\n<pre><code>spring.security.oauth2.client.registration.google.client-id: ...\nspring.security.oauth2.client.registration.google.client-secret: ...\n</code></pre>\n\n<p>All the paths are being protected with oauth2 but the problem is that when I call an endpoint that is permitted <code>/devices/123/register</code> then in response I get:</p>\n\n<p><code>CSRF Token has been associated to this client</code></p>\n\n<p>Do I need to configure this path in a different way?</p>\n"}, {"tags": ["android", "kotlin", "singleton", "android-context"], "answers": [{"comments": [{"owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 1, "creation_date": 1548783590, "post_id": 54408703, "comment_id": 95663506, "body": "Can you give a simple example of Option 2? I read through the Koin documentation and I couldn&#39;t figure out how to create a singleton that has access to a <code>Context</code>"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548784010, "post_id": 54408703, "comment_id": 95663726, "body": "@Roymunson: <a href=\"https://insert-koin.io/docs/1.0/documentation/reference/index.html#_getting_android_context_inside_a_module\" rel=\"nofollow noreferrer\">insert-koin.io/docs/1.0/documentation/reference/&hellip;</a>"}, {"owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548785866, "post_id": 54408703, "comment_id": 95664636, "body": "Thanks. I added my solution, which uses Koin, to the bottom of my post. Can you take a quick look at it? I&#39;ve never used dependency injection before, so I don&#39;t know if I&#39;m doing it right. If my recipe is correct, will I be able to use it to access <code>NetworkUtils</code> in any <code>Activity</code> or <code>Fragment</code> with a simple <code>val networkUtils : NetworkUtils by inject()</code>?"}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548786157, "post_id": 54408703, "comment_id": 95664780, "body": "@Roymunson: Ah, I forgot about a documentation gap: <code>androidContext()</code> returns the <code>Application</code> typed as <code>Context, but </code>androidApplication()` returns the <code>Application</code> as <code>Application</code>. So, I&#39;d use <code>androidApplication()</code>, and have <code>class  NetworkUtils(val app: Application)</code>, to make <i>really</i> sure that you have the <code>Application</code> singleton."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548786201, "post_id": 54408703, "comment_id": 95664794, "body": "@Roymunson: &quot;will I be able to use it to access NetworkUtils in any Activity or Fragment with a simple val networkUtils : NetworkUtils by inject()?&quot; -- yes, that should work."}, {"owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548786665, "post_id": 54408703, "comment_id": 95665035, "body": "What is the benefit of using <code>androidApplication()</code> and <code>class NetworkUtils(val app: Application)</code> instead of using <code>androidContext()</code> and <code>class NetworkUtils(val context: Context)</code>. Since <code>context</code> is no longer a static field, it does not seem to matter what type of <code>context</code> the class <code>NetworkUtils</code> has access to."}, {"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "reply_to_user": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "edited": false, "score": 0, "creation_date": 1548786804, "post_id": 54408703, "comment_id": 95665100, "body": "@Roymunson: Well, the objective was to avoid the memory leak. <i>Presumably</i>, Koin has no bugs, and <code>androidContext()</code> really does return the <code>Application</code>. Personally, I like to add the extra type safety, to make damn sure I am getting the <code>Application</code>. And while <code>context</code> is not <code>static</code>, Koin is holding the <code>NetworkUtils</code> (<code>single</code>), and therefore the <code>NetworkUtils</code> cannot be garbage collected."}], "tags": [], "owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "is_accepted": true, "score": 11, "last_activity_date": 1548702518, "creation_date": 1548702518, "answer_id": 54408703, "question_id": 54408667, "link": "https://stackoverflow.com/questions/54408667/memory-leak-free-singleton-with-context/54408703#54408703", "title": "Memory-leak free Singleton with context", "body": "<p>Option #1: Have <code>getInstance(Context)</code> call <code>applicationContext</code> on the supplied <code>Context</code> and hold that. The <code>Application</code> singleton is created when your process is and lives for the life of the process. It is pre-leaked; you cannot leak it further.</p>\n\n<p>Option #2: Get rid of <code>getInstance()</code> and set up some form of dependency injection (Dagger 2, Koin, etc.). There are recipes for these DI frameworks to have them supply the <code>Application</code> singleton to the singletons that they create and inject downstream.</p>\n"}, {"comments": [{"owner": {"reputation": 77347, "user_id": 1631193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c713494416ceac454d71c524e15f1c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gabe Sechan", "link": "https://stackoverflow.com/users/1631193/gabe-sechan"}, "edited": false, "score": 0, "creation_date": 1548706199, "post_id": 54408797, "comment_id": 95629917, "body": "That won&#39;t actually solve his problem.  In fact it would make it worse, as now you&#39;re majorly broken if the user hits back or you have a Service."}], "tags": [], "owner": {"reputation": 368, "user_id": 10306808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r99NiB90yh4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPYrdDvyaLIDp3-LlHfdbKdeVgDfg/mo/photo.jpg?sz=128", "display_name": "rgaraisayev", "link": "https://stackoverflow.com/users/10306808/rgaraisayev"}, "is_accepted": false, "score": -1, "last_activity_date": 1548702889, "creation_date": 1548702889, "answer_id": 54408797, "question_id": 54408667, "link": "https://stackoverflow.com/questions/54408667/memory-leak-free-singleton-with-context/54408797#54408797", "title": "Memory-leak free Singleton with context", "body": "<p>if You must create singleton class with context involved, you can do it like this. This will help. In this case, your context will be reset in every activity, when you call getInstance(context). </p>\n\n<pre><code>public class MyClass {\n\n    private Context context;\n\n    public static getInstance(Context context){\n         if(instance ==null)\n             instance = new MyClass();\n         instance.setContext(context);\n         return instance;\n    }\n\n   public void setContext(Context context){\n      this.context = context;\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7017, "user_id": 816416, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cea2d43b65bd3fbc1a0991c30ace34f6?s=128&d=identicon&r=PG", "display_name": "Vishnu Haridas", "link": "https://stackoverflow.com/users/816416/vishnu-haridas"}, "is_accepted": false, "score": 0, "last_activity_date": 1548705036, "creation_date": 1548705036, "answer_id": 54409279, "question_id": 54408667, "link": "https://stackoverflow.com/questions/54408667/memory-leak-free-singleton-with-context/54409279#54409279", "title": "Memory-leak free Singleton with context", "body": "<p>When you call the <code>getInstance()</code> for the first time, the <code>Context</code> that you pass to this function is saved forever. So, the context in further <code>getInstance()</code> calls doesn't have anything to do there. I never save this <code>Context</code>.</p>\n\n<p>This is what I am doing: </p>\n\n<p>Create an <code>object</code> in Kotlin and initialize the object with a context as soon as the app starts. Instead of storing the context, I perform whichever operation is required with that context.</p>\n\n<pre><code>object PreferenceHelper {\n\n    private var prefs: SharedPreferences? = null\n\n    fun initWith(context: Context){\n        if(prefs == null) this.prefs = context.getSharedPreferences(\"prefs\", Context.MODE_PRIVATE)\n    }\n\n    fun someAction(){ .... }\n}\n</code></pre>\n\n<p>and inside the <code>Application</code> class:</p>\n\n<pre><code>class MyApp: Application(){\n   override fun onCreate(){\n      PreferenceHelper.initWith(this)\n   }\n }\n</code></pre>\n\n<p>and later anywhere in the app:</p>\n\n<pre><code> PreferenceHelper.someAction()\n</code></pre>\n\n<p>You can do this if you don't need a reference to the <code>Context</code> every time you perform something with the Singleton class.</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 6275174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2VQA5.jpg?s=128&g=1", "display_name": "Nicola Gallazzi", "link": "https://stackoverflow.com/users/6275174/nicola-gallazzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548770509, "creation_date": 1548770509, "answer_id": 54422787, "question_id": 54408667, "link": "https://stackoverflow.com/questions/54408667/memory-leak-free-singleton-with-context/54422787#54422787", "title": "Memory-leak free Singleton with context", "body": "<p>I would not store the context in the SingletonClass, I would simply pass the context to each method of the class via dependency injection.\nSomething like:</p>\n\n<pre><code>SingletonClass.callMethod(context)\n</code></pre>\n\n<p>Define the \"static\" method in the companion object like that:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code> companion object {\n        fun callMethod(context: Context) {\n            // do Something\n        }\n    }\n</code></pre>\n\n<p>Then call it from your activity with:</p>\n\n<pre><code>SingletonClass.callMethod(this)\n</code></pre>\n\n<p>Hope that it helps :)</p>\n"}], "owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2322, "favorite_count": 1, "accepted_answer_id": 54408703, "answer_count": 4, "score": 5, "last_activity_date": 1551800098, "creation_date": 1548702371, "last_edit_date": 1551800098, "question_id": 54408667, "link": "https://stackoverflow.com/questions/54408667/memory-leak-free-singleton-with-context", "title": "Memory-leak free Singleton with context", "body": "<p>I am trying to implement the following singleton pattern: <code>SingletonClass.getInstance(context).callMethod()</code></p>\n\n<p>While there are a variety of tutorials that explain how to make singletons in Kotlin, none of them address the fact that holding a <code>context</code> in a static field will cause memory leaks in Android.</p>\n\n<p>How do I create the above pattern without creating a memory leak? </p>\n\n<p>Update:</p>\n\n<p>Here is my implementation of CommonsWare's solution #2. I used Koin.</p>\n\n<p>Singleton class:</p>\n\n<pre><code>class  NetworkUtils(val context: Context) {\n\n}\n</code></pre>\n\n<p>Application Class:</p>\n\n<pre><code>class MyApplication : Application() {\n\n    val appModule = module {\n        single { NetworkUtils(androidContext()) }\n    }\n\n    override fun onCreate() {\n        super.onCreate()\n        startKoin(this, listOf(appModule))\n    }\n}\n</code></pre>\n\n<p>Activity class:</p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\n    val networkUtils : NetworkUtils by inject()\n\n}\n</code></pre>\n"}, {"tags": ["android", "xml", "kotlin", "android-constraintlayout", "android-gridlayout"], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 2607738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571796baa99b24c4be39d8c685aec55a?s=128&d=identicon&r=PG", "display_name": "rafa", "link": "https://stackoverflow.com/users/2607738/rafa"}, "is_accepted": true, "score": 2, "last_activity_date": 1548732477, "creation_date": 1548732477, "answer_id": 54413429, "question_id": 54408501, "link": "https://stackoverflow.com/questions/54408501/same-height-and-width-for-cells-in-grid-layout-android-kotlin/54413429#54413429", "title": "Same height and width for cells in grid layout android/kotlin", "body": "<p>You can dynamically calculate the width of the device screen and set the height of the item view accordingly.</p>\n\n<p>Add the below util method for calculating size to your adapter class.</p>\n\n<pre><code>     /**\n     * calculates the size of the item based on the screen size\n     */\n    fun calculateSizeOfView(context: Context): Int {\n\n        val displayMetrics = context.resources.displayMetrics\n        val dpWidth = displayMetrics.widthPixels\n        return (dpWidth / COLUMN_COUNT) // COLUMN_COUNT would be 4 in your case\n    }\n</code></pre>\n\n<p>Now add the below lines of code inside onCreateViewHolder method of your adapter class.</p>\n\n<p>1) get the size of each item from the util method</p>\n\n<p>2) create layout params - both height and width as above calculated value</p>\n\n<p>3) set the params to your inflated view inside the OnCreateViewHolder</p>\n\n<pre><code>val view = *your_inflated_view* // the return view of your .inflate method\nval size = calculateSizeOfView(*your_context*)\n\nval margin = 8 * 4 // any vertical spacing margin = your_margin * column_count \nval layoutParams = GridLayout.LayoutParams(ViewGroup.LayoutParams(size - margin, size)) // width and height\n\nlayoutParams.bottomMargin = 8 // horizontal spacing if needed\n\nview.layoutParams = layoutParams\n\nreturn *your_view_holder_with_view* // usual return\n</code></pre>\n"}], "owner": {"reputation": 5883, "user_id": 4420355, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/496f3c375711d2f45f0d913c0d1851dc?s=128&d=identicon&r=PG", "display_name": "kuzdu", "link": "https://stackoverflow.com/users/4420355/kuzdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1791, "favorite_count": 0, "accepted_answer_id": 54413429, "answer_count": 1, "score": 1, "last_activity_date": 1548732477, "creation_date": 1548701708, "question_id": 54408501, "link": "https://stackoverflow.com/questions/54408501/same-height-and-width-for-cells-in-grid-layout-android-kotlin", "title": "Same height and width for cells in grid layout android/kotlin", "body": "<p>How do I get a recycler view with a gridlayout where every cells have the same cell width and cell height dependent to the screen width. </p>\n\n<p>I set my layout like this </p>\n\n<pre><code>linearLayoutManager = LinearLayoutManager(this)\ncategoriesRecyclerView.layoutManager = GridLayoutManager(this,4)\n</code></pre>\n\n<p>and I got always 4 cells in a row.</p>\n\n<p>The result looks like this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lwKva.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lwKva.png\" alt=\"enter image description here\"></a></p>\n\n<p>I understand why I got this result. I set my content inside the cells always to <code>wrap_content</code>. So when the image is bigger or the the text is longer the height will change.</p>\n\n<p>My layout is defined like this: </p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\napp:layout_constraintDimensionRatio=\"1:1\"\nandroid:layout_margin=\"8dp\"\nandroid:background=\"@drawable/rounded_image_view\"&gt;\n</code></pre>\n\n<p><code>rounded_image_view</code> is just a shape.</p>\n\n<p>I thought that I could regulate the constraint layout with help of the ratio. </p>\n\n<p>Some other things I tried: Use cards, use linear layout, put the content inside a <code>View</code>, worked with <code>constraintHeight_percent</code> and I read a lot in similar threads like this. But I didn't get a solution.</p>\n\n<p>The full xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\"\napp:layout_constraintDimensionRatio=\"1:1\"\nandroid:layout_margin=\"8dp\"\napp:layout_constraintHeight_percent=\"0.5\"\nandroid:background=\"@drawable/rounded_image_view\"&gt;\n\n&lt;ImageView\n    android:id=\"@+id/categoryImage\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    app:layout_constraintBottom_toTopOf=\"@id/itemTitle\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:srcCompat=\"@drawable/anatomie\" /&gt;\n\n&lt;TextView\n    android:id=\"@+id/itemTitle\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:gravity=\"center\"\n    android:text=\"Anatomie\"\n    android:textColor=\"@color/colorAccent\"\n    android:textSize=\"12sp\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\"\n    app:layout_constraintTop_toBottomOf=\"@+id/categoryImage\" /&gt;\n\n&lt;ImageView\n    android:id=\"@+id/isPremiumImage\"\n    android:layout_width=\"20dp\"\n    android:layout_height=\"20dp\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintTop_toTopOf=\"parent\"\n    app:srcCompat=\"@drawable/locked\" /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "lambda", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 5, "last_activity_date": 1548700620, "creation_date": 1548700620, "answer_id": 54408271, "question_id": 54408196, "link": "https://stackoverflow.com/questions/54408196/how-to-use-a-lambda-instead-of-a-kotlin-interface/54408271#54408271", "title": "How to use a lambda instead of a kotlin interface", "body": "<p>You have two options:</p>\n\n<p>1.) replace interface with typealias</p>\n\n<pre><code>typealias ItemLongClick = (Context, Int, View) -&gt; Unit\n</code></pre>\n\n<p>2.) add an extension function for setting the interface as a lambda instead of with anonymous object</p>\n\n<pre><code>inline fun UserAdapter.setItemLongClick(crossinline longClick: (Context, Int, View) -&gt; Unit) {\n    setItemLongClick(object: ItemLongClick {\n        override fun longClicked(context: Context, position: Int, view: View) {\n            longClick(context, position, view)\n        }\n    })\n}\n</code></pre>\n\n<p>Now you can call</p>\n\n<pre><code>userAdapter.setItemLongClick { context, position, view -&gt; \n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 10480684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831be3899b243c8b7d680bbbea7c1fea?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Cavalheiro Becker", "link": "https://stackoverflow.com/users/10480684/alexander-cavalheiro-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1548700795, "creation_date": 1548700795, "answer_id": 54408308, "question_id": 54408196, "link": "https://stackoverflow.com/questions/54408196/how-to-use-a-lambda-instead-of-a-kotlin-interface/54408308#54408308", "title": "How to use a lambda instead of a kotlin interface", "body": "<p>I had an adapter that i need to change the data based on a switch and i did something like this:</p>\n\n<pre><code>ListAdapter(private val context: Context, private val switchListener: (Boolean) -&gt; Unit)\n</code></pre>\n\n<p>Then where i binded the header of my sectioned list i had:</p>\n\n<pre><code>private fun bindHeader(holder: HeaderViewHolder) {\n        holder.switch.setOnCheckedChangeListener { _, isChecked -&gt;\n            callbackSwitchListener(isChecked)\n        }\n    }\n</code></pre>\n\n<p>And in my fragment:</p>\n\n<pre><code>private fun setupRecyclerView() {\n        fabricationDataListAdapter =\n                FabricationDataListAdapter(context!!) { isChecked: Boolean -&gt; switchControl(isChecked) }\n        val layoutManager = ListLayoutManager(context!!)\n        this.recycler_view_all.layoutManager = layoutManager\n        this.recycler_view_all.adapter = fabricationDataListAdapter\n    }\n</code></pre>\n\n<p>Where the fun switchControl changed the data based on the boolean.</p>\n\n<p>I'm not sure if this is what you need, i'm in a bit of a hurry, but this is called high order functions in kotlin, if i'm not mistaken.</p>\n"}, {"tags": [], "owner": {"reputation": 2095, "user_id": 4685284, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/z0299.jpg?s=128&g=1", "display_name": "Shahbaz Hashmi", "link": "https://stackoverflow.com/users/4685284/shahbaz-hashmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1572854650, "last_edit_date": 1572854650, "creation_date": 1572854321, "answer_id": 58689240, "question_id": 54408196, "link": "https://stackoverflow.com/questions/54408196/how-to-use-a-lambda-instead-of-a-kotlin-interface/58689240#58689240", "title": "How to use a lambda instead of a kotlin interface", "body": "<p>In below code I using filterable adapter to do search on list. Here I am using <strong>lambda</strong> as callback to notify to view model when no data is found for the search.</p>\n\n<p>Instantiating Adapter in ViewModel. And passing lambda</p>\n\n<pre><code>var matterAdapter = MatterAdapter(matterList) {\n    //todo - got callback\n}\n</code></pre>\n\n<p>Adapter</p>\n\n<pre><code>class MatterAdapter (var filteredList : MutableList&lt;AndroidViewModel&gt;, val funcNoSearchData : () -&gt; Unit) : DataBindingRecyclerViewAdapter(filteredList), Filterable {\n\nprivate var mViewModelMap: MutableMap&lt;Class&lt;*&gt;, Int&gt; = mutableMapOf()\n\nprivate var originalList : MutableList&lt;AndroidViewModel&gt; = mutableListOf()\n\nprivate val mFilter = ItemFilter()\n\ninit {\n    mViewModelMap.put(MatterRowViewModel::class.java, R.layout.row_matter)\n}\n\noverride fun getViewModelLayoutMap(): MutableMap&lt;Class&lt;*&gt;, Int&gt; {\n    return mViewModelMap\n}\n\noverride fun getFilter(): Filter {\n    return mFilter\n}\n\nprivate inner class ItemFilter : Filter() {\n    override fun performFiltering(constraint: CharSequence): FilterResults {\n\n        val filterString = constraint.toString().toLowerCase()\n\n        val results = FilterResults()\n\n        val list = originalList\n\n        val count = list.size\n        val nlist = ArrayList&lt;AndroidViewModel&gt;(count)\n\n        var filterableString: String\n\n        for (i in 0 until count) {\n            filterableString = (list.get(i) as MatterRowViewModel).matter.casestitle!!\n            if (filterableString.toLowerCase().contains(filterString)) {\n                nlist.add(list.get(i))\n            }\n        }\n\n        results.values = nlist\n        results.count = nlist.size\n\n        return results\n    }\n\n    override fun publishResults(constraint: CharSequence, results: Filter.FilterResults) {\n        filteredList.clear()\n        filteredList.addAll(results.values as ArrayList&lt;AndroidViewModel&gt;)\n        // sends empty search callback to viewmodel\n        if(filteredList.size == 0) {\n            funcNoSearchData()\n        }\n        notifyDataSetChanged()\n    }\n  }\n\n  fun resetSearch() {\n      filteredList.clear()\n      filteredList.addAll(originalList)\n      notifyDataSetChanged()\n  }\n\n  fun refreshData() {\n      originalList = ArrayList(filteredList)\n      notifyDataSetChanged()\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13958, "user_id": 689723, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rQNO2.jpg?s=128&g=1", "display_name": "cesards", "link": "https://stackoverflow.com/users/689723/cesards"}, "is_accepted": false, "score": 0, "last_activity_date": 1599534671, "last_edit_date": 1599534671, "creation_date": 1599532376, "answer_id": 63786383, "question_id": 54408196, "link": "https://stackoverflow.com/questions/54408196/how-to-use-a-lambda-instead-of-a-kotlin-interface/63786383#63786383", "title": "How to use a lambda instead of a kotlin interface", "body": "<p>As the Kotlin <a href=\"https://kotlinlang.org/docs/reference/whatsnew14.html#sam-conversions-for-kotlin-interfaces\" rel=\"nofollow noreferrer\">documentation</a> for the Kotlin 1.4 release points out:</p>\n<blockquote>\n<p>Before Kotlin 1.4.0, you could apply SAM (Single Abstract Method) conversions only when working with Java methods and Java interfaces from Kotlin. From now on, you can use SAM conversions for Kotlin interfaces as well. To do so, mark a Kotlin interface explicitly as functional with the fun modifier.</p>\n</blockquote>\n<pre><code>fun interface Operation1 {\n    operator fun invoke(x: String): String\n}\n\nfun interface Operation2 {\n    fun doSomething(x: Int): String\n}\n\nval operation1 = Operation1 { &quot;$it world!&quot; }\nval operation2 = Operation2 { &quot;$it world!&quot; }\n\nfun main() {\n    // Usage: First sample.\n    println(operation1(&quot;Hello&quot;))\n    println(operation2.doSomething(0))\n    // Usage: Second sample.\n    println(Operation1 { &quot;$it world!&quot; }(&quot;Hello&quot;))\n    println(Operation2 { &quot;$it!&quot; }.doSomething(0))\n}\n</code></pre>\n<p>You can read more about functional interfaces <a href=\"https://kotlinlang.org/docs/reference/fun-interfaces.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 347, "user_id": 2712869, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/038abb6011ead5a1e7dccadbc12dbb1a?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/2712869/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1863, "favorite_count": 1, "accepted_answer_id": 54408271, "answer_count": 4, "score": 3, "last_activity_date": 1599534671, "creation_date": 1548700284, "last_edit_date": 1548700799, "question_id": 54408196, "link": "https://stackoverflow.com/questions/54408196/how-to-use-a-lambda-instead-of-a-kotlin-interface", "title": "How to use a lambda instead of a kotlin interface", "body": "<p>I have a recycler view adapter in android. Part of my adapter class looks like this:</p>\n\n<pre><code>private lateinit var itemLongClick: ItemLongClick\n\noverride fun onCreateViewHolder(parent: ViewGroup, a: Int): RecyclerAdapter.ViewHolder {\n\n      // Define And Initialize The Custom View And Its Holder//\n      val myView = LayoutInflater.from(parent.context).inflate(customLayout, parent, false)\n      val viewHolder = ViewHolder(myView)\n\n      // What Happens When A List Item Is Long Clicked//\n      myView.setOnLongClickListener { view -&gt;\n\n          // Differ Action To Class Instance//\n          itemLongClick.longClicked(context, viewHolder.layoutPosition, view)\n\n          // End Function//\n          true\n      }\n\n      // Returns The Custom View//\n      return viewHolder\n}\n\nfun setItemLongClick(itemLongClick: ItemLongClick) {\n\n    // Sets The Value For this.itemLongClick//\n    this.itemLongClick = itemLongClick\n}    \n</code></pre>\n\n<p>I created an interface tat looks like this:</p>\n\n<pre><code>interface ItemLongClick {\n\n    // Function Declaration For When An Item Is Long Clicked//\n    fun longClicked(context: Context, position: Int, view: View)\n}\n</code></pre>\n\n<p>Instead of writing my on long click code in the adapter class I want to differ it to the activity that is calling the adapter class. I know one way of doing this is to make a kotlin interface then call it in the other class like this</p>\n\n<pre><code>  userAdapter.setItemLongClick(object: ItemLongClick {\n        override fun longClicked(context: Context, position: Int, view: View) {\n\n        }\n    })\n</code></pre>\n\n<p>But this looks messy. I know java interfaces work with SAM but I don't want to do that either. What I want is for the onLongClick to be a Lambda but I'm not sure how to set up a Kotlin lambda expression to make this work and I can't find a good example anywhere.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "scroll", "android-recyclerview", "disable"], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 4455263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003340779875/picture?type=large", "display_name": "Oleksandr Nos", "link": "https://stackoverflow.com/users/4455263/oleksandr-nos"}, "edited": false, "score": 0, "creation_date": 1548756610, "post_id": 54411441, "comment_id": 95646744, "body": "Thank you a lot! I&#39;d like to add, that I update setScrollEnabled() after I update dataset for the RecyclerView this way: <code>recycler_view.post { &#47;* scroll check here*&#47;  }</code>"}], "tags": [], "owner": {"reputation": 313, "user_id": 5531164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fddc8bd2fbd9b5ed1cd5d78c6a2d4e55?s=128&d=identicon&r=PG&f=1", "display_name": "frumle", "link": "https://stackoverflow.com/users/5531164/frumle"}, "is_accepted": true, "score": 1, "last_activity_date": 1548717153, "last_edit_date": 1548717153, "creation_date": 1548715926, "answer_id": 54411441, "question_id": 54406833, "link": "https://stackoverflow.com/questions/54406833/recyclerview-disable-scroll-if-there-is-enough-room-for-all-items/54411441#54411441", "title": "RecyclerView: disable scroll if there is enough room for all items", "body": "<p>Try to enable scrolling before you check if view is scrollable.\nLet see the implementation (java) of <code>computeVerticalScrollRange</code> method.</p>\n\n<pre><code>@Override\npublic int computeVerticalScrollRange() {\n    if (mLayout == null) {\n        return 0;\n    }\n    return mLayout.canScrollVertically() ? mLayout.computeVerticalScrollRange(mState) : 0;\n}\n</code></pre>\n\n<p>Once you have disabled scrolling you will always get zero scroll range in your case. So I think this should help</p>\n\n<pre><code>// set 'isScrollEnabled' true    \n(category_items_list.layoutManager as CustomGridLayoutManager).setScrollEnabled(true)\n\nval isScrollableVertically = items_list.isScrollableVertically()\n(category_items_list.layoutManager as CustomGridLayoutManager).setScrollEnabled(isScrollableVertically)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 993, "user_id": 6051346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd2c97825125eab8907e3125cf0cfac?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Narvaez", "link": "https://stackoverflow.com/users/6051346/ivan-narvaez"}, "is_accepted": false, "score": 2, "last_activity_date": 1595862079, "last_edit_date": 1595862079, "creation_date": 1560360679, "answer_id": 56567569, "question_id": 54406833, "link": "https://stackoverflow.com/questions/54406833/recyclerview-disable-scroll-if-there-is-enough-room-for-all-items/56567569#56567569", "title": "RecyclerView: disable scroll if there is enough room for all items", "body": "<p>The following code works for me in Kotlin:</p>\n<pre><code>recyclerView.addOnScrollListener(object : RecyclerView.OnScrollListener() {\n    override fun onScrollStateChanged( recyclerView: RecyclerView, newState: Int) {\n        super.onScrollStateChanged(recyclerView, newState)\n            // recyclerView.layoutManager!!.childCount) returns the number of visible items\n            if (data.size &lt;= recyclerView.layoutManager!!.childCount)\n                recyclerView.stopScroll()\n            }\n})\n</code></pre>\n<p>This is called in the Activity/Fragment where you set the adapter for your recyclerView</p>\n<p>EDIT: I've actually found that this condition works in more situations:</p>\n<p><code>if (recyclerView.computeVerticalScrollRange() &lt; recyclerView.height)</code></p>\n"}], "owner": {"reputation": 244, "user_id": 4455263, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100003340779875/picture?type=large", "display_name": "Oleksandr Nos", "link": "https://stackoverflow.com/users/4455263/oleksandr-nos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 54411441, "answer_count": 2, "score": 1, "last_activity_date": 1595862079, "creation_date": 1548694712, "question_id": 54406833, "link": "https://stackoverflow.com/questions/54406833/recyclerview-disable-scroll-if-there-is-enough-room-for-all-items", "title": "RecyclerView: disable scroll if there is enough room for all items", "body": "<p>I have a huge <code>RecyclerView</code> with <code>GridLayoutManager</code>.\nSometimes there's a small number of items shown, and I need to disable scroll in this case. Scroll should be enabled only when there're too many items to be shown in a RecyclerView, so scroll is needed.</p>\n\n<p><strong>Why?</strong>\nBecause when a user clicks fast enough on items, the click listener is not triggered. User accidentally moves a RecyclerView a bit. Recycler's <code>onTouchListener</code> gets <code>EVENT_MOVE</code> and consumes the event.</p>\n\n<p>I've tried to create custom GridLayoutManager with overridden <code>canScrollVertically()</code> method:</p>\n\n<pre><code>override fun canScrollVertically(): Boolean {\n    return super.canScrollVertically() &amp;&amp; isScrollEnabled\n}\n</code></pre>\n\n<p>I use this function to check if the RecyclerView is scrollable:</p>\n\n<pre><code>fun RecyclerView.isScrollableVertically(): Boolean {\n    return computeVerticalScrollRange() &gt; height\n}\n</code></pre>\n\n<p>Then, I update isScrollEnable field:</p>\n\n<pre><code>val isScrollableVertically = items_list.isScrollableVertically()\n(category_items_list.layoutManager as CustomGridLayoutManager).setScrollEnabled(isScrollableVertically)\n</code></pre>\n\n<p>But even when there are a lot of items to show, <code>items_list.isScrollableVertically()</code> returns false.</p>\n\n<hr>\n\n<p>I'm trying a lot of things to disable scroll when there's enough room for all items, but I haven't found a proper way to do this for a day.\nI will appreciate any help!</p>\n"}, {"tags": ["java", "android", "kotlin", "timestamp", "utc"], "comments": [{"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 2, "creation_date": 1548689167, "post_id": 54405146, "comment_id": 95620796, "body": "&quot;without using an extern API&quot; you&#39;re going to need to talk to <i>something</i>."}, {"owner": {"reputation": 109, "user_id": 10697801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FHX4C12vDV4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g8_rPQu83Iwz2pwMT-HxK2agKcmw/mo/photo.jpg?sz=128", "display_name": "King Dingeling", "link": "https://stackoverflow.com/users/10697801/king-dingeling"}, "reply_to_user": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1548689467, "post_id": 54405146, "comment_id": 95621004, "body": "But what is android using to set the current time automatically? So far I used an extern API but there was trouble since the latest patch which I fixed. But I don&#39;t want to worry with every damn android update so I want to use as few APIs as possible in general"}, {"owner": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "edited": false, "score": 1, "creation_date": 1548689580, "post_id": 54405146, "comment_id": 95621075, "body": "@KingDingeling That would be a <a href=\"https://en.wikipedia.org/wiki/Network_Time_Protocol\" rel=\"nofollow noreferrer\">Network Time Protocol</a> server, which would be an external resource. Otherwise a phone is reliant on its internal clock, which as you mentioned can be changed."}, {"owner": {"reputation": 64281, "user_id": 5772882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58mlb.png?s=128&g=1", "display_name": "Ole V.V.", "link": "https://stackoverflow.com/users/5772882/ole-v-v"}, "edited": false, "score": 1, "creation_date": 1548691201, "post_id": 54405146, "comment_id": 95622168, "body": "See <a href=\"https://stackoverflow.com/questions/13064750/how-to-get-current-time-from-internet-in-android\">How to get current time from internet in android</a>. Search for more similar questions and answers."}], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 5759716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Df6cHI8KWD4/AAAAAAAAAAI/AAAAAAAAMwc/w97owknFTVk/photo.jpg?sz=128", "display_name": "Maksim Novikov", "link": "https://stackoverflow.com/users/5759716/maksim-novikov"}, "reply_to_user": {"reputation": 109, "user_id": 10697801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FHX4C12vDV4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g8_rPQu83Iwz2pwMT-HxK2agKcmw/mo/photo.jpg?sz=128", "display_name": "King Dingeling", "link": "https://stackoverflow.com/users/10697801/king-dingeling"}, "edited": false, "score": 0, "creation_date": 1548689762, "post_id": 54405264, "comment_id": 95621199, "body": "Ok, we all wish we could get real time without relating on device clock :D"}, {"owner": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1548694017, "post_id": 54405264, "comment_id": 95624018, "body": "NTP is a nice well-known protocol for this. <a href=\"https://stackoverflow.com/questions/2817475/java-get-current-date-and-time-from-server-not-system-clock\" title=\"java get current date and time from server not system clock\">stackoverflow.com/questions/2817475/&hellip;</a>"}, {"owner": {"reputation": 683, "user_id": 5759716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Df6cHI8KWD4/AAAAAAAAAAI/AAAAAAAAMwc/w97owknFTVk/photo.jpg?sz=128", "display_name": "Maksim Novikov", "link": "https://stackoverflow.com/users/5759716/maksim-novikov"}, "reply_to_user": {"reputation": 16268, "user_id": 603270, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cbfe6e57e0fa59928be4898a7be08c5d?s=128&d=identicon&r=PG", "display_name": "shkschneider", "link": "https://stackoverflow.com/users/603270/shkschneider"}, "edited": false, "score": 0, "creation_date": 1548694265, "post_id": 54405264, "comment_id": 95624157, "body": "as @Michael Dodd said NTP use external API"}], "tags": [], "owner": {"reputation": 683, "user_id": 5759716, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Df6cHI8KWD4/AAAAAAAAAAI/AAAAAAAAMwc/w97owknFTVk/photo.jpg?sz=128", "display_name": "Maksim Novikov", "link": "https://stackoverflow.com/users/5759716/maksim-novikov"}, "is_accepted": true, "score": 5, "last_activity_date": 1548689486, "creation_date": 1548689486, "answer_id": 54405264, "question_id": 54405146, "link": "https://stackoverflow.com/questions/54405146/android-kotlin-java-get-current-world-time-utc-in-seconds-since-1970/54405264#54405264", "title": "Android Kotlin / JAVA - get current world time / UTC in seconds since 1970", "body": "<p>No, the only way to get time NOT based on device clock is to request it from some Web API service.</p>\n"}], "owner": {"reputation": 109, "user_id": 10697801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FHX4C12vDV4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g8_rPQu83Iwz2pwMT-HxK2agKcmw/mo/photo.jpg?sz=128", "display_name": "King Dingeling", "link": "https://stackoverflow.com/users/10697801/king-dingeling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1637, "favorite_count": 0, "accepted_answer_id": 54405264, "answer_count": 1, "score": 2, "last_activity_date": 1548689486, "creation_date": 1548689118, "question_id": 54405146, "link": "https://stackoverflow.com/questions/54405146/android-kotlin-java-get-current-world-time-utc-in-seconds-since-1970", "title": "Android Kotlin / JAVA - get current world time / UTC in seconds since 1970", "body": "<p>As the title says I need the current workd time in seconds since 1970.</p>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>System.currentTimeMillis()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>val df = DateFormat.getTimeInstance()\ndf.setTimeZone(TimeZone.getTimeZone(\"gmt\"))\nval gmtTime = df.format(Date())\n</code></pre>\n\n<p>But both are showing the time which is based on the phone time, so when a user changes the phone time manually it will be affected</p>\n\n<p>Is there a way to get the current workd time in seconds without using an extern API?</p>\n"}, {"tags": ["android", "arrays", "audio", "kotlin", "aac"], "comments": [{"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1549321680, "post_id": 54404711, "comment_id": 95853591, "body": "This doesn&#39;t look like Android Java code... Variables are not declared like this and there is no such <code>toByte()</code> method."}, {"owner": {"reputation": 11, "user_id": 9353184, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uX1BUrZSrAo/AAAAAAAAAAI/AAAAAAAAACI/c58nkE9THjA/photo.jpg?sz=128", "display_name": "Vesyoliy", "link": "https://stackoverflow.com/users/9353184/vesyoliy"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 1, "creation_date": 1549364427, "post_id": 54404711, "comment_id": 95867250, "body": "This is Kotlin!"}, {"owner": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1549365323, "post_id": 54404711, "comment_id": 95867747, "body": "Can you tell us the first 7 bytes (ADTS) of your output <code>.aac</code> file? Use a hex editor to check the file bytes."}, {"owner": {"reputation": 11, "user_id": 9353184, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uX1BUrZSrAo/AAAAAAAAAAI/AAAAAAAAACI/c58nkE9THjA/photo.jpg?sz=128", "display_name": "Vesyoliy", "link": "https://stackoverflow.com/users/9353184/vesyoliy"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1549459640, "post_id": 54404711, "comment_id": 95909211, "body": "fff9 6040 60ff fc"}, {"owner": {"reputation": 11, "user_id": 9353184, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uX1BUrZSrAo/AAAAAAAAAAI/AAAAAAAAACI/c58nkE9THjA/photo.jpg?sz=128", "display_name": "Vesyoliy", "link": "https://stackoverflow.com/users/9353184/vesyoliy"}, "reply_to_user": {"reputation": 12172, "user_id": 2057709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0R41X.png?s=128&g=1", "display_name": "VC.One", "link": "https://stackoverflow.com/users/2057709/vc-one"}, "edited": false, "score": 0, "creation_date": 1549459661, "post_id": 54404711, "comment_id": 95909218, "body": "or fff1 6040 60ff fc, no difference"}], "owner": {"reputation": 11, "user_id": 9353184, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uX1BUrZSrAo/AAAAAAAAAAI/AAAAAAAAACI/c58nkE9THjA/photo.jpg?sz=128", "display_name": "Vesyoliy", "link": "https://stackoverflow.com/users/9353184/vesyoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1549365021, "creation_date": 1548687831, "last_edit_date": 1549365021, "question_id": 54404711, "link": "https://stackoverflow.com/questions/54404711/how-to-set-aac-file-bitrate", "title": "How to set aac file bitrate?", "body": "<p>I am trying to generate aac file on Android. I successfully done it. But I have a little unpleasant thing. When I open my file in VLC it detect my file with following parameters:</p>\n\n<ul>\n<li>sampleSize = 32 (but it is recorded with 16 bit frame size)</li>\n<li>sampleRate = 16 (but it is recorded with 8 kHz)</li>\n<li>channelsCount = 2 (but it is recorded with 1 channel)</li>\n</ul>\n\n<p>Where I should specify sample size? I can specify only sample rate.</p>\n\n<p>Here my code which generates ADTS header</p>\n\n<pre><code>val id = 0\nval layer = 0\nval protectionAbsent = 1\nval profile = 2\nval frequencyIndex = 11\nval privateBit = 0\nval channelConfig = 1\nval originalCopy = 0\nval home = 0\nval copyritingIdBit = 0\nval copyritingIdStart = 0\nval frameLength = 775\n\nval arr = ByteArray(7)\narr[0] = 0xff.toByte()\narr[1] = (0xf0 or ((id shl 3) and 0b1000) or ((layer shl 1) and 0b110) or (protectionAbsent and 0b1)).toByte()\narr[2] = ((((profile - 1) shl 6) and 0b11000000) or ((frequencyIndex shl 2) and 0b111100) or ((privateBit shl 1) and 0b00000010) or ((channelConfig shr 2) and 0b1)).toByte()\narr[3] = (((channelConfig shl 6) and 0b11000000) or ((originalCopy shl 5) and 0x100000) or ((home shl 4) and 0b10000) or ((copyritingIdBit shl 3) and 0b00001000) or ((copyritingIdStart shl 2) and 0b00000100) or ((frameLength shr 11) and 0b11)).toByte()\narr[4] = ((frameLength shr 3) and 0xff).toByte() \narr[5] = (((frameLength shl 5) and 0b11100000) or 0x1f).toByte()\narr[6] = 0xfc.toByte()\n</code></pre>\n\n<p>When I change frequency to 16kHz, it is detected as 32 kHz. MacOs detects frequency correctly.</p>\n\n<p>All players play record correctly.</p>\n"}, {"tags": ["gradle", "kotlin", "corda"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1548760013, "post_id": 54418718, "comment_id": 95648907, "body": "Our kotlin version is &#39;1.3.10&#39;,  so kotlin-stdlib-jre8 for it does not exist (it was depricated and replaced with kotlin-stdlib-jdk8)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1548766852, "post_id": 54418718, "comment_id": 95653000, "body": "Sorry, what do you mean by bumping? What to what?"}, {"owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1548767324, "post_id": 54418718, "comment_id": 95653344, "body": "Try using <code>compile &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&quot;</code> as the new dependency."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1548846546, "post_id": 54418718, "comment_id": 95687588, "body": "Adding <code>..kotlin-stdlib-jdk8:1.3.10</code> had no effect. I believe the <code>AutoCloseable</code> class in question is not present there since it is supposed to come from JDK8"}], "tags": [], "owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "is_accepted": false, "score": 2, "last_activity_date": 1548767314, "last_edit_date": 1548767314, "creation_date": 1548757133, "answer_id": 54418718, "question_id": 54404400, "link": "https://stackoverflow.com/questions/54404400/test-fail-with-noclassdeffounderror-kotlin-autocloseablekt/54418718#54418718", "title": "Test fail with NoClassDefFoundError: kotlin/AutoCloseableKt", "body": "<p>This is caused by version skew. Can you try recompiling the CorDapp with the following dependency?</p>\n\n<pre><code>compile \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version\"\n</code></pre>\n"}], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1548767314, "creation_date": 1548686725, "last_edit_date": 1548700125, "question_id": 54404400, "link": "https://stackoverflow.com/questions/54404400/test-fail-with-noclassdeffounderror-kotlin-autocloseablekt", "title": "Test fail with NoClassDefFoundError: kotlin/AutoCloseableKt", "body": "<p>Recently my tests start fail with a bizarre <code>NoClassDefFoundError: kotlin/AutoCloseableKt</code>. This class contains 2 inline utility methods and is a part of the <code>kotlin-stdlib-jre7</code> compatibility package. I work with JVM 1.8. Further more, the project does not work with <code>AutoClosable</code>.</p>\n\n<p>What can be the reason for this?</p>\n\n<p>I use the Corda framework, also I recently added a dependency on Koin if that helps</p>\n\n<h2>The exception:</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>kotlin/AutoCloseableKt\njava.lang.NoClassDefFoundError: kotlin/AutoCloseableKt\n    at net.corda.node.internal.cordapp.CordappLoader$Companion$createDevCordappJar$1.apply(CordappLoader.kt:150)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion$createDevCordappJar$1.apply(CordappLoader.kt:59)\n    at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion.createDevCordappJar(CordappLoader.kt:143)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion.access$createDevCordappJar(CordappLoader.kt:59)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion$getPackageURLs$1.invoke(CordappLoader.kt:135)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion$getPackageURLs$1.invoke(CordappLoader.kt:59)\n    at kotlin.sequences.TransformingSequence$iterator$1.next(Sequences.kt:174)\n    at kotlin.sequences.SequencesKt___SequencesKt.toCollection(_Sequences.kt:691)\n    at kotlin.sequences.SequencesKt___SequencesKt.toMutableList(_Sequences.kt:721)\n    at kotlin.sequences.SequencesKt___SequencesKt.toList(_Sequences.kt:712)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion.getPackageURLs(CordappLoader.kt:138)\n    at net.corda.node.internal.cordapp.CordappLoader$Companion.createDefaultWithTestPackages(CordappLoader.kt:100)\n    at net.corda.testing.node.internal.InProcessNode.&lt;init&gt;(NodeBasedTest.kt:134)\n    at net.corda.testing.node.internal.DriverDSLImpl$Companion$startInProcessNode$1.invoke(DriverDSLImpl.kt:805)\n    at net.corda.testing.node.internal.DriverDSLImpl$Companion$startInProcessNode$1.invoke(DriverDSLImpl.kt:767)\n    at net.corda.core.internal.concurrent.ValueOrException$DefaultImpls.capture(CordaFutureImpl.kt:107)\n    at net.corda.core.internal.concurrent.OpenFuture$DefaultImpls.capture(CordaFutureImpl.kt)\n    at net.corda.core.internal.concurrent.CordaFutureImpl.capture(CordaFutureImpl.kt:119)\n    at net.corda.core.internal.concurrent.CordaFutureImplKt$fork$$inlined$also$lambda$1.run(CordaFutureImpl.kt:22)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.ClassNotFoundException: kotlin.AutoCloseableKt\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 27 more\n</code></pre>\n\n<h3>My <code>./gradle dependencies</code></h3>\n\n<p><a href=\"https://scans.gradle.com/s/bta3ize65pnc4/dependencies?toggled=W1sxXSxbMSwyMDhdXQ\" rel=\"nofollow noreferrer\">https://scans.gradle.com/s/bta3ize65pnc4/dependencies?toggled=W1sxXSxbMSwyMDhdXQ</a></p>\n"}, {"tags": ["android", "kotlin", "google-cloud-firestore", "kotlin-android-extensions", "sealed-class"], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "edited": false, "score": 0, "creation_date": 1548752627, "post_id": 54406035, "comment_id": 95644349, "body": "Thanks for your clarification. So in the code above, it should works in any case on a addOnCompleteListener, right ?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "edited": false, "score": 0, "creation_date": 1548752749, "post_id": 54406035, "comment_id": 95644431, "body": "If you need to check for the Exception, yes."}, {"owner": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "edited": false, "score": 0, "creation_date": 1548759106, "post_id": 54406035, "comment_id": 95648346, "body": "since I use addOnCompleteListener (so the task is completed) and I check that task is not successful, he should return an exception, right ? &quot;Returns the exception that caused the Task to fail. Returns null if the Task is not yet complete, or completed successfully.&quot;"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "edited": false, "score": 0, "creation_date": 1548760442, "post_id": 54406035, "comment_id": 95649167, "body": "The <a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/OnCompleteListener\" rel=\"nofollow noreferrer\">OnCompleteListener</a> and <a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/OnSuccessListener\" rel=\"nofollow noreferrer\">OnSuccessListener</a> are two different interfaces. You need to use either one or the other one."}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 0, "last_activity_date": 1548691798, "creation_date": 1548691798, "answer_id": 54406035, "question_id": 54404111, "link": "https://stackoverflow.com/questions/54404111/firestore-kotlin-proper-way-to-convert-a-complete-task-into-a-sealed-class-whe/54406035#54406035", "title": "Firestore (Kotlin) proper way to convert a complete task into a sealed class when performing a document request", "body": "<p>For both questions, please note that\na Task is \"successful\" when the work represented by the task is finished as expected, with no errors. On the orter side, a Task is \"complete\" when the work represented by the Task is finished, regardless of its \"success\" or \"failure\". There may be or may or may be not an error, you'll have to check for that.</p>\n\n<p>An already successfully completed Task returns a <code>DocumentSnapshot</code> which will <strong>never</strong> have the value of <code>null</code>. If the requested document does not exist, you'll get an empty DocumentSnapshot object not <code>null</code>. This also means that if you'll call <code>exists()</code>:</p>\n\n<pre><code>documentSnapshot.exists() //Will returns false\n</code></pre>\n\n<p>And if are calling <code>getData()</code> method:</p>\n\n<pre><code>documentSnapshot.getData() //An exception will be thrown\n</code></pre>\n\n<p>If the Taks is not \"successful\", the Exception that is trown by <code>task.getException()</code> is an instanceof <code>FirebaseFirestoreException</code>. Please note that Task's <a href=\"https://developers.google.com/android/reference/com/google/android/gms/tasks/Task.html#getException()\" rel=\"nofollow noreferrer\">getException()</a> method:</p>\n\n<blockquote>\n  <p>Returns the exception that caused the Task to fail. Returns null if the Task is not yet complete, or completed successfully.</p>\n</blockquote>\n"}], "owner": {"reputation": 366, "user_id": 4566621, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tw6kZoYpMP0/AAAAAAAAAAI/AAAAAAAAAEQ/6J55RyCeRdE/photo.jpg?sz=128", "display_name": "sokarcreative", "link": "https://stackoverflow.com/users/4566621/sokarcreative"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 54406035, "answer_count": 1, "score": 0, "last_activity_date": 1548691798, "creation_date": 1548685838, "question_id": 54404111, "link": "https://stackoverflow.com/questions/54404111/firestore-kotlin-proper-way-to-convert-a-complete-task-into-a-sealed-class-whe", "title": "Firestore (Kotlin) proper way to convert a complete task into a sealed class when performing a document request", "body": "<p>I'm trying to experiment a proper way to convert a complete task into a sealed class easy to read when performing a get request on a document (at this time and I will see later for collections request).</p>\n\n<pre><code>import com.google.android.gms.tasks.Task\nimport com.google.firebase.firestore.DocumentSnapshot\nimport com.google.firebase.firestore.FirebaseFirestoreException\nimport timber.log.Timber\n\nfun &lt;T&gt; Task&lt;DocumentSnapshot?&gt;.toDocumentResult(parser: (documentSnapshotExisting: DocumentSnapshot) -&gt; T): DocumentResult&lt;T&gt;?{\n    val documentResult: DocumentResult&lt;T&gt; = if(isSuccessful){\n        val documentSnapshot: DocumentSnapshot = result!!\n        if(documentSnapshot.exists()){\n            try {\n                DocumentResult.Found(parser.invoke(documentSnapshot))\n            }\n            catch (e: java.lang.Exception){\n                DocumentResult.ParserException&lt;T&gt;(documentId = documentSnapshot.id, e = e)\n            }\n        }else{\n            DocumentResult.NotFound(documentSnapshot.id)\n        }\n    }else{\n        DocumentResult.Error(exception!! as FirebaseFirestoreException)\n    }\n    documentResult.log()\n    return documentResult\n}\n\n\nsealed class DocumentResult&lt;T&gt;{\n    abstract fun log()\n\n    class Found&lt;T&gt;(val o: T): DocumentResult&lt;T&gt;() {\n        override fun log() {\n            Timber.tag(\"DocumentResult\").w(\"$o\")\n        }\n    }\n\n    class NotFound&lt;T&gt;(val documentId: String): DocumentResult&lt;T&gt;() {\n        override fun log() {\n            Timber.tag(\"DocumentResult\").w(\"documentId: $documentId doesn't exist\")\n        }\n    }\n\n    class ParserException&lt;T&gt;(val documentId: String, val e: Exception): DocumentResult&lt;T&gt;() {\n        override fun log() {\n            Timber.tag(\"DocumentResult\").e(\"ParserException: ${e.localizedMessage?:e.message?:\"error\"}, documentId: $documentId\")\n        }\n    }\n\n    class Error&lt;T&gt;(val e: FirebaseFirestoreException): DocumentResult&lt;T&gt;() {\n        override fun log() {\n            Timber.tag(\"DocumentResult\").e(\"FirebaseFirestoreException - code: ${e.code.name}, ${e.localizedMessage?:e.message?:\"error\"}\")\n        }\n    }\n}\n</code></pre>\n\n<p>With this snippet, I can do this : </p>\n\n<pre><code>activity.firestore.documentAvailableLanguages().get().addOnCompleteListener { task -&gt;\n    val documentResult = task.toDocumentResult { AvailableLanguages.toObject(it) }\n    when(documentResult){\n        is DocumentResult.Found -&gt; { /* My converted object */ }\n        is DocumentResult.NotFound -&gt; {  /* document not found */}\n        is DocumentResult.Error-&gt; {  /* FirebaseFirestoreException */}\n        is DocumentResult.ParserException -&gt; { /* Conversion didn't work, exception */ }\n    }\n}\n</code></pre>\n\n<p>My question is : </p>\n\n<p>1) Can we reasonably ensure that Task.exception is always not null and instance of FirebaseFirestoreException when isSuccessFul is false ?</p>\n\n<p>2) Are we sure that task.result is always not null when task.isSuccessful is true ?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["android", "kotlin", "android-sqlite", "android-room"], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 5935559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/aGsWk.jpg?s=128&g=1", "display_name": "Shudipto Trafder", "link": "https://stackoverflow.com/users/5935559/shudipto-trafder"}, "edited": false, "score": 0, "creation_date": 1548694649, "post_id": 54404412, "comment_id": 95624370, "body": "I also copied from impl file, but getting same error,"}, {"owner": {"reputation": 333, "user_id": 7384780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86554fddbda6b0886d407b335dae3879?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijeet Kumar", "link": "https://stackoverflow.com/users/7384780/abhijeet-kumar"}, "reply_to_user": {"reputation": 1220, "user_id": 5935559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/aGsWk.jpg?s=128&g=1", "display_name": "Shudipto Trafder", "link": "https://stackoverflow.com/users/5935559/shudipto-trafder"}, "edited": false, "score": 0, "creation_date": 1548737203, "post_id": 54404412, "comment_id": 95638369, "body": "Can u update question so as to show me your database schema and newly added entities from one version to another?"}], "tags": [], "owner": {"reputation": 333, "user_id": 7384780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86554fddbda6b0886d407b335dae3879?s=128&d=identicon&r=PG&f=1", "display_name": "Abhijeet Kumar", "link": "https://stackoverflow.com/users/7384780/abhijeet-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1548686767, "creation_date": 1548686767, "answer_id": 54404412, "question_id": 54403960, "link": "https://stackoverflow.com/questions/54403960/room-migration-fails-on-complex-schema-changes/54404412#54404412", "title": "Room migration fails on complex schema changes", "body": "<p>You can copy queries to create tables or modify tables from the generated room database file.</p>\n\n<p>Just double tap shift and look for _Impl. </p>\n\n<p>Your problem is related to <code>NON NULL</code> data types in your tables you need to specify these fields as <code>NON NULL</code> and handle <code>DEFAULT</code> values that need to be assigned during your Room Migration. </p>\n"}, {"comments": [{"owner": {"reputation": 1220, "user_id": 5935559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/aGsWk.jpg?s=128&g=1", "display_name": "Shudipto Trafder", "link": "https://stackoverflow.com/users/5935559/shudipto-trafder"}, "edited": false, "score": 0, "creation_date": 1548694532, "post_id": 54405034, "comment_id": 95624315, "body": "I tried this, but I found the last error as I mentioned on the question."}], "tags": [], "owner": {"reputation": 358, "user_id": 7544080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xh0Brbkaxuo/AAAAAAAAAAI/AAAAAAAAABg/_qlmMq2BF9Y/photo.jpg?sz=128", "display_name": "Ashik Azeez", "link": "https://stackoverflow.com/users/7544080/ashik-azeez"}, "is_accepted": false, "score": 0, "last_activity_date": 1548688808, "creation_date": 1548688808, "answer_id": 54405034, "question_id": 54403960, "link": "https://stackoverflow.com/questions/54403960/room-migration-fails-on-complex-schema-changes/54405034#54405034", "title": "Room migration fails on complex schema changes", "body": "<p>You dont need crate new table \ncreate an method like:</p>\n\n<pre><code>  private static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n            @Override\n            public void migrate(@NonNull SupportSQLiteDatabase database) {\n                   database.execSQL(\"ALTER TABLE `WordTable` ADD COLUMN ref STRING\");\n            }\n        };\n</code></pre>\n\n<p>and call Database create method like:</p>\n\n<pre><code>Room.databaseBuilder(/*parameter want */).addMigrations(MIGRATION_1_2).allowMainThreadQueries().build();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1985, "user_id": 5829917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-JdAu-c5p5jk/AAAAAAAAAAI/AAAAAAAACl0/d_Emx1aln8Y/photo.jpg?sz=128", "display_name": "Chandan Sharma", "link": "https://stackoverflow.com/users/5829917/chandan-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1548747093, "creation_date": 1548747093, "answer_id": 54415915, "question_id": 54403960, "link": "https://stackoverflow.com/questions/54403960/room-migration-fails-on-complex-schema-changes/54415915#54415915", "title": "Room migration fails on complex schema changes", "body": "<p>You can use the <code>ALTER TABLE</code> Query and simply provide migration </p>\n\n<pre><code>private static final Migration MIGRATION_1_2 = new Migration(1, 2) {\n        @Override\n        public void migrate(@NonNull SupportSQLiteDatabase database) {\n            database.execSQL(\"ALTER TABLE `table_name` ADD COLUMN `column_name` {type} DEFAULT {defaultValue} NOT NULL\");\n        }\n    };\n</code></pre>\n\n<p>When you try to Alter Table, then you should provide default values to all other records that are already present in the table.</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 10711099, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lgTqVZlEo7w/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hQIJp75-BRovZEeWl8GqWAjPR4IQ/mo/photo.jpg?sz=128", "display_name": "Elisa Jalava", "link": "https://stackoverflow.com/users/10711099/elisa-jalava"}, "is_accepted": false, "score": 0, "last_activity_date": 1565697173, "creation_date": 1565697173, "answer_id": 57477180, "question_id": 54403960, "link": "https://stackoverflow.com/questions/54403960/room-migration-fails-on-complex-schema-changes/57477180#57477180", "title": "Room migration fails on complex schema changes", "body": "<p>The differences between Expected and Found in your error message are the not null constraints in your table.</p>\n\n<p>If you want the rows to be nullable, define their variables as objects without default values and make a constructor that defines the required rows. Do not instantiate row values at the same time as you instantiate the variables!</p>\n\n<p>If you want the rows to never accept Null, add NOT NULL to the end of the rows in your SQLite query, and you don't have to change your model class.</p>\n"}], "owner": {"reputation": 1220, "user_id": 5935559, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/aGsWk.jpg?s=128&g=1", "display_name": "Shudipto Trafder", "link": "https://stackoverflow.com/users/5935559/shudipto-trafder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 670, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1565697173, "creation_date": 1548685328, "question_id": 54403960, "link": "https://stackoverflow.com/questions/54403960/room-migration-fails-on-complex-schema-changes", "title": "Room migration fails on complex schema changes", "body": "<p>I am trying to update room database\nwant to add two columns with an existing database and don't want to lose the data.</p>\n\n<p>My existing table name WordTable</p>\n\n<pre><code>@Entity\ndata class WordTable(\n    @PrimaryKey(autoGenerate = true)\n    var id: Int = 0,\n    var word: String = \"\",\n    var des: String = \"\",\n    var bookmark: Boolean = false,\n    var addByUser: Boolean = false,\n    var uploaded: Boolean = false)\n</code></pre>\n\n<p>I want to add this two column, so my code is now</p>\n\n<pre><code>@Entity\ndata class WordTable(\n    @PrimaryKey(autoGenerate = true)\n    var id: Int = 0,\n    var word: String = \"\",\n    var des: String = \"\",\n    var ref: String = \"Added by user\",\n    var recent: Date = Date(),\n    var bookmark: Boolean = false,\n    var addByUser: Boolean = false,\n    var uploaded: Boolean = false)\n</code></pre>\n\n<p>Note: I provide date conveter</p>\n\n<p>Create a new table</p>\n\n<pre><code>database.execSQL(\"CREATE TABLE users (id INTEGER PRIMARY KEY AUTOINCREMENT,\" +\n                    \" word TEXT,\" +\n                    \" des TEXT,\" +\n                    \" ref TEXT,\" +\n                    \" recent INTEGER,\" +\n                    \" bookmark INTEGER,\" +\n                    \" addByUser INTEGER,\" +\n                    \" uploaded INTEGER)\")\n</code></pre>\n\n<p>Copy previous data</p>\n\n<pre><code>database.execSQL(\"Insert Into USER (id, word, des, bookmark, addByUser, uploaded) Select * From WordTable\")\n</code></pre>\n\n<p>Drop word table</p>\n\n<pre><code>database.execSQL(\"Drop Table WordTable\")\n</code></pre>\n\n<p>Rename user table to WordTable</p>\n\n<pre><code>database.execSQL(\"Alter Table USER RENAME TO WordTable\")\n</code></pre>\n\n<p>And I get this error;</p>\n\n<pre><code>Expected:\nTableInfo{name='WordTable', columns={addByUser=Column{name='addByUser', type='INTEGER', affinity='3', notNull=true, primaryKeyPosition=0}, word=Column{name='word', type='TEXT', affinity='2', notNull=true, primaryKeyPosition=0}, bookmark=Column{name='bookmark', type='INTEGER', affinity='3', notNull=true, primaryKeyPosition=0}, uploaded=Column{name='uploaded', type='INTEGER', affinity='3', notNull=true, primaryKeyPosition=0}, id=Column{name='id', type='INTEGER', affinity='3', notNull=true, primaryKeyPosition=1}, ref=Column{name='ref', type='TEXT', affinity='2', notNull=true, primaryKeyPosition=0}, des=Column{name='des', type='TEXT', affinity='2', notNull=true, primaryKeyPosition=0}, recent=Column{name='recent', type='INTEGER', affinity='3', notNull=true, primaryKeyPosition=0}}, foreignKeys=[], indices=[]}\nFound:\nTableInfo{name='WordTable', columns={addByUser=Column{name='addByUser', type='INTEGER', affinity='3', notNull=false, primaryKeyPosition=0}, word=Column{name='word', type='TEXT', affinity='2', notNull=false, primaryKeyPosition=0}, bookmark=Column{name='bookmark', type='INTEGER', affinity='3', notNull=false, primaryKeyPosition=0}, uploaded=Column{name='uploaded', type='INTEGER', affinity='3', notNull=false, primaryKeyPosition=0}, id=Column{name='id', type='INTEGER', affinity='3', notNull=false, primaryKeyPosition=1}, ref=Column{name='ref', type='TEXT', affinity='2', notNull=false, primaryKeyPosition=0}, des=Column{name='des', type='TEXT', affinity='2', notNull=false, primaryKeyPosition=0}, recent=Column{name='recent', type='INTEGER', affinity='3', notNull=false, primaryKeyPosition=0}}, foreignKeys=[], indices=[]}\n</code></pre>\n\n<p>The difference between Expected and Found is</p>\n\n<pre><code>Expected: notNull=true\nFound: notNull=false\n</code></pre>\n\n<p>so I try to modify the create table code</p>\n\n<pre><code>database.execSQL(\"CREATE TABLE `USER` (`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `word` TEXT NOT NULL, `des` TEXT NOT NULL, `ref` TEXT NOT NULL, `recent` INTEGER NOT NULL, `bookmark` INTEGER NOT NULL, `addByUser` INTEGER NOT NULL, `uploaded` INTEGER NOT NULL)\")\n</code></pre>\n\n<p>But this time I get this error:</p>\n\n<pre><code>android.database.sqlite.SQLiteConstraintException: NOT NULL constraint failed: USER.ref (Sqlite code 1299), (OS error - 2:No such file or directory)\nat android.database.sqlite.SQLiteConnection.nativeExecuteForChangedRowCount(Native Method)\nat android.database.sqlite.SQLiteConnection.executeForChangedRowCount(SQLiteConnection.java:742)\n</code></pre>\n\n<p>I also try alter table and column but get same error.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["java", "spring", "kotlin", "spring-cloud", "spring-cloud-contract"], "comments": [{"owner": {"reputation": 1, "user_id": 10979238, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ur4E2UfHilA/AAAAAAAAAAI/AAAAAAAAABs/5sDAwtpCKtk/photo.jpg?sz=128", "display_name": "Francisco Castanho", "link": "https://stackoverflow.com/users/10979238/francisco-castanho"}, "edited": false, "score": 0, "creation_date": 1548687128, "post_id": 54402903, "comment_id": 95619587, "body": "I forgot to mention but I am using Spring cloud contract"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10979238, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ur4E2UfHilA/AAAAAAAAAAI/AAAAAAAAABs/5sDAwtpCKtk/photo.jpg?sz=128", "display_name": "Francisco Castanho", "link": "https://stackoverflow.com/users/10979238/francisco-castanho"}, "edited": false, "score": 0, "creation_date": 1548687364, "post_id": 54403178, "comment_id": 95619723, "body": "I forgot to mention that I am using Spring Cloud Contract, my idea is to combine the HTTP call/request verification with the amqp message publish to an external system in the same test/groovy file."}], "tags": [], "owner": {"reputation": 27721, "user_id": 1120793, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Mo0at.jpg?s=128&g=1", "display_name": "Darshan Mehta", "link": "https://stackoverflow.com/users/1120793/darshan-mehta"}, "is_accepted": false, "score": 0, "last_activity_date": 1548682523, "creation_date": 1548682523, "answer_id": 54403178, "question_id": 54402903, "link": "https://stackoverflow.com/questions/54402903/it-is-possible-to-combine-http-rest-contracts-with-amqp/54403178#54403178", "title": "It is possible to combine http/rest contracts with amqp?", "body": "<p>If you want to use single test/test suite with parameters then I would recommend reading up <code>[Spock Framework][1]</code>. It lets you execute same test with multiple arguments (i.e.parameters).</p>\n\n<p>You might have to change your code a bit for this, but an example would look like this:</p>\n\n<pre><code>class HelloSpockSpec extends Specification {\n  def \"length of Spock's and his friends' names\"() {\n    expect:\n    name.size() == length\n\n    where:\n    name     | length\n    \"Spock\"  | 5\n    \"Kirk\"   | 4\n    \"Scotty\" | 6\n  }\n}\n</code></pre>\n\n<p>You can define multiple elements of the contracts, keep the structure same and check the response status in your groovy file defined in question (e.g. You can pass name, description, request from the parameters).</p>\n\n<p><a href=\"https://github.com/spockframework/spock-example/tree/master/src/test/groovy\" rel=\"nofollow noreferrer\">Here</a> are some examples.</p>\n"}], "owner": {"reputation": 1, "user_id": 10979238, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ur4E2UfHilA/AAAAAAAAAAI/AAAAAAAAABs/5sDAwtpCKtk/photo.jpg?sz=128", "display_name": "Francisco Castanho", "link": "https://stackoverflow.com/users/10979238/francisco-castanho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548682860, "creation_date": 1548681513, "last_edit_date": 1548682860, "question_id": 54402903, "link": "https://stackoverflow.com/questions/54402903/it-is-possible-to-combine-http-rest-contracts-with-amqp", "title": "It is possible to combine http/rest contracts with amqp?", "body": "<p>currently I have a system with a REST API but that also publishes rabbitmq messages to another system.</p>\n\n<p>Currently I have separate groovy files with contracts for both http and amqp, but I wish to do this in one single file. That is, I am able to check that the http request/response to the API works fine but I cannot check if the amqp message was published. I have to create an extra groovy file with the contract that sends the data to the controller with the same input as the previous test and that checks that the message is indeed published.</p>\n\n<p>So currently I have one groovy file like this for the REST part:</p>\n\n<pre><code>Contract.make {\n    name(\"http_event_with_valid_token\")\n    description ('A event is received with a valid token.')\n    request {\n        method 'POST'\n        url '/events/token'\n        headers {\n            contentType(applicationJson())\n        }\n        body(\"\"\"\n            {\n                \"parameter\": \"value\"\n            }\n        \"\"\")\n    }\n    response {\n        status 202\n    }\n}\n</code></pre>\n\n<p>And another for the AMQP part:</p>\n\n<pre><code>Contract.make {\n    name(\"amqp_event_with_valid_token\")\n    description( \"A event is received with a valid token.\")\n    input {\n        triggeredBy('controller.event(\"token\", \"{\\\\\"parameter\\\\\":\\\\\"value\\\\\"}\")')\n    }\n    outputMessage {\n        sentTo 'exchange.events.events'\n        body(\"\"\"\n            {\n                \"parameter\": \"value\"\n            }\n        \"\"\")\n        headers {\n            header('token': 'token')\n        }\n    }\n}\n</code></pre>\n\n<p>I would like to do both checks in one single groovy file, without generating two separate tests. Is this possible?</p>\n"}]