[{"tags": ["field", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "edited": false, "score": 0, "creation_date": 1461191995, "post_id": 36756327, "comment_id": 61092928, "body": "Excellent @mfulton26 ! I was trying to use <code>override lateinit var user: User</code> instead of your approach. :)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1461297406, "post_id": 36756327, "comment_id": 61144648, "body": "I guess there should be a better diagnostic in the compiler on a wrong order of keywords"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 17, "last_activity_date": 1461191237, "creation_date": 1461191237, "answer_id": 36756327, "question_id": 36755741, "link": "https://stackoverflow.com/questions/36755741/kotlin-how-to-lateinit-a-var-overrided-from-an-interface/36756327#36756327", "title": "Kotlin - How to &quot;lateinit&quot; a var overrided from an interface?", "body": "<p>It is true that \"interfaces cannot have <strong>lateinit</strong> properties\" but that doesn't prevent implementing classes from using it:</p>\n\n<pre><code>interface User\n\ninterface UserManager {\n    var user: User\n}\n\nclass UserManagerImpl : UserManager {\n    lateinit override var user: User\n}\n\nfun main(args: Array&lt;String&gt;) {\n    val userManager: UserManager = UserManagerImpl()\n    userManager.user = object : User {}\n    println(userManager.user)\n}\n</code></pre>\n\n<p>Prints something like <code>LateinitKt$main$1@4b1210ee</code>.</p>\n"}], "owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2336, "favorite_count": 0, "accepted_answer_id": 36756327, "answer_count": 1, "score": 10, "last_activity_date": 1461191237, "creation_date": 1461188531, "question_id": 36755741, "link": "https://stackoverflow.com/questions/36755741/kotlin-how-to-lateinit-a-var-overrided-from-an-interface", "title": "Kotlin - How to &quot;lateinit&quot; a var overrided from an interface?", "body": "<p>I have an interface called <code>UserManager</code></p>\n\n<pre><code>interface UserManager {\n\n    var user:User\n\n    /* ... */\n}\n</code></pre>\n\n<p>and a class called <code>UserManagerImpl</code>, that implements the <code>UserManager</code></p>\n\n<pre><code>class UserManagerImpl : UserManager {\n\n    override var user: User // = must provide an User object\n\n    /* ... */\n}\n</code></pre>\n\n<p>Here's my problem:</p>\n\n<p>How to allow another class to set an <code>User</code> in the <code>UserManager()</code> at any time ( <em>i.e</em> don't provide an initial <code>User</code> object alongside the property declaration and let another class create and provide an <code>User</code> instance) ?</p>\n\n<p><strong>Take in count that</strong></p>\n\n<ol>\n<li>Interfaces cannot have <strong>lateinit</strong> properties</li>\n<li>I want the <code>User</code> to be a non-null value, so no nullable property ( <code>User?</code> )</li>\n<li>I want to use field access instead of declare and use a <code>setUser(User)</code> and <code>getUser()</code> method in the interface </li>\n</ol>\n"}, {"tags": ["kotlin", "algebraic-data-types"], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 3673750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb59d865b8ee722388071d894a96959a?s=128&d=identicon&r=PG&f=1", "display_name": "pjozsef", "link": "https://stackoverflow.com/users/3673750/pjozsef"}, "edited": false, "score": 3, "creation_date": 1461183851, "post_id": 36753782, "comment_id": 61089132, "body": "It works, thank you!  Also, I learned something about Nothing as well. :)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1461297596, "post_id": 36753782, "comment_id": 61144687, "body": "you don&#39;t need <code>out</code> here - it works without it. Please clarify that"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 3, "creation_date": 1461305613, "post_id": 36753782, "comment_id": 61147608, "body": "@voddan if you remove <code>out</code> it will become impossible to create a <code>Node</code> with a <code>Leaf</code> and the <code>Empty</code>."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 2, "creation_date": 1469096831, "post_id": 36753782, "comment_id": 64402402, "body": "What if I need T to be Comparable (I am thinking of BSTs)? Declaring <code>sealed class Tree&lt;out T :  Comparable&lt;T&gt;&gt; {..}</code> gives the error &quot;Kotlin: Type parameter T is declared as &#39;out&#39; but occurs in &#39;in&#39; position in type Comparable&lt;T&gt;&quot;"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 24, "last_activity_date": 1461181741, "creation_date": 1461181741, "answer_id": 36753782, "question_id": 36753579, "link": "https://stackoverflow.com/questions/36753579/algebraic-data-types-in-kotlin/36753782#36753782", "title": "Algebraic data types in Kotlin", "body": "<p>First you need to make <code>T</code> an <code>out</code> parameter. Then you can use <code>Nothing</code> as a type argument for <code>Empty</code>.</p>\n\n<pre><code>sealed class Tree&lt;out T&gt;{\n  class Node&lt;T&gt;(val left: Tree&lt;T&gt;, val right: Tree&lt;T&gt;): Tree&lt;T&gt;()\n  class Leaf&lt;T&gt;(val value: T): Tree&lt;T&gt;()\n  object Empty: Tree&lt;Nothing&gt;()\n}\n</code></pre>\n\n<p><code>Nothing</code> is a special type in Kotlin, which cannot have an instance and is a subtype of all other types. So I would say it's opposite to <code>Any</code> in Kotlin type hierarchy.</p>\n"}], "owner": {"reputation": 765, "user_id": 3673750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb59d865b8ee722388071d894a96959a?s=128&d=identicon&r=PG&f=1", "display_name": "pjozsef", "link": "https://stackoverflow.com/users/3673750/pjozsef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3221, "favorite_count": 7, "accepted_answer_id": 36753782, "answer_count": 1, "score": 17, "last_activity_date": 1566545598, "creation_date": 1461181130, "question_id": 36753579, "link": "https://stackoverflow.com/questions/36753579/algebraic-data-types-in-kotlin", "title": "Algebraic data types in Kotlin", "body": "<p>I am trying to figure out how to use algebraic data types in Kotlin, so I'm trying to implement a basic BinaryTree type the following way.</p>\n\n<pre><code>sealed class Tree&lt;T&gt;{\n  class Node&lt;T&gt;(val left: Tree&lt;T&gt;, val right: Tree&lt;T&gt;): Tree&lt;T&gt;()\n  class Leaf&lt;T&gt;(val value: T): Tree&lt;T&gt;()\n}\n</code></pre>\n\n<p>This is all fine, and lets me construct the following tree:</p>\n\n<pre><code>val myTree1: Tree&lt;Int&gt; = Node(Leaf(4), Leaf(2))\n</code></pre>\n\n<p>However I would like to have an \"Empty\" type as well, so I can express the following:</p>\n\n<pre><code>val myTree1: Tree&lt;Int&gt; = Node(Node(Leaf(4), Leaf(3)), Empty)\n</code></pre>\n\n<p>I tried the following:</p>\n\n<pre><code>sealed class Tree&lt;T&gt;{\n  class Node&lt;T&gt;(val left: Tree&lt;T&gt;, val right: Tree&lt;T&gt;): Tree&lt;T&gt;()\n  class Leaf&lt;T&gt;(val value: T): Tree&lt;T&gt;()\n  object Empty: Tree()\n}\n</code></pre>\n\n<p>Though I get the error that Type argument is expected at object Empty: Tree(), which is actually quite logical.</p>\n\n<p>I tried</p>\n\n<pre><code>object Empty: Tree&lt;T&gt;()\n</code></pre>\n\n<p>But it resulted in \"Unresolved reference: T\". As a last resort, I tried writing</p>\n\n<pre><code>object Empty&lt;T&gt;: Tree&lt;T&gt;()\n</code></pre>\n\n<p>But the compiler says \"Type parameters are not allowed for objects\"</p>\n\n<p>Is there a way to express this in Kotlin? Empty should be a singleton, this is why it should be an object. By making it a class, it solves the compiler problems, but then I have to put parentheses after it like that => Empty(). Also, it creates unnecessary objects, while it really should be a singleton value. </p>\n\n<p>I'd appreciate any help on this issue. :)</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 12, "creation_date": 1461159916, "post_id": 36745771, "comment_id": 61072608, "body": "To add to that, the default bound for a naked <code>&lt;T&gt;</code> is <code>Any?</code>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 19, "last_activity_date": 1461159822, "creation_date": 1461159822, "answer_id": 36745771, "question_id": 36745614, "link": "https://stackoverflow.com/questions/36745614/type-mismatch-inferred-type-is-t-but-kotlin-any-was-expected/36745771#36745771", "title": "Type mismatch: inferred type is T but kotlin.Any was expected", "body": "<p><code>T</code> is nullable in this function. You should explicitly specify that it's non-nullable.</p>\n\n<pre><code>fun &lt;T : Any&gt; test(t: T) = map.put(0, t)\n</code></pre>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5420, "favorite_count": 0, "accepted_answer_id": 36745771, "answer_count": 1, "score": 8, "last_activity_date": 1461159822, "creation_date": 1461159426, "question_id": 36745614, "link": "https://stackoverflow.com/questions/36745614/type-mismatch-inferred-type-is-t-but-kotlin-any-was-expected", "title": "Type mismatch: inferred type is T but kotlin.Any was expected", "body": "<p>I have the following code:</p>\n\n<pre><code>val map = HashMap&lt;Int, Any&gt;()\nfun &lt;T&gt; test(t: T) = map.put(0, t) // Type mismatch: inferred type is T but kotlin.Any was expected\n</code></pre>\n\n<p>But <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/\" rel=\"noreferrer\">every Kotlin class has Any as a superclass</a>, so why this error?</p>\n"}, {"tags": ["android", "kotlin", "greenrobot-eventbus"], "comments": [{"owner": {"reputation": 5283, "user_id": 4908802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/yKPO8.jpg?s=128&g=1", "display_name": "yennsarah", "link": "https://stackoverflow.com/users/4908802/yennsarah"}, "edited": false, "score": 0, "creation_date": 1461156540, "post_id": 36743968, "comment_id": 61069737, "body": "How do you post your Event? Have your registered eventbus in your activity? Please add more informatiion."}, {"owner": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "edited": false, "score": 0, "creation_date": 1461156947, "post_id": 36743968, "comment_id": 61070066, "body": "<a href=\"https://github.com/greenrobot/EventBus/issues/286\" rel=\"nofollow noreferrer\">github.com/greenrobot/EventBus/issues/286</a>"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1461156969, "post_id": 36743968, "comment_id": 61070084, "body": "I have register onResume, and unregister onPause. The same post of event could be capture on another class in Java."}, {"owner": {"reputation": 851, "user_id": 1796604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a788c34e5ec77c094bdc2d3d4f09f322?s=128&d=identicon&r=PG", "display_name": "Lucy Fair", "link": "https://stackoverflow.com/users/1796604/lucy-fair"}, "edited": false, "score": 0, "creation_date": 1473770626, "post_id": 36743968, "comment_id": 66260255, "body": "Try to register in onStart and unregister in onStop. Maybe your event is fired before you register to eventbus."}, {"owner": {"reputation": 931, "user_id": 3273624, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eEZlj.jpg?s=128&g=1", "display_name": "Nivedh", "link": "https://stackoverflow.com/users/3273624/nivedh"}, "edited": false, "score": 0, "creation_date": 1502418916, "post_id": 36743968, "comment_id": 78211699, "body": "Can I know how you solve the issue. I am facing a similar problem."}, {"owner": {"reputation": 550, "user_id": 1977198, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c6ed827b9155ea3a2f20e042c57b146e?s=128&d=identicon&r=PG", "display_name": "RamKr", "link": "https://stackoverflow.com/users/1977198/ramkr"}, "edited": false, "score": 0, "creation_date": 1539258274, "post_id": 36743968, "comment_id": 92441511, "body": "onEvent() function should be public"}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 3224192, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/fgUxT.jpg?s=128&g=1", "display_name": "Emmanuel Guther", "link": "https://stackoverflow.com/users/3224192/emmanuel-guther"}, "edited": false, "score": 0, "creation_date": 1510675134, "post_id": 37798579, "comment_id": 81530689, "body": "This project is deprecated in favor of RxJava and RxAndroid. These projects permit the same event-driven programming model as Otto, but they\u2019re more capable and offer better control of threading.  If you\u2019re looking for guidance on migrating from Otto to Rx, this post is a good start. <a href=\"https://blog.kaush.co/2014/12/24/implementing-an-event-bus-with-rxjava-rxbus/\" rel=\"nofollow noreferrer\">blog.kaush.co/2014/12/24/&hellip;</a>"}], "tags": [], "owner": {"reputation": 638, "user_id": 4762027, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S8fFjdpGsfs/AAAAAAAAAAI/AAAAAAAAADw/0aaTfB6HqCA/photo.jpg?sz=128", "display_name": "JaviCasa", "link": "https://stackoverflow.com/users/4762027/javicasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1465849708, "creation_date": 1465849708, "answer_id": 37798579, "question_id": 36743968, "link": "https://stackoverflow.com/questions/36743968/kotlin-can-we-use-subscribe-of-eventbus-greenrobot-in-kotlin/37798579#37798579", "title": "Kotlin: Can we use @Subscribe of EventBus (GreenRobot) in Kotlin?", "body": "<p>You could use Square's <a href=\"https://github.com/square/otto\" rel=\"nofollow\">Otto</a>, which works the same way and works perfectly with Kotlin. Although, be careful as EventBuses are prone to overcomplicate Android code, and that's why they've deprecated the framework in favor of Rx.</p>\n"}, {"comments": [{"owner": {"reputation": 7925, "user_id": 1256435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ff76f256aacf0187e4e2bc42ba31506?s=128&d=identicon&r=PG", "display_name": "Jaden Gu", "link": "https://stackoverflow.com/users/1256435/jaden-gu"}, "edited": false, "score": 2, "creation_date": 1517380629, "post_id": 45963364, "comment_id": 84067011, "body": "Since the EventBus 3.1.1, we don&#39;t need to add this anymore. Anyway, this is the correct workaround."}], "tags": [], "owner": {"reputation": 3767, "user_id": 3109189, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/s3aPL.jpg?s=128&g=1", "display_name": "PLNech", "link": "https://stackoverflow.com/users/3109189/plnech"}, "is_accepted": true, "score": 5, "last_activity_date": 1504104051, "creation_date": 1504104051, "answer_id": 45963364, "question_id": 36743968, "link": "https://stackoverflow.com/questions/36743968/kotlin-can-we-use-subscribe-of-eventbus-greenrobot-in-kotlin/45963364#45963364", "title": "Kotlin: Can we use @Subscribe of EventBus (GreenRobot) in Kotlin?", "body": "<p>To use annotation processors with Kotlin, you need to use the <a href=\"https://kotlinlang.org/docs/reference/kapt.html\" rel=\"noreferrer\">Kotlin Annotation Processor tool (kapt)</a>.</p>\n\n<p>Add this to your <code>build.gradle</code>:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p><a href=\"https://github.com/greenrobot/EventBus/issues/286\" rel=\"noreferrer\">According to GreenRobot</a> (and confirmed by my testing), this is all you need to get <code>@Subscribe</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 805, "user_id": 7569316, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/wPu6p.jpg?s=128&g=1", "display_name": "SpkingR", "link": "https://stackoverflow.com/users/7569316/spkingr"}, "is_accepted": false, "score": 3, "last_activity_date": 1506425518, "creation_date": 1506425518, "answer_id": 46425350, "question_id": 36743968, "link": "https://stackoverflow.com/questions/36743968/kotlin-can-we-use-subscribe-of-eventbus-greenrobot-in-kotlin/46425350#46425350", "title": "Kotlin: Can we use @Subscribe of EventBus (GreenRobot) in Kotlin?", "body": "<ol>\n<li>Make sure your event handler function with <code>@Subscribe</code> annotation is <strong>public</strong></li>\n<li><p>In the <code>build.gradle</code> file add the code:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n\nimplementation \"org.greenrobot:eventbus:3.0.0\"\nkapt 'org.greenrobot:eventbus-annotation-processor:3.0.1'\n</code></pre></li>\n<li><p>If you want to use <code>Subscriber Index</code>, you add the code to <code>build.gradle</code> too:</p>\n\n<p><code>kapt {\n    arguments {\n        arg('eventBusIndex', 'your-package.MyEventBusIndex')\n    }\n}</code></p></li>\n</ol>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5707, "favorite_count": 1, "accepted_answer_id": 45963364, "answer_count": 3, "score": 9, "last_activity_date": 1506425518, "creation_date": 1461155662, "question_id": 36743968, "link": "https://stackoverflow.com/questions/36743968/kotlin-can-we-use-subscribe-of-eventbus-greenrobot-in-kotlin", "title": "Kotlin: Can we use @Subscribe of EventBus (GreenRobot) in Kotlin?", "body": "<p>My onEvent in a fragment as below, capturing the authentication of the activity, in my Kotlin function. However, I can't get that onEvent triggered.</p>\n\n<pre><code>@Subscribe\nfun onEvent(event: AuthenticationEvent) {\n    if (event.isAuthenticated) {\n        startFragment(signInFragment, SignInFragment.TAG)\n    } else {\n        startFragment(signOutFragment, SignOutFragment.TAG)\n    }\n}\n</code></pre>\n\n<p>In my build.gradle file, I have add this</p>\n\n<pre><code>compile 'org.greenrobot:eventbus:3.0.0'\n</code></pre>\n\n<p>Is there anything I need to do to get this trigger?</p>\n"}, {"tags": ["android", "kotlin", "annotation-processing", "incremental-build"], "answers": [{"tags": [], "owner": {"reputation": 295, "user_id": 1958845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94977afd02c81c42a565a9bccb3cf5cd?s=128&d=identicon&r=PG", "display_name": "Iamz", "link": "https://stackoverflow.com/users/1958845/iamz"}, "is_accepted": false, "score": 0, "last_activity_date": 1471851938, "creation_date": 1471851938, "answer_id": 39073904, "question_id": 36740100, "link": "https://stackoverflow.com/questions/36740100/disable-incremental-build-for-kapt/39073904#39073904", "title": "Disable incremental build for kapt", "body": "<p>I had the same issue but it seems to be fixed in version 1.0.4. Currently, it's still in the EAP phase so you'll have to add another repository.</p>\n\n<pre><code>repositories {\n    ...\n    maven { url 'http://dl.bintray.com/kotlin/kotlin-dev' }\n}\n</code></pre>\n\n<p>Then change the version to 1.0.4-eap-xx in your root build.gradle</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.0.4-eap-84'\n    ...\n}\n</code></pre>\n\n<p>Here's the link to the <a href=\"https://youtrack.jetbrains.com/issue/KT-12776\" rel=\"nofollow\">issue</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1003, "user_id": 1082173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/642c4fce4e22bfd6e4e1ffd72beaf685?s=128&d=identicon&r=PG", "display_name": "MrChaz", "link": "https://stackoverflow.com/users/1082173/mrchaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1497956583, "creation_date": 1497956583, "answer_id": 44651260, "question_id": 36740100, "link": "https://stackoverflow.com/questions/36740100/disable-incremental-build-for-kapt/44651260#44651260", "title": "Disable incremental build for kapt", "body": "<p>You can add </p>\n\n<pre><code>kotlin.incremental=false\n</code></pre>\n\n<p>to your <code>gradle.properties</code> file to disable the incremental building.</p>\n"}], "owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4203, "favorite_count": 3, "answer_count": 2, "score": 6, "last_activity_date": 1497956583, "creation_date": 1461146026, "last_edit_date": 1461241688, "question_id": 36740100, "link": "https://stackoverflow.com/questions/36740100/disable-incremental-build-for-kapt", "title": "Disable incremental build for kapt", "body": "<p>Since android gradle plugin has enabled incremental build by default annotation processing breaks, because only those classes who has been changed since last incremental build will be taken into account from annotation processors.</p>\n\n<p>So for java source code we usually use <code>apt</code> grald plugin to run annotation processing. However, android's gradle plugin automatically disables gradle's incremental build feature if <code>apt</code> is used in the same project:\n<a href=\"https://github.com/google/dagger/issues/298\" rel=\"noreferrer\">https://github.com/google/dagger/issues/298</a></p>\n\n<p>Now I'm working on a kotlin project and Im facing the same incremental build issue with <code>kapt</code>. So the solution, as with <code>apt</code>, is to disable incremental build. The documentation says:</p>\n\n<pre><code>android {\n\n  compileOptions.incremental = false\n  ...\n}\n</code></pre>\n\n<p>However, that doesn't work for me. Does anybody know how to disable incremental builds?</p>\n"}, {"tags": ["java", "android", "visibility", "kotlin", "materialdrawer"], "answers": [{"comments": [{"owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "edited": false, "score": 2, "creation_date": 1461087772, "post_id": 36724062, "comment_id": 61035365, "body": "Just started a pull request for this <a href=\"https://github.com/mikepenz/MaterialDrawer/pull/1200\" rel=\"nofollow noreferrer\">github.com/mikepenz/MaterialDrawer/pull/1200</a> thanks"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1461082777, "creation_date": 1461082777, "answer_id": 36724062, "question_id": 36722336, "link": "https://stackoverflow.com/questions/36722336/parameter-effective-visibility-conflict-between-java-and-kotlin/36724062#36724062", "title": "Parameter effective visibility conflict between java and kotlin", "body": "<p><code>PrimaryDrawerItem.ViewHolder</code> is <code>protected</code>. And the <code>bindView()</code> method, which is <code>public</code>, accepts <code>PrimaryDrawerItem.ViewHolder</code>. But a general external caller cannot invoke this method because it cannot refer a <code>protected</code> nested class <code>PrimaryDrawerItem.ViewHolder</code>. Kotlin prohibits such behavior and requires either to make the parameter visibility equal to the method visibility or to decrease the parameter visibility to be less or equal to the method visibility.</p>\n\n<p>In your case you have to make <code>PrimaryDrawerItem.ViewHolder</code> <code>public</code> or make <code>PrimaryDrawerItem.bindView()</code> protected. </p>\n"}], "owner": {"reputation": 12683, "user_id": 273119, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b7f0d7d95b3a1f9547274129582b434?s=128&d=identicon&r=PG", "display_name": "Daniel Gomez Rico", "link": "https://stackoverflow.com/users/273119/daniel-gomez-rico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 36724062, "answer_count": 1, "score": 1, "last_activity_date": 1461082777, "creation_date": 1461078366, "question_id": 36722336, "link": "https://stackoverflow.com/questions/36722336/parameter-effective-visibility-conflict-between-java-and-kotlin", "title": "Parameter effective visibility conflict between java and kotlin", "body": "<p>I'm trying to override <code>bindView</code> function:</p>\n\n<pre><code>import com.mikepenz.materialdrawer.model.PrimaryDrawerItem\n\nopen class SpinnerDrawerItem() : PrimaryDrawerItem(), View.OnClickListener {\n  override fun bindView(viewHolder: ViewHolder?) {\n    super.bindView(viewHolder)\n    // Do things\n  }\n}\n</code></pre>\n\n<p>From <a href=\"https://github.com/mikepenz/MaterialDrawer/blob/355f1dd99484192c7fbdb228ea94fb3cef585b1f/app/src/main/java/com/mikepenz/materialdrawer/app/drawerItems/CustomPrimaryDrawerItem.java\" rel=\"nofollow noreferrer\">PrimaryDrawerItem</a> but I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JM9be.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JM9be.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why?</p>\n"}, {"tags": ["gradle", "kotlin", "quasar"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 2, "creation_date": 1461071144, "post_id": 36719303, "comment_id": 61023736, "body": "What&#39;s the error you&#39;re getting?"}, {"owner": {"reputation": 55, "user_id": 2301014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6653113f09e6959efcc566796863ead3?s=128&d=identicon&r=PG", "display_name": "Reidar", "link": "https://stackoverflow.com/users/2301014/reidar"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1461076836, "post_id": 36719303, "comment_id": 61028027, "body": "I get unresolved reference for import co.paralleluniverse.kotlin.Actor"}, {"owner": {"reputation": 25525, "user_id": 750510, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/6995f16e417430a024c8413ae2d4aca1?s=128&d=identicon&r=PG", "display_name": "madhead", "link": "https://stackoverflow.com/users/750510/madhead"}, "edited": false, "score": 0, "creation_date": 1461191816, "post_id": 36719303, "comment_id": 61092865, "body": "Have you tried to build your project from the console? Refreshing the project in IDE? Maybe it&#39;s just your IDE complaining? That class is inside one of the referenced JARs and should be available."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2301014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6653113f09e6959efcc566796863ead3?s=128&d=identicon&r=PG", "display_name": "Reidar", "link": "https://stackoverflow.com/users/2301014/reidar"}, "edited": false, "score": 0, "creation_date": 1461304039, "post_id": 36763433, "comment_id": 61146860, "body": "Great answer, this helps a lot !!"}], "tags": [], "owner": {"reputation": 791, "user_id": 3756789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZjcH.jpg?s=128&g=1", "display_name": "circlespainter", "link": "https://stackoverflow.com/users/3756789/circlespainter"}, "is_accepted": true, "score": 2, "last_activity_date": 1461225805, "creation_date": 1461225805, "answer_id": 36763433, "question_id": 36719303, "link": "https://stackoverflow.com/questions/36719303/kotlin-quasar-example-not-working/36763433#36763433", "title": "Kotlin Quasar example not working", "body": "<p>I'm part of the Quasar team.</p>\n\n<p>The post cites Quasar tests which you can run by cloning the Quasar repo and running e.g. <code>gradle :quasar-kotlin:build</code> (requires Gradle installed) but for new projects/experiments I suggest to start instead from the <a href=\"https://github.com/puniverse/quasar-gradle-template/tree/kotlin\" rel=\"nofollow\">Gradle template, <code>kotlin</code> branch</a> which now uses the latest Kotlin <code>1.0.1-2</code> (and for simplicity the latest Quasar <code>0.7.5-SNAPSHOT</code> that depends on it).</p>\n\n<p>Starting from that template I built <a href=\"https://github.com/circlespainter/so-36719303\" rel=\"nofollow\">this project</a> (more info about how to configure it and run it in the main README) that runs the same Quasar actor tests as normal programs rather than tests. Here's its <code>build.gradle</code>:</p>\n\n<pre><code>group 'no.inmeta.kotlin.akka'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    ext.kotlinVer = '1.0.1-2'\n\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVer\"\n    }\n}\n\napply plugin: 'kotlin'\napply plugin: 'application'\n\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nsourceCompatibility = 1.8     // 1.7\ntargetCompatibility = 1.8     // 1.7\n\nconfigurations {\n    quasar\n}\n\nconfigurations.all {\n    resolutionStrategy {\n        failOnVersionConflict()\n    }\n}\n\nrepositories {\n//    mavenLocal()\n    mavenCentral()\n    maven { url \"https://oss.sonatype.org/content/repositories/releases\" }\n    maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }\n//    maven { url 'https://maven.java.net/content/repositories/snapshots' }\n}\n\next.classifier = ':jdk8' // ':'\n\next.quasarVer  = '0.7.5-SNAPSHOT'\n\ndependencies {\n    compile \"co.paralleluniverse:quasar-core:${quasarVer}${classifier}\"\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVer\"\n    compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlinVer\"\n    compile \"co.paralleluniverse:quasar-kotlin:${quasarVer}\"\n\n    quasar \"co.paralleluniverse:quasar-core:${quasarVer}${classifier}@jar\"\n}\n\napplicationDefaultJvmArgs = [\n    \"-Dco.paralleluniverse.fibers.verifyInstrumentation=true\",\n    \"-Dco.paralleluniverse.fibers.detectRunawayFibers=false\",\n    \"-javaagent:${configurations.quasar.singleFile}\" // =v, =d\n]\n\n// mainClassName = 'co.paralleluniverse.kotlin.actors1.PingPongKt'\nmainClassName = 'co.paralleluniverse.kotlin.actors2.PingPongWithDeferKt'\n\ntask wrapper(type: Wrapper) {\n    gradleVersion = '2.12'\n}\n\ndefaultTasks 'run'\n</code></pre>\n\n<p>Some notes about the differences with your build file:</p>\n\n<ul>\n<li>Since I converted the tests to programs, I'm including the <code>application</code> plugin and its configuration (here, <code>applicationDefaultJvmArgs</code> and <code>mainClassName</code>) as well as setting the default Gradle task to <code>run</code>.</li>\n<li>In addition to the above, a gradle wrapper has been generated and pushed so that <code>./gradlew</code> is all you need on the command line, with no need to have a local Gradle installation (how to run it in an IDE depends on the IDE).</li>\n<li>You need to run the Quasar agent (or AoT instrumentation but using the agent here) so there's a <code>quasar</code> configuration pointing to the artifact that is then used to pass the <code>-javaagent:${configurations.quasar.singleFile}</code> JVM argument.</li>\n<li>Using Java 8 as Quasar has a specific optimized build for it.</li>\n</ul>\n\n<p>Also note that there is now a <a href=\"https://github.com/circlespainter/quasar-kotlin-jetbrains-webinar\" rel=\"nofollow\"><code>1.0</code> branch of the <code>quasar-kotlin-jetbrains-webinar</code> project</a> (which is now the <code>HEAD</code> one in fact), which contains the companion source code of <a href=\"https://www.youtube.com/watch?v=Nmob2MB2Qo8\" rel=\"nofollow\">this guest webinar with IntelliJ</a>, ported to the latest Kotlin and Quasar as well.</p>\n\n<p>Let me know if this helps.</p>\n"}], "owner": {"reputation": 55, "user_id": 2301014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6653113f09e6959efcc566796863ead3?s=128&d=identicon&r=PG", "display_name": "Reidar", "link": "https://stackoverflow.com/users/2301014/reidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 36763433, "answer_count": 1, "score": 2, "last_activity_date": 1461225805, "creation_date": 1461071033, "last_edit_date": 1461191555, "question_id": 36719303, "link": "https://stackoverflow.com/questions/36719303/kotlin-quasar-example-not-working", "title": "Kotlin Quasar example not working", "body": "<p>I am testing the Kotlin Quasar actor example. \n<a href=\"http://blog.paralleluniverse.co/2015/06/04/quasar-kotlin/\" rel=\"nofollow\">Quasar and Kotlin \u2013 a Powerful Match</a>\nSo the question is, is this example out of date and is there any documentation in which I can find out how to use Kotlin and Quasar?</p>\n\n<p>This is my gradle.build file.</p>\n\n<pre><code>group 'no.inmeta.kotlin.akka'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n  ext.kotlin_version = '1.0.1'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n }\n}\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    compile \"co.paralleluniverse:quasar-kotlin:0.7.4\"\n    testCompile \"org.jetbrains.kotlin:kotlin-test:$kotlin_version\"\n}\n</code></pre>\n"}, {"tags": ["android", "android-custom-view", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1461067947, "post_id": 36717800, "comment_id": 61021186, "body": "Thanks! I was thinking how to access through the default init() constructor."}, {"owner": {"reputation": 1411, "user_id": 3825816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JXMz.png?s=128&g=1", "display_name": "Yvgen", "link": "https://stackoverflow.com/users/3825816/yvgen"}, "edited": false, "score": 0, "creation_date": 1486461189, "post_id": 36717800, "comment_id": 71343504, "body": "You also can use <b>let?.{}</b> statement,     attrs?.let { initAttrs(context, it) }"}, {"owner": {"reputation": 1265, "user_id": 2054500, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0b35d78dbd0ced2cedf7aa32a4e244dc?s=128&d=identicon&r=PG", "display_name": "DoruAdryan", "link": "https://stackoverflow.com/users/2054500/doruadryan"}, "edited": false, "score": 1, "creation_date": 1522744800, "post_id": 36717800, "comment_id": 86258327, "body": "Should use <i>a.recycle()</i> when finished using it."}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 21, "last_activity_date": 1461067402, "creation_date": 1461067402, "answer_id": 36717800, "question_id": 36716794, "link": "https://stackoverflow.com/questions/36716794/kotlin-how-to-access-the-attrs-for-a-customview/36717800#36717800", "title": "Kotlin: How to access the Attrs for a CustomView", "body": "<p>You cannot access a secondary constructor parameter from an <code>init</code> block. But there're at least two ways how you can implement similar functionality.</p>\n\n<p>The first approach is using a single primary constructor with default parameters instead of multiple secondary constructors. In this case you have to apply the <code>@JvmOverloads</code> annotation to the constructor in order to make Kotlin generate three different constructors.</p>\n\n<pre><code>class CustomCardView @JvmOverloads constructor(\n    context: Context,\n    attrs: AttributeSet? = null,\n    defStyleAttr: Int = 0\n) : FrameLayout {\n\n  init {\n    LayoutInflater.from(context).inflate(R.layout.view_custom_card, this, true)\n\n    if (attrs != null) {\n      val a = context.obtainStyledAttributes(attrs, R.styleable.custom_card_view)\n      if (a.hasValue(R.styleable.custom_card_view_command)) {\n        var myString = a.getString(R.styleable.custom_card_view_command)\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>An the seconds approach is two chain constructors and move the init block content into the constructor with three arguments.</p>\n\n<pre><code>class CustomCardView : FrameLayout {\n\n  constructor(context: Context) :\n      this(context, null)\n\n  constructor(context: Context, attrs: AttributeSet) :\n      this(context, attrs, 0)\n\n  constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) :\n      super(context, attrs, defStyleAttr) {\n\n    LayoutInflater.from(context).inflate(R.layout.view_custom_card, this, true)\n\n    if (attrs != null) {\n      val a = context.obtainStyledAttributes(attrs, R.styleable.custom_card_view)\n      if (a.hasValue(R.styleable.custom_card_view_command)) {\n        var myString = a.getString(R.styleable.custom_card_view_command)\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1682, "user_id": 485986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v6cWf.png?s=128&g=1", "display_name": "jpmcosta", "link": "https://stackoverflow.com/users/485986/jpmcosta"}, "is_accepted": false, "score": 1, "last_activity_date": 1477340824, "creation_date": 1477340824, "answer_id": 40226960, "question_id": 36716794, "link": "https://stackoverflow.com/questions/36716794/kotlin-how-to-access-the-attrs-for-a-customview/40226960#40226960", "title": "Kotlin: How to access the Attrs for a CustomView", "body": "<p>Adapting your code, I think you can also do something like this:</p>\n\n<pre><code>class CustomCardView(context: Context, attrs: AttributeSet?, defStyleAttr: Int) :\n        FrameLayout(context, attrs, defStyleAttr) {\n\n    constructor(context: Context) : this(context, null)\n\n    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)\n\n\n    init {\n        LayoutInflater.from(context).inflate(R.layout.view_custom_card, this, true)\n\n        if (attrs != null) {\n            val a = context.obtainStyledAttributes(attrs, R.styleable.custom_card_view)\n            if (a.hasValue(R.styleable.custom_card_view_command)) {\n                var myString = a.getString(R.styleable.custom_card_view_command)\n            }\n            a.recycle()\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2046, "user_id": 9079028, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z7Kqp.jpg?s=128&g=1", "display_name": "Abhishek Garg", "link": "https://stackoverflow.com/users/9079028/abhishek-garg"}, "edited": false, "score": 0, "creation_date": 1615469440, "post_id": 52063540, "comment_id": 117703613, "body": "add line recycle after getting value"}], "tags": [], "owner": {"reputation": 2954, "user_id": 5652513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2bQCi.jpg?s=128&g=1", "display_name": "methodsignature", "link": "https://stackoverflow.com/users/5652513/methodsignature"}, "is_accepted": false, "score": 1, "last_activity_date": 1535477807, "creation_date": 1535477807, "answer_id": 52063540, "question_id": 36716794, "link": "https://stackoverflow.com/questions/36716794/kotlin-how-to-access-the-attrs-for-a-customview/52063540#52063540", "title": "Kotlin: How to access the Attrs for a CustomView", "body": "<p>This is a bit verbose, but should work as expected under all conditions:</p>\n\n<pre><code>import android.content.Context\nimport android.util.AttributeSet\nimport android.view.LayoutInflater\nimport android.widget.FrameLayout\n\nclass CustomCardView: FrameLayout {\n\n    constructor(context: Context) : super(context) {\n        initialize(context, null)\n    }\n\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n        initialize(context, attrs)\n    }\n\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        initialize(context, attrs)\n    }\n\n    private fun initialize(context: Context, attrs: AttributeSet?) {\n        LayoutInflater.from(context).inflate(R.layout.view_custom_card, this, true)\n\n        attrs?.let {\n            val a = context.obtainStyledAttributes(it, R.styleable.custom_card_view)\n            if (a.hasValue(R.styleable.custom_card_view_command)) {\n                var myString = a.getString(R.styleable.custom_card_view_command)\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 4700700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/brSg6.jpg?s=128&g=1", "display_name": "mlthlschr", "link": "https://stackoverflow.com/users/4700700/mlthlschr"}, "reply_to_user": {"reputation": 136101, "user_id": 101361, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fb0da94b98f64b5b8f12caeb3a049b80?s=128&d=identicon&r=PG", "display_name": "laalto", "link": "https://stackoverflow.com/users/101361/laalto"}, "edited": false, "score": 0, "creation_date": 1567679578, "post_id": 57802555, "comment_id": 102038692, "body": "As each constructor of the superclass (FrameLayout) does nothing else than recursively calling the constructor with 4 parameters, it is safe to do it here."}], "tags": [], "owner": {"reputation": 66, "user_id": 4700700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/brSg6.jpg?s=128&g=1", "display_name": "mlthlschr", "link": "https://stackoverflow.com/users/4700700/mlthlschr"}, "is_accepted": false, "score": 3, "last_activity_date": 1567676204, "creation_date": 1567676204, "answer_id": 57802555, "question_id": 36716794, "link": "https://stackoverflow.com/questions/36716794/kotlin-how-to-access-the-attrs-for-a-customview/57802555#57802555", "title": "Kotlin: How to access the Attrs for a CustomView", "body": "<p>Why don't you simply skip these verbose constructors with default values and do it like that:</p>\n\n<pre><code>class CustomCardView @JvmOverloads constructor(\n    context: Context, \n    attrs: AttributeSet? = null, \n    defStyleAttr: Int = 0\n) : FrameLayout(context, attrs, defStyleAttr) {\n\ninit {\n    inflate(context, R.layout.view_custom_card, this)\n\n    attrs?.let {\n        val typedArray = context.obtainStyledAttributes(it, R.styleable.custom_card_view)\n        val myString = typedArray.getString(R.styleable.custom_card_view_command)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12590, "favorite_count": 3, "accepted_answer_id": 36717800, "answer_count": 4, "score": 20, "last_activity_date": 1567676204, "creation_date": 1461064604, "question_id": 36716794, "link": "https://stackoverflow.com/questions/36716794/kotlin-how-to-access-the-attrs-for-a-customview", "title": "Kotlin: How to access the Attrs for a CustomView", "body": "<p>I create a custom view in Kotlin, and would like to access it's Attributes Resource.</p>\n\n<p>Below is my code</p>\n\n<pre><code>class CustomCardView : FrameLayout {\n\n    constructor(context: Context) : super(context)\n\n    constructor(context: Context, attrs: AttributeSet) : super(context, attrs)\n\n    constructor(context: Context, attrs: AttributeSet, defStyleAttr: Int) : super(context, attrs, defStyleAttr)\n\n    init {\n        LayoutInflater.from(context).inflate(R.layout.view_custom_card, this, true)\n\n        if (attrs != null) {\n            val a = context.obtainStyledAttributes(attrs, R.styleable.custom_card_view)\n            if (a.hasValue(R.styleable.custom_card_view_command)) {\n                var myString = a.getString(R.styleable.custom_card_view_command)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Note that this will error in the <code>attrs</code> in the init function. I'm wondering how to access the <code>attrs</code>?</p>\n"}, {"tags": ["kotlin", "anko"], "comments": [{"owner": {"reputation": 8433, "user_id": 1456931, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a5b9a171ecc501424c4fb4fa166fe0cf?s=128&d=identicon&r=PG", "display_name": "Damian Petla", "link": "https://stackoverflow.com/users/1456931/damian-petla"}, "edited": false, "score": 0, "creation_date": 1461044231, "post_id": 36695140, "comment_id": 61005922, "body": "I suggest using <code>ContextCompat.getColor(context, R.color.color_id)</code> instead  <code>resources.getColor(v, null)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 4996236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f46640ee183127e536c55b660aafe3?s=128&d=identicon&r=PG", "display_name": "Ribesg", "link": "https://stackoverflow.com/users/4996236/ribesg"}, "is_accepted": false, "score": 2, "last_activity_date": 1462461202, "creation_date": 1462461202, "answer_id": 37054181, "question_id": 36695140, "link": "https://stackoverflow.com/questions/36695140/accessing-resources-ids-using-kotlin-anko/37054181#37054181", "title": "Accessing Resources IDs using Kotlin &amp; Anko", "body": "<p>I think you can use a property extension like this one instead of the one you suggested:</p>\n\n<pre><code>var TextView.textColorRes: Int\n    get() = throw PropertyWithoutGetterException(\"textColorRes\")\n    set(@ColorRes v) = setTextColor(resources.getColor(v, null))\n</code></pre>\n\n<p>Or use <code>ContextCompat</code> as suggested by Damian Petla:</p>\n\n<pre><code>var TextView.textColorRes: Int\n    get() = throw PropertyWithoutGetterException(\"textColorRes\")\n    set(@ColorRes v) = setTextColor(ContextCompat.getColor(context, v))\n</code></pre>\n\n<p>You should keep Anko's <code>textColor</code>:</p>\n\n<ul>\n<li>Allows you to set a color directly without taking it from XML, if needed at some point</li>\n<li>Prevents you from importing the wrong <code>textColor</code> (Anko's one or yours), same property names with different behaviour is not a good idea.</li>\n</ul>\n"}], "owner": {"reputation": 8923, "user_id": 591482, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2bdfddda0c3b0e56456e6050c818947?s=128&d=identicon&r=PG", "display_name": "apouche", "link": "https://stackoverflow.com/users/591482/apouche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3554, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1608028916, "creation_date": 1460985462, "last_edit_date": 1608028916, "question_id": 36695140, "link": "https://stackoverflow.com/questions/36695140/accessing-resources-ids-using-kotlin-anko", "title": "Accessing Resources IDs using Kotlin &amp; Anko", "body": "<p>I am new to Android/Kotlin/Anko and I have a question regarding the way to access color (and probably other) resources from within Anko.</p>\n<p>I know that there are helpers like <code>textResource</code> where you simply pass the <code>R.string.my_color</code> to simplify the process of setting resource strings but how about accessing colors using the <code>Resources</code> instance from the <code>View</code> class ?</p>\n<p>Let\u2019s say you have a subclass of <code>Button</code> and want to change the text color. If you use the <code>textResource</code> it will change the text string not the color, and if you use <code>textColor</code> then you must specify the real resource ID by using <code>resources.getColor(R.color.my_color, null)</code> which wouldn't be so annoying if you didn't have to pass the optional theme parameter (<code>null</code> here)</p>\n<p>Is creating an extension on <code>Resources</code> useful here ?</p>\n<pre><code>fun Int.fromResources(resources: Resources): Int {\n    return resources.getColor(this, null)\n}\n</code></pre>\n<p>What is the recommended way ?</p>\n<p><strong>EDIT</strong></p>\n<p>I changed the <code>textColor</code> value extension to do just that, which I found the cleanest thing to do except I have no idea if this is really <em>Android</em> friendly</p>\n<pre><code>var android.widget.TextView.textColor: Int\n    get() = throw AnkoException(&quot;'android.widget.TextView.textColor' property does not have a getter&quot;)\n    set(v) = setTextColor(resources.getColor(v, null))\n</code></pre>\n"}, {"tags": ["eclipse", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "is_accepted": false, "score": 3, "last_activity_date": 1464967364, "last_edit_date": 1464967364, "creation_date": 1461059788, "answer_id": 36714941, "question_id": 36695001, "link": "https://stackoverflow.com/questions/36695001/eclipse-organize-import-not-working-with-kotlin-files/36714941#36714941", "title": "eclipse organize import not working with kotlin files", "body": "<p><strong>Update</strong>: since 0.7.0 Kotlin Eclipse plugin supports <a href=\"http://blog.jetbrains.com/kotlin/2016/06/kotlin-eclipse-plugin-0-7-is-here/\" rel=\"nofollow\">organize imports</a>.</p>\n\n<p>At present, Kotlin Eclipse plugin does not support \"Organize imports\" feature: <a href=\"https://youtrack.jetbrains.com/issue/KT-3962\" rel=\"nofollow\">KT-3962</a>. Please feel free to upvote for this issue.</p>\n\n<p>For now, you can try to invoke quick fix action (<strong>Ctrl+1</strong>) to import <em>StandardCharsets</em> class.</p>\n"}], "owner": {"reputation": 110, "user_id": 971169, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc24d9e9f128cf66c4d977dc9ce49d70?s=128&d=identicon&r=PG", "display_name": "user971169", "link": "https://stackoverflow.com/users/971169/user971169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464967364, "creation_date": 1460985094, "last_edit_date": 1460985285, "question_id": 36695001, "link": "https://stackoverflow.com/questions/36695001/eclipse-organize-import-not-working-with-kotlin-files", "title": "eclipse organize import not working with kotlin files", "body": "<p>When I try to use the organize inputs in a Kotlin class, it does not add missing imports like in Java.</p>\n\n<p>Specific case:</p>\n\n<ol>\n<li>create a new Kotlin class file with the following contents: \n<code>data class Foo (\n    public var fileEncoding: String = StandardCharsets.UTF_8.name()\n)</code></li>\n<li>Eclipse complains that it can't find StandardCharsets</li>\n<li>use organize inputs, but StandardCharsets is not added to the import statements.</li>\n</ol>\n\n<p>I would have expected that it added the line <code>import java.nio.charset.StandardCharsets</code></p>\n"}, {"tags": ["arrays", "serialization", "kotlin"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1460967493, "post_id": 36687780, "comment_id": 60965939, "body": "As to the arrays serialization, they are serializable in Kotlin, too. This snippet shows it: <a href=\"https://gist.github.com/h0tk3y/bc892327ab239121e76df645d32d9832\" rel=\"nofollow noreferrer\">gist.github.com/h0tk3y/bc892327ab239121e76df645d32d9832</a>. I don&#39;t know why the reference doesn&#39;t state it, maybe it&#39;s because <code>Array&lt;SomeType&gt;</code> is compiled into Java&#39;s <code>SomeType[]</code>, which is surely serializable."}], "answers": [{"comments": [{"owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "edited": false, "score": 0, "creation_date": 1460967133, "post_id": 36688522, "comment_id": 60965731, "body": "Ok. Sorry for the duplicate, your link wasn&#39;t purposed when I was creating my discussion."}, {"owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "edited": false, "score": 0, "creation_date": 1460967762, "post_id": 36688522, "comment_id": 60966110, "body": "Maybe an easy question, but where would you put exactly the annotation in my example (where I try to retrieve the Serializable into the folders array) : I did not manage to suppress the warning. I tried foldersItems = @Suppress(&quot;UNCHECKED_CAST&quot;) arguments.getSerializable(&quot;folders&quot;) as Array&lt;FileItem&gt;"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "edited": false, "score": 1, "creation_date": 1460968113, "post_id": 36688522, "comment_id": 60966331, "body": "@loloof64 This should work: <code>foldersItems = @Suppress(&quot;UNCHECKED_CAST&quot;) (arguments.getSerializable(&quot;folders&quot;) as Array&lt;FileItem&gt;)</code>. Or just annotate the enclosing function."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 5, "last_activity_date": 1460985947, "last_edit_date": 1495541866, "creation_date": 1460966928, "answer_id": 36688522, "question_id": 36687780, "link": "https://stackoverflow.com/questions/36687780/how-to-serialize-unserialize-an-array-of-custom-object-in-kotlin/36688522#36688522", "title": "How to serialize/unserialize an Array of Custom object in Kotlin?", "body": "<p>In fact, the cast is not unchecked, the compiler's warning is misleading.</p>\n\n<p>This happens because in Kotlin arrays are represented by generic class <code>Array&lt;T&gt;</code>, and the compiler treats it as usual generic class with type parameters erased at runtime. </p>\n\n<p>But on JVM <a href=\"https://stackoverflow.com/questions/16518556/arrays-are-reified-in-java\">arrays have reified types</a>, and when you cast <code>something as Array&lt;SomeType&gt;</code>, the generated bytecode really checks the type parameter to be <code>SomeType</code> as well as <code>something</code> being an <code>Array&lt;*&gt;</code>, which would only happen for any other generic class.</p>\n\n<p>This example shows that the array cast is checked:</p>\n\n<pre><code>val a: Any = Array&lt;Int&gt;(1) { 0 }\n\nval i = a as Array&lt;Int&gt;\nval d = a as Array&lt;Double&gt; // gets checked and throws ClassCastException\n</code></pre>\n\n<p>The easiest solution is indeed to <a href=\"https://stackoverflow.com/questions/36221405/how-can-i-suppress-unchecked-cast-warnings\"><code>@Suppress(\"UNCHECKED_CAST\")</code></a>, because actually there should not be any warning.</p>\n\n<p>I filed an <a href=\"https://youtrack.jetbrains.com/issue/KT-11948\" rel=\"nofollow noreferrer\">issue</a> describing the problem in Kotlin issue tracker.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1461083876, "creation_date": 1461083876, "answer_id": 36724408, "question_id": 36687780, "link": "https://stackoverflow.com/questions/36687780/how-to-serialize-unserialize-an-array-of-custom-object-in-kotlin/36724408#36724408", "title": "How to serialize/unserialize an Array of Custom object in Kotlin?", "body": "<p>The cast here is unchecked because the compiler here can't ensure the <em>nullability</em> of array's generic type parameter.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>fun castAsArrayOfString(param: Any) = param as Array&lt;String&gt;\n\ncastAsArrayOfString(arrayOf(\"a\")) // is Array&lt;String&gt;, all ok\n\ncastAsArrayOfString(arrayOf(\"a\", null)) // is Array&lt;String&gt;, but contains null\n</code></pre>\n\n<p>So the compiler warns you about potential type safety problems this cast could introduce.</p>\n"}], "owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5658, "favorite_count": 1, "accepted_answer_id": 36688522, "answer_count": 2, "score": 6, "last_activity_date": 1461083876, "creation_date": 1460964469, "last_edit_date": 1460986187, "question_id": 36687780, "link": "https://stackoverflow.com/questions/36687780/how-to-serialize-unserialize-an-array-of-custom-object-in-kotlin", "title": "How to serialize/unserialize an Array of Custom object in Kotlin?", "body": "<p>In my Kotlin Android project, I made a FileItem class which extends Serializable </p>\n\n<pre><code>class FileItem(&lt;parameters&gt;) : Serializable, Comparable&lt;FileItem&gt; {\n</code></pre>\n\n<p>So I needed to Serialize instances of this class into a Bundle</p>\n\n<pre><code>val arguments:Bundle = Bundle()\narguments.putSerializable(\"folders\", folders as Serializable)\n</code></pre>\n\n<p>where folders has been declared as :</p>\n\n<pre><code>folders:Array&lt;FileItem&gt; (method parameter)\n</code></pre>\n\n<p>The serialization code above compile without any warning. Meanwhile, the problem comes when I need to unserialize folders items :</p>\n\n<pre><code>val arguments: Bundle? = getArguments()\nif (arguments != null){\n    foldersItems = arguments.getSerializable(\"folders\") as Array&lt;FileItem&gt;\n</code></pre>\n\n<p>where foldersItems is declared as </p>\n\n<pre><code>var foldersItems: Array&lt;FileItem&gt;?\n</code></pre>\n\n<p>I get the following warning, that I can't manage to solve <strong>without suppress_warning annotation</strong> :</p>\n\n<pre><code>w: &lt;Path to my class&gt;: (78, 28): Unchecked cast: java.io.Serializable! to kotlin.Array&lt;com.loloof64.android.chess_positions_archiver.main_file_explorer.FileItem&gt;\n</code></pre>\n\n<p>This kind of code compiles in Java/Groovy without warning (folderItems is then a FileItem[]), so how can I modify the kotlin code for the compiler to be \"satisfied\" ?</p>\n\n<p>I noticed <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/index.html\" rel=\"noreferrer\">in official Kotlin documentation</a> that Kotlin Array does not extend Serializable and is not open for inheritance. Is it possible meanwhite to \"add\" it via a kind of extension method ?</p>\n"}, {"tags": ["apache-spark", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "is_accepted": false, "score": 2, "last_activity_date": 1460917655, "creation_date": 1460917655, "answer_id": 36680478, "question_id": 36680254, "link": "https://stackoverflow.com/questions/36680254/kotlin-and-spark-sam-issues/36680478#36680478", "title": "Kotlin and Spark - SAM issues", "body": "<p>Ah, I figured it out. I knew there was a way since Spark supports both Java and Scala. The key to this particular problem was to use a <code>JavaSparkContext</code> instead of the Scala-based <code>SparkContext</code>. </p>\n\n<p>For some reason Scala and Kotlin don't always get along with SAM conversions. But Java and Kotlin do...</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    val conf = SparkConf().setMaster(\"local\").setAppName(\"Line Counter\")\n    val sc = JavaSparkContext(conf)\n    val input = sc.textFile(\"C:\\\\spark_workspace\\\\myfile.txt\",1)\n    val words = input.flatMap { it.split(\" \") }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 3, "last_activity_date": 1460918199, "creation_date": 1460918199, "answer_id": 36680588, "question_id": 36680254, "link": "https://stackoverflow.com/questions/36680254/kotlin-and-spark-sam-issues/36680588#36680588", "title": "Kotlin and Spark - SAM issues", "body": "<p>Despite the fact the problem is solved I would like to provide some information regarding the reasons of compilation problem. In this example <code>input</code> has a type of <code>RDD</code>, whose <a href=\"https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/rdd/RDD.scala#L373\" rel=\"nofollow\"><code>flatMap()</code></a> method accepts a lambda that should return <code>TraversableOnce[U]</code>. As Scala has it's own collections framework, Java collection types cannot be converted to <code>TraversableOnce</code>. </p>\n\n<p>Moreover, I'm not so sure Scala <code>Function</code>s are really SAMs. As far as I can see from the screenshots Kotlin doesn't offer replacing a <code>Function</code> instance with a lambda.</p>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 36680588, "answer_count": 2, "score": 0, "last_activity_date": 1460918199, "creation_date": 1460916553, "last_edit_date": 1460916917, "question_id": 36680254, "link": "https://stackoverflow.com/questions/36680254/kotlin-and-spark-sam-issues", "title": "Kotlin and Spark - SAM issues", "body": "<p>Maybe I'm doing something that is not quite supported, but I really want to use Kotlin as I learn Apache Spark <a href=\"http://amzn.com/1449358624\" rel=\"nofollow noreferrer\">with this book</a></p>\n\n<p>Here is the Scala code sample I'm trying to run. The <code>flatMap()</code> accepts a <a href=\"https://spark.apache.org/docs/1.3.0/api/java/org/apache/spark/api/java/function/FlatMapFunction.html\" rel=\"nofollow noreferrer\">FlatMapFunction</a> SAM type: </p>\n\n<pre><code>val conf = new SparkConf().setAppName(\"wordCount\")\nval sc = new SparkContext(conf)\nval input = sc.textFile(inputFile)\nval words = input.flatMap(line =&gt; line.split(\" \"))\n</code></pre>\n\n<p>Here is my attempt to do this in Kotlin. But it is having a compilation issue on the fourth line: </p>\n\n<pre><code>val conf = SparkConf().setMaster(\"local\").setAppName(\"Line Counter\")\nval sc = SparkContext(conf)\nval input = sc.textFile(\"C:\\\\spark_workspace\\\\myfile.txt\",1)\nval words = input.flatMap{ s:String -&gt; s.split(\" \") } //ERROR\n</code></pre>\n\n<p>When I hover over it I get this compile error: </p>\n\n<p><img src=\"https://i.imgur.com/RKdw9gb.png\" alt=\"\"></p>\n\n<p>Am I doing anything unreasonable or unsupported? I don't see any suggestions to autocomplete with lambdas either :(</p>\n\n<p><img src=\"https://i.imgur.com/Yxs1PXT.png\" alt=\"\"></p>\n"}, {"tags": ["android", "warnings", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1864, "user_id": 4253952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q5GrM.jpg?s=128&g=1", "display_name": "Aba", "link": "https://stackoverflow.com/users/4253952/aba"}, "edited": false, "score": 2, "creation_date": 1509707362, "post_id": 36676677, "comment_id": 81137993, "body": "Fyi, if it were an overridden function, using Alt+Enter would give you @Suppress(&quot;OverridingDeprecatedMember&quot;)"}, {"owner": {"reputation": 7049, "user_id": 1544715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be85f7bc23d6fa1addc8d35e39870579?s=128&d=identicon&r=PG", "display_name": "Magnus", "link": "https://stackoverflow.com/users/1544715/magnus"}, "edited": false, "score": 0, "creation_date": 1569464915, "post_id": 36676677, "comment_id": 102607725, "body": "Is there a way to suppress the warning for just one method? I am using a deprecated class in only one method, but kotlin still complains about the import unless I suppress the whole file."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 64, "last_activity_date": 1509707337, "last_edit_date": 1509707337, "creation_date": 1460897161, "answer_id": 36676677, "question_id": 36676512, "link": "https://stackoverflow.com/questions/36676512/kotlin-suppress-warning-deprecated-for-android/36676677#36676677", "title": "kotlin suppress warning deprecated for Android", "body": "<p>Use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-suppress/\" rel=\"noreferrer\"><code>@Suppress</code></a> annotation with argument <code>\"DEPRECATION\"</code>:</p>\n\n<pre><code>@Suppress(\"DEPRECATION\")\nsomeObject.theDeprecatedFunction()\n</code></pre>\n\n<p>Instead of a single statement, you can also mark a function, a class or a file (<code>@file:Suppress(\"DEPRECATION\")</code> in its beginning) with the annotation to suppress all the deprecation warnings issued there.</p>\n\n<p>In IntelliJ IDEA this can also be done through <kbd>Alt</kbd>+<kbd>Enter</kbd> menu with caret placed on code with deprecation warning.</p>\n"}, {"comments": [{"owner": {"reputation": 20153, "user_id": 3410697, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/tM0LU.jpg?s=128&g=1", "display_name": "Pedro Oliveira", "link": "https://stackoverflow.com/users/3410697/pedro-oliveira"}, "edited": false, "score": 0, "creation_date": 1585679477, "post_id": 48338698, "comment_id": 107845718, "body": "&quot;note the deprecation should be written as &quot;DEPRECATION&quot; ( use capital letters)&quot;. I don&#39;t think this is true."}], "tags": [], "owner": {"reputation": 6128, "user_id": 5351055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/11xsg.jpg?s=128&g=1", "display_name": "Manoj Perumarath", "link": "https://stackoverflow.com/users/5351055/manoj-perumarath"}, "is_accepted": false, "score": 15, "last_activity_date": 1516356909, "creation_date": 1516356909, "answer_id": 48338698, "question_id": 36676512, "link": "https://stackoverflow.com/questions/36676512/kotlin-suppress-warning-deprecated-for-android/48338698#48338698", "title": "kotlin suppress warning deprecated for Android", "body": "<p>In <strong>Kotlin</strong> </p>\n\n<blockquote>\n  <p>@SuppressWarnings</p>\n</blockquote>\n\n<p>is changed to </p>\n\n<blockquote>\n  <p>@Suppress</p>\n</blockquote>\n\n<p>For removing the strike through deprecation warnings you should add,</p>\n\n<pre><code> @Suppress(\"DEPRECATION\")\n</code></pre>\n\n<p>to remove the warning from the super method.\nBy adding </p>\n\n<pre><code>@Suppress(\"OverridingDeprecatedMember\")\n</code></pre>\n\n<p>The warning of the function will get removed.\nSo, the complete annotation will be;</p>\n\n<pre><code>@Suppress(\"OverridingDeprecatedMember\", \"DEPRECATION\")\n</code></pre>\n\n<p>As an additional note the deprecation should be written as \"DEPRECATION\" ( <em>use capital letters</em>)</p>\n"}], "owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11505, "favorite_count": 5, "accepted_answer_id": 36676677, "answer_count": 2, "score": 34, "last_activity_date": 1547379000, "creation_date": 1460896341, "last_edit_date": 1547379000, "question_id": 36676512, "link": "https://stackoverflow.com/questions/36676512/kotlin-suppress-warning-deprecated-for-android", "title": "kotlin suppress warning deprecated for Android", "body": "<p>In my Kotlin Android project, I am using a function that has been deprecated starting from api 23, which is quite recent. So I need a way to disable those deprecated warnings. Is there an easy way to do so?</p>\n"}, {"tags": ["mockito", "integration-testing", "rx-java", "kotlin", "mockwebserver"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1460842308, "post_id": 36669762, "comment_id": 60931525, "body": "You&#39;re calling when() with, as argument, a method call on a real object rather than a method call on a mock. Thatcan&#39;t work. You need to mock (or spy) GoogleMapsApiClient to be able to do that."}, {"owner": {"reputation": 13958, "user_id": 689723, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rQNO2.jpg?s=128&g=1", "display_name": "cesards", "link": "https://stackoverflow.com/users/689723/cesards"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460843438, "post_id": 36669762, "comment_id": 60931821, "body": "Thank you. I thought Mockito helped you to create &quot;real&quot; dependencies, so you also could do it manually. I&#39;m gonna try to use a library to mock the dependancies, because in Kotlin is not possible yet, and let&#39;s see if I fix it. Cheers man!"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460843583, "post_id": 36669762, "comment_id": 60931869, "body": "Mockito helps you create mock dependencies. And it&#39;s possible to use Mockito with Kotlin (but the classes to mock must be open). I suggest you learn what Mockito is all about."}, {"owner": {"reputation": 13958, "user_id": 689723, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rQNO2.jpg?s=128&g=1", "display_name": "cesards", "link": "https://stackoverflow.com/users/689723/cesards"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460846596, "post_id": 36669762, "comment_id": 60932624, "body": "I don&#39;t want to open my classes. Have you tried PowerMock with Kotlin? I tried this library but It didn&#39;t help at all, to be honest: <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">github.com/nhaarman/mockito-kotlin</a>"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1460973596, "post_id": 36669762, "comment_id": 60970016, "body": "@JBNizet Maybe you will add your comment as an answer?"}], "owner": {"reputation": 13958, "user_id": 689723, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rQNO2.jpg?s=128&g=1", "display_name": "cesards", "link": "https://stackoverflow.com/users/689723/cesards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460841406, "creation_date": 1460840909, "last_edit_date": 1460841406, "question_id": 36669762, "link": "https://stackoverflow.com/questions/36669762/missingmethodinvocationexception-testing-an-opened-class-in-kotlin", "title": "MissingMethodInvocationException testing an opened class in Kotlin", "body": "<p>I'm trying to make some integration tests with Kotlin + RxJava and MockWebServer. I'm kind of newbie in terms of testing and I'm Kotlin apprentice. I know about the limitations of Mockito and final classes, but I shouldn't be mocking the class I'm trying to test, so I don't know where is the real problem:</p>\n\n<p>The error is the following:</p>\n\n<pre><code>Apr 16, 2016 9:59:49 PM okhttp3.mockwebserver.MockWebServer$3 execute\nINFO: MockWebServer[54260] starting to accept connections\nApr 16, 2016 9:59:50 PM okhttp3.mockwebserver.MockWebServer$3 acceptConnections\nINFO: MockWebServer[54260] done accepting connections: Socket closed\n\norg.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n   Mocking methods declared on non-public parent classes is not supported.\n2. inside when() you don't call method on mock but on some other object.\n\n\n    at com.cesards.android.xxx.xxx.xxx.cloud.GoogleMapsApiClientShould.setUp(GoogleMapsApiClientShould.kt:34)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.mockito.internal.runners.JUnit45AndHigherRunnerImpl.run(JUnit45AndHigherRunnerImpl.java:37)\n    at org.mockito.runners.MockitoJUnitRunner.run(MockitoJUnitRunner.java:62)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)\n</code></pre>\n\n<p>And the class is the following:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass GoogleMapsApiClientShould : MockWebServerShould() {\n\n    private lateinit var googleMapsApiClient: GoogleMapsApiClient\n\n\n    private val searchNearbyPlacesSubject: PublishSubject&lt;List&lt;GooglePlaceDTO&gt;&gt; = PublishSubject.create()\n\n    @Before override fun setUp() {\n        super.setUp()\n\n        val okHttpClient = GembasOkHttpClient()\n        val customApiClient = CustomApiClient(okHttpClient.okHttpClient, baseEndpoint)\n        googleMapsApiClient = GoogleMapsApiClient(customApiClient)\n\n        `when`(googleMapsApiClient.searchNearbyPlaces(LatLng(30.30, 30.30))).thenReturn(searchNearbyPlacesSubject)\n    }\n\n    @Test fun sendAcceptAndContentTypeHeaders() {\n        enqueueMockResponse()\n\n        searchNearbyPlacesSubject.onNext(listOf())\n\n        assertThatRequestContainsHeader(\"Accept\", \"application/json\")\n    }\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>open class GoogleMapsApiClient(apiClient: CustomApiClient) : GoogleMapsApi \n</code></pre>\n\n<p>Any idea what is going on, guys? This is blowing my mind!!</p>\n\n<p>PS: I know, for now I'm not mocking the dependencies after all, but I don't think it's related, right?</p>\n"}, {"tags": ["android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 10, "last_activity_date": 1460840313, "creation_date": 1460840313, "answer_id": 36669672, "question_id": 36669606, "link": "https://stackoverflow.com/questions/36669606/why-does-the-compiler-does-not-find-android-r-id-home-constant/36669672#36669672", "title": "Why does the compiler does not find android.R.id.home constant?", "body": "<p>You're using <code>is</code> operator for the equality check, whereas it's a type check operator (like <code>instanceof</code>). It should work if you just remove <code>is</code>:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onOptionsItemSelected(item: MenuItem): Boolean {\n    when (item.getItemId()){\n        android.R.id.home -&gt; {\n            NavUtils.navigateUpFromSameTask(this)\n            return true\n        }\n    }\n    return super.onOptionsItemSelected(item)\n}\n</code></pre>\n"}], "owner": {"reputation": 4580, "user_id": 662618, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/485a36e2fb0e89238446e0789d7094a9?s=128&d=identicon&r=PG", "display_name": "loloof64", "link": "https://stackoverflow.com/users/662618/loloof64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "accepted_answer_id": 36669672, "answer_count": 1, "score": 1, "last_activity_date": 1460840313, "creation_date": 1460839931, "question_id": 36669606, "link": "https://stackoverflow.com/questions/36669606/why-does-the-compiler-does-not-find-android-r-id-home-constant", "title": "Why does the compiler does not find android.R.id.home constant?", "body": "<p>In my kotlin project for android, I get an error saying that android.R.id.home is undefined. Meanwhile, I am fixing the minimum android sdk to 14. I am using Kotlin '1.0.1-2'.</p>\n\n<p>Here is an excerpt of the code that needs it (it is an Activity, a plain one, not a AppCompatAcitivity)</p>\n\n<pre><code>override fun onOptionsItemSelected(item: MenuItem): Boolean {\n    when (item.getItemId()){\n        is android.R.id.home -&gt; {\n            NavUtils.navigateUpFromSameTask(this)\n            return true\n        }\n    }\n    return super.onOptionsItemSelected(item)\n}\n</code></pre>\n\n<p>Here is the error :</p>\n\n<pre><code>e: $&lt;path_start_from_my_disc&gt;/AboutActivity.kt: (70, 29): Unresolved reference: home\n</code></pre>\n"}, {"tags": ["java", "android", "reflection", "kotlin"], "comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460815210, "post_id": 36665039, "comment_id": 60922092, "body": "You have to use the spread operator here. How do you invoke <code>createEntity</code>?"}, {"owner": {"reputation": 784, "user_id": 1958693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9bf1f231b7b279298ccd9ac3646230e?s=128&d=identicon&r=PG", "display_name": "tufekoi", "link": "https://stackoverflow.com/users/1958693/tufekoi"}, "reply_to_user": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1460815788, "post_id": 36665039, "comment_id": 60922276, "body": "I edited my question @Michael and as you can see, I use the spread operator"}], "answers": [{"comments": [{"owner": {"reputation": 784, "user_id": 1958693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9bf1f231b7b279298ccd9ac3646230e?s=128&d=identicon&r=PG", "display_name": "tufekoi", "link": "https://stackoverflow.com/users/1958693/tufekoi"}, "edited": false, "score": 1, "creation_date": 1460816781, "post_id": 36665249, "comment_id": 60922628, "body": "Perfect ! In order to return a <code>T</code> I had to cast  the return statement though"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 8, "last_activity_date": 1460815983, "creation_date": 1460815983, "answer_id": 36665249, "question_id": 36665039, "link": "https://stackoverflow.com/questions/36665039/call-class-constructor-by-reflection-with-kotlin/36665249#36665249", "title": "Call class&#39; constructor by reflection with Kotlin", "body": "<p>You have to use the spread operator when invoking the <code>newInstance()</code> method. And the signature of <code>createEntity()</code> is wrong. I would recommend define it like that. </p>\n\n<pre><code>private fun &lt;T&gt; createEntity(constructor: Constructor&lt;T&gt;, vararg args: Any) : T {\n    return constructor.newInstance(*args)\n}\n</code></pre>\n"}], "owner": {"reputation": 784, "user_id": 1958693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9bf1f231b7b279298ccd9ac3646230e?s=128&d=identicon&r=PG", "display_name": "tufekoi", "link": "https://stackoverflow.com/users/1958693/tufekoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7489, "favorite_count": 3, "accepted_answer_id": 36665249, "answer_count": 1, "score": 13, "last_activity_date": 1460815983, "creation_date": 1460814766, "last_edit_date": 1460815729, "question_id": 36665039, "link": "https://stackoverflow.com/questions/36665039/call-class-constructor-by-reflection-with-kotlin", "title": "Call class&#39; constructor by reflection with Kotlin", "body": "<p>I have the following data class</p>\n\n<pre><code>data class Person (val id: Int? = null, val name: String, val active: Boolean)\n</code></pre>\n\n<p>I need to call it's constructor by reflection. I tried the following code </p>\n\n<pre><code>private fun &lt;T&gt; createEntity(constructor: Constructor&lt;*&gt;, vararg args: T) : Any {\n    return constructor.newInstance(args)\n}\n</code></pre>\n\n<p>and call it with an array for the <code>args</code> parameter. </p>\n\n<pre><code>val fields = entity.declaredFields\nvar elements = Array&lt;Any&gt;(getFieldsCount(fields), { i -&gt;\n    val index = cursor.getColumnIndex(fields[i].name.toUpperCase())\n    when (fields[i].type) {\n        kotlin.Int::class.java -&gt; cursor.getInt(index)\n        kotlin.Boolean::class.java -&gt; if (cursor.getInt(index) == 1) true else false\n        else -&gt; cursor.getString(index)\n    }\n\n})\nval test = createEntity(entity.constructors.first(), *elements)\n</code></pre>\n\n<p>With <code>entity: Class&lt;T&gt;</code> and <code>cursor: Cursor</code> from a local database\nKotlin Documentation says :</p>\n\n<blockquote>\n  <p>When we call a vararg-function, we can pass arguments one-by-one, e.g. asList(1, 2, 3), or, if we already have an array and want to pass its contents to the function, we use the spread operator (prefix the array with *)</p>\n</blockquote>\n\n<p>but even with the <code>*</code> I keep getting the following exception : </p>\n\n<pre><code>java.lang.IllegalArgumentException: Wrong number of arguments; expected 3, got 1\n</code></pre>\n\n<p>Can anyone give me some tips on how to instantiate my class? Thanks</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 11, "last_activity_date": 1460717816, "creation_date": 1460717816, "answer_id": 36645303, "question_id": 36645188, "link": "https://stackoverflow.com/questions/36645188/java-function-conversion-to-kotlin-fails/36645303#36645303", "title": "Java Function conversion to Kotlin fails", "body": "<p>To use <code>java.util.function.Function</code>, you have to import it explicitly:</p>\n\n<pre><code>import java.util.function.Function\n</code></pre>\n\n<p>That's because by default <code>Function</code> is resolved to <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-function.html\"><code>kotlin.Function</code></a>.</p>\n\n<p>But there are <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#function-types\">function types</a> in Kotlin, and more idiomatic implementation would be</p>\n\n<pre><code>fun &lt;U&gt; map(mapper: (T) -&gt; U): Option&lt;U&gt; {\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 36645303, "answer_count": 1, "score": 6, "last_activity_date": 1460747825, "creation_date": 1460717463, "last_edit_date": 1460747825, "question_id": 36645188, "link": "https://stackoverflow.com/questions/36645188/java-function-conversion-to-kotlin-fails", "title": "Java Function conversion to Kotlin fails", "body": "<p>Trying to convert some java code to kotlin, given the following method</p>\n\n<pre><code>public class Option&lt;T&gt; {\n\n  public &lt;U&gt; Option&lt;U&gt; map(Function&lt;T, U&gt; mapper) {\n    throw new IllegalStateException();\n  }\n}\n</code></pre>\n\n<p>kotlin conversion will give this</p>\n\n<p><a href=\"https://i.stack.imgur.com/1QIJS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1QIJS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I cannot understand whats the problem here, and how do i create equivalent method in kotlin? (thats the <code>java.util.Function</code>)</p>\n\n<p>P.S. could not come up with some better question summary... feel free to change.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 5, "creation_date": 1460644834, "post_id": 36626413, "comment_id": 60848902, "body": "Also, here&#39;s a reference to the docs about varargs and the spread operator: <a href=\"https://kotlinlang.org/docs/reference/functions.html#variable-number-of-arguments-varargs\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 32, "last_activity_date": 1460644636, "creation_date": 1460644636, "answer_id": 36626413, "question_id": 36626152, "link": "https://stackoverflow.com/questions/36626152/call-java-varargs-method-from-kotlin/36626413#36626413", "title": "Call java varargs method from kotlin", "body": "<p>You should use the following syntax:</p>\n\n<pre><code>fun initialize(activity: Activity, vararg settings: settings) =\n    JavaClass.initialize(activity, *settings)\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html#java-varargs\">https://kotlinlang.org/docs/reference/java-interop.html#java-varargs</a></p>\n"}, {"tags": [], "owner": {"reputation": 3615, "user_id": 975724, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/o10HS.jpg?s=128&g=1", "display_name": "Nicholas Miller", "link": "https://stackoverflow.com/users/975724/nicholas-miller"}, "is_accepted": false, "score": 7, "last_activity_date": 1534218980, "creation_date": 1534218980, "answer_id": 51833485, "question_id": 36626152, "link": "https://stackoverflow.com/questions/36626152/call-java-varargs-method-from-kotlin/51833485#51833485", "title": "Call java varargs method from kotlin", "body": "<p><a href=\"https://stackoverflow.com/a/36626413/975724\">Michael's answer</a> is correct, though I'd like to make some additional comments.</p>\n\n<p>The reason you cannot pass a Kotlin <code>vararg</code> parameter into a Java (or Kotlin) function that expects another <code>vararg</code> is because the compiler resolves the <code>vararg</code> into an <code>Array</code>.</p>\n\n<p>Hence, it is as if you've declared your function as below (<strong><em>from the perspective of the function's internal scope</em></strong>):</p>\n\n<pre><code>fun initialize(activity: Activity, settings: Array&lt;Settings&gt;) = //...\n</code></pre>\n\n<p>This is why it is unintuitive that we need to use the spread <code>*</code> operator. As far as I can tell, there are two benefits to this design choice:</p>\n\n<ol>\n<li><p>The spread operator, in addition to being used to populate variable arguments, can be used to mix-and-match between individual arguments and spreaded arrays. This means that Kotlin is giving us a convenient way to add additional parameters to a <code>vararg</code> list.</p>\n\n<p>In Java, the following code does not compile:</p>\n\n<pre><code>Settings[] settings = //...\nSetting myAdditionalSetting = new Setting();\nJavaClass.initialize(activity, settings, myAdditionalSetting); //Compiler Error \n</code></pre>\n\n<p>However, in Kotlin we can do this:</p>\n\n<pre><code>JavaClass.initialize(activity, *settings, myAdditionalSetting)\n</code></pre></li>\n<li><p>The second benefit is increased safety. The spread operator compiles down to a call to <code>Arrays.copyOf()</code> which guarantees immutability of the spreaded values.<sup>i</sup> This ensures that the called function cannot corrupt the original array.</p></li>\n</ol>\n\n<p><sup>i: While the actual class <em>references</em> would be immutable, the objects they refer to might still be mutable.</sup></p>\n"}], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7072, "favorite_count": 3, "accepted_answer_id": 36626413, "answer_count": 2, "score": 20, "last_activity_date": 1534218980, "creation_date": 1460644013, "question_id": 36626152, "link": "https://stackoverflow.com/questions/36626152/call-java-varargs-method-from-kotlin", "title": "Call java varargs method from kotlin", "body": "<p>I have a java function:</p>\n\n<pre><code>public static void initialize(@NonNull Activity activity, Settings... settings) {}\n</code></pre>\n\n<p>I want to call it from kotlin:</p>\n\n<pre><code>fun initialize(activity: Activity, vararg settings: settings) = JavaClass.initialize(activity, settings)\n</code></pre>\n\n<p>But it does not compile, telling me that there is type mismatch, <code>Settings</code> is required, but the argument is <code>kotlin.Array&lt;out Settings&gt;</code></p>\n\n<p>I see that it's trying to match it with signture</p>\n\n<pre><code>public static void initialize(@NonNull Activity activity, Settings settings) {}\n</code></pre>\n\n<p>but I want to use </p>\n\n<pre><code>public static void initialize(@NonNull Activity activity, Settings[] settings) {}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 1805, "user_id": 1270901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDSJk.png?s=128&g=1", "display_name": "Nevin Chen", "link": "https://stackoverflow.com/users/1270901/nevin-chen"}, "edited": false, "score": 2, "creation_date": 1471086924, "post_id": 36625329, "comment_id": 65220015, "body": "this is an old post that helped me a lot <a href=\"http://beust.com/weblog/2015/10/30/exploring-the-kotlin-standard-library/\" rel=\"nofollow noreferrer\">beust.com/weblog/2015/10/30/&hellip;</a>"}, {"owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "reply_to_user": {"reputation": 1805, "user_id": 1270901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDSJk.png?s=128&g=1", "display_name": "Nevin Chen", "link": "https://stackoverflow.com/users/1270901/nevin-chen"}, "edited": false, "score": 0, "creation_date": 1608823895, "post_id": 36625329, "comment_id": 115695483, "body": "@NevinChen your link is outdated, here is the new one - <a href=\"https://www.beust.com/exploring-the-kotlin-standard-library/\" rel=\"nofollow noreferrer\">beust.com/exploring-the-kotlin-standard-library</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 15, "creation_date": 1460645838, "post_id": 36625603, "comment_id": 60849666, "body": "Apply plays better with nullable receivers: <code>foo?.apply { &#47;* maybe do something *&#47; }</code>"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1460645945, "post_id": 36625603, "comment_id": 60849749, "body": "Good point. <code>run</code> is not bad too. As for me, <code>with</code> is absolutely useless. I don&#39;t use it in my code."}, {"owner": {"reputation": 4412, "user_id": 1650580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Su7AM.jpg?s=128&g=1", "display_name": "Mike Buhot", "link": "https://stackoverflow.com/users/1650580/mike-buhot"}, "edited": false, "score": 0, "creation_date": 1462448810, "post_id": 36625603, "comment_id": 61647010, "body": "if you like to scope your utility methods inside a top level Object, then with can be useful to bring them into scope for a small code block."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1495485599, "post_id": 36625603, "comment_id": 75262831, "body": "What do you mean by <b>receiver</b>?  I cannot find its documentation."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 0, "creation_date": 1495533510, "post_id": 36625603, "comment_id": 75281539, "body": "A receiver is an implicit <code>this</code> argument for an extension function: <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/extensions.html</a>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 75, "last_activity_date": 1460642745, "creation_date": 1460642745, "answer_id": 36625603, "question_id": 36625329, "link": "https://stackoverflow.com/questions/36625329/kotlin-apply-vs-with/36625603#36625603", "title": "Kotlin: Apply vs With", "body": "<p>There're two differences:</p>\n\n<ol>\n<li><p><code>apply</code> accepts an instance as the receiver while <code>with</code> requires an instance to be passed as an argument. In both cases the instance will become <code>this</code> within a block.</p></li>\n<li><p><code>apply</code> returns the receiver and <code>with</code> returns a result of the last expression within its block.</p></li>\n</ol>\n\n<p>I'm not sure there can be some strict rules on which function to choose. Usually you use <code>apply</code> when you need to do something with an object and return it. And when you need to perform some operations on an object and return some other object you can use either <code>with</code> or <code>run</code>. I  prefer <code>run</code> because it's more readable in my opinion but it's a matter of taste.</p>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 5636313, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/igjep.jpg?s=128&g=1", "display_name": "Farid", "link": "https://stackoverflow.com/users/5636313/farid"}, "edited": false, "score": 0, "creation_date": 1595251518, "post_id": 48736376, "comment_id": 111401279, "body": "I&#39;m guessing OP wanted to know use-case differences like a contextual example to choose one over another rather than a description"}], "tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 10, "last_activity_date": 1522364153, "last_edit_date": 1522364153, "creation_date": 1518382563, "answer_id": 48736376, "question_id": 36625329, "link": "https://stackoverflow.com/questions/36625329/kotlin-apply-vs-with/48736376#48736376", "title": "Kotlin: Apply vs With", "body": "<h3>The <code>apply</code> function</h3>\n\n<pre><code>//returns receiver T, T exposed as `this`\nfun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T \n</code></pre>\n\n<p><strong>Description</strong> </p>\n\n<p>The <code>apply</code> function is invoked on a receiver <code>T</code>, which will be exposed as <code>this</code> in the passed lambda expression. The receiver also becomes the result of <code>apply</code> automatically.</p>\n\n<h2>The <code>with</code> function</h2>\n\n<pre><code>//return arbitrary value R, not an extension function, T exposed as `this` \nfun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R \n</code></pre>\n\n<p><strong>Description</strong> </p>\n\n<p>The <code>with</code> function, as opposed to all other scope functions (<code>let</code>, <code>run</code>, <code>also</code>, <code>apply</code>), is <em>not defined as an extension function</em>. Instead, the function is invoked with a receiver object as its first argument explicitly. Same as <code>apply</code>, the receiver is exposed as <code>this</code> in the passed lambda. The result of the lambda, i.e. it\u2019s last statement, becomes the result (<code>R</code>) of <code>with</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 1768, "user_id": 711299, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bd0e2708752c7ec408e6bc5bd9668dab?s=128&d=identicon&r=PG", "display_name": "lase", "link": "https://stackoverflow.com/users/711299/lase"}, "edited": false, "score": 0, "creation_date": 1548711598, "post_id": 52422779, "comment_id": 95632340, "body": "This really isn&#39;t a great example. The last line of <code>with</code> returns nothing because you wrote it that way. While it wouldn&#39;t be great stylistically, you could put <code>this</code> as the last line of <code>with</code>. This is like summing up the differences between a knife and fork by saying &quot;well, the fork isn&#39;t very good for cutting&quot;."}], "tags": [], "owner": {"reputation": 90, "user_id": 7207087, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IhQYzxEgV_g/AAAAAAAAAAI/AAAAAAAAAcw/qM51o3M86lU/photo.jpg?sz=128", "display_name": "Nonso Biose", "link": "https://stackoverflow.com/users/7207087/nonso-biose"}, "is_accepted": false, "score": 5, "last_activity_date": 1537438658, "creation_date": 1537438658, "answer_id": 52422779, "question_id": 36625329, "link": "https://stackoverflow.com/questions/36625329/kotlin-apply-vs-with/52422779#52422779", "title": "Kotlin: Apply vs With", "body": "<p>Here are the Similarities and Differences</p>\n\n<h3>Similarities</h3>\n\n<p><strong>With</strong> and <strong>Apply</strong> both accept an object as a receiver in whatever manner they are passed. </p>\n\n<h3>Differences</h3>\n\n<p><strong>With</strong> returns the last line in the lambda as the result of the expression.</p>\n\n<p><strong>Apply</strong> returns the object that was passed in as the receiver as the result of the lambda expression.</p>\n\n<h1>Examples</h1>\n\n<h3>With</h3>\n\n<pre><code>private val ORIENTATIONS = with(SparseIntArray()) {\n    append(Surface.ROTATION_0, 90)\n    append(Surface.ROTATION_90, 0)\n    append(Surface.ROTATION_180, 270)\n    append(Surface.ROTATION_270, 180)\n}\nORIENTATIONS[0] // doesn't work \n// Here, using with prevents me from accessing the items in the SparseArray because, \n// the last line actually returns nothing\n</code></pre>\n\n<h3>Apply</h3>\n\n<pre><code>private val ORIENTATIONS = SparseIntArray().apply {\n    append(Surface.ROTATION_0, 90)\n    append(Surface.ROTATION_90, 0)\n    append(Surface.ROTATION_180, 270)\n    append(Surface.ROTATION_270, 180)\n}\nORIENTATIONS[0] // Works\n// Here, using apply, allows me to access the items in the SparseArray because, \n// the SparseArray is returned as the result of the expression\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 317, "user_id": 5809078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3bc397d5f3bd699e6f5d62e56fd468?s=128&d=identicon&r=PG&f=1", "display_name": "Paramatma Sharan", "link": "https://stackoverflow.com/users/5809078/paramatma-sharan"}, "is_accepted": false, "score": 1, "last_activity_date": 1603353306, "last_edit_date": 1603353306, "creation_date": 1580456585, "answer_id": 59999786, "question_id": 36625329, "link": "https://stackoverflow.com/questions/36625329/kotlin-apply-vs-with/59999786#59999786", "title": "Kotlin: Apply vs With", "body": "<p>&quot;with(here class reference required)&quot; is used for accessing variable of another class but not for method of that class.\nNow if we want to use variable and method of another class that time we need to use apply(reference.apply{}) Declare a class like below</p>\n<pre><code>class Employee {\n    var name:String = &quot;&quot;\n    var age:Int = -1\n\n    fun customMethod() {\n        println(&quot;I am kotlin developer&quot;)\n    }\n}\n</code></pre>\n<p>Now we can access name and age variable of Employee class in onCreate by &quot;with&quot;</p>\n<pre><code>val emp = Employee()\nwith(emp) {\n    name=&quot;Shri Ram&quot;\n    age=30\n}\n    \nprintln(emp.name)\nprintln(emp.age)}\n</code></pre>\n<p>but we cannot access the &quot;customMethod&quot; of Employee class by <code>with</code> so if we need to use variable along with method, then we need to use &quot;apply&quot;:</p>\n<pre><code>val emp = Employee()\nemp.apply {\n    name=&quot;param&quot;\n    age=30 \n}.customMethod()\n        \nprintln(emp.name)\nprintln(emp.age)}\n</code></pre>\n<p>Output of with</p>\n<pre><code>I/System.out: Shri Ram\nI/System.out: 30\n</code></pre>\n<p>Output of apply</p>\n<pre><code>I/System.out: I am kotlin developer \nI/System.out: param\nI/System.out: 30\n</code></pre>\n"}], "owner": {"reputation": 842, "user_id": 5196460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zLMnunWdTp8/AAAAAAAAAAI/AAAAAAAACJo/aXPBe3Hfd2o/photo.jpg?sz=128", "display_name": "n9Mtq4", "link": "https://stackoverflow.com/users/5196460/n9mtq4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15042, "favorite_count": 15, "accepted_answer_id": 36625603, "answer_count": 4, "score": 70, "last_activity_date": 1603353306, "creation_date": 1460642161, "question_id": 36625329, "link": "https://stackoverflow.com/questions/36625329/kotlin-apply-vs-with", "title": "Kotlin: Apply vs With", "body": "<p>What is the difference between with and apply. From what I know the following code does the same thing:</p>\n\n<pre><code>swingElement.apply {\n    minWidth = ENABLED_COLUMN_WIDTH\n    maxWidth = ENABLED_COLUMN_WIDTH\n    preferredWidth = ENABLED_COLUMN_WIDTH\n}\nwith(swingElement) {\n    minWidth = ENABLED_COLUMN_WIDTH\n    maxWidth = ENABLED_COLUMN_WIDTH\n    preferredWidth = ENABLED_COLUMN_WIDTH\n}\n</code></pre>\n\n<p>Is there any difference and should I use one over the other?\nAlso, are there some cases where one would work and the other won't?</p>\n"}, {"tags": ["dependency-injection", "guice", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 2539, "user_id": 2735398, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/74d4d7c1aba9dfac3331aaf8178465d5?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Wytze", "link": "https://stackoverflow.com/users/2735398/jan-wytze"}, "edited": false, "score": 0, "creation_date": 1538487608, "post_id": 36625514, "comment_id": 92153402, "body": "Is there a way to make this work for constructor injecting? I tried putting the annotation before the constructor parameter where I want to inject the Set but it doesn&#39;t work. It does work when I put the <code>@JvmSuppressWildcards</code> annotation on the class, but I don&#39;t want to do this for every class..."}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 2539, "user_id": 2735398, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/74d4d7c1aba9dfac3331aaf8178465d5?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Wytze", "link": "https://stackoverflow.com/users/2735398/jan-wytze"}, "edited": false, "score": 0, "creation_date": 1538487847, "post_id": 36625514, "comment_id": 92153556, "body": "@JanWytze Have you tried applying this annotation to a constructor?"}, {"owner": {"reputation": 2539, "user_id": 2735398, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/74d4d7c1aba9dfac3331aaf8178465d5?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Wytze", "link": "https://stackoverflow.com/users/2735398/jan-wytze"}, "edited": false, "score": 1, "creation_date": 1538488052, "post_id": 36625514, "comment_id": 92153688, "body": "<code>This annotation is not applicable to target &#39;constructor&#39;</code>"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 18, "last_activity_date": 1460642546, "creation_date": 1460642546, "answer_id": 36625514, "question_id": 36625168, "link": "https://stackoverflow.com/questions/36625168/bind-list-of-objects-using-guice-kotlin/36625514#36625514", "title": "Bind list of objects using Guice + Kotlin", "body": "<p>Yes, it happens because of variance but there's a way to make it work.</p>\n\n<pre><code>class MainController {\n    @JvmSuppressWildcards\n    @Inject\n    private lateinit var componentDescriptors: List&lt;ComponentDescriptor&gt;    \n}\n</code></pre>\n\n<p>By default Kotlin generates <code>List&lt;? extends ComponentDescriptor&gt;</code> signature for the <code>componentDescriptors</code> field. The <code>@JvmSuppressWildcards</code> makes it generate a simple parameterized signature <code>List&lt;ComponentDescriptor&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1369, "user_id": 237814, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc35b1592590c427269979845602786?s=128&d=identicon&r=PG", "display_name": "jenglert", "link": "https://stackoverflow.com/users/237814/jenglert"}, "is_accepted": false, "score": 3, "last_activity_date": 1474299142, "last_edit_date": 1495541344, "creation_date": 1474299142, "answer_id": 39576898, "question_id": 36625168, "link": "https://stackoverflow.com/questions/36625168/bind-list-of-objects-using-guice-kotlin/39576898#39576898", "title": "Bind list of objects using Guice + Kotlin", "body": "<p>@Michael gives the correct <a href=\"https://stackoverflow.com/a/36625514/237814\">answer</a> and explanation. Here's an example of one strategy for unit testing a <code>Set</code> multibinding for those that like to test their modules:</p>\n\n<pre><code>class MyModuleTest {\n\n  @JvmSuppressWildcards\n  @Inject\n  private lateinit var myTypes: Set&lt;MyType&gt;\n\n  @Before fun before() {\n    val injector = Guice.createInjector(MyModule())\n    injector.injectMembers(this)\n  }\n\n  @Test fun multibindings() {\n    assertNotNull(myTypes)\n    assertTrue(myTypes.iterator().next() is MyType)\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 9310431, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LjYAPEK1EnA/AAAAAAAAAAI/AAAAAAAALUM/fR8OqexdKgE/photo.jpg?sz=128", "display_name": "carlos sanchez", "link": "https://stackoverflow.com/users/9310431/carlos-sanchez"}, "is_accepted": false, "score": 2, "last_activity_date": 1544491200, "last_edit_date": 1544491200, "creation_date": 1544480123, "answer_id": 53714504, "question_id": 36625168, "link": "https://stackoverflow.com/questions/36625168/bind-list-of-objects-using-guice-kotlin/53714504#53714504", "title": "Bind list of objects using Guice + Kotlin", "body": "<p>@Michael comment is working. If you want to do the injection in constructor, you need do something like </p>\n\n<pre><code>class MainController @Inject consturctor(\n    private var componentDescriptors: List&lt;@JvmSuppressWildcards ComponentDescriptor&gt;  \n) {}\n</code></pre>\n"}], "owner": {"reputation": 5491, "user_id": 1439771, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/egtxg.png?s=128&g=1", "display_name": "SimY4", "link": "https://stackoverflow.com/users/1439771/simy4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2490, "favorite_count": 2, "accepted_answer_id": 36625514, "answer_count": 3, "score": 8, "last_activity_date": 1544491200, "creation_date": 1460641763, "last_edit_date": 1460649252, "question_id": 36625168, "link": "https://stackoverflow.com/questions/36625168/bind-list-of-objects-using-guice-kotlin", "title": "Bind list of objects using Guice + Kotlin", "body": "<p>I'm writing a JavaFX application in Kotlin with the following controller definition:</p>\n\n<pre><code>class MainController {\n\n    @Inject private lateinit var componentDescriptors: List&lt;ComponentDescriptor&gt;\n    /* More code goes here */\n\n}\n</code></pre>\n\n<p>I'm using Guice for Dependency management. And I'm trying to inject the list of class instances loaded via <code>java.util.ServiceLoader</code>. My problem is to define a binding that will inject the list of loaded object instances into the declared field. I tried annotation based provisioning:</p>\n\n<pre><code>internal class MyModule: AbstractModule() {\n\n    override fun configure() { }\n\n    @Provides @Singleton\n    fun bindComponentDescriptors(): List&lt;ComponentDescriptor&gt; = \n            ServiceLoader.load(ComponentDescriptor::class.java).toList()\n\n}\n</code></pre>\n\n<p>and multibinding extension (switched List to Set in field definition of corse):</p>\n\n<pre><code>internal class MyModule: AbstractModule() {\n\n    override fun configure() {\n        val componentDescriptorBinder = Multibinder.newSetBinder(binder(), ComponentDescriptor::class.java)\n        ServiceLoader.load(ComponentDescriptor::class.java).forEach {\n            componentDescriptorBinder.addBinding().toInstance(it)\n        }\n    }\n\n}\n</code></pre>\n\n<p>but both of these approaches leads to the same error: </p>\n\n<pre><code>No implementation for java.util.List&lt;? extends simpleApp.ComponentDescriptor&gt; was bound.\n  while locating java.util.List&lt;? extends simpleApp.ComponentDescriptor&gt;\n    for field at simpleApp.MainController.componentDescryptors(MainController.kt:6)\n  while locating simpleApp.MainController\n\n1 error\n    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:1042)\n    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:1001)\n    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\n    at com.gluonhq.ignite.guice.GuiceContext.getInstance(GuiceContext.java:46)\n    at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:929)\n    at javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:971)\n    at javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:220)\n    at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:744)\n    at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2707)\n    at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2527)\n    ... 12 more\n</code></pre>\n\n<p>I'm starting to suspect that it somehow related to Kotlin gerenic variance and Guice strict type checking. But I don't know how to declare the binding so Guice will know what to inject into this field.</p>\n"}, {"tags": ["properties", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "edited": false, "score": 12, "creation_date": 1460639065, "post_id": 36623703, "comment_id": 60843848, "body": "Great answer! I would add that <code>lateinit</code> exposes its backing field with visibility of the setter so the ways the property is accessed from Kotlin and from Java are different. And from Java code this property can be set even to <code>null</code> without any checks in Kotlin. Therefore <code>lateinit</code> is not for the lazy initialization but for initialization not necessarily from Kotlin code."}, {"owner": {"reputation": 2478, "user_id": 24177, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/122602908/picture?type=large", "display_name": "Marchy", "link": "https://stackoverflow.com/users/24177/marchy"}, "edited": false, "score": 0, "creation_date": 1487000553, "post_id": 36623703, "comment_id": 71577104, "body": "Is there anything equivalent to Swift&#39;s &quot;!&quot; ?? In other words it&#39;s something that is late-initialized but CAN be checked for null without it failing. Kotlin&#39;s &#39;lateinit&#39; fails with &quot;lateinit property currentUser has not been initialized&quot; if you check &#39;theObject == null&#39;. This is super useful when you have an object that is not null in its core usage scenario (and thus want to code against an abstraction where it is non-null), but is null in exceptional/limited scenarios (ie: accessing the currently logged in user, which is never null except upon initial login / on login screen)"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 2478, "user_id": 24177, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/122602908/picture?type=large", "display_name": "Marchy", "link": "https://stackoverflow.com/users/24177/marchy"}, "edited": false, "score": 0, "creation_date": 1487001276, "post_id": 36623703, "comment_id": 71577585, "body": "@Marchy, you can use explicitly stored <code>Lazy</code> + <code>.isInitialized()</code> to do that. I guess there&#39;s no straightforward way to check such a property for <code>null</code> because of the guarantee that you cannot get <code>null</code> from it. :) See <a href=\"http://try.kotlinlang.org/#/UserProjects/7qfc6epofflqpt3k8ts3mrsrqf/2ot3rul2qrvdqg3qd6uaomp6nl\" rel=\"nofollow noreferrer\">this demo</a>."}, {"owner": {"reputation": 733, "user_id": 1562087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e078da8ad40891b9a0407abe05831c7?s=128&d=identicon&r=PG", "display_name": "KenIchi", "link": "https://stackoverflow.com/users/1562087/kenichi"}, "edited": false, "score": 1, "creation_date": 1578459253, "post_id": 36623703, "comment_id": 105441072, "body": "I liked the idea of using <code>lateinit</code> to circumvent the use of <code>null</code> for uninitialized value. Other than that <code>null</code> should never be used, and with <code>lateinit</code> nulls can be eliminated away. That&#39;s how I love Kotlin :)"}, {"owner": {"reputation": 552, "user_id": 4035262, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001747129616/picture?type=large", "display_name": "Konstantin Zyubin", "link": "https://stackoverflow.com/users/4035262/konstantin-zyubin"}, "edited": false, "score": 0, "creation_date": 1607585378, "post_id": 36623703, "comment_id": 115320005, "body": "not <code>property::isInitialized</code> but <code>::property.isInitialized</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 412, "last_activity_date": 1601153492, "last_edit_date": 1601153492, "creation_date": 1460638305, "answer_id": 36623703, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/36623703#36623703", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>Here are the significant differences between <code>lateinit var</code> and <code>by lazy { ... }</code> delegated property:</p>\n<ul>\n<li><p><code>lazy { ... }</code> delegate can only be used for <code>val</code> properties, whereas <code>lateinit</code> can only be applied to <code>var</code>s, because it can't be compiled to a <code>final</code> field, thus no immutability can be guaranteed;</p>\n</li>\n<li><p><code>lateinit var</code> has a backing field which stores the value, and <code>by lazy { ... }</code> creates a delegate object in which the value is stored once calculated, stores the reference to the delegate instance in the class object and generates the getter for the property that works with the delegate instance. So if you need the backing field present in the class, use <code>lateinit</code>;</p>\n</li>\n<li><p>In addition to <code>val</code>s, <code>lateinit</code> cannot be used for nullable properties or Java primitive types (this is because of <code>null</code> used for uninitialized value);</p>\n</li>\n<li><p><code>lateinit var</code> can be initialized from anywhere the object is seen from, e.g. from inside a framework code, and multiple initialization scenarios are possible for different objects of a single class. <code>by lazy { ... }</code>, in turn, defines the only initializer for the property, which can be altered only by overriding the property in a subclass. If you want your property to be initialized from outside in a way probably unknown beforehand, use <code>lateinit</code>.</p>\n</li>\n<li><p>Initialization <code>by lazy { ... }</code> is thread-safe by default and guarantees that the initializer is invoked at most once (but this can be altered by using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/lazy.html\" rel=\"noreferrer\">another <code>lazy</code> overload</a>). In the case of <code>lateinit var</code>, it's up to the user's code to initialize the property correctly in multi-threaded environments.</p>\n</li>\n<li><p>A <code>Lazy</code> instance can be saved, passed around and even used for multiple properties. On contrary, <code>lateinit var</code>s do not store any additional runtime state (only <code>null</code> in the field for uninitialized value).</p>\n</li>\n<li><p>If you hold a reference to an instance of <code>Lazy</code>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-lazy/is-initialized.html\" rel=\"noreferrer\"><code>isInitialized()</code></a> allows you to check whether it has already been initialized (and you can <a href=\"https://stackoverflow.com/a/42012368/2196460\">obtain such instance with reflection</a> from a delegated property). To check whether a lateinit property has been initialized, you can <a href=\"https://kotlinlang.org/docs/reference/properties.html#checking-whether-a-lateinit-var-is-initialized-since-12\" rel=\"noreferrer\">use <code>property::isInitialized</code> since Kotlin 1.2</a>.</p>\n</li>\n<li><p>A lambda passed to <code>by lazy { ... }</code> may capture references from the context where it is used into its <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#closures\" rel=\"noreferrer\">closure</a>.. It will then store the references and release them only once the property has been initialized. This may lead to object hierarchies, such as Android activities, not being released for too long (or ever, if the property remains accessible and is never accessed), so you should be careful about what you use inside the initializer lambda.</p>\n</li>\n</ul>\n<p>Also, there's another way not mentioned in the question: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/not-null.html\" rel=\"noreferrer\"><code>Delegates.notNull()</code></a>, which is suitable for deferred initialization of non-null properties, including those of Java primitive types.</p>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 1, "creation_date": 1463579415, "post_id": 36624922, "comment_id": 62125319, "body": "I think we could still lazy initialize even if it depends on an external object. Just need to pass the value to an internal variable. And use the internal variable during lazy initialization. But it&#39;s as natural as Lateinit though."}, {"owner": {"reputation": 871, "user_id": 4856761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TZSof.jpg?s=128&g=1", "display_name": "Talha", "link": "https://stackoverflow.com/users/4856761/talha"}, "edited": false, "score": 0, "creation_date": 1520838399, "post_id": 36624922, "comment_id": 85462759, "body": "This approach throws UninitializedPropertyAccessException, I double checked that I am calling a setter function before using the value. Is there specific rule I am missing with lateinit? In your answer replace MyClass and Any with android Context, thats my case."}], "tags": [], "owner": {"reputation": 21828, "user_id": 968632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db18afb82e88e0cc321e789dc69bce2e?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/968632/guillaume"}, "is_accepted": false, "score": 38, "last_activity_date": 1460641210, "creation_date": 1460641210, "answer_id": 36624922, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/36624922#36624922", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>Additionnally to <code>hotkey</code>'s good answer, here is how I choose among the two in practice:</p>\n\n<p><code>lateinit</code> is for external initialisation: when you need external stuff to initialise your value by calling a method.</p>\n\n<p>e.g. by calling:</p>\n\n<pre><code>private lateinit var value: MyClass\n\nfun init(externalProperties: Any) {\n   value = somethingThatDependsOn(externalProperties)\n}\n</code></pre>\n\n<p>While <code>lazy</code> is when it only uses dependencies internal to your object.</p>\n"}, {"comments": [{"owner": {"reputation": 753, "user_id": 1084893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead871ee053b8481f67a9b7f249a3cf2?s=128&d=identicon&r=PG", "display_name": "Cnfn", "link": "https://stackoverflow.com/users/1084893/cnfn"}, "edited": false, "score": 1, "creation_date": 1540301019, "post_id": 44447647, "comment_id": 92808302, "body": "should be like <code>@Autowired lateinit var myBean: MyBean</code>"}], "tags": [], "owner": {"reputation": 1094, "user_id": 1125691, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/25a283b62d8f55e0da07774f88216cd2?s=128&d=identicon&r=PG", "display_name": "mpprdev", "link": "https://stackoverflow.com/users/1125691/mpprdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1552524922, "last_edit_date": 1552524922, "creation_date": 1496969217, "answer_id": 44447647, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/44447647#44447647", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>If you are using Spring container and you want to initialize non-nullable bean field, <code>lateinit</code> is better suited.</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>    @Autowired\n    lateinit var myBean: MyBean\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1028, "user_id": 1489829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21daf06a4872ecabbcb5d3ecd645e0a3?s=128&d=identicon&r=PG", "display_name": "user1489829", "link": "https://stackoverflow.com/users/1489829/user1489829"}, "edited": false, "score": 0, "creation_date": 1585335333, "post_id": 48107947, "comment_id": 107733243, "body": "great answer, especially the &quot;performs its initializer where the defined property is first used, not its declaration&quot;"}], "tags": [], "owner": {"reputation": 1163, "user_id": 8775432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61fhB.png?s=128&g=1", "display_name": "Yogesh kataria", "link": "https://stackoverflow.com/users/8775432/yogesh-kataria"}, "is_accepted": false, "score": 34, "last_activity_date": 1515131639, "creation_date": 1515131639, "answer_id": 48107947, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/48107947#48107947", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>Very Short and concise Answer</p>\n\n<p><strong>lateinit: It initialize non-null properties lately</strong></p>\n\n<p>Unlike lazy initialization, <strong>lateinit</strong> allows the compiler to recognize that the value of the non-null property is not stored in the constructor stage to compile normally.</p>\n\n<p><strong>lazy Initialization</strong></p>\n\n<p><strong>by lazy</strong> may be very useful when implementing <strong><em>read-only</em></strong>(val) properties that perform lazy-initialization in Kotlin.</p>\n\n<p>by lazy { ... } performs its initializer where the defined property is first used, not its declaration.</p>\n"}, {"comments": [{"owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "edited": false, "score": 1, "creation_date": 1562834680, "post_id": 54323990, "comment_id": 100505041, "body": "Yes, I also initialized in <code>onCreateView</code>, <code>onResume</code> and other with <code>lateinit</code>, but sometimes errors occured there (because some events started earlier). So maybe <code>by lazy</code> can give an appropriate result. I use <code>lateinit</code> for non-null variables that can change during lifecycle."}], "tags": [], "owner": {"reputation": 468, "user_id": 10276942, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-a5anJX3-E5A/AAAAAAAAAAI/AAAAAAAAAWg/AbxLWsNhKPs/photo.jpg?sz=128", "display_name": "Mehrbod Khiabani", "link": "https://stackoverflow.com/users/10276942/mehrbod-khiabani"}, "is_accepted": false, "score": 8, "last_activity_date": 1549450018, "last_edit_date": 1549450018, "creation_date": 1548235814, "answer_id": 54323990, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/54323990#54323990", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>In addition to all of the great answers, there is a concept called lazy loading:</p>\n\n<blockquote>\n  <p>Lazy loading is a design pattern commonly used in computer programming to defer initialization of an object until the point at which it is needed.</p>\n</blockquote>\n\n<p>Using it properly, you can reduce the loading time of your application. And Kotlin way of it's implementation is by <code>lazy()</code> which loads the needed value to your variable whenever it's needed.</p>\n\n<p>But lateinit is used when you are sure a variable won't be null or empty and will be initialized before you use it -e.g. in <code>onResume()</code> method for android- and so you don't want to declare it as a nullable type.</p>\n"}, {"tags": [], "owner": {"reputation": 16055, "user_id": 2914140, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Ik94c.jpg?s=128&g=1", "display_name": "CoolMind", "link": "https://stackoverflow.com/users/2914140/coolmind"}, "is_accepted": false, "score": 0, "last_activity_date": 1562835307, "creation_date": 1562835307, "answer_id": 56985288, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/56985288#56985288", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>If you use an unchangable variable, then it is better to initialize with <code>by lazy { ... }</code> or <code>val</code>. In this case you can be sure that it will always be initialized when needed and at most 1 time.</p>\n\n<p>If you want a non-null variable, that can change it's value, use <code>lateinit var</code>. In Android development you can later initialize it in such events like <code>onCreate</code>, <code>onResume</code>. Be aware, that if you call REST request and access this variable, it may lead to an exception <code>UninitializedPropertyAccessException: lateinit property yourVariable has not been initialized</code>, because the request can execute faster than that variable could initialize.</p>\n"}, {"comments": [{"owner": {"reputation": 2723, "user_id": 4698320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/yQQ0W.jpg?s=128&g=1", "display_name": "D&#228;&#241;ish Sh&#228;rm&#224;", "link": "https://stackoverflow.com/users/4698320/d%c3%a4%c3%b1ish-sh%c3%a4rm%c3%a0"}, "edited": false, "score": 9, "creation_date": 1567614325, "post_id": 57097273, "comment_id": 102018123, "body": "I think in lazy variable cannot be var."}], "tags": [], "owner": {"reputation": 1212, "user_id": 5676822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M7t5Z.jpg?s=128&g=1", "display_name": "Geeta Gupta", "link": "https://stackoverflow.com/users/5676822/geeta-gupta"}, "is_accepted": false, "score": 54, "last_activity_date": 1608378236, "last_edit_date": 1608378236, "creation_date": 1563461190, "answer_id": 57097273, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/57097273#57097273", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p><strong>lateinit vs lazy</strong></p>\n<ol>\n<li><p><strong>lateinit</strong></p>\n<p>i) Use it with mutable variable[var]</p>\n<pre><code> lateinit var name: String       //Allowed\n lateinit val name: String       //Not Allowed\n</code></pre>\n</li>\n</ol>\n<p>ii) Allowed with only non-nullable data types</p>\n<pre><code>    lateinit var name: String       //Allowed\n    lateinit var name: String?      //Not Allowed\n</code></pre>\n<p>iii) It is a promise to compiler that the value will be initialized in future.</p>\n<p><strong>NOTE</strong>: If you try to access <strong>lateinit</strong> variable without initializing it then it throws UnInitializedPropertyAccessException.</p>\n<ol start=\"2\">\n<li><p><strong>lazy</strong></p>\n<p>i) Lazy initialization was designed to prevent unnecessary initialization of objects.</p>\n</li>\n</ol>\n<p>ii) Your variable will not be initialized unless you use it.</p>\n<p>iii) It is initialized only once. Next time when you use it, you get the value from cache memory.</p>\n<p>iv) It is thread safe(It is initialized in the thread where it is used for the first time. Other threads use the same value stored in the cache).</p>\n<p>v) The variable can only be <strong>val</strong>.</p>\n<p>vi) The variable can only be non-<strong>nullable</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 235, "user_id": 9830926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce3c80b9e671112b702c5cd35f7435c0?s=128&d=identicon&r=PG", "display_name": "user9830926", "link": "https://stackoverflow.com/users/9830926/user9830926"}, "is_accepted": false, "score": 4, "last_activity_date": 1578272205, "creation_date": 1578272205, "answer_id": 59605543, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/59605543#59605543", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>Everything is correct above, but one of facts <strong>simple explanation</strong> <strong>LAZY</strong>----There are cases when you want to delay the creation of an instance of your object until its\nfirst usage. This technique is known as lazy initialization or lazy instantiation. The main\npurpose of lazy initialization is to boost performance and reduce your memory footprint. If\ninstantiating an instance of your type carries a large computational cost and the program\nmight end up not actually using it, you would want to delay or even avoid wasting CPU\ncycles.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 4782561, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PVsKAlRe5p0/AAAAAAAAAAI/AAAAAAAAABU/CCt9vVNgzWs/photo.jpg?sz=128", "display_name": "Ajay Vishwakarma", "link": "https://stackoverflow.com/users/4782561/ajay-vishwakarma"}, "is_accepted": false, "score": 0, "last_activity_date": 1618234289, "creation_date": 1618234289, "answer_id": 67059330, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit/67059330#67059330", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p><strong>Diff btw lateinit and lazy</strong></p>\n<p><strong>lateinit</strong></p>\n<ol>\n<li>Use only with mutable variable i.e. var and non-nullable data types</li>\n</ol>\n<blockquote>\n<p><code>lateinit var name: String</code> //Allowed with non-nullable</p>\n</blockquote>\n<ol start=\"2\">\n<li>You are telling the compiler that the value will be initialized in future.</li>\n</ol>\n<p>NOTE: If you try to access lateinit variable without initializing it then it throws UnInitializedPropertyAccessException.</p>\n<p><strong>lazy</strong></p>\n<ol>\n<li><p>Lazy initialization was designed to prevent unnecessary initialization of objects.</p>\n</li>\n<li><p>Your variable will not be initialized unless you use it.</p>\n</li>\n<li><p>It is initialized only once. Next time when you use it, you get the value from cache memory.</p>\n</li>\n<li><p>It is thread safe.</p>\n</li>\n<li><p>The variable can only be val and non-nullable.</p>\n</li>\n</ol>\n<p>Cheers :)</p>\n"}], "owner": {"reputation": 3926, "user_id": 2327342, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/Swo06.jpg?s=128&g=1", "display_name": "regmoraes", "link": "https://stackoverflow.com/users/2327342/regmoraes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120229, "favorite_count": 87, "accepted_answer_id": 36623703, "answer_count": 9, "score": 344, "last_activity_date": 1618234289, "creation_date": 1460637000, "last_edit_date": 1595519109, "question_id": 36623177, "link": "https://stackoverflow.com/questions/36623177/kotlin-property-initialization-using-by-lazy-vs-lateinit", "title": "Kotlin - Property initialization using &quot;by lazy&quot; vs. &quot;lateinit&quot;", "body": "<p>In Kotlin if you don't want to initialize a class property inside the constructor or in the top of the class body, you have basically these two options (from the language reference):</p>\n<ol>\n<li><a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"noreferrer\">Lazy Initialization</a></li>\n</ol>\n<blockquote>\n<p><code>lazy()</code> is a function that takes a lambda and returns an instance of <code>Lazy&lt;T&gt;</code> which can serve as a delegate for implementing a lazy property: the first call to <code>get()</code> executes the lambda passed to <code>lazy()</code> and remembers the result, subsequent calls to <code>get()</code> simply return the remembered result.</p>\n<p><strong>Example</strong></p>\n<pre><code>public class Hello {\n\n   val myLazyString: String by lazy { &quot;Hello&quot; }\n\n}\n</code></pre>\n</blockquote>\n<p>So the first call and the subsequential calls, wherever it is, to <code>myLazyString</code> will return <code>Hello</code></p>\n<ol start=\"2\">\n<li><a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\">Late Initialization</a></li>\n</ol>\n<blockquote>\n<p>Normally, properties declared as having a non-null type must be initialized in the constructor. However, fairly often this is not convenient. For example, properties can be initialized through dependency injection, or in the setup method of a unit test. In this case, you cannot supply a non-null initializer in the constructor, but you still want to avoid null checks when referencing the property inside the body of a class.</p>\n<p>To handle this case, you can mark the property with the lateinit modifier:</p>\n<pre><code>public class MyTest {\n   \n   lateinit var subject: TestSubject\n\n   @SetUp fun setup() { subject = TestSubject() }\n\n   @Test fun test() { subject.method() }\n}\n</code></pre>\n<p>The modifier can only be used on var properties declared inside the body of a class (not in the primary constructor), and only when the property does not have a custom getter or setter. The type of the property must be non-null, and it must not be a primitive type.</p>\n</blockquote>\n<p>So, how to choose correctly between these two options, since both of them can solve the same problem?</p>\n"}, {"tags": ["java", "mockito", "kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1460624923, "post_id": 36614177, "comment_id": 60833269, "body": "Not answering your question, but I found the following function to be more useful: <code>inline fun&lt;reified T : Any&gt; mock() = Mockito.mock(T::class.java)</code> Usage: <code>val foo = mock&lt;Foo&gt;()</code>. In many cases you don&#39;t even have to write out the type parameter because of type inference."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 2, "creation_date": 1460630373, "post_id": 36614177, "comment_id": 60837061, "body": "Take a look at this nice project: <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">github.com/nhaarman/mockito-kotlin</a>"}], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 4, "last_activity_date": 1460615777, "last_edit_date": 1460615777, "creation_date": 1460613993, "answer_id": 36614977, "question_id": 36614177, "link": "https://stackoverflow.com/questions/36614177/how-do-i-create-an-extension-function-in-kotlin-which-operates-on-a-class/36614977#36614977", "title": "How do I create an extension function in Kotlin, which operates on a class?", "body": "<p>It looks like you're slightly mixing up KClass and java Class.  The following compiles for me, to extend java classes:</p>\n\n<pre><code>fun &lt;T&gt; Class&lt;T&gt;.mock() = Mockito.mock(this)\nval mock1 = FooClass::class.java.mock()\n</code></pre>\n\n<p>Also the following compiles for me, extending Kotlin KClass:</p>\n\n<pre><code>fun &lt;T: Any&gt; KClass&lt;T&gt;.mock() = Mockito.mock(this.java)\nval mock2 = FooClass::class.mock()\n</code></pre>\n\n<p>Assuming that FooClass is a class, of course.</p>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 36614977, "answer_count": 1, "score": 1, "last_activity_date": 1460615777, "creation_date": 1460609843, "question_id": 36614177, "link": "https://stackoverflow.com/questions/36614177/how-do-i-create-an-extension-function-in-kotlin-which-operates-on-a-class", "title": "How do I create an extension function in Kotlin, which operates on a class?", "body": "<p>Imagine, I have this line of code:</p>\n\n<pre><code>import org.mockito.Mockito\nval mock = Mockito.mock(Sim2ParametersProvider::class.java)\n</code></pre>\n\n<p>I want to be able to write it like this:</p>\n\n<pre><code>val mock = Sim2ParametersProvider::class.mock()\n</code></pre>\n\n<p>How do I do this?</p>\n\n<p>I tried</p>\n\n<pre><code>fun &lt;T : kotlin.Any&gt; kotlin.reflect.KClass&lt;T&gt;.mock() = Mockito.mock(this)\n</code></pre>\n\n<p>but it gives me compiler errors.</p>\n"}, {"tags": ["java", "rx-java", "kotlin", "delegation", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1460635979, "post_id": 36621661, "comment_id": 60841270, "body": "I&#39;ve created an extension function so that you could call publishSubject.asGrpcObserver(), but i didn&#39;t think about solution like this, got to try it..."}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1460636026, "post_id": 36621661, "comment_id": 60841311, "body": "Why I asked this is because we can see clear delegation task here, and i could not figure out how to delegate with kotlins delegation features, so i suppose this situation is not applicable for delegation?"}, {"owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "reply_to_user": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 1, "creation_date": 1460638764, "post_id": 36621661, "comment_id": 60843605, "body": "Delegation will not work here because despite of <code>StreamObserver</code> and <code>Observable</code> having similar methods their types a different. And you can delegate invocations only to instance of the same type. And I wouldn&#39;t recommend you to use a <code>Subject</code> here as an <code>Observable</code> works well here."}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1460641229, "post_id": 36621661, "comment_id": 60845724, "body": "Thanks, didn&#39;t know about crossinline :)"}], "tags": [], "owner": {"reputation": 50303, "user_id": 170842, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c2ea72b8d001d81fb6ce3f356e45eb3a?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/170842/michael"}, "is_accepted": true, "score": 6, "last_activity_date": 1460633168, "creation_date": 1460633168, "answer_id": 36621661, "question_id": 36613214, "link": "https://stackoverflow.com/questions/36613214/kotlin-grpc-streamobserver-to-deletate-to-rx-publishsubject/36621661#36621661", "title": "kotlin grpc.StreamObserver to deletate to rx.PublishSubject", "body": "<p>I would create a generic method that creates a <code>StreamObserver</code>, passes it to its lambda argument and wraps the result in <code>Observable</code>.</p>\n\n<pre><code>inline fun &lt;T&gt; asObservable(\n    crossinline body: (StreamObserver&lt;T&gt;) -&gt; Unit): Observable&lt;T&gt; {\n  return Observable.create { subscription -&gt;\n    val observer = object : StreamObserver&lt;T&gt; {\n      override fun onNext(value: T) {\n        subscription.onNext(value)\n      }\n\n      override fun onError(error: Throwable) {\n        subscription.onError(error)\n      }\n\n      override fun onCompleted() {\n        subscription.onCompleted()\n      }\n    }\n    body(observer)\n  }\n}\n</code></pre>\n\n<p>Then you can implement RPC methods in the following way.</p>\n\n<pre><code>override fun heartBeat(arg: Empty): Observable&lt;ServiceStatus&gt; =\n    asObservable { asyncStub.heartBeat(arg, it) } \n</code></pre>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2002, "favorite_count": 2, "accepted_answer_id": 36621661, "answer_count": 1, "score": 0, "last_activity_date": 1460633168, "creation_date": 1460603585, "question_id": 36613214, "link": "https://stackoverflow.com/questions/36613214/kotlin-grpc-streamobserver-to-deletate-to-rx-publishsubject", "title": "kotlin grpc.StreamObserver to deletate to rx.PublishSubject", "body": "<p>When using GRPC whenever we declare streaming api</p>\n\n<pre><code>rpc heartBeat(Empty) returns (stream ServiceStatus){}\n</code></pre>\n\n<p>we have googles simple interface for observer pattern <code>StreamObserver</code> (this is what protobuf will generate for us) </p>\n\n<pre><code>public interface StreamObserver&lt;V&gt; {\n  void onNext(V var1);\n\n  void onError(Throwable var1);\n\n  void onCompleted();\n}\n</code></pre>\n\n<p>Now what you want to do is to convert this to an actual <code>Observable</code> and only after that pass it for further use.</p>\n\n<pre><code>override fun heartBeat(arg: Empty): Observable&lt;ServiceStatus&gt; {\n    // we create rx java subject\n    val subject = PublishSubject.create&lt;ServiceStatus&gt;()\n\n    // we create grpc observer and delegate all calls to rx java\n    val observer = object : StreamObserver&lt;ServiceStatus&gt; {\n\n        override fun onNext(value: ServiceStatus) {\n            subject.onNext(value)\n        }\n\n        override fun onError(error: Throwable) {\n            subject.onError(error)\n        }\n\n        override fun onCompleted() {\n            subject.onCompleted()\n        }\n    }\n\n    // we use grpc observer for generated api\n    asyncStub.heartBeat(arg, observer)\n\n    // but we pass rx observable (subject) to client code\n    return subject\n}\n</code></pre>\n\n<p>now I'm new to Kotlin but i cant figure out with existing delegation functionalities <strong>is there a way to make Subject delegate of StreamObserver?</strong> \n<strong>Is there a more expressive way to write this piece of code in Kotlin?</strong></p>\n"}]