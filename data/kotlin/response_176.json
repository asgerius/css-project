[{"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1527118613, "post_id": 50498769, "comment_id": 88010589, "body": "You can do as suggested in Suhaib&#39;s answer, or also use something like Promises from Kovenant library which specifically has nice ways of dealing with success/failure."}], "answers": [{"comments": [{"owner": {"reputation": 440, "user_id": 1869343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f65e53496b4f79b70d932becef315?s=128&d=identicon&r=PG", "display_name": "7200rpm", "link": "https://stackoverflow.com/users/1869343/7200rpm"}, "edited": false, "score": 0, "creation_date": 1527216637, "post_id": 50498796, "comment_id": 88053847, "body": "Thanks. It seems there are multiple ways to handle this and I&#39;m not sure which one I like best, but this is a good start."}, {"owner": {"reputation": 440, "user_id": 1869343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f65e53496b4f79b70d932becef315?s=128&d=identicon&r=PG", "display_name": "7200rpm", "link": "https://stackoverflow.com/users/1869343/7200rpm"}, "edited": false, "score": 0, "creation_date": 1527293679, "post_id": 50498796, "comment_id": 88088354, "body": "If anyone is looking for a better explanation on different ways to handle this, I found this article particularly helpful: <a href=\"https://antonioleiva.com/listeners-several-functions-kotlin/\" rel=\"nofollow noreferrer\">antonioleiva.com/listeners-several-functions-kotlin</a>"}, {"owner": {"reputation": 440, "user_id": 1869343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f65e53496b4f79b70d932becef315?s=128&d=identicon&r=PG", "display_name": "7200rpm", "link": "https://stackoverflow.com/users/1869343/7200rpm"}, "edited": false, "score": 0, "creation_date": 1527293718, "post_id": 50498796, "comment_id": 88088362, "body": "The problem with named arguments is that it doesn&#39;t force the developer to use them, making things a big ambigous"}], "tags": [], "owner": {"reputation": 2137, "user_id": 4260786, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VJl1QHOKaIg/AAAAAAAAAAI/AAAAAAAAAZ4/BMNK6a_V4nw/photo.jpg?sz=128", "display_name": "Suhaib Roomy", "link": "https://stackoverflow.com/users/4260786/suhaib-roomy"}, "is_accepted": true, "score": 19, "last_activity_date": 1527117832, "creation_date": 1527117832, "answer_id": 50498796, "question_id": 50498769, "link": "https://stackoverflow.com/questions/50498769/best-way-to-pass-multiple-lambda-functions-in-kotlin-to-handle-success-failure/50498796#50498796", "title": "Best way to pass multiple lambda functions in Kotlin to handle success/failure", "body": "<p>You can attach a name to each variable in kotlin. Change your code like this</p>\n\n<pre><code>DeviceService.getDeviceStatus(\n                onSuccess = { w -&gt;\n                    print(\"device\")\n                },\n                onFailure = { e -&gt; print(e) })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "is_accepted": false, "score": 2, "last_activity_date": 1601725073, "creation_date": 1601725073, "answer_id": 64183805, "question_id": 50498769, "link": "https://stackoverflow.com/questions/50498769/best-way-to-pass-multiple-lambda-functions-in-kotlin-to-handle-success-failure/64183805#64183805", "title": "Best way to pass multiple lambda functions in Kotlin to handle success/failure", "body": "<p>For this specific case, when the second lambda is optional, <code>infix</code> functions work very well:</p>\n<pre><code>sealed class DeviceStatusResult {\n    abstract infix fun onFailure(handler: (String) -&gt; Unit)\n}\n\nclass DeviceStatusSuccess(val device: Device) : DeviceStatusResult() {\n    override fun onFailure(handler: (String) -&gt; Unit) = Unit\n}\n\nclass DeviceStatusFailure(val errorMessage: String) : DeviceStatusResult() {\n    override fun onFailure(handler: (String) -&gt; Unit) = handler(errorMessage)\n}\n\nfun getDeviceStatus(onSuccess: (Device) -&gt; Unit): DeviceStatusResult {\n    // get device status\n    // if (success)\n    val device = Device()\n    onSuccess(device)\n    return DeviceStatusSuccess(device)\n    // else\n    // return DeviceStatusFailure(message)\n}\n</code></pre>\n<p>Then it can used like</p>\n<pre><code>getDeviceStatus { device -&gt;\n    println(device)\n} onFailure { errorMessage -&gt;\n    System.err.println(errorMessage)\n}\n</code></pre>\n<p>Maybe <code>onFailure</code> should be called <code>orFail</code> or something like that.</p>\n<p>It is good when the second argument is optional, but not so much otherwise because it doesn't force the user to actually supply a failure handler. And I don't think it's a good idea because it will be too easy to accidentally omit a failure handler. It's much better to force the user to provide one, even if it happens to be an empty one. Therefore, it is better to use named arguments for this case, even though nothing forces to actually name them.</p>\n"}], "owner": {"reputation": 440, "user_id": 1869343, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f65e53496b4f79b70d932becef315?s=128&d=identicon&r=PG", "display_name": "7200rpm", "link": "https://stackoverflow.com/users/1869343/7200rpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5083, "favorite_count": 0, "accepted_answer_id": 50498796, "answer_count": 2, "score": 14, "last_activity_date": 1601725073, "creation_date": 1527117573, "question_id": 50498769, "link": "https://stackoverflow.com/questions/50498769/best-way-to-pass-multiple-lambda-functions-in-kotlin-to-handle-success-failure", "title": "Best way to pass multiple lambda functions in Kotlin to handle success/failure", "body": "<p>New at Kotlin here and trying to learn the best way to use the higher order functions and passing lambdas. I've created this method to call an API and return an object created from a string OR return a failure if something went wrong.</p>\n\n<pre><code>    fun getDeviceStatus(onSuccess: (Device) -&gt; Unit, onFailure: ((String) -&gt; Unit)? = null) {\n\n        FuelClient.get(DEVICE_URL,\n                success = { responseString -&gt;\n\n                    val adapter = MoshiUtil.moshi.adapter(Device::class.java)\n\n                    val deivce= adapter.fromJson(responseString)!!\n\n                    onSuccess(device)\n                },\n                failure = { onFailure?.invoke(it.message!!)})\n\n\n    }\n</code></pre>\n\n<p>I can use this function fine like so:</p>\n\n<pre><code>DeviceService.getDeviceStatus(\n                { w -&gt;\n                    print(\"device\")\n                },\n                { e -&gt; print(e) })\n</code></pre>\n\n<p>But it bothers me a bit that I can't see the name of the functions to see what each function does. I\"m wondering if there is a cleaner/better way to do this, like </p>\n\n<pre><code>DeviceService.getDeviceStatus(){\n            onSuccess{print(\"device\")}\n            onFailure{print(\"error\")}\n        }\n</code></pre>\n\n<p>or maybe</p>\n\n<pre><code>DeviceService.getDeviceStatus()\n                .onSuccess{print(\"device\")}\n                .onFailure{print(\"error\")}\n</code></pre>\n\n<p>But those gives errors. Any thoughts on how to best handle the onSuccess/onFailure use case that is very common? Thx</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1527111901, "post_id": 50497839, "comment_id": 88008706, "body": "Could you use a fully qualified name of the function? You can also <code>import ... as ...</code> to make names separate for objects that have identical names in different packages."}, {"owner": {"reputation": 268, "user_id": 4434071, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/852e4f60d9c89b857a4be55ceb103be5?s=128&d=identicon&r=PG&f=1", "display_name": "HeatTheIce", "link": "https://stackoverflow.com/users/4434071/heattheice"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1527112852, "post_id": 50497839, "comment_id": 88009054, "body": "I have tried it, but my attempts were not successful. I am also not sure if I did it right. I am also having a problem with the appendHTML, which is being treated as unresolved reference, but the library import kotlinx.html.stream.appendHTML is being imported."}, {"owner": {"reputation": 2283, "user_id": 4526030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-s05ILbxi6YA/AAAAAAAAAAI/AAAAAAAAACc/yAd6W8jNSBI/photo.jpg?sz=128", "display_name": "John Perry", "link": "https://stackoverflow.com/users/4526030/john-perry"}, "edited": false, "score": 1, "creation_date": 1527114788, "post_id": 50497839, "comment_id": 88009628, "body": "I suspect something&#39;s hosed with your installation. It seems to have two different versions of <code>buildString()</code>, both coming from <code>kotlin.text</code> (one reason you can&#39;t resolve it by qualified names!). The first version seems to have come from translating java (which I would expect) and the second version is a bit of a mystery. If I have time I&#39;ll try to look at one of my installations. Are you using IntelliJ or Android Studio?"}, {"owner": {"reputation": 268, "user_id": 4434071, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/852e4f60d9c89b857a4be55ceb103be5?s=128&d=identicon&r=PG&f=1", "display_name": "HeatTheIce", "link": "https://stackoverflow.com/users/4434071/heattheice"}, "edited": false, "score": 0, "creation_date": 1527114900, "post_id": 50497839, "comment_id": 88009666, "body": "I am using IntelliJ"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1527116181, "post_id": 50497839, "comment_id": 88009977, "body": "This seems to be a known issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-20406\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-20406</a>"}, {"owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "edited": false, "score": 0, "creation_date": 1527132436, "post_id": 50497839, "comment_id": 88013536, "body": "Plz try compile your code (instead of just look at the error msg), it may compile (since it&#39;s probably an IDE bug, not a compiler bug)."}], "owner": {"reputation": 268, "user_id": 4434071, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/852e4f60d9c89b857a4be55ceb103be5?s=128&d=identicon&r=PG&f=1", "display_name": "HeatTheIce", "link": "https://stackoverflow.com/users/4434071/heattheice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527112766, "creation_date": 1527111427, "last_edit_date": 1527112766, "question_id": 50497839, "link": "https://stackoverflow.com/questions/50497839/kotlin-fix-overload-resolution-ambiguity-with-buildstring", "title": "Kotlin: fix Overload Resolution Ambiguity with buildString", "body": "<p>I recently was on a meetup where I got to see some things build with Kotlin and wanted to try it out myself. But I am having a hard time even to run the code... I am always getting this error:\n<a href=\"https://i.stack.imgur.com/1NBfl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1NBfl.png\" alt=\"enter image description here\"></a>\nSince I am new I have no idea how to approach this problem. I found some similar issues, but they were solved by casting the variables, but the functions look nearly identical, except the comment there.\nYou can find the code on GitHub <a href=\"https://github.com/jonnyzzz/kotlin-fractals/blob/master/js/src/main/kotlin/main.kt#L93\" rel=\"nofollow noreferrer\">here</a>.\nThanks in advance.</p>\n\n<p><strong>EDIT</strong>\nCode snippet:</p>\n\n<pre><code>document.getElementById(\"jvmLink\").unsafeCast&lt;HTMLDivElement&gt;().innerHTML = buildString {\n    appendHTML().a(href = \"$url&amp;jvm=false\", target = \"_blank\") {\n        +\"Open JVM image in new window\"\n    }\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 4, "creation_date": 1527106794, "post_id": 50496781, "comment_id": 88006411, "body": "If you check the specific error message you get, it says: <code>required: Int, found: Int?</code> so you need a non-null int there."}], "answers": [{"comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "edited": false, "score": 0, "creation_date": 1527111900, "post_id": 50496950, "comment_id": 88008703, "body": "I&#39;ve just checked and it&#39;s because we have to use <code>lastIndexOf</code> instead of <code>indexOf</code> for some reason"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "edited": false, "score": 0, "creation_date": 1527111905, "post_id": 50496950, "comment_id": 88008708, "body": "My code in the end was: <code>fun indexOfMax(a: IntArray): Int? = a.takeIf { it.isNotEmpty() }?.let { a -&gt; a.lastIndexOf(a.max()!!) }</code>  (although using run instead of let might make more sense here)"}, {"owner": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "edited": false, "score": 1, "creation_date": 1527112845, "post_id": 50496950, "comment_id": 88009051, "body": "fun indexOfMax(a: IntArray): Int?{    if (a.isEmpty()){        return null    }else{        return a.lastIndexOf(a.max()!!)    }    }"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "edited": false, "score": 0, "creation_date": 1527117713, "post_id": 50496950, "comment_id": 88010357, "body": "I actually didn&#39;t do a whole course or anything, I mostly learned from 1.) converting an existing big project and figuring out strange quirks that I documented <a href=\"https://android.jlelse.eu/odd-things-to-look-out-for-when-converting-code-to-kotlin-a00b6239828c\" rel=\"nofollow noreferrer\">in this article</a>, and 2.) I watched this video: <a href=\"https://academy.realm.io/posts/kau-jake-wharton-testing-robots/\" rel=\"nofollow noreferrer\">academy.realm.io/posts/kau-jake-wharton-testing-robots</a> and 3.) I&#39;m working on a full-Kotlin project with two other devs and they know a bunch of tricks :D it took me a while to understand <code>let</code>/<code>run</code>/<code>apply</code>/<code>also</code>/<code>takeif</code>/<code>takeUnless</code> but it chains quite nicely once you get it :D"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "reply_to_user": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "edited": false, "score": 0, "creation_date": 1527118013, "post_id": 50496950, "comment_id": 88010423, "body": "And what&#39;s cool is that you can <a href=\"https://github.com/JetBrains/kotlin/blob/9ffd0db4a87116a0c825f2f0163b8ad3eb1a922f/libraries/stdlib/src/kotlin/util/Standard.kt#L45-L49\" rel=\"nofollow noreferrer\">check out the source code</a> for some of these tricky things. It helps! Although I advise watching that video I linked, first."}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": false, "score": 2, "last_activity_date": 1527140715, "last_edit_date": 1527140715, "creation_date": 1527107232, "answer_id": 50496950, "question_id": 50496781, "link": "https://stackoverflow.com/questions/50496781/why-does-this-kotlin-code-have-a-type-mismatch/50496950#50496950", "title": "Why does this Kotlin code have a type mismatch?", "body": "<p>I remember when I first started out with Kotlin and I was confused when it said things like \"this variable is mutable so safe-casting is not allowed\" and I had no idea what was going on :)</p>\n\n<p>Anyways, you're getting a type mismatch because the language has typed nullability. So you cannot <em>potentially</em> give <code>null</code> to <code>indexOf</code> because it demands it to be a non-null <code>Int</code>.</p>\n\n<p>If you check the source code for <code>max()</code>:</p>\n\n<pre><code>public fun IntArray.max(): Int? {\n    if (isEmpty()) return null\n    ....\n</code></pre>\n\n<p>So it <strong>can</strong> give you <code>null</code>, and therefore you get</p>\n\n<pre><code>val maxValue: Int? = a.max()\n</code></pre>\n\n<p>Where you cannot supply <code>maxValue</code> as an argument for <code>indexOf</code>, because it expects <code>Int</code>, and not <code>Int?</code>.</p>\n\n<p>So the solution is to handle the <code>null</code> case explicitly:</p>\n\n<pre><code>return maxValue?.let { a.indexOf(it) } ?: null\n</code></pre>\n\n<p>But now, based on what we know you could greatly reduce the lines of code like this:</p>\n\n<pre><code>fun indexOfMax(a: IntArray): Int? = a.max()?.let { a.indexOf(it) }\n</code></pre>\n\n<p>Which you'll later be able to turn into an extension function:</p>\n\n<pre><code>fun IntArray.indexOfMax(): Int? = max()?.let { indexOf(it) }\n</code></pre>\n\n<hr>\n\n<p>Good luck with your journey through Kotlin. Personally I think the Koans are very irritating, I preferred converting Java code to Kotlin to see what it's like to learn the initial syntactic quirks.</p>\n"}, {"tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1527144368, "creation_date": 1527144368, "answer_id": 50502692, "question_id": 50496781, "link": "https://stackoverflow.com/questions/50496781/why-does-this-kotlin-code-have-a-type-mismatch/50502692#50502692", "title": "Why does this Kotlin code have a type mismatch?", "body": "<p><code>a.max()</code> returns <code>null</code> if and only if <code>a</code> is empty. So inside <code>if (a.isNotEmpty())</code> it'll never be null, and <code>a.indexOf(maxValue)</code> takes a non-null <code>Int</code>. </p>\n\n<p>So this code would be fine, but Kotlin's type system can't express \"<code>a.max()</code> never returns <code>null</code> if <code>a</code> is not empty\" and doesn't track array emptiness in the same way it tracks nullability. So you need to handle the <code>maxValue == null</code> case even though it can't actually happen.</p>\n"}], "owner": {"reputation": 55, "user_id": 8134871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be06707202319a76aa5f500849530fc0?s=128&d=identicon&r=PG&f=1", "display_name": "adam autuori", "link": "https://stackoverflow.com/users/8134871/adam-autuori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 1, "accepted_answer_id": 50502692, "answer_count": 2, "score": -3, "last_activity_date": 1527144368, "creation_date": 1527106568, "last_edit_date": 1527106705, "question_id": 50496781, "link": "https://stackoverflow.com/questions/50496781/why-does-this-kotlin-code-have-a-type-mismatch", "title": "Why does this Kotlin code have a type mismatch?", "body": "<p>Your task is to implement the indexOfMax() function so that it returns\nthe index of the largest element in the array, or null if the array is empty.</p>\n\n<pre><code>package maxindex\n\nimport kotlin.collections.*\n\nfun indexOfMax(a: IntArray): Int? {\n    if (a.isNotEmpty()) {\n        var maxValue = a.max()\n        return a.indexOf(maxValue) // Type mismatch\n    } else {\n        return null\n    }\n}\n</code></pre>\n"}, {"tags": ["gradle", "kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 1683, "user_id": 2926992, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2w3LT.jpg?s=128&g=1", "display_name": "Erdin Eray", "link": "https://stackoverflow.com/users/2926992/erdin-eray"}, "edited": false, "score": 2, "creation_date": 1553600066, "post_id": 50546834, "comment_id": 97435831, "body": "While this is the proper way to test a normal Java application, TornadoFX application is initially a JavaFX application and it needs extra care for testing since JavaFX uses its own thread and, in some cases, you need to do the testing headless. <a href=\"https://github.com/TestFX/TestFX\" rel=\"nofollow noreferrer\">testfx</a> is a nice project dealing with this but I do not know if it is compatible with TornadoFX since it is initially a Java project."}, {"owner": {"reputation": 771, "user_id": 11268550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-evYZvlqxjGg/AAAAAAAAAAI/AAAAAAAAAS8/2GAma8xFqDE/photo.jpg?sz=128", "display_name": "JCamacho", "link": "https://stackoverflow.com/users/11268550/jcamacho"}, "reply_to_user": {"reputation": 1683, "user_id": 2926992, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2w3LT.jpg?s=128&g=1", "display_name": "Erdin Eray", "link": "https://stackoverflow.com/users/2926992/erdin-eray"}, "edited": false, "score": 0, "creation_date": 1574108860, "post_id": 50546834, "comment_id": 104106195, "body": "@ErdinEray that should be fine. TornadoFX directly builds on top of JavaFX and Kotlin was built on JVM. <i>&quot;<a href=\"https://kotlinlang.org/docs/reference/java-interop.html\" rel=\"nofollow noreferrer\">Pretty much all Java code can be used without any issues</a>&quot;</i>. The only problem I could see is not having a matching JDK version between your dependencies."}], "tags": [], "owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "is_accepted": false, "score": 1, "last_activity_date": 1527367327, "creation_date": 1527367327, "answer_id": 50546834, "question_id": 50496515, "link": "https://stackoverflow.com/questions/50496515/writing-unit-tests-for-tornadofx/50546834#50546834", "title": "Writing Unit Tests For TornadoFX", "body": "<p>In case any people wander over to this page with the same question, here is the answer:</p>\n\n<p>In my case, I used gradle to build this project. Therefore, I used gradle to run the tests. You write tests the same way you would in Java, like so</p>\n\n<pre><code>import org.junit.Test\nimport org.junit.Assert.*  //this imports your assert methods\n\nclass TestCases{\n\n   @Test\n   fun testMethod(){\n      //initialize expected value\n      //calculate actual value\n      assertEquals(actual, expected)\n   }\n}\n</code></pre>\n\n<p>The important parts are the import statements and the '@Test' tag. The important statements give you the functionality to run tests. The '@Test' tag is put above any method that you want to be run as a test.</p>\n\n<p>Once you finish writing your tests, go to your preferred terminal and cd to the directory containing your project. Then run this command (I work in Windows so I use a .bat file):</p>\n\n<pre><code>./gradlew.bat test\n</code></pre>\n\n<p>That's all you need to run unit tests for your Kotlin project.</p>\n"}], "owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1527367327, "creation_date": 1527105444, "question_id": 50496515, "link": "https://stackoverflow.com/questions/50496515/writing-unit-tests-for-tornadofx", "title": "Writing Unit Tests For TornadoFX", "body": "<p>I have a Gradle project written in Kotlin using the TornadoFX framework. I am new to all of these things. Does anyone know, or can point me to, some tutorials on how to write unit tests for this type of project? I am not sure of TornadoFX is supposed to have its own testing framework, or if gradle has one that I should be using.</p>\n"}, {"tags": ["android", "kotlin", "wait", "android-espresso"], "comments": [{"owner": {"reputation": 13572, "user_id": 168903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20704a8239b9766632eeb10ab5b2034?s=128&d=identicon&r=PG", "display_name": "chiuki", "link": "https://stackoverflow.com/users/168903/chiuki"}, "edited": false, "score": 0, "creation_date": 1527110902, "post_id": 50496484, "comment_id": 88008325, "body": "One option is to disable redrawing during test. Would that be acceptable?"}, {"owner": {"reputation": 11, "user_id": 3357730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWfJi.jpg?s=128&g=1", "display_name": "elock", "link": "https://stackoverflow.com/users/3357730/elock"}, "reply_to_user": {"reputation": 13572, "user_id": 168903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20704a8239b9766632eeb10ab5b2034?s=128&d=identicon&r=PG", "display_name": "chiuki", "link": "https://stackoverflow.com/users/168903/chiuki"}, "edited": false, "score": 0, "creation_date": 1527173015, "post_id": 50496484, "comment_id": 88036757, "body": "That sounds perfect. How would I go about that?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3357730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWfJi.jpg?s=128&g=1", "display_name": "elock", "link": "https://stackoverflow.com/users/3357730/elock"}, "edited": false, "score": 0, "creation_date": 1528817089, "post_id": 50596185, "comment_id": 88646700, "body": "OK, sounds like I need to build a custom view for my test to handle this scenario. I&#39;ll take a crack at that this week or next. Thanks @Chiuki!"}], "tags": [], "owner": {"reputation": 13572, "user_id": 168903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20704a8239b9766632eeb10ab5b2034?s=128&d=identicon&r=PG", "display_name": "chiuki", "link": "https://stackoverflow.com/users/168903/chiuki"}, "is_accepted": false, "score": 0, "last_activity_date": 1527652803, "creation_date": 1527652803, "answer_id": 50596185, "question_id": 50496484, "link": "https://stackoverflow.com/questions/50496484/how-can-i-work-around-appnotidleexception-for-a-view-that-redraws-every-second/50596185#50596185", "title": "How can I work around AppNotIdleException for a view that redraws every second?", "body": "<p>In your custom view, retrieve the system setting <code>ANIMATOR_DURATION_SCALE</code>:</p>\n\n<pre><code>private fun getAnimatorSpeed() = \n  if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {\n  getAnimatorSpeedNew()\n} else {\n  getAnimatorSpeedOld()\n}\n\n@RequiresApi(Build.VERSION_CODES.JELLY_BEAN_MR1)\nprivate fun getAnimatorSpeedNew() = Settings.Global.getFloat(\n    context.contentResolver,\n    Settings.Global.ANIMATOR_DURATION_SCALE,\n    1f)\n\n@Suppress(\"DEPRECATION\")\nprivate fun getAnimatorSpeedOld() = Settings.System.getFloat(\n    context.contentResolver,\n    Settings.System.ANIMATOR_DURATION_SCALE,\n    1f)\n</code></pre>\n\n<p>Disable redrawing in your custom view when animator speed is zero. While you're at it, you may want to adjust your animation to respect the system animator speed.</p>\n\n<p>Before you run tests, set system animator speed to zero by going to <strong>Settings > Developer options</strong> on your device.</p>\n"}], "owner": {"reputation": 11, "user_id": 3357730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oWfJi.jpg?s=128&g=1", "display_name": "elock", "link": "https://stackoverflow.com/users/3357730/elock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527652803, "creation_date": 1527105342, "question_id": 50496484, "link": "https://stackoverflow.com/questions/50496484/how-can-i-work-around-appnotidleexception-for-a-view-that-redraws-every-second", "title": "How can I work around AppNotIdleException for a view that redraws every second?", "body": "<p>I'm testing an Android application with a meter graphic where an element on the screen (the meter) is redrawn every second. The idea is that I tap a start button and the meter turns on, and when I tap a stop button the meter turns off. </p>\n\n<p>Manually it works fine, but when I run my Espresso tests, the test hangs after I tap start because the app never idles, as it is being redrawn every second. As expected, I get:</p>\n\n<p>android.support.test.espresso.AppNotIdleException: Looped for 13452 iterations over 60 SECONDS. The following Idle Conditions failed .</p>\n\n<p>I found noActivity() in the <a href=\"https://developer.android.com/reference/android/support/test/espresso/ViewInteraction\" rel=\"nofollow noreferrer\">Android Developers docs</a>, thinking that may be helpful, but I can't figure out how to use it properly nor can I find any good examples. The stop button is clearly on the page but this step is bypassed and it goes straight to tearDown(), which tells me that I'm not using it correctly or I don't understand what it's doing:</p>\n\n<pre><code>    onView(withId(R.id.stop_button)).noActivity().perform()\n</code></pre>\n\n<p>So how do I overcome this? Is there an easy way to tell Espresso to not use idling resources for a certain test, or part of it? Do I need to write an idling resource that says when the stop button is found, the app is idle? Is there another method I could be missing?</p>\n\n<p>FWIW I'm using Kotlin, but I welcome Java answers as well since they're so similar. Thanks!</p>\n"}, {"tags": ["regex", "kotlin"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1527102312, "post_id": 50495623, "comment_id": 88004174, "body": "Related/dupe: <a href=\"//stackoverflow.com/q/45035672\">What exactly does a Regex created with Regex.fromLiteral() match?</a> In short, <code>Regex.fromLiteral</code> is the wrong function to use. Create your regex with <code>Regex(&quot;^[c].*[e]$&quot;)</code>."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527102817, "post_id": 50495623, "comment_id": 88004430, "body": "Your regex is quite baroque, too. What you need is <code>spices.filter { it.matches(Regex(&quot;c.*e&quot;)) }</code>. Another caveat is that you should definitely not create the regex inside the lambda. Use <code>val regex = Regex(&quot;c.*e&quot;)</code> and then <code>spices.filter { it.matches(regex) }</code>"}, {"owner": {"reputation": 795, "user_id": 3917166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX3sZ.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3917166/abhishek"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527103291, "post_id": 50495623, "comment_id": 88004675, "body": "@MarkoTopolnik, why shouldn&#39;t I create <code>regex</code> in lambda ?? As @Aran-Frey mentioned, that using <code>Reges()</code> instead of <code>Regex.formLiteral()</code> works. What&#39;s wrong in that  ?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1527118771, "post_id": 50495623, "comment_id": 88010646, "body": "Idiomatic is <code>&quot;&quot;&quot;someRegexThing&quot;&quot;&quot;.toRegex()</code>"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527142569, "post_id": 50495623, "comment_id": 88016709, "body": "@Abhishek It&#39;s wasteful to create a regex object from scratch on each invocation of the filtering function. The pattern you supply will be parsed and compiled from scratch each time. But, if you absolutely don&#39;t care about performance, then it&#39;s fine."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1527142667, "post_id": 50495623, "comment_id": 88016761, "body": "@JaysonMinard The extra quotes are good when you have <code>\\ </code> in your pattern, otherwise they&#39;re just overhead. <code>.toRegex()</code> may have some advantage because you don&#39;t name the regex type directly, but <code>Regex(...)</code> is actually shorter to write, and reads quite well too. It&#39;s a public constructor on a public class... so it&#39;s public API."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527143015, "post_id": 50495623, "comment_id": 88016922, "body": "@Abhishek About your added content in the question, it&#39;s far easier and quicker to just read the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/-regex-option/-l-i-t-e-r-a-l.html\" rel=\"nofollow noreferrer\">documentation</a> on that regex option instead of asking the world to copy-paste it for you."}, {"owner": {"reputation": 795, "user_id": 3917166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX3sZ.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3917166/abhishek"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527147241, "post_id": 50495623, "comment_id": 88019351, "body": "Sorry @MarkoTopolnik, but I&#39;m not asking the world to copy paste anything for me. I&#39;m looking for an answer to a problem that I faced. As StackOverflow is a forum for Questions and Answers, I chose to put my question here. Before putting the question, I tried to find an answer. I couldn&#39;t find the exact answer so asked this question which is flagged as duplicate. I accept it as I have the answer now. Anyways, thanks for the documentation though. :)"}], "owner": {"reputation": 795, "user_id": 3917166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX3sZ.jpg?s=128&g=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3917166/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1095, "favorite_count": 0, "closed_date": 1527102862, "answer_count": 0, "score": 0, "last_activity_date": 1527103815, "creation_date": 1527101891, "last_edit_date": 1527103815, "question_id": 50495623, "link": "https://stackoverflow.com/questions/50495623/how-to-filter-a-list-in-kotlin-using-regex", "closed_reason": "Duplicate", "title": "How to filter a list in Kotlin using Regex", "body": "<p>I've a list defined in Kotlin like following --</p>\n\n<p><strong><code>val spices = listOf(\"curry\", \"pepper\", \"cayenne\", \"ginger\", \"red curry\", \"green curry\", \"red pepper\" )</code></strong></p>\n\n<p>Now I want to filter the spices which starts with <code>c</code> and ends with <code>e</code>. If I try below code, I get satisfactory result which is <strong><code>[cayenne]</code></strong> --</p>\n\n<p><strong><code>val filteredSpices = spices.filter { it.first() == 'c' &amp;&amp; it.last() == 'e'}</code></strong></p>\n\n<p>But when I try following code, it returns an empty list ---</p>\n\n<p><strong><code>val filteredSpices = spices.filter { it.matches(Regex.fromLiteral(\"^[c].*[e]$\")) }</code></strong></p>\n\n<p>I've tested the <strong>Regex</strong> before writing the solution. The Regex works fine but <strong>fails to filter any element from the list</strong>. </p>\n\n<p>Why is it failing? What am I doing something wrong ?? I've tried the code on <strong><code>Intelli J Idea REPL</code></strong>. </p>\n\n<p>People have suggested me to use <strong><code>Regex()</code></strong> instead of <strong><code>Regex.fromLiteral()</code></strong>, which works. But if we look under the hood below are the implementation for both of them ---</p>\n\n<p><strong><code>Regex()</code>  -- <code>public constructor(pattern: String): this(Pattern.compile(pattern))</code></strong></p>\n\n<p><strong><code>Regex.fromLiteral()</code>  ---</strong>\n<strong><code>public fun fromLiteral(literal: String): Regex = literal.toRegex(RegexOption.LITERAL)</code></strong></p>\n\n<p>And the implementation of <code>literal.toRegex()</code> is like following ---</p>\n\n<p><strong><code>public inline fun String.toRegex(option: RegexOption): Regex = Regex(this, option)</code></strong></p>\n\n<p>They both actually returns a <strong><code>Regex</code></strong>. The only difference between both of the them is -- <strong><code>Regex.fromLiteral()</code></strong> returns a <strong>Regex</strong> with an option called <strong><code>RegexOption.LITERAL</code></strong>. </p>\n\n<p>I want to understand why and how they differ exactly ??</p>\n"}, {"tags": ["java", "android", "gradle", "kotlin", "android-databinding"], "comments": [{"owner": {"reputation": 932, "user_id": 834785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cf97e9f2a8998136efa76fd7dcf0cc34?s=128&d=identicon&r=PG&f=1", "display_name": "CodingTT", "link": "https://stackoverflow.com/users/834785/codingtt"}, "edited": false, "score": 0, "creation_date": 1531950462, "post_id": 50495141, "comment_id": 89794453, "body": "Did you fix it?"}, {"owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "reply_to_user": {"reputation": 932, "user_id": 834785, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cf97e9f2a8998136efa76fd7dcf0cc34?s=128&d=identicon&r=PG&f=1", "display_name": "CodingTT", "link": "https://stackoverflow.com/users/834785/codingtt"}, "edited": false, "score": 0, "creation_date": 1531993009, "post_id": 50495141, "comment_id": 89809231, "body": "@CodingTT Yes, I removed use of KAPT from the project. Though it is workaround and not a fix."}], "answers": [{"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": false, "score": 0, "last_activity_date": 1527100749, "creation_date": 1527100749, "answer_id": 50495294, "question_id": 50495141, "link": "https://stackoverflow.com/questions/50495141/error-cannot-find-symbol-daosession-and-daomaster/50495294#50495294", "title": "error: cannot find symbol DaoSession and DaoMaster", "body": "<p>Errors like this can happen if code generation fails. It does not mean that the error is caused by GreenDao. Since you mentioned that you just introduced data binding it might be a problem with data binding.</p>\n\n<p>The challenge is to find the actual error log, try to build with gradle with <code>--debug</code> and <code>--stacktrace</code> options and inspect the output.</p>\n"}, {"comments": [{"owner": {"reputation": 514, "user_id": 2090322, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/df1ce79208cd3f269b8e95770917cd7f?s=128&d=identicon&r=PG", "display_name": "Sergiob", "link": "https://stackoverflow.com/users/2090322/sergiob"}, "edited": false, "score": 0, "creation_date": 1541691658, "post_id": 52589414, "comment_id": 93310157, "body": "You made my day !"}], "tags": [], "owner": {"reputation": 16195, "user_id": 3806413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/MgI5b.jpg?s=128&g=1", "display_name": "0xAliHn", "link": "https://stackoverflow.com/users/3806413/0xalihn"}, "is_accepted": false, "score": 7, "last_activity_date": 1538390610, "creation_date": 1538390610, "answer_id": 52589414, "question_id": 50495141, "link": "https://stackoverflow.com/questions/50495141/error-cannot-find-symbol-daosession-and-daomaster/52589414#52589414", "title": "error: cannot find symbol DaoSession and DaoMaster", "body": "<p>Change you app build.gradle like this:</p>\n\n<pre><code>//For green dao\napply plugin: 'org.greenrobot.greendao'\n\napply plugin: 'kotlin-kapt'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n</code></pre>\n\n<p>Move your <code>greendao</code> plugin before the <code>kotlin</code> plugin.</p>\n"}], "owner": {"reputation": 5646, "user_id": 2021812, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/MehDl.jpg?s=128&g=1", "display_name": "Malwinder Singh", "link": "https://stackoverflow.com/users/2021812/malwinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538390610, "creation_date": 1527100114, "last_edit_date": 1527107388, "question_id": 50495141, "link": "https://stackoverflow.com/questions/50495141/error-cannot-find-symbol-daosession-and-daomaster", "title": "error: cannot find symbol DaoSession and DaoMaster", "body": "<p>I am using GreenDao in my application. Proguard is enabled for debug build.</p>\n\n<p>After adding Data binding support, following issue arrived:</p>\n\n<blockquote>\n  <p>/app/src/main/java/com/example/MainApplication.java:29:\n  error: cannot find symbol</p>\n  \n  <p>private DaoSession mDaoSession;</p>\n\n<pre><code>      ^   \n</code></pre>\n  \n  <p>symbol:   class DaoSession<br>\n  location: class Main Application</p>\n</blockquote>\n\n<p>Same issue is coming for <code>DaoMaster</code>.</p>\n\n<p>Also, this issue is coming:</p>\n\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:kaptDebugKotlin'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:103)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:73)\n</code></pre>\n\n<p>app build.gradle:</p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\n//For green dao\napply plugin: 'org.greenrobot.greendao'\n\nbuildscript {\n    ext.kotlin_version = '1.2.41'\n    ...\n}\nandroid {\n    aaptOptions.cruncherEnabled = false\n    aaptOptions.useNewCruncher = false\n    ...\n    }\n    dataBinding {\n        enabled = true\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled true\n            shrinkResources true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    kapt { generateStubs = true }\n}\n\ndependencies {\n    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'org.greenrobot:greendao:3.2.2'\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n    implementation 'org.jetbrains.anko:anko-common:0.8.3'\n    kapt 'com.android.databinding:compiler:3.1.2'\n}\n\napply plugin: 'kotlin-android-extensions'\n</code></pre>\n\n<p>Project build.gradle:</p>\n\n<pre><code>buildscript {\n    ext.kotlin_version = '1.2.41'\n    dependencies {\n        classpath  'com.android.tools.build:gradle:3.1.2'\n        classpath 'org.greenrobot:greendao-gradle-plugin:3.2.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\n...\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-chips"], "comments": [{"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1527097718, "post_id": 50494502, "comment_id": 88001858, "body": "Is this your entire code so far? You&#39;re not adding the new <code>Chip</code> instances to a parent <code>View</code> anywhere. It&#39;s also half Kotlin and half Java."}], "answers": [{"comments": [{"owner": {"reputation": 12843, "user_id": 1565984, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b255e2ff72c208dd049995ff1c00aeec?s=128&d=identicon&r=PG", "display_name": "kandroidj", "link": "https://stackoverflow.com/users/1565984/kandroidj"}, "reply_to_user": {"reputation": 5592, "user_id": 3595288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LpxJj.jpg?s=128&g=1", "display_name": "Choletski", "link": "https://stackoverflow.com/users/3595288/choletski"}, "edited": false, "score": 14, "creation_date": 1543842995, "post_id": 50823177, "comment_id": 94051708, "body": "@Choletski the question was asked in kotlin so it was answered in kotlin. The same thing can be applied for Java. It should be a very straightforward change"}, {"owner": {"reputation": 1277, "user_id": 4148248, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-YKiOzh8Ky9w/AAAAAAAAAAI/AAAAAAAAABc/pIdeSNHuWwA/photo.jpg?sz=128", "display_name": "Vinodh Kumar", "link": "https://stackoverflow.com/users/4148248/vinodh-kumar"}, "edited": false, "score": 0, "creation_date": 1575521116, "post_id": 50823177, "comment_id": 104596457, "body": "@kandroidj How to get selected value of dynamic chips"}], "tags": [], "owner": {"reputation": 12843, "user_id": 1565984, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b255e2ff72c208dd049995ff1c00aeec?s=128&d=identicon&r=PG", "display_name": "kandroidj", "link": "https://stackoverflow.com/users/1565984/kandroidj"}, "is_accepted": true, "score": 43, "last_activity_date": 1543830966, "last_edit_date": 1543830966, "creation_date": 1528826419, "answer_id": 50823177, "question_id": 50494502, "link": "https://stackoverflow.com/questions/50494502/how-can-i-add-the-new-android-chips-dynamically-in-android/50823177#50823177", "title": "How can I add the new android chips dynamically in Android?", "body": "<p>You can add <code>Chip</code>s the same way as any other <code>ViewGroup</code> like so:</p>\n\n<pre><code>for (index in tags.indices) {\n  val chip = Chip(chipGroup.context)\n  chip.text= \"Item ${tags[index]}\"\n\n  // necessary to get single selection working\n  chip.isClickable = true\n  chip.isCheckable = true\n  chipGroup.addView(chip)\n}\n</code></pre>\n\n<p>for singleSelection don't forget to add to your chipGroup:</p>\n\n<pre><code>chipGroup.isSingleSelection = true\n</code></pre>\n\n<p>or in xml</p>\n\n<pre><code>app:singleSelection=\"true\"\n</code></pre>\n\n<p>Good Luck and Happy Coding!</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 6371758, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AvSunIh-s9k/AAAAAAAAAAI/AAAAAAAAABY/Smf9DsJjk2o/photo.jpg?sz=128", "display_name": "Nicolai Weitkemper", "link": "https://stackoverflow.com/users/6371758/nicolai-weitkemper"}, "is_accepted": false, "score": 4, "last_activity_date": 1564845732, "creation_date": 1564845732, "answer_id": 57339645, "question_id": 50494502, "link": "https://stackoverflow.com/questions/50494502/how-can-i-add-the-new-android-chips-dynamically-in-android/57339645#57339645", "title": "How can I add the new android chips dynamically in Android?", "body": "<p>I always got the following error when trying to create a new Chip:</p>\n\n<blockquote>\n  <p>IllegalArgumentException: This component requires that you specify a valid android:textAppearance attribute</p>\n</blockquote>\n\n<p>This could be fixed by instead inflating a custom <code>R.layout.chip</code> with the following line:\n<code>android:textAppearance=\"@style/TextAppearance.MaterialComponents.Chip\"</code></p>\n"}], "owner": {"reputation": 335, "user_id": 6418926, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eH9xFdTwbRc/AAAAAAAAAAI/AAAAAAAATzU/AhE2skqhSAQ/photo.jpg?sz=128", "display_name": "ramon guardia", "link": "https://stackoverflow.com/users/6418926/ramon-guardia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15928, "favorite_count": 3, "accepted_answer_id": 50823177, "answer_count": 2, "score": 21, "last_activity_date": 1607043272, "creation_date": 1527097584, "last_edit_date": 1607043272, "question_id": 50494502, "link": "https://stackoverflow.com/questions/50494502/how-can-i-add-the-new-android-chips-dynamically-in-android", "title": "How can I add the new android chips dynamically in Android?", "body": "<p>I have a class called Question which contains a String array of tags. I'm trying to show every question in a Recyclerview using Kotlin and every tag in a new chip. These chips will be included inside a ChipGroup.</p>\n<p>My question is:</p>\n<p>How can I add every tag element of the array into a new Chip?\nI'm trying to do this but It's obviously not working.</p>\n<pre><code>if (tags != null) {\n    for (tag in tags) {\n        val chip = Chip(itemView.context)\n    }\n}\n</code></pre>\n<p>Thank you all!</p>\n"}, {"tags": ["java", "kotlin", "kapt", "annotation-processor", "kotlinpoet"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1527093532, "post_id": 50493424, "comment_id": 87999816, "body": "Where is the source generated, is the directory added to the source set?"}, {"owner": {"reputation": 5781, "user_id": 845296, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1567763160/picture?type=large", "display_name": "epool", "link": "https://stackoverflow.com/users/845296/epool"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1527093911, "post_id": 50493424, "comment_id": 87999999, "body": "@EpicPandaForce the source generated is in <code>...build&#47;generated&#47;source&#47;kapt&#47;debug&#47;...</code> it&#39;s the same directory used by dagger and other annotation processors, my Android Studio recognizes the generated class and I can use the class inside of a method, but not as a class member."}], "answers": [{"comments": [{"owner": {"reputation": 5781, "user_id": 845296, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1567763160/picture?type=large", "display_name": "epool", "link": "https://stackoverflow.com/users/845296/epool"}, "edited": false, "score": 0, "creation_date": 1527909439, "post_id": 50650929, "comment_id": 88316918, "body": "Actually, I created the project with Kotlin support from Android Studio, maybe AS is not adding it by default and it can be resolved in the new kotlin gradle plugins, but not sure. I just pushed the change for adding the kotlin runtime dependency, which didn&#39;t help. Anyways good catch."}], "tags": [], "owner": {"reputation": 37094, "user_id": 543539, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cCXi8.jpg?s=128&g=1", "display_name": "Egor", "link": "https://stackoverflow.com/users/543539/egor"}, "is_accepted": false, "score": 1, "last_activity_date": 1527886766, "creation_date": 1527886766, "answer_id": 50650929, "question_id": 50493424, "link": "https://stackoverflow.com/questions/50493424/kotlin-kapt-generated-kotlin-class-is-not-recognized-as-class-member-but-it-doe/50650929#50650929", "title": "Kotlin/KAPT Generated Kotlin class is not recognized as class member, but it does inside of methods", "body": "<p>Looking at your Github project, I notice that you don't declare a dependency on <code>kotlin-stdlib-jdk7</code> in the <code>app</code> module. When I build the module, compiler emits the following warnings:</p>\n\n<pre><code>warning: unknown enum constant AnnotationTarget.CLASS\n  reason: class file for kotlin.annotation.AnnotationTarget not found   \nwarning: unknown enum constant AnnotationRetention.SOURCE\n  reason: class file for kotlin.annotation.AnnotationRetention not found    \nwarning: unknown enum constant AnnotationTarget.CLASS\n  reason: class file for kotlin.annotation.AnnotationTarget not found   \n</code></pre>\n\n<p>Since <code>kotlin-stdlib-jdk7</code> is declared as <code>implementation</code> in the <code>annotations</code> module, the <code>app</code> module doesn't see it as a transitive dependency, that might be the reason why compilation fails. To fix it, you should probably declare the correct dependency in the <code>app</code> module, or at least use <code>apiElements</code> scope for <code>kotlin-stdlib-jdk7</code> in <code>annotations</code>.</p>\n\n<p>The fact that the IDE doesn't notify you that compilation failed might be a tools bug, but there's definitely no underlying Kotlin compiler issue.</p>\n"}], "owner": {"reputation": 5781, "user_id": 845296, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1567763160/picture?type=large", "display_name": "epool", "link": "https://stackoverflow.com/users/845296/epool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527886766, "creation_date": 1527093439, "last_edit_date": 1527175799, "question_id": 50493424, "link": "https://stackoverflow.com/questions/50493424/kotlin-kapt-generated-kotlin-class-is-not-recognized-as-class-member-but-it-doe", "title": "Kotlin/KAPT Generated Kotlin class is not recognized as class member, but it does inside of methods", "body": "<p>I have written an annotation processor that generates a builder class for my classes annotated with <code>@DataBuilder</code></p>\n\n<pre><code>@Target(AnnotationTarget.CLASS)\n@Retention(AnnotationRetention.SOURCE)\nannotation class DataBuilder\n</code></pre>\n\n<p>My classes annotated with this annotation are located in the <code>com.my.package.model</code> package and the generated builder class is also located in the same package <code>com.my.package.model</code> but in the generated directory of course <code>build/generated/source/kapt/debug/com/my/package/model/MyModelBuilder.kt</code>, I can use these generated classes fine inside of my model classes(written in Kotlin)</p>\n\n<p><strong>BUT</strong> I can <strong>NOT</strong> use the generated <code>MyModelBuilder</code> Kotlin class inside of a java class as a class member</p>\n\n<pre><code>package com.my.package.home;\nimport com.my.package.model.MyModelBuilder;\npublic class Home {\n    MyModelBuilder builder; // &lt;=== AS recognizes the class, but I'm having an compilation issue\n}\n</code></pre>\n\n<p>Android Studio recognizes the class, but I\u2019m having this compilation issue</p>\n\n<pre><code>com/my/package/home/Home.java:4: error: cannot find symbol\nMyModelBuilder builder;\n           ^\n  symbol:   class MyModelBuilder\n  location: class Home\n</code></pre>\n\n<p>it\u2019s weird because I can use this generated builder class only inside of methods, this code compiles fine:</p>\n\n<pre><code>package com.my.package.home;\nimport com.my.package.model.MyModelBuilder;\npublic class Home {\n    public void hello() {\n        MyModelBuilder builder;\n    }\n}\n</code></pre>\n\n<p>could somebody here help me to understand this behavior and how to fix this? In advance, thanks!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I just created this repo with the necessary code to replicate the issue\n<a href=\"https://github.com/epool/HelloKapt\" rel=\"nofollow noreferrer\">https://github.com/epool/HelloKapt</a></p>\n\n<p>The project works fine after cloning and running, to replicate the issue please un-comment this line <a href=\"https://github.com/epool/HelloKapt/blob/master/app/src/main/java/com/nearsoft/hellokapt/app/MainActivity.java#L13\" rel=\"nofollow noreferrer\">https://github.com/epool/HelloKapt/blob/master/app/src/main/java/com/nearsoft/hellokapt/app/MainActivity.java#L13</a></p>\n\n<p>Note: If I convert my MainActivity.java class to Kotlin(MainActivity.kt) the issues is NOT reproducible and works fine, but I don\u2019t want to do so due to some project limitations so far</p>\n\n<p><strong>Kotlin Issue:</strong> <a href=\"https://youtrack.jetbrains.net/issue/KT-24591\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.net/issue/KT-24591</a></p>\n"}, {"tags": ["android", "kotlin", "pickerview"], "comments": [{"owner": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1527088066, "post_id": 50491638, "comment_id": 87996490, "body": "SO is for asking question, not &quot;teaching you with source code&quot; -- which I assume means that you&#39;re asking for the solution"}, {"owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "reply_to_user": {"reputation": 11828, "user_id": 4420967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6pYX.png?s=128&g=1", "display_name": "James Z", "link": "https://stackoverflow.com/users/4420967/james-z"}, "edited": false, "score": 0, "creation_date": 1527088162, "post_id": 50491638, "comment_id": 87996559, "body": "@JamesZ yes, thank you! I will update the question."}, {"owner": {"reputation": 3623, "user_id": 491557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c20e970d3e909fa67a7809965c4936?s=128&d=identicon&r=PG", "display_name": "Spangen", "link": "https://stackoverflow.com/users/491557/spangen"}, "edited": false, "score": 2, "creation_date": 1527089378, "post_id": 50491638, "comment_id": 87997347, "body": "Welcome to Stack Overflow. Please show your latest non-working attempt at solving this problem. It is usually more instructive to see fixes to your code than to read someone else&#39;s solution. See <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}], "answers": [{"comments": [{"owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "edited": false, "score": 0, "creation_date": 1527092375, "post_id": 50492798, "comment_id": 87999168, "body": "I would like to make a pickerview for country and city. Can you show me how to do it?"}], "tags": [], "owner": {"reputation": 10242, "user_id": 908821, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2c4a1ce95e4e53e7f4a556810232e0e3?s=128&d=identicon&r=PG", "display_name": "Angel Koh", "link": "https://stackoverflow.com/users/908821/angel-koh"}, "is_accepted": false, "score": 0, "last_activity_date": 1527091012, "creation_date": 1527091012, "answer_id": 50492798, "question_id": 50491638, "link": "https://stackoverflow.com/questions/50491638/kotlin-android-pickerview/50492798#50492798", "title": "kotlin android pickerView", "body": "<p>java </p>\n\n<pre><code>TimePickerView pvTime = new TimePickerBuilder( this, new OnTimeSelectListener() {\n    @Override\n   public void onTimeSelect(Date date, View v) {\n       Toast.makeText(MainActivity.this, getTime(date), Toast.LENGTH_SHORT).show();\n   } }).build();\n</code></pre>\n\n<p>kotlin</p>\n\n<pre><code> val pvTime = TimePickerBuilder( this, {  date, v  -&gt;\n       Toast.makeText(MainActivity.this, getTime(date), Toast.LENGTH_SHORT).show() \n   }  ).build() \n</code></pre>\n\n<p>you can first code in java, then use \"Code> convert to Kotlin\" in the android studio, so that you can compare between the two.</p>\n"}], "owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 637, "favorite_count": 2, "answer_count": 1, "score": -4, "last_activity_date": 1527091012, "creation_date": 1527087544, "last_edit_date": 1527088243, "question_id": 50491638, "link": "https://stackoverflow.com/questions/50491638/kotlin-android-pickerview", "title": "kotlin android pickerView", "body": "<p>I am a beginner of Kotlin in Android and would like to create an pickerViewer (as below image) in Android Kotlin. \n<a href=\"https://i.stack.imgur.com/C5x7d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C5x7d.png\" alt=\"enter image description here\"></a></p>\n\n<p>I found <a href=\"https://github.com/Bigkoo/Android-PickerView\" rel=\"nofollow noreferrer\">https://github.com/Bigkoo/Android-PickerView</a> on the web, but I don't know how to use it because the code is Java.\nI am asking for the solution with source code. Please kindly help.</p>\n"}, {"tags": ["kotlin", "junit5"], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 14, "last_activity_date": 1527089769, "creation_date": 1527089769, "answer_id": 50492381, "question_id": 50491377, "link": "https://stackoverflow.com/questions/50491377/kotlin-junit-5-assertall-usage/50492381#50492381", "title": "kotlin + junit 5 - assertAll usage", "body": "<p>Use the Kotlin function <code>assertAll()</code> and not the static function <code>Assertions.assertAll()</code> and you will be happy.  Change your import from:</p>\n\n\n\n<pre><code>import org.junit.jupiter.api.Assertions.assertAll\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>import org.junit.jupiter.api.assertAll\n</code></pre>\n\n<p>And now this code will work:</p>\n\n<pre><code>assertAll(\"person\",\n    { assertEquals(\"John\", person.firstName) },\n    { assertEquals(\"Doe\", person.lastName) }\n)\n</code></pre>\n\n<p>You would be interested to know that JUnit 5 includes Kotlin helpers within its main source code, directly from the JUnit team!</p>\n\n<p>If you really, really, really want to use the straight Java version, you need to type your Lambda:</p>\n\n<pre><code>assertAll(\"person\",\n    Executable { assertEquals(\"John\", person.firstName) },\n    Executable { assertEquals(\"Doe\", person.lastName) }\n)\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 2105282, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/210c3e270c914a3c55e8cab95e0b626d?s=128&d=identicon&r=PG", "display_name": "user2105282", "link": "https://stackoverflow.com/users/2105282/user2105282"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2422, "favorite_count": 1, "accepted_answer_id": 50492381, "answer_count": 1, "score": 4, "last_activity_date": 1527089769, "creation_date": 1527086810, "question_id": 50491377, "link": "https://stackoverflow.com/questions/50491377/kotlin-junit-5-assertall-usage", "title": "kotlin + junit 5 - assertAll usage", "body": "<p>I use next version of junit 5</p>\n\n<pre><code>    &lt;junit.jupiter.version&gt;5.2.0&lt;/junit.jupiter.version&gt;\n    &lt;junit.platform.version&gt;1.2.0&lt;/junit.platform.version&gt;\n    &lt;junit.vintage.version&gt;5.2.0&lt;/junit.vintage.version&gt;\n</code></pre>\n\n<p>Kotlin version is </p>\n\n<pre><code>    &lt;kotlin.version&gt;1.2.31&lt;/kotlin.version&gt;\n</code></pre>\n\n<p>I try to use new assertion functionality from junit 5 with kotlin like</p>\n\n<pre><code>assertAll(\"person\",\n    { assertEquals(\"John\", person.firstName) },\n    { assertEquals(\"Doe\", person.lastName) }\n)\n</code></pre>\n\n<p>but code analyzer says that no suitable version of the method is found.</p>\n\n<pre><code>Error:(28, 9) Kotlin: None of the following functions can be called with the arguments supplied: \n    public fun assertAll(vararg executables: () -&gt; Unit): Unit defined in org.junit.jupiter.api\n    public fun assertAll(heading: String?, vararg executables: () -&gt; Unit): Unit defined in org.junit.jupiter.api\n</code></pre>\n\n<p>if I write the code like this it works fine. What is the trick?</p>\n\n<pre><code>assertAll(\"person\",\n    Executable { assertEquals(\"John\", person.firstName) },\n    Executable { assertEquals(\"Doe\", person.lastName) }\n)\n</code></pre>\n"}, {"tags": ["android", "arraylist", "kotlin", "adapter", "startactivityforresult"], "comments": [{"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1527166043, "post_id": 50491268, "comment_id": 88031704, "body": "I strongly recommend to rewrite your code and use an Activity to feed (call) your RecyclerView Adapter while using a DialogFragment to handle adding items."}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 8898641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c9285c2f5b467146006ca937a66043?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman", "link": "https://stackoverflow.com/users/8898641/abdulrahman"}, "edited": false, "score": 0, "creation_date": 1527089674, "post_id": 50491708, "comment_id": 87997554, "body": "But in the end of the form I did this:   CreateNewShipmentActivity.mainShipment.shipmentObj.items?.ad&zwnj;&#8203;d(item)                so item shouldn&#39;t be empty and it should show the data in the list."}, {"owner": {"reputation": 121, "user_id": 2735518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b92462bc225936f4404f1d0ea95038e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Altieri", "link": "https://stackoverflow.com/users/2735518/antonio-altieri"}, "reply_to_user": {"reputation": 251, "user_id": 8898641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c9285c2f5b467146006ca937a66043?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman", "link": "https://stackoverflow.com/users/8898641/abdulrahman"}, "edited": false, "score": 0, "creation_date": 1527089909, "post_id": 50491708, "comment_id": 87997711, "body": "you can&#39;t really do something like this in android. items is probably null when you call this line. I suggest you to use the debugger to see what the problem is."}, {"owner": {"reputation": 121, "user_id": 2735518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b92462bc225936f4404f1d0ea95038e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Altieri", "link": "https://stackoverflow.com/users/2735518/antonio-altieri"}, "reply_to_user": {"reputation": 251, "user_id": 8898641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c9285c2f5b467146006ca937a66043?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman", "link": "https://stackoverflow.com/users/8898641/abdulrahman"}, "edited": false, "score": 0, "creation_date": 1527090049, "post_id": 50491708, "comment_id": 87997797, "body": "And also, if you insert the item correctly, you still reassign an empty arraylist to the adapter. Using a debugger is problably the best way to catch the proble yourself"}], "tags": [], "owner": {"reputation": 121, "user_id": 2735518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b92462bc225936f4404f1d0ea95038e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Altieri", "link": "https://stackoverflow.com/users/2735518/antonio-altieri"}, "is_accepted": false, "score": 0, "last_activity_date": 1527090866, "last_edit_date": 1527090866, "creation_date": 1527087749, "answer_id": 50491708, "question_id": 50491268, "link": "https://stackoverflow.com/questions/50491268/android-add-a-new-item-to-a-list-and-display-it-via-recyclerview-adapter-using/50491708#50491708", "title": "Android: add a new item to a list and display it via RecyclerView adapter using Kotlin", "body": "<p>In the onActivityResult you can see the error in your code\nYou do something like this</p>\n\n<pre><code>val items = ArrayList&lt;ItemsItem&gt;()\nadapter = ShipmentItemAdapter(context, items)\n</code></pre>\n\n<p>You assign to the adapter, an empty list of items. And if i'm not wrong, you don't pass the item that you want to send either.</p>\n\n<pre><code> if (errors.isEmpty()) {\n        val intent = Intent()\n        setResult(Activity.RESULT_OK, intent)\n        finish()\n }\n</code></pre>\n\n<p>You finish the activity without passing any item as a result. The previous activity doesn't receive anything. I can't execute you code because I don't have all the elements to execute it. </p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10486959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cGL5vgl3UsQ/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUdfxHxIXkzlcz5sZbsCttCwWGhMA/mo/photo.jpg?sz=128", "display_name": "Gabriel Torres", "link": "https://stackoverflow.com/users/10486959/gabriel-torres"}, "is_accepted": false, "score": 3, "last_activity_date": 1586402480, "creation_date": 1586402480, "answer_id": 61113430, "question_id": 50491268, "link": "https://stackoverflow.com/questions/50491268/android-add-a-new-item-to-a-list-and-display-it-via-recyclerview-adapter-using/61113430#61113430", "title": "Android: add a new item to a list and display it via RecyclerView adapter using Kotlin", "body": "<p>You need to add first in your adapter one function for adding new items to Array, in your case is \"items: List\":</p>\n\n<p>First step:</p>\n\n<ul>\n<li>In your adapter ShipmentItemAdapter add the next fun</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>fun addNewItem(itemsNew: List&lt;ItemsItem&gt;){\r\n      items.clear() // -&gt;&gt; optional if you need have clear of object \r\n      items.addAll(itemsNew)       \r\n      notifyDataSetChanged()\r\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>then, in your fragment in onActivityResult when you receive the Activity.RESULT_OK you might add the new item</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>adapter.addNewItem(itemsNew)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 251, "user_id": 8898641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c9285c2f5b467146006ca937a66043?s=128&d=identicon&r=PG&f=1", "display_name": "Abdulrahman", "link": "https://stackoverflow.com/users/8898641/abdulrahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3538, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1586402480, "creation_date": 1527086463, "last_edit_date": 1527162723, "question_id": 50491268, "link": "https://stackoverflow.com/questions/50491268/android-add-a-new-item-to-a-list-and-display-it-via-recyclerview-adapter-using", "title": "Android: add a new item to a list and display it via RecyclerView adapter using Kotlin", "body": "<p>I have a fragment that has a RecyclerView. When the user clicks a button (ADD NEW ITEM) in the fragment, the app takes the user (via intent) to a form to fill-in some data.</p>\n\n<p>When I click on (ADD ITEM), it should add the data to the array list and finish that screen. After going back to the fragment, this data should be added to the RecyclerView using the adapter.</p>\n\n<p>This is my code:</p>\n\n<p>Here is the fragment:</p>\n\n<pre><code>private val REQUEST_CODE = 2\n\ninternal lateinit var adapter: ShipmentItemAdapter\n\noverride fun onCreateView(inflater: LayoutInflater?, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n\n    return inflater!!.inflate(R.layout.fragment_step_three_shipment, container, false)\n}\n\noverride fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    btnAddNewShipmentStep3.setOnClickListener {\n        val intent = Intent(context, AddItemActivity::class.java)\n        startActivityForResult(intent, REQUEST_CODE)\n    }\n}\n\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    val items = ArrayList&lt;ItemsItem&gt;()\n\n    if (requestCode == REQUEST_CODE) {\n\n        adapter = ShipmentItemAdapter(context, items)\n\n        if (resultCode == Activity.RESULT_OK) {\n            itemsShipments.visibility = View.VISIBLE\n            itemsShipments.layoutManager = LinearLayoutManager(context)\n            itemsShipments.setHasFixedSize(true)\n            itemsShipments.adapter = adapter\n\n        } else if (resultCode == Activity.RESULT_CANCELED) {\n            itemsShipments.visibility = View.GONE\n        }\n    }\n}\n</code></pre>\n\n<p>And here is the activity:</p>\n\n<pre><code>class AddItemActivity : AppCompatActivity() {\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_add_item_form)\n\n    linPackageAddShipment.setOnClickListener {\n        edtPackageAddShipment.requestFocus()\n    }\n\n    linPiecesAddShipment.setOnClickListener {\n        edtPiecesAddShipment.requestFocus()\n    }\n\n    linWeightAddShipment.setOnClickListener {\n        edtWeightAddShipment.requestFocus()\n    }\n\n    linDescriptionAddShipment.setOnClickListener {\n        edtDescriptionAddShipment.requestFocus()\n    }\n\n\n    btnAddItemAddShipment.setOnClickListener {\n        val errors = collectData()\n\n        collectData()\n\n        if (errors.isEmpty()) {\n\n            val intent = Intent()\n            setResult(Activity.RESULT_OK, intent)\n            finish()\n\n        } else {\n            val errorBody = errors.map { getString(it) }.joinToString(\"\\n\") { it }\n            MaterialDialog.Builder(this)\n                    .title(\"Oops\")\n                    .content(errorBody)\n                    .positiveText(R.string.ok)\n                    .positiveColor(ContextCompat.getColor(this, R.color.colorPrimary))\n                    .onAny({ dialog, _ -&gt; dialog.dismiss() })\n                    .show()\n        }\n    }\n  }\n\n  private fun collectData(): ArrayList&lt;Int&gt; {\n    val errors = ArrayList&lt;Int&gt;()\n    val item = ItemsItem()\n\n    if (edtPackageAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.packages_must_not_be_empty)\n\n    } else {\n        item.numberOfPackages = edtPackageAddShipment.text.toString().toInt()\n    }\n\n    if (edtPiecesAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.pieces_must_not_be_empty)\n\n    } else {\n        item.numberOfPieces = edtPiecesAddShipment.text.toString()\n    }\n\n    if (edtWeightAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.weight_must_not_be_empty)\n\n    } else {\n        item.weightUnit = edtWeightAddShipment.text.toString().toInt()\n    }\n\n    if (edtHeightAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.height_must_not_be_empty)\n\n    } else {\n        item.height = edtHeightAddShipment.text.toString()\n    }\n\n    if (edtWidthAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.width_must_not_be_empty)\n\n    } else {\n        item.width = edtWidthAddShipment.text.toString()\n    }\n    if (edtLengthAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.length_must_not_be_empty)\n\n    } else {\n        item.length = edtLengthAddShipment.text.toString()\n    }\n\n    if (edtDescriptionAddShipment.text.toString().isEmpty()) {\n        errors.add(R.string.description_must_not_be_empty)\n\n    } else {\n        item.description = edtDescriptionAddShipment.text.toString()\n    }\n\n    CreateNewShipmentActivity.mainShipment.shipmentObj.items?.add(item)\n\n    return errors\n  }\n\n  override fun onBackPressed() {\n    setResult(Activity.RESULT_CANCELED)\n    super.onBackPressed()\n  }\n}\n</code></pre>\n\n<p>Here is the adapter:</p>\n\n<pre><code>class ShipmentItemAdapter internal constructor(private val context: Context, private val items: List&lt;ItemsItem&gt;) : RecyclerView.Adapter&lt;ShipmentItemAdapter.MyViewHolder&gt;() {\n\n  private val inflater: LayoutInflater = LayoutInflater.from(context)\n\n\n  override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder {\n    val view = inflater.inflate(R.layout.item_shipment_package, parent, false)\n\n    return MyViewHolder(view).listen { pos, type -&gt;\n        val item = items[pos]\n        val intent = Intent(context, AddItemActivity::class.java)\n        startActivity(context, intent, null)\n    }\n  }\n\n\n  override fun onBindViewHolder(holder: MyViewHolder, position: Int) {\n    holder.namePackageShipmentPackage.text = items[position].description\n    holder.quantityPackageShipmentPackage.text = items[position].description\n    holder.dimensionPackageHeightShipmentPackage.text = items[position].description\n    holder.dimensionPackageWidthShipmentPackage.text = items[position].description\n    holder.dimensionPackageLengthShipmentPackage.text = items[position].description\n\n  }\n\n  override fun getItemCount(): Int {\n    return items.size\n  }\n\n  inner class MyViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n    var namePackageShipmentPackage: AppCompatTextView = itemView.findViewById(R.id.namePackageShipmentPackage)\n    var quantityPackageShipmentPackage: AppCompatTextView = itemView.findViewById(R.id.quantityPackageShipmentPackage)\n    var dimensionPackageHeightShipmentPackage: AppCompatTextView = itemView.findViewById(R.id.dimensionPackageHeightShipmentPackage)\n    var dimensionPackageWidthShipmentPackage: AppCompatTextView = itemView.findViewById(R.id.dimensionPackageWidthShipmentPackage)\n    var dimensionPackageLengthShipmentPackage: AppCompatTextView = itemView.findViewById(R.id.dimensionPackageLengthShipmentPackage)\n\n\n  }\n\n  private fun &lt;T : RecyclerView.ViewHolder&gt; T.listen(event: (position: Int, type: Int) -&gt; Unit): T {\n    itemView.setOnClickListener {\n        event.invoke(adapterPosition, itemViewType)\n    }\n    return this\n  }\n</code></pre>\n\n<p>These are the object model:</p>\n\n<pre><code>class ShipmentObj {\n    var items: ArrayList&lt;ItemsItem?&gt;? = null\n}\n\n\ndata class ItemsItem(\n    var numberOfPieces: String? = null,\n    var length: String? = null,\n    var description: String? = null,\n    var numberOfPackages: Int? = null,\n    var number: Int? = null,\n    var width: String? = null,\n    var height: String? = null,\n    var weightUnit: Int? = null\n)\n</code></pre>\n\n<p>When I try to add new item nothing is showing in the fragment!\nI don't now where is the mistake?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["android", "android-fragments", "button", "kotlin"], "comments": [{"owner": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1527155163, "post_id": 50491258, "comment_id": 88024208, "body": "What is your crash log? Can you include it in your question?"}, {"owner": {"reputation": 11, "user_id": 9806366, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jonathan Oden", "link": "https://stackoverflow.com/users/9806366/jonathan-oden"}, "reply_to_user": {"reputation": 4677, "user_id": 3673259, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/DPHO1.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3673259/joshua"}, "edited": false, "score": 0, "creation_date": 1527232924, "post_id": 50491258, "comment_id": 88059119, "body": "Hi Joshua, I added the logcat and I think now I understand why it&#39;s wrong to put the &#39;button.isEnable=false/true&#39; into fragment onPause/onResume. It&#39;s because Buttons belong to the main activity so I need to do it otherwise: with a callback or something like that."}], "owner": {"reputation": 11, "user_id": 9806366, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jonathan Oden", "link": "https://stackoverflow.com/users/9806366/jonathan-oden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527232670, "creation_date": 1527086435, "last_edit_date": 1527232670, "question_id": 50491258, "link": "https://stackoverflow.com/questions/50491258/button-set-enable-when-specific-fragment-is-display-kotlin", "title": "Button set enable when specific fragment is display (Kotlin)", "body": "<p>I am new to android an I am currently working on an Activity that display fragments dynamically into a FrameLayout (see code bellow).\nI would like to enable a Button (contain in MainActivity) when a specific fragment is displayed.</p>\n\n<p>I found that it could be great to do it simply inside the fragment lifecycle onPause/onResume but it did not worked (app crash).\nTHisis the logcat:</p>\n\n<pre><code>05-25 09:15:27.315 4964-4964/com.example.j1oden.exkotlin E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.j1oden.exkotlin, PID: 4964\njava.lang.IllegalStateException: btnPrev must not be null\n</code></pre>\n\n<p>Now I am trying to use \"fragmentManager.findFragmentByTag\" but its always return true has if my fragment is always loaded (I miss something here).</p>\n\n<p>Here you can see how I manage to load fragments into my FrameLayout:</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    // Init Buttons OnClickListener\n    btnFrag.setOnClickListener { onClick(btnFrag) }\n    btnPrev.setOnClickListener { onClick(btnPrev) }\n    btnNext.setOnClickListener { onClick(btnNext) }\n    btnWeb.setOnClickListener { onClick(btnWeb) }\n\n    Log.d(\"oncreate\", \"MA_oncreate\")\n    }\n\n@Suppress(\"CAST_NEVER_SUCCEEDS\")\n// OnClick Buttons Fragments Redirection Links\nfun onClick(v: View?) {\n    when (v?.id) {\n        R.id.btnFrag -&gt; {if (isFrag1Loaded) showFrag2() else showFrag1()}\n        R.id.btnPrev -&gt; {if (FragW.webview.canGoBack()) webview.goBack()\n        else Toast.makeText(baseContext, \"No History Available\", Toast.LENGTH_SHORT).show()}\n        R.id.btnNext -&gt; {if (FragW.webview.canGoForward()) webview.goForward()\n        else Toast.makeText(baseContext, \"No History Available\", Toast.LENGTH_SHORT).show()}\n        R.id.btnWeb -&gt; {  showFragW() }\n        }\n    //isBtnEnabled = fragmentManager.findFragmentByTag(\"tagFragW\") != null &amp;&amp; fragmentManager.findFragmentByTag(\"tagFragW\").isVisible\n}\n\n// Show Fragment 1 function\nprivate fun showFrag1() {\n    val transaction = manager.beginTransaction()\n    transaction.replace(R.id.frag_container, Frag1(), \"tagFrag1\")\n    transaction.commit()\n    transaction.addToBackStack(\"tagFrag1\")\n    isFrag1Loaded = true\n}\n\n// Show Fragment2 function\nprivate fun showFrag2() {\n    val transaction = manager.beginTransaction()\n    transaction.replace(R.id.frag_container, Frag2(), \"tagFrag2\")\n    transaction.commit()\n    transaction.addToBackStack(\"tagFrag2\")\n    isFrag1Loaded = false\n}\n\n// Show FragmentW function\nprivate fun showFragW() {\n    val transaction = manager.beginTransaction()\n    transaction.replace(R.id.frag_container, FragW(), \"tagFragW\")\n    transaction.addToBackStack(null)\n    transaction.addToBackStack(\"tagFragW\")\n    transaction.commit()\n}\n\n// WebView Custom Class\nopen class mWebViewClient : WebViewClient() {\n    override fun shouldOverrideUrlLoading(view: WebView?, request: WebResourceRequest?): Boolean {\n        view?.loadUrl(request?.url.toString())\n        return true\n    }\n\n    override fun shouldOverrideUrlLoading(view: WebView?, url: String?): Boolean {\n        view?.loadUrl(url)\n        return true\n    }\n}\n</code></pre>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "comments": [{"owner": {"reputation": 4295, "user_id": 3086818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zafUI.jpg?s=128&g=1", "display_name": "Gennadii Saprykin", "link": "https://stackoverflow.com/users/3086818/gennadii-saprykin"}, "edited": false, "score": 0, "creation_date": 1527087259, "post_id": 50490737, "comment_id": 87995925, "body": "Although I don&#39;t understand the requirements, the width is 0 because the layout pass did not finish in onBindViewHolder. You can use this for detecting that event: <a href=\"https://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/view/&hellip;</a>. Once this finishes it should return you non-zero width."}, {"owner": {"reputation": 4295, "user_id": 3086818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zafUI.jpg?s=128&g=1", "display_name": "Gennadii Saprykin", "link": "https://stackoverflow.com/users/3086818/gennadii-saprykin"}, "edited": false, "score": 0, "creation_date": 1527087265, "post_id": 50490737, "comment_id": 87995932, "body": "But I still don&#39;t understand why you need this.. E.g if you have 2 buttons, one with a very long text and one with a very short one which DO fit the screen, according to your logic you will set their size to 50% of the screen.. The long button text might be cut-off in this case. Is this expected?"}], "answers": [{"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": true, "score": 5, "last_activity_date": 1527100193, "creation_date": 1527100193, "answer_id": 50495163, "question_id": 50490737, "link": "https://stackoverflow.com/questions/50490737/how-to-find-width-of-item-in-recyclerview/50495163#50495163", "title": "How to find width of item in recyclerview?", "body": "<p>Android returns width of the widget only after it is measured and it happens later than <code>onBindViewHolder</code> is called.</p>\n\n<p>You can delay the request:</p>\n\n<pre><code>holder.button.post {\n    Log.d(\"VED-APP\",\"New Button Width: \" + holder.button.width.toString()) \n};\n</code></pre>\n"}], "owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1420, "favorite_count": 1, "accepted_answer_id": 50495163, "answer_count": 1, "score": 4, "last_activity_date": 1527100193, "creation_date": 1527085034, "question_id": 50490737, "link": "https://stackoverflow.com/questions/50490737/how-to-find-width-of-item-in-recyclerview", "title": "How to find width of item in recyclerview?", "body": "<p>I have a <code>recyclerview</code> which is just a horizontal list of buttons. I am trying to create the following behavior:</p>\n\n<p>If the total width of all of the buttons combined is less than the total width of the screen, set the width of each button to (screenWidth/number of buttons). </p>\n\n<p>I am testing some basic code to get/set button widths like so in my <code>adapter</code> class: </p>\n\n<pre><code> override fun onBindViewHolder(holder: TabViewHolder, position: Int) {\n\n        Log.d(\"TEST-APP\",\"Button Width: \" + holder.button.width.toString())\n\n        holder.button.width = 1080\n\n        Log.d(\"VED-APP\",\"New Button Width: \" + holder.button.width.toString())\n\n        holder.button.text = items[position].first\n        holder.button.setOnClickListener {\n            (context as MainActivity).updateCurrentImageLayout(items[position].second)\n        }\n    }\n</code></pre>\n\n<p>The odd thing is, while this code does actually change the width of the button to 1080 the outputs of the two <code>Log</code> functions before/after setting the button width are both 0. </p>\n\n<p>How do I get the actual width of the button? </p>\n\n<p>Here is my layout which defines one column in my <code>recyclerview</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;Button\n        android:id=\"@+id/tabButton\"\n        android:layout_width=\"match_parent\"\n        android:minWidth=\"120dp\"\n        android:layout_height=\"match_parent\"\n        android:text=\"Unset-Button-Text\"/&gt;\n\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin"], "comments": [{"owner": {"reputation": 4408, "user_id": 4916627, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ainvx.jpg?s=128&g=1", "display_name": "Andr&#233; Kool", "link": "https://stackoverflow.com/users/4916627/andr%c3%a9-kool"}, "edited": false, "score": 0, "creation_date": 1527080462, "post_id": 50489085, "comment_id": 87991043, "body": "You could change your datastructure to fit your needs."}, {"owner": {"reputation": 1049, "user_id": 4151080, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-GtVcat7nYvs/AAAAAAAAAAI/AAAAAAAAABU/0a5yjXMEkWY/photo.jpg?sz=128", "display_name": "Jainam Jhaveri", "link": "https://stackoverflow.com/users/4151080/jainam-jhaveri"}, "edited": false, "score": 0, "creation_date": 1527080696, "post_id": 50489085, "comment_id": 87991185, "body": "<a href=\"https://www.youtube.com/watch?v=Idu9EJPSxiY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Idu9EJPSxiY</a> check out this youtube video, what I think from your description is that you want to perform join"}, {"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "edited": false, "score": 0, "creation_date": 1527081357, "post_id": 50489085, "comment_id": 87991665, "body": "Have a look at this answer: <a href=\"https://stackoverflow.com/questions/16638660/firebase-data-structure-and-url/16651115#16651115\" title=\"firebase data structure and url\">stackoverflow.com/questions/16638660/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1049, "user_id": 4151080, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-GtVcat7nYvs/AAAAAAAAAAI/AAAAAAAAABU/0a5yjXMEkWY/photo.jpg?sz=128", "display_name": "Jainam Jhaveri", "link": "https://stackoverflow.com/users/4151080/jainam-jhaveri"}, "is_accepted": false, "score": 0, "last_activity_date": 1527080813, "creation_date": 1527080813, "answer_id": 50489251, "question_id": 50489085, "link": "https://stackoverflow.com/questions/50489085/is-there-a-way-in-firebase-to-automatically-swap-a-list-of-ids-into-the-object/50489251#50489251", "title": "Is there a way in Firebase to automatically swap a list of id&#39;s into the object", "body": "<p>What I think from your description is that you want to perform a join.</p>\n\n<blockquote>\n  <p>There's no official \"join\" method in the Firebase Database SDK, but\n  you can use multiple listeners to combine data from multiple paths.</p>\n</blockquote>\n\n<p><a href=\"https://www.youtube.com/watch?v=Idu9EJPSxiY\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=Idu9EJPSxiY</a> \ncheck out this youtube video it will help</p>\n"}, {"comments": [{"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "edited": false, "score": 0, "creation_date": 1527082815, "post_id": 50489451, "comment_id": 87992750, "body": "If you think that my answer helped you, please also consider give a vote-up. Thanks!"}, {"owner": {"reputation": 4408, "user_id": 4916627, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ainvx.jpg?s=128&g=1", "display_name": "Andr&#233; Kool", "link": "https://stackoverflow.com/users/4916627/andr%c3%a9-kool"}, "edited": false, "score": 1, "creation_date": 1527083408, "post_id": 50489451, "comment_id": 87993167, "body": "You know the OP only got the privilage to up-vote around the time you posted that comment?"}, {"owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "reply_to_user": {"reputation": 4408, "user_id": 4916627, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ainvx.jpg?s=128&g=1", "display_name": "Andr&#233; Kool", "link": "https://stackoverflow.com/users/4916627/andr%c3%a9-kool"}, "edited": false, "score": 0, "creation_date": 1527084068, "post_id": 50489451, "comment_id": 87993626, "body": "@Andr&#233;Kool No but I&#39;m also voting up. It&#39;s a useful question. Thanks!"}], "tags": [], "owner": {"reputation": 89473, "user_id": 5246885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Bxclj.jpg?s=128&g=1", "display_name": "Alex Mamo", "link": "https://stackoverflow.com/users/5246885/alex-mamo"}, "is_accepted": true, "score": 1, "last_activity_date": 1527081377, "creation_date": 1527081377, "answer_id": 50489451, "question_id": 50489085, "link": "https://stackoverflow.com/questions/50489085/is-there-a-way-in-firebase-to-automatically-swap-a-list-of-ids-into-the-object/50489451#50489451", "title": "Is there a way in Firebase to automatically swap a list of id&#39;s into the object", "body": "<p>No, there is not. There is no way to achieve this. You need to query your data twice, first time to get best friends id's and second to get the actual data of those friends. You cannot get that list in a single step, using a single query..</p>\n"}], "owner": {"reputation": 41, "user_id": 6561524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb742a4096378e95c76101c815a4a18?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias Cochet", "link": "https://stackoverflow.com/users/6561524/mathias-cochet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 50489451, "answer_count": 2, "score": 1, "last_activity_date": 1527081833, "creation_date": 1527080338, "last_edit_date": 1527081833, "question_id": 50489085, "link": "https://stackoverflow.com/questions/50489085/is-there-a-way-in-firebase-to-automatically-swap-a-list-of-ids-into-the-object", "title": "Is there a way in Firebase to automatically swap a list of id&#39;s into the object", "body": "<p>I have a Firebase database with a list of users and a list of best friends,\na user's best friends can be pulled by using it's userid:</p>\n\n<p>users list:</p>\n\n<ul>\n<li>userid\n\n<ul>\n<li>user data</li>\n</ul></li>\n<li>userid\n\n<ul>\n<li>user data</li>\n</ul></li>\n<li>..</li>\n</ul>\n\n<p>best friends list:</p>\n\n<ul>\n<li>userid\n\n<ul>\n<li>userid of friend</li>\n<li>userid of friend</li>\n<li>...</li>\n</ul></li>\n<li>userid\n\n<ul>\n<li>userid of friend</li>\n<li>userid of friend</li>\n<li>...</li>\n<li>...</li>\n<li>...</li>\n</ul></li>\n</ul>\n\n<p>Is there a way using the Firebase api to get the friend's data in a list instead of a list of userid's of your friends when making the call to get your best friends ? Now i have to do 2 steps (get best friends id's -> loop users for friend's data)</p>\n"}, {"tags": ["intellij-idea", "kotlin", "kotlinx.coroutines", "kotlin-js"], "comments": [{"owner": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "edited": false, "score": 1, "creation_date": 1527085282, "post_id": 50488401, "comment_id": 87994446, "body": "Looks like a bug. Try with 2018.2 version from <a href=\"https://www.jetbrains.com/idea/nextversion\" rel=\"nofollow noreferrer\">jetbrains.com/idea/nextversion</a> If error remains, please report at <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a> with sample project to reproduce."}, {"owner": {"reputation": 61, "user_id": 3960197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e048f1c5c9dae3bc981adcc1390874a?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Berghuber", "link": "https://stackoverflow.com/users/3960197/christoph-berghuber"}, "reply_to_user": {"reputation": 9828, "user_id": 2000323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a95484b8877a108fc979ce4ee1c9d8?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/2000323/andrey"}, "edited": false, "score": 0, "creation_date": 1527145085, "post_id": 50488401, "comment_id": 88018042, "body": "Thank you, I tried it ...but same behavior. I will report it to JetBrains."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1527178666, "post_id": 50488401, "comment_id": 88040346, "body": "Could you please share your project? And of course please report an issue."}, {"owner": {"reputation": 6493, "user_id": 1020900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab5f80978d59af0204e0986ca41d2c23?s=128&d=identicon&r=PG", "display_name": "bashor", "link": "https://stackoverflow.com/users/1020900/bashor"}, "edited": false, "score": 0, "creation_date": 1527178873, "post_id": 50488401, "comment_id": 88040457, "body": "Use only &quot;...-core-js&quot; version -- remove 2nd library &quot;...-core&quot;. Don&#39;t use &quot;kotlin-stdlib&quot; for Kotlin/JS, use &quot;kotlin-stdlib-js&quot; instead (it&#39;s part of KotlinJavaScript)"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3960197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e048f1c5c9dae3bc981adcc1390874a?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Berghuber", "link": "https://stackoverflow.com/users/3960197/christoph-berghuber"}, "is_accepted": false, "score": 0, "last_activity_date": 1527232113, "creation_date": 1527232113, "answer_id": 50523384, "question_id": 50488401, "link": "https://stackoverflow.com/questions/50488401/coroutines-working-but-intellij-shows-errors/50523384#50523384", "title": "Coroutines working but IntelliJ shows errors", "body": "<p>Thanks to <strong><em>Alexander Chernikov</em></strong> at <em>youtrack.jetbrains</em> I could resolve my problem.</p>\n\n<p>I cite his explanation:</p>\n\n<blockquote>\n  <p>The issue is that JavaScript libraries should be marked with special attribute to be recognized.\n  When they are imported from <code>pom.xml</code> or <code>build.gradle</code>, this mark is set, so the feature works.\n  In your project they are not marked.</p>\n  \n  <p>At the moment, to correct the libs manually, please open <code>.idea/libraries/org_jetbrains_kotlin_kotlin_stdlib_js_1_2_41.xml</code> and <code>.idea/libraries/org_jetbrains_kotlinx_kotlinx_coroutines_core_js_0_22_5.xml</code>.\n  In both files find <code>type=\"repository\"</code> and replace it with <code>type=\"kotlin.js\"</code>.\n  Make sure IDEA sees the change. (You can exit IDEA, make the change and restart.)</p>\n  \n  <p>Then you can keep only these two libs in dependencies. The editor should work.</p>\n</blockquote>\n\n<p>Here is the issue link:\n<a href=\"https://youtrack.jetbrains.com/issue/KT-24575\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-24575</a></p>\n\n<p>There I have also attached a sample project with the problem.</p>\n"}], "owner": {"reputation": 61, "user_id": 3960197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e048f1c5c9dae3bc981adcc1390874a?s=128&d=identicon&r=PG&f=1", "display_name": "Christoph Berghuber", "link": "https://stackoverflow.com/users/3960197/christoph-berghuber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1451, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527232113, "creation_date": 1527078407, "last_edit_date": 1592644375, "question_id": 50488401, "link": "https://stackoverflow.com/questions/50488401/coroutines-working-but-intellij-shows-errors", "title": "Coroutines working but IntelliJ shows errors", "body": "<p>I am working on a project using <strong>kotlinjs</strong> for <strong>nodejs</strong> and I start to learn <strong>coroutines</strong> and integrate them into my code to say goodbye to the callback hell.</p>\n<p>I managed to get coroutines <strong>working</strong>, my code can be compiled and executed, <strong>everything seems fine</strong>.</p>\n<p>...except: <em><strong>The IDE still shows me errors</strong></em>. It seems to be confused by the additional libraries I added in order to get coroutines running.</p>\n<p>I am currently fiddling around with the library dependencies, sometimes some errors go away, but then some code gets red which was okay before...</p>\n<h1>This is what I see:</h1>\n<h2>Case 1:</h2>\n<p><img src=\"https://i.stack.imgur.com/1a9ae.png\" alt=\"module dependencies in the first case\" />\n<img src=\"https://i.stack.imgur.com/399oC.png\" alt=\"code in the first case\" /></p>\n<blockquote>\n<p>Cannot access class 'kotlinx.coroutines.experimental.CoroutineContext'. Check your module classpath for missing or conflicting dependencies</p>\n</blockquote>\n<h2>Case 2:</h2>\n<p><img src=\"https://i.stack.imgur.com/xFgv0.png\" alt=\"module dependencies in the second case\" />\n<img src=\"https://i.stack.imgur.com/m1PAt.png\" alt=\"code in the second case\" /></p>\n<blockquote>\n<p>Unresolved reference: JsModule</p>\n<p>Modifier 'external' is not applicable to 'class'</p>\n</blockquote>\n<p>You see, <code>launch</code> is recognized when I add the <code>stdlib</code>, but then the IDE complains with the other two errors.</p>\n<p>Again, please note: <strong>In both cases, actual compilation is successful!</strong></p>\n<p>I am using <strong>IntelliJ 2018.1</strong> with <strong>Kotlin Plugin 1.2.41</strong>.</p>\n"}, {"tags": ["gradle", "kotlin", "build.gradle", "junit5"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1527076529, "post_id": 50487697, "comment_id": 87988206, "body": "The task names don&#39;t contain the name of the module they belong to. Using the task&#39;s <code>path</code> instead of <code>name</code> should work."}, {"owner": {"reputation": 607, "user_id": 9695566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1aeb800a2b34c7b57d88bdee1dc827?s=128&d=identicon&r=PG&f=1", "display_name": "dharanikesav", "link": "https://stackoverflow.com/users/9695566/dharanikesav"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1527076923, "post_id": 50487697, "comment_id": 87988514, "body": "modified code is as below. But still gradle configures and executes tasks of data-export-ui-kjs module :                                      tasks {     &quot;test&quot;(Test::class) {         useJUnitPlatform {             excludeTags = setOf(&quot;e2e&quot;, &quot;integration&quot;)         }         gradle.taskGraph.whenReady {             TaskExecutionGraphListener { graph -&gt;                 graph.allTasks.forEach { task -&gt;                     if(task.path.contains(&quot;data-export-ui-kjs&quot;)) {                         task.enabled = false                     }                 }             }         }     }"}], "answers": [{"tags": [], "owner": {"reputation": 607, "user_id": 9695566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1aeb800a2b34c7b57d88bdee1dc827?s=128&d=identicon&r=PG&f=1", "display_name": "dharanikesav", "link": "https://stackoverflow.com/users/9695566/dharanikesav"}, "is_accepted": true, "score": 0, "last_activity_date": 1527164185, "creation_date": 1527164185, "answer_id": 50509227, "question_id": 50487697, "link": "https://stackoverflow.com/questions/50487697/exclude-a-module-or-dir-or-subtask-from-gradle-configuration-and-execution/50509227#50509227", "title": "Exclude a module or dir or subtask from gradle configuration and execution", "body": "<p>Working as expected. Modified the code. Its syntax issue itseems</p>\n"}], "owner": {"reputation": 607, "user_id": 9695566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e1aeb800a2b34c7b57d88bdee1dc827?s=128&d=identicon&r=PG&f=1", "display_name": "dharanikesav", "link": "https://stackoverflow.com/users/9695566/dharanikesav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 50509227, "answer_count": 1, "score": 0, "last_activity_date": 1527164185, "creation_date": 1527076242, "last_edit_date": 1527076412, "question_id": 50487697, "link": "https://stackoverflow.com/questions/50487697/exclude-a-module-or-dir-or-subtask-from-gradle-configuration-and-execution", "title": "Exclude a module or dir or subtask from gradle configuration and execution", "body": "<p>I have a task with name <code>test</code> and code is as below :</p>\n\n<pre><code>tasks {\n    \"test\"(Test::class) {\n        useJUnitPlatform {\n            excludeTags = setOf(\"e2e\", \"integration\")\n        }    \n }\n</code></pre>\n\n<p>When execute this task with gradle command <code>./gradlew test --info</code>, gradle is scanning all the modules of my project and generating a configuration with has some tasks from module named <code>data-export-ui-kjs</code>.</p>\n\n<p>I want gradle to exclude the tasks from <code>data-export-ui-kjs</code> module while configuring &amp; executing <code>test</code> task. I have used below code to achieve this but its not successful    </p>\n\n<pre><code> gradle.taskGraph.whenReady {\n        TaskExecutionGraphListener { graph -&gt;\n                if(it.name.contains(\"data-export-ui-kjs\")) {\n                    it.enabled = false\n                }\n            }    \n     }\n</code></pre>\n\n<p>Kindly help me to get this done. Thanks in advance</p>\n"}, {"tags": ["android", "gradle", "kotlin", "android-ktx"], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 7512448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/OgLAI.png?s=128&g=1", "display_name": "Zonico", "link": "https://stackoverflow.com/users/7512448/zonico"}, "edited": false, "score": 1, "creation_date": 1527084873, "post_id": 50486475, "comment_id": 87994157, "body": "Thank you! I&#39;ve downloaded Android Studio 3.2 and it kinda works.It builds but Android Studio bugs a little. Anyway thank you very much for your anwer, really appreciate your effort :)&#39; Edit: Omg it works, FINALLY. Thank you dude, people like you are the real heroes!"}, {"owner": {"reputation": 6806, "user_id": 8856784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RH0cU.jpg?s=128&g=1", "display_name": "Izabela Orlowska", "link": "https://stackoverflow.com/users/8856784/izabela-orlowska"}, "edited": false, "score": 1, "creation_date": 1527091470, "post_id": 50486475, "comment_id": 87998698, "body": "Another thing is that I think one of the appcompat libraries got released with references to some platform attributes that were only added in API 28 (android P) and when you use them you run into the same error. In both cases @ReneFerrari&#39;s solution works. :)"}], "tags": [], "owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "is_accepted": false, "score": 9, "last_activity_date": 1527085366, "last_edit_date": 1527085366, "creation_date": 1527072602, "answer_id": 50486475, "question_id": 50485863, "link": "https://stackoverflow.com/questions/50485863/gradle-build-fails-after-adding-core-ktx/50486475#50486475", "title": "Gradle build fails after adding core ktx", "body": "<p>You are using 'AndroidX' which is only available if you set your <code>compileSdkVersion 'android-P'</code> and <code>targetSdkVersion 28</code>. Then in AndroidStudio go to <code>Refactor -&gt; Refactor to AndroidX</code> and everything should work fine now :).</p>\n"}], "owner": {"reputation": 160, "user_id": 7512448, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/OgLAI.png?s=128&g=1", "display_name": "Zonico", "link": "https://stackoverflow.com/users/7512448/zonico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1527085366, "creation_date": 1527070954, "last_edit_date": 1527072761, "question_id": 50485863, "link": "https://stackoverflow.com/questions/50485863/gradle-build-fails-after-adding-core-ktx", "title": "Gradle build fails after adding core ktx", "body": "<p>When I add the core-ktx dependency to my app's build.gradle file, my gradle builds fail with the error message <code>AAPT2 error: check logs for details</code>\nIt furthermore tells that there are two attributes missing in <code>values.xml</code>. This file is located under the .gradle folder inside my user directory.<br>\nwhen I add <code>android.enableAAPT2=false</code> to my project properties, the build fails due to that option being deprecated so I want to avoid that.<br>\nThe error descriptions of the two <code>resource not found errors</code> are the following:  </p>\n\n<blockquote>\n  <p>error: resource android:attr/fontVariationSettings not found.\n  Message{kind=ERROR, text=error: resource android:attr/fontVariationSettings not found., sources=[C:\\Users\\Marc.gradle\\caches\\transforms-1\\files-1.1\\appcompat-v7-26.1.0.aar\\b6d4f8d4d33639ae469eaec181e24176\\res\\values\\values.xml], original message=, tool name=Optional.of(AAPT)}</p>\n</blockquote>\n\n<p>When I add different ktx libraries everything is just fine. It builds properly and I can even import androidx.collections! How can I add the core-ktx library without any errors?</p>\n\n<p><a href=\"https://i.stack.imgur.com/givQO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/givQO.png\" alt=\"project\"></a></p>\n"}, {"tags": ["java", "android", "kotlin", "annotations"], "comments": [{"owner": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1527070571, "post_id": 50485659, "comment_id": 87984337, "body": "<a href=\"https://www.jetbrains.com/help/idea/nullable-and-notnull-annotations.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/nullable-and-notnull-annotations.htm&zwnj;&#8203;l</a> and <a href=\"https://developer.android.com/studio/write/annotations\" rel=\"nofollow noreferrer\">developer.android.com/studio/write/annotations</a>"}, {"owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "reply_to_user": {"reputation": 69545, "user_id": 3395198, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/CJtaZ.jpg?s=128&g=1", "display_name": "IntelliJ Amiya", "link": "https://stackoverflow.com/users/3395198/intellij-amiya"}, "edited": false, "score": 0, "creation_date": 1527070926, "post_id": 50485659, "comment_id": 87984547, "body": "From <a href=\"https://jetbrains.com/help/idea/nullable-and-notnull-annotations.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/nullable-and-notnull-annotations.htm&zwnj;&#8203;l</a>: <code>the IDE adds assertions to all methods and parameters annotated with the\t@NotNull annotation</code>. Does that mean the assertions won&#39;t be added if I compile from the command line ?"}], "answers": [{"comments": [{"owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "edited": false, "score": 1, "creation_date": 1527071021, "post_id": 50485836, "comment_id": 87984594, "body": "Damn... Couldn&#39;t they agree on the same one ?"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 2, "creation_date": 1527071336, "post_id": 50485836, "comment_id": 87984806, "body": "Based on <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#nullability-annotations\" rel=\"nofollow noreferrer\">this</a>, Kotlin compiler supports both, so probably it&#39;s worth using the &quot;android flavor&quot; in all cases"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 2, "creation_date": 1527071582, "post_id": 50485836, "comment_id": 87984965, "body": "Just to be more precise, that&#39;s the part of the compiler dealing with nullable/non-nullable annotations: <a href=\"https://github.com/JetBrains/kotlin/blob/master/core/descriptors.jvm/src/org/jetbrains/kotlin/load/java/JvmAnnotationNames.kt\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/blob/master/core/descriptors.jvm&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "edited": false, "score": 0, "creation_date": 1527071818, "post_id": 50485836, "comment_id": 87985110, "body": "That&#39;s cool ! That also mean the <a href=\"https://jetbrains.com/help/idea/nullable-and-notnull-annotations.html\" rel=\"nofollow noreferrer\">doc</a> is a bit misleading when it states that <code>the *IDE* adds assertions to all methods and parameters annotated with the @NotNull annotation</code>. It&#39;s actually the compiler, right ?"}, {"owner": {"reputation": 20237, "user_id": 4390381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLMC7.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4390381/sagar"}, "reply_to_user": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "edited": false, "score": 2, "creation_date": 1527072145, "post_id": 50485836, "comment_id": 87985352, "body": "@mbonnin For Kotlin, yes. For Java , No."}], "tags": [], "owner": {"reputation": 20237, "user_id": 4390381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NLMC7.jpg?s=128&g=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/4390381/sagar"}, "is_accepted": true, "score": 8, "last_activity_date": 1527071636, "last_edit_date": 1527071636, "creation_date": 1527070864, "answer_id": 50485836, "question_id": 50485659, "link": "https://stackoverflow.com/questions/50485659/what-is-the-difference-between-android-nonnull-and-jetbrains-nonnull/50485836#50485836", "title": "What is the difference between Android @NonNull and Jetbrains @NonNull", "body": "<p>Using <code>org.jetbrains.annotations.NonNull</code> IntelliJ IDEA spots that the contract is being violated. Done only if you are using IDE.</p>\n\n<p><strong>Whereas</strong> </p>\n\n<p><code>android.support.annotation.NonNull</code> is taken care by inspection tools like Lint. This is useful if you are running the inspection without using Android Studio or other IDE (e.g. Running through command line or through Jenkins)</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Based on the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#nullability-annotations\" rel=\"noreferrer\">documentation</a> highlighted by <code>@user2340612</code> Kotlin compiler supports both of them. Since its supported at compiler level, it should work from Command-Line too.</p>\n"}], "owner": {"reputation": 6120, "user_id": 752630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/117edb11a37a9ee948002a3f68e54a2e?s=128&d=identicon&r=PG&f=1", "display_name": "mbonnin", "link": "https://stackoverflow.com/users/752630/mbonnin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2062, "favorite_count": 1, "accepted_answer_id": 50485836, "answer_count": 1, "score": 4, "last_activity_date": 1527071636, "creation_date": 1527070398, "last_edit_date": 1527071148, "question_id": 50485659, "link": "https://stackoverflow.com/questions/50485659/what-is-the-difference-between-android-nonnull-and-jetbrains-nonnull", "title": "What is the difference between Android @NonNull and Jetbrains @NonNull", "body": "<p>What is the difference between these two annotations ?</p>\n\n<ul>\n<li><strong><code>org.jetbrains.annotations.NonNull</code></strong></li>\n<li><strong><code>android.support.annotation.NonNull</code></strong> </li>\n</ul>\n\n<p>Is <s>the kotlin compiler</s> IntelliJ going to honor <strong><code>android.support.annotation.NonNull</code></strong> and add assertions to check if I pass a null parameter to the corresponding java function ?</p>\n\n<p>Is the Android lint going to honor <strong><code>org.jetbrains.annotations.NonNull</code></strong> and show me a warning if I check a variable that's already NonNull ?</p>\n\n<p>When should I use one over the other ?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 2682, "user_id": 1514861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ctppj.jpg?s=128&g=1", "display_name": "Ivo Beckers", "link": "https://stackoverflow.com/users/1514861/ivo-beckers"}, "edited": false, "score": 0, "creation_date": 1527073559, "post_id": 50485573, "comment_id": 87986287, "body": "I really should only keep the optional one. And in the places you are sure it is not null just call it followed by the not-null assertion operator ( !! ). No need to null check it then."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 5517, "user_id": 905422, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da2e78c90eaeaf04236488dc55c58810?s=128&d=identicon&r=PG", "display_name": "Mathijs Segers", "link": "https://stackoverflow.com/users/905422/mathijs-segers"}, "edited": false, "score": 0, "creation_date": 1527088548, "post_id": 50485573, "comment_id": 87996799, "body": "@MathijsSegers is incorrect in his comment."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2682, "user_id": 1514861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ctppj.jpg?s=128&g=1", "display_name": "Ivo Beckers", "link": "https://stackoverflow.com/users/1514861/ivo-beckers"}, "edited": false, "score": 1, "creation_date": 1527088580, "post_id": 50485573, "comment_id": 87996816, "body": "@IvoBeckers that does not help him solve his issue and keep his code with the same functionality.  He can actually do what he is trying to do given the correct annotation on one of the methods."}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1527090575, "post_id": 50485573, "comment_id": 87998162, "body": "IMHO, having the nullable function does not make sense, in a readable way it can be confusing and can imagine that in null case the function has a default value. You can extract the condition <code>if null then null</code> and put it outside, your API will be cleaner"}], "answers": [{"comments": [{"owner": {"reputation": 2682, "user_id": 1514861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ctppj.jpg?s=128&g=1", "display_name": "Ivo Beckers", "link": "https://stackoverflow.com/users/1514861/ivo-beckers"}, "edited": false, "score": 0, "creation_date": 1527089656, "post_id": 50491909, "comment_id": 87997539, "body": "cool, I learned something new. I was just wondering. Does this mean that the second method only gets called when it&#39;s null? and the the first method always gets called when it&#39;s not null?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2682, "user_id": 1514861, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ctppj.jpg?s=128&g=1", "display_name": "Ivo Beckers", "link": "https://stackoverflow.com/users/1514861/ivo-beckers"}, "edited": false, "score": 0, "creation_date": 1527089821, "post_id": 50491909, "comment_id": 87997660, "body": "Second function is called for any nullable string, the other called for any guaranteed not null string.  The value in the variable is not considered."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 6, "last_activity_date": 1527089051, "last_edit_date": 1527089051, "creation_date": 1527088335, "answer_id": 50491909, "question_id": 50485573, "link": "https://stackoverflow.com/questions/50485573/how-to-overload-functions-with-same-param-types-but-one-is-nullable/50491909#50491909", "title": "How to overload functions with same param types but one is nullable", "body": "<p>There is a simple solution that allows you to do this without changing your methods or the name you want to call them from Kotlin. </p>\n\n<p>For Kotlin the distinction between the two methods is clear, but for the JVM it is not.  Therefore, just tell Kotlin that you want a different internal JVM name for one of the methods which will not impact Kotlin code at all.  Only Java code would see the alternative name.  For example:</p>\n\n<pre><code>fun Calendar.fromIsoString(date: String): Calendar = this.apply {\n    // ... your code without change\n}\n\n@JvmName(\"fromIsoStringNullable\") // &lt;-- this solves your problem without changing the name in Kotlin\nfun Calendar.fromIsoString(date: String?): Calendar? {\n    // ... your code without change\n}\n</code></pre>\n\n<p>voil\u00e0!  no more error!  You can call either version from Kotlin using the same name <code>someCalendar.fromIsoString(...)</code></p>\n\n<p>Other answers and comments suggesting the nullability is syntactical sugar are far from correct.  These types are written into the bytecode as extra metadata that only Kotlin will see and enforce.  But on top of that, it also adds a <code>@Nullable</code> annotation to the parameter.  In fact, all Kotlin generated function parameters have <code>@NotNull</code> and <code>@Nullable</code> annotations in the bytecode for other languages or analyzers to see and enforce if they care enough to do so.</p>\n"}], "owner": {"reputation": 1430, "user_id": 4035036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OtQfl.jpg?s=128&g=1", "display_name": "Mosius", "link": "https://stackoverflow.com/users/4035036/mosius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 50491909, "answer_count": 1, "score": 3, "last_activity_date": 1564807513, "creation_date": 1527070206, "last_edit_date": 1564807513, "question_id": 50485573, "link": "https://stackoverflow.com/questions/50485573/how-to-overload-functions-with-same-param-types-but-one-is-nullable", "title": "How to overload functions with same param types but one is nullable", "body": "<p>I'm trying to add two extension function to <code>Calendar</code> Class in Android to convert the specific date-time pattern to Calendar and vise versa</p>\n\n<pre><code>fun Calendar.fromIsoString(date: String): Calendar = this.apply {\n    time = SimpleDateFormat(SERVER_DATE_PATTERN, Locale.US).parse(date)\n}\n\nfun Calendar.fromIsoString(date: String?): Calendar? {\n    if (date == null) return null\n    time = SimpleDateFormat(SERVER_DATE_PATTERN, Locale.US).parse(date)\n    return this\n}\n</code></pre>\n\n<p>But it gives me the following Error:</p>\n\n<blockquote>\n  <p>Platform declaration clash: The following declarations have the same JVM signature (fromIsoString(Ljava/util/Calendar;Ljava/lang/String;)Ljava/util/Calendar;)</p>\n</blockquote>\n\n<p>Is it possible to have these two functions besides each other? how?</p>\n\n<p>Note:\nI somehow handled the problem by adding a <code>Unit</code> optional parameter to one of the functions:</p>\n\n<pre><code>fun Calendar.fromIsoString(date: String?, a: Unit = Unit): Calendar? {\nif (date == null) return null\n    time = SimpleDateFormat(SERVER_DATE_PATTERN, Locale.US).parse(date)\n    return this\n}\n</code></pre>\n\n<p>But I think it is tricky and not a good practice!\nIs there any better solution?</p>\n"}, {"tags": ["spring", "google-app-engine", "spring-boot", "intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 1467, "user_id": 1490673, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/c57edb15d830a839261e6aab3367cfc4?s=128&d=identicon&r=PG", "display_name": "Jannik Weichert", "link": "https://stackoverflow.com/users/1490673/jannik-weichert"}, "edited": false, "score": 0, "creation_date": 1527072783, "post_id": 50485532, "comment_id": 87985773, "body": "What happens if you remove    providedRuntime(&#39;org.springframework.boot:spring-boot-starte&zwnj;&#8203;r-tomcat&#39;)"}, {"owner": {"reputation": 137, "user_id": 6852720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HR9Iw1X68U/AAAAAAAAAAI/AAAAAAAAAGk/FuvBQmFP6uw/photo.jpg?sz=128", "display_name": "sk panchal", "link": "https://stackoverflow.com/users/6852720/sk-panchal"}, "reply_to_user": {"reputation": 1467, "user_id": 1490673, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/c57edb15d830a839261e6aab3367cfc4?s=128&d=identicon&r=PG", "display_name": "Jannik Weichert", "link": "https://stackoverflow.com/users/1490673/jannik-weichert"}, "edited": false, "score": 0, "creation_date": 1527073709, "post_id": 50485532, "comment_id": 87986386, "body": "@JannikWeichert OMG it&#39;s worked bro you saved me. and my 6 hours"}, {"owner": {"reputation": 137, "user_id": 6852720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HR9Iw1X68U/AAAAAAAAAAI/AAAAAAAAAGk/FuvBQmFP6uw/photo.jpg?sz=128", "display_name": "sk panchal", "link": "https://stackoverflow.com/users/6852720/sk-panchal"}, "reply_to_user": {"reputation": 1467, "user_id": 1490673, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/c57edb15d830a839261e6aab3367cfc4?s=128&d=identicon&r=PG", "display_name": "Jannik Weichert", "link": "https://stackoverflow.com/users/1490673/jannik-weichert"}, "edited": false, "score": 0, "creation_date": 1527074907, "post_id": 50485532, "comment_id": 87987139, "body": "@JannikWeichert i have another problem in app engine             java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpa&zwnj;&#8203;Configuration.class]&zwnj;&#8203;: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]"}, {"owner": {"reputation": 1467, "user_id": 1490673, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/c57edb15d830a839261e6aab3367cfc4?s=128&d=identicon&r=PG", "display_name": "Jannik Weichert", "link": "https://stackoverflow.com/users/1490673/jannik-weichert"}, "edited": false, "score": 0, "creation_date": 1527078363, "post_id": 50485532, "comment_id": 87989493, "body": "Please create a new question and post the relevant configuration classes."}], "answers": [{"tags": [], "owner": {"reputation": 1467, "user_id": 1490673, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/c57edb15d830a839261e6aab3367cfc4?s=128&d=identicon&r=PG", "display_name": "Jannik Weichert", "link": "https://stackoverflow.com/users/1490673/jannik-weichert"}, "is_accepted": true, "score": 3, "last_activity_date": 1527078297, "creation_date": 1527078297, "answer_id": 50488358, "question_id": 50485532, "link": "https://stackoverflow.com/questions/50485532/spring-boot-run-error-bootrun-work-fine-but-application-run-not-working/50488358#50488358", "title": "Spring boot run error bootRun work fine but application run not working", "body": "<p>Try to remove <code>providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')</code></p>\n"}], "owner": {"reputation": 137, "user_id": 6852720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6HR9Iw1X68U/AAAAAAAAAAI/AAAAAAAAAGk/FuvBQmFP6uw/photo.jpg?sz=128", "display_name": "sk panchal", "link": "https://stackoverflow.com/users/6852720/sk-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1077, "favorite_count": 0, "accepted_answer_id": 50488358, "answer_count": 1, "score": 1, "last_activity_date": 1527078297, "creation_date": 1527070120, "question_id": 50485532, "link": "https://stackoverflow.com/questions/50485532/spring-boot-run-error-bootrun-work-fine-but-application-run-not-working", "title": "Spring boot run error bootRun work fine but application run not working", "body": "<p>Here is my error I'm using spring boot 2.0.2.relese in the IntelliJ idea I search everywhere but I can not find the solution </p>\n\n<pre><code>java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration.propertySourcesPlaceholderConfigurer\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:64) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:108) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod(ConfigurationClassBeanDefinitionReader.java:180) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:141) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:117) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:328) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:233) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:273) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:93) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:759) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:395) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:327) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at com.skpapparts.gfbf.GfbfApplicationKt.main(GfbfApplication.kt:19) [classes/:na]\nCaused by: java.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:659) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:556) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:541) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:599) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:724) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:665) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:633) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1489) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1012) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry.addBeanTypeForNonAliasDefinition(BeanTypeRegistry.java:164) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry.addBeanType(BeanTypeRegistry.java:153) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry.updateTypesIfNecessary(BeanTypeRegistry.java:203) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.BeanTypeRegistry.getNamesForType(BeanTypeRegistry.java:115) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.collectBeanNamesForType(OnBeanCondition.java:265) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getBeanNamesForType(OnBeanCondition.java:254) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchingBeans(OnBeanCondition.java:196) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.OnBeanCondition.getMatchOutcome(OnBeanCondition.java:116) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47) ~[spring-boot-autoconfigure-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    ... 16 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: javax/servlet/Filter\n    at java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_161]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701) ~[na:1.8.0_161]\n    at java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_161]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:641) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    ... 33 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.servlet.Filter\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_161]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_161]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338) ~[na:1.8.0_161]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_161]\n    ... 37 common frames omitted\n\n2018-05-23 14:57:02.957  INFO 6860 --- [           main] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@2b76ff4e: startup date [Wed May 23 14:57:00 IST 2018]; root of context hierarchy\n2018-05-23 14:57:02.957  WARN 6860 --- [           main] o.s.boot.SpringApplication               : Unable to close ApplicationContext\n\njava.lang.IllegalStateException: Failed to introspect Class [org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration] from ClassLoader [sun.misc.Launcher$AppClassLoader@18b4aac2]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:659) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:556) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:541) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.util.ReflectionUtils.getUniqueDeclaredMethods(ReflectionUtils.java:599) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getTypeForFactoryMethod(AbstractAutowireCapableBeanFactory.java:724) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineTargetType(AbstractAutowireCapableBeanFactory.java:665) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:633) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1489) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doGetBeanNamesForType(DefaultListableBeanFactory.java:420) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanNamesForType(DefaultListableBeanFactory.java:390) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:511) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:503) ~[spring-beans-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBeansOfType(AbstractApplicationContext.java:1198) ~[spring-context-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.boot.SpringApplication.getExitCodeFromMappedException(SpringApplication.java:889) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.getExitCodeFromException(SpringApplication.java:875) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.handleExitCode(SpringApplication.java:861) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.handleRunFailure(SpringApplication.java:810) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1255) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1243) [spring-boot-2.0.2.RELEASE.jar:2.0.2.RELEASE]\n    at com.skpapparts.gfbf.GfbfApplicationKt.main(GfbfApplication.kt:19) [classes/:na]\nCaused by: java.lang.NoClassDefFoundError: javax/servlet/Filter\n    at java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_161]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701) ~[na:1.8.0_161]\n    at java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_161]\n    at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:641) ~[spring-core-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    ... 20 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.servlet.Filter\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_161]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_161]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338) ~[na:1.8.0_161]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_161]\n    ... 24 common frames omitted\n</code></pre>\n\n<p>this is my gradle file</p>\n\n<pre><code>compile('org.springframework.boot:spring-boot-starter-web')\n    compile('org.springframework.boot:spring-boot-starter-websocket')\n    compile('org.springframework.boot:spring-boot-starter-data-jpa')\n    compile('org.springframework.boot:spring-boot-starter-security')\n    providedRuntime('org.springframework.boot:spring-boot-starter-tomcat')\n    compile(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8\")\n    compile(\"org.jetbrains.kotlin:kotlin-reflect\")\n    compile('com.fasterxml.jackson.module:jackson-module-kotlin')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n    compile('org.springframework.boot:spring-boot-starter-jdbc')\n    runtime('mysql:mysql-connector-java')\n    compile 'com.google.cloud.sql:mysql-socket-factory:1.0.8'\n    compile \"com.zaxxer:HikariCP:3.1.0\"\n    compile \"io.jsonwebtoken:jjwt:0.9.0\"\n    compile 'com.google.code.gson:gson:2.8.2'\n    compile 'com.google.cloud:google-cloud-storage:1.23.0'\n    compile 'com.google.maps:google-maps-services:0.2.7'\n</code></pre>\n\n<p>but whenever I rum my application with boot run in the IntelliJ idea it works fine but when I'm run application this giving me an error.</p>\n\n<p>on bootRun (Gradle task in IntelliJ) everything works fine but also not work on Google App Engine.</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 2756, "user_id": 2235972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDR82.png?s=128&g=1", "display_name": "denvercoder9", "link": "https://stackoverflow.com/users/2235972/denvercoder9"}, "edited": false, "score": 0, "creation_date": 1527073658, "post_id": 50485331, "comment_id": 87986350, "body": "<code>java.lang.RuntimeException: cannot find implementation for com.lacas.asd.db.room.BookmarkDb. BookmarkDb_Impl</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527070855, "post_id": 50485613, "comment_id": 87984517, "body": "Tried with this and lateinit, the same... Also tried with: private val viewModel by lazy(LazyThreadSafetyMode.NONE) {        ViewModelProviders.of(this).get(CheeseViewModel::class.java)    } but allways the same..."}, {"owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527070943, "post_id": 50485613, "comment_id": 87984557, "body": "I am using tabs and fragments.. And I want an instance in the last fragment/tab. Is it possible? Or just in activity?"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527071066, "post_id": 50485613, "comment_id": 87984629, "body": "Yes you can instantiate a <code>ViewModel</code> in a <code>Fragment</code>. In general <code>ViewModels</code> can be used inside <code>UIControllers</code>. Why do you use the <code>AndroidViewModel</code> and not just <code>ViewModel</code>? Is there any reason behind it? And is that <code>FirstFragment()</code> just a base <code>Fragment</code>?"}, {"owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527071542, "post_id": 50485613, "comment_id": 87984934, "body": "Yes FirstFragment is an abstract fragment with some abstract methods. I just copied the &quot;paging sample&quot; code from the google samples. :) But that is worked in that project, but in an activity. How to update this code to work with a ViewModel instead of AndroidViewModel ?"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527071915, "post_id": 50485613, "comment_id": 87985186, "body": "I have just made a basic project with a similar code to yours (<code>AndroidViewModel</code> + the way you instantiate it).Everything worked fine for me. Could you please post the whole Stacktrace (edit your answer or post it as a comment :3)?  The mistake has to be somewhere else I believe.. OH and sorry stick to the <code>AndroidViewModel</code> since you need a reference to a <code>Context</code> :)"}, {"owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527072760, "post_id": 50485613, "comment_id": 87985760, "body": "U used in a tabStrip? in fragments?"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527072888, "post_id": 50485613, "comment_id": 87985843, "body": "No I hadn&#39;t used tabs but I don&#39;t believe that should make a difference since a Tab still contains the Fragment ;)"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527074278, "post_id": 50485613, "comment_id": 87986734, "body": "Okay so looks like your <code>Database</code> is causing the issue. <code>Caused by: java.lang.RuntimeException: cannot find implementation for com.lacas.asd.db.room.BookmarkDb. BookmarkDb_Impl does not exist</code>"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 2, "creation_date": 1527074455, "post_id": 50485613, "comment_id": 87986845, "body": "Since you are working with Kotlin. At your dependencies for Room do you use <code>kapt</code> instead of <code>annotationProcessor</code> and do all your Room dependencies have the same version? If not change that and retry. If it still does not work I&#39;d be really happy if you could provide me your Database creation code, since the mistake will probably be somewhere there."}, {"owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 0, "creation_date": 1527074747, "post_id": 50485613, "comment_id": 87987017, "body": "Thanks, finally working... I just pulled my hair out of this session :D"}, {"owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "reply_to_user": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "edited": false, "score": 1, "creation_date": 1527075166, "post_id": 50485613, "comment_id": 87987306, "body": "Yes :) I am sorry that it was so difficult to figure out but glad it works now :)!"}, {"owner": {"reputation": 9535, "user_id": 5861618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ug9BL.png?s=128&g=1", "display_name": "Ros&#225;rio Pereira Fernandes", "link": "https://stackoverflow.com/users/5861618/ros%c3%a1rio-pereira-fernandes"}, "edited": false, "score": 1, "creation_date": 1529879184, "post_id": 50485613, "comment_id": 89021636, "body": "In the most recent versions of Android Studio, adding <code>kapt</code> results in the error: &quot;Cause: app: Original kapt is deprecated.&quot; so you need to add <code>apply plugin: &#39;kotlin-kapt&#39;</code> to your build.gradle."}], "tags": [], "owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "is_accepted": false, "score": 5, "last_activity_date": 1527075270, "last_edit_date": 1527075270, "creation_date": 1527070295, "answer_id": 50485613, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/50485613#50485613", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>Change <code>viewModel = ViewModelProviders.of(activity!!).get(BookmarkViewModel::class.java)</code></p>\n\n<p>to <code>viewModel = ViewModelProviders.of(this).get(BookmarkViewModel::class.java)</code></p>\n\n<p>Furthermore don't instantiate the <code>viewModel</code> to <code>null</code>. Change it to a <code>lateinit var</code> this way you don't have to instantiate immediately (but you are telling Kotlin that you <strong>will</strong> instantiate it before accessing it). You can do this like so: <code>private lateinit var viewModel: BookMarkViewModel</code></p>\n\n<p><strong>EDIT</strong> The root of the problem was that the <code>Room Dependencies</code> where either not on the same version or <code>annotationProcessor</code> was used instead of <code>kapt</code> (<code>kapt</code> is required when using Kotlin)</p>\n"}, {"comments": [{"owner": {"reputation": 9535, "user_id": 5861618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ug9BL.png?s=128&g=1", "display_name": "Ros&#225;rio Pereira Fernandes", "link": "https://stackoverflow.com/users/5861618/ros%c3%a1rio-pereira-fernandes"}, "edited": false, "score": 2, "creation_date": 1529879217, "post_id": 50487165, "comment_id": 89021640, "body": "In the most recent versions of Android Studio, adding <code>kapt</code> results in the build error: &quot;Cause: app: Original kapt is deprecated.&quot; so you need to add <code>apply plugin: &#39;kotlin-kapt&#39;</code> to your build.gradle."}], "tags": [], "owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "is_accepted": true, "score": 11, "last_activity_date": 1615663738, "last_edit_date": 1615663738, "creation_date": 1527074681, "answer_id": 50487165, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/50487165#50487165", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>As somebody said here:</p>\n<p><a href=\"https://stackoverflow.com/questions/46665621/android-room-persistent-appdatabase-impl-does-not-exist\">Android room persistent: AppDatabase_Impl does not exist</a></p>\n<p>the solution was:</p>\n<pre><code>implementation &quot;androidx.lifecycle:lifecycle-extensions:$lifecycle_version&quot;\nkapt &quot;androidx.lifecycle:lifecycle-compiler:$lifecycle_version&quot;\n\nimplementation &quot;androidx.room:room-runtime:$roomVersion&quot;\nkapt &quot;androidx.room:room-compiler:$roomVersion&quot;\n\n\nimplementation &quot;androidx.paging:paging-runtime:$paging_version&quot;\n    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 765, "user_id": 2641657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48535a345281b87b8e4ff1759a811c8d?s=128&d=identicon&r=PG", "display_name": "JimmyFlash", "link": "https://stackoverflow.com/users/2641657/jimmyflash"}, "is_accepted": false, "score": 3, "last_activity_date": 1531299726, "creation_date": 1531299726, "answer_id": 51281370, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/51281370#51281370", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>remove kapt \"xxxx.xxx.\" if you still use that in you gradle.build since it'e been deprecated and add </p>\n\n<pre><code>apply plugin: 'kotlin-kapt'\n</code></pre>\n\n<p>at the end of your gradle.build for the app module. \nthat fixed my problem in android studio 3.1</p>\n"}, {"tags": [], "owner": {"reputation": 359, "user_id": 8356593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea17b6170bc6c160514ed2ad26441cd3?s=128&d=identicon&r=PG&f=1", "display_name": "nb2998", "link": "https://stackoverflow.com/users/8356593/nb2998"}, "is_accepted": false, "score": 1, "last_activity_date": 1537542051, "creation_date": 1537542051, "answer_id": 52446446, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/52446446#52446446", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>These 3 things worked for me:</p>\n\n<ol>\n<li>Adding/keeping both annotationProcessor and Kapt in the dependencies</li>\n</ol>\n\n<p><code>annotationProcessor \"android.arch.lifecycle:compiler:$lifecycle_version\"\nkapt \"android.arch.lifecycle:compiler:$lifecycle_version\"</code></p>\n\n<p><code>annotationProcessor \"android.arch.persistence.room:compiler:$room_version\"\nkapt \"android.arch.persistence.room:compiler:$room_version\"</code></p>\n\n<ol start=\"2\">\n<li><p>Adding<code>apply plugin: 'kotlin-kapt'</code> at the top of build.gradle(app) and cleaning the project</p></li>\n<li><p>Re-installing the application</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1066, "user_id": 5068710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5xyzY.png?s=128&g=1", "display_name": "Dawit Abraham", "link": "https://stackoverflow.com/users/5068710/dawit-abraham"}, "is_accepted": false, "score": 0, "last_activity_date": 1569255693, "creation_date": 1569255693, "answer_id": 58066478, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/58066478#58066478", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>In my case, I had forgotten to annotate my DatabaseClass class with </p>\n\n<pre><code>@Database(entities = [Book::class], version = 1)\nabstract class BookRoomDatabase: RoomDatabase() \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 373, "user_id": 5855782, "user_type": "registered", "profile_image": "https://graph.facebook.com/838139546295527/picture?type=large", "display_name": "Jetwiz", "link": "https://stackoverflow.com/users/5855782/jetwiz"}, "edited": false, "score": 0, "creation_date": 1579935942, "post_id": 59011773, "comment_id": 105940308, "body": "when instantiate viewmodel, it just need application parameter in super constructor"}], "tags": [], "owner": {"reputation": 4200, "user_id": 10699119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYUPn.jpg?s=128&g=1", "display_name": "sana ebadi", "link": "https://stackoverflow.com/users/10699119/sana-ebadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1574539614, "creation_date": 1574539614, "answer_id": 59011773, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/59011773#59011773", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>in, my case I was added  <code>private set</code> in <strong>DatabaseClass</strong> :|\nI removed it.</p>\n\n<pre><code>  private var INSTANCE: NoteDatabase? = null\n            private set\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>private var INSTANCE: NoteDatabase? = null\n</code></pre>\n\n<p>this problem take my 2 hours :|||</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11855707, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h8HmHPfuvDY/AAAAAAAAAAI/AAAAAAAAI2s/8ONmz2LbUHU/photo.jpg?sz=128", "display_name": "sooraj s", "link": "https://stackoverflow.com/users/11855707/sooraj-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1598019933, "creation_date": 1598019933, "answer_id": 63524722, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin/63524722#63524722", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>In my case this implementation solved my problem</p>\n<p><code>implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.2.0&quot;</code></p>\n<p>before I implemented this only\n<code>implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;</code></p>\n"}], "owner": {"reputation": 13097, "user_id": 472537, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/qr1hn.png?s=128&g=1", "display_name": "lacas", "link": "https://stackoverflow.com/users/472537/lacas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12087, "favorite_count": 0, "accepted_answer_id": 50487165, "answer_count": 7, "score": 7, "last_activity_date": 1615663738, "creation_date": 1527069619, "last_edit_date": 1527150313, "question_id": 50485331, "link": "https://stackoverflow.com/questions/50485331/cannot-create-an-instance-of-class-viewmodel-kotlin", "title": "Cannot create an instance of class ViewModel kotlin", "body": "<p>Here is my code</p>\n\n<pre><code>class BookmarkViewModel(app: Application) : AndroidViewModel(app) {\n\n    private val dao = BookmarkDb.get(app).bookmarkDao()\n\n    companion object {\n        private const val PAGE_SIZE = PagingConstants.PERPAGE\n\n        /**\n         * If placeholders are enabled, PagedList will report the full size but some items might\n         * be null in onBind method (PagedListAdapter triggers a rebind when data is loaded).\n         * &lt;p&gt;\n         * If placeholders are disabled, onBind will never receive null but as more pages are\n         * loaded, the scrollbars will jitter as new pages are loaded. You should probably disable\n         * scrollbars if you disable placeholders.\n         */\n        private const val ENABLE_PLACEHOLDERS = true\n    }\n\n        val allBookmarks = LivePagedListBuilder(dao.allBookmarkByDatetime(), PagedList.Config.Builder()\n                    .setPageSize(PAGE_SIZE)\n                    .setEnablePlaceholders(ENABLE_PLACEHOLDERS)\n                    .build()).build()\n\n    fun insert(title: String, description: String, datetime: String) = ioThread {\n        dao.insert(Bookmark(id = 0, title = title, description = description, datetime = datetime))\n    }\n\n    fun remove(bookmark: Bookmark) = ioThread {\n        dao.delete(bookmark)\n    }\n}\n</code></pre>\n\n<p>This is from the google samples..\nAfter I want to:</p>\n\n<pre><code>class BookmarkListFragment : FirstFragment() {\n\nprivate var viewModel: BookmarkViewModel? = null\n..\n\n    override fun onActivityCreated(savedInstanceState: Bundle?) {\n        super.onActivityCreated(savedInstanceState)\n\n        viewModel = ViewModelProviders.of(activity!!).get(BookmarkViewModel::class.java)\n...\n</code></pre>\n\n<p>And here is the problem:</p>\n\n<blockquote>\n  <p><strong>java.lang.RuntimeException: Cannot create an instance of class com.lacas.db.room.BookmarkViewModel</strong></p>\n</blockquote>\n\n<p>Can I use this in a fragment?</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.lacas.asd/com.lacas.asd.ui.activities.testtabs.TestTab2Activity}: java.lang.RuntimeException: Cannot create an instance of class com.lacas.asd.db.room.BookmarkViewModel\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2924)\n          at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2985)\n          at android.app.ActivityThread.-wrap14(ActivityThread.java)\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1635)\n          at android.os.Handler.dispatchMessage(Handler.java:102)\n          at android.os.Looper.loop(Looper.java:154)\n          at android.app.ActivityThread.main(ActivityThread.java:6692)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1468)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1358)\n       Caused by: java.lang.RuntimeException: Cannot create an instance of class com.lacas.asd.db.room.BookmarkViewModel\n          at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:207)\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:34)\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:29)\n          at kotlin.UnsafeLazyImpl.getValue(Lazy.kt:154)\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.getViewModel(TestTab2Activity.kt)\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.onCreated(TestTab2Activity.kt:45)\n          at com.lacas.asd.base.BasePermissionsActivity.onCreate(BasePermissionsActivity.kt:34)\n          at android.app.Activity.performCreate(Activity.java:6912)\n          at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1126)\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2877)\n          at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2985)\u00a0\n          at android.app.ActivityThread.-wrap14(ActivityThread.java)\u00a0\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1635)\u00a0\n          at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n          at android.os.Looper.loop(Looper.java:154)\u00a0\n          at android.app.ActivityThread.main(ActivityThread.java:6692)\u00a0\n          at java.lang.reflect.Method.invoke(Native Method)\u00a0\n          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1468)\u00a0\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1358)\u00a0\n       Caused by: java.lang.reflect.InvocationTargetException\n          at java.lang.reflect.Constructor.newInstance0(Native Method)\n          at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\n          at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199)\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)\u00a0\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:34)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:29)\u00a0\n          at kotlin.UnsafeLazyImpl.getValue(Lazy.kt:154)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.getViewModel(TestTab2Activity.kt)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.onCreated(TestTab2Activity.kt:45)\u00a0\n          at com.lacas.asd.base.BasePermissionsActivity.onCreate(BasePermissionsActivity.kt:34)\u00a0\n          at android.app.Activity.performCreate(Activity.java:6912)\u00a0\n          at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1126)\u00a0\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2877)\u00a0\n          at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2985)\u00a0\n          at android.app.ActivityThread.-wrap14(ActivityThread.java)\u00a0\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1635)\u00a0\n          at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n          at android.os.Looper.loop(Looper.java:154)\u00a0\n          at android.app.ActivityThread.main(ActivityThread.java:6692)\u00a0\n          at java.lang.reflect.Method.invoke(Native Method)\u00a0\n          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1468)\u00a0\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1358)\u00a0\n       Caused by: java.lang.RuntimeException: cannot find implementation for com.lacas.asd.db.room.BookmarkDb. BookmarkDb_Impl does not exist\n          at android.arch.persistence.room.Room.getGeneratedImplementation(Room.java:93)\n          at android.arch.persistence.room.RoomDatabase$Builder.build(RoomDatabase.java:630)\n          at com.lacas.asd.db.room.BookmarkDb$Companion.get(BookmarkDb.kt:29)\n          at com.lacas.asd.db.room.BookmarkViewModel.(BookmarkViewModel.kt:14)\n          at java.lang.reflect.Constructor.newInstance0(Native Method)\u00a0\n          at java.lang.reflect.Constructor.newInstance(Constructor.java:430)\u00a0\n          at android.arch.lifecycle.ViewModelProvider$AndroidViewModelFactory.create(ViewModelProvider.java:199)\u00a0\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:134)\u00a0\n          at android.arch.lifecycle.ViewModelProvider.get(ViewModelProvider.java:102)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:34)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity$viewModel$2.invoke(TestTab2Activity.kt:29)\u00a0\n          at kotlin.UnsafeLazyImpl.getValue(Lazy.kt:154)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.getViewModel(TestTab2Activity.kt)\u00a0\n          at com.lacas.asd.ui.activities.testtabs.TestTab2Activity.onCreated(TestTab2Activity.kt:45)\u00a0\n          at com.lacas.asd.base.BasePermissionsActivity.onCreate(BasePermissionsActivity.kt:34)\u00a0\n          at android.app.Activity.performCreate(Activity.java:6912)\u00a0\n          at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1126)\u00a0\n          at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2877)\u00a0\n          at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2985)\u00a0\n          at android.app.ActivityThread.-wrap14(ActivityThread.java)\u00a0\n          at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1635)\u00a0\n          at android.os.Handler.dispatchMessage(Handler.java:102)\u00a0\n          at android.os.Looper.loop(Looper.java:154)\u00a0\n          at android.app.ActivityThread.main(ActivityThread.java:6692)\u00a0\n          at java.lang.reflect.Method.invoke(Native Method)\u00a0\n          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1468)\u00a0\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1358)\u00a0</p>\n</blockquote>\n"}, {"tags": ["forms", "spring-boot", "post", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 8845509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HBKhV4EJFQ8/AAAAAAAAAAI/AAAAAAAAABk/cF-BHi84-2I/photo.jpg?sz=128", "display_name": "Denis Barzanov", "link": "https://stackoverflow.com/users/8845509/denis-barzanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1527067374, "creation_date": 1527067374, "answer_id": 50484568, "question_id": 50484457, "link": "https://stackoverflow.com/questions/50484457/spring-post-form-requestbody-cannot-be-bound-as-multivaluemap/50484568#50484568", "title": "Spring Post Form @RequestBody cannot be bound as MultiValueMap", "body": "<p>I was trying to get <code>datetime_pick</code>, but there was no such parameter in the form, there is <code>startDate</code>. Dumb me XD.</p>\n"}], "owner": {"reputation": 95, "user_id": 8845509, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HBKhV4EJFQ8/AAAAAAAAAAI/AAAAAAAAABk/cF-BHi84-2I/photo.jpg?sz=128", "display_name": "Denis Barzanov", "link": "https://stackoverflow.com/users/8845509/denis-barzanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 50484568, "answer_count": 1, "score": 0, "last_activity_date": 1527740563, "creation_date": 1527067052, "last_edit_date": 1527740563, "question_id": 50484457, "link": "https://stackoverflow.com/questions/50484457/spring-post-form-requestbody-cannot-be-bound-as-multivaluemap", "title": "Spring Post Form @RequestBody cannot be bound as MultiValueMap", "body": "<p>My controller is this:</p>\n\n<pre><code>@PostMapping(\"/car/{id}/book\", consumes = \n[MediaType.APPLICATION_FORM_URLENCODED_VALUE])\n    fun orderProcess(model: Model,\n                     @PathVariable id: Int,\n                     @Valid customerBindingModel: CustomerBindingModel,\n                     bindingResult: BindingResult,\n                     request: HttpServletRequest,\n                     @RequestBody multiParams: MultiValueMap&lt;String, String&gt;) : String {\n        println(multiParams)\n\n        val params = multiParams.toSingleValueMap()\n\n        println(params)\n        val startDateString = params[\"datetime_pick\"]!!\n        val endDateString = params[\"datetime_off\"]!!\n        ...\n}\n</code></pre>\n\n<p>My view is this:</p>\n\n<pre><code>&lt;form th:action=\"@{/car/{id}/book(id=${car.id})}\" id=\"confirmForm\" method=\"POST\"&gt;\n&lt;div class=\"formrow\"&gt;\n    &lt;input type=\"hidden\" id=\"startDate\" name=\"startDate\" th:value=\"${param.datetime_pick[0]}\" /&gt;\n    &lt;input type=\"hidden\" id=\"endDate\" name=\"endDate\" th:value=\"${param.datetime_off[0]}\" /&gt;\n\n\n    &lt;label for=\"email\"&gt;Email&lt;/label&gt;\n    &lt;input type=\"email\" id=\"email\" name=\"email\" th:value=\"${customer.email}\" /&gt;\n\n    &lt;label for=\"phoneNumber\"&gt;\u0422\u0435\u043b\u0435\u0444\u043e\u043d&lt;/label&gt;\n    &lt;input type=\"tel\" id=\"phoneNumber\" name=\"phoneNumber\" th:value=\"${customer.phoneNumber}\" /&gt;\n    &lt;script th:src=\"@{/intl-tel-input-12.1.0/build/js/intlTelInput.js}\"&gt;&lt;/script&gt;\n    &lt;!-- Bootstrap --&gt;\n\n    &lt;br/&gt;\n    &lt;label class=\"check-container\"&gt;\u0421\u0435\u0433\u0430 \u0449\u0435 \u043f\u043b\u0430\u0442\u044f \u0434\u0435\u043f\u043e\u0437\u0438\u0442:\n                                                &lt;input type=\"checkbox\" name=\"payDepositNow\" th:checked=\"${payDepositNow}\"&gt;\n                                                &lt;span class=\"checkmark\"&gt;&lt;/span&gt;\n                                            &lt;/label&gt;\n\n\n    &lt;script&gt;\n        $(\"#phoneNumber\").intlTelInput({\n                                                    nationalMode: false,\n                                                    preferredCountries: ['bg'],\n                                                });\n    &lt;/script&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>The problem is that I get a NPE (Null pointer) I tried all sorts of things to get the body of the function normally. I mean I could just get it with splitting a url encoded string, but I kind of wanted to get it as a map.\nI could also make a function to transform the <code>@RequestBody params: String</code> to a map myself, but there must be a better way to get the body as a map. The NPE must be somewhere around the assertions (<code>!!</code>)</p>\n\n<p>If I try to get the data as <code>@RequestParam param: String</code> I obviously can't, because the data is in the body.</p>\n"}, {"tags": ["java", "android", "kotlin", "couchbase-lite"], "answers": [{"tags": [], "owner": {"reputation": 2110, "user_id": 1257062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Y3So.png?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/1257062/rizwan"}, "is_accepted": true, "score": 1, "last_activity_date": 1527230655, "creation_date": 1527230655, "answer_id": 50523022, "question_id": 50483220, "link": "https://stackoverflow.com/questions/50483220/couchbase-lite-compound-key-range-with-nulls/50523022#50523022", "title": "Couchbase lite compound key range with nulls", "body": "<p><em>Couchbase Server</em> and <em>Couchbase Lite</em> has syntax difference for querying as it clearly depict the way we build the compound key array on the server side the null has been resolved to get the lexicographical correct value to output and the same happen with the <em>Unicode</em> provided in <em>endKey</em>\nAssuming your compound key </p>\n\n<pre><code>[ \"District\", \"2018\", \"05\", \"23\", \"06\", \"00\", \"00\" ]\n[ \"DistrictName\",\"year\",\"month\",\"day\",\"hour,\"minute\",\"second\"]\n</code></pre>\n\n<p>There might be two option on mobileside(<em>Couchbase Lite</em>) to query on such compound keys as dont provide the value for hour/min/second \nor \nSomething more value representation for null and Unicode:</p>\n\n<p>From:</p>\n\n<pre><code>startkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",null,null,null)\nendkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",\"\\u0fff\",\"\\u0fff\",\"\\u0fff\")\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>startkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",\"00\",\"00\",\"01\")\nendkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",\"23\",\"59\",\"59\")\n</code></pre>\n"}], "owner": {"reputation": 2473, "user_id": 6056359, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ca9fU.jpg?s=128&g=1", "display_name": "Isaac Obella", "link": "https://stackoverflow.com/users/6056359/isaac-obella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50523022, "answer_count": 1, "score": 0, "last_activity_date": 1527230655, "creation_date": 1527063388, "question_id": 50483220, "link": "https://stackoverflow.com/questions/50483220/couchbase-lite-compound-key-range-with-nulls", "title": "Couchbase lite compound key range with nulls", "body": "<p>I have view for my weather data with compound keys of the format</p>\n\n<pre><code>[ \"District\", \"2018\", \"05\", \"23\", \"06\", \"00\", \"00\" ]\n</code></pre>\n\n<p>On the server i can query weather for a day using a startkey and endkey</p>\n\n<pre><code>startkey=[ \"District\",\"2018\",\"05\",\"23\",null,null,null]\nendkey=[ \"District\",\"2018\",\"05\",\"23\",\"\\u0fff\",\"\\u0fff\",\"\\u0fff\"]\n</code></pre>\n\n<p>This gives me all the weather for <strong>District on 2018-05-23</strong>. Now after syncing the documents to couchbase lite on android, i'm trying to replicate the key ranges. \nI have tried</p>\n\n<pre><code>startkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",null,null,null)\nendkey=arrayListOf(\"District\",\"2018\",\"05\",\"23\",\"\\u0fff\",\"\\u0fff\",\"\\u0fff\")\n</code></pre>\n\n<p>But this returns an empty dataset. How can i format my keys to replicate what i did on the server.</p>\n"}, {"tags": ["android", "android-intent", "kotlin", "google-drive-android-api"], "comments": [{"owner": {"reputation": 12076, "user_id": 5832311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6jqn.jpg?s=128&g=1", "display_name": "abielita", "link": "https://stackoverflow.com/users/5832311/abielita"}, "edited": false, "score": 0, "creation_date": 1527089618, "post_id": 50482038, "comment_id": 87997519, "body": "You may refer with this <a href=\"https://stackoverflow.com/questions/15497888\">post</a>. You may need to create a service account as in <a href=\"https://developers.google.com/drive/api/v3/about-auth\" rel=\"nofollow noreferrer\">this</a> documentation. Also from this <a href=\"https://stackoverflow.com/questions/16017108\">page</a>, if you don&#39;t want user interaction and want to create a Google Drive account for your app to serve files, you may embed an encrypted access token and a refresh token into your application and init a credential object with the embedded tokens."}, {"owner": {"reputation": 762, "user_id": 8572503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97zqG.jpg?s=128&g=1", "display_name": "exploitr", "link": "https://stackoverflow.com/users/8572503/exploitr"}, "edited": false, "score": 0, "creation_date": 1527315977, "post_id": 50482038, "comment_id": 88091452, "body": "Please Sri, check my answer. I was also in this problem once. I posted the everything I knew from my research."}], "answers": [{"tags": [], "owner": {"reputation": 762, "user_id": 8572503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97zqG.jpg?s=128&g=1", "display_name": "exploitr", "link": "https://stackoverflow.com/users/8572503/exploitr"}, "is_accepted": false, "score": 0, "last_activity_date": 1527316338, "last_edit_date": 1527316338, "creation_date": 1527315488, "answer_id": 50539918, "question_id": 50482038, "link": "https://stackoverflow.com/questions/50482038/android-open-google-drive-with-intent-with-specified-account/50539918#50539918", "title": "Android open google drive with intent with specified account", "body": "<p>I'm neither familiar with <code>kotlin</code> nor with the method, you're using. I'm telling you the way mentioned exactly in the docs and with which I'm familiar.</p>\n\n<pre><code>//Starts the sign-in process and initializes the Drive client.\n    public void signIn() {\n        GoogleSignInOptions signInOptions = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                .requestScopes(Drive.SCOPE_FILE)\n                .requestScopes(Drive.SCOPE_APPFOLDER)\n                .build();\n        GoogleSignInClient googleSignInClient = GoogleSignIn.getClient(this, signInOptions);\n        startActivityForResult(googleSignInClient.getSignInIntent(), REQUEST_CODE_SIGN_IN);\n    }\n\n/**\n * Handles resolution callbacks.\n */\n@Override\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == REQUEST_CODE_SIGN_IN) {\n        if (resultCode == RESULT_OK) {\n            initializeDriveClient(GoogleSignIn.getLastSignedInAccount(this));\n        } else if (resultCode == RESULT_CANCELED) {\n            Snackbar.make(findViewById(R.id.fab), R.string.sign_in_alert, Snackbar.LENGTH_SHORT).show();\n        }else{\n            Snackbar.make(findViewById(R.id.fab), R.string.sign_fail, Snackbar.LENGTH_SHORT).show();\n        }\n    }\n}\n\n/**\n * Continues the sign-in process, initializing the DriveResourceClient with the current\n * user's account.\n */\nprivate void initializeDriveClient(GoogleSignInAccount signInAccount) {\n    mDriveResourceClient = Drive.getDriveResourceClient(getApplicationContext(), signInAccount);\n    mDriveResourceClient.getAppFolder().addOnSuccessListener(new OnSuccessListener&lt;DriveFolder&gt;() {\n        @Override\n        public void onSuccess(DriveFolder driveFolder) {\n            onDriveClientReady();\n            // CONTINUE THE TASK\n        }\n    });\n}\n\nabstract void onDriveClientReady();\n</code></pre>\n\n<p>Now, put this in an <code>abstract</code> activity class then, extend that from the <strong>Main Activity Class</strong>.</p>\n\n<p>This code is <strong>exception-safe</strong>, if the user cancels the sign-in, you'll be able to terminate reaching the next line of code from <code>onActivityResult</code>.The user will be displayed the sign-in options, to choose one account for sign-in. If it comes <code>RESULT_OK</code> at <code>onActivityResult</code>, that means he has signed-in.</p>\n\n<p>The next line of code will try to initialize the <code>DriveClient</code> asynchronously (Here I wanted the <code>appfolder</code> only, so tried <code>getAppFolder</code> and <code>Drive.SCOPE_APPFOLDER</code>, you'll set it up as you need.). When the drive client is successfully initialized, you'll get the <code>DriveFolder</code> from the <code>onSuccess</code> method.</p>\n\n<p><strong>Dependencies</strong></p>\n\n<pre><code>implementation('com.google.api-client:google-api-client-android:1.23.0') {\n    exclude group: 'org.apache.httpcomponents'\n}\nimplementation('com.google.apis:google-api-services-drive:v3-rev114-1.23.0') {\n    exclude group: 'org.apache.httpcomponents'\n}\nimplementation 'com.google.android.gms:play-services-auth:15.0.1'\nimplementation 'com.google.android.gms:play-services-drive:15.0.1'\n</code></pre>\n\n<p><strong>Further Help and the Docs</strong></p>\n\n<ul>\n<li><a href=\"https://developers.google.com/drive/api/v3/appdata\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/v3/appdata</a></li>\n<li><a href=\"https://developers.google.com/drive/api/v3/quickstart/android\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/v3/quickstart/android</a></li>\n<li><a href=\"https://developers.google.com/drive/android/appfolder\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/android/appfolder</a></li>\n<li><a href=\"https://developers.google.com/drive/android/create-file\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/android/create-file</a></li>\n<li><a href=\"https://www.numetriclabz.com/integrate-google-drive-in-android-tutorial/\" rel=\"nofollow noreferrer\">https://www.numetriclabz.com/integrate-google-drive-in-android-tutorial/</a></li>\n<li><a href=\"https://console.developers.google.com/apis/credentials/wizard?api=drive.googleapis.com\" rel=\"nofollow noreferrer\">https://console.developers.google.com/apis/credentials/wizard?api=drive.googleapis.com</a></li>\n</ul>\n\n<p><strong>Note</strong>\nI always keep backup of my application codes. If you want to see the whole class I'm using, see this :</p>\n\n<ul>\n<li><a href=\"https://www.dropbox.com/s/9wphtpe3ebd62xd/LoginActivity.java?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/9wphtpe3ebd62xd/LoginActivity.java?dl=0</a></li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 6409171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0420096738048dd77f415d85d97c6f62?s=128&d=identicon&r=PG&f=1", "display_name": "Sri", "link": "https://stackoverflow.com/users/6409171/sri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1754, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1527316338, "creation_date": 1527059585, "question_id": 50482038, "link": "https://stackoverflow.com/questions/50482038/android-open-google-drive-with-intent-with-specified-account", "title": "Android open google drive with intent with specified account", "body": "<p>I have multiple account set up in my Google drive </p>\n\n<p><code>account1@gmail.com</code>\n<code>account2@gmail.com</code></p>\n\n<p>and I want to open the google drive with <code>account2@gmail.com</code> through intent.\nI'm able to open the Google Drive App by using below function.</p>\n\n<pre><code>fun startOpenGoogleDriveApp() {\n    try {\n        val intent = activity.packageManager.getLaunchIntentForPackage(\"com.google.android.apps.docs\")\n        startActivity(intent)\n    }catch (e:Exception){\n        e.printStackTrace()\n    }\n}\n</code></pre>\n\n<p>Tried using <code>intent.putExtra(Intent.EXTRA_USER,\"account2@gmail.com\")</code>, but did not work.</p>\n\n<p>Is it possible to send/specify the account in the intent extras? Help would be greatly appreciated.</p>\n"}, {"tags": ["android", "unit-testing", "junit", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1527057681, "post_id": 50481339, "comment_id": 87975939, "body": "are you in control of passing the corresponding functions into the updateWeight in your test?"}, {"owner": {"reputation": 427, "user_id": 7833604, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/ew7eB.jpg?s=128&g=1", "display_name": "kokilayaa", "link": "https://stackoverflow.com/users/7833604/kokilayaa"}, "reply_to_user": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1527058071, "post_id": 50481339, "comment_id": 87976152, "body": "@s1m0nw1 Yes. I&#39;m doing an app with MVP architecture and this is a presenter function. This method is called from an Activity with needed parameters."}, {"owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "edited": false, "score": 0, "creation_date": 1527058182, "post_id": 50481339, "comment_id": 87976206, "body": "You could pass lambdas that set some state for your test which you can check afterward: <a href=\"https://stackoverflow.com/questions/49168588/kotlin-unit-testing-a-function-that-takes-a-function-as-parameter/49168760#49168760\" title=\"kotlin unit testing a function that takes a function as parameter\">stackoverflow.com/questions/49168588/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5511, "user_id": 7682257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3VeNQ.jpg?s=128&g=1", "display_name": "Suraj Vaishnav", "link": "https://stackoverflow.com/users/7682257/suraj-vaishnav"}, "is_accepted": false, "score": 0, "last_activity_date": 1527057674, "creation_date": 1527057674, "answer_id": 50481441, "question_id": 50481339, "link": "https://stackoverflow.com/questions/50481339/testing-whether-functions-passed-through-function-parameters-are-getting-called/50481441#50481441", "title": "Testing whether functions passed through function parameters are getting called (Android/Kotlin))", "body": "<p>You can just log value with different tag\nlike for <code>showEmptyError</code> method you can log</p>\n\n<pre><code>Log.d(\"showEmptyError value\",value.toString()) // inside your showEmptyError() method\n</code></pre>\n\n<p>same as different method use different tag which first parameter in <code>Log.d</code>\nand your result will be print in Logcat.</p>\n\n<p>But to do this you should have to accept value parameter in showEmptyError. So prototype should be <code>showEmptyError(value:Editable)</code></p>\n"}, {"comments": [{"owner": {"reputation": 427, "user_id": 7833604, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/ew7eB.jpg?s=128&g=1", "display_name": "kokilayaa", "link": "https://stackoverflow.com/users/7833604/kokilayaa"}, "edited": false, "score": 0, "creation_date": 1527059866, "post_id": 50481709, "comment_id": 87977125, "body": "I tried but <code>kotlin.UninitializedPropertyAccessException: lateinit property showEmptyError has not been initialized</code> comes up"}, {"owner": {"reputation": 2338, "user_id": 1220743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f1fbeea437da41d8843af249c52185c2?s=128&d=identicon&r=PG", "display_name": "mol", "link": "https://stackoverflow.com/users/1220743/mol"}, "reply_to_user": {"reputation": 427, "user_id": 7833604, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/ew7eB.jpg?s=128&g=1", "display_name": "kokilayaa", "link": "https://stackoverflow.com/users/7833604/kokilayaa"}, "edited": false, "score": 0, "creation_date": 1527060217, "post_id": 50481709, "comment_id": 87977327, "body": "Have you added @Mock annotation to this property?"}, {"owner": {"reputation": 427, "user_id": 7833604, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/ew7eB.jpg?s=128&g=1", "display_name": "kokilayaa", "link": "https://stackoverflow.com/users/7833604/kokilayaa"}, "edited": false, "score": 0, "creation_date": 1527063222, "post_id": 50481709, "comment_id": 87979266, "body": "It worked. I forgot to add the <code>@RunWith(MockitoJUnitRunner::class)</code> above the class"}], "tags": [], "owner": {"reputation": 2338, "user_id": 1220743, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f1fbeea437da41d8843af249c52185c2?s=128&d=identicon&r=PG", "display_name": "mol", "link": "https://stackoverflow.com/users/1220743/mol"}, "is_accepted": true, "score": 2, "last_activity_date": 1579001682, "last_edit_date": 1579001682, "creation_date": 1527058558, "answer_id": 50481709, "question_id": 50481339, "link": "https://stackoverflow.com/questions/50481339/testing-whether-functions-passed-through-function-parameters-are-getting-called/50481709#50481709", "title": "Testing whether functions passed through function parameters are getting called (Android/Kotlin))", "body": "<p>You could mock lambda functions using <code>Mockito</code>. For example <code>showEmptyError</code> test:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner::class)\nclass TestUpdateWeight {\n    @Mock\n    lateinit var showEmptyError: () -&gt; Unit\n    @Mock\n    lateinit var showOutOfRangeError: () -&gt; Unit\n    @Mock\n    lateinit var dismissAlertDialog: () -&gt; Unit\n    @Mock\n    lateinit var updateAndShow: (Float) -&gt; Unit\n\n    @Test\n    fun testShowEmptyErorr() {\n        updateWeight(\"\", showEmptyError, showOutOfRangeError, dismissAlertDialog, updateAndShow)\n\n        verify(showEmptyError).invoke()\n        verifyNoMoreInteractions(showOutOfRangeError)\n        verifyNoMoreInteractions(dismissAlertDialog)\n        verifyNoMoreInteractions(updateAndShow)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 7833604, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/ew7eB.jpg?s=128&g=1", "display_name": "kokilayaa", "link": "https://stackoverflow.com/users/7833604/kokilayaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 50481709, "answer_count": 2, "score": -1, "last_activity_date": 1579001682, "creation_date": 1527057290, "question_id": 50481339, "link": "https://stackoverflow.com/questions/50481339/testing-whether-functions-passed-through-function-parameters-are-getting-called", "title": "Testing whether functions passed through function parameters are getting called (Android/Kotlin))", "body": "<p>Is there any way to check whether a function passed through another function's parameter is getting called? For example,</p>\n\n<pre><code>override fun updateWeight(value: Editable,\n                          showEmptyError: () -&gt; Unit,\n                          showOutOfRangeError: () -&gt; Unit,\n                          dismissAlertDialog: () -&gt; Unit,\n                          updateAndShow: (Float) -&gt; Unit) {\n    if (value.toString().trim().isEmpty()) {\n        showEmptyError()\n    } else {\n        val floatVal = value.toString().trim().toFloat()\n        if (floatVal &gt; 300) {\n            showOutOfRangeError()\n        } else {\n            dismissAlertDialog()\n            updateAndShow(floatVal)\n        }\n    }\n}\n</code></pre>\n\n<p>I need to test above method with different values for <code>value</code> parameter and check which method is executing? I tried searching for an answer but I couldn't find a proper solution.</p>\n"}, {"tags": ["kotlin", "corda"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9619029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32551a5f8489da525cfbb187ddb46d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/9619029/liz"}, "edited": false, "score": 0, "creation_date": 1527079261, "post_id": 50485471, "comment_id": 87990173, "body": "val loadingState = LoadingState(&quot;T1&quot;, &quot;NET&quot;, 100, ourIdentity, &quot;Initiated&quot;)             val loadingState2 = LoadingState( &quot;T2&quot;,&quot;NET&quot;, 100, ourIdentity, &quot;Initiated&quot;)             if (loadingState === loadingState2 ){                 loadingState.updateStatus(&quot;Cleared&quot;)             }else{                 loadingState.updateStatus(&quot;Not cleared&quot;)             }"}, {"owner": {"reputation": 3, "user_id": 9619029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32551a5f8489da525cfbb187ddb46d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/9619029/liz"}, "edited": false, "score": 0, "creation_date": 1527079276, "post_id": 50485471, "comment_id": 87990185, "body": "Is this what you meant?"}, {"owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "reply_to_user": {"reputation": 3, "user_id": 9619029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32551a5f8489da525cfbb187ddb46d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/9619029/liz"}, "edited": false, "score": 0, "creation_date": 1527084903, "post_id": 50485471, "comment_id": 87994172, "body": "Yep, as long as they&#39;re <code>data</code> classes :)"}, {"owner": {"reputation": 3, "user_id": 9619029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32551a5f8489da525cfbb187ddb46d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/9619029/liz"}, "edited": false, "score": 0, "creation_date": 1527223311, "post_id": 50485471, "comment_id": 88055435, "body": "Thank you. But what if I have a requirement that I want to compare only 3 fields out of the 5 fields from both the states? How do I filter it then?"}], "tags": [], "owner": {"reputation": 23867, "user_id": 4620025, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hKFnG.jpg?s=128&g=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/4620025/joel"}, "is_accepted": true, "score": 0, "last_activity_date": 1527236063, "last_edit_date": 1527236063, "creation_date": 1527069983, "answer_id": 50485471, "question_id": 50480143, "link": "https://stackoverflow.com/questions/50480143/comparison-of-two-states-in-corda/50485471#50485471", "title": "Comparison of two states in corda", "body": "<p>If you are using Kotlin, you can use data classes: <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/data-classes.html</a> For example, the following will return <code>true</code>:</p>\n\n<pre><code>data class Person(val name: String)\nval person1 = Person(\"John\")\nval person2 = Person(\"John\")\nperson1 == person2\n</code></pre>\n\n<p>Because equality is determined solely based on the fields in the primary constructor. Alternatively, you can override the <code>equals</code> method of your class.</p>\n\n<p>If you are only trying to compare some of the fields, you can compare them directly in a large <code>if</code> statement. But if you are using a <code>data</code> class, you can also compare them by creating a copy where the fields you <strong>don't</strong> want to compare have been set to be equal in both instances. For example, the following will return <code>true</code>:</p>\n\n<pre><code>data class Person(val name: String, val age: Int, val address: String)\nval person1 = Person(\"John\", 24, \"London\")\nval person2 = Person(\"John\", 25, \"London\")\nperson1 == person2.copy(age = person1.age)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9619029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32551a5f8489da525cfbb187ddb46d8a?s=128&d=identicon&r=PG&f=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/9619029/liz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 50485471, "answer_count": 1, "score": -2, "last_activity_date": 1527236063, "creation_date": 1527051701, "question_id": 50480143, "link": "https://stackoverflow.com/questions/50480143/comparison-of-two-states-in-corda", "title": "Comparison of two states in corda", "body": "<p>I have created two states in corda. Now I want to compare the fields of these two states and create a third state based on the comparison. Is it possible? If possible how to do it? Is there any ideal programming solution other than comparing each field?</p>\n"}, {"tags": ["android", "kotlin", "android-viewpager", "android-tablayout"], "comments": [{"owner": {"reputation": 730, "user_id": 5202630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqhvK.png?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/5202630/manish"}, "edited": false, "score": 0, "creation_date": 1527061867, "post_id": 50479838, "comment_id": 87978396, "body": "Is it working for you?"}, {"owner": {"reputation": 6468, "user_id": 4390557, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/73Jri.jpg?s=128&g=1", "display_name": "VVB", "link": "https://stackoverflow.com/users/4390557/vvb"}, "edited": false, "score": 0, "creation_date": 1527067283, "post_id": 50479838, "comment_id": 87982029, "body": "Try app:tabSelectedTextColor=&quot;@color/color_primary_text&quot; app:tabTextColor=&quot;@color/color_secondary_text&quot; in layout XML"}, {"owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "edited": false, "score": 0, "creation_date": 1527071389, "post_id": 50479838, "comment_id": 87984841, "body": "This also doesnt work"}], "answers": [{"comments": [{"owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "edited": false, "score": 0, "creation_date": 1527062153, "post_id": 50480028, "comment_id": 87978608, "body": "Hasn&#39;t solved my problem with text. I will add graphical representation of that behaviour"}], "tags": [], "owner": {"reputation": 730, "user_id": 5202630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oqhvK.png?s=128&g=1", "display_name": "Manish", "link": "https://stackoverflow.com/users/5202630/manish"}, "is_accepted": false, "score": 0, "last_activity_date": 1527051019, "creation_date": 1527051019, "answer_id": 50480028, "question_id": 50479838, "link": "https://stackoverflow.com/questions/50479838/tablayout-selected-text-color-showing-up-in-two-tabs-at-the-same-time/50480028#50480028", "title": "TabLayout selected text color showing up in two tabs at the same time", "body": "<p>Use the following style code to change the color of the text in TabLayout on selection.</p>\n\n<pre><code>&lt;style name=\"MyCustomTabLayout\" parent=\"Widget.Design.TabLayout\"&gt;\n    &lt;item name=\"tabIndicatorColor\"&gt;@color/colorPrimary&lt;/item&gt;\n    &lt;item name=\"tabTextAppearance\"&gt;@style/MyCustomTabText&lt;/item&gt;\n    &lt;item name=\"tabSelectedTextColor\"&gt;@color/colorPrimary&lt;/item&gt;\n&lt;/style&gt;\n\n&lt;style name=\"MyCustomTabText\" parent=\"TextAppearance.AppCompat.Button\"&gt;\n    &lt;item name=\"android:textSize\"&gt;14sp&lt;/item&gt;\n    &lt;item name=\"android:textColor\"&gt;@android:color/black&lt;/item&gt;\n    &lt;item name=\"android:textAllCaps\"&gt;false&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p>And use this style in your TabLayout.</p>\n\n<pre><code>&lt;android.support.design.widget.TabLayout\n    android:id=\"@+id/tab_layout\"\n    style=\"@style/MyCustomTabLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:elevation=\"4dp\"\n    android:visibility=\"visible\"\n    android:minHeight=\"?attr/actionBarSize\"\n    android:layout_alignParentBottom=\"true\"\n    app:layout_constraintBottom_toBottomOf=\"parent\"\n    app:layout_constraintEnd_toEndOf=\"parent\"\n    app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6191412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0e0c937174e27d4427c6b2c36281f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Ch&#250; Ti&#234;n", "link": "https://stackoverflow.com/users/6191412/ch%c3%ba-ti%c3%aan"}, "is_accepted": false, "score": 0, "last_activity_date": 1533023968, "creation_date": 1533023968, "answer_id": 51608285, "question_id": 50479838, "link": "https://stackoverflow.com/questions/50479838/tablayout-selected-text-color-showing-up-in-two-tabs-at-the-same-time/51608285#51608285", "title": "TabLayout selected text color showing up in two tabs at the same time", "body": "<p>You need use CustomView for <strong>Tablayout</strong> and set selector false for tab CustomView at <strong>onTabUnselected</strong>.\nLike below:</p>\n\n<pre><code>View view = tab.getCustomView();\nif (view != null) {\n     tab.icon = getDrawable(iconList[viewPager.currentItem])\n     view.setSelected(false);\n}\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 9046350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff03988badcde08ee17f62f3e9efeb25?s=128&d=identicon&r=PG&f=1", "display_name": "martin1337", "link": "https://stackoverflow.com/users/9046350/martin1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1533023968, "creation_date": 1527049915, "last_edit_date": 1527255960, "question_id": 50479838, "link": "https://stackoverflow.com/questions/50479838/tablayout-selected-text-color-showing-up-in-two-tabs-at-the-same-time", "title": "TabLayout selected text color showing up in two tabs at the same time", "body": "<p>I have tabLayout with ViewPager, but when I select a tab, previously selected tab text color will stay in selected color aswell. So I ended up with two tabs in selected text state. As you can see I made onTabSelectedListener to change icons from selected to unselected state and it's working fine. Only text is a problem. I've also tried to make xml selector for tabLayout before, but it did not work eventually.</p>\n\n<p><strong>UPDATE</strong> - When i removed tabLayout.addOnTabSelectedListener, text color is switching correctly. But this solved my problem only partialy. Now I have to find solution to icon swapping when Tab is selected.</p>\n\n<pre><code>tab.icon = getDrawable(iconListActive[viewPager.currentItem])\n</code></pre>\n\n<p>This exact code bugged out color switching. But it doesn't make sense. As I add <code>super.onTabSelected(tab)</code> color switching works perfectly.</p>\n\n<p>TabLayout and ViewPager initialization:</p>\n\n<pre><code>private var pagerAdapter: ViewPagerAdapter? = null\nprivate lateinit var viewPager: CustomViewPager\nprivate lateinit var tabLayout: TabLayout\n\ntabLayout = findViewById(R.id.tab_layout)\nviewPager = findViewById(R.id.viewPager)\n\ntabLayout.setTabTextColors(\n                resources.getColor(R.color.color_grey),\n                resources.getColor(R.color.color_green)\n        )\n\npagerAdapter = ViewPagerAdapter(supportFragmentManager, this)\npagerAdapter!!.apply {\n        addFragment(FirstFragment(), \"Tab 1\")\n        addFragment(SecondFragment(), \"Tab 2\")\n        addFragment(ThirdFragment(), \"Tab 3\")\n        addFragment(FourthFragment(), \"Tab 4\")\n    }\n\nviewPager.adapter = pagerAdapter\n\ntabLayout.setupWithViewPager(viewPager)\ntabLayout.tabGravity = (TabLayout.GRAVITY_FILL)\n\ntabLayout.addOnTabSelectedListener(object : TabLayout.ViewPagerOnTabSelectedListener(viewPager) {\n            override fun onTabSelected(tab: TabLayout.Tab) {\n                tab.icon = getDrawable(iconListActive[viewPager.currentItem])\n\n            }\n\n            override fun onTabUnselected(tab: TabLayout.Tab) {\n                tab.icon = getDrawable(iconList[viewPager.currentItem])\n\n            }\n\n        })\n\n    }\n</code></pre>\n\n<p>CustomViewPager</p>\n\n<pre><code>import android.content.Context\nimport android.support.v4.view.ViewPager\nimport android.util.AttributeSet\nimport android.view.MotionEvent\n\n\nclass CustomViewPager(context: Context, attributeSet: AttributeSet) : ViewPager(context, attributeSet) {\n\n    override fun onInterceptTouchEvent(ev: MotionEvent?): Boolean {\n        return false\n    }\n\n    override fun onTouchEvent(ev: MotionEvent?): Boolean {\n        return false\n    }\n}\n</code></pre>\n\n<p>ViewPagerAdapter</p>\n\n<pre><code>class ViewPagerAdapter(fm: FragmentManager, private val ctx: Context) : FragmentStatePagerAdapter(fm) {\n\n    private val fragments = ArrayList&lt;Fragment&gt;()\n    private val tabTitles = ArrayList&lt;String&gt;()\n\n\n    override fun getItem(position: Int): Fragment {\n        return fragments[position]\n    }\n\n    override fun getCount(): Int {\n        return fragments.size\n    }\n\n    fun addFragment(fragment: Fragment, tabtitle: String){\n        fragments.add(fragment)\n        tabTitles.add(tabtitle)\n    }\n\n    override fun getPageTitle(position: Int): CharSequence {\n        return tabTitles[position]\n    }\n</code></pre>\n\n<p>TabLayout and ViewPager XML</p>\n\n<pre><code>&lt;FrameLayout\n        android:id=\"@+id/frameContainer\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toTopOf=\"@+id/tab_layout\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;com.app.CustomViewPager\n            android:id=\"@+id/viewPager\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@color/colorBackground\" /&gt;\n    &lt;/FrameLayout&gt;\n\n&lt;android.support.design.widget.TabLayout\n        android:id=\"@+id/tab_layout\"\n        style=\"@style/TabBarTheme\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:elevation=\"4dp\"\n        android:visibility=\"visible\"\n        android:minHeight=\"?attr/actionBarSize\"\n        android:layout_alignParentBottom=\"true\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n</code></pre>\n\n<p>TabStyle XML:</p>\n\n<pre><code>&lt;style name=\"TabBarTheme\" parent=\"Widget.Design.TabLayout\"&gt;\n        &lt;item name=\"android:background\"&gt;@color/colorBackground&lt;/item&gt;\n        &lt;item name=\"tabTextAppearance\"&gt;@style/AppTabTextAppearance&lt;/item&gt;\n        &lt;item name=\"tabIndicatorHeight\"&gt;0dp&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;style name=\"AppTabTextAppearance\" parent=\"TextAppearance.AppCompat.Widget.ActionBar.Title.Inverse\"&gt;\n        &lt;item name=\"textAllCaps\"&gt;false&lt;/item&gt;\n        &lt;item name=\"android:capitalize\"&gt;words&lt;/item&gt;\n        &lt;item name=\"android:textSize\"&gt;10sp&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n\n<p>Graphical representation of that behaviour (cannot post actual graphics)</p>\n\n<p><a href=\"https://i.stack.imgur.com/hrsZi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hrsZi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1527115860, "post_id": 50481439, "comment_id": 88009909, "body": "From the answer, to me it follows as a &quot;rule of thumb&quot;: 1) If Z changes, use getter.  2) If X is a class, use getter.  3) If X is an object or enum or companion object, initializer can be used. Is this interpretation correct?"}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "reply_to_user": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1527142804, "post_id": 50481439, "comment_id": 88016823, "body": "My rule of thumb is to mostly use the initializer, that&#39;s the &quot;usual&quot; way. Use <code>get()</code> when you have a special need to use it, I mention some of them in the answer."}], "tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": false, "score": 5, "last_activity_date": 1527057662, "creation_date": 1527057662, "answer_id": 50481439, "question_id": 50479700, "link": "https://stackoverflow.com/questions/50479700/what-are-best-practices-for-choosing-between-property-initializer-vs-property-ge/50481439#50481439", "title": "What are best practices for choosing between property initializer vs property getter in Kotlin?", "body": "<p>Decide based on when you want evaluation to happen. A property initializer results in memoization semantics: the initializing expression is evaluated only at instantiation time:</p>\n\n<pre><code>class X {\n    val y = Z // Z evaluated only at instantiation time\n}\n</code></pre>\n\n<p>A property getter is evaluated every time you access the property:</p>\n\n<pre><code>class X { \n    val y get() = Z // evaluated on every access of y\n}\n</code></pre>\n\n<p>There are several factors that may make you prefer one or the other:</p>\n\n<ul>\n<li>If the evaluation of <code>Z</code> changes over time, you probably want to evaluate it every time.</li>\n<li>Even if <code>Z</code> always yields the same result, you may want to postpone the evaluation untill first access. In that case you may use a <code>lazy</code> property delegate.</li>\n<li>Possibly the size of the result is large and you prefer not to retain it in memory while not being actively used. In that case prefer the custom getter.</li>\n</ul>\n"}], "owner": {"reputation": 1715, "user_id": 910095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e96728ed86fffbb7960da7fe34cd47?s=128&d=identicon&r=PG", "display_name": "Nikola Mihajlovi\u0107", "link": "https://stackoverflow.com/users/910095/nikola-mihajlovi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527060709, "creation_date": 1527048979, "question_id": 50479700, "link": "https://stackoverflow.com/questions/50479700/what-are-best-practices-for-choosing-between-property-initializer-vs-property-ge", "title": "What are best practices for choosing between property initializer vs property getter in Kotlin?", "body": "<p>In Kotlin, we have a choice between:</p>\n\n<pre><code>class|object X {\n  [override] val y = Z\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class|object X {\n  [override] val y: Y\n    get() = Z\n}\n</code></pre>\n\n<p>Which one should be chosen and when?</p>\n"}, {"tags": ["generics", "lambda", "kotlin"], "comments": [{"owner": {"reputation": 7207, "user_id": 676427, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5026f5975606c389bbb6831d20826cb0?s=128&d=identicon&r=PG", "display_name": "Robert Jack Will", "link": "https://stackoverflow.com/users/676427/robert-jack-will"}, "edited": false, "score": 0, "creation_date": 1527445503, "post_id": 50478726, "comment_id": 88121198, "body": "As I read your question it is about the general understanding of lambdas and generics, right? Or do you want to achieve anything specific? Anyway, I wrote a generic answer with typical use cases below."}], "answers": [{"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": true, "score": 10, "last_activity_date": 1527928492, "last_edit_date": 1527928492, "creation_date": 1527057631, "answer_id": 50481428, "question_id": 50478726, "link": "https://stackoverflow.com/questions/50478726/using-multiple-generic-types-in-lambda-in-kotlin/50481428#50481428", "title": "Using multiple generic types in lambda in kotlin", "body": "<p>You're right: The generics, as you used them, allow any type to be used, even the ones that don't offer the <code>+</code> operator for example. Specifying the type to be <code>Number</code> is easy. However, it won't make the function compile either:</p>\n\n<pre><code>fun &lt;T : Number&gt; onScanExt(): (T, T) -&gt; T = { \n    num1, num2 -&gt; num1 + num2\n}\n</code></pre>\n\n<p>(Note that a second type parameter <code>R</code> is not necessary in your example.)</p>\n\n<p>The problem again is that even <code>Number</code> does not include the <code>+</code> operator in its contract. These are defined for the specific types <code>Int</code>, <code>Double</code> et cetera directly (see <a href=\"https://github.com/JetBrains/kotlin-native/blob/master/runtime/src/main/kotlin/kotlin/Primitives.kt\" rel=\"nofollow noreferrer\">source</a>).</p>\n\n<p>A <em>strongly typed language</em> such as Kotlin won\u2019t allow such an implementation.</p>\n"}, {"tags": [], "owner": {"reputation": 7207, "user_id": 676427, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/5026f5975606c389bbb6831d20826cb0?s=128&d=identicon&r=PG", "display_name": "Robert Jack Will", "link": "https://stackoverflow.com/users/676427/robert-jack-will"}, "is_accepted": false, "score": 4, "last_activity_date": 1527446118, "creation_date": 1527446118, "answer_id": 50555296, "question_id": 50478726, "link": "https://stackoverflow.com/questions/50478726/using-multiple-generic-types-in-lambda-in-kotlin/50555296#50555296", "title": "Using multiple generic types in lambda in kotlin", "body": "<p>For a working example, the lambda body can only call operations on the generic values which their supertype guarantees to be present (as you already said). So some very generic working examples could be:</p>\n\n<pre><code>fun &lt;T&gt; onScanExt(): (T, T) -&gt; String  = { a, b -&gt;\n    a.toString() + b.toString()\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>fun &lt;T: Comparable&lt;T&gt;&gt; onScanExt(): (T, T) -&gt; T  = { a, b -&gt;\n    if (a.compareTo(b) &lt; 0) a else b\n}\n</code></pre>\n\n<p>Fun fact: while generic lambdas can be returned from functions, they cannot be (generically) stored in fields or variables:</p>\n\n<pre><code>val f = onScanExt2()\n</code></pre>\n\n<p>This fails to compile with the error:</p>\n\n<blockquote>\n  <p>Not enough information to infer parameter T [..]. Please specify it explicitly.</p>\n</blockquote>\n\n<p>Very much unlike purely functional languages like good-old Haskell where there is really no such difference between functions and variables containing functions. If you like it simple, then maybe try Haskell!</p>\n"}, {"comments": [{"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1527497569, "post_id": 50555637, "comment_id": 88135422, "body": "This is actually the only answer that deals with the fundamental problem in the question and I feel it deserves to be accepted once you add add hints about how to use generic type constraints."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1527498941, "post_id": 50555637, "comment_id": 88136170, "body": "I&#39;d say it deals with <i>a</i> fundamental problem. But you are right that I should extend it."}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1527500820, "post_id": 50555637, "comment_id": 88137225, "body": "And now I did (covering the other problem as well)."}, {"owner": {"reputation": 81, "user_id": 732799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316bc8bedc3ca4e066c7153dae21ddf6?s=128&d=identicon&r=PG", "display_name": "Gary Wright", "link": "https://stackoverflow.com/users/732799/gary-wright"}, "edited": false, "score": 0, "creation_date": 1570205656, "post_id": 50555637, "comment_id": 102852311, "body": "You an constrain a type to an interface in Kotlin:  <code>interface Item { fun bar(): Int }</code>  <code>class ItemManager&lt;T: Item&gt; {}</code>"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 81, "user_id": 732799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/316bc8bedc3ca4e066c7153dae21ddf6?s=128&d=identicon&r=PG", "display_name": "Gary Wright", "link": "https://stackoverflow.com/users/732799/gary-wright"}, "edited": false, "score": 0, "creation_date": 1570207875, "post_id": 50555637, "comment_id": 102853148, "body": "@GaryWright Yes, that&#39;s covered in the last paragraph."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": false, "score": 6, "last_activity_date": 1527500045, "last_edit_date": 1527500045, "creation_date": 1527448441, "answer_id": 50555637, "question_id": 50478726, "link": "https://stackoverflow.com/questions/50478726/using-multiple-generic-types-in-lambda-in-kotlin/50555637#50555637", "title": "Using multiple generic types in lambda in kotlin", "body": "<p>There's no reasonable way to write anything with signature </p>\n\n<pre><code>fun &lt;T, R&gt; onScanExt(): (T, T) -&gt; R\n</code></pre>\n\n<p>because it says that the caller can choose any <code>T</code> and <code>R</code>, and then you need to obtain an <code>R</code> from two <code>T</code>s; but there's no relationship between <code>T</code> and <code>R</code>, so you can't use the <code>T</code>s.</p>\n\n<p>You can make it compile: e.g. use <code>someExpression as R</code>, or <code>throw SomeException()</code>, or an infinite loop. But none of these are actually useful.</p>\n\n<p>In general (C++ is the big exception here; its templates work very differently), a generic method must either:</p>\n\n<ol>\n<li><p>Work on all types (or, in Java, on all types except primitives). So it can only use operations available on all types, and there are very few of those. An example with two type parameters would be</p>\n\n<pre><code>fun &lt;T1, T2&gt; apply(f: T1 -&gt; T2, x: T1) = f(x)\n</code></pre></li>\n<li><p>Work on all types which satisfy some constraints. Different languages allow different kinds of constraints; e.g. <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/constraints-on-type-parameters\" rel=\"noreferrer\">C#</a> has a pretty large set, Scala has view and context bounds. Kotlin, so far as I am aware, only allows <a href=\"https://kotlinlang.org/docs/reference/generics.html#upper-bounds\" rel=\"noreferrer\">upper bounds</a>. In particular, there's no constraint which says \"type <code>T</code> has operator <code>+</code>\". So the function you want can't be written.</p></li>\n</ol>\n"}], "owner": {"reputation": 29871, "user_id": 70942, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9f7667844c54af07fbb1a85592137cd4?s=128&d=identicon&r=PG", "display_name": "ant2009", "link": "https://stackoverflow.com/users/70942/ant2009"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1456, "favorite_count": 0, "accepted_answer_id": 50481428, "answer_count": 3, "score": 8, "last_activity_date": 1527928492, "creation_date": 1527040234, "question_id": 50478726, "link": "https://stackoverflow.com/questions/50478726/using-multiple-generic-types-in-lambda-in-kotlin", "title": "Using multiple generic types in lambda in kotlin", "body": "<pre><code>Koltin 1.2.30\n</code></pre>\n\n<p>I am working with generic and lambda functions.</p>\n\n<p>The following works without the generic types</p>\n\n<pre><code>fun onScanExt(): (Int, Int) -&gt; Int = {\n    num1, num2 -&gt; num1 + num2\n\n    num1 + num2\n}\n</code></pre>\n\n<p>However, with the generics:</p>\n\n<pre><code>fun &lt;T, R&gt; onScanExt(): (T, T) -&gt; R = {\n    num1, num2 -&gt; num1 + num2\n\n    num1 + num2\n}\n</code></pre>\n\n<p>I guess the above cannot work as the generic type might not be a Number type and someone could pass in a String and the lambda wouldn't know what to do with a String type if there is a calculation involved.</p>\n\n<p>Any suggestions of example on how to pass in multiple generics and return a generic type?</p>\n\n<p>Many thanks in advance,</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1121, "user_id": 2937875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da97c9604533eb5c853ce676c9e77093?s=128&d=identicon&r=PG", "display_name": "Grigory K", "link": "https://stackoverflow.com/users/2937875/grigory-k"}, "edited": false, "score": 0, "creation_date": 1577361402, "post_id": 50478085, "comment_id": 105150804, "body": "What about <code>s.replace(&quot;his&quot;, &quot;JOHN&quot;).replace(&quot;JOHN&quot;, &quot;Alles&quot;)</code> ?"}], "tags": [], "owner": {"reputation": 569, "user_id": 7446875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0c81a3c8c9643fece3862849f412c48?s=128&d=identicon&r=PG&f=1", "display_name": "andrej88", "link": "https://stackoverflow.com/users/7446875/andrej88"}, "is_accepted": true, "score": 9, "last_activity_date": 1527034044, "creation_date": 1527034044, "answer_id": 50478085, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/50478085#50478085", "title": "Kotlin replace multiple words in string", "body": "<p>You can do it using multiple consecutive calls to <code>replace()</code>:</p>\n\n<pre><code>w_text.replace(\"his\", \"here\").replace(\"john\", \"alles\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1890, "user_id": 1385489, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b8ec991b622494f0a9bbc64653c82756?s=128&d=identicon&r=PG", "display_name": "Mousa", "link": "https://stackoverflow.com/users/1385489/mousa"}, "is_accepted": false, "score": 4, "last_activity_date": 1527034882, "creation_date": 1527034882, "answer_id": 50478173, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/50478173#50478173", "title": "Kotlin replace multiple words in string", "body": "<p>If you have many of those replacement rules, then create a mapping of them and call the <code>replace</code> method in a loop:</p>\n\n<pre><code>val map = mapOf(\"his\" to \"here\", \"john\" to \"alles\", ...)\nval sentence = \"welcome his name is John\"\nvar result = sentence\nmap.forEach { t, u -&gt; result = result.replace(t, u) }\nprintln(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55446, "user_id": 8073652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce118b8480086fdd4238693d6291bc8?s=128&d=identicon&r=PG", "display_name": "s1m0nw1", "link": "https://stackoverflow.com/users/8073652/s1m0nw1"}, "is_accepted": false, "score": 8, "last_activity_date": 1527062878, "last_edit_date": 1527062878, "creation_date": 1527061076, "answer_id": 50482498, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/50482498#50482498", "title": "Kotlin replace multiple words in string", "body": "<p>You could write an extension that overloads <code>String::replace</code>:</p>\n\n<pre><code>fun String.replace(vararg replacements: Pair&lt;String, String&gt;): String {\n    var result = this\n    replacements.forEach { (l, r) -&gt; result = result.replace(l, r) }\n    return result\n}\n\n\nfun main(args: Array&lt;String&gt;) {\n    val sentence = \"welcome his name is John\"\n    sentence.replace(\"his\" to \"here\", \"John\" to \"alles\")\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2143, "user_id": 5335131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0bc05182c722756b8acaf61729c808a?s=128&d=identicon&r=PG&f=1", "display_name": "avolkmann", "link": "https://stackoverflow.com/users/5335131/avolkmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1527089963, "creation_date": 1527089963, "answer_id": 50492434, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/50492434#50492434", "title": "Kotlin replace multiple words in string", "body": "<p>Here is a one liner:</p>\n\n<pre><code>fun String.replace(vararg pairs: Pair&lt;String, String&gt;): String =\n    pairs.fold(this) { acc, (old, new) -&gt; acc.replace(old, new, ignoreCase = true) }\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>@Test fun rep() {\n\n    val input = \"welcome his name is John\"\n\n    val output = input.replace(\"his\" to \"her\", \"john\" to \"alles\")\n\n    println(output)\n\n    output shouldBeEqualTo \"welcome her name is alles\"\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2710, "user_id": 997977, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/11f4273f8fdfee80802942d444b4571c?s=128&d=identicon&r=PG", "display_name": "Juan Rada", "link": "https://stackoverflow.com/users/997977/juan-rada"}, "is_accepted": false, "score": 5, "last_activity_date": 1562923585, "last_edit_date": 1562923585, "creation_date": 1562923107, "answer_id": 57003943, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/57003943#57003943", "title": "Kotlin replace multiple words in string", "body": "<p>For the ones interested in replacing a map of values in a text:</p>\n\n<pre><code>private fun replaceText(text: String, keys: Map&lt;String, String&gt;): String =\n    val replaced = map.entries.fold(text) { acc, (key, value) -&gt; acc.replace(key, value) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1132, "user_id": 2462946, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d4deeaa82361fa1b5e16bd0a8a5376ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jossy Paul", "link": "https://stackoverflow.com/users/2462946/jossy-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1593083985, "creation_date": 1593083985, "answer_id": 62574121, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string/62574121#62574121", "title": "Kotlin replace multiple words in string", "body": "<p>The issue with just using replace without any regex is:\nLet's say I want to replace the occurrence of &quot;here&quot; with &quot;there&quot; inside the string &quot;Where is my bag? Your bag is here.&quot; As you can imagine the result will be &quot;Wthere is my bag? Your bag is there.&quot; which will not be correct. The solution is to use a regex like given below.</p>\n<pre><code>    var str = &quot;Where is my bag? Your bag is here.&quot;\n    val replacements = setOf(&quot;\\\\bhere\\\\b&quot; to &quot;there&quot;,\n        &quot;\\\\bjohn\\\\b&quot; to &quot;alles&quot;)\n    replacements.forEach {\n        str = str.replace(Regex(it.first), it.second)\n    }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8345414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oyPBl.jpg?s=128&g=1", "display_name": "GaMal", "link": "https://stackoverflow.com/users/8345414/gamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6381, "favorite_count": 1, "accepted_answer_id": 50478085, "answer_count": 6, "score": 10, "last_activity_date": 1593083985, "creation_date": 1527032429, "question_id": 50477892, "link": "https://stackoverflow.com/questions/50477892/kotlin-replace-multiple-words-in-string", "title": "Kotlin replace multiple words in string", "body": "<p>How to replace many parts of a string with something else in Kotlin using <code>.replace()</code></p>\n\n<p>For example, we can do it only by replacing one word</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n\n    var w_text = \"welcome his name is John\"\n\n    println(\"${w_text.replace(\"his\",\"here\")}\")\n}\n</code></pre>\n\n<p>and the result will be \" welcome here name is John \" .</p>\n\n<p>finally we need the result be \" welcome here name is alles \"</p>\n\n<p>by replacing <strong>his</strong> to <strong>here</strong> and <strong>john</strong> to <strong>alles</strong> using  <code>.replace()</code></p>\n"}, {"tags": ["android", "kotlin", "http-headers", "get-request"], "answers": [{"tags": [], "owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "is_accepted": true, "score": 2, "last_activity_date": 1527039755, "creation_date": 1527039755, "answer_id": 50478670, "question_id": 50477300, "link": "https://stackoverflow.com/questions/50477300/fuel-android-make-non-cached-request/50478670#50478670", "title": "Fuel Android - Make non-cached request", "body": "<p>This is how you add the headers:</p>\n\n<pre><code>url.httpGet().header(Pair(\"pragma\",\"no-cache\"),Pair(\"cache-control\",\"no-cache\")).responseJson //Rest of code goes here\n</code></pre>\n\n<p>You can verify the headers are being sent with the request like so:</p>\n\n<pre><code>url.httpGet().header(Pair(\"pragma\",\"no-cache\"),Pair(\"cache-control\",\"no-cache\")).responseJson { request, _, result -&gt;\n            //Log the request in string format. This will list the headers.\n            Log.d(\"TEST-APP\", request.toString())\n\n            when(result) {\n                is Result.Failure -&gt; {\n                    cont.resumeWithException(result.getException())\n                }\n                is Result.Success -&gt; {\n                    cont.resume(JsonParser().parse(result.value.content) as JsonObject)\n                }\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 4950, "user_id": 3847117, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/625532931d60c1c3a51c51de2bf9f141?s=128&d=identicon&r=PG&f=1", "display_name": "Roymunson", "link": "https://stackoverflow.com/users/3847117/roymunson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 50478670, "answer_count": 1, "score": 0, "last_activity_date": 1527039755, "creation_date": 1527028085, "question_id": 50477300, "link": "https://stackoverflow.com/questions/50477300/fuel-android-make-non-cached-request", "title": "Fuel Android - Make non-cached request", "body": "<p>In Android, I am using <a href=\"https://github.com/kittinunf/Fuel\" rel=\"nofollow noreferrer\">Fuel</a>, a Kotlin library, to fetch a JSON file.\nRight now, my code looks like this (url is a variable of type string):</p>\n\n<pre><code> url.httpGet().responseJson { _, _, result -&gt;\n            when(result) {\n                is Result.Failure -&gt; {\n                    //Do Stuff\n                }\n                is Result.Success -&gt; {\n                    //Do Stuff\n                }\n            }\n        }\n</code></pre>\n\n<p>However, I'd like to fetch an uncached version of the JSON file located at the <code>url</code>. </p>\n\n<p>I read this post: <a href=\"https://stackoverflow.com/questions/29246444/fetch-how-do-you-make-a-non-cached-request?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">fetch(), how do you make a non-cached request?</a> and it seems like I have to add the headers \"pragma: no-cache\" and \"cache-control: no-cache\" to my request. How can I do that?</p>\n\n<p>Also - is there a way for me to verify that those two headers are being sent as part of my request, for debugging purposes? </p>\n\n<p>While my code sample is in Kotlin, I'm fine with answers in Java.</p>\n"}, {"tags": ["android", "kotlin", "observer-pattern", "pagedlist", "android-livedata"], "answers": [{"comments": [{"owner": {"reputation": 1185, "user_id": 8601451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HRP38.jpg?s=128&g=1", "display_name": "Abraham Mathew", "link": "https://stackoverflow.com/users/8601451/abraham-mathew"}, "edited": false, "score": 0, "creation_date": 1587562532, "post_id": 50476194, "comment_id": 108559544, "body": "Tried using this.No use found"}], "tags": [], "owner": {"reputation": 124, "user_id": 6232541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adfc1f5530cb7bc8784d9395f7d3fb2?s=128&d=identicon&r=PG&f=1", "display_name": "katharmoi", "link": "https://stackoverflow.com/users/6232541/katharmoi"}, "is_accepted": false, "score": 1, "last_activity_date": 1527021926, "creation_date": 1527021926, "answer_id": 50476194, "question_id": 50475594, "link": "https://stackoverflow.com/questions/50475594/how-to-observe-a-livedata-only-for-the-new-update-after-the-subscription-to-the/50476194#50476194", "title": "how to observe a liveData only for the new update after the subscription to the liveData", "body": "<p>You can use SingleLiveEvent</p>\n\n<p><a href=\"https://github.com/googlesamples/android-architecture/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java\" rel=\"nofollow noreferrer\">SingleLiveEvent</a></p>\n"}, {"tags": [], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "is_accepted": false, "score": 0, "last_activity_date": 1527253795, "creation_date": 1527253795, "answer_id": 50530026, "question_id": 50475594, "link": "https://stackoverflow.com/questions/50475594/how-to-observe-a-livedata-only-for-the-new-update-after-the-subscription-to-the/50530026#50530026", "title": "how to observe a liveData only for the new update after the subscription to the liveData", "body": "<p>made it work with checking the emitted data list in the <code>RefreshHandler(val observableCachedData: MutableLiveData&lt;List&lt;Data&gt;&gt;)</code>,  only invalidate if there is more added to the list.</p>\n\n<p>(it should look for a better way to determine the datalist has truly increased).</p>\n\n<pre><code>inner class RefreshHandler(val observableCachedData: MutableLiveData&lt;List&lt;Data&gt;&gt;) : Observer&lt;List&lt;Data&gt;&gt; {\n    val oldData = observableCachedData.value\n    override fun onChanged(datalist: List&lt;Data&gt;?) {\n\n        if (datalist.size == oldData.size) {\n             // is from previous cached data in the liveData\n             return\n        }\n\n        observableCachedData.removeObserver(refreshHandler!!)\n        val dataSource = dataSourceFactory.getPositionalDataSource()\n\n        // to start a new PagedList and DataSource pair flow\n        // and trigger the DataSource's loadInitial()\n        dataSource.invalidate()\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 6667, "user_id": 2987953, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c2a6cba46cf5f4c9c7338f324a1d7732?s=128&d=identicon&r=PG&f=1", "display_name": "lannyf", "link": "https://stackoverflow.com/users/2987953/lannyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2939, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1527256055, "creation_date": 1527019142, "last_edit_date": 1527256055, "question_id": 50475594, "link": "https://stackoverflow.com/questions/50475594/how-to-observe-a-livedata-only-for-the-new-update-after-the-subscription-to-the", "title": "how to observe a liveData only for the new update after the subscription to the liveData", "body": "<p>using PagedList,  and here it does not have database back,  but a data list (call it <code>CachedDataList</code>) in the memory which could be filled in by <code>fetchMore()</code> function.</p>\n\n<p>Having the <code>PositionalDataSource</code>, <code>DataSource.Factory</code> and <code>PagedList.BoundaryCallback</code>, it works but one issue here.</p>\n\n<p>The flow is the PositionalDataSource's <code>loadInitial()</code> will be called at beginning to start to load data from the  <code>CachedDataList</code>,  and call <code>loadRange()</code> after that to continue loading data from the  <code>CachedDataList</code> by page size.</p>\n\n<p>When all data from the <code>CachedDataList</code> are paged off, the <code>BoundaryCallback::onItemAtEndLoaded()</code> will be called  (if there is no backing data at beginning then the <code>BoundaryCallback::onZeroItemsLoaded()</code> is called),</p>\n\n<p>In there it will start to asking fetchMore to append more data into the <code>CachedDataList</code>,  and when the new data is appended to it then call the DataSource's <code>invalidate()</code> to restart the new PagedList and DataSource pair, and starting from PositionalDataSource's <code>loadInitial()</code> again.</p>\n\n<p>It is done by </p>\n\n<pre><code>observableCachedData.observe(owner, refreshHandler!!) \n//??? TODO: how to only listen to newly posted data after \n//starting the observe?  \n//DOC: 'If LiveData already has data set, it will be delivered to the observer.'\n\n// fetchMore\nval didFetch = dataRequester.fetchMore()  //asyc call\n</code></pre>\n\n<p>here, it observes the observableCachedData's change, and if there is change then the  <code>onChanged()</code> of the </p>\n\n<pre><code>class RefreshHandler(val observableCachedData: MutableLiveData&lt;List&lt;Data&gt;&gt;) : Observer&lt;List&lt;Data&gt;&gt; {\noverride fun onChanged(datalist: List&lt;Data&gt;?)\n</code></pre>\n\n<p>will be called, and in which to call the DataSource's invalidate()</p>\n\n<p>but the subscription of <code>observableCachedData.observe()</code> causes the <code>refreshHandler</code> called immediately (it's by design as stated in the DOC),  this behavior is not desired here since we want the handler is called when the new data is append to the <code>CachedDataList</code>.</p>\n\n<p>i.e. the <code>CachedDataList</code> had 30 data,  when do fetchMore() there will be another 30 data appended to it, become 60.  But this <code>onChange()</code> is called with data still at 30 (the append has not been coming yet).</p>\n\n<p>Is there a way to subscribe to a live data but only get notified for update that happened after it is subscribed to it?</p>\n\n<pre><code>class DataBoundaryCallback(\n        private val owner: LifecycleOwner,\n        private val dataRequester: FetchMoreRequester,\n        private val dataSourceFactory: DataSourceFactory?\n) : PagedList.BoundaryCallback&lt;IData&gt;() {\n\n    private var hasRequestInProgress = false\n\n    override fun onZeroItemsLoaded() {\n        requestAndSaveData()\n    }\n\n    override fun onItemAtEndLoaded(itemAtEnd: IData) {\n        requestAndSaveData()\n    }\n\n    private fun requestAndSaveData() {\n\n        if (hasRequestInProgress) return\n\n        hasRequestInProgress = true\n\n        // ask dataRequester to fetchMore\n        // setup observer\n\n        val cachedDataList = dataRequester.getCachedLiveData()\n        val observableCachedData = cachedDataList.getLiveData()\n        refreshHandler = RefreshHandler(observableCachedData)\n\n        observableCachedData.observe(owner, refreshHandler!!) //??? TODO: how to only listen to newly posted data after starting the observe?  DOC: 'If LiveData already has data set, it will be delivered to the observer.'\n\n        // fetchMore\n        val didFetch = dataRequester.fetchMore()\n        if (!didFetch) {  //not stated fetch\n            hasRequestInProgress = false\n            observableCachedData.removeObserver(refreshHandler!!)\n        }\n    }\n\n    var refreshHandler : RefreshHandler? = null\n    inner class RefreshHandler(val observableCachedData: MutableLiveData&lt;List&lt;Data&gt;&gt;) : Observer&lt;List&lt;Data&gt;&gt; {\n        override fun onChanged(datalist: List&lt;Data&gt;?) {\n            observableCachedData.removeObserver(refreshHandler!!)\n            val dataSource = dataSourceFactory.getPositionalDataSource()\n\n            // to start a new PagedList and DataSource pair flow\n            // and trigger the DataSource's loadInitial()\n            dataSource.invalidate()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "json", "kotlin", "jackson2"], "answers": [{"tags": [], "owner": {"reputation": 1495, "user_id": 1503554, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ada69b2a87f0732a5b051e769d07b13d?s=128&d=identicon&r=PG", "display_name": "ThisIsNoZaku", "link": "https://stackoverflow.com/users/1503554/thisisnozaku"}, "is_accepted": false, "score": 1, "last_activity_date": 1527019025, "creation_date": 1527019025, "answer_id": 50475568, "question_id": 50475405, "link": "https://stackoverflow.com/questions/50475405/jackson-kotlin-cannot-deserialize-instance-of-java-util-arraylist-out-of-sta/50475568#50475568", "title": "jackson kotlin - Cannot deserialize instance of `java.util.ArrayList` out of START_OBJECT token", "body": "<p>The problem is that the array you're trying to get at is wrapped in an object, which you're feeding into Jackson and asking for a List back. JSON object-to-Java List isn't a translation that Jackson understands, so it's choking.</p>\n\n<p>I would create a class that wraps that List and try deserializing to that.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 5, "last_activity_date": 1527091129, "last_edit_date": 1527091129, "creation_date": 1527090488, "answer_id": 50492616, "question_id": 50475405, "link": "https://stackoverflow.com/questions/50475405/jackson-kotlin-cannot-deserialize-instance-of-java-util-arraylist-out-of-sta/50492616#50492616", "title": "jackson kotlin - Cannot deserialize instance of `java.util.ArrayList` out of START_OBJECT token", "body": "<p>You need to have an outer object that matches the top level of the JSON.  In this case change your code to:</p>\n\n\n\n<pre><code>data class ActivityConfig(\n    @JsonProperty(\"activities-steps\") val steps: List&lt;ActivitiesSteps&gt; = emptyList()\n)\n\ndata class ActivitiesSteps(var dateTime: String, var value: String)\n\nval stepsList = mapper.readValue&lt;ActivityConfig&gt;(jsonSteps).steps\n</code></pre>\n\n<p>You can use default values with the Jackson Kotin module if you want the list to always be present, and also you do not need <code>var</code> members in the data class if you want, <code>val</code> work fine with Jackson as well unless you really want to mutate the values.</p>\n"}], "owner": {"reputation": 357, "user_id": 7175503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qwHqN.jpg?s=128&g=1", "display_name": "&#193;ngel Rodr&#237;guez", "link": "https://stackoverflow.com/users/7175503/%c3%81ngel-rodr%c3%adguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1805, "favorite_count": 0, "accepted_answer_id": 50492616, "answer_count": 2, "score": 2, "last_activity_date": 1527091129, "creation_date": 1527018292, "last_edit_date": 1527021772, "question_id": 50475405, "link": "https://stackoverflow.com/questions/50475405/jackson-kotlin-cannot-deserialize-instance-of-java-util-arraylist-out-of-sta", "title": "jackson kotlin - Cannot deserialize instance of `java.util.ArrayList` out of START_OBJECT token", "body": "<p>I am getting a json string from Fitbit API. I want to save dateTime and value fields in a List object. I\u00b4m using jackson module kotlin. I have created ActivitiesSteps data class for this.</p>\n\n<p>I don\u00b4t know how to avoid \"activities-steps\" field and I\u00b4m getting stucked.</p>\n\n<p>This is the JSON body(provided in variable 'jsonSteps' to readValue method in my code below):</p>\n\n<pre><code>  {  \n   \"activities-steps\":[  \n      {  \n         \"dateTime\":\"2018-04-17\",\n         \"value\":\"11045\"\n      },\n      {  \n         \"dateTime\":\"2018-04-18\",\n         \"value\":\"14324\"\n      },\n      {  \n         \"dateTime\":\"2018-05-16\",\n         \"value\":\"11596\"\n      }\n   ]\n}\n</code></pre>\n\n<p>Here is my class to save my data: </p>\n\n<pre><code>data class ActivitiesSteps(var dateTime: String, var value: String)\n</code></pre>\n\n<p>Here is my code using jackson:</p>\n\n<pre><code>val mapper = jacksonObjectMapper()\nval stepsList = mapper.readValue&lt;List&lt;ActivitiesSteps&gt;&gt;(jsonSteps)\n</code></pre>\n\n<p>And the following exception is thrown:</p>\n\n<pre><code>Exception in thread \"main\" com.fasterxml.jackson.databind.exc.MismatchedInputException: \nCannot deserialize instance of `java.util.ArrayList` out of \nSTART_OBJECT token at \n\n[Source: (String)\"{\"activities-steps\":[\n{\"dateTime\":\"2018-04-17\",\"value\":\"11045\"},\n{\"dateTime\":\"2018-04-25\",\"value\":\"8585\"},\n{\"dateTime\":\"2018-04-26\",\"value\":\"11218\"},\n{\"dateTime\":\"2018-04-27\",\"value\":\"10462\"},\n{\"dateTime\":\"2018-04\"[truncated 762 chars]; line: 1, column: 1]\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9830359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01b79387c6fee1cc5e426992b320a52c?s=128&d=identicon&r=PG&f=1", "display_name": "CC.", "link": "https://stackoverflow.com/users/9830359/cc"}, "edited": false, "score": 0, "creation_date": 1527015803, "post_id": 50474459, "comment_id": 87963106, "body": "Thanks for your reply.  After I moved the code as suggested to app folder build.gradle file and try to add Database.connect(jdbc:h2:mem:test&quot;, driver = &quot;org.h2.Driver&quot;) into my project, I am getting 10 errors: eg, Unexpected type specification, expecting &#39;)&#39;, expecting an element, unresolved reference:jdbc and etc.  Do you have any idea what would be the root caused?"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 33, "user_id": 9830359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01b79387c6fee1cc5e426992b320a52c?s=128&d=identicon&r=PG&f=1", "display_name": "CC.", "link": "https://stackoverflow.com/users/9830359/cc"}, "edited": false, "score": 0, "creation_date": 1527016092, "post_id": 50474459, "comment_id": 87963248, "body": "I think you should post any issues related to actually using the library as separate questions, as they are no longer related to this question about the Gradle dependencies.."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1527014836, "last_edit_date": 1527014836, "creation_date": 1527014479, "answer_id": 50474459, "question_id": 50474422, "link": "https://stackoverflow.com/questions/50474422/android-studio-importing-jetbrains-exposed/50474459#50474459", "title": "Android Studio importing Jetbrains Exposed", "body": "<p>You should put this dependency in the module level <code>build.gradle</code> file - by default, this is in the <code>app</code> folder, as opposed to the project level <code>build.gradle</code> file, which is in the root of your project.</p>\n\n<p>Also, you should use <code>implementation</code> instead of <code>compile</code>, since you're using a newer than 3.0 version of the Android Gradle plugin:</p>\n\n<pre><code>repositories {\n    maven {\n        url  \"https://dl.bintray.com/kotlin/exposed\"\n    }\n}\n\ndependencies {\n    implementation 'org.jetbrains.exposed:exposed:0.10.2'\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9830359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01b79387c6fee1cc5e426992b320a52c?s=128&d=identicon&r=PG&f=1", "display_name": "CC.", "link": "https://stackoverflow.com/users/9830359/cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 50474459, "answer_count": 1, "score": 3, "last_activity_date": 1527014836, "creation_date": 1527014385, "question_id": 50474422, "link": "https://stackoverflow.com/questions/50474422/android-studio-importing-jetbrains-exposed", "title": "Android Studio importing Jetbrains Exposed", "body": "<p>I am new to Android development.  I have created a new project with Android Studio and need to import jetbrains exposed library into my existing project.  When I tried to follow the exposed Getting Started guide to add the following into the build.grade file:</p>\n\n<pre><code>repositories {\n  maven {\n    url  \"https://dl.bintray.com/kotlin/exposed\" \n  }\n}\ndependencies {\n  compile 'org.jetbrains.exposed:exposed:0.10.2'\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Could not find method compile() for arguments [org.jetbrains.exposed:exposed:0.10.2] on object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.\n</code></pre>\n\n<p>I have been searching the internet for a couple of days now but still could not find out what's the problem.  </p>\n\n<p>This is the build.gradle file:</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.2.40'\n    repositories {\n        google()\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.2'\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        jcenter()\n    }\n}\n\nrepositories {\n    maven {\n        url  \"https://dl.bintray.com/kotlin/exposed\"\n    }\n}\n\ndependencies {\n    compile 'org.jetbrains.exposed:exposed:0.10.2'\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n\n<p>Hopefully someone could help me.  </p>\n\n<p>Thanking in advance.</p>\n"}, {"tags": ["kotlin", "org.json"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 2, "last_activity_date": 1527012536, "creation_date": 1527012536, "answer_id": 50473993, "question_id": 50473906, "link": "https://stackoverflow.com/questions/50473906/java-kotlin-parse-json-object-bug/50473993#50473993", "title": "Java/Kotlin: Parse JSON Object bug", "body": "<p>Since the keys you're using don't refer to nested objects inside your top level JSON object, you should use methods other than <code>getJSONObject</code> to access them.</p>\n\n<p>For example, for the <code>deliverable</code> field, which is a boolean value:</p>\n\n<pre><code>val deliverable: Boolean = jsonObj.getBoolean(\"deliverable\")\n</code></pre>\n\n<p>Or for the <code>address</code> field, a string:</p>\n\n<pre><code>val address: String = jsonObj.getString(\"address\")\n</code></pre>\n\n<hr>\n\n<p>The valid use case for <code>getJSONObject</code> would be when you have a nested object like this:</p>\n\n<pre><code>{\n    \"nested\": {\n        \"foo\": \"bar\"\n    }\n}\n</code></pre>\n\n<p>Here you could do <code>jsonObj.getJSONObject(\"nested\").getString(\"foo\")</code>, for example.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9172697"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527091525, "creation_date": 1527012205, "last_edit_date": 1527091525, "question_id": 50473906, "link": "https://stackoverflow.com/questions/50473906/java-kotlin-parse-json-object-bug", "title": "Java/Kotlin: Parse JSON Object bug", "body": "<p>I have a text json that I recover from an API, but I can not decode it, because in the json I have only one object and not several: </p>\n\n<pre><code>{  \n   \"address\": \"mickaelnanah@gmail.com\",\n   \"username\": \"mickaelnanah\",\n   \"domain\": \"gmail.com\",\n   \"md5Hash\": \"0f6082627bfdeb56a3792f52ce8f0cb8\",\n   \"validFormat\": true,\n   \"deliverable\": true,\n   \"fullInbox\": false,\n   \"hostExists\": true,\n   \"catchAll\": false,\n   \"disposable\": false,\n   \"free\": true\n}\n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>val jsonObj = JSONObject(jSonString.substring(jSonString.indexOf(\"{\"), jSonString.lastIndexOf(\"}\") + 1))\nval mail = Email(jsonObj.getJSONObject(\"deliverable\") as String)\nprintln(mail.email)\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" org.json.JSONException:\n  JSONObject[\"deliverable\"] is not a JSONObject.</p>\n</blockquote>\n\n<p>I understand the error, it's because I do not have a name to the object, how can I directly take the fields?</p>\n\n<p><strong>SOLVED:</strong></p>\n\n<pre><code>val jsonObj = JSONObject(jSonString.substring(jSonString.indexOf(\"{\"), jSonString.lastIndexOf(\"}\") + 1))\n\n            val mail: String = jsonObj.get(\"deliverable\").toString()\n</code></pre>\n"}, {"tags": ["android", "firebase", "kotlin", "kotlinx.coroutines"], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1549342884, "post_id": 50473752, "comment_id": 95857709, "body": "how to return the value from this function? @zsmb13  both of the function needs to be called inside async.  e.g:  <code>val tokenFirebase: String = FirebaseInstanceId.getInstance().instanceId.asDeferred().awa&zwnj;&#8203;it().token</code>  and <code>val tokenFirebase: String = FirebaseInstanceId.getInstance().instanceId.await().token</code>  // await() show a warning, instead: suspend function &#39;await&#39; should be called only from a coroutine or another suspend function"}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "reply_to_user": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1549346993, "post_id": 50473752, "comment_id": 95858834, "body": "Yes, both the <code>await</code> on <code>Deferred</code> and the <code>await</code> presented in my answer needs to be called inside a coroutine, as they are suspending functions. I&#39;m not really sure what you&#39;re asking though. If you&#39;re asking how to start a coroutine, you should see the <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md\" rel=\"nofollow noreferrer\">coroutine guide</a>."}, {"owner": {"reputation": 761, "user_id": 3763032, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/667ae3c0db85f45c13ba6a9fa845a371?s=128&d=identicon&r=PG", "display_name": "mochadwi", "link": "https://stackoverflow.com/users/3763032/mochadwi"}, "edited": false, "score": 0, "creation_date": 1549348347, "post_id": 50473752, "comment_id": 95859273, "body": "In my case, I want to get the token from firebase, but how to return value from async coroutines.  I&#39;ve tried this:  <code>val newToken: String by lazy {     val token = with(FirebaseInstanceId.getInstance().instanceId) {         &#47;*GlobalScope.async { asDeferred().await() }*&#47; &#47;&#47; for what? we await() this?         if (asDeferred().isCompleted &amp;&amp; result != null &amp;&amp; isSuccessful) result?.token ?: &quot;&quot;         else &quot;&quot;     }      token } </code>  @zsmb13  but the blank or empty string still returned, instead, or did I use the wrong ways? thanks"}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 11, "last_activity_date": 1540363647, "last_edit_date": 1540363647, "creation_date": 1527011546, "answer_id": 50473752, "question_id": 50473637, "link": "https://stackoverflow.com/questions/50473637/how-to-transform-an-android-task-to-a-kotlin-deferred/50473752#50473752", "title": "How to transform an Android Task to a Kotlin Deferred?", "body": "<p>Based on <a href=\"https://github.com/lucasvalenteds/firebase-admin-coroutines/blob/main/firebase-tasks/src/main/kotlin/kotlinx/coroutines/experimental/firebase/tasks/TaskApi.kt\" rel=\"noreferrer\">this GitHub library</a>, here's a way to transform a <code>Task</code> into a suspending function in the <a href=\"https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md#suspending-functions\" rel=\"noreferrer\">\"usual\" way</a> to adapt callback based async calls to coroutines:</p>\n\n<pre><code>suspend fun &lt;T&gt; Task&lt;T&gt;.await(): T = suspendCoroutine { continuation -&gt;\n    addOnCompleteListener { task -&gt;\n        if (task.isSuccessful) {\n            continuation.resume(task.result)\n        } else {\n            continuation.resumeWithException(task.exception ?: RuntimeException(\"Unknown task exception\"))\n        }\n    }\n}\n</code></pre>\n\n<p>You can also wrap it in a <code>Deferred</code> of course, <code>CompletableDeferred</code> comes in handy here:</p>\n\n<pre><code>fun &lt;T&gt; Task&lt;T&gt;.asDeferred(): Deferred&lt;T&gt; {\n    val deferred = CompletableDeferred&lt;T&gt;()\n\n    deferred.invokeOnCompletion {\n        if (deferred.isCancelled) {\n            // optional, handle coroutine cancellation however you'd like here\n        }\n    }\n\n    this.addOnSuccessListener { result -&gt; deferred.complete(result) }\n    this.addOnFailureListener { exception -&gt; deferred.completeExceptionally(exception) }\n\n    return deferred\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 4224811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mokgf.jpg?s=128&g=1", "display_name": "Gabriel Vasconcelos", "link": "https://stackoverflow.com/users/4224811/gabriel-vasconcelos"}, "is_accepted": false, "score": 3, "last_activity_date": 1527632022, "creation_date": 1527632022, "answer_id": 50593747, "question_id": 50473637, "link": "https://stackoverflow.com/questions/50473637/how-to-transform-an-android-task-to-a-kotlin-deferred/50593747#50593747", "title": "How to transform an Android Task to a Kotlin Deferred?", "body": "<p>To transform it into a coroutine-ready function, I would use the <code>Tasks.await()</code> function from the Tasks API:</p>\n\n<pre><code>suspend fun FirebaseAuth.signInAnonymouslyAwait(): AuthResult {\n    return Tasks.await(this.signInAnonymously())\n}\n</code></pre>\n\n<p>As for Deferred, i'd stick with zsmb13's answer</p>\n"}, {"comments": [{"owner": {"reputation": 136, "user_id": 6316916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kXLPb.gif?s=128&g=1", "display_name": "RickSanchez725", "link": "https://stackoverflow.com/users/6316916/ricksanchez725"}, "edited": false, "score": 2, "creation_date": 1603999596, "post_id": 58678891, "comment_id": 114221204, "body": "For those looking for the maven repository, it&#39;s  <a href=\"https://mvnrepository.com/artifact/org.jetbrains.kotlinx/kotlinx-coroutines-play-services\" rel=\"nofollow noreferrer\">kotlinx-coroutines-play-services</a>"}, {"owner": {"reputation": 329, "user_id": 1029110, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/848dddf45049a20abe5ddab0ed6543d1?s=128&d=identicon&r=PG", "display_name": "Rahul Kahale", "link": "https://stackoverflow.com/users/1029110/rahul-kahale"}, "edited": false, "score": 0, "creation_date": 1614627807, "post_id": 58678891, "comment_id": 117437615, "body": "Blog explanation here <a href=\"https://betterprogramming.pub/how-to-use-kotlin-coroutines-with-firebase-6f8577a3e00f\" rel=\"nofollow noreferrer\">betterprogramming.pub/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6835, "user_id": 6305235, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kEy0G.jpg?s=128&g=1", "display_name": "David Miguel", "link": "https://stackoverflow.com/users/6305235/david-miguel"}, "is_accepted": true, "score": 15, "last_activity_date": 1572774383, "last_edit_date": 1572774383, "creation_date": 1572773537, "answer_id": 58678891, "question_id": 50473637, "link": "https://stackoverflow.com/questions/50473637/how-to-transform-an-android-task-to-a-kotlin-deferred/58678891#58678891", "title": "How to transform an Android Task to a Kotlin Deferred?", "body": "<p>The package <a href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/integration/kotlinx-coroutines-play-services/src/Tasks.kt#L80\" rel=\"noreferrer\"><code>kotlinx.coroutines.tasks</code></a> now includes the follwing utility functions:</p>\n\n<pre><code>public suspend fun &lt;T&gt; Task&lt;T&gt;.await(): T { ... }\n</code></pre>\n\n<p>From the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-play-services/kotlinx.coroutines.tasks/com.google.android.gms.tasks.-task/await.html\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Awaits for completion of the task without blocking a thread.<br>\n  This suspending function is cancellable.<br>\n  If the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/index.html\" rel=\"noreferrer\">Job</a> of the current coroutine is cancelled or completed while this suspending function is waiting, this function stops waiting for the completion stage and immediately resumes with <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-cancellation-exception.html\" rel=\"noreferrer\">CancellationException</a>.</p>\n</blockquote>\n\n<pre><code>public fun &lt;T&gt; Task&lt;T&gt;.asDeferred(): Deferred&lt;T&gt; { ... }\n</code></pre>\n\n<p>From the <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-play-services/kotlinx.coroutines.tasks/com.google.android.gms.tasks.-task/as-deferred.html\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Converts this task to an instance of <a href=\"https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-deferred/index.html\" rel=\"noreferrer\">Deferred</a>.<br>\n  If task is cancelled then resulting deferred will be cancelled as well.</p>\n</blockquote>\n\n<hr>\n\n<p>So you can just do:</p>\n\n<pre><code>suspend fun signInAnonymouslyAwait(): AuthResult {\n    return FirebaseAuth.getInstance().signInAnonymously().await()\n}\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>fun signInAnonymouslyDeferred(): Deferred&lt;AuthResult&gt; {\n    return FirebaseAuth.getInstance().signInAnonymously().asDeferred()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 10213096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c4395e90802b6fc5d0fd26a1352660?s=128&d=identicon&r=PG&f=1", "display_name": "Cyber Gh", "link": "https://stackoverflow.com/users/10213096/cyber-gh"}, "is_accepted": false, "score": 0, "last_activity_date": 1615289171, "creation_date": 1615289171, "answer_id": 66546010, "question_id": 50473637, "link": "https://stackoverflow.com/questions/50473637/how-to-transform-an-android-task-to-a-kotlin-deferred/66546010#66546010", "title": "How to transform an Android Task to a Kotlin Deferred?", "body": "<p>Add this to gradle</p>\n<pre><code>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-play-services:1.4.3'\n</code></pre>\n<p>And then you can use it like this:</p>\n<pre><code>suspend fun login(email: String, pass: String) {\n    FirebaseAuth.getInstance().signInWithEmailAndPassword(email, pass).await()\n}\n</code></pre>\n"}], "owner": {"reputation": 4653, "user_id": 2886392, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3092288cd40a9e9821ec2a6aeb282b15?s=128&d=identicon&r=PG", "display_name": "JP Ventura", "link": "https://stackoverflow.com/users/2886392/jp-ventura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4381, "favorite_count": 4, "accepted_answer_id": 58678891, "answer_count": 4, "score": 14, "last_activity_date": 1615289171, "creation_date": 1527011070, "last_edit_date": 1543154580, "question_id": 50473637, "link": "https://stackoverflow.com/questions/50473637/how-to-transform-an-android-task-to-a-kotlin-deferred", "title": "How to transform an Android Task to a Kotlin Deferred?", "body": "<p>Firebase anonymous sign in returns a <a href=\"https://developers.google.com/android/guides/tasks\" rel=\"noreferrer\">task</a> (which is basically <a href=\"https://en.wikipedia.org/wiki/Futures_and_promises\" rel=\"noreferrer\">Google promise implementation</a>):</p>\n\n<pre><code>val task:Task&lt;AuthResult&gt; = FirebaseAuth.getInstance().signInAnonymously()\n</code></pre>\n\n<p>How it would be possible create a <code>signInAnonymous</code> wrapper where:</p>\n\n<ul>\n<li><p>It is a <code>suspend</code> function, waiting for the <code>task</code> completion</p>\n\n<ul>\n<li><code>suspend fun signInAnonymous(): Unit</code></li>\n</ul></li>\n<li><p>It returns a <code>Deferred</code> object, delivering the result asynchronously </p>\n\n<ul>\n<li><code>fun signInAnonymous() : Deferred</code></li>\n</ul></li>\n</ul>\n"}, {"tags": ["android", "android-studio", "kotlin", "android-jetpack"], "comments": [{"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1527014242, "post_id": 50472779, "comment_id": 87962327, "body": "Try clicking that button two to the right of that rocket thing on the right (Gradle Sync) and see if that helps"}, {"owner": {"reputation": 3687, "user_id": 6346554, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/y8FJF.jpg?s=128&g=1", "display_name": "touseefbsb", "link": "https://stackoverflow.com/users/6346554/touseefbsb"}, "reply_to_user": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1527017521, "post_id": 50472779, "comment_id": 87963885, "body": "it totally worked, please put it as an answer so I can mark it as accepted :)"}], "answers": [{"tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 0, "last_activity_date": 1527030690, "creation_date": 1527030690, "answer_id": 50477665, "question_id": 50472779, "link": "https://stackoverflow.com/questions/50472779/android-jetpack-getting-started-project-cant-run/50477665#50477665", "title": "android jetpack getting started project cant run", "body": "<p>Try clicking that button two to the right of that rocket thing on the right (Gradle Sync) and see if that helps </p>\n"}], "owner": {"reputation": 3687, "user_id": 6346554, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/y8FJF.jpg?s=128&g=1", "display_name": "touseefbsb", "link": "https://stackoverflow.com/users/6346554/touseefbsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 50477665, "answer_count": 1, "score": 2, "last_activity_date": 1576070174, "creation_date": 1527007665, "question_id": 50472779, "link": "https://stackoverflow.com/questions/50472779/android-jetpack-getting-started-project-cant-run", "title": "android jetpack getting started project cant run", "body": "<p>I am new to android development and just created my first \"hello world\" project in android studio 3.2 ( canary ) following this tutorial. <a href=\"https://developer.android.com/jetpack/docs/getting-started\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/docs/getting-started</a></p>\n\n<p>and then I just did Build- > make project project tried to build and gave me following error.</p>\n\n<blockquote>\n  <p>Could not get unknown property 'archLifecycleVersion' for root project 'JetpackHelloWorld' of type org.gradle.api.Project.</p>\n</blockquote>\n\n<p>but I was able to solve that error with help of answers on a question I posted. \n<a href=\"https://stackoverflow.com/questions/50329891/android-jetpack-project-gives-archlifecycleversion-build-error\">android jetpack project gives archlifecycleversion build error</a></p>\n\n<p>after that error was solved I tried to build again and now I have the following error.</p>\n\n<blockquote>\n  <p>the '-d' option with a directory destination is ignored because '-Xbuild-file' is specified</p>\n</blockquote>\n\n<p><strong>Run is disabled</strong></p>\n\n<p>as you can see in the screenshot, run option of the app is disabled and it asks me to edit configuration if I click on the drop down, what kind of configurations I am supposed to do in a empty project? </p>\n\n<p><a href=\"https://i.stack.imgur.com/Q1f7i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q1f7i.png\" alt=\"run disabled\"></a></p>\n\n<blockquote>\n  <p>but then I clicked on Edit Configurations and added a android application configuration, but at the point of selecting <strong>modules</strong> there was no modules in drop down list to select from, and now I cant run my app because i get the error \"confuguration is not valid\" I also see a red cross icon on my app name near the run button, I think that is because I have not selected a module? but how can I select one when there isnt any?</p>\n</blockquote>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 4, "last_activity_date": 1527008504, "last_edit_date": 1527008504, "creation_date": 1527008177, "answer_id": 50472915, "question_id": 50472628, "link": "https://stackoverflow.com/questions/50472628/how-to-fill-varargs-with-range/50472915#50472915", "title": "How to fill varargs with range?", "body": "<p>Yeah, ranges are really far from arrays in this sense, it's rather hard to pass them in as <code>vararg</code> parameters.</p>\n\n<hr>\n\n<p>You could create a function to convert them to <code>IntArray</code> instances one step quicker:</p>\n\n<pre><code>fun IntRange.toIntArray() = this.toList().toIntArray()\n\nm.getColumns(*(count..count + 35).toIntArray())\n</code></pre>\n\n<p>A slightly better optimized version of this conversion:</p>\n\n<pre><code>fun IntRange.toIntArray(): IntArray {\n    val size = this.last - this.first + 1\n    var current = this.first\n    return IntArray(size) { current++ }\n}\n</code></pre>\n\n<hr>\n\n<p>Or you could define an overloaded function that takes an <code>IntRange</code> and does the conversion to call the original:</p>\n\n<pre><code>fun getColumns(range: IntRange) = getColumns(*range.toList().toIntArray())\n</code></pre>\n\n<p>Again, this could also make use of the conversion method above for better performance:</p>\n\n<pre><code>fun getColumns(range: IntRange) = getColumns(*range.toIntArray())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": false, "score": 1, "last_activity_date": 1527008608, "last_edit_date": 1527008608, "creation_date": 1527008298, "answer_id": 50472948, "question_id": 50472628, "link": "https://stackoverflow.com/questions/50472628/how-to-fill-varargs-with-range/50472948#50472948", "title": "How to fill varargs with range?", "body": "<p>You call varargs method with either a number of comma separated variables or with an array.</p>\n\n<p>Unfortunately, there is no shortcut to making array from a range.</p>\n\n<p>But, you can create an array directly:</p>\n\n<pre><code>m.getColumns(*IntArray(35) { count + it })\n</code></pre>\n"}], "owner": {"reputation": 4086, "user_id": 1551603, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/gILwn.jpg?s=128&g=1", "display_name": "Yarh", "link": "https://stackoverflow.com/users/1551603/yarh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 1, "accepted_answer_id": 50472915, "answer_count": 2, "score": 4, "last_activity_date": 1527008608, "creation_date": 1527006994, "question_id": 50472628, "link": "https://stackoverflow.com/questions/50472628/how-to-fill-varargs-with-range", "title": "How to fill varargs with range?", "body": "<p>What is a proper way to fill varargs? My attempt looks like a bycile\nat fist i construct range<br>\nthen i convert it to list<br>\nthen to intarray<br>\nthen spread it  </p>\n\n<pre><code>m.getColumns(*((count.. count + 35).toList().toIntArray()))\n</code></pre>\n\n<p>where getColums is a method which accepts colums indexes as varargs</p>\n"}, {"tags": ["kotlin", "observable"], "comments": [{"owner": {"reputation": 949, "user_id": 3462533, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7268d03682ed4b7f93ad44b623619992?s=128&d=identicon&r=PG&f=1", "display_name": "Derekyy", "link": "https://stackoverflow.com/users/3462533/derekyy"}, "edited": false, "score": 0, "creation_date": 1527092175, "post_id": 50471602, "comment_id": 87999065, "body": "Wow thanks, someone is very cautious of syntax."}], "answers": [{"comments": [{"owner": {"reputation": 949, "user_id": 3462533, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7268d03682ed4b7f93ad44b623619992?s=128&d=identicon&r=PG&f=1", "display_name": "Derekyy", "link": "https://stackoverflow.com/users/3462533/derekyy"}, "edited": false, "score": 1, "creation_date": 1527053677, "post_id": 50471824, "comment_id": 87974181, "body": "Thx, that&#39;s what I want. Maybe I am greedy \ud83d\ude01"}, {"owner": {"reputation": 5911, "user_id": 1835650, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/46VRA.jpg?s=128&g=1", "display_name": "TeeTracker", "link": "https://stackoverflow.com/users/1835650/teetracker"}, "edited": false, "score": 0, "creation_date": 1550531082, "post_id": 50471824, "comment_id": 96294781, "body": "findBugs would warn this approach as well, it is not a bug free one."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1527004210, "creation_date": 1527004210, "answer_id": 50471824, "question_id": 50471602, "link": "https://stackoverflow.com/questions/50471602/how-to-ensure-non-null-value-is-set-to-an-initially-null-property-while-perform/50471824#50471824", "title": "How to ensure non-null value is set to an initially null property, while perform action upon value being set?", "body": "<p>Oddly enough, it sounds like you need some of the functionality of all three of the standard library delegates - <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/observable.html\" rel=\"nofollow noreferrer\"><code>observable</code></a>, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/vetoable.html\" rel=\"nofollow noreferrer\"><code>vetoable</code></a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.properties/-delegates/not-null.html\" rel=\"nofollow noreferrer\"><code>notNull</code></a> - in the same property.</p>\n\n<p>Writing your own delegate for this as you've mentioned is indeed a great idea, here's one implementation based on <code>ObservableProperty</code> (if I understood your requirements correctly):</p>\n\n<pre><code>public inline fun &lt;T: Any&gt; initialNull(crossinline onChange: (oldValue: T?, newValue: T) -&gt; Unit): ObservableProperty&lt;T?&gt; {\n    return object: ObservableProperty&lt;T?&gt;(null) {\n        override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T?) {\n            value ?: return\n            super.setValue(thisRef, property, value)\n        }\n\n        override fun afterChange(property: KProperty&lt;*&gt;, oldValue: T?, newValue: T?) {\n            onChange(oldValue, newValue!!) // ugly but safe !!\n        }\n    }\n}\n</code></pre>\n\n<p>Usage looks like:</p>\n\n<pre><code>var initialNull by initialNull&lt;String&gt; { oldValue, newValue -&gt;\n    println(\"Changed from $oldValue to $newValue\")\n}\n\ninitialNull = \"Foo\" // Changed from null to Foo\ninitialNull = null\ninitialNull = \"Bar\" // Changed from Foo to Bar\n</code></pre>\n"}], "owner": {"reputation": 949, "user_id": 3462533, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/7268d03682ed4b7f93ad44b623619992?s=128&d=identicon&r=PG&f=1", "display_name": "Derekyy", "link": "https://stackoverflow.com/users/3462533/derekyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 50471824, "answer_count": 1, "score": 1, "last_activity_date": 1527004387, "creation_date": 1527003453, "last_edit_date": 1527004387, "question_id": 50471602, "link": "https://stackoverflow.com/questions/50471602/how-to-ensure-non-null-value-is-set-to-an-initially-null-property-while-perform", "title": "How to ensure non-null value is set to an initially null property, while perform action upon value being set?", "body": "<p>Assume there is a property which is null at first, I want to ensure that only non-nullable value set be set to this property. Besides, I want to perform some actions each time after this property is set.\nI. I realized that if I am using Delegates.observable, I have to check internally that if the value is null before performing some action, and that I cannot avoid that null is set to the value (I can only observe when the value is setted already, not before)\nii. I cannot use lateinit, since then I cannot observe when the value is being set (setter syntax cannot work with lateinit)</p>\n\n<p>What I can think of is to have a custom setter function for that value, and declare the parameter as non-nullable.\nLike below:</p>\n\n<pre><code>class Test {\n    private var initialNull: String? = null\n\n    private fun setInitial(nonNullValue: String) {\n        initialNull = nonNullValue\n        onInitialSet()\n    }\n}\n</code></pre>\n\n<p>Do you think it is a good idea?</p>\n\n<p>I though of another idea that, I could create a custom ReadWriteProperty, e.g. NonNullableSetterObservable (initialValue), where null can be passed to initialValue at first, yet only non-null value can be set later on. Is it a good idea?</p>\n"}, {"tags": ["android", "kotlin", "android-jobscheduler", "jobservice"], "comments": [{"owner": {"reputation": 8825, "user_id": 9552485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64199688cf1f452ad34b279db836038?s=128&d=identicon&r=PG&f=1", "display_name": "Pritish", "link": "https://stackoverflow.com/users/9552485/pritish"}, "edited": false, "score": 0, "creation_date": 1527004076, "post_id": 50471460, "comment_id": 87957030, "body": "Did you declare the service tag in the manifest?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1527012009, "post_id": 50471460, "comment_id": 87961285, "body": "<a href=\"https://stackoverflow.com/questions/38344220/job-scheduler-not-running-on-android-n\" title=\"job scheduler not running on android n\">stackoverflow.com/questions/38344220/&hellip;</a> ?"}, {"owner": {"reputation": 3056, "user_id": 15848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef50ae4032124f87927d917ac713ee3b?s=128&d=identicon&r=PG", "display_name": "Luis Abreu", "link": "https://stackoverflow.com/users/15848/luis-abreu"}, "edited": false, "score": 0, "creation_date": 1527012139, "post_id": 50471460, "comment_id": 87961345, "body": "That was problem number 1...my problem is that the async task isn&#39;t running in the background..."}, {"owner": {"reputation": 3056, "user_id": 15848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef50ae4032124f87927d917ac713ee3b?s=128&d=identicon&r=PG", "display_name": "Luis Abreu", "link": "https://stackoverflow.com/users/15848/luis-abreu"}, "edited": false, "score": 0, "creation_date": 1527028988, "post_id": 50471460, "comment_id": 87968402, "body": "Restarted the emulator and guess what? It&#39;s working flawlessly now..."}], "owner": {"reputation": 3056, "user_id": 15848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ef50ae4032124f87927d917ac713ee3b?s=128&d=identicon&r=PG", "display_name": "Luis Abreu", "link": "https://stackoverflow.com/users/15848/luis-abreu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 923, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527007628, "creation_date": 1527003034, "question_id": 50471460, "link": "https://stackoverflow.com/questions/50471460/jobscheduler-using-asynctask-does-not-end-up-calling-doinbackground", "title": "JobScheduler: using AsyncTask does not end up calling doInBackground", "body": "<p>Kotlin and Android rookie here...</p>\n\n<p>I'm trying to create a job but I'm having some trobule gettint my async task to run. Here's my JobService:</p>\n\n<pre><code>class DbUpdaterJob: JobService(){\nprivate var activityMessenger: Messenger? = null\nprivate var isWorking = false\nprivate var cancelled = false\n\noverride fun onStartCommand(intent: Intent?, flags: Int, startId: Int): Int {\n    //receive messenger used to get info back to the ui thread of activity\n    activityMessenger = intent?.getParcelableExtra(MESSENGER_DB_UPDATE_KEY)\n    return Service.START_NOT_STICKY\n}\n\noverride fun onStartJob(params: JobParameters?): Boolean {\n    //asynctasks in order not to lock main thread\n    object: AsyncTask&lt;Void, Void, Boolean&gt;(){\n        override fun onPreExecute() {\n            super.onPreExecute()\n        }\n        override fun doInBackground(vararg params: Void?): Boolean {\n    isWorking = true\n    //do something\n            return true\n        } \n        override fun onPostExecute(result: Boolean?) {\n            isWorking = false\n            jobFinished(params, false)\n            //notify of update on main thread\n            if(result!!){\n                notifyActivity()\n            }\n        }\n\n    }.execute()\n\n    return true\n}\noverride fun onStopJob(params: JobParameters?): Boolean {\n    cancelled = true\n    //if still working, must reschedule\n    jobFinished(params, isWorking)\n    return isWorking\n}\nprivate fun notifyActivity(){\n    val msg = Message.obtain()\n    msg.run {\n        what = MSG_DB_UPDATED\n    }\n    activityMessenger?.send(msg)\n}\n\n}\n</code></pre>\n\n<p>The idea is to put a couple of web services calls and local db code in the doInBackground. Unfortunately, it never gets called...Can someone please give some pointers on what I'm missing? I've also tried to rewrite the code with threads but still haven't got any luck with it. Not sure if it's important, but here's the code I'm using to schedule the job:</p>\n\n<pre><code>private fun scheduleJob(){\n    //NOTE: https://stackoverflow.com/questions/38344220/job-scheduler-not-running-on-android-n?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\n    //less than 15m does not work!\n    var jobInfo = JobInfo.Builder(DB_UPDATER_JOB_ID, serviceComponent)\n            .setRequiredNetworkType(NETWORK_TYPE_NOT_ROAMING)\n            .setPeriodic(4 * 60 * 60 *1000)\n\n            .build()\n\n\n    val scheduler = getSystemService(Context.JOB_SCHEDULER_SERVICE) as? JobScheduler\n    val res = scheduler?.schedule(jobInfo)\n    Log.i(\"MainActivity\", \"Job scheduled with $res\")\n\n}\n</code></pre>\n"}, {"tags": ["kotlin", "retrofit2", "offline-caching"], "comments": [{"owner": {"reputation": 563, "user_id": 1646222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lRug.jpg?s=128&g=1", "display_name": "William Da Silva", "link": "https://stackoverflow.com/users/1646222/william-da-silva"}, "edited": false, "score": 0, "creation_date": 1527005347, "post_id": 50471251, "comment_id": 87957881, "body": "You can have a look at this article: <a href=\"https://medium.com/major-league/need-to-make-your-app-work-offline-without-extra-work-retrofit2-to-the-rescue-22714c358791\" rel=\"nofollow noreferrer\">medium.com/major-league/&hellip;</a> I think you should be handling when connected and when disconnected with the Interceptor."}, {"owner": {"reputation": 13483, "user_id": 2581314, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a43d08cdfd22550a7532ece34c7123f2?s=128&d=identicon&r=PG", "display_name": "erluxman", "link": "https://stackoverflow.com/users/2581314/erluxman"}, "reply_to_user": {"reputation": 563, "user_id": 1646222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8lRug.jpg?s=128&g=1", "display_name": "William Da Silva", "link": "https://stackoverflow.com/users/1646222/william-da-silva"}, "edited": false, "score": 0, "creation_date": 1527008045, "post_id": 50471251, "comment_id": 87959362, "body": "It was due to header problem from server"}], "owner": {"reputation": 13483, "user_id": 2581314, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a43d08cdfd22550a7532ece34c7123f2?s=128&d=identicon&r=PG", "display_name": "erluxman", "link": "https://stackoverflow.com/users/2581314/erluxman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527091598, "creation_date": 1527002434, "last_edit_date": 1527091598, "question_id": 50471251, "link": "https://stackoverflow.com/questions/50471251/retrofit-does-not-cache-my-response", "title": "Retrofit does not cache my response", "body": "<p>I have <strong>tried</strong> through almost <strong>every videos, articles and stackoverflow answer</strong> but I am <strong>not</strong> being able to <strong>cache the response</strong> in Retrofit. </p>\n\n<p>I have <strong>retrofit setup</strong> is like this : </p>\n\n<pre><code>private val gson = GsonBuilder()\n        .setLenient()\n        .create()!!\nprivate val CACHE_CONTROL = \"Cache-Control\"\nprivate var cacheSize: Long = 10 * 1024 * 1024 // 10 MB\nprivate var cache = Cache(File(applicationContext.cacheDir, \"http-cache\"), cacheSize)\nprivate val offlineCacheInterceptor = Interceptor { chain -&gt;\n    var request = chain.request()\n    Log.i(\"datatest\", \"Internet is availiable  : ${isOnline(applicationContext)}\")\n    if (!isOnline(applicationContext)) {\n        val cacheControl = CacheControl.Builder()\n                .maxStale(7, TimeUnit.DAYS)\n                .build()\n        request = request.newBuilder()\n                .cacheControl(cacheControl)\n                .build()\n    }\n    chain.proceed(request)\n\n}\nprivate val networkInterceptor = Interceptor { chain -&gt;\n    val response = chain.proceed(chain.request())\n    val cacheControl = CacheControl.Builder()\n            .maxAge(2, TimeUnit.MINUTES)\n            .build()\n    response.newBuilder()\n            .header(CACHE_CONTROL, cacheControl.toString())\n            .build()\n}\nprivate val httpClient = OkHttpClient.Builder()\n        .addInterceptor(offlineCacheInterceptor)\n        .addNetworkInterceptor(networkInterceptor)\n        .cache(cache)\n        .build()\n\n\nprivate val retrofit = Retrofit.Builder()\n        .baseUrl(baseUrl)\n        .addConverterFactory(GsonConverterFactory.create(gson))\n        .client(httpClient)\n        .addCallAdapterFactory(RxJava2CallAdapterFactory.create())\n        .build()\n</code></pre>\n\n<p>But when I try to call the retrofit APIs with my phone in Airplane mode</p>\n\n<p>I get the following error :</p>\n\n<blockquote>\n  <p>Unable to resolve host \"my_url\": No address associated with hostname</p>\n</blockquote>\n\n<p>What am I doing wrong in the cache setup?</p>\n\n<p>I think there is a stupid mistake I have done but haven't seen by myself.</p>\n"}, {"tags": ["android", "firebase", "kotlin", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "edited": false, "score": 0, "creation_date": 1527067120, "post_id": 50472191, "comment_id": 87981908, "body": "Would you by any chance be able to provide such example as a reference since I have little to none experience in uploading files to cloud storage and then displaying them via link to them? In any case thank you."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "edited": false, "score": 0, "creation_date": 1527068730, "post_id": 50472191, "comment_id": 87983063, "body": "The documentation for Cloud Storage for Firebase should be a good place to start. <a href=\"https://firebase.google.com/docs/storage/\" rel=\"nofollow noreferrer\">firebase.google.com/docs/storage</a>"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1527005469, "creation_date": 1527005469, "answer_id": 50472191, "question_id": 50471245, "link": "https://stackoverflow.com/questions/50471245/android-kotlin-firestore-image-upload-and-display/50472191#50472191", "title": "Android Kotlin - Firestore image upload and display", "body": "<p>It's generally not a good idea to store binary data like images in Firestore.  You could very easily exceed the <a href=\"https://firebase.google.com/docs/firestore/quotas#collections_documents_and_fields\" rel=\"nofollow noreferrer\">limit</a> for how much data you can store in a document, which is 1MB.  Large documents also take more time to load on the client, which is even worse if you don't even need to use the image at the time of the read.</p>\n\n<p>Instead, consider uploading the image to Cloud Storage and saving a path to that location in a field in your document.  Then, when it's time to display the image, load it from there.</p>\n"}], "owner": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 843, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527005469, "creation_date": 1527002426, "question_id": 50471245, "link": "https://stackoverflow.com/questions/50471245/android-kotlin-firestore-image-upload-and-display", "title": "Android Kotlin - Firestore image upload and display", "body": "<p>At the moment as a sample I'm recreating instagram-like post, where user can post a description and image (along with username since I'm still not configuring authentication). So far as follows I can only post username and description. Along side of that I can load new image as a source into the imageview on the screen.</p>\n\n<p>My data class is: </p>\n\n<pre><code>data class Post(val username: String,\n                val timestamp: Date,\n                val postTxt: String,\n                val numLikes: Int,\n                val numComments: Int,\n                val documentId: String)\n</code></pre>\n\n<p>I put data in a hashmap as follows:</p>\n\n<pre><code>val data = hashMapOf(\n                NUM_LIKES to 0,\n                NUM_COMMENTS to 0,\n                POST_TXT to addPostTxt.text.toString().trim(),\n                TIMESTAMP to FieldValue.serverTimestamp(),\n                USERNAME to addUsernameTxt.text.toString().trim()\n        )\n</code></pre>\n\n<p>and then pass it to upload to firestore:</p>\n\n<pre><code>FirebaseFirestore.getInstance().collection(POST_REF)\n                .add(data)\n                .addOnSuccessListener { finish() }\n                .addOnFailureListener {\n                    Log.e(\"Exception\", \"Could not add post: $it\")\n                    toast(\"Could not add post\")\n                }\n</code></pre>\n\n<p>And to get the data I created a function which takes snapshot of type QuerySnapshot like so:</p>\n\n<pre><code>// Clear all the posts before relaod\n        posts.clear()\n\n        snapshot.documents.forEach { document -&gt;\n            val data = document.data\n            val name = data?.get(USERNAME) as String\n            val timestamp = data[TIMESTAMP] as Date\n            val postTxt = data[POST_TXT] as String\n            val numLikes = data[NUM_LIKES] as Long\n            val numComments = data[NUM_COMMENTS] as Long\n            val documentId = document.id\n\n            val newPost = Post(name, timestamp, postTxt, numLikes.toInt(), numComments.toInt(), documentId)\n\n            posts.add(newPost)\n        }\n\n        postsAdapter.notifyDataSetChanged()\n</code></pre>\n\n<p>So far uploading text, current time of upload works fine for both upload and reading it from the database; however my question here is: \n- What is the best way (following current codebase) to upload image to firestore and storage and display it accordingly in the main window (preferably using Glide or picasso)? </p>\n"}, {"tags": ["android", "lambda", "interface", "kotlin"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527001545, "post_id": 50470837, "comment_id": 87955331, "body": "Your claim that it only happens when the method has no parameter, doesn&#39;t check out on my side. It doesn&#39;t work with or without parameter."}, {"owner": {"reputation": 4310, "user_id": 7870874, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/rEroC.jpg?s=128&g=1", "display_name": "Sira Lam", "link": "https://stackoverflow.com/users/7870874/sira-lam"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527001827, "post_id": 50470837, "comment_id": 87955525, "body": "@MarkoTopolnik I am sorry, you are right. I have edited the question."}], "answers": [{"tags": [], "owner": {"reputation": 2057, "user_id": 6439023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-Z7XKDeTLdNw/AAAAAAAAAAI/AAAAAAAAACA/TlXVWsX_ZKc/photo.jpg?sz=128", "display_name": "Luca Nicoletti", "link": "https://stackoverflow.com/users/6439023/luca-nicoletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1527002181, "creation_date": 1527002181, "answer_id": 50471176, "question_id": 50470837, "link": "https://stackoverflow.com/questions/50470837/how-to-declare-an-interface-that-works-with-lambda/50471176#50471176", "title": "How to declare an interface that works with lambda?", "body": "<p>You have to declare the function as this: </p>\n\n<pre><code>fun addOnSomethingReadyListener(block: (OnSomethingReadyListener) -&gt; Unit)\n</code></pre>\n\n<p>And then you can call it as follow:</p>\n\n<pre><code>addOnSomethingReadyListener {\n  // TODO\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4310, "user_id": 7870874, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/rEroC.jpg?s=128&g=1", "display_name": "Sira Lam", "link": "https://stackoverflow.com/users/7870874/sira-lam"}, "edited": false, "score": 0, "creation_date": 1527039192, "post_id": 50471203, "comment_id": 87970797, "body": "Thank you! Just one more question, if, for readability reason, I want to declare my own interface (e.g. with several named parameters, but one method only), is that I can no longer use lambda? I tried @LucaNicoletti &#39;s answer but it does not work."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1527057276, "post_id": 50471203, "comment_id": 87975712, "body": "&quot;SAM conversion&quot; is the technical term for what you want: converting an interface type to an equivalent function type. This answer presents a quote from the authoritative source explaining that this feature is <i>not</i> supported for Kotlin interfaces and is there only for convenience of interop with Java. In other words, the Kotlin team wants you to use function types."}], "tags": [], "owner": {"reputation": 62612, "user_id": 1253844, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/3fUHG.jpg?s=128&g=1", "display_name": "Bryan Herbst", "link": "https://stackoverflow.com/users/1253844/bryan-herbst"}, "is_accepted": true, "score": 2, "last_activity_date": 1527002273, "creation_date": 1527002273, "answer_id": 50471203, "question_id": 50470837, "link": "https://stackoverflow.com/questions/50470837/how-to-declare-an-interface-that-works-with-lambda/50471203#50471203", "title": "How to declare an interface that works with lambda?", "body": "<p>SAM (single abstract method) conversion is only support for Java interfaces, not Kotlin interfaces.</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/java-interop.html\" rel=\"nofollow noreferrer\">The documentation</a> states this reasoning:</p>\n\n<blockquote>\n  <p>Also note that this feature works only for Java interop; since Kotlin has proper function types, automatic conversion of functions into implementations of Kotlin interfaces is unnecessary and therefore unsupported.</p>\n</blockquote>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/KT-7770\" rel=\"nofollow noreferrer\">KT-7770 requests this functionality</a>, if you want to track whether it is being considered or not.</p>\n\n<p>The recommended way to achieve what you want is to replace the <code>OnSomethingReadyListener</code> with a parameter of type <code>() -&gt; Unit</code> like so:</p>\n\n<pre><code>private val onSomethingReadyListeners = ArrayList&lt;() -&gt; Unit&gt;()\n\nfun addOnSomethingReadyListener(callback: () -&gt; Unit) {\n    onSomethingReadyListeners.add(callback)\n}\n</code></pre>\n\n<p>You can then invoke those listeners with something like</p>\n\n<pre><code>onSomethingReadyListeners.forEach { it.invoke() }\n</code></pre>\n"}], "owner": {"reputation": 4310, "user_id": 7870874, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/rEroC.jpg?s=128&g=1", "display_name": "Sira Lam", "link": "https://stackoverflow.com/users/7870874/sira-lam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "closed_date": 1527002383, "accepted_answer_id": 50471203, "answer_count": 2, "score": 1, "last_activity_date": 1527002273, "creation_date": 1527001142, "last_edit_date": 1527001809, "question_id": 50470837, "link": "https://stackoverflow.com/questions/50470837/how-to-declare-an-interface-that-works-with-lambda", "closed_reason": "Duplicate", "title": "How to declare an interface that works with lambda?", "body": "<p>I declared a simple interface like this:</p>\n\n<pre><code>   interface OnSomethingReadyListener {\n        fun onSomethingReady()\n    }\n</code></pre>\n\n<p>And of course a setter:</p>\n\n<pre><code>private val onSomethingReadyListeners = ArrayList&lt;OnSomethingReadyListener&gt;()\n\nfun addOnSomethingReadyListener(callback: OnSomethingReadyListener) {\n    onSomethingReadyListeners.add(callback)\n}\n</code></pre>\n\n<p>But then I found that I cannot use lambda:</p>\n\n<pre><code>something.addOnShopDataReadyListener { progressbar.visibility = View.GONE }\n</code></pre>\n\n<p>IDE gave me an error:</p>\n\n<pre><code>Type mismatch.\nRequired: SomeClass.OnSomethingReadyListener\nFound:    () -&gt; Unit\n</code></pre>\n\n<p>Suppose I want to stick to using lambda instead of anonymous class (<code>object : OnSomethingReadyListener {...}</code>). How should I declare <code>OnSomethingReadyListener</code>?</p>\n"}, {"tags": ["android", "junit", "kotlin", "mockito"], "comments": [{"owner": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "edited": false, "score": 0, "creation_date": 1527001779, "post_id": 50470673, "comment_id": 87955491, "body": "Out of interest, does replacing the test with <code>Mockito.verify(tracker).trackEvent(eq(&quot;EVENT&quot;))</code> pass? Not proposing that as an answer, just curious."}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "reply_to_user": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "edited": false, "score": 0, "creation_date": 1527001980, "post_id": 50470673, "comment_id": 87955628, "body": "It gives <code>java.lang.IllegalStateException: Mockito.eq(Tracker.EVENT) must not be null</code> exception."}, {"owner": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "edited": false, "score": 0, "creation_date": 1527002241, "post_id": 50470673, "comment_id": 87955800, "body": "Even if you use the String <code>&quot;EVENT&quot;</code> in quotes and not the constant?"}, {"owner": {"reputation": 9286, "user_id": 469080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33d6ef3db3ec7b1f7bb10541dca965ef?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dodd", "link": "https://stackoverflow.com/users/469080/michael-dodd"}, "edited": false, "score": 0, "creation_date": 1527002375, "post_id": 50470673, "comment_id": 87955883, "body": "Also any particular reason as to why <code>EVENT</code> is declared inside the <code>companion object</code> and not at top level?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "edited": false, "score": 0, "creation_date": 1527004090, "post_id": 50470673, "comment_id": 87957040, "body": "What happens if you <code>verify(tracker).trackEvent(Tracker.EVENT, null)</code> explicitly?"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1527061273, "post_id": 50470673, "comment_id": 87978017, "body": "Whether explicitly as <code>String</code> or with second parameter as <code>null</code>, the result is the same."}], "answers": [{"tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": true, "score": 3, "last_activity_date": 1527081840, "creation_date": 1527081840, "answer_id": 50489612, "question_id": 50470673, "link": "https://stackoverflow.com/questions/50470673/android-mockito-verify-says-arguments-are-different-with-printing-same-conten/50489612#50489612", "title": "Android Mockito.verify says Argument(s) are different! with printing same content", "body": "<p>For those who will face same problem, the solution is that you need to add\n<code>testImplementation \"com.nhaarman:mockito-kotlin:1.5.0\"</code> in your <code>build.gradle</code> file. More info, here\n<a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"nofollow noreferrer\">https://github.com/nhaarman/mockito-kotlin</a>.</p>\n\n<p>The thing is that in <code>Java</code> all classes are nullable by default, unlike <code>Kotlin</code>. While mockito is designed to be used with <code>Java</code>, the library from above adds support using Mockito with <code>Kotlin</code>.</p>\n\n<p>So, the solution to this particular test</p>\n\n<pre><code>Mockito.verify(tracker).trackEvent(Tracker.EVENT)\n</code></pre>\n\n<p>is</p>\n\n<pre><code>Mockito.verify(tracker).trackEvent(eq(Tracker.ADD_TRANSACTION), any())\n</code></pre>\n\n<p>where <code>eq()</code> and <code>any()</code> are functions of <code>com.nhaarman.mockito_kotlin</code>.</p>\n\n<p>More info here: <a href=\"https://stackoverflow.com/a/38722935/3569545\">https://stackoverflow.com/a/38722935/3569545</a></p>\n"}], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1553, "favorite_count": 1, "accepted_answer_id": 50489612, "answer_count": 1, "score": 2, "last_activity_date": 1527081840, "creation_date": 1527000681, "question_id": 50470673, "link": "https://stackoverflow.com/questions/50470673/android-mockito-verify-says-arguments-are-different-with-printing-same-conten", "title": "Android Mockito.verify says Argument(s) are different! with printing same content", "body": "<p><strong>The situation</strong></p>\n\n<p>I have an interface of a <code>Tracker</code> which has this method:</p>\n\n<pre><code>fun trackEvent(event: String, args: Bundle? = null)\n</code></pre>\n\n<p>I want to verify, that this method is called with a specific <code>event</code>.\nInternally object that being tested call this method with <code>Bundle</code> object.\nAll the events are specified as</p>\n\n<pre><code>companion object {\n        const val EVENT = \"EVENT\"\n}\n</code></pre>\n\n<p><strong>The problem</strong></p>\n\n<p>The test fails with this verification:</p>\n\n<pre><code>Mockito.verify(tracker).trackEvent(Tracker.EVENT)\n</code></pre>\n\n<p>with message:</p>\n\n<p><em>Argument(s) are different! Wanted:\ntracker.trackEvent(\"EVENT\", null);\n...</em></p>\n\n<p><em>Actual invocation has different arguments:\ntracker.trackEvent(\"EVENT\", null);\n...</em></p>\n\n<p>There are many solutions, which are using \n<code>Mockito.eq()</code>, <code>Mockito.refEq()</code>, <code>ArgumentMatchers</code>, <code>Captures</code>, etc. None of them worked for me, giving the same or <code>NullPointerException</code></p>\n"}, {"tags": ["android", "kotlin", "android-jetpack", "android-architecture-navigation"], "comments": [{"owner": {"reputation": 2596, "user_id": 7409774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HDIOj.png?s=128&g=1", "display_name": "Milind Mevada", "link": "https://stackoverflow.com/users/7409774/milind-mevada"}, "edited": false, "score": 0, "creation_date": 1527058670, "post_id": 50469835, "comment_id": 87976484, "body": "please post your code from Activity / fragment where you are inflating menus"}, {"owner": {"reputation": 747, "user_id": 5320577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d443597b3869f3dd2ef9c11c15f1d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Sander", "link": "https://stackoverflow.com/users/5320577/sander"}, "edited": false, "score": 0, "creation_date": 1527507364, "post_id": 50469835, "comment_id": 88141087, "body": "I just got this working in my own project, if you still need some help update your question with the relevant code and I&#39;ll have a look."}, {"owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1528503898, "post_id": 50469835, "comment_id": 88547187, "body": "did you manage to make this work @I_of_T?"}, {"owner": {"reputation": 634, "user_id": 5636936, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20biufcHZwU/AAAAAAAAAAI/AAAAAAAAAFM/YcJx_gKmMOw/photo.jpg?sz=128", "display_name": "Dracarys", "link": "https://stackoverflow.com/users/5636936/dracarys"}, "reply_to_user": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "edited": false, "score": 0, "creation_date": 1528707441, "post_id": 50469835, "comment_id": 88593733, "body": "@LeviAlbuquerque, Yes... see my answer for the solution"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 5636936, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20biufcHZwU/AAAAAAAAAAI/AAAAAAAAAFM/YcJx_gKmMOw/photo.jpg?sz=128", "display_name": "Dracarys", "link": "https://stackoverflow.com/users/5636936/dracarys"}, "edited": false, "score": 0, "creation_date": 1528706860, "post_id": 50665595, "comment_id": 88593389, "body": "Yes, you are right. That should be the solution. I could not get it to work for me because the function &quot;setupWithNavController&quot; could not be found for the NavigationaView class. I was however able to find it in the NavigationUI class. So that&#39;s what I used. I then needed to get an instance of the navController, I was able to get it by calling findNavController(this) on the one of my fragment&#39;s oncreate"}, {"owner": {"reputation": 439, "user_id": 7597238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-foc_P-y4D2Q/AAAAAAAAAAI/AAAAAAAAADc/1rffki9he7o/photo.jpg?sz=128", "display_name": "Deepak Rana", "link": "https://stackoverflow.com/users/7597238/deepak-rana"}, "edited": false, "score": 0, "creation_date": 1552914409, "post_id": 50665595, "comment_id": 97178959, "body": "But what if i am not using menu for navigation view instead of menu i am using recycer view to show menu items. In that case how can i achieve navigation."}], "tags": [], "owner": {"reputation": 10844, "user_id": 7765139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1JCJG0Q4b8I/AAAAAAAAAAI/AAAAAAAAB1w/2ghArTJ7KEs/photo.jpg?sz=128", "display_name": "Levi Moreira", "link": "https://stackoverflow.com/users/7765139/levi-moreira"}, "is_accepted": true, "score": 3, "last_activity_date": 1528023227, "creation_date": 1528023227, "answer_id": 50665595, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack/50665595#50665595", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p>According to the <a href=\"https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing#kotlin\" rel=\"nofollow noreferrer\">docs</a>, there's a piece of code wiring you need to do:</p>\n\n<pre><code>NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view);\nNavigationUI.setupWithNavController(navigationView, navController);\n</code></pre>\n\n<p>or in kotlin:</p>\n\n<pre><code>val navigationView = findViewById(R.id.nav_view)\nnavigationView.setupWithNavController(navController)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 5636936, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20biufcHZwU/AAAAAAAAAAI/AAAAAAAAAFM/YcJx_gKmMOw/photo.jpg?sz=128", "display_name": "Dracarys", "link": "https://stackoverflow.com/users/5636936/dracarys"}, "is_accepted": false, "score": 0, "last_activity_date": 1528707185, "creation_date": 1528707185, "answer_id": 50793785, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack/50793785#50793785", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p>This is the piece of code I added to my one of my fragment's onCreate to make it work. I had initially tried doing this on my MainActivity with no success.</p>\n\n<pre><code>val navigationView = activity?.findViewById&lt;NavigationView&gt;(R.id.nav_view)\nval navController = findNavController(this)\nnavigationView?.let { NavigationUI.setupWithNavController(it, navController) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9936840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b856ccab6a28d1834b09d7438c9c9f5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/9936840/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1528902563, "creation_date": 1528902563, "answer_id": 50840614, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack/50840614#50840614", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p>To use NavigationUI#setupWithNavController() you need:</p>\n\n<p>implementation 'android.arch.navigation:navigation-ui:1.0.0-alpha02'</p>\n"}, {"comments": [{"owner": {"reputation": 1557, "user_id": 10008183, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H2oBc1SH68A/AAAAAAAAAAI/AAAAAAAAAuw/w1z-RiIGsvs/photo.jpg?sz=128", "display_name": "Doilio Matsinhe", "link": "https://stackoverflow.com/users/10008183/doilio-matsinhe"}, "edited": false, "score": 0, "creation_date": 1582225259, "post_id": 51325680, "comment_id": 106713656, "body": "How do u do this using Navigation Components?"}], "tags": [], "owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "is_accepted": false, "score": 1, "last_activity_date": 1531486662, "creation_date": 1531486662, "answer_id": 51325680, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack/51325680#51325680", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p>I think standard custom solution is better, as you can handle different menu items with Navigation graph or yourself (like Sign out item) </p>\n\n<pre><code>override fun onNavigationItemSelected(item: MenuItem): Boolean {\n        // Handle navigation view item clicks here.\n        when (item.itemId) {\n\n            R.id.navSignOut -&gt; {\n                loginViewModel.logout()\n            }\n            else -&gt; {\n                val navController = findNavController(R.id.main_nav_host_fragment)\n                navController.navigate(item.itemId)\n            }\n        }\n\n        drawer_layout.closeDrawer(GravityCompat.START)\n        return true\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5131, "user_id": 5135551, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ILHpb.jpg?s=128&g=1", "display_name": "Jim Leask", "link": "https://stackoverflow.com/users/5135551/jim-leask"}, "edited": false, "score": 0, "creation_date": 1532986608, "post_id": 51567054, "comment_id": 90171208, "body": "setupWithNavController was missing in alpha02, but is fixed in alpha04"}], "tags": [], "owner": {"reputation": 51, "user_id": 2864871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZquY.png?s=128&g=1", "display_name": "ndubkov", "link": "https://stackoverflow.com/users/2864871/ndubkov"}, "is_accepted": false, "score": 4, "last_activity_date": 1532780669, "last_edit_date": 1532780669, "creation_date": 1532737942, "answer_id": 51567054, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack/51567054#51567054", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p><strong>@Dracarys</strong> You should use</p>\n\n<pre><code>implementation \"android.arch.navigation:navigation-ui-ktx:1.0.0-alpha04\"\n</code></pre>\n\n<p>instead of </p>\n\n<p><code>implementation \"android.arch.navigation:navigation-ui:1.0.0-alpha04\"</code></p>\n\n<p>pay attention to <strong>-ktx</strong> part in case if you are using Kotlin. Then you will see     <code>navigationView.setupWithNavController(navController)</code> method</p>\n\n<p><strong>[UPD 1]</strong></p>\n\n<p>Also, I faced with same issue, when I get navController by calling <code>findNavController(view)</code>. Try to use <code>findNavController(activity, id)</code> and pass it to <code>setupWithNavController(navController)</code> method. It works for me now</p>\n"}], "owner": {"reputation": 634, "user_id": 5636936, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20biufcHZwU/AAAAAAAAAAI/AAAAAAAAAFM/YcJx_gKmMOw/photo.jpg?sz=128", "display_name": "Dracarys", "link": "https://stackoverflow.com/users/5636936/dracarys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3979, "favorite_count": 1, "accepted_answer_id": 50665595, "answer_count": 5, "score": 3, "last_activity_date": 1556736646, "creation_date": 1526998185, "last_edit_date": 1556736646, "question_id": 50469835, "link": "https://stackoverflow.com/questions/50469835/navigating-from-navigational-drawer-using-android-jetpack", "title": "Navigating from navigational drawer using Android Jetpack", "body": "<p>I am trying to implement jetpack navigation on my android app. I have created a navigational graph as shown below:</p>\n\n<p><img src=\"https://i.stack.imgur.com/zHDgx.png\" alt=\"a picture of the Graph editor\"></p>\n\n<p>and navigational drawer menu xml as shown below:</p>\n\n<p><img src=\"https://i.stack.imgur.com/AEfLr.png\" alt=\"a picture of the menu navigational drawers menu items design\"></p>\n\n<p>according to the documentation in the android developer site, <a href=\"https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>giving the menu items the same id as the fragments or destinations should be enough to ensure that clicking on an menu item will navigate me to the specified fragment. This doesn't seem to work, am I missing something?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1526995462, "post_id": 50468784, "comment_id": 87950866, "body": "Actually for the topic &quot;extension function vs member method&quot; it&#39;s the reverse. From the doc: <code>If a class has a member function, and an extension function is defined which has the same receiver type, the same name and is applicable to given arguments, the member always wins</code>"}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 1, "creation_date": 1526995537, "post_id": 50468784, "comment_id": 87950936, "body": "Interstingly they also wrote it in the link I gave- &quot;In case of a name conflict between the members of the dispatch receiver and the extension receiver, the extension receiver takes precedence. To refer to the member of the dispatch receiver you can use the qualified this syntax.&quot;"}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1526995716, "post_id": 50468784, "comment_id": 87951077, "body": "@user2340612 could you please, provide a reference link for the above statement."}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1526995884, "post_id": 50468784, "comment_id": 87951219, "body": "that&#39;s interesting, I was not aware of that, but it makes sense: inside an extension function you want to call methods belonging to the type extended in priority w.r.t. other member functions. Concerning the link, actually it&#39;s in the same page you linked, just a few lines above the statement you quoted"}, {"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "reply_to_user": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1526996653, "post_id": 50468784, "comment_id": 87951828, "body": "So basically it happened because convert itself was a extension function!"}, {"owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "edited": false, "score": 0, "creation_date": 1526996803, "post_id": 50468784, "comment_id": 87951958, "body": "yep, that might be the root cause :)"}], "answers": [{"comments": [{"owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "edited": false, "score": 0, "creation_date": 1526998898, "post_id": 50469993, "comment_id": 87953419, "body": "Yup, I resolved that.  I changed method segnature to fun convert(value:V, converter: org.jooq.Converter&lt;.,V&gt;). You are right. Changing the code back to the original one. it worked. Thanks. I didn&#39;t notice that."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1526998618, "creation_date": 1526998618, "answer_id": 50469993, "question_id": 50468784, "link": "https://stackoverflow.com/questions/50468784/kotlin-extension-function-vs-member-function-with-dispatch-reciever/50469993#50469993", "title": "Kotlin: extension function vs member function with dispatch reciever", "body": "<p>The types as stated in the question don't match: <code>Converter&lt;K, V&gt;.to</code> <a href=\"https://www.jooq.org/javadoc/3.9.0/org/jooq/Converter.html#to-U-\" rel=\"nofollow noreferrer\">takes <code>V</code>, not <code>K</code></a>. So <code>converter.to(value)</code> resolves to the extension method simply because it can't be the member method. </p>\n\n<p>Of course, that means your own answer wouldn't work either; probably you modified some of the types, and if you try <code>converter.to(value)</code> now it should work.</p>\n"}], "owner": {"reputation": 4609, "user_id": 1699956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oBr6e.jpg?s=128&g=1", "display_name": "Mangat Rai Modi", "link": "https://stackoverflow.com/users/1699956/mangat-rai-modi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 50469993, "answer_count": 1, "score": 0, "last_activity_date": 1526998618, "creation_date": 1526995172, "last_edit_date": 1526996869, "question_id": 50468784, "link": "https://stackoverflow.com/questions/50468784/kotlin-extension-function-vs-member-function-with-dispatch-reciever", "title": "Kotlin: extension function vs member function with dispatch reciever", "body": "<p>Kotlin has a <code>A.to(that: B)</code> extension function that takes any two types of parameter and return <code>Pair&lt;A,B&gt;</code>. Now I have a class with <code>to</code> function with takes two argments. </p>\n\n<p>Basically the two different <code>to</code> functions have exact syntax and the function in the class is getting masked by the extension one. </p>\n\n<p><strong>Example</strong>: </p>\n\n<pre><code>// following return Pair&lt;k,v&gt;\nfun convert(value:K, converter: org.jooq.Converter&lt;K,V&gt;) = converter.to(value)\n</code></pre>\n\n<p>Jooq converter is a fairly popular class to convert between Database compatible class to custom class.</p>\n\n<p>According to Kotlin's <a href=\"https://kotlinlang.org/docs/reference/extensions.html\" rel=\"nofollow noreferrer\">documentation</a>, extension functions take priority over the class methods, which doesn't make sense for the extension methods provided by kotlin package as their scope is global. There is <em><a href=\"https://kotlinlang.org/docs/reference/this-expressions.html#qualified\" rel=\"nofollow noreferrer\">qualified-this</a></em> workaround for outscoping the extension functions but it doesn't seem to be helping here</p>\n\n<p>Edit: <code>fun convert</code> itself is an extension function. Otherwise the member function takes priority.</p>\n"}, {"tags": ["kotlin", "kotlinx.coroutines"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 8, "last_activity_date": 1556790916, "last_edit_date": 1556790916, "creation_date": 1526995535, "answer_id": 50468907, "question_id": 50468743, "link": "https://stackoverflow.com/questions/50468743/kotlin-how-to-read-from-file-asynchronously/50468907#50468907", "title": "Kotlin - How to read from file asynchronously?", "body": "<p>Here's how to do it with coroutines:</p>\n\n<pre><code>launch {\n    val contents = withContext(Dispatchers.IO) {\n        FileInputStream(\"filename.txt\").use { it.readBytes() }\n    }\n    processContents(contents)\n}\ngo_on_with_other_stuff_while_file_is_loading()\n</code></pre>\n"}], "owner": {"reputation": 7138, "user_id": 692422, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4b93f5d101d4e8b14ca950ed530e0148?s=128&d=identicon&r=PG", "display_name": "alisabzevari", "link": "https://stackoverflow.com/users/692422/alisabzevari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2473, "favorite_count": 1, "accepted_answer_id": 50468907, "answer_count": 1, "score": 4, "last_activity_date": 1556790916, "creation_date": 1526995039, "question_id": 50468743, "link": "https://stackoverflow.com/questions/50468743/kotlin-how-to-read-from-file-asynchronously", "title": "Kotlin - How to read from file asynchronously?", "body": "<p>Is there any kotlin idiomatic way to read a file content's asynchronously? I couldn't find anything in documentation.</p>\n"}, {"tags": ["android", "kotlin", "observable", "android-broadcastreceiver"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 3838805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jR5uW.jpg?s=128&g=1", "display_name": "Arthur Melo", "link": "https://stackoverflow.com/users/3838805/arthur-melo"}, "edited": false, "score": 0, "creation_date": 1593051522, "post_id": 50468456, "comment_id": 110646355, "body": "How I could achiev this?"}], "tags": [], "owner": {"reputation": 3436, "user_id": 8011713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XAts2.jpg?s=128&g=1", "display_name": "Rene Ferrari", "link": "https://stackoverflow.com/users/8011713/rene-ferrari"}, "is_accepted": true, "score": 1, "last_activity_date": 1526999220, "last_edit_date": 1526999220, "creation_date": 1526994223, "answer_id": 50468456, "question_id": 50468261, "link": "https://stackoverflow.com/questions/50468261/broadcast-receiver-onreceive-fires-twice-on-location-change/50468456#50468456", "title": "Broadcast receiver onReceive fires twice on location change", "body": "<p>I would assume that this issue arises only on some devices (though I am not 100% sure about it, but it is the case when listening to network changes via a <code>BroadcastReceiver</code> so it would make sense).</p>\n\n<p>Anyway the simplest solution would be to Make an <code>enum</code> which holds the current <code>State</code> of your <code>GPS</code>. Only if the <strong>State changes notify the Observer</strong>. This way the <code>onReceive</code> could be called 1000 times but your <code>Observer</code> gets notified only once.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 3838805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jR5uW.jpg?s=128&g=1", "display_name": "Arthur Melo", "link": "https://stackoverflow.com/users/3838805/arthur-melo"}, "is_accepted": false, "score": 0, "last_activity_date": 1593127404, "last_edit_date": 1593127404, "creation_date": 1593052738, "answer_id": 62567029, "question_id": 50468261, "link": "https://stackoverflow.com/questions/50468261/broadcast-receiver-onreceive-fires-twice-on-location-change/62567029#62567029", "title": "Broadcast receiver onReceive fires twice on location change", "body": "<p>I solved with :</p>\n<pre><code> BroadcastReceiver gpsSwitchStateReceiver = new BroadcastReceiver() {\n    //here you can check your current state when instanciate it.\n        boolean oldLocationEnabled = isLocationSystemEnabled();\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            try {\n                String action;\n                if (intent != null &amp;&amp; (action = intent.getAction()) != null &amp;&amp; action.matches(LocationManager.PROVIDERS_CHANGED_ACTION)) {\n                    boolean locationEnabled = isLocationSystemEnabled();\n//this validation ensures that it is executed only once (since the receiver is executed in the UIThread) \n                    if (oldLocationEnabled != locationEnabled) {\n                        if (locationEnabled) {\n                        //your code here \n                        } else {\n                        //when dont have location here\n                        }\n                    }\n                    oldLocationEnabled = locationEnabled;\n                }\n            } catch (Exception ignored) {}\n        }\n    };\n\npublic boolean isLocationSystemEnabled() {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {\n        LocationManager locationManager = (LocationManager) ApplicationLoader.appContext.getSystemService(Context.LOCATION_SERVICE);\n        boolean         isGPSEnabled    = false;\n        boolean         isNetEnabled    = false;\n        if (locationManager != null) {\n            isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n            isNetEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n        }\n        return isGPSEnabled || isNetEnabled;\n    } else {\n        String allowedLocationProviders = Settings.System.getString(ApplicationLoader.appContext.getContentResolver(), Settings.System.LOCATION_PROVIDERS_ALLOWED);\n        if (allowedLocationProviders == null) {\n            allowedLocationProviders = &quot;&quot;;\n        }\n        return allowedLocationProviders.contains(LocationManager.GPS_PROVIDER);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 48, "user_id": 9725585, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Karol", "link": "https://stackoverflow.com/users/9725585/karol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 50468456, "answer_count": 2, "score": 0, "last_activity_date": 1593127404, "creation_date": 1526993653, "last_edit_date": 1526994323, "question_id": 50468261, "link": "https://stackoverflow.com/questions/50468261/broadcast-receiver-onreceive-fires-twice-on-location-change", "title": "Broadcast receiver onReceive fires twice on location change", "body": "<p>I want to know whenever user turn his gps off. I want to get informed about that action in different activities. I made Broadcast Receiver to listen for GPS state change. But almost always when i turn off GPS, my updateValue function get fired twice. How to get notified one time, when user turn his gps off? What i did wrong? Below is my code.</p>\n\n<pre><code>class GpsStatusReceiver : BroadcastReceiver() {\nvar observableGpsState: ObservableGpsState? = null\n\noverride fun onReceive(context: Context?, intent: Intent?) {\n    val locationManager = context?.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n    if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {\n        //GPS Turned on,OK..\n    } else {\n        if (observableGpsState == null)\n            observableGpsState = ObservableGpsState.getInstance()\n        observableGpsState?.updateValue(GPS_STATUS_TURNED_OFF)\n    }\n}\n\ncompanion object {\n    val GPS_STATUS_TURNED_OFF = \"GPS_TURNED_OFF\"\n}}\n</code></pre>\n\n<p>My Observable</p>\n\n<pre><code>class ObservableGpsState: Observable(){\n\nfun updateValue(data: Any) {\n    synchronized(this) {\n        setChanged()\n        notifyObservers(data)\n    }\n}\ncompanion object {\n    private val instance = ObservableGpsState()\n    fun getInstance(): ObservableGpsState {\n        return instance\n    }\n}}\n</code></pre>\n\n<p>And (what I guess) is important from my Activity:</p>\n\n<pre><code>protected lateinit var observer: Observable\n\nprivate fun registerGpsObserver(){\n    observer = ObservableGpsState.getInstance()\n    observer.addObserver(this)\n}\nprivate fun unregisterGpsObserver(){\n    observer.deleteObserver(this)\n}\n\noverride fun update(o: Observable?, arg: Any?) {\n    MyApplication.get(baseContext).enableGpsDialog(this)\n}\n</code></pre>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "edited": false, "score": 0, "creation_date": 1527001641, "post_id": 50467410, "comment_id": 87955397, "body": "The QueryBus will be a collection of nested middlewares  (validation, authorization, etc).  Also, the QueryBus will be injected as a dependency in my API controllers. Here is a blog post about Bus pattern (Command in his case) <a href=\"https://matthiasnoback.nl/2015/01/responsibilities-of-the-command-bus/\" rel=\"nofollow noreferrer\">matthiasnoback.nl/2015/01/responsibilities-of-the-command-bu&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1527001979, "post_id": 50467410, "comment_id": 87955625, "body": "Okay, I was not aware of that pattern. I updated my answer."}, {"owner": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "reply_to_user": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "edited": false, "score": 0, "creation_date": 1527002314, "post_id": 50467410, "comment_id": 87955848, "body": "@PaulGeorgPodlech Here a very good conference to understand the why such pattern: <a href=\"https://speakerdeck.com/lilobase/ddd-and-cqrs-php-tour-2018\" rel=\"nofollow noreferrer\">speakerdeck.com/lilobase/ddd-and-cqrs-php-tour-2018</a>"}], "answers": [{"comments": [{"owner": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "edited": false, "score": 0, "creation_date": 1526998429, "post_id": 50468917, "comment_id": 87953102, "body": "Thanks for you answer. Your example using a map is exactly what I attempt to do. I&#39;ve updated the code to show you what I am really trying to build."}, {"owner": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "edited": false, "score": 0, "creation_date": 1526999006, "post_id": 50468917, "comment_id": 87953493, "body": "You may want to refine your answer to match the updated code. I may have given you a better context. Maybe ?"}, {"owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "reply_to_user": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "edited": false, "score": 0, "creation_date": 1527153183, "post_id": 50468917, "comment_id": 88022902, "body": "@ValentinTrinqu&#233; I&#39;ve updated my answer. It&#39;s derived from your code in the gist. It works and provides a &quot;clean&quot; interface. However, it uses the <code>!!</code> operator and an unchecked cast (<code>as</code>), so it&#39;s up to you to make sure there is an appropriate Handler registered for every possible Query implementation."}], "tags": [], "owner": {"reputation": 470, "user_id": 4815713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b92f538fcec16fee1bdbbae286291c95?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Georg Podlech", "link": "https://stackoverflow.com/users/4815713/paul-georg-podlech"}, "is_accepted": true, "score": 1, "last_activity_date": 1527001906, "last_edit_date": 1527001906, "creation_date": 1526995572, "answer_id": 50468917, "question_id": 50467410, "link": "https://stackoverflow.com/questions/50467410/use-a-class-from-a-list-of-generic-interface/50468917#50468917", "title": "Use a class from a list of generic interface", "body": "<p><strong>UPDATE</strong> I've read your gist and tried to come up with a solution that will provide a clean interface to the user of the QueryBusMiddleware.\nNote that I used objects instead of classes for the QueryHandler implementations, which felt more natural to me (since there is only one possible entry in the map for each Query implementation).</p>\n\n<pre><code>interface Query&lt;R&gt;\n\ninterface QueryHandler&lt;R, Q: Query&lt;R&gt;&gt; {\n    fun handle(query: Q): R\n    fun listenTo(): String\n}\n\n// DTOs\ndata class BookDto(val name: String)\n\n// List books query\ndata class ListBooksQuery(val page: Int = 1): Query&lt;List&lt;BookDto&gt;&gt;\n\nobject ListBooksQueryHandler: QueryHandler&lt;List&lt;BookDto&gt;, ListBooksQuery&gt; {\n    override fun handle(query: ListBooksQuery): List&lt;BookDto&gt; {\n        return listOf(BookDto(\"Dune\"), BookDto(\"Dune II\"))\n    }\n    override fun listenTo(): String = ListBooksQuery::class.toString()\n}\n\n// Get book query\ndata class GetBookQuery(val name: String): Query&lt;BookDto?&gt;\n\nobject GetBookQueryHandler: QueryHandler&lt;BookDto?, GetBookQuery&gt; {\n    override fun handle(query: GetBookQuery): BookDto {\n        return BookDto(\"Dune\")\n    }\n\n    override fun listenTo(): String = GetBookQuery::class.toString()\n}\n\n// Run it!\nfun main(args: Array&lt;String&gt;) {\n    // Initializing query bus\n\n    val queryHandlers = listOf(\n            ListBooksQueryHandler,\n            GetBookQueryHandler\n    )\n\n    val dispatcher: QueryBusMiddleware = QueryDispatcherMiddleware(queryHandlers)\n\n    // Calling query bus\n    val query = ListBooksQuery()\n\n    // Result should be List&lt;BookDto&gt;\n    val result = dispatcher.dispatch(query)\n\n    print(result)\n}\n\ninterface QueryBusMiddleware {\n    fun &lt;R, Q : Query&lt;R&gt;&gt; dispatch(query: Q): R\n}\n\nclass QueryDispatcherMiddleware constructor(handlers: List&lt;QueryHandler&lt;*, *&gt;&gt;) : QueryBusMiddleware {\n    private val handlers = HashMap&lt;String, QueryHandler&lt;*, *&gt;&gt;()\n\n    init {\n        handlers.forEach { handler -&gt; this.handlers[handler.listenTo()] = handler }\n    }\n\n    override fun &lt;R, Q : Query&lt;R&gt;&gt; dispatch(query: Q): R {\n        val queryClass = query::class.toString()\n        val handler = handlers[queryClass] ?: throw Exception(\"No handler listen to the query: $queryClass\")\n        return handler::class.members.find { it.name == \"handle\" }!!.call(handler, query) as R\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 926, "user_id": 4273180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/04fdc290a17e25fb823d389fff022ee4?s=128&d=identicon&r=PG", "display_name": "Valentin Trinqu&#233;", "link": "https://stackoverflow.com/users/4273180/valentin-trinqu%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 50468917, "answer_count": 1, "score": 2, "last_activity_date": 1527001906, "creation_date": 1526991302, "last_edit_date": 1526998506, "question_id": 50467410, "link": "https://stackoverflow.com/questions/50467410/use-a-class-from-a-list-of-generic-interface", "title": "Use a class from a list of generic interface", "body": "<p>I am trying to implement a QueryBus. Basically, I want to register a list of <code>QueryHandler</code>s. Each <code>QueryHandler</code> implements a <code>handle</code> method defined by an interface. Each <code>QueryHandler</code> is associated to a <code>Query</code>. I want to be able to retrieve a <code>QueryHandler</code> using the <code>Query</code> and call <code>handle</code> on it.</p>\n\n<p>The thing is the handle has to be generic because each <code>QueryHandler</code> handles a <code>Query</code> differently. They all take a dedicated <code>Query</code> and may return whatever they want.</p>\n\n<pre><code>interface Query&lt;R&gt;\n\ninterface QueryHandler&lt;R, Q : Query&lt;R&gt;&gt; {\n    fun handle(query: Q): R\n    fun listenTo(): String\n}\n\n// DTOs\ndata class BookDto(val name: String)\n\n// List books query\ndata class ListBooksQuery(val page: Int = 1): Query&lt;List&lt;BookDto&gt;&gt;\n\nclass ListBooksQueryHandler: QueryHandler&lt;List&lt;BookDto&gt;, ListBooksQuery&gt; {\n    override fun handle(query: ListBooksQuery): List&lt;BookDto&gt; {\n        return listOf(BookDto(\"Dune\"), BookDto(\"Dune II\"))\n    }\n\n    override fun listenTo(): String = ListBooksQuery::class.toString()\n}\n\n// Get book query\ndata class GetBookQuery(val name: String): Query&lt;BookDto?&gt;\n\nclass GetBookQueryHandler: QueryHandler&lt;BookDto?, GetBookQuery&gt; {\n    override fun handle(query: GetBookQuery): BookDto {\n        return BookDto(\"Dune\")\n    }\n\n    override fun listenTo(): String = GetBookQuery::class.toString()\n}\n\n// Run it!\n\nfun main(args: Array&lt;String&gt;) {\n    // Initializing query bus\n    val queryHandlers = mapOf(\n        with(ListBooksQueryHandler()) {this.listenTo() to this},\n        with(GetBookQueryHandler()) {this.listenTo() to this}\n    )\n\n    val command = ListBooksQuery()\n    val result = queryHandlers[command::class.toString()].handle(command)\n\n    // Should print the list of BookDto\n    print(result)\n}\n</code></pre>\n\n<p>I don't even know if its possible, to be honest. </p>\n\n<p><strong>UPDATE 1:</strong>\nI changed the usage example in the main to show what I am really trying to do. The <code>List</code> was for (bad?) demonstration purpose. I want to store the <code>QueryHandler</code>s and retrieve them from a map. </p>\n\n<p><strong>Additional resources:</strong></p>\n\n<p>Here is what I really want to do: \n<a href=\"https://gist.github.com/ValentinTrinque/76b7a32221884a46e657090b9ee60193\" rel=\"nofollow noreferrer\">https://gist.github.com/ValentinTrinque/76b7a32221884a46e657090b9ee60193</a></p>\n"}, {"tags": ["kotlin", "rx-java2"], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 3, "last_activity_date": 1526990392, "creation_date": 1526990392, "answer_id": 50467134, "question_id": 50466944, "link": "https://stackoverflow.com/questions/50466944/rxjava2-how-to-join-2-single-list-into-one-list/50467134#50467134", "title": "RxJava2 how to join 2 Single List into one list", "body": "<p>The <code>zipWith</code> operator works well here, as it lets you provide a <code>BiFunction</code> that describes how to combine the two <code>Single</code> instances (in this case, we just concatenate them with the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/plus.html\" rel=\"nofollow noreferrer\"><code>plus</code> operator</a>):</p>\n\n<pre><code>val zipped: Single&lt;List&lt;Type0&gt;&gt; = source1.zipWith(source2, BiFunction { l1, l2 -&gt; l1 + l2 })\n</code></pre>\n"}], "owner": {"reputation": 5174, "user_id": 2358309, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ca6af0c338582ec6f83b36fa9c48816?s=128&d=identicon&r=PG", "display_name": "antanas_sepikas", "link": "https://stackoverflow.com/users/2358309/antanas-sepikas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 50467134, "answer_count": 1, "score": 3, "last_activity_date": 1526990392, "creation_date": 1526989763, "last_edit_date": 1526990059, "question_id": 50466944, "link": "https://stackoverflow.com/questions/50466944/rxjava2-how-to-join-2-single-list-into-one-list", "title": "RxJava2 how to join 2 Single List into one list", "body": "<p>I have 2 different data sources that I want to combine. </p>\n\n<pre><code>val source1: Single&lt;List&lt;Type1&gt;&gt; = Single.fromCallable({\n    api.getSource1()\n})!!\n\nval source2: Single&lt;List&lt;Type2&gt;&gt; = Single.fromCallable({\n    api.getSource2()\n})!!\n\n//PS.\nclass Type0()\nclass Type1 : Type0()\nclass Type2 : Type0()\n</code></pre>\n\n<p>I want to join 2 sources and get </p>\n\n<pre><code>Single&lt;List&lt;Type0&gt;&gt; \n</code></pre>\n\n<p>so I could do further processing of the data, I think I should use .zip method, but I am not sure how to do it correctly.</p>\n"}, {"tags": ["arrays", "kotlin", "extension-function"], "answers": [{"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 1, "last_activity_date": 1526990087, "last_edit_date": 1526990087, "creation_date": 1526989683, "answer_id": 50466918, "question_id": 50466863, "link": "https://stackoverflow.com/questions/50466863/kotlin-val-cannot-be-reassigned-but-can-be-reassigned-by-accessing-from-inde/50466918#50466918", "title": "Kotlin - Val cannot be reassigned , but can be reassigned by accessing from index?", "body": "<p>You're confusing the mutability of references to objects and objects themselves.</p>\n\n<p>In the first example, the structure is mutable, but the reference to it is immutable. You can change the structure of the object itself, but you can't change what structure the references points to.</p>\n\n<p>In the second example, you're trying to change an immutable reference to an object, not the object itself.</p>\n\n<p>If you write</p>\n\n<pre><code>val i = obj\n</code></pre>\n\n<p><code>obj</code> can still be mutated if it's a mutable object. <code>i</code> can't be reassigned though, sine the reference can't be changed. </p>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 6, "last_activity_date": 1526989827, "creation_date": 1526989827, "answer_id": 50466966, "question_id": 50466863, "link": "https://stackoverflow.com/questions/50466863/kotlin-val-cannot-be-reassigned-but-can-be-reassigned-by-accessing-from-inde/50466966#50466966", "title": "Kotlin - Val cannot be reassigned , but can be reassigned by accessing from index?", "body": "<p>Similiarly to how <a href=\"https://stackoverflow.com/q/40563406/4465208\">function parameters are final in Kotlin</a>, so are the variables used in <code>for</code> loops. Essentially, writing down...</p>\n\n<pre><code>for (i in array) {\n    ...\n}\n</code></pre>\n\n<p>... is the equivalent of doing this in Java:</p>\n\n<pre><code>for (final int i : array) {\n    ...\n}\n</code></pre>\n\n<p>This helps catch some common errors, in this case - if the compiler allowed you - you'd be reassigning this local variable that just contains a reference to the real element, without changing the array. In Java terms, you'd be doing this:</p>\n\n<pre><code>for (int i : array) {\n    i = transform(i);\n}\n</code></pre>\n\n<p>This new value of <code>i</code> is unused, it doesn't change the array itself, and it will be immediately overwritten by the value of the next element when the loop comes around.</p>\n"}, {"tags": [], "owner": {"reputation": 13020, "user_id": 4505446, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GXF8z.png?s=128&g=1", "display_name": "A-Sharabiani", "link": "https://stackoverflow.com/users/4505446/a-sharabiani"}, "is_accepted": false, "score": 1, "last_activity_date": 1549930249, "last_edit_date": 1549930249, "creation_date": 1549929006, "answer_id": 54640834, "question_id": 50466863, "link": "https://stackoverflow.com/questions/50466863/kotlin-val-cannot-be-reassigned-but-can-be-reassigned-by-accessing-from-inde/54640834#54640834", "title": "Kotlin - Val cannot be reassigned , but can be reassigned by accessing from index?", "body": "<p>Try this:</p>\n\n<pre><code>for(i:Int in 0 until this.size) {\n    this[i] = \"your value\"\n}\n</code></pre>\n"}], "owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3953, "favorite_count": 0, "accepted_answer_id": 50466966, "answer_count": 3, "score": 2, "last_activity_date": 1549930249, "creation_date": 1526989496, "question_id": 50466863, "link": "https://stackoverflow.com/questions/50466863/kotlin-val-cannot-be-reassigned-but-can-be-reassigned-by-accessing-from-inde", "title": "Kotlin - Val cannot be reassigned , but can be reassigned by accessing from index?", "body": "<p>I have these two functions where i am trying to modify the elements. One of them compiles and other says 'val cannot be reassigned'. What is the difference between the following functions? Why does one compile and the other does not?</p>\n\n<p>The one that compiles</p>\n\n<pre><code>fun &lt;T&gt; Array&lt;T&gt;.mapInPlace2(transform: (T) -&gt; T) {\nfor (i in this.indices) {\n    this[i] = transform(this[i])\n}\n}\n</code></pre>\n\n<p>The one that says </p>\n\n<blockquote>\n  <p>Val cannot be reassigned</p>\n</blockquote>\n\n<pre><code>fun &lt;T&gt; Array&lt;T&gt;.mapInPlace1(transform: (T) -&gt; T) {\nfor (i in this) {\n    i = transform(i);\n}\n}\n</code></pre>\n"}, {"tags": ["arrays", "kotlin"], "comments": [{"owner": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526984800, "post_id": 50465292, "comment_id": 87943887, "body": "You need to assign this array to another array."}, {"owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "reply_to_user": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526984834, "post_id": 50465292, "comment_id": 87943907, "body": "I don&#39;&#39;t want to do that , how do i modify the existing array?"}, {"owner": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526984896, "post_id": 50465292, "comment_id": 87943955, "body": "Change the <code>val someArray</code> to <code>var someArray</code>. Then <code>someArray = someArray.map({num -&gt; num*2})</code>"}, {"owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "reply_to_user": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526985392, "post_id": 50465292, "comment_id": 87944262, "body": "Ok , is there any in which i can modify it without assiging it?"}, {"owner": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526985489, "post_id": 50465292, "comment_id": 87944304, "body": "Yes! Change the <code>val</code> to <code>var</code> to make it mutable. Then assign the result of the map to the same variable. That&#39;s what I meant in the previous comment."}, {"owner": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526985585, "post_id": 50465292, "comment_id": 87944361, "body": "What&#39;s wrong with re-assignment?"}, {"owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "reply_to_user": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526985607, "post_id": 50465292, "comment_id": 87944372, "body": "I understand what you are saying. My Question is , can i do this with a single function , like <code>someArray.someFunction({num -&gt; num*2})</code> which will modify the elements ?"}, {"owner": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526985738, "post_id": 50465292, "comment_id": 87944443, "body": "No! You can&#39;t. Because they are value types. Modification to any of them creates new item."}, {"owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "reply_to_user": {"reputation": 5827, "user_id": 3687801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ZUV5x.jpg?s=128&g=1", "display_name": "nayem", "link": "https://stackoverflow.com/users/3687801/nayem"}, "edited": false, "score": 0, "creation_date": 1526987024, "post_id": 50465292, "comment_id": 87945228, "body": "OK thanks for the help"}], "answers": [{"comments": [{"owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "edited": false, "score": 0, "creation_date": 1526985373, "post_id": 50465388, "comment_id": 87944252, "body": "Ok , is there any in which i can modify it without creating a new variable?"}], "tags": [], "owner": {"reputation": 8369, "user_id": 2340612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f11dcabc9115c80a16efc715b54a48b8?s=128&d=identicon&r=PG", "display_name": "user2340612", "link": "https://stackoverflow.com/users/2340612/user2340612"}, "is_accepted": false, "score": 7, "last_activity_date": 1526986304, "last_edit_date": 1526986304, "creation_date": 1526984753, "answer_id": 50465388, "question_id": 50465292, "link": "https://stackoverflow.com/questions/50465292/how-to-apply-map-function-to-array-in-kotlin-and-change-its-values/50465388#50465388", "title": "How to apply map function to array in Kotlin and change its values?", "body": "<p>From the documentation, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"noreferrer\"><code>map</code></a> doesn't modify the items in place but rather returns a <code>List</code> containing the result of the mapping function applied to all the items:</p>\n\n<blockquote>\n  <p>Returns a list containing the results of applying the given transform function to each element in the original array [or collection or map, depending on the receiver].</p>\n</blockquote>\n\n<p>So, to get the expected result you should do something like:</p>\n\n<pre><code>val doubled = someArray.map { n -&gt; n * 2}\ndoubled.forEach { print(\"$it , \") }\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>From what I know <strong>there's no built-in function allowing you to map items in-place</strong>. However, in your case you're dealing with an <code>Array</code>, which is a mutable data structure, so the alternative is to use an old-style loop to iteratively transform its items (you can apply the same logic with <code>MutableList</code> or other mutable data structures using an <code>Iterator</code> to update values). Something like this:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val someArray: Array&lt;Int&gt; = arrayOf(3, 53, 2, 521, 51, 23, 512, 34, 124);\n\n    someArray.forEach { print(\"$it , \") }\n\n    println()\n\n    for (i in 0 until someArray.size) {\n        someArray[i] = someArray[i] * 2\n    }\n\n    someArray.forEach { print(\"$it , \") }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 11, "last_activity_date": 1526988467, "creation_date": 1526988467, "answer_id": 50466530, "question_id": 50465292, "link": "https://stackoverflow.com/questions/50465292/how-to-apply-map-function-to-array-in-kotlin-and-change-its-values/50466530#50466530", "title": "How to apply map function to array in Kotlin and change its values?", "body": "<p>You could always define your own extension that does what you need:</p>\n\n<pre><code>fun &lt;T&gt; Array&lt;T&gt;.mapInPlace(transform: (T) -&gt; T) {\n    for (i in this.indices) {\n        this[i] = transform(this[i])\n    }\n}\n</code></pre>\n\n<p>Usage would look like this:</p>\n\n<pre><code>someArray.mapInPlace { num -&gt; num * 2 }\n</code></pre>\n\n<p>Note that there are special non-generic classes for primitive arrays, such as <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int-array/index.html\" rel=\"noreferrer\"><code>IntArray</code></a> (see also <a href=\"https://stackoverflow.com/q/45090808/4465208\">this question</a>), so you should probably be using those instead of the generic one. Of course then you'd have to define this extension for each of them separately, like:</p>\n\n<pre><code>fun IntArray.mapInPlace(transform: (Int) -&gt; Int) { ... }\nfun DoubleArray.mapInPlace(transform: (Double) -&gt; Double) { ... }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 1465013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587a2b7a233238f84feb6fd22c7d869?s=128&d=identicon&r=PG", "display_name": "Ryba", "link": "https://stackoverflow.com/users/1465013/ryba"}, "is_accepted": false, "score": 1, "last_activity_date": 1527050607, "creation_date": 1527050607, "answer_id": 50479954, "question_id": 50465292, "link": "https://stackoverflow.com/questions/50465292/how-to-apply-map-function-to-array-in-kotlin-and-change-its-values/50479954#50479954", "title": "How to apply map function to array in Kotlin and change its values?", "body": "<p>As many have stated, the map returns a new list and doesn't modify the original.</p>\n\n<p>The most efficient way to rewrite your intended code is to do </p>\n\n<pre><code>// assuming you want to act upon individual elements in the list\nfun main(args : Array&lt;String&gt;) {\n    val someArray : Array&lt;Int&gt; =  arrayOf(3,53,2,521,51,23,512,34,124);\n    println(\"Original array is $someArray\")\n    someArray\n        .map { it * 2 }\n        .forEach { print(\"$it , \") }\n}\n</code></pre>\n\n<p>or if you just want to see the comma separated list of values</p>\n\n<pre><code>// really just want to print the transformed values instead\nfun main(args : Array&lt;String&gt;) {\n    val someArray : Array&lt;Int&gt; =  arrayOf(3,53,2,521,51,23,512,34,124);\n    println(\"Original array is $someArray\")\n    someArray\n        .map { it * 2 }\n        .also { print(it.joinToString()) }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3091357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43df8160054d93c0ffedeff49913231e?s=128&d=identicon&r=PG", "display_name": "David Varela", "link": "https://stackoverflow.com/users/3091357/david-varela"}, "is_accepted": false, "score": 2, "last_activity_date": 1585145993, "creation_date": 1585145993, "answer_id": 60850739, "question_id": 50465292, "link": "https://stackoverflow.com/questions/50465292/how-to-apply-map-function-to-array-in-kotlin-and-change-its-values/60850739#60850739", "title": "How to apply map function to array in Kotlin and change its values?", "body": "<p>An alternative is to use <code>forEachIndexed</code> instead of <code>map</code>. Replace</p>\n\n<pre><code>someArray.map({num -&gt; num*2})    \n</code></pre>\n\n<p>by</p>\n\n<pre><code>someArray.forEachIndexed{ index, num -&gt; someArray[index] = num * 2 }    \n</code></pre>\n"}], "owner": {"reputation": 6444, "user_id": 6642927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57af95b5ffd1f8c320e0647d92d66acc?s=128&d=identicon&r=PG&f=1", "display_name": "Dishonered", "link": "https://stackoverflow.com/users/6642927/dishonered"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17750, "favorite_count": 1, "accepted_answer_id": 50466530, "answer_count": 4, "score": 11, "last_activity_date": 1585145993, "creation_date": 1526984500, "last_edit_date": 1562744058, "question_id": 50465292, "link": "https://stackoverflow.com/questions/50465292/how-to-apply-map-function-to-array-in-kotlin-and-change-its-values", "title": "How to apply map function to array in Kotlin and change its values?", "body": "<p>I am working with this code.</p>\n\n<pre><code>fun main(args : Array&lt;String&gt;){\n\n    val someArray : Array&lt;Int&gt; =  arrayOf(3,53,2,521,51,23,512,34,124);\n\n    println(\"Original array is \")\n\n    someArray.forEach {print(\"$it , \")}\n\n    someArray.map({num -&gt; num*2})\n\n    println(\"Changed array is \")\n\n    println()\n\n    someArray.forEach { print(\"$it , \") }\n}\n</code></pre>\n\n<p>But the map function does not seem to work. Here is what it prints</p>\n\n<p>Original array is \n3 , 53 , 2 , 521 , 51 , 23 , 512 , 34 , 124 , Changed array is </p>\n\n<p>3 , 53 , 2 , 521 , 51 , 23 , 512 , 34 , 124 , </p>\n\n<p>My question is why is the array not doubling the value of its elements? What i am i missing here?</p>\n"}, {"tags": ["java", "spring", "kotlin", "reactive-programming", "backpressure"], "comments": [{"owner": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1526983470, "post_id": 50464759, "comment_id": 87943055, "body": "Use <code>@RestController</code> not <code>@Controller</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3696644"}, "reply_to_user": {"reputation": 93551, "user_id": 2696260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qHEzx.png?s=128&g=1", "display_name": "M. Deinum", "link": "https://stackoverflow.com/users/2696260/m-deinum"}, "edited": false, "score": 0, "creation_date": 1526988181, "post_id": 50464759, "comment_id": 87945950, "body": "Now Jackson kicks in and tries to serialize the response  <code>nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionExceptio&zwnj;&#8203;n: No serializer found for class org.springframework.web.reactive.function.client.DefaultClie&zwnj;&#8203;ntResponse</code>"}, {"owner": {"reputation": 1379, "user_id": 2064622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec33b1bb6cc8a1fdcbdc6e22a3e5bf34?s=128&d=identicon&r=PG", "display_name": "splatch", "link": "https://stackoverflow.com/users/2064622/splatch"}, "edited": false, "score": 1, "creation_date": 1527067652, "post_id": 50464759, "comment_id": 87982300, "body": "@KrzysztofPalka I think error message is qutie clear - you have no serializer which can handle <code>ClientResponse</code>/<code>DefaultClientResponse</code> type."}], "owner": {"user_type": "does_not_exist", "display_name": "user3696644"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1526989406, "creation_date": 1526982875, "last_edit_date": 1526989406, "question_id": 50464759, "link": "https://stackoverflow.com/questions/50464759/how-to-set-up-spring-controller-to-handle-a-backpressured-request", "title": "How to set up Spring Controller to handle a backpressured request", "body": "<p>Spring MVC controller is to be used as a proxy for another service to serving possibly large files.</p>\n\n<p>To avoid storing the whole WebClient response from another service in memory at any given time I wanted to use reactive properties of Spring 5 + Reactor project and stream its response as it's consumed by the browser.</p>\n\n<p>The current code looks like</p>\n\n<pre><code>import org.springframework.stereotype.Controller\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.web.reactive.function.client.ClientResponse\nimport org.springframework.web.reactive.function.client.WebClient\nimport reactor.core.publisher.Mono\n\n@Controller\nclass ReportController {\n\n    @GetMapping(\"/reports\")\n    fun getReport(): Mono&lt;ClientResponse&gt; {\n        val webCient = WebClient.create()\n        return webCient\n                .get()\n                .uri(\"http://localhost:3333/file\")\n                .exchange()\n    }\n}\n</code></pre>\n\n<p>And it causes</p>\n\n<pre><code>java.lang.IllegalStateException: Could not resolve view with name 'reports'.\n    at org.springframework.web.reactive.result.view.ViewResolutionResultHandler.lambda$resolveViews$3(ViewResolutionResultHandler.java:277) ~[spring-webflux-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n</code></pre>\n\n<ul>\n<li>How to configure the controller to handle <code>Mono&lt;ClientResponse&gt;</code>?</li>\n<li>If the response is of type <code>Mono</code> will the request be backpressured? Is there a need to convert it to bytes chunks and make it <code>Flow</code>?</li>\n<li>Spring documentation says a lot of benefits of backpressure but doesn't answer the question above, nor gives any warning about <code>Mono</code> response. Is it still reactive?</li>\n</ul>\n"}, {"tags": ["android", "gradle", "kotlin", "android-architecture-components", "android-paging"], "comments": [{"owner": {"reputation": 124, "user_id": 7637668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rZehXc8lrSw/AAAAAAAAAAI/AAAAAAAAACM/CM1bcItAwV0/photo.jpg?sz=128", "display_name": "Ihor Tovkach", "link": "https://stackoverflow.com/users/7637668/ihor-tovkach"}, "reply_to_user": {"reputation": 85180, "user_id": 493939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa881f5e177eb698ff51740270bf6f52?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/493939/user"}, "edited": false, "score": 0, "creation_date": 1526981160, "post_id": 50464077, "comment_id": 87941459, "body": "I apologize, there is a typo"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1526985062, "post_id": 50464077, "comment_id": 87944063, "body": "You probably didn&#39;t add <code>google()</code> repository to project build gradle"}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1539622066, "post_id": 50464077, "comment_id": 92559592, "body": "If there is a typo, you should <a href=\"https://stackoverflow.com/posts/50464077/edit\">edit</a> your post and correct it. Are you sure the error was containing &quot;<i>Gragle</i>&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "is_accepted": true, "score": 1, "last_activity_date": 1526981454, "creation_date": 1526981454, "answer_id": 50464272, "question_id": 50464077, "link": "https://stackoverflow.com/questions/50464077/implementation-android-arch-pagingruntime1-0-0/50464272#50464272", "title": "Implementation android.arch.paging:runtime:1.0.0", "body": "<p>add below dependecy into app level gradle file.</p>\n\n<pre><code>implementation \"android.arch.paging:runtime:1.0.0-alpha4-1\"\n</code></pre>\n\n<p>and also check your adapter like below this code..</p>\n\n<pre><code>public class UserAdapter extends PagedListAdapter&lt;User, UserAdapter.UserItemViewHolder&gt; {\n\n\npublic UserAdapter() {\n    super(User.DIFF_CALLBACK);\n}\n\n@Override\npublic UserItemViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n    LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\n    View view = layoutInflater.inflate(R.layout.item_user_list, parent, false);\n    return new UserItemViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(UserItemViewHolder holder, int position) {\n    User user= getItem(position);\n    if(user!=null) {\n        holder.bindTo(user);\n    }\n}\n\nstatic class UserItemViewHolder extends RecyclerView.ViewHolder {\n    TextView userName, userId;\n\n    public UserItemViewHolder(View itemView) {\n        super(itemView);\n        userId = itemView.findViewById(R.id.userId);\n        userName = itemView.findViewById(R.id.userName);\n    }\n\n    public void bindTo(User user) {\n        userName.setText(user.firstName);\n        userId.setText(String.valueOf(user.userId));\n    }\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 7637668, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rZehXc8lrSw/AAAAAAAAAAI/AAAAAAAAACM/CM1bcItAwV0/photo.jpg?sz=128", "display_name": "Ihor Tovkach", "link": "https://stackoverflow.com/users/7637668/ihor-tovkach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 50464272, "answer_count": 1, "score": 0, "last_activity_date": 1580890865, "creation_date": 1526980867, "last_edit_date": 1580890865, "question_id": 50464077, "link": "https://stackoverflow.com/questions/50464077/implementation-android-arch-pagingruntime1-0-0", "title": "Implementation android.arch.paging:runtime:1.0.0", "body": "<p>After adding the library to gradle:</p>\n\n<pre><code>implementation 'android.arch.paging:runtime:1.0.0'\n</code></pre>\n\n<p>With the PagerListAdapter in the project, it produces an error:</p>\n\n<blockquote>\n  <p>\"Add library 'Gragle: android.arch.paging:runtime-1.0.0' t\u043e classpath\"</p>\n</blockquote>\n"}, {"tags": ["android", "kotlin", "radio-button"], "comments": [{"owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "edited": false, "score": 0, "creation_date": 1526980668, "post_id": 50462978, "comment_id": 87941117, "body": "Are you using the kotlin-kapt plugin? (Just so I know what to use in my answer)"}, {"owner": {"reputation": 2178, "user_id": 7199720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TosjU.jpg?s=128&g=1", "display_name": "Leone", "link": "https://stackoverflow.com/users/7199720/leone"}, "reply_to_user": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "edited": false, "score": 0, "creation_date": 1526983321, "post_id": 50462978, "comment_id": 87942940, "body": "@AnthonyCannon No. Just plain kotlin."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 9827306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O4faKYMV3uE/AAAAAAAAAAI/AAAAAAAAAAs/WZZtN6nkvZY/photo.jpg?sz=128", "display_name": "Ali bana", "link": "https://stackoverflow.com/users/9827306/ali-bana"}, "is_accepted": false, "score": 0, "last_activity_date": 1594441726, "last_edit_date": 1594441726, "creation_date": 1526980097, "answer_id": 50463848, "question_id": 50462978, "link": "https://stackoverflow.com/questions/50462978/android-checking-radio-button-in-code-makes-it-stay-checked-in-a-radiogroup/50463848#50463848", "title": "Android checking radio button in code makes it stay checked in a radiogroup", "body": "<p>I use this code for RadioButton.</p>\n<pre><code>radio_rg.setOnCheckedChangeListener { _, checkedId -&gt;\n    val radio: RadioButton = findViewById(checkedId)\n    when (radio) {\n        radioBtn1 -&gt; {\n            // some code\n        }\n        radioBtn2 -&gt; {\n             // some code\n        }\n    }\n}\n</code></pre>\n<p>Hope this helps you.</p>\n<p>About no RadioButton being checked, I've never tried it.</p>\n"}, {"comments": [{"owner": {"reputation": 2178, "user_id": 7199720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TosjU.jpg?s=128&g=1", "display_name": "Leone", "link": "https://stackoverflow.com/users/7199720/leone"}, "edited": false, "score": 0, "creation_date": 1526984428, "post_id": 50464340, "comment_id": 87943665, "body": "Thanks man. The <code>index</code> in <code>radioGroup.check</code> call is rather the radio button <code>Id</code>. In addition to that, I had to do the <code>radioGroup.check(index)</code> call after adding all the radio buttons."}, {"owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "reply_to_user": {"reputation": 2178, "user_id": 7199720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TosjU.jpg?s=128&g=1", "display_name": "Leone", "link": "https://stackoverflow.com/users/7199720/leone"}, "edited": false, "score": 0, "creation_date": 1526985293, "post_id": 50464340, "comment_id": 87944212, "body": "Ah yes, my mistake. Ill update my answer. Glad I can help."}, {"owner": {"reputation": 4336, "user_id": 2820534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/O63Ag.jpg?s=128&g=1", "display_name": "Prabs", "link": "https://stackoverflow.com/users/2820534/prabs"}, "edited": false, "score": 1, "creation_date": 1543913791, "post_id": 50464340, "comment_id": 94079260, "body": "my bad, I was doing <code>radioButton.isSelected = ... </code> It is isChecked instead"}], "tags": [], "owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "is_accepted": true, "score": 6, "last_activity_date": 1526985348, "last_edit_date": 1526985348, "creation_date": 1526981642, "answer_id": 50464340, "question_id": 50462978, "link": "https://stackoverflow.com/questions/50462978/android-checking-radio-button-in-code-makes-it-stay-checked-in-a-radiogroup/50464340#50464340", "title": "Android checking radio button in code makes it stay checked in a radiogroup", "body": "<p>Instead of setting <code>radioButton.isChecked = ...</code>. Try using the <code>radioGroup.check(id)</code>.</p>\n"}], "owner": {"reputation": 2178, "user_id": 7199720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TosjU.jpg?s=128&g=1", "display_name": "Leone", "link": "https://stackoverflow.com/users/7199720/leone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6661, "favorite_count": 1, "accepted_answer_id": 50464340, "answer_count": 2, "score": 5, "last_activity_date": 1594441726, "creation_date": 1526977188, "last_edit_date": 1526977479, "question_id": 50462978, "link": "https://stackoverflow.com/questions/50462978/android-checking-radio-button-in-code-makes-it-stay-checked-in-a-radiogroup", "title": "Android checking radio button in code makes it stay checked in a radiogroup", "body": "<p>I have a dynamically added radio buttons in a <code>RadioGroup</code>. And I have to check one of them in code based on some data.</p>\n\n<p>Now, the issue is after the radio buttons are shown and the user checks on another radio button in the same group, the previously selected radio is still checked ... resulting in two checked <code>RadioButtons</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hSQze.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hSQze.png\" alt=\"Radio buttons with one of them that can&#39;t be unchecked\"></a></p>\n\n<p>This is how I am rendering the buttons in Kotlin:</p>\n\n<pre><code>val rg = RadioGroup(this).apply { orientation = RadioGroup.HORIZONTAL }\nchoices.values.forEach { c -&gt;\n    rg.addView(RadioButton(this).apply {\n        tag = someTag\n        text = c\n        isChecked = answer.equals(c) // condition\n    })\n}\n</code></pre>\n\n<p>The strange thing is it all works fine if no <code>RadioButton</code> is checked programmatically.</p>\n"}, {"tags": ["firebase", "kotlin", "google-cloud-firestore", "google-cloud-functions"], "comments": [{"owner": {"reputation": 51583, "user_id": 3371862, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/DyCE6.png?s=128&g=1", "display_name": "Renaud Tarnec", "link": "https://stackoverflow.com/users/3371862/renaud-tarnec"}, "edited": false, "score": 1, "creation_date": 1526975699, "post_id": 50462335, "comment_id": 87938049, "body": "One possibility could be to call a Cloud Function to get (i.e. read) the data, for example a Callable Functions, see <a href=\"https://firebase.google.com/docs/functions/callable\" rel=\"nofollow noreferrer\">firebase.google.com/docs/functions/callable</a>. However there might be better/smarter approaches :-) ... curious to see other answers."}], "answers": [{"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 1, "last_activity_date": 1526977470, "creation_date": 1526977470, "answer_id": 50463068, "question_id": 50462335, "link": "https://stackoverflow.com/questions/50462335/best-way-to-trigger-function-when-data-is-being-read-google-cloud-functions/50463068#50463068", "title": "Best way to trigger function when data is being read. Google Cloud Functions", "body": "<p>There are no triggers for reading data.  That would not be scalable to provide.  If you require a last read time, you will have to control access to your database via some middleware component that you write, and have all readers query that instead.  It will be responsible for writing the last read time back to the database.</p>\n\n<p>Bear in mind that Firestore documents can only be written about once every second, so if you have a lot of access to a document, you may lose data.</p>\n"}], "owner": {"reputation": 39, "user_id": 9413360, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209978543447825/picture?type=large", "display_name": "Casper Christensen", "link": "https://stackoverflow.com/users/9413360/casper-christensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526977470, "creation_date": 1526974987, "last_edit_date": 1526975791, "question_id": 50462335, "link": "https://stackoverflow.com/questions/50462335/best-way-to-trigger-function-when-data-is-being-read-google-cloud-functions", "title": "Best way to trigger function when data is being read. Google Cloud Functions", "body": "<p>I am trying to figure out the best way to execute my cloud function for my firestore database, when data is being read.</p>\n\n<p>I have a field on all of my documents with the timestamp of when the document was last used, this is used to delete documents that haven't been used in two days. The deletion is done by another cloud function.</p>\n\n<p>I want to update this field, when the documents is being used AKA read from my db. What would be the best way to do this?</p>\n\n<p>onWrite(), onCreate(), onUpdate() and onDelete() is not an option.</p>\n\n<p>My database is used by a Android App written in Kotlin.</p>\n"}, {"tags": ["hibernate", "spring-boot", "jpa", "kotlin", "spring-data"], "answers": [{"comments": [{"owner": {"reputation": 1803, "user_id": 5289288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c64cc31ab2af73da608da7fa7b1e710?s=128&d=identicon&r=PG&f=1", "display_name": "Max Farsikov", "link": "https://stackoverflow.com/users/5289288/max-farsikov"}, "edited": false, "score": 2, "creation_date": 1599565033, "post_id": 50462415, "comment_id": 112806807, "body": "Helped me, Thanks! Annotation on getter is not required and could be removed."}, {"owner": {"reputation": 895, "user_id": 1423361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a007e6e204e858571d182fe4adb54a?s=128&d=identicon&r=PG", "display_name": "Robert Elliot", "link": "https://stackoverflow.com/users/1423361/robert-elliot"}, "edited": false, "score": 0, "creation_date": 1614003826, "post_id": 50462415, "comment_id": 117243619, "body": "I get a NullPointerException when I try this. Looks like when Hibernate deserializes the entity out of the database the transient field initialisers don&#39;t fire, so shop is null."}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 895, "user_id": 1423361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f4a007e6e204e858571d182fe4adb54a?s=128&d=identicon&r=PG", "display_name": "Robert Elliot", "link": "https://stackoverflow.com/users/1423361/robert-elliot"}, "edited": false, "score": 0, "creation_date": 1614021086, "post_id": 50462415, "comment_id": 117251671, "body": "@RobertElliot it sounds like you&#39;re not using a delegate here."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 14, "last_activity_date": 1526975277, "creation_date": 1526975277, "answer_id": 50462415, "question_id": 50461756, "link": "https://stackoverflow.com/questions/50461756/jpa-by-kotlin-by-lazy-and-transient-not-work-with-hibernate/50462415#50462415", "title": "JPA by kotlin: by lazy and @Transient not work with hibernate", "body": "<p>The delegates are stored as a <em>field</em> in your class. As such it'll be accessed <code>shop$delegate</code>.</p>\n\n<p>You might need to mark the delegate as transient as well:</p>\n\n<pre><code>@delegate:Transient\n@get:Transient\nprivate val shop:Shop by lazy { shopService.shop(shopId!!) }\n</code></pre>\n"}], "owner": {"reputation": 1378, "user_id": 5352915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/WcPkI.png?s=128&g=1", "display_name": "Guisong He", "link": "https://stackoverflow.com/users/5352915/guisong-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 1, "accepted_answer_id": 50462415, "answer_count": 1, "score": 5, "last_activity_date": 1526975277, "creation_date": 1526972957, "question_id": 50461756, "link": "https://stackoverflow.com/questions/50461756/jpa-by-kotlin-by-lazy-and-transient-not-work-with-hibernate", "title": "JPA by kotlin: by lazy and @Transient not work with hibernate", "body": "<p>I use kotlin with JPA in my project but the kotlin's by lazy delegation seems not work with hibernate:</p>\n\n<pre><code>    @get:Transient\n    private val shop:Shop by lazy { shopService.shop(shopId!!) }\n</code></pre>\n\n<p>and I get error:</p>\n\n<pre><code>org.hibernate.MappingException: Could not determine type for: kotlin.Lazy, at table: order, for columns: [org.hibernate.mapping.Column(shop$delegate)]\nat org.hibernate.mapping.SimpleValue.getType(SimpleValue.java:456) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:423) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.mapping.Property.isValid(Property.java:226) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.mapping.PersistentClass.validate(PersistentClass.java:597) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.mapping.RootClass.validate(RootClass.java:265) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.boot.internal.MetadataImpl.validate(MetadataImpl.java:329) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:461) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:892) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:57) ~[spring-orm-5.0.6.RELEASE.jar:5.0.6.RELEASE]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.0.6.RELEASE.jar:5.0.6.RELEASE]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) ~[spring-orm-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n... 20 common frames omitted\n</code></pre>\n\n<p>Is something I missing here?</p>\n"}, {"tags": ["java", "android", "android-fragments", "kotlin", "communication"], "comments": [{"owner": {"reputation": 1, "user_id": 2675933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4035674add957f997c3a783705f87cec?s=128&d=identicon&r=PG&f=1", "display_name": "user2675933", "link": "https://stackoverflow.com/users/2675933/user2675933"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1526973089, "post_id": 50461553, "comment_id": 87936627, "body": "Only one activity is visible at a time, but their instances remain in memory (at least for the first few minutes after one starts the other). First Activity A the MapsActivity is visible, then Activity B for Bluetooth is Visible when it hides A (assuming that it starts). Activity A is the main activity for the application. Activity B just serves as a helper. I want to be able to make changes to the main activity even when it resides in the background as well as when it is visible to the user and when it is interacting with the user."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2675933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4035674add957f997c3a783705f87cec?s=128&d=identicon&r=PG&f=1", "display_name": "user2675933", "link": "https://stackoverflow.com/users/2675933/user2675933"}, "is_accepted": true, "score": 0, "last_activity_date": 1527052053, "creation_date": 1527052053, "answer_id": 50480214, "question_id": 50461553, "link": "https://stackoverflow.com/questions/50461553/communication-between-two-android-activities-via-reference-to-caller-or-callee/50480214#50480214", "title": "Communication Between Two Android Activities via Reference to Caller or Callee", "body": "<p>You are using the wrong approach. The solution requires a bit more work than you would think. The correct approach is to:</p>\n\n<p>First, realize that these activities Activity A and Activity B (and any other activities) are activities that are specific to your application and you want to establish direct communication between them.</p>\n\n<p>Second, realize that you are trying to get the current (or a previous) activity's context. The context will help serve the reference.</p>\n\n<p>Third, you can create your own Activity and Application classes by extending the desired classes. The Application class is a low-level class used for the activities.</p>\n\n<p>From here, you will be able to make use of the getApplicationContext() which will return your custom Application class.</p>\n\n<p>Design: It is inside of your CustomApplication class that you must track the references to the activities that you want. From there all that you have to do is cast the getApplicationContext() to your CustomApplication class and then call your methods that access the Activity(ies). You must of course cast your Activities if you want to access certain instances of a specific activity that you created to its \"type.\" For example:</p>\n\n<pre><code>MapsActivity mact = (MapsActivity)(((MyApplication)(this.getApplicationContext())).getCurrentActivity())\n</code></pre>\n\n<p>You must of course note that this activity must be already created (the onCreate method was already called) for this to return the current activity. The same of course goes for the other life-cycle methods for the activity as you will make a baseActivity which will deal with these as well as you will also have an Application life-cycle that will help deal with this too.</p>\n\n<p>To answer the question: \"How to get the current foreground activity context in android?\" I turned to StackOverflow and found user: gezdy 's answer to be exactly what I needed at: <a href=\"https://stackoverflow.com/questions/11411395/how-to-get-current-foreground-activity-context-in-android\">How to get current foreground activity context in android?</a>.</p>\n\n<p>(BEGIN QUOTATION FROM: GEZDY)</p>\n\n<blockquote>\n  <p>You should manage activities references. Add the name of the\n  application in the manifest file :</p>\n\n<pre><code> &lt;application\n    android:name=\".MyApp\"\n    ....\n &lt;/application&gt;\n</code></pre>\n  \n  <p>Your application class :</p>\n\n<pre><code>public class MyApp extends Application {\n     public void onCreate() {\n          super.onCreate();\n     }\n\n     private Activity mCurrentActivity = null;\n     public Activity getCurrentActivity(){\n          return mCurrentActivity;\n     }\n     public void setCurrentActivity(Activity mCurrentActivity){\n          this.mCurrentActivity = mCurrentActivity;\n     }\n}\n</code></pre>\n  \n  <p>Create a new Activity :</p>\n\n<pre><code>public class MyBaseActivity extends Activity {\n    protected MyApp mMyApp;\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mMyApp = (MyApp)this.getApplicationContext();\n    }\n    protected void onResume() {\n        super.onResume();\n        mMyApp.setCurrentActivity(this);\n    }\n    protected void onPause() {\n        clearReferences();\n        super.onPause();\n    }\n    protected void onDestroy() {        \n        clearReferences();\n        super.onDestroy();\n    }\n    private void clearReferences(){\n        Activity currActivity = mMyApp.getCurrentActivity();\n        if (this.equals(currActivity))\n            mMyApp.setCurrentActivity(null);\n    }\n}\n</code></pre>\n  \n  <p>So, now instead of extending Activity class for your activities, just\n  extend MyBaseActivity. Now, you can get your current activity from\n  application or Activity context like that :</p>\n\n<pre><code>Activity currentActivity = ((MyApp)context.getApplicationContext()).getCurrentActivity();\n</code></pre>\n</blockquote>\n\n<p>(END OF QUOTATION FROM: GEZDY)</p>\n\n<p>Note: All code is written in java for this answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 2675933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4035674add957f997c3a783705f87cec?s=128&d=identicon&r=PG&f=1", "display_name": "user2675933", "link": "https://stackoverflow.com/users/2675933/user2675933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 50480214, "answer_count": 1, "score": 0, "last_activity_date": 1527052053, "creation_date": 1526972131, "question_id": 50461553, "link": "https://stackoverflow.com/questions/50461553/communication-between-two-android-activities-via-reference-to-caller-or-callee", "title": "Communication Between Two Android Activities via Reference to Caller or Callee", "body": "<p>I have two activities Activity A and Activity B inside of the same application and they need to be able to call methods on each other. A needs to communicate to B at the start (possibly see \"code\" below).</p>\n\n<p>B will call a lot of methods on A (this means that I cannot use the startActivityForResult method for communication because this would close B (Activity B is a Bluetooth Client and Server because it is a Peer to Peer app)). I do use startActivityForResult to start B for more of a kill signal than anything as the result.</p>\n\n<p>Activity A uses a SupportMapFragment and Activity B cannot be a fragment because I want to be able to switch from B to A and then never use B again.</p>\n\n<p>Originally, I started with one activity and tried switching between views using a ViewFlipper and just a call to setContentView(R.layout.my_layout_A) or setContentView(R.layout.my_layout_B). The fragment of course caused a lot of problems for both.</p>\n\n<p>Using Fragments were confusing. The SupportMapFragment is the code for a Google Map which is a Fragment.</p>\n\n<p>When I click a menu option inside of the MapsActivity (Activity A), I would like to be able to start myBluetoothActivity (Activity B) with a reference to the MapsActivity (Activity A) OR start myBluetoothActivity and then be able to set a reference to the caller inside of myBluetoothActivity (but this option would require having a reference to the BluetoothActivity inside of the MapsActivity or having some way to obtain the started activity from the intent).</p>\n\n<pre><code>//the following code is in Kotlin, but this can easily be converted over to java:\n//option A: (pass it inside of the constructor)\nvar mbta:myBluetoothActivity = myBluetoothActivity(this)\n//line for intent that I am unsure of\n//intent so that I can start the activity with the pointer to the caller already passed into the new activity\nstartActivity(mbta)\n\n//option B: (set this reference after obtaining a reference from intent):\nvar mintent:Intent = Intent(this.applicationContext, myBluetoothActivity::class.java)\nstartActivity(mintent)\n//obtain the reference to the BluetoothActivity from the intent (NOT SURE HOW TO DO THIS???)\nmbta.setCallerReference(this)\n</code></pre>\n\n<p>How can I accomplish this communication between the two activities via reference between the two activities? Should I use an interface for communication? If I should use it, (which I did try) how should I?</p>\n\n<p>In other words, I am trying to access the caller activity (Activity A) from (Activity B) directly via a reference to Activity A inside of B OR trying to get the reference to B from the intent that started it inside of Activity A. I am trying to get a reference to that, so I can use it for communication/method calling/member variable and UI modification purposes.</p>\n\n<p>NOTES: 1. The BluetoothActivity and the MapsActivity are NOT SERIALIZABLE. I tried serializing it and then adding it to the extras Bundle in the Intent and it just crashed saying that that was impossible to serialize due to BroadCastReciever. As this also deals with WIFI. Which I am highly considering separating out to be put with the BluetoothActivity in a future release.</p>\n\n<ol start=\"2\">\n<li><p>I am also ASSUMING that Activity B will never just be started up by anything other than my MapsActivity class.</p></li>\n<li><p>I am also new to Kotlin, but I know Java.</p></li>\n<li><p>When I tried using an interface, I caused a StackOverflow error and I have no idea why.</p></li>\n<li><p>I have read the documentation for Intents on the website.</p></li>\n<li><p>I have done some research on here which gave me those ideas above. I am not sure how to implement them.</p></li>\n</ol>\n"}, {"tags": ["java", "multithreading", "kotlin", "javax.imageio"], "comments": [{"owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1526971327, "post_id": 50461289, "comment_id": 87935718, "body": "What&#39;s your current code?"}, {"owner": {"reputation": 1636, "user_id": 1870799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27b7b7ec5ea21af0864b83d9107ac302?s=128&d=identicon&r=PG", "display_name": "Florian Reisinger", "link": "https://stackoverflow.com/users/1870799/florian-reisinger"}, "reply_to_user": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1526971585, "post_id": 50461289, "comment_id": 87935851, "body": "I linked the current code: <a href=\"https://github.com/reisi007/Reisishot-Photo-Tools/tree/master/Watermarking/src/main/kotlin/eu/reisihub/soft/watermarking\" rel=\"nofollow noreferrer\">github.com/reisi007/Reisishot-Photo-Tools/tree/master/&hellip;</a> and <a href=\"https://github.com/reisi007/Reisishot-Photo-Tools/blob/master/base/src/main/kotlin/eu/reisihub/shot/Utils.kt\" rel=\"nofollow noreferrer\">github.com/reisi007/Reisishot-Photo-Tools/blob/master/base/s&zwnj;&#8203;rc/&hellip;</a>  It is available at Github"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1526973106, "post_id": 50461289, "comment_id": 87936638, "body": "It needs to be available <i>here</i>. Nobody is going to chase your link."}, {"owner": {"reputation": 1636, "user_id": 1870799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27b7b7ec5ea21af0864b83d9107ac302?s=128&d=identicon&r=PG", "display_name": "Florian Reisinger", "link": "https://stackoverflow.com/users/1870799/florian-reisinger"}, "edited": false, "score": 0, "creation_date": 1526996366, "post_id": 50461289, "comment_id": 87951585, "body": "The <i>relevant</i> pieces of code in facr are available. <code>Files.newInputStream(this, StandardOpenOption.READ).use { ImageIO.read(it) }</code> This [when called from multiple threads] is the place where the exception happens. It won&#39;t happen if this piece is <code>synchronized</code>. Context: From a list of all JPG files, create task which reads one file and the error should be visible."}, {"owner": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1527007441, "post_id": 50461289, "comment_id": 87959053, "body": "Just a hunch, but I think that putting <code>ICC_Profile.getInstance(ColorSpace.CS_sRGB).getData();</code> in a <code>static</code> initializer block in your <code>UtilsKt</code> class will fix the problem. See <a href=\"https://github.com/haraldk/TwelveMonkeys/issues/402\" rel=\"nofollow noreferrer\">this</a> for further info. ;-)"}, {"owner": {"reputation": 1636, "user_id": 1870799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27b7b7ec5ea21af0864b83d9107ac302?s=128&d=identicon&r=PG", "display_name": "Florian Reisinger", "link": "https://stackoverflow.com/users/1870799/florian-reisinger"}, "reply_to_user": {"reputation": 23877, "user_id": 1428606, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=128&d=identicon&r=PG", "display_name": "Harald K", "link": "https://stackoverflow.com/users/1428606/harald-k"}, "edited": false, "score": 0, "creation_date": 1527050908, "post_id": 50461289, "comment_id": 87973304, "body": "@haraldK: This workaround works fine!"}], "answers": [{"tags": [], "owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "is_accepted": false, "score": 2, "last_activity_date": 1526973829, "creation_date": 1526973829, "answer_id": 50462016, "question_id": 50461289, "link": "https://stackoverflow.com/questions/50461289/imageio-read-diferent-files-concurrency-issue/50462016#50462016", "title": "ImageIO - Read diferent files concurrency issue?", "body": "<p>There is a <a href=\"https://bugs.openjdk.java.net/browse/JDK-8058973\" rel=\"nofollow noreferrer\">bug report</a> for OpenJDK titled 'NullPointerException from ICC_Profile.getInstance() in multi-thread application'. There is no resolution at time of writing.</p>\n"}, {"tags": [], "owner": {"reputation": 1636, "user_id": 1870799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27b7b7ec5ea21af0864b83d9107ac302?s=128&d=identicon&r=PG", "display_name": "Florian Reisinger", "link": "https://stackoverflow.com/users/1870799/florian-reisinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1527050802, "last_edit_date": 1527050802, "creation_date": 1526996125, "answer_id": 50469109, "question_id": 50461289, "link": "https://stackoverflow.com/questions/50461289/imageio-read-diferent-files-concurrency-issue/50469109#50469109", "title": "ImageIO - Read diferent files concurrency issue?", "body": "<p>UPDATE 2018-05-23</p>\n\n<p>@haraldK mentioned in a comment that loading images profiles before \nCode:</p>\n\n<pre><code>import java.awt.color.ColorSpace\nimport java.awt.color.ICC_Profile\nimport java.awt.image.BufferedImage\nimport java.nio.file.Path\nimport javax.imageio.ImageIO\n\nobject ImgLoadUtils {\n    init {\n        // Load deferred color space profiles to avoid \n        // ConcurrentModificationException due to JDK\n        // Use in public static main void or prior to application initialization\n        // https://github.com/haraldk/TwelveMonkeys/issues/402\n        // https://bugs.openjdk.java.net/browse/JDK-6986863\n        // https://stackoverflow.com/questions/26297491/imageio-thread-safety\n        ICC_Profile.getInstance(ColorSpace.CS_sRGB).getData();\n        ICC_Profile.getInstance(ColorSpace.CS_PYCC).getData();\n        ICC_Profile.getInstance(ColorSpace.CS_GRAY).getData();\n        ICC_Profile.getInstance(ColorSpace.CS_CIEXYZ).getData();\n        ICC_Profile.getInstance(ColorSpace.CS_LINEAR_RGB).getData();\n    }\n\n    fun loadImage(p: Path): BufferedImage = ImageIO.read(p.toFile())\n}\n</code></pre>\n\n<p><a href=\"https://github.com/haraldk/TwelveMonkeys/issues/402#issuecomment-376338476\" rel=\"nofollow noreferrer\">SOURCE</a></p>\n\n<hr>\n\n<p>Thanks for @Alex Taylor for the OpenJDK bug link. That assured me that I am not a total idiot.</p>\n\n<p>Instead of</p>\n\n<pre><code>fun Path.readImage(): BufferedImage =\n    Files.newInputStream(this, StandardOpenOption.READ).use { ImageIO.read(it) }\n</code></pre>\n\n<p>I am now using</p>\n\n<pre><code>fun Path.readImage(): BufferedImage =\n    ImageIcon(toUri().toURL()).let {\n        BufferedImage(it.iconWidth, it.iconHeight, BufferedImage.TYPE_INT_ARGB).apply {\n            it.paintIcon(null, createGraphics(), 0, 0)\n        }\n    }\n</code></pre>\n\n<p>This is per <a href=\"https://aacsinia.wordpress.com/2010/12/21/java-how-to-create-buffered-image-from-inputstream/\" rel=\"nofollow noreferrer\">https://aacsinia.wordpress.com/2010/12/21/java-how-to-create-buffered-image-from-inputstream/</a>. Speed is on par and error is gone [<strong>20+ runs</strong>]! IMHO <code>ImageIO.read</code> therefore should not be used in a multithreaded environment....</p>\n"}], "owner": {"reputation": 1636, "user_id": 1870799, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/27b7b7ec5ea21af0864b83d9107ac302?s=128&d=identicon&r=PG", "display_name": "Florian Reisinger", "link": "https://stackoverflow.com/users/1870799/florian-reisinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 2, "accepted_answer_id": 50469109, "answer_count": 2, "score": 0, "last_activity_date": 1527050802, "creation_date": 1526971102, "question_id": 50461289, "link": "https://stackoverflow.com/questions/50461289/imageio-read-diferent-files-concurrency-issue", "title": "ImageIO - Read diferent files concurrency issue?", "body": "<p>I am currently writing a program, which batch processes different images. So I thought that it might be clever to do the operation (Scaling / adding watermark) in parallel.</p>\n\n<p>The problem is I get the following error:</p>\n\n<pre><code>    Exception in thread \"main\" java.util.concurrent.ExecutionException: java.lang.NullPointerException\n    at java.base/java.util.concurrent.ForkJoinTask.get(ForkJoinTask.java:1006)\n    at eu.reisihub.soft.watermarking.Main$main$2$2$2$2.invoke(Main.kt:62)\n    at eu.reisihub.soft.watermarking.Main$main$2$2$2$2.invoke(Main.kt:19)\n    at kotlin.sequences.TransformingSequence$iterator$1.next(Sequences.kt:149)\n    at kotlin.sequences.TransformingSequence$iterator$1.next(Sequences.kt:149)\n    at kotlin.sequences.SequencesKt___SequencesKt.count(_Sequences.kt:1006)\n    at eu.reisihub.soft.watermarking.Main.main(Main.kt:66)\nCaused by: java.lang.NullPointerException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:488)\n    at java.base/java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:603)\n    ... 7 more\nCaused by: java.lang.NullPointerException\n    at java.desktop/java.awt.color.ICC_Profile.intFromBigEndian(ICC_Profile.java:1784)\n    at java.desktop/java.awt.color.ICC_Profile.getNumComponents(ICC_Profile.java:1476)\n    at java.desktop/sun.java2d.cmm.lcms.LCMSTransform.&lt;init&gt;(LCMSTransform.java:93)\n    at java.desktop/sun.java2d.cmm.lcms.LCMS.createTransform(LCMS.java:173)\n    at java.desktop/java.awt.color.ICC_ColorSpace.fromRGB(ICC_ColorSpace.java:230)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.setImageData(JPEGImageReader.java:808)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(Native Method)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(JPEGImageReader.java:723)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly(JPEGImageReader.java:347)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(JPEGImageReader.java:493)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(JPEGImageReader.java:716)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageReader.java:1173)\n    at java.desktop/com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:1153)\n    at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1468)\n    at java.desktop/javax.imageio.ImageIO.read(ImageIO.java:1363)\n    at eu.reisihub.shot.UtilsKt.readImage(Utils.kt:19)\n    at eu.reisihub.soft.watermarking.WatermarkUtils$create$1.invoke(WatermarkUtils.kt:18)\n    at eu.reisihub.soft.watermarking.WatermarkUtils$create$1.invoke(WatermarkUtils.kt:8)\n    at eu.reisihub.soft.watermarking.Main$sam$java_util_concurrent_Callable$0.call(Main.kt)\n    at java.base/java.util.concurrent.ForkJoinTask$AdaptedCallable.exec(ForkJoinTask.java:1448)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1603)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:177)\n</code></pre>\n\n<p>please note, that I know that there is a NPE in <code>java.desktop/java.awt.color.ICC_Profile.intFromBigEndian(ICC_Profile.java:1784)</code>. And believe me, it is NOT the image.</p>\n\n<p>I tried 2 approaches with Java 8 and Java 10. I have a fixed size thread pool with 6 threads for 4 cores. I am using Kotlin for the implementation and created an extension function <code>fun Path.readImage(): BufferedImage</code>. For people, who don't know Kotlin, for the purpose of this example only, would correspond roughly to <code>public BufferedImage readImage(Path this)</code>.</p>\n\n<p><strong>Naive approach</strong>\nReading the file using <code>Files.newInputStream(this, StandardOpenOption.READ).use { ImageIO.read(it) }</code>. This opens a new InputStream from the Path and tells ImageIO to read the image from this InputStream. Looks fine? Does not work ~every fourth time on Java 8 and roughly 90% on Java 10. BTW: If I wrap a synchronized block around this, it works - always. With 13 seconds to treat 17 images instead of 7 seconds.</p>\n\n<p>In the meantime I updated Gradle from 4.4 to 4.7. Before I configured IntelliJ to use Java 10 and Gradle to use Java 8. Might be the reason for the differences highlighted above. Side note. I always used <code>synchronized(System.err)</code>!</p>\n\n<p><strong>Sophisticated approach</strong>\nKnowing it works when synchronizing everything my method now looks more complicated and like this:</p>\n\n<pre><code>fun Path.readImage(): BufferedImage = Files.newInputStream(this, StandardOpenOption.READ).buffered().use {\n    var nStream: ImageInputStream? = null\n    var nReader: ImageReader? = null\n    synchronized(System.err) {\n        nStream = ImageIO.createImageInputStream(it) ?: throw IIOException(\"Can't create an ImageInputStream!\")\n\n        val iter = ImageIO.getImageReaders(nStream)\n        if (!iter.hasNext()) {\n            throw IIOException(\"No image nReader found!\")\n        }\n        nReader = iter.next()\n    }\n\n    nStream!!.let { stream -&gt;\n        nReader!!.let { reader -&gt;\n            reader.setInput(stream, true, true)\n            try {\n                println(reader)\n                return reader.read(0, null)\n            } finally {\n                reader.dispose()\n                stream.close()\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>See the <code>println</code> in the code? I know that for every Image a new <code>com.sun.imageio.plugins.jpeg.JPEGImageReader</code>object is created.This improves the performance to the 7 seconds I was talking to. Usually does not work 2-4 times and then works 6-10 times.</p>\n\n<p>The stacktrace for the sophisticated version is the following:</p>\n\n<pre><code>Exception in thread \"main\" java.util.concurrent.ExecutionException: java.lang.NullPointerException\n    at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n    at eu.reisihub.soft.watermarking.Main$main$1$2$2$2$2.invoke(Main.kt:64)\n    at eu.reisihub.soft.watermarking.Main$main$1$2$2$2$2.invoke(Main.kt:20)\n    at kotlin.sequences.TransformingSequence$iterator$1.next(Sequences.kt:149)\n    at kotlin.sequences.TransformingSequence$iterator$1.next(Sequences.kt:149)\n    at kotlin.sequences.SequencesKt___SequencesKt.count(_Sequences.kt:1006)\n    at eu.reisihub.soft.watermarking.Main$main$1.invoke(Main.kt:68)\n    at eu.reisihub.soft.watermarking.Main$main$1.invoke(Main.kt:20)\n    at eu.reisihub.shot.UtilsKt.measured(Utils.kt:54)\n    at eu.reisihub.soft.watermarking.Main.main(Main.kt:24)\nCaused by: java.lang.NullPointerException\n    at java.awt.color.ICC_Profile.intFromBigEndian(ICC_Profile.java:1782)\n    at java.awt.color.ICC_Profile.getNumComponents(ICC_Profile.java:1474)\n    at sun.java2d.cmm.lcms.LCMSTransform.&lt;init&gt;(LCMSTransform.java:98)\n    at sun.java2d.cmm.lcms.LCMS.createTransform(LCMS.java:173)\n    at java.awt.color.ICC_ColorSpace.fromRGB(ICC_ColorSpace.java:218)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.setImageData(JPEGImageReader.java:694)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImageHeader(Native Method)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readNativeHeader(JPEGImageReader.java:609)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.checkTablesOnly(JPEGImageReader.java:347)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.gotoImage(JPEGImageReader.java:481)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readHeader(JPEGImageReader.java:602)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageReader.java:1059)\n    at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:1039)\n    at eu.reisihub.shot.UtilsKt.readImage(Utils.kt:39)\n    at eu.reisihub.soft.watermarking.WatermarkUtils$create$1.invoke(WatermarkUtils.kt:16)\n    at eu.reisihub.soft.watermarking.WatermarkUtils$create$1.invoke(WatermarkUtils.kt:8)\n    at eu.reisihub.soft.watermarking.Main$sam$java_util_concurrent_Callable$0.call(Main.kt)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>Where <code>Main:64</code> is <code>Future#get</code>\nAnd <code>Main:68</code> is <code>kotlin.Sequence#count</code></p>\n\n<p>Location the Main.kt file: <a href=\"https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/Watermarking/src/main/kotlin/eu/reisihub/soft/watermarking/Main.kt\" rel=\"nofollow noreferrer\">https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/Watermarking/src/main/kotlin/eu/reisihub/soft/watermarking/Main.kt</a></p>\n\n<p>Location of Utils.kt file: <a href=\"https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/base/src/main/kotlin/eu/reisihub/shot/Utils.kt\" rel=\"nofollow noreferrer\">https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/base/src/main/kotlin/eu/reisihub/shot/Utils.kt</a></p>\n\n<p>I have tried improving the code for several hours and my head stopped spawning new ideas by now. I know that the mistake also happens with 2 pictures. As it does not always fail, the ICC profile must be correct. I am - honestly - conidering that my HDD is not sound and occasionally messes up. I also tried reading the files from my SSD. As per <a href=\"https://stackoverflow.com/a/26300361/1870799\">https://stackoverflow.com/a/26300361/1870799</a> the read method should be thread-safe. I have no idea whats happening. Every image on disk (represented by a Path), gets it's own <code>Callable&lt;Task&gt;</code>. I am only reading those images and writing it to a different folder. So foreach task one file is read, one file is written. These two files are NOT the same, every task has its own files.</p>\n\n<p>The only thing they share is a BufferedImage in PNG format, which is drawn on the read image (watermark). But that happens later. As can be seen in the stacktrace it happens when reading a JPEG image.</p>\n\n<pre><code>at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.java:1039)\nat eu.reisihub.shot.UtilsKt.readImage(Utils.kt:39)\n</code></pre>\n\n<p>If you want to execute the program, the JSON setting, whose path the main app needs, can be created using <a href=\"https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/Watermarking/src/main/kotlin/eu/reisihub/soft/watermarking/SettingsCreator.kt\" rel=\"nofollow noreferrer\">https://github.com/reisi007/Reisishot-Photo-Tools/blob/ea32a605657226edb6140911fd02f77d006163d3/Watermarking/src/main/kotlin/eu/reisihub/soft/watermarking/SettingsCreator.kt</a></p>\n\n<p>I appreciate any input. At the current point I do not know what is wrong...</p>\n\n<p>BTW: For some tasks I am using: <a href=\"https://github.com/coobird/thumbnailator\" rel=\"nofollow noreferrer\">https://github.com/coobird/thumbnailator</a></p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"tags": [], "owner": {"reputation": 5469, "user_id": 7083401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eA15o.png?s=128&g=1", "display_name": "ice1000", "link": "https://stackoverflow.com/users/7083401/ice1000"}, "is_accepted": false, "score": 0, "last_activity_date": 1526957343, "creation_date": 1526957343, "answer_id": 50459078, "question_id": 50458485, "link": "https://stackoverflow.com/questions/50458485/please-explain-property-delegates/50459078#50459078", "title": "Please Explain Property Delegates", "body": "<p>Once you can written something like</p>\n\n<pre><code>class C { var text by Textproperty }\n</code></pre>\n\n<p>all <code>c.text = blabla</code> will be compiled to <code>TextProperty.setValue(c, ::text, blabla)</code>, and <code>c.text</code> will be compiled to <code>TextProperty.getValue(c, ::text)</code>. This enables the library (the provider of <code>TextProperty</code>) to take over the operations on <code>text</code>.</p>\n\n<p>Ref: <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/delegated-properties.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 2, "last_activity_date": 1586694443, "last_edit_date": 1586694443, "creation_date": 1526975072, "answer_id": 50462363, "question_id": 50458485, "link": "https://stackoverflow.com/questions/50458485/please-explain-property-delegates/50462363#50462363", "title": "Please Explain Property Delegates", "body": "<p>The important point here is that JavaFX requires or at least prefers observable properties. Instead of declaring a mutable property, you would declare one of the JavaFX property types, depending on what property type you want (String, Double, Int etc). All you really need is to declare this property:</p>\n\n<pre><code>class Customer {\n    val ageProperty = SimpleIntegerProperty()\n}\n</code></pre>\n\n<p>You can get by with just this, without using any delegates. However, if you want to mutate this property, you need to change the <code>value</code> property inside the property you defined, so the code looks like this:</p>\n\n<p><code>customer.ageProperty.value = 42</code></p>\n\n<p>This is cumbersome, so to make it simple, you'd want to add getters and setters. Doing this manually would look something like this:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val ageProperty = SimpleIntegerProperty()\n    var age: Int\n        get() = ageProperty.value\n        set(value) { ageProperty.value = value }\n</code></pre>\n\n<p>Now you can set the age of a <code>Customer</code> like this:</p>\n\n<p><code>customer.age = 42</code></p>\n\n<p>This is much more convenient, but you'd have to declare all that code for each property, so in TornadoFX we introduced property delegates that takes care of all that with a simple statement, so:</p>\n\n<pre><code>val ageProperty = SimpleIntegerProperty()\nvar age by ageProperty\n</code></pre>\n\n<p>The end result is the same, without you having to do any of the heavy lifting.</p>\n\n<p>Just to be clear, this explains the property delegates, not why JavaFX properties are useful. JavaFX properties allow you to bind to a UI element, like a text field for example. Changes to the text field will be written back into the property, and changes to the property would be written back to the UI.</p>\n"}], "owner": {"reputation": 267, "user_id": 9388057, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750698268333853/picture?type=large", "display_name": "Nicholas DiPinto", "link": "https://stackoverflow.com/users/9388057/nicholas-dipinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 50462363, "answer_count": 2, "score": 0, "last_activity_date": 1586694443, "creation_date": 1526951862, "question_id": 50458485, "link": "https://stackoverflow.com/questions/50458485/please-explain-property-delegates", "title": "Please Explain Property Delegates", "body": "<p>I am trying to learn Kotlin and TornadoFX. One thing I keep seeing is code like this:</p>\n\n<pre><code>val TextProperty = SimpleStringProperty()\nvar text by Textproperty\n</code></pre>\n\n<p>I've been reading up on the documentation</p>\n\n<p><a href=\"https://edvin.gitbooks.io/tornadofx-guide/content/part2/Property%20Delegates.html\" rel=\"nofollow noreferrer\">https://edvin.gitbooks.io/tornadofx-guide/content/part2/Property%20Delegates.html</a></p>\n\n<p>so I've \"absorbed\" that they are useful for when values in a model change, but I need further help really grasping the concept. Something doesn't quite seem to be clicking. Does anyone have any examples, videos, etc. that demonstrate the purpose and usefulness of these property delegates?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1526938328, "post_id": 50456830, "comment_id": 87927240, "body": "Does the transformation necessarily mean that the predicate no longer holds for that member?"}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1526938403, "post_id": 50456830, "comment_id": 87927273, "body": "Yes, after a call to <code>transform()</code> col has one less member that satisfies the predicate"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1526938432, "post_id": 50456830, "comment_id": 87927279, "body": "Then maybe filter and map would be a simpler process?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1526938864, "post_id": 50456830, "comment_id": 87927459, "body": "So some member earlier in the list may now meet the predicate? In that case what you have is probably as clear as you&#39;ll get. You could use let to remove the temporary assignment: <code>col.firstOrNull { predicate(it) }?.let { transform(it) }</code>, perhaps."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1526940621, "post_id": 50456830, "comment_id": 87928005, "body": "Right, also <code>col.find { predicate(it) }?.let { transform(it) }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1526945182, "post_id": 50457378, "comment_id": 87929104, "body": "Nice, two observations  1) this also works although its a bit unusual: <code>do {} while (col.find { predicate(it) }?.also { transform(it) } != null)</code>  2) this also works: <code>do {} while (col.find { predicate(it) }?.let { transform(it) } != null)</code>   because my <code>transform()</code> returns <code>Unit</code>, <code>let</code> returns <code>Unit</code> as long predicate matches and then <code>null</code>"}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "edited": false, "score": 0, "creation_date": 1526945465, "post_id": 50457378, "comment_id": 87929183, "body": "And so finally we have this: <code>while (col.find { predicate(it) }?.also { transform(it) } != null) {}</code>"}, {"owner": {"reputation": 6703, "user_id": 1797950, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1KyYn.jpg?s=128&g=1", "display_name": "crgarridos", "link": "https://stackoverflow.com/users/1797950/crgarridos"}, "edited": false, "score": 0, "creation_date": 1526947397, "post_id": 50457378, "comment_id": 87929566, "body": "or even shorter <code>while(col.find(::predicate)?.also(::transform) != null);</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1526941838, "creation_date": 1526941838, "answer_id": 50457378, "question_id": 50456830, "link": "https://stackoverflow.com/questions/50456830/kotlin-idiomatic-way-to-process-collection-as-long-as-some-condition-holds/50457378#50457378", "title": "Kotlin idiomatic way to process collection as long as some condition holds", "body": "<p>In addition to what <a href=\"https://stackoverflow.com/users/3001761/jonrsharpe\">@jonrsharpe</a> said in the comment, your code seems to search for the item that matches the <code>predicate</code> twice on each iteration, first time in <code>any</code> and then in <code>find</code> (they find the same item).</p>\n\n<p>You can reduce that to only one search with <code>find</code>:</p>\n\n<pre><code>do {\n    val member = col.find { predicate(it) }?.also { transform(it) }\n} while (member != null)\n</code></pre>\n"}], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50457378, "answer_count": 1, "score": 1, "last_activity_date": 1526977884, "creation_date": 1526938020, "last_edit_date": 1526977884, "question_id": 50456830, "link": "https://stackoverflow.com/questions/50456830/kotlin-idiomatic-way-to-process-collection-as-long-as-some-condition-holds", "title": "Kotlin idiomatic way to process collection as long as some condition holds", "body": "<p>I'd like to perform a transformation on objects in a collection as long as there are objects that satisfy a predicate.</p>\n\n<p>After calling <code>transform(x)</code> the predicate no longer holds for <code>x</code> but may hold for some other <code>y</code> for which it didn't hold before. The algorithm is guaranteed to terminate, though. </p>\n\n<p>How can this be improved? </p>\n\n<pre><code>while( col.any (p -&gt; predicate(p)) ) {\n    val member = col.find { p -&gt; predicate(p) }!!\n    transform(member)\n}\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Combining the answers by @jonrsharpe and @hotkey all of the following are more concise and efficient</p>\n\n<pre><code>do {\n    val member = col.find { predicate(it) }?.also { transform(it) }\n} while (member != null)\n\n\ndo {\n} while (col.find { predicate(it) }?.also { transform(it) } != null)\n\n\n\nwhile (col.find { predicate(it) }?.also { transform(it) } != null) {}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "infinite-loop"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8231697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580388781980304/picture?type=large", "display_name": "Daniyel Rose", "link": "https://stackoverflow.com/users/8231697/daniyel-rose"}, "edited": false, "score": 0, "creation_date": 1526941265, "post_id": 50457000, "comment_id": 87928191, "body": "thanks i found the solution like you said onDataChange called every time data changes on database"}], "tags": [], "owner": {"reputation": 17743, "user_id": 558433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/XZg0R.jpg?s=128&g=1", "display_name": "Marcos Vasconcelos", "link": "https://stackoverflow.com/users/558433/marcos-vasconcelos"}, "is_accepted": true, "score": 1, "last_activity_date": 1526939165, "creation_date": 1526939165, "answer_id": 50457000, "question_id": 50456548, "link": "https://stackoverflow.com/questions/50456548/invisible-infinite-loop/50457000#50457000", "title": "Invisible infinite loop", "body": "<p>First, you had to debug and look where it happens, anyway I think it is inside <code>onDataChanged</code>  implementation\nSince you fire:</p>\n\n<pre><code> DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").child(\"Groups\").child(groupKey).child(\"members\").setValue(flag3)\n</code></pre>\n\n<p>setValue will happen to fire onDataChanged again.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8231697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580388781980304/picture?type=large", "display_name": "Daniyel Rose", "link": "https://stackoverflow.com/users/8231697/daniyel-rose"}, "is_accepted": false, "score": 0, "last_activity_date": 1526941143, "creation_date": 1526941143, "answer_id": 50457279, "question_id": 50456548, "link": "https://stackoverflow.com/questions/50456548/invisible-infinite-loop/50457279#50457279", "title": "Invisible infinite loop", "body": "<p>I found the problem</p>\n\n<pre><code>DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").addValueEventListener(object : ValueEventListener{\n    override fun onDataChange(dataSnapshot: DataSnapshot) {\n</code></pre>\n\n<p>Line makes onDataChange is called back every time data changes...(culprit is addValueEventListener) so i changed it to</p>\n\n<pre><code>BdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").addListenerForSingleValueEvent(object : ValueEventListener{\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n</code></pre>\n\n<p>addListenerForSingleValueEvent calls the onDataChange only once than destroys the all callbacks</p>\n"}], "owner": {"reputation": 11, "user_id": 8231697, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580388781980304/picture?type=large", "display_name": "Daniyel Rose", "link": "https://stackoverflow.com/users/8231697/daniyel-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 50457000, "answer_count": 2, "score": 0, "last_activity_date": 1526982546, "creation_date": 1526936378, "last_edit_date": 1526982546, "question_id": 50456548, "link": "https://stackoverflow.com/questions/50456548/invisible-infinite-loop", "title": "Invisible infinite loop", "body": "<p>I have an infinite loop in my code. Until I completely shut down the program, it is continuously writing data to my Firebase database... I am in real need, please help. I want my function MemberAdding execute just one time after button is clicked...</p>\n\n<pre><code>override fun MemberAdding(accountKey: String) {\n    DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").addValueEventListener(object : ValueEventListener{\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            groupKey = intent.getStringExtra(\"GroupKey\")\n            val flag = dataSnapshot.child(\"Groups\").child(groupKey).child(\"members\").value.toString()\n            val newpath = \"member\" + flag\n\n            DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").child(\"Groups\").child(groupKey).child(newpath).setValue(accountKey)\n\n        }\n\n\n        override fun onCancelled(databaseError: DatabaseError) {\n\n        }\n    })\n\n    DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").addValueEventListener(object : ValueEventListener{\n        override fun onDataChange(dataSnapshot: DataSnapshot) {\n            val groupKey = intent.getStringExtra(\"GroupKey\")\n            var flag = dataSnapshot.child(\"Groups\").child(groupKey).child(\"members\").value.toString()\n            val flag2 = flag.toInt()\n            val flag3 = flag2 + 1\n\n\n            DBdatabaseName!!.reference!!.child(user!!.currentUser!!.uid).child(\"Group-List\").child(\"Groups\").child(groupKey).child(\"members\").setValue(flag3)\n\n        }\n\n\n        override fun onCancelled(databaseError: DatabaseError) {\n\n        }\n    })\n\n\n\n    refresh()\n\n}\n\nprivate fun refresh() {\n    groupKey = intent.getStringExtra(\"GroupKey\")\n    val intent = Intent(this@GroupMemberAddingActivity, GroupMemberAddingActivity::class.java)\n    intent.putExtra(\"GroupKey\", groupKey)\n    startActivity(intent)\n}\n\n}\n</code></pre>\n\n<p>at below i will also send the Adapter class that i am using</p>\n\n<pre><code>class GroupMemberAddingItemAdapter (context: Context, friendItemList: MutableList&lt;FriendItem&gt;) : BaseAdapter() {\nprivate class  ListRowHolder (row: View? ) {\n    val label: TextView = row!!.findViewById(R.id.friendName_textview) as TextView\n    val addMember: Button? = row!!.findViewById(R.id.addMember_button) as Button\n\n}\n\nprivate val mInflater: LayoutInflater = LayoutInflater.from(context)\nprivate var itemList = friendItemList\nprivate var mView: View? = null\nprivate var rowListener: GroupMemberAddingRowListener = context as GroupMemberAddingRowListener\n\noverride fun getView(position: Int, convertView: View?, parent: ViewGroup?): View {\n\n    val friendName: String = itemList.get(position).friendName as String\n    val friendLastName: String = itemList.get(position).friendLastName as String\n    val friendemail: String = itemList.get(position).accountKey as String\n\n    val vh: ListRowHolder\n    if (convertView == null) {\n        mView = mInflater.inflate(R.layout.groupmemberadding_row, parent, false)\n\n        vh = ListRowHolder(mView)\n        mView!!.tag = vh\n    } else {\n        mView = convertView\n        vh = mView!!.tag as ListRowHolder\n    }\n\n    vh.label.text = \"$friendName $friendLastName\"\n    vh.addMember!!.setOnClickListener{rowListener.MemberAdding(friendemail)}\n\n    return mView!!\n\n}\n\noverride fun getItem(index: Int): Any {\n    return itemList[index]\n}\n\noverride fun getItemId(index: Int): Long {\n    return index.toLong()\n}\n\noverride fun getCount(): Int {\n    return itemList.size\n}\n}\n</code></pre>\n\n<p>my initial row listener is.....</p>\n\n<pre><code>interface GroupMemberAddingRowListener {\n    fun MemberAdding (accountKey:String)\n}\n</code></pre>\n\n<p>If you need any more code parts just tell me.... Thanks for helping</p>\n"}, {"tags": ["debugging", "intellij-idea", "kotlin", "static-variables"], "comments": [{"owner": {"reputation": 4174, "user_id": 925135, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/QSJJI.jpg?s=128&g=1", "display_name": "Renetik", "link": "https://stackoverflow.com/users/925135/renetik"}, "edited": false, "score": 0, "creation_date": 1534210832, "post_id": 50455973, "comment_id": 90619199, "body": "It was failing in debugger with some exceptions, then I searched for it, then tried again and it started working so I really don&#39;t know now, but there is nothing new in this answer for me."}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 6, "last_activity_date": 1526935474, "last_edit_date": 1526935474, "creation_date": 1526934825, "answer_id": 50456245, "question_id": 50455973, "link": "https://stackoverflow.com/questions/50455973/kotlin-companion-object-field-with-debugger/50456245#50456245", "title": "kotlin companion object field with debugger", "body": "<p>I assume you are using IntelliJ IDEA.</p>\n\n<p>Since <code>index</code> is neither a local variable nor a field of the current instance, there's no straightforward way to see its value in the debugger.</p>\n\n<p>If you need to evaluate <code>index</code> once, you can use the <em>Evaluate Expression</em> action (the default keyboard shortcut is <kbd>Alt</kbd>+<kbd>F8</kbd>), which is available in the debug window:</p>\n\n<p><a href=\"https://i.stack.imgur.com/78EXE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/78EXE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then type <code>index</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/59Pzu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/59Pzu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another way to evaluate an expression is to <kbd>Alt</kbd>+click it in the editor, or select it and press <kbd>Ctrl/Cmd</kbd>+<kbd>Alt</kbd>+<kbd>F8</kbd>.</p>\n\n<hr>\n\n<p>If you want to watch the <code>index</code> values over time, consider adding a watch (<em>New Watch</em>, <kbd>Insert</kbd> in the debug window, or from the <em>Evaluate Expression</em> dialog), and here's how it looks with the watch:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n7Ri5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n7Ri5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 123, "user_id": 8994917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8b2815df9534a01e6c2de5205e7f4e5?s=128&d=identicon&r=PG&f=1", "display_name": "nirKa", "link": "https://stackoverflow.com/users/8994917/nirka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 1, "accepted_answer_id": 50456245, "answer_count": 1, "score": 5, "last_activity_date": 1526942394, "creation_date": 1526933479, "last_edit_date": 1526942394, "question_id": 50455973, "link": "https://stackoverflow.com/questions/50455973/kotlin-companion-object-field-with-debugger", "title": "kotlin companion object field with debugger", "body": "<p>I declare a field in companion object, so it will be known in the functions in the companion object.</p>\n\n<p>something like this:</p>\n\n<pre><code>class ProgramStructure {\n  companion object {\n      var index = 0\n      fun inc(){\n          index++\n      }\n  }\n}\n</code></pre>\n\n<p>Everything work perfect, but when I debugging it I can't see the value of \"index\".\nHow can I see the value?</p>\n\n<p>Thanks  </p>\n"}, {"tags": ["kotlin", "coroutine"], "comments": [{"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1526983522, "post_id": 50455578, "comment_id": 87943092, "body": "To achieve long-range action in aborting the sequence generation, you can use exceptions. Throw a validation exception from the helper function and wrap the whole <code>buildSequence</code> block with a try-catch that just returns instead of letting the exception propagate."}, {"owner": {"reputation": 2205, "user_id": 276120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c877a65a343d0ad03a2d4c2b82029c46?s=128&d=identicon&r=PG", "display_name": "Mashmagar", "link": "https://stackoverflow.com/users/276120/mashmagar"}, "reply_to_user": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1526996468, "post_id": 50455578, "comment_id": 87951681, "body": "True. In fact, I originally was throwing an exception (and letting it propagate beyond the <code>buildSequence</code>). This came up when refactoring the exception into an empty sequence. Coming from the .Net world, I&#39;ve had &quot;Don&#39;t use exceptions for regular control flow&quot; drilled into me. Maybe it&#39;s more acceptable on the JVM..."}, {"owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "edited": false, "score": 0, "creation_date": 1526996717, "post_id": 50455578, "comment_id": 87951889, "body": "The same caveat applies on the JVM, but long-range signaling across the call stack is what exceptions are made for. It would be abuse if you threw and caught the exception within the same method body."}], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 276120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c877a65a343d0ad03a2d4c2b82029c46?s=128&d=identicon&r=PG", "display_name": "Mashmagar", "link": "https://stackoverflow.com/users/276120/mashmagar"}, "edited": false, "score": 0, "creation_date": 1526931931, "post_id": 50455613, "comment_id": 87924638, "body": "IntelliJ continues to report <code>&#39;return&#39; is not allowed here</code> during build when I try <code>return@buildSequence</code>."}, {"owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "edited": false, "score": 0, "creation_date": 1526932182, "post_id": 50455613, "comment_id": 87924769, "body": "That&#39;s odd, I can build and run this code with a return inside <code>buildSequence</code>. Java 8 target, Kotlin 1.2.41."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1526932333, "post_id": 50455613, "comment_id": 87924843, "body": "Indeed, here&#39;s a runnable sample: <a href=\"https://try.kotlinlang.org/#/UserProjects/nvriuot7vnd4u4bu94phn51okm/i4qh42accgqvlbianr2i69atav\" rel=\"nofollow noreferrer\">(sample)</a> It should work fine. Please try to rebuild the project. If it persists, and you can reproduce it, please report it to <a href=\"https://kotl.in/issue\" rel=\"nofollow noreferrer\">kotl.in/issue</a>."}, {"owner": {"reputation": 2205, "user_id": 276120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c877a65a343d0ad03a2d4c2b82029c46?s=128&d=identicon&r=PG", "display_name": "Mashmagar", "link": "https://stackoverflow.com/users/276120/mashmagar"}, "edited": false, "score": 0, "creation_date": 1526932682, "post_id": 50455613, "comment_id": 87925010, "body": "I figured it out and noted the result in an edit. I dramatically oversimplified my code in the original question, throwing everyone off. Thanks for your help."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1526931699, "creation_date": 1526931699, "answer_id": 50455613, "question_id": 50455578, "link": "https://stackoverflow.com/questions/50455578/return-from-buildsequence-in-kotlin/50455613#50455613", "title": "Return from `buildSequence` in Kotlin", "body": "<p>Just use <code>return@buildSequence</code>, which is a <a href=\"https://kotlinlang.org/docs/reference/returns.html#return-at-labels\" rel=\"nofollow noreferrer\">labeled <code>return</code> from lambda</a>, while an unlabeled <code>return</code> would mean 'return from the function <code>foo</code>'.</p>\n\n<p>See also: <a href=\"https://stackoverflow.com/a/40166597/2196460\">Whats does \u201creturn@\u201d mean?\n</a></p>\n"}, {"tags": [], "owner": {"reputation": 4532, "user_id": 366864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yP664.jpg?s=128&g=1", "display_name": "ddotsenko", "link": "https://stackoverflow.com/users/366864/ddotsenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1590431557, "last_edit_date": 1590431557, "creation_date": 1590431216, "answer_id": 62008469, "question_id": 50455578, "link": "https://stackoverflow.com/questions/50455578/return-from-buildsequence-in-kotlin/62008469#62008469", "title": "Return from `buildSequence` in Kotlin", "body": "<p>Since Kotlin v 1.3.x preferred sequence syntax changed. <em>(<code>buildSequence</code> is replaced by <code>kotlin.sequences.sequence</code>)</em></p>\n\n<p>Updated \"early return from generator\" code snippet (includes <code>try-catch</code> and <code>== null</code> early return examples) for post 1.3.x Kotlin:</p>\n\n<pre><code>// gen@ is just a subjective name i gave to the code block.\n// could be `anything@` you want\n// Use of named returns prevents \"'return' is not allowed here\" errors.\nprivate fun getItems() = sequence&lt;Item&gt; gen@ {\n\n    val cursor: Cursor?\n    try {\n        cursor = contentResolver.query(uri,*args)\n    } catch (e: SecurityException) {\n        Log.w(APP_NAME, \"Permission is not granted.\")\n        return@gen\n    }\n\n    if (cursor == null) {\n        Log.w(APP_NAME, \"Query returned nothing.\")\n        return@gen\n    }\n\n    // `.use` auto-closes Closeable. recommend.\n    // https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.io/use.html \n    cursor.use {\n        // iterate over cursor to step through the yielded records\n        while (cursor.moveToNext()) {\n            yield(Item.Factory.fromCursor(cursor))\n        }\n    }\n}\n</code></pre>\n\n<p><em>(Thx for all the prior posts that helped me get on \"named return\" track.)</em></p>\n"}], "owner": {"reputation": 2205, "user_id": 276120, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c877a65a343d0ad03a2d4c2b82029c46?s=128&d=identicon&r=PG", "display_name": "Mashmagar", "link": "https://stackoverflow.com/users/276120/mashmagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1590431557, "creation_date": 1526931504, "last_edit_date": 1526932561, "question_id": 50455578, "link": "https://stackoverflow.com/questions/50455578/return-from-buildsequence-in-kotlin", "title": "Return from `buildSequence` in Kotlin", "body": "<p>I'm using the <code>buildSequence</code> function in Kotlin. How do I end the iteration in the middle of the function? I'm looking for something similar to C#'s <code>yield break</code> statement.</p>\n\n<p>My code looks something like the following. I'm stuck at the <code>TODO</code>.</p>\n\n<pre><code>fun foo(list:List&lt;Number&gt;): Sequence&lt;Number&gt; = buildSequence {\n    if (someCondition) {\n        // TODO: Bail out early with an empty sequence\n        // return doesn't seem to work....\n    }\n\n    list.forEach {\n        yield(someProcessing(it))\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Apparently, I misdiagnosed the source. The issue is not returning from the <code>buildSequence</code> function. The following works for me:</p>\n\n<pre><code>fun foo(list:List&lt;Number&gt;): Sequence&lt;Number&gt; = buildSequence {\n    return@buildSequence\n\n    list.forEach {\n        yield(someProcessing(it))\n    }\n}\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>The issue is that I put the <code>return</code> in a local helper function that validates data at multiple points in the <code>buildSequence</code> (Hence the helper function). Apparently I'm not able to return from <code>buildSequence</code> within the helper function. The error message was not terribly helpful...</p>\n"}, {"tags": ["spring", "kotlin", "spring-data-jpa"], "comments": [{"owner": {"reputation": 2809, "user_id": 1526347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9cee1766e0a271ab642702c7736e2a2?s=128&d=identicon&r=PG", "display_name": "jingx", "link": "https://stackoverflow.com/users/1526347/jingx"}, "edited": false, "score": 0, "creation_date": 1526950080, "post_id": 50454809, "comment_id": 87930059, "body": "Don&#39;t use <code>@Primary</code> if you need finer control. Consider using <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans-definition-profiles\" rel=\"nofollow noreferrer\">Profile</a>"}, {"owner": {"reputation": 609, "user_id": 515291, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MQzGj.jpg?s=128&g=1", "display_name": "Marcelus Trojahn", "link": "https://stackoverflow.com/users/515291/marcelus-trojahn"}, "reply_to_user": {"reputation": 2809, "user_id": 1526347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9cee1766e0a271ab642702c7736e2a2?s=128&d=identicon&r=PG", "display_name": "jingx", "link": "https://stackoverflow.com/users/1526347/jingx"}, "edited": false, "score": 0, "creation_date": 1526992324, "post_id": 50454809, "comment_id": 87948614, "body": "I do use profile when I want to change a datasource on development and production. But I can&#39;t think on a way that would help me in this case. If the application has more than 1 datasource, one still needs to be set @Primary."}, {"owner": {"reputation": 2809, "user_id": 1526347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9cee1766e0a271ab642702c7736e2a2?s=128&d=identicon&r=PG", "display_name": "jingx", "link": "https://stackoverflow.com/users/1526347/jingx"}, "edited": false, "score": 1, "creation_date": 1526997512, "post_id": 50454809, "comment_id": 87952464, "body": "Or try <code>@Qualifier</code> to pinpoint exactly which one you want to use?"}, {"owner": {"reputation": 609, "user_id": 515291, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MQzGj.jpg?s=128&g=1", "display_name": "Marcelus Trojahn", "link": "https://stackoverflow.com/users/515291/marcelus-trojahn"}, "reply_to_user": {"reputation": 2809, "user_id": 1526347, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9cee1766e0a271ab642702c7736e2a2?s=128&d=identicon&r=PG", "display_name": "jingx", "link": "https://stackoverflow.com/users/1526347/jingx"}, "edited": false, "score": 0, "creation_date": 1527009916, "post_id": 50454809, "comment_id": 87960253, "body": "I didn&#39;t know that one and it looks promising. I&#39;ll get back to you on that."}], "answers": [{"tags": [], "owner": {"reputation": 1321, "user_id": 663012, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7417c278374e4cdf4609cb75885adf46?s=128&d=identicon&r=PG", "display_name": "Czar", "link": "https://stackoverflow.com/users/663012/czar"}, "is_accepted": false, "score": 1, "last_activity_date": 1527031753, "last_edit_date": 1527031753, "creation_date": 1527014139, "answer_id": 50474356, "question_id": 50454809, "link": "https://stackoverflow.com/questions/50454809/primary-on-the-fly/50474356#50474356", "title": "@Primary on the fly", "body": "<p>You can either use <code>@Qualifier</code>, or don't mark your component as <code>@Component</code> at all, instead leave them as simple classes in your lib and set whichever you want as a <code>@Bean</code> in the client application.</p>\n\n<p>This way you can either have single datasource or, if you need more, you'll be able to add <code>@Primary</code> on the <code>@Bean</code> you want.</p>\n\n<p>Regarding profiles, you can set additional profiles besides prod/dev/test, e.g. <code>prod,ds1</code> <code>prod,ds2</code> <code>test,tds1</code>, etc...</p>\n"}, {"tags": [], "owner": {"reputation": 609, "user_id": 515291, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MQzGj.jpg?s=128&g=1", "display_name": "Marcelus Trojahn", "link": "https://stackoverflow.com/users/515291/marcelus-trojahn"}, "is_accepted": true, "score": 1, "last_activity_date": 1527082698, "creation_date": 1527082698, "answer_id": 50489922, "question_id": 50454809, "link": "https://stackoverflow.com/questions/50454809/primary-on-the-fly/50489922#50489922", "title": "@Primary on the fly", "body": "<p>Thanks for all the answers, you made me look into the right direction.</p>\n\n<p>Although I understand the use of @Qualifier it wasn't enough for my specific project because, as far as I could understand, the annotation would have to be on the \"library\" project that is imported. My problem is really with the transaction since I can't specify @Primary after I import a specific package in which the persistence configuration is not already tagged as @Primary.</p>\n\n<p>So here is how I solved it.</p>\n\n<p>Instead of just creating repositories on the \"library\" project I also created the @Service layer there. These @Services I can also annotate with @Transactional and name the transactionManager Spring needs to use for that specific service. So, in a \"ServiceDummy\" for instance, I can add a @Transactional(\"tmDummy\") and autowire only the @Service on the other application. This way, Spring does not argue about having 2, 3 or more transactionManagers to choose.</p>\n\n<p>Brief example:</p>\n\n<pre><code>package com.entre.databases.dummy.service\n\n@Service\n@Transactional(\"tmDummy\")\nclass DummyService(\n    val dummyRepository: DummyRepository)\n{\n\n    fun findDummy(id: Int): Optional&lt;Dummy&gt; {\n        return dummyRepository.findById(id)\n    }\n\n}\n</code></pre>\n\n<p>And the on the other application that is importing the \"library\":</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = [\n    \"com.entre.rest.boot\",\n    \"com.entre.databases.dummy.service\",\n    \"com.entre.rest.web\"\n])\nclass Application\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;Application&gt;(*args)\n}\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 515291, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MQzGj.jpg?s=128&g=1", "display_name": "Marcelus Trojahn", "link": "https://stackoverflow.com/users/515291/marcelus-trojahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 50489922, "answer_count": 2, "score": 0, "last_activity_date": 1527082698, "creation_date": 1526928010, "last_edit_date": 1526993382, "question_id": 50454809, "link": "https://stackoverflow.com/questions/50454809/primary-on-the-fly", "title": "@Primary on the fly", "body": "<p>I need an advice.</p>\n\n<p>I have base Maven project where I declare all my repositories, entities and persistence classes. They are all configured XML-less. Each database and all it's related classes are divided on packages. Everything is annotated on this project, as in: @Entity, @Repository, @Configuration, @Primary, etc... It looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a4485.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a4485.png\" alt=\"enter image description here\"></a></p>\n\n<p>Right now, beans on the radiusfttx.domain package are annotated as @Primary. This project is basically it, it does nothing on it's own.</p>\n\n<p>Then, when I create a new project that needs to access any of the databases, I just import the first project with Maven and, on the new project initialization, I change it like this (it's Kotlin but I'm pretty sure you can get the idea):</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = [\n    \"com.entre.rest.boot\", &lt;-- my main class is here\n    \"com.entre.databases.mailserver.domain\", &lt;-- repos from the other project\n    \"com.entre.databases.integrator.domain\" ])\n</code></pre>\n\n<p>Since everything is already annotated, Spring-boot's autoconfiguration picks up the classes and creates the beans without a problem. Well, at least until I try to commit something to the database.</p>\n\n<p>Because only one persistence can have the @Primary annotation, if I don't add that persistence to @ComponentScan everything just doesn't work. As you can see in the example above, I didn't add \"radiusfttx.domain\" to @ComponentScan and the @Primary is there.</p>\n\n<p>So my question is: Is there a way that I can set @Primary on the fly? Being annotated and hardcoded does not work for what I'm trying to do here. Any ideas?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>As a workaround I created a \"dummy\" H2 persistence which I tag as @Primary and add to all my projects. This way, all my \"real\" datasources don't need to be set @Primary. This is far from a solution to this case, but it works. The question remains open in case someone can come up with something better.</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = \"emfDummy\", transactionManagerRef = \"tmDummy\",\n        basePackages = [\"com.entre.databases.dummy.domain\"])\nclass DummyPersistence {\n    @Primary\n    @Bean(\"dsDummy\")\n    fun dataSource() = HikariDataSource().apply {\n        username = \"sa\"\n        password = \"sa\"\n        jdbcUrl = \"jdbc:h2:mem:db;DB_CLOSE_DELAY=-1\"\n        driverClassName = \"org.h2.Driver\"\n    }\n\n    fun hibernateJpaVendorAdapter() = HibernateJpaVendorAdapter().apply {\n        setDatabasePlatform(\"org.hibernate.dialect.H2Dialect\")\n        setShowSql(false)\n        setGenerateDdl(true)\n    }\n\n    @Primary\n    @Bean(\"emfDummy\")\n    fun entityManagerFactory() = LocalContainerEntityManagerFactoryBean().apply {\n        setPackagesToScan(\"com.entre.databases.dummy.domain\")\n        jpaVendorAdapter = hibernateJpaVendorAdapter()\n        dataSource = dataSource()\n        persistenceUnitName = \"puDummy\"\n        afterPropertiesSet()\n    }\n\n    @Primary\n    @Bean(\"tmDummy\")\n    fun transactionManager() = JpaTransactionManager().apply {\n        entityManagerFactory = entityManagerFactory().`object`\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "android-room"], "comments": [{"owner": {"reputation": 1674, "user_id": 3453836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Fhy9.jpg?s=128&g=1", "display_name": "R&#225;fagan", "link": "https://stackoverflow.com/users/3453836/r%c3%a1fagan"}, "edited": false, "score": 0, "creation_date": 1544209785, "post_id": 50453822, "comment_id": 94208685, "body": "See a <a href=\"https://stackoverflow.com/questions/47274677/room-cannot-find-implementation/53669919#53669919\">possible answer here in this post</a>:"}], "answers": [{"comments": [{"owner": {"reputation": 3436, "user_id": 2233621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d934405dc8756df0238aa9794c54c679?s=128&d=identicon&r=PG&f=1", "display_name": "kassim", "link": "https://stackoverflow.com/users/2233621/kassim"}, "edited": false, "score": 4, "creation_date": 1533476230, "post_id": 50453904, "comment_id": 90350896, "body": "thanks - adding <code>kotlin-kapt</code> worked for me (I had already put <code>kapt</code> on the dependencies), but isn&#39;t it weird that the build process wouldn&#39;t flag up that there isn&#39;t a plugin to handle the <code>kapt</code> statements"}, {"owner": {"reputation": 2086, "user_id": 6733404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vARvedsWAsM/AAAAAAAAAAI/AAAAAAAAAHc/qeiBs7OBaMY/photo.jpg?sz=128", "display_name": "Abner Esc&#243;cio", "link": "https://stackoverflow.com/users/6733404/abner-esc%c3%b3cio"}, "edited": false, "score": 2, "creation_date": 1551288008, "post_id": 50453904, "comment_id": 96588984, "body": "Thanks bro! You save my day!"}], "tags": [], "owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "is_accepted": true, "score": 50, "last_activity_date": 1526923880, "creation_date": 1526923880, "answer_id": 50453904, "question_id": 50453822, "link": "https://stackoverflow.com/questions/50453822/room-cannot-find-implementation-db-db-impl-does-not-exist/50453904#50453904", "title": "Room + cannot find implementation DB + DB_Impl does not exist", "body": "<p>If you use Kotlin, then you have to use <code>kapt</code> instead of <code>annotationProcessor</code>, and must also apply <code>kotlin-kapt</code> plugin.</p>\n\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-kapt'\n\ndependencies {\n    implementation \"androidx.lifecycle:lifecycle-extensions:2.0.0-alpha1\"\n    kapt \"androidx.lifecycle:lifecycle-compiler:2.0.0-alpha1\"\n    implementation \"androidx.room:room-runtime:2.0.0-alpha1\"\n    kapt \"androidx.room:room-compiler:2.0.0-alpha1\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "edited": false, "score": 1, "creation_date": 1611356224, "post_id": 65847963, "comment_id": 116434808, "body": "This information is very old and outdated."}, {"owner": {"reputation": 196, "user_id": 3170251, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f635a8ab2105c4371d7827d01f512aa8?s=128&d=identicon&r=PG&f=1", "display_name": "user3170251", "link": "https://stackoverflow.com/users/3170251/user3170251"}, "reply_to_user": {"reputation": 1186, "user_id": 1434047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abaa451e2b93ad55c9ff5107be30b5a1?s=128&d=identicon&r=PG", "display_name": "Bink", "link": "https://stackoverflow.com/users/1434047/bink"}, "edited": false, "score": 2, "creation_date": 1616444635, "post_id": 65847963, "comment_id": 118000234, "body": "@Bink since you didn&#39;t bother on suggesting an improvement, I can do it for you. What you should do is use the following instead of the above:   <code>implementation &quot;androidx.room:room-runtime:$room_version&quot;</code> <code>annotationProcessor &quot;androidx.room:room-compiler:$room_version&quot;</code>  $room_version is dependent on latest version released by Google"}], "tags": [], "owner": {"reputation": 61, "user_id": 3429064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ebb487bf7a2a8551d409ef60a247c65?s=128&d=identicon&r=PG&f=1", "display_name": "fmag", "link": "https://stackoverflow.com/users/3429064/fmag"}, "is_accepted": false, "score": 0, "last_activity_date": 1611329137, "creation_date": 1611329137, "answer_id": 65847963, "question_id": 50453822, "link": "https://stackoverflow.com/questions/50453822/room-cannot-find-implementation-db-db-impl-does-not-exist/65847963#65847963", "title": "Room + cannot find implementation DB + DB_Impl does not exist", "body": "<p>For Java</p>\n<p>in app build.gradle</p>\n<p>use</p>\n<pre><code>implementation 'android.arch.persistence.room:runtime:1.1.1'\nannotationProcessor 'android.arch.persistence.room:compiler:1.1.1'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9824289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10175, "favorite_count": 1, "accepted_answer_id": 50453904, "answer_count": 2, "score": 23, "last_activity_date": 1611329137, "creation_date": 1526923484, "question_id": 50453822, "link": "https://stackoverflow.com/questions/50453822/room-cannot-find-implementation-db-db-impl-does-not-exist", "title": "Room + cannot find implementation DB + DB_Impl does not exist", "body": "<p>I am getting following error while running application</p>\n\n<pre><code>java.lang.RuntimeException: cannot find implementation for com.abc.db.abdDB. abcDB_Impl does not exist\n</code></pre>\n\n<p>My build.gradle has following configuration:</p>\n\n<pre><code>implementation \"androidx.lifecycle:lifecycle-extensions:2.0.0-alpha1\"\nannotationProcessor \"androidx.lifecycle:lifecycle-compiler:2.0.0-alpha1\"\nimplementation \"androidx.room:room-runtime:2.0.0-alpha1\"\nannotationProcessor \"androidx.room:room-compiler:2.0.0-alpha1\"\n</code></pre>\n\n<p>My Database class:</p>\n\n<pre><code>fun getDatabase(context: Context): abcDB? {\n        if (dbInstance == null) {\n            synchronized(abcDB::class.java) {\n                if (dbInstance == null) {\n                    dbInstance = Room.databaseBuilder(context.applicationContext,\n                            abcDB::class.java, \"abc_db\")\n                            .fallbackToDestructiveMigration()\n                            .addCallback(sRoomDatabaseCallback)\n                            .build()\n                }\n            }\n        }\n        return dbInstance\n    }\n</code></pre>\n\n<p>Does anyone try to use androidX API? Can someone help to find solution for this?</p>\n"}, {"tags": ["java", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 4032, "user_id": 6244560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1ee1321bfa83c5af7a4952370aed739?s=128&d=identicon&r=PG", "display_name": "wargre", "link": "https://stackoverflow.com/users/6244560/wargre"}, "edited": false, "score": 1, "creation_date": 1526923887, "post_id": 50453740, "comment_id": 87920991, "body": "What is the package of the main class?  It seems the controller class is not in one subpackage if this main class."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 3756347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f81df34976092b908561a7d79bab01c?s=128&d=identicon&r=PG&f=1", "display_name": "Nirmal", "link": "https://stackoverflow.com/users/3756347/nirmal"}, "edited": false, "score": 0, "creation_date": 1526954694, "post_id": 50454149, "comment_id": 87930930, "body": "I followed the proper directory structure relative to the main class but when I had refactored from the IDE, the package names were not updated properly"}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1579549037, "post_id": 50454149, "comment_id": 105796201, "body": "<code>@ComponentScan(basePackages = [ &quot;com.example.controller&quot; ])</code>"}], "tags": [], "owner": {"reputation": 965, "user_id": 8946093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9ce0012d6058be2bad29ed2cb84415?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Altenburger", "link": "https://stackoverflow.com/users/8946093/michael-altenburger"}, "is_accepted": true, "score": 4, "last_activity_date": 1526924935, "creation_date": 1526924935, "answer_id": 50454149, "question_id": 50453740, "link": "https://stackoverflow.com/questions/50453740/spring-boot-kotlin-api-returns-404-response-for-all-endpoints/50454149#50454149", "title": "Spring Boot Kotlin API returns 404 response for all endpoints", "body": "<p>I guess your <code>CricketerController</code> is not in a subpackage relative to your main class. So you basically have two options:</p>\n\n<ol>\n<li>Place your main class directly under the package <strong>com.example</strong></li>\n<li>Add the annotation at the bottom of this answer to your main class.</li>\n</ol>\n\n<p>Using any of these two methods makes the controller class visible for Spring at startup and therefore should create your mappings.</p>\n\n<pre><code>@ComponentScan(basePackages = { \"com.example.controller\"} )\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 3756347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f81df34976092b908561a7d79bab01c?s=128&d=identicon&r=PG&f=1", "display_name": "Nirmal", "link": "https://stackoverflow.com/users/3756347/nirmal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2256, "favorite_count": 0, "accepted_answer_id": 50454149, "answer_count": 1, "score": 2, "last_activity_date": 1526924935, "creation_date": 1526923184, "last_edit_date": 1526923920, "question_id": 50453740, "link": "https://stackoverflow.com/questions/50453740/spring-boot-kotlin-api-returns-404-response-for-all-endpoints", "title": "Spring Boot Kotlin API returns 404 response for all endpoints", "body": "<p>I'm using Spring Boot with Kotlin . The rest controller returns 404 error for all endpoints. In the starting logs the endpoints in the controller are not present. Any endpoint returns the same 404 response.</p>\n\n<p>These are the steps I have tried,</p>\n\n<ol>\n<li>Tried clearing cache/target</li>\n<li>Moved all classes into single directory</li>\n<li>Tried adding ComponentScan annotation but it is not accepted.</li>\n<li>I'm using cmd line to run the project</li>\n<li>Same output seen when running java -jar $jarfile</li>\n<li>Checked annotations Repository , Service , RestController</li>\n</ol>\n\n<p>Controller:</p>\n\n<pre><code>package com.example.controller\n\nimport org.springframework.web.bind.annotation.RestController\nimport org.springframework.web.bind.annotation.PathVariable\nimport org.springframework.http.ResponseEntity\nimport org.springframework.web.bind.annotation.GetMapping\nimport org.springframework.http.HttpStatus\nimport org.springframework.web.bind.annotation.PostMapping\nimport org.springframework.web.bind.annotation.PutMapping\nimport org.springframework.web.bind.annotation.DeleteMapping\nimport org.springframework.web.bind.annotation.RequestBody\n\nimport Cricketer\nimport CricketerRepository\nimport CricketerService\nimport org.springframework.web.bind.annotation.RequestMapping\n\n@RestController\n@RequestMapping(\"/api\")\nclass CricketerController(private val cricketerService: CricketerService , private val cricketerRepository: CricketerRepository){\n\n    @GetMapping(\"/cricketers/{id}\")\n    fun getCricketer(@PathVariable(\"id\") id: Long):ResponseEntity&lt;Cricketer&gt;  {\n        val cricketer = cricketerService.findById(id)\n        return ResponseEntity&lt;Cricketer&gt;(cricketer as Cricketer, HttpStatus.OK);\n    }\n\n    @GetMapping(\"/cricketers/\")\n    fun getAllCricketers() :ResponseEntity&lt;List&lt;Cricketer&gt;&gt;  {\n        var cricketersList: ArrayList&lt;Cricketer&gt; =  cricketerService.getAllPlayers() as (ArrayList&lt;Cricketer&gt;)\n        return ResponseEntity&lt;List&lt;Cricketer&gt;&gt;(cricketersList, HttpStatus.OK)\n    }\n\n    @PostMapping(\"/cricketer/\")\n    fun addCricketer(@RequestBody cricketer:Cricketer):ResponseEntity&lt;Cricketer&gt;  {\n        val cCricketer : Cricketer = Cricketer(name = cricketer.name\n                , country = cricketer.country\n                , highestScore = cricketer.highestScore)\n        cricketerRepository.save(cCricketer)\n        return ResponseEntity&lt;Cricketer&gt;(cricketer , HttpStatus.OK)\n    }\n\n    @PutMapping(\"/cricketer/{id}\")\n    fun updateCricketer(@PathVariable(\"id\") id: Long, @RequestBody cricketer: Cricketer ):ResponseEntity&lt;Cricketer&gt; {\n        val cCricketer  = Cricketer(name = cricketer.name\n                , country = cricketer.country\n                , highestScore = cricketer.highestScore)\n        cricketerRepository.save(cCricketer)\n        return ResponseEntity&lt;Cricketer&gt;(cricketer, HttpStatus.OK)\n    }\n\n    @DeleteMapping(\"/cricketer/{id}\")\n    fun deleteCricketer(@PathVariable(\"id\") id:Long ):ResponseEntity&lt;String&gt; {\n        val cCricketer :Cricketer  = cricketerService.findById(id) as Cricketer\n        cricketerRepository.delete(cCricketer)\n        return ResponseEntity&lt;String&gt;(\"cricketer removed\", HttpStatus.OK)\n    }\n}\n</code></pre>\n\n<p>pom.xml </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;Spring-Kotlin-Rest-API&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;Spring-Kotlin-Rest-API&lt;/name&gt;\n    &lt;description&gt;Spring Boot Kotlin REST API Example&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.0.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;kotlin.version&gt;1.2.41&lt;/kotlin.version&gt;\n\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-kotlin&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-reflect&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;${project.basedir}/src/main/kotlin&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;${project.basedir}/src/test/kotlin&lt;/testSourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;       \n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;configuration&gt;\n                    &lt;args&gt;\n                        &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\n                    &lt;/args&gt;\n\n                    &lt;compilerPlugins&gt;\n\n                        &lt;plugin&gt;spring&lt;/plugin&gt;\n                    &lt;/compilerPlugins&gt;\n                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;          \n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                        &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Startup logs</p>\n\n<pre><code>2018-05-21 22:31:19.490  INFO 3061 --- [           main] c.e.d.SpringKotlinRestApiApplicationKt   : Starting SpringKotlinRestApiApplicationKt on nirmal-desktop with PID 3061 (/home/nirmal/code/workspace-sts-3.9.1.RELEASE/Spring-Kotlin-Rest-API/target/classes started by root in /home/nirmal/code/workspace-sts-3.9.1.RELEASE/Spring-Kotlin-Rest-API)\n2018-05-21 22:31:19.512  INFO 3061 --- [           main] c.e.d.SpringKotlinRestApiApplicationKt   : No active profile set, falling back to default profiles: default\n2018-05-21 22:31:19.592  INFO 3061 --- [           main] ConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@5bab7c16: startup date [Mon May 21 22:31:19 IST 2018]; root of context hierarchy\n2018-05-21 22:31:29.492  INFO 3061 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$28d3b505] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2018-05-21 22:31:33.847  INFO 3061 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2018-05-21 22:31:34.312  INFO 3061 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2018-05-21 22:31:34.313  INFO 3061 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.31\n2018-05-21 22:31:34.389  INFO 3061 --- [ost-startStop-1] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib]\n2018-05-21 22:31:36.190  INFO 3061 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-05-21 22:31:36.190  INFO 3061 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 16602 ms\n2018-05-21 22:31:36.560  INFO 3061 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Servlet dispatcherServlet mapped to [/]\n2018-05-21 22:31:36.564  INFO 3061 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-05-21 22:31:36.566  INFO 3061 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-05-21 22:31:36.566  INFO 3061 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-05-21 22:31:36.566  INFO 3061 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-05-21 22:31:37.743  INFO 3061 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2018-05-21 22:31:39.038  INFO 3061 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2018-05-21 22:31:39.222  INFO 3061 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'\n2018-05-21 22:31:39.480  INFO 3061 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\n    name: default\n    ...]\n2018-05-21 22:31:40.064  INFO 3061 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.2.17.Final}\n2018-05-21 22:31:40.066  INFO 3061 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2018-05-21 22:31:40.302  INFO 3061 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\n2018-05-21 22:31:42.180  INFO 3061 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect\n2018-05-21 22:31:44.235  INFO 3061 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@7d95eb4a'\n2018-05-21 22:31:44.237  INFO 3061 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2018-05-21 22:31:44.688  INFO 3061 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-05-21 22:31:46.829  INFO 3061 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : Looking for @ControllerAdvice: org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@5bab7c16: startup date [Mon May 21 22:31:19 IST 2018]; root of context hierarchy\n2018-05-21 22:31:46.894  WARN 3061 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2018-05-21 22:31:47.072  INFO 3061 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error],produces=[text/html]}\" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n2018-05-21 22:31:47.073  INFO 3061 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/error]}\" onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)\n2018-05-21 22:31:47.121  INFO 3061 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-05-21 22:31:47.122  INFO 3061 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]\n2018-05-21 22:31:49.030  INFO 3061 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2018-05-21 22:31:49.033  INFO 3061 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Bean with name 'dataSource' has been autodetected for JMX exposure\n2018-05-21 22:31:49.047  INFO 3061 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Located MBean 'dataSource': registering with JMX server as MBean [com.zaxxer.hikari:name=dataSource,type=HikariDataSource]\n2018-05-21 22:31:50.682  INFO 3061 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2018-05-21 22:31:50.695  INFO 3061 --- [           main] c.e.d.SpringKotlinRestApiApplicationKt   : Started SpringKotlinRestApiApplicationKt in 34.697 seconds (JVM running for 49.043)\n</code></pre>\n"}, {"tags": ["kotlin", "spotbugs"], "answers": [{"tags": [], "owner": {"reputation": 177928, "user_id": 1103872, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/84b1acc3351c02f560dea7ac7f76ac8d?s=128&d=identicon&r=PG", "display_name": "Marko Topolnik", "link": "https://stackoverflow.com/users/1103872/marko-topolnik"}, "is_accepted": true, "score": 11, "last_activity_date": 1526920054, "creation_date": 1526920054, "answer_id": 50452988, "question_id": 50452049, "link": "https://stackoverflow.com/questions/50452049/kotlin-iterable/50452988#50452988", "title": "Kotlin iterable", "body": "<p>FindBugs processes bytecode and then reverse-looks-up the file and line info. It appears likely that the Kotlin compiler emitted a <code>CHECKCAST</code> instruction where, from Kotlin's point of view, it is clear that the cast will pass, but the return type declaration of the Java method, or the declared local variable/parameter type, is broader.</p>\n\n<p>This is what I got from IDEA as the decompiled Kotlin bytecode for your function:</p>\n\n<pre><code>@NotNull\npublic Iterator iterator() {\n    Iterable $receiver$iv = (Iterable)this.columns;\n    Collection destination$iv$iv = (Collection)\n            (new ArrayList(collectionSizeOrDefault($receiver$iv, 10)));\n    Iterator var4 = $receiver$iv.iterator();\n\n    while(var4.hasNext()) {\n        Object item$iv$iv = var4.next();\n        CSVColumn it = (CSVColumn)item$iv$iv;\n        String var11 = it.getValue();\n        destination$iv$iv.add(var11);\n    }\n\n    return ((List)destination$iv$iv).iterator();\n}\n</code></pre>\n\n<p>You can see what the declaration <code>inline fun map</code> means on this level: its entire code became a part of your method implementation. The emitted bytecode happens to use a <code>Collection</code>-typed variable <code>destination$iv$iv</code> to hold a reference to an <code>ArrayList</code>. The <code>return</code> statement casts it to <code>List</code>, which it's perfectly allowed to, and which is obviously safe.</p>\n"}], "owner": {"reputation": 5324, "user_id": 4127155, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/de33f041278b4510e12301afd4580a82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4127155/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1430, "favorite_count": 0, "accepted_answer_id": 50452988, "answer_count": 1, "score": 5, "last_activity_date": 1526920054, "creation_date": 1526916552, "last_edit_date": 1526919171, "question_id": 50452049, "link": "https://stackoverflow.com/questions/50452049/kotlin-iterable", "title": "Kotlin iterable", "body": "<p>Given this class:</p>\n\n<pre><code>data class CSVRecord(private val columns: SortedSet&lt;CSVColumn&gt;) : Iterable&lt;String&gt; {\n\n    override fun iterator(): Iterator&lt;String&gt; {\n        return columns.map { it.value }.iterator()\n    }\n}\n</code></pre>\n\n<p>spotbugs raises an error:</p>\n\n<blockquote>\n  <p>[ERROR] Questionable cast from Collection to abstract class java.util.List in com.example.CSVRecord.iterator() [com.example.CSVRecord] At CSVRecord.kt:[line 15] BC_BAD_CAST_TO_ABSTRACT_COLLECTION</p>\n</blockquote>\n\n<p>Is this just because spotbugs doesn't support Kotlin, or is my implementation potentially invalid?</p>\n"}, {"tags": ["kotlin", "spotbugs"], "answers": [{"tags": [], "owner": {"reputation": 496, "user_id": 4350835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d6QKO.jpg?s=128&g=1", "display_name": "Leonardo Lima", "link": "https://stackoverflow.com/users/4350835/leonardo-lima"}, "is_accepted": true, "score": 2, "last_activity_date": 1526921420, "creation_date": 1526921420, "answer_id": 50453315, "question_id": 50451801, "link": "https://stackoverflow.com/questions/50451801/is-spotbugs-compatible-with-kotlin/50453315#50453315", "title": "Is spotbugs compatible with Kotlin?", "body": "<p>According to the <a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">Data Classes</a> documentation:</p>\n\n<blockquote>\n  <p>The compiler automatically derives the following members from all\n  properties declared in the primary constructor:</p>\n  \n  <ul>\n  <li>equals()/hashCode() pair;</li>\n  <li>toString() of the form \"User(name=John, age=42)\";</li>\n  <li>componentN() functions corresponding to the properties in their order of declaration;</li>\n  <li>copy() function (see below).</li>\n  </ul>\n</blockquote>\n\n<p>This is one the features of data classes. The auto-generated <code>componentN</code> functions allow you to use <a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\" rel=\"nofollow noreferrer\">Destructuring Declarations</a> on this type of classes: </p>\n\n<pre><code>data class Result(val result: Int, val status: Status)\nfun function(...): Result {\n    // computations\n\n    return Result(result, status)\n}\n\n// Now, to use this function:\nval (result, status) = function(...)\n</code></pre>\n"}], "owner": {"reputation": 5324, "user_id": 4127155, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/de33f041278b4510e12301afd4580a82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4127155/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 1, "accepted_answer_id": 50453315, "answer_count": 1, "score": 1, "last_activity_date": 1526936047, "creation_date": 1526915717, "last_edit_date": 1526936047, "question_id": 50451801, "link": "https://stackoverflow.com/questions/50451801/is-spotbugs-compatible-with-kotlin", "title": "Is spotbugs compatible with Kotlin?", "body": "<p>When running spotbugs on a Kolin project I get errors such as:</p>\n\n<blockquote>\n  <p>[ERROR] Private method com.example.CSVRecord.component1() is never called [com.example.CSVRecord] In CSVRecord.kt UPM_UNCALLED_PRIVATE_METHOD</p>\n</blockquote>\n\n<p>on classes such as:</p>\n\n<pre><code>data class CSVRecord(private val columns: SortedSet&lt;CSVColumn&gt;) : Iterable&lt;String&gt; {\n\n    override fun iterator(): Iterator&lt;String&gt; {\n        return columns.map { it.value }.iterator()\n    }\n}\n</code></pre>\n\n<p>I'm not really clear where <code>component1</code> came from!</p>\n"}, {"tags": ["docker", "spring-boot", "kotlin"], "comments": [{"owner": {"reputation": 68, "user_id": 3605848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57de95df3ab22c505aaef049b82cc1fe?s=128&d=identicon&r=PG&f=1", "display_name": "RailTracer", "link": "https://stackoverflow.com/users/3605848/railtracer"}, "edited": false, "score": 0, "creation_date": 1527104814, "post_id": 50451425, "comment_id": 88005454, "body": "I believe this is a problem with the way getFile works, check <a href=\"https://stackoverflow.com/questions/25869428/classpath-resource-not-found-when-running-as-jar\">this answer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1108, "user_id": 436183, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/H4mjV.jpg?s=128&g=1", "display_name": "Jeryl Cook", "link": "https://stackoverflow.com/users/436183/jeryl-cook"}, "is_accepted": false, "score": 6, "last_activity_date": 1574559457, "creation_date": 1574559457, "answer_id": 59013925, "question_id": 50451425, "link": "https://stackoverflow.com/questions/50451425/spring-boot-resources-in-docker-container/59013925#59013925", "title": "Spring Boot Resources in Docker container", "body": "<p>The below worked for me.., you need to use an InputStream and not a File.</p>\n\n<p>...</p>\n\n<pre><code>@Autowired\nprivate ResourceLoader resourceLoader;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>  Resource resource= resourceLoader.getResource(\"classpath:/account_info.html\");\n\n    InputStream inputStream= resource.getInputStream();\n\n    Assert.notNull(inputStream,\"Could not load template resource!\");\n\n    String email = null;\n\n    try {\n        byte[] bdata = FileCopyUtils.copyToByteArray(inputStream);\n        email = new String(bdata, StandardCharsets.UTF_8);\n    } catch (IOException e) {\n        logger.warn(\"IOException\", e);\n    }finally {\n        if ( inputStream != null) {\n            IOUtils.closeQuietly(inputStream);\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 4093, "user_id": 5039579, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh4.googleusercontent.com/-F6fcCsWUR08/AAAAAAAAAAI/AAAAAAAAAMA/NVI0gCvjXIg/photo.jpg?sz=128", "display_name": "Johan Vergeer", "link": "https://stackoverflow.com/users/5039579/johan-vergeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4934, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1574559457, "creation_date": 1526914415, "question_id": 50451425, "link": "https://stackoverflow.com/questions/50451425/spring-boot-resources-in-docker-container", "title": "Spring Boot Resources in Docker container", "body": "<p>I'm using Docker for a Spring Boot application and so far everything is working. </p>\n\n<p>I have a resource file in <code>src/main/resources/db/data/dummydata.csv</code></p>\n\n<p>In a bootstrap class this file is used to import the dummy data into the database. </p>\n\n<p>private fun getDummyData(): List {\n    var fileReader: BufferedReader? = null</p>\n\n<pre><code>val dummyData = ArrayList&lt;DummyDataEntity&gt;()\n\ntry {\n    var line: String?\n\n    val res = ResourceUtils.getFile(\"classpath:db/data/dummydata.csv\")\n    fileReader = BufferedReader(FileReader(res.path))\n\n    // Read CSV header\n    fileReader.readLine()\n\n   ... Processing the data ...\n\n} catch (e: Exception) {\n    e.printStackTrace()\n} finally {\n    try {\n        fileReader!!.close()\n    } catch (e: Exception) {\n        e.printStackTrace()\n    }\n\n    return dummyData\n}\n</code></pre>\n\n<p>}</p>\n\n<p>When I run the application in IntelliJ, everything works just fine, but when I'm running it in Docker it cannot be found.</p>\n\n<p>The Jar and the Docker image are created using Kotlin DSL Gradle.  </p>\n\n<pre><code>import com.palantir.gradle.docker.DockerExtension\nimport io.spring.gradle.dependencymanagement.dsl.DependencyManagementExtension\nimport org.gradle.tooling.model.GradleTask\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\nimport org.springframework.boot.gradle.tasks.bundling.BootJar\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath(Libs.springBootGradlePlugin)\n        classpath(Libs.kotlinGradlePlugin)\n        classpath(Libs.kotlinAllOpen)\n        classpath(Libs.gradleDocker)\n    }\n}\n\nplugins {\n    // Apply the java-library plugin to add support for Java Library\n    `java-library`\n}\n\napply {\n    plugin(\"kotlin\")\n    plugin(\"kotlin-spring\")\n    plugin(\"org.springframework.boot\")\n    plugin(\"io.spring.dependency-management\")\n    plugin(\"com.palantir.docker\")\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile(Libs.kotlinReflect)\n\n    // Spring Boot\n    compile(Libs.springBootStarterDataJpa)\n}\n\nconfigure&lt;DependencyManagementExtension&gt; {\n    imports {\n        mavenBom(Libs.vaadinBom)\n    }\n}\n\nval bootJar: BootJar by tasks\nbootJar.baseName = \"reporting-app-site\"\nbootJar.version = \"0.0.1\"\n\nconfigure&lt;DockerExtension&gt; {\n    name = \"brabantia/${bootJar.baseName}\"\n    files(bootJar.archivePath)\n    buildArgs(mapOf(\"JAR_FILE\" to bootJar.archiveName))\n    dependsOn(tasks[\"build\"])\n}\n\nval compileKotlin: KotlinCompile by tasks\ncompileKotlin.kotlinOptions.jvmTarget = \"1.8\"\n</code></pre>\n\n<p>The Jar does contain <code>BOOT-INF/classes/db/data/dummyData.csv</code> but when the application is run the error that is thrown is </p>\n\n<pre><code>java.io.FileNotFoundException: class path resource [db/data/dummydata.csv] cannot be resolved to absolute file path because it does not reside in the file system: jar:file:/app.jar!/BOOT-INF/classes!/db/data/dummydata.csv\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["android", "kotlin", "spinner", "android-spinner", "multi-select"], "answers": [{"comments": [{"owner": {"reputation": 1308, "user_id": 4485558, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/piY7i.png?s=128&g=1", "display_name": "Keval Gangani", "link": "https://stackoverflow.com/users/4485558/keval-gangani"}, "edited": false, "score": 0, "creation_date": 1526915750, "post_id": 50451279, "comment_id": 87916665, "body": "Thanks, Haptic answer."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": true, "score": 1, "last_activity_date": 1526913808, "creation_date": 1526913808, "answer_id": 50451279, "question_id": 50450999, "link": "https://stackoverflow.com/questions/50450999/how-to-get-comma-separated-item-ids-from-multiselectspinner-in-kotlin/50451279#50451279", "title": "How to get comma separated item IDs from MultiSelectSpinner in Kotlin", "body": "<p>First, instead of using a <code>forEach</code> and adding engineers to a new <code>ArrayList</code> one by one in the beginning, you could use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a>:</p>\n\n<pre><code>val engineers: List&lt;String&gt; = engineerList.map { it.name!! }\n</code></pre>\n\n<p>Then, inside the listener you can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter-indexed.html\" rel=\"nofollow noreferrer\"><code>filterIndexed</code></a> to get a list of the <code>Engineer</code>s that are on indexes where the <code>selected</code> array contains <code>true</code>:</p>\n\n<pre><code>val selectedEngineers: List&lt;Engineer&gt; = engineerList\n        .filterIndexed { index, engineer -&gt; selected[index] }\n</code></pre>\n\n<p>And finally, for a comma separated list, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/join-to-string.html\" rel=\"nofollow noreferrer\"><code>joinToString</code></a>:</p>\n\n<pre><code>println(selectedEngineers.joinToString { it.id!!.toString() })\n</code></pre>\n"}], "owner": {"reputation": 1308, "user_id": 4485558, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/piY7i.png?s=128&g=1", "display_name": "Keval Gangani", "link": "https://stackoverflow.com/users/4485558/keval-gangani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 50451279, "answer_count": 1, "score": 1, "last_activity_date": 1526913808, "creation_date": 1526912758, "question_id": 50450999, "link": "https://stackoverflow.com/questions/50450999/how-to-get-comma-separated-item-ids-from-multiselectspinner-in-kotlin", "title": "How to get comma separated item IDs from MultiSelectSpinner in Kotlin", "body": "<p>I'm using this <a href=\"https://github.com/apptik/multiselectspinner\" rel=\"nofollow noreferrer\">MultiSelectSpinner</a> control from Github in my Kotlin project. I don't know how to get <code>Id</code> of a selected item from this control and I need to set that comma-separated IDs string of all selected items to <code>tv_engineer_ids</code> TextView control. </p>\n\n<p><strong>Layout Code:</strong></p>\n\n<pre><code>&lt;TextView\n                android:id=\"@+id/tv_engineer_ids\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                /&gt;\n\n            &lt;io.apptik.widget.multiselectspinner.MultiSelectSpinner\n                android:id=\"@+id/spin_engineer\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:paddingTop=\"15dp\"\n                /&gt;\n</code></pre>\n\n<p><strong>Kotlin Code:</strong></p>\n\n<pre><code>val engineers: ArrayList&lt;String&gt; = ArrayList&lt;String&gt;();\n    addJobResponse.engineerList!!.forEach {\n        engineers.add(it.name!!);\n    }\n\n    spin_engineer.setItems(engineers)\n            .setListener&lt;BaseMultiSelectSpinner&gt;(object: BaseMultiSelectSpinner.MultiSpinnerListener {\n                override fun onItemsSelected(selected:BooleanArray) {\n                    //Toast.makeText(context, selected.toString(), Toast.LENGTH_LONG).show()\n  // Need to set comma separated IDs here\n                    selected.forEach {\n                        Toast.makeText(context, it.toString(), Toast.LENGTH_LONG).show()\n                    }\n\n                }\n            })\n</code></pre>\n\n<p><code>engineerList</code> is the list of <code>Engineer</code> data class.</p>\n\n<p><strong>EngrList Data Class Code:</strong></p>\n\n<pre><code>data class Engineer (\n    @SerializedName(\"Id\")\n    @Expose\n    var id: Long? = null,\n    @SerializedName(\"Name\")\n    @Expose\n    var name: String? = null)\n</code></pre>\n"}, {"tags": ["android", "kotlin", "gson"], "comments": [{"owner": {"reputation": 4386, "user_id": 4507927, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/47bcb40aceb9761c65dbf9d1012b60f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yupi", "link": "https://stackoverflow.com/users/4507927/yupi"}, "edited": false, "score": 0, "creation_date": 1526911704, "post_id": 50450496, "comment_id": 87914416, "body": "Your question is little bit unclear. You need to display number of comments per post but you know that is always 5 comments?"}, {"owner": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "reply_to_user": {"reputation": 4386, "user_id": 4507927, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/47bcb40aceb9761c65dbf9d1012b60f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yupi", "link": "https://stackoverflow.com/users/4507927/yupi"}, "edited": false, "score": 0, "creation_date": 1526912081, "post_id": 50450496, "comment_id": 87914625, "body": "@Yupi JSON files are already generically made. I&#39;ll pass the links to them here:  Posts: <a href=\"http://jsonplaceholder.typicode.com/posts\" rel=\"nofollow noreferrer\">jsonplaceholder.typicode.com/posts</a> Comments: <a href=\"http://jsonplaceholder.typicode.com/comments\" rel=\"nofollow noreferrer\">jsonplaceholder.typicode.com/comments</a>  But yes, there are 5 comments per post and since I can&#39;t hardcode the value it needs to be dynamically made. Like I said, I get a list of those comments (however they&#39;re printed out separately), I just need to add them together."}], "answers": [{"tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 0, "last_activity_date": 1526911845, "creation_date": 1526911845, "answer_id": 50450736, "question_id": 50450496, "link": "https://stackoverflow.com/questions/50450496/android-kotlin-sum-of-json-objects/50450736#50450736", "title": "Android Kotlin - Sum of JSON objects", "body": "<p>If I understand what you need correctly, you could replace your entire for loop with this code using <a href=\"http://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/filter.html\" rel=\"nofollow noreferrer\"><code>filter</code></a>:</p>\n\n<pre><code>// Post Id, the way you've been calculating it\nval post = postDetail[postId - 1].id \n\n// a list of comments only containing the ones that have the ID you need\nval filteredComments: List&lt;Comments&gt; = commentsDetail.filter { it.postId == post } \n</code></pre>\n\n<p>From here, you can print either the entire list:</p>\n\n<pre><code>println(filteredComments)\n</code></pre>\n\n<p>Or the size of the list:</p>\n\n<pre><code>println(filteredComments.size)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "edited": false, "score": 0, "creation_date": 1526912909, "post_id": 50450756, "comment_id": 87915099, "body": "Thank you so much for both solution itself and explaining it, this worked like a charm! :)"}], "tags": [], "owner": {"reputation": 1055, "user_id": 3625488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LmX54.jpg?s=128&g=1", "display_name": "Anthony Cannon", "link": "https://stackoverflow.com/users/3625488/anthony-cannon"}, "is_accepted": true, "score": 0, "last_activity_date": 1526911914, "creation_date": 1526911914, "answer_id": 50450756, "question_id": 50450496, "link": "https://stackoverflow.com/questions/50450496/android-kotlin-sum-of-json-objects/50450756#50450756", "title": "Android Kotlin - Sum of JSON objects", "body": "<p>So the way I would do this is like this:</p>\n\n<pre><code>val totalNumberOfCommentsForPost = commentsDetail?.filter {\n    it.postId == post\n}?.size ?: 0\n</code></pre>\n\n<p><code>.filter</code> only selects the comments with the same post id.</p>\n\n<p>Then <code>.size</code> gets hows many are in the new filtered list.</p>\n\n<p>And finally as a safety precaution <code>?: 0</code> if any of these functions return null then return 0.</p>\n"}], "owner": {"reputation": 13, "user_id": 9823277, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenan Karic", "link": "https://stackoverflow.com/users/9823277/kenan-karic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 50450756, "answer_count": 2, "score": 0, "last_activity_date": 1526911914, "creation_date": 1526910964, "question_id": 50450496, "link": "https://stackoverflow.com/questions/50450496/android-kotlin-sum-of-json-objects", "title": "Android Kotlin - Sum of JSON objects", "body": "<p>I have two JSON files which are connected using foreign key/field (in my case one is Post( id, ...) and Comments ( postId, ...)). I need to display total number of comments per post (in my case it's always 5).</p>\n\n<p>My data classes are as follows:</p>\n\n<pre><code>data class Posts(val userId: Int,\n                 val id: Int,\n                 val title: String,\n                 val body: String)\n\ndata class Comments(val postId: Int,\n                    val id: Int,\n                    val name: String,\n                    val email: String,\n                    val body: String) \n</code></pre>\n\n<p>And here is the function which I use to get json data (I use okhttp for setting up the client and gson for getting the data):</p>\n\n<pre><code>private fun fetchCommentJson() {\n        val postId = intent.getIntExtra(POST_ID, -1)\n        val commentJsonData = commentsJSON\n\n        val client = OkHttpClient()\n\n        val request = Request.Builder().url(commentJsonData).build()\n        client.newCall(request).enqueue(object : Callback {\n            override fun onFailure(call: Call?, e: IOException?) {\n                toast(\"Something went wrong fetching your data\")\n            }\n\n            override fun onResponse(call: Call?, response: Response?) {\n                val body = response?.body()?.string()\n                val gson = GsonBuilder().create()\n                val commentsDetail = gson.fromJson(body, Array&lt;Comments&gt;::class.java)\n                val postDetail = gson.fromJson(body, Array&lt;Posts&gt;::class.java)\n\n                runOnUiThread {\n\n                    for (commentSizeList in 0 until commentsDetail.size) {\n\n                        val listOfComments = commentsDetail[commentSizeList] // List of all comments by Index\n                        val post = postDetail[postId - 1].id // Post Id\n\n                        // If postId is equal to original post id\n                        if (listOfComments.postId == post) {\n                            // Print it out\n                            println(listOfComments)\n                        }\n                    }\n                }\n            }\n        })\n    }\n</code></pre>\n\n<p>When I print out the list, it really does print out all the comments per particular post based on it's ID (since comparison it's done). However it prints out each comment separately (and setting listOfComments.size prints out 1 for each comment).</p>\n\n<p><a href=\"https://i.stack.imgur.com/zlui7.jpg\" rel=\"nofollow noreferrer\">displaying list of all comments per post</a></p>\n\n<p>My question is how to combine them all, so it displays total number of comments per post (in this case -> 5)?</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 905471, "user_id": 115145, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/wDnd8.png?s=128&g=1", "display_name": "CommonsWare", "link": "https://stackoverflow.com/users/115145/commonsware"}, "edited": false, "score": 4, "creation_date": 1526910243, "post_id": 50450269, "comment_id": 87913541, "body": "Use a distinct action string or something else on the <code>Intent</code> to distinguish between the two cases."}], "answers": [{"tags": [], "owner": {"reputation": 7211, "user_id": 1735198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e969cb8cd59246b76f3830134a238ab5?s=128&d=identicon&r=PG", "display_name": "TpoM6oH", "link": "https://stackoverflow.com/users/1735198/tpom6oh"}, "is_accepted": false, "score": 0, "last_activity_date": 1526913019, "creation_date": 1526913019, "answer_id": 50451067, "question_id": 50450269, "link": "https://stackoverflow.com/questions/50450269/how-to-detect-if-my-app-is-called-by-another/50451067#50451067", "title": "How to detect if my app is called by another", "body": "<p>Use <a href=\"https://developer.android.com/reference/android/app/Activity.html#getIntent()\" rel=\"nofollow noreferrer\">getIntent()</a> method to get the intent that was the reason to start your activity.</p>\n\n<p>Then if it was launched from the apps menu the intent will have action MAIN.</p>\n\n<pre><code>val intent = getIntent();\n\nif (intent.getAction() != \"android.intent.action.MAIN\") {\n   setResult(Activity.RESULT_OK, myIntentWithData)\n   finish()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": false, "score": 1, "last_activity_date": 1527244502, "last_edit_date": 1527244502, "creation_date": 1527236758, "answer_id": 50524742, "question_id": 50450269, "link": "https://stackoverflow.com/questions/50450269/how-to-detect-if-my-app-is-called-by-another/50524742#50524742", "title": "How to detect if my app is called by another", "body": "<p>If your activity was called using <code>startActivityForResult()</code>, you can use <code>getCallingActivity()</code> method in your <code>Activity</code>. It will return a <code>ComponentName</code> of the activity that started yours (or <strong>null</strong> if your activity wasn't started with <code>startActivityForResult()</code> method). Then you can get <code>getCallingActivity().getPackageName()</code> or <code>getCallingActivity().getClassName()</code>.</p>\n\n<p>More info here <a href=\"https://developer.android.com/reference/android/app/Activity#getCallingActivity%28%29\" rel=\"nofollow noreferrer\">getCallingActivity</a>, <a href=\"https://stackoverflow.com/a/5336612/3569545\">https://stackoverflow.com/a/5336612/3569545</a></p>\n"}], "owner": {"reputation": 15, "user_id": 9736457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAQvY.jpg?s=128&g=1", "display_name": "mrneumann888", "link": "https://stackoverflow.com/users/9736457/mrneumann888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527244502, "creation_date": 1526910201, "question_id": 50450269, "link": "https://stackoverflow.com/questions/50450269/how-to-detect-if-my-app-is-called-by-another", "title": "How to detect if my app is called by another", "body": "<p>I have two entrnces to my app: from menu and using Intent.\nIn the second case I need to return some EXTRA_OUTPUT by </p>\n\n<pre><code>setResult(Activity.RESULT_OK, myIntentWithData)\nfinish()\n</code></pre>\n\n<p>so I need to detect if my app was called by another(finish in that case or continue work otherwise)</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 5324, "user_id": 4127155, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/de33f041278b4510e12301afd4580a82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4127155/david"}, "reply_to_user": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "edited": false, "score": 0, "creation_date": 1526908180, "post_id": 50449603, "comment_id": 87912374, "body": "@Enzokie good point, but does adding that change the question at all?"}, {"owner": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "edited": false, "score": 0, "creation_date": 1526908238, "post_id": 50449603, "comment_id": 87912401, "body": "It will just make first statement accurate ;)"}, {"owner": {"reputation": 5324, "user_id": 4127155, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/de33f041278b4510e12301afd4580a82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4127155/david"}, "reply_to_user": {"reputation": 7068, "user_id": 5217712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xq83n.jpg?s=128&g=1", "display_name": "Enzokie", "link": "https://stackoverflow.com/users/5217712/enzokie"}, "edited": false, "score": 0, "creation_date": 1526910002, "post_id": 50449603, "comment_id": 87913395, "body": "Thanks for pointing this out. I corrected the example code."}, {"owner": {"reputation": 279, "user_id": 5652258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f5ad8993dd02091bad75d3dff20151?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/5652258/some-guy"}, "edited": false, "score": 0, "creation_date": 1548355876, "post_id": 50449603, "comment_id": 95522161, "body": "You can write that &#39;equals&#39; function much more succinctly if you just treat it as a boolean expression instead of trying to bail out early:       override fun equals(other: Any?) = this === other || (other is CsvColumn &amp;&amp; index==other.index)"}, {"owner": {"reputation": 504, "user_id": 2448139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3k4Hh.jpg?s=128&g=1", "display_name": "GroovyCarrot", "link": "https://stackoverflow.com/users/2448139/groovycarrot"}, "edited": false, "score": 0, "creation_date": 1560337293, "post_id": 50449603, "comment_id": 99700750, "body": "You can shorthand <code>override fun hashCode() = listOf(each, specific, property).hashCode() * 31</code> and then <code>override fun equals(other: Any?) = if (other is Type) hashCode() == other.hashCode() else false</code>. It&#39;s not generating, but only a couple of lines to write then."}], "answers": [{"tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 7, "last_activity_date": 1526908696, "creation_date": 1526908696, "answer_id": 50449814, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator/50449814#50449814", "title": "Kotlin equals and hash code generator", "body": "<p>From the <a href=\"https://kotlinlang.org/docs/reference/data-classes.html#properties-declared-in-the-class-body\" rel=\"noreferrer\">Data Classes</a> documentation you get:</p>\n\n<blockquote>\n  <p>Note that the compiler only uses the properties defined inside the primary constructor for the automatically generated functions. To exclude a property from the generated implementations, declare it inside the class body</p>\n</blockquote>\n\n<p>So you have to implement <code>equals()</code> and <code>hashCode()</code> manually or with the help of a <em>Kotlin Compiler Plugin</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 279, "user_id": 5652258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f5ad8993dd02091bad75d3dff20151?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/5652258/some-guy"}, "edited": false, "score": 1, "creation_date": 1548355603, "post_id": 50449834, "comment_id": 95522040, "body": "You can make value a val if you use the lazyinit attribute."}], "tags": [], "owner": {"reputation": 68863, "user_id": 4465208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w14F6.png?s=128&g=1", "display_name": "zsmb13", "link": "https://stackoverflow.com/users/4465208/zsmb13"}, "is_accepted": false, "score": 3, "last_activity_date": 1526910464, "last_edit_date": 1526910464, "creation_date": 1526908771, "answer_id": 50449834, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator/50449834#50449834", "title": "Kotlin equals and hash code generator", "body": "<p>You can't do something like this for data classes, they always generate <code>equals</code> and <code>hashCode</code> the same way, there's no way to provide them such hints or options.</p>\n\n<p>However, they only include properties that are in the primary constructor, so you could do this for them to only include <code>index</code>:</p>\n\n<pre><code>data class CSVColumn(private val index: Int, value: String) {\n    val value: String = value\n}\n</code></pre>\n\n<p>... except you can't have parameters in the primary constructor that aren't properties when you're using data classes.</p>\n\n<p>So you'd have to somehow introduce a secondary constructor that takes two parameters, like this:</p>\n\n<pre><code>class CSVColumn private constructor(private val index: Int) {\n\n    var value: String = \"\"\n\n    constructor(index: Int, value: String) : this(index) {\n        this.value = value\n    }\n\n}\n</code></pre>\n\n<p>... but now your <code>value</code> property has to be a <code>var</code> for the secondary constructor to be able to set its value.</p>\n\n<p>All this to say that it's probably not worth trying to work around it. If you need an non-default implementation for <code>equals</code> and <code>hashCode</code>, data classes can't help you, and you'll need to implement and maintain them manually.</p>\n\n<hr>\n\n<p>Edit: as @tynn pointed out, a private setter could be a solution so that your <code>value</code> isn't mutable from outside the class:</p>\n\n<pre><code>class CSVColumn private constructor(private val index: Int) {\n\n    var value: String = \"\"\n        private set\n\n    constructor(index: Int, value: String) : this(index) {\n        this.value = value\n    }\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 5427663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f9c9fe9199349793db217d3a9e9596?s=128&d=identicon&r=PG&f=1", "display_name": "TheOperator", "link": "https://stackoverflow.com/users/5427663/theoperator"}, "is_accepted": false, "score": 0, "last_activity_date": 1557298920, "creation_date": 1557298920, "answer_id": 56035198, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator/56035198#56035198", "title": "Kotlin equals and hash code generator", "body": "<p>I wrote a little utility called \"stem\", which allows you to select which properties to consider for equality and hashing. The resulting code is as small as it can get with manual <code>equals()/hashCode()</code> implementation:</p>\n\n<pre><code>class CSVColumn(private val index: Int, val value: String)  {\n    private val stem = Stem(this, { index })\n\n    override fun equals(other: Any?) = stem.eq(other)\n    override fun hashCode() = stem.hc()\n}\n</code></pre>\n\n<p>You can see its implementation <a href=\"https://stackoverflow.com/a/56035137/5427663\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1858, "user_id": 5097539, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1fa1dff17a3586fbbe5903c75e4a0491?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Bacon", "link": "https://stackoverflow.com/users/5097539/francis-bacon"}, "is_accepted": false, "score": 0, "last_activity_date": 1564567538, "creation_date": 1564567538, "answer_id": 57288245, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator/57288245#57288245", "title": "Kotlin equals and hash code generator", "body": "<p>I guess that we have to write <code>equals()/hashCode()</code> manually for now.\n<a href=\"https://discuss.kotlinlang.org/t/automatically-generate-equals-hashcode-methods/3779\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/automatically-generate-equals-hashcode-methods/3779</a></p>\n\n<p>It is not supported and is planning to be, IMHO.</p>\n"}, {"tags": [], "owner": {"reputation": 1858, "user_id": 5097539, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1fa1dff17a3586fbbe5903c75e4a0491?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Bacon", "link": "https://stackoverflow.com/users/5097539/francis-bacon"}, "is_accepted": false, "score": 0, "last_activity_date": 1564567813, "creation_date": 1564567813, "answer_id": 57288332, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator/57288332#57288332", "title": "Kotlin equals and hash code generator", "body": "<p>I guess that we have to write equals()/hashCode() manually for now. <a href=\"https://discuss.kotlinlang.org/t/automatically-generate-equals-hashcode-methods/3779\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/automatically-generate-equals-hashcode-methods/3779</a></p>\n\n<p>It is not supported and is planning to be, IMHO.</p>\n\n<p>Below are some reference which may be helpful.</p>\n\n<p><a href=\"https://discuss.kotlinlang.org/t/how-does-kotlin-implement-equals-and-hashcode/940\" rel=\"nofollow noreferrer\">https://discuss.kotlinlang.org/t/how-does-kotlin-implement-equals-and-hashcode/940</a>\n<a href=\"https://kotlinlang.org/docs/reference/data-classes.html\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/data-classes.html</a>\n<a href=\"https://medium.com/@appmattus/effective-kotlin-item-11-always-override-hashcode-when-you-override-equals-608a090aeaed\" rel=\"nofollow noreferrer\">https://medium.com/@appmattus/effective-kotlin-item-11-always-override-hashcode-when-you-override-equals-608a090aeaed</a></p>\n"}], "owner": {"reputation": 5324, "user_id": 4127155, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/de33f041278b4510e12301afd4580a82?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4127155/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10935, "favorite_count": 1, "accepted_answer_id": 50449814, "answer_count": 5, "score": 9, "last_activity_date": 1564567813, "creation_date": 1526907989, "last_edit_date": 1526908124, "question_id": 50449603, "link": "https://stackoverflow.com/questions/50449603/kotlin-equals-and-hash-code-generator", "title": "Kotlin equals and hash code generator", "body": "<p>I am aware that in Kotlin classes will have an equals and hashcode created automatically as follows:</p>\n\n<pre><code>data class CSVColumn(private val index: Int, val value: String) {\n}\n</code></pre>\n\n<p>My question is, is there a way to have the implementation just use one of these properties (such as <code>index</code>) without writing the code yourself. What was otherwise a very succinct class now looks like this:</p>\n\n<pre><code>data class CSVColumn(private val index: Int, val value: String) {\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) {\n            return true\n        }\n        if (javaClass != other?.javaClass) {\n            return false\n        }\n        other as CSVColumn\n        if (index != other.index) {\n            return false\n        }\n        return true\n    }\n\n    override fun hashCode(): Int {\n        return index\n    }\n\n}\n</code></pre>\n\n<p>In Java with Lombok, I can do something like:</p>\n\n<pre><code>@Value\n@EqualsAndHasCode(of=\"index\")\npublic class CsvColumn {\n    private final int index;\n    private final String value;\n}\n</code></pre>\n\n<p>Would be cool if there were a way to tell Kotlin something similar.</p>\n"}, {"tags": ["spring", "spring-boot", "spring-security", "kotlin"], "comments": [{"owner": {"reputation": 2928, "user_id": 2381172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSd0b.jpg?s=128&g=1", "display_name": "xuesheng", "link": "https://stackoverflow.com/users/2381172/xuesheng"}, "edited": false, "score": 0, "creation_date": 1526939910, "post_id": 50449447, "comment_id": 87927800, "body": "Something wrong must be happening in entry point."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 9964184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmtcf.jpg?s=128&g=1", "display_name": "Mariano Z Lopez", "link": "https://stackoverflow.com/users/9964184/mariano-z-lopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1529550240, "creation_date": 1529550240, "answer_id": 50959767, "question_id": 50449447, "link": "https://stackoverflow.com/questions/50449447/spring-security-not-working-at-all/50959767#50959767", "title": "spring security not working at all", "body": "<p>try with </p>\n\n<pre><code>.antMatchers(HttpMethod.GET,\"/sign_in\").permitAll().and()\n.antMatchers(HttpMethod.GET, \"/users/sign_up\").permitAll().and()\n.anyRequest().authenticated()\n</code></pre>\n"}], "owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 573, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529550240, "creation_date": 1526907450, "last_edit_date": 1526908171, "question_id": 50449447, "link": "https://stackoverflow.com/questions/50449447/spring-security-not-working-at-all", "title": "spring security not working at all", "body": "<p>I have the following configuration:</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\nclass SignInSecurityConfig(\n        val authenticationEntryPoint: AppAuthenticationEntryPoint\n) : WebSecurityConfigurerAdapter() {\n\n    override fun configure(http: HttpSecurity) {\n        http.cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(authenticationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .antMatchers(\"/sign_in\", \"/users/sign_up\").permitAll()\n                .anyRequest().authenticated()\n\n        http.addFilterBefore(JwtAuthorizationFilter(), UsernamePasswordAuthenticationFilter::class.java)\n    }\n}\n</code></pre>\n\n<p>currently, <code>JwtAuthorizationFilter</code> is just logging some information and calling  <code>chain.doFilter</code></p>\n\n<p>Now, some interesting things are happening:</p>\n\n<p>1) when I call <code>/users/sign_up</code> the signing up process is triggered, tries to register the user, if successful, return <code>201</code>, if not, returns <code>401</code> instead <code>500</code> (in my case, I wanted to return 500)</p>\n\n<p>2) when I call <code>/sign_in</code>, I just get <code>401</code>, no errors, no logs, nothing.</p>\n\n<p>3) the <code>JwtAuthorizationFilter</code>, although it is in the filters list, is never invoked.  </p>\n\n<p>4) The filter chain looks weird:</p>\n\n<pre><code>2018-05-21 14:58:22.318  INFO 2339 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: Ant [pattern='/users/sign_up'], []\n2018-05-21 14:58:22.484  INFO 2339 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Creating filter chain: org.springframework.security.web.util.matcher.AnyRequestMatcher@1, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@46b2cadf, org.springframework.security.web.context.SecurityContextPersistenceFilter@e41e9a9, org.springframework.security.web.header.HeaderWriterFilter@733dea73, org.springframework.security.web.csrf.CsrfFilter@59140203, org.springframework.security.web.authentication.logout.LogoutFilter@6e8e5936, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@52fb6fa5, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@497c75f3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@10a4663e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cfbcfd6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5aa01db1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fe39081, org.springframework.security.web.session.SessionManagementFilter@47da14ce, org.springframework.security.web.access.ExceptionTranslationFilter@376d0f3a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@797b0e0c]\n</code></pre>\n\n<p>Any ideas why this is happening?</p>\n\n<p>I'm using Spring Boot 2.0.2 with default dependencies version</p>\n"}, {"tags": ["android", "kotlin", "android-actionbar", "fragment", "title"], "comments": [{"owner": {"reputation": 2018, "user_id": 5562711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmKEn.jpg?s=128&g=1", "display_name": "Omar El Halabi", "link": "https://stackoverflow.com/users/5562711/omar-el-halabi"}, "edited": false, "score": 1, "creation_date": 1526904322, "post_id": 50448376, "comment_id": 87910261, "body": "the title is there, the problem is that both the text and the background are white (it is there but difficult to see from the provided screenshot)."}, {"owner": {"reputation": 355, "user_id": 7950494, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RpkbL.jpg?s=128&g=1", "display_name": "Sandeep Manmode", "link": "https://stackoverflow.com/users/7950494/sandeep-manmode"}, "edited": false, "score": 0, "creation_date": 1565157540, "post_id": 50448376, "comment_id": 101258596, "body": "Have you got any solution for this? Facing the same issue."}], "answers": [{"tags": [], "owner": {"reputation": 11206, "user_id": 4571931, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/L8ohX.png?s=128&g=1", "display_name": "Android Team", "link": "https://stackoverflow.com/users/4571931/android-team"}, "is_accepted": false, "score": 0, "last_activity_date": 1526904754, "creation_date": 1526904754, "answer_id": 50448651, "question_id": 50448376, "link": "https://stackoverflow.com/questions/50448376/android-kotlin-fragment-action-bar-title/50448651#50448651", "title": "android kotlin fragment action bar title", "body": "<p>Try this code \nmake one method in main activity to update toolbar like below code..</p>\n\n<pre><code>fun updateToolbar(){\n\n   when(FragmentController.getFrontFragmentTag(this)){\n         FragmentController.EXAM_FRAGMENT-&gt;{\n            mIndexMenu= INDEX_ADD\n            updateToolbarTitle(\"Exam\")\n        }\n\n    }\n}\n</code></pre>\n\n<p>and make separate class for add fragment in all other method like \nFragmentControl.kt.</p>\n\n<pre><code>       fun getFrontFragmentTag(activity: FragmentActivity?): String? {\n        return activity?.supportFragmentManager?.findFragmentById(if (activity is Main2Activity) MAIN_ROOT else LOGIN_ROOT)?.tag\n    }\n        fun AppCompatActivity.addExamFragment(): Fragment {\n        mFragment = ExamFragment()\n        this.supportFragmentManager?.beginTransaction()?.replace(if (this is LoginActivity) LOGIN_ROOT else MAIN_ROOT, mFragment, EXAM_FRAGMENT)?.commit()\n        return mFragment as ExamFragment\n    }\n</code></pre>\n\n<p>and in main activity call below code add fragment ..</p>\n\n<pre><code>                addExamFragment()\n</code></pre>\n\n<p>and in examFragment in onCreate method call below code to update tool bar.</p>\n\n<pre><code> (activity as Main2Activity).updateToolbar()\n</code></pre>\n"}], "owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1363, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526904754, "creation_date": 1526903810, "question_id": 50448376, "link": "https://stackoverflow.com/questions/50448376/android-kotlin-fragment-action-bar-title", "title": "android kotlin fragment action bar title", "body": "<ul>\n<li>Question 1) How to set title of action bar in Fragment? </li>\n<li>Question 2) What is the problem in my code?</li>\n</ul>\n\n<p>MainActivity.kt</p>\n\n<pre><code>    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n//        Action Bar\n        val actionBar = supportActionBar\n        actionBar!!.setDisplayShowHomeEnabled(true)\n        actionBar.setBackgroundDrawable(ColorDrawable(Color.parseColor(\"#00FFFFFF\")))\n        actionBar.setIcon(R.drawable.title)\n        actionBar.setDisplayShowTitleEnabled(false)\n\n        createQponFragment()\n        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)\n    }\n</code></pre>\n\n<p>Fragment.kt</p>\n\n<pre><code>override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n                              savedInstanceState: Bundle?): View? {\n        // Inflate the layout for this fragment\n        setHasOptionsMenu(true)\n\n\n        val actionBar = (activity as MainActivity).supportActionBar\n\n        actionBar!!.setDisplayShowTitleEnabled(true)\n        actionBar!!.setTitle(\"Tutorial\")\n\n        return inflater.inflate(R.layout.fragment_me, container, false)\n    }\n</code></pre>\n\n<p>Simulator shows that my fragment page has no title at all!</p>\n\n<p><a href=\"https://i.stack.imgur.com/LePXi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LePXi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "kotlin", "google-signin"], "answers": [{"comments": [{"owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1528111948, "post_id": 50665608, "comment_id": 88368565, "body": "Thanks you for the asnwer and sorry for the late response, It says that <code>result</code> cannot be invoked as a function, therefore I am not even able to run that code."}, {"owner": {"reputation": 614, "user_id": 7482517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8JHqn.jpg?s=128&g=1", "display_name": "Keshav Aggarwal", "link": "https://stackoverflow.com/users/7482517/keshav-aggarwal"}, "reply_to_user": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1528112083, "post_id": 50665608, "comment_id": 88368633, "body": "Okay, can you update the question with your SignIn Activity and all ? And it would be great if you can upload it on github so that i can clone and debug it if its possible.."}, {"owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1528112634, "post_id": 50665608, "comment_id": 88368979, "body": "I have uploaded here the SignInActivity.kt file: <a href=\"https://gist.github.com/DANISSIMO9699/bea2395b30e347cab8fb904162cbd396\" rel=\"nofollow noreferrer\">gist.github.com/DANISSIMO9699/bea2395b30e347cab8fb904162cbd3&zwnj;&#8203;96</a>"}, {"owner": {"reputation": 614, "user_id": 7482517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8JHqn.jpg?s=128&g=1", "display_name": "Keshav Aggarwal", "link": "https://stackoverflow.com/users/7482517/keshav-aggarwal"}, "reply_to_user": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 2, "creation_date": 1528115334, "post_id": 50665608, "comment_id": 88370612, "body": "can you try adding this line after <code>if(requestCode == RC_SIGN_IN)</code>, <code>if (resultCode == Activity.RESULT_OK)</code>, then continue with other code."}, {"owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1528121194, "post_id": 50665608, "comment_id": 88374562, "body": "ok trying I did it like this: <code>if (requestCode == RC_SIGN_IN &amp;&amp; resultCode == Activity.RESULT_OK)</code>"}, {"owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 1, "creation_date": 1528121405, "post_id": 50665608, "comment_id": 88374696, "body": "This fixed it!! Thanks a lot!"}, {"owner": {"reputation": 614, "user_id": 7482517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8JHqn.jpg?s=128&g=1", "display_name": "Keshav Aggarwal", "link": "https://stackoverflow.com/users/7482517/keshav-aggarwal"}, "reply_to_user": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "edited": false, "score": 0, "creation_date": 1528124206, "post_id": 50665608, "comment_id": 88376518, "body": "Great. Thank you! :)"}], "tags": [], "owner": {"reputation": 614, "user_id": 7482517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8JHqn.jpg?s=128&g=1", "display_name": "Keshav Aggarwal", "link": "https://stackoverflow.com/users/7482517/keshav-aggarwal"}, "is_accepted": true, "score": 19, "last_activity_date": 1528124181, "last_edit_date": 1528124181, "creation_date": 1528023326, "answer_id": 50665608, "question_id": 50447430, "link": "https://stackoverflow.com/questions/50447430/google-sign-in-apiexception-12501-when-dismissing-the-sign-in-dialog/50665608#50665608", "title": "Google Sign In - ApiException 12501 when dismissing the sign in dialog", "body": "<p>Can you try this and let me know what happens:</p>\n\n<pre><code>if (requestCode == RC_SIGN_IN) {\n        val task = GoogleSignIn.getSignedInAccountFromIntent(data)\n        try {\n            val account = task.result(ApiException::class.java)\n            firebaseAuthWithGoogle(account)\n        } catch (e: ApiException) {\n            Log.w(\"TAG\", \"signInResult:failed code=\" + e.getStatusCode());\n        }\n    }\n</code></pre>\n\n<p>Please, tell me what you get when Logging this.</p>\n\n<p>Also it would be great if you can also upload whole code you wrote in SignIn Activity and also the google-services.json file so that i can debug the issue. </p>\n\n<p><strong>EDIT</strong>\nAdd this</p>\n\n<pre><code>if (resultCode == Activity.RESULT_OK)\n</code></pre>\n\n<p>after <code>requestCode == RC_SIGN_IN</code></p>\n"}, {"comments": [{"owner": {"reputation": 11661, "user_id": 277267, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/F0Dwz.png?s=128&g=1", "display_name": "Daniel F", "link": "https://stackoverflow.com/users/277267/daniel-f"}, "edited": false, "score": 2, "creation_date": 1578662039, "post_id": 59477031, "comment_id": 105521718, "body": "This is the correct way to handle it. <code>GoogleSignInStatusCodes</code> extends the common status codes and has an explicit error code for a cancellation event <code>e.getStatusCode() == GoogleSignInStatusCodes.SIGN_IN_CANCELLED</code>, so you will want to check if that is the error code you are getting passed."}], "tags": [], "owner": {"reputation": 1526, "user_id": 1920670, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3e4c44d78b9654baf65100088deafc04?s=128&d=identicon&r=PG&f=1", "display_name": "MainActivity", "link": "https://stackoverflow.com/users/1920670/mainactivity"}, "is_accepted": false, "score": 3, "last_activity_date": 1577266546, "creation_date": 1577266546, "answer_id": 59477031, "question_id": 50447430, "link": "https://stackoverflow.com/questions/50447430/google-sign-in-apiexception-12501-when-dismissing-the-sign-in-dialog/59477031#59477031", "title": "Google Sign In - ApiException 12501 when dismissing the sign in dialog", "body": "<p>Better check <a href=\"https://github.com/googlesamples/google-services/blob/master/android/signin/app/src/main/java/com/google/samples/quickstart/signin/SignInActivity.java#L96\" rel=\"nofollow noreferrer\">google sample</a> and handle exception like this</p>\n\n<pre><code>private void handleSignInResult(Task&lt;GoogleSignInAccount&gt; completedTask) {\n        try {\n            GoogleSignInAccount account = completedTask.getResult(ApiException.class);\n\n            // Signed in successfully, show authenticated UI.\n            updateUI(account);\n        } catch (ApiException e) {\n            // The ApiException status code indicates the detailed failure reason.\n            // Please refer to the GoogleSignInStatusCodes class reference for more information.\n            Log.w(TAG, \"signInResult:failed code=\" + e.getStatusCode());\n            updateUI(null);\n        }\n    }\n</code></pre>\n\n<p>Such way you will not lose <a href=\"https://developers.google.com/android/reference/com/google/android/gms/auth/api/signin/GoogleSignInStatusCodes\" rel=\"nofollow noreferrer\">sign in status codes</a> and can check for <a href=\"https://developers.google.com/android/reference/com/google/android/gms/common/api/CommonStatusCodes\" rel=\"nofollow noreferrer\">common status code</a>.</p>\n"}], "owner": {"reputation": 3475, "user_id": 6427630, "user_type": "registered", "accept_rate": 99, "profile_image": "https://graph.facebook.com/10209535920773773/picture?type=large", "display_name": "Daniele", "link": "https://stackoverflow.com/users/6427630/daniele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4875, "favorite_count": 3, "accepted_answer_id": 50665608, "answer_count": 2, "score": 13, "last_activity_date": 1577266546, "creation_date": 1526900442, "last_edit_date": 1528112744, "question_id": 50447430, "link": "https://stackoverflow.com/questions/50447430/google-sign-in-apiexception-12501-when-dismissing-the-sign-in-dialog", "title": "Google Sign In - ApiException 12501 when dismissing the sign in dialog", "body": "<p>I have implemented the Google Sign In successfully, it works fine and I get no exceptions when I actually go through the whole sign in process.</p>\n\n<p>But if I click on the Google sign in button and then hit the back button to dismiss the dialog, I somehow get the following error:</p>\n\n<blockquote>\n  <p>Caused by: com.google.android.gms.tasks.RuntimeExecutionException: com.google.android.gms.common.api.ApiException: 12501: \n                        at com.google.android.gms.tasks.zzu.getResult(Unknown Source:17)</p>\n</blockquote>\n\n<p>which points me to this piece of code:</p>\n\n<pre><code>if (requestCode == RC_SIGN_IN) {\n            val task = GoogleSignIn.getSignedInAccountFromIntent(data)\n            try {\n                val account = task.result\n                firebaseAuthWithGoogle(account)\n            } catch (e: ApiException) {\n                Toast.makeText(this, \"Google Sign In Failed\", Toast.LENGTH_SHORT).show()\n            }\n        }\n</code></pre>\n\n<p>specifically on the <code>val account = task.result</code> line.</p>\n\n<p>My question is, shouldn't it handle it by himself via the <code>catch</code> and print out the toast? Why is the whole app crashing instead?</p>\n\n<p>Here is my whole <code>SignInActivity</code>:</p>\n\n<pre><code>import android.content.Context\nimport android.content.Intent\nimport android.os.Bundle\nimport android.support.design.widget.BottomSheetDialog\nimport android.support.v7.app.AppCompatActivity\nimport android.view.View\nimport android.widget.Toast\nimport com.dancam.subscriptions.ActiveSubscriptions.SubscriptionsMain\nimport com.dancam.subscriptions.R.id.google_signin_button\nimport com.dancam.subscriptions.R.id.signin_progressbar\nimport com.google.android.gms.auth.api.signin.GoogleSignIn\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions\nimport com.google.android.gms.common.SignInButton\nimport com.google.android.gms.common.api.ApiException\nimport com.google.firebase.auth.FirebaseAuth\nimport com.google.firebase.auth.FirebaseUser\nimport com.google.firebase.auth.GoogleAuthProvider\nimport kotlinx.android.synthetic.main.reset_password_dialog.view.*\nimport kotlinx.android.synthetic.main.sign_dialog.view.*\nimport kotlinx.android.synthetic.main.signin.*\nimport org.jetbrains.anko.defaultSharedPreferences\nimport org.jetbrains.anko.sdk25.coroutines.onClick\n\nclass SignInActivity: AppCompatActivity() {\n    private var mAuth: FirebaseAuth? = null\n    private var mGoogleSignInClient: GoogleSignInClient? = null\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.signin)\n\n        val gso = GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                .requestIdToken(getString(R.string.default_web_client_id))\n                .requestEmail()\n                .build()\n\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso)\n        mAuth = FirebaseAuth.getInstance()\n\n        google_signin_button.setSize(SignInButton.SIZE_WIDE)\n        google_signin_button.setOnClickListener { signIn() }\n    }\n\n    override fun onStart() {\n        super.onStart()\n        val currentUser = mAuth?.currentUser\n\n        if (currentUser!=null) loggedIn(currentUser)\n    }\n\n    private fun signIn() {\n        val signInIntent = mGoogleSignInClient?.signInIntent\n        startActivityForResult(signInIntent, RC_SIGN_IN)\n        signin_progressbar.visibility = View.VISIBLE\n    }\n\n    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n        super.onActivityResult(requestCode, resultCode, data)\n\n        if (requestCode == RC_SIGN_IN) {\n            val task = GoogleSignIn.getSignedInAccountFromIntent(data)\n            try {\n                val account = task.result\n                firebaseAuthWithGoogle(account)\n            } catch (e: ApiException) {\n                Toast.makeText(this, \"Google Sign In Failed\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    private fun firebaseAuthWithGoogle(acct: GoogleSignInAccount) {\n        val credential = GoogleAuthProvider.getCredential(acct.idToken, null)\n        mAuth?.signInWithCredential(credential)\n                ?.addOnCompleteListener {\n                    if (it.isSuccessful) {\n                        signin_progressbar.visibility = View.GONE\n                        val user = mAuth?.currentUser\n                        loggedIn(user)\n                    } else {\n                        signin_progressbar.visibility = View.GONE\n                        Toast.makeText(this, \"Authentication Failed\", Toast.LENGTH_SHORT).show()\n                        loggedIn(null)\n                    }\n                }\n    }\n\n    fun onSignUpClicked(args: View) {\n        val view = layoutInflater.inflate(R.layout.sign_dialog, null)\n        val dialog = BottomSheetDialog(this)\n        dialog.setContentView(view)\n        dialog.show()\n\n        view.register_button.setOnClickListener {\n            val email = view.signup_email.text.toString()\n            val password = view.signup_password.text.toString()\n            val password2 = view.signup_password2.text.toString()\n\n            if (password == password2) {\n                mAuth?.createUserWithEmailAndPassword(email, password)\n                        ?.addOnCompleteListener {\n                            if (it.isSuccessful) {\n                                //sign in success updateUI\n                                val user = mAuth?.currentUser\n                                loggedIn(user)\n                            } else {\n                                // signin failed\n                                //TODO: translate\n                                Toast.makeText(this, \"Authentication Failed\", Toast.LENGTH_SHORT).show()\n                                loggedIn(null)\n                            }\n                        }\n            } else {\n                //TODO: translate\n                Toast.makeText(this, \"Passwords do not match\", Toast.LENGTH_LONG).show()\n            }\n        }\n    }\n\n    fun onSignInClicked(args: View) {\n        val view = layoutInflater.inflate(R.layout.sign_dialog, null)\n        val dialog = BottomSheetDialog(this)\n\n        //TODO: translate\n        view.dialog_textview.text = \"Sign In\"\n        view.signup_password2.visibility = View.GONE\n\n        dialog.setContentView(view)\n        dialog.show()\n\n        //TODO: translate\n        view.register_button.text = \"Sign In\"\n        view.register_button.setOnClickListener {\n            val email = view.signup_email.text.toString()\n            val password = view.signup_password.text.toString()\n\n            mAuth?.signInWithEmailAndPassword(email, password)\n                    ?.addOnCompleteListener {\n                        if (it.isSuccessful) {\n                            val user = mAuth?.currentUser\n                            loggedIn(user)\n                        } else {\n                            //TODO: translate\n                            Toast.makeText(this, \"Sign In Failed\", Toast.LENGTH_LONG).show()\n                            view.forgotten_password.visibility = View.VISIBLE\n\n                            view.forgotten_password.onClick {\n                                dialog.dismiss()\n                                resetDialog()\n                            }\n                        }\n                    }\n        }\n    }\n\n    private fun resetDialog() {\n        val resetView = layoutInflater.inflate(R.layout.reset_password_dialog, null)\n        val resetDialog = BottomSheetDialog(this)\n        resetDialog.setContentView(resetView)\n        resetDialog.show()\n\n        resetView.send_reset_email.setOnClickListener {\n            resetView.send_reset_email.isClickable = false\n            val email = resetView.reset_email.text.toString()\n            mAuth?.sendPasswordResetEmail(email)\n                    ?.addOnSuccessListener {\n                        //TODO: translate\n                        Toast.makeText(this, \"Email Sent\", Toast.LENGTH_SHORT).show()\n                        resetDialog.dismiss()\n                    }\n        }\n    }\n\n    private fun loggedIn(user: FirebaseUser?) {\n        startActivity(Intent(this, SubscriptionsMain::class.java))\n        finish()\n    }\n\n    fun onSkipClicked(args:View) {\n        loggedIn(null)\n    }\n\n    companion object {\n        const val RC_SIGN_IN = 0000    }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "mockito"], "answers": [{"comments": [{"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "edited": false, "score": 3, "creation_date": 1526941709, "post_id": 50449830, "comment_id": 87928325, "body": "I don&#39;t think this is true anymore. That&#39;s the point of the inline dependency. Also, I&#39;m pretty sure we can&#39;t (yet) mock final classes in the androidTest source set. Some limitation of the Android SDK."}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1526979605, "post_id": 50449830, "comment_id": 87940421, "body": "Works fine for me. Have you tried to run just unit test with this file? Could it be as stated here - <a href=\"https://stackoverflow.com/a/40992880/3569545\">stackoverflow.com/a/40992880/3569545</a>"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1526996808, "post_id": 50449830, "comment_id": 87951964, "body": "Every thing fine with the approach. I&#39;m using it in my unit tests. What are you trying to mock?  Message &quot;More than one file was found with OS independent path &#39;mockito-extensions/org.mockito.plugins.MockMaker&#39;&quot; could say that several libs are placing such file, do you need all those imports in build.gradle?"}, {"owner": {"reputation": 3845, "user_id": 613339, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/09953a70f4c8a0e7b6a90897e5c747df?s=128&d=identicon&r=PG", "display_name": "bsautner", "link": "https://stackoverflow.com/users/613339/bsautner"}, "edited": false, "score": 0, "creation_date": 1564075565, "post_id": 50449830, "comment_id": 100921144, "body": "putting this file in the androidTest resources dir cleared this issue for me - i didn&#39;t need this until after I migrated to androidx and had to update many libraries like mockito"}], "tags": [], "owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "is_accepted": false, "score": 6, "last_activity_date": 1526908763, "creation_date": 1526908763, "answer_id": 50449830, "question_id": 50447067, "link": "https://stackoverflow.com/questions/50447067/android-kotlin-mockmaker-issues/50449830#50449830", "title": "Android kotlin mockMaker issues", "body": "<p>In order to be able to mock final classes in Kotlin, you\u2019ll need to create a file\n<code>org.mockito.plugins.MockMaker</code> (literally) that contains only this line </p>\n\n<pre><code>mock-maker-inline\n</code></pre>\n\n<p>and place it into\n<code>test/resources/mockito-extensions</code>.</p>\n\n<p>For more info please read <a href=\"https://antonioleiva.com/mockito-2-kotlin/\" rel=\"noreferrer\">https://antonioleiva.com/mockito-2-kotlin/</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1526979174, "post_id": 50461857, "comment_id": 87940152, "body": "So i would need to just make the class Open?"}, {"owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "reply_to_user": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1526979317, "post_id": 50461857, "comment_id": 87940225, "body": "@jonney can you depend on interfaces rather than concrete final classes?"}, {"owner": {"reputation": 3602, "user_id": 3569545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb00bcc2abeb14cf5bfacfa1013a92ad?s=128&d=identicon&r=PG&f=1", "display_name": "Demigod", "link": "https://stackoverflow.com/users/3569545/demigod"}, "edited": false, "score": 0, "creation_date": 1526980168, "post_id": 50461857, "comment_id": 87940782, "body": "You&#39;re talking about mocking final classes in Java. But the question touches Kotlin. In Kotlin it is possible. You don&#39;t have to add <code>open</code> keyword to every class you want to mock."}, {"owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "edited": false, "score": 0, "creation_date": 1526988092, "post_id": 50461857, "comment_id": 87945912, "body": "You do though, how else can you make the class none final? Na i need to use proper impl of the class, i do have interfaces but i test the actual Impl using a spy and just mock the underlining data but still have my impl perform real world logic to a mocked data"}], "tags": [], "owner": {"reputation": 17436, "user_id": 5241933, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/n9pSx.jpg?s=128&g=1", "display_name": "David Rawson", "link": "https://stackoverflow.com/users/5241933/david-rawson"}, "is_accepted": false, "score": 1, "last_activity_date": 1526973315, "creation_date": 1526973315, "answer_id": 50461857, "question_id": 50447067, "link": "https://stackoverflow.com/questions/50447067/android-kotlin-mockmaker-issues/50461857#50461857", "title": "Android kotlin mockMaker issues", "body": "<p>As per <a href=\"https://stackoverflow.com/a/45850198/5241933\">this answer</a> you cannot mock final classes in <code>androidTest</code>- it is a limitation explained in the Mockito Github issue tracker <a href=\"https://github.com/mockito/mockito/issues/1173\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>There is no real possibility to make this [mocking of final classes] work in Android at the moment as it lacks the instrumentation API on top of which we are operating. The Android VM is not a standard VM and only implements a subset of the Java specification. As long as Google does not choose to extend its JVM, I am afraid that this feature will not work.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 2379746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7e1395d5244036d7199c42112b354e?s=128&d=identicon&r=PG", "display_name": "Kharda", "link": "https://stackoverflow.com/users/2379746/kharda"}, "is_accepted": false, "score": 0, "last_activity_date": 1544607118, "creation_date": 1544607118, "answer_id": 53739931, "question_id": 50447067, "link": "https://stackoverflow.com/questions/50447067/android-kotlin-mockmaker-issues/53739931#53739931", "title": "Android kotlin mockMaker issues", "body": "<p>In my case, I got this error because I use <code>implementation \"org.mockito:mockito-inline:2.13.0\"</code> instead of <code>testImplementation \"org.mockito:mockito-inline:2.13.0\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 3873867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20234d62899c1defd85d9ce8ab521dce?s=128&d=identicon&r=PG&f=1", "display_name": "Nijat Ahmadli", "link": "https://stackoverflow.com/users/3873867/nijat-ahmadli"}, "is_accepted": false, "score": 2, "last_activity_date": 1600417691, "creation_date": 1600417691, "answer_id": 63952027, "question_id": 50447067, "link": "https://stackoverflow.com/questions/50447067/android-kotlin-mockmaker-issues/63952027#63952027", "title": "Android kotlin mockMaker issues", "body": "<p><code>mockito-inline</code> won't work for instrumentation tests. In order to be able to mock final classes in instrumentation tests you just need to include the following line only:</p>\n<p><code>androidTestImplementation com.linkedin.dexmaker:dexmaker-mockito-inline:2.28.0</code></p>\n<p>Refer to its <a href=\"https://github.com/linkedin/dexmaker#mocking-final-classes--methods\" rel=\"nofollow noreferrer\">Github page</a> for more details</p>\n<p><a href=\"https://github.com/mockito/mockito/issues/1919\" rel=\"nofollow noreferrer\">This thread</a> might also be useful.</p>\n"}], "owner": {"reputation": 15439, "user_id": 444668, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/7ffced6cbed40a750c8ef8a365872fd7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/444668/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3357, "favorite_count": 0, "answer_count": 4, "score": 8, "last_activity_date": 1600417691, "creation_date": 1526899198, "last_edit_date": 1526899750, "question_id": 50447067, "link": "https://stackoverflow.com/questions/50447067/android-kotlin-mockmaker-issues", "title": "Android kotlin mockMaker issues", "body": "<p>Hi i am trying to mock a final class(as all classes in kotlin are final by default) and  added the following dependencies in my gradle:</p>\n\n<pre><code>testImplementation 'junit:junit:4.12'\ntestImplementation 'au.com.dius:pact-jvm-consumer-junit_2.11:3.5.10'\ntestImplementation \"org.mockito:mockito-android:2.13.0\"\ntestImplementation 'org.mockito:mockito-inline:2.13.0'\ntestImplementation \"org.mockito:mockito-core:2.13.0\"\n//testImplementation 'io.mockk:mockk:1.8'\ntestImplementation 'org.assertj:assertj-core:3.8.0'\n\nandroidTestImplementation 'com.android.support.test:runner:1.0.2'\nandroidTestImplementation 'com.android.support.test:rules:1.0.2'\nandroidTestImplementation 'junit:junit:4.12'\nandroidTestImplementation \"org.mockito:mockito-core:2.13.0\"\nandroidTestImplementation \"org.mockito:mockito-android:2.13.0\"\nandroidTestImplementation 'org.mockito:mockito-inline:2.13.0'\nandroidTestImplementation \"com.android.support.test.espresso:espresso-intents:3.0.2\"\n</code></pre>\n\n<p>the mockito-inline is supposed to enable you to mock a final kotlin class and so i added to both my java unit test and my instrumental test using  testImplementation and androidTestImplementation</p>\n\n<p>On building the project i get the following error:</p>\n\n<pre><code>More than one file was found with OS independent path 'mockito-extensions/org.mockito.plugins.MockMaker'\n</code></pre>\n\n<p>Any ideas whats going on? if i remove the androidTestImplementation of the mockitio inline, it compiles fine but when running intrumental test i get the mockito error saying it cannot mock a final class.</p>\n"}, {"tags": ["docker", "deployment", "kotlin", "vert.x", "vertx-verticle"], "comments": [{"owner": {"reputation": 11707, "user_id": 4393565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19ab0903bafafe65cabf872f3ef5cff6?s=128&d=identicon&r=PG", "display_name": "P.J.Meisch", "link": "https://stackoverflow.com/users/4393565/p-j-meisch"}, "edited": false, "score": 0, "creation_date": 1526932638, "post_id": 50446572, "comment_id": 87924989, "body": "any error messages?"}, {"owner": {"reputation": 127, "user_id": 6897787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e885364414780ec724261c392ab304d?s=128&d=identicon&r=PG&f=1", "display_name": "Bakhrom Achilov", "link": "https://stackoverflow.com/users/6897787/bakhrom-achilov"}, "reply_to_user": {"reputation": 11707, "user_id": 4393565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/19ab0903bafafe65cabf872f3ef5cff6?s=128&d=identicon&r=PG", "display_name": "P.J.Meisch", "link": "https://stackoverflow.com/users/4393565/p-j-meisch"}, "edited": false, "score": 0, "creation_date": 1526965694, "post_id": 50446572, "comment_id": 87933413, "body": "I added error report"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 7294438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9c29e373d7e8166277f4f30dad27446?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/7294438/tim"}, "is_accepted": true, "score": 0, "last_activity_date": 1526937528, "creation_date": 1526937528, "answer_id": 50456753, "question_id": 50446572, "link": "https://stackoverflow.com/questions/50446572/vert-x-project-in-kotlin-deploy-in-docker/50456753#50456753", "title": "Vert.x project in Kotlin deploy in Docker", "body": "<p>Please try to replace the line <code>ENV VERTICLE_NAME OpenApiRoutingVerticle.kt</code>\nwith <code>ENV VERTICLE_NAME com.mycompany.department.OpenApiRoutingVerticle</code></p>\n\n<p>The kotlin file is compiled to a .class file which should be picked up as long as you provide the classpath location.</p>\n"}], "owner": {"reputation": 127, "user_id": 6897787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e885364414780ec724261c392ab304d?s=128&d=identicon&r=PG&f=1", "display_name": "Bakhrom Achilov", "link": "https://stackoverflow.com/users/6897787/bakhrom-achilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 50456753, "answer_count": 1, "score": 0, "last_activity_date": 1526964639, "creation_date": 1526897588, "last_edit_date": 1526964639, "question_id": 50446572, "link": "https://stackoverflow.com/questions/50446572/vert-x-project-in-kotlin-deploy-in-docker", "title": "Vert.x project in Kotlin deploy in Docker", "body": "<p>\nI have a project written in vert.x framework in Kotlin. I build jar file, and I want to run this jar through Docker. But docker can't find my main Verticle file.</p>\n\n<p> Dockerfile: </p>\n\n<pre><code>FROM vertx/vertx3\n\nENV VERTICLE_NAME OpenApiRoutingVerticle.kt\nENV VERTICLE_FILE build/libs/vertx-kotlin-project-1.0-SNAPSHOT.jar\nENV VERTICLE_HOME /usr/verticles\nEXPOSE 8080\nCOPY  $VERTICLE_FILE $VERTICLE_HOME/\nWORKDIR $VERTICLE_HOME\nENTRYPOINT [\"sh\", \"-c\"]\nCMD [\"exec vertx run $VERTICLE_NAME -cp $VERTICLE_HOME/* $VERTX_OPTIONS\"]\n</code></pre>\n\n<p>Path to my main verticle</p>\n\n<pre><code> com.mycompany.department.OpenApiRoutingVerticle\n</code></pre>\n\n<p>PS the error is:</p>\n\n<pre><code>java.lang.IllegalStateException: Cannot find verticle script: OpenApiRoutingVerticle.kt on classpath\n    at io.vertx.lang.kotlin.KotlinVerticleFactory.createVerticle(KotlinVerticleFactory.kt:28)\n    at io.vertx.core.impl.DeploymentManager.createVerticles(DeploymentManager.java:229)\n    at io.vertx.core.impl.DeploymentManager.lambda$doDeployVerticle$2(DeploymentManager.java:202)\n    at io.vertx.core.impl.FutureImpl.setHandler(FutureImpl.java:76)\n    at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:171)\n    at io.vertx.core.impl.DeploymentManager.doDeployVerticle(DeploymentManager.java:143)\n    at io.vertx.core.impl.DeploymentManager.deployVerticle(DeploymentManager.java:131)\n    at io.vertx.core.impl.VertxImpl.deployVerticle(VertxImpl.java:665)\n    at io.vertx.core.impl.launcher.commands.VertxIsolatedDeployer.deploy(VertxIsolatedDeployer.java:42)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at io.vertx.core.impl.launcher.commands.ClasspathHandler.deploy(ClasspathHandler.java:159)\n    at io.vertx.core.impl.launcher.commands.RunCommand.deploy(RunCommand.java:397)\n    at io.vertx.core.impl.launcher.commands.RunCommand.run(RunCommand.java:270)\n    at io.vertx.core.impl.launcher.VertxCommandLauncher.execute(VertxCommandLauncher.java:226)\n    at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:361)\n    at io.vertx.core.impl.launcher.VertxCommandLauncher.dispatch(VertxCommandLauncher.java:324)\n    at io.vertx.core.Launcher.main(Launcher.java:45)\n</code></pre>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9736457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAQvY.jpg?s=128&g=1", "display_name": "mrneumann888", "link": "https://stackoverflow.com/users/9736457/mrneumann888"}, "edited": false, "score": 0, "creation_date": 1526897661, "post_id": 50446552, "comment_id": 87906614, "body": "That&#39;s pretty, but how can I detect, if my activity was called by another app(then call finish()), otherwise I want to continue"}], "tags": [], "owner": {"reputation": 15, "user_id": 9736457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAQvY.jpg?s=128&g=1", "display_name": "mrneumann888", "link": "https://stackoverflow.com/users/9736457/mrneumann888"}, "is_accepted": false, "score": 0, "last_activity_date": 1526897532, "creation_date": 1526897532, "answer_id": 50446552, "question_id": 50445402, "link": "https://stackoverflow.com/questions/50445402/how-to-return-video-from-my-custom-camera-to-messenger/50446552#50446552", "title": "How to return Video from my Custom Camera to Messenger", "body": "<pre><code> private fun finishWithResult() {\n        val sendVideoIntent = Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE)\n        sendVideoIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(File(mVideoFileName)))\n        setResult(Activity.RESULT_OK, sendVideoIntent)\n        sendBroadcast(sendVideoIntent)\n        //TODO finish()\n    }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9736457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAQvY.jpg?s=128&g=1", "display_name": "mrneumann888", "link": "https://stackoverflow.com/users/9736457/mrneumann888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526897532, "creation_date": 1526893771, "last_edit_date": 1526894095, "question_id": 50445402, "link": "https://stackoverflow.com/questions/50445402/how-to-return-video-from-my-custom-camera-to-messenger", "title": "How to return Video from my Custom Camera to Messenger", "body": "<p>Manifest(here my CameraApp can be called by another(ex. Telegram) app using intent):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.media.action.VIDEO_CAPTURE\"/&gt;\n        &lt;category android:name=\"android.intent.category.DEFAULT\"/&gt;\n    &lt;/intent-filter&gt;\n</code></pre>\n\n<p>I want to return recorded Video (Uri or File) by EXTRA_OUTPUT??? to messenger. I think from messenger its called something like this: (ex. for photo)</p>\n\n<pre><code>f = new File(str_Camera_Photo_ImagePath);\nstartActivityForResult(new Intent(\n    MediaStore.ACTION_IMAGE_CAPTURE).putExtra(\n    MediaStore.EXTRA_OUTPUT, Uri.fromFile(f)),\n    Take_Photo);\nSystem.err.println(\"f  \" + f);\n</code></pre>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 17502, "user_id": 631803, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c87544c41aef4ee2f170f685c8be31f0?s=128&d=identicon&r=PG&f=1", "display_name": "Vikasdeep Singh", "link": "https://stackoverflow.com/users/631803/vikasdeep-singh"}, "edited": false, "score": 1, "creation_date": 1526892585, "post_id": 50444981, "comment_id": 87903789, "body": "What error you are getting? Did you try to debug?"}, {"owner": {"reputation": 405, "user_id": 3974960, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xdl1r.jpg?s=128&g=1", "display_name": "Hoang Duc Tuan", "link": "https://stackoverflow.com/users/3974960/hoang-duc-tuan"}, "reply_to_user": {"reputation": 17502, "user_id": 631803, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c87544c41aef4ee2f170f685c8be31f0?s=128&d=identicon&r=PG&f=1", "display_name": "Vikasdeep Singh", "link": "https://stackoverflow.com/users/631803/vikasdeep-singh"}, "edited": false, "score": 0, "creation_date": 1526892759, "post_id": 50444981, "comment_id": 87903872, "body": "@VicJordan Application can not retain the Vietnamese language after being killed. This code works fine with android 7 and lower."}, {"owner": {"reputation": 1059, "user_id": 4458354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003857071120/picture?type=large", "display_name": "Rahul Chaudhary", "link": "https://stackoverflow.com/users/4458354/rahul-chaudhary"}, "edited": false, "score": 0, "creation_date": 1526898707, "post_id": 50444981, "comment_id": 87907230, "body": "do you have translation of Hello Word  and  Change Language in vietnam"}, {"owner": {"reputation": 405, "user_id": 3974960, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xdl1r.jpg?s=128&g=1", "display_name": "Hoang Duc Tuan", "link": "https://stackoverflow.com/users/3974960/hoang-duc-tuan"}, "reply_to_user": {"reputation": 1059, "user_id": 4458354, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003857071120/picture?type=large", "display_name": "Rahul Chaudhary", "link": "https://stackoverflow.com/users/4458354/rahul-chaudhary"}, "edited": false, "score": 0, "creation_date": 1526899117, "post_id": 50444981, "comment_id": 87907440, "body": "@RahulChaudhary yes. You can see it in photo 2"}, {"owner": {"reputation": 23488, "user_id": 6296561, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/zgIdn.png?s=128&g=1", "display_name": "Zoe", "link": "https://stackoverflow.com/users/6296561/zoe"}, "edited": false, "score": 0, "creation_date": 1533939350, "post_id": 50444981, "comment_id": 90546858, "body": "Try <a href=\"https://stackoverflow.com/a/3624358/6296561\">commit instead of apply</a>"}], "owner": {"reputation": 405, "user_id": 3974960, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xdl1r.jpg?s=128&g=1", "display_name": "Hoang Duc Tuan", "link": "https://stackoverflow.com/users/3974960/hoang-duc-tuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 6, "answer_count": 0, "score": 4, "last_activity_date": 1526892466, "creation_date": 1526892146, "last_edit_date": 1526892466, "question_id": 50444981, "link": "https://stackoverflow.com/questions/50444981/change-language-in-my-app-on-android-8", "title": "Change language in my App on Android 8", "body": "<p>I can not change my application to another language on Android 8.0</p>\n\n<p>my code:\n<strong>Application class</strong></p>\n\n<pre><code>class MyApplication : Application() {\n\ncompanion object {\n    fun changeLanguage(context: Context, lang: String) {\n        Log.e(context.packageName, lang)\n        val locale = Locale(lang)\n        Locale.setDefault(locale)\n        val config = context.resources.configuration\n        config.setLocale(locale)\n        context.createConfigurationContext(config)\n        context.resources.updateConfiguration(config, context.resources.displayMetrics)\n\n        val sharedPreference = PreferenceManager.getDefaultSharedPreferences(context)\n        sharedPreference.edit().putString(\"lang\", lang).apply()\n    }\n}\n\noverride fun onCreate() {\n    super.onCreate()\n    val sharedPreference = PreferenceManager.getDefaultSharedPreferences(this)\n    val lang = sharedPreference.getString(\"lang\", \"en\")\n\n    changeLanguage(this, lang)\n  }\n}\n</code></pre>\n\n<p><strong>MainActivity class</strong></p>\n\n<pre><code>class MainActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n    val sharedPreference = PreferenceManager.getDefaultSharedPreferences(this)\n    val lang = sharedPreference.getString(\"lang\", \"en\")\n    if (lang == \"en\") {\n        switchLanguage.setText(R.string.english)\n    } else {\n        switchLanguage.setText(R.string.viet)\n    }\n    switchLanguage.isChecked = lang != \"en\"\n    switchLanguage.setOnCheckedChangeListener { _, b -&gt;\n        if (!b) {\n            MyApplication.changeLanguage(baseContext, \"en\")\n        } else {\n            MyApplication.changeLanguage(baseContext, \"vi\")\n        }\n\n        finish()\n        startActivity(intent)\n      }\n   }\n}\n</code></pre>\n\n<p>When first run app:\n<a href=\"https://i.stack.imgur.com/5RFwz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5RFwz.png\" alt=\"first run\"></a></p>\n\n<p>When I change language to Vietnamese, toolbar not change language\n<a href=\"https://i.stack.imgur.com/UASkB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UASkB.png\" alt=\"toolbar not change language\"></a></p>\n\n<p>When I kill app and reopened all textview convert to english\n<a href=\"https://i.stack.imgur.com/6vhqZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6vhqZ.png\" alt=\"all textview convert to english\"></a></p>\n\n<p>sorry my English</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "fragment"], "comments": [{"owner": {"reputation": 1776, "user_id": 6341943, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wqhTp.png?s=128&g=1", "display_name": "hushed_voice", "link": "https://stackoverflow.com/users/6341943/hushed-voice"}, "edited": false, "score": 1, "creation_date": 1526889865, "post_id": 50444277, "comment_id": 87902595, "body": "This could be of help <a href=\"https://blog.mindorks.com/understanding-context-in-android-application-330913e32514\" rel=\"nofollow noreferrer\">blog.mindorks.com/&hellip;</a>  or this <a href=\"https://stackoverflow.com/questions/3572463/what-is-context-on-android\" title=\"what is context on android\">stackoverflow.com/questions/3572463/what-is-context-on-andro&zwnj;&#8203;id</a>"}, {"owner": {"reputation": 1776, "user_id": 6341943, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/wqhTp.png?s=128&g=1", "display_name": "hushed_voice", "link": "https://stackoverflow.com/users/6341943/hushed-voice"}, "edited": false, "score": 1, "creation_date": 1526890129, "post_id": 50444277, "comment_id": 87902701, "body": "In MainActivity &quot;this&quot; will give you Activity because MainActivity is an Activity(extends activity obviously) , but in the fragment &quot;this&quot; will refer to the fragment. Fragment does not have the method startactivity. hence the error"}, {"owner": {"reputation": 591, "user_id": 7917159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LxVNtQgqzcw/AAAAAAAAAAI/AAAAAAAAAJU/f7Wxh854Sjs/photo.jpg?sz=128", "display_name": "CEO tech4lifeapps", "link": "https://stackoverflow.com/users/7917159/ceo-tech4lifeapps"}, "edited": false, "score": 0, "creation_date": 1526893924, "post_id": 50444277, "comment_id": 87904527, "body": "1) Leave that function in the Activity that calls the Fragment. 2) Create an Interface in your Fragment. 3) Handle the callback in the Activity: call openYoutubeLink there!"}], "answers": [{"comments": [{"owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "edited": false, "score": 0, "creation_date": 1526893281, "post_id": 50444481, "comment_id": 87904148, "body": "thanks, but i would like run this function in an adapter class, the fragment will use this adapter, what should i write? the requireActivity() shows error."}, {"owner": {"reputation": 358, "user_id": 8445696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defae5cb548cf6119e3110aa95c55374?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/8445696/ivan"}, "reply_to_user": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "edited": false, "score": 1, "creation_date": 1526898696, "post_id": 50444481, "comment_id": 87907220, "body": "What you want to do is not good architecture. Noramly you want to keep the buisness logic separated from the UI. Opening other activities is a job for the UI elements i.e. Fragment/Activity. You should have a callback from the Adapter something like openMyActivity() wich is implemented by the Fragment and this way the fragment should open it. But if you insist on doing it your way you should pass the requireActivity() to the Adapter as WeakReference&lt;&gt;."}], "tags": [], "owner": {"reputation": 358, "user_id": 8445696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defae5cb548cf6119e3110aa95c55374?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/8445696/ivan"}, "is_accepted": true, "score": 3, "last_activity_date": 1526899297, "last_edit_date": 1526899297, "creation_date": 1526890023, "answer_id": 50444481, "question_id": 50444277, "link": "https://stackoverflow.com/questions/50444277/kotlin-android-fragment-startactivity-and-context/50444481#50444481", "title": "kotlin android fragment startActivity and context", "body": "<p>Because the fragment is not a Activity. You need to request the activity in wich the fragment is nested.\nWaht you need to do : </p>\n\n<pre><code>requireActivity().startActivity(intentApp)\n</code></pre>\n\n<p>EDIT:\nWell since you want to use it by addapter this is the correct way(Think of better names):</p>\n\n<pre><code>class MyFragment implements AdapterListener {\n        Adapter adapter;\n\n        @Override\n        void onResume() {\n            super.onResume();\n            adapter = new Adapter(this);\n        }\n\n        @Override\n        void onPause(){\n            super.onPause();\n            adapter = null;\n        }\n\n        @Override\n        void openActivity(){\n            ...\n            requireContext().startActivity()\n        }\n    }\n\n    class Adapter {\n\n        ...\n\n        interface AdapterListener{\n            void openActivity();\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 845, "user_id": 5406043, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f0892556b812d5959dc6608f994699d5?s=128&d=identicon&r=PG&f=1", "display_name": "GPH", "link": "https://stackoverflow.com/users/5406043/gph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3578, "favorite_count": 0, "accepted_answer_id": 50444481, "answer_count": 1, "score": 0, "last_activity_date": 1526899297, "creation_date": 1526889230, "question_id": 50444277, "link": "https://stackoverflow.com/questions/50444277/kotlin-android-fragment-startactivity-and-context", "title": "kotlin android fragment startActivity and context", "body": "<p>The function is working well in MainActivity.kt, but it has an error in a fragment. </p>\n\n<ul>\n<li>1) Please kindly help and explain it.  </li>\n<li><p>2) I still not understand about the context issue, please kindly help to give any easy understanding link/information for me to read.</p>\n\n<pre><code>fun openYoutubeLink(youtubeID: String) {\nval intentApp = Intent(Intent.ACTION_VIEW, Uri.parse(\"vnd.youtube:\" + youtubeID))\nval intentBrowser = Intent(Intent.ACTION_VIEW, Uri.parse(\"http://www.youtube.com/watch?v=\" + youtubeID))\ntry {\n    this.startActivity(intentApp)\n} catch (ex: ActivityNotFoundException) {\n    this.startActivity(intentBrowser)\n}\n</code></pre>\n\n<p>}</p></li>\n</ul>\n\n<p>Error Image:\n<a href=\"https://i.stack.imgur.com/VaAav.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VaAav.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["java", "android", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 2832, "user_id": 810770, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/68dc9c285c6eba4be6e95db2e66ab86c?s=128&d=identicon&r=PG&f=1", "display_name": "squeeish", "link": "https://stackoverflow.com/users/810770/squeeish"}, "is_accepted": false, "score": 0, "last_activity_date": 1526887843, "creation_date": 1526887843, "answer_id": 50443957, "question_id": 50443815, "link": "https://stackoverflow.com/questions/50443815/android-colors-not-showing-correctly/50443957#50443957", "title": "android colors not showing correctly", "body": "<p>I don't understand non-English code, but I bet you're passing in resource IDs, that's why the colours turn out different. Use <code>ContextCompat.getColor</code> when assigning colours </p>\n"}, {"tags": [], "owner": {"reputation": 1088, "user_id": 3693334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kptq2.jpg?s=128&g=1", "display_name": "hunghd", "link": "https://stackoverflow.com/users/3693334/hunghd"}, "is_accepted": false, "score": 0, "last_activity_date": 1526888379, "creation_date": 1526888379, "answer_id": 50444080, "question_id": 50443815, "link": "https://stackoverflow.com/questions/50443815/android-colors-not-showing-correctly/50444080#50444080", "title": "android colors not showing correctly", "body": "<p>Look like you are confusing between resId of colors and raw value of colors. They are all in <code>int</code> type. To be honest, your code has terrible coding style, I have no idea what you are doing, but try to take a look at the <code>setTextColor</code> and <code>setCardBackgroundColor</code> method and figure out which kind of value is passing to them, resId or color value?</p>\n"}], "owner": {"reputation": 115, "user_id": 8632205, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ea2cad04400c6bc74b6b14b2e3a6d3ed?s=128&d=identicon&r=PG&f=1", "display_name": "Degisim", "link": "https://stackoverflow.com/users/8632205/degisim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1526888379, "creation_date": 1526887242, "question_id": 50443815, "link": "https://stackoverflow.com/questions/50443815/android-colors-not-showing-correctly", "title": "android colors not showing correctly", "body": "<p>The colors I have in Color.xml do not appear properly in the application. For example, the blue color looks purple on the screen. Below are my codes. If there is a mistake I made, warn me</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n&lt;resources&gt;\r\n    &lt;color name=\"colorPrimary\"&gt;#3F51B5&lt;/color&gt;\r\n    &lt;color name=\"colorPrimaryDark\"&gt;#303F9F&lt;/color&gt;\r\n    &lt;color name=\"colorAccent\"&gt;#FF4081&lt;/color&gt;\r\n    &lt;color name=\"temaRenk\"&gt;#01579B&lt;/color&gt;\r\n    &lt;color name=\"temaGri\"&gt;#F4F4F4&lt;/color&gt;\r\n    &lt;color name=\"temaKapaliGri\"&gt;#EDEDED&lt;/color&gt;\r\n    &lt;color name=\"temaLacivert\"&gt;#000019&lt;/color&gt;\r\n    &lt;color name=\"masaBekliyor\"&gt;#FFFFFF&lt;/color&gt;\r\n    &lt;color name=\"masaHazirlaniyor\"&gt;#00B4FF&lt;/color&gt;\r\n    &lt;color name=\"masaHazir\"&gt;#53C976&lt;/color&gt;\r\n    &lt;color name=\"masaServis\"&gt;#EFE302&lt;/color&gt;\r\n    &lt;color name=\"masaIptal\"&gt;#D21044&lt;/color&gt;\r\n&lt;/resources&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>override fun onBindViewHolder(holder: masaListesiViewHolder, position: Int) {\r\n        var olusturulan = MASALAR.get(position)\r\n        holder.setData(position, olusturulan)\r\n    }\r\n\r\n    inner class masaListesiViewHolder(itemView : View?) : RecyclerView.ViewHolder(itemView){\r\n        var masa = itemView as CardView\r\n        fun setData(position: Int, olusturulan: MasaBilgileri) {\r\n            masa.MASAADI.setText(olusturulan.MASAADI)\r\n            var adisyonBilgisi = ADISYONLISTESI.filter{ adisyon -&gt; adisyon.MASAADI == olusturulan.MASAADI}\r\n            if(adisyonBilgisi.size != 0){\r\n                var DURUMKONTROL = masaDurumuBelirle(adisyonBilgisi.get(0).DURUM)\r\n\r\n                masa.MASATUTARI.setText(adisyonBilgisi.get(0).TUTAR.toString())\r\n                masa.MASADURUMU.setText(DURUMKONTROL.get(0).MASADURUMU)\r\n\r\n\r\n                masa.MASAADI.setTextColor(DURUMKONTROL.get(0).YAZIRENK)\r\n                masa.MASATUTARI.setTextColor(DURUMKONTROL.get(0).YAZIRENK)\r\n                masa.MASADURUMU.setTextColor(DURUMKONTROL.get(0).YAZIRENK)\r\n\r\n                masa.setCardBackgroundColor(DURUMKONTROL.get(0).ARKAPLANRENK)\r\n            }\r\n        }\r\n        fun masaDurumuBelirle(DURUM : Int) : ArrayList&lt;MASADURUMBILGILERI&gt;{\r\n            var durumlar = ArrayList&lt;MASADURUMBILGILERI&gt;()\r\n             when(DURUM){\r\n                0 -&gt; { durumlar.add(MASADURUMBILGILERI(\"BEKL\u0130YOR\", R.color.masaBekliyor, Color.BLACK))}\r\n                1 -&gt; { durumlar.add(MASADURUMBILGILERI(\"HAZIRLANIYOR\",R.color.masaHazirlaniyor, Color.WHITE))}\r\n                2 -&gt; { durumlar.add(MASADURUMBILGILERI(\"HAZIR\",R.color.masaHazir, Color.BLACK))}\r\n                3 -&gt; { durumlar.add(MASADURUMBILGILERI(\"SERV\u0130S E.\",R.color.masaServis, Color.BLACK))}\r\n                4 -&gt; { durumlar.add(MASADURUMBILGILERI(\"\u0130PTAL\",R.color.masaIptal, Color.WHITE))}\r\n            }\r\n            return durumlar\r\n        }\r\n    }\r\n    data class MASADURUMBILGILERI(var MASADURUMU : String, var ARKAPLANRENK : Int, var YAZIRENK : Int){}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm sending a value to another function from a ViewHolder, and I'm importing the values for that value from color.xml.\nHow can I fix this?</p>\n"}, {"tags": ["arrays", "kotlin", "boolean", "kotlin-extension"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4809342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7ZPKP.png?s=128&g=1", "display_name": "Jofbr", "link": "https://stackoverflow.com/users/4809342/jofbr"}, "edited": false, "score": 0, "creation_date": 1526888463, "post_id": 50443965, "comment_id": 87901951, "body": "can you make this a function so it uses {} not ="}, {"owner": {"reputation": 193, "user_id": 4809342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7ZPKP.png?s=128&g=1", "display_name": "Jofbr", "link": "https://stackoverflow.com/users/4809342/jofbr"}, "edited": false, "score": 0, "creation_date": 1526888499, "post_id": 50443965, "comment_id": 87901969, "body": "and is it possible to make this generic so the 2d array can be of ints or double?"}, {"owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "reply_to_user": {"reputation": 193, "user_id": 4809342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7ZPKP.png?s=128&g=1", "display_name": "Jofbr", "link": "https://stackoverflow.com/users/4809342/jofbr"}, "edited": false, "score": 0, "creation_date": 1526889459, "post_id": 50443965, "comment_id": 87902399, "body": "You have to copy the code with <code>DoubleArray</code> instead of <code>IntArray</code> (and other types if you need them). <code>Array&lt;Array&lt;T&gt;&gt;</code> is the generic option, but it has overhead: it ends up represented as a 2d array of <code>Object</code>s. See <a href=\"https://kotlinlang.org/docs/reference/basic-types.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/basic-types.html</a>."}], "tags": [], "owner": {"reputation": 153048, "user_id": 9204, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c79937a093ff9e963c563e22cd385f30?s=128&d=identicon&r=PG", "display_name": "Alexey Romanov", "link": "https://stackoverflow.com/users/9204/alexey-romanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1526887867, "creation_date": 1526887867, "answer_id": 50443965, "question_id": 50443757, "link": "https://stackoverflow.com/questions/50443757/kotlin-represent-array-with-boolean-indexing/50443965#50443965", "title": "Kotlin represent array with boolean indexing", "body": "<p>I don't think this is a good idea in general, but Kotlin does <a href=\"https://kotlinlang.org/docs/reference/operator-overloading.html\" rel=\"nofollow noreferrer\">allow this kind of operator overloading</a> (<code>Array&lt;IntArray&gt;</code> is the Kotlin type for 2d array of ints):</p>\n\n<pre><code>operator fun Array&lt;IntArray&gt;.get(x: Boolean, y: Boolean) = this[if (x) 1 else 0][if (y) 1 else 0]\n\nval array: Array&lt;IntArray&gt; = ....\narray[true, false]\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 4809342, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7ZPKP.png?s=128&g=1", "display_name": "Jofbr", "link": "https://stackoverflow.com/users/4809342/jofbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 50443965, "answer_count": 1, "score": 0, "last_activity_date": 1526887867, "creation_date": 1526886969, "question_id": 50443757, "link": "https://stackoverflow.com/questions/50443757/kotlin-represent-array-with-boolean-indexing", "title": "Kotlin represent array with boolean indexing", "body": "<p>I want to have a 2x2 2d array of int in kotlin but the indexing should be using booleans like this:</p>\n\n<pre><code>      | true | false |\n----------------------\ntrue  |  0   |  75   |\n----------------------\nfalse |  1   |  34   |\n</code></pre>\n\n<p>I know I can use a 2d array of int but not sure how to represent the indexing via booleans.</p>\n\n<p>Any help much appreciated</p>\n"}, {"tags": ["android", "kotlin", "anko", "anko-component"], "answers": [{"tags": [], "owner": {"reputation": 6526, "user_id": 4251124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sjqGI.jpg?s=128&g=1", "display_name": "Raja Jawahar", "link": "https://stackoverflow.com/users/4251124/raja-jawahar"}, "is_accepted": true, "score": 1, "last_activity_date": 1531310776, "last_edit_date": 1531310776, "creation_date": 1526969634, "answer_id": 50460936, "question_id": 50443578, "link": "https://stackoverflow.com/questions/50443578/how-to-set-the-button-color-in-vertical-layout-in-anko/50460936#50460936", "title": "How to set the button color in Vertical Layout in Anko", "body": "<p>At last I found the answer for the question: </p>\n\n<pre><code>backgroundColor = ContextCompat.getColor(context,R.color.colorPrimary)\n</code></pre>\n"}], "owner": {"reputation": 6526, "user_id": 4251124, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sjqGI.jpg?s=128&g=1", "display_name": "Raja Jawahar", "link": "https://stackoverflow.com/users/4251124/raja-jawahar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 1, "accepted_answer_id": 50460936, "answer_count": 1, "score": 1, "last_activity_date": 1531310776, "creation_date": 1526886097, "last_edit_date": 1531310748, "question_id": 50443578, "link": "https://stackoverflow.com/questions/50443578/how-to-set-the-button-color-in-vertical-layout-in-anko", "title": "How to set the button color in Vertical Layout in Anko", "body": "<p>I am trying a login form using Anko vertical layout. Trying to change the  background and text color of the  button like below. But it is not working.</p>\n\n<pre><code>class LoginActivity : AppCompatActivity() {\n\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    LoginActivityUI().setContentView(this)   } }\n\nclass LoginActivityUI : AnkoComponent&lt;LoginActivity&gt; {\n\n  override fun createView(ui: AnkoContext&lt;LoginActivity&gt;) = with(ui) {\n    verticalLayout {\n      padding = dip(22)\n      var userName = editText()\n      userName.hint = \"Enter UserName\"\n\n      var passWord = editText()\n      passWord.hint = \"Enter Password\"\n\n      var button = button {\n        backgroundColor = R.color.colorPrimary\n        text = \"SignIn\"\n        textColor = android.R.color.white\n      }\n\n    }   \n}\n\n}\n</code></pre>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "android-databinding"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 9718277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba7959e41102924d15d5e10b207bac?s=128&d=identicon&r=PG&f=1", "display_name": "varmashrivastava", "link": "https://stackoverflow.com/users/9718277/varmashrivastava"}, "edited": false, "score": 1, "creation_date": 1526898438, "post_id": 50445266, "comment_id": 87907078, "body": "Thanks.How can i get position of item clicked inside recyclerview in above example using data binding..i.e. position inside onClick method?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 392, "user_id": 9718277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba7959e41102924d15d5e10b207bac?s=128&d=identicon&r=PG&f=1", "display_name": "varmashrivastava", "link": "https://stackoverflow.com/users/9718277/varmashrivastava"}, "edited": false, "score": 0, "creation_date": 1526899495, "post_id": 50445266, "comment_id": 87907628, "body": "You could put the position as a variable or means to retrieve it. Even better: bind the <code>ViewHolder</code> instead of the <code>Adapter</code>. There you&#39;ll have the positions."}, {"owner": {"reputation": 392, "user_id": 9718277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba7959e41102924d15d5e10b207bac?s=128&d=identicon&r=PG&f=1", "display_name": "varmashrivastava", "link": "https://stackoverflow.com/users/9718277/varmashrivastava"}, "edited": false, "score": 0, "creation_date": 1526965782, "post_id": 50445266, "comment_id": 87933429, "body": "&quot;You could put the position as a variable or means to retrieve it.&quot;Can u give me a code  example ?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 392, "user_id": 9718277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba7959e41102924d15d5e10b207bac?s=128&d=identicon&r=PG&f=1", "display_name": "varmashrivastava", "link": "https://stackoverflow.com/users/9718277/varmashrivastava"}, "edited": false, "score": 0, "creation_date": 1526969287, "post_id": 50445266, "comment_id": 87934810, "body": "It&#39;s a followup question. Would you mind to actually put it as another question? You could drop the link so I can have a look there."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": false, "score": 2, "last_activity_date": 1526893174, "creation_date": 1526893174, "answer_id": 50445266, "question_id": 50443241, "link": "https://stackoverflow.com/questions/50443241/click-event-using-databinding-library-inside-recyclerviews-adapter/50445266#50445266", "title": "Click event using DataBinding Library inside Recyclerview&#39;s adapter", "body": "<p>You're trying to set a <code>View.OnClickListener</code> to your <code>TextView</code>. But the statement <code>presenter.onClick</code> should not be used for method references. Instead you should use the standard <em>Java</em> notation <code>presenter::onClick</code>.</p>\n\n<p>The <code>onClick()</code> itself can't be used as a <code>View.OnClickListener</code>, since the signatures don't match. Functionally it's <code>(View)-&gt;Unit</code> vs <code>()-&gt;Unit</code>.</p>\n\n<p>So either declare <code>fun onClick(v: View)</code> or use a lambda notation within your xml <code>@{v -&gt; presenter.onClick()}</code>.</p>\n"}], "owner": {"reputation": 392, "user_id": 9718277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcba7959e41102924d15d5e10b207bac?s=128&d=identicon&r=PG&f=1", "display_name": "varmashrivastava", "link": "https://stackoverflow.com/users/9718277/varmashrivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1524, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526893174, "creation_date": 1526884515, "last_edit_date": 1526885192, "question_id": 50443241, "link": "https://stackoverflow.com/questions/50443241/click-event-using-databinding-library-inside-recyclerviews-adapter", "title": "Click event using DataBinding Library inside Recyclerview&#39;s adapter", "body": "<p>I am new to  DataBinding Library and using it in an adapter of recyclerview.I want to open another activity on click of an view and pass an id to it.</p>\n\n<p>Below is my xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n    &lt;data&gt;\n        &lt;variable\n            name=\"trainingPlanResponse\"\n            type=\"xyz.TrainingPlanResponse\" /&gt;\n        &lt;variable\n            name=\"presenter\"\n            type=\"xyz.MyPlansAdapter\"/&gt;\n    &lt;/data&gt;\n&lt;TextView\n    android:id=\"@+id/tvPlan\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:drawableLeft=\"@drawable/ic_launcher\"\n    android:drawableRight=\"@drawable/arrow_right\"\n    android:layout_margin=\"@dimen/dp15\"\n\n    android:text=\"@{trainingPlanResponse.planName}\"\n    android:onClick=\"@{presenter.onClick}\"\n    android:drawablePadding=\"@dimen/dp5\"\n    android:textSize=\"@dimen/sp18\"\n    android:textColor=\"@color/black_variant5\"\n    android:gravity=\"center_vertical\"\n    /&gt;\n&lt;/layout&gt;\n</code></pre>\n\n<p>Below is adapter code-</p>\n\n<pre><code>class MyPlansAdapter(private val context: Context?, private val list:ArrayList&lt;TrainingPlanResponse&gt; ):RecyclerView.Adapter&lt;MyPlansAdapter.ViewHolder&gt;()\n{\n\n    override fun onBindViewHolder(holder: ViewHolder?, position: Int) {\n        holder!!.binding!!.setVariable(BR.trainingPlanResponse,list.get(position));\n        holder!!.binding!!.setVariable(BR.presenter,this);\n//        holder!!.tvPlans.text=list.get(position).planName\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup?, viewType: Int): ViewHolder {\n        val itemView=LayoutInflater.from(context).inflate(R.layout.item_myplans,parent,false);\n        return ViewHolder(itemView);\n    }\n\n    override fun getItemCount(): Int {\n        return list.size\n    }\n\n   fun onClick()\n    {\n        val intent = Intent(context, PlanWeekActivity::class.java)\n        context!!.startActivity(intent)\n    }\n\n    inner class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView)\n    {\n//        val tvPlans: TextView\n          var  binding: ViewDataBinding?\n\n\n        init {\n            binding = DataBindingUtil.bind(itemView);\n\n        }\n\n    }\n}\n</code></pre>\n\n<p>I tried using onClick from xml and getting below error-</p>\n\n<blockquote>\n  <p>[kapt] An exception occurred:\n  android.databinding.tool.util.LoggedErrorException: Found data binding\n  errors.\n  ****/ data binding error ****msg:Listener class android.view.View.OnClickListener with method onClick did not match\n  signature of any method presenter.onClick\n  file:xyz/item_myplans.xml\n  loc:20:23 - 20:39 ****\\ data binding error ****</p>\n</blockquote>\n\n<p>Also I am not able to understand how will i pass planId to it?\nMy Model is-</p>\n\n<pre><code>class TrainingPlanResponse{\n    var planId:String?=null;\nvar planName:String?=null;\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "runtime-permissions"], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526883978, "post_id": 50443133, "comment_id": 87900058, "body": "Thanks. and what if i want to create an empty document like name.txt ?"}, {"owner": {"reputation": 2666, "user_id": 4469112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9rSU.jpg?s=128&g=1", "display_name": "Alessio", "link": "https://stackoverflow.com/users/4469112/alessio"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526884189, "post_id": 50443133, "comment_id": 87900153, "body": "Mate make an effort ... anyhow I use this for creating files under the newly created dir <i>File(File dir, String name) {</i>"}, {"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526884285, "post_id": 50443133, "comment_id": 87900184, "body": "its not getting created, thats why i asked a question. there is something im missing out. its clearly written on my question about what i have tried. may be you didn&#39;t read my question properly."}, {"owner": {"reputation": 2666, "user_id": 4469112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9rSU.jpg?s=128&g=1", "display_name": "Alessio", "link": "https://stackoverflow.com/users/4469112/alessio"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526884532, "post_id": 50443133, "comment_id": 87900276, "body": "For me it works. Try this first as abolute path <i>mAppCtx.getFilesDir() + &quot;/justCheck&quot;</i> because that doesn&#39;t requires any special permission. If that works then you&#39;re clearly doing something wrong in how you handle the permissions"}], "tags": [], "owner": {"reputation": 2666, "user_id": 4469112, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9rSU.jpg?s=128&g=1", "display_name": "Alessio", "link": "https://stackoverflow.com/users/4469112/alessio"}, "is_accepted": false, "score": 1, "last_activity_date": 1526883936, "creation_date": 1526883936, "answer_id": 50443133, "question_id": 50443068, "link": "https://stackoverflow.com/questions/50443068/not-able-to-create-a-new-folder-in-devices-documents-folder-even-after-giving-r/50443133#50443133", "title": "Not able to create a new folder in device&#39;s Documents folder even after giving runtime permissions", "body": "<p>You've to create a folder not a file:</p>\n\n<pre><code>file.mkdirs();\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526883936, "creation_date": 1526883598, "question_id": 50443068, "link": "https://stackoverflow.com/questions/50443068/not-able-to-create-a-new-folder-in-devices-documents-folder-even-after-giving-r", "title": "Not able to create a new folder in device&#39;s Documents folder even after giving runtime permissions", "body": "<p>Asking this questions after trying a lot. I have checked a lot ob blogs and questions.</p>\n\n<p>When I'm trying to create a new folder in the device's doucments folder, its not creating the folder even after giving all permissions including runtime permissions. </p>\n\n<p>This is my code to create the new folder - </p>\n\n<pre><code>var path = (Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS))\n        var directory = path.absolutePath + \"/justCheck\"\n\n        var file = File(directory)\n        if(!file.exists()){\n            file.createNewFile()\n        }\n</code></pre>\n\n<p>I'm checking on Android device with marshmallow OS. This is my permissions in Manifest - </p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n</code></pre>\n\n<p>Also, I have authorized the runtime permissions. </p>\n\n<p>Am I doing anything wrong ? Why is the older not getting created ?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1653, "user_id": 3627898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c70c600f580321319a54b15d416b3?s=128&d=identicon&r=PG", "display_name": "Tam Huynh", "link": "https://stackoverflow.com/users/3627898/tam-huynh"}, "edited": false, "score": 1, "creation_date": 1526875955, "post_id": 50441893, "comment_id": 87897868, "body": "Check if you <code>activity_main</code> layout file has any <code>EditText</code> with <code>android:id=&quot;@+id&#47;editText&quot;</code>"}, {"owner": {"reputation": 168, "user_id": 2512496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/018d4f29d194da097efbe90b401565b2?s=128&d=identicon&r=PG", "display_name": "GunnerFan420", "link": "https://stackoverflow.com/users/2512496/gunnerfan420"}, "reply_to_user": {"reputation": 1653, "user_id": 3627898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c70c600f580321319a54b15d416b3?s=128&d=identicon&r=PG", "display_name": "Tam Huynh", "link": "https://stackoverflow.com/users/3627898/tam-huynh"}, "edited": false, "score": 0, "creation_date": 1526877029, "post_id": 50441893, "comment_id": 87898038, "body": "@TamHuynh thank you for the information. You were right on target with your information. Most appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 2512496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/018d4f29d194da097efbe90b401565b2?s=128&d=identicon&r=PG", "display_name": "GunnerFan420", "link": "https://stackoverflow.com/users/2512496/gunnerfan420"}, "edited": false, "score": 1, "creation_date": 1526876885, "post_id": 50441915, "comment_id": 87898015, "body": "Well you lead me right to it! Thank you so very much. My issue is that my android:id was as follows: android:id=&quot;@+id/editText2 and I think that&#39;s because, in doing the training, I removed and readded the textbox as I had made a mistake. Apparently it doesn&#39;t reuse the ID even though the field has been deleted. I updated the reference to point at the right id and it&#39;s working great! Thank you!"}], "tags": [], "owner": {"reputation": 57589, "user_id": 7666442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K8FFo.jpg?s=128&g=1", "display_name": "AskNilesh", "link": "https://stackoverflow.com/users/7666442/asknilesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1526876008, "creation_date": 1526876008, "answer_id": 50441915, "question_id": 50441893, "link": "https://stackoverflow.com/questions/50441893/unresolved-reference-developer-training/50441915#50441915", "title": "Unresolved Reference - Developer Training", "body": "<p>You need to take one <code>EditText</code> with id <code>android:id=\"@+id/editText\"</code> in your  <code>activity_main.xml</code> layout file</p>\n\n<p>LIKE THIS</p>\n\n<pre><code>&lt;EditText\n    android:id=\"@+id/editText\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 2512496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/018d4f29d194da097efbe90b401565b2?s=128&d=identicon&r=PG", "display_name": "GunnerFan420", "link": "https://stackoverflow.com/users/2512496/gunnerfan420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50441915, "answer_count": 1, "score": -4, "last_activity_date": 1526876692, "creation_date": 1526875805, "question_id": 50441893, "link": "https://stackoverflow.com/questions/50441893/unresolved-reference-developer-training", "title": "Unresolved Reference - Developer Training", "body": "<p>I am going through the Developer training on android.com and I've run into a snag. I've entered some code (shown below) and used Alt+Enter to resolve all my reference issues except one. This issue is not mentioned in the instructions and I can't proceed without fixing it so I'm asking for any help available. It's on line 21 the word \"edittext\" highlighted in red.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hDuz0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hDuz0.png\" alt=\"My broken code\"></a></p>\n\n<p>The training page with the instructions is here: </p>\n\n<p><a href=\"https://developer.android.com/training/basics/firstapp/starting-activity\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/firstapp/starting-activity</a></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["android", "kotlin", "realm"], "comments": [{"owner": {"reputation": 994, "user_id": 3992260, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/imxG7.png?s=128&g=1", "display_name": "Nitin Karande", "link": "https://stackoverflow.com/users/3992260/nitin-karande"}, "edited": false, "score": 0, "creation_date": 1526887649, "post_id": 50440222, "comment_id": 87901622, "body": "have you added <code>google-services.json</code> in app folder?"}, {"owner": {"reputation": 70518, "user_id": 2413303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kLhXq.jpg?s=128&g=1", "display_name": "EpicPandaForce", "link": "https://stackoverflow.com/users/2413303/epicpandaforce"}, "edited": false, "score": 0, "creation_date": 1526893888, "post_id": 50440222, "comment_id": 87904509, "body": "What gradle plugins are you applying and in what order?"}], "owner": {"reputation": 1011, "user_id": 8980861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcd55f57aca2c891205ccec6bf558da?s=128&d=identicon&r=PG&f=1", "display_name": "Erik", "link": "https://stackoverflow.com/users/8980861/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 455, "favorite_count": 0, "closed_date": 1526897777, "answer_count": 0, "score": 0, "last_activity_date": 1526858169, "creation_date": 1526858169, "question_id": 50440222, "link": "https://stackoverflow.com/questions/50440222/execution-failed-for-task-appkaptgeneratestubsdebugkotlin-when-build-android", "closed_reason": "Duplicate", "title": "Execution failed for task &#39;:app:kaptGenerateStubsDebugKotlin&#39; when build android app with realm and kotlin", "body": "<p>I'm trying to use Realm in my Koltin app, but it fails. I found this question: <a href=\"https://stackoverflow.com/questions/46009134/build-fails-when-using-kotlin-kapt-with-realm\">Build fails when using &#39;kotlin-kapt&#39; with Realm</a> that seems to be my problem, but it didn't work. I got this stack trace when I run <code>gradlew assemble</code>:</p>\n\n<pre><code>&gt; Configure project :app\nCould not find google-services.json while looking in [src/nullnull/debug, src/debug/nullnull, src/nullnull, src/debug, src/nullnullDebug]\nregisterResGeneratingTask is deprecated, use registerGeneratedResFolders(FileCollection)\nCould not find google-services.json while looking in [src/nullnull/release, src/release/nullnull, src/nullnull, src/release, src/nullnullRelease]\nregisterResGeneratingTask is deprecated, use registerGeneratedResFolders(FileCollection)\n\n&gt; Task :app:processDebugGoogleServices\nParsing json file: C:\\Users\\Lupus\\Documents\\android-projects\\VideoGameWishlist\\app\\google-services.json\n\n&gt; Task :app:kaptGenerateStubsDebugKotlin FAILED\nCaught an exception trying to connect to Kotlin Daemon\njava.lang.ClassNotFoundException: com.sun.tools.javac.util.Context\n        at java.net.URLClassLoader.findClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Unknown Source)\n        at org.jetbrains.kotlin.gradle.tasks.JarSearchingUtilKt.findToolsJar(jarSearchingUtil.kt:79)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:20)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:14)\n        at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:130)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getToolsJar(GradleCompilerEnvironment.kt)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getCompilerFullClasspath(GradleCompilerEnvironment.kt:23)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.getDaemonConnection(GradleKotlinCompilerRunner.kt:336)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemon(GradleKotlinCompilerRunner.kt:181)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:156)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:53)\n        at org.jetbrains.kotlin.compilerRunner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.kt:127)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompiler(GradleKotlinCompilerRunner.kt:108)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:378)\n        at org.jetbrains.kotlin.gradle.internal.KaptGenerateStubsTask.execute(KaptGenerateStubsTask.kt:102)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n        at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:46)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:121)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:92)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:70)\n        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:60)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:97)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:87)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.run(DefaultTaskGraphExecuter.java:248)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:241)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:230)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.processTask(DefaultTaskPlanExecutor.java:123)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.access$200(DefaultTaskPlanExecutor.java:79)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:104)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.execute(DefaultTaskExecutionPlan.java:626)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.executeWithTask(DefaultTaskExecutionPlan.java:581)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.run(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n        at java.lang.Thread.run(Unknown Source)\nCould not perform incremental compilation: Could not connect to Kotlin compile daemon\nCould not connect to kotlin daemon. Using fallback strategy.\ne: java.lang.ClassNotFoundException: com.sun.tools.javac.util.Context\n        at java.net.URLClassLoader.findClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Unknown Source)\n        at org.jetbrains.kotlin.gradle.tasks.JarSearchingUtilKt.findToolsJar(jarSearchingUtil.kt:79)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:20)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment$toolsJar$2.invoke(GradleCompilerEnvironment.kt:14)\n        at kotlin.SynchronizedLazyImpl.getValue(Lazy.kt:130)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getToolsJar(GradleCompilerEnvironment.kt)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerEnvironment.getCompilerFullClasspath(GradleCompilerEnvironment.kt:23)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileOutOfProcess(GradleKotlinCompilerRunner.kt:303)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:171)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.compileWithDaemonOrFallback(GradleKotlinCompilerRunner.kt:53)\n        at org.jetbrains.kotlin.compilerRunner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.kt:127)\n        at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunner.runJvmCompiler(GradleKotlinCompilerRunner.kt:108)\n        at org.jetbrains.kotlin.gradle.tasks.KotlinCompile.callCompiler$kotlin_gradle_plugin(Tasks.kt:378)\n        at org.jetbrains.kotlin.gradle.internal.KaptGenerateStubsTask.execute(KaptGenerateStubsTask.kt:102)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:73)\n        at org.gradle.api.internal.project.taskfactory.IncrementalTaskAction.doExecute(IncrementalTaskAction.java:46)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:39)\n        at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:26)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$1.run(ExecuteActionsTaskExecuter.java:121)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:110)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:92)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:70)\n        at org.gradle.api.internal.tasks.execution.OutputDirectoryCreatingTaskExecuter.execute(OutputDirectoryCreatingTaskExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskOutputCachingStateExecuter.execute(ResolveTaskOutputCachingStateExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:60)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:97)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:87)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:52)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.run(DefaultTaskGraphExecuter.java:248)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:336)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor$RunnableBuildOperationWorker.execute(DefaultBuildOperationExecutor.java:328)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.execute(DefaultBuildOperationExecutor.java:199)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:110)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:241)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:230)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.processTask(DefaultTaskPlanExecutor.java:123)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.access$200(DefaultTaskPlanExecutor.java:79)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:104)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker$1.execute(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.execute(DefaultTaskExecutionPlan.java:626)\n        at org.gradle.execution.taskgraph.DefaultTaskExecutionPlan.executeWithTask(DefaultTaskExecutionPlan.java:581)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor$TaskExecutorWorker.run(DefaultTaskPlanExecutor.java:98)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\n        at java.lang.Thread.run(Unknown Source)\n\ne: Compiler terminated with internal error\n\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:kaptGenerateStubsDebugKotlin'.\n&gt; Internal compiler error. See log for more details\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4s\n18 actionable tasks: 5 executed, 13 up-to-date\n</code></pre>\n\n<p>The only command I couldn't run was <code>rm -R ~/.gradle</code> because I'm on windows, but I did deleted the <code>.gradle</code> folder in my app folder. I also tried to uninstall and install Android Studio again. Nothing worked. Does anyone have any other suggestion?</p>\n"}, {"tags": ["kotlin", "tornadofx"], "answers": [{"comments": [{"owner": {"reputation": 6538, "user_id": 576997, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/445d34431efc8942a562475eb2f338c1?s=128&d=identicon&r=PG", "display_name": "tobik", "link": "https://stackoverflow.com/users/576997/tobik"}, "edited": false, "score": 1, "creation_date": 1564330027, "post_id": 50438005, "comment_id": 100986252, "body": "This answer is great! But it makes me wonder... There is very little search results for <code>bindChildren</code> and yet it feels like a totally core functionality. Pretty much when the default table or listviews are not sufficient and I want some fancy rendering for each item, there is no other choice but use <code>bindChildren</code>. Or is there another way?"}], "tags": [], "owner": {"reputation": 7027, "user_id": 1437402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbbcf2a192382575c5cdd4d1a0e98a0?s=128&d=identicon&r=PG", "display_name": "Edvin Syse", "link": "https://stackoverflow.com/users/1437402/edvin-syse"}, "is_accepted": true, "score": 7, "last_activity_date": 1526840169, "creation_date": 1526840169, "answer_id": 50438005, "question_id": 50437833, "link": "https://stackoverflow.com/questions/50437833/why-does-my-tornadofx-observablelist-not-receive-updates/50438005#50438005", "title": "Why does my tornadoFX ObservableList not receive updates?", "body": "<p>Some observations:</p>\n\n<ol>\n<li><p>Calling <code>someList.observable()</code> will create an observable list backed by the underlying list, but mutations on the underlying list will not emit events. You should instead initialize <code>actors</code> as an observable list right away.</p></li>\n<li><p>Access to an observable list must happen on the UI thread, so you need to wrap mutation calls in <code>runLater</code>.</p></li>\n<li><p>For people trying to run your example - you didn't include a stylesheet, but references one in your <code>App</code> subclass, so the IDEA will most probably import the TornadoFX <code>Stylesheet</code> class. This will not end well :)</p></li>\n<li><p>The <code>also</code> call has no effect, so I removed it.</p></li>\n<li><p>I updated your code to best practices here and there, for example with regards to how to create the root node :)</p></li>\n</ol>\n\n<p>Updated example taking these points into account looks like this:</p>\n\n<pre><code>private const val WINDOW_HEIGHT = 600.0\nprivate const val WINDOW_WIDTH = 1024.0\n\nclass MainApp : App(WorldView::class)\n\ndata class Actor(val x: Double, val y: Double)\n\nclass WorldView : View(\"Actor Simulator\") {\n\n    private val actors = FXCollections.observableArrayList&lt;Actor&gt;()\n\n    override fun onDock() {\n        runAsync {\n            (0..100).forEach {\n                val x = ThreadLocalRandom.current().nextDouble(0.0, WINDOW_WIDTH.toDouble())\n                val y = ThreadLocalRandom.current().nextDouble(0.0, WINDOW_HEIGHT.toDouble())\n                runLater {\n                    actors.add(Actor(x, y))\n                }\n                Thread.sleep(100)\n            }\n        }\n    }\n\n    override val root = stackpane {\n        setPrefSize(WINDOW_WIDTH, WINDOW_HEIGHT)\n        group {\n            bindChildren(actors) {\n                circle {\n                    centerX = it.x\n                    centerY = it.y\n                    radius = 10.0\n                    println(\"drew circle\")\n                }\n            }\n        }\n        button(\"Add actor\") {\n            action {\n                actors.add(Actor(0.0, 0.0))\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3345, "user_id": 281657, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ce72c267e12ecd2221ac46d4ce4ec99a?s=128&d=identicon&r=PG", "display_name": "Malcolm Crum", "link": "https://stackoverflow.com/users/281657/malcolm-crum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 50438005, "answer_count": 1, "score": 4, "last_activity_date": 1526840169, "creation_date": 1526839050, "question_id": 50437833, "link": "https://stackoverflow.com/questions/50437833/why-does-my-tornadofx-observablelist-not-receive-updates", "title": "Why does my tornadoFX ObservableList not receive updates?", "body": "<p>I have a simple tornadoFX program that generates some circles in random locations on the screen. However, none of the circles get drawn. I've added some debug code to print a line when a circle is drawn, and it only prints once.</p>\n\n<p>I would expect circles to appear at 100ms intervals, as well as when I click the \"Add actor\" button.</p>\n\n<pre><code>private const val WINDOW_HEIGHT = 600\nprivate const val WINDOW_WIDTH = 1024\n\nfun main(args: Array&lt;String&gt;) {\n    Application.launch(MainApp::class.java, *args)\n}\n\nclass MainApp : App(WorldView::class, Stylesheet::class)\n\ndata class Actor(val x: Double, val y: Double)\n\nclass WorldView: View(\"Actor Simulator\") {\n    override val root = VBox()\n    private val actors = ArrayList&lt;Actor&gt;(0)\n\n    init {\n        tornadofx.runAsync {\n            (0..100).forEach {\n                val x = ThreadLocalRandom.current().nextDouble(0.0, WINDOW_WIDTH.toDouble())\n                val y = ThreadLocalRandom.current().nextDouble(0.0, WINDOW_HEIGHT.toDouble())\n                actors.add(Actor(x, y))\n                Thread.sleep(100)\n            }\n        }\n    }\n\n    init {\n        with(root) {\n            stackpane {\n                group {\n                    bindChildren(actors.observable()) {\n                        circle {\n                            centerX = it.x\n                            centerY = it.y\n                            radius = 10.0\n                            also {\n                                println(\"drew circle\")\n                            }\n                        }\n                    }\n                }\n                button(\"Add actor\") {\n                    action {\n                        actors.add(Actor(0.0, 0.0))\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Oddly, if I put a breakpoint during the circle draw code, circles will draw and the debug line will print.</p>\n"}, {"tags": ["gradle", "kotlin", "java-9", "gradle-kotlin-dsl"], "comments": [{"owner": {"reputation": 48202, "user_id": 549372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc12ae5f4b59645f0fbfde098c306756?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Zeitler", "link": "https://stackoverflow.com/users/549372/martin-zeitler"}, "edited": false, "score": 0, "creation_date": 1543891113, "post_id": 50437415, "comment_id": 94072067, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47958627/do-kotlin-1-2-10-and-java-9-have-opposite-rules-regarding-automatic-modules\">Do Kotlin 1.2.10 and Java 9 have opposite rules regarding automatic modules?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 7626334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a42f6555671b8bf0660fa9c1da355144?s=128&d=identicon&r=PG&f=1", "display_name": "TeXnician", "link": "https://stackoverflow.com/users/7626334/texnician"}, "edited": false, "score": 1, "creation_date": 1526912536, "post_id": 50450902, "comment_id": 87914879, "body": "I still do not think that this is the best solution, so any better answer is appreciated."}], "tags": [], "owner": {"reputation": 151, "user_id": 7626334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a42f6555671b8bf0660fa9c1da355144?s=128&d=identicon&r=PG&f=1", "display_name": "TeXnician", "link": "https://stackoverflow.com/users/7626334/texnician"}, "is_accepted": false, "score": 2, "last_activity_date": 1526912457, "creation_date": 1526912457, "answer_id": 50450902, "question_id": 50437415, "link": "https://stackoverflow.com/questions/50437415/building-a-gradle-kotlin-project-with-java-9-10-and-gradles-kotlin-dsl/50450902#50450902", "title": "Building a Gradle Kotlin project with Java 9/10 and Gradle&#39;s Kotlin DSL", "body": "<p>This is kind of a self-answer (I do not full understand that matter, so the explanations might not be correct). The conclusions I draw here are purely empiric and based on a conversion from Kotlin DSL to Gradle's Groovy and back.</p>\n\n<p>The first problem I encountered was that I had two conflicting providers for the Kotlin functions in:</p>\n\n<pre><code>  implementation(kotlin(\"stdlib\", kotlin_version))\n  implementation(kotlin(\"runtime\", kotlin_version))\n</code></pre>\n\n<p>I solved that by deciding to go with <code>stdlib</code>. All other dependencies did not conflict with each other.</p>\n\n<p>The more severe problem was something different: The <code>compileJava</code> task did not find the correct classes (from the project) and modules (from the distribution). Therefore I needed to adapt the paths as in the following example:</p>\n\n<pre><code>val compileKotlin: KotlinCompile by tasks\nval compileJava: JavaCompile by tasks\ncompileJava.destinationDir = compileKotlin.destinationDir\n</code></pre>\n\n<p>This basically compiles the Java classes within Kotlins compiled output and makes Java find the classes from the project.</p>\n\n<p>The last problem could finally be solved by the following non-idiomatic piece of Kotlin Script:</p>\n\n<pre><code>tasks {\n  \"compileJava\" {\n    dependsOn(\":compileKotlin\")\n    if (JavaVersion.current() &gt;= JavaVersion.VERSION_1_9) {\n      inputs.property(\"moduleName\", ext[\"moduleName\"])\n      doFirst {\n        compileJava.options.compilerArgs = listOf(\n            // include Gradle dependencies as modules\n            \"--module-path\", java.sourceSets[\"main\"].compileClasspath.asPath,\n        )\n        java.sourceSets[\"main\"].compileClasspath = files()\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>This basically lets the <code>compileJava</code> task use an empty classpath and sets module path as compiler option to the currently set compileClasspath of the main source set (the Kotlin source set which is also added as Java source set).</p>\n"}], "owner": {"reputation": 151, "user_id": 7626334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a42f6555671b8bf0660fa9c1da355144?s=128&d=identicon&r=PG&f=1", "display_name": "TeXnician", "link": "https://stackoverflow.com/users/7626334/texnician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1532378740, "creation_date": 1526836202, "last_edit_date": 1532378740, "question_id": 50437415, "link": "https://stackoverflow.com/questions/50437415/building-a-gradle-kotlin-project-with-java-9-10-and-gradles-kotlin-dsl", "title": "Building a Gradle Kotlin project with Java 9/10 and Gradle&#39;s Kotlin DSL", "body": "<p>This is kind of a follow up to <a href=\"https://stackoverflow.com/questions/47657755/building-a-kotlin-java-9-project-with-gradle\">Building a Kotlin + Java 9 project with Gradle</a>. In the linked post Gradle with Groovy is used. In my case Kotlin DSL is used.</p>\n\n<p>Basically I have a gradle project with the following structure (only relevant content here):</p>\n\n<pre><code>src/\n|   main/\n|   |   kotlin/\n|   |   |   com/example/testproject/\n|   |   |   |   Main.kt\n|   |   |   module-info.java\nbuild.gradle.kts\nsettings.gradle\n</code></pre>\n\n<p>Usually I would run gradle run on it, but that results in the following error:</p>\n\n<pre><code>module-info.java:3: error: module not found: kotlin.stdlib\n  requires kotlin.stdlib;\n</code></pre>\n\n<p>Now this is what my build file currently looks like</p>\n\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nbuildscript {\n  var kotlin_version: String by extra\n  kotlin_version = \"1.2.41\"\n\n  repositories {\n    mavenCentral()\n  }\n  dependencies {\n    classpath(kotlin(\"gradle-plugin\", kotlin_version))\n  }\n}\n\nrepositories {\n  mavenCentral()\n}\n\nplugins {\n  kotlin(\"jvm\") version \"1.2.41\"\n  application\n}\n\nval kotlin_version: String by extra\n\ndependencies {\n  implementation(kotlin(\"stdlib\", kotlin_version))\n  implementation(kotlin(\"stdlib-jdk8\", kotlin_version))\n  implementation(kotlin(\"runtime\", kotlin_version))\n  implementation(kotlin(\"reflect\", kotlin_version))\n}\n\nval group = \"com.example\"\napplication {\n  mainClassName = \"$group.testproject.Main\"\n}\n\njava {\n  sourceCompatibility = JavaVersion.VERSION_1_10\n  targetCompatibility = sourceCompatibility\n  sourceSets {\n    \"main\" {\n      java.srcDirs(\"src/main/kotlin\")\n    }\n  }\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n  kotlinOptions.jvmTarget = \"1.8\"\n}\n</code></pre>\n\n<p>And this is my module-info.java:</p>\n\n<pre><code>module com.example.testproject {\n  // Kotlin compatibility\n  requires kotlin.stdlib;\n  exports com.example.testproject;\n}\n</code></pre>\n\n<p>Question: How to get the solution provided in the linked post (or any other solution) running, so that a Kotlin project with Gradle's Kotlin DSL can be compiled using a Java 9/10 environment?</p>\n"}, {"tags": ["android", "android-recyclerview", "kotlin", "mediastore"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8403860"}, "edited": false, "score": 0, "creation_date": 1527791174, "post_id": 50618720, "comment_id": 88271130, "body": "I don&#39;t understand what is FileUtils.isContentUri(imageSaveUriString)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8403860"}, "edited": false, "score": 0, "creation_date": 1527791386, "post_id": 50618720, "comment_id": 88271236, "body": "Config.APP_DIRECTORY gives error. Even if I import the package Config does not have anything like APP_DIRECTORY. android.util package is deprecated"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8412632"}, "edited": false, "score": 0, "creation_date": 1527791551, "post_id": 50618720, "comment_id": 88271309, "body": "@Thracian Not a right answer. Stop posting any answer just for free bounties"}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 0, "creation_date": 1527833321, "post_id": 50618720, "comment_id": 88284016, "body": "@Nachhhh FileUtils.isContentUri(imageSaveUriString) is for checking if it&#39;s a content uri. it returns boolean from &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthor&zwnj;&#8203;ity()) this."}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 0, "creation_date": 1527833386, "post_id": 50618720, "comment_id": 88284041, "body": "@Nachhhh Config is a final class i created to keep Strings. It contains directory name, &quot;.png&quot;, &quot;.jpg&quot; as String."}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 0, "creation_date": 1527833598, "post_id": 50618720, "comment_id": 88284125, "body": "@Nachhhh, there is also no pre-defined GallerItem object either. It&#39;s a class for data with only fields, setters and getters."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8403860"}, "edited": false, "score": 0, "creation_date": 1527840857, "post_id": 50618720, "comment_id": 88287825, "body": "@Thracian can you post your Config and FileUtils class"}, {"owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "edited": false, "score": 0, "creation_date": 1527843675, "post_id": 50618720, "comment_id": 88289482, "body": "@Nachhhh I added whole class of FileUtils. Config only keeps strings, it&#39;s final class for storing constants. I edited that too. For example, <code>Config.APP_DIRECTORY = &quot;My App Folder&quot;;</code> and <code>Config.IMAGE_FORMAT_JPEG = &quot;.jpg&quot;;</code> These are not for your app, you should customize your app for your file extensions and folders. I only added valid solution for getting file folder and editing files inside the folder. I removed unnecessary parts."}], "tags": [], "owner": {"reputation": 6601, "user_id": 5457853, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ee94ffac93a9a507abbbbd679f4779a?s=128&d=identicon&r=PG&f=1", "display_name": "Thracian", "link": "https://stackoverflow.com/users/5457853/thracian"}, "is_accepted": false, "score": 1, "last_activity_date": 1527843583, "last_edit_date": 1527843583, "creation_date": 1527750883, "answer_id": 50618720, "question_id": 50437217, "link": "https://stackoverflow.com/questions/50437217/showing-folder-with-video-file-in-recyclerview/50618720#50618720", "title": "Showing Folder with Video File in RecyclerView", "body": "<p>If you get permission to access any folder using Storage Access Framework, you get URI for that folder you can display that folder, display files inside that folder, edit or delete files without using SAF again unless that folder does not exist. It works both for device memory and external memory like SD card. If you don't have an Uri, <code>imagSaveUriString</code> is Uri in String format, at start set a default folder inside device and get files from that directory using  <code>File dir = new File(Environment.getExternalStorageDirectory(), \"App Dir\");</code></p>\n\n<p>I have an image gallery that lists images with .png or .jpeg extension inside the folder that was given permission before via SAF</p>\n\n<pre><code>private void setUpGalleryData() {\n    listGalleryItems.clear();\n\n    if (FileUtils.isContentUri(imageSaveUriString)) {\n        DocumentFile dir = DocumentFile.fromTreeUri(getApplicationContext(), Uri.parse(imageSaveUriString));\n        DocumentFile[] documentFiles = dir.listFiles();\n\n        if (dir != null &amp;&amp; documentFiles != null &amp;&amp; documentFiles.length &gt; 0) {\n            for (int i = 0; i &lt; documentFiles.length; i++) {\n                if (documentFiles[i].getUri().toString().toLowerCase().endsWith(Config.IMAGE_FORMAT_JPEG)\n                        || documentFiles[i].getUri().toString().toLowerCase().endsWith(Config.IMAGE_FORMAT_PNG)) {\n                    GalleryItem galleryItem = new GalleryItem();\n                    galleryItem.setName(documentFiles[i].getName());\n                    galleryItem.setSize(documentFiles[i].length());\n                    galleryItem.setPath(documentFiles[i].getUri().toString());\n                    galleryItem.setDateLastModified(documentFiles[i].lastModified());\n\n                    listGalleryItems.add(galleryItem);\n                }\n            }\n        }\n    } else {\n\n        File dir = new File(Environment.getExternalStorageDirectory(), Config.APP_DIRECTORY);\n        File[] files = dir.listFiles();\n\n        if (dir != null &amp;&amp; files != null &amp;&amp; files.length &gt; 0) {\n\n            for (int i = 0; i &lt; files.length; i++) {\n                if (files[i].getAbsolutePath().endsWith(\".jpg\") || files[i].getAbsolutePath().endsWith(\".png\")) {\n\n                    GalleryItem galleryItem = new GalleryItem();\n                    galleryItem.setName(files[i].getName());\n                    galleryItem.setSize(files[i].length());\n                    galleryItem.setPath(files[i].getAbsolutePath());\n                    galleryItem.setDateLastModified(files[i].lastModified());\n\n                    listGalleryItems.add(galleryItem);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And set i send data to adapter with</p>\n\n<pre><code>mAdapter = new GalleryListAdapter(this, listGalleryItems);\nmRecyclerView.setAdapter(mAdapter);\n</code></pre>\n\n<p><code>FileUtils.isContentUri(imageSaveUriString)</code> checks if URI is a valid content URI checks <code>\"com.android.externalstorage.documents\".equals(uri.getAuthority())</code></p>\n\n<p>This is the utility class i use, i got some of it from SO, some written by me, and i think it's a complete util class to get correct URI(file:/// and content) and static file folder from uri. However, you should look for Storage Access Framework. There is a Google sample that display how to create sub folders and find folders inside folders.</p>\n\n<pre><code>  public final class FileUtils {\n\n        private FileUtils() {\n\n        }\n\n        private static final String LOG_TAG = FileUtils.class.getName();\n\n        /**\n         * Get absolute paths of memory and SD cards\n         * \n         * @param context\n         *            Required for getting external starage dirs\n         * @return returns external storage paths (directory of external memory card) as\n         *         array of Strings\n         */\n        public static String[] getExternalStorageDirectories(Context context) {\n\n            List&lt;String&gt; results = new ArrayList&lt;&gt;();\n\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) { // Method 1 for KitKat &amp; above\n                File[] externalDirs = context.getExternalFilesDirs(null);\n\n                for (File file : externalDirs) {\n                    String path = file.getPath().split(\"/Android\")[0];\n\n                    boolean addPath = false;\n\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                        addPath = Environment.isExternalStorageRemovable(file);\n                    } else {\n                        addPath = Environment.MEDIA_MOUNTED.equals(EnvironmentCompat.getStorageState(file));\n                    }\n\n                    if (addPath) {\n                        results.add(path);\n                    }\n                }\n            }\n\n            if (results.isEmpty()) { // Method 2 for all versions\n                // better variation of: http://stackoverflow.com/a/40123073/5002496\n                String output = \"\";\n                try {\n                    final Process process = new ProcessBuilder().command(\"mount | grep /dev/block/vold\")\n                            .redirectErrorStream(true).start();\n                    process.waitFor();\n                    final InputStream is = process.getInputStream();\n                    final byte[] buffer = new byte[1024];\n                    while (is.read(buffer) != -1) {\n                        output = output + new String(buffer);\n                    }\n                    is.close();\n                } catch (final Exception e) {\n                    e.printStackTrace();\n                }\n                if (!output.trim().isEmpty()) {\n                    String devicePoints[] = output.split(\"\\n\");\n                    for (String voldPoint : devicePoints) {\n                        results.add(voldPoint.split(\" \")[2]);\n                    }\n                }\n            }\n\n            // Below few lines is to remove paths which may not be external memory card,\n            // like OTG (feel free to comment them out)\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                for (int i = 0; i &lt; results.size(); i++) {\n                    if (!results.get(i).toLowerCase().matches(\".*[0-9a-f]{4}[-][0-9a-f]{4}\")) {\n                        Log.d(LOG_TAG, results.get(i) + \" might not be extSDcard\");\n                        results.remove(i--);\n                    }\n                }\n            } else {\n                for (int i = 0; i &lt; results.size(); i++) {\n                    if (!results.get(i).toLowerCase().contains(\"ext\") &amp;&amp; !results.get(i).toLowerCase().contains(\"sdcard\")) {\n                        Log.d(LOG_TAG, results.get(i) + \" might not be extSDcard\");\n                        results.remove(i--);\n                    }\n                }\n            }\n\n            String[] storageDirectories = new String[results.size()];\n            for (int i = 0; i &lt; results.size(); ++i)\n                storageDirectories[i] = results.get(i);\n\n            return storageDirectories;\n        }\n\n        /**\n         * Gets File from DocumentFile if Uri is File Uri starting with file:///\n         *\n         * @param documentFile\n         *            Document file that contains Uri to create File from\n         * @return File with absolute path to the physical file on device's memory\n         */\n        public static File getFileFromFileUri(DocumentFile documentFile) {\n            try {\n                File file = new File(URI.create(documentFile.getUri().toString()));\n                return file;\n            } catch (Exception e) {\n                return null;\n            }\n        }\n\n        /**\n         * Returns File with absolute path to physical file in memory. Uri should be a\n         * valid File Uri starting with file:///\n         * \n         * @param uriString\n         *            Should contain a valid File Uri path\n         * @return File pointing to physical file in memory\n         */\n        public static File getFileFromFileUri(String uriString) {\n            try {\n                Uri uri = Uri.parse(uriString);\n                File file = new File(URI.create(uri.toString()));\n                return file;\n            } catch (Exception e) {\n                return null;\n            }\n        }\n\n        /**\n         * Gets absolute path of a file in SD Card if Uri of Document file is content\n         * Uri content:// .\n         *\n         * @param documentFile\n         *            DocumentFile Uri is content uri\n         * @return Absolute path of the file\n         */\n\n        public static String getSDCardPath(DocumentFile documentFile) {\n            // We can't get absolute path from DocumentFile or Uri.\n            // It is a hack to build absolute path by DocumentFile.\n            // May not work on some devices.\n            try {\n                Uri uri = documentFile.getUri();\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(\":\");\n\n                String sd = null;\n                sd = System.getenv(\"SECONDARY_STORAGE\");\n\n\n                if (sd == null) {\n                    // sd = System.getenv(\"EXTERNAL_STORAGE\");\n\n                    String documentPath = \"/storage\" + \"/\" + docId.replace(\":\", \"/\");\n                    return documentPath;\n                }\n                if (sd != null) {\n                    // On some devices SECONDARY_STORAGE has several paths\n                    // separated with a colon (\":\"). This is why we split\n                    // the String.\n                    String[] paths = sd.split(\":\");\n                    for (String p : paths) {\n                        File fileSD = new File(p);\n                        if (fileSD.isDirectory()) {\n                            sd = fileSD.getAbsolutePath();\n                        }\n                    }\n                    String id = split[1];\n                    String documentPath = sd + \"/\" + id;\n                    return documentPath;\n                }\n            } catch (Exception e) {\n                System.out.println(\"FileUtils ERROR \" + e.toString());\n                return null;\n            }\n\n            return null;\n        }\n\n        /**\n         * Get a file path from a Uri. This will get the the path for Storage Access\n         * Framework Documents, as well as the _data field for the MediaStore and other\n         * file-based ContentProviders.\n         *\n         * @param context\n         *            The context.\n         * @param uri\n         *            The Uri to query.\n         */\n        public static String getPath(final Context context, final Uri uri) {\n\n            final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\n\n            try {\n                // DocumentProvider\n                if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\n\n                    // ExternalStorageProvider\n                    if (isContentUri(uri)) {\n                        final String docId = DocumentsContract.getDocumentId(uri);\n                        final String[] split = docId.split(\":\");\n                        final String type = split[0];\n\n                        if (\"primary\".equalsIgnoreCase(type)) {\n                            if (split.length &gt; 1) {\n                                return Environment.getExternalStorageDirectory() + \"/\" + split[1] + \"/\";\n                            } else {\n                                return Environment.getExternalStorageDirectory() + \"/\";\n                            }\n                        } else {\n                            return \"storage\" + \"/\" + docId.replace(\":\", \"/\");\n                        }\n\n                    }\n                    // DownloadsProvider\n                    else if (isDownloadsDocument(uri)) {\n\n                        final String id = DocumentsContract.getDocumentId(uri);\n                        final Uri contentUri = ContentUris.withAppendedId(Uri.parse(\"content://downloads/public_downloads\"),\n                                Long.valueOf(id));\n\n                        return getDataColumn(context, contentUri, null, null);\n                    }\n                    // MediaProvider\n                    else if (isMediaDocument(uri)) {\n                        final String docId = DocumentsContract.getDocumentId(uri);\n                        final String[] split = docId.split(\":\");\n                        final String type = split[0];\n\n                        Uri contentUri = null;\n                        if (\"image\".equals(type)) {\n                            contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                        } else if (\"video\".equals(type)) {\n                            contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                        } else if (\"audio\".equals(type)) {\n                            contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                        }\n\n                        final String selection = \"_id=?\";\n                        final String[] selectionArgs = new String[] { split[1] };\n\n                        return getDataColumn(context, contentUri, selection, selectionArgs);\n                    }\n                }\n                // MediaStore (and general)\n                else if (\"content\".equalsIgnoreCase(uri.getScheme())) {\n\n                    // Return the remote address\n                    if (isGooglePhotosUri(uri))\n                        return uri.getLastPathSegment();\n\n                    return getDataColumn(context, uri, null, null);\n                }\n                // File\n                else if (\"file\".equalsIgnoreCase(uri.getScheme())) {\n                    return uri.getPath();\n                }\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            return null;\n        }\n\n        /**\n         * Get the value of the data column for this Uri. This is useful for MediaStore\n         * Uris, and other file-based ContentProviders.\n         *\n         * @param context\n         *            The context.\n         * @param uri\n         *            The Uri to query.\n         * @param selection\n         *            (Optional) Filter used in the query.\n         * @param selectionArgs\n         *            (Optional) Selection arguments used in the query.\n         * @return The value of the _data column, which is typically a file path.\n         */\n        public static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {\n\n            Cursor cursor = null;\n            final String column = \"_data\";\n            final String[] projection = { column };\n\n            try {\n                cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null);\n                if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                    final int index = cursor.getColumnIndexOrThrow(column);\n                    return cursor.getString(index);\n                }\n            } finally {\n                if (cursor != null)\n                    cursor.close();\n            }\n            return null;\n        }\n\n        /**\n         * Checks if a string is parsable to Content Uri\n         * \n         * @param uriString\n         *            checked if can be parsed to a Content Uri\n         * @return uriString is a content uri\n         */\n        public static boolean isContentUri(String uriString) {\n            Uri uri = null;\n            try {\n                uri = Uri.parse(uriString);\n            } catch (NullPointerException e) {\n                return false;\n            }\n            return isContentUri(uri);\n        }\n\n        /**\n         * @param uri\n         *            The Uri to check.\n         * @return Whether the Uri authority is ExternalStorageProvider.\n         */\n        public static boolean isContentUri(Uri uri) {\n            if (uri == null) {\n                return false;\n            } else {\n                return \"com.android.externalstorage.documents\".equals(uri.getAuthority());\n            }\n        }\n\n        /**\n         * @param uri\n         *            The Uri to check.\n         * @return Whether the Uri authority is DownloadsProvider.\n         */\n        public static boolean isDownloadsDocument(Uri uri) {\n            return \"com.android.providers.downloads.documents\".equals(uri.getAuthority());\n        }\n\n        /**\n         * @param uri\n         *            The Uri to check.\n         * @return Whether the Uri authority is MediaProvider.\n         */\n        public static boolean isMediaDocument(Uri uri) {\n            return \"com.android.providers.media.documents\".equals(uri.getAuthority());\n        }\n\n        /**\n         * @param uri\n         *            The Uri to check.\n         * @return Whether the Uri authority is Google Photos.\n         */\n        public static boolean isGooglePhotosUri(Uri uri) {\n            return \"com.google.android.apps.photos.content\".equals(uri.getAuthority());\n        }\n\n    }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8403860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1590, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1527843583, "creation_date": 1526835029, "last_edit_date": 1527752583, "question_id": 50437217, "link": "https://stackoverflow.com/questions/50437217/showing-folder-with-video-file-in-recyclerview", "title": "Showing Folder with Video File in RecyclerView", "body": "<p>I am listing all my media files in a recycler view. Suppose a media file is in a folder, then I want to show that folder in my recycler view too.\nHere is my code to list media files</p>\n\n<pre><code>var projection = arrayOf(MediaStore.Video.Media.DISPLAY_NAME)\nvar cursor = CursorLoader(applicationContext, MediaStore.Video.Media.EXTERNAL_CONTENT_URI, \n    projection, null, null, null).loadInBackground()\n\nif (cursor != null) {\n    while (cursor.moveToNext()) {\n        val name = cursor.getString(cursor.getColumnIndex(MediaStore.Video.VideoColumns.DISPLAY_NAME))\n        Log.i(\"Main\", name)\n    }\n    cursor.close()\n}\n</code></pre>\n\n<p>How can I also show the folder if a particular media file is present in a folder. Any help would be greatly appreciated.</p>\n"}, {"tags": ["java", "android", "kotlin"], "comments": [{"owner": {"reputation": 15500, "user_id": 8486518, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QUM0SNPJsXo/AAAAAAAAAAI/AAAAAAAAABU/3rAlBsd0Qlg/photo.jpg?sz=128", "display_name": "M\u1ea1nh Quy\u1ebft Nguy\u1ec5n", "link": "https://stackoverflow.com/users/8486518/m%e1%ba%a1nh-quy%e1%ba%bft-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1526833178, "post_id": 50436871, "comment_id": 87887825, "body": "what&#39;s the output when image downloaded?"}, {"owner": {"reputation": 2198, "user_id": 3901746, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/D6YK9.jpg?s=128&g=1", "display_name": "Ishan Fernando", "link": "https://stackoverflow.com/users/3901746/ishan-fernando"}, "edited": false, "score": 0, "creation_date": 1526834153, "post_id": 50436871, "comment_id": 87888125, "body": "You can use the Glide. You can easily pass Url of the image and it will show the image. In glide you can configure whether you need to cache the image or not. Even you cache the image, it will not show in the gallary"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 6361814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4644faf81697340a31e1f59c5f2fa?s=128&d=identicon&r=PG&f=1", "display_name": "Dav iD", "link": "https://stackoverflow.com/users/6361814/dav-id"}, "is_accepted": false, "score": 1, "last_activity_date": 1526840628, "creation_date": 1526840628, "answer_id": 50438081, "question_id": 50436871, "link": "https://stackoverflow.com/questions/50436871/android-get-image-from-url-without-being-saved-to-storage/50438081#50438081", "title": "Android -get image from URL without being saved to storage", "body": "<p>This will load an image from the server and it won't appear in the galley.     </p>\n\n<pre><code>Glide.with(context)\n    .load(IMAGE_URL)\n    .into(imageView);\n</code></pre>\n\n<p>As for caching, that's what we can find in Glide's docs:</p>\n\n<blockquote>\n  <p>The default strategy, AUTOMATIC, tries to use the optimal strategy for local and remote images. AUTOMATIC will store only the unmodified data backing your load when you\u2019re loading remote data (like from URLs) because downloading remote data is expensive compared to resizing data already on disk. For local data AUTOMATIC will store the transformed thumbnail only because retrieving the original data is cheap if you need to generate a second thumbnail size or type.</p>\n</blockquote>\n\n<p>It doesn't matter whether you use caching or not, the image won't be visible in the gallery.  </p>\n"}], "owner": {"reputation": 267, "user_id": 4882066, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/599111390191982/picture?type=large", "display_name": "Marinescu Raluca", "link": "https://stackoverflow.com/users/4882066/marinescu-raluca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526840628, "creation_date": 1526832990, "question_id": 50436871, "link": "https://stackoverflow.com/questions/50436871/android-get-image-from-url-without-being-saved-to-storage", "title": "Android -get image from URL without being saved to storage", "body": "<p>I get a image from a server an I want to display it in my Adapter.</p>\n\n<p>Even if i use URL with Glide or if I use the conversion URL->BITMAP->URI,\nthe image gets saved in gallery.How can i get it displayed without being saved?\nOr how can i save it as nomedia and then use it with Glide/Picasso?</p>\n\n<pre><code>public Uri getImageUri(Context inContext, Bitmap inImage) {\n  ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n  inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);\n  String path = Images.Media.insertImage(inContext.getContentResolver(), inImage, \"Title\", null);\n  return Uri.parse(path);\n} \n</code></pre>\n"}, {"tags": ["android", "android-fragments", "kotlin", "android-actionbar", "android-toolbar"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9815706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ui-CxMPa2sc/AAAAAAAAAAI/AAAAAAAAAHU/cGgs3FNc3Vo/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/9815706/oliver"}, "edited": false, "score": 0, "creation_date": 1526827716, "post_id": 50435904, "comment_id": 87886119, "body": "But if I try to inflate in the Fragment it says that menuInflater has an unresolved reference. Can you please give me an example on how to do it?"}], "tags": [], "owner": {"reputation": 4386, "user_id": 4507927, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/47bcb40aceb9761c65dbf9d1012b60f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yupi", "link": "https://stackoverflow.com/users/4507927/yupi"}, "is_accepted": true, "score": 1, "last_activity_date": 1526828173, "last_edit_date": 1526828173, "creation_date": 1526826949, "answer_id": 50435904, "question_id": 50435820, "link": "https://stackoverflow.com/questions/50435820/setsupportactionbar-inside-of-a-fragment/50435904#50435904", "title": "setSupportActionBar inside of a Fragment", "body": "<p>Override <code>onCreateOptionsMenu</code> in your <code>Fragment</code> and inflate your <code>menu</code> inside. Than in <code>onCreate</code> method of <code>Fragment</code> set <code>setHasOptionsMenu()</code> to true. To inflate different menus depending on <code>Fragment</code> creation <code>clear</code> the menu first.</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setHasOptionsMenu(true)\n}\n\noverride fun onCreateOptionsMenu(menu: Menu?, inflater: MenuInflater?) {\n    super.onCreateOptionsMenu(menu, inflater)\n    inflater?.inflate(Your menu here, menu)\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9815706, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Ui-CxMPa2sc/AAAAAAAAAAI/AAAAAAAAAHU/cGgs3FNc3Vo/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/9815706/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 50435904, "answer_count": 1, "score": 0, "last_activity_date": 1526828173, "creation_date": 1526826406, "question_id": 50435820, "link": "https://stackoverflow.com/questions/50435820/setsupportactionbar-inside-of-a-fragment", "title": "setSupportActionBar inside of a Fragment", "body": "<p>I have a Fragment:</p>\n\n<pre><code>class HomeFragment : Fragment() { ... }\n</code></pre>\n\n<p>Now I'm trying to add an Actionbar to it, but this doesn't work:</p>\n\n<pre><code>setSupportActionBar(findViewById(R.id.toolbar_main))\n</code></pre>\n\n<p>How can I set the Support and then add Items to the ActionBar?</p>\n\n<p>This is how it works in an AppCompatActivity:</p>\n\n<pre><code>//    This adds items to the ActionBar\n    override fun onCreateOptionsMenu(menu: Menu): Boolean {\n        menuInflater.inflate(R.menu.menu_toolbar_main, menu)\n        return true\n    }\n\n\n//    This is the OnClickListener for the Buttons in the ActionBar\n    override fun onOptionsItemSelected(item: MenuItem) = when (item.itemId) {\n    R.id.toolbar_edit -&gt; {\n\n\n        true\n    }\n\n    R.id.toolbar_search -&gt; {\n\n\n        true\n    }\n\n    else -&gt; {\n        // If we got here, the user's action was not recognized.\n        // Invoke the superclass to handle it.\n        super.onOptionsItemSelected(item)\n    }\n}\n</code></pre>\n\n<p>Big thanks in advance!</p>\n"}, {"tags": ["android", "kotlin", "android-testing", "android-architecture-components", "android-paging"], "comments": [{"owner": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 0, "creation_date": 1526893086, "post_id": 50435770, "comment_id": 87904023, "body": "What I find is missing from your question is: what verification do you want to make in the tests?"}, {"owner": {"reputation": 4296, "user_id": 1639078, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uHDw2.jpg?s=128&g=1", "display_name": "isuPatches", "link": "https://stackoverflow.com/users/1639078/isupatches"}, "reply_to_user": {"reputation": 7051, "user_id": 1916449, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5611f16fc8a1b73a03e44297682824f?s=128&d=identicon&r=PG", "display_name": "arekolek", "link": "https://stackoverflow.com/users/1916449/arekolek"}, "edited": false, "score": 0, "creation_date": 1526905524, "post_id": 50435770, "comment_id": 87910891, "body": "@arekolek thank you for the feedback...I updated the question with what I&#39;m trying to verify"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1567558316, "post_id": 50435770, "comment_id": 101995017, "body": "Any update on which strategy you implemented @isuPatches? I&#39;m working on writing the same test with Kotlin, JUnit 5, and MockK. I&#39;m happy to share my solution here once I get the proof of concept working."}], "answers": [{"comments": [{"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1567959087, "post_id": 51057499, "comment_id": 102114492, "body": "Thanks for the insight! I&#39;ve <a href=\"https://stackoverflow.com/a/57794102/2253682\">implemented</a> a mock PagedList using MockK for a local JUnit 5 test."}], "tags": [], "owner": {"reputation": 1358, "user_id": 6281160, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ycDxi.jpg?s=128&g=1", "display_name": "Deividas Strioga", "link": "https://stackoverflow.com/users/6281160/deividas-strioga"}, "is_accepted": false, "score": 0, "last_activity_date": 1530086304, "creation_date": 1530086304, "answer_id": 51057499, "question_id": 50435770, "link": "https://stackoverflow.com/questions/50435770/how-do-i-create-a-pagedlist-of-an-object-for-tests/51057499#51057499", "title": "How do I create a PagedList of an object for tests?", "body": "<ol>\n<li>You cannot cast List to PagedList.</li>\n<li>You cannot create PagedList directly, only through DataSource. One way is creating FakeDataSource returning the test data. </li>\n</ol>\n\n<p>If it is an end-to-end test, you could just use in-memory db. Add your test data before calling it. Example: \n<a href=\"https://medium.com/exploring-android/android-architecture-components-testing-your-room-dao-classes-e06e1c9a1535\" rel=\"nofollow noreferrer\">https://medium.com/exploring-android/android-architecture-components-testing-your-room-dao-classes-e06e1c9a1535</a></p>\n"}, {"comments": [{"owner": {"reputation": 4264, "user_id": 1254514, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c5a0b9d3116efcc13a842d89ada3988a?s=128&d=identicon&r=PG", "display_name": "Paul Spiesberger", "link": "https://stackoverflow.com/users/1254514/paul-spiesberger"}, "edited": false, "score": 0, "creation_date": 1557755018, "post_id": 52511874, "comment_id": 98860839, "body": "Don&#39;t forget to add Mockito first: <code>testImplementation &quot;org.mockito:mockito-core:2.25.0&quot;</code>"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1567558784, "post_id": 52511874, "comment_id": 101995098, "body": "Can you cast a <code>List</code> to a <code>PagedList</code> @bsobat?"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1567623460, "post_id": 52511874, "comment_id": 102021803, "body": "@bsobat, Is this supposed to return a <code>PagedList</code> with data populated or an empty <code>PagedList</code> to avoid the test from failing? If empty, it will not be useful for testing how the app handles <code>PagedList</code> data."}, {"owner": {"reputation": 630, "user_id": 257110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bcc906ea2e678452ce8ee2b4bcdb33c?s=128&d=identicon&r=PG", "display_name": "bsobat", "link": "https://stackoverflow.com/users/257110/bsobat"}, "edited": false, "score": 0, "creation_date": 1567657797, "post_id": 52511874, "comment_id": 102029478, "body": "@Hurwitz no, you can&#39;t cast"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "edited": false, "score": 0, "creation_date": 1567958894, "post_id": 52511874, "comment_id": 102114430, "body": "@bsobat, check out the <a href=\"https://stackoverflow.com/a/57794102/2253682\">solution</a> above that uses MockK to implement the behavior of using a PagedList when writing local JUnit 5 tests."}], "tags": [], "owner": {"reputation": 630, "user_id": 257110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bcc906ea2e678452ce8ee2b4bcdb33c?s=128&d=identicon&r=PG", "display_name": "bsobat", "link": "https://stackoverflow.com/users/257110/bsobat"}, "is_accepted": false, "score": 11, "last_activity_date": 1537945601, "creation_date": 1537945601, "answer_id": 52511874, "question_id": 50435770, "link": "https://stackoverflow.com/questions/50435770/how-do-i-create-a-pagedlist-of-an-object-for-tests/52511874#52511874", "title": "How do I create a PagedList of an object for tests?", "body": "<p>an easy way to achieve this, is to mock the PagedList. This fun will \"convert\" a list to a PagedList (in this case, we are not using the real PagedList rather just a mocked version, if you need other methods of PagedList to be implemented, add them in this fun)</p>\n\n<pre><code> fun &lt;T&gt; mockPagedList(list: List&lt;T&gt;): PagedList&lt;T&gt; {\n     val pagedList = Mockito.mock(PagedList::class.java) as PagedList&lt;T&gt;\n     Mockito.`when`(pagedList.get(ArgumentMatchers.anyInt())).then { invocation -&gt;\n        val index = invocation.arguments.first() as Int\n        list[index]\n     }\n     Mockito.`when`(pagedList.size).thenReturn(list.size)\n     return pagedList\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1594030724, "post_id": 57794102, "comment_id": 110973376, "body": "would it be similar for paging 3 lib?"}, {"owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "reply_to_user": {"reputation": 128827, "user_id": 653856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6qIEl.png?s=128&g=1", "display_name": "Raghunandan", "link": "https://stackoverflow.com/users/653856/raghunandan"}, "edited": false, "score": 0, "creation_date": 1594051101, "post_id": 57794102, "comment_id": 110984306, "body": "Great question @Raghunandan! I have not tested the Paging 3 library yet. Please follow-up on the post with comments/edits if you implement and find changes."}], "tags": [], "owner": {"reputation": 6199, "user_id": 2253682, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/skbWe.jpg?s=128&g=1", "display_name": "Adam Hurwitz", "link": "https://stackoverflow.com/users/2253682/adam-hurwitz"}, "is_accepted": false, "score": 11, "last_activity_date": 1596913204, "last_edit_date": 1596913204, "creation_date": 1567622254, "answer_id": 57794102, "question_id": 50435770, "link": "https://stackoverflow.com/questions/50435770/how-do-i-create-a-pagedlist-of-an-object-for-tests/57794102#57794102", "title": "How do I create a PagedList of an object for tests?", "body": "<h1>Paging 3</h1>\n<p>The Paging 3 library offers a builder method <a href=\"https://developer.android.com/jetpack/androidx/releases/paging#version_300_2\" rel=\"noreferrer\"><code>PagingData.from(someList)</code></a>.</p>\n<h1>Paging 2</h1>\n<p>Convert List Into PagedList With a Mock <code>DataSource.Factory</code>.</p>\n<p><a href=\"https://github.com/saied89\" rel=\"noreferrer\">@saied89</a> shared this <a href=\"https://github.com/saied89/DVDPrism/blob/master/app/src/androidTest/java/com/saied/dvdprism/app/PagedListMock.kt\" rel=\"noreferrer\">solution</a> in this <a href=\"https://github.com/googlesamples/android-architecture-components/issues/287\" rel=\"noreferrer\">googlesamples/android-architecture-components</a> issue. I've implemented the mocked PagedList in the <a href=\"https://github.com/AdamSHurwitz/Coinverse\" rel=\"noreferrer\">Coinverse Open App</a> in order to local unit test a ViewModel using Kotlin, JUnit 5, MockK, and AssertJ libraries.</p>\n<p>To observe the LiveData from the PagedList I've used <a href=\"https://twitter.com/ppvi\" rel=\"noreferrer\">Jose Alc\u00e9rreca's</a>  <a href=\"https://medium.com/androiddevelopers/unit-testing-livedata-and-other-common-observability-problems-bb477262eb04\" rel=\"noreferrer\">implementation</a> of <code>getOrAwaitValue</code> from the <a href=\"https://github.com/googlesamples/android-architecture-components/tree/master/LiveDataSample\" rel=\"noreferrer\">LiveDataSample sample app</a> under Google's Android Architecture Components samples.</p>\n<p>The <code>asPagedList</code> extension function is implemented in the sample test <em>ContentViewModelTest.kt</em> below.</p>\n<p><em>PagedListTestUtil.kt</em></p>\n<pre><code>\n    import android.database.Cursor\n    import androidx.paging.DataSource\n    import androidx.paging.LivePagedListBuilder\n    import androidx.paging.PagedList\n    import androidx.room.RoomDatabase\n    import androidx.room.RoomSQLiteQuery\n    import androidx.room.paging.LimitOffsetDataSource\n    import io.mockk.every\n    import io.mockk.mockk\n\n    fun &lt;T&gt; List&lt;T&gt;.asPagedList() = LivePagedListBuilder&lt;Int, T&gt;(createMockDataSourceFactory(this),\n        Config(enablePlaceholders = false,\n                prefetchDistance = 24,\n                pageSize = if (size == 0) 1 else size))\n        .build().getOrAwaitValue()\n\n    private fun &lt;T&gt; createMockDataSourceFactory(itemList: List&lt;T&gt;): DataSource.Factory&lt;Int, T&gt; =\n        object : DataSource.Factory&lt;Int, T&gt;() {\n            override fun create(): DataSource&lt;Int, T&gt; = MockLimitDataSource(itemList)\n        }\n\n    private val mockQuery = mockk&lt;RoomSQLiteQuery&gt; {\n        every { sql } returns &quot;&quot;\n    }\n\n    private val mockDb = mockk&lt;RoomDatabase&gt; {\n        every { invalidationTracker } returns mockk(relaxUnitFun = true)\n    }\n\n    class MockLimitDataSource&lt;T&gt;(private val itemList: List&lt;T&gt;) : LimitOffsetDataSource&lt;T&gt;(mockDb, mockQuery, false, null) {\n        override fun convertRows(cursor: Cursor?): MutableList&lt;T&gt; = itemList.toMutableList()\n        override fun countItems(): Int = itemList.count()\n        override fun isInvalid(): Boolean = false\n        override fun loadRange(params: LoadRangeParams, callback: LoadRangeCallback&lt;T&gt;) { /* Not implemented */ }\n\n        override fun loadRange(startPosition: Int, loadCount: Int) =\n            itemList.subList(startPosition, startPosition + loadCount).toMutableList()\n\n        override fun loadInitial(params: LoadInitialParams, callback: LoadInitialCallback&lt;T&gt;) {\n            callback.onResult(itemList, 0)\n        }\n    }\n</code></pre>\n<p><em>LiveDataTestUtil.kt</em></p>\n<pre><code>\n    import androidx.lifecycle.LiveData\n    import androidx.lifecycle.Observer\n    import java.util.concurrent.CountDownLatch\n    import java.util.concurrent.TimeUnit\n    import java.util.concurrent.TimeoutException\n\n    /**\n     * Gets the value of a [LiveData] or waits for it to have one, with a timeout.\n     *\n     * Use this extension from host-side (JVM) tests. It's recommended to use it alongside\n     * `InstantTaskExecutorRule` or a similar mechanism to execute tasks synchronously.\n     */\n    fun &lt;T&gt; LiveData&lt;T&gt;.getOrAwaitValue(\n        time: Long = 2,\n        timeUnit: TimeUnit = TimeUnit.SECONDS,\n        afterObserve: () -&gt; Unit = {}\n    ): T {\n        var data: T? = null\n        val latch = CountDownLatch(1)\n        val observer = object : Observer&lt;T&gt; {\n            override fun onChanged(o: T?) {\n                data = o\n                latch.countDown()\n                this@getOrAwaitValue.removeObserver(this)\n            }\n        }\n        this.observeForever(observer)\n        afterObserve.invoke()\n        // Don't wait indefinitely if the LiveData is not set.\n        if (!latch.await(time, timeUnit)) {\n            this.removeObserver(observer)\n            throw TimeoutException(&quot;LiveData value was never set.&quot;)\n        }\n        @Suppress(&quot;UNCHECKED_CAST&quot;)\n        return data as T\n    }\n</code></pre>\n<p><em>ContentViewModelTest.kt</em></p>\n<pre><code>    ...\n    import androidx.paging.PagedList\n    import com.google.firebase.Timestamp\n    import io.mockk.*\n    import org.assertj.core.api.Assertions.assertThat\n    import org.junit.jupiter.api.AfterAll\n    import org.junit.jupiter.api.BeforeAll\n    import org.junit.jupiter.api.BeforeEach\n    import org.junit.jupiter.api.Test\n    import org.junit.jupiter.api.extension.ExtendWith\n\n    @ExtendWith(InstantExecutorExtension::class)\n    class ContentViewModelTest {\n        val timestamp = getTimeframe(DAY)\n\n        @BeforeAll\n        fun beforeAll() {\n            mockkObject(ContentRepository)\n        }\n\n        @BeforeEach\n        fun beforeEach() {\n            clearAllMocks()\n        }\n\n        @AfterAll\n        fun afterAll() {\n            unmockkAll()\n        }\n\n        @Test\n        fun `Feed Load`() {\n            val content = Content(&quot;85&quot;, 0.0, Enums.ContentType.NONE, Timestamp.now(), &quot;&quot;,\n                &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, MAIN,\n                0, 0.0, 0.0, 0.0, 0.0,\n                0.0, 0.0, 0.0, 0.0)\n            every {\n                getMainFeedList(any(), any())\n            } returns liveData { \n               emit(Lce.Content(\n                   ContentResult.PagedListResult(\n                        pagedList = liveData {emit(listOf(content).asPagedList())}, \n                        errorMessage = &quot;&quot;))\n            }\n            val contentViewModel = ContentViewModel(ContentRepository)\n            contentViewModel.processEvent(ContentViewEvent.FeedLoad(MAIN, DAY, timestamp, false))\n            assertThat(contentViewModel.feedViewState.getOrAwaitValue().contentList.getOrAwaitValue()[0])\n                .isEqualTo(content)\n            assertThat(contentViewModel.feedViewState.getOrAwaitValue().toolbar).isEqualTo(\n                ToolbarState(\n                        visibility = GONE,\n                        titleRes = app_name,\n                        isSupportActionBarEnabled = false))\n            verify {\n                getMainFeedList(any(), any())\n            }\n            confirmVerified(ContentRepository)\n        }\n    }\n</code></pre>\n<p><em>InstantExecutorExtension.kt</em></p>\n<p>This is required for JUnit 5 when using LiveData in order to ensure the Observer is not on the main thread. Below is <a href=\"https://twitter.com/molsjeroen\" rel=\"noreferrer\">Jeroen Mols'</a> <a href=\"https://jeroenmols.com/blog/2019/01/17/livedatajunit5/\" rel=\"noreferrer\">implementation</a>.</p>\n<pre><code>    import androidx.arch.core.executor.ArchTaskExecutor\n    import androidx.arch.core.executor.TaskExecutor\n    import org.junit.jupiter.api.extension.AfterEachCallback\n    import org.junit.jupiter.api.extension.BeforeEachCallback\n    import org.junit.jupiter.api.extension.ExtensionContext\n\n    class InstantExecutorExtension : BeforeEachCallback, AfterEachCallback {\n        override fun beforeEach(context: ExtensionContext?) {\n            ArchTaskExecutor.getInstance().setDelegate(object : TaskExecutor() {\n                override fun executeOnDiskIO(runnable: Runnable) = runnable.run()\n                override fun postToMainThread(runnable: Runnable) = runnable.run()\n                override fun isMainThread(): Boolean = true\n            })\n        }\n\n        override fun afterEach(context: ExtensionContext?) {\n            ArchTaskExecutor.getInstance().setDelegate(null)\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 4296, "user_id": 1639078, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uHDw2.jpg?s=128&g=1", "display_name": "isuPatches", "link": "https://stackoverflow.com/users/1639078/isupatches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7768, "favorite_count": 4, "answer_count": 3, "score": 19, "last_activity_date": 1615191483, "creation_date": 1526826133, "last_edit_date": 1596642744, "question_id": 50435770, "link": "https://stackoverflow.com/questions/50435770/how-do-i-create-a-pagedlist-of-an-object-for-tests", "title": "How do I create a PagedList of an object for tests?", "body": "<p>I have been working with the arch libraries from Google, but one thing that has made testing difficult is working with <code>PagedList</code>.</p>\n\n<p>For this example, I am using the repository pattern and returning details from either an API or network.  </p>\n\n<p>So within the ViewModel I make a call to this interface method:</p>\n\n<pre><code>override fun getFoos(): Observable&lt;PagedList&lt;Foo&gt;&gt;\n</code></pre>\n\n<p>The Repository will then use <code>RxPagedListBuilder</code> to create the <code>Observable</code> that is of type PagedList:</p>\n\n<pre><code> override fun getFoos(): Observable&lt;PagedList&lt;Foo&gt;&gt; =\n            RxPagedListBuilder(database.fooDao().selectAll(), PAGED_LIST_CONFIG).buildObservable()\n</code></pre>\n\n<p>I want to be able for tests to setup the return from these methods that return a <code>PagedList&lt;Foo&gt;</code>.  Something similar to</p>\n\n<pre><code>when(repository.getFoos()).thenReturn(Observable.just(TEST_PAGED_LIST_OF_FOOS)\n</code></pre>\n\n<p>Two questions:</p>\n\n<ol>\n<li>Is this possible?</li>\n<li>How do I create a <code>PagedList&lt;Foo&gt;</code>?</li>\n</ol>\n\n<p>My goal is to verify in a more end-to-end fashion (such as ensuring that the correct list of Foos is displayed on the screen).  The fragment/activity/view is the one observing the <code>PagedList&lt;Foo&gt;</code> from a ViewModel.</p>\n"}, {"tags": ["java", "json", "kotlin", "gson", "generalization"], "comments": [{"owner": {"reputation": 3473, "user_id": 2740621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MpxtQ.png?s=128&g=1", "display_name": "AutonomousApps", "link": "https://stackoverflow.com/users/2740621/autonomousapps"}, "edited": false, "score": 0, "creation_date": 1526833650, "post_id": 50433954, "comment_id": 87887967, "body": "Do you have any control over that API? Because that strikes me as a terrible design choice."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1527412862, "post_id": 50438254, "comment_id": 88112350, "body": "Hey, sorry for the late reply, can only work on this during the weekends..  I tried your solution but it does not seem to work using the ParameterizedType as i get a class cast exception   <code>java.lang.ClassCastException: java.lang.Class cannot be cast to java.lang.reflect.ParameterizedType</code>  But if i have understood this correctly then i should have a Type back from  the actualTypeOfT. Why not only use typeOfT?"}, {"owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "reply_to_user": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1527443688, "post_id": 50438254, "comment_id": 88120657, "body": "The <code>typeOfT</code> should be of type <code>ObjectType&lt;T&gt;</code>. How do you actually call <code>Gson</code> for converting the input <i>Json</i>? And how do you register the deserializer?"}, {"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1527535779, "post_id": 50438254, "comment_id": 88154531, "body": "The typeOfT is not ObjectType&lt;T&gt; but the main object Game  <code>data class Game (         val id: Long? = null,         val name: String? = null,         ......        val developers: List&lt;ObjectType&lt;Company&gt;&gt;? = null,         val publishers: List&lt;ObjectType&lt;Company&gt;&gt;? = null,</code>"}, {"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1527586192, "post_id": 50438254, "comment_id": 88170900, "body": "<code>val gson = GsonBuilder().registerTypeAdapter(com.igdb.igdbmainapp.kotli&zwnj;&#8203;n.Game::class.java, ObjectDeserializer&lt;List&lt;ObjectType&lt;GenreTheme&gt;&gt;&gt;()).create()</code>"}, {"owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "edited": false, "score": 0, "creation_date": 1527589903, "post_id": 50438254, "comment_id": 88173223, "body": "But how should that look?  I thought i did just that. And the ObjectType needs a type anyhow I&#39;m not sure that i follow."}], "tags": [], "owner": {"reputation": 33367, "user_id": 3385212, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/PmQYG.png?s=128&g=1", "display_name": "tynn", "link": "https://stackoverflow.com/users/3385212/tynn"}, "is_accepted": true, "score": 0, "last_activity_date": 1527610696, "last_edit_date": 1527610696, "creation_date": 1526841892, "answer_id": 50438254, "question_id": 50433954, "link": "https://stackoverflow.com/questions/50433954/general-gson-serialization-of-api-types/50438254#50438254", "title": "General Gson Serialization of API types", "body": "<p>Your implementation has some issues and inconsistencies. First you have to make sure to deserialize <code>ObjectType&lt;T&gt;</code>. Thus you have to declare the class as:</p>\n\n<pre><code>class ObjectDeserializer&lt;T&gt; : JsonDeserializer&lt;ObjectType&lt;T&gt;&gt;\n</code></pre>\n\n<p>It would also be easier to assume that all parameters are non-null:</p>\n\n<pre><code>override fun deserialize(json: JsonElement, typeOfT: Type,\n                         context: JsonDeserializationContext): ObjectType&lt;T&gt;\n</code></pre>\n\n<p>Now you can use <code>typeOfT</code> which is actually the type of <code>T</code> in <code>JsonDeserializer</code>, not in <code>ObjectDeserializer</code>. Therefore it's the type of <code>ObjectType&lt;T&gt;</code> you need to deserialize. To move to the next step you need to find the actual type of T:</p>\n\n<pre><code>val objectTypeType = typeOfT as ParameterizedType\nval actualTypeOfT = objectTypeType.getActualTypeArguments()[0]\n</code></pre>\n\n<p>As the next step you need to figure out the contents of <code>json</code>. In your case you won't ever find an array, but an object or a long:</p>\n\n<pre><code>return if (json.isJsonObject()) {\n    val struct: T = context.deserialize(json, actualTypeOfT)\n    ObjectType(expand = struct)\n} else {\n    val id = json.getAsLong()\n    ObjectType(Id = id)\n}\n</code></pre>\n\n<p>Here you return the <code>ObjectType</code> instances without any error handling, which you might need to add as well.</p>\n\n<p>Then you should provide this deserializer to <em>Gson</em> by:</p>\n\n<pre><code>registerTypeAdapter(ObjectType::class.java, ObjectDeserializer&lt;Any&gt;())\n</code></pre>\n\n<p>Whenever <em>Gson</em> needs to deserialize an <code>ObjectType&lt;TheType&gt;</code>, it finds the instance of <code>ObjectDeserializer</code> and provides <code>ObjectType&lt;TheType&gt;</code> as <code>typeOfT</code> to <code>deserialize</code>.</p>\n"}], "owner": {"reputation": 304, "user_id": 1744885, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/12aae4eb7fe2d8018810077ce01eba6c?s=128&d=identicon&r=PG", "display_name": "Oreex0", "link": "https://stackoverflow.com/users/1744885/oreex0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 50438254, "answer_count": 1, "score": 0, "last_activity_date": 1527610696, "creation_date": 1526812732, "last_edit_date": 1526812927, "question_id": 50433954, "link": "https://stackoverflow.com/questions/50433954/general-gson-serialization-of-api-types", "title": "General Gson Serialization of API types", "body": "<p>I am working with an API that can have different types for it's attributes</p>\n\n<p>The attributes can either be Ids or Objects</p>\n\n<p>I want to build a generalized type that handles this for me with Gson serialization.</p>\n\n<p>Example:</p>\n\n<pre><code>\"platforms\": [\n        6\n    ]\n\n\"platforms\": [\n    {\n        \"id\": 6,\n        \"name\": \"PC (Microsoft Windows)\",\n        \"slug\": \"win\",\n        \"url\": \"https://www.igdb.com/platforms/win\",\n        \"created_at\": 1297639288000,\n        \"updated_at\": 1470063140518,\n        \"website\": \"http://windows.microsoft.com/\",\n        \"alternative_name\": \"mswin\"\n    }\n]\n</code></pre>\n\n<p>I am working with Kotlin and have started building my Generalizable class</p>\n\n<pre><code>data class ObjectType&lt;T&gt;(\n        var Id: Long? = null,\n        var expand: T? = null\n) \n</code></pre>\n\n<p>I am currently stuck in constructing my JsonDeserializer, as it needs a return of type T which in my case can be both an Int or an Object. I have tried to replace the T with ObjectType which works 'better' but cannot handle the cases when the JSON is an array.</p>\n\n<p>I am currently trying to make it work with just the Generalized Type T as I can set the type as List> instead.</p>\n\n<p>Current Implementation:</p>\n\n<pre><code>class ObjectDeserializer&lt;T&gt; : JsonDeserializer&lt;T&gt; {\n\n    override fun deserialize(json: JsonElement?, typeOfT: Type?, context: JsonDeserializationContext?): T {\n        if (json != null) {\n\n            if (json.isJsonArray) {\n\n                val struct: T = Gson().fromJson(json, T::class.java) as T\n                return struct\n            } else {\n                val id = Gson().fromJson(json, Long::class.java)\n                //return ObjectType(id, null)\n            }\n\n        }\n\n        return T as T\n    }\n}\n</code></pre>\n\n<p>I would love some input on how to solve this.</p>\n"}, {"tags": ["android", "firebase", "firebase-realtime-database", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 532, "user_id": 2561335, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004500245565/picture?type=large", "display_name": "Aravindraj", "link": "https://stackoverflow.com/users/2561335/aravindraj"}, "edited": false, "score": 0, "creation_date": 1526877104, "post_id": 50432894, "comment_id": 87898048, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49056723/errorprogram-type-already-present-android-arch-lifecycle-livedata\">Error:Program type already present: android.arch.lifecycle.LiveData</a>"}], "answers": [{"tags": [], "owner": {"reputation": 994, "user_id": 3992260, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/imxG7.png?s=128&g=1", "display_name": "Nitin Karande", "link": "https://stackoverflow.com/users/3992260/nitin-karande"}, "is_accepted": false, "score": 0, "last_activity_date": 1526888105, "creation_date": 1526888105, "answer_id": 50444014, "question_id": 50432894, "link": "https://stackoverflow.com/questions/50432894/recycler-view-firebase-kotlin/50444014#50444014", "title": "Recycler View firebase Kotlin", "body": "<p>Try to update your gradle Firebase  dependencies version </p>\n\n<p><strong>Use</strong></p>\n\n<pre><code> implementation 'com.firebaseui:firebase-ui-database:3.3.1'\n</code></pre>\n\n<p><strong>Instead of</strong></p>\n\n<pre><code>  implementation 'com.firebaseui:firebase-ui-database:3.1.3'\n</code></pre>\n\n<p>Also update all firebase dependencies  version </p>\n\n<pre><code>11.8.0\n</code></pre>\n\n<p><strong>to</strong> </p>\n\n<pre><code>15.0.0\n</code></pre>\n\n<p>like that</p>\n\n<pre><code>    implementation 'com.google.firebase:firebase-auth:15.0.0'\n    implementation 'com.google.firebase:firebase-storage:15.0.0'\n    implementation 'com.google.firebase:firebase-database:15.0.0'\n</code></pre>\n\n<p>I hope it will work for you !!</p>\n"}], "owner": {"reputation": 189, "user_id": 8073484, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bLbtn8IgrS4/AAAAAAAAAAI/AAAAAAAABFs/08XUaewSUrc/photo.jpg?sz=128", "display_name": "Yudha Patria", "link": "https://stackoverflow.com/users/8073484/yudha-patria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1461, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526888105, "creation_date": 1526804070, "question_id": 50432894, "link": "https://stackoverflow.com/questions/50432894/recycler-view-firebase-kotlin", "title": "Recycler View firebase Kotlin", "body": "<blockquote>\n  <p>Program type already present:\n  android.arch.lifecycle.LiveData$LifecycleBoundObserver\n  Message{kind=ERROR, text=Program type already present:\n  android.arch.lifecycle.LiveData$LifecycleBoundObserver,\n  sources=[Unknown source file], tool name=Optional.of(D8)}</p>\n</blockquote>\n\n<p>I have Error  like that, please someone give me example of recyclerview with firebase-ui-database 3.1.3 because I have stack T.T</p>\n\n<p>this my HomeFragment</p>\n\n<pre><code>   package com.fish.isyania.aplikasipemesananreparasi.fragment\n\nimport android.content.Context import android.net.Uri import android.os.Bundle import android.support.v4.app.Fragment import android.support.v7.widget.LinearLayoutManager import android.support.v7.widget.RecyclerView import android.view.LayoutInflater import android.view.View import android.view.ViewGroup import com.firebase.ui.database.FirebaseRecyclerAdapter import com.firebase.ui.database.FirebaseRecyclerOptions\n\nimport com.fish.isyania.aplikasipemesananreparasi.R import com.fish.isyania.aplikasipemesananreparasi.model.Promo import com.google.firebase.database.DatabaseReference import com.google.firebase.database.FirebaseDatabase import com.squareup.picasso.Picasso import kotlinx.android.synthetic.main.diskon_row.view.* import kotlinx.android.synthetic.main.diskon_row.view.promoImage\n\n\nclass HomeFragment : Fragment() {\n    lateinit var mRecyclerView: RecyclerView\n    lateinit var mDatabase: DatabaseReference\n    lateinit var options : FirebaseRecyclerOptions&lt;Promo&gt;\n\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n        val rootView = inflater.inflate(R.layout.fragment_home, container, false)\n\n        mDatabase = FirebaseDatabase.getInstance().getReference(\"Promo\")\n        mRecyclerView = rootView.findViewById(R.id.promoRc)\n        mRecyclerView.setHasFixedSize(true)\n        mRecyclerView.setLayoutManager(LinearLayoutManager(context))\n\n        logRecyclerView()\n\n        return rootView\n    }\n\n    private fun logRecyclerView() {\n        var FirebaseRecyclerAdapter = object : FirebaseRecyclerAdapter&lt;Promo, PromoViewHolder&gt;(options){\n            override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): PromoViewHolder {\n\n                var view: View = LayoutInflater.from(context)\n                        .inflate(R.layout.diskon_row, parent, false)\n\n                return PromoViewHolder(view)\n            }\n\n            override fun onBindViewHolder(holder: PromoViewHolder, position: Int, model: Promo) {\n                Picasso.with(context).load(model!!.image).into(holder!!.itemView.rootView.promoImage)\n            }\n\n//            override fun populateViewHolder(viewHolder: PromoViewHolder?, model: Promo?, position: Int) { //                //viewHolder??.itemView.userName.setText(model.name) //                Picasso.with(context).load(model!!.image).into(viewHolder!!.itemView.rootView.promoImage) //            }\n\n        }\n        mRecyclerView.adapter = FirebaseRecyclerAdapter\n    }\n\n\n    companion object {\n        fun newInstance(): HomeFragment = HomeFragment()\n    }\n\n    class PromoViewHolder(itemView: View?) : RecyclerView.ViewHolder(itemView){\n\n    } }\n</code></pre>\n\n<p>this is my promo model</p>\n\n<pre><code>package com.fish.isyania.aplikasipemesananreparasi.model\n\nimport com.google.firebase.database.IgnoreExtraProperties\n@IgnoreExtraProperties\nclass Promo {\n\n    var name: String = \"\"\n    var image: String = \"\"\n    var diskon: Long = 0\n\n    constructor() {}\n\n    constructor(name: String, image: String, diskon: Long) {\n        this.name = name\n        this.image = image\n        this.diskon = diskon\n    }\n}\n</code></pre>\n\n<p>this is my gradle </p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 27\n    defaultConfig {\n        applicationId \"com.fish.isyania.aplikasipemesananreparasi\"\n        minSdkVersion 18\n        targetSdkVersion 27\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n        vectorDrawables.useSupportLibrary = true\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jre7:$kotlin_version\"\n\n    //noinspection GradleCompatible\n    implementation 'com.android.support:appcompat-v7:27.1.1'\n    implementation 'com.android.support:animated-vector-drawable:27.1.1'\n    implementation 'com.android.support:cardview-v7:27.1.1'\n    implementation 'com.android.support.constraint:constraint-layout:1.0.2'\n    implementation 'com.android.support:design:27.1.1'\n\n    implementation 'com.google.firebase:firebase-auth:11.8.0'\n    implementation 'com.google.firebase:firebase-storage:11.8.0'\n    implementation 'com.google.firebase:firebase-database:11.8.0'\n    implementation 'com.firebaseui:firebase-ui-database:3.1.3'\n    implementation 'com.google.android.gms:play-services-auth:11.8.0'\n\n    implementation 'com.squareup.picasso:picasso:2.5.2'\n    implementation 'com.android.support:support-vector-drawable:27.1.1'\n    implementation 'com.android.support:support-v4:27.1.1'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.1'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.1'\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n"}, {"tags": ["spring-boot", "kotlin", "kotlin-exposed"], "comments": [{"owner": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 0, "creation_date": 1526895883, "post_id": 50432282, "comment_id": 87905589, "body": "That&#39;s strange, I copy-pasted your code as a test here (<a href=\"https://github.com/JetBrains/Exposed/blob/master/spring-transaction/src/test/kotlin/org.jetbrains.exposed.spring/SpringTransactionEntityTest.kt\" rel=\"nofollow noreferrer\">github.com/JetBrains/Exposed/blob/master/spring-transaction&zwnj;&#8203;/src/&hellip;</a>) and everything goes well."}, {"owner": {"reputation": 758, "user_id": 1049899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb4d5c3e4abe52ff027491baba8b362?s=128&d=identicon&r=PG", "display_name": "zjor", "link": "https://stackoverflow.com/users/1049899/zjor"}, "reply_to_user": {"reputation": 876, "user_id": 813981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b707cdfcc7f71b6b450cef2f30a2703?s=128&d=identicon&r=PG", "display_name": "Tapac", "link": "https://stackoverflow.com/users/813981/tapac"}, "edited": false, "score": 0, "creation_date": 1526914830, "post_id": 50432282, "comment_id": 87916203, "body": "@Tapac please try to run it as a standalone app, you would need to add application.yml with the datasource"}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 1049899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb4d5c3e4abe52ff027491baba8b362?s=128&d=identicon&r=PG", "display_name": "zjor", "link": "https://stackoverflow.com/users/1049899/zjor"}, "is_accepted": false, "score": 0, "last_activity_date": 1526892924, "creation_date": 1526892924, "answer_id": 50445180, "question_id": 50432282, "link": "https://stackoverflow.com/questions/50432282/entity-is-not-persisted-in-exposed-after-transactional-method-in-spring-boot/50445180#50445180", "title": "Entity is not persisted in Exposed after @Transactional method in Spring Boot", "body": "<p>So far I have found this workaround:</p>\n\n<pre><code>@Transactional\n    open fun createOrder(customer: CustomerDAO, product: String): OrderDAO {\n        val id = OrderTable.insertAndGetId {\n            it[this.customer] = customer.id\n            it[this.product] = product\n        }\n        return OrderDAO.findById(id)!!\n    }\n</code></pre>\n\n<p>But it's a dirty mix of DSL and DAO API, any improvement appreciated.</p>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 1049899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb4d5c3e4abe52ff027491baba8b362?s=128&d=identicon&r=PG", "display_name": "zjor", "link": "https://stackoverflow.com/users/1049899/zjor"}, "is_accepted": true, "score": 0, "last_activity_date": 1529569129, "creation_date": 1529569129, "answer_id": 50963677, "question_id": 50432282, "link": "https://stackoverflow.com/questions/50432282/entity-is-not-persisted-in-exposed-after-transactional-method-in-spring-boot/50963677#50963677", "title": "Entity is not persisted in Exposed after @Transactional method in Spring Boot", "body": "<p>the problem is gone in exposed 0.10.2</p>\n"}], "owner": {"reputation": 758, "user_id": 1049899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eb4d5c3e4abe52ff027491baba8b362?s=128&d=identicon&r=PG", "display_name": "zjor", "link": "https://stackoverflow.com/users/1049899/zjor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1167, "favorite_count": 1, "accepted_answer_id": 50963677, "answer_count": 2, "score": 1, "last_activity_date": 1529569129, "creation_date": 1526797899, "question_id": 50432282, "link": "https://stackoverflow.com/questions/50432282/entity-is-not-persisted-in-exposed-after-transactional-method-in-spring-boot", "title": "Entity is not persisted in Exposed after @Transactional method in Spring Boot", "body": "<p>I have the following DAO classes</p>\n\n<pre><code>package exposed.example\n\nimport org.jetbrains.exposed.dao.EntityID\nimport org.jetbrains.exposed.dao.UUIDEntity\nimport org.jetbrains.exposed.dao.UUIDEntityClass\nimport org.jetbrains.exposed.dao.UUIDTable\nimport org.jetbrains.exposed.sql.Database\nimport org.jetbrains.exposed.sql.SchemaUtils\nimport org.jetbrains.exposed.sql.transactions.transaction\nimport java.util.*\n\nobject CustomerTable: UUIDTable(name = \"customer\") {\n    val name = varchar(name = \"name\", length = 255).uniqueIndex()\n}\n\nclass CustomerDAO(id: EntityID&lt;UUID&gt;): UUIDEntity(id) {\n    companion object : UUIDEntityClass&lt;CustomerDAO&gt;(CustomerTable)\n\n    var name by CustomerTable.name\n}\n\nobject OrderTable: UUIDTable(name = \"orders\") {\n    val customer = reference(name = \"customer_id\", foreign = CustomerTable)\n    val product = varchar(name = \"product\", length = 255)\n}\n\nclass OrderDAO(id: EntityID&lt;UUID&gt;): UUIDEntity(id) {\n    companion object : UUIDEntityClass&lt;OrderDAO&gt;(OrderTable)\n\n    var customer by OrderTable.customer\n    var product by OrderTable.product\n}\n</code></pre>\n\n<p>If I create transaction manually then entities got persisted in the database, see the code below</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    Database.connect(\"jdbc:postgresql://localhost:5432/testdb\", driver = \"org.postgresql.Driver\", user = \"test\", password = \"testpassword\")\n    transaction {\n        SchemaUtils.create(CustomerTable, OrderTable)\n        val customer = CustomerDAO.new {\n            name = \"Alice_${System.currentTimeMillis()}\"\n        }\n\n        OrderDAO.new {\n            this.customer = customer.id\n            product = \"MegaProduct\"\n        }\n    }\n}\n</code></pre>\n\n<p>But if I use the same <code>CustomerDAO</code>and <code>OrderDAO</code> in a @Transactional method in spring boot app, strange things are starting to happen.</p>\n\n<pre><code>package exposed.example\n\nimport org.jetbrains.exposed.spring.SpringTransactionManager\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\nimport org.springframework.context.annotation.Bean\nimport org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\nimport org.springframework.transaction.annotation.EnableTransactionManagement\nimport org.springframework.transaction.annotation.Transactional\nimport javax.sql.DataSource\n\n\nopen class Service {\n\n    @Transactional\n    open fun createCustomer(name: String): CustomerDAO {\n        return CustomerDAO.new {\n            this.name = name\n        }\n    }\n\n    @Transactional\n    open fun createOrder(customer: CustomerDAO, product: String): OrderDAO {\n        return OrderDAO.new {\n            this.customer = customer.id\n            this.product = product\n        }\n    }\n\n    @Transactional\n    open fun doBoth(name: String, product: String): OrderDAO {\n        return createOrder(createCustomer(name), product)\n    }\n\n}\n\n@SpringBootApplication\n@EnableTransactionManagement\nopen class App {\n\n    @Bean\n    open fun transactionManager(dataSource: DataSource) = SpringTransactionManager(dataSource)\n\n    @Bean // PersistenceExceptionTranslationPostProcessor with proxyTargetClass=false, see https://github.com/spring-projects/spring-boot/issues/1844\n    open fun persistenceExceptionTranslationPostProcessor() = PersistenceExceptionTranslationPostProcessor()\n\n    @Bean\n    open fun service() = Service()\n\n}\n\nfun main(args: Array&lt;String&gt;) {\n\n    val app = runApplication&lt;App&gt;(*args)\n    val service = app.getBean(Service::class.java)\n\n//    val customer = service.createCustomer(\"Alice1\")\n//    service.createOrder(customer, \"SpringProduct\")\n\n    service.doBoth(\"Bob\", \"SpringProduct\")\n\n}\n</code></pre>\n\n<p>Only <code>customer</code> is created but not the <code>order</code> in this case. If I uncomment two lines above then customer won't be created and the second line will cause NPE.</p>\n\n<p>So in @Transactional method the entity gets persisted only if referenced by another or queried.</p>\n\n<p>How to make it to be persisted anyway?</p>\n\n<p>Thanks in advance,</p>\n"}, {"tags": ["android", "kotlin", "runtime-permissions"], "comments": [{"owner": {"reputation": 1438, "user_id": 7857932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZSRpb.jpg?s=128&g=1", "display_name": "Ghulam Moinul Quadir", "link": "https://stackoverflow.com/users/7857932/ghulam-moinul-quadir"}, "edited": false, "score": 0, "creation_date": 1526794735, "post_id": 50431851, "comment_id": 87878296, "body": "You are calling <code>requestPermission</code> from Fragment or Activity ? Post your full Activity code."}, {"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "reply_to_user": {"reputation": 1438, "user_id": 7857932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZSRpb.jpg?s=128&g=1", "display_name": "Ghulam Moinul Quadir", "link": "https://stackoverflow.com/users/7857932/ghulam-moinul-quadir"}, "edited": false, "score": 0, "creation_date": 1526795181, "post_id": 50431851, "comment_id": 87878372, "body": "I&#39;m calling from an Activity. This is the full activity code - <a href=\"https://pastebin.com/4SSNLvxP\" rel=\"nofollow noreferrer\">pastebin.com/4SSNLvxP</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526793909, "post_id": 50431909, "comment_id": 87878145, "body": "This doesn&#39;t answer my question. See my question and see the particular scenario I&#39;m referring to."}, {"owner": {"reputation": 2486, "user_id": 3045099, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/e1SXw.jpg?s=128&g=1", "display_name": "Ragnar", "link": "https://stackoverflow.com/users/3045099/ragnar"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526795677, "post_id": 50431909, "comment_id": 87878446, "body": "Okay will try to come up with better approach for you :)"}], "tags": [], "owner": {"reputation": 2486, "user_id": 3045099, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/e1SXw.jpg?s=128&g=1", "display_name": "Ragnar", "link": "https://stackoverflow.com/users/3045099/ragnar"}, "is_accepted": false, "score": -1, "last_activity_date": 1526793644, "creation_date": 1526793644, "answer_id": 50431909, "question_id": 50431851, "link": "https://stackoverflow.com/questions/50431851/why-is-requestcode-returned-in-onrequestpermissionsresult-is-1-after-user-has-gr/50431909#50431909", "title": "Why is requestCode returned in onRequestPermissionsResult is 1 after user has granted runtime permissions?", "body": "<p>We can send(Execute) the multiple <code>startActivity</code> from <code>activity's</code>  for result and in <code>onActivityForResult</code> method will receive multiple callbacks, so to identify the callback is for which request, that can be identified with <code>requestCode</code>, In-directly we can say <code>requestCode</code> as in id of the request that help us  handle the response in <code>onActivityResult</code>  method for particular request(<code>staryActivityForResult</code>). </p>\n"}, {"comments": [{"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526794948, "post_id": 50432002, "comment_id": 87878339, "body": "I understood your code but my question is different. I&#39;m asking why the requestCode returned is 1 in onRequestPermissionsResult after the user has granted the prmissions and why the requestCode returned is not the same requestCode that we pass while asking for permission ?"}, {"owner": {"reputation": 340, "user_id": 9810130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9WDgR1vPcw/AAAAAAAAAAI/AAAAAAAABBc/s5O6fJMoKK8/photo.jpg?sz=128", "display_name": "Rushikant Pawar", "link": "https://stackoverflow.com/users/9810130/rushikant-pawar"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526795298, "post_id": 50432002, "comment_id": 87878388, "body": "@Gissipi_453, Within onRequestPermissionsResult we are supposed to cross check what user has done with the bunch of permissions... and requestCode is not for the same which you are thinking; Android could not detect &quot;if all permissions are granted or not&quot; withing sinle variable it just presents you its array... Its developers task to cross check if all permissions are GRANTED or NOT?"}, {"owner": {"reputation": 340, "user_id": 9810130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9WDgR1vPcw/AAAAAAAAAAI/AAAAAAAABBc/s5O6fJMoKK8/photo.jpg?sz=128", "display_name": "Rushikant Pawar", "link": "https://stackoverflow.com/users/9810130/rushikant-pawar"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526795387, "post_id": 50432002, "comment_id": 87878405, "body": "@Gissipi_453, Even android can not detect is it above marshmallow or not, developer need to program and handle all the possible cases with all the possible exceptions too"}, {"owner": {"reputation": 340, "user_id": 9810130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9WDgR1vPcw/AAAAAAAAAAI/AAAAAAAABBc/s5O6fJMoKK8/photo.jpg?sz=128", "display_name": "Rushikant Pawar", "link": "https://stackoverflow.com/users/9810130/rushikant-pawar"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 1, "creation_date": 1526795680, "post_id": 50432002, "comment_id": 87878447, "body": "@Gissipi_453, requestCode is just for application level for android os to verify origin of the requests, permissions is the array of all permissions requested by this requestCode, grantResults is an array of whatever user has done with the each and every single permission we have requested with this requestCode.   requestCode is nothing to check for nor it has anything we have to do with..."}, {"owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 0, "creation_date": 1526795796, "post_id": 50432002, "comment_id": 87878469, "body": "thanks. that last comment answers my question. You can put this comment as part of the answer as well."}, {"owner": {"reputation": 340, "user_id": 9810130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9WDgR1vPcw/AAAAAAAAAAI/AAAAAAAABBc/s5O6fJMoKK8/photo.jpg?sz=128", "display_name": "Rushikant Pawar", "link": "https://stackoverflow.com/users/9810130/rushikant-pawar"}, "reply_to_user": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "edited": false, "score": 1, "creation_date": 1526795984, "post_id": 50432002, "comment_id": 87878493, "body": "@Gissipi_453, Its my pleasure it helped you, in pseudo code wise too..!! Certainly i am editing again so that other users may find it helpful."}], "tags": [], "owner": {"reputation": 340, "user_id": 9810130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V9WDgR1vPcw/AAAAAAAAAAI/AAAAAAAABBc/s5O6fJMoKK8/photo.jpg?sz=128", "display_name": "Rushikant Pawar", "link": "https://stackoverflow.com/users/9810130/rushikant-pawar"}, "is_accepted": true, "score": 2, "last_activity_date": 1526796225, "last_edit_date": 1526796225, "creation_date": 1526794731, "answer_id": 50432002, "question_id": 50431851, "link": "https://stackoverflow.com/questions/50431851/why-is-requestcode-returned-in-onrequestpermissionsresult-is-1-after-user-has-gr/50432002#50432002", "title": "Why is requestCode returned in onRequestPermissionsResult is 1 after user has granted runtime permissions?", "body": "<blockquote>\n  <p>I do not know how much it will help you; as it is not in <code>kotlin</code>. But i have implemented it in many projects in following manner.. Hope it helps you to get at least some clues. </p>\n</blockquote>\n\n<p>Class declarations :</p>\n\n<pre><code>private static String[] PERMISSIONS = {Manifest.permission.READ_PHONE_STATE, Manifest.permission.PROCESS_OUTGOING_CALLS};\npublic int ALL_PERMISSIONS = 0;\npublic boolean CheckNoPermission = false;\n</code></pre>\n\n<p>Now in OnCreate :</p>\n\n<pre><code>if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.M)\n{\n    ALL_PERMISSIONS  = ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.READ_PHONE_STATE);\n    ALL_PERMISSIONS  = ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.PROCESS_OUTGOING_CALLS);\n\n    // its below marshmallow\n    // no need to ask permissions in this case\n    // do the things here directly\n\n    // START YOUR ACTIVITY HERE....\n}\nelse\n{\n    // its marshmallow or above\n    // have to ask permissions in this case\n\n    // lets check if user already allowed the permissions in previous run\n\n    for(int x = 0; x &lt; PERMISSIONS.length; x++)\n    {\n        String ThisPermission = PERMISSIONS[x];\n\n        if (checkSelfPermission(ThisPermission) != PackageManager.PERMISSION_GRANTED)\n        {\n             CheckNoPermission = true;\n             break;\n        }\n    }\n\n    // even if any permission is not granted then re-request all permissions; \n    // re-requesting all permissions will only request denied permissions only\n\n    if(CheckNoPermission)\n    {\n          // request all permissions one by one in array\n\n          ActivityCompat.requestPermissions(MainActivity.this, PERMISSIONS, ALL_PERMISSIONS);\n    }\n    else\n    {\n         // user has already granted all the permissions in previous run\n         // do the things here directly\n\n         // START YOUR ACTIVITY HERE....\n    }\n\n\n}\n</code></pre>\n\n<p>Now check permissions result outside of onCreate :</p>\n\n<pre><code>// if permissions are requested; check for user approvals :\n\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults)\n{\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if (grantResults.length == 2)\n    {\n        Boolean IsAllPermissions = true;\n\n        // Yes need to check all permissions again as user may have denied any of the permission\n\n        for(int p = 0; p &lt; grantResults.length; p++)\n        {\n            if (grantResults[p] != PackageManager.PERMISSION_GRANTED)\n            {\n                IsAllPermissions = false;\n                break;\n            }\n        }\n\n        if(IsAllPermissions)\n        {\n            // user has granted all the permissions in this run\n            // do the things here ...\n\n            // START YOUR ACTIVITY HERE....\n        }\n        else\n        {\n            // user has not granted all the permissions in this run\n            // so do what you want to do here in such case ...\n        }\n     }\n     else\n     {\n         // missmatch in number of permissions in result\n     }\n }\n</code></pre>\n\n<p>Android documentation on onRequestPermissionsResult <a href=\"https://developer.android.com/reference/android/support/v4/app/ActivityCompat.OnRequestPermissionsResultCallback\" rel=\"nofollow noreferrer\">Is explained here...</a>\nHope it helps you or someone else</p>\n\n<p>The synopsis of <code>onRequestPermissionsResult</code> :</p>\n\n<ol>\n<li><code>requestCode</code> is not for to pay attention on; its for application level</li>\n<li><code>permissions</code> is the array of all permissions requested by this requestCode</li>\n<li><code>grantResults</code> is an array of whatever user has done with the each and every single permission we have requested with this requestCode</li>\n</ol>\n\n<p>requestCode is nothing to check for nor it has anything we have to do with</p>\n"}], "owner": {"reputation": 1036, "user_id": 1724453, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/22a46f15c5c6f6df8792abc256ec4ea9?s=128&d=identicon&r=PG", "display_name": "Gissipi_453", "link": "https://stackoverflow.com/users/1724453/gissipi-453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 1, "accepted_answer_id": 50432002, "answer_count": 2, "score": 0, "last_activity_date": 1526796225, "creation_date": 1526792830, "last_edit_date": 1526793246, "question_id": 50431851, "link": "https://stackoverflow.com/questions/50431851/why-is-requestcode-returned-in-onrequestpermissionsresult-is-1-after-user-has-gr", "title": "Why is requestCode returned in onRequestPermissionsResult is 1 after user has granted runtime permissions?", "body": "<p>I have to get Runtime permissions from users. I'm passing requestCode as <strong>200</strong> in <strong>ActivityCompat.requestPermissions</strong> as you can see in code below. </p>\n\n<p>But when the permissions are granted by the user, on <strong>onRequestPermissionsResult</strong>, the <strong>requestCode</strong> returned is <strong>1</strong>.  Here the <strong>requestCode</strong> returned should be <strong>200</strong>, right ? </p>\n\n<p>Can anyone explain why the requestCode returned is <strong>1</strong> in <strong>onRequestPermissionsResult</strong> and not <strong>200</strong> (the code I'm pasisng to requestPermissions) after the user has granted/accepted the runtime permissions?</p>\n\n<pre><code>        var mRuntimePermissions = RuntimePermissions(permissions, this)\n        var gotPermissions = mRuntimePermissions.hasPermissions()\n\n        if(gotPermissions == true){\n\n            startActivity(Intent(this, MainActivity::class.java))\n        }\n        else{\n            ActivityCompat.requestPermissions(this, permissions, 200);\n        }\n\n\noverride fun onRequestPermissionsResult(requestCode: Int,\n                 permissions: Array&lt;String&gt;, grantResults: IntArray) {\n        when (requestCode) {\n\n            // check requestCode and do something\n\n            }\n\n        }\n    }\n</code></pre>\n"}]