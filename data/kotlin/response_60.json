[{"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 23, "last_activity_date": 1456959574, "creation_date": 1456959574, "answer_id": 35759914, "question_id": 35759172, "link": "https://stackoverflow.com/questions/35759172/kotlin-has-array-indexof-but-i-cannot-figure-out-how-to-do-array-indexofby-lam/35759914#35759914", "title": "Kotlin has array.indexOf but I cannot figure out how to do array.indexOfBy { lambda }", "body": "<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index-of-first.html\"><code>indexOfFirst</code></a></p>\n\n<pre><code>arrayOf(1, 2, 3).indexOfFirst { it == 2 } // returns 1\narrayOf(4, 5, 6).indexOfFirst { it &lt; 3 } // returns -1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21048, "user_id": 603516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40895ef337d0a2eb7d538f5f8b3e6d58?s=128&d=identicon&r=PG", "display_name": "Vadzim", "link": "https://stackoverflow.com/users/603516/vadzim"}, "is_accepted": false, "score": -2, "last_activity_date": 1496957371, "creation_date": 1496957371, "answer_id": 44445864, "question_id": 35759172, "link": "https://stackoverflow.com/questions/35759172/kotlin-has-array-indexof-but-i-cannot-figure-out-how-to-do-array-indexofby-lam/44445864#44445864", "title": "Kotlin has array.indexOf but I cannot figure out how to do array.indexOfBy { lambda }", "body": "<p>Alternatives that are handy in some cases:</p>\n\n<pre><code>a.indices.first { a[it] == 2 } // throws NoSuchElementException if not found\na.indices.find { a[it] == 2 }  // null if not found\n</code></pre>\n"}], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5851, "favorite_count": 2, "accepted_answer_id": 35759914, "answer_count": 2, "score": 8, "last_activity_date": 1496957371, "creation_date": 1456956653, "last_edit_date": 1495541239, "question_id": 35759172, "link": "https://stackoverflow.com/questions/35759172/kotlin-has-array-indexof-but-i-cannot-figure-out-how-to-do-array-indexofby-lam", "title": "Kotlin has array.indexOf but I cannot figure out how to do array.indexOfBy { lambda }", "body": "<p>Kotlin has <code>array.indexOf(item)</code> but I cannot figure out how to do <code>array.indexOfBy { lambda }</code>.  Does it not exist?  I can <code>find</code> an item, but I cannot get its index at the same time.  </p>\n\n<p>Am I missing a function in the stdlib?  </p>\n\n<p>I can create a function with a loop that chekcs the items and returns when it finds the target.  Like this:</p>\n\n\n\n<pre><code>fun &lt;T : Any&gt; indexOfBy(items: Array&lt;T&gt;, predicate: (T) -&gt; Boolean): Int {\n    for (i in items.indices) { // or (i in 0..items.size-1)\n        if (predicate(items[i])) {\n            return i\n        }\n    }\n    return -1\n}\n</code></pre>\n\n<p>Then I tried to make it a little more functional using <code>forEach</code>:</p>\n\n<pre><code>fun &lt;T : Any&gt; indexOfBy(items: Array&lt;T&gt;, predicate: (T) -&gt; Boolean): Int {\n    (items.indices).forEach {\n        if (predicate(items[it])) {\n            return it\n        }\n    }\n    return -1\n}\n</code></pre>\n\n<p>Or I can do something silly like this which isn't very performant:</p>\n\n<pre><code>val slowAndSilly = people.indexOf(people.find { it.name == \"David\" })\n</code></pre>\n\n<p>And what looks best is maybe as extension functions:</p>\n\n<pre><code>fun &lt;T: Any&gt; Array&lt;T&gt;.indexOfBy(predicate: (T)-&gt;Boolean): Int =\n        this.withIndex().find { predicate(it.value) }?.index ?: -1\nfun &lt;T: Any&gt; Collection&lt;T&gt;.indexOfBy(predicate: (T)-&gt;Boolean): Int =\n        this.withIndex().find { predicate(it.value) }?.index ?: -1\nfun &lt;T: Any&gt; Sequence&lt;T&gt;.indexOfBy(predicate: (T)-&gt;Boolean): Int =\n        this.withIndex().find { predicate(it.value) }?.index ?: -1\n</code></pre>\n\n<p>Is there a more elegant and idiomatic way to accomplish this?!?  I also don't see a function like this for lists, collections nor sequences.  </p>\n\n<p><em>(this question is derived from the <a href=\"https://stackoverflow.com/questions/20762219/indexof-in-kotlin-arrays/34518333?noredirect=1#comment59191006_34518333\">comment on another post</a>)</em></p>\n"}, {"tags": ["android", "properties", "kotlin", "lazy-initialization"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1456941644, "post_id": 35752575, "comment_id": 59182713, "body": "Are you looking for a lazy mutable variable that you can implicitly initialize but can also explicitly set or are you looking for a loading cache that you can reload?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1456942067, "post_id": 35752575, "comment_id": 59182970, "body": "i want to lazily initialise a property with the option to reset it if needed. Reseting being the state before the first initialisation"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456942565, "post_id": 35752575, "comment_id": 59183278, "body": "you need a custom delegate for that, it is relatively easy to write. If your scenario is often used, this can even be implemented in stdlib"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1456942711, "post_id": 35752575, "comment_id": 59183361, "body": "it is. The view initialisation in android if often done by: &quot;by lazy {find&gt;View(R.id.viewId)}&quot; but there are cases in which this binding must be reseted. And there is no way of doing that"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456950080, "post_id": 35752575, "comment_id": 59187924, "body": "What is the value for the variable of &quot;reset&quot;?  null?  You want it to lazy load it again on next access?  Look at implementation of Lazy and <code>ReadOnlyProperty</code> for ideas."}, {"owner": {"reputation": 6712, "user_id": 3212266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KFjJB.jpg?s=128&g=1", "display_name": "Juan Saravia", "link": "https://stackoverflow.com/users/3212266/juan-saravia"}, "edited": false, "score": 0, "creation_date": 1456966412, "post_id": 35752575, "comment_id": 59195415, "body": "This is not the answer that you want but I suggest you to consider using <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">Android Extensions</a> to find views. You will not need to use lazy nor other crazy logic to reset the lazy object. Also consider that Lazy perform some overheads for concurrency so use it cautiously (see LazyThreadSafetyMode.NONE for more details)"}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 33, "last_activity_date": 1456953052, "last_edit_date": 1456953052, "creation_date": 1456951260, "answer_id": 35757638, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate/35757638#35757638", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>Here is a quick version of a resettable lazy, it could be more elegant and needs double checked for thread safety, but this is basically the idea.  You need something to manage (keep track) of the lazy delegates so you can call for reset, and then things that can be managed and reset.  This wraps <code>lazy()</code> in these management classes.</p>\n\n<p><strong>Here is what your final class will look like</strong>, as an example:</p>\n\n\n\n<pre><code>class Something {\n    val lazyMgr = resettableManager()\n    val prop1: String by resettableLazy(lazyMgr) { ... }\n    val prop2: String by resettableLazy(lazyMgr) { ... }\n    val prop3: String by resettableLazy(lazyMgr) { ... }\n}\n</code></pre>\n\n<p><strong>Then to make the lazy's all go back to new values on next time they are accessed:</strong></p>\n\n<pre><code>lazyMgr.reset() // prop1, prop2, and prop3 all will do new lazy values on next access\n</code></pre>\n\n<p><strong>The implementation of the resettable lazy:</strong></p>\n\n<pre><code>class ResettableLazyManager {\n    // we synchronize to make sure the timing of a reset() call and new inits do not collide\n    val managedDelegates = LinkedList&lt;Resettable&gt;()\n\n    fun register(managed: Resettable) {\n        synchronized (managedDelegates) {\n            managedDelegates.add(managed)\n        }\n    }\n\n    fun reset() {\n        synchronized (managedDelegates) {\n            managedDelegates.forEach { it.reset() }\n            managedDelegates.clear()\n        }\n    }\n}\n\ninterface Resettable {\n    fun reset()\n}\n\nclass ResettableLazy&lt;PROPTYPE&gt;(val manager: ResettableLazyManager, val init: ()-&gt;PROPTYPE): Resettable {\n    @Volatile var lazyHolder = makeInitBlock()\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): PROPTYPE {\n        return lazyHolder.value\n    }\n\n    override fun reset() {\n        lazyHolder = makeInitBlock()\n    }\n\n    fun makeInitBlock(): Lazy&lt;PROPTYPE&gt; {\n        return lazy {\n            manager.register(this)\n            init()\n        }\n    }\n}\n\nfun &lt;PROPTYPE&gt; resettableLazy(manager: ResettableLazyManager, init: ()-&gt;PROPTYPE): ResettableLazy&lt;PROPTYPE&gt; {\n    return ResettableLazy(manager, init)\n}\n\nfun resettableManager(): ResettableLazyManager = ResettableLazyManager()\n</code></pre>\n\n<hr>\n\n<p><strong>And some unit tests to be sure:</strong></p>\n\n<pre><code>class Tester {\n   @Test fun testResetableLazy() {\n       class Something {\n           var seed = 1\n           val lazyMgr = resettableManager()\n           val x: String by resettableLazy(lazyMgr) { \"x ${seed}\" }\n           val y: String by resettableLazy(lazyMgr) { \"y ${seed}\" }\n           val z: String by resettableLazy(lazyMgr) { \"z $x $y\"}\n       }\n\n       val s = Something()\n       val x1 = s.x\n       val y1 = s.y\n       val z1 = s.z\n\n       assertEquals(x1, s.x)\n       assertEquals(y1, s.y)\n       assertEquals(z1, s.z)\n\n       s.seed++ // without reset nothing should change\n\n       assertTrue(x1 === s.x)\n       assertTrue(y1 === s.y)\n       assertTrue(z1 === s.z)\n\n       s.lazyMgr.reset()\n\n       s.seed++ // because of reset the values should change\n\n       val x2 = s.x\n       val y2 = s.y\n       val z2 = s.z\n\n       assertEquals(x2, s.x)\n       assertEquals(y2, s.y)\n       assertEquals(z2, s.z)\n\n       assertNotEquals(x1, x2)\n       assertNotEquals(y1, y2)\n       assertNotEquals(z1, z2)\n\n       s.seed++ // but without reset, nothing should change\n\n       assertTrue(x2 === s.x)\n       assertTrue(y2 === s.y)\n       assertTrue(z2 === s.z)\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 809, "user_id": 5360247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a3bd815adc338fc30cb1d4b950bc655?s=128&d=identicon&r=PG&f=1", "display_name": "Artur  Dumchev", "link": "https://stackoverflow.com/users/5360247/artur-dumchev"}, "is_accepted": false, "score": 1, "last_activity_date": 1495746841, "last_edit_date": 1495746841, "creation_date": 1495742356, "answer_id": 44188880, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate/44188880#44188880", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>I had the same task, and this is what I used:</p>\n\n<pre><code>import kotlin.properties.ReadOnlyProperty\nimport kotlin.reflect.KProperty\n\nclass SingletonLazy&lt;T : Any&gt;(val initBlock: () -&gt; T, val clazz: Class&lt;T&gt;) {\n    operator fun &lt;R&gt; provideDelegate(ref: R, prop: KProperty&lt;*&gt;): ReadOnlyProperty&lt;R, T&gt; = delegate()\n\n    @Suppress(\"UNCHECKED_CAST\")\n    private fun &lt;R&gt; delegate(): ReadOnlyProperty&lt;R, T&gt; = object : ReadOnlyProperty&lt;R, T&gt; {\n        override fun getValue(thisRef: R, property: KProperty&lt;*&gt;): T {\n            val hash = clazz.hashCode()\n            val cached = singletonsCache[hash]\n            if (cached != null &amp;&amp; cached.javaClass == clazz) return cached as T\n            return initBlock().apply { singletonsCache[hash] = this }\n        }\n    }\n}\n\nprivate val singletonsCache = HashMap&lt;Int, Any&gt;()\n\nfun &lt;T&gt; clearSingleton(clazz: Class&lt;T&gt;) : Boolean {\n    val hash = clazz.hashCode()\n    val result = singletonsCache[hash]\n    if (result?.javaClass != clazz) return false\n\n    singletonsCache.remove(hash)\n    return true\n}\n\ninline fun &lt;reified T : Any&gt; singletonLazy(noinline block: () -&gt; T): SingletonLazy&lt;T&gt;\n        = SingletonLazy(block, T::class.java)\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>val cat: Cat by singletonLazy { Cat() }\n\nfun main(args: Array&lt;String&gt;) {\n    cat\n    println(clearSingleton(Cat::class.java))\n    cat // cat will be created one more time\n    println(singletonsCache.size)\n}\n\nclass Cat {\n    init { println(\"creating cat\") }\n}\n</code></pre>\n\n<p>Of course, you may have you own caching strategies. </p>\n"}, {"comments": [{"owner": {"reputation": 813, "user_id": 920849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b87d446580566b0ab1f7ac2f715107?s=128&d=identicon&r=PG", "display_name": "Stephen Talley", "link": "https://stackoverflow.com/users/920849/stephen-talley"}, "edited": false, "score": 1, "creation_date": 1571946330, "post_id": 53921217, "comment_id": 103417322, "body": "Short and sweet, if you don&#39;t care about thread safety.  Can be even shorter if you omit the function definition, which doesn&#39;t add anything beyond calling the delegate constructor directly."}, {"owner": {"reputation": 323, "user_id": 2742899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221757ea61afead316cf5c8723ecd10e?s=128&d=identicon&r=PG&f=1", "display_name": "Harco", "link": "https://stackoverflow.com/users/2742899/harco"}, "edited": false, "score": 0, "creation_date": 1603960327, "post_id": 53921217, "comment_id": 114202330, "body": "This code is not working. I must cast property to ResetableDelegate and then call reset()"}], "tags": [], "owner": {"reputation": 1079, "user_id": 334103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb246de47e5ecdf401055766c600b9d?s=128&d=identicon&r=PG", "display_name": "jolestar", "link": "https://stackoverflow.com/users/334103/jolestar"}, "is_accepted": false, "score": 5, "last_activity_date": 1545731599, "creation_date": 1545731599, "answer_id": 53921217, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate/53921217#53921217", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>I find a convenient method:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>import java.util.concurrent.atomic.AtomicReference\nimport kotlin.reflect.KProperty\n\nfun &lt;T&gt; resetableLazy(initializer: () -&gt; T) = ResetableDelegate(initializer)\n\nclass ResetableDelegate&lt;T&gt;(private val initializer: () -&gt; T) {\n    private val lazyRef: AtomicReference&lt;Lazy&lt;T&gt;&gt; = AtomicReference(\n        lazy(\n            initializer\n        )\n    )\n\n    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T {\n        return lazyRef.get().getValue(thisRef, property)\n    }\n\n    fun reset() {\n        lazyRef.set(lazy(initializer))\n    }\n}\n</code></pre>\n\n<p>test:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.junit.Assert\nimport org.junit.Test\n\nclass ResetableLazyData {\n    var changedData = 0\n    val delegate = resetableLazy { changedData }\n    val readOnlyData by delegate\n}\n\nclass ResetableLazyTest {\n\n    @Test\n    fun testResetableLazy() {\n        val data = ResetableLazyData()\n        data.changedData = 1\n        Assert.assertEquals(data.changedData, data.readOnlyData)\n        data.changedData = 2\n        Assert.assertNotEquals(data.changedData, data.readOnlyData)\n        data.delegate.reset()\n        Assert.assertEquals(data.changedData, data.readOnlyData)\n        data.changedData = 3\n        Assert.assertNotEquals(data.changedData, data.readOnlyData)\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 12258661, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-glDURG6YkTE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIOUao9w0w2EaQWcF-xHXE-jx7xQ/photo.jpg?sz=128", "display_name": "Kofi ", "link": "https://stackoverflow.com/users/12258661/kofi"}, "is_accepted": false, "score": 0, "last_activity_date": 1587998778, "creation_date": 1587998778, "answer_id": 61461551, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate/61461551#61461551", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>If you want something very simple, extends <code>Lazy&lt;T&gt;</code> and yet efficient in few lines of code, you could use this</p>\n\n<pre><code>class MutableLazy&lt;T&gt;(private val initializer: () -&gt; T) : Lazy&lt;T&gt; {\n    private var cached: T? = null\n    override val value: T\n        get() {\n            if (cached.isNull()) {\n                cached = initializer()\n            }\n            @Suppress(\"UNCHECKED_CAST\")\n            return cached as T\n        }\n\n    fun reset() {\n        cached = null\n    }\n\n    override fun isInitialized(): Boolean = cached != null\n\n    companion object {\n        fun &lt;T&gt; resettableLazy(value: () -&gt; T) = MutableLazy(value)\n    }\n}\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>class MainActivity() {\n    val recyclerViewLazy = MutableLazy.resettable {\n        findViewById&lt;RecyclerView&gt;(R.id.recyclerView)\n    }\n    val recyclerView by recyclerViewLazy\n    // And later on\n    override onCreate(savedInstanceState: Bundle?) {\n        recyclerViewLazy.reset() /** On next get of the recyclerView, it would be updated*/\n    }\n}\n</code></pre>\n\n<p>Borrowed partly from </p>\n\n<blockquote>\n  <p><code>lazy(</code><strong><code>LazyThreadSafetyMode.NONE</code></strong><code>) {  }</code></p>\n</blockquote>\n\n<p>provided in the stlib</p>\n"}, {"tags": [], "owner": {"reputation": 578, "user_id": 1993282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f70963ce8b2a6fb1ae4bdee9af2b1e?s=128&d=identicon&r=PG", "display_name": "panwy", "link": "https://stackoverflow.com/users/1993282/panwy"}, "is_accepted": false, "score": 0, "last_activity_date": 1600915063, "creation_date": 1600915063, "answer_id": 64038764, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate/64038764#64038764", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>you can try this</p>\n<code>  \n<pre><code>fun &lt;P, T&gt; renewableLazy(initializer: (P) -&gt; T): ReadWriteProperty&lt;P, T&gt; =\n    RenewableSynchronizedLazyWithThisImpl({ t, _ -&gt;\n        initializer.invoke(t)\n    })\n\nfun &lt;P, T&gt; renewableLazy(initializer: (P, KProperty&lt;*&gt;) -&gt; T): ReadWriteProperty&lt;P, T&gt; =\n    RenewableSynchronizedLazyWithThisImpl(initializer)\n\n    class RenewableSynchronizedLazyWithThisImpl&lt;in T, V&gt;(\n        val initializer: (T, KProperty&lt;*&gt;) -&gt; V,\n        private val lock: Any = {}\n    ) : ReadWriteProperty&lt;T, V&gt; {\n\n    @Volatile\n    private var _value: Any? = null\n\n    override fun getValue(thisRef: T, property: KProperty&lt;*&gt;): V {\n        val _v1 = _value\n        if (_v1 !== null) {\n            @Suppress(&quot;UNCHECKED_CAST&quot;)\n            return _v1 as V\n        }\n\n        return synchronized(lock) {\n            val _v2 = _value\n            if (_v2 !== null) {\n                @Suppress(&quot;UNCHECKED_CAST&quot;) (_v2 as V)\n            } else {\n                val typedValue = initializer(thisRef, property)\n                _value = typedValue\n                typedValue\n            }\n        }\n    }\n\n    override fun setValue(thisRef: T, property: KProperty&lt;*&gt;, value: V) {\n        // \u4e0d\u8bba\u8bbe\u7f6e\u4f55\u503c\uff0c\u90fd\u4f1a\u88ab\u91cd\u7f6e\u4e3a\u7a7a\n        synchronized(lock) {\n            _value = null\n        }\n    }\n    }\n</code></pre>\n</code>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10375, "favorite_count": 9, "accepted_answer_id": 35757638, "answer_count": 5, "score": 35, "last_activity_date": 1600915063, "creation_date": 1456935320, "last_edit_date": 1495541438, "question_id": 35752575, "link": "https://stackoverflow.com/questions/35752575/kotlin-lazy-properties-and-values-reset-a-resettable-lazy-delegate", "title": "Kotlin lazy properties and values reset: a resettable lazy delegate", "body": "<p>So I use <code>kotlin</code> for android, and when inflating views, I tend to do the following:</p>\n\n<pre><code>private val recyclerView by lazy { find&lt;RecyclerView&gt;(R.id.recyclerView) }\n</code></pre>\n\n<p>This method will work. However, there is a case in which it will bug the app. If this is a fragment, and the fragment goes to the backstack, <code>onCreateView</code> will be called again, and the view hierarchy of the fragment will recreated. Which means, the lazy initiated recyclerView will point out to an old view no longer existent. </p>\n\n<p>A solution is like this:</p>\n\n<pre><code>private lateinit var recyclerView: RecyclerView\n</code></pre>\n\n<p>And initialise all the properties inside <code>onCreateView</code>.</p>\n\n<p>My question is, is there any way to reset lazy properties so they can be initialised again? I like the fact initialisations are all done at the top of a class, helps to keep the code organised. The specific problem is found in this question: <a href=\"https://stackoverflow.com/questions/35744969/kotlin-android-fragment-empty-recycler-view-after-back\">kotlin android fragment empty recycler view after back</a></p>\n"}, {"tags": ["java", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456933292, "post_id": 35751356, "comment_id": 59176670, "body": "I think you need &#39;path.to.application.MyApp.Companion&#39;"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1456933853, "post_id": 35751356, "comment_id": 59177161, "body": "Is the package for <code>MyApp</code> the same as <code>path.to.application</code>? In Kotlin package directives do not have to match file locations."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456934484, "post_id": 35751356, "comment_id": 59177603, "body": "The <code>mainClassName</code> is correct assuming the <code>path.to.application</code> is the correct package name.  Naming the companion or not doesn&#39;t affect the static method which is placed on <code>MyApp</code> always.  You can check this in Intellij by right clicking on the main and picking <code>create com.bla.bla...</code> for a new configuration  and seeing the class name chosen.  You don&#39;t show the package name for sure of <code>MyApp</code> and you do not show the exact error you get.  So we cannot be sure.  Please share the missing pieces of the puzzle."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456935452, "post_id": 35751356, "comment_id": 59178354, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9355690/how-to-run-compiled-class-file-in-kotlin\">how to run compiled class file in Kotlin?</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456935859, "post_id": 35751356, "comment_id": 59178722, "body": "Your question is misleading if your answer was successful.  Because you actually tried to run <code>path.to.application.MyApp.Launcher</code> but didn&#39;t say that.  Otherwise the code below would not work.  Remove <code>Launcher</code> from the <code>mainClassName</code> and also from the companion object name, it isn&#39;t needed and is what confused you."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456936096, "post_id": 35751356, "comment_id": 59178903, "body": "Please edit the question if you indeed were using a different <code>mainClassName</code>"}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1456936988, "post_id": 35751356, "comment_id": 59179583, "body": "I think there might be a detail we all are overlooking. Are we accounting for the fact that <code>Launcher</code> is not a subclass of <code>App</code>? It seems to have a problem with <code>companion</code> objects and I get an error indicating the subclass issue. It does find the <code>main()</code> function though. When <code>companion</code> is removed it works fine."}, {"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1456937330, "post_id": 35751356, "comment_id": 59179860, "body": "Updated question. Please rethink your guys&#39; downvotes if the new info is relevant. Sorry my question was misleading and I was confusing two types of errors."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456939381, "post_id": 35751356, "comment_id": 59181245, "body": "So the code didn&#39;t compile in the first place, and had an error message?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456939552, "post_id": 35751356, "comment_id": 59181342, "body": "your reference to downvotes: it might be due to it being a duplicate question more than the content, it is never clear why people downvote and best just to move along without taking it personally.  Everyone gets them."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456939596, "post_id": 35751356, "comment_id": 59181371, "body": "to use <code>launch()</code> method you would change to <code>MyApp().launch(*args)</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456939705, "post_id": 35751356, "comment_id": 59181455, "body": "I address this as well in my answer below."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456939852, "post_id": 35751356, "comment_id": 59181553, "body": "In the future if you include things like the actual error messages, package names, if it compiled, errors if not, ... then people can help you more quickly, and you might find the answer just by collecting that evidence.  Never summarize an important detail."}], "answers": [{"comments": [{"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 0, "creation_date": 1456940378, "post_id": 35752159, "comment_id": 59181865, "body": "Thank you, this is very helpful."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 3, "last_activity_date": 1456939749, "last_edit_date": 1495540229, "creation_date": 1456934344, "answer_id": 35752159, "question_id": 35751356, "link": "https://stackoverflow.com/questions/35751356/enforcing-a-static-method-compilation-inside-a-subclass-with-kotlin/35752159#35752159", "title": "Enforcing a static method compilation inside a subclass with Kotlin?", "body": "<p>A static method in a companion object is placed onto the enclosing class.  So in your case <code>MyApp</code>.  This is true regardless of you naming the companion object, and you do not need to reference the companion in any way when running the class.</p>\n\n<p>Therefore your code is correct, assuming the following is true:</p>\n\n<ol>\n<li>You have the application plugin applied in your Gradle</li>\n<li>You named your package containing the code above as <code>path.to.application</code> (you don't show package statement)</li>\n<li>You are getting a class not found error for <code>path.to.application.MyApp</code> and that matches #2, (you don't show the actual error from Gradle)</li>\n<li>You are running the correct gradle task (which task are you running?)</li>\n<li>The code is actually compiled, looking at your latest comments indicates you likely had a compiler error (<code>launch()</code> method not accessible from companion) which meant that you couldn't run something not yet compiled.</li>\n</ol>\n\n<p>What you can do to check the classname is right click on the <code>main()</code> method within Intellij IDEA and pick <code>create path.to.app...</code> menu option that is just below run/debug options and when that opens the runtime configuration dialog you can see the full classname there.  That should be the same one used in your Gradle.  If you already have a runtime configuration, just view the full classname there.  If this does not work, the problem is elsewhere and you need to provide the missing information (what Gradle task, what is the actual error, what is the package statement for the class)</p>\n\n<p>Some information is missing from the question that would help narrow this down.</p>\n\n<p>This example:</p>\n\n<pre><code>package org.test.kotlin\n\nclass MyApp {\n    companion object Launcher {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            println(\"hello\")\n        }\n    }\n}\n</code></pre>\n\n<p>Works fine when running class <code>org.test.kotlin.MyApp</code> </p>\n\n<p>So does this, without the word <code>Launcher</code>:</p>\n\n<pre><code>package org.test.kotlin\n\nclass MyApp {\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            println(\"hello\")\n        }\n    }\n}\n</code></pre>\n\n<p>And this works by accident but is not doing what you expected, but is creating a nested class and adding the static there and run using class <code>org.test.kotlin.MyApp.Launcher</code>.  If this is working, then the question isn't showing the actual main classname it is using that is failing:</p>\n\n<pre><code>package org.test.kotlin\n\nclass MyApp {\n    object Launcher {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;) {\n            println(\"hello\")\n        }\n    }\n}\n</code></pre>\n\n<p><strong>About possible compiler errors (#5 above):</strong> In your code you reference the <code>launch()</code> method which you do not show, maybe it is in the ancestor class.  But you did not create an instance of any class.  So this will fail with compiler error.  Change this to:</p>\n\n<pre><code>class MyApp: App() {\n    override val primaryView = MyView::class\n    companion object {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;): Unit {\n            MyApp().launch(*args)\n        }\n    }\n}\n</code></pre>\n\n<p>Similar tips are in these other related questions:</p>\n\n<ul>\n<li>Your question about how to run is answered in another SO question: <a href=\"https://stackoverflow.com/a/26402542/3679676\">https://stackoverflow.com/a/26402542/3679676</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/14733566/how-to-run-kotlin-class-from-the-command-line\">How to run Kotlin class from the command line?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9355690/how-to-run-compiled-class-file-in-kotlin\">how to run compiled class file in Kotlin?</a></li>\n</ul>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 35752159, "answer_count": 1, "score": -1, "last_activity_date": 1456939749, "creation_date": 1456932241, "last_edit_date": 1456937386, "question_id": 35751356, "link": "https://stackoverflow.com/questions/35751356/enforcing-a-static-method-compilation-inside-a-subclass-with-kotlin", "title": "Enforcing a static method compilation inside a subclass with Kotlin?", "body": "<p>Is there a way I can compile a <code>main()</code> method statically inside an existing class in Kotlin? I'm trying to get Gradle to build this as an application with a <code>main()</code> method, but I'm having no luck. I've been trying several workarounds too...</p>\n\n<pre><code>class MyApp: App() {\n\n    override val primaryView = MyView::class\n\n    companion object Launcher {\n        @JvmStatic\n        fun main(args: Array&lt;String&gt;): Unit {\n            launch(*args)\n        }\n    }\n}\n</code></pre>\n\n<p>In my Gradle script, I am trying to specify the <code>MyApp</code> class has a <code>main()</code> method. It errors out and can't find the class however when I call <code>run</code>. </p>\n\n<pre><code>mainClassName = 'path.to.application.MyApp'\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I apologize for the confusion but part of my issue might have to do with subclassing and not necessarily finding the <code>main()</code> class.</p>\n\n<p>The <code>main()</code> function needs access to the <code>launch()</code> method that is defined in <code>App</code>. For some reason putting the <code>companion</code> keyword disallows this :/ Can we rethink the downvotes if this information is relevant?</p>\n"}, {"tags": ["constructor", "annotations", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "edited": false, "score": 0, "creation_date": 1516877126, "post_id": 35749017, "comment_id": 83873052, "body": "beware: it looks like there&#39;s some bug in @JvmOverloads. When I use it on custom Views then Instant Run fails, however when I define the constructors myself it works"}, {"owner": {"reputation": 1219, "user_id": 5612090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f82bc0cb78887fb7cf4ad173682f65?s=128&d=identicon&r=PG&f=1", "display_name": "antygravity", "link": "https://stackoverflow.com/users/5612090/antygravity"}, "edited": false, "score": 2, "creation_date": 1565207094, "post_id": 35749017, "comment_id": 101284273, "body": "And remember to put parameter(s) without default value at the beginning  (like it is on above example). Without this @JvmOverloads doesn&#39;t work."}], "tags": [], "owner": {"reputation": 29521, "user_id": 1950649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb5YJ.jpg?s=128&g=1", "display_name": "Vladimir Mironov", "link": "https://stackoverflow.com/users/1950649/vladimir-mironov"}, "is_accepted": true, "score": 70, "last_activity_date": 1456927915, "last_edit_date": 1456927915, "creation_date": 1456926449, "answer_id": 35749017, "question_id": 35748906, "link": "https://stackoverflow.com/questions/35748906/jvmoverloads-annotation-for-class-primary-constructor/35749017#35749017", "title": "JvmOverloads annotation for class primary constructor", "body": "<p>It's not prohibited, you are just applying <code>@JvmOverloads</code> to the wrong target. The proper way to annotate primary constructor is to explicitly specify <code>constructor</code> keyword with <code>@JvmOverloads</code> before:</p>\n\n<pre><code>class Video @JvmOverloads constructor(\n    private val id: Long,\n    val ownerId: Long,\n    var title: String? = null,\n    var imgLink: String? = null,\n    var videoLink: String? = null,\n    var description: String? = null,\n    var created: Date? = null,\n    var accessKey: String? = null,\n    var duration: Long? = null,\n    var views: Long? = null,\n    var comments: Long? = null\n) : Entity\n</code></pre>\n"}], "owner": {"reputation": 912, "user_id": 1561129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4657eeb3f4a42306748960f970ba08c?s=128&d=identicon&r=PG", "display_name": "Odysseus", "link": "https://stackoverflow.com/users/1561129/odysseus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5994, "favorite_count": 3, "accepted_answer_id": 35749017, "answer_count": 1, "score": 33, "last_activity_date": 1456927915, "creation_date": 1456926117, "question_id": 35748906, "link": "https://stackoverflow.com/questions/35748906/jvmoverloads-annotation-for-class-primary-constructor", "title": "JvmOverloads annotation for class primary constructor", "body": "<p>Why is it prohibited to autogenerate many constructors visible to Java from class primary constructor with default params likes this?</p>\n\n<pre><code>@JvmOverloads\nclass Video(private val id: Long, val ownerId: Long, var title: String? = null, var imgLink: String? = null, var videoLink: String? = null,\n        var description: String? = null, var created: Date? = null, var accessKey: String? = null, var duration: Long? = null,\n        var views: Long? = null, var comments: Long? = null) : Entity\n</code></pre>\n\n<blockquote>\n  <p>This annotation is not applicable to target 'class'</p>\n</blockquote>\n"}, {"tags": ["android", "android-recyclerview", "kotlin"], "comments": [{"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1456927020, "post_id": 35744969, "comment_id": 59171572, "body": "Can you check if <code>onViewCreated()</code> is run when you go back to the fragment?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1456930648, "post_id": 35744969, "comment_id": 59174588, "body": "yes it does call it."}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456931159, "post_id": 35744969, "comment_id": 59175030, "body": "Can you try setting your adapterItems in onResume instead?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1456934644, "post_id": 35744969, "comment_id": 59177717, "body": "idk why but it looks like views are not being saved automatically. I settled null to the adapter and layout manager in ondestroyview and it works."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1456934908, "post_id": 35744969, "comment_id": 59177921, "body": "got it. the lazy initiation of the views will point to the old layout that was destroyed."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1456943379, "post_id": 35744969, "comment_id": 59183796, "body": "can you provide me a basic example?"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456943413, "post_id": 35744969, "comment_id": 59183827, "body": "What I suggest you do to avoid this, is use the kotlin android extensions plugin. It is easier to use (no more findById) and you avoid such problems. You can find the usage here: <a href=\"https://kotlinlang.org/docs/tutorials/android-plugin.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/tutorials/android-plugin.html</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456952550, "post_id": 35744969, "comment_id": 59189342, "body": "If you do try the approach of being lazy, but doing the resettable delegate when needed (as you ask for in another StackOverflow post), you can implement a resettable lazy delegate as shown here: <a href=\"http://stackoverflow.com/a/35757638/3679676\">stackoverflow.com/a/35757638/3679676</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1276, "user_id": 4594990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMg6W.jpg?s=128&g=1", "display_name": "vigilancer", "link": "https://stackoverflow.com/users/4594990/vigilancer"}, "edited": false, "score": 1, "creation_date": 1457141956, "post_id": 35758718, "comment_id": 59287216, "body": "no NullPointer because they was initialized. after coming back from stack it&#39;s the same fragment instance, only view recreated. but lazy properties, as you pointed out, was not re-inited. since they.. you know, lazy and by definition should not."}], "tags": [], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "is_accepted": true, "score": 3, "last_activity_date": 1456955119, "creation_date": 1456955119, "answer_id": 35758718, "question_id": 35744969, "link": "https://stackoverflow.com/questions/35744969/kotlin-android-fragment-empty-recycler-view-after-back/35758718#35758718", "title": "kotlin android fragment empty recycler view after back", "body": "<p>So as my properties are declared as <code>lazy { find&lt;View&gt;(R.id.xxx}</code> that basically means they will only be inflated from the layout one time. If the fragment's view somehow needs to be created again, the recyclerview property will point to an old view.</p>\n\n<p>I'm not sure how a null pointer exception in that case was not thrown. Simply change the lazy to a <code>var</code>, and re-assign it on <code>onCreateView</code>. Another thing, if we want to use the same <code>LayoutManager</code> for the new inflated recyclerview, we must clear it from the previous recyclerview <code>recyclerView.layoutManager = null</code>, otherwise, an exception will be thrown saying that that <code>layoutManager</code> is already binded to another recyclerView.</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2171, "favorite_count": 1, "accepted_answer_id": 35758718, "answer_count": 1, "score": 4, "last_activity_date": 1456955119, "creation_date": 1456915566, "last_edit_date": 1456916494, "question_id": 35744969, "link": "https://stackoverflow.com/questions/35744969/kotlin-android-fragment-empty-recycler-view-after-back", "title": "kotlin android fragment empty recycler view after back", "body": "<p>I have this android fragment:</p>\n\n<pre><code>class MainFragment: BaseFragment(){\n\nprivate val recyclerView by lazy { find&lt;RecyclerView&gt;(R.id.recyclerView) }\nprivate val fab by lazy { find&lt;FloatingActionButton&gt;(R.id.fab) }\n\nprivate val myLayoutManager by lazy { LinearLayoutManager(ctx, LinearLayoutManager.VERTICAL, false) }\nprivate val myAdapter by lazy { MainCardAdapter(ctx, ArrayList&lt;MainCardAdapterItem&gt;(), R.layout.card_main_item) }\n\noverride val fragmentLayout = R.layout.fragment_main_layout\n\nval DUMMY_TEXT = \"Lorem ipsum dolor sit amet, consectetur adipiscing\"\n\n)\n\noverride fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n    val view = super.onCreateView(inflater, container, savedInstanceState)\n    setHasOptionsMenu(true)\n    return view\n}\n\noverride fun onViewCreated(view: View?, savedInstanceState: Bundle?) {\n    Log.i(\"TAG\", \"onViewCreated\")\n    super.onViewCreated(view, savedInstanceState)\n    (act as MainActivity).run { showWidgetStars(true) }\n\n    recyclerView\n            .linkToLayoutManager(myLayoutManager)\n            .linkToAdapter(myAdapter)\n            .addItemDecorator(removedSwipeLeftDecorator)\n            .setOnItemChangedDuration(500)\n\n    myAdapter.run {\n        setAdapterItems(dummyList)\n    }\n}\n\noverride fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {\n    inflater.inflate(R.menu.activity_main_context, menu)\n    menu.findItem(R.id.action_secundary_menu).run {\n        isVisible = true\n        icon.setTintCompat(ctx, act.colorFromRes(R.color.appGreyDark))\n    }\n    super.onCreateOptionsMenu(menu, inflater)\n}\n\noverride fun onOptionsItemSelected(item: MenuItem): Boolean {\n    when(item.itemId){\n        R.id.action_secundary_menu -&gt; {\n            act.showSnackBar(\"Clicked Secondary Menu!\")\n            return true\n        }\n        else -&gt; return super.onOptionsItemSelected(item)\n    }\n  }\n}                               \n</code></pre>\n\n<p>Everything works good except after i come back to this fragment (replaced in fragment manager by another, added to the backstack). When i return, i get an error saying: <code>E/RecyclerView: No adapter attached; skipping layout</code>. My bet is that its something to do with lazy properties but i can't figure it why. The fragment shows good on first run, only when going back it shows no recycler view items and display this message</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "is_accepted": true, "score": 7, "last_activity_date": 1456883996, "creation_date": 1456883996, "answer_id": 35737062, "question_id": 35736960, "link": "https://stackoverflow.com/questions/35736960/is-it-possible-to-implement-custom-destructuring-for-non-data-class-in-kotlin/35737062#35737062", "title": "Is it possible to implement custom destructuring for non data class in Kotlin?", "body": "<p>I was able to make this work like this:</p>\n\n<pre><code>fun main(args : Array&lt;String&gt;) {\n    val person = Person(\"first\", \"last\")\n    val(param1, param2) = person\n    println(param1)\n    println(param2)\n}\n\nclass Person(val firstName: String, val lastName: String) {\n    operator fun component1() = firstName\n    operator fun component2() = lastName\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 8, "last_activity_date": 1456884058, "creation_date": 1456884058, "answer_id": 35737072, "question_id": 35736960, "link": "https://stackoverflow.com/questions/35736960/is-it-possible-to-implement-custom-destructuring-for-non-data-class-in-kotlin/35737072#35737072", "title": "Is it possible to implement custom destructuring for non data class in Kotlin?", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/multi-declarations.html\">Destructuring</a> is performed by calling functions <code>component1</code>, <code>component2</code>, <code>component3</code> etc, on the instance being destructured.</p>\n\n<p>These functions can be either member functions declared inside your class or extension functions. Also component functions must have <code>operator</code> keyword to indicate they are to satisfy a convention, namely destructuring one.</p>\n\n<p>For data classes compiler generates corresponding component function for each property of data class declared in its primary constructor.</p>\n\n<p>An example of class with custom component functions:</p>\n\n<pre><code>class Result(val e: Exception?) {\n    val hasFailed = e != null\n\n    operator fun component1(): Exception? = e\n    operator fun component2(): Boolean = hasFailed\n}\n\nval (e, hasFailed) = Result(RuntimeException())\n</code></pre>\n"}], "owner": {"reputation": 1339, "user_id": 1359988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/00c331889adb81f68b66cd75734459a6?s=128&d=identicon&r=PG", "display_name": "zjuhasz", "link": "https://stackoverflow.com/users/1359988/zjuhasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 35737062, "answer_count": 2, "score": 6, "last_activity_date": 1456884058, "creation_date": 1456883290, "question_id": 35736960, "link": "https://stackoverflow.com/questions/35736960/is-it-possible-to-implement-custom-destructuring-for-non-data-class-in-kotlin", "title": "Is it possible to implement custom destructuring for non data class in Kotlin?", "body": "<p>In Kotlin data classes can be destructured like so:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val thing = Stuff(1, \"Hi\", true)\n    val(thing1, thing2, thing3) = thing\n\n    println(thing1)\n}\n\ndata class Stuff(val thing1: Int, val thing2: String, val thing3: Boolean)\n</code></pre>\n\n<p>I could be misreading the docs, or maybe I just couldn't find an example, but I'm looking for a way to implement custom destructuring of non-data classes. Is this possible in Kotlin?</p>\n"}, {"tags": ["lambda", "kotlin", "overload-resolution"], "comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 5, "creation_date": 1456864667, "post_id": 35732510, "comment_id": 59140452, "body": "This seems to be a bug, because if I cast the lambda like <code>{ i: Int -&gt; 1.0 } as (Int) -&gt; Double</code> there&#39;s no ambiguity, but it says that cast is not needed. Also, if I extract the lambda to <code>val l = { i: Int -&gt; 1.0 }</code> and use it, again there&#39;s no ambiguity. Please search the bug tracker for this issue and if it&#39;s not there file a new one: <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issues/KT</a>"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1456865515, "post_id": 35732510, "comment_id": 59140902, "body": "Another interesting thing is if you cast the lambda as @hotkey does, the IDE will tell you that it&#39;s not necessary.  But the moment you remove it, it complains about ambiguity."}, {"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 2, "creation_date": 1456907444, "post_id": 35732510, "comment_id": 59157451, "body": "Thanks for the input! Figured that it probably was a bug. Filed a report at <a href=\"https://youtrack.jetbrains.com/issue/KT-11265\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11265</a>"}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1575571802, "post_id": 35732510, "comment_id": 104620787, "body": "This still seems to be a bug."}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 2, "creation_date": 1457342086, "post_id": 35782312, "comment_id": 59345904, "body": "That&#39;s a bummer. Overload resolution on lambda is a very usefull for numerical application. Let say I have a matrix class that work on float, double and int. With &quot;overload resolution&quot; instancing would be  <code>val ms = Mat44{i,j -&gt; 1.0}</code> , now I&#39;m forced to write <code>val ms = Mat44({i:Int,j:Int -&gt; 1.0} as (Int,Int) -&gt; Double )</code> which is just plain and silly verbose for such a trivial task.  Many thanks @erokhins for a great explanation!"}, {"owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "reply_to_user": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "edited": false, "score": 0, "creation_date": 1457359269, "post_id": 35782312, "comment_id": 59356638, "body": "As workaround you can create functions with different names: <code>fun Mat44Int2Double(f: (Int, Int) -&gt; Double) = Mat44(f)</code>. But it isn&#39;t elegant..."}, {"owner": {"reputation": 19894, "user_id": 753632, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e1eaa448ca773169f1296987a87cb67?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidDev", "link": "https://stackoverflow.com/users/753632/androiddev"}, "edited": false, "score": 0, "creation_date": 1575571948, "post_id": 35782312, "comment_id": 104620854, "body": "This same issue also applies for lambdas in constructors. You&#39;ll get an overload ambiguity as well."}], "tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": true, "score": 5, "last_activity_date": 1457036752, "creation_date": 1457036752, "answer_id": 35782312, "question_id": 35732510, "link": "https://stackoverflow.com/questions/35732510/kotlin-inline-lambda-and-overload-resolution-ambiguity/35782312#35782312", "title": "Kotlin: Inline lambda and overload resolution ambiguity", "body": "<p>Kotlin compiler resolves every expression only once.\nSo when compiler starts resolution for lambda expression, it should know types of lambda arguments.\nBecause of this compiler should choose one of methods <code>create</code> <strong><em>before</em></strong> it starts to look inside lambda.</p>\n\n<p>Example:</p>\n\n<pre><code>fun foo(f: (Int) -&gt; Int) = 1\nfun foo(f: (String) -&gt; String) = \"\"\nval bar = foo { \n   println(it) \n   5\n}\n</code></pre>\n\n<p>Here we can't choose one of functions <code>foo</code> because no one of them is  more specific that another, so we can't start resolution for lambda expression  because we don't know type for <code>it</code>.</p>\n\n<p>In your example it is in theory possible to start resolution for lambda before choosing particular function because for all potential functions types of lambda arguments are the same. But it is untrivial logic which might be hard to implement.</p>\n"}], "owner": {"reputation": 605, "user_id": 4662205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/O1t2M.jpg?s=128&g=1", "display_name": "Tomas Karlsson", "link": "https://stackoverflow.com/users/4662205/tomas-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 1, "accepted_answer_id": 35782312, "answer_count": 1, "score": 10, "last_activity_date": 1485277053, "creation_date": 1456863116, "last_edit_date": 1485277053, "question_id": 35732510, "link": "https://stackoverflow.com/questions/35732510/kotlin-inline-lambda-and-overload-resolution-ambiguity", "title": "Kotlin: Inline lambda and overload resolution ambiguity", "body": "<p>I have a simple factory pattern where the implementation is determined through overload resolution. Problem is that the Kotlin compiler complains with \"Overload resolution ambiguity..\" for the inline lambda.</p>\n\n<pre><code>class Foo(){\n    companion object Factory {\n        fun create(x: Int, f: (Int) -&gt; Double) = 2.0\n        fun create(x: Int, f: (Int) -&gt; Int) = 1\n    }\n}\n\nfun main(args:Array&lt;String&gt;){\n    val a =  Foo.create(1,::fromDouble) //OK\n    val b =  Foo.create(1,::fromInt)  //OK\n    val ambiguous =  Foo.create(1){i -&gt; 1.0}  //Overload resolution ambiguity?\n}\n\n\nfun fromDouble(int:Int)  = 1.0\nfun fromInt(int:Int)  = 1\n</code></pre>\n\n<p>How does the Kotlin compiler resolve overload resolution and why is the inline lambda considered to be ambiguous?</p>\n"}, {"tags": ["java", "android", "jvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456861186, "post_id": 35731847, "comment_id": 59138476, "body": "this is a very peculiar piece of kotlin code. Not sure how it answers the Q"}, {"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 0, "creation_date": 1456861469, "post_id": 35731847, "comment_id": 59138674, "body": "Is there a way to call <code>super</code> at different stages of initialisation? Like with the <code>init</code> mechanism ... can we call one of these other constructors at some stage during init? Or is init called after the <code>default</code> constructors have finished?"}, {"owner": {"reputation": 6210, "user_id": 650288, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/J4Qag.jpg?s=128&g=1", "display_name": "bclymer", "link": "https://stackoverflow.com/users/650288/bclymer"}, "edited": false, "score": 1, "creation_date": 1456861549, "post_id": 35731847, "comment_id": 59138719, "body": "I just realized what he was actually asking. Crap. Yes, as <code>voddan</code> stated above, you&#39;re looking for <code>init</code>. <code>init</code> is always called after the parent&#39;s <code>init</code> and you do not need to call super (actually, you can not)."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456865780, "post_id": 35731847, "comment_id": 59141056, "body": "you can adjust the A to reflect the Q, or just delete it and make a fresh one"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456865974, "post_id": 35731847, "comment_id": 59141162, "body": "@bclymer off-topic: if the code above is in your app, something is very wrong with either kotlin or the app. In any way we (community or just me) may discuss that on the slack channel."}], "tags": [], "owner": {"reputation": 6210, "user_id": 650288, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/J4Qag.jpg?s=128&g=1", "display_name": "bclymer", "link": "https://stackoverflow.com/users/650288/bclymer"}, "is_accepted": false, "score": 2, "last_activity_date": 1456866061, "last_edit_date": 1456866061, "creation_date": 1456860924, "answer_id": 35731847, "question_id": 35731725, "link": "https://stackoverflow.com/questions/35731725/kotlin-initializing-an-object/35731847#35731847", "title": "Kotlin initializing an object", "body": "<p>There are a couple ways this can be done, however this is what I've been doing in my app.</p>\n\n<pre><code>class TextView : ViewAbstractClass {\n\n    constructor(context: Context) : super(context)\n    constructor(context: Context, attributeSet: AttributeSet) : super(context, attributeSet)\n    constructor(context: Context, attributeSet: AttributeSet, defStyleAttr: Int) : super(context, attributeSet, defStyleAttr) {\n        // custom init code for this constructor.\n    }\n    constructor(context: Context, attributeSet: AttributeSet, defStyleAttr: Int, defStyleRes: Int) : super(context, attributeSet, defStyleAttr, defStyleRes)\n\n    init {\n        // Common init code\n    }\n\n}\n</code></pre>\n\n<p>Notice that you don't actually use <code>()</code> in the class signature, but instead provide all the constructors explicitly. </p>\n\n<p>You can learn more about secondary constructors here:\n<a href=\"https://kotlinlang.org/docs/reference/classes.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/classes.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 0, "creation_date": 1456861581, "post_id": 35731884, "comment_id": 59138741, "body": "How does the <code>init</code> code block relate to the <code>standard</code> constructors? Example ... can we set name after the <code>init</code> code block has run ... or can we call <code>default</code> constructors at the end of the <code>init</code> code block?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 1, "creation_date": 1456862142, "post_id": 35731884, "comment_id": 59139066, "body": "Think of the init block at the body of the default constructor. So you won&#39;t set name, you&#39;ll get name passed it."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1456861021, "creation_date": 1456861021, "answer_id": 35731884, "question_id": 35731725, "link": "https://stackoverflow.com/questions/35731725/kotlin-initializing-an-object/35731884#35731884", "title": "Kotlin initializing an object", "body": "<p><a href=\"https://kotlinlang.org/docs/reference/classes.html#constructors\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/classes.html#constructors</a></p>\n\n<pre><code>class Customer(name: String) {\n    init {\n        logger.info(\"Customer initialized with value ${name}\")\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2482, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1456866061, "creation_date": 1456860516, "question_id": 35731725, "link": "https://stackoverflow.com/questions/35731725/kotlin-initializing-an-object", "title": "Kotlin initializing an object", "body": "<p>I have a base class that I am extending, but want to inflate a view where the normal <code>Java</code> constructor would be.</p>\n\n<pre><code>class TextView(context: Context?) : ViewAbstractClass(context) \n</code></pre>\n\n<p>I am not sure how to do this in <code>Kotlin</code>. What are the constructs are there <code>Kotlin</code> that allow you to do complex initialisation of objects?</p>\n"}, {"tags": ["kotlin", "nullable", "with-statement"], "comments": [{"owner": {"reputation": 3501, "user_id": 1010964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a573f6a3ba81ebb6c39ea55e6062716?s=128&d=identicon&r=PG", "display_name": "Geralt_Encore", "link": "https://stackoverflow.com/users/1010964/geralt-encore"}, "edited": false, "score": 0, "creation_date": 1456836808, "post_id": 35723226, "comment_id": 59121402, "body": "how about wrapping it in <code>myType != null</code>? Kotlin smart casts should handle it."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 1, "creation_date": 1456840313, "post_id": 35723226, "comment_id": 59124126, "body": "Just a small remark: in Kotlin, <code>with</code> is not an operator but a function with two arguments of types <code>T</code> and <code>T.() -&gt; R</code>, so its usage is the same to usage of any other function. See <code>with</code> documentation: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin/with.html</a>"}, {"owner": {"reputation": 1851, "user_id": 4850160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HErtk.png?s=128&g=1", "display_name": "memoizr", "link": "https://stackoverflow.com/users/4850160/memoizr"}, "edited": false, "score": 0, "creation_date": 1456840821, "post_id": 35723226, "comment_id": 59124516, "body": "Thanks, I updated the title to reflect your suggestion."}], "answers": [{"comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456839027, "post_id": 35723549, "comment_id": 59123134, "body": "There are much more information about dealing with nulls in Kotlin, please add to answer. <a href=\"https://stackoverflow.com/questions/34498562/in-kotlin-what-is-the-idiomatic-way-to-deal-with-nullable-values-referencing-o\" title=\"in kotlin what is the idiomatic way to deal with nullable values referencing o\">stackoverflow.com/questions/34498562/&hellip;</a>"}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 23, "last_activity_date": 1456837295, "last_edit_date": 1456837295, "creation_date": 1456836941, "answer_id": 35723549, "question_id": 35723226, "link": "https://stackoverflow.com/questions/35723226/how-to-use-kotlins-with-expression-for-nullable-types/35723549#35723549", "title": "How to use Kotlin&#39;s `with` expression for nullable types", "body": "<p>You can convert a nullable type to a non-nullable type with the suffix <code>!!</code>:</p>\n\n<pre><code>with(myType!!) {\n    aMethodThatBelongsToMyType()\n    anotherMemberMethod()            \n}\n</code></pre>\n\n<p>If the value is indeed null, it will throw a <code>NullPointerException</code>, so this should generally be avoided.</p>\n\n<p>A better way to do this is to make the execution of the code block dependent on the value being non-null by making a null-safe call and using the <code>apply</code> extension function instead of <code>with</code>:</p>\n\n<pre><code>myType?.apply {\n    aMethodThatBelongsToMyType()\n    anotherMemberMethod()            \n}\n</code></pre>\n\n<p>Yet another option is to check if the value is non-null with an <code>if</code> statement. The compiler will insert a smart cast to a non-nullable type inside the if-block:</p>\n\n<pre><code>if (myType != null) {\n    with(myType) {\n        aMethodThatBelongsToMyType()\n        anotherMemberMethod()            \n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1456840433, "post_id": 35724743, "comment_id": 59124229, "body": "You could significantly improve the answer explaining how to do it (e.g. explain extension functions with nullable receiver)."}, {"owner": {"reputation": 1851, "user_id": 4850160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HErtk.png?s=128&g=1", "display_name": "memoizr", "link": "https://stackoverflow.com/users/4850160/memoizr"}, "edited": false, "score": 0, "creation_date": 1456840885, "post_id": 35724743, "comment_id": 59124563, "body": "Agreed, some sample code would definitely enrich this answer."}], "tags": [], "owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "is_accepted": false, "score": 4, "last_activity_date": 1548362640, "last_edit_date": 1548362640, "creation_date": 1456840304, "answer_id": 35724743, "question_id": 35723226, "link": "https://stackoverflow.com/questions/35723226/how-to-use-kotlins-with-expression-for-nullable-types/35724743#35724743", "title": "How to use Kotlin&#39;s `with` expression for nullable types", "body": "<p>You could define your own <code>with</code> function that accepts nullables, then determines whether to actually run based on whether the object is null.</p>\n\n<p>Like this:</p>\n\n<pre><code>fun &lt;T, R&gt; with(receiver: T?, block: T.() -&gt; R): R? {\n    return if(receiver == null) null else receiver.block()\n}\n</code></pre>\n\n<p>Then you can call the code the way you wanted to in the example with no issues, and the result will equal <code>null</code> if what you pass in is <code>null</code>.</p>\n\n<p>Or, if the code block should (and could) be run either way, even if <code>myType</code> is <code>null</code>, then you'd define it like this instead:</p>\n\n<pre><code>fun &lt;T, R&gt; with(receiver: T?, block: T?.() -&gt; R): R {\n    return receiver.block()\n}\n</code></pre>\n"}], "owner": {"reputation": 1851, "user_id": 4850160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HErtk.png?s=128&g=1", "display_name": "memoizr", "link": "https://stackoverflow.com/users/4850160/memoizr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2121, "favorite_count": 1, "accepted_answer_id": 35723549, "answer_count": 2, "score": 14, "last_activity_date": 1555691949, "creation_date": 1456836089, "last_edit_date": 1555691949, "question_id": 35723226, "link": "https://stackoverflow.com/questions/35723226/how-to-use-kotlins-with-expression-for-nullable-types", "title": "How to use Kotlin&#39;s `with` expression for nullable types", "body": "<p>The code below will not compile because the variable <code>myType</code> can be null. Is there a way of executing a <code>with</code> block for nullable types in Kotlin?</p>\n\n<pre><code>    val myType: MyType? = null\n    with(myType) {\n        aMethodThatBelongsToMyType()\n        anotherMemberMethod()            \n    }\n</code></pre>\n"}, {"tags": ["java", "java-8", "java-stream", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456833184, "post_id": 35721528, "comment_id": 59118991, "body": "Also, regardless of the answers below, it looks like you have a compiler bug, you should report this to <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a>, or check there for duplicates."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456834348, "post_id": 35721528, "comment_id": 59119728, "body": "This was an issue, now marked obsolete: <a href=\"https://youtrack.jetbrains.com/issue/KT-5190\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-5190</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1457706165, "post_id": 35721528, "comment_id": 59541396, "body": "note:  The bug KT-5190 is fixed in upcoming Kotlin 1.0.1 which will be released soon (it is in final stages of EAP now)"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1458222781, "post_id": 35721528, "comment_id": 59771687, "body": "This issue is now fixed in the released Kotlin 1.0.1 (previously was <a href=\"https://youtrack.jetbrains.com/issue/KT-5190\" rel=\"nofollow noreferrer\">KT-5190</a>).  No work around is needed."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 14, "last_activity_date": 1458222766, "last_edit_date": 1495542288, "creation_date": 1456833103, "answer_id": 35722167, "question_id": 35721528, "link": "https://stackoverflow.com/questions/35721528/how-can-i-call-collectcollectors-tolist-on-a-java-8-stream-in-kotlin/35722167#35722167", "title": "How can I call collect(Collectors.toList()) on a Java 8 Stream in Kotlin?", "body": "<p><strong><em>UPDATE:</strong> This issue is now fixed in Kotlin 1.0.1 (previously was <a href=\"https://youtrack.jetbrains.com/issue/KT-5190\" rel=\"noreferrer\">KT-5190</a>).  No work around is needed.</em>  </p>\n\n<hr>\n\n<h2>Workarounds</h2>\n\n<p><strong>Workaround #1:</strong></p>\n\n<p>Create this extension function, then use it simply as <code>.toList()</code> on the <code>Stream</code>:</p>\n\n\n\n<pre><code>fun &lt;T: Any&gt; Stream&lt;T&gt;.toList(): List&lt;T&gt; = this.collect(Collectors.toList&lt;T&gt;())\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>Files.list(Paths.get(file)).filter { /* filter clause */ }.toList()\n</code></pre>\n\n<p>This adds a more explicit generic parameter to the <code>Collectors.toList()</code> call, preventing the bug which occurs during inference of the generics (which are somewhat convoluted for that method return type <code>Collector&lt;T, ?, List&lt;T&gt;&gt;</code>, <em>eeeks!?!</em>).</p>\n\n<p><strong>Workaround #2:</strong></p>\n\n<p>Add the correct type parameter to your call as <code>Collectors.toList&lt;Path&gt;()</code> to avoid type inference of that parameter:</p>\n\n<pre><code>Files.list(Paths.get(file)).filter { /* filter clause */ }.collect(Collectors.toList&lt;Path&gt;())\n</code></pre>\n\n<p>But the extension function in workaround #1 is more re-usable and more concise.</p>\n\n<hr>\n\n<h2>Staying Lazy</h2>\n\n<p>Another way around the bug is to not collect the <code>Stream</code>.  You can stay lazy, and convert the <code>Stream</code> to a Kotlin <code>Sequence</code> or <code>Iterator</code>, here is an extension function for making a <code>Sequence</code>:</p>\n\n<pre><code>fun &lt;T: Any&gt; Stream&lt;T&gt;.asSequence(): Sequence&lt;T&gt; = this.iterator().asSequence()\n</code></pre>\n\n<p>Now you have <code>forEach</code> and many other functions available to you while still consuming the <code>Stream</code> lazily and only once.  Using <code>myStream.iterator()</code> is another way but may not have as much functionality as a <code>Sequence</code>.</p>\n\n<p>And of course at the end of some processing on the <code>Sequence</code> you can <code>toList()</code> or <code>toSet()</code> or use any other of the Kotlin extensions for changing collection types.</p>\n\n<p>And with this, I would create an extensions for listing files to avoid the bad API design of <code>Paths</code>, <code>Path</code>, <code>Files</code>, <code>File</code>:</p>\n\n<pre><code>fun Path.list(): Sequence&lt;Path&gt; = Files.list(this).iterator().asSequence()\n</code></pre>\n\n<p>which would at least flow nicely from left to right:</p>\n\n<pre><code>File(someDir).toPath().list().forEach { println(it) }\nPaths.get(dirname).list().forEach { println(it) }\n</code></pre>\n\n<hr>\n\n<h2>Alternatives to using Java 8 Streams:</h2>\n\n<p>We can change your code slightly to get the file list from <code>File</code> instead, and you would just use <code>toList()</code> at the end:</p>\n\n<pre><code>file.listFiles().filter { /* filter clause */ }.toList()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>file.listFiles { file, name -&gt;  /* filter clause */ }.toList()\n</code></pre>\n\n<p>Unfortunately the <code>Files.list(...)</code> that you originally used returns a <code>Stream</code> and doesn't give you the opportunity to use a traditional collection.  This change avoids that by starting with a function that returns an Array or collection.</p>\n\n<p><strong>In General:</strong></p>\n\n<p>In most cases you can avoid Java 8 streams, and use native Kotlin stdlib functions and extensions to Java collections.  Kotlin does indeed use Java collections, via compile-time readonly and mutable interfaces.  But then it adds extension functions to provide more functionality.  Therefore you have the same performance but with many more capabilities. </p>\n\n<p><strong>See Also:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/34642254/3679676\">What Java 8 Stream.collect equivalents are available in the standard Kotlin library?</a> - You will see it is more concise to use Kotlin stdlib functions and extensions.</li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/index.html\" rel=\"noreferrer\">Kotlin Collections, and Extension Functions API docs</a></li>\n<li><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/index.html\" rel=\"noreferrer\">Kotlin Sequences API docs</a></li>\n<li><a href=\"https://kotlinlang.org/docs/reference/idioms.html\" rel=\"noreferrer\">Kotlin idioms</a></li>\n</ul>\n\n<p><em>You should review the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/index.html\" rel=\"noreferrer\">API reference</a> for knowing what is available in the stdlib.</em></p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 2, "last_activity_date": 1456838400, "last_edit_date": 1456838400, "creation_date": 1456838065, "answer_id": 35723940, "question_id": 35721528, "link": "https://stackoverflow.com/questions/35721528/how-can-i-call-collectcollectors-tolist-on-a-java-8-stream-in-kotlin/35723940#35723940", "title": "How can I call collect(Collectors.toList()) on a Java 8 Stream in Kotlin?", "body": "<p>This is another work around if you are for some reason stuck on older beta version of Kotlin which requires a more brutal workaround...</p>\n\n<p><strong>Workaround #3:</strong> <em>(ugly, an old workaround ONLY for old versions of Kotlin)</em></p>\n\n<p>Add this <em>Java</em> class to your project:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class CollectFix {\n    public static &lt;T&gt; List&lt;T&gt; streamToList(Stream&lt;T&gt; s) {\n        return s.collect(Collectors.toList());\n    }\n}\n</code></pre>\n\n<p>And this one <em>Kotlin</em> extension function:</p>\n\n<pre><code>fun &lt;T: Any&gt; Stream&lt;T&gt;.toList(): List&lt;T&gt; = CollectFix.streamToList(this)\n</code></pre>\n\n<p>And then any time you have this case, use this new extension:</p>\n\n<pre><code>Files.list(Paths.get(file)).filter { /* filter clause */ }.toList()\n</code></pre>\n"}], "owner": {"reputation": 2035, "user_id": 1915099, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5e87077519e77294d3ee929a118f076d?s=128&d=identicon&r=PG", "display_name": "NCNecros", "link": "https://stackoverflow.com/users/1915099/ncnecros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4254, "favorite_count": 2, "accepted_answer_id": 35722167, "answer_count": 2, "score": 8, "last_activity_date": 1458222766, "creation_date": 1456831278, "last_edit_date": 1456836655, "question_id": 35721528, "link": "https://stackoverflow.com/questions/35721528/how-can-i-call-collectcollectors-tolist-on-a-java-8-stream-in-kotlin", "title": "How can I call collect(Collectors.toList()) on a Java 8 Stream in Kotlin?", "body": "<p>I have the some code:</p>\n\n<pre><code>directoryChooser.title = \"Select the directory\"\nval file = directoryChooser.showDialog(null)\nif (file != null) {\n    var files = Files.list(file.toPath())\n            .filter { f -&gt;\n                f.fileName.endsWith(\"zip\") &amp;&amp; f.fileName.endsWith(\"ZIP\")\n                        &amp;&amp; (f.fileName.startsWith(\"1207\") || f.fileName.startsWith(\"4407\") || f.fileName.startsWith(\"1507\") || f.fileName.startsWith(\"9007\") || f.fileName.startsWith(\"1807\"))\n            }\n    for (f in files) {\n        textArea.appendText(f.toString() + \"\\n\")\n    }\n}\n</code></pre>\n\n<p>If I call <code>collect(Collectors.toList())</code> at the end of filter, I get:</p>\n\n<pre><code>Error:(22, 13) Kotlin: [Internal Error] org.jetbrains.kotlin.codegen.CompilationException: Back-end (JVM) Internal error: no descriptor for type constructor of ('Captured(in ('Path'..'Path?'))'..'CapturedTypeConstructor(in ('Path'..'Path?'))?')\nCause: no descriptor for type constructor of ('Captured(in ('Path'..'Path?'))'..'CapturedTypeConstructor(in ('Path'..'Path?'))?')\nFile being compiled and position: (22,13) in D:/My/devel/ListOfReestrs/src/Controller.kt\nPsiElement: var files = Files.list(file.toPath())\n                    .filter { f -&gt;\n                        f.fileName.endsWith(\"zip\") &amp;&amp; f.fileName.endsWith(\"ZIP\")\n                                &amp;&amp; (f.fileName.startsWith(\"1207\") || f.fileName.startsWith(\"4407\") || f.fileName.startsWith(\"1507\") || f.fileName.startsWith(\"9007\") || f.fileName.startsWith(\"1807\"))\n                    }.collect(Collectors.toList())\nThe root cause was thrown at: JetTypeMapper.java:430\n</code></pre>\n\n<p>If I don't do this, I get the <code>f</code> with the type <code>[error: Error]</code> in my for-loop.</p>\n"}, {"tags": ["recursion", "kotlin", "tail-recursion"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456835124, "post_id": 35714683, "comment_id": 59120227, "body": "You can add a feature request to <a href=\"https://youtrack.jetbrains.com\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com</a> for the feature of &quot;mutual tail recursion&quot;, that is the best bet if you want it added to Kotlin.  Also search there first, in case it is already requested or planned."}, {"owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1457196678, "post_id": 35714683, "comment_id": 59301416, "body": "I created a Kotlin issue here: <a href=\"https://youtrack.jetbrains.com/issue/KT-11307\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11307</a>"}], "answers": [{"comments": [{"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 4, "creation_date": 1456812998, "post_id": 35715709, "comment_id": 59108037, "body": "From the same page (slightly edited): &quot;functional languages [like Kotlin] that target the JVM [tend to] implement direct [or self] tail recursion, but not mutual tail recursion.&quot; I can assure you that Haskell supports mutual tail recursion."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1456813414, "post_id": 35715709, "comment_id": 59108198, "body": "It does? Cool! I thought so, just because it is Haskell, it would. Thanks for the tip."}, {"owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "edited": false, "score": 0, "creation_date": 1456858798, "post_id": 35715709, "comment_id": 59137004, "body": "Could you clarify further? In the even/odd example, the final action of both even and off is a subroutine call, and we see that the same subroutine is called later in the call chain.  Therefore by the definition both functions are tail-recursive."}, {"owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "edited": false, "score": 0, "creation_date": 1456867005, "post_id": 35715709, "comment_id": 59141781, "body": "The relevant Wiki section is here: <a href=\"https://en.wikipedia.org/wiki/Mutual_recursion#Computer_functions\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Mutual_recursion#Computer_functions</a>"}, {"owner": {"reputation": 4798, "user_id": 460175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dUcwY.png?s=128&g=1", "display_name": "comonad", "link": "https://stackoverflow.com/users/460175/comonad"}, "edited": false, "score": 0, "creation_date": 1497863660, "post_id": 35715709, "comment_id": 76238683, "body": "&quot;Proper Tail Calls&quot; (like in Haskell) are not an optimization; they are a needed guarantee to allow infinite recursion on which the Haskell run time system depends on. (Imagine the first command tail-calls a function given via parameter, which is the second command with its parameter pointing to the third.) Inlining of a function would be an optimization."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 3, "last_activity_date": 1456822858, "last_edit_date": 1456822858, "creation_date": 1456811913, "answer_id": 35715709, "question_id": 35714683, "link": "https://stackoverflow.com/questions/35714683/kotlin-tail-recursion-for-mutually-recursive-functions/35715709#35715709", "title": "Kotlin: Tail recursion for mutually recursive functions", "body": "<p>By wikipedia <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Tail_call</a> :</p>\n\n<blockquote>\n  <p>a tail call is a subroutine call performed as the final action of a procedure. If a tail call might lead to the same subroutine being called again later in the call chain, the subroutine is said to be tail-recursive</p>\n</blockquote>\n\n<p>So your case is not a tail recursion by definition. That't what the warning says. </p>\n\n<p>Currently there is no way compiler will optimise that, mostly because it is a very rare situation. <s>But I am not sure that even Haskel optimises that away.</s></p>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "edited": false, "score": 1, "creation_date": 1497976701, "post_id": 44626117, "comment_id": 76302512, "body": "Cool, it sounds like we could support this in the JVM by writing a trampoline method which calls method references with given arguments. The <code>even</code> and <code>odd</code> functions should be modified to return method references plus the next argument. We make the first call by calling the trampoline method with a reference to the <code>even</code> function and argument <code>99999</code>."}], "tags": [], "owner": {"reputation": 4798, "user_id": 460175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dUcwY.png?s=128&g=1", "display_name": "comonad", "link": "https://stackoverflow.com/users/460175/comonad"}, "is_accepted": true, "score": 9, "last_activity_date": 1497862494, "creation_date": 1497862494, "answer_id": 44626117, "question_id": 35714683, "link": "https://stackoverflow.com/questions/35714683/kotlin-tail-recursion-for-mutually-recursive-functions/44626117#44626117", "title": "Kotlin: Tail recursion for mutually recursive functions", "body": "<p>What you are looking for are \"proper tail calls\". The JVM does not support those, so you need <a href=\"https://en.wikipedia.org/wiki/Tail_call#Through_trampolining\" rel=\"noreferrer\">trampolines</a>.</p>\n\n<p>A proper tail call cleans up the memory of its own function (parameters, local variables) before jumping (instead of calling) to the tail called function. That way the tail called function can return directly to its caller-caller-function. Infinite mutual recursion is possible. (In functional languages this is one of the most important features.)</p>\n\n<p>To allow proper tail calls in assembler you would need a command to jump (goto) to a routine/method that is referred to via pointer. OOP needs calls (stores location to jump back to on the stack and then jumps) to a routine/method that is referred to via pointer.</p>\n\n<p>You can emulate proper tail calls with the trampoline design pattern, maybe there is some support via library.\nThe trampoline is a while loop that calls a function which returns a reference to the next function which returns a reference to the next...</p>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "is_accepted": false, "score": 3, "last_activity_date": 1498122726, "creation_date": 1498122726, "answer_id": 44695092, "question_id": 35714683, "link": "https://stackoverflow.com/questions/35714683/kotlin-tail-recursion-for-mutually-recursive-functions/44695092#44695092", "title": "Kotlin: Tail recursion for mutually recursive functions", "body": "<p>Here is an implementation of @comonad's <a href=\"https://stackoverflow.com/a/44626117/1586361\">trampoline suggestion</a>. It works!</p>\n\n<pre><code>import kotlin.reflect.KFunction\n\ntypealias Result = Pair&lt;KFunction&lt;*&gt;?, Any?&gt;\ntypealias Func = KFunction&lt;Result&gt;\n\ntailrec fun trampoline(f: Func, arg: Any?): Any? {\n    val (f2,arg2) = f.call(arg)\n    @Suppress(\"UNCHECKED_CAST\")\n    return if (f2 == null) arg2 \n        else trampoline(f2 as Func, arg2)\n}\n\nfun odd(n: Int): Result =\n        if (n == 0) null to false\n        else ::even to n-1\n\nfun even(n: Int): Result =\n        if (n == 0) null to true\n        else ::odd to n-1\n\nfun main(args:Array&lt;String&gt;) {\n    System.out.println(trampoline(::even, 9999999))\n}\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1586361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59faeab81549e3e1c51648d3ccf4ca7?s=128&d=identicon&r=PG", "display_name": "denine99", "link": "https://stackoverflow.com/users/1586361/denine99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2093, "favorite_count": 1, "accepted_answer_id": 44626117, "answer_count": 3, "score": 13, "last_activity_date": 1498122726, "creation_date": 1456806534, "question_id": 35714683, "link": "https://stackoverflow.com/questions/35714683/kotlin-tail-recursion-for-mutually-recursive-functions", "title": "Kotlin: Tail recursion for mutually recursive functions", "body": "<p>Suppose I write code like this:</p>\n\n<pre><code>tailrec fun odd(n: Int): Boolean =\n        if (n == 0) false\n        else even(n - 1)\n\ntailrec fun even(n: Int): Boolean =\n        if (n == 0) true\n        else odd(n - 1)\n\nfun main(args:Array&lt;String&gt;) {\n    // :( java.lang.StackOverflowError\n    System.out.println(even(99999))\n}\n</code></pre>\n\n<p>How do I get Kotlin to optimize these mutually recursive functions, so that I can run <code>main</code> without throwing a StackOverflowError? The <code>tailrec</code> keyword works for single-function recursion, but nothing more complicated. I also see a warning that no tail-calls are found where the <code>tailrec</code> keyword is used. Perhaps this is too hard for compilers?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 1, "creation_date": 1456775693, "post_id": 35707819, "comment_id": 59093483, "body": "This code is kind of odd. Are you just trying to return a function or are you trying to do something specific with this code?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456787245, "post_id": 35707819, "comment_id": 59099857, "body": "I agree with @CaseyB ... the code doesn&#39;t really make sense, can you describe the use, and we can see what options there are for the code?"}, {"owner": {"reputation": 1009, "user_id": 3788350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b7b88433d7e24f8574fa3b48476fbae7?s=128&d=identicon&r=PG&f=1", "display_name": "BasilTomato", "link": "https://stackoverflow.com/users/3788350/basiltomato"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456833442, "post_id": 35707819, "comment_id": 59119166, "body": "@JaysonMinard: Added a bit more context. I was mostly wanting to know how you can emulate multiple parameter list"}], "answers": [{"comments": [{"owner": {"reputation": 3284, "user_id": 1098758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dca1d5f8e92ef9d9ba7a2aa7d6257d0c?s=128&d=identicon&r=PG", "display_name": "Lionel Port", "link": "https://stackoverflow.com/users/1098758/lionel-port"}, "edited": false, "score": 5, "creation_date": 1456792528, "post_id": 35708525, "comment_id": 59101795, "body": "Also note for OP, if the purpose of assigning the function to a val was to pass it to another function. It&#39;s not necessary as you can pass named functions using the syntax &quot;::writeStuff&quot;"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 24, "last_activity_date": 1456787606, "last_edit_date": 1456787606, "creation_date": 1456776076, "answer_id": 35708525, "question_id": 35707819, "link": "https://stackoverflow.com/questions/35707819/is-there-a-less-ugly-way-to-return-function-in-kotlin/35708525#35708525", "title": "Is there a less ugly way to return function in Kotlin?", "body": "<p>First, you can simplify your code using <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"noreferrer\">lambda syntax</a> with explicit parameter and inlining <code>val f</code>:</p>\n\n<pre><code>val writeStuff: (PrintWriter) -&gt; (String) -&gt; Unit = { writer -&gt; \n    { writer.println(it) } \n}\n</code></pre>\n\n<p>But since Kotlin supports <a href=\"https://kotlinlang.org/docs/reference/functions.html#local-functions\" rel=\"noreferrer\">local function</a> declarations, you can even make <code>writeStuff</code> a local <code>fun</code> instead of a <code>val</code>.</p>\n\n<p>This would lead to the following code:</p>\n\n<pre><code>fun writeStuff(writer: PrintWriter): (String) -&gt; Unit {\n    return { writer.println(it) }\n}\n</code></pre>\n\n<p>Or, using the <a href=\"https://kotlinlang.org/docs/reference/functions.html#single-expression-functions\" rel=\"noreferrer\">single expression syntax</a>,</p>\n\n<pre><code>fun writeStuff(writer: PrintWriter): (String) -&gt; Unit = { writer.println(it) }\n</code></pre>\n\n<p>The usage, however, will be the same:</p>\n\n<pre><code>PrintWriter(\"...\").use { writeStuff(it)(\"...\") }\n</code></pre>\n"}], "owner": {"reputation": 1009, "user_id": 3788350, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b7b88433d7e24f8574fa3b48476fbae7?s=128&d=identicon&r=PG&f=1", "display_name": "BasilTomato", "link": "https://stackoverflow.com/users/3788350/basiltomato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7593, "favorite_count": 1, "accepted_answer_id": 35708525, "answer_count": 1, "score": 10, "last_activity_date": 1456833332, "creation_date": 1456773722, "last_edit_date": 1456833332, "question_id": 35707819, "link": "https://stackoverflow.com/questions/35707819/is-there-a-less-ugly-way-to-return-function-in-kotlin", "title": "Is there a less ugly way to return function in Kotlin?", "body": "<p>This declaration works, but is not the most beautiful code. Is there a way to return functions less ugly? I tried <code>(s: String) -&gt; writer.println(s)</code> but this didn't work.</p>\n\n<pre><code>val writeStuff: (PrintWriter) -&gt; (String) -&gt; Unit = {\n    val writer = it\n    val f: (String) -&gt; Unit = {\n        writer.println(it)\n    }\n    f\n}\nPrintWriter(\"test\").use { writeStuff(it)(\"TEST\") }\n</code></pre>\n\n<p>EDIT: a bit more concrete example:</p>\n\n<pre><code>val writeStuff: (PrintWriter) -&gt; (String) -&gt; Unit = { writer -&gt;\n    { writer.println(it) }\n}\n\nval sendStuff: (Any) -&gt; (String) -&gt; Unit = { sender -&gt;\n    { sender.equals(it) }\n}\n\n@Test fun test1() {\n    val li = listOf(\"a\", \"b\", \"c\")\n\n    val process: List&lt;(String) -&gt; Unit&gt; = \n        listOf(writeStuff(PrintWriter(\"a\")), sendStuff(Object()))\n\n    process.map { li.map(it) }\n}\n</code></pre>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions", "anko"], "answers": [{"tags": [], "owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "is_accepted": true, "score": 10, "last_activity_date": 1456775078, "creation_date": 1456775078, "answer_id": 35708239, "question_id": 35707636, "link": "https://stackoverflow.com/questions/35707636/anko-logging-methods-cannot-be-resolved/35708239#35708239", "title": "Anko logging methods cannot be resolved", "body": "<p>In the link that you posted the class adds the <code>AnkoLogger</code> trait. Also, the gray import doesn't mean that it's unresolved. It means that it's unused. The red <code>debug</code> is unresolved. Both of these are because you haven't added the  <code>AnkoLogger</code> trait.</p>\n\n<pre><code>class SomeActivity : Activity(), AnkoLogger {\n</code></pre>\n"}], "owner": {"reputation": 1982, "user_id": 1426489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Oc1H5.jpg?s=128&g=1", "display_name": "Jezer Crespo", "link": "https://stackoverflow.com/users/1426489/jezer-crespo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 35708239, "answer_count": 1, "score": 3, "last_activity_date": 1456775078, "creation_date": 1456773206, "question_id": 35707636, "link": "https://stackoverflow.com/questions/35707636/anko-logging-methods-cannot-be-resolved", "title": "Anko logging methods cannot be resolved", "body": "<p>I'm trying to get my hands on Anko and came across this problem.\nOn its documentation it says that Anko has a  <a href=\"https://github.com/Kotlin/anko/blob/master/doc/ADVANCED.md#logging\" rel=\"nofollow noreferrer\">convenience methods for logging</a>, I tried it but Android Studio doesn't automatically import it, so I manually import it as you can see in the screenshot. However it's still being marked as unresolved. </p>\n\n<p><a href=\"https://i.stack.imgur.com/kNtp8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kNtp8.png\" alt=\"debug-statement-not-resolved\"></a></p>\n\n<p>Here's my gradle dependencies:</p>\n\n<pre><code>dependencies {\ncompile fileTree(dir: 'libs', include: ['*.jar'])\ntestCompile 'junit:junit:4.12'\ncompile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\ncompile 'com.android.support:appcompat-v7:23.1.1'\ncompile 'com.android.support:design:23.1.1'\ncompile 'com.android.support:support-v4:23.1.1'\ncompile 'com.firebase:firebase-client-android:2.5.2'\ncompile 'org.jetbrains.anko:anko-sdk15:0.8.2'\ncompile 'org.jetbrains.anko:anko-support-v4:0.8'\ncompile 'org.jetbrains.anko:anko-appcompat-v7:0.8'\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["inheritance", "constructor", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": false, "score": 7, "last_activity_date": 1456734108, "creation_date": 1456734108, "answer_id": 35694784, "question_id": 35694676, "link": "https://stackoverflow.com/questions/35694676/how-to-mix-multiple-parent-class-constructors-with-val-in-child-class/35694784#35694784", "title": "How to mix multiple parent class constructors with val in child class", "body": "<p>You can use default values instead of secondary constructors:</p>\n\n<pre><code>open class Parent(val a: A, val b: B, val c: C = CImpl(), val d: D = DImpl())\nclass Child(a: A, b: B, val e: E): Parent(a, b)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4010, "user_id": 1958659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70540a61e67f7f3042c6930bd9074b1b?s=128&d=identicon&r=PG", "display_name": "npace", "link": "https://stackoverflow.com/users/1958659/npace"}, "edited": false, "score": 0, "creation_date": 1456736609, "post_id": 35694816, "comment_id": 59067806, "body": "Actually, I can and will use both, but your answer hit the nail on the head for me. It turns out that the answer IS simple, I was just missing that (obvious in retrospect) piece of the Kotlin syntax."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 8, "last_activity_date": 1456734240, "creation_date": 1456734240, "answer_id": 35694816, "question_id": 35694676, "link": "https://stackoverflow.com/questions/35694676/how-to-mix-multiple-parent-class-constructors-with-val-in-child-class/35694816#35694816", "title": "How to mix multiple parent class constructors with val in child class", "body": "<p>If you do need to use secondary constructors, and can't use default values as suggested by @Ingo Kegel, you can initialize the <code>e</code> field just like you would do this in Java, by assigning the parameter value to the property:</p>\n\n<pre><code>class Child: Parent {\n    val e: E\n\n    constructor(a: A, b: B, c: C, d: D, e: E) : super(a, b, c, d) {\n        this.e = e\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4010, "user_id": 1958659, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/70540a61e67f7f3042c6930bd9074b1b?s=128&d=identicon&r=PG", "display_name": "npace", "link": "https://stackoverflow.com/users/1958659/npace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 35694816, "answer_count": 2, "score": 4, "last_activity_date": 1456734240, "creation_date": 1456733722, "question_id": 35694676, "link": "https://stackoverflow.com/questions/35694676/how-to-mix-multiple-parent-class-constructors-with-val-in-child-class", "title": "How to mix multiple parent class constructors with val in child class", "body": "<p>Suppose I have a class Parent that has four fields A, B, C and D, such that C and D are optionally passed or initialized with default implementations:</p>\n\n<pre><code>open class Parent(val a: A, val b: B, val c: C, val d: D) {\n    constructor(a: A, b: B, c: C): this(a, b, c, DImpl()){}\n    constructor(a: A, b: B): this(a, b, CImpl(), DImpl()){}\n}\n</code></pre>\n\n<p>I need to extend this class and add another field to the child class:</p>\n\n<pre><code>class Child: Parent {\n     val e: E // How do I initialize this?\n}\n</code></pre>\n\n<p>Passing a <code>val</code> to a secondary constructor doesn't work, and neither does using the <code>init{}</code> block.</p>\n\n<p>Passing a <code>val</code> to the primary constructor could work, but then I lose the delegation to the secondary constructors in the <code>Parent</code> class - I need to use all the <code>Parent</code> constructor with all the params or duplicate the secondary constructors, leaking implementation details to the <code>Child</code> class.</p>\n\n<p>This should be simple, am I missing something here?</p>\n"}, {"tags": ["android", "kotlin", "kotlin-null-safety"], "answers": [{"comments": [{"owner": {"reputation": 1081, "user_id": 6065032, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a986538d45d245a747ed5a53ff95bb32?s=128&d=identicon&r=PG&f=1", "display_name": "B.shruti", "link": "https://stackoverflow.com/users/6065032/b-shruti"}, "edited": false, "score": 0, "creation_date": 1562241649, "post_id": 35694341, "comment_id": 100321924, "body": "So Context of activity falls under non-nullable or nullable property?"}], "tags": [], "owner": {"reputation": 1250, "user_id": 809702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001113f9af243c8fa5d1ca8abc7720a0?s=128&d=identicon&r=PG", "display_name": "dishan", "link": "https://stackoverflow.com/users/809702/dishan"}, "is_accepted": true, "score": 22, "last_activity_date": 1456780912, "last_edit_date": 1456780912, "creation_date": 1456732235, "answer_id": 35694341, "question_id": 35691123, "link": "https://stackoverflow.com/questions/35691123/kotlin-lateinit-vs-any-null/35694341#35694341", "title": "Kotlin - lateinit VS Any? = null", "body": "<p>Here is how I see the difference according to my current knowledge in Kotlin.</p>\n\n<p>First one:</p>\n\n<pre><code>var myObject1 : Any? = null\n</code></pre>\n\n<p>Here <code>myObject1</code> is a property that is nullable. That means you can assign <code>null</code> to it.</p>\n\n<p>Second one:</p>\n\n<pre><code>lateinit var myObject2 : Any\n</code></pre>\n\n<p>Here <code>myObject2</code> is a non-null property. That means you cannot assign <code>null</code> to it. Usually if a property is non-null you have to initialize it at the declaration. But adding the keyword <code>lateinit</code> allows you to postpone the initialization. If you try to access the <code>lateinit</code> property before initializing it then you get an exception.</p>\n\n<p>In short the main difference is that <code>myObject1</code> is a nullable and <code>myObject2</code> is a non-null. The keyword <code>lateinit</code> provide you a convenience mechanism to allow a non-null property to be initialize at a later time rather than initializing it at the declaration.</p>\n\n<p>For more info check <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"noreferrer\">this</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1775, "user_id": 2688755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001400070053/picture?type=large", "display_name": "Kevin Crain", "link": "https://stackoverflow.com/users/2688755/kevin-crain"}, "is_accepted": false, "score": 5, "last_activity_date": 1456732765, "creation_date": 1456732765, "answer_id": 35694466, "question_id": 35691123, "link": "https://stackoverflow.com/questions/35691123/kotlin-lateinit-vs-any-null/35694466#35694466", "title": "Kotlin - lateinit VS Any? = null", "body": "<p><code>lateinit</code> keyword is used on a field to <code>avoid</code> null checks when referencing the field inside of your object. The keyword is mainly used when you are using dependency injection to initialize the variable, or initializing the variable in the setup method of a unit test</p>\n\n<p><code>?</code> is used on a field when the field will be initialized later in your program either by a setter or inside of a method of the object, this is to enforce you to check for null or use null safety(<code>?.</code>) when referencing the field</p>\n"}, {"tags": [], "owner": {"reputation": 1576, "user_id": 1137914, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f605a4c51d7667bd507e3a3be64c574?s=128&d=identicon&r=PG", "display_name": "Dielson Sales", "link": "https://stackoverflow.com/users/1137914/dielson-sales"}, "is_accepted": false, "score": 1, "last_activity_date": 1462647226, "creation_date": 1462647226, "answer_id": 37092478, "question_id": 35691123, "link": "https://stackoverflow.com/questions/35691123/kotlin-lateinit-vs-any-null/37092478#37092478", "title": "Kotlin - lateinit VS Any? = null", "body": "<p>If your property should not be <code>null</code>, but just isn't set after some point in the future, it is safer to declare it with a <code>lateinit</code> keyword. That guarantees that, if you access it before it is set, you get an exception explaining exactly that.</p>\n\n<p>The traditional Java way is to throw a generic <code>NullPointerException</code> with no explanation about it. If you wrote the code yourself, you might have a clue, but if someone else catches the error, it won't be clear <em>why</em> that particular variable is <code>null</code>.</p>\n"}], "owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5299, "favorite_count": 4, "accepted_answer_id": 35694341, "answer_count": 3, "score": 22, "last_activity_date": 1536245314, "creation_date": 1456713807, "last_edit_date": 1502610697, "question_id": 35691123, "link": "https://stackoverflow.com/questions/35691123/kotlin-lateinit-vs-any-null", "title": "Kotlin - lateinit VS Any? = null", "body": "<p>In Kotlin there appears to be two method of declaring a variable inside an object that can be null and instantiated after the object is created.</p>\n\n<pre><code>var myObject : Any? = null\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var lateinit myObject : Any  \n</code></pre>\n\n<p>I am confused about why the lateinit keyword is needed if we can just make the var nullable and assign it later. What are the pros and cons of each method and in what situation should each one be used?</p>\n"}, {"tags": ["java", "android", "system.reactive", "rx-java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 3, "creation_date": 1456697384, "post_id": 35688875, "comment_id": 59055560, "body": "Kotlin doesn&#39;t require the lamda parameter declaration in case of single parameter, so that&#39;s not the problem. <code>.subscribe { Log.d(...) }</code> is correct RxJava usage in Kotlin."}, {"owner": {"reputation": 3632, "user_id": 1759623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ph18b.png?s=128&g=1", "display_name": "Vesko", "link": "https://stackoverflow.com/users/1759623/vesko"}, "reply_to_user": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 0, "creation_date": 1456738538, "post_id": 35688875, "comment_id": 59068984, "body": "Good one, thanks for pointing it out! Got to look at Kotlin soon :)"}], "tags": [], "owner": {"reputation": 3632, "user_id": 1759623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ph18b.png?s=128&g=1", "display_name": "Vesko", "link": "https://stackoverflow.com/users/1759623/vesko"}, "is_accepted": false, "score": 1, "last_activity_date": 1456697276, "last_edit_date": 1456697276, "creation_date": 1456697111, "answer_id": 35688875, "question_id": 35688619, "link": "https://stackoverflow.com/questions/35688619/rxjava-emit-an-observable-every-second/35688875#35688875", "title": "RxJava - emit an observable every second", "body": "<p>In your <code>subscribe()</code> you don't consume the <code>longTimeInterval</code> object that's returned by the <code>timeInterval()</code> operator.</p>\n\n<p>Correct version:</p>\n\n<pre><code>.subscribe(longTimeInterval -&gt; {\n     Log.d(LOG_TAG, \"&amp;&amp;&amp;&amp; on timer\"); \n}\n</code></pre>\n\n<p>Also I think you don't need the <code>timeInterval()</code> operator at all. <code>Observable.interval()</code> will emit an observable every second in your case, which I guess is what you want. <code>timeInterval()</code> transforms that to an observable that holds the exact time difference between two events occur, I doubt you'll need that.</p>\n"}, {"comments": [{"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 0, "creation_date": 1456701483, "post_id": 35689059, "comment_id": 59056946, "body": "I do not need the .timeInterval() :) I removed it but still does not work :/"}, {"owner": {"reputation": 1402, "user_id": 1505493, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rvTS0.jpg?s=128&g=1", "display_name": "Karan Sharma", "link": "https://stackoverflow.com/users/1505493/karan-sharma"}, "edited": false, "score": 0, "creation_date": 1574221816, "post_id": 35689059, "comment_id": 104150616, "body": "When I use this, I get a lint error: Missing Disposable handling"}, {"owner": {"reputation": 351, "user_id": 6157920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd0de5ff08432624e090e685bd19d19?s=128&d=identicon&r=PG&f=1", "display_name": "kukroid", "link": "https://stackoverflow.com/users/6157920/kukroid"}, "reply_to_user": {"reputation": 1402, "user_id": 1505493, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/rvTS0.jpg?s=128&g=1", "display_name": "Karan Sharma", "link": "https://stackoverflow.com/users/1505493/karan-sharma"}, "edited": false, "score": 1, "creation_date": 1574822377, "post_id": 35689059, "comment_id": 104363555, "body": "@KaranSharma , you can wrap it with disposable meaning you can write something like <code>disposable = Observable.interval()....</code> and then in onDestroy of Activity use <code>disposable.dispose()</code>"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 28, "last_activity_date": 1487753780, "last_edit_date": 1487753780, "creation_date": 1456698292, "answer_id": 35689059, "question_id": 35688619, "link": "https://stackoverflow.com/questions/35688619/rxjava-emit-an-observable-every-second/35689059#35689059", "title": "RxJava - emit an observable every second", "body": "<p>Your code seems not to be called. Check whether it is executed and when. As of working with <code>Observable</code>, it is completely correct. </p>\n\n<p>For example, I put your snippet inside <code>onCreate(...)</code> of my <code>MainActivity</code>:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    Observable.interval(1000L, TimeUnit.MILLISECONDS)\n            .timeInterval()\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe { Log.d(\"tag\", \"&amp;&amp;&amp;&amp; on timer\") }\n    // ...\n}\n</code></pre>\n\n<p>And it works:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GbVU2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GbVU2.png\" alt=\"https://www.dropbox.com/s/jxkm5ol8l5idyji/observable_interval.png?dl=0\"></a></p>\n\n<p>Also, probably you don't need <code>.timeInterval()</code> because <code>Observable.interval(...)</code> itself emits sequential numbers within the specified rate, and <code>.timeInterval()</code> just transforms it to emit the time intervals elapsed between the emissions.</p>\n"}, {"tags": [], "owner": {"reputation": 8055, "user_id": 706387, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/SiTPw.jpg?s=128&g=1", "display_name": "kosiara - Bartosz Kosarzycki", "link": "https://stackoverflow.com/users/706387/kosiara-bartosz-kosarzycki"}, "is_accepted": false, "score": 1, "last_activity_date": 1533734884, "creation_date": 1533734884, "answer_id": 51747956, "question_id": 35688619, "link": "https://stackoverflow.com/questions/35688619/rxjava-emit-an-observable-every-second/51747956#51747956", "title": "RxJava - emit an observable every second", "body": "<p>In Kotlin &amp; RxJava 2.0.2 simply define an Observable Interval with an <code>initialDelay</code> 0 and <code>period</code> 1 which will emit list item each second. </p>\n\n<pre><code>val list = IntRange(0, 9).toList()\nval disposable = Observable\n    .interval(0,1, TimeUnit.SECONDS)\n    .map { i -&gt; list[i.toInt()] }\n    .take(list.size.toLong())\n    .subscribe {\n       println(\"item: $it\")\n    }\nThread.sleep(11000)\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21359, "favorite_count": 0, "accepted_answer_id": 35689059, "answer_count": 3, "score": 12, "last_activity_date": 1533734884, "creation_date": 1456695595, "last_edit_date": 1524060813, "question_id": 35688619, "link": "https://stackoverflow.com/questions/35688619/rxjava-emit-an-observable-every-second", "title": "RxJava - emit an observable every second", "body": "<p>I am making a timer in Android using RxJava. I need to make a timer in RxJava to emit an observable every second. I have tried the following but with no luck. Any thoughts on what I am doing wrong? </p>\n\n<pre><code>Observable.interval(1000L, TimeUnit.MILLISECONDS)\n          .timeInterval()\n          .observeOn(AndroidSchedulers.mainThread())\n          .subscribe({Log.d(LOG_TAG, \"&amp;&amp;&amp;&amp; on timer\") })\n</code></pre>\n"}, {"tags": ["unit-testing", "kotlin", "package-private"], "comments": [{"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "edited": false, "score": 2, "creation_date": 1456681631, "post_id": 35683991, "comment_id": 59049406, "body": "Maybe the<code>internal</code> modifier can help you here: <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/visibility-modifiers.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 7, "last_activity_date": 1456687759, "last_edit_date": 1456687759, "creation_date": 1456682859, "answer_id": 35686261, "question_id": 35683991, "link": "https://stackoverflow.com/questions/35683991/kotlin-make-an-internal-function-visible-for-unit-tests/35686261#35686261", "title": "Kotlin: Make an internal function visible for unit tests", "body": "<p>Probably the easiest solution is to place your unit tests depending on internal code in the same module with the production \u0441ode and leave only the integration tests, which use public API, in the separate module.</p>\n\n<p>This seems reasonable since the <a href=\"https://kotlinlang.org/docs/reference/visibility-modifiers.html#visibility-modifiers\" rel=\"noreferrer\"><code>internal</code> modifier</a> means exactly the visibility inside the same module.</p>\n"}, {"comments": [{"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1456748578, "post_id": 35690003, "comment_id": 59075237, "body": "Yes, that&#39;s exactly what I have tried with Intellij IDEA 15. I&#39;ll double-check I&#39;m at the latest version of both the IDE and the Kotlin plug-in and that my setup is correct."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1456748833, "post_id": 35690003, "comment_id": 59075394, "body": "Latest Intellij IDEA 15 is 15.0.4, with Kotlin plugin 1.0.0"}, {"owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "edited": false, "score": 0, "creation_date": 1457214518, "post_id": 35690003, "comment_id": 59307986, "body": "It&#39;s working correctly now and I haven&#39;t even installed any updates. I have probably done something wrong before and got confused. Cool that it&#39;s working! Thanks."}, {"owner": {"reputation": 2796, "user_id": 200841, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b3fcce8448e3ceef9419ac86f6bb3fcb?s=128&d=identicon&r=PG", "display_name": "Gregor Petrin", "link": "https://stackoverflow.com/users/200841/gregor-petrin"}, "edited": false, "score": 3, "creation_date": 1490620636, "post_id": 35690003, "comment_id": 73179110, "body": "Unless I&#39;m doing something similarly wrong it doesn&#39;t seem to work from non-Kotlin unit tests, though (Spock + Groovy in my case) :("}, {"owner": {"reputation": 3582, "user_id": 396304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbc02691a4f1d8ac2c1acb2e96134d16?s=128&d=identicon&r=PG", "display_name": "bolinfest", "link": "https://stackoverflow.com/users/396304/bolinfest"}, "edited": false, "score": 0, "creation_date": 1553290859, "post_id": 35690003, "comment_id": 97344432, "body": "&gt; The tools consider the main and test source paths as part of the same module.  Where does this magic happen? I am trying to use Buck to build and run my Kotlin tests."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 3582, "user_id": 396304, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bbc02691a4f1d8ac2c1acb2e96134d16?s=128&d=identicon&r=PG", "display_name": "bolinfest", "link": "https://stackoverflow.com/users/396304/bolinfest"}, "edited": false, "score": 0, "creation_date": 1553432260, "post_id": 35690003, "comment_id": 97374279, "body": "@bolinfest Please ask that as a new question, Buck likely is not setting them up the compilation module in the same way that Intellij, Eclipse, Maven, and Gradle do to make this work.  And Buck is a unique creature."}], "tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 23, "last_activity_date": 1456704537, "creation_date": 1456704537, "answer_id": 35690003, "question_id": 35683991, "link": "https://stackoverflow.com/questions/35683991/kotlin-make-an-internal-function-visible-for-unit-tests/35690003#35690003", "title": "Kotlin: Make an internal function visible for unit tests", "body": "<p>Classes and methods marked with <code>internal</code> access modifier will work from within current versions of Kotlin, Gradle and also Intellij for accessing those methods from test classes.  The tools consider the main and test source paths as part of the same module.  </p>\n\n<p>Did you try this already?  And if it failed you should report a bug since this was already reported, fixed and should be fine in any current version.</p>\n"}], "owner": {"reputation": 1089, "user_id": 5877791, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-dJVlfLvuCEs/AAAAAAAAAAI/AAAAAAAAA6M/_GzrjRaNGeY/photo.jpg?sz=128", "display_name": "Jan Pomik&#225;lek", "link": "https://stackoverflow.com/users/5877791/jan-pomik%c3%a1lek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15807, "favorite_count": 2, "accepted_answer_id": 35690003, "answer_count": 2, "score": 25, "last_activity_date": 1456704537, "creation_date": 1456671147, "question_id": 35683991, "link": "https://stackoverflow.com/questions/35683991/kotlin-make-an-internal-function-visible-for-unit-tests", "title": "Kotlin: Make an internal function visible for unit tests", "body": "<p>In case the tests are in a different module than the production code (which is common), what's the best way to make internal functions visible for tests?</p>\n\n<p>In Java, I would have the production code and the test in the same package and make the methods-to-be-tested package-private (plus, add a <code>@VisibleForTest</code> annotation if the only reason for having it package-private rather than private is the test). Unfortunately, Kotlin doesn't have the concept of package-private.</p>\n"}, {"tags": ["android", "android-drawable", "kotlin", "xml-drawable"], "answers": [{"tags": [], "owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "is_accepted": false, "score": 1, "last_activity_date": 1456607496, "creation_date": 1456607496, "answer_id": 35675490, "question_id": 35675191, "link": "https://stackoverflow.com/questions/35675191/shape-drawable-in-xml-same-code-programatically/35675490#35675490", "title": "Shape drawable in xml same code programatically", "body": "<p>Looks like the size can simply be set by the <code>intrinsicDIMEN</code> values like:</p>\n\n<pre><code>val circle = ShapeDrawable(OvalShape())\n\ncircle.intrinsicHeight = dpi24\ncircle.intrinsicWidth = dpi24\n\ncircle.paint.color = ContextCompat.getColor(context, resId)\ncircle.paint.style = Paint.Style.FILL;\n</code></pre>\n"}], "owner": {"reputation": 12042, "user_id": 1447885, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ecbf67a102659b602b939fa0a7b03a11?s=128&d=identicon&r=PG", "display_name": "Diolor", "link": "https://stackoverflow.com/users/1447885/diolor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456670888, "creation_date": 1456605668, "last_edit_date": 1456670888, "question_id": 35675191, "link": "https://stackoverflow.com/questions/35675191/shape-drawable-in-xml-same-code-programatically", "title": "Shape drawable in xml same code programatically", "body": "<p>I have the following xml:</p>\n\n<pre><code>&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:shape=\"oval\"&gt;\n  &lt;solid android:color=\"@color/coral_seconds\"/&gt;\n\n  &lt;size\n      android:height=\"24dp\"\n      android:width=\"24dp\"/&gt;\n&lt;/shape&gt;\n</code></pre>\n\n<p>How to make this xml as a programatical <code>Drawable</code> oject?</p>\n\n<p>I tried without success (Kotlin):</p>\n\n<pre><code>val circle = ShapeDrawable(OvalShape())\n\ncircle.paint.color = ContextCompat.getColor(context, resId)\ncircle.paint.style = Paint.Style.FILL;\n</code></pre>\n\n<p>Answer can be in Java, I don't mind.</p>\n"}, {"tags": ["kotlin", "hashmap"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456600870, "post_id": 35672058, "comment_id": 59027428, "body": "that is very inefficient, lots of temporary objects allocated"}, {"owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1456602208, "post_id": 35672058, "comment_id": 59027905, "body": "@voddan I know, that&#39;s why I&#39;ve asked this question."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1456649960, "post_id": 35672058, "comment_id": 59039043, "body": "i think that&#39;s a bug: <a href=\"https://youtrack.jetbrains.com/issue/KT-11221\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11221</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 1, "creation_date": 1456591289, "post_id": 35672157, "comment_id": 59023734, "body": "Thank you for your answer! Obviously, you&#39;d like to say <code>val copy = hashMapOf&lt;String, Int&gt;(); copy.putAll(map)</code> because putAll returns Unit. Of course it looks better than my code, however, it is a Java method, takes more than one line and doesn&#39;t work with immutable maps.. Is it really the best way?"}, {"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "reply_to_user": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 0, "creation_date": 1456592642, "post_id": 35672157, "comment_id": 59024193, "body": "I&#39;ve corrected the example. I don&#39;t see an problem with calling a Java method, but immutability is important for your case, then your method looks better."}, {"owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 0, "creation_date": 1456597639, "post_id": 35672157, "comment_id": 59026251, "body": "Calling a Java method is not a problem itself, the problem is when the primitive operation requires more than one line of code in a language that was positioned as a simple alternative for Scala. Your second variant is much better. And I think for now it is the best variant for immutables, so thank you once again! Immutability is not important for me right now, I was just interested."}], "tags": [], "owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "is_accepted": false, "score": 7, "last_activity_date": 1456593022, "last_edit_date": 1456593022, "creation_date": 1456590027, "answer_id": 35672157, "question_id": 35672058, "link": "https://stackoverflow.com/questions/35672058/what-is-the-smartest-way-to-copy-a-map-in-kotlin/35672157#35672157", "title": "What is the smartest way to copy a Map in Kotlin?", "body": "<p>Use <code>putAll</code> method:</p>\n\n<pre><code>val map = mapOf(\"1\" to 1, \"2\" to 2)\nval copy = hashMapOf&lt;String, Int&gt;()\ncopy.putAll(map)\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>val map = mapOf(\"1\" to 1, \"2\" to 2)\nval copy = map + mapOf&lt;String, Int&gt;() // preset\n</code></pre>\n\n<p>Your way also looks idiomatic to me.</p>\n"}, {"comments": [{"owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 0, "creation_date": 1456595852, "post_id": 35672586, "comment_id": 59025570, "body": "Thank you! It doesn&#39;t work for immutable maps, but is still great for mutable ones."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 2, "creation_date": 1456666769, "post_id": 35672586, "comment_id": 59043825, "body": "If you want the result to be of read-only type, declare the type manually or use a cast: <code>val copy : Map&lt;Int,String&gt; = HashMap(original)</code> or <code>val copy = HashMap(original) as Map&lt;Int, String&gt;</code>. If you do this repeatedly, write an extension function."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "edited": false, "score": 3, "creation_date": 1456670575, "post_id": 35672586, "comment_id": 59045140, "body": "@N.Kudriavtsev maps are not immutable, they are just accessed from a readonly interface.  So the example above does work if you hold it with a readonly variable in the end."}], "tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": true, "score": 82, "last_activity_date": 1504861860, "last_edit_date": 1504861860, "creation_date": 1456592202, "answer_id": 35672586, "question_id": 35672058, "link": "https://stackoverflow.com/questions/35672058/what-is-the-smartest-way-to-copy-a-map-in-kotlin/35672586#35672586", "title": "What is the smartest way to copy a Map in Kotlin?", "body": "<p>Just use the <code>HashMap</code> constructor:</p>\n\n<pre><code>val original = hashMapOf(1 to \"x\")\nval copy = HashMap(original)\n</code></pre>\n\n<hr>\n\n<p><strong>Update for Kotlin 1.1:</strong></p>\n\n<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html\" rel=\"noreferrer\">Since Kotlin 1.1</a>, the extension functions <code>Map.toMap</code> and <code>Map.toMutableMap</code> create copies.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 2, "last_activity_date": 1456649901, "creation_date": 1456649901, "answer_id": 35680550, "question_id": 35672058, "link": "https://stackoverflow.com/questions/35672058/what-is-the-smartest-way-to-copy-a-map-in-kotlin/35680550#35680550", "title": "What is the smartest way to copy a Map in Kotlin?", "body": "<p>The proposed way of doing this is:</p>\n\n<pre><code>map.toList().toMap()\n</code></pre>\n\n<p>However, the java's method is 2 to 3 times faster:</p>\n\n<pre><code>(map as LinkedHashMap).clone()\n</code></pre>\n\n<p>Anyway, if it bothers you that there is no unified way of cloning Kotlin's collections (and there is in Java!), vote here: <a href=\"https://youtrack.jetbrains.com/issue/KT-11221\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/KT-11221</a></p>\n"}, {"tags": [], "owner": {"reputation": 2852, "user_id": 3047318, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QPoQU.jpg?s=128&g=1", "display_name": "Pavel Shorokhov", "link": "https://stackoverflow.com/users/3047318/pavel-shorokhov"}, "is_accepted": false, "score": 0, "last_activity_date": 1612533991, "creation_date": 1612533991, "answer_id": 66064729, "question_id": 35672058, "link": "https://stackoverflow.com/questions/35672058/what-is-the-smartest-way-to-copy-a-map-in-kotlin/66064729#66064729", "title": "What is the smartest way to copy a Map in Kotlin?", "body": "<p>Add this extension (to convert entries to pairs)</p>\n<pre><code>val &lt;K, V&gt; Map&lt;K, V&gt;.pairs: Array&lt;Pair&lt;K, V&gt;&gt;\n    get() = entries.map { it.toPair() }.toTypedArray()\n</code></pre>\n<p>And then you can easy combine immutable maps using default Kotlin syntax.</p>\n<pre><code>val map1 = mapOf(&quot;first&quot; to 1)\nval map2 = mapOf(&quot;second&quot; to 2)\nval map3 = mapOf(\n    *map1.pairs,\n    &quot;third&quot; to 3,\n    *map2.pairs,\n)\n</code></pre>\n"}], "owner": {"reputation": 2496, "user_id": 5598194, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/aYtz9.png?s=128&g=1", "display_name": "N. Kudryavtsev", "link": "https://stackoverflow.com/users/5598194/n-kudryavtsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21140, "favorite_count": 5, "accepted_answer_id": 35672586, "answer_count": 4, "score": 47, "last_activity_date": 1612533991, "creation_date": 1456589546, "last_edit_date": 1600272582, "question_id": 35672058, "link": "https://stackoverflow.com/questions/35672058/what-is-the-smartest-way-to-copy-a-map-in-kotlin", "title": "What is the smartest way to copy a Map in Kotlin?", "body": "<p>I'd like to get a new instance of some Map with the same content but Map doesn't have a built-in <code>copy</code> method. I can do something like this:</p>\n\n<pre><code>val newInst = someMap.map { it.toPair() }.toMap()\n</code></pre>\n\n<p>But it looks rather ugly. Is there any more smarter way to do this?</p>\n"}, {"tags": ["syntax", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456584686, "post_id": 35670230, "comment_id": 59021483, "body": "same as Java&#39;s &quot;reference equality&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 3, "creation_date": 1456584440, "post_id": 35670934, "comment_id": 59021399, "body": "That doesn&#39;t really explain the OP&#39;s behavior. Why are a and b equal, but not boxedA and anotherBoxedA?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 5, "creation_date": 1456585664, "post_id": 35670934, "comment_id": 59021832, "body": "I&#39;m not 100% sure either, but AFAIK, <code>Int</code> variables (not <code>Int?</code>) are compiled to primitive Java <code>int</code> by Kotlin, so there isn&#39;t any object involved in the second comparison. But I might be wrong."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1456653160, "post_id": 35670934, "comment_id": 59039800, "body": "Edited answer to correct the information. Kotlin doesn&#39;t do any Int caching on its own, and there&#39;s nothing to cache in this case."}, {"owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456669259, "post_id": 35670934, "comment_id": 59044663, "body": "Thanks, @yole. Is there any documentation about it?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456670473, "post_id": 35670934, "comment_id": 59045106, "body": "The difference between <code>Int</code> and <code>Int?</code> is documented here: <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#representation\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/basic-types.html#representatio&zwnj;&#8203;n</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1456670895, "post_id": 35670934, "comment_id": 59045259, "body": "@JBNizet doesn&#39;t the other time this was answered on SO explain why? <a href=\"http://stackoverflow.com/a/35621335/3679676\">stackoverflow.com/a/35621335/3679676</a>"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456671467, "post_id": 35670934, "comment_id": 59045457, "body": "@JaysonMinard no, the two questions look different to me. One is about the Integer cache of Java, and the other is about the difference between Int and Int?."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456671637, "post_id": 35670934, "comment_id": 59045515, "body": "ah true.  guess people using primitives that may or may not be boxed at different times should avoid ==="}, {"owner": {"reputation": 722, "user_id": 2854660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6522a0a5d37243cfd54525b54741eacd?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTheo", "link": "https://stackoverflow.com/users/2854660/nicetheo"}, "edited": false, "score": 0, "creation_date": 1456681068, "post_id": 35670934, "comment_id": 59049165, "body": "<code>val a: Int = 1000</code> is not in range <code>-128..127</code>, but still <code>===</code> is true or compiler in some cases understand that it can be taken one value?"}], "tags": [], "owner": {"reputation": 11402, "user_id": 4600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CY4os.jpg?s=128&g=1", "display_name": "marcospereira", "link": "https://stackoverflow.com/users/4600/marcospereira"}, "is_accepted": true, "score": 44, "last_activity_date": 1456653132, "last_edit_date": 1456653132, "creation_date": 1456583285, "answer_id": 35670934, "question_id": 35670230, "link": "https://stackoverflow.com/questions/35670230/what-does-the-operator-do-in-kotlin/35670934#35670934", "title": "What does the === operator do in Kotlin?", "body": "<p>As <a href=\"https://kotlinlang.org/docs/reference/equality.html\">documented</a>, it represents <strong>Referential Equality</strong>:</p>\n\n<blockquote>\n  <p>Referential equality is checked by the === operation (and its negated counterpart !==). a === b evaluates to true if and only if a and b point to the same object.</p>\n</blockquote>\n\n<p>Referential equality means that two references point to the same object. Per instance:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val number1 = Integer(10) // create new instance\n    val number2 = Integer(10) // create new instance\n    val number3 = number1\n\n    // check if number1 and number2 are Structural equality\n    println(number1 == number2) // prints true\n\n    // check if number1 and number2 points to the same object\n    // in other words, checks for Referential equality\n    println(number1 === number2) // prints false\n\n    // check if number1 and number3 points to the same object\n    println(number1 === number3) // prints true\n}\n</code></pre>\n\n<p>Compare this to the Java code below:</p>\n\n<pre><code>public static void main(String[] args) {\n    Integer number1 = new Integer(10); // create new instance\n    Integer number2 = new Integer(10); // create new instance\n    Integer number3 = number1;\n\n    // check if number1 and number2 are Structural equality\n    System.out.println(number1.equals(number2)); // prints true\n\n    // check if number1 and number2 points to the same object\n    // in other words, checks for Referential equality\n    System.out.println(number1 == number2); // prints false\n\n    // check if number1 and number3 points to the same object\n    System.out.println(number1 == number3); // prints true\n}\n</code></pre>\n\n<h3>Your example:</h3>\n\n<p>Also, as <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#representation\">documented here</a>, \"boxing of numbers does not preserve identity\". So, <code>boxedA</code> will have one identity, but <code>anotherBoxedA</code> will have another one. Both have structural equality, but not referential equality.</p>\n\n<p>But why the second one works? Because the Kotlin <code>Int</code> type corresponds to the Java <code>int</code> type. The two variables compared in the second example are primitive type values, not objects. Therefore, for them the reference equality is exactly the same as regular equality.</p>\n"}], "owner": {"reputation": 722, "user_id": 2854660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6522a0a5d37243cfd54525b54741eacd?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTheo", "link": "https://stackoverflow.com/users/2854660/nicetheo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7210, "favorite_count": 5, "accepted_answer_id": 35670934, "answer_count": 1, "score": 28, "last_activity_date": 1601830370, "creation_date": 1456578849, "last_edit_date": 1601830370, "question_id": 35670230, "link": "https://stackoverflow.com/questions/35670230/what-does-the-operator-do-in-kotlin", "title": "What does the === operator do in Kotlin?", "body": "<p>What does operator <code>===</code> do in Kotlin? How does it work? Can we check reference equality?</p>\n<pre><code>val a: Int = 10000\nprint(a === a) // Prints 'true'\nval boxedA: Int? = a\nval anotherBoxedA: Int? = a\nprint(boxedA === anotherBoxedA) // !!!Prints 'false'!!!\n</code></pre>\n<p>but in case:</p>\n<pre><code>var a : Int = 1000\nvar b : Int = 1000\nprintln(a === b) // print 'true' !!!\n</code></pre>\n<p><code>val a: Int = 1000</code> and <code>val b: Int = 1000</code> is not in range <code>-128..127</code>, but still <code>===</code> is true or compiler in some cases understand that it can be taken one value?</p>\n"}, {"tags": ["java", "enums", "kotlin"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456557142, "post_id": 35666815, "comment_id": 59013383, "body": "Your function works if you specify the type parameter value explicitly: <code>val value = safeValueOf&lt;TestEnum&gt;(&quot;test&quot;)</code>"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 1, "creation_date": 1456557207, "post_id": 35666815, "comment_id": 59013392, "body": "Why not just use Kotlin implementation of <a href=\"https://kotlinlang.org/docs/reference/enum-classes.html#working-with-enum-constants\" rel=\"nofollow noreferrer\"><code>valueOf</code></a>?"}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456557402, "post_id": 35666815, "comment_id": 59013435, "body": "@yole thanks, that&#39;s it. Do you mind posting this as the answer?"}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "edited": false, "score": 1, "creation_date": 1456557528, "post_id": 35666815, "comment_id": 59013479, "body": "@soon I would like to extend the functionality of <code>valueOf</code> and use it with different enum types"}, {"owner": {"reputation": 2150, "user_id": 3160531, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/501097d9d9b4f54f0eff01d859f42901?s=128&d=identicon&r=PG&f=1", "display_name": "charlie_pl", "link": "https://stackoverflow.com/users/3160531/charlie-pl"}, "edited": false, "score": 1, "creation_date": 1490956473, "post_id": 35666815, "comment_id": 73353925, "body": "Can I ask how this is safeValueOf? this can still throw exceptions"}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "reply_to_user": {"reputation": 2150, "user_id": 3160531, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/501097d9d9b4f54f0eff01d859f42901?s=128&d=identicon&r=PG&f=1", "display_name": "charlie_pl", "link": "https://stackoverflow.com/users/3160531/charlie-pl"}, "edited": false, "score": 2, "creation_date": 1490964047, "post_id": 35666815, "comment_id": 73358879, "body": "@charlie_pl the question title doesn&#39;t really say anything about safety. The problem at that time was making this construct work, and, as you&#39;ve correctly noted, the <code>safeValueOf</code> is not safe here as it&#39;s just a minimal example of the issue at hand. But you can easily imagine how it can be made safe from here."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 16, "last_activity_date": 1456558234, "last_edit_date": 1456558234, "creation_date": 1456557736, "answer_id": 35666971, "question_id": 35666815, "link": "https://stackoverflow.com/questions/35666815/enum-valueof-in-kotlin/35666971#35666971", "title": "Enum.valueOf in Kotlin", "body": "<p>Your function works if you specify the type parameter value explicitly: </p>\n\n<pre><code>val value = safeValueOf&lt;TestEnum&gt;(\"test\")\n</code></pre>\n\n<p>The original code is supposed to work as well, but doesn't work because of a bug in the type inference implementation: <a href=\"https://youtrack.jetbrains.com/issue/KT-11218\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-11218</a></p>\n"}, {"tags": [], "owner": {"reputation": 1605, "user_id": 1917056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1212f481f29a04ef16c5008266e349c?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1917056/peter"}, "is_accepted": false, "score": 4, "last_activity_date": 1521522076, "creation_date": 1521522076, "answer_id": 49376637, "question_id": 35666815, "link": "https://stackoverflow.com/questions/35666815/enum-valueof-in-kotlin/49376637#49376637", "title": "Enum.valueOf in Kotlin", "body": "<blockquote>\n  <p>Since Kotlin 1.1, it's possible to access the constants in an enum class in a generic way, using the enumValues() and enumValueOf() functions:</p>\n</blockquote>\n\n<pre><code>enum class RGB { RED, GREEN, BLUE }\n\ninline fun &lt;reified T : Enum&lt;T&gt;&gt; printAllValues() {\n    print(enumValues&lt;T&gt;().joinToString { it.name })\n}\n\nprintAllValues&lt;RGB&gt;() // prints RED, GREEN, BLUE\n</code></pre>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/enum-classes.html#working-with-enum-constants\" rel=\"nofollow noreferrer\">https://kotlinlang.org/docs/reference/enum-classes.html#working-with-enum-constants</a></p>\n"}, {"tags": [], "owner": {"reputation": 22786, "user_id": 974045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad548cd357d81ab99c5d60e64e02070?s=128&d=identicon&r=PG", "display_name": "Gibolt", "link": "https://stackoverflow.com/users/974045/gibolt"}, "is_accepted": false, "score": 8, "last_activity_date": 1579306316, "creation_date": 1579306316, "answer_id": 59796367, "question_id": 35666815, "link": "https://stackoverflow.com/questions/35666815/enum-valueof-in-kotlin/59796367#59796367", "title": "Enum.valueOf in Kotlin", "body": "<h2>Crash-safe Solution</h2>\n\n<p>Create an extension and then call <code>valueOf&lt;MyEnum&gt;(\"value\")</code>. If the type is invalid, you'll get null and have to handle it</p>\n\n<pre><code>inline fun &lt;reified T : Enum&lt;T&gt;&gt; valueOf(type: String): T? {\n    return try {\n        java.lang.Enum.valueOf(T::class.java, type)\n    } catch (e: IllegalArgumentException) {\n        null\n    }\n}\n</code></pre>\n\n<p>Alternatively, you can set a default value, calling <code>valueOf&lt;MyEnum&gt;(\"value\", MyEnum.FALLBACK)</code>, and avoiding a null response. You can extend your specific enum to have the default be automatic</p>\n\n<pre><code>inline fun &lt;reified T : Enum&lt;T&gt;&gt; valueOf(type: String, default: T): T {\n    return try {\n        java.lang.Enum.valueOf(T::class.java, type)\n    } catch (e: IllegalArgumentException) {\n        default\n    }\n}\n</code></pre>\n\n<p>Or if you want both, make the second:</p>\n\n<pre><code>inline fun &lt;reified T : Enum&lt;T&gt;&gt; valueOf(type: String, default: T): T = valueOf&lt;T&gt;(type) ?: default\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 477, "user_id": 5620989, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6f223028fdd8c7be105d755b88d8be1f?s=128&d=identicon&r=PG&f=1", "display_name": "ildar ishalin", "link": "https://stackoverflow.com/users/5620989/ildar-ishalin"}, "is_accepted": false, "score": 2, "last_activity_date": 1597660542, "creation_date": 1597660542, "answer_id": 63449142, "question_id": 35666815, "link": "https://stackoverflow.com/questions/35666815/enum-valueof-in-kotlin/63449142#63449142", "title": "Enum.valueOf in Kotlin", "body": "<p>I would typically add something like this to enum:</p>\n<pre><code>companion object {\n    fun from(type: String?): TestEnum = values().find { it.name == type } ?: DEFAULT\n}\n</code></pre>\n<p>this would make a clean call</p>\n<pre><code>val value = TestEnum.from(&quot;test&quot;)\n</code></pre>\n<p>of course you can make it return null</p>\n"}], "owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17668, "favorite_count": 3, "accepted_answer_id": 35666971, "answer_count": 4, "score": 24, "last_activity_date": 1597660542, "creation_date": 1456556468, "question_id": 35666815, "link": "https://stackoverflow.com/questions/35666815/enum-valueof-in-kotlin", "title": "Enum.valueOf in Kotlin", "body": "<p>Is there a way to make something like this work in Kotlin without the reflection?</p>\n\n<pre><code>inline fun &lt;reified T : kotlin.Enum&lt;T&gt;&gt; safeValueOf(type: String?): T? {\n    return java.lang.Enum.valueOf(T::class.java, type)\n}\n</code></pre>\n\n<p>The example below doesn't compile due to:</p>\n\n<blockquote>\n  <p>Type parameter bound for T in <code>inline fun &lt;reified T : kotlin.Enum&lt;T&gt;&gt; safeValueOf(type: kotlin.String?): T?</code>\n  is not satisfied: inferred type <code>TestEnum?</code> is not a subtype of <code>kotlin.Enum&lt;TestEnum?&gt;</code></p>\n</blockquote>\n\n<pre><code>enum class TestEnum\n\nfun main() {\n    val value: TestEnum? = safeValueOf(\"test\")\n}\n</code></pre>\n"}, {"tags": ["android", "rx-java", "kotlin"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456520900, "post_id": 35661625, "comment_id": 59003715, "body": "Is Subscriber class in the method signature the same as the rx.Subscriber superclass in the inner class?  Just checking, can&#39;t tell for sure here without seeing the imports."}, {"owner": {"reputation": 189, "user_id": 3770277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11f7055d57173747dbc85f48cc82fc36?s=128&d=identicon&r=PG&f=1", "display_name": "MickaelG", "link": "https://stackoverflow.com/users/3770277/mickaelg"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1456521101, "post_id": 35661625, "comment_id": 59003811, "body": "Yes it is, I updated my code to use rx.Subscriber in both case."}, {"owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "edited": false, "score": 0, "creation_date": 1456562090, "post_id": 35661625, "comment_id": 59014548, "body": "<code>Subscriber&lt;Any&gt;</code> is the equivalent of <code>Subscriber</code> which is not compatible with any more specific notations. The solution is to introduce a generic type that is used for both <code>execute()</code> input and <code>buildUsecase</code> output."}, {"owner": {"reputation": 1254, "user_id": 3362350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e4500858d24434055bd01b57bdc734f?s=128&d=identicon&r=PG", "display_name": "Jacob Zimmerman", "link": "https://stackoverflow.com/users/3362350/jacob-zimmerman"}, "edited": false, "score": 0, "creation_date": 1456640406, "post_id": 35661625, "comment_id": 59036897, "body": "When you tried &quot;out&quot; and &quot;in&quot;, you were doing it on <code>Subscriber&lt;Any&gt;</code>, right? I would think that would fix it."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 3770277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11f7055d57173747dbc85f48cc82fc36?s=128&d=identicon&r=PG&f=1", "display_name": "MickaelG", "link": "https://stackoverflow.com/users/3770277/mickaelg"}, "is_accepted": false, "score": 0, "last_activity_date": 1456663504, "creation_date": 1456663504, "answer_id": 35682692, "question_id": 35661625, "link": "https://stackoverflow.com/questions/35661625/kotlin-how-to-inherit-from-rxjava-subscriber/35682692#35682692", "title": "Kotlin: How to inherit from RxJava Subscriber", "body": "<p>I found the solution that is pretty simple actually: my NewsListSubscriber class has to extends from rx.Subscriber&lt;Any&gt; instead of rx.Subscriber&lt;MyWantedClass&gt;. It means I need to cast the received objects to the wanted type.</p>\n\n<pre><code>private inner class NewsListSubscriber : DefaultSubscriber&lt;Any&gt;() {\n\n    override fun onCompleted() {}\n\n    override fun onError(e: Throwable) {}\n\n    override fun onNext(t: Any?) {\n        val newsList = t as List&lt;News&gt;\n        ...\n    }\n}\n</code></pre>\n\n<p>In Java the cast is done in background but in Kotlin we need to do it ourself.</p>\n\n<p>I also removed all \"in\" or \"out\" keywords in my UseCase class.</p>\n"}, {"tags": [], "owner": {"reputation": 1115, "user_id": 3228694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dd02646c6efd433af7aae632cfc7cc06?s=128&d=identicon&r=PG", "display_name": "JimVanB", "link": "https://stackoverflow.com/users/3228694/jimvanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1471634304, "creation_date": 1471634304, "answer_id": 39046297, "question_id": 35661625, "link": "https://stackoverflow.com/questions/35661625/kotlin-how-to-inherit-from-rxjava-subscriber/39046297#39046297", "title": "Kotlin: How to inherit from RxJava Subscriber", "body": "<p>There is actually a better way to solve this problem. I ran into the same issue and a type cast inside every derived subscriber class was not an option. </p>\n\n<p>Just update the abstract UseCase class with an generic type parameter.</p>\n\n<pre><code>abstract class UseCase&lt;T&gt;(private val threadExecutor: IThreadExecutor,\n                   private val postExecutionThread: IPostExecutionThread) {\n\n    private var subscription = Subscriptions.empty()\n\n    fun execute(UseCaseSubscriber: rx.Subscriber&lt;T&gt;) {\n        subscription = buildUseCaseObservable()\n                .subscribeOn(Schedulers.from(threadExecutor))\n                .observeOn(postExecutionThread.getScheduler())\n                .subscribe(UseCaseSubscriber)\n    }\n\n    protected abstract fun buildUseCaseObservable(): Observable&lt;T&gt;\n\n    fun unsubscribe() {\n        if (!subscription.isUnsubscribed) {\n            subscription.unsubscribe()\n        }\n    }\n}\n</code></pre>\n\n<p>When you declare your derived UseCase classes, use your concrete type for the generic parameter when calling the super class.</p>\n\n<pre><code>class ConcreteUseCase(val threadExecutor: IThreadExecutor,\n               val postExecutionThread: IPostExecutionThread)\n               : UseCase&lt;ConcreteType&gt;(threadExecutor, postExecutionThread)\n</code></pre>\n\n<p>Doing so, you can use typed Subscribers in your <code>execute</code> call.</p>\n\n<pre><code>getNewsListInteractor.execute(NewsListSubscriber())\n\n...\n\nprivate inner class NewsListSubscriber : rx.Subscriber&lt;List&lt;NewsModel() {\n    override fun onCompleted() {// TODO}\n\n    override fun onError(e: Throwable) {// TODO}\n\n    override fun onNext(t: List&lt;NewsModel&gt;) {// TODO}\n}\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 3770277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/11f7055d57173747dbc85f48cc82fc36?s=128&d=identicon&r=PG&f=1", "display_name": "MickaelG", "link": "https://stackoverflow.com/users/3770277/mickaelg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 1, "accepted_answer_id": 39046297, "answer_count": 2, "score": 1, "last_activity_date": 1471634304, "creation_date": 1456520321, "last_edit_date": 1456521075, "question_id": 35661625, "link": "https://stackoverflow.com/questions/35661625/kotlin-how-to-inherit-from-rxjava-subscriber", "title": "Kotlin: How to inherit from RxJava Subscriber", "body": "<p>I want my NewsListSubscriber to inherit from an RxJava Subscriber which use a generic type but I get a \"Type mismatch\" error when I call the UseCase execute method. I read many times the generics page from the Kotlin documentation but I can't find the solution.</p>\n\n<p>Here is my UseCase:</p>\n\n<pre><code>abstract class UseCase(private val threadExecutor: IThreadExecutor,\n                       private val postExecutionThread: IPostExecutionThread) {\n\n    private var subscription = Subscriptions.empty()\n\n    fun execute(UseCaseSubscriber: rx.Subscriber&lt;Any&gt;) {\n        subscription = buildUseCaseObservable()\n                .subscribeOn(Schedulers.from(threadExecutor))\n                .observeOn(postExecutionThread.getScheduler())\n                .subscribe(UseCaseSubscriber)\n    }\n\n    protected abstract fun buildUseCaseObservable(): Observable&lt;out Any&gt;\n\n    fun unsubscribe() {\n        if (!subscription.isUnsubscribed) {\n            subscription.unsubscribe()\n        }\n    }\n}\n</code></pre>\n\n<p>And here is how I call it:</p>\n\n<pre><code>override fun loadNewsList() {\n    getNewsListInteractor.execute(NewsListSubscriber())\n}\n\nprivate inner class NewsListSubscriber : rx.Subscriber&lt;List&lt;NewsModel&gt;&gt;() {\n    override fun onCompleted() {// TODO}\n\n    override fun onError(e: Throwable) {// TODO}\n\n    override fun onNext(t: List&lt;NewsModel&gt;) {// TODO}\n}\n</code></pre>\n\n<p>The error is</p>\n\n<blockquote>\n  <p>\"Type mismatch. Required: rx.Subscriber. Found: Presenters.NewsListPresenter.NewsListSubscriber\"</p>\n</blockquote>\n\n<p>in the \"execute(NewsListSubscriber())\" line. I tried playing with the \"in\" and \"out\" keywords but I still have the same error.</p>\n"}, {"tags": ["reduce", "kotlin"], "comments": [{"owner": {"reputation": 1967, "user_id": 151153, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/21394188a4a5788bc81a2c5fe9013fe9?s=128&d=identicon&r=PG", "display_name": "Richard Green", "link": "https://stackoverflow.com/users/151153/richard-green"}, "edited": false, "score": 3, "creation_date": 1479923235, "post_id": 35660843, "comment_id": 68766013, "body": "FYI: If you are just using <code>reduce</code> for summation, then you can use the builtin <code>.sum()</code> on lists of numbers and if you are summing stuff that is a bit special, then you can write an extension function to help out as well."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 1743119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f8af1462786605ffffeee0821b3c1d?s=128&d=identicon&r=PG", "display_name": "dippe", "link": "https://stackoverflow.com/users/1743119/dippe"}, "edited": false, "score": 0, "creation_date": 1456640987, "post_id": 35661306, "comment_id": 59037037, "body": "Thank you, the fold seems the solution :) So as I can understand the chained filtering and reducing is risky because the filter can give back an empty list and the reduce will always be called so exception will thrown."}, {"owner": {"reputation": 768, "user_id": 2375243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c240301d6deed0cfaa7625428915f1b8?s=128&d=identicon&r=PG", "display_name": "Stacky", "link": "https://stackoverflow.com/users/2375243/stacky"}, "edited": false, "score": 1, "creation_date": 1510618167, "post_id": 35661306, "comment_id": 81502374, "body": "Why don&#39;t you define <code>reduce</code> similarly to how it&#39;s defined in ECMAScript 6? Let <code>reduce</code> take two parameters, the function and an initial value. If no initial value is defined (aka <code>null</code>), <code>reduce</code> assumes the first value in the array as initial value."}, {"owner": {"reputation": 2954, "user_id": 5652513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2bQCi.jpg?s=128&g=1", "display_name": "methodsignature", "link": "https://stackoverflow.com/users/5652513/methodsignature"}, "edited": false, "score": 1, "creation_date": 1536687528, "post_id": 35661306, "comment_id": 91510754, "body": "Did they call it <code>reduce</code>?  If so, people looking for <code>fold</code> may not realize they need to <code>reduce</code> when they want to <code>fold</code>.  If they also provide <code>fold</code>, then they&#39;ve created two ways to do the exact same thing.  Either way, that seems like it would create additional barriers for programmers.  I don&#39;t think it would be appropriate for the language; however, we can still achieve the same thing by creating our own function if we find we need/want that sort of shorthand."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 72, "last_activity_date": 1456519205, "creation_date": 1456519205, "answer_id": 35661306, "question_id": 35660843, "link": "https://stackoverflow.com/questions/35660843/how-to-call-reduce-on-an-empty-kotlin-array/35661306#35661306", "title": "How to call reduce on an empty Kotlin array?", "body": "<p>The exception is correct, <code>reduce</code> does not work on an empty iterable or array. What you're probably looking for is <code>fold</code>, which takes a starting value and an operation which is applied successively for each element of the iterable. <code>reduce</code> takes the <em>first</em> element as a starting value, so it needs no additional value to be passed as an argument, but requires the collection to be not empty.</p>\n\n<p>Example usage of <code>fold</code>:</p>\n\n<pre><code>println(intArrayOf().fold(0) { a, b -&gt; a + b })  // prints \"0\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1603537161, "post_id": 57649965, "comment_id": 114072383, "body": "how to add break point while using reduce.? on string.?"}, {"owner": {"reputation": 328, "user_id": 4091135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y9M5K.jpg?s=128&g=1", "display_name": "Tomac Antonio", "link": "https://stackoverflow.com/users/4091135/tomac-antonio"}, "reply_to_user": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1603737203, "post_id": 57649965, "comment_id": 114125424, "body": "You can simply break on lambda body and it will break for every reduce substep allowing you to inspect <code>a</code> and <code>b</code>"}, {"owner": {"reputation": 3351, "user_id": 7344445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cNjFr.jpg?s=128&g=1", "display_name": "Atif AbbAsi", "link": "https://stackoverflow.com/users/7344445/atif-abbasi"}, "edited": false, "score": 0, "creation_date": 1603737429, "post_id": 57649965, "comment_id": 114125503, "body": "thanks for reply what I did is I used take(numberOfItem) and it worked."}], "tags": [], "owner": {"reputation": 328, "user_id": 4091135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y9M5K.jpg?s=128&g=1", "display_name": "Tomac Antonio", "link": "https://stackoverflow.com/users/4091135/tomac-antonio"}, "is_accepted": false, "score": 8, "last_activity_date": 1566769563, "creation_date": 1566769563, "answer_id": 57649965, "question_id": 35660843, "link": "https://stackoverflow.com/questions/35660843/how-to-call-reduce-on-an-empty-kotlin-array/57649965#57649965", "title": "How to call reduce on an empty Kotlin array?", "body": "<p>I just want to add more general approach for situations where it is not possible to use <code>fold(...)</code>. Because, in order to use <code>fold</code> you need to be able to express some initial value.</p>\n\n<pre><code>someIterable\n    .filter{ TODO(\"possibly filter-out everything\") }\n    .takeIf{ it.isNotEmpty() }\n    ?.reduce{ acc, element -&gt; TODO(\"merge operation\") }\n    ?: TODO(\"value or exception for empty\")\n</code></pre>\n\n<p>With this approach, in case of an empty collection, <code>reduce</code> won't be executed because <code>takeIf</code> will convert it to <code>null</code>. And at the end we can use elvis operator to express some value (or throw exception) in that case.</p>\n\n<p>Your example:</p>\n\n<pre><code>intArrayOf(1, 2, 3)\n    .filter({ a -&gt; a &lt; 0 })\n    .takeIf{ it.isNotEmpty() }\n    ?.reduce({ a, b -&gt; a + b })\n    ?: 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 1490636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FMa7z.jpg?s=128&g=1", "display_name": "Maksim Kostromin", "link": "https://stackoverflow.com/users/1490636/maksim-kostromin"}, "is_accepted": false, "score": -1, "last_activity_date": 1575986254, "last_edit_date": 1575986254, "creation_date": 1575985902, "answer_id": 59268751, "question_id": 35660843, "link": "https://stackoverflow.com/questions/35660843/how-to-call-reduce-on-an-empty-kotlin-array/59268751#59268751", "title": "How to call reduce on an empty Kotlin array?", "body": "<p>you can use foldRight:</p>\n\n\n\n<pre><code>println(listOf(\"1\", \"2\", \"3\")\n    .filter { \"not found\" == it }\n    .foldRight(\"\") { a, b -&gt; a + b }) // prints: \"\"\n\nprintln(listOf(\"1\", \"2\", \"3\")\n    .filter { \"not found\" != it }\n    .foldRight(\"\") { a, b -&gt; a + b }) // prints: \"123\"\n</code></pre>\n\n<p>or in your case:</p>\n\n\n\n<pre><code>val a = intArrayOf()\nval b = a.foldRight(0) { memo, next -&gt; memo + next } // b == 0\nval a1 = intArrayOf(1, 2, 3)\nval b1 = a.filter { a -&gt; a &lt; 0 }.foldRight(0) { a, b -&gt; a + b } // b1 == 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8237, "user_id": 2425851, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/fFyvZ.png?s=128&g=1", "display_name": "NickUnuchek", "link": "https://stackoverflow.com/users/2425851/nickunuchek"}, "is_accepted": false, "score": 2, "last_activity_date": 1580477292, "creation_date": 1580477292, "answer_id": 60004871, "question_id": 35660843, "link": "https://stackoverflow.com/questions/35660843/how-to-call-reduce-on-an-empty-kotlin-array/60004871#60004871", "title": "How to call reduce on an empty Kotlin array?", "body": "<pre><code>public inline fun &lt;S, T : S&gt; List&lt;T&gt;.reduceRightDefault(defaultIfEmpty: S, operation: (T, acc: S) -&gt; S): S {\n    return if (isEmpty()) defaultIfEmpty\n    else reduceRight(operation)\n}\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>val result = listOf&lt;Boolean&gt;().reduceRightDefault(false) { first, second -&gt; first &amp;&amp; second}\n\nprintln(\"result $result\")//result false\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 1743119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f8af1462786605ffffeee0821b3c1d?s=128&d=identicon&r=PG", "display_name": "dippe", "link": "https://stackoverflow.com/users/1743119/dippe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10331, "favorite_count": 1, "answer_count": 4, "score": 40, "last_activity_date": 1580477292, "creation_date": 1456517488, "question_id": 35660843, "link": "https://stackoverflow.com/questions/35660843/how-to-call-reduce-on-an-empty-kotlin-array", "title": "How to call reduce on an empty Kotlin array?", "body": "<p>Simple reduce on an empty array will throw:</p>\n\n<p>Exception in thread \"main\" java.lang.UnsupportedOperationException: Empty iterable can't be reduced.</p>\n\n<p>The same exception when chaining:</p>\n\n<pre><code>val a = intArrayOf()\n\nval b = a.reduce({ memo, next -&gt; memo + next }) // -&gt; throws an exception\n\nval a1 = intArrayOf(1, 2, 3)\n\nval b1 = a.filter({ a -&gt; a &lt; 0 }).reduce({ a, b -&gt; a + b }) // -&gt; throws an exception\n</code></pre>\n\n<p>Is it the expected operation of the reduce or is it a bug?</p>\n\n<p>Are there any workarounds?</p>\n"}, {"tags": ["syntax", "kotlin"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 3, "creation_date": 1456503146, "post_id": 35655916, "comment_id": 58993472, "body": "I think it&#39;s because it could be unclear. If you do string + integer it&#39;s clear that you want to return a string with the string representation of the integer appended. If you do integer + string it could mean either return a string with the string representation of the integer prepended or it could mean that you want to parse a number from the string and add that to the integer."}, {"owner": {"reputation": 722, "user_id": 2854660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6522a0a5d37243cfd54525b54741eacd?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTheo", "link": "https://stackoverflow.com/users/2854660/nicetheo"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456504997, "post_id": 35655916, "comment_id": 58994792, "body": "For example Scala do it without any problem and has override &quot;+&quot;: def +(other: String): String = String.valueOf(self) + other"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456512359, "post_id": 35655916, "comment_id": 58999034, "body": "@NiceTheo Kotlin isn&#39;t trying to be Scala, and for well defined reasons does not allow things implicitly or unclear.  Your example is unclear.  plus you should be using string templates instead of + for this case."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456512453, "post_id": 35655916, "comment_id": 58999093, "body": "Why? questions about design should be in discussion forums, an issue in youtrack.jetbrains.com (as a feature suggestion if you wanted), or kotlin slack channels."}], "answers": [{"comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1456503912, "post_id": 35656585, "comment_id": 58994017, "body": "But isn&#39;t <code>integer + string</code> just as clear as <code>integer + double</code>? If you add a <code>Double</code> to an <code>Integer</code> the result is a <code>Double</code> so why wouldn&#39;t adding a <code>String</code> to an <code>Integer</code> result in a <code>String</code>?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1456504169, "post_id": 35656585, "comment_id": 58994221, "body": "s/<code>string + this</code>/<code>toString() + string</code>/"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1456504306, "post_id": 35656585, "comment_id": 58994321, "body": "The plus operator could also be an extension to <code>Any?</code> to work for doubles, etc.: <code>operator fun Any?.plus(string: String) = toString() + string</code>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 1, "creation_date": 1456512568, "post_id": 35656585, "comment_id": 58999153, "body": "This is too ambiguous for the stdlib.  And does not fit how other things work in stdlib that require conversion first.  You can easily taint your own library with all sorts of implied conversions on operators, but that shouldn&#39;t be done for everyone who doesn&#39;t want that."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 3, "last_activity_date": 1456503573, "last_edit_date": 1456503573, "creation_date": 1456503232, "answer_id": 35656585, "question_id": 35655916, "link": "https://stackoverflow.com/questions/35655916/why-kotlin-doesnt-implement-int-plusvalue-string/35656585#35656585", "title": "Why Kotlin doesn&#39;t implement Int.plus(value: String)?", "body": "<p>Kotlin is static typed language and in basicly you can't add String to Integer. But there are possible to overload operators, so we can now.</p>\n\n<p>In case when we want add any object to string, it's clear: every object can be implicitly converted to String (<code>Any#toString()</code>)</p>\n\n<p>But in case of <code>Int + smthg</code> it's not so clear, so only <code>Int + kotlin.Number</code> is defined in standard library.</p>\n\n<p>I suggest to use string interpolation:</p>\n\n<pre><code>val result = \"${integer}${string}\"\n</code></pre>\n\n<p>Or define own overloaded plus operator:</p>\n\n<pre><code>operator fun Int.plus(string: String): String = string + this\n</code></pre>\n"}], "owner": {"reputation": 722, "user_id": 2854660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6522a0a5d37243cfd54525b54741eacd?s=128&d=identicon&r=PG&f=1", "display_name": "NiceTheo", "link": "https://stackoverflow.com/users/2854660/nicetheo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 35656585, "answer_count": 1, "score": 0, "last_activity_date": 1456503573, "creation_date": 1456501308, "question_id": 35655916, "link": "https://stackoverflow.com/questions/35655916/why-kotlin-doesnt-implement-int-plusvalue-string", "title": "Why Kotlin doesn&#39;t implement Int.plus(value: String)?", "body": "<p>It causes discomfort when you can do that:</p>\n\n<pre><code>val string = \" abc \"\nval integer = 8\nval result = string + integer\n</code></pre>\n\n<p>and can't do:</p>\n\n<pre><code>val result = integer + string\n</code></pre>\n\n<p>It has hidden meaning or it's an omission?</p>\n"}, {"tags": ["intellij-idea", "intellisense", "lag", "kotlin", "flicker"], "answers": [{"comments": [{"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "edited": false, "score": 0, "creation_date": 1456499530, "post_id": 35654992, "comment_id": 58990825, "body": "As I stated before, newer versions of Kotlin aren&#39;t compatible with my project, is there any way to make this version work with intellij?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456503337, "post_id": 35654992, "comment_id": 58993620, "body": "I know this isn&#39;t an answer to your question but maybe you should think about porting your project to Kotlin 1.0. It seems like using a pre-1.0 Beta version of a language is going to cause you more and more trouble going forward."}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456504607, "post_id": 35654992, "comment_id": 58994526, "body": "@CaseyB How would I go about that? I&#39;m new to IntelliJ, Gradle and Kotlin, do you reckon it&#39;s hard?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456504736, "post_id": 35654992, "comment_id": 58994626, "body": "Upgrading the library is very easy, just go to Preferences &gt; Plugins and search Kotlin. There should be a button to update there. As for making your code conform to 1.0 as opposed to what you&#39;re using now that&#39;s going to depend on your code and I can&#39;t really say without seeing it. I&#39;d recommend updating and seeing what goes wrong."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456552617, "post_id": 35654992, "comment_id": 59012375, "body": "There have been very few changes between 1.0.0-rc-1036 and the final 1.0.0 build. Most likely the only thing you need to do in order to upgrade is change the Kotlin version in your build.gradle from 1.0.0-rc-1036 to 1.0.0."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 2, "last_activity_date": 1456498738, "last_edit_date": 1495535427, "creation_date": 1456498738, "answer_id": 35654992, "question_id": 35654657, "link": "https://stackoverflow.com/questions/35654657/intellij-kotlin-error-causes-mouse-flicker-and-errors-in-code/35654992#35654992", "title": "IntelliJ: Kotlin error causes mouse flicker and errors in code", "body": "<p>IntelliJ IDEA 15.0.4 bundles Kotlin 1.0 release. You broke your Kotlin installation because you followed the incorrect advice given to you at <a href=\"https://stackoverflow.com/questions/35649488/how-to-downgrade-kotlin-in-intellij-15\">How to downgrade Kotlin in Intellij 15</a>. To fix your installation, you need to reinstall IntelliJ IDEA from the original installer.</p>\n"}], "owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456498738, "creation_date": 1456497862, "question_id": 35654657, "link": "https://stackoverflow.com/questions/35654657/intellij-kotlin-error-causes-mouse-flicker-and-errors-in-code", "title": "IntelliJ: Kotlin error causes mouse flicker and errors in code", "body": "<p>I'm using IntelliJ 15 with Kotlin beta-1038, and I'm getting this error at the bottom of eclipse.</p>\n\n<pre><code>Internal Error occurred while analyzing this expression:\njava.util.ServiceConfigurationError: org.jetbrains.kotlin.resolve.ExternalOverridabilityCondition: Provider org.jetbrains.kotlin.load.java.ErasedOverridabilityCondition not found\n    at java.util.ServiceLoader.fail(ServiceLoader.java:239)\n    at java.util.ServiceLoader.access$300(ServiceLoader.java:185)\n    at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:372)\n    at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404)\n    at java.util.ServiceLoader$1.next(ServiceLoader.java:480)\n    at kotlin.CollectionsKt___CollectionsKt.toCollection(_Collections.kt:949)\n    at kotlin.CollectionsKt.toCollection(Unknown Source)\n    at kotlin.CollectionsKt___CollectionsKt.toArrayList(_Collections.kt:942)\n    at kotlin.CollectionsKt.toArrayList(Unknown Source)\n    at kotlin.CollectionsKt___CollectionsKt.toList(_Collections.kt:973)\n    at kotlin.CollectionsKt.toList(Unknown Source)\n    at org.jetbrains.kotlin.resolve.OverridingUtil.&lt;clinit&gt;(OverridingUtil.java:41)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedClassDescriptor$DeserializedClassMemberScope.generateFakeOverrides(DeserializedClassDescriptor.kt:216)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedClassDescriptor$DeserializedClassMemberScope.computeNonDeclaredFunctions(DeserializedClassDescriptor.kt:202)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedMemberScope.computeFunctions(DeserializedMemberScope.kt:77)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedMemberScope.access$computeFunctions(DeserializedMemberScope.kt:32)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedMemberScope$functions$1.invoke(DeserializedMemberScope.kt:50)\n    at org.jetbrains.kotlin.serialization.deserialization.descriptors.DeserializedMemberScope$functions$1.invoke(DeserializedMemberScope.kt:32)\n    at org.jetbrains.kotlin.storage.LockBasedStorageManager$MapBasedMemoizedFunction.invoke(LockBasedStorageManager.java:389)\n    at org.j...\n</code></pre>\n\n<p>Every Kotlin file I touch becomes full of errors and my mouse will flicker and I'll lag when I hover over any of the code. I also don't have intellisense.</p>\n\n<p>However, I can compile and run the project and my changes in the kotlin files will work.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0EgrV.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0EgrV.gif\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["intellij-idea", "autocomplete", "kotlin"], "comments": [{"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1456497260, "post_id": 35654284, "comment_id": 58989107, "body": "Have you added a jar as module dependency?"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1456497528, "post_id": 35654284, "comment_id": 58989332, "body": "@TimCastelijns My module dependencies contains tons of libraries, added a few myself but most are from gradle build. Is it relevant to Kotlin?"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1456497599, "post_id": 35654284, "comment_id": 58989389, "body": "@TimCastelijns There seems to be more wrong with my Kotlin <a href=\"http://i.imgur.com/3R3W5hz.png\" rel=\"nofollow noreferrer\">i.imgur.com/3R3W5hz.png</a> <a href=\"http://i.imgur.com/1X3ponF.gif\" rel=\"nofollow noreferrer\">i.imgur.com/1X3ponF.gif</a>"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1456498156, "post_id": 35654284, "comment_id": 58989816, "body": "Which exactly versions of IntelliJ IDEA and Kotlin are you using? The Kotlin plugin certainly does support intellisense."}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456498250, "post_id": 35654284, "comment_id": 58989891, "body": "@yole 1.0.0 beta 1038 and latest intellij 15.0.4 i believe"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1456498348, "post_id": 35654284, "comment_id": 58989961, "body": "@yole check <a href=\"http://stackoverflow.com/questions/35654657/intellij-kotlin-error-causes-mouse-flicker-and-errors-in-code\" title=\"intellij kotlin error causes mouse flicker and errors in code\">stackoverflow.com/questions/35654657/&hellip;</a> I have more problems with Kotlin, hope you know a solution."}], "answers": [{"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 3, "last_activity_date": 1456671825, "last_edit_date": 1495542184, "creation_date": 1456671392, "answer_id": 35684030, "question_id": 35654284, "link": "https://stackoverflow.com/questions/35654284/intellij-no-autocomplete-for-kotlin/35684030#35684030", "title": "IntelliJ: No autocomplete for Kotlin?", "body": "<p>You broke your Kotlin install by deleting the shipping Kotlin plugin and trying to downgrade (<em>which some very authoritative people said you shouldn't attempt</em>).  There are at least 4 Stack Overflow questions covering your issue now including this one.  </p>\n\n<p>See also (<em>your other questions</em>):</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/35654657/intellij-kotlin-error-causes-mouse-flicker-and-errors-in-code\">IntelliJ: Kotlin error causes mouse flicker and errors in code</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/35649488/how-to-downgrade-kotlin-in-intellij-15\">How to downgrade Kotlin in Intellij 15</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/35651561/intellij-using-gradle-cant-find-kotlin-plugin-even-though-its-installed\">IntelliJ (using gradle): Can&#39;t find Kotlin plugin even though it&#39;s installed</a></p></li>\n</ul>\n\n<p>Read those, fix your Kotlin to 1.0.0, and upgrade your project to use Kotlin 1.0.0 dependencies (Kotlin itself and any third party to ensure they are compatible).</p>\n\n<p>Any other Kotlin problems you have before then ARE RELATED to this one.  New stack overflow questions just confuses the situation for everyone involved.</p>\n"}], "owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4350, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1456671825, "creation_date": 1456496898, "last_edit_date": 1456596484, "question_id": 35654284, "link": "https://stackoverflow.com/questions/35654284/intellij-no-autocomplete-for-kotlin", "title": "IntelliJ: No autocomplete for Kotlin?", "body": "<p>I'm working on a project with Kotlin plugins, but IntelliJ doesn't seem to have autocomplete for Kotlin. Is there any way to enable it or should I just deal with it.</p>\n"}, {"tags": ["kotlin", "java-interop"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 2, "last_activity_date": 1456498088, "creation_date": 1456498088, "answer_id": 35654739, "question_id": 35654094, "link": "https://stackoverflow.com/questions/35654094/how-to-override-properties-of-java-classes-in-kotlin/35654739#35654739", "title": "How to override properties of java classes in Kotlin?", "body": "<p>The Java class in your example has a field, not a property. Code that accesses a field in Java always refers to a specific class name, and it's not possible to override the field in another class, either in Java or in Kotlin.</p>\n\n<p>You can create your own property, with a different name, that would return the value of the field cast to the type that you need.</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 35654739, "answer_count": 1, "score": 1, "last_activity_date": 1456498088, "creation_date": 1456496332, "question_id": 35654094, "link": "https://stackoverflow.com/questions/35654094/how-to-override-properties-of-java-classes-in-kotlin", "title": "How to override properties of java classes in Kotlin?", "body": "<p>Somewhere in Java code there is a class <code>ViewHolder</code>:</p>\n\n<pre><code>public static abstract class ViewHolder {\n    public final View itemView;\n    public ViewHolder(View itemView) { this.itemView = itemView; }\n    ....\n}\n</code></pre>\n\n<p>So in Kotlin instances of this class contain a read-only property <code>itemView</code> of type <code>View</code>. And I want to create a generic class <code>ViewHolder&lt;V&gt;</code> like this:</p>\n\n<pre><code>class MyViewHolder&lt;V : View&gt;(itemView: V) : ViewHolder(itemView) {\n     override val itemView = super.itemView as V // error: itemView overrides nothing\n}\n</code></pre>\n\n<p>And if I remove the <code>override</code> modifier the class compiles OK, but when I try to use the <code>itemView</code> field I get the <code>Overload resolution ambiguity</code> error.</p>\n\n<p>What I want here is to make the <code>itemView</code> property of <code>MyViewHolder</code> class to be of type <code>V</code>, not <code>View</code>. So for instance, <code>MyViewHolder(TextView(context)).itemView</code> would be a <code>TextView</code>. Is there any way to achieve this?</p>\n"}, {"tags": ["kotlin", "anko"], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1456788298, "last_edit_date": 1495535458, "creation_date": 1456734677, "answer_id": 35694925, "question_id": 35651866, "link": "https://stackoverflow.com/questions/35651866/how-to-add-custom-view-groups-to-anko-dsl/35694925#35694925", "title": "How to add custom view groups to Anko DSL?", "body": "<p>If you go to any of Anko's <code>lparams</code> declarations from your code, you can see that inside Anko generated DSL code, <code>lparams</code> is an extension function for <code>T: View</code> which looks like this:</p>\n\n<pre><code>fun &lt;T: View&gt; T.lparams(\n        width: Int = android.view.ViewGroup.LayoutParams.WRAP_CONTENT,\n        height: Int = android.view.ViewGroup.LayoutParams.WRAP_CONTENT,\n        init: android.widget.FrameLayout.LayoutParams.() -&gt; Unit = defaultInit\n): T {\n    val layoutParams = android.widget.FrameLayout.LayoutParams(width, height)\n    layoutParams.init()\n    this@lparams.layoutParams = layoutParams\n    return this\n}\n</code></pre>\n\n<p>(and more overloads for different <code>LayoutParams</code> constructors)</p>\n\n<p>It is declared inside a class, so it is only visible in functions with a receiver of that class, see <a href=\"https://stackoverflow.com/questions/34797366/in-kotlin-how-do-i-add-extension-methods-to-another-class-but-only-visible-in\">another question</a> about this method of DSL programming.</p>\n\n<hr>\n\n<p>In order to be able to use <code>lparams</code> for your custom <code>ViewGroup</code> in Anko DSL, you have to declare a similar function or functions inside your custom view code, that will create an appropriate <code>LayoutParams</code> for your class.</p>\n\n<p>If you want also to hide <code>lparams</code> function from outside the DSL, you can make a subclass of your <code>MyFrameLayout</code> and use it in DSL code only, working with <code>MyFrameLayout</code> itself elsewhere.</p>\n\n<p>After that, you can call <code>lparams</code> on any <code>View</code> inside a lambda which you pass as <code>init: MyFrameLayout.() -&gt; Unit</code> to <code>fun ViewManager.myFrameLayout</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "is_accepted": true, "score": 0, "last_activity_date": 1456843373, "creation_date": 1456843373, "answer_id": 35725858, "question_id": 35651866, "link": "https://stackoverflow.com/questions/35651866/how-to-add-custom-view-groups-to-anko-dsl/35725858#35725858", "title": "How to add custom view groups to Anko DSL?", "body": "<p>If we take a look at Anko sources we can see that <code>frameLayout</code> actualy returns an instance of <code>_FrameLayout</code> class, where these <code>lparams</code> functions are defined. In my understanding this is needed, so these <code>lparams</code> functions are only available in the layout building code.</p>\n\n<p>In Anko's <code>Layouts.kt</code> file there are these <code>_&lt;ViewGroup&gt;</code> classes for every supported <code>ViewGroup</code>. </p>\n\n<p>So the straightforward way to support a custom view group is to create a <code>_&lt;ViewGroup&gt;</code> class with <code>lparams</code> methods implementation. The problem is that this <code>_&lt;ViewGroup&gt;</code> class often contains much more code than my <code>&lt;ViewGroup&gt;</code> itself! </p>\n\n<p>And if I want create many custom view groups, adding Anko support for them becomes a big pain with this approach. Let's say I have <code>MyFrameLayout1</code>, <code>MyFrameLayout2</code>, <code>MyFrameLayout3</code> classes. They are basically <code>FrameLayout</code>'s so I want the same layout parameters to be used with them. But I have to create <code>_FrameLayout1</code>, <code>_FrameLayout2</code>, <code>_FrameLaoyt3</code> classes which are just copy/paste of Anko's <code>_FrameLayout</code>. </p>\n\n<p>So I slightly improved this approach. I create an <code>interface _FrameLayout</code>:</p>\n\n<pre><code>interface _FrameLayout {\n    // copy/paste from Anko's _FrameLayout\n}\n</code></pre>\n\n<p>and now to support any custom <code>FrameLayout</code> subclass I just have to:</p>\n\n<pre><code>class _MyFrameLayout(ctx: Context) : MyFrameLayout(ctx), _FrameLayout\n\nfun ViewManager.myFrameLayout(init: _MyFrameLayout.() -&gt; Unit = {})= ankoView({ _MyFrameLayout(it) }, init) \n</code></pre>\n\n<p>This reduces copy/paste a lot, when creating many custom view groups.</p>\n"}, {"tags": [], "owner": {"reputation": 4324, "user_id": 1259923, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/eSrTO.png?s=128&g=1", "display_name": "Eefret", "link": "https://stackoverflow.com/users/1259923/eefret"}, "is_accepted": false, "score": 6, "last_activity_date": 1458577632, "creation_date": 1458577632, "answer_id": 36136547, "question_id": 35651866, "link": "https://stackoverflow.com/questions/35651866/how-to-add-custom-view-groups-to-anko-dsl/36136547#36136547", "title": "How to add custom view groups to Anko DSL?", "body": "<p>Actually you just have to extend anko and declare your customview then use it in the DSL normally:</p>\n\n<pre><code>public inline fun ViewManager.customView() = customView {}\npublic inline fun ViewManager.customView(init: CustomView.() -&gt; Unit) = ankoView({ CustomView(it) }, init)\n</code></pre>\n\n<p>Then use it in the DSL normally</p>\n\n<pre><code>frameLayout {\n    customView()\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8642389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be692f02d8cac157e468db35db89808a?s=128&d=identicon&r=PG&f=1", "display_name": "CupcakeThief", "link": "https://stackoverflow.com/users/8642389/cupcakethief"}, "is_accepted": false, "score": 2, "last_activity_date": 1505919548, "creation_date": 1505919548, "answer_id": 46325491, "question_id": 35651866, "link": "https://stackoverflow.com/questions/35651866/how-to-add-custom-view-groups-to-anko-dsl/46325491#46325491", "title": "How to add custom view groups to Anko DSL?", "body": "<p>if you inherit from e.g. <code>_RelativeLayout</code> instead of <code>RelativeLayout</code>, you can use your custom layout as you would expect.</p>\n"}], "owner": {"reputation": 3667, "user_id": 190148, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5338ca3693b8a1aaf94b6f791c5842a7?s=128&d=identicon&r=PG", "display_name": "netimen", "link": "https://stackoverflow.com/users/190148/netimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3524, "favorite_count": 1, "accepted_answer_id": 35725858, "answer_count": 4, "score": 8, "last_activity_date": 1505919548, "creation_date": 1456489978, "question_id": 35651866, "link": "https://stackoverflow.com/questions/35651866/how-to-add-custom-view-groups-to-anko-dsl", "title": "How to add custom view groups to Anko DSL?", "body": "<p><a href=\"https://github.com/Kotlin/anko/blob/master/doc/ADVANCED.md#extending-anko\">Anko docs</a> tell us how to add custom views to DSL. But if my custom view is a view group, problems arise.</p>\n\n<pre><code>class MyFrameLayout(context: Context) : FrameLayout(context)\n\nfun ViewManager.myFrameLayout(init: MyFrameLayout.() -&gt; Unit = {}) = ankoView({ MyFrameLayout(it) }, init)\n\nclass MyUI : AnkoComponent&lt;Fragment&gt; {\n    override fun createView(ui: AnkoContext&lt;Fragment&gt;) = with(ui) {\n\n        myFrameLayout {\n            textView(\"hello\").lparams { // error: Unresolved reference: lparams\n                bottomMargin = dip(40)\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>but if I change <code>myFrameLayout</code> invocation to <code>frameLayout</code> it works OK. So what's the proper way to make view groups be used with Anko DSL?</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "edited": false, "score": 0, "creation_date": 1456495227, "post_id": 35653084, "comment_id": 58987535, "body": "Piggybacking a question as I&#39;m new to Kotlin: I&#39;m trying to get my head around this and the code on the answer doesn&#39;t compile for me. I had to add the type parameter on <code>InnerClass</code> too, so it ended up being <code>inner class ChildInnerClass : SuperClass&lt;T&gt;.InnerClass&lt;T&gt;()</code> which I think is what the linked answer suggests to do... am I missing something?"}, {"owner": {"reputation": 83, "user_id": 5985944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff31651ac9c720706972c0326e3fdbde?s=128&d=identicon&r=PG&f=1", "display_name": "EiG", "link": "https://stackoverflow.com/users/5985944/eig"}, "edited": false, "score": 0, "creation_date": 1456495619, "post_id": 35653084, "comment_id": 58987817, "body": "You need to specify type parameter on <code>InnerClass</code> only if you defined it with a type parameter (<code>protected open inner class InnerClass&lt;T&gt;</code>) In this code <code>InnerClass</code> does not require type parameters and instead uses T from it&#39;s parent, <code>SuperClass</code>"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "edited": false, "score": 0, "creation_date": 1456498214, "post_id": 35653084, "comment_id": 58989867, "body": "@Augusto if the code on the answer doesn&#39;t compile for you then I am guessing you made some changes to <code>InnerClass</code>, etc. As such, for clarity, I&#39;ve updated the code in the answer to include the <code>SuperClass</code> declaration. You should be able to copy and paste the example into a new Kotlin file and it should compile without any problems. Please let us know if it doesn&#39;t for you."}, {"owner": {"reputation": 26445, "user_id": 608820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aGmg7.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/608820/augusto"}, "edited": false, "score": 0, "creation_date": 1456499233, "post_id": 35653084, "comment_id": 58990613, "body": "Silly me! I added <code>&lt;T&gt;</code> to <code>SuperClass.InnerClass</code> at some point while playing with the code. Thanks for clarifying this!!!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 6, "last_activity_date": 1456498117, "last_edit_date": 1495535625, "creation_date": 1456493563, "answer_id": 35653084, "question_id": 35651844, "link": "https://stackoverflow.com/questions/35651844/inner-classes-inheritance-in-kotlin/35653084#35653084", "title": "Inner classes Inheritance in Kotlin", "body": "<p>The compiler is not expecting a type argument on <code>InnerClass</code> but on <code>SuperClass</code> in <code>SuperClass.InnerClass</code>. This is a known issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-9208\" rel=\"nofollow noreferrer\">Capture generics in inner classes : KT-9208</a>.</p>\n\n<p>For now you can do the following:</p>\n\n<pre><code>open class SuperClass&lt;T&gt; {\n    protected open inner class InnerClass {\n        fun someLogic() {\n            println(\"some logic happened\")\n        }\n\n        open fun someOverridableLogic() {\n            println(\"some logic happened\")\n        }\n    }\n}\n\nclass ChildClass&lt;T&gt; : SuperClass&lt;T&gt;() {\n    protected inner class ChildInnerClass : SuperClass&lt;T&gt;.InnerClass() {\n        override fun someOverridableLogic() {\n            super.someOverridableLogic()\n            println(\"some OTHER logic happened\")\n        }\n    }\n}\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/q/35491648/3255152\">Hadoop Context type parameters in Kotlin</a> for a similar example and answer.</p>\n"}], "owner": {"reputation": 83, "user_id": 5985944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff31651ac9c720706972c0326e3fdbde?s=128&d=identicon&r=PG&f=1", "display_name": "EiG", "link": "https://stackoverflow.com/users/5985944/eig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2546, "favorite_count": 3, "accepted_answer_id": 35653084, "answer_count": 1, "score": 8, "last_activity_date": 1456498117, "creation_date": 1456489931, "last_edit_date": 1456493363, "question_id": 35651844, "link": "https://stackoverflow.com/questions/35651844/inner-classes-inheritance-in-kotlin", "title": "Inner classes Inheritance in Kotlin", "body": "<p>I'm trying to create a hierarchy of few classes, each one overriding some behavior in inner classes of it's parent (Specifically iterators, but it does not matter). Basically, it looks like this:</p>\n\n<pre><code>open class SuperClass&lt;T&gt;{\n    protected open inner class InnerClass{\n        fun someLogic(){\n            println(\"some logic happened\")\n        }\n\n        open fun someOverridableLogic(){\n            println(\"some logic happened\")\n        }\n    }\n}\n\nclass ChildClass&lt;T&gt; : SuperClass&lt;T&gt;(){\n    protected inner class ChildInnerClass:InnerClass{\n        override fun someOverridableLogic(){\n            super.someOverridableLogic()\n            println(\"some OTHER logic happened\")\n        }\n    }\n}\n</code></pre>\n\n<p>Compiler refuses to work with this code, expecting type parameter on InnerClass when ChildInnerClass inherits from it. However, after adding parameter like this:</p>\n\n<pre><code>protected inner class ChildInnerClass:InnerClass&lt;T&gt;\n</code></pre>\n\n<p>compiler suddenly does <strong>not</strong> expect any type parameters!</p>\n\n<p>Java equivalent of this compiles and executes as expected, without type parameters:</p>\n\n<pre><code>public class SuperClass&lt;T&gt; {\n    protected class InnerClass{\n        public void someLogic(){\n            System.out.println(\"some logic happened\");\n        }\n\n        public void someOverridableLogic(){\n            System.out.println(\"some logic happened\");\n        }\n    }\n}\n\n\npublic class ChildClass&lt;T&gt; extends SuperClass&lt;T&gt;{\n    protected class ChildInnerClass extends InnerClass{\n        @Override\n        public void someOverridableLogic() {\n            super.someOverridableLogic();\n            System.out.println(\"some OTHER logic happened\");\n        }\n    }\n}\n</code></pre>\n\n<p>So, am i doing something wrong in Kotlin, or is it simply a language restriction i wasn't aware about?</p>\n"}, {"tags": ["plugins", "intellij-idea", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456491659, "post_id": 35651561, "comment_id": 58984959, "body": "When exactly you get following error? When execute build with gradle?"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456491831, "post_id": 35651561, "comment_id": 58985084, "body": "@IRus I get the error when I run any of the gradle tasks"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456494508, "post_id": 35651561, "comment_id": 58986965, "body": "Can you update Kotlin to Release version?"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456495505, "post_id": 35651561, "comment_id": 58987747, "body": "@IRus This is not an option, I need to work with this specific Kotlin version for this project."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456496949, "post_id": 35651561, "comment_id": 58988891, "body": "Okay, it&#39;s not required, check my answer."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456671772, "post_id": 35651561, "comment_id": 59045568, "body": "The plugin and gradle version are not connected, your question is misleading in itself."}], "answers": [{"comments": [{"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "edited": false, "score": 0, "creation_date": 1456495211, "post_id": 35653534, "comment_id": 58987524, "body": "If this doesn&#39;t help, i can take a look at your project if you will publish him on github."}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "edited": false, "score": 0, "creation_date": 1456498208, "post_id": 35653534, "comment_id": 58989861, "body": "I changed release-1038 to beta-1038 in version to use and it worked, I tried it because of your answer so thanks :)"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 6, "last_activity_date": 1456494823, "creation_date": 1456494823, "answer_id": 35653534, "question_id": 35651561, "link": "https://stackoverflow.com/questions/35651561/intellij-using-gradle-cant-find-kotlin-plugin-even-though-its-installed/35653534#35653534", "title": "IntelliJ (using gradle): Can&#39;t find Kotlin plugin even though it&#39;s installed", "body": "<p>I can guess that you doesn't have repository in <strong>build.gradle</strong>, so please compare your build file with following, and then make \"Gradle Refresh\" in Idea.</p>\n\n<pre><code>buildscript {\n  ext.kotlin_version = '&lt;version to use&gt;'\n  repositories {\n    mavenCentral()\n    // or better:\n    jcenter()\n  }\n  dependencies {\n    classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n  }\n}\n\napply plugin: \"kotlin\"\n\nrepositories {\n  mavenCentral()\n  // or better:\n  jcenter()\n}\n\ndependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n}\n</code></pre>\n\n<p>Pay more attention to <strong>buildscript</strong> part of config: <strong>repositories</strong> here is necessary!</p>\n\n<p>I got config from <a href=\"https://kotlinlang.org/docs/reference/using-gradle.html#configuring-dependencies\" rel=\"noreferrer\">here</a>, with my little refinements.</p>\n"}], "owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7554, "favorite_count": 2, "accepted_answer_id": 35653534, "answer_count": 1, "score": 5, "last_activity_date": 1456494823, "creation_date": 1456489177, "question_id": 35651561, "link": "https://stackoverflow.com/questions/35651561/intellij-using-gradle-cant-find-kotlin-plugin-even-though-its-installed", "title": "IntelliJ (using gradle): Can&#39;t find Kotlin plugin even though it&#39;s installed", "body": "<p>I'm trying to build my project using gradle but it seems that it can't find my kotlin plugin, even though I did add it using \"install plugin from disk\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/XhM5t.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XhM5t.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the error I'm getting:</p>\n\n<blockquote>\n  <p>Could not resolve all dependencies for configuration ':classpath'.\n  Could not find org.jetbrains.kotlin:kotlin-gradle-plugin:1.0.0-release-1038.\n       Searched in the following locations:\n           <a href=\"https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.0.0-release-1038/kotlin-gradle-plugin-1.0.0-release-1038.pom\" rel=\"noreferrer\">https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.0.0-release-1038/kotlin-gradle-plugin-1.0.0-release-1038.pom</a>\n           <a href=\"https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.0.0-release-1038/kotlin-gradle-plugin-1.0.0-release-1038.jar\" rel=\"noreferrer\">https://repo1.maven.org/maven2/org/jetbrains/kotlin/kotlin-gradle-plugin/1.0.0-release-1038/kotlin-gradle-plugin-1.0.0-release-1038.jar</a></p>\n</blockquote>\n\n<p>Can anyone help me with this? I'd really like to build my project.</p>\n"}, {"tags": ["plugins", "intellij-idea", "uninstallation", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456483909, "post_id": 35649488, "comment_id": 58979696, "body": "Did you try downloading an old version of the plugin manually and using &quot;install plugin from disk&quot;?"}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456484499, "post_id": 35649488, "comment_id": 58980087, "body": "Yes, but nothing seems to change, because I cannot get rid of the newer version."}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 0, "creation_date": 1456488000, "post_id": 35649488, "comment_id": 58982443, "body": "There is no good way to downgrade the bundled Kotlin plugin. The best thing you can do is upgrade your project to Kotlin 1.0."}], "answers": [{"comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 5, "creation_date": 1456487864, "post_id": 35650709, "comment_id": 58982346, "body": "Please don&#39;t give this advice. Deleting the bundled Kotlin plugin breaks future patch upgrades and also breaks the digital signature of the app bundle on Mac OS X."}, {"owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "edited": false, "score": 0, "creation_date": 1456488899, "post_id": 35650709, "comment_id": 58983045, "body": "I honestly don&#39;t care at this point, I won&#39;t be using Kotlin for anything else but this project (which only supports the version i mentioned). If I ever need to update I&#39;ll just re-install. Thank you so much for this solution!"}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": -1, "last_activity_date": 1456489279, "last_edit_date": 1456489279, "creation_date": 1456486658, "answer_id": 35650709, "question_id": 35649488, "link": "https://stackoverflow.com/questions/35649488/how-to-downgrade-kotlin-in-intellij-15/35650709#35650709", "title": "How to downgrade Kotlin in Intellij 15", "body": "<p><strong>IMPORTANT UPD:</strong> as @yole commented, this is a bad solution as it will break things.  There is no proper way to downgrade a bundled plugin without breaking the installation. Instead, consider upgrading the project to the up-to-date Kotlin version.</p>\n\n<p>You have the plugin bundled with IntelliJ IDEA. <strong>On your own risk</strong>, you can delete its folder manually from IntelliJ IDEA installation (<code>plugins/kotlin</code> subfolder). After that you will be able to install whatever compatible version of the plugin from <a href=\"https://plugins.jetbrains.com/plugin/6954?pr=idea\" rel=\"nofollow\">zip distribution</a>, but your IDEA <strong>installation will be broken</strong> (see the comment).</p>\n"}], "owner": {"reputation": 1119, "user_id": 5157268, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5f5a613c6074acb8cdaa649011cad319?s=128&d=identicon&r=PG&f=1", "display_name": "SJ19", "link": "https://stackoverflow.com/users/5157268/sj19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4699, "favorite_count": 0, "accepted_answer_id": 35650709, "answer_count": 1, "score": 9, "last_activity_date": 1456489279, "creation_date": 1456483152, "question_id": 35649488, "link": "https://stackoverflow.com/questions/35649488/how-to-downgrade-kotlin-in-intellij-15", "title": "How to downgrade Kotlin in Intellij 15", "body": "<p>For a project of mine I need to use Kotlin 1.0.0-1038 (beta), but to install it I probably need to uninstall the newer version of kotlin, but it has no uninstall button where it should have.</p>\n\n<p><a href=\"https://i.gyazo.com/ba474cdf0072f4f82d361ea456af957d.png\" rel=\"noreferrer\"><img src=\"https://i.gyazo.com/ba474cdf0072f4f82d361ea456af957d.png\" alt=\"\"></a></p>\n\n<p>How would I downgrade Kotlin? IntelliJ IDEA 15.0.4</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1456480204, "post_id": 35644629, "comment_id": 58977006, "body": "Looks like a problem with build \\ project configuration. Can you build it from CLI? Please answer here"}], "answers": [{"comments": [{"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "edited": false, "score": 0, "creation_date": 1456467917, "post_id": 35644927, "comment_id": 58970507, "body": "Thanks, but in <code>File(&quot;target&#47;wdef&#47;index.html&quot;).writeText(result.toString())</code> the <code>writeText</code> part is also highlighted red."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "reply_to_user": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "edited": false, "score": 0, "creation_date": 1456480146, "post_id": 35644927, "comment_id": 58976967, "body": "Are you sure the whole project is resolved? There should be more includes imo."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 3, "last_activity_date": 1456467820, "creation_date": 1456467820, "answer_id": 35644927, "question_id": 35644629, "link": "https://stackoverflow.com/questions/35644629/why-doesnt-kotlin-let-me-use-writetext-extension/35644927#35644927", "title": "Why doesn&#39;t Kotlin let me use writeText extension?", "body": "<p>A problem might be that you pass a wrong type to <code>writeText</code>. It requires <code>String</code>, but you pass an html building object <code>HTML</code>. Try to convert it with <code>toString</code>: </p>\n\n<pre><code>File(\"target/wdef/index.html\").writeText(result.toString())\n</code></pre>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 35644927, "answer_count": 1, "score": 0, "last_activity_date": 1456467820, "creation_date": 1456466526, "question_id": 35644629, "link": "https://stackoverflow.com/questions/35644629/why-doesnt-kotlin-let-me-use-writetext-extension", "title": "Why doesn&#39;t Kotlin let me use writeText extension?", "body": "<p>I have a Kotlin class with a method, which creates some text and then I want to write it to a file:</p>\n\n<pre><code>import java.io.File\nimport java.util.*\nimport kotlin.io.*\n\nclass MyClass {\n    fun run() {\n        val result = html {\n            head {\n                title { +\"Entry page\" }\n            }\n            body {\n                h1 {\n                    +\"Map\"\n                }\n                +\"Some HTML code\"\n            }\n        }\n        File(\"target/wdef/index.html\").writeText(result)\n    }\n}\n</code></pre>\n\n<p>I get an error - the <code>writeText(result)</code> is highlighted red and I get the error message <code>Error:(26, 40) Kotlin: Unresolved reference: writeText</code>.</p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 4, "last_activity_date": 1456471646, "last_edit_date": 1456471646, "creation_date": 1456467985, "answer_id": 35644969, "question_id": 35644163, "link": "https://stackoverflow.com/questions/35644163/arraylistof-and-hashmapof-unresolved-reference/35644969#35644969", "title": "arrayListOf and hashMapOf: Unresolved reference", "body": "<p>Make sure you use the latest 1.0 kotlin plugin and 1.0 runtime. After that invalidating IJ caches and restarting IJ might be a good idea.</p>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 0, "accepted_answer_id": 35644969, "answer_count": 1, "score": 1, "last_activity_date": 1456471646, "creation_date": 1456464476, "question_id": 35644163, "link": "https://stackoverflow.com/questions/35644163/arraylistof-and-hashmapof-unresolved-reference", "title": "arrayListOf and hashMapOf: Unresolved reference", "body": "<p>I'm trying to play with the Kotlin <a href=\"http://try.kotlinlang.org/#/Examples/Longer%20examples/HTML%20Builder/HTML%20Builder.kt\" rel=\"nofollow noreferrer\">HTML builder example</a> on my local machine.</p>\n\n<p>In</p>\n\n<pre><code>abstract class Tag(val name: String) : Element {\n    val children = arrayListOf&lt;Element&gt;()\n    val attributes = hashMapOf&lt;String, String&gt;()\n</code></pre>\n\n<p>IntelliJ idea rants about <code>arrayListOf</code> and <code>hashMapOf</code> being unresolved.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7p8ua.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7p8ua.png\" alt=\"Screenshot\"></a></p>\n\n<p>Importing <code>kotlin.collections</code> (<code>import kotlin.collections.*</code>), where <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/array-list-of.html\" rel=\"nofollow noreferrer\">arrayListOf</a> is defined, didn't help.</p>\n\n<p>How can I fix those errors?</p>\n"}, {"tags": ["java", "android", "jvm", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 0, "creation_date": 1456448017, "post_id": 35641269, "comment_id": 58964199, "body": "Thank you for the response. I am now interested in Kotlin&#39;s expanded reflection capabilities."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "edited": false, "score": 2, "creation_date": 1456449560, "post_id": 35641269, "comment_id": 58964638, "body": "@fergDEV Kotlin has more runtime information available than typical Java. See:  <a href=\"https://kotlinlang.org/docs/reference/reflection.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/reflection.html</a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/index.ht&zwnj;&#8203;ml</a> and <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/index.html\" rel=\"nofollow noreferrer\">kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/&hellip;</a>"}], "tags": [], "owner": {"reputation": 20461, "user_id": 1452094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a12b28824b215e4886da2e9f376369f?s=128&d=identicon&r=PG", "display_name": "Kiskae", "link": "https://stackoverflow.com/users/1452094/kiskae"}, "is_accepted": true, "score": 3, "last_activity_date": 1456447362, "creation_date": 1456447362, "answer_id": 35641269, "question_id": 35641204, "link": "https://stackoverflow.com/questions/35641204/kotlin-accessing-java-class/35641269#35641269", "title": "Kotlin accessing Java class", "body": "<p>Because <code>MyActivity::class</code> returns a <code>KClass&lt;MyActivity&gt;</code> object.\nThis is an extended object that is part of kotlin's expanded reflection capabilities.\nSince people also need to access the java class for backwards-compatibility it is included as the field <code>java</code> on the <code>KClass</code> object.</p>\n"}], "owner": {"reputation": 861, "user_id": 1236581, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/pG9V0.jpg?s=128&g=1", "display_name": "fergdev", "link": "https://stackoverflow.com/users/1236581/fergdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 35641269, "answer_count": 1, "score": 1, "last_activity_date": 1456447362, "creation_date": 1456446965, "question_id": 35641204, "link": "https://stackoverflow.com/questions/35641204/kotlin-accessing-java-class", "title": "Kotlin accessing Java class", "body": "<p>Why in Kotlin do you need to access they Java class of an object using </p>\n\n<pre><code>MyActivity::class.java\n</code></pre>\n\n<p>I have been told is something to do with Kotlin's interoperability with JS ... Any thoughts?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456431334, "post_id": 35634803, "comment_id": 58956293, "body": "Why can&#39;t you just use a class with whatever is the appropriate visibility modifier?"}, {"owner": {"reputation": 279, "user_id": 5981797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhK17uDO3NE/AAAAAAAAAAI/AAAAAAAABWI/H9x213QWPhI/photo.jpg?sz=128", "display_name": "gmariotti", "link": "https://stackoverflow.com/users/5981797/gmariotti"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456433243, "post_id": 35634803, "comment_id": 58957378, "body": "@CaseyB sorry, in which sense?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456434300, "post_id": 35634803, "comment_id": 58958045, "body": "I&#39;m sorry I misread what you&#39;re trying to do. You want to make Database controller have a static method that returns an instance of itself, right?"}, {"owner": {"reputation": 279, "user_id": 5981797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhK17uDO3NE/AAAAAAAAAAI/AAAAAAAABWI/H9x213QWPhI/photo.jpg?sz=128", "display_name": "gmariotti", "link": "https://stackoverflow.com/users/5981797/gmariotti"}, "reply_to_user": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456434594, "post_id": 35634803, "comment_id": 58958198, "body": "@CaseyB yes, in order to hide the SQLiteDatabase. The main problem is that with Kotlin I didn&#39;t find any official translation of it."}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456435073, "post_id": 35634803, "comment_id": 58958506, "body": "I added an answer that should do what you want. It&#39;s almost a direct port of the Java you have."}], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 3319383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b36DA.gif?s=128&g=1", "display_name": "LucasFM", "link": "https://stackoverflow.com/users/3319383/lucasfm"}, "edited": false, "score": 0, "creation_date": 1456476457, "post_id": 35638533, "comment_id": 58974631, "body": "You can also define the constructor in the class declaration : class DatabaseController(val context: Context){...} and define an init{...} block"}, {"owner": {"reputation": 279, "user_id": 5981797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhK17uDO3NE/AAAAAAAAAAI/AAAAAAAABWI/H9x213QWPhI/photo.jpg?sz=128", "display_name": "gmariotti", "link": "https://stackoverflow.com/users/5981797/gmariotti"}, "edited": false, "score": 0, "creation_date": 1456478272, "post_id": 35638533, "comment_id": 58975743, "body": "My only doubt about this solution is: the companion object works like a static field in java right? So, it will not instantiate &#39;instance&#39; everytime, am I correct?"}, {"owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "edited": false, "score": 0, "creation_date": 1456492576, "post_id": 35638533, "comment_id": 58985552, "body": "It will instantiate instance the first time getInstance is called. After that it will return the existing instance."}, {"owner": {"reputation": 279, "user_id": 5981797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhK17uDO3NE/AAAAAAAAAAI/AAAAAAAABWI/H9x213QWPhI/photo.jpg?sz=128", "display_name": "gmariotti", "link": "https://stackoverflow.com/users/5981797/gmariotti"}, "edited": false, "score": 1, "creation_date": 1456503599, "post_id": 35638533, "comment_id": 58993797, "body": "Thank you so much!! &quot;Kotlin in Action&quot; tricked me because shows object with singleton as an example, while companion object with factory methods, so I wasn&#39;t sure of what really was working and what wasn&#39;t."}], "tags": [], "owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "is_accepted": true, "score": 5, "last_activity_date": 1456435034, "creation_date": 1456435034, "answer_id": 35638533, "question_id": 35634803, "link": "https://stackoverflow.com/questions/35634803/kotlin-best-way-to-convert-singleton-databasecontroller-in-android/35638533#35638533", "title": "Kotlin - Best way to convert Singleton DatabaseController in Android", "body": "<p>I think what you want is a companion object:</p>\n\n<pre><code>class DatabaseController\n{\n    private constructor(context: Context)\n    {\n        // ...\n    }\n\n    companion object\n    {\n        private var instance: DatabaseController? = null\n        fun getInstance(context: Context): DatabaseController\n        {\n            if(instance == null)\n            {\n                instance = DatabaseController(context)\n            }\n\n            return instance!!\n        }\n    }\n}\n</code></pre>\n\n<p>Then you can just call it like this:</p>\n\n<pre><code>val databaseController = DatabaseController.getInstance(context)\n</code></pre>\n"}], "owner": {"reputation": 279, "user_id": 5981797, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qhK17uDO3NE/AAAAAAAAAAI/AAAAAAAABWI/H9x213QWPhI/photo.jpg?sz=128", "display_name": "gmariotti", "link": "https://stackoverflow.com/users/5981797/gmariotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1922, "favorite_count": 1, "accepted_answer_id": 35638533, "answer_count": 1, "score": 5, "last_activity_date": 1456435034, "creation_date": 1456423128, "last_edit_date": 1456425110, "question_id": 35634803, "link": "https://stackoverflow.com/questions/35634803/kotlin-best-way-to-convert-singleton-databasecontroller-in-android", "title": "Kotlin - Best way to convert Singleton DatabaseController in Android", "body": "<p>I'm learning Kotlin from \"Kotlin in Action\" and I'm slowly converting an Android app code to it. But I have found some problem in converting the following class.</p>\n\n<pre><code>public class DatabaseController {\n  private static DatabaseController sDatabaseController;\n\n  private SQLiteDatabase mDatabase;\n\n  private DatabaseController(Context context) {\n    mDatabase = new SQLiteOpenHelperImpl(context.getApplicationContext())\n            .getWritableDatabase();\n  }\n\n  public static DatabaseController getDatabaseController(Context context) {\n    if (sDatabaseController == null) {\n        sDatabaseController = new DatabaseController(context);\n    }\n    return sDatabaseController;\n  }\n\n  public void addElement(Element element) {\n    if (element != null) {\n        ContentValues values = getContentValues(element);\n\n        mDatabase.beginTransaction();\n        try {\n            // insert element\n            mDatabase.setTransactionSuccessful();\n        } finally {\n            mDatabase.endTransaction();\n        }\n    }\n}\n</code></pre>\n\n<p>I've come up with two different Kotlin implementation, but neither of them fully convince me. Which one can be considered a better solution? Or does exist a third one that is better?</p>\n\n<p>First implementation using object</p>\n\n<pre><code>object DatabaseControllerObject {\n  private var mDatabase : SQLiteDatabase? = null\n\n  fun initDatabase(context: Context) {\n    mDatabase = mDatabase?: SQLiteOpenHelperImpl(context.applicationContext).writableDatabase\n  }\n\n  fun addElement(context: Context, element: Element) {\n    initDatabase(context)\n    // insert alarm\n    mDatabase?.let {\n    // CODE\n    }\n}\n</code></pre>\n\n<p>Second implementation with everything in a single file, where I call initDatabase(..) in the onCreate() of each activity that needs the database</p>\n\n<pre><code>private var mDatabase: SQLiteDatabase? = null\n\nfun initDatabase(context: Context) {\n    mDatabase = mDatabase ?: SQLiteOpenHelperImpl(context.applicationContext).writableDatabase\n}\n\nfun addElement(element: Element) {\n    val values = getContentValues(element)\n\n    mDatabase?.let {\n        it.beginTransaction()\n        try {\n          // insert\n          it.setTransactionSuccessful()\n        } finally {\n          it.endTransaction()\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "gradle", "android-gradle-plugin", "travis-ci", "kotlin"], "comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456426901, "post_id": 35634437, "comment_id": 58953611, "body": "what version of the JDK?  can you change to build on JDK 8, even though you are targetting android it is allowed.  Then you don&#39;t have to adjust permgen, otherwise you need to give more permgen space to gradle.  This is not a Kotlin issue, more of a Gradle issue."}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456427078, "post_id": 35634437, "comment_id": 58953716, "body": "@JaysonMinard this is an android build as described in config. <a href=\"https://docs.travis-ci.com/user/languages/android/\" rel=\"nofollow noreferrer\">docs.travis-ci.com/user/languages/android</a>"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 3744384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb28e336b8561c0653eb1962fcaef8e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3744384_", "link": "https://stackoverflow.com/users/3744384/user3744384"}, "edited": false, "score": 0, "creation_date": 1456430799, "post_id": 35636041, "comment_id": 58955973, "body": "in which file i should add these lines? in /build.gradle or /app/build.gradle? and in where of the file? here&#39;re the files: <a href=\"http://pastebin.com/n5sHAjtR\" rel=\"nofollow noreferrer\">pastebin.com/n5sHAjtR</a>  <a href=\"http://pastebin.com/Y5VX49rb\" rel=\"nofollow noreferrer\">pastebin.com/Y5VX49rb</a>  sorry, but i&#39;m not an expert with gradle"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 327, "user_id": 3744384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb28e336b8561c0653eb1962fcaef8e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3744384_", "link": "https://stackoverflow.com/users/3744384/user3744384"}, "edited": false, "score": 0, "creation_date": 1456431108, "post_id": 35636041, "comment_id": 58956156, "body": "Looks like you should add these lines into  /app/build.gradle"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 327, "user_id": 3744384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb28e336b8561c0653eb1962fcaef8e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3744384_", "link": "https://stackoverflow.com/users/3744384/user3744384"}, "edited": false, "score": 0, "creation_date": 1456441831, "post_id": 35636041, "comment_id": 58962060, "body": "@user3744384 top level, unless you have you subprojects (which I doubt)."}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 2, "last_activity_date": 1456426939, "creation_date": 1456426939, "answer_id": 35636041, "question_id": 35634437, "link": "https://stackoverflow.com/questions/35634437/travis-ci-build-failing-cause-permgen-space/35636041#35636041", "title": "travis ci build failing - cause: PermGen space", "body": "<p><a href=\"https://plumbr.eu/outofmemoryerror/permgen-space\" rel=\"nofollow\">PermGen Space described here</a>.</p>\n\n<p>I suggest to add this lines into your <code>build.gradle</code> to increse size of permgen for tests:</p>\n\n<pre><code>test {\n    jvmArgs \"-XX:MaxPermSize=256m\"\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 3744384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb28e336b8561c0653eb1962fcaef8e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3744384_", "link": "https://stackoverflow.com/users/3744384/user3744384"}, "is_accepted": true, "score": 3, "last_activity_date": 1456497865, "creation_date": 1456497865, "answer_id": 35654660, "question_id": 35634437, "link": "https://stackoverflow.com/questions/35634437/travis-ci-build-failing-cause-permgen-space/35654660#35654660", "title": "travis ci build failing - cause: PermGen space", "body": "<p>I solved it.</p>\n\n<p>I changed my .travis.yml file adding: </p>\n\n<pre><code>env:\n- GRADLE_OPTS=\"-Xmx512m -XX:MaxPermSize=512m\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6568, "user_id": 551269, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6hGbq.jpg?s=128&g=1", "display_name": "Markus Junginger", "link": "https://stackoverflow.com/users/551269/markus-junginger"}, "is_accepted": false, "score": 0, "last_activity_date": 1467735509, "creation_date": 1467735509, "answer_id": 38208196, "question_id": 35634437, "link": "https://stackoverflow.com/questions/35634437/travis-ci-build-failing-cause-permgen-space/38208196#38208196", "title": "travis ci build failing - cause: PermGen space", "body": "<p>Alternatively, you can use Java 8 to avoid PermGen trouble altogether. Add this to your .travis.yml:</p>\n\n<pre><code>jdk:\n  - oraclejdk8\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 3744384, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb28e336b8561c0653eb1962fcaef8e6?s=128&d=identicon&r=PG&f=1", "display_name": "user3744384_", "link": "https://stackoverflow.com/users/3744384/user3744384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 35654660, "answer_count": 3, "score": 3, "last_activity_date": 1467735509, "creation_date": 1456422061, "last_edit_date": 1456426915, "question_id": 35634437, "link": "https://stackoverflow.com/questions/35634437/travis-ci-build-failing-cause-permgen-space", "title": "travis ci build failing - cause: PermGen space", "body": "<p>I created a android application with Kotlin and I added Travis CI support in the repo.\nThe build is always failing.</p>\n\n<p>Cause: PermGen space</p>\n\n<p>What does it mean? My .travis.yml file is</p>\n\n<pre><code>language: android\nandroid:\n  components:\n    - tools\n    - platform-tools\n    - build-tools-23.0.2\n    - android-23\n</code></pre>\n"}, {"tags": ["android", "annotations", "kotlin", "dagger", "butterknife"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1456421302, "post_id": 35633761, "comment_id": 58950029, "body": "These two questions look unrelated to me, please don&#39;t ask two different questions in a single SO post next time"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "reply_to_user": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1456421436, "post_id": 35633761, "comment_id": 58950126, "body": "I posted them in the same question because the do seem related. I don&#39;t think it&#39;s a dagger or butterknife bug - I think it&#39;s a kotlin bug. I&#39;m not trying to find solutions for the error - I know them, I want to understand the cause"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456421833, "post_id": 35633761, "comment_id": 58950379, "body": "They likely are two different issues.  One for the methods, and another for where you placed the annotation on a property.  Read about Annotation Use-Site targets and see if that helps to resolve the 2nd one <a href=\"https://kotlinlang.org/docs/reference/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a> along with maybe making it a JvmField dpending on what butterknife wants <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#instance-fields\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/&hellip;</a>"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456421874, "post_id": 35633761, "comment_id": 58950404, "body": "Did you look at KnotterKnife?  <a href=\"https://github.com/JakeWharton/kotterknife\" rel=\"nofollow noreferrer\">github.com/JakeWharton/kotterknife</a> which is like Butterknife but written for Kotlin"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456421964, "post_id": 35633761, "comment_id": 58950468, "body": "Also there are Kotlin specific dependency injection libraries that understand Kotlin better than something from Java will.  For example, Java can&#39;t see nullability, and cannot construct a Kotlin object while using default parameters (unless you use @JvmOverloads), cannot see parameter names.  So a primitive system is trying to use a more advanced without understanding it.  Injekt and Kodein might be useful."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1456422031, "post_id": 35633761, "comment_id": 58950514, "body": "so as @AlexanderUdalov says, you likely have two different issues completely in one SO question."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456422229, "post_id": 35633761, "comment_id": 58950623, "body": "For your first problem, it seems odd that this would be a Kotlin issue.  They are normal classes with normal methods and the byte code would be identical to Java doing the same.   Do the classes need to be extendable?  (i.e. <code>open class</code>) instead of final?   I would think it would fail in Java, this exact case because there isn&#39;t a difference.  Your issue with properties COULD be related to the target of the annotation, but this other case I think is you or dagger bug"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456422564, "post_id": 35633761, "comment_id": 58950849, "body": "I see... should I split this question into two somehow then? It just seems very unlikely encountering two issues that seem related (both because of similar variable/method names) one after another..  Also, I tried reproducing the first issue in Java and was not successful, it is definitely a kotlin only issue"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456422696, "post_id": 35633761, "comment_id": 58950933, "body": "I don&#39;t see how they can be related, checking your test project now."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456422726, "post_id": 35633761, "comment_id": 58950952, "body": "what is the java equivalent, is it in your test project?"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456422812, "post_id": 35633761, "comment_id": 58951002, "body": "It is, you can find it in this commit: <a href=\"https://github.com/maxandron/DaggerIssue325/tree/422f45db6ce19c315fd6b9d749c11cb3a748fee1\" rel=\"nofollow noreferrer\">github.com/maxandron/DaggerIssue325/tree/&hellip;</a>  Thanks for your help Jayson!"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456422968, "post_id": 35633761, "comment_id": 58951106, "body": "The issue could be order of compilation, are you using Kapt?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456423016, "post_id": 35633761, "comment_id": 58951138, "body": "your project files aren&#39;t usable, for some reason they have hard coded paths to modules."}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456423047, "post_id": 35633761, "comment_id": 58951150, "body": "I am. I&#39;ll try to commit it again"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456423167, "post_id": 35633761, "comment_id": 58951225, "body": "You have source sets for <code>src&#47;main&#47;kotlin</code> in your gradle but then put your source in <code>src&#47;main&#47;java</code>, is that an issue?"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456423320, "post_id": 35633761, "comment_id": 58951322, "body": "No, it shouldn&#39;t be - It just adds the sources. In my other project I have some sources in /java and some in /kotlin"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456423477, "post_id": 35633761, "comment_id": 58951413, "body": "So is your error from gradle command-line build or IDE build?"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456423521, "post_id": 35633761, "comment_id": 58951437, "body": "from IDE build (android studio)"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456423711, "post_id": 35633761, "comment_id": 58951549, "body": "I think I removed all files that might contain hard coded paths from the repository"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456424768, "post_id": 35633761, "comment_id": 58952167, "body": "I can&#39;t get android studio to load your project well enough to do anything, I think an android person can help more, especially as they use Kapt and related tools more.   \t Could be a bug somewhere in annotation processing, how names are mangled, etc. You&#39;ll need to narrow it down more, maybe enter a bug in YouTrack (youtrack.jetbrains.com), or ask people in the #android channel on Kotlin slack since they may have encountered this or will tell you what they use instead. kotlinlang.org/community.html"}], "answers": [{"comments": [{"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1456702163, "post_id": 35689443, "comment_id": 59057121, "body": "Thanks for your effort, obviously I always have the ability to switch off libraries I used before. But I don&#39;t want to. The porpuse of using Kotlin is for it to be completely interoperable with Java. In any case, after researching it, and posting a bug on the tracker. It is definetlly a bug with kapt. I will update here when it is fixed. Right now I switch butterknife to &#39;kotlin android extensions&#39; plugin"}], "tags": [], "owner": {"reputation": 633, "user_id": 2289410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/uOXc5.jpg?s=128&g=1", "display_name": "Derek", "link": "https://stackoverflow.com/users/2289410/derek"}, "is_accepted": false, "score": 0, "last_activity_date": 1456701561, "last_edit_date": 1456701561, "creation_date": 1456700872, "answer_id": 35689443, "question_id": 35633761, "link": "https://stackoverflow.com/questions/35633761/kotlin-annotation-processing-ignores-items-with-similar-names/35689443#35689443", "title": "Kotlin annotation processing ignores items with similar names", "body": "<p>So to somewhat answer the <code>kotlin.UninitializedPropertyAccessException: lateinit</code> issue, I was running into the exact same thing in my <a href=\"https://github.com/derekcsm/hubble_gallery/\" rel=\"nofollow\">project</a>. What I did which \"solved the issue\" for me was to remove Butterknife from the offending class, in this case it was just a viewHolder for my new expandable RecyclerView, and then run the app again. </p>\n\n<p>Running the app, after switching all my <code>@Bind(R.id.my_view_id)</code> to the \"old school\" <code>findViewById(R.id.my_view_id) as MyViewType</code> worked, but then subsequently afterwards I switched the same class <em>back</em> to <code>Butterknife</code> and the <code>UninitializedPropertyAccessException</code> went away, and it seems like it won't come back unless something in the class changes, then you'll have to repeat this process again. </p>\n\n<p>My suspicion here is that this has something to do with Kotlin not supporting incremental compilation, and somehow by changing the auto-generated code it was forced to recompile. But I could be way off here, just thought I'd share my experience.</p>\n"}, {"comments": [{"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1458554445, "post_id": 36117791, "comment_id": 59894827, "body": "Nice find! I see here that fields are also only <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/tools/kotlin-annotation-processing/src/main/kotlin/org/jetbrains/kotlin/annotation/AnnotationProcessorWrapper.kt#L49\" rel=\"nofollow noreferrer\">checked by name</a>, which explains butterknife.  In any case, they are away of the problem and fixing it - I will post here when it is resolved"}, {"owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 0, "creation_date": 1458554493, "post_id": 36117791, "comment_id": 59894860, "body": "Also means I was right to post those two problems in the same questions (And being right is always good :))"}, {"owner": {"reputation": 406, "user_id": 3263582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07525cae689f11c42f0eea3f08e88ee8?s=128&d=identicon&r=PG", "display_name": "inorichi", "link": "https://stackoverflow.com/users/3263582/inorichi"}, "reply_to_user": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "edited": false, "score": 1, "creation_date": 1458871054, "post_id": 36117791, "comment_id": 60058762, "body": "I just found a pull request already open <a href=\"https://github.com/JetBrains/kotlin/pull/822\" rel=\"nofollow noreferrer\">github.com/JetBrains/kotlin/pull/822</a>"}], "tags": [], "owner": {"reputation": 406, "user_id": 3263582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07525cae689f11c42f0eea3f08e88ee8?s=128&d=identicon&r=PG", "display_name": "inorichi", "link": "https://stackoverflow.com/users/3263582/inorichi"}, "is_accepted": false, "score": 3, "last_activity_date": 1458499480, "last_edit_date": 1458499480, "creation_date": 1458498583, "answer_id": 36117791, "question_id": 35633761, "link": "https://stackoverflow.com/questions/35633761/kotlin-annotation-processing-ignores-items-with-similar-names/36117791#36117791", "title": "Kotlin annotation processing ignores items with similar names", "body": "<p>I was having this issue, so I started to investigate and it's caused because <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/tools/kotlin-annotation-processing/src/main/kotlin/org/jetbrains/kotlin/annotation/AnnotationProcessorWrapper.kt#L40\" rel=\"nofollow\">Kapt is only checking the method name</a> when comparing them, <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/tools/kotlin-annotation-processing/src/main/kotlin/org/jetbrains/kotlin/annotation/KotlinAnnotationProvider.kt#L100\" rel=\"nofollow\">and they are added in a set</a>, thus duplicates are not allowed. The same happens for annotated fields, so currently you can have one method/field name per annotation.</p>\n\n<p>I added the class name to the <code>equals</code> method and the annotations were properly handled now, but the tests broke and I don't know how they work, so I hope someone knows how to fix this.</p>\n"}, {"tags": [], "owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "is_accepted": true, "score": 1, "last_activity_date": 1460043974, "last_edit_date": 1460043974, "creation_date": 1459440540, "answer_id": 36338496, "question_id": 35633761, "link": "https://stackoverflow.com/questions/35633761/kotlin-annotation-processing-ignores-items-with-similar-names/36338496#36338496", "title": "Kotlin annotation processing ignores items with similar names", "body": "<p>It turned out to be a bug with kapt.\nI <a href=\"https://youtrack.jetbrains.com/issue/KT-11201\" rel=\"nofollow\">posted an issue</a> on Kotlin's bug tracker and the issue is now marked as fixed.</p>\n\n<p><a href=\"https://github.com/JetBrains/kotlin/pull/823\" rel=\"nofollow\">This solution was merged</a></p>\n\n<p>Should be resolved in Kotlin version 1.0.2</p>\n"}], "owner": {"reputation": 1620, "user_id": 3497739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe352a05b70a726f7919d54236b21ef?s=128&d=identicon&r=PG", "display_name": "maxandron", "link": "https://stackoverflow.com/users/3497739/maxandron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 0, "accepted_answer_id": 36338496, "answer_count": 3, "score": 9, "last_activity_date": 1460043974, "creation_date": 1456420034, "last_edit_date": 1459441149, "question_id": 35633761, "link": "https://stackoverflow.com/questions/35633761/kotlin-annotation-processing-ignores-items-with-similar-names", "title": "Kotlin annotation processing ignores items with similar names", "body": "<p>I recently converted the majority of my project to kotlin. Now I encounter several unusual errors that all seem to relate to annotation libraries. Needless to say, it didn't happen in Java.</p>\n\n<p>I'll describe the cases - one in Dagger and one in Butterknife.</p>\n\n<p>1.\nWhen having 2 <code>@Provides</code> methods in different models with the same name.\nFor example in file \"FooProvider.kt\" having a \"provideFooOrBar\" method</p>\n\n<pre><code>@Module\nclass FooProvider(private val view: FooActivity) {\n    ... \n    @Provides @FooScope fun provideView() = view\n    @Provides @FooScope fun provideFooOrBar() = Foo()\n}\n</code></pre>\n\n<p>And having another file \"BarProvider.kt\" with the same method name</p>\n\n<pre><code>@Module\nclass BarProvider(private val view: BarActivity) {\n    ...\n    @Provides @BarScope fun provideView() = view\n    @Provides @BarScope fun provideFooOrBar() = Bar()\n}\n</code></pre>\n\n<p>In this case, Dagger fails to generate some factory libraries and I get the following compilation error:\n<code>Error:(27, 32) error: cannot find symbol class FooProvider_ProvideFooOrBarFactory</code></p>\n\n<p>A sample project reproducing the issue can be found at <a href=\"https://github.com/maxandron/DaggerIssue325\" rel=\"nofollow noreferrer\">https://github.com/maxandron/DaggerIssue325</a></p>\n\n<p>2.\nThis is an issue when using Butterknife. When having two <code>@Bind</code> annotated variables in two different classes - One of them just fails to initialize at runtime without any compilation error!</p>\n\n<p>For example if I have:</p>\n\n<pre><code>class FooActivity {\n    @Bind(R.id.foo) lateinit var mFoo: View\n}\nclass NotFooActivity {\n    @Bind(R.id.not_foo) lateinit var mFoo: View\n}\n</code></pre>\n\n<p>Then one of them (or both?) will just fail to initialize without any error. Causing a <code>kotlin.UninitializedPropertyAccessException: lateinit property mFoo has not been initialized</code> exception to be thrown when the field is accessed.</p>\n\n<hr>\n\n<p>Is it something I'm doing wrong in configuring Kotlin or is it a kotlin bug?</p>\n\n<p>Thank you in advance!\nRon</p>\n"}, {"tags": ["java", "overriding", "kotlin", "data-class"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1456420685, "post_id": 35631290, "comment_id": 58949634, "body": "<code>!</code> in the signature means that this is a platofrm type, i.e. a type coming from Java. You can find out more about that <a href=\"http://kotlinlang.org/docs/reference/java-interop.html#notation-for-platform-types\" rel=\"nofollow noreferrer\">in the docs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 912, "user_id": 1561129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4657eeb3f4a42306748960f970ba08c?s=128&d=identicon&r=PG", "display_name": "Odysseus", "link": "https://stackoverflow.com/users/1561129/odysseus"}, "edited": false, "score": 0, "creation_date": 1456416558, "post_id": 35631823, "comment_id": 58946468, "body": "Nice answer! One more thing: does this mean that getters/setters are not regular methods as in Java?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "reply_to_user": {"reputation": 912, "user_id": 1561129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4657eeb3f4a42306748960f970ba08c?s=128&d=identicon&r=PG", "display_name": "Odysseus", "link": "https://stackoverflow.com/users/1561129/odysseus"}, "edited": false, "score": 2, "creation_date": 1456420582, "post_id": 35631823, "comment_id": 58949561, "body": "In the resulting bytecode, and from Java&#39;s point of view, they are the same. A property getter is compiled to a method named <code>getXxx</code>. But for Kotlin (version 1.0.0), property accessors and functions are different and you can&#39;t mix the two in the hierarchy."}, {"owner": {"reputation": 3871, "user_id": 889053, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3e26b08aa9c9bff40d6dab7b98680bf4?s=128&d=identicon&r=PG", "display_name": "Christian Bongiorno", "link": "https://stackoverflow.com/users/889053/christian-bongiorno"}, "edited": false, "score": 0, "creation_date": 1496447692, "post_id": 35631823, "comment_id": 75681487, "body": "Is there any discussion about changing this? Is there a reason this shouldn&#39;t just <i>work</i>?"}, {"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 1, "creation_date": 1496651315, "post_id": 35631823, "comment_id": 75730732, "body": "There&#39;s <a href=\"https://youtrack.jetbrains.com/issue/KT-6653\" rel=\"nofollow noreferrer\">an issue here</a>. One of the problems is that you can&#39;t override a <code>val x</code> by a <code>fun getX</code> or vice versa in Kotlin (by design), so all kinds of complex questions show up if you have a mixed hierarchy of Kotlin and Java code where some classes use properties and some -- functions."}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 48, "last_activity_date": 1611278403, "last_edit_date": 1611278403, "creation_date": 1456414854, "answer_id": 35631823, "question_id": 35631290, "link": "https://stackoverflow.com/questions/35631290/kotlin-data-class-implementing-java-interface/35631823#35631823", "title": "Kotlin data class implementing Java interface", "body": "<p>The problem here is that Kotlin loads the Java class <code>Entity</code> first and it sees <code>getId</code> as a function, not as a getter of some property. A property getter in a Kotlin class cannot override a function, so the property <code>id</code> is not bound as an implementation of the <code>getId</code> function.</p>\n<p>To workaround this, you should override the original function <code>getId</code> in your Kotlin class. Doing so will result in JVM signature clash between your new function and <code>id</code>'s getter in the bytecode, so you should also prevent the compiler from generating the getter by making the property <code>private</code>:</p>\n<pre><code>data class Video(\n    private val id: Long,\n    ...\n): Entity {\n    override fun getId() = id\n\n    ...\n}\n</code></pre>\n<p>Note that this answer has been adapted from here: <a href=\"https://stackoverflow.com/a/32971284/288456\">https://stackoverflow.com/a/32971284/288456</a></p>\n"}, {"tags": [], "owner": {"reputation": 24144, "user_id": 236136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0e19db7587af9b97db7aa2db7d1eb909?s=128&d=identicon&r=PG", "display_name": "CaseyB", "link": "https://stackoverflow.com/users/236136/caseyb"}, "is_accepted": false, "score": 1, "last_activity_date": 1456414878, "creation_date": 1456414878, "answer_id": 35631835, "question_id": 35631290, "link": "https://stackoverflow.com/questions/35631290/kotlin-data-class-implementing-java-interface/35631835#35631835", "title": "Kotlin data class implementing Java interface", "body": "<p>If this is your whole data class then you're not overriding getId(). I see that you have a property called id and Kotlin should generate a getter for that but that won't be marked with the override keyword which you need to indicate that you're overriding an abstract function.</p>\n\n<p>-- EDIT --\nAlexander beat me to it! His answer is better anyway! ;)</p>\n"}], "owner": {"reputation": 912, "user_id": 1561129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4657eeb3f4a42306748960f970ba08c?s=128&d=identicon&r=PG", "display_name": "Odysseus", "link": "https://stackoverflow.com/users/1561129/odysseus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11844, "favorite_count": 2, "accepted_answer_id": 35631823, "answer_count": 2, "score": 33, "last_activity_date": 1611278403, "creation_date": 1456413484, "last_edit_date": 1464703187, "question_id": 35631290, "link": "https://stackoverflow.com/questions/35631290/kotlin-data-class-implementing-java-interface", "title": "Kotlin data class implementing Java interface", "body": "<p>I'm trying to introduce Kotlin into my current project. I've decided to begin with entities, which seem to map perfectly to data classes.\nFor example I have a data class:</p>\n\n<pre><code>data class Video(val id: Long, val ownerId: Long, val title: String, val description: String? = null,\n             val imgLink: String? = null, val created: Date? = null, val accessKey: String? = null,\n             val views: Long? = null, val comments: Long? = null, val videoLink: String? = null): Entity\n</code></pre>\n\n<p>Which implements Java interface:</p>\n\n<pre><code>public interface Entity {\n   Long getId();  \n}\n</code></pre>\n\n<p>But for some reason compiler doesn't understand that method is implemented already:</p>\n\n<blockquote>\n  <p>Class 'Video' must be declared abstract or implement abstract member public abstract fun getId(): kotlin.Long! defined in net.alfad.data.Entity</p>\n</blockquote>\n\n<p>Do I have to use any additional keywords for id param? What does \"!\" mean in the signature?</p>\n"}, {"tags": ["kotlin", "iterable", "lazy-sequences"], "answers": [{"comments": [{"owner": {"reputation": 3738, "user_id": 1812434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gTQAt.jpg?s=128&g=1", "display_name": "Venkata Raju", "link": "https://stackoverflow.com/users/1812434/venkata-raju"}, "edited": false, "score": 3, "creation_date": 1456414076, "post_id": 35630670, "comment_id": 58944430, "body": "Probably a big surprise for <code>Java</code> (mostly <code>Guava</code>) fans"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 3738, "user_id": 1812434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gTQAt.jpg?s=128&g=1", "display_name": "Venkata Raju", "link": "https://stackoverflow.com/users/1812434/venkata-raju"}, "edited": false, "score": 0, "creation_date": 1456416055, "post_id": 35630670, "comment_id": 58946085, "body": "@VenkataRaju for functional people they might be surprised at the alternative of lazy by default."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 9, "creation_date": 1456416120, "post_id": 35630670, "comment_id": 58946139, "body": "Lazy by default is usually less performant for smaller and more commonly used collections. A copy can be faster than a lazy eval if taking advantage of CPU cache and so on.  So for common use cases is better to not be lazy.  And unfortunately the common contracts for functions like <code>map</code>, <code>filter</code> and others don&#39;t carry enough information to decide other than from the source collection type, and since most collections are also Iterable, that isn&#39;t a good marker for &quot;be lazy&quot; because it is commonly EVERYWHERE.  lazy must be explicit to be safe."}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456442395, "post_id": 35630670, "comment_id": 58962260, "body": "@JaysonMinard, thanks for your remark, updated the answer."}, {"owner": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1465467968, "post_id": 35630670, "comment_id": 62918078, "body": "@JaysonMinard Excellent answers. The performance inversion comments are an unexpected insight. I recently noticed the default collection operations were making copies, was outraged, and seeked out an alternative: sequences. Is there a good rule of thumb or a very very brief summary writeup on how each approach performs on the average computers of today? If the choice isn&#39;t so simple, as you say, a simple guideline would help some of us who are prone to overthinking about those kinds of things."}, {"owner": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "edited": false, "score": 0, "creation_date": 1465468372, "post_id": 35630670, "comment_id": 62918332, "body": "if the choice isn&#39;t so obvious\u2014 I meant."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "edited": false, "score": 0, "creation_date": 1465481363, "post_id": 35630670, "comment_id": 62928018, "body": "@naki this comes under the heading of &quot;cache aware computing and data structures&quot; and it depends on the structure you are using (i.e. array list vs. linked list) and what you are doing with it.  So unless you really become aware of it and care about all of the little details, I would follow this rule of thumb:  don&#39;t worry about it unless you see a performance problem, memory problem or you are doing something that is processing millions of things per minute.  Or just test things with a micro-benchmark if you can.  Otherwise more details would never fit into a comment here in SO."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "edited": false, "score": 1, "creation_date": 1465481441, "post_id": 35630670, "comment_id": 62928074, "body": "@naki One example from a recent Apache Spark announcement, they are worrying about this obviously, see &quot;Cache-aware Computation&quot; section at <a href=\"https://databricks.com/blog/2015/04/28/project-tungsten-bringing-spark-closer-to-bare-metal.html\" rel=\"nofollow noreferrer\">databricks.com/blog/2015/04/28/&hellip;</a>  ... but they are worried about billions of things iterating so they need to go to the full extreme."}, {"owner": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1465574744, "post_id": 35630670, "comment_id": 62974808, "body": "@JaysonMinard Mmkay. I think I will spend some time playing with some benchmarking soon. It&#39;ll be a fun and helpful experience to rediscover just what impact the different steps involved in common processing operations have, versus what I imagine. Also, coming from C++, it will be helpful for me to spend some time learning how things actually work on the JVM. A recent forced rush towards productivity has fortunately or unfortunately bypassed my usual desire to master and understand those details."}, {"owner": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1465575226, "post_id": 35630670, "comment_id": 62975104, "body": "@JaysonMinard Unfortunately no &quot;if there are more the 3 operations being chained together, a sequence will always be better&quot;-style hard rules, but I appreciate the &quot;don&#39;t worry about it&quot; advice :] Thanks."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "reply_to_user": {"reputation": 762, "user_id": 1144395, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46901b51e062c401919d02fc5c5aca4c?s=128&d=identicon&r=PG", "display_name": "naki", "link": "https://stackoverflow.com/users/1144395/naki"}, "edited": false, "score": 0, "creation_date": 1465677142, "post_id": 35630670, "comment_id": 63004973, "body": "Those rules can&#39;t be applied generically @naki, 3 things chained together on a small list rock when in CPU cache, so do 100 working off the same small list!"}, {"owner": {"reputation": 10942, "user_id": 18575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318654a786700455b96049d8ac9beb11?s=128&d=identicon&r=PG", "display_name": "Ilya Ryzhenkov", "link": "https://stackoverflow.com/users/18575/ilya-ryzhenkov"}, "edited": false, "score": 3, "creation_date": 1489801167, "post_id": 35630670, "comment_id": 72845021, "body": "Additionally, a common pitfall with lazy evaluation is capturing the context and storing resulting lazy computation in a field along with all the captured locals and whatever they hold. Hence, hard to debug memory leaks."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 141, "last_activity_date": 1520855703, "last_edit_date": 1520855703, "creation_date": 1456411970, "answer_id": 35630670, "question_id": 35629159, "link": "https://stackoverflow.com/questions/35629159/kotlins-iterable-and-sequence-look-exactly-same-why-are-two-types-required/35630670#35630670", "title": "Kotlin&#39;s Iterable and Sequence look exactly same. Why are two types required?", "body": "<p>The key difference lies in the semantics and the implementation of the stdlib extension functions for <code>Iterable&lt;T&gt;</code> and <code>Sequence&lt;T&gt;</code>.</p>\n\n<ul>\n<li><p>For <code>Sequence&lt;T&gt;</code>, the extension functions perform lazily where possible, similarly to Java Streams <em>intermediate</em> operations. For example, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/map.html\" rel=\"noreferrer\"><code>Sequence&lt;T&gt;.map { ... }</code></a> returns another <code>Sequence&lt;R&gt;</code> and does not actually process the items until a <em>terminal</em> operation like <code>toList</code> or <code>fold</code> is called.</p>\n\n<p>Consider this code:</p>\n\n<pre><code>val seq = sequenceOf(1, 2)\nval seqMapped: Sequence&lt;Int&gt; = seq.map { print(\"$it \"); it * it } // intermediate\nprint(\"before sum \")\nval sum = seqMapped.sum() // terminal\n</code></pre>\n\n<p>It prints:</p>\n\n<pre><code>before sum 1 2\n</code></pre>\n\n<p><code>Sequence&lt;T&gt;</code> is intended for lazy usage and efficient pipelining when you want to reduce the work done in <em>terminal</em> operations as much  as possible, same to Java Streams. However, laziness introduces some overhead, which is undesirable for common simple transformations of smaller collections and makes them less performant. </p>\n\n<p>In general, there is no good way to determine when it is needed, so in Kotlin stdlib laziness is made explicit and extracted to the <code>Sequence&lt;T&gt;</code> interface to avoid using it on all the <code>Iterable</code>s by default.</p></li>\n<li><p>For <code>Iterable&lt;T&gt;</code>, on contrary, the extension functions with <em>intermediate</em> operation semantics work eagerly, process the items right away and return another <code>Iterable</code>. For example, <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/map.html\" rel=\"noreferrer\"><code>Iterable&lt;T&gt;.map { ... }</code></a> returns a <code>List&lt;R&gt;</code> with the mapping results in it.</p>\n\n<p>The equivalent code for Iterable:</p>\n\n<pre><code>val lst = listOf(1, 2)\nval lstMapped: List&lt;Int&gt; = lst.map { print(\"$it \"); it * it }\nprint(\"before sum \")\nval sum = lstMapped.sum()\n</code></pre>\n\n<p>This prints out:</p>\n\n<pre><code>1 2 before sum\n</code></pre>\n\n<p>As said above, <code>Iterable&lt;T&gt;</code> is non-lazy by default, and this solution shows itself well: in most cases it has good <a href=\"https://en.wikipedia.org/wiki/Locality_of_reference\" rel=\"noreferrer\">locality of reference</a> thus taking advantage of CPU cache, prediction, prefetching etc. so that even multiple copying of a collection still works good enough and performs better in simple cases with small collections.</p>\n\n<p>If you need more control over the evaluation pipeline, there is an explicit conversion to a lazy sequence with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"noreferrer\"><code>Iterable&lt;T&gt;.asSequence()</code></a> function.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "edited": false, "score": 5, "creation_date": 1519583950, "post_id": 48230695, "comment_id": 84958963, "body": "That&#39;s an excellent example of the difference between the two."}, {"owner": {"reputation": 56, "user_id": 688241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a25970f4bd5aafa85036ce5e09b1e334?s=128&d=identicon&r=PG", "display_name": "frye3k", "link": "https://stackoverflow.com/users/688241/frye3k"}, "edited": false, "score": 0, "creation_date": 1545414566, "post_id": 48230695, "comment_id": 94624532, "body": "This is a great example."}], "tags": [], "owner": {"reputation": 10692, "user_id": 7101554, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/YgL1x.jpg?s=128&g=1", "display_name": "Leandro Borges Ferreira", "link": "https://stackoverflow.com/users/7101554/leandro-borges-ferreira"}, "is_accepted": false, "score": 52, "last_activity_date": 1577770746, "last_edit_date": 1577770746, "creation_date": 1515776019, "answer_id": 48230695, "question_id": 35629159, "link": "https://stackoverflow.com/questions/35629159/kotlins-iterable-and-sequence-look-exactly-same-why-are-two-types-required/48230695#48230695", "title": "Kotlin&#39;s Iterable and Sequence look exactly same. Why are two types required?", "body": "<p>Completing hotkey's answer:</p>\n\n<p>It is important to notice how Sequence and Iterable iterates throughout your elements:</p>\n\n<p>Sequence example:</p>\n\n<pre><code>list.asSequence().filter { field -&gt;\n    Log.d(\"Filter\", \"filter\")\n    field.value &gt; 0\n}.map {\n    Log.d(\"Map\", \"Map\")\n}.forEach {\n    Log.d(\"Each\", \"Each\")\n}\n</code></pre>\n\n<p>Log result:</p>\n\n<p>filter - Map - Each; filter - Map - Each</p>\n\n<p>Iterable example:</p>\n\n<pre><code>list.filter { field -&gt;\n    Log.d(\"Filter\", \"filter\")\n    field.value &gt; 0\n}.map {\n    Log.d(\"Map\", \"Map\")\n}.forEach {\n    Log.d(\"Each\", \"Each\")\n}\n</code></pre>\n\n<p>filter - filter - Map - Map - Each - Each</p>\n"}, {"tags": [], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "is_accepted": false, "score": 2, "last_activity_date": 1576350574, "creation_date": 1576350574, "answer_id": 59338307, "question_id": 35629159, "link": "https://stackoverflow.com/questions/35629159/kotlins-iterable-and-sequence-look-exactly-same-why-are-two-types-required/59338307#59338307", "title": "Kotlin&#39;s Iterable and Sequence look exactly same. Why are two types required?", "body": "<blockquote>\n  <p><code>Iterable</code> is mapped to the <code>java.lang.Iterable</code> interface on the\n  <code>JVM</code>, and is implemented by commonly used collections, like List or\n  Set. The collection extension functions on these are evaluated\n  eagerly, which means they all immediately process all elements in\n  their input and return a new collection containing the result.</p>\n  \n  <p>Here\u2019s a simple example of using the collection functions to get the\n  names of the first five people in a list whose age is at least 21:</p>\n\n<pre><code>val people: List&lt;Person&gt; = getPeople()\nval allowedEntrance = people\n    .filter { it.age &gt;= 21 }\n    .map { it.name }\n    .take(5)\n</code></pre>\n  \n  <p>Target platform: JVMRunning on kotlin v. 1.3.61 First, the age check\n  is done for every single Person in the list, with the result put in a\n  brand new list. Then, the mapping to their names is done for every\n  Person who remained after the filter operator, ending up in yet\n  another new list (this is now a <code>List&lt;String&gt;</code>). Finally, there\u2019s one\n  last new list created to contain the first five elements of the\n  previous list.</p>\n  \n  <p>In contrast, Sequence is a new concept in Kotlin to represent a lazily\n  evaluated collection of values. The same collection extensions are\n  available for the <code>Sequence</code> interface, but these immediately return\n  Sequence instances that represent a processed state of the date, but\n  without actually processing any elements. To start processing, the\n  <code>Sequence</code> has to be terminated with a terminal operator, these are\n  basically a request to the Sequence to materialize the data it\n  represents in some concrete form. Examples include <code>toList</code>, <code>toSet</code>,\n  and <code>sum</code>, to mention just a few. When these are called, only the\n  minimum required number of elements will be processed to produce the\n  demanded result.</p>\n  \n  <p>Transforming an existing collection to a Sequence is pretty\n  straightfoward, you just need to use the <code>asSequence</code> extension. As\n  mentioned above, you also need to add a terminal operator, otherwise\n  the Sequence will never do any processing (again, lazy!).</p>\n\n<pre><code>val people: List&lt;Person&gt; = getPeople()\nval allowedEntrance = people.asSequence()\n    .filter { it.age &gt;= 21 }\n    .map { it.name }\n    .take(5)\n    .toList()\n</code></pre>\n  \n  <p>Target platform: JVMRunning on kotlin v. 1.3.61 In this case, the\n  Person instances in the Sequence are each checked for their age, if\n  they pass, they have their name extracted, and then added to the\n  result list. This is repeated for each person in the original list\n  until there are five people found. At this point, the toList function\n  returns a list, and the rest of the people in the <code>Sequence</code> are not\n  processed.</p>\n  \n  <p>There\u2019s also something extra a Sequence is capable of: it can contain\n  an infinite number of items. With this in perspective, it makes sense\n  that operators work the way they do - an operator on an infinite\n  sequence could never return if it did its work eagerly.</p>\n  \n  <p>As an example, here\u2019s a sequence that will generate as many powers of\n  2 as required by its terminal operator (ignoring the fact that this\n  would quickly overflow):</p>\n\n<pre><code>generateSequence(1) { n -&gt; n * 2 }\n    .take(20)\n    .forEach(::println)\n</code></pre>\n</blockquote>\n\n<p>You can find more <a href=\"https://zsmb.co/top-10-kotlin-stack-overflow-questions-1/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3738, "user_id": 1812434, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gTQAt.jpg?s=128&g=1", "display_name": "Venkata Raju", "link": "https://stackoverflow.com/users/1812434/venkata-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12974, "favorite_count": 22, "accepted_answer_id": 35630670, "answer_count": 3, "score": 88, "last_activity_date": 1577770746, "creation_date": 1456408132, "last_edit_date": 1456414960, "question_id": 35629159, "link": "https://stackoverflow.com/questions/35629159/kotlins-iterable-and-sequence-look-exactly-same-why-are-two-types-required", "title": "Kotlin&#39;s Iterable and Sequence look exactly same. Why are two types required?", "body": "<p>Both of these interfaces define only one method</p>\n\n<pre><code>public operator fun iterator(): Iterator&lt;T&gt;\n</code></pre>\n\n<p>Documentation says <code>Sequence</code> is meant to be lazy. But isn't <code>Iterable</code> lazy too (unless backed by a <code>Collection</code>)?</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 1285, "user_id": 3464143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/ExkfC.png?s=128&g=1", "display_name": "Arno van Lieshout", "link": "https://stackoverflow.com/users/3464143/arno-van-lieshout"}, "edited": false, "score": 2, "creation_date": 1456388322, "post_id": 35621644, "comment_id": 58925783, "body": "The exception is pretty clear. You are passing null for the convertView parameter."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 3, "creation_date": 1456398078, "post_id": 35621644, "comment_id": 58932461, "body": "This method is invoked by the Android framework and the parameter is actually defined as nullable, so nulls should be allowed."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1456398155, "post_id": 35621644, "comment_id": 58932499, "body": "@Dawid are you sure your code is the same you posted here? Specifically, is the <code>convertView</code> parameter really declared as nullable?"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1456399726, "post_id": 35621644, "comment_id": 58933548, "body": "Is super <code>getView()</code> with the same signature?"}, {"owner": {"reputation": 3121, "user_id": 1048418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8110ec87e6a79865071765f48fd1670e?s=128&d=identicon&r=PG", "display_name": "Dawid Hy\u017cy", "link": "https://stackoverflow.com/users/1048418/dawid-hy%c5%bcy"}, "edited": false, "score": 2, "creation_date": 1456405575, "post_id": 35621644, "comment_id": 58937763, "body": "This was issue with incremental compile. I&#39;ve rebuild project and it works."}, {"owner": {"reputation": 3139, "user_id": 947482, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/HmeQa.jpg?s=128&g=1", "display_name": "Bruce Lee", "link": "https://stackoverflow.com/users/947482/bruce-lee"}, "edited": false, "score": 0, "creation_date": 1456538827, "post_id": 35621644, "comment_id": 59009897, "body": "i&#39;ve met the same problem. but finally i find that i defined an <code>Adapter</code> inherited from <code>ArrayAdapter</code> without considering the no-null thing. when i deleted it, the problem&#39;s gone"}], "answers": [{"comments": [{"owner": {"reputation": 3121, "user_id": 1048418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8110ec87e6a79865071765f48fd1670e?s=128&d=identicon&r=PG", "display_name": "Dawid Hy\u017cy", "link": "https://stackoverflow.com/users/1048418/dawid-hy%c5%bcy"}, "edited": false, "score": 1, "creation_date": 1466659772, "post_id": 37969533, "comment_id": 63410984, "body": "It was caused by incremental compile."}, {"owner": {"reputation": 21161, "user_id": 1788806, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ca4c6bc08e59c34de7fc39e09de8dbe?s=128&d=identicon&r=PG", "display_name": "Willi Mentzel", "link": "https://stackoverflow.com/users/1788806/willi-mentzel"}, "reply_to_user": {"reputation": 3121, "user_id": 1048418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8110ec87e6a79865071765f48fd1670e?s=128&d=identicon&r=PG", "display_name": "Dawid Hy\u017cy", "link": "https://stackoverflow.com/users/1048418/dawid-hy%c5%bcy"}, "edited": false, "score": 0, "creation_date": 1498730899, "post_id": 37969533, "comment_id": 76624234, "body": "@DawidHy\u017cy: Pls, post this (your comment) as answer and accept it. Here happened the same <a href=\"https://stackoverflow.com/questions/44800225/variable-is-declared-as-var-but-compiler-is-saying-it-val/44801687#44801687\" title=\"variable is declared as var but compiler is saying it val\">stackoverflow.com/questions/44800225/&hellip;</a>"}, {"owner": {"reputation": 1016, "user_id": 3590155, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001211241573/picture?type=large", "display_name": "LeonardoSibela", "link": "https://stackoverflow.com/users/3590155/leonardosibela"}, "edited": false, "score": 0, "creation_date": 1554924145, "post_id": 37969533, "comment_id": 97932891, "body": "My problem was the Java to Kotlin auto-converter, which does not infer the safe call operator (?). &quot;One does not simply paste java code into a Kotlin class/file&quot;"}, {"owner": {"reputation": 423, "user_id": 5720745, "user_type": "registered", "profile_image": "https://graph.facebook.com/898172403592585/picture?type=large", "display_name": "Jatinder Kumar", "link": "https://stackoverflow.com/users/5720745/jatinder-kumar"}, "edited": false, "score": 0, "creation_date": 1570443347, "post_id": 37969533, "comment_id": 102902286, "body": "Perfect solution"}], "tags": [], "owner": {"reputation": 164, "user_id": 3961802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4186ad01a4c90d1388bb87dcaa31638?s=128&d=identicon&r=PG&f=1", "display_name": "Denys Makhov", "link": "https://stackoverflow.com/users/3961802/denys-makhov"}, "is_accepted": false, "score": 6, "last_activity_date": 1466602061, "creation_date": 1466602061, "answer_id": 37969533, "question_id": 35621644, "link": "https://stackoverflow.com/questions/35621644/parameter-specified-as-non-null-is-null-in-arrayadaper/37969533#37969533", "title": "Parameter specified as non-null is null in ArrayAdaper", "body": "<p>Please check the sample below:</p>\n\n<pre><code>override fun getDropDownView(position: Int, convertView: View?, parent: ViewGroup): View? {\n    return getCustomView(position, convertView, parent)\n}\n\noverride fun getView(position: Int, convertView: View?, parent: ViewGroup): View? {\n    return getCustomView(position, convertView, parent)\n}\n\nfun getCustomView(position: Int, convertView: View?, parent: ViewGroup): View? {\n    val rootView: View? = LayoutInflater.from(context).inflate(R.layout.my_custom_view, parent, false)\n    return rootView\n}\n</code></pre>\n\n<p>The returned value should be nullable.</p>\n"}, {"tags": [], "owner": {"reputation": 3121, "user_id": 1048418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8110ec87e6a79865071765f48fd1670e?s=128&d=identicon&r=PG", "display_name": "Dawid Hy\u017cy", "link": "https://stackoverflow.com/users/1048418/dawid-hy%c5%bcy"}, "is_accepted": true, "score": 9, "last_activity_date": 1498755257, "creation_date": 1498755257, "answer_id": 44830961, "question_id": 35621644, "link": "https://stackoverflow.com/questions/35621644/parameter-specified-as-non-null-is-null-in-arrayadaper/44830961#44830961", "title": "Parameter specified as non-null is null in ArrayAdaper", "body": "<p>This issue was caused by incremental compile. Just needed to rebuild project after converting from Java.</p>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 6197548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1397365993713905/picture?type=large", "display_name": "Anand Raj Mehta", "link": "https://stackoverflow.com/users/6197548/anand-raj-mehta"}, "is_accepted": false, "score": -2, "last_activity_date": 1519290410, "last_edit_date": 1519290410, "creation_date": 1519200810, "answer_id": 48900929, "question_id": 35621644, "link": "https://stackoverflow.com/questions/35621644/parameter-specified-as-non-null-is-null-in-arrayadaper/48900929#48900929", "title": "Parameter specified as non-null is null in ArrayAdaper", "body": "<pre><code>override fun getView(i: Int, view: View, parent: ViewGroup): View {\n\nvar itemView = LayoutInflater.from(context).inflate(R.layout.item_dashbord_data, parent, false)\n\n        return itemView\n    }\n</code></pre>\n\n<p>// change name of View object (itemView) differ from getView second object (view). so change view to itemView or other name   </p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 2762049, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/831284509/picture?type=large", "display_name": "Demetrio Guilardi", "link": "https://stackoverflow.com/users/2762049/demetrio-guilardi"}, "is_accepted": false, "score": 0, "last_activity_date": 1595028896, "creation_date": 1595028896, "answer_id": 62963044, "question_id": 35621644, "link": "https://stackoverflow.com/questions/35621644/parameter-specified-as-non-null-is-null-in-arrayadaper/62963044#62963044", "title": "Parameter specified as non-null is null in ArrayAdaper", "body": "<p>In my case, I just had to add the &quot;?&quot; to the convertView parameter</p>\n<pre><code>override fun getDropDownView(position: Int, convertView: View?, parent: ViewGroup): View {\n</code></pre>\n"}], "owner": {"reputation": 3121, "user_id": 1048418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8110ec87e6a79865071765f48fd1670e?s=128&d=identicon&r=PG", "display_name": "Dawid Hy\u017cy", "link": "https://stackoverflow.com/users/1048418/dawid-hy%c5%bcy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13902, "favorite_count": 0, "accepted_answer_id": 44830961, "answer_count": 4, "score": 13, "last_activity_date": 1595028896, "creation_date": 1456387766, "question_id": 35621644, "link": "https://stackoverflow.com/questions/35621644/parameter-specified-as-non-null-is-null-in-arrayadaper", "title": "Parameter specified as non-null is null in ArrayAdaper", "body": "<p>I've extended ArrayAdapter for spinner:</p>\n\n<pre><code>class OrderAdapter(context: Context, resource: Int, objects: List&lt;Order&gt;) : ArrayAdapter&lt;Order&gt;(context, resource, objects) {\n        override fun getView(position: Int, convertView: View?, parent: ViewGroup): View? {\n            val view = super.getView(position, convertView, parent)\n            view?.let { view.find&lt;TextView&gt;(android.R.id.text1).text = getItem(position).name }\n            return view\n        }\n        override fun getDropDownView(position: Int, convertView: View?, parent: ViewGroup): View? {\n            val view = super.getDropDownView(position, convertView, parent)\n            view?.let {view.find&lt;TextView&gt;(android.R.id.text1).text = getItem(position).name }\n            return view\n        }\n    }\n</code></pre>\n\n<p>I'm getting exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkParameterIsNotNull, parameter convertView\n                                                                                          at com.github.blabla.endlesss.ui.adapter.OrderAdapter.getView(OrderAdapter.kt:0)\n</code></pre>\n\n<p>Any ideas how to fix it?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 42524, "user_id": 936832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1da0368f0874a66bd771c4d57f94b0?s=128&d=identicon&r=PG", "display_name": "Ingo Kegel", "link": "https://stackoverflow.com/users/936832/ingo-kegel"}, "is_accepted": false, "score": 9, "last_activity_date": 1456387088, "last_edit_date": 1456387088, "creation_date": 1456386749, "answer_id": 35621335, "question_id": 35621302, "link": "https://stackoverflow.com/questions/35621302/kotlin-referential-equality-behavior-on-int-with-values-between-128-to-127/35621335#35621335", "title": "Kotlin referential equality behavior on Int with values between -128 to 127", "body": "<p>See the Java source code of <code>Integer.valueOf()</code> which is reponsible for boxing int values. The javadoc says: </p>\n\n<blockquote>\n  <p>This method will always cache values in the range -128 to 127</p>\n</blockquote>\n\n<p>So boxed integers in that range are always the same object if they have the same numeric value.</p>\n\n<p>In Kotlin, you should compare boxed Integers with <code>==</code> and not with <code>===</code>.</p>\n"}], "owner": {"reputation": 1166, "user_id": 2324456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YW0tt.jpg?s=128&g=1", "display_name": "Quirino Gervacio", "link": "https://stackoverflow.com/users/2324456/quirino-gervacio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1456387088, "creation_date": 1456386643, "last_edit_date": 1456386933, "question_id": 35621302, "link": "https://stackoverflow.com/questions/35621302/kotlin-referential-equality-behavior-on-int-with-values-between-128-to-127", "title": "Kotlin referential equality behavior on Int with values between -128 to 127", "body": "<p>I'm giving myself until 12:00AM to learn and get productive (hopefully) on kotlin.</p>\n\n<p>Following <a href=\"https://kotlinlang.org/docs/kotlin-docs.pdf\" rel=\"nofollow\">https://kotlinlang.org/docs/kotlin-docs.pdf</a> I tried these snippets on page 17. Could anyone please help me understand why <code>===</code> returns <code>true</code> if a value is between <code>-128</code> to <code>127</code>? </p>\n\n<p>The following indeed prints <code>false</code>:</p>\n\n<pre><code>val a: Int = 10000\nval boxedA: Int? = a            // Integer@445\nval anotherBoxedA: Int? = a     // Integer@447 why?\nprint(boxedA === anotherBoxedA) // false\n</code></pre>\n\n<p>However changing <code>a</code> to any value between <code>-128</code> to <code>127</code> always prints <code>true</code>:</p>\n\n<pre><code>val a: Int = -128\nval boxedA: Int? = a            // Integer@445\nval anotherBoxedA: Int? = a     // Integer@445 why?\nprint(boxedA === anotherBoxedA) // true!\n</code></pre>\n\n<p>It seems to me if <code>Int</code> value is outside the bounds of <code>-128</code> to <code>127</code> (Java byte) kotlin creates a new object on assignment does making the reference not equal.</p>\n"}]