[{"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467219304, "post_id": 38105670, "comment_id": 63645093, "body": "Why is it a problem to make f a property of B? You can make it private, if that&#39;s your concern."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467219636, "post_id": 38105670, "comment_id": 63645293, "body": "Yes , I can do <code>(private val f : (Int) -&gt; Int)</code> and then have <code>calculate(n: Int): Int  = f(n)</code> but this feels clunky to me."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467219739, "post_id": 38105670, "comment_id": 63645359, "body": "Well, you need to store a reference to the function somewhere, and that&#39;s what properties are for."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467220129, "post_id": 38105670, "comment_id": 63645595, "body": "Any chance of <code>calculate</code> be that reference ?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467220588, "post_id": 38105670, "comment_id": 63645886, "body": "As far as I know, no. You can create an anonymous class instance where calculate() call f, and the reference to f would then be stored as a synthetic field (not sure if it&#39;s the proper terminology), and not as a property. But that wouldn&#39;t change much."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467222177, "post_id": 38105670, "comment_id": 63646820, "body": "Regarding your second question, if you had do use it in Java, instead of doing <code>int i = a.calculate(42)</code>, you would have to do <code>int i = a.getCalculate().invoke(42);</code>. You don&#39;t have a method anymore. You have a property of type function."}, {"owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467222819, "post_id": 38105670, "comment_id": 63647234, "body": "But in Kotlin we will end up calling <code>b.calculate(1)</code> regardless of <code>fun&#47;var</code>. When compiling to JS will be completed we will be able to demonstrate the difference in JS too. I am trying to understand the intent in Kotlin terms."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467223285, "post_id": 38105670, "comment_id": 63647522, "body": "Well, the intent of the first one is to Add a method calculate to the interface, whereas the intent of the second one is to add a property of type function. It&#39;s quite different. If it was a var rather than a val, you could for example reassign another function to calculate."}], "answers": [{"comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467221973, "post_id": 38106470, "comment_id": 63646711, "body": "This actually is a double delegation, isn&#39;t it? The anonymous class instance delegates to f, and the class B delegates to the anonymous class instance."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467223440, "post_id": 38106470, "comment_id": 63647618, "body": "@JBNizet Yes: implementation of an interface is delegated and implementation of a function is delegated so in that sense it certainly is. Thanks for pointing that out!"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 1, "last_activity_date": 1467221501, "creation_date": 1467221501, "answer_id": 38106470, "question_id": 38105670, "link": "https://stackoverflow.com/questions/38105670/implementing-an-interface-with-parametrized-function/38106470#38106470", "title": "Implementing an interface with parametrized function", "body": "<p>Yes, this can be done without making <code>f</code> a property of <code>B</code>. e.g. By using <a href=\"https://kotlinlang.org/docs/reference/delegation.html#class-delegation\" rel=\"nofollow\">class delegation</a> to an <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"nofollow\">object expression</a>:</p>\n\n<pre><code>class B(f: (Int) -&gt; Int) : A by object : A {\n    override fun calculate(n: Int) = f(n)\n}\n</code></pre>\n\n<p>Even so, a <code>private val</code> seems more appropriate for this simple example.</p>\n"}, {"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 3, "last_activity_date": 1467230312, "creation_date": 1467230312, "answer_id": 38108999, "question_id": 38105670, "link": "https://stackoverflow.com/questions/38105670/implementing-an-interface-with-parametrized-function/38108999#38108999", "title": "Implementing an interface with parametrized function", "body": "<p>The simplest way to implement this is:</p>\n\n<pre><code>class B(val f : (Int) -&gt; Int) : A {\n    override fun calculate(n: Int): Int = f(n)\n}\n</code></pre>\n"}], "owner": {"reputation": 6643, "user_id": 239101, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/zEXWJ.jpg?s=128&g=1", "display_name": "David Soroko", "link": "https://stackoverflow.com/users/239101/david-soroko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467230312, "creation_date": 1467218937, "last_edit_date": 1495541769, "question_id": 38105670, "link": "https://stackoverflow.com/questions/38105670/implementing-an-interface-with-parametrized-function", "title": "Implementing an interface with parametrized function", "body": "<p>Suppose I have an interface</p>\n\n<pre><code>interface A {\n    fun  calculate(n: Int): Int\n}\n</code></pre>\n\n<p>I'd like to implement <code>A</code> in a class <code>B</code> (say) so that the <code>calculation</code> is provided in <code>B</code>'s  constructor, something like:</p>\n\n<pre><code>class B (f : (Int) -&gt; Int) : A {\n    override fun  calculate(n: Int): Int  //...somehow assign f to calculate\n}\n</code></pre>\n\n<p>Can this be done without making <code>f</code> a property of <code>B</code>?</p>\n\n<p>Hmm... this works:</p>\n\n<pre><code>interface A {\n    val calculate: (n: Int) -&gt; Int\n}\n\nclass B(f: (Int) -&gt; Int) : A {\n    override val calculate = f\n}\n</code></pre>\n\n<p>Can someone explain the intended syntactic difference between <code>fun</code> and <code>val</code> here? I am aware of <a href=\"https://stackoverflow.com/questions/36118235/function-definition-fun-vs-val\">Function definition: fun vs val</a> but would like to get a 'language level' understanding.</p>\n"}, {"tags": ["kotlin", "kotlin-extension"], "comments": [{"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 1, "creation_date": 1467212012, "post_id": 38098585, "comment_id": 63640133, "body": "See also <a href=\"http://stackoverflow.com/questions/38074356/kotlin-recommended-way-of-unregistering-a-listener-with-a-sam\" title=\"kotlin recommended way of unregistering a listener with a sam\">stackoverflow.com/questions/38074356/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 5, "last_activity_date": 1467207256, "last_edit_date": 1467207256, "creation_date": 1467206835, "answer_id": 38101021, "question_id": 38098585, "link": "https://stackoverflow.com/questions/38098585/how-to-reference-anonymous-inner-class-in-kotlin/38101021#38101021", "title": "How to reference anonymous inner class in Kotlin?", "body": "<p>One way is to use <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"noreferrer\">object expression</a> instead of <a href=\"https://kotlinlang.org/docs/reference/lambdas.html\" rel=\"noreferrer\">lambda</a> like so:</p>\n\n<pre><code>fun View.OnGlobalLayout(callback: () -&gt; Unit): Unit {\n    val viewTreeObserver = this.viewTreeObserver\n    viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN) {\n                viewTreeObserver.removeOnGlobalLayoutListener(this);\n            } else {\n                viewTreeObserver.removeGlobalOnLayoutListener(this);\n            }\n            callback();\n        }\n    })\n}\n</code></pre>\n"}], "owner": {"reputation": 1564, "user_id": 1109920, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cac6431fdd0c54da0606b50ccc84e344?s=128&d=identicon&r=PG", "display_name": "jellyfication", "link": "https://stackoverflow.com/users/1109920/jellyfication"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 1, "closed_date": 1467218949, "answer_count": 1, "score": 4, "last_activity_date": 1467212314, "creation_date": 1467200681, "last_edit_date": 1467212314, "question_id": 38098585, "link": "https://stackoverflow.com/questions/38098585/how-to-reference-anonymous-inner-class-in-kotlin", "closed_reason": "Duplicate", "title": "How to reference anonymous inner class in Kotlin?", "body": "<p>I have following extension method. How can I reference the <code>OnGlobalLayoutListener</code> that is passed into the <code>addOnGLobalLayoutListener()</code> method? I need to pass the listener to the <code>removeOnGlobalLayoutListener()</code> method.</p>\n\n<pre><code>fun View.OnGlobalLayout(callback:() -&gt; Unit ): Unit{\n    this.viewTreeObserver.addOnGlobalLayoutListener {\n        if(android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN) {\n            this.viewTreeObserver.removeOnGlobalLayoutListener(this);\n        }\n        else {\n            this.viewTreeObserver.removeGlobalOnLayoutListener(this);\n        }\n        callback();\n    }\n}\n</code></pre>\n"}, {"tags": ["android", "unit-testing", "kotlin", "dagger-2"], "answers": [{"comments": [{"owner": {"reputation": 4834, "user_id": 3275253, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/jSMeb.jpg?s=128&g=1", "display_name": "voghDev", "link": "https://stackoverflow.com/users/3275253/voghdev"}, "edited": false, "score": 0, "creation_date": 1490691555, "post_id": 38097727, "comment_id": 73213832, "body": "Are you able to generate a signed APK with your current configuration?"}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1490695137, "post_id": 38097727, "comment_id": 73216367, "body": "Yes, not a problem. It has nothing to do with the library or language used."}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": true, "score": 15, "last_activity_date": 1467198202, "creation_date": 1467198202, "answer_id": 38097727, "question_id": 38097149, "link": "https://stackoverflow.com/questions/38097149/unresolved-reference-daggertestcomponent-kotlin-with-dagger-for-test/38097727#38097727", "title": "Unresolved reference: DaggerTestComponent (Kotlin with Dagger for Test)", "body": "<p>Found the answer from Kotlin Slack Channel. Thanks to Kirill Rakhman.</p>\n\n<p>It is (for instrumental test)</p>\n\n<pre><code>kaptAndroidTest 'com.google.dagger:dagger-compiler:2.0.2'\n</code></pre>\n\n<p>or (for unit test)</p>\n\n<pre><code>kaptTest 'com.google.dagger:dagger-compiler:2.0.2'\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 1, "accepted_answer_id": 38097727, "answer_count": 1, "score": 3, "last_activity_date": 1467198202, "creation_date": 1467196663, "last_edit_date": 1495540491, "question_id": 38097149, "link": "https://stackoverflow.com/questions/38097149/unresolved-reference-daggertestcomponent-kotlin-with-dagger-for-test", "title": "Unresolved reference: DaggerTestComponent (Kotlin with Dagger for Test)", "body": "<p>When we use Dagger and Kotlin, we'll need the following in our build.gradle dependency</p>\n\n<pre><code>kapt 'com.google.dagger:dagger-compiler:2.0'\ncompile 'com.google.dagger:dagger:2.0'\nprovided 'org.glassfish:javax.annotation:10.0-b28'\n</code></pre>\n\n<p>As stated in <a href=\"http://www.beyondtechnicallycorrect.com/2015/12/30/android-kotlin-dagger/\" rel=\"nofollow noreferrer\">http://www.beyondtechnicallycorrect.com/2015/12/30/android-kotlin-dagger/</a></p>\n\n<p>When I try to perform testing using Dagger, and generate the <code>DaggerTestComponent.builder()</code> as per <a href=\"https://labs.ribot.co.uk/fast-and-reliable-ui-tests-on-android-17c261b8220c#.o3efc5knx\" rel=\"nofollow noreferrer\">https://labs.ribot.co.uk/fast-and-reliable-ui-tests-on-android-17c261b8220c#.o3efc5knx</a> or even <a href=\"https://medium.com/@fabioCollini/android-testing-using-dagger-2-mockito-and-a-custom-junit-rule-c8487ed01b56#.hxtytfns3\" rel=\"nofollow noreferrer\">https://medium.com/@fabioCollini/android-testing-using-dagger-2-mockito-and-a-custom-junit-rule-c8487ed01b56#.hxtytfns3</a>, in Kotlin language, but have the below error</p>\n\n<pre><code>Error:(14, 25) Unresolved reference: DaggerTestComponent\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/a/36231516/3286489\">https://stackoverflow.com/a/36231516/3286489</a> which explain how to get DaggerTestComponent generated, and try put the below in my dependency.</p>\n\n<pre><code>androidTestApt 'com.google.dagger:dagger-compiler:2.0.1'\n</code></pre>\n\n<p>Apparently, I think this is for Java and not Kotlin, so the issue persist. Is there a Kotlin version of it? How to get my <code>DaggerTestComponent</code> generated in my Kotlin project?</p>\n"}, {"tags": ["javadoc", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 1045, "user_id": 4410813, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JSSJ_0XXr7o/AAAAAAAAAAI/AAAAAAAAKSQ/_Z5gjtDL1U0/photo.jpg?sz=128", "display_name": "jorgemf", "link": "https://stackoverflow.com/users/4410813/jorgemf"}, "is_accepted": true, "score": 3, "last_activity_date": 1467149162, "creation_date": 1467149162, "answer_id": 38086581, "question_id": 38079234, "link": "https://stackoverflow.com/questions/38079234/kotlin-generate-comment-doc/38086581#38086581", "title": "Kotlin Generate Comment Doc", "body": "<p>Kotlin documentation tools is called <a href=\"https://github.com/Kotlin/dokka\" rel=\"nofollow\">Dokka</a>. You can document your code as in java with /**. Take a look to the official docs: <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/kotlin-doc.html</a></p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6101, "favorite_count": 1, "closed_date": 1467257669, "accepted_answer_id": 38086581, "answer_count": 1, "score": 3, "last_activity_date": 1467149162, "creation_date": 1467124730, "question_id": 38079234, "link": "https://stackoverflow.com/questions/38079234/kotlin-generate-comment-doc", "closed_reason": "Duplicate", "title": "Kotlin Generate Comment Doc", "body": "<p>With Java we used to use <code>/**</code> before a method and a nice auto-generated doc would just appear. Can't do the same with Kotlin. Is this feature available, turned of by default? How can i turn it on?</p>\n"}, {"tags": ["listener", "kotlin", "sam"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1467119479, "creation_date": 1467119479, "answer_id": 38077229, "question_id": 38074356, "link": "https://stackoverflow.com/questions/38074356/kotlin-recommended-way-of-unregistering-a-listener-with-a-sam/38077229#38077229", "title": "Kotlin recommended way of unregistering a listener with a SAM", "body": "<p>You can create a generic method to perform a run-once listener. Something along the lines of:</p>\n\n<pre><code>fun &lt;T&gt; createInRealm(objectFactory: () -&gt; T, changeListener: (T) -&gt; Unit) {\n    realm.doInTransaction {\n         val obj = objectFactory()\n         val copy = copyToRealm(obj)\n         copy.addChangeListener(object : RealmChangeListener&lt;T&gt; {\n             override fun onChange(element: T) {\n                 changeListener()\n                 element.removeChangeListener(this)\n             }\n         }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1552, "favorite_count": 0, "accepted_answer_id": 38077229, "answer_count": 1, "score": 3, "last_activity_date": 1467119479, "creation_date": 1467111561, "question_id": 38074356, "link": "https://stackoverflow.com/questions/38074356/kotlin-recommended-way-of-unregistering-a-listener-with-a-sam", "title": "Kotlin recommended way of unregistering a listener with a SAM", "body": "<p>So i have an interactor which performs an insert operation with Realm and then notifies that the insertion is completed with a RealChangeListener. It is something like this:</p>\n\n<pre><code>fun insertCar(item: Car) {\n        realm.doInTransaction {\n            val car = Car(...)\n            val copy = copyToRealm(car)\n            copy.addChangeListener(...)\n        }\n    }\n</code></pre>\n\n<p>I can do it this way:</p>\n\n<pre><code>fun insertCar(item: Car, listener: RealmChangeListener&lt;Car&gt;) {\n            realm.doInTransaction {\n                val car = Car(...)\n                val copy = copyToRealm(car)\n                copy.addChangeListener(listener)\n            }\n        }\n</code></pre>\n\n<p>And access like this:</p>\n\n<pre><code>realmInteractor.insertCar(item, RealmChangeListener {\n   // do something here\n})\n</code></pre>\n\n<p>But then i have no way of removing this listener</p>\n\n<pre><code>realmInteractor.insertCar(item, RealmChangeListener {\n   // do something here\n   it.removeChangeListener(this)\n})\n</code></pre>\n\n<p><code>this</code> will point to the class its located not the actual listener</p>\n\n<p>I can also do this:</p>\n\n<pre><code>fun insertCar(item: Car, doAfterChange (Car) -&gt; Unit) {\n                realm.doInTransaction {\n                    val car = Car(...)\n                    val copy = copyToRealm(car)\n                    copy.addChangeListener(RealmChangeListener{\n                    doAfterChange()\n                    })\n                }\n            }\n</code></pre>\n\n<p>But then i have a SAM inside another SAM (too overkill imo)</p>\n\n<p>I can do it like this:</p>\n\n<pre><code>fun insertCar(item: Car, listener: RealmChangeListener&lt;Car&gt;) {\n                realm.doInTransaction {\n                    val car = Car(...)\n                    val copy = copyToRealm(car)\n                    copy.addChangeListener(listener)\n                }\n            }\n\nrealmInteractor.insertCar(item, object : RealmChangeListener&lt;Car&gt; {\n                        override fun onChange(element: Car?) {\n                            ...\n                            element?.removeChangeListener(this)\n                        }\n                    })\n</code></pre>\n\n<p>Which works but it is too verbose.</p>\n\n<p>So how do you deal with this and what is considered the best approach?</p>\n"}, {"tags": ["garbage-collection", "jvm", "kotlin", "garbage"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1467105946, "post_id": 38072171, "comment_id": 63581630, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3798424/what-is-the-garbage-collector-in-java\">What is the garbage collector in Java?</a>"}, {"owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 8, "creation_date": 1467106307, "post_id": 38072171, "comment_id": 63581894, "body": "It&#39;s not a duplicate till you explain that they have the same garbage collector."}], "answers": [{"tags": [], "owner": {"reputation": 23303, "user_id": 48382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/5CQEv.jpg?s=128&g=1", "display_name": "Krzysztof Kraso\u0144", "link": "https://stackoverflow.com/users/48382/krzysztof-kraso%c5%84"}, "is_accepted": true, "score": 21, "last_activity_date": 1467105862, "creation_date": 1467105862, "answer_id": 38072205, "question_id": 38072171, "link": "https://stackoverflow.com/questions/38072171/does-kotlin-have-a-garbage-collector-if-so-on-which-algorithm-is-it-based/38072205#38072205", "title": "Does Kotlin have a garbage collector? If so, on which algorithm is it based?", "body": "<p>Kotlin is run in JVM so it uses the same garbage collector as Java or any other JVM based language.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 8, "last_activity_date": 1467108161, "creation_date": 1467108161, "answer_id": 38073097, "question_id": 38072171, "link": "https://stackoverflow.com/questions/38072171/does-kotlin-have-a-garbage-collector-if-so-on-which-algorithm-is-it-based/38073097#38073097", "title": "Does Kotlin have a garbage collector? If so, on which algorithm is it based?", "body": "<p>The garbage collector depends on the settings of your JVM runtime, not the language the program is written in (Jave, Kotlin, Groovy, Scala, Ceylon, etc)</p>\n"}], "owner": {"reputation": 1465, "user_id": 3601872, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bc3ba40e96018f0f241539ce4f6d283a?s=128&d=identicon&r=PG&f=1", "display_name": "Dina Kleper", "link": "https://stackoverflow.com/users/3601872/dina-kleper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5397, "favorite_count": 0, "accepted_answer_id": 38072205, "answer_count": 2, "score": 9, "last_activity_date": 1467144732, "creation_date": 1467105784, "last_edit_date": 1467144732, "question_id": 38072171, "link": "https://stackoverflow.com/questions/38072171/does-kotlin-have-a-garbage-collector-if-so-on-which-algorithm-is-it-based", "title": "Does Kotlin have a garbage collector? If so, on which algorithm is it based?", "body": "<p>I'm doing a school project on Kotlin and need to know how it deals with garbage.\nIs it similar to Java in its garbage collector?</p>\n"}, {"tags": ["android", "rx-java", "reactive-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 905565, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FCrmy.jpg?s=128&g=1", "display_name": "marwinXXII", "link": "https://stackoverflow.com/users/905565/marwinxxii"}, "edited": false, "score": 0, "creation_date": 1467154005, "post_id": 38060515, "comment_id": 63611278, "body": "You need to use <code>onErrorReturn</code> inside <code>flatMap</code>, otherwise it doesn&#39;t change anything - sequence will just complete after first error (even though it was handled)."}], "tags": [], "owner": {"reputation": 11438, "user_id": 1011435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3b15f386380d50047dbc768cbf85001?s=128&d=identicon&r=PG", "display_name": "LordRaydenMK", "link": "https://stackoverflow.com/users/1011435/lordraydenmk"}, "is_accepted": true, "score": 1, "last_activity_date": 1467051108, "creation_date": 1467051108, "answer_id": 38060515, "question_id": 38056795, "link": "https://stackoverflow.com/questions/38056795/login-form-with-repeat-request-on-rxjava-and-retrofit/38060515#38060515", "title": "Login form with repeat request on rxJava and Retrofit", "body": "<p>From the ReactiveX <a href=\"http://reactivex.io/documentation/contract.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>An Observable may make zero or more OnNext notifications, each\n  representing a single emitted item, and it may then follow those\n  emission notifications by either an OnCompleted or an OnError\n  notification, but not both. Upon issuing an OnCompleted or OnError\n  notification, it may not thereafter issue any further notifications.</p>\n</blockquote>\n\n<p>Retrofit calls <code>onError</code> if there is a network error or API error (code outside the range 200-300). After a call to <code>onError</code> the Observable is terminated.</p>\n\n<p>Sorry for using Java in my example but one solution would be:</p>\n\n<pre><code>authorize(username, password).flatMap(() -&gt; Observable.just(true))\n    .onErrorReturn(e-&gt; Observable.just(false))\n</code></pre>\n\n<p>This will make sure the <code>Observable</code> isn't terminated in case of an error. Instead it will emit false. For success it will emit true. You can replace the boolean with another class containing more data (maybe an error message).</p>\n\n<p>Note: <code>onErrorReturn</code> will consume the error. <code>doOnError</code> does not consume the error, <code>onError</code> will still be called.</p>\n"}], "owner": {"reputation": 2228, "user_id": 2795206, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100003963470011/picture?type=large", "display_name": "punksta", "link": "https://stackoverflow.com/users/2795206/punksta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 38060515, "answer_count": 1, "score": 0, "last_activity_date": 1467051108, "creation_date": 1467038294, "last_edit_date": 1467039044, "question_id": 38056795, "link": "https://stackoverflow.com/questions/38056795/login-form-with-repeat-request-on-rxjava-and-retrofit", "title": "Login form with repeat request on rxJava and Retrofit", "body": "<p>I want to make login form on rxJava and retrofit. But if I got error while requesting server, unsubscribe is called from bottom of rx</p>\n\n<p>I have ui methods which implemented by rxAndroidBinding lib</p>\n\n<pre><code>fun validEmail(): Observable&lt;CharSequence&gt; //last well formated login\nfun validPassword(): Observable&lt;CharSequence&gt; //last password of length \nfun clicks(): Observable&lt;Unit&gt; //clicks on login buttons\n</code></pre>\n\n<p>I have register method which implemented by Retrofit\n<code>\nfun authorize(email:String, pass:String): Observable&lt;Unit&gt;\n</code></p>\n\n<p>I want to make request if both input is valid and I have click of login button</p>\n\n<p>```</p>\n\n<pre><code>    val validPair = rx.Observable.combineLatest(iView.validEmail(), iView.validPassword(), ::ValidLoginPair)\n            .doOnNext { iView.setLoginButtonEnabled(true) }\n\n    subscription = rx.Observable.combineLatest(validPair, iView.clicks(), { pair, unit -&gt; pair })\n            .doOnNext { iView.setProgress(true) }\n            .flatMap {\n                model.get().authorize(it.email.toString(), it.password.toString())\n                        .observeOn(AndroidSchedulers.mainThread())\n                        .doOnError {\n                            it.printStackTrace();\n                            iView.setProgress(false);\n                            iView.showError(\"NetWorkError\", it.message ?: \"Unknown error\")\n                        }\n            }\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe({\n                iView.setProgress(false);\n                iView.onLogin()\n            }) {it.printStackTrace();  iView.setProgress(false);}\n</code></pre>\n\n<p>```</p>\n\n<p>If I got 200 response, it works. But if onError  is called, all ui events subscriptions will be unsubscripted. So on second clicks nothing will happen.\nWhat I do wrong? Why retrofit works that way?</p>\n\n<hr>\n\n<p>versions\n<code>\n    compile 'io.reactivex:rxandroid:1.2.1'\n    compile 'com.squareup.retrofit2:retrofit:2.1.0'\n    compile 'io.reactivex:rxjava:1.1.6'\n</code></p>\n\n<p>unsubscripted stack</p>\n\n<pre><code> java.lang.Thread.State: WAITING\n  at com.jakewharton.rxbinding.widget.TextViewAfterTextChangeEventOnSubscribe$2.onUnsubscribe(TextViewAfterTextChangeEventOnSubscribe.java:40)\n  at rx.android.MainThreadSubscription.unsubscribe(MainThreadSubscription.java:72)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.operators.OnSubscribeCombineLatest$LatestCoordinator.cancel(OnSubscribeCombineLatest.java:178)\n  at rx.internal.operators.OnSubscribeCombineLatest$LatestCoordinator.unsubscribe(OnSubscribeCombineLatest.java:165)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.operators.OnSubscribeCombineLatest$LatestCoordinator.cancel(OnSubscribeCombineLatest.java:178)\n  at rx.internal.operators.OnSubscribeCombineLatest$LatestCoordinator.unsubscribe(OnSubscribeCombineLatest.java:165)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.util.SubscriptionList.unsubscribeFromAll(SubscriptionList.java:124)\n  at rx.internal.util.SubscriptionList.unsubscribe(SubscriptionList.java:113)\n  at rx.Subscriber.unsubscribe(Subscriber.java:98)\n  at rx.internal.operators.OperatorMerge$MergeSubscriber.checkTerminate(OperatorMerge.java:814)\n  at rx.internal.operators.OperatorMerge$MergeSubscriber.emitLoop(OperatorMerge.java:573)\n  at rx.internal.operators.OperatorMerge$MergeSubscriber.emit(OperatorMerge.java:562)\n  at rx.internal.operators.OperatorMerge$InnerSubscriber.onError(OperatorMerge.java:846)\n  at rx.internal.operators.OperatorDoOnEach$1.onError(OperatorDoOnEach.java:72)\n  at rx.internal.operators.OperatorObserveOn$ObserveOnSubscriber.checkTerminated(OperatorObserveOn.java:276)\n  at rx.internal.operators.OperatorObserveOn$ObserveOnSubscriber.call(OperatorObserveOn.java:219)\n  at rx.android.schedulers.LooperScheduler$ScheduledAction.run(LooperScheduler.java:107)\n  at android.os.Handler.handleCallback(Handler.java:739)\n  at android.os.Handler.dispatchMessage(Handler.java:95)\n  at android.os.Looper.loop(Looper.java:135)\n  at android.app.ActivityThread.main(ActivityThread.java:5254)\n  at java.lang.reflect.Method.invoke(Method.java:-1)\n  at java.lang.reflect.Method.invoke(Method.java:372)\n  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\n  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\n</code></pre>\n"}, {"tags": ["javascript", "java", "collections", "kotlin", "standard-library"], "answers": [{"tags": [], "owner": {"reputation": 3705, "user_id": 459950, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/41a6b438156185e1c71cc419dc2f714c?s=128&d=identicon&r=PG", "display_name": "gregghz", "link": "https://stackoverflow.com/users/459950/gregghz"}, "is_accepted": true, "score": 5, "last_activity_date": 1467046704, "creation_date": 1467046704, "answer_id": 38059378, "question_id": 38053724, "link": "https://stackoverflow.com/questions/38053724/use-java-standard-lib-for-kotlin-when-compiling-to-javascript/38059378#38059378", "title": "Use Java Standard Lib for Kotlin when compiling to Javascript", "body": "<p>You have to use the Kotlin standard library only. The Kotlin -> js compiler has no way to turn java libraries (or any jar) into javascript.</p>\n\n<p>I'm not as familiar with the efforts for Kotlin, but the scala.js community has ported many standard java library features to scala.js to ease the transition between the jvm and the web browser. Something similar would need to happen for Kotlin for the specific features you want to use.</p>\n\n<p>You can however reference javascript from kotlin: <a href=\"https://blog.jetbrains.com/kotlin/2014/12/javascript-interop/\" rel=\"noreferrer\">https://blog.jetbrains.com/kotlin/2014/12/javascript-interop/</a></p>\n"}, {"comments": [{"owner": {"reputation": 718, "user_id": 4197768, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-gJbxzIpIppY/AAAAAAAAAAI/AAAAAAAAABY/TjCUq6QnbF4/photo.jpg?sz=128", "display_name": "Mark Sch&#228;fer", "link": "https://stackoverflow.com/users/4197768/mark-sch%c3%a4fer"}, "edited": false, "score": 0, "creation_date": 1467465527, "post_id": 38099623, "comment_id": 63749411, "body": "Also interesting, but for now it is enough to use the kotlin stdlib. Maybe I come back to this approach."}], "tags": [], "owner": {"reputation": 2015, "user_id": 1109309, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f8a2b866ae0dc92a9e774d0094da8f4d?s=128&d=identicon&r=PG", "display_name": "Alexey Andreev", "link": "https://stackoverflow.com/users/1109309/alexey-andreev"}, "is_accepted": false, "score": 2, "last_activity_date": 1467203471, "creation_date": 1467203471, "answer_id": 38099623, "question_id": 38053724, "link": "https://stackoverflow.com/questions/38053724/use-java-standard-lib-for-kotlin-when-compiling-to-javascript/38099623#38099623", "title": "Use Java Standard Lib for Kotlin when compiling to Javascript", "body": "<p>You can try <a href=\"http://teavm.org/\" rel=\"nofollow\">TeaVM</a> that compiles bytecode to JavaScript. Simply use <code>kotlinc</code> to get bytecode from Kotlin and run it through TeaVM. You won't be able to use JS interop available from Kotlin2JS (instead, you can use TeaVM's own way to communicate with JavaScript), but you can easily interoperate with Java.</p>\n"}, {"tags": [], "owner": {"reputation": 5344, "user_id": 304330, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9870979082e499f65eef8bf29c85539d?s=128&d=identicon&r=PG", "display_name": "Big Rich", "link": "https://stackoverflow.com/users/304330/big-rich"}, "is_accepted": false, "score": 0, "last_activity_date": 1498366324, "last_edit_date": 1498366324, "creation_date": 1498365998, "answer_id": 44743274, "question_id": 38053724, "link": "https://stackoverflow.com/questions/38053724/use-java-standard-lib-for-kotlin-when-compiling-to-javascript/44743274#44743274", "title": "Use Java Standard Lib for Kotlin when compiling to Javascript", "body": "<p>[For compiling <em>any</em> Java bytecode to JavaScript,] I <strong>HIGHLY</strong> recommend you take a look at the <a href=\"http://jtransc.com\" rel=\"nofollow noreferrer\">JTransc</a> JVM-to-just-about-anything* project (<a href=\"https://github.com/jtransc/jtransc\" rel=\"nofollow noreferrer\">JTransc@Github</a>).</p>\n\n<p>The <a href=\"http://jtransc.com\" rel=\"nofollow noreferrer\">JTransc Project</a> appears to have a heavy lean towards <a href=\"https://kotlinlang.org\" rel=\"nofollow noreferrer\">Kotlin</a> (and also Java and Scala):</p>\n\n<blockquote>\n  <p>Convert your Java, Kotlin and Scala code into JavaScript, C++, D, C#, PHP, AS3, Dart and Haxe and run it everywhere. Also use JVM code in your favourite language as a library.</p>\n</blockquote>\n\n<p><a href=\"http://jtransc.com\" rel=\"nofollow noreferrer\">JTransc Project</a> targets <strong>many</strong> languages and frameworks, including a <a href=\"https://github.com/libgdx/libgdx\" rel=\"nofollow noreferrer\">LibGDX</a> <a href=\"https://github.com/jtransc/jtransc-examples\" rel=\"nofollow noreferrer\">backend</a> by leveraging <a href=\"https://haxe.org\" rel=\"nofollow noreferrer\">Haxe</a> (an old favourite of mine).</p>\n\n<p><a href=\"http://jtransc.com\" rel=\"nofollow noreferrer\">JTransc</a>'s author, <a href=\"https://github.com/soywiz\" rel=\"nofollow noreferrer\">Soywiz</a> (<a href=\"https://github.com/soywiz\" rel=\"nofollow noreferrer\">Carlos Ballesteros Velasco</a>) is a genius IMHO (\u00a1Eres un crack, se\u00f1or!).</p>\n\n<p>(*in my own words)</p>\n\n<p>Mild disclaimer: I am in no way associated with the author of the JTransc project.</p>\n"}], "owner": {"reputation": 718, "user_id": 4197768, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-gJbxzIpIppY/AAAAAAAAAAI/AAAAAAAAABY/TjCUq6QnbF4/photo.jpg?sz=128", "display_name": "Mark Sch&#228;fer", "link": "https://stackoverflow.com/users/4197768/mark-sch%c3%a4fer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 3, "accepted_answer_id": 38059378, "answer_count": 3, "score": 3, "last_activity_date": 1498366324, "creation_date": 1467029675, "question_id": 38053724, "link": "https://stackoverflow.com/questions/38053724/use-java-standard-lib-for-kotlin-when-compiling-to-javascript", "title": "Use Java Standard Lib for Kotlin when compiling to Javascript", "body": "<p>I have implemented a library in Kotlin for use in the browser. When I compile it to Javascript, the dependencies from the Java standard lib, e.g. collection classes like PriorityQueue, are not found.</p>\n\n<p>Is it possible to convince the compiler to find and compile these classes as well, or is there a precompiled Javascript-Java standard lib, or do I have to use the Kotlin standard lib only?</p>\n"}, {"tags": ["unit-testing", "junit", "kotlin", "powermock"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1467027255, "post_id": 38052558, "comment_id": 63544326, "body": "Just to be precise: I guess what you mean is: you want to mock a final class X; so that you can test some other class Y that makes use of X. You see, in order to test X, you would not need to mock X itself. Unfortunately, I don&#39;t have an answer for you, but a warning: yes, PowerMock allows you to mock final classes or static methods; but on the other hand, be prepared to face <b>all kind of strange problems</b>. Only only turn to PowerMock if you really really can&#39;t change your &quot;Input code&quot; (for example by getting rid of the &quot;final&quot; modifier)."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1467030606, "post_id": 38052558, "comment_id": 63546531, "body": "@J&#228;germeister I haven&#39;t used PowerMock before. What are some strange problems you could face?"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 4, "creation_date": 1467032277, "post_id": 38052558, "comment_id": 63547680, "body": "PowerMock manipulates byte code. So first of all, you are not testing <b>your class</b> files, but something that PowerMock created out of them. Then: as PowerMock instruments bytecodes, it conflicts with other frameworks that rely on that; for example coverage tools. Then finally: I have spent endless hours debugging &quot;strange&quot; fails from PowerMock test cases, <b>never</b> finding any real problem in my code. PowerMock is like an assault rifle with a broken safety switch: it works most of the time, but don&#39;t be angry/surprised if it puts a bullet in your head accidentally from time to time."}, {"owner": {"reputation": 666, "user_id": 1847644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JjElv.png?s=128&g=1", "display_name": "Daveloper87", "link": "https://stackoverflow.com/users/1847644/daveloper87"}, "edited": false, "score": 0, "creation_date": 1482354497, "post_id": 38052558, "comment_id": 69745160, "body": "Are you using the @PrepareForTest(&lt;YOUR_FINAL_CLASS&gt;::class) annotation on your test class?"}], "answers": [{"comments": [{"owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "edited": false, "score": 0, "creation_date": 1483098510, "post_id": 38092188, "comment_id": 69993139, "body": "Not sure if it&#39;s a good idea to modify and pollute your main code just because of testing limitations. PowerMock and Mockito 2 can handle this limitation (see my comment on @Januson&#39;s answer regarding Mockito 2 though)"}, {"owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "reply_to_user": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "edited": false, "score": 0, "creation_date": 1483099854, "post_id": 38092188, "comment_id": 69993737, "body": "In my developer experience creating of interfaces for classes that contains some business logic is good practice most of time."}, {"owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "edited": false, "score": 0, "creation_date": 1483102269, "post_id": 38092188, "comment_id": 69994814, "body": "It&#39;s actually a controversial topic, but creating unnecessary interfaces does not always reduce coupling, it just creates boilerplate (which Kotlin aims to reduce in the first place). Coding against interfaces is good when you have multiple implementations, or it&#39;s useful from architectural point of view, or helps with dependency injection, but otherwise it complicates the code and should be avoided. Please see the comments here: <a href=\"http://stackoverflow.com/questions/36536727/is-it-possible-to-use-mockito-with-kotlin-without-open-the-class\" title=\"is it possible to use mockito with kotlin without open the class\">stackoverflow.com/questions/36536727/&hellip;</a>"}], "tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1467182741, "creation_date": 1467182741, "answer_id": 38092188, "question_id": 38052558, "link": "https://stackoverflow.com/questions/38052558/how-to-mock-kotlin-class-final-using-powermock/38092188#38092188", "title": "How to mock Kotlin class (final) using PowerMock?", "body": "<p>Just create interfaces for your classes. Than you can simply mock your classes using interface.</p>\n"}, {"comments": [{"owner": {"reputation": 4717, "user_id": 1990785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/30ed15227ce48259bd51b3b1e515e81c?s=128&d=identicon&r=PG&f=1", "display_name": "Pragmatic geek", "link": "https://stackoverflow.com/users/1990785/pragmatic-geek"}, "edited": false, "score": 0, "creation_date": 1483098762, "post_id": 39913988, "comment_id": 69993266, "body": "This extension doesn&#39;t work with Robolectric runner due to bugs in Mockito (still present, with Mockito 2.5.0) and Robolectric. There is an open pull request in Robolectric repository to fix the issue, but until it&#39;s merged, we need to stick with PowerMock. For more info, please see the issue: <a href=\"https://github.com/robolectric/robolectric/issues/2677\" rel=\"nofollow noreferrer\">github.com/robolectric/robolectric/issues/2677</a> and the PR: <a href=\"https://github.com/robolectric/robolectric/pull/2761\" rel=\"nofollow noreferrer\">github.com/robolectric/robolectric/pull/2761</a>"}, {"owner": {"reputation": 5417, "user_id": 842697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8616a682a42637b1327b765c6618fd63?s=128&d=identicon&r=PG", "display_name": "Brais Gabin", "link": "https://stackoverflow.com/users/842697/brais-gabin"}, "edited": false, "score": 0, "creation_date": 1520443323, "post_id": 39913988, "comment_id": 85320389, "body": "This solution works, but it slows down your tests. <a href=\"https://engineering.21buttons.com/mocking-kotlin-classes-with-mockito-the-fast-way-631824edd5ba\" rel=\"nofollow noreferrer\">You can use all-open to archive</a> the same result without a performance decrese"}], "tags": [], "owner": {"reputation": 3668, "user_id": 2392960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a549fcc9b00c4ce0ede36ede98548729?s=128&d=identicon&r=PG", "display_name": "Januson", "link": "https://stackoverflow.com/users/2392960/januson"}, "is_accepted": false, "score": 3, "last_activity_date": 1475832715, "creation_date": 1475832715, "answer_id": 39913988, "question_id": 38052558, "link": "https://stackoverflow.com/questions/38052558/how-to-mock-kotlin-class-final-using-powermock/39913988#39913988", "title": "How to mock Kotlin class (final) using PowerMock?", "body": "<p>With Mockito 2.1.0+ you can mock final classess as well. This feature is optional, so you have to enable it by adding Mockito extension.\nTo do this:</p>\n\n<ul>\n<li>Create a file named <strong>org.mockito.plugins.MockMaker</strong> and place it under the <strong>resources/mockito-extensions</strong> directory in your test folder.</li>\n<li>The file contains a single line: <strong>mock-maker-inline</strong></li>\n</ul>\n\n<p>You can find more information in <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#39\" rel=\"nofollow\">Mockito documentation</a>.</p>\n"}], "owner": {"reputation": 466, "user_id": 5056573, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/940712002645523/picture?type=large", "display_name": "henorek", "link": "https://stackoverflow.com/users/5056573/henorek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2016, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1475832715, "creation_date": 1467026206, "question_id": 38052558, "link": "https://stackoverflow.com/questions/38052558/how-to-mock-kotlin-class-final-using-powermock", "title": "How to mock Kotlin class (final) using PowerMock?", "body": "<p>I wish to know how can I mock kotlin final class with PowerMock so I can test it. I followed guide for testing Java final classes but I still got this error</p>\n\n<pre><code>Cannot subclass final class\n</code></pre>\n\n<p>Is there any way to do that?</p>\n"}, {"tags": ["kotlin", "modulo"], "comments": [{"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1467039418, "post_id": 38052008, "comment_id": 63552900, "body": "The abstract class <code>Number</code> doesn&#39;t have a member function called <code>mod</code> nor <code>plus</code>. That could be the cause of the error."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467045894, "post_id": 38052008, "comment_id": 63557133, "body": "do not inline the operator, it may slow down the execution"}, {"owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467047044, "post_id": 38052008, "comment_id": 63557763, "body": "@voddan Doesn&#39;t inlining exist to improve the performance since no function call is required?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467047436, "post_id": 38052008, "comment_id": 63557990, "body": "the performance will probably be hurt in this case because the size of the binary will increase due to duplication. If necessary, JVM inlines methods on its own. If you inline a method yourself, JVM can not know that the code is duplicated and needs further optimisations."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467047635, "post_id": 38052008, "comment_id": 63558103, "body": "if you want to optimise, you should look for small binary size, which would allow to use CPU code cashes more effective. The only more costly thing than memory access is memory allocation. That&#39;s why inlining a lambda and avoiding an object allocation improves performans"}, {"owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467048211, "post_id": 38052008, "comment_id": 63558416, "body": "@voddan Nice to know! Thanks! Just to repeat: If I implemented the <code>fmod</code> for all the various Number type combinations (<code>infix fun Byte.fmod(other: Float)</code>, <code>infix fun Long.fmod(other: Double)</code>), inlining would still be bad for performance, correct?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467048349, "post_id": 38052008, "comment_id": 63558485, "body": "I have no idea without actual measurements and statistics from your code base. I am only guessing here. But generally speaking, there is a good reason why there is no <code>inline</code> in Java"}], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467046285, "post_id": 38058307, "comment_id": 63557348, "body": "@voddan Do you mean mixed operators? If that&#39;s the case: no. Both operators must be of the same type."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467046371, "post_id": 38058307, "comment_id": 63557388, "body": "as far as I understand, that was the initial requirement of the question"}, {"owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467047305, "post_id": 38058307, "comment_id": 63557910, "body": "@voddan Yes, it should work with different types and the solution should also be very fast if possible. Thank you though EPadronU! I didn&#39;t know you could use <code>is</code> like that with <code>when</code>."}, {"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1467049679, "post_id": 38058307, "comment_id": 63559165, "body": "Maybe somebody can improve its performance but my last modification should allow mixed operators without any troubles."}], "tags": [], "owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "is_accepted": false, "score": 1, "last_activity_date": 1467049498, "last_edit_date": 1467049498, "creation_date": 1467042754, "answer_id": 38058307, "question_id": 38052008, "link": "https://stackoverflow.com/questions/38052008/how-to-implement-floor-modulo-for-every-number-type-in-kotlin/38058307#38058307", "title": "How to implement floor modulo for every Number type in Kotlin?", "body": "<p>After several minutes toying around, I came up with a dirty approach to do what you want:</p>\n\n<pre><code>import java.math.BigDecimal\nimport java.math.BigInteger\n\ninline infix fun &lt;reified T: Number&gt; T.fmod(other: T): T {\n  return when {\n    this is BigDecimal || other is BigDecimal -&gt; BigDecimal(other.toString()).let {\n      (((BigDecimal(this.toString()) % it) + it) % it) as T\n    }\n    this is BigInteger || other is BigInteger -&gt; BigInteger(other.toString()).let {\n      (((BigInteger(this.toString()) % it) + it) % it) as T\n    }\n    this is Double || other is Double -&gt; other.toDouble().let {\n      (((this.toDouble() % it) + it) % it) as T\n    }\n    this is Float || other is Float -&gt; other.toFloat().let {\n      (((this.toFloat() % it) + it) % it) as T\n    }\n    this is Long || other is Long -&gt; other.toLong().let {\n      (((this.toLong() % it) + it) % it) as T\n    }\n    this is Int || other is Int -&gt; other.toInt().let {\n      (((this.toInt() % it) + it) % it) as T\n    }\n    this is Short || other is Short -&gt; other.toShort().let {\n      (((this.toShort() % it) + it) % it) as T\n    }\n    else -&gt; throw AssertionError()\n  }\n}\n\nassert(BigDecimal(\"2.1\") == BigDecimal(\"-4.3\") fmod BigDecimal(\"3.2\"))\nassert(BigInteger(\"2\") == BigInteger(\"-4\") fmod BigInteger(\"3\"))\nassert(2 == -4 fmod 3)\nassert(2L == -4L fmod 3L)\n\nassert(0.7999999999999998 == 3 fmod 2.2)\nassert(0.79999995f == 3L fmod 2.2f)\n</code></pre>\n\n<p>I though <code>reified</code> would make casting (smart and explicit) unnecessary but it was not the case. Maybe I'm missing something (I'm new to Kotlin after all).</p>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467045967, "post_id": 38058585, "comment_id": 63557167, "body": "kind of useless in this context, don&#39;t you think? ;)"}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 0, "last_activity_date": 1467043634, "creation_date": 1467043634, "answer_id": 38058585, "question_id": 38052008, "link": "https://stackoverflow.com/questions/38052008/how-to-implement-floor-modulo-for-every-number-type-in-kotlin/38058585#38058585", "title": "How to implement floor modulo for every Number type in Kotlin?", "body": "<p>Here's a completely generic higher-order-function approach without any reflection or casting:</p>\n\n<pre><code>inline fun &lt;T&gt; T.fmod(other: T, mod: T.(T) -&gt; T, plus: T.(T) -&gt; T) =\n     this.mod(other).plus(other).mod(other)\n\nassert(BigDecimal(\"2.1\") == BigDecimal(\"-4.3\").fmod(BigDecimal(\"3.2\"), BigDecimal::mod, BigDecimal::plus))\nassert(2L == -4L.fmod(3L, Long::mod, Long::plus))\n</code></pre>\n\n<p>However, it's not so pretty.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 5, "last_activity_date": 1467048530, "last_edit_date": 1467048530, "creation_date": 1467048226, "answer_id": 38059771, "question_id": 38052008, "link": "https://stackoverflow.com/questions/38052008/how-to-implement-floor-modulo-for-every-number-type-in-kotlin/38059771#38059771", "title": "How to implement floor modulo for every Number type in Kotlin?", "body": "<p>The only reasonable option (also the fastest) is to define the operator for each pair of types you want to support:</p>\n\n<pre><code>infix fun Double.fmod(other: Double) = ((this % other) + other) % other\n\ninfix fun Int.fmod(other: Int) = ((this % other) + other) % other\n\ninfix fun Double.fmod(other: Int) = ((this % other) + other) % other\n\ninfix fun Int.fmod(other: Double) = ((this % other) + other) % other\n</code></pre>\n\n<p>That way the decision of what type to use is made by the compiler, not at the runtime. Those functions are not generic and do not use inheritance (read <code>Number</code>), which means that the values are not boxed (see Java primitive boxing), meaning that objects are not allocated.</p>\n\n<p>I strongly do not recommend inlining those functions. Leave minor optimizations to JVM. The fact that objects are not allocated is the biggest performance win here.</p>\n\n<p>P.S The number of functions grows as a square of types supported. Are you sure you need to support <em>all</em> types?</p>\n"}], "owner": {"reputation": 4606, "user_id": 209019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39500ec1a4ab1dc912f232194141c34e?s=128&d=identicon&r=PG", "display_name": "Joschua", "link": "https://stackoverflow.com/users/209019/joschua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6087, "favorite_count": 1, "accepted_answer_id": 38059771, "answer_count": 3, "score": 2, "last_activity_date": 1467056909, "creation_date": 1467024493, "last_edit_date": 1467056909, "question_id": 38052008, "link": "https://stackoverflow.com/questions/38052008/how-to-implement-floor-modulo-for-every-number-type-in-kotlin", "title": "How to implement floor modulo for every Number type in Kotlin?", "body": "<p>I'm currently learning Kotlin and trying to create an extension (infix) method that works on all <a href=\"https://kotlinlang.org/docs/reference/basic-types.html#numbers\" rel=\"nofollow\">number types</a> (<code>Byte</code>, <code>Long</code>, <code>Float</code>, etc.). It should work like Python's <code>%</code> operator:</p>\n\n<pre><code> 4   %   3  ==   1      // only this is the same as Java's %\n 4   %  -3  ==  -2\n-4   %   3  ==   2\n-4   %  -3  ==  -1\n</code></pre>\n\n<p>...or like Java's <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#floorMod-int-int-\" rel=\"nofollow\"><code>Math.floorMod</code></a>, but it should also work with <code>Double</code> or <code>Float</code>:</p>\n\n<pre><code>-4.3 %  3.2 ==   2.1000000000000005\n</code></pre>\n\n<p>or with any possible combination of these types</p>\n\n<pre><code> 3   %  2.2 ==   0.7999999999999998\n 3L  %  2.2f ==   0.7999999999999998\n</code></pre>\n\n<p>The following works as intended, but only for two <code>Double</code> or two <code>Int</code>:</p>\n\n<pre><code>inline infix fun Double.fmod(other: Double): Number {\n    return ((this % other) + other) % other\n}\n\ninline infix fun Int.fmod(other: Int): Number {\n    return ((this % other) + other) % other\n}\n\n// test\nfun main(args: Array&lt;String&gt;) {\n    println(\"\"\"\n            ${-4.3 fmod 3.2} == 2.1000000000000005\n\n            ${4 fmod 3} == 1\n            ${+4 fmod -3} == -2\n            ${-4 fmod 3} == 2\n            ${-4 fmod -3} == -1\n    \"\"\")\n}\n</code></pre>\n\n<p>Replacing <code>Int</code> with <code>Number</code>, I get the following error messages:</p>\n\n<pre><code>Error:(21, 18) Unresolved reference. None of the following candidates is applicable because of receiver type mismatch: \n@InlineOnly public operator inline fun BigDecimal.mod(other: BigDecimal): BigDecimal defined in kotlin\nError:(21, 27) Public-API inline function cannot access non-public-API 'internal open fun &lt;ERROR FUNCTION&gt;(): [ERROR : &lt;ERROR FUNCTION RETURN TYPE&gt;] defined in root package'\nError:(21, 36) Public-API inline function cannot access non-public-API 'internal open fun &lt;ERROR FUNCTION&gt;(): [ERROR : &lt;ERROR FUNCTION RETURN TYPE&gt;] defined in root package'\n</code></pre>\n\n<p>How can I achieve this for every number type without copy-pasting this for every type combination?</p>\n"}, {"tags": ["unit-testing", "mockito", "kotlin"], "answers": [{"tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": true, "score": 5, "last_activity_date": 1470824849, "creation_date": 1470824849, "answer_id": 38870784, "question_id": 38046145, "link": "https://stackoverflow.com/questions/38046145/kotlin-anonymous-function-parameter-unit-testing/38870784#38870784", "title": "Kotlin Anonymous Function Parameter Unit Testing", "body": "<p>After a while discover the way to test it is to use Argument Captor.</p>\n\n<pre><code>@Test\nfun myTest() {\n    val myClass1 = MyClass1(mockMyObject, mockMyObject2)\n    val argCaptor = argumentCaptor&lt;(Int) -&gt; Unit&gt;()\n    val num = 1  //Any number to test\n\n    myClass1.myFunctionOne()\n    verify(mockMyObject).functionWithFuncParam(argCaptor.capture())\n    argCaptor.value.invoke(num)\n\n    // after that you could verify the content in the anonymous function call\n    verify(mockMyObject2).println(num)\n}\n</code></pre>\n\n<p>For more info, refer to <a href=\"https://medium.com/@elye.project/how-to-unit-test-kotlins-private-function-variable-893d8a16b73f#.1f3v5mkql\" rel=\"noreferrer\">https://medium.com/@elye.project/how-to-unit-test-kotlins-private-function-variable-893d8a16b73f#.1f3v5mkql</a></p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 3, "accepted_answer_id": 38870784, "answer_count": 1, "score": 4, "last_activity_date": 1470824942, "creation_date": 1467003119, "last_edit_date": 1495541286, "question_id": 38046145, "link": "https://stackoverflow.com/questions/38046145/kotlin-anonymous-function-parameter-unit-testing", "title": "Kotlin Anonymous Function Parameter Unit Testing", "body": "<p>As per <a href=\"https://stackoverflow.com/questions/37655431/kotlin-unit-testing-for-function-parameter-and-object\">Kotlin Unit Testing for Function Parameter and Object</a>, we could test the function variable <code>funcParam</code>, as it is an object function variable.</p>\n\n<p>However if code is written using anonymous/inlining function parameter (which is a very nice Kotlin feature, that allow us to eliminate unnecessary temp variable for it)...</p>\n\n<pre><code>class MyClass1(val myObject: MyObject, val myObject2: MyObject2) {\n    fun myFunctionOne() {\n        myObject.functionWithFuncParam{ \n            num: Int -&gt;\n            // Do something to be tested\n            myObject2.println(num)\n        }\n    }\n}\n\nclass MyObject () {\n    fun functionWithFuncParam(funcParam: (Int) -&gt; Unit) {\n        funcParam(32)\n    }\n}\n</code></pre>\n\n<p>How to write my unit test that test this part of code?</p>\n\n<pre><code>            num: Int -&gt;\n            // Do something to be tested\n            myObject2.println(num)\n</code></pre>\n\n<p>Or the inlining of the function parameter (as above) is something not good for unit testing, and hence should be avoided?</p>\n"}, {"tags": ["generics", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 0, "creation_date": 1466865100, "post_id": 38029508, "comment_id": 63499204, "body": "Thanks. I am still somewhat puzzled why <code>T</code> isn&#39;t visible to the static inner classes as I would think <code>T</code> would be part of the scope."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 0, "creation_date": 1466865222, "post_id": 38029508, "comment_id": 63499233, "body": "I guess that&#39;s just how it works in Java and it works the same in Kotlin. Are you coming from a language where it works differently?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "reply_to_user": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 1, "creation_date": 1466865373, "post_id": 38029508, "comment_id": 63499262, "body": "@FuleSnabel static nested classes (there is no such thing as a static inner class) are no different from top-level classes. The only difference is that they have a weirder name (Result.Success instead of Success), and that they can access the private members of their enclosing class (and vice-versa). Other than that, they&#39;re just like top-level classes. Inner classes are different, because they have an implicit reference to their owner <b>instance</b>."}, {"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 0, "creation_date": 1466865478, "post_id": 38029508, "comment_id": 63499294, "body": "I am comparing with my experience from <code>OCaml</code> like languages where I would declare an ADT somewhat like this: <code>type Result&lt;&#39;T&gt; = Success of &#39;T*int | Failure of String*int</code>"}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 1, "creation_date": 1466866099, "post_id": 38029508, "comment_id": 63499458, "body": "Kotlin <i>could</i> have made the syntax possible but I guess the designers decided it doesn&#39;t provide too much value. You need to remember that <code>sealed</code> classes are just regular abstract classes where all inheritors are known, nothing more."}, {"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1466866316, "post_id": 38029508, "comment_id": 63499527, "body": "Oh and as @JBNizet explains in his answer, you can have non-generic subclasses of a generic sealed class."}], "tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 4, "last_activity_date": 1466865427, "last_edit_date": 1466865427, "creation_date": 1466864882, "answer_id": 38029508, "question_id": 38029391, "link": "https://stackoverflow.com/questions/38029391/why-does-generic-algebraic-data-types-require-t-on-member-types/38029508#38029508", "title": "Why does Generic Algebraic Data Types require `T` on member types?", "body": "<p>The rules are the same as in Java. It basicly comes down to <code>Success</code> and <code>Failure</code> being static nested classes of <code>Result</code>. There are no \"member types\" in Kotlin, static nested classes are regular classes that have access to the scope of the outer class. And if a class extends a generic super class, it always needs to bind the generic type parameters.</p>\n\n<p>In contrast, non-static nested classes (denoted by the <code>inner</code> keyword) always carry the generic type paremeter of the outer class. This way you can construct the following type hierarchy:</p>\n\n<pre><code>open class Foo&lt;T&gt; {\n    inner class Bar : Foo&lt;T&gt;()\n}\n</code></pre>\n\n<p>To instantiate <code>Bar</code> you will need to have an instance of <code>Foo</code>:</p>\n\n<pre><code>val b = Foo&lt;String&gt;().Bar()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 1, "creation_date": 1466865315, "post_id": 38029527, "comment_id": 63499253, "body": "Thanks. I realized that <code>Result</code> strictly don&#39;t need to be generic but I like it to be because <code>parse</code> produces a <code>Result</code> which <code>Success&lt;T&gt;</code> generic type is the same as <code>Parser&lt;T&gt;</code>. If I would not include <code>T</code> in Result I (perhaps mistakenly) believe the API would be less type-safe."}, {"owner": {"reputation": 13935, "user_id": 11015, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKg6n.jpg?s=128&g=1", "display_name": "miguel", "link": "https://stackoverflow.com/users/11015/miguel"}, "edited": false, "score": 0, "creation_date": 1500583867, "post_id": 38029527, "comment_id": 77416225, "body": "What if I want a method signature like <code>fun foo(): Result&lt;SomeType&gt;</code>. So that the returned value is either a Success&lt;SomeType&gt; or Failure?"}], "tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": true, "score": 6, "last_activity_date": 1466865028, "creation_date": 1466865028, "answer_id": 38029527, "question_id": 38029391, "link": "https://stackoverflow.com/questions/38029391/why-does-generic-algebraic-data-types-require-t-on-member-types/38029527#38029527", "title": "Why does Generic Algebraic Data Types require `T` on member types?", "body": "<p><code>Result</code> is a generic class, with a single generic parameter named T. The class name is <code>Result</code> though, not <code>Result&lt;T&gt;</code>.</p>\n\n<p><code>Success</code> is a generic class, too. So, since it's generic, you need to define it as <code>Success&lt;T&gt;</code>. If you don't, then it's not generic anymore. Note that, even though it's a subclass of Result which is generic, it could be a non-generic type. For example:</p>\n\n<pre><code>class Success(val value: String, val pos: Int) : Result&lt;String&gt;()\n</code></pre>\n\n<p>Also note that although Result and Failure are generic, they don't use their generic type for anything. So you could in fact define your classes as </p>\n\n<pre><code>sealed class Result {\n    class Success&lt;T&gt;(val value: T, val pos: Int) : Result()\n    class Failure(val message: String, val pos: Int) : Result()\n}\n</code></pre>\n\n<p>Now, why do you need to use <code>Result.Success&lt;T&gt;(tv.someValue, pos)</code> and not <code>Result&lt;T&gt;.Success&lt;T&gt;(tv.someValue, pos)</code>? </p>\n\n<p>Because the name of the class is <code>Result.Success</code>. The parameter type is not part of the class name. Most of the time, it's not necessary to specify it at all because it will be inferred:</p>\n\n<pre><code>val r = Result.Success(\"foo\", 1)\n</code></pre>\n\n<p>creates an instance of <code>Success&lt;String&gt;</code>. If you wanted instead to create a <code>Success&lt;CharSequence&gt;</code>, then you would have to specify the generic type explicitly:</p>\n\n<pre><code>val r = Result.Success&lt;CharSequence&gt;(\"foo\", 1)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>val r: Result.Success&lt;CharSequence&gt; = Result.Success(\"foo\", 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "edited": false, "score": 0, "creation_date": 1467041626, "post_id": 38035558, "comment_id": 63554373, "body": "The property <code>value</code> is of type <code>T</code>. Your code doesn&#39;t compile."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467041677, "last_edit_date": 1467041677, "creation_date": 1466919484, "answer_id": 38035558, "question_id": 38029391, "link": "https://stackoverflow.com/questions/38029391/why-does-generic-algebraic-data-types-require-t-on-member-types/38035558#38035558", "title": "Why does Generic Algebraic Data Types require `T` on member types?", "body": "<p>In your example there are three different generic parameters, not one. I.e. your code is equivalent to:</p>\n\n<pre><code>sealed class Result&lt;I&gt; {\n    class Success&lt;A&gt;(val value: A, val pos: Int) : Result&lt;A&gt;()\n    class Failure&lt;B&gt;(val message: String, val pos: Int) : Result&lt;B&gt;()\n}\n</code></pre>\n\n<p>But how other answers mention, you do not use the <code>I</code> and <code>B</code> parameters, so they are better to be omitted.</p>\n"}, {"tags": [], "owner": {"reputation": 13935, "user_id": 11015, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKg6n.jpg?s=128&g=1", "display_name": "miguel", "link": "https://stackoverflow.com/users/11015/miguel"}, "is_accepted": false, "score": 1, "last_activity_date": 1500584842, "creation_date": 1500584842, "answer_id": 45225201, "question_id": 38029391, "link": "https://stackoverflow.com/questions/38029391/why-does-generic-algebraic-data-types-require-t-on-member-types/45225201#45225201", "title": "Why does Generic Algebraic Data Types require `T` on member types?", "body": "<p>It should work if you use the out variance like this,</p>\n\n<pre><code>sealed class Result&lt;out T&gt; {\n  data class Success&lt;out T&gt;(val value: T, val pos: Int) : Result&lt;T&gt;()\n  data class Failure(val message: String, val pos: Int) : Result&lt;Nothing&gt;()\n}\n</code></pre>\n"}], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 38029527, "answer_count": 4, "score": 4, "last_activity_date": 1500584842, "creation_date": 1466864000, "question_id": 38029391, "link": "https://stackoverflow.com/questions/38029391/why-does-generic-algebraic-data-types-require-t-on-member-types", "title": "Why does Generic Algebraic Data Types require `T` on member types?", "body": "<p>I want to define a Generic Algebraic Data Type for use with my <code>parse</code> function like this:</p>\n\n<pre><code>sealed class Result&lt;T&gt; {\n    class Success(val value: T, val pos: Int) : Result&lt;T&gt;()\n    class Failure(val message: String, val pos: Int) : Result&lt;T&gt;()\n}\n\nfun &lt;T&gt; parse(t: Parser&lt;T&gt;, input: String, initialPos: Int = 0, collectErrors: Boolean = true) : Result&lt;T&gt; {\n</code></pre>\n\n<p>However this is not allowed as <code>T</code> is then an undefined reference.</p>\n\n<p>If I add <code>T</code> to all member types it works:</p>\n\n<pre><code>sealed class Result&lt;T&gt; {\n    class Success&lt;T&gt;(val value: T, val pos: Int) : Result&lt;T&gt;()\n    class Failure&lt;T&gt;(val message: String, val pos: Int) : Result&lt;T&gt;()\n}\n</code></pre>\n\n<p>To me this is somewhat confusing which makes me believe I am missing something here. Why isn't <code>T</code> seen when defining the member types in the first case?</p>\n\n<p>In addition when creating an instance of <code>Success</code> I would expect the syntax to be:</p>\n\n<pre><code>Result&lt;T&gt;.Success&lt;T&gt;(tv.someValue, pos)\n</code></pre>\n\n<p>But that won't work instead I do this:</p>\n\n<pre><code>Result.Success&lt;T&gt;(tv.someValue, pos)\n</code></pre>\n\n<p>This is the preferable syntax to me but I am struggling to understand why I should leave out <code>T</code> on Result here.</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1466801822, "post_id": 38021926, "comment_id": 63485668, "body": "Why wait for the program to crash when the compiler tells you that it will (very likely) crash at some point here?"}, {"owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1466802468, "post_id": 38021926, "comment_id": 63485958, "body": "It forces me to fix the problem. And indicate where the problem is(stacktrace). Here, I should write some system which would notify me about nulls."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1466803304, "post_id": 38021926, "comment_id": 63486271, "body": "If map should not be null, then the type should be GoogleMap, not GoogleMap?. Why do you accept a nullable type as argument if it&#39;s not supposed to be null."}, {"owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "edited": false, "score": 0, "creation_date": 1466804319, "post_id": 38021926, "comment_id": 63486631, "body": "What? I received map: GoogleMap? as the argument of override method. I can&#39;t change its nullability"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1466804746, "post_id": 38021926, "comment_id": 63486761, "body": "Yes, you can. See yole&#39;s answer."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466854713, "post_id": 38021926, "comment_id": 63496301, "body": "the name of the question is very vague. @alexeypolusov care to rename?"}, {"owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "edited": false, "score": 0, "creation_date": 1466863027, "post_id": 38021926, "comment_id": 63498650, "body": "how do you want me to rename it?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466918346, "post_id": 38021926, "comment_id": 63510897, "body": "I mean a &quot;what-is-the-purpose&quot; question is not very clear and does not help others to find the answer"}], "answers": [{"comments": [{"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 0, "creation_date": 1467147576, "post_id": 38022508, "comment_id": 63608719, "body": "Yeah it&#39;s nice when it&#39;s documented, otherwise I find myself trawling through the code to check if it&#39;s actually guarding against <code>null</code> input / never returning <code>null</code> to ensure it&#39;s safe to make my kotlin params/return types non-null. It&#39;s worth it though - just makes me like Java a little less each time :)"}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 4, "last_activity_date": 1466804533, "creation_date": 1466804533, "answer_id": 38022508, "question_id": 38021926, "link": "https://stackoverflow.com/questions/38021926/what-is-the-best-way-to-handle-null-situations-in-kotlin-when-extending-a-java-c/38022508#38022508", "title": "What is the best way to handle null situations in Kotlin when extending a Java class?", "body": "<p>The documentation of <a href=\"https://developers.google.com/android/reference/com/google/android/gms/maps/OnMapReadyCallback\" rel=\"nofollow\">OnMapReadyCallback</a> says explicitly that it \"provides a non-null instance of GoogleMap\". Consequently, the parameter type of your <code>onMapReady</code> method should use a non-null type.</p>\n\n<p>Note that, when you implement a Java interface in Kotlin, you have a choice of whether to declare the parameters of the implementing method as nullable or non-null. The IDE marks them as nullable because it's the safe default, but you can change them to non-null if that's what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": -1, "last_activity_date": 1466919139, "creation_date": 1466919139, "answer_id": 38035530, "question_id": 38021926, "link": "https://stackoverflow.com/questions/38021926/what-is-the-best-way-to-handle-null-situations-in-kotlin-when-extending-a-java-c/38035530#38035530", "title": "What is the best way to handle null situations in Kotlin when extending a Java class?", "body": "<p>About dealing with nulls: let's imagine that you need to have a method <code>fun onMapReady(map: GoogleMap?)</code> which would set a class property <code>map</code>.</p>\n\n<p>You have two <em>design</em> options to choose between:</p>\n\n<p>1) Your app will not work if <code>map</code> is <code>null</code></p>\n\n<pre><code>class A {\n    lateinit var map: GoogleMap  // never ever `null`\n\n    fun onMapReady(map: GoogleMap?) {\n        map = map!!  // throws\n    }\n\n    fun onMapReady2(map: GoogleMap?) {\n        map = map ?: throw Exception(\"in case you care for the exception\")\n    }\n}\n</code></pre>\n\n<p>2) <code>Null</code> has special meaning for you and is ok to have:</p>\n\n<pre><code>class A {\n    var map: GoogleMap? = null  // map is not ready yet\n\n    fun onMapReady(map: GoogleMap?) {\n        map = map\n    }\n}\n</code></pre>\n\n<p>Of course, if your case is case (1) and you can control the API, then you should never have a nullable receiver <code>map: GoogleMap?</code> because it confuses the user of the class.</p>\n"}, {"comments": [{"owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "edited": false, "score": 0, "creation_date": 1467009193, "post_id": 38045766, "comment_id": 63533964, "body": "Thanks. According to your first link:  // This whole block will not be executed if &quot;config&quot; is null. What If I have some complicated business logic and when I got my &quot;config&quot; null, I would have some bags which are (IMHO) hard to trace. How should I handle that kind of thing?  This is what I&#39;m talking about in my post."}], "tags": [], "owner": {"reputation": 1276, "user_id": 4594990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMg6W.jpg?s=128&g=1", "display_name": "vigilancer", "link": "https://stackoverflow.com/users/4594990/vigilancer"}, "is_accepted": false, "score": -1, "last_activity_date": 1467000270, "last_edit_date": 1495541296, "creation_date": 1467000270, "answer_id": 38045766, "question_id": 38021926, "link": "https://stackoverflow.com/questions/38021926/what-is-the-best-way-to-handle-null-situations-in-kotlin-when-extending-a-java-c/38045766#38045766", "title": "What is the best way to handle null situations in Kotlin when extending a Java class?", "body": "<p>I see two separate questions:<br>\n1. Null handling<br>\n2. Kotlin specific syntax for null handling  </p>\n\n<p>First is not a kotlin specific problem. It depends, and @voddan pretty much explained available strategies.  </p>\n\n<p>Regarding syntax.\nIf you interested only in non-null values, use let()</p>\n\n<pre><code>override fun onMapReady(map: GoogleMap?) {\n        map?.let { m -&gt;\n            // do your staff \n            // 'm' now is definitely not null\n        }\n    }\n</code></pre>\n\n<p>If you want to know when it is null, use usual if-else block</p>\n\n<pre><code>override fun onMapReady(map: GoogleMap?) {\n    if (map != null) {\n        this.map = map\n    } else {\n        Log.d(\"Activity\",\"MapIsNull\")\n    }    \n</code></pre>\n\n<p>Sidenotes:<br>\n1] @Cedric have <a href=\"http://beust.com/weblog/2015/10/30/exploring-the-kotlin-standard-library/\" rel=\"nofollow noreferrer\">nice post</a> about kotlin's let() and friends<br>\n2] check out <a href=\"https://stackoverflow.com/a/38022508/4594990\">@yole's comment</a>. when overriding fun in IDEA arguments can be marked as '?', but in fact they aren't.</p>\n"}], "owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 38022508, "answer_count": 3, "score": 1, "last_activity_date": 1467000270, "creation_date": 1466801412, "last_edit_date": 1466939799, "question_id": 38021926, "link": "https://stackoverflow.com/questions/38021926/what-is-the-best-way-to-handle-null-situations-in-kotlin-when-extending-a-java-c", "title": "What is the best way to handle null situations in Kotlin when extending a Java class?", "body": "<p>I'm really stuck with situation when something can be null in Kotlin. When a value cannot be null - it is clear. But how to handle situation when something can be null by default. Take a look at this example:</p>\n\n<pre><code>abstract class MapActivity: AppCompatActivity(), OnMapReadyCallback {\n\n    lateinit var map: GoogleMap\n\n    fun initializeMap() {\n        val mapFragment = supportFragmentManager.findFragmentById(R.id.map) as SupportMapFragment\n        mapFragment.getMapAsync(this)\n    }\n\n    override fun onMapReady(map: GoogleMap?) {\n        this.map = map //error here\n    }\n}\n</code></pre>\n\n<p>So I should handle that situation this way:</p>\n\n<pre><code>override fun onMapReady(map: GoogleMap?) {\n        if (map != null) \n            this.map = map\n    }\n</code></pre>\n\n<p>But what if map is <strong>null</strong>. What should I do in this case? I've faced this problem while using java. </p>\n\n<p>Ok, in java, if map is null, we will get NPE.</p>\n\n<p>And for me NPE is better than nothing. The program crashes and this is a signal for me, that something is wrong and I should fix it. In this way, I can't even trace my problem and why it is happen. \nYeah, we can write something like:</p>\n\n<pre><code>override fun onMapReady(map: GoogleMap?) {\n    if (map != null) {\n        this.map = map\n    } else {\n        Log.d(\"Activity\",\"MapIsNull\")\n    }    \n}\n</code></pre>\n\n<p>and there is some meaning in this code, yes. \nBut there is still some hesitation in me head about the whole null safety thing.\nSafe calls for example is weird thing which produces null and (In my opinion) heisenbugs or bugs that are hard to catch. </p>\n\n<p>Can someone explain to me what is going on here, and what are the best practices to use null-safety. </p>\n\n<p><em>I'm pretty sure that this thing is useful, because I'm not as smart as guys in JB</em></p>\n"}, {"tags": ["static", "kotlin", "companion-object"], "comments": [{"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1466800375, "post_id": 38021360, "comment_id": 63485057, "body": "Maybe this could be of help { <a href=\"http://stackoverflow.com/q/37794850/2804610\">stackoverflow.com/q/37794850/2804610</a> }"}, {"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1466800612, "post_id": 38021360, "comment_id": 63485157, "body": "In regards to your last paragraph, I think this answer could help you { <a href=\"http://stackoverflow.com/a/37944990/2804610\">stackoverflow.com/a/37944990/2804610</a> }"}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 10, "last_activity_date": 1466828791, "last_edit_date": 1466828791, "creation_date": 1466804251, "answer_id": 38022459, "question_id": 38021360, "link": "https://stackoverflow.com/questions/38021360/kotlin-object-vs-companion-object-vs-package-scoped-methods/38022459#38022459", "title": "Kotlin object vs companion-object vs package scoped methods", "body": "<p>If you have a function which performs some action closely related to a class but doesn't require a class instance, such as your <code>findById</code> example, you should put it in the companion object of the class.</p>\n\n<p>If you want to expose a method as a static method to Java code, you can annotate it with the <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods\"><code>@JvmStatic</code></a> annotation.</p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 7, "last_activity_date": 1466855905, "creation_date": 1466855905, "answer_id": 38028276, "question_id": 38021360, "link": "https://stackoverflow.com/questions/38021360/kotlin-object-vs-companion-object-vs-package-scoped-methods/38028276#38028276", "title": "Kotlin object vs companion-object vs package scoped methods", "body": "<p>If a function does not require an instance of a class, then it is your design decision where to put it. Use package level if it is package-specific, use a class companion if it closely relets to the class (for example other classes in the package have similar functions).</p>\n\n<p>Note that <code>enum</code> has several in-build properties and patterns:</p>\n\n<pre><code>enum class Colour(val value: Int) {\n    black(100), red(200), green(300)\n}\n\nfun colourById(id: Int) = Colour.values[id]\nfun colourByValue(value: Int) = Colour.values.first {it.value == value}\nfun colourByName(name: String) = Colour.valueOf(name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2964, "user_id": 2769917, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/78c9b4e2e2a18d5c74468629bcd1c3ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asif Mushtaq", "link": "https://stackoverflow.com/users/2769917/asif-mushtaq"}, "edited": false, "score": 4, "creation_date": 1495997183, "post_id": 38036756, "comment_id": 75471465, "body": "Why not direct call from <code>Color</code> class? <code>println(Color.findById(Color.valueOf(&quot;RED&quot;)));</code>"}], "tags": [], "owner": {"reputation": 151, "user_id": 475857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c31bc31c781899e015ab3dee3ead90e5?s=128&d=identicon&r=PG", "display_name": "Aleosha", "link": "https://stackoverflow.com/users/475857/aleosha"}, "is_accepted": true, "score": 2, "last_activity_date": 1466930781, "last_edit_date": 1495541827, "creation_date": 1466930781, "answer_id": 38036756, "question_id": 38021360, "link": "https://stackoverflow.com/questions/38021360/kotlin-object-vs-companion-object-vs-package-scoped-methods/38036756#38036756", "title": "Kotlin object vs companion-object vs package scoped methods", "body": "<p>I would suggest to develop <a href=\"https://stackoverflow.com/a/38028276/475857\">voddan answer</a>:</p>\n\n<pre><code>enum class Color {\n\n    RED,\n    BLUE,\n    GREEN;\n\n\n    companion object Utils {\n        fun findById(color: Color): Color {\n            return color;\n        }\n    }\n}\n</code></pre>\n\n<p>And to test</p>\n\n<pre><code>@Test\nfun testColor() {\n    println(Color.Utils.findById(Color.valueOf(\"RED\")));\n}\n</code></pre>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3564, "favorite_count": 2, "accepted_answer_id": 38036756, "answer_count": 3, "score": 13, "last_activity_date": 1466930781, "creation_date": 1466799051, "last_edit_date": 1466854921, "question_id": 38021360, "link": "https://stackoverflow.com/questions/38021360/kotlin-object-vs-companion-object-vs-package-scoped-methods", "title": "Kotlin object vs companion-object vs package scoped methods", "body": "<p>I have written this methods in Kotlin and analysed the bytecode:</p>\n\n<h1>Situation 1</h1>\n\n<pre><code>class A {\n    object b {\n        fun doSomething() {}\n    }\n}\n</code></pre>\n\n<h1>Situation 2</h1>\n\n<pre><code>class A {\n    companion object b {\n        fun doSomething() {}\n    }\n}\n</code></pre>\n\n<h1>Situation 3</h1>\n\n<pre><code>fun doSomething() {}\n</code></pre>\n\n<p>Bytecode Result</p>\n\n<ul>\n<li>Situation 1: class <code>Test$asb</code>, <code>public final doSomething()I</code></li>\n<li>Situation 2: class <code>Test$Companion</code>, <code>public final doSomething()I</code></li>\n<li>Situation 3: class <code>TestKt</code>, <code>public final static doSomething()I</code></li>\n</ul>\n\n<p>My questions are:</p>\n\n<ul>\n<li><p>I have an enum class, and I want to return an enum instace given an enum variable, for instance, findById <code>(enum(id, color))</code>. How would I do it? Companion Object? object?</p></li>\n<li><p>It seems the only way to have a real static method is in package level, without class declaration. But that becomes a little bit too global. Is there any way to access it via: <code>ClassName.staticMethod</code>, staticMethod being really static.</p></li>\n<li><p>Provide meaningfull examples of package declaration methods, companion object and object.</p></li>\n</ul>\n\n<p>Context. I have been coding in Kotlin and I find it amazing. But sometimes I need to make a decision: for example, a heavy immutable property which in java I would declare as static final, but in Kotlin I find it hard to \"find an equivalent\".</p>\n"}, {"tags": ["intellij-idea", "comments", "kotlin"], "comments": [{"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1466778141, "post_id": 38015307, "comment_id": 63473394, "body": "<code>&#47;</code>+<code>*</code>+<code>*</code>+<code>ENTER</code> generates <code>&#47;**\\n * \\n *&#47;</code> for me in 2016.1.3.  Could you have some plugin causing issues?"}, {"owner": {"reputation": 755, "user_id": 1082355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fdd92e1b58caff81aaee17d6e9629fe8?s=128&d=identicon&r=PG", "display_name": "DenEwout", "link": "https://stackoverflow.com/users/1082355/denewout"}, "reply_to_user": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 1, "creation_date": 1466779146, "post_id": 38015307, "comment_id": 63474070, "body": "Hi yes, sorry I should clarify it does generate that but it does not generate the @params/@return documented here: <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/kotlin-doc.html</a>  edit: added clarification to question."}, {"owner": {"reputation": 21589, "user_id": 4875631, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Goodbye StackExchange", "link": "https://stackoverflow.com/users/4875631/goodbye-stackexchange"}, "edited": false, "score": 0, "creation_date": 1549294340, "post_id": 38015307, "comment_id": 95841644, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40574195/generate-kdoc-for-methods-in-android-studio\">Generate KDoc for methods in Android Studio</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1167, "user_id": 1558717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3d1b7dcff46cc3f5fb782cf14224cb1a?s=128&d=identicon&r=PG", "display_name": "Daksh", "link": "https://stackoverflow.com/users/1558717/daksh"}, "edited": false, "score": 2, "creation_date": 1504502164, "post_id": 38022425, "comment_id": 79021077, "body": "Then why does the <a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"nofollow noreferrer\">Documenting Kotlin Code</a> page have a list of all available tags? Am I really missing something here?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 1167, "user_id": 1558717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3d1b7dcff46cc3f5fb782cf14224cb1a?s=128&d=identicon&r=PG", "display_name": "Daksh", "link": "https://stackoverflow.com/users/1558717/daksh"}, "edited": false, "score": 0, "creation_date": 1504515900, "post_id": 38022425, "comment_id": 79027163, "body": "The tags are available and supported, but not <i>recommended</i> for use."}, {"owner": {"reputation": 1167, "user_id": 1558717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3d1b7dcff46cc3f5fb782cf14224cb1a?s=128&d=identicon&r=PG", "display_name": "Daksh", "link": "https://stackoverflow.com/users/1558717/daksh"}, "edited": false, "score": 1, "creation_date": 1504661436, "post_id": 38022425, "comment_id": 79091636, "body": "I&#39;d have to ask you to link me to the documentation which describes the documentation process as detailed as possible. Thanks! Because by the looks of the link I posted in my previous comment, it seemed to me that that was what the official Kotlin Documentation recommends to use."}, {"owner": {"reputation": 9609, "user_id": 2666110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX7z5.png?s=128&g=1", "display_name": "Charles A.", "link": "https://stackoverflow.com/users/2666110/charles-a"}, "reply_to_user": {"reputation": 1167, "user_id": 1558717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/3d1b7dcff46cc3f5fb782cf14224cb1a?s=128&d=identicon&r=PG", "display_name": "Daksh", "link": "https://stackoverflow.com/users/1558717/daksh"}, "edited": false, "score": 5, "creation_date": 1519073917, "post_id": 38022425, "comment_id": 84751986, "body": "@Daksh For what it&#39;s worth, I found that documentation that is being referring to <a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#documentation-comments\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 10567, "user_id": 541624, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uyz2B.jpg?s=128&g=1", "display_name": "ericn", "link": "https://stackoverflow.com/users/541624/ericn"}, "edited": false, "score": 0, "creation_date": 1549250900, "post_id": 38022425, "comment_id": 95823061, "body": "what does &quot;foo&quot; mean?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 10567, "user_id": 541624, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uyz2B.jpg?s=128&g=1", "display_name": "ericn", "link": "https://stackoverflow.com/users/541624/ericn"}, "edited": false, "score": 0, "creation_date": 1549278148, "post_id": 38022425, "comment_id": 95832390, "body": "@ericn <a href=\"https://softwareengineering.stackexchange.com/questions/69788/what-is-the-history-of-the-use-of-foo-and-bar-in-source-code-examples\" title=\"what is the history of the use of foo and bar in source code examples\">softwareengineering.stackexchange.com/questions/69788/&hellip;</a>"}, {"owner": {"reputation": 655, "user_id": 9766649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40571cd16468b9dce1aff3a76cc29dd7?s=128&d=identicon&r=PG&f=1", "display_name": "user155", "link": "https://stackoverflow.com/users/9766649/user155"}, "edited": false, "score": 0, "creation_date": 1558336265, "post_id": 38022425, "comment_id": 99052404, "body": "I checked that link (&quot;Kotlin standard library&quot;) but I don&#39;t see anything about commenting functions"}, {"owner": {"reputation": 10409, "user_id": 183575, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f7cf97a5839b2c12ce7f3ccf3dd6c6d?s=128&d=identicon&r=PG", "display_name": "RedGlyph", "link": "https://stackoverflow.com/users/183575/redglyph"}, "edited": false, "score": 0, "creation_date": 1618251147, "post_id": 38022425, "comment_id": 118540785, "body": "Those are two different concepts. Including a parameter between brackets <code>[foo]</code> produces a linked text to the content&#39;s definition, you can use that with any type, variable, ... which is in the scope. <code>@param</code> is used to tag the definition of a parameter (mainly if this is a long definition). So <code>@param [foo] the parameter that comes before [bar]</code> would be a typical comment. <code>[foo]</code> can actually be used anywhere in the comment, not only in the <code>@param</code> section."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 21, "last_activity_date": 1466804002, "creation_date": 1466804002, "answer_id": 38022425, "question_id": 38015307, "link": "https://stackoverflow.com/questions/38015307/generating-kotlin-method-class-comments/38022425#38022425", "title": "Generating Kotlin method/class comments", "body": "<p>The <code>@param</code> and other tags are not generated because the recommended documentation style for Kotlin is to refer to parameter names from the doc comment text using the <code>[foo]</code> syntax, rather than to document them using explicit <code>@param</code> tags. You can check the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/\" rel=\"noreferrer\">Kotlin standard library documentation</a> to see how this style is used.</p>\n"}, {"tags": [], "owner": {"reputation": 10910, "user_id": 937715, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/95131eaa6ada481c002b9e006a51a7c3?s=128&d=identicon&r=PG", "display_name": "Sean Barbeau", "link": "https://stackoverflow.com/users/937715/sean-barbeau"}, "is_accepted": false, "score": 20, "last_activity_date": 1530116152, "creation_date": 1530116152, "answer_id": 51067319, "question_id": 38015307, "link": "https://stackoverflow.com/questions/38015307/generating-kotlin-method-class-comments/51067319#51067319", "title": "Generating Kotlin method/class comments", "body": "<p>To expand on @yole's answer and @Charles A.'s comment, here is a full explanation of the preferred format when creating KDocs and how it differs from JavaDocs.</p>\n\n<p>The Kotlin documentation here:</p>\n\n<p><a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html#documentation-comments\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/coding-conventions.html#documentation-comments</a></p>\n\n<p>...says:</p>\n\n<blockquote>\n  <p>Generally, avoid using @param and @return tags. Instead, incorporate the description of parameters and return values directly into the documentation comment, and add links to parameters wherever they are mentioned. Use @param and @return only when a lengthy description is required which doesn't fit into the flow of the main text.</p>\n  \n  <p>Avoid doing this:</p>\n\n<pre><code>/**\n * Returns the absolute value of the given number.\n * @param number The number to return the absolute value for.\n * @return The absolute value.\n */\nfun abs(number: Int) = ...\n</code></pre>\n  \n  <p>Do this instead:</p>\n\n<pre><code>/**\n * Returns the absolute value of the given [number].\n */\nfun abs(number: Int) = ...\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 755, "user_id": 1082355, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fdd92e1b58caff81aaee17d6e9629fe8?s=128&d=identicon&r=PG", "display_name": "DenEwout", "link": "https://stackoverflow.com/users/1082355/denewout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10014, "favorite_count": 6, "answer_count": 2, "score": 35, "last_activity_date": 1549294163, "creation_date": 1466776980, "last_edit_date": 1466779276, "question_id": 38015307, "link": "https://stackoverflow.com/questions/38015307/generating-kotlin-method-class-comments", "title": "Generating Kotlin method/class comments", "body": "<p>How do you generate comments for your methods/classes? Simply typing:</p>\n\n<pre><code>/**\n</code></pre>\n\n<p>And pushing enter does not seem to work in IntelliJ IDEA 2016.1.3</p>\n\n<p>It seems like Dokka has superseded KDoc, but why is there no support in IntelliJ? Or am I missing something?</p>\n\n<p>Clarification: when typing in /** + enter, this gets generated:</p>\n\n<pre><code>/**\n *\n */\n</code></pre>\n\n<p>But I'm wondering why the generation of @param and others aren't added (like IntelliJ does for Java). These annotations are used for documenting Kotlin code as well (<a href=\"https://kotlinlang.org/docs/reference/kotlin-doc.html\" rel=\"noreferrer\">https://kotlinlang.org/docs/reference/kotlin-doc.html</a>) </p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1466759400, "post_id": 38008577, "comment_id": 63462191, "body": "your intend is kind of unclear without knowing F# :(  What are you trying to do in terms of data/values/operations?"}], "answers": [{"comments": [{"owner": {"reputation": 3462, "user_id": 2094298, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/26a93895eedcc45a0ebc3bb0da2cfbe6?s=128&d=identicon&r=PG", "display_name": "Ruckus T-Boom", "link": "https://stackoverflow.com/users/2094298/ruckus-t-boom"}, "edited": false, "score": 3, "creation_date": 1466783658, "post_id": 38008720, "comment_id": 63476843, "body": "To clarify, the &quot;it&quot; that is returned is the receiver, not the operation :)"}], "tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": false, "score": 8, "last_activity_date": 1466756329, "creation_date": 1466756329, "answer_id": 38008720, "question_id": 38008577, "link": "https://stackoverflow.com/questions/38008577/how-to-perform-multistep-initialization-of-val/38008720#38008720", "title": "How to perform multistep initialization of val", "body": "<p>You can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\"><code>apply</code></a> function from the standard library. It performs an operation on its receiver and then returns it:</p>\n\n<pre><code>val expression = addLike.apply { forwarded.second(this) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "edited": false, "score": 0, "creation_date": 1466863344, "post_id": 38015501, "comment_id": 63498743, "body": "Thanks for the different suggestions. In my case I prefer <code>run</code>."}], "tags": [], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "is_accepted": true, "score": 4, "last_activity_date": 1598932903, "last_edit_date": 1598932903, "creation_date": 1466777531, "answer_id": 38015501, "question_id": 38008577, "link": "https://stackoverflow.com/questions/38008577/how-to-perform-multistep-initialization-of-val/38015501#38015501", "title": "How to perform multistep initialization of val", "body": "<p>There are many ways to execute initialization code on an object before assigning it to any data field.</p>\n<p>You can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\"><code>run</code></a> function. with <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\" rel=\"nofollow noreferrer\"><code>run</code></a> you can write a lambda function where you can perform your initialization code then assign the returned value of the lambda as the value of the data field:</p>\n<pre><code>val expression = run()\n{\n    // initialization code here\n    forwarded.second(addLike)\n\n    // writing &quot;return@run&quot; is optional\n    return@run addLike\n}\n</code></pre>\n<p>you can also use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"nofollow noreferrer\"><code>apply</code></a> as mentioned in <a href=\"https://stackoverflow.com/a/38008720/2898715\">Alexander Udalov's answer</a>. you can instantiate the value you would like to assign the data field to and have the initialization code in the lambda passed into <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/apply.html\" rel=\"nofollow noreferrer\"><code>apply</code></a>:</p>\n<pre><code>val expression = addLike.apply()\n{\n    // initialization code here\n    forwarded.second(this) // &quot;this&quot; refers to addLike within this lambda\n}\n</code></pre>\n<p>you can use the <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html#lazy\" rel=\"nofollow noreferrer\">lazy delegate</a>. this is similar to run, except the lambda won't execute right away during construction to initialize the data field. instead, it will be executed the first time the data field is accessed:</p>\n<pre><code>val expression by lazy()\n{\n    // initialization code here\n    forwarded.second(addLike)\n\n    // writing &quot;return@run&quot; is optional\n    return@lazy addLike\n}\n</code></pre>\n<p>oh, and then there's also <code>init</code>. you can actually have multiple <code>init</code> blocks in one class, and they'll be executed in order that they appear in the file (top to bottom)</p>\n<pre><code>val addLike: SomeType\nval expression: AnotherType\n\ninit {\n    addLike = mulLike separatedBy addLikeSeparator\n    forwarded.second(addLike)\n    expression = addLike\n}\n\n</code></pre>\n"}], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 38015501, "answer_count": 2, "score": 3, "last_activity_date": 1598932903, "creation_date": 1466755666, "last_edit_date": 1466863313, "question_id": 38008577, "link": "https://stackoverflow.com/questions/38008577/how-to-perform-multistep-initialization-of-val", "title": "How to perform multistep initialization of val", "body": "<p>In order learn a bit of <code>kotlin</code> I am building a parser combinator library based loosely on the classic paper <a href=\"http://www.cs.nott.ac.uk/~pszgmh/monparsing.pdf\" rel=\"nofollow\">Monadic Parser Combinators\n</a>.</p>\n\n<p>In my case I need to forward declare a parser because of recursive syntax. When preparing the final expression parser I need to update the forward declaration</p>\n\n<p>My first attempt was this</p>\n\n<pre><code>val addLike             = mulLike separatedBy addLikeSeparator\nval expression          = \n  forwarded.second(addLike)\n  addLike\n</code></pre>\n\n<p>The idea is to perform a short initalization then return <code>addLike</code> to initialize the value. This is a very common pattern when I do some F# programming and I think it's a good pattern because it simplifies hiding initialization details.</p>\n\n<p>This doesn't work in <code>kotlin</code> however: </p>\n\n<pre><code>Error:(195, 5) Kotlin: Expecting a top level declaration\n</code></pre>\n\n<p>This approach also fails:</p>\n\n<pre><code>val addLike             = mulLike separatedBy addLikeSeparator\nval expression          = forwarded.second(addLike); addLike\n</code></pre>\n\n<p>The problem seem to be that <code>;</code> combines two <code>expressions</code> into a <code>statement</code>.</p>\n\n<p>So I tried <code>,</code> in the hope that it behaves somewhat like C/C++ but no luck:</p>\n\n<pre><code>val addLike             = mulLike separatedBy addLikeSeparator\nval expression          = forwarded.second(addLike), addLike\n</code></pre>\n\n<p>After reading the <code>kotlin</code> specification I found no clear solutions so that's why I turned to StackOverflow. Can this pattern be implemented in an idiomatic way in <code>kotlin</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>@Eric suggested the use if <code>run</code> and if I update my code with that the final solution ends up a bit like this:</p>\n\n<pre><code>val expression          = run () {\n                                forwarded.second(addLike)\n                                whitespaces keepRight addLike keepLeft expectEOS()\n                          }\n</code></pre>\n\n<p>That it is acceptable to me. Thanks @Eric.</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "edited": false, "score": 6, "creation_date": 1466692674, "post_id": 37994411, "comment_id": 63433105, "body": "Yep, and moreover, the coding conventions (<a href=\"https://kotlinlang.org/docs/reference/coding-conventions.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/coding-conventions.html</a>) prescribe explicitly specifying the argument names when dealing with nested lambdas."}], "tags": [], "owner": {"reputation": 175, "user_id": 2419193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3683adb83f1b539fc27d51d9c94ff36?s=128&d=identicon&r=PG", "display_name": "ismail", "link": "https://stackoverflow.com/users/2419193/ismail"}, "is_accepted": false, "score": 1, "last_activity_date": 1466691763, "creation_date": 1466691763, "answer_id": 37994411, "question_id": 37994347, "link": "https://stackoverflow.com/questions/37994347/qualified-it-in-kotlin/37994411#37994411", "title": "Qualified it in kotlin", "body": "<p>Ok, ignore me. The docs state at <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/lambdas.html#higher-order-functions</a> that if you have a <code>{ it.something }</code> block, then that is equivalent to <code>{ x -&gt; x.something }</code></p>\n"}, {"tags": [], "owner": {"reputation": 12623, "user_id": 5985853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/49VtI.jpg?s=128&g=1", "display_name": "Alexey Soshin", "link": "https://stackoverflow.com/users/5985853/alexey-soshin"}, "is_accepted": true, "score": 3, "last_activity_date": 1466754263, "last_edit_date": 1466754263, "creation_date": 1466695651, "answer_id": 37995889, "question_id": 37994347, "link": "https://stackoverflow.com/questions/37994347/qualified-it-in-kotlin/37995889#37995889", "title": "Qualified it in kotlin", "body": "<p>You already figured it out, but for others that may have the same question, you can do it like this:</p>\n\n<pre><code>foo.forEach { x -&gt;\n    x.forEach { y -&gt;\n        doSomething(x) + doSomething(y) \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 2419193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3683adb83f1b539fc27d51d9c94ff36?s=128&d=identicon&r=PG", "display_name": "ismail", "link": "https://stackoverflow.com/users/2419193/ismail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 37995889, "answer_count": 2, "score": 3, "last_activity_date": 1466754263, "creation_date": 1466691604, "question_id": 37994347, "link": "https://stackoverflow.com/questions/37994347/qualified-it-in-kotlin", "title": "Qualified it in kotlin", "body": "<p>As the docs say at <a href=\"https://kotlinlang.org/docs/reference/this-expressions.html#qualified\" rel=\"nofollow\">https://kotlinlang.org/docs/reference/this-expressions.html#qualified</a>, one can use qualified <code>this</code> to specify an outer context to use. Is there any way of doing this with <code>it</code>? IntelliJ keeps saying that there is a sytax error.</p>\n"}]