[{"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 7779, "user_id": 3120489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/evP8V.png?s=128&g=1", "display_name": "dabadaba", "link": "https://stackoverflow.com/users/3120489/dabadaba"}, "edited": false, "score": 0, "creation_date": 1470242753, "post_id": 38749204, "comment_id": 64872503, "body": "I fail to see why in my case it reports an error while in the official tutorial it&#39;s alright. How do I pass an index to the substring method then?"}, {"owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "reply_to_user": {"reputation": 7779, "user_id": 3120489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/evP8V.png?s=128&g=1", "display_name": "dabadaba", "link": "https://stackoverflow.com/users/3120489/dabadaba"}, "edited": false, "score": 0, "creation_date": 1470244215, "post_id": 38749204, "comment_id": 64873430, "body": "@dabadaba, now I see, the code you posted contains a mistake. <code>sequenceOf</code> with single argument passed returns a sequence with that one item. To get a sequence of indices, try <code>(canonicalisedInput.lastIndex + 1 downTo 0).asSequence()</code> instead."}, {"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "reply_to_user": {"reputation": 7779, "user_id": 3120489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/evP8V.png?s=128&g=1", "display_name": "dabadaba", "link": "https://stackoverflow.com/users/3120489/dabadaba"}, "edited": false, "score": 0, "creation_date": 1474397824, "post_id": 38749204, "comment_id": 66511895, "body": "@dabadaba that tutorial was filmed before the release of Kotlin. <code>sequenceOf(IntProgression)</code> function was deprecated and removed before release."}], "tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 4, "last_activity_date": 1470258849, "last_edit_date": 1470258849, "creation_date": 1470242167, "answer_id": 38749204, "question_id": 38748773, "link": "https://stackoverflow.com/questions/38748773/expected-int-got-intprogression-instead/38749204#38749204", "title": "Expected Int, got IntProgression instead", "body": "<p>The code you posted contains a mistake: <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.sequences/sequence-of.html\" rel=\"nofollow\"><code>sequenceOf(...)</code></a> with single argument passed returns a sequence with that one item, that is, <code>Sequence&lt;IntProgression&gt;</code> . To get a sequence of indices (<code>Sequence&lt;Int&gt;</code>), use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-sequence.html\" rel=\"nofollow\"><code>asSequence()</code></a> function instead: </p>\n\n<pre><code> (canonicalisedInput.lastIndex + 1 downTo 0).asSequence().map { ... }\n</code></pre>\n\n<hr>\n\n<p>The <code>substring(...)</code> function called second is <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/substring.html\" rel=\"nofollow\">the overload that returns the substring starting from the index passed as the argument</a>.</p>\n\n<p>And <code>it</code> is the <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax\" rel=\"nofollow\">implicit name for the innermost lambda single parameter</a>, in your case it is the parameter of <code>map</code>, that is, the sequence item to be mapped by the lambda.</p>\n\n<p>So, the expression inside lambda is a pair (created by <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to.html\" rel=\"nofollow\"><code>to</code> infix function</a>) of two substring, one from the beginning of the original string to the index in the sequence, the other one -- from that index to the end of the string.</p>\n\n<p>So the code should definitely work with indices sequence, that's why the mistake is quite clear.</p>\n"}, {"tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1470244224, "creation_date": 1470244224, "answer_id": 38749820, "question_id": 38748773, "link": "https://stackoverflow.com/questions/38748773/expected-int-got-intprogression-instead/38749820#38749820", "title": "Expected Int, got IntProgression instead", "body": "<p><code>sequenceOf(canonicalisedInput.lastIndex + 1 downTo 0)</code> \u2014\nthis expression creates a sequence which consists of a single <code>IntProgression</code> item. </p>\n\n<p>If you want to convert an <code>IntProgression</code> to a <code>Sequence&lt;Int&gt;</code>, use <code>asSequence</code> extension function:</p>\n\n<pre><code>(canonicalisedInput.length downTo 0).asSequence()\n</code></pre>\n"}], "owner": {"reputation": 7779, "user_id": 3120489, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/evP8V.png?s=128&g=1", "display_name": "dabadaba", "link": "https://stackoverflow.com/users/3120489/dabadaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 38749204, "answer_count": 2, "score": 3, "last_activity_date": 1470258849, "creation_date": 1470240772, "last_edit_date": 1470252440, "question_id": 38748773, "link": "https://stackoverflow.com/questions/38748773/expected-int-got-intprogression-instead", "title": "Expected Int, got IntProgression instead", "body": "<p>I am trying to get on Kotlin so I am following <a href=\"https://www.youtube.com/watch?v=AhA-Q7MOre0\" rel=\"nofollow\">this tutorial</a> of their own.</p>\n\n<p>So they're trying to create a sequence given a string, such as this:</p>\n\n<pre><code>\"a vect\" -&gt; [\n     a vect  :\n     a vec   :   t\n     a ve    :   ct\n     ...\n] \n</code></pre>\n\n<p>And the way to do it is, according to the video, the following:</p>\n\n<pre><code>val seq = sequenceOf(canonicalisedInput.lastIndex + 1 downTo 0).map {\n    canonicalisedInput.substring(0, it) to canonicalisedInput.substring(it)\n}\n</code></pre>\n\n<p>And I get what I does (well, the idea of it). The problem is that <code>substring</code> expects two <code>Int</code>s, while <code>it</code> (which I assume is an implicit iterator of some sorts that comes from the <code>downTo</code> progression) is an <code>IntProgression</code>. Same for the second <code>substring</code> call.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["android", "kotlin", "retrofit2"], "comments": [{"owner": {"reputation": 774, "user_id": 652017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786680f046f3f048513ffcd8d4efda7?s=128&d=identicon&r=PG", "display_name": "ngu", "link": "https://stackoverflow.com/users/652017/ngu"}, "edited": false, "score": 0, "creation_date": 1470222087, "post_id": 38728275, "comment_id": 64857207, "body": "I&#39;m facing similar problems right now. How many bytes is your http response?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "reply_to_user": {"reputation": 774, "user_id": 652017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786680f046f3f048513ffcd8d4efda7?s=128&d=identicon&r=PG", "display_name": "ngu", "link": "https://stackoverflow.com/users/652017/ngu"}, "edited": false, "score": 0, "creation_date": 1470226917, "post_id": 38728275, "comment_id": 64860649, "body": "200 OK (303ms), END HTTP (49063-byte body)"}], "answers": [{"comments": [{"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1470243012, "post_id": 38747664, "comment_id": 64872666, "body": "ya i have realised it might be something like that, but i think im getting the same results and i don&#39;t know if it is the server that is slow, has i have no way of benchmarking the default json deserialisation. Any idea how to measure it?"}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1470243344, "post_id": 38747664, "comment_id": 64872873, "body": "for some reason, son isn&#39;t using my type adapter. weird."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 1, "creation_date": 1470245537, "post_id": 38747664, "comment_id": 64874183, "body": "It seems that Generic Lists with a custom TypeAdapter for its objects won&#39;t get recognised and so the default deserialiser is used. any workaround?"}, {"owner": {"reputation": 774, "user_id": 652017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786680f046f3f048513ffcd8d4efda7?s=128&d=identicon&r=PG", "display_name": "ngu", "link": "https://stackoverflow.com/users/652017/ngu"}, "reply_to_user": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1470258996, "post_id": 38747664, "comment_id": 64881347, "body": "I cant&#39;t confirm this. I&#39;m using it for generic lists too. The only difference i see is that my retrofit api methods don&#39;t wrap the result in a <code>Response</code> object, i.e. <code>Observable&lt;List&lt;Character&gt;&gt;</code> instead of <code>Observable&lt;Response&lt;List&lt;Character&gt;&gt;&gt;</code>. I don&#39;t know if this makes a difference for deserialization though."}, {"owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "edited": false, "score": 0, "creation_date": 1470314675, "post_id": 38747664, "comment_id": 64906489, "body": "im almost sure it does :p but could find a solution yet"}], "tags": [], "owner": {"reputation": 774, "user_id": 652017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e786680f046f3f048513ffcd8d4efda7?s=128&d=identicon&r=PG", "display_name": "ngu", "link": "https://stackoverflow.com/users/652017/ngu"}, "is_accepted": true, "score": 2, "last_activity_date": 1470237670, "creation_date": 1470237670, "answer_id": 38747664, "question_id": 38728275, "link": "https://stackoverflow.com/questions/38728275/android-kotlin-gson-slow-json-deserialization/38747664#38747664", "title": "Android Kotlin Gson Slow Json Deserialization", "body": "<p>For me implementing a custom <code>TypeAdapter</code> was a huge performance boost. I use type adapters for every class which needs to be deserialized in huge amounts. In your example that would be (in Java):</p>\n\n<pre><code>public class CharacterTypeAdapter extends TypeAdapter&lt;Character&gt; {\n    @Override\n    public void write(final JsonWriter out, final Character character) throws IOException {\n        out.beginObject();\n        out.name(\"id\").value(character.getId());\n        out.name(\"level\").value(character.getLevel());\n        out.name(\"unit\").value(character.getUnit());\n        out.endObject();\n    }\n\n    @Override\n    public Character read(final JsonReader in) throws IOException {\n        Character character = new Character();\n        in.beginObject();\n        while(in.hasNext()){\n            switch(in.nextName()){\n                case \"id\":\n                   character.setId(in.nextInt());\n                   break; \n                case \"level\":\n                   character.setId(in.nextString());\n                   break;\n                case \"unit\":\n                   character.setId(in.nextString());\n                   break;\n            }\n        }\n        in.endObject();\n\n        return character;\n    }\n}\n</code></pre>\n\n<p>The <code>TypeAdapter</code> must be registered in your Gson configuration as follows:</p>\n\n<pre><code>GsonBuilder gsonBuilder = new GsonBuilder();\ngsonBuilder.registerTypeAdapter(Character.class, new CharacterTypeAdapter());\nGson gson = gsonBuilder.create();\n</code></pre>\n\n<p>The gson instance must be registered with Retrofit:</p>\n\n<pre><code> new Retrofit\n     .Builder()\n     .addConverterFactory(GsonConverterFactory.create(gson))\n     .build()\n     .createApi(Api.class);\n</code></pre>\n\n<p>You get blazing fast deserialization.</p>\n"}], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 2, "accepted_answer_id": 38747664, "answer_count": 1, "score": 3, "last_activity_date": 1470237670, "creation_date": 1470163723, "question_id": 38728275, "link": "https://stackoverflow.com/questions/38728275/android-kotlin-gson-slow-json-deserialization", "title": "Android Kotlin Gson Slow Json Deserialization", "body": "<p>I have a large json which i have to deserialize, and i'm only interested of certain parts of if. The Pojos i am using are something like this:</p>\n\n<pre><code>data class Response&lt;T&gt;(\n        val header: JHeader,\n        val result: T\n)\n\ndata class JHeader(\n        val success: Int,\n        val error: List&lt;String&gt;\n)\n\nclass Character{\n    @SerializedName(\"id_\") val id: Int\n    @SerializedName(\"levelA\") val level: String\n    @SerializedName(\"a3\") val unit: String = \"\"\n\n    constructor(id: Int, level: String) {\n        this.id = id\n        this.level= level\n    }\n}\n</code></pre>\n\n<p>Relevant part of the retrofit adapter:</p>\n\n<pre><code>val retrofit = Retrofit.Builder()\n                .addCallAdapterFactory(rxAdapter)\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(BASE_URL)\n                .client(httpClient.build())\n                .build()\n</code></pre>\n\n<p>And the Impl:</p>\n\n<pre><code>fun getCharacterById(characterID: Int):Observable&lt;Response&lt;List&lt;Character&gt;&gt;&gt; {\n        return apiService.getCharacter(characterID)\n                .subscribeOn(Schedulers.io())\n    } \n</code></pre>\n\n<p>I'm getting retrofit debug reports of 300ms for a simple call to this service.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li><p>When should i consider using a TypeAdapter (i opt for performance over boilerplate, i dont mind writing a few extra lines of code with type adapters). But I don't quite understand what type adapters are for, in what scenarios should i use them.</p></li>\n<li><p>My Json structure has a lot more attributes than my Character Pojo, i simply realised that using transient / @Expose or keeping it out of the Pojo lead to the same results. Is there any difference between those 3?</p></li>\n<li><p>As i'm using Kotlin, is there any library/extension that help me deal with this TypeAdapter deserialization stuff?</p></li>\n</ul>\n"}, {"tags": ["mockito", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1470169153, "post_id": 38722935, "comment_id": 64835686, "body": "I already have this library included in my project, could you provide an example how to use the ArgumentCaptor to invoke a function that was passed to a mock?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1470172566, "post_id": 38722935, "comment_id": 64837449, "body": "Updated with an example."}, {"owner": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "edited": false, "score": 30, "creation_date": 1485810425, "post_id": 38722935, "comment_id": 71071036, "body": "I am getting captor.capture() must not be null :("}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "edited": false, "score": 0, "creation_date": 1485810566, "post_id": 38722935, "comment_id": 71071098, "body": "@JesusAlmaral You can create a new question on this site with appropriate labels, code samples, etc. to get help showing what you&#39;ve tried and what error messages you are getting, etc."}, {"owner": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "edited": false, "score": 0, "creation_date": 1485811615, "post_id": 38722935, "comment_id": 71071581, "body": "Thanks @mfulton26, I just posted a question with what I tried here <a href=\"http://stackoverflow.com/questions/41945675/mocktito-argumentcaptor-for-kotlin-lambda-with-arguments\" title=\"mocktito argumentcaptor for kotlin lambda with arguments\">stackoverflow.com/questions/41945675/&hellip;</a>"}, {"owner": {"reputation": 1896, "user_id": 4506528, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4eKvX.png?s=128&g=1", "display_name": "Hay", "link": "https://stackoverflow.com/users/4506528/hay"}, "edited": false, "score": 5, "creation_date": 1520030614, "post_id": 38722935, "comment_id": 85163012, "body": "The wiki from mockito-kotlin has some interesting syntax for using captors: <a href=\"https://github.com/nhaarman/mockito-kotlin/wiki/Mocking-and-verifying#argument-captors\" rel=\"nofollow noreferrer\">github.com/nhaarman/mockito-kotlin/wiki/&hellip;</a>"}, {"owner": {"reputation": 987, "user_id": 3779042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xG0Cz.jpg?s=128&g=1", "display_name": "jknair", "link": "https://stackoverflow.com/users/3779042/jknair"}, "reply_to_user": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "edited": false, "score": 0, "creation_date": 1547028259, "post_id": 38722935, "comment_id": 95047202, "body": "@JesusAlmaral you must be using the mockito-kotlin doesnt give that error. You are getting the error because the captor.capture() returns null. Copy code from library source. Or else you have to handle non-null types in kotlin,"}, {"owner": {"reputation": 2961, "user_id": 727116, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bc63ed8859db2097de803c169148a423?s=128&d=identicon&r=PG", "display_name": "Yaniv", "link": "https://stackoverflow.com/users/727116/yaniv"}, "reply_to_user": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1574586720, "post_id": 38722935, "comment_id": 104279008, "body": "@asco, After you get the reference by val &#39;func = allValues[0]&#39;, you should write &#39;func()&#39; and the function will be invoked"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 72, "last_activity_date": 1470227418, "last_edit_date": 1470227418, "creation_date": 1470147320, "answer_id": 38722935, "question_id": 38715702, "link": "https://stackoverflow.com/questions/38715702/mockito-argumentcaptor-for-kotlin-function/38722935#38722935", "title": "Mockito ArgumentCaptor for Kotlin function", "body": "<p>I recommend <a href=\"https://github.com/nhaarman/mockito-kotlin\" rel=\"noreferrer\">nhaarman/mockito-kotlin: Using Mockito with Kotlin</a></p>\n\n<p>It solves this through an <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html\" rel=\"noreferrer\">inline function</a> with a <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">reified type parameter</a>:</p>\n\n<pre><code>inline fun &lt;reified T : Any&gt; argumentCaptor() = ArgumentCaptor.forClass(T::class.java)\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/nhaarman/mockito-kotlin/blob/a6f860461233ba92c7730dd42b0faf9ba2ce9281/mockito-kotlin/src/main/kotlin/com/nhaarman/mockito_kotlin/ArgumentCaptor.kt#L30\" rel=\"noreferrer\">mockito-kotlin/ArgumentCaptor.kt at a6f860461233ba92c7730dd42b0faf9ba2ce9281 \u00b7 nhaarman/mockito-kotlin</a></p>\n\n<p>e.g.:</p>\n\n<pre><code>val captor = argumentCaptor&lt;() -&gt; Unit&gt;()\nverify(someClass).doSomeThing(captor.capture())\n</code></pre>\n\n<p>or</p>\n\n<pre><code>val captor: () -&gt; Unit = argumentCaptor()\nverify(someClass).doSomeThing(captor.capture())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8866, "user_id": 9164141, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/uiNcT.jpg?s=128&g=1", "display_name": "Gast&#243;n Saill&#233;n", "link": "https://stackoverflow.com/users/9164141/gast%c3%b3n-saill%c3%a9n"}, "edited": false, "score": 11, "creation_date": 1556661300, "post_id": 55247217, "comment_id": 98511892, "body": "This returns <code>java.lang.IllegalStateException: callbackCaptor.capture() must not be null</code>"}, {"owner": {"reputation": 1943, "user_id": 1154390, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/432e442a9f1a89f13b008e8feb2100cb?s=128&d=identicon&r=PG", "display_name": "user1154390", "link": "https://stackoverflow.com/users/1154390/user1154390"}, "edited": false, "score": 0, "creation_date": 1614783143, "post_id": 55247217, "comment_id": 117490730, "body": "To deal with must not be null issue                                                                       object MockitoHelper {   fun &lt;T&gt; capture(argumentCaptor: ArgumentCaptor&lt;T&gt;): T = argumentCaptor.capture() }                                                                                                                                    for complete ref check this link  <a href=\"http://derekwilson.net/blog/2018/10/19/mockito-kotlin-2\" rel=\"nofollow noreferrer\">derekwilson.net/blog/2018/10/19/mockito-kotlin-2</a>"}], "tags": [], "owner": {"reputation": 2261, "user_id": 2238996, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/Q5hmD.jpg?s=128&g=1", "display_name": "Nari Kim Shin", "link": "https://stackoverflow.com/users/2238996/nari-kim-shin"}, "is_accepted": false, "score": 5, "last_activity_date": 1594311798, "last_edit_date": 1594311798, "creation_date": 1553018066, "answer_id": 55247217, "question_id": 38715702, "link": "https://stackoverflow.com/questions/38715702/mockito-argumentcaptor-for-kotlin-function/55247217#55247217", "title": "Mockito ArgumentCaptor for Kotlin function", "body": "<p>I tried what @mfulton26 suggested, but was getting an error message saying <code>captor.capture() must not be null</code>. and this was what worked for me.</p>\n<p>Declared a member variable <code>captor</code> with <code>@Captor</code> annotation,</p>\n<pre><code>@Captor private lateinit var captor: ArgumentCaptor&lt;Callback&gt;\n</code></pre>\n<p>and in my @Test,</p>\n<pre><code>verify(someClass).doSomething(capture(captor))\n</code></pre>\n"}], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29354, "favorite_count": 8, "accepted_answer_id": 38722935, "answer_count": 2, "score": 44, "last_activity_date": 1594311798, "creation_date": 1470127459, "last_edit_date": 1494642617, "question_id": 38715702, "link": "https://stackoverflow.com/questions/38715702/mockito-argumentcaptor-for-kotlin-function", "title": "Mockito ArgumentCaptor for Kotlin function", "body": "<p>Consider a function that takes an interface implementation as an argument like this: </p>\n\n<pre><code>interface Callback {\n    fun done()\n}\n\nclass SomeClass {        \n\n    fun doSomeThing(callback: Callback) {\n\n        // do something\n\n        callback.done()\n\n    }    \n}\n</code></pre>\n\n<p>When I want to test the caller of this function, I can do something like</p>\n\n<pre><code>val captor = ArgumentCaptor.forClass(Callback::class)\nMockito.verify(someClass).doSomeThing(captor.capture())\n</code></pre>\n\n<p>To test what the other class does when the callback is invoked, I can then do </p>\n\n<pre><code>captor.value.done()\n</code></pre>\n\n<p><strong>Question:</strong> How can I do the same if I replace the callback interface with a high order function like </p>\n\n<pre><code>fun doSomeThing(done: () -&gt; Unit) {\n\n    // do something\n\n    done.invoke()\n\n}\n</code></pre>\n\n<p>Can this be done with ArgumentCaptor and what class do I have to use in <code>ArgumentCaptor.forClass(???)</code></p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 35078, "user_id": 615306, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5a11940d70233031c01ead6c0b62c990?s=128&d=identicon&r=PG", "display_name": "Kirill Rakhman", "link": "https://stackoverflow.com/users/615306/kirill-rakhman"}, "is_accepted": false, "score": 0, "last_activity_date": 1470130356, "creation_date": 1470130356, "answer_id": 38716736, "question_id": 38714935, "link": "https://stackoverflow.com/questions/38714935/two-functions-with-different-number-of-type-parameters-in-kotlin/38716736#38716736", "title": "Two functions with different number of type parameters in Kotlin", "body": "<p>Add the annotation <code>@JvmName(\"foo2\")</code> to one of the functions. </p>\n"}, {"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 5, "last_activity_date": 1470144705, "creation_date": 1470144705, "answer_id": 38721917, "question_id": 38714935, "link": "https://stackoverflow.com/questions/38714935/two-functions-with-different-number-of-type-parameters-in-kotlin/38721917#38721917", "title": "Two functions with different number of type parameters in Kotlin", "body": "<p>These functions have identical signatures from the compiler point of view. A type parameter is not part of a signature of a function; it can be inferred by the compiler automatically, and therefore does not serve to disambiguate calls to different overloads.</p>\n\n<p>You need to assign different names to those functions.</p>\n"}], "owner": {"reputation": 119, "user_id": 2753903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/558c6d47dac857f6ca16b9dbf4675ae3?s=128&d=identicon&r=PG&f=1", "display_name": "abond", "link": "https://stackoverflow.com/users/2753903/abond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 38721917, "answer_count": 2, "score": 2, "last_activity_date": 1470387984, "creation_date": 1470124993, "last_edit_date": 1470387984, "question_id": 38714935, "link": "https://stackoverflow.com/questions/38714935/two-functions-with-different-number-of-type-parameters-in-kotlin", "title": "Two functions with different number of type parameters in Kotlin", "body": "<p>This two functions conflicts with each other. \nIs there a workaround for this issue?</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; foo() = ...\ninline fun &lt;reified T: Any, reified I: Any&gt; foo() = ...\n</code></pre>\n\n<p>Thanks!</p>\n\n<p>Edit:</p>\n\n<p>I found convenient(at least for me) solution for this issue:</p>\n\n<pre><code>inline fun &lt;reified T: Any&gt; foo() = foo&lt;T, MyDefaultType&gt;()\ninline fun &lt;reified T: Any, reified I: Any&gt; foo(type1: KClass&lt;T&gt; = T::class, type2: KClass&lt;I&gt; = I::class) = ...\n</code></pre>\n\n<p>It can be even concise if you choose to add only one parameter.</p>\n\n<p>Later you can use it like this:</p>\n\n<pre><code>val x = foo&lt;A, B&gt;()\nval y = foo&lt;C&gt;()\n</code></pre>\n\n<p>That's what I need.</p>\n"}, {"tags": ["unit-testing", "mockito", "kotlin", "powermock"], "comments": [{"owner": {"reputation": 906, "user_id": 1538399, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39bec8c9c8ed2f7911f02cd31a357308?s=128&d=identicon&r=PG", "display_name": "Srikanth Pai", "link": "https://stackoverflow.com/users/1538399/srikanth-pai"}, "edited": false, "score": 0, "creation_date": 1473898148, "post_id": 38692284, "comment_id": 66320176, "body": "Hey Boon.. Do u have complete example to do this? I&#39;m trying to write Junit tests for my Kotlin fuel calls"}, {"owner": {"reputation": 869, "user_id": 535761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c77b1c62b2a5f3db01e050e59fd5280?s=128&d=identicon&r=PG", "display_name": "Boon", "link": "https://stackoverflow.com/users/535761/boon"}, "reply_to_user": {"reputation": 906, "user_id": 1538399, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39bec8c9c8ed2f7911f02cd31a357308?s=128&d=identicon&r=PG", "display_name": "Srikanth Pai", "link": "https://stackoverflow.com/users/1538399/srikanth-pai"}, "edited": false, "score": 0, "creation_date": 1473993698, "post_id": 38692284, "comment_id": 66361501, "body": "I followed @miensol&#39;s suggestion and used Fuel.testMode() and the executeRequest override."}, {"owner": {"reputation": 906, "user_id": 1538399, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/39bec8c9c8ed2f7911f02cd31a357308?s=128&d=identicon&r=PG", "display_name": "Srikanth Pai", "link": "https://stackoverflow.com/users/1538399/srikanth-pai"}, "edited": false, "score": 0, "creation_date": 1474003354, "post_id": 38692284, "comment_id": 66363724, "body": "it will be of great help if u can post the code snippet or send a github link ?"}], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 1084126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/erfbb.jpg?s=128&g=1", "display_name": "Yajairo87", "link": "https://stackoverflow.com/users/1084126/yajairo87"}, "edited": false, "score": 1, "creation_date": 1507047777, "post_id": 38693088, "comment_id": 80052587, "body": "How could I do the same fake client injection with Java? I think the Fuel documentation is not clear enough for this cases."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 8, "last_activity_date": 1470080339, "last_edit_date": 1470080339, "creation_date": 1470036149, "answer_id": 38693088, "question_id": 38692284, "link": "https://stackoverflow.com/questions/38692284/how-to-test-code-that-calls-top-level-functions-in-kotlin/38693088#38693088", "title": "How to test code that calls top level functions in Kotlin?", "body": "<p>I encourage you to encapsulate remote API calls behind an interface that would be injected through constructor to the class using it:</p>\n\n<pre><code>class ResponseDto\ninterface SomeRest {\n    fun action(data:Map&lt;String,Any?&gt;): ((ResponseDto)-&gt;Unit)-&gt;Unit\n}\nclass FuelTests(val someRest: SomeRest) {\n    fun callHttp(){\n        someRest.action(mapOf(\"question\" to \"answer\")).invoke { it:ResponseDto -&gt;\n            // do something with response \n        }\n    }\n}\n</code></pre>\n\n<p>Another way is to to inject a fake <code>Client</code> to be used by <code>Fuel</code>:</p>\n\n<pre><code>FuelManager.instance.client = object: Client {\n    override fun executeRequest(request: Request): Response {\n        return Response().apply {\n            url = request.url\n            httpStatusCode = 201\n        }\n    }\n}\n\nFuel.testMode()\n\n\"http://somedomain.com/some-rest/action\".httpGet(listOf()).responseString { request, response, result -&gt;\n    print(response.httpStatusCode) // prints 201\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "is_accepted": false, "score": 5, "last_activity_date": 1470039935, "creation_date": 1470039935, "answer_id": 38694131, "question_id": 38692284, "link": "https://stackoverflow.com/questions/38692284/how-to-test-code-that-calls-top-level-functions-in-kotlin/38694131#38694131", "title": "How to test code that calls top level functions in Kotlin?", "body": "<p>It seems that \"top level functions\" can be seen as static methods in disguise.</p>\n\n<p>And from that point of view, the better answer is: do not use them in such a way. This leads to high, direct coupling; and makes your code harder to test. You definitely want to create some interface <em>Service</em> which all your objects should be using; and then use use dependency injection to equip your client code with some object that implements the <em>Service</em> interface. </p>\n\n<p>By doing so, you also get rid of the requirement to Powermock completely. </p>\n"}], "owner": {"reputation": 869, "user_id": 535761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c77b1c62b2a5f3db01e050e59fd5280?s=128&d=identicon&r=PG", "display_name": "Boon", "link": "https://stackoverflow.com/users/535761/boon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2131, "favorite_count": 0, "accepted_answer_id": 38693088, "answer_count": 2, "score": 9, "last_activity_date": 1470080339, "creation_date": 1470033074, "question_id": 38692284, "link": "https://stackoverflow.com/questions/38692284/how-to-test-code-that-calls-top-level-functions-in-kotlin", "title": "How to test code that calls top level functions in Kotlin?", "body": "<p>I am very new to Kotlin.</p>\n\n<p>I have a class that calls a top level function (which makes a http call). I am trying to write unit tests for my class without having it go out to the network.</p>\n\n<p>Is there a way to mock/powermock/intercept the call from my class to the Kotlin top level function?</p>\n\n<pre><code>class MyClass {\n    fun someMethod() {\n        // do some stuff\n        \"http://somedomain.com/some-rest/action\".httpGet(asList(\"someKey\" to \"someValue\")).responseString { (request, response, result) -&gt;\n            // some processing code\n        }\n    }\n}\n</code></pre>\n\n<p>It is using the <a href=\"https://github.com/kittinunf/Fuel\" rel=\"noreferrer\" title=\"kittinunf/Fuel\">kittinunf/Fuel library</a> for the httpGet call.</p>\n\n<p>It adds a top level function to String that ultimately calls a companion object function in Fuel (Fuel.get()).</p>\n\n<p>The unit test needs to intercept the call to httpGet so that I can return a json string for the test.</p>\n"}, {"tags": ["android", "kotlin", "kotlin-android-extensions"], "comments": [{"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1470033054, "post_id": 38691131, "comment_id": 64763377, "body": "Does this always happen or only on every second build (or, in another variation, only on the first clean build)?"}, {"owner": {"reputation": 8337, "user_id": 119622, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/40f3ab7bd9c6b59a7ae580f2667af7a1?s=128&d=identicon&r=PG", "display_name": "letronje", "link": "https://stackoverflow.com/users/119622/letronje"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1470046415, "post_id": 38691131, "comment_id": 64770806, "body": "Usually never happens on the first run that follows a clean build. crashes  on the 2nd run when I make some changes and run again. 3rd run works. if i make a change again, it crashes on the immediately next run. then works on the run after that ..... and so on."}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 3, "creation_date": 1470084155, "post_id": 38691131, "comment_id": 64793095, "body": "This sounds a lot like <a href=\"https://youtrack.jetbrains.com/issue/KT-10733\" rel=\"nofollow noreferrer\">this bug</a>. I&#39;ve had another variant of this bug when a Kotlin class wasn&#39;t found (=deleted) on the first clean compilation but appeared on the second incremental build. It&#39;s been discussed on the google tracker too, and the outcome was that we have to wait for the android gradle plugin 2.3 to be released. This issue prevented me from introducing Kotlin in my team and, unfortunately, I don&#39;t have any recommendations to share with you."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 0, "creation_date": 1500385218, "post_id": 38691131, "comment_id": 77304889, "body": "Just curious - why did you make <b>javaMaxHeapSize &quot;10g&quot;</b>?"}, {"owner": {"reputation": 326, "user_id": 1517604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4fce79d0f4a29fd52a22ede7dabb8d?s=128&d=identicon&r=PG", "display_name": "manuel", "link": "https://stackoverflow.com/users/1517604/manuel"}, "edited": false, "score": 0, "creation_date": 1536829013, "post_id": 38691131, "comment_id": 91567160, "body": "I have the same issue but only happens in certain devices. I build and .apk, and after installing it runs perfectly in some devices but crashes in a few ones (all version 7.x), throwing the exception NoClassDefFoundError for the Kotlin activity."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6445816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba1925ab8e2e0c99be6c179247413ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Shayne Fitzgerald", "link": "https://stackoverflow.com/users/6445816/shayne-fitzgerald"}, "is_accepted": false, "score": 1, "last_activity_date": 1470076370, "creation_date": 1470076370, "answer_id": 38705751, "question_id": 38691131, "link": "https://stackoverflow.com/questions/38691131/android-kotlin-java-lang-noclassdeffounderror-failed-resolution-of-kotlinob/38705751#38705751", "title": "Android Kotlin : java.lang.NoClassDefFoundError: Failed resolution of: &lt;KotlinObject&gt;", "body": "<p><code>java.lang.ClassNotFoundException</code> is a <em>fun</em> exception to debug. Notably because it can occur from any number of reasons. In this case, due to the every other launch behavior, it's most likely occurring due to being unable to initialize the class. If you have resources that you load statically that are singleton in nature, open files, or any \"exclusive\" resources on class creation in the JVM, when it goes to initialize it the second time, as the class is <em>already loaded into the JVM</em>, regardless of whether or not you've restarted the application. When the second instance of loading the class occurs, it clashes with the existing one and <em>both instances</em> are removed from the JVM, making the third execution run just fine. </p>\n\n<p><strong>tl;dr</strong> I'd have to see your code to be positive, but it's most likely (especially with <code>@JvmStatic</code> annotations), that you're failing on the second static loading of the class. When it fails, all instances are removed from the JVM and the process repeats.</p>\n"}, {"comments": [{"owner": {"reputation": 8337, "user_id": 119622, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/40f3ab7bd9c6b59a7ae580f2667af7a1?s=128&d=identicon&r=PG", "display_name": "letronje", "link": "https://stackoverflow.com/users/119622/letronje"}, "edited": false, "score": 5, "creation_date": 1471597363, "post_id": 38993032, "comment_id": 65419881, "body": "Doesn&#39;t seem to work for me. I unchecked all the checkboxes and I still get those errors."}, {"owner": {"reputation": 22949, "user_id": 6998684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqR2Z.jpg?s=128&g=1", "display_name": "IgorGanapolsky", "link": "https://stackoverflow.com/users/6998684/igorganapolsky"}, "edited": false, "score": 1, "creation_date": 1500385179, "post_id": 38993032, "comment_id": 77304866, "body": "This error can occur even when running from command line.  Not necessarily associated with Instant Run..."}], "tags": [], "owner": {"reputation": 908, "user_id": 2309994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66bfd177396b1520e970857382295477?s=128&d=identicon&r=PG", "display_name": "BurtK", "link": "https://stackoverflow.com/users/2309994/burtk"}, "is_accepted": false, "score": 3, "last_activity_date": 1471426747, "creation_date": 1471426747, "answer_id": 38993032, "question_id": 38691131, "link": "https://stackoverflow.com/questions/38691131/android-kotlin-java-lang-noclassdeffounderror-failed-resolution-of-kotlinob/38993032#38993032", "title": "Android Kotlin : java.lang.NoClassDefFoundError: Failed resolution of: &lt;KotlinObject&gt;", "body": "<p>You should turn off 'Instant Run'. Android Studio -> Preferences -> Build, Execution, Deployment -> Instant Run. Turn off everything.</p>\n"}, {"tags": [], "owner": {"reputation": 6153, "user_id": 2093236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0432dbe4968bf13717f7f47f3b8847c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dmide", "link": "https://stackoverflow.com/users/2093236/dmide"}, "is_accepted": false, "score": 1, "last_activity_date": 1496586899, "creation_date": 1496586899, "answer_id": 44355218, "question_id": 38691131, "link": "https://stackoverflow.com/questions/38691131/android-kotlin-java-lang-noclassdeffounderror-failed-resolution-of-kotlinob/44355218#44355218", "title": "Android Kotlin : java.lang.NoClassDefFoundError: Failed resolution of: &lt;KotlinObject&gt;", "body": "<p>The only workaround I've found is to set <code>android.compileOptions.incremental = false</code></p>\n\n<p>See <a href=\"https://youtrack.jetbrains.com/issue/KT-10733\" rel=\"nofollow noreferrer\">this issue</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 497, "user_id": 4469965, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-734rjjqqu8Y/AAAAAAAAAAI/AAAAAAAAAEY/A15tn9fQfic/photo.jpg?sz=128", "display_name": "Giedrius \u0160likas", "link": "https://stackoverflow.com/users/4469965/giedrius-%c5%a0likas"}, "is_accepted": false, "score": 0, "last_activity_date": 1527576532, "creation_date": 1527576532, "answer_id": 50577971, "question_id": 38691131, "link": "https://stackoverflow.com/questions/38691131/android-kotlin-java-lang-noclassdeffounderror-failed-resolution-of-kotlinob/50577971#50577971", "title": "Android Kotlin : java.lang.NoClassDefFoundError: Failed resolution of: &lt;KotlinObject&gt;", "body": "<p>Try clean build. There may be some changes cached from another branch.\nSolved the problem when I was facing the same error</p>\n"}], "owner": {"reputation": 8337, "user_id": 119622, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/40f3ab7bd9c6b59a7ae580f2667af7a1?s=128&d=identicon&r=PG", "display_name": "letronje", "link": "https://stackoverflow.com/users/119622/letronje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7954, "favorite_count": 1, "answer_count": 4, "score": 12, "last_activity_date": 1527576532, "creation_date": 1470026376, "last_edit_date": 1470047114, "question_id": 38691131, "link": "https://stackoverflow.com/questions/38691131/android-kotlin-java-lang-noclassdeffounderror-failed-resolution-of-kotlinob", "title": "Android Kotlin : java.lang.NoClassDefFoundError: Failed resolution of: &lt;KotlinObject&gt;", "body": "<p>Every second run of our android app, we get a crash that says </p>\n\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: Lin/blahapp/xxx/BlahUtil\n</code></pre>\n\n<p>BlahUtil is a kotlin object with @JvmStatic annotations in it. I call these static methods from the rest of the android app(All in java) . </p>\n\n<p>We use multidex 1.0.1. </p>\n\n<p>I am on android studio 2.1.2, using JDK 7.</p>\n\n<p>Relevant gradle configs:</p>\n\n<pre><code>compileSdkVersion 23\nbuildToolsVersion \"23.0.3\"\ndefaultConfig {\n        minSdkVersion 16\n        targetSdkVersion 23\n}\ndexOptions {\n        incremental true\n        dexInProcess true\n        javaMaxHeapSize \"10g\"\n        preDexLibraries true\n}\nbuildscript {\n    ext.kotlin_version = '1.0.3'\n\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n    }\n}\napply plugin: 'kotlin-android'\ndependencies {\n  compile \"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version\"\n  compile \"org.jetbrains.kotlin:kotlin-reflect:$kotlin_version\"\n}\n</code></pre>\n\n<p>Trace:</p>\n\n<pre><code>at in.blahapp.xxx.OurActivity \nat android.app.Activity.performCreate(Activity.java:6251)\nat ndroid.app.Instrumentation.callActivityOnCreate\nat android.app.ActivityThread.performLaunchActivity\nat android.app.ActivityThread.handleLaunchActivity\nat android.app.ActivityThread.-wrap11\nat android.app.ActivityThread$H.handleMessage\nat android.os.Handler.dispatchMessage(Handler.java:102)\nat android.os.Looper.loop(Looper.java:148)\nat android.app.ActivityThread.main(ActivityThread.java:5417)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n\nCaused by: java.lang.ClassNotFoundException: Didn't find class \"in.blahapp.xxx.BlahUtil\" on path: DexPathList[[dex file ....\n</code></pre>\n\n<p><a href=\"https://gist.github.com/letronje/89990a0d705ceaf46d992db2352cb8dc\" rel=\"noreferrer\">logcat output</a></p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "edited": false, "score": 0, "creation_date": 1470030164, "post_id": 38688203, "comment_id": 64762284, "body": "One more question. How can I do , or is it possible to do something like: prop.get(this) == prop.get(other)? Thank you."}, {"owner": {"reputation": 8022, "user_id": 1068649, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5e44a15ecb4ee475548612da03c81f33?s=128&d=identicon&r=PG", "display_name": "James Bassett", "link": "https://stackoverflow.com/users/1068649/james-bassett"}, "edited": false, "score": 1, "creation_date": 1470048476, "post_id": 38688203, "comment_id": 64772035, "body": "You&#39;d need to check and cast each property to a <code>KProperty1</code> to invoke getter"}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 8, "creation_date": 1492116318, "post_id": 38688203, "comment_id": 73863474, "body": "Is this still up to date?  Getting an error that has no attribute memberProperties"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "edited": false, "score": 2, "creation_date": 1492199424, "post_id": 38688203, "comment_id": 73895591, "body": "Updated the API link. You need to add the kotlin-reflect to the dependencies to use this method."}, {"owner": {"reputation": 15597, "user_id": 232485, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc3cbbdadcf7485288e502d084820c32?s=128&d=identicon&r=PG", "display_name": "Jabba", "link": "https://stackoverflow.com/users/232485/jabba"}, "reply_to_user": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 3, "creation_date": 1507565873, "post_id": 38688203, "comment_id": 80250734, "body": "@AdamHughes: add this import line: <code>import kotlin.reflect.full.memberProperties</code>"}, {"owner": {"reputation": 3533, "user_id": 2380702, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3b18b74a98d27a0591746c58376e9715?s=128&d=identicon&r=PG&f=1", "display_name": "xor", "link": "https://stackoverflow.com/users/2380702/xor"}, "edited": false, "score": 1, "creation_date": 1600548468, "post_id": 38688203, "comment_id": 113124760, "body": "i can&#39;t import this, maybe older version of kotlin."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 54, "last_activity_date": 1492199391, "last_edit_date": 1492199391, "creation_date": 1469997546, "answer_id": 38688203, "question_id": 38688111, "link": "https://stackoverflow.com/questions/38688111/kotlin-iterate-over-components-of-object/38688203#38688203", "title": "Kotlin: Iterate over components of object", "body": "<p>First of all, the <code>componentN</code> properties are available only on data classes, not on every object.</p>\n\n<p>There is no API specifically for iterating over the components, but you can use the <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.full/member-properties.html\" rel=\"noreferrer\">Kotlin reflection</a> to iterate over properties of any class:</p>\n\n<pre><code>class User(val age: Int, val name: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val user = User(25, \"Bob\")\n    for (prop in User::class.memberProperties) {\n        println(\"${prop.name} = ${prop.get(user)}\")\n    }  \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 7897438, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86d3b734987a14edcc0028b107cda6ff?s=128&d=identicon&r=PG&f=1", "display_name": "Yevhenii Nadtochii", "link": "https://stackoverflow.com/users/7897438/yevhenii-nadtochii"}, "is_accepted": false, "score": 2, "last_activity_date": 1577138770, "creation_date": 1577138770, "answer_id": 59461740, "question_id": 38688111, "link": "https://stackoverflow.com/questions/38688111/kotlin-iterate-over-components-of-object/59461740#59461740", "title": "Kotlin: Iterate over components of object", "body": "<p>also, you can use <a href=\"https://kotlinlang.org/docs/reference/delegated-properties.html\" rel=\"nofollow noreferrer\">Properties Delegation</a> with built-in delegate 'by map'. it's very useful for some simple stat classes.</p>\n\n<pre><code>class DbUsingStat {\n  private val map = mutableMapOf(\n    \"removed\" to 0,\n    \"updated\" to 0,\n    \"skipped\" to 0\n  )\n\n  var removed by map\n  var updated by map\n  var skipped by map\n\n  fun asMap() : Map&lt;String, Int&gt; = map.toMap()\n}\n\n...\n...\n\n\nval someStatistic = DbUsingStat().apply {\n  skipped = 5\n  removed = 10\n  updated = 1505\n}\n\nfor((k, v) in someStatistic.asMap())\n  println(\"$k: $v\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "is_accepted": false, "score": -1, "last_activity_date": 1578708985, "creation_date": 1578708985, "answer_id": 59691100, "question_id": 38688111, "link": "https://stackoverflow.com/questions/38688111/kotlin-iterate-over-components-of-object/59691100#59691100", "title": "Kotlin: Iterate over components of object", "body": "<p>here is an idea...i am not satisfied with it...but nonetheless here it is.</p>\n\n<p>it has some pros and cons:</p>\n\n<ul>\n<li>pros:\n\n<ul>\n<li>type-safe/compile-time checks\n\n<ul>\n<li>adding/removing fields to/from the data class causes compiler errors at field-iteration sites</li>\n</ul></li>\n<li>no boiler-plate code needed</li>\n</ul></li>\n<li>cons:\n\n<ul>\n<li>won't work if default values are defined for arguments</li>\n</ul></li>\n</ul>\n\n<p>declaration:</p>\n\n<pre><code>data class Memento(\n    val testType: TestTypeData,\n    val notes: String,\n    val examinationTime: MillisSinceEpoch?,\n    val administeredBy: String,\n    val signature: SignatureViewHolder.SignatureData,\n    val signerName: String,\n    val signerRole: SignerRole\n) : Serializable\n</code></pre>\n\n<p>iterating through all fields:</p>\n\n<pre><code>val iterateThroughAllMyFields: Memento = someValue\nMemento(\n    testType = iterateThroughAllMyFields.testType.also { testType -&gt;\n        // do something with testType\n    },\n    notes = iterateThroughAllMyFields.notes.also { notes -&gt;\n        // do something with notes\n    },\n    examinationTime = iterateThroughAllMyFields.examinationTime.also { examinationTime -&gt;\n        // do something with examinationTime\n    },\n    administeredBy = iterateThroughAllMyFields.administeredBy.also { administeredBy -&gt;\n        // do something with administeredBy\n    },\n    signature = iterateThroughAllMyFields.signature.also { signature -&gt;\n        // do something with signature\n    },\n    signerName = iterateThroughAllMyFields.signerName.also { signerName -&gt;\n        // do something with signerName\n    },\n    signerRole = iterateThroughAllMyFields.signerRole.also { signerRole -&gt;\n        // do something with signerRole\n    }\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 11378551, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wR9tPFgh-0Y/AAAAAAAAAAI/AAAAAAAAABE/kxDvBBaq5ic/photo.jpg?sz=128", "display_name": "Sahil Bansal", "link": "https://stackoverflow.com/users/11378551/sahil-bansal"}, "is_accepted": false, "score": 0, "last_activity_date": 1615877290, "creation_date": 1615877290, "answer_id": 66650249, "question_id": 38688111, "link": "https://stackoverflow.com/questions/38688111/kotlin-iterate-over-components-of-object/66650249#66650249", "title": "Kotlin: Iterate over components of object", "body": "<p>In kotlin you can do this in the following way, by iterating over the object fields, inside it, is using reflection for this.</p>\n<pre><code> private fun prepareData(covidResponse: CovidResponse) {\n    for (field in covidResponse.javaClass.declaredFields){\n              responseList.add(field as Object)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1308, "user_id": 1295419, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/g5QXq.jpg?s=128&g=1", "display_name": "Sermilion", "link": "https://stackoverflow.com/users/1295419/sermilion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21572, "favorite_count": 5, "accepted_answer_id": 38688203, "answer_count": 4, "score": 30, "last_activity_date": 1615877290, "creation_date": 1469996764, "last_edit_date": 1601114655, "question_id": 38688111, "link": "https://stackoverflow.com/questions/38688111/kotlin-iterate-over-components-of-object", "title": "Kotlin: Iterate over components of object", "body": "<p>Each data class object has a component for each property like component1, component2, etc..\nI was wondering if there is any way in Kotlin to iterate over each component of a class.\nSay I have class:</p>\n<pre><code>data class User(age:Int, name:String)\n</code></pre>\n<p>Could I do something like:</p>\n<pre><code>for(component in aUserObject){\n    //do some stuff with age or name\n}\n</code></pre>\n<p>?</p>\n"}, {"tags": ["java", "scripting", "kotlin"], "comments": [{"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1469988590, "post_id": 38686957, "comment_id": 64753137, "body": "I&#39;m sure you <i>could</i>, but why? The point of Kotlin is that it compiles to JVM bytecode."}, {"owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "reply_to_user": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1469988829, "post_id": 38686957, "comment_id": 64753214, "body": "I want to use it for load kotlin <a href=\"https://kotlinlang.org/docs/reference/type-safe-builders.html\" rel=\"nofollow noreferrer\">Type-Safe Builders</a> dsl or something like this in runtime."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 4, "last_activity_date": 1469996130, "creation_date": 1469996130, "answer_id": 38688044, "question_id": 38686957, "link": "https://stackoverflow.com/questions/38686957/can-i-run-kotlin-as-script-with-java-scripting-api/38688044#38688044", "title": "Can I run kotlin as script with Java Scripting API", "body": "<p>Kotlin support for the Java Scripting API is <a href=\"https://youtrack.jetbrains.com/issue/KT-7880\" rel=\"nofollow\">planned</a>, but as of version 1.0.3 is not available yet. For the mean time, you can try to use an existing <a href=\"https://github.com/xafero/dynkt\" rel=\"nofollow\">open-source implementation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 17430, "user_id": 355438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb132c7de803cf864996a922a073e5f2?s=128&d=identicon&r=PG", "display_name": "Lu55", "link": "https://stackoverflow.com/users/355438/lu55"}, "is_accepted": true, "score": 10, "last_activity_date": 1516830593, "last_edit_date": 1516830593, "creation_date": 1516106368, "answer_id": 48281513, "question_id": 38686957, "link": "https://stackoverflow.com/questions/38686957/can-i-run-kotlin-as-script-with-java-scripting-api/48281513#48281513", "title": "Can I run kotlin as script with Java Scripting API", "body": "<p>Yes, it's possible starting from the Kotlin 1.1: <a href=\"http://kotlinlang.org/docs/reference/whatsnew11.html#javaxscript-support\" rel=\"noreferrer\">http://kotlinlang.org/docs/reference/whatsnew11.html#javaxscript-support</a></p>\n\n<p>This configuration adds Kotlin scripts engine to my Kotlin 1.2 project:</p>\n\n<ul>\n<li><p><code>META-INF/services/javax.script.ScriptEngineFactory</code> file with the content from the <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/examples/kotlin-jsr223-local-example/src/main/resources/META-INF/services/javax.script.ScriptEngineFactory\" rel=\"noreferrer\">https://github.com/JetBrains/kotlin/blob/master/libraries/examples/kotlin-jsr223-local-example/src/main/resources/META-INF/services/javax.script.ScriptEngineFactory</a></p></li>\n<li><p>2 libraries:\n<code>\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-script-runtime&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-script-util&lt;/artifactId&gt;\n        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></p></li>\n</ul>\n\n<p><strong>Update:</strong>\nStarting from Kotlin 1.2.20 <code>kotlin-script-util</code> doesn't depend on <code>kotlin-compiler</code> explicitly (see <a href=\"https://youtrack.jetbrains.com/issue/KT-17561\" rel=\"noreferrer\">https://youtrack.jetbrains.com/issue/KT-17561</a>). So one more module should be provided (as of the <a href=\"https://github.com/JetBrains/kotlin/blob/master/libraries/examples/kotlin-jsr223-local-example/build.gradle.kts\" rel=\"noreferrer\">build file in example project</a>):\n<code>\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-compiler-embeddable&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></p>\n"}], "owner": {"reputation": 2043, "user_id": 3291867, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1Vaxp.jpg?s=128&g=1", "display_name": "mojtab23", "link": "https://stackoverflow.com/users/3291867/mojtab23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3289, "favorite_count": 3, "accepted_answer_id": 48281513, "answer_count": 2, "score": 7, "last_activity_date": 1516830593, "creation_date": 1469988348, "question_id": 38686957, "link": "https://stackoverflow.com/questions/38686957/can-i-run-kotlin-as-script-with-java-scripting-api", "title": "Can I run kotlin as script with Java Scripting API", "body": "<p>I want to run kotlin code as script from java with <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/\" rel=\"noreferrer\">Java Scripting API</a> similar to this for javascript:</p>\n\n<pre><code>import javax.script.*;\npublic class EvalScript {\n    public static void main(String[] args) throws Exception {\n        // create a script engine manager\n        ScriptEngineManager factory = new ScriptEngineManager();\n        // create a JavaScript engine\n        ScriptEngine engine = factory.getEngineByName(\"JavaScript\");\n        // evaluate JavaScript code from String\n        engine.eval(\"print('Hello, World')\");\n    }\n}\n</code></pre>\n\n<p>or with similar APIs like this.</p>\n"}, {"tags": ["android", "notifications", "kotlin"], "comments": [{"owner": {"reputation": 2867, "user_id": 2661303, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7a29ab2a066b13de7ba2c9de2aba6d0?s=128&d=identicon&r=PG", "display_name": "lionscribe", "link": "https://stackoverflow.com/users/2661303/lionscribe"}, "edited": false, "score": 0, "creation_date": 1469982941, "post_id": 38686009, "comment_id": 64751390, "body": "The Icon class was introduced in SDK 23, so compat cannot support it."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 2867, "user_id": 2661303, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7a29ab2a066b13de7ba2c9de2aba6d0?s=128&d=identicon&r=PG", "display_name": "lionscribe", "link": "https://stackoverflow.com/users/2661303/lionscribe"}, "edited": false, "score": 0, "creation_date": 1470049309, "post_id": 38686009, "comment_id": 64772525, "body": "But it could take a bitmap and in the 23 impl it could use Icon and wrap the bitmap for this SDK level and above"}, {"owner": {"reputation": 2867, "user_id": 2661303, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7a29ab2a066b13de7ba2c9de2aba6d0?s=128&d=identicon&r=PG", "display_name": "lionscribe", "link": "https://stackoverflow.com/users/2661303/lionscribe"}, "edited": false, "score": 0, "creation_date": 1470054665, "post_id": 38686009, "comment_id": 64775735, "body": "You can always make your own builder class..."}], "answers": [{"comments": [{"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1470049415, "post_id": 38686212, "comment_id": 64772595, "body": "Notification has no public setSmallIcon - only the builder has"}, {"owner": {"reputation": 2867, "user_id": 2661303, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7a29ab2a066b13de7ba2c9de2aba6d0?s=128&d=identicon&r=PG", "display_name": "lionscribe", "link": "https://stackoverflow.com/users/2661303/lionscribe"}, "reply_to_user": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1470053448, "post_id": 38686212, "comment_id": 64774937, "body": "Sorry, the docs fooled me. It has a getSmallIcon but not a setSmallIcon. The link to setSmallIcon was to the builder."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1470057591, "post_id": 38686212, "comment_id": 64777740, "body": "no worries - but maybe delete the answer to clean things up"}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1470061959, "post_id": 38686212, "comment_id": 64780687, "body": "reflection would not make this working code nicer IMHO ;-)"}], "tags": [], "owner": {"reputation": 2867, "user_id": 2661303, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7a29ab2a066b13de7ba2c9de2aba6d0?s=128&d=identicon&r=PG", "display_name": "lionscribe", "link": "https://stackoverflow.com/users/2661303/lionscribe"}, "is_accepted": false, "score": 0, "last_activity_date": 1470061633, "last_edit_date": 1470061633, "creation_date": 1469983331, "answer_id": 38686212, "question_id": 38686009, "link": "https://stackoverflow.com/questions/38686009/setsmalliconiconicon-and-notificationcompat/38686212#38686212", "title": "setSmallIcon(icon:Icon) and NotificationCompat", "body": "<p>If you are comfortable using reflection, then rather than setting the small icon in the builder, set it in the built notification itself. You can check there for SDK 23, and call setSmallIcon using reflection (it is a public method, but is hidden. I doubt it will change), otherwise set the icon field in the notification. </p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 0, "last_activity_date": 1470063119, "creation_date": 1470063119, "answer_id": 38701941, "question_id": 38686009, "link": "https://stackoverflow.com/questions/38686009/setsmalliconiconicon-and-notificationcompat/38701941#38701941", "title": "setSmallIcon(icon:Icon) and NotificationCompat", "body": "<p>Short of reflection I suggest creating your own builder interface with two implementations: one for <code>NotificationCompat.Builder</code> and one for <code>Notification.Builder</code>. You might be repeating \"android\" but you won't be repeating <em>yourself</em>. e.g.:</p>\n\n<pre><code>interface NotificationFacadeBuilder&lt;out T&gt; {\n    /* facade builder method declarations go here */\n    fun build(): T\n}\n\nclass SupportAppNotificationCompatFacadeBuilder(context: Context)\n: NotificationFacadeBuilder&lt;NotificationCompat&gt; {\n    val builder = NotificationCompat.Builder(context)\n    /* facade builder method implementations go here and delegate to `builder` */\n    override fun build(): NotificationCompat = TODO()\n}\n\nclass AppNotificationFacadeBuilder(context: Context)\n: NotificationFacadeBuilder&lt;Notification&gt; {\n    val builder = Notification.Builder(context)\n    /* facade builder method implementations go here and delegate to `builder` */\n    override fun build(): Notification = TODO()\n}\n</code></pre>\n\n<p><code>NotificationFacadeBuilder</code> (or whatever you decide to call it) will have to declare each common builder method you need and then each implementing class will simply delegate those to their respective, actual builder implementations.</p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1470063119, "creation_date": 1469981948, "last_edit_date": 1470046403, "question_id": 38686009, "link": "https://stackoverflow.com/questions/38686009/setsmalliconiconicon-and-notificationcompat", "title": "setSmallIcon(icon:Icon) and NotificationCompat", "body": "<p>currently I have this WET code caused by the fact that NotificationCompat does not support setSmallIcon for a Icon and not a resource-id:</p>\n\n<pre><code>  val notification = if (Build.VERSION.SDK_INT &lt; 23) {\n            NotificationCompat.Builder(this)\n                    .setLargeIcon(bitmap)\n                    .setSmallIcon(R.drawable.ic_launcher)\n                    .setContentText(intentDescriber!!.userFacingIntentDescription)\n                    .setContentTitle(label)\n                    .setContentIntent(contentIntent)\n                    .setAutoCancel(true)\n                    .build()\n        } else {\n            Notification.Builder(this)\n                    .setSmallIcon(Icon.createWithBitmap(bitmap))\n                    .setLargeIcon(bitmap)\n                    .setContentText(intentDescriber!!.userFacingIntentDescription)\n                    .setContentTitle(label)\n                    .setContentIntent(contentIntent)\n                    .setAutoCancel(true)\n                    .build()\n        }\n</code></pre>\n\n<p>Is there a way to make this nicer ( DRY ? ) - the problem is that both builder-classes are different ..</p>\n"}, {"tags": ["kotlin"], "answers": [{"comments": [{"owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "edited": false, "score": 0, "creation_date": 1469971533, "post_id": 38684339, "comment_id": 64748019, "body": "Would it be bad practice to pass <code>Context</code> into the parameters of the class constructor to use for the custom getter?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469979993, "post_id": 38684339, "comment_id": 64750545, "body": "It is not the easiest way, but if you need the syntax of a property, then do it"}], "tags": [], "owner": {"reputation": 1114, "user_id": 2337856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7a4cea77d89812b4c1abf1c5af2de8?s=128&d=identicon&r=PG", "display_name": "Sz&#246;r&#233;nyi &#193;d&#225;m", "link": "https://stackoverflow.com/users/2337856/sz%c3%b6r%c3%a9nyi-%c3%81d%c3%a1m"}, "is_accepted": true, "score": 17, "last_activity_date": 1469970784, "creation_date": 1469970784, "answer_id": 38684339, "question_id": 38684318, "link": "https://stackoverflow.com/questions/38684318/passing-parameters-to-a-custom-getter-in-kotlin/38684339#38684339", "title": "Passing parameters to a custom getter in kotlin", "body": "<p>As far as I know, property getter cannot have parameter. Write a function instead.</p>\n"}, {"comments": [{"owner": {"reputation": 2451, "user_id": 1084764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zE2e4.jpg?s=128&g=1", "display_name": "Raykud", "link": "https://stackoverflow.com/users/1084764/raykud"}, "edited": false, "score": 0, "creation_date": 1551580957, "post_id": 38778645, "comment_id": 96690844, "body": "in your example that property MUST be placed somewhere where there is a context, however his example (the java method) is NOT context dependent as is passed as parameter."}, {"owner": {"reputation": 1343, "user_id": 9005383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-rymLhVRbsIw/AAAAAAAAAAI/AAAAAAAAG20/cTAJhtYO4mY/photo.jpg?sz=128", "display_name": "Tamim Attafi", "link": "https://stackoverflow.com/users/9005383/tamim-attafi"}, "edited": false, "score": 1, "creation_date": 1577520431, "post_id": 38778645, "comment_id": 105190546, "body": "why do u assign it first to newString? you can directly call context.getString"}], "tags": [], "owner": {"reputation": 3925, "user_id": 3806331, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ab7f221d4245947fd3260c364ffd0645?s=128&d=identicon&r=PG&f=1", "display_name": "johnny_crq", "link": "https://stackoverflow.com/users/3806331/johnny-crq"}, "is_accepted": false, "score": -1, "last_activity_date": 1470351448, "creation_date": 1470351448, "answer_id": 38778645, "question_id": 38684318, "link": "https://stackoverflow.com/questions/38684318/passing-parameters-to-a-custom-getter-in-kotlin/38778645#38778645", "title": "Passing parameters to a custom getter in kotlin", "body": "<p>You can do for example:</p>\n\n<pre><code>val displayedValue: String by lazy {\n     val newString = context.getString(R.string.someString)\n     newString\n}\n</code></pre>\n"}], "owner": {"reputation": 17849, "user_id": 4230345, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-fWK0YfC5ong/AAAAAAAAAAI/AAAAAAAAADk/a23H1FFs8Jg/photo.jpg?sz=128", "display_name": "Farbod Salamat-Zadeh", "link": "https://stackoverflow.com/users/4230345/farbod-salamat-zadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6036, "favorite_count": 1, "accepted_answer_id": 38684339, "answer_count": 2, "score": 13, "last_activity_date": 1470351448, "creation_date": 1469970643, "last_edit_date": 1469971505, "question_id": 38684318, "link": "https://stackoverflow.com/questions/38684318/passing-parameters-to-a-custom-getter-in-kotlin", "title": "Passing parameters to a custom getter in kotlin", "body": "<p>I have been reading about <a href=\"https://kotlinlang.org/docs/reference/properties.html\" rel=\"noreferrer\">properties</a> in Kotlin, including custom getters and setters.</p>\n\n<p>However, I was wondering if it is possible to create a custom getter with extra parameters.</p>\n\n<p>For example, consider the following method in Java:</p>\n\n<pre><code>public String getDisplayedValue(Context context) {\n    if (PrefUtils.useImperialUnits(context)) {\n        // return stuff\n    } else {\n        // return other stuff\n    }\n}\n</code></pre>\n\n<p><em>Note that the static method in <code>PrefUtils</code> has to have <code>Context</code> as a parameter, so removing this is not an option.</em></p>\n\n<p>I would like to write it like this in Kotlin:</p>\n\n<pre><code>val displayedValue: String\n    get(context: Context) {\n        return if (PrefUtils.useImperialUnits(context)) {\n            // stuff\n        } else {\n            // other stuff\n        }\n    }\n</code></pre>\n\n<p>But my IDE highlights all of this in red.</p>\n\n<p>I am aware I can create a function in my class to get the displayed value, but this would mean I would have to use <code>.getDisplayedValue(Context)</code> in Kotlin as well instead of being able to refer to the property by name as in <code>.displayedValue</code>.</p>\n\n<p>Is there a way to create a custom getter like this?</p>\n\n<p>EDIT: If not, would it be best to write a function for this, or to pass <code>Context</code> into the parameters of the class constructor?</p>\n"}, {"tags": ["android", "android-activity", "kotlin", "companion-object"], "comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1469910179, "post_id": 38677942, "comment_id": 64735912, "body": "Have you confirmed that the App&#39;s onCreate is actually run? Might have forgotten to add it to the manifest."}, {"owner": {"reputation": 160, "user_id": 4177612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BHXwXZ27Vh4/AAAAAAAAAAI/AAAAAAAAAHU/ND3J8zu54_w/photo.jpg?sz=128", "display_name": "D. Amoroso", "link": "https://stackoverflow.com/users/4177612/d-amoroso"}, "reply_to_user": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1469912065, "post_id": 38677942, "comment_id": 64736375, "body": "Thanks a lot! I can&#39;t believe I lost three hours on this and did not notice that my breakpoint on App.onCreate were not doing anything.  Can you write it as an answer, so that I can accept it? :)"}], "answers": [{"comments": [{"owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "edited": false, "score": 0, "creation_date": 1469910246, "post_id": 38678046, "comment_id": 64735936, "body": "Good idea, I just tested though and my Applications onCreate is run before other classes are loaded, and I think this behaviour is guaranteed."}, {"owner": {"reputation": 160, "user_id": 4177612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BHXwXZ27Vh4/AAAAAAAAAAI/AAAAAAAAAHU/ND3J8zu54_w/photo.jpg?sz=128", "display_name": "D. Amoroso", "link": "https://stackoverflow.com/users/4177612/d-amoroso"}, "edited": false, "score": 0, "creation_date": 1469912290, "post_id": 38678046, "comment_id": 64736426, "body": "Thank you for your answer and for pointing this out, I had not paid attention to this, but I think you need the annotation @JvmStatic to let them behave as such."}], "tags": [], "owner": {"reputation": 808, "user_id": 2815288, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xtLox.jpg?s=128&g=1", "display_name": "sswierczek", "link": "https://stackoverflow.com/users/2815288/sswierczek"}, "is_accepted": false, "score": 1, "last_activity_date": 1469909319, "creation_date": 1469909319, "answer_id": 38678046, "question_id": 38677942, "link": "https://stackoverflow.com/questions/38677942/app-crashing-because-lateinit-app-instance-not-initialized/38678046#38678046", "title": "App crashing because lateinit App instance not initialized", "body": "<p>I am not an Kotlin expert but it seems that companion objects are initialized earlier that invoke of parent class constructor. Probably when your <code>val SOURCES</code> try to init it throws exception as it  try to use unitialized App instance (before App <code>onCreate()</code>). <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html\" rel=\"nofollow\">Here</a> you can read that <strong><em>a companion object is initialized when the corresponding class is loaded (resolved), matching the semantics of a Java static initializer</em></strong></p>\n"}, {"tags": [], "owner": {"reputation": 19872, "user_id": 804967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/JVZu9.jpg?s=128&g=1", "display_name": "fweigl", "link": "https://stackoverflow.com/users/804967/fweigl"}, "is_accepted": true, "score": 3, "last_activity_date": 1469912930, "last_edit_date": 1469912930, "creation_date": 1469910663, "answer_id": 38678218, "question_id": 38677942, "link": "https://stackoverflow.com/questions/38677942/app-crashing-because-lateinit-app-instance-not-initialized/38678218#38678218", "title": "App crashing because lateinit App instance not initialized", "body": "<p>Cannot exactly pinpoint why your approach isn't working but I can suggest a fix: </p>\n\n<p>You need a <code>ForecastDb</code> in your <code>MainActivity</code>. Your <code>ForecastDb</code> needs a <code>ForecastDbHelper</code>. Your <code>ForecastDbHelper</code> needs the <code>Application</code> instance. </p>\n\n<p>So in your <code>MainActivity</code> you do: </p>\n\n<pre><code>val helper = ForecastDbHelper(application as App)\nval db = ForecastDb(helper)  \n</code></pre>\n\n<p>and voila, you got your db ready. </p>\n\n<p>This is called dependency injection and gives you more control over creation of the objects 'fetching' their dependencies themselves. </p>\n\n<p><strong>EDIT</strong>: Also check if you added your <code>App</code> class as the <code>Application</code> in the <code>AndroidManifest.xml</code>like this:: </p>\n\n<pre><code>&lt;application\n    android:name=\".base.App\" \n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9893871, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Akashdeep Singh", "link": "https://stackoverflow.com/users/9893871/akashdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1533681270, "creation_date": 1533681270, "answer_id": 51736338, "question_id": 38677942, "link": "https://stackoverflow.com/questions/38677942/app-crashing-because-lateinit-app-instance-not-initialized/51736338#51736338", "title": "App crashing because lateinit App instance not initialized", "body": "<p>I faced the same issue. Please check if this statement is present in the app manifest</p>\n\n<pre><code>&lt;application\nandroid:name=\".YourApp\"\n/&gt;\n</code></pre>\n\n<p>in your case it should be </p>\n\n<pre><code> &lt;application\n    android:name=\".App\"\n    /&gt;\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 4177612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-BHXwXZ27Vh4/AAAAAAAAAAI/AAAAAAAAAHU/ND3J8zu54_w/photo.jpg?sz=128", "display_name": "D. Amoroso", "link": "https://stackoverflow.com/users/4177612/d-amoroso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4830, "favorite_count": 1, "accepted_answer_id": 38678218, "answer_count": 3, "score": 1, "last_activity_date": 1533681270, "creation_date": 1469908519, "question_id": 38677942, "link": "https://stackoverflow.com/questions/38677942/app-crashing-because-lateinit-app-instance-not-initialized", "title": "App crashing because lateinit App instance not initialized", "body": "<p>I am trying to save an Application instance and use in the constructor of databaseHelper, but when my activity tries to instantiate the databaseHelper I get the following exceptions: </p>\n\n<pre><code>FATAL EXCEPTION: \nmain Process: com.weatherupp.weatherupp, PID: 29092\njava.lang.ExceptionInInitializerError\nat com.weatherupp.weatherupp.ui.MainActivity.onCreate(MainActivity.kt:27)\n[...]\nCaused by: kotlin.UninitializedPropertyAccessException: lateinit \nproperty instance has not been initialized\n</code></pre>\n\n<p>the code leading to the exception is the following:</p>\n\n<pre><code>MainActivity {\noverride fun onCreate(savedInstanceState: Bundle?) {\nsuper.onCreate(savedInstanceState)\nval provider = ForecastProvider()\n[...]\n}\n</code></pre>\n\n<p>ForecastProvider has the following companion object:</p>\n\n<pre><code>companion object {\n    val SOURCES = listOf(ForecastServer(), ForecastDb())\n}\n</code></pre>\n\n<p>ForecastDb's constructor refers to an instance of ForecastDbHelper, whose constructor refers to App.instance, declared as follows:</p>\n\n<pre><code>class App : Application() {\n\n  companion object {\n    lateinit var instance: App\n  }\n\n  override fun onCreate() {\n    super.onCreate()\n    instance = this\n  }\n\n}\n</code></pre>\n\n<p>If I comment all the code referring to the database, the app works using ForecastServer as the source of data, but the moment I try to refer to the database and hence to the App istance, Kotlin throws the UninitializedPropertyAccessException. </p>\n\n<p>I have been looking at the code for hours, can't figure out what I am doing wrong. Any help is blessed, thank all of you in advance. </p>\n"}, {"tags": ["java", "generics", "rx-java", "kotlin", "rx-kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1469877831, "post_id": 38666086, "comment_id": 64726860, "body": "please add the error message you are getting"}], "answers": [{"comments": [{"owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "edited": false, "score": 1, "creation_date": 1469901679, "post_id": 38670838, "comment_id": 64733455, "body": "Oh man now I feel stupid. It was late at night when I did this. I&#39;ll update my answer."}], "tags": [], "owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "is_accepted": true, "score": 6, "last_activity_date": 1469859053, "last_edit_date": 1469859053, "creation_date": 1469858299, "answer_id": 38670838, "question_id": 38666086, "link": "https://stackoverflow.com/questions/38666086/expressing-super-generics-in-kotlin-functional-types/38670838#38670838", "title": "Expressing &quot;super&quot; generics in Kotlin functional types?", "body": "<p>Java wildcard type <code>? super T</code> corresponds to <code>in T</code> <a href=\"https://kotlinlang.org/docs/reference/generics.html#use-site-variance-type-projections\" rel=\"noreferrer\">use-site type projection</a> in Kotlin, so the corresponding type of <code>collect</code> parameter would be <code>Action2&lt;in R, in T&gt;</code>.</p>\n\n<p>That type is roughly equivalent (or more specifically is eligible for <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#sam-conversions\" rel=\"noreferrer\">SAM-conversion</a>) to <code>(R, T) -&gt; Unit</code> functional type in Kotlin, because <code>(R, T) -&gt; Unit</code> is a synonym for type <code>Function2&lt;R, T, Unit&gt;</code> and the latter is equivalent to <code>Function2&lt;in R, in T, out Unit&gt;</code> due to the <a href=\"https://kotlinlang.org/docs/reference/generics.html#declaration-site-variance\" rel=\"noreferrer\">declaration-site variance</a> of the Function2 type parameters.</p>\n\n<p>You cannot pass a function of type <code>(R, T) -&gt; Boolean</code> as an argument to <code>collect</code>, where <code>(R, T) -&gt; Unit</code> is expected.</p>\n\n<p>Either change the type of <code>collect</code> parameter, or the type of <code>condition</code> parameter`.</p>\n"}], "owner": {"reputation": 9475, "user_id": 1373258, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/057cb1f71b78244924b7854605d79a9d?s=128&d=identicon&r=PG&f=1", "display_name": "tmn", "link": "https://stackoverflow.com/users/1373258/tmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 1, "accepted_answer_id": 38670838, "answer_count": 1, "score": 2, "last_activity_date": 1469901772, "creation_date": 1469819941, "last_edit_date": 1469901772, "question_id": 38666086, "link": "https://stackoverflow.com/questions/38666086/expressing-super-generics-in-kotlin-functional-types", "title": "Expressing &quot;super&quot; generics in Kotlin functional types?", "body": "<p>I'm trying to port an RxJava library and leverage extension functions in Kotlin.</p>\n\n<pre><code>fun &lt;T,R: MutableCollection&lt;T&gt;&gt; Observable&lt;T&gt;.collectWhile(factory: (() -&gt; R), condition: (R,T) -&gt; Boolean) =\n        compose(Transformers.collectWhile(factory,condition))\n</code></pre>\n\n<p>The <code>Transformers.collectWhile()</code> is written in Java and has this signature: </p>\n\n<pre><code>public static &lt;T, R extends Collection&lt;T&gt;&gt; Transformer&lt;T, R&gt; collectWhile(final Func0&lt;R&gt; factory,\n            final Action2&lt;? super R, ? super T&gt; collect)\n</code></pre>\n\n<p>However, I am getting an issue with mapping the <code>collect</code> argument and I'm not good at generics. How do I express <code>super</code> with a functional type?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Stupid mistake on my part. I should not have been posting on SO late at night. </p>\n\n<p>I was actually targeting this</p>\n\n<pre><code>public static &lt;T, R extends Iterable&lt;?&gt;&gt; Transformer&lt;T, R&gt; collectWhile(final Func0&lt;R&gt; factory,\n        final Action2&lt;? super R, ? super T&gt; collect, final Func2&lt;? super R, ? super T, Boolean&gt; condition)\n</code></pre>\n\n<p>And this is what I should have done. </p>\n\n<pre><code>fun &lt;T,R: MutableCollection&lt;T&gt;&gt; Observable&lt;T&gt;.collectWhile(factory: (() -&gt; R), action: (R,T) -&gt; Unit, condition: (R,T) -&gt; Boolean) =\n    compose(Transformers.collectWhile(factory,action,condition))\n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1469809369, "post_id": 38663360, "comment_id": 64707673, "body": "No. Variable names are merely there for the programmer&#39;s convenience; the compiler throws them away."}, {"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1469809421, "post_id": 38663360, "comment_id": 64707701, "body": "Consider what you think it should print for <code>printLocalVariables(1, one + 1);</code>."}, {"owner": {"reputation": 2732, "user_id": 4903925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dff9e4f48d1f1049aa3ee598331e43b?s=128&d=identicon&r=PG", "display_name": "Bonatti", "link": "https://stackoverflow.com/users/4903925/bonatti"}, "edited": false, "score": 0, "creation_date": 1469809841, "post_id": 38663360, "comment_id": 64707952, "body": "You can however get a memory location representation. So, &quot;one&quot; could become @2123d517 and you could trace that &quot;pointer&quot; back and forth. If its the same value, then its the same variable, in that context."}, {"owner": {"reputation": 314, "user_id": 6445611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZtvY8loIWjE/AAAAAAAAAAI/AAAAAAAAAXE/Ul2cnfvo_II/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u0443\u043d\u0434\u0440\u044e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/6445611/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d1%83%d0%bd%d0%b4%d1%80%d1%8e%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1469810135, "post_id": 38663360, "comment_id": 64708109, "body": "@AndyTurner &quot;value_int1, value_int2&quot; for example, thank you for your answer."}, {"owner": {"reputation": 314, "user_id": 6445611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZtvY8loIWjE/AAAAAAAAAAI/AAAAAAAAAXE/Ul2cnfvo_II/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u0443\u043d\u0434\u0440\u044e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/6445611/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d1%83%d0%bd%d0%b4%d1%80%d1%8e%d0%ba%d0%be%d0%b2"}, "reply_to_user": {"reputation": 2732, "user_id": 4903925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dff9e4f48d1f1049aa3ee598331e43b?s=128&d=identicon&r=PG", "display_name": "Bonatti", "link": "https://stackoverflow.com/users/4903925/bonatti"}, "edited": false, "score": 0, "creation_date": 1469810445, "post_id": 38663360, "comment_id": 64708274, "body": "@Bonatti thank you, I want do another magic, I need to convert variable one to string &quot;one&quot;"}, {"owner": {"reputation": 2732, "user_id": 4903925, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1dff9e4f48d1f1049aa3ee598331e43b?s=128&d=identicon&r=PG", "display_name": "Bonatti", "link": "https://stackoverflow.com/users/4903925/bonatti"}, "edited": false, "score": 0, "creation_date": 1469811205, "post_id": 38663360, "comment_id": 64708627, "body": "As far as I can tell, your &quot;problem&quot; is to decompile a binary file, and get the code associated with it. If this is it, then just search for any decompiler such as <a href=\"http://www.javadecompilers.com/\" rel=\"nofollow noreferrer\">this</a> one, that is even web based that can decompile Java, Dalvik, Python, etc. State what your problem is directly, what you tried, and what you expected/wanted to happen"}], "answers": [{"tags": [], "owner": {"reputation": 3472, "user_id": 4072509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/16VK8.jpg?s=128&g=1", "display_name": "apetranzilla", "link": "https://stackoverflow.com/users/4072509/apetranzilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1469809470, "creation_date": 1469809470, "answer_id": 38663451, "question_id": 38663360, "link": "https://stackoverflow.com/questions/38663360/it-is-possible-to-get-local-variable-names-programmatically-in-java-or-kotlin/38663451#38663451", "title": "It is possible to get local variable names programmatically in Java or Kotlin?", "body": "<p>No, it's not possible. Only the variable values are passed, no data that could give you the name is available.</p>\n"}, {"tags": [], "owner": {"reputation": 37971, "user_id": 1237575, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bc96521f79789d75fa63cfa5c2758765?s=128&d=identicon&r=PG", "display_name": "Rafael Winterhalter", "link": "https://stackoverflow.com/users/1237575/rafael-winterhalter"}, "is_accepted": true, "score": 3, "last_activity_date": 1469810721, "creation_date": 1469810721, "answer_id": 38663770, "question_id": 38663360, "link": "https://stackoverflow.com/questions/38663360/it-is-possible-to-get-local-variable-names-programmatically-in-java-or-kotlin/38663770#38663770", "title": "It is possible to get local variable names programmatically in Java or Kotlin?", "body": "<p>Theoretically, it is possible.</p>\n\n<p>You can use a byte code parser like ASM to extract a method's local variable table from the class file of the declaring class. This table contains the names of all local variables and an offset for their validity to identify the declaration order.</p>\n\n<p>Do however note that this attribute is optional. A compiler can omitt adding this debug information. </p>\n"}, {"tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 1, "last_activity_date": 1469811966, "creation_date": 1469811966, "answer_id": 38664073, "question_id": 38663360, "link": "https://stackoverflow.com/questions/38663360/it-is-possible-to-get-local-variable-names-programmatically-in-java-or-kotlin/38664073#38664073", "title": "It is possible to get local variable names programmatically in Java or Kotlin?", "body": "<p>In the case like your example <code>one</code> and <code>two</code> will be inlined in the call site and leave no trail in the compiled code. Ups.</p>\n\n<p>If all you want is easy logging, and you are using InteliJ (you should!), then use code templates. They allow one to use the local name, so you'll type <code>one.log&lt;tab&gt;</code> and get <code>one.log(\"one\")</code>, for example</p>\n"}, {"tags": [], "owner": {"reputation": 3680, "user_id": 889742, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9b925f6c8896aadcdd447b60ee5bb574?s=128&d=identicon&r=PG", "display_name": "Gonen I", "link": "https://stackoverflow.com/users/889742/gonen-i"}, "is_accepted": false, "score": 1, "last_activity_date": 1469831558, "last_edit_date": 1469831558, "creation_date": 1469830970, "answer_id": 38668296, "question_id": 38663360, "link": "https://stackoverflow.com/questions/38663360/it-is-possible-to-get-local-variable-names-programmatically-in-java-or-kotlin/38668296#38668296", "title": "It is possible to get local variable names programmatically in Java or Kotlin?", "body": "<p>This is an interesting question. But What is the purpose? Is it just an exercise?</p>\n\n<p>Yes, getting local variable names programmatically is possible under certain conditions.</p>\n\n<ol>\n<li><p>According to some definitions, in java, function parameters are a kind of local variable. You can get those , if the code was compiled using debug information, with java reflection, method.getParameterTypes()</p></li>\n<li><p>If you have a .class file compiled with debug information, you can read it the local variables from it, for example using asm's ClassReader.\nThe following code looks at the locals of class A's function f1</p></li>\n</ol>\n\n<p>Here is the code:</p>\n\n<pre><code>import java.io.File;\n\nimport java.io.FileInputStream;\n\nimport java.io.FileNotFoundException;\n\nimport java.io.IOException;\n\nimport java.util.List;\n\n\nimport org.objectweb.asm.ClassReader;\n\nimport org.objectweb.asm.ClassVisitor;\n\nimport org.objectweb.asm.tree.ClassNode;\n\nimport org.objectweb.asm.tree.LocalVariableNode;\n\nimport org.objectweb.asm.tree.MethodNode;\n\npublic class Example {\n    public static void main(String[] args) throws FileNotFoundException, IOException {\n        ClassReader reader = new ClassReader(new FileInputStream(new File(\"A.class\")));\n\n        final ClassNode classNode = new ClassNode();\n        reader.accept((ClassVisitor) classNode, 0);\n\n        for (final MethodNode mn : (List&lt;MethodNode&gt;)classNode.methods) {\n            if ( mn.name.equals(\"f1\"))\n                for (LocalVariableNode n : (List&lt;LocalVariableNode&gt;)mn.localVariables) {\n                    System.out.println(n.name);\n                }\n        }\n    }\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>I'm not sure about this, but I think you could also do it using the LocalVariable class of the Java Debug Interface</li>\n</ol>\n"}], "owner": {"reputation": 314, "user_id": 6445611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZtvY8loIWjE/AAAAAAAAAAI/AAAAAAAAAXE/Ul2cnfvo_II/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a\u0443\u043d\u0434\u0440\u044e\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/6445611/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80-%d0%9a%d1%83%d0%bd%d0%b4%d1%80%d1%8e%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3035, "favorite_count": 0, "accepted_answer_id": 38663770, "answer_count": 4, "score": 4, "last_activity_date": 1469831558, "creation_date": 1469809140, "last_edit_date": 1469810514, "question_id": 38663360, "link": "https://stackoverflow.com/questions/38663360/it-is-possible-to-get-local-variable-names-programmatically-in-java-or-kotlin", "title": "It is possible to get local variable names programmatically in Java or Kotlin?", "body": "<p>It is possible to get local variable names programmatically in Java or Kotlin?</p>\n\n<p>For example, this code</p>\n\n<pre><code>public void printOneTwo() {\n    int one = 1;\n    int two = 2;\n\n    printLocalVariables(one, two);\n}\n\nprivate void printLocalVariables(Objects... variables) {\n    //code\n}\n\n//result: \"one, two\"\n</code></pre>\n\n<p>I need to convert variable <code>one</code> to string <code>\"one\"</code></p>\n"}, {"tags": ["types", "type-conversion", "kotlin"], "comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469770922, "post_id": 38651192, "comment_id": 64684396, "body": "<code>byte</code> is signed in Java, so you will have to live with this. Why do you have to use a <code>byte</code>? Where is the <code>int</code> coming from?"}, {"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "reply_to_user": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469771050, "post_id": 38651192, "comment_id": 64684448, "body": "I have an external library, which I don&#39;t want to change. It gives me byte-typed values with negative numbers in them."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469771202, "post_id": 38651192, "comment_id": 64684490, "body": "so the library already gives you &quot;-127&quot;. Why do you need to convert it? It does not make a difference unless you use it numerically. If you are sure the library really &quot;meant&quot; 128 instead, you could use <code>short</code> or <code>int</code> on your end of things (convert by doing 255 + b for negative numbers)."}, {"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "reply_to_user": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469771392, "post_id": 38651192, "comment_id": 64684560, "body": "I need the actual numerical value, because in another third-party library that numerical value is used as an index in an array."}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 3, "creation_date": 1469771590, "post_id": 38651192, "comment_id": 64684643, "body": "Array indexes are <code>int</code>. You can convert from your &quot;unsigned byte&quot; by doing <code>int x = b &lt; 0 ? 255 + b : b;</code>"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469771694, "post_id": 38651192, "comment_id": 64684688, "body": "<a href=\"http://stackoverflow.com/questions/4266756/can-we-make-unsigned-byte-in-java\" title=\"can we make unsigned byte in java\">stackoverflow.com/questions/4266756/&hellip;</a>"}, {"owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "reply_to_user": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1469771998, "post_id": 38651192, "comment_id": 64684811, "body": "Thanks. If you submit your comment as an answer, I&#39;ll accept it. See also my update 1."}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "edited": false, "score": 0, "creation_date": 1470060336, "post_id": 38651192, "comment_id": 64779635, "body": "I couldn&#39;t find it before but here is a related question: <a href=\"http://stackoverflow.com/q/2640946/3255152\">stackoverflow.com/q/2640946/3255152</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 6723250, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/84a0e8aa370e949feeaa7c5c153a3be9?s=128&d=identicon&r=PG", "display_name": "Xerus", "link": "https://stackoverflow.com/users/6723250/xerus"}, "edited": false, "score": 0, "creation_date": 1509726863, "post_id": 38660733, "comment_id": 81150837, "body": "the eclipse Kotlin plugin somehow doesn&#39;t know the bitwise <code>and</code>, how else can this be done?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 1469, "user_id": 6723250, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/84a0e8aa370e949feeaa7c5c153a3be9?s=128&d=identicon&r=PG", "display_name": "Xerus", "link": "https://stackoverflow.com/users/6723250/xerus"}, "edited": false, "score": 0, "creation_date": 1509794014, "post_id": 38660733, "comment_id": 81170303, "body": "@Xerus I haven&#39;t really used the Eclipse plugin so I&#39;m not sure what to say but I suspect something is misconfigured as <code>and</code> is part of &quot;kotlin-stdlib&quot;. You might try using it as not infix: <code>toInt().and(0xFF)</code>."}, {"owner": {"reputation": 1834, "user_id": 2435402, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/lsmPv.png?s=128&g=1", "display_name": "ElliotM", "link": "https://stackoverflow.com/users/2435402/elliotm"}, "edited": false, "score": 1, "creation_date": 1511301345, "post_id": 38660733, "comment_id": 81801505, "body": "Why is this not baked into Kotlin??!?"}, {"owner": {"reputation": 968, "user_id": 6553331, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1lWip.png?s=128&g=1", "display_name": "temp_", "link": "https://stackoverflow.com/users/6553331/temp"}, "edited": false, "score": 3, "creation_date": 1530659334, "post_id": 38660733, "comment_id": 89311029, "body": "Depending on your data, this is very helpful for a <code>BluetoothGattCharacteristic</code>. Thank you."}, {"owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "edited": false, "score": 1, "creation_date": 1536332705, "post_id": 38660733, "comment_id": 91399653, "body": "For reference, <a href=\"https://stackoverflow.com/a/14071395/539599\">explanation for why <code>and</code> is needed</a>."}, {"owner": {"reputation": 2516, "user_id": 683482, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lBysC.jpg?s=128&g=1", "display_name": "Raju yourPepe", "link": "https://stackoverflow.com/users/683482/raju-yourpepe"}, "edited": false, "score": 0, "creation_date": 1550999510, "post_id": 38660733, "comment_id": 96472887, "body": "What if I use kotlin 1.3.20?"}, {"owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "reply_to_user": {"reputation": 2516, "user_id": 683482, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/lBysC.jpg?s=128&g=1", "display_name": "Raju yourPepe", "link": "https://stackoverflow.com/users/683482/raju-yourpepe"}, "edited": false, "score": 0, "creation_date": 1551121108, "post_id": 38660733, "comment_id": 96515977, "body": "@RajuyourPepe I&#39;ve updated my answer to be a little more explicit in the usage of <code>toUByte</code>, etc. in Kotlin 1.3+ for your use case of 1.3.20."}, {"owner": {"reputation": 107, "user_id": 9734994, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LFfKBpfnwfs/AAAAAAAAAAI/AAAAAAAAAAc/5sUduBiLJ0E/photo.jpg?sz=128", "display_name": "Riddhi Shankar", "link": "https://stackoverflow.com/users/9734994/riddhi-shankar"}, "edited": false, "score": 0, "creation_date": 1563946010, "post_id": 38660733, "comment_id": 100863593, "body": "Thank you so much, It really helpful in BluettothGattCharacteristics"}], "tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": true, "score": 52, "last_activity_date": 1571748997, "last_edit_date": 1571748997, "creation_date": 1469800670, "answer_id": 38660733, "question_id": 38651192, "link": "https://stackoverflow.com/questions/38651192/how-to-correctly-handle-byte-values-greater-than-127-in-kotlin/38660733#38660733", "title": "How to correctly handle Byte values greater than 127 in Kotlin?", "body": "<p>With Kotlin 1.3+ you can use <a href=\"https://blog.jetbrains.com/kotlin/2018/08/kotlin-1-3-m2/\" rel=\"noreferrer\">unsigned types</a>. e.g. <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/to-u-byte.html\" rel=\"noreferrer\"><code>toUByte</code></a> (<a href=\"https://pl.kotl.in/LY0zlB_c6\" rel=\"noreferrer\">Kotlin Playground</a>):</p>\n\n<pre><code>private fun magicallyExtractRightValue(b: Byte): Int {\n    return b.toUByte().toInt()\n}\n</code></pre>\n\n<p>or even require using <code>UByte</code> directly instead of <code>Byte</code> (<a href=\"https://pl.kotl.in/itNJKEWeE\" rel=\"noreferrer\">Kotlin Playground</a>):</p>\n\n<pre><code>private fun magicallyExtractRightValue(b: UByte): Int {\n    return b.toInt()\n}\n</code></pre>\n\n<p>For releases prior to Kotlin 1.3, I recommend creating an <a href=\"https://kotlinlang.org/docs/reference/extensions.html#extension-functions\" rel=\"noreferrer\">extension function</a> to do this using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/and.html\" rel=\"noreferrer\"><code>and</code></a>:</p>\n\n<pre><code>fun Byte.toPositiveInt() = toInt() and 0xFF\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>val a: List&lt;Int&gt; = listOf(0, 1, 63, 127, 128, 244, 255)\nprintln(\"from ints: $a\")\nval b: List&lt;Byte&gt; = a.map(Int::toByte)\nprintln(\"to bytes: $b\")\nval c: List&lt;Int&gt; = b.map(Byte::toPositiveInt)\nprintln(\"to positive ints: $c\")\n</code></pre>\n\n<p>Example output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>from ints: [0, 1, 63, 127, 128, 244, 255]\nto bytes: [0, 1, 63, 127, -128, -12, -1]\nto positive ints: [0, 1, 63, 127, 128, 244, 255]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6434, "user_id": 539599, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iB0U.jpg?s=128&g=1", "display_name": "Raphael", "link": "https://stackoverflow.com/users/539599/raphael"}, "is_accepted": false, "score": 0, "last_activity_date": 1536333289, "creation_date": 1536333289, "answer_id": 52225417, "question_id": 38651192, "link": "https://stackoverflow.com/questions/38651192/how-to-correctly-handle-byte-values-greater-than-127-in-kotlin/52225417#52225417", "title": "How to correctly handle Byte values greater than 127 in Kotlin?", "body": "<p>Good old <code>printf</code> does what we want:</p>\n\n<pre><code>java.lang.String.format(\"%02x\", byte)\n</code></pre>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14397, "favorite_count": 5, "accepted_answer_id": 38660733, "answer_count": 2, "score": 31, "last_activity_date": 1571748997, "creation_date": 1469770643, "last_edit_date": 1495535438, "question_id": 38651192, "link": "https://stackoverflow.com/questions/38651192/how-to-correctly-handle-byte-values-greater-than-127-in-kotlin", "title": "How to correctly handle Byte values greater than 127 in Kotlin?", "body": "<p>Imagine I have a Kotlin program with a variable <code>b</code> of type <code>Byte</code>, into which an external system writes values greater than <code>127</code>. \"External\" means that I cannot change the type of the value it returns.</p>\n\n<p><code>val a:Int = 128\nval b:Byte = a.toByte()</code></p>\n\n<p>Both <code>a.toByte()</code> and <code>b.toInt()</code> return <code>-128</code>.</p>\n\n<p>Imagine I want to get the correct value (<code>128</code>) from the variable <code>b</code>. How can I do it?</p>\n\n<p>In other words: What implementation of <code>magicallyExtractRightValue</code> would make the following test run?</p>\n\n<pre><code>@Test\nfun testByteConversion() {\n    val a:Int = 128\n    val b:Byte = a.toByte()\n\n    System.out.println(a.toByte())\n    System.out.println(b.toInt())\n\n    val c:Int = magicallyExtractRightValue(b)\n\n    Assertions.assertThat(c).isEqualTo(128)\n}\n\nprivate fun magicallyExtractRightValue(b: Byte): Int {\n    throw UnsupportedOperationException(\"not implemented\")\n}\n</code></pre>\n\n<p><strong>Update 1:</strong> This solution suggested by <a href=\"https://stackoverflow.com/users/14955/thilo\">Thilo</a> seems to work.</p>\n\n<pre><code>private fun magicallyExtractRightValue(o: Byte): Int = when {\n    (o.toInt() &lt; 0) -&gt; 255 + o.toInt() + 1\n    else -&gt; o.toInt()\n}\n</code></pre>\n"}]