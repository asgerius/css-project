[{"tags": ["android", "kotlin", "android-permissions"], "comments": [{"owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "edited": false, "score": 0, "creation_date": 1467843985, "post_id": 38233350, "comment_id": 63891217, "body": "Could you please elaborate -- what Kotlin code exactly have you tried and what was the error?"}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1467848512, "post_id": 38233350, "comment_id": 63892576, "body": "Is you question about the syntax for this case? <code>@NeedsPermission(Manifest.permission.BLUETOOTH_ADMIN, Manifest.permission.BLUETOOTH)</code> seems to be working. Java&#39;s <code>String[] value();</code> is recognized as a vararg parameter in Kotlin."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1467880807, "post_id": 38233350, "comment_id": 63902983, "body": "@AndroidEx with which version of kotlin is this working for you? I run 1.0.3 and this syntax fails here"}, {"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1467896075, "post_id": 38233350, "comment_id": 63913115, "body": "@ligi 1.0.3. Strangely, the accepted answer doesn&#39;t work for me with <code>Type inference failed. Expected type mismatch: inferred type is kotlin.Array&lt;kotlin.String&gt; but kotlin.String was expected</code>, I have to add <code>*</code> before <code>arrayOf</code> to spread it into vararg."}, {"owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "edited": false, "score": 0, "creation_date": 1467898280, "post_id": 38233350, "comment_id": 63914763, "body": "You are right - I editet the answer"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467908121, "post_id": 38233350, "comment_id": 63921921, "body": "try removing your <code>{}</code> curly braces, you do not need an array if the type <code>@NeedsPermission</code> is vararg.  If it is an array, then <code>arrayOf(something, somethingelse)</code>, if vararg just <code>something, somethingelse</code>"}], "answers": [{"comments": [{"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467908761, "post_id": 38241568, "comment_id": 63922331, "body": "the <code>*</code> is undoing your <code>array</code> so remove both, if it is vararg just list the elements without any special creation of array or using the spread operator."}, {"owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467928523, "post_id": 38241568, "comment_id": 63932831, "body": "That has been modified by someone else, my original answer didn&#39;t have the <code>*</code>"}], "tags": [], "owner": {"reputation": 14564, "user_id": 997851, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63c8b0590595c3de58406678ef99a6bf?s=128&d=identicon&r=PG", "display_name": "sockeqwe", "link": "https://stackoverflow.com/users/997851/sockeqwe"}, "is_accepted": false, "score": 0, "last_activity_date": 1467928534, "last_edit_date": 1467928534, "creation_date": 1467882652, "answer_id": 38241568, "question_id": 38233350, "link": "https://stackoverflow.com/questions/38233350/permissionsdispatcher-and-multiple-needspermissions-with-kotlin/38241568#38241568", "title": "permissionsdispatcher and multiple @NeedsPermission&#39;s with kotlin", "body": "<pre><code>@NeedsPermission(arrayOf(Manifest.permission.BLUETOOTH_ADMIN,Manifest.permission.BLUETOOTH))\n</code></pre>\n\n<p>In java <code>@NeedsPermission({...})</code> the curly brackets <code>{...}</code> is just a shorthand for creating an array. In kotlin you must explicitly say that it is an array, because <code>{}</code> is reserved for lambda expressions.</p>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": true, "score": 6, "last_activity_date": 1467908749, "last_edit_date": 1467908749, "creation_date": 1467908402, "answer_id": 38250602, "question_id": 38233350, "link": "https://stackoverflow.com/questions/38233350/permissionsdispatcher-and-multiple-needspermissions-with-kotlin/38250602#38250602", "title": "permissionsdispatcher and multiple @NeedsPermission&#39;s with kotlin", "body": "<p>In Java the <code>{}</code> represents creating an array, and in this context in Kotlin the <code>{}</code> is accidentally creating a <a href=\"https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions\" rel=\"noreferrer\">lambda expression</a> and it cannot be determined what you intend because the code inside the lambda is invalid.  </p>\n\n<p>So you are saying <code>@NeedsPermission(someFunctionReferenceThatIsInvalid)</code> instead of passing in an array of permissions as <code>@NeedsPermission(array)</code></p>\n\n<p>In the annotation the array is being treated as a <code>vararg</code> so you can just list the elements:</p>\n\n<pre><code>@NeedsPermission(Manifest.permission.BLUETOOTH_ADMIN, Manifest.permission.BLUETOOTH)\n</code></pre>\n\n<p>If it were being treated as an array, you would use the <code>arrayOf</code> function:</p>\n\n<pre><code>@NeedsPermission(arrayOf(Manifest.permission.BLUETOOTH_ADMIN, Manifest.permission.BLUETOOTH))\n</code></pre>\n\n<p>The examples creating an array and then using the <a href=\"https://kotlinlang.org/docs/reference/java-interop.html#java-varargs\" rel=\"noreferrer\"><code>*</code> spread operator</a> are basically doing and then undoing the array and it is not necessary. </p>\n"}], "owner": {"reputation": 35330, "user_id": 322642, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0030846647f93ba6bf0938a199688c2e?s=128&d=identicon&r=PG", "display_name": "ligi", "link": "https://stackoverflow.com/users/322642/ligi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 38250602, "answer_count": 2, "score": 1, "last_activity_date": 1467928534, "creation_date": 1467837456, "question_id": 38233350, "link": "https://stackoverflow.com/questions/38233350/permissionsdispatcher-and-multiple-needspermissions-with-kotlin", "title": "permissionsdispatcher and multiple @NeedsPermission&#39;s with kotlin", "body": "<p>For one permission I can use permissionsdispatcher in java and kotlin - but when it comes to multiple permissions like this:</p>\n\n<pre><code>@NeedsPermission({Manifest.permission.BLUETOOTH_ADMIN,Manifest.permission.BLUETOOTH})\n</code></pre>\n\n<p>I get a problem on kotlin - it does not accept more than one parameter there - works fine with java</p>\n"}, {"tags": ["scala", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1367702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef90e4b889d7e0263361ce63366e944c?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1367702/oleg"}, "edited": false, "score": 0, "creation_date": 1467837064, "post_id": 38232888, "comment_id": 63888092, "body": "Thanks a lot for your answer, I filed issue <a href=\"https://youtrack.jetbrains.com/issue/KT-13017\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-13017</a>."}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": true, "score": 7, "last_activity_date": 1467835801, "creation_date": 1467835801, "answer_id": 38232888, "question_id": 38232767, "link": "https://stackoverflow.com/questions/38232767/kotlin-zipall-alternative/38232888#38232888", "title": "Kotlin zipAll alternative", "body": "<p>There is no in-build analog in Kotlin 1.0. It might be a good idea to add it into the stdlib. Feel free to file an issue on the YouTrack</p>\n"}, {"tags": [], "owner": {"reputation": 19114, "user_id": 4137489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d6e58042c9b1e87df5f5df4796b389f?s=128&d=identicon&r=PG&f=1", "display_name": "marstran", "link": "https://stackoverflow.com/users/4137489/marstran"}, "is_accepted": false, "score": 1, "last_activity_date": 1467883249, "last_edit_date": 1467883249, "creation_date": 1467881406, "answer_id": 38241175, "question_id": 38232767, "link": "https://stackoverflow.com/questions/38232767/kotlin-zipall-alternative/38241175#38241175", "title": "Kotlin zipAll alternative", "body": "<p>I made a quick tail-recursive version for fun. Not very efficient though, due to the list appends.</p>\n\n<pre><code>fun &lt;T, U&gt; List&lt;T&gt;.zipAll(that: List&lt;U&gt;, elem1: T, elem2: U): List&lt;Pair&lt;T, U&gt;&gt; {\n    tailrec fun helper(first: List&lt;T&gt;, second: List&lt;U&gt;, acc: List&lt;Pair&lt;T, U&gt;&gt;): List&lt;Pair&lt;T, U&gt;&gt; {\n        return when {\n            first.isEmpty() &amp;&amp; second.isEmpty() -&gt; acc\n            first.isEmpty() -&gt; helper(first, second.drop(1), acc + listOf(elem1 to second.first()))\n            second.isEmpty() -&gt; helper(first.drop(1), second, acc + listOf(first.first() to elem2))\n            else -&gt; helper(first.drop(1), second.drop(1), acc + listOf(first.first() to second.first()))\n        }\n    }\n\n    return helper(this, that, emptyList())\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "is_accepted": false, "score": 2, "last_activity_date": 1467910764, "last_edit_date": 1467910764, "creation_date": 1467910096, "answer_id": 38251078, "question_id": 38232767, "link": "https://stackoverflow.com/questions/38232767/kotlin-zipall-alternative/38251078#38251078", "title": "Kotlin zipAll alternative", "body": "<p>Here is <code>zipAll</code> for Kotlin:</p>\n\n<pre><code>fun &lt;T1: Any, T2: Any&gt; List&lt;T1&gt;.zipAll(other: List&lt;T2&gt;, emptyValue: T1, otherEmptyValue: T2): List&lt;Pair&lt;T1, T2&gt;&gt; {\n    val i1 = this.iterator()\n    val i2 = other.iterator()\n    return generateSequence {\n        if (i1.hasNext() || i2.hasNext()) {\n            Pair(if (i1.hasNext()) i1.next() else emptyValue,\n                    if (i2.hasNext()) i2.next() else otherEmptyValue)\n        } else {\n            null\n        }\n    }.toList()\n}\n</code></pre>\n\n<p>And a unit test:</p>\n\n<pre><code>@Test fun sumTwoUnevenLists() {\n    val x = listOf(1,2,3,4,5)\n    val y = listOf(10,20,30)\n\n    assertEquals(listOf(11,22,33,4,5), x.zipAll(y, 0, 0).map { it.first + it.second })\n}\n</code></pre>\n\n<p>And the same could be applied to arrays, other collection types, sequences, etc.  An array-only version would be easier since you can index into the arrays.  The array version could be:</p>\n\n<pre><code>fun &lt;T1: Any, T2: Any&gt; Array&lt;T1&gt;.zipAll(other: Array&lt;T2&gt;, emptyValue: T1, otherEmptyValue: T2): List&lt;Pair&lt;T1, T2&gt;&gt; {\n    val largest = this.size.coerceAtLeast(other.size)\n    val result = arrayListOf&lt;Pair&lt;T1, T2&gt;&gt;()\n    (0..this.size.coerceAtLeast(other.size)-1).forEach { i -&gt;\n        result.add(Pair(if (i &lt; this.size) this[i] else emptyValue, if (i &lt; other.size) other[i] else otherEmptyValue))\n    }\n    return result.filterNotNull()\n}\n</code></pre>\n\n<p>It returns a <code>List</code> because <code>map</code> function is going to turn you into a list anyway.  </p>\n"}], "owner": {"reputation": 57, "user_id": 1367702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef90e4b889d7e0263361ce63366e944c?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1367702/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 1, "accepted_answer_id": 38232888, "answer_count": 3, "score": 5, "last_activity_date": 1467910764, "creation_date": 1467835300, "question_id": 38232767, "link": "https://stackoverflow.com/questions/38232767/kotlin-zipall-alternative", "title": "Kotlin zipAll alternative", "body": "<p>Does Kotlin has function like zipAll in Scala?</p>\n\n<p>In scala I can do sum of two array with different length use zipAll function.</p>\n\n<p>Scala:</p>\n\n<pre><code>val arrA = Array(1,2,3)\nval arrB = Array(4, 5)\narrA.zipAll(arrB, 0, 0).map(x =&gt; x._1 + x._2)\n</code></pre>\n\n<p>Or what is the correct way to do this in Kotlin?</p>\n"}, {"tags": ["class", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467835871, "post_id": 38230754, "comment_id": 63887447, "body": "the code is not that bad ;)"}], "answers": [{"tags": [], "owner": {"reputation": 25812, "user_id": 288456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf294ff6d86cc587dec43e2af34a9532?s=128&d=identicon&r=PG", "display_name": "Alexander Udalov", "link": "https://stackoverflow.com/users/288456/alexander-udalov"}, "is_accepted": true, "score": 9, "last_activity_date": 1467828579, "creation_date": 1467828579, "answer_id": 38230890, "question_id": 38230754, "link": "https://stackoverflow.com/questions/38230754/get-class-reference-from-top-level-function-in-kotlin/38230890#38230890", "title": "Get class reference from top level function in kotlin", "body": "<p>You can declare a class, but an anonymous one using the <a href=\"http://kotlinlang.org/docs/reference/object-declarations.html#object-expressions\" rel=\"noreferrer\">object expression</a>, so that it won't be visible to the surrounding code:</p>\n\n<pre><code>val jarPath = object {}.javaClass.protectionDomain.codeSource.location.toURI().path\n</code></pre>\n"}], "owner": {"reputation": 823, "user_id": 3702728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nbzi4.png?s=128&g=1", "display_name": "succcubbus", "link": "https://stackoverflow.com/users/3702728/succcubbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1541, "favorite_count": 2, "closed_date": 1467866799, "accepted_answer_id": 38230890, "answer_count": 1, "score": 9, "last_activity_date": 1467828579, "creation_date": 1467828112, "question_id": 38230754, "link": "https://stackoverflow.com/questions/38230754/get-class-reference-from-top-level-function-in-kotlin", "closed_reason": "Duplicate", "title": "Get class reference from top level function in kotlin", "body": "<p>I wrote a short program which does not require any classes and in turn consits of top level functions only.</p>\n\n<p>To find your jar's location from java code you write</p>\n\n<pre><code>MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath()\n</code></pre>\n\n<p>But as I did not declare any classes in my kotlin code I don't know how to get a class reference.  </p>\n\n<p>My current implementation is this</p>\n\n<pre><code>class Ref\nval jarPath = Ref::class.java.protectionDomain.codeSource.location.toURI().path\n</code></pre>\n\n<p>which is obviously very bad code.</p>\n\n<p>So my question is, how do I obtain a class reference in kotlin without declaring any unneccesary classes.\nAny hints appreciated :)</p>\n"}, {"tags": ["c#", "sql", "linq", "expression-trees", "kotlin"], "comments": [{"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 2, "creation_date": 1467796919, "post_id": 38220379, "comment_id": 63863426, "body": "I have a suspicion that this question would be better asked on <a href=\"http://cs.stackexchange.com\">cs.stackexchange.com</a>"}, {"owner": {"reputation": 1453, "user_id": 2804610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m7Bke.jpg?s=128&g=1", "display_name": "EPadronU", "link": "https://stackoverflow.com/users/2804610/epadronu"}, "edited": false, "score": 0, "creation_date": 1467813465, "post_id": 38220379, "comment_id": 63873555, "body": "Out of curiosity, what&#39;s the benefit of something like LINQ over an ORM library like JOOQ? I must confess that I don&#39;t know LINQ (I&#39;ve never touched any MS technology) and my knowledge of JOOQ is kind of basic. Thanks in advance."}, {"owner": {"reputation": 2841, "user_id": 1307108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a3597ff7f20fe726589d2dbf56e3fb66?s=128&d=identicon&r=PG", "display_name": "Groostav", "link": "https://stackoverflow.com/users/1307108/groostav"}, "edited": false, "score": 0, "creation_date": 1467826915, "post_id": 38220379, "comment_id": 63882447, "body": "I think that question is synonymous with &#39;whats the advantage of LINQ over [insert pre-C#-3.0 ORM scheme here]&#39;. I&#39;m not really familiar with using those connectors <i>without</i> Linq, so I cant really answer that, but I bet there are a fair number of blog posts on the subject."}, {"owner": {"reputation": 2841, "user_id": 1307108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a3597ff7f20fe726589d2dbf56e3fb66?s=128&d=identicon&r=PG", "display_name": "Groostav", "link": "https://stackoverflow.com/users/1307108/groostav"}, "edited": false, "score": 0, "creation_date": 1467826964, "post_id": 38220379, "comment_id": 63882478, "body": "Worth mentioning: Dmitry Jemerov, who seems to be an integral part of Kotlin and works for JetBrains (though a title eludes me) said &quot;so as for the LINQ question, expression trees are something that has been brought up, but definitely not in 1.1 timeframe, and it\u2019s not clear when&quot;"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467827380, "post_id": 38220379, "comment_id": 63882743, "body": "I am partially interested in using Kotlin for that problem. I am not at all sure C#-2.0 has analogies of all features Kotlin 1.0 has"}], "answers": [{"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467798727, "post_id": 38220906, "comment_id": 63864519, "body": "I can build a DSL to express your last example using only kotlin api (no reflection, no code generation, no byte code tinkering)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467798832, "post_id": 38220906, "comment_id": 63864584, "body": "Correct me if I am wrong, but JOOQ uses code generation to convert a DB scheme into a static representation. In this question I assume it may be done by hand"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467798928, "post_id": 38220906, "comment_id": 63864643, "body": "@voddan Assuming <code>it</code> in the last example is of domain/model type <code>Customer</code>  how would you do that?"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467799481, "post_id": 38220906, "comment_id": 63864969, "body": "<code>it</code> is <code>Customer</code>, and <code>it.name</code> is its property of some type referencing <code>String</code>, but not <code>String</code> itself. Then <code>==</code> can be redefined on it"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467800342, "post_id": 38220906, "comment_id": 63865433, "body": "@voddan given <code>class Customer(var name:String)</code> how would that be possible? As I mentioned the expression trees allow you to write queries as if they were executed in memory using poko objects."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467800934, "post_id": 38220906, "comment_id": 63865778, "body": "I assume here that the data schema is defined in a special DSL, not POJOs. That&#39;s what ORM frameworks like Exposed do <a href=\"https://github.com/JetBrains/Exposed\" rel=\"nofollow noreferrer\">github.com/JetBrains/Exposed</a>"}, {"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467801137, "post_id": 38220906, "comment_id": 63865886, "body": "@voddan Yes, assuming there&#39;s a schema representation in code the expression trees seem less usable. However you&#39;ll then still have 2 worlds in query code: db world where schema classes querying is used, in memory world where kotlin collections functions are used."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467801489, "post_id": 38220906, "comment_id": 63866058, "body": "yes, and that&#39;s a good thing, because those situations have absolutely different different requirements and limitations. I specified that in the question"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 3, "last_activity_date": 1467800555, "last_edit_date": 1495541684, "creation_date": 1467798169, "answer_id": 38220906, "question_id": 38220379, "link": "https://stackoverflow.com/questions/38220379/benefits-of-linq-over-functional-method-chaines/38220906#38220906", "title": "Benefits of LINQ over functional method chaines", "body": "<h2>How good a query dsl can be without expression trees?</h2>\n\n<p>As <a href=\"http://www.jinq.org/\" rel=\"nofollow noreferrer\">JINQ</a> has shown you can get very far by analyzing the bytecode to understand the intent of developer and thus translate predicate to SQL. So in principle expression trees are not essential to build a great looking query dsl:</p>\n\n<pre><code>val alices = database.customerStream().where { it.name == \"Alice\" }\n</code></pre>\n\n<p>Even without a hackery such as bytecode analysis it's possible to get a decent query dsl with code generation. <a href=\"http://www.querydsl.com/\" rel=\"nofollow noreferrer\">Querydsl</a> and <a href=\"http://www.jooq.org/\" rel=\"nofollow noreferrer\">JOOQ</a> are great examples. With a little bit of Kotlin wrapping code you can then write</p>\n\n<pre><code>val alices = db.findAll(QCustomer.customer, { it.name.eq(\"Alice\") }) \n</code></pre>\n\n<h2>How do expression trees help building query dsl</h2>\n\n<p>Expression tree is a structure representing some code that resolves to a value. By having such structure generated by compiler one does not need bytecode analysis to understand what's the supposed to do. Given the example</p>\n\n<pre><code>val alices = database.customerStream().where { it.name == \"Alice\" }\n</code></pre>\n\n<p>The argument to <code>where</code> function would be an <em><code>expression</code></em> that we can inspect in runtime and translate it to SQL or other query language. Because the expression trees represent code you don't need to switch between Kotlin and SQL paradigm to write queries. The query code expressed using linq/jinq look pretty much the same regardless if they are executed in memory using POCO/POJO or in the database engine using its query language.  The compiler can also do more type checking. Furthermore it's very easy to replace the underlying database with in memory representation to make running tests much faster.</p>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10005948/what-are-expression-trees-and-how-do-you-use-them-and-why-would-you-use-them\">What are Expression Trees and how do you use them and why would you use them?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/403088/practical-use-of-expression-trees\">Practical use of expression trees</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467834427, "post_id": 38232442, "comment_id": 63886687, "body": "thanks for your input. I am not sure I follow your logic. Your answer contains several sections, I&#39;ll try to replay in order below"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467834546, "post_id": 38232442, "comment_id": 63886766, "body": "I don&#39;t have a working implementation yet, so I can&#39;t comment on the type safety. There are concerns that it is impossible to support all popular SQL operations with type safety, but I have to try to know for sure"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467834673, "post_id": 38232442, "comment_id": 63886837, "body": "In the implementation I have in mind (the most strait forward one?) it is impossible to mix up <code>eq</code> and <code>equals</code> since <code>eq</code> must return not a boolean, but a complex object, allowing the framework to generate SQL"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467834937, "post_id": 38232442, "comment_id": 63886982, "body": "I agree that LINQ is more straight forward in this field than any Kotlin since it looks a lot like SQL (that was the original idea). I don&#39;t think this is a definitive advantage because there are differences, so one can not solely rely on knowlage of SQL"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467835165, "post_id": 38232442, "comment_id": 63887095, "body": "In this question I do not want to discuss LINQ for local data-structures, because kotlin is much better in this respect thanks to the <code>inline</code> you&#39;ve mentioned. I don&#39;t see how inlining can possibly be used for SQL queries (which are the subject here)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 1, "creation_date": 1467835563, "post_id": 38232442, "comment_id": 63887313, "body": "This is off-topic, but recently there were several mocking frameworks emerging: mockito-kt, mockito-kotlin. Some recommend powermock"}], "tags": [], "owner": {"reputation": 2841, "user_id": 1307108, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a3597ff7f20fe726589d2dbf56e3fb66?s=128&d=identicon&r=PG", "display_name": "Groostav", "link": "https://stackoverflow.com/users/1307108/groostav"}, "is_accepted": false, "score": 2, "last_activity_date": 1467834066, "creation_date": 1467834066, "answer_id": 38232442, "question_id": 38220379, "link": "https://stackoverflow.com/questions/38220379/benefits-of-linq-over-functional-method-chaines/38232442#38232442", "title": "Benefits of LINQ over functional method chaines", "body": "<h1>JOOQ and Querydsl:</h1>\n\n<p>The typical solution to ORM has been to employ either a DSL or an embedded DSL from the application logic. While great advances have been made with these schemes, culminating in JOOQ and Querydsl, there are still many caveats to such a system:</p>\n\n<ul>\n<li>many of the paradigms the people writing these queries are used to (namely type safety) are either missing or different in key ways</li>\n<li>the exact semantics are non-obvious: in the previous answer it is suggested that we use an extension method <code>eq</code> to perform a db-native equality filter. It is highly probably that a new developer will mistakenly use <code>equals</code> instead of <code>eq</code>. </li>\n<li>this second point is compounded by the difficulty in testing: using a live connector with fake data is a nutoriously difficult problem, so depending on the testing procedure, the incorrect code <code>jooqDB.where { it.name.equals(\"alice\") }</code> may not be discovered until much further down the development pipeline. </li>\n</ul>\n\n<h1>Jinq</h1>\n\n<p>Jinq is not a first party data connector. While I think the importance of this is largely psychosomatic, it is important none the less. Many projects are going to use the tools suggested by the vendors, and all of the major DB providers have Java connectors, so it is likely that most developers will simply use them. </p>\n\n<p>While I have not used Jinq, it is my belief that another reason Jinq has not seen wide-spread adoption is largely because it's attempting to use a much tougher domain to solve the problem: building queries from AST's is much easier than building queries from byte code for the same reason that building the back-end of a compiler is easier than building a transcompiler. While I cannot help but tip my hat to the Jinq team for doing such an amazing job, I also cannot help but think they are hampered by their tools: building queries out of bytecode is hard. By definition, java bytecode is committed to running on the JVM, trying to retrofit that commitment for another interpreter is a very hard problem.</p>\n\n<p>My current work does not permit me to use a traditional database, but if I was to switch projects, knowing that I would need a great deal of data exposure in my DAL, I would likely retreat from Kotlin and Java back to .net, largely because of Linq, rather than investigate Jinq. \"Linq from Kotlin\" might well change my mind.</p>\n\n<h1>Support from DB vendors:</h1>\n\n<p>The LINQ-to-SQL and LINQ-to-mongo database connectors have seen wide-spread adoption in the .net community. This is because they are first party, high quality, and act in a reasonably straightforward manner: compiling an AST to SQL (or the mongo-query-language) is at least conceptually straight forward. Many of the traditional caveats of ORM's apply, but the vendors (Microsoft and Mongo) continue to address these problems.</p>\n\n<p>If Kotlin supported runtime code trees in a similar vein to Linq, and if Kotlin continues to gain traction at its current rate, then I believe the MongoDB and the Hibernate teams would be quick to start retrofitting their existing LINQ-to-X connectors to support Kotlin clients, and eventually even the bigger slower companies like Microsoft and IBM would begin to support the same flow. </p>\n\n<h1>Linq from Kotlin</h1>\n\n<p>What\u2019s more, the exact roles the Kotlin-unique concepts of a \"receiver type\" and the aggressive implementation of <code>inline</code> might play in the Linq space is interesting. Linq-from-Kotlin might well be more effective than LINQ-from-C#. </p>\n\n<p>where C# has</p>\n\n<pre><code>someInterface\n  .where(customer -&gt; customer.Name.StartsWith(\"A\") &amp;&amp; ComplexFunctionCallDoneByMongoDriver(customer))\n  .select(customer -&gt; new ResultObject(customer.Name, customer.Age, OtherContext()))\n</code></pre>\n\n<p>Kotlin might be able to make advances:</p>\n\n<pre><code>someInterface\n  .filter { it.name startsWith \"A\" &amp;&amp; inlinedComplexFunctionCallDoneOnDB(it) } \n  //inlined methods would have their AST exposed -&gt; can be run on the DB process instead of on the driver.\n  .map { ResultObject(name, age, otherContext()) } \n  //uses a reciever type, no need to specify \"customer -&gt;\"\n  //otherContext() might also be inlined\n</code></pre>\n\n<p>This is off the top of my head, I suspect that smarter brains than mine can put these tools to better use. </p>\n\n<h1>Other uses:</h1>\n\n<p>Its worth mentioning, the assumption made about the applications of runtime-code-AST's is false:</p>\n\n<blockquote>\n  <p>other [runtime AST problem domains] [are] already presumably covered by Kotlin syntax</p>\n</blockquote>\n\n<p>The reason I brought this up in the first place was because I was annoyed with Kotlin's null-safety feature and its interaction with <a href=\"http://mockito.org/\" rel=\"nofollow\">Mockito</a>: Having spent some time researching the issue, there is no Mocking framework designed for Kotlin, only java frameworks that <em>can be used</em> from Kotlin, with some pain.</p>\n\n<p>Some currently unsolved problems in both the java domain and the Kotlin domain:</p>\n\n<ul>\n<li>Mocking frameworks, as above. With access to the AST all of the clever but bizarre tricks around argument-operation-order employed by Mockito become obsolete. Other more traditional mocking frameworks gain a much more intuitive and type-safe front-end. </li>\n<li>binding expressions, for UI frameworks or otherwise, often devolve to strings. Consider a UI framework where developers could write <code>notifyOfUIElementChange { this.model.displayName }</code> instead of <code>notifyOfUIElementChange(\"model.displayName\")</code>. The latter suffers from the crippling problem of being stale if somebody renames the property. \n\n<ul>\n<li>I'm very excited to see what the ControlsFX guys or <a href=\"https://github.com/TomasMikula\" rel=\"nofollow\">Thomas Mikula</a> might do with a feature such as this.</li>\n</ul></li>\n<li>similar to Kotlin specific Linq: I suspect Kotlin\u2019s applications here might provide for a number of tools I'm not aware of. But I'm very confident that they do exist. </li>\n</ul>\n\n<hr>\n\n<p>I really like Linq, and I cannot help but think that with Kotlin's focus on industry problems, a Linq-from-Kotlin module would be a perfect fit and make a number of peoples lives, including mine, a fair bit easier. </p>\n"}], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 2, "closed_date": 1468099340, "answer_count": 2, "score": 4, "last_activity_date": 1467834066, "creation_date": 1467796631, "question_id": 38220379, "link": "https://stackoverflow.com/questions/38220379/benefits-of-linq-over-functional-method-chaines", "closed_reason": "Needs more focus", "title": "Benefits of LINQ over functional method chaines", "body": "<p>There was a discussion on Kotlin Slack about a possibility of adding code trees to support things like C# LINQ.</p>\n\n<p>In C# LINQ has many applications, but I want to focus on only one (because others a already presumably covered by Kotlin syntax): composing SQL queries to remote databases.</p>\n\n<p>Prerequisites: </p>\n\n<ul>\n<li><p>We have a data schema of an SQL database expressed somehow in the code so that static tools (or the type system) could check the correctness (at least the naming) of an SQL query </p></li>\n<li><p>We have to generate the queries as strings</p></li>\n<li><p>We want a syntax close to SQL or Java streams </p></li>\n</ul>\n\n<p><strong>Question</strong>: what do expression trees add to the syntax that is so crucial for the task at hand? How good an SQL builder can be without them?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": true, "score": 23, "last_activity_date": 1467759888, "creation_date": 1467759888, "answer_id": 38214178, "question_id": 38214115, "link": "https://stackoverflow.com/questions/38214115/using-underscore-right-after-a-variable-in-string-templates-in-kotlin/38214178#38214178", "title": "Using underscore (&quot;_&quot;) right after a variable in string templates in Kotlin", "body": "<p>Just wrap your expressions in curly braces:</p>\n\n<pre><code>var filename = \"ab_${type}_${date}.dat\"\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3621222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y1DlI.jpg?s=128&g=1", "display_name": "Armando Hoyos", "link": "https://stackoverflow.com/users/3621222/armando-hoyos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2009, "favorite_count": 0, "accepted_answer_id": 38214178, "answer_count": 1, "score": 12, "last_activity_date": 1468221667, "creation_date": 1467759446, "question_id": 38214115, "link": "https://stackoverflow.com/questions/38214115/using-underscore-right-after-a-variable-in-string-templates-in-kotlin", "title": "Using underscore (&quot;_&quot;) right after a variable in string templates in Kotlin", "body": "<p>In Kotlin, I'm trying to create a filename dynamically that includes a type and a date like this:</p>\n\n<pre><code>var filename = \"ab_$type_$date.dat\"\n</code></pre>\n\n<p>However, the second underscore in between the variables is causing a compile error:</p>\n\n<blockquote>\n  <p>Kotlin: Unresolved reference: name_</p>\n</blockquote>\n\n<p>I know I could concatenate the strings in the old fashion way:</p>\n\n<pre><code>var filename = \"ab_\" + type + \"_$date.dat\"\n</code></pre>\n\n<p>But I'm wondering if there is a different way to accomplish the same thing. Is there a way to escape special characters in string templates or any other way to get this to work?</p>\n"}, {"tags": ["android", "android-alertdialog", "kotlin"], "comments": [{"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "edited": false, "score": 0, "creation_date": 1467700097, "post_id": 38196439, "comment_id": 63817725, "body": "How many edit text&#39;s are there in our Alert dialog?"}, {"owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "reply_to_user": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "edited": false, "score": 0, "creation_date": 1467700148, "post_id": 38196439, "comment_id": 63817755, "body": "Only one, the <code>password</code>. It was also the only view that I added to the builder"}, {"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "edited": false, "score": 0, "creation_date": 1467700175, "post_id": 38196439, "comment_id": 63817774, "body": "try to place setPositiveButton() in the place of doSomethingFunction()."}, {"owner": {"reputation": 1183, "user_id": 2519138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NAWV0.png?s=128&g=1", "display_name": "Groco", "link": "https://stackoverflow.com/users/2519138/groco"}, "edited": false, "score": 0, "creation_date": 1467700379, "post_id": 38196439, "comment_id": 63817872, "body": "Try <code>Dialog.this.dismiss()</code>"}, {"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "edited": false, "score": 0, "creation_date": 1467700735, "post_id": 38196439, "comment_id": 63818046, "body": "is it working whitney?"}, {"owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "reply_to_user": {"reputation": 1183, "user_id": 2519138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NAWV0.png?s=128&g=1", "display_name": "Groco", "link": "https://stackoverflow.com/users/2519138/groco"}, "edited": false, "score": 0, "creation_date": 1467701684, "post_id": 38196439, "comment_id": 63818492, "body": "@Groco I tried your suggestion but both Dialog and AlertDialog had no object of <code>this</code> in kotlin."}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "edited": false, "score": 0, "creation_date": 1467700022, "post_id": 38196487, "comment_id": 63817698, "body": "I had tried it by there is no use. That was why I come here for an answer."}], "tags": [], "owner": {"reputation": 1061, "user_id": 1414741, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tNqft.jpg?s=128&g=1", "display_name": "Vijay Rajput", "link": "https://stackoverflow.com/users/1414741/vijay-rajput"}, "is_accepted": false, "score": 0, "last_activity_date": 1467699850, "creation_date": 1467699850, "answer_id": 38196487, "question_id": 38196439, "link": "https://stackoverflow.com/questions/38196439/how-to-dismiss-android-alert-dialog-itself-via-setoneditoractionlistener/38196487#38196487", "title": "How to dismiss android alert dialog itself via setOnEditorActionListener?", "body": "<p>Hi please dismiss dialog after call doSomthingFunction() .</p>\n"}, {"comments": [{"owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "edited": false, "score": 0, "creation_date": 1467701619, "post_id": 38196721, "comment_id": 63818464, "body": "Not very sure what you meant. I tried to replace <code>builder.setPositiveButton(&quot;confirm&quot;, { d, i -&gt; doSomethingFunction() })</code> in the original line <code>doSomethingFunction()</code> and nothing happend. I think the <code>setPositiveButton()</code> only did the setting, so the positive button remained unpushed at all."}, {"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "reply_to_user": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "edited": false, "score": 0, "creation_date": 1467702669, "post_id": 38196721, "comment_id": 63819007, "body": "so, create a button programmatically  and write your code when button is clicked, and hide that button, now place button.perform click in place of doSomethingFunction."}, {"owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "reply_to_user": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "edited": false, "score": 0, "creation_date": 1467702752, "post_id": 38196721, "comment_id": 63819052, "body": "it will help you... @whitney"}, {"owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "edited": false, "score": 0, "creation_date": 1468568902, "post_id": 38196721, "comment_id": 64190000, "body": "Thanks @Ram for inspiring me on solving the question. Finally I made some modification on the code, however the thought is quite similar."}], "tags": [], "owner": {"reputation": 2147, "user_id": 6422656, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/znJD6.jpg?s=128&g=1", "display_name": "Ram Koti", "link": "https://stackoverflow.com/users/6422656/ram-koti"}, "is_accepted": false, "score": 2, "last_activity_date": 1467700705, "creation_date": 1467700705, "answer_id": 38196721, "question_id": 38196439, "link": "https://stackoverflow.com/questions/38196439/how-to-dismiss-android-alert-dialog-itself-via-setoneditoractionlistener/38196721#38196721", "title": "How to dismiss android alert dialog itself via setOnEditorActionListener?", "body": "<p>try to place setPositiveButton() in the place of doSomethingFunction()</p>\n"}, {"tags": [], "owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "is_accepted": true, "score": 1, "last_activity_date": 1468568781, "creation_date": 1468568781, "answer_id": 38390615, "question_id": 38196439, "link": "https://stackoverflow.com/questions/38196439/how-to-dismiss-android-alert-dialog-itself-via-setoneditoractionlistener/38390615#38390615", "title": "How to dismiss android alert dialog itself via setOnEditorActionListener?", "body": "<p>Ram's comment inspired me. Since I've already defined the action when positive button is clicked, I just get the dialog from the builder on declaration, and then simply call <code>performClick()</code> on the positive button, and everything works fine.</p>\n\n<p>That is:</p>\n\n<pre><code>val dialog = builder.setView(password).setMessage(\"message\")\n            .setPositiveButton(\"confirm\", { doSomethingFunction() })\n            .setNegativeButton(\"cancel\", { dialog, i -&gt; }).show()\n\npassword.setOnEditorActionListener({\n    if(id == EditorInfo.IME_ACTION_GO) { v, id, event -&gt;\n        dialog.getButton(AlertDialog.BUTTON_POSITIVE).performClick()        \n    }\n    false\n}) \n</code></pre>\n"}], "owner": {"reputation": 523, "user_id": 4963585, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ryVZf.jpg?s=128&g=1", "display_name": "whitney13625", "link": "https://stackoverflow.com/users/4963585/whitney13625"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2404, "favorite_count": 0, "accepted_answer_id": 38390615, "answer_count": 3, "score": 0, "last_activity_date": 1520003732, "creation_date": 1467699633, "last_edit_date": 1467701972, "question_id": 38196439, "link": "https://stackoverflow.com/questions/38196439/how-to-dismiss-android-alert-dialog-itself-via-setoneditoractionlistener", "title": "How to dismiss android alert dialog itself via setOnEditorActionListener?", "body": "<p>There is an alert dialog which contains a password <code>EditText</code> and I'm trying to perform the action which is the same as pressing positive button after the keyboard RETURN button is pressed.</p>\n\n<p>In my MainActivity:</p>\n\n<pre><code>fun enterPwd() {\n    val builder = android.app.AlertDialog.Builder(this)\n    val password = EditText(this)\n\n    // some layout attributes about password are omitted\n\n    password.imeOptions = EditorInfo.IME_ACTION_GO\n    password.setOnEditorActionListener({\n        if(id == EditorInfo.IME_ACTION_GO) { v, id, event -&gt;\n            doSomthingFunction()\n        }\n        false\n    }) \n    builder.setView(password).setMessage(\"message\")\n                .setPositiveButton(\"confirm\", { doSomethingFunction() })\n                .setNegativeButton(\"cancel\", { dialog, i -&gt; }).show()\n}\n</code></pre>\n\n<p>In the latter doSomethingFunction() in <code>setPositiveButton</code>, the builder would dismiss automatically after the button is pressed. However in the previous one, the dialog is still there. I had tried to pass <code>dialog = builder.show()</code> and then dismiss by <code>dialog.dismiss()</code> right after <code>doSomethingFunction()</code> in the <code>setOnEditorActionListener</code> (appended as following) but it had no effect. How do I dismiss this dialog after the return key is pressed?</p>\n\n<pre><code>val dialog = builder.show()\npassword.setOnEditorActionListener({\n    if(id == EditorInfo.IME_ACTION_GO) { v, id, event -&gt;\n        doSomthingFunction()\n        dialog.dismiss()\n    }\n    false\n}) \n</code></pre>\n"}, {"tags": ["java", "rx-java", "reactive-programming", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1467701408, "post_id": 38196663, "comment_id": 63818355, "body": "oh gosh this is really bad, i just checked sources for operators, every single subscriber executes everything in the chain...  cache does not do what i look for, i dont want to store all emittions anywhere, i just want it to calculate and propogate to everyone instead of calculating for everyone :("}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1467701553, "post_id": 38196663, "comment_id": 63818433, "body": "i know this is asking for a favour but could you please copy and modify the OperatorMap (basic mapping operator) so that it invokes transformer only once... I just need to see what is the correct way to do this... if any"}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1467702417, "post_id": 38196663, "comment_id": 63818855, "body": "debugging into the workflow, it seems like i have wrong understanding how this works, original source observable has two observers so the devision comes right from the root, where i expected it to have one subscriber and this in its turn has other 2..."}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1467702723, "post_id": 38196663, "comment_id": 63819033, "body": "Is there other RX framework that does not work this way? this is designed to be this way... every single subscriber executes entire chain work for himself nothing is reused... very bad design imho, especially considering that RX intends that we use pure functions and immutable data... why do the same work for 100 subscribers if it should be done only once..."}, {"owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "edited": false, "score": 0, "creation_date": 1467707862, "post_id": 38196663, "comment_id": 63821866, "body": "Nice, i&#39;ll accept this as answer although i&#39;m sticking with my solution cos it will at least create less objects and does not look like a hack.   Also your solution is applicable to pure java cos you could use that and not break the chain, while mine only will work if you have awesomeness called &quot;extension functions&quot;... Thanks for answer :)"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 2, "last_activity_date": 1467705561, "last_edit_date": 1467705561, "creation_date": 1467700473, "answer_id": 38196663, "question_id": 38196397, "link": "https://stackoverflow.com/questions/38196397/observable-to-reuse-operator-executions/38196663#38196663", "title": "Observable to reuse operator executions", "body": "<p>You can use <a href=\"http://reactivex.io/RxJava/javadoc/rx/Observable.html#cache()\" rel=\"nofollow\"><code>cache</code></a> to cache the result of source observable to any future subscriber:</p>\n\n<pre><code>val stream = subject.map {\n    println(\"mapping\")\n    it * 2\n}.cache()\n</code></pre>\n\n<p>If you want a more subtle control over how things are cached the <a href=\"http://reactivex.io/RxJava/javadoc/rx/Observable.html#replay()\" rel=\"nofollow\"><code>replay</code></a> is worth looking into.</p>\n\n<p>If you do not want to cache each item of source observable but only <em>republish</em> new items you can use <a href=\"http://reactivex.io/RxJava/javadoc/rx/Observable.html#publish()\" rel=\"nofollow\"><code>publish</code></a> with <a href=\"http://reactivex.io/RxJava/javadoc/rx/observables/ConnectableObservable.html#autoConnect()\" rel=\"nofollow\"><code>autoConnect</code></a>:</p>\n\n<pre><code>val stream = subject.map {\n    println(\"mapping\")\n    it * 2\n}.publish()\n .autoConnect()\n</code></pre>\n\n<p>Which given the following sequence of events:</p>\n\n<pre><code>stream.forEach { println(\"A: $it\") }\nstream.forEach { println(\"B: $it\") }\n\nsubject.onNext(1)\n\nstream.forEach { println(\"C: $it\") }\nsubject.onNext(2)\nsubject.onCompleted()\n</code></pre>\n\n<p>Would print:</p>\n\n<pre><code>mapping\nA: 2\nB: 2\nmapping\nA: 4\nB: 4\nC: 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "is_accepted": false, "score": 1, "last_activity_date": 1467704357, "last_edit_date": 1467704357, "creation_date": 1467703882, "answer_id": 38197662, "question_id": 38196397, "link": "https://stackoverflow.com/questions/38196397/observable-to-reuse-operator-executions/38197662#38197662", "title": "Observable to reuse operator executions", "body": "<p>I've found the solution. In order to reuse the execution of the pipe, we must make sure that there is only one subscriber and this subscriber propagates all emissions from the end of the pipe to the entries of all subscribers... Which sounds a lot like Subject!</p>\n\n<p>If we just subscribe 100 times we will have 100 pipes starting from the very source observable, while in this case we have one pipe, which branches to 100 tiny pipes in the very end of it...</p>\n\n<pre><code>fun &lt;T&gt; Observable&lt;T&gt;.hub(): Observable&lt;T&gt; {\n    val hub = PublishSubject.create&lt;T&gt;()\n    this.subscribe(hub)\n    return hub\n}\n</code></pre>\n\n<p>now we can do this</p>\n\n<pre><code>val subject = PublishSubject.create&lt;Int&gt;()\n\nval stream = subject.map {\n    println(\"mapping\")\n    it * 2\n}\n\nval hub = stream.hub()\n\nhub.subscribe { println(\"A: $it\") }\nhub.subscribe { println(\"B: $it\") }\n\nsubject.onNext(1)\n\nsubject.onCompleted()\n</code></pre>\n\n<p>which will give this</p>\n\n<pre><code>mapping\nA: 2\nB: 2\n</code></pre>\n\n<p>problem solved!</p>\n"}], "owner": {"reputation": 8300, "user_id": 654799, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/S83OA.jpg?s=128&g=1", "display_name": "vach", "link": "https://stackoverflow.com/users/654799/vach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 38196663, "answer_count": 2, "score": 3, "last_activity_date": 1467705561, "creation_date": 1467699485, "question_id": 38196397, "link": "https://stackoverflow.com/questions/38196397/observable-to-reuse-operator-executions", "title": "Observable to reuse operator executions", "body": "<p>Given the following example (kotlin code)</p>\n\n<pre><code>val subject = PublishSubject.create&lt;Int&gt;()\n\nval stream = subject.map {\n    println(\"mapping\")\n    it * 2\n}\n\nstream.forEach { println(\"A: $it\") }\nstream.forEach { println(\"B: $it\") }\n\nsubject.onNext(1)\nsubject.onCompleted()\n</code></pre>\n\n<p>output will be </p>\n\n<pre><code>mapping\nA: 2\nmapping\nB: 2\n</code></pre>\n\n<p>what i want to achieve is that source observable is being mapped once and all the subscribers get the result, but not execute the mapping operation for each and every one of them...</p>\n\n<p>like this</p>\n\n<pre><code>mapping\nA: 2\nB: 2\n</code></pre>\n\n<p>In my case i have very expensive computation going on where latency and performance are critical, i have a hot observable as a source and lots of subscribers...</p>\n\n<p><strong>How do we reuse operator executions? and generally different mapping operations?</strong></p>\n"}, {"tags": ["eclipse", "kotlin"], "comments": [{"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1467737545, "post_id": 38192921, "comment_id": 63841545, "body": "Please try to modify and then save Kotlin source file. Also could you please check that there are some class files under &quot;Kotlin Runtime Library/kotlin_bin&quot; folder? (like on the screenshot: <a href=\"http://prnt.sc/bp5eym\" rel=\"nofollow noreferrer\">prnt.sc/bp5eym</a>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "reply_to_user": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1467793086, "post_id": 38192921, "comment_id": 63861347, "body": "Mikhail Zarechenskiy, thanks for answering back. I looked, and there are no class files under &quot;Kotlin Runtime Library/kotlin_bin here&#39;s a screenshot. <a href=\"http://prnt.sc/bpetrg\" rel=\"nofollow noreferrer\">prnt.sc/bpetrg</a> how do I fix this problem? I&#39;ve tried removing the plugin and adding the plugin back and configuring my build paths but still haven&#39;t had any luck. :( The project I am using is found here <a href=\"https://github.com/Vult-R/Astraeus-Java-Framework\" rel=\"nofollow noreferrer\">github.com/Vult-R/Astraeus-Java-Framework</a>"}, {"owner": {"reputation": 6474, "user_id": 270143, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tB6Fg.jpg?s=128&g=1", "display_name": "ycomp", "link": "https://stackoverflow.com/users/270143/ycomp"}, "edited": false, "score": 3, "creation_date": 1484376797, "post_id": 38192921, "comment_id": 70494259, "body": "how mature is the Kotlin support for Eclipse?"}, {"owner": {"reputation": 1571, "user_id": 4187837, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/797990d500303b57e9f9042f73ded007?s=128&d=identicon&r=PG&f=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/4187837/gavin"}, "edited": false, "score": 0, "creation_date": 1570349875, "post_id": 38192921, "comment_id": 102880170, "body": "Many years ago we found that netBeans was much better at handling Ruby than Eclipse, so perhaps using a different IDE might be  a solution, all be it for the short term"}], "answers": [{"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1529381654, "post_id": 38220148, "comment_id": 88840592, "body": "It seems Kotlin plugin does not (re)-generate .class files for .kt files unless we run one of the .kt files.  Is there a way to get around this issue?  In an existing Spring boot application, I was trying to add a new controller in Kotlin"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "is_accepted": false, "score": 15, "last_activity_date": 1497905080, "last_edit_date": 1497905080, "creation_date": 1467796008, "answer_id": 38220148, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/38220148#38220148", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<blockquote>\n  <p>Add Kotlin Nature fixes the issue. Click on your project and Configure\n  Kotlin -> Add Kotlin nature</p>\n</blockquote>\n\n<p>This partially fixes the issue, though eclipse plugin is still buggy and auto import function still doesn't work for me.</p>\n\n<p>If you're having any issue, make sure you have kotlin_bin folder added in your project. Also make sure that ALL kotlin files have the correct package name sometimes when you rename packages or move files around kotlin classes may not get updated.</p>\n"}, {"comments": [{"owner": {"reputation": 1068, "user_id": 2787584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zqi4K.jpg?s=128&g=1", "display_name": "aaiezza", "link": "https://stackoverflow.com/users/2787584/aaiezza"}, "edited": false, "score": 0, "creation_date": 1544554439, "post_id": 43318788, "comment_id": 94314867, "body": "As of eclipse photon, I don&#39;t actually see this as an option on my projects."}, {"owner": {"reputation": 2836, "user_id": 1259924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0cc57bb88e4314676b158471aa4d94bd?s=128&d=identicon&r=PG", "display_name": "Greg Brown", "link": "https://stackoverflow.com/users/1259924/greg-brown"}, "edited": false, "score": 0, "creation_date": 1553520825, "post_id": 43318788, "comment_id": 97403161, "body": "This does not resolve the problem for me. I have added the Kotlin nature and a single .kt file to my project. The Kotlin source editor works, but the .kt file is not compiled."}, {"owner": {"reputation": 2836, "user_id": 1259924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0cc57bb88e4314676b158471aa4d94bd?s=128&d=identicon&r=PG", "display_name": "Greg Brown", "link": "https://stackoverflow.com/users/1259924/greg-brown"}, "edited": false, "score": 1, "creation_date": 1553522716, "post_id": 43318788, "comment_id": 97404316, "body": "I was able to resolve the problem by adding the Kotlin nature and by adding a new class using New &gt; Other &gt; Kotlin &gt; Kotlin Class. Simply adding a *.kt file to my project did not work."}], "tags": [], "owner": {"reputation": 9, "user_id": 2718311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5d435798b5c6681b929abfc53ce6a6?s=128&d=identicon&r=PG&f=1", "display_name": "user2718311", "link": "https://stackoverflow.com/users/2718311/user2718311"}, "is_accepted": false, "score": 0, "last_activity_date": 1491814541, "creation_date": 1491814541, "answer_id": 43318788, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/43318788#43318788", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>Add Kotlin Nature fixes the issue. Click on your project and Configure Kotlin -> Add Kotlin nature</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 4702558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adf5a16fb3f0f622db8ba7f4556ba7bb?s=128&d=identicon&r=PG", "display_name": "Suula", "link": "https://stackoverflow.com/users/4702558/suula"}, "is_accepted": false, "score": 0, "last_activity_date": 1542213902, "creation_date": 1542213902, "answer_id": 53305036, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/53305036#53305036", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>Got similar issue solved by adding a new Kotlin file to a Kotlin/Java mixed project. Adding the file caused Eclipse 2018-09 (4.9.0) to add kotlin-stdlib.jar and kotlin-reflect.jar to classpath and everything started working.</p>\n"}, {"tags": [], "owner": {"reputation": 10175, "user_id": 196032, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b75136316e93a66545dd346297fad09e?s=128&d=identicon&r=PG", "display_name": "Alex R", "link": "https://stackoverflow.com/users/196032/alex-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1570064685, "creation_date": 1570064685, "answer_id": 58211122, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/58211122#58211122", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>As of the current Eclipse version (2019-09):</p>\n\n<p>You can't add Kotlin to a Java project, <strong>but you can add Java to a Kotlin project</strong>.</p>\n\n<p>The procedure to accomplish a mixed Kotlin/Java project was roughly:</p>\n\n<ol>\n<li>Install Kotlin plug-in</li>\n<li>Create empty Kotlin project</li>\n<li>Move the Java code into the Kotlin project</li>\n<li>Delete the original project</li>\n<li>Fix project references</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9719421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-arXqjIgqPGI/AAAAAAAAAAI/AAAAAAAAAFE/A_yib1OtWOM/photo.jpg?sz=128", "display_name": "Nicolas Vezzali  Dussio", "link": "https://stackoverflow.com/users/9719421/nicolas-vezzali-dussio"}, "is_accepted": false, "score": 0, "last_activity_date": 1604507462, "last_edit_date": 1604507462, "creation_date": 1604416577, "answer_id": 64665588, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/64665588#64665588", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>I'm working on a project with Spring Boot and Kotlin (some controllers/mappers/classes in Java and others in Kotlin) and after trying a lot of approaches, the only that worked was to use Eclipse 03-2020 and Kotlin Plugin for Eclipse V0.8.19.</p>\n<p><a href=\"https://dl.bintray.com/jetbrains/kotlin/eclipse-plugin/0.8.19/\" rel=\"nofollow noreferrer\">https://dl.bintray.com/jetbrains/kotlin/eclipse-plugin/0.8.19/</a></p>\n<ul>\n<li>Before everything, close your project and uninstall the previous version of Kotlin Plugin for Eclipse.</li>\n<li>Go to Help/Install New Software.</li>\n<li>Copy the link of Eclipse Plugin and continue with the installation (do not forget to check all the options to install).</li>\n<li>After the installation restart the IDE and try compile again.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1069, "user_id": 2787699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a497232ae63e75c3ecf31a12fd9f8316?s=128&d=identicon&r=PG&f=1", "display_name": "laloumen", "link": "https://stackoverflow.com/users/2787699/laloumen"}, "is_accepted": false, "score": 0, "last_activity_date": 1613277107, "creation_date": 1613277107, "answer_id": 66192479, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide/66192479#66192479", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>If your project was like mine, it has .kt files in /src/main/kotlin, some missing references in Java. I tried compiling them but nothing worked. It turns out that my project didn't have an Eclipse Source Folder associated with the kotlin code. There were the usual ones for &quot;src/main/java&quot;, &quot;src/main/resources&quot; but not one for &quot;src/main/kotlin&quot;.</p>\n<p>So, I created a source folder for the kotlin files.</p>\n<ol>\n<li>Right click the project</li>\n<li>New &quot;Source Folder&quot;</li>\n<li>Specify folder name: &quot;/src/main/kotlin&quot;</li>\n</ol>\n<p>This doesn't create anything in the file system but just creates a logical container for Eclipse to work with the contents. In this case, Eclipse recognized the .kt files, compiled them and all the missing references issues all cleared up.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7937, "favorite_count": 5, "answer_count": 6, "score": 18, "last_activity_date": 1613277107, "creation_date": 1467671190, "last_edit_date": 1467671930, "question_id": 38192921, "link": "https://stackoverflow.com/questions/38192921/kotlin-and-java-in-the-same-project-using-eclipse-ide", "title": "Kotlin And Java In The Same Project Using Eclipse IDE", "body": "<p>I posted a similar question regarding gradle but this question is without gradle or maven.</p>\n\n<p>I can not get Kotlin working properly using Eclipse IDE. This works great using IntelliJ, however many developers still use Eclipse. I have installed the Kotlin Eclipse plugin and does not work. I have downloaded the Kotlin standard library and runtime library and added them into the project. Still not working. All I get in eclipse when I have Java and Kotlin is cannot be resolve to a specified type.</p>\n\n<p>I'm not using maven or gradle because I couldn't get it working with those two either.</p>\n\n<p>If I mix Java and Kotlin in the same source folder I get this error.\n\"The type error.NonExistentClass cannot be resolved. It is indirectly referenced from required .class files\"</p>\n\n<p>I'm using Eclipse Neon. If anyone can help me that would be awesome, I've been trying for quite some time now and not getting anywhere. :(</p>\n\n<p><a href=\"https://i.stack.imgur.com/NpgJq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NpgJq.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "android-studio", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467625284, "post_id": 38180559, "comment_id": 63789212, "body": "Do you have the kotlin plugin installed/activated?"}, {"owner": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467628315, "post_id": 38180559, "comment_id": 63791117, "body": "@voddan yes I have. I tried many versions, including the latest. No use."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467629586, "post_id": 38180559, "comment_id": 63791792, "body": "Are you able to create a Kotlin project from project templates, using the last stable AS and Kotlin plugin? Does it run?"}, {"owner": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467632120, "post_id": 38180559, "comment_id": 63793256, "body": "@voddan No I created a Android project. I tried to add a kotlin file and failed."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467633826, "post_id": 38180559, "comment_id": 63794298, "body": "I understand. Are you able to perform the action above, ei create a new Kotlin project and run it?"}, {"owner": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467687062, "post_id": 38180559, "comment_id": 63814168, "body": "@voddan problem solved. Thanks for your help."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "edited": false, "score": 0, "creation_date": 1467687042, "post_id": 38185935, "comment_id": 63814161, "body": "You are right. My *.kt extension is registered under java class type. After I created the type Kotlin and add *.kt &amp; *.kts extension under it, problem solved. Thanks a lot!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467698365, "post_id": 38185935, "comment_id": 63816974, "body": "This seems to be a common cause for problems. Is it going to be fixed soon?"}, {"owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "reply_to_user": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "edited": false, "score": 0, "creation_date": 1467706450, "post_id": 38185935, "comment_id": 63821024, "body": "@Cheng You don&#39;t need to create the Kotlin type. The type is there when the plugin is installed. If you created your own file type, you will be able to edit the files, but no other features such as code navigation and refactorings will work."}], "tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 6, "last_activity_date": 1467638814, "creation_date": 1467638814, "answer_id": 38185935, "question_id": 38180559, "link": "https://stackoverflow.com/questions/38180559/kotlin-not-working-on-android-studio/38185935#38185935", "title": "Kotlin not working on Android Studio", "body": "<p>Please make sure that the .kt extension is associated with the Kotlin files in Settings | Editor | File Types.</p>\n\n<p>Also note that the reason why \"Kotlin Extensions for Android (obsolete)\" has the \"obsolete\" word in its name is specifically to let you know that you should not install that plugin.</p>\n"}], "owner": {"reputation": 73, "user_id": 5058310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b0d7eb801bfc4354bdabcf6b36e5a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Cheng", "link": "https://stackoverflow.com/users/5058310/cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3518, "favorite_count": 0, "accepted_answer_id": 38185935, "answer_count": 1, "score": 1, "last_activity_date": 1467638814, "creation_date": 1467622619, "last_edit_date": 1467622806, "question_id": 38180559, "link": "https://stackoverflow.com/questions/38180559/kotlin-not-working-on-android-studio", "title": "Kotlin not working on Android Studio", "body": "<ol>\n<li><p>All kotlin files can't be displayed on my Android Studio. Even when you directly convert java files into koltin, you can edit it, but it doesn't appear on the project file tree. Also the IDE suggests that it's a decompiled .class file.</p></li>\n<li><p>I can't create Kotlin files. When I do, it shows a dialog that says </p></li>\n</ol>\n\n<blockquote>\n  <p>Cannot Create File / unable o parse template \"Kotlin File\" Error message: Cannot create class-file</p>\n</blockquote>\n\n<ol start=\"3\">\n<li>The plugin \"Kotlin Extensions For Android(obsolete) can't be installed properly. I can click install, but it doesn't work.</li>\n</ol>\n\n<p>My Android Studio Version 2.1.2</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467617376, "post_id": 38178188, "comment_id": 63785063, "body": "You can use a stand alone object for constants, not necessarily a companion ;)"}], "answers": [{"tags": [], "owner": {"reputation": 110088, "user_id": 2196460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mAcQx.png?s=128&g=1", "display_name": "hotkey", "link": "https://stackoverflow.com/users/2196460/hotkey"}, "is_accepted": true, "score": 12, "last_activity_date": 1467617789, "last_edit_date": 1592644375, "creation_date": 1467615939, "answer_id": 38178704, "question_id": 38178188, "link": "https://stackoverflow.com/questions/38178188/is-a-instance-val-more-costly-then-companion-object-val/38178704#38178704", "title": "Is a instance val more costly then companion object val?", "body": "<p>Yes, a <code>val</code> stored in <code>companion object</code> is more efficient. You can use <a href=\"https://stackoverflow.com/questions/35538049/kotlin-bytecode\">Kotlin bytecode viewer</a> to find out what these options are compiled to.</p>\n<p>Here are the things I noticed that might affect performance:</p>\n<ul>\n<li><p>Companion object <code>val</code> is stored only once, unlike instance <code>val</code>, which is actually stored in each instance thus increasing the instances memory footprint (<code>String</code> literal <a href=\"https://stackoverflow.com/questions/14150628/string-constant-pool-java\">is stored in constant pool</a>, but an instance will have a reference to it) and instance creation time (during the construction, a field must be filled in).</p>\n</li>\n<li><p>Accessing companion object <code>val</code> several times in a row works better with CPU cache than using <code>val</code> in different instances: it has better <a href=\"https://www.wikiwand.com/en/Locality_of_reference\" rel=\"noreferrer\">locality of reference</a>. Dereferencing different instances to access the <code>val</code> in them will likely lead to CPU cache misses, which is not good for performance.</p>\n<p>However, if the <code>val</code> is only used inside instance methods of the same class, the described effect will scarcely affect performance because the methods will likely dereference <code>this</code> anyway, and this may even work better, not causing probable cache miss while accessing the companion object.</p>\n</li>\n<li><p>Adding <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-static/\" rel=\"noreferrer\"><code>@JvmStatic</code></a> makes the access a bit faster. Without it, accessing the value requires getting static <code>Companion</code> reference and calling <code>getSOME_CONST()</code> on it. With <code>@JvmStatic</code>, there will be static method <code>getSOME_CONST()</code> (skipping <code>Companion</code>). There's also <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.jvm/-jvm-field/\" rel=\"noreferrer\"><code>@JvmField</code></a> that makes a public field that can be accessed directly without even calling getter.</p>\n<p>But JIT compiler will likely optimize the getter access of the first two cases, so that the effect of the annotations will be barely noticeable.</p>\n</li>\n</ul>\n<p>Also, apart from performance, instance <code>val</code> has semantics of a value that might be different for each instance, so <code>companion object</code> seems to fit the case of global constant value better.</p>\n"}], "owner": {"reputation": 5483, "user_id": 1356130, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71a884fac9d80ee3171a4018b1eaf660?s=128&d=identicon&r=PG", "display_name": "atok", "link": "https://stackoverflow.com/users/1356130/atok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 38178704, "answer_count": 1, "score": 7, "last_activity_date": 1467617789, "creation_date": 1467614042, "question_id": 38178188, "link": "https://stackoverflow.com/questions/38178188/is-a-instance-val-more-costly-then-companion-object-val", "title": "Is a instance val more costly then companion object val?", "body": "<p>Is there a good reason (performance-wise) to replace a:</p>\n\n<p><code>val SOME_CONST = \"value\"</code></p>\n\n<p>with </p>\n\n<pre><code>companion object {\n    val SOME_CONST = \"value\"\n}\n</code></pre>\n\n<p>Does adding a <code>@JvmStatic</code> annotation changes the outcome?</p>\n"}, {"tags": ["android", "kotlin", "android-espresso", "dagger-2"], "comments": [{"owner": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1467612355, "post_id": 38177159, "comment_id": 63782680, "body": "I&#39;ve faced this type of problem myself, and I think it&#39;s connected to the <code>internal</code> visibility on your methods. If you make them public, the issue may be resolved. But I&#39;m also quite interested in knowing what&#39;s the root cause."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "reply_to_user": {"reputation": 13934, "user_id": 4096987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b66edfbc16fa01f3f45d764a3fa01bb?s=128&d=identicon&r=PG&f=1", "display_name": "AndroidEx", "link": "https://stackoverflow.com/users/4096987/androidex"}, "edited": false, "score": 0, "creation_date": 1467778646, "post_id": 38177159, "comment_id": 63855823, "body": "Thanks @AndroidEx! That solve the problem. Ya, hopefully someone from Dagger could provide the insight."}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1467607991, "creation_date": 1467607991, "question_id": 38177159, "link": "https://stackoverflow.com/questions/38177159/upgrade-kotlin-from-1-0-2-1-0-3-java-lang-nosuchmethoderror-no-virtual-metho", "title": "Upgrade Kotlin from 1.0.2 - 1.0.3: java.lang.NoSuchMethodError: No virtual method provideInjectedData$app_compileDebugKotlin()", "body": "<p>I have a Kotlin Espresso Dagger2 small project. Works well when I use Kotlin 1.0.2. After migrated to Kotlin 1.0.3, when running the Espresso instrumental test (on MainActivityTest), it error as above.</p>\n\n<p>My Dagger2 TestModule is as below</p>\n\n<pre><code>@Module\nopen class ApplicationTestModule(protected val mApplication: Application) {\n\n    @Provides\n    internal fun provideApplication(): Application {\n        return mApplication\n    }\n\n    @Provides\n    @Singleton\n    internal fun provideInjectedData(): InjectedData {\n        return mock(InjectedData::class.java)\n    }\n}\n</code></pre>\n\n<p>The dagger2 generated ApplicationTestModule for the InjectedData is as below</p>\n\n<pre><code>package com.elyeproj.kotlinespressomock;\n\nimport dagger.internal.Factory;\nimport dagger.internal.Preconditions;\nimport javax.annotation.Generated;\n\n@Generated(\n  value = \"dagger.internal.codegen.ComponentProcessor\",\n  comments = \"https://google.github.io/dagger\"\n)\npublic final class ApplicationTestModule_ProvideInjectedData$app_compileDebugKotlinFactory\n    implements Factory&lt;InjectedData&gt; {\n  private final ApplicationTestModule module;\n\n  public ApplicationTestModule_ProvideInjectedData$app_compileDebugKotlinFactory(\n      ApplicationTestModule module) {\n    assert module != null;\n    this.module = module;\n  }\n\n  @Override\n  public InjectedData get() {\n    return Preconditions.checkNotNull(\n        module.provideInjectedData$app_compileDebugKotlin(),\n        \"Cannot return null from a non-@Nullable @Provides method\");\n  }\n\n  public static Factory&lt;InjectedData&gt; create(ApplicationTestModule module) {\n    return new ApplicationTestModule_ProvideInjectedData$app_compileDebugKotlinFactory(module);\n  }\n}\n</code></pre>\n\n<p>Where the <code>provideInjectedData$app_compileDebugKotlin()</code> is Cannot Resolve by AndroidStudio. The test run fails.</p>\n\n<p>I reverify that when using Kotlin 1.0.2 (1.0.1-2), the above function also exist also Cannot Resolve by AndroidStudio. But the test still run.</p>\n\n<p>Is this a Kotlin or Dagger issue? How could I resolve this?</p>\n\n<p>To duplicate the problem, the code could be found in <a href=\"https://github.com/elye/kotlinespressomock\" rel=\"nofollow\">https://github.com/elye/kotlinespressomock</a>. Just change the <code>ext.KOTLIN_VERSION = '1.0.1-2'</code> to <code>ext.KOTLIN_VERSION = '1.0.3'</code> and run the <code>MainActivityTest</code> in AndroidTest.</p>\n"}, {"tags": ["integer", "hex", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1601668452, "post_id": 38177864, "comment_id": 113487670, "body": "Those github links are broken. :/"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 12, "last_activity_date": 1601877336, "last_edit_date": 1601877336, "creation_date": 1467612386, "answer_id": 38177864, "question_id": 38175798, "link": "https://stackoverflow.com/questions/38175798/write-a-hexadecimal-integer-literal-equal-to-int-min-value-in-kotlin/38177864#38177864", "title": "write a hexadecimal integer literal equal to Int.MIN_VALUE in Kotlin", "body": "<p><a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/\" rel=\"nofollow noreferrer\"><code>Int</code></a> represents a 32-bit signed integer. 32 bits means 8 hex digits:</p>\n<p><code>___7    F    F    F    F    F    F    F</code></p>\n<p><code>0111 1111 1111 1111 1111 1111 1111 1111</code></p>\n<p>As you can see the left-most bit is 0 thus this is a positive integral in a 32 bit representation. By <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">2's complement</a> definition and example the minimal 32-bit negative value will have <code>1</code> at left-most bit followed by <code>0</code>:</p>\n<p><code>1000 0000 0000 0000 0000 0000 0000 0000</code></p>\n<p><code>___8    0    0    0    0    0    0    0</code></p>\n<p>that is <code>0x80000000</code>.</p>\n<p>In Kotlin you need to prepend the <code>-</code> sign to denote negative <code>Int</code> which is not true in Java. Consider following example</p>\n<pre><code>println(0x7FFFFFFF) // -&gt; prints 2147483647 (Integer.MAX_VALUE)\nprintln(-0x80000000) // -&gt; prints -2147483648 (Integer.MIN_VALUE)\nprintln(0x80000000) // -&gt; prints 2147483648 (does not fit into Int)\n</code></pre>\n<p>It's not the same as in Java:</p>\n<pre><code>System.out.println(0x7FFFFFFF); // -&gt; prints 2147483647 (Integer.MAX_VALUE)\nSystem.out.println(-0x80000000); // -&gt; prints -2147483648 (Integer.MIN_VALUE)\nSystem.out.println(0x80000000); // -&gt; prints -2147483648 (Integer.MIN_VALUE)\n</code></pre>\n<p>This is in line with <a href=\"https://github.com/Kotlin/kotlin-spec/blob/release/docs/src/md/kotlin.core/expressions.md#decimal-integer-literals\" rel=\"nofollow noreferrer\">Kotlin spec</a> although the overflow behavior of <a href=\"https://github.com/Kotlin/kotlin-spec/blob/release/docs/src/md/kotlin.core/expressions.md#hexadecimal-integer-literals\" rel=\"nofollow noreferrer\">hexadecimal literals is yet to be defined</a>.</p>\n<p>Further reading:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/319199/why-is-java-able-to-store-0xff000000-as-an-int\">Why is Java able to store 0xff000000 as an int?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5436, "user_id": 3161139, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/EePWR.jpg?s=128&g=1", "display_name": "Antonin GAVREL", "link": "https://stackoverflow.com/users/3161139/antonin-gavrel"}, "is_accepted": false, "score": 0, "last_activity_date": 1615233054, "creation_date": 1615233054, "answer_id": 66536231, "question_id": 38175798, "link": "https://stackoverflow.com/questions/38175798/write-a-hexadecimal-integer-literal-equal-to-int-min-value-in-kotlin/66536231#66536231", "title": "write a hexadecimal integer literal equal to Int.MIN_VALUE in Kotlin", "body": "<p>If you just want INT_MIN value and you are talking about a 4 bytes integer, and since no one has mentioned it before, you can just write:</p>\n<pre><code>println(0x7FFFFFFF.inv()) \n</code></pre>\n<p>The neg operand <code>~</code> (.inv()) will automatically switch bits from 1 to 0 (which is what happens when you <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">overflow</a>).</p>\n"}], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6409, "favorite_count": 4, "accepted_answer_id": 38177864, "answer_count": 2, "score": 12, "last_activity_date": 1615233054, "creation_date": 1467595340, "question_id": 38175798, "link": "https://stackoverflow.com/questions/38175798/write-a-hexadecimal-integer-literal-equal-to-int-min-value-in-kotlin", "title": "write a hexadecimal integer literal equal to Int.MIN_VALUE in Kotlin", "body": "<p>how does one write a hexadecimal integer literal that is equal to <code>Int.MIN_VALUE</code> (which is <code>-2147483648</code> in decimal) in Kotlin?</p>\n\n<p>AFAIK, an Int is 4 bytes...and sometimes it seems like <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"noreferrer\">2's complement</a> is used to represent integers...but I'm not sure. I've tried the following hex literals to help myself understand the system:</p>\n\n<ul>\n<li><code>0xFFFFFFFF</code> but this is a <code>Long</code>, not an <code>Int</code></li>\n<li><code>0xFFFFFFFF.toInt()</code> which is -1</li>\n<li><code>-0xFFFFFFFF.toInt()</code> which is 1</li>\n<li><code>0x7FFFFFFF</code> which is 2147483647 which is <code>Int.MAX_VALUE</code></li>\n<li><code>-0x7FFFFFFF</code> which is -2147483647 which is <code>Int.MIN_VALUE+1</code></li>\n<li><code>0xFFFFFFF</code> which is 268435455 in decimal</li>\n<li><code>0x0FFFFFFF</code> which is also 268435455 in decimal</li>\n</ul>\n\n<p>But I can't figure out what hexadecimal integer literal can be used to represent <code>Int.MIN_VALUE</code>.</p>\n\n<p>I hope the answer doesn't make me feel stupid...</p>\n"}, {"tags": ["android", "kotlin"], "comments": [{"owner": {"reputation": 35715, "user_id": 2850651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ooWVw.jpg?s=128&g=1", "display_name": "Mike M.", "link": "https://stackoverflow.com/users/2850651/mike-m"}, "edited": false, "score": 6, "creation_date": 1467581981, "post_id": 38174443, "comment_id": 63776419, "body": "You want the <code>onCreate()</code> overload with just the one <code>Bundle</code> parameter. No <code>PersistableBundle</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11620, "user_id": 2898715, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LWv1Z.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/2898715/eric"}, "is_accepted": true, "score": 9, "last_activity_date": 1467583172, "last_edit_date": 1467583172, "creation_date": 1467582060, "answer_id": 38174586, "question_id": 38174443, "link": "https://stackoverflow.com/questions/38174443/oncreate-in-abstract-parent-activity-no-called-in-kotlin/38174586#38174586", "title": "onCreate in abstract parent activity no called in kotlin", "body": "<p>there seems to be two solutions:</p>\n\n<ol>\n<li><p>maybe the <code>onCreate</code> you actually want to override in <code>MapActivity</code> has the signature <a href=\"https://developer.android.com/reference/android/support/v7/app/AppCompatActivity.html#onCreate(android.os.Bundle)\" rel=\"noreferrer\"><code>onCreate(android.os.Bundle)</code></a>:</p>\n\n<pre><code>abstract class MapActivity: AppCompatActivity(), OnMapReadyCallback {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(getView())\n        initializeMap()\n        Log.d(\"MapActivity\", \"InitializeMap\")\n    }\n}\n</code></pre></li>\n<li><p>the documentation of the <a href=\"https://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle,%20android.os.PersistableBundle)\" rel=\"noreferrer\"><code>onCreate(android.os.Bundle, android.os.PersistableBundle)</code></a> method that is being overridden in <code>MapActivity</code> suggests that <code>persistableMode</code> for the activity in the <code>AndroidManifest.xml</code> needs to be set to <code>persistAcrossReboots</code> for it to be called...but <code>MapActivity</code> is abstract, so you would need to set the attribute for its subclasses instead. in this case that would be <code>RecordingActivity</code>.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest&gt;\n    ...\n    &lt;application&gt;\n        ...\n        &lt;activity\n            android:name=\".RecordingActivity\"\n            android:persistableMode=\"persistAcrossReboots\"/&gt;\n        ...\n    &lt;/application&gt;\n    ...\n&lt;/manifest&gt;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1888, "favorite_count": 1, "accepted_answer_id": 38174586, "answer_count": 1, "score": 4, "last_activity_date": 1569959515, "creation_date": 1467580899, "last_edit_date": 1569959515, "question_id": 38174443, "link": "https://stackoverflow.com/questions/38174443/oncreate-in-abstract-parent-activity-no-called-in-kotlin", "title": "onCreate in abstract parent activity no called in kotlin", "body": "<p>I declared a child of MapActivity:</p>\n\n<pre><code>class RecordingActivity : MapActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        Log.d(\"RecirdingActivity\", \"InitializeMap\") //called\n    }\n\n    override fun getView(): Int {\n        return R.layout.activity_recording\n    }\n}\n</code></pre>\n\n<p>I make a call to start this activity from my main activity:</p>\n\n<pre><code>fab.setOnClickListener {\n            Log.d(\"MainActivity\", \"fabClick\") //called\n            startActivity(intentFor&lt;RecordingActivity&gt;())\n        }\n</code></pre>\n\n<p>and I have the abstract activity:</p>\n\n<pre><code>abstract class MapActivity: AppCompatActivity(), OnMapReadyCallback {\n\n    override fun onCreate(savedInstanceState: Bundle?, persistentState: PersistableBundle?) {\n        super.onCreate(savedInstanceState, persistentState)\n        setContentView(getView())\n        initializeMap()\n        Log.d(\"MapActivity\", \"InitializeMap\")//not called\n    }\n}\n</code></pre>\n\n<p>and <strong>onCreate method of this activity is never called</strong></p>\n\n<p>I traced it with a debugger and I had the same result.\nWhat am I doing wrong?</p>\n"}, {"tags": ["kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 2, "creation_date": 1467549106, "post_id": 38169933, "comment_id": 63766803, "body": "I asked the same question in Slack a long time ago, and AFAIR, there is no solution other than making it an expression returning something. But IntelliJ should emit a warning if you forget a clause, though (my question was for an enum, not a sealed class, but it should be the same)."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 1, "creation_date": 1467549709, "post_id": 38169933, "comment_id": 63766985, "body": "Hmm, yes. I have noticed I can make it return <code>Any?</code>, and force a return value, but it still feels a bit hacky."}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467551891, "post_id": 38169933, "comment_id": 63767578, "body": "My preferred is the run block. It&#39;s readable, doesn&#39;t change the return type of the function from Unit to Any?, and isn&#39;t more or less forgettable than adding a return or an Any? return type."}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467552565, "post_id": 38169933, "comment_id": 63767806, "body": "Hmm, true. Hower I am looking to be safe for the client&#39;s sake. The client can still forget to use <code>run</code>. I have expanded the question a little with an example."}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467581219, "post_id": 38169933, "comment_id": 63776258, "body": "Isn&#39;t worrying about a client is a little bit too much? He/she can always skip checking branches if wants to"}, {"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 0, "creation_date": 1467616017, "post_id": 38169933, "comment_id": 63784328, "body": "Yes they can, but if they do that, they <i>explicitely</i> opt out. Forgetting is a whole other thing than opting out."}], "answers": [{"comments": [{"owner": {"reputation": 1666, "user_id": 6007104, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bc074e0985a2e9388569b5d030bbda19?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/6007104/luke"}, "edited": false, "score": 0, "creation_date": 1592587237, "post_id": 38171374, "comment_id": 110489001, "body": "If you don&#39;t actually need the return value, I find it good practise to use a dedicated &#39;throwaway&#39; variable name to indicate that you&#39;re only using it to enforce an exhaustive <code>when</code>. This way you give it semantic meaning, for example: <code>val exhaustive = when(...)</code>"}], "tags": [], "owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "is_accepted": false, "score": 26, "last_activity_date": 1467639076, "last_edit_date": 1467639076, "creation_date": 1467559174, "answer_id": 38171374, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/38171374#38171374", "title": "Force compilation error with sealed classes", "body": "<p>The way to enforce exhaustive <code>when</code> is to make it an expression by using its value:</p>\n\n<pre><code>sealed class SealedClass {\n    class First : SealedClass()\n    class Second : SealedClass()\n    class Third : SealedClass()\n}\n\nfun test(sealedClass: SealedClass) {\n    val x = when (sealedClass) {\n        is SealedClass.First -&gt; doSomething()\n        is SealedClass.Second -&gt; doSomethingElse()\n    }  // ERROR here\n\n    // or\n\n    when (sealedClass) {\n        is SealedClass.First -&gt; doSomething()\n        is SealedClass.Second -&gt; doSomethingElse()\n    }.let {}  // ERROR here\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1014, "user_id": 2361772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZx58.jpg?s=128&g=1", "display_name": "Tunga", "link": "https://stackoverflow.com/users/2361772/tunga"}, "edited": false, "score": 5, "creation_date": 1515756663, "post_id": 44383076, "comment_id": 83432290, "body": "The downside of this is that it pollutes autocomplete as this extension method will show up on every statement."}, {"owner": {"reputation": 2329, "user_id": 1915831, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4bad6073d9da321663b4ddd3c093f2d6?s=128&d=identicon&r=PG", "display_name": "Rubin Yoo", "link": "https://stackoverflow.com/users/1915831/rubin-yoo"}, "reply_to_user": {"reputation": 1014, "user_id": 2361772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZx58.jpg?s=128&g=1", "display_name": "Tunga", "link": "https://stackoverflow.com/users/2361772/tunga"}, "edited": false, "score": 4, "creation_date": 1541266584, "post_id": 44383076, "comment_id": 93161031, "body": "@Tunga replace Any? with Unit? and it will not pollute as much"}], "tags": [], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "is_accepted": true, "score": 24, "last_activity_date": 1590073419, "last_edit_date": 1590073419, "creation_date": 1496731519, "answer_id": 44383076, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/44383076#44383076", "title": "Force compilation error with sealed classes", "body": "<p>In inspiration by Voddan's answer, you can build a property called <code>safe</code> you can use:</p>\n\n<pre><code>val Any?.safe get() = Unit\n</code></pre>\n\n<p>To use:</p>\n\n<pre><code>when (sealedClass) {\n    is SealedClass.First -&gt; doSomething()\n    is SealedClass.Second -&gt; doSomethingElse()\n}.safe\n</code></pre>\n\n<p>I think it provides a clearer message than just appending <code>.let{}</code> or assigning the result to a value.</p>\n\n<hr>\n\n<p>There is an <a href=\"https://youtrack.jetbrains.com/issue/KT-12380\" rel=\"nofollow noreferrer\">open issue</a> on the Kotlin tracker which considers to support 'sealed whens'.</p>\n"}, {"comments": [{"owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "edited": false, "score": 3, "creation_date": 1527946369, "post_id": 50642387, "comment_id": 88324850, "body": "Interesting approach!"}], "tags": [], "owner": {"reputation": 366, "user_id": 5873194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b2ce37e70f48b4916a1fb0087fcb2?s=128&d=identicon&r=PG&f=1", "display_name": "Sebasti&#224; Serra Rigo", "link": "https://stackoverflow.com/users/5873194/sebasti%c3%a0-serra-rigo"}, "is_accepted": false, "score": 23, "last_activity_date": 1527852738, "last_edit_date": 1527852738, "creation_date": 1527852321, "answer_id": 50642387, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/50642387#50642387", "title": "Force compilation error with sealed classes", "body": "<p>Our approach avoids to have the function everywhere when auto-completing. \nWith this solution you also have the when return type in compile time so you can continue using functions of the when return type.</p>\n\n<pre><code>Do exhaustive when (sealedClass) {\n  is SealedClass.First -&gt; doSomething()\n  is SealedClass.Second -&gt; doSomethingElse()\n}\n</code></pre>\n\n<p>You can define this object like so:</p>\n\n<pre><code>object Do {\n    inline infix fun&lt;reified T&gt; exhaustive(any: T?) = any\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12732, "user_id": 430128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c2aa2c9f527afea12a7fef458588b2a1?s=128&d=identicon&r=PG", "display_name": "Raman", "link": "https://stackoverflow.com/users/430128/raman"}, "edited": false, "score": 0, "creation_date": 1605561553, "post_id": 57332217, "comment_id": 114683229, "body": "The form <code>val Any?.exhaustive get() = Unit</code> has a return value of <code>Unit</code>, just like the original non-expression <code>when</code>. If the <code>when</code> is used in an expression, the <code>exhaustive</code> extension is redundant."}], "tags": [], "owner": {"reputation": 12288, "user_id": 5699956, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f8a27337886706b303e88cf00edb24e?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/5699956/max"}, "is_accepted": false, "score": 9, "last_activity_date": 1564772947, "creation_date": 1564772947, "answer_id": 57332217, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/57332217#57332217", "title": "Force compilation error with sealed classes", "body": "<p>We can create an extension property on type T with a name that helps explain the purpose</p>\n\n<pre><code>val &lt;T&gt; T.exhaustive: T\n    get() = this\n</code></pre>\n\n<p>and then use it anywhere like </p>\n\n<pre><code>when (sealedClass) {\n        is SealedClass.First -&gt; doSomething()\n        is SealedClass.Second -&gt; doSomethingElse()\n    }.exhaustive\n</code></pre>\n\n<p>It is readable, shows exactly what it does an will show an error if all cases are not covered.\n<a href=\"https://proandroiddev.com/til-when-is-when-exhaustive-31d69f630a8b\" rel=\"noreferrer\">Read more here</a></p>\n"}, {"tags": [], "owner": {"reputation": 38631, "user_id": 253468, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/eump2.jpg?s=128&g=1", "display_name": "TWiStErRob", "link": "https://stackoverflow.com/users/253468/twisterrob"}, "is_accepted": false, "score": 2, "last_activity_date": 1584794220, "creation_date": 1584794220, "answer_id": 60787848, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/60787848#60787848", "title": "Force compilation error with sealed classes", "body": "<p>A <a href=\"https://youtrack.jetbrains.com/issue/KT-12380#focus=streamItem-27-4017839.0-0\" rel=\"nofollow noreferrer\">discussion</a> triggered me to look for a more general solution and found one, for Gradle builds. <strong>It doesn't require changing the source code!</strong> The drawback is that compilation may become noisy.</p>\n\n<h3><code>build.gradle.kts</code></h3>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.withType&lt;org.jetbrains.kotlin.gradle.tasks.KotlinCompile&gt;().configureEach {\n    val taskOutput = StringBuilder()\n    logging.level = LogLevel.INFO\n    logging.addStandardOutputListener { taskOutput.append(it) }\n    doLast {\n        fun CharSequence.hasInfoWithError(): Boolean =\n            \"'when' expression on sealed classes is recommended to be exhaustive\" in this\n        if (taskOutput.hasInfoWithError()) {\n            throw Exception(\"kotlinc infos considered as errors found, see compiler output for details.\")\n        }\n    }\n}\n</code></pre>\n\n<h3><code>build.gradle</code></h3>\n\n<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {\n    def taskOutput = new StringBuilder()\n    logging.level = LogLevel.INFO\n    logging.addStandardOutputListener(new StandardOutputListener() {\n        void onOutput(CharSequence text) { taskOutput.append(text) }\n    })\n    doLast {\n        def hasInfoWithError = { CharSequence output -&gt;\n            output.contains(\"'when' expression on sealed classes is recommended to be exhaustive\")\n        }\n        if (hasInfoWithError(taskOutput)) {\n            throw new Exception(\"kotlinc infos considered as errors found, see compiler output for details.\")\n        }\n    }\n}\n\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Change implementation of <code>hasInfoWithError</code> to generalize to other <code>i:</code>s.</li>\n<li>Put this code in <code>subprojects { }</code> or <code>allprojects { }</code> to apply project-wide.</li>\n</ul>\n\n<p>References:</p>\n\n<ul>\n<li>Issue tracking making missing sealed case as warning:<br>\n(which together with <code>kotlinOptions.allWarningsAsErrors</code> would solve the issue)<br>\n<a href=\"https://youtrack.jetbrains.com/issue/KT-37651\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-37651</a></li>\n<li>Discussion triggering this solution:<br>\n<a href=\"https://youtrack.jetbrains.com/issue/KT-12380#focus=streamItem-27-4017839.0-0\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KT-12380#focus=streamItem-27-4017839.0-0</a></li>\n<li>Repo with working example:<br>\n<a href=\"https://github.com/TWiStErRob/repros/tree/master/kotlin/fail-on-sealed-when-info\" rel=\"nofollow noreferrer\">https://github.com/TWiStErRob/repros/tree/master/kotlin/fail-on-sealed-when-info</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7513725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juMCj.jpg?s=128&g=1", "display_name": "fkdplc", "link": "https://stackoverflow.com/users/7513725/fkdplc"}, "is_accepted": false, "score": 1, "last_activity_date": 1605109651, "creation_date": 1605109651, "answer_id": 64789632, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes/64789632#64789632", "title": "Force compilation error with sealed classes", "body": "<p>Consider using the recent library by JakeWharton that allows to just use <code>@Exhaustive</code> annotation.</p>\n<pre><code>sealed class RouletteColor {\n  object Red : RouletteColor()\n  object Black : RouletteColor()\n  object Green : RouletteColor()\n}\n\nfun printColor(color: RouletteColor) {\n  @Exhaustive\n  when (color) {\n    RouletteColor.Red -&gt; println(&quot;red&quot;)\n    RouletteColor.Black -&gt; println(&quot;black&quot;)\n  }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>buildscript {\n  dependencies {\n    classpath 'app.cash.exhaustive:exhaustive-gradle:0.1.1'\n  }\n  repositories {\n    mavenCentral()\n  }\n}\n\napply plugin: 'org.jetbrains.kotlin.jvm' // or .android or .multiplatform or .js\napply plugin: 'app.cash.exhaustive'\n</code></pre>\n<p>Lib: <a href=\"https://github.com/cashapp/exhaustive\" rel=\"nofollow noreferrer\">https://github.com/cashapp/exhaustive</a></p>\n"}], "owner": {"reputation": 89682, "user_id": 675383, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e7a971eb341ffeaa3efca407239bf3b?s=128&d=identicon&r=PG", "display_name": "nhaarman", "link": "https://stackoverflow.com/users/675383/nhaarman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3838, "favorite_count": 7, "accepted_answer_id": 44383076, "answer_count": 6, "score": 43, "last_activity_date": 1605109651, "creation_date": 1467548793, "last_edit_date": 1500819765, "question_id": 38169933, "link": "https://stackoverflow.com/questions/38169933/force-compilation-error-with-sealed-classes", "title": "Force compilation error with sealed classes", "body": "<p>With sealed classes you can use exhaustive <code>when</code> expressions and omit the <code>else</code> clause when the expression returns a result:</p>\n\n<pre><code>sealed class SealedClass {\n  class First : SealedClass()\n  class Second : SealedClass()\n}\n\nfun test(sealedClass: SealedClass) : String =\n    when (sealedClass) {\n      is SealedClass.First -&gt; \"First\"\n      is SealedClass.Second -&gt; \"Second\"\n    }\n</code></pre>\n\n<p>Now if I were to add a <code>Third</code> to <code>SealedClass</code>, the compiler will complain that the <code>when</code> expression in <code>test()</code> is not exhaustive, and I need to add a clause for <code>Third</code> or <code>else</code>.</p>\n\n<p>I am wondering however if this check can also be enforced when <code>test()</code> does not return anything:</p>\n\n<pre><code>fun test(sealedClass: SealedClass) {\n    when (sealedClass) {\n      is SealedClass.First -&gt; doSomething()\n      is SealedClass.Second -&gt; doSomethingElse()\n    }\n}\n</code></pre>\n\n<p>This snippet does not break if <code>Third</code> is added.\nI can add a <code>return</code> statement before <code>when</code>, but this could easily be forgotten and may break if the return type of one of the clauses is not <code>Unit</code>.</p>\n\n<p>How can I make sure I don't forget to add a branch to my <code>when</code> clauses?</p>\n"}, {"tags": ["aspectj", "kotlin"], "comments": [{"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 2, "creation_date": 1467488797, "post_id": 38163539, "comment_id": 63755709, "body": "Any instrumentation on the bytecode level must work. If it does not, we need a minimal example of a no-working code + build files to tell where the problem is."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 2, "creation_date": 1496646499, "post_id": 38174073, "comment_id": 75728370, "body": "is there any example for using aspectj in kotlin ? i have tried this;but it doesn&#39;t worked."}], "tags": [], "owner": {"reputation": 554, "user_id": 2401669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0hrgY.jpg?s=128&g=1", "display_name": "User0", "link": "https://stackoverflow.com/users/2401669/user0"}, "is_accepted": false, "score": 3, "last_activity_date": 1467577933, "creation_date": 1467577933, "answer_id": 38174073, "question_id": 38163539, "link": "https://stackoverflow.com/questions/38163539/is-there-any-way-in-kotlin-to-weave-in-code-before-after-around-functions-like-t/38174073#38174073", "title": "Is there any way in Kotlin to weave in code before/after/around functions like there is with AspectJ in Java?", "body": "<p>This is what I did to weave in the aspects the \"binary\" way, after that the Java and Kotlin code has been compiled.</p>\n\n<p>I couldn't get the <code>aspectj-maven-plugin</code> to weave the aspect the \"binary\" way correctly, so I used the plugin <code>jcabi-maven-plugin</code> instead.\nSee <a href=\"http://plugin.jcabi.com/example-ajc.html\" rel=\"nofollow\">http://plugin.jcabi.com/example-ajc.html</a></p>\n\n<p>The pom that worked for me:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;my.group.id&lt;/groupId&gt;\n&lt;artifactId&gt;my.artifact.id&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.6&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\n    &lt;complianceLevel&gt;1.6&lt;/complianceLevel&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n        &lt;artifactId&gt;kotlin-stdlib&lt;/artifactId&gt;\n        &lt;version&gt;1.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n        &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;version&gt;1.8.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n\n    &lt;plugins&gt;\n\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;version&gt;3.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;version&gt;1.0.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;sourceDirs&gt;\n                    &lt;sourceDir&gt;src/main/kotlin&lt;/sourceDir&gt;\n                    &lt;sourceDir&gt;src/test/kotlin&lt;/sourceDir&gt;\n                &lt;/sourceDirs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;compile&lt;/id&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;test-compile&lt;/id&gt;\n                    &lt;phase&gt;test-compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;test-compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.jcabi&lt;/groupId&gt;\n            &lt;artifactId&gt;jcabi-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.14.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;ajc&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.5.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;my.package.MyMainClassKt&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n\n<p>So this works with the aspects and a few annotations defined in Java, and then using these annotations to annotate Kotlin methods and classes, to have the aspects successfully injected in the Kotlin code.</p>\n\n<p>Note that if the Kotlin file has both a main method and a class defined in the same file, the Kotlin compiler produces two class files. One class with the name of the class and one class with \"Kt\" added to its name.\nGood to know if you try to use the exec-maven-plugin to run the Kotlin code.</p>\n\n<p>However, this did not play very well with eclipse. Maybe IntelliJ will do a better job here.</p>\n"}, {"tags": [], "owner": {"reputation": 24586, "user_id": 3255152, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbd95ef81d0a85310fee8dd46e0f65b0?s=128&d=identicon&r=PG&f=1", "display_name": "mfulton26", "link": "https://stackoverflow.com/users/3255152/mfulton26"}, "is_accepted": false, "score": 4, "last_activity_date": 1467735895, "creation_date": 1467735895, "answer_id": 38208299, "question_id": 38163539, "link": "https://stackoverflow.com/questions/38163539/is-there-any-way-in-kotlin-to-weave-in-code-before-after-around-functions-like-t/38208299#38208299", "title": "Is there any way in Kotlin to weave in code before/after/around functions like there is with AspectJ in Java?", "body": "<p>In addition to the other comments/answers I think it is worth pointing out that you can \"weave\" code before/after/around function code by using <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#inline-functions\" rel=\"nofollow\">inline functions</a>. e.g.:</p>\n\n<pre><code>fun main(vararg args: String) = nanoTimeAppendedTo(System.out, name = \"main\") {\n    /* do something, e.g.: */\n    Thread.sleep(0)\n}\n\ninline fun nanoTimeAppendedTo(appendable: Appendable, name: String, block: () -&gt; Unit) {\n    val nanoTime = measureNanoTime(block)\n    appendable.appendln(\"`$name` took $nanoTime ns\")\n}\n</code></pre>\n\n<p>You won't have access to all of the information that AspectJ gives you but for simple cases where you simply want to reuse executing some code before/after/around some other code this works just fine.</p>\n"}], "owner": {"reputation": 554, "user_id": 2401669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0hrgY.jpg?s=128&g=1", "display_name": "User0", "link": "https://stackoverflow.com/users/2401669/user0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1467735895, "creation_date": 1467486224, "question_id": 38163539, "link": "https://stackoverflow.com/questions/38163539/is-there-any-way-in-kotlin-to-weave-in-code-before-after-around-functions-like-t", "title": "Is there any way in Kotlin to weave in code before/after/around functions like there is with AspectJ in Java?", "body": "<p>I have tried to use AspectJ to weave in aspects around Kotlin functions, but with no success.\nMaybe I'm just configuring something incorrectly, or maybe AspectJ does not support this.</p>\n\n<p>Does anyone know if this is possible using e.g maven and Eclipse (or IntelliJ)?\nOr care to explain why it is not possible?</p>\n"}, {"tags": ["realm", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467464231, "post_id": 38160319, "comment_id": 63749038, "body": "If fullName is the concatenation of firstName and lastName, why store it in the first place instead of just computing it from the two other fields? If not, then why exactly do you want to achieve?"}, {"owner": {"reputation": 13, "user_id": 2092602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d0b9e97301108e2b9f837946a679de?s=128&d=identicon&r=PG", "display_name": "Tomas Harkema", "link": "https://stackoverflow.com/users/2092602/tomas-harkema"}, "reply_to_user": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1467493229, "post_id": 38160319, "comment_id": 63756779, "body": "fullName is not always used as a concatenation. It a way to search over the whole name, for instance in a &quot;search all&quot; box. In the rest of the implementation firstName and lastName is always used separately."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2092602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d0b9e97301108e2b9f837946a679de?s=128&d=identicon&r=PG", "display_name": "Tomas Harkema", "link": "https://stackoverflow.com/users/2092602/tomas-harkema"}, "edited": false, "score": 0, "creation_date": 1467494145, "post_id": 38160495, "comment_id": 63756966, "body": "Awesome, that works! I forgot to mention, but I also tried this one, but did&#39;t know about <code>field = value</code>, so now it works!"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 0, "last_activity_date": 1467464803, "creation_date": 1467464803, "answer_id": 38160495, "question_id": 38160319, "link": "https://stackoverflow.com/questions/38160319/add-generated-value-to-a-realmobject/38160495#38160495", "title": "Add generated value to a RealmObject", "body": "<p>You can use <a href=\"https://realm.io/docs/java/latest/#models\" rel=\"nofollow\">custom setters in <code>RealmObject</code>s</a></p>\n\n<pre><code>@Required\n@Index\nopen var firstName: String = \"\"\n    set(value) {\n        field = value\n        updateFullName()\n    }\n\n@Required\n@Index\nopen var lastName: String = \"\"\n    set(value) {\n        field = value\n        updateFullName()\n    }\n\nprivate fun updateFullName() {\n    fullName = \"$firstName $lastName\"\n}\n\n@Required\n@Index\nopen var fullName: String = \"\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2092602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d0b9e97301108e2b9f837946a679de?s=128&d=identicon&r=PG", "display_name": "Tomas Harkema", "link": "https://stackoverflow.com/users/2092602/tomas-harkema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 38160495, "answer_count": 1, "score": 1, "last_activity_date": 1467464803, "creation_date": 1467463645, "question_id": 38160319, "link": "https://stackoverflow.com/questions/38160319/add-generated-value-to-a-realmobject", "title": "Add generated value to a RealmObject", "body": "<p>I've created a model in Realm as follows:</p>\n\n<pre> <code>\nopen class Contact() : RealmObject() {\n\n    @PrimaryKey\n    @Required\n    open var id: String = \"\"\n\n    @Required\n    @Index\n    open var firstName: String = \"\"\n    @Required\n    @Index\n    open var lastName: String = \"\"\n    @Required\n    @Index\n    open var fullName: String = \"\"\n\n    ...\n}\n</code> </pre>\n\n<p>How would one generate the <code>fullName</code> when updating an object?</p>\n\n<p>I know for instance in CoreData you could mutate a property when <code>willSave:_</code> gets invoked. How would this work for Realm?</p>\n\n<p>I tried providing a getter, but this will break <code>RealmObject</code>'s behavior.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["intellij-idea", "kotlin"], "comments": [{"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467569136, "post_id": 38146660, "comment_id": 63772921, "body": "What I tried was first to open a project by specifying the directory of the Kotlin Koans. I expected a kind of project file to be found there. And indeed IntelliJ opened something and displayed a directory structure. But no way to execute something.  Then I tried to create a new Kotlin project in the directory. This allowed me to specify the JRE and the libs used. Seemed logical but still no way to execute something.  Then I tried to add a configuration. Tried Kotlin or JUnit. But don&#39;t know the main class (Kotlin) or get &quot;JUnit not found in module &#39;KotlinKoans&#39;&quot;."}, {"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467620050, "post_id": 38146660, "comment_id": 63786313, "body": "Ok, I gave up on this try. Could not figure out how to create a runnable project with the Kotlin Koans. Instead, I installed the educational IDEA plugin for Kotlin (<a href=\"https://blog.jetbrains.com/kotlin/2016/03/kotlin-educational-plugin\" rel=\"nofollow noreferrer\">blog.jetbrains.com/kotlin/2016/03/kotlin-educational-plugin</a>&zwnj;&#8203;) and am using that."}, {"owner": {"reputation": 78, "user_id": 1917965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ld2Gi.png?s=128&g=1", "display_name": "Oren", "link": "https://stackoverflow.com/users/1917965/oren"}, "edited": false, "score": 0, "creation_date": 1503060826, "post_id": 38146660, "comment_id": 78471578, "body": "For the icons to appear you need to make sure Gradle is configured in IDEA."}], "answers": [{"comments": [{"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 4, "creation_date": 1467380897, "post_id": 38147038, "comment_id": 63723775, "body": "These symbols on the left are not displayed in my version of IntelliJ IDEA."}, {"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467568957, "post_id": 38147038, "comment_id": 63772871, "body": "I have looked into your documentation link. I find &quot;In the Configuration tab, specify the class that contains the main() method, VM options, program arguments, working directory and other configuration-specific settings.&quot; The problem is that I can not figure out which class contains the main() method. That stops me from making any progress!"}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": false, "score": 3, "last_activity_date": 1467380611, "creation_date": 1467380611, "answer_id": 38147038, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class/38147038#38147038", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>Follow <a href=\"https://kotlinlang.org/docs/tutorials/koans.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p>Open up the project in IntelliJ IDEA or your favorite editor. Note: If\n  IntelliJ IDEA prompts you to update the Kotlin library, just click\n  yes.</p></li>\n  <li><p>Run a test. Make it pass</p></li>\n  </ol>\n</blockquote>\n\n<p>You can trigger a test run by opening a file (i.e <code>kotlin-koans/test/i_introduction/_0_Hello_World/_00_Start.kt</code>) and hitting:\n<a href=\"https://i.stack.imgur.com/j5f1o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j5f1o.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can find more information about <a href=\"https://www.jetbrains.com/help/idea/2016.1/creating-run-debug-configuration-for-tests.html\" rel=\"nofollow noreferrer\">running tests in IntelliJ in the documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467381100, "post_id": 38147095, "comment_id": 63723921, "body": "I don&#39;t have any Run icons."}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 1, "creation_date": 1467381290, "post_id": 38147095, "comment_id": 63724045, "body": "Are you sure that you&#39;ve opened the test file (<code>_00_Start.kt</code>)? What happens when you press Ctrl+Shift+F10 or Alt+Enter, while the cursor placed over <code>testOk</code> method?"}, {"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467382502, "post_id": 38147095, "comment_id": 63724914, "body": "Yes. When pressing Ctrl+Shift+F10 nothing happens. With Alt+Enter I get a popup menu with 2 selections: &quot;Move to companion object&quot; and &quot;Convert member to extension&quot;."}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467382732, "post_id": 38147095, "comment_id": 63725065, "body": "Try to create new JUnit configuration and set <code>i_introduction._0_Hello_World._00_Start</code> in the <code>Class</code> field"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467382872, "post_id": 38147095, "comment_id": 63725167, "body": "Also, clicking on the <code>_00_Start</code> file on the Project panel with right mouse button, do you see anything related to <code>Run</code> or <code>Debug</code>?"}, {"owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 1, "creation_date": 1467383099, "post_id": 38147095, "comment_id": 63725305, "body": "If I try to create a new JUnit configuration and set the <code>Class</code> field I get an error message <code>JUnit not found in module KotlinKoans</code>. The right click on the file in the project panel brings up neither <code>Run</code> nor <code>Debug</code> in the popup menu."}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "edited": false, "score": 0, "creation_date": 1467383342, "post_id": 38147095, "comment_id": 63725462, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/116206/discussion-between-soon-and-tina-hildebrandt\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "is_accepted": false, "score": 6, "last_activity_date": 1467380773, "creation_date": 1467380773, "answer_id": 38147095, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class/38147095#38147095", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>The easiest way is to install the Kotlin Edu plugin. You may read <a href=\"https://blog.jetbrains.com/kotlin/2016/03/kotlin-educational-plugin/\" rel=\"noreferrer\">this JB blog post</a> for additional info.</p>\n\n<p>You could also run all koans tests without the plugin.IDEA allows you to run applications and tests directly from the IDE by clicking the Run icon near the test or application definition:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C13JF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/C13JF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 5533591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251e0e8786f141f5978b662a533dfc1a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristophE", "link": "https://stackoverflow.com/users/5533591/christophe"}, "is_accepted": false, "score": 4, "last_activity_date": 1495623240, "creation_date": 1495623240, "answer_id": 44156293, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class/44156293#44156293", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>already quite old question but I also struggled a bit. The way to do it is how they described it in their github repo (maybe they changed that since last time you checked)</p>\n\n<p><a href=\"https://github.com/Kotlin/kotlin-koans\" rel=\"nofollow noreferrer\">https://github.com/Kotlin/kotlin-koans</a></p>\n\n<blockquote>\n  <p>How to build and run tests</p>\n  \n  <p>Working with the project using Intellij IDEA or Android Studio:</p>\n  \n  <p>Import the project as Gradle project. To build the project and run\n  tests use 'test' task on Gradle panel.</p>\n</blockquote>\n\n<p>What I did:</p>\n\n<ol>\n<li>Clone from github via File -> new project from version control -> github</li>\n<li>After that was done I also could not run anything</li>\n<li>File -> New Project from existing soure -> Choose your folder</li>\n<li>Import Project from external model -> choose Gradle</li>\n<li>No need to change anything, after that it worked for me</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5671221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4ed5a100b09aed0e921830d027230d?s=128&d=identicon&r=PG&f=1", "display_name": "Lshare", "link": "https://stackoverflow.com/users/5671221/lshare"}, "is_accepted": false, "score": 0, "last_activity_date": 1512698689, "creation_date": 1512698689, "answer_id": 47706652, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class/47706652#47706652", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>In my case, it is the <code>zsh</code>'s bug, can be solved in following:</p>\n\n<ol>\n<li>add <code>setopt no_nomatch</code> in the end of file  <code>~/.zshrc</code>;</li>\n<li>then run <code>source /.zshrc</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1693, "user_id": 6654475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-vGc62SM1OzI/AAAAAAAAAAI/AAAAAAAAPao/fNzdBMXdwwQ/photo.jpg?sz=128", "display_name": "Francislainy Campos", "link": "https://stackoverflow.com/users/6654475/francislainy-campos"}, "is_accepted": false, "score": 0, "last_activity_date": 1533666943, "creation_date": 1533666943, "answer_id": 51733355, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class/51733355#51733355", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>You can run them by clicking the <strong>Check Task</strong> button. :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/FUHp8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FUHp8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1027, "user_id": 2862220, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/EZG6Z.jpg?s=128&g=1", "display_name": "Tina Hildebrandt", "link": "https://stackoverflow.com/users/2862220/tina-hildebrandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5573, "favorite_count": 0, "answer_count": 5, "score": 16, "last_activity_date": 1533666943, "creation_date": 1467379539, "question_id": 38146660, "link": "https://stackoverflow.com/questions/38146660/how-to-run-kotlin-koans-in-intellij-what-is-the-main-class", "title": "How to run Kotlin Koans in IntelliJ? What is the &quot;Main class&quot;?", "body": "<p>I have downloaded Kotlin Koans from Github, installed IntelliJ IDEA 2016.1.3 and opened the Koans project. As I understand I need a <code>Configuration</code> to run the examples. This <code>Configuration</code> needs a <code>Main class</code>. I cannot figure out where I find the main class in the Kotlin Koans. I have searched for one but found none (except for a special one in <code>htmlDemo.kt</code>).</p>\n\n<p>I see that some kind of unit test framework is used. It probably somehow calls <code>task0</code> but the IDE shows no references to <code>task0</code> except one from <code>todoTask0</code>. The only reference to <code>todoTask0</code> is in <code>task0</code>. So we have circular references but nowhere do I find an external reference to call up one of these functions.</p>\n\n<p>Can someone explain to me how to get the Kotlin Koans running in the IntelliJ IDE?</p>\n"}, {"tags": ["kotlin"], "answers": [{"tags": [], "owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "is_accepted": false, "score": 1, "last_activity_date": 1467369559, "creation_date": 1467369559, "answer_id": 38143296, "question_id": 38143129, "link": "https://stackoverflow.com/questions/38143129/java-lang-integer-cannot-be-cast-to-java-lang-long-in-kotlin-when-the-initial-v/38143296#38143296", "title": "java.lang.Integer cannot be cast to java.lang.Long in Kotlin (when the initial value is null)", "body": "<pre><code>return 1000 as T\n</code></pre>\n\n<p>is an unchecked cast, and the compiler issues a warning about it. You're returning an Integer, always, but you pretend it's a T. That will only work fine if T is actually Integer. In all other cases, it will fail. </p>\n\n<p>The obviousness of the problem would be more blatant if you chose a completely unrelated type like, I don't know, StringBuilder:</p>\n\n<pre><code>var number: StringBuilder? = null\nval simpleObject = SimpleClass()\nnumber = simpleObject.getValue&lt;StringBuilder&gt;()\n</code></pre>\n\n<p>Now you should realize that this doesn't make sense: you're calling a method that is supposed to return a StringBuilder, but it returns 1000. </p>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1467386290, "post_id": 38144213, "comment_id": 63727384, "body": "Thanks for providing the excellent detail technical reason behind the 2 dex codes generated. This explains well. I think the Kotlin language should improve where it could cast to java/lang/Number instead of java/lang/Long directly. So in short for now, they are just different. Upvote your answer and tick to accept it. Thanks!!"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467401353, "post_id": 38144213, "comment_id": 63734848, "body": "do you think this is the intended behaviour ?"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467402363, "post_id": 38144213, "comment_id": 63735240, "body": "@voddan not sure. This behavior might not be obvious at the first glance, but what should Kotlin do when the developer says &quot;hey, I know, that this cast is unsafe, but trust me&quot;? It warns about possible class cast exception, and it is right. It should probably explain some low-level reasons behind the warning, or at least provide a link to the docs (long live Rust with awesome compile error explanations)"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467406647, "post_id": 38144213, "comment_id": 63736842, "body": "a cast from Int to Double should never succeed"}, {"owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "reply_to_user": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467425409, "post_id": 38144213, "comment_id": 63740805, "body": "@voddan sure, I&#39;m just talking about warning message improvements"}, {"owner": {"reputation": 25728, "user_id": 3144601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/94FMr.jpg?s=128&g=1", "display_name": "voddan", "link": "https://stackoverflow.com/users/3144601/voddan"}, "edited": false, "score": 0, "creation_date": 1467437418, "post_id": 38144213, "comment_id": 63742573, "body": "I recommend you fill the issue in YT"}], "tags": [], "owner": {"reputation": 26541, "user_id": 1532460, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc5b338bf194a9e117af20bd9b2e4edb?s=128&d=identicon&r=PG", "display_name": "awesoon", "link": "https://stackoverflow.com/users/1532460/awesoon"}, "is_accepted": true, "score": 7, "last_activity_date": 1467372241, "creation_date": 1467372241, "answer_id": 38144213, "question_id": 38143129, "link": "https://stackoverflow.com/questions/38143129/java-lang-integer-cannot-be-cast-to-java-lang-long-in-kotlin-when-the-initial-v/38144213#38144213", "title": "java.lang.Integer cannot be cast to java.lang.Long in Kotlin (when the initial value is null)", "body": "<p>Let's take a look into generated bytecode:</p>\n\n<pre><code>fun &lt;T&gt; getValue(): T {\n    return 1000 as T\n}\n\n// becomes\n\npublic final getValue()Ljava/lang/Object;\n   L0\n    LINENUMBER 17 L0\n    SIPUSH 1000\n    INVOKESTATIC java/lang/Integer.valueOf (I)Ljava/lang/Integer;\n    CHECKCAST java/lang/Object\n    ARETURN\n   L1\n    LOCALVARIABLE this LSimpleClass; L0 L1 0\n    MAXSTACK = 1\n    MAXLOCALS = 1\n</code></pre>\n\n<p>As you can see, this method <strong>does not cast</strong> <code>1000</code> to a <code>Long</code> it simply ensures, that the object is of type <code>java/lang/Object</code> (well, it is) and returns the <code>1000</code> as an <code>Integer</code> object.</p>\n\n<p>Therefore, you may call (note: call only) this method with any type and this will not throw exception. However, storing the result in a variable invokes real cast which may lead to <code>ClassCastException</code></p>\n\n<pre><code>fun f3() {\n    val simpleObject = SimpleClass()\n    // L0\n    //   LINENUMBER 16 L0\n    //   NEW SimpleClass\n    //   DUP\n    //   INVOKESPECIAL SimpleClass.&lt;init&gt; ()V\n    //   ASTORE 0\n\n    simpleObject.getValue&lt;SimpleClass&gt;() // no problems\n    // L1\n    //   LINENUMBER 17 L1\n    //   ALOAD 0\n    //   INVOKEVIRTUAL SimpleClass.getValue ()Ljava/lang/Object;\n    //   POP\n\n    val number = simpleObject.getValue&lt;SimpleClass&gt;() // throws ClassCastException1\n    // L2\n    //   LINENUMBER 18 L2\n    //   ALOAD 0\n    //   INVOKEVIRTUAL SimpleClass.getValue ()Ljava/lang/Object;\n    //   CHECKCAST SimpleClass\n    //   ASTORE 1\n\n\n    // L3\n    //   LINENUMBER 19 L3\n    //   RETURN\n    // L4\n    //   LOCALVARIABLE number LSimpleClass; L3 L4 1\n    //   LOCALVARIABLE simpleObject LSimpleClass; L1 L4 0\n    //   MAXSTACK = 2\n    //   MAXLOCALS = 2\n}\n</code></pre>\n\n<p>But why storing the result as a <code>Long?</code> throws an exception? Again, let's take a look at the differences in bytecode:</p>\n\n<pre><code>var number: Long? = null              |    var number: Long = 0\n                                      |\n      ACONST_NULL                     |        LCONST_0\n      CHECKCAST java/lang/Long        |        LSTORE 0                \n      ASTORE 0                        |\n\n                number = simpleObject.getValue&lt;Long&gt;() [both]\n\n      ALOAD 1                         |\n              INVOKEVIRTUAL SimpleClass.getValue ()Ljava/lang/Object; [both]\n      CHECKCAST java/lang/Long        |        CHECKCAST java/lang/Number\n      ASTORE 0                        |        INVOKEVIRTUAL java/lang/Number.longValue ()J\n                                      |        LSTORE 0\n</code></pre>\n\n<p>As you can see, the bytecode for <code>number: Long</code> casts the function result to a <code>Number</code> and then calls <code>Number.longValue</code> in order to convert the value to a <code>Long</code> (<code>long</code> in Java)</p>\n\n<p>However, the bytecode for <code>number: Long?</code> casts the function result directly into the <code>Long?</code> (<code>Long</code> in Java) which leads to <code>ClassCastException</code>. </p>\n\n<p>Not sure, if this behavior documented somewhere. However, the <code>as</code> operator performs unsafe cast and the compiler warns about it:</p>\n\n<pre><code>Warning:(21, 16) Kotlin: Unchecked cast: kotlin.Int to T\n</code></pre>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8428, "favorite_count": 0, "accepted_answer_id": 38144213, "answer_count": 2, "score": 8, "last_activity_date": 1467372241, "creation_date": 1467369052, "question_id": 38143129, "link": "https://stackoverflow.com/questions/38143129/java-lang-integer-cannot-be-cast-to-java-lang-long-in-kotlin-when-the-initial-v", "title": "java.lang.Integer cannot be cast to java.lang.Long in Kotlin (when the initial value is null)", "body": "<p>If I have the following, it works (i.e. number get assign 1000)</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    var number: Long ? = null // or number = 0\n    val simpleObject = SimpleClass()\n    number = 1000\n    println(\"Hi + $number\")\n}\n</code></pre>\n\n<p>If I have the following, it works (i.e. number get assign 1000)</p>\n\n<pre><code>import java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    var number: Long = 0\n    val simpleObject = SimpleClass()\n    number = simpleObject.getValue&lt;Long&gt;()\n    println(\"Hi + $number\")\n}\n\nclass SimpleClass() {\n    fun &lt;T&gt;getValue(): T {\n        return 1000 as T\n    }\n}\n</code></pre>\n\n<p>But if I have the below, it fails</p>\n\n<pre><code>import java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    var number: Long? = null\n    val simpleObject = SimpleClass()\n    number = simpleObject.getValue&lt;Long&gt;()\n    println(\"Hi + $number\")\n}\n\nclass SimpleClass() {\n    fun &lt;T&gt;getValue(): T {\n        return 1000 as T\n    }\n}\n</code></pre>\n\n<p>The error reported is on the <code>number = simpleObject.getValue&lt;Long&gt;()</code> line</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long \n</code></pre>\n\n<p>Why when I initialise <code>var number: Long ? = null</code> and <code>var number: Long = 0</code> have different result? Did I get anything wrong?</p>\n\n<p><strong>UPDATED</strong></p>\n\n<p>A workaround using the below, the result is okay. But an additional temp variable is used.</p>\n\n<pre><code>import java.util.*\n\nfun main(args: Array&lt;String&gt;) {\n    var number: Long? = null\n    val simpleObject = SimpleClass()\n    val temp = simpleObject.getValue&lt;Long&gt;()\n    number = temp\n    println(\"Hi + $number\")\n}\n\nclass SimpleClass() {\n    fun &lt;T&gt;getValue(): T {\n        return 1000 as T\n    }\n}\n</code></pre>\n"}, {"tags": ["mockito", "kotlin", "android-espresso"], "answers": [{"tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": true, "score": 0, "last_activity_date": 1467370222, "last_edit_date": 1467370222, "creation_date": 1467346764, "answer_id": 38136993, "question_id": 38136983, "link": "https://stackoverflow.com/questions/38136983/java-lang-abstractmethoderror-abstract-method-when-running-espresso-on-kotlin-w/38136993#38136993", "title": "java.lang.AbstractMethodError: abstract method when running espresso on Kotlin with Mockito", "body": "<p>Apparently remove the below Mockito-Kotlin library from my build.gradle solve the problem</p>\n\n<pre><code>androidTestCompile (\"com.nhaarman:mockito-kotlin:0.4.1\") {\n    exclude group: \"org.jetbrains.kotlin\", module: 'kotlin-stdlib'\n}\n</code></pre>\n\n<p><strong>UPDATED</strong></p>\n\n<p>Reported the issue to nhaarman, as per <a href=\"https://github.com/nhaarman/mockito-kotlin/issues/46\" rel=\"nofollow\">https://github.com/nhaarman/mockito-kotlin/issues/46</a></p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1570, "favorite_count": 0, "accepted_answer_id": 38136993, "answer_count": 1, "score": 1, "last_activity_date": 1467370222, "creation_date": 1467346716, "question_id": 38136983, "link": "https://stackoverflow.com/questions/38136983/java-lang-abstractmethoderror-abstract-method-when-running-espresso-on-kotlin-w", "title": "java.lang.AbstractMethodError: abstract method when running espresso on Kotlin with Mockito", "body": "<p>I have an instrumental espresso test that uses mockito. The test class as below.</p>\n\n<pre><code>import android.support.test.InstrumentationRegistry\nimport android.support.test.rule.ActivityTestRule\n\nimport org.junit.Before\nimport org.junit.Rule\nimport org.junit.Test\nimport org.junit.rules.RuleChain\nimport org.junit.rules.TestRule\n\nimport android.support.test.espresso.Espresso.onView\nimport android.support.test.espresso.assertion.ViewAssertions.matches\nimport android.support.test.espresso.matcher.ViewMatchers.withId\nimport android.support.test.espresso.matcher.ViewMatchers.withText\nimport org.mockito.Mockito.`when`\n\nclass MainActivityTest {\n\n    val component = TestComponentRule(InstrumentationRegistry.getTargetContext())\n    val main = ActivityTestRule(MainActivity::class.java, false, false)\n    // TestComponentRule needs to go first so we make sure the ApplicationTestComponent is set\n    // in the Application before any Activity is launched.\n    @JvmField @Rule\n    var chain: TestRule = RuleChain.outerRule(component).around(main)\n\n    @Before\n    fun setUp() {\n    }\n\n    @Test\n    fun simpleTrueTest() {\n        `when`(component.mockInjectedData.status).thenReturn(true)\n        main.launchActivity(null)\n\n        onView(withId(R.id.txt_myview)).check(matches(withText(\"True\")))\n    }\n\n    @Test\n    fun simpleFalseTest() {\n        `when`(component.mockInjectedData.status).thenReturn(false)\n        main.launchActivity(null)\n\n        onView(withId(R.id.txt_myview)).check(matches(withText(\"False\")))\n    }\n\n}\n</code></pre>\n\n<p>My TestComponentRule as below</p>\n\n<pre><code>import android.content.Context\n\nimport org.junit.rules.TestRule\nimport org.junit.runner.Description\nimport org.junit.runners.model.Statement\n\nclass TestComponentRule(val context: Context) : TestRule {\n\n    private var mTestComponent: ApplicationTestComponent? = null\n\n    val mockInjectedData: InjectedData\n        get() = mTestComponent!!.dataManager()\n\n    private fun setupDaggerTestComponentInApplication() {\n        val application = MainApplication[context]\n        mTestComponent = DaggerApplicationTestComponent.builder().applicationTestModule(ApplicationTestModule(application)).build()\n        application.component = mTestComponent as ApplicationComponent\n    }\n\n    override fun apply(base: Statement, description: Description): Statement {\n        return object : Statement() {\n            @Throws(Throwable::class)\n            override fun evaluate() {\n                try {\n                    setupDaggerTestComponentInApplication()\n                    base.evaluate()\n                } finally {\n                    mTestComponent = null\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And my Dagger TestModule</p>\n\n<pre><code>import android.app.Application\n\nimport javax.inject.Singleton\n\nimport dagger.Module\nimport dagger.Provides\nimport org.mockito.Mockito.mock\n\n@Module\nclass ApplicationTestModule(protected val mApplication: Application) {\n\n    @Provides\n    internal fun provideApplication(): Application {\n        return mApplication\n    }\n\n    @Provides\n    @Singleton\n    internal fun provideInjectedData(): InjectedData {\n        return mock(InjectedData::class.java)\n    }\n}\n</code></pre>\n\n<p>And my build.gradle file as below</p>\n\n<pre><code>dependencies {\n    final SUPPORT_LIBRARY_VERSION = '23.4.0'\n    final DAGGER_VERSION = '2.2'\n    final DEXMAKER_VERSION = '1.4'\n    final MOCKITO_VERSION = '1.10.19'\n    final ESPRESSO_VERSION = '2.2.1'\n    final JUNIT_VERSION = '4.12'\n    final RUNNER_VERSION = '0.4'\n\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile \"junit:junit:$JUNIT_VERSION\"\n\n    compile \"com.android.support:appcompat-v7:$SUPPORT_LIBRARY_VERSION\"\n    compile \"com.google.dagger:dagger:$DAGGER_VERSION\"\n    kapt \"com.google.dagger:dagger-compiler:$DAGGER_VERSION\"\n    kaptAndroidTest \"com.google.dagger:dagger-compiler:$DAGGER_VERSION\"\n    apt \"com.google.dagger:dagger-compiler:$DAGGER_VERSION\"\n    androidTestApt \"com.google.dagger:dagger-compiler:$DAGGER_VERSION\"\n    provided 'org.glassfish:javax.annotation:10.0-b28'\n\n    compile \"org.jetbrains.kotlin:kotlin-stdlib:$KOTLIN_VERSION\"\n\n\n    androidTestCompile \"com.android.support:support-annotations:$SUPPORT_LIBRARY_VERSION\"\n    androidTestCompile(\"com.android.support.test.espresso:espresso-contrib:$ESPRESSO_VERSION\") {\n        exclude group: 'com.android.support', module: 'appcompat'\n        exclude group: 'com.android.support', module: 'support-v4'\n        exclude group: 'com.android.support', module: 'recyclerview-v7'\n    }\n    androidTestCompile \"com.android.support.test.espresso:espresso-core:$ESPRESSO_VERSION\"\n    androidTestCompile \"com.android.support.test.espresso:espresso-intents:$ESPRESSO_VERSION\"\n    androidTestCompile \"com.android.support.test:runner:$RUNNER_VERSION\"\n    androidTestCompile \"com.android.support.test:rules:$RUNNER_VERSION\"\n    androidTestCompile \"org.mockito:mockito-core:$MOCKITO_VERSION\"\n    androidTestCompile \"com.crittercism.dexmaker:dexmaker:$DEXMAKER_VERSION\"\n    androidTestCompile \"com.crittercism.dexmaker:dexmaker-dx:$DEXMAKER_VERSION\"\n    androidTestCompile \"com.crittercism.dexmaker:dexmaker-mockito:$DEXMAKER_VERSION\"\n\n    androidTestCompile (\"com.nhaarman:mockito-kotlin:0.4.1\") {\n        exclude group: \"org.jetbrains.kotlin\", module: 'kotlin-stdlib'\n    }\n}\n</code></pre>\n\n<p>When I trigger my Instrumentation test, it error on</p>\n\n<pre><code>        `when`(component.mockInjectedData.status).thenReturn(true)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>        `when`(component.mockInjectedData.status).thenReturn(false)\n</code></pre>\n\n<p>with the error</p>\n\n<pre><code>java.lang.AbstractMethodError: abstract method \"org.mockito.plugins.MockMaker$TypeMockability org.mockito.plugins.MockMaker.isTypeMockable(java.lang.Class)\"\nat org.mockito.internal.util.MockUtil.typeMockabilityOf(MockUtil.java:26)\nat org.mockito.internal.util.MockCreationValidator.validateType(MockCreationValidator.java:21)\nat org.mockito.internal.creation.MockSettingsImpl.validatedSettings(MockSettingsImpl.java:167)\nat org.mockito.internal.creation.MockSettingsImpl.confirm(MockSettingsImpl.java:161)\nat org.mockito.internal.MockitoCore.mock(MockitoCore.java:54)\nat org.mockito.Mockito.mock(Mockito.java:1449)\nat org.mockito.Mockito.mock(Mockito.java:1362)    \n</code></pre>\n"}, {"tags": ["java", "kotlin"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 7, "creation_date": 1467314799, "post_id": 38131655, "comment_id": 63694504, "body": "<code>val boundsBuilder = LatLngBounds.Builder()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 1068189, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/h3B17.gif?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1068189/chris"}, "is_accepted": true, "score": 4, "last_activity_date": 1467315384, "creation_date": 1467315384, "answer_id": 38131829, "question_id": 38131655, "link": "https://stackoverflow.com/questions/38131655/operator-new-in-kotlin-syntax/38131829#38131829", "title": "Operator new in Kotlin (syntax)", "body": "<pre><code>val boundsBuilder = LatLngBounds.Builder()\n</code></pre>\n"}], "owner": {"reputation": 3042, "user_id": 2787507, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/lv63g.jpg?s=128&g=1", "display_name": "nutella_eater", "link": "https://stackoverflow.com/users/2787507/nutella-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2887, "favorite_count": 0, "accepted_answer_id": 38131829, "answer_count": 1, "score": 0, "last_activity_date": 1467315384, "creation_date": 1467314635, "question_id": 38131655, "link": "https://stackoverflow.com/questions/38131655/operator-new-in-kotlin-syntax", "title": "Operator new in Kotlin (syntax)", "body": "<p>I get along with Java's <strong>new</strong> operator. It's pretty much simple:</p>\n\n<pre><code>LatLngBounds.Builder boundsBuilder = new LatLngBounds.Builder();\n</code></pre>\n\n<p>So we assume that this is a final variable. We don't want to change this particular variable.</p>\n\n<p>In kotlin I should write something like: </p>\n\n<pre><code>val boundsBuilder: LatLngBounds.Builder = LatLngBounds.Builder()\n</code></pre>\n\n<p>which is pretty much the same. So I thought, maybe there is some way to make the thing <strong>shorter</strong>?</p>\n\n<p>My java to kotlin konverter died, so I'm asking here.</p>\n"}, {"tags": ["java", "gradle", "kotlin"], "comments": [{"owner": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 1, "creation_date": 1467314053, "post_id": 38131237, "comment_id": 63694080, "body": "Do you get this error when building your project with command line gradle or do you see it in Eclipse only?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "reply_to_user": {"reputation": 17307, "user_id": 869184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/58a3657cee7bdb5f537020660d9711e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/869184/ilya"}, "edited": false, "score": 0, "creation_date": 1467315182, "post_id": 38131237, "comment_id": 63694686, "body": "As far as I know it&#39;s only eclipse. I have no problem with this using IntelliJ, but I&#39;m trying to make this project work with eclipse and IntelliJ."}, {"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 1, "creation_date": 1467327791, "post_id": 38131237, "comment_id": 63700171, "body": "How did you build your project?  I tried to build mixed-java-kotlin-hello-world and didn\u2019t get any error. I imported project as \u2018gradle\u2019 one to eclipse, then added Kotlin nature to the project and built it using \u2018Gradle tasks\u2019.  Just in case, there is no corresponding import declaration on the first screenshot, please try to add it and build project again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "edited": false, "score": 0, "creation_date": 1467329467, "post_id": 38131237, "comment_id": 63700640, "body": "I&#39;m doing the same thing, but I&#39;m not using tasks to build the gradle project. I can import the class by manually doing it, but my IDE should automatically be finding the classes for me if I hover over the class. What Eclipse version are you using? I&#39;m using Neon."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "edited": false, "score": 0, "creation_date": 1467329935, "post_id": 38131237, "comment_id": 63700766, "body": "I get this issue when I try to import mixed-java-kotlin-hello-world <a href=\"http://prnt.sc/bn9m4e\" rel=\"nofollow noreferrer\">prnt.sc/bn9m4e</a>"}, {"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1467370957, "post_id": 38131237, "comment_id": 63717075, "body": "Yes, for now, hover over an unresolved class doesn\u2019t provide auto-import action. You can try to invoke ctrl+1 to find available actions and then import the class. Alternatively you can use &#39;organize imports&#39; feature."}, {"owner": {"reputation": 261, "user_id": 6123307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a08d7306c0549d112a6d8f4d5ee3cf87?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Zarechenskiy", "link": "https://stackoverflow.com/users/6123307/mikhail-zarechenskiy"}, "edited": false, "score": 0, "creation_date": 1467371505, "post_id": 38131237, "comment_id": 63717419, "body": "About the last problem: seems that there is a bug, workaround is to modify and save Kotlin source file. Could you please file an issue to the <a href=\"https://youtrack.jetbrains.com/issues/KT\" rel=\"nofollow noreferrer\">bugtracker</a>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "edited": false, "score": 0, "creation_date": 1468587444, "post_id": 38131237, "comment_id": 64201730, "body": "@MikhailZarechensky Yeah I can do that."}, {"owner": {"reputation": 17986, "user_id": 4730812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d336a10204c1cd2e7fa47071ed629669?s=128&d=identicon&r=PG&f=1", "display_name": "piotrek1543", "link": "https://stackoverflow.com/users/4730812/piotrek1543"}, "edited": false, "score": 0, "creation_date": 1471375746, "post_id": 38131237, "comment_id": 65318803, "body": "@ChadAdams is problem solved"}], "answers": [{"tags": [], "owner": {"reputation": 895, "user_id": 485704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51dba7596fa10776cd51109f148b7da3?s=128&d=identicon&r=PG", "display_name": "Debop", "link": "https://stackoverflow.com/users/485704/debop"}, "is_accepted": true, "score": 17, "last_activity_date": 1511497327, "last_edit_date": 1511497327, "creation_date": 1470144188, "answer_id": 38721694, "question_id": 38131237, "link": "https://stackoverflow.com/questions/38131237/mixing-java-and-kotlin-in-gradle-project-kotlin-cannot-find-java-class/38721694#38721694", "title": "Mixing Java And Kotlin In Gradle Project, Kotlin Cannot Find Java Class", "body": "<p>you should override sourceSets like this</p>\n\n<pre><code>sourceSets {\n    main.java.srcDirs = []\n    main.kotlin.srcDirs = ['src/main/java', 'src/main/kotlin']\n    main.resources.srcDirs = ['src/main/resources']\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1429, "user_id": 4637456, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/12d7f375235504f8fe3ab6795c154c4e?s=128&d=identicon&r=PG", "display_name": "Thami Bouchnafa", "link": "https://stackoverflow.com/users/4637456/thami-bouchnafa"}, "is_accepted": false, "score": 4, "last_activity_date": 1591455750, "creation_date": 1591455750, "answer_id": 62233568, "question_id": 38131237, "link": "https://stackoverflow.com/questions/38131237/mixing-java-and-kotlin-in-gradle-project-kotlin-cannot-find-java-class/62233568#62233568", "title": "Mixing Java And Kotlin In Gradle Project, Kotlin Cannot Find Java Class", "body": "<p>I had a similar issue and my java code was in the same source directory as the kotlin code</p>\n\n<p>My solution was adding this configuration in <code>build.gradle.kts</code>:</p>\n\n<pre><code>configure&lt;SourceSetContainer&gt; {\n    named(\"main\") {\n        java.srcDir(\"src/main/kotlin\")\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6186835"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11623, "favorite_count": 3, "accepted_answer_id": 38721694, "answer_count": 2, "score": 17, "last_activity_date": 1591455750, "creation_date": 1467313120, "last_edit_date": 1467315812, "question_id": 38131237, "link": "https://stackoverflow.com/questions/38131237/mixing-java-and-kotlin-in-gradle-project-kotlin-cannot-find-java-class", "title": "Mixing Java And Kotlin In Gradle Project, Kotlin Cannot Find Java Class", "body": "<p>As the title says, I am trying to mix Java and Kotlin in a single project. There's a good example found here. <a href=\"https://github.com/JetBrains/kotlin-examples/tree/master/gradle/mixed-java-kotlin-hello-world\" rel=\"noreferrer\">mixed-java-kotlin-hello-world</a>. Everything is working properly besides kotlin cannot find any of my Java classes which are found in src/main/java/somepackage/SomeClass.java</p>\n\n<p>What would be the cause of this?</p>\n\n<p>This is the error I am getting.\n<a href=\"https://i.stack.imgur.com/Dc4Bj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Dc4Bj.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I try to edit my build.gradle, it shows I'm not spelling kotlin correctly and giving me errors on plugin but I'm copying and pasting from kotlins website.\n<a href=\"https://i.stack.imgur.com/eAmVj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eAmVj.png\" alt=\"enter image description here\"></a></p>\n\n<p>My build.gradle looks like this</p>\n\n<pre><code>group 'Battle-OS'\nversion '1.0-SNAPSHOT'\n\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:1.0.2-1\"\n    }\n}\n\napply plugin: 'java'\napply plugin: 'eclipse'\napply plugin: 'idea'\napply plugin: 'kotlin'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\ncompile \"org.jetbrains.kotlin:kotlin-stdlib:1.0.2-1\"\ntestCompile  'junit:junit:4.11'\ntestCompile \"org.jetbrains.kotlin:kotlin-test-junit:1.0.2-1\"\n\ncompile 'org.slf4j:slf4j-api:1.7.18'\ntestCompile 'junit:junit:4.12'\n\n    // https://mvnrepository.com/artifact/com.google.code.gson/gson\ncompile group: 'com.google.code.gson', name: 'gson', version: '2.7'\n\n// https://mvnrepository.com/artifact/com.google.guava/guava\ncompile group: 'com.google.guava', name: 'guava', version: '19.0'\n\n// https://mvnrepository.com/artifact/io.netty/netty-all\ncompile group: 'io.netty', name: 'netty-all', version: '4.0.37.Final'\n\n// https://mvnrepository.com/artifact/com.moandjiezana.toml/toml4j\ncompile group: 'com.moandjiezana.toml', name: 'toml4j', version: '0.6.0'\n\n// https://mvnrepository.com/artifact/org.jetbrains.kotlin/kotlin-stdlib\ncompile group: 'org.jetbrains.kotlin', name: 'kotlin-stdlib', version: '1.0.2-1'\n\n}\n</code></pre>\n\n<p>Instead of starting off trying to make this work on a larger project. I tried to make this work by creating a new gradle project. I created a test java class which contains a method to print hello world. Then I created a test kotlin class which creates a new object of the java class and calls the method from the java class to print hello world.</p>\n\n<p>This solves the problem I had above, now I can call java classes from kotlin and kotlin from java but now it gives me errors upon running it.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HLdpr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HLdpr.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError:      kotlin/jvm/internal/Intrinsics\nat AKotlinClassKt.main(AKotlinClass.kt)\nCaused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n... 1 more\n</code></pre>\n"}, {"tags": ["android", "mockito", "kotlin", "robolectric"], "answers": [{"comments": [{"owner": {"reputation": 2174, "user_id": 6475283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jiDjEDozY2k/AAAAAAAAAAI/AAAAAAAAACM/SP7ueSX6j60/photo.jpg?sz=128", "display_name": "Tomasz Czura", "link": "https://stackoverflow.com/users/6475283/tomasz-czura"}, "edited": false, "score": 0, "creation_date": 1467359989, "post_id": 38137844, "comment_id": 63710268, "body": "Thank you for reply. I resolved this by creating <code>UseCaseTestClass</code>, which mocks <code>GetCredential</code> behaviour, so everything works good."}], "tags": [], "owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "is_accepted": true, "score": 1, "last_activity_date": 1467351837, "last_edit_date": 1495541784, "creation_date": 1467351837, "answer_id": 38137844, "question_id": 38128710, "link": "https://stackoverflow.com/questions/38128710/testing-android-kotlin-app-mockito-with-dagger-injects-null/38137844#38137844", "title": "Testing Android Kotlin app - Mockito with Dagger injects null", "body": "<p>You're using a mock instance of <code>GetCredentials</code> (<code>@Mock var mockCredentialsUseCase: GetCredentials</code>) that's why you have <code>null</code>s in its fields. It's rarely a good idea to mock everything apart from the main class under test (<code>LoginPresenter</code>). One way to think of this is to divide the dependencies into <a href=\"https://github.com/daryllxd/lifelong-learning/blob/master/programming/ruby/testing/growing-object-oriented-software-guided-by-tests.md#internals-vs-peers\" rel=\"nofollow noreferrer\">peers and internals</a>. I would rewrite the test to something like:</p>\n\n<pre><code>inline fun &lt;reified T:Any&gt; mock() : T = Mockito.mock(T::class.java)\n\n@RunWith(RobolectricGradleTestRunner::class)\n@Config(constants = BuildConfig::class)\npublic class LoginPresenterTest {\n\n    val mockContext:Context = mock()\n    val mockLoginView:LoginView = mock().apply {\n        given(this.context()).willReturn(mockContext)\n    }\n    val userRepository:UserRepository = mock() // or some in memory implementation\n    val credentials = GetCredentials(userRepository, testThreadExecutor, testPostThreadExecutor) // yes, let's use real GetCredentials implementation\n    val loginUseCase = LoginUseCase() // and a real LoginUseCase if possible\n    val loginPresenter = LoginPresenter(credentials, loginUseCase).apply {\n        view = mockLoginView\n    }\n\n    @Test\n    public fun testLoginPresenterResume(){\n        given(mockLoginView.context()).willReturn(mockContext)\n        loginPresenter.resume();\n\n        // do actual assertions as what should happen\n    }\n}\n</code></pre>\n\n<p>As usual you need to think about what you're testing. The scope of the test does not have to be limited to a single class. It's often easier to think of features you're testing instead of classes (like in <a href=\"https://dannorth.net/introducing-bdd/\" rel=\"nofollow noreferrer\">BDD</a>). Above all try to avoid tests like <a href=\"https://github.com/android10/Android-CleanArchitecture/blob/master/domain/src/test/java/com/fernandocejas/android10/sample/domain/interactor/GetUserListTest.java\" rel=\"nofollow noreferrer\">this</a> - which in my opinion adds very little value as a regression test but still impedes refactoring.</p>\n\n<p><em>PS. Roboelectric add <a href=\"https://stackoverflow.com/questions/13684094/how-can-we-access-context-of-an-application-in-robolectric\">helper functions for context</a></em></p>\n"}], "owner": {"reputation": 2174, "user_id": 6475283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jiDjEDozY2k/AAAAAAAAAAI/AAAAAAAAACM/SP7ueSX6j60/photo.jpg?sz=128", "display_name": "Tomasz Czura", "link": "https://stackoverflow.com/users/6475283/tomasz-czura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 1, "accepted_answer_id": 38137844, "answer_count": 1, "score": 3, "last_activity_date": 1467351837, "creation_date": 1467304005, "question_id": 38128710, "link": "https://stackoverflow.com/questions/38128710/testing-android-kotlin-app-mockito-with-dagger-injects-null", "title": "Testing Android Kotlin app - Mockito with Dagger injects null", "body": "<p>I'm learning testing on Android with Mockito and Robolectric. I created very simple app in Kotlin with RxJava and Dagger2, using Clean Architecture. Everything works well on device, but I can't make my test pass. Here is my LoginPresenterTest:</p>\n\n<pre><code>@RunWith(RobolectricGradleTestRunner::class)\n@Config(constants = BuildConfig::class)\npublic class LoginPresenterTest {\n\n    private lateinit var loginPresenter: LoginPresenter\n\n    @Rule @JvmField\n    public val mockitoRule: MockitoRule = MockitoJUnit.rule()\n\n    @Mock\n    private lateinit var mockContext: Context\n\n    @Mock\n    private lateinit var mockLoginUseCase: LoginUseCase\n\n    @Mock\n    private lateinit var mockLoginView: LoginView\n\n    @Mock\n    private lateinit var mockCredentialsUseCase: GetCredentials\n\n    @Before\n    public fun setUp() {\n        loginPresenter = LoginPresenter(mockCredentialsUseCase, mockLoginUseCase)\n        loginPresenter.view = mockLoginView\n    } \n\n    @Test\n    public fun testLoginPresenterResume(){\n        given(mockLoginView.context()).willReturn(mockContext)\n        loginPresenter.resume();\n    }\n}\n</code></pre>\n\n<p>LoginPresenter contructor:</p>\n\n<pre><code>class LoginPresenter @Inject constructor(@Named(\"getCredentials\") val getCredentials: UseCase,\n                                     @Named(\"loginUseCase\") val loginUseCase: LoginUseCase) : Presenter&lt;LoginView&gt;\n</code></pre>\n\n<p>in <code>loginPresenter.resume()</code> i have: </p>\n\n<pre><code>override fun resume() {\n    getCredentials.execute(GetCredentialsSubscriber() as DefaultSubscriber&lt;in Any&gt;)\n}\n</code></pre>\n\n<p>And, finally, GetCredentials:</p>\n\n<pre><code>open class GetCredentials @Inject constructor(var userRepository: UserRepository,\n                                     threadExecutor: Executor,\n                                     postExecutionThread: PostExecutionThread):\n                                    UseCase(threadExecutor, postExecutionThread) {\n\n    override fun buildUseCaseObservable(): Observable&lt;Credentials&gt; = userRepository.credentials()\n\n}\n</code></pre>\n\n<p>The problem is, that every field in <code>GetCredentials</code> is null. I think I miss something (I took pattern from this project: <a href=\"https://github.com/android10/Android-CleanArchitecture\" rel=\"nofollow\">https://github.com/android10/Android-CleanArchitecture</a>), but I can't find what is it. Does anyone know what may cause this?</p>\n"}, {"tags": ["java", "kotlin"], "answers": [{"comments": [{"owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1507902865, "post_id": 38120517, "comment_id": 80409261, "body": "You can also name the companion object if you don&#39;t like the default <code>Companion</code> name."}], "tags": [], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "is_accepted": false, "score": 27, "last_activity_date": 1467282618, "creation_date": 1467282618, "answer_id": 38120517, "question_id": 38120494, "link": "https://stackoverflow.com/questions/38120494/how-to-access-kotlin-companion-object-in-java/38120517#38120517", "title": "How to access Kotlin companion object in Java?", "body": "<p>Ops, I got it. Just use the below.</p>\n\n<pre><code>MainApplication application = MainApplication.Companion.get(mContext);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1467291478, "post_id": 38122742, "comment_id": 63678949, "body": "Nice one. Looks like there are two ways. Depends on which side (kotlin or java) we could change."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 0, "creation_date": 1467346072, "post_id": 38122742, "comment_id": 63704478, "body": "Tick this as &#39;the&#39; answer, given it&#39;s more likely one had to make the Kotlin compatible with Java than vice versa. (i.e. people likely to convert from Java to Kotlin, and work on the Kotlin code instead of Java code)."}, {"owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "edited": false, "score": 2, "creation_date": 1467346130, "post_id": 38122742, "comment_id": 63704489, "body": "The other answer (mine) i.e. using <code>MainApplication.Companion.get(mContext);</code> is also a good answer :)"}, {"owner": {"reputation": 368, "user_id": 3259524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lCPU6.jpg?s=128&g=1", "display_name": "goldy1992", "link": "https://stackoverflow.com/users/3259524/goldy1992"}, "edited": false, "score": 0, "creation_date": 1575813143, "post_id": 38122742, "comment_id": 104683822, "body": "according to official documentation: <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/java-to-kotlin-interop.html</a> you should use <code>@JvmField</code> in this scenario and NOT  <code>@JvmStatic</code>"}], "tags": [], "owner": {"reputation": 9688, "user_id": 1402641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/befad7c8ccbe09dc47c507242d3744cd?s=128&d=identicon&r=PG", "display_name": "Marcin Kozi\u0144ski", "link": "https://stackoverflow.com/users/1402641/marcin-kozi%c5%84ski"}, "is_accepted": true, "score": 73, "last_activity_date": 1501255303, "last_edit_date": 1501255303, "creation_date": 1467288707, "answer_id": 38122742, "question_id": 38120494, "link": "https://stackoverflow.com/questions/38120494/how-to-access-kotlin-companion-object-in-java/38122742#38122742", "title": "How to access Kotlin companion object in Java?", "body": "<p>You can add <a href=\"https://kotlinlang.org/docs/reference/java-to-kotlin-interop.html#static-methods\" rel=\"noreferrer\"><code>@JvmStatic</code></a> annotation to the method in companion object to make Kotlin generate a static method.</p>\n\n<pre><code>class MainApplication : Application() {\n    companion object {\n        @JvmStatic fun get(context: Context): MainApplication {\n            return context.applicationContext as MainApplication\n        }\n    }\n}\n</code></pre>\n\n<p>you can then access it from Java like before converting to Kotlin:</p>\n\n<pre><code>MainApplication application = MainApplication.get(mContext);\n</code></pre>\n\n<p>EDIT: I feel obliged to add something I learned recently: <code>@JvmStatic</code> doesn't actually <strong>move</strong> where the method gets generated. It <strong>duplicates</strong> it, by generating a static method for Java in addition to the method on the companion object. Personally I think this isn't great and it can have some implications depending on a use case, so something worth knowing.</p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 1152502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5abb78faa4f410ee891715c5016589?s=128&d=identicon&r=PG", "display_name": "Fabooo", "link": "https://stackoverflow.com/users/1152502/fabooo"}, "edited": false, "score": 0, "creation_date": 1508772048, "post_id": 46157372, "comment_id": 80733037, "body": "As of Kotlin 1.1.50 you can call functions of the companion object by omitting the <code>companion</code> key word"}, {"owner": {"reputation": 5742, "user_id": 1467321, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a97d67d08221ce54272481f69c000a6a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1467321/mike"}, "reply_to_user": {"reputation": 118, "user_id": 1152502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea5abb78faa4f410ee891715c5016589?s=128&d=identicon&r=PG", "display_name": "Fabooo", "link": "https://stackoverflow.com/users/1152502/fabooo"}, "edited": false, "score": 2, "creation_date": 1508784132, "post_id": 46157372, "comment_id": 80739746, "body": "not if you are calling the companion object from Java and it doesn&#39;t have a name."}, {"owner": {"reputation": 580, "user_id": 3505928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7e2d9b02f39d8f46ab516c6e2a6b475?s=128&d=identicon&r=PG&f=1", "display_name": "kiya", "link": "https://stackoverflow.com/users/3505928/kiya"}, "edited": false, "score": 0, "creation_date": 1559121160, "post_id": 46157372, "comment_id": 99317941, "body": "I had to use <code>MyClass1.Object1.method1()</code>, but this worked best, thanks!"}], "tags": [], "owner": {"reputation": 5742, "user_id": 1467321, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a97d67d08221ce54272481f69c000a6a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/1467321/mike"}, "is_accepted": false, "score": 6, "last_activity_date": 1505137920, "creation_date": 1505137920, "answer_id": 46157372, "question_id": 38120494, "link": "https://stackoverflow.com/questions/38120494/how-to-access-kotlin-companion-object-in-java/46157372#46157372", "title": "How to access Kotlin companion object in Java?", "body": "<p>By omitting the name of your companion object, the name <code>Companion</code> must be used to access the methods.</p>\n\n<p>Example:  </p>\n\n<pre><code>class MyClass1 {\n    companion object Object1 {\n        fun method1 {\n        }\n    }\n}\n\nclass MyClass2 {\n    companion object {\n        fun method2 {\n        }\n    }\n}\n</code></pre>\n\n<p>To invoke the first companion object method you would do the following:  </p>\n\n<pre><code>MyClass1.method1()\n</code></pre>\n\n<p>To invoke the second:  </p>\n\n<pre><code>MyClass2.Companion.method2()\n</code></pre>\n\n<p>See the Kotlin docs on <a href=\"https://kotlinlang.org/docs/reference/object-declarations.html#companion-objects\" rel=\"noreferrer\">Companion Objects</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 7331042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74e00db96e0c89df5a5c55729dce57ac?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitriy Pavlukhin", "link": "https://stackoverflow.com/users/7331042/dmitriy-pavlukhin"}, "is_accepted": false, "score": 0, "last_activity_date": 1576789941, "last_edit_date": 1576789941, "creation_date": 1576076780, "answer_id": 59288695, "question_id": 38120494, "link": "https://stackoverflow.com/questions/38120494/how-to-access-kotlin-companion-object-in-java/59288695#59288695", "title": "How to access Kotlin companion object in Java?", "body": "<p>You may encounter a problem where you cannot access the Companion object's method in Java if the <code>new</code> keyword is used in the method call. The <code>new</code> keyword should be omitted. The <a href=\"https://kotlinlang.org/docs/tutorials/kotlin-for-py/objects-and-companion-objects.html\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n\n<blockquote>\n  <p>Companion objects and their members can only be accessed via the containing class name, not via instances of the containing class. </p>\n</blockquote>\n\n<p>So if you have a class like this:</p>\n\n<pre><code>class MyClass {\n    companion object {\n        fun create() {}\n    }\n}\n</code></pre>\n\n<p>You can call the companion object's method like this: </p>\n\n<p><code>MyClass.create()</code></p>\n\n<p>But not like this: </p>\n\n<p><code>new MyClass.create</code></p>\n"}], "owner": {"reputation": 29751, "user_id": 3286489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yTcB3.png?s=128&g=1", "display_name": "Elye", "link": "https://stackoverflow.com/users/3286489/elye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18018, "favorite_count": 1, "accepted_answer_id": 38122742, "answer_count": 4, "score": 55, "last_activity_date": 1576789941, "creation_date": 1467282560, "question_id": 38120494, "link": "https://stackoverflow.com/questions/38120494/how-to-access-kotlin-companion-object-in-java", "title": "How to access Kotlin companion object in Java?", "body": "<p>I convert one of my Java class to Kotlin and the class as below.</p>\n\n<pre><code>class MainApplication : Application() {\n    companion object {\n        operator fun get(context: Context): MainApplication {\n            return context.applicationContext as MainApplication\n        }\n    }\n}\n</code></pre>\n\n<p>It has a static function <code>get</code>.</p>\n\n<p>I still have a Java function accessing it.</p>\n\n<pre><code>MainApplication application = MainApplication.get(mContext);\n</code></pre>\n\n<p>It was good when MainApplication is in Java. But not when MainApplication in Kotlin, the above code error</p>\n\n<pre><code>Error:(27, 54) error: cannot find symbol method get(Context)\n</code></pre>\n\n<p>How could I access <code>get</code> in my Java code above?</p>\n"}, {"tags": ["types", "kotlin"], "comments": [{"owner": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1467280860, "post_id": 38119557, "comment_id": 63671694, "body": "Have you tried building from command line, i.e. gradle, invalidating idea cache and restarting? What&#39;s the Kotlin compiler version you&#39;re using? What&#39;s the Idea Kotlin Plugin version you&#39;re using?"}, {"owner": {"reputation": 8136, "user_id": 1600533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1867190f5117fa54856a8b07947632e5?s=128&d=identicon&r=PG", "display_name": "Eldamir", "link": "https://stackoverflow.com/users/1600533/eldamir"}, "reply_to_user": {"reputation": 32343, "user_id": 155213, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/57bc3e08faeb981ddc81abd1d25c3bf1?s=128&d=identicon&r=PG", "display_name": "miensol", "link": "https://stackoverflow.com/users/155213/miensol"}, "edited": false, "score": 0, "creation_date": 1467282850, "post_id": 38119557, "comment_id": 63673045, "body": "Tried you suggestions and updated my question. No luck"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467283045, "post_id": 38119557, "comment_id": 63673166, "body": "Can you include code instead of a screenshot, smallest failing example possible?  Possibly you are showing what you think is the problem, but not showing enough so that we can see the problem."}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467283105, "post_id": 38119557, "comment_id": 63673212, "body": "put the code in the smallest function that causes the problem and show more of it."}, {"owner": {"reputation": 8136, "user_id": 1600533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1867190f5117fa54856a8b07947632e5?s=128&d=identicon&r=PG", "display_name": "Eldamir", "link": "https://stackoverflow.com/users/1600533/eldamir"}, "reply_to_user": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467283527, "post_id": 38119557, "comment_id": 63673507, "body": "@JaysonMinard done"}, {"owner": {"reputation": 73428, "user_id": 3679676, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0faaf44a8922cf165ff73d9efd0dade?s=128&d=identicon&r=PG", "display_name": "Jayson Minard", "link": "https://stackoverflow.com/users/3679676/jayson-minard"}, "edited": false, "score": 0, "creation_date": 1467283677, "post_id": 38119557, "comment_id": 63673599, "body": "Are you sure it is <code>null</code> checked in your failing case?  try <code>jdbcTemplate!!.execute(&quot;DROP TABLE customers IF EXISTS&quot;)</code> to confirm that isn&#39;t the issue."}, {"owner": {"reputation": 8136, "user_id": 1600533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1867190f5117fa54856a8b07947632e5?s=128&d=identicon&r=PG", "display_name": "Eldamir", "link": "https://stackoverflow.com/users/1600533/eldamir"}, "edited": false, "score": 0, "creation_date": 1467283783, "post_id": 38119557, "comment_id": 63673668, "body": "That did the trick. But why? Isn&#39;t it supposed to be smart casted?"}, {"owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "edited": false, "score": 0, "creation_date": 1467284004, "post_id": 38119557, "comment_id": 63673825, "body": "Because <code>jdbcTemplate</code> can be changed (in theory) from other thread. Also there is issue for this case: <a href=\"https://youtrack.jetbrains.com/issue/KT-11119\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/KT-11119</a>"}, {"owner": {"reputation": 8136, "user_id": 1600533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1867190f5117fa54856a8b07947632e5?s=128&d=identicon&r=PG", "display_name": "Eldamir", "link": "https://stackoverflow.com/users/1600533/eldamir"}, "edited": false, "score": 0, "creation_date": 1467284194, "post_id": 38119557, "comment_id": 63673946, "body": "Right, ok, so changing it to val instead of var might do the trick. Thanks for you assistance. If you formulate this into an answer, I&#39;ll mark it as the solution"}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 3301979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60bd29b0c3b3df081319675eb1d4b295?s=128&d=identicon&r=PG", "display_name": "erokhins", "link": "https://stackoverflow.com/users/3301979/erokhins"}, "is_accepted": true, "score": 2, "last_activity_date": 1467284666, "creation_date": 1467284666, "answer_id": 38121291, "question_id": 38119557, "link": "https://stackoverflow.com/questions/38119557/function-parameter-type-match-issue/38121291#38121291", "title": "function parameter type match issue", "body": "<p>The problem here is in <code>jdbcTemplate</code> -- it can be null, because it can be changed from other thread.\nTo fix compilation error you should replace your call to this:\n<code>jdbcTemplate!!.execute(\"DROP TABLE customers IF EXISTS\")</code>.</p>\n\n<p>About unclear error message there is an issue: <a href=\"https://youtrack.jetbrains.com/issue/KT-11119\" rel=\"nofollow\">KT-11119</a>.</p>\n\n<p>Also it may be a good idea use <code>lateinit</code> for this case. (see <a href=\"https://kotlinlang.org/docs/reference/properties.html#late-initialized-properties\" rel=\"nofollow\">documentation</a> for more info.)</p>\n"}, {"tags": [], "owner": {"reputation": 11834, "user_id": 1538877, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/N9qfZ.jpg?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/1538877/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1467548034, "creation_date": 1467548034, "answer_id": 38169845, "question_id": 38119557, "link": "https://stackoverflow.com/questions/38119557/function-parameter-type-match-issue/38169845#38169845", "title": "function parameter type match issue", "body": "<p>Checking with <code>!!</code> ugly, instead i suggest this two approaches.</p>\n\n<p>Use <code>lateinit</code> which specially added for DI frameworks</p>\n\n<pre><code>class Database {\n    @Autowired\n    private lateinit var jdbcTemplate: JdbcTemplate;\n\n    fun initCustomerDatabase() {\n        jdbcTemplate.execute(\"DROP TABLE customers IF EXISTS\")\n    }\n}\n</code></pre>\n\n<p>Cons: Additional runtime check on every call on <code>jdbcTemplate</code>.\nCons: <code>jdbcTemplate</code> is mutable.</p>\n\n<p>Use constructor injection:</p>\n\n<pre><code>class Database @Autowired constructor(val jdbcTemplate: JdbcTemplate) {\n    fun initCustomerDatabase() {\n        jdbcTemplate.execute(\"DROP TABLE customers IF EXISTS\")\n    }\n}\n</code></pre>\n\n<p>Pros: <code>jdbcTemplate</code> immutable\nPros: No runtime checks.</p>\n\n<p>In spring 4.3 you can write following code even without <code>@Autowired constructor</code>, example:</p>\n\n<pre><code>class Database(val jdbcTemplate: JdbcTemplate) {\n    fun initCustomerDatabase() {\n        jdbcTemplate.execute(\"DROP TABLE customers IF EXISTS\")\n    }\n}\n</code></pre>\n\n<p>Personally i use constructor injection, because it's very useful for testing.</p>\n"}], "owner": {"reputation": 8136, "user_id": 1600533, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1867190f5117fa54856a8b07947632e5?s=128&d=identicon&r=PG", "display_name": "Eldamir", "link": "https://stackoverflow.com/users/1600533/eldamir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 38121291, "answer_count": 2, "score": 0, "last_activity_date": 1467548034, "creation_date": 1467280166, "last_edit_date": 1467283904, "question_id": 38119557, "link": "https://stackoverflow.com/questions/38119557/function-parameter-type-match-issue", "title": "function parameter type match issue", "body": "<p>IntelliJ is throwing the following error at me, but for all I can tell, there is no problem.</p>\n\n<h2>Minimal example</h2>\n\n<pre><code>import org.springframework.jdbc.core.JdbcTemplate\n\n// ...\n\nvar jdbcTemplate: JdbcTemplate? = null\n// ... relying on dependency injection from Spring\nif (jdbcTemplate == null) {\n    throw RuntimeException(\"jdbcTemplate not injected correctly\")\n}\njdbcTemplate.execute(\"DROP TABLE customers IF EXISTS\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZkNqW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZkNqW.png\" alt=\"Screen shot of compiler error\"></a></p>\n\n<p>The function has three implementations. One of which accepts a <code>String</code>. A string is what I am giving it. So what is up?</p>\n\n<p>I have tried:</p>\n\n<ul>\n<li>Invalidating cache and restarted IntelloJ</li>\n<li>Building through <code>./gradlew build</code></li>\n</ul>\n\n<p>+</p>\n\n<pre><code>:compileKotlin\ne: /home/ruben/workspace/campingmanager/src/main/kotlin/hello/Application.kt: (27, 22): None of the following functions can be called with the arguments supplied: \npublic open fun execute(sql: String!): Unit defined in org.springframework.jdbc.core.JdbcTemplate\npublic open fun &lt;T : Any!&gt; execute(action: ConnectionCallback&lt;(???..???)&gt;!): (???..???) defined in org.springframework.jdbc.core.JdbcTemplate\npublic open fun &lt;T : Any!&gt; execute(action: StatementCallback&lt;(???..???)&gt;!): (???..???) defined in org.springframework.jdbc.core.JdbcTemplate\ne: /home/ruben/workspace/campingmanager/src/main/kotlin/hello/Application.kt: (28, 22): None of the following functions can be called with the arguments supplied: \npublic open fun execute(sql: String!): Unit defined in org.springframework.jdbc.core.JdbcTemplate\npublic open fun &lt;T : Any!&gt; execute(action: ConnectionCallback&lt;(???..???)&gt;!): (???..???) defined in org.springframework.jdbc.core.JdbcTemplate\npublic open fun &lt;T : Any!&gt; execute(action: StatementCallback&lt;(???..???)&gt;!): (???..???) defined in org.springframework.jdbc.core.JdbcTemplate\n:compileKotlin FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileKotlin'.\n&gt; Compilation error. See log for more details\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 8.113 secs\n</code></pre>\n\n<ul>\n<li>Getting latest Kotlin version 1.0.2-1</li>\n</ul>\n\n<p><strong>Kotlin version</strong>: org.jetbrains.kotlin:kotlin-stdlib:1.0.2</p>\n\n<p><strong>Kotlin plugin version</strong>: 1.0.2-1-release-IJ145-20</p>\n\n<p><strong>IntelliJ version</strong>: 2016.1.3</p>\n"}]